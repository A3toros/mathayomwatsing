var PQ=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var aFe=PQ((gFe,Vb)=>{function pW(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var tf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _k={exports:{}},hy={},Sk={exports:{}},tn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SO;function OQ(){if(SO)return tn;SO=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function g(V){return V===null||typeof V!="object"?null:(V=f&&V[f]||V["@@iterator"],typeof V=="function"?V:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,y={};function v(V,L,H){this.props=V,this.context=L,this.refs=y,this.updater=H||p}v.prototype.isReactComponent={},v.prototype.setState=function(V,L){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,L,"setState")},v.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function T(){}T.prototype=v.prototype;function _(V,L,H){this.props=V,this.context=L,this.refs=y,this.updater=H||p}var b=_.prototype=new T;b.constructor=_,x(b,v.prototype),b.isPureReactComponent=!0;var E=Array.isArray,k=Object.prototype.hasOwnProperty,A={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function j(V,L,H){var J,Q={},ne=null,Z=null;if(L!=null)for(J in L.ref!==void 0&&(Z=L.ref),L.key!==void 0&&(ne=""+L.key),L)k.call(L,J)&&!P.hasOwnProperty(J)&&(Q[J]=L[J]);var se=arguments.length-2;if(se===1)Q.children=H;else if(1<se){for(var ce=Array(se),he=0;he<se;he++)ce[he]=arguments[he+2];Q.children=ce}if(V&&V.defaultProps)for(J in se=V.defaultProps,se)Q[J]===void 0&&(Q[J]=se[J]);return{$$typeof:e,type:V,key:ne,ref:Z,props:Q,_owner:A.current}}function O(V,L){return{$$typeof:e,type:V.type,key:L,ref:V.ref,props:V.props,_owner:V._owner}}function R(V){return typeof V=="object"&&V!==null&&V.$$typeof===e}function M(V){var L={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(H){return L[H]})}var G=/\/+/g;function K(V,L){return typeof V=="object"&&V!==null&&V.key!=null?M(""+V.key):L.toString(36)}function re(V,L,H,J,Q){var ne=typeof V;(ne==="undefined"||ne==="boolean")&&(V=null);var Z=!1;if(V===null)Z=!0;else switch(ne){case"string":case"number":Z=!0;break;case"object":switch(V.$$typeof){case e:case t:Z=!0}}if(Z)return Z=V,Q=Q(Z),V=J===""?"."+K(Z,0):J,E(Q)?(H="",V!=null&&(H=V.replace(G,"$&/")+"/"),re(Q,L,H,"",function(he){return he})):Q!=null&&(R(Q)&&(Q=O(Q,H+(!Q.key||Z&&Z.key===Q.key?"":(""+Q.key).replace(G,"$&/")+"/")+V)),L.push(Q)),1;if(Z=0,J=J===""?".":J+":",E(V))for(var se=0;se<V.length;se++){ne=V[se];var ce=J+K(ne,se);Z+=re(ne,L,H,ce,Q)}else if(ce=g(V),typeof ce=="function")for(V=ce.call(V),se=0;!(ne=V.next()).done;)ne=ne.value,ce=J+K(ne,se++),Z+=re(ne,L,H,ce,Q);else if(ne==="object")throw L=String(V),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return Z}function Y(V,L,H){if(V==null)return V;var J=[],Q=0;return re(V,J,"","",function(ne){return L.call(H,ne,Q++)}),J}function ee(V){if(V._status===-1){var L=V._result;L=L(),L.then(function(H){(V._status===0||V._status===-1)&&(V._status=1,V._result=H)},function(H){(V._status===0||V._status===-1)&&(V._status=2,V._result=H)}),V._status===-1&&(V._status=0,V._result=L)}if(V._status===1)return V._result.default;throw V._result}var B={current:null},z={transition:null},I={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:z,ReactCurrentOwner:A};function W(){throw Error("act(...) is not supported in production builds of React.")}return tn.Children={map:Y,forEach:function(V,L,H){Y(V,function(){L.apply(this,arguments)},H)},count:function(V){var L=0;return Y(V,function(){L++}),L},toArray:function(V){return Y(V,function(L){return L})||[]},only:function(V){if(!R(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},tn.Component=v,tn.Fragment=r,tn.Profiler=s,tn.PureComponent=_,tn.StrictMode=n,tn.Suspense=l,tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,tn.act=W,tn.cloneElement=function(V,L,H){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var J=x({},V.props),Q=V.key,ne=V.ref,Z=V._owner;if(L!=null){if(L.ref!==void 0&&(ne=L.ref,Z=A.current),L.key!==void 0&&(Q=""+L.key),V.type&&V.type.defaultProps)var se=V.type.defaultProps;for(ce in L)k.call(L,ce)&&!P.hasOwnProperty(ce)&&(J[ce]=L[ce]===void 0&&se!==void 0?se[ce]:L[ce])}var ce=arguments.length-2;if(ce===1)J.children=H;else if(1<ce){se=Array(ce);for(var he=0;he<ce;he++)se[he]=arguments[he+2];J.children=se}return{$$typeof:e,type:V.type,key:Q,ref:ne,props:J,_owner:Z}},tn.createContext=function(V){return V={$$typeof:i,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:a,_context:V},V.Consumer=V},tn.createElement=j,tn.createFactory=function(V){var L=j.bind(null,V);return L.type=V,L},tn.createRef=function(){return{current:null}},tn.forwardRef=function(V){return{$$typeof:o,render:V}},tn.isValidElement=R,tn.lazy=function(V){return{$$typeof:d,_payload:{_status:-1,_result:V},_init:ee}},tn.memo=function(V,L){return{$$typeof:u,type:V,compare:L===void 0?null:L}},tn.startTransition=function(V){var L=z.transition;z.transition={};try{V()}finally{z.transition=L}},tn.unstable_act=W,tn.useCallback=function(V,L){return B.current.useCallback(V,L)},tn.useContext=function(V){return B.current.useContext(V)},tn.useDebugValue=function(){},tn.useDeferredValue=function(V){return B.current.useDeferredValue(V)},tn.useEffect=function(V,L){return B.current.useEffect(V,L)},tn.useId=function(){return B.current.useId()},tn.useImperativeHandle=function(V,L,H){return B.current.useImperativeHandle(V,L,H)},tn.useInsertionEffect=function(V,L){return B.current.useInsertionEffect(V,L)},tn.useLayoutEffect=function(V,L){return B.current.useLayoutEffect(V,L)},tn.useMemo=function(V,L){return B.current.useMemo(V,L)},tn.useReducer=function(V,L,H){return B.current.useReducer(V,L,H)},tn.useRef=function(V){return B.current.useRef(V)},tn.useState=function(V){return B.current.useState(V)},tn.useSyncExternalStore=function(V,L,H){return B.current.useSyncExternalStore(V,L,H)},tn.useTransition=function(){return B.current.useTransition()},tn.version="18.3.1",tn}var kO;function A2(){return kO||(kO=1,Sk.exports=OQ()),Sk.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TO;function FQ(){if(TO)return hy;TO=1;var e=A2(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function i(o,l,u){var d,f={},g=null,p=null;u!==void 0&&(g=""+u),l.key!==void 0&&(g=""+l.key),l.ref!==void 0&&(p=l.ref);for(d in l)n.call(l,d)&&!a.hasOwnProperty(d)&&(f[d]=l[d]);if(o&&o.defaultProps)for(d in l=o.defaultProps,l)f[d]===void 0&&(f[d]=l[d]);return{$$typeof:t,type:o,key:g,ref:p,props:f,_owner:s.current}}return hy.Fragment=r,hy.jsx=i,hy.jsxs=i,hy}var CO;function RQ(){return CO||(CO=1,_k.exports=FQ()),_k.exports}var c=RQ(),C=A2();const Be=kn(C),DQ=pW({__proto__:null,default:Be},[C]);var Kw={},kk={exports:{}},io={},Tk={exports:{}},Ck={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EO;function IQ(){return EO||(EO=1,(function(e){function t(z,I){var W=z.length;z.push(I);e:for(;0<W;){var V=W-1>>>1,L=z[V];if(0<s(L,I))z[V]=I,z[W]=L,W=V;else break e}}function r(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var I=z[0],W=z.pop();if(W!==I){z[0]=W;e:for(var V=0,L=z.length,H=L>>>1;V<H;){var J=2*(V+1)-1,Q=z[J],ne=J+1,Z=z[ne];if(0>s(Q,W))ne<L&&0>s(Z,Q)?(z[V]=Z,z[ne]=W,V=ne):(z[V]=Q,z[J]=W,V=J);else if(ne<L&&0>s(Z,W))z[V]=Z,z[ne]=W,V=ne;else break e}}return I}function s(z,I){var W=z.sortIndex-I.sortIndex;return W!==0?W:z.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],u=[],d=1,f=null,g=3,p=!1,x=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var I=r(u);I!==null;){if(I.callback===null)n(u);else if(I.startTime<=z)n(u),I.sortIndex=I.expirationTime,t(l,I);else break;I=r(u)}}function E(z){if(y=!1,b(z),!x)if(r(l)!==null)x=!0,ee(k);else{var I=r(u);I!==null&&B(E,I.startTime-z)}}function k(z,I){x=!1,y&&(y=!1,T(j),j=-1),p=!0;var W=g;try{for(b(I),f=r(l);f!==null&&(!(f.expirationTime>I)||z&&!M());){var V=f.callback;if(typeof V=="function"){f.callback=null,g=f.priorityLevel;var L=V(f.expirationTime<=I);I=e.unstable_now(),typeof L=="function"?f.callback=L:f===r(l)&&n(l),b(I)}else n(l);f=r(l)}if(f!==null)var H=!0;else{var J=r(u);J!==null&&B(E,J.startTime-I),H=!1}return H}finally{f=null,g=W,p=!1}}var A=!1,P=null,j=-1,O=5,R=-1;function M(){return!(e.unstable_now()-R<O)}function G(){if(P!==null){var z=e.unstable_now();R=z;var I=!0;try{I=P(!0,z)}finally{I?K():(A=!1,P=null)}}else A=!1}var K;if(typeof _=="function")K=function(){_(G)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,Y=re.port2;re.port1.onmessage=G,K=function(){Y.postMessage(null)}}else K=function(){v(G,0)};function ee(z){P=z,A||(A=!0,K())}function B(z,I){j=v(function(){z(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){x||p||(x=!0,ee(k))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(z){switch(g){case 1:case 2:case 3:var I=3;break;default:I=g}var W=g;g=I;try{return z()}finally{g=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,I){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var W=g;g=z;try{return I()}finally{g=W}},e.unstable_scheduleCallback=function(z,I,W){var V=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?V+W:V):W=V,z){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=W+L,z={id:d++,callback:I,priorityLevel:z,startTime:W,expirationTime:L,sortIndex:-1},W>V?(z.sortIndex=W,t(u,z),r(l)===null&&z===r(u)&&(y?(T(j),j=-1):y=!0,B(E,W-V))):(z.sortIndex=L,t(l,z),x||p||(x=!0,ee(k))),z},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(z){var I=g;return function(){var W=g;g=I;try{return z.apply(this,arguments)}finally{g=W}}}})(Ck)),Ck}var NO;function vj(){return NO||(NO=1,Tk.exports=IQ()),Tk.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AO;function MQ(){if(AO)return io;AO=1;var e=A2(),t=vj();function r(h){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+h,N=1;N<arguments.length;N++)m+="&args[]="+encodeURIComponent(arguments[N]);return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(h,m){i(h,m),i(h+"Capture",m)}function i(h,m){for(s[h]=m,h=0;h<m.length;h++)n.add(m[h])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function g(h){return l.call(f,h)?!0:l.call(d,h)?!1:u.test(h)?f[h]=!0:(d[h]=!0,!1)}function p(h,m,N,D){if(N!==null&&N.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return D?!1:N!==null?!N.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function x(h,m,N,D){if(m===null||typeof m>"u"||p(h,m,N,D))return!0;if(D)return!1;if(N!==null)switch(N.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function y(h,m,N,D,q,te,de){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=D,this.attributeNamespace=q,this.mustUseProperty=N,this.propertyName=h,this.type=m,this.sanitizeURL=te,this.removeEmptyString=de}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){v[h]=new y(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var m=h[0];v[m]=new y(m,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){v[h]=new y(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){v[h]=new y(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){v[h]=new y(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){v[h]=new y(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){v[h]=new y(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){v[h]=new y(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){v[h]=new y(h,5,!1,h.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function _(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var m=h.replace(T,_);v[m]=new y(m,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var m=h.replace(T,_);v[m]=new y(m,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var m=h.replace(T,_);v[m]=new y(m,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){v[h]=new y(h,1,!1,h.toLowerCase(),null,!1,!1)}),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){v[h]=new y(h,1,!1,h.toLowerCase(),null,!0,!0)});function b(h,m,N,D){var q=v.hasOwnProperty(m)?v[m]:null;(q!==null?q.type!==0:D||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(x(m,N,q,D)&&(N=null),D||q===null?g(m)&&(N===null?h.removeAttribute(m):h.setAttribute(m,""+N)):q.mustUseProperty?h[q.propertyName]=N===null?q.type===3?!1:"":N:(m=q.attributeName,D=q.attributeNamespace,N===null?h.removeAttribute(m):(q=q.type,N=q===3||q===4&&N===!0?"":""+N,D?h.setAttributeNS(D,m,N):h.setAttribute(m,N))))}var E=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),A=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),M=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),z=Symbol.iterator;function I(h){return h===null||typeof h!="object"?null:(h=z&&h[z]||h["@@iterator"],typeof h=="function"?h:null)}var W=Object.assign,V;function L(h){if(V===void 0)try{throw Error()}catch(N){var m=N.stack.trim().match(/\n( *(at )?)/);V=m&&m[1]||""}return`
`+V+h}var H=!1;function J(h,m){if(!h||H)return"";H=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(it){var D=it}Reflect.construct(h,[],m)}else{try{m.call()}catch(it){D=it}h.call(m.prototype)}else{try{throw Error()}catch(it){D=it}h()}}catch(it){if(it&&D&&typeof it.stack=="string"){for(var q=it.stack.split(`
`),te=D.stack.split(`
`),de=q.length-1,Ae=te.length-1;1<=de&&0<=Ae&&q[de]!==te[Ae];)Ae--;for(;1<=de&&0<=Ae;de--,Ae--)if(q[de]!==te[Ae]){if(de!==1||Ae!==1)do if(de--,Ae--,0>Ae||q[de]!==te[Ae]){var Le=`
`+q[de].replace(" at new "," at ");return h.displayName&&Le.includes("<anonymous>")&&(Le=Le.replace("<anonymous>",h.displayName)),Le}while(1<=de&&0<=Ae);break}}}finally{H=!1,Error.prepareStackTrace=N}return(h=h?h.displayName||h.name:"")?L(h):""}function Q(h){switch(h.tag){case 5:return L(h.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return h=J(h.type,!1),h;case 11:return h=J(h.type.render,!1),h;case 1:return h=J(h.type,!0),h;default:return""}}function ne(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case P:return"Fragment";case A:return"Portal";case O:return"Profiler";case j:return"StrictMode";case K:return"Suspense";case re:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case M:return(h.displayName||"Context")+".Consumer";case R:return(h._context.displayName||"Context")+".Provider";case G:var m=h.render;return h=h.displayName,h||(h=m.displayName||m.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case Y:return m=h.displayName||null,m!==null?m:ne(h.type)||"Memo";case ee:m=h._payload,h=h._init;try{return ne(h(m))}catch{}}return null}function Z(h){var m=h.type;switch(h.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=m.render,h=h.displayName||h.name||"",m.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(m);case 8:return m===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function se(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function ce(h){var m=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function he(h){var m=ce(h)?"checked":"value",N=Object.getOwnPropertyDescriptor(h.constructor.prototype,m),D=""+h[m];if(!h.hasOwnProperty(m)&&typeof N<"u"&&typeof N.get=="function"&&typeof N.set=="function"){var q=N.get,te=N.set;return Object.defineProperty(h,m,{configurable:!0,get:function(){return q.call(this)},set:function(de){D=""+de,te.call(this,de)}}),Object.defineProperty(h,m,{enumerable:N.enumerable}),{getValue:function(){return D},setValue:function(de){D=""+de},stopTracking:function(){h._valueTracker=null,delete h[m]}}}}function Ee(h){h._valueTracker||(h._valueTracker=he(h))}function ie(h){if(!h)return!1;var m=h._valueTracker;if(!m)return!0;var N=m.getValue(),D="";return h&&(D=ce(h)?h.checked?"true":"false":h.value),h=D,h!==N?(m.setValue(h),!0):!1}function me(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function Ne(h,m){var N=m.checked;return W({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:N??h._wrapperState.initialChecked})}function Oe(h,m){var N=m.defaultValue==null?"":m.defaultValue,D=m.checked!=null?m.checked:m.defaultChecked;N=se(m.value!=null?m.value:N),h._wrapperState={initialChecked:D,initialValue:N,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function Re(h,m){m=m.checked,m!=null&&b(h,"checked",m,!1)}function ze(h,m){Re(h,m);var N=se(m.value),D=m.type;if(N!=null)D==="number"?(N===0&&h.value===""||h.value!=N)&&(h.value=""+N):h.value!==""+N&&(h.value=""+N);else if(D==="submit"||D==="reset"){h.removeAttribute("value");return}m.hasOwnProperty("value")?et(h,m.type,N):m.hasOwnProperty("defaultValue")&&et(h,m.type,se(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(h.defaultChecked=!!m.defaultChecked)}function Nt(h,m,N){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var D=m.type;if(!(D!=="submit"&&D!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+h._wrapperState.initialValue,N||m===h.value||(h.value=m),h.defaultValue=m}N=h.name,N!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,N!==""&&(h.name=N)}function et(h,m,N){(m!=="number"||me(h.ownerDocument)!==h)&&(N==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+N&&(h.defaultValue=""+N))}var Me=Array.isArray;function Fe(h,m,N,D){if(h=h.options,m){m={};for(var q=0;q<N.length;q++)m["$"+N[q]]=!0;for(N=0;N<h.length;N++)q=m.hasOwnProperty("$"+h[N].value),h[N].selected!==q&&(h[N].selected=q),q&&D&&(h[N].defaultSelected=!0)}else{for(N=""+se(N),m=null,q=0;q<h.length;q++){if(h[q].value===N){h[q].selected=!0,D&&(h[q].defaultSelected=!0);return}m!==null||h[q].disabled||(m=h[q])}m!==null&&(m.selected=!0)}}function Ke(h,m){if(m.dangerouslySetInnerHTML!=null)throw Error(r(91));return W({},m,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function xt(h,m){var N=m.value;if(N==null){if(N=m.children,m=m.defaultValue,N!=null){if(m!=null)throw Error(r(92));if(Me(N)){if(1<N.length)throw Error(r(93));N=N[0]}m=N}m==null&&(m=""),N=m}h._wrapperState={initialValue:se(N)}}function ut(h,m){var N=se(m.value),D=se(m.defaultValue);N!=null&&(N=""+N,N!==h.value&&(h.value=N),m.defaultValue==null&&h.defaultValue!==N&&(h.defaultValue=N)),D!=null&&(h.defaultValue=""+D)}function At(h){var m=h.textContent;m===h._wrapperState.initialValue&&m!==""&&m!==null&&(h.value=m)}function Dt(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qe(h,m){return h==null||h==="http://www.w3.org/1999/xhtml"?Dt(m):h==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var tt,vt=(function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,N,D,q){MSApp.execUnsafeLocalFunction(function(){return h(m,N,D,q)})}:h})(function(h,m){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=m;else{for(tt=tt||document.createElement("div"),tt.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=tt.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;m.firstChild;)h.appendChild(m.firstChild)}});function gt(h,m){if(m){var N=h.firstChild;if(N&&N===h.lastChild&&N.nodeType===3){N.nodeValue=m;return}}h.textContent=m}var _t={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wt=["Webkit","ms","Moz","O"];Object.keys(_t).forEach(function(h){Wt.forEach(function(m){m=m+h.charAt(0).toUpperCase()+h.substring(1),_t[m]=_t[h]})});function Zt(h,m,N){return m==null||typeof m=="boolean"||m===""?"":N||typeof m!="number"||m===0||_t.hasOwnProperty(h)&&_t[h]?(""+m).trim():m+"px"}function pr(h,m){h=h.style;for(var N in m)if(m.hasOwnProperty(N)){var D=N.indexOf("--")===0,q=Zt(N,m[N],D);N==="float"&&(N="cssFloat"),D?h.setProperty(N,q):h[N]=q}}var Ir=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function br(h,m){if(m){if(Ir[h]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(r(137,h));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(r(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(r(61))}if(m.style!=null&&typeof m.style!="object")throw Error(r(62))}}function xr(h,m){if(h.indexOf("-")===-1)return typeof m.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var er=null;function _r(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var ge=null,ue=null,we=null;function Te(h){if(h=th(h)){if(typeof ge!="function")throw Error(r(280));var m=h.stateNode;m&&(m=Js(m),ge(h.stateNode,h.type,m))}}function Xe(h){ue?we?we.push(h):we=[h]:ue=h}function Ct(){if(ue){var h=ue,m=we;if(we=ue=null,Te(h),m)for(h=0;h<m.length;h++)Te(m[h])}}function Pt(h,m){return h(m)}function Ue(){}var ft=!1;function ot(h,m,N){if(ft)return h(m,N);ft=!0;try{return Pt(h,m,N)}finally{ft=!1,(ue!==null||we!==null)&&(Ue(),Ct())}}function Ht(h,m){var N=h.stateNode;if(N===null)return null;var D=Js(N);if(D===null)return null;N=D[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(D=!D.disabled)||(h=h.type,D=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!D;break e;default:h=!1}if(h)return null;if(N&&typeof N!="function")throw Error(r(231,m,typeof N));return N}var Gt=!1;if(o)try{var mr={};Object.defineProperty(mr,"passive",{get:function(){Gt=!0}}),window.addEventListener("test",mr,mr),window.removeEventListener("test",mr,mr)}catch{Gt=!1}function Vr(h,m,N,D,q,te,de,Ae,Le){var it=Array.prototype.slice.call(arguments,3);try{m.apply(N,it)}catch(Rt){this.onError(Rt)}}var vr=!1,hr=null,le=!1,_e=null,pe={onError:function(h){vr=!0,hr=h}};function ve(h,m,N,D,q,te,de,Ae,Le){vr=!1,hr=null,Vr.apply(pe,arguments)}function Se(h,m,N,D,q,te,de,Ae,Le){if(ve.apply(this,arguments),vr){if(vr){var it=hr;vr=!1,hr=null}else throw Error(r(198));le||(le=!0,_e=it)}}function ke(h){var m=h,N=h;if(h.alternate)for(;m.return;)m=m.return;else{h=m;do m=h,(m.flags&4098)!==0&&(N=m.return),h=m.return;while(h)}return m.tag===3?N:null}function Ge(h){if(h.tag===13){var m=h.memoizedState;if(m===null&&(h=h.alternate,h!==null&&(m=h.memoizedState)),m!==null)return m.dehydrated}return null}function dt(h){if(ke(h)!==h)throw Error(r(188))}function Ie(h){var m=h.alternate;if(!m){if(m=ke(h),m===null)throw Error(r(188));return m!==h?null:h}for(var N=h,D=m;;){var q=N.return;if(q===null)break;var te=q.alternate;if(te===null){if(D=q.return,D!==null){N=D;continue}break}if(q.child===te.child){for(te=q.child;te;){if(te===N)return dt(q),h;if(te===D)return dt(q),m;te=te.sibling}throw Error(r(188))}if(N.return!==D.return)N=q,D=te;else{for(var de=!1,Ae=q.child;Ae;){if(Ae===N){de=!0,N=q,D=te;break}if(Ae===D){de=!0,D=q,N=te;break}Ae=Ae.sibling}if(!de){for(Ae=te.child;Ae;){if(Ae===N){de=!0,N=te,D=q;break}if(Ae===D){de=!0,D=te,N=q;break}Ae=Ae.sibling}if(!de)throw Error(r(189))}}if(N.alternate!==D)throw Error(r(190))}if(N.tag!==3)throw Error(r(188));return N.stateNode.current===N?h:m}function oe(h){return h=Ie(h),h!==null?fe(h):null}function fe(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var m=fe(h);if(m!==null)return m;h=h.sibling}return null}var Ce=t.unstable_scheduleCallback,je=t.unstable_cancelCallback,qe=t.unstable_shouldYield,Ze=t.unstable_requestPaint,mt=t.unstable_now,qt=t.unstable_getCurrentPriorityLevel,pt=t.unstable_ImmediatePriority,Bt=t.unstable_UserBlockingPriority,Cr=t.unstable_NormalPriority,$r=t.unstable_LowPriority,Ur=t.unstable_IdlePriority,wn=null,Xr=null;function Wr(h){if(Xr&&typeof Xr.onCommitFiberRoot=="function")try{Xr.onCommitFiberRoot(wn,h,void 0,(h.current.flags&128)===128)}catch{}}var ar=Math.clz32?Math.clz32:Er,xe=Math.log,ht=Math.LN2;function Er(h){return h>>>=0,h===0?32:31-(xe(h)/ht|0)|0}var Sr=64,Qn=4194304;function Ye(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function ye(h,m){var N=h.pendingLanes;if(N===0)return 0;var D=0,q=h.suspendedLanes,te=h.pingedLanes,de=N&268435455;if(de!==0){var Ae=de&~q;Ae!==0?D=Ye(Ae):(te&=de,te!==0&&(D=Ye(te)))}else de=N&~q,de!==0?D=Ye(de):te!==0&&(D=Ye(te));if(D===0)return 0;if(m!==0&&m!==D&&(m&q)===0&&(q=D&-D,te=m&-m,q>=te||q===16&&(te&4194240)!==0))return m;if((D&4)!==0&&(D|=N&16),m=h.entangledLanes,m!==0)for(h=h.entanglements,m&=D;0<m;)N=31-ar(m),q=1<<N,D|=h[N],m&=~q;return D}function $e(h,m){switch(h){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pe(h,m){for(var N=h.suspendedLanes,D=h.pingedLanes,q=h.expirationTimes,te=h.pendingLanes;0<te;){var de=31-ar(te),Ae=1<<de,Le=q[de];Le===-1?((Ae&N)===0||(Ae&D)!==0)&&(q[de]=$e(Ae,m)):Le<=m&&(h.expiredLanes|=Ae),te&=~Ae}}function Tt(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function kt(){var h=Sr;return Sr<<=1,(Sr&4194240)===0&&(Sr=64),h}function nr(h){for(var m=[],N=0;31>N;N++)m.push(h);return m}function Or(h,m,N){h.pendingLanes|=m,m!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,m=31-ar(m),h[m]=N}function ct(h,m){var N=h.pendingLanes&~m;h.pendingLanes=m,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=m,h.mutableReadLanes&=m,h.entangledLanes&=m,m=h.entanglements;var D=h.eventTimes;for(h=h.expirationTimes;0<N;){var q=31-ar(N),te=1<<q;m[q]=0,D[q]=-1,h[q]=-1,N&=~te}}function Ut(h,m){var N=h.entangledLanes|=m;for(h=h.entanglements;N;){var D=31-ar(N),q=1<<D;q&m|h[D]&m&&(h[D]|=m),N&=~q}}var It=0;function Zn(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var ur,Fr,In,la,ic,ud=!1,oc=[],Qi=null,lc=null,$o=null,en=new Map,dd=new Map,Uo=[],Y1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function J1(h,m){switch(h){case"focusin":case"focusout":Qi=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":$o=null;break;case"pointerover":case"pointerout":en.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":dd.delete(m.pointerId)}}function Uf(h,m,N,D,q,te){return h===null||h.nativeEvent!==te?(h={blockedOn:m,domEventName:N,eventSystemFlags:D,nativeEvent:te,targetContainers:[q]},m!==null&&(m=th(m),m!==null&&Fr(m)),h):(h.eventSystemFlags|=D,m=h.targetContainers,q!==null&&m.indexOf(q)===-1&&m.push(q),h)}function Xs(h,m,N,D,q){switch(m){case"focusin":return Qi=Uf(Qi,h,m,N,D,q),!0;case"dragenter":return lc=Uf(lc,h,m,N,D,q),!0;case"mouseover":return $o=Uf($o,h,m,N,D,q),!0;case"pointerover":var te=q.pointerId;return en.set(te,Uf(en.get(te)||null,h,m,N,D,q)),!0;case"gotpointercapture":return te=q.pointerId,dd.set(te,Uf(dd.get(te)||null,h,m,N,D,q)),!0}return!1}function j0(h){var m=xc(h.target);if(m!==null){var N=ke(m);if(N!==null){if(m=N.tag,m===13){if(m=Ge(N),m!==null){h.blockedOn=m,ic(h.priority,function(){In(N)});return}}else if(m===3&&N.stateNode.current.memoizedState.isDehydrated){h.blockedOn=N.tag===3?N.stateNode.containerInfo:null;return}}}h.blockedOn=null}function P0(h){if(h.blockedOn!==null)return!1;for(var m=h.targetContainers;0<m.length;){var N=R0(h.domEventName,h.eventSystemFlags,m[0],h.nativeEvent);if(N===null){N=h.nativeEvent;var D=new N.constructor(N.type,N);er=D,N.target.dispatchEvent(D),er=null}else return m=th(N),m!==null&&Fr(m),h.blockedOn=N,!1;m.shift()}return!0}function O0(h,m,N){P0(h)&&N.delete(m)}function VS(){ud=!1,Qi!==null&&P0(Qi)&&(Qi=null),lc!==null&&P0(lc)&&(lc=null),$o!==null&&P0($o)&&($o=null),en.forEach(O0),dd.forEach(O0)}function cc(h,m){h.blockedOn===m&&(h.blockedOn=null,ud||(ud=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,VS)))}function ci(h){function m(q){return cc(q,h)}if(0<oc.length){cc(oc[0],h);for(var N=1;N<oc.length;N++){var D=oc[N];D.blockedOn===h&&(D.blockedOn=null)}}for(Qi!==null&&cc(Qi,h),lc!==null&&cc(lc,h),$o!==null&&cc($o,h),en.forEach(m),dd.forEach(m),N=0;N<Uo.length;N++)D=Uo[N],D.blockedOn===h&&(D.blockedOn=null);for(;0<Uo.length&&(N=Uo[0],N.blockedOn===null);)j0(N),N.blockedOn===null&&Uo.shift()}var fd=E.ReactCurrentBatchConfig,F0=!0;function vo(h,m,N,D){var q=It,te=fd.transition;fd.transition=null;try{It=1,hd(h,m,N,D)}finally{It=q,fd.transition=te}}function kl(h,m,N,D){var q=It,te=fd.transition;fd.transition=null;try{It=4,hd(h,m,N,D)}finally{It=q,fd.transition=te}}function hd(h,m,N,D){if(F0){var q=R0(h,m,N,D);if(q===null)Y0(h,m,D,gd,N),J1(h,D);else if(Xs(q,h,m,N,D))D.stopPropagation();else if(J1(h,D),m&4&&-1<Y1.indexOf(h)){for(;q!==null;){var te=th(q);if(te!==null&&ur(te),te=R0(h,m,N,D),te===null&&Y0(h,m,D,gd,N),te===q)break;q=te}q!==null&&D.stopPropagation()}else Y0(h,m,D,null,N)}}var gd=null;function R0(h,m,N,D){if(gd=null,h=_r(D),h=xc(h),h!==null)if(m=ke(h),m===null)h=null;else if(N=m.tag,N===13){if(h=Ge(m),h!==null)return h;h=null}else if(N===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;h=null}else m!==h&&(h=null);return gd=h,null}function Q1(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qt()){case pt:return 1;case Bt:return 4;case Cr:case $r:return 16;case Ur:return 536870912;default:return 16}default:return 16}}var ca=null,uc=null,Tl=null;function Wf(){if(Tl)return Tl;var h,m=uc,N=m.length,D,q="value"in ca?ca.value:ca.textContent,te=q.length;for(h=0;h<N&&m[h]===q[h];h++);var de=N-h;for(D=1;D<=de&&m[N-D]===q[te-D];D++);return Tl=q.slice(h,1<D?1-D:void 0)}function eu(h){var m=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&m===13&&(h=13)):h=m,h===10&&(h=13),32<=h||h===13?h:0}function Wa(){return!0}function Pi(){return!1}function Is(h){function m(N,D,q,te,de){this._reactName=N,this._targetInst=q,this.type=D,this.nativeEvent=te,this.target=de,this.currentTarget=null;for(var Ae in h)h.hasOwnProperty(Ae)&&(N=h[Ae],this[Ae]=N?N(te):te[Ae]);return this.isDefaultPrevented=(te.defaultPrevented!=null?te.defaultPrevented:te.returnValue===!1)?Wa:Pi,this.isPropagationStopped=Pi,this}return W(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var N=this.nativeEvent;N&&(N.preventDefault?N.preventDefault():typeof N.returnValue!="unknown"&&(N.returnValue=!1),this.isDefaultPrevented=Wa)},stopPropagation:function(){var N=this.nativeEvent;N&&(N.stopPropagation?N.stopPropagation():typeof N.cancelBubble!="unknown"&&(N.cancelBubble=!0),this.isPropagationStopped=Wa)},persist:function(){},isPersistent:Wa}),m}var ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wo=Is(ui),bo=W({},ui,{view:0,detail:0}),Z1=Is(bo),zf,Hf,ua,za=W({},bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ru,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==ua&&(ua&&h.type==="mousemove"?(zf=h.screenX-ua.screenX,Hf=h.screenY-ua.screenY):Hf=zf=0,ua=h),zf)},movementY:function(h){return"movementY"in h?h.movementY:Hf}}),zn=Is(za),Gf=W({},za,{dataTransfer:0}),_o=Is(Gf),ew=W({},bo,{relatedTarget:0}),D0=Is(ew),km=W({},ui,{animationName:0,elapsedTime:0,pseudoElement:0}),Tm=Is(km),tw=W({},ui,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),I0=Is(tw),rw=W({},ui,{data:0}),tu=Is(rw),Cm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},M0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KS(h){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(h):(h=M0[h])?!!m[h]:!1}function ru(){return KS}var L0=W({},bo,{key:function(h){if(h.key){var m=Cm[h.key]||h.key;if(m!=="Unidentified")return m}return h.type==="keypress"?(h=eu(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?qS[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ru,charCode:function(h){return h.type==="keypress"?eu(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?eu(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),nw=Is(L0),sw=W({},za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nu=Is(sw),aw=W({},bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ru}),B0=Is(aw),$0=W({},ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),pd=Is($0),Em=W({},za,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Nm=Is(Em),iw=[9,13,27,32],Vf=o&&"CompositionEvent"in window,su=null;o&&"documentMode"in document&&(su=document.documentMode);var md=o&&"TextEvent"in window&&!su,Oi=o&&(!Vf||su&&8<su&&11>=su),dc=" ",U0=!1;function Am(h,m){switch(h){case"keyup":return iw.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function So(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var Fi=!1;function jm(h,m){switch(h){case"compositionend":return So(m);case"keypress":return m.which!==32?null:(U0=!0,dc);case"textInput":return h=m.data,h===dc&&U0?null:h;default:return null}}function ow(h,m){if(Fi)return h==="compositionend"||!Vf&&Am(h,m)?(h=Wf(),Tl=uc=ca=null,Fi=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return Oi&&m.locale!=="ko"?null:m.data;default:return null}}var Cl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function El(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m==="input"?!!Cl[h.type]:m==="textarea"}function qf(h,m,N,D){Xe(D),m=J0(m,"onChange"),0<m.length&&(N=new wo("onChange","change",null,N,D),h.push({event:N,listeners:m}))}var yd=null,fc=null;function lw(h){Um(h,0)}function hc(h){var m=Ls(h);if(ie(m))return h}function Zi(h,m){if(h==="change")return m}var xd=!1;if(o){var gc;if(o){var eo="oninput"in document;if(!eo){var W0=document.createElement("div");W0.setAttribute("oninput","return;"),eo=typeof W0.oninput=="function"}gc=eo}else gc=!1;xd=gc&&(!document.documentMode||9<document.documentMode)}function au(){yd&&(yd.detachEvent("onpropertychange",Pm),fc=yd=null)}function Pm(h){if(h.propertyName==="value"&&hc(fc)){var m=[];qf(m,fc,h,_r(h)),ot(lw,m)}}function Om(h,m,N){h==="focusin"?(au(),yd=m,fc=N,yd.attachEvent("onpropertychange",Pm)):h==="focusout"&&au()}function es(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return hc(fc)}function z0(h,m){if(h==="click")return hc(m)}function Fm(h,m){if(h==="input"||h==="change")return hc(m)}function Rm(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var di=typeof Object.is=="function"?Object.is:Rm;function iu(h,m){if(di(h,m))return!0;if(typeof h!="object"||h===null||typeof m!="object"||m===null)return!1;var N=Object.keys(h),D=Object.keys(m);if(N.length!==D.length)return!1;for(D=0;D<N.length;D++){var q=N[D];if(!l.call(m,q)||!di(h[q],m[q]))return!1}return!0}function pc(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function qn(h,m){var N=pc(h);h=0;for(var D;N;){if(N.nodeType===3){if(D=h+N.textContent.length,h<=m&&D>=m)return{node:N,offset:m-h};h=D}e:{for(;N;){if(N.nextSibling){N=N.nextSibling;break e}N=N.parentNode}N=void 0}N=pc(N)}}function _s(h,m){return h&&m?h===m?!0:h&&h.nodeType===3?!1:m&&m.nodeType===3?_s(h,m.parentNode):"contains"in h?h.contains(m):h.compareDocumentPosition?!!(h.compareDocumentPosition(m)&16):!1:!1}function Ms(){for(var h=window,m=me();m instanceof h.HTMLIFrameElement;){try{var N=typeof m.contentWindow.location.href=="string"}catch{N=!1}if(N)h=m.contentWindow;else break;m=me(h.document)}return m}function vd(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m&&(m==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||m==="textarea"||h.contentEditable==="true")}function Kf(h){var m=Ms(),N=h.focusedElem,D=h.selectionRange;if(m!==N&&N&&N.ownerDocument&&_s(N.ownerDocument.documentElement,N)){if(D!==null&&vd(N)){if(m=D.start,h=D.end,h===void 0&&(h=m),"selectionStart"in N)N.selectionStart=m,N.selectionEnd=Math.min(h,N.value.length);else if(h=(m=N.ownerDocument||document)&&m.defaultView||window,h.getSelection){h=h.getSelection();var q=N.textContent.length,te=Math.min(D.start,q);D=D.end===void 0?te:Math.min(D.end,q),!h.extend&&te>D&&(q=D,D=te,te=q),q=qn(N,te);var de=qn(N,D);q&&de&&(h.rangeCount!==1||h.anchorNode!==q.node||h.anchorOffset!==q.offset||h.focusNode!==de.node||h.focusOffset!==de.offset)&&(m=m.createRange(),m.setStart(q.node,q.offset),h.removeAllRanges(),te>D?(h.addRange(m),h.extend(de.node,de.offset)):(m.setEnd(de.node,de.offset),h.addRange(m)))}}for(m=[],h=N;h=h.parentNode;)h.nodeType===1&&m.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<m.length;N++)h=m[N],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var Xf=o&&"documentMode"in document&&11>=document.documentMode,wd=null,Ys=null,ou=null,Yf=!1;function H0(h,m,N){var D=N.window===N?N.document:N.nodeType===9?N:N.ownerDocument;Yf||wd==null||wd!==me(D)||(D=wd,"selectionStart"in D&&vd(D)?D={start:D.selectionStart,end:D.selectionEnd}:(D=(D.ownerDocument&&D.ownerDocument.defaultView||window).getSelection(),D={anchorNode:D.anchorNode,anchorOffset:D.anchorOffset,focusNode:D.focusNode,focusOffset:D.focusOffset}),ou&&iu(ou,D)||(ou=D,D=J0(Ys,"onSelect"),0<D.length&&(m=new wo("onSelect","select",null,m,N),h.push({event:m,listeners:D}),m.target=wd)))}function Ri(h,m){var N={};return N[h.toLowerCase()]=m.toLowerCase(),N["Webkit"+h]="webkit"+m,N["Moz"+h]="moz"+m,N}var da={animationend:Ri("Animation","AnimationEnd"),animationiteration:Ri("Animation","AnimationIteration"),animationstart:Ri("Animation","AnimationStart"),transitionend:Ri("Transition","TransitionEnd")},lu={},G0={};o&&(G0=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function bd(h){if(lu[h])return lu[h];if(!da[h])return h;var m=da[h],N;for(N in m)if(m.hasOwnProperty(N)&&N in G0)return lu[h]=m[N];return h}var Dm=bd("animationend"),Im=bd("animationiteration"),Mm=bd("animationstart"),Lm=bd("transitionend"),Bm=new Map,$m="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nl(h,m){Bm.set(h,m),a(m,[h])}for(var V0=0;V0<$m.length;V0++){var cu=$m[V0],cw=cu.toLowerCase(),q0=cu[0].toUpperCase()+cu.slice(1);Nl(cw,"on"+q0)}Nl(Dm,"onAnimationEnd"),Nl(Im,"onAnimationIteration"),Nl(Mm,"onAnimationStart"),Nl("dblclick","onDoubleClick"),Nl("focusin","onFocus"),Nl("focusout","onBlur"),Nl(Lm,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uw=new Set("cancel close invalid load scroll toggle".split(" ").concat(mc));function K0(h,m,N){var D=h.type||"unknown-event";h.currentTarget=N,Se(D,m,void 0,h),h.currentTarget=null}function Um(h,m){m=(m&4)!==0;for(var N=0;N<h.length;N++){var D=h[N],q=D.event;D=D.listeners;e:{var te=void 0;if(m)for(var de=D.length-1;0<=de;de--){var Ae=D[de],Le=Ae.instance,it=Ae.currentTarget;if(Ae=Ae.listener,Le!==te&&q.isPropagationStopped())break e;K0(q,Ae,it),te=Le}else for(de=0;de<D.length;de++){if(Ae=D[de],Le=Ae.instance,it=Ae.currentTarget,Ae=Ae.listener,Le!==te&&q.isPropagationStopped())break e;K0(q,Ae,it),te=Le}}}if(le)throw h=_e,le=!1,_e=null,h}function Mn(h,m){var N=m[Z0];N===void 0&&(N=m[Z0]=new Set);var D=h+"__bubble";N.has(D)||(Wm(m,h,2,!1),N.add(D))}function X0(h,m,N){var D=0;m&&(D|=4),Wm(N,h,D,m)}var Jf="_reactListening"+Math.random().toString(36).slice(2);function uu(h){if(!h[Jf]){h[Jf]=!0,n.forEach(function(N){N!=="selectionchange"&&(uw.has(N)||X0(N,!1,h),X0(N,!0,h))});var m=h.nodeType===9?h:h.ownerDocument;m===null||m[Jf]||(m[Jf]=!0,X0("selectionchange",!1,m))}}function Wm(h,m,N,D){switch(Q1(m)){case 1:var q=vo;break;case 4:q=kl;break;default:q=hd}N=q.bind(null,m,N,h),q=void 0,!Gt||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(q=!0),D?q!==void 0?h.addEventListener(m,N,{capture:!0,passive:q}):h.addEventListener(m,N,!0):q!==void 0?h.addEventListener(m,N,{passive:q}):h.addEventListener(m,N,!1)}function Y0(h,m,N,D,q){var te=D;if((m&1)===0&&(m&2)===0&&D!==null)e:for(;;){if(D===null)return;var de=D.tag;if(de===3||de===4){var Ae=D.stateNode.containerInfo;if(Ae===q||Ae.nodeType===8&&Ae.parentNode===q)break;if(de===4)for(de=D.return;de!==null;){var Le=de.tag;if((Le===3||Le===4)&&(Le=de.stateNode.containerInfo,Le===q||Le.nodeType===8&&Le.parentNode===q))return;de=de.return}for(;Ae!==null;){if(de=xc(Ae),de===null)return;if(Le=de.tag,Le===5||Le===6){D=te=de;continue e}Ae=Ae.parentNode}}D=D.return}ot(function(){var it=te,Rt=_r(N),Lt=[];e:{var Ft=Bm.get(h);if(Ft!==void 0){var sr=wo,dr=h;switch(h){case"keypress":if(eu(N)===0)break e;case"keydown":case"keyup":sr=nw;break;case"focusin":dr="focus",sr=D0;break;case"focusout":dr="blur",sr=D0;break;case"beforeblur":case"afterblur":sr=D0;break;case"click":if(N.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":sr=zn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":sr=_o;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":sr=B0;break;case Dm:case Im:case Mm:sr=Tm;break;case Lm:sr=pd;break;case"scroll":sr=Z1;break;case"wheel":sr=Nm;break;case"copy":case"cut":case"paste":sr=I0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":sr=nu}var fr=(m&4)!==0,Ws=!fr&&h==="scroll",Je=fr?Ft!==null?Ft+"Capture":null:Ft;fr=[];for(var We=it,st;We!==null;){st=We;var zt=st.stateNode;if(st.tag===5&&zt!==null&&(st=zt,Je!==null&&(zt=Ht(We,Je),zt!=null&&fr.push(_d(We,zt,st)))),Ws)break;We=We.return}0<fr.length&&(Ft=new sr(Ft,dr,null,N,Rt),Lt.push({event:Ft,listeners:fr}))}}if((m&7)===0){e:{if(Ft=h==="mouseover"||h==="pointerover",sr=h==="mouseout"||h==="pointerout",Ft&&N!==er&&(dr=N.relatedTarget||N.fromElement)&&(xc(dr)||dr[zo]))break e;if((sr||Ft)&&(Ft=Rt.window===Rt?Rt:(Ft=Rt.ownerDocument)?Ft.defaultView||Ft.parentWindow:window,sr?(dr=N.relatedTarget||N.toElement,sr=it,dr=dr?xc(dr):null,dr!==null&&(Ws=ke(dr),dr!==Ws||dr.tag!==5&&dr.tag!==6)&&(dr=null)):(sr=null,dr=it),sr!==dr)){if(fr=zn,zt="onMouseLeave",Je="onMouseEnter",We="mouse",(h==="pointerout"||h==="pointerover")&&(fr=nu,zt="onPointerLeave",Je="onPointerEnter",We="pointer"),Ws=sr==null?Ft:Ls(sr),st=dr==null?Ft:Ls(dr),Ft=new fr(zt,We+"leave",sr,N,Rt),Ft.target=Ws,Ft.relatedTarget=st,zt=null,xc(Rt)===it&&(fr=new fr(Je,We+"enter",dr,N,Rt),fr.target=st,fr.relatedTarget=Ws,zt=fr),Ws=zt,sr&&dr)t:{for(fr=sr,Je=dr,We=0,st=fr;st;st=du(st))We++;for(st=0,zt=Je;zt;zt=du(zt))st++;for(;0<We-st;)fr=du(fr),We--;for(;0<st-We;)Je=du(Je),st--;for(;We--;){if(fr===Je||Je!==null&&fr===Je.alternate)break t;fr=du(fr),Je=du(Je)}fr=null}else fr=null;sr!==null&&dw(Lt,Ft,sr,fr,!1),dr!==null&&Ws!==null&&dw(Lt,Ws,dr,fr,!0)}}e:{if(Ft=it?Ls(it):window,sr=Ft.nodeName&&Ft.nodeName.toLowerCase(),sr==="select"||sr==="input"&&Ft.type==="file")var gr=Zi;else if(El(Ft))if(xd)gr=Fm;else{gr=es;var kr=Om}else(sr=Ft.nodeName)&&sr.toLowerCase()==="input"&&(Ft.type==="checkbox"||Ft.type==="radio")&&(gr=z0);if(gr&&(gr=gr(h,it))){qf(Lt,gr,N,Rt);break e}kr&&kr(h,Ft,it),h==="focusout"&&(kr=Ft._wrapperState)&&kr.controlled&&Ft.type==="number"&&et(Ft,"number",Ft.value)}switch(kr=it?Ls(it):window,h){case"focusin":(El(kr)||kr.contentEditable==="true")&&(wd=kr,Ys=it,ou=null);break;case"focusout":ou=Ys=wd=null;break;case"mousedown":Yf=!0;break;case"contextmenu":case"mouseup":case"dragend":Yf=!1,H0(Lt,N,Rt);break;case"selectionchange":if(Xf)break;case"keydown":case"keyup":H0(Lt,N,Rt)}var Tr;if(Vf)e:{switch(h){case"compositionstart":var Mr="onCompositionStart";break e;case"compositionend":Mr="onCompositionEnd";break e;case"compositionupdate":Mr="onCompositionUpdate";break e}Mr=void 0}else Fi?Am(h,N)&&(Mr="onCompositionEnd"):h==="keydown"&&N.keyCode===229&&(Mr="onCompositionStart");Mr&&(Oi&&N.locale!=="ko"&&(Fi||Mr!=="onCompositionStart"?Mr==="onCompositionEnd"&&Fi&&(Tr=Wf()):(ca=Rt,uc="value"in ca?ca.value:ca.textContent,Fi=!0)),kr=J0(it,Mr),0<kr.length&&(Mr=new tu(Mr,h,null,N,Rt),Lt.push({event:Mr,listeners:kr}),Tr?Mr.data=Tr:(Tr=So(N),Tr!==null&&(Mr.data=Tr)))),(Tr=md?jm(h,N):ow(h,N))&&(it=J0(it,"onBeforeInput"),0<it.length&&(Rt=new tu("onBeforeInput","beforeinput",null,N,Rt),Lt.push({event:Rt,listeners:it}),Rt.data=Tr))}Um(Lt,m)})}function _d(h,m,N){return{instance:h,listener:m,currentTarget:N}}function J0(h,m){for(var N=m+"Capture",D=[];h!==null;){var q=h,te=q.stateNode;q.tag===5&&te!==null&&(q=te,te=Ht(h,N),te!=null&&D.unshift(_d(h,te,q)),te=Ht(h,m),te!=null&&D.push(_d(h,te,q))),h=h.return}return D}function du(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function dw(h,m,N,D,q){for(var te=m._reactName,de=[];N!==null&&N!==D;){var Ae=N,Le=Ae.alternate,it=Ae.stateNode;if(Le!==null&&Le===D)break;Ae.tag===5&&it!==null&&(Ae=it,q?(Le=Ht(N,te),Le!=null&&de.unshift(_d(N,Le,Ae))):q||(Le=Ht(N,te),Le!=null&&de.push(_d(N,Le,Ae)))),N=N.return}de.length!==0&&h.push({event:m,listeners:de})}var XS=/\r\n?/g,fw=/\u0000|\uFFFD/g;function zm(h){return(typeof h=="string"?h:""+h).replace(XS,`
`).replace(fw,"")}function Qf(h,m,N){if(m=zm(m),zm(h)!==m&&N)throw Error(r(425))}function fu(){}var Hm=null,Gm=null;function Vm(h,m){return h==="textarea"||h==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var Di=typeof setTimeout=="function"?setTimeout:void 0,qm=typeof clearTimeout=="function"?clearTimeout:void 0,Zf=typeof Promise=="function"?Promise:void 0,hw=typeof queueMicrotask=="function"?queueMicrotask:typeof Zf<"u"?function(h){return Zf.resolve(null).then(h).catch(gw)}:Di;function gw(h){setTimeout(function(){throw h})}function Q0(h,m){var N=m,D=0;do{var q=N.nextSibling;if(h.removeChild(N),q&&q.nodeType===8)if(N=q.data,N==="/$"){if(D===0){h.removeChild(q),ci(m);return}D--}else N!=="$"&&N!=="$?"&&N!=="$!"||D++;N=q}while(N);ci(m)}function Wo(h){for(;h!=null;h=h.nextSibling){var m=h.nodeType;if(m===1||m===3)break;if(m===8){if(m=h.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return h}function hu(h){h=h.previousSibling;for(var m=0;h;){if(h.nodeType===8){var N=h.data;if(N==="$"||N==="$!"||N==="$?"){if(m===0)return h;m--}else N==="/$"&&m++}h=h.previousSibling}return null}var yc=Math.random().toString(36).slice(2),to="__reactFiber$"+yc,eh="__reactProps$"+yc,zo="__reactContainer$"+yc,Z0="__reactEvents$"+yc,pw="__reactListeners$"+yc,mw="__reactHandles$"+yc;function xc(h){var m=h[to];if(m)return m;for(var N=h.parentNode;N;){if(m=N[zo]||N[to]){if(N=m.alternate,m.child!==null||N!==null&&N.child!==null)for(h=hu(h);h!==null;){if(N=h[to])return N;h=hu(h)}return m}h=N,N=h.parentNode}return null}function th(h){return h=h[to]||h[zo],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function Ls(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(r(33))}function Js(h){return h[eh]||null}var eg=[],gu=-1;function Al(h){return{current:h}}function Ln(h){0>gu||(h.current=eg[gu],eg[gu]=null,gu--)}function Nn(h,m){gu++,eg[gu]=h.current,h.current=m}var Ho={},fa=Al(Ho),ka=Al(!1),vc=Ho;function pu(h,m){var N=h.type.contextTypes;if(!N)return Ho;var D=h.stateNode;if(D&&D.__reactInternalMemoizedUnmaskedChildContext===m)return D.__reactInternalMemoizedMaskedChildContext;var q={},te;for(te in N)q[te]=m[te];return D&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=m,h.__reactInternalMemoizedMaskedChildContext=q),q}function Ta(h){return h=h.childContextTypes,h!=null}function Sd(){Ln(ka),Ln(fa)}function Km(h,m,N){if(fa.current!==Ho)throw Error(r(168));Nn(fa,m),Nn(ka,N)}function tg(h,m,N){var D=h.stateNode;if(m=m.childContextTypes,typeof D.getChildContext!="function")return N;D=D.getChildContext();for(var q in D)if(!(q in m))throw Error(r(108,Z(h)||"Unknown",q));return W({},N,D)}function mu(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Ho,vc=fa.current,Nn(fa,h),Nn(ka,ka.current),!0}function yw(h,m,N){var D=h.stateNode;if(!D)throw Error(r(169));N?(h=tg(h,m,vc),D.__reactInternalMemoizedMergedChildContext=h,Ln(ka),Ln(fa),Nn(fa,h)):Ln(ka),Nn(ka,N)}var Go=null,kd=!1,rg=!1;function rh(h){Go===null?Go=[h]:Go.push(h)}function jl(h){kd=!0,rh(h)}function wc(){if(!rg&&Go!==null){rg=!0;var h=0,m=It;try{var N=Go;for(It=1;h<N.length;h++){var D=N[h];do D=D(!0);while(D!==null)}Go=null,kd=!1}catch(q){throw Go!==null&&(Go=Go.slice(h+1)),Ce(pt,wc),q}finally{It=m,rg=!1}}return null}var Ha=[],yu=0,bc=null,_c=0,Ga=[],Va=0,Sc=null,Ii=1,Kn="";function xu(h,m){Ha[yu++]=_c,Ha[yu++]=bc,bc=h,_c=m}function xw(h,m,N){Ga[Va++]=Ii,Ga[Va++]=Kn,Ga[Va++]=Sc,Sc=h;var D=Ii;h=Kn;var q=32-ar(D)-1;D&=~(1<<q),N+=1;var te=32-ar(m)+q;if(30<te){var de=q-q%5;te=(D&(1<<de)-1).toString(32),D>>=de,q-=de,Ii=1<<32-ar(m)+q|N<<q|D,Kn=te+h}else Ii=1<<te|N<<q|D,Kn=h}function Td(h){h.return!==null&&(xu(h,1),xw(h,1,0))}function Qs(h){for(;h===bc;)bc=Ha[--yu],Ha[yu]=null,_c=Ha[--yu],Ha[yu]=null;for(;h===Sc;)Sc=Ga[--Va],Ga[Va]=null,Kn=Ga[--Va],Ga[Va]=null,Ii=Ga[--Va],Ga[Va]=null}var Mi=null,Qt=null,bn=!1,Li=null;function Xm(h,m){var N=Qo(5,null,null,0);N.elementType="DELETED",N.stateNode=m,N.return=h,m=h.deletions,m===null?(h.deletions=[N],h.flags|=16):m.push(N)}function vw(h,m){switch(h.tag){case 5:var N=h.type;return m=m.nodeType!==1||N.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(h.stateNode=m,Mi=h,Qt=Wo(m.firstChild),!0):!1;case 6:return m=h.pendingProps===""||m.nodeType!==3?null:m,m!==null?(h.stateNode=m,Mi=h,Qt=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(N=Sc!==null?{id:Ii,overflow:Kn}:null,h.memoizedState={dehydrated:m,treeContext:N,retryLane:1073741824},N=Qo(18,null,null,0),N.stateNode=m,N.return=h,h.child=N,Mi=h,Qt=null,!0):!1;default:return!1}}function vu(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Cd(h){if(bn){var m=Qt;if(m){var N=m;if(!vw(h,m)){if(vu(h))throw Error(r(418));m=Wo(N.nextSibling);var D=Mi;m&&vw(h,m)?Xm(D,N):(h.flags=h.flags&-4097|2,bn=!1,Mi=h)}}else{if(vu(h))throw Error(r(418));h.flags=h.flags&-4097|2,bn=!1,Mi=h}}}function ng(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Mi=h}function nh(h){if(h!==Mi)return!1;if(!bn)return ng(h),bn=!0,!1;var m;if((m=h.tag!==3)&&!(m=h.tag!==5)&&(m=h.type,m=m!=="head"&&m!=="body"&&!Vm(h.type,h.memoizedProps)),m&&(m=Qt)){if(vu(h))throw Ym(),Error(r(418));for(;m;)Xm(h,m),m=Wo(m.nextSibling)}if(ng(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));e:{for(h=h.nextSibling,m=0;h;){if(h.nodeType===8){var N=h.data;if(N==="/$"){if(m===0){Qt=Wo(h.nextSibling);break e}m--}else N!=="$"&&N!=="$!"&&N!=="$?"||m++}h=h.nextSibling}Qt=null}}else Qt=Mi?Wo(h.stateNode.nextSibling):null;return!0}function Ym(){for(var h=Qt;h;)h=Wo(h.nextSibling)}function wu(){Qt=Mi=null,bn=!1}function sh(h){Li===null?Li=[h]:Li.push(h)}var Jm=E.ReactCurrentBatchConfig;function gs(h,m,N){if(h=N.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(N._owner){if(N=N._owner,N){if(N.tag!==1)throw Error(r(309));var D=N.stateNode}if(!D)throw Error(r(147,h));var q=D,te=""+h;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===te?m.ref:(m=function(de){var Ae=q.refs;de===null?delete Ae[te]:Ae[te]=de},m._stringRef=te,m)}if(typeof h!="string")throw Error(r(284));if(!N._owner)throw Error(r(290,h))}return h}function fi(h,m){throw h=Object.prototype.toString.call(m),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":h))}function ko(h){var m=h._init;return m(h._payload)}function sg(h){function m(Je,We){if(h){var st=Je.deletions;st===null?(Je.deletions=[We],Je.flags|=16):st.push(We)}}function N(Je,We){if(!h)return null;for(;We!==null;)m(Je,We),We=We.sibling;return null}function D(Je,We){for(Je=new Map;We!==null;)We.key!==null?Je.set(We.key,We):Je.set(We.index,We),We=We.sibling;return Je}function q(Je,We){return Je=Vd(Je,We),Je.index=0,Je.sibling=null,Je}function te(Je,We,st){return Je.index=st,h?(st=Je.alternate,st!==null?(st=st.index,st<We?(Je.flags|=2,We):st):(Je.flags|=2,We)):(Je.flags|=1048576,We)}function de(Je){return h&&Je.alternate===null&&(Je.flags|=2),Je}function Ae(Je,We,st,zt){return We===null||We.tag!==6?(We=mk(st,Je.mode,zt),We.return=Je,We):(We=q(We,st),We.return=Je,We)}function Le(Je,We,st,zt){var gr=st.type;return gr===P?Rt(Je,We,st.props.children,zt,st.key):We!==null&&(We.elementType===gr||typeof gr=="object"&&gr!==null&&gr.$$typeof===ee&&ko(gr)===We.type)?(zt=q(We,st.props),zt.ref=gs(Je,We,st),zt.return=Je,zt):(zt=$w(st.type,st.key,st.props,null,Je.mode,zt),zt.ref=gs(Je,We,st),zt.return=Je,zt)}function it(Je,We,st,zt){return We===null||We.tag!==4||We.stateNode.containerInfo!==st.containerInfo||We.stateNode.implementation!==st.implementation?(We=yk(st,Je.mode,zt),We.return=Je,We):(We=q(We,st.children||[]),We.return=Je,We)}function Rt(Je,We,st,zt,gr){return We===null||We.tag!==7?(We=ph(st,Je.mode,zt,gr),We.return=Je,We):(We=q(We,st),We.return=Je,We)}function Lt(Je,We,st){if(typeof We=="string"&&We!==""||typeof We=="number")return We=mk(""+We,Je.mode,st),We.return=Je,We;if(typeof We=="object"&&We!==null){switch(We.$$typeof){case k:return st=$w(We.type,We.key,We.props,null,Je.mode,st),st.ref=gs(Je,null,We),st.return=Je,st;case A:return We=yk(We,Je.mode,st),We.return=Je,We;case ee:var zt=We._init;return Lt(Je,zt(We._payload),st)}if(Me(We)||I(We))return We=ph(We,Je.mode,st,null),We.return=Je,We;fi(Je,We)}return null}function Ft(Je,We,st,zt){var gr=We!==null?We.key:null;if(typeof st=="string"&&st!==""||typeof st=="number")return gr!==null?null:Ae(Je,We,""+st,zt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case k:return st.key===gr?Le(Je,We,st,zt):null;case A:return st.key===gr?it(Je,We,st,zt):null;case ee:return gr=st._init,Ft(Je,We,gr(st._payload),zt)}if(Me(st)||I(st))return gr!==null?null:Rt(Je,We,st,zt,null);fi(Je,st)}return null}function sr(Je,We,st,zt,gr){if(typeof zt=="string"&&zt!==""||typeof zt=="number")return Je=Je.get(st)||null,Ae(We,Je,""+zt,gr);if(typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case k:return Je=Je.get(zt.key===null?st:zt.key)||null,Le(We,Je,zt,gr);case A:return Je=Je.get(zt.key===null?st:zt.key)||null,it(We,Je,zt,gr);case ee:var kr=zt._init;return sr(Je,We,st,kr(zt._payload),gr)}if(Me(zt)||I(zt))return Je=Je.get(st)||null,Rt(We,Je,zt,gr,null);fi(We,zt)}return null}function dr(Je,We,st,zt){for(var gr=null,kr=null,Tr=We,Mr=We=0,Pa=null;Tr!==null&&Mr<st.length;Mr++){Tr.index>Mr?(Pa=Tr,Tr=null):Pa=Tr.sibling;var pn=Ft(Je,Tr,st[Mr],zt);if(pn===null){Tr===null&&(Tr=Pa);break}h&&Tr&&pn.alternate===null&&m(Je,Tr),We=te(pn,We,Mr),kr===null?gr=pn:kr.sibling=pn,kr=pn,Tr=Pa}if(Mr===st.length)return N(Je,Tr),bn&&xu(Je,Mr),gr;if(Tr===null){for(;Mr<st.length;Mr++)Tr=Lt(Je,st[Mr],zt),Tr!==null&&(We=te(Tr,We,Mr),kr===null?gr=Tr:kr.sibling=Tr,kr=Tr);return bn&&xu(Je,Mr),gr}for(Tr=D(Je,Tr);Mr<st.length;Mr++)Pa=sr(Tr,Je,Mr,st[Mr],zt),Pa!==null&&(h&&Pa.alternate!==null&&Tr.delete(Pa.key===null?Mr:Pa.key),We=te(Pa,We,Mr),kr===null?gr=Pa:kr.sibling=Pa,kr=Pa);return h&&Tr.forEach(function(qd){return m(Je,qd)}),bn&&xu(Je,Mr),gr}function fr(Je,We,st,zt){var gr=I(st);if(typeof gr!="function")throw Error(r(150));if(st=gr.call(st),st==null)throw Error(r(151));for(var kr=gr=null,Tr=We,Mr=We=0,Pa=null,pn=st.next();Tr!==null&&!pn.done;Mr++,pn=st.next()){Tr.index>Mr?(Pa=Tr,Tr=null):Pa=Tr.sibling;var qd=Ft(Je,Tr,pn.value,zt);if(qd===null){Tr===null&&(Tr=Pa);break}h&&Tr&&qd.alternate===null&&m(Je,Tr),We=te(qd,We,Mr),kr===null?gr=qd:kr.sibling=qd,kr=qd,Tr=Pa}if(pn.done)return N(Je,Tr),bn&&xu(Je,Mr),gr;if(Tr===null){for(;!pn.done;Mr++,pn=st.next())pn=Lt(Je,pn.value,zt),pn!==null&&(We=te(pn,We,Mr),kr===null?gr=pn:kr.sibling=pn,kr=pn);return bn&&xu(Je,Mr),gr}for(Tr=D(Je,Tr);!pn.done;Mr++,pn=st.next())pn=sr(Tr,Je,Mr,pn.value,zt),pn!==null&&(h&&pn.alternate!==null&&Tr.delete(pn.key===null?Mr:pn.key),We=te(pn,We,Mr),kr===null?gr=pn:kr.sibling=pn,kr=pn);return h&&Tr.forEach(function(jQ){return m(Je,jQ)}),bn&&xu(Je,Mr),gr}function Ws(Je,We,st,zt){if(typeof st=="object"&&st!==null&&st.type===P&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case k:e:{for(var gr=st.key,kr=We;kr!==null;){if(kr.key===gr){if(gr=st.type,gr===P){if(kr.tag===7){N(Je,kr.sibling),We=q(kr,st.props.children),We.return=Je,Je=We;break e}}else if(kr.elementType===gr||typeof gr=="object"&&gr!==null&&gr.$$typeof===ee&&ko(gr)===kr.type){N(Je,kr.sibling),We=q(kr,st.props),We.ref=gs(Je,kr,st),We.return=Je,Je=We;break e}N(Je,kr);break}else m(Je,kr);kr=kr.sibling}st.type===P?(We=ph(st.props.children,Je.mode,zt,st.key),We.return=Je,Je=We):(zt=$w(st.type,st.key,st.props,null,Je.mode,zt),zt.ref=gs(Je,We,st),zt.return=Je,Je=zt)}return de(Je);case A:e:{for(kr=st.key;We!==null;){if(We.key===kr)if(We.tag===4&&We.stateNode.containerInfo===st.containerInfo&&We.stateNode.implementation===st.implementation){N(Je,We.sibling),We=q(We,st.children||[]),We.return=Je,Je=We;break e}else{N(Je,We);break}else m(Je,We);We=We.sibling}We=yk(st,Je.mode,zt),We.return=Je,Je=We}return de(Je);case ee:return kr=st._init,Ws(Je,We,kr(st._payload),zt)}if(Me(st))return dr(Je,We,st,zt);if(I(st))return fr(Je,We,st,zt);fi(Je,st)}return typeof st=="string"&&st!==""||typeof st=="number"?(st=""+st,We!==null&&We.tag===6?(N(Je,We.sibling),We=q(We,st),We.return=Je,Je=We):(N(Je,We),We=mk(st,Je.mode,zt),We.return=Je,Je=We),de(Je)):N(Je,We)}return Ws}var bu=sg(!0),ro=sg(!1),ah=Al(null),Bi=null,Ed=null,ag=null;function ig(){ag=Ed=Bi=null}function og(h){var m=ah.current;Ln(ah),h._currentValue=m}function lg(h,m,N){for(;h!==null;){var D=h.alternate;if((h.childLanes&m)!==m?(h.childLanes|=m,D!==null&&(D.childLanes|=m)):D!==null&&(D.childLanes&m)!==m&&(D.childLanes|=m),h===N)break;h=h.return}}function Pl(h,m){Bi=h,ag=Ed=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&m)!==0&&(ae=!0),h.firstContext=null)}function qa(h){var m=h._currentValue;if(ag!==h)if(h={context:h,memoizedValue:m,next:null},Ed===null){if(Bi===null)throw Error(r(308));Ed=h,Bi.dependencies={lanes:0,firstContext:h}}else Ed=Ed.next=h;return m}var Vo=null;function Nd(h){Vo===null?Vo=[h]:Vo.push(h)}function ih(h,m,N,D){var q=m.interleaved;return q===null?(N.next=N,Nd(m)):(N.next=q.next,q.next=N),m.interleaved=N,$i(h,D)}function $i(h,m){h.lanes|=m;var N=h.alternate;for(N!==null&&(N.lanes|=m),N=h,h=h.return;h!==null;)h.childLanes|=m,N=h.alternate,N!==null&&(N.childLanes|=m),N=h,h=h.return;return N.tag===3?N.stateNode:null}var qo=!1;function oh(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cg(h,m){h=h.updateQueue,m.updateQueue===h&&(m.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Ko(h,m){return{eventTime:h,lane:m,tag:0,payload:null,callback:null,next:null}}function Xo(h,m,N){var D=h.updateQueue;if(D===null)return null;if(D=D.shared,(dn&2)!==0){var q=D.pending;return q===null?m.next=m:(m.next=q.next,q.next=m),D.pending=m,$i(h,N)}return q=D.interleaved,q===null?(m.next=m,Nd(D)):(m.next=q.next,q.next=m),D.interleaved=m,$i(h,N)}function ug(h,m,N){if(m=m.updateQueue,m!==null&&(m=m.shared,(N&4194240)!==0)){var D=m.lanes;D&=h.pendingLanes,N|=D,m.lanes=N,Ut(h,N)}}function lh(h,m){var N=h.updateQueue,D=h.alternate;if(D!==null&&(D=D.updateQueue,N===D)){var q=null,te=null;if(N=N.firstBaseUpdate,N!==null){do{var de={eventTime:N.eventTime,lane:N.lane,tag:N.tag,payload:N.payload,callback:N.callback,next:null};te===null?q=te=de:te=te.next=de,N=N.next}while(N!==null);te===null?q=te=m:te=te.next=m}else q=te=m;N={baseState:D.baseState,firstBaseUpdate:q,lastBaseUpdate:te,shared:D.shared,effects:D.effects},h.updateQueue=N;return}h=N.lastBaseUpdate,h===null?N.firstBaseUpdate=m:h.next=m,N.lastBaseUpdate=m}function Ad(h,m,N,D){var q=h.updateQueue;qo=!1;var te=q.firstBaseUpdate,de=q.lastBaseUpdate,Ae=q.shared.pending;if(Ae!==null){q.shared.pending=null;var Le=Ae,it=Le.next;Le.next=null,de===null?te=it:de.next=it,de=Le;var Rt=h.alternate;Rt!==null&&(Rt=Rt.updateQueue,Ae=Rt.lastBaseUpdate,Ae!==de&&(Ae===null?Rt.firstBaseUpdate=it:Ae.next=it,Rt.lastBaseUpdate=Le))}if(te!==null){var Lt=q.baseState;de=0,Rt=it=Le=null,Ae=te;do{var Ft=Ae.lane,sr=Ae.eventTime;if((D&Ft)===Ft){Rt!==null&&(Rt=Rt.next={eventTime:sr,lane:0,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null});e:{var dr=h,fr=Ae;switch(Ft=m,sr=N,fr.tag){case 1:if(dr=fr.payload,typeof dr=="function"){Lt=dr.call(sr,Lt,Ft);break e}Lt=dr;break e;case 3:dr.flags=dr.flags&-65537|128;case 0:if(dr=fr.payload,Ft=typeof dr=="function"?dr.call(sr,Lt,Ft):dr,Ft==null)break e;Lt=W({},Lt,Ft);break e;case 2:qo=!0}}Ae.callback!==null&&Ae.lane!==0&&(h.flags|=64,Ft=q.effects,Ft===null?q.effects=[Ae]:Ft.push(Ae))}else sr={eventTime:sr,lane:Ft,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null},Rt===null?(it=Rt=sr,Le=Lt):Rt=Rt.next=sr,de|=Ft;if(Ae=Ae.next,Ae===null){if(Ae=q.shared.pending,Ae===null)break;Ft=Ae,Ae=Ft.next,Ft.next=null,q.lastBaseUpdate=Ft,q.shared.pending=null}}while(!0);if(Rt===null&&(Le=Lt),q.baseState=Le,q.firstBaseUpdate=it,q.lastBaseUpdate=Rt,m=q.shared.interleaved,m!==null){q=m;do de|=q.lane,q=q.next;while(q!==m)}else te===null&&(q.shared.lanes=0);dh|=de,h.lanes=de,h.memoizedState=Lt}}function cs(h,m,N){if(h=m.effects,m.effects=null,h!==null)for(m=0;m<h.length;m++){var D=h[m],q=D.callback;if(q!==null){if(D.callback=null,D=N,typeof q!="function")throw Error(r(191,q));q.call(D)}}}var zr={},An=Al(zr),Xn=Al(zr),ps=Al(zr);function Bs(h){if(h===zr)throw Error(r(174));return h}function kc(h,m){switch(Nn(ps,m),Nn(Xn,h),Nn(An,zr),h=m.nodeType,h){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:Qe(null,"");break;default:h=h===8?m.parentNode:m,m=h.namespaceURI||null,h=h.tagName,m=Qe(m,h)}Ln(An),Nn(An,m)}function Yn(){Ln(An),Ln(Xn),Ln(ps)}function jd(h){Bs(ps.current);var m=Bs(An.current),N=Qe(m,h.type);m!==N&&(Nn(Xn,h),Nn(An,N))}function Ol(h){Xn.current===h&&(Ln(An),Ln(Xn))}var Bn=Al(0);function Pd(h){for(var m=h;m!==null;){if(m.tag===13){var N=m.memoizedState;if(N!==null&&(N=N.dehydrated,N===null||N.data==="$?"||N.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var _u=[];function Ca(){for(var h=0;h<_u.length;h++)_u[h]._workInProgressVersionPrimary=null;_u.length=0}var Od=E.ReactCurrentDispatcher,ch=E.ReactCurrentBatchConfig,Ka=0,Tn=null,us=null,Ss=null,To=!1,Tc=!1,no=0,dg=0;function ks(){throw Error(r(321))}function uh(h,m){if(m===null)return!1;for(var N=0;N<m.length&&N<h.length;N++)if(!di(h[N],m[N]))return!1;return!0}function Fd(h,m,N,D,q,te){if(Ka=te,Tn=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,Od.current=h===null||h.memoizedState===null?JS:Nc,h=N(D,q),Tc){te=0;do{if(Tc=!1,no=0,25<=te)throw Error(r(301));te+=1,Ss=us=null,m.updateQueue=null,Od.current=mg,h=N(D,q)}while(Tc)}if(Od.current=Md,m=us!==null&&us.next!==null,Ka=0,Ss=us=Tn=null,To=!1,m)throw Error(r(300));return h}function Rd(){var h=no!==0;return no=0,h}function Hn(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ss===null?Tn.memoizedState=Ss=h:Ss=Ss.next=h,Ss}function $s(){if(us===null){var h=Tn.alternate;h=h!==null?h.memoizedState:null}else h=us.next;var m=Ss===null?Tn.memoizedState:Ss.next;if(m!==null)Ss=m,us=h;else{if(h===null)throw Error(r(310));us=h,h={memoizedState:us.memoizedState,baseState:us.baseState,baseQueue:us.baseQueue,queue:us.queue,next:null},Ss===null?Tn.memoizedState=Ss=h:Ss=Ss.next=h}return Ss}function Ea(h,m){return typeof m=="function"?m(h):m}function Na(h){var m=$s(),N=m.queue;if(N===null)throw Error(r(311));N.lastRenderedReducer=h;var D=us,q=D.baseQueue,te=N.pending;if(te!==null){if(q!==null){var de=q.next;q.next=te.next,te.next=de}D.baseQueue=q=te,N.pending=null}if(q!==null){te=q.next,D=D.baseState;var Ae=de=null,Le=null,it=te;do{var Rt=it.lane;if((Ka&Rt)===Rt)Le!==null&&(Le=Le.next={lane:0,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null}),D=it.hasEagerState?it.eagerState:h(D,it.action);else{var Lt={lane:Rt,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null};Le===null?(Ae=Le=Lt,de=D):Le=Le.next=Lt,Tn.lanes|=Rt,dh|=Rt}it=it.next}while(it!==null&&it!==te);Le===null?de=D:Le.next=Ae,di(D,m.memoizedState)||(ae=!0),m.memoizedState=D,m.baseState=de,m.baseQueue=Le,N.lastRenderedState=D}if(h=N.interleaved,h!==null){q=h;do te=q.lane,Tn.lanes|=te,dh|=te,q=q.next;while(q!==h)}else q===null&&(N.lanes=0);return[m.memoizedState,N.dispatch]}function fg(h){var m=$s(),N=m.queue;if(N===null)throw Error(r(311));N.lastRenderedReducer=h;var D=N.dispatch,q=N.pending,te=m.memoizedState;if(q!==null){N.pending=null;var de=q=q.next;do te=h(te,de.action),de=de.next;while(de!==q);di(te,m.memoizedState)||(ae=!0),m.memoizedState=te,m.baseQueue===null&&(m.baseState=te),N.lastRenderedState=te}return[te,D]}function hg(){}function gg(h,m){var N=Tn,D=$s(),q=m(),te=!di(D.memoizedState,q);if(te&&(D.memoizedState=q,ae=!0),D=D.queue,ty(Qm.bind(null,N,D,h),[h]),D.getSnapshot!==m||te||Ss!==null&&Ss.memoizedState.tag&1){if(N.flags|=2048,Dd(9,Fl.bind(null,N,D,q,m),void 0,null),ja===null)throw Error(r(349));(Ka&30)!==0||ww(N,m,q)}return q}function ww(h,m,N){h.flags|=16384,h={getSnapshot:m,value:N},m=Tn.updateQueue,m===null?(m={lastEffect:null,stores:null},Tn.updateQueue=m,m.stores=[h]):(N=m.stores,N===null?m.stores=[h]:N.push(h))}function Fl(h,m,N,D){m.value=N,m.getSnapshot=D,Zm(m)&&pg(h)}function Qm(h,m,N){return N(function(){Zm(m)&&pg(h)})}function Zm(h){var m=h.getSnapshot;h=h.value;try{var N=m();return!di(h,N)}catch{return!0}}function pg(h){var m=$i(h,1);m!==null&&Ml(m,h,1,-1)}function Cc(h){var m=Hn();return typeof h=="function"&&(h=h()),m.memoizedState=m.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:h},m.queue=h,h=h.dispatch=Cw.bind(null,Tn,h),[m.memoizedState,h]}function Dd(h,m,N,D){return h={tag:h,create:m,destroy:N,deps:D,next:null},m=Tn.updateQueue,m===null?(m={lastEffect:null,stores:null},Tn.updateQueue=m,m.lastEffect=h.next=h):(N=m.lastEffect,N===null?m.lastEffect=h.next=h:(D=N.next,N.next=h,h.next=D,m.lastEffect=h)),h}function ey(){return $s().memoizedState}function Id(h,m,N,D){var q=Hn();Tn.flags|=h,q.memoizedState=Dd(1|m,N,void 0,D===void 0?null:D)}function Su(h,m,N,D){var q=$s();D=D===void 0?null:D;var te=void 0;if(us!==null){var de=us.memoizedState;if(te=de.destroy,D!==null&&uh(D,de.deps)){q.memoizedState=Dd(m,N,te,D);return}}Tn.flags|=h,q.memoizedState=Dd(1|m,N,te,D)}function bw(h,m){return Id(8390656,8,h,m)}function ty(h,m){return Su(2048,8,h,m)}function ry(h,m){return Su(4,2,h,m)}function ny(h,m){return Su(4,4,h,m)}function Ec(h,m){if(typeof m=="function")return h=h(),m(h),function(){m(null)};if(m!=null)return h=h(),m.current=h,function(){m.current=null}}function _w(h,m,N){return N=N!=null?N.concat([h]):null,Su(4,4,Ec.bind(null,m,h),N)}function Rl(){}function sy(h,m){var N=$s();m=m===void 0?null:m;var D=N.memoizedState;return D!==null&&m!==null&&uh(m,D[1])?D[0]:(N.memoizedState=[h,m],h)}function Gn(h,m){var N=$s();m=m===void 0?null:m;var D=N.memoizedState;return D!==null&&m!==null&&uh(m,D[1])?D[0]:(h=h(),N.memoizedState=[h,m],h)}function Sw(h,m,N){return(Ka&21)===0?(h.baseState&&(h.baseState=!1,ae=!0),h.memoizedState=N):(di(N,m)||(N=kt(),Tn.lanes|=N,dh|=N,h.baseState=!0),m)}function kw(h,m){var N=It;It=N!==0&&4>N?N:4,h(!0);var D=ch.transition;ch.transition={};try{h(!1),m()}finally{It=N,ch.transition=D}}function Tw(){return $s().memoizedState}function YS(h,m,N){var D=Hd(h);if(N={lane:D,action:N,hasEagerState:!1,eagerState:null,next:null},ay(h))Ew(m,N);else if(N=ih(h,m,N,D),N!==null){var q=Wi();Ml(N,h,D,q),Ui(N,m,D)}}function Cw(h,m,N){var D=Hd(h),q={lane:D,action:N,hasEagerState:!1,eagerState:null,next:null};if(ay(h))Ew(m,q);else{var te=h.alternate;if(h.lanes===0&&(te===null||te.lanes===0)&&(te=m.lastRenderedReducer,te!==null))try{var de=m.lastRenderedState,Ae=te(de,N);if(q.hasEagerState=!0,q.eagerState=Ae,di(Ae,de)){var Le=m.interleaved;Le===null?(q.next=q,Nd(m)):(q.next=Le.next,Le.next=q),m.interleaved=q;return}}catch{}finally{}N=ih(h,m,q,D),N!==null&&(q=Wi(),Ml(N,h,D,q),Ui(N,m,D))}}function ay(h){var m=h.alternate;return h===Tn||m!==null&&m===Tn}function Ew(h,m){Tc=To=!0;var N=h.pending;N===null?m.next=m:(m.next=N.next,N.next=m),h.pending=m}function Ui(h,m,N){if((N&4194240)!==0){var D=m.lanes;D&=h.pendingLanes,N|=D,m.lanes=N,Ut(h,N)}}var Md={readContext:qa,useCallback:ks,useContext:ks,useEffect:ks,useImperativeHandle:ks,useInsertionEffect:ks,useLayoutEffect:ks,useMemo:ks,useReducer:ks,useRef:ks,useState:ks,useDebugValue:ks,useDeferredValue:ks,useTransition:ks,useMutableSource:ks,useSyncExternalStore:ks,useId:ks,unstable_isNewReconciler:!1},JS={readContext:qa,useCallback:function(h,m){return Hn().memoizedState=[h,m===void 0?null:m],h},useContext:qa,useEffect:bw,useImperativeHandle:function(h,m,N){return N=N!=null?N.concat([h]):null,Id(4194308,4,Ec.bind(null,m,h),N)},useLayoutEffect:function(h,m){return Id(4194308,4,h,m)},useInsertionEffect:function(h,m){return Id(4,2,h,m)},useMemo:function(h,m){var N=Hn();return m=m===void 0?null:m,h=h(),N.memoizedState=[h,m],h},useReducer:function(h,m,N){var D=Hn();return m=N!==void 0?N(m):m,D.memoizedState=D.baseState=m,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:m},D.queue=h,h=h.dispatch=YS.bind(null,Tn,h),[D.memoizedState,h]},useRef:function(h){var m=Hn();return h={current:h},m.memoizedState=h},useState:Cc,useDebugValue:Rl,useDeferredValue:function(h){return Hn().memoizedState=h},useTransition:function(){var h=Cc(!1),m=h[0];return h=kw.bind(null,h[1]),Hn().memoizedState=h,[m,h]},useMutableSource:function(){},useSyncExternalStore:function(h,m,N){var D=Tn,q=Hn();if(bn){if(N===void 0)throw Error(r(407));N=N()}else{if(N=m(),ja===null)throw Error(r(349));(Ka&30)!==0||ww(D,m,N)}q.memoizedState=N;var te={value:N,getSnapshot:m};return q.queue=te,bw(Qm.bind(null,D,te,h),[h]),D.flags|=2048,Dd(9,Fl.bind(null,D,te,N,m),void 0,null),N},useId:function(){var h=Hn(),m=ja.identifierPrefix;if(bn){var N=Kn,D=Ii;N=(D&~(1<<32-ar(D)-1)).toString(32)+N,m=":"+m+"R"+N,N=no++,0<N&&(m+="H"+N.toString(32)),m+=":"}else N=dg++,m=":"+m+"r"+N.toString(32)+":";return h.memoizedState=m},unstable_isNewReconciler:!1},Nc={readContext:qa,useCallback:sy,useContext:qa,useEffect:ty,useImperativeHandle:_w,useInsertionEffect:ry,useLayoutEffect:ny,useMemo:Gn,useReducer:Na,useRef:ey,useState:function(){return Na(Ea)},useDebugValue:Rl,useDeferredValue:function(h){var m=$s();return Sw(m,us.memoizedState,h)},useTransition:function(){var h=Na(Ea)[0],m=$s().memoizedState;return[h,m]},useMutableSource:hg,useSyncExternalStore:gg,useId:Tw,unstable_isNewReconciler:!1},mg={readContext:qa,useCallback:sy,useContext:qa,useEffect:ty,useImperativeHandle:_w,useInsertionEffect:ry,useLayoutEffect:ny,useMemo:Gn,useReducer:fg,useRef:ey,useState:function(){return fg(Ea)},useDebugValue:Rl,useDeferredValue:function(h){var m=$s();return us===null?m.memoizedState=h:Sw(m,us.memoizedState,h)},useTransition:function(){var h=fg(Ea)[0],m=$s().memoizedState;return[h,m]},useMutableSource:hg,useSyncExternalStore:gg,useId:Tw,unstable_isNewReconciler:!1};function ha(h,m){if(h&&h.defaultProps){m=W({},m),h=h.defaultProps;for(var N in h)m[N]===void 0&&(m[N]=h[N]);return m}return m}function Ld(h,m,N,D){m=h.memoizedState,N=N(D,m),N=N==null?m:W({},m,N),h.memoizedState=N,h.lanes===0&&(h.updateQueue.baseState=N)}var Bd={isMounted:function(h){return(h=h._reactInternals)?ke(h)===h:!1},enqueueSetState:function(h,m,N){h=h._reactInternals;var D=Wi(),q=Hd(h),te=Ko(D,q);te.payload=m,N!=null&&(te.callback=N),m=Xo(h,te,q),m!==null&&(Ml(m,h,q,D),ug(m,h,q))},enqueueReplaceState:function(h,m,N){h=h._reactInternals;var D=Wi(),q=Hd(h),te=Ko(D,q);te.tag=1,te.payload=m,N!=null&&(te.callback=N),m=Xo(h,te,q),m!==null&&(Ml(m,h,q,D),ug(m,h,q))},enqueueForceUpdate:function(h,m){h=h._reactInternals;var N=Wi(),D=Hd(h),q=Ko(N,D);q.tag=2,m!=null&&(q.callback=m),m=Xo(h,q,D),m!==null&&(Ml(m,h,D,N),ug(m,h,D))}};function yg(h,m,N,D,q,te,de){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(D,te,de):m.prototype&&m.prototype.isPureReactComponent?!iu(N,D)||!iu(q,te):!0}function Nw(h,m,N){var D=!1,q=Ho,te=m.contextType;return typeof te=="object"&&te!==null?te=qa(te):(q=Ta(m)?vc:fa.current,D=m.contextTypes,te=(D=D!=null)?pu(h,q):Ho),m=new m(N,te),h.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Bd,h.stateNode=m,m._reactInternals=h,D&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=q,h.__reactInternalMemoizedMaskedChildContext=te),m}function iy(h,m,N,D){h=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(N,D),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(N,D),m.state!==h&&Bd.enqueueReplaceState(m,m.state,null)}function xg(h,m,N,D){var q=h.stateNode;q.props=N,q.state=h.memoizedState,q.refs={},oh(h);var te=m.contextType;typeof te=="object"&&te!==null?q.context=qa(te):(te=Ta(m)?vc:fa.current,q.context=pu(h,te)),q.state=h.memoizedState,te=m.getDerivedStateFromProps,typeof te=="function"&&(Ld(h,m,te,N),q.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(m=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),m!==q.state&&Bd.enqueueReplaceState(q,q.state,null),Ad(h,N,q,D),q.state=h.memoizedState),typeof q.componentDidMount=="function"&&(h.flags|=4194308)}function ku(h,m){try{var N="",D=m;do N+=Q(D),D=D.return;while(D);var q=N}catch(te){q=`
Error generating stack: `+te.message+`
`+te.stack}return{value:h,source:m,stack:q,digest:null}}function vg(h,m,N){return{value:h,source:null,stack:N??null,digest:m??null}}function $d(h,m){try{console.error(m.value)}catch(N){setTimeout(function(){throw N})}}var QS=typeof WeakMap=="function"?WeakMap:Map;function Aw(h,m,N){N=Ko(-1,N),N.tag=3,N.payload={element:null};var D=m.value;return N.callback=function(){Rw||(Rw=!0,lk=D),$d(h,m)},N}function w(h,m,N){N=Ko(-1,N),N.tag=3;var D=h.type.getDerivedStateFromError;if(typeof D=="function"){var q=m.value;N.payload=function(){return D(q)},N.callback=function(){$d(h,m)}}var te=h.stateNode;return te!==null&&typeof te.componentDidCatch=="function"&&(N.callback=function(){$d(h,m),typeof D!="function"&&(Wd===null?Wd=new Set([this]):Wd.add(this));var de=m.stack;this.componentDidCatch(m.value,{componentStack:de!==null?de:""})}),N}function S(h,m,N){var D=h.pingCache;if(D===null){D=h.pingCache=new QS;var q=new Set;D.set(m,q)}else q=D.get(m),q===void 0&&(q=new Set,D.set(m,q));q.has(N)||(q.add(N),h=vQ.bind(null,h,m,N),m.then(h,h))}function F(h){do{var m;if((m=h.tag===13)&&(m=h.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return h;h=h.return}while(h!==null);return null}function U(h,m,N,D,q){return(h.mode&1)===0?(h===m?h.flags|=65536:(h.flags|=128,N.flags|=131072,N.flags&=-52805,N.tag===1&&(N.alternate===null?N.tag=17:(m=Ko(-1,1),m.tag=2,Xo(N,m,1))),N.lanes|=1),h):(h.flags|=65536,h.lanes=q,h)}var X=E.ReactCurrentOwner,ae=!1;function be(h,m,N,D){m.child=h===null?ro(m,null,N,D):bu(m,h.child,N,D)}function He(h,m,N,D,q){N=N.render;var te=m.ref;return Pl(m,q),D=Fd(h,m,N,D,te,q),N=Rd(),h!==null&&!ae?(m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~q,Aa(h,m,q)):(bn&&N&&Td(m),m.flags|=1,be(h,m,D,q),m.child)}function lt(h,m,N,D,q){if(h===null){var te=N.type;return typeof te=="function"&&!pk(te)&&te.defaultProps===void 0&&N.compare===null&&N.defaultProps===void 0?(m.tag=15,m.type=te,$t(h,m,te,D,q)):(h=$w(N.type,null,D,m,m.mode,q),h.ref=m.ref,h.return=m,m.child=h)}if(te=h.child,(h.lanes&q)===0){var de=te.memoizedProps;if(N=N.compare,N=N!==null?N:iu,N(de,D)&&h.ref===m.ref)return Aa(h,m,q)}return m.flags|=1,h=Vd(te,D),h.ref=m.ref,h.return=m,m.child=h}function $t(h,m,N,D,q){if(h!==null){var te=h.memoizedProps;if(iu(te,D)&&h.ref===m.ref)if(ae=!1,m.pendingProps=D=te,(h.lanes&q)!==0)(h.flags&131072)!==0&&(ae=!0);else return m.lanes=h.lanes,Aa(h,m,q)}return tr(h,m,N,D,q)}function or(h,m,N){var D=m.pendingProps,q=D.children,te=h!==null?h.memoizedState:null;if(D.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nn(bg,Co),Co|=N;else{if((N&1073741824)===0)return h=te!==null?te.baseLanes|N:N,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:h,cachePool:null,transitions:null},m.updateQueue=null,Nn(bg,Co),Co|=h,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},D=te!==null?te.baseLanes:N,Nn(bg,Co),Co|=D}else te!==null?(D=te.baseLanes|N,m.memoizedState=null):D=N,Nn(bg,Co),Co|=D;return be(h,m,q,N),m.child}function Lr(h,m){var N=m.ref;(h===null&&N!==null||h!==null&&h.ref!==N)&&(m.flags|=512,m.flags|=2097152)}function tr(h,m,N,D,q){var te=Ta(N)?vc:fa.current;return te=pu(m,te),Pl(m,q),N=Fd(h,m,N,D,te,q),D=Rd(),h!==null&&!ae?(m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~q,Aa(h,m,q)):(bn&&D&&Td(m),m.flags|=1,be(h,m,N,q),m.child)}function $n(h,m,N,D,q){if(Ta(N)){var te=!0;mu(m)}else te=!1;if(Pl(m,q),m.stateNode===null)nn(h,m),Nw(m,N,D),xg(m,N,D,q),D=!0;else if(h===null){var de=m.stateNode,Ae=m.memoizedProps;de.props=Ae;var Le=de.context,it=N.contextType;typeof it=="object"&&it!==null?it=qa(it):(it=Ta(N)?vc:fa.current,it=pu(m,it));var Rt=N.getDerivedStateFromProps,Lt=typeof Rt=="function"||typeof de.getSnapshotBeforeUpdate=="function";Lt||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(Ae!==D||Le!==it)&&iy(m,de,D,it),qo=!1;var Ft=m.memoizedState;de.state=Ft,Ad(m,D,de,q),Le=m.memoizedState,Ae!==D||Ft!==Le||ka.current||qo?(typeof Rt=="function"&&(Ld(m,N,Rt,D),Le=m.memoizedState),(Ae=qo||yg(m,N,Ae,D,Ft,Le,it))?(Lt||typeof de.UNSAFE_componentWillMount!="function"&&typeof de.componentWillMount!="function"||(typeof de.componentWillMount=="function"&&de.componentWillMount(),typeof de.UNSAFE_componentWillMount=="function"&&de.UNSAFE_componentWillMount()),typeof de.componentDidMount=="function"&&(m.flags|=4194308)):(typeof de.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=D,m.memoizedState=Le),de.props=D,de.state=Le,de.context=it,D=Ae):(typeof de.componentDidMount=="function"&&(m.flags|=4194308),D=!1)}else{de=m.stateNode,cg(h,m),Ae=m.memoizedProps,it=m.type===m.elementType?Ae:ha(m.type,Ae),de.props=it,Lt=m.pendingProps,Ft=de.context,Le=N.contextType,typeof Le=="object"&&Le!==null?Le=qa(Le):(Le=Ta(N)?vc:fa.current,Le=pu(m,Le));var sr=N.getDerivedStateFromProps;(Rt=typeof sr=="function"||typeof de.getSnapshotBeforeUpdate=="function")||typeof de.UNSAFE_componentWillReceiveProps!="function"&&typeof de.componentWillReceiveProps!="function"||(Ae!==Lt||Ft!==Le)&&iy(m,de,D,Le),qo=!1,Ft=m.memoizedState,de.state=Ft,Ad(m,D,de,q);var dr=m.memoizedState;Ae!==Lt||Ft!==dr||ka.current||qo?(typeof sr=="function"&&(Ld(m,N,sr,D),dr=m.memoizedState),(it=qo||yg(m,N,it,D,Ft,dr,Le)||!1)?(Rt||typeof de.UNSAFE_componentWillUpdate!="function"&&typeof de.componentWillUpdate!="function"||(typeof de.componentWillUpdate=="function"&&de.componentWillUpdate(D,dr,Le),typeof de.UNSAFE_componentWillUpdate=="function"&&de.UNSAFE_componentWillUpdate(D,dr,Le)),typeof de.componentDidUpdate=="function"&&(m.flags|=4),typeof de.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof de.componentDidUpdate!="function"||Ae===h.memoizedProps&&Ft===h.memoizedState||(m.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||Ae===h.memoizedProps&&Ft===h.memoizedState||(m.flags|=1024),m.memoizedProps=D,m.memoizedState=dr),de.props=D,de.state=dr,de.context=Le,D=it):(typeof de.componentDidUpdate!="function"||Ae===h.memoizedProps&&Ft===h.memoizedState||(m.flags|=4),typeof de.getSnapshotBeforeUpdate!="function"||Ae===h.memoizedProps&&Ft===h.memoizedState||(m.flags|=1024),D=!1)}return _n(h,m,N,D,te,q)}function _n(h,m,N,D,q,te){Lr(h,m);var de=(m.flags&128)!==0;if(!D&&!de)return q&&yw(m,N,!1),Aa(h,m,te);D=m.stateNode,X.current=m;var Ae=de&&typeof N.getDerivedStateFromError!="function"?null:D.render();return m.flags|=1,h!==null&&de?(m.child=bu(m,h.child,null,te),m.child=bu(m,null,Ae,te)):be(h,m,Ae,te),m.memoizedState=D.state,q&&yw(m,N,!0),m.child}function Xa(h){var m=h.stateNode;m.pendingContext?Km(h,m.pendingContext,m.pendingContext!==m.context):m.context&&Km(h,m.context,!1),kc(h,m.containerInfo)}function Yo(h,m,N,D,q){return wu(),sh(q),m.flags|=256,be(h,m,N,D),m.child}var at={dehydrated:null,treeContext:null,retryLane:0};function Ve(h){return{baseLanes:h,cachePool:null,transitions:null}}function yt(h,m,N){var D=m.pendingProps,q=Bn.current,te=!1,de=(m.flags&128)!==0,Ae;if((Ae=de)||(Ae=h!==null&&h.memoizedState===null?!1:(q&2)!==0),Ae?(te=!0,m.flags&=-129):(h===null||h.memoizedState!==null)&&(q|=1),Nn(Bn,q&1),h===null)return Cd(m),h=m.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((m.mode&1)===0?m.lanes=1:h.data==="$!"?m.lanes=8:m.lanes=1073741824,null):(de=D.children,h=D.fallback,te?(D=m.mode,te=m.child,de={mode:"hidden",children:de},(D&1)===0&&te!==null?(te.childLanes=0,te.pendingProps=de):te=Uw(de,D,0,null),h=ph(h,D,N,null),te.return=m,h.return=m,te.sibling=h,m.child=te,m.child.memoizedState=Ve(N),m.memoizedState=at,h):rr(m,de));if(q=h.memoizedState,q!==null&&(Ae=q.dehydrated,Ae!==null))return qr(h,m,de,D,Ae,q,N);if(te){te=D.fallback,de=m.mode,q=h.child,Ae=q.sibling;var Le={mode:"hidden",children:D.children};return(de&1)===0&&m.child!==q?(D=m.child,D.childLanes=0,D.pendingProps=Le,m.deletions=null):(D=Vd(q,Le),D.subtreeFlags=q.subtreeFlags&14680064),Ae!==null?te=Vd(Ae,te):(te=ph(te,de,N,null),te.flags|=2),te.return=m,D.return=m,D.sibling=te,m.child=D,D=te,te=m.child,de=h.child.memoizedState,de=de===null?Ve(N):{baseLanes:de.baseLanes|N,cachePool:null,transitions:de.transitions},te.memoizedState=de,te.childLanes=h.childLanes&~N,m.memoizedState=at,D}return te=h.child,h=te.sibling,D=Vd(te,{mode:"visible",children:D.children}),(m.mode&1)===0&&(D.lanes=N),D.return=m,D.sibling=null,h!==null&&(N=m.deletions,N===null?(m.deletions=[h],m.flags|=16):N.push(h)),m.child=D,m.memoizedState=null,D}function rr(h,m){return m=Uw({mode:"visible",children:m},h.mode,0,null),m.return=h,h.child=m}function yr(h,m,N,D){return D!==null&&sh(D),bu(m,h.child,null,N),h=rr(m,m.pendingProps.children),h.flags|=2,m.memoizedState=null,h}function qr(h,m,N,D,q,te,de){if(N)return m.flags&256?(m.flags&=-257,D=vg(Error(r(422))),yr(h,m,de,D)):m.memoizedState!==null?(m.child=h.child,m.flags|=128,null):(te=D.fallback,q=m.mode,D=Uw({mode:"visible",children:D.children},q,0,null),te=ph(te,q,de,null),te.flags|=2,D.return=m,te.return=m,D.sibling=te,m.child=D,(m.mode&1)!==0&&bu(m,h.child,null,de),m.child.memoizedState=Ve(de),m.memoizedState=at,te);if((m.mode&1)===0)return yr(h,m,de,null);if(q.data==="$!"){if(D=q.nextSibling&&q.nextSibling.dataset,D)var Ae=D.dgst;return D=Ae,te=Error(r(419)),D=vg(te,D,void 0),yr(h,m,de,D)}if(Ae=(de&h.childLanes)!==0,ae||Ae){if(D=ja,D!==null){switch(de&-de){case 4:q=2;break;case 16:q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:q=32;break;case 536870912:q=268435456;break;default:q=0}q=(q&(D.suspendedLanes|de))!==0?0:q,q!==0&&q!==te.retryLane&&(te.retryLane=q,$i(h,q),Ml(D,h,q,-1))}return gk(),D=vg(Error(r(421))),yr(h,m,de,D)}return q.data==="$?"?(m.flags|=128,m.child=h.child,m=wQ.bind(null,h),q._reactRetry=m,null):(h=te.treeContext,Qt=Wo(q.nextSibling),Mi=m,bn=!0,Li=null,h!==null&&(Ga[Va++]=Ii,Ga[Va++]=Kn,Ga[Va++]=Sc,Ii=h.id,Kn=h.overflow,Sc=m),m=rr(m,D.children),m.flags|=4096,m)}function Br(h,m,N){h.lanes|=m;var D=h.alternate;D!==null&&(D.lanes|=m),lg(h.return,m,N)}function on(h,m,N,D,q){var te=h.memoizedState;te===null?h.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:D,tail:N,tailMode:q}:(te.isBackwards=m,te.rendering=null,te.renderingStartTime=0,te.last=D,te.tail=N,te.tailMode=q)}function Us(h,m,N){var D=m.pendingProps,q=D.revealOrder,te=D.tail;if(be(h,m,D.children,N),D=Bn.current,(D&2)!==0)D=D&1|2,m.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=m.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Br(h,N,m);else if(h.tag===19)Br(h,N,m);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===m)break e;for(;h.sibling===null;){if(h.return===null||h.return===m)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}D&=1}if(Nn(Bn,D),(m.mode&1)===0)m.memoizedState=null;else switch(q){case"forwards":for(N=m.child,q=null;N!==null;)h=N.alternate,h!==null&&Pd(h)===null&&(q=N),N=N.sibling;N=q,N===null?(q=m.child,m.child=null):(q=N.sibling,N.sibling=null),on(m,!1,q,N,te);break;case"backwards":for(N=null,q=m.child,m.child=null;q!==null;){if(h=q.alternate,h!==null&&Pd(h)===null){m.child=q;break}h=q.sibling,q.sibling=N,N=q,q=h}on(m,!0,N,null,te);break;case"together":on(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function nn(h,m){(m.mode&1)===0&&h!==null&&(h.alternate=null,m.alternate=null,m.flags|=2)}function Aa(h,m,N){if(h!==null&&(m.dependencies=h.dependencies),dh|=m.lanes,(N&m.childLanes)===0)return null;if(h!==null&&m.child!==h.child)throw Error(r(153));if(m.child!==null){for(h=m.child,N=Vd(h,h.pendingProps),m.child=N,N.return=m;h.sibling!==null;)h=h.sibling,N=N.sibling=Vd(h,h.pendingProps),N.return=m;N.sibling=null}return m.child}function ZS(h,m,N){switch(m.tag){case 3:Xa(m),wu();break;case 5:jd(m);break;case 1:Ta(m.type)&&mu(m);break;case 4:kc(m,m.stateNode.containerInfo);break;case 10:var D=m.type._context,q=m.memoizedProps.value;Nn(ah,D._currentValue),D._currentValue=q;break;case 13:if(D=m.memoizedState,D!==null)return D.dehydrated!==null?(Nn(Bn,Bn.current&1),m.flags|=128,null):(N&m.child.childLanes)!==0?yt(h,m,N):(Nn(Bn,Bn.current&1),h=Aa(h,m,N),h!==null?h.sibling:null);Nn(Bn,Bn.current&1);break;case 19:if(D=(N&m.childLanes)!==0,(h.flags&128)!==0){if(D)return Us(h,m,N);m.flags|=128}if(q=m.memoizedState,q!==null&&(q.rendering=null,q.tail=null,q.lastEffect=null),Nn(Bn,Bn.current),D)break;return null;case 22:case 23:return m.lanes=0,or(h,m,N)}return Aa(h,m,N)}var KP,ek,XP,YP;KP=function(h,m){for(var N=m.child;N!==null;){if(N.tag===5||N.tag===6)h.appendChild(N.stateNode);else if(N.tag!==4&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===m)break;for(;N.sibling===null;){if(N.return===null||N.return===m)return;N=N.return}N.sibling.return=N.return,N=N.sibling}},ek=function(){},XP=function(h,m,N,D){var q=h.memoizedProps;if(q!==D){h=m.stateNode,Bs(An.current);var te=null;switch(N){case"input":q=Ne(h,q),D=Ne(h,D),te=[];break;case"select":q=W({},q,{value:void 0}),D=W({},D,{value:void 0}),te=[];break;case"textarea":q=Ke(h,q),D=Ke(h,D),te=[];break;default:typeof q.onClick!="function"&&typeof D.onClick=="function"&&(h.onclick=fu)}br(N,D);var de;N=null;for(it in q)if(!D.hasOwnProperty(it)&&q.hasOwnProperty(it)&&q[it]!=null)if(it==="style"){var Ae=q[it];for(de in Ae)Ae.hasOwnProperty(de)&&(N||(N={}),N[de]="")}else it!=="dangerouslySetInnerHTML"&&it!=="children"&&it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&it!=="autoFocus"&&(s.hasOwnProperty(it)?te||(te=[]):(te=te||[]).push(it,null));for(it in D){var Le=D[it];if(Ae=q?.[it],D.hasOwnProperty(it)&&Le!==Ae&&(Le!=null||Ae!=null))if(it==="style")if(Ae){for(de in Ae)!Ae.hasOwnProperty(de)||Le&&Le.hasOwnProperty(de)||(N||(N={}),N[de]="");for(de in Le)Le.hasOwnProperty(de)&&Ae[de]!==Le[de]&&(N||(N={}),N[de]=Le[de])}else N||(te||(te=[]),te.push(it,N)),N=Le;else it==="dangerouslySetInnerHTML"?(Le=Le?Le.__html:void 0,Ae=Ae?Ae.__html:void 0,Le!=null&&Ae!==Le&&(te=te||[]).push(it,Le)):it==="children"?typeof Le!="string"&&typeof Le!="number"||(te=te||[]).push(it,""+Le):it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&(s.hasOwnProperty(it)?(Le!=null&&it==="onScroll"&&Mn("scroll",h),te||Ae===Le||(te=[])):(te=te||[]).push(it,Le))}N&&(te=te||[]).push("style",N);var it=te;(m.updateQueue=it)&&(m.flags|=4)}},YP=function(h,m,N,D){N!==D&&(m.flags|=4)};function oy(h,m){if(!bn)switch(h.tailMode){case"hidden":m=h.tail;for(var N=null;m!==null;)m.alternate!==null&&(N=m),m=m.sibling;N===null?h.tail=null:N.sibling=null;break;case"collapsed":N=h.tail;for(var D=null;N!==null;)N.alternate!==null&&(D=N),N=N.sibling;D===null?m||h.tail===null?h.tail=null:h.tail.sibling=null:D.sibling=null}}function hi(h){var m=h.alternate!==null&&h.alternate.child===h.child,N=0,D=0;if(m)for(var q=h.child;q!==null;)N|=q.lanes|q.childLanes,D|=q.subtreeFlags&14680064,D|=q.flags&14680064,q.return=h,q=q.sibling;else for(q=h.child;q!==null;)N|=q.lanes|q.childLanes,D|=q.subtreeFlags,D|=q.flags,q.return=h,q=q.sibling;return h.subtreeFlags|=D,h.childLanes=N,m}function cQ(h,m,N){var D=m.pendingProps;switch(Qs(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hi(m),null;case 1:return Ta(m.type)&&Sd(),hi(m),null;case 3:return D=m.stateNode,Yn(),Ln(ka),Ln(fa),Ca(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),(h===null||h.child===null)&&(nh(m)?m.flags|=4:h===null||h.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Li!==null&&(dk(Li),Li=null))),ek(h,m),hi(m),null;case 5:Ol(m);var q=Bs(ps.current);if(N=m.type,h!==null&&m.stateNode!=null)XP(h,m,N,D,q),h.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!D){if(m.stateNode===null)throw Error(r(166));return hi(m),null}if(h=Bs(An.current),nh(m)){D=m.stateNode,N=m.type;var te=m.memoizedProps;switch(D[to]=m,D[eh]=te,h=(m.mode&1)!==0,N){case"dialog":Mn("cancel",D),Mn("close",D);break;case"iframe":case"object":case"embed":Mn("load",D);break;case"video":case"audio":for(q=0;q<mc.length;q++)Mn(mc[q],D);break;case"source":Mn("error",D);break;case"img":case"image":case"link":Mn("error",D),Mn("load",D);break;case"details":Mn("toggle",D);break;case"input":Oe(D,te),Mn("invalid",D);break;case"select":D._wrapperState={wasMultiple:!!te.multiple},Mn("invalid",D);break;case"textarea":xt(D,te),Mn("invalid",D)}br(N,te),q=null;for(var de in te)if(te.hasOwnProperty(de)){var Ae=te[de];de==="children"?typeof Ae=="string"?D.textContent!==Ae&&(te.suppressHydrationWarning!==!0&&Qf(D.textContent,Ae,h),q=["children",Ae]):typeof Ae=="number"&&D.textContent!==""+Ae&&(te.suppressHydrationWarning!==!0&&Qf(D.textContent,Ae,h),q=["children",""+Ae]):s.hasOwnProperty(de)&&Ae!=null&&de==="onScroll"&&Mn("scroll",D)}switch(N){case"input":Ee(D),Nt(D,te,!0);break;case"textarea":Ee(D),At(D);break;case"select":case"option":break;default:typeof te.onClick=="function"&&(D.onclick=fu)}D=q,m.updateQueue=D,D!==null&&(m.flags|=4)}else{de=q.nodeType===9?q:q.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=Dt(N)),h==="http://www.w3.org/1999/xhtml"?N==="script"?(h=de.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof D.is=="string"?h=de.createElement(N,{is:D.is}):(h=de.createElement(N),N==="select"&&(de=h,D.multiple?de.multiple=!0:D.size&&(de.size=D.size))):h=de.createElementNS(h,N),h[to]=m,h[eh]=D,KP(h,m,!1,!1),m.stateNode=h;e:{switch(de=xr(N,D),N){case"dialog":Mn("cancel",h),Mn("close",h),q=D;break;case"iframe":case"object":case"embed":Mn("load",h),q=D;break;case"video":case"audio":for(q=0;q<mc.length;q++)Mn(mc[q],h);q=D;break;case"source":Mn("error",h),q=D;break;case"img":case"image":case"link":Mn("error",h),Mn("load",h),q=D;break;case"details":Mn("toggle",h),q=D;break;case"input":Oe(h,D),q=Ne(h,D),Mn("invalid",h);break;case"option":q=D;break;case"select":h._wrapperState={wasMultiple:!!D.multiple},q=W({},D,{value:void 0}),Mn("invalid",h);break;case"textarea":xt(h,D),q=Ke(h,D),Mn("invalid",h);break;default:q=D}br(N,q),Ae=q;for(te in Ae)if(Ae.hasOwnProperty(te)){var Le=Ae[te];te==="style"?pr(h,Le):te==="dangerouslySetInnerHTML"?(Le=Le?Le.__html:void 0,Le!=null&&vt(h,Le)):te==="children"?typeof Le=="string"?(N!=="textarea"||Le!=="")&&gt(h,Le):typeof Le=="number"&&gt(h,""+Le):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(s.hasOwnProperty(te)?Le!=null&&te==="onScroll"&&Mn("scroll",h):Le!=null&&b(h,te,Le,de))}switch(N){case"input":Ee(h),Nt(h,D,!1);break;case"textarea":Ee(h),At(h);break;case"option":D.value!=null&&h.setAttribute("value",""+se(D.value));break;case"select":h.multiple=!!D.multiple,te=D.value,te!=null?Fe(h,!!D.multiple,te,!1):D.defaultValue!=null&&Fe(h,!!D.multiple,D.defaultValue,!0);break;default:typeof q.onClick=="function"&&(h.onclick=fu)}switch(N){case"button":case"input":case"select":case"textarea":D=!!D.autoFocus;break e;case"img":D=!0;break e;default:D=!1}}D&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return hi(m),null;case 6:if(h&&m.stateNode!=null)YP(h,m,h.memoizedProps,D);else{if(typeof D!="string"&&m.stateNode===null)throw Error(r(166));if(N=Bs(ps.current),Bs(An.current),nh(m)){if(D=m.stateNode,N=m.memoizedProps,D[to]=m,(te=D.nodeValue!==N)&&(h=Mi,h!==null))switch(h.tag){case 3:Qf(D.nodeValue,N,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&Qf(D.nodeValue,N,(h.mode&1)!==0)}te&&(m.flags|=4)}else D=(N.nodeType===9?N:N.ownerDocument).createTextNode(D),D[to]=m,m.stateNode=D}return hi(m),null;case 13:if(Ln(Bn),D=m.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(bn&&Qt!==null&&(m.mode&1)!==0&&(m.flags&128)===0)Ym(),wu(),m.flags|=98560,te=!1;else if(te=nh(m),D!==null&&D.dehydrated!==null){if(h===null){if(!te)throw Error(r(318));if(te=m.memoizedState,te=te!==null?te.dehydrated:null,!te)throw Error(r(317));te[to]=m}else wu(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;hi(m),te=!1}else Li!==null&&(dk(Li),Li=null),te=!0;if(!te)return m.flags&65536?m:null}return(m.flags&128)!==0?(m.lanes=N,m):(D=D!==null,D!==(h!==null&&h.memoizedState!==null)&&D&&(m.child.flags|=8192,(m.mode&1)!==0&&(h===null||(Bn.current&1)!==0?ga===0&&(ga=3):gk())),m.updateQueue!==null&&(m.flags|=4),hi(m),null);case 4:return Yn(),ek(h,m),h===null&&uu(m.stateNode.containerInfo),hi(m),null;case 10:return og(m.type._context),hi(m),null;case 17:return Ta(m.type)&&Sd(),hi(m),null;case 19:if(Ln(Bn),te=m.memoizedState,te===null)return hi(m),null;if(D=(m.flags&128)!==0,de=te.rendering,de===null)if(D)oy(te,!1);else{if(ga!==0||h!==null&&(h.flags&128)!==0)for(h=m.child;h!==null;){if(de=Pd(h),de!==null){for(m.flags|=128,oy(te,!1),D=de.updateQueue,D!==null&&(m.updateQueue=D,m.flags|=4),m.subtreeFlags=0,D=N,N=m.child;N!==null;)te=N,h=D,te.flags&=14680066,de=te.alternate,de===null?(te.childLanes=0,te.lanes=h,te.child=null,te.subtreeFlags=0,te.memoizedProps=null,te.memoizedState=null,te.updateQueue=null,te.dependencies=null,te.stateNode=null):(te.childLanes=de.childLanes,te.lanes=de.lanes,te.child=de.child,te.subtreeFlags=0,te.deletions=null,te.memoizedProps=de.memoizedProps,te.memoizedState=de.memoizedState,te.updateQueue=de.updateQueue,te.type=de.type,h=de.dependencies,te.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),N=N.sibling;return Nn(Bn,Bn.current&1|2),m.child}h=h.sibling}te.tail!==null&&mt()>_g&&(m.flags|=128,D=!0,oy(te,!1),m.lanes=4194304)}else{if(!D)if(h=Pd(de),h!==null){if(m.flags|=128,D=!0,N=h.updateQueue,N!==null&&(m.updateQueue=N,m.flags|=4),oy(te,!0),te.tail===null&&te.tailMode==="hidden"&&!de.alternate&&!bn)return hi(m),null}else 2*mt()-te.renderingStartTime>_g&&N!==1073741824&&(m.flags|=128,D=!0,oy(te,!1),m.lanes=4194304);te.isBackwards?(de.sibling=m.child,m.child=de):(N=te.last,N!==null?N.sibling=de:m.child=de,te.last=de)}return te.tail!==null?(m=te.tail,te.rendering=m,te.tail=m.sibling,te.renderingStartTime=mt(),m.sibling=null,N=Bn.current,Nn(Bn,D?N&1|2:N&1),m):(hi(m),null);case 22:case 23:return hk(),D=m.memoizedState!==null,h!==null&&h.memoizedState!==null!==D&&(m.flags|=8192),D&&(m.mode&1)!==0?(Co&1073741824)!==0&&(hi(m),m.subtreeFlags&6&&(m.flags|=8192)):hi(m),null;case 24:return null;case 25:return null}throw Error(r(156,m.tag))}function uQ(h,m){switch(Qs(m),m.tag){case 1:return Ta(m.type)&&Sd(),h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 3:return Yn(),Ln(ka),Ln(fa),Ca(),h=m.flags,(h&65536)!==0&&(h&128)===0?(m.flags=h&-65537|128,m):null;case 5:return Ol(m),null;case 13:if(Ln(Bn),h=m.memoizedState,h!==null&&h.dehydrated!==null){if(m.alternate===null)throw Error(r(340));wu()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 19:return Ln(Bn),null;case 4:return Yn(),null;case 10:return og(m.type._context),null;case 22:case 23:return hk(),null;case 24:return null;default:return null}}var jw=!1,gi=!1,dQ=typeof WeakSet=="function"?WeakSet:Set,lr=null;function wg(h,m){var N=h.ref;if(N!==null)if(typeof N=="function")try{N(null)}catch(D){Ts(h,m,D)}else N.current=null}function tk(h,m,N){try{N()}catch(D){Ts(h,m,D)}}var JP=!1;function fQ(h,m){if(Hm=F0,h=Ms(),vd(h)){if("selectionStart"in h)var N={start:h.selectionStart,end:h.selectionEnd};else e:{N=(N=h.ownerDocument)&&N.defaultView||window;var D=N.getSelection&&N.getSelection();if(D&&D.rangeCount!==0){N=D.anchorNode;var q=D.anchorOffset,te=D.focusNode;D=D.focusOffset;try{N.nodeType,te.nodeType}catch{N=null;break e}var de=0,Ae=-1,Le=-1,it=0,Rt=0,Lt=h,Ft=null;t:for(;;){for(var sr;Lt!==N||q!==0&&Lt.nodeType!==3||(Ae=de+q),Lt!==te||D!==0&&Lt.nodeType!==3||(Le=de+D),Lt.nodeType===3&&(de+=Lt.nodeValue.length),(sr=Lt.firstChild)!==null;)Ft=Lt,Lt=sr;for(;;){if(Lt===h)break t;if(Ft===N&&++it===q&&(Ae=de),Ft===te&&++Rt===D&&(Le=de),(sr=Lt.nextSibling)!==null)break;Lt=Ft,Ft=Lt.parentNode}Lt=sr}N=Ae===-1||Le===-1?null:{start:Ae,end:Le}}else N=null}N=N||{start:0,end:0}}else N=null;for(Gm={focusedElem:h,selectionRange:N},F0=!1,lr=m;lr!==null;)if(m=lr,h=m.child,(m.subtreeFlags&1028)!==0&&h!==null)h.return=m,lr=h;else for(;lr!==null;){m=lr;try{var dr=m.alternate;if((m.flags&1024)!==0)switch(m.tag){case 0:case 11:case 15:break;case 1:if(dr!==null){var fr=dr.memoizedProps,Ws=dr.memoizedState,Je=m.stateNode,We=Je.getSnapshotBeforeUpdate(m.elementType===m.type?fr:ha(m.type,fr),Ws);Je.__reactInternalSnapshotBeforeUpdate=We}break;case 3:var st=m.stateNode.containerInfo;st.nodeType===1?st.textContent="":st.nodeType===9&&st.documentElement&&st.removeChild(st.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(zt){Ts(m,m.return,zt)}if(h=m.sibling,h!==null){h.return=m.return,lr=h;break}lr=m.return}return dr=JP,JP=!1,dr}function ly(h,m,N){var D=m.updateQueue;if(D=D!==null?D.lastEffect:null,D!==null){var q=D=D.next;do{if((q.tag&h)===h){var te=q.destroy;q.destroy=void 0,te!==void 0&&tk(m,N,te)}q=q.next}while(q!==D)}}function Pw(h,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var N=m=m.next;do{if((N.tag&h)===h){var D=N.create;N.destroy=D()}N=N.next}while(N!==m)}}function rk(h){var m=h.ref;if(m!==null){var N=h.stateNode;switch(h.tag){case 5:h=N;break;default:h=N}typeof m=="function"?m(h):m.current=h}}function QP(h){var m=h.alternate;m!==null&&(h.alternate=null,QP(m)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(m=h.stateNode,m!==null&&(delete m[to],delete m[eh],delete m[Z0],delete m[pw],delete m[mw])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function ZP(h){return h.tag===5||h.tag===3||h.tag===4}function eO(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||ZP(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function nk(h,m,N){var D=h.tag;if(D===5||D===6)h=h.stateNode,m?N.nodeType===8?N.parentNode.insertBefore(h,m):N.insertBefore(h,m):(N.nodeType===8?(m=N.parentNode,m.insertBefore(h,N)):(m=N,m.appendChild(h)),N=N._reactRootContainer,N!=null||m.onclick!==null||(m.onclick=fu));else if(D!==4&&(h=h.child,h!==null))for(nk(h,m,N),h=h.sibling;h!==null;)nk(h,m,N),h=h.sibling}function sk(h,m,N){var D=h.tag;if(D===5||D===6)h=h.stateNode,m?N.insertBefore(h,m):N.appendChild(h);else if(D!==4&&(h=h.child,h!==null))for(sk(h,m,N),h=h.sibling;h!==null;)sk(h,m,N),h=h.sibling}var Ya=null,Dl=!1;function Ud(h,m,N){for(N=N.child;N!==null;)tO(h,m,N),N=N.sibling}function tO(h,m,N){if(Xr&&typeof Xr.onCommitFiberUnmount=="function")try{Xr.onCommitFiberUnmount(wn,N)}catch{}switch(N.tag){case 5:gi||wg(N,m);case 6:var D=Ya,q=Dl;Ya=null,Ud(h,m,N),Ya=D,Dl=q,Ya!==null&&(Dl?(h=Ya,N=N.stateNode,h.nodeType===8?h.parentNode.removeChild(N):h.removeChild(N)):Ya.removeChild(N.stateNode));break;case 18:Ya!==null&&(Dl?(h=Ya,N=N.stateNode,h.nodeType===8?Q0(h.parentNode,N):h.nodeType===1&&Q0(h,N),ci(h)):Q0(Ya,N.stateNode));break;case 4:D=Ya,q=Dl,Ya=N.stateNode.containerInfo,Dl=!0,Ud(h,m,N),Ya=D,Dl=q;break;case 0:case 11:case 14:case 15:if(!gi&&(D=N.updateQueue,D!==null&&(D=D.lastEffect,D!==null))){q=D=D.next;do{var te=q,de=te.destroy;te=te.tag,de!==void 0&&((te&2)!==0||(te&4)!==0)&&tk(N,m,de),q=q.next}while(q!==D)}Ud(h,m,N);break;case 1:if(!gi&&(wg(N,m),D=N.stateNode,typeof D.componentWillUnmount=="function"))try{D.props=N.memoizedProps,D.state=N.memoizedState,D.componentWillUnmount()}catch(Ae){Ts(N,m,Ae)}Ud(h,m,N);break;case 21:Ud(h,m,N);break;case 22:N.mode&1?(gi=(D=gi)||N.memoizedState!==null,Ud(h,m,N),gi=D):Ud(h,m,N);break;default:Ud(h,m,N)}}function rO(h){var m=h.updateQueue;if(m!==null){h.updateQueue=null;var N=h.stateNode;N===null&&(N=h.stateNode=new dQ),m.forEach(function(D){var q=bQ.bind(null,h,D);N.has(D)||(N.add(D),D.then(q,q))})}}function Il(h,m){var N=m.deletions;if(N!==null)for(var D=0;D<N.length;D++){var q=N[D];try{var te=h,de=m,Ae=de;e:for(;Ae!==null;){switch(Ae.tag){case 5:Ya=Ae.stateNode,Dl=!1;break e;case 3:Ya=Ae.stateNode.containerInfo,Dl=!0;break e;case 4:Ya=Ae.stateNode.containerInfo,Dl=!0;break e}Ae=Ae.return}if(Ya===null)throw Error(r(160));tO(te,de,q),Ya=null,Dl=!1;var Le=q.alternate;Le!==null&&(Le.return=null),q.return=null}catch(it){Ts(q,m,it)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)nO(m,h),m=m.sibling}function nO(h,m){var N=h.alternate,D=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(Il(m,h),Ac(h),D&4){try{ly(3,h,h.return),Pw(3,h)}catch(fr){Ts(h,h.return,fr)}try{ly(5,h,h.return)}catch(fr){Ts(h,h.return,fr)}}break;case 1:Il(m,h),Ac(h),D&512&&N!==null&&wg(N,N.return);break;case 5:if(Il(m,h),Ac(h),D&512&&N!==null&&wg(N,N.return),h.flags&32){var q=h.stateNode;try{gt(q,"")}catch(fr){Ts(h,h.return,fr)}}if(D&4&&(q=h.stateNode,q!=null)){var te=h.memoizedProps,de=N!==null?N.memoizedProps:te,Ae=h.type,Le=h.updateQueue;if(h.updateQueue=null,Le!==null)try{Ae==="input"&&te.type==="radio"&&te.name!=null&&Re(q,te),xr(Ae,de);var it=xr(Ae,te);for(de=0;de<Le.length;de+=2){var Rt=Le[de],Lt=Le[de+1];Rt==="style"?pr(q,Lt):Rt==="dangerouslySetInnerHTML"?vt(q,Lt):Rt==="children"?gt(q,Lt):b(q,Rt,Lt,it)}switch(Ae){case"input":ze(q,te);break;case"textarea":ut(q,te);break;case"select":var Ft=q._wrapperState.wasMultiple;q._wrapperState.wasMultiple=!!te.multiple;var sr=te.value;sr!=null?Fe(q,!!te.multiple,sr,!1):Ft!==!!te.multiple&&(te.defaultValue!=null?Fe(q,!!te.multiple,te.defaultValue,!0):Fe(q,!!te.multiple,te.multiple?[]:"",!1))}q[eh]=te}catch(fr){Ts(h,h.return,fr)}}break;case 6:if(Il(m,h),Ac(h),D&4){if(h.stateNode===null)throw Error(r(162));q=h.stateNode,te=h.memoizedProps;try{q.nodeValue=te}catch(fr){Ts(h,h.return,fr)}}break;case 3:if(Il(m,h),Ac(h),D&4&&N!==null&&N.memoizedState.isDehydrated)try{ci(m.containerInfo)}catch(fr){Ts(h,h.return,fr)}break;case 4:Il(m,h),Ac(h);break;case 13:Il(m,h),Ac(h),q=h.child,q.flags&8192&&(te=q.memoizedState!==null,q.stateNode.isHidden=te,!te||q.alternate!==null&&q.alternate.memoizedState!==null||(ok=mt())),D&4&&rO(h);break;case 22:if(Rt=N!==null&&N.memoizedState!==null,h.mode&1?(gi=(it=gi)||Rt,Il(m,h),gi=it):Il(m,h),Ac(h),D&8192){if(it=h.memoizedState!==null,(h.stateNode.isHidden=it)&&!Rt&&(h.mode&1)!==0)for(lr=h,Rt=h.child;Rt!==null;){for(Lt=lr=Rt;lr!==null;){switch(Ft=lr,sr=Ft.child,Ft.tag){case 0:case 11:case 14:case 15:ly(4,Ft,Ft.return);break;case 1:wg(Ft,Ft.return);var dr=Ft.stateNode;if(typeof dr.componentWillUnmount=="function"){D=Ft,N=Ft.return;try{m=D,dr.props=m.memoizedProps,dr.state=m.memoizedState,dr.componentWillUnmount()}catch(fr){Ts(D,N,fr)}}break;case 5:wg(Ft,Ft.return);break;case 22:if(Ft.memoizedState!==null){iO(Lt);continue}}sr!==null?(sr.return=Ft,lr=sr):iO(Lt)}Rt=Rt.sibling}e:for(Rt=null,Lt=h;;){if(Lt.tag===5){if(Rt===null){Rt=Lt;try{q=Lt.stateNode,it?(te=q.style,typeof te.setProperty=="function"?te.setProperty("display","none","important"):te.display="none"):(Ae=Lt.stateNode,Le=Lt.memoizedProps.style,de=Le!=null&&Le.hasOwnProperty("display")?Le.display:null,Ae.style.display=Zt("display",de))}catch(fr){Ts(h,h.return,fr)}}}else if(Lt.tag===6){if(Rt===null)try{Lt.stateNode.nodeValue=it?"":Lt.memoizedProps}catch(fr){Ts(h,h.return,fr)}}else if((Lt.tag!==22&&Lt.tag!==23||Lt.memoizedState===null||Lt===h)&&Lt.child!==null){Lt.child.return=Lt,Lt=Lt.child;continue}if(Lt===h)break e;for(;Lt.sibling===null;){if(Lt.return===null||Lt.return===h)break e;Rt===Lt&&(Rt=null),Lt=Lt.return}Rt===Lt&&(Rt=null),Lt.sibling.return=Lt.return,Lt=Lt.sibling}}break;case 19:Il(m,h),Ac(h),D&4&&rO(h);break;case 21:break;default:Il(m,h),Ac(h)}}function Ac(h){var m=h.flags;if(m&2){try{e:{for(var N=h.return;N!==null;){if(ZP(N)){var D=N;break e}N=N.return}throw Error(r(160))}switch(D.tag){case 5:var q=D.stateNode;D.flags&32&&(gt(q,""),D.flags&=-33);var te=eO(h);sk(h,te,q);break;case 3:case 4:var de=D.stateNode.containerInfo,Ae=eO(h);nk(h,Ae,de);break;default:throw Error(r(161))}}catch(Le){Ts(h,h.return,Le)}h.flags&=-3}m&4096&&(h.flags&=-4097)}function hQ(h,m,N){lr=h,sO(h)}function sO(h,m,N){for(var D=(h.mode&1)!==0;lr!==null;){var q=lr,te=q.child;if(q.tag===22&&D){var de=q.memoizedState!==null||jw;if(!de){var Ae=q.alternate,Le=Ae!==null&&Ae.memoizedState!==null||gi;Ae=jw;var it=gi;if(jw=de,(gi=Le)&&!it)for(lr=q;lr!==null;)de=lr,Le=de.child,de.tag===22&&de.memoizedState!==null?oO(q):Le!==null?(Le.return=de,lr=Le):oO(q);for(;te!==null;)lr=te,sO(te),te=te.sibling;lr=q,jw=Ae,gi=it}aO(h)}else(q.subtreeFlags&8772)!==0&&te!==null?(te.return=q,lr=te):aO(h)}}function aO(h){for(;lr!==null;){var m=lr;if((m.flags&8772)!==0){var N=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:gi||Pw(5,m);break;case 1:var D=m.stateNode;if(m.flags&4&&!gi)if(N===null)D.componentDidMount();else{var q=m.elementType===m.type?N.memoizedProps:ha(m.type,N.memoizedProps);D.componentDidUpdate(q,N.memoizedState,D.__reactInternalSnapshotBeforeUpdate)}var te=m.updateQueue;te!==null&&cs(m,te,D);break;case 3:var de=m.updateQueue;if(de!==null){if(N=null,m.child!==null)switch(m.child.tag){case 5:N=m.child.stateNode;break;case 1:N=m.child.stateNode}cs(m,de,N)}break;case 5:var Ae=m.stateNode;if(N===null&&m.flags&4){N=Ae;var Le=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":Le.autoFocus&&N.focus();break;case"img":Le.src&&(N.src=Le.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var it=m.alternate;if(it!==null){var Rt=it.memoizedState;if(Rt!==null){var Lt=Rt.dehydrated;Lt!==null&&ci(Lt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}gi||m.flags&512&&rk(m)}catch(Ft){Ts(m,m.return,Ft)}}if(m===h){lr=null;break}if(N=m.sibling,N!==null){N.return=m.return,lr=N;break}lr=m.return}}function iO(h){for(;lr!==null;){var m=lr;if(m===h){lr=null;break}var N=m.sibling;if(N!==null){N.return=m.return,lr=N;break}lr=m.return}}function oO(h){for(;lr!==null;){var m=lr;try{switch(m.tag){case 0:case 11:case 15:var N=m.return;try{Pw(4,m)}catch(Le){Ts(m,N,Le)}break;case 1:var D=m.stateNode;if(typeof D.componentDidMount=="function"){var q=m.return;try{D.componentDidMount()}catch(Le){Ts(m,q,Le)}}var te=m.return;try{rk(m)}catch(Le){Ts(m,te,Le)}break;case 5:var de=m.return;try{rk(m)}catch(Le){Ts(m,de,Le)}}}catch(Le){Ts(m,m.return,Le)}if(m===h){lr=null;break}var Ae=m.sibling;if(Ae!==null){Ae.return=m.return,lr=Ae;break}lr=m.return}}var gQ=Math.ceil,Ow=E.ReactCurrentDispatcher,ak=E.ReactCurrentOwner,Jo=E.ReactCurrentBatchConfig,dn=0,ja=null,Zs=null,Ja=0,Co=0,bg=Al(0),ga=0,cy=null,dh=0,Fw=0,ik=0,uy=null,so=null,ok=0,_g=1/0,Tu=null,Rw=!1,lk=null,Wd=null,Dw=!1,zd=null,Iw=0,dy=0,ck=null,Mw=-1,Lw=0;function Wi(){return(dn&6)!==0?mt():Mw!==-1?Mw:Mw=mt()}function Hd(h){return(h.mode&1)===0?1:(dn&2)!==0&&Ja!==0?Ja&-Ja:Jm.transition!==null?(Lw===0&&(Lw=kt()),Lw):(h=It,h!==0||(h=window.event,h=h===void 0?16:Q1(h.type)),h)}function Ml(h,m,N,D){if(50<dy)throw dy=0,ck=null,Error(r(185));Or(h,N,D),((dn&2)===0||h!==ja)&&(h===ja&&((dn&2)===0&&(Fw|=N),ga===4&&Gd(h,Ja)),ao(h,D),N===1&&dn===0&&(m.mode&1)===0&&(_g=mt()+500,kd&&wc()))}function ao(h,m){var N=h.callbackNode;Pe(h,m);var D=ye(h,h===ja?Ja:0);if(D===0)N!==null&&je(N),h.callbackNode=null,h.callbackPriority=0;else if(m=D&-D,h.callbackPriority!==m){if(N!=null&&je(N),m===1)h.tag===0?jl(cO.bind(null,h)):rh(cO.bind(null,h)),hw(function(){(dn&6)===0&&wc()}),N=null;else{switch(Zn(D)){case 1:N=pt;break;case 4:N=Bt;break;case 16:N=Cr;break;case 536870912:N=Ur;break;default:N=Cr}N=yO(N,lO.bind(null,h))}h.callbackPriority=m,h.callbackNode=N}}function lO(h,m){if(Mw=-1,Lw=0,(dn&6)!==0)throw Error(r(327));var N=h.callbackNode;if(Sg()&&h.callbackNode!==N)return null;var D=ye(h,h===ja?Ja:0);if(D===0)return null;if((D&30)!==0||(D&h.expiredLanes)!==0||m)m=Bw(h,D);else{m=D;var q=dn;dn|=2;var te=dO();(ja!==h||Ja!==m)&&(Tu=null,_g=mt()+500,hh(h,m));do try{yQ();break}catch(Ae){uO(h,Ae)}while(!0);ig(),Ow.current=te,dn=q,Zs!==null?m=0:(ja=null,Ja=0,m=ga)}if(m!==0){if(m===2&&(q=Tt(h),q!==0&&(D=q,m=uk(h,q))),m===1)throw N=cy,hh(h,0),Gd(h,D),ao(h,mt()),N;if(m===6)Gd(h,D);else{if(q=h.current.alternate,(D&30)===0&&!pQ(q)&&(m=Bw(h,D),m===2&&(te=Tt(h),te!==0&&(D=te,m=uk(h,te))),m===1))throw N=cy,hh(h,0),Gd(h,D),ao(h,mt()),N;switch(h.finishedWork=q,h.finishedLanes=D,m){case 0:case 1:throw Error(r(345));case 2:gh(h,so,Tu);break;case 3:if(Gd(h,D),(D&130023424)===D&&(m=ok+500-mt(),10<m)){if(ye(h,0)!==0)break;if(q=h.suspendedLanes,(q&D)!==D){Wi(),h.pingedLanes|=h.suspendedLanes&q;break}h.timeoutHandle=Di(gh.bind(null,h,so,Tu),m);break}gh(h,so,Tu);break;case 4:if(Gd(h,D),(D&4194240)===D)break;for(m=h.eventTimes,q=-1;0<D;){var de=31-ar(D);te=1<<de,de=m[de],de>q&&(q=de),D&=~te}if(D=q,D=mt()-D,D=(120>D?120:480>D?480:1080>D?1080:1920>D?1920:3e3>D?3e3:4320>D?4320:1960*gQ(D/1960))-D,10<D){h.timeoutHandle=Di(gh.bind(null,h,so,Tu),D);break}gh(h,so,Tu);break;case 5:gh(h,so,Tu);break;default:throw Error(r(329))}}}return ao(h,mt()),h.callbackNode===N?lO.bind(null,h):null}function uk(h,m){var N=uy;return h.current.memoizedState.isDehydrated&&(hh(h,m).flags|=256),h=Bw(h,m),h!==2&&(m=so,so=N,m!==null&&dk(m)),h}function dk(h){so===null?so=h:so.push.apply(so,h)}function pQ(h){for(var m=h;;){if(m.flags&16384){var N=m.updateQueue;if(N!==null&&(N=N.stores,N!==null))for(var D=0;D<N.length;D++){var q=N[D],te=q.getSnapshot;q=q.value;try{if(!di(te(),q))return!1}catch{return!1}}}if(N=m.child,m.subtreeFlags&16384&&N!==null)N.return=m,m=N;else{if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Gd(h,m){for(m&=~ik,m&=~Fw,h.suspendedLanes|=m,h.pingedLanes&=~m,h=h.expirationTimes;0<m;){var N=31-ar(m),D=1<<N;h[N]=-1,m&=~D}}function cO(h){if((dn&6)!==0)throw Error(r(327));Sg();var m=ye(h,0);if((m&1)===0)return ao(h,mt()),null;var N=Bw(h,m);if(h.tag!==0&&N===2){var D=Tt(h);D!==0&&(m=D,N=uk(h,D))}if(N===1)throw N=cy,hh(h,0),Gd(h,m),ao(h,mt()),N;if(N===6)throw Error(r(345));return h.finishedWork=h.current.alternate,h.finishedLanes=m,gh(h,so,Tu),ao(h,mt()),null}function fk(h,m){var N=dn;dn|=1;try{return h(m)}finally{dn=N,dn===0&&(_g=mt()+500,kd&&wc())}}function fh(h){zd!==null&&zd.tag===0&&(dn&6)===0&&Sg();var m=dn;dn|=1;var N=Jo.transition,D=It;try{if(Jo.transition=null,It=1,h)return h()}finally{It=D,Jo.transition=N,dn=m,(dn&6)===0&&wc()}}function hk(){Co=bg.current,Ln(bg)}function hh(h,m){h.finishedWork=null,h.finishedLanes=0;var N=h.timeoutHandle;if(N!==-1&&(h.timeoutHandle=-1,qm(N)),Zs!==null)for(N=Zs.return;N!==null;){var D=N;switch(Qs(D),D.tag){case 1:D=D.type.childContextTypes,D!=null&&Sd();break;case 3:Yn(),Ln(ka),Ln(fa),Ca();break;case 5:Ol(D);break;case 4:Yn();break;case 13:Ln(Bn);break;case 19:Ln(Bn);break;case 10:og(D.type._context);break;case 22:case 23:hk()}N=N.return}if(ja=h,Zs=h=Vd(h.current,null),Ja=Co=m,ga=0,cy=null,ik=Fw=dh=0,so=uy=null,Vo!==null){for(m=0;m<Vo.length;m++)if(N=Vo[m],D=N.interleaved,D!==null){N.interleaved=null;var q=D.next,te=N.pending;if(te!==null){var de=te.next;te.next=q,D.next=de}N.pending=D}Vo=null}return h}function uO(h,m){do{var N=Zs;try{if(ig(),Od.current=Md,To){for(var D=Tn.memoizedState;D!==null;){var q=D.queue;q!==null&&(q.pending=null),D=D.next}To=!1}if(Ka=0,Ss=us=Tn=null,Tc=!1,no=0,ak.current=null,N===null||N.return===null){ga=1,cy=m,Zs=null;break}e:{var te=h,de=N.return,Ae=N,Le=m;if(m=Ja,Ae.flags|=32768,Le!==null&&typeof Le=="object"&&typeof Le.then=="function"){var it=Le,Rt=Ae,Lt=Rt.tag;if((Rt.mode&1)===0&&(Lt===0||Lt===11||Lt===15)){var Ft=Rt.alternate;Ft?(Rt.updateQueue=Ft.updateQueue,Rt.memoizedState=Ft.memoizedState,Rt.lanes=Ft.lanes):(Rt.updateQueue=null,Rt.memoizedState=null)}var sr=F(de);if(sr!==null){sr.flags&=-257,U(sr,de,Ae,te,m),sr.mode&1&&S(te,it,m),m=sr,Le=it;var dr=m.updateQueue;if(dr===null){var fr=new Set;fr.add(Le),m.updateQueue=fr}else dr.add(Le);break e}else{if((m&1)===0){S(te,it,m),gk();break e}Le=Error(r(426))}}else if(bn&&Ae.mode&1){var Ws=F(de);if(Ws!==null){(Ws.flags&65536)===0&&(Ws.flags|=256),U(Ws,de,Ae,te,m),sh(ku(Le,Ae));break e}}te=Le=ku(Le,Ae),ga!==4&&(ga=2),uy===null?uy=[te]:uy.push(te),te=de;do{switch(te.tag){case 3:te.flags|=65536,m&=-m,te.lanes|=m;var Je=Aw(te,Le,m);lh(te,Je);break e;case 1:Ae=Le;var We=te.type,st=te.stateNode;if((te.flags&128)===0&&(typeof We.getDerivedStateFromError=="function"||st!==null&&typeof st.componentDidCatch=="function"&&(Wd===null||!Wd.has(st)))){te.flags|=65536,m&=-m,te.lanes|=m;var zt=w(te,Ae,m);lh(te,zt);break e}}te=te.return}while(te!==null)}hO(N)}catch(gr){m=gr,Zs===N&&N!==null&&(Zs=N=N.return);continue}break}while(!0)}function dO(){var h=Ow.current;return Ow.current=Md,h===null?Md:h}function gk(){(ga===0||ga===3||ga===2)&&(ga=4),ja===null||(dh&268435455)===0&&(Fw&268435455)===0||Gd(ja,Ja)}function Bw(h,m){var N=dn;dn|=2;var D=dO();(ja!==h||Ja!==m)&&(Tu=null,hh(h,m));do try{mQ();break}catch(q){uO(h,q)}while(!0);if(ig(),dn=N,Ow.current=D,Zs!==null)throw Error(r(261));return ja=null,Ja=0,ga}function mQ(){for(;Zs!==null;)fO(Zs)}function yQ(){for(;Zs!==null&&!qe();)fO(Zs)}function fO(h){var m=mO(h.alternate,h,Co);h.memoizedProps=h.pendingProps,m===null?hO(h):Zs=m,ak.current=null}function hO(h){var m=h;do{var N=m.alternate;if(h=m.return,(m.flags&32768)===0){if(N=cQ(N,m,Co),N!==null){Zs=N;return}}else{if(N=uQ(N,m),N!==null){N.flags&=32767,Zs=N;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{ga=6,Zs=null;return}}if(m=m.sibling,m!==null){Zs=m;return}Zs=m=h}while(m!==null);ga===0&&(ga=5)}function gh(h,m,N){var D=It,q=Jo.transition;try{Jo.transition=null,It=1,xQ(h,m,N,D)}finally{Jo.transition=q,It=D}return null}function xQ(h,m,N,D){do Sg();while(zd!==null);if((dn&6)!==0)throw Error(r(327));N=h.finishedWork;var q=h.finishedLanes;if(N===null)return null;if(h.finishedWork=null,h.finishedLanes=0,N===h.current)throw Error(r(177));h.callbackNode=null,h.callbackPriority=0;var te=N.lanes|N.childLanes;if(ct(h,te),h===ja&&(Zs=ja=null,Ja=0),(N.subtreeFlags&2064)===0&&(N.flags&2064)===0||Dw||(Dw=!0,yO(Cr,function(){return Sg(),null})),te=(N.flags&15990)!==0,(N.subtreeFlags&15990)!==0||te){te=Jo.transition,Jo.transition=null;var de=It;It=1;var Ae=dn;dn|=4,ak.current=null,fQ(h,N),nO(N,h),Kf(Gm),F0=!!Hm,Gm=Hm=null,h.current=N,hQ(N),Ze(),dn=Ae,It=de,Jo.transition=te}else h.current=N;if(Dw&&(Dw=!1,zd=h,Iw=q),te=h.pendingLanes,te===0&&(Wd=null),Wr(N.stateNode),ao(h,mt()),m!==null)for(D=h.onRecoverableError,N=0;N<m.length;N++)q=m[N],D(q.value,{componentStack:q.stack,digest:q.digest});if(Rw)throw Rw=!1,h=lk,lk=null,h;return(Iw&1)!==0&&h.tag!==0&&Sg(),te=h.pendingLanes,(te&1)!==0?h===ck?dy++:(dy=0,ck=h):dy=0,wc(),null}function Sg(){if(zd!==null){var h=Zn(Iw),m=Jo.transition,N=It;try{if(Jo.transition=null,It=16>h?16:h,zd===null)var D=!1;else{if(h=zd,zd=null,Iw=0,(dn&6)!==0)throw Error(r(331));var q=dn;for(dn|=4,lr=h.current;lr!==null;){var te=lr,de=te.child;if((lr.flags&16)!==0){var Ae=te.deletions;if(Ae!==null){for(var Le=0;Le<Ae.length;Le++){var it=Ae[Le];for(lr=it;lr!==null;){var Rt=lr;switch(Rt.tag){case 0:case 11:case 15:ly(8,Rt,te)}var Lt=Rt.child;if(Lt!==null)Lt.return=Rt,lr=Lt;else for(;lr!==null;){Rt=lr;var Ft=Rt.sibling,sr=Rt.return;if(QP(Rt),Rt===it){lr=null;break}if(Ft!==null){Ft.return=sr,lr=Ft;break}lr=sr}}}var dr=te.alternate;if(dr!==null){var fr=dr.child;if(fr!==null){dr.child=null;do{var Ws=fr.sibling;fr.sibling=null,fr=Ws}while(fr!==null)}}lr=te}}if((te.subtreeFlags&2064)!==0&&de!==null)de.return=te,lr=de;else e:for(;lr!==null;){if(te=lr,(te.flags&2048)!==0)switch(te.tag){case 0:case 11:case 15:ly(9,te,te.return)}var Je=te.sibling;if(Je!==null){Je.return=te.return,lr=Je;break e}lr=te.return}}var We=h.current;for(lr=We;lr!==null;){de=lr;var st=de.child;if((de.subtreeFlags&2064)!==0&&st!==null)st.return=de,lr=st;else e:for(de=We;lr!==null;){if(Ae=lr,(Ae.flags&2048)!==0)try{switch(Ae.tag){case 0:case 11:case 15:Pw(9,Ae)}}catch(gr){Ts(Ae,Ae.return,gr)}if(Ae===de){lr=null;break e}var zt=Ae.sibling;if(zt!==null){zt.return=Ae.return,lr=zt;break e}lr=Ae.return}}if(dn=q,wc(),Xr&&typeof Xr.onPostCommitFiberRoot=="function")try{Xr.onPostCommitFiberRoot(wn,h)}catch{}D=!0}return D}finally{It=N,Jo.transition=m}}return!1}function gO(h,m,N){m=ku(N,m),m=Aw(h,m,1),h=Xo(h,m,1),m=Wi(),h!==null&&(Or(h,1,m),ao(h,m))}function Ts(h,m,N){if(h.tag===3)gO(h,h,N);else for(;m!==null;){if(m.tag===3){gO(m,h,N);break}else if(m.tag===1){var D=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(Wd===null||!Wd.has(D))){h=ku(N,h),h=w(m,h,1),m=Xo(m,h,1),h=Wi(),m!==null&&(Or(m,1,h),ao(m,h));break}}m=m.return}}function vQ(h,m,N){var D=h.pingCache;D!==null&&D.delete(m),m=Wi(),h.pingedLanes|=h.suspendedLanes&N,ja===h&&(Ja&N)===N&&(ga===4||ga===3&&(Ja&130023424)===Ja&&500>mt()-ok?hh(h,0):ik|=N),ao(h,m)}function pO(h,m){m===0&&((h.mode&1)===0?m=1:(m=Qn,Qn<<=1,(Qn&130023424)===0&&(Qn=4194304)));var N=Wi();h=$i(h,m),h!==null&&(Or(h,m,N),ao(h,N))}function wQ(h){var m=h.memoizedState,N=0;m!==null&&(N=m.retryLane),pO(h,N)}function bQ(h,m){var N=0;switch(h.tag){case 13:var D=h.stateNode,q=h.memoizedState;q!==null&&(N=q.retryLane);break;case 19:D=h.stateNode;break;default:throw Error(r(314))}D!==null&&D.delete(m),pO(h,N)}var mO;mO=function(h,m,N){if(h!==null)if(h.memoizedProps!==m.pendingProps||ka.current)ae=!0;else{if((h.lanes&N)===0&&(m.flags&128)===0)return ae=!1,ZS(h,m,N);ae=(h.flags&131072)!==0}else ae=!1,bn&&(m.flags&1048576)!==0&&xw(m,_c,m.index);switch(m.lanes=0,m.tag){case 2:var D=m.type;nn(h,m),h=m.pendingProps;var q=pu(m,fa.current);Pl(m,N),q=Fd(null,m,D,h,q,N);var te=Rd();return m.flags|=1,typeof q=="object"&&q!==null&&typeof q.render=="function"&&q.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,Ta(D)?(te=!0,mu(m)):te=!1,m.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,oh(m),q.updater=Bd,m.stateNode=q,q._reactInternals=m,xg(m,D,h,N),m=_n(null,m,D,!0,te,N)):(m.tag=0,bn&&te&&Td(m),be(null,m,q,N),m=m.child),m;case 16:D=m.elementType;e:{switch(nn(h,m),h=m.pendingProps,q=D._init,D=q(D._payload),m.type=D,q=m.tag=SQ(D),h=ha(D,h),q){case 0:m=tr(null,m,D,h,N);break e;case 1:m=$n(null,m,D,h,N);break e;case 11:m=He(null,m,D,h,N);break e;case 14:m=lt(null,m,D,ha(D.type,h),N);break e}throw Error(r(306,D,""))}return m;case 0:return D=m.type,q=m.pendingProps,q=m.elementType===D?q:ha(D,q),tr(h,m,D,q,N);case 1:return D=m.type,q=m.pendingProps,q=m.elementType===D?q:ha(D,q),$n(h,m,D,q,N);case 3:e:{if(Xa(m),h===null)throw Error(r(387));D=m.pendingProps,te=m.memoizedState,q=te.element,cg(h,m),Ad(m,D,null,N);var de=m.memoizedState;if(D=de.element,te.isDehydrated)if(te={element:D,isDehydrated:!1,cache:de.cache,pendingSuspenseBoundaries:de.pendingSuspenseBoundaries,transitions:de.transitions},m.updateQueue.baseState=te,m.memoizedState=te,m.flags&256){q=ku(Error(r(423)),m),m=Yo(h,m,D,N,q);break e}else if(D!==q){q=ku(Error(r(424)),m),m=Yo(h,m,D,N,q);break e}else for(Qt=Wo(m.stateNode.containerInfo.firstChild),Mi=m,bn=!0,Li=null,N=ro(m,null,D,N),m.child=N;N;)N.flags=N.flags&-3|4096,N=N.sibling;else{if(wu(),D===q){m=Aa(h,m,N);break e}be(h,m,D,N)}m=m.child}return m;case 5:return jd(m),h===null&&Cd(m),D=m.type,q=m.pendingProps,te=h!==null?h.memoizedProps:null,de=q.children,Vm(D,q)?de=null:te!==null&&Vm(D,te)&&(m.flags|=32),Lr(h,m),be(h,m,de,N),m.child;case 6:return h===null&&Cd(m),null;case 13:return yt(h,m,N);case 4:return kc(m,m.stateNode.containerInfo),D=m.pendingProps,h===null?m.child=bu(m,null,D,N):be(h,m,D,N),m.child;case 11:return D=m.type,q=m.pendingProps,q=m.elementType===D?q:ha(D,q),He(h,m,D,q,N);case 7:return be(h,m,m.pendingProps,N),m.child;case 8:return be(h,m,m.pendingProps.children,N),m.child;case 12:return be(h,m,m.pendingProps.children,N),m.child;case 10:e:{if(D=m.type._context,q=m.pendingProps,te=m.memoizedProps,de=q.value,Nn(ah,D._currentValue),D._currentValue=de,te!==null)if(di(te.value,de)){if(te.children===q.children&&!ka.current){m=Aa(h,m,N);break e}}else for(te=m.child,te!==null&&(te.return=m);te!==null;){var Ae=te.dependencies;if(Ae!==null){de=te.child;for(var Le=Ae.firstContext;Le!==null;){if(Le.context===D){if(te.tag===1){Le=Ko(-1,N&-N),Le.tag=2;var it=te.updateQueue;if(it!==null){it=it.shared;var Rt=it.pending;Rt===null?Le.next=Le:(Le.next=Rt.next,Rt.next=Le),it.pending=Le}}te.lanes|=N,Le=te.alternate,Le!==null&&(Le.lanes|=N),lg(te.return,N,m),Ae.lanes|=N;break}Le=Le.next}}else if(te.tag===10)de=te.type===m.type?null:te.child;else if(te.tag===18){if(de=te.return,de===null)throw Error(r(341));de.lanes|=N,Ae=de.alternate,Ae!==null&&(Ae.lanes|=N),lg(de,N,m),de=te.sibling}else de=te.child;if(de!==null)de.return=te;else for(de=te;de!==null;){if(de===m){de=null;break}if(te=de.sibling,te!==null){te.return=de.return,de=te;break}de=de.return}te=de}be(h,m,q.children,N),m=m.child}return m;case 9:return q=m.type,D=m.pendingProps.children,Pl(m,N),q=qa(q),D=D(q),m.flags|=1,be(h,m,D,N),m.child;case 14:return D=m.type,q=ha(D,m.pendingProps),q=ha(D.type,q),lt(h,m,D,q,N);case 15:return $t(h,m,m.type,m.pendingProps,N);case 17:return D=m.type,q=m.pendingProps,q=m.elementType===D?q:ha(D,q),nn(h,m),m.tag=1,Ta(D)?(h=!0,mu(m)):h=!1,Pl(m,N),Nw(m,D,q),xg(m,D,q,N),_n(null,m,D,!0,h,N);case 19:return Us(h,m,N);case 22:return or(h,m,N)}throw Error(r(156,m.tag))};function yO(h,m){return Ce(h,m)}function _Q(h,m,N,D){this.tag=h,this.key=N,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qo(h,m,N,D){return new _Q(h,m,N,D)}function pk(h){return h=h.prototype,!(!h||!h.isReactComponent)}function SQ(h){if(typeof h=="function")return pk(h)?1:0;if(h!=null){if(h=h.$$typeof,h===G)return 11;if(h===Y)return 14}return 2}function Vd(h,m){var N=h.alternate;return N===null?(N=Qo(h.tag,m,h.key,h.mode),N.elementType=h.elementType,N.type=h.type,N.stateNode=h.stateNode,N.alternate=h,h.alternate=N):(N.pendingProps=m,N.type=h.type,N.flags=0,N.subtreeFlags=0,N.deletions=null),N.flags=h.flags&14680064,N.childLanes=h.childLanes,N.lanes=h.lanes,N.child=h.child,N.memoizedProps=h.memoizedProps,N.memoizedState=h.memoizedState,N.updateQueue=h.updateQueue,m=h.dependencies,N.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},N.sibling=h.sibling,N.index=h.index,N.ref=h.ref,N}function $w(h,m,N,D,q,te){var de=2;if(D=h,typeof h=="function")pk(h)&&(de=1);else if(typeof h=="string")de=5;else e:switch(h){case P:return ph(N.children,q,te,m);case j:de=8,q|=8;break;case O:return h=Qo(12,N,m,q|2),h.elementType=O,h.lanes=te,h;case K:return h=Qo(13,N,m,q),h.elementType=K,h.lanes=te,h;case re:return h=Qo(19,N,m,q),h.elementType=re,h.lanes=te,h;case B:return Uw(N,q,te,m);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case R:de=10;break e;case M:de=9;break e;case G:de=11;break e;case Y:de=14;break e;case ee:de=16,D=null;break e}throw Error(r(130,h==null?h:typeof h,""))}return m=Qo(de,N,m,q),m.elementType=h,m.type=D,m.lanes=te,m}function ph(h,m,N,D){return h=Qo(7,h,D,m),h.lanes=N,h}function Uw(h,m,N,D){return h=Qo(22,h,D,m),h.elementType=B,h.lanes=N,h.stateNode={isHidden:!1},h}function mk(h,m,N){return h=Qo(6,h,null,m),h.lanes=N,h}function yk(h,m,N){return m=Qo(4,h.children!==null?h.children:[],h.key,m),m.lanes=N,m.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},m}function kQ(h,m,N,D,q){this.tag=m,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nr(0),this.expirationTimes=nr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nr(0),this.identifierPrefix=D,this.onRecoverableError=q,this.mutableSourceEagerHydrationData=null}function xk(h,m,N,D,q,te,de,Ae,Le){return h=new kQ(h,m,N,Ae,Le),m===1?(m=1,te===!0&&(m|=8)):m=0,te=Qo(3,null,null,m),h.current=te,te.stateNode=h,te.memoizedState={element:D,isDehydrated:N,cache:null,transitions:null,pendingSuspenseBoundaries:null},oh(te),h}function TQ(h,m,N){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:D==null?null:""+D,children:h,containerInfo:m,implementation:N}}function xO(h){if(!h)return Ho;h=h._reactInternals;e:{if(ke(h)!==h||h.tag!==1)throw Error(r(170));var m=h;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(Ta(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(r(171))}if(h.tag===1){var N=h.type;if(Ta(N))return tg(h,N,m)}return m}function vO(h,m,N,D,q,te,de,Ae,Le){return h=xk(N,D,!0,h,q,te,de,Ae,Le),h.context=xO(null),N=h.current,D=Wi(),q=Hd(N),te=Ko(D,q),te.callback=m??null,Xo(N,te,q),h.current.lanes=q,Or(h,q,D),ao(h,D),h}function Ww(h,m,N,D){var q=m.current,te=Wi(),de=Hd(q);return N=xO(N),m.context===null?m.context=N:m.pendingContext=N,m=Ko(te,de),m.payload={element:h},D=D===void 0?null:D,D!==null&&(m.callback=D),h=Xo(q,m,de),h!==null&&(Ml(h,q,de,te),ug(h,q,de)),de}function zw(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return h.child.stateNode;default:return h.child.stateNode}}function wO(h,m){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var N=h.retryLane;h.retryLane=N!==0&&N<m?N:m}}function vk(h,m){wO(h,m),(h=h.alternate)&&wO(h,m)}function CQ(){return null}var bO=typeof reportError=="function"?reportError:function(h){console.error(h)};function wk(h){this._internalRoot=h}Hw.prototype.render=wk.prototype.render=function(h){var m=this._internalRoot;if(m===null)throw Error(r(409));Ww(h,m,null,null)},Hw.prototype.unmount=wk.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var m=h.containerInfo;fh(function(){Ww(null,h,null,null)}),m[zo]=null}};function Hw(h){this._internalRoot=h}Hw.prototype.unstable_scheduleHydration=function(h){if(h){var m=la();h={blockedOn:null,target:h,priority:m};for(var N=0;N<Uo.length&&m!==0&&m<Uo[N].priority;N++);Uo.splice(N,0,h),N===0&&j0(h)}};function bk(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function Gw(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function _O(){}function EQ(h,m,N,D,q){if(q){if(typeof D=="function"){var te=D;D=function(){var it=zw(de);te.call(it)}}var de=vO(m,D,h,0,null,!1,!1,"",_O);return h._reactRootContainer=de,h[zo]=de.current,uu(h.nodeType===8?h.parentNode:h),fh(),de}for(;q=h.lastChild;)h.removeChild(q);if(typeof D=="function"){var Ae=D;D=function(){var it=zw(Le);Ae.call(it)}}var Le=xk(h,0,!1,null,null,!1,!1,"",_O);return h._reactRootContainer=Le,h[zo]=Le.current,uu(h.nodeType===8?h.parentNode:h),fh(function(){Ww(m,Le,N,D)}),Le}function Vw(h,m,N,D,q){var te=N._reactRootContainer;if(te){var de=te;if(typeof q=="function"){var Ae=q;q=function(){var Le=zw(de);Ae.call(Le)}}Ww(m,de,h,q)}else de=EQ(N,m,h,q,D);return zw(de)}ur=function(h){switch(h.tag){case 3:var m=h.stateNode;if(m.current.memoizedState.isDehydrated){var N=Ye(m.pendingLanes);N!==0&&(Ut(m,N|1),ao(m,mt()),(dn&6)===0&&(_g=mt()+500,wc()))}break;case 13:fh(function(){var D=$i(h,1);if(D!==null){var q=Wi();Ml(D,h,1,q)}}),vk(h,1)}},Fr=function(h){if(h.tag===13){var m=$i(h,134217728);if(m!==null){var N=Wi();Ml(m,h,134217728,N)}vk(h,134217728)}},In=function(h){if(h.tag===13){var m=Hd(h),N=$i(h,m);if(N!==null){var D=Wi();Ml(N,h,m,D)}vk(h,m)}},la=function(){return It},ic=function(h,m){var N=It;try{return It=h,m()}finally{It=N}},ge=function(h,m,N){switch(m){case"input":if(ze(h,N),m=N.name,N.type==="radio"&&m!=null){for(N=h;N.parentNode;)N=N.parentNode;for(N=N.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<N.length;m++){var D=N[m];if(D!==h&&D.form===h.form){var q=Js(D);if(!q)throw Error(r(90));ie(D),ze(D,q)}}}break;case"textarea":ut(h,N);break;case"select":m=N.value,m!=null&&Fe(h,!!N.multiple,m,!1)}},Pt=fk,Ue=fh;var NQ={usingClientEntryPoint:!1,Events:[th,Ls,Js,Xe,Ct,fk]},fy={findFiberByHostInstance:xc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AQ={bundleType:fy.bundleType,version:fy.version,rendererPackageName:fy.rendererPackageName,rendererConfig:fy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=oe(h),h===null?null:h.stateNode},findFiberByHostInstance:fy.findFiberByHostInstance||CQ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qw.isDisabled&&qw.supportsFiber)try{wn=qw.inject(AQ),Xr=qw}catch{}}return io.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NQ,io.createPortal=function(h,m){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bk(m))throw Error(r(200));return TQ(h,m,null,N)},io.createRoot=function(h,m){if(!bk(h))throw Error(r(299));var N=!1,D="",q=bO;return m!=null&&(m.unstable_strictMode===!0&&(N=!0),m.identifierPrefix!==void 0&&(D=m.identifierPrefix),m.onRecoverableError!==void 0&&(q=m.onRecoverableError)),m=xk(h,1,!1,null,null,N,!1,D,q),h[zo]=m.current,uu(h.nodeType===8?h.parentNode:h),new wk(m)},io.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var m=h._reactInternals;if(m===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=oe(m),h=h===null?null:h.stateNode,h},io.flushSync=function(h){return fh(h)},io.hydrate=function(h,m,N){if(!Gw(m))throw Error(r(200));return Vw(null,h,m,!0,N)},io.hydrateRoot=function(h,m,N){if(!bk(h))throw Error(r(405));var D=N!=null&&N.hydratedSources||null,q=!1,te="",de=bO;if(N!=null&&(N.unstable_strictMode===!0&&(q=!0),N.identifierPrefix!==void 0&&(te=N.identifierPrefix),N.onRecoverableError!==void 0&&(de=N.onRecoverableError)),m=vO(m,null,h,1,N??null,q,!1,te,de),h[zo]=m.current,uu(h),D)for(h=0;h<D.length;h++)N=D[h],q=N._getVersion,q=q(N._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[N,q]:m.mutableSourceEagerHydrationData.push(N,q);return new Hw(m)},io.render=function(h,m,N){if(!Gw(m))throw Error(r(200));return Vw(null,h,m,!1,N)},io.unmountComponentAtNode=function(h){if(!Gw(h))throw Error(r(40));return h._reactRootContainer?(fh(function(){Vw(null,null,h,!1,function(){h._reactRootContainer=null,h[zo]=null})}),!0):!1},io.unstable_batchedUpdates=fk,io.unstable_renderSubtreeIntoContainer=function(h,m,N,D){if(!Gw(N))throw Error(r(200));if(h==null||h._reactInternals===void 0)throw Error(r(38));return Vw(h,m,N,!1,D)},io.version="18.3.1-next-f1338f8080-20240426",io}var jO;function mW(){if(jO)return kk.exports;jO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),kk.exports=MQ(),kk.exports}var PO;function LQ(){if(PO)return Kw;PO=1;var e=mW();return Kw.createRoot=e.createRoot,Kw.hydrateRoot=e.hydrateRoot,Kw}var BQ=LQ();const $Q=kn(BQ);var OO=mW();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jx(){return Jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jx.apply(this,arguments)}var rf;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(rf||(rf={}));const FO="popstate";function UQ(e){e===void 0&&(e={});function t(n,s){let{pathname:a,search:i,hash:o}=n.location;return I4("",{pathname:a,search:i,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:xW(s)}return zQ(t,r,null,e)}function ia(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function yW(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function WQ(){return Math.random().toString(36).substr(2,8)}function RO(e,t){return{usr:e.state,key:e.key,idx:t}}function I4(e,t,r,n){return r===void 0&&(r=null),Jx({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Xp(t):t,{state:r,key:t&&t.key||n||WQ()})}function xW(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Xp(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function zQ(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,i=s.history,o=rf.Pop,l=null,u=d();u==null&&(u=0,i.replaceState(Jx({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function f(){o=rf.Pop;let v=d(),T=v==null?null:v-u;u=v,l&&l({action:o,location:y.location,delta:T})}function g(v,T){o=rf.Push;let _=I4(y.location,v,T);u=d()+1;let b=RO(_,u),E=y.createHref(_);try{i.pushState(b,"",E)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(E)}a&&l&&l({action:o,location:y.location,delta:1})}function p(v,T){o=rf.Replace;let _=I4(y.location,v,T);u=d();let b=RO(_,u),E=y.createHref(_);i.replaceState(b,"",E),a&&l&&l({action:o,location:y.location,delta:0})}function x(v){let T=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof v=="string"?v:xW(v);return _=_.replace(/ $/,"%20"),ia(T,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,T)}let y={get action(){return o},get location(){return e(s,i)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(FO,f),l=v,()=>{s.removeEventListener(FO,f),l=null}},createHref(v){return t(s,v)},createURL:x,encodeLocation(v){let T=x(v);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:g,replace:p,go(v){return i.go(v)}};return y}var DO;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(DO||(DO={}));function HQ(e,t,r){return r===void 0&&(r="/"),GQ(e,t,r)}function GQ(e,t,r,n){let s=typeof t=="string"?Xp(t):t,a=bW(s.pathname||"/",r);if(a==null)return null;let i=vW(e);VQ(i);let o=null;for(let l=0;o==null&&l<i.length;++l){let u=sZ(a);o=tZ(i[l],u)}return o}function vW(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,i,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};l.relativePath.startsWith("/")&&(ia(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=Rh([n,l.relativePath]),d=r.concat(l);a.children&&a.children.length>0&&(ia(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),vW(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:ZQ(u,a.index),routesMeta:d})};return e.forEach((a,i)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))s(a,i);else for(let l of wW(a.path))s(a,i,l)}),t}function wW(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let i=wW(n.join("/")),o=[];return o.push(...i.map(l=>l===""?a:[a,l].join("/"))),s&&o.push(...i),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function VQ(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:eZ(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const qQ=/^:[\w-]+$/,KQ=3,XQ=2,YQ=1,JQ=10,QQ=-2,IO=e=>e==="*";function ZQ(e,t){let r=e.split("/"),n=r.length;return r.some(IO)&&(n+=QQ),t&&(n+=XQ),r.filter(s=>!IO(s)).reduce((s,a)=>s+(qQ.test(a)?KQ:a===""?YQ:JQ),n)}function eZ(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function tZ(e,t,r){let{routesMeta:n}=e,s={},a="/",i=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,d=a==="/"?t:t.slice(a.length)||"/",f=rZ({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),g=l.route;if(!f)return null;Object.assign(s,f.params),i.push({params:s,pathname:Rh([a,f.pathname]),pathnameBase:lZ(Rh([a,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(a=Rh([a,f.pathnameBase]))}return i}function rZ(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=nZ(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:g,isOptional:p}=d;if(g==="*"){let y=o[f]||"";i=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const x=o[f];return p&&!x?u[g]=void 0:u[g]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:e}}function nZ(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),yW(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function sZ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return yW(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function bW(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function aZ(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Xp(e):e;return{pathname:r?r.startsWith("/")?r:iZ(r,t):t,search:cZ(n),hash:uZ(s)}}function iZ(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Ek(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oZ(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function _W(e,t){let r=oZ(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function SW(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Xp(e):(s=Jx({},e),ia(!s.pathname||!s.pathname.includes("?"),Ek("?","pathname","search",s)),ia(!s.pathname||!s.pathname.includes("#"),Ek("#","pathname","hash",s)),ia(!s.search||!s.search.includes("#"),Ek("#","search","hash",s)));let a=e===""||s.pathname==="",i=a?"/":s.pathname,o;if(i==null)o=r;else{let f=t.length-1;if(!n&&i.startsWith("..")){let g=i.split("/");for(;g[0]==="..";)g.shift(),f-=1;s.pathname=g.join("/")}o=f>=0?t[f]:"/"}let l=aZ(s,o),u=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Rh=e=>e.join("/").replace(/\/\/+/g,"/"),lZ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),cZ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,uZ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function dZ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const kW=["post","put","patch","delete"];new Set(kW);const fZ=["get",...kW];new Set(fZ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qx(){return Qx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qx.apply(this,arguments)}const wj=C.createContext(null),hZ=C.createContext(null),u1=C.createContext(null),j2=C.createContext(null),Cf=C.createContext({outlet:null,matches:[],isDataRoute:!1}),TW=C.createContext(null);function d1(){return C.useContext(j2)!=null}function P2(){return d1()||ia(!1),C.useContext(j2).location}function CW(e){C.useContext(u1).static||C.useLayoutEffect(e)}function yo(){let{isDataRoute:e}=C.useContext(Cf);return e?CZ():gZ()}function gZ(){d1()||ia(!1);let e=C.useContext(wj),{basename:t,future:r,navigator:n}=C.useContext(u1),{matches:s}=C.useContext(Cf),{pathname:a}=P2(),i=JSON.stringify(_W(s,r.v7_relativeSplatPath)),o=C.useRef(!1);return CW(()=>{o.current=!0}),C.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=SW(u,JSON.parse(i),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Rh([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,i,a,e])}function O2(){let{matches:e}=C.useContext(Cf),t=e[e.length-1];return t?t.params:{}}function pZ(e,t){return mZ(e,t)}function mZ(e,t,r,n){d1()||ia(!1);let{navigator:s}=C.useContext(u1),{matches:a}=C.useContext(Cf),i=a[a.length-1],o=i?i.params:{};i&&i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let u=P2(),d;if(t){var f;let v=typeof t=="string"?Xp(t):t;l==="/"||(f=v.pathname)!=null&&f.startsWith(l)||ia(!1),d=v}else d=u;let g=d.pathname||"/",p=g;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+g.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=HQ(e,{pathname:p}),y=bZ(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:Rh([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Rh([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,r,n);return t&&y?C.createElement(j2.Provider,{value:{location:Qx({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:rf.Pop}},y):y}function yZ(){let e=TZ(),t=dZ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),r?C.createElement("pre",{style:s},r):null,null)}const xZ=C.createElement(yZ,null);class vZ extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?C.createElement(Cf.Provider,{value:this.props.routeContext},C.createElement(TW.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wZ(e){let{routeContext:t,match:r,children:n}=e,s=C.useContext(wj);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),C.createElement(Cf.Provider,{value:t},n)}function bZ(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=(s=r)==null?void 0:s.errors;if(o!=null){let d=i.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);d>=0||ia(!1),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:g,errors:p}=r,x=f.route.loader&&g[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||x){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,f,g)=>{let p,x=!1,y=null,v=null;r&&(p=o&&f.route.id?o[f.route.id]:void 0,y=f.route.errorElement||xZ,l&&(u<0&&g===0?(EZ("route-fallback"),x=!0,v=null):u===g&&(x=!0,v=f.route.hydrateFallbackElement||null)));let T=t.concat(i.slice(0,g+1)),_=()=>{let b;return p?b=y:x?b=v:f.route.Component?b=C.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,C.createElement(wZ,{match:f,routeContext:{outlet:d,matches:T,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?C.createElement(vZ,{location:r.location,revalidation:r.revalidation,component:y,error:p,children:_(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):_()},null)}var EW=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(EW||{}),NW=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(NW||{});function _Z(e){let t=C.useContext(wj);return t||ia(!1),t}function SZ(e){let t=C.useContext(hZ);return t||ia(!1),t}function kZ(e){let t=C.useContext(Cf);return t||ia(!1),t}function AW(e){let t=kZ(),r=t.matches[t.matches.length-1];return r.route.id||ia(!1),r.route.id}function TZ(){var e;let t=C.useContext(TW),r=SZ(),n=AW();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function CZ(){let{router:e}=_Z(EW.UseNavigateStable),t=AW(NW.UseNavigateStable),r=C.useRef(!1);return CW(()=>{r.current=!0}),C.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Qx({fromRouteId:t},a)))},[e,t])}const MO={};function EZ(e,t,r){MO[e]||(MO[e]=!0)}function NZ(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function pp(e){let{to:t,replace:r,state:n,relative:s}=e;d1()||ia(!1);let{future:a,static:i}=C.useContext(u1),{matches:o}=C.useContext(Cf),{pathname:l}=P2(),u=yo(),d=SW(t,_W(o,a.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(d);return C.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function As(e){ia(!1)}function AZ(e){let{basename:t="/",children:r=null,location:n,navigationType:s=rf.Pop,navigator:a,static:i=!1,future:o}=e;d1()&&ia(!1);let l=t.replace(/^\/*/,"/"),u=C.useMemo(()=>({basename:l,navigator:a,static:i,future:Qx({v7_relativeSplatPath:!1},o)}),[l,o,a,i]);typeof n=="string"&&(n=Xp(n));let{pathname:d="/",search:f="",hash:g="",state:p=null,key:x="default"}=n,y=C.useMemo(()=>{let v=bW(d,l);return v==null?null:{location:{pathname:v,search:f,hash:g,state:p,key:x},navigationType:s}},[l,d,f,g,p,x,s]);return y==null?null:C.createElement(u1.Provider,{value:u},C.createElement(j2.Provider,{children:r,value:y}))}function bj(e){let{children:t,location:r}=e;return pZ(M4(t),r)}new Promise(()=>{});function M4(e,t){t===void 0&&(t=[]);let r=[];return C.Children.forEach(e,(n,s)=>{if(!C.isValidElement(n))return;let a=[...t,s];if(n.type===C.Fragment){r.push.apply(r,M4(n.props.children,a));return}n.type!==As&&ia(!1),!n.props.index||!n.props.children||ia(!1);let i={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=M4(n.props.children,a)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const jZ="6";try{window.__reactRouterVersion=jZ}catch{}const PZ="startTransition",LO=DQ[PZ];function OZ(e){let{basename:t,children:r,future:n,window:s}=e,a=C.useRef();a.current==null&&(a.current=UQ({window:s,v5Compat:!0}));let i=a.current,[o,l]=C.useState({action:i.action,location:i.location}),{v7_startTransition:u}=n||{},d=C.useCallback(f=>{u&&LO?LO(()=>l(f)):l(f)},[l,u]);return C.useLayoutEffect(()=>i.listen(d),[i,d]),C.useEffect(()=>NZ(n),[n]),C.createElement(AZ,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}var BO;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(BO||(BO={}));var $O;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})($O||($O={}));const Os={student_subjects:1800*1e3,student_active_tests:600*1e3,student_results_table:600*1e3,teacher_subjects:900*1e3,teacher_classes:900*1e3,teacher_tests:600*1e3,teacher_results_table:600*1e3,admin_users:1200*1e3,admin_teachers:1200*1e3,admin_subjects:1800*1e3,admin_academic_years:3600*1e3,admin_tests:900*1e3,admin_results_table:null,admin_teacher_id:3600*1e3,all_tests:1200*1e3,subjects_dropdown:1800*1e3,grades_classes:3600*1e3,test_progress:120*1e3,anti_cheating:120*1e3,word_matching_test:600*1e3,speaking_test_data:3600*1e3},ms=e=>{try{const t=localStorage.getItem(e);if(!t)return console.log(" Cache: No data found for key:",e),null;const{data:r,timestamp:n,ttl:s}=JSON.parse(t),a=Date.now()-n;return a>s?(console.log(" Cache: Data expired for key:",e,"age:",a,"ttl:",s),localStorage.removeItem(e),null):(console.log(" Cache: Data found for key:",e,"age:",a,"ttl:",s),r)}catch(t){return console.log(" Cache: Corrupted data for key:",e,t),localStorage.removeItem(e),null}},ys=(e,t,r)=>{try{console.log(" Cache: Setting data for key:",e,"ttl:",r),localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now(),ttl:r})),console.log(" Cache: Data cached successfully for key:",e)}catch{console.log(" Cache: Storage full, cleaning old data for key:",e),jW();try{localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now(),ttl:r})),console.log(" Cache: Data cached after cleanup for key:",e)}catch{console.warn("Storage full, cannot cache data")}}},jW=()=>{const e=Date.now(),t=Object.keys(localStorage);t.forEach(s=>{try{const a=localStorage.getItem(s);if(a){const{timestamp:i,ttl:o}=JSON.parse(a);e-i>o&&localStorage.removeItem(s)}}catch{localStorage.removeItem(s)}});const r=e-10080*60*1e3;t.forEach(s=>{try{const a=localStorage.getItem(s);if(a){const{timestamp:i}=JSON.parse(a);i<r&&localStorage.removeItem(s)}}catch{localStorage.removeItem(s)}});const n=Object.keys(localStorage);if(n.length>0){const s=n.map(i=>{try{const o=localStorage.getItem(i);if(o){const{timestamp:l}=JSON.parse(o);return{key:i,timestamp:l}}}catch{return{key:i,timestamp:0}}return{key:i,timestamp:0}}),a=Math.ceil(s.length*.25);s.sort((i,o)=>i.timestamp-o.timestamp).slice(0,a).forEach(({key:i})=>localStorage.removeItem(i))}},_j=e=>{Object.keys(localStorage).forEach(r=>{r.includes(e)&&localStorage.removeItem(r)})},Yp=(e,t,r)=>{const n=`test_progress_${e}_${t}_${r}`,s=`anti_cheating_${e}_${t}_${r}`;if(localStorage.removeItem(n),localStorage.removeItem(s),t==="speaking_test_data"){const a=`speaking_test_data_${e}_${r}`;localStorage.removeItem(a),console.log(`Cleared speaking test data cache for ${r}`)}console.log(`Cleared test data for ${t}_${r}`)},Ug=Object.freeze(Object.defineProperty({__proto__:null,CACHE_TTL:Os,cleanupOldData:jW,clearTestData:Yp,clearUserData:_j,getCachedData:ms,setCachedData:ys},Symbol.toStringTag,{value:"Module"})),PW=C.createContext(),OW=({children:e})=>{const[t,r]=C.useState(null),[n,s]=C.useState(null),[a,i]=C.useState(localStorage.getItem("token")),[o,l]=C.useState(!1),[u,d]=C.useState(!0),[f,g]=C.useState(null);C.useEffect(()=>{console.log("[AUTH] Initializing application session..."),v()},[]),C.useEffect(()=>{if(o&&a){console.log("[AUTH] Setting up proactive token refresh...");let V=!1;const L=setInterval(async()=>{if(o&&a&&!V){V=!0;try{const H=a||localStorage.getItem("auth_token");if(H&&p(H))console.log("[AUTH] Token expired, attempting refresh..."),await x()||console.log("[AUTH] Proactive refresh failed, but user remains logged in");else if(H)try{const Q=JSON.parse(atob(H.split(".")[1])).exp*1e3,ne=Date.now(),Z=Q-ne;Z<300*1e3&&Z>0&&(console.log(`[AUTH] Token expires in ${Math.round(Z/1e3)} seconds, refreshing...`),await x()||console.log("[AUTH] Proactive refresh failed, but user remains logged in"))}catch(J){console.error("[AUTH] Error parsing token for expiration check:",J)}}catch(H){console.error("[AUTH] Error in proactive refresh:",H)}finally{V=!1}}},300*1e3);return()=>{console.log("[AUTH] Clearing proactive token refresh interval"),clearInterval(L)}}},[o,a]);const p=V=>{if(!V)return!0;try{if(typeof V!="string"||!V.includes("."))return console.warn("[AUTH] Invalid token format - not a JWT"),!0;const L=V.split(".");if(L.length!==3)return console.warn("[AUTH] Invalid token format - not 3 parts"),!0;const H=JSON.parse(atob(L[1])),J=Date.now()/1e3;return H.exp<=J}catch(L){if(console.error("[AUTH] Error decoding token:",L),console.warn("[AUTH] Token appears to be corrupted - clearing authentication"),localStorage.removeItem("auth_token"),localStorage.removeItem("accessToken"),localStorage.removeItem("refresh_token"),localStorage.removeItem("userData"),window.tokenManager)try{window.tokenManager.clearTokens()}catch(H){console.warn("[AUTH] Error clearing token manager:",H)}return!0}},x=async()=>{const V=localStorage.getItem("refresh_token");if(!V)return console.log("[AUTH] No refresh token found"),!1;try{const L=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:V})});if(L.ok){const H=await L.json();console.log("[AUTH] Token refresh successful"),localStorage.setItem("auth_token",H.accessToken),localStorage.setItem("refresh_token",H.refreshToken),localStorage.setItem("accessToken",H.accessToken);try{window.tokenManager&&(window.tokenManager.setToken(H.accessToken),H.refreshToken&&window.tokenManager.setRefreshToken(H.refreshToken))}catch{}return i(H.accessToken),!0}else return console.error("[AUTH] Token refresh failed:",L.status),!1}catch(L){return console.error("[AUTH] Token refresh error:",L),!1}},y=async(V,L={})=>{const H=a||localStorage.getItem("auth_token");if(!H)throw new Error("No authentication token found");const J={"Content-Type":"application/json",Authorization:`Bearer ${H}`,...L.headers},Q=await fetch(V,{...L,headers:J});if(Q.status===401)if(console.log("[AUTH] 401 error, attempting token refresh..."),await x()){const Z=localStorage.getItem("auth_token");return J.Authorization=`Bearer ${Z}`,fetch(V,{...L,headers:J})}else throw console.log("[AUTH] Token refresh failed, returning 401 response"),new Error("Authentication failed - please login again");return Q},v=async()=>{try{console.log("[AUTH] Starting session initialization..."),d(!0);const V=localStorage.getItem("auth_token")||localStorage.getItem("accessToken")||localStorage.getItem("token"),L=localStorage.getItem("user_data")||localStorage.getItem("userData"),H=L?JSON.parse(L).role:null;if(console.log("[AUTH] Found stored data:",{hasToken:!!V,hasUser:!!L,role:H}),V&&H&&L)try{const J=JSON.parse(L);if(p(V))if(console.log("[AUTH] Token expired, attempting refresh..."),await x()){console.log("[AUTH] Token refreshed successfully");const ne=localStorage.getItem("auth_token");i(ne)}else console.log("[AUTH] Token refresh failed, but continuing with existing token..."),i(V);else i(V);s(H),r(J);try{if(window.tokenManager){window.tokenManager.setToken(localStorage.getItem("auth_token"));const Q=localStorage.getItem("refresh_token");Q&&window.tokenManager.setRefreshToken(Q)}}catch{}l(!0),await b(J,H)}catch(J){console.error("[AUTH] Error parsing stored user data:",J),console.log("[AUTH] Invalid user data, but not forcing logout - continuing with empty state"),l(!1)}}catch(V){console.error("[AUTH] Session initialization error:",V),console.log("[AUTH] Initialization error, but not forcing logout - continuing with empty state"),l(!1)}finally{console.log("[AUTH] Session initialization complete"),d(!1)}},T=async V=>{try{if(d(!0),g(null),window.forceLogout||window.preventAutoLogin){console.log(" Login blocked - force logout in progress"),g("Please wait for the logout process to complete.");return}console.log("Attempting login with:",V.username);let L,H;V.username==="admin"?(L={ok:!0,json:()=>({success:!0,token:"test-token"})},H="admin"):(L=await authService.teacherLogin(V),H="teacher");const J=await L.json();await _(L,H,J)}catch(L){j(L)}finally{d(!1)}},_=async(V,L,H)=>{try{if(V.ok&&H.success&&H.token){i(H.token),s(L),r(H),l(!0),localStorage.setItem("auth_token",H.accessToken||H.token),localStorage.setItem("refresh_token",H.refreshToken),localStorage.setItem("user_data",JSON.stringify(H)),localStorage.setItem("accessToken",H.accessToken||H.token);try{const J=Date.now(),Q=10080*60*1e3,ne=[];for(let Z=0;Z<localStorage.length;Z++){const se=localStorage.key(Z);if(!(!se||!(se.startsWith("test_progress_")||se.startsWith("test_timer_")||se.startsWith("test_shuffle_order_")||se.startsWith("student_results_table_")||se.startsWith("anti_cheating_"))))try{const he=localStorage.getItem(se);if(!he){ne.push(se);continue}let Ee=null;if(he.startsWith("{")||he.startsWith("[")){const ie=JSON.parse(he),me=ie.timestamp||ie.lastSaved||ie.lastTickAt||ie.createdAt||ie.updatedAt||ie.startedAt||ie.started_at;me&&(Ee=new Date(me).getTime())}if(!Ee){const ie=`${se}__ts`,me=localStorage.getItem(ie);me&&(Ee=parseInt(me)||null)}if(!Ee)continue;J-Ee>Q&&ne.push(se)}catch{}}ne.forEach(Z=>{try{localStorage.removeItem(Z)}catch{}})}catch(J){console.warn("LocalStorage cleanup skipped:",J)}return await b(H,L),!0}else{const J=H.message||V.statusText||"Login failed";return j(new Error(J)),!1}}catch(J){return j(J),!1}},b=async(V,L)=>{try{switch(L){case"admin":console.log("Admin login successful, role:",V.role),console.log("Admin logged in:",V);break;case"teacher":console.log("Teacher login successful, role:",V.role),console.log("Teacher data:",V.teacher),await k(V),await P();break;case"student":console.log("Student login successful"),E(V);break;default:console.warn("Unknown user role:",L)}}catch(H){console.error("Post-login actions error:",H)}},E=V=>{r(V),console.log("Student info populated:",V)},k=async V=>{r(V),console.log("Teacher info populated:",V)},A=async()=>{try{console.log("Initializing teacher cabinet...")}catch(V){console.error("Error initializing teacher cabinet:",V)}},P=async()=>{try{console.log("Checking teacher subjects...")}catch(V){console.error("Error checking teacher subjects:",V)}},j=V=>{g(V.message||"Login failed"),O()},O=()=>{g(null),d(!1)},R=C.useCallback(()=>{M()},[]),M=()=>{r(null),s(null),i(null),l(!1),g(null);const V=t?.student_id||t?.teacher_id||t?.admin_id||t?.id;V&&_j(V),localStorage.removeItem("token"),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),localStorage.removeItem("user_role"),localStorage.removeItem("accessToken"),localStorage.removeItem("testProgress"),localStorage.removeItem("formData"),window.tokenManager&&window.tokenManager.clearAuth(),setTimeout(()=>{G()},100)},G=()=>{console.log("Interface reset after session clear - redirecting to login"),window.location.replace("/login")},K=()=>t?.id||null,re=()=>n==="admin"?t:null,Y=()=>n==="admin",ee=()=>Y()?t?.admin_id:null,B=()=>n==="teacher"?t?.username:null,z=()=>{console.log("Auth functions available:",{handleUnifiedLogin:typeof T,logout:typeof R,getCurrentTeacherId:typeof K,isAdmin:typeof Y,getCurrentAdmin:typeof re,getCurrentAdminId:typeof ee,getCurrentTeacherUsername:typeof B})};C.useEffect(()=>(window.logout=R,window.getCurrentTeacherId=K,window.getCurrentAdmin=re,window.isAdmin=Y,window.getCurrentAdminId=ee,window.getCurrentTeacherUsername=B,window.checkFunctionAvailability=z,()=>{delete window.logout,delete window.getCurrentTeacherId,delete window.getCurrentAdmin,delete window.isAdmin,delete window.getCurrentAdminId,delete window.getCurrentTeacherUsername,delete window.checkFunctionAvailability}),[R]);const I=C.useCallback(V=>{console.log("Setting user data from external auth:",V),r(V),s(V.role),i(V.token),l(!0),d(!1),g(null),localStorage.setItem("auth_token",V.token),localStorage.setItem("user_data",JSON.stringify(V)),localStorage.setItem("accessToken",V.token)},[]),W={user:t,role:n,token:a,isAuthenticated:o,isLoading:u,error:f,login:T,setUserData:I,logout:R,resetLoginForm:O,forceCompleteLogout:M,initializeApplicationSession:v,makeAuthenticatedRequest:y,populateStudentInfo:E,populateTeacherInfo:k,initializeTeacherCabinet:A,checkTeacherSubjects:P,getCurrentTeacherId:K,getCurrentAdmin:re,isAdmin:Y,getCurrentAdminId:ee,getCurrentTeacherUsername:B,handleLoginResponse:_,handlePostLoginActions:b,handleLoginFailure:j,resetInterfaceAfterSessionClear:G,checkFunctionAvailability:z};return c.jsx(PW.Provider,{value:W,children:e})},ls=()=>{const e=C.useContext(PW);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};class FZ{constructor(){this.baseURL="http://localhost:8888/.netlify/functions",this.timeout=1e4,this.retryCount=3,this.retryDelay=1e3}getHeaders(){const t=localStorage.getItem("token");return{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}}async sendRequest(t,r){try{return await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}catch(n){throw console.error(" Network error:",n),n}}async request(t,r={}){const n=`${this.baseURL}${t}`,s={method:"GET",headers:this.getHeaders(),timeout:this.timeout,...r};let a;for(let i=0;i<this.retryCount;i++)try{const o=new AbortController,l=setTimeout(()=>o.abort(),this.timeout),u=await fetch(n,{...s,signal:o.signal});if(clearTimeout(l),!u.ok)throw new Error(`HTTP error! status: ${u.status}`);return await u.json()}catch(o){if(a=o,o.name==="AbortError")throw new Error("Request timeout");i<this.retryCount-1&&(console.warn(`Request failed, retrying in ${this.retryDelay}ms... (attempt ${i+1}/${this.retryCount})`),await new Promise(l=>setTimeout(l,this.retryDelay*Math.pow(2,i))))}throw a}async get(t,r={}){return this.request(t,{...r,method:"GET"})}async post(t,r,n={}){return this.request(t,{...n,method:"POST",body:JSON.stringify(r)})}async put(t,r,n={}){return this.request(t,{...n,method:"PUT",body:JSON.stringify(r)})}async delete(t,r={}){return this.request(t,{...r,method:"DELETE"})}async patch(t,r,n={}){return this.request(t,{...n,method:"PATCH",body:JSON.stringify(r)})}async uploadFile(t,r,n={}){const s=new FormData;s.append("file",r);const a=`${this.baseURL}${t}`,i={method:"POST",headers:{...localStorage.getItem("token")&&{Authorization:`Bearer ${localStorage.getItem("token")}`}},body:s,...n};try{const o=await fetch(a,i);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(o){throw o}}async downloadFile(t,r,n={}){const s=`${this.baseURL}${t}`,a={method:"GET",headers:this.getHeaders(),...n};try{const i=await fetch(s,a);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const o=await i.blob(),l=window.URL.createObjectURL(o),u=document.createElement("a");u.href=l,u.download=r,document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(l)}catch(i){throw i}}ensureDebugOutput(){let t=document.getElementById("debug-output");return t||(t=document.createElement("div"),t.id="debug-output",t.className="fixed top-4 right-4 w-96 max-h-96 bg-white border border-gray-300 rounded-lg shadow-lg p-4 z-50 overflow-auto",t.innerHTML='<div class="text-sm font-mono text-gray-800">Debug Output</div>',document.body.appendChild(t)),t}async testDbConnection(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/test-db-connection")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Database Connection Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,message:"Database connection successful",data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Database Connection Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,message:"Database connection failed",error:t.message}}}async testStudentLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/student-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:"51706",password:"1"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Student Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Student Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testTeacherLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/teacher-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"Aleksandr_Petrov",password:"465"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Teacher Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Teacher Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testAdminLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/admin-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"admin",password:"admin123"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Admin Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Admin Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetTeacherSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-teacher-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Teacher Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Teacher Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetClassResults(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-class-results")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Class Results Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Class Results Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetStudentSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-student-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Student Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Student Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetStudentTestResults(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-student-test-results")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Student Test Results Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Student Test Results Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testEndpoints(){const t=["/debug/test-student-login","/debug/test-teacher-login","/debug/test-admin-login","/debug/test-get-subjects","/debug/test-get-teacher-subjects","/debug/test-get-class-results","/debug/test-get-student-subjects","/debug/test-get-student-test-results"],r={};for(const n of t)try{const s=await this.get(n);r[n]={success:!0,data:s}}catch(s){r[n]={success:!1,error:s.message}}return r}async debugFunction(t){const r=this.ensureDebugOutput();try{let n;switch(t){case"testDbConnection":n=await this.testDbConnection();break;case"testStudentLogin":n=await this.testStudentLogin();break;case"testTeacherLogin":n=await this.testTeacherLogin();break;case"testAdminLogin":n=await this.testAdminLogin();break;case"testGetSubjects":n=await this.testGetSubjects();break;case"testGetTeacherSubjects":n=await this.testGetTeacherSubjects();break;case"testGetClassResults":n=await this.testGetClassResults();break;case"testGetStudentSubjects":n=await this.testGetStudentSubjects();break;case"testGetStudentTestResults":n=await this.testGetStudentTestResults();break;default:throw new Error(`Unknown debug function: ${t}`)}return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Debug Function: ${t}</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),n}catch(n){throw r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Debug Function Error: ${t}</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${n.message}</pre>
        `),n}}showDebugFunctions(){const t=this.ensureDebugOutput(),r=`
      <div class="text-sm font-mono text-gray-800 mb-4">Debug Functions</div>
      <div class="grid grid-cols-2 gap-2 mb-4">
        <button onclick="apiClient.testDbConnection()" class="px-3 py-2 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 transition-colors">
          Test DB Connection
        </button>
        <button onclick="apiClient.testStudentLogin()" class="px-3 py-2 bg-green-500 text-white text-xs rounded hover:bg-green-600 transition-colors">
          Test Student Login
        </button>
        <button onclick="apiClient.testTeacherLogin()" class="px-3 py-2 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600 transition-colors">
          Test Teacher Login
        </button>
        <button onclick="apiClient.testAdminLogin()" class="px-3 py-2 bg-red-500 text-white text-xs rounded hover:bg-red-600 transition-colors">
          Test Admin Login
        </button>
        <button onclick="apiClient.testGetSubjects()" class="px-3 py-2 bg-purple-500 text-white text-xs rounded hover:bg-purple-600 transition-colors">
          Test Get Subjects
        </button>
        <button onclick="apiClient.testGetTeacherSubjects()" class="px-3 py-2 bg-indigo-500 text-white text-xs rounded hover:bg-indigo-600 transition-colors">
          Test Get Teacher Subjects
        </button>
        <button onclick="apiClient.testGetClassResults()" class="px-3 py-2 bg-pink-500 text-white text-xs rounded hover:bg-pink-600 transition-colors">
          Test Get Class Results
        </button>
        <button onclick="apiClient.testGetStudentSubjects()" class="px-3 py-2 bg-teal-500 text-white text-xs rounded hover:bg-teal-600 transition-colors">
          Test Get Student Subjects
        </button>
        <button onclick="apiClient.testGetStudentTestResults()" class="px-3 py-2 bg-orange-500 text-white text-xs rounded hover:bg-orange-600 transition-colors">
          Test Get Student Test Results
        </button>
        <button onclick="apiClient.testEndpoints()" class="px-3 py-2 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 transition-colors">
          Test All Endpoints
        </button>
      </div>
    `;t.innerHTML=r}}const Cs=new FZ,Sj=C.createContext({});function kj(e){const t=C.useRef(null);return t.current===null&&(t.current=e()),t.current}const Tj=typeof window<"u",FW=Tj?C.useLayoutEffect:C.useEffect,F2=C.createContext(null);function Cj(e,t){e.indexOf(t)===-1&&e.push(t)}function Ej(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const qu=(e,t,r)=>r>t?t:r<e?e:r;let Nj=()=>{};const Ku={},RW=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function DW(e){return typeof e=="object"&&e!==null}const IW=e=>/^0[^.\s]+$/u.test(e);function Aj(e){let t;return()=>(t===void 0&&(t=e()),t)}const gl=e=>e,RZ=(e,t)=>r=>t(e(r)),f1=(...e)=>e.reduce(RZ),Zx=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class jj{constructor(){this.subscriptions=[]}add(t){return Cj(this.subscriptions,t),()=>Ej(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let a=0;a<s;a++){const i=this.subscriptions[a];i&&i(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Uc=e=>e*1e3,Wc=e=>e/1e3;function MW(e,t){return t?e*(1e3/t):0}const LW=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,DZ=1e-7,IZ=12;function MZ(e,t,r,n,s){let a,i,o=0;do i=t+(r-t)/2,a=LW(i,n,s)-e,a>0?r=i:t=i;while(Math.abs(a)>DZ&&++o<IZ);return i}function h1(e,t,r,n){if(e===t&&r===n)return gl;const s=a=>MZ(a,0,1,e,r);return a=>a===0||a===1?a:LW(s(a),t,n)}const BW=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,$W=e=>t=>1-e(1-t),UW=h1(.33,1.53,.69,.99),Pj=$W(UW),WW=BW(Pj),zW=e=>(e*=2)<1?.5*Pj(e):.5*(2-Math.pow(2,-10*(e-1))),Oj=e=>1-Math.sin(Math.acos(e)),HW=$W(Oj),GW=BW(Oj),LZ=h1(.42,0,1,1),BZ=h1(0,0,.58,1),VW=h1(.42,0,.58,1),$Z=e=>Array.isArray(e)&&typeof e[0]!="number",qW=e=>Array.isArray(e)&&typeof e[0]=="number",UZ={linear:gl,easeIn:LZ,easeInOut:VW,easeOut:BZ,circIn:Oj,circInOut:GW,circOut:HW,backIn:Pj,backInOut:WW,backOut:UW,anticipate:zW},WZ=e=>typeof e=="string",UO=e=>{if(qW(e)){Nj(e.length===4);const[t,r,n,s]=e;return h1(t,r,n,s)}else if(WZ(e))return UZ[e];return e},Xw=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function zZ(e,t){let r=new Set,n=new Set,s=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){i.has(d)&&(u.schedule(d),e()),d(o)}const u={schedule:(d,f=!1,g=!1)=>{const x=g&&s?r:n;return f&&i.add(d),x.has(d)||x.add(d),d},cancel:d=>{n.delete(d),i.delete(d)},process:d=>{if(o=d,s){a=!0;return}s=!0,[r,n]=[n,r],r.forEach(l),r.clear(),s=!1,a&&(a=!1,u.process(d))}};return u}const HZ=40;function KW(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,i=Xw.reduce((b,E)=>(b[E]=zZ(a),b),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:d,update:f,preRender:g,render:p,postRender:x}=i,y=()=>{const b=Ku.useManualTiming?s.timestamp:performance.now();r=!1,Ku.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(b-s.timestamp,HZ),1)),s.timestamp=b,s.isProcessing=!0,o.process(s),l.process(s),u.process(s),d.process(s),f.process(s),g.process(s),p.process(s),x.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(y))},v=()=>{r=!0,n=!0,s.isProcessing||e(y)};return{schedule:Xw.reduce((b,E)=>{const k=i[E];return b[E]=(A,P=!1,j=!1)=>(r||v(),k.schedule(A,P,j)),b},{}),cancel:b=>{for(let E=0;E<Xw.length;E++)i[Xw[E]].cancel(b)},state:s,steps:i}}const{schedule:ds,cancel:yf,state:ei,steps:Nk}=KW(typeof requestAnimationFrame<"u"?requestAnimationFrame:gl,!0);let Ib;function GZ(){Ib=void 0}const uo={now:()=>(Ib===void 0&&uo.set(ei.isProcessing||Ku.useManualTiming?ei.timestamp:performance.now()),Ib),set:e=>{Ib=e,queueMicrotask(GZ)}},XW=e=>t=>typeof t=="string"&&t.startsWith(e),Fj=XW("--"),VZ=XW("var(--"),Rj=e=>VZ(e)?qZ.test(e.split("/*")[0].trim()):!1,qZ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Jp={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ev={...Jp,transform:e=>qu(0,1,e)},Yw={...Jp,default:1},Nx=e=>Math.round(e*1e5)/1e5,Dj=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function KZ(e){return e==null}const XZ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ij=(e,t)=>r=>!!(typeof r=="string"&&XZ.test(r)&&r.startsWith(e)||t&&!KZ(r)&&Object.prototype.hasOwnProperty.call(r,t)),YW=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,a,i,o]=n.match(Dj);return{[e]:parseFloat(s),[t]:parseFloat(a),[r]:parseFloat(i),alpha:o!==void 0?parseFloat(o):1}},YZ=e=>qu(0,255,e),Ak={...Jp,transform:e=>Math.round(YZ(e))},Ch={test:Ij("rgb","red"),parse:YW("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Ak.transform(e)+", "+Ak.transform(t)+", "+Ak.transform(r)+", "+Nx(ev.transform(n))+")"};function JZ(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const L4={test:Ij("#"),parse:JZ,transform:Ch.transform},g1=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Jd=g1("deg"),zc=g1("%"),Rr=g1("px"),QZ=g1("vh"),ZZ=g1("vw"),WO={...zc,parse:e=>zc.parse(e)/100,transform:e=>zc.transform(e*100)},Wg={test:Ij("hsl","hue"),parse:YW("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+zc.transform(Nx(t))+", "+zc.transform(Nx(r))+", "+Nx(ev.transform(n))+")"},sa={test:e=>Ch.test(e)||L4.test(e)||Wg.test(e),parse:e=>Ch.test(e)?Ch.parse(e):Wg.test(e)?Wg.parse(e):L4.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ch.transform(e):Wg.transform(e),getAnimatableNone:e=>{const t=sa.parse(e);return t.alpha=0,sa.transform(t)}},eee=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function tee(e){return isNaN(e)&&typeof e=="string"&&(e.match(Dj)?.length||0)+(e.match(eee)?.length||0)>0}const JW="number",QW="color",ree="var",nee="var(",zO="${}",see=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function tv(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let a=0;const o=t.replace(see,l=>(sa.test(l)?(n.color.push(a),s.push(QW),r.push(sa.parse(l))):l.startsWith(nee)?(n.var.push(a),s.push(ree),r.push(l)):(n.number.push(a),s.push(JW),r.push(parseFloat(l))),++a,zO)).split(zO);return{values:r,split:o,indexes:n,types:s}}function ZW(e){return tv(e).values}function ez(e){const{split:t,types:r}=tv(e),n=t.length;return s=>{let a="";for(let i=0;i<n;i++)if(a+=t[i],s[i]!==void 0){const o=r[i];o===JW?a+=Nx(s[i]):o===QW?a+=sa.transform(s[i]):a+=s[i]}return a}}const aee=e=>typeof e=="number"?0:sa.test(e)?sa.getAnimatableNone(e):e;function iee(e){const t=ZW(e);return ez(e)(t.map(aee))}const xf={test:tee,parse:ZW,createTransformer:ez,getAnimatableNone:iee};function jk(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function oee({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,a=0,i=0;if(!t)s=a=i=r;else{const o=r<.5?r*(1+t):r+t-r*t,l=2*r-o;s=jk(l,o,e+1/3),a=jk(l,o,e),i=jk(l,o,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(i*255),alpha:n}}function qb(e,t){return r=>r>0?t:e}const xs=(e,t,r)=>e+(t-e)*r,Pk=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},lee=[L4,Ch,Wg],cee=e=>lee.find(t=>t.test(e));function HO(e){const t=cee(e);if(!t)return!1;let r=t.parse(e);return t===Wg&&(r=oee(r)),r}const GO=(e,t)=>{const r=HO(e),n=HO(t);if(!r||!n)return qb(e,t);const s={...r};return a=>(s.red=Pk(r.red,n.red,a),s.green=Pk(r.green,n.green,a),s.blue=Pk(r.blue,n.blue,a),s.alpha=xs(r.alpha,n.alpha,a),Ch.transform(s))},B4=new Set(["none","hidden"]);function uee(e,t){return B4.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function dee(e,t){return r=>xs(e,t,r)}function Mj(e){return typeof e=="number"?dee:typeof e=="string"?Rj(e)?qb:sa.test(e)?GO:gee:Array.isArray(e)?tz:typeof e=="object"?sa.test(e)?GO:fee:qb}function tz(e,t){const r=[...e],n=r.length,s=e.map((a,i)=>Mj(a)(a,t[i]));return a=>{for(let i=0;i<n;i++)r[i]=s[i](a);return r}}function fee(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=Mj(e[s])(e[s],t[s]));return s=>{for(const a in n)r[a]=n[a](s);return r}}function hee(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],i=e.indexes[a][n[a]],o=e.values[i]??0;r[s]=o,n[a]++}return r}const gee=(e,t)=>{const r=xf.createTransformer(t),n=tv(e),s=tv(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?B4.has(e)&&!s.values.length||B4.has(t)&&!n.values.length?uee(e,t):f1(tz(hee(n,s),s.values),r):qb(e,t)};function rz(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?xs(e,t,r):Mj(e)(e,t)}const pee=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>ds.update(t,r),stop:()=>yf(t),now:()=>ei.isProcessing?ei.timestamp:uo.now()}},nz=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let a=0;a<s;a++)n+=Math.round(e(a/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Kb=2e4;function Lj(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<Kb;)t+=r,n=e.next(t);return t>=Kb?1/0:t}function mee(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(Lj(n),Kb);return{type:"keyframes",ease:a=>n.next(s*a).value/t,duration:Wc(s)}}const yee=5;function sz(e,t,r){const n=Math.max(t-yee,0);return MW(r-e(n),t-n)}const Es={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ok=.001;function xee({duration:e=Es.duration,bounce:t=Es.bounce,velocity:r=Es.velocity,mass:n=Es.mass}){let s,a,i=1-t;i=qu(Es.minDamping,Es.maxDamping,i),e=qu(Es.minDuration,Es.maxDuration,Wc(e)),i<1?(s=u=>{const d=u*i,f=d*e,g=d-r,p=$4(u,i),x=Math.exp(-f);return Ok-g/p*x},a=u=>{const f=u*i*e,g=f*r+r,p=Math.pow(i,2)*Math.pow(u,2)*e,x=Math.exp(-f),y=$4(Math.pow(u,2),i);return(-s(u)+Ok>0?-1:1)*((g-p)*x)/y}):(s=u=>{const d=Math.exp(-u*e),f=(u-r)*e+1;return-Ok+d*f},a=u=>{const d=Math.exp(-u*e),f=(r-u)*(e*e);return d*f});const o=5/e,l=wee(s,a,o);if(e=Uc(e),isNaN(l))return{stiffness:Es.stiffness,damping:Es.damping,duration:e};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:i*2*Math.sqrt(n*u),duration:e}}}const vee=12;function wee(e,t,r){let n=r;for(let s=1;s<vee;s++)n=n-e(n)/t(n);return n}function $4(e,t){return e*Math.sqrt(1-t*t)}const bee=["duration","bounce"],_ee=["stiffness","damping","mass"];function VO(e,t){return t.some(r=>e[r]!==void 0)}function See(e){let t={velocity:Es.velocity,stiffness:Es.stiffness,damping:Es.damping,mass:Es.mass,isResolvedFromDuration:!1,...e};if(!VO(e,_ee)&&VO(e,bee))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,a=2*qu(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Es.mass,stiffness:s,damping:a}}else{const r=xee(e);t={...t,...r,mass:Es.mass},t.isResolvedFromDuration=!0}return t}function Xb(e=Es.visualDuration,t=Es.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const a=r.keyframes[0],i=r.keyframes[r.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:d,duration:f,velocity:g,isResolvedFromDuration:p}=See({...r,velocity:-Wc(r.velocity||0)}),x=g||0,y=u/(2*Math.sqrt(l*d)),v=i-a,T=Wc(Math.sqrt(l/d)),_=Math.abs(v)<5;n||(n=_?Es.restSpeed.granular:Es.restSpeed.default),s||(s=_?Es.restDelta.granular:Es.restDelta.default);let b;if(y<1){const k=$4(T,y);b=A=>{const P=Math.exp(-y*T*A);return i-P*((x+y*T*v)/k*Math.sin(k*A)+v*Math.cos(k*A))}}else if(y===1)b=k=>i-Math.exp(-T*k)*(v+(x+T*v)*k);else{const k=T*Math.sqrt(y*y-1);b=A=>{const P=Math.exp(-y*T*A),j=Math.min(k*A,300);return i-P*((x+y*T*v)*Math.sinh(j)+k*v*Math.cosh(j))/k}}const E={calculatedDuration:p&&f||null,next:k=>{const A=b(k);if(p)o.done=k>=f;else{let P=k===0?x:0;y<1&&(P=k===0?Uc(x):sz(b,k,A));const j=Math.abs(P)<=n,O=Math.abs(i-A)<=s;o.done=j&&O}return o.value=o.done?i:A,o},toString:()=>{const k=Math.min(Lj(E),Kb),A=nz(P=>E.next(k*P).value,k,30);return k+"ms "+A},toTransition:()=>{}};return E}Xb.applyToOptions=e=>{const t=mee(e,100,Xb);return e.ease=t.ease,e.duration=Uc(t.duration),e.type="keyframes",e};function U4({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:o,max:l,restDelta:u=.5,restSpeed:d}){const f=e[0],g={done:!1,value:f},p=j=>o!==void 0&&j<o||l!==void 0&&j>l,x=j=>o===void 0?l:l===void 0||Math.abs(o-j)<Math.abs(l-j)?o:l;let y=r*t;const v=f+y,T=i===void 0?v:i(v);T!==v&&(y=T-f);const _=j=>-y*Math.exp(-j/n),b=j=>T+_(j),E=j=>{const O=_(j),R=b(j);g.done=Math.abs(O)<=u,g.value=g.done?T:R};let k,A;const P=j=>{p(g.value)&&(k=j,A=Xb({keyframes:[g.value,x(g.value)],velocity:sz(b,j,g.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return P(0),{calculatedDuration:null,next:j=>{let O=!1;return!A&&k===void 0&&(O=!0,E(j),P(j)),k!==void 0&&j>=k?A.next(j-k):(!O&&E(j),g)}}}function kee(e,t,r){const n=[],s=r||Ku.mix||rz,a=e.length-1;for(let i=0;i<a;i++){let o=s(e[i],e[i+1]);if(t){const l=Array.isArray(t)?t[i]||gl:t;o=f1(l,o)}n.push(o)}return n}function Tee(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const a=e.length;if(Nj(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=kee(t,n,s),l=o.length,u=d=>{if(i&&d<e[0])return t[0];let f=0;if(l>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const g=Zx(e[f],e[f+1],d);return o[f](g)};return r?d=>u(qu(e[0],e[a-1],d)):u}function Cee(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=Zx(0,t,n);e.push(xs(r,1,s))}}function Eee(e){const t=[0];return Cee(t,e.length-1),t}function Nee(e,t){return e.map(r=>r*t)}function Aee(e,t){return e.map(()=>t||VW).splice(0,e.length-1)}function Ax({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=$Z(n)?n.map(UO):UO(n),a={done:!1,value:t[0]},i=Nee(r&&r.length===t.length?r:Eee(t),e),o=Tee(i,t,{ease:Array.isArray(s)?s:Aee(t,s)});return{calculatedDuration:e,next:l=>(a.value=o(l),a.done=l>=e,a)}}const jee=e=>e!==null;function Bj(e,{repeat:t,repeatType:r="loop"},n,s=1){const a=e.filter(jee),o=s<0||t&&r!=="loop"&&t%2===1?0:a.length-1;return!o||n===void 0?a[o]:n}const Pee={decay:U4,inertia:U4,tween:Ax,keyframes:Ax,spring:Xb};function az(e){typeof e.type=="string"&&(e.type=Pee[e.type])}class $j{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const Oee=e=>e/100;class Uj extends $j{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==uo.now()&&this.tick(uo.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;az(t);const{type:r=Ax,repeat:n=0,repeatDelay:s=0,repeatType:a,velocity:i=0}=t;let{keyframes:o}=t;const l=r||Ax;l!==Ax&&typeof o[0]!="number"&&(this.mixKeyframes=f1(Oee,rz(o[0],o[1])),o=[0,100]);const u=l({...t,keyframes:o});a==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=Lj(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=u}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:a,mirroredGenerator:i,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:f,repeatType:g,repeatDelay:p,type:x,onUpdate:y,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const T=this.currentTime-u*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?T<0:T>s;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let b=this.currentTime,E=n;if(f){const j=Math.min(this.currentTime,s)/o;let O=Math.floor(j),R=j%1;!R&&j>=1&&(R=1),R===1&&O--,O=Math.min(O,f+1),!!(O%2)&&(g==="reverse"?(R=1-R,p&&(R-=p/o)):g==="mirror"&&(E=i)),b=qu(0,1,R)*o}const k=_?{done:!1,value:d[0]}:E.next(b);a&&(k.value=a(k.value));let{done:A}=k;!_&&l!==null&&(A=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return P&&x!==U4&&(k.value=Bj(d,this.options,v,this.speed)),y&&y(k.value),P&&this.finish(),k}then(t,r){return this.finished.then(t,r)}get duration(){return Wc(this.calculatedDuration)}get time(){return Wc(this.currentTime)}set time(t){t=Uc(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(uo.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Wc(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=pee,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(uo.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function Fee(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Eh=e=>e*180/Math.PI,W4=e=>{const t=Eh(Math.atan2(e[1],e[0]));return z4(t)},Ree={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:W4,rotateZ:W4,skewX:e=>Eh(Math.atan(e[1])),skewY:e=>Eh(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},z4=e=>(e=e%360,e<0&&(e+=360),e),qO=W4,KO=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),XO=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Dee={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:KO,scaleY:XO,scale:e=>(KO(e)+XO(e))/2,rotateX:e=>z4(Eh(Math.atan2(e[6],e[5]))),rotateY:e=>z4(Eh(Math.atan2(-e[2],e[0]))),rotateZ:qO,rotate:qO,skewX:e=>Eh(Math.atan(e[4])),skewY:e=>Eh(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function H4(e){return e.includes("scale")?1:0}function G4(e,t){if(!e||e==="none")return H4(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=Dee,s=r;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Ree,s=o}if(!s)return H4(t);const a=n[t],i=s[1].split(",").map(Mee);return typeof a=="function"?a(i):i[a]}const Iee=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return G4(r,t)};function Mee(e){return parseFloat(e.trim())}const Qp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zp=new Set(Qp),YO=e=>e===Jp||e===Rr,Lee=new Set(["x","y","z"]),Bee=Qp.filter(e=>!Lee.has(e));function $ee(e){const t=[];return Bee.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const Dh={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>G4(t,"x"),y:(e,{transform:t})=>G4(t,"y")};Dh.translateX=Dh.x;Dh.translateY=Dh.y;const Ih=new Set;let V4=!1,q4=!1,K4=!1;function iz(){if(q4){const e=Array.from(Ih).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=$ee(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([a,i])=>{n.getValue(a)?.set(i)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}q4=!1,V4=!1,Ih.forEach(e=>e.complete(K4)),Ih.clear()}function oz(){Ih.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(q4=!0)})}function Uee(){K4=!0,oz(),iz(),K4=!1}class Wj{constructor(t,r,n,s,a,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=a,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(Ih.add(this),V4||(V4=!0,ds.read(oz),ds.resolveKeyframes(iz))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const a=s?.get(),i=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&r){const o=n.readValue(r,i);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=i),s&&a===void 0&&s.set(t[0])}Fee(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Ih.delete(this)}cancel(){this.state==="scheduled"&&(Ih.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Wee=e=>e.startsWith("--");function zee(e,t,r){Wee(t)?e.style.setProperty(t,r):e.style[t]=r}const Hee=Aj(()=>window.ScrollTimeline!==void 0),Gee={};function Vee(e,t){const r=Aj(e);return()=>Gee[t]??r()}const lz=Vee(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),vx=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,JO={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:vx([0,.65,.55,1]),circOut:vx([.55,0,1,.45]),backIn:vx([.31,.01,.66,-.59]),backOut:vx([.33,1.53,.69,.99])};function cz(e,t){if(e)return typeof e=="function"?lz()?nz(e,t):"ease-out":qW(e)?vx(e):Array.isArray(e)?e.map(r=>cz(r,t)||JO.easeOut):JO[e]}function qee(e,t,r,{delay:n=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:l}={},u=void 0){const d={[t]:r};l&&(d.offset=l);const f=cz(o,s);Array.isArray(f)&&(d.easing=f);const g={delay:n,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:i==="reverse"?"alternate":"normal"};return u&&(g.pseudoElement=u),e.animate(d,g)}function uz(e){return typeof e=="function"&&"applyToOptions"in e}function Kee({type:e,...t}){return uz(e)&&lz()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Xee extends $j{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:a,allowFlatten:i=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!a,this.allowFlatten=i,this.options=t,Nj(typeof t.type!="string");const u=Kee(t);this.animation=qee(r,n,s,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=Bj(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):zee(r,n,d),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Wc(Number(t))}get time(){return Wc(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Uc(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&Hee()?(this.animation.timeline=t,gl):r(this)}}const dz={anticipate:zW,backInOut:WW,circInOut:GW};function Yee(e){return e in dz}function Jee(e){typeof e.ease=="string"&&Yee(e.ease)&&(e.ease=dz[e.ease])}const QO=10;class Qee extends Xee{constructor(t){Jee(t),az(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:a,...i}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const o=new Uj({...i,autoplay:!1}),l=Uc(this.finishedTime??this.time);r.setWithVelocity(o.sample(l-QO).value,o.sample(l).value,QO),o.stop()}}const ZO=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(xf.test(e)||e==="0")&&!e.startsWith("url("));function Zee(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function ete(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],i=ZO(s,t),o=ZO(a,t);return!i||!o?!1:Zee(e)||(r==="spring"||uz(r))&&n}function X4(e){e.duration=0,e.type}const tte=new Set(["opacity","clipPath","filter","transform"]),rte=Aj(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function nte(e){const{motionValue:t,name:r,repeatDelay:n,repeatType:s,damping:a,type:i}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return rte()&&r&&tte.has(r)&&(r!=="transform"||!u)&&!l&&!n&&s!=="mirror"&&a!==0&&i!=="inertia"}const ste=40;class ate extends $j{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:i="loop",keyframes:o,name:l,motionValue:u,element:d,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=uo.now();const g={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:a,repeatType:i,name:l,motionValue:u,element:d,...f},p=d?.KeyframeResolver||Wj;this.keyframeResolver=new p(o,(x,y,v)=>this.onKeyframesResolved(x,y,g,!v),l,u,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:a,type:i,velocity:o,delay:l,isHandoff:u,onUpdate:d}=n;this.resolvedAt=uo.now(),ete(t,a,i,o)||((Ku.instantAnimations||!l)&&d?.(Bj(t,n,r)),t[0]=t[t.length-1],X4(n),n.repeat=0);const g={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>ste?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},p=!u&&nte(g)?new Qee({...g,element:g.motionValue.owner.current}):new Uj(g);p.finished.then(()=>this.notifyFinished()).catch(gl),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Uee()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const ite=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ote(e){const t=ite.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function fz(e,t,r=1){const[n,s]=ote(e);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const i=a.trim();return RW(i)?parseFloat(i):i}return Rj(s)?fz(s,t,r+1):s}function zj(e,t){return e?.[t]??e?.default??e}const hz=new Set(["width","height","top","left","right","bottom",...Qp]),lte={test:e=>e==="auto",parse:e=>e},gz=e=>t=>t.test(e),pz=[Jp,Rr,zc,Jd,ZZ,QZ,lte],e8=e=>pz.find(gz(e));function cte(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||IW(e):!0}const ute=new Set(["brightness","contrast","saturate","opacity"]);function dte(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(Dj)||[];if(!n)return e;const s=r.replace(n,"");let a=ute.has(t)?1:0;return n!==r&&(a*=100),t+"("+a+s+")"}const fte=/\b([a-z-]*)\(.*?\)/gu,Y4={...xf,getAnimatableNone:e=>{const t=e.match(fte);return t?t.map(dte).join(" "):e}},t8={...Jp,transform:Math.round},hte={rotate:Jd,rotateX:Jd,rotateY:Jd,rotateZ:Jd,scale:Yw,scaleX:Yw,scaleY:Yw,scaleZ:Yw,skew:Jd,skewX:Jd,skewY:Jd,distance:Rr,translateX:Rr,translateY:Rr,translateZ:Rr,x:Rr,y:Rr,z:Rr,perspective:Rr,transformPerspective:Rr,opacity:ev,originX:WO,originY:WO,originZ:Rr},Hj={borderWidth:Rr,borderTopWidth:Rr,borderRightWidth:Rr,borderBottomWidth:Rr,borderLeftWidth:Rr,borderRadius:Rr,radius:Rr,borderTopLeftRadius:Rr,borderTopRightRadius:Rr,borderBottomRightRadius:Rr,borderBottomLeftRadius:Rr,width:Rr,maxWidth:Rr,height:Rr,maxHeight:Rr,top:Rr,right:Rr,bottom:Rr,left:Rr,padding:Rr,paddingTop:Rr,paddingRight:Rr,paddingBottom:Rr,paddingLeft:Rr,margin:Rr,marginTop:Rr,marginRight:Rr,marginBottom:Rr,marginLeft:Rr,backgroundPositionX:Rr,backgroundPositionY:Rr,...hte,zIndex:t8,fillOpacity:ev,strokeOpacity:ev,numOctaves:t8},gte={...Hj,color:sa,backgroundColor:sa,outlineColor:sa,fill:sa,stroke:sa,borderColor:sa,borderTopColor:sa,borderRightColor:sa,borderBottomColor:sa,borderLeftColor:sa,filter:Y4,WebkitFilter:Y4},mz=e=>gte[e];function yz(e,t){let r=mz(e);return r!==Y4&&(r=xf),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const pte=new Set(["auto","none","0"]);function mte(e,t,r){let n=0,s;for(;n<e.length&&!s;){const a=e[n];typeof a=="string"&&!pte.has(a)&&tv(a).values.length&&(s=e[n]),n++}if(s&&r)for(const a of t)e[a]=yz(r,s)}class yte extends Wj{constructor(t,r,n,s,a){super(t,r,n,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),Rj(u))){const d=fz(u,r.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!hz.has(n)||t.length!==2)return;const[s,a]=t,i=e8(s),o=e8(a);if(i!==o)if(YO(i)&&YO(o))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else Dh[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||cte(t[s]))&&n.push(s);n.length&&mte(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Dh[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=n.length-1,i=n[a];n[a]=Dh[r](t.measureViewportBox(),window.getComputedStyle(t.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,l])=>{t.getValue(o).set(l)}),this.resolveNoneKeyframes()}}function xte(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const s=r?.[e]??n.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const xz=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function vz(e){return DW(e)&&"offsetHeight"in e}const r8=30,vte=e=>!isNaN(parseFloat(e));class wte{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const s=uo.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=uo.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=vte(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new jj);const n=this.events[t].add(r);return t==="change"?()=>{n(),ds.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=uo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>r8)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,r8);return MW(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function mp(e,t){return new wte(e,t)}const{schedule:Gj}=KW(queueMicrotask,!1),Ul={x:!1,y:!1};function wz(){return Ul.x||Ul.y}function bte(e){return e==="x"||e==="y"?Ul[e]?null:(Ul[e]=!0,()=>{Ul[e]=!1}):Ul.x||Ul.y?null:(Ul.x=Ul.y=!0,()=>{Ul.x=Ul.y=!1})}function bz(e,t){const r=xte(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function n8(e){return!(e.pointerType==="touch"||wz())}function _te(e,t,r={}){const[n,s,a]=bz(e,r),i=o=>{if(!n8(o))return;const{target:l}=o,u=t(l,o);if(typeof u!="function"||!l)return;const d=f=>{n8(f)&&(u(f),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,s)};return n.forEach(o=>{o.addEventListener("pointerenter",i,s)}),a}const _z=(e,t)=>t?e===t?!0:_z(e,t.parentElement):!1,Vj=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Ste=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function kte(e){return Ste.has(e.tagName)||e.tabIndex!==-1}const Mb=new WeakSet;function s8(e){return t=>{t.key==="Enter"&&e(t)}}function Fk(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Tte=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=s8(()=>{if(Mb.has(r))return;Fk(r,"down");const s=s8(()=>{Fk(r,"up")}),a=()=>Fk(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",a,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function a8(e){return Vj(e)&&!wz()}function Cte(e,t,r={}){const[n,s,a]=bz(e,r),i=o=>{const l=o.currentTarget;if(!a8(o))return;Mb.add(l);const u=t(l,o),d=(p,x)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",g),Mb.has(l)&&Mb.delete(l),a8(p)&&typeof u=="function"&&u(p,{success:x})},f=p=>{d(p,l===window||l===document||r.useGlobalTarget||_z(l,p.target))},g=p=>{d(p,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",g,s)};return n.forEach(o=>{(r.useGlobalTarget?window:o).addEventListener("pointerdown",i,s),vz(o)&&(o.addEventListener("focus",u=>Tte(u,s)),!kte(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function Sz(e){return DW(e)&&"ownerSVGElement"in e}function Ete(e){return Sz(e)&&e.tagName==="svg"}const ki=e=>!!(e&&e.getVelocity),Nte=[...pz,sa,xf],Ate=e=>Nte.find(gz(e)),qj=C.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class jte extends C.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=vz(n)&&n.offsetWidth||0,a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Pte({children:e,isPresent:t,anchorX:r,root:n}){const s=C.useId(),a=C.useRef(null),i=C.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=C.useContext(qj);return C.useInsertionEffect(()=>{const{width:l,height:u,top:d,left:f,right:g}=i.current;if(t||!a.current||!l||!u)return;const p=r==="left"?`left: ${f}`:`right: ${g}`;a.current.dataset.motionPopId=s;const x=document.createElement("style");o&&(x.nonce=o);const y=n??document.head;return y.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            ${p}px !important;
            top: ${d}px !important;
          }
        `),()=>{y.contains(x)&&y.removeChild(x)}},[t]),c.jsx(jte,{isPresent:t,childRef:a,sizeRef:i,children:C.cloneElement(e,{ref:a})})}const Ote=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:a,mode:i,anchorX:o,root:l})=>{const u=kj(Fte),d=C.useId();let f=!0,g=C.useMemo(()=>(f=!1,{id:d,initial:t,isPresent:r,custom:s,onExitComplete:p=>{u.set(p,!0);for(const x of u.values())if(!x)return;n&&n()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[r,u,n]);return a&&f&&(g={...g}),C.useMemo(()=>{u.forEach((p,x)=>u.set(x,!1))},[r]),C.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),i==="popLayout"&&(e=c.jsx(Pte,{isPresent:r,anchorX:o,root:l,children:e})),c.jsx(F2.Provider,{value:g,children:e})};function Fte(){return new Map}function kz(e=!0){const t=C.useContext(F2);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,a=C.useId();C.useEffect(()=>{if(e)return s(a)},[e]);const i=C.useCallback(()=>e&&n&&n(a),[a,n,e]);return!r&&n?[!1,i]:[!0]}const Jw=e=>e.key||"";function i8(e){const t=[];return C.Children.forEach(e,r=>{C.isValidElement(r)&&t.push(r)}),t}const co=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1,anchorX:o="left",root:l})=>{const[u,d]=kz(i),f=C.useMemo(()=>i8(e),[e]),g=i&&!u?[]:f.map(Jw),p=C.useRef(!0),x=C.useRef(f),y=kj(()=>new Map),[v,T]=C.useState(f),[_,b]=C.useState(f);FW(()=>{p.current=!1,x.current=f;for(let A=0;A<_.length;A++){const P=Jw(_[A]);g.includes(P)?y.delete(P):y.get(P)!==!0&&y.set(P,!1)}},[_,g.length,g.join("-")]);const E=[];if(f!==v){let A=[...f];for(let P=0;P<_.length;P++){const j=_[P],O=Jw(j);g.includes(O)||(A.splice(P,0,j),E.push(j))}return a==="wait"&&E.length&&(A=E),b(i8(A)),T(f),null}const{forceRender:k}=C.useContext(Sj);return c.jsx(c.Fragment,{children:_.map(A=>{const P=Jw(A),j=i&&!u?!1:f===_||g.includes(P),O=()=>{if(y.has(P))y.set(P,!0);else return;let R=!0;y.forEach(M=>{M||(R=!1)}),R&&(k?.(),b(x.current),i&&d?.(),n&&n())};return c.jsx(Ote,{isPresent:j,initial:!p.current||r?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,root:l,onExitComplete:j?void 0:O,anchorX:o,children:A},P)})})},Tz=C.createContext({strict:!1}),o8={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yp={};for(const e in o8)yp[e]={isEnabled:t=>o8[e].some(r=>!!t[r])};function Rte(e){for(const t in e)yp[t]={...yp[t],...e[t]}}const Dte=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Yb(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Dte.has(e)}let Cz=e=>!Yb(e);function Ite(e){typeof e=="function"&&(Cz=t=>t.startsWith("on")?!Yb(t):e(t))}try{Ite(require("@emotion/is-prop-valid").default)}catch{}function Mte(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(Cz(s)||r===!0&&Yb(s)||!t&&!Yb(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const R2=C.createContext({});function D2(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function rv(e){return typeof e=="string"||Array.isArray(e)}const Kj=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Xj=["initial",...Kj];function I2(e){return D2(e.animate)||Xj.some(t=>rv(e[t]))}function Ez(e){return!!(I2(e)||e.variants)}function Lte(e,t){if(I2(e)){const{initial:r,animate:n}=e;return{initial:r===!1||rv(r)?r:void 0,animate:rv(n)?n:void 0}}return e.inherit!==!1?t:{}}function Bte(e){const{initial:t,animate:r}=Lte(e,C.useContext(R2));return C.useMemo(()=>({initial:t,animate:r}),[l8(t),l8(r)])}function l8(e){return Array.isArray(e)?e.join(" "):e}const nv={};function $te(e){for(const t in e)nv[t]=e[t],Fj(t)&&(nv[t].isCSSVariable=!0)}function Nz(e,{layout:t,layoutId:r}){return Zp.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!nv[e]||e==="opacity")}const Ute={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Wte=Qp.length;function zte(e,t,r){let n="",s=!0;for(let a=0;a<Wte;a++){const i=Qp[a],o=e[i];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(i.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||r){const u=xz(o,Hj[i]);if(!l){s=!1;const d=Ute[i]||i;n+=`${d}(${u}) `}r&&(t[i]=u)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function Yj(e,t,r){const{style:n,vars:s,transformOrigin:a}=e;let i=!1,o=!1;for(const l in t){const u=t[l];if(Zp.has(l)){i=!0;continue}else if(Fj(l)){s[l]=u;continue}else{const d=xz(u,Hj[l]);l.startsWith("origin")?(o=!0,a[l]=d):n[l]=d}}if(t.transform||(i||r?n.transform=zte(t,e.transform,r):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:d=0}=a;n.transformOrigin=`${l} ${u} ${d}`}}const Jj=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Az(e,t,r){for(const n in t)!ki(t[n])&&!Nz(n,r)&&(e[n]=t[n])}function Hte({transformTemplate:e},t){return C.useMemo(()=>{const r=Jj();return Yj(r,t,e),Object.assign({},r.vars,r.style)},[t])}function Gte(e,t){const r=e.style||{},n={};return Az(n,r,e),Object.assign(n,Hte(e,t)),n}function Vte(e,t){const r={},n=Gte(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const qte={offset:"stroke-dashoffset",array:"stroke-dasharray"},Kte={offset:"strokeDashoffset",array:"strokeDasharray"};function Xte(e,t,r=1,n=0,s=!0){e.pathLength=1;const a=s?qte:Kte;e[a.offset]=Rr.transform(-n);const i=Rr.transform(t),o=Rr.transform(r);e[a.array]=`${i} ${o}`}function jz(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:a=1,pathOffset:i=0,...o},l,u,d){if(Yj(e,o,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:g}=e;f.transform&&(g.transform=f.transform,delete f.transform),(g.transform||f.transformOrigin)&&(g.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),g.transform&&(g.transformBox=d?.transformBox??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),s!==void 0&&Xte(f,s,a,i,!1)}const Pz=()=>({...Jj(),attrs:{}}),Oz=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Yte(e,t,r,n){const s=C.useMemo(()=>{const a=Pz();return jz(a,t,Oz(n),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};Az(a,e.style,e),s.style={...a,...s.style}}return s}const Jte=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Qj(e){return typeof e!="string"||e.includes("-")?!1:!!(Jte.indexOf(e)>-1||/[A-Z]/u.test(e))}function Qte(e,t,r,{latestValues:n},s,a=!1){const o=(Qj(e)?Yte:Vte)(t,n,s,e),l=Mte(t,typeof e=="string",a),u=e!==C.Fragment?{...l,...o,ref:r}:{},{children:d}=t,f=C.useMemo(()=>ki(d)?d.get():d,[d]);return C.createElement(e,{...u,children:f})}function c8(e){const t=[{},{}];return e?.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function Zj(e,t,r,n){if(typeof t=="function"){const[s,a]=c8(n);t=t(r!==void 0?r:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=c8(n);t=t(r!==void 0?r:e.custom,s,a)}return t}function Lb(e){return ki(e)?e.get():e}function Zte({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:ere(r,n,s,e),renderState:t()}}function ere(e,t,r,n){const s={},a=n(e,{});for(const g in a)s[g]=Lb(a[g]);let{initial:i,animate:o}=e;const l=I2(e),u=Ez(e);t&&u&&!l&&e.inherit!==!1&&(i===void 0&&(i=t.initial),o===void 0&&(o=t.animate));let d=r?r.initial===!1:!1;d=d||i===!1;const f=d?o:i;if(f&&typeof f!="boolean"&&!D2(f)){const g=Array.isArray(f)?f:[f];for(let p=0;p<g.length;p++){const x=Zj(e,g[p]);if(x){const{transitionEnd:y,transition:v,...T}=x;for(const _ in T){let b=T[_];if(Array.isArray(b)){const E=d?b.length-1:0;b=b[E]}b!==null&&(s[_]=b)}for(const _ in y)s[_]=y[_]}}}return s}const Fz=e=>(t,r)=>{const n=C.useContext(R2),s=C.useContext(F2),a=()=>Zte(e,t,n,s);return r?a():kj(a)};function e5(e,t,r){const{style:n}=e,s={};for(const a in n)(ki(n[a])||t.style&&ki(t.style[a])||Nz(a,e)||r?.getValue(a)?.liveStyle!==void 0)&&(s[a]=n[a]);return s}const tre=Fz({scrapeMotionValuesFromProps:e5,createRenderState:Jj});function Rz(e,t,r){const n=e5(e,t,r);for(const s in e)if(ki(e[s])||ki(t[s])){const a=Qp.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[a]=e[s]}return n}const rre=Fz({scrapeMotionValuesFromProps:Rz,createRenderState:Pz}),nre=Symbol.for("motionComponentSymbol");function zg(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function sre(e,t,r){return C.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):zg(r)&&(r.current=n))},[t])}const t5=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),are="framerAppearId",Dz="data-"+t5(are),Iz=C.createContext({});function ire(e,t,r,n,s){const{visualElement:a}=C.useContext(R2),i=C.useContext(Tz),o=C.useContext(F2),l=C.useContext(qj).reducedMotion,u=C.useRef(null);n=n||i.renderer,!u.current&&n&&(u.current=n(e,{visualState:t,parent:a,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=u.current,f=C.useContext(Iz);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&ore(u.current,r,s,f);const g=C.useRef(!1);C.useInsertionEffect(()=>{d&&g.current&&d.update(r,o)});const p=r[Dz],x=C.useRef(!!p&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return FW(()=>{d&&(g.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),x.current&&d.animationState&&d.animationState.animateChanges())}),C.useEffect(()=>{d&&(!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(p)}),x.current=!1),d.enteringChildren=void 0)}),d}function ore(e,t,r,n){const{layoutId:s,layout:a,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:Mz(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!i||o&&zg(o),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:l,layoutRoot:u})}function Mz(e){if(e)return e.options.allowProjection!==!1?e.projection:Mz(e.parent)}function Rk(e,{forwardMotionProps:t=!1}={},r,n){r&&Rte(r);const s=Qj(e)?rre:tre;function a(o,l){let u;const d={...C.useContext(qj),...o,layoutId:lre(o)},{isStatic:f}=d,g=Bte(o),p=s(o,f);if(!f&&Tj){cre();const x=ure(d);u=x.MeasureLayout,g.visualElement=ire(e,p,d,n,x.ProjectionNode)}return c.jsxs(R2.Provider,{value:g,children:[u&&g.visualElement?c.jsx(u,{visualElement:g.visualElement,...d}):null,Qte(e,o,sre(p,g.visualElement,l),p,f,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const i=C.forwardRef(a);return i[nre]=e,i}function lre({layoutId:e}){const t=C.useContext(Sj).id;return t&&e!==void 0?t+"-"+e:e}function cre(e,t){C.useContext(Tz).strict}function ure(e){const{drag:t,layout:r}=yp;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function dre(e,t){if(typeof Proxy>"u")return Rk;const r=new Map,n=(a,i)=>Rk(a,i,e,t),s=(a,i)=>n(a,i);return new Proxy(s,{get:(a,i)=>i==="create"?n:(r.has(i)||r.set(i,Rk(i,void 0,e,t)),r.get(i))})}function Lz({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function fre({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function hre(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Dk(e){return e===void 0||e===1}function J4({scale:e,scaleX:t,scaleY:r}){return!Dk(e)||!Dk(t)||!Dk(r)}function bh(e){return J4(e)||Bz(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Bz(e){return u8(e.x)||u8(e.y)}function u8(e){return e&&e!=="0%"}function Jb(e,t,r){const n=e-r,s=t*n;return r+s}function d8(e,t,r,n,s){return s!==void 0&&(e=Jb(e,s,n)),Jb(e,r,n)+t}function Q4(e,t=0,r=1,n,s){e.min=d8(e.min,t,r,n,s),e.max=d8(e.max,t,r,n,s)}function $z(e,{x:t,y:r}){Q4(e.x,t.translate,t.scale,t.originPoint),Q4(e.y,r.translate,r.scale,r.originPoint)}const f8=.999999999999,h8=1.0000000000001;function gre(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let a,i;for(let o=0;o<s;o++){a=r[o],i=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Gg(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,$z(e,i)),n&&bh(a.latestValues)&&Gg(e,a.latestValues))}t.x<h8&&t.x>f8&&(t.x=1),t.y<h8&&t.y>f8&&(t.y=1)}function Hg(e,t){e.min=e.min+t,e.max=e.max+t}function g8(e,t,r,n,s=.5){const a=xs(e.min,e.max,s);Q4(e,t,r,a,n)}function Gg(e,t){g8(e.x,t.x,t.scaleX,t.scale,t.originX),g8(e.y,t.y,t.scaleY,t.scale,t.originY)}function Uz(e,t){return Lz(hre(e.getBoundingClientRect(),t))}function pre(e,t,r){const n=Uz(e,r),{scroll:s}=t;return s&&(Hg(n.x,s.offset.x),Hg(n.y,s.offset.y)),n}const p8=()=>({translate:0,scale:1,origin:0,originPoint:0}),Vg=()=>({x:p8(),y:p8()}),m8=()=>({min:0,max:0}),Hs=()=>({x:m8(),y:m8()}),Z4={current:null},Wz={current:!1};function mre(){if(Wz.current=!0,!!Tj)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Z4.current=e.matches;e.addEventListener("change",t),t()}else Z4.current=!1}const yre=new WeakMap;function xre(e,t,r){for(const n in t){const s=t[n],a=r[n];if(ki(s))e.addValue(n,s);else if(ki(a))e.addValue(n,mp(s,{owner:e}));else if(a!==s)if(e.hasValue(n)){const i=e.getValue(n);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=e.getStaticValue(n);e.addValue(n,mp(i!==void 0?i:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const y8=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class vre{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Wj,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=uo.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,ds.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=I2(r),this.isVariantNode=Ez(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const g in f){const p=f[g];l[g]!==void 0&&ki(p)&&p.set(l[g])}}mount(t){this.current=t,yre.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),Wz.current||mre(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Z4.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),yf(this.notifyUpdate),yf(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Zp.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&ds.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in yp){const r=yp[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Hs()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<y8.length;n++){const s=y8[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,i=t[a];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=xre(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=mp(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(RW(n)||IW(n))?n=parseFloat(n):!Ate(n)&&xf.test(r)&&(n=yz(t,r)),this.setBaseTarget(t,ki(n)?n.get():n)),ki(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const a=Zj(this.props,r,this.presenceContext?.custom);a&&(n=a[t])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!ki(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new jj),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){Gj.render(this.render)}}class zz extends vre{constructor(){super(...arguments),this.KeyframeResolver=yte}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ki(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function Hz(e,{style:t,vars:r},n,s){const a=e.style;let i;for(i in t)a[i]=t[i];s?.applyProjectionStyles(a,n);for(i in r)a.setProperty(i,r[i])}function wre(e){return window.getComputedStyle(e)}class bre extends zz{constructor(){super(...arguments),this.type="html",this.renderInstance=Hz}readValueFromInstance(t,r){if(Zp.has(r))return this.projection?.isProjecting?H4(r):Iee(t,r);{const n=wre(t),s=(Fj(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return Uz(t,r)}build(t,r,n){Yj(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return e5(t,r,n)}}const Gz=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _re(e,t,r,n){Hz(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(Gz.has(s)?s:t5(s),t.attrs[s])}class Sre extends zz{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Hs}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Zp.has(r)){const n=mz(r);return n&&n.default||0}return r=Gz.has(r)?r:t5(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return Rz(t,r,n)}build(t,r,n){jz(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){_re(t,r,n,s)}mount(t){this.isSVGTag=Oz(t.tagName),super.mount(t)}}const kre=(e,t)=>Qj(e)?new Sre(t):new bre(t,{allowProjection:e!==C.Fragment});function ep(e,t,r){const n=e.getProps();return Zj(n,t,r!==void 0?r:n.custom,e)}const eA=e=>Array.isArray(e);function Tre(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,mp(r))}function Cre(e){return eA(e)?e[e.length-1]||0:e}function Ere(e,t){const r=ep(e,t);let{transitionEnd:n={},transition:s={},...a}=r||{};a={...a,...n};for(const i in a){const o=Cre(a[i]);Tre(e,i,o)}}function Nre(e){return!!(ki(e)&&e.add)}function tA(e,t){const r=e.getValue("willChange");if(Nre(r))return r.add(t);if(!r&&Ku.WillChange){const n=new Ku.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function Vz(e){return e.props[Dz]}const Are=e=>e!==null;function jre(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(Are),a=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[a]}const Pre={type:"spring",stiffness:500,damping:25,restSpeed:10},Ore=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Fre={type:"keyframes",duration:.8},Rre={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Dre=(e,{keyframes:t})=>t.length>2?Fre:Zp.has(e)?e.startsWith("scale")?Ore(t[1]):Pre:Rre;function Ire({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:o,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const r5=(e,t,r,n={},s,a)=>i=>{const o=zj(n,e)||{},l=o.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Uc(l);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:g=>{t.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:s};Ire(o)||Object.assign(d,Dre(e,d)),d.duration&&(d.duration=Uc(d.duration)),d.repeatDelay&&(d.repeatDelay=Uc(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(X4(d),d.delay===0&&(f=!0)),(Ku.instantAnimations||Ku.skipAnimations)&&(f=!0,X4(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,f&&!a&&t.get()!==void 0){const g=jre(d.keyframes,o);if(g!==void 0){ds.update(()=>{d.onUpdate(g),d.onComplete()});return}}return o.isSync?new Uj(d):new ate(d)};function Mre({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function qz(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:i,...o}=t;n&&(a=n);const l=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in o){const f=e.getValue(d,e.latestValues[d]??null),g=o[d];if(g===void 0||u&&Mre(u,d))continue;const p={delay:r,...zj(a||{},d)},x=f.get();if(x!==void 0&&!f.isAnimating&&!Array.isArray(g)&&g===x&&!p.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const T=Vz(e);if(T){const _=window.MotionHandoffAnimation(T,d,ds);_!==null&&(p.startTime=_,y=!0)}}tA(e,d),f.start(r5(d,f,g,e.shouldReduceMotion&&hz.has(d)?{type:!1}:p,e,y));const v=f.animation;v&&l.push(v)}return i&&Promise.all(l).then(()=>{ds.update(()=>{i&&Ere(e,i)})}),l}function Kz(e,t,r,n=0,s=1){const a=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),i=e.size,o=(i-1)*n;return typeof r=="function"?r(a,i):s===1?a*n:o-a*n}function rA(e,t,r={}){const n=ep(e,t,r.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const a=n?()=>Promise.all(qz(e,n,r)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=s;return Lre(e,t,l,u,d,f,r)}:()=>Promise.resolve(),{when:o}=s;if(o){const[l,u]=o==="beforeChildren"?[a,i]:[i,a];return l().then(()=>u())}else return Promise.all([a(),i(r.delay)])}function Lre(e,t,r=0,n=0,s=0,a=1,i){const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(rA(l,t,{...i,delay:r+(typeof n=="function"?0:n)+Kz(e.variantChildren,l,n,s,a)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}function Bre(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(a=>rA(e,a,r));n=Promise.all(s)}else if(typeof t=="string")n=rA(e,t,r);else{const s=typeof t=="function"?ep(e,t,r.custom):t;n=Promise.all(qz(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function Xz(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const $re=Xj.length;function Yz(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?Yz(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<$re;r++){const n=Xj[r],s=e.props[n];(rv(s)||s===!1)&&(t[n]=s)}return t}const Ure=[...Kj].reverse(),Wre=Kj.length;function zre(e){return t=>Promise.all(t.map(({animation:r,options:n})=>Bre(e,r,n)))}function Hre(e){let t=zre(e),r=x8(),n=!0;const s=l=>(u,d)=>{const f=ep(e,d,l==="exit"?e.presenceContext?.custom:void 0);if(f){const{transition:g,transitionEnd:p,...x}=f;u={...u,...x,...p}}return u};function a(l){t=l(e)}function i(l){const{props:u}=e,d=Yz(e.parent)||{},f=[],g=new Set;let p={},x=1/0;for(let v=0;v<Wre;v++){const T=Ure[v],_=r[T],b=u[T]!==void 0?u[T]:d[T],E=rv(b),k=T===l?_.isActive:null;k===!1&&(x=v);let A=b===d[T]&&b!==u[T]&&E;if(A&&n&&e.manuallyAnimateOnMount&&(A=!1),_.protectedKeys={...p},!_.isActive&&k===null||!b&&!_.prevProp||D2(b)||typeof b=="boolean")continue;const P=Gre(_.prevProp,b);let j=P||T===l&&_.isActive&&!A&&E||v>x&&E,O=!1;const R=Array.isArray(b)?b:[b];let M=R.reduce(s(T),{});k===!1&&(M={});const{prevResolvedValues:G={}}=_,K={...G,...M},re=B=>{j=!0,g.has(B)&&(O=!0,g.delete(B)),_.needsAnimating[B]=!0;const z=e.getValue(B);z&&(z.liveStyle=!1)};for(const B in K){const z=M[B],I=G[B];if(p.hasOwnProperty(B))continue;let W=!1;eA(z)&&eA(I)?W=!Xz(z,I):W=z!==I,W?z!=null?re(B):g.add(B):z!==void 0&&g.has(B)?re(B):_.protectedKeys[B]=!0}_.prevProp=b,_.prevResolvedValues=M,_.isActive&&(p={...p,...M}),n&&e.blockInitialAnimation&&(j=!1);const Y=A&&P;j&&(!Y||O)&&f.push(...R.map(B=>{const z={type:T};if(typeof B=="string"&&n&&!Y&&e.manuallyAnimateOnMount&&e.parent){const{parent:I}=e,W=ep(I,B);if(I.enteringChildren&&W){const{delayChildren:V}=W.transition||{};z.delay=Kz(I.enteringChildren,e,V)}}return{animation:B,options:z}}))}if(g.size){const v={};if(typeof u.initial!="boolean"){const T=ep(e,Array.isArray(u.initial)?u.initial[0]:u.initial);T&&T.transition&&(v.transition=T.transition)}g.forEach(T=>{const _=e.getBaseTarget(T),b=e.getValue(T);b&&(b.liveStyle=!0),v[T]=_??null}),f.push({animation:v})}let y=!!f.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(y=!1),n=!1,y?t(f):Promise.resolve()}function o(l,u){if(r[l].isActive===u)return Promise.resolve();e.variantChildren?.forEach(f=>f.animationState?.setActive(l,u)),r[l].isActive=u;const d=i(l);for(const f in r)r[f].protectedKeys={};return d}return{animateChanges:i,setActive:o,setAnimateFunction:a,getState:()=>r,reset:()=>{r=x8(),n=!0}}}function Gre(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Xz(t,e):!1}function mh(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function x8(){return{animate:mh(!0),whileInView:mh(),whileHover:mh(),whileTap:mh(),whileDrag:mh(),whileFocus:mh(),exit:mh()}}class Ef{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Vre extends Ef{constructor(t){super(t),t.animationState||(t.animationState=Hre(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();D2(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let qre=0;class Kre extends Ef{constructor(){super(...arguments),this.id=qre++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Xre={animation:{Feature:Vre},exit:{Feature:Kre}};function sv(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function p1(e){return{point:{x:e.pageX,y:e.pageY}}}const Yre=e=>t=>Vj(t)&&e(t,p1(t));function jx(e,t,r,n){return sv(e,t,Yre(r),n)}const Jz=1e-4,Jre=1-Jz,Qre=1+Jz,Qz=.01,Zre=0-Qz,ene=0+Qz;function qi(e){return e.max-e.min}function tne(e,t,r){return Math.abs(e-t)<=r}function v8(e,t,r,n=.5){e.origin=n,e.originPoint=xs(t.min,t.max,e.origin),e.scale=qi(r)/qi(t),e.translate=xs(r.min,r.max,e.origin)-e.originPoint,(e.scale>=Jre&&e.scale<=Qre||isNaN(e.scale))&&(e.scale=1),(e.translate>=Zre&&e.translate<=ene||isNaN(e.translate))&&(e.translate=0)}function Px(e,t,r,n){v8(e.x,t.x,r.x,n?n.originX:void 0),v8(e.y,t.y,r.y,n?n.originY:void 0)}function w8(e,t,r){e.min=r.min+t.min,e.max=e.min+qi(t)}function rne(e,t,r){w8(e.x,t.x,r.x),w8(e.y,t.y,r.y)}function b8(e,t,r){e.min=t.min-r.min,e.max=e.min+qi(t)}function Ox(e,t,r){b8(e.x,t.x,r.x),b8(e.y,t.y,r.y)}function ll(e){return[e("x"),e("y")]}const Zz=({current:e})=>e?e.ownerDocument.defaultView:null,_8=(e,t)=>Math.abs(e-t);function nne(e,t){const r=_8(e.x,t.x),n=_8(e.y,t.y);return Math.sqrt(r**2+n**2)}class eH{constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Mk(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,x=nne(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!x)return;const{point:y}=g,{timestamp:v}=ei;this.history.push({...y,timestamp:v});const{onStart:T,onMove:_}=this.handlers;p||(T&&T(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,g)},this.handlePointerMove=(g,p)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Ik(p,this.transformPagePoint),ds.update(this.updatePoint,!0)},this.handlePointerUp=(g,p)=>{this.end();const{onEnd:x,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Mk(g.type==="pointercancel"?this.lastMoveEventInfo:Ik(p,this.transformPagePoint),this.history);this.startEvent&&x&&x(g,T),y&&y(g,T)},!Vj(t))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=s||window;const o=p1(t),l=Ik(o,this.transformPagePoint),{point:u}=l,{timestamp:d}=ei;this.history=[{...u,timestamp:d}];const{onSessionStart:f}=r;f&&f(t,Mk(l,this.history)),this.removeListeners=f1(jx(this.contextWindow,"pointermove",this.handlePointerMove),jx(this.contextWindow,"pointerup",this.handlePointerUp),jx(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),yf(this.updatePoint)}}function Ik(e,t){return t?{point:t(e.point)}:e}function S8(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Mk({point:e},t){return{point:e,delta:S8(e,tH(t)),offset:S8(e,sne(t)),velocity:ane(t,.1)}}function sne(e){return e[0]}function tH(e){return e[e.length-1]}function ane(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=tH(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>Uc(t)));)r--;if(!n)return{x:0,y:0};const a=Wc(s.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const i={x:(s.x-n.x)/a,y:(s.y-n.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function ine(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?xs(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?xs(r,e,n.max):Math.min(e,r)),e}function k8(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function one(e,{top:t,left:r,bottom:n,right:s}){return{x:k8(e.x,r,s),y:k8(e.y,t,n)}}function T8(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function lne(e,t){return{x:T8(e.x,t.x),y:T8(e.y,t.y)}}function cne(e,t){let r=.5;const n=qi(e),s=qi(t);return s>n?r=Zx(t.min,t.max-n,e.min):n>s&&(r=Zx(e.min,e.max-s,t.min)),qu(0,1,r)}function une(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const nA=.35;function dne(e=nA){return e===!1?e=0:e===!0&&(e=nA),{x:C8(e,"left","right"),y:C8(e,"top","bottom")}}function C8(e,t,r){return{min:E8(e,t),max:E8(e,r)}}function E8(e,t){return typeof e=="number"?e:e[t]||0}const fne=new WeakMap;class hne{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Hs(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=f=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(p1(f).point)},i=(f,g)=>{const{drag:p,dragPropagation:x,onDragStart:y}=this.getProps();if(p&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=bte(p),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ll(T=>{let _=this.getAxisMotionValue(T).get()||0;if(zc.test(_)){const{projection:b}=this.visualElement;if(b&&b.layout){const E=b.layout.layoutBox[T];E&&(_=qi(E)*(parseFloat(_)/100))}}this.originPoint[T]=_}),y&&ds.postRender(()=>y(f,g)),tA(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(f,g)=>{this.latestPointerEvent=f,this.latestPanInfo=g;const{dragPropagation:p,dragDirectionLock:x,onDirectionLock:y,onDrag:v}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:T}=g;if(x&&this.currentDirection===null){this.currentDirection=gne(T),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",g.point,T),this.updateAxis("y",g.point,T),this.visualElement.render(),v&&v(f,g)},l=(f,g)=>{this.latestPointerEvent=f,this.latestPanInfo=g,this.stop(f,g),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>ll(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new eH(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:Zz(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!n)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&ds.postRender(()=>o(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!Qw(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let i=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(i=ine(i,this.constraints[t],this.elastic[t])),a.set(i)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&zg(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=one(n.layoutBox,t):this.constraints=!1,this.elastic=dne(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&ll(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=une(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!zg(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=pre(n,s.root,this.visualElement.getTransformPagePoint());let i=lne(s.layout.layoutBox,a);if(r){const o=r(fre(i));this.hasMutatedConstraints=!!o,o&&(i=Lz(o))}return i}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=ll(d=>{if(!Qw(d,r,this.currentDirection))return;let f=l&&l[d]||{};i&&(f={min:0,max:0});const g=s?200:1e6,p=s?40:1e7,x={type:"inertia",velocity:n?t[d]:0,bounceStiffness:g,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(d,x)});return Promise.all(u).then(o)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return tA(this.visualElement,t),n.start(r5(t,n,0,r,this.visualElement,!1))}stopAnimation(){ll(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ll(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){ll(r=>{const{drag:n}=this.getProps();if(!Qw(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(r);if(s&&s.layout){const{min:i,max:o}=s.layout.layoutBox[r];a.set(t[r]-xs(i,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!zg(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};ll(i=>{const o=this.getAxisMotionValue(i);if(o&&this.constraints!==!1){const l=o.get();s[i]=cne({min:l,max:l},this.constraints[i])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ll(i=>{if(!Qw(i,t,null))return;const o=this.getAxisMotionValue(i),{min:l,max:u}=this.constraints[i];o.set(xs(l,u,s[i]))})}addListeners(){if(!this.visualElement.current)return;fne.set(this.visualElement,this);const t=this.visualElement.current,r=jx(t,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();zg(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ds.read(n);const i=sv(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(ll(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=l[d].translate,f.set(f.get()+l[d].translate))}),this.visualElement.render())}));return()=>{i(),r(),a(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:i=nA,dragMomentum:o=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:a,dragElastic:i,dragMomentum:o}}}function Qw(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function gne(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class pne extends Ef{constructor(t){super(t),this.removeGroupControls=gl,this.removeListeners=gl,this.controls=new hne(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||gl}unmount(){this.removeGroupControls(),this.removeListeners()}}const N8=e=>(t,r)=>{e&&ds.postRender(()=>e(t,r))};class mne extends Ef{constructor(){super(...arguments),this.removePointerDownListener=gl}onPointerDown(t){this.session=new eH(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Zz(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:N8(t),onStart:N8(r),onMove:n,onEnd:(a,i)=>{delete this.session,s&&ds.postRender(()=>s(a,i))}}}mount(){this.removePointerDownListener=jx(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Bb={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function A8(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const gy={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Rr.test(e))e=parseFloat(e);else return e;const r=A8(e,t.target.x),n=A8(e,t.target.y);return`${r}% ${n}%`}},yne={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=xf.parse(e);if(s.length>5)return n;const a=xf.createTransformer(e),i=typeof s[0]!="number"?1:0,o=r.x.scale*t.x,l=r.y.scale*t.y;s[0+i]/=o,s[1+i]/=l;const u=xs(o,l,.5);return typeof s[2+i]=="number"&&(s[2+i]/=u),typeof s[3+i]=="number"&&(s[3+i]/=u),a(s)}};let Lk=!1;class xne extends C.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:a}=t;$te(vne),a&&(r.group&&r.group.add(a),n&&n.register&&s&&n.register(a),Lk&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Bb.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:a}=this.props,{projection:i}=n;return i&&(i.isPresent=a,Lk=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==a?i.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?i.promote():i.relegate()||ds.postRender(()=>{const o=i.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Gj.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;Lk=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function rH(e){const[t,r]=kz(),n=C.useContext(Sj);return c.jsx(xne,{...e,layoutGroup:n,switchLayoutGroup:C.useContext(Iz),isPresent:t,safeToRemove:r})}const vne={borderRadius:{...gy,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:gy,borderTopRightRadius:gy,borderBottomLeftRadius:gy,borderBottomRightRadius:gy,boxShadow:yne};function wne(e,t,r){const n=ki(e)?e:mp(e);return n.start(r5("",n,t,r)),n.animation}const bne=(e,t)=>e.depth-t.depth;class _ne{constructor(){this.children=[],this.isDirty=!1}add(t){Cj(this.children,t),this.isDirty=!0}remove(t){Ej(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(bne),this.isDirty=!1,this.children.forEach(t)}}function Sne(e,t){const r=uo.now(),n=({timestamp:s})=>{const a=s-r;a>=t&&(yf(n),e(a-t))};return ds.setup(n,!0),()=>yf(n)}const nH=["TopLeft","TopRight","BottomLeft","BottomRight"],kne=nH.length,j8=e=>typeof e=="string"?parseFloat(e):e,P8=e=>typeof e=="number"||Rr.test(e);function Tne(e,t,r,n,s,a){s?(e.opacity=xs(0,r.opacity??1,Cne(n)),e.opacityExit=xs(t.opacity??1,0,Ene(n))):a&&(e.opacity=xs(t.opacity??1,r.opacity??1,n));for(let i=0;i<kne;i++){const o=`border${nH[i]}Radius`;let l=O8(t,o),u=O8(r,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||P8(l)===P8(u)?(e[o]=Math.max(xs(j8(l),j8(u),n),0),(zc.test(u)||zc.test(l))&&(e[o]+="%")):e[o]=u}(t.rotate||r.rotate)&&(e.rotate=xs(t.rotate||0,r.rotate||0,n))}function O8(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Cne=sH(0,.5,HW),Ene=sH(.5,.95,gl);function sH(e,t,r){return n=>n<e?0:n>t?1:r(Zx(e,t,n))}function F8(e,t){e.min=t.min,e.max=t.max}function Zo(e,t){F8(e.x,t.x),F8(e.y,t.y)}function R8(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function D8(e,t,r,n,s){return e-=t,e=Jb(e,1/r,n),s!==void 0&&(e=Jb(e,1/s,n)),e}function Nne(e,t=0,r=1,n=.5,s,a=e,i=e){if(zc.test(t)&&(t=parseFloat(t),t=xs(i.min,i.max,t/100)-i.min),typeof t!="number")return;let o=xs(a.min,a.max,n);e===a&&(o-=t),e.min=D8(e.min,t,r,o,s),e.max=D8(e.max,t,r,o,s)}function I8(e,t,[r,n,s],a,i){Nne(e,t[r],t[n],t[s],t.scale,a,i)}const Ane=["x","scaleX","originX"],jne=["y","scaleY","originY"];function M8(e,t,r,n){I8(e.x,t,Ane,r?r.x:void 0,n?n.x:void 0),I8(e.y,t,jne,r?r.y:void 0,n?n.y:void 0)}function L8(e){return e.translate===0&&e.scale===1}function aH(e){return L8(e.x)&&L8(e.y)}function B8(e,t){return e.min===t.min&&e.max===t.max}function Pne(e,t){return B8(e.x,t.x)&&B8(e.y,t.y)}function $8(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function iH(e,t){return $8(e.x,t.x)&&$8(e.y,t.y)}function U8(e){return qi(e.x)/qi(e.y)}function W8(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class One{constructor(){this.members=[]}add(t){Cj(this.members,t),t.scheduleRender()}remove(t){if(Ej(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Fne(e,t,r){let n="";const s=e.x.translate/t.x,a=e.y.translate/t.y,i=r?.z||0;if((s||a||i)&&(n=`translate3d(${s}px, ${a}px, ${i}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:g,skewX:p,skewY:x}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),f&&(n+=`rotateX(${f}deg) `),g&&(n+=`rotateY(${g}deg) `),p&&(n+=`skewX(${p}deg) `),x&&(n+=`skewY(${x}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const Bk=["","X","Y","Z"],Rne=1e3;let Dne=0;function $k(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function oH(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=Vz(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",ds,!(s||a))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&oH(n)}function lH({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(i={},o=t?.()){this.id=Dne++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Lne),this.nodes.forEach(Wne),this.nodes.forEach(zne),this.nodes.forEach(Bne)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new _ne)}addEventListener(i,o){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new jj),this.eventHandlers.get(i).add(o)}notifyListeners(i,...o){const l=this.eventHandlers.get(i);l&&l.notify(...o)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=Sz(i)&&!Ete(i),this.instance=i;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),e){let d,f=0;const g=()=>this.root.updateBlockedByResize=!1;ds.read(()=>{f=window.innerWidth}),e(i,()=>{const p=window.innerWidth;p!==f&&(f=p,this.root.updateBlockedByResize=!0,d&&d(),d=Sne(g,250),Bb.hasAnimatedSinceResize&&(Bb.hasAnimatedSinceResize=!1,this.nodes.forEach(G8)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:g,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||Kne,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=u.getProps(),T=!this.targetLayout||!iH(this.targetLayout,p),_=!f&&g;if(this.options.layoutRoot||this.resumeFrom||_||f&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...zj(x,"layout"),onPlay:y,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(d,_)}else f||G8(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),yf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Hne),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&oH(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(z8);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(H8);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Une),this.nodes.forEach(Ine),this.nodes.forEach(Mne)):this.nodes.forEach(H8),this.clearAllSnapshots();const o=uo.now();ei.delta=qu(0,1e3/60,o-ei.timestamp),ei.timestamp=o,ei.isProcessing=!0,Nk.update.process(ei),Nk.preRender.process(ei),Nk.render.process(ei),ei.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Gj.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach($ne),this.sharedNodes.forEach(Gne)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ds.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ds.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!qi(this.snapshot.measuredBox.x)&&!qi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Hs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(o=!1),o&&this.instance){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!aH(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;i&&this.instance&&(o||bh(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return i&&(l=this.removeTransform(l)),Xne(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return Hs();const o=i.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Yne))){const{scroll:u}=this.root;u&&(Hg(o.x,u.offset.x),Hg(o.y,u.offset.y))}return o}removeElementScroll(i){const o=Hs();if(Zo(o,i),this.scroll?.wasRoot)return o;for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Zo(o,i),Hg(o.x,d.offset.x),Hg(o.y,d.offset.y))}return o}applyTransform(i,o=!1){const l=Hs();Zo(l,i);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Gg(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),bh(d.latestValues)&&Gg(l,d.latestValues)}return bh(this.latestValues)&&Gg(l,this.latestValues),l}removeTransform(i){const o=Hs();Zo(o,i);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!bh(u.latestValues))continue;J4(u.latestValues)&&u.updateSnapshot();const d=Hs(),f=u.measurePageBox();Zo(d,f),M8(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return bh(this.latestValues)&&M8(o,this.latestValues),o}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ei.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(i||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=ei.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Hs(),this.relativeTargetOrigin=Hs(),Ox(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Zo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Hs(),this.targetWithTransforms=Hs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rne(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Zo(this.target,this.layout.layoutBox),$z(this.target,this.targetDelta)):Zo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Hs(),this.relativeTargetOrigin=Hs(),Ox(this.relativeTargetOrigin,this.target,g.target),Zo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||J4(this.parent.latestValues)||Bz(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const i=this.getLead(),o=!!this.resumingFrom||this!==i;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ei.timestamp&&(l=!1),l)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Zo(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;gre(this.layoutCorrected,this.treeScale,this.path,o),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=Hs());const{target:p}=i;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(R8(this.prevProjectionDelta.x,this.projectionDelta.x),R8(this.prevProjectionDelta.y,this.projectionDelta.y)),Px(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==g||!W8(this.projectionDelta.x,this.prevProjectionDelta.x)||!W8(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.visualElement?.scheduleRender(),i){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Vg(),this.projectionDelta=Vg(),this.projectionDeltaWithTransform=Vg()}setAnimationOrigin(i,o=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},f=Vg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=Hs(),p=l?l.source:void 0,x=this.layout?this.layout.source:void 0,y=p!==x,v=this.getStack(),T=!v||v.members.length<=1,_=!!(y&&!T&&this.options.crossfade===!0&&!this.path.some(qne));this.animationProgress=0;let b;this.mixTargetDelta=E=>{const k=E/1e3;V8(f.x,i.x,k),V8(f.y,i.y,k),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ox(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Vne(this.relativeTarget,this.relativeTargetOrigin,g,k),b&&Pne(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Hs()),Zo(b,this.relativeTarget)),y&&(this.animationValues=d,Tne(d,u,this.latestValues,k,_,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(yf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ds.update(()=>{Bb.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=mp(0)),this.currentAnimation=wne(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),i.onUpdate&&i.onUpdate(o)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Rne),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:d}=i;if(!(!o||!l||!u)){if(this!==i&&this.layout&&u&&cH(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Hs();const f=qi(this.layout.layoutBox.x);l.x.min=i.target.x.min,l.x.max=l.x.min+f;const g=qi(this.layout.layoutBox.y);l.y.min=i.target.y.min,l.y.max=l.y.min+g}Zo(o,l),Gg(o,d),Px(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(i,o){this.sharedNodes.has(i)||this.sharedNodes.set(i,new One),this.sharedNodes.get(i).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){const{layoutId:i}=this.options;return i?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:i}=this.options;return i?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),i&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let o=!1;const{latestValues:l}=i;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&$k("z",i,u,this.animationValues);for(let d=0;d<Bk.length;d++)$k(`rotate${Bk[d]}`,i,u,this.animationValues),$k(`skew${Bk[d]}`,i,u,this.animationValues);i.render();for(const d in u)i.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);i.scheduleRender()}applyProjectionStyles(i,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=Lb(o?.pointerEvents)||"",i.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=Lb(o?.pointerEvents)||""),this.hasProjected&&!bh(this.latestValues)&&(i.transform=l?l({},""):"none",this.hasProjected=!1);return}i.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=Fne(this.projectionDeltaWithTransform,this.treeScale,d);l&&(f=l(d,f)),i.transform=f;const{x:g,y:p}=this.projectionDelta;i.transformOrigin=`${g.origin*100}% ${p.origin*100}% 0`,u.animationValues?i.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:i.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const x in nv){if(d[x]===void 0)continue;const{correct:y,applyTo:v,isCSSVariable:T}=nv[x],_=f==="none"?d[x]:y(d[x],u);if(v){const b=v.length;for(let E=0;E<b;E++)i[v[E]]=_}else T?this.options.visualElement.renderState.vars[x]=_:i[x]=_}this.options.layoutId&&(i.pointerEvents=u===this?Lb(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>i.currentAnimation?.stop()),this.root.nodes.forEach(z8),this.root.sharedNodes.clear()}}}function Ine(e){e.updateLayout()}function Mne(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;s==="size"?ll(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],g=qi(f);f.min=r[d].min,f.max=f.min+g}):cH(s,t.layoutBox,r)&&ll(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],g=qi(r[d]);f.max=f.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+g)});const i=Vg();Px(i,r,t.layoutBox);const o=Vg();a?Px(o,e.applyTransform(n,!0),t.measuredBox):Px(o,r,t.layoutBox);const l=!aH(i);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:g}=d;if(f&&g){const p=Hs();Ox(p,t.layoutBox,f.layoutBox);const x=Hs();Ox(x,r,g.layoutBox),iH(p,x)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=p,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Lne(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Bne(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function $ne(e){e.clearSnapshot()}function z8(e){e.clearMeasurements()}function H8(e){e.isLayoutDirty=!1}function Une(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function G8(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Wne(e){e.resolveTargetDelta()}function zne(e){e.calcProjection()}function Hne(e){e.resetSkewAndRotation()}function Gne(e){e.removeLeadSnapshot()}function V8(e,t,r){e.translate=xs(t.translate,0,r),e.scale=xs(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function q8(e,t,r,n){e.min=xs(t.min,r.min,n),e.max=xs(t.max,r.max,n)}function Vne(e,t,r,n){q8(e.x,t.x,r.x,n),q8(e.y,t.y,r.y,n)}function qne(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Kne={duration:.45,ease:[.4,0,.1,1]},K8=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),X8=K8("applewebkit/")&&!K8("chrome/")?Math.round:gl;function Y8(e){e.min=X8(e.min),e.max=X8(e.max)}function Xne(e){Y8(e.x),Y8(e.y)}function cH(e,t,r){return e==="position"||e==="preserve-aspect"&&!tne(U8(t),U8(r),.2)}function Yne(e){return e!==e.root&&e.scroll?.wasRoot}const Jne=lH({attachResizeListener:(e,t)=>sv(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Uk={current:void 0},uH=lH({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Uk.current){const e=new Jne({});e.mount(window),e.setOptions({layoutScroll:!0}),Uk.current=e}return Uk.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Qne={pan:{Feature:mne},drag:{Feature:pne,ProjectionNode:uH,MeasureLayout:rH}};function J8(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,a=n[s];a&&ds.postRender(()=>a(t,p1(t)))}class Zne extends Ef{mount(){const{current:t}=this.node;t&&(this.unmount=_te(t,(r,n)=>(J8(this.node,n,"Start"),s=>J8(this.node,s,"End"))))}unmount(){}}class ese extends Ef{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=f1(sv(this.node.current,"focus",()=>this.onFocus()),sv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Q8(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),a=n[s];a&&ds.postRender(()=>a(t,p1(t)))}class tse extends Ef{mount(){const{current:t}=this.node;t&&(this.unmount=Cte(t,(r,n)=>(Q8(this.node,n,"Start"),(s,{success:a})=>Q8(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const sA=new WeakMap,Wk=new WeakMap,rse=e=>{const t=sA.get(e.target);t&&t(e)},nse=e=>{e.forEach(rse)};function sse({root:e,...t}){const r=e||document;Wk.has(r)||Wk.set(r,{});const n=Wk.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(nse,{root:e,...t})),n[s]}function ase(e,t,r){const n=sse(t);return sA.set(e,r),n.observe(e),()=>{sA.delete(e),n.unobserve(e)}}const ise={some:0,all:1};class ose extends Ef{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:a}=t,i={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:ise[s]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),g=u?d:f;g&&g(l)};return ase(this.node.current,i,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(lse(t,r))&&this.startObserver()}unmount(){}}function lse({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const cse={inView:{Feature:ose},tap:{Feature:tse},focus:{Feature:ese},hover:{Feature:Zne}},use={layout:{ProjectionNode:uH,MeasureLayout:rH}},dse={...Xre,...cse,...Qne,...use},rt=dre(dse,kre),nt=({children:e,variant:t="primary",size:r="md",onClick:n,disabled:s=!1,className:a="",...i})=>{const o="font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer",l={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",warning:"bg-yellow-600 hover:bg-yellow-700 text-white focus:ring-yellow-500",outline:"bg-transparent text-blue-600 border-2 border-blue-600 hover:bg-blue-600 hover:text-white focus:ring-blue-500",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-700 focus:ring-gray-500"},u={xs:"px-2 py-1 text-xs",sm:"px-2 py-1 text-xs sm:px-3 sm:py-1.5 sm:text-sm",md:"px-3 py-1.5 text-sm sm:px-4 sm:py-2 sm:text-base",lg:"px-4 py-2 text-base sm:px-6 sm:py-3 sm:text-lg",icon:"p-0 flex items-center justify-center"},d=s?"opacity-50 cursor-not-allowed":"";return c.jsx(rt.button,{className:`${o} ${l[t]} ${u[r]} ${d} ${a}`,onClick:n,disabled:s,whileHover:s?{}:{scale:1.05},whileTap:s?{}:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},...i,children:e})},Gr=({size:e="md",color:t="blue",className:r=""})=>{const n={sm:"w-4 h-4",small:"w-4 h-4",md:"w-6 h-6",medium:"w-6 h-6",lg:"w-8 h-8",large:"w-8 h-8",xl:"w-12 h-12"},s={blue:"border-blue-600",green:"border-green-600",red:"border-red-600",yellow:"border-yellow-600",gray:"border-gray-600"};return c.jsx(rt.div,{className:`
        inline-block border-2 border-gray-300 border-t-current rounded-full animate-spin
        ${n[e]} ${s[t]} ${r}
      `,animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})},tc=({type:e="info",message:t="",duration:r=3e3,closable:n=!0,onClose:s,className:a="",...i})=>{const[o,l]=C.useState(!0),[u,d]=C.useState(!1),f=C.useRef(null),g=C.useRef(null);C.useEffect(()=>{if(r>0)return g.current=setTimeout(()=>{p()},r),()=>{g.current&&clearTimeout(g.current)}},[r]);const p=C.useCallback(()=>{u||(d(!0),g.current&&clearTimeout(g.current),setTimeout(()=>{l(!1),s&&s()},300))},[u,s]),x=C.useCallback(T=>{T.key==="Escape"&&p()},[p]);if(!o)return null;const y=["notification",`notification-${e}`,o?"notification-visible":"",u?"notification-exiting":"",a].filter(Boolean).join(" "),v=()=>{switch(e){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}};return c.jsx("div",{ref:f,className:y,role:"alert","aria-live":"polite",onKeyDown:x,tabIndex:-1,...i,children:c.jsxs("div",{className:"notification-content",children:[c.jsx("div",{className:"notification-icon","aria-hidden":"true",children:v()}),c.jsx("div",{className:"notification-body",children:c.jsx("div",{className:"notification-message",children:t})}),n&&c.jsx("button",{className:"notification-close",onClick:p,type:"button","aria-label":"Close notification",children:""})]})})},Ba=()=>{const[e,t]=C.useState([]),r=C.useCallback((a,i="info",o={})=>{const l=Date.now()+Math.random(),u={id:l,message:a,type:i,...o};return t(d=>[...d,u]),o.duration!==0&&setTimeout(()=>{n(l)},o.duration||3e3),l},[]),n=C.useCallback(a=>{t(i=>i.filter(o=>o.id!==a))},[]),s=C.useCallback(()=>{t([])},[]);return{notifications:e,showNotification:r,removeNotification:n,clearAllNotifications:s}},Bo=()=>{const[e,t]=C.useState(!1),[r,n]=C.useState(null),[s,a]=C.useState(null),i=C.useRef(null);C.useRef(new Map);const o=C.useRef(0),l=3,u=1e3,d=C.useCallback(()=>{i.current&&(i.current.abort(),i.current=null)},[]);C.useEffect(()=>d,[d]);const f=C.useCallback(async(L,H={})=>{try{t(!0),n(null),i.current=new AbortController;const J=H.method||"POST",Q={method:J,headers:{"Content-Type":"application/json",...H.headers},signal:i.current.signal,...H};J!=="GET"&&J!=="HEAD"&&(Q.body=JSON.stringify(H.data||{})),console.log(`[API] Making request to: ${L}`,Q);const ne=await fetch(L,Q);if(!ne.ok)throw new Error(`HTTP error! status: ${ne.status}`);const Z=await ne.json();if(console.log("[API] Response received:",Z),Z.success)return a(Z),o.current=0,Z;throw new Error(Z.error||Z.message||"Request failed")}catch(J){if(J.name==="AbortError")return console.log("[API] Request was aborted"),null;if(console.error("[API] Request failed:",J),n(J.message||"Request failed"),o.current<l){o.current++;const Q=u*Math.pow(2,o.current-1);return console.log(`[API] Retrying in ${Q}ms (attempt ${o.current}/${l})`),await new Promise(ne=>setTimeout(ne,Q)),f(L,H)}throw J}finally{t(!1),i.current=null}},[]),g=C.useCallback(async(L,H={})=>{try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())throw new Error("No valid authentication token found");return await window.tokenManager.makeAuthenticatedRequest(L,H)}catch(J){throw console.error("[API] Authenticated request failed:",J),J}},[]),p=C.useCallback(async(L,H)=>{try{const J=`/.netlify/functions/get-test-questions?test_type=${L}&test_id=${H}`;console.log(`[API] Getting test info for ${L}_${H}`);const ne=await(await g(J)).json();if(ne.success)return console.log("[API] Test info retrieved successfully:",ne.test_info),ne.test_info;throw new Error(ne.error||"Failed to get test info")}catch(J){throw console.error("[API] Failed to get test info:",J),J}},[g]),x=C.useCallback(async(L,H)=>{try{const J=`/.netlify/functions/get-test-questions?test_type=${L}&test_id=${H}`;console.log(`[API] Getting test questions for ${L}_${H}`);const ne=await(await g(J)).json();if(ne.success)return console.log("[API] Test questions retrieved successfully:",ne.questions),ne.questions;throw new Error(ne.error||"Failed to get test questions")}catch(J){throw console.error("[API] Failed to get test questions:",J),J}},[g]),y=C.useCallback(async()=>{try{const L="/.netlify/functions/get-student-active-tests";console.log("[API] Loading student active tests");const J=await(await g(L)).json();if(J.success)return console.log("[API] Student active tests loaded successfully:",J.tests),J.tests;throw new Error(J.error||"Failed to load student active tests")}catch(L){throw console.error("[API] Failed to load student active tests:",L),L}},[g]),v=C.useCallback(async(L,H,J)=>{try{let Q;switch(L){case"true_false":Q="/.netlify/functions/submit-true-false-test";break;case"multiple_choice":Q="/.netlify/functions/submit-multiple-choice-test";break;case"input":Q="/.netlify/functions/submit-input-test";break;case"matching_type":Q="/.netlify/functions/submit-matching-type-test";break;case"speaking":Q="/.netlify/functions/submit-speaking-test";break;default:throw new Error(`Unknown test type: ${L}`)}console.log(`[API] Submitting ${L} test:`,J);const Z=await(await g(Q,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)})).json();if(Z.success)return console.log("[API] Test submitted successfully:",Z),Z;throw new Error(Z.error||"Failed to submit test")}catch(Q){throw console.error("[API] Failed to submit test:",Q),Q}},[g]),T=C.useCallback(async L=>{try{const H="/.netlify/functions/save-multiple-choice-test";console.log("[API] Saving multiple choice test:",L);const Q=await(await g(H,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)})).json();if(Q.success)return console.log("[API] Multiple choice test saved successfully:",Q),Q;throw new Error(Q.error||"Failed to save multiple choice test")}catch(H){throw console.error("[API] Failed to save multiple choice test:",H),H}},[g]),_=C.useCallback(async L=>{try{const H="/.netlify/functions/save-true-false-test";console.log("[API] Saving true/false test:",L);const Q=await(await g(H,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)})).json();if(Q.success)return console.log("[API] True/false test saved successfully:",Q),Q;throw new Error(Q.error||"Failed to save true/false test")}catch(H){throw console.error("[API] Failed to save true/false test:",H),H}},[g]),b=C.useCallback(async L=>{try{const H="/.netlify/functions/save-input-test";console.log("[API] Saving input test:",L);const Q=await(await g(H,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)})).json();if(Q.success)return console.log("[API] Input test saved successfully:",Q),Q;throw new Error(Q.error||"Failed to save input test")}catch(H){throw console.error("[API] Failed to save input test:",H),H}},[g]),E=C.useCallback(async L=>{try{const H="/.netlify/functions/assign-test";console.log("[API] Assigning test to classes:",L);const Q=await(await g(H,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)})).json();if(Q.success)return console.log("[API] Test assigned successfully:",Q),Q;throw new Error(Q.error||"Failed to assign test")}catch(H){throw console.error("[API] Failed to assign test:",H),H}},[g]),k=C.useCallback(async()=>{try{const L="/.netlify/functions/get-teacher-active-tests";console.log("[API] Loading teacher active tests");const J=await(await g(L)).json();if(J.success)return console.log("[API] Teacher active tests loaded successfully:",J.tests),J.tests;throw new Error(J.error||"Failed to load teacher active tests")}catch(L){throw console.error("[API] Failed to load teacher active tests:",L),L}},[g]),A=C.useCallback(async()=>{try{const L="/.netlify/functions/get-all-users";console.log("[API] Getting all users");const J=await(await g(L)).json();if(J.success)return console.log("[API] All users loaded successfully:",J.users),J.users;throw new Error(J.error||"Failed to get all users")}catch(L){throw console.error("[API] Failed to get all users:",L),L}},[g]),P=C.useCallback(async()=>{try{const L="/.netlify/functions/get-all-teachers";console.log("[API] Getting all teachers");const J=await(await g(L)).json();if(J.success)return console.log("[API] All teachers loaded successfully:",J.teachers),J.teachers;throw new Error(J.error||"Failed to get all teachers")}catch(L){throw console.error("[API] Failed to get all teachers:",L),L}},[g]),j=C.useCallback(async()=>{try{const L="/.netlify/functions/get-all-subjects";console.log("[API] Getting all subjects");const J=await(await g(L)).json();if(J.success)return console.log("[API] All subjects loaded successfully:",J.subjects),J.subjects;throw new Error(J.error||"Failed to get all subjects")}catch(L){throw console.error("[API] Failed to get all subjects:",L),L}},[g]),O=C.useCallback(()=>{n(null)},[]),R=C.useCallback(()=>{a(null)},[]),M=C.useCallback(()=>{t(!1),n(null),a(null),o.current=0,d()},[d]),G=C.useCallback(async(L,H={})=>{const Q=await(await g(L,{...H,method:"GET"})).json();if(Q.success)return Q;throw new Error(Q.error||"Request failed")},[g]),K=C.useCallback(async(L,H,J={})=>{const ne=await(await g(L,{...J,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)})).json();if(ne.success)return ne;throw new Error(ne.error||"Request failed")},[g]),re=C.useCallback(async(L,H,J={})=>{const ne=await(await g(L,{...J,method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)})).json();if(ne.success)return ne;throw new Error(ne.error||"Request failed")},[g]),Y=C.useCallback(async(L,H={})=>{const Q=await(await g(L,{...H,method:"DELETE"})).json();if(Q.success)return Q;throw new Error(Q.error||"Request failed")},[g]),ee=C.useCallback(async L=>{try{const H="/.netlify/functions/submit-speaking-test";console.log("[API] Submitting speaking test:",L);const Q=await(await g(H,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)})).json();if(Q.success)return console.log("[API] Speaking test submitted successfully:",Q),Q;throw new Error(Q.error||"Failed to submit speaking test")}catch(H){throw console.error("[API] Failed to submit speaking test:",H),H}},[g]),B=C.useCallback(async L=>{try{const H=`/.netlify/functions/get-speaking-test-new?action=test&test_id=${L}`;console.log("[API] Getting speaking test:",L);const Q=await(await g(H,{method:"GET"})).json();if(Q.success)return console.log("[API] Speaking test loaded successfully:",Q),Q;throw new Error(Q.error||"Failed to load speaking test")}catch(H){throw console.error("[API] Failed to load speaking test:",H),H}},[g]),z=C.useCallback(async L=>{try{const H=`/.netlify/functions/get-speaking-test-new?action=questions&test_id=${L}`;console.log("[API] Getting speaking test questions:",L);const Q=await(await g(H,{method:"GET"})).json();if(Q.success)return console.log("[API] Speaking test questions loaded successfully:",Q),Q;throw new Error(Q.error||"Failed to load speaking test questions")}catch(H){throw console.error("[API] Failed to load speaking test questions:",H),H}},[g]),I=C.useCallback(async L=>{try{const H="/.netlify/functions/upload-speaking-audio";console.log("[API] Uploading speaking audio");const Q=await(await g(H,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)})).json();if(Q.success)return console.log("[API] Audio uploaded successfully:",Q),Q;throw new Error(Q.error||"Failed to upload audio")}catch(H){throw console.error("[API] Failed to upload audio:",H),H}},[g]),W=C.useCallback(async L=>{try{const H=`/.netlify/functions/get-speaking-test-new?action=audio&file_path=${encodeURIComponent(L)}`;console.log("[API] Getting speaking audio:",L);const Q=await(await g(H,{method:"GET"})).json();if(Q.success)return console.log("[API] Audio URL retrieved successfully:",Q),Q;throw new Error(Q.error||"Failed to get audio")}catch(H){throw console.error("[API] Failed to get audio:",H),H}},[g]),V=C.useCallback(async(L,H)=>{try{const J=`/.netlify/functions/check-test-completion?test_id=${L}&test_type=${H}`;console.log("[API] Checking test completion:",L,H);const ne=await(await g(J,{method:"GET"})).json();if(ne.success)return console.log("[API] Test completion status:",ne),ne;throw new Error(ne.error||"Failed to check test completion")}catch(J){throw console.error("[API] Failed to check test completion:",J),J}},[g]);return{loading:e,error:r,data:s,sendRequest:f,makeAuthenticatedRequest:g,get:G,post:K,put:re,delete:Y,getTestInfo:p,getTestQuestions:x,loadStudentActiveTests:y,submitTest:v,submitSpeakingTest:ee,getSpeakingTest:B,getSpeakingTestQuestions:z,uploadSpeakingAudio:I,getSpeakingAudio:W,checkTestCompletion:V,saveMultipleChoiceTest:T,saveTrueFalseTest:_,saveInputTest:b,assignTestToClasses:E,loadTeacherActiveTests:k,getAllUsers:A,getAllTeachers:P,getAllSubjects:j,clearError:O,clearData:R,reset:M,cleanup:d}},fse="modulepreload",hse=function(e){return"/"+e},Z8={},Vi=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let u=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};var i=u;document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=u(r.map(d=>{if(d=hse(d),d in Z8)return;Z8[d]=!0;const f=d.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":fse,f||(p.as="script"),p.crossOrigin="",p.href=d,l&&p.setAttribute("nonce",l),document.head.appendChild(p),f)return new Promise((x,y)=>{p.addEventListener("load",x),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};var $b={exports:{}},py={},zk={},Hk={},eF;function Zr(){return eF||(eF=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function r(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof tf<"u"?tf:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.22",isBrowser:r(),isUnminified:/param/.test((function(s){}).toString()),dblClickWindow:400,getAngle(s){return e.Konva.angleDeg?s*t:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isTransforming(){var s;return(s=e.Konva.Transformer)===null||s===void 0?void 0:s.isTransforming()},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(s){e.glob.Konva=s}};const n=s=>{e.Konva[s.prototype.getClassName()]=s};e._registerNode=n,e.Konva._injectGlobal(e.Konva)})(Hk)),Hk}var Gk={},tF;function Ds(){return tF||(tF=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=Zr();class r{constructor(E=[1,0,0,1,0,0]){this.dirty=!1,this.m=E&&E.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new r(this.m)}copyInto(E){E.m[0]=this.m[0],E.m[1]=this.m[1],E.m[2]=this.m[2],E.m[3]=this.m[3],E.m[4]=this.m[4],E.m[5]=this.m[5]}point(E){const k=this.m;return{x:k[0]*E.x+k[2]*E.y+k[4],y:k[1]*E.x+k[3]*E.y+k[5]}}translate(E,k){return this.m[4]+=this.m[0]*E+this.m[2]*k,this.m[5]+=this.m[1]*E+this.m[3]*k,this}scale(E,k){return this.m[0]*=E,this.m[1]*=E,this.m[2]*=k,this.m[3]*=k,this}rotate(E){const k=Math.cos(E),A=Math.sin(E),P=this.m[0]*k+this.m[2]*A,j=this.m[1]*k+this.m[3]*A,O=this.m[0]*-A+this.m[2]*k,R=this.m[1]*-A+this.m[3]*k;return this.m[0]=P,this.m[1]=j,this.m[2]=O,this.m[3]=R,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(E,k){const A=this.m[0]+this.m[2]*k,P=this.m[1]+this.m[3]*k,j=this.m[2]+this.m[0]*E,O=this.m[3]+this.m[1]*E;return this.m[0]=A,this.m[1]=P,this.m[2]=j,this.m[3]=O,this}multiply(E){const k=this.m[0]*E.m[0]+this.m[2]*E.m[1],A=this.m[1]*E.m[0]+this.m[3]*E.m[1],P=this.m[0]*E.m[2]+this.m[2]*E.m[3],j=this.m[1]*E.m[2]+this.m[3]*E.m[3],O=this.m[0]*E.m[4]+this.m[2]*E.m[5]+this.m[4],R=this.m[1]*E.m[4]+this.m[3]*E.m[5]+this.m[5];return this.m[0]=k,this.m[1]=A,this.m[2]=P,this.m[3]=j,this.m[4]=O,this.m[5]=R,this}invert(){const E=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),k=this.m[3]*E,A=-this.m[1]*E,P=-this.m[2]*E,j=this.m[0]*E,O=E*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),R=E*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=k,this.m[1]=A,this.m[2]=P,this.m[3]=j,this.m[4]=O,this.m[5]=R,this}getMatrix(){return this.m}decompose(){const E=this.m[0],k=this.m[1],A=this.m[2],P=this.m[3],j=this.m[4],O=this.m[5],R=E*P-k*A,M={x:j,y:O,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(E!=0||k!=0){const G=Math.sqrt(E*E+k*k);M.rotation=k>0?Math.acos(E/G):-Math.acos(E/G),M.scaleX=G,M.scaleY=R/G,M.skewX=(E*A+k*P)/R,M.skewY=0}else if(A!=0||P!=0){const G=Math.sqrt(A*A+P*P);M.rotation=Math.PI/2-(P>0?Math.acos(-A/G):-Math.acos(A/G)),M.scaleX=R/G,M.scaleY=G,M.skewX=0,M.skewY=(E*A+k*P)/R}return M.rotation=e.Util._getRotation(M.rotation),M}}e.Transform=r;const n="[object Array]",s="[object Number]",a="[object String]",i="[object Boolean]",o=Math.PI/180,l=180/Math.PI,u="#",d="",f="0",g="Konva warning: ",p="Konva error: ",x="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let T=[];const _=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(b){setTimeout(b,60)};e.Util={_isElement(b){return!!(b&&b.nodeType==1)},_isFunction(b){return!!(b&&b.constructor&&b.call&&b.apply)},_isPlainObject(b){return!!b&&b.constructor===Object},_isArray(b){return Object.prototype.toString.call(b)===n},_isNumber(b){return Object.prototype.toString.call(b)===s&&!isNaN(b)&&isFinite(b)},_isString(b){return Object.prototype.toString.call(b)===a},_isBoolean(b){return Object.prototype.toString.call(b)===i},isObject(b){return b instanceof Object},isValidSelector(b){if(typeof b!="string")return!1;const E=b[0];return E==="#"||E==="."||E===E.toUpperCase()},_sign(b){return b===0||b>0?1:-1},requestAnimFrame(b){T.push(b),T.length===1&&_(function(){const E=T;T=[],E.forEach(function(k){k()})})},createCanvasElement(){const b=document.createElement("canvas");try{b.style=b.style||{}}catch{}return b},createImageElement(){return document.createElement("img")},_isInDocument(b){for(;b=b.parentNode;)if(b==document)return!0;return!1},_urlToImage(b,E){const k=e.Util.createImageElement();k.onload=function(){E(k)},k.src=b},_rgbToHex(b,E,k){return((1<<24)+(b<<16)+(E<<8)+k).toString(16).slice(1)},_hexToRgb(b){b=b.replace(u,d);const E=parseInt(b,16);return{r:E>>16&255,g:E>>8&255,b:E&255}},getRandomColor(){let b=(Math.random()*16777215<<0).toString(16);for(;b.length<6;)b=f+b;return u+b},getRGB(b){let E;return b in y?(E=y[b],{r:E[0],g:E[1],b:E[2]}):b[0]===u?this._hexToRgb(b.substring(1)):b.substr(0,4)===x?(E=v.exec(b.replace(/ /g,"")),{r:parseInt(E[1],10),g:parseInt(E[2],10),b:parseInt(E[3],10)}):{r:0,g:0,b:0}},colorToRGBA(b){return b=b||"black",e.Util._namedColorToRBA(b)||e.Util._hex3ColorToRGBA(b)||e.Util._hex4ColorToRGBA(b)||e.Util._hex6ColorToRGBA(b)||e.Util._hex8ColorToRGBA(b)||e.Util._rgbColorToRGBA(b)||e.Util._rgbaColorToRGBA(b)||e.Util._hslColorToRGBA(b)},_namedColorToRBA(b){const E=y[b.toLowerCase()];return E?{r:E[0],g:E[1],b:E[2],a:1}:null},_rgbColorToRGBA(b){if(b.indexOf("rgb(")===0){b=b.match(/rgb\(([^)]+)\)/)[1];const E=b.split(/ *, */).map(Number);return{r:E[0],g:E[1],b:E[2],a:1}}},_rgbaColorToRGBA(b){if(b.indexOf("rgba(")===0){b=b.match(/rgba\(([^)]+)\)/)[1];const E=b.split(/ *, */).map((k,A)=>k.slice(-1)==="%"?A===3?parseInt(k)/100:parseInt(k)/100*255:Number(k));return{r:E[0],g:E[1],b:E[2],a:E[3]}}},_hex8ColorToRGBA(b){if(b[0]==="#"&&b.length===9)return{r:parseInt(b.slice(1,3),16),g:parseInt(b.slice(3,5),16),b:parseInt(b.slice(5,7),16),a:parseInt(b.slice(7,9),16)/255}},_hex6ColorToRGBA(b){if(b[0]==="#"&&b.length===7)return{r:parseInt(b.slice(1,3),16),g:parseInt(b.slice(3,5),16),b:parseInt(b.slice(5,7),16),a:1}},_hex4ColorToRGBA(b){if(b[0]==="#"&&b.length===5)return{r:parseInt(b[1]+b[1],16),g:parseInt(b[2]+b[2],16),b:parseInt(b[3]+b[3],16),a:parseInt(b[4]+b[4],16)/255}},_hex3ColorToRGBA(b){if(b[0]==="#"&&b.length===4)return{r:parseInt(b[1]+b[1],16),g:parseInt(b[2]+b[2],16),b:parseInt(b[3]+b[3],16),a:1}},_hslColorToRGBA(b){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(b)){const[E,...k]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(b),A=Number(k[0])/360,P=Number(k[1])/100,j=Number(k[2])/100;let O,R,M;if(P===0)return M=j*255,{r:Math.round(M),g:Math.round(M),b:Math.round(M),a:1};j<.5?O=j*(1+P):O=j+P-j*P;const G=2*j-O,K=[0,0,0];for(let re=0;re<3;re++)R=A+1/3*-(re-1),R<0&&R++,R>1&&R--,6*R<1?M=G+(O-G)*6*R:2*R<1?M=O:3*R<2?M=G+(O-G)*(2/3-R)*6:M=G,K[re]=M*255;return{r:Math.round(K[0]),g:Math.round(K[1]),b:Math.round(K[2]),a:1}}},haveIntersection(b,E){return!(E.x>b.x+b.width||E.x+E.width<b.x||E.y>b.y+b.height||E.y+E.height<b.y)},cloneObject(b){const E={};for(const k in b)this._isPlainObject(b[k])?E[k]=this.cloneObject(b[k]):this._isArray(b[k])?E[k]=this.cloneArray(b[k]):E[k]=b[k];return E},cloneArray(b){return b.slice(0)},degToRad(b){return b*o},radToDeg(b){return b*l},_degToRad(b){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(b)},_radToDeg(b){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(b)},_getRotation(b){return t.Konva.angleDeg?e.Util.radToDeg(b):b},_capitalize(b){return b.charAt(0).toUpperCase()+b.slice(1)},throw(b){throw new Error(p+b)},error(b){console.error(p+b)},warn(b){t.Konva.showWarnings&&console.warn(g+b)},each(b,E){for(const k in b)E(k,b[k])},_inRange(b,E,k){return E<=b&&b<k},_getProjectionToSegment(b,E,k,A,P,j){let O,R,M;const G=(b-k)*(b-k)+(E-A)*(E-A);if(G==0)O=b,R=E,M=(P-k)*(P-k)+(j-A)*(j-A);else{const K=((P-b)*(k-b)+(j-E)*(A-E))/G;K<0?(O=b,R=E,M=(b-P)*(b-P)+(E-j)*(E-j)):K>1?(O=k,R=A,M=(k-P)*(k-P)+(A-j)*(A-j)):(O=b+K*(k-b),R=E+K*(A-E),M=(O-P)*(O-P)+(R-j)*(R-j))}return[O,R,M]},_getProjectionToLine(b,E,k){const A=e.Util.cloneObject(b);let P=Number.MAX_VALUE;return E.forEach(function(j,O){if(!k&&O===E.length-1)return;const R=E[(O+1)%E.length],M=e.Util._getProjectionToSegment(j.x,j.y,R.x,R.y,b.x,b.y),G=M[0],K=M[1],re=M[2];re<P&&(A.x=G,A.y=K,P=re)}),A},_prepareArrayForTween(b,E,k){const A=[],P=[];if(b.length>E.length){const O=E;E=b,b=O}for(let O=0;O<b.length;O+=2)A.push({x:b[O],y:b[O+1]});for(let O=0;O<E.length;O+=2)P.push({x:E[O],y:E[O+1]});const j=[];return P.forEach(function(O){const R=e.Util._getProjectionToLine(O,A,k);j.push(R.x),j.push(R.y)}),j},_prepareToStringify(b){let E;b.visitedByCircularReferenceRemoval=!0;for(const k in b)if(b.hasOwnProperty(k)&&b[k]&&typeof b[k]=="object"){if(E=Object.getOwnPropertyDescriptor(b,k),b[k].visitedByCircularReferenceRemoval||e.Util._isElement(b[k]))if(E.configurable)delete b[k];else return null;else if(e.Util._prepareToStringify(b[k])===null)if(E.configurable)delete b[k];else return null}return delete b.visitedByCircularReferenceRemoval,b},_assign(b,E){for(const k in E)b[k]=E[k];return b},_getFirstPointerId(b){return b.touches?b.changedTouches[0].identifier:b.pointerId||999},releaseCanvas(...b){t.Konva.releaseCanvasOnDestroy&&b.forEach(E=>{E.width=0,E.height=0})},drawRoundedRectPath(b,E,k,A){let P=0,j=0,O=0,R=0;typeof A=="number"?P=j=O=R=Math.min(A,E/2,k/2):(P=Math.min(A[0]||0,E/2,k/2),j=Math.min(A[1]||0,E/2,k/2),R=Math.min(A[2]||0,E/2,k/2),O=Math.min(A[3]||0,E/2,k/2)),b.moveTo(P,0),b.lineTo(E-j,0),b.arc(E-j,j,j,Math.PI*3/2,0,!1),b.lineTo(E,k-R),b.arc(E-R,k-R,R,0,Math.PI/2,!1),b.lineTo(O,k),b.arc(O,k-O,O,Math.PI/2,Math.PI,!1),b.lineTo(0,P),b.arc(P,P,P,Math.PI,Math.PI*3/2,!1)}}})(Gk)),Gk}var my={},Cu={},Eu={},rF;function dH(){if(rF)return Eu;rF=1,Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.HitContext=Eu.SceneContext=Eu.Context=void 0;const e=Ds(),t=Zr();function r(T){const _=[],b=T.length,E=e.Util;for(let k=0;k<b;k++){let A=T[k];E._isNumber(A)?A=Math.round(A*1e3)/1e3:E._isString(A)||(A=A+""),_.push(A)}return _}const n=",",s="(",a=")",i="([",o="])",l=";",u="()",d="=",f=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],g=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],p=100;let x=class{constructor(_){this.canvas=_,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(_){_.fillEnabled()&&this._fill(_)}_fill(_){}strokeShape(_){_.hasStroke()&&this._stroke(_)}_stroke(_){}fillStrokeShape(_){_.attrs.fillAfterStrokeEnabled?(this.strokeShape(_),this.fillShape(_)):(this.fillShape(_),this.strokeShape(_))}getTrace(_,b){let E=this.traceArr,k=E.length,A="",P,j,O,R;for(P=0;P<k;P++)j=E[P],O=j.method,O?(R=j.args,A+=O,_?A+=u:e.Util._isArray(R[0])?A+=i+R.join(n)+o:(b&&(R=R.map(M=>typeof M=="number"?Math.floor(M):M)),A+=s+R.join(n)+a)):(A+=j.property,_||(A+=d+j.val)),A+=l;return A}clearTrace(){this.traceArr=[]}_trace(_){let b=this.traceArr,E;b.push(_),E=b.length,E>=p&&b.shift()}reset(){const _=this.getCanvas().getPixelRatio();this.setTransform(1*_,0,0,1*_,0,0)}getCanvas(){return this.canvas}clear(_){const b=this.getCanvas();_?this.clearRect(_.x||0,_.y||0,_.width||0,_.height||0):this.clearRect(0,0,b.getWidth()/b.pixelRatio,b.getHeight()/b.pixelRatio)}_applyLineCap(_){const b=_.attrs.lineCap;b&&this.setAttr("lineCap",b)}_applyOpacity(_){const b=_.getAbsoluteOpacity();b!==1&&this.setAttr("globalAlpha",b)}_applyLineJoin(_){const b=_.attrs.lineJoin;b&&this.setAttr("lineJoin",b)}setAttr(_,b){this._context[_]=b}arc(_,b,E,k,A,P){this._context.arc(_,b,E,k,A,P)}arcTo(_,b,E,k,A){this._context.arcTo(_,b,E,k,A)}beginPath(){this._context.beginPath()}bezierCurveTo(_,b,E,k,A,P){this._context.bezierCurveTo(_,b,E,k,A,P)}clearRect(_,b,E,k){this._context.clearRect(_,b,E,k)}clip(..._){this._context.clip.apply(this._context,_)}closePath(){this._context.closePath()}createImageData(_,b){const E=arguments;if(E.length===2)return this._context.createImageData(_,b);if(E.length===1)return this._context.createImageData(_)}createLinearGradient(_,b,E,k){return this._context.createLinearGradient(_,b,E,k)}createPattern(_,b){return this._context.createPattern(_,b)}createRadialGradient(_,b,E,k,A,P){return this._context.createRadialGradient(_,b,E,k,A,P)}drawImage(_,b,E,k,A,P,j,O,R){const M=arguments,G=this._context;M.length===3?G.drawImage(_,b,E):M.length===5?G.drawImage(_,b,E,k,A):M.length===9&&G.drawImage(_,b,E,k,A,P,j,O,R)}ellipse(_,b,E,k,A,P,j,O){this._context.ellipse(_,b,E,k,A,P,j,O)}isPointInPath(_,b,E,k){return E?this._context.isPointInPath(E,_,b,k):this._context.isPointInPath(_,b,k)}fill(..._){this._context.fill.apply(this._context,_)}fillRect(_,b,E,k){this._context.fillRect(_,b,E,k)}strokeRect(_,b,E,k){this._context.strokeRect(_,b,E,k)}fillText(_,b,E,k){k?this._context.fillText(_,b,E,k):this._context.fillText(_,b,E)}measureText(_){return this._context.measureText(_)}getImageData(_,b,E,k){return this._context.getImageData(_,b,E,k)}lineTo(_,b){this._context.lineTo(_,b)}moveTo(_,b){this._context.moveTo(_,b)}rect(_,b,E,k){this._context.rect(_,b,E,k)}roundRect(_,b,E,k,A){this._context.roundRect(_,b,E,k,A)}putImageData(_,b,E){this._context.putImageData(_,b,E)}quadraticCurveTo(_,b,E,k){this._context.quadraticCurveTo(_,b,E,k)}restore(){this._context.restore()}rotate(_){this._context.rotate(_)}save(){this._context.save()}scale(_,b){this._context.scale(_,b)}setLineDash(_){this._context.setLineDash?this._context.setLineDash(_):"mozDash"in this._context?this._context.mozDash=_:"webkitLineDash"in this._context&&(this._context.webkitLineDash=_)}getLineDash(){return this._context.getLineDash()}setTransform(_,b,E,k,A,P){this._context.setTransform(_,b,E,k,A,P)}stroke(_){_?this._context.stroke(_):this._context.stroke()}strokeText(_,b,E,k){this._context.strokeText(_,b,E,k)}transform(_,b,E,k,A,P){this._context.transform(_,b,E,k,A,P)}translate(_,b){this._context.translate(_,b)}_enableTrace(){let _=this,b=f.length,E=this.setAttr,k,A;const P=function(j){let O=_[j],R;_[j]=function(){return A=r(Array.prototype.slice.call(arguments,0)),R=O.apply(_,arguments),_._trace({method:j,args:A}),R}};for(k=0;k<b;k++)P(f[k]);_.setAttr=function(){E.apply(_,arguments);const j=arguments[0];let O=arguments[1];(j==="shadowOffsetX"||j==="shadowOffsetY"||j==="shadowBlur")&&(O=O/this.canvas.getPixelRatio()),_._trace({property:j,val:O})}}_applyGlobalCompositeOperation(_){const b=_.attrs.globalCompositeOperation;!b||b==="source-over"||this.setAttr("globalCompositeOperation",b)}};Eu.Context=x,g.forEach(function(T){Object.defineProperty(x.prototype,T,{get(){return this._context[T]},set(_){this._context[T]=_}})});class y extends x{constructor(_,{willReadFrequently:b=!1}={}){super(_),this._context=_._canvas.getContext("2d",{willReadFrequently:b})}_fillColor(_){const b=_.fill();this.setAttr("fillStyle",b),_._fillFunc(this)}_fillPattern(_){this.setAttr("fillStyle",_._getFillPattern()),_._fillFunc(this)}_fillLinearGradient(_){const b=_._getLinearGradient();b&&(this.setAttr("fillStyle",b),_._fillFunc(this))}_fillRadialGradient(_){const b=_._getRadialGradient();b&&(this.setAttr("fillStyle",b),_._fillFunc(this))}_fill(_){const b=_.fill(),E=_.getFillPriority();if(b&&E==="color"){this._fillColor(_);return}const k=_.getFillPatternImage();if(k&&E==="pattern"){this._fillPattern(_);return}const A=_.getFillLinearGradientColorStops();if(A&&E==="linear-gradient"){this._fillLinearGradient(_);return}const P=_.getFillRadialGradientColorStops();if(P&&E==="radial-gradient"){this._fillRadialGradient(_);return}b?this._fillColor(_):k?this._fillPattern(_):A?this._fillLinearGradient(_):P&&this._fillRadialGradient(_)}_strokeLinearGradient(_){const b=_.getStrokeLinearGradientStartPoint(),E=_.getStrokeLinearGradientEndPoint(),k=_.getStrokeLinearGradientColorStops(),A=this.createLinearGradient(b.x,b.y,E.x,E.y);if(k){for(let P=0;P<k.length;P+=2)A.addColorStop(k[P],k[P+1]);this.setAttr("strokeStyle",A)}}_stroke(_){const b=_.dash(),E=_.getStrokeScaleEnabled();if(_.hasStroke()){if(!E){this.save();const A=this.getCanvas().getPixelRatio();this.setTransform(A,0,0,A,0,0)}this._applyLineCap(_),b&&_.dashEnabled()&&(this.setLineDash(b),this.setAttr("lineDashOffset",_.dashOffset())),this.setAttr("lineWidth",_.strokeWidth()),_.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),_.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(_):this.setAttr("strokeStyle",_.stroke()),_._strokeFunc(this),E||this.restore()}}_applyShadow(_){var b,E,k;const A=(b=_.getShadowRGBA())!==null&&b!==void 0?b:"black",P=(E=_.getShadowBlur())!==null&&E!==void 0?E:5,j=(k=_.getShadowOffset())!==null&&k!==void 0?k:{x:0,y:0},O=_.getAbsoluteScale(),R=this.canvas.getPixelRatio(),M=O.x*R,G=O.y*R;this.setAttr("shadowColor",A),this.setAttr("shadowBlur",P*Math.min(Math.abs(M),Math.abs(G))),this.setAttr("shadowOffsetX",j.x*M),this.setAttr("shadowOffsetY",j.y*G)}}Eu.SceneContext=y;class v extends x{constructor(_){super(_),this._context=_._canvas.getContext("2d",{willReadFrequently:!0})}_fill(_){this.save(),this.setAttr("fillStyle",_.colorKey),_._fillFuncHit(this),this.restore()}strokeShape(_){_.hasHitStroke()&&this._stroke(_)}_stroke(_){if(_.hasHitStroke()){const b=_.getStrokeScaleEnabled();if(!b){this.save();const A=this.getCanvas().getPixelRatio();this.setTransform(A,0,0,A,0,0)}this._applyLineCap(_);const E=_.hitStrokeWidth(),k=E==="auto"?_.strokeWidth():E;this.setAttr("lineWidth",k),this.setAttr("strokeStyle",_.colorKey),_._strokeFuncHit(this),b||this.restore()}}}return Eu.HitContext=v,Eu}var nF;function M2(){if(nF)return Cu;nF=1,Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.HitCanvas=Cu.SceneCanvas=Cu.Canvas=void 0;const e=Ds(),t=dH(),r=Zr();let n;function s(){if(n)return n;const l=e.Util.createCanvasElement(),u=l.getContext("2d");return n=(function(){const d=r.Konva._global.devicePixelRatio||1,f=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;return d/f})(),e.Util.releaseCanvas(l),n}let a=class{constructor(u){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const f=(u||{}).pixelRatio||r.Konva.pixelRatio||s();this.pixelRatio=f,this._canvas=e.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(u){const d=this.pixelRatio;this.pixelRatio=u,this.setSize(this.getWidth()/d,this.getHeight()/d)}setWidth(u){this.width=this._canvas.width=u*this.pixelRatio,this._canvas.style.width=u+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}setHeight(u){this.height=this._canvas.height=u*this.pixelRatio,this._canvas.style.height=u+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}getWidth(){return this.width}getHeight(){return this.height}setSize(u,d){this.setWidth(u||0),this.setHeight(d||0)}toDataURL(u,d){try{return this._canvas.toDataURL(u,d)}catch{try{return this._canvas.toDataURL()}catch(g){return e.Util.error("Unable to get data URL. "+g.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Cu.Canvas=a;class i extends a{constructor(u={width:0,height:0,willReadFrequently:!1}){super(u),this.context=new t.SceneContext(this,{willReadFrequently:u.willReadFrequently}),this.setSize(u.width,u.height)}}Cu.SceneCanvas=i;class o extends a{constructor(u={width:0,height:0}){super(u),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(u.width,u.height)}}return Cu.HitCanvas=o,Cu}var Vk={},sF;function n5(){return sF||(sF=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=Zr(),r=Ds();e.DD={get isDragging(){let n=!1;return e.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return e.DD._dragElements.forEach(s=>{n=s.node}),n},_dragElements:new Map,_drag(n){const s=[];e.DD._dragElements.forEach((a,i)=>{const{node:o}=a,l=o.getStage();l.setPointersPositions(n),a.pointerId===void 0&&(a.pointerId=r.Util._getFirstPointerId(n));const u=l._changedPointerPositions.find(d=>d.id===a.pointerId);if(u){if(a.dragStatus!=="dragging"){const d=o.dragDistance();if(Math.max(Math.abs(u.x-a.startPointerPos.x),Math.abs(u.y-a.startPointerPos.y))<d||(o.startDrag({evt:n}),!o.isDragging()))return}o._setDragPosition(n,a),s.push(o)}}),s.forEach(a=>{a.fire("dragmove",{type:"dragmove",target:a,evt:n},!0)})},_endDragBefore(n){const s=[];e.DD._dragElements.forEach(a=>{const{node:i}=a,o=i.getStage();if(n&&o.setPointersPositions(n),!o._changedPointerPositions.find(d=>d.id===a.pointerId))return;(a.dragStatus==="dragging"||a.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,a.dragStatus="stopped");const u=a.node.getLayer()||a.node instanceof t.Konva.Stage&&a.node;u&&s.indexOf(u)===-1&&s.push(u)}),s.forEach(a=>{a.draw()})},_endDragAfter(n){e.DD._dragElements.forEach((s,a)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:n},!0),s.dragStatus!=="dragging"&&e.DD._dragElements.delete(a)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))})(Vk)),Vk}var qk={},oo={},aF;function ln(){if(aF)return oo;aF=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.RGBComponent=n,oo.alphaComponent=s,oo.getNumberValidator=a,oo.getNumberOrArrayOfNumbersValidator=i,oo.getNumberOrAutoValidator=o,oo.getStringValidator=l,oo.getStringOrGradientValidator=u,oo.getFunctionValidator=d,oo.getNumberArrayValidator=f,oo.getBooleanValidator=g,oo.getComponentValidator=p;const e=Zr(),t=Ds();function r(x){return t.Util._isString(x)?'"'+x+'"':Object.prototype.toString.call(x)==="[object Number]"||t.Util._isBoolean(x)?x:Object.prototype.toString.call(x)}function n(x){return x>255?255:x<0?0:Math.round(x)}function s(x){return x>1?1:x<1e-4?1e-4:x}function a(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isNumber(x)||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a number.'),x}}function i(x){if(e.Konva.isUnminified)return function(y,v){let T=t.Util._isNumber(y),_=t.Util._isArray(y)&&y.length==x;return!T&&!_&&t.Util.warn(r(y)+' is a not valid value for "'+v+'" attribute. The value should be a number or Array<number>('+x+")"),y}}function o(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isNumber(x)||x==="auto"||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a number or "auto".'),x}}function l(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isString(x)||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a string.'),x}}function u(){if(e.Konva.isUnminified)return function(x,y){const v=t.Util._isString(x),T=Object.prototype.toString.call(x)==="[object CanvasGradient]"||x&&x.addColorStop;return v||T||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a string or a native gradient.'),x}}function d(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isFunction(x)||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a function.'),x}}function f(){if(e.Konva.isUnminified)return function(x,y){const v=Int8Array?Object.getPrototypeOf(Int8Array):null;return v&&x instanceof v||(t.Util._isArray(x)?x.forEach(function(T){t.Util._isNumber(T)||t.Util.warn('"'+y+'" attribute has non numeric element '+T+". Make sure that all elements are numbers.")}):t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a array of numbers.')),x}}function g(){if(e.Konva.isUnminified)return function(x,y){return x===!0||x===!1||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a boolean.'),x}}function p(x){if(e.Konva.isUnminified)return function(y,v){return y==null||t.Util.isObject(y)||t.Util.warn(r(y)+' is a not valid value for "'+v+'" attribute. The value should be an object with properties '+x),y}}return oo}var iF;function an(){return iF||(iF=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=Ds(),r=ln(),n="get",s="set";e.Factory={addGetterSetter(a,i,o,l,u){e.Factory.addGetter(a,i,o),e.Factory.addSetter(a,i,l,u),e.Factory.addOverloadedGetterSetter(a,i)},addGetter(a,i,o){const l=n+t.Util._capitalize(i);a.prototype[l]=a.prototype[l]||function(){const u=this.attrs[i];return u===void 0?o:u}},addSetter(a,i,o,l){const u=s+t.Util._capitalize(i);a.prototype[u]||e.Factory.overWriteSetter(a,i,o,l)},overWriteSetter(a,i,o,l){const u=s+t.Util._capitalize(i);a.prototype[u]=function(d){return o&&d!==void 0&&d!==null&&(d=o.call(this,d,i)),this._setAttr(i,d),l&&l.call(this),this}},addComponentsGetterSetter(a,i,o,l,u){const d=o.length,f=t.Util._capitalize,g=n+f(i),p=s+f(i);a.prototype[g]=function(){const y={};for(let v=0;v<d;v++){const T=o[v];y[T]=this.getAttr(i+f(T))}return y};const x=(0,r.getComponentValidator)(o);a.prototype[p]=function(y){const v=this.attrs[i];l&&(y=l.call(this,y,i)),x&&x.call(this,y,i);for(const T in y)y.hasOwnProperty(T)&&this._setAttr(i+f(T),y[T]);return y||o.forEach(T=>{this._setAttr(i+f(T),void 0)}),this._fireChangeEvent(i,v,y),u&&u.call(this),this},e.Factory.addOverloadedGetterSetter(a,i)},addOverloadedGetterSetter(a,i){const o=t.Util._capitalize(i),l=s+o,u=n+o;a.prototype[i]=function(){return arguments.length?(this[l](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(a,i,o,l){t.Util.error("Adding deprecated "+i);const u=n+t.Util._capitalize(i),d=i+" property is deprecated and will be removed soon. Look at Konva change log for more information.";a.prototype[u]=function(){t.Util.error(d);const f=this.attrs[i];return f===void 0?o:f},e.Factory.addSetter(a,i,l,function(){t.Util.error(d)}),e.Factory.addOverloadedGetterSetter(a,i)},backCompat(a,i){t.Util.each(i,function(o,l){const u=a.prototype[l],d=n+t.Util._capitalize(o),f=s+t.Util._capitalize(o);function g(){u.apply(this,arguments),t.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}a.prototype[o]=g,a.prototype[d]=g,a.prototype[f]=g})},afterSetFilter(){this._filterUpToDate=!1}}})(qk)),qk}var oF;function qs(){if(oF)return my;oF=1,Object.defineProperty(my,"__esModule",{value:!0}),my.Node=void 0;const e=M2(),t=n5(),r=an(),n=Zr(),s=Ds(),a=ln(),i="absoluteOpacity",o="allEventListeners",l="absoluteTransform",u="absoluteScale",d="canvas",f="Change",g="children",p="konva",x="listening",y="mouseenter",v="mouseleave",T="pointerenter",_="pointerleave",b="touchenter",E="touchleave",k="set",A="Shape",P=" ",j="stage",O="transform",R="Stage",M="visible",G=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(P);let K=1,re=class aA{constructor(B){this._id=K++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(B),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(B){(B===O||B===l)&&this._cache.get(B)?this._cache.get(B).dirty=!0:B?this._cache.delete(B):this._cache.clear()}_getCache(B,z){let I=this._cache.get(B);return(I===void 0||(B===O||B===l)&&I.dirty===!0)&&(I=z.call(this),this._cache.set(B,I)),I}_calculate(B,z,I){if(!this._attachedDepsListeners.get(B)){const W=z.map(V=>V+"Change.konva").join(P);this.on(W,()=>{this._clearCache(B)}),this._attachedDepsListeners.set(B,!0)}return this._getCache(B,I)}_getCanvasCache(){return this._cache.get(d)}_clearSelfAndDescendantCache(B){this._clearCache(B),B===l&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(d)){const{scene:B,filter:z,hit:I,buffer:W}=this._cache.get(d);s.Util.releaseCanvas(B,z,I,W),this._cache.delete(d)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(B){const z=B||{};let I={};(z.x===void 0||z.y===void 0||z.width===void 0||z.height===void 0)&&(I=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let W=Math.ceil(z.width||I.width),V=Math.ceil(z.height||I.height),L=z.pixelRatio,H=z.x===void 0?Math.floor(I.x):z.x,J=z.y===void 0?Math.floor(I.y):z.y,Q=z.offset||0,ne=z.drawBorder||!1,Z=z.hitCanvasPixelRatio||1;if(!W||!V){s.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const se=Math.abs(Math.round(I.x)-H)>.5?1:0,ce=Math.abs(Math.round(I.y)-J)>.5?1:0;W+=Q*2+se,V+=Q*2+ce,H-=Q,J-=Q;const he=new e.SceneCanvas({pixelRatio:L,width:W,height:V}),Ee=new e.SceneCanvas({pixelRatio:L,width:0,height:0,willReadFrequently:!0}),ie=new e.HitCanvas({pixelRatio:Z,width:W,height:V}),me=he.getContext(),Ne=ie.getContext(),Oe=new e.SceneCanvas({width:he.width/he.pixelRatio+Math.abs(H),height:he.height/he.pixelRatio+Math.abs(J),pixelRatio:he.pixelRatio}),Re=Oe.getContext();return ie.isCache=!0,he.isCache=!0,this._cache.delete(d),this._filterUpToDate=!1,z.imageSmoothingEnabled===!1&&(he.getContext()._context.imageSmoothingEnabled=!1,Ee.getContext()._context.imageSmoothingEnabled=!1),me.save(),Ne.save(),Re.save(),me.translate(-H,-J),Ne.translate(-H,-J),Re.translate(-H,-J),Oe.x=H,Oe.y=J,this._isUnderCache=!0,this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(u),this.drawScene(he,this,Oe),this.drawHit(ie,this),this._isUnderCache=!1,me.restore(),Ne.restore(),ne&&(me.save(),me.beginPath(),me.rect(0,0,W,V),me.closePath(),me.setAttr("strokeStyle","red"),me.setAttr("lineWidth",5),me.stroke(),me.restore()),this._cache.set(d,{scene:he,filter:Ee,hit:ie,buffer:Oe,x:H,y:J}),this._requestDraw(),this}isCached(){return this._cache.has(d)}getClientRect(B){throw new Error('abstract "getClientRect" method call')}_transformedRect(B,z){const I=[{x:B.x,y:B.y},{x:B.x+B.width,y:B.y},{x:B.x+B.width,y:B.y+B.height},{x:B.x,y:B.y+B.height}];let W=1/0,V=1/0,L=-1/0,H=-1/0;const J=this.getAbsoluteTransform(z);return I.forEach(function(Q){const ne=J.point(Q);W===void 0&&(W=L=ne.x,V=H=ne.y),W=Math.min(W,ne.x),V=Math.min(V,ne.y),L=Math.max(L,ne.x),H=Math.max(H,ne.y)}),{x:W,y:V,width:L-W,height:H-V}}_drawCachedSceneCanvas(B){B.save(),B._applyOpacity(this),B._applyGlobalCompositeOperation(this);const z=this._getCanvasCache();B.translate(z.x,z.y);const I=this._getCachedSceneCanvas(),W=I.pixelRatio;B.drawImage(I._canvas,0,0,I.width/W,I.height/W),B.restore()}_drawCachedHitCanvas(B){const z=this._getCanvasCache(),I=z.hit;B.save(),B.translate(z.x,z.y),B.drawImage(I._canvas,0,0,I.width/I.pixelRatio,I.height/I.pixelRatio),B.restore()}_getCachedSceneCanvas(){let B=this.filters(),z=this._getCanvasCache(),I=z.scene,W=z.filter,V=W.getContext(),L,H,J,Q;if(B){if(!this._filterUpToDate){const ne=I.pixelRatio;W.setSize(I.width/I.pixelRatio,I.height/I.pixelRatio);try{for(L=B.length,V.clear(),V.drawImage(I._canvas,0,0,I.getWidth()/ne,I.getHeight()/ne),H=V.getImageData(0,0,W.getWidth(),W.getHeight()),J=0;J<L;J++){if(Q=B[J],typeof Q!="function"){s.Util.error("Filter should be type of function, but got "+typeof Q+" instead. Please check correct filters");continue}Q.call(this,H),V.putImageData(H,0,0)}}catch(Z){s.Util.error("Unable to apply filter. "+Z.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return W}return I}on(B,z){if(this._cache&&this._cache.delete(o),arguments.length===3)return this._delegate.apply(this,arguments);const I=B.split(P);for(let W=0;W<I.length;W++){const L=I[W].split("."),H=L[0],J=L[1]||"";this.eventListeners[H]||(this.eventListeners[H]=[]),this.eventListeners[H].push({name:J,handler:z})}return this}off(B,z){let I=(B||"").split(P),W=I.length,V,L,H,J,Q,ne;if(this._cache&&this._cache.delete(o),!B)for(L in this.eventListeners)this._off(L);for(V=0;V<W;V++)if(H=I[V],J=H.split("."),Q=J[0],ne=J[1],Q)this.eventListeners[Q]&&this._off(Q,ne,z);else for(L in this.eventListeners)this._off(L,ne,z);return this}dispatchEvent(B){const z={target:this,type:B.type,evt:B};return this.fire(B.type,z),this}addEventListener(B,z){return this.on(B,function(I){z.call(this,I.evt)}),this}removeEventListener(B){return this.off(B),this}_delegate(B,z,I){const W=this;this.on(B,function(V){const L=V.target.findAncestors(z,!0,W);for(let H=0;H<L.length;H++)V=s.Util.cloneObject(V),V.currentTarget=L[H],I.call(L[H],V)})}remove(){return this.isDragging()&&this.stopDrag(),t.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(j),this._clearSelfAndDescendantCache(M),this._clearSelfAndDescendantCache(x)}_remove(){this._clearCaches();const B=this.getParent();B&&B.children&&(B.children.splice(this.index,1),B._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(B){const z="get"+s.Util._capitalize(B);return s.Util._isFunction(this[z])?this[z]():this.attrs[B]}getAncestors(){let B=this.getParent(),z=[];for(;B;)z.push(B),B=B.getParent();return z}getAttrs(){return this.attrs||{}}setAttrs(B){return this._batchTransformChanges(()=>{let z,I;if(!B)return this;for(z in B)z!==g&&(I=k+s.Util._capitalize(z),s.Util._isFunction(this[I])?this[I](B[z]):this._setAttr(z,B[z]))}),this}isListening(){return this._getCache(x,this._isListening)}_isListening(B){if(!this.listening())return!1;const I=this.getParent();return I&&I!==B&&this!==B?I._isListening(B):!0}isVisible(){return this._getCache(M,this._isVisible)}_isVisible(B){if(!this.visible())return!1;const I=this.getParent();return I&&I!==B&&this!==B?I._isVisible(B):!0}shouldDrawHit(B,z=!1){if(B)return this._isVisible(B)&&this._isListening(B);const I=this.getLayer();let W=!1;t.DD._dragElements.forEach(L=>{L.dragStatus==="dragging"&&(L.node.nodeType==="Stage"||L.node.getLayer()===I)&&(W=!0)});const V=!z&&!n.Konva.hitOnDragEnabled&&(W||n.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!V}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let B=this.getDepth(),z=this,I=0,W,V,L,H;function J(ne){for(W=[],V=ne.length,L=0;L<V;L++)H=ne[L],I++,H.nodeType!==A&&(W=W.concat(H.getChildren().slice())),H._id===z._id&&(L=V);W.length>0&&W[0].getDepth()<=B&&J(W)}const Q=this.getStage();return z.nodeType!==R&&Q&&J(Q.getChildren()),I}getDepth(){let B=0,z=this.parent;for(;z;)B++,z=z.parent;return B}_batchTransformChanges(B){this._batchingTransformChange=!0,B(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(O),this._clearSelfAndDescendantCache(l)),this._needClearTransformCache=!1}setPosition(B){return this._batchTransformChanges(()=>{this.x(B.x),this.y(B.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const B=this.getStage();if(!B)return null;const z=B.getPointerPosition();if(!z)return null;const I=this.getAbsoluteTransform().copy();return I.invert(),I.point(z)}getAbsolutePosition(B){let z=!1,I=this.parent;for(;I;){if(I.isCached()){z=!0;break}I=I.parent}z&&!B&&(B=!0);const W=this.getAbsoluteTransform(B).getMatrix(),V=new s.Transform,L=this.offset();return V.m=W.slice(),V.translate(L.x,L.y),V.getTranslation()}setAbsolutePosition(B){const{x:z,y:I,...W}=this._clearTransform();this.attrs.x=z,this.attrs.y=I,this._clearCache(O);const V=this._getAbsoluteTransform().copy();return V.invert(),V.translate(B.x,B.y),B={x:this.attrs.x+V.getTranslation().x,y:this.attrs.y+V.getTranslation().y},this._setTransform(W),this.setPosition({x:B.x,y:B.y}),this._clearCache(O),this._clearSelfAndDescendantCache(l),this}_setTransform(B){let z;for(z in B)this.attrs[z]=B[z]}_clearTransform(){const B={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,B}move(B){let z=B.x,I=B.y,W=this.x(),V=this.y();return z!==void 0&&(W+=z),I!==void 0&&(V+=I),this.setPosition({x:W,y:V}),this}_eachAncestorReverse(B,z){let I=[],W=this.getParent(),V,L;if(!(z&&z._id===this._id)){for(I.unshift(this);W&&(!z||W._id!==z._id);)I.unshift(W),W=W.parent;for(V=I.length,L=0;L<V;L++)B(I[L])}}rotate(B){return this.rotation(this.rotation()+B),this}moveToTop(){if(!this.parent)return s.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const B=this.index,z=this.parent.getChildren().length;return B<z-1?(this.parent.children.splice(B,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return s.Util.warn("Node has no parent. moveUp function is ignored."),!1;const B=this.index,z=this.parent.getChildren().length;return B<z-1?(this.parent.children.splice(B,1),this.parent.children.splice(B+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return s.Util.warn("Node has no parent. moveDown function is ignored."),!1;const B=this.index;return B>0?(this.parent.children.splice(B,1),this.parent.children.splice(B-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return s.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const B=this.index;return B>0?(this.parent.children.splice(B,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(B){if(!this.parent)return s.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(B<0||B>=this.parent.children.length)&&s.Util.warn("Unexpected value "+B+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const z=this.index;return this.parent.children.splice(z,1),this.parent.children.splice(B,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(i,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let B=this.opacity();const z=this.getParent();return z&&!z._isUnderCache&&(B*=z.getAbsoluteOpacity()),B}moveTo(B){return this.getParent()!==B&&(this._remove(),B.add(this)),this}toObject(){let B=this.getAttrs(),z,I,W,V,L;const H={attrs:{},className:this.getClassName()};for(z in B)I=B[z],L=s.Util.isObject(I)&&!s.Util._isPlainObject(I)&&!s.Util._isArray(I),!L&&(W=typeof this[z]=="function"&&this[z],delete B[z],V=W?W.call(this):null,B[z]=I,V!==I&&(H.attrs[z]=I));return s.Util._prepareToStringify(H)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(B,z,I){const W=[];z&&this._isMatch(B)&&W.push(this);let V=this.parent;for(;V;){if(V===I)return W;V._isMatch(B)&&W.push(V),V=V.parent}return W}isAncestorOf(B){return!1}findAncestor(B,z,I){return this.findAncestors(B,z,I)[0]}_isMatch(B){if(!B)return!1;if(typeof B=="function")return B(this);let z=B.replace(/ /g,"").split(","),I=z.length,W,V;for(W=0;W<I;W++)if(V=z[W],s.Util.isValidSelector(V)||(s.Util.warn('Selector "'+V+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),s.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),s.Util.warn("Konva is awesome, right?")),V.charAt(0)==="#"){if(this.id()===V.slice(1))return!0}else if(V.charAt(0)==="."){if(this.hasName(V.slice(1)))return!0}else if(this.className===V||this.nodeType===V)return!0;return!1}getLayer(){const B=this.getParent();return B?B.getLayer():null}getStage(){return this._getCache(j,this._getStage)}_getStage(){const B=this.getParent();return B?B.getStage():null}fire(B,z={},I){return z.target=z.target||this,I?this._fireAndBubble(B,z):this._fire(B,z),this}getAbsoluteTransform(B){return B?this._getAbsoluteTransform(B):this._getCache(l,this._getAbsoluteTransform)}_getAbsoluteTransform(B){let z;if(B)return z=new s.Transform,this._eachAncestorReverse(function(I){const W=I.transformsEnabled();W==="all"?z.multiply(I.getTransform()):W==="position"&&z.translate(I.x()-I.offsetX(),I.y()-I.offsetY())},B),z;{z=this._cache.get(l)||new s.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(z):z.reset();const I=this.transformsEnabled();if(I==="all")z.multiply(this.getTransform());else if(I==="position"){const W=this.attrs.x||0,V=this.attrs.y||0,L=this.attrs.offsetX||0,H=this.attrs.offsetY||0;z.translate(W-L,V-H)}return z.dirty=!1,z}}getAbsoluteScale(B){let z=this;for(;z;)z._isUnderCache&&(B=z),z=z.getParent();const W=this.getAbsoluteTransform(B).decompose();return{x:W.scaleX,y:W.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(O,this._getTransform)}_getTransform(){var B,z;const I=this._cache.get(O)||new s.Transform;I.reset();const W=this.x(),V=this.y(),L=n.Konva.getAngle(this.rotation()),H=(B=this.attrs.scaleX)!==null&&B!==void 0?B:1,J=(z=this.attrs.scaleY)!==null&&z!==void 0?z:1,Q=this.attrs.skewX||0,ne=this.attrs.skewY||0,Z=this.attrs.offsetX||0,se=this.attrs.offsetY||0;return(W!==0||V!==0)&&I.translate(W,V),L!==0&&I.rotate(L),(Q!==0||ne!==0)&&I.skew(Q,ne),(H!==1||J!==1)&&I.scale(H,J),(Z!==0||se!==0)&&I.translate(-1*Z,-1*se),I.dirty=!1,I}clone(B){let z=s.Util.cloneObject(this.attrs),I,W,V,L,H;for(I in B)z[I]=B[I];const J=new this.constructor(z);for(I in this.eventListeners)for(W=this.eventListeners[I],V=W.length,L=0;L<V;L++)H=W[L],H.name.indexOf(p)<0&&(J.eventListeners[I]||(J.eventListeners[I]=[]),J.eventListeners[I].push(H));return J}_toKonvaCanvas(B){B=B||{};const z=this.getClientRect(),I=this.getStage(),W=B.x!==void 0?B.x:Math.floor(z.x),V=B.y!==void 0?B.y:Math.floor(z.y),L=B.pixelRatio||1,H=new e.SceneCanvas({width:B.width||Math.ceil(z.width)||(I?I.width():0),height:B.height||Math.ceil(z.height)||(I?I.height():0),pixelRatio:L}),J=H.getContext(),Q=new e.SceneCanvas({width:H.width/H.pixelRatio+Math.abs(W),height:H.height/H.pixelRatio+Math.abs(V),pixelRatio:H.pixelRatio});return B.imageSmoothingEnabled===!1&&(J._context.imageSmoothingEnabled=!1),J.save(),(W||V)&&J.translate(-1*W,-1*V),this.drawScene(H,void 0,Q),J.restore(),H}toCanvas(B){return this._toKonvaCanvas(B)._canvas}toDataURL(B){B=B||{};const z=B.mimeType||null,I=B.quality||null,W=this._toKonvaCanvas(B).toDataURL(z,I);return B.callback&&B.callback(W),W}toImage(B){return new Promise((z,I)=>{try{const W=B?.callback;W&&delete B.callback,s.Util._urlToImage(this.toDataURL(B),function(V){z(V),W?.(V)})}catch(W){I(W)}})}toBlob(B){return new Promise((z,I)=>{try{const W=B?.callback;W&&delete B.callback,this.toCanvas(B).toBlob(V=>{z(V),W?.(V)},B?.mimeType,B?.quality)}catch(W){I(W)}})}setSize(B){return this.width(B.width),this.height(B.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():n.Konva.dragDistance}_off(B,z,I){let W=this.eventListeners[B],V,L,H;for(V=0;V<W.length;V++)if(L=W[V].name,H=W[V].handler,(L!=="konva"||z==="konva")&&(!z||L===z)&&(!I||I===H)){if(W.splice(V,1),W.length===0){delete this.eventListeners[B];break}V--}}_fireChangeEvent(B,z,I){this._fire(B+f,{oldVal:z,newVal:I})}addName(B){if(!this.hasName(B)){const z=this.name(),I=z?z+" "+B:B;this.name(I)}return this}hasName(B){if(!B)return!1;const z=this.name();return z?(z||"").split(/\s/g).indexOf(B)!==-1:!1}removeName(B){const z=(this.name()||"").split(/\s/g),I=z.indexOf(B);return I!==-1&&(z.splice(I,1),this.name(z.join(" "))),this}setAttr(B,z){const I=this[k+s.Util._capitalize(B)];return s.Util._isFunction(I)?I.call(this,z):this._setAttr(B,z),this}_requestDraw(){if(n.Konva.autoDrawEnabled){const B=this.getLayer()||this.getStage();B?.batchDraw()}}_setAttr(B,z){const I=this.attrs[B];I===z&&!s.Util.isObject(z)||(z==null?delete this.attrs[B]:this.attrs[B]=z,this._shouldFireChangeEvents&&this._fireChangeEvent(B,I,z),this._requestDraw())}_setComponentAttr(B,z,I){let W;I!==void 0&&(W=this.attrs[B],W||(this.attrs[B]=this.getAttr(B)),this.attrs[B][z]=I,this._fireChangeEvent(B,W,I))}_fireAndBubble(B,z,I){z&&this.nodeType===A&&(z.target=this);const W=[y,v,T,_,b,E];if(!(W.indexOf(B)!==-1&&(I&&(this===I||this.isAncestorOf&&this.isAncestorOf(I))||this.nodeType==="Stage"&&!I))){this._fire(B,z);const L=W.indexOf(B)!==-1&&I&&I.isAncestorOf&&I.isAncestorOf(this)&&!I.isAncestorOf(this.parent);(z&&!z.cancelBubble||!z)&&this.parent&&this.parent.isListening()&&!L&&(I&&I.parent?this._fireAndBubble.call(this.parent,B,z,I):this._fireAndBubble.call(this.parent,B,z))}}_getProtoListeners(B){var z,I,W;const V=(z=this._cache.get(o))!==null&&z!==void 0?z:{};let L=V?.[B];if(L===void 0){L=[];let H=Object.getPrototypeOf(this);for(;H;){const J=(W=(I=H.eventListeners)===null||I===void 0?void 0:I[B])!==null&&W!==void 0?W:[];L.push(...J),H=Object.getPrototypeOf(H)}V[B]=L,this._cache.set(o,V)}return L}_fire(B,z){z=z||{},z.currentTarget=this,z.type=B;const I=this._getProtoListeners(B);if(I)for(let V=0;V<I.length;V++)I[V].handler.call(this,z);const W=this.eventListeners[B];if(W)for(let V=0;V<W.length;V++)W[V].handler.call(this,z)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(B){const z=B?B.pointerId:void 0,I=this.getStage(),W=this.getAbsolutePosition();if(!I)return;const V=I._getPointerById(z)||I._changedPointerPositions[0]||W;t.DD._dragElements.set(this._id,{node:this,startPointerPos:V,offset:{x:V.x-W.x,y:V.y-W.y},dragStatus:"ready",pointerId:z})}startDrag(B,z=!0){t.DD._dragElements.has(this._id)||this._createDragElement(B);const I=t.DD._dragElements.get(this._id);I.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:B&&B.evt},z)}_setDragPosition(B,z){const I=this.getStage()._getPointerById(z.pointerId);if(!I)return;let W={x:I.x-z.offset.x,y:I.y-z.offset.y};const V=this.dragBoundFunc();if(V!==void 0){const L=V.call(this,W,B);L?W=L:s.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==W.x||this._lastPos.y!==W.y)&&(this.setAbsolutePosition(W),this._requestDraw()),this._lastPos=W}stopDrag(B){const z=t.DD._dragElements.get(this._id);z&&(z.dragStatus="stopped"),t.DD._endDragBefore(B),t.DD._endDragAfter(B)}setDraggable(B){this._setAttr("draggable",B),this._dragChange()}isDragging(){const B=t.DD._dragElements.get(this._id);return B?B.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(B){if(!(!(B.evt.button!==void 0)||n.Konva.dragButtons.indexOf(B.evt.button)>=0)||this.isDragging())return;let W=!1;t.DD._dragElements.forEach(V=>{this.isAncestorOf(V.node)&&(W=!0)}),W||this._createDragElement(B)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const z=t.DD._dragElements.get(this._id),I=z&&z.dragStatus==="dragging",W=z&&z.dragStatus==="ready";I?this.stopDrag():W&&t.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(B={x:0,y:0}){const z=this.getStage();if(!z)return!1;const I={x:-B.x,y:-B.y,width:z.width()+2*B.x,height:z.height()+2*B.y};return s.Util.haveIntersection(I,this.getClientRect())}static create(B,z){return s.Util._isString(B)&&(B=JSON.parse(B)),this._createNode(B,z)}static _createNode(B,z){let I=aA.prototype.getClassName.call(B),W=B.children,V,L,H;z&&(B.attrs.container=z),n.Konva[I]||(s.Util.warn('Can not find a node with class name "'+I+'". Fallback to "Shape".'),I="Shape");const J=n.Konva[I];if(V=new J(B.attrs),W)for(L=W.length,H=0;H<L;H++)V.add(aA._createNode(W[H]));return V}};my.Node=re,re.prototype.nodeType="Node",re.prototype._attrsAffectingSize=[],re.prototype.eventListeners={},re.prototype.on.call(re.prototype,G,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(O),this._clearSelfAndDescendantCache(l)}),re.prototype.on.call(re.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(M)}),re.prototype.on.call(re.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(x)}),re.prototype.on.call(re.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(i)});const Y=r.Factory.addGetterSetter;return Y(re,"zIndex"),Y(re,"absolutePosition"),Y(re,"position"),Y(re,"x",0,(0,a.getNumberValidator)()),Y(re,"y",0,(0,a.getNumberValidator)()),Y(re,"globalCompositeOperation","source-over",(0,a.getStringValidator)()),Y(re,"opacity",1,(0,a.getNumberValidator)()),Y(re,"name","",(0,a.getStringValidator)()),Y(re,"id","",(0,a.getStringValidator)()),Y(re,"rotation",0,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(re,"scale",["x","y"]),Y(re,"scaleX",1,(0,a.getNumberValidator)()),Y(re,"scaleY",1,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(re,"skew",["x","y"]),Y(re,"skewX",0,(0,a.getNumberValidator)()),Y(re,"skewY",0,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(re,"offset",["x","y"]),Y(re,"offsetX",0,(0,a.getNumberValidator)()),Y(re,"offsetY",0,(0,a.getNumberValidator)()),Y(re,"dragDistance",void 0,(0,a.getNumberValidator)()),Y(re,"width",0,(0,a.getNumberValidator)()),Y(re,"height",0,(0,a.getNumberValidator)()),Y(re,"listening",!0,(0,a.getBooleanValidator)()),Y(re,"preventDefault",!0,(0,a.getBooleanValidator)()),Y(re,"filters",void 0,function(ee){return this._filterUpToDate=!1,ee}),Y(re,"visible",!0,(0,a.getBooleanValidator)()),Y(re,"transformsEnabled","all",(0,a.getStringValidator)()),Y(re,"size"),Y(re,"dragBoundFunc"),Y(re,"draggable",!1,(0,a.getBooleanValidator)()),r.Factory.backCompat(re,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),my}var yy={},lF;function L2(){if(lF)return yy;lF=1,Object.defineProperty(yy,"__esModule",{value:!0}),yy.Container=void 0;const e=an(),t=qs(),r=ln();let n=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(a){const i=this.children||[];return a?i.filter(a):i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.destroy()}),this.children=[],this._requestDraw(),this}add(...a){if(a.length===0)return this;if(a.length>1){for(let o=0;o<a.length;o++)this.add(a[o]);return this}const i=a[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(a){return this._generalFind(a,!1)}findOne(a){const i=this._generalFind(a,!0);return i.length>0?i[0]:void 0}_generalFind(a,i){const o=[];return this._descendants(l=>{const u=l._isMatch(a);return u&&o.push(l),!!(u&&i)}),o}_descendants(a){let i=!1;const o=this.getChildren();for(const l of o){if(i=a(l),i)return!0;if(l.hasChildren()&&(i=l._descendants(a),i))return!0}return!1}toObject(){const a=t.Node.prototype.toObject.call(this);return a.children=[],this.getChildren().forEach(i=>{a.children.push(i.toObject())}),a}isAncestorOf(a){let i=a.getParent();for(;i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(a){const i=t.Node.prototype.clone.call(this,a);return this.getChildren().forEach(function(o){i.add(o.clone())}),i}getAllIntersections(a){const i=[];return this.find("Shape").forEach(o=>{o.isVisible()&&o.intersects(a)&&i.push(o)}),i}_clearSelfAndDescendantCache(a){var i;super._clearSelfAndDescendantCache(a),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(o){o._clearSelfAndDescendantCache(a)}))}_setChildrenIndices(){var a;(a=this.children)===null||a===void 0||a.forEach(function(i,o){i.index=o}),this._requestDraw()}drawScene(a,i,o){const l=this.getLayer(),u=a||l&&l.getCanvas(),d=u&&u.getContext(),f=this._getCanvasCache(),g=f&&f.scene,p=u&&u.isCache;if(!this.isVisible()&&!p)return this;if(g){d.save();const x=this.getAbsoluteTransform(i).getMatrix();d.transform(x[0],x[1],x[2],x[3],x[4],x[5]),this._drawCachedSceneCanvas(d),d.restore()}else this._drawChildren("drawScene",u,i,o);return this}drawHit(a,i){if(!this.shouldDrawHit(i))return this;const o=this.getLayer(),l=a||o&&o.hitCanvas,u=l&&l.getContext(),d=this._getCanvasCache();if(d&&d.hit){u.save();const g=this.getAbsoluteTransform(i).getMatrix();u.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedHitCanvas(u),u.restore()}else this._drawChildren("drawHit",l,i);return this}_drawChildren(a,i,o,l){var u;const d=i&&i.getContext(),f=this.clipWidth(),g=this.clipHeight(),p=this.clipFunc(),x=typeof f=="number"&&typeof g=="number"||p,y=o===this;if(x){d.save();const T=this.getAbsoluteTransform(o);let _=T.getMatrix();d.transform(_[0],_[1],_[2],_[3],_[4],_[5]),d.beginPath();let b;if(p)b=p.call(this,d,this);else{const E=this.clipX(),k=this.clipY();d.rect(E||0,k||0,f,g)}d.clip.apply(d,b),_=T.copy().invert().getMatrix(),d.transform(_[0],_[1],_[2],_[3],_[4],_[5])}const v=!y&&this.globalCompositeOperation()!=="source-over"&&a==="drawScene";v&&(d.save(),d._applyGlobalCompositeOperation(this)),(u=this.children)===null||u===void 0||u.forEach(function(T){T[a](i,o,l)}),v&&d.restore(),x&&d.restore()}getClientRect(a={}){var i;const o=a.skipTransform,l=a.relativeTo;let u,d,f,g,p={x:1/0,y:1/0,width:0,height:0};const x=this;(i=this.children)===null||i===void 0||i.forEach(function(T){if(!T.visible())return;const _=T.getClientRect({relativeTo:x,skipShadow:a.skipShadow,skipStroke:a.skipStroke});_.width===0&&_.height===0||(u===void 0?(u=_.x,d=_.y,f=_.x+_.width,g=_.y+_.height):(u=Math.min(u,_.x),d=Math.min(d,_.y),f=Math.max(f,_.x+_.width),g=Math.max(g,_.y+_.height)))});const y=this.find("Shape");let v=!1;for(let T=0;T<y.length;T++)if(y[T]._isVisible(this)){v=!0;break}return v&&u!==void 0?p={x:u,y:d,width:f-u,height:g-d}:p={x:0,y:0,width:0,height:0},o?p:this._transformedRect(p,l)}};return yy.Container=n,e.Factory.addComponentsGetterSetter(n,"clip",["x","y","width","height"]),e.Factory.addGetterSetter(n,"clipX",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipY",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipWidth",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipHeight",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipFunc"),yy}var Kk={},Kd={},cF;function fH(){if(cF)return Kd;cF=1,Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.getCapturedShape=n,Kd.createEvent=s,Kd.hasPointerCapture=a,Kd.setPointerCapture=i,Kd.releaseCapture=o;const e=Zr(),t=new Map,r=e.Konva._global.PointerEvent!==void 0;function n(l){return t.get(l)}function s(l){return{evt:l,pointerId:l.pointerId}}function a(l,u){return t.get(l)===u}function i(l,u){o(l),u.getStage()&&(t.set(l,u),r&&u._fire("gotpointercapture",s(new PointerEvent("gotpointercapture"))))}function o(l,u){const d=t.get(l);if(!d)return;const f=d.getStage();f&&f.content,t.delete(l),r&&d._fire("lostpointercapture",s(new PointerEvent("lostpointercapture")))}return Kd}var uF;function gse(){return uF||(uF=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=Ds(),r=an(),n=L2(),s=Zr(),a=M2(),i=n5(),o=Zr(),l=fH(),u="Stage",d="string",f="px",g="mouseout",p="mouseleave",x="mouseover",y="mouseenter",v="mousemove",T="mousedown",_="mouseup",b="pointermove",E="pointerdown",k="pointerup",A="pointercancel",P="lostpointercapture",j="pointerout",O="pointerleave",R="pointerover",M="pointerenter",G="contextmenu",K="touchstart",re="touchend",Y="touchmove",ee="touchcancel",B="wheel",z=5,I=[[y,"_pointerenter"],[T,"_pointerdown"],[v,"_pointermove"],[_,"_pointerup"],[p,"_pointerleave"],[K,"_pointerdown"],[Y,"_pointermove"],[re,"_pointerup"],[ee,"_pointercancel"],[x,"_pointerover"],[B,"_wheel"],[G,"_contextmenu"],[E,"_pointerdown"],[b,"_pointermove"],[k,"_pointerup"],[A,"_pointercancel"],[O,"_pointerleave"],[P,"_lostpointercapture"]],W={mouse:{[j]:g,[O]:p,[R]:x,[M]:y,[b]:v,[E]:T,[k]:_,[A]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[j]:"touchout",[O]:"touchleave",[R]:"touchover",[M]:"touchenter",[b]:Y,[E]:K,[k]:re,[A]:ee,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[j]:j,[O]:O,[R]:R,[M]:M,[b]:b,[E]:E,[k]:k,[A]:A,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},V=ne=>ne.indexOf("pointer")>=0?"pointer":ne.indexOf("touch")>=0?"touch":"mouse",L=ne=>{const Z=V(ne);if(Z==="pointer")return s.Konva.pointerEventsEnabled&&W.pointer;if(Z==="touch")return W.touch;if(Z==="mouse")return W.mouse};function H(ne={}){return(ne.clipFunc||ne.clipWidth||ne.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),ne}const J="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class Q extends n.Container{constructor(Z){super(H(Z)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{H(this.attrs)}),this._checkVisibility()}_validateAdd(Z){const se=Z.getType()==="Layer",ce=Z.getType()==="FastLayer";se||ce||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const Z=this.visible()?"":"none";this.content.style.display=Z}setContainer(Z){if(typeof Z===d){let se;if(Z.charAt(0)==="."){const ce=Z.slice(1);Z=document.getElementsByClassName(ce)[0]}else Z.charAt(0)!=="#"?se=Z:se=Z.slice(1),Z=document.getElementById(se);if(!Z)throw"Can not find container in document with id "+se}return this._setAttr("container",Z),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),Z.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const Z=this.children,se=Z.length;for(let ce=0;ce<se;ce++)Z[ce].clear();return this}clone(Z){return Z||(Z={}),Z.container=typeof document<"u"&&document.createElement("div"),n.Container.prototype.clone.call(this,Z)}destroy(){super.destroy();const Z=this.content;Z&&t.Util._isInDocument(Z)&&this.container().removeChild(Z);const se=e.stages.indexOf(this);return se>-1&&e.stages.splice(se,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const Z=this._pointerPositions[0]||this._changedPointerPositions[0];return Z?{x:Z.x,y:Z.y}:(t.Util.warn(J),null)}_getPointerById(Z){return this._pointerPositions.find(se=>se.id===Z)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(Z){Z=Z||{},Z.x=Z.x||0,Z.y=Z.y||0,Z.width=Z.width||this.width(),Z.height=Z.height||this.height();const se=new a.SceneCanvas({width:Z.width,height:Z.height,pixelRatio:Z.pixelRatio||1}),ce=se.getContext()._context,he=this.children;return(Z.x||Z.y)&&ce.translate(-1*Z.x,-1*Z.y),he.forEach(function(Ee){if(!Ee.isVisible())return;const ie=Ee._toKonvaCanvas(Z);ce.drawImage(ie._canvas,Z.x,Z.y,ie.getWidth()/ie.getPixelRatio(),ie.getHeight()/ie.getPixelRatio())}),se}getIntersection(Z){if(!Z)return null;const se=this.children,ce=se.length,he=ce-1;for(let Ee=he;Ee>=0;Ee--){const ie=se[Ee].getIntersection(Z);if(ie)return ie}return null}_resizeDOM(){const Z=this.width(),se=this.height();this.content&&(this.content.style.width=Z+f,this.content.style.height=se+f),this.bufferCanvas.setSize(Z,se),this.bufferHitCanvas.setSize(Z,se),this.children.forEach(ce=>{ce.setSize({width:Z,height:se}),ce.draw()})}add(Z,...se){if(arguments.length>1){for(let he=0;he<arguments.length;he++)this.add(arguments[he]);return this}super.add(Z);const ce=this.children.length;return ce>z&&t.Util.warn("The stage has "+ce+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),Z.setSize({width:this.width(),height:this.height()}),Z.draw(),s.Konva.isBrowser&&this.content.appendChild(Z.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(Z){return l.hasPointerCapture(Z,this)}setPointerCapture(Z){l.setPointerCapture(Z,this)}releaseCapture(Z){l.releaseCapture(Z,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&I.forEach(([Z,se])=>{this.content.addEventListener(Z,ce=>{this[se](ce)},{passive:!1})})}_pointerenter(Z){this.setPointersPositions(Z);const se=L(Z.type);se&&this._fire(se.pointerenter,{evt:Z,target:this,currentTarget:this})}_pointerover(Z){this.setPointersPositions(Z);const se=L(Z.type);se&&this._fire(se.pointerover,{evt:Z,target:this,currentTarget:this})}_getTargetShape(Z){let se=this[Z+"targetShape"];return se&&!se.getStage()&&(se=null),se}_pointerleave(Z){const se=L(Z.type),ce=V(Z.type);if(!se)return;this.setPointersPositions(Z);const he=this._getTargetShape(ce),Ee=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;he&&Ee?(he._fireAndBubble(se.pointerout,{evt:Z}),he._fireAndBubble(se.pointerleave,{evt:Z}),this._fire(se.pointerleave,{evt:Z,target:this,currentTarget:this}),this[ce+"targetShape"]=null):Ee&&(this._fire(se.pointerleave,{evt:Z,target:this,currentTarget:this}),this._fire(se.pointerout,{evt:Z,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(Z){const se=L(Z.type),ce=V(Z.type);if(!se)return;this.setPointersPositions(Z);let he=!1;this._changedPointerPositions.forEach(Ee=>{const ie=this.getIntersection(Ee);if(i.DD.justDragged=!1,s.Konva["_"+ce+"ListenClick"]=!0,!ie||!ie.isListening()){this[ce+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&ie.setPointerCapture(Ee.id),this[ce+"ClickStartShape"]=ie,ie._fireAndBubble(se.pointerdown,{evt:Z,pointerId:Ee.id}),he=!0;const me=Z.type.indexOf("touch")>=0;ie.preventDefault()&&Z.cancelable&&me&&Z.preventDefault()}),he||this._fire(se.pointerdown,{evt:Z,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(Z){const se=L(Z.type),ce=V(Z.type);if(!se||(s.Konva.isDragging()&&i.DD.node.preventDefault()&&Z.cancelable&&Z.preventDefault(),this.setPointersPositions(Z),!(!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled)))return;const Ee={};let ie=!1;const me=this._getTargetShape(ce);this._changedPointerPositions.forEach(Ne=>{const Oe=l.getCapturedShape(Ne.id)||this.getIntersection(Ne),Re=Ne.id,ze={evt:Z,pointerId:Re},Nt=me!==Oe;if(Nt&&me&&(me._fireAndBubble(se.pointerout,{...ze},Oe),me._fireAndBubble(se.pointerleave,{...ze},Oe)),Oe){if(Ee[Oe._id])return;Ee[Oe._id]=!0}Oe&&Oe.isListening()?(ie=!0,Nt&&(Oe._fireAndBubble(se.pointerover,{...ze},me),Oe._fireAndBubble(se.pointerenter,{...ze},me),this[ce+"targetShape"]=Oe),Oe._fireAndBubble(se.pointermove,{...ze})):me&&(this._fire(se.pointerover,{evt:Z,target:this,currentTarget:this,pointerId:Re}),this[ce+"targetShape"]=null)}),ie||this._fire(se.pointermove,{evt:Z,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(Z){const se=L(Z.type),ce=V(Z.type);if(!se)return;this.setPointersPositions(Z);const he=this[ce+"ClickStartShape"],Ee=this[ce+"ClickEndShape"],ie={};let me=!1;this._changedPointerPositions.forEach(Ne=>{const Oe=l.getCapturedShape(Ne.id)||this.getIntersection(Ne);if(Oe){if(Oe.releaseCapture(Ne.id),ie[Oe._id])return;ie[Oe._id]=!0}const Re=Ne.id,ze={evt:Z,pointerId:Re};let Nt=!1;s.Konva["_"+ce+"InDblClickWindow"]?(Nt=!0,clearTimeout(this[ce+"DblTimeout"])):i.DD.justDragged||(s.Konva["_"+ce+"InDblClickWindow"]=!0,clearTimeout(this[ce+"DblTimeout"])),this[ce+"DblTimeout"]=setTimeout(function(){s.Konva["_"+ce+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),Oe&&Oe.isListening()?(me=!0,this[ce+"ClickEndShape"]=Oe,Oe._fireAndBubble(se.pointerup,{...ze}),s.Konva["_"+ce+"ListenClick"]&&he&&he===Oe&&(Oe._fireAndBubble(se.pointerclick,{...ze}),Nt&&Ee&&Ee===Oe&&Oe._fireAndBubble(se.pointerdblclick,{...ze}))):(this[ce+"ClickEndShape"]=null,s.Konva["_"+ce+"ListenClick"]&&this._fire(se.pointerclick,{evt:Z,target:this,currentTarget:this,pointerId:Re}),Nt&&this._fire(se.pointerdblclick,{evt:Z,target:this,currentTarget:this,pointerId:Re}))}),me||this._fire(se.pointerup,{evt:Z,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+ce+"ListenClick"]=!1,Z.cancelable&&ce!=="touch"&&ce!=="pointer"&&Z.preventDefault()}_contextmenu(Z){this.setPointersPositions(Z);const se=this.getIntersection(this.getPointerPosition());se&&se.isListening()?se._fireAndBubble(G,{evt:Z}):this._fire(G,{evt:Z,target:this,currentTarget:this})}_wheel(Z){this.setPointersPositions(Z);const se=this.getIntersection(this.getPointerPosition());se&&se.isListening()?se._fireAndBubble(B,{evt:Z}):this._fire(B,{evt:Z,target:this,currentTarget:this})}_pointercancel(Z){this.setPointersPositions(Z);const se=l.getCapturedShape(Z.pointerId)||this.getIntersection(this.getPointerPosition());se&&se._fireAndBubble(k,l.createEvent(Z)),l.releaseCapture(Z.pointerId)}_lostpointercapture(Z){l.releaseCapture(Z.pointerId)}setPointersPositions(Z){const se=this._getContentPosition();let ce=null,he=null;Z=Z||window.event,Z.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(Z.touches,Ee=>{this._pointerPositions.push({id:Ee.identifier,x:(Ee.clientX-se.left)/se.scaleX,y:(Ee.clientY-se.top)/se.scaleY})}),Array.prototype.forEach.call(Z.changedTouches||Z.touches,Ee=>{this._changedPointerPositions.push({id:Ee.identifier,x:(Ee.clientX-se.left)/se.scaleX,y:(Ee.clientY-se.top)/se.scaleY})})):(ce=(Z.clientX-se.left)/se.scaleX,he=(Z.clientY-se.top)/se.scaleY,this.pointerPos={x:ce,y:he},this._pointerPositions=[{x:ce,y:he,id:t.Util._getFirstPointerId(Z)}],this._changedPointerPositions=[{x:ce,y:he,id:t.Util._getFirstPointerId(Z)}])}_setPointerPosition(Z){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(Z)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const Z=this.content.getBoundingClientRect();return{top:Z.top,left:Z.left,scaleX:Z.width/this.content.clientWidth||1,scaleY:Z.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new a.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new a.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!s.Konva.isBrowser)return;const Z=this.container();if(!Z)throw"Stage has no container. A container is required.";Z.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),Z.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(Z){Z.batchDraw()}),this}}e.Stage=Q,Q.prototype.nodeType=u,(0,o._registerNode)(Q),r.Factory.addGetterSetter(Q,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(ne=>{ne.batchDraw()})})})(Kk)),Kk}var xy={},Xk={},dF;function $a(){return dF||(dF=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=Zr(),r=Ds(),n=an(),s=qs(),a=ln(),i=Zr(),o=fH(),l="hasShadow",u="shadowRGBA",d="patternImage",f="linearGradient",g="radialGradient";let p;function x(){return p||(p=r.Util.createCanvasElement().getContext("2d"),p)}e.shapes={};function y(O){const R=this.attrs.fillRule;R?O.fill(R):O.fill()}function v(O){O.stroke()}function T(O){const R=this.attrs.fillRule;R?O.fill(R):O.fill()}function _(O){O.stroke()}function b(){this._clearCache(l)}function E(){this._clearCache(u)}function k(){this._clearCache(d)}function A(){this._clearCache(f)}function P(){this._clearCache(g)}class j extends s.Node{constructor(R){super(R);let M;for(;M=r.Util.getRandomColor(),!(M&&!(M in e.shapes)););this.colorKey=M,e.shapes[M]=this}getContext(){return r.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return r.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const M=x().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(M&&M.setTransform){const G=new r.Transform;G.translate(this.fillPatternX(),this.fillPatternY()),G.rotate(t.Konva.getAngle(this.fillPatternRotation())),G.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),G.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const K=G.getMatrix(),re=typeof DOMMatrix>"u"?{a:K[0],b:K[1],c:K[2],d:K[3],e:K[4],f:K[5]}:new DOMMatrix(K);M.setTransform(re)}return M}}_getLinearGradient(){return this._getCache(f,this.__getLinearGradient)}__getLinearGradient(){const R=this.fillLinearGradientColorStops();if(R){const M=x(),G=this.fillLinearGradientStartPoint(),K=this.fillLinearGradientEndPoint(),re=M.createLinearGradient(G.x,G.y,K.x,K.y);for(let Y=0;Y<R.length;Y+=2)re.addColorStop(R[Y],R[Y+1]);return re}}_getRadialGradient(){return this._getCache(g,this.__getRadialGradient)}__getRadialGradient(){const R=this.fillRadialGradientColorStops();if(R){const M=x(),G=this.fillRadialGradientStartPoint(),K=this.fillRadialGradientEndPoint(),re=M.createRadialGradient(G.x,G.y,this.fillRadialGradientStartRadius(),K.x,K.y,this.fillRadialGradientEndRadius());for(let Y=0;Y<R.length;Y+=2)re.addColorStop(R[Y],R[Y+1]);return re}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const R=r.Util.colorToRGBA(this.shadowColor());if(R)return"rgba("+R.r+","+R.g+","+R.b+","+R.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const R=this.hitStrokeWidth();return R==="auto"?this.hasStroke():this.strokeEnabled()&&!!R}intersects(R){const M=this.getStage();if(!M)return!1;const G=M.bufferHitCanvas;return G.getContext().clear(),this.drawHit(G,void 0,!0),G.context.getImageData(Math.round(R.x),Math.round(R.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(R){var M;if(!((M=this.attrs.perfectDrawEnabled)!==null&&M!==void 0?M:!0))return!1;const K=R||this.hasFill(),re=this.hasStroke(),Y=this.getAbsoluteOpacity()!==1;if(K&&re&&Y)return!0;const ee=this.hasShadow(),B=this.shadowForStrokeEnabled();return!!(K&&re&&ee&&B)}setStrokeHitEnabled(R){r.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),R?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const R=this.size();return{x:this._centroid?-R.width/2:0,y:this._centroid?-R.height/2:0,width:R.width,height:R.height}}getClientRect(R={}){let M=!1,G=this.getParent();for(;G;){if(G.isCached()){M=!0;break}G=G.getParent()}const K=R.skipTransform,re=R.relativeTo||M&&this.getStage()||void 0,Y=this.getSelfRect(),B=!R.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,z=Y.width+B,I=Y.height+B,W=!R.skipShadow&&this.hasShadow(),V=W?this.shadowOffsetX():0,L=W?this.shadowOffsetY():0,H=z+Math.abs(V),J=I+Math.abs(L),Q=W&&this.shadowBlur()||0,ne=H+Q*2,Z=J+Q*2,se={width:ne,height:Z,x:-(B/2+Q)+Math.min(V,0)+Y.x,y:-(B/2+Q)+Math.min(L,0)+Y.y};return K?se:this._transformedRect(se,re)}drawScene(R,M,G){const K=this.getLayer(),re=R||K.getCanvas(),Y=re.getContext(),ee=this._getCanvasCache(),B=this.getSceneFunc(),z=this.hasShadow();let I;const W=M===this;if(!this.isVisible()&&!W)return this;if(ee){Y.save();const V=this.getAbsoluteTransform(M).getMatrix();return Y.transform(V[0],V[1],V[2],V[3],V[4],V[5]),this._drawCachedSceneCanvas(Y),Y.restore(),this}if(!B)return this;if(Y.save(),this._useBufferCanvas()){I=this.getStage();const V=G||I.bufferCanvas,L=V.getContext();L.clear(),L.save(),L._applyLineJoin(this);const H=this.getAbsoluteTransform(M).getMatrix();L.transform(H[0],H[1],H[2],H[3],H[4],H[5]),B.call(this,L,this),L.restore();const J=V.pixelRatio;z&&Y._applyShadow(this),Y._applyOpacity(this),Y._applyGlobalCompositeOperation(this),Y.drawImage(V._canvas,V.x||0,V.y||0,V.width/J,V.height/J)}else{if(Y._applyLineJoin(this),!W){const V=this.getAbsoluteTransform(M).getMatrix();Y.transform(V[0],V[1],V[2],V[3],V[4],V[5]),Y._applyOpacity(this),Y._applyGlobalCompositeOperation(this)}z&&Y._applyShadow(this),B.call(this,Y,this)}return Y.restore(),this}drawHit(R,M,G=!1){if(!this.shouldDrawHit(M,G))return this;const K=this.getLayer(),re=R||K.hitCanvas,Y=re&&re.getContext(),ee=this.hitFunc()||this.sceneFunc(),B=this._getCanvasCache(),z=B&&B.hit;if(this.colorKey||r.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),z){Y.save();const W=this.getAbsoluteTransform(M).getMatrix();return Y.transform(W[0],W[1],W[2],W[3],W[4],W[5]),this._drawCachedHitCanvas(Y),Y.restore(),this}if(!ee)return this;if(Y.save(),Y._applyLineJoin(this),!(this===M)){const W=this.getAbsoluteTransform(M).getMatrix();Y.transform(W[0],W[1],W[2],W[3],W[4],W[5])}return ee.call(this,Y,this),Y.restore(),this}drawHitFromCache(R=0){const M=this._getCanvasCache(),G=this._getCachedSceneCanvas(),K=M.hit,re=K.getContext(),Y=K.getWidth(),ee=K.getHeight();re.clear(),re.drawImage(G._canvas,0,0,Y,ee);try{const B=re.getImageData(0,0,Y,ee),z=B.data,I=z.length,W=r.Util._hexToRgb(this.colorKey);for(let V=0;V<I;V+=4)z[V+3]>R?(z[V]=W.r,z[V+1]=W.g,z[V+2]=W.b,z[V+3]=255):z[V+3]=0;re.putImageData(B,0,0)}catch(B){r.Util.error("Unable to draw hit graph from cached scene canvas. "+B.message)}return this}hasPointerCapture(R){return o.hasPointerCapture(R,this)}setPointerCapture(R){o.setPointerCapture(R,this)}releaseCapture(R){o.releaseCapture(R,this)}}e.Shape=j,j.prototype._fillFunc=y,j.prototype._strokeFunc=v,j.prototype._fillFuncHit=T,j.prototype._strokeFuncHit=_,j.prototype._centroid=!1,j.prototype.nodeType="Shape",(0,i._registerNode)(j),j.prototype.eventListeners={},j.prototype.on.call(j.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",b),j.prototype.on.call(j.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",E),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",k),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",A),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",P),n.Factory.addGetterSetter(j,"stroke",void 0,(0,a.getStringOrGradientValidator)()),n.Factory.addGetterSetter(j,"strokeWidth",2,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(j,"hitStrokeWidth","auto",(0,a.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(j,"strokeHitEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(j,"perfectDrawEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(j,"shadowForStrokeEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(j,"lineJoin"),n.Factory.addGetterSetter(j,"lineCap"),n.Factory.addGetterSetter(j,"sceneFunc"),n.Factory.addGetterSetter(j,"hitFunc"),n.Factory.addGetterSetter(j,"dash"),n.Factory.addGetterSetter(j,"dashOffset",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"shadowColor",void 0,(0,a.getStringValidator)()),n.Factory.addGetterSetter(j,"shadowBlur",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"shadowOpacity",1,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(j,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(j,"shadowOffsetX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"shadowOffsetY",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternImage"),n.Factory.addGetterSetter(j,"fill",void 0,(0,a.getStringOrGradientValidator)()),n.Factory.addGetterSetter(j,"fillPatternX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternY",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(j,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(j,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(j,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(j,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(j,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(j,"fillEnabled",!0),n.Factory.addGetterSetter(j,"strokeEnabled",!0),n.Factory.addGetterSetter(j,"shadowEnabled",!0),n.Factory.addGetterSetter(j,"dashEnabled",!0),n.Factory.addGetterSetter(j,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(j,"fillPriority","color"),n.Factory.addComponentsGetterSetter(j,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(j,"fillPatternOffsetX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternOffsetY",0,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(j,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(j,"fillPatternScaleX",1,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternScaleY",1,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(j,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(j,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(j,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(j,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(j,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(j,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(j,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(j,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(j,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(j,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(j,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(j,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(j,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(j,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(j,"fillPatternRotation",0),n.Factory.addGetterSetter(j,"fillRule",void 0,(0,a.getStringValidator)()),n.Factory.backCompat(j,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Xk)),Xk}var fF;function hH(){if(fF)return xy;fF=1,Object.defineProperty(xy,"__esModule",{value:!0}),xy.Layer=void 0;const e=Ds(),t=L2(),r=qs(),n=an(),s=M2(),a=ln(),i=$a(),o=Zr(),l="#",u="beforeDraw",d="draw",f=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],g=f.length;class p extends t.Container{constructor(y){super(y),this.canvas=new s.SceneCanvas,this.hitCanvas=new s.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(y){return this.getContext().clear(y),this.getHitCanvas().getContext().clear(y),this}setZIndex(y){super.setZIndex(y);const v=this.getStage();return v&&v.content&&(v.content.removeChild(this.getNativeCanvasElement()),y<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[y+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){r.Node.prototype.moveToTop.call(this);const y=this.getStage();return y&&y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!r.Node.prototype.moveUp.call(this))return!1;const v=this.getStage();return!v||!v.content?!1:(v.content.removeChild(this.getNativeCanvasElement()),this.index<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[this.index+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(r.Node.prototype.moveDown.call(this)){const y=this.getStage();if(y){const v=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),v[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(r.Node.prototype.moveToBottom.call(this)){const y=this.getStage();if(y){const v=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),v[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const y=this.getNativeCanvasElement();return r.Node.prototype.remove.call(this),y&&y.parentNode&&e.Util._isInDocument(y)&&y.parentNode.removeChild(y),this}getStage(){return this.parent}setSize({width:y,height:v}){return this.canvas.setSize(y,v),this.hitCanvas.setSize(y,v),this._setSmoothEnabled(),this}_validateAdd(y){const v=y.getType();v!=="Group"&&v!=="Shape"&&e.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(y){return y=y||{},y.width=y.width||this.getWidth(),y.height=y.height||this.getHeight(),y.x=y.x!==void 0?y.x:this.x(),y.y=y.y!==void 0?y.y:this.y(),r.Node.prototype._toKonvaCanvas.call(this,y)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){e.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){e.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,e.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(y){if(!this.isListening()||!this.isVisible())return null;let v=1,T=!1;for(;;){for(let _=0;_<g;_++){const b=f[_],E=this._getIntersection({x:y.x+b.x*v,y:y.y+b.y*v}),k=E.shape;if(k)return k;if(T=!!E.antialiased,!E.antialiased)break}if(T)v+=1;else return null}}_getIntersection(y){const v=this.hitCanvas.pixelRatio,T=this.hitCanvas.context.getImageData(Math.round(y.x*v),Math.round(y.y*v),1,1).data,_=T[3];if(_===255){const b=e.Util._rgbToHex(T[0],T[1],T[2]),E=i.shapes[l+b];return E?{shape:E}:{antialiased:!0}}else if(_>0)return{antialiased:!0};return{}}drawScene(y,v,T){const _=this.getLayer(),b=y||_&&_.getCanvas();return this._fire(u,{node:this}),this.clearBeforeDraw()&&b.getContext().clear(),t.Container.prototype.drawScene.call(this,b,v,T),this._fire(d,{node:this}),this}drawHit(y,v){const T=this.getLayer(),_=y||T&&T.hitCanvas;return T&&T.clearBeforeDraw()&&T.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,_,v),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(y){e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(y)}getHitGraphEnabled(y){return e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const y=this.parent;!!this.hitCanvas._canvas.parentNode?y.content.removeChild(this.hitCanvas._canvas):y.content.appendChild(this.hitCanvas._canvas)}destroy(){return e.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return xy.Layer=p,p.prototype.nodeType="Layer",(0,o._registerNode)(p),n.Factory.addGetterSetter(p,"imageSmoothingEnabled",!0),n.Factory.addGetterSetter(p,"clearBeforeDraw",!0),n.Factory.addGetterSetter(p,"hitGraphEnabled",!0,(0,a.getBooleanValidator)()),xy}var vy={},hF;function pse(){if(hF)return vy;hF=1,Object.defineProperty(vy,"__esModule",{value:!0}),vy.FastLayer=void 0;const e=Ds(),t=hH(),r=Zr();class n extends t.Layer{constructor(a){super(a),this.listening(!1),e.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}return vy.FastLayer=n,n.prototype.nodeType="FastLayer",(0,r._registerNode)(n),vy}var wy={},gF;function s5(){if(gF)return wy;gF=1,Object.defineProperty(wy,"__esModule",{value:!0}),wy.Group=void 0;const e=Ds(),t=L2(),r=Zr();class n extends t.Container{_validateAdd(a){const i=a.getType();i!=="Group"&&i!=="Shape"&&e.Util.throw("You may only add groups and shapes to groups.")}}return wy.Group=n,n.prototype.nodeType="Group",(0,r._registerNode)(n),wy}var by={},pF;function a5(){if(pF)return by;pF=1,Object.defineProperty(by,"__esModule",{value:!0}),by.Animation=void 0;const e=Zr(),t=Ds(),r=(function(){return e.glob.performance&&e.glob.performance.now?function(){return e.glob.performance.now()}:function(){return new Date().getTime()}})();let n=class Rg{constructor(a,i){this.id=Rg.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:r(),frameRate:0},this.func=a,this.setLayers(i)}setLayers(a){let i=[];return a&&(i=Array.isArray(a)?a:[a]),this.layers=i,this}getLayers(){return this.layers}addLayer(a){const i=this.layers,o=i.length;for(let l=0;l<o;l++)if(i[l]._id===a._id)return!1;return this.layers.push(a),!0}isRunning(){const i=Rg.animations,o=i.length;for(let l=0;l<o;l++)if(i[l].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=r(),Rg._addAnimation(this),this}stop(){return Rg._removeAnimation(this),this}_updateFrameObject(a){this.frame.timeDiff=a-this.frame.lastTime,this.frame.lastTime=a,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(a){this.animations.push(a),this._handleAnimation()}static _removeAnimation(a){const i=a.id,o=this.animations,l=o.length;for(let u=0;u<l;u++)if(o[u].id===i){this.animations.splice(u,1);break}}static _runFrames(){const a={},i=this.animations;for(let o=0;o<i.length;o++){const l=i[o],u=l.layers,d=l.func;l._updateFrameObject(r());const f=u.length;let g;if(d?g=d.call(l,l.frame)!==!1:g=!0,!!g)for(let p=0;p<f;p++){const x=u[p];x._id!==void 0&&(a[x._id]=x)}}for(const o in a)a.hasOwnProperty(o)&&a[o].batchDraw()}static _animationLoop(){const a=Rg;a.animations.length?(a._runFrames(),t.Util.requestAnimFrame(a._animationLoop)):a.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return by.Animation=n,n.animations=[],n.animIdCounter=0,n.animRunning=!1,by}var Yk={},mF;function mse(){return mF||(mF=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=Ds(),r=a5(),n=qs(),s=Zr(),a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},i=1,o=2,l=3,u=["fill","stroke","shadowColor"];let d=0;class f{constructor(x,y,v,T,_,b,E){this.prop=x,this.propFunc=y,this.begin=T,this._pos=T,this.duration=b,this._change=0,this.prevPos=0,this.yoyo=E,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=_-this.begin,this.pause()}fire(x){const y=this[x];y&&y()}setTime(x){x>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():x<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=x,this.update())}getTime(){return this._time}setPosition(x){this.prevPos=this._pos,this.propFunc(x),this._pos=x}getPosition(x){return x===void 0&&(x=this._time),this.func(x,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(x){this.pause(),this._time=x,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const x=this.getTimer()-this._startTime;this.state===o?this.setTime(x):this.state===l&&this.setTime(this.duration-x)}pause(){this.state=i,this.fire("onPause")}getTimer(){return new Date().getTime()}}class g{constructor(x){const y=this,v=x.node,T=v._id,_=x.easing||e.Easings.Linear,b=!!x.yoyo;let E,k;typeof x.duration>"u"?E=.3:x.duration===0?E=.001:E=x.duration,this.node=v,this._id=d++;const A=v.getLayer()||(v instanceof s.Konva.Stage?v.getLayers():null);A||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new r.Animation(function(){y.tween.onEnterFrame()},A),this.tween=new f(k,function(P){y._tweenFunc(P)},_,0,1,E*1e3,b),this._addListeners(),g.attrs[T]||(g.attrs[T]={}),g.attrs[T][this._id]||(g.attrs[T][this._id]={}),g.tweens[T]||(g.tweens[T]={});for(k in x)a[k]===void 0&&this._addAttr(k,x[k]);this.reset(),this.onFinish=x.onFinish,this.onReset=x.onReset,this.onUpdate=x.onUpdate}_addAttr(x,y){const v=this.node,T=v._id;let _,b,E,k,A;const P=g.tweens[T][x];P&&delete g.attrs[T][P][x];let j=v.getAttr(x);if(t.Util._isArray(y))if(_=[],b=Math.max(y.length,j.length),x==="points"&&y.length!==j.length&&(y.length>j.length?(k=j,j=t.Util._prepareArrayForTween(j,y,v.closed())):(E=y,y=t.Util._prepareArrayForTween(y,j,v.closed()))),x.indexOf("fill")===0)for(let O=0;O<b;O++)if(O%2===0)_.push(y[O]-j[O]);else{const R=t.Util.colorToRGBA(j[O]);A=t.Util.colorToRGBA(y[O]),j[O]=R,_.push({r:A.r-R.r,g:A.g-R.g,b:A.b-R.b,a:A.a-R.a})}else for(let O=0;O<b;O++)_.push(y[O]-j[O]);else u.indexOf(x)!==-1?(j=t.Util.colorToRGBA(j),A=t.Util.colorToRGBA(y),_={r:A.r-j.r,g:A.g-j.g,b:A.b-j.b,a:A.a-j.a}):_=y-j;g.attrs[T][this._id][x]={start:j,diff:_,end:y,trueEnd:E,trueStart:k},g.tweens[T][x]=this._id}_tweenFunc(x){const y=this.node,v=g.attrs[y._id][this._id];let T,_,b,E,k,A,P,j;for(T in v){if(_=v[T],b=_.start,E=_.diff,j=_.end,t.Util._isArray(b))if(k=[],P=Math.max(b.length,j.length),T.indexOf("fill")===0)for(A=0;A<P;A++)A%2===0?k.push((b[A]||0)+E[A]*x):k.push("rgba("+Math.round(b[A].r+E[A].r*x)+","+Math.round(b[A].g+E[A].g*x)+","+Math.round(b[A].b+E[A].b*x)+","+(b[A].a+E[A].a*x)+")");else for(A=0;A<P;A++)k.push((b[A]||0)+E[A]*x);else u.indexOf(T)!==-1?k="rgba("+Math.round(b.r+E.r*x)+","+Math.round(b.g+E.g*x)+","+Math.round(b.b+E.b*x)+","+(b.a+E.a*x)+")":k=b+E*x;y.setAttr(T,k)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const x=this.node,y=g.attrs[x._id][this._id];y.points&&y.points.trueEnd&&x.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const x=this.node,y=g.attrs[x._id][this._id];y.points&&y.points.trueStart&&x.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(x){return this.tween.seek(x*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const x=this.node._id,y=this._id,v=g.tweens[x];this.pause(),this.anim&&this.anim.stop();for(const T in v)delete g.tweens[x][T];delete g.attrs[x][y],g.tweens[x]&&(Object.keys(g.tweens[x]).length===0&&delete g.tweens[x],Object.keys(g.attrs[x]).length===0&&delete g.attrs[x])}}e.Tween=g,g.attrs={},g.tweens={},n.Node.prototype.to=function(p){const x=p.onFinish;p.node=this,p.onFinish=function(){this.destroy(),x&&x()},new g(p).play()},e.Easings={BackEaseIn(p,x,y,v){return y*(p/=v)*p*((1.70158+1)*p-1.70158)+x},BackEaseOut(p,x,y,v){return y*((p=p/v-1)*p*((1.70158+1)*p+1.70158)+1)+x},BackEaseInOut(p,x,y,v){let T=1.70158;return(p/=v/2)<1?y/2*(p*p*(((T*=1.525)+1)*p-T))+x:y/2*((p-=2)*p*(((T*=1.525)+1)*p+T)+2)+x},ElasticEaseIn(p,x,y,v,T,_){let b=0;return p===0?x:(p/=v)===1?x+y:(_||(_=v*.3),!T||T<Math.abs(y)?(T=y,b=_/4):b=_/(2*Math.PI)*Math.asin(y/T),-(T*Math.pow(2,10*(p-=1))*Math.sin((p*v-b)*(2*Math.PI)/_))+x)},ElasticEaseOut(p,x,y,v,T,_){let b=0;return p===0?x:(p/=v)===1?x+y:(_||(_=v*.3),!T||T<Math.abs(y)?(T=y,b=_/4):b=_/(2*Math.PI)*Math.asin(y/T),T*Math.pow(2,-10*p)*Math.sin((p*v-b)*(2*Math.PI)/_)+y+x)},ElasticEaseInOut(p,x,y,v,T,_){let b=0;return p===0?x:(p/=v/2)===2?x+y:(_||(_=v*(.3*1.5)),!T||T<Math.abs(y)?(T=y,b=_/4):b=_/(2*Math.PI)*Math.asin(y/T),p<1?-.5*(T*Math.pow(2,10*(p-=1))*Math.sin((p*v-b)*(2*Math.PI)/_))+x:T*Math.pow(2,-10*(p-=1))*Math.sin((p*v-b)*(2*Math.PI)/_)*.5+y+x)},BounceEaseOut(p,x,y,v){return(p/=v)<1/2.75?y*(7.5625*p*p)+x:p<2/2.75?y*(7.5625*(p-=1.5/2.75)*p+.75)+x:p<2.5/2.75?y*(7.5625*(p-=2.25/2.75)*p+.9375)+x:y*(7.5625*(p-=2.625/2.75)*p+.984375)+x},BounceEaseIn(p,x,y,v){return y-e.Easings.BounceEaseOut(v-p,0,y,v)+x},BounceEaseInOut(p,x,y,v){return p<v/2?e.Easings.BounceEaseIn(p*2,0,y,v)*.5+x:e.Easings.BounceEaseOut(p*2-v,0,y,v)*.5+y*.5+x},EaseIn(p,x,y,v){return y*(p/=v)*p+x},EaseOut(p,x,y,v){return-y*(p/=v)*(p-2)+x},EaseInOut(p,x,y,v){return(p/=v/2)<1?y/2*p*p+x:-y/2*(--p*(p-2)-1)+x},StrongEaseIn(p,x,y,v){return y*(p/=v)*p*p*p*p+x},StrongEaseOut(p,x,y,v){return y*((p=p/v-1)*p*p*p*p+1)+x},StrongEaseInOut(p,x,y,v){return(p/=v/2)<1?y/2*p*p*p*p*p+x:y/2*((p-=2)*p*p*p*p+2)+x},Linear(p,x,y,v){return y*p/v+x}}})(Yk)),Yk}var yF;function iA(){return yF||(yF=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=Zr(),r=Ds(),n=qs(),s=L2(),a=gse(),i=hH(),o=pse(),l=s5(),u=n5(),d=$a(),f=a5(),g=mse(),p=dH(),x=M2();e.Konva=r.Util._assign(t.Konva,{Util:r.Util,Transform:r.Transform,Node:n.Node,Container:s.Container,Stage:a.Stage,stages:a.stages,Layer:i.Layer,FastLayer:o.FastLayer,Group:l.Group,DD:u.DD,Shape:d.Shape,shapes:d.shapes,Animation:f.Animation,Tween:g.Tween,Easings:g.Easings,Context:p.Context,Canvas:x.Canvas}),e.default=e.Konva})(zk)),zk}var _y={},xF;function yse(){if(xF)return _y;xF=1,Object.defineProperty(_y,"__esModule",{value:!0}),_y.Arc=void 0;const e=an(),t=$a(),r=Zr(),n=ln(),s=Zr();class a extends t.Shape{_sceneFunc(o){const l=r.Konva.getAngle(this.angle()),u=this.clockwise();o.beginPath(),o.arc(0,0,this.outerRadius(),0,l,u),o.arc(0,0,this.innerRadius(),l,0,!u),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}getSelfRect(){const o=this.innerRadius(),l=this.outerRadius(),u=this.clockwise(),d=r.Konva.getAngle(u?360-this.angle():this.angle()),f=Math.cos(Math.min(d,Math.PI)),g=1,p=Math.sin(Math.min(Math.max(Math.PI,d),3*Math.PI/2)),x=Math.sin(Math.min(d,Math.PI/2)),y=f*(f>0?o:l),v=g*l,T=p*(p>0?o:l),_=x*(x>0?l:o);return{x:y,y:u?-1*_:T,width:v-y,height:_-T}}}return _y.Arc=a,a.prototype._centroid=!0,a.prototype.className="Arc",a.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"angle",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clockwise",!1,(0,n.getBooleanValidator)()),_y}var Sy={},ky={},vF;function gH(){if(vF)return ky;vF=1,Object.defineProperty(ky,"__esModule",{value:!0}),ky.Line=void 0;const e=an(),t=Zr(),r=$a(),n=ln();function s(o,l,u,d,f,g,p){const x=Math.sqrt(Math.pow(u-o,2)+Math.pow(d-l,2)),y=Math.sqrt(Math.pow(f-u,2)+Math.pow(g-d,2)),v=p*x/(x+y),T=p*y/(x+y),_=u-v*(f-o),b=d-v*(g-l),E=u+T*(f-o),k=d+T*(g-l);return[_,b,E,k]}function a(o,l){const u=o.length,d=[];for(let f=2;f<u-2;f+=2){const g=s(o[f-2],o[f-1],o[f],o[f+1],o[f+2],o[f+3],l);isNaN(g[0])||(d.push(g[0]),d.push(g[1]),d.push(o[f]),d.push(o[f+1]),d.push(g[2]),d.push(g[3]))}return d}class i extends r.Shape{constructor(l){super(l),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(l){const u=this.points(),d=u.length,f=this.tension(),g=this.closed(),p=this.bezier();if(!d)return;let x=0;if(l.beginPath(),l.moveTo(u[0],u[1]),f!==0&&d>4){const y=this.getTensionPoints(),v=y.length;for(x=g?0:4,g||l.quadraticCurveTo(y[0],y[1],y[2],y[3]);x<v-2;)l.bezierCurveTo(y[x++],y[x++],y[x++],y[x++],y[x++],y[x++]);g||l.quadraticCurveTo(y[v-2],y[v-1],u[d-2],u[d-1])}else if(p)for(x=2;x<d;)l.bezierCurveTo(u[x++],u[x++],u[x++],u[x++],u[x++],u[x++]);else for(x=2;x<d;x+=2)l.lineTo(u[x],u[x+1]);g?(l.closePath(),l.fillStrokeShape(this)):l.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():a(this.points(),this.tension())}_getTensionPointsClosed(){const l=this.points(),u=l.length,d=this.tension(),f=s(l[u-2],l[u-1],l[0],l[1],l[2],l[3],d),g=s(l[u-4],l[u-3],l[u-2],l[u-1],l[0],l[1],d),p=a(l,d);return[f[2],f[3]].concat(p).concat([g[0],g[1],l[u-2],l[u-1],g[2],g[3],f[0],f[1],l[0],l[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let l=this.points();if(l.length<4)return{x:l[0]||0,y:l[1]||0,width:0,height:0};this.tension()!==0?l=[l[0],l[1],...this._getTensionPoints(),l[l.length-2],l[l.length-1]]:l=this.points();let u=l[0],d=l[0],f=l[1],g=l[1],p,x;for(let y=0;y<l.length/2;y++)p=l[y*2],x=l[y*2+1],u=Math.min(u,p),d=Math.max(d,p),f=Math.min(f,x),g=Math.max(g,x);return{x:u,y:f,width:d-u,height:g-f}}}return ky.Line=i,i.prototype.className="Line",i.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(i),e.Factory.addGetterSetter(i,"closed",!1),e.Factory.addGetterSetter(i,"bezier",!1),e.Factory.addGetterSetter(i,"tension",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"points",[],(0,n.getNumberArrayValidator)()),ky}var Ty={},Jk={},wF;function xse(){return wF||(wF=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(i,o,l)=>{let u,d;const g=l/2;u=0;for(let p=0;p<20;p++)d=g*e.tValues[20][p]+g,u+=e.cValues[20][p]*n(i,o,d);return g*u};e.getCubicArcLength=t;const r=(i,o,l)=>{l===void 0&&(l=1);const u=i[0]-2*i[1]+i[2],d=o[0]-2*o[1]+o[2],f=2*i[1]-2*i[0],g=2*o[1]-2*o[0],p=4*(u*u+d*d),x=4*(u*f+d*g),y=f*f+g*g;if(p===0)return l*Math.sqrt(Math.pow(i[2]-i[0],2)+Math.pow(o[2]-o[0],2));const v=x/(2*p),T=y/p,_=l+v,b=T-v*v,E=_*_+b>0?Math.sqrt(_*_+b):0,k=v*v+b>0?Math.sqrt(v*v+b):0,A=v+Math.sqrt(v*v+b)!==0?b*Math.log(Math.abs((_+E)/(v+k))):0;return Math.sqrt(p)/2*(_*E-v*k+A)};e.getQuadraticArcLength=r;function n(i,o,l){const u=s(1,l,i),d=s(1,l,o),f=u*u+d*d;return Math.sqrt(f)}const s=(i,o,l)=>{const u=l.length-1;let d,f;if(u===0)return 0;if(i===0){f=0;for(let g=0;g<=u;g++)f+=e.binomialCoefficients[u][g]*Math.pow(1-o,u-g)*Math.pow(o,g)*l[g];return f}else{d=new Array(u);for(let g=0;g<u;g++)d[g]=u*(l[g+1]-l[g]);return s(i-1,o,d)}},a=(i,o,l)=>{let u=1,d=i/o,f=(i-l(d))/o,g=0;for(;u>.001;){const p=l(d+f),x=Math.abs(i-p)/o;if(x<u)u=x,d+=f;else{const y=l(d-f),v=Math.abs(i-y)/o;v<u?(u=v,d-=f):f/=2}if(g++,g>500)break}return d};e.t2length=a})(Jk)),Jk}var bF;function i5(){if(bF)return Ty;bF=1,Object.defineProperty(Ty,"__esModule",{value:!0}),Ty.Path=void 0;const e=an(),t=Zr(),r=$a(),n=xse();class s extends r.Shape{constructor(i){super(i),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=s.parsePathData(this.data()),this.pathLength=s.getPathLength(this.dataArray)}_sceneFunc(i){const o=this.dataArray;i.beginPath();let l=!1;for(let u=0;u<o.length;u++){const d=o[u].command,f=o[u].points;switch(d){case"L":i.lineTo(f[0],f[1]);break;case"M":i.moveTo(f[0],f[1]);break;case"C":i.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":i.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":const g=f[0],p=f[1],x=f[2],y=f[3],v=f[4],T=f[5],_=f[6],b=f[7],E=x>y?x:y,k=x>y?1:x/y,A=x>y?y/x:1;i.translate(g,p),i.rotate(_),i.scale(k,A),i.arc(0,0,E,v,v+T,1-b),i.scale(1/k,1/A),i.rotate(-_),i.translate(-g,-p);break;case"z":l=!0,i.closePath();break}}!l&&!this.hasFill()?i.strokeShape(this):i.fillStrokeShape(this)}getSelfRect(){let i=[];this.dataArray.forEach(function(p){if(p.command==="A"){const x=p.points[4],y=p.points[5],v=p.points[4]+y;let T=Math.PI/180;if(Math.abs(x-v)<T&&(T=Math.abs(x-v)),y<0)for(let _=x-T;_>v;_-=T){const b=s.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],_,0);i.push(b.x,b.y)}else for(let _=x+T;_<v;_+=T){const b=s.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],_,0);i.push(b.x,b.y)}}else if(p.command==="C")for(let x=0;x<=1;x+=.01){const y=s.getPointOnCubicBezier(x,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);i.push(y.x,y.y)}else i=i.concat(p.points)});let o=i[0],l=i[0],u=i[1],d=i[1],f,g;for(let p=0;p<i.length/2;p++)f=i[p*2],g=i[p*2+1],isNaN(f)||(o=Math.min(o,f),l=Math.max(l,f)),isNaN(g)||(u=Math.min(u,g),d=Math.max(d,g));return{x:o,y:u,width:l-o,height:d-u}}getLength(){return this.pathLength}getPointAtLength(i){return s.getPointAtLengthOfDataArray(i,this.dataArray)}static getLineLength(i,o,l,u){return Math.sqrt((l-i)*(l-i)+(u-o)*(u-o))}static getPathLength(i){let o=0;for(let l=0;l<i.length;++l)o+=i[l].pathLength;return o}static getPointAtLengthOfDataArray(i,o){let l,u=0,d=o.length;if(!d)return null;for(;u<d&&i>o[u].pathLength;)i-=o[u].pathLength,++u;if(u===d)return l=o[u-1].points.slice(-2),{x:l[0],y:l[1]};if(i<.01)return o[u].command==="M"?(l=o[u].points.slice(0,2),{x:l[0],y:l[1]}):{x:o[u].start.x,y:o[u].start.y};const f=o[u],g=f.points;switch(f.command){case"L":return s.getPointOnLine(i,f.start.x,f.start.y,g[0],g[1]);case"C":return s.getPointOnCubicBezier((0,n.t2length)(i,s.getPathLength(o),E=>(0,n.getCubicArcLength)([f.start.x,g[0],g[2],g[4]],[f.start.y,g[1],g[3],g[5]],E)),f.start.x,f.start.y,g[0],g[1],g[2],g[3],g[4],g[5]);case"Q":return s.getPointOnQuadraticBezier((0,n.t2length)(i,s.getPathLength(o),E=>(0,n.getQuadraticArcLength)([f.start.x,g[0],g[2]],[f.start.y,g[1],g[3]],E)),f.start.x,f.start.y,g[0],g[1],g[2],g[3]);case"A":const p=g[0],x=g[1],y=g[2],v=g[3],T=g[5],_=g[6];let b=g[4];return b+=T*i/f.pathLength,s.getPointOnEllipticalArc(p,x,y,v,b,_)}return null}static getPointOnLine(i,o,l,u,d,f,g){f=f??o,g=g??l;const p=this.getLineLength(o,l,u,d);if(p<1e-10)return{x:o,y:l};if(u===o)return{x:f,y:g+(d>l?i:-i)};const x=(d-l)/(u-o),y=Math.sqrt(i*i/(1+x*x))*(u<o?-1:1),v=x*y;if(Math.abs(g-l-x*(f-o))<1e-10)return{x:f+y,y:g+v};const T=((f-o)*(u-o)+(g-l)*(d-l))/(p*p),_=o+T*(u-o),b=l+T*(d-l),E=this.getLineLength(f,g,_,b),k=Math.sqrt(i*i-E*E),A=Math.sqrt(k*k/(1+x*x))*(u<o?-1:1),P=x*A;return{x:_+A,y:b+P}}static getPointOnCubicBezier(i,o,l,u,d,f,g,p,x){function y(k){return k*k*k}function v(k){return 3*k*k*(1-k)}function T(k){return 3*k*(1-k)*(1-k)}function _(k){return(1-k)*(1-k)*(1-k)}const b=p*y(i)+f*v(i)+u*T(i)+o*_(i),E=x*y(i)+g*v(i)+d*T(i)+l*_(i);return{x:b,y:E}}static getPointOnQuadraticBezier(i,o,l,u,d,f,g){function p(_){return _*_}function x(_){return 2*_*(1-_)}function y(_){return(1-_)*(1-_)}const v=f*p(i)+u*x(i)+o*y(i),T=g*p(i)+d*x(i)+l*y(i);return{x:v,y:T}}static getPointOnEllipticalArc(i,o,l,u,d,f){const g=Math.cos(f),p=Math.sin(f),x={x:l*Math.cos(d),y:u*Math.sin(d)};return{x:i+(x.x*g-x.y*p),y:o+(x.x*p+x.y*g)}}static parsePathData(i){if(!i)return[];let o=i;const l=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];o=o.replace(new RegExp(" ","g"),",");for(let v=0;v<l.length;v++)o=o.replace(new RegExp(l[v],"g"),"|"+l[v]);const u=o.split("|"),d=[],f=[];let g=0,p=0;const x=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let y;for(let v=1;v<u.length;v++){let T=u[v],_=T.charAt(0);for(T=T.slice(1),f.length=0;y=x.exec(T);)f.push(y[0]);const b=[];for(let E=0,k=f.length;E<k;E++){if(f[E]==="00"){b.push(0,0);continue}const A=parseFloat(f[E]);isNaN(A)?b.push(0):b.push(A)}for(;b.length>0&&!isNaN(b[0]);){let E="",k=[];const A=g,P=p;let j,O,R,M,G,K,re,Y,ee,B;switch(_){case"l":g+=b.shift(),p+=b.shift(),E="L",k.push(g,p);break;case"L":g=b.shift(),p=b.shift(),k.push(g,p);break;case"m":const z=b.shift(),I=b.shift();if(g+=z,p+=I,E="M",d.length>2&&d[d.length-1].command==="z"){for(let W=d.length-2;W>=0;W--)if(d[W].command==="M"){g=d[W].points[0]+z,p=d[W].points[1]+I;break}}k.push(g,p),_="l";break;case"M":g=b.shift(),p=b.shift(),E="M",k.push(g,p),_="L";break;case"h":g+=b.shift(),E="L",k.push(g,p);break;case"H":g=b.shift(),E="L",k.push(g,p);break;case"v":p+=b.shift(),E="L",k.push(g,p);break;case"V":p=b.shift(),E="L",k.push(g,p);break;case"C":k.push(b.shift(),b.shift(),b.shift(),b.shift()),g=b.shift(),p=b.shift(),k.push(g,p);break;case"c":k.push(g+b.shift(),p+b.shift(),g+b.shift(),p+b.shift()),g+=b.shift(),p+=b.shift(),E="C",k.push(g,p);break;case"S":O=g,R=p,j=d[d.length-1],j.command==="C"&&(O=g+(g-j.points[2]),R=p+(p-j.points[3])),k.push(O,R,b.shift(),b.shift()),g=b.shift(),p=b.shift(),E="C",k.push(g,p);break;case"s":O=g,R=p,j=d[d.length-1],j.command==="C"&&(O=g+(g-j.points[2]),R=p+(p-j.points[3])),k.push(O,R,g+b.shift(),p+b.shift()),g+=b.shift(),p+=b.shift(),E="C",k.push(g,p);break;case"Q":k.push(b.shift(),b.shift()),g=b.shift(),p=b.shift(),k.push(g,p);break;case"q":k.push(g+b.shift(),p+b.shift()),g+=b.shift(),p+=b.shift(),E="Q",k.push(g,p);break;case"T":O=g,R=p,j=d[d.length-1],j.command==="Q"&&(O=g+(g-j.points[0]),R=p+(p-j.points[1])),g=b.shift(),p=b.shift(),E="Q",k.push(O,R,g,p);break;case"t":O=g,R=p,j=d[d.length-1],j.command==="Q"&&(O=g+(g-j.points[0]),R=p+(p-j.points[1])),g+=b.shift(),p+=b.shift(),E="Q",k.push(O,R,g,p);break;case"A":M=b.shift(),G=b.shift(),K=b.shift(),re=b.shift(),Y=b.shift(),ee=g,B=p,g=b.shift(),p=b.shift(),E="A",k=this.convertEndpointToCenterParameterization(ee,B,g,p,re,Y,M,G,K);break;case"a":M=b.shift(),G=b.shift(),K=b.shift(),re=b.shift(),Y=b.shift(),ee=g,B=p,g+=b.shift(),p+=b.shift(),E="A",k=this.convertEndpointToCenterParameterization(ee,B,g,p,re,Y,M,G,K);break}d.push({command:E||_,points:k,start:{x:A,y:P},pathLength:this.calcLength(A,P,E||_,k)})}(_==="z"||_==="Z")&&d.push({command:"z",points:[],start:void 0,pathLength:0})}return d}static calcLength(i,o,l,u){let d,f,g,p;const x=s;switch(l){case"L":return x.getLineLength(i,o,u[0],u[1]);case"C":return(0,n.getCubicArcLength)([i,u[0],u[2],u[4]],[o,u[1],u[3],u[5]],1);case"Q":return(0,n.getQuadraticArcLength)([i,u[0],u[2]],[o,u[1],u[3]],1);case"A":d=0;const y=u[4],v=u[5],T=u[4]+v;let _=Math.PI/180;if(Math.abs(y-T)<_&&(_=Math.abs(y-T)),f=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],y,0),v<0)for(p=y-_;p>T;p-=_)g=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],p,0),d+=x.getLineLength(f.x,f.y,g.x,g.y),f=g;else for(p=y+_;p<T;p+=_)g=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],p,0),d+=x.getLineLength(f.x,f.y,g.x,g.y),f=g;return g=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],T,0),d+=x.getLineLength(f.x,f.y,g.x,g.y),d}return 0}static convertEndpointToCenterParameterization(i,o,l,u,d,f,g,p,x){const y=x*(Math.PI/180),v=Math.cos(y)*(i-l)/2+Math.sin(y)*(o-u)/2,T=-1*Math.sin(y)*(i-l)/2+Math.cos(y)*(o-u)/2,_=v*v/(g*g)+T*T/(p*p);_>1&&(g*=Math.sqrt(_),p*=Math.sqrt(_));let b=Math.sqrt((g*g*(p*p)-g*g*(T*T)-p*p*(v*v))/(g*g*(T*T)+p*p*(v*v)));d===f&&(b*=-1),isNaN(b)&&(b=0);const E=b*g*T/p,k=b*-p*v/g,A=(i+l)/2+Math.cos(y)*E-Math.sin(y)*k,P=(o+u)/2+Math.sin(y)*E+Math.cos(y)*k,j=function(Y){return Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1])},O=function(Y,ee){return(Y[0]*ee[0]+Y[1]*ee[1])/(j(Y)*j(ee))},R=function(Y,ee){return(Y[0]*ee[1]<Y[1]*ee[0]?-1:1)*Math.acos(O(Y,ee))},M=R([1,0],[(v-E)/g,(T-k)/p]),G=[(v-E)/g,(T-k)/p],K=[(-1*v-E)/g,(-1*T-k)/p];let re=R(G,K);return O(G,K)<=-1&&(re=Math.PI),O(G,K)>=1&&(re=0),f===0&&re>0&&(re=re-2*Math.PI),f===1&&re<0&&(re=re+2*Math.PI),[A,P,g,p,M,re,y,f]}}return Ty.Path=s,s.prototype.className="Path",s.prototype._attrsAffectingSize=["data"],(0,t._registerNode)(s),e.Factory.addGetterSetter(s,"data"),Ty}var _F;function vse(){if(_F)return Sy;_F=1,Object.defineProperty(Sy,"__esModule",{value:!0}),Sy.Arrow=void 0;const e=an(),t=gH(),r=ln(),n=Zr(),s=i5();class a extends t.Line{_sceneFunc(o){super._sceneFunc(o);const l=Math.PI*2,u=this.points();let d=u;const f=this.tension()!==0&&u.length>4;f&&(d=this.getTensionPoints());const g=this.pointerLength(),p=u.length;let x,y;if(f){const _=[d[d.length-4],d[d.length-3],d[d.length-2],d[d.length-1],u[p-2],u[p-1]],b=s.Path.calcLength(d[d.length-4],d[d.length-3],"C",_),E=s.Path.getPointOnQuadraticBezier(Math.min(1,1-g/b),_[0],_[1],_[2],_[3],_[4],_[5]);x=u[p-2]-E.x,y=u[p-1]-E.y}else x=u[p-2]-u[p-4],y=u[p-1]-u[p-3];const v=(Math.atan2(y,x)+l)%l,T=this.pointerWidth();this.pointerAtEnding()&&(o.save(),o.beginPath(),o.translate(u[p-2],u[p-1]),o.rotate(v),o.moveTo(0,0),o.lineTo(-g,T/2),o.lineTo(-g,-T/2),o.closePath(),o.restore(),this.__fillStroke(o)),this.pointerAtBeginning()&&(o.save(),o.beginPath(),o.translate(u[0],u[1]),f?(x=(d[0]+d[2])/2-u[0],y=(d[1]+d[3])/2-u[1]):(x=u[2]-u[0],y=u[3]-u[1]),o.rotate((Math.atan2(-y,-x)+l)%l),o.moveTo(0,0),o.lineTo(-g,T/2),o.lineTo(-g,-T/2),o.closePath(),o.restore(),this.__fillStroke(o))}__fillStroke(o){const l=this.dashEnabled();l&&(this.attrs.dashEnabled=!1,o.setLineDash([])),o.fillStrokeShape(this),l&&(this.attrs.dashEnabled=!0)}getSelfRect(){const o=super.getSelfRect(),l=this.pointerWidth()/2;return{x:o.x,y:o.y-l,width:o.width,height:o.height+l*2}}}return Sy.Arrow=a,a.prototype.className="Arrow",(0,n._registerNode)(a),e.Factory.addGetterSetter(a,"pointerLength",10,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"pointerWidth",10,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"pointerAtBeginning",!1),e.Factory.addGetterSetter(a,"pointerAtEnding",!0),Sy}var Cy={},SF;function wse(){if(SF)return Cy;SF=1,Object.defineProperty(Cy,"__esModule",{value:!0}),Cy.Circle=void 0;const e=an(),t=$a(),r=ln(),n=Zr();class s extends t.Shape{_sceneFunc(i){i.beginPath(),i.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(i){this.radius()!==i/2&&this.radius(i/2)}setHeight(i){this.radius()!==i/2&&this.radius(i/2)}}return Cy.Circle=s,s.prototype._centroid=!0,s.prototype.className="Circle",s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),Cy}var Ey={},kF;function bse(){if(kF)return Ey;kF=1,Object.defineProperty(Ey,"__esModule",{value:!0}),Ey.Ellipse=void 0;const e=an(),t=$a(),r=ln(),n=Zr();class s extends t.Shape{_sceneFunc(i){const o=this.radiusX(),l=this.radiusY();i.beginPath(),i.save(),o!==l&&i.scale(1,l/o),i.arc(0,0,o,0,Math.PI*2,!1),i.restore(),i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(i){this.radiusX(i/2)}setHeight(i){this.radiusY(i/2)}}return Ey.Ellipse=s,s.prototype.className="Ellipse",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,n._registerNode)(s),e.Factory.addComponentsGetterSetter(s,"radius",["x","y"]),e.Factory.addGetterSetter(s,"radiusX",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"radiusY",0,(0,r.getNumberValidator)()),Ey}var Ny={},TF;function _se(){if(TF)return Ny;TF=1,Object.defineProperty(Ny,"__esModule",{value:!0}),Ny.Image=void 0;const e=Ds(),t=an(),r=$a(),n=Zr(),s=ln();class a extends r.Shape{constructor(o){super(o),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",l=>{this._removeImageLoad(l.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const o=this.image();o&&o.complete||o&&o.readyState===4||o&&o.addEventListener&&o.addEventListener("load",this._loadListener)}_removeImageLoad(o){o&&o.removeEventListener&&o.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const o=!!this.cornerRadius(),l=this.hasShadow();return o&&l?!0:super._useBufferCanvas(!0)}_sceneFunc(o){const l=this.getWidth(),u=this.getHeight(),d=this.cornerRadius(),f=this.attrs.image;let g;if(f){const p=this.attrs.cropWidth,x=this.attrs.cropHeight;p&&x?g=[f,this.cropX(),this.cropY(),p,x,0,0,l,u]:g=[f,0,0,l,u]}(this.hasFill()||this.hasStroke()||d)&&(o.beginPath(),d?e.Util.drawRoundedRectPath(o,l,u,d):o.rect(0,0,l,u),o.closePath(),o.fillStrokeShape(this)),f&&(d&&o.clip(),o.drawImage.apply(o,g))}_hitFunc(o){const l=this.width(),u=this.height(),d=this.cornerRadius();o.beginPath(),d?e.Util.drawRoundedRectPath(o,l,u,d):o.rect(0,0,l,u),o.closePath(),o.fillStrokeShape(this)}getWidth(){var o,l;return(o=this.attrs.width)!==null&&o!==void 0?o:(l=this.image())===null||l===void 0?void 0:l.width}getHeight(){var o,l;return(o=this.attrs.height)!==null&&o!==void 0?o:(l=this.image())===null||l===void 0?void 0:l.height}static fromURL(o,l,u=null){const d=e.Util.createImageElement();d.onload=function(){const f=new a({image:d});l(f)},d.onerror=u,d.crossOrigin="Anonymous",d.src=o}}return Ny.Image=a,a.prototype.className="Image",(0,n._registerNode)(a),t.Factory.addGetterSetter(a,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(a,"image"),t.Factory.addComponentsGetterSetter(a,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(a,"cropX",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropY",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropWidth",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropHeight",0,(0,s.getNumberValidator)()),Ny}var yh={},CF;function Sse(){if(CF)return yh;CF=1,Object.defineProperty(yh,"__esModule",{value:!0}),yh.Tag=yh.Label=void 0;const e=an(),t=$a(),r=s5(),n=ln(),s=Zr(),a=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],i="Change.konva",o="none",l="up",u="right",d="down",f="left",g=a.length;class p extends r.Group{constructor(v){super(v),this.on("add.konva",function(T){this._addListeners(T.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(v){let T=this,_;const b=function(){T._sync()};for(_=0;_<g;_++)v.on(a[_]+i,b)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let v=this.getText(),T=this.getTag(),_,b,E,k,A,P,j;if(v&&T){switch(_=v.width(),b=v.height(),E=T.pointerDirection(),k=T.pointerWidth(),j=T.pointerHeight(),A=0,P=0,E){case l:A=_/2,P=-1*j;break;case u:A=_+k,P=b/2;break;case d:A=_/2,P=b+j;break;case f:A=-1*k,P=b/2;break}T.setAttrs({x:-1*A,y:-1*P,width:_,height:b}),v.setAttrs({x:-1*A,y:-1*P})}}}yh.Label=p,p.prototype.className="Label",(0,s._registerNode)(p);class x extends t.Shape{_sceneFunc(v){const T=this.width(),_=this.height(),b=this.pointerDirection(),E=this.pointerWidth(),k=this.pointerHeight(),A=this.cornerRadius();let P=0,j=0,O=0,R=0;typeof A=="number"?P=j=O=R=Math.min(A,T/2,_/2):(P=Math.min(A[0]||0,T/2,_/2),j=Math.min(A[1]||0,T/2,_/2),R=Math.min(A[2]||0,T/2,_/2),O=Math.min(A[3]||0,T/2,_/2)),v.beginPath(),v.moveTo(P,0),b===l&&(v.lineTo((T-E)/2,0),v.lineTo(T/2,-1*k),v.lineTo((T+E)/2,0)),v.lineTo(T-j,0),v.arc(T-j,j,j,Math.PI*3/2,0,!1),b===u&&(v.lineTo(T,(_-k)/2),v.lineTo(T+E,_/2),v.lineTo(T,(_+k)/2)),v.lineTo(T,_-R),v.arc(T-R,_-R,R,0,Math.PI/2,!1),b===d&&(v.lineTo((T+E)/2,_),v.lineTo(T/2,_+k),v.lineTo((T-E)/2,_)),v.lineTo(O,_),v.arc(O,_-O,O,Math.PI/2,Math.PI,!1),b===f&&(v.lineTo(0,(_+k)/2),v.lineTo(-1*E,_/2),v.lineTo(0,(_-k)/2)),v.lineTo(0,P),v.arc(P,P,P,Math.PI,Math.PI*3/2,!1),v.closePath(),v.fillStrokeShape(this)}getSelfRect(){let v=0,T=0,_=this.pointerWidth(),b=this.pointerHeight(),E=this.pointerDirection(),k=this.width(),A=this.height();return E===l?(T-=b,A+=b):E===d?A+=b:E===f?(v-=_*1.5,k+=_):E===u&&(k+=_*1.5),{x:v,y:T,width:k,height:A}}}return yh.Tag=x,x.prototype.className="Tag",(0,s._registerNode)(x),e.Factory.addGetterSetter(x,"pointerDirection",o),e.Factory.addGetterSetter(x,"pointerWidth",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(x,"pointerHeight",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(x,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),yh}var Ay={},EF;function pH(){if(EF)return Ay;EF=1,Object.defineProperty(Ay,"__esModule",{value:!0}),Ay.Rect=void 0;const e=an(),t=$a(),r=Zr(),n=Ds(),s=ln();class a extends t.Shape{_sceneFunc(o){const l=this.cornerRadius(),u=this.width(),d=this.height();o.beginPath(),l?n.Util.drawRoundedRectPath(o,u,d,l):o.rect(0,0,u,d),o.closePath(),o.fillStrokeShape(this)}}return Ay.Rect=a,a.prototype.className="Rect",(0,r._registerNode)(a),e.Factory.addGetterSetter(a,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),Ay}var jy={},NF;function kse(){if(NF)return jy;NF=1,Object.defineProperty(jy,"__esModule",{value:!0}),jy.RegularPolygon=void 0;const e=an(),t=$a(),r=ln(),n=Zr();class s extends t.Shape{_sceneFunc(i){const o=this._getPoints();i.beginPath(),i.moveTo(o[0].x,o[0].y);for(let l=1;l<o.length;l++)i.lineTo(o[l].x,o[l].y);i.closePath(),i.fillStrokeShape(this)}_getPoints(){const i=this.attrs.sides,o=this.attrs.radius||0,l=[];for(let u=0;u<i;u++)l.push({x:o*Math.sin(u*2*Math.PI/i),y:-1*o*Math.cos(u*2*Math.PI/i)});return l}getSelfRect(){const i=this._getPoints();let o=i[0].x,l=i[0].y,u=i[0].x,d=i[0].y;return i.forEach(f=>{o=Math.min(o,f.x),l=Math.max(l,f.x),u=Math.min(u,f.y),d=Math.max(d,f.y)}),{x:o,y:u,width:l-o,height:d-u}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(i){this.radius(i/2)}setHeight(i){this.radius(i/2)}}return jy.RegularPolygon=s,s.prototype.className="RegularPolygon",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"sides",0,(0,r.getNumberValidator)()),jy}var Py={},AF;function Tse(){if(AF)return Py;AF=1,Object.defineProperty(Py,"__esModule",{value:!0}),Py.Ring=void 0;const e=an(),t=$a(),r=ln(),n=Zr(),s=Math.PI*2;class a extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.innerRadius(),0,s,!1),o.moveTo(this.outerRadius(),0),o.arc(0,0,this.outerRadius(),s,0,!0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}}return Py.Ring=a,a.prototype.className="Ring",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(a),e.Factory.addGetterSetter(a,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,r.getNumberValidator)()),Py}var Oy={},jF;function Cse(){if(jF)return Oy;jF=1,Object.defineProperty(Oy,"__esModule",{value:!0}),Oy.Sprite=void 0;const e=an(),t=$a(),r=a5(),n=ln(),s=Zr();class a extends t.Shape{constructor(o){super(o),this._updated=!0,this.anim=new r.Animation(()=>{const l=this._updated;return this._updated=!1,l}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(o){const l=this.animation(),u=this.frameIndex(),d=u*4,f=this.animations()[l],g=this.frameOffsets(),p=f[d+0],x=f[d+1],y=f[d+2],v=f[d+3],T=this.image();if((this.hasFill()||this.hasStroke())&&(o.beginPath(),o.rect(0,0,y,v),o.closePath(),o.fillStrokeShape(this)),T)if(g){const _=g[l],b=u*2;o.drawImage(T,p,x,y,v,_[b+0],_[b+1],y,v)}else o.drawImage(T,p,x,y,v,0,0,y,v)}_hitFunc(o){const l=this.animation(),u=this.frameIndex(),d=u*4,f=this.animations()[l],g=this.frameOffsets(),p=f[d+2],x=f[d+3];if(o.beginPath(),g){const y=g[l],v=u*2;o.rect(y[v+0],y[v+1],p,x)}else o.rect(0,0,p,x);o.closePath(),o.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const o=this;this.interval=setInterval(function(){o._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const o=this.getLayer();this.anim.setLayers(o),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const o=this.frameIndex(),l=this.animation(),u=this.animations(),d=u[l],f=d.length/4;o<f-1?this.frameIndex(o+1):this.frameIndex(0)}}return Oy.Sprite=a,a.prototype.className="Sprite",(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"animation"),e.Factory.addGetterSetter(a,"animations"),e.Factory.addGetterSetter(a,"frameOffsets"),e.Factory.addGetterSetter(a,"image"),e.Factory.addGetterSetter(a,"frameIndex",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"frameRate",17,(0,n.getNumberValidator)()),e.Factory.backCompat(a,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Oy}var Fy={},PF;function Ese(){if(PF)return Fy;PF=1,Object.defineProperty(Fy,"__esModule",{value:!0}),Fy.Star=void 0;const e=an(),t=$a(),r=ln(),n=Zr();class s extends t.Shape{_sceneFunc(i){const o=this.innerRadius(),l=this.outerRadius(),u=this.numPoints();i.beginPath(),i.moveTo(0,0-l);for(let d=1;d<u*2;d++){const f=d%2===0?l:o,g=f*Math.sin(d*Math.PI/u),p=-1*f*Math.cos(d*Math.PI/u);i.lineTo(g,p)}i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(i){this.outerRadius(i/2)}setHeight(i){this.outerRadius(i/2)}}return Fy.Star=s,s.prototype.className="Star",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"numPoints",5,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"outerRadius",0,(0,r.getNumberValidator)()),Fy}var kg={},OF;function mH(){if(OF)return kg;OF=1,Object.defineProperty(kg,"__esModule",{value:!0}),kg.Text=void 0,kg.stringToArray=i;const e=Ds(),t=an(),r=$a(),n=Zr(),s=ln(),a=Zr();function i(L){return[...L].reduce((H,J,Q,ne)=>{if(new RegExp("\\p{Emoji}","u").test(J)){const Z=ne[Q+1];Z&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(Z)?(H.push(J+Z),ne[Q+1]=""):H.push(J)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(J+(ne[Q+1]||""))?H.push(J+ne[Q+1]):Q>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(J)?H[H.length-1]+=J:J&&H.push(J);return H},[])}const o="auto",l="center",u="inherit",d="justify",f="Change.konva",g="2d",p="-",x="left",y="text",v="Text",T="top",_="bottom",b="middle",E="normal",k="px ",A=" ",P="right",j="rtl",O="word",R="char",M="none",G="",K=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],re=K.length;function Y(L){return L.split(",").map(H=>{H=H.trim();const J=H.indexOf(" ")>=0,Q=H.indexOf('"')>=0||H.indexOf("'")>=0;return J&&!Q&&(H=`"${H}"`),H}).join(", ")}let ee;function B(){return ee||(ee=e.Util.createCanvasElement().getContext(g),ee)}function z(L){L.fillText(this._partialText,this._partialTextX,this._partialTextY)}function I(L){L.setAttr("miterLimit",2),L.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function W(L){return L=L||{},!L.fillLinearGradientColorStops&&!L.fillRadialGradientColorStops&&!L.fillPatternImage&&(L.fill=L.fill||"black"),L}class V extends r.Shape{constructor(H){super(W(H)),this._partialTextX=0,this._partialTextY=0;for(let J=0;J<re;J++)this.on(K[J]+f,this._setTextData);this._setTextData()}_sceneFunc(H){const J=this.textArr,Q=J.length;if(!this.text())return;let ne=this.padding(),Z=this.fontSize(),se=this.lineHeight()*Z,ce=this.verticalAlign(),he=this.direction(),Ee=0,ie=this.align(),me=this.getWidth(),Ne=this.letterSpacing(),Oe=this.fill(),Re=this.textDecoration(),ze=Re.indexOf("underline")!==-1,Nt=Re.indexOf("line-through")!==-1,et;he=he===u?H.direction:he;let Me=se/2,Fe=b;if(n.Konva._fixTextRendering){const Ke=this.measureSize("M");Fe="alphabetic",Me=(Ke.fontBoundingBoxAscent-Ke.fontBoundingBoxDescent)/2+se/2}for(he===j&&H.setAttr("direction",he),H.setAttr("font",this._getContextFont()),H.setAttr("textBaseline",Fe),H.setAttr("textAlign",x),ce===b?Ee=(this.getHeight()-Q*se-ne*2)/2:ce===_&&(Ee=this.getHeight()-Q*se-ne*2),H.translate(ne,Ee+ne),et=0;et<Q;et++){let Ke=0,xt=0;const ut=J[et],At=ut.text,Dt=ut.width,Qe=ut.lastInParagraph;if(H.save(),ie===P?Ke+=me-Dt-ne*2:ie===l&&(Ke+=(me-Dt-ne*2)/2),ze){H.save(),H.beginPath();const tt=n.Konva._fixTextRendering?Math.round(Z/4):Math.round(Z/2),vt=Ke,gt=Me+xt+tt;H.moveTo(vt,gt);const _t=ie===d&&!Qe?me-ne*2:Dt;H.lineTo(vt+Math.round(_t),gt),H.lineWidth=Z/15;const Wt=this._getLinearGradient();H.strokeStyle=Wt||Oe,H.stroke(),H.restore()}if(Nt){H.save(),H.beginPath();const tt=n.Konva._fixTextRendering?-Math.round(Z/4):0;H.moveTo(Ke,Me+xt+tt);const vt=ie===d&&!Qe?me-ne*2:Dt;H.lineTo(Ke+Math.round(vt),Me+xt+tt),H.lineWidth=Z/15;const gt=this._getLinearGradient();H.strokeStyle=gt||Oe,H.stroke(),H.restore()}if(he!==j&&(Ne!==0||ie===d)){const tt=At.split(" ").length-1,vt=i(At);for(let gt=0;gt<vt.length;gt++){const _t=vt[gt];_t===" "&&!Qe&&ie===d&&(Ke+=(me-ne*2-Dt)/tt),this._partialTextX=Ke,this._partialTextY=Me+xt,this._partialText=_t,H.fillStrokeShape(this),Ke+=this.measureSize(_t).width+Ne}}else Ne!==0&&H.setAttr("letterSpacing",`${Ne}px`),this._partialTextX=Ke,this._partialTextY=Me+xt,this._partialText=At,H.fillStrokeShape(this);H.restore(),Q>1&&(Me+=se)}}_hitFunc(H){const J=this.getWidth(),Q=this.getHeight();H.beginPath(),H.rect(0,0,J,Q),H.closePath(),H.fillStrokeShape(this)}setText(H){const J=e.Util._isString(H)?H:H==null?"":H+"";return this._setAttr(y,J),this}getWidth(){return this.attrs.width===o||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===o||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(H){var J,Q,ne,Z,se,ce,he,Ee,ie,me,Ne;let Oe=B(),Re=this.fontSize(),ze;Oe.save(),Oe.font=this._getContextFont(),ze=Oe.measureText(H),Oe.restore();const Nt=Re/100;return{actualBoundingBoxAscent:(J=ze.actualBoundingBoxAscent)!==null&&J!==void 0?J:71.58203125*Nt,actualBoundingBoxDescent:(Q=ze.actualBoundingBoxDescent)!==null&&Q!==void 0?Q:0,actualBoundingBoxLeft:(ne=ze.actualBoundingBoxLeft)!==null&&ne!==void 0?ne:-7.421875*Nt,actualBoundingBoxRight:(Z=ze.actualBoundingBoxRight)!==null&&Z!==void 0?Z:75.732421875*Nt,alphabeticBaseline:(se=ze.alphabeticBaseline)!==null&&se!==void 0?se:0,emHeightAscent:(ce=ze.emHeightAscent)!==null&&ce!==void 0?ce:100*Nt,emHeightDescent:(he=ze.emHeightDescent)!==null&&he!==void 0?he:-20*Nt,fontBoundingBoxAscent:(Ee=ze.fontBoundingBoxAscent)!==null&&Ee!==void 0?Ee:91*Nt,fontBoundingBoxDescent:(ie=ze.fontBoundingBoxDescent)!==null&&ie!==void 0?ie:21*Nt,hangingBaseline:(me=ze.hangingBaseline)!==null&&me!==void 0?me:72.80000305175781*Nt,ideographicBaseline:(Ne=ze.ideographicBaseline)!==null&&Ne!==void 0?Ne:-21*Nt,width:ze.width,height:Re}}_getContextFont(){return this.fontStyle()+A+this.fontVariant()+A+(this.fontSize()+k)+Y(this.fontFamily())}_addTextLine(H){this.align()===d&&(H=H.trim());const Q=this._getTextWidth(H);return this.textArr.push({text:H,width:Q,lastInParagraph:!1})}_getTextWidth(H){const J=this.letterSpacing(),Q=H.length;return B().measureText(H).width+J*Q}_setTextData(){let H=this.text().split(`
`),J=+this.fontSize(),Q=0,ne=this.lineHeight()*J,Z=this.attrs.width,se=this.attrs.height,ce=Z!==o&&Z!==void 0,he=se!==o&&se!==void 0,Ee=this.padding(),ie=Z-Ee*2,me=se-Ee*2,Ne=0,Oe=this.wrap(),Re=Oe!==M,ze=Oe!==R&&Re,Nt=this.ellipsis();this.textArr=[],B().font=this._getContextFont();const et=Nt?this._getTextWidth(G):0;for(let Me=0,Fe=H.length;Me<Fe;++Me){let Ke=H[Me],xt=this._getTextWidth(Ke);if(ce&&xt>ie)for(;Ke.length>0;){let ut=0,At=i(Ke).length,Dt="",Qe=0;for(;ut<At;){const tt=ut+At>>>1,vt=i(Ke),gt=vt.slice(0,tt+1).join(""),_t=this._getTextWidth(gt);(Nt&&he&&Ne+ne>me?_t+et:_t)<=ie?(ut=tt+1,Dt=gt,Qe=_t):At=tt}if(Dt){if(ze){const gt=i(Ke),_t=i(Dt),Wt=gt[_t.length],Zt=Wt===A||Wt===p;let pr;if(Zt&&Qe<=ie)pr=_t.length;else{const Ir=_t.lastIndexOf(A),br=_t.lastIndexOf(p);pr=Math.max(Ir,br)+1}pr>0&&(ut=pr,Dt=gt.slice(0,ut).join(""),Qe=this._getTextWidth(Dt))}if(Dt=Dt.trimRight(),this._addTextLine(Dt),Q=Math.max(Q,Qe),Ne+=ne,this._shouldHandleEllipsis(Ne)){this._tryToAddEllipsisToLastLine();break}if(Ke=i(Ke).slice(ut).join("").trimLeft(),Ke.length>0&&(xt=this._getTextWidth(Ke),xt<=ie)){this._addTextLine(Ke),Ne+=ne,Q=Math.max(Q,xt);break}}else break}else this._addTextLine(Ke),Ne+=ne,Q=Math.max(Q,xt),this._shouldHandleEllipsis(Ne)&&Me<Fe-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),he&&Ne+ne>me)break}this.textHeight=J,this.textWidth=Q}_shouldHandleEllipsis(H){const J=+this.fontSize(),Q=this.lineHeight()*J,ne=this.attrs.height,Z=ne!==o&&ne!==void 0,se=this.padding(),ce=ne-se*2;return!(this.wrap()!==M)||Z&&H+Q>ce}_tryToAddEllipsisToLastLine(){const H=this.attrs.width,J=H!==o&&H!==void 0,Q=this.padding(),ne=H-Q*2,Z=this.ellipsis(),se=this.textArr[this.textArr.length-1];!se||!Z||(J&&(this._getTextWidth(se.text+G)<ne||(se.text=se.text.slice(0,se.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(se.text+G))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const H=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,J=this.hasShadow();return H&&J?!0:super._useBufferCanvas()}}return kg.Text=V,V.prototype._fillFunc=z,V.prototype._strokeFunc=I,V.prototype.className=v,V.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,a._registerNode)(V),t.Factory.overWriteSetter(V,"width",(0,s.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(V,"height",(0,s.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(V,"direction",u),t.Factory.addGetterSetter(V,"fontFamily","Arial"),t.Factory.addGetterSetter(V,"fontSize",12,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(V,"fontStyle",E),t.Factory.addGetterSetter(V,"fontVariant",E),t.Factory.addGetterSetter(V,"padding",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(V,"align",x),t.Factory.addGetterSetter(V,"verticalAlign",T),t.Factory.addGetterSetter(V,"lineHeight",1,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(V,"wrap",O),t.Factory.addGetterSetter(V,"ellipsis",!1,(0,s.getBooleanValidator)()),t.Factory.addGetterSetter(V,"letterSpacing",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(V,"text","",(0,s.getStringValidator)()),t.Factory.addGetterSetter(V,"textDecoration",""),kg}var Ry={},FF;function Nse(){if(FF)return Ry;FF=1,Object.defineProperty(Ry,"__esModule",{value:!0}),Ry.TextPath=void 0;const e=Ds(),t=an(),r=$a(),n=i5(),s=mH(),a=ln(),i=Zr(),o="",l="normal";function u(g){g.fillText(this.partialText,0,0)}function d(g){g.strokeText(this.partialText,0,0)}class f extends r.Shape{constructor(p){super(p),this.dummyCanvas=e.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return n.Path.getPathLength(this.dataArray)}_getPointAtLength(p){if(!this.attrs.data)return null;const x=this.pathLength;return p-1>x?null:n.Path.getPointAtLengthOfDataArray(p,this.dataArray)}_readDataAttribute(){this.dataArray=n.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(p){p.setAttr("font",this._getContextFont()),p.setAttr("textBaseline",this.textBaseline()),p.setAttr("textAlign","left"),p.save();const x=this.textDecoration(),y=this.fill(),v=this.fontSize(),T=this.glyphInfo;x==="underline"&&p.beginPath();for(let _=0;_<T.length;_++){p.save();const b=T[_].p0;p.translate(b.x,b.y),p.rotate(T[_].rotation),this.partialText=T[_].text,p.fillStrokeShape(this),x==="underline"&&(_===0&&p.moveTo(0,v/2+1),p.lineTo(v,v/2+1)),p.restore()}x==="underline"&&(p.strokeStyle=y,p.lineWidth=v/20,p.stroke()),p.restore()}_hitFunc(p){p.beginPath();const x=this.glyphInfo;if(x.length>=1){const y=x[0].p0;p.moveTo(y.x,y.y)}for(let y=0;y<x.length;y++){const v=x[y].p1;p.lineTo(v.x,v.y)}p.setAttr("lineWidth",this.fontSize()),p.setAttr("strokeStyle",this.colorKey),p.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(p){return s.Text.prototype.setText.call(this,p)}_getContextFont(){return s.Text.prototype._getContextFont.call(this)}_getTextSize(p){const y=this.dummyCanvas.getContext("2d");y.save(),y.font=this._getContextFont();const v=y.measureText(p);return y.restore(),{width:v.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:p,height:x}=this._getTextSize(this.attrs.text);if(this.textWidth=p,this.textHeight=x,this.glyphInfo=[],!this.attrs.data)return null;const y=this.letterSpacing(),v=this.align(),T=this.kerningFunc(),_=Math.max(this.textWidth+((this.attrs.text||"").length-1)*y,0);let b=0;v==="center"&&(b=Math.max(0,this.pathLength/2-_/2)),v==="right"&&(b=Math.max(0,this.pathLength-_));const E=(0,s.stringToArray)(this.text());let k=b;for(let A=0;A<E.length;A++){const P=this._getPointAtLength(k);if(!P)return;let j=this._getTextSize(E[A]).width+y;if(E[A]===" "&&v==="justify"){const re=this.text().split(" ").length-1;j+=(this.pathLength-_)/re}const O=this._getPointAtLength(k+j);if(!O)return;const R=n.Path.getLineLength(P.x,P.y,O.x,O.y);let M=0;if(T)try{M=T(E[A-1],E[A])*this.fontSize()}catch{M=0}P.x+=M,O.x+=M,this.textWidth+=M;const G=n.Path.getPointOnLine(M+R/2,P.x,P.y,O.x,O.y),K=Math.atan2(O.y-P.y,O.x-P.x);this.glyphInfo.push({transposeX:G.x,transposeY:G.y,text:E[A],rotation:K,p0:P,p1:O}),k+=j}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const p=[];this.glyphInfo.forEach(function(k){p.push(k.p0.x),p.push(k.p0.y),p.push(k.p1.x),p.push(k.p1.y)});let x=p[0]||0,y=p[0]||0,v=p[1]||0,T=p[1]||0,_,b;for(let k=0;k<p.length/2;k++)_=p[k*2],b=p[k*2+1],x=Math.min(x,_),y=Math.max(y,_),v=Math.min(v,b),T=Math.max(T,b);const E=this.fontSize();return{x:x-E/2,y:v-E/2,width:y-x+E,height:T-v+E}}destroy(){return e.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}return Ry.TextPath=f,f.prototype._fillFunc=u,f.prototype._strokeFunc=d,f.prototype._fillFuncHit=u,f.prototype._strokeFuncHit=d,f.prototype.className="TextPath",f.prototype._attrsAffectingSize=["text","fontSize","data"],(0,i._registerNode)(f),t.Factory.addGetterSetter(f,"data"),t.Factory.addGetterSetter(f,"fontFamily","Arial"),t.Factory.addGetterSetter(f,"fontSize",12,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(f,"fontStyle",l),t.Factory.addGetterSetter(f,"align","left"),t.Factory.addGetterSetter(f,"letterSpacing",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(f,"textBaseline","middle"),t.Factory.addGetterSetter(f,"fontVariant",l),t.Factory.addGetterSetter(f,"text",o),t.Factory.addGetterSetter(f,"textDecoration",""),t.Factory.addGetterSetter(f,"kerningFunc",void 0),Ry}var Dy={},RF;function Ase(){if(RF)return Dy;RF=1,Object.defineProperty(Dy,"__esModule",{value:!0}),Dy.Transformer=void 0;const e=Ds(),t=an(),r=qs(),n=$a(),s=pH(),a=s5(),i=Zr(),o=ln(),l=Zr(),u="tr-konva",d=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(j=>j+`.${u}`).join(" "),f="nodesRect",g=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],p={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},x="ontouchstart"in i.Konva._global;function y(j,O,R){if(j==="rotater")return R;O+=e.Util.degToRad(p[j]||0);const M=(e.Util.radToDeg(O)%360+360)%360;return e.Util._inRange(M,315+22.5,360)||e.Util._inRange(M,0,22.5)?"ns-resize":e.Util._inRange(M,45-22.5,45+22.5)?"nesw-resize":e.Util._inRange(M,90-22.5,90+22.5)?"ew-resize":e.Util._inRange(M,135-22.5,135+22.5)?"nwse-resize":e.Util._inRange(M,180-22.5,180+22.5)?"ns-resize":e.Util._inRange(M,225-22.5,225+22.5)?"nesw-resize":e.Util._inRange(M,270-22.5,270+22.5)?"ew-resize":e.Util._inRange(M,315-22.5,315+22.5)?"nwse-resize":(e.Util.error("Transformer has unknown angle for cursor detection: "+M),"pointer")}const v=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function T(j){return{x:j.x+j.width/2*Math.cos(j.rotation)+j.height/2*Math.sin(-j.rotation),y:j.y+j.height/2*Math.cos(j.rotation)+j.width/2*Math.sin(j.rotation)}}function _(j,O,R){const M=R.x+(j.x-R.x)*Math.cos(O)-(j.y-R.y)*Math.sin(O),G=R.y+(j.x-R.x)*Math.sin(O)+(j.y-R.y)*Math.cos(O);return{...j,rotation:j.rotation+O,x:M,y:G}}function b(j,O){const R=T(j);return _(j,O,R)}function E(j,O,R){let M=O;for(let G=0;G<j.length;G++){const K=i.Konva.getAngle(j[G]),re=Math.abs(K-O)%(Math.PI*2);Math.min(re,Math.PI*2-re)<R&&(M=K)}return M}let k=0;class A extends a.Group{constructor(O){super(O),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(d,this.update),this.getNode()&&this.update()}attachTo(O){return this.setNode(O),this}setNode(O){return e.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([O])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(O=[]){this._nodes&&this._nodes.length&&this.detach();const R=O.filter(G=>G.isAncestorOf(this)?(e.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=O=R,O.length===1&&this.useSingleNodeRotation()?this.rotation(O[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(G=>{const K=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(G._attrsAffectingSize.length){const re=G._attrsAffectingSize.map(Y=>Y+"Change."+this._getEventNamespace()).join(" ");G.on(re,K)}G.on(g.map(re=>re+`.${this._getEventNamespace()}`).join(" "),K),G.on(`absoluteTransformChange.${this._getEventNamespace()}`,K),this._proxyDrag(G)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(O){let R;O.on(`dragstart.${this._getEventNamespace()}`,M=>{R=O.getAbsolutePosition(),!this.isDragging()&&O!==this.findOne(".back")&&this.startDrag(M,!1)}),O.on(`dragmove.${this._getEventNamespace()}`,M=>{if(!R)return;const G=O.getAbsolutePosition(),K=G.x-R.x,re=G.y-R.y;this.nodes().forEach(Y=>{if(Y===O||Y.isDragging())return;const ee=Y.getAbsolutePosition();Y.setAbsolutePosition({x:ee.x+K,y:ee.y+re}),Y.startDrag(M)}),R=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(O=>{O.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(f),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(f,this.__getNodeRect)}__getNodeShape(O,R=this.rotation(),M){const G=O.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),K=O.getAbsoluteScale(M),re=O.getAbsolutePosition(M),Y=G.x*K.x-O.offsetX()*K.x,ee=G.y*K.y-O.offsetY()*K.y,B=(i.Konva.getAngle(O.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),z={x:re.x+Y*Math.cos(B)+ee*Math.sin(-B),y:re.y+ee*Math.cos(B)+Y*Math.sin(B),width:G.width*K.x,height:G.height*K.y,rotation:B};return _(z,-i.Konva.getAngle(R),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const R=[];this.nodes().map(B=>{const z=B.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),I=[{x:z.x,y:z.y},{x:z.x+z.width,y:z.y},{x:z.x+z.width,y:z.y+z.height},{x:z.x,y:z.y+z.height}],W=B.getAbsoluteTransform();I.forEach(function(V){const L=W.point(V);R.push(L)})});const M=new e.Transform;M.rotate(-i.Konva.getAngle(this.rotation()));let G=1/0,K=1/0,re=-1/0,Y=-1/0;R.forEach(function(B){const z=M.point(B);G===void 0&&(G=re=z.x,K=Y=z.y),G=Math.min(G,z.x),K=Math.min(K,z.y),re=Math.max(re,z.x),Y=Math.max(Y,z.y)}),M.invert();const ee=M.point({x:G,y:K});return{x:ee.x,y:ee.y,width:re-G,height:Y-K,rotation:i.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),v.forEach(O=>{this._createAnchor(O)}),this._createAnchor("rotater")}_createAnchor(O){const R=new s.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:O+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:x?10:"auto"}),M=this;R.on("mousedown touchstart",function(G){M._handleMouseDown(G)}),R.on("dragstart",G=>{R.stopDrag(),G.cancelBubble=!0}),R.on("dragend",G=>{G.cancelBubble=!0}),R.on("mouseenter",()=>{const G=i.Konva.getAngle(this.rotation()),K=this.rotateAnchorCursor(),re=y(O,G,K);R.getStage().content&&(R.getStage().content.style.cursor=re),this._cursorChange=!0}),R.on("mouseout",()=>{R.getStage().content&&(R.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(R)}_createBack(){const O=new n.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(R,M){const G=M.getParent(),K=G.padding();R.beginPath(),R.rect(-K,-K,M.width()+K*2,M.height()+K*2),R.moveTo(M.width()/2,-K),G.rotateEnabled()&&G.rotateLineVisible()&&R.lineTo(M.width()/2,-G.rotateAnchorOffset()*e.Util._sign(M.height())-K),R.fillStrokeShape(M)},hitFunc:(R,M)=>{if(!this.shouldOverdrawWholeArea())return;const G=this.padding();R.beginPath(),R.rect(-G,-G,M.width()+G*2,M.height()+G*2),R.fillStrokeShape(M)}});this.add(O),this._proxyDrag(O),O.on("dragstart",R=>{R.cancelBubble=!0}),O.on("dragmove",R=>{R.cancelBubble=!0}),O.on("dragend",R=>{R.cancelBubble=!0}),this.on("dragmove",R=>{this.update()})}_handleMouseDown(O){if(this._transforming)return;this._movingAnchorName=O.target.name().split(" ")[0];const R=this._getNodeRect(),M=R.width,G=R.height,K=Math.sqrt(Math.pow(M,2)+Math.pow(G,2));this.sin=Math.abs(G/K),this.cos=Math.abs(M/K),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const re=O.target.getAbsolutePosition(),Y=O.target.getStage().getPointerPosition();this._anchorDragOffset={x:Y.x-re.x,y:Y.y-re.y},k++,this._fire("transformstart",{evt:O.evt,target:this.getNode()}),this._nodes.forEach(ee=>{ee._fire("transformstart",{evt:O.evt,target:ee})})}_handleMouseMove(O){let R,M,G;const K=this.findOne("."+this._movingAnchorName),re=K.getStage();re.setPointersPositions(O);const Y=re.getPointerPosition();let ee={x:Y.x-this._anchorDragOffset.x,y:Y.y-this._anchorDragOffset.y};const B=K.getAbsolutePosition();this.anchorDragBoundFunc()&&(ee=this.anchorDragBoundFunc()(B,ee,O)),K.setAbsolutePosition(ee);const z=K.getAbsolutePosition();if(B.x===z.x&&B.y===z.y)return;if(this._movingAnchorName==="rotater"){const ne=this._getNodeRect();R=K.x()-ne.width/2,M=-K.y()+ne.height/2;let Z=Math.atan2(-M,R)+Math.PI/2;ne.height<0&&(Z-=Math.PI);const ce=i.Konva.getAngle(this.rotation())+Z,he=i.Konva.getAngle(this.rotationSnapTolerance()),ie=E(this.rotationSnaps(),ce,he)-ne.rotation,me=b(ne,ie);this._fitNodesInto(me,O);return}const I=this.shiftBehavior();let W;I==="inverted"?W=this.keepRatio()&&!O.shiftKey:I==="none"?W=this.keepRatio():W=this.keepRatio()||O.shiftKey;let V=this.centeredScaling()||O.altKey;if(this._movingAnchorName==="top-left"){if(W){const ne=V?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};G=Math.sqrt(Math.pow(ne.x-K.x(),2)+Math.pow(ne.y-K.y(),2));const Z=this.findOne(".top-left").x()>ne.x?-1:1,se=this.findOne(".top-left").y()>ne.y?-1:1;R=G*this.cos*Z,M=G*this.sin*se,this.findOne(".top-left").x(ne.x-R),this.findOne(".top-left").y(ne.y-M)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(K.y());else if(this._movingAnchorName==="top-right"){if(W){const ne=V?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};G=Math.sqrt(Math.pow(K.x()-ne.x,2)+Math.pow(ne.y-K.y(),2));const Z=this.findOne(".top-right").x()<ne.x?-1:1,se=this.findOne(".top-right").y()>ne.y?-1:1;R=G*this.cos*Z,M=G*this.sin*se,this.findOne(".top-right").x(ne.x+R),this.findOne(".top-right").y(ne.y-M)}var L=K.position();this.findOne(".top-left").y(L.y),this.findOne(".bottom-right").x(L.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(K.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(K.x());else if(this._movingAnchorName==="bottom-left"){if(W){const ne=V?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};G=Math.sqrt(Math.pow(ne.x-K.x(),2)+Math.pow(K.y()-ne.y,2));const Z=ne.x<K.x()?-1:1,se=K.y()<ne.y?-1:1;R=G*this.cos*Z,M=G*this.sin*se,K.x(ne.x-R),K.y(ne.y+M)}L=K.position(),this.findOne(".top-left").x(L.x),this.findOne(".bottom-right").y(L.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(K.y());else if(this._movingAnchorName==="bottom-right"){if(W){const ne=V?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};G=Math.sqrt(Math.pow(K.x()-ne.x,2)+Math.pow(K.y()-ne.y,2));const Z=this.findOne(".bottom-right").x()<ne.x?-1:1,se=this.findOne(".bottom-right").y()<ne.y?-1:1;R=G*this.cos*Z,M=G*this.sin*se,this.findOne(".bottom-right").x(ne.x+R),this.findOne(".bottom-right").y(ne.y+M)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(V=this.centeredScaling()||O.altKey,V){const ne=this.findOne(".top-left"),Z=this.findOne(".bottom-right"),se=ne.x(),ce=ne.y(),he=this.getWidth()-Z.x(),Ee=this.getHeight()-Z.y();Z.move({x:-se,y:-ce}),ne.move({x:he,y:Ee})}const H=this.findOne(".top-left").getAbsolutePosition();R=H.x,M=H.y;const J=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),Q=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:R,y:M,width:J,height:Q,rotation:i.Konva.getAngle(this.rotation())},O)}_handleMouseUp(O){this._removeEvents(O)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(O){var R;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const M=this.getNode();k--,this._fire("transformend",{evt:O,target:M}),(R=this.getLayer())===null||R===void 0||R.batchDraw(),M&&this._nodes.forEach(G=>{var K;G._fire("transformend",{evt:O,target:G}),(K=G.getLayer())===null||K===void 0||K.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(O,R){const M=this._getNodeRect(),G=1;if(e.Util._inRange(O.width,-this.padding()*2-G,G)){this.update();return}if(e.Util._inRange(O.height,-this.padding()*2-G,G)){this.update();return}const K=new e.Transform;if(K.rotate(i.Konva.getAngle(this.rotation())),this._movingAnchorName&&O.width<0&&this._movingAnchorName.indexOf("left")>=0){const W=K.point({x:-this.padding()*2,y:0});O.x+=W.x,O.y+=W.y,O.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=W.x,this._anchorDragOffset.y-=W.y}else if(this._movingAnchorName&&O.width<0&&this._movingAnchorName.indexOf("right")>=0){const W=K.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=W.x,this._anchorDragOffset.y-=W.y,O.width+=this.padding()*2}if(this._movingAnchorName&&O.height<0&&this._movingAnchorName.indexOf("top")>=0){const W=K.point({x:0,y:-this.padding()*2});O.x+=W.x,O.y+=W.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=W.x,this._anchorDragOffset.y-=W.y,O.height+=this.padding()*2}else if(this._movingAnchorName&&O.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const W=K.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=W.x,this._anchorDragOffset.y-=W.y,O.height+=this.padding()*2}if(this.boundBoxFunc()){const W=this.boundBoxFunc()(M,O);W?O=W:e.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const re=1e7,Y=new e.Transform;Y.translate(M.x,M.y),Y.rotate(M.rotation),Y.scale(M.width/re,M.height/re);const ee=new e.Transform,B=O.width/re,z=O.height/re;this.flipEnabled()===!1?(ee.translate(O.x,O.y),ee.rotate(O.rotation),ee.translate(O.width<0?O.width:0,O.height<0?O.height:0),ee.scale(Math.abs(B),Math.abs(z))):(ee.translate(O.x,O.y),ee.rotate(O.rotation),ee.scale(B,z));const I=ee.multiply(Y.invert());this._nodes.forEach(W=>{var V;const L=W.getParent().getAbsoluteTransform(),H=W.getTransform().copy();H.translate(W.offsetX(),W.offsetY());const J=new e.Transform;J.multiply(L.copy().invert()).multiply(I).multiply(L).multiply(H);const Q=J.decompose();W.setAttrs(Q),(V=W.getLayer())===null||V===void 0||V.batchDraw()}),this.rotation(e.Util._getRotation(O.rotation)),this._nodes.forEach(W=>{this._fire("transform",{evt:R,target:W}),W._fire("transform",{evt:R,target:W})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(O,R){this.findOne(O).setAttrs(R)}update(){var O;const R=this._getNodeRect();this.rotation(e.Util._getRotation(R.rotation));const M=R.width,G=R.height,K=this.enabledAnchors(),re=this.resizeEnabled(),Y=this.padding(),ee=this.anchorSize(),B=this.find("._anchor");B.forEach(I=>{I.setAttrs({width:ee,height:ee,offsetX:ee/2,offsetY:ee/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:ee/2+Y,offsetY:ee/2+Y,visible:re&&K.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:M/2,y:0,offsetY:ee/2+Y,visible:re&&K.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:M,y:0,offsetX:ee/2-Y,offsetY:ee/2+Y,visible:re&&K.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:G/2,offsetX:ee/2+Y,visible:re&&K.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:M,y:G/2,offsetX:ee/2-Y,visible:re&&K.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:G,offsetX:ee/2+Y,offsetY:ee/2-Y,visible:re&&K.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:M/2,y:G,offsetY:ee/2-Y,visible:re&&K.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:M,y:G,offsetX:ee/2-Y,offsetY:ee/2-Y,visible:re&&K.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:M/2,y:-this.rotateAnchorOffset()*e.Util._sign(G)-Y,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:M,height:G,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const z=this.anchorStyleFunc();z&&B.forEach(I=>{z(I)}),(O=this.getLayer())===null||O===void 0||O.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const O=this.findOne("."+this._movingAnchorName);O&&O.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),a.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return r.Node.prototype.toObject.call(this)}clone(O){return r.Node.prototype.clone.call(this,O)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Dy.Transformer=A,A.isTransforming=()=>k>0;function P(j){return j instanceof Array||e.Util.warn("enabledAnchors value should be an array"),j instanceof Array&&j.forEach(function(O){v.indexOf(O)===-1&&e.Util.warn("Unknown anchor name: "+O+". Available names are: "+v.join(", "))}),j||[]}return A.prototype.className="Transformer",(0,l._registerNode)(A),t.Factory.addGetterSetter(A,"enabledAnchors",v,P),t.Factory.addGetterSetter(A,"flipEnabled",!0,(0,o.getBooleanValidator)()),t.Factory.addGetterSetter(A,"resizeEnabled",!0),t.Factory.addGetterSetter(A,"anchorSize",10,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"rotateEnabled",!0),t.Factory.addGetterSetter(A,"rotateLineVisible",!0),t.Factory.addGetterSetter(A,"rotationSnaps",[]),t.Factory.addGetterSetter(A,"rotateAnchorOffset",50,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(A,"rotationSnapTolerance",5,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"borderEnabled",!0),t.Factory.addGetterSetter(A,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(A,"anchorStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"anchorFill","white"),t.Factory.addGetterSetter(A,"anchorCornerRadius",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(A,"borderStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"borderDash"),t.Factory.addGetterSetter(A,"keepRatio",!0),t.Factory.addGetterSetter(A,"shiftBehavior","default"),t.Factory.addGetterSetter(A,"centeredScaling",!1),t.Factory.addGetterSetter(A,"ignoreStroke",!1),t.Factory.addGetterSetter(A,"padding",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"nodes"),t.Factory.addGetterSetter(A,"node"),t.Factory.addGetterSetter(A,"boundBoxFunc"),t.Factory.addGetterSetter(A,"anchorDragBoundFunc"),t.Factory.addGetterSetter(A,"anchorStyleFunc"),t.Factory.addGetterSetter(A,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(A,"useSingleNodeRotation",!0),t.Factory.backCompat(A,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Dy}var Iy={},DF;function jse(){if(DF)return Iy;DF=1,Object.defineProperty(Iy,"__esModule",{value:!0}),Iy.Wedge=void 0;const e=an(),t=$a(),r=Zr(),n=ln(),s=Zr();class a extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.radius(),0,r.Konva.getAngle(this.angle()),this.clockwise()),o.lineTo(0,0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}}return Iy.Wedge=a,a.prototype.className="Wedge",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"radius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"angle",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clockwise",!1),e.Factory.backCompat(a,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Iy}var My={},IF;function Pse(){if(IF)return My;IF=1,Object.defineProperty(My,"__esModule",{value:!0}),My.Blur=void 0;const e=an(),t=qs(),r=ln();function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function i(l,u){const d=l.data,f=l.width,g=l.height;let p,x,y,v,T,_,b,E,k,A,P,j,O,R,M,G,K,re,Y,ee;const B=u+u+1,z=f-1,I=g-1,W=u+1,V=W*(W+1)/2,L=new n,H=s[u],J=a[u];let Q=null,ne=L,Z=null,se=null;for(let ce=1;ce<B;ce++)ne=ne.next=new n,ce===W&&(Q=ne);ne.next=L,y=x=0;for(let ce=0;ce<g;ce++){j=O=R=M=v=T=_=b=0,E=W*(G=d[x]),k=W*(K=d[x+1]),A=W*(re=d[x+2]),P=W*(Y=d[x+3]),v+=V*G,T+=V*K,_+=V*re,b+=V*Y,ne=L;for(let he=0;he<W;he++)ne.r=G,ne.g=K,ne.b=re,ne.a=Y,ne=ne.next;for(let he=1;he<W;he++)p=x+((z<he?z:he)<<2),v+=(ne.r=G=d[p])*(ee=W-he),T+=(ne.g=K=d[p+1])*ee,_+=(ne.b=re=d[p+2])*ee,b+=(ne.a=Y=d[p+3])*ee,j+=G,O+=K,R+=re,M+=Y,ne=ne.next;Z=L,se=Q;for(let he=0;he<f;he++)d[x+3]=Y=b*H>>J,Y!==0?(Y=255/Y,d[x]=(v*H>>J)*Y,d[x+1]=(T*H>>J)*Y,d[x+2]=(_*H>>J)*Y):d[x]=d[x+1]=d[x+2]=0,v-=E,T-=k,_-=A,b-=P,E-=Z.r,k-=Z.g,A-=Z.b,P-=Z.a,p=y+((p=he+u+1)<z?p:z)<<2,j+=Z.r=d[p],O+=Z.g=d[p+1],R+=Z.b=d[p+2],M+=Z.a=d[p+3],v+=j,T+=O,_+=R,b+=M,Z=Z.next,E+=G=se.r,k+=K=se.g,A+=re=se.b,P+=Y=se.a,j-=G,O-=K,R-=re,M-=Y,se=se.next,x+=4;y+=f}for(let ce=0;ce<f;ce++){O=R=M=j=T=_=b=v=0,x=ce<<2,E=W*(G=d[x]),k=W*(K=d[x+1]),A=W*(re=d[x+2]),P=W*(Y=d[x+3]),v+=V*G,T+=V*K,_+=V*re,b+=V*Y,ne=L;for(let Ee=0;Ee<W;Ee++)ne.r=G,ne.g=K,ne.b=re,ne.a=Y,ne=ne.next;let he=f;for(let Ee=1;Ee<=u;Ee++)x=he+ce<<2,v+=(ne.r=G=d[x])*(ee=W-Ee),T+=(ne.g=K=d[x+1])*ee,_+=(ne.b=re=d[x+2])*ee,b+=(ne.a=Y=d[x+3])*ee,j+=G,O+=K,R+=re,M+=Y,ne=ne.next,Ee<I&&(he+=f);x=ce,Z=L,se=Q;for(let Ee=0;Ee<g;Ee++)p=x<<2,d[p+3]=Y=b*H>>J,Y>0?(Y=255/Y,d[p]=(v*H>>J)*Y,d[p+1]=(T*H>>J)*Y,d[p+2]=(_*H>>J)*Y):d[p]=d[p+1]=d[p+2]=0,v-=E,T-=k,_-=A,b-=P,E-=Z.r,k-=Z.g,A-=Z.b,P-=Z.a,p=ce+((p=Ee+W)<I?p:I)*f<<2,v+=j+=Z.r=d[p],T+=O+=Z.g=d[p+1],_+=R+=Z.b=d[p+2],b+=M+=Z.a=d[p+3],Z=Z.next,E+=G=se.r,k+=K=se.g,A+=re=se.b,P+=Y=se.a,j-=G,O-=K,R-=re,M-=Y,se=se.next,x+=f}}const o=function(u){const d=Math.round(this.blurRadius());d>0&&i(u,d)};return My.Blur=o,e.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),My}var Ly={},MF;function Ose(){if(MF)return Ly;MF=1,Object.defineProperty(Ly,"__esModule",{value:!0}),Ly.Brighten=void 0;const e=an(),t=qs(),r=ln(),n=function(s){const a=this.brightness()*255,i=s.data,o=i.length;for(let l=0;l<o;l+=4)i[l]+=a,i[l+1]+=a,i[l+2]+=a};return Ly.Brighten=n,e.Factory.addGetterSetter(t.Node,"brightness",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),Ly}var By={},LF;function Fse(){if(LF)return By;LF=1,Object.defineProperty(By,"__esModule",{value:!0}),By.Contrast=void 0;const e=an(),t=qs(),r=ln(),n=function(s){const a=Math.pow((this.contrast()+100)/100,2),i=s.data,o=i.length;let l=150,u=150,d=150;for(let f=0;f<o;f+=4)l=i[f],u=i[f+1],d=i[f+2],l/=255,l-=.5,l*=a,l+=.5,l*=255,u/=255,u-=.5,u*=a,u+=.5,u*=255,d/=255,d-=.5,d*=a,d+=.5,d*=255,l=l<0?0:l>255?255:l,u=u<0?0:u>255?255:u,d=d<0?0:d>255?255:d,i[f]=l,i[f+1]=u,i[f+2]=d};return By.Contrast=n,e.Factory.addGetterSetter(t.Node,"contrast",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),By}var $y={},BF;function Rse(){if(BF)return $y;BF=1,Object.defineProperty($y,"__esModule",{value:!0}),$y.Emboss=void 0;const e=an(),t=qs(),r=Ds(),n=ln(),s=function(a){const i=this.embossStrength()*10,o=this.embossWhiteLevel()*255,l=this.embossDirection(),u=this.embossBlend(),d=a.data,f=a.width,g=a.height,p=f*4;let x=0,y=0,v=g;switch(l){case"top-left":x=-1,y=-1;break;case"top":x=-1,y=0;break;case"top-right":x=-1,y=1;break;case"right":x=0,y=1;break;case"bottom-right":x=1,y=1;break;case"bottom":x=1,y=0;break;case"bottom-left":x=1,y=-1;break;case"left":x=0,y=-1;break;default:r.Util.error("Unknown emboss direction: "+l)}do{const T=(v-1)*p;let _=x;v+_<1&&(_=0),v+_>g&&(_=0);const b=(v-1+_)*f*4;let E=f;do{const k=T+(E-1)*4;let A=y;E+A<1&&(A=0),E+A>f&&(A=0);const P=b+(E-1+A)*4,j=d[k]-d[P],O=d[k+1]-d[P+1],R=d[k+2]-d[P+2];let M=j;const G=M>0?M:-M,K=O>0?O:-O,re=R>0?R:-R;if(K>G&&(M=O),re>G&&(M=R),M*=i,u){const Y=d[k]+M,ee=d[k+1]+M,B=d[k+2]+M;d[k]=Y>255?255:Y<0?0:Y,d[k+1]=ee>255?255:ee<0?0:ee,d[k+2]=B>255?255:B<0?0:B}else{let Y=o-M;Y<0?Y=0:Y>255&&(Y=255),d[k]=d[k+1]=d[k+2]=Y}}while(--E)}while(--v)};return $y.Emboss=s,e.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,e.Factory.afterSetFilter),$y}var Uy={},$F;function Dse(){if($F)return Uy;$F=1,Object.defineProperty(Uy,"__esModule",{value:!0}),Uy.Enhance=void 0;const e=an(),t=qs(),r=ln();function n(a,i,o,l,u){const d=o-i,f=u-l;if(d===0)return l+f/2;if(f===0)return l;let g=(a-i)/d;return g=f*g+l,g}const s=function(a){const i=a.data,o=i.length;let l=i[0],u=l,d,f=i[1],g=f,p,x=i[2],y=x,v;const T=this.enhance();if(T===0)return;for(let j=0;j<o;j+=4)d=i[j+0],d<l?l=d:d>u&&(u=d),p=i[j+1],p<f?f=p:p>g&&(g=p),v=i[j+2],v<x?x=v:v>y&&(y=v);u===l&&(u=255,l=0),g===f&&(g=255,f=0),y===x&&(y=255,x=0);let _,b,E,k,A,P;if(T>0)_=u+T*(255-u),b=l-T*(l-0),E=g+T*(255-g),k=f-T*(f-0),A=y+T*(255-y),P=x-T*(x-0);else{const j=(u+l)*.5;_=u+T*(u-j),b=l+T*(l-j);const O=(g+f)*.5;E=g+T*(g-O),k=f+T*(f-O);const R=(y+x)*.5;A=y+T*(y-R),P=x+T*(x-R)}for(let j=0;j<o;j+=4)i[j+0]=n(i[j+0],l,u,b,_),i[j+1]=n(i[j+1],f,g,k,E),i[j+2]=n(i[j+2],x,y,P,A)};return Uy.Enhance=s,e.Factory.addGetterSetter(t.Node,"enhance",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),Uy}var Wy={},UF;function Ise(){if(UF)return Wy;UF=1,Object.defineProperty(Wy,"__esModule",{value:!0}),Wy.Grayscale=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4){const a=.34*r[s]+.5*r[s+1]+.16*r[s+2];r[s]=a,r[s+1]=a,r[s+2]=a}};return Wy.Grayscale=e,Wy}var zy={},WF;function Mse(){if(WF)return zy;WF=1,Object.defineProperty(zy,"__esModule",{value:!0}),zy.HSL=void 0;const e=an(),t=qs(),r=ln();e.Factory.addGetterSetter(t.Node,"hue",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"luminance",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter);const n=function(s){const a=s.data,i=a.length,o=1,l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=this.luminance()*127,f=o*l*Math.cos(u*Math.PI/180),g=o*l*Math.sin(u*Math.PI/180),p=.299*o+.701*f+.167*g,x=.587*o-.587*f+.33*g,y=.114*o-.114*f-.497*g,v=.299*o-.299*f-.328*g,T=.587*o+.413*f+.035*g,_=.114*o-.114*f+.293*g,b=.299*o-.3*f+1.25*g,E=.587*o-.586*f-1.05*g,k=.114*o+.886*f-.2*g;let A,P,j,O;for(let R=0;R<i;R+=4)A=a[R+0],P=a[R+1],j=a[R+2],O=a[R+3],a[R+0]=p*A+x*P+y*j+d,a[R+1]=v*A+T*P+_*j+d,a[R+2]=b*A+E*P+k*j+d,a[R+3]=O};return zy.HSL=n,zy}var Hy={},zF;function Lse(){if(zF)return Hy;zF=1,Object.defineProperty(Hy,"__esModule",{value:!0}),Hy.HSV=void 0;const e=an(),t=qs(),r=ln(),n=function(s){const a=s.data,i=a.length,o=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=o*l*Math.cos(u*Math.PI/180),f=o*l*Math.sin(u*Math.PI/180),g=.299*o+.701*d+.167*f,p=.587*o-.587*d+.33*f,x=.114*o-.114*d-.497*f,y=.299*o-.299*d-.328*f,v=.587*o+.413*d+.035*f,T=.114*o-.114*d+.293*f,_=.299*o-.3*d+1.25*f,b=.587*o-.586*d-1.05*f,E=.114*o+.886*d-.2*f;for(let k=0;k<i;k+=4){const A=a[k+0],P=a[k+1],j=a[k+2],O=a[k+3];a[k+0]=g*A+p*P+x*j,a[k+1]=y*A+v*P+T*j,a[k+2]=_*A+b*P+E*j,a[k+3]=O}};return Hy.HSV=n,e.Factory.addGetterSetter(t.Node,"hue",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"value",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),Hy}var Gy={},HF;function Bse(){if(HF)return Gy;HF=1,Object.defineProperty(Gy,"__esModule",{value:!0}),Gy.Invert=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4)r[s]=255-r[s],r[s+1]=255-r[s+1],r[s+2]=255-r[s+2]};return Gy.Invert=e,Gy}var Vy={},GF;function $se(){if(GF)return Vy;GF=1,Object.defineProperty(Vy,"__esModule",{value:!0}),Vy.Kaleidoscope=void 0;const e=an(),t=qs(),r=Ds(),n=ln(),s=function(o,l,u){const d=o.data,f=l.data,g=o.width,p=o.height,x=u.polarCenterX||g/2,y=u.polarCenterY||p/2;let v=Math.sqrt(x*x+y*y),T=g-x,_=p-y;const b=Math.sqrt(T*T+_*_);v=b>v?b:v;const E=p,k=g,A=360/k*Math.PI/180;for(let P=0;P<k;P+=1){const j=Math.sin(P*A),O=Math.cos(P*A);for(let R=0;R<E;R+=1){T=Math.floor(x+v*R/E*O),_=Math.floor(y+v*R/E*j);let M=(_*g+T)*4;const G=d[M+0],K=d[M+1],re=d[M+2],Y=d[M+3];M=(P+R*g)*4,f[M+0]=G,f[M+1]=K,f[M+2]=re,f[M+3]=Y}}},a=function(o,l,u){const d=o.data,f=l.data,g=o.width,p=o.height,x=u.polarCenterX||g/2,y=u.polarCenterY||p/2;let v=Math.sqrt(x*x+y*y),T=g-x,_=p-y;const b=Math.sqrt(T*T+_*_);v=b>v?b:v;const E=p,k=g,A=0;let P,j;for(T=0;T<g;T+=1)for(_=0;_<p;_+=1){const O=T-x,R=_-y,M=Math.sqrt(O*O+R*R)*E/v;let G=(Math.atan2(R,O)*180/Math.PI+360+A)%360;G=G*k/360,P=Math.floor(G),j=Math.floor(M);let K=(j*g+P)*4;const re=d[K+0],Y=d[K+1],ee=d[K+2],B=d[K+3];K=(_*g+T)*4,f[K+0]=re,f[K+1]=Y,f[K+2]=ee,f[K+3]=B}},i=function(o){const l=o.width,u=o.height;let d,f,g,p,x,y,v,T,_,b,E=Math.round(this.kaleidoscopePower());const k=Math.round(this.kaleidoscopeAngle()),A=Math.floor(l*(k%360)/360);if(E<1)return;const P=r.Util.createCanvasElement();P.width=l,P.height=u;const j=P.getContext("2d").getImageData(0,0,l,u);r.Util.releaseCanvas(P),s(o,j,{polarCenterX:l/2,polarCenterY:u/2});let O=l/Math.pow(2,E);for(;O<=8;)O=O*2,E-=1;O=Math.ceil(O);let R=O,M=0,G=R,K=1;for(A+O>l&&(M=R,G=0,K=-1),f=0;f<u;f+=1)for(d=M;d!==G;d+=K)g=Math.round(d+A)%l,_=(l*f+g)*4,x=j.data[_+0],y=j.data[_+1],v=j.data[_+2],T=j.data[_+3],b=(l*f+d)*4,j.data[b+0]=x,j.data[b+1]=y,j.data[b+2]=v,j.data[b+3]=T;for(f=0;f<u;f+=1)for(R=Math.floor(O),p=0;p<E;p+=1){for(d=0;d<R+1;d+=1)_=(l*f+d)*4,x=j.data[_+0],y=j.data[_+1],v=j.data[_+2],T=j.data[_+3],b=(l*f+R*2-d-1)*4,j.data[b+0]=x,j.data[b+1]=y,j.data[b+2]=v,j.data[b+3]=T;R*=2}a(j,o,{})};return Vy.Kaleidoscope=i,e.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),Vy}var qy={},VF;function Use(){if(VF)return qy;VF=1,Object.defineProperty(qy,"__esModule",{value:!0}),qy.Mask=void 0;const e=an(),t=qs(),r=ln();function n(g,p,x){let y=(x*g.width+p)*4;const v=[];return v.push(g.data[y++],g.data[y++],g.data[y++],g.data[y++]),v}function s(g,p){return Math.sqrt(Math.pow(g[0]-p[0],2)+Math.pow(g[1]-p[1],2)+Math.pow(g[2]-p[2],2))}function a(g){const p=[0,0,0];for(let x=0;x<g.length;x++)p[0]+=g[x][0],p[1]+=g[x][1],p[2]+=g[x][2];return p[0]/=g.length,p[1]/=g.length,p[2]/=g.length,p}function i(g,p){const x=n(g,0,0),y=n(g,g.width-1,0),v=n(g,0,g.height-1),T=n(g,g.width-1,g.height-1),_=p||10;if(s(x,y)<_&&s(y,T)<_&&s(T,v)<_&&s(v,x)<_){const b=a([y,x,T,v]),E=[];for(let k=0;k<g.width*g.height;k++){const A=s(b,[g.data[k*4],g.data[k*4+1],g.data[k*4+2]]);E[k]=A<_?0:255}return E}}function o(g,p){for(let x=0;x<g.width*g.height;x++)g.data[4*x+3]=p[x]}function l(g,p,x){const y=[1,1,1,1,0,1,1,1,1],v=Math.round(Math.sqrt(y.length)),T=Math.floor(v/2),_=[];for(let b=0;b<x;b++)for(let E=0;E<p;E++){const k=b*p+E;let A=0;for(let P=0;P<v;P++)for(let j=0;j<v;j++){const O=b+P-T,R=E+j-T;if(O>=0&&O<x&&R>=0&&R<p){const M=O*p+R,G=y[P*v+j];A+=g[M]*G}}_[k]=A===2040?255:0}return _}function u(g,p,x){const y=[1,1,1,1,1,1,1,1,1],v=Math.round(Math.sqrt(y.length)),T=Math.floor(v/2),_=[];for(let b=0;b<x;b++)for(let E=0;E<p;E++){const k=b*p+E;let A=0;for(let P=0;P<v;P++)for(let j=0;j<v;j++){const O=b+P-T,R=E+j-T;if(O>=0&&O<x&&R>=0&&R<p){const M=O*p+R,G=y[P*v+j];A+=g[M]*G}}_[k]=A>=1020?255:0}return _}function d(g,p,x){const y=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],v=Math.round(Math.sqrt(y.length)),T=Math.floor(v/2),_=[];for(let b=0;b<x;b++)for(let E=0;E<p;E++){const k=b*p+E;let A=0;for(let P=0;P<v;P++)for(let j=0;j<v;j++){const O=b+P-T,R=E+j-T;if(O>=0&&O<x&&R>=0&&R<p){const M=O*p+R,G=y[P*v+j];A+=g[M]*G}}_[k]=A}return _}const f=function(g){const p=this.threshold();let x=i(g,p);return x&&(x=l(x,g.width,g.height),x=u(x,g.width,g.height),x=d(x,g.width,g.height),o(g,x)),g};return qy.Mask=f,e.Factory.addGetterSetter(t.Node,"threshold",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),qy}var Ky={},qF;function Wse(){if(qF)return Ky;qF=1,Object.defineProperty(Ky,"__esModule",{value:!0}),Ky.Noise=void 0;const e=an(),t=qs(),r=ln(),n=function(s){const a=this.noise()*255,i=s.data,o=i.length,l=a/2;for(let u=0;u<o;u+=4)i[u+0]+=l-2*l*Math.random(),i[u+1]+=l-2*l*Math.random(),i[u+2]+=l-2*l*Math.random()};return Ky.Noise=n,e.Factory.addGetterSetter(t.Node,"noise",.2,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),Ky}var Xy={},KF;function zse(){if(KF)return Xy;KF=1,Object.defineProperty(Xy,"__esModule",{value:!0}),Xy.Pixelate=void 0;const e=an(),t=Ds(),r=qs(),n=ln(),s=function(a){let i=Math.ceil(this.pixelSize()),o=a.width,l=a.height,u=Math.ceil(o/i),d=Math.ceil(l/i),f=a.data;if(i<=0){t.Util.error("pixelSize value can not be <= 0");return}for(let g=0;g<u;g+=1)for(let p=0;p<d;p+=1){let x=0,y=0,v=0,T=0;const _=g*i,b=_+i,E=p*i,k=E+i;let A=0;for(let P=_;P<b;P+=1)if(!(P>=o))for(let j=E;j<k;j+=1){if(j>=l)continue;const O=(o*j+P)*4;x+=f[O+0],y+=f[O+1],v+=f[O+2],T+=f[O+3],A+=1}x=x/A,y=y/A,v=v/A,T=T/A;for(let P=_;P<b;P+=1)if(!(P>=o))for(let j=E;j<k;j+=1){if(j>=l)continue;const O=(o*j+P)*4;f[O+0]=x,f[O+1]=y,f[O+2]=v,f[O+3]=T}}};return Xy.Pixelate=s,e.Factory.addGetterSetter(r.Node,"pixelSize",8,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),Xy}var Yy={},XF;function Hse(){if(XF)return Yy;XF=1,Object.defineProperty(Yy,"__esModule",{value:!0}),Yy.Posterize=void 0;const e=an(),t=qs(),r=ln(),n=function(s){const a=Math.round(this.levels()*254)+1,i=s.data,o=i.length,l=255/a;for(let u=0;u<o;u+=1)i[u]=Math.floor(i[u]/l)*l};return Yy.Posterize=n,e.Factory.addGetterSetter(t.Node,"levels",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),Yy}var Jy={},YF;function Gse(){if(YF)return Jy;YF=1,Object.defineProperty(Jy,"__esModule",{value:!0}),Jy.RGB=void 0;const e=an(),t=qs(),r=ln(),n=function(s){const a=s.data,i=a.length,o=this.red(),l=this.green(),u=this.blue();for(let d=0;d<i;d+=4){const f=(.34*a[d]+.5*a[d+1]+.16*a[d+2])/255;a[d]=f*o,a[d+1]=f*l,a[d+2]=f*u,a[d+3]=a[d+3]}};return Jy.RGB=n,e.Factory.addGetterSetter(t.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"blue",0,r.RGBComponent,e.Factory.afterSetFilter),Jy}var Qy={},JF;function Vse(){if(JF)return Qy;JF=1,Object.defineProperty(Qy,"__esModule",{value:!0}),Qy.RGBA=void 0;const e=an(),t=qs(),r=ln(),n=function(s){const a=s.data,i=a.length,o=this.red(),l=this.green(),u=this.blue(),d=this.alpha();for(let f=0;f<i;f+=4){const g=1-d;a[f]=o*d+a[f]*g,a[f+1]=l*d+a[f+1]*g,a[f+2]=u*d+a[f+2]*g}};return Qy.RGBA=n,e.Factory.addGetterSetter(t.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"blue",0,r.RGBComponent,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"alpha",1,function(s){return this._filterUpToDate=!1,s>1?1:s<0?0:s}),Qy}var Zy={},QF;function qse(){if(QF)return Zy;QF=1,Object.defineProperty(Zy,"__esModule",{value:!0}),Zy.Sepia=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4){const a=r[s+0],i=r[s+1],o=r[s+2];r[s+0]=Math.min(255,a*.393+i*.769+o*.189),r[s+1]=Math.min(255,a*.349+i*.686+o*.168),r[s+2]=Math.min(255,a*.272+i*.534+o*.131)}};return Zy.Sepia=e,Zy}var ex={},ZF;function Kse(){if(ZF)return ex;ZF=1,Object.defineProperty(ex,"__esModule",{value:!0}),ex.Solarize=void 0;const e=function(t){const r=t.data,n=t.width,s=t.height,a=n*4;let i=s;do{const o=(i-1)*a;let l=n;do{const u=o+(l-1)*4;let d=r[u],f=r[u+1],g=r[u+2];d>127&&(d=255-d),f>127&&(f=255-f),g>127&&(g=255-g),r[u]=d,r[u+1]=f,r[u+2]=g}while(--l)}while(--i)};return ex.Solarize=e,ex}var tx={},eR;function Xse(){if(eR)return tx;eR=1,Object.defineProperty(tx,"__esModule",{value:!0}),tx.Threshold=void 0;const e=an(),t=qs(),r=ln(),n=function(s){const a=this.threshold()*255,i=s.data,o=i.length;for(let l=0;l<o;l+=1)i[l]=i[l]<a?0:255};return tx.Threshold=n,e.Factory.addGetterSetter(t.Node,"threshold",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),tx}var tR;function Yse(){if(tR)return py;tR=1,Object.defineProperty(py,"__esModule",{value:!0}),py.Konva=void 0;const e=iA(),t=yse(),r=vse(),n=wse(),s=bse(),a=_se(),i=Sse(),o=gH(),l=i5(),u=pH(),d=kse(),f=Tse(),g=Cse(),p=Ese(),x=mH(),y=Nse(),v=Ase(),T=jse(),_=Pse(),b=Ose(),E=Fse(),k=Rse(),A=Dse(),P=Ise(),j=Mse(),O=Lse(),R=Bse(),M=$se(),G=Use(),K=Wse(),re=zse(),Y=Hse(),ee=Gse(),B=Vse(),z=qse(),I=Kse(),W=Xse();return py.Konva=e.Konva.Util._assign(e.Konva,{Arc:t.Arc,Arrow:r.Arrow,Circle:n.Circle,Ellipse:s.Ellipse,Image:a.Image,Label:i.Label,Tag:i.Tag,Line:o.Line,Path:l.Path,Rect:u.Rect,RegularPolygon:d.RegularPolygon,Ring:f.Ring,Sprite:g.Sprite,Star:p.Star,Text:x.Text,TextPath:y.TextPath,Transformer:v.Transformer,Wedge:T.Wedge,Filters:{Blur:_.Blur,Brighten:b.Brighten,Contrast:E.Contrast,Emboss:k.Emboss,Enhance:A.Enhance,Grayscale:P.Grayscale,HSL:j.HSL,HSV:O.HSV,Invert:R.Invert,Kaleidoscope:M.Kaleidoscope,Mask:G.Mask,Noise:K.Noise,Pixelate:re.Pixelate,Posterize:Y.Posterize,RGB:ee.RGB,RGBA:B.RGBA,Sepia:z.Sepia,Solarize:I.Solarize,Threshold:W.Threshold}}),py}var Jse=$b.exports,rR;function Qse(){if(rR)return $b.exports;rR=1,Object.defineProperty(Jse,"__esModule",{value:!0});const e=Yse();return $b.exports=e.Konva,$b.exports}var yH=Qse();const Zse=kn(yH),eae=pW({__proto__:null,default:Zse},[yH]);var Zw={exports:{}},nR;function tae(){return nR||(nR=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var r=iA();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return r.Konva}});const n=iA();e.exports=n.Konva})(Zw,Zw.exports)),Zw.exports}var rae=tae();const av=kn(rae);var Qk={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zk,sR;function nae(){return sR||(sR=1,Zk=function(t){var r={},n=A2(),s=vj(),a=Object.assign;function i(w){for(var S="https://reactjs.org/docs/error-decoder.html?invariant="+w,F=1;F<arguments.length;F++)S+="&args[]="+encodeURIComponent(arguments[F]);return"Minified React error #"+w+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),x=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),k=Symbol.iterator;function A(w){return w===null||typeof w!="object"?null:(w=k&&w[k]||w["@@iterator"],typeof w=="function"?w:null)}function P(w){if(w==null)return null;if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w;switch(w){case d:return"Fragment";case u:return"Portal";case g:return"Profiler";case f:return"StrictMode";case v:return"Suspense";case T:return"SuspenseList"}if(typeof w=="object")switch(w.$$typeof){case x:return(w.displayName||"Context")+".Consumer";case p:return(w._context.displayName||"Context")+".Provider";case y:var S=w.render;return w=w.displayName,w||(w=S.displayName||S.name||"",w=w!==""?"ForwardRef("+w+")":"ForwardRef"),w;case _:return S=w.displayName||null,S!==null?S:P(w.type)||"Memo";case b:S=w._payload,w=w._init;try{return P(w(S))}catch{}}return null}function j(w){var S=w.type;switch(w.tag){case 24:return"Cache";case 9:return(S.displayName||"Context")+".Consumer";case 10:return(S._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return w=S.render,w=w.displayName||w.name||"",S.displayName||(w!==""?"ForwardRef("+w+")":"ForwardRef");case 7:return"Fragment";case 5:return S;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(S);case 8:return S===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof S=="function")return S.displayName||S.name||null;if(typeof S=="string")return S}return null}function O(w){var S=w,F=w;if(w.alternate)for(;S.return;)S=S.return;else{w=S;do S=w,(S.flags&4098)!==0&&(F=S.return),w=S.return;while(w)}return S.tag===3?F:null}function R(w){if(O(w)!==w)throw Error(i(188))}function M(w){var S=w.alternate;if(!S){if(S=O(w),S===null)throw Error(i(188));return S!==w?null:w}for(var F=w,U=S;;){var X=F.return;if(X===null)break;var ae=X.alternate;if(ae===null){if(U=X.return,U!==null){F=U;continue}break}if(X.child===ae.child){for(ae=X.child;ae;){if(ae===F)return R(X),w;if(ae===U)return R(X),S;ae=ae.sibling}throw Error(i(188))}if(F.return!==U.return)F=X,U=ae;else{for(var be=!1,He=X.child;He;){if(He===F){be=!0,F=X,U=ae;break}if(He===U){be=!0,U=X,F=ae;break}He=He.sibling}if(!be){for(He=ae.child;He;){if(He===F){be=!0,F=ae,U=X;break}if(He===U){be=!0,U=ae,F=X;break}He=He.sibling}if(!be)throw Error(i(189))}}if(F.alternate!==U)throw Error(i(190))}if(F.tag!==3)throw Error(i(188));return F.stateNode.current===F?w:S}function G(w){return w=M(w),w!==null?K(w):null}function K(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){var S=K(w);if(S!==null)return S;w=w.sibling}return null}function re(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){if(w.tag!==4){var S=re(w);if(S!==null)return S}w=w.sibling}return null}var Y=Array.isArray,ee=t.getPublicInstance,B=t.getRootHostContext,z=t.getChildHostContext,I=t.prepareForCommit,W=t.resetAfterCommit,V=t.createInstance,L=t.appendInitialChild,H=t.finalizeInitialChildren,J=t.prepareUpdate,Q=t.shouldSetTextContent,ne=t.createTextInstance,Z=t.scheduleTimeout,se=t.cancelTimeout,ce=t.noTimeout,he=t.isPrimaryRenderer,Ee=t.supportsMutation,ie=t.supportsPersistence,me=t.supportsHydration,Ne=t.getInstanceFromNode,Oe=t.preparePortalMount,Re=t.getCurrentEventPriority,ze=t.detachDeletedInstance,Nt=t.supportsMicrotasks,et=t.scheduleMicrotask,Me=t.supportsTestSelectors,Fe=t.findFiberRoot,Ke=t.getBoundingRect,xt=t.getTextContent,ut=t.isHiddenSubtree,At=t.matchAccessibilityRole,Dt=t.setFocusIfFocusable,Qe=t.setupIntersectionObserver,tt=t.appendChild,vt=t.appendChildToContainer,gt=t.commitTextUpdate,_t=t.commitMount,Wt=t.commitUpdate,Zt=t.insertBefore,pr=t.insertInContainerBefore,Ir=t.removeChild,br=t.removeChildFromContainer,xr=t.resetTextContent,er=t.hideInstance,_r=t.hideTextInstance,ge=t.unhideInstance,ue=t.unhideTextInstance,we=t.clearContainer,Te=t.cloneInstance,Xe=t.createContainerChildSet,Ct=t.appendChildToContainerChildSet,Pt=t.finalizeContainerChildren,Ue=t.replaceContainerChildren,ft=t.cloneHiddenInstance,ot=t.cloneHiddenTextInstance,Ht=t.canHydrateInstance,Gt=t.canHydrateTextInstance,mr=t.canHydrateSuspenseInstance,Vr=t.isSuspenseInstancePending,vr=t.isSuspenseInstanceFallback,hr=t.getSuspenseInstanceFallbackErrorDetails,le=t.registerSuspenseInstanceRetry,_e=t.getNextHydratableSibling,pe=t.getFirstHydratableChild,ve=t.getFirstHydratableChildWithinContainer,Se=t.getFirstHydratableChildWithinSuspenseInstance,ke=t.hydrateInstance,Ge=t.hydrateTextInstance,dt=t.hydrateSuspenseInstance,Ie=t.getNextHydratableInstanceAfterSuspenseInstance,oe=t.commitHydratedContainer,fe=t.commitHydratedSuspenseInstance,Ce=t.clearSuspenseBoundary,je=t.clearSuspenseBoundaryFromContainer,qe=t.shouldDeleteUnhydratedTailInstances,Ze=t.didNotMatchHydratedContainerTextInstance,mt=t.didNotMatchHydratedTextInstance,qt;function pt(w){if(qt===void 0)try{throw Error()}catch(F){var S=F.stack.trim().match(/\n( *(at )?)/);qt=S&&S[1]||""}return`
`+qt+w}var Bt=!1;function Cr(w,S){if(!w||Bt)return"";Bt=!0;var F=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(S)if(S=function(){throw Error()},Object.defineProperty(S.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(S,[])}catch($t){var U=$t}Reflect.construct(w,[],S)}else{try{S.call()}catch($t){U=$t}w.call(S.prototype)}else{try{throw Error()}catch($t){U=$t}w()}}catch($t){if($t&&U&&typeof $t.stack=="string"){for(var X=$t.stack.split(`
`),ae=U.stack.split(`
`),be=X.length-1,He=ae.length-1;1<=be&&0<=He&&X[be]!==ae[He];)He--;for(;1<=be&&0<=He;be--,He--)if(X[be]!==ae[He]){if(be!==1||He!==1)do if(be--,He--,0>He||X[be]!==ae[He]){var lt=`
`+X[be].replace(" at new "," at ");return w.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",w.displayName)),lt}while(1<=be&&0<=He);break}}}finally{Bt=!1,Error.prepareStackTrace=F}return(w=w?w.displayName||w.name:"")?pt(w):""}var $r=Object.prototype.hasOwnProperty,Ur=[],wn=-1;function Xr(w){return{current:w}}function Wr(w){0>wn||(w.current=Ur[wn],Ur[wn]=null,wn--)}function ar(w,S){wn++,Ur[wn]=w.current,w.current=S}var xe={},ht=Xr(xe),Er=Xr(!1),Sr=xe;function Qn(w,S){var F=w.type.contextTypes;if(!F)return xe;var U=w.stateNode;if(U&&U.__reactInternalMemoizedUnmaskedChildContext===S)return U.__reactInternalMemoizedMaskedChildContext;var X={},ae;for(ae in F)X[ae]=S[ae];return U&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=S,w.__reactInternalMemoizedMaskedChildContext=X),X}function Ye(w){return w=w.childContextTypes,w!=null}function ye(){Wr(Er),Wr(ht)}function $e(w,S,F){if(ht.current!==xe)throw Error(i(168));ar(ht,S),ar(Er,F)}function Pe(w,S,F){var U=w.stateNode;if(S=S.childContextTypes,typeof U.getChildContext!="function")return F;U=U.getChildContext();for(var X in U)if(!(X in S))throw Error(i(108,j(w)||"Unknown",X));return a({},F,U)}function Tt(w){return w=(w=w.stateNode)&&w.__reactInternalMemoizedMergedChildContext||xe,Sr=ht.current,ar(ht,w),ar(Er,Er.current),!0}function kt(w,S,F){var U=w.stateNode;if(!U)throw Error(i(169));F?(w=Pe(w,S,Sr),U.__reactInternalMemoizedMergedChildContext=w,Wr(Er),Wr(ht),ar(ht,w)):Wr(Er),ar(Er,F)}var nr=Math.clz32?Math.clz32:Ut,Or=Math.log,ct=Math.LN2;function Ut(w){return w>>>=0,w===0?32:31-(Or(w)/ct|0)|0}var It=64,Zn=4194304;function ur(w){switch(w&-w){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return w&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return w}}function Fr(w,S){var F=w.pendingLanes;if(F===0)return 0;var U=0,X=w.suspendedLanes,ae=w.pingedLanes,be=F&268435455;if(be!==0){var He=be&~X;He!==0?U=ur(He):(ae&=be,ae!==0&&(U=ur(ae)))}else be=F&~X,be!==0?U=ur(be):ae!==0&&(U=ur(ae));if(U===0)return 0;if(S!==0&&S!==U&&(S&X)===0&&(X=U&-U,ae=S&-S,X>=ae||X===16&&(ae&4194240)!==0))return S;if((U&4)!==0&&(U|=F&16),S=w.entangledLanes,S!==0)for(w=w.entanglements,S&=U;0<S;)F=31-nr(S),X=1<<F,U|=w[F],S&=~X;return U}function In(w,S){switch(w){case 1:case 2:case 4:return S+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return S+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function la(w,S){for(var F=w.suspendedLanes,U=w.pingedLanes,X=w.expirationTimes,ae=w.pendingLanes;0<ae;){var be=31-nr(ae),He=1<<be,lt=X[be];lt===-1?((He&F)===0||(He&U)!==0)&&(X[be]=In(He,S)):lt<=S&&(w.expiredLanes|=He),ae&=~He}}function ic(w){return w=w.pendingLanes&-1073741825,w!==0?w:w&1073741824?1073741824:0}function ud(){var w=It;return It<<=1,(It&4194240)===0&&(It=64),w}function oc(w){for(var S=[],F=0;31>F;F++)S.push(w);return S}function Qi(w,S,F){w.pendingLanes|=S,S!==536870912&&(w.suspendedLanes=0,w.pingedLanes=0),w=w.eventTimes,S=31-nr(S),w[S]=F}function lc(w,S){var F=w.pendingLanes&~S;w.pendingLanes=S,w.suspendedLanes=0,w.pingedLanes=0,w.expiredLanes&=S,w.mutableReadLanes&=S,w.entangledLanes&=S,S=w.entanglements;var U=w.eventTimes;for(w=w.expirationTimes;0<F;){var X=31-nr(F),ae=1<<X;S[X]=0,U[X]=-1,w[X]=-1,F&=~ae}}function $o(w,S){var F=w.entangledLanes|=S;for(w=w.entanglements;F;){var U=31-nr(F),X=1<<U;X&S|w[U]&S&&(w[U]|=S),F&=~X}}var en=0;function dd(w){return w&=-w,1<w?4<w?(w&268435455)!==0?16:536870912:4:1}var Uo=s.unstable_scheduleCallback,Y1=s.unstable_cancelCallback,J1=s.unstable_shouldYield,Uf=s.unstable_requestPaint,Xs=s.unstable_now,j0=s.unstable_ImmediatePriority,P0=s.unstable_UserBlockingPriority,O0=s.unstable_NormalPriority,VS=s.unstable_IdlePriority,cc=null,ci=null;function fd(w){if(ci&&typeof ci.onCommitFiberRoot=="function")try{ci.onCommitFiberRoot(cc,w,void 0,(w.current.flags&128)===128)}catch{}}function F0(w,S){return w===S&&(w!==0||1/w===1/S)||w!==w&&S!==S}var vo=typeof Object.is=="function"?Object.is:F0,kl=null,hd=!1,gd=!1;function R0(w){kl===null?kl=[w]:kl.push(w)}function Q1(w){hd=!0,R0(w)}function ca(){if(!gd&&kl!==null){gd=!0;var w=0,S=en;try{var F=kl;for(en=1;w<F.length;w++){var U=F[w];do U=U(!0);while(U!==null)}kl=null,hd=!1}catch(X){throw kl!==null&&(kl=kl.slice(w+1)),Uo(j0,ca),X}finally{en=S,gd=!1}}return null}var uc=[],Tl=0,Wf=null,eu=0,Wa=[],Pi=0,Is=null,ui=1,wo="";function bo(w,S){uc[Tl++]=eu,uc[Tl++]=Wf,Wf=w,eu=S}function Z1(w,S,F){Wa[Pi++]=ui,Wa[Pi++]=wo,Wa[Pi++]=Is,Is=w;var U=ui;w=wo;var X=32-nr(U)-1;U&=~(1<<X),F+=1;var ae=32-nr(S)+X;if(30<ae){var be=X-X%5;ae=(U&(1<<be)-1).toString(32),U>>=be,X-=be,ui=1<<32-nr(S)+X|F<<X|U,wo=ae+w}else ui=1<<ae|F<<X|U,wo=w}function zf(w){w.return!==null&&(bo(w,1),Z1(w,1,0))}function Hf(w){for(;w===Wf;)Wf=uc[--Tl],uc[Tl]=null,eu=uc[--Tl],uc[Tl]=null;for(;w===Is;)Is=Wa[--Pi],Wa[Pi]=null,wo=Wa[--Pi],Wa[Pi]=null,ui=Wa[--Pi],Wa[Pi]=null}var ua=null,za=null,zn=!1,Gf=!1,_o=null;function ew(w,S){var F=Ui(5,null,null,0);F.elementType="DELETED",F.stateNode=S,F.return=w,S=w.deletions,S===null?(w.deletions=[F],w.flags|=16):S.push(F)}function D0(w,S){switch(w.tag){case 5:return S=Ht(S,w.type,w.pendingProps),S!==null?(w.stateNode=S,ua=w,za=pe(S),!0):!1;case 6:return S=Gt(S,w.pendingProps),S!==null?(w.stateNode=S,ua=w,za=null,!0):!1;case 13:if(S=mr(S),S!==null){var F=Is!==null?{id:ui,overflow:wo}:null;return w.memoizedState={dehydrated:S,treeContext:F,retryLane:1073741824},F=Ui(18,null,null,0),F.stateNode=S,F.return=w,w.child=F,ua=w,za=null,!0}return!1;default:return!1}}function km(w){return(w.mode&1)!==0&&(w.flags&128)===0}function Tm(w){if(zn){var S=za;if(S){var F=S;if(!D0(w,S)){if(km(w))throw Error(i(418));S=_e(F);var U=ua;S&&D0(w,S)?ew(U,F):(w.flags=w.flags&-4097|2,zn=!1,ua=w)}}else{if(km(w))throw Error(i(418));w.flags=w.flags&-4097|2,zn=!1,ua=w}}}function tw(w){for(w=w.return;w!==null&&w.tag!==5&&w.tag!==3&&w.tag!==13;)w=w.return;ua=w}function I0(w){if(!me||w!==ua)return!1;if(!zn)return tw(w),zn=!0,!1;if(w.tag!==3&&(w.tag!==5||qe(w.type)&&!Q(w.type,w.memoizedProps))){var S=za;if(S){if(km(w))throw rw(),Error(i(418));for(;S;)ew(w,S),S=_e(S)}}if(tw(w),w.tag===13){if(!me)throw Error(i(316));if(w=w.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(i(317));za=Ie(w)}else za=ua?_e(w.stateNode):null;return!0}function rw(){for(var w=za;w;)w=_e(w)}function tu(){me&&(za=ua=null,Gf=zn=!1)}function Cm(w){_o===null?_o=[w]:_o.push(w)}var qS=o.ReactCurrentBatchConfig;function M0(w,S){if(vo(w,S))return!0;if(typeof w!="object"||w===null||typeof S!="object"||S===null)return!1;var F=Object.keys(w),U=Object.keys(S);if(F.length!==U.length)return!1;for(U=0;U<F.length;U++){var X=F[U];if(!$r.call(S,X)||!vo(w[X],S[X]))return!1}return!0}function KS(w){switch(w.tag){case 5:return pt(w.type);case 16:return pt("Lazy");case 13:return pt("Suspense");case 19:return pt("SuspenseList");case 0:case 2:case 15:return w=Cr(w.type,!1),w;case 11:return w=Cr(w.type.render,!1),w;case 1:return w=Cr(w.type,!0),w;default:return""}}function ru(w,S,F){if(w=F.ref,w!==null&&typeof w!="function"&&typeof w!="object"){if(F._owner){if(F=F._owner,F){if(F.tag!==1)throw Error(i(309));var U=F.stateNode}if(!U)throw Error(i(147,w));var X=U,ae=""+w;return S!==null&&S.ref!==null&&typeof S.ref=="function"&&S.ref._stringRef===ae?S.ref:(S=function(be){var He=X.refs;be===null?delete He[ae]:He[ae]=be},S._stringRef=ae,S)}if(typeof w!="string")throw Error(i(284));if(!F._owner)throw Error(i(290,w))}return w}function L0(w,S){throw w=Object.prototype.toString.call(S),Error(i(31,w==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":w))}function nw(w){var S=w._init;return S(w._payload)}function sw(w){function S(at,Ve){if(w){var yt=at.deletions;yt===null?(at.deletions=[Ve],at.flags|=16):yt.push(Ve)}}function F(at,Ve){if(!w)return null;for(;Ve!==null;)S(at,Ve),Ve=Ve.sibling;return null}function U(at,Ve){for(at=new Map;Ve!==null;)Ve.key!==null?at.set(Ve.key,Ve):at.set(Ve.index,Ve),Ve=Ve.sibling;return at}function X(at,Ve){return at=Nc(at,Ve),at.index=0,at.sibling=null,at}function ae(at,Ve,yt){return at.index=yt,w?(yt=at.alternate,yt!==null?(yt=yt.index,yt<Ve?(at.flags|=2,Ve):yt):(at.flags|=2,Ve)):(at.flags|=1048576,Ve)}function be(at){return w&&at.alternate===null&&(at.flags|=2),at}function He(at,Ve,yt,rr){return Ve===null||Ve.tag!==6?(Ve=Bd(yt,at.mode,rr),Ve.return=at,Ve):(Ve=X(Ve,yt),Ve.return=at,Ve)}function lt(at,Ve,yt,rr){var yr=yt.type;return yr===d?or(at,Ve,yt.props.children,rr,yt.key):Ve!==null&&(Ve.elementType===yr||typeof yr=="object"&&yr!==null&&yr.$$typeof===b&&nw(yr)===Ve.type)?(rr=X(Ve,yt.props),rr.ref=ru(at,Ve,yt),rr.return=at,rr):(rr=mg(yt.type,yt.key,yt.props,null,at.mode,rr),rr.ref=ru(at,Ve,yt),rr.return=at,rr)}function $t(at,Ve,yt,rr){return Ve===null||Ve.tag!==4||Ve.stateNode.containerInfo!==yt.containerInfo||Ve.stateNode.implementation!==yt.implementation?(Ve=yg(yt,at.mode,rr),Ve.return=at,Ve):(Ve=X(Ve,yt.children||[]),Ve.return=at,Ve)}function or(at,Ve,yt,rr,yr){return Ve===null||Ve.tag!==7?(Ve=ha(yt,at.mode,rr,yr),Ve.return=at,Ve):(Ve=X(Ve,yt),Ve.return=at,Ve)}function Lr(at,Ve,yt){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number")return Ve=Bd(""+Ve,at.mode,yt),Ve.return=at,Ve;if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case l:return yt=mg(Ve.type,Ve.key,Ve.props,null,at.mode,yt),yt.ref=ru(at,null,Ve),yt.return=at,yt;case u:return Ve=yg(Ve,at.mode,yt),Ve.return=at,Ve;case b:var rr=Ve._init;return Lr(at,rr(Ve._payload),yt)}if(Y(Ve)||A(Ve))return Ve=ha(Ve,at.mode,yt,null),Ve.return=at,Ve;L0(at,Ve)}return null}function tr(at,Ve,yt,rr){var yr=Ve!==null?Ve.key:null;if(typeof yt=="string"&&yt!==""||typeof yt=="number")return yr!==null?null:He(at,Ve,""+yt,rr);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case l:return yt.key===yr?lt(at,Ve,yt,rr):null;case u:return yt.key===yr?$t(at,Ve,yt,rr):null;case b:return yr=yt._init,tr(at,Ve,yr(yt._payload),rr)}if(Y(yt)||A(yt))return yr!==null?null:or(at,Ve,yt,rr,null);L0(at,yt)}return null}function $n(at,Ve,yt,rr,yr){if(typeof rr=="string"&&rr!==""||typeof rr=="number")return at=at.get(yt)||null,He(Ve,at,""+rr,yr);if(typeof rr=="object"&&rr!==null){switch(rr.$$typeof){case l:return at=at.get(rr.key===null?yt:rr.key)||null,lt(Ve,at,rr,yr);case u:return at=at.get(rr.key===null?yt:rr.key)||null,$t(Ve,at,rr,yr);case b:var qr=rr._init;return $n(at,Ve,yt,qr(rr._payload),yr)}if(Y(rr)||A(rr))return at=at.get(yt)||null,or(Ve,at,rr,yr,null);L0(Ve,rr)}return null}function _n(at,Ve,yt,rr){for(var yr=null,qr=null,Br=Ve,on=Ve=0,Us=null;Br!==null&&on<yt.length;on++){Br.index>on?(Us=Br,Br=null):Us=Br.sibling;var nn=tr(at,Br,yt[on],rr);if(nn===null){Br===null&&(Br=Us);break}w&&Br&&nn.alternate===null&&S(at,Br),Ve=ae(nn,Ve,on),qr===null?yr=nn:qr.sibling=nn,qr=nn,Br=Us}if(on===yt.length)return F(at,Br),zn&&bo(at,on),yr;if(Br===null){for(;on<yt.length;on++)Br=Lr(at,yt[on],rr),Br!==null&&(Ve=ae(Br,Ve,on),qr===null?yr=Br:qr.sibling=Br,qr=Br);return zn&&bo(at,on),yr}for(Br=U(at,Br);on<yt.length;on++)Us=$n(Br,at,on,yt[on],rr),Us!==null&&(w&&Us.alternate!==null&&Br.delete(Us.key===null?on:Us.key),Ve=ae(Us,Ve,on),qr===null?yr=Us:qr.sibling=Us,qr=Us);return w&&Br.forEach(function(Aa){return S(at,Aa)}),zn&&bo(at,on),yr}function Xa(at,Ve,yt,rr){var yr=A(yt);if(typeof yr!="function")throw Error(i(150));if(yt=yr.call(yt),yt==null)throw Error(i(151));for(var qr=yr=null,Br=Ve,on=Ve=0,Us=null,nn=yt.next();Br!==null&&!nn.done;on++,nn=yt.next()){Br.index>on?(Us=Br,Br=null):Us=Br.sibling;var Aa=tr(at,Br,nn.value,rr);if(Aa===null){Br===null&&(Br=Us);break}w&&Br&&Aa.alternate===null&&S(at,Br),Ve=ae(Aa,Ve,on),qr===null?yr=Aa:qr.sibling=Aa,qr=Aa,Br=Us}if(nn.done)return F(at,Br),zn&&bo(at,on),yr;if(Br===null){for(;!nn.done;on++,nn=yt.next())nn=Lr(at,nn.value,rr),nn!==null&&(Ve=ae(nn,Ve,on),qr===null?yr=nn:qr.sibling=nn,qr=nn);return zn&&bo(at,on),yr}for(Br=U(at,Br);!nn.done;on++,nn=yt.next())nn=$n(Br,at,on,nn.value,rr),nn!==null&&(w&&nn.alternate!==null&&Br.delete(nn.key===null?on:nn.key),Ve=ae(nn,Ve,on),qr===null?yr=nn:qr.sibling=nn,qr=nn);return w&&Br.forEach(function(ZS){return S(at,ZS)}),zn&&bo(at,on),yr}function Yo(at,Ve,yt,rr){if(typeof yt=="object"&&yt!==null&&yt.type===d&&yt.key===null&&(yt=yt.props.children),typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case l:e:{for(var yr=yt.key,qr=Ve;qr!==null;){if(qr.key===yr){if(yr=yt.type,yr===d){if(qr.tag===7){F(at,qr.sibling),Ve=X(qr,yt.props.children),Ve.return=at,at=Ve;break e}}else if(qr.elementType===yr||typeof yr=="object"&&yr!==null&&yr.$$typeof===b&&nw(yr)===qr.type){F(at,qr.sibling),Ve=X(qr,yt.props),Ve.ref=ru(at,qr,yt),Ve.return=at,at=Ve;break e}F(at,qr);break}else S(at,qr);qr=qr.sibling}yt.type===d?(Ve=ha(yt.props.children,at.mode,rr,yt.key),Ve.return=at,at=Ve):(rr=mg(yt.type,yt.key,yt.props,null,at.mode,rr),rr.ref=ru(at,Ve,yt),rr.return=at,at=rr)}return be(at);case u:e:{for(qr=yt.key;Ve!==null;){if(Ve.key===qr)if(Ve.tag===4&&Ve.stateNode.containerInfo===yt.containerInfo&&Ve.stateNode.implementation===yt.implementation){F(at,Ve.sibling),Ve=X(Ve,yt.children||[]),Ve.return=at,at=Ve;break e}else{F(at,Ve);break}else S(at,Ve);Ve=Ve.sibling}Ve=yg(yt,at.mode,rr),Ve.return=at,at=Ve}return be(at);case b:return qr=yt._init,Yo(at,Ve,qr(yt._payload),rr)}if(Y(yt))return _n(at,Ve,yt,rr);if(A(yt))return Xa(at,Ve,yt,rr);L0(at,yt)}return typeof yt=="string"&&yt!==""||typeof yt=="number"?(yt=""+yt,Ve!==null&&Ve.tag===6?(F(at,Ve.sibling),Ve=X(Ve,yt),Ve.return=at,at=Ve):(F(at,Ve),Ve=Bd(yt,at.mode,rr),Ve.return=at,at=Ve),be(at)):F(at,Ve)}return Yo}var nu=sw(!0),aw=sw(!1),B0=Xr(null),$0=null,pd=null,Em=null;function Nm(){Em=pd=$0=null}function iw(w,S,F){he?(ar(B0,S._currentValue),S._currentValue=F):(ar(B0,S._currentValue2),S._currentValue2=F)}function Vf(w){var S=B0.current;Wr(B0),he?w._currentValue=S:w._currentValue2=S}function su(w,S,F){for(;w!==null;){var U=w.alternate;if((w.childLanes&S)!==S?(w.childLanes|=S,U!==null&&(U.childLanes|=S)):U!==null&&(U.childLanes&S)!==S&&(U.childLanes|=S),w===F)break;w=w.return}}function md(w,S){$0=w,Em=pd=null,w=w.dependencies,w!==null&&w.firstContext!==null&&((w.lanes&S)!==0&&(Ls=!0),w.firstContext=null)}function Oi(w){var S=he?w._currentValue:w._currentValue2;if(Em!==w)if(w={context:w,memoizedValue:S,next:null},pd===null){if($0===null)throw Error(i(308));pd=w,$0.dependencies={lanes:0,firstContext:w}}else pd=pd.next=w;return S}var dc=null;function U0(w){dc===null?dc=[w]:dc.push(w)}function Am(w,S,F,U){var X=S.interleaved;return X===null?(F.next=F,U0(S)):(F.next=X.next,X.next=F),S.interleaved=F,So(w,U)}function So(w,S){w.lanes|=S;var F=w.alternate;for(F!==null&&(F.lanes|=S),F=w,w=w.return;w!==null;)w.childLanes|=S,F=w.alternate,F!==null&&(F.childLanes|=S),F=w,w=w.return;return F.tag===3?F.stateNode:null}var Fi=!1;function jm(w){w.updateQueue={baseState:w.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ow(w,S){w=w.updateQueue,S.updateQueue===w&&(S.updateQueue={baseState:w.baseState,firstBaseUpdate:w.firstBaseUpdate,lastBaseUpdate:w.lastBaseUpdate,shared:w.shared,effects:w.effects})}function Cl(w,S){return{eventTime:w,lane:S,tag:0,payload:null,callback:null,next:null}}function El(w,S,F){var U=w.updateQueue;if(U===null)return null;if(U=U.shared,(zr&2)!==0){var X=U.pending;return X===null?S.next=S:(S.next=X.next,X.next=S),U.pending=S,So(w,F)}return X=U.interleaved,X===null?(S.next=S,U0(U)):(S.next=X.next,X.next=S),U.interleaved=S,So(w,F)}function qf(w,S,F){if(S=S.updateQueue,S!==null&&(S=S.shared,(F&4194240)!==0)){var U=S.lanes;U&=w.pendingLanes,F|=U,S.lanes=F,$o(w,F)}}function yd(w,S){var F=w.updateQueue,U=w.alternate;if(U!==null&&(U=U.updateQueue,F===U)){var X=null,ae=null;if(F=F.firstBaseUpdate,F!==null){do{var be={eventTime:F.eventTime,lane:F.lane,tag:F.tag,payload:F.payload,callback:F.callback,next:null};ae===null?X=ae=be:ae=ae.next=be,F=F.next}while(F!==null);ae===null?X=ae=S:ae=ae.next=S}else X=ae=S;F={baseState:U.baseState,firstBaseUpdate:X,lastBaseUpdate:ae,shared:U.shared,effects:U.effects},w.updateQueue=F;return}w=F.lastBaseUpdate,w===null?F.firstBaseUpdate=S:w.next=S,F.lastBaseUpdate=S}function fc(w,S,F,U){var X=w.updateQueue;Fi=!1;var ae=X.firstBaseUpdate,be=X.lastBaseUpdate,He=X.shared.pending;if(He!==null){X.shared.pending=null;var lt=He,$t=lt.next;lt.next=null,be===null?ae=$t:be.next=$t,be=lt;var or=w.alternate;or!==null&&(or=or.updateQueue,He=or.lastBaseUpdate,He!==be&&(He===null?or.firstBaseUpdate=$t:He.next=$t,or.lastBaseUpdate=lt))}if(ae!==null){var Lr=X.baseState;be=0,or=$t=lt=null,He=ae;do{var tr=He.lane,$n=He.eventTime;if((U&tr)===tr){or!==null&&(or=or.next={eventTime:$n,lane:0,tag:He.tag,payload:He.payload,callback:He.callback,next:null});e:{var _n=w,Xa=He;switch(tr=S,$n=F,Xa.tag){case 1:if(_n=Xa.payload,typeof _n=="function"){Lr=_n.call($n,Lr,tr);break e}Lr=_n;break e;case 3:_n.flags=_n.flags&-65537|128;case 0:if(_n=Xa.payload,tr=typeof _n=="function"?_n.call($n,Lr,tr):_n,tr==null)break e;Lr=a({},Lr,tr);break e;case 2:Fi=!0}}He.callback!==null&&He.lane!==0&&(w.flags|=64,tr=X.effects,tr===null?X.effects=[He]:tr.push(He))}else $n={eventTime:$n,lane:tr,tag:He.tag,payload:He.payload,callback:He.callback,next:null},or===null?($t=or=$n,lt=Lr):or=or.next=$n,be|=tr;if(He=He.next,He===null){if(He=X.shared.pending,He===null)break;tr=He,He=tr.next,tr.next=null,X.lastBaseUpdate=tr,X.shared.pending=null}}while(!0);if(or===null&&(lt=Lr),X.baseState=lt,X.firstBaseUpdate=$t,X.lastBaseUpdate=or,S=X.shared.interleaved,S!==null){X=S;do be|=X.lane,X=X.next;while(X!==S)}else ae===null&&(X.shared.lanes=0);Ol|=be,w.lanes=be,w.memoizedState=Lr}}function lw(w,S,F){if(w=S.effects,S.effects=null,w!==null)for(S=0;S<w.length;S++){var U=w[S],X=U.callback;if(X!==null){if(U.callback=null,U=F,typeof X!="function")throw Error(i(191,X));X.call(U)}}}var hc={},Zi=Xr(hc),xd=Xr(hc),gc=Xr(hc);function eo(w){if(w===hc)throw Error(i(174));return w}function W0(w,S){ar(gc,S),ar(xd,w),ar(Zi,hc),w=B(S),Wr(Zi),ar(Zi,w)}function au(){Wr(Zi),Wr(xd),Wr(gc)}function Pm(w){var S=eo(gc.current),F=eo(Zi.current);S=z(F,w.type,S),F!==S&&(ar(xd,w),ar(Zi,S))}function Om(w){xd.current===w&&(Wr(Zi),Wr(xd))}var es=Xr(0);function z0(w){for(var S=w;S!==null;){if(S.tag===13){var F=S.memoizedState;if(F!==null&&(F=F.dehydrated,F===null||Vr(F)||vr(F)))return S}else if(S.tag===19&&S.memoizedProps.revealOrder!==void 0){if((S.flags&128)!==0)return S}else if(S.child!==null){S.child.return=S,S=S.child;continue}if(S===w)break;for(;S.sibling===null;){if(S.return===null||S.return===w)return null;S=S.return}S.sibling.return=S.return,S=S.sibling}return null}var Fm=[];function Rm(){for(var w=0;w<Fm.length;w++){var S=Fm[w];he?S._workInProgressVersionPrimary=null:S._workInProgressVersionSecondary=null}Fm.length=0}var di=o.ReactCurrentDispatcher,iu=o.ReactCurrentBatchConfig,pc=0,qn=null,_s=null,Ms=null,vd=!1,Kf=!1,Xf=0,wd=0;function Ys(){throw Error(i(321))}function ou(w,S){if(S===null)return!1;for(var F=0;F<S.length&&F<w.length;F++)if(!vo(w[F],S[F]))return!1;return!0}function Yf(w,S,F,U,X,ae){if(pc=ae,qn=S,S.memoizedState=null,S.updateQueue=null,S.lanes=0,di.current=w===null||w.memoizedState===null?Hm:Gm,w=F(U,X),Kf){ae=0;do{if(Kf=!1,Xf=0,25<=ae)throw Error(i(301));ae+=1,Ms=_s=null,S.updateQueue=null,di.current=Vm,w=F(U,X)}while(Kf)}if(di.current=fu,S=_s!==null&&_s.next!==null,pc=0,Ms=_s=qn=null,vd=!1,S)throw Error(i(300));return w}function H0(){var w=Xf!==0;return Xf=0,w}function Ri(){var w={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ms===null?qn.memoizedState=Ms=w:Ms=Ms.next=w,Ms}function da(){if(_s===null){var w=qn.alternate;w=w!==null?w.memoizedState:null}else w=_s.next;var S=Ms===null?qn.memoizedState:Ms.next;if(S!==null)Ms=S,_s=w;else{if(w===null)throw Error(i(310));_s=w,w={memoizedState:_s.memoizedState,baseState:_s.baseState,baseQueue:_s.baseQueue,queue:_s.queue,next:null},Ms===null?qn.memoizedState=Ms=w:Ms=Ms.next=w}return Ms}function lu(w,S){return typeof S=="function"?S(w):S}function G0(w){var S=da(),F=S.queue;if(F===null)throw Error(i(311));F.lastRenderedReducer=w;var U=_s,X=U.baseQueue,ae=F.pending;if(ae!==null){if(X!==null){var be=X.next;X.next=ae.next,ae.next=be}U.baseQueue=X=ae,F.pending=null}if(X!==null){ae=X.next,U=U.baseState;var He=be=null,lt=null,$t=ae;do{var or=$t.lane;if((pc&or)===or)lt!==null&&(lt=lt.next={lane:0,action:$t.action,hasEagerState:$t.hasEagerState,eagerState:$t.eagerState,next:null}),U=$t.hasEagerState?$t.eagerState:w(U,$t.action);else{var Lr={lane:or,action:$t.action,hasEagerState:$t.hasEagerState,eagerState:$t.eagerState,next:null};lt===null?(He=lt=Lr,be=U):lt=lt.next=Lr,qn.lanes|=or,Ol|=or}$t=$t.next}while($t!==null&&$t!==ae);lt===null?be=U:lt.next=He,vo(U,S.memoizedState)||(Ls=!0),S.memoizedState=U,S.baseState=be,S.baseQueue=lt,F.lastRenderedState=U}if(w=F.interleaved,w!==null){X=w;do ae=X.lane,qn.lanes|=ae,Ol|=ae,X=X.next;while(X!==w)}else X===null&&(F.lanes=0);return[S.memoizedState,F.dispatch]}function bd(w){var S=da(),F=S.queue;if(F===null)throw Error(i(311));F.lastRenderedReducer=w;var U=F.dispatch,X=F.pending,ae=S.memoizedState;if(X!==null){F.pending=null;var be=X=X.next;do ae=w(ae,be.action),be=be.next;while(be!==X);vo(ae,S.memoizedState)||(Ls=!0),S.memoizedState=ae,S.baseQueue===null&&(S.baseState=ae),F.lastRenderedState=ae}return[ae,U]}function Dm(){}function Im(w,S){var F=qn,U=da(),X=S(),ae=!vo(U.memoizedState,X);if(ae&&(U.memoizedState=X,Ls=!0),U=U.queue,K0(Bm.bind(null,F,U,w),[w]),U.getSnapshot!==S||ae||Ms!==null&&Ms.memoizedState.tag&1){if(F.flags|=2048,cu(9,Lm.bind(null,F,U,X,S),void 0,null),An===null)throw Error(i(349));(pc&30)!==0||Mm(F,S,X)}return X}function Mm(w,S,F){w.flags|=16384,w={getSnapshot:S,value:F},S=qn.updateQueue,S===null?(S={lastEffect:null,stores:null},qn.updateQueue=S,S.stores=[w]):(F=S.stores,F===null?S.stores=[w]:F.push(w))}function Lm(w,S,F,U){S.value=F,S.getSnapshot=U,$m(S)&&Nl(w)}function Bm(w,S,F){return F(function(){$m(S)&&Nl(w)})}function $m(w){var S=w.getSnapshot;w=w.value;try{var F=S();return!vo(w,F)}catch{return!0}}function Nl(w){var S=So(w,1);S!==null&&Ea(S,w,1,-1)}function V0(w){var S=Ri();return typeof w=="function"&&(w=w()),S.memoizedState=S.baseState=w,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:w},S.queue=w,w=w.dispatch=XS.bind(null,qn,w),[S.memoizedState,w]}function cu(w,S,F,U){return w={tag:w,create:S,destroy:F,deps:U,next:null},S=qn.updateQueue,S===null?(S={lastEffect:null,stores:null},qn.updateQueue=S,S.lastEffect=w.next=w):(F=S.lastEffect,F===null?S.lastEffect=w.next=w:(U=F.next,F.next=w,w.next=U,S.lastEffect=w)),w}function cw(){return da().memoizedState}function q0(w,S,F,U){var X=Ri();qn.flags|=w,X.memoizedState=cu(1|S,F,void 0,U===void 0?null:U)}function mc(w,S,F,U){var X=da();U=U===void 0?null:U;var ae=void 0;if(_s!==null){var be=_s.memoizedState;if(ae=be.destroy,U!==null&&ou(U,be.deps)){X.memoizedState=cu(S,F,ae,U);return}}qn.flags|=w,X.memoizedState=cu(1|S,F,ae,U)}function uw(w,S){return q0(8390656,8,w,S)}function K0(w,S){return mc(2048,8,w,S)}function Um(w,S){return mc(4,2,w,S)}function Mn(w,S){return mc(4,4,w,S)}function X0(w,S){if(typeof S=="function")return w=w(),S(w),function(){S(null)};if(S!=null)return w=w(),S.current=w,function(){S.current=null}}function Jf(w,S,F){return F=F!=null?F.concat([w]):null,mc(4,4,X0.bind(null,S,w),F)}function uu(){}function Wm(w,S){var F=da();S=S===void 0?null:S;var U=F.memoizedState;return U!==null&&S!==null&&ou(S,U[1])?U[0]:(F.memoizedState=[w,S],w)}function Y0(w,S){var F=da();S=S===void 0?null:S;var U=F.memoizedState;return U!==null&&S!==null&&ou(S,U[1])?U[0]:(w=w(),F.memoizedState=[w,S],w)}function _d(w,S,F){return(pc&21)===0?(w.baseState&&(w.baseState=!1,Ls=!0),w.memoizedState=F):(vo(F,S)||(F=ud(),qn.lanes|=F,Ol|=F,w.baseState=!0),S)}function J0(w,S){var F=en;en=F!==0&&4>F?F:4,w(!0);var U=iu.transition;iu.transition={};try{w(!1),S()}finally{en=F,iu.transition=U}}function du(){return da().memoizedState}function dw(w,S,F){var U=$s(w);if(F={lane:U,action:F,hasEagerState:!1,eagerState:null,next:null},fw(w))zm(S,F);else if(F=Am(w,S,F,U),F!==null){var X=Hn();Ea(F,w,U,X),Qf(F,S,U)}}function XS(w,S,F){var U=$s(w),X={lane:U,action:F,hasEagerState:!1,eagerState:null,next:null};if(fw(w))zm(S,X);else{var ae=w.alternate;if(w.lanes===0&&(ae===null||ae.lanes===0)&&(ae=S.lastRenderedReducer,ae!==null))try{var be=S.lastRenderedState,He=ae(be,F);if(X.hasEagerState=!0,X.eagerState=He,vo(He,be)){var lt=S.interleaved;lt===null?(X.next=X,U0(S)):(X.next=lt.next,lt.next=X),S.interleaved=X;return}}catch{}finally{}F=Am(w,S,X,U),F!==null&&(X=Hn(),Ea(F,w,U,X),Qf(F,S,U))}}function fw(w){var S=w.alternate;return w===qn||S!==null&&S===qn}function zm(w,S){Kf=vd=!0;var F=w.pending;F===null?S.next=S:(S.next=F.next,F.next=S),w.pending=S}function Qf(w,S,F){if((F&4194240)!==0){var U=S.lanes;U&=w.pendingLanes,F|=U,S.lanes=F,$o(w,F)}}var fu={readContext:Oi,useCallback:Ys,useContext:Ys,useEffect:Ys,useImperativeHandle:Ys,useInsertionEffect:Ys,useLayoutEffect:Ys,useMemo:Ys,useReducer:Ys,useRef:Ys,useState:Ys,useDebugValue:Ys,useDeferredValue:Ys,useTransition:Ys,useMutableSource:Ys,useSyncExternalStore:Ys,useId:Ys,unstable_isNewReconciler:!1},Hm={readContext:Oi,useCallback:function(w,S){return Ri().memoizedState=[w,S===void 0?null:S],w},useContext:Oi,useEffect:uw,useImperativeHandle:function(w,S,F){return F=F!=null?F.concat([w]):null,q0(4194308,4,X0.bind(null,S,w),F)},useLayoutEffect:function(w,S){return q0(4194308,4,w,S)},useInsertionEffect:function(w,S){return q0(4,2,w,S)},useMemo:function(w,S){var F=Ri();return S=S===void 0?null:S,w=w(),F.memoizedState=[w,S],w},useReducer:function(w,S,F){var U=Ri();return S=F!==void 0?F(S):S,U.memoizedState=U.baseState=S,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:w,lastRenderedState:S},U.queue=w,w=w.dispatch=dw.bind(null,qn,w),[U.memoizedState,w]},useRef:function(w){var S=Ri();return w={current:w},S.memoizedState=w},useState:V0,useDebugValue:uu,useDeferredValue:function(w){return Ri().memoizedState=w},useTransition:function(){var w=V0(!1),S=w[0];return w=J0.bind(null,w[1]),Ri().memoizedState=w,[S,w]},useMutableSource:function(){},useSyncExternalStore:function(w,S,F){var U=qn,X=Ri();if(zn){if(F===void 0)throw Error(i(407));F=F()}else{if(F=S(),An===null)throw Error(i(349));(pc&30)!==0||Mm(U,S,F)}X.memoizedState=F;var ae={value:F,getSnapshot:S};return X.queue=ae,uw(Bm.bind(null,U,ae,w),[w]),U.flags|=2048,cu(9,Lm.bind(null,U,ae,F,S),void 0,null),F},useId:function(){var w=Ri(),S=An.identifierPrefix;if(zn){var F=wo,U=ui;F=(U&~(1<<32-nr(U)-1)).toString(32)+F,S=":"+S+"R"+F,F=Xf++,0<F&&(S+="H"+F.toString(32)),S+=":"}else F=wd++,S=":"+S+"r"+F.toString(32)+":";return w.memoizedState=S},unstable_isNewReconciler:!1},Gm={readContext:Oi,useCallback:Wm,useContext:Oi,useEffect:K0,useImperativeHandle:Jf,useInsertionEffect:Um,useLayoutEffect:Mn,useMemo:Y0,useReducer:G0,useRef:cw,useState:function(){return G0(lu)},useDebugValue:uu,useDeferredValue:function(w){var S=da();return _d(S,_s.memoizedState,w)},useTransition:function(){var w=G0(lu)[0],S=da().memoizedState;return[w,S]},useMutableSource:Dm,useSyncExternalStore:Im,useId:du,unstable_isNewReconciler:!1},Vm={readContext:Oi,useCallback:Wm,useContext:Oi,useEffect:K0,useImperativeHandle:Jf,useInsertionEffect:Um,useLayoutEffect:Mn,useMemo:Y0,useReducer:bd,useRef:cw,useState:function(){return bd(lu)},useDebugValue:uu,useDeferredValue:function(w){var S=da();return _s===null?S.memoizedState=w:_d(S,_s.memoizedState,w)},useTransition:function(){var w=bd(lu)[0],S=da().memoizedState;return[w,S]},useMutableSource:Dm,useSyncExternalStore:Im,useId:du,unstable_isNewReconciler:!1};function Di(w,S){if(w&&w.defaultProps){S=a({},S),w=w.defaultProps;for(var F in w)S[F]===void 0&&(S[F]=w[F]);return S}return S}function qm(w,S,F,U){S=w.memoizedState,F=F(U,S),F=F==null?S:a({},S,F),w.memoizedState=F,w.lanes===0&&(w.updateQueue.baseState=F)}var Zf={isMounted:function(w){return(w=w._reactInternals)?O(w)===w:!1},enqueueSetState:function(w,S,F){w=w._reactInternals;var U=Hn(),X=$s(w),ae=Cl(U,X);ae.payload=S,F!=null&&(ae.callback=F),S=El(w,ae,X),S!==null&&(Ea(S,w,X,U),qf(S,w,X))},enqueueReplaceState:function(w,S,F){w=w._reactInternals;var U=Hn(),X=$s(w),ae=Cl(U,X);ae.tag=1,ae.payload=S,F!=null&&(ae.callback=F),S=El(w,ae,X),S!==null&&(Ea(S,w,X,U),qf(S,w,X))},enqueueForceUpdate:function(w,S){w=w._reactInternals;var F=Hn(),U=$s(w),X=Cl(F,U);X.tag=2,S!=null&&(X.callback=S),S=El(w,X,U),S!==null&&(Ea(S,w,U,F),qf(S,w,U))}};function hw(w,S,F,U,X,ae,be){return w=w.stateNode,typeof w.shouldComponentUpdate=="function"?w.shouldComponentUpdate(U,ae,be):S.prototype&&S.prototype.isPureReactComponent?!M0(F,U)||!M0(X,ae):!0}function gw(w,S,F){var U=!1,X=xe,ae=S.contextType;return typeof ae=="object"&&ae!==null?ae=Oi(ae):(X=Ye(S)?Sr:ht.current,U=S.contextTypes,ae=(U=U!=null)?Qn(w,X):xe),S=new S(F,ae),w.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Zf,w.stateNode=S,S._reactInternals=w,U&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=X,w.__reactInternalMemoizedMaskedChildContext=ae),S}function Q0(w,S,F,U){w=S.state,typeof S.componentWillReceiveProps=="function"&&S.componentWillReceiveProps(F,U),typeof S.UNSAFE_componentWillReceiveProps=="function"&&S.UNSAFE_componentWillReceiveProps(F,U),S.state!==w&&Zf.enqueueReplaceState(S,S.state,null)}function Wo(w,S,F,U){var X=w.stateNode;X.props=F,X.state=w.memoizedState,X.refs={},jm(w);var ae=S.contextType;typeof ae=="object"&&ae!==null?X.context=Oi(ae):(ae=Ye(S)?Sr:ht.current,X.context=Qn(w,ae)),X.state=w.memoizedState,ae=S.getDerivedStateFromProps,typeof ae=="function"&&(qm(w,S,ae,F),X.state=w.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof X.getSnapshotBeforeUpdate=="function"||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(S=X.state,typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount(),S!==X.state&&Zf.enqueueReplaceState(X,X.state,null),fc(w,F,X,U),X.state=w.memoizedState),typeof X.componentDidMount=="function"&&(w.flags|=4194308)}function hu(w,S){try{var F="",U=S;do F+=KS(U),U=U.return;while(U);var X=F}catch(ae){X=`
Error generating stack: `+ae.message+`
`+ae.stack}return{value:w,source:S,stack:X,digest:null}}function yc(w,S,F){return{value:w,source:null,stack:F??null,digest:S??null}}function to(w,S){try{console.error(S.value)}catch(F){setTimeout(function(){throw F})}}var eh=typeof WeakMap=="function"?WeakMap:Map;function zo(w,S,F){F=Cl(-1,F),F.tag=3,F.payload={element:null};var U=S.value;return F.callback=function(){us||(us=!0,Ss=U),to(w,S)},F}function Z0(w,S,F){F=Cl(-1,F),F.tag=3;var U=w.type.getDerivedStateFromError;if(typeof U=="function"){var X=S.value;F.payload=function(){return U(X)},F.callback=function(){to(w,S)}}var ae=w.stateNode;return ae!==null&&typeof ae.componentDidCatch=="function"&&(F.callback=function(){to(w,S),typeof U!="function"&&(To===null?To=new Set([this]):To.add(this));var be=S.stack;this.componentDidCatch(S.value,{componentStack:be!==null?be:""})}),F}function pw(w,S,F){var U=w.pingCache;if(U===null){U=w.pingCache=new eh;var X=new Set;U.set(S,X)}else X=U.get(S),X===void 0&&(X=new Set,U.set(S,X));X.has(F)||(X.add(F),w=Sw.bind(null,w,S,F),S.then(w,w))}function mw(w){do{var S;if((S=w.tag===13)&&(S=w.memoizedState,S=S!==null?S.dehydrated!==null:!0),S)return w;w=w.return}while(w!==null);return null}function xc(w,S,F,U,X){return(w.mode&1)===0?(w===S?w.flags|=65536:(w.flags|=128,F.flags|=131072,F.flags&=-52805,F.tag===1&&(F.alternate===null?F.tag=17:(S=Cl(-1,1),S.tag=2,El(F,S,1))),F.lanes|=1),w):(w.flags|=65536,w.lanes=X,w)}var th=o.ReactCurrentOwner,Ls=!1;function Js(w,S,F,U){S.child=w===null?aw(S,null,F,U):nu(S,w.child,F,U)}function eg(w,S,F,U,X){F=F.render;var ae=S.ref;return md(S,X),U=Yf(w,S,F,U,ae,X),F=H0(),w!==null&&!Ls?(S.updateQueue=w.updateQueue,S.flags&=-2053,w.lanes&=~X,jl(w,S,X)):(zn&&F&&zf(S),S.flags|=1,Js(w,S,U,X),S.child)}function gu(w,S,F,U,X){if(w===null){var ae=F.type;return typeof ae=="function"&&!Md(ae)&&ae.defaultProps===void 0&&F.compare===null&&F.defaultProps===void 0?(S.tag=15,S.type=ae,Al(w,S,ae,U,X)):(w=mg(F.type,null,U,S,S.mode,X),w.ref=S.ref,w.return=S,S.child=w)}if(ae=w.child,(w.lanes&X)===0){var be=ae.memoizedProps;if(F=F.compare,F=F!==null?F:M0,F(be,U)&&w.ref===S.ref)return jl(w,S,X)}return S.flags|=1,w=Nc(ae,U),w.ref=S.ref,w.return=S,S.child=w}function Al(w,S,F,U,X){if(w!==null){var ae=w.memoizedProps;if(M0(ae,U)&&w.ref===S.ref)if(Ls=!1,S.pendingProps=U=ae,(w.lanes&X)!==0)(w.flags&131072)!==0&&(Ls=!0);else return S.lanes=w.lanes,jl(w,S,X)}return Ho(w,S,F,U,X)}function Ln(w,S,F){var U=S.pendingProps,X=U.children,ae=w!==null?w.memoizedState:null;if(U.mode==="hidden")if((S.mode&1)===0)S.memoizedState={baseLanes:0,cachePool:null,transitions:null},ar(kc,Bs),Bs|=F;else{if((F&1073741824)===0)return w=ae!==null?ae.baseLanes|F:F,S.lanes=S.childLanes=1073741824,S.memoizedState={baseLanes:w,cachePool:null,transitions:null},S.updateQueue=null,ar(kc,Bs),Bs|=w,null;S.memoizedState={baseLanes:0,cachePool:null,transitions:null},U=ae!==null?ae.baseLanes:F,ar(kc,Bs),Bs|=U}else ae!==null?(U=ae.baseLanes|F,S.memoizedState=null):U=F,ar(kc,Bs),Bs|=U;return Js(w,S,X,F),S.child}function Nn(w,S){var F=S.ref;(w===null&&F!==null||w!==null&&w.ref!==F)&&(S.flags|=512,S.flags|=2097152)}function Ho(w,S,F,U,X){var ae=Ye(F)?Sr:ht.current;return ae=Qn(S,ae),md(S,X),F=Yf(w,S,F,U,ae,X),U=H0(),w!==null&&!Ls?(S.updateQueue=w.updateQueue,S.flags&=-2053,w.lanes&=~X,jl(w,S,X)):(zn&&U&&zf(S),S.flags|=1,Js(w,S,F,X),S.child)}function fa(w,S,F,U,X){if(Ye(F)){var ae=!0;Tt(S)}else ae=!1;if(md(S,X),S.stateNode===null)rh(w,S),gw(S,F,U),Wo(S,F,U,X),U=!0;else if(w===null){var be=S.stateNode,He=S.memoizedProps;be.props=He;var lt=be.context,$t=F.contextType;typeof $t=="object"&&$t!==null?$t=Oi($t):($t=Ye(F)?Sr:ht.current,$t=Qn(S,$t));var or=F.getDerivedStateFromProps,Lr=typeof or=="function"||typeof be.getSnapshotBeforeUpdate=="function";Lr||typeof be.UNSAFE_componentWillReceiveProps!="function"&&typeof be.componentWillReceiveProps!="function"||(He!==U||lt!==$t)&&Q0(S,be,U,$t),Fi=!1;var tr=S.memoizedState;be.state=tr,fc(S,U,be,X),lt=S.memoizedState,He!==U||tr!==lt||Er.current||Fi?(typeof or=="function"&&(qm(S,F,or,U),lt=S.memoizedState),(He=Fi||hw(S,F,He,U,tr,lt,$t))?(Lr||typeof be.UNSAFE_componentWillMount!="function"&&typeof be.componentWillMount!="function"||(typeof be.componentWillMount=="function"&&be.componentWillMount(),typeof be.UNSAFE_componentWillMount=="function"&&be.UNSAFE_componentWillMount()),typeof be.componentDidMount=="function"&&(S.flags|=4194308)):(typeof be.componentDidMount=="function"&&(S.flags|=4194308),S.memoizedProps=U,S.memoizedState=lt),be.props=U,be.state=lt,be.context=$t,U=He):(typeof be.componentDidMount=="function"&&(S.flags|=4194308),U=!1)}else{be=S.stateNode,ow(w,S),He=S.memoizedProps,$t=S.type===S.elementType?He:Di(S.type,He),be.props=$t,Lr=S.pendingProps,tr=be.context,lt=F.contextType,typeof lt=="object"&&lt!==null?lt=Oi(lt):(lt=Ye(F)?Sr:ht.current,lt=Qn(S,lt));var $n=F.getDerivedStateFromProps;(or=typeof $n=="function"||typeof be.getSnapshotBeforeUpdate=="function")||typeof be.UNSAFE_componentWillReceiveProps!="function"&&typeof be.componentWillReceiveProps!="function"||(He!==Lr||tr!==lt)&&Q0(S,be,U,lt),Fi=!1,tr=S.memoizedState,be.state=tr,fc(S,U,be,X);var _n=S.memoizedState;He!==Lr||tr!==_n||Er.current||Fi?(typeof $n=="function"&&(qm(S,F,$n,U),_n=S.memoizedState),($t=Fi||hw(S,F,$t,U,tr,_n,lt)||!1)?(or||typeof be.UNSAFE_componentWillUpdate!="function"&&typeof be.componentWillUpdate!="function"||(typeof be.componentWillUpdate=="function"&&be.componentWillUpdate(U,_n,lt),typeof be.UNSAFE_componentWillUpdate=="function"&&be.UNSAFE_componentWillUpdate(U,_n,lt)),typeof be.componentDidUpdate=="function"&&(S.flags|=4),typeof be.getSnapshotBeforeUpdate=="function"&&(S.flags|=1024)):(typeof be.componentDidUpdate!="function"||He===w.memoizedProps&&tr===w.memoizedState||(S.flags|=4),typeof be.getSnapshotBeforeUpdate!="function"||He===w.memoizedProps&&tr===w.memoizedState||(S.flags|=1024),S.memoizedProps=U,S.memoizedState=_n),be.props=U,be.state=_n,be.context=lt,U=$t):(typeof be.componentDidUpdate!="function"||He===w.memoizedProps&&tr===w.memoizedState||(S.flags|=4),typeof be.getSnapshotBeforeUpdate!="function"||He===w.memoizedProps&&tr===w.memoizedState||(S.flags|=1024),U=!1)}return ka(w,S,F,U,ae,X)}function ka(w,S,F,U,X,ae){Nn(w,S);var be=(S.flags&128)!==0;if(!U&&!be)return X&&kt(S,F,!1),jl(w,S,ae);U=S.stateNode,th.current=S;var He=be&&typeof F.getDerivedStateFromError!="function"?null:U.render();return S.flags|=1,w!==null&&be?(S.child=nu(S,w.child,null,ae),S.child=nu(S,null,He,ae)):Js(w,S,He,ae),S.memoizedState=U.state,X&&kt(S,F,!0),S.child}function vc(w){var S=w.stateNode;S.pendingContext?$e(w,S.pendingContext,S.pendingContext!==S.context):S.context&&$e(w,S.context,!1),W0(w,S.containerInfo)}function pu(w,S,F,U,X){return tu(),Cm(X),S.flags|=256,Js(w,S,F,U),S.child}var Ta={dehydrated:null,treeContext:null,retryLane:0};function Sd(w){return{baseLanes:w,cachePool:null,transitions:null}}function Km(w,S,F){var U=S.pendingProps,X=es.current,ae=!1,be=(S.flags&128)!==0,He;if((He=be)||(He=w!==null&&w.memoizedState===null?!1:(X&2)!==0),He?(ae=!0,S.flags&=-129):(w===null||w.memoizedState!==null)&&(X|=1),ar(es,X&1),w===null)return Tm(S),w=S.memoizedState,w!==null&&(w=w.dehydrated,w!==null)?((S.mode&1)===0?S.lanes=1:vr(w)?S.lanes=8:S.lanes=1073741824,null):(be=U.children,w=U.fallback,ae?(U=S.mode,ae=S.child,be={mode:"hidden",children:be},(U&1)===0&&ae!==null?(ae.childLanes=0,ae.pendingProps=be):ae=Ld(be,U,0,null),w=ha(w,U,F,null),ae.return=S,w.return=S,ae.sibling=w,S.child=ae,S.child.memoizedState=Sd(F),S.memoizedState=Ta,w):tg(S,be));if(X=w.memoizedState,X!==null&&(He=X.dehydrated,He!==null))return yw(w,S,be,U,He,X,F);if(ae){ae=U.fallback,be=S.mode,X=w.child,He=X.sibling;var lt={mode:"hidden",children:U.children};return(be&1)===0&&S.child!==X?(U=S.child,U.childLanes=0,U.pendingProps=lt,S.deletions=null):(U=Nc(X,lt),U.subtreeFlags=X.subtreeFlags&14680064),He!==null?ae=Nc(He,ae):(ae=ha(ae,be,F,null),ae.flags|=2),ae.return=S,U.return=S,U.sibling=ae,S.child=U,U=ae,ae=S.child,be=w.child.memoizedState,be=be===null?Sd(F):{baseLanes:be.baseLanes|F,cachePool:null,transitions:be.transitions},ae.memoizedState=be,ae.childLanes=w.childLanes&~F,S.memoizedState=Ta,U}return ae=w.child,w=ae.sibling,U=Nc(ae,{mode:"visible",children:U.children}),(S.mode&1)===0&&(U.lanes=F),U.return=S,U.sibling=null,w!==null&&(F=S.deletions,F===null?(S.deletions=[w],S.flags|=16):F.push(w)),S.child=U,S.memoizedState=null,U}function tg(w,S){return S=Ld({mode:"visible",children:S},w.mode,0,null),S.return=w,w.child=S}function mu(w,S,F,U){return U!==null&&Cm(U),nu(S,w.child,null,F),w=tg(S,S.pendingProps.children),w.flags|=2,S.memoizedState=null,w}function yw(w,S,F,U,X,ae,be){if(F)return S.flags&256?(S.flags&=-257,U=yc(Error(i(422))),mu(w,S,be,U)):S.memoizedState!==null?(S.child=w.child,S.flags|=128,null):(ae=U.fallback,X=S.mode,U=Ld({mode:"visible",children:U.children},X,0,null),ae=ha(ae,X,be,null),ae.flags|=2,U.return=S,ae.return=S,U.sibling=ae,S.child=U,(S.mode&1)!==0&&nu(S,w.child,null,be),S.child.memoizedState=Sd(be),S.memoizedState=Ta,ae);if((S.mode&1)===0)return mu(w,S,be,null);if(vr(X))return U=hr(X).digest,ae=Error(i(419)),U=yc(ae,U,void 0),mu(w,S,be,U);if(F=(be&w.childLanes)!==0,Ls||F){if(U=An,U!==null){switch(be&-be){case 4:X=2;break;case 16:X=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:X=32;break;case 536870912:X=268435456;break;default:X=0}X=(X&(U.suspendedLanes|be))!==0?0:X,X!==0&&X!==ae.retryLane&&(ae.retryLane=X,So(w,X),Ea(U,w,X,-1))}return Id(),U=yc(Error(i(421))),mu(w,S,be,U)}return Vr(X)?(S.flags|=128,S.child=w.child,S=Tw.bind(null,w),le(X,S),null):(w=ae.treeContext,me&&(za=Se(X),ua=S,zn=!0,_o=null,Gf=!1,w!==null&&(Wa[Pi++]=ui,Wa[Pi++]=wo,Wa[Pi++]=Is,ui=w.id,wo=w.overflow,Is=S)),S=tg(S,U.children),S.flags|=4096,S)}function Go(w,S,F){w.lanes|=S;var U=w.alternate;U!==null&&(U.lanes|=S),su(w.return,S,F)}function kd(w,S,F,U,X){var ae=w.memoizedState;ae===null?w.memoizedState={isBackwards:S,rendering:null,renderingStartTime:0,last:U,tail:F,tailMode:X}:(ae.isBackwards=S,ae.rendering=null,ae.renderingStartTime=0,ae.last=U,ae.tail=F,ae.tailMode=X)}function rg(w,S,F){var U=S.pendingProps,X=U.revealOrder,ae=U.tail;if(Js(w,S,U.children,F),U=es.current,(U&2)!==0)U=U&1|2,S.flags|=128;else{if(w!==null&&(w.flags&128)!==0)e:for(w=S.child;w!==null;){if(w.tag===13)w.memoizedState!==null&&Go(w,F,S);else if(w.tag===19)Go(w,F,S);else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===S)break e;for(;w.sibling===null;){if(w.return===null||w.return===S)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}U&=1}if(ar(es,U),(S.mode&1)===0)S.memoizedState=null;else switch(X){case"forwards":for(F=S.child,X=null;F!==null;)w=F.alternate,w!==null&&z0(w)===null&&(X=F),F=F.sibling;F=X,F===null?(X=S.child,S.child=null):(X=F.sibling,F.sibling=null),kd(S,!1,X,F,ae);break;case"backwards":for(F=null,X=S.child,S.child=null;X!==null;){if(w=X.alternate,w!==null&&z0(w)===null){S.child=X;break}w=X.sibling,X.sibling=F,F=X,X=w}kd(S,!0,F,null,ae);break;case"together":kd(S,!1,null,null,void 0);break;default:S.memoizedState=null}return S.child}function rh(w,S){(S.mode&1)===0&&w!==null&&(w.alternate=null,S.alternate=null,S.flags|=2)}function jl(w,S,F){if(w!==null&&(S.dependencies=w.dependencies),Ol|=S.lanes,(F&S.childLanes)===0)return null;if(w!==null&&S.child!==w.child)throw Error(i(153));if(S.child!==null){for(w=S.child,F=Nc(w,w.pendingProps),S.child=F,F.return=S;w.sibling!==null;)w=w.sibling,F=F.sibling=Nc(w,w.pendingProps),F.return=S;F.sibling=null}return S.child}function wc(w,S,F){switch(S.tag){case 3:vc(S),tu();break;case 5:Pm(S);break;case 1:Ye(S.type)&&Tt(S);break;case 4:W0(S,S.stateNode.containerInfo);break;case 10:iw(S,S.type._context,S.memoizedProps.value);break;case 13:var U=S.memoizedState;if(U!==null)return U.dehydrated!==null?(ar(es,es.current&1),S.flags|=128,null):(F&S.child.childLanes)!==0?Km(w,S,F):(ar(es,es.current&1),w=jl(w,S,F),w!==null?w.sibling:null);ar(es,es.current&1);break;case 19:if(U=(F&S.childLanes)!==0,(w.flags&128)!==0){if(U)return rg(w,S,F);S.flags|=128}var X=S.memoizedState;if(X!==null&&(X.rendering=null,X.tail=null,X.lastEffect=null),ar(es,es.current),U)break;return null;case 22:case 23:return S.lanes=0,Ln(w,S,F)}return jl(w,S,F)}function Ha(w){w.flags|=4}function yu(w,S){if(w!==null&&w.child===S.child)return!0;if((S.flags&16)!==0)return!1;for(w=S.child;w!==null;){if((w.flags&12854)!==0||(w.subtreeFlags&12854)!==0)return!1;w=w.sibling}return!0}var bc,_c,Ga,Va;if(Ee)bc=function(w,S){for(var F=S.child;F!==null;){if(F.tag===5||F.tag===6)L(w,F.stateNode);else if(F.tag!==4&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===S)break;for(;F.sibling===null;){if(F.return===null||F.return===S)return;F=F.return}F.sibling.return=F.return,F=F.sibling}},_c=function(){},Ga=function(w,S,F,U,X){if(w=w.memoizedProps,w!==U){var ae=S.stateNode,be=eo(Zi.current);F=J(ae,F,w,U,X,be),(S.updateQueue=F)&&Ha(S)}},Va=function(w,S,F,U){F!==U&&Ha(S)};else if(ie){bc=function(w,S,F,U){for(var X=S.child;X!==null;){if(X.tag===5){var ae=X.stateNode;F&&U&&(ae=ft(ae,X.type,X.memoizedProps,X)),L(w,ae)}else if(X.tag===6)ae=X.stateNode,F&&U&&(ae=ot(ae,X.memoizedProps,X)),L(w,ae);else if(X.tag!==4){if(X.tag===22&&X.memoizedState!==null)ae=X.child,ae!==null&&(ae.return=X),bc(w,X,!0,!0);else if(X.child!==null){X.child.return=X,X=X.child;continue}}if(X===S)break;for(;X.sibling===null;){if(X.return===null||X.return===S)return;X=X.return}X.sibling.return=X.return,X=X.sibling}};var Sc=function(w,S,F,U){for(var X=S.child;X!==null;){if(X.tag===5){var ae=X.stateNode;F&&U&&(ae=ft(ae,X.type,X.memoizedProps,X)),Ct(w,ae)}else if(X.tag===6)ae=X.stateNode,F&&U&&(ae=ot(ae,X.memoizedProps,X)),Ct(w,ae);else if(X.tag!==4){if(X.tag===22&&X.memoizedState!==null)ae=X.child,ae!==null&&(ae.return=X),Sc(w,X,!0,!0);else if(X.child!==null){X.child.return=X,X=X.child;continue}}if(X===S)break;for(;X.sibling===null;){if(X.return===null||X.return===S)return;X=X.return}X.sibling.return=X.return,X=X.sibling}};_c=function(w,S){var F=S.stateNode;if(!yu(w,S)){w=F.containerInfo;var U=Xe(w);Sc(U,S,!1,!1),F.pendingChildren=U,Ha(S),Pt(w,U)}},Ga=function(w,S,F,U,X){var ae=w.stateNode,be=w.memoizedProps;if((w=yu(w,S))&&be===U)S.stateNode=ae;else{var He=S.stateNode,lt=eo(Zi.current),$t=null;be!==U&&($t=J(He,F,be,U,X,lt)),w&&$t===null?S.stateNode=ae:(ae=Te(ae,$t,F,be,U,S,w,He),H(ae,F,U,X,lt)&&Ha(S),S.stateNode=ae,w?Ha(S):bc(ae,S,!1,!1))}},Va=function(w,S,F,U){F!==U?(w=eo(gc.current),F=eo(Zi.current),S.stateNode=ne(U,w,F,S),Ha(S)):S.stateNode=w.stateNode}}else _c=function(){},Ga=function(){},Va=function(){};function Ii(w,S){if(!zn)switch(w.tailMode){case"hidden":S=w.tail;for(var F=null;S!==null;)S.alternate!==null&&(F=S),S=S.sibling;F===null?w.tail=null:F.sibling=null;break;case"collapsed":F=w.tail;for(var U=null;F!==null;)F.alternate!==null&&(U=F),F=F.sibling;U===null?S||w.tail===null?w.tail=null:w.tail.sibling=null:U.sibling=null}}function Kn(w){var S=w.alternate!==null&&w.alternate.child===w.child,F=0,U=0;if(S)for(var X=w.child;X!==null;)F|=X.lanes|X.childLanes,U|=X.subtreeFlags&14680064,U|=X.flags&14680064,X.return=w,X=X.sibling;else for(X=w.child;X!==null;)F|=X.lanes|X.childLanes,U|=X.subtreeFlags,U|=X.flags,X.return=w,X=X.sibling;return w.subtreeFlags|=U,w.childLanes=F,S}function xu(w,S,F){var U=S.pendingProps;switch(Hf(S),S.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kn(S),null;case 1:return Ye(S.type)&&ye(),Kn(S),null;case 3:return F=S.stateNode,au(),Wr(Er),Wr(ht),Rm(),F.pendingContext&&(F.context=F.pendingContext,F.pendingContext=null),(w===null||w.child===null)&&(I0(S)?Ha(S):w===null||w.memoizedState.isDehydrated&&(S.flags&256)===0||(S.flags|=1024,_o!==null&&(gg(_o),_o=null))),_c(w,S),Kn(S),null;case 5:Om(S),F=eo(gc.current);var X=S.type;if(w!==null&&S.stateNode!=null)Ga(w,S,X,U,F),w.ref!==S.ref&&(S.flags|=512,S.flags|=2097152);else{if(!U){if(S.stateNode===null)throw Error(i(166));return Kn(S),null}if(w=eo(Zi.current),I0(S)){if(!me)throw Error(i(175));w=ke(S.stateNode,S.type,S.memoizedProps,F,w,S,!Gf),S.updateQueue=w,w!==null&&Ha(S)}else{var ae=V(X,U,F,w,S);bc(ae,S,!1,!1),S.stateNode=ae,H(ae,X,U,F,w)&&Ha(S)}S.ref!==null&&(S.flags|=512,S.flags|=2097152)}return Kn(S),null;case 6:if(w&&S.stateNode!=null)Va(w,S,w.memoizedProps,U);else{if(typeof U!="string"&&S.stateNode===null)throw Error(i(166));if(w=eo(gc.current),F=eo(Zi.current),I0(S)){if(!me)throw Error(i(176));if(w=S.stateNode,F=S.memoizedProps,(U=Ge(w,F,S,!Gf))&&(X=ua,X!==null))switch(X.tag){case 3:Ze(X.stateNode.containerInfo,w,F,(X.mode&1)!==0);break;case 5:mt(X.type,X.memoizedProps,X.stateNode,w,F,(X.mode&1)!==0)}U&&Ha(S)}else S.stateNode=ne(U,w,F,S)}return Kn(S),null;case 13:if(Wr(es),U=S.memoizedState,w===null||w.memoizedState!==null&&w.memoizedState.dehydrated!==null){if(zn&&za!==null&&(S.mode&1)!==0&&(S.flags&128)===0)rw(),tu(),S.flags|=98560,X=!1;else if(X=I0(S),U!==null&&U.dehydrated!==null){if(w===null){if(!X)throw Error(i(318));if(!me)throw Error(i(344));if(X=S.memoizedState,X=X!==null?X.dehydrated:null,!X)throw Error(i(317));dt(X,S)}else tu(),(S.flags&128)===0&&(S.memoizedState=null),S.flags|=4;Kn(S),X=!1}else _o!==null&&(gg(_o),_o=null),X=!0;if(!X)return S.flags&65536?S:null}return(S.flags&128)!==0?(S.lanes=F,S):(F=U!==null,F!==(w!==null&&w.memoizedState!==null)&&F&&(S.child.flags|=8192,(S.mode&1)!==0&&(w===null||(es.current&1)!==0?Yn===0&&(Yn=3):Id())),S.updateQueue!==null&&(S.flags|=4),Kn(S),null);case 4:return au(),_c(w,S),w===null&&Oe(S.stateNode.containerInfo),Kn(S),null;case 10:return Vf(S.type._context),Kn(S),null;case 17:return Ye(S.type)&&ye(),Kn(S),null;case 19:if(Wr(es),X=S.memoizedState,X===null)return Kn(S),null;if(U=(S.flags&128)!==0,ae=X.rendering,ae===null)if(U)Ii(X,!1);else{if(Yn!==0||w!==null&&(w.flags&128)!==0)for(w=S.child;w!==null;){if(ae=z0(w),ae!==null){for(S.flags|=128,Ii(X,!1),w=ae.updateQueue,w!==null&&(S.updateQueue=w,S.flags|=4),S.subtreeFlags=0,w=F,F=S.child;F!==null;)U=F,X=w,U.flags&=14680066,ae=U.alternate,ae===null?(U.childLanes=0,U.lanes=X,U.child=null,U.subtreeFlags=0,U.memoizedProps=null,U.memoizedState=null,U.updateQueue=null,U.dependencies=null,U.stateNode=null):(U.childLanes=ae.childLanes,U.lanes=ae.lanes,U.child=ae.child,U.subtreeFlags=0,U.deletions=null,U.memoizedProps=ae.memoizedProps,U.memoizedState=ae.memoizedState,U.updateQueue=ae.updateQueue,U.type=ae.type,X=ae.dependencies,U.dependencies=X===null?null:{lanes:X.lanes,firstContext:X.firstContext}),F=F.sibling;return ar(es,es.current&1|2),S.child}w=w.sibling}X.tail!==null&&Xs()>ch&&(S.flags|=128,U=!0,Ii(X,!1),S.lanes=4194304)}else{if(!U)if(w=z0(ae),w!==null){if(S.flags|=128,U=!0,w=w.updateQueue,w!==null&&(S.updateQueue=w,S.flags|=4),Ii(X,!0),X.tail===null&&X.tailMode==="hidden"&&!ae.alternate&&!zn)return Kn(S),null}else 2*Xs()-X.renderingStartTime>ch&&F!==1073741824&&(S.flags|=128,U=!0,Ii(X,!1),S.lanes=4194304);X.isBackwards?(ae.sibling=S.child,S.child=ae):(w=X.last,w!==null?w.sibling=ae:S.child=ae,X.last=ae)}return X.tail!==null?(S=X.tail,X.rendering=S,X.tail=S.sibling,X.renderingStartTime=Xs(),S.sibling=null,w=es.current,ar(es,U?w&1|2:w&1),S):(Kn(S),null);case 22:case 23:return pg(),F=S.memoizedState!==null,w!==null&&w.memoizedState!==null!==F&&(S.flags|=8192),F&&(S.mode&1)!==0?(Bs&1073741824)!==0&&(Kn(S),Ee&&S.subtreeFlags&6&&(S.flags|=8192)):Kn(S),null;case 24:return null;case 25:return null}throw Error(i(156,S.tag))}function xw(w,S){switch(Hf(S),S.tag){case 1:return Ye(S.type)&&ye(),w=S.flags,w&65536?(S.flags=w&-65537|128,S):null;case 3:return au(),Wr(Er),Wr(ht),Rm(),w=S.flags,(w&65536)!==0&&(w&128)===0?(S.flags=w&-65537|128,S):null;case 5:return Om(S),null;case 13:if(Wr(es),w=S.memoizedState,w!==null&&w.dehydrated!==null){if(S.alternate===null)throw Error(i(340));tu()}return w=S.flags,w&65536?(S.flags=w&-65537|128,S):null;case 19:return Wr(es),null;case 4:return au(),null;case 10:return Vf(S.type._context),null;case 22:case 23:return pg(),null;case 24:return null;default:return null}}var Td=!1,Qs=!1,Mi=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function bn(w,S){var F=w.ref;if(F!==null)if(typeof F=="function")try{F(null)}catch(U){Gn(w,S,U)}else F.current=null}function Li(w,S,F){try{F()}catch(U){Gn(w,S,U)}}var Xm=!1;function vw(w,S){for(I(w.containerInfo),Qt=S;Qt!==null;)if(w=Qt,S=w.child,(w.subtreeFlags&1028)!==0&&S!==null)S.return=w,Qt=S;else for(;Qt!==null;){w=Qt;try{var F=w.alternate;if((w.flags&1024)!==0)switch(w.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var U=F.memoizedProps,X=F.memoizedState,ae=w.stateNode,be=ae.getSnapshotBeforeUpdate(w.elementType===w.type?U:Di(w.type,U),X);ae.__reactInternalSnapshotBeforeUpdate=be}break;case 3:Ee&&we(w.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(He){Gn(w,w.return,He)}if(S=w.sibling,S!==null){S.return=w.return,Qt=S;break}Qt=w.return}return F=Xm,Xm=!1,F}function vu(w,S,F){var U=S.updateQueue;if(U=U!==null?U.lastEffect:null,U!==null){var X=U=U.next;do{if((X.tag&w)===w){var ae=X.destroy;X.destroy=void 0,ae!==void 0&&Li(S,F,ae)}X=X.next}while(X!==U)}}function Cd(w,S){if(S=S.updateQueue,S=S!==null?S.lastEffect:null,S!==null){var F=S=S.next;do{if((F.tag&w)===w){var U=F.create;F.destroy=U()}F=F.next}while(F!==S)}}function ng(w){var S=w.ref;if(S!==null){var F=w.stateNode;switch(w.tag){case 5:w=ee(F);break;default:w=F}typeof S=="function"?S(w):S.current=w}}function nh(w){var S=w.alternate;S!==null&&(w.alternate=null,nh(S)),w.child=null,w.deletions=null,w.sibling=null,w.tag===5&&(S=w.stateNode,S!==null&&ze(S)),w.stateNode=null,w.return=null,w.dependencies=null,w.memoizedProps=null,w.memoizedState=null,w.pendingProps=null,w.stateNode=null,w.updateQueue=null}function Ym(w){return w.tag===5||w.tag===3||w.tag===4}function wu(w){e:for(;;){for(;w.sibling===null;){if(w.return===null||Ym(w.return))return null;w=w.return}for(w.sibling.return=w.return,w=w.sibling;w.tag!==5&&w.tag!==6&&w.tag!==18;){if(w.flags&2||w.child===null||w.tag===4)continue e;w.child.return=w,w=w.child}if(!(w.flags&2))return w.stateNode}}function sh(w,S,F){var U=w.tag;if(U===5||U===6)w=w.stateNode,S?pr(F,w,S):vt(F,w);else if(U!==4&&(w=w.child,w!==null))for(sh(w,S,F),w=w.sibling;w!==null;)sh(w,S,F),w=w.sibling}function Jm(w,S,F){var U=w.tag;if(U===5||U===6)w=w.stateNode,S?Zt(F,w,S):tt(F,w);else if(U!==4&&(w=w.child,w!==null))for(Jm(w,S,F),w=w.sibling;w!==null;)Jm(w,S,F),w=w.sibling}var gs=null,fi=!1;function ko(w,S,F){for(F=F.child;F!==null;)sg(w,S,F),F=F.sibling}function sg(w,S,F){if(ci&&typeof ci.onCommitFiberUnmount=="function")try{ci.onCommitFiberUnmount(cc,F)}catch{}switch(F.tag){case 5:Qs||bn(F,S);case 6:if(Ee){var U=gs,X=fi;gs=null,ko(w,S,F),gs=U,fi=X,gs!==null&&(fi?br(gs,F.stateNode):Ir(gs,F.stateNode))}else ko(w,S,F);break;case 18:Ee&&gs!==null&&(fi?je(gs,F.stateNode):Ce(gs,F.stateNode));break;case 4:Ee?(U=gs,X=fi,gs=F.stateNode.containerInfo,fi=!0,ko(w,S,F),gs=U,fi=X):(ie&&(U=F.stateNode.containerInfo,X=Xe(U),Ue(U,X)),ko(w,S,F));break;case 0:case 11:case 14:case 15:if(!Qs&&(U=F.updateQueue,U!==null&&(U=U.lastEffect,U!==null))){X=U=U.next;do{var ae=X,be=ae.destroy;ae=ae.tag,be!==void 0&&((ae&2)!==0||(ae&4)!==0)&&Li(F,S,be),X=X.next}while(X!==U)}ko(w,S,F);break;case 1:if(!Qs&&(bn(F,S),U=F.stateNode,typeof U.componentWillUnmount=="function"))try{U.props=F.memoizedProps,U.state=F.memoizedState,U.componentWillUnmount()}catch(He){Gn(F,S,He)}ko(w,S,F);break;case 21:ko(w,S,F);break;case 22:F.mode&1?(Qs=(U=Qs)||F.memoizedState!==null,ko(w,S,F),Qs=U):ko(w,S,F);break;default:ko(w,S,F)}}function bu(w){var S=w.updateQueue;if(S!==null){w.updateQueue=null;var F=w.stateNode;F===null&&(F=w.stateNode=new Mi),S.forEach(function(U){var X=YS.bind(null,w,U);F.has(U)||(F.add(U),U.then(X,X))})}}function ro(w,S){var F=S.deletions;if(F!==null)for(var U=0;U<F.length;U++){var X=F[U];try{var ae=w,be=S;if(Ee){var He=be;e:for(;He!==null;){switch(He.tag){case 5:gs=He.stateNode,fi=!1;break e;case 3:gs=He.stateNode.containerInfo,fi=!0;break e;case 4:gs=He.stateNode.containerInfo,fi=!0;break e}He=He.return}if(gs===null)throw Error(i(160));sg(ae,be,X),gs=null,fi=!1}else sg(ae,be,X);var lt=X.alternate;lt!==null&&(lt.return=null),X.return=null}catch($t){Gn(X,S,$t)}}if(S.subtreeFlags&12854)for(S=S.child;S!==null;)ah(S,w),S=S.sibling}function ah(w,S){var F=w.alternate,U=w.flags;switch(w.tag){case 0:case 11:case 14:case 15:if(ro(S,w),Bi(w),U&4){try{vu(3,w,w.return),Cd(3,w)}catch(tr){Gn(w,w.return,tr)}try{vu(5,w,w.return)}catch(tr){Gn(w,w.return,tr)}}break;case 1:ro(S,w),Bi(w),U&512&&F!==null&&bn(F,F.return);break;case 5:if(ro(S,w),Bi(w),U&512&&F!==null&&bn(F,F.return),Ee){if(w.flags&32){var X=w.stateNode;try{xr(X)}catch(tr){Gn(w,w.return,tr)}}if(U&4&&(X=w.stateNode,X!=null)){var ae=w.memoizedProps;if(F=F!==null?F.memoizedProps:ae,U=w.type,S=w.updateQueue,w.updateQueue=null,S!==null)try{Wt(X,S,U,F,ae,w)}catch(tr){Gn(w,w.return,tr)}}}break;case 6:if(ro(S,w),Bi(w),U&4&&Ee){if(w.stateNode===null)throw Error(i(162));X=w.stateNode,ae=w.memoizedProps,F=F!==null?F.memoizedProps:ae;try{gt(X,F,ae)}catch(tr){Gn(w,w.return,tr)}}break;case 3:if(ro(S,w),Bi(w),U&4){if(Ee&&me&&F!==null&&F.memoizedState.isDehydrated)try{oe(S.containerInfo)}catch(tr){Gn(w,w.return,tr)}if(ie){X=S.containerInfo,ae=S.pendingChildren;try{Ue(X,ae)}catch(tr){Gn(w,w.return,tr)}}}break;case 4:if(ro(S,w),Bi(w),U&4&&ie){ae=w.stateNode,X=ae.containerInfo,ae=ae.pendingChildren;try{Ue(X,ae)}catch(tr){Gn(w,w.return,tr)}}break;case 13:ro(S,w),Bi(w),X=w.child,X.flags&8192&&(ae=X.memoizedState!==null,X.stateNode.isHidden=ae,!ae||X.alternate!==null&&X.alternate.memoizedState!==null||(Od=Xs())),U&4&&bu(w);break;case 22:var be=F!==null&&F.memoizedState!==null;if(w.mode&1?(Qs=(F=Qs)||be,ro(S,w),Qs=F):ro(S,w),Bi(w),U&8192){if(F=w.memoizedState!==null,(w.stateNode.isHidden=F)&&!be&&(w.mode&1)!==0)for(Qt=w,U=w.child;U!==null;){for(S=Qt=U;Qt!==null;){be=Qt;var He=be.child;switch(be.tag){case 0:case 11:case 14:case 15:vu(4,be,be.return);break;case 1:bn(be,be.return);var lt=be.stateNode;if(typeof lt.componentWillUnmount=="function"){var $t=be,or=be.return;try{var Lr=$t;lt.props=Lr.memoizedProps,lt.state=Lr.memoizedState,lt.componentWillUnmount()}catch(tr){Gn($t,or,tr)}}break;case 5:bn(be,be.return);break;case 22:if(be.memoizedState!==null){og(S);continue}}He!==null?(He.return=be,Qt=He):og(S)}U=U.sibling}if(Ee){e:if(U=null,Ee)for(S=w;;){if(S.tag===5){if(U===null){U=S;try{X=S.stateNode,F?er(X):ge(S.stateNode,S.memoizedProps)}catch(tr){Gn(w,w.return,tr)}}}else if(S.tag===6){if(U===null)try{ae=S.stateNode,F?_r(ae):ue(ae,S.memoizedProps)}catch(tr){Gn(w,w.return,tr)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===w)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===w)break e;for(;S.sibling===null;){if(S.return===null||S.return===w)break e;U===S&&(U=null),S=S.return}U===S&&(U=null),S.sibling.return=S.return,S=S.sibling}}}break;case 19:ro(S,w),Bi(w),U&4&&bu(w);break;case 21:break;default:ro(S,w),Bi(w)}}function Bi(w){var S=w.flags;if(S&2){try{if(Ee){e:{for(var F=w.return;F!==null;){if(Ym(F)){var U=F;break e}F=F.return}throw Error(i(160))}switch(U.tag){case 5:var X=U.stateNode;U.flags&32&&(xr(X),U.flags&=-33);var ae=wu(w);Jm(w,ae,X);break;case 3:case 4:var be=U.stateNode.containerInfo,He=wu(w);sh(w,He,be);break;default:throw Error(i(161))}}}catch(lt){Gn(w,w.return,lt)}w.flags&=-3}S&4096&&(w.flags&=-4097)}function Ed(w,S,F){Qt=w,ag(w)}function ag(w,S,F){for(var U=(w.mode&1)!==0;Qt!==null;){var X=Qt,ae=X.child;if(X.tag===22&&U){var be=X.memoizedState!==null||Td;if(!be){var He=X.alternate,lt=He!==null&&He.memoizedState!==null||Qs;He=Td;var $t=Qs;if(Td=be,(Qs=lt)&&!$t)for(Qt=X;Qt!==null;)be=Qt,lt=be.child,be.tag===22&&be.memoizedState!==null?lg(X):lt!==null?(lt.return=be,Qt=lt):lg(X);for(;ae!==null;)Qt=ae,ag(ae),ae=ae.sibling;Qt=X,Td=He,Qs=$t}ig(w)}else(X.subtreeFlags&8772)!==0&&ae!==null?(ae.return=X,Qt=ae):ig(w)}}function ig(w){for(;Qt!==null;){var S=Qt;if((S.flags&8772)!==0){var F=S.alternate;try{if((S.flags&8772)!==0)switch(S.tag){case 0:case 11:case 15:Qs||Cd(5,S);break;case 1:var U=S.stateNode;if(S.flags&4&&!Qs)if(F===null)U.componentDidMount();else{var X=S.elementType===S.type?F.memoizedProps:Di(S.type,F.memoizedProps);U.componentDidUpdate(X,F.memoizedState,U.__reactInternalSnapshotBeforeUpdate)}var ae=S.updateQueue;ae!==null&&lw(S,ae,U);break;case 3:var be=S.updateQueue;if(be!==null){if(F=null,S.child!==null)switch(S.child.tag){case 5:F=ee(S.child.stateNode);break;case 1:F=S.child.stateNode}lw(S,be,F)}break;case 5:var He=S.stateNode;F===null&&S.flags&4&&_t(He,S.type,S.memoizedProps,S);break;case 6:break;case 4:break;case 12:break;case 13:if(me&&S.memoizedState===null){var lt=S.alternate;if(lt!==null){var $t=lt.memoizedState;if($t!==null){var or=$t.dehydrated;or!==null&&fe(or)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Qs||S.flags&512&&ng(S)}catch(Lr){Gn(S,S.return,Lr)}}if(S===w){Qt=null;break}if(F=S.sibling,F!==null){F.return=S.return,Qt=F;break}Qt=S.return}}function og(w){for(;Qt!==null;){var S=Qt;if(S===w){Qt=null;break}var F=S.sibling;if(F!==null){F.return=S.return,Qt=F;break}Qt=S.return}}function lg(w){for(;Qt!==null;){var S=Qt;try{switch(S.tag){case 0:case 11:case 15:var F=S.return;try{Cd(4,S)}catch(lt){Gn(S,F,lt)}break;case 1:var U=S.stateNode;if(typeof U.componentDidMount=="function"){var X=S.return;try{U.componentDidMount()}catch(lt){Gn(S,X,lt)}}var ae=S.return;try{ng(S)}catch(lt){Gn(S,ae,lt)}break;case 5:var be=S.return;try{ng(S)}catch(lt){Gn(S,be,lt)}}}catch(lt){Gn(S,S.return,lt)}if(S===w){Qt=null;break}var He=S.sibling;if(He!==null){He.return=S.return,Qt=He;break}Qt=S.return}}var Pl=0,qa=1,Vo=2,Nd=3,ih=4;if(typeof Symbol=="function"&&Symbol.for){var $i=Symbol.for;Pl=$i("selector.component"),qa=$i("selector.has_pseudo_class"),Vo=$i("selector.role"),Nd=$i("selector.test_id"),ih=$i("selector.text")}function qo(w){var S=Ne(w);if(S!=null){if(typeof S.memoizedProps["data-testname"]!="string")throw Error(i(364));return S}if(w=Fe(w),w===null)throw Error(i(362));return w.stateNode.current}function oh(w,S){switch(S.$$typeof){case Pl:if(w.type===S.value)return!0;break;case qa:e:{S=S.value,w=[w,0];for(var F=0;F<w.length;){var U=w[F++],X=w[F++],ae=S[X];if(U.tag!==5||!ut(U)){for(;ae!=null&&oh(U,ae);)X++,ae=S[X];if(X===S.length){S=!0;break e}else for(U=U.child;U!==null;)w.push(U,X),U=U.sibling}}S=!1}return S;case Vo:if(w.tag===5&&At(w.stateNode,S.value))return!0;break;case ih:if((w.tag===5||w.tag===6)&&(w=xt(w),w!==null&&0<=w.indexOf(S.value)))return!0;break;case Nd:if(w.tag===5&&(w=w.memoizedProps["data-testname"],typeof w=="string"&&w.toLowerCase()===S.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function cg(w){switch(w.$$typeof){case Pl:return"<"+(P(w.value)||"Unknown")+">";case qa:return":has("+(cg(w)||"")+")";case Vo:return'[role="'+w.value+'"]';case ih:return'"'+w.value+'"';case Nd:return'[data-testname="'+w.value+'"]';default:throw Error(i(365))}}function Ko(w,S){var F=[];w=[w,0];for(var U=0;U<w.length;){var X=w[U++],ae=w[U++],be=S[ae];if(X.tag!==5||!ut(X)){for(;be!=null&&oh(X,be);)ae++,be=S[ae];if(ae===S.length)F.push(X);else for(X=X.child;X!==null;)w.push(X,ae),X=X.sibling}}return F}function Xo(w,S){if(!Me)throw Error(i(363));w=qo(w),w=Ko(w,S),S=[],w=Array.from(w);for(var F=0;F<w.length;){var U=w[F++];if(U.tag===5)ut(U)||S.push(U.stateNode);else for(U=U.child;U!==null;)w.push(U),U=U.sibling}return S}var ug=Math.ceil,lh=o.ReactCurrentDispatcher,Ad=o.ReactCurrentOwner,cs=o.ReactCurrentBatchConfig,zr=0,An=null,Xn=null,ps=0,Bs=0,kc=Xr(0),Yn=0,jd=null,Ol=0,Bn=0,Pd=0,_u=null,Ca=null,Od=0,ch=1/0,Ka=null;function Tn(){ch=Xs()+500}var us=!1,Ss=null,To=null,Tc=!1,no=null,dg=0,ks=0,uh=null,Fd=-1,Rd=0;function Hn(){return(zr&6)!==0?Xs():Fd!==-1?Fd:Fd=Xs()}function $s(w){return(w.mode&1)===0?1:(zr&2)!==0&&ps!==0?ps&-ps:qS.transition!==null?(Rd===0&&(Rd=ud()),Rd):(w=en,w!==0?w:Re())}function Ea(w,S,F,U){if(50<ks)throw ks=0,uh=null,Error(i(185));Qi(w,F,U),((zr&2)===0||w!==An)&&(w===An&&((zr&2)===0&&(Bn|=F),Yn===4&&Fl(w,ps)),Na(w,U),F===1&&zr===0&&(S.mode&1)===0&&(Tn(),hd&&ca()))}function Na(w,S){var F=w.callbackNode;la(w,S);var U=Fr(w,w===An?ps:0);if(U===0)F!==null&&Y1(F),w.callbackNode=null,w.callbackPriority=0;else if(S=U&-U,w.callbackPriority!==S){if(F!=null&&Y1(F),S===1)w.tag===0?Q1(Qm.bind(null,w)):R0(Qm.bind(null,w)),Nt?et(function(){(zr&6)===0&&ca()}):Uo(j0,ca),F=null;else{switch(dd(U)){case 1:F=j0;break;case 4:F=P0;break;case 16:F=O0;break;case 536870912:F=VS;break;default:F=O0}F=ay(F,fg.bind(null,w))}w.callbackPriority=S,w.callbackNode=F}}function fg(w,S){if(Fd=-1,Rd=0,(zr&6)!==0)throw Error(i(327));var F=w.callbackNode;if(Rl()&&w.callbackNode!==F)return null;var U=Fr(w,w===An?ps:0);if(U===0)return null;if((U&30)!==0||(U&w.expiredLanes)!==0||S)S=Su(w,U);else{S=U;var X=zr;zr|=2;var ae=ey();(An!==w||ps!==S)&&(Ka=null,Tn(),Cc(w,S));do try{ty();break}catch(He){Dd(w,He)}while(!0);Nm(),lh.current=ae,zr=X,Xn!==null?S=0:(An=null,ps=0,S=Yn)}if(S!==0){if(S===2&&(X=ic(w),X!==0&&(U=X,S=hg(w,X))),S===1)throw F=jd,Cc(w,0),Fl(w,U),Na(w,Xs()),F;if(S===6)Fl(w,U);else{if(X=w.current.alternate,(U&30)===0&&!ww(X)&&(S=Su(w,U),S===2&&(ae=ic(w),ae!==0&&(U=ae,S=hg(w,ae))),S===1))throw F=jd,Cc(w,0),Fl(w,U),Na(w,Xs()),F;switch(w.finishedWork=X,w.finishedLanes=U,S){case 0:case 1:throw Error(i(345));case 2:Ec(w,Ca,Ka);break;case 3:if(Fl(w,U),(U&130023424)===U&&(S=Od+500-Xs(),10<S)){if(Fr(w,0)!==0)break;if(X=w.suspendedLanes,(X&U)!==U){Hn(),w.pingedLanes|=w.suspendedLanes&X;break}w.timeoutHandle=Z(Ec.bind(null,w,Ca,Ka),S);break}Ec(w,Ca,Ka);break;case 4:if(Fl(w,U),(U&4194240)===U)break;for(S=w.eventTimes,X=-1;0<U;){var be=31-nr(U);ae=1<<be,be=S[be],be>X&&(X=be),U&=~ae}if(U=X,U=Xs()-U,U=(120>U?120:480>U?480:1080>U?1080:1920>U?1920:3e3>U?3e3:4320>U?4320:1960*ug(U/1960))-U,10<U){w.timeoutHandle=Z(Ec.bind(null,w,Ca,Ka),U);break}Ec(w,Ca,Ka);break;case 5:Ec(w,Ca,Ka);break;default:throw Error(i(329))}}}return Na(w,Xs()),w.callbackNode===F?fg.bind(null,w):null}function hg(w,S){var F=_u;return w.current.memoizedState.isDehydrated&&(Cc(w,S).flags|=256),w=Su(w,S),w!==2&&(S=Ca,Ca=F,S!==null&&gg(S)),w}function gg(w){Ca===null?Ca=w:Ca.push.apply(Ca,w)}function ww(w){for(var S=w;;){if(S.flags&16384){var F=S.updateQueue;if(F!==null&&(F=F.stores,F!==null))for(var U=0;U<F.length;U++){var X=F[U],ae=X.getSnapshot;X=X.value;try{if(!vo(ae(),X))return!1}catch{return!1}}}if(F=S.child,S.subtreeFlags&16384&&F!==null)F.return=S,S=F;else{if(S===w)break;for(;S.sibling===null;){if(S.return===null||S.return===w)return!0;S=S.return}S.sibling.return=S.return,S=S.sibling}}return!0}function Fl(w,S){for(S&=~Pd,S&=~Bn,w.suspendedLanes|=S,w.pingedLanes&=~S,w=w.expirationTimes;0<S;){var F=31-nr(S),U=1<<F;w[F]=-1,S&=~U}}function Qm(w){if((zr&6)!==0)throw Error(i(327));Rl();var S=Fr(w,0);if((S&1)===0)return Na(w,Xs()),null;var F=Su(w,S);if(w.tag!==0&&F===2){var U=ic(w);U!==0&&(S=U,F=hg(w,U))}if(F===1)throw F=jd,Cc(w,0),Fl(w,S),Na(w,Xs()),F;if(F===6)throw Error(i(345));return w.finishedWork=w.current.alternate,w.finishedLanes=S,Ec(w,Ca,Ka),Na(w,Xs()),null}function Zm(w){no!==null&&no.tag===0&&(zr&6)===0&&Rl();var S=zr;zr|=1;var F=cs.transition,U=en;try{if(cs.transition=null,en=1,w)return w()}finally{en=U,cs.transition=F,zr=S,(zr&6)===0&&ca()}}function pg(){Bs=kc.current,Wr(kc)}function Cc(w,S){w.finishedWork=null,w.finishedLanes=0;var F=w.timeoutHandle;if(F!==ce&&(w.timeoutHandle=ce,se(F)),Xn!==null)for(F=Xn.return;F!==null;){var U=F;switch(Hf(U),U.tag){case 1:U=U.type.childContextTypes,U!=null&&ye();break;case 3:au(),Wr(Er),Wr(ht),Rm();break;case 5:Om(U);break;case 4:au();break;case 13:Wr(es);break;case 19:Wr(es);break;case 10:Vf(U.type._context);break;case 22:case 23:pg()}F=F.return}if(An=w,Xn=w=Nc(w.current,null),ps=Bs=S,Yn=0,jd=null,Pd=Bn=Ol=0,Ca=_u=null,dc!==null){for(S=0;S<dc.length;S++)if(F=dc[S],U=F.interleaved,U!==null){F.interleaved=null;var X=U.next,ae=F.pending;if(ae!==null){var be=ae.next;ae.next=X,U.next=be}F.pending=U}dc=null}return w}function Dd(w,S){do{var F=Xn;try{if(Nm(),di.current=fu,vd){for(var U=qn.memoizedState;U!==null;){var X=U.queue;X!==null&&(X.pending=null),U=U.next}vd=!1}if(pc=0,Ms=_s=qn=null,Kf=!1,Xf=0,Ad.current=null,F===null||F.return===null){Yn=1,jd=S,Xn=null;break}e:{var ae=w,be=F.return,He=F,lt=S;if(S=ps,He.flags|=32768,lt!==null&&typeof lt=="object"&&typeof lt.then=="function"){var $t=lt,or=He,Lr=or.tag;if((or.mode&1)===0&&(Lr===0||Lr===11||Lr===15)){var tr=or.alternate;tr?(or.updateQueue=tr.updateQueue,or.memoizedState=tr.memoizedState,or.lanes=tr.lanes):(or.updateQueue=null,or.memoizedState=null)}var $n=mw(be);if($n!==null){$n.flags&=-257,xc($n,be,He,ae,S),$n.mode&1&&pw(ae,$t,S),S=$n,lt=$t;var _n=S.updateQueue;if(_n===null){var Xa=new Set;Xa.add(lt),S.updateQueue=Xa}else _n.add(lt);break e}else{if((S&1)===0){pw(ae,$t,S),Id();break e}lt=Error(i(426))}}else if(zn&&He.mode&1){var Yo=mw(be);if(Yo!==null){(Yo.flags&65536)===0&&(Yo.flags|=256),xc(Yo,be,He,ae,S),Cm(hu(lt,He));break e}}ae=lt=hu(lt,He),Yn!==4&&(Yn=2),_u===null?_u=[ae]:_u.push(ae),ae=be;do{switch(ae.tag){case 3:ae.flags|=65536,S&=-S,ae.lanes|=S;var at=zo(ae,lt,S);yd(ae,at);break e;case 1:He=lt;var Ve=ae.type,yt=ae.stateNode;if((ae.flags&128)===0&&(typeof Ve.getDerivedStateFromError=="function"||yt!==null&&typeof yt.componentDidCatch=="function"&&(To===null||!To.has(yt)))){ae.flags|=65536,S&=-S,ae.lanes|=S;var rr=Z0(ae,He,S);yd(ae,rr);break e}}ae=ae.return}while(ae!==null)}ny(F)}catch(yr){S=yr,Xn===F&&F!==null&&(Xn=F=F.return);continue}break}while(!0)}function ey(){var w=lh.current;return lh.current=fu,w===null?fu:w}function Id(){(Yn===0||Yn===3||Yn===2)&&(Yn=4),An===null||(Ol&268435455)===0&&(Bn&268435455)===0||Fl(An,ps)}function Su(w,S){var F=zr;zr|=2;var U=ey();(An!==w||ps!==S)&&(Ka=null,Cc(w,S));do try{bw();break}catch(X){Dd(w,X)}while(!0);if(Nm(),zr=F,lh.current=U,Xn!==null)throw Error(i(261));return An=null,ps=0,Yn}function bw(){for(;Xn!==null;)ry(Xn)}function ty(){for(;Xn!==null&&!J1();)ry(Xn)}function ry(w){var S=Cw(w.alternate,w,Bs);w.memoizedProps=w.pendingProps,S===null?ny(w):Xn=S,Ad.current=null}function ny(w){var S=w;do{var F=S.alternate;if(w=S.return,(S.flags&32768)===0){if(F=xu(F,S,Bs),F!==null){Xn=F;return}}else{if(F=xw(F,S),F!==null){F.flags&=32767,Xn=F;return}if(w!==null)w.flags|=32768,w.subtreeFlags=0,w.deletions=null;else{Yn=6,Xn=null;return}}if(S=S.sibling,S!==null){Xn=S;return}Xn=S=w}while(S!==null);Yn===0&&(Yn=5)}function Ec(w,S,F){var U=en,X=cs.transition;try{cs.transition=null,en=1,_w(w,S,F,U)}finally{cs.transition=X,en=U}return null}function _w(w,S,F,U){do Rl();while(no!==null);if((zr&6)!==0)throw Error(i(327));F=w.finishedWork;var X=w.finishedLanes;if(F===null)return null;if(w.finishedWork=null,w.finishedLanes=0,F===w.current)throw Error(i(177));w.callbackNode=null,w.callbackPriority=0;var ae=F.lanes|F.childLanes;if(lc(w,ae),w===An&&(Xn=An=null,ps=0),(F.subtreeFlags&2064)===0&&(F.flags&2064)===0||Tc||(Tc=!0,ay(O0,function(){return Rl(),null})),ae=(F.flags&15990)!==0,(F.subtreeFlags&15990)!==0||ae){ae=cs.transition,cs.transition=null;var be=en;en=1;var He=zr;zr|=4,Ad.current=null,vw(w,F),ah(F,w),W(w.containerInfo),w.current=F,Ed(F),Uf(),zr=He,en=be,cs.transition=ae}else w.current=F;if(Tc&&(Tc=!1,no=w,dg=X),ae=w.pendingLanes,ae===0&&(To=null),fd(F.stateNode),Na(w,Xs()),S!==null)for(U=w.onRecoverableError,F=0;F<S.length;F++)X=S[F],U(X.value,{componentStack:X.stack,digest:X.digest});if(us)throw us=!1,w=Ss,Ss=null,w;return(dg&1)!==0&&w.tag!==0&&Rl(),ae=w.pendingLanes,(ae&1)!==0?w===uh?ks++:(ks=0,uh=w):ks=0,ca(),null}function Rl(){if(no!==null){var w=dd(dg),S=cs.transition,F=en;try{if(cs.transition=null,en=16>w?16:w,no===null)var U=!1;else{if(w=no,no=null,dg=0,(zr&6)!==0)throw Error(i(331));var X=zr;for(zr|=4,Qt=w.current;Qt!==null;){var ae=Qt,be=ae.child;if((Qt.flags&16)!==0){var He=ae.deletions;if(He!==null){for(var lt=0;lt<He.length;lt++){var $t=He[lt];for(Qt=$t;Qt!==null;){var or=Qt;switch(or.tag){case 0:case 11:case 15:vu(8,or,ae)}var Lr=or.child;if(Lr!==null)Lr.return=or,Qt=Lr;else for(;Qt!==null;){or=Qt;var tr=or.sibling,$n=or.return;if(nh(or),or===$t){Qt=null;break}if(tr!==null){tr.return=$n,Qt=tr;break}Qt=$n}}}var _n=ae.alternate;if(_n!==null){var Xa=_n.child;if(Xa!==null){_n.child=null;do{var Yo=Xa.sibling;Xa.sibling=null,Xa=Yo}while(Xa!==null)}}Qt=ae}}if((ae.subtreeFlags&2064)!==0&&be!==null)be.return=ae,Qt=be;else e:for(;Qt!==null;){if(ae=Qt,(ae.flags&2048)!==0)switch(ae.tag){case 0:case 11:case 15:vu(9,ae,ae.return)}var at=ae.sibling;if(at!==null){at.return=ae.return,Qt=at;break e}Qt=ae.return}}var Ve=w.current;for(Qt=Ve;Qt!==null;){be=Qt;var yt=be.child;if((be.subtreeFlags&2064)!==0&&yt!==null)yt.return=be,Qt=yt;else e:for(be=Ve;Qt!==null;){if(He=Qt,(He.flags&2048)!==0)try{switch(He.tag){case 0:case 11:case 15:Cd(9,He)}}catch(yr){Gn(He,He.return,yr)}if(He===be){Qt=null;break e}var rr=He.sibling;if(rr!==null){rr.return=He.return,Qt=rr;break e}Qt=He.return}}if(zr=X,ca(),ci&&typeof ci.onPostCommitFiberRoot=="function")try{ci.onPostCommitFiberRoot(cc,w)}catch{}U=!0}return U}finally{en=F,cs.transition=S}}return!1}function sy(w,S,F){S=hu(F,S),S=zo(w,S,1),w=El(w,S,1),S=Hn(),w!==null&&(Qi(w,1,S),Na(w,S))}function Gn(w,S,F){if(w.tag===3)sy(w,w,F);else for(;S!==null;){if(S.tag===3){sy(S,w,F);break}else if(S.tag===1){var U=S.stateNode;if(typeof S.type.getDerivedStateFromError=="function"||typeof U.componentDidCatch=="function"&&(To===null||!To.has(U))){w=hu(F,w),w=Z0(S,w,1),S=El(S,w,1),w=Hn(),S!==null&&(Qi(S,1,w),Na(S,w));break}}S=S.return}}function Sw(w,S,F){var U=w.pingCache;U!==null&&U.delete(S),S=Hn(),w.pingedLanes|=w.suspendedLanes&F,An===w&&(ps&F)===F&&(Yn===4||Yn===3&&(ps&130023424)===ps&&500>Xs()-Od?Cc(w,0):Pd|=F),Na(w,S)}function kw(w,S){S===0&&((w.mode&1)===0?S=1:(S=Zn,Zn<<=1,(Zn&130023424)===0&&(Zn=4194304)));var F=Hn();w=So(w,S),w!==null&&(Qi(w,S,F),Na(w,F))}function Tw(w){var S=w.memoizedState,F=0;S!==null&&(F=S.retryLane),kw(w,F)}function YS(w,S){var F=0;switch(w.tag){case 13:var U=w.stateNode,X=w.memoizedState;X!==null&&(F=X.retryLane);break;case 19:U=w.stateNode;break;default:throw Error(i(314))}U!==null&&U.delete(S),kw(w,F)}var Cw;Cw=function(w,S,F){if(w!==null)if(w.memoizedProps!==S.pendingProps||Er.current)Ls=!0;else{if((w.lanes&F)===0&&(S.flags&128)===0)return Ls=!1,wc(w,S,F);Ls=(w.flags&131072)!==0}else Ls=!1,zn&&(S.flags&1048576)!==0&&Z1(S,eu,S.index);switch(S.lanes=0,S.tag){case 2:var U=S.type;rh(w,S),w=S.pendingProps;var X=Qn(S,ht.current);md(S,F),X=Yf(null,S,U,w,X,F);var ae=H0();return S.flags|=1,typeof X=="object"&&X!==null&&typeof X.render=="function"&&X.$$typeof===void 0?(S.tag=1,S.memoizedState=null,S.updateQueue=null,Ye(U)?(ae=!0,Tt(S)):ae=!1,S.memoizedState=X.state!==null&&X.state!==void 0?X.state:null,jm(S),X.updater=Zf,S.stateNode=X,X._reactInternals=S,Wo(S,U,w,F),S=ka(null,S,U,!0,ae,F)):(S.tag=0,zn&&ae&&zf(S),Js(null,S,X,F),S=S.child),S;case 16:U=S.elementType;e:{switch(rh(w,S),w=S.pendingProps,X=U._init,U=X(U._payload),S.type=U,X=S.tag=JS(U),w=Di(U,w),X){case 0:S=Ho(null,S,U,w,F);break e;case 1:S=fa(null,S,U,w,F);break e;case 11:S=eg(null,S,U,w,F);break e;case 14:S=gu(null,S,U,Di(U.type,w),F);break e}throw Error(i(306,U,""))}return S;case 0:return U=S.type,X=S.pendingProps,X=S.elementType===U?X:Di(U,X),Ho(w,S,U,X,F);case 1:return U=S.type,X=S.pendingProps,X=S.elementType===U?X:Di(U,X),fa(w,S,U,X,F);case 3:e:{if(vc(S),w===null)throw Error(i(387));U=S.pendingProps,ae=S.memoizedState,X=ae.element,ow(w,S),fc(S,U,null,F);var be=S.memoizedState;if(U=be.element,me&&ae.isDehydrated)if(ae={element:U,isDehydrated:!1,cache:be.cache,pendingSuspenseBoundaries:be.pendingSuspenseBoundaries,transitions:be.transitions},S.updateQueue.baseState=ae,S.memoizedState=ae,S.flags&256){X=hu(Error(i(423)),S),S=pu(w,S,U,F,X);break e}else if(U!==X){X=hu(Error(i(424)),S),S=pu(w,S,U,F,X);break e}else for(me&&(za=ve(S.stateNode.containerInfo),ua=S,zn=!0,_o=null,Gf=!1),F=aw(S,null,U,F),S.child=F;F;)F.flags=F.flags&-3|4096,F=F.sibling;else{if(tu(),U===X){S=jl(w,S,F);break e}Js(w,S,U,F)}S=S.child}return S;case 5:return Pm(S),w===null&&Tm(S),U=S.type,X=S.pendingProps,ae=w!==null?w.memoizedProps:null,be=X.children,Q(U,X)?be=null:ae!==null&&Q(U,ae)&&(S.flags|=32),Nn(w,S),Js(w,S,be,F),S.child;case 6:return w===null&&Tm(S),null;case 13:return Km(w,S,F);case 4:return W0(S,S.stateNode.containerInfo),U=S.pendingProps,w===null?S.child=nu(S,null,U,F):Js(w,S,U,F),S.child;case 11:return U=S.type,X=S.pendingProps,X=S.elementType===U?X:Di(U,X),eg(w,S,U,X,F);case 7:return Js(w,S,S.pendingProps,F),S.child;case 8:return Js(w,S,S.pendingProps.children,F),S.child;case 12:return Js(w,S,S.pendingProps.children,F),S.child;case 10:e:{if(U=S.type._context,X=S.pendingProps,ae=S.memoizedProps,be=X.value,iw(S,U,be),ae!==null)if(vo(ae.value,be)){if(ae.children===X.children&&!Er.current){S=jl(w,S,F);break e}}else for(ae=S.child,ae!==null&&(ae.return=S);ae!==null;){var He=ae.dependencies;if(He!==null){be=ae.child;for(var lt=He.firstContext;lt!==null;){if(lt.context===U){if(ae.tag===1){lt=Cl(-1,F&-F),lt.tag=2;var $t=ae.updateQueue;if($t!==null){$t=$t.shared;var or=$t.pending;or===null?lt.next=lt:(lt.next=or.next,or.next=lt),$t.pending=lt}}ae.lanes|=F,lt=ae.alternate,lt!==null&&(lt.lanes|=F),su(ae.return,F,S),He.lanes|=F;break}lt=lt.next}}else if(ae.tag===10)be=ae.type===S.type?null:ae.child;else if(ae.tag===18){if(be=ae.return,be===null)throw Error(i(341));be.lanes|=F,He=be.alternate,He!==null&&(He.lanes|=F),su(be,F,S),be=ae.sibling}else be=ae.child;if(be!==null)be.return=ae;else for(be=ae;be!==null;){if(be===S){be=null;break}if(ae=be.sibling,ae!==null){ae.return=be.return,be=ae;break}be=be.return}ae=be}Js(w,S,X.children,F),S=S.child}return S;case 9:return X=S.type,U=S.pendingProps.children,md(S,F),X=Oi(X),U=U(X),S.flags|=1,Js(w,S,U,F),S.child;case 14:return U=S.type,X=Di(U,S.pendingProps),X=Di(U.type,X),gu(w,S,U,X,F);case 15:return Al(w,S,S.type,S.pendingProps,F);case 17:return U=S.type,X=S.pendingProps,X=S.elementType===U?X:Di(U,X),rh(w,S),S.tag=1,Ye(U)?(w=!0,Tt(S)):w=!1,md(S,F),gw(S,U,X),Wo(S,U,X,F),ka(null,S,U,!0,w,F);case 19:return rg(w,S,F);case 22:return Ln(w,S,F)}throw Error(i(156,S.tag))};function ay(w,S){return Uo(w,S)}function Ew(w,S,F,U){this.tag=w,this.key=F,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=S,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=U,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ui(w,S,F,U){return new Ew(w,S,F,U)}function Md(w){return w=w.prototype,!(!w||!w.isReactComponent)}function JS(w){if(typeof w=="function")return Md(w)?1:0;if(w!=null){if(w=w.$$typeof,w===y)return 11;if(w===_)return 14}return 2}function Nc(w,S){var F=w.alternate;return F===null?(F=Ui(w.tag,S,w.key,w.mode),F.elementType=w.elementType,F.type=w.type,F.stateNode=w.stateNode,F.alternate=w,w.alternate=F):(F.pendingProps=S,F.type=w.type,F.flags=0,F.subtreeFlags=0,F.deletions=null),F.flags=w.flags&14680064,F.childLanes=w.childLanes,F.lanes=w.lanes,F.child=w.child,F.memoizedProps=w.memoizedProps,F.memoizedState=w.memoizedState,F.updateQueue=w.updateQueue,S=w.dependencies,F.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext},F.sibling=w.sibling,F.index=w.index,F.ref=w.ref,F}function mg(w,S,F,U,X,ae){var be=2;if(U=w,typeof w=="function")Md(w)&&(be=1);else if(typeof w=="string")be=5;else e:switch(w){case d:return ha(F.children,X,ae,S);case f:be=8,X|=8;break;case g:return w=Ui(12,F,S,X|2),w.elementType=g,w.lanes=ae,w;case v:return w=Ui(13,F,S,X),w.elementType=v,w.lanes=ae,w;case T:return w=Ui(19,F,S,X),w.elementType=T,w.lanes=ae,w;case E:return Ld(F,X,ae,S);default:if(typeof w=="object"&&w!==null)switch(w.$$typeof){case p:be=10;break e;case x:be=9;break e;case y:be=11;break e;case _:be=14;break e;case b:be=16,U=null;break e}throw Error(i(130,w==null?w:typeof w,""))}return S=Ui(be,F,S,X),S.elementType=w,S.type=U,S.lanes=ae,S}function ha(w,S,F,U){return w=Ui(7,w,U,S),w.lanes=F,w}function Ld(w,S,F,U){return w=Ui(22,w,U,S),w.elementType=E,w.lanes=F,w.stateNode={isHidden:!1},w}function Bd(w,S,F){return w=Ui(6,w,null,S),w.lanes=F,w}function yg(w,S,F){return S=Ui(4,w.children!==null?w.children:[],w.key,S),S.lanes=F,S.stateNode={containerInfo:w.containerInfo,pendingChildren:null,implementation:w.implementation},S}function Nw(w,S,F,U,X){this.tag=S,this.containerInfo=w,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ce,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oc(0),this.expirationTimes=oc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oc(0),this.identifierPrefix=U,this.onRecoverableError=X,me&&(this.mutableSourceEagerHydrationData=null)}function iy(w,S,F,U,X,ae,be,He,lt){return w=new Nw(w,S,F,He,lt),S===1?(S=1,ae===!0&&(S|=8)):S=0,ae=Ui(3,null,null,S),w.current=ae,ae.stateNode=w,ae.memoizedState={element:U,isDehydrated:F,cache:null,transitions:null,pendingSuspenseBoundaries:null},jm(ae),w}function xg(w){if(!w)return xe;w=w._reactInternals;e:{if(O(w)!==w||w.tag!==1)throw Error(i(170));var S=w;do{switch(S.tag){case 3:S=S.stateNode.context;break e;case 1:if(Ye(S.type)){S=S.stateNode.__reactInternalMemoizedMergedChildContext;break e}}S=S.return}while(S!==null);throw Error(i(171))}if(w.tag===1){var F=w.type;if(Ye(F))return Pe(w,F,S)}return S}function ku(w){var S=w._reactInternals;if(S===void 0)throw typeof w.render=="function"?Error(i(188)):(w=Object.keys(w).join(","),Error(i(268,w)));return w=G(S),w===null?null:w.stateNode}function vg(w,S){if(w=w.memoizedState,w!==null&&w.dehydrated!==null){var F=w.retryLane;w.retryLane=F!==0&&F<S?F:S}}function $d(w,S){vg(w,S),(w=w.alternate)&&vg(w,S)}function QS(w){return w=G(w),w===null?null:w.stateNode}function Aw(){return null}return r.attemptContinuousHydration=function(w){if(w.tag===13){var S=So(w,134217728);if(S!==null){var F=Hn();Ea(S,w,134217728,F)}$d(w,134217728)}},r.attemptDiscreteHydration=function(w){if(w.tag===13){var S=So(w,1);if(S!==null){var F=Hn();Ea(S,w,1,F)}$d(w,1)}},r.attemptHydrationAtCurrentPriority=function(w){if(w.tag===13){var S=$s(w),F=So(w,S);if(F!==null){var U=Hn();Ea(F,w,S,U)}$d(w,S)}},r.attemptSynchronousHydration=function(w){switch(w.tag){case 3:var S=w.stateNode;if(S.current.memoizedState.isDehydrated){var F=ur(S.pendingLanes);F!==0&&($o(S,F|1),Na(S,Xs()),(zr&6)===0&&(Tn(),ca()))}break;case 13:Zm(function(){var U=So(w,1);if(U!==null){var X=Hn();Ea(U,w,1,X)}}),$d(w,1)}},r.batchedUpdates=function(w,S){var F=zr;zr|=1;try{return w(S)}finally{zr=F,zr===0&&(Tn(),hd&&ca())}},r.createComponentSelector=function(w){return{$$typeof:Pl,value:w}},r.createContainer=function(w,S,F,U,X,ae,be){return iy(w,S,!1,null,F,U,X,ae,be)},r.createHasPseudoClassSelector=function(w){return{$$typeof:qa,value:w}},r.createHydrationContainer=function(w,S,F,U,X,ae,be,He,lt){return w=iy(F,U,!0,w,X,ae,be,He,lt),w.context=xg(null),F=w.current,U=Hn(),X=$s(F),ae=Cl(U,X),ae.callback=S??null,El(F,ae,X),w.current.lanes=X,Qi(w,X,U),Na(w,U),w},r.createPortal=function(w,S,F){var U=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:U==null?null:""+U,children:w,containerInfo:S,implementation:F}},r.createRoleSelector=function(w){return{$$typeof:Vo,value:w}},r.createTestNameSelector=function(w){return{$$typeof:Nd,value:w}},r.createTextSelector=function(w){return{$$typeof:ih,value:w}},r.deferredUpdates=function(w){var S=en,F=cs.transition;try{return cs.transition=null,en=16,w()}finally{en=S,cs.transition=F}},r.discreteUpdates=function(w,S,F,U,X){var ae=en,be=cs.transition;try{return cs.transition=null,en=1,w(S,F,U,X)}finally{en=ae,cs.transition=be,zr===0&&Tn()}},r.findAllNodes=Xo,r.findBoundingRects=function(w,S){if(!Me)throw Error(i(363));S=Xo(w,S),w=[];for(var F=0;F<S.length;F++)w.push(Ke(S[F]));for(S=w.length-1;0<S;S--){F=w[S];for(var U=F.x,X=U+F.width,ae=F.y,be=ae+F.height,He=S-1;0<=He;He--)if(S!==He){var lt=w[He],$t=lt.x,or=$t+lt.width,Lr=lt.y,tr=Lr+lt.height;if(U>=$t&&ae>=Lr&&X<=or&&be<=tr){w.splice(S,1);break}else if(U!==$t||F.width!==lt.width||tr<ae||Lr>be){if(!(ae!==Lr||F.height!==lt.height||or<U||$t>X)){$t>U&&(lt.width+=$t-U,lt.x=U),or<X&&(lt.width=X-$t),w.splice(S,1);break}}else{Lr>ae&&(lt.height+=Lr-ae,lt.y=ae),tr<be&&(lt.height=be-Lr),w.splice(S,1);break}}}return w},r.findHostInstance=ku,r.findHostInstanceWithNoPortals=function(w){return w=M(w),w=w!==null?re(w):null,w===null?null:w.stateNode},r.findHostInstanceWithWarning=function(w){return ku(w)},r.flushControlled=function(w){var S=zr;zr|=1;var F=cs.transition,U=en;try{cs.transition=null,en=1,w()}finally{en=U,cs.transition=F,zr=S,zr===0&&(Tn(),ca())}},r.flushPassiveEffects=Rl,r.flushSync=Zm,r.focusWithin=function(w,S){if(!Me)throw Error(i(363));for(w=qo(w),S=Ko(w,S),S=Array.from(S),w=0;w<S.length;){var F=S[w++];if(!ut(F)){if(F.tag===5&&Dt(F.stateNode))return!0;for(F=F.child;F!==null;)S.push(F),F=F.sibling}}return!1},r.getCurrentUpdatePriority=function(){return en},r.getFindAllNodesFailureDescription=function(w,S){if(!Me)throw Error(i(363));var F=0,U=[];w=[qo(w),0];for(var X=0;X<w.length;){var ae=w[X++],be=w[X++],He=S[be];if((ae.tag!==5||!ut(ae))&&(oh(ae,He)&&(U.push(cg(He)),be++,be>F&&(F=be)),be<S.length))for(ae=ae.child;ae!==null;)w.push(ae,be),ae=ae.sibling}if(F<S.length){for(w=[];F<S.length;F++)w.push(cg(S[F]));return`findAllNodes was able to match part of the selector:
  `+(U.join(" > ")+`

No matching component was found for:
  `)+w.join(" > ")}return null},r.getPublicRootInstance=function(w){if(w=w.current,!w.child)return null;switch(w.child.tag){case 5:return ee(w.child.stateNode);default:return w.child.stateNode}},r.injectIntoDevTools=function(w){if(w={bundleType:w.bundleType,version:w.version,rendererPackageName:w.rendererPackageName,rendererConfig:w.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:QS,findFiberByHostInstance:w.findFiberByHostInstance||Aw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")w=!1;else{var S=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(S.isDisabled||!S.supportsFiber)w=!0;else{try{cc=S.inject(w),ci=S}catch{}w=!!S.checkDCE}}return w},r.isAlreadyRendering=function(){return!1},r.observeVisibleRects=function(w,S,F,U){if(!Me)throw Error(i(363));w=Xo(w,S);var X=Qe(w,F,U).disconnect;return{disconnect:function(){X()}}},r.registerMutableSourceForHydration=function(w,S){var F=S._getVersion;F=F(S._source),w.mutableSourceEagerHydrationData==null?w.mutableSourceEagerHydrationData=[S,F]:w.mutableSourceEagerHydrationData.push(S,F)},r.runWithPriority=function(w,S){var F=en;try{return en=w,S()}finally{en=F}},r.shouldError=function(){return null},r.shouldSuspend=function(){return!1},r.updateContainer=function(w,S,F,U){var X=S.current,ae=Hn(),be=$s(X);return F=xg(F),S.context===null?S.context=F:S.pendingContext=F,S=Cl(ae,be),S.payload={element:w},U=U===void 0?null:U,U!==null&&(S.callback=U),w=El(X,S,be),w!==null&&(Ea(w,X,be,ae),qf(w,X,be)),be},r}),Zk}var aR;function sae(){return aR||(aR=1,Qk.exports=nae()),Qk.exports}var aae=sae();const iae=kn(aae);var eT={exports:{}},Xd={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iR;function oae(){return iR||(iR=1,Xd.ConcurrentRoot=1,Xd.ContinuousEventPriority=4,Xd.DefaultEventPriority=16,Xd.DiscreteEventPriority=1,Xd.IdleEventPriority=536870912,Xd.LegacyRoot=0),Xd}var oR;function lae(){return oR||(oR=1,eT.exports=oae()),eT.exports}var xH=lae(),cae=Zr();const lR={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let cR=!1,uR=!1;const o5=".react-konva-event";let vH=!1;function uae(e){vH=e}const dae=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,fae=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,hae={};function B2(e,t,r=hae){if(!cR&&"zIndex"in t&&(console.warn(fae),cR=!0),!uR&&t.draggable){var n=t.x!==void 0||t.y!==void 0,s=t.onDragEnd||t.onDragMove;n&&!s&&(console.warn(dae),uR=!0)}for(var a in r)if(!lR[a]){var i=a.slice(0,2)==="on",o=r[a]!==t[a];if(i&&o){var l=a.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),e.off(l,r[a])}var u=!t.hasOwnProperty(a);u&&e.setAttr(a,void 0)}var d=vH||t._useStrictMode,f={},g=!1;const p={};for(var a in t)if(!lR[a]){var i=a.slice(0,2)==="on",x=r[a]!==t[a];if(i&&x){var l=a.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),t[a]&&(p[l]=t[a])}!i&&(t[a]!==r[a]||d&&t[a]!==e.getAttr(a))&&(g=!0,f[a]=t[a])}g&&(e.setAttrs(f),Nf(e));for(var l in p)e.on(l+o5,p[l])}function Nf(e){if(!cae.Konva.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}var tT=vj();const wH={},gae={};av.Node.prototype._applyProps=B2;function pae(e,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}e.add(t),Nf(e)}function mae(e,t,r){let n=av[e];n||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),n=av.Group);const s={},a={};for(var i in t){var o=i.slice(0,2)==="on";o?a[i]=t[i]:s[i]=t[i]}const l=new n(s);return B2(l,a),l}function yae(e,t,r){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)}function xae(e,t,r){return!1}function vae(e){return e}function wae(){return null}function bae(){return null}function _ae(e,t,r,n){return gae}function Sae(){}function kae(e){}function Tae(e,t){return!1}function Cae(){return wH}function Eae(){return wH}const Nae=setTimeout,Aae=clearTimeout,jae=-1;function Pae(e,t){return!1}const Oae=!1,Fae=!0,Rae=!0;function Dae(e,t){t.parent===e?t.moveToTop():e.add(t),Nf(e)}function Iae(e,t){t.parent===e?t.moveToTop():e.add(t),Nf(e)}function bH(e,t,r){t._remove(),e.add(t),t.setZIndex(r.getZIndex()),Nf(e)}function Mae(e,t,r){bH(e,t,r)}function Lae(e,t){t.destroy(),t.off(o5),Nf(e)}function Bae(e,t){t.destroy(),t.off(o5),Nf(e)}function $ae(e,t,r){console.error(`Text components are not yet supported in ReactKonva. You text is: "${r}"`)}function Uae(e,t,r){}function Wae(e,t,r,n,s){B2(e,s,n)}function zae(e){e.hide(),Nf(e)}function Hae(e){}function Gae(e,t){(t.visible==null||t.visible)&&e.show()}function Vae(e,t){}function qae(e){}function Kae(){}const Xae=()=>xH.DefaultEventPriority,Yae=Object.freeze(Object.defineProperty({__proto__:null,appendChild:Dae,appendChildToContainer:Iae,appendInitialChild:pae,cancelTimeout:Aae,clearContainer:qae,commitMount:Uae,commitTextUpdate:$ae,commitUpdate:Wae,createInstance:mae,createTextInstance:yae,detachDeletedInstance:Kae,finalizeInitialChildren:xae,getChildHostContext:Eae,getCurrentEventPriority:Xae,getPublicInstance:vae,getRootHostContext:Cae,hideInstance:zae,hideTextInstance:Hae,idlePriority:tT.unstable_IdlePriority,insertBefore:bH,insertInContainerBefore:Mae,isPrimaryRenderer:Oae,noTimeout:jae,now:tT.unstable_now,prepareForCommit:wae,preparePortalMount:bae,prepareUpdate:_ae,removeChild:Lae,removeChildFromContainer:Bae,resetAfterCommit:Sae,resetTextContent:kae,run:tT.unstable_runWithPriority,scheduleTimeout:Nae,shouldDeprioritizeSubtree:Tae,shouldSetTextContent:Pae,supportsMutation:Rae,unhideInstance:Gae,unhideTextInstance:Vae,warnsIfNotActing:Fae},Symbol.toStringTag,{value:"Module"}));var Jae=Object.defineProperty,Qae=Object.defineProperties,Zae=Object.getOwnPropertyDescriptors,dR=Object.getOwnPropertySymbols,eie=Object.prototype.hasOwnProperty,tie=Object.prototype.propertyIsEnumerable,fR=(e,t,r)=>t in e?Jae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hR=(e,t)=>{for(var r in t||(t={}))eie.call(t,r)&&fR(e,r,t[r]);if(dR)for(var r of dR(t))tie.call(t,r)&&fR(e,r,t[r]);return e},rie=(e,t)=>Qae(e,Zae(t)),gR,pR;typeof window<"u"&&((gR=window.document)!=null&&gR.createElement||((pR=window.navigator)==null?void 0:pR.product)==="ReactNative")?C.useLayoutEffect:C.useEffect;function _H(e,t,r){if(!e)return;if(r(e)===!0)return e;let n=e.child;for(;n;){const s=_H(n,t,r);if(s)return s;n=n.sibling}}function SH(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const mR=console.error;console.error=function(){const e=[...arguments].join("");if(e?.startsWith("Warning:")&&e.includes("useContext")){console.error=mR;return}return mR.apply(this,arguments)};const l5=SH(C.createContext(null));class kH extends C.Component{render(){return C.createElement(l5.Provider,{value:this._reactInternals},this.props.children)}}function nie(){const e=C.useContext(l5);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=C.useId();return C.useMemo(()=>{for(const n of[e,e?.alternate]){if(!n)continue;const s=_H(n,!1,a=>{let i=a.memoizedState;for(;i;){if(i.memoizedState===t)return!0;i=i.next}});if(s)return s}},[e,t])}function sie(){const e=nie(),[t]=C.useState(()=>new Map);t.clear();let r=e;for(;r;){if(r.type&&typeof r.type=="object"){const s=r.type._context===void 0&&r.type.Provider===r.type?r.type:r.type._context;s&&s!==l5&&!t.has(s)&&t.set(s,C.useContext(SH(s)))}r=r.return}return t}function TH(){const e=sie();return C.useMemo(()=>Array.from(e.keys()).reduce((t,r)=>n=>C.createElement(t,null,C.createElement(r.Provider,rie(hR({},n),{value:e.get(r)}))),t=>C.createElement(kH,hR({},t))),[e])}function aie(e){const t=Be.useRef({});return Be.useLayoutEffect(()=>{t.current=e}),Be.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const iie=e=>{const t=Be.useRef(null),r=Be.useRef(null),n=Be.useRef(null),s=aie(e),a=TH(),i=o=>{const{forwardedRef:l}=e;l&&(typeof l=="function"?l(o):l.current=o)};return Be.useLayoutEffect(()=>(r.current=new av.Stage({width:e.width,height:e.height,container:t.current}),i(r.current),n.current=qg.createContainer(r.current,xH.LegacyRoot,!1,null),qg.updateContainer(Be.createElement(a,{},e.children),n.current),()=>{av.isBrowser&&(i(null),qg.updateContainer(null,n.current,null),r.current.destroy())}),[]),Be.useLayoutEffect(()=>{i(r.current),B2(r.current,e,s),qg.updateContainer(Be.createElement(a,{},e.children),n.current,null)}),Be.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},Vh="Layer",oie="FastLayer",Kl="Group",lie="Label",Ma="Rect",uf="Circle",cie="Ellipse",uie="Wedge",ti="Line",die="Sprite",CH="Image",Mc="Text",fie="TextPath",hie="Star",gie="Ring",pie="Arc",mie="Tag",yie="Path",xie="RegularPolygon",oA="Arrow",vie="Shape",EH="Transformer",wie="18.2.13",qg=iae(Yae);qg.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Be.version,rendererPackageName:"react-konva"});const qh=Be.forwardRef((e,t)=>Be.createElement(kH,{},Be.createElement(iie,{...e,forwardedRef:t}))),bie=uae,_ie=Object.freeze(Object.defineProperty({__proto__:null,Arc:pie,Arrow:oA,Circle:uf,Ellipse:cie,FastLayer:oie,Group:Kl,Image:CH,KonvaRenderer:qg,Label:lie,Layer:Vh,Line:ti,Path:yie,Rect:Ma,RegularPolygon:xie,Ring:gie,Shape:vie,Sprite:die,Stage:qh,Star:hie,Tag:mie,Text:Mc,TextPath:fie,Transformer:EH,Wedge:uie,useContextBridge:TH,useStrictMode:bie,version:wie},Symbol.toStringTag,{value:"Module"})),Et=({children:e,hover:t=!0,className:r="",paddingClass:n="p-6",...s})=>{const a=`
    bg-white rounded-xl shadow-md border border-gray-200 ${n}
    ${t?"hover:shadow-lg hover:-translate-y-1 transition-all duration-200":""}
    ${r}
  `;return c.jsx(rt.div,{className:a,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},...s,children:e})},Sie=({children:e,className:t=""})=>c.jsx("div",{className:`border-b border-gray-200 pb-4 mb-4 ${t}`,children:e}),kie=({children:e,className:t=""})=>c.jsx("h3",{className:`text-xl font-semibold text-gray-800 ${t}`,children:e}),Tie=({children:e,className:t=""})=>c.jsx("div",{className:`py-4 ${t}`,children:e}),Cie=({children:e,className:t=""})=>c.jsx("div",{className:`border-t border-gray-200 pt-4 mt-4 ${t}`,children:e});Et.Header=Sie;Et.Title=kie;Et.Body=Tie;Et.Footer=Cie;const Eie=e=>{const[t,r]=C.useState({width:800,height:600}),n=C.useRef(null),s=C.useCallback(()=>{if(e.current){e.current.getBoundingClientRect();const a=Math.min(1200,window.innerWidth*.8),i=Math.min(800,window.innerHeight*.6),o=4/3;let l=a,u=l/o;u>i&&(u=i,l=u*o),r({width:l,height:u})}},[e]);return C.useEffect(()=>(s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)),[s]),{canvasSize:t,stageRef:n,updateCanvasSize:s}},lA={convertToOriginal:(e,t,r)=>r?{x:Number(((e-r.x)/r.scale).toFixed(4)),y:Number(((t-r.y)/r.scale).toFixed(4))}:{x:e,y:t},convertToCanvas:(e,t,r)=>r?{x:Number((r.x+e*r.scale).toFixed(4)),y:Number((r.y+t*r.scale).toFixed(4))}:{x:e,y:t},isPointInImage:(e,t)=>t?e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height:!1,calculateImageScale:(e,t)=>{if(!e||!t)return 1;const r=40,n=t.width-r,s=t.height-r;return Math.min(n/e.width,s/e.height)},calculateImageInfo:(e,t)=>{if(!e||!t)return null;const r=40,n=t.width-r,s=t.height-r,a=Math.min(n/e.width,s/e.height),i=e.width*a,o=e.height*a,l=(t.width-i)/2,u=(t.height-o)/2;return{x:l,y:u,width:i,height:o,scale:a,originalWidth:e.width,originalHeight:e.height}}},Nie=(e,t)=>{const[r,n]=C.useState(null),s=C.useCallback((a,i)=>lA.calculateImageInfo(a,i),[]);return C.useEffect(()=>{if(e&&t){const a=s(e,t);n(a)}},[e,t,s]),r},Aie=e=>{const t=C.useCallback((n,s)=>lA.convertToOriginal(n,s,e),[e]),r=C.useCallback((n,s)=>lA.convertToCanvas(n,s,e),[e]);return{convertToOriginal:t,convertToCanvas:r}},rx={create:(e,t,r,n,s)=>({id:s,x:e-r/2,y:t-n/2,width:Math.max(r,30),height:Math.max(n,10),fill:"rgba(0, 123, 255, 0.15)",stroke:"#007bff",strokeWidth:2,cornerRadius:6,shadowColor:"rgba(0, 123, 255, 0.3)",shadowBlur:10,shadowOffset:{x:0,y:2},shadowOpacity:.5}),validate:e=>e.width>0&&e.height>0,findAtPosition:(e,t,r)=>e.find(n=>t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height),generateId:()=>`block_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},Dg={create:(e,t,r,n,s,a,i)=>({id:i,startX:e,startY:t,endX:r,endY:n,startBlock:s,endBlock:a,stroke:"#dc3545",fill:"#dc3545",strokeWidth:3,pointerLength:10,pointerWidth:10}),snapToNearestBlock:(e,t,r,n=60)=>{let s=null,a=1/0;for(const i of r){const o=i.x+i.width/2,l=i.y+i.height/2,u=Math.sqrt(Math.pow(e-o,2)+Math.pow(t-l,2));u<=n&&u<a&&(a=u,s=i)}return s?{x:s.x+s.width/2,y:s.y+s.height/2,blockId:s.id,block:s,distance:a}:null},validate:(e,t,r,n,s)=>Dg.snapToNearestBlock(e,t,s)!==null,generateId:()=>`arrow_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},rT={create:(e,t,r)=>({id:r,blockId:e,word:t}),update:(e,t,r)=>e.map(n=>n.blockId===t?{...n,word:r}:n),delete:(e,t)=>e.filter(r=>r.blockId!==t),generateId:e=>`word_${e}`,validate:e=>e&&e.trim().length>0},jie={testData:{blocks:[],words:[],arrows:[],imageUrl:null},canvas:{size:{width:800,height:600},image:null,imageInfo:null,selectedTool:"edit"},creation:{isCreatingBlock:!1,isDrawingArrow:!1,blockCreationStart:null,arrowStart:null,previewBlock:null,previewArrow:null},ui:{selectedBlock:null,showWordPanel:!1,isLoading:!1,error:null}},Pie=(e,t)=>{switch(t.type){case"SET_CANVAS_SIZE":return{...e,canvas:{...e.canvas,size:t.payload}};case"SET_IMAGE":return{...e,canvas:{...e.canvas,image:t.payload}};case"SET_IMAGE_INFO":return{...e,canvas:{...e.canvas,imageInfo:t.payload}};case"SET_SELECTED_TOOL":return{...e,canvas:{...e.canvas,selectedTool:t.payload}};case"ADD_BLOCK":return{...e,testData:{...e.testData,blocks:[...e.testData.blocks,t.payload]}};case"ADD_WORD":return{...e,testData:{...e.testData,words:[...e.testData.words,t.payload]}};case"ADD_ARROW":return{...e,testData:{...e.testData,arrows:[...e.testData.arrows,t.payload]}};case"UPDATE_BLOCK":return{...e,testData:{...e.testData,blocks:e.testData.blocks.map(r=>r.id===t.payload.id?{...r,...t.payload.updates}:r)}};case"DELETE_BLOCK":return{...e,testData:{...e.testData,blocks:e.testData.blocks.filter(r=>r.id!==t.payload),words:e.testData.words.filter(r=>r.blockId!==t.payload),arrows:e.testData.arrows.filter(r=>r.startBlock!==t.payload&&r.endBlock!==t.payload)}};case"UPDATE_WORDS":return{...e,testData:{...e.testData,words:t.payload}};case"SET_CREATION_STATE":return{...e,creation:{...e.creation,...t.payload}};case"SET_UI_STATE":return{...e,ui:{...e.ui,...t.payload}};case"SET_LOADING":return{...e,ui:{...e.ui,isLoading:t.payload}};case"SET_ERROR":return{...e,ui:{...e.ui,error:t.payload}};case"RESET_TESTDATA":return{...e,testData:{blocks:[],words:[],arrows:[],imageUrl:e.testData.imageUrl}};default:return e}},Oie=({testName:e="",showQuestionCount:t=!0,onTestSaved:r,onCancel:n,onBackToCabinet:s,isSaving:a=!1,validationErrors:i={}})=>{const[o,l]=C.useReducer(Pie,jie),{showNotification:u}=Ba(),{makeAuthenticatedRequest:d}=Bo(),{user:f}=ls(),g=C.useRef(null),p=C.useRef(null),x=C.useRef(null),y=C.useRef({}),v=C.useRef({}),{canvasSize:T,stageRef:_}=Eie(g),b=Nie(o.canvas.image,T),{convertToOriginal:E}=Aie(b);C.useEffect(()=>{l({type:"SET_CANVAS_SIZE",payload:T})},[T]),C.useEffect(()=>{b&&l({type:"SET_IMAGE_INFO",payload:b})},[b]),C.useEffect(()=>{const Y=x.current;if(!Y)return;const ee=o.ui.selectedBlock?.id?y.current[o.ui.selectedBlock.id]:null;ee?(Y.nodes([ee]),Y.getLayer()?.batchDraw()):(Y.nodes([]),Y.getLayer()?.batchDraw())},[o.ui.selectedBlock]);const k=C.useCallback(()=>{l({type:"SET_UI_STATE",payload:{selectedBlock:null}}),l({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!1,isDrawingArrow:!1,blockCreationStart:null,arrowStart:null,previewBlock:null,previewArrow:null}}),l({type:"RESET_TESTDATA"}),l({type:"SET_ERROR",payload:null})},[]),A=C.useCallback(Y=>{const ee=Y.target.files[0];if(!ee||!ee.type.startsWith("image/")){u("Please select a valid image file","error");return}const B=new FileReader;B.onload=z=>{const I=z.target.result,W=new Image;W.crossOrigin="anonymous",W.onload=()=>{l({type:"SET_IMAGE",payload:W}),l({type:"SET_UI_STATE",payload:{imageUrl:I}})},W.src=I},B.readAsDataURL(ee)},[u]),P=C.useCallback(Y=>{const ee=_.current;if(!ee)return;const B=ee.getPointerPosition();if(B){if(o.canvas.selectedTool==="create"){const z=rx.findAtPosition(o.testData.blocks,B.x,B.y);if(z){l({type:"SET_UI_STATE",payload:{selectedBlock:z}});return}l({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!0,blockCreationStart:{x:B.x,y:B.y}}})}else if(o.canvas.selectedTool==="edit"){const z=rx.findAtPosition(o.testData.blocks,B.x,B.y);l(z?{type:"SET_UI_STATE",payload:{selectedBlock:z}}:{type:"SET_UI_STATE",payload:{selectedBlock:null}})}else if(o.canvas.selectedTool==="arrow"){const z=Y.target===ee,I=rx.findAtPosition(o.testData.blocks,B.x,B.y);(z||!I)&&l({type:"SET_CREATION_STATE",payload:{isDrawingArrow:!0,arrowStart:{x:B.x,y:B.y}}})}}},[o.canvas.selectedTool,b,o.testData.blocks]),j=C.useCallback(Y=>{if(o.creation.isCreatingBlock&&o.creation.blockCreationStart){const ee=_.current;if(!ee)return;const B=ee.getPointerPosition();if(!B)return;const z=Math.abs(B.x-o.creation.blockCreationStart.x),I=Math.abs(B.y-o.creation.blockCreationStart.y),W=10,V=Math.max(z,W),L=Math.max(I,W);l({type:"SET_CREATION_STATE",payload:{previewBlock:{x:Math.min(B.x,o.creation.blockCreationStart.x),y:Math.min(B.y,o.creation.blockCreationStart.y),width:V,height:L,fill:"rgba(0, 123, 255, 0.3)",stroke:"#007bff",strokeWidth:2,dash:[5,5],opacity:.7}}})}else if(o.creation.isDrawingArrow&&o.creation.arrowStart){const ee=_.current;if(!ee)return;const B=ee.getPointerPosition();if(!B)return;l({type:"SET_CREATION_STATE",payload:{previewArrow:{startX:o.creation.arrowStart.x,startY:o.creation.arrowStart.y,endX:B.x,endY:B.y,stroke:"#dc3545",fill:"#dc3545",strokeWidth:3,dash:[5,5],opacity:.7}}})}},[o.creation]),O=C.useCallback(Y=>{if(o.creation.isCreatingBlock&&o.creation.blockCreationStart){const ee=_.current;if(!ee)return;const B=ee.getPointerPosition();if(!B)return;const z=Math.abs(B.x-o.creation.blockCreationStart.x),I=Math.abs(B.y-o.creation.blockCreationStart.y),W=10,V=Math.max(z,W),L=Math.max(I,W),H=Math.min(B.x,o.creation.blockCreationStart.x)+V/2,J=Math.min(B.y,o.creation.blockCreationStart.y)+L/2,Q=rx.generateId(),ne=rx.create(H,J,V,L,Q),Z=rT.create(Q,`Word ${o.testData.blocks.length+1}`,rT.generateId(Q));l({type:"ADD_BLOCK",payload:ne}),l({type:"ADD_WORD",payload:Z}),l({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!1,blockCreationStart:null,previewBlock:null}}),o.testData.blocks.length===0&&l({type:"SET_UI_STATE",payload:{showWordPanel:!0}})}else if(o.creation.isDrawingArrow&&o.creation.arrowStart){const ee=_.current;if(!ee)return;const B=ee.getPointerPosition();if(!B)return;if(Dg.validate(o.creation.arrowStart.x,o.creation.arrowStart.y,B.x,B.y,o.testData.blocks)){const z=Dg.snapToNearestBlock(o.creation.arrowStart.x,o.creation.arrowStart.y,o.testData.blocks),I=Dg.snapToNearestBlock(B.x,B.y,o.testData.blocks),W=z?z.x:o.creation.arrowStart.x,V=z?z.y:o.creation.arrowStart.y,L=I?I.x:B.x,H=I?I.y:B.y,J=Dg.generateId(),Q=Dg.create(W,V,L,H,z?z.blockId:null,I?I.blockId:null,J);l({type:"ADD_ARROW",payload:Q}),u("Arrow created successfully!","success")}else u("Arrow must start near a block!","error");l({type:"SET_CREATION_STATE",payload:{isDrawingArrow:!1,arrowStart:null,previewArrow:null}})}},[o.creation,o.testData.blocks,u]),R=C.useCallback(async()=>{console.log(" [MatchingTestCreator] handleSaveTest clicked");const Y=M();if(Object.keys(Y).length>0){console.warn(" [MatchingTestCreator] Validation errors:",Y),u("Please fix validation errors before saving","error");return}try{console.log(" [MatchingTestCreator] Preparing data to save...",{blocks:o.testData.blocks.length,words:o.testData.words.length,arrows:o.testData.arrows.length,imageUrl:o.ui.imageUrl?"present":"missing"}),l({type:"SET_LOADING",payload:!0});let ee=o.ui.imageUrl;if(o.ui.imageUrl&&o.ui.imageUrl.startsWith("data:")){const z=await d("/.netlify/functions/upload-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataUrl:o.ui.imageUrl,folder:"matching_tests"})}),I=await z.json();if(z.ok&&I.success&&I.url)ee=I.url;else throw new Error(I.message||"Upload failed")}const B=o.testData.blocks.map((z,I)=>{let W;if(b){const H=E(z.x,z.y),J=E(z.x+z.width,z.y+z.height);W={x:H.x,y:H.y,width:Number((J.x-H.x).toFixed(4)),height:Number((J.y-H.y).toFixed(4))}}else W={x:Number(z.x.toFixed(4)),y:Number(z.y.toFixed(4)),width:Number(z.width.toFixed(4)),height:Number(z.height.toFixed(4))};const V=o.testData.words.find(H=>H.blockId===z.id),L=o.testData.arrows.find(H=>H.startBlock===z.id);return{question_id:I+1,word:V?.word||`Word ${I+1}`,block_coordinates:W,has_arrow:!!L,arrow:L&&b?(()=>{const H=E(L.startX,L.startY),J=E(L.endX,L.endY),Q=H.x/b.originalWidth*100,ne=H.y/b.originalHeight*100,Z=J.x/b.originalWidth*100,se=J.y/b.originalHeight*100;return{start_x:Number(H.x.toFixed(4)),start_y:Number(H.y.toFixed(4)),end_x:Number(J.x.toFixed(4)),end_y:Number(J.y.toFixed(4)),rel_start_x:Number(Q.toFixed(4)),rel_start_y:Number(ne.toFixed(4)),rel_end_x:Number(Z.toFixed(4)),rel_end_y:Number(se.toFixed(4)),image_width:b.originalWidth,image_height:b.originalHeight,style:L.style||{color:"#dc3545",thickness:3}}})():null}});r&&(console.log(" [MatchingTestCreator] Calling onTestSaved with processed data"),r({success:!0,message:"Test data prepared for assignment",blocks:o.testData.blocks,words:o.testData.words,arrows:o.testData.arrows,imageUrl:ee,processedQuestions:B}))}catch(ee){console.error("Save error:",ee),u(`Error saving test: ${ee.message}`,"error")}finally{l({type:"SET_LOADING",payload:!1})}},[o.testData,o.ui.imageUrl,b,E,d,r,u,e,f]),M=C.useCallback(()=>{const Y={};return e.trim()||(Y.testName="Test name is required"),o.testData.blocks.length===0&&(Y.blocks="At least one block is required"),Y},[e,o.testData.blocks.length]),G=()=>c.jsxs("div",{className:"flex flex-wrap gap-2 p-4 bg-gray-50 border-b",children:[c.jsx(nt,{onClick:()=>l({type:"SET_SELECTED_TOOL",payload:"create"}),variant:o.canvas.selectedTool==="create"?"primary":"secondary",size:"sm",children:" Create Blocks"}),c.jsx(nt,{onClick:()=>l({type:"SET_SELECTED_TOOL",payload:"edit"}),variant:o.canvas.selectedTool==="edit"?"primary":"secondary",size:"sm",children:" Edit Blocks"}),c.jsx(nt,{onClick:()=>l({type:"SET_SELECTED_TOOL",payload:"arrow"}),variant:o.canvas.selectedTool==="arrow"?"primary":"secondary",size:"sm",children:" Draw Arrows"}),c.jsx(nt,{onClick:k,variant:"secondary",size:"sm",children:" Reset"}),c.jsx(nt,{onClick:()=>p.current?.click(),variant:"secondary",size:"sm",children:" Upload Image"})]}),K=()=>c.jsx(qh,{width:T.width,height:T.height,ref:_,onMouseDown:P,onMouseMove:j,onMouseUp:O,className:o.canvas.selectedTool==="arrow"||o.canvas.selectedTool==="create"?"cursor-crosshair":"cursor-default",children:c.jsxs(Vh,{children:[o.canvas.image&&b&&c.jsx(CH,{image:o.canvas.image,x:b.x,y:b.y,width:b.width,height:b.height}),o.testData.blocks.map(Y=>c.jsxs(Kl,{ref:ee=>{ee&&(v.current[Y.id]=ee)},draggable:o.canvas.selectedTool==="edit",x:Y.x,y:Y.y,onMouseEnter:ee=>{const B=ee.target.getStage()?.container();B&&(B.style.cursor=o.ui.selectedBlock?.id===Y.id?"nwse-resize":"move")},onMouseLeave:ee=>{const B=ee.target.getStage()?.container();B&&(B.style.cursor=o.canvas.selectedTool==="arrow"?"crosshair":"default")},onDragStart:()=>{l({type:"SET_UI_STATE",payload:{selectedBlock:Y}})},onDragEnd:ee=>{const{x:B,y:z}=ee.target.position();l({type:"UPDATE_BLOCK",payload:{id:Y.id,updates:{x:B,y:z}}})},onClick:()=>{l({type:"SET_UI_STATE",payload:{selectedBlock:Y}})},onTap:()=>{l({type:"SET_UI_STATE",payload:{selectedBlock:Y}})},children:[c.jsx(Ma,{ref:ee=>{ee&&(y.current[Y.id]=ee)},width:Y.width,height:Y.height,fill:Y.fill,stroke:Y.stroke,strokeWidth:Y.strokeWidth,cornerRadius:Y.cornerRadius,shadowColor:Y.shadowColor,shadowBlur:Y.shadowBlur,shadowOffset:Y.shadowOffset,shadowOpacity:Y.shadowOpacity,draggable:o.canvas.selectedTool==="edit",onDragEnd:ee=>{const{x:B,y:z}=ee.target.getParent().position();l({type:"UPDATE_BLOCK",payload:{id:Y.id,updates:{x:B,y:z}}})},onMouseEnter:ee=>{const B=ee.target.getStage()?.container();B&&(B.style.cursor=o.ui.selectedBlock?.id===Y.id?"nwse-resize":"move")},onMouseLeave:ee=>{const B=ee.target.getStage()?.container();B&&(B.style.cursor=o.canvas.selectedTool==="arrow"?"crosshair":"default")},onTransformEnd:ee=>{const B=y.current[Y.id];if(!B)return;const z=Math.max(10,B.width()*B.scaleX()),I=Math.max(10,B.height()*B.scaleY());B.scaleX(1),B.scaleY(1),l({type:"UPDATE_BLOCK",payload:{id:Y.id,updates:{width:z,height:I}}})}}),c.jsx(Mc,{x:2,y:2,text:`${o.testData.blocks.indexOf(Y)+1}`,fontSize:Math.min(12,Math.max(8,Y.width/4)),fontFamily:"Arial",fill:"#333",fontStyle:"bold",listening:!1})]},Y.id)),c.jsx(EH,{ref:x,rotateEnabled:!1,flipEnabled:!1,boundBoxFunc:(Y,ee)=>({...ee,width:Math.max(ee.width,10),height:Math.max(ee.height,10)})}),o.testData.arrows.map(Y=>c.jsx(oA,{points:[Y.startX,Y.startY,Y.endX,Y.endY],stroke:Y.stroke,fill:Y.fill,strokeWidth:Y.strokeWidth,pointerLength:Y.pointerLength,pointerWidth:Y.pointerWidth},Y.id)),o.creation.previewBlock&&c.jsx(Ma,{x:o.creation.previewBlock.x,y:o.creation.previewBlock.y,width:o.creation.previewBlock.width,height:o.creation.previewBlock.height,fill:o.creation.previewBlock.fill,stroke:o.creation.previewBlock.stroke,strokeWidth:o.creation.previewBlock.strokeWidth,dash:o.creation.previewBlock.dash,opacity:o.creation.previewBlock.opacity}),o.creation.previewArrow&&c.jsx(oA,{points:[o.creation.previewArrow.startX,o.creation.previewArrow.startY,o.creation.previewArrow.endX,o.creation.previewArrow.endY],stroke:o.creation.previewArrow.stroke,fill:o.creation.previewArrow.fill,strokeWidth:o.creation.previewArrow.strokeWidth,dash:o.creation.previewArrow.dash,opacity:o.creation.previewArrow.opacity})]})}),re=C.useMemo(()=>o.testData.blocks.length===0?null:c.jsxs("div",{className:"word-panel bg-gray-50 border-t border-gray-200 p-4 w-full",style:{height:"min(400px, 40vh)",overflowY:"auto"},children:[c.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Words (Auto-created with blocks)"}),c.jsx("div",{className:"space-y-2",children:o.testData.words.map(Y=>{const ee=o.testData.blocks.find(B=>B.id===Y.blockId);return c.jsxs("div",{className:"p-2 bg-white rounded border",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsxs("span",{className:"text-xs text-gray-500",children:["Block ",o.testData.blocks.indexOf(ee)+1]}),c.jsx("button",{onClick:()=>l({type:"DELETE_BLOCK",payload:ee.id}),className:"text-red-500 hover:text-red-700 text-xs",children:""})]}),c.jsx("input",{type:"text",value:Y.word,onChange:B=>{const z=rT.update(o.testData.words,Y.blockId,B.target.value);l({type:"UPDATE_WORDS",payload:z})},className:"w-full text-sm px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter word text"})]},Y.blockId)})})]}),[o.testData.words,o.testData.blocks]);return c.jsxs(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex flex-col h-screen bg-gray-100",children:[c.jsx("div",{className:"bg-white shadow-sm border-b p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{children:c.jsx("div",{className:"mt-2 text-sm text-gray-600",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{children:[c.jsx("strong",{children:"Test Name:"})," ",e||"Untitled Test"]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Questions:"})," ",o.testData.blocks.length," (auto-generated from blocks)"]})]})})}),c.jsx("div",{className:"flex gap-2",children:c.jsx(nt,{onClick:R,disabled:a||o.ui.isLoading,variant:"primary",children:a||o.ui.isLoading?c.jsx(Gr,{size:"sm"}):"Save Test"})})]})}),G(),c.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[c.jsx("div",{ref:g,className:"bg-white border overflow-auto",style:{minHeight:"400px",maxHeight:"calc(100vh - 200px)",height:"auto"},children:K()}),re]}),c.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:A,className:"hidden"})]})},em=C.createContext(null);function Fie(e,t){return{getTheme:function(){return t??null}}}function Yc(){const e=C.useContext(em);return e==null&&(function(t,...r){const n=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;s.append("code",t);for(const a of r)s.append("v",a);throw n.search=s.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(8),e}function Mt(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const sc=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Rie=sc&&"documentMode"in document?document.documentMode:null,Ic=sc&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Kh=sc&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Qb=!(!sc||!("InputEvent"in window)||Rie)&&"getTargetRanges"in new window.InputEvent("input"),iv=sc&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),xp=sc&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Die=sc&&/Android/.test(navigator.userAgent),NH=sc&&/^(?=.*Chrome).*/i.test(navigator.userAgent),yR=sc&&Die&&NH,Zb=sc&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!NH;function AH(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}const Iie=1,Mie=3,Lie=9,Bie=11,Xh=0,jH=1,vp=2,$ie=0,Uie=1,Wie=2,e_=4,t_=8,c5=128,zie=1792|(112|(3|e_|t_)|c5),u5=1,d5=2,f5=3,h5=4,g5=5,p5=6,$2=iv||xp||Zb?"":"",Xu=`

`,Hie=Kh?"":$2,Yh={bold:1,capitalize:1024,code:16,highlight:c5,italic:2,lowercase:256,strikethrough:e_,subscript:32,superscript:64,underline:t_,uppercase:512},Gie={directionless:1,unmergeable:2},xR={center:d5,end:p5,justify:h5,left:u5,right:f5,start:g5},Vie={[d5]:"center",[p5]:"end",[h5]:"justify",[u5]:"left",[f5]:"right",[g5]:"start"},qie={normal:0,segmented:2,token:1},Kie={[$ie]:"normal",[Wie]:"segmented",[Uie]:"token"},vR="$config";function PH(e,t,r,n,s,a){let i=e.getFirstChild();for(;i!==null;){const o=i.__key;i.__parent===t&&(wt(i)&&PH(i,o,r,n,s,a),r.has(o)||a.delete(o),s.push(o)),i=i.getNextSibling()}}const Xie=100;let cA=!1,m5=0;function Yie(e){m5=e.timeStamp}function nT(e,t,r){const n=e.nodeName==="BR",s=t.__lexicalLineBreak;return s&&(e===s||n&&e.previousSibling===s)||n&&Y2(e,r)!==void 0}function Jie(e,t,r){const n=rc(xl(r));let s=null,a=null;n!==null&&n.anchorNode===e&&(s=n.anchorOffset,a=n.focusOffset);const i=e.nodeValue;i!==null&&I5(t,i,s,a,!1)}function Qie(e,t,r){if(Ot(e)){const n=e.anchor.getNode();if(n.is(r)&&e.format!==n.getFormat())return!1}return rd(t)&&r.isAttached()}function Zie(e,t,r,n){for(let s=e;s&&!Zoe(s);s=_1(s)){const a=Y2(s,t);if(a!==void 0){const i=aa(a,r);if(i)return xn(i)||!as(s)?void 0:[s,i]}else if(s===n)return[n,EG(r)]}}function OH(e,t,r){cA=!0;const n=performance.now()-m5>Xie;try{jo(e,(()=>{const s=Xt()||(function(g){return g.getEditorState().read((()=>{const p=Xt();return p!==null?p.clone():null}))})(e),a=new Map,i=e.getRootElement(),o=e._editorState,l=e._blockCursorElement;let u=!1,d="";for(let g=0;g<t.length;g++){const p=t[g],x=p.type,y=p.target,v=Zie(y,e,o,i);if(!v)continue;const[T,_]=v;if(x==="characterData")n&&Yt(_)&&rd(y)&&Qie(s,y,_)&&Jie(y,_,e);else if(x==="childList"){u=!0;const b=p.addedNodes;for(let A=0;A<b.length;A++){const P=b[A],j=TG(P),O=P.parentNode;if(O!=null&&P!==l&&j===null&&!nT(P,O,e)){if(Kh){const R=(as(P)?P.innerText:null)||P.nodeValue;R&&(d+=R)}O.removeChild(P)}}const E=p.removedNodes,k=E.length;if(k>0){let A=0;for(let P=0;P<k;P++){const j=E[P];(nT(j,y,e)||l===j)&&(y.appendChild(j),A++)}k!==A&&a.set(T,_)}}}if(a.size>0)for(const[g,p]of a)p.reconcileObservedMutation(g,e);const f=r.takeRecords();if(f.length>0){for(let g=0;g<f.length;g++){const p=f[g],x=p.addedNodes,y=p.target;for(let v=0;v<x.length;v++){const T=x[v],_=T.parentNode;_==null||T.nodeName!=="BR"||nT(T,y,e)||_.removeChild(T)}}r.takeRecords()}s!==null&&(u&&li(s),Kh&&PG(e)&&s.insertRawText(d))}))}finally{cA=!1}}function FH(e){const t=e._observer;t!==null&&OH(e,t.takeRecords(),t)}function RH(e){(function(t){m5===0&&xl(t).addEventListener("textInput",Yie,!0)})(e),e._observer=new MutationObserver(((t,r)=>{OH(e,t,r)}))}function eoe(e){const t=new Map,r=new Set;for(let n=typeof e=="function"?e:e.replace;n.prototype&&n.prototype.getType!==void 0;n=Object.getPrototypeOf(n)){const{ownNodeConfig:s}=U5(n);if(s&&s.stateConfigs)for(const a of s.stateConfigs){let i;"stateConfig"in a?(i=a.stateConfig,a.flat&&r.add(i.key)):i=a,t.set(i.key,i)}}return{flatKeys:r,sharedConfigMap:t}}let toe=class DH{constructor(t,r,n=void 0,s=new Map,a=void 0){this.node=t,this.sharedNodeState=r,this.unknownState=n,this.knownState=s;const{sharedConfigMap:i}=this.sharedNodeState,o=a!==void 0?a:(function(l,u,d){let f=d.size;if(u)for(const g in u){const p=l.get(g);p&&d.has(p)||f++}return f})(i,n,s);this.size=o}getValue(t){const r=this.knownState.get(t);if(r!==void 0)return r;this.sharedNodeState.sharedConfigMap.set(t.key,t);let n=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){const s=this.unknownState[t.key];s!==void 0&&(n=t.parse(s)),this.updateFromKnown(t,n)}return n}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const t={...this.unknownState},r={};for(const[n,s]of this.knownState)n.isEqual(s,n.defaultValue)?delete t[n.key]:t[n.key]=n.unparse(s);for(const n of this.sharedNodeState.flatKeys)n in t&&(r[n]=t[n],delete t[n]);return wR(t)&&(r.$=t),r}getWritable(t){if(this.node===t)return this;const{sharedNodeState:r,unknownState:n}=this,s=new Map(this.knownState);return new DH(t,r,(function(a,i,o){let l;if(o)for(const[u,d]of Object.entries(o)){const f=a.get(u);f?i.has(f)||i.set(f,f.parse(d)):(l=l||{},l[u]=d)}return l})(r.sharedConfigMap,s,n),s,this.size)}updateFromKnown(t,r){const n=t.key;this.sharedNodeState.sharedConfigMap.set(n,t);const{knownState:s,unknownState:a}=this;s.has(t)||a&&n in a||(a&&(delete a[n],this.unknownState=wR(a)),this.size++),s.set(t,r)}updateFromUnknown(t,r){const n=this.sharedNodeState.sharedConfigMap.get(t);n?this.updateFromKnown(n,n.parse(r)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=r)}updateFromJSON(t){const{knownState:r}=this;for(const n of r.keys())r.set(n,n.defaultValue);if(this.size=r.size,this.unknownState=void 0,t)for(const[n,s]of Object.entries(t))this.updateFromUnknown(n,s)}};function roe(e){const t=e.getWritable(),r=t.__state?t.__state.getWritable(t):new toe(t,IH(t));return t.__state=r,r}function IH(e){return e.__state?e.__state.sharedNodeState:_G(S1(),e.getType()).sharedNodeState}function wR(e){if(e)for(const t in e)return e}function bR(e,t,r){for(const[n,s]of t.knownState){if(e.has(n.key))continue;e.add(n.key);const a=r?r.getValue(n):n.defaultValue;if(a!==s&&!n.isEqual(a,s))return!0}return!1}function _R(e,t,r){const{unknownState:n}=t,s=r?r.unknownState:void 0;if(n){for(const[a,i]of Object.entries(n))if(!e.has(a)&&(e.add(a),i!==(s?s[a]:void 0)))return!0}return!1}function SR(e,t){const r=e.__state;return r&&r.node===e?r.getWritable(t):r}function kR(e,t){const r=e.__mode,n=e.__format,s=e.__style,a=t.__mode,i=t.__format,o=t.__style,l=e.__state,u=t.__state;return(r===null||r===a)&&(n===null||n===i)&&(s===null||s===o)&&(e.__state===null||l===u||(function(d,f){if(d===f)return!0;if(d&&f&&d.size!==f.size)return!1;const g=new Set;return!(d&&bR(g,d,f)||f&&bR(g,f,d)||d&&_R(g,d,f)||f&&_R(g,f,d))})(l,u))}function TR(e,t){const r=e.mergeWithSibling(t),n=bs()._normalizedNodes;return n.add(e.__key),n.add(t.__key),r}function CR(e){let t,r,n=e;if(n.__text!==""||!n.isSimpleText()||n.isUnmergeable()){for(;(t=n.getPreviousSibling())!==null&&Yt(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(kR(t,n)){n=TR(t,n);break}break}t.remove()}for(;(r=n.getNextSibling())!==null&&Yt(r)&&r.isSimpleText()&&!r.isUnmergeable();){if(r.__text!==""){if(kR(n,r)){n=TR(n,r);break}break}r.remove()}}else n.remove()}function r_(e){return ER(e.anchor),ER(e.focus),e}function ER(e){for(;e.type==="element";){const t=e.getNode(),r=e.offset;let n,s;if(r===t.getChildrenSize()?(n=t.getChildAtIndex(r-1),s=!0):(n=t.getChildAtIndex(r),s=!1),Yt(n)){e.set(n.__key,s?n.getTextContentSize():0,"text",!0);break}if(!wt(n))break;e.set(n.__key,s?n.getChildrenSize():0,"element",!0)}}let Jh,Ci,ov,U2,uA,dA,Qh,Ql,fA,lv,ya="",Fc=null,Rc="",Fu="",Ig=!1,n_=!1;function s_(e,t){const r=Qh.get(e);if(t!==null){const n=mA(e);n.parentNode===t&&t.removeChild(n)}if(Ql.has(e)||Ci._keyToDOMMap.delete(e),wt(r)){const n=i_(r,Qh);hA(n,0,n.length-1,null)}r!==void 0&&M5(lv,ov,U2,r,"destroyed")}function hA(e,t,r,n){let s=t;for(;s<=r;++s){const a=e[s];a!==void 0&&s_(a,n)}}function xh(e,t){e.setProperty("text-align",t)}const noe="40px";function MH(e,t){const r=Jh.theme.indent;if(typeof r=="string"){const s=e.classList.contains(r);t>0&&!s?e.classList.add(r):t<1&&s&&e.classList.remove(r)}const n=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||noe;e.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${n})`)}function LH(e,t){const r=e.style;t===0?xh(r,""):t===u5?xh(r,"left"):t===d5?xh(r,"center"):t===f5?xh(r,"right"):t===h5?xh(r,"justify"):t===g5?xh(r,"start"):t===p5&&xh(r,"end")}function gA(e,t){const r=(function(n){const s=n.__dir;if(s!==null)return s;if(wa(n))return null;const a=n.getParentOrThrow();return wa(a)&&a.__dir===null?"auto":null})(t);r!==null?e.dir=r:e.removeAttribute("dir")}function a_(e,t){const r=Ql.get(e);r===void 0&&Mt(60);const n=r.createDOM(Jh,Ci);if((function(s,a,i){const o=i._keyToDOMMap;(function(l,u,d){const f=`__lexicalKey_${u._key}`;l[f]=d})(a,i,s),o.set(s,a)})(e,n,Ci),Yt(r)?n.setAttribute("data-lexical-text","true"):xn(r)&&n.setAttribute("data-lexical-decorator","true"),wt(r)){const s=r.__indent,a=r.__size;if(gA(n,r),s!==0&&MH(n,s),a!==0){const o=a-1;pA(i_(r,Ql),r,0,o,r.getDOMSlot(n))}const i=r.__format;i!==0&&LH(n,i),r.isInline()||BH(null,r,n),J2(r)&&(ya+=Xu,Fu+=Xu)}else{const s=r.getTextContent();if(xn(r)){const a=r.decorate(Ci,Jh);a!==null&&$H(e,a),n.contentEditable="false"}ya+=s,Fu+=s}return t!==null&&t.insertChild(n),M5(lv,ov,U2,r,"created"),n}function pA(e,t,r,n,s){const a=ya;ya="";let i=r;for(;i<=n;++i){a_(e[i],s);const o=Ql.get(e[i]);o!==null&&Yt(o)&&(Fc===null&&(Fc=o.getFormat()),Rc===""&&(Rc=o.getStyle()))}J2(t)&&(ya+=Xu),s.element.__lexicalTextContent=ya,ya=a+ya}function NR(e,t){if(e){const r=e.__last;if(r){const n=t.get(r);if(n)return $u(n)?"line-break":xn(n)&&n.isInline()?"decorator":null}return"empty"}return null}function BH(e,t,r){const n=NR(e,Qh),s=NR(t,Ql);n!==s&&t.getDOMSlot(r).setManagedLineBreak(s)}function soe(e,t,r){var n;Fc=null,Rc="",(function(s,a,i){const o=ya,l=s.__size,u=a.__size;ya="";const d=i.element;if(l===1&&u===1){const f=s.__first,g=a.__first;if(f===g)wx(f,d);else{const x=mA(f),y=a_(g,null);try{d.replaceChild(y,x)}catch(v){if(typeof v=="object"&&v!=null){const T=`${v.toString()} Parent: ${d.tagName}, new child: {tag: ${y.tagName} key: ${g}}, old child: {tag: ${x.tagName}, key: ${f}}.`;throw new Error(T)}throw v}s_(f,null)}const p=Ql.get(g);Yt(p)&&(Fc===null&&(Fc=p.getFormat()),Rc===""&&(Rc=p.getStyle()))}else{const f=i_(s,Qh),g=i_(a,Ql);if(f.length!==l&&Mt(227),g.length!==u&&Mt(228),l===0)u!==0&&pA(g,a,0,u-1,i);else if(u===0){if(l!==0){const p=i.after==null&&i.before==null&&i.element.__lexicalLineBreak==null;hA(f,0,l-1,p?null:d),p&&(d.textContent="")}}else(function(p,x,y,v,T,_){const b=v-1,E=T-1;let k,A,P=_.getFirstChild(),j=0,O=0;for(;j<=b&&O<=E;){const G=x[j],K=y[O];if(G===K)P=sT(wx(K,_.element)),j++,O++;else{k===void 0&&(k=new Set(x)),A===void 0&&(A=new Set(y));const Y=A.has(G),ee=k.has(K);if(Y)if(ee){const B=Zh(Ci,K);B===P?P=sT(wx(K,_.element)):(_.withBefore(P).insertChild(B),wx(K,_.element)),j++,O++}else a_(K,_.withBefore(P)),O++;else P=sT(mA(G)),s_(G,_.element),j++}const re=Ql.get(K);re!==null&&Yt(re)&&(Fc===null&&(Fc=re.getFormat()),Rc===""&&(Rc=re.getStyle()))}const R=j>b,M=O>E;if(R&&!M){const G=y[E+1],K=G===void 0?null:Ci.getElementByKey(G);pA(y,p,O,E,_.withBefore(K))}else M&&!R&&hA(x,j,b,_.element)})(a,f,g,l,u,i)}J2(a)&&(ya+=Xu),d.__lexicalTextContent=ya,ya=o+ya})(e,t,t.getDOMSlot(r)),n=t,Fc==null||Fc===n.__textFormat||n_||n.setTextFormat(Fc),(function(s){Rc===""||Rc===s.__textStyle||n_||s.setTextStyle(Rc)})(t)}function i_(e,t){const r=[];let n=e.__first;for(;n!==null;){const s=t.get(n);s===void 0&&Mt(101),r.push(n),n=s.__next}return r}function wx(e,t){const r=Qh.get(e);let n=Ql.get(e);r!==void 0&&n!==void 0||Mt(61);const s=Ig||dA.has(e)||uA.has(e),a=Zh(Ci,e);if(r===n&&!s){if(wt(r)){const i=a.__lexicalTextContent;i!==void 0&&(ya+=i,Fu+=i)}else{const i=r.getTextContent();Fu+=i,ya+=i}return a}if(r!==n&&s&&M5(lv,ov,U2,n,"updated"),n.updateDOM(r,a,Jh)){const i=a_(e,null);return t===null&&Mt(62),t.replaceChild(i,a),s_(e,null),i}if(wt(r)&&wt(n)){const i=n.__indent;(Ig||i!==r.__indent)&&MH(a,i);const o=n.__format;if((Ig||o!==r.__format)&&LH(a,o),s&&(soe(r,n,a),wa(n)||n.isInline()||BH(r,n,a)),J2(n)&&(ya+=Xu,Fu+=Xu),(Ig||n.__dir!==r.__dir)&&(gA(a,n),wa(n)&&!Ig))for(const l of n.getChildren())wt(l)&&gA(Zh(Ci,l.getKey()),l)}else{const i=n.getTextContent();if(xn(n)){const o=n.decorate(Ci,Jh);o!==null&&$H(e,o)}ya+=i,Fu+=i}if(!n_&&wa(n)&&n.__cachedText!==Fu){const i=n.getWritable();i.__cachedText=Fu,n=i}return a}function $H(e,t){let r=Ci._pendingDecorators;const n=Ci._decorators;if(r===null){if(n[e]===t)return;r=CG(Ci)}r[e]=t}function sT(e){let t=e.nextSibling;return t!==null&&t===Ci._blockCursorElement&&(t=t.nextSibling),t}function aoe(e,t,r,n,s,a){ya="",Fu="",Ig=n===vp,Ci=r,Jh=r._config,ov=r._nodes,U2=Ci._listeners.mutation,uA=s,dA=a,Qh=e._nodeMap,Ql=t._nodeMap,n_=t._readOnly,fA=new Map(r._keyToDOMMap);const i=new Map;return lv=i,wx("root",null),Ci=void 0,ov=void 0,uA=void 0,dA=void 0,Qh=void 0,Ql=void 0,Jh=void 0,fA=void 0,lv=void 0,i}function mA(e){const t=fA.get(e);return t===void 0&&Mt(75,e),t}function jr(e){return{type:e}}const UH=jr("SELECTION_CHANGE_COMMAND"),ioe=jr("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),y5=jr("CLICK_COMMAND"),Mh=jr("DELETE_CHARACTER_COMMAND"),tp=jr("INSERT_LINE_BREAK_COMMAND"),cv=jr("INSERT_PARAGRAPH_COMMAND"),rp=jr("CONTROLLED_TEXT_INSERTION_COMMAND"),x5=jr("PASTE_COMMAND"),yA=jr("REMOVE_TEXT_COMMAND"),uv=jr("DELETE_WORD_COMMAND"),dv=jr("DELETE_LINE_COMMAND"),Ti=jr("FORMAT_TEXT_COMMAND"),v5=jr("UNDO_COMMAND"),w5=jr("REDO_COMMAND"),ooe=jr("KEYDOWN_COMMAND"),WH=jr("KEY_ARROW_RIGHT_COMMAND"),loe=jr("MOVE_TO_END"),zH=jr("KEY_ARROW_LEFT_COMMAND"),coe=jr("MOVE_TO_START"),HH=jr("KEY_ARROW_UP_COMMAND"),GH=jr("KEY_ARROW_DOWN_COMMAND"),o_=jr("KEY_ENTER_COMMAND"),VH=jr("KEY_SPACE_COMMAND"),qH=jr("KEY_BACKSPACE_COMMAND"),KH=jr("KEY_ESCAPE_COMMAND"),XH=jr("KEY_DELETE_COMMAND"),YH=jr("KEY_TAB_COMMAND"),uoe=jr("INSERT_TAB_COMMAND"),doe=jr("INDENT_CONTENT_COMMAND"),AR=jr("OUTDENT_CONTENT_COMMAND"),JH=jr("DROP_COMMAND"),QH=jr("FORMAT_ELEMENT_COMMAND"),ZH=jr("DRAGSTART_COMMAND"),eG=jr("DRAGOVER_COMMAND"),foe=jr("DRAGEND_COMMAND"),W2=jr("COPY_COMMAND"),b5=jr("CUT_COMMAND"),xA=jr("SELECT_ALL_COMMAND"),hoe=jr("CLEAR_EDITOR_COMMAND"),goe=jr("CLEAR_HISTORY_COMMAND"),eb=jr("CAN_REDO_COMMAND"),tb=jr("CAN_UNDO_COMMAND"),poe=jr("FOCUS_COMMAND"),moe=jr("BLUR_COMMAND"),yoe=jr("KEY_MODIFIER_COMMAND"),Nu=Object.freeze({}),vA=30,wA=[["keydown",function(e,t){if(Fx=e.timeStamp,tG=e.key,!t.isComposing()&&!ir(t,ooe,e)&&e.key!=null){if(aT&&nD(e))return jo(t,(()=>{rb(t,iT)})),aT=!1,void(iT="");if((function(r){return Pn(r,"ArrowRight",{shiftKey:"any"})})(e))ir(t,WH,e);else if((function(r){return Pn(r,"ArrowRight",Pu)})(e))ir(t,loe,e);else if((function(r){return Pn(r,"ArrowLeft",{shiftKey:"any"})})(e))ir(t,zH,e);else if((function(r){return Pn(r,"ArrowLeft",Pu)})(e))ir(t,coe,e);else if((function(r){return Pn(r,"ArrowUp",{altKey:"any",shiftKey:"any"})})(e))ir(t,HH,e);else if((function(r){return Pn(r,"ArrowDown",{altKey:"any",shiftKey:"any"})})(e))ir(t,GH,e);else if((function(r){return Pn(r,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})})(e))Rx=!0,ir(t,o_,e);else if((function(r){return r.key===" "})(e))ir(t,VH,e);else if((function(r){return Ic&&Pn(r,"o",{ctrlKey:!0})})(e))e.preventDefault(),Rx=!0,ir(t,tp,!0);else if((function(r){return Pn(r,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})})(e))Rx=!1,ir(t,o_,e);else if((function(r){return Pn(r,"Backspace",{shiftKey:"any"})||Ic&&Pn(r,"h",{ctrlKey:!0})})(e))nD(e)?ir(t,qH,e):(e.preventDefault(),ir(t,Mh,!0));else if((function(r){return r.key==="Escape"})(e))ir(t,KH,e);else if((function(r){return Pn(r,"Delete",{})||Ic&&Pn(r,"d",{ctrlKey:!0})})(e))(function(r){return r.key==="Delete"})(e)?ir(t,XH,e):(e.preventDefault(),ir(t,Mh,!1));else if((function(r){return Pn(r,"Backspace",rD)})(e))e.preventDefault(),ir(t,uv,!0);else if((function(r){return Pn(r,"Delete",rD)})(e))e.preventDefault(),ir(t,uv,!1);else if((function(r){return Ic&&Pn(r,"Backspace",{metaKey:!0})})(e))e.preventDefault(),ir(t,dv,!0);else if((function(r){return Ic&&(Pn(r,"Delete",{metaKey:!0})||Pn(r,"k",{ctrlKey:!0}))})(e))e.preventDefault(),ir(t,dv,!1);else if((function(r){return Pn(r,"b",Pu)})(e))e.preventDefault(),ir(t,Ti,"bold");else if((function(r){return Pn(r,"u",Pu)})(e))e.preventDefault(),ir(t,Ti,"underline");else if((function(r){return Pn(r,"i",Pu)})(e))e.preventDefault(),ir(t,Ti,"italic");else if((function(r){return Pn(r,"Tab",{shiftKey:"any"})})(e))ir(t,YH,e);else if((function(r){return Pn(r,"z",Pu)})(e))e.preventDefault(),ir(t,v5,void 0);else if((function(r){return Ic?Pn(r,"z",{metaKey:!0,shiftKey:!0}):Pn(r,"y",{ctrlKey:!0})||Pn(r,"z",{ctrlKey:!0,shiftKey:!0})})(e))e.preventDefault(),ir(t,w5,void 0);else{const r=t._editorState._selection;r===null||Ot(r)?sD(e)&&(e.preventDefault(),ir(t,xA,e)):(function(n){return Pn(n,"c",Pu)})(e)?(e.preventDefault(),ir(t,W2,e)):(function(n){return Pn(n,"x",Pu)})(e)?(e.preventDefault(),ir(t,b5,e)):sD(e)&&(e.preventDefault(),ir(t,xA,e))}(function(r){return r.ctrlKey||r.shiftKey||r.altKey||r.metaKey})(e)&&ir(t,yoe,e)}}],["pointerdown",function(e,t){const r=e.target,n=e.pointerType;sm(r)&&n!=="touch"&&n!=="pen"&&e.button===0&&jo(t,(()=>{ZR(r)||(_A=!0)}))}],["compositionstart",function(e,t){jo(t,(()=>{const r=Xt();if(Ot(r)&&!t.isComposing()){const n=r.anchor,s=r.anchor.getNode();si(n.key),(e.timeStamp<Fx+vA||n.type==="element"||!r.isCollapsed()||s.getFormat()!==r.format||Yt(s)&&s.getStyle()!==r.style)&&ir(t,rp,Hie)}}))}],["compositionend",function(e,t){Kh?nx=!0:xp||!iv&&!Zb?jo(t,(()=>{rb(t,e.data)})):(aT=!0,iT=e.data)}],["input",function(e,t){e.stopPropagation(),jo(t,(()=>{if(as(e.target)&&ZR(e.target))return;const r=Xt(),n=e.data,s=iG(e);if(n!=null&&Ot(r)&&sG(r,s,n,e.timeStamp,!1)){nx&&(rb(t,n),nx=!1);const a=r.anchor.getNode(),i=rc(xl(t));if(i===null)return;const o=r.isBackward(),l=o?r.anchor.offset:r.focus.offset,u=o?r.focus.offset:r.anchor.offset;Qb&&!r.isCollapsed()&&Yt(a)&&i.anchorNode!==null&&a.getTextContent().slice(0,l)+n+a.getTextContent().slice(l+u)===jG(i.anchorNode)||ir(t,rp,n);const d=n.length;Kh&&d>1&&e.inputType==="insertCompositionText"&&!t.isComposing()&&(r.anchor.offset-=d),iv||xp||Zb||!t.isComposing()||(Fx=0,si(null))}else D5(!1,t,n!==null?n:void 0),nx&&(rb(t,n||void 0),nx=!1);(function(){ni();const a=bs();FH(a)})()}),{event:e}),Mg=null}],["click",function(e,t){jo(t,(()=>{const r=Xt(),n=rc(xl(t)),s=nm();if(n){if(Ot(r)){const a=r.anchor,i=a.getNode();if(a.type==="element"&&a.offset===0&&r.isCollapsed()&&!wa(i)&&hs().getChildrenSize()===1&&i.getTopLevelElementOrThrow().isEmpty()&&s!==null&&r.is(s))n.removeAllRanges(),r.dirty=!0;else if(e.detail===3&&!r.isCollapsed()&&i!==r.focus.getNode()){const o=(function(l,u){let d=l;for(;d!==hs()&&d!=null;){if(u(d))return d;d=d.getParent()}return null})(i,(l=>wt(l)&&!l.isInline()));wt(o)&&o.select(0)}}else if(e.pointerType==="touch"||e.pointerType==="pen"){const a=n.anchorNode;(as(a)||rd(a))&&li(k5(s,n,t,e))}}ir(t,y5,e)}))}],["cut",Nu],["copy",Nu],["dragstart",Nu],["dragover",Nu],["dragend",Nu],["paste",Nu],["focus",Nu],["blur",Nu],["drop",Nu]];Qb&&wA.push(["beforeinput",(e,t)=>(function(r,n){const s=r.inputType,a=iG(r);s==="deleteCompositionText"||Kh&&PG(n)||s!=="insertCompositionText"&&jo(n,(()=>{const i=Xt();if(s==="deleteContentBackward"){if(i===null){const p=nm();if(!Ot(p))return;li(p.clone())}if(Ot(i)){const p=i.anchor.key===i.focus.key;if(o=r.timeStamp,tG==="MediaLast"&&o<Fx+vA&&n.isComposing()&&p){if(si(null),Fx=0,setTimeout((()=>{jo(n,(()=>{si(null)}))}),vA),Ot(i)){const x=i.anchor.getNode();x.markDirty(),Yt(x)||Mt(142),aG(i,x)}}else{si(null),r.preventDefault();const x=i.anchor.getNode(),y=x.getTextContent(),v=x.canInsertTextAfter(),T=i.anchor.offset===0&&i.focus.offset===y.length;let _=yR&&p&&!T&&v;if(_&&i.isCollapsed()&&(_=!xn(EA(i.anchor,!0))),!_){ir(n,Mh,!0);const b=Xt();yR&&Ot(b)&&b.isCollapsed()&&(kh=b,setTimeout((()=>kh=null)))}}return}}var o;if(!Ot(i))return;const l=r.data;Mg!==null&&D5(!1,n,Mg),i.dirty&&Mg===null||!i.isCollapsed()||wa(i.anchor.getNode())||a===null||i.applyDOMRange(a),Mg=null;const u=i.anchor,d=i.focus,f=u.getNode(),g=d.getNode();if(s!=="insertText"&&s!=="insertTranspose")switch(r.preventDefault(),s){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":ir(n,rp,r);break;case"insertFromComposition":si(null),ir(n,rp,r);break;case"insertLineBreak":si(null),ir(n,tp,!1);break;case"insertParagraph":si(null),Rx&&!xp?(Rx=!1,ir(n,tp,!1)):ir(n,cv,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":ir(n,x5,r);break;case"deleteByComposition":(function(p,x){return p!==x||wt(p)||wt(x)||!Lh(p)||!Lh(x)})(f,g)&&ir(n,yA,r);break;case"deleteByDrag":case"deleteByCut":ir(n,yA,r);break;case"deleteContent":ir(n,Mh,!1);break;case"deleteWordBackward":ir(n,uv,!0);break;case"deleteWordForward":ir(n,uv,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":ir(n,dv,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":ir(n,dv,!1);break;case"formatStrikeThrough":ir(n,Ti,"strikethrough");break;case"formatBold":ir(n,Ti,"bold");break;case"formatItalic":ir(n,Ti,"italic");break;case"formatUnderline":ir(n,Ti,"underline");break;case"historyUndo":ir(n,v5,void 0);break;case"historyRedo":ir(n,w5,void 0)}else{if(l===`
`)r.preventDefault(),ir(n,tp,!1);else if(l===Xu)r.preventDefault(),ir(n,cv,void 0);else if(l==null&&r.dataTransfer){const p=r.dataTransfer.getData("text/plain");r.preventDefault(),i.insertRawText(p)}else l!=null&&sG(i,a,l,r.timeStamp,!0)?(r.preventDefault(),ir(n,rp,l)):Mg=l;rG=r.timeStamp}}))})(e,t)]);let Fx=0,tG=null,rG=0,Mg=null;const l_=new WeakMap;let bA=!1,_A=!1,Rx=!1,nx=!1,aT=!1,iT="",kh=null,nG=[0,"",0,"root",0];function sG(e,t,r,n,s){const a=e.anchor,i=e.focus,o=a.getNode(),l=bs(),u=rc(xl(l)),d=u!==null?u.anchorNode:null,f=a.key,g=l.getElementByKey(f),p=r.length;return f!==i.key||!Yt(o)||(!s&&(!Qb||rG<n+50)||o.isDirty()&&p<2||NG(r))&&a.offset!==i.offset&&!o.isComposing()||Ou(o)||o.isDirty()&&p>1||(s||!Qb)&&g!==null&&!o.isComposing()&&d!==wp(g)||u!==null&&t!==null&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||o.getFormat()!==e.format||o.getStyle()!==e.style||(function(x,y){if(y.isSegmented())return!0;if(!x.isCollapsed())return!1;const v=x.anchor.offset,T=y.getParentOrThrow(),_=Lh(y);return v===0?!y.canInsertTextBefore()||!T.canInsertTextBefore()&&!y.isComposing()||_||(function(b){const E=b.getPreviousSibling();return(Yt(E)||wt(E)&&E.isInline())&&!E.canInsertTextAfter()})(y):v===y.getTextContentSize()&&(!y.canInsertTextAfter()||!T.canInsertTextAfter()&&!y.isComposing()||_)})(e,o)}function jR(e,t){return rd(e)&&e.nodeValue!==null&&t!==0&&t!==e.nodeValue.length}function PR(e,t,r){const{anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:i}=e;bA&&(bA=!1,jR(n,s)&&jR(a,i)&&!kh)||jo(t,(()=>{if(!r)return void li(null);if(!b1(t,n,a))return;let o=Xt();if(kh&&Ot(o)&&o.isCollapsed()){const l=o.anchor,u=kh.anchor;(l.key===u.key&&l.offset===u.offset+1||l.offset===1&&u.getNode().is(l.getNode().getPreviousSibling()))&&(o=kh.clone(),li(o))}if(kh=null,Ot(o)){const l=o.anchor,u=l.getNode();if(o.isCollapsed()){e.type==="Range"&&e.anchorNode===e.focusNode&&(o.dirty=!0);const d=xl(t).event,f=d?d.timeStamp:performance.now(),[g,p,x,y,v]=nG,T=hs(),_=t.isComposing()===!1&&T.getTextContent()==="";if(f<v+200&&l.offset===x&&l.key===y)Ub(o,g,p);else if(l.type==="text")Yt(u)||Mt(141),aG(o,u);else if(l.type==="element"&&!_){wt(u)||Mt(259);const b=l.getNode();b.isEmpty()?(function(E,k){const A=k.getTextFormat(),P=k.getTextStyle();Ub(E,A,P)})(o,b):Ub(o,0,"")}}else{const d=l.key,f=o.focus.key,g=o.getNodes(),p=g.length,x=o.isBackward(),y=x?i:s,v=x?s:i,T=x?f:d,_=x?d:f;let b=zie,E=!1;for(let k=0;k<p;k++){const A=g[k],P=A.getTextContentSize();if(Yt(A)&&P!==0&&!(k===0&&A.__key===T&&y===P||k===p-1&&A.__key===_&&v===0)&&(E=!0,b&=A.getFormat(),b===0))break}o.format=E?b:0}}ir(t,UH,void 0)}))}function Ub(e,t,r){e.format===t&&e.style===r||(e.format=t,e.style=r,e.dirty=!0)}function aG(e,t){Ub(e,t.getFormat(),t.getStyle())}function iG(e){if(!e.getTargetRanges)return null;const t=e.getTargetRanges();return t.length===0?null:t[0]}function rb(e,t){const r=e._compositionKey;if(si(null),r!==null&&t!=null){if(t===""){const n=aa(r),s=wp(e.getElementByKey(r));return void(s!==null&&s.nodeValue!==null&&Yt(n)&&I5(n,s.nodeValue,null,null,!0))}if(t[t.length-1]===`
`){const n=Xt();if(Ot(n)){const s=n.focus;return n.anchor.set(s.key,s.offset,s.type),void ir(e,o_,null)}}}D5(!0,e,t)}function oG(e){let t=e.__lexicalEventHandles;return t===void 0&&(t=[],e.__lexicalEventHandles=t),t}const np=new Map;function lG(e){const t=Yoe(e.target);if(t===null)return;const r=SG(t.anchorNode);if(r===null)return;_A&&(_A=!1,jo(r,(()=>{const l=nm(),u=t.anchorNode;(as(u)||rd(u))&&li(k5(l,t,r,e))})));const n=R5(r),s=n[n.length-1],a=s._key,i=np.get(a),o=i||s;o!==r&&PR(t,o,!1),PR(t,r,!0),r!==s?np.set(a,r):i&&np.delete(a)}function OR(e){e._lexicalHandled=!0}function FR(e){return e._lexicalHandled===!0}function xoe(e){const t=e.ownerDocument,r=l_.get(t);if(r===void 0)return;const n=r-1;n>=0||Mt(164),l_.set(t,n),n===0&&t.removeEventListener("selectionchange",lG);const s=X2(e);F5(s)?((function(i){if(i._parentEditor!==null){const o=R5(i),l=o[o.length-1]._key;np.get(l)===i&&np.delete(l)}else np.delete(i._key)})(s),e.__lexicalEditor=null):s&&Mt(198);const a=oG(e);for(let i=0;i<a.length;i++)a[i]();e.__lexicalEventHandles=[]}function SA(e,t,r){ni();const n=e.__key,s=e.getParent();if(s===null)return;const a=(function(o){const l=Xt();if(!Ot(l)||!wt(o))return l;const{anchor:u,focus:d}=l,f=u.getNode(),g=d.getNode();return NA(f,o)&&u.set(o.__key,0,"element"),NA(g,o)&&d.set(o.__key,0,"element"),l})(e);let i=!1;if(Ot(a)&&t){const o=a.anchor,l=a.focus;o.key===n&&(u_(o,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0),l.key===n&&(u_(l,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0)}else mi(a)&&t&&e.isSelected()&&e.selectPrevious();if(Ot(a)&&t&&!i){const o=e.getIndexWithinParent();Bh(e),c_(a,s,o,-1)}else Bh(e);r||Xi(s)||s.canBeEmpty()||!s.isEmpty()||SA(s,t),t&&a&&wa(s)&&s.isEmpty()&&s.selectEnd()}class tm{static getType(){const{ownNodeType:t}=U5(this);return t===void 0&&Mt(64,this.name),t}static clone(t){Mt(65,this.name)}$config(){return{}}config(t,r){const n=r.extends||Object.getPrototypeOf(this.constructor);return Object.assign(r,{extends:n,type:t}),{[t]:r}}afterCloneFrom(t){this.__key===t.__key?(this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state):t.__state&&(this.__state=t.__state.getWritable(this))}constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),Woe(this,t)}getType(){return this.__type}isInline(){Mt(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t==="root")return!0;const r=aa(t);if(r===null)break;t=r.__parent}return!1}isSelected(t){const r=t||Xt();if(r==null)return!1;const n=r.getNodes().some((s=>s.__key===this.__key));if(Yt(this))return n;if(Ot(r)&&r.anchor.type==="element"&&r.focus.type==="element"){if(r.isCollapsed())return!1;const s=this.getParent();if(xn(this)&&this.isInline()&&s){const a=r.isBackward()?r.focus:r.anchor;if(s.is(a.getNode())&&a.offset===s.getChildrenSize()&&this.is(s.getLastChild()))return!1}}return n}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(t===null)return-1;let r=t.getFirstChild(),n=0;for(;r!==null;){if(this.is(r))return n;n++,r=r.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return t===null?null:aa(t)}getParentOrThrow(){const t=this.getParent();return t===null&&Mt(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){const r=t.getParent();if(Xi(r))return wt(t)||t===this&&xn(t)||Mt(194),t;t=r}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return t===null&&Mt(67,this.__key),t}getParents(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r),r=r.getParent();return t}getParentKeys(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r.__key),r=r.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return t===null?null:aa(t)}getPreviousSiblings(){const t=[],r=this.getParent();if(r===null)return t;let n=r.getFirstChild();for(;n!==null&&!n.is(this);)t.push(n),n=n.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return t===null?null:aa(t)}getNextSiblings(){const t=[];let r=this.getNextSibling();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getCommonAncestor(t){const r=wt(this)?this:this.getParent(),n=wt(t)?t:t.getParent(),s=r&&n?zb(r,n):null;return s?s.commonAncestor:null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){const r=zb(this,t);return r!==null&&(r.type==="descendant"||(r.type==="branch"?DG(r)===-1:(r.type!=="same"&&r.type!=="ancestor"&&Mt(279),!1)))}isParentOf(t){const r=zb(this,t);return r!==null&&r.type==="ancestor"}getNodesBetween(t){const r=this.isBefore(t),n=[],s=new Set;let a=this;for(;a!==null;){const i=a.__key;if(s.has(i)||(s.add(i),n.push(a)),a===t)break;const o=wt(a)?r?a.getFirstChild():a.getLastChild():null;if(o!==null){a=o;continue}const l=r?a.getNextSibling():a.getPreviousSibling();if(l!==null){a=l;continue}const u=a.getParentOrThrow();if(s.has(u.__key)||n.push(u),u===t)break;let d=null,f=u;do{if(f===null&&Mt(68),d=r?f.getNextSibling():f.getPreviousSibling(),f=f.getParent(),f===null)break;d!==null||s.has(f.__key)||n.push(f)}while(d===null);a=d}return r||n.reverse(),n}isDirty(){const t=bs()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){const t=aa(this.__key);return t===null&&Mt(113),t}getWritable(){ni();const t=jf(),r=bs(),n=t._nodeMap,s=this.__key,a=this.getLatest(),i=r._cloneNotNeeded,o=Xt();if(o!==null&&o.setCachedNodes(null),i.has(s))return h_(a),a;const l=B5(a);return i.add(s),h_(l),n.set(s,l),l}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,r){Mt(70)}updateDOM(t,r,n){Mt(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){const t=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...t}}static importJSON(t){Mt(18,this.name)}updateFromJSON(t){return(function(r,n){const s=r.getWritable(),a=n.$;let i=a;for(const o of IH(s).flatKeys)o in n&&(i!==void 0&&i!==a||(i={...a}),i[o]=n[o]);return(s.__state||i)&&roe(r).updateFromJSON(i),s})(this,t)}static transform(){return null}remove(t){SA(this,!0,t)}replace(t,r){ni();let n=Xt();n!==null&&(n=n.clone()),fT(this,t);const s=this.getLatest(),a=this.__key,i=t.__key,o=t.getWritable(),l=this.getParentOrThrow().getWritable(),u=l.__size;Bh(o);const d=s.getPreviousSibling(),f=s.getNextSibling(),g=s.__prev,p=s.__next,x=s.__parent;if(SA(s,!1,!0),d===null?l.__first=i:d.getWritable().__next=i,o.__prev=g,f===null?l.__last=i:f.getWritable().__prev=i,o.__next=p,o.__parent=x,l.__size=u,r&&(wt(this)&&wt(o)||Mt(139),this.getChildren().forEach((y=>{o.append(y)}))),Ot(n)){li(n);const y=n.anchor,v=n.focus;y.key===a&&MR(y,o),v.key===a&&MR(v,o)}return nf()===a&&si(i),o}insertAfter(t,r=!0){ni(),fT(this,t);const n=this.getWritable(),s=t.getWritable(),a=s.getParent(),i=Xt();let o=!1,l=!1;if(a!==null){const p=t.getIndexWithinParent();if(Bh(s),Ot(i)){const x=a.__key,y=i.anchor,v=i.focus;o=y.type==="element"&&y.key===x&&y.offset===p+1,l=v.type==="element"&&v.key===x&&v.offset===p+1}}const u=this.getNextSibling(),d=this.getParentOrThrow().getWritable(),f=s.__key,g=n.__next;if(u===null?d.__last=f:u.getWritable().__prev=f,d.__size++,n.__next=f,s.__next=g,s.__prev=n.__key,s.__parent=n.__parent,r&&Ot(i)){const p=this.getIndexWithinParent();c_(i,d,p+1);const x=d.__key;o&&i.anchor.set(x,p+2,"element"),l&&i.focus.set(x,p+2,"element")}return t}insertBefore(t,r=!0){ni(),fT(this,t);const n=this.getWritable(),s=t.getWritable(),a=s.__key;Bh(s);const i=this.getPreviousSibling(),o=this.getParentOrThrow().getWritable(),l=n.__prev,u=this.getIndexWithinParent();i===null?o.__first=a:i.getWritable().__next=a,o.__size++,n.__prev=a,s.__prev=l,s.__next=n.__key,s.__parent=n.__parent;const d=Xt();return r&&Ot(d)&&c_(d,this.getParentOrThrow(),u),t}isParentRequired(){return!1}createParentElementNode(){return ss()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,r){ni();const n=this.getPreviousSibling(),s=this.getParentOrThrow();if(n===null)return s.select(0,0);if(wt(n))return n.select();if(!Yt(n)){const a=n.getIndexWithinParent()+1;return s.select(a,a)}return n.select(t,r)}selectNext(t,r){ni();const n=this.getNextSibling(),s=this.getParentOrThrow();if(n===null)return s.select();if(wt(n))return n.select(0,0);if(!Yt(n)){const a=n.getIndexWithinParent();return s.select(a,a)}return n.select(t,r)}markDirty(){this.getWritable()}reconcileObservedMutation(t,r){this.markDirty()}}class m1 extends tm{static getType(){return"linebreak"}static clone(t){return new m1(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:t=>(function(r){const n=r.parentElement;if(n!==null&&g_(n)){const s=n.firstChild;if(s===r||s.nextSibling===r&&nb(s)){const a=n.lastChild;if(a===r||a.previousSibling===r&&nb(a))return!0}}return!1})(t)||(function(r){const n=r.parentElement;if(n!==null&&g_(n)){const s=n.firstChild;if(s===r||s.nextSibling===r&&nb(s))return!1;const a=n.lastChild;if(a===r||a.previousSibling===r&&nb(a))return!0}return!1})(t)?null:{conversion:voe,priority:0}}}static importJSON(t){return qc().updateFromJSON(t)}}function voe(e){return{node:qc()}}function qc(){return Ji(new m1)}function $u(e){return e instanceof m1}function nb(e){return rd(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function oT(e,t){return 16&t?"code":t&c5?"mark":32&t?"sub":64&t?"sup":null}function lT(e,t){return 1&t?"strong":2&t?"em":"span"}function cG(e,t,r,n,s){const a=n.classList;let i=sp(s,"base");i!==void 0&&a.add(...i),i=sp(s,"underlineStrikethrough");let o=!1;const l=t&t_&&t&e_;i!==void 0&&(r&t_&&r&e_?(o=!0,l||a.add(...i)):l&&a.remove(...i));for(const u in Yh){const d=Yh[u];if(i=sp(s,u),i!==void 0)if(r&d){if(o&&(u==="underline"||u==="strikethrough")){t&d&&a.remove(...i);continue}t&d&&(!l||u!=="underline")&&u!=="strikethrough"||a.add(...i)}else t&d&&a.remove(...i)}}function uG(e,t,r){const n=t.firstChild,s=r.isComposing(),a=e+(s?$2:"");if(n==null)t.textContent=a;else{const i=n.nodeValue;if(i!==a)if(s||Kh){const[o,l,u]=(function(d,f){const g=d.length,p=f.length;let x=0,y=0;for(;x<g&&x<p&&d[x]===f[x];)x++;for(;y+x<g&&y+x<p&&d[g-y-1]===f[p-y-1];)y++;return[x,g-x-y,f.slice(x,p-y)]})(i,a);l!==0&&n.deleteData(o,l),n.insertData(o,u)}else n.nodeValue=a}}function RR(e,t,r,n,s,a){uG(s,e,t);const i=a.theme.text;i!==void 0&&cG(0,0,n,e,i)}function sb(e,t){const r=document.createElement(t);return r.appendChild(e),r}class Af extends tm{static getType(){return"text"}static clone(t){return new Af(t.__text,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail}constructor(t="",r){super(r),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return Kie[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===nf()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const r=Yh[t];return!!(this.getFormat()&r)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,r){return f_(this.getLatest().__format,t,r)}canHaveFormat(){return!0}isInline(){return!0}createDOM(t,r){const n=this.__format,s=oT(0,n),a=lT(0,n),i=s===null?a:s,o=document.createElement(i);let l=o;this.hasFormat("code")&&o.setAttribute("spellcheck","false"),s!==null&&(l=document.createElement(a),o.appendChild(l)),RR(l,this,0,n,this.__text,t);const u=this.__style;return u!==""&&(o.style.cssText=u),o}updateDOM(t,r,n){const s=this.__text,a=t.__format,i=this.__format,o=oT(0,a),l=oT(0,i),u=lT(0,a),d=lT(0,i);if((o===null?u:o)!==(l===null?d:l))return!0;if(o===l&&u!==d){const y=r.firstChild;y==null&&Mt(48);const v=document.createElement(d);return RR(v,this,0,i,s,n),r.replaceChild(v,y),!1}let f=r;l!==null&&o!==null&&(f=r.firstChild,f==null&&Mt(49)),uG(s,f,this);const g=n.theme.text;g!==void 0&&a!==i&&cG(0,a,i,f,g);const p=t.__style,x=this.__style;return p!==x&&(r.style.cssText=x),!1}static importDOM(){return{"#text":()=>({conversion:Soe,priority:0}),b:()=>({conversion:boe,priority:0}),code:()=>({conversion:Au,priority:0}),em:()=>({conversion:Au,priority:0}),i:()=>({conversion:Au,priority:0}),mark:()=>({conversion:Au,priority:0}),s:()=>({conversion:Au,priority:0}),span:()=>({conversion:woe,priority:0}),strong:()=>({conversion:Au,priority:0}),sub:()=>({conversion:Au,priority:0}),sup:()=>({conversion:Au,priority:0}),u:()=>({conversion:Au,priority:0})}}static importJSON(t){return Ns().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style)}exportDOM(t){let{element:r}=super.exportDOM(t);return as(r)||Mt(132),r.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?r.style.textTransform="lowercase":this.hasFormat("uppercase")?r.style.textTransform="uppercase":this.hasFormat("capitalize")&&(r.style.textTransform="capitalize"),this.hasFormat("bold")&&(r=sb(r,"b")),this.hasFormat("italic")&&(r=sb(r,"i")),this.hasFormat("strikethrough")&&(r=sb(r,"s")),this.hasFormat("underline")&&(r=sb(r,"u")),{element:r}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(t,r){}setFormat(t){const r=this.getWritable();return r.__format=typeof t=="string"?Yh[t]:t,r}setDetail(t){const r=this.getWritable();return r.__detail=typeof t=="string"?Gie[t]:t,r}setStyle(t){const r=this.getWritable();return r.__style=t,r}toggleFormat(t){const r=f_(this.getFormat(),t,null);return this.setFormat(r)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const r=qie[t];if(this.__mode===r)return this;const n=this.getWritable();return n.__mode=r,n}setTextContent(t){if(this.__text===t)return this;const r=this.getWritable();return r.__text=t,r}select(t,r){ni();let n=t,s=r;const a=Xt(),i=this.getTextContent(),o=this.__key;if(typeof i=="string"){const l=i.length;n===void 0&&(n=l),s===void 0&&(s=l)}else n=0,s=0;if(!Ot(a))return hG(o,n,o,s,"text","text");{const l=nf();l!==a.anchor.key&&l!==a.focus.key||si(o),a.setTextNodeRange(this,n,this,s)}return a}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,r,n,s){const a=this.getWritable(),i=a.__text,o=n.length;let l=t;l<0&&(l=o+l,l<0&&(l=0));const u=Xt();if(s&&Ot(u)){const f=t+o;u.setTextNodeRange(a,f,a,f)}const d=i.slice(0,l)+n+i.slice(l+r);return a.__text=d,a}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){ni();const r=this.getLatest(),n=r.getTextContent();if(n==="")return[];const s=r.__key,a=nf(),i=n.length;t.sort(((j,O)=>j-O)),t.push(i);const o=[],l=t.length;for(let j=0,O=0;j<i&&O<=l;O++){const R=t[O];R>j&&(o.push(n.slice(j,R)),j=R)}const u=o.length;if(u===1)return[r];const d=o[0],f=r.getParent();let g;const p=r.getFormat(),x=r.getStyle(),y=r.__detail;let v=!1,T=null,_=null;const b=Xt();if(Ot(b)){const[j,O]=b.isBackward()?[b.focus,b.anchor]:[b.anchor,b.focus];j.type==="text"&&j.key===s&&(T=j),O.type==="text"&&O.key===s&&(_=O)}r.isSegmented()?(g=Ns(d),g.__format=p,g.__style=x,g.__detail=y,g.__state=SR(r,g),v=!0):g=r.setTextContent(d);const E=[g];for(let j=1;j<u;j++){const O=Ns(o[j]);O.__format=p,O.__style=x,O.__detail=y,O.__state=SR(r,O);const R=O.__key;a===s&&si(R),E.push(O)}const k=T?T.offset:null,A=_?_.offset:null;let P=0;for(const j of E){if(!T&&!_)break;const O=P+j.getTextContentSize();if(T!==null&&k!==null&&k<=O&&k>=P&&(T.set(j.getKey(),k-P,"text"),k<O&&(T=null)),_!==null&&A!==null&&A<=O&&A>=P){_.set(j.getKey(),A-P,"text");break}P=O}if(f!==null){(function(R){const M=R.getPreviousSibling(),G=R.getNextSibling();M!==null&&h_(M),G!==null&&h_(G)})(this);const j=f.getWritable(),O=this.getIndexWithinParent();v?(j.splice(O,0,E),this.remove()):j.splice(O,1,E),Ot(b)&&c_(b,f,O,u-1)}return E}mergeWithSibling(t){const r=t===this.getPreviousSibling();r||t===this.getNextSibling()||Mt(50);const n=this.__key,s=t.__key,a=this.__text,i=a.length;nf()===s&&si(n);const o=Xt();if(Ot(o)){const f=o.anchor,g=o.focus;f!==null&&f.key===s&&HR(f,r,n,t,i),g!==null&&g.key===s&&HR(g,r,n,t,i)}const l=t.__text,u=r?l+a:a+l;this.setTextContent(u);const d=this.getWritable();return t.remove(),d}isTextEntity(){return!1}}function woe(e){return{forChild:_5(e.style),node:null}}function boe(e){const t=e,r=t.style.fontWeight==="normal";return{forChild:_5(t.style,r?void 0:"bold"),node:null}}const DR=new WeakMap;function _oe(e){if(!as(e))return!1;if(e.nodeName==="PRE")return!0;const t=e.style.whiteSpace;return typeof t=="string"&&t.startsWith("pre")}function Soe(e){const t=e;e.parentElement===null&&Mt(129);let r=t.textContent||"";if((function(n){let s,a=n.parentNode;const i=[n];for(;a!==null&&(s=DR.get(a))===void 0&&!_oe(a);)i.push(a),a=a.parentNode;const o=s===void 0?a:s;for(let l=0;l<i.length;l++)DR.set(i[l],o);return o})(t)!==null){const n=r.split(/(\r?\n|\t)/),s=[],a=n.length;for(let i=0;i<a;i++){const o=n[i];o===`
`||o===`\r
`?s.push(qc()):o==="	"?s.push(rm()):o!==""&&s.push(Ns(o))}return{node:s}}if(r=r.replace(/\r/g,"").replace(/[ \t\n]+/g," "),r==="")return{node:null};if(r[0]===" "){let n=t,s=!0;for(;n!==null&&(n=IR(n,!1))!==null;){const a=n.textContent||"";if(a.length>0){/[ \t\n]$/.test(a)&&(r=r.slice(1)),s=!1;break}}s&&(r=r.slice(1))}if(r[r.length-1]===" "){let n=t,s=!0;for(;n!==null&&(n=IR(n,!0))!==null;)if((n.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){s=!1;break}s&&(r=r.slice(0,r.length-1))}return r===""?{node:null}:{node:Ns(r)}}function IR(e,t){let r=e;for(;;){let n;for(;(n=t?r.nextSibling:r.previousSibling)===null;){const a=r.parentElement;if(a===null)return null;r=a}if(r=n,as(r)){const a=r.style.display;if(a===""&&!PA(r)||a!==""&&!a.startsWith("inline"))return null}let s=r;for(;(s=t?r.firstChild:r.lastChild)!==null;)r=s;if(rd(r))return r;if(r.nodeName==="BR")return null}}const koe={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Au(e){const t=koe[e.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:_5(e.style,t),node:null}}function Ns(e=""){return Ji(new Af(e))}function Yt(e){return e instanceof Af}function _5(e,t){const r=e.fontWeight,n=e.textDecoration.split(" "),s=r==="700"||r==="bold",a=n.includes("line-through"),i=e.fontStyle==="italic",o=n.includes("underline"),l=e.verticalAlign;return u=>(Yt(u)&&(s&&!u.hasFormat("bold")&&u.toggleFormat("bold"),a&&!u.hasFormat("strikethrough")&&u.toggleFormat("strikethrough"),i&&!u.hasFormat("italic")&&u.toggleFormat("italic"),o&&!u.hasFormat("underline")&&u.toggleFormat("underline"),l!=="sub"||u.hasFormat("subscript")||u.toggleFormat("subscript"),l!=="super"||u.hasFormat("superscript")||u.toggleFormat("superscript"),t&&!u.hasFormat(t)&&u.toggleFormat(t)),u)}class y1 extends Af{static getType(){return"tab"}static clone(t){return new y1(t.__key)}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}createDOM(t){const r=super.createDOM(t),n=sp(t.theme,"tab");return n!==void 0&&r.classList.add(...n),r}static importJSON(t){return rm().updateFromJSON(t)}setTextContent(t){return t!=="	"&&t!==""&&Mt(126),super.setTextContent("	")}spliceText(t,r,n,s){return n===""&&r===0||n==="	"&&r===1||Mt(286),this}setDetail(t){return t!==2&&Mt(127),this}setMode(t){return t!=="normal"&&Mt(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function rm(){return Ji(new y1)}function z2(e){return e instanceof y1}class Toe{constructor(t,r,n){this._selection=null,this.key=t,this.offset=r,this.type=n}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){return this.key===t.key?this.offset<t.offset:RG(fl(Yu(this,"next")),fl(Yu(t,"next")))<0}getNode(){const t=aa(this.key);return t===null&&Mt(20),t}set(t,r,n,s){const a=this._selection,i=this.key;s&&this.key===t&&this.offset===r&&this.type===n||(this.key=t,this.offset=r,this.type=n,x1()||(nf()===i&&si(t),a!==null&&(a.setCachedNodes(null),a.dirty=!0)))}}function Kc(e,t,r){return new Toe(e,t,r)}function cT(e,t){let r=t.__key,n=e.offset,s="element";if(Yt(t)){s="text";const a=t.getTextContentSize();n>a&&(n=a)}else if(!wt(t)){const a=t.getNextSibling();if(Yt(a))r=a.__key,n=0,s="text";else{const i=t.getParent();i&&(r=i.__key,n=t.getIndexWithinParent()+1)}}e.set(r,n,s)}function MR(e,t){if(wt(t)){const r=t.getLastDescendant();wt(r)||Yt(r)?cT(e,r):cT(e,t)}else cT(e,t)}class H2{constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!mi(t))return!1;const r=this._nodes,n=t._nodes;return r.size===n.size&&Array.from(r).every((s=>n.has(s)))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new H2(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const r=this.getNodes(),n=r.length,s=r[n-1];let a;if(Yt(s))a=s.select();else{const i=s.getIndexWithinParent()+1;a=s.getParentOrThrow().select(i,i)}a.insertNodes(t);for(let i=0;i<n;i++)r[i].remove()}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=this._nodes,n=[];for(const s of r){const a=aa(s);a!==null&&n.push(a)}return x1()||(this._cachedNodes=n),n}getTextContent(){const t=this.getNodes();let r="";for(let n=0;n<t.length;n++)r+=t[n].getTextContent();return r}deleteNodes(){const t=this.getNodes();if((Xt()||nm())===this&&t[0]){const r=oi(t[0],"next");cle(wf(r,r))}for(const r of t)r.remove()}}function Ot(e){return e instanceof y0}class y0{constructor(t,r,n,s){this.anchor=t,this.focus=r,t._selection=this,r._selection=this,this._cachedNodes=null,this.format=n,this.style=s,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!Ot(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=(function(n){const s=[],[a,i]=n.getTextSlices();a&&s.push(a.caret.origin);const o=new Set,l=new Set;for(const u of n)if(Hc(u)){const{origin:d}=u;s.length===0?o.add(d):(l.add(d),s.push(d))}else{const{origin:d}=u;wt(d)&&l.has(d)||s.push(d)}if(i&&s.push(i.caret.origin),r0(n.focus)&&wt(n.focus.origin)&&n.focus.getNodeAtCaret()===null)for(let u=vl(n.focus.origin,"previous");Hc(u)&&o.has(u.origin)&&!u.origin.isEmpty()&&u.origin.is(s[s.length-1]);u=H5(u))o.delete(u.origin),s.pop();for(;s.length>1;){const u=s[s.length-1];if(!wt(u)||l.has(u)||u.isEmpty()||o.has(u))break;s.pop()}if(s.length===0&&n.isCollapsed()){const u=fl(n.anchor),d=fl(n.anchor.getFlipped()),f=p=>df(p)?p.origin:p.getNodeAtCaret(),g=f(u)||f(d)||(n.anchor.getNodeAtCaret()?u.origin:d.origin);s.push(g)}return s})(MG(uD(this),"next"));return x1()||(this._cachedNodes=r),r}setTextNodeRange(t,r,n,s){this.anchor.set(t.__key,r,"text"),this.focus.set(n.__key,s,"text")}getTextContent(){const t=this.getNodes();if(t.length===0)return"";const r=t[0],n=t[t.length-1],s=this.anchor,a=this.focus,i=s.isBefore(a),[o,l]=kA(this);let u="",d=!0;for(let f=0;f<t.length;f++){const g=t[f];if(wt(g)&&!g.isInline())d||(u+=`
`),d=!g.isEmpty();else if(d=!1,Yt(g)){let p=g.getTextContent();g===r?g===n?s.type==="element"&&a.type==="element"&&a.offset!==s.offset||(p=o<l?p.slice(o,l):p.slice(l,o)):p=i?p.slice(o):p.slice(l):g===n&&(p=i?p.slice(0,l):p.slice(0,o)),u+=p}else!xn(g)&&!$u(g)||g===n&&this.isCollapsed()||(u+=g.getTextContent())}return u}applyDOMRange(t){const r=bs(),n=r.getEditorState()._selection,s=fG(t.startContainer,t.startOffset,t.endContainer,t.endOffset,r,n);if(s===null)return;const[a,i]=s;this.anchor.set(a.key,a.offset,a.type,!0),this.focus.set(i.key,i.offset,i.type,!0),r_(this)}clone(){const t=this.anchor,r=this.focus;return new y0(Kc(t.key,t.offset,t.type),Kc(r.key,r.offset,r.type),this.format,this.style)}toggleFormat(t){this.format=f_(this.format,t,null),this.dirty=!0}setFormat(t){this.format=t,this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const r=Yh[t];return!!(this.format&r)}insertRawText(t){const r=t.split(/(\r?\n|\t)/),n=[],s=r.length;for(let a=0;a<s;a++){const i=r[a];i===`
`||i===`\r
`?n.push(qc()):i==="	"?n.push(rm()):n.push(Ns(i))}this.insertNodes(n)}insertText(t){const r=this.anchor,n=this.focus,s=this.format,a=this.style;let i=r,o=n;!this.isCollapsed()&&n.isBefore(r)&&(i=n,o=r),i.type==="element"&&(function(v,T,_,b){const E=v.getNode(),k=E.getChildAtIndex(v.offset),A=Ns();if(A.setFormat(_),A.setStyle(b),A5(k))k.splice(0,0,[A]);else{const P=wa(E)?ss().append(A):A;k===null?E.append(P):k.insertBefore(P)}v.is(T)&&T.set(A.__key,0,"text"),v.set(A.__key,0,"text")})(i,o,s,a),o.type==="element"&&s0(o,fl(Yu(o,"next")));const l=i.offset;let u=o.offset;const d=this.getNodes(),f=d.length;let g=d[0];Yt(g)||Mt(26);const p=g.getTextContent().length,x=g.getParentOrThrow();let y=d[f-1];if(f===1&&o.type==="element"&&(u=p,o.set(i.key,u,"text")),this.isCollapsed()&&l===p&&(Ou(g)||!g.canInsertTextAfter()||!x.canInsertTextAfter()&&g.getNextSibling()===null)){let v=g.getNextSibling();if(Yt(v)&&v.canInsertTextBefore()&&!Ou(v)||(v=Ns(),v.setFormat(s),v.setStyle(a),x.canInsertTextAfter()?g.insertAfter(v):x.insertAfter(v)),v.select(0,0),g=v,t!=="")return void this.insertText(t)}else if(this.isCollapsed()&&l===0&&(Ou(g)||!g.canInsertTextBefore()||!x.canInsertTextBefore()&&g.getPreviousSibling()===null)){let v=g.getPreviousSibling();if(Yt(v)&&!Ou(v)||(v=Ns(),v.setFormat(s),x.canInsertTextBefore()?g.insertBefore(v):x.insertBefore(v)),v.select(),g=v,t!=="")return void this.insertText(t)}else if(g.isSegmented()&&l!==p){const v=Ns(g.getTextContent());v.setFormat(s),g.replace(v),g=v}else if(!this.isCollapsed()&&t!==""){const v=y.getParent();if(!x.canInsertTextBefore()||!x.canInsertTextAfter()||wt(v)&&(!v.canInsertTextBefore()||!v.canInsertTextAfter()))return this.insertText(""),dG(this.anchor,this.focus,null),void this.insertText(t)}if(f===1){if(Lh(g)){const b=Ns(t);return b.select(),void g.replace(b)}const v=g.getFormat(),T=g.getStyle();if(l!==u||v===s&&T===a){if(z2(g)){const b=Ns(t);return b.setFormat(s),b.setStyle(a),b.select(),void g.replace(b)}}else{if(g.getTextContent()!==""){const b=Ns(t);if(b.setFormat(s),b.setStyle(a),b.select(),l===0)g.insertBefore(b,!1);else{const[E]=g.splitText(l);E.insertAfter(b,!1)}return void(b.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length))}g.setFormat(s),g.setStyle(a)}const _=u-l;g=g.spliceText(l,_,t,!0),g.getTextContent()===""?g.remove():this.anchor.type==="text"&&(g.isComposing()?this.anchor.offset-=t.length:(this.format=v,this.style=T))}else{const v=new Set([...g.getParentKeys(),...y.getParentKeys()]),T=wt(g)?g:g.getParentOrThrow();let _=wt(y)?y:y.getParentOrThrow(),b=y;if(!T.is(_)&&_.isInline())do b=_,_=_.getParentOrThrow();while(_.isInline());if(o.type==="text"&&(u!==0||y.getTextContent()==="")||o.type==="element"&&y.getIndexWithinParent()<u)if(Yt(y)&&!Lh(y)&&u!==y.getTextContentSize()){if(y.isSegmented()){const j=Ns(y.getTextContent());y.replace(j),y=j}wa(o.getNode())||o.type!=="text"||(y=y.spliceText(0,u,"")),v.add(y.__key)}else{const j=y.getParentOrThrow();j.canBeEmpty()||j.getChildrenSize()!==1?y.remove():j.remove()}else v.add(y.__key);const E=_.getChildren(),k=new Set(d),A=T.is(_),P=T.isInline()&&g.getNextSibling()===null?T:g;for(let j=E.length-1;j>=0;j--){const O=E[j];if(O.is(g)||wt(O)&&O.isParentOf(g))break;O.isAttached()&&(!k.has(O)||O.is(b)?A||P.insertAfter(O,!1):O.remove())}if(!A){let j=_,O=null;for(;j!==null;){const R=j.getChildren(),M=R.length;(M===0||R[M-1].is(O))&&(v.delete(j.__key),O=j),j=j.getParent()}}if(Lh(g))if(l===p)g.select();else{const j=Ns(t);j.select(),g.replace(j)}else g=g.spliceText(l,p-l,t,!0),g.getTextContent()===""?g.remove():g.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);for(let j=1;j<f;j++){const O=d[j],R=O.__key;v.has(R)||O.remove()}}}removeText(){const t=Xt()===this;Hb(this,ule(uD(this))),t&&Xt()!==this&&li(this)}formatText(t,r=null){if(this.isCollapsed())return this.toggleFormat(t),void si(null);const n=this.getNodes(),s=[];for(const E of n)Yt(E)&&s.push(E);const a=E=>{n.forEach((k=>{if(wt(k)){const A=k.getFormatFlags(t,E);k.setTextFormat(A)}}))},i=s.length;if(i===0)return this.toggleFormat(t),si(null),void a(r);const o=this.anchor,l=this.focus,u=this.isBackward(),d=u?l:o,f=u?o:l;let g=0,p=s[0],x=d.type==="element"?0:d.offset;if(d.type==="text"&&x===p.getTextContentSize()&&(g=1,p=s[1],x=0),p==null)return;const y=p.getFormatFlags(t,r);a(y);const v=i-1;let T=s[v];const _=f.type==="text"?f.offset:T.getTextContentSize();if(p.is(T)){if(x===_)return;if(Ou(p)||x===0&&_===p.getTextContentSize())p.setFormat(y);else{const E=p.splitText(x,_),k=x===0?E[0]:E[1];k.setFormat(y),d.type==="text"&&d.set(k.__key,0,"text"),f.type==="text"&&f.set(k.__key,_-x,"text")}return void(this.format=y)}x===0||Ou(p)||([,p]=p.splitText(x),x=0),p.setFormat(y);const b=T.getFormatFlags(t,y);_>0&&(_===T.getTextContentSize()||Ou(T)||([T]=T.splitText(_)),T.setFormat(b));for(let E=g+1;E<v;E++){const k=s[E],A=k.getFormatFlags(t,b);k.setFormat(A)}d.type==="text"&&d.set(p.__key,x,"text"),f.type==="text"&&f.set(T.__key,_,"text"),this.format=y|b}insertNodes(t){if(t.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const x=Xt();return Ot(x)||Mt(134),x.insertNodes(t)}const r=(this.isBackward()?this.focus:this.anchor).getNode(),n=gT(r,dl),s=t[t.length-1];if(wt(n)&&"__language"in n){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const x=uT(this);n.splice(x,0,t),s.selectEnd()}return}if(!t.some((x=>(wt(x)||xn(x))&&!x.isInline()))){wt(n)||Mt(211,r.constructor.name,r.getType());const x=uT(this);return n.splice(x,0,t),void s.selectEnd()}const a=(function(x){const y=ss();let v=null;for(let T=0;T<x.length;T++){const _=x[T],b=$u(_);if(b||xn(_)&&_.isInline()||wt(_)&&_.isInline()||Yt(_)||_.isParentRequired()){if(v===null&&(v=_.createParentElementNode(),y.append(v),b))continue;v!==null&&v.append(_)}else y.append(_),v=null}return y})(t),i=a.getLastDescendant(),o=a.getChildren(),l=!wt(n)||!n.isEmpty()?this.insertParagraph():null,u=o[o.length-1];let d=o[0];var f;wt(f=d)&&dl(f)&&!f.isEmpty()&&wt(n)&&(!n.isEmpty()||n.canMergeWhenEmpty())&&(wt(n)||Mt(211,r.constructor.name,r.getType()),n.append(...d.getChildren()),d=o[1]),d&&(n===null&&Mt(212,r.constructor.name,r.getType()),(function(x,y,v){const T=y.getParentOrThrow().getLastChild();let _=y;const b=[y];for(;_!==T;)_.getNextSibling()||Mt(140),_=_.getNextSibling(),b.push(_);let E=x;for(const k of b)E=E.insertAfter(k)})(n,d));const g=gT(i,dl);l&&wt(g)&&(l.canMergeWhenEmpty()||dl(u))&&(g.append(...l.getChildren()),l.remove()),wt(n)&&n.isEmpty()&&n.remove(),i.selectEnd();const p=wt(n)?n.getLastChild():null;$u(p)&&g!==n&&p.remove()}insertParagraph(){if(this.anchor.key==="root"){const i=ss();return hs().splice(this.anchor.offset,0,[i]),i.select(),i}const t=uT(this),r=gT(this.anchor.getNode(),dl);wt(r)||Mt(213);const n=r.getChildAtIndex(t),s=n?[n,...n.getNextSiblings()]:[],a=r.insertNewAfter(this,!1);return a?(a.append(...s),a.selectStart(),a):null}insertLineBreak(t){const r=qc();if(this.insertNodes([r]),t){const n=r.getParentOrThrow(),s=r.getIndexWithinParent();n.select(s,s)}}extract(){const t=this.getNodes(),r=t.length,n=r-1,s=this.anchor,a=this.focus;let i=t[0],o=t[n];const[l,u]=kA(this);if(r===0)return[];if(r===1){if(Yt(i)&&!this.isCollapsed()){const f=l>u?u:l,g=l>u?l:u,p=i.splitText(f,g),x=f===0?p[0]:p[1];return x!=null?[x]:[]}return[i]}const d=s.isBefore(a);if(Yt(i)){const f=d?l:u;f===i.getTextContentSize()?t.shift():f!==0&&([,i]=i.splitText(f),t[0]=i)}if(Yt(o)){const f=o.getTextContent().length,g=d?u:l;g===0?t.pop():g!==f&&([o]=o.splitText(g),t[n]=o)}return t}modify(t,r,n){if(GR(this,t,r,n))return;const s=t==="move",a=bs(),i=rc(xl(a));if(!i)return;const o=a._blockCursorElement,l=a._rootElement,u=this.focus.getNode();if(l===null||o===null||!wt(u)||u.isInline()||u.canBeEmpty()||AA(o,a,l),this.dirty){let d=Zh(a,this.anchor.key),f=Zh(a,this.focus.key);this.anchor.type==="text"&&(d=wp(d)),this.focus.type==="text"&&(f=wp(f)),d&&f&&gG(i,d,this.anchor.offset,f,this.focus.offset)}if((function(d,f,g,p){d.modify(f,g,p)})(i,t,r?"backward":"forward",n),i.rangeCount>0){const d=i.getRangeAt(0),f=this.anchor.getNode(),g=wa(f)?f:Koe(f);if(this.applyDOMRange(d),this.dirty=!0,!s){const p=this.getNodes(),x=[];let y=!1;for(let v=0;v<p.length;v++){const T=p[v];NA(T,g)?x.push(T):y=!0}if(y&&x.length>0)if(r){const v=x[0];wt(v)?v.selectStart():v.getParentOrThrow().selectStart()}else{const v=x[x.length-1];wt(v)?v.selectEnd():v.getParentOrThrow().selectEnd()}i.anchorNode===d.startContainer&&i.anchorOffset===d.startOffset||(function(v){const T=v.focus,_=v.anchor,b=_.key,E=_.offset,k=_.type;_.set(T.key,T.offset,T.type,!0),T.set(b,E,k,!0)})(this)}}n==="lineboundary"&&GR(this,t,r,n,"decorators")}forwardDeletion(t,r,n){if(!n&&(t.type==="element"&&wt(r)&&t.offset===r.getChildrenSize()||t.type==="text"&&t.offset===r.getTextContentSize())){const s=r.getParent(),a=r.getNextSibling()||(s===null?null:s.getNextSibling());if(wt(a)&&a.isShadowRoot())return!0}return!1}deleteCharacter(t){const r=this.isCollapsed();if(this.isCollapsed()){const n=this.anchor;let s=n.getNode();if(this.forwardDeletion(n,s,t))return;const a=V5(Yu(n,t?"previous":"next"));if(a.getTextSlices().every((o=>o===null||o.distance===0))){let o={type:"initial"};for(const l of a.iterNodeCarets("shadowRoot"))if(Hc(l)){if(!l.origin.isInline()){if(l.origin.isShadowRoot()){if(o.type==="merge-block")break;if(wt(a.anchor.origin)&&a.anchor.origin.isEmpty()){const u=fl(l);Hb(this,wf(u,u)),a.anchor.origin.remove()}return}o.type!=="merge-next-block"&&o.type!=="merge-block"||(o={block:o.block,caret:l,type:"merge-block"})}}else{if(o.type==="merge-block")break;if(r0(l)){if(wt(l.origin)){if(l.origin.isInline()){if(!l.origin.isParentOf(a.anchor.origin))break}else o={block:l.origin,type:"merge-next-block"};continue}if(xn(l.origin)){if(!l.origin.isIsolated())if(o.type==="merge-next-block"&&(l.origin.isKeyboardSelectable()||!l.origin.isInline())&&wt(a.anchor.origin)&&a.anchor.origin.isEmpty()){a.anchor.origin.remove();const u=S5();u.add(l.origin.getKey()),li(u)}else l.origin.remove();return}break}}if(o.type==="merge-block"){const{caret:l,block:u}=o;return Hb(this,wf(!l.origin.isEmpty()&&u.isEmpty()?K5(oi(u,l.direction)):a.anchor,l)),this.removeText()}}const i=this.focus;if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&n.offset===0&&BR(this,n.getNode()))return}else{const o=i.type==="text"?i.getNode():null;if(s=n.type==="text"?n.getNode():null,o!==null&&o.isSegmented()){const l=i.offset,u=o.getTextContentSize();if(o.is(s)||t&&l!==u||!t&&l!==0)return void $R(o,t,l)}else if(s!==null&&s.isSegmented()){const l=n.offset,u=s.getTextContentSize();if(s.is(o)||t&&l!==0||!t&&l!==u)return void $R(s,t,l)}(function(l,u){const d=l.anchor,f=l.focus,g=d.getNode(),p=f.getNode();if(g===p&&d.type==="text"&&f.type==="text"){const x=d.offset,y=f.offset,v=x<y,T=v?x:y,_=v?y:x,b=_-1;T!==b&&(function(E){return!(NG(E)||Coe(E))})(g.getTextContent().slice(T,_))&&(u?f.set(f.key,b,f.type):d.set(d.key,b,d.type))}})(this,t)}}if(this.removeText(),t&&!r&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const n=this.anchor.getNode();n.isEmpty()&&wa(n.getParent())&&n.getPreviousSibling()===null&&BR(this,n)}}deleteLine(t){this.isCollapsed()&&this.modify("extend",t,"lineboundary"),this.isCollapsed()?this.deleteCharacter(t):this.removeText()}deleteWord(t){if(this.isCollapsed()){const r=this.anchor,n=r.getNode();if(this.forwardDeletion(r,n,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function mi(e){return e instanceof H2}function LR(e){const t=e.offset;if(e.type==="text")return t;const r=e.getNode();return t===r.getChildrenSize()?r.getTextContent().length:0}function kA(e){const t=e.getStartEndPoints();if(t===null)return[0,0];const[r,n]=t;return r.type==="element"&&n.type==="element"&&r.key===n.key&&r.offset===n.offset?[0,0]:[LR(r),LR(n)]}function BR(e,t){for(let r=t;r;r=r.getParent()){if(wt(r)){if(r.collapseAtStart(e))return!0;if(Xi(r))break}if(r.getPreviousSibling())break}return!1}const Coe=(()=>{try{const e=new RegExp("\\p{Emoji}","u"),t=e.test.bind(e);if(t("")&&t("#")&&t(""))return t}catch{}return()=>!1})();function $R(e,t,r){const n=e,s=n.getTextContent().split(/(?=\s)/g),a=s.length;let i=0,o=0;for(let u=0;u<a;u++){const d=u===a-1;if(o=i,i+=s[u].length,t&&i===r||i>r||d){s.splice(u,1),d&&(o=void 0);break}}const l=s.join("").trim();l===""?n.remove():(n.setTextContent(l),n.select(o,o))}function UR(e,t,r,n){let s,a=t;if(as(e)){let i=!1;const o=e.childNodes,l=o.length,u=n._blockCursorElement;a===l&&(i=!0,a=l-1);let d=o[a],f=!1;if(d===u)d=o[a+1],f=!0;else if(u!==null){const g=u.parentNode;e===g&&t>Array.prototype.indexOf.call(g.children,u)&&a--}if(s=Kg(d),Yt(s))a=ff(s,i?"next":"previous");else{let g=Kg(e);if(g===null)return null;if(wt(g)){const p=n.getElementByKey(g.getKey());p===null&&Mt(214),[g,a]=g.getDOMSlot(p).resolveChildIndex(g,p,e,t),wt(g)||Mt(215),i&&a>=g.getChildrenSize()&&(a=Math.max(0,g.getChildrenSize()-1));let y=g.getChildAtIndex(a);if(wt(y)&&(function(v,T,_){const b=v.getParent();return _===null||b===null||!b.canBeEmpty()||b!==_.getNode()})(y,0,r)){const v=i?y.getLastDescendant():y.getFirstDescendant();v===null?g=y:(y=v,g=wt(y)?y:y.getParentOrThrow()),a=0}Yt(y)?(s=y,g=null,a=ff(y,i?"next":"previous")):y!==g&&i&&!f&&(wt(g)||Mt(216),a=Math.min(g.getChildrenSize(),a+1))}else{const p=g.getIndexWithinParent();a=t===0&&xn(g)&&Kg(e)===g?p:p+1,g=g.getParentOrThrow()}if(wt(g))return Kc(g.__key,a,"element")}}else s=Kg(e);return Yt(s)?Kc(s.__key,ff(s,a,"clamp"),"text"):null}function WR(e,t,r){const n=e.offset,s=e.getNode();if(n===0){const a=s.getPreviousSibling(),i=s.getParent();if(t){if((r||!t)&&a===null&&wt(i)&&i.isInline()){const o=i.getPreviousSibling();Yt(o)&&e.set(o.__key,o.getTextContent().length,"text")}}else wt(a)&&!r&&a.isInline()?e.set(a.__key,a.getChildrenSize(),"element"):Yt(a)&&e.set(a.__key,a.getTextContent().length,"text")}else if(n===s.getTextContent().length){const a=s.getNextSibling(),i=s.getParent();if(t&&wt(a)&&a.isInline())e.set(a.__key,0,"element");else if((r||t)&&a===null&&wt(i)&&i.isInline()&&!i.canInsertTextAfter()){const o=i.getNextSibling();Yt(o)&&e.set(o.__key,0,"text")}}}function dG(e,t,r){if(e.type==="text"&&t.type==="text"){const n=e.isBefore(t),s=e.is(t);WR(e,n,s),WR(t,!n,s),s&&t.set(e.key,e.offset,e.type);const a=bs();if(a.isComposing()&&a._compositionKey!==e.key&&Ot(r)){const i=r.anchor,o=r.focus;e.set(i.key,i.offset,i.type,!0),t.set(o.key,o.offset,o.type,!0)}}}function fG(e,t,r,n,s,a){if(e===null||r===null||!b1(s,e,r))return null;const i=UR(e,t,Ot(a)?a.anchor:null,s);if(i===null)return null;const o=UR(r,n,Ot(a)?a.focus:null,s);if(o===null)return null;if(i.type==="element"&&o.type==="element"){const l=Kg(e),u=Kg(r);if(xn(l)&&xn(u))return null}return dG(i,o,a),[i,o]}function TA(e){return wt(e)&&!e.isInline()}function hG(e,t,r,n,s,a){const i=jf(),o=new y0(Kc(e,t,s),Kc(r,n,a),0,"");return o.dirty=!0,i._selection=o,o}function G2(){const e=Kc("root",0,"element"),t=Kc("root",0,"element");return new y0(e,t,0,"")}function S5(){return new H2(new Set)}function k5(e,t,r,n){const s=r._window;if(s===null)return null;const a=n||s.event,i=a?a.type:void 0,o=i==="selectionchange",l=!cA&&(o||i==="beforeinput"||i==="compositionstart"||i==="compositionend"||i==="click"&&a&&a.detail===3||i==="drop"||i===void 0);let u,d,f,g;if(Ot(e)&&!l)return e.clone();if(t===null)return null;if(u=t.anchorNode,d=t.focusNode,f=t.anchorOffset,g=t.focusOffset,o&&Ot(e)&&!b1(r,u,d))return e.clone();const p=fG(u,f,d,g,r,e);if(p===null)return null;const[x,y]=p;return new y0(x,y,Ot(e)?e.format:0,Ot(e)?e.style:"")}function Xt(){return jf()._selection}function nm(){return bs()._editorState._selection}function c_(e,t,r,n=1){const s=e.anchor,a=e.focus,i=s.getNode(),o=a.getNode();if(!t.is(i)&&!t.is(o))return;const l=t.__key;if(e.isCollapsed()){const u=s.offset;if(r<=u&&n>0||r<u&&n<0){const d=Math.max(0,u+n);s.set(l,d,"element"),a.set(l,d,"element"),zR(e)}}else{const u=e.isBackward(),d=u?a:s,f=d.getNode(),g=u?s:a,p=g.getNode();if(t.is(f)){const x=d.offset;(r<=x&&n>0||r<x&&n<0)&&d.set(l,Math.max(0,x+n),"element")}if(t.is(p)){const x=g.offset;(r<=x&&n>0||r<x&&n<0)&&g.set(l,Math.max(0,x+n),"element")}}zR(e)}function zR(e){const t=e.anchor,r=t.offset,n=e.focus,s=n.offset,a=t.getNode(),i=n.getNode();if(e.isCollapsed()){if(!wt(a))return;const o=a.getChildrenSize(),l=r>=o,u=l?a.getChildAtIndex(o-1):a.getChildAtIndex(r);if(Yt(u)){let d=0;l&&(d=u.getTextContentSize()),t.set(u.__key,d,"text"),n.set(u.__key,d,"text")}}else{if(wt(a)){const o=a.getChildrenSize(),l=r>=o,u=l?a.getChildAtIndex(o-1):a.getChildAtIndex(r);if(Yt(u)){let d=0;l&&(d=u.getTextContentSize()),t.set(u.__key,d,"text")}}if(wt(i)){const o=i.getChildrenSize(),l=s>=o,u=l?i.getChildAtIndex(o-1):i.getChildAtIndex(s);if(Yt(u)){let d=0;l&&(d=u.getTextContentSize()),n.set(u.__key,d,"text")}}}}function u_(e,t,r,n,s){let a=null,i=0,o=null;n!==null?(a=n.__key,Yt(n)?(i=n.getTextContentSize(),o="text"):wt(n)&&(i=n.getChildrenSize(),o="element")):s!==null&&(a=s.__key,Yt(s)?o="text":wt(s)&&(o="element")),a!==null&&o!==null?e.set(a,i,o):(i=t.getIndexWithinParent(),i===-1&&(i=r.getChildrenSize()),e.set(r.__key,i,"element"))}function HR(e,t,r,n,s){e.type==="text"?e.set(r,e.offset+(t?0:s),"text"):e.offset>n.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function gG(e,t,r,n,s){try{e.setBaseAndExtent(t,r,n,s)}catch{}}function Eoe(e,t,r,n,s,a,i){const o=n.anchorNode,l=n.focusNode,u=n.anchorOffset,d=n.focusOffset,f=document.activeElement;if(s.has(wG)&&f!==a||f!==null&&O5(f))return;if(!Ot(t))return void(e!==null&&b1(r,o,l)&&n.removeAllRanges());const g=t.anchor,p=t.focus,x=g.key,y=p.key,v=Zh(r,x),T=Zh(r,y),_=g.offset,b=p.offset,E=t.format,k=t.style,A=t.isCollapsed();let P=v,j=T,O=!1;if(g.type==="text"){P=wp(v);const Y=g.getNode();O=Y.getFormat()!==E||Y.getStyle()!==k}else Ot(e)&&e.anchor.type==="text"&&(O=!0);var R,M,G,K,re;if(p.type==="text"&&(j=wp(T)),P!==null&&j!==null&&(A&&(e===null||O||Ot(e)&&(e.format!==E||e.style!==k))&&(R=E,M=k,G=_,K=x,re=performance.now(),nG=[R,M,G,K,re]),u!==_||d!==b||o!==P||l!==j||n.type==="Range"&&A||(f!==null&&a.contains(f)||a.focus({preventScroll:!0}),g.type==="element"))){if(gG(n,P,_,j,b),!s.has(Roe)&&t.isCollapsed()&&a!==null&&a===document.activeElement){const Y=Ot(t)&&t.anchor.type==="element"?P.childNodes[_]||null:n.rangeCount>0?n.getRangeAt(0):null;if(Y!==null){let ee;if(Y instanceof Text){const B=document.createRange();B.selectNode(Y),ee=B.getBoundingClientRect()}else ee=Y.getBoundingClientRect();(function(B,z,I){const W=OG(I),V=L5(W);if(W===null||V===null)return;let{top:L,bottom:H}=z,J=0,Q=0,ne=I;for(;ne!==null;){const Z=ne===W.body;if(Z)J=0,Q=xl(B).innerHeight;else{const ce=ne.getBoundingClientRect();J=ce.top,Q=ce.bottom}let se=0;if(L<J?se=-(J-L):H>Q&&(se=H-Q),se!==0)if(Z)V.scrollBy(0,se);else{const ce=ne.scrollTop;ne.scrollTop+=se;const he=ne.scrollTop-ce;L-=he,H-=he}if(Z)break;ne=_1(ne)}})(r,ee,a)}}bA=!0}}function Noe(e){let t=Xt()||nm();t===null&&(t=hs().selectEnd()),t.insertNodes(e)}function uT(e){let t=e;e.isCollapsed()||t.removeText();const r=Xt();Ot(r)&&(t=r),Ot(t)||Mt(161);const n=t.anchor;let s=n.getNode(),a=n.offset;for(;!dl(s);){const i=s;if([s,a]=Aoe(s,a),i.is(s))break}return a}function Aoe(e,t){const r=e.getParent();if(!r){const s=ss();return hs().append(s),s.select(),[hs(),0]}if(Yt(e)){const s=e.splitText(t);if(s.length===0)return[r,e.getIndexWithinParent()];const a=t===0?0:1;return[r,s[0].getIndexWithinParent()+a]}if(!wt(e)||t===0)return[r,e.getIndexWithinParent()];const n=e.getChildAtIndex(t);if(n){const s=new y0(Kc(e.__key,t,"element"),Kc(e.__key,t,"element"),0,""),a=e.insertNewAfter(s);a&&a.append(n,...n.getNextSiblings())}return[r,e.getIndexWithinParent()+1]}function GR(e,t,r,n,s="decorators-and-blocks"){if(t==="move"&&n==="character"&&!e.isCollapsed()){const[d,f]=r===e.isBackward()?[e.focus,e.anchor]:[e.anchor,e.focus];return f.set(d.key,d.offset,d.type),!0}const a=Yu(e.focus,r?"previous":"next"),i=n==="lineboundary",o=t==="move";let l=a,u=s==="decorators-and-blocks";if(!IG(l)){for(const d of l){u=!1;const{origin:f}=d;if(!xn(f)||f.isIsolated()||(l=d,!i||!f.isInline()))break}if(u)for(const d of V5(a).iterNodeCarets(t==="extend"?"shadowRoot":"root")){if(Hc(d))d.origin.isInline()||(l=d);else{if(wt(d.origin))continue;xn(d.origin)&&!d.origin.isInline()&&(l=d)}break}}if(l===a)return!1;if(o&&!i&&xn(l.origin)&&l.origin.isKeyboardSelectable()){const d=S5();return d.add(l.origin.getKey()),li(d),!0}return l=fl(l),o&&s0(e.anchor,l),s0(e.focus,l),u||!i}let Ra=null,Da=null,ho=!1,dT=!1,Wb=0;const VR={characterData:!0,childList:!0,subtree:!0};function x1(){return ho||Ra!==null&&Ra._readOnly}function ni(){ho&&Mt(13)}function pG(){Wb>99&&Mt(14)}function jf(){return Ra===null&&Mt(195,mG()),Ra}function bs(){return Da===null&&Mt(196,mG()),Da}function mG(){let e=0;const t=new Set,r=K2.version;if(typeof window<"u")for(const s of document.querySelectorAll("[contenteditable]")){const a=X2(s);if(F5(a))e++;else if(a){let i=String(a.constructor.version||"<0.17.1");i===r&&(i+=" (separately built, likely a bundler configuration issue)"),t.add(i)}}let n=` Detected on the page: ${e} compatible editor(s) with version ${r}`;return t.size&&(n+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),n}function joe(){return Da}function qR(e,t,r){const n=t.__type,s=_G(e,n);let a=r.get(n);a===void 0&&(a=Array.from(s.transforms),r.set(n,a));const i=a.length;for(let o=0;o<i&&(a[o](t),t.isAttached());o++);}function KR(e,t){return e!==void 0&&e.__key!==t&&e.isAttached()}function yG(e,t){if(!t)return;const r=e._updateTags;let n=t;Array.isArray(t)||(n=[t]);for(const s of n)r.add(s)}function Poe(e){return T5(e,bs()._nodes)}function T5(e,t){const r=e.type,n=t.get(r);n===void 0&&Mt(17,r);const s=n.klass;e.type!==s.getType()&&Mt(18,s.name);const a=s.importJSON(e),i=e.children;if(wt(a)&&Array.isArray(i))for(let o=0;o<i.length;o++){const l=T5(i[o],t);a.append(l)}return a}function XR(e,t,r){const n=Ra,s=ho,a=Da;Ra=t,ho=!0,Da=e;try{return r()}finally{Ra=n,ho=s,Da=a}}function Ru(e,t){const r=e._pendingEditorState,n=e._rootElement,s=e._headless||n===null;if(r===null)return;const a=e._editorState,i=a._selection,o=r._selection,l=e._dirtyType!==Xh,u=Ra,d=ho,f=Da,g=e._updating,p=e._observer;let x=null;if(e._pendingEditorState=null,e._editorState=r,!s&&l&&p!==null){Da=e,Ra=r,ho=!1,e._updating=!0;try{const A=e._dirtyType,P=e._dirtyElements,j=e._dirtyLeaves;p.disconnect(),x=aoe(a,r,e,A,P,j)}catch(A){if(A instanceof Error&&e._onError(A),dT)throw A;return bG(e,null,n,r),RH(e),e._dirtyType=vp,dT=!0,Ru(e,a),void(dT=!1)}finally{p.observe(n,VR),e._updating=g,Ra=u,ho=d,Da=f}}r._readOnly||(r._readOnly=!0);const y=e._dirtyLeaves,v=e._dirtyElements,T=e._normalizedNodes,_=e._updateTags,b=e._deferred;l&&(e._dirtyType=Xh,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),(function(A,P){const j=A._decorators;let O=A._pendingDecorators||j;const R=P._nodeMap;let M;for(M in O)R.has(M)||(O===j&&(O=CG(A)),delete O[M])})(e,r);const E=s?null:rc(xl(e));if(e._editable&&E!==null&&(l||o===null||o.dirty)&&n!==null&&!_.has(Doe)){Da=e,Ra=r;try{if(p!==null&&p.disconnect(),l||o===null||o.dirty){const A=e._blockCursorElement;A!==null&&AA(A,e,n),Eoe(i,o,e,E,_,n)}(function(A,P,j){let O=A._blockCursorElement;if(Ot(j)&&j.isCollapsed()&&j.anchor.type==="element"&&P.contains(document.activeElement)){const R=j.anchor,M=R.getNode(),G=R.offset;let K=!1,re=null;if(G===M.getChildrenSize())hT(M.getChildAtIndex(G-1))&&(K=!0);else{const Y=M.getChildAtIndex(G);if(Y!==null&&hT(Y)){const ee=Y.getPreviousSibling();(ee===null||hT(ee))&&(K=!0,re=A.getElementByKey(Y.__key))}}if(K){const Y=A.getElementByKey(M.__key);return O===null&&(A._blockCursorElement=O=(function(ee){const B=ee.theme,z=document.createElement("div");z.contentEditable="false",z.setAttribute("data-lexical-cursor","true");let I=B.blockCursor;if(I!==void 0){if(typeof I=="string"){const W=AH(I);I=B.blockCursor=W}I!==void 0&&z.classList.add(...I)}return z})(A._config)),P.style.caretColor="transparent",void(re===null?Y.appendChild(O):Y.insertBefore(O,re))}}O!==null&&AA(O,A,P)})(e,n,o)}finally{p!==null&&p.observe(n,VR),Da=f,Ra=u}}x!==null&&(function(A,P,j,O,R){const M=Array.from(A._listeners.mutation),G=M.length;for(let K=0;K<G;K++){const[re,Y]=M[K];for(const ee of Y){const B=P.get(ee);B!==void 0&&re(B,{dirtyLeaves:O,prevEditorState:R,updateTags:j})}}})(e,x,_,y,a),Ot(o)||o===null||i!==null&&i.is(o)||e.dispatchCommand(UH,void 0);const k=e._pendingDecorators;k!==null&&(e._decorators=k,e._pendingDecorators=null,Dx("decorator",e,!0,k)),(function(A,P,j){const O=eD(P),R=eD(j);O!==R&&Dx("textcontent",A,!0,R)})(e,t||a,r),Dx("update",e,!0,{dirtyElements:v,dirtyLeaves:y,editorState:r,mutatedNodes:x,normalizedNodes:T,prevEditorState:t||a,tags:_}),(function(A,P){if(A._deferred=[],P.length!==0){const j=A._updating;A._updating=!0;try{for(let O=0;O<P.length;O++)P[O]()}finally{A._updating=j}}})(e,b),(function(A){const P=A._updates;if(P.length!==0){const j=P.shift();if(j){const[O,R]=j;V2(A,O,R)}}})(e)}function Dx(e,t,r,...n){const s=t._updating;t._updating=r;try{const a=Array.from(t._listeners[e]);for(let i=0;i<a.length;i++)a[i].apply(null,n)}finally{t._updating=s}}function YR(e,t){const r=e._updates;let n=t||!1;for(;r.length!==0;){const s=r.shift();if(s){const[a,i]=s,o=e._pendingEditorState;let l;i!==void 0&&(l=i.onUpdate,i.skipTransforms&&(n=!0),i.discrete&&(o===null&&Mt(191),o._flushSync=!0),l&&e._deferred.push(l),yG(e,i.tag)),o==null?V2(e,a,i):a()}}return n}function V2(e,t,r){const n=e._updateTags;let s,a=!1,i=!1;r!==void 0&&(s=r.onUpdate,yG(e,r.tag),a=r.skipTransforms||!1,i=r.discrete||!1),s&&e._deferred.push(s);const o=e._editorState;let l=e._pendingEditorState,u=!1;(l===null||l._readOnly)&&(l=e._pendingEditorState=xG(l||o),u=!0),l._flushSync=i;const d=Ra,f=ho,g=Da,p=e._updating;Ra=l,ho=!1,e._updating=!0,Da=e;const x=e._headless||e.getRootElement()===null;j5(null);try{u&&(x?o._selection!==null&&(l._selection=o._selection.clone()):l._selection=(function(_,b){const E=_.getEditorState()._selection,k=rc(xl(_));return Ot(E)||E==null?k5(E,k,_,b):E.clone()})(e,r&&r.event||null));const v=e._compositionKey;t(),a=YR(e,a),(function(_,b){const E=b.getEditorState()._selection,k=_._selection;if(Ot(k)){const A=k.anchor,P=k.focus;let j;if(A.type==="text"&&(j=A.getNode(),j.selectionTransform(E,k)),P.type==="text"){const O=P.getNode();j!==O&&O.selectionTransform(E,k)}}})(l,e),e._dirtyType!==Xh&&(a?(function(_,b){const E=b._dirtyLeaves,k=_._nodeMap;for(const A of E){const P=k.get(A);Yt(P)&&P.isAttached()&&P.isSimpleText()&&!P.isUnmergeable()&&CR(P)}})(l,e):(function(_,b){const E=b._dirtyLeaves,k=b._dirtyElements,A=_._nodeMap,P=nf(),j=new Map;let O=E,R=O.size,M=k,G=M.size;for(;R>0||G>0;){if(R>0){b._dirtyLeaves=new Set;for(const K of O){const re=A.get(K);Yt(re)&&re.isAttached()&&re.isSimpleText()&&!re.isUnmergeable()&&CR(re),re!==void 0&&KR(re,P)&&qR(b,re,j),E.add(K)}if(O=b._dirtyLeaves,R=O.size,R>0){Wb++;continue}}b._dirtyLeaves=new Set,b._dirtyElements=new Map,M.delete("root")&&M.set("root",!0);for(const K of M){const re=K[0],Y=K[1];if(k.set(re,Y),!Y)continue;const ee=A.get(re);ee!==void 0&&KR(ee,P)&&qR(b,ee,j)}O=b._dirtyLeaves,R=O.size,M=b._dirtyElements,G=M.size,Wb++}b._dirtyLeaves=E,b._dirtyElements=k})(l,e),YR(e),(function(_,b,E,k){const A=_._nodeMap,P=b._nodeMap,j=[];for(const[O]of k){const R=P.get(O);R!==void 0&&(R.isAttached()||(wt(R)&&PH(R,O,A,P,j,k),A.has(O)||k.delete(O),j.push(O)))}for(const O of j)P.delete(O);for(const O of E){const R=P.get(O);R===void 0||R.isAttached()||(A.has(O)||E.delete(O),P.delete(O))}})(o,l,e._dirtyLeaves,e._dirtyElements)),v!==e._compositionKey&&(l._flushSync=!0);const T=l._selection;if(Ot(T)){const _=l._nodeMap,b=T.anchor.key,E=T.focus.key;_.get(b)!==void 0&&_.get(E)!==void 0||Mt(19)}else mi(T)&&T._nodes.size===0&&(l._selection=null)}catch(v){return v instanceof Error&&e._onError(v),e._pendingEditorState=o,e._dirtyType=vp,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void Ru(e)}finally{Ra=d,ho=f,Da=g,e._updating=p,Wb=0}e._dirtyType!==Xh||e._deferred.length>0||(function(v,T){const _=T.getEditorState()._selection,b=v._selection;if(b!==null){if(b.dirty||!b.is(_))return!0}else if(_!==null)return!0;return!1})(l,e)?l._flushSync?(l._flushSync=!1,Ru(e)):u&&$oe((()=>{Ru(e)})):(l._flushSync=!1,u&&(n.clear(),e._deferred=[],e._pendingEditorState=null))}function jo(e,t,r){Da===e&&r===void 0?t():V2(e,t,r)}class Ix{constructor(t,r,n){this.element=t,this.before=r||null,this.after=n||null}withBefore(t){return new Ix(this.element,t,this.after)}withAfter(t){return new Ix(this.element,this.before,t)}withElement(t){return this.element===t?this:new Ix(t,this.before,this.after)}insertChild(t){const r=this.before||this.getManagedLineBreak();return r!==null&&r.parentElement!==this.element&&Mt(222),this.element.insertBefore(t,r),this}removeChild(t){return t.parentElement!==this.element&&Mt(223),this.element.removeChild(t),this}replaceChild(t,r){return r.parentElement!==this.element&&Mt(224),this.element.replaceChild(t,r),this}getFirstChild(){const t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(t){if(t===null)this.removeManagedLineBreak();else{const r=t==="decorator"&&(xp||iv);this.insertManagedLineBreak(r)}}removeManagedLineBreak(){const t=this.getManagedLineBreak();if(t){const r=this.element,n=t.nodeName==="IMG"?t.nextSibling:null;n&&r.removeChild(n),r.removeChild(t),r.__lexicalLineBreak=void 0}}insertManagedLineBreak(t){const r=this.getManagedLineBreak();if(r){if(t===(r.nodeName==="IMG"))return;this.removeManagedLineBreak()}const n=this.element,s=this.before,a=document.createElement("br");if(n.insertBefore(a,s),t){const i=document.createElement("img");i.setAttribute("data-lexical-linebreak","true"),i.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",i.alt="",n.insertBefore(i,a),n.__lexicalLineBreak=i}else n.__lexicalLineBreak=a}getFirstChildOffset(){let t=0;for(let r=this.after;r!==null;r=r.previousSibling)t++;return t}resolveChildIndex(t,r,n,s){if(n===this.element){const l=this.getFirstChildOffset();return[t,Math.min(l+t.getChildrenSize(),Math.max(l,s))]}const a=JR(r,n);a.push(s);const i=JR(r,this.element);let o=t.getIndexWithinParent();for(let l=0;l<i.length;l++){const u=a[l],d=i[l];if(u===void 0||u<d)break;if(u>d){o+=1;break}}return[t.getParentOrThrow(),o]}}function JR(e,t){const r=[];let n=t;for(;n!==e&&n!==null;n=n.parentNode){let s=0;for(let a=n.previousSibling;a!==null;a=a.previousSibling)s++;r.push(s)}return n!==e&&Mt(225),r.reverse()}class Ni extends tm{constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(t){super.afterCloneFrom(t),this.__key===t.__key&&(this.__first=t.__first,this.__last=t.__last,this.__size=t.__size),this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return Vie[t]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getChildrenKeys(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r.__key),r=r.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const t=bs()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),r=this.getParentOrThrow().getLastChild();return r!==null&&r.is(t)}getAllTextNodes(){const t=[];let r=this.getFirstChild();for(;r!==null;){if(Yt(r)&&t.push(r),wt(r)){const n=r.getAllTextNodes();t.push(...n)}r=r.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;wt(t);){const r=t.getFirstChild();if(r===null)break;t=r}return t}getLastDescendant(){let t=this.getLastChild();for(;wt(t);){const r=t.getLastChild();if(r===null)break;t=r}return t}getDescendantByIndex(t){const r=this.getChildren(),n=r.length;if(t>=n){const a=r[n-1];return wt(a)&&a.getLastDescendant()||a||null}const s=r[t];return wt(s)&&s.getFirstDescendant()||s||null}getFirstChild(){const t=this.getLatest().__first;return t===null?null:aa(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return t===null&&Mt(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return t===null?null:aa(t)}getLastChildOrThrow(){const t=this.getLastChild();return t===null&&Mt(96,this.__key),t}getChildAtIndex(t){const r=this.getChildrenSize();let n,s;if(t<r/2){for(n=this.getFirstChild(),s=0;n!==null&&s<=t;){if(s===t)return n;n=n.getNextSibling(),s++}return null}for(n=this.getLastChild(),s=r-1;n!==null&&s>=t;){if(s===t)return n;n=n.getPreviousSibling(),s--}return null}getTextContent(){let t="";const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const a=r[s];t+=a.getTextContent(),wt(a)&&s!==n-1&&!a.isInline()&&(t+=Xu)}return t}getTextContentSize(){let t=0;const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const a=r[s];t+=a.getTextContentSize(),wt(a)&&s!==n-1&&!a.isInline()&&(t+=Xu.length)}return t}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(t){if(t!==""){const r=xR[t];return!!(this.getFormat()&r)}return!1}hasTextFormat(t){const r=Yh[t];return!!(this.getTextFormat()&r)}getFormatFlags(t,r){return f_(this.getLatest().__textFormat,t,r)}getTextStyle(){return this.getLatest().__textStyle}select(t,r){ni();const n=Xt();let s=t,a=r;const i=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&r===0){const l=this.getFirstChild();if(Yt(l)||wt(l))return l.select(0,0)}else if(!(t!==void 0&&t!==i||r!==void 0&&r!==i)){const l=this.getLastChild();if(Yt(l)||wt(l))return l.select()}}s===void 0&&(s=i),a===void 0&&(a=i);const o=this.__key;return Ot(n)?(n.anchor.set(o,s,"element"),n.focus.set(o,a,"element"),n.dirty=!0,n):hG(o,s,o,a,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach((r=>r.remove())),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const r=this.getWritable();return r.__dir=t,r}setFormat(t){return this.getWritable().__format=t!==""?xR[t]:0,this}setStyle(t){return this.getWritable().__style=t||"",this}setTextFormat(t){const r=this.getWritable();return r.__textFormat=t,r}setTextStyle(t){const r=this.getWritable();return r.__textStyle=t,r}setIndent(t){return this.getWritable().__indent=t,this}splice(t,r,n){const s=n.length,a=this.getChildrenSize(),i=this.getWritable();t+r<=a||Mt(226,String(t),String(r),String(a));const o=i.__key,l=[],u=[],d=this.getChildAtIndex(t+r);let f=null,g=a-r+s;if(t!==0)if(t===a)f=this.getLastChild();else{const x=this.getChildAtIndex(t);x!==null&&(f=x.getPreviousSibling())}if(r>0){let x=f===null?this.getFirstChild():f.getNextSibling();for(let y=0;y<r;y++){x===null&&Mt(100);const v=x.getNextSibling(),T=x.__key;Bh(x.getWritable()),u.push(T),x=v}}let p=f;for(let x=0;x<s;x++){const y=n[x];p!==null&&y.is(p)&&(f=p=p.getPreviousSibling());const v=y.getWritable();v.__parent===o&&g--,Bh(v);const T=y.__key;if(p===null)i.__first=T,v.__prev=null;else{const _=p.getWritable();_.__next=T,v.__prev=_.__key}y.__key===o&&Mt(76),v.__parent=o,l.push(T),p=y}if(t+r===a)p!==null&&(p.getWritable().__next=null,i.__last=p.__key);else if(d!==null){const x=d.getWritable();if(p!==null){const y=p.getWritable();x.__prev=p.__key,y.__next=d.__key}else x.__prev=null}if(i.__size=g,u.length){const x=Xt();if(Ot(x)){const y=new Set(u),v=new Set(l),{anchor:T,focus:_}=x;QR(T,y,v)&&u_(T,T.getNode(),this,f,d),QR(_,y,v)&&u_(_,_.getNode(),this,f,d),g!==0||this.canBeEmpty()||Xi(this)||this.remove()}}return i}getDOMSlot(t){return new Ix(t)}exportDOM(t){const{element:r}=super.exportDOM(t);if(as(r)){const n=this.getIndent();n>0&&(r.style.paddingInlineStart=40*n+"px");const s=this.getDirection();s&&(r.dir=s)}return{element:r}}exportJSON(){const t={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},r=this.getTextFormat(),n=this.getTextStyle();return r!==0&&(t.textFormat=r),n!==""&&(t.textStyle=n),t}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"")}insertNewAfter(t,r){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,r,n){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(t,r){const n=this.getDOMSlot(t);let s=n.getFirstChild();for(let a=this.getFirstChild();a;a=a.getNextSibling()){const i=r.getElementByKey(a.getKey());i!==null&&(s==null?(n.insertChild(i),s=i):s!==i&&n.replaceChild(i,s),s=s.nextSibling)}}}function wt(e){return e instanceof Ni}function QR(e,t,r){let n=e.getNode();for(;n;){const s=n.__key;if(t.has(s)&&!r.has(s))return!0;n=n.getParent()}return!1}class C5 extends tm{decorate(t,r){Mt(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function xn(e){return e instanceof C5}class v1 extends Ni{static getType(){return"root"}static clone(){return new v1}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){Mt(51)}getTextContent(){const t=this.__cachedText;return!x1()&&bs()._dirtyType!==Xh||t===null?super.getTextContent():t}remove(){Mt(52)}replace(t){Mt(53)}insertBefore(t){Mt(54)}insertAfter(t){Mt(55)}updateDOM(t,r){return!1}splice(t,r,n){for(const s of n)wt(s)||xn(s)||Mt(282);return super.splice(t,r,n)}static importJSON(t){return hs().updateFromJSON(t)}collapseAtStart(){return!0}}function wa(e){return e instanceof v1}function xG(e){return new q2(new Map(e._nodeMap))}function E5(){return new q2(new Map([["root",new v1]]))}function vG(e){const t=e.exportJSON(),r=e.constructor;if(t.type!==r.getType()&&Mt(130,r.name),wt(e)){const n=t.children;Array.isArray(n)||Mt(59,r.name);const s=e.getChildren();for(let a=0;a<s.length;a++){const i=vG(s[a]);n.push(i)}}return t}class q2{constructor(t,r){this._nodeMap=t,this._selection=r||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t,r){return XR(r&&r.editor||null,this,t)}clone(t){const r=new q2(this._nodeMap,t===void 0?this._selection:t);return r._readOnly=!0,r}toJSON(){return XR(null,this,(()=>({root:vG(hs())})))}}const d_="historic",Ooe="history-push",Mx="history-merge",Foe="paste",wG="collaboration",Roe="skip-scroll-into-view",Doe="skip-dom-selection";class N5 extends Ni{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class w1 extends Ni{static getType(){return"paragraph"}static clone(t){return new w1(t.__key)}createDOM(t){const r=document.createElement("p"),n=sp(t.theme,"paragraph");return n!==void 0&&r.classList.add(...n),r}updateDOM(t,r,n){return!1}static importDOM(){return{p:t=>({conversion:Ioe,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(as(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n)}return{element:r}}static importJSON(t){return ss().updateFromJSON(t)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(t,r){const n=ss();n.setTextFormat(t.format),n.setTextStyle(t.style);const s=this.getDirection();return n.setDirection(s),n.setFormat(this.getFormatType()),n.setStyle(this.getStyle()),this.insertAfter(n,r),n}collapseAtStart(){const t=this.getChildren();if(t.length===0||Yt(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function Ioe(e){const t=ss();return e.style&&(t.setFormat(e.style.textAlign),$5(e,t)),{node:t}}function ss(){return Ji(new w1)}function A5(e){return e instanceof w1}const un=0,Lg=1,Moe=4;function bG(e,t,r,n){const s=e._keyToDOMMap;s.clear(),e._editorState=E5(),e._pendingEditorState=n,e._compositionKey=null,e._dirtyType=Xh,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;const a=e._observer;a!==null&&(a.disconnect(),e._observer=null),t!==null&&(t.textContent=""),r!==null&&(r.textContent="",s.set("root",r))}function Loe(e){const t=e||{},r=joe(),n=t.theme||{},s=e===void 0?r:t.parentEditor||null,a=t.disableEvents||!1,i=E5(),o=t.namespace||(s!==null?s._config.namespace:AG()),l=t.editorState,u=[v1,Af,m1,y1,w1,N5,...t.nodes||[]],{onError:d,html:f}=t,g=t.editable===void 0||t.editable;let p;if(e===void 0&&r!==null)p=r._nodes;else{p=new Map;for(let y=0;y<u.length;y++){let v=u[y],T=null,_=null;if(typeof v!="function"){const P=v;v=P.replace,T=P.with,_=P.withKlass||null}const{ownNodeConfig:b}=U5(v),E=v.getType(),k=v.transform(),A=new Set;b&&b.$transform&&A.add(b.$transform),k!==null&&A.add(k),p.set(E,{exportDOM:f&&f.export?f.export.get(v):void 0,klass:v,replace:T,replaceWithKlass:_,sharedNodeState:eoe(u[y]),transforms:A})}}const x=new K2(i,s,p,{disableEvents:a,namespace:o,theme:n},d||console.error,(function(y,v){const T=new Map,_=new Set,b=E=>{Object.keys(E).forEach((k=>{let A=T.get(k);A===void 0&&(A=[],T.set(k,A)),A.push(E[k])}))};return y.forEach((E=>{const k=E.klass.importDOM;if(k==null||_.has(k))return;_.add(k);const A=k.call(E.klass);A!==null&&b(A)})),v&&b(v),T})(p,f?f.import:void 0),g,e);return l!==void 0&&(x._pendingEditorState=l,x._dirtyType=vp),x}class K2{constructor(t,r,n,s,a,i,o,l){this._createEditorArgs=l,this._parentEditor=r,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=s,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=Xh,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=AG(),this._onError=a,this._htmlConversions=i,this._editable=o,this._headless=r!==null&&r._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){const r=this._listeners.update;return r.add(t),()=>{r.delete(t)}}registerEditableListener(t){const r=this._listeners.editable;return r.add(t),()=>{r.delete(t)}}registerDecoratorListener(t){const r=this._listeners.decorator;return r.add(t),()=>{r.delete(t)}}registerTextContentListener(t){const r=this._listeners.textcontent;return r.add(t),()=>{r.delete(t)}}registerRootListener(t){const r=this._listeners.root;return t(this._rootElement,null),r.add(t),()=>{t(null,this._rootElement),r.delete(t)}}registerCommand(t,r,n){n===void 0&&Mt(35);const s=this._commands;s.has(t)||s.set(t,[new Set,new Set,new Set,new Set,new Set]);const a=s.get(t);a===void 0&&Mt(36,String(t));const i=a[n];return i.add(r),()=>{i.delete(r),a.every((o=>o.size===0))&&s.delete(t)}}registerMutationListener(t,r,n){const s=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,a=this._listeners.mutation;let i=a.get(r);i===void 0&&(i=new Set,a.set(r,i)),i.add(s);const o=n&&n.skipInitialization;return o!==void 0&&o||this.initializeMutationListener(r,s),()=>{i.delete(s),i.size===0&&a.delete(r)}}getRegisteredNode(t){const r=this._nodes.get(t.getType());return r===void 0&&Mt(37,t.name),r}resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t}initializeMutationListener(t,r){const n=this._editorState,s=oD(n).get(r.getType());if(!s)return;const a=new Map;for(const i of s.keys())a.set(i,"created");a.size>0&&t(a,{dirtyLeaves:new Set,prevEditorState:n,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(t,r){const n=this.getRegisteredNode(t);return n.transforms.add(r),n}registerNodeTransform(t,r){const n=this.registerNodeTransformToKlass(t,r),s=[n],a=n.replaceWithKlass;if(a!=null){const i=this.registerNodeTransformToKlass(a,r);s.push(i)}return(function(i,o){const l=oD(i.getEditorState()),u=[];for(const d of o){const f=l.get(d);f&&u.push(f)}u.length!==0&&i.update((()=>{for(const d of u)for(const f of d.keys()){const g=aa(f);g&&g.markDirty()}}),i._pendingEditorState===null?{tag:Mx}:void 0)})(this,s.map((i=>i.klass.getType()))),()=>{s.forEach((i=>i.transforms.delete(r)))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,r){return ir(this,t,r)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const r=this._rootElement;if(t!==r){const n=sp(this._config.theme,"root"),s=this._pendingEditorState||this._editorState;if(this._rootElement=t,bG(this,r,t,s),r!==null&&(this._config.disableEvents||xoe(r),n!=null&&r.classList.remove(...n)),t!==null){const a=L5(t),i=t.style;i.userSelect="text",i.whiteSpace="pre-wrap",i.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=a,this._dirtyType=vp,RH(this),this._updateTags.add(Mx),Ru(this),this._config.disableEvents||(function(o,l){const u=o.ownerDocument,d=l_.get(u);(d===void 0||d<1)&&u.addEventListener("selectionchange",lG),l_.set(u,(d||0)+1),o.__lexicalEditor=l;const f=oG(o);for(let g=0;g<wA.length;g++){const[p,x]=wA[g],y=typeof x=="function"?v=>{FR(v)||(OR(v),(l.isEditable()||p==="click")&&x(v,l))}:v=>{if(FR(v))return;OR(v);const T=l.isEditable();switch(p){case"cut":return T&&ir(l,b5,v);case"copy":return ir(l,W2,v);case"paste":return T&&ir(l,x5,v);case"dragstart":return T&&ir(l,ZH,v);case"dragover":return T&&ir(l,eG,v);case"dragend":return T&&ir(l,foe,v);case"focus":return T&&ir(l,poe,v);case"blur":return T&&ir(l,moe,v);case"drop":return T&&ir(l,JH,v)}};o.addEventListener(p,y),f.push((()=>{o.removeEventListener(p,y)}))}})(t,this),n!=null&&t.classList.add(...n)}else this._window=null,this._updateTags.add(Mx),Ru(this);Dx("root",this,!1,t,r)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,r){t.isEmpty()&&Mt(38);let n=t;n._readOnly&&(n=xG(t),n._selection=t._selection?t._selection.clone():null),FH(this);const s=this._pendingEditorState,a=this._updateTags,i=r!==void 0?r.tag:null;s===null||s.isEmpty()||(i!=null&&a.add(i),Ru(this)),this._pendingEditorState=n,this._dirtyType=vp,this._dirtyElements.set("root",!1),this._compositionKey=null,i!=null&&a.add(i),this._updating||Ru(this)}parseEditorState(t,r){return(function(n,s,a){const i=E5(),o=Ra,l=ho,u=Da,d=s._dirtyElements,f=s._dirtyLeaves,g=s._cloneNotNeeded,p=s._dirtyType;s._dirtyElements=new Map,s._dirtyLeaves=new Set,s._cloneNotNeeded=new Set,s._dirtyType=0,Ra=i,ho=!1,Da=s,j5(null);try{const x=s._nodes;T5(n.root,x),a&&a(),i._readOnly=!0}catch(x){x instanceof Error&&s._onError(x)}finally{s._dirtyElements=d,s._dirtyLeaves=f,s._cloneNotNeeded=g,s._dirtyType=p,Ra=o,ho=l,Da=u}return i})(typeof t=="string"?JSON.parse(t):t,this,r)}read(t){return Ru(this),this.getEditorState().read(t,{editor:this})}update(t,r){(function(n,s,a){n._updating?n._updates.push([s,a]):V2(n,s,a)})(this,t,r)}focus(t,r={}){const n=this._rootElement;n!==null&&(n.setAttribute("autocapitalize","off"),jo(this,(()=>{const s=Xt(),a=hs();s!==null?s.dirty||li(s.clone()):a.getChildrenSize()!==0&&(r.defaultSelection==="rootStart"?a.selectStart():a.selectEnd()),Goe("focus"),Voe((()=>{n.removeAttribute("autocapitalize"),t&&t()}))})),this._pendingEditorState===null&&n.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;t!==null&&t.blur();const r=rc(this._window);r!==null&&r.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,Dx("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}K2.version="0.35.0+prod.esm";let CA=null;function j5(e){CA=e}let Boe=1;function _G(e,t){const r=P5(e,t);return r===void 0&&Mt(30,t),r}function P5(e,t){return e._nodes.get(t)}const $oe=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)};function ZR(e){return xn(vf(e))}function O5(e){const t=document.activeElement;if(!as(t))return!1;const r=t.nodeName;return xn(vf(e))&&(r==="INPUT"||r==="TEXTAREA"||t.contentEditable==="true"&&X2(t)==null)}function b1(e,t,r){const n=e.getRootElement();try{return n!==null&&n.contains(t)&&n.contains(r)&&t!==null&&!O5(t)&&SG(t)===e}catch{return!1}}function F5(e){return e instanceof K2}function SG(e){let t=e;for(;t!=null;){const r=X2(t);if(F5(r))return r;t=_1(t)}return null}function X2(e){return e?e.__lexicalEditor:null}function Lh(e){return z2(e)||e.isToken()}function Ou(e){return Lh(e)||e.isSegmented()}function rd(e){return sm(e)&&e.nodeType===Mie}function Uoe(e){return sm(e)&&e.nodeType===Lie}function wp(e){let t=e;for(;t!=null;){if(rd(t))return t;t=t.firstChild}return null}function f_(e,t,r){const n=Yh[t];if(r!==null&&(e&n)==(r&n))return e;let s=e^n;return t==="subscript"?s&=-65:t==="superscript"?s&=-33:t==="lowercase"?(s&=-513,s&=-1025):t==="uppercase"?(s&=-257,s&=-1025):t==="capitalize"&&(s&=-257,s&=-513),s}function kG(e){return Yt(e)||$u(e)||xn(e)}function Woe(e,t){const r=(function(){const i=CA;return CA=null,i})();if((t=t||r&&r.__key)!=null)return void(e.__key=t);ni(),pG();const n=bs(),s=jf(),a=""+Boe++;s._nodeMap.set(a,e),wt(e)?n._dirtyElements.set(a,!0):n._dirtyLeaves.add(a),n._cloneNotNeeded.add(a),n._dirtyType=jH,e.__key=a}function Bh(e){const t=e.getParent();if(t!==null){const r=e.getWritable(),n=t.getWritable(),s=e.getPreviousSibling(),a=e.getNextSibling(),i=a!==null?a.__key:null,o=s!==null?s.__key:null,l=s!==null?s.getWritable():null,u=a!==null?a.getWritable():null;s===null&&(n.__first=i),a===null&&(n.__last=o),l!==null&&(l.__next=i),u!==null&&(u.__prev=o),r.__prev=null,r.__next=null,r.__parent=null,n.__size--}}function h_(e){pG();const t=e.getLatest(),r=t.__parent,n=jf(),s=bs(),a=n._nodeMap,i=s._dirtyElements;r!==null&&(function(l,u,d){let f=l;for(;f!==null;){if(d.has(f))return;const g=u.get(f);if(g===void 0)break;d.set(f,!1),f=g.__parent}})(r,a,i);const o=t.__key;s._dirtyType=jH,wt(e)?i.set(o,!0):s._dirtyLeaves.add(o)}function si(e){ni();const t=bs(),r=t._compositionKey;if(e!==r){if(t._compositionKey=e,r!==null){const n=aa(r);n!==null&&n.getWritable()}if(e!==null){const n=aa(e);n!==null&&n.getWritable()}}}function nf(){return x1()?null:bs()._compositionKey}function aa(e,t){const r=(t||jf())._nodeMap.get(e);return r===void 0?null:r}function TG(e,t){const r=Y2(e,bs());return r!==void 0?aa(r,t):null}function Y2(e,t){return e[`__lexicalKey_${t._key}`]}function vf(e,t){let r=e;for(;r!=null;){const n=TG(r,t);if(n!==null)return n;r=_1(r)}return null}function CG(e){const t=e._decorators,r=Object.assign({},t);return e._pendingDecorators=r,r}function eD(e){return e.read((()=>hs().getTextContent()))}function hs(){return EG(jf())}function EG(e){return e._nodeMap.get("root")}function li(e){ni();const t=jf();e!==null&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function Kg(e){const t=bs(),r=(function(n,s){let a=n;for(;a!=null;){const i=Y2(a,s);if(i!==void 0)return i;a=_1(a)}return null})(e,t);return r===null?e===t.getRootElement()?aa("root"):null:aa(r)}function NG(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function R5(e){const t=[];let r=e;for(;r!==null;)t.push(r),r=r._parentEditor;return t}function AG(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function jG(e){return rd(e)?e.nodeValue:null}function D5(e,t,r){const n=rc(xl(t));if(n===null)return;const s=n.anchorNode;let{anchorOffset:a,focusOffset:i}=n;if(s!==null){let o=jG(s);const l=vf(s);if(o!==null&&Yt(l)){if(o===$2&&r){const u=r.length;o=r,a=u,i=u}o!==null&&I5(l,o,a,i,e)}}}function I5(e,t,r,n,s){let a=e;if(a.isAttached()&&(s||!a.isDirty())){const i=a.isComposing();let o=t;(i||s)&&t[t.length-1]===$2&&(o=t.slice(0,-1));const l=a.getTextContent();if(s||o!==l){if(o===""){if(si(null),iv||xp||Zb)a.remove();else{const y=bs();setTimeout((()=>{y.update((()=>{a.isAttached()&&a.remove()}))}),20)}return}const u=a.getParent(),d=nm(),f=a.getTextContentSize(),g=nf(),p=a.getKey();if(a.isToken()||g!==null&&p===g&&!i||Ot(d)&&(u!==null&&!u.canInsertTextBefore()&&d.anchor.offset===0||d.anchor.key===e.__key&&d.anchor.offset===0&&!a.canInsertTextBefore()&&!i||d.focus.key===e.__key&&d.focus.offset===f&&!a.canInsertTextAfter()&&!i))return void a.markDirty();const x=Xt();if(!Ot(x)||r===null||n===null)return void tD(a,o,x);if(x.setTextNodeRange(a,r,a,n),a.isSegmented()){const y=Ns(a.getTextContent());a.replace(y),a=y}tD(a,o,x)}}}function tD(e,t,r){if(e.setTextContent(t),Ot(r)){const n=e.getKey();for(const s of["anchor","focus"]){const a=r[s];a.type==="text"&&a.key===n&&(a.offset=ff(e,a.offset,"clamp"))}}}function ab(e,t,r){const n=t[r]||!1;return n==="any"||n===e[r]}function zoe(e,t){return ab(e,t,"altKey")&&ab(e,t,"ctrlKey")&&ab(e,t,"shiftKey")&&ab(e,t,"metaKey")}function Pn(e,t,r){return zoe(e,r)&&e.key.toLowerCase()===t.toLowerCase()}const Pu={ctrlKey:!Ic,metaKey:Ic},rD={altKey:Ic,ctrlKey:!Ic};function nD(e){return e.key==="Backspace"}function sD(e){return Pn(e,"a",Pu)}function Hoe(e){const t=hs();if(Ot(e)){const r=e.anchor,n=e.focus,s=r.getNode().getTopLevelElementOrThrow().getParentOrThrow();return r.set(s.getKey(),0,"element"),n.set(s.getKey(),s.getChildrenSize(),"element"),r_(e),e}{const r=t.select(0,t.getChildrenSize());return li(r_(r)),r}}function sp(e,t){e.__lexicalClassNameCache===void 0&&(e.__lexicalClassNameCache={});const r=e.__lexicalClassNameCache,n=r[t];if(n!==void 0)return n;const s=e[t];if(typeof s=="string"){const a=AH(s);return r[t]=a,a}return s}function M5(e,t,r,n,s){if(r.size===0)return;const a=n.__type,i=n.__key,o=t.get(a);o===void 0&&Mt(33,a);const l=o.klass;let u=e.get(l);u===void 0&&(u=new Map,e.set(l,u));const d=u.get(i),f=d==="destroyed"&&s==="created";(d===void 0||f)&&u.set(i,f?"updated":s)}function aD(e,t,r){const n=e.getParent();let s=r,a=e;return n!==null&&(t&&r===0?(s=a.getIndexWithinParent(),a=n):t||r!==a.getChildrenSize()||(s=a.getIndexWithinParent()+1,a=n)),a.getChildAtIndex(t?s-1:s)}function EA(e,t){const r=e.offset;if(e.type==="element")return aD(e.getNode(),t,r);{const n=e.getNode();if(t&&r===0||!t&&r===n.getTextContentSize()){const s=t?n.getPreviousSibling():n.getNextSibling();return s===null?aD(n.getParentOrThrow(),t,n.getIndexWithinParent()+(t?0:1)):s}}return null}function PG(e){const t=xl(e).event,r=t&&t.inputType;return r==="insertFromPaste"||r==="insertFromPasteAsQuotation"}function ir(e,t,r){return(function(n,s,a){const i=R5(n);for(let o=4;o>=0;o--)for(let l=0;l<i.length;l++){const u=i[l],d=u._commands.get(s);if(d!==void 0){const f=d[o];if(f!==void 0){const g=Array.from(f),p=g.length;let x=!1;if(jo(u,(()=>{for(let y=0;y<p;y++)if(g[y](a,n))return void(x=!0)})),x)return x}}}return!1})(e,t,r)}function J2(e){return!wa(e)&&!e.isLastChild()&&!e.isInline()}function Zh(e,t){const r=e._keyToDOMMap.get(t);return r===void 0&&Mt(75,t),r}function _1(e){const t=e.assignedSlot||e.parentElement;return jA(t)?t.host:t}function OG(e){return Uoe(e)?e:as(e)?e.ownerDocument:null}function Goe(e){ni(),bs()._updateTags.add(e)}function Voe(e){ni(),bs()._deferred.push(e)}function NA(e,t){let r=e.getParent();for(;r!==null;){if(r.is(t))return!0;r=r.getParent()}return!1}function L5(e){const t=OG(e);return t?t.defaultView:null}function xl(e){const t=e._window;return t===null&&Mt(78),t}function qoe(e){return wt(e)&&e.isInline()||xn(e)&&e.isInline()}function Koe(e){let t=e.getParentOrThrow();for(;t!==null;){if(Xi(t))return t;t=t.getParentOrThrow()}return t}function Xi(e){return wa(e)||wt(e)&&e.isShadowRoot()}function Ji(e){const t=bs(),r=e.getType(),n=P5(t,r);n===void 0&&Mt(200,e.constructor.name,r);const{replace:s,replaceWithKlass:a}=n;if(s!==null){const i=s(e),o=i.constructor;return a!==null?i instanceof a||Mt(201,a.name,a.getType(),o.name,o.getType(),e.constructor.name,r):i instanceof e.constructor&&o!==e.constructor||Mt(202,o.name,o.getType(),e.constructor.name,r),i.__key===e.__key&&Mt(203,e.constructor.name,r,o.name,o.getType()),i}return e}function fT(e,t){!wa(e.getParent())||wt(t)||xn(t)||Mt(99)}function Xoe(e){const t=aa(e);return t===null&&Mt(63,e),t}function hT(e){return(xn(e)||wt(e)&&!e.canBeEmpty())&&!e.isInline()}function AA(e,t,r){r.style.removeProperty("caret-color"),t._blockCursorElement=null;const n=e.parentElement;n!==null&&n.removeChild(e)}function rc(e){return sc?(e||window).getSelection():null}function Yoe(e){const t=L5(e);return t?t.getSelection():null}function FG(e){return as(e)&&e.tagName==="A"}function as(e){return sm(e)&&e.nodeType===Iie}function sm(e){return typeof e=="object"&&e!==null&&"nodeType"in e&&typeof e.nodeType=="number"}function jA(e){return sm(e)&&e.nodeType===Bie}function PA(e){const t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return e.nodeName.match(t)!==null}function g_(e){const t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return e.nodeName.match(t)!==null}function dl(e){if(xn(e)&&!e.isInline())return!0;if(!wt(e)||Xi(e))return!1;const t=e.getFirstChild(),r=t===null||$u(t)||Yt(t)||t.isInline();return!e.isInline()&&e.canBeEmpty()!==!1&&r}function gT(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function S1(){return bs()}const iD=new WeakMap,Joe=new Map;function oD(e){if(!e._readOnly&&e.isEmpty())return Joe;e._readOnly||Mt(192);let t=iD.get(e);return t||(t=(function(r){const n=new Map;for(const[s,a]of r._nodeMap){const i=a.__type;let o=n.get(i);o||(o=new Map,n.set(i,o)),o.set(s,a)}return n})(e),iD.set(e,t)),t}function B5(e){const t=e.constructor.clone(e);return t.afterCloneFrom(e),t}function $5(e,t){const r=parseInt(e.style.paddingInlineStart,10)||0,n=Math.round(r/40);t.setIndent(n)}function Qoe(e){e.__lexicalUnmanaged=!0}function Zoe(e){return e.__lexicalUnmanaged===!0}function sx(e,t){return(function(r,n){return Object.prototype.hasOwnProperty.call(r,n)})(e,t)&&e[t]!==tm[t]}function U5(e){const t=vR in e.prototype?e.prototype[vR]():void 0,r=(function(i){return i===C5||i===Ni||i===tm})(e),n=!r&&sx(e,"getType")?e.getType():void 0;let s,a=n;if(t)if(n)s=t[n];else for(const[i,o]of Object.entries(t))a=i,s=o;if(!r&&a&&(sx(e,"getType")||(e.getType=()=>a),sx(e,"clone")||(e.clone=i=>(j5(i),new e)),sx(e,"importJSON")||(e.importJSON=s&&s.$importJSON||(i=>new e().updateFromJSON(i))),!sx(e,"importDOM")&&s)){const{importDOM:i}=s;i&&(e.importDOM=()=>i)}return{ownNodeConfig:s,ownNodeType:a}}function ele(e){const t=S1();return ni(),new(t.resolveRegisteredNodeAfterReplacements(t.getRegisteredNode(e))).klass}const tle={next:"previous",previous:"next"};class W5{constructor(t){this.origin=t}[Symbol.iterator](){return q5({hasNext:r0,initial:this.getAdjacentCaret(),map:t=>t,step:t=>t.getAdjacentCaret()})}getAdjacentCaret(){return oi(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return oi(this.origin,this.direction)}remove(){const t=this.getNodeAtCaret();return t&&t.remove(),this}replaceOrInsert(t,r){const n=this.getNodeAtCaret();return t.is(this.origin)||t.is(n)||(n===null?this.insert(t):n.replace(t,r)),this}splice(t,r,n="next"){const s=n===this.direction?r:Array.from(r).reverse();let a=this;const i=this.getParentAtCaret(),o=new Map;for(let l=a.getAdjacentCaret();l!==null&&o.size<t;l=l.getAdjacentCaret()){const u=l.origin.getWritable();o.set(u.getKey(),u)}for(const l of s){if(o.size>0){const u=a.getNodeAtCaret();if(u){if(o.delete(u.getKey()),o.delete(l.getKey()),!(u.is(l)||a.origin.is(l))){const d=l.getParent();d&&d.is(i)&&l.remove(),u.replace(l)}}else u===null&&Mt(263,Array.from(o).join(" "))}else a.insert(l);a=oi(l,this.direction)}for(const l of o.values())l.remove();return this}}class fv extends W5{type="child";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:vl(t,this.direction)}getParentCaret(t="root"){return oi(z5(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=am(this.direction);return oi(this.getNodeAtCaret(),t)||vl(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof fv&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const rle={root:wa,shadowRoot:Xi};function am(e){return tle[e]}function z5(e,t="root"){return rle[t](e)?null:e}class e0 extends W5{type="sibling";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:oi(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return wt(this.origin)?vl(this.origin,this.direction):null}getParentCaret(t="root"){return oi(z5(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=am(this.direction);return oi(this.getNodeAtCaret(),t)||vl(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof e0&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof e0||t instanceof t0)&&this.direction===t.direction&&this.origin.is(t.origin)}}class t0 extends W5{type="text";constructor(t,r){super(t),this.offset=r}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:n0(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return oi(z5(this.getParentAtCaret(),t),this.direction)}getFlipped(){return n0(this.origin,am(this.direction),this.offset)}isSamePointCaret(t){return t instanceof t0&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof e0||t instanceof t0)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return oi(this.origin,this.direction)}}function df(e){return e instanceof t0}function r0(e){return e instanceof e0}function Hc(e){return e instanceof fv}const nle={next:class extends t0{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends t0{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},sle={next:class extends e0{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends e0{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},ale={next:class extends fv{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends fv{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function oi(e,t){return e?new sle[t](e):null}function n0(e,t,r){return e?new nle[t](e,ff(e,r)):null}function ff(e,t,r="error"){const n=e.getTextContentSize();let s=t==="next"?n:t==="previous"?0:t;return(s<0||s>n)&&(r!=="clamp"&&(function(a,...i){const o=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;l.append("code",a);for(const u of i)l.append("v",u);o.search=l.toString(),console.warn(`Minified Lexical warning #${a}; visit ${o.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(284,String(t),String(n),e.getKey()),s=s<0?0:n),s}function lD(e,t){return new ole(e,t)}function vl(e,t){return wt(e)?new ale[t](e):null}function ile(e){return e&&e.getChildCaret()||e}function H5(e){return e&&ile(e.getAdjacentCaret())}class G5{type="node-caret-range";constructor(t,r,n){this.anchor=t,this.focus=r,this.direction=n}getLatest(){const t=this.anchor.getLatest(),r=this.focus.getLatest();return t===this.anchor&&r===this.focus?this:new G5(t,r,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const t=s=>{const a=this[s].getLatest();return df(a)?(function(i,o){const{direction:l,origin:u}=i,d=ff(u,o==="focus"?am(l):l);return lD(i,d-i.offset)})(a,s):null},r=t("anchor"),n=t("focus");if(r&&n){const{caret:s}=r,{caret:a}=n;if(s.isSameNodeCaret(a))return[lD(s,a.offset-s.offset),null]}return[r,n]}iterNodeCarets(t="root"){const r=df(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),n=this.focus.getLatest(),s=df(n),a=i=>i.isSameNodeCaret(n)?null:H5(i)||i.getParentCaret(t);return q5({hasNext:i=>i!==null&&!(s&&n.isSameNodeCaret(i)),initial:r.isSameNodeCaret(n)?null:a(r),map:i=>i,step:a})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class ole{type="slice";constructor(t,r){this.caret=t,this.distance=r}getSliceIndices(){const{distance:t,caret:{offset:r}}=this,n=r+t;return n<r?[n,r]:[r,n]}getTextContent(){const[t,r]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(t,r)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:t,direction:r}}=this,[n,s]=this.getSliceIndices(),a=t.getTextContent();return n0(t.setTextContent(a.slice(0,n)+a.slice(s)),r,n)}}function V5(e){return wf(e,oi(hs(),e.direction))}function lle(e){return wf(e,e)}function wf(e,t){return e.direction!==t.direction&&Mt(265),new G5(e,t,e.direction)}function q5(e){const{initial:t,hasNext:r,step:n,map:s}=e;let a=t;return{[Symbol.iterator](){return this},next(){if(!r(a))return{done:!0,value:void 0};const i={done:!1,value:s(a)};return a=n(a),i}}}function RG(e,t){const r=zb(e.origin,t.origin);switch(r===null&&Mt(275,e.origin.getKey(),t.origin.getKey()),r.type){case"same":{const n=e.type==="text",s=t.type==="text";return n&&s?(function(a,i){return Math.sign(a-i)})(e.offset,t.offset):e.type===t.type?0:n?-1:s?1:e.type==="child"?-1:1}case"ancestor":return e.type==="child"?-1:1;case"descendant":return t.type==="child"?1:-1;case"branch":return DG(r)}}function DG(e){const{a:t,b:r}=e,n=t.__key,s=r.__key;let a=t,i=r;for(;a&&i;a=a.getNextSibling(),i=i.getNextSibling()){if(a.__key===s)return-1;if(i.__key===n)return 1}return a===null?1:-1}function ib(e,t){return t.is(e)}function cD(e){return wt(e)?[e.getLatest(),null]:[e.getParent(),e.getLatest()]}function zb(e,t){if(e.is(t))return{commonAncestor:e,type:"same"};const r=new Map;for(let[n,s]=cD(e);n;s=n,n=n.getParent())r.set(n,s);for(let[n,s]=cD(t);n;s=n,n=n.getParent()){const a=r.get(n);if(a!==void 0)return a===null?(ib(e,n)||Mt(276),{commonAncestor:n,type:"ancestor"}):s===null?(ib(t,n)||Mt(277),{commonAncestor:n,type:"descendant"}):((wt(a)||ib(e,a))&&(wt(s)||ib(t,s))&&n.is(a.getParent())&&n.is(s.getParent())||Mt(278),{a,b:s,commonAncestor:n,type:"branch"})}return null}function Yu(e,t){const{type:r,key:n,offset:s}=e,a=Xoe(e.key);return r==="text"?(Yt(a)||Mt(266,a.getType(),n),n0(a,t,s)):(wt(a)||Mt(267,a.getType(),n),dle(a,e.offset,t))}function s0(e,t){const{origin:r,direction:n}=t,s=n==="next";df(t)?e.set(r.getKey(),t.offset,"text"):r0(t)?Yt(r)?e.set(r.getKey(),ff(r,n),"text"):e.set(r.getParentOrThrow().getKey(),r.getIndexWithinParent()+(s?1:0),"element"):(Hc(t)&&wt(r)||Mt(268),e.set(r.getKey(),s?0:r.getChildrenSize(),"element"))}function cle(e){const t=Xt(),r=Ot(t)?t:G2();return Hb(r,e),li(r),r}function Hb(e,t){s0(e.anchor,t.anchor),s0(e.focus,t.focus)}function uD(e){const{anchor:t,focus:r}=e,n=Yu(t,"next"),s=Yu(r,"next"),a=RG(n,s)<=0?"next":"previous";return wf(bp(n,a),bp(s,a))}function K5(e){const{direction:t,origin:r}=e,n=oi(r,am(t)).getNodeAtCaret();return n?oi(n,t):vl(r.getParentOrThrow(),t)}function dD(e,t="root"){const r=[e];for(let n=Hc(e)?e.getParentCaret(t):e.getSiblingCaret();n!==null;n=n.getParentCaret(t))r.push(K5(n));return r}function pT(e){return!!e&&e.origin.isAttached()}function ule(e,t="removeEmptySlices"){if(e.isCollapsed())return e;const r="root",n="next";let s=t;const a=MG(e,n),i=dD(a.anchor,r),o=dD(a.focus.getFlipped(),r),l=new Set,u=[];for(const x of a.iterNodeCarets(r))if(Hc(x))l.add(x.origin.getKey());else if(r0(x)){const{origin:y}=x;wt(y)&&!l.has(y.getKey())||u.push(y)}for(const x of u)x.remove();for(const x of a.getTextSlices()){if(!x)continue;const{origin:y}=x.caret,v=y.getTextContentSize(),T=K5(oi(y,n)),_=y.getMode();if(Math.abs(x.distance)===v&&s==="removeEmptySlices"||_==="token"&&x.distance!==0)T.remove();else if(x.distance!==0){s="removeEmptySlices";let b=x.removeTextSlice();const E=x.caret.origin;if(_==="segmented"){const k=b.origin,A=Ns(k.getTextContent()).setStyle(k.getStyle()).setFormat(k.getFormat());T.replaceOrInsert(A),b=n0(A,n,b.offset)}E.is(i[0].origin)&&(i[0]=b),E.is(o[0].origin)&&(o[0]=b.getFlipped())}}let d,f;for(const x of i)if(pT(x)){d=fl(x);break}for(const x of o)if(pT(x)){f=fl(x);break}const g=(function(x,y,v){if(!x||!y)return null;const T=x.getParentAtCaret(),_=y.getParentAtCaret();if(!T||!_)return null;const b=T.getParents().reverse();b.push(T);const E=_.getParents().reverse();E.push(_);const k=Math.min(b.length,E.length);let A;for(A=0;A<k&&b[A]===E[A];A++);const P=(R,M)=>{let G;for(let K=A;K<R.length;K++){const re=R[K];if(Xi(re))return;!G&&M(re)&&(G=re)}return G},j=P(b,dl),O=j&&P(E,(R=>v.has(R.getKey())&&dl(R)));return j&&O?[j,O]:null})(d,f,l);if(g){const[x,y]=g;vl(x,"previous").splice(0,y.getChildren()),y.remove()}const p=[d,f,...i,...o].find(pT);if(p)return lle(bp(fl(p),e.direction));Mt(269,JSON.stringify(i.map((x=>x.origin.__key))))}function fl(e){const t=(function(s){let a=s;for(;Hc(a);){const i=H5(a);if(!Hc(i))break;a=i}return a})(e.getLatest()),{direction:r}=t;if(Yt(t.origin))return df(t)?t:n0(t.origin,r,r);const n=t.getAdjacentCaret();return r0(n)&&Yt(n.origin)?n0(n.origin,r,am(r)):t}function IG(e){return df(e)&&e.offset!==ff(e.origin,e.direction)}function bp(e,t){return e.direction===t?e:e.getFlipped()}function MG(e,t){return e.direction===t?e:wf(bp(e.focus,t),bp(e.anchor,t))}function dle(e,t,r){let n=vl(e,"next");for(let s=0;s<t;s++){const a=n.getAdjacentCaret();if(a===null)break;n=a}return bp(n,r)}const LG=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,fle=LG?C.useLayoutEffect:C.useEffect,ob={tag:Mx};function BG({initialConfig:e,children:t}){const r=C.useMemo((()=>{const{theme:n,namespace:s,nodes:a,onError:i,editorState:o,html:l}=e,u=Fie(null,n),d=Loe({editable:e.editable,html:l,namespace:s,nodes:a,onError:f=>i(f,d),theme:n});return(function(f,g){if(g!==null){if(g===void 0)f.update((()=>{const p=hs();if(p.isEmpty()){const x=ss();p.append(x);const y=LG?document.activeElement:null;(Xt()!==null||y!==null&&y===f.getRootElement())&&x.select()}}),ob);else if(g!==null)switch(typeof g){case"string":{const p=f.parseEditorState(g);f.setEditorState(p,ob);break}case"object":f.setEditorState(g,ob);break;case"function":f.update((()=>{hs().isEmpty()&&g(f)}),ob)}}})(d,o),[d,u]}),[]);return fle((()=>{const n=e.editable,[s]=r;s.setEditable(n===void 0||n)}),[]),c.jsx(em.Provider,{value:r,children:t})}const hle=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?C.useLayoutEffect:C.useEffect;function gle(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function ple(){return(function(e){const[t]=Yc(),r=C.useMemo((()=>e(t)),[t,e]),[n,s]=C.useState((()=>r.initialValueFn())),a=C.useRef(n);return hle((()=>{const{initialValueFn:i,subscribe:o}=r,l=i();return a.current!==l&&(a.current=l,s(l)),o((u=>{a.current=u,s(u)}))}),[r,e]),n})(gle)}function mle(){return hs().getTextContent()}function yle(e,t=!0){if(e)return!1;let r=mle();return t&&(r=r.trim()),r===""}function xle(e){if(!yle(e,!1))return!1;const t=hs().getChildren(),r=t.length;if(r>1)return!1;for(let n=0;n<r;n++){const s=t[n];if(xn(s))return!1;if(wt(s)){if(!A5(s)||s.__indent!==0)return!1;const a=s.getChildren(),i=a.length;for(let o=0;o<i;o++){const l=a[n];if(!Yt(l))return!1}}}return!0}function $G(e){return()=>xle(e)}const OA=new Map;function UG(e){const t={};if(!e)return t;const r=e.split(";");for(const n of r)if(n!==""){const[s,a]=n.split(/:([^]+)/);s&&a&&(t[s.trim()]=a.trim())}return t}function fD(e){let t=OA.get(e);return t===void 0&&(t=UG(e),OA.set(e,t)),t}function WG(e){const t=S1().getElementByKey(e.getKey());if(t===null)return null;const r=t.ownerDocument.defaultView;return r===null?null:r.getComputedStyle(t)}function zG(e){return WG(wa(e)?e:e.getParentOrThrow())}function hD(e){const t=zG(e);return t!==null&&t.direction==="rtl"}function HG(e,t){const r=e.getStartEndPoints();if(t.isSelected(e)&&!Ou(t)&&r!==null){const[n,s]=r,a=e.isBackward(),i=n.getNode(),o=s.getNode(),l=t.is(i),u=t.is(o);if(l||u){const[d,f]=kA(e),g=i.is(o),p=t.is(a?o:i),x=t.is(a?i:o);let y,v=0;g?(v=d>f?f:d,y=d>f?d:f):p?(v=a?f:d,y=void 0):x&&(v=0,y=a?d:f),t.__text=t.__text.slice(v,y)}}return t}function vle(e){const t=e.getStyle(),r=UG(t);OA.set(t,r)}function wle(e,t){const r=e.getFormatType(),n=e.getIndent();r!==t.getFormatType()&&t.setFormat(r),n!==t.getIndent()&&t.setIndent(n)}function ap(e,t,r=wle){if(e===null)return;const n=e.getStartEndPoints(),s=new Map;let a=null;if(n){const[i,o]=n;a=G2(),a.anchor.set(i.key,i.offset,i.type),a.focus.set(o.key,o.offset,o.type);const l=mT(i.getNode(),dl),u=mT(o.getNode(),dl);wt(l)&&s.set(l.getKey(),l),wt(u)&&s.set(u.getKey(),u)}for(const i of e.getNodes())if(wt(i)&&dl(i))s.set(i.getKey(),i);else if(n===null){const o=mT(i,dl);wt(o)&&s.set(o.getKey(),o)}for(const[i,o]of s){const l=t();r(o,l),o.replace(l,!0),a&&(i===a.anchor.key&&a.anchor.set(l.getKey(),a.anchor.offset,a.anchor.type),i===a.focus.key&&a.focus.set(l.getKey(),a.focus.offset,a.focus.type))}a&&e.is(Xt())&&li(a)}function GG(e){const t=VG(e);return t!==null&&t.writingMode==="vertical-rl"}function VG(e){const t=e.anchor.getNode();return wt(t)?WG(t):zG(t)}function gD(e,t){let r=GG(e)?!t:t;qG(e)&&(r=!r);const n=Yu(e.focus,r?"previous":"next");if(IG(n))return!1;for(const s of V5(n)){if(Hc(s))return!s.origin.isInline();if(!wt(s.origin)){if(xn(s.origin))return!0;break}}return!1}function ble(e,t,r,n){e.modify(t?"extend":"move",r,n)}function qG(e){const t=VG(e);return t!==null&&t.direction==="rtl"}function pD(e,t,r){const n=qG(e);let s;s=GG(e)||n?!r:r,ble(e,t,s,"character")}function mT(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function _le(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const KG=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Sle=KG&&"documentMode"in document?document.documentMode:null;!(!KG||!("InputEvent"in window)||Sle)&&"getTargetRanges"in new window.InputEvent("input");function XG(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}function x0(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}function xa(e,...t){const r=XG(...t);r.length>0&&e.classList.add(...r)}function hf(e,...t){const r=XG(...t);r.length>0&&e.classList.remove(...r)}function kle(e){return e?e.getAdjacentCaret():null}function Tle(e,t){let r=e;for(;r!=null;){if(r instanceof t)return r;r=r.getParent()}return null}function Cle(e){const t=Q2(e,(r=>wt(r)&&!r.isInline()));return wt(t)||_le(4,e.__key),t}const Q2=(e,t)=>{let r=e;for(;r!==hs()&&r!=null;){if(t(r))return r;r=r.getParent()}return null};function Nh(e,t){return e!==null&&Object.getPrototypeOf(e).constructor.name===t.name}function YG(e,t){const r=[],n=Array.from(e).reverse();for(let s=n.pop();s!==void 0;s=n.pop())if(t(s))r.push(s);else if(wt(s))for(const a of Ele(s))n.push(a);return r}function Ele(e){return Nle(vl(e,"previous"))}function Nle(e){return q5({hasNext:r0,initial:e.getAdjacentCaret(),map:t=>t.origin.getLatest(),step:t=>t.getAdjacentCaret()})}function Ale(e){const t=window.location.origin,r=n=>{if(n.origin!==t)return;const s=e.getRootElement();if(document.activeElement!==s)return;const a=n.data;if(typeof a=="string"){let i;try{i=JSON.parse(a)}catch{return}if(i&&i.protocol==="nuanria_messaging"&&i.type==="request"){const o=i.payload;if(o&&o.functionId==="makeChanges"){const l=o.args;if(l){const[u,d,f,g,p,x]=l;e.update((()=>{const y=Xt();if(Ot(y)){const v=y.anchor;let T=v.getNode(),_=0,b=0;if(Yt(T)&&u>=0&&d>=0&&(_=u,b=u+d,y.setTextNodeRange(T,_,T,b)),_===b&&f===""||(y.insertRawText(f),T=v.getNode()),Yt(T)){_=g,b=g+p;const E=T.getTextContentSize();_=_>E?E:_,b=b>E?E:b,y.setTextNodeRange(T,_,T,b)}n.stopImmediatePropagation()}}))}}}}};return window.addEventListener("message",r,!0),()=>{window.removeEventListener("message",r,!0)}}function jle(e,t){const r=t.body?t.body.childNodes:[];let n=[];const s=[];for(let a=0;a<r.length;a++){const i=r[a];if(!QG.has(i.nodeName)){const o=ZG(i,e,s,!1);o!==null&&(n=n.concat(o))}}return(function(a){for(const i of a)i.getNextSibling()instanceof N5&&i.insertAfter(qc());for(const i of a){const o=i.getChildren();for(const l of o)i.insertBefore(l);i.remove()}})(s),n}function Ple(e,t){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const r=document.createElement("div"),n=hs().getChildren();for(let s=0;s<n.length;s++)JG(e,n[s],r,t);return r.innerHTML}function JG(e,t,r,n=null){let s=n===null||t.isSelected(n);const a=wt(t)&&t.excludeFromCopy("html");let i=t;if(n!==null){let p=B5(t);p=Yt(p)&&n!==null?HG(n,p):p,i=p}const o=wt(i)?i.getChildren():[],l=P5(e,i.getType());let u;u=l&&l.exportDOM!==void 0?l.exportDOM(e,i):i.exportDOM(e);const{element:d,after:f}=u;if(!d)return!1;const g=document.createDocumentFragment();for(let p=0;p<o.length;p++){const x=o[p],y=JG(e,x,g,n);!s&&wt(t)&&y&&t.extractWithChild(x,n,"html")&&(s=!0)}if(s&&!a){if((as(d)||jA(d))&&d.append(g),r.append(d),f){const p=f.call(i,d);p&&(jA(d)?d.replaceChildren(p):d.replaceWith(p))}}else r.append(g);return s}const QG=new Set(["STYLE","SCRIPT"]);function ZG(e,t,r,n,s=new Map,a){let i=[];if(QG.has(e.nodeName))return i;let o=null;const l=(function(x,y){const{nodeName:v}=x,T=y._htmlConversions.get(v.toLowerCase());let _=null;if(T!==void 0)for(const b of T){const E=b(x);E!==null&&(_===null||(_.priority||0)<=(E.priority||0))&&(_=E)}return _!==null?_.conversion:null})(e,t),u=l?l(e):null;let d=null;if(u!==null){d=u.after;const x=u.node;if(o=Array.isArray(x)?x[x.length-1]:x,o!==null){for(const[,y]of s)if(o=y(o,a),!o)break;o&&i.push(...Array.isArray(x)?x:[o])}u.forChild!=null&&s.set(e.nodeName,u.forChild)}const f=e.childNodes;let g=[];const p=(o==null||!Xi(o))&&(o!=null&&TA(o)||n);for(let x=0;x<f.length;x++)g.push(...ZG(f[x],t,r,p,new Map(s),o));return d!=null&&(g=d(g)),g_(e)&&(g=Ole(e,g,p?()=>{const x=new N5;return r.push(x),x}:ss)),o==null?g.length>0?i=i.concat(g):g_(e)&&(function(x){return x.nextSibling==null||x.previousSibling==null?!1:PA(x.nextSibling)&&PA(x.previousSibling)})(e)&&(i=i.concat(qc())):wt(o)&&o.append(...g),i}function Ole(e,t,r){const n=e.style.textAlign,s=[];let a=[];for(let i=0;i<t.length;i++){const o=t[i];if(TA(o))n&&!o.getFormat()&&o.setFormat(n),s.push(o);else if(a.push(o),i===t.length-1||i<t.length-1&&TA(t[i+1])){const l=r();l.setFormat(n),l.append(...a),s.push(l),a=[]}}return s}function p_(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Fle(e,t=Xt()){return t==null&&p_(166),Ot(t)&&t.isCollapsed()||t.getNodes().length===0?"":Ple(e,t)}function Rle(e,t=Xt()){return t==null&&p_(166),Ot(t)&&t.isCollapsed()||t.getNodes().length===0?null:JSON.stringify(Dle(e,t))}function mD(e,t,r){const n=e.getData("application/x-lexical-editor");if(n)try{const o=JSON.parse(n);if(o.namespace===r._config.namespace&&Array.isArray(o.nodes))return yD(r,Ile(o.nodes),t)}catch{}const s=e.getData("text/html"),a=e.getData("text/plain");if(s&&a!==s)try{const o=new DOMParser().parseFromString((function(l){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:u=>u}).createHTML(l):l})(s),"text/html");return yD(r,jle(r,o),t)}catch{}const i=a||e.getData("text/uri-list");if(i!=null)if(Ot(t)){const o=i.split(/(\r?\n|\t)/);o[o.length-1]===""&&o.pop();for(let l=0;l<o.length;l++){const u=Xt();if(Ot(u)){const d=o[l];d===`
`||d===`\r
`?u.insertParagraph():d==="	"?u.insertNodes([rm()]):u.insertText(d)}}}else t.insertRawText(i)}function yD(e,t,r){e.dispatchCommand(ioe,{nodes:t,selection:r})||(r.insertNodes(t),(function(n){if(Ot(n)&&n.isCollapsed()){const s=n.anchor;let a=null;const i=Yu(s,"previous");if(i)if(df(i))a=i.origin;else{const o=wf(i,vl(hs(),"next").getFlipped());for(const l of o){if(Yt(l.origin)){a=l.origin;break}if(wt(l.origin)&&!l.origin.isInline())break}}if(a&&Yt(a)){const o=a.getFormat(),l=a.getStyle();n.format===o&&n.style===l||(n.format=o,n.style=l,n.dirty=!0)}}})(r))}function eV(e,t,r,n=[]){let s=t===null||r.isSelected(t);const a=wt(r)&&r.excludeFromCopy("html");let i=r;if(t!==null){let u=B5(r);u=Yt(u)&&t!==null?HG(t,u):u,i=u}const o=wt(i)?i.getChildren():[],l=(function(u){const d=u.exportJSON(),f=u.constructor;if(d.type!==f.getType()&&p_(58,f.name),wt(u)){const g=d.children;Array.isArray(g)||p_(59,f.name)}return d})(i);if(Yt(i)){const u=i.__text;u.length>0?l.text=u:s=!1}for(let u=0;u<o.length;u++){const d=o[u],f=eV(e,t,d,l.children);!s&&wt(r)&&f&&r.extractWithChild(d,t,"clone")&&(s=!0)}if(s&&!a)n.push(l);else if(Array.isArray(l.children))for(let u=0;u<l.children.length;u++){const d=l.children[u];n.push(d)}return s}function Dle(e,t){const r=[],n=hs().getChildren();for(let s=0;s<n.length;s++)eV(e,t,n[s],r);return{namespace:e._config.namespace,nodes:r}}function Ile(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r],s=Poe(n);Yt(s)&&vle(s),t.push(s)}return t}let Tg=null;async function xD(e,t,r){if(Tg!==null)return!1;if(t!==null)return new Promise(((u,d)=>{e.update((()=>{u(vD(e,t,r))}))}));const n=e.getRootElement(),s=e._window||window,a=window.document,i=rc(s);if(n===null||i===null)return!1;const o=a.createElement("span");o.style.cssText="position: fixed; top: -1000px;",o.append(a.createTextNode("#")),n.append(o);const l=new Range;return l.setStart(o,0),l.setEnd(o,1),i.removeAllRanges(),i.addRange(l),new Promise(((u,d)=>{const f=e.registerCommand(W2,(g=>(Nh(g,ClipboardEvent)&&(f(),Tg!==null&&(window.clearTimeout(Tg),Tg=null),u(vD(e,g,r))),!0)),Moe);Tg=window.setTimeout((()=>{f(),Tg=null,u(!1)}),50),a.execCommand("copy"),o.remove()}))}function vD(e,t,r){if(r===void 0){const s=rc(e._window);if(!s)return!1;const a=s.anchorNode,i=s.focusNode;if(a!==null&&i!==null&&!b1(e,a,i))return!1;const o=Xt();if(o===null)return!1;r=Lle(o)}t.preventDefault();const n=t.clipboardData;return n!==null&&(Ble(n,r),!0)}const Mle=[["text/html",Fle],["application/x-lexical-editor",Rle]];function Lle(e=Xt()){const t={"text/plain":e?e.getTextContent():""};if(e){const r=S1();for(const[n,s]of Mle){const a=s(r,e);a!==null&&(t[n]=a)}}return t}function Ble(e,t){for(const r in t){const n=t[r];n!==void 0&&e.setData(r,n)}}function wD(e,t){if(document.caretRangeFromPoint!==void 0){const r=document.caretRangeFromPoint(e,t);return r===null?null:{node:r.startContainer,offset:r.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const r=document.caretPositionFromPoint(e,t);return r===null?null:{node:r.offsetNode,offset:r.offset}}return null}const im=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,$le=im&&"documentMode"in document?document.documentMode:null,Ule=!(!im||!("InputEvent"in window)||$le)&&"getTargetRanges"in new window.InputEvent("input"),Wle=im&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),bD=im&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,zle=im&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Hle=im&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!zle,_D=jr("DRAG_DROP_PASTE_FILE");let k1=class tV extends Ni{static getType(){return"quote"}static clone(t){return new tV(t.__key)}createDOM(t){const r=document.createElement("blockquote");return xa(r,t.theme.quote),r}updateDOM(t,r){return!1}static importDOM(){return{blockquote:t=>({conversion:Gle,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(as(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();s&&(r.dir=s)}return{element:r}}static importJSON(t){return T1().updateFromJSON(t)}insertNewAfter(t,r){const n=ss(),s=this.getDirection();return n.setDirection(s),this.insertAfter(n,r),n}collapseAtStart(){const t=ss();return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}canMergeWhenEmpty(){return!0}};function T1(){return Ji(new k1)}function SD(e){return e instanceof k1}let C1=class rV extends Ni{static getType(){return"heading"}static clone(t){return new rV(t.__tag,t.__key)}constructor(t,r){super(r),this.__tag=t}getTag(){return this.__tag}setTag(t){const r=this.getWritable();return this.__tag=t,r}createDOM(t){const r=this.__tag,n=document.createElement(r),s=t.theme.heading;if(s!==void 0){const a=s[r];xa(n,a)}return n}updateDOM(t,r,n){return t.__tag!==this.__tag}static importDOM(){return{h1:t=>({conversion:Cg,priority:0}),h2:t=>({conversion:Cg,priority:0}),h3:t=>({conversion:Cg,priority:0}),h4:t=>({conversion:Cg,priority:0}),h5:t=>({conversion:Cg,priority:0}),h6:t=>({conversion:Cg,priority:0}),p:t=>{const r=t.firstChild;return r!==null&&kD(r)?{conversion:()=>({node:null}),priority:3}:null},span:t=>kD(t)?{conversion:r=>({node:sf("h1")}),priority:3}:null}}exportDOM(t){const{element:r}=super.exportDOM(t);if(as(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();s&&(r.dir=s)}return{element:r}}static importJSON(t){return sf(t.tag).updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTag(t.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(t,r=!0){const n=t?t.anchor.offset:0,s=this.getLastDescendant(),a=!s||t&&t.anchor.key===s.getKey()&&n===s.getTextContentSize()||!t?ss():sf(this.getTag()),i=this.getDirection();if(a.setDirection(i),this.insertAfter(a,r),n===0&&!this.isEmpty()&&t){const o=ss();o.select(),this.replace(o,!0)}return a}collapseAtStart(){const t=this.isEmpty()?ss():sf(this.getTag());return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}extractWithChild(){return!0}};function kD(e){return e.nodeName.toLowerCase()==="span"&&e.style.fontSize==="26pt"}function Cg(e){const t=e.nodeName.toLowerCase();let r=null;return t!=="h1"&&t!=="h2"&&t!=="h3"&&t!=="h4"&&t!=="h5"&&t!=="h6"||(r=sf(t),e.style!==null&&($5(e,r),r.setFormat(e.style.textAlign))),{node:r}}function Gle(e){const t=T1();return e.style!==null&&(t.setFormat(e.style.textAlign),$5(e,t)),{node:t}}function sf(e="h1"){return Ji(new C1(e))}function Vle(e){return e instanceof C1}function lb(e){let t=null;if(Nh(e,DragEvent)?t=e.dataTransfer:Nh(e,ClipboardEvent)&&(t=e.clipboardData),t===null)return[!1,[],!1];const r=t.types,n=r.includes("Files"),s=r.includes("text/html")||r.includes("text/plain");return[n,Array.from(t.files),s]}function TD(e){const t=Xt();if(!Ot(t))return!1;const r=new Set,n=t.getNodes();for(let s=0;s<n.length;s++){const a=n[s],i=a.getKey();if(r.has(i))continue;const o=Q2(a,(u=>wt(u)&&!u.isInline()));if(o===null)continue;const l=o.getKey();o.canIndent()&&!r.has(l)&&(r.add(l),e(o))}return r.size>0}function CD(e){const t=vf(e);return xn(t)}function yT(e){for(const t of["lowercase","uppercase","capitalize"])e.hasFormat(t)&&e.toggleFormat(t)}function qle(e){return x0(e.registerCommand(y5,(t=>{const r=Xt();return!!mi(r)&&(r.clear(),!0)}),un),e.registerCommand(Mh,(t=>{const r=Xt();return Ot(r)?(r.deleteCharacter(t),!0):!!mi(r)&&(r.deleteNodes(),!0)}),un),e.registerCommand(uv,(t=>{const r=Xt();return!!Ot(r)&&(r.deleteWord(t),!0)}),un),e.registerCommand(dv,(t=>{const r=Xt();return!!Ot(r)&&(r.deleteLine(t),!0)}),un),e.registerCommand(rp,(t=>{const r=Xt();if(typeof t=="string")r!==null&&r.insertText(t);else{if(r===null)return!1;const n=t.dataTransfer;if(n!=null)mD(n,r,e);else if(Ot(r)){const s=t.data;return s&&r.insertText(s),!0}}return!0}),un),e.registerCommand(yA,(()=>{const t=Xt();return!!Ot(t)&&(t.removeText(),!0)}),un),e.registerCommand(Ti,(t=>{const r=Xt();return!!Ot(r)&&(r.formatText(t),!0)}),un),e.registerCommand(QH,(t=>{const r=Xt();if(!Ot(r)&&!mi(r))return!1;const n=r.getNodes();for(const s of n){const a=Q2(s,(i=>wt(i)&&!i.isInline()));a!==null&&a.setFormat(t)}return!0}),un),e.registerCommand(tp,(t=>{const r=Xt();return!!Ot(r)&&(r.insertLineBreak(t),!0)}),un),e.registerCommand(cv,(()=>{const t=Xt();return!!Ot(t)&&(t.insertParagraph(),!0)}),un),e.registerCommand(uoe,(()=>(Noe([rm()]),!0)),un),e.registerCommand(doe,(()=>TD((t=>{const r=t.getIndent();t.setIndent(r+1)}))),un),e.registerCommand(AR,(()=>TD((t=>{const r=t.getIndent();r>0&&t.setIndent(Math.max(0,r-1))}))),un),e.registerCommand(HH,(t=>{const r=Xt();if(mi(r)){const n=r.getNodes();if(n.length>0)return n[0].selectPrevious(),!0}else if(Ot(r)){const n=EA(r.focus,!0);if(!t.shiftKey&&xn(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),t.preventDefault(),!0}return!1}),un),e.registerCommand(GH,(t=>{const r=Xt();if(mi(r)){const n=r.getNodes();if(n.length>0)return n[0].selectNext(0,0),!0}else if(Ot(r)){if((function(s){const a=s.focus;return a.key==="root"&&a.offset===hs().getChildrenSize()})(r))return t.preventDefault(),!0;const n=EA(r.focus,!1);if(!t.shiftKey&&xn(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),t.preventDefault(),!0}return!1}),un),e.registerCommand(zH,(t=>{const r=Xt();if(mi(r)){const n=r.getNodes();if(n.length>0)return t.preventDefault(),hD(n[0])?n[0].selectNext(0,0):n[0].selectPrevious(),!0}if(!Ot(r))return!1;if(gD(r,!0)){const n=t.shiftKey;return t.preventDefault(),pD(r,n,!0),!0}return!1}),un),e.registerCommand(WH,(t=>{const r=Xt();if(mi(r)){const s=r.getNodes();if(s.length>0)return t.preventDefault(),hD(s[0])?s[0].selectPrevious():s[0].selectNext(0,0),!0}if(!Ot(r))return!1;const n=t.shiftKey;return!!gD(r,!1)&&(t.preventDefault(),pD(r,n,!1),!0)}),un),e.registerCommand(qH,(t=>{if(CD(t.target))return!1;const r=Xt();if(Ot(r)){if((function(n){if(!n.isCollapsed())return!1;const{anchor:s}=n;if(s.offset!==0)return!1;const a=s.getNode();if(wa(a))return!1;const i=Cle(a);return i.getIndent()>0&&(i.is(a)||a.is(i.getFirstDescendant()))})(r))return t.preventDefault(),e.dispatchCommand(AR,void 0);if(bD&&navigator.language==="ko-KR")return!1}else if(!mi(r))return!1;return t.preventDefault(),e.dispatchCommand(Mh,!0)}),un),e.registerCommand(XH,(t=>{if(CD(t.target))return!1;const r=Xt();return!(!Ot(r)&&!mi(r))&&(t.preventDefault(),e.dispatchCommand(Mh,!1))}),un),e.registerCommand(o_,(t=>{const r=Xt();if(!Ot(r))return!1;if(yT(r),t!==null){if((bD||Wle||Hle)&&Ule)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(tp,!1)}return e.dispatchCommand(cv,void 0)}),un),e.registerCommand(KH,(()=>{const t=Xt();return!!Ot(t)&&(e.blur(),!0)}),un),e.registerCommand(JH,(t=>{const[,r]=lb(t);if(r.length>0){const s=wD(t.clientX,t.clientY);if(s!==null){const{offset:a,node:i}=s,o=vf(i);if(o!==null){const l=G2();if(Yt(o))l.anchor.set(o.getKey(),a,"text"),l.focus.set(o.getKey(),a,"text");else{const d=o.getParentOrThrow().getKey(),f=o.getIndexWithinParent()+1;l.anchor.set(d,f,"element"),l.focus.set(d,f,"element")}const u=r_(l);li(u)}e.dispatchCommand(_D,r)}return t.preventDefault(),!0}const n=Xt();return!!Ot(n)}),un),e.registerCommand(ZH,(t=>{const[r]=lb(t),n=Xt();return!(r&&!Ot(n))}),un),e.registerCommand(eG,(t=>{const[r]=lb(t),n=Xt();if(r&&!Ot(n))return!1;const s=wD(t.clientX,t.clientY);if(s!==null){const a=vf(s.node);xn(a)&&t.preventDefault()}return!0}),un),e.registerCommand(xA,(()=>(Hoe(),!0)),un),e.registerCommand(W2,(t=>(xD(e,Nh(t,ClipboardEvent)?t:null),!0)),un),e.registerCommand(b5,(t=>((async function(r,n){await xD(n,Nh(r,ClipboardEvent)?r:null),n.update((()=>{const s=Xt();Ot(s)?s.removeText():mi(s)&&s.getNodes().forEach((a=>a.remove()))}))})(t,e),!0)),un),e.registerCommand(x5,(t=>{const[,r,n]=lb(t);return r.length>0&&!n?(e.dispatchCommand(_D,r),!0):sm(t.target)&&O5(t.target)?!1:Xt()!==null&&((function(s,a){s.preventDefault(),a.update((()=>{const i=Xt(),o=Nh(s,InputEvent)||Nh(s,KeyboardEvent)?null:s.clipboardData;o!=null&&i!==null&&mD(o,i,a)}),{tag:Foe})})(t,e),!0)}),un),e.registerCommand(VH,(t=>{const r=Xt();return Ot(r)&&yT(r),!1}),un),e.registerCommand(YH,(t=>{const r=Xt();return Ot(r)&&yT(r),!1}),un))}const FA=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?C.useLayoutEffect:C.useEffect;function ED(e){return e.getEditorState().read($G(e.isComposing()))}function nV({contentEditable:e,placeholder:t=null,ErrorBoundary:r}){const[n]=Yc(),s=(function(a,i){const[o,l]=C.useState((()=>a.getDecorators()));return FA((()=>a.registerDecoratorListener((u=>{OO.flushSync((()=>{l(u)}))}))),[a]),C.useEffect((()=>{l(a.getDecorators())}),[a]),C.useMemo((()=>{const u=[],d=Object.keys(o);for(let f=0;f<d.length;f++){const g=d[f],p=c.jsx(i,{onError:y=>a._onError(y),children:c.jsx(C.Suspense,{fallback:null,children:o[g]})}),x=a.getElementByKey(g);x!==null&&u.push(OO.createPortal(p,x,g))}return u}),[i,o,a])})(n,r);return(function(a){FA((()=>x0(qle(a),Ale(a))),[a])})(n),c.jsxs(c.Fragment,{children:[e,c.jsx(Kle,{content:t}),s]})}function Kle({content:e}){const[t]=Yc(),r=(function(s){const[a,i]=C.useState((()=>ED(s)));return FA((()=>{function o(){const l=ED(s);i(l)}return o(),x0(s.registerUpdateListener((()=>{o()})),s.registerEditableListener((()=>{o()})))}),[s]),a})(t),n=ple();return r?typeof e=="function"?e(n):e:null}const sV=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?C.useLayoutEffect:C.useEffect;function Xle({editor:e,ariaActiveDescendant:t,ariaAutoComplete:r,ariaControls:n,ariaDescribedBy:s,ariaErrorMessage:a,ariaExpanded:i,ariaInvalid:o,ariaLabel:l,ariaLabelledBy:u,ariaMultiline:d,ariaOwns:f,ariaRequired:g,autoCapitalize:p,className:x,id:y,role:v="textbox",spellCheck:T=!0,style:_,tabIndex:b,"data-testid":E,...k},A){const[P,j]=C.useState(e.isEditable()),O=C.useCallback((M=>{M&&M.ownerDocument&&M.ownerDocument.defaultView?e.setRootElement(M):e.setRootElement(null)}),[e]),R=C.useMemo((()=>(function(...M){return G=>{M.forEach((K=>{typeof K=="function"?K(G):K!=null&&(K.current=G)}))}})(A,O)),[O,A]);return sV((()=>(j(e.isEditable()),e.registerEditableListener((M=>{j(M)})))),[e]),c.jsx("div",{"aria-activedescendant":P?t:void 0,"aria-autocomplete":P?r:"none","aria-controls":P?n:void 0,"aria-describedby":s,...a!=null?{"aria-errormessage":a}:{},"aria-expanded":P&&v==="combobox"?!!i:void 0,...o!=null?{"aria-invalid":o}:{},"aria-label":l,"aria-labelledby":u,"aria-multiline":d,"aria-owns":P?f:void 0,"aria-readonly":!P||void 0,"aria-required":g,autoCapitalize:p,className:x,contentEditable:P,"data-testid":E,id:y,ref:R,role:v,spellCheck:T,style:_,tabIndex:b,...k})}const Yle=C.forwardRef(Xle);function ND(e){return e.getEditorState().read($G(e.isComposing()))}const aV=C.forwardRef(Jle);function Jle(e,t){const{placeholder:r,...n}=e,[s]=Yc();return c.jsxs(c.Fragment,{children:[c.jsx(Yle,{editor:s,...n,ref:t}),r!=null&&c.jsx(Qle,{editor:s,content:r})]})}function Qle({content:e,editor:t}){const r=(function(i){const[o,l]=C.useState((()=>ND(i)));return sV((()=>{function u(){const d=ND(i);l(d)}return u(),x0(i.registerUpdateListener((()=>{u()})),i.registerEditableListener((()=>{u()})))}),[i]),o})(t),[n,s]=C.useState(t.isEditable());if(C.useLayoutEffect((()=>(s(t.isEditable()),t.registerEditableListener((i=>{s(i)})))),[t]),!r)return null;let a=null;return typeof e=="function"?a=e(n):e!==null&&(a=e),a===null?null:c.jsx("div",{"aria-hidden":!0,children:a})}const cb=0,RA=1,DA=2,Wl=0,Zle=1,AD=2,ece=3,tce=4;function rce(e,t,r,n,s){if(e===null||r.size===0&&n.size===0&&!s)return Wl;const a=t._selection,i=e._selection;if(s)return Zle;if(!(Ot(a)&&Ot(i)&&i.isCollapsed()&&a.isCollapsed()))return Wl;const o=(function(T,_,b){const E=T._nodeMap,k=[];for(const A of _){const P=E.get(A);P!==void 0&&k.push(P)}for(const[A,P]of b){if(!P)continue;const j=E.get(A);j===void 0||wa(j)||k.push(j)}return k})(t,r,n);if(o.length===0)return Wl;if(o.length>1){const T=t._nodeMap,_=T.get(a.anchor.key),b=T.get(i.anchor.key);return _&&b&&!e._nodeMap.has(_.__key)&&Yt(_)&&_.__text.length===1&&a.anchor.offset===1?AD:Wl}const l=o[0],u=e._nodeMap.get(l.__key);if(!Yt(u)||!Yt(l)||u.__mode!==l.__mode)return Wl;const d=u.__text,f=l.__text;if(d===f)return Wl;const g=a.anchor,p=i.anchor;if(g.key!==p.key||g.type!=="text")return Wl;const x=g.offset,y=p.offset,v=f.length-d.length;return v===1&&y===x-1?AD:v===-1&&y===x+1?ece:v===-1&&y===x?tce:Wl}function nce(e,t){let r=Date.now(),n=Wl;return(s,a,i,o,l,u)=>{const d=Date.now();if(u.has(d_))return n=Wl,r=d,DA;const f=rce(s,a,o,l,e.isComposing()),g=(()=>{const p=i===null||i.editor===e,x=u.has(Ooe);if(!x&&p&&u.has(Mx))return cb;if(s===null)return RA;const y=a._selection;return o.size>0||l.size>0?x===!1&&f!==Wl&&f===n&&d<r+t&&p||o.size===1&&(function(v,T,_){const b=T._nodeMap.get(v),E=_._nodeMap.get(v),k=T._selection,A=_._selection;return!(Ot(k)&&Ot(A)&&k.anchor.type==="element"&&k.focus.type==="element"&&A.anchor.type==="text"&&A.focus.type==="text"||!Yt(b)||!Yt(E)||b.__parent!==E.__parent)&&JSON.stringify(T.read((()=>b.exportJSON())))===JSON.stringify(_.read((()=>E.exportJSON())))})(Array.from(o)[0],s,a)?cb:RA:y!==null?cb:DA})();return r=d,n=f,g}}function jD(e){e.undoStack=[],e.redoStack=[],e.current=null}function sce(e,t,r){const n=nce(e,r);return x0(e.registerCommand(v5,(()=>((function(a,i){const o=i.redoStack,l=i.undoStack;if(l.length!==0){const u=i.current,d=l.pop();u!==null&&(o.push(u),a.dispatchCommand(eb,!0)),l.length===0&&a.dispatchCommand(tb,!1),i.current=d||null,d&&d.editor.setEditorState(d.editorState,{tag:d_})}})(e,t),!0)),un),e.registerCommand(w5,(()=>((function(a,i){const o=i.redoStack,l=i.undoStack;if(o.length!==0){const u=i.current;u!==null&&(l.push(u),a.dispatchCommand(tb,!0));const d=o.pop();o.length===0&&a.dispatchCommand(eb,!1),i.current=d||null,d&&d.editor.setEditorState(d.editorState,{tag:d_})}})(e,t),!0)),un),e.registerCommand(hoe,(()=>(jD(t),!1)),un),e.registerCommand(goe,(()=>(jD(t),e.dispatchCommand(eb,!1),e.dispatchCommand(tb,!1),!0)),un),e.registerUpdateListener((({editorState:a,prevEditorState:i,dirtyLeaves:o,dirtyElements:l,tags:u})=>{const d=t.current,f=t.redoStack,g=t.undoStack,p=d===null?null:d.editorState;if(d!==null&&a===p)return;const x=n(i,a,d,o,l,u);if(x===RA)f.length!==0&&(t.redoStack=[],e.dispatchCommand(eb,!1)),d!==null&&(g.push({...d}),e.dispatchCommand(tb,!0));else if(x===DA)return;t.current={editor:e,editorState:a}})))}function ace(){return{current:null,redoStack:[],undoStack:[]}}function iV({delay:e,externalHistoryState:t}){const[r]=Yc();return(function(n,s,a=1e3){const i=C.useMemo((()=>s||ace()),[s]);C.useEffect((()=>sce(n,i,a)),[a,n,i])})(r,t,e),null}function oV({defaultSelection:e}){const[t]=Yc();return C.useEffect((()=>{t.focus((()=>{const r=document.activeElement,n=t.getRootElement();n===null||r!==null&&n.contains(r)||n.focus({preventScroll:!0})}),{defaultSelection:e})}),[e,t]),null}function IA(e,t){return IA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},IA(e,t)}var PD={error:null},ice=(function(e){var t,r;function n(){for(var a,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(a=e.call.apply(e,[this].concat(o))||this).state=PD,a.resetErrorBoundary=function(){for(var u,d=arguments.length,f=new Array(d),g=0;g<d;g++)f[g]=arguments[g];a.props.onReset==null||(u=a.props).onReset.apply(u,f),a.reset()},a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,IA(t,r),n.getDerivedStateFromError=function(a){return{error:a}};var s=n.prototype;return s.reset=function(){this.setState(PD)},s.componentDidCatch=function(a,i){var o,l;(o=(l=this.props).onError)==null||o.call(l,a,i)},s.componentDidUpdate=function(a,i){var o,l,u,d,f=this.state.error,g=this.props.resetKeys;f!==null&&i.error!==null&&((u=a.resetKeys)===void 0&&(u=[]),(d=g)===void 0&&(d=[]),u.length!==d.length||u.some((function(p,x){return!Object.is(p,d[x])})))&&((o=(l=this.props).onResetKeysChange)==null||o.call(l,a.resetKeys,g),this.reset())},s.render=function(){var a=this.state.error,i=this.props,o=i.fallbackRender,l=i.FallbackComponent,u=i.fallback;if(a!==null){var d={error:a,resetErrorBoundary:this.resetErrorBoundary};if(C.isValidElement(u))return u;if(typeof o=="function")return o(d);if(l)return C.createElement(l,d);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},n})(C.Component);function lV({children:e,onError:t}){return c.jsx(ice,{fallback:c.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:t,children:e})}const X5=/^(\d+(?:\.\d+)?)px$/,ip={BOTH:3,NO_STATUS:0,ROW:1};class om extends Ni{static getType(){return"tablecell"}static clone(t){return new om(t.__headerState,t.__colSpan,t.__width,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__rowSpan=t.__rowSpan,this.__backgroundColor=t.__backgroundColor,this.__verticalAlign=t.__verticalAlign}static importDOM(){return{td:t=>({conversion:OD,priority:0}),th:t=>({conversion:OD,priority:0})}}static importJSON(t){return cV().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeaderStyles(t.headerState).setColSpan(t.colSpan||1).setRowSpan(t.rowSpan||1).setWidth(t.width||void 0).setBackgroundColor(t.backgroundColor||null).setVerticalAlign(t.verticalAlign||void 0)}constructor(t=ip.NO_STATUS,r=1,n,s){super(s),this.__colSpan=r,this.__rowSpan=1,this.__headerState=t,this.__width=n,this.__backgroundColor=null,this.__verticalAlign=void 0}createDOM(t){const r=document.createElement(this.getTag());return this.__width&&(r.style.width=`${this.__width}px`),this.__colSpan>1&&(r.colSpan=this.__colSpan),this.__rowSpan>1&&(r.rowSpan=this.__rowSpan),this.__backgroundColor!==null&&(r.style.backgroundColor=this.__backgroundColor),MA(this.__verticalAlign)&&(r.style.verticalAlign=this.__verticalAlign),xa(r,t.theme.tableCell,this.hasHeader()&&t.theme.tableCellHeader),r}exportDOM(t){const r=super.exportDOM(t);if(as(r.element)){const n=r.element;n.setAttribute("data-temporary-table-cell-lexical-key",this.getKey()),n.style.border="1px solid black",this.__colSpan>1&&(n.colSpan=this.__colSpan),this.__rowSpan>1&&(n.rowSpan=this.__rowSpan),n.style.width=`${this.getWidth()||75}px`,n.style.verticalAlign=this.getVerticalAlign()||"top",n.style.textAlign="start",this.__backgroundColor===null&&this.hasHeader()&&(n.style.backgroundColor="#f2f3f5")}return r}exportJSON(){return{...super.exportJSON(),...MA(this.__verticalAlign)&&{verticalAlign:this.__verticalAlign},backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,width:this.getWidth()}}getColSpan(){return this.getLatest().__colSpan}setColSpan(t){const r=this.getWritable();return r.__colSpan=t,r}getRowSpan(){return this.getLatest().__rowSpan}setRowSpan(t){const r=this.getWritable();return r.__rowSpan=t,r}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(t,r=ip.BOTH){const n=this.getWritable();return n.__headerState=t&r|n.__headerState&~r,n}getHeaderStyles(){return this.getLatest().__headerState}setWidth(t){const r=this.getWritable();return r.__width=t,r}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(t){const r=this.getWritable();return r.__backgroundColor=t,r}getVerticalAlign(){return this.getLatest().__verticalAlign}setVerticalAlign(t){const r=this.getWritable();return r.__verticalAlign=t||void 0,r}toggleHeaderStyle(t){const r=this.getWritable();return(r.__headerState&t)===t?r.__headerState-=t:r.__headerState+=t,r}hasHeaderState(t){return(this.getHeaderStyles()&t)===t}hasHeader(){return this.getLatest().__headerState!==ip.NO_STATUS}updateDOM(t){return t.__headerState!==this.__headerState||t.__width!==this.__width||t.__colSpan!==this.__colSpan||t.__rowSpan!==this.__rowSpan||t.__backgroundColor!==this.__backgroundColor||t.__verticalAlign!==this.__verticalAlign}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}}function MA(e){return e==="middle"||e==="bottom"}function OD(e){const t=e,r=e.nodeName.toLowerCase();let n;X5.test(t.style.width)&&(n=parseFloat(t.style.width));const s=cV(r==="th"?ip.ROW:ip.NO_STATUS,t.colSpan,n);s.__rowSpan=t.rowSpan;const a=t.style.backgroundColor;a!==""&&(s.__backgroundColor=a);const i=t.style.verticalAlign;MA(i)&&(s.__verticalAlign=i);const o=t.style,l=(o&&o.textDecoration||"").split(" "),u=o.fontWeight==="700"||o.fontWeight==="bold",d=l.includes("line-through"),f=o.fontStyle==="italic",g=l.includes("underline");return{after:p=>{const x=[];let y=null;const v=()=>{if(y){const T=y.getFirstChild();$u(T)&&y.getChildrenSize()===1&&T.remove()}};for(const T of p)qoe(T)||Yt(T)||$u(T)?(Yt(T)&&(u&&T.toggleFormat("bold"),d&&T.toggleFormat("strikethrough"),f&&T.toggleFormat("italic"),g&&T.toggleFormat("underline")),y?y.append(T):(y=ss().append(T),x.push(y))):(x.push(T),v(),y=null);return v(),x.length===0&&x.push(ss()),x},node:s}}function cV(e=ip.NO_STATUS,t=1,r){return Ji(new om(e,t,r))}function hv(e){return e instanceof om}function LA(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}class lm extends Ni{static getType(){return"tablerow"}static clone(t){return new lm(t.__height,t.__key)}static importDOM(){return{tr:t=>({conversion:oce,priority:0})}}static importJSON(t){return uV().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeight(t.height)}constructor(t,r){super(r),this.__height=t}exportJSON(){const t=this.getHeight();return{...super.exportJSON(),...t===void 0?void 0:{height:t}}}createDOM(t){const r=document.createElement("tr");return this.__height&&(r.style.height=`${this.__height}px`),xa(r,t.theme.tableRow),r}extractWithChild(t,r,n){return n==="html"}isShadowRoot(){return!0}setHeight(t){const r=this.getWritable();return r.__height=t,r}getHeight(){return this.getLatest().__height}updateDOM(t){return t.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function oce(e){const t=e;let r;return X5.test(t.style.height)&&(r=parseFloat(t.style.height)),{after:n=>YG(n,hv),node:uV(r)}}function uV(e){return Ji(new lm(e))}function dV(e){return e instanceof lm}const fV=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,lce=fV&&"documentMode"in document?document.documentMode:null;fV&&"InputEvent"in window&&!lce&&new window.InputEvent("input");function cce(e,t,r){const n=[];let s=null,a=null;function i(l){let u=n[l];return u===void 0&&(n[l]=u=[]),u}const o=e.getChildren();for(let l=0;l<o.length;l++){const u=o[l];dV(u)||LA(209);const d=i(l);for(let f=u.getFirstChild(),g=0;f!=null;f=f.getNextSibling()){for(hv(f)||LA(147);d[g]!==void 0;)g++;const p={cell:f,startColumn:g,startRow:l},{__rowSpan:x,__colSpan:y}=f;for(let v=0;v<x&&!(l+v>=o.length);v++){const T=i(l+v);for(let _=0;_<y;_++)T[g+_]=p}}}return[n,s,a]}function ax(e){return as(e)&&e.nodeName==="TABLE"}function uce(e,t){for(let r=t,n=null;r!==null;r=r.getParent()){if(e.is(r))return n;hv(r)&&(n=r)}return null}function dce(e,t,r){return uce(e,vf(t,r))}function FD(e,t,r){if(!t.theme.tableAlignment)return;const n=[],s=[];for(const a of["center","right"]){const i=t.theme.tableAlignment[a];i&&(a===r?s:n).push(i)}hf(e,...n),xa(e,...s)}const fce=new WeakSet;function RD(e=S1()){return fce.has(e)}class E1 extends Ni{static getType(){return"table"}getColWidths(){return this.getLatest().__colWidths}setColWidths(t){const r=this.getWritable();return r.__colWidths=t,r}static clone(t){return new E1(t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__colWidths=t.__colWidths,this.__rowStriping=t.__rowStriping,this.__frozenColumnCount=t.__frozenColumnCount,this.__frozenRowCount=t.__frozenRowCount}static importDOM(){return{table:t=>({conversion:hce,priority:1})}}static importJSON(t){return hV().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setRowStriping(t.rowStriping||!1).setFrozenColumns(t.frozenColumnCount||0).setFrozenRows(t.frozenRowCount||0).setColWidths(t.colWidths)}constructor(t){super(t),this.__rowStriping=!1,this.__frozenColumnCount=0,this.__frozenRowCount=0}exportJSON(){return{...super.exportJSON(),colWidths:this.getColWidths(),frozenColumnCount:this.__frozenColumnCount?this.__frozenColumnCount:void 0,frozenRowCount:this.__frozenRowCount?this.__frozenRowCount:void 0,rowStriping:this.__rowStriping?this.__rowStriping:void 0}}extractWithChild(t,r,n){return n==="html"}getDOMSlot(t){const r=ax(t)?t:t.querySelector("table");return ax(r)||LA(229),super.getDOMSlot(t).withElement(r).withAfter(r.querySelector("colgroup"))}createDOM(t,r){const n=document.createElement("table");this.__style&&(n.style.cssText=this.__style);const s=document.createElement("colgroup");if(n.appendChild(s),Qoe(s),xa(n,t.theme.table),this.updateTableElement(null,n,t),RD(r)){const a=document.createElement("div"),i=t.theme.tableScrollableWrapper;return i?xa(a,i):a.style.cssText="overflow-x: auto;",a.appendChild(n),this.updateTableWrapper(null,a,n,t),a}return n}updateTableWrapper(t,r,n,s){this.__frozenColumnCount!==(t?t.__frozenColumnCount:0)&&(function(a,i,o,l){l>0?(xa(a,o.theme.tableFrozenColumn),i.setAttribute("data-lexical-frozen-column","true")):(hf(a,o.theme.tableFrozenColumn),i.removeAttribute("data-lexical-frozen-column"))})(r,n,s,this.__frozenColumnCount),this.__frozenRowCount!==(t?t.__frozenRowCount:0)&&(function(a,i,o,l){l>0?(xa(a,o.theme.tableFrozenRow),i.setAttribute("data-lexical-frozen-row","true")):(hf(a,o.theme.tableFrozenRow),i.removeAttribute("data-lexical-frozen-row"))})(r,n,s,this.__frozenRowCount)}updateTableElement(t,r,n){this.__style!==(t?t.__style:"")&&(r.style.cssText=this.__style),this.__rowStriping!==(!!t&&t.__rowStriping)&&(function(s,a,i){i?(xa(s,a.theme.tableRowStriping),s.setAttribute("data-lexical-row-striping","true")):(hf(s,a.theme.tableRowStriping),s.removeAttribute("data-lexical-row-striping"))})(r,n,this.__rowStriping),(function(s,a,i,o){const l=s.querySelector("colgroup");if(!l)return;const u=[];for(let d=0;d<i;d++){const f=document.createElement("col"),g=o&&o[d];g&&(f.style.width=`${g}px`),u.push(f)}l.replaceChildren(...u)})(r,0,this.getColumnCount(),this.getColWidths()),FD(r,n,this.getFormatType())}updateDOM(t,r,n){const s=this.getDOMSlot(r).element;return r===s===RD()||(as(a=r)&&a.nodeName==="DIV"&&this.updateTableWrapper(t,r,s,n),this.updateTableElement(t,s,n),!1);var a}exportDOM(t){const r=super.exportDOM(t),{element:n}=r;return{after:s=>{if(r.after&&(s=r.after(s)),!ax(s)&&as(s)&&(s=s.querySelector("table")),!ax(s))return null;FD(s,t._config,this.getFormatType());const[a]=cce(this),i=new Map;for(const d of a)for(const f of d){const g=f.cell.getKey();i.has(g)||i.set(g,{colSpan:f.cell.getColSpan(),startColumn:f.startColumn})}const o=new Set;for(const d of s.querySelectorAll(":scope > tr > [data-temporary-table-cell-lexical-key]")){const f=d.getAttribute("data-temporary-table-cell-lexical-key");if(f){const g=i.get(f);if(d.removeAttribute("data-temporary-table-cell-lexical-key"),g){i.delete(f);for(let p=0;p<g.colSpan;p++)o.add(p+g.startColumn)}}}const l=s.querySelector(":scope > colgroup");if(l){const d=Array.from(s.querySelectorAll(":scope > colgroup > col")).filter(((f,g)=>o.has(g)));l.replaceChildren(...d)}const u=s.querySelectorAll(":scope > tr");if(u.length>0){const d=document.createElement("tbody");for(const f of u)d.appendChild(f);s.append(d)}return s},element:!ax(n)&&as(n)?n.querySelector("table"):n}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(t,r){const{rows:n,domRows:s}=r;for(let a=0;a<n;a++){const i=s[a];if(i!=null)for(let o=0;o<i.length;o++){const l=i[o];if(l==null)continue;const{elem:u}=l,d=dce(this,u);if(d!==null&&t.is(d))return{x:o,y:a}}}throw new Error("Cell not found in table.")}getDOMCellFromCords(t,r,n){const{domRows:s}=n,a=s[r];if(a==null)return null;const i=a[t<a.length?t:a.length-1];return i??null}getDOMCellFromCordsOrThrow(t,r,n){const s=this.getDOMCellFromCords(t,r,n);if(!s)throw new Error("Cell not found at cords.");return s}getCellNodeFromCords(t,r,n){const s=this.getDOMCellFromCords(t,r,n);if(s==null)return null;const a=vf(s.elem);return hv(a)?a:null}getCellNodeFromCordsOrThrow(t,r,n){const s=this.getCellNodeFromCords(t,r,n);if(!s)throw new Error("Node at cords not TableCellNode.");return s}getRowStriping(){return!!this.getLatest().__rowStriping}setRowStriping(t){const r=this.getWritable();return r.__rowStriping=t,r}setFrozenColumns(t){const r=this.getWritable();return r.__frozenColumnCount=t,r}getFrozenColumns(){return this.getLatest().__frozenColumnCount}setFrozenRows(t){const r=this.getWritable();return r.__frozenRowCount=t,r}getFrozenRows(){return this.getLatest().__frozenRowCount}canSelectBefore(){return!0}canIndent(){return!1}getColumnCount(){const t=this.getFirstChild();if(!t)return 0;let r=0;return t.getChildren().forEach((n=>{hv(n)&&(r+=n.getColSpan())})),r}}function hce(e){const t=hV();e.hasAttribute("data-lexical-row-striping")&&t.setRowStriping(!0),e.hasAttribute("data-lexical-frozen-column")&&t.setFrozenColumns(1),e.hasAttribute("data-lexical-frozen-row")&&t.setFrozenRows(1);const r=e.querySelector(":scope > colgroup");if(r){let n=[];for(const s of r.querySelectorAll(":scope > col")){let a=s.style.width||"";if(!X5.test(a)&&(a=s.getAttribute("width")||"",!/^\d+$/.test(a))){n=void 0;break}n.push(parseFloat(a))}n&&t.setColWidths(n)}return{after:n=>YG(n,dV),node:t}}function hV(){return Ji(new E1)}function af(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function BA(e){let t=1,r=e.getParent();for(;r!=null;){if(Sn(r)){const n=r.getParent();if(Hr(n)){t++,r=n.getParent();continue}af(40)}return t}return t}function $A(e){let t=e.getParent();Hr(t)||af(40);let r=t;for(;r!==null;)r=r.getParent(),Hr(r)&&(t=r);return t}function gV(e){let t=[];const r=e.getChildren().filter(Sn);for(let n=0;n<r.length;n++){const s=r[n],a=s.getFirstChild();Hr(a)?t=t.concat(gV(a)):t.push(s)}return t}function Lc(e){return Sn(e)&&Hr(e.getFirstChild())}function DD(e){return Io().append(e)}function pV(e,t){return Sn(e)&&(t.length===0||t.length===1&&e.is(t[0])&&e.getChildrenSize()===0)}function ID(e){const t=Xt();if(t!==null){let r=t.getNodes();if(Ot(t)){const s=t.getStartEndPoints();s===null&&af(143);const[a]=s,i=a.getNode(),o=i.getParent();if(Xi(i)){const l=i.getFirstChild();if(l)r=l.selectStart().getNodes();else{const u=ss();i.append(u),r=u.select().getNodes()}}else if(pV(i,r)){const l=go(e);if(Xi(o)){i.replace(l);const u=Io();wt(i)&&(u.setFormat(i.getFormatType()),u.setIndent(i.getIndent())),l.append(u)}else if(Sn(i)){const u=i.getParentOrThrow();a0(l,u.getChildren()),u.replace(l)}return}}const n=new Set;for(let s=0;s<r.length;s++){const a=r[s];if(wt(a)&&a.isEmpty()&&!Sn(a)&&!n.has(a.getKey())){MD(a,e);continue}let i=kG(a)?a.getParent():Sn(a)&&a.isEmpty()?a:null;for(;i!=null;){const o=i.getKey();if(Hr(i)){if(!n.has(o)){const l=go(e);a0(l,i.getChildren()),i.replace(l),n.add(o)}break}{const l=i.getParent();if(Xi(l)&&!n.has(o)){n.add(o),MD(i,e);break}i=l}}}}}function a0(e,t){e.splice(e.getChildrenSize(),0,t)}function MD(e,t){if(Hr(e))return e;const r=e.getPreviousSibling(),n=e.getNextSibling(),s=Io();let a;if(a0(s,e.getChildren()),Hr(r)&&t===r.getListType())r.append(s),Hr(n)&&t===n.getListType()&&(a0(r,n.getChildren()),n.remove()),a=r;else if(Hr(n)&&t===n.getListType())n.getFirstChildOrThrow().insertBefore(s),a=n;else{const i=go(t);i.append(s),e.replace(i),a=i}return s.setFormat(e.getFormatType()),s.setIndent(e.getIndent()),e.remove(),a}function Y5(e,t){const r=e.getLastChild(),n=t.getFirstChild();r&&n&&Lc(r)&&Lc(n)&&(Y5(r.getFirstChild(),n.getFirstChild()),n.remove());const s=t.getChildren();s.length>0&&e.append(...s),t.remove()}function gce(){const e=Xt();if(Ot(e)){const t=new Set,r=e.getNodes(),n=e.anchor.getNode();if(pV(n,r))t.add($A(n));else for(let s=0;s<r.length;s++){const a=r[s];if(kG(a)){const i=Tle(a,nd);i!=null&&t.add($A(i))}}for(const s of t){let a=s;const i=gV(s);for(const o of i){const l=ss().setTextStyle(e.style).setTextFormat(e.format);a0(l,o.getChildren()),a.insertAfter(l),a=l,o.__key===e.anchor.key&&s0(e.anchor,fl(vl(l,"next"))),o.__key===e.focus.key&&s0(e.focus,fl(vl(l,"next"))),o.remove()}s.remove()}}}function mV(e){const t=e.getListType()!=="check";let r=e.getStart();for(const n of e.getChildren())Sn(n)&&(n.getValue()!==r&&n.setValue(r),t&&n.getLatest().__checked!=null&&n.setChecked(void 0),Hr(n.getFirstChild())||r++)}function pce(e){const t=new Set;if(Lc(e)||t.has(e.getKey()))return;const r=e.getParent(),n=e.getNextSibling(),s=e.getPreviousSibling();if(Lc(n)&&Lc(s)){const a=s.getFirstChild();if(Hr(a)){a.append(e);const i=n.getFirstChild();Hr(i)&&(a0(a,i.getChildren()),n.remove(),t.add(n.getKey()))}}else if(Lc(n)){const a=n.getFirstChild();if(Hr(a)){const i=a.getFirstChild();i!==null&&i.insertBefore(e)}}else if(Lc(s)){const a=s.getFirstChild();Hr(a)&&a.append(e)}else if(Hr(r)){const a=Io().setTextFormat(e.getTextFormat()).setTextStyle(e.getTextStyle()),i=go(r.getListType()).setTextFormat(r.getTextFormat()).setTextStyle(r.getTextStyle());a.append(i),i.append(e),s?s.insertAfter(a):n?n.insertBefore(a):r.append(a)}}function mce(e){if(Lc(e))return;const t=e.getParent(),r=t?t.getParent():void 0;if(Hr(r?r.getParent():void 0)&&Sn(r)&&Hr(t)){const n=t?t.getFirstChild():void 0,s=t?t.getLastChild():void 0;if(e.is(n))r.insertBefore(e),t.isEmpty()&&r.remove();else if(e.is(s))r.insertAfter(e),t.isEmpty()&&r.remove();else{const a=t.getListType(),i=Io(),o=go(a);i.append(o),e.getPreviousSiblings().forEach((d=>o.append(d)));const l=Io(),u=go(a);l.append(u),a0(u,e.getNextSiblings()),r.insertBefore(i),r.insertAfter(l),r.replace(e)}}}function yce(){const e=Xt();if(!Ot(e)||!e.isCollapsed())return!1;const t=e.anchor.getNode();if(!Sn(t)||t.getChildrenSize()!==0)return!1;const r=$A(t),n=t.getParent();Hr(n)||af(40);const s=n.getParent();let a;if(Xi(s))a=ss(),r.insertAfter(a);else{if(!Sn(s))return!1;a=Io(),s.insertAfter(a)}a.setTextStyle(e.style).setTextFormat(e.format).select();const i=t.getNextSiblings();if(i.length>0){const o=go(n.getListType());if(Sn(a)){const l=Io();l.append(o),a.insertAfter(l)}else a.insertAfter(o);o.append(...i)}return(function(o){let l=o;for(;l.getNextSibling()==null&&l.getPreviousSibling()==null;){const u=l.getParent();if(u==null||!Sn(u)&&!Hr(u))break;l=u}l.remove()})(t),!0}function m_(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}let nd=class extends Ni{$config(){return this.config("listitem",{$transform:t=>{if(t.__checked==null)return;const r=t.getParent();Hr(r)&&r.getListType()!=="check"&&t.getChecked()!=null&&t.setChecked(void 0)},extends:Ni,importDOM:{li:()=>({conversion:xce,priority:0})}})}constructor(t=1,r=void 0,n){super(n),this.__value=t===void 0?1:t,this.__checked=r}afterCloneFrom(t){super.afterCloneFrom(t),this.__value=t.__value,this.__checked=t.__checked}createDOM(t){const r=document.createElement("li");return this.updateListItemDOM(null,r,t),r}updateListItemDOM(t,r,n){const s=this.getParent();Hr(s)&&s.getListType()==="check"&&(function(o,l,u,d){Hr(l.getFirstChild())?(o.removeAttribute("role"),o.removeAttribute("tabIndex"),o.removeAttribute("aria-checked")):(o.setAttribute("role","checkbox"),o.setAttribute("tabIndex","-1"),u&&l.__checked===u.__checked||o.setAttribute("aria-checked",l.getChecked()?"true":"false"))})(r,this,t),r.value=this.__value,(function(o,l,u){const d=[],f=[],g=l.list,p=g?g.listitem:void 0;let x;if(g&&g.nested&&(x=g.nested.listitem),p!==void 0&&d.push(...m_(p)),g){const y=u.getParent(),v=Hr(y)&&y.getListType()==="check",T=u.getChecked();v&&!T||f.push(g.listitemUnchecked),v&&T||f.push(g.listitemChecked),v&&d.push(T?g.listitemChecked:g.listitemUnchecked)}if(x!==void 0){const y=m_(x);u.getChildren().some((v=>Hr(v)))?d.push(...y):f.push(...y)}f.length>0&&hf(o,...f),d.length>0&&xa(o,...d)})(r,n.theme,this);const a=t?t.__style:"",i=this.__style;a!==i&&(i===""?r.removeAttribute("style"):r.style.cssText=i),(function(o,l,u){const d=fD(l.__textStyle);for(const f in d)o.style.setProperty(`--listitem-marker-${f}`,d[f]);if(u)for(const f in fD(u.__textStyle))f in d||o.style.removeProperty(`--listitem-marker-${f}`)})(r,this,t)}updateDOM(t,r,n){const s=r;return this.updateListItemDOM(t,s,n),!1}updateFromJSON(t){return super.updateFromJSON(t).setValue(t.value).setChecked(t.checked)}exportDOM(t){const r=this.createDOM(t._config),n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();return s&&(r.dir=s),{element:r}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...t){for(let r=0;r<t.length;r++){const n=t[r];if(wt(n)&&this.canMergeWith(n)){const s=n.getChildren();this.append(...s),n.remove()}else super.append(n)}return this}replace(t,r){if(Sn(t))return super.replace(t);this.setIndent(0);const n=this.getParentOrThrow();if(!Hr(n))return t;if(n.__first===this.getKey())n.insertBefore(t);else if(n.__last===this.getKey())n.insertAfter(t);else{const s=go(n.getListType());let a=this.getNextSibling();for(;a;){const i=a;a=a.getNextSibling(),s.append(i)}n.insertAfter(t),t.insertAfter(s)}return r&&(wt(t)||af(139),this.getChildren().forEach((s=>{t.append(s)}))),this.remove(),n.getChildrenSize()===0&&n.remove(),t}insertAfter(t,r=!0){const n=this.getParentOrThrow();if(Hr(n)||af(39),Sn(t))return super.insertAfter(t,r);const s=this.getNextSiblings();if(n.insertAfter(t,r),s.length!==0){const a=go(n.getListType());s.forEach((i=>a.append(i))),t.insertAfter(a,r)}return t}remove(t){const r=this.getPreviousSibling(),n=this.getNextSibling();super.remove(t),r&&n&&Lc(r)&&Lc(n)&&(Y5(r.getFirstChild(),n.getFirstChild()),n.remove())}insertNewAfter(t,r=!0){const n=Io().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(n,r),n}collapseAtStart(t){const r=ss();this.getChildren().forEach((i=>r.append(i)));const n=this.getParentOrThrow(),s=n.getParentOrThrow(),a=Sn(s);if(n.getChildrenSize()===1)if(a)n.remove(),s.select();else{n.insertBefore(r),n.remove();const i=t.anchor,o=t.focus,l=r.getKey();i.type==="element"&&i.getNode().is(this)&&i.set(l,i.offset,"element"),o.type==="element"&&o.getNode().is(this)&&o.set(l,o.offset,"element")}else n.insertBefore(r),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(t){const r=this.getWritable();return r.__value=t,r}getChecked(){const t=this.getLatest();let r;const n=this.getParent();return Hr(n)&&(r=n.getListType()),r==="check"?!!t.__checked:void 0}setChecked(t){const r=this.getWritable();return r.__checked=t,r}toggleChecked(){const t=this.getWritable();return t.setChecked(!t.__checked)}getIndent(){const t=this.getParent();if(t===null||!this.isAttached())return this.getLatest().__indent;let r=t.getParentOrThrow(),n=0;for(;Sn(r);)r=r.getParentOrThrow().getParentOrThrow(),n++;return n}setIndent(t){typeof t!="number"&&af(117),(t=Math.floor(t))>=0||af(199);let r=this.getIndent();for(;r!==t;)r<t?(pce(this),r++):(mce(this),r--);return this}canInsertAfter(t){return Sn(t)}canReplaceWith(t){return Sn(t)}canMergeWith(t){return Sn(t)||A5(t)}extractWithChild(t,r){if(!Ot(r))return!1;const n=r.anchor.getNode(),s=r.focus.getNode();return this.isParentOf(n)&&this.isParentOf(s)&&this.getTextContent().length===r.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return go("bullet")}canMergeWhenEmpty(){return!0}};function xce(e){if(e.classList.contains("task-list-item")){for(const r of e.children)if(r.tagName==="INPUT")return vce(r)}const t=e.getAttribute("aria-checked");return{node:Io(t==="true"||t!=="false"&&void 0)}}function vce(e){return e.getAttribute("type")!=="checkbox"?{node:null}:{node:Io(e.hasAttribute("checked"))}}function Io(e){return Ji(new nd(void 0,e))}function Sn(e){return e instanceof nd}let Pf=class extends Ni{$config(){return this.config("list",{$transform:t=>{(function(r){const n=r.getNextSibling();Hr(n)&&r.getListType()===n.getListType()&&Y5(r,n)})(t),mV(t)},extends:Ni,importDOM:{ol:()=>({conversion:BD,priority:0}),ul:()=>({conversion:BD,priority:0})}})}constructor(t="number",r=1,n){super(n);const s=bce[t]||t;this.__listType=s,this.__tag=s==="number"?"ol":"ul",this.__start=r}afterCloneFrom(t){super.afterCloneFrom(t),this.__listType=t.__listType,this.__tag=t.__tag,this.__start=t.__start}getTag(){return this.getLatest().__tag}setListType(t){const r=this.getWritable();return r.__listType=t,r.__tag=t==="number"?"ol":"ul",r}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(t){const r=this.getWritable();return r.__start=t,r}createDOM(t,r){const n=this.__tag,s=document.createElement(n);return this.__start!==1&&s.setAttribute("start",String(this.__start)),s.__lexicalListType=this.__listType,LD(s,t.theme,this),s}updateDOM(t,r,n){return t.__tag!==this.__tag||(LD(r,n.theme,this),!1)}updateFromJSON(t){return super.updateFromJSON(t).setListType(t.listType).setStart(t.start)}exportDOM(t){const r=this.createDOM(t._config,t);return as(r)&&(this.__start!==1&&r.setAttribute("start",String(this.__start)),this.__listType==="check"&&r.setAttribute("__lexicalListType","check")),{element:r}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(t,r,n){let s=n;for(let a=0;a<n.length;a++){const i=n[a];Sn(i)||(s===n&&(s=[...n]),s[a]=Io().append(!wt(i)||Hr(i)||i.isInline()?i:Ns(i.getTextContent())))}return super.splice(t,r,s)}extractWithChild(t){return Sn(t)}};function LD(e,t,r){const n=[],s=[],a=t.list;if(a!==void 0){const i=a[`${r.__tag}Depth`]||[],o=BA(r)-1,l=o%i.length,u=i[l],d=a[r.__tag];let f;const g=a.nested,p=a.checklist;if(g!==void 0&&g.list&&(f=g.list),d!==void 0&&n.push(d),p!==void 0&&r.__listType==="check"&&n.push(p),u!==void 0){n.push(...m_(u));for(let x=0;x<i.length;x++)x!==l&&s.push(r.__tag+x)}if(f!==void 0){const x=m_(f);o>1?n.push(...x):s.push(...x)}}s.length>0&&hf(e,...s),n.length>0&&xa(e,...n)}function wce(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r];if(Sn(n)){t.push(n);const s=n.getChildren();s.length>1&&s.forEach((a=>{Hr(a)&&t.push(DD(a))}))}else t.push(DD(n))}return t}function BD(e){const t=e.nodeName.toLowerCase();let r=null;return t==="ol"?r=go("number",e.start):t==="ul"&&(r=(function(n){if(n.getAttribute("__lexicallisttype")==="check"||n.classList.contains("contains-task-list"))return!0;for(const s of n.childNodes)if(as(s)&&s.hasAttribute("aria-checked"))return!0;return!1})(e)?go("check"):go("bullet")),{after:wce,node:r}}const bce={ol:"number",ul:"bullet"};function go(e="number",t=1){return Ji(new Pf(e,t))}function Hr(e){return e instanceof Pf}const _ce=jr("UPDATE_LIST_START_COMMAND"),J5=jr("INSERT_UNORDERED_LIST_COMMAND"),Q5=jr("INSERT_ORDERED_LIST_COMMAND"),Z5=jr("REMOVE_LIST_COMMAND");function Sce(e){return x0(e.registerCommand(Q5,(()=>(ID("number"),!0)),Lg),e.registerCommand(_ce,(t=>{const{listNodeKey:r,newStart:n}=t,s=aa(r);return!!Hr(s)&&(s.getListType()==="number"&&(s.setStart(n),mV(s)),!0)}),Lg),e.registerCommand(J5,(()=>(ID("bullet"),!0)),Lg),e.registerCommand(Z5,(()=>(gce(),!0)),Lg),e.registerCommand(cv,(()=>yce()),Lg),e.registerNodeTransform(nd,(t=>{const r=t.getFirstChild();if(r){if(Yt(r)){const n=r.getStyle(),s=r.getFormat();t.getTextStyle()!==n&&t.setTextStyle(n),t.getTextFormat()!==s&&t.setTextFormat(s)}}else{const n=Xt();Ot(n)&&(n.style!==t.getTextStyle()||n.format!==t.getTextFormat())&&n.isCollapsed()&&t.is(n.anchor.getNode())&&t.setTextStyle(n.style).setTextFormat(n.format)}})),e.registerNodeTransform(Af,(t=>{const r=t.getParent();if(Sn(r)&&t.is(r.getFirstChild())){const n=t.getStyle(),s=t.getFormat();n===r.getTextStyle()&&s===r.getTextFormat()||r.setTextStyle(n).setTextFormat(s)}})))}function kce(e){const t=r=>{const n=r.getParent();if(Hr(r.getFirstChild())||!Hr(n))return;const s=Q2(r,(a=>Sn(a)&&Hr(a.getParent())&&Sn(a.getPreviousSibling())));if(s===null&&r.getIndent()>0)r.setIndent(0);else if(Sn(s)){const a=s.getPreviousSibling();if(Sn(a)){const i=(function(l){let u=l,d=u.getFirstChild();for(;Hr(d);){const f=d.getLastChild();if(!Sn(f))break;u=f,d=u.getFirstChild()}return u})(a),o=i.getParent();if(Hr(o)){const l=BA(o);l+1<BA(n)&&r.setIndent(l)}}}};return e.registerNodeTransform(Pf,(r=>{const n=[r];for(;n.length>0;){const s=n.shift();if(Hr(s)){for(const a of s.getChildren())if(Sn(a)){t(a);const i=a.getFirstChild();Hr(i)&&n.push(i)}}}}))}var xT={exports:{}},$D;function Tce(){return $D||($D=1,(function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var r=(function(n){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,i={},o={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function _(b){return b instanceof l?new l(b.type,_(b.content),b.alias):Array.isArray(b)?b.map(_):b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(_){return Object.prototype.toString.call(_).slice(8,-1)},objId:function(_){return _.__id||Object.defineProperty(_,"__id",{value:++a}),_.__id},clone:function _(b,E){E=E||{};var k,A;switch(o.util.type(b)){case"Object":if(A=o.util.objId(b),E[A])return E[A];k={},E[A]=k;for(var P in b)b.hasOwnProperty(P)&&(k[P]=_(b[P],E));return k;case"Array":return A=o.util.objId(b),E[A]?E[A]:(k=[],E[A]=k,b.forEach(function(j,O){k[O]=_(j,E)}),k);default:return b}},getLanguage:function(_){for(;_;){var b=s.exec(_.className);if(b)return b[1].toLowerCase();_=_.parentElement}return"none"},setLanguage:function(_,b){_.className=_.className.replace(RegExp(s,"gi"),""),_.classList.add("language-"+b)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(k){var _=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(k.stack)||[])[1];if(_){var b=document.getElementsByTagName("script");for(var E in b)if(b[E].src==_)return b[E]}return null}},isActive:function(_,b,E){for(var k="no-"+b;_;){var A=_.classList;if(A.contains(b))return!0;if(A.contains(k))return!1;_=_.parentElement}return!!E}},languages:{plain:i,plaintext:i,text:i,txt:i,extend:function(_,b){var E=o.util.clone(o.languages[_]);for(var k in b)E[k]=b[k];return E},insertBefore:function(_,b,E,k){k=k||o.languages;var A=k[_],P={};for(var j in A)if(A.hasOwnProperty(j)){if(j==b)for(var O in E)E.hasOwnProperty(O)&&(P[O]=E[O]);E.hasOwnProperty(j)||(P[j]=A[j])}var R=k[_];return k[_]=P,o.languages.DFS(o.languages,function(M,G){G===R&&M!=_&&(this[M]=P)}),P},DFS:function _(b,E,k,A){A=A||{};var P=o.util.objId;for(var j in b)if(b.hasOwnProperty(j)){E.call(b,j,b[j],k||j);var O=b[j],R=o.util.type(O);R==="Object"&&!A[P(O)]?(A[P(O)]=!0,_(O,E,null,A)):R==="Array"&&!A[P(O)]&&(A[P(O)]=!0,_(O,E,j,A))}}},plugins:{},highlightAll:function(_,b){o.highlightAllUnder(document,_,b)},highlightAllUnder:function(_,b,E){var k={callback:E,container:_,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",k),k.elements=Array.prototype.slice.apply(k.container.querySelectorAll(k.selector)),o.hooks.run("before-all-elements-highlight",k);for(var A=0,P;P=k.elements[A++];)o.highlightElement(P,b===!0,k.callback)},highlightElement:function(_,b,E){var k=o.util.getLanguage(_),A=o.languages[k];o.util.setLanguage(_,k);var P=_.parentElement;P&&P.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(P,k);var j=_.textContent,O={element:_,language:k,grammar:A,code:j};function R(G){O.highlightedCode=G,o.hooks.run("before-insert",O),O.element.innerHTML=O.highlightedCode,o.hooks.run("after-highlight",O),o.hooks.run("complete",O),E&&E.call(O.element)}if(o.hooks.run("before-sanity-check",O),P=O.element.parentElement,P&&P.nodeName.toLowerCase()==="pre"&&!P.hasAttribute("tabindex")&&P.setAttribute("tabindex","0"),!O.code){o.hooks.run("complete",O),E&&E.call(O.element);return}if(o.hooks.run("before-highlight",O),!O.grammar){R(o.util.encode(O.code));return}if(b&&n.Worker){var M=new Worker(o.filename);M.onmessage=function(G){R(G.data)},M.postMessage(JSON.stringify({language:O.language,code:O.code,immediateClose:!0}))}else R(o.highlight(O.code,O.grammar,O.language))},highlight:function(_,b,E){var k={code:_,grammar:b,language:E};if(o.hooks.run("before-tokenize",k),!k.grammar)throw new Error('The language "'+k.language+'" has no grammar.');return k.tokens=o.tokenize(k.code,k.grammar),o.hooks.run("after-tokenize",k),l.stringify(o.util.encode(k.tokens),k.language)},tokenize:function(_,b){var E=b.rest;if(E){for(var k in E)b[k]=E[k];delete b.rest}var A=new f;return g(A,A.head,_),d(_,A,b,A.head,0),x(A)},hooks:{all:{},add:function(_,b){var E=o.hooks.all;E[_]=E[_]||[],E[_].push(b)},run:function(_,b){var E=o.hooks.all[_];if(!(!E||!E.length))for(var k=0,A;A=E[k++];)A(b)}},Token:l};n.Prism=o;function l(_,b,E,k){this.type=_,this.content=b,this.alias=E,this.length=(k||"").length|0}l.stringify=function _(b,E){if(typeof b=="string")return b;if(Array.isArray(b)){var k="";return b.forEach(function(R){k+=_(R,E)}),k}var A={type:b.type,content:_(b.content,E),tag:"span",classes:["token",b.type],attributes:{},language:E},P=b.alias;P&&(Array.isArray(P)?Array.prototype.push.apply(A.classes,P):A.classes.push(P)),o.hooks.run("wrap",A);var j="";for(var O in A.attributes)j+=" "+O+'="'+(A.attributes[O]||"").replace(/"/g,"&quot;")+'"';return"<"+A.tag+' class="'+A.classes.join(" ")+'"'+j+">"+A.content+"</"+A.tag+">"};function u(_,b,E,k){_.lastIndex=b;var A=_.exec(E);if(A&&k&&A[1]){var P=A[1].length;A.index+=P,A[0]=A[0].slice(P)}return A}function d(_,b,E,k,A,P){for(var j in E)if(!(!E.hasOwnProperty(j)||!E[j])){var O=E[j];O=Array.isArray(O)?O:[O];for(var R=0;R<O.length;++R){if(P&&P.cause==j+","+R)return;var M=O[R],G=M.inside,K=!!M.lookbehind,re=!!M.greedy,Y=M.alias;if(re&&!M.pattern.global){var ee=M.pattern.toString().match(/[imsuy]*$/)[0];M.pattern=RegExp(M.pattern.source,ee+"g")}for(var B=M.pattern||M,z=k.next,I=A;z!==b.tail&&!(P&&I>=P.reach);I+=z.value.length,z=z.next){var W=z.value;if(b.length>_.length)return;if(!(W instanceof l)){var V=1,L;if(re){if(L=u(B,I,_,K),!L||L.index>=_.length)break;var ne=L.index,H=L.index+L[0].length,J=I;for(J+=z.value.length;ne>=J;)z=z.next,J+=z.value.length;if(J-=z.value.length,I=J,z.value instanceof l)continue;for(var Q=z;Q!==b.tail&&(J<H||typeof Q.value=="string");Q=Q.next)V++,J+=Q.value.length;V--,W=_.slice(I,J),L.index-=I}else if(L=u(B,0,W,K),!L)continue;var ne=L.index,Z=L[0],se=W.slice(0,ne),ce=W.slice(ne+Z.length),he=I+W.length;P&&he>P.reach&&(P.reach=he);var Ee=z.prev;se&&(Ee=g(b,Ee,se),I+=se.length),p(b,Ee,V);var ie=new l(j,G?o.tokenize(Z,G):Z,Y,Z);if(z=g(b,Ee,ie),ce&&g(b,z,ce),V>1){var me={cause:j+","+R,reach:he};d(_,b,E,z.prev,I,me),P&&me.reach>P.reach&&(P.reach=me.reach)}}}}}}function f(){var _={value:null,prev:null,next:null},b={value:null,prev:_,next:null};_.next=b,this.head=_,this.tail=b,this.length=0}function g(_,b,E){var k=b.next,A={value:E,prev:b,next:k};return b.next=A,k.prev=A,_.length++,A}function p(_,b,E){for(var k=b.next,A=0;A<E&&k!==_.tail;A++)k=k.next;b.next=k,k.prev=b,_.length-=A}function x(_){for(var b=[],E=_.head.next;E!==_.tail;)b.push(E.value),E=E.next;return b}if(!n.document)return n.addEventListener&&(o.disableWorkerMessageHandler||n.addEventListener("message",function(_){var b=JSON.parse(_.data),E=b.language,k=b.code,A=b.immediateClose;n.postMessage(o.highlight(k,o.languages[E],E)),A&&n.close()},!1)),o;var y=o.util.currentScript();y&&(o.filename=y.src,y.hasAttribute("data-manual")&&(o.manual=!0));function v(){o.manual||o.highlightAll()}if(!o.manual){var T=document.readyState;T==="loading"||T==="interactive"&&y&&y.defer?document.addEventListener("DOMContentLoaded",v):window.requestAnimationFrame?window.requestAnimationFrame(v):window.setTimeout(v,16)}return o})(t);e.exports&&(e.exports=r),typeof tf<"u"&&(tf.Prism=r),r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(s,a){var i={};i["language-"+a]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[a]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};o["language-"+a]={pattern:/[\s\S]+/,inside:r.languages[a]};var l={};l[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:o},r.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(n,s){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:r.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,(function(n){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+s.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var a=n.languages.markup;a&&(a.tag.addInlined("style","css"),a.tag.addAttribute("style","css"))})(r),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),r.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),r.languages.markup&&(r.languages.markup.tag.addInlined("script","javascript"),r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),r.languages.js=r.languages.javascript,(function(){if(typeof r>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading",s=function(y,v){return" Error "+y+" while fetching file: "+v},a=" Error: File does not exist or is empty",i={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",l="loading",u="loaded",d="failed",f="pre[data-src]:not(["+o+'="'+u+'"]):not(['+o+'="'+l+'"])';function g(y,v,T){var _=new XMLHttpRequest;_.open("GET",y,!0),_.onreadystatechange=function(){_.readyState==4&&(_.status<400&&_.responseText?v(_.responseText):_.status>=400?T(s(_.status,_.statusText)):T(a))},_.send(null)}function p(y){var v=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(y||"");if(v){var T=Number(v[1]),_=v[2],b=v[3];return _?b?[T,Number(b)]:[T,void 0]:[T,T]}}r.hooks.add("before-highlightall",function(y){y.selector+=", "+f}),r.hooks.add("before-sanity-check",function(y){var v=y.element;if(v.matches(f)){y.code="",v.setAttribute(o,l);var T=v.appendChild(document.createElement("CODE"));T.textContent=n;var _=v.getAttribute("data-src"),b=y.language;if(b==="none"){var E=(/\.(\w+)$/.exec(_)||[,"none"])[1];b=i[E]||E}r.util.setLanguage(T,b),r.util.setLanguage(v,b);var k=r.plugins.autoloader;k&&k.loadLanguages(b),g(_,function(A){v.setAttribute(o,u);var P=p(v.getAttribute("data-range"));if(P){var j=A.split(/\r\n?|\n/g),O=P[0],R=P[1]==null?j.length:P[1];O<0&&(O+=j.length),O=Math.max(0,Math.min(O-1,j.length)),R<0&&(R+=j.length),R=Math.max(0,Math.min(R,j.length)),A=j.slice(O,R).join(`
`),v.hasAttribute("data-start")||v.setAttribute("data-start",String(O+1))}T.textContent=A,r.highlightElement(T)},function(A){v.setAttribute(o,d),T.textContent=A})}}),r.plugins.fileHighlight={highlight:function(v){for(var T=(v||document).querySelectorAll(f),_=0,b;b=T[_++];)r.highlightElement(b)}};var x=!1;r.fileHighlight=function(){x||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),x=!0),r.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(xT)),xT.exports}Tce();Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(t,r){var n={};n["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[r]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};s["language-"+r]={pattern:/[\s\S]+/,inside:Prism.languages[r]};var a={};a[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:s},Prism.languages.insertBefore("markup","cdata",a)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,t){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:Prism.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function r(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var n=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,s=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return n}),a=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+s+a+"(?:"+s+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+s+a+")(?:"+s+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(n),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+s+")"+a+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+s+"$"),inside:{"table-header":{pattern:RegExp(n),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:r(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:r(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:r(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:r(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(f){d!==f&&(e.languages.markdown[d].inside.content.inside[f]=e.languages.markdown[f])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function f(g){if(!(!g||typeof g=="string"))for(var p=0,x=g.length;p<x;p++){var y=g[p];if(y.type!=="code"){f(y.content);continue}var v=y.content[1],T=y.content[3];if(v&&T&&v.type==="code-language"&&T.type==="code-block"&&typeof v.content=="string"){var _=v.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");_=(/[a-z][\w-]*/i.exec(_)||[""])[0].toLowerCase();var b="language-"+_;T.alias?typeof T.alias=="string"?T.alias=[T.alias,b]:T.alias.push(b):T.alias=[b]}}}f(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var f="",g=0,p=d.classes.length;g<p;g++){var x=d.classes[g],y=/language-(.+)/.exec(x);if(y){f=y[1];break}}var v=e.languages[f];if(v)d.content=e.highlight(u(d.content),v,f);else if(f&&f!=="none"&&e.plugins.autoloader){var T="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=T,e.plugins.autoloader.loadLanguages(f,function(){var _=document.getElementById(T);_&&(_.innerHTML=e.highlight(_.textContent,e.languages[f],f))})}}});var i=RegExp(e.languages.markup.tag.pattern.source,"gi"),o={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;function u(d){var f=d.replace(i,"");return f=f.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(g,p){if(p=p.toLowerCase(),p[0]==="#"){var x;return p[1]==="x"?x=parseInt(p.slice(2),16):x=Number(p.slice(1)),l(x)}else{var y=o[p];return y||g}}),f}e.languages.md=e.languages.markdown})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var r=e.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))})(Prism);Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/});delete Prism.languages.objectivec["class-name"];Prism.languages.objc=Prism.languages.objectivec;Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};(function(e){var t=e.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};t.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:t},boolean:t.boolean,variable:t.variable}})(Prism);var UD={},WD;function Cce(){return WD||(WD=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),UD}Cce();var zD={},HD;function Ece(){return HD||(HD=1,(function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,r=0;r<2;r++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string})(Prism)),zD}Ece();Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/};Prism.languages.swift["string-literal"].forEach(function(e){e.inside.interpolation.inside=Prism.languages.swift});var GD={},VD;function Nce(){return VD||(VD=1,(function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript})(Prism)),GD}Nce();var qD={},KD;function Ace(){return KD||(KD=1,(function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,r=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,n={pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[n,{pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:n.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+r+/[A-Z]\w*\b/.source),lookbehind:!0,inside:n.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":n,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+r+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:n.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+r+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:n.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism)),qD}Ace();var XD={},YD;function jce(){return YD||(YD=1,(function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,r=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return t.source});e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return r})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])})(Prism)),XD}jce();function yV(e,t){for(const r of e.childNodes){if(as(r)&&r.tagName===t)return!0;yV(r,t)}return!1}const bx="data-language",ix="data-highlight-language",ub="data-theme";class v0 extends Ni{static getType(){return"code"}static clone(t){return new v0(t.__language,t.__key)}constructor(t,r){super(r),this.__language=t||void 0,this.__isSyntaxHighlightSupported=!1,this.__theme=void 0}afterCloneFrom(t){super.afterCloneFrom(t),this.__language=t.__language,this.__theme=t.__theme,this.__isSyntaxHighlightSupported=t.__isSyntaxHighlightSupported}createDOM(t){const r=document.createElement("code");xa(r,t.theme.code),r.setAttribute("spellcheck","false");const n=this.getLanguage();n&&(r.setAttribute(bx,n),this.getIsSyntaxHighlightSupported()&&r.setAttribute(ix,n));const s=this.getTheme();s&&r.setAttribute(ub,s);const a=this.getStyle();return a&&r.setAttribute("style",a),r}updateDOM(t,r,n){const s=this.__language,a=t.__language;s?s!==a&&r.setAttribute(bx,s):a&&r.removeAttribute(bx);const i=this.__isSyntaxHighlightSupported;t.__isSyntaxHighlightSupported&&a?i&&s?s!==a&&r.setAttribute(ix,s):r.removeAttribute(ix):i&&s&&r.setAttribute(ix,s);const o=this.__theme,l=t.__theme;o?o!==l&&r.setAttribute(ub,o):l&&r.removeAttribute(ub);const u=this.__style,d=t.__style;return u?u!==d&&r.setAttribute("style",u):d&&r.removeAttribute("style"),!1}exportDOM(t){const r=document.createElement("pre");xa(r,t._config.theme.code),r.setAttribute("spellcheck","false");const n=this.getLanguage();n&&(r.setAttribute(bx,n),this.getIsSyntaxHighlightSupported()&&r.setAttribute(ix,n));const s=this.getTheme();s&&r.setAttribute(ub,s);const a=this.getStyle();return a&&r.setAttribute("style",a),{element:r}}static importDOM(){return{code:t=>t.textContent!=null&&(/\r?\n/.test(t.textContent)||yV(t,"BR"))?{conversion:JD,priority:1}:null,div:()=>({conversion:Pce,priority:1}),pre:()=>({conversion:JD,priority:0}),table:t=>vT(t)?{conversion:Oce,priority:3}:null,td:t=>{const r=t,n=r.closest("table");return r.classList.contains("js-file-line")||n&&vT(n)?{conversion:QD,priority:3}:null},tr:t=>{const r=t.closest("table");return r&&vT(r)?{conversion:QD,priority:3}:null}}}static importJSON(t){return Du().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setLanguage(t.language).setTheme(t.theme)}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),theme:this.getTheme()}}insertNewAfter(t,r=!0){const n=this.getChildren(),s=n.length;if(s>=2&&n[s-1].getTextContent()===`
`&&n[s-2].getTextContent()===`
`&&t.isCollapsed()&&t.anchor.key===this.__key&&t.anchor.offset===s){n[s-1].remove(),n[s-2].remove();const l=ss();return this.insertAfter(l,r),l}const{anchor:a,focus:i}=t,o=(a.isBefore(i)?a:i).getNode();if(Yt(o)){let l=Rce(o);const u=[];for(;;)if(z2(l))u.push(rm()),l=l.getNextSibling();else{if(!wV(l))break;{let v=0;const T=l.getTextContent(),_=l.getTextContentSize();for(;v<_&&T[v]===" ";)v++;if(v!==0&&u.push(vV(" ".repeat(v))),v!==_)break;l=l.getNextSibling()}}const d=o.splitText(a.offset)[0],f=a.offset===0?0:1,g=d.getIndexWithinParent()+f,p=o.getParentOrThrow(),x=[qc(),...u];p.splice(g,0,x);const y=u[u.length-1];y?y.select():a.offset===0?d.selectPrevious():d.getNextSibling().selectNext(0,0)}if(e6(o)){const{offset:l}=t.anchor;o.splice(l,0,[qc()]),o.select(l+1,l+1)}return null}canIndent(){return!1}collapseAtStart(){const t=ss();return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}setLanguage(t){const r=this.getWritable();return r.__language=t||void 0,r}getLanguage(){return this.getLatest().__language}setIsSyntaxHighlightSupported(t){const r=this.getWritable();return r.__isSyntaxHighlightSupported=t,r}getIsSyntaxHighlightSupported(){return this.getLatest().__isSyntaxHighlightSupported}setTheme(t){const r=this.getWritable();return r.__theme=t||void 0,r}getTheme(){return this.getLatest().__theme}}function Du(e,t){return ele(v0).setLanguage(e).setTheme(t)}function e6(e){return e instanceof v0}function JD(e){return{node:Du(e.getAttribute(bx))}}function Pce(e){const t=e,r=ZD(t);return r||(function(n){let s=n.parentElement;for(;s!==null;){if(ZD(s))return!0;s=s.parentElement}return!1})(t)?{node:r?Du():null}:{node:null}}function Oce(){return{node:Du()}}function QD(){return{node:null}}function ZD(e){return e.style.fontFamily.match("monospace")!==null}function vT(e){return e.classList.contains("js-file-line-container")}let Z2=class xV extends Af{constructor(t="",r,n){super(t,n),this.__highlightType=r}static getType(){return"code-highlight"}static clone(t){return new xV(t.__text,t.__highlightType||void 0,t.__key)}getHighlightType(){return this.getLatest().__highlightType}setHighlightType(t){const r=this.getWritable();return r.__highlightType=t||void 0,r}canHaveFormat(){return!1}createDOM(t){const r=super.createDOM(t),n=wT(t.theme,this.__highlightType);return xa(r,n),r}updateDOM(t,r,n){const s=super.updateDOM(t,r,n),a=wT(n.theme,t.__highlightType),i=wT(n.theme,this.__highlightType);return a!==i&&(a&&hf(r,a),i&&xa(r,i)),s}static importJSON(t){return vV().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHighlightType(t.highlightType)}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType()}}setFormat(t){return this}isParentRequired(){return!0}createParentElementNode(){return Du()}};function wT(e,t){return t&&e&&e.codeHighlight&&e.codeHighlight[t]}function vV(e="",t){return Ji(new Z2(e,t))}function wV(e){return e instanceof Z2}function Fce(e,t){let r=e;for(let n=oi(e,t);n&&(wV(n.origin)||z2(n.origin));n=kle(n))r=n.origin;return r}function Rce(e){return Fce(e,"previous")}(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach((function(r){var n=t[r],s=[];/^\w+$/.test(r)||s.push(/\w+/.exec(r)[0]),r==="diff"&&s.push("bold"),e.languages.diff[r]={pattern:RegExp("^(?:["+n+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:s,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(r)[0]}}}})),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);const Dce=new Set(["http:","https:","mailto:","sms:","tel:"]);class Of extends Ni{static getType(){return"link"}static clone(t){return new Of(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}constructor(t="",r={},n){super(n);const{target:s=null,rel:a=null,title:i=null}=r;this.__url=t,this.__target=s,this.__rel=a,this.__title=i}createDOM(t){const r=document.createElement("a");return this.updateLinkDOM(null,r,t),xa(r,t.theme.link),r}updateLinkDOM(t,r,n){if(FG(r)){t&&t.__url===this.__url||(r.href=this.sanitizeUrl(this.__url));for(const s of["target","rel","title"]){const a=`__${s}`,i=this[a];t&&t[a]===i||(i?r[s]=i:r.removeAttribute(s))}}}updateDOM(t,r,n){return this.updateLinkDOM(t,r,n),!1}static importDOM(){return{a:t=>({conversion:Ice,priority:1})}}static importJSON(t){return y_().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setURL(t.url).setRel(t.rel||null).setTarget(t.target||null).setTitle(t.title||null)}sanitizeUrl(t){t=tI(t);try{const r=new URL(tI(t));if(!Dce.has(r.protocol))return"about:blank"}catch{return t}return t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(t){const r=this.getWritable();return r.__url=t,r}getTarget(){return this.getLatest().__target}setTarget(t){const r=this.getWritable();return r.__target=t,r}getRel(){return this.getLatest().__rel}setRel(t){const r=this.getWritable();return r.__rel=t,r}getTitle(){return this.getLatest().__title}setTitle(t){const r=this.getWritable();return r.__title=t,r}insertNewAfter(t,r=!0){const n=y_(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,r),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,r,n){if(!Ot(r))return!1;const s=r.anchor.getNode(),a=r.focus.getNode();return this.isParentOf(s)&&this.isParentOf(a)&&r.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function Ice(e){let t=null;if(FG(e)){const r=e.textContent;(r!==null&&r!==""||e.children.length>0)&&(t=y_(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function y_(e="",t){return Ji(new Of(e,t))}function Mce(e){return e instanceof Of}class cm extends Of{constructor(t="",r={},n){super(t,r,n),this.__isUnlinked=r.isUnlinked!==void 0&&r.isUnlinked!==null&&r.isUnlinked}static getType(){return"autolink"}static clone(t){return new cm(t.__url,{isUnlinked:t.__isUnlinked,rel:t.__rel,target:t.__target,title:t.__title},t.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(t){const r=this.getWritable();return r.__isUnlinked=t,r}createDOM(t){return this.__isUnlinked?document.createElement("span"):super.createDOM(t)}updateDOM(t,r,n){return super.updateDOM(t,r,n)||t.__isUnlinked!==this.__isUnlinked}static importJSON(t){return eI().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIsUnlinked(t.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(t,r=!0){const n=this.getParentOrThrow().insertNewAfter(t,r);if(wt(n)){const s=eI(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return n.append(s),s}return null}}function eI(e="",t){return Ji(new cm(e,t))}function Lce(e){return e instanceof cm}const Bce=/^\+?[0-9\s()-]{5,}$/;function tI(e){return e.match(/^[a-z][a-z0-9+.-]*:/i)||e.match(/^[/#.]/)?e:e.includes("@")?`mailto:${e}`:Bce.test(e)?`tel:${e}`:`https://${e}`}function UA(e,t){const r={};for(const n of e){const s=t(n);s&&(r[s]?r[s].push(n):r[s]=[n])}return r}function $ce(e){const t=UA(e,(r=>r.type));return{element:t.element||[],multilineElement:t["multiline-element"]||[],textFormat:t["text-format"]||[],textMatch:t["text-match"]||[]}}const rI=/[!-/:-@[-`{-~\s]/;function Uce(e){return Yt(e)&&!e.hasFormat("code")}function Wce(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function nI(e,t,r){const n=r.length;for(let s=t;s>=n;s--){const a=s-n;if(bV(e,a,r,0,n)&&e[a+n]!==" ")return a}return-1}function bV(e,t,r,n,s){for(let a=0;a<s;a++)if(e[t+a]!==r[n+a])return!1;return!0}function zce(e,t=eS){const r=$ce(t),n=UA(r.textFormat,(({tag:i})=>i[i.length-1])),s=UA(r.textMatch,(({trigger:i})=>i));for(const i of t){const o=i.type;if(o==="element"||o==="text-match"||o==="multiline-element"){const l=i.dependencies;for(const u of l)e.hasNode(u)||Wce(173,u.getType())}}const a=(i,o,l)=>{(function(u,d,f,g){const p=u.getParent();if(!Xi(p)||u.getFirstChild()!==d)return!1;const x=d.getTextContent();if(x[f-1]!==" ")return!1;for(const{regExp:y,replace:v}of g){const T=x.match(y);if(T&&T[0].length===(T[0].endsWith(" ")?f:f-1)){const _=d.getNextSiblings(),[b,E]=d.splitText(f);if(v(u,E?[E,..._]:_,T,!1)!==!1)return b.remove(),!0}}return!1})(i,o,l,r.element)||(function(u,d,f,g){const p=u.getParent();if(!Xi(p)||u.getFirstChild()!==d)return!1;const x=d.getTextContent();if(x[f-1]!==" ")return!1;for(const{regExpStart:y,replace:v,regExpEnd:T}of g){if(T&&!("optional"in T)||T&&"optional"in T&&!T.optional)continue;const _=x.match(y);if(_&&_[0].length===(_[0].endsWith(" ")?f:f-1)){const b=d.getNextSiblings(),[E,k]=d.splitText(f);if(v(u,k?[k,...b]:b,_,null,null,!1)!==!1)return E.remove(),!0}}return!1})(i,o,l,r.multilineElement)||(function(u,d,f){let g=u.getTextContent();const p=f[g[d-1]];if(p==null)return!1;d<g.length&&(g=g.slice(0,d));for(const x of p){if(!x.replace||!x.regExp)continue;const y=g.match(x.regExp);if(y===null)continue;const v=y.index||0,T=v+y[0].length;let _;return v===0?[_]=u.splitText(T):[,_]=u.splitText(v,T),_.selectNext(0,0),x.replace(_,y),!0}return!1})(o,l,s)||(function(u,d,f){const g=u.getTextContent(),p=d-1,x=g[p],y=f[x];if(!y)return!1;for(const v of y){const{tag:T}=v,_=T.length,b=p-_+1;if(_>1&&!bV(g,b,T,0,_)||g[b-1]===" ")continue;const E=g[p+1];if(v.intraword===!1&&E&&!rI.test(E))continue;const k=u;let A=k,P=nI(g,b,T),j=A;for(;P<0&&(j=j.getPreviousSibling())&&!$u(j);)if(Yt(j)){if(j.hasFormat("code"))continue;const B=j.getTextContent();A=j,P=nI(B,B.length,T)}if(P<0||A===k&&P+_===b)continue;const O=A.getTextContent();if(P>0&&O[P-1]===x)continue;const R=O[P-1];if(v.intraword===!1&&R&&!rI.test(R))continue;const M=k.getTextContent(),G=M.slice(0,b)+M.slice(p+1);k.setTextContent(G);const K=A===k?G:O;A.setTextContent(K.slice(0,P)+K.slice(P+_));const re=Xt(),Y=G2();li(Y);const ee=p-_*(A===k?2:1)+1;Y.anchor.set(A.__key,P,"text"),Y.focus.set(k.__key,ee,"text");for(const B of v.format)Y.hasFormat(B)||Y.formatText(B);Y.anchor.set(Y.focus.key,Y.focus.offset,Y.focus.type);for(const B of v.format)Y.hasFormat(B)&&Y.toggleFormat(B);return Ot(re)&&(Y.format=re.format),!0}})(o,l,n)};return e.registerUpdateListener((({tags:i,dirtyLeaves:o,editorState:l,prevEditorState:u})=>{if(i.has(wG)||i.has(d_)||e.isComposing())return;const d=l.read(Xt),f=u.read(Xt);if(!Ot(f)||!Ot(d)||!d.isCollapsed()||d.is(f))return;const g=d.anchor.key,p=d.anchor.offset,x=l._nodeMap.get(g);!Yt(x)||!o.has(g)||p!==1&&p>f.anchor.offset+1||e.update((()=>{if(!Uce(x))return;const y=x.getParent();y===null||e6(y)||a(y,x,d.anchor.offset)}))}))}const Hce=/^(\s*)(\d{1,})\.\s/,Gce=/^(\s*)[-*+]\s/,Vce=/^(#{1,6})\s/,qce=/^>\s/,Kce=/^[ \t]*```([\w-]+)?/,Xce=/[ \t]*```$/,_V=e=>(t,r,n,s)=>{const a=e(n);a.append(...r),t.replace(a),s||a.select(0,0)},SV=e=>(t,r,n,s)=>{const a=t.getPreviousSibling(),i=t.getNextSibling(),o=Io(e==="check"?n[3]==="x":void 0);if(Hr(i)&&i.getListType()===e){const u=i.getFirstChild();u!==null?u.insertBefore(o):i.append(o),t.remove()}else if(Hr(a)&&a.getListType()===e)a.append(o),t.remove();else{const u=go(e,e==="number"?Number(n[2]):void 0);u.append(o),t.replace(u)}o.append(...r),s||o.select(0,0);const l=(function(u){const d=u.match(/\t/g),f=u.match(/ /g);let g=0;return d&&(g+=d.length),f&&(g+=Math.floor(f.length/4)),g})(n[1]);l&&o.setIndent(l)},t6=(e,t,r)=>{const n=[],s=e.getChildren();let a=0;for(const i of s)if(Sn(i)){if(i.getChildrenSize()===1){const d=i.getFirstChild();if(Hr(d)){n.push(t6(d,t,r+1));continue}}const o=" ".repeat(4*r),l=e.getListType(),u=l==="number"?`${e.getStart()+a}. `:l==="check"?`- [${i.getChecked()?"x":" "}] `:"- ";n.push(o+u+t(i)),a++}return n.join(`
`)},Yce={dependencies:[C1],export:(e,t)=>{if(!Vle(e))return null;const r=Number(e.getTag().slice(1));return"#".repeat(r)+" "+t(e)},regExp:Vce,replace:_V((e=>{const t="h"+e[1].length;return sf(t)})),type:"element"},Jce={dependencies:[k1],export:(e,t)=>{if(!SD(e))return null;const r=t(e).split(`
`),n=[];for(const s of r)n.push("> "+s);return n.join(`
`)},regExp:qce,replace:(e,t,r,n)=>{if(n){const a=e.getPreviousSibling();if(SD(a))return a.splice(a.getChildrenSize(),0,[qc(),...t]),void e.remove()}const s=T1();s.append(...t),e.replace(s),n||s.select(0,0)},type:"element"},Qce={dependencies:[v0],export:e=>{if(!e6(e))return null;const t=e.getTextContent();return"```"+(e.getLanguage()||"")+(t?`
`+t:"")+"\n```"},regExpEnd:{optional:!0,regExp:Xce},regExpStart:Kce,replace:(e,t,r,n,s,a)=>{let i,o;if(!t&&s){if(s.length===1)n?(i=Du(),o=r[1]+s[0]):(i=Du(r[1]),o=s[0].startsWith(" ")?s[0].slice(1):s[0]);else{if(i=Du(r[1]),s[0].trim().length===0)for(;s.length>0&&!s[0].length;)s.shift();else s[0]=s[0].startsWith(" ")?s[0].slice(1):s[0];for(;s.length>0&&!s[s.length-1].length;)s.pop();o=s.join(`
`)}const l=Ns(o);i.append(l),e.append(i)}else t&&_V((l=>Du(l?l[1]:void 0)))(e,t,r,a)},type:"multiline-element"},Zce={dependencies:[Pf,nd],export:(e,t)=>Hr(e)?t6(e,t,0):null,regExp:Gce,replace:SV("bullet"),type:"element"},eue={dependencies:[Pf,nd],export:(e,t)=>Hr(e)?t6(e,t,0):null,regExp:Hce,replace:SV("number"),type:"element"},tue={format:["code"],tag:"`",type:"text-format"},rue={format:["highlight"],tag:"==",type:"text-format"},nue={format:["bold","italic"],tag:"***",type:"text-format"},sue={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},aue={format:["bold"],tag:"**",type:"text-format"},iue={format:["bold"],intraword:!1,tag:"__",type:"text-format"},oue={format:["strikethrough"],tag:"~~",type:"text-format"},lue={format:["italic"],tag:"*",type:"text-format"},cue={format:["italic"],intraword:!1,tag:"_",type:"text-format"},uue={dependencies:[Of],export:(e,t,r)=>{if(!Mce(e)||Lce(e))return null;const n=e.getTitle(),s=t(e);return n?`[${s}](${e.getURL()} "${n}")`:`[${s}](${e.getURL()})`},importRegExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))/,regExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))$/,replace:(e,t)=>{const[,r,n,s]=t,a=y_(n,{title:s}),i=r.split("[").length-1,o=r.split("]").length-1;let l=r,u="";if(i<o)return;if(i>o){const f=r.split("[");u="["+f[0],l=f.slice(1).join("[")}const d=Ns(l);return d.setFormat(e.getFormat()),a.append(d),e.replace(a),u&&a.insertBefore(Ns(u)),d},trigger:")",type:"text-match"},due=[Yce,Jce,Zce,eue],fue=[Qce],hue=[tue,nue,sue,aue,iue,rue,lue,cue,oue],gue=[uue],eS=[...due,...fue,...hue,...gue];function sI(e,t){return e.getEditorState().read((()=>{const r=aa(t);return r!==null&&r.isSelected()}))}function pue(e){const[t]=Yc(),[r,n]=C.useState((()=>sI(t,e)));return C.useEffect((()=>{let s=!0;const a=t.registerUpdateListener((()=>{s&&n(sI(t,e))}));return()=>{s=!1,a()}}),[t,e]),[r,C.useCallback((s=>{t.update((()=>{let a=Xt();mi(a)||(a=S5(),li(a)),mi(a)&&(s?a.add(e):a.delete(e))}))}),[t,e]),C.useCallback((()=>{t.update((()=>{const s=Xt();mi(s)&&s.clear()}))}),[t])]}function mue({nodeKey:e}){const[t]=Yc(),[r,n,s]=pue(e);return C.useEffect((()=>x0(t.registerCommand(y5,(a=>{const i=t.getElementByKey(e);return a.target===i&&(a.shiftKey||s(),n(!r),!0)}),Lg))),[s,t,r,e,n]),C.useEffect((()=>{const a=t.getElementByKey(e),i=t._config.theme.hrSelected??"selected";a!==null&&(r?xa(a,i):hf(a,i))}),[t,r,e]),null}class N1 extends C5{static getType(){return"horizontalrule"}static clone(t){return new N1(t.__key)}static importJSON(t){return r6().updateFromJSON(t)}static importDOM(){return{hr:()=>({conversion:yue,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(t){const r=document.createElement("hr");return xa(r,t.theme.hr),r}getTextContent(){return`
`}isInline(){return!1}updateDOM(){return!1}decorate(){return c.jsx(mue,{nodeKey:this.__key})}}function yue(){return{node:r6()}}function r6(){return Ji(new N1)}function xue(e){return e instanceof N1}const vue=[{dependencies:[N1],export:e=>xue(e)?"***":null,regExp:/^(---|\*\*\*|___)\s?$/,replace:(e,t,r,n)=>{const s=r6();n||e.getNextSibling()!=null?e.replace(s):e.insertBefore(s),s.selectNext()},type:"element"},...eS];function kV({transformers:e=vue}){const[t]=Yc();return C.useEffect((()=>zce(t,e)),[t,e]),null}function TV({hasStrictIndent:e=!1}){const[t]=Yc();return C.useEffect((()=>{if(!t.hasNodes([Pf,nd]))throw new Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")}),[t]),C.useEffect((()=>{if(e)return kce(t)}),[t,e]),(function(r){C.useEffect((()=>Sce(r)),[r])})(t),null}const wue=({onChange:e})=>{const[t]=C.useContext(em)||[];return C.useEffect(()=>{if(e&&t)return t.registerUpdateListener(({editorState:r})=>{r.read(()=>{hs().getTextContent();const s=r.toJSON();e(JSON.stringify(s))})})},[t,e]),null},bue=()=>{const[e]=C.useContext(em)||[],t=C.useCallback(()=>{e&&e.dispatchCommand(Ti,"bold")},[e]),r=C.useCallback(()=>{e&&e.dispatchCommand(Ti,"italic")},[e]),n=C.useCallback(()=>{e&&e.dispatchCommand(Ti,"underline")},[e]),s=C.useCallback(()=>{e&&e.dispatchCommand(Ti,"strikethrough")},[e]),a=C.useCallback(p=>{e&&e.update(()=>{const x=Xt();Ot(x)&&ap(x,()=>sf(p))})},[e]),i=C.useCallback(()=>{e&&e.update(()=>{const p=Xt();Ot(p)&&ap(p,()=>ss())})},[e]);C.useCallback(()=>{e&&e.update(()=>{const p=Xt();Ot(p)&&ap(p,()=>T1())})},[e]);const o=C.useCallback(()=>{e&&e.dispatchCommand(J5)},[e]),l=C.useCallback(()=>{e&&e.dispatchCommand(Q5)},[e]),u=C.useCallback(()=>{e&&e.dispatchCommand(Z5)},[e]),d=C.useCallback(p=>{e&&e.update(()=>{const x=Xt();Ot(x)&&x.getNodes().forEach(y=>{Yt(y)&&y.setStyle(`color: ${p}`)})})},[e]),f=C.useCallback(p=>{e&&e.update(()=>{const x=Xt();Ot(x)&&x.getNodes().forEach(v=>{if(Yt(v)){const T=v.getStyle(),_=T?T.replace(/font-size:\s*\d+px;?\s*/g,"").trim():"",b=_?`${_}; font-size: ${p}px;`:`font-size: ${p}px;`;v.setStyle(b)}})})},[e]),g=C.useCallback(p=>{e&&e.dispatchCommand(QH,p)},[e]);return c.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-300 bg-gray-50",children:[c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:t,className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Bold",children:"B"}),c.jsx("button",{type:"button",onClick:r,className:"px-2 py-1 text-sm italic border border-gray-300 rounded hover:bg-gray-200",title:"Italic",children:"I"}),c.jsx("button",{type:"button",onClick:n,className:"px-2 py-1 text-sm underline border border-gray-300 rounded hover:bg-gray-200",title:"Underline",children:"U"}),c.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 text-sm line-through border border-gray-300 rounded hover:bg-gray-200",title:"Strikethrough",children:"S"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:()=>a("h1"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 1",children:"H1"}),c.jsx("button",{type:"button",onClick:()=>a("h2"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 2",children:"H2"}),c.jsx("button",{type:"button",onClick:()=>a("h3"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 3",children:"H3"}),c.jsx("button",{type:"button",onClick:i,className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Paragraph",children:"P"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:o,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Bullet List",children:" List"}),c.jsx("button",{type:"button",onClick:l,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Numbered List",children:"1. List"}),c.jsx("button",{type:"button",onClick:u,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Remove List",children:"No List"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("span",{className:"text-xs text-gray-600",children:"Color:"}),c.jsx("button",{type:"button",onClick:()=>d("#000000"),className:"w-6 h-6 bg-black border border-gray-300 rounded hover:bg-gray-800",title:"Black"}),c.jsx("button",{type:"button",onClick:()=>d("#ff0000"),className:"w-6 h-6 bg-red-500 border border-gray-300 rounded hover:bg-red-600",title:"Red"}),c.jsx("button",{type:"button",onClick:()=>d("#0000ff"),className:"w-6 h-6 bg-blue-500 border border-gray-300 rounded hover:bg-blue-600",title:"Blue"}),c.jsx("button",{type:"button",onClick:()=>d("#008000"),className:"w-6 h-6 bg-green-500 border border-gray-300 rounded hover:bg-green-600",title:"Green"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("span",{className:"text-xs text-gray-600",children:"Size:"}),c.jsx("button",{type:"button",onClick:()=>f(12),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Small",children:"12px"}),c.jsx("button",{type:"button",onClick:()=>f(16),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Normal",children:"16px"}),c.jsx("button",{type:"button",onClick:()=>f(20),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Large",children:"20px"}),c.jsx("button",{type:"button",onClick:()=>f(24),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Extra Large",children:"24px"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-xs text-gray-600",children:"Align:"}),c.jsx("button",{type:"button",onClick:()=>g("left"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Left",children:""}),c.jsx("button",{type:"button",onClick:()=>g("center"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Center",children:""}),c.jsx("button",{type:"button",onClick:()=>g("right"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Right",children:""})]})]})},_ue=({value:e,onChange:t,placeholder:r})=>{const n={namespace:"LexicalEditor",theme:{root:"p-4 min-h-32 focus:outline-none",paragraph:"mb-2",heading:{h1:"text-3xl font-bold mb-4",h2:"text-2xl font-bold mb-3",h3:"text-xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic text-gray-600 mb-2",list:{nested:{listitem:"list-none"},ol:"list-decimal list-inside mb-2",ul:"list-disc list-inside mb-2",listitem:"mb-1"},text:{bold:"font-bold",italic:"italic",underline:"underline",strikethrough:"line-through"}},nodes:[C1,Pf,nd,k1,v0,Z2,E1,om,lm,cm,Of],onError:s=>{console.error("Lexical error:",s)},editorState:e?(()=>{try{const s=JSON.parse(e);return JSON.stringify(s)}catch{return JSON.stringify({root:{children:[{children:[{detail:0,format:0,mode:"normal",style:"",text:e,type:"text",version:1}],direction:"ltr",format:"",indent:0,type:"paragraph",version:1}],direction:"ltr",format:"",indent:0,type:"root",version:1}})}})():void 0};return c.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:c.jsxs(BG,{initialConfig:n,children:[c.jsx(bue,{}),c.jsx(wue,{onChange:t}),c.jsxs("div",{className:"relative",children:[c.jsx(nV,{contentEditable:c.jsx(aV,{className:"p-4 min-h-32 focus:outline-none",placeholder:r}),placeholder:c.jsx("div",{className:"absolute top-4 left-4 text-gray-400 pointer-events-none",children:r}),ErrorBoundary:lV}),c.jsx(iV,{}),c.jsx(oV,{}),c.jsx(TV,{}),c.jsx(kV,{transformers:eS})]})]})})},Sue=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{user:i}=ls(),{post:o}=Bo(),{showNotification:l}=Ba(),[u,d]=C.useState({test_name:e,num_questions:1,passing_score:100,questions:[{id:1,question_json:"",canvas_width:600,canvas_height:800,max_canvas_width:1536,max_canvas_height:2048}]}),[f,g]=C.useState({isLoading:!1,error:null,showPreview:!0});C.useEffect(()=>{d(b=>({...b,test_name:e||""}))},[e]);const p=()=>{if(u.num_questions>=3){g(k=>({...k,error:"Maximum 3 questions allowed for performance reasons"}));return}const E={id:Math.max(...u.questions.map(k=>k.id))+1,question_json:"",canvas_width:600,canvas_height:800,max_canvas_width:1536,max_canvas_height:2048};d(k=>({...k,num_questions:k.num_questions+1,questions:[...k.questions,E]}))},x=b=>{u.questions.length<=1||d(E=>({...E,num_questions:E.num_questions-1,questions:E.questions.filter(k=>k.id!==b)}))},y=(b,E)=>{d(k=>({...k,questions:k.questions.map(A=>A.id===b?{...A,question_json:E}:A)}))},v=(b,E,k)=>{d(A=>({...A,questions:A.questions.map(P=>P.id===b?{...P,canvas_width:E,canvas_height:k}:P)}))},T=(b,E,k)=>{d(A=>({...A,questions:A.questions.map(P=>P.id===b?{...P,max_canvas_width:E,max_canvas_height:k}:P)}))},_=async()=>{if(!u.test_name.trim()){g(b=>({...b,error:"Test name is required"}));return}if(u.questions.some(b=>!b.question_json.trim())){g(b=>({...b,error:"All questions must have content"}));return}g(b=>({...b,isLoading:!0,error:null}));try{const b={test_name:u.test_name,num_questions:u.num_questions,passing_score:u.passing_score,questions:u.questions.map((E,k)=>({question_id:k+1,question_json:E.question_json,canvas_width:E.canvas_width,canvas_height:E.canvas_height,max_canvas_width:E.max_canvas_width,max_canvas_height:E.max_canvas_height}))};t&&t(b)}catch(b){console.error("Error preparing drawing test:",b),g(E=>({...E,error:"Failed to prepare drawing test. Please try again."})),l("Failed to prepare drawing test","error")}finally{g(b=>({...b,isLoading:!1}))}};return c.jsx("div",{className:"drawing-test-creator max-w-4xl mx-auto p-6",children:c.jsxs(Et,{className:"p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Drawing Test"}),c.jsx("p",{className:"text-gray-600",children:"Create a test where students draw based on your instructions"})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Drawing Questions (",u.num_questions,"/3)"]}),c.jsx("p",{className:"text-sm text-gray-500",children:"Maximum 3 questions for optimal performance"})]}),c.jsxs(nt,{onClick:p,disabled:u.num_questions>=3,variant:"primary",size:"sm",className:"flex items-center gap-2",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add Question"]})]}),c.jsx("div",{className:"space-y-4",children:u.questions.map((b,E)=>c.jsxs(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("h4",{className:"text-md font-medium text-gray-800",children:["Text ",E+1]}),u.questions.length>1&&c.jsx(nt,{onClick:()=>x(b.id),variant:"secondary",size:"sm",className:"text-red-600 hover:text-red-700",children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Content *"}),c.jsx(_ue,{value:b.question_json,onChange:k=>y(b.id,k),placeholder:""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Canvas Dimensions"}),c.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Canvas is the actual drawing area, viewport is the initial display size"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Viewport Width"}),c.jsx("input",{type:"number",value:b.canvas_width,onChange:k=>v(b.id,parseInt(k.target.value),b.canvas_height),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",min:"200",max:"2048"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Viewport Height"}),c.jsx("input",{type:"number",value:b.canvas_height,onChange:k=>v(b.id,b.canvas_width,parseInt(k.target.value)),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",min:"200",max:"2048"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Canvas Width"}),c.jsx("input",{type:"number",value:b.max_canvas_width,onChange:k=>T(b.id,parseInt(k.target.value),b.max_canvas_height),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",min:"200",max:"4096"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Canvas Height"}),c.jsx("input",{type:"number",value:b.max_canvas_height,onChange:k=>T(b.id,b.max_canvas_width,parseInt(k.target.value)),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",min:"200",max:"4096"})]})]})]})]},b.id))})]}),f.error&&c.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 rounded-lg text-red-700",children:f.error}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx(nt,{onClick:r,variant:"secondary",disabled:f.isLoading,children:"Cancel"}),c.jsx(nt,{onClick:_,variant:"primary",disabled:f.isLoading||!u.test_name.trim(),className:"flex items-center gap-2",children:f.isLoading?c.jsxs(c.Fragment,{children:[c.jsx(Gr,{size:"sm",color:"white"}),"Saving..."]}):"Save Test"})]})]})})},kue=({onChange:e})=>{const[t]=C.useContext(em)||[];return C.useEffect(()=>{if(e&&t)return t.registerUpdateListener(({editorState:r})=>{r.read(()=>{hs().getTextContent();const s=r.toJSON();e(JSON.stringify(s))})})},[t,e]),null},Tue=({onAddBlank:e,blankCount:t})=>{const[r]=C.useContext(em)||[],n=C.useCallback(()=>{r&&r.dispatchCommand(Ti,"bold")},[r]),s=C.useCallback(()=>{r&&r.dispatchCommand(Ti,"italic")},[r]),a=C.useCallback(()=>{r&&r.dispatchCommand(Ti,"underline")},[r]),i=C.useCallback(()=>{r&&r.dispatchCommand(Ti,"strikethrough")},[r]),o=C.useCallback(x=>{r&&r.update(()=>{const y=Xt();Ot(y)&&ap(y,()=>sf(x))})},[r]),l=C.useCallback(()=>{r&&r.update(()=>{const x=Xt();Ot(x)&&ap(x,()=>ss())})},[r]),u=C.useCallback(()=>{r&&r.update(()=>{const x=Xt();Ot(x)&&ap(x,()=>T1())})},[r]),d=C.useCallback(()=>{r&&r.dispatchCommand(J5)},[r]),f=C.useCallback(()=>{r&&r.dispatchCommand(Q5)},[r]),g=C.useCallback(()=>{r&&r.dispatchCommand(Z5)},[r]),p=C.useCallback(()=>{!r||!e||(r.update(()=>{const x=Xt();if(Ot(x)){const v=`${t+1}_________`,T=Ns(v);T.setStyle("background-color: #f0f9ff; border: 1px dashed #3b82f6; padding: 2px 4px; border-radius: 4px; font-family: monospace;"),x.insertNodes([T])}}),e())},[r,e,t]);return c.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-300 bg-gray-50",children:[c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:n,className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Bold",children:"B"}),c.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 text-sm italic border border-gray-300 rounded hover:bg-gray-200",title:"Italic",children:"I"}),c.jsx("button",{type:"button",onClick:a,className:"px-2 py-1 text-sm underline border border-gray-300 rounded hover:bg-gray-200",title:"Underline",children:"U"}),c.jsx("button",{type:"button",onClick:i,className:"px-2 py-1 text-sm line-through border border-gray-300 rounded hover:bg-gray-200",title:"Strikethrough",children:"S"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:()=>o("h1"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 1",children:"H1"}),c.jsx("button",{type:"button",onClick:()=>o("h2"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 2",children:"H2"}),c.jsx("button",{type:"button",onClick:()=>o("h3"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 3",children:"H3"}),c.jsx("button",{type:"button",onClick:l,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Paragraph",children:"P"}),c.jsx("button",{type:"button",onClick:u,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Quote",children:'"'})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:d,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Bullet List",children:""}),c.jsx("button",{type:"button",onClick:f,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Numbered List",children:"1."}),c.jsx("button",{type:"button",onClick:g,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Remove List",children:""})]}),e&&c.jsx("div",{className:"flex items-center gap-1 border-l border-gray-300 pl-2",children:c.jsxs("button",{type:"button",onClick:p,className:"px-3 py-1 text-sm font-medium bg-blue-500 text-white border border-blue-600 rounded hover:bg-blue-600 transition-colors",title:"Add Blank",children:[c.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",className:"inline mr-1",children:c.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add Blank"]})})]})},Cue=({value:e,onChange:t,placeholder:r,onAddBlank:n,blankCount:s=0})=>{const a={namespace:"FillBlanksLexicalEditor",theme:{root:"p-4 min-h-32 focus:outline-none",paragraph:"mb-2",heading:{h1:"text-3xl font-bold mb-4",h2:"text-2xl font-bold mb-3",h3:"text-xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic text-gray-600 mb-2",list:{nested:{listitem:"list-none"},ol:"list-decimal list-inside mb-2",ul:"list-disc list-inside mb-2",listitem:"mb-1"},text:{bold:"font-bold",italic:"italic",underline:"underline",strikethrough:"line-through"}},nodes:[C1,Pf,nd,k1,v0,Z2,E1,om,lm,cm,Of],onError:i=>{console.error("Lexical error:",i)},editorState:e?(()=>{try{const i=JSON.parse(e);return JSON.stringify(i)}catch{return JSON.stringify({root:{children:[{children:[{detail:0,format:0,mode:"normal",style:"",text:e,type:"text",version:1}],direction:"ltr",format:"",indent:0,type:"paragraph",version:1}],direction:"ltr",format:"",indent:0,type:"root",version:1}})}})():void 0};return c.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:c.jsxs(BG,{initialConfig:a,children:[c.jsx(Tue,{onAddBlank:n,blankCount:s}),c.jsx(kue,{onChange:t}),c.jsxs("div",{className:"relative",children:[c.jsx(nV,{contentEditable:c.jsx(aV,{className:"p-4 min-h-32 focus:outline-none"}),placeholder:c.jsx("div",{className:"absolute top-4 left-4 text-gray-400 pointer-events-none",children:r}),ErrorBoundary:lV}),c.jsx(iV,{}),c.jsx(oV,{}),c.jsx(TV,{}),c.jsx(kV,{transformers:eS})]})]})})},Eue=({testName:e="",allowedTime:t=null,onTestSaved:r,onCancel:n,onBackToCabinet:s,isSaving:a=!1,validationErrors:i={}})=>{const{user:o}=ls(),{post:l}=Bo(),{showNotification:u}=Ba(),[d,f]=C.useState({test_name:e,test_text:"",num_questions:1,num_blanks:0,passing_score:100,separate_type:!0,allowed_time:t,blanks:[]}),[g,p]=C.useState({isLoading:!1,error:null,showPreview:!0});C.useEffect(()=>{f(P=>({...P,test_name:e||"",allowed_time:t}))},[e,t]);const x=P=>{f(j=>({...j,test_text:P}))},y=()=>{const j={id:d.blanks.length+1,position:0,question:"",options:["","","",""],correct_answer:""};f(O=>({...O,blanks:[...O.blanks,j],num_blanks:O.num_blanks+1}))},v=P=>{f(j=>({...j,blanks:j.blanks.filter(O=>O.id!==P),num_blanks:j.num_blanks-1}))},T=P=>{f(j=>({...j,blanks:j.blanks.map(O=>O.id===P?{...O,options:[...O.options,""]}:O)}))},_=(P,j)=>{f(O=>({...O,blanks:O.blanks.map(R=>R.id===P?{...R,options:R.options.filter((M,G)=>G!==j),correct_answer:R.correct_answer===String.fromCharCode(65+j)?"":R.correct_answer}:R)}))},b=(P,j,O)=>{f(R=>({...R,blanks:R.blanks.map(M=>M.id===P?{...M,options:M.options.map((G,K)=>K===j?O:G)}:M)}))},E=(P,j)=>{console.log(" [DEBUG] updateBlankQuestion called:",{blankId:P,question:j}),f(O=>({...O,blanks:O.blanks.map(R=>R.id===P?{...R,question:j}:R)})),console.log(" [DEBUG] updateBlankQuestion completed")},k=(P,j)=>{f(O=>({...O,blanks:O.blanks.map(R=>R.id===P?{...R,correct_answer:j}:R)}))},A=async()=>{if(!d.test_name.trim()){p(P=>({...P,error:"Test name is required"}));return}if(!d.test_text.trim()){p(P=>({...P,error:"Test text is required"}));return}if(d.blanks.length===0){p(P=>({...P,error:"At least one blank is required"}));return}if(console.log(" [DEBUG] Validating blanks:",d.blanks),d.blanks.forEach((P,j)=>{console.log(` [DEBUG] Blank ${j+1}:`,{question:P.question,questionTrimmed:P.question?.trim(),correct_answer:P.correct_answer,options:P.options})}),d.separate_type===!1){if(d.blanks.some(P=>!P.correct_answer)){console.log(" [DEBUG] Validation failed - some blanks missing correct answer"),p(P=>({...P,error:"All blanks must have correct answers"}));return}}else if(d.blanks.some(P=>!P.question.trim()||!P.correct_answer)){console.log(" [DEBUG] Validation failed - some blanks missing question or correct answer"),p(P=>({...P,error:"All blanks must have question text and correct answer"}));return}console.log(" [DEBUG] Validation passed - all blanks have question and correct answer"),p(P=>({...P,isLoading:!0,error:null}));try{const P={test_name:d.test_name,test_text:d.test_text,num_questions:d.blanks.length,num_blanks:d.blanks.length,separate_type:d.separate_type,passing_score:d.passing_score,allowed_time:d.allowed_time,blanks:d.blanks.map((j,O)=>({question_id:O+1,question_json:j.question,question:j.question,options:j.options,correct_answer:j.correct_answer,blank_positions:{},blank_options:j.options||[],correct_answers:[j.correct_answer]}))};console.log(" [DEBUG] Calling onTestSaved with data:",P),r?(console.log(" [DEBUG] onTestSaved function exists, calling it..."),r(P),console.log(" [DEBUG] onTestSaved called successfully")):console.log(" [DEBUG] onTestSaved function is null/undefined")}catch(P){console.error("Error preparing fill blanks test:",P),p(j=>({...j,error:"Failed to prepare fill blanks test. Please try again."})),u("Failed to prepare fill blanks test","error")}finally{p(P=>({...P,isLoading:!1}))}};return c.jsx("div",{className:"fill-blanks-test-creator max-w-4xl mx-auto p-6",children:c.jsxs(Et,{className:"p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Fill Blanks Test"}),c.jsx("p",{className:"text-gray-600",children:"Create a test with rich text content and multiple choice blanks"}),c.jsx("div",{className:"mt-2 text-sm text-gray-600",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{children:[c.jsx("strong",{children:"Test Name:"})," ",e||"Untitled Test"]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Blanks:"})," ",d.num_blanks," (auto-calculated)"]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Timer:"})," ",d.allowed_time?`${d.allowed_time} minutes`:"No timer"]})]})}),g.error&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-600 text-sm",children:g.error})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Text Content with Blanks"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Type your text and add blanks where needed"})]}),c.jsx("div",{className:"flex items-center space-x-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Mode:"}),c.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[c.jsx("button",{onClick:()=>f(P=>({...P,separate_type:!0})),className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${d.separate_type===!0?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Separate"}),c.jsx("button",{onClick:()=>f(P=>({...P,separate_type:!1})),className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${d.separate_type===!1?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Inline"})]})]})})]}),c.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:d.separate_type===!0?"Separate Mode:":"Inline Mode:"})," ",d.separate_type===!0?"Students see numbered blanks in text and answer questions below":"Students see clickable blanks in text with dropdown options"]})}),c.jsx(Cue,{value:d.test_text,onChange:x,placeholder:"Type your text here. Use the 'Add Blank' button in the toolbar to insert blanks.",onAddBlank:y,blankCount:d.blanks.length})]}),d.separate_type===!0&&c.jsx("div",{className:"space-y-4",children:d.blanks.map((P,j)=>c.jsxs(Et,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-md font-medium",children:["Blank ",P.id," Configuration"]}),c.jsx(nt,{variant:"danger",size:"small",onClick:()=>v(P.id),className:"px-2 py-1 text-sm",children:"Remove Blank"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Question Text for Blank ",P.id," *"]}),c.jsx("input",{type:"text",placeholder:"Enter question text for this blank",value:P.question,onChange:O=>E(P.id,O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Answer Options:"}),P.options.map((O,R)=>c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+R)}),c.jsx("input",{type:"text",placeholder:`Option ${String.fromCharCode(65+R)}`,value:O||"",onChange:M=>b(P.id,R,M.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"}),P.options.length>2&&c.jsx(nt,{variant:"danger",size:"small",onClick:()=>_(P.id,R),className:"px-2 py-1 text-sm",children:""})]},R)),P.options.length<6&&c.jsx(nt,{variant:"secondary",size:"small",onClick:()=>T(P.id),className:"w-full",children:"+ Add Option"})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),c.jsxs("select",{value:P.correct_answer||"",onChange:O=>k(P.id,O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"",children:"Select correct answer"}),P.options.filter(O=>O.trim().length>0).map((O,R)=>c.jsxs("option",{value:String.fromCharCode(65+R),children:[String.fromCharCode(65+R),") ",O]},R))]})]})]},P.id))}),d.separate_type===!1&&c.jsx("div",{className:"space-y-4",children:d.blanks.map((P,j)=>c.jsxs(Et,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-md font-medium",children:["Blank ",P.id," Options"]}),c.jsx(nt,{variant:"danger",size:"small",onClick:()=>v(P.id),className:"px-2 py-1 text-sm",children:"Remove Blank"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Answer Options:"}),P.options.map((O,R)=>c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+R)}),c.jsx("input",{type:"text",placeholder:`Option ${String.fromCharCode(65+R)}`,value:O||"",onChange:M=>b(P.id,R,M.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"}),P.options.length>2&&c.jsx(nt,{variant:"danger",size:"small",onClick:()=>_(P.id,R),className:"px-2 py-1 text-sm",children:""})]},R)),P.options.length<6&&c.jsx(nt,{variant:"secondary",size:"small",onClick:()=>T(P.id),className:"w-full",children:"+ Add Option"})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),c.jsxs("select",{value:P.correct_answer||"",onChange:O=>k(P.id,O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"",children:"Select correct answer"}),P.options.filter(O=>O.trim().length>0).map((O,R)=>c.jsxs("option",{value:String.fromCharCode(65+R),children:[String.fromCharCode(65+R),") ",O]},R))]})]})]},P.id))}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx(nt,{onClick:n,variant:"secondary",disabled:a,children:"Cancel"}),c.jsx(nt,{onClick:A,variant:"primary",disabled:a||d.blanks.length===0,children:a?c.jsx(Gr,{size:"sm"}):"Save Test"})]})]})})},Nue=[{value:"A1",label:"A1 (Beginner)",description:"Basic vocabulary, simple sentences"},{value:"A2",label:"A2 (Elementary)",description:"Everyday vocabulary, present/past tenses"},{value:"B1",label:"B1 (Intermediate)",description:"Varied vocabulary, complex sentences"},{value:"B2",label:"B2 (Upper-Intermediate)",description:"Advanced vocabulary, sophisticated structures"},{value:"C1",label:"C1 (Advanced)",description:"Nuanced vocabulary, complex discourse"},{value:"C2",label:"C2 (Proficiency)",description:"Native-like fluency and accuracy"}],Aue=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{showNotification:i}=Ba(),[o,l]=C.useState({min_words:50,questions:[{question_id:1,prompt:"",expected_duration:null,difficulty_level:"B1"}]}),[u,d]=C.useState(!1),f=C.useCallback((T,_)=>{l(b=>({...b,[T]:_}))},[]),g=C.useCallback((T,_,b)=>{l(E=>({...E,questions:E.questions.map((k,A)=>A===T?{...k,[_]:b}:k)}))},[]),p=C.useCallback(()=>{l(T=>({...T,questions:[...T.questions,{question_id:T.questions.length+1,prompt:"",expected_duration:null,difficulty_level:"B1"}]}))},[]),x=C.useCallback(T=>{o.questions.length>1&&l(_=>({..._,questions:_.questions.filter((b,E)=>E!==T)}))},[o.questions.length]),y=C.useCallback(()=>{const T={};return o.min_words<10&&(T.min_words="Minimum word count must be at least 10 words"),o.questions.forEach((_,b)=>{_.prompt.trim()||(T[`question_${b}_prompt`]="Question prompt is required")}),T},[o]),v=C.useCallback(async T=>{T.preventDefault();const _=y();if(Object.keys(_).length>0){i("Please fix the validation errors","error");return}d(!0);try{const b={test_name:e,time_limit:300,min_duration:30,max_duration:600,max_attempts:3,min_words:o.min_words,passing_score:50,allowed_time:null,questions:o.questions.map((E,k)=>({question_id:k+1,prompt:E.prompt,expected_duration:E.expected_duration,difficulty_level:E.difficulty_level}))};console.log(" [DEBUG] Calling onTestSaved with data:",b),t?(console.log(" [DEBUG] onTestSaved function exists, calling it..."),t(b),console.log(" [DEBUG] onTestSaved called successfully")):console.log(" [DEBUG] onTestSaved function is null/undefined")}catch(b){console.error("Error preparing speaking test:",b),i("Failed to prepare speaking test","error")}finally{d(!1)}},[o,y,i,t,e]);return u||s?c.jsxs("div",{className:"flex items-center justify-center p-8",children:[c.jsx(Gr,{}),c.jsx("span",{className:"ml-2",children:"Creating speaking test..."})]}):c.jsxs("div",{className:"speaking-test-creator max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Speaking Test"}),c.jsx("p",{className:"text-gray-600",children:"Create a speaking test where students record audio responses with AI-powered feedback"})]}),c.jsxs("form",{onSubmit:v,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Scoring Settings"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Word Count *"}),c.jsx("input",{type:"number",min:"10",max:"1000",value:o.min_words,onChange:T=>f("min_words",parseInt(T.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.min_words&&c.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.min_words})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Questions"}),c.jsx(nt,{type:"button",variant:"outline",onClick:p,children:"Add Question"})]}),o.questions.length>1&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Multiple Questions Detected"}),c.jsx("div",{className:"mt-1 text-sm text-blue-700",children:c.jsxs("p",{children:["You have ",o.questions.length," questions in this test.",c.jsx("strong",{children:" Only one question will be randomly selected"})," and shown to each student. This ensures fair distribution across your question pool."]})})]})]})}),o.questions.map((T,_)=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("h4",{className:"font-medium",children:["Question ",_+1]}),o.questions.length>1&&c.jsx(nt,{type:"button",variant:"outline",size:"sm",onClick:()=>x(_),className:"text-red-600 hover:text-red-700",children:"Remove"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Prompt *"}),c.jsx("textarea",{value:T.prompt,onChange:b=>g(_,"prompt",b.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter the question prompt for students"}),a[`question_${_}_prompt`]&&c.jsx("p",{className:"text-red-500 text-sm mt-1",children:a[`question_${_}_prompt`]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Duration (seconds)"}),c.jsx("input",{type:"number",min:"10",max:"600",value:T.expected_duration||"",onChange:b=>g(_,"expected_duration",b.target.value?parseInt(b.target.value):null),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEFR Level"}),c.jsx("select",{value:T.difficulty_level,onChange:b=>g(_,"difficulty_level",b.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:Nue.map(b=>c.jsxs("option",{value:b.value,children:[b.label," - ",b.description]},b.value))}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select the appropriate CEFR level for this question. This will be used by AI to evaluate students appropriately."})]})]})]})]},_))]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[c.jsx(nt,{type:"button",variant:"secondary",onClick:r,children:"Cancel"}),c.jsx(nt,{type:"submit",variant:"primary",disabled:u||s,children:u||s?"Creating...":"Create Speaking Test"})]})]})]})},CV=(e,t)=>{const[r,n]=C.useState(()=>{try{const i=window.localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error(`Error reading localStorage key "${e}":`,i),t}}),s=C.useCallback(i=>{try{const o=i instanceof Function?i(r):i;n(o),window.localStorage.setItem(e,JSON.stringify(o))}catch(o){console.error(`Error setting localStorage key "${e}":`,o)}},[e,r]),a=C.useCallback(()=>{try{window.localStorage.removeItem(e),n(t)}catch(i){console.error(`Error removing localStorage key "${e}":`,i)}},[e,t]);return[r,s,a]},tS=()=>{const e=C.useCallback((l,u=null)=>{try{const d=window.localStorage.getItem(l);return d?JSON.parse(d):u}catch(d){return console.error(`Error reading localStorage key "${l}":`,d),u}},[]),t=C.useCallback((l,u)=>{try{window.localStorage.setItem(l,JSON.stringify(u))}catch(d){console.error(`Error setting localStorage key "${l}":`,d)}},[]),r=C.useCallback(l=>{try{window.localStorage.removeItem(l)}catch(u){console.error(`Error removing localStorage key "${l}":`,u)}},[]),n=C.useCallback(()=>{if(confirm("Are you sure you want to clear all local storage? This cannot be undone."))try{window.localStorage.clear(),window.showNotification?window.showNotification("All local storage cleared!","success"):console.log("All local storage cleared!")}catch(l){console.error("Error clearing localStorage:",l)}},[]),s=C.useCallback(()=>{try{const l={};for(let g=0;g<window.localStorage.length;g++){const p=window.localStorage.key(g);p&&(l[p]=window.localStorage.getItem(p))}const u=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),d=URL.createObjectURL(u),f=document.createElement("a");f.href=d,f.download="localStorage_backup.json",f.click(),URL.revokeObjectURL(d),window.showNotification?window.showNotification("Local storage exported!","success"):console.log("Local storage exported!")}catch(l){console.error("Error exporting localStorage data:",l)}},[]),a=C.useCallback(()=>{try{window.localStorage.clear()}catch(l){console.error("Error clearing localStorage:",l)}},[]),i=C.useCallback(()=>{try{const l={};for(let u=0;u<window.localStorage.length;u++){const d=window.localStorage.key(u);d&&(l[d]=window.localStorage.getItem(d))}return l}catch(l){return console.error("Error exporting localStorage data:",l),{}}},[]),o=C.useCallback(l=>{try{Object.entries(l).forEach(([u,d])=>{window.localStorage.setItem(u,d)})}catch(u){console.error("Error importing localStorage data:",u)}},[]);return{getItem:e,setItem:t,removeItem:r,clearAll:a,clearAllLocalStorage:n,exportLocalStorage:s,exportData:i,importData:o}},jue=({question:e,testId:t,testType:r="true_false",mode:n="student",displayNumber:s,studentAnswer:a,onAnswerChange:i,onQuestionChange:o,onSave:l,isEditing:u=!1,isSaving:d=!1,validationErrors:f={},showCorrectAnswers:g=!1,studentId:p=null})=>{const{getItem:x,setItem:y}=tS();Ba(),C.useRef(null);const[v,T]=C.useState(""),[_,b]=C.useState(""),[E,k]=C.useState(""),[A,P]=C.useState(!1),[j,O]=C.useState(!0),[R,M]=C.useState(""),[G,K]=C.useState(!1),[re,Y]=C.useState(null);C.useEffect(()=>{if(e&&(k(e.question||""),b(e.correct_answer||""),n==="student"&&p)){const ne=x(`test_progress_${p}_${r}_${t}_${e.question_id}`);ne&&T(ne)}},[e,t,r,n,x]),C.useEffect(()=>{n==="student"&&a!==void 0&&a!==null&&(console.log(" TrueFalseQuestion syncing with parent studentAnswer:",a),T(a))},[a,n]),C.useEffect(()=>{if(n==="student"&&v&&t&&e?.question_id&&p){const ne=setTimeout(()=>{K(!0),y(`test_progress_${p}_${r}_${t}_${e.question_id}`,v),Y(new Date().toLocaleTimeString()),setTimeout(()=>K(!1),1e3)},1e3);return()=>clearTimeout(ne)}},[v,t,r,e?.question_id,n,p,y]),C.useEffect(()=>{if(n==="teacher"&&(E||_)){const ne=setTimeout(()=>{K(!0);const Z={question:E,correct_answer:_,timestamp:Date.now()};y(`teacher_form_${r}_${t}`,Z),Y(new Date().toLocaleTimeString()),setTimeout(()=>K(!1),1e3)},2e3);return()=>clearTimeout(ne)}},[E,_,t,r,n,y]);const ee=C.useCallback(ne=>{n==="student"&&(T(ne),i&&i(e.question_id,ne),I(ne))},[n,e?.question_id,i]),B=C.useCallback(ne=>{k(ne),o&&o(e.question_id,ne),W(ne)},[e?.question_id,o]),z=C.useCallback(ne=>{b(ne),o&&o(e.question_id,{...e,correct_answer:ne}),V(ne)},[e,o]),I=C.useCallback(ne=>{if(n==="student"){if(!ne){O(!1),M("Please select an answer");return}O(!0),M("")}},[n]),W=C.useCallback(ne=>{if(n==="teacher"){if(!ne||ne.trim().length<10){O(!1),M("Question must be at least 10 characters long");return}O(!0),M("")}},[n]),V=C.useCallback(ne=>{if(n==="teacher"){if(!ne){O(!1),M("Please select a correct answer");return}O(!0),M("")}},[n]),L=C.useCallback(()=>{if(n!=="teacher"||!l)return;const ne={question_id:e.question_id,question:E,correct_answer:_,type:"true_false"};l(ne)},[n,l,e?.question_id,E,_]),H=C.useCallback(ne=>ne?ne.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br>"):"",[]),J=()=>c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",typeof s=="number"?s:e?.question_id]}),c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[G&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(Gr,{size:"small"}),c.jsx("span",{children:"Saving..."})]}),re&&!G&&c.jsxs("div",{className:"text-green-600",children:[" Saved at ",re]})]})]}),c.jsx("div",{className:"question-text mb-6 text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:H(E)}}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${v==="true"?"border-blue-500 bg-blue-50":"border-gray-200"} ${g&&_==="true"?"ring-2 ring-green-400":""}`,children:[c.jsx("input",{type:"radio",name:`question_${e?.question_id}`,value:"true",checked:v==="true",onChange:()=>ee("true"),className:"sr-only","aria-label":"True"}),c.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${v==="true"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:v==="true"&&c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),c.jsx("span",{className:"text-gray-800 font-medium",children:"True"})]}),c.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${v==="false"?"border-blue-500 bg-blue-50":"border-gray-200"} ${g&&_==="false"?"ring-2 ring-green-400":""}`,children:[c.jsx("input",{type:"radio",name:`question_${e?.question_id}`,value:"false",checked:v==="false",onChange:()=>ee("false"),className:"sr-only","aria-label":"False"}),c.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${v==="false"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:v==="false"&&c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),c.jsx("span",{className:"text-gray-800 font-medium",children:"False"})]})]}),!j&&R&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:R})]}),Q=()=>c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e?.question_id||"New Question"]}),c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[G&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(Gr,{size:"small"}),c.jsx("span",{children:"Saving..."})]}),re&&!G&&c.jsxs("div",{className:"text-green-600",children:[" Saved at ",re]})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`question_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),c.jsx("textarea",{id:`question_${e?.question_id}`,value:E,onChange:ne=>B(ne.target.value),placeholder:"Enter your question here...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",rows:3,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Correct Answer *"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${_==="true"?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[c.jsx("input",{type:"radio",name:`correct_${e?.question_id}`,value:"true",checked:_==="true",onChange:()=>z("true"),className:"sr-only","aria-label":"True"}),c.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${_==="true"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:_==="true"&&c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),c.jsx("span",{className:"text-gray-800 font-medium",children:"True"})]}),c.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${_==="false"?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[c.jsx("input",{type:"radio",name:`correct_${e?.question_id}`,value:"false",checked:_==="false",onChange:()=>z("false"),className:"sr-only","aria-label":"False"}),c.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${_==="false"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:_==="false"&&c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),c.jsx("span",{className:"text-gray-800 font-medium",children:"False"})]})]})]})]}),!j&&R&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:R}),c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:c.jsx(nt,{variant:"success",onClick:L,disabled:!j||d,className:"w-full sm:w-auto",children:d?c.jsx(Gr,{size:"small"}):"Save Question"})})]});return c.jsx("div",{className:"true-false-question-container",children:n==="student"?J():Q()})},Pue=({question:e,testId:t,testType:r="multiple_choice",mode:n="student",studentAnswer:s,onAnswerChange:a,onQuestionChange:i,onOptionAdd:o,onOptionRemove:l,onSave:u,isEditing:d=!1,isSaving:f=!1,validationErrors:g={},showCorrectAnswers:p=!1,studentId:x=null,displayNumber:y})=>{const{getItem:v,setItem:T}=tS(),{showNotification:_}=Ba();C.useRef(null);const[b,E]=C.useState(""),[k,A]=C.useState(["","","",""]),[P,j]=C.useState(""),[O,R]=C.useState(""),[M,G]=C.useState(!1),[K,re]=C.useState(!0),[Y,ee]=C.useState(""),[B,z]=C.useState(!1),[I,W]=C.useState(null);C.useEffect(()=>{if(e&&(R(e.question||""),A(e.options||["","","",""]),j(e.correct_answer||""),n==="student"&&x)){const Ne=v(`test_progress_${x}_${r}_${t}_${e.question_id}`);Ne&&E(Ne)}},[e,t,r,n,v]),C.useEffect(()=>{n==="student"&&s!==void 0&&s!==null&&(console.log(" MultipleChoiceQuestion syncing with parent studentAnswer:",s),E(s))},[s,n]),C.useEffect(()=>{if(n==="student"&&b&&t&&e?.question_id&&x){const Ne=setTimeout(()=>{z(!0),T(`test_progress_${x}_${r}_${t}_${e.question_id}`,b),W(new Date().toLocaleTimeString()),setTimeout(()=>z(!1),1e3)},1e3);return()=>clearTimeout(Ne)}},[b,t,r,e?.question_id,n,x,T]),C.useEffect(()=>{if(n==="teacher"&&(O||k.some(Ne=>Ne.trim()))){const Ne=setTimeout(()=>{z(!0);const Oe={question:O,options:k,correct_answer:P,timestamp:Date.now()};T(`teacher_form_${r}_${t}`,Oe),W(new Date().toLocaleTimeString()),setTimeout(()=>z(!1),1e3)},2e3);return()=>clearTimeout(Ne)}},[O,k,P,t,r,n,T]),C.useCallback(Ne=>{if(n!=="student")return;const Oe=String(Ne);E(Oe),a&&a(e.question_id,Oe),ne(Oe)},[n,e?.question_id,a]);const V=C.useCallback(Ne=>{R(Ne),i&&i(e.question_id,Ne),Z(Ne)},[e?.question_id,i]),L=C.useCallback((Ne,Oe)=>{const Re=[...k];Re[Ne]=Oe,A(Re),i&&i(e.question_id,{...e,options:Re}),se(Re)},[k,e,i]),H=C.useCallback(Ne=>{j(Ne),i&&i(e.question_id,{...e,correct_answer:Ne}),ce(Ne)},[e,i]),J=C.useCallback(()=>{if(k.length<6){const Ne=[...k,""];A(Ne),o&&o(e.question_id,Ne)}else _("Maximum 6 options allowed","warning")},[k,e?.question_id,o,_]),Q=C.useCallback(Ne=>{if(k.length>2){const Oe=k.filter((Re,ze)=>ze!==Ne);if(A(Oe),P===String.fromCharCode(65+Ne))j("");else if(P&&String.fromCharCode(65+Ne)<P){const Re=String.fromCharCode(65+Ne-1);j(Re)}l&&l(e.question_id,Oe)}else _("Minimum 2 options required","warning")},[k,P,e?.question_id,l,_]),ne=C.useCallback(Ne=>{if(n==="student"){if(!Ne){re(!1),ee("Please select an answer");return}re(!0),e?.correct_answer&&Ne===e.correct_answer?ee(" Correct answer!"):e?.correct_answer?ee(" Incorrect answer"):ee("Answer selected")}},[n,e?.correct_answer]),Z=C.useCallback(Ne=>!Ne||Ne.trim().length<10?(re(!1),ee("Question must be at least 10 characters long"),!1):(re(!0),ee(""),!0),[]),se=C.useCallback(Ne=>{if(n!=="teacher")return;if(Ne.filter(Re=>Re.trim().length>0).length<2){re(!1),ee("At least 2 options must be filled");return}if(Ne.some(Re=>Re.trim().length>0&&Re.trim().length<3)){re(!1),ee("Each option must be at least 3 characters long");return}re(!0),ee("")},[n]),ce=C.useCallback(Ne=>{if(n==="teacher"){if(!Ne){re(!1),ee("Please select a correct answer");return}re(!0),ee("")}},[n]),he=C.useCallback(()=>{if(n!=="teacher"||!u)return;const Ne={question_id:e.question_id,question:O,options:k.filter(Oe=>Oe.trim().length>0),correct_answer:P,type:"multiple_choice"};u(Ne)},[n,u,e?.question_id,O,k,P]),Ee=C.useCallback(Ne=>Ne?Ne.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br>"):"",[]);return n==="teacher"?c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e?.question_id||"New Question"]}),c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[B&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(Gr,{size:"small"}),c.jsx("span",{children:"Saving..."})]}),I&&!B&&c.jsxs("div",{className:"text-green-600",children:[" Saved at ",I]})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`question_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),c.jsx("textarea",{id:`question_${e?.question_id}`,value:O,onChange:Ne=>V(Ne.target.value),placeholder:"Enter your question here...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",rows:3,required:!0})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Answer Options *"}),c.jsx(nt,{variant:"secondary",size:"small",onClick:J,disabled:k.length>=6,className:"px-3 py-1 text-sm",children:"+ Add Option"})]}),c.jsx("div",{className:"space-y-3",children:k.map((Ne,Oe)=>c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+Oe)}),c.jsx("input",{type:"text",value:Ne,onChange:Re=>L(Oe,Re.target.value),placeholder:`Option ${String.fromCharCode(65+Oe)}`,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",required:!0}),k.length>2&&c.jsx(nt,{variant:"danger",size:"small",onClick:()=>Q(Oe),className:"px-2 py-1 text-sm",children:""})]},Oe))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`correct_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),c.jsxs("select",{id:`correct_${e?.question_id}`,value:P,onChange:Ne=>H(Ne.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",required:!0,children:[c.jsx("option",{value:"",children:"Select correct answer"}),k.map((Ne,Oe)=>{if(!Ne.trim())return null;const Re=String.fromCharCode(65+Oe);return c.jsxs("option",{value:Re,children:[Re,") ",Ne]},Oe)})]})]})]}),!K&&Y&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:Y}),c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:c.jsx(nt,{variant:"success",onClick:he,disabled:!K||f,className:"w-full sm:w-auto",children:f?c.jsx(Gr,{size:"small"}):"Save Question"})})]}):c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",typeof y=="number"?y:e?.question_id]}),c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[B&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(Gr,{size:"small"}),c.jsx("span",{children:"Saving..."})]}),I&&!B&&c.jsxs("div",{className:"text-green-600",children:[" Saved at ",I]})]})]}),c.jsx("div",{className:"question-text mb-6 text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:Ee(O)}}),c.jsx("div",{className:"space-y-3",children:k.map((Ne,Oe)=>c.jsxs("label",{className:`flex items-center p-3 rounded-lg border-2 cursor-pointer transition-all duration-200 ${b===String.fromCharCode(65+Oe)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[c.jsx("input",{type:"radio",name:`mcq_${t}_${e?.question_id}`,value:String.fromCharCode(65+Oe),checked:b===String.fromCharCode(65+Oe),onChange:Re=>{E(Re.target.value),a&&a(e?.question_id,Re.target.value)},className:"mr-3"}),c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600 mr-3",children:String.fromCharCode(65+Oe)}),c.jsx("span",{className:"flex-1",children:Ne||`Option ${String.fromCharCode(65+Oe)}`})]},Oe))}),!K&&Y&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:Y})]})},Oue=({question:e,testId:t,testType:r="input",mode:n="student",displayNumber:s,studentAnswer:a,onAnswerChange:i,onQuestionChange:o,onAnswerAdd:l,onAnswerRemove:u,onSave:d,isEditing:f=!1,isSaving:g=!1,validationErrors:p={},showCorrectAnswers:x=!1,studentId:y=null})=>{const{getItem:v,setItem:T}=tS(),{showNotification:_}=Ba(),b=C.useRef(null),[E,k]=C.useState(""),[A,P]=C.useState([""]),[j,O]=C.useState(!1),[R,M]=C.useState(!0),[G,K]=C.useState(""),[re,Y]=C.useState(!1);C.useEffect(()=>{if(n==="student"&&e?.question_id&&t&&r&&y){const Z=`test_progress_${y}_${r}_${t}_${e.question_id}`,se=v(Z);se&&k(se)}},[e?.question_id,r,t,n,y,v]),C.useEffect(()=>{n==="student"&&a!==void 0&&a!==null&&(console.log(" InputQuestion syncing with parent studentAnswer:",a),k(a))},[a,n]),C.useEffect(()=>{n==="teacher"&&e?.answers&&P(e.answers.length>0?e.answers:[""])},[e?.answers,n]),C.useEffect(()=>{if(n==="student"&&E&&e?.question_id&&t&&r&&y){const Z=setTimeout(()=>{Y(!0),T(`test_progress_${y}_${r}_${t}_${e.question_id}`,E),setTimeout(()=>Y(!1),1e3)},1e3);return()=>clearTimeout(Z)}},[E,e?.question_id,r,t,n,y,T]),C.useEffect(()=>{if(n==="teacher"&&A&&o){const Z=setTimeout(()=>{o({...e,answers:A.filter(se=>se.trim())})},500);return()=>clearTimeout(Z)}},[A,e,n,o]);const ee=C.useCallback(Z=>{k(Z);const se=Z.trim().length>0;M(se),K(se?"":"Please enter an answer"),i&&i(e.question_id,Z)},[e?.question_id,i]),B=C.useCallback((Z,se)=>{const ce=[...A];ce[Z]=se,P(ce),i&&i(e.question_id,ce)},[A,e?.question_id,i]),z=C.useCallback(()=>{if(n==="teacher"){const Z=[...A,""];P(Z),l&&l(e.question_id,Z)}},[A,e?.question_id,n,l]),I=C.useCallback(Z=>{if(n==="teacher"&&A.length>1){const se=A.filter((ce,he)=>he!==Z);P(se),u&&u(e.question_id,se)}},[A,e?.question_id,n,u]),W=C.useCallback(()=>{if(n==="student"){const Z=E.trim().length>0;return M(Z),K(Z?"":"Please enter an answer"),Z}else if(n==="teacher"){const Z=A.some(se=>se.trim().length>0);return M(Z),K(Z?"":"Please enter at least one correct answer"),Z}return!0},[E,A,n]),V=C.useCallback(Z=>Z?Z.replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>"):"",[]),L=C.useCallback(()=>{O(!0)},[]),H=C.useCallback(()=>{O(!1),W()},[W]),J=C.useCallback(Z=>{Z.key==="Enter"&&n==="student"&&E.trim()&&(T(`test_progress_${r}_${t}_${e.question_id}`,E),_("Answer saved","success"))},[E,r,t,e?.question_id,n,T,_]),Q=()=>c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",typeof s=="number"?s:e.question_id]}),re&&c.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[c.jsx(Gr,{size:"small"}),c.jsx("span",{children:"Saving..."})]})]}),c.jsx("div",{className:"question-text mb-6 text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:V(e.question)}}),c.jsx("div",{className:"space-y-3",children:c.jsx("input",{ref:b,type:"text",id:`input_${e.question_id}`,placeholder:"Enter your answer here...",value:E,onChange:Z=>ee(Z.target.value),onFocus:L,onBlur:H,onKeyPress:J,className:`w-full px-4 py-3 border-2 rounded-lg text-gray-800 placeholder-gray-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 ${R?j?"border-blue-500":"border-gray-300 hover:border-gray-400":"border-red-300 focus:border-red-500 focus:ring-red-500"}`,"data-question-id":e.question_id,"aria-label":`Answer for question ${e.question_id}`,"aria-invalid":!R,"aria-describedby":R?void 0:`error-${e.question_id}`})}),x&&e.correct_answers&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[c.jsx("h5",{className:"text-sm font-semibold text-green-800 mb-2",children:"Correct Answers:"}),c.jsx("ul",{className:"space-y-1",children:e.correct_answers.map((Z,se)=>c.jsxs("li",{className:"text-green-700 text-sm",children:[" ",Z]},se))})]})]}),ne=()=>c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e.question_id||"New"]}),g&&c.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[c.jsx(Gr,{size:"small"}),c.jsx("span",{children:"Saving..."})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`question_${e.question_id||"new"}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),c.jsx("input",{type:"text",id:`question_${e.question_id||"new"}`,value:e.question||"",onChange:Z=>o&&o({...e,question:Z.target.value}),placeholder:"Enter question text",className:`w-full px-4 py-3 border-2 rounded-lg text-gray-800 placeholder-gray-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 ${p.question?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:border-blue-500"}`}),p.question&&c.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:p.question})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Correct Answers *"}),c.jsx(nt,{type:"button",variant:"secondary",size:"small",onClick:z,className:"px-3 py-1 text-sm",children:"+ Add Answer"})]}),c.jsx("div",{className:"space-y-3",children:A.map((Z,se)=>c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:se+1}),c.jsx("input",{type:"text",value:Z,onChange:ce=>B(se,ce.target.value),placeholder:`Correct answer ${se+1}`,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200","data-question-id":e.question_id,"data-answer-index":se}),A.length>1&&c.jsx(nt,{type:"button",variant:"danger",size:"small",onClick:()=>I(se),className:"px-2 py-1 text-sm",children:" Remove"})]},se))}),p.answers&&c.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:p.answers})]})]}),d&&c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:c.jsx(nt,{type:"button",variant:"success",onClick:d,disabled:g,className:"w-full sm:w-auto",children:g?c.jsx(Gr,{size:"small"}):"Save Question"})})]});return c.jsx("div",{className:`input-question-container ${n} ${j?"focused":""}`,children:n==="student"?Q():ne()})},Vl=({isOpen:e=!1,onClose:t,title:r="",children:n,size:s="medium",showCloseButton:a=!0,closeOnBackdropClick:i=!0,className:o="",...l})=>{if(!e)return null;const u=f=>{i&&f.target===f.currentTarget&&t()};Be.useEffect(()=>{const f=g=>{g.key==="Escape"&&t()};return e&&(document.addEventListener("keydown",f),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",f),document.body.style.overflow="unset"}},[e,t]);const d={small:"max-w-md",medium:"max-w-lg",large:"max-w-4xl"};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:u,role:"dialog","aria-modal":"true","aria-label":r,...l,children:c.jsxs("div",{className:`
          bg-white rounded-xl shadow-md border border-gray-200 p-8
          hover:shadow-lg hover:-translate-y-1 transition-all duration-200
          w-full ${d[s]} mx-auto
          ${o}
        `,onClick:f=>f.stopPropagation(),children:[(r||a)&&c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r&&c.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:r}),a&&c.jsx("button",{onClick:t,className:"text-red-500 hover:text-red-700 hover:bg-red-50 transition-all duration-200 rounded-full p-2 text-2xl font-bold leading-none","aria-label":"Close modal",children:""})]}),c.jsx("div",{className:"space-y-6",children:n})]})})},um=(e,t,r)=>{const[n,s]=C.useState(!1),[a,i]=C.useState(0),[o,l]=C.useState(!1),u=C.useRef(!1);C.useEffect(()=>{if(!e||!t||!r)return;const v=`anti_cheating_${r}_${e}_${t}`,T=ms(v);T&&(i(T.tabSwitches||0),l(T.isCheating||!1))},[e,t,r]);const d=C.useCallback(()=>{if(console.log(" handleTabSwitch called - isTracking:",u.current),!u.current){console.log(" Not tracking, returning early");return}console.log(" Tab switch detected - starting 7 second timer...");const v=Date.now();setTimeout(()=>{const T=Date.now()-v;console.log(" Timer completed - time hidden:",T,"ms"),T>=6500?(console.log(" Tab was hidden for sufficient time - counting as tab switch"),i(_=>{const b=_+1,E=b>=2;console.log(" Tab switch count updated:",{newCount:b,cheating:E}),l(E);const k=`anti_cheating_${r}_${e}_${t}`;return ys(k,{tabSwitches:b,isCheating:E},120*1e3),b})):console.log(" Tab was not hidden long enough - not counting as switch")},7e3)},[e,t,r]),f=C.useCallback(()=>{u.current&&(console.log(" Visibility change detected:",{hidden:document.hidden,isTracking:u.current}),document.hidden?d():console.log(" Tab became visible"))},[d]),g=C.useCallback(()=>{console.log(" startTracking called - setting up anti-cheating detection"),console.log(" Current document.hidden state:",document.hidden),console.log(" Current document.visibilityState:",document.visibilityState),s(!0),u.current=!0,document.addEventListener("visibilitychange",f),console.log(" Anti-cheating event listeners added (visibilitychange only)")},[f]),p=C.useCallback(()=>{console.log(" stopTracking called - removing anti-cheating detection"),s(!1),u.current=!1,document.removeEventListener("visibilitychange",f),console.log(" Anti-cheating event listeners removed")},[f]),x=C.useCallback(()=>{const v={caught_cheating:o,visibility_change_times:a};return console.log(" getCheatingData called:",v),v},[o,a]),y=C.useCallback(()=>{r&&e&&t&&Yp(r,e,t),i(0),l(!1),console.log(" Anti-cheating data deleted from localStorage")},[r,e,t]);return{startTracking:g,stopTracking:p,clearData:y,getCheatingData:x,tabSwitches:a,isCheating:o,isTracking:n}},Fue=({testData:e,onTestComplete:t,onBackToCabinet:r,isTestComplete:n=!1,testScore:s=null})=>{const[a,i]=C.useState(null),[o,l]=C.useState(null);C.useEffect(()=>{(async()=>{try{const[Fe,Ke]=await Promise.all([Vi(()=>Promise.resolve().then(()=>_ie),void 0),Vi(()=>Promise.resolve().then(()=>eae),void 0)]);i(Fe),l(Ke.default)}catch(Fe){console.error("Failed to load Konva:",Fe)}})()},[]);const u=()=>a?{Stage:a.Stage,Layer:a.Layer,Rect:a.Rect,Arrow:a.Arrow,KonvaImage:a.Image,KonvaText:a.Text,Group:a.Group}:null,[d,f]=C.useState({}),[g,p]=C.useState({}),[x,y]=C.useState(0),[v,T]=C.useState(!1),[_,b]=C.useState(null),[E,k]=C.useState(0),[A,P]=C.useState(0),[j,O]=C.useState(null),[R,M]=C.useState(null),[G,K]=C.useState(!1),[re,Y]=C.useState(!1),{showNotification:ee}=Ba(),{makeAuthenticatedRequest:B}=Bo(),{user:z}=ls(),{startTracking:I,stopTracking:W,getCheatingData:V,clearData:L}=um("matching_type",e?.id,z?.student_id||z?.id),H=C.useRef(null),J=C.useRef(null),Q=C.useRef(null),ne=C.useRef(0),[Z,se]=C.useState(400);C.useRef({});const ce=C.useCallback(()=>{K(!0)},[]),he=C.useCallback(()=>{p({}),f({}),K(!1)},[]),Ee=C.useCallback(()=>{Y(!0)},[]),ie=C.useCallback(()=>{Y(!1),r()},[r]),me=C.useMemo(()=>{if(!e)return null;const Me=e.blocks.map(xt=>{let ut=xt.coordinates;if(typeof ut=="string")try{ut=JSON.parse(ut)}catch(At){console.error(" Failed to parse coordinates:",At),ut={x:0,y:0,width:100,height:100}}return ut={x:(typeof ut.x=="number"?ut.x:Number(ut.x))||0,y:(typeof ut.y=="number"?ut.y:Number(ut.y))||0,width:(typeof ut.width=="number"?ut.width:Number(ut.width))||30,height:(typeof ut.height=="number"?ut.height:Number(ut.height))||10},{id:xt.id,word:xt.word,coordinates:ut,hasArrow:xt.hasArrow,arrow:xt.arrow}}),Fe=Array.isArray(e.arrows)?e.arrows:[],Ke=e.words.map(xt=>({id:xt.id,word:xt.word,blockId:null,isPlaced:!1,isCorrect:!1}));return{blocks:Me,arrows:Fe,words:Ke}},[e]);C.useEffect(()=>{if(!e?.image_url)return;const Me=new Image;Me.crossOrigin="anonymous",Me.onload=()=>{console.log(" Image loaded successfully"),k(Me.width),P(Me.height);const Fe=H.current?.clientWidth||800,Ke=H.current?.clientHeight||600,xt=Fe/Me.width,ut=Ke/Me.height,At=Math.min(xt,ut,1),Dt=Me.width*At,Qe=Me.height*At,tt=(Fe-Dt)/2,vt=(Ke-Qe)/2;b({x:tt,y:vt,width:Dt,height:Qe,scaleX:At,scaleY:At,scale:At,image:Me}),ne.current=H.current?.clientWidth||800,console.log(" Image info calculated:",{x:tt,y:vt,width:Dt,height:Qe,scaleX:At,scaleY:At})},Me.onerror=()=>{console.error(" Failed to load image"),ee("Failed to load test image","error")},Me.src=e.image_url},[e?.image_url,ee]),C.useEffect(()=>{if(!me||!_)return;const Me=ne.current||H.current?.clientWidth||800,Fe=12,Ke=38;let xt=_.x,ut=_.y+_.height+Fe;const At=_.x+_.width,Dt={};me.words.forEach(vt=>{if(!Object.prototype.hasOwnProperty.call(g,vt.id)){const gt=typeof vt.word=="string"?vt.word:"",_t=Math.max(60,gt.length*8+20);xt+_t>Math.min(Me-Fe,At)&&(xt=_.x,ut+=Ke),d[vt.id]||(Dt[vt.id]={x:xt,y:ut}),xt+=_t+Fe}}),Object.keys(Dt).length&&f(vt=>({...vt,...Dt}));const Qe=Object.values(Dt).reduce((vt,gt)=>Math.max(vt,gt.y),ut),tt=Math.max(_.y+_.height+Fe,Qe+Ke+Fe);se(Math.max(400,Math.ceil(tt)))},[me,_,g,d]);const Ne=C.useCallback(()=>{if(!_||!me)return[];const Me=u();return Me?me.blocks.map(Fe=>{const Ke=Fe.coordinates;let xt,ut,At,Dt;xt=_.x+Ke.x*(_.scale??_.scaleX),ut=_.y+Ke.y*(_.scale??_.scaleY),At=Ke.width*(_.scale??_.scaleX),Dt=Ke.height*(_.scale??_.scaleY);const Qe=g[Fe.id];return c.jsxs(Me.Group,{children:[c.jsx(Me.Rect,{x:xt,y:ut,width:At,height:Dt,fill:Qe?"rgba(40, 167, 69, 0.4)":j===Fe.id?"rgba(0, 123, 255, 0.25)":"rgba(0, 123, 255, 0.15)",stroke:Qe?"#28a745":j===Fe.id?"#0056b3":"#007bff",strokeWidth:2,cornerRadius:6,shadowColor:Qe?"rgba(40, 167, 69, 0.3)":"rgba(0, 123, 255, 0.3)",shadowBlur:10,shadowOffset:{x:0,y:2},shadowOpacity:.5}),Qe&&c.jsx(Me.KonvaText,{x:xt+5,y:ut+Dt/2-10,width:At-10,height:20,text:me.words.find(tt=>tt.id===Qe)?.word||"",fontSize:Math.min(12,At/8),fontFamily:"Arial",fill:"#2c3e50",align:"center",verticalAlign:"middle",listening:!1})]},Fe.id)}):[]},[_,me,g,a]),Oe=C.useCallback(()=>{if(!_||!me)return[];const Me=u();return Me?(console.log(" Processing arrows:",me.arrows),me.arrows.map(Fe=>{if(console.log(" Arrow data:",Fe),!Fe.start||!Fe.end)return console.warn(" Arrow missing start/end coordinates:",Fe),null;let Ke,xt,ut,At;if(Fe.rel_start_x!==null&&Fe.rel_start_y!==null&&Fe.rel_end_x!==null&&Fe.rel_end_y!==null&&Fe.image_width&&Fe.image_height&&Fe.image_width>0&&Fe.image_height>0){const Dt=Fe.image_width,Qe=Fe.image_height,tt=_.width/Dt,vt=_.height/Qe;Ke=_.x+Number(Fe.rel_start_x)/100*Dt*tt,xt=_.y+Number(Fe.rel_start_y)/100*Qe*vt,ut=_.x+Number(Fe.rel_end_x)/100*Dt*tt,At=_.y+Number(Fe.rel_end_y)/100*Qe*vt}else{const Dt=_.scale??_.scaleX??1,Qe=Number(Fe.start.x),tt=Number(Fe.start.y),vt=Number(Fe.end.x),gt=Number(Fe.end.y);Qe<=_.width+1&&vt<=_.width+1&&tt<=_.height+1&&gt<=_.height+1?(Ke=_.x+(isNaN(Qe)?0:Qe),xt=_.y+(isNaN(tt)?0:tt),ut=_.x+(isNaN(vt)?0:vt),At=_.y+(isNaN(gt)?0:gt)):(Ke=_.x+(isNaN(Qe)?0:Qe)*Dt,xt=_.y+(isNaN(tt)?0:tt)*Dt,ut=_.x+(isNaN(vt)?0:vt)*Dt,At=_.y+(isNaN(gt)?0:gt)*Dt)}return c.jsx(Me.Arrow,{points:[Ke,xt,ut,At],stroke:Fe.style?.color||"#dc3545",fill:Fe.style?.color||"#dc3545",strokeWidth:Fe.style?.thickness||3,pointerLength:10,pointerWidth:10},Fe.id)}).filter(Boolean)):[]},[_,me,a]),Re=C.useCallback(()=>{if(!me)return[];const Me=u();return Me?me.words.map(Fe=>{const Ke=d[Fe.id]||{x:0,y:0},xt=typeof Fe.word=="string"?Fe.word:"",ut=Math.max(60,xt.length*8+20);return Object.values(g).includes(Fe.id)?null:c.jsxs(Me.Group,{x:Ke.x,y:Ke.y,draggable:!0,onDragEnd:Dt=>ze(Dt,Fe.id),children:[c.jsx(Me.Rect,{width:ut,height:34,fill:"#ffffff",stroke:"#ced4da",strokeWidth:1,cornerRadius:4,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:5,shadowOffset:{x:0,y:2},shadowOpacity:.3,listening:!0}),c.jsx(Me.KonvaText,{text:xt,fontSize:14,fontFamily:"Arial",fill:"#343a40",padding:8,align:"center",verticalAlign:"middle",width:ut,height:34,listening:!1})]},Fe.id)}):[]},[me,d,g,_,a]),ze=C.useCallback((Me,Fe)=>{const Ke=Me.target.x(),xt=Me.target.y();if(f(_t=>({..._t,[Fe]:{x:Ke,y:xt}})),!_||!me)return;const ut=me.words.find(_t=>_t.id===Fe);if(!ut)return;const At=typeof ut.word=="string"?ut.word:"",Dt=Math.max(60,At.length*8+20),Qe={x:Ke,y:xt,width:Dt,height:34},tt=_.scale??_.scaleX??1,vt=(_t,Wt)=>!(Wt.x>_t.x+_t.width||Wt.x+Wt.width<_t.x||Wt.y>_t.y+_t.height||Wt.y+Wt.height<_t.y),gt=me.blocks.find(_t=>{const Wt=_t.coordinates,Zt={x:_.x+Wt.x*tt,y:_.y+Wt.y*tt,width:Wt.width*tt,height:Wt.height*tt};return vt(Qe,Zt)});if(gt){p(br=>({...br,[gt.id]:Fe}));const _t=gt.coordinates,Wt=_.x+_t.x*tt,Zt=_.y+_t.y*tt,pr=_t.width*tt,Ir=_t.height*tt;f(br=>({...br,[Fe]:{x:Wt+(pr-Dt)/2,y:Zt+(Ir-34)/2}})),ee(`Word "${ut.word}" placed in block`,"success")}},[_,me,ee]),Nt=C.useCallback(()=>{if(!me)return 0;const Me=me.words.length,Fe=Object.keys(g).length;return Me>0?Fe/Me*100:0},[me,g]);C.useEffect(()=>{const Me=Nt();y(Me)},[Nt]),C.useEffect(()=>{if(e&&!R){const Me=new Date;M(Me),console.log(" Test timer started at:",Me.toISOString()),I(),console.log(" Anti-cheating tracking started")}},[e,R,I]);const et=C.useCallback(async()=>{if(me){T(!0);try{const Me=me.words.length;let Fe=0;console.log(" Scoring check - placedWords:",g),console.log(" Scoring check - blocks:",me.blocks.map(xr=>({id:xr.id,word:xr.word}))),console.log(" Scoring check - words:",me.words.map(xr=>({id:xr.id,word:xr.word}))),me.blocks.forEach(xr=>{const er=g[xr.id];if(console.log(` Block ${xr.id} (expects "${xr.word}") has placed word ID: ${er}`),er){const _r=me.words.find(ge=>ge.id===er);console.log(" Placed word:",_r),_r&&_r.word===xr.word?(Fe++,console.log(` Correct! Block ${xr.id} has correct word "${_r.word}"`)):console.log(` Incorrect! Block ${xr.id} expected "${xr.word}" but got "${_r?.word||"nothing"}"`)}else console.log(` Block ${xr.id} has no word placed`)});const Ke=Fe,xt=Me;console.log(` Final Score: ${Ke}/${xt} (${Math.round(Ke/xt*100)}%)`);const ut=new Date,At=R?Math.round((ut-R)/1e3):0,Dt=R?R.toISOString():ut.toISOString();console.log(" Test timing:",{startedAt:Dt,endTime:ut.toISOString(),timeTaken:`${At} seconds`});const Qe=V();console.log(" Anti-cheating data for submission:",Qe);const tt=z.student_id,vt=`retest_assignment_id_${tt}_matching_type_${e.id}`,gt=localStorage.getItem(vt),{academicCalendarService:_t}=await Vi(async()=>{const{academicCalendarService:xr}=await Promise.resolve().then(()=>nS);return{academicCalendarService:xr}},void 0);await _t.loadAcademicCalendar();const Zt=_t.getCurrentTerm()?.id;if(!Zt)throw new Error("No current academic period found");const pr={test_id:e.id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:tt,academic_period_id:Zt,answers:g,score:Ke,maxScore:xt,time_taken:At,started_at:Dt,submitted_at:ut.toISOString(),caught_cheating:Qe.caught_cheating,visibility_change_times:Qe.visibility_change_times,retest_assignment_id:gt?Number(gt):null,parent_test_id:e.id};console.log(" Submitting test data:",pr);const br=await(await B("/.netlify/functions/submit-matching-type-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(pr)})).json();if(console.log(" Submission response:",br),br.success){if(ee("Test submitted successfully!","success"),W(),L(),z?.student_id&&Yp(z.student_id,"matching_type",e.id),z?.student_id){const er=`test_completed_${z.student_id}_matching_type_${e.id}`;localStorage.setItem(er,"true"),console.log(" Test marked as completed in localStorage:",er)}if(z?.student_id){const{setCachedData:er,CACHE_TTL:_r}=await Vi(async()=>{const{setCachedData:ue,CACHE_TTL:we}=await Promise.resolve().then(()=>Ug);return{setCachedData:ue,CACHE_TTL:we}},void 0),ge=`student_results_table_${z.student_id}`;er(ge,br,_r.student_results_table),console.log(" Test results cached with key:",ge)}const xr=`retest1_${tt}_matching_type_${e.id}`;localStorage.removeItem(xr),localStorage.removeItem(vt),t&&t(Ke)}else throw new Error(br.message||"Failed to submit test")}catch(Me){console.error(" Error submitting test:",Me),ee(`Error submitting test: ${Me.message}`,"error")}finally{T(!1)}}},[me,g,e,z,R,B,ee,t]);return!e||!me?c.jsx(Gr,{}):c.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:c.jsxs("div",{className:"max-w-6xl mx-auto",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.test_name})}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-sm text-gray-500",children:"Progress"}),c.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(x),"%"]})]})]}),c.jsx("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${x}%`}})})]}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:c.jsx("div",{className:"lg:col-span-3",children:c.jsxs(Et,{className:"p-4",children:[c.jsxs("div",{className:"mb-4 text-center space-x-4",children:[c.jsx(nt,{onClick:ce,variant:"secondary",children:"Reset"}),c.jsx(nt,{onClick:Ee,variant:"secondary",children:"Back to Cabinet"})]}),c.jsx("div",{ref:H,className:"w-full bg-gray-100 rounded-lg overflow-hidden",style:{height:`${Z}px`},children:_&&a?(()=>{const{Stage:Me,Layer:Fe,KonvaImage:Ke}=u();return c.jsxs(Me,{ref:J,width:H.current?.clientWidth||800,height:Z,children:[c.jsxs(Fe,{children:[c.jsx(Ke,{ref:Q,image:_.image,x:_.x,y:_.y,width:_.width,height:_.height,listening:!1}),Ne(),Oe()]}),c.jsx(Fe,{listening:!0,children:Re()})]})})():_?c.jsxs("div",{className:"flex items-center justify-center h-full",children:[c.jsx(Gr,{size:"lg"}),c.jsx("span",{className:"ml-2 text-gray-600",children:"Loading Konva canvas..."})]}):null}),c.jsx("div",{className:"mt-4 text-center",children:c.jsx(nt,{onClick:et,disabled:v||x<100,children:v?"Submitting...":"Submit Test"})})]})})}),c.jsx(Vl,{isOpen:G,onClose:()=>K(!1),title:"Reset Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to reset? This will clear all your progress and placed words."}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(nt,{onClick:()=>K(!1),variant:"secondary",children:"Cancel"}),c.jsx(nt,{onClick:he,variant:"primary",children:"Reset"})]})]})}),c.jsx(Vl,{isOpen:re,onClose:()=>Y(!1),title:"Exit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet? Your progress will be saved but you will exit the test."}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(nt,{onClick:()=>Y(!1),variant:"secondary",children:"Cancel"}),c.jsx(nt,{onClick:ie,variant:"primary",children:"Go Back"})]})]})})]})})},Rue=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{user:i}=ls(),{makeAuthenticatedRequest:o}=Bo(),{showNotification:l}=Ba(),[u,d]=C.useState([{leftWord:"",rightWord:""},{leftWord:"",rightWord:""},{leftWord:"",rightWord:""}]),[f,g]=C.useState("drag"),[p,x]=C.useState(!1),[y,v]=C.useState(null),T=C.useCallback(()=>{d(P=>[...P,{leftWord:"",rightWord:""}])},[]),_=C.useCallback(P=>{u.length>1&&d(j=>j.filter((O,R)=>R!==P))},[u.length]),b=C.useCallback((P,j)=>{d(O=>O.map((R,M)=>M===P?{...R,leftWord:j}:R))},[]),E=C.useCallback((P,j)=>{d(O=>O.map((R,M)=>M===P?{...R,rightWord:j}:R))},[]),k=C.useCallback(()=>u.every(P=>P.leftWord.trim()&&P.rightWord.trim()),[u]),A=C.useCallback(async()=>{if(!k()){l("Please fill in all word pairs","error");return}x(!0),v(null);try{const P=u.map((O,R)=>({question_id:R+1,left_word:O.leftWord.trim(),right_word:O.rightWord.trim()})),j={test_name:e,num_questions:P.length,interaction_type:f,questions:P};console.log(" Saving word matching test:",j),t({testName:e,numQuestions:P.length,interactionType:f,wordPairs:u,questions:P})}catch(P){console.error("Error saving word matching test:",P),v(P.message),l("Failed to save test: "+P.message,"error")}finally{x(!1)}},[e,u,f,k,o,l,t]);return c.jsxs(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-6xl mx-auto p-6",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Word Matching Test"}),c.jsx("p",{className:"text-gray-600",children:"Enter word pairs - position 1 left matches position 1 right"})]}),c.jsx(Et,{className:"mb-6",children:c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Choose Interaction Type"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:` p-4 border-2 rounded-lg cursor-pointer transition-all ${f==="drag"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>g("drag"),children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("input",{type:"radio",checked:f==="drag",onChange:()=>g("drag"),className:"mr-3"}),c.jsx("h4",{className:"font-medium",children:"Drag & Drop"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Students drag words from left list to right list"}),c.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" Easier for younger students",c.jsx("br",{})," Visual feedback on placement",c.jsx("br",{})," Mobile-friendly"]})]}),c.jsxs("div",{className:` p-4 border-2 rounded-lg cursor-pointer transition-all ${f==="arrow"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>g("arrow"),children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("input",{type:"radio",checked:f==="arrow",onChange:()=>g("arrow"),className:"mr-3"}),c.jsx("h4",{className:"font-medium",children:"Draw Arrows"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Students draw arrows connecting matching words"}),c.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" More challenging",c.jsx("br",{})," Better for visual learners",c.jsx("br",{})," Requires precision"]})]})]})]})}),c.jsx(Et,{className:"mb-6",children:c.jsxs("div",{className:"word-pairs-section",children:[c.jsxs("div",{className:"pairs-header flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Word Pairs"}),c.jsx(nt,{onClick:T,size:"sm",children:"+ Add Pair"})]}),c.jsx("div",{className:"pairs-list space-y-3",children:u.map((P,j)=>c.jsxs("div",{className:"word-pair-row flex items-center space-x-4 p-4 bg-gray-50 rounded-lg border",children:[c.jsx("div",{className:"pair-number flex-shrink-0",children:c.jsx("span",{className:"number-badge w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-semibold",children:j+1})}),c.jsx("div",{className:"left-word flex-1",children:c.jsx("input",{type:"text",value:P.leftWord,onChange:O=>b(j,O.target.value),placeholder:"Left word...",className:"word-input w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),c.jsx("div",{className:"pair-arrow flex-shrink-0 text-gray-500 text-xl",children:""}),c.jsx("div",{className:"right-word flex-1",children:c.jsx("input",{type:"text",value:P.rightWord,onChange:O=>E(j,O.target.value),placeholder:"Right word...",className:"word-input w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),c.jsx("div",{className:"pair-actions flex-shrink-0",children:c.jsx(nt,{onClick:()=>_(j),variant:"outline",size:"sm",className:"remove-btn w-8 h-8 p-0 text-red-500 hover:bg-red-50",disabled:u.length<=1,children:""})})]},j))})]})}),c.jsx(Et,{className:"mb-6",children:c.jsxs("div",{className:"preview-section",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),c.jsx("div",{className:"preview-pairs space-y-2",children:u.map((P,j)=>c.jsxs("div",{className:"preview-pair flex items-center space-x-2 text-sm",children:[c.jsxs("span",{className:"preview-number font-semibold text-blue-600",children:[j+1,"."]}),c.jsx("span",{className:"preview-left px-2 py-1 bg-white rounded border",children:P.leftWord||"Left word"}),c.jsx("span",{className:"preview-arrow text-gray-500",children:""}),c.jsx("span",{className:"preview-right px-2 py-1 bg-white rounded border",children:P.rightWord||"Right word"})]},j))})]})}),c.jsxs("div",{className:"flex justify-center space-x-4",children:[c.jsx(nt,{onClick:A,disabled:!k()||p,className:"px-8",children:p?c.jsxs(c.Fragment,{children:[c.jsx(Gr,{size:"sm",color:"white",className:"mr-2"}),"Saving Test..."]}):"Save Test"}),c.jsx(nt,{onClick:r,variant:"secondary",children:"Cancel"})]}),y&&c.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-600",children:y})})]})},Due=(e,t)=>{const[r,n,s]=CV(`test_progress_${e}_${t}`,{}),[a,i]=C.useState(!1),[o,l]=C.useState(0),[u,d]=C.useState(0),[f,g]=C.useState(!1),[p,x]=C.useState(null),y=C.useRef(null),v=C.useRef(null),T=C.useCallback((I,W)=>{if(!window.tokenManager||!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot save progress: No valid JWT token");return}n(V=>({...V,[I]:W})),console.log(`Saved progress for question ${I}:`,W)},[n]),_=C.useCallback(I=>!window.tokenManager||!window.tokenManager.isAuthenticated()?(console.warn("[WARN] Cannot get progress: No valid JWT token"),null):r[I]||null,[r]),b=C.useCallback(()=>{if(console.log(`[DEBUG] clearTestProgress called with testType: ${e}, testId: ${t}`),!window.tokenManager||!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot clear progress: No valid JWT token");return}const I=`test_progress_${e}_${t}`;console.log(`[DEBUG] Removing localStorage key: ${I}`);const W=Object.keys(r).length>0;s(),console.log(W?`[DEBUG] Progress cleared for test ${e}_${t}`:`[DEBUG] No progress found to clear for test ${e}_${t}`)},[s,e,t,r]),E=C.useCallback(()=>{y.current&&(E(y.current),y.current=null),v.current&&(E(v.current),v.current=null)},[]),k=C.useCallback(()=>{console.log(`[DEBUG] setupProgressTrackingForPage called with testType: ${e}, testId: ${t}`),v.current=setInterval(()=>{console.log("[DEBUG] Auto-saving progress..."),R()},3e4),console.log("[DEBUG] Progress tracking interval set up (30 seconds)")},[e,t]),A=C.useCallback(()=>{console.log(`[DEBUG] updateProgressDisplayForPage called with testType: ${e}, testId: ${t}`);const I=O(),W=u>0?Math.round(I/u*100):0;return console.log(`[DEBUG] Progress: ${I}/${u} questions answered`),console.log(`[DEBUG] Progress bar updated: ${W}%`),{answeredQuestions:I,totalQuestions:u,percentage:W}},[e,t,u]),P=C.useCallback(()=>{console.log("[DEBUG] updateSubmitButtonStateForPage called");const I=O();console.log(`[DEBUG] Submit button state check: ${I}/${u} questions answered`);const W=I===u&&u>0;return console.log(W?"[DEBUG] Submit button enabled - all questions answered":"[DEBUG] Submit button disabled - not all questions answered"),W},[u]),j=C.useCallback(()=>{console.log(`[DEBUG] loadSavedProgressForPage called with testType: ${e}, testId: ${t}`);try{if(console.log("[DEBUG] Loaded progress from localStorage:",r),Object.keys(r).length===0){console.log("[DEBUG] No saved progress found");return}const I=Object.keys(r).length;l(I),console.log(`[DEBUG] Restored ${I} answered questions`)}catch(I){console.error("[ERROR] Failed to load saved progress:",I),x(I.message)}},[e,t,r]),O=C.useCallback(()=>{console.log(`[DEBUG] getAnsweredQuestionsCountForPage called with testType: ${e}`);const I=Object.keys(r).length;return l(I),console.log(`[DEBUG] Found ${I} answered questions`),I},[e,r]),R=C.useCallback(()=>{console.log(`[DEBUG] saveProgressForPage called with testType: ${e}, testId: ${t}`);try{console.log("[DEBUG] Progress saved:",r)}catch(I){console.error("[ERROR] Failed to save progress:",I),x(I.message)}},[e,t,r]),M=C.useCallback(()=>{try{const I=`test_completed_${e}_${t}`,W=localStorage.getItem(I)==="true";return i(W),W}catch(I){return console.error("Error checking test completion:",I),!1}},[e,t]),G=C.useCallback(()=>{try{const I=`test_completed_${e}_${t}`;localStorage.setItem(I,"true"),i(!0),console.log(`Test ${e}_${t} marked as completed`)}catch(I){console.error("Error marking test completed:",I)}},[e,t]),K=C.useCallback(()=>{console.log("Marking test completed in UI:",{testType:e,testId:t}),G()},[e,t,G]),re=C.useCallback(I=>{try{const W=`test_creation_state_${e}_${t}`;localStorage.setItem(W,JSON.stringify(I)),console.log("Test creation state saved:",I)}catch(W){console.error("Error saving test creation state:",W)}},[e,t]),Y=C.useCallback(()=>{try{const I=`test_creation_state_${e}_${t}`;localStorage.removeItem(I),console.log("Test creation state cleared")}catch(I){console.error("Error clearing test creation state:",I)}},[e,t]),ee=C.useCallback((I,W)=>{try{const V=`test_step_${e}_${t}_${I}`;localStorage.setItem(V,JSON.stringify(W)),console.log(`Step ${I} data saved:`,W)}catch(V){console.error(`Error saving step ${I} data:`,V)}},[e,t]),B=C.useCallback(I=>{try{const W=`test_step_${e}_${t}_${I}`,V=localStorage.getItem(W);return V?JSON.parse(V):null}catch(W){return console.error(`Error restoring step ${I} data:`,W),null}},[e,t]),z=C.useCallback(()=>{try{const I=`test_creation_state_${e}_${t}`,W=localStorage.getItem(I);return W?JSON.parse(W):null}catch(I){return console.error("Error restoring test creation state:",I),null}},[e,t]);return C.useEffect(()=>()=>{E()},[e,t,k,j,E]),C.useEffect(()=>{O()},[r,O]),{progress:r,isCompleted:a,answeredCount:o,totalQuestions:u,isLoading:f,error:p,saveProgress:T,getProgress:_,clearProgress:b,clearInterval:E,setupProgressTracking:k,updateProgress:A,updateSubmitButton:P,loadProgress:j,getAnsweredCount:O,saveProgressForPage:R,checkCompleted:M,markCompleted:G,markCompletedUI:K,saveState:re,clearState:Y,saveStepData:ee,restoreStepData:B,restoreState:z,setTotalQuestions:d,setError:x}},Iue=({testData:e,onTestComplete:t,onBackToCabinet:r})=>{const{user:n}=ls(),{makeAuthenticatedRequest:s}=Bo(),[a,i]=C.useState({width:window.innerWidth,height:window.innerHeight});C.useEffect(()=>{const Me=()=>{i({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",Me),()=>window.removeEventListener("resize",Me)},[]);const{getCheatingData:o,stopTracking:l,clearData:u}=um(),[d,f]=C.useState(null),[g,p]=C.useState({}),[x,y]=C.useState(null),v=C.useRef(null),[T,_]=C.useState(800),b={VERY_SMALL:400,MOBILE:600,TABLET:900},E={VERY_SMALL:.6,MOBILE:.8,TABLET:.9,DESKTOP:1},k={CANVAS_HEIGHT:400,BLOCK_WIDTH:140,BLOCK_HEIGHT:50,BLOCK_SPACING:100,MARGIN:50,PADDING:20},A=a.width<b.VERY_SMALL,P=a.width>=b.VERY_SMALL&&a.width<b.MOBILE,j=a.width>=b.MOBILE&&a.width<b.TABLET;a.width>=b.TABLET;const O=A?E.VERY_SMALL:P?E.MOBILE:j?E.TABLET:E.DESKTOP;C.useEffect(()=>{const Me=()=>{if(v.current){const Ke=v.current.clientWidth;console.log(" Container width detected:",Ke),Ke>0&&_(Ke)}};Me();const Fe=[setTimeout(Me,50),setTimeout(Me,100),setTimeout(Me,200),setTimeout(Me,500)];return window.addEventListener("resize",Me),()=>{Fe.forEach(Ke=>clearTimeout(Ke)),window.removeEventListener("resize",Me)}},[d]);const R=Math.max(k.CANVAS_HEIGHT*O,(d?.leftWords?.length||3)*k.BLOCK_SPACING*O+k.PADDING*2),M=k.BLOCK_WIDTH*O,G=k.BLOCK_HEIGHT*O,K=k.BLOCK_SPACING*O,re=k.MARGIN*O,Y=re;console.log(" Mobile Debug:",{screenWidth:a.width,containerWidth:v.current?.clientWidth,canvasWidth:T,scale:O,blockWidth:M,margin:re,leftBlockX:Y,displayDataLoaded:!!d});const ee=Y+M+20+M+re,B=ee<=T;let z,I=M,W=G;if(B)z=Math.min(Math.max(Y+M+20,T-M-re),T-M-re);else{const Me=T-re*2,Fe=Math.floor((Me-20)/2);I=Math.max(60,Fe),W=Math.max(30,W*(I/M)),z=Y+I+20,console.log(" Very small screen - adjusted block size:",{availableWidth:Me,maxBlockWidth:Fe,actualBlockWidth:I,actualBlockHeight:W})}console.log(" Right Block Position:",{rightBlockX:z,rightBlockRightEdge:z+I,canvasWidth:T,fits:z+I<=T,canFitSideBySide:B,minRequiredWidth:ee});const V=re,L={DRAGGED_WORD:Math.max(8,14*O),ORIGINAL_WORD:Math.max(10,16*O),LEFT_WORD:Math.max(10,14*O)},H=Math.max(1,3*O),[J,Q]=C.useState([]),[ne,Z]=C.useState(!1),[se,ce]=C.useState(null),[he,Ee]=C.useState(!1),[ie,me]=C.useState(!1);C.useEffect(()=>{if(e&&(f(e),ce(new Date),n?.student_id)){const Me=`test_progress_${n.student_id}_word_matching_${e.id}`,Fe=ms(Me);Fe&&(p(Fe.answers||{}),Q(Fe.arrows||[]),ce(new Date(Fe.startTime)),console.log(" Test progress restored:",Fe))}},[e,n?.student_id]),C.useEffect(()=>{if(d&&se&&n?.student_id){const Me=setInterval(()=>{const Fe={answers:g,arrows:J,startTime:se.toISOString()},Ke=`test_progress_${n.student_id}_word_matching_${e.id}`;ys(Ke,Fe,Os.test_progress),console.log(" Progress auto-saved")},3e4);return()=>clearInterval(Me)}},[d,g,J,se,n?.student_id,e?.id]);const Ne=C.useCallback((Me,Fe)=>{if(e.interaction_type==="arrow")if(x){if(x.side===Me&&x.index===Fe)y(null);else if(x.side!==Me){const Ke={id:Date.now().toString(),startWord:x,endWord:{side:Me,index:Fe},color:"#3B82F6"};Q(xt=>[...xt,Ke]),p(xt=>({...xt,[x.index]:Fe})),y(null)}}else y({side:Me,index:Fe})},[x,e?.interaction_type]);C.useCallback((Me,Fe)=>{e.interaction_type==="drag"&&p(Ke=>({...Ke,[Me]:Fe}))},[e?.interaction_type]);const Oe=C.useCallback(()=>{Ee(!0)},[]),Re=C.useCallback(()=>{p({}),Q([]),y(null),Ee(!1)},[]),ze=C.useCallback(()=>{me(!0)},[]),Nt=C.useCallback(()=>{me(!1),r&&r()},[r]),et=C.useCallback(async()=>{if(d){Z(!0);try{const Me=d.leftWords.length;let Fe=0,Ke={};e.interaction_type==="drag"?Object.entries(g).forEach(([er,_r])=>{const ge=d.correctPairs[er];_r===ge&&Fe++,Ke[er]=_r}):J.forEach(er=>{const _r=er.startWord.side==="left"?er.startWord.index:er.endWord.index,ge=er.startWord.side==="right"?er.startWord.index:er.endWord.index;d.correctPairs[_r]===ge&&Fe++,Ke[_r]=ge});const xt=Fe,ut=Me;console.log(` Final Score: ${xt}/${ut} (${Math.round(xt/ut*100)}%)`);const At=new Date,Dt=se?Math.round((At-se)/1e3):0,Qe=se?se.toISOString():At.toISOString(),tt=o(),vt=n.student_id,gt=`retest_assignment_id_${vt}_word_matching_${e.id}`,_t=localStorage.getItem(gt),{academicCalendarService:Wt}=await Vi(async()=>{const{academicCalendarService:er}=await Promise.resolve().then(()=>nS);return{academicCalendarService:er}},void 0);await Wt.loadAcademicCalendar();const pr=Wt.getCurrentTerm()?.id;if(!pr)throw new Error("No current academic period found");const Ir={test_id:e.id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:vt,academic_period_id:pr,parent_test_id:e.id,retest_assignment_id:_t?Number(_t):null,interaction_type:e.interaction_type,answers:Ke,score:xt,maxScore:ut,time_taken:Dt,started_at:Qe,submitted_at:At.toISOString(),caught_cheating:tt.caught_cheating,visibility_change_times:tt.visibility_change_times};console.log(" Submission data being sent:",Ir),console.log(" TestData structure:",e),console.log(" Submitting test results...");const br=await s("/.netlify/functions/submit-word-matching-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ir)});console.log(" Submission response received:",br.status);const xr=await br.json();if(xr.success){if(l(),u(),n?.student_id){const er=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(er,"true"),console.log(" Test marked as completed in localStorage:",er);const _r=`retest1_${vt}_word_matching_${e.id}`;localStorage.removeItem(_r),localStorage.removeItem(gt),Yp(n.student_id,"word_matching",e.id),console.log(" Test data cleared from cache");const ge=`student_results_table_${n.student_id}`;ys(ge,xr,Os.student_results_table),console.log(" Test results cached with key:",ge)}setTimeout(()=>{t&&t(xt)},2e3)}else throw new Error(xr.message||"Failed to submit test")}catch(Me){console.error("Error submitting test:",Me)}finally{Z(!1)}}},[d,g,J,e,n,se,o,l,u,s,t]);return d?c.jsxs(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-4xl mx-auto p-6",children:[c.jsx(Vl,{isOpen:ne,onClose:()=>{},title:"Submitting",size:"small",children:c.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[c.jsx(Gr,{size:"lg",className:"mb-3"}),c.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Submitting test..."}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we process your results"})]})}),c.jsx(Et,{className:"mb-6",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:e.test_name}),c.jsx("p",{className:"text-gray-600",children:e.interaction_type==="drag"?"Drag words from left to right to match them":"Click on the word or phrase on the left, then click on the matching word or phrase on the right to connect them"})]})}),e.interaction_type==="drag"?c.jsx(Et,{className:"mb-6",children:c.jsx("div",{ref:v,className:"relative w-full",children:c.jsx(qh,{width:T,height:R,className:`border-2 border-gray-200 rounded-lg ${ne?"pointer-events-none opacity-50":""}`,children:c.jsxs(Vh,{children:[d.leftWords.map((Me,Fe)=>{const Ke=g[Fe]!==void 0,xt=V+Fe*K;return c.jsxs(Kl,{x:Y,y:xt,draggable:!Ke,onDragStart:ut=>{ut.target.moveToTop()},onDragEnd:ut=>{ut.target.getStage();const At=d.rightWords,Dt=I+60,Qe=W+30,tt=z-30,vt=V-15;console.log(" Drop detection - Word dropped at:",ut.target.x(),ut.target.y());for(let gt=0;gt<At.length;gt++){const _t=vt+gt*K,Wt=tt,Zt=tt+Dt,pr=_t,Ir=_t+Qe;if(console.log(` Checking drop zone ${gt}:`,{left:Wt,right:Zt,top:pr,bottom:Ir,word:At[gt]}),ut.target.x()>=Wt&&ut.target.x()<=Zt&&ut.target.y()>=pr&&ut.target.y()<=Ir){console.log(` Match found! Word "${d.leftWords[Fe]}" matched with "${At[gt]}"`),p(br=>({...br,[Fe]:gt}));break}}console.log(" No match found, resetting position"),ut.target.position({x:Y,y:xt})},children:[c.jsx(Ma,{width:I,height:W,fill:Ke?"#e5e7eb":"#3b82f6",stroke:Ke?"#9ca3af":"#1d4ed8",strokeWidth:2,cornerRadius:8,opacity:Ke?.5:1}),c.jsx(Mc,{text:Me,x:I/2,y:W/2,fontSize:L.LEFT_WORD,fontFamily:"Arial",fill:Ke?"#dc2626":"white",align:"center",verticalAlign:"middle",width:I,offsetX:I/2,offsetY:W/2,wrap:"word",ellipsis:!0,listening:!1})]},`left-${Fe}`)}),d.rightWords.map((Me,Fe)=>{const Ke=V+Fe*K,xt=Object.keys(g).find(ut=>g[ut]===Fe);return c.jsxs(Kl,{x:z,y:Ke,children:[c.jsx(Ma,{width:I,height:W,fill:xt?"#10b981":"#f3f4f6",stroke:xt?"#059669":"#d1d5db",strokeWidth:2,cornerRadius:8}),c.jsx(Mc,{text:Me,x:I/2,y:W/2,fontSize:L.ORIGINAL_WORD,fontFamily:"Arial",fill:"#000000",align:"center",verticalAlign:"middle",width:I,offsetX:I/2,offsetY:W/2,wrap:"word",ellipsis:!0,listening:!1}),xt&&c.jsx(Mc,{text:d.leftWords[xt],x:M/2,y:G/4,fontSize:L.DRAGGED_WORD,fontFamily:"Arial",fill:"#dc2626",align:"center",verticalAlign:"middle",width:I,offsetX:I/2,offsetY:W/8,wrap:"word",ellipsis:!0})]},`right-${Fe}`)})]})})})}):c.jsx(Et,{className:"mb-6",children:c.jsx("div",{ref:v,className:"relative w-full",children:c.jsx(qh,{width:T,height:R,className:`border-2 border-gray-200 rounded-lg ${ne?"pointer-events-none opacity-50":""}`,children:c.jsxs(Vh,{children:[d.leftWords.map((Me,Fe)=>{const Ke=V+Fe*K,xt=x?.side==="left"&&x?.index===Fe;return c.jsxs(Kl,{x:Y,y:Ke,onClick:()=>Ne("left",Fe),children:[c.jsx(Ma,{width:I,height:W,fill:xt?"#3b82f6":"#f3f4f6",stroke:xt?"#1d4ed8":"#d1d5db",strokeWidth:xt?3:2,cornerRadius:8}),c.jsx(Mc,{text:Me,x:M/2,y:G/2,fontSize:L.LEFT_WORD,fontFamily:"Arial",fill:xt?"white":"#374151",align:"center",verticalAlign:"middle",width:I,offsetX:I/2,offsetY:W/2,wrap:"word",ellipsis:!0,listening:!1})]},`left-${Fe}`)}),d.rightWords.map((Me,Fe)=>{const Ke=V+Fe*K,xt=x?.side==="right"&&x?.index===Fe;return c.jsxs(Kl,{x:z,y:Ke,onClick:()=>Ne("right",Fe),children:[c.jsx(Ma,{width:I,height:W,fill:xt?"#3b82f6":"#f3f4f6",stroke:xt?"#1d4ed8":"#d1d5db",strokeWidth:xt?3:2,cornerRadius:8}),c.jsx(Mc,{text:Me,x:M/2,y:G/2,fontSize:L.ORIGINAL_WORD,fontFamily:"Arial",fill:"#000000",align:"center",verticalAlign:"middle",width:I,offsetX:I/2,offsetY:W/2,wrap:"word",ellipsis:!0,listening:!1})]},`right-${Fe}`)}),J.map((Me,Fe)=>{const Ke=V+Me.startWord.index*K+G/2,xt=V+Me.endWord.index*K+G/2;return c.jsx(ti,{points:[Y+M+20,Ke,z-20,xt],stroke:Me.color||"#3b82f6",strokeWidth:H,lineCap:"round",lineJoin:"round"},Fe)})]})})})}),c.jsx(Et,{children:c.jsxs("div",{className:`submit-section flex justify-center space-x-4 ${ne?"pointer-events-none opacity-50":""}`,children:[c.jsx(nt,{onClick:Oe,variant:"outline",disabled:ne,children:"Reset"}),c.jsx(nt,{onClick:ze,variant:"outline",disabled:ne,children:"Back to Cabinet"}),c.jsx(nt,{onClick:et,disabled:ne,className:"px-8",children:ne?c.jsxs(c.Fragment,{children:[c.jsx(Gr,{size:"sm",color:"white",className:"mr-2"}),"Submitting..."]}):"Submit Test"})]})}),c.jsx(Vl,{isOpen:he&&!ne,onClose:()=>Ee(!1),title:"Reset Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to reset? This will clear all your progress and answers."}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(nt,{onClick:()=>Ee(!1),variant:"secondary",children:"Cancel"}),c.jsx(nt,{onClick:Re,variant:"primary",children:"Reset"})]})]})}),c.jsx(Vl,{isOpen:ie&&!ne,onClose:()=>me(!1),title:"Exit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to leave the test? Your progress will be saved."}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(nt,{onClick:()=>me(!1),variant:"secondary",children:"Cancel"}),c.jsx(nt,{onClick:Nt,variant:"primary",children:"Leave"})]})]})})]}):c.jsx("div",{className:"flex justify-center items-center min-h-screen",children:c.jsx(Gr,{size:"lg"})})},Mue=({id:e,x:t,y:r,width:n,height:s,text:a,fontSize:i,color:o,isSelected:l,onSelect:u,onUpdate:d,onDelete:f})=>{const[g,p]=C.useState(!1),x=C.useRef(!1),y=C.useRef(null),v=C.useRef({x:0,y:0}),T=C.useRef(null),_=5,b=()=>{x.current=!0,p(!0)},E=()=>{if(x.current=!1,p(!1),T.current)try{T.current.draggable(!1)}catch{}},k=()=>{y.current&&(clearTimeout(y.current),y.current=null)};C.useEffect(()=>()=>{k()},[]),C.useEffect(()=>{if(T.current)try{T.current.draggable(x.current)}catch{}},[g]);const A=j=>{j.cancelBubble=!0,d(e,{isEditing:!0})},P=j=>{d(e,{x:j.target.x(),y:j.target.y()})};return c.jsxs(Kl,{ref:T,x:t,y:r,draggable:g,dragBoundFunc:j=>x.current?j:{x:t,y:r},name:"textbox-group",onClick:j=>{j.cancelBubble=!0,u(e)},onTap:j=>{j.cancelBubble=!0,u(e),k()},onDblClick:A,onDblTap:A,onPointerDown:j=>{j.cancelBubble=!0;const O=j.evt||{};v.current={x:O.clientX??0,y:O.clientY??0},k(),y.current=setTimeout(()=>{b()},400)},onPointerMove:j=>{if(!y.current)return;const O=j.evt||{},R=Math.abs((O.clientX??0)-v.current.x),M=Math.abs((O.clientY??0)-v.current.y);(R>_||M>_)&&k()},onPointerUp:j=>{j.cancelBubble=!0,k(),E()},onPointerLeave:()=>{k(),E()},onDragEnd:j=>{P(j),E()},children:[c.jsx(Ma,{width:n,height:s,fill:l?"#fef3c7":"#ffffff",stroke:l?"#f59e0b":"#d1d5db",strokeWidth:l?2:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1},name:"textbox-rect",onTap:j=>{j.cancelBubble=!0,u(e),k()},onDblTap:j=>{j.cancelBubble=!0,A(j)}}),c.jsx(Mc,{text:a,width:n,height:s,padding:8,align:"left",verticalAlign:"top",fontSize:i,fill:o,wrap:"word",name:"textbox-text",onTap:j=>{j.cancelBubble=!0,u(e),k()},onDblTap:j=>{j.cancelBubble=!0,A(j)}})]})},Lue=({x:e,y:t,width:r,height:n,initialText:s,onSave:a,onCancel:i})=>{const o=C.useRef(null);C.useEffect(()=>{o.current&&(o.current.focus(),o.current.select())},[]);const l=u=>{u.key==="Enter"&&!u.shiftKey?(u.preventDefault(),a(o.current.value)):u.key==="Escape"&&i()};return c.jsx("textarea",{ref:o,defaultValue:s,style:{position:"absolute",top:t,left:e,width:r,height:n,fontSize:"14px",border:"2px solid #f59e0b",borderRadius:"6px",padding:"8px",background:"white",resize:"none",outline:"none",fontFamily:"inherit",lineHeight:"1.4",zIndex:1e3},onKeyDown:l,onBlur:()=>a(o.current.value)})},Bue=({width:e,height:t,lines:r,onDrawingChange:n,currentTool:s,currentColor:a,currentThickness:i,zoom:o,onZoomChange:l,isPanning:u,isFullscreen:d,constrainPanPosition:f,handleWheel:g,stageRef:p,setIsPanning:x,responsiveDimensions:y,canvasSize:v,question:T,textBoxes:_,setTextBoxes:b,selectedTextBox:E,setSelectedTextBox:k,handleTextBoxSelect:A,handleTextBoxUpdate:P,handleTextBoxDelete:j,isEditingText:O,editingTextBox:R,setIsEditingText:M,setEditingTextBox:G,setCurrentTool:K})=>{const[re,Y]=C.useState(!1),[ee,B]=C.useState([]),[z,I]=C.useState(null),[W,V]=C.useState(null),L=C.useRef(null),[H,J]=C.useState(.25),[Q,ne]=C.useState({x:0,y:0}),Z=C.useRef(null),se=C.useRef(null),ce=C.useRef(!1),he=6;C.useEffect(()=>{const Ue=()=>{const ft=L.current;if(!ft)return;const ot=ft.clientWidth||1,Ht=ft.clientHeight||1,Gt=Math.min(ot/(v.width||1),Ht/(v.height||1));J(Math.min(Gt,1))};return Ue(),window.addEventListener("resize",Ue),()=>window.removeEventListener("resize",Ue)},[v.width,v.height,d]);const Ee=Ue=>{const ft=p.current,ot=ft.getPointerPosition();if(s==="pan"){if(Te(Ue.target))try{ft.draggable(!1),ce.current=!0}catch{}return}if(s==="text"){const Gt={x:(ot.x-ft.x())/ft.scaleX(),y:(ot.y-ft.y())/ft.scaleY()};Z.current={...Gt},se.current={x:ot.x,y:ot.y};return}Y(!0);const Ht={x:(ot.x-ft.x())/ft.scaleX(),y:(ot.y-ft.y())/ft.scaleY()};V(Ht),s==="pencil"?B([{x:Ht.x,y:Ht.y,color:a,thickness:i}]):s==="eraser"?B([{x:Ht.x,y:Ht.y,color:a,thickness:i,tool:"eraser"}]):["line","rectangle","circle"].includes(s)&&I({type:s,startX:Ht.x,startY:Ht.y,endX:Ht.x,endY:Ht.y,color:a,thickness:i})},ie=Ue=>{const ft=p.current,ot=ft.getPointerPosition(),Ht={x:(ot.x-ft.x())/ft.scaleX(),y:(ot.y-ft.y())/ft.scaleY()};if(ne(Ht),s!=="pan"){if(s==="text"&&Z.current&&se.current){const Gt=Math.abs(ot.x-se.current.x),mr=Math.abs(ot.y-se.current.y);(Gt>he||mr>he)&&(Z.current=null)}if(re)if(s==="pencil"){const Gt=[...ee,{x:Ht.x,y:Ht.y,color:a,thickness:i}];B(Gt)}else if(s==="eraser"){const Gt=[...ee,{x:Ht.x,y:Ht.y,color:a,thickness:i,tool:"eraser"}];B(Gt)}else["line","rectangle","circle"].includes(s)&&z&&I({...z,endX:Ht.x,endY:Ht.y})}},me=Ue=>{const ft=p.current;if(s==="pan"){if(ce.current){try{ft.draggable(!0)}catch{}ce.current=!1}return}if(s==="text"&&Z.current){const ot=Ue&&Ue.target;if(ot&&typeof ot.name=="function"&&ot.name()==="canvas-bg"){const Gt={id:Date.now(),x:Z.current.x,y:Z.current.y,width:150,height:60,text:"Double-click to edit",fontSize:14,color:"#000000"};b(mr=>[...mr,Gt]),k(Gt.id)}Z.current=null,se.current=null}if(re){if(s==="pencil"){const ot=[...r,ee];n(ot),B([])}else if(s==="eraser"){const ot=[...r,ee];n(ot),B([])}else if(["line","rectangle","circle"].includes(s)&&z){const ot=[...r,z];n(ot),I(null)}Y(!1),V(null)}},[Ne,Oe]=C.useState(null),[Re,ze]=C.useState(null),[Nt,et]=C.useState(!1),[Me,Fe]=C.useState(null),[Ke,xt]=C.useState(!1),[ut,At]=C.useState(!1),[Dt,Qe]=C.useState([]),[tt,vt]=C.useState(null),[gt,_t]=C.useState({totalGestures:0,zoomGestures:0,panGestures:0,combinedGestures:0,averageResponseTime:0});let Wt=null;const pr=(window.devicePixelRatio||1)>1.5,Ir={scaleDelta:pr?.03:.04,centerDelta:pr?4:6,minTouchDistance:8,gestureHysteresis:.02},br=()=>{xt(!1),Fe(null),Oe(null),ze(null),Y(!1),V(null),At(!1),vt(null),Wt&&(cancelAnimationFrame(Wt),Wt=null),p.current&&p.current.stop()},xr=Ue=>{if(Ue.length<2)return 0;const ft=Ue[0],ot=Ue[1];return Math.sqrt(Math.pow(ot.clientX-ft.clientX,2)+Math.pow(ot.clientY-ft.clientY,2))},er=Ue=>{if(Ue.length<2)return null;const ft=Ue[0],ot=Ue[1];return{x:(ft.clientX+ot.clientX)/2,y:(ft.clientY+ot.clientY)/2}},_r=Ue=>{Qe(ft=>[...ft,{type:Ue,timestamp:Date.now()}].slice(-5))},ge=()=>{const Ue=Date.now(),ft=Dt.filter(Gt=>Ue-Gt.timestamp<500);if(ft.length<2)return 0;const ot=ft[ft.length-1],Ht=ft[ft.length-2];return ot.type===Ht.type?Ir.gestureHysteresis:0},ue=(Ue,ft)=>{_t(ot=>({totalGestures:ot.totalGestures+1,zoomGestures:Ue.includes("zoom")?ot.zoomGestures+1:ot.zoomGestures,panGestures:Ue.includes("pan")?ot.panGestures+1:ot.panGestures,combinedGestures:Ue==="zoom+pan"?ot.combinedGestures+1:ot.combinedGestures,averageResponseTime:(ot.averageResponseTime+ft)/2}))},we=(Ue,ft,ot,Ht)=>{const Gt=p.current,mr=Gt.scaleX(),Vr=Gt.position();let vr=mr,hr=Vr;if(Ue){const pe=ot/Ne,ve=mr*pe,Se=T?.max_canvas_width||1536,ke=T?.max_canvas_height||2048,Ge=Se/v.width,dt=ke/v.height,Ie=Math.min(Ge,dt,1);vr=Math.max(.25,Math.min(Ie,ve));const oe=Ht,fe={x:(oe.x-Gt.x())/mr,y:(oe.y-Gt.y())/mr};hr={x:oe.x-fe.x*vr,y:oe.y-fe.y*vr}}if(ft){const pe=Ht.x-Re.x,ve=Ht.y-Re.y;Ue?hr={x:hr.x+pe,y:hr.y+ve}:hr={x:Vr.x+pe,y:Vr.y+ve}}Wt||(Wt=requestAnimationFrame(()=>{Gt.scale({x:vr,y:vr}),Gt.position(hr),Gt.batchDraw(),Wt=null})),Ue&&ft?(Fe("zoom+pan"),At(!0)):Ue?(Fe("zoom"),At(!0)):ft&&Fe("pan");const _e=Date.now()-(tt||Date.now());ue(Ue&&ft?"zoom+pan":Ue?"zoom":"pan",_e),console.log(" Combined gesture",{doZoom:Ue,doPan:ft,scale:vr.toFixed(2),pos:hr})},Te=Ue=>{if(!Ue||typeof Ue.name!="function")return!1;if((Ue.name()||"").includes("textbox-"))return!0;const ot=Ue.getParent&&Ue.getParent();return ot&&typeof ot.name=="function"&&(ot.name()||"").includes("textbox-")},Xe=Ue=>{const ft=Ue.evt.touches,ot=Ue.target;if(Te(ot)){if(s==="pan"&&p.current)try{p.current.draggable(!1),ce.current=!0}catch{}return}ft.length===2?(Ue.evt.preventDefault(),xt(!0),Fe(null),Oe(xr(ft)),ze(er(ft)),Y(!1),vt(Date.now())):ft.length===1&&(xt(!1),Fe(null),Ee(Ue))},Ct=Ue=>{const ft=Ue.evt.touches,ot=Ue.target;if(!Te(ot))if(ft.length===2&&Ke){Ue.evt.preventDefault();const Ht=p.current,Gt=xr(ft),mr=er(ft);if(Ne&&Re&&Ht&&Gt>Ir.minTouchDistance){const Vr=Math.abs(Gt/Ne-1),vr=Math.sqrt(Math.pow(mr.x-Re.x,2)+Math.pow(mr.y-Re.y,2)),hr=ge(),le=Ir.scaleDelta-hr,_e=Ir.centerDelta-hr*10,pe=Vr>le,ve=vr>_e;(pe||ve)&&(we(pe,ve,Gt,mr),pe&&ve?_r("zoom+pan"):pe?_r("zoom"):ve&&_r("pan")),console.log(" Gesture Debug",{scaleDelta:Vr.toFixed(3),centerDelta:vr.toFixed(1),doZoom:pe,doPan:ve,hysteresis:hr.toFixed(3),adjustedScaleDelta:le.toFixed(3),adjustedCenterDelta:_e.toFixed(1),gestureHistory:Dt.slice(-3)})}Oe(Gt),ze(mr)}else ft.length===1&&!Ke&&(Ue.evt.preventDefault(),ie())},Pt=Ue=>{const ft=Ue.evt.touches,ot=Ue.target;Te(ot)||(ft.length===0?(me(Ue),br(),At(!1)):ft.length===1&&(xt(!1),Fe(null),Oe(null),ze(null),At(!1)))};return c.jsx("div",{className:"relative w-full block sm:flex sm:justify-center",children:c.jsx("div",{className:"w-full max-w-full block sm:flex sm:justify-center",children:c.jsxs("div",{className:"relative",style:{border:d&&(y.width<window.innerWidth-40||y.height<window.innerHeight-40)?"2px solid #000000":"none",borderRadius:"8px",overflow:"hidden"},children:[c.jsx("div",{ref:L,className:"w-full h-full",style:{touchAction:"manipulation"},children:c.jsx(qh,{ref:p,width:y.width,height:y.height,scaleX:d?y.zoom:o,scaleY:d?y.zoom:o,onMouseDown:Ee,onMousemove:ie,onMouseup:me,onTouchStart:Xe,onTouchMove:Ct,onTouchEnd:Pt,onWheel:g||(()=>{}),onDragStart:()=>{console.log(" Drag started"),s==="pan"&&x(!0)},onDragEnd:()=>{if(console.log(" Drag ended"),s==="pan"&&(x(!1),f)){const Ue=p.current,ft=L.current,ot=ft?.clientWidth||y.width,Ht=ft?.clientHeight||y.height,Gt=v.width*Ue.scaleX(),mr=v.height*Ue.scaleY(),Vr=Ue.x(),vr=Ue.y();(Vr>ot||Vr<-Gt||vr>Ht||vr<-mr)&&f(Ue)}},draggable:s==="pan"&&o>.25,className:`border-0 rounded-none shadow-none sm:border sm:rounded-lg sm:shadow-sm ${s==="pan"?"cursor-grab":u?"cursor-grabbing":"cursor-crosshair"}`,style:{width:"100%",height:"auto"},onLoad:()=>{console.log(" DrawingTestStudent - Stage loaded with dimensions:",y.width,"x",y.height),console.log(" DrawingTestStudent - Canvas size:",v.width,"x",v.height),console.log(" DrawingTestStudent - Current zoom level:",o),console.log(" DrawingTestStudent - Effective display size:",Math.round(v.width*o),"x",Math.round(v.height*o)),console.log(" DrawingTestStudent - Total pixels displayed:",Math.round(v.width*o*v.height*o))},children:c.jsxs(Vh,{children:[c.jsx(Ma,{x:0,y:0,width:v.width,height:v.height,fill:"white",name:"canvas-bg"}),r.map((Ue,ft)=>{if(Array.isArray(Ue)){const ot=Ue[0]?.tool==="eraser";return c.jsx(ti,{points:Ue.flatMap(Ht=>[Ht.x,Ht.y]),stroke:ot?"black":Ue[0]?.color||"#000000",strokeWidth:ot?(Ue[0]?.thickness||2)*7:Ue[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:ot?"destination-out":"source-over"},ft)}else{if(Ue.type==="line")return c.jsx(ti,{points:[Ue.startX,Ue.startY,Ue.endX,Ue.endY],stroke:Ue.color,strokeWidth:Ue.thickness,lineCap:"round"},ft);if(Ue.type==="rectangle"){const ot=Math.abs(Ue.endX-Ue.startX),Ht=Math.abs(Ue.endY-Ue.startY),Gt=Math.min(Ue.startX,Ue.endX),mr=Math.min(Ue.startY,Ue.endY);return c.jsx(Ma,{x:Gt,y:mr,width:ot,height:Ht,stroke:Ue.color,strokeWidth:Ue.thickness,fill:"transparent"},ft)}else if(Ue.type==="circle"){const ot=Math.sqrt(Math.pow(Ue.endX-Ue.startX,2)+Math.pow(Ue.endY-Ue.startY,2))/2,Ht=(Ue.startX+Ue.endX)/2,Gt=(Ue.startY+Ue.endY)/2;return c.jsx(uf,{x:Ht,y:Gt,radius:ot,stroke:Ue.color,strokeWidth:Ue.thickness,fill:"transparent"},ft)}}return null}),_.map(Ue=>c.jsx(Mue,{...Ue,isSelected:E===Ue.id,onSelect:A,onUpdate:P,onDelete:j},Ue.id)),s==="pencil"&&c.jsx(ti,{points:ee.flatMap(Ue=>[Ue.x,Ue.y]),stroke:a,strokeWidth:i,tension:.5,lineCap:"round",lineJoin:"round"}),s==="eraser"&&c.jsx(ti,{points:ee.flatMap(Ue=>[Ue.x,Ue.y]),stroke:"black",strokeWidth:i*7,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:"destination-out"}),z&&z.type==="line"&&c.jsx(ti,{points:[z.startX,z.startY,z.endX,z.endY],stroke:z.color,strokeWidth:z.thickness,lineCap:"round"}),z&&z.type==="rectangle"&&c.jsx(Ma,{x:Math.min(z.startX,z.endX),y:Math.min(z.startY,z.endY),width:Math.abs(z.endX-z.startX),height:Math.abs(z.endY-z.startY),stroke:z.color,strokeWidth:z.thickness,fill:"transparent"}),z&&z.type==="circle"&&c.jsx(uf,{x:(z.startX+z.endX)/2,y:(z.startY+z.endY)/2,radius:Math.sqrt(Math.pow(z.endX-z.startX,2)+Math.pow(z.endY-z.startY,2))/2,stroke:z.color,strokeWidth:z.thickness,fill:"transparent"}),s==="eraser"&&c.jsx(uf,{x:Q.x,y:Q.y,radius:i*7/2,stroke:"#666666",strokeWidth:2,fill:"rgba(102, 102, 102, 0.2)",dash:[5,5],listening:!1}),s==="pencil"&&c.jsx(ti,{points:[Q.x-10,Q.y,Q.x+10,Q.y,Q.x,Q.y-10,Q.x,Q.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="line"&&c.jsx(ti,{points:[Q.x-10,Q.y,Q.x+10,Q.y,Q.x,Q.y-10,Q.x,Q.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="rectangle"&&c.jsx(ti,{points:[Q.x-10,Q.y,Q.x+10,Q.y,Q.x,Q.y-10,Q.x,Q.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="circle"&&c.jsx(ti,{points:[Q.x-10,Q.y,Q.x+10,Q.y,Q.x,Q.y-10,Q.x,Q.y+10],stroke:"#666666",strokeWidth:1,listening:!1})]})})}),O&&R&&c.jsx(Lue,{x:R.x,y:R.y,width:R.width,height:R.height,initialText:R.text,onSave:Ue=>{P(R.id,{text:Ue}),M(!1),G(null)},onCancel:()=>{M(!1),G(null)}}),c.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1",children:[c.jsx("button",{onClick:()=>{const Ue=p.current,ft=Ue.scaleX(),ot=T?.max_canvas_width||1536,Ht=T?.max_canvas_height||2048,Gt=ot/v.width,mr=Ht/v.height,Vr=Math.min(Gt,mr,5),vr=Math.min(Vr,Ue.scaleX()*1.2);Ue.scale({x:vr,y:vr}),Ue.batchDraw(),console.log(" DrawingTestStudent - Zoom In button:",ft.toFixed(2),"->",vr.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(v.width*vr),"x",Math.round(v.height*vr)),console.log(" DrawingTestStudent - New resolution:",Math.round(v.width*vr*v.height*vr),"pixels"),l(vr)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 font-bold",title:"Zoom In",children:"+"}),c.jsx("button",{onClick:()=>{const Ue=p.current,ft=Ue.scaleX(),ot=Math.max(.25,Ue.scaleX()*.8);Ue.scale({x:ot,y:ot}),Ue.batchDraw(),console.log(" DrawingTestStudent - Zoom Out button:",ft.toFixed(2),"->",ot.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(v.width*ot),"x",Math.round(v.height*ot)),console.log(" DrawingTestStudent - New resolution:",Math.round(v.width*ot*v.height*ot),"pixels"),l(ot)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 font-bold",title:"Zoom Out",children:""}),c.jsx("button",{onClick:()=>{const Ue=p.current,ft=Ue.scaleX();Ue.scale({x:1,y:1}),Ue.position({x:0,y:0}),Ue.batchDraw(),console.log(" DrawingTestStudent - Reset zoom:",ft.toFixed(2),"-> 1.00"),console.log(" DrawingTestStudent - Reset effective size:",v.width,"x",v.height),console.log(" DrawingTestStudent - Reset resolution:",v.width*v.height,"pixels"),l(1)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 text-xs",title:"Reset Zoom",children:"1:1"})]}),c.jsxs("div",{className:"absolute bottom-2 left-2 bg-white border border-gray-300 rounded px-2 py-1 text-xs text-gray-600 shadow-sm",children:[Math.round(o*100),"%"]})]})})})},$ue=({content:e})=>{if(!e)return c.jsx("div",{className:"text-gray-500 italic",children:"No instructions provided"});const t=n=>{if(!n)return"";if(n.type==="text"){let s=n.text||"";if(n.format&&(n.format&1&&(s=`<strong>${s}</strong>`),n.format&2&&(s=`<em>${s}</em>`),n.format&8&&(s=`<u>${s}</u>`),n.format&16&&(s=`<s>${s}</s>`)),n.style){const a=n.style.match(/color:\s*([^;]+)/);a&&(s=`<span style="color: ${a[1].trim()}">${s}</span>`)}if(n.textStyle){const a=n.textStyle.match(/color:\s*([^;]+)/);a&&(s=`<span style="color: ${a[1].trim()}">${s}</span>`)}return s}if(n.type==="paragraph"){const s=n.children?n.children.map(t).join(""):"";let a="text-left";return n.format&&(n.format==="center"?a="text-center":n.format==="right"?a="text-right":n.format==="left"&&(a="text-left")),`<p class="${a}">${s}</p>`}if(n.type==="heading"){const s=n.tag||"h1",a=n.children?n.children.map(t).join(""):"";return`<${s}>${a}</${s}>`}if(n.type==="list"){const s=n.listType==="bullet"?"ul":"ol",a=n.children?n.children.map(i=>{if(i.type==="listitem"){const o=i.children?i.children.map(t).join(""):"";let l="margin: 4px 0; display: list-item;";return i.format&&(i.format==="center"?l+=" text-align: center;":i.format==="right"?l+=" text-align: right;":i.format==="left"&&(l+=" text-align: left;")),`<li style="${l}">${o}</li>`}return""}).join(""):"";return`<${s} style="margin: 8px 0; padding-left: 20px; list-style-type: ${n.listType==="bullet"?"disc":"decimal"}; display: block;">${a}</${s}>`}return n.children?n.children.map(t).join(""):""};let r=e;if(typeof e=="string"&&e.startsWith("{"))try{const n=JSON.parse(e);n.text?r=n.text:n.content?r=n.content:n.root&&n.root.children&&(r=n.root.children.map(t).join(""))}catch(n){console.log("Failed to parse Lexical content:",n)}return c.jsx("div",{className:"max-w-none rich-text-content",style:{lineHeight:"1.6",fontSize:"14px"},dangerouslySetInnerHTML:{__html:r}})},Uue=({question:e,questionIndex:t,studentAnswer:r,onAnswerChange:n,mode:s,testId:a,testType:i})=>{Ba();const[o,l]=C.useState([]),[u,d]=C.useState(!0),[f,g]=C.useState("pencil"),[p,x]=C.useState("#000000"),[y,v]=C.useState(2),[T,_]=C.useState([]),[b,E]=C.useState(-1),[k,A]=C.useState({width:600,height:800}),[P,j]=C.useState(1),[O,R]=C.useState(!1),[M,G]=C.useState(!1),[K,re]=C.useState(!1),[Y,ee]=C.useState([]),[B,z]=C.useState(null),[I,W]=C.useState(!1),[V,L]=C.useState(null),H=b>0,J=b<T.length-1,[Q,ne]=C.useState(!1),Z=C.useRef(null),se=C.useRef(null),[ce,he]=C.useState({width:600,height:800}),Ee=C.useRef(!1),[ie,me]=C.useState(.25),Ne=["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#008000","#808080","#FFC0CB","#A52A2A","#000080"];C.useEffect(()=>{const Qe=()=>{re(window.innerWidth>=1024)};return Qe(),window.addEventListener("resize",Qe),()=>window.removeEventListener("resize",Qe)},[]),C.useEffect(()=>{if(e){const Qe=e.max_canvas_width||1536,tt=e.max_canvas_height||2048,vt=e.canvas_width||600,gt=e.canvas_height||800;if(A({width:Qe,height:tt}),Ee.current)console.log(" DrawingTestStudent - Preserving user zoom:",P.toFixed(2));else{j(1),Ee.current=!0;const Wt=(vt-Qe*1)/2,Zt=(gt-tt*1)/2;if(!isNaN(Wt)&&!isNaN(Zt)&&Z.current){const pr={x:Wt,y:Zt};Z.current.position(pr),Z.current.batchDraw()}console.log(" DrawingTestStudent - Canvas size set:",Qe,"x",tt),console.log(" DrawingTestStudent - Viewport size:",vt,"x",gt),console.log(" DrawingTestStudent - Initial zoom:",1 .toFixed(2)),console.log(" DrawingTestStudent - Image resolution:",Qe*tt,"pixels"),console.log(" DrawingTestStudent - Aspect ratio:",(Qe/tt).toFixed(2))}if(r&&typeof r=="string")try{const _t=JSON.parse(r);_t.lines?l(_t.lines):l(_t),_t.textBoxes&&ee(_t.textBoxes)}catch{console.log("No valid drawing data found")}d(!1)}},[e,r]),C.useEffect(()=>{const Qe=()=>{const tt=se.current;if(!tt)return;const vt=tt.clientWidth||1,gt=tt.clientHeight||1,_t=Math.min(vt/(k.width||1),gt/(k.height||1));me(Math.min(_t,1))};return Qe(),window.addEventListener("resize",Qe),()=>window.removeEventListener("resize",Qe)},[k.width,k.height,Q]);const Oe=Qe=>{l(Qe);const tt={lines:Qe,textBoxes:Y};n(e.question_id,JSON.stringify(tt)),Re(Qe,Y)},Re=(Qe,tt=Y)=>{const vt=T.slice(0,b+1);vt.push({lines:[...Qe],textBoxes:[...tt]}),_(vt),E(vt.length-1)},ze=()=>{if(H){const Qe=b-1,tt=T[Qe];if(tt&&typeof tt=="object"&&tt.lines){l([...tt.lines]),ee([...tt.textBoxes]);const vt={lines:tt.lines,textBoxes:tt.textBoxes};n(e.question_id,JSON.stringify(vt))}else{const vt=tt||[];l([...vt]),n(e.question_id,JSON.stringify(vt))}E(Qe)}},Nt=()=>{if(J){const Qe=b+1,tt=T[Qe];if(tt&&typeof tt=="object"&&tt.lines){l([...tt.lines]),ee([...tt.textBoxes]);const vt={lines:tt.lines,textBoxes:tt.textBoxes};n(e.question_id,JSON.stringify(vt))}else{const vt=tt||[];l([...vt]),n(e.question_id,JSON.stringify(vt))}E(Qe)}},et=()=>{l([]),ee([]),z(null),n(e.question_id,"")},Me=Qe=>{z(Qe)},Fe=(Qe,tt)=>{const vt=Y.map(_t=>_t.id===Qe?{..._t,...tt}:_t);ee(vt),Re(o,vt);const gt={lines:o,textBoxes:vt};if(n(e.question_id,JSON.stringify(gt)),tt.isEditing){const _t=Y.find(Wt=>Wt.id===Qe);L(_t),W(!0)}},Ke=Qe=>{const tt=Y.filter(gt=>gt.id!==Qe);ee(tt),B===Qe&&z(null),Re(o,tt);const vt={lines:o,textBoxes:tt};n(e.question_id,JSON.stringify(vt))},xt=()=>{if(Q){const vt=e?.canvas_width||600,gt=e?.canvas_height||800,_t=window.innerWidth-40,Wt=window.innerHeight-40,Zt=_t/vt,pr=Wt/gt,Ir=Math.min(Zt,pr,1);return{width:vt,height:gt,zoom:Ir}}const Qe=e?.canvas_width||600,tt=e?.canvas_height||800;return{width:Qe,height:tt,zoom:1}};C.useEffect(()=>{const Qe=()=>{he(xt())};return Qe(),window.addEventListener("resize",Qe),()=>window.removeEventListener("resize",Qe)},[Q,k]);const ut=Qe=>{Qe.evt.preventDefault();const tt=Z.current,vt=tt.scaleX(),gt=tt.getPointerPosition(),_t={x:(gt.x-tt.x())/vt,y:(gt.y-tt.y())/vt},Wt=Qe.evt.deltaY>0?vt*.9:vt*1.1,Zt=e?.max_canvas_width||1536,pr=e?.max_canvas_height||2048,Ir=Zt/k.width,br=pr/k.height,xr=Math.min(Ir,br,1),er=Math.max(ie,Math.min(xr,Wt)),_r={x:gt.x-_t.x*er,y:gt.y-_t.y*er};if(er<=ie&&se.current){const ge=se.current.clientWidth||1,ue=se.current.clientHeight||1;_r.x=(ge-k.width*er)/2,_r.y=(ue-k.height*er)/2}tt.scale({x:er,y:er}),tt.position(_r),tt.batchDraw(),console.log(" DrawingTestStudent - Wheel zoom:",vt.toFixed(2),"->",er.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(k.width*er),"x",Math.round(k.height*er)),console.log(" DrawingTestStudent - New resolution:",Math.round(k.width*er*k.height*er),"pixels"),j(er),Ee.current=!0},At=Qe=>{const tt=Qe.scaleX(),vt=se.current,gt=vt?.clientWidth||ce.width,_t=vt?.clientHeight||ce.height,Wt=k.width*tt,Zt=k.height*tt;if(tt<=ie){const we=(gt-Wt)/2,Te=(_t-Zt)/2;Qe.position({x:we,y:Te}),Qe.batchDraw();return}if(Wt<=gt&&Zt<=_t){const we=(gt-Wt)/2,Te=(_t-Zt)/2;Qe.position({x:we,y:Te}),Qe.batchDraw();return}const pr=Math.max(0,Wt-gt),Ir=Math.max(0,Zt-_t),br=-pr,xr=-Ir,er=Qe.x(),_r=Qe.y(),ge=Math.max(br,Math.min(pr,er)),ue=Math.max(xr,Math.min(Ir,_r));(ge!==er||ue!==_r)&&(Qe.position({x:ge,y:ue}),Qe.batchDraw())},Dt=()=>{if(Q)document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen();else{const Qe=document.querySelector(".drawing-canvas-container");Qe&&(Qe.requestFullscreen?Qe.requestFullscreen():Qe.webkitRequestFullscreen?Qe.webkitRequestFullscreen():Qe.msRequestFullscreen&&Qe.msRequestFullscreen())}};return C.useEffect(()=>{const Qe=()=>{ne(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",Qe),document.addEventListener("webkitfullscreenchange",Qe),document.addEventListener("msfullscreenchange",Qe),()=>{document.removeEventListener("fullscreenchange",Qe),document.removeEventListener("webkitfullscreenchange",Qe),document.removeEventListener("msfullscreenchange",Qe)}},[]),C.useEffect(()=>()=>{Z.current&&Z.current.stop()},[]),u?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx(Gr,{})}):e?c.jsxs("div",{className:`drawing-question w-full max-w-full mx-0 p-0 sm:p-2 ${Q?"fixed inset-0 z-50 bg-white overflow-y-auto":""}`,children:[!Q&&c.jsx("div",{className:"mb-4",children:c.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Question ",t+1]})}),!Q&&e.question_json&&e.question_json.trim()&&c.jsxs("div",{className:"mb-2 p-2 bg-gray-50 border border-gray-200 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Task:"}),c.jsx("div",{className:"text-gray-700",children:c.jsx($ue,{content:e.question_json})})]}),!Q&&c.jsx(Et,{className:"p-1 sm:p-2 mb-2",children:c.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{className:"hidden sm:block text-sm text-gray-700",children:"Tool:"}),c.jsxs("div",{className:"flex flex-nowrap sm:flex-wrap gap-1 overflow-x-auto",children:[c.jsx("button",{onClick:()=>g("pencil"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="pencil"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Pencil (Freehand drawing)",children:""}),c.jsx("button",{onClick:()=>g("line"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="line"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Line",children:""}),c.jsx("button",{onClick:()=>g("rectangle"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="rectangle"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Rectangle",children:""}),c.jsx("button",{onClick:()=>g("circle"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="circle"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Circle",children:""}),c.jsx("button",{onClick:()=>g("eraser"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="eraser"?"bg-red-500 text-white border-red-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Eraser",children:""}),c.jsx("button",{onClick:()=>g("text"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="text"?"bg-green-500 text-white border-green-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Text Box",children:""}),c.jsx("button",{onClick:()=>g("pan"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="pan"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Pan (Move canvas)",children:""})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{className:"text-sm text-gray-700",children:"History:"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:ze,disabled:!H,className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${H?"bg-white text-gray-700 border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed"}`,title:"Undo (Ctrl+Z)",children:""}),c.jsx("button",{onClick:Nt,disabled:!J,className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${J?"bg-white text-gray-700 border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed"}`,title:"Redo (Ctrl+Y)",children:""})]})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>R(!O),className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[c.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:p}}),c.jsx("span",{className:"text-xs sm:text-sm text-gray-700",children:"Color"})]}),O&&c.jsx("div",{className:"absolute top-full left-0 mt-2 p-4 bg-white border border-gray-300 rounded-lg shadow-lg z-30 min-w-max",children:c.jsx("div",{className:"flex flex-wrap gap-2 max-w-xs",children:Ne.map(Qe=>c.jsx("button",{onClick:()=>{x(Qe),R(!1)},className:`w-10 h-10 rounded border-2 hover:scale-110 transition-transform flex-shrink-0 ${p===Qe?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:Qe},title:Qe},Qe))})})]}),c.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[c.jsx("label",{className:"text-xs sm:text-sm text-gray-700",children:"Thickness:"}),c.jsx("input",{type:"range",min:"1",max:"10",value:y,onChange:Qe=>v(parseInt(Qe.target.value)),className:"w-16 sm:w-20"}),c.jsxs("span",{className:"text-xs text-gray-500 w-6 sm:w-8",children:[y,"px"]})]}),c.jsx(nt,{onClick:et,variant:"secondary",size:"sm",children:"Clear"})]})}),c.jsx(Et,{paddingClass:"p-0 sm:p-2",children:c.jsxs("div",{className:"w-full drawing-canvas-container relative p-0 m-0",children:[c.jsx(Bue,{width:k.width,height:k.height,lines:o,onDrawingChange:Oe,currentTool:f,currentColor:p,currentThickness:y,zoom:P,onZoomChange:j,isPanning:M,isFullscreen:Q,constrainPanPosition:At,handleWheel:ut,stageRef:Z,setIsPanning:G,responsiveDimensions:ce,canvasSize:k,question:e,textBoxes:Y,setTextBoxes:ee,selectedTextBox:B,setSelectedTextBox:z,handleTextBoxSelect:Me,handleTextBoxUpdate:Fe,handleTextBoxDelete:Ke,isEditingText:I,editingTextBox:V,setIsEditingText:W,setEditingTextBox:L,setCurrentTool:g}),c.jsx("button",{onClick:Dt,className:"absolute top-2 left-2 bg-black bg-opacity-50 hover:bg-opacity-70 text-white p-2 rounded-lg transition-all duration-200 z-10",title:Q?"Exit Fullscreen":"Enter Fullscreen",children:Q?c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})}):c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})})]})})]}):c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx("div",{className:"text-center",children:c.jsx("p",{className:"text-gray-500",children:"No drawing question data available"})})})},bT={enhanceUserData(e,t){const r={id:e.id||e.student_id||e.teacher_id,username:e.username||e.student_id,name:e.name||e.first_name,surname:e.surname||e.last_name,nickname:e.nickname,role:t,is_active:e.is_active!==void 0?e.is_active:!0,created_at:e.created_at,updated_at:e.updated_at};switch(t){case"student":return{...r,student_id:e.student_id,grade:e.grade,class:e.class,number:e.number,subjects:e.subjects||[]};case"teacher":return{...r,teacher_id:e.teacher_id,first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,subjects:e.subjects||[]};case"admin":return{...r,admin_id:e.admin_id,permissions:e.permissions||["all"]};default:return r}},async studentLogin(e){console.log("Trying student login...");try{const t=await fetch("/.netlify/functions/student-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:e.username,password:e.password})}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.student,role:"student",response:t};throw new Error(r.message||"Student login failed")}catch(t){throw console.error("Student login error:",t),new Error(t.message||"Student login failed")}},async teacherLogin(e){console.log("Trying teacher login...");try{const t=await fetch("/.netlify/functions/teacher-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.teacher,role:"teacher",response:t};throw new Error(r.message||"Teacher login failed")}catch(t){throw console.error("Teacher login error:",t),new Error(t.message||"Teacher login failed")}},async adminLogin(e){console.log("Trying admin login...");try{const t=await fetch("/.netlify/functions/admin-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.admin,role:"admin",response:t};throw new Error(r.message||"Admin login failed")}catch(t){throw console.error("Admin login error:",t),new Error(t.message||"Admin login failed")}},async login(e){const{username:t,password:r}=e;console.log("Attempting login with:",t,r);try{if(t==="admin"){const o=await this.adminLogin(e),l=await o.json();return await this.handleLoginResponse(o,"admin",l)}const n=await this.teacherLogin(e),s=await n.json();if(n.ok&&s.success)return await this.handleLoginResponse(n,"teacher",s);const a=await this.studentLogin(e),i=await a.json();return a.ok&&i.success?await this.handleLoginResponse(a,"student",i):(this.handleLoginFailure(),{success:!1,message:"Login failed. Please check your credentials and try again."})}catch(n){return console.error("Login error:",n),this.handleLoginFailure(),{success:!1,message:n.message||"Login failed"}}},async handleLoginResponse(e,t,r){if(e.ok&&r.success){if(!window.tokenManager||!window.roleBasedLoader)return console.error("[ERROR] JWT system not available during login response handling"),this.handleLoginFailure(),{success:!1,message:"JWT system not available"};if(r.accessToken&&r.role)try{window.tokenManager.setTokens(r.accessToken,r.role),window.roleBasedLoader.setupAccessAfterLogin()}catch(n){return console.error("[ERROR] Failed to initialize JWT system:",n),this.handleLoginFailure(),{success:!1,message:"Failed to initialize JWT system"}}return this.resetLoginForm(),await this.handlePostLoginActions(r,t),{success:!0,data:r,role:t}}return{success:!1,message:"Login failed"}},async handlePostLoginActions(e,t){console.log(`Handling post-login actions for role: ${t}`);try{switch(t){case"student":e.student&&(this.populateStudentInfo(e.student),window.loadStudentData&&await window.loadStudentData());break;case"teacher":e.teacher&&(this.populateTeacherInfo(e.teacher),window.loadTeacherData&&await window.loadTeacherData());break;case"admin":e.admin&&window.loadAdminData&&await window.loadAdminData();break;default:console.warn(`Unknown role for post-login actions: ${t}`)}}catch(r){console.error("Error in post-login actions:",r)}},handleLoginFailure(){console.log("All login attempts failed"),this.resetLoginForm(),window.showNotification&&window.showNotification("Login failed. Please check your credentials and try again.","error")},resetLoginForm(){const e=document.getElementById("unifiedLoginForm");if(e){e.querySelectorAll("input").forEach(n=>{n.disabled=!1,n.style.opacity="1",n.style.cursor="text",n.removeAttribute("readonly"),n.style.pointerEvents="auto"});const r=e.querySelector('button[type="submit"]');r&&(r.disabled=!1,r.style.opacity="1",r.style.cursor="pointer",r.style.pointerEvents="auto",r.innerHTML="Login"),e.classList.remove("test-submitting","disabled"),e.style.pointerEvents="auto",console.log("Login form reset successfully - all inputs re-enabled")}},async logout(){console.log(" Logout initiated...");try{return window.tokenManager&&window.tokenManager.logout(),window.roleBasedLoader&&window.roleBasedLoader.reloadRoleAccess(),window.clearTestLocalStorage&&window.clearTestLocalStorage(),this.resetInterfaceAfterSessionClear(),console.log(" Logout completed - user session cleared, test data cleared, and interface reset"),{success:!0}}catch(e){return console.error("Logout error:",e),this.resetInterfaceAfterSessionClear(),{success:!0}}},resetInterfaceAfterSessionClear(){try{window.forceLogout=!0,window.preventAutoLogin=!0,window.isClearingSession=!0,window.forceLogoutComplete=!0,document.querySelectorAll(".section").forEach(s=>{s.classList.remove("active"),s.style.display="none",s.style.visibility="hidden",s.style.opacity="0"}),document.querySelectorAll('[id$="-cabinet"], [id$="-container"], [id*="cabinet"], [id*="container"]').forEach(s=>{s.id&&s.id!=="login-section"&&(s.classList.remove("active"),s.style.display="none",s.style.visibility="hidden",s.style.opacity="0")}),document.body.classList.remove("student-logged-in","teacher-logged-in","admin-logged-in"),document.body.classList.add("force-logout");const r=document.getElementById("login-section");r&&(r.classList.add("active"),r.style.display="block",r.style.visibility="visible",r.style.opacity="1"),document.querySelectorAll("input, select, textarea").forEach(s=>{s.type!=="hidden"&&(s.value="",s.checked=!1)}),console.log(" Interface reset to login state")}catch(e){console.error("Error resetting interface:",e),localStorage.clear(),sessionStorage.clear(),window.location.reload()}},async changePassword(e){try{return{success:!0,message:(await Cs.post("/auth/change-password",{currentPassword:e.currentPassword,newPassword:e.newPassword,confirmPassword:e.confirmPassword})).data.message}}catch(t){throw new Error(t.response?.data?.message||"Password change failed")}},async verifyToken(e){try{const t=await Cs.get("/auth/verify",{headers:{Authorization:`Bearer ${e}`}});return{success:!0,valid:t.data.valid,user:t.data.user}}catch(t){return{success:!1,valid:!1,error:t.message}}},async refreshToken(e){try{const t=await Cs.post("/auth/refresh",{refreshToken:e});return{success:!0,token:t.data.token,refreshToken:t.data.refreshToken}}catch(t){throw new Error(t.response?.data?.message||"Token refresh failed")}},async getUserProfile(){try{return{success:!0,user:(await Cs.get("/auth/profile")).data.user}}catch(e){throw new Error(e.response?.data?.message||"Failed to get user profile")}},async updateUserProfile(e){try{return{success:!0,user:(await Cs.put("/auth/profile",e)).data.user}}catch(t){throw new Error(t.response?.data?.message||"Failed to update user profile")}},populateStudentInfo(e){console.log("=== populateStudentInfo called ==="),console.log("Student object:",e);const t=document.getElementById("studentName");if(t){const s=`${e?.name||""} ${e?.surname||""}`.trim();t.textContent=s,console.log("Set student name to:",s)}const r=document.getElementById("studentGrade");r&&(r.textContent=e?.grade||"",console.log("Set student grade to:",e?.grade));const n=document.getElementById("studentClass");n&&(n.textContent=e?.class||"",console.log("Set student class to:",e?.class)),console.log("Student info populated successfully")},populateTeacherInfo(e){console.log("=== populateTeacherInfo called ==="),console.log("Teacher object:",e);const t=document.getElementById("teacherName");if(t){const n=`${e?.name||""} ${e?.surname||""}`.trim();t.textContent=n,console.log("Set teacher name to:",n)}const r=document.getElementById("teacherUsername");r&&(r.textContent=e?.username||"",console.log("Set teacher username to:",e?.username)),console.log("Teacher info populated successfully")},getCurrentTeacherId(){try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())return console.warn("[WARN] No valid JWT token found for teacher"),null;const e=window.tokenManager.decodeToken(window.tokenManager.getAccessToken());return e&&e.sub?e.role==="teacher"?(console.log(`[DEBUG] Found teacher ID from JWT: ${e.sub}`),e.sub):(console.warn(`[WARN] Unsupported role for teacher function: ${e.role}`),null):(console.warn("[WARN] No teacher ID found in JWT token"),null)}catch(e){return console.error("[ERROR] Error getting current teacher ID from JWT:",e),null}},getCurrentAdmin(){const e=window.tokenManager?.getToken();if(!e)return null;const t=window.tokenManager.decodeToken(e);if(!t||t.role!=="admin")throw new Error("getCurrentAdmin() called by non-admin user");return{id:t.sub,username:t.username,role:t.role}},getCurrentTeacherUsername(){try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())return console.warn("[WARN] No valid JWT token found for teacher"),null;const e=window.tokenManager.decodeToken(window.tokenManager.getAccessToken());return e&&e.username?(console.log(`[DEBUG] Found teacher username from JWT: ${e.username}`),e.username):(console.warn("[WARN] No teacher username found in JWT token"),null)}catch(e){return console.error("[ERROR] Error getting current teacher username from JWT:",e),null}},isAdmin(){try{const e=window.tokenManager?.getToken();if(!e)return!1;const t=window.tokenManager.decodeToken(e);return t&&t.role==="admin"}catch(e){return console.error("[ERROR] Error checking admin status:",e),!1}},getCurrentAdminId(){try{const e=this.getCurrentAdmin();return e?e.id:null}catch(e){return console.error("[ERROR] Error getting admin ID:",e),null}}},Wue=()=>{const e=yo(),{login:t,setUserData:r,isAuthenticated:n,user:s}=ls(),[a,i]=C.useState({username:"",password:""}),[o,l]=C.useState(!1),[u,d]=C.useState(""),[f,g]=C.useState([]),[p,x]=C.useState(!1);C.useEffect(()=>{y()},[]);const y=C.useCallback(()=>{console.log("Checking for existing JWT session...");try{(window.forceLogout||window.preventAutoLogin)&&(window.forceLogout=!1,window.preventAutoLogin=!1)}catch{}if(window.tokenManager&&window.tokenManager.isAuthenticated()){console.log("JWT session valid, checking user role...");try{const M=window.tokenManager.decodeToken(window.tokenManager.getAccessToken());M&&M.role?console.log("User role from JWT:",M.role):console.log("No valid role found in JWT, showing login")}catch(M){console.error("Error decoding JWT token:",M)}}else console.log("No valid JWT session found, showing login")},[]),v=C.useCallback(async M=>{if(M.preventDefault(),window.forceLogout||window.preventAutoLogin){console.log(" Login blocked - force logout in progress"),j("Please wait for the logout process to complete.","warning");return}const{username:G,password:K}=a;if(!G||!K){d("Please enter both username and password");return}l(!0),d("");try{let re,Y;G==="admin"?(re=await bT.adminLogin({username:G,password:K}),Y=Gi.ADMIN):/^\d+$/.test(G)?(re=await bT.studentLogin({username:G,password:K}),Y=Gi.STUDENT):(re=await bT.teacherLogin({username:G,password:K}),Y=Gi.TEACHER);let ee,B;if(re.response?(ee=re,B=re.response):(ee=await re.json(),B=re),await T(B,Y,ee)){j("Login successful!","success");try{window.forceLogout=!1,window.preventAutoLogin=!1}catch{}}}catch(re){console.error("Login error:",re),d("Invalid username or password")}finally{l(!1)}},[a]),T=C.useCallback(async(M,G,K)=>{if(M.ok&&K.success){if(!window.tokenManager||!window.roleBasedLoader)return console.error("[ERROR] JWT system not available during login response handling"),A(),!1;try{K.token&&(window.tokenManager.setTokens(K.token,G),K.refreshToken&&window.tokenManager.setRefreshToken(K.refreshToken),console.log("JWT token stored successfully"));const re={...K.data,...K,role:G};return r(re),await _(re),!0}catch(re){return console.error("Error handling login response:",re),A(re),!1}}else return console.error("Login failed:",K.error||"Unknown error"),d(K.error||"Login failed. Please check your credentials."),!1},[t]),_=C.useCallback(async M=>{if(console.log("Handling post-login actions for role:",M.role),p){console.log(" Post-login already handled, skipping");return}x(!0);try{switch(M.role){case Gi.STUDENT:await b(M),e("/student");break;case Gi.TEACHER:await E(M),e("/teacher");break;case Gi.ADMIN:await k(M),e("/admin");break;default:console.error("Unknown user role:",M.role),A()}}catch(G){console.error("Error in post-login actions:",G),A(G)}},[e,p]);C.useEffect(()=>{n||x(!1)},[n]);const b=C.useCallback(async M=>{console.log("Populating student info:",M)},[]),E=C.useCallback(async M=>{console.log("Populating teacher info:",M)},[]),k=C.useCallback(async M=>{console.log("Populating admin info:",M)},[]),A=C.useCallback((M=null)=>{console.error("Login failure:",M),d("Login failed. Please check your credentials and try again."),P()},[]),P=C.useCallback(()=>{i({username:"",password:""}),d(""),l(!1)},[]),j=C.useCallback((M,G)=>{const K={id:Date.now(),message:M,type:G,timestamp:new Date};g(re=>[...re,K]),setTimeout(()=>{g(re=>re.filter(Y=>Y.id!==K.id))},bf.NOTIFICATION_DURATION)},[]),O=C.useCallback(M=>{const{name:G,value:K}=M.target;i(re=>({...re,[G]:K})),u&&d("")},[u]),R=C.useCallback(M=>{M.key==="Enter"&&!o&&v(M)},[v,o]);return c.jsxs(rt.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[c.jsxs(rt.div,{className:"w-full max-w-md",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsxs(rt.div,{className:"text-center mb-8",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.5},children:[c.jsx(rt.div,{className:"flex justify-center mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.5,type:"spring"},children:c.jsx("img",{src:"/pics/logo_mws.png",alt:"MWS Logo",className:"h-16 w-16 object-contain"})}),c.jsx(rt.h1,{className:"text-3xl font-bold text-gray-900 mb-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.3},children:"Mathayom Watsing School"}),c.jsx(rt.p,{className:"text-lg text-gray-600",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.3},children:"Test Management System"})]}),c.jsxs(rt.div,{className:"bg-white rounded-xl shadow-2xl p-8",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.7,duration:.5,type:"spring"},children:[c.jsx(rt.h2,{className:"text-2xl font-semibold text-gray-900 text-center mb-6",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.8,duration:.3},children:"Login"}),c.jsxs("form",{onSubmit:v,className:"space-y-6",children:[c.jsxs(rt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9,duration:.3},children:[c.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Student ID"}),c.jsx(rt.input,{type:"text",id:"username",name:"username",value:a.username,onChange:O,onKeyDown:R,placeholder:"Enter student ID",required:!0,autoComplete:"username",disabled:o,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed","aria-describedby":u?"error-message":void 0,whileFocus:{scale:1.02},transition:{duration:.2}})]}),c.jsxs(rt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:1,duration:.3},children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),c.jsx(rt.input,{type:"password",id:"password",name:"password",value:a.password,onChange:O,onKeyDown:R,placeholder:"Enter your password",required:!0,autoComplete:"current-password",disabled:o,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed","aria-describedby":u?"error-message":void 0,whileFocus:{scale:1.02},transition:{duration:.2}})]}),c.jsx(co,{children:u&&c.jsx(rt.div,{id:"error-message",className:"bg-red-50 border border-red-200 rounded-lg p-3",role:"alert","aria-live":"polite",initial:{opacity:0,height:0,y:-10},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-10},transition:{duration:.3},children:c.jsx("p",{className:"text-sm text-red-600",children:u})})}),c.jsx(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.1,duration:.3},children:c.jsx(nt,{type:"submit",variant:"primary",size:"lg",disabled:o,className:"w-full",children:o?c.jsxs(c.Fragment,{children:[c.jsx(Gr,{size:"sm",className:"mr-2"}),"Logging in..."]}):"Login"})})]})]}),bf.DEBUG_MODE]}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:c.jsx(co,{children:f.map(M=>c.jsx(rt.div,{initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{duration:.3,type:"spring"},children:c.jsx(tc,{type:M.type,message:M.message,onClose:()=>g(G=>G.filter(K=>K.id!==M.id))})},M.id))})})]})},ts={async getStudentData(){console.log("getStudentData called - loading student subjects");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-student-subjects")).json();if(t.success)return console.log("Student data loaded successfully:",t.subjects),t.subjects;throw new Error(t.error||"Failed to load student data")}catch(e){throw console.error("Error loading student data:",e),e}},getStudentSubjects(e){return console.log("getStudentSubjects called with subjects:",e),e.map(t=>({id:t.id||t.subject_id,name:t.subject,grade:t.grade,class:t.class,testResults:t.test_results||[]}))},async getTeacherData(){console.log("getTeacherData called - loading teacher subjects");try{const e=await this.getCurrentTeacherId();if(!e)throw new Error("No valid teacher session found");const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-teacher-subjects")).json();if(r.success)return console.log("Teacher data loaded successfully:",r.subjects),{teacher_id:e,subjects:r.subjects,hasSubjects:r.subjects.length>0};throw new Error(r.error||"Failed to load teacher data")}catch(e){throw console.error("Error loading teacher data:",e),e}},getTeacherSubjects(e){return console.log("getTeacherSubjects called with subjects:",e),e.map(t=>{let r=[];return t.classes&&Array.isArray(t.classes)&&(r=t.classes.map(n=>({grade:n.grade,class:n.class,className:n.class}))),{id:t.subject_id,name:t.subject,classes:r,assignments:t.assignments||[],description:t.description||""}})},getGradeButtons(){return console.log("getGradeButtons called"),["M1","M2","M3","M4","M5","M6"].map(t=>({id:t,name:t,classes:this.generateClassButtons(t)}))},generateClassButtons(e){const t=[];for(let r=1;r<=10;r++)t.push({id:`${e}_${r}`,name:`${e}/${r}`,grade:e,class:r});return t},async getAdminData(){console.log("getAdminData called - loading admin data");try{if(!await this.getCurrentAdminId())throw new Error("No valid admin session found");const[t,r,n]=await Promise.allSettled([this.getAllTeachers(),this.getAllSubjects(),this.getAllUsers()]);return{teachers:t.status==="fulfilled"?t.value:[],subjects:r.status==="fulfilled"?r.value:[],users:n.status==="fulfilled"?n.value:[],loadedAt:new Date().toISOString()}}catch(e){throw console.error("Error loading admin data:",e),e}},async saveTeacherSubjects(e){console.log("saveTeacherSubjects called with subjects:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-teacher-subjects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subjects:e})})).json();if(r.success)return console.log("Teacher subjects saved successfully"),r;throw new Error(r.error||"Failed to save teacher subjects")}catch(t){throw console.error("Error saving teacher subjects:",t),t}},async deleteTeacherSubject(e){console.log("deleteTeacherSubject called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/delete-teacher-subject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Teacher subject assignment deleted successfully"),r;throw new Error(r.error||"Failed to delete teacher subject assignment")}catch(t){throw console.error("Error deleting teacher subject assignment:",t),t}},async getSubjectsDropdown(){console.log("getSubjectsDropdown called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-subjects")).json();if(t.success)return console.log("Subjects dropdown data loaded successfully"),t.subjects.map(r=>({id:r.id,name:r.subject_name,value:r.subject_name}));throw new Error(t.error||"Failed to load subjects dropdown")}catch(e){throw console.error("Error loading subjects dropdown:",e),e}},async getGradesAndClasses(){console.log("getGradesAndClasses called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-teacher-grades-classes")).json();if(t.success)return console.log("Grades and classes loaded successfully"),t.data;throw new Error(t.message||"Failed to load grades and classes")}catch(e){throw console.error("Error loading grades and classes:",e),e}},async saveSubjectClasses(e,t){console.log("saveSubjectClasses called with subjectId:",e,"classes:",t);try{const r=await this.getCurrentTeacherId();if(!r)throw new Error("No valid teacher session found");const s=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-subject-classes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teacher_id:r,subject_id:e,classes:t})})).json();if(s.success)return console.log("Subject classes saved successfully"),s;throw new Error(s.error||"Failed to save subject classes")}catch(r){throw console.error("Error saving subject classes:",r),r}},async getAllSubjects(){console.log("getAllSubjects called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-subjects")).json();if(t.success)return console.log("All subjects loaded successfully"),t.subjects.map(r=>({id:r.id,name:r.subject_name,description:r.description||"",created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all subjects")}catch(e){throw console.error("Error loading all subjects:",e),e}},async getSubjectsForSelection(){console.log("getSubjectsForSelection called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-subjects")).json();if(t.success)return console.log("Subjects for selection loaded successfully"),t.subjects;throw new Error(t.message||"Failed to load subjects for selection")}catch(e){throw console.error("Error loading subjects for selection:",e),e}},async addAcademicYear(e){console.log("addAcademicYear called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/add-academic-year",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Academic year added successfully"),r;throw new Error(r.error||"Failed to add academic year")}catch(t){throw console.error("Error adding academic year:",t),t}},async getAllUsers(){console.log("getAllUsers called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-users")).json();if(t.success)return console.log("All users loaded successfully"),t.users.map(r=>({id:r.id,student_id:r.student_id,grade:r.grade,class:r.class,number:r.number,name:r.name,surname:r.surname,nickname:r.nickname,created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all users")}catch(e){throw console.error("Error loading all users:",e),e}},async getAllTeachers(){console.log("getAllTeachers called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-teachers")).json();if(t.success)return console.log("All teachers loaded successfully"),t.teachers.map(r=>({id:r.id,teacher_id:r.teacher_id,username:r.username,name:r.name,surname:r.surname,email:r.email,created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all teachers")}catch(e){throw console.error("Error loading all teachers:",e),e}},async createUser(e){console.log("createUser called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/create-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("User created successfully"),r;throw new Error(r.error||"Failed to create user")}catch(t){throw console.error("Error creating user:",t),t}},async updateUser(e,t){console.log("updateUser called with userId:",e,"data:",t);try{const n=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/update-user/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(n.success)return console.log("User updated successfully"),n;throw new Error(n.error||"Failed to update user")}catch(r){throw console.error("Error updating user:",r),r}},async createTeacher(e){console.log("createTeacher called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/create-teacher",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Teacher created successfully"),r;throw new Error(r.error||"Failed to create teacher")}catch(t){throw console.error("Error creating teacher:",t),t}},async updateTeacher(e,t){console.log("updateTeacher called with teacherId:",e,"data:",t);try{const n=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/update-teacher/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(n.success)return console.log("Teacher updated successfully"),n;throw new Error(n.error||"Failed to update teacher")}catch(r){throw console.error("Error updating teacher:",r),r}},async updateStudentInfo(e){console.log("updateStudentInfo called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-student-info",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Student info updated successfully"),r;throw new Error(r.error||"Failed to update student info")}catch(t){throw console.error("Error updating student info:",t),t}},async changePassword(e){console.log("changePassword called");let t;if(e.studentId)t="/.netlify/functions/change-student-password";else if(e.username)t="/.netlify/functions/change-teacher-password";else throw new Error("Invalid password data: missing studentId or username");try{const n=await(await window.tokenManager.makeAuthenticatedRequest(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(n.success)return console.log("Password changed successfully"),n;throw new Error(n.error||"Failed to change password")}catch(r){throw console.error("Error changing password:",r),r}},async getCurrentTeacherId(){try{const e=localStorage.getItem("accessToken");if(!e)return null;const t=JSON.parse(atob(e.split(".")[1]));return t.teacher_id||t.sub||null}catch(e){return console.error("Error getting current teacher ID:",e),null}},async getCurrentAdminId(){try{const e=localStorage.getItem("accessToken");if(!e)return null;const t=JSON.parse(atob(e.split(".")[1]));return t.admin_id||t.sub||null}catch(e){return console.error("Error getting current admin ID:",e),null}}},EV=C.createContext(),NV=({children:e})=>{const[t,r]=C.useState(null),[n,s]=C.useState([]),[a,i]=C.useState([]),[o,l]=C.useState([]),[u,d]=C.useState([]),[f,g]=C.useState([]),[p,x]=C.useState([]),[y,v]=C.useState([]),[T,_]=C.useState(!1),[b,E]=C.useState(null),[k,A]=C.useState(!1),[P,j]=C.useState(!1),[O,R]=C.useState(!1),[M,G]=C.useState(null),[K,re]=C.useState(null),[Y,ee]=C.useState(null),B=C.useCallback(async()=>{try{_(!0),E(null);const ue=`student_subjects_${t?.student_id||t?.id||""}`;console.log(" UserContext: Checking cache for key:",ue);const we=ms(ue);if(we){console.log(" UserContext: Cache HIT! Using cached student data"),s(we),z(we);return}console.log(" UserContext: Cache MISS! Fetching from API");const Te=await ts.getStudentData();if(Te)s(Te),z(Te),console.log(" UserContext: Caching student data with key:",ue),ys(ue,Te,Os.student_subjects);else throw new Error("No subjects data received")}catch(ge){E(ge.message||"Failed to load student data"),console.error("Error loading student data:",ge)}finally{_(!1)}},[t?.student_id,t?.id]),z=ge=>{console.log("Displaying student subjects:",ge),s(ge)},I=C.useCallback(async()=>{try{if(_(!0),E(null),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.error("No valid teacher session found in loadTeacherData, redirecting to login"),E("No valid teacher session found");return}const ue=`teacher_subjects_${t?.teacher_id||t?.id||""}`,we=ms(ue);if(we){s(we),we.length===0?pr():W(we);return}const Te=await ts.getTeacherSubjects();if(Te.success)s(Te.subjects),ys(ue,Te.subjects,Os.teacher_subjects),Te.subjects.length===0?pr():W(Te.subjects);else throw new Error(Te.message||"Failed to load teacher data")}catch(ge){E(ge.message||"Failed to load teacher data"),console.error("Error loading teacher data:",ge)}finally{_(!1)}},[t?.teacher_id,t?.id]),W=ge=>{console.log("Showing main cabinet with subjects:",ge),s(ge)},V=ge=>{console.log("Displaying grade buttons:",ge),l(ge)},L=async()=>{try{if(_(!0),E(null),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.error("No valid admin session found in loadAdminData, redirecting to login"),E("No valid admin session found");return}await Promise.all([me(),Fe(),ne()])}catch(ge){E(ge.message||"Failed to load admin data"),console.error("Error loading admin data:",ge)}finally{_(!1)}},H=ge=>{console.log(" populateStudentInfoDirectly called with:",ge);try{r(ge),console.log(" Set student profile:",ge)}catch(ue){console.error("Error populating student info:",ue)}},J=ge=>{console.log("=== populateStudentInfo called ==="),r(ge)},Q=ge=>{console.log("=== populateTeacherInfo called ==="),r(ge)},ne=C.useCallback(async()=>{try{_(!0);const ge="admin_users_",ue=ms(ge);if(ue){d(ue),Z(ue);return}const we=await ts.getAllUsers();if(we.success)d(we.users),Z(we.users),ys(ge,we.users,Os.admin_users);else throw new Error(we.message||"Failed to load users")}catch(ge){E(ge.message||"Failed to load users"),console.error("Error loading users:",ge)}finally{_(!1)}},[]),Z=ge=>{console.log("Displaying all users:",ge),d(ge)},se=(ge,ue)=>{console.log("Displaying users table:",ge,ue),d(ge)},ce=()=>{console.log("Toggling users content")},he=()=>{console.log("Showing add user form"),A(!0)},Ee=()=>{console.log("Hiding add user form"),A(!1)},ie=ge=>{console.log("Editing user row:",ge);const ue=u.find(we=>we.id===ge);G(ue)},me=C.useCallback(async()=>{try{const ge="admin_teachers_",ue=ms(ge);if(ue){g(ue),Ne(ue);return}const we=await ts.getAllTeachers();if(we.success)g(we.teachers),Ne(we.teachers),ys(ge,we.teachers,Os.admin_teachers);else throw new Error(we.message||"Failed to load teachers")}catch(ge){E(ge.message||"Failed to load teachers"),console.error("Error loading teachers:",ge)}},[]),Ne=ge=>{console.log("Displaying all teachers:",ge),g(ge)},Oe=(ge,ue)=>{console.log("Displaying teachers table:",ge,ue),g(ge)},Re=()=>{console.log("Toggling teachers content")},ze=()=>{console.log("Showing add teacher form"),j(!0)},Nt=()=>{console.log("Hiding add teacher form"),j(!1)},et=ge=>{console.log("Editing teacher:",ge);const ue=f.find(we=>we.id===ge);re(ue)},Me=ge=>{console.log("Editing teacher row:",ge);const ue=f.find(we=>we.id===ge);re(ue)},Fe=C.useCallback(async()=>{try{const ge="admin_subjects_",ue=ms(ge);if(ue){x(ue),Ke(ue);return}const we=await ts.getAllSubjects();if(we.success)x(we.subjects),Ke(we.subjects),ys(ge,we.subjects,Os.admin_subjects);else throw new Error(we.message||"Failed to load subjects")}catch(ge){E(ge.message||"Failed to load subjects"),console.error("Error loading subjects:",ge)}},[]),Ke=ge=>{console.log("Displaying all subjects:",ge),x(ge)},xt=(ge,ue)=>{console.log("Displaying subjects table:",ge,ue),x(ge)},ut=()=>{console.log("Toggling subjects content")},At=()=>{console.log("Showing add subject form"),R(!0)},Dt=()=>{console.log("Hiding add subject form"),R(!1)},Qe=ge=>{console.log("Editing subject row:",ge);const ue=p.find(we=>we.id===ge);ee(ue)},tt=ge=>{console.log("Displaying academic year:",ge),v(ge)},vt=()=>{console.log("Showing add academic year form")},gt=()=>{console.log("Hiding add academic year form")},_t=ge=>{console.log("Handling add academic year:",ge)},Wt=()=>{console.log("Toggling academic year content")},Zt=()=>{console.log("Showing academic year editor")},pr=()=>{console.log("Showing subject selection")},Ir=()=>{console.log("Showing main cabinet")},br=ge=>{r(ue=>({...ue,...ge}))},xr=()=>{r(null),s([]),i([]),l([]),d([]),g([]),x([]),v([]),E(null)},er=C.useCallback(ge=>{xr(),ge&&_j(ge)},[]),_r={userProfile:t,userSubjects:n,userClasses:a,userGrades:o,allUsers:u,allTeachers:f,allSubjects:p,academicYears:y,isLoading:T,error:b,showUserForm:k,showTeacherForm:P,showSubjectForm:O,editingUser:M,editingTeacher:K,editingSubject:Y,loadStudentData:B,displayStudentSubjects:z,populateStudentInfoDirectly:H,populateStudentInfo:J,loadTeacherData:I,showMainCabinetWithSubjects:W,displayGradeButtons:V,populateTeacherInfo:Q,showSubjectSelection:pr,showMainCabinet:Ir,loadAdminData:L,getAllUsers:ne,displayAllUsers:Z,displayUsersTable:se,toggleUsersContent:ce,showAddUserForm:he,hideAddUserForm:Ee,editUserRow:ie,loadAllTeachers:me,displayAllTeachers:Ne,displayTeachersTable:Oe,toggleTeachersContent:Re,showAddTeacherForm:ze,hideAddTeacherForm:Nt,editTeacher:et,editTeacherRow:Me,loadAllSubjects:Fe,displayAllSubjects:Ke,displaySubjectsTable:xt,toggleSubjectsContent:ut,showAddSubjectForm:At,hideAddSubjectForm:Dt,editSubjectRow:Qe,displayAcademicYear:tt,showAddAcademicYearForm:vt,hideAddAcademicYearForm:gt,handleAddAcademicYear:_t,toggleAcademicYearContent:Wt,showAcademicYearEditor:Zt,updateUserProfile:br,clearUserData:xr,clearUserDataWithCache:er,setUserProfile:r,setUserSubjects:s,setUserClasses:i,setUserGrades:l,setAllUsers:d,setAllTeachers:g,setAllSubjects:x,setAcademicYears:v,setError:E};return c.jsx(EV.Provider,{value:_r,children:e})},rS=()=>{const e=C.useContext(EV);if(!e)throw new Error("useUser must be used within a UserProvider");return e},ox={STUDENT_LOGIN:"/.netlify/functions/student-login",TEACHER_LOGIN:"/.netlify/functions/teacher-login",ADMIN_LOGIN:"/.netlify/functions/admin-login",CHANGE_PASSWORD:"/.netlify/functions/change-password",GET_TEST_QUESTIONS:"/.netlify/functions/get-test-questions",SUBMIT_MULTIPLE_CHOICE_TEST:"/.netlify/functions/submit-multiple-choice-test",SUBMIT_TRUE_FALSE_TEST:"/.netlify/functions/submit-true-false-test",SUBMIT_INPUT_TEST:"/.netlify/functions/submit-input-test",SUBMIT_MATCHING_TEST:"/.netlify/functions/submit-matching-test",SUBMIT_DRAWING_TEST:"/.netlify/functions/submit-drawing-test",GET_STUDENT_SUBJECTS:"/.netlify/functions/get-student-subjects",GET_TEACHER_SUBJECTS:"/.netlify/functions/get-teacher-subjects",GET_ALL_USERS:"/.netlify/functions/get-all-users",GET_ALL_TEACHERS:"/.netlify/functions/get-all-teachers",GET_ALL_SUBJECTS:"/.netlify/functions/get-all-subjects",GET_ACADEMIC_YEAR:"/.netlify/functions/get-academic-year",SAVE_MULTIPLE_CHOICE_TEST:"/.netlify/functions/save-multiple-choice-test",SAVE_TRUE_FALSE_TEST:"/.netlify/functions/save-true-false-test",SAVE_INPUT_TEST:"/.netlify/functions/save-input-test",SAVE_MATCHING_TEST:"/.netlify/functions/save-matching-test",SAVE_DRAWING_TEST:"/.netlify/functions/save-drawing-test",UPDATE_DRAWING_TEST_SCORE:"/.netlify/functions/update-drawing-test-score",UPDATE_SPEAKING_TEST_SCORE:"/.netlify/functions/update-speaking-test-score",ASSIGN_TEST_TO_CLASSES:"/.netlify/functions/assign-test-to-classes",GET_TEACHER_ACTIVE_TESTS:"/.netlify/functions/get-teacher-active-tests",GET_STUDENT_ACTIVE_TESTS:"/.netlify/functions/get-student-active-tests"},Fn={MULTIPLE_CHOICE:"multiple_choice",TRUE_FALSE:"true_false",INPUT:"input",MATCHING:"matching_type",WORD_MATCHING:"word_matching",DRAWING:"drawing",FILL_BLANKS:"fill_blanks"},Gi={STUDENT:"student",TEACHER:"teacher",ADMIN:"admin"};Array.from({length:10},(e,t)=>t+1);const bf={DEBUG_MODE:!1,NOTIFICATION_DURATION:3e3},gf=(e,t,r)=>{if(!e||!Array.isArray(e)||e.length===0)return{score:0,total:0,percentage:0};let n=0;return e.forEach((s,a)=>{const i=Array.isArray(t)?t[a]:t[String(s.question_id||s.id||a)];i!=null&&_p(s,i,r)&&n++}),{score:n,total:e.length,percentage:Math.round(n/e.length*100)}},gv=(e,t)=>{console.log(" Getting correct answer for question:",e,"testType:",t);let r="";switch(t){case Fn.TRUE_FALSE:r=e.correct_answer?"true":"false",console.log(" TRUE_FALSE correct_answer from question:",r,typeof r);break;case Fn.MULTIPLE_CHOICE:const n=e.correct_answer.charCodeAt(0)-65,s=`option_${String.fromCharCode(97+n)}`,a=e[s];a?r=a:r=`Option ${e.correct_answer}`;break;case Fn.INPUT:e.correct_answers&&Array.isArray(e.correct_answers)?r=e.correct_answers.join(", "):r=e.correct_answer||"Unknown";break;case Fn.MATCHING:r=e.correct_answer||e.answer;break;case Fn.WORD_MATCHING:r=e.correct_answer||e.answer;break;case Fn.DRAWING:r="Drawing required";break;case Fn.FILL_BLANKS:e.correct_answers&&Array.isArray(e.correct_answers)&&e.correct_answers.length>0?r=e.correct_answers[0]:r=e.correct_answer||"Unknown";break;default:r="Unknown"}return console.log(" Correct answer:",r),r},_p=(e,t,r)=>{if(console.log("[DEBUG] checkAnswerCorrectness called for question:",e,"studentAnswer:",t,"testType:",r),!t||t==="")return console.log("[DEBUG] No student answer provided"),!1;let n=!1;switch(r){case Fn.TRUE_FALSE:n=t.toLowerCase()==="true"===e.correct_answer;break;case Fn.MULTIPLE_CHOICE:let a="";if(typeof t=="string"){const o=t.trim();if(/^[a-z]$/i.test(o))a=o.toUpperCase();else if(/^\d+$/.test(o)){const l=parseInt(o,10),u=l>=0?l:NaN;Number.isNaN(u)||(a=String.fromCharCode(65+u))}}else if(typeof t=="number"){const o=t;Number.isNaN(o)||(a=String.fromCharCode(65+o))}n=a!==""&&a===String(e.correct_answer||"").toUpperCase();break;case Fn.INPUT:if(e.correct_answers&&Array.isArray(e.correct_answers)){const o=t.replace(/[.,/*';:!@#$%^&*()_+=\[\]{}|\\:";'<>?,.\s-]+/g,"").toLowerCase().trim();n=e.correct_answers.some(l=>{const u=l.replace(/[.,/*';:!@#$%^&*()_+=\[\]{}|\\:";'<>?,.\s-]+/g,"").toLowerCase().trim();return o===u})}else n=t.toLowerCase().trim()===e.correct_answer.toLowerCase().trim();break;case Fn.MATCHING:if(e.correct_answer&&typeof e.correct_answer=="object"){const o=typeof t=="string"?JSON.parse(t||"{}"):t;n=JSON.stringify(o)===JSON.stringify(e.correct_answer)}break;case Fn.WORD_MATCHING:if(e.correct_answer&&typeof e.correct_answer=="object"){const o=typeof t=="string"?JSON.parse(t||"{}"):t;n=JSON.stringify(o)===JSON.stringify(e.correct_answer)}break;case Fn.DRAWING:console.warn("Drawing tests should not be auto-scored!"),n=!1;break;case Fn.FILL_BLANKS:const i=e.correct_answers&&Array.isArray(e.correct_answers)&&e.correct_answers.length>0?e.correct_answers[0]:e.correct_answer;if(i&&t){let o="";if(typeof t=="string"){const l=t.trim();if(/^[a-z]$/i.test(l))o=l.toUpperCase();else if(/^\d+$/.test(l)){const u=parseInt(l,10),d=u>=0?u:NaN;Number.isNaN(d)||(o=String.fromCharCode(65+d))}}else if(typeof t=="number"){const l=t;Number.isNaN(l)||(o=String.fromCharCode(65+l))}n=o!==""&&o===String(i||"").toUpperCase()}break;default:console.warn(`[WARN] Unknown test type for answer checking: ${r}`),n=!1}return console.log(`[DEBUG] Answer correctness: ${n}`),n};class zue{constructor(){this.academicCalendar=null,this.loaded=!1}async loadAcademicCalendar(){if(this.loaded)return this.academicCalendar;try{const t=async n=>{const s=await fetch(n,{headers:{Accept:"application/json"},credentials:"include"}),a=s.headers&&s.headers.get&&s.headers.get("content-type")||"";if(!s.ok)throw new Error(`HTTP ${s.status}`);if(!a.includes("application/json"))throw new Error("Non-JSON response");return await s.json()};let r=null;if(r=await t("/academic_year.json"),!Array.isArray(r))throw new Error("Invalid academic calendar format");return this.academicCalendar=r,this.loaded=!0,console.log(" Academic calendar loaded:",this.academicCalendar.length,"terms"),this.academicCalendar}catch(t){return console.error(" Error loading academic calendar:",t),null}}getCurrentTerm(){if(!this.academicCalendar)return null;const t=new Date;return this.academicCalendar.find(n=>{const s=new Date(n.start_date),a=new Date(n.end_date);return t>=s&&t<=a})}getCurrentSemester(){const t=this.getCurrentTerm();if(!t)return null;const r=t.semester,n=this.academicCalendar.filter(s=>s.semester===r&&s.academic_year===t.academic_year);return{semester:r,currentTerm:t,allTerms:n}}getCurrentAcademicPeriodId(){return this.getCurrentTerm()?.id||null}getSemesterTerms(t){return this.academicCalendar?this.academicCalendar.filter(r=>r.semester===t):[]}getAcademicYearTerms(t){return this.academicCalendar?this.academicCalendar.filter(r=>r.academic_year===t):[]}getCurrentSemesterWithTerms(){const t=this.getCurrentSemester();if(!t)return null;const{semester:r,currentTerm:n,allTerms:s}=t;return{semester:r,currentTerm:n,allTerms:s,terms:s.map(a=>({id:a.id,term:a.term,start_date:a.start_date,end_date:a.end_date,isCurrent:a.id===n.id,label:`Term ${a.term}${a.id===n.id?" (Current)":""}`}))}}getCurrentSemesterTerms(){const t=this.getCurrentSemester();if(!t)return null;const{semester:r,currentTerm:n,allTerms:s}=t;return{semester:r,currentTerm:n,terms:s.map(a=>({id:a.id,term:a.term,start_date:a.start_date,end_date:a.end_date,isCurrent:a.id===n.id,label:`Term ${a.term}${a.id===n.id?" (Current)":""}`}))}}getTermById(t){return this.academicCalendar?this.academicCalendar.find(r=>r.id===t):null}isCurrentTerm(t){return this.getCurrentTerm()?.id===t}getAcademicYears(){return this.academicCalendar?[...new Set(this.academicCalendar.map(r=>r.academic_year))].sort():[]}getAcademicYearSemesterTerms(t,r){return this.academicCalendar?this.academicCalendar.filter(n=>n.academic_year===t&&n.semester===r):[]}}const nc=new zue,nS=Object.freeze(Object.defineProperty({__proto__:null,academicCalendarService:nc},Symbol.toStringTag,{value:"Module"})),yn={async getTestInfo(e,t){console.log(`[DEBUG] getTestInfo called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test info from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test info data received:",s),s.success)return console.log("[DEBUG] Test info retrieved successfully"),s.test_info;throw new Error(s.error||"Failed to get test info")}catch(r){throw console.error("[ERROR] Failed to get test info:",r),r}},async getTestQuestions(e,t){console.log(`[DEBUG] getTestQuestions called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test questions from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test questions data received:",s),s.success)return console.log("[DEBUG] Test questions retrieved successfully"),s.questions;throw new Error(s.error||"Failed to get test questions")}catch(r){throw console.error("[ERROR] Failed to get test questions:",r),r}},async getActiveTests(){console.log("getActiveTests called - extracting studentId from JWT token");try{const e="/.netlify/functions/get-student-active-tests";console.log("[DEBUG] Fetching active tests from:",e);const t=await window.tokenManager.makeAuthenticatedRequest(e);if(console.log("[DEBUG] Response status:",t.status),!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(console.log("[DEBUG] Active tests data received:",r),r.success)return console.log("[DEBUG] Active tests retrieved successfully"),r.tests;throw new Error(r.error||"Failed to get active tests")}catch(e){throw console.error("[ERROR] Failed to get active tests:",e),e}},async getTeacherTests(){console.log("getTeacherTests called - extracting teacherId from JWT token");try{const e="/.netlify/functions/get-teacher-active-tests";console.log("[DEBUG] Fetching teacher tests from:",e);const t=await window.tokenManager.makeAuthenticatedRequest(e);if(console.log("[DEBUG] Response status:",t.status),!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(console.log("[DEBUG] Teacher tests data received:",r),r.success)return console.log("[DEBUG] Teacher tests retrieved successfully"),r.tests;throw new Error(r.error||"Failed to get teacher tests")}catch(e){throw console.error("[ERROR] Failed to get teacher tests:",e),e}},async submitTest(e,t,r,n={},s=null){console.log("Submitting test:",{testType:e,testId:t});try{if(Object.keys(r).length===0)throw new Error("Please answer at least one question before submitting.");let a;try{const E=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`)).json();if(E.success)a=E.test_info;else throw new Error("Failed to get test information")}catch(b){console.error("Error getting test info:",b);const E=await this.getTestQuestions(e,t);a={test_name:`Test ${t}`,num_questions:E.length}}const i=await this.getTestQuestions(e,t);let o,l;if(e==="drawing")o=null,l=null;else{const b=n?.answers_by_id?n.answers_by_id:r;o=gf(i,b,e).score,l=a.num_questions}const u=this.transformAnswersForSubmission(r,e),d=a.teacher_id||null,f=a.subject_id||null,g=s?.student_id||s?.id||(window.tokenManager?.getCurrentUser?window.tokenManager.getCurrentUser()?.student_id||window.tokenManager.getCurrentUser()?.id:null);await nc.loadAcademicCalendar();const x=nc.getCurrentTerm()?.id;if(!x)throw new Error("No current academic period found");const y={test_id:t,test_name:a.test_name,test_type:e,teacher_id:d,subject_id:f,student_id:g,academic_period_id:x,answers:u,score:o,maxScore:l,time_taken:n.time_taken||null,started_at:n.started_at||null,submitted_at:n.submitted_at||new Date().toISOString(),caught_cheating:n.caught_cheating||!1,visibility_change_times:n.visibility_change_times||0,answers_by_id:n.answers_by_id||null,question_order:n.question_order||null,retest_assignment_id:n.retest_assignment_id||null,parent_test_id:n.parent_test_id||t};console.log(" testService retest_assignment_id:",n.retest_assignment_id),console.log(" testService timingData:",n),console.log(" testService commonData.retest_assignment_id:",y.retest_assignment_id);let v;switch(e){case"multiple_choice":v="/.netlify/functions/submit-multiple-choice-test";break;case"true_false":v="/.netlify/functions/submit-true-false-test";break;case"input":v="/.netlify/functions/submit-input-test";break;case"matching_type":v="/.netlify/functions/submit-matching-type-test";break;case"word_matching":v="/.netlify/functions/submit-word-matching-test";break;case"drawing":v="/.netlify/functions/submit-drawing-test";break;case"fill_blanks":v="/.netlify/functions/submit-fill-blanks-test";break;default:throw new Error(`Unsupported test type: ${e}`)}console.log("Submitting to:",v),console.log("Submission data:",y),console.log("Submission data JSON:",JSON.stringify(y,null,2)),console.log(" Final submission retest_assignment_id:",y.retest_assignment_id);const T=await window.tokenManager.makeAuthenticatedRequest(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!T.ok)throw new Error(`HTTP error! status: ${T.status}`);const _=await T.json();if(console.log("Test submission result:",_),_.success)return this.clearTestProgress(e,t),{success:!0,score:o,maxScore:l,result:_};throw new Error(_.error||"Failed to submit test")}catch(a){throw console.error("Error submitting test:",a),a}},async createTest(e){try{return(await Cs.post("/tests/create",e)).data}catch(t){throw new Error(t.message||"Failed to create test")}},async updateTest(e,t,r){try{return(await Cs.put(`/tests/${e}/${t}`,r)).data}catch(n){throw new Error(n.message||"Failed to update test")}},async deleteTest(e,t){try{return(await Cs.delete(`/tests/${e}/${t}`)).data}catch(r){throw new Error(r.message||"Failed to delete test")}},async duplicateTest(e,t){try{return(await Cs.post(`/tests/${e}/${t}/duplicate`)).data}catch(r){throw new Error(r.message||"Failed to duplicate test")}},async publishTest(e,t){try{return(await Cs.post(`/tests/${e}/${t}/publish`)).data}catch(r){throw new Error(r.message||"Failed to publish test")}},async unpublishTest(e,t){try{return(await Cs.post(`/tests/${e}/${t}/unpublish`)).data}catch(r){throw new Error(r.message||"Failed to unpublish test")}},async removeClassAssignment(e,t,r){try{return(await Cs.delete(`/tests/${e}/${t}/assignments/${r}`)).data}catch(n){throw new Error(n.message||"Failed to remove class assignment")}},async getTestStatistics(e,t){try{return(await Cs.get(`/tests/${e}/${t}/statistics`)).data}catch(r){throw new Error(r.message||"Failed to get test statistics")}},async exportTest(e,t,r="json"){try{return(await Cs.get(`/tests/${e}/${t}/export?format=${r}`)).data}catch(n){throw new Error(n.message||"Failed to export test")}},async importTest(e,t){try{return(await Cs.uploadFile(`/tests/import?type=${t}`,e)).data}catch(r){throw new Error(r.message||"Failed to import test")}},async getTestResults(e,t){try{return(await Cs.get(`/tests/${e}/${t}/results`)).data}catch(r){throw new Error(r.message||"Failed to get test results")}},async getStudentTestResults(){try{console.log("[DEBUG] Fetching student test results from: /.netlify/functions/get-student-test-results");const e=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-student-test-results");if(console.log("[DEBUG] Response status:",e.status),!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();if(console.log("[DEBUG] Student test results data received:",t),t.success)return console.log("[DEBUG] Student test results retrieved successfully"),t;throw new Error(t.error||"Failed to get student test results")}catch(e){throw console.error("[ERROR] Failed to get student test results:",e),new Error(e.message||"Failed to get student test results")}},async getClassResults(e,t,r){try{return(await Cs.get(`/tests/class-results/${e}/${t}/${r}`)).data}catch(n){throw new Error(n.message||"Failed to get class results")}},async saveTestProgress(e,t,r){try{return(await Cs.post(`/tests/${e}/${t}/progress`,{progress:r})).data}catch(n){throw new Error(n.message||"Failed to save test progress")}},async getTestProgress(e,t){try{return(await Cs.get(`/tests/${e}/${t}/progress`)).data}catch(r){throw new Error(r.message||"Failed to get test progress")}},async clearTestProgress(e,t){try{return(await Cs.delete(`/tests/${e}/${t}/progress`)).data}catch(r){throw new Error(r.message||"Failed to clear test progress")}},async validateTestData(e){try{return(await Cs.post("/tests/validate",e)).data}catch(t){throw new Error(t.message||"Failed to validate test data")}},async getTestPreview(e,t){try{return(await Cs.get(`/tests/${e}/${t}/preview`)).data}catch(r){throw new Error(r.message||"Failed to get test preview")}},isAnswerCorrect(e,t,r,n){switch(n){case"multiple_choice":return String.fromCharCode(65+parseInt(t))===r.correct_answer;case"true_false":return t.toLowerCase()==="true"===r.correct_answer;case"input":return(r.correct_answers||[]).some(o=>t.toLowerCase().trim()===o.toLowerCase().trim());case"matching_type":return JSON.stringify(t)===JSON.stringify(r.correct_answer);case"word_matching":return JSON.stringify(t)===JSON.stringify(r.correct_answer);case"drawing":return t&&t!=="No answer";default:return!1}},transformAnswersForSubmission(e,t){switch(t){case"multiple_choice":return e;case"true_false":return e;case"input":return e;case"matching_type":return e;case"word_matching":return e;case"drawing":if(Array.isArray(e)&&e.length>0)try{const r=e[0];return typeof r=="string"&&r.startsWith("[")?JSON.parse(r):e}catch(r){return console.warn("Failed to parse drawing answers:",r),e}return e;default:return e}},async markTestCompleted(e,t){try{console.log(`[DEBUG] markTestCompleted called with testType: ${e}, testId: ${t}`);const r=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/mark-test-completed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_type:e,test_id:t})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();if(console.log("[DEBUG] Mark test completed response:",n),n.success)return console.log(`Test ${e}_${t} marked as completed successfully`),{success:!0,message:n.message};throw new Error(n.error||"Failed to mark test as completed")}catch(r){throw console.error("Error marking test completed:",r),r}},clearTestProgress(e,t){try{const r=`test_progress_${e}_${t}`;localStorage.removeItem(r),console.log(`Test progress cleared for ${e}_${t}`)}catch(r){console.error("Error clearing test progress:",r)}},async saveMultipleChoiceTest(e){console.log("[DEBUG] saveMultipleChoiceTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-multiple-choice-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save multiple choice test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving multiple choice test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveTrueFalseTest(e){console.log("[DEBUG] saveTrueFalseTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-true-false-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save true/false test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving true/false test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveInputTest(e){console.log("[DEBUG] saveInputTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-input-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save input test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving input test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveMatchingTest(e){console.log("[DEBUG] saveMatchingTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,test_type:"matching_type",num_questions:e.num_blocks})})).json();return console.log("[DEBUG] Save matching test response:",r),r.success?{success:!0,test_id:r.test_id,message:r.message,assignments_count:r.assignments_count}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving matching test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveWordMatchingTest(e){console.log("[DEBUG] saveWordMatchingTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,test_type:"word_matching"})})).json();return console.log("[DEBUG] Save word matching test response:",r),r.success?{success:!0,test_id:r.test_id,message:r.message,assignments_count:r.assignments_count}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving word matching test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveDrawingTest(e){console.log("[DEBUG] saveDrawingTest called with:",e);try{const t={...e,test_type:"drawing"},n=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();return console.log("[DEBUG] Save drawing test response:",n),n.success?{success:!0,data:{test_id:n.test_id}}:{success:!1,message:n.message||"Failed to save test"}}catch(t){return console.error("Error saving drawing test:",t),{success:!1,message:"Error saving test: "+t.message}}},async getDrawingTest(e){console.log("[DEBUG] getDrawingTest called with testId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-drawing-test?test_id=${e}`,{method:"GET"})).json();return console.log("[DEBUG] Get drawing test response:",r),r.success?{success:!0,data:r.data}:{success:!1,message:r.message||"Failed to get test"}}catch(t){return console.error("Error getting drawing test:",t),{success:!1,message:"Error getting test: "+t.message}}},async submitDrawingTest(e,t,r,n){console.log("[DEBUG] submitDrawingTest called with:",{testId:e,answers:t,timeTaken:r,antiCheatingData:n});try{const a=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/submit-drawing-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e,answers:t,time_taken:r,caught_cheating:n?.caught_cheating||!1,visibility_change_times:n?.visibility_change_times||0})})).json();return console.log("[DEBUG] Submit drawing test response:",a),a.success?{success:!0,data:a.data}:{success:!1,message:a.message||"Failed to submit test"}}catch(s){return console.error("Error submitting drawing test:",s),{success:!1,message:"Error submitting test: "+s.message}}},async updateDrawingTestScore(e,t,r){console.log("[DEBUG] updateDrawingTestScore called with:",{resultId:e,score:t,maxScore:r});try{const s=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-drawing-test-score",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({result_id:e,score:t,max_score:r})})).json();return console.log("[DEBUG] Update drawing test score response:",s),s.success?{success:!0,data:s.data}:{success:!1,message:s.message||"Failed to update score"}}catch(n){return console.error("Error updating drawing test score:",n),{success:!1,message:"Error updating score: "+n.message}}},async getWordMatchingTest(e){console.log("[DEBUG] getWordMatchingTest called with testId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-word-matching-test?test_id=${e}`,{method:"GET"})).json();return console.log("[DEBUG] Get word matching test response:",r),r.success?{success:!0,data:r.data}:{success:!1,message:r.message||"Failed to get test"}}catch(t){return console.error("Error getting word matching test:",t),{success:!1,message:"Error getting test: "+t.message}}},async submitWordMatchingTest(e,t,r,n){console.log("[DEBUG] submitWordMatchingTest called with:",{testId:e,answers:t,timeTaken:r,antiCheatingData:n});try{const a=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/submit-word-matching-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e,answers:t,time_taken:r,caught_cheating:n?.caught_cheating||!1,visibility_change_times:n?.visibility_change_times||0})})).json();return console.log("[DEBUG] Submit word matching test response:",a),a.success?{success:!0,result:a.result}:{success:!1,message:a.message||"Failed to submit test"}}catch(s){return console.error("Error submitting word matching test:",s),{success:!1,message:"Error submitting test: "+s.message}}},async assignTestToClasses(e){console.log("[DEBUG] assignTestToClasses called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save test with assignments response:",r),r.success?{success:!0,message:"Test assigned successfully"}:{success:!1,message:r.message||"Failed to assign test"}}catch(t){return console.error("Error assigning test to classes:",t),{success:!1,message:"Error assigning test: "+t.message}}},async removeClassAssignment(e){console.log("[DEBUG] removeClassAssignment called with assignmentId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/remove-class-assignment?assignment_id=${e}`,{method:"DELETE"})).json();return console.log("[DEBUG] Remove class assignment response:",r),r.success?{success:!0,message:"Assignment removed successfully"}:{success:!1,message:r.message||"Failed to remove assignment"}}catch(t){return console.error("Error removing class assignment:",t),{success:!1,message:"Error removing assignment: "+t.message}}}},AV=C.createContext(),jV=({children:e})=>{const[t,r]=C.useState(null),[n,s]=C.useState([]),[a,i]=C.useState({}),[o,l]=C.useState({}),[u,d]=C.useState(!1),[f,g]=C.useState(null),[p,x]=C.useState([]),[y,v]=C.useState(!1),[T,_]=C.useState(null),[b,E]=C.useState({isOpen:!1,testType:null,testId:null,testName:null,questions:[]}),[k,A]=C.useState(null),[P,j]=C.useState(0),{getItem:O,setItem:R,removeItem:M}=CV();C.useEffect(()=>{let ge;return u&&k&&(ge=setInterval(()=>{const ue=Math.floor((Date.now()-k)/1e3);j(ue)},1e3)),()=>{ge&&clearInterval(ge)}},[u,k]);const G=async(ge,ue)=>{try{v(!0),_(null),console.log(`[DEBUG] loadTestForPage called with testType: ${ge}, testId: ${ue}`);const we=await yn.getTestInfo(ge,ue);console.log("[DEBUG] Test info retrieved:",we);const Te=await yn.getTestQuestions(ge,ue);console.log("[DEBUG] Test questions retrieved:",Te),r({...we,testType:ge,testId:ue}),s(Te),d(!0),A(Date.now()),j(0),K(ge,ue),console.log("[DEBUG] Test loaded successfully")}catch(we){_(we.message||"Failed to load test"),console.error("Error loading test:",we)}finally{v(!1)}},K=(ge,ue)=>{try{const we=`test_progress_${ge}_${ue}`,Te=O(we);Te&&(i(Te.answers||{}),l(Te.progress||{}))}catch(we){console.error("Error loading saved progress:",we)}},re=(ge,ue,we,Te)=>{try{if(window.tokenManager&&!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot save progress: No valid JWT token");return}const Ct=`test_progress_${window.tokenManager?.getDecodedToken()?.sub||"unknown"}_${ge}_${ue}`,Pt={...a,[we]:Te},Ue={...o,[we]:{answered:!0,timestamp:Date.now()}};i(Pt),l(Ue),R(Ct,{answers:Pt,progress:Ue,lastSaved:Date.now()}),console.log(`Saved progress for question ${we}:`,Te)}catch(Xe){console.error("Error saving test progress:",Xe)}},Y=(ge,ue,we)=>{try{if(window.tokenManager&&!window.tokenManager.isAuthenticated())return console.warn("[WARN] Cannot get progress: No valid JWT token"),null;const Xe=`test_progress_${window.tokenManager?.getDecodedToken()?.sub||"unknown"}_${ge}_${ue}`;return O(Xe)?.answers?.[we]||null}catch(Te){return console.error("Error getting test progress:",Te),null}},ee=(ge,ue)=>{try{if(console.log(`[DEBUG] clearTestProgress called with testType: ${ge}, testId: ${ue}`),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot clear progress: No valid JWT token");return}const we=window.tokenManager?.getDecodedToken()?.sub||"unknown",Te=`test_progress_${we}_${ge}_${ue}`;console.log(`[DEBUG] Removing localStorage key: ${Te}`);const Xe=O(Te)!==null;M(Te),i({}),l({});for(let Ct=0;Ct<localStorage.length;Ct++){const Pt=localStorage.key(Ct);Pt&&Pt.startsWith(`test_progress_${we}_${ge}_${ue}_`)&&(localStorage.removeItem(Pt),console.log(`[DEBUG] Cleared individual question key: ${Pt}`))}console.log(Xe?`[DEBUG] Progress cleared for test ${ge}_${ue}`:`[DEBUG] No progress found to clear for test ${ge}_${ue}`)}catch(we){console.error("Error clearing test progress:",we)}},B=async(ge,ue,we="")=>{try{v(!0),_(null),console.log("Submitting test:",{testType:ge,testId:ue});const Te=ne(ge,ue);if(Object.keys(Te).length===0){_("Please answer at least one question before submitting.");return}let Xe;try{Xe=await yn.getTestInfo(ge,ue)}catch(Gt){console.error("Error getting test info:",Gt);const mr=await yn.getTestQuestions(ge,ue);Xe={test_name:`Test ${ue}`,num_questions:mr.length}}const Ct=await yn.getTestQuestions(ge,ue),Pt=gf(Ct,Te,ge),Ue=Xe.num_questions,ft=se(Te,ge),ot={test_id:ue,test_name:Xe.test_name,score:Pt,maxScore:Ue,answers:ft},Ht=await yn.submitTest(ge,ue,ot);if(Ht.success){if(g(Ht.result),V(ge,ue,we),ee(ge,ue),we){const Gt=`student_results_table_${we}`;ge!=="drawing"?(console.log(" TestContext: Caching test results after submission with key:",Gt),ys(Gt,Ht.result,Os.student_results_table)):console.log(" TestContext: Skipping cache for drawing test submission (teacher-scored).")}return we&&Yp(we,ge,ue),d(!1),Ht.results}else throw new Error(Ht.message||"Test submission failed")}catch(Te){throw _(Te.message||"Failed to submit test"),Te}finally{v(!1)}},z=(ge,ue,we)=>{g({testType:ge,testId:ue,answers:we}),d(!1)},I=()=>{r(null),s([]),i({}),l({}),d(!1),g(null),_(null),A(null),j(0)},W=(ge,ue,we="")=>{try{const Te=`test_completed_${we}_${ge}_${ue}`;return O(Te)===!0}catch(Te){return console.error("Error checking test completion:",Te),!1}},V=(ge,ue,we="")=>{try{const Te=`test_completed_${we}_${ge}_${ue}`;R(Te,!0)}catch(Te){console.error("Error marking test completed:",Te)}},L=ge=>Object.keys(a).length,H=()=>{const ge=L(t?.testType),ue=n.length;return{canSubmit:ge===ue,answeredCount:ge,totalQuestions:ue}},J=()=>{t&&ee(t.testType,t.testId),I()},Q=(ge="")=>{try{const ue=`student_results_table_${ge}`;console.log(" TestContext: Clearing test results cache:",ue),localStorage.removeItem(ue),console.log(" TestContext: Test results cache cleared")}catch(ue){console.error("Error clearing test results cache:",ue)}},ne=(ge,ue)=>({...a}),Z=(ge,ue,we=null)=>{try{if(!ge)return"No answer";switch(ue){case"true_false":return ge?"True":"False";case"multiple_choice":if(we&&typeof ge=="string"&&!isNaN(parseInt(ge))){const Te=parseInt(ge),Xe=`option_${String.fromCharCode(97+Te)}`,Ct=we[Xe];if(Ct)return Ct}return String(ge).toUpperCase();case"input":return String(ge);case"matching_type":return typeof ge=="object"?Object.entries(ge).map(([Te,Xe])=>`${Te}  ${Xe}`).join(", "):String(ge);case"word_matching":return typeof ge=="object"?Object.entries(ge).map(([Te,Xe])=>`${Te}  ${Xe}`).join(", "):String(ge);case"drawing":return"Drawing submitted";default:return String(ge)}}catch(Te){return console.error("Error formatting student answer:",Te),"Error displaying answer"}},se=(ge,ue)=>{try{if(!ge||typeof ge!="object")return{};const we={};return Object.entries(ge).forEach(([Te,Xe])=>{if(Xe!=null)switch(ue){case"true_false":we[Te]=!!Xe;break;case"multiple_choice":we[Te]=String(Xe).toUpperCase();break;case"input":we[Te]=String(Xe).trim();break;case"matching_type":typeof Xe=="object"?we[Te]=Xe:we[Te]=String(Xe);break;case"word_matching":typeof Xe=="object"?we[Te]=Xe:we[Te]=String(Xe);break;case"drawing":we[Te]=Xe;break;default:we[Te]=Xe}}),we}catch(we){return console.error("Error transforming answers for submission:",we),ge||{}}},ce=C.useCallback(async(ge="")=>{try{v(!0);const ue=`student_active_tests_${ge}`,we=ms(ue);if(we)return x(we),we;const Te=await yn.getActiveTests();return x(Te),ys(ue,Te,Os.student_active_tests),Te}catch(ue){return _(ue.message||"Failed to load active tests"),x([]),[]}finally{v(!1)}},[]),he=async()=>{try{return v(!0),await yn.getTeacherTests()}catch(ge){return _(ge.message||"Failed to load teacher tests"),[]}finally{v(!1)}},Ee=async ge=>{try{return v(!0),await yn.createTest(ge)}catch(ue){throw _(ue.message||"Failed to create test"),ue}finally{v(!1)}},ie=async(ge,ue)=>{try{return v(!0),await yn.deleteTest(ge,ue)}catch(we){throw _(we.message||"Failed to delete test"),we}finally{v(!1)}},me=async(ge,ue)=>{try{return await yn.getTestInfo(ge,ue)}catch(we){throw console.error("Error getting test info:",we),we}},Ne=async(ge,ue)=>{try{return await yn.getTestQuestions(ge,ue)}catch(we){throw console.error("Error getting test questions:",we),we}},Oe=async(ge,ue,we)=>{try{console.log("Showing test results:",{testType:ge,testId:ue,studentAnswers:we});const Te=await me(ge,ue),Xe=await Ne(ge,ue);Nt(Te,Xe,ge,we),d(!1),console.log("Test results displayed successfully")}catch(Te){console.error("Error showing test results:",Te),_("Failed to display test results"),g({testType:ge,testId:ue,answers:we,showResults:!0,error:"Could not load detailed results"}),d(!1)}},Re=async(ge,ue,we)=>{try{v(!0);const Te=await me(ge,ue),Xe=await Ne(ge,ue);Nt(Te,Xe,ge,we)}catch(Te){_(Te.message||"Failed to load test results")}finally{v(!1)}},ze=C.useCallback(async(ge="")=>{try{v(!0);const ue=`student_results_table_${ge}`;console.log(" TestContext: Checking cache for key:",ue);const we=ms(ue);if(we)return console.log(" TestContext: Cache HIT! Using cached test results"),g(we),we;console.log(" TestContext: Cache MISS! Fetching from API");const Te=await yn.getStudentTestResults();return console.log(" TestContext: Test results loaded:",Te),console.log(" TestContext: Results data:",Te?.results||Te),console.log(" TestContext: Results length:",Te?.results?.length||0),g(Te),console.log(" TestContext: Caching test results with key:",ue),console.log(" TestContext: Results being cached:",Te),console.log(" TestContext: Results.results being cached:",Te.results),ys(ue,Te,Os.student_results_table),Te}catch(ue){throw console.error("Error loading test results:",ue),_(ue.message||"Failed to load test results"),ue}finally{v(!1)}},[]),Nt=(ge,ue,we,Te)=>{try{console.log("Displaying test results:",{testInfo:ge,questions:ue,testType:we,studentAnswers:Te});const Xe=gf(ue,Te,we),Ct=ge?.num_questions||ue?.length||0,Pt=Ct>0?Math.round(Xe/Ct*100):0,Ue=Pt>=60,ft=ue.map((ot,Ht)=>{const Gt=ot.question_id||ot.id,mr=Te[Gt],Vr=_p(ot,mr,we);return{questionNumber:Ht+1,question:ot.question||ot.question_text,userAnswer:Z(mr,we),correctAnswer:gv(ot,we),isCorrect:Vr,questionType:we}});g({testInfo:ge,questions:ue,testType:we,studentAnswers:Te,showResults:!0,score:Xe,totalQuestions:Ct,percentage:Pt,passed:Ue,questionAnalysis:ft,timestamp:new Date().toISOString()}),l(ot=>({...ot,score:Xe,totalQuestions:Ct,percentage:Pt,passed:Ue,lastUpdated:Date.now()})),et(),console.log(`Test results displayed: ${Xe}/${Ct} (${Pt}%) - ${Ue?"PASSED":"FAILED"}`)}catch(Xe){console.error("Error displaying test results:",Xe),_("Failed to display test results")}},et=C.useCallback(()=>{try{console.log("Setting up test results page event listeners");const ge=Ct=>{if(Ct.key==="Escape"&&J(),Ct.ctrlKey&&Ct.key==="p"&&(Ct.preventDefault(),window.print()),Ct.key==="Enter"&&f&&!f.passed){const Pt=document.getElementById("retake-test-button");Pt&&Pt.click()}},ue=()=>{window.print()},we=()=>{if(f){const Ct=`Test: ${f.testInfo?.test_name||"Test"}
Score: ${f.score}/${f.totalQuestions} (${f.percentage}%)
Status: ${f.passed?"PASSED":"FAILED"}
Completed: ${new Date(f.timestamp).toLocaleString()}`;navigator.clipboard.writeText(Ct).then(()=>{console.log("Results copied to clipboard")}).catch(Pt=>{console.error("Failed to copy results:",Pt)})}};document.addEventListener("keydown",ge);const Te=document.getElementById("print-results");Te&&Te.addEventListener("click",ue);const Xe=document.getElementById("copy-results");return Xe&&Xe.addEventListener("click",we),()=>{document.removeEventListener("keydown",ge),Te&&Te.removeEventListener("click",ue),Xe&&Xe.removeEventListener("click",we)}}catch(ge){console.error("Error setting up test results page event listeners:",ge)}},[J,f]),Me=async(ge,ue,we)=>{try{v(!0),_(null),console.log("Viewing test details:",{testType:ge,testId:ue,testName:we}),E({isOpen:!0,testType:ge,testId:ue,testName:we,questions:[],isLoading:!0});const Te=await yn.getTestQuestions(ge,ue);Te&&Te.length>0?(E({isOpen:!0,testType:ge,testId:ue,testName:we,questions:Te,isLoading:!1}),console.log(`Test details loaded: ${Te.length} questions`)):(_("Could not load test questions. Please try again."),E({isOpen:!0,testType:ge,testId:ue,testName:we,questions:[],isLoading:!1,error:"No questions available for this test"}))}catch(Te){console.error("Error loading test details:",Te),_("Error loading test details. Please try again."),E({isOpen:!0,testType:ge,testId:ue,testName:we,questions:[],isLoading:!1,error:Te.message||"Failed to load test details"})}finally{v(!1)}},Fe=(ge,ue,we,Te)=>{try{console.log("Showing test details modal:",{testType:ge,testId:ue,testName:we,questions:Te}),E({isOpen:!0,testType:ge,testId:ue,testName:we,questions:Te||[],isLoading:!1,error:null})}catch(Xe){console.error("Error showing test details modal:",Xe),_("Failed to show test details modal")}},Ke=()=>{try{console.log("Closing test details modal"),E({isOpen:!1,testType:null,testId:null,testName:null,questions:[],isLoading:!1,error:null})}catch(ge){console.error("Error closing test details modal:",ge)}},xt=(ge,ue)=>{try{switch(ue){case"multiple_choice":return c.jsxs("div",{className:"answer-options",children:[c.jsx("p",{children:c.jsx("strong",{children:"Options:"})}),c.jsxs("p",{children:["A) ",ge.option_a||"No text"]}),c.jsxs("p",{children:["B) ",ge.option_b||"No text"]}),ge.option_c&&c.jsxs("p",{children:["C) ",ge.option_c]}),ge.option_d&&c.jsxs("p",{children:["D) ",ge.option_d]}),ge.option_e&&c.jsxs("p",{children:["E) ",ge.option_e]}),ge.option_f&&c.jsxs("p",{children:["F) ",ge.option_f]}),c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ge.correct_answer||"Not specified"]})})]});case"true_false":return c.jsx("div",{className:"answer-options",children:c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ge.correct_answer?"True":"False"]})})});case"input":return c.jsx("div",{className:"answer-options",children:c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ge.correct_answer||"Not specified"]})})});case"matching_type":return c.jsx("div",{className:"answer-options",children:c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ge.correct_answer?JSON.stringify(ge.correct_answer):"Not specified"]})})});case"word_matching":return c.jsx("div",{className:"answer-options",children:c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ge.correct_answer?JSON.stringify(ge.correct_answer):"Not specified"]})})});default:return c.jsx("p",{children:"Unknown question type"})}}catch(we){return console.error("Error formatting question answer display:",we),c.jsx("p",{children:"Error displaying question"})}},ut=(ge,ue)=>{try{console.log("Navigating to test:",{testType:ge,testId:ue}),r({testType:ge,testId:ue}),d(!0),G(ge,ue)}catch(we){console.error("Error navigating to test:",we),_("Failed to navigate to test")}},At=()=>{try{console.log("Hiding test sections"),r(null),s([]),i({}),l({}),d(!1),g(null),_(null)}catch(ge){console.error("Error hiding test sections:",ge)}},Dt=(ge,ue,we,Te)=>{try{console.log("Displaying test on page:",{testInfo:ge,questions:ue,testType:we,testId:Te}),r({...ge,testType:we,testId:Te}),s(ue),d(!0),K(we,Te),Zt(we,Te),_t(we,Te)}catch(Xe){console.error("Error displaying test on page:",Xe),_("Failed to display test on page")}},Qe=(ge,ue,we)=>{try{return console.log("Rendering questions for page:",{questions:ge,testType:ue,testId:we}),!ge||!Array.isArray(ge)?(console.warn("Invalid questions array for rendering"),[]):ge.map((Te,Xe)=>{const Ct=Pt=>{const Ue={...a,[Te.question_id]:Pt};i(Ue),re(ue,we,Te.question_id,Pt)};return{question:Te,index:Xe,testType:ue,testId:we,studentAnswer:a[Te.question_id]||"",onAnswerChange:Ct}})}catch(Te){return console.error("Error rendering questions for page:",Te),[]}},tt=C.useCallback((ge,ue)=>{try{if(!ge||!ue){console.warn("Cannot save progress: missing testType or testId");return}const we=`test_progress_${ge}_${ue}`,Te={answers:a,progress:o,lastSaved:Date.now(),testType:ge,testId:ue};R(we,Te),console.log(`Progress saved for test ${ge}_${ue}:`,Te)}catch(we){console.error("Error saving progress for page:",we)}},[a,o,R]),vt=C.useCallback(ge=>{try{return!a||Object.keys(a).length===0?0:Object.values(a).filter(we=>we==null?!1:typeof we=="string"?we.trim()!=="":typeof we=="object"?Object.keys(we).length>0:!0).length}catch(ue){return console.error("Error getting answered questions count for page:",ue),0}},[a]),gt=C.useCallback((ge,ue)=>{try{console.log("Updating progress display for page:",{testType:ge,testId:ue});const we=vt(ge),Te=n.length,Xe=Te>0?Math.round(we/Te*100):0,Ct=we===Te&&Te>0;l(ot=>({...ot,answeredCount:we,totalQuestions:Te,percentage:Xe,canSubmit:Ct,remainingQuestions:Te-we,lastUpdated:Date.now()}));const Pt=document.getElementById("progress-bar"),Ue=document.getElementById("progress-text"),ft=document.getElementById("submit-test-button");return Pt&&(Pt.style.width=`${Xe}%`,Pt.className=Pt.className.replace(/bg-\w+-\d+/,""),Xe>=100?Pt.classList.add("bg-green-500"):Xe>=80?Pt.classList.add("bg-blue-500"):Xe>=60?Pt.classList.add("bg-yellow-500"):Xe>=40?Pt.classList.add("bg-orange-500"):Pt.classList.add("bg-red-500")),Ue&&(Ue.textContent=`${we}/${Te} questions answered (${Xe}%)`),ft&&(ft.disabled=!Ct,Ct?(ft.textContent=" Submit Test",ft.classList.remove("bg-gray-400"),ft.classList.add("bg-green-600","hover:bg-green-700")):(ft.textContent=` Complete ${Te-we} more question${Te-we!==1?"s":""}`,ft.classList.remove("bg-green-600","hover:bg-green-700"),ft.classList.add("bg-gray-400"))),{answeredCount:we,totalQuestions:Te,percentage:Xe,canSubmit:Ct}}catch(we){return console.error("Error updating progress display for page:",we),{answeredCount:0,totalQuestions:0,percentage:0,canSubmit:!1}}},[n.length,vt]),_t=C.useCallback((ge,ue)=>{try{console.log("Setting up test page event listeners:",{testType:ge,testId:ue});const we=setInterval(()=>{Object.keys(a).length>0&&(tt(ge,ue),console.log("Auto-saved progress for test:",ge,ue))},3e4),Te=setInterval(()=>{gt(ge,ue)},2e3),Xe=ot=>{ot.key==="Escape"&&window.confirm("Are you sure you want to exit the test? Your progress will be saved.")&&J(),ot.ctrlKey&&ot.key==="s"&&(ot.preventDefault(),tt(ge,ue),console.log("Manual save triggered")),ot.key},Ct=ot=>{Object.keys(a).length>0&&(ot.preventDefault(),ot.returnValue="Your test progress will be saved. Are you sure you want to leave?")},Pt=()=>{document.hidden&&(console.log("Tab became hidden - saving progress"),tt(ge,ue))},Ue=()=>{console.log("Window focused - updating progress"),gt(ge,ue)},ft=()=>{console.log("Window blurred - saving progress"),tt(ge,ue)};return document.addEventListener("keydown",Xe),window.addEventListener("beforeunload",Ct),document.addEventListener("visibilitychange",Pt),window.addEventListener("focus",Ue),window.addEventListener("blur",ft),window.testIntervals||(window.testIntervals={}),window.testIntervals[`autosave_${ge}_${ue}`]=we,window.testIntervals[`progress_${ge}_${ue}`]=Te,()=>{clearInterval(we),clearInterval(Te),document.removeEventListener("keydown",Xe),window.removeEventListener("beforeunload",Ct),document.removeEventListener("visibilitychange",Pt),window.removeEventListener("focus",Ue),window.removeEventListener("blur",ft),window.testIntervals&&(delete window.testIntervals[`autosave_${ge}_${ue}`],delete window.testIntervals[`progress_${ge}_${ue}`])}}catch(we){console.error("Error setting up test page event listeners:",we)}},[a,tt,gt,J]),Wt=C.useCallback(()=>{try{const ge=vt(t?.testType),ue=n.length,we=ge===ue&&ue>0,Te=document.getElementById("submit-test-button");return Te&&(Te.disabled=!we,Te.textContent=we?"Submit Test":`Complete ${ue-ge} more questions`),{canSubmit:we,answeredCount:ge,totalQuestions:ue}}catch(ge){return console.error("Error updating submit button state for page:",ge),{canSubmit:!1,answeredCount:0,totalQuestions:0}}},[t,n.length,vt]),Zt=C.useCallback((ge,ue)=>{try{console.log("Setting up progress tracking for page:",{testType:ge,testId:ue});const we=setInterval(()=>{gt(ge,ue),Wt()},1e3),Te=setInterval(()=>{Object.keys(a).length>0&&tt(ge,ue)},3e4);return window.testIntervals||(window.testIntervals={}),window.testIntervals[`progress_${ge}_${ue}`]=we,window.testIntervals[`autosave_${ge}_${ue}`]=Te,()=>{clearInterval(we),clearInterval(Te),window.testIntervals&&(delete window.testIntervals[`progress_${ge}_${ue}`],delete window.testIntervals[`autosave_${ge}_${ue}`])}}catch(we){console.error("Error setting up progress tracking for page:",we)}},[a,gt,Wt,tt]),pr=C.useCallback(async(ge,ue)=>{const we=document.getElementById("submit-test-button");try{const Te=vt(ge),Xe=n.length;if(Te<Xe){_(`Please answer all ${Xe} questions before submitting.`);return}if(!window.confirm("Are you sure you want to submit your test? This action cannot be undone."))return;we&&(we.disabled=!0,we.innerHTML=`
          <div class="flex items-center justify-center space-x-2">
            <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>
            <span>Submitting...</span>
          </div>
        `),await B(ge,ue)&&(ee(ge,ue),z(ge,ue,a),console.log("Test submitted successfully!"))}catch(Te){console.error("Error submitting test from page:",Te),_("Failed to submit test. Please try again."),we&&(we.disabled=!1,we.textContent="Submit Test")}},[vt,n.length,B,ee,z,a]),Ir=C.useCallback(()=>{try{if(!t)return null;const ge=["true_false","multiple_choice","input","matching_type","word_matching"];return ge.includes(t.testType)?t.testType:ge.includes(t.test_type)?t.test_type:null}catch(ge){return console.error("Error getting current test type:",ge),null}},[t]),br=C.useCallback((ge,ue)=>{try{console.log("Clearing progress tracking interval:",{testType:ge,testId:ue});const we=`progress_interval_${ge}_${ue}`,Te=`autosave_interval_${ge}_${ue}`;window.testIntervals&&(window.testIntervals[we]&&(clearInterval(window.testIntervals[we]),delete window.testIntervals[we]),window.testIntervals[Te]&&(clearInterval(window.testIntervals[Te]),delete window.testIntervals[Te])),console.log(`Cleared progress tracking intervals for test ${ge}_${ue}`)}catch(we){console.error("Error clearing progress tracking interval:",we)}},[]),_r={currentTest:t,testQuestions:n,studentAnswers:a,testProgress:o,isTestActive:u,testResults:f,activeTests:p,isLoading:y,error:T,testDetailsModal:b,testStartTime:k,timeElapsed:P,loadTestForPage:G,submitTest:B,navigateToTestResults:z,navigateBackToCabinet:I,clearTestDataAndReturnToCabinet:J,saveTestProgress:re,getTestProgress:Y,clearTestProgress:ee,loadSavedProgressForPage:K,isTestCompleted:W,markTestCompleted:V,markTestCompletedInUI:(ge,ue)=>{console.log("Marking test completed in UI:",{testType:ge,testId:ue}),V(ge,ue)},getAnsweredQuestionsCount:L,updateSubmitButtonState:H,updateSubmitButtonStateForPage:Wt,loadStudentActiveTests:ce,loadActiveTests:ce,loadTeacherActiveTests:he,getTestInfo:me,getTestQuestions:Ne,createTest:Ee,deleteTest:ie,showTestResults:Oe,loadTestResults:ze,loadTestResultsForPage:Re,displayTestResultsOnPage:Nt,setupTestResultsPageEventListeners:et,clearTestResultsCache:Q,viewTestDetails:Me,showTestDetailsModal:Fe,closeTestDetailsModal:Ke,getQuestionAnswerDisplay:xt,navigateToTest:ut,hideTestSections:At,displayTestOnPage:Dt,renderQuestionsForPage:Qe,setupTestPageEventListeners:_t,setupProgressTrackingForPage:Zt,updateProgressDisplayForPage:gt,submitTestFromPage:pr,getAnsweredQuestionsCountForPage:vt,getCurrentTestType:Ir,saveProgressForPage:tt,clearProgressTrackingInterval:br,collectTestAnswers:ne,calculateTestScore:gf,checkAnswerCorrectness:_p,formatStudentAnswerForDisplay:Z,getCorrectAnswer:gv,transformAnswersForSubmission:se,clearAllTestData:()=>{try{console.log("Clearing old test data from localStorage (older than 15 days)...");const ue=Date.now()-360*60*60*1e3,we=[];for(let Te=0;Te<localStorage.length;Te++){const Xe=localStorage.key(Te);if(!(!Xe||!((Xe.startsWith("test_")||Xe.startsWith("student_")||Xe.startsWith("teacher_")||Xe.startsWith("admin_")||Xe.includes("progress")||Xe.includes("answers"))&&!Xe.includes("test_completed_"))))try{const Pt=localStorage.getItem(Xe);if(!Pt){we.push(Xe);continue}let Ue=null;if(Pt.startsWith("{")||Pt.startsWith("[")){const ft=JSON.parse(Pt),ot=ft.timestamp||ft.lastSaved||ft.lastTickAt||ft.createdAt||ft.updatedAt||ft.startedAt||ft.started_at||ft.created_at;ot&&(Ue=new Date(ot).getTime())}if(!Ue){const ft=`${Xe}__ts`,ot=localStorage.getItem(ft);ot&&(Ue=parseInt(ot)||null)}if(!Ue)continue;Ue<ue&&we.push(Xe)}catch{continue}}return we.forEach(Te=>{console.log(`Removing old localStorage key: ${Te}`),M(Te)}),console.log(`Cleared ${we.length} old test-related items from localStorage`),{success:!0,clearedCount:we.length}}catch(ge){return console.error("Error clearing old test data:",ge),{success:!1,error:ge.message}}},setCurrentTest:r,setTestQuestions:s,setStudentAnswers:i,setTestProgress:l,setIsTestActive:d,setTestResults:g,setError:_};return c.jsx(AV.Provider,{value:_r,children:e})},A1=()=>{const e=C.useContext(AV);if(!e)throw new Error("useTest must be used within a TestProvider");return e},j1=({testResults:e,onBackToCabinet:t,onRetakeTest:r,isLoading:n=!1,caught_cheating:s=!1,visibility_change_times:a=0})=>{if(!e||!e.showResults)return c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx("div",{className:"text-center",children:c.jsx("p",{className:"text-gray-500",children:"No test results to display"})})});const{testInfo:i,testType:o,score:l,totalQuestions:u,percentage:d,passed:f,questionAnalysis:g,timestamp:p}=e,x=T=>({multiple_choice:"Multiple Choice",true_false:"True/False",input:"Input",matching_type:"Matching"})[T]||T,y=T=>T>=80?"text-green-600 bg-green-50":T>=60?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",v=T=>T?"text-green-600 bg-green-100 border-green-200":"text-red-600 bg-red-100 border-red-200";return n?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading test results..."})]})}):c.jsx("div",{className:"bg-gray-50 py-8 overflow-y-auto",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs(rt.div,{className:"bg-white rounded-lg shadow-lg p-6 mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(e?.caught_cheating||s)&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mb-6",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsxs("p",{className:"text-sm text-red-700",children:[c.jsx("strong",{children:"Academic Integrity Warning:"}),"This test has been flagged for suspicious behavior. You have switched tabs ",e?.visibility_change_times||a||0," times during the test."]})})]})}),c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Test Results"}),c.jsx("h2",{className:"text-xl text-gray-700 mb-1",children:i?.test_name||"Test"}),c.jsxs("p",{className:"text-sm text-gray-500",children:[x(o),"  Completed on ",new Date(p).toLocaleDateString()]})]}),c.jsx("div",{className:"text-right",children:c.jsx("div",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium border ${v(f)}`,children:f?" PASSED":" FAILED"})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[c.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-3xl font-bold text-gray-900",children:l}),c.jsx("div",{className:"text-sm text-gray-600",children:"Correct Answers"})]}),c.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-3xl font-bold text-gray-900",children:u}),c.jsx("div",{className:"text-sm text-gray-600",children:"Total Questions"})]}),c.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:`text-3xl font-bold ${y(d).split(" ")[0]}`,children:[d,"%"]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Score"})]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-6",children:c.jsx(rt.div,{className:`h-3 rounded-full ${y(d).split(" ")[1]}`,initial:{width:0},animate:{width:`${d}%`},transition:{duration:1,ease:"easeOut"}})}),c.jsx("div",{className:"flex flex-wrap gap-3",children:c.jsx(nt,{onClick:t,variant:"primary",className:"flex items-center gap-2",children:" Back to Cabinet"})})]}),o!=="matching_type"&&o!=="word_matching"&&c.jsxs(rt.div,{className:"bg-white rounded-lg shadow-lg p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Question Review"}),c.jsx("div",{className:"space-y-4",children:g.map((T,_)=>c.jsxs(rt.div,{className:`p-4 rounded-lg border-2 ${T.isCorrect?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:_*.1},children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["Question ",T.questionNumber]}),c.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${T.isCorrect?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T.isCorrect?" Correct":" Incorrect"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-gray-800 font-medium mb-2",children:"Question:"}),c.jsx("p",{className:"text-gray-700 bg-gray-100 p-3 rounded",children:T.question})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-800 font-medium mb-2",children:"Your Answer:"}),c.jsx("p",{className:`p-3 rounded ${T.isCorrect?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T.userAnswer||"No answer provided"})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-800 font-medium mb-2",children:"Correct Answer:"}),c.jsx("p",{className:"bg-blue-100 text-blue-800 p-3 rounded",children:T.correctAnswer})]})]})]},_))})]}),c.jsxs(rt.div,{className:"bg-white rounded-lg shadow-lg p-6 mt-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Summary Statistics"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600",children:g.filter(T=>T.isCorrect).length}),c.jsx("div",{className:"text-sm text-blue-600",children:"Correct"})]}),c.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:g.filter(T=>!T.isCorrect).length}),c.jsx("div",{className:"text-sm text-red-600",children:"Incorrect"})]}),c.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"text-2xl font-bold text-gray-600",children:[Math.round(g.filter(T=>T.isCorrect).length/u*100),"%"]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Accuracy"})]}),c.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600",children:u}),c.jsx("div",{className:"text-sm text-purple-600",children:"Total"})]})]})]})]})})},PV=({isOpen:e,onClose:t,testType:r,testId:n,testName:s,questions:a=[],isLoading:i=!1})=>{if(!e)return null;const o=f=>({multiple_choice:"Multiple Choice",true_false:"True/False",input:"Input",matching_type:"Matching"})[f]||f,l=f=>({multiple_choice:"",true_false:"",input:"",matching_type:""})[f]||"",u=(f,g)=>{switch(g){case"multiple_choice":return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Options:"}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[f.option_a&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"A"}),c.jsx("span",{className:"text-gray-700",children:f.option_a})]}),f.option_b&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"B"}),c.jsx("span",{className:"text-gray-700",children:f.option_b})]}),f.option_c&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"C"}),c.jsx("span",{className:"text-gray-700",children:f.option_c})]}),f.option_d&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"D"}),c.jsx("span",{className:"text-gray-700",children:f.option_d})]}),f.option_e&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"E"}),c.jsx("span",{className:"text-gray-700",children:f.option_e})]}),f.option_f&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"F"}),c.jsx("span",{className:"text-gray-700",children:f.option_f})]})]})]});case"true_false":return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Options:"}),c.jsxs("div",{className:"flex space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"T"}),c.jsx("span",{className:"text-gray-700",children:"True"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"F"}),c.jsx("span",{className:"text-gray-700",children:"False"})]})]})]});case"input":return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Answer Format:"}),c.jsx("div",{className:"bg-gray-100 p-3 rounded",children:c.jsx("span",{className:"text-gray-600 italic",children:"Type your answer in the text input field"})})]});case"matching_type":return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Instructions:"}),c.jsx("div",{className:"bg-gray-100 p-3 rounded",children:c.jsx("span",{className:"text-gray-600 italic",children:"Match the items by connecting them with lines or selecting pairs"})})]});default:return null}},d=(f,g)=>{if(!f.correct_answer)return null;let p="";switch(g){case"multiple_choice":p=f.correct_answer.toUpperCase();break;case"true_false":p=f.correct_answer?"True":"False";break;case"input":p=f.correct_answer;break;case"matching_type":p=typeof f.correct_answer=="object"?JSON.stringify(f.correct_answer):f.correct_answer;break;default:p=String(f.correct_answer)}return c.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded",children:[c.jsx("p",{className:"font-medium text-green-800 mb-1",children:"Correct Answer:"}),c.jsx("p",{className:"text-green-700 font-mono",children:p})]})};return c.jsx(co,{children:c.jsxs(rt.div,{className:"fixed inset-0 z-50 overflow-y-auto",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[c.jsx(rt.div,{className:"fixed inset-0 bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t}),c.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:c.jsxs(rt.div,{className:"relative bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3},children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("span",{className:"text-2xl",children:l(r)}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s||"Test Details"}),c.jsxs("p",{className:"text-sm text-gray-600",children:[o(r),"  ",a.length," Questions"]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(nt,{onClick:()=>window.print(),variant:"outline",size:"sm",className:"flex items-center space-x-1",children:" Print"}),c.jsx(nt,{onClick:t,variant:"outline",size:"sm",className:"flex items-center space-x-1",children:" Close"})]})]}),c.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:i?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading test details..."})]})}):a.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Questions Available"}),c.jsx("p",{className:"text-gray-500",children:"This test doesn't have any questions yet."})]}):c.jsx("div",{className:"space-y-6",children:a.map((f,g)=>c.jsxs(rt.div,{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:g*.1,duration:.3},children:[c.jsx("div",{className:"flex items-start justify-between mb-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsxs("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full",children:["Question ",g+1]}),c.jsx("span",{className:"text-gray-500 text-sm",children:o(r)})]})}),c.jsx("div",{className:"mb-4",children:c.jsx("p",{className:"text-gray-800 font-medium text-lg leading-relaxed",children:f.question||f.question_text})}),u(f,r),d(f,r)]},f.id||f.question_id||g))})}),c.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[c.jsx("div",{className:"text-sm text-gray-600",children:a.length>0&&c.jsxs("span",{children:["Showing ",a.length," question",a.length!==1?"s":""]})}),c.jsx("div",{className:"flex items-center space-x-3",children:c.jsx(nt,{onClick:t,variant:"primary",className:"flex items-center space-x-2",children:"Close"})})]})]})})]})})},Hue=({answeredCount:e=0,totalQuestions:t=0,timeElapsed:r=0,onSubmitTest:n,isSubmitting:s=!1,canSubmit:a=!1,className:i=""})=>{const o=t>0?Math.round(e/t*100):0,l=t-e,u=g=>{const p=Math.floor(g/3600),x=Math.floor(g%3600/60),y=g%60;return p>0?`${p}:${x.toString().padStart(2,"0")}:${y.toString().padStart(2,"0")}`:`${x}:${y.toString().padStart(2,"0")}`},d=g=>g>=100?"bg-green-500":g>=80?"bg-blue-500":g>=60?"bg-yellow-500":g>=40?"bg-orange-500":"bg-red-500",f=g=>g>=100?"text-green-600":g>=80?"text-blue-600":g>=60?"text-yellow-600":g>=40?"text-orange-600":"text-red-600";return c.jsxs("div",{className:`bg-white rounded-lg shadow-lg p-6 ${i}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Progress"}),c.jsx("div",{className:"flex items-center space-x-4",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-2xl",children:""}),c.jsx("span",{className:"text-sm font-mono text-gray-600",children:u(r)})]})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Progress"}),c.jsxs("span",{className:`text-sm font-semibold ${f(o)}`,children:[o,"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:c.jsx(rt.div,{className:`h-full ${d(o)} transition-colors duration-300`,initial:{width:0},animate:{width:`${o}%`},transition:{duration:.5,ease:"easeOut"}})})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 mb-4",children:[c.jsxs("div",{className:"text-center p-2 sm:p-3 bg-blue-50 rounded-lg",children:[c.jsx("div",{className:"text-lg sm:text-2xl font-bold text-blue-600",children:e}),c.jsx("div",{className:"text-xs text-blue-600",children:"Answered"})]}),c.jsxs("div",{className:"text-center p-2 sm:p-3 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-lg sm:text-2xl font-bold text-gray-600",children:l}),c.jsx("div",{className:"text-xs text-gray-600",children:"Remaining"})]}),c.jsxs("div",{className:"text-center p-2 sm:p-3 bg-purple-50 rounded-lg",children:[c.jsx("div",{className:"text-lg sm:text-2xl font-bold text-purple-600",children:t}),c.jsx("div",{className:"text-xs text-purple-600",children:"Total"})]})]}),c.jsx("div",{className:"mb-4",children:e===t?c.jsx(rt.div,{className:"flex items-center justify-center p-3 bg-green-50 border border-green-200 rounded-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:c.jsx("span",{className:"text-green-600 font-medium",children:" All questions answered! Ready to submit."})}):l===1?c.jsx(rt.div,{className:"flex items-center justify-center p-3 bg-yellow-50 border border-yellow-200 rounded-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:c.jsx("span",{className:"text-yellow-600 font-medium",children:"Almost there! 1 question remaining."})}):c.jsx("div",{className:"flex items-center justify-center p-3 bg-gray-50 border border-gray-200 rounded-lg",children:c.jsxs("span",{className:"text-gray-600 font-medium",children:[l," questions remaining"]})})}),a&&c.jsx("div",{className:"flex justify-center",children:c.jsx(rt.button,{onClick:n,disabled:s,className:`px-8 py-3 rounded-lg font-semibold text-white transition-all duration-300 ${s?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 shadow-lg hover:shadow-xl"}`,whileHover:s?{}:{scale:1.05},whileTap:s?{}:{scale:.95},children:s?c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),c.jsx("span",{children:"Submitting..."})]}):c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Submit Test"})]})})})]})},Gue=({testText:e,blanks:t,separateType:r=!0,testId:n,testName:s="Unknown Test",teacherId:a="Unknown Teacher",subjectId:i,onTestComplete:o,onAnswerChange:l})=>{if(console.log(" FillBlanksTestStudent Props Debug:"),console.log("- testText:",e),console.log("- blanks:",t),console.log("- separateType:",r),console.log("- testId:",n),console.log("- testName:",s),console.log("- teacherId:",a),console.log("- subjectId:",i),!e||!t||!Array.isArray(t))return console.log(" FillBlanksTestStudent: Missing test data"),c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx(Et,{className:"max-w-md w-full",children:c.jsxs(Et.Body,{className:"text-center",children:[c.jsx("div",{className:"text-gray-500 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Test Data"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load fill blanks test data"}),c.jsx(nt,{onClick:()=>window.history.back(),variant:"primary",children:"Back to Dashboard"})]})})});const[u,d]=C.useState({}),[f,g]=C.useState(!1),[p,x]=C.useState(null),[y,v]=C.useState(null),[T,_]=C.useState(!1),[b,E]=C.useState(null),{showNotification:k}=Ba(),{makeAuthenticatedRequest:A}=Bo(),{user:P}=ls(),{startTracking:j,stopTracking:O,getCheatingData:R,clearData:M}=um("fill_blanks",n,P?.student_id||P?.id);tS();const G=C.useCallback((ee,B)=>{try{let z=ee;if(typeof ee=="string"&&ee.startsWith("{"))try{const L=JSON.parse(ee);L.root&&L.root.children&&(z=L.root.children.map(H=>H.children?H.children.map(J=>J.style&&J.style.includes("background-color: #f0f9ff")?"[BLANK_PLACEHOLDER]":J.text||"").join(""):"").join(" "))}catch(L){console.error("Error parsing Lexical JSON:",L)}let I=z;B.forEach((L,H)=>{const J=`[${H+1}_________]`;I=I.replace("[BLANK_PLACEHOLDER]",J)});const V=I.split(/(\[\d+_________\])/).map((L,H)=>L.match(/\[\d+_________\]/)?c.jsx("span",{className:"inline-block px-3 py-1 mx-1 bg-purple-100 text-purple-800 border-2 border-purple-400 rounded-lg font-mono font-bold shadow-sm",children:L},H):c.jsx("span",{children:L},H));return c.jsx("div",{className:"prose max-w-none mb-6",children:c.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-wrap",children:V})})}catch(z){return console.error("Error rendering text with blanks:",z),c.jsx("div",{className:"text-red-500",children:"Error loading test content"})}},[]),K=C.useCallback((ee,B)=>{try{let z=ee;if(typeof ee=="string"&&ee.startsWith("{"))try{const L=JSON.parse(ee);L.root&&L.root.children&&(z=L.root.children.map(H=>H.children?H.children.map(J=>J.style&&J.style.includes("background-color: #f0f9ff")?"[BLANK_PLACEHOLDER]":J.text||"").join(""):"").join(" "))}catch(L){console.error("Error parsing Lexical JSON:",L)}const I=[];B.forEach((L,H)=>{const J=u[L.id],Q=J?L.options[J.charCodeAt(0)-65]:null,ne=Q?c.jsx("span",{className:"inline-block px-3 py-2 bg-green-100 text-green-800 rounded-lg border-2 border-green-400 cursor-pointer hover:bg-green-200 hover:border-green-500 transition-all duration-200 font-bold shadow-sm",onClick:()=>v(L.id),children:Q},H):c.jsxs("span",{className:"inline-block px-3 py-2 bg-purple-100 text-purple-800 rounded-lg border-2 border-purple-400 cursor-pointer hover:bg-purple-200 hover:border-purple-500 transition-all duration-200 font-bold shadow-sm",onClick:()=>v(L.id),children:[H+1,"_________"]},H);I.push(ne),z=z.replace("[BLANK_PLACEHOLDER]",`__BLANK_${L.id}__`)});const W=z.split(/__BLANK_\d+__/),V=[];for(let L=0;L<W.length;L++)W[L]&&V.push(c.jsx("span",{children:W[L]},`text-${L}`)),L<I.length&&V.push(I[L]);return c.jsx("div",{className:"prose max-w-none mb-6",children:c.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-wrap",children:V})})}catch(z){return console.error("Error rendering text with inline blanks:",z),c.jsx("div",{className:"text-red-500",children:"Error loading test content"})}},[u]),re=C.useCallback((ee,B)=>{const z={...u,[ee]:B};d(z),l&&l(ee,B)},[u,l]),Y=C.useCallback(ee=>c.jsx("div",{className:"space-y-6",children:ee.map((B,z)=>{const I=B.blank_options||B.options||[];B.correct_answers;const W=B.question_json||B.question||`Blank ${z+1}`;return console.log(` Blank ${z+1} question text:`,W),c.jsxs(Et,{className:"p-4",children:[c.jsxs("div",{className:"mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Question ",z+1]}),c.jsx("p",{className:"text-gray-600 mb-4",children:W})]}),c.jsx("div",{className:"space-y-3",children:I.filter(V=>V&&V.trim().length>0).map((V,L)=>c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer hover:bg-gray-50 p-2 rounded-lg transition-colors",children:[c.jsx("input",{type:"radio",name:`blank_${B.question_id||B.id||z}`,value:String.fromCharCode(65+L),checked:u[B.question_id||B.id||z]===String.fromCharCode(65+L),onChange:H=>re(B.question_id||B.id||z,H.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),c.jsxs("span",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+L)}),c.jsx("span",{className:"text-gray-700",children:V})]})]},L))})]},B.question_id||B.id||z)})}),[u,re]);return C.useEffect(()=>{if(n&&P?.student_id){x(new Date),j(),console.log(" Anti-cheating tracking started for fill blanks test");const B=`test_progress_${P.student_id}_fill_blanks_${n}`,z=ms(B);z&&(d(z.answers||{}),x(new Date(z.startTime)),console.log(" Fill blanks test progress restored:",z))}},[n,P?.student_id,t,j]),C.useEffect(()=>{if(p&&P?.student_id&&n){const ee=setInterval(()=>{const B={answers:u,startTime:p.toISOString()},z=`test_progress_${P.student_id}_fill_blanks_${n}`;ys(z,B,Os.test_progress),console.log(" Fill blanks progress auto-saved")},3e4);return()=>clearInterval(ee)}},[p,u,P?.student_id,n]),C.useEffect(()=>()=>{O(),M(),console.log(" Fill blanks test component unmounted - anti-cheating cleanup")},[O,M]),C.useCallback(async()=>{g(!0);try{const ee=t.length;let B=0;t.forEach((me,Ne)=>{const Oe=u[me.id];Oe&&Oe===me.correct_answer&&B++});const z=B,I=ee;console.log(` Fill Blanks Score: ${z}/${I} (${Math.round(z/I*100)}%)`);const W=new Date,V=p?Math.round((W-p)/1e3):0,L=p?p.toISOString():W.toISOString(),H=R();console.log(" Anti-cheating data for fill blanks submission:",H);const J=P.student_id,Q=`retest_assignment_id_${J}_fill_blanks_${n}`,ne=localStorage.getItem(Q),{academicCalendarService:Z}=await Vi(async()=>{const{academicCalendarService:me}=await Promise.resolve().then(()=>nS);return{academicCalendarService:me}},void 0);await Z.loadAcademicCalendar();const ce=Z.getCurrentTerm()?.id;if(!ce)throw new Error("No current academic period found");const he={test_id:n,test_name:s,teacher_id:a||null,subject_id:i||null,student_id:J,academic_period_id:ce,parent_test_id:n,retest_assignment_id:ne?Number(ne):null,answers:u,score:z,maxScore:I,time_taken:V,started_at:L,submitted_at:W.toISOString(),caught_cheating:H.caught_cheating,visibility_change_times:H.visibility_change_times};console.log(" Submitting fill blanks test:",he);const ie=await(await A("/.netlify/functions/submit-fill-blanks-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(he)})).json();if(ie.success){if(k("Test submitted successfully!","success"),O(),M(),console.log(" Anti-cheating tracking stopped and data cleared for fill blanks test"),P?.student_id&&(Yp(P.student_id,"fill_blanks",n),console.log(" Fill blanks test data cleared from cache")),P?.student_id){const me=`test_completed_${P.student_id}_fill_blanks_${n}`;localStorage.setItem(me,"true"),console.log(" Fill blanks test marked as completed in localStorage:",me);const Ne=`retest1_${J}_fill_blanks_${n}`;localStorage.removeItem(Ne),localStorage.removeItem(Q)}if(P?.student_id){const me=`student_results_table_${P.student_id}`;ys(me,ie,Os.student_results_table),console.log(" Fill blanks test results cached with key:",me)}setShowSubmitModal(!1),setTimeout(()=>{o&&o(z)},2e3)}else throw new Error(ie.message||"Failed to submit test")}catch(ee){console.error("Error submitting test:",ee),k("Error submitting test. Please try again.","error")}finally{g(!1)}},[u,t,n,s,a,i,p,R,O,M,A,k,o,P]),c.jsx(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:c.jsxs(Et,{children:[f&&c.jsx(Et.Header,{children:c.jsx("div",{className:"flex items-center justify-center",children:c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[c.jsx(Gr,{size:"small"}),c.jsx("span",{children:"Submitting..."})]})})}),c.jsx(Et.Body,{children:r===!0?c.jsxs(c.Fragment,{children:[G(e,t),Y(t)]}):c.jsx(c.Fragment,{children:K(e,t)})}),r===!1&&y&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Select Answer"}),c.jsx("div",{className:"space-y-2",children:t.find(ee=>ee.id===y)?.options.filter(ee=>ee.trim().length>0).map((ee,B)=>c.jsxs("button",{onClick:()=>{re(y,String.fromCharCode(65+B)),v(null)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 rounded-lg border border-gray-200",children:[c.jsxs("span",{className:"font-semibold text-blue-600 mr-2",children:[String.fromCharCode(65+B),")"]}),ee]},B))}),c.jsx("div",{className:"mt-4 flex justify-end",children:c.jsx(nt,{onClick:()=>v(null),variant:"secondary",size:"sm",children:"Cancel"})})]})}),c.jsx(Et.Footer,{children:c.jsx("div",{className:"flex gap-3"})})]})})};let Vue=class{constructor(){this.tokenKey="auth_token",this.refreshTokenKey="refresh_token",this.userKey="user_data"}getToken(){return localStorage.getItem(this.tokenKey)}getRefreshToken(){return localStorage.getItem(this.refreshTokenKey)}getUserData(){const t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}setToken(t){localStorage.setItem(this.tokenKey,t)}setRefreshToken(t){localStorage.setItem(this.refreshTokenKey,t)}setUserData(t){localStorage.setItem(this.userKey,JSON.stringify(t))}setTokens(t,r){this.setToken(t),this.setUserData({role:r}),localStorage.setItem("accessToken",t)}isAuthenticated(){const t=this.getToken();if(!t)return!1;try{const r=JSON.parse(atob(t.split(".")[1])),n=Date.now()/1e3;return r.exp>n}catch(r){return console.error("Error decoding token:",r),!1}}getUserRole(){const t=this.getUserData();return t?t.role:null}isAdmin(){return this.getUserRole()==="admin"}isTeacher(){return this.getUserRole()==="teacher"}isStudent(){return this.getUserRole()==="student"}clearAuth(){localStorage.removeItem(this.tokenKey),localStorage.removeItem(this.refreshTokenKey),localStorage.removeItem(this.userKey)}logout(){this.clearAuth(),window.location.href="/login"}getAuthHeader(){const t=this.getToken();return t?`Bearer ${t}`:null}async makeAuthenticatedRequest(t,r={}){const n=this.getToken();if(!n)throw new Error("No authentication token found");const s={"Content-Type":"application/json",Authorization:`Bearer ${n}`,...r.headers},a=await fetch(t,{...r,headers:s});if(a.status===401){if(await this.refreshToken())return s.Authorization=`Bearer ${this.getToken()}`,fetch(t,{...r,headers:s});throw this.logout(),new Error("Authentication failed")}return a}async refreshToken(){const t=this.getRefreshToken();if(!t)return!1;try{const r=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(r.ok){const n=await r.json();return this.setToken(n.accessToken),n.refreshToken&&this.setRefreshToken(n.refreshToken),!0}}catch(r){console.error("Error refreshing token:",r)}return!1}getAccessToken(){return this.getToken()}decodeToken(t){try{return JSON.parse(atob(t.split(".")[1]))}catch(r){return console.error("Error decoding token:",r),null}}init(){return this.isAuthenticated()?(this.setupTokenRefresh(),!0):(window.location.pathname!=="/login"&&(window.location.href="/login"),!1)}setupTokenRefresh(){setInterval(async()=>{this.isAuthenticated()&&await this.refreshToken()},3e3*1e3)}};const Sp=new Vue;window.tokenManager=Sp;typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{Sp.init()}):Sp.init());const OV=async(e,t,r,n)=>{try{console.log(" Fetching teacher student results:",{teacherId:e,grade:t,className:r,termId:n});const a=await(await Sp.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-student-results?teacher_id=${e}&grade=${t}&class=${r}&academic_period_id=${n}`)).json();if(a.success)return console.log(" Teacher student results loaded:",a.results.length,"results"),console.log(" Students loaded:",a.students?.length||0,"students"),{success:!0,results:a.results,students:a.students||[],count:a.results.length,student_count:a.student_count||0};throw new Error(a.error||"Failed to load teacher student results")}catch(s){return console.error("Error fetching teacher student results:",s),{success:!1,error:s.message,results:[]}}},FV=async(e,t)=>{try{console.log(" Fetching student results view:",{studentId:e,academicPeriodId:t});const r=t?`&academic_period_id=${t}`:"",s=await(await Sp.makeAuthenticatedRequest(`/.netlify/functions/get-student-results-view?student_id=${e}${r}`)).json();if(s.success)return console.log(" Student results view loaded:",s.results.length,"results"),{success:!0,results:s.results,count:s.results.length};throw new Error(s.error||"Failed to load student results view")}catch(r){return console.error("Error fetching student results view:",r),{success:!1,error:r.message,results:[]}}},que=async(e,t,r,n)=>{try{console.log(" Fetching class summary:",{teacherId:e,grade:t,className:r,academicPeriodId:n});const a=await(await Sp.makeAuthenticatedRequest(`/.netlify/functions/get-class-summary?teacher_id=${e}&grade=${t}&class=${r}&academic_period_id=${n}`)).json();if(a.success)return console.log(" Class summary loaded:",a.summary),{success:!0,summary:a.summary,hasData:!!a.summary};throw new Error(a.error||"Failed to load class summary")}catch(s){return console.error("Error fetching class summary:",s),{success:!1,error:s.message,summary:null}}},Kue=async(e,t,r,n,s={})=>{try{const a=await OV(e,t,r,n);if(!a.success)return a;let i=a.results;return s.subject&&(i=i.filter(o=>o.subject&&o.subject.toLowerCase().includes(s.subject.toLowerCase()))),s.testType&&(i=i.filter(o=>o.test_type===s.testType)),s.minScore!==void 0&&(i=i.filter(o=>o.score/o.max_score*100>=s.minScore)),s.maxScore!==void 0&&(i=i.filter(o=>o.score/o.max_score*100<=s.maxScore)),s.passed!==void 0&&(i=i.filter(o=>o.score>=o.passing_score===s.passed)),{success:!0,results:i,count:i.length,originalCount:a.results.length}}catch(a){return console.error("Error filtering teacher student results:",a),{success:!1,error:a.message,results:[]}}},Xue=async(e,t,r={})=>{try{const n=await FV(e,t);if(!n.success)return n;let s=n.results;return r.subject&&(s=s.filter(a=>a.subject&&a.subject.toLowerCase().includes(r.subject.toLowerCase()))),r.testType&&(s=s.filter(a=>a.test_type===r.testType)),r.semester&&(s=s.filter(a=>a.semester===r.semester)),r.passed!==void 0&&(s=s.filter(a=>a.score>=a.passing_score===r.passed)),{success:!0,results:s,count:s.length,originalCount:n.results.length}}catch(n){return console.error("Error filtering student results view:",n),{success:!1,error:n.message,results:[]}}},Yue={getTeacherStudentResults:OV,getStudentResultsView:FV,getClassSummary:que,getTeacherStudentResultsFiltered:Kue,getStudentResultsViewFiltered:Xue};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jue=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Que=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),aI=e=>{const t=Que(e);return t.charAt(0).toUpperCase()+t.slice(1)},RV=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),Zue=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ede={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tde=C.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:i,...o},l)=>C.createElement("svg",{ref:l,...ede,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:RV("lucide",s),...!a&&!Zue(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,d])=>C.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=(e,t)=>{const r=C.forwardRef(({className:n,...s},a)=>C.createElement(tde,{ref:a,iconNode:t,className:RV(`lucide-${Jue(aI(e))}`,`lucide-${e}`,n),...s}));return r.displayName=aI(e),r};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rde=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],nde=dm("download",rde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sde=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],ade=dm("maximize-2",sde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ide=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],ode=dm("rotate-cw",ide);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lde=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],DV=dm("x",lde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cde=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],ude=dm("zoom-in",cde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dde=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],fde=dm("zoom-out",dde),Ll={WIDTH:1536,HEIGHT:2048,ASPECT_RATIO:1536/2048},IV={MIN:.25,MAX:1,INITIAL:.25,STEP:.1},vh={PENCIL:"pencil",LINE:"line",RECTANGLE:"rectangle",CIRCLE:"circle",ERASER:"eraser"},iI={CURSOR_COLOR:"#ff0000",CURSOR_OPACITY:.3},oI={ERASER_TO_THICKNESS_RATIO:2.5,THICKNESS_TO_ERASER_RATIO:.4},x_={MAX_ENTRIES:10,MAX_MEMORY_KB:500,COMPRESSION_THRESHOLD:200},MV=e=>{try{const t=JSON.stringify(e);return new Blob([t]).size/1024}catch(t){return console.warn("Error calculating memory usage:",t),0}},hde=e=>Array.isArray(e)?e.map(t=>Array.isArray(t)?gde(t):t):e,gde=e=>{if(e.length<=2)return e;const t=[e[0]],r=2;for(let n=1;n<e.length-1;n++){const s=e[n-1],a=e[n];e[n+1],Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2))>r&&t.push(a)}return t.push(e[e.length-1]),t},pde=(e,t=Date.now())=>{const r=MV(e);return{data:[...e],timestamp:t,memoryUsage:r,compressed:r>x_.COMPRESSION_THRESHOLD}},lI=(e,t,r)=>{const n=pde(t),s=MV(t),a=e.slice(0,r+1);a.push(n);let i=a;return s>x_.MAX_MEMORY_KB&&(i=mde(a)),i.length>x_.MAX_ENTRIES&&(i=i.slice(-10)),{history:i,index:i.length-1}},mde=e=>e.map(t=>t.memoryUsage>x_.COMPRESSION_THRESHOLD?{...t,data:hde(t.data),compressed:!0}:t),cI=(e,t)=>{if(t<0||t>=e.length)return[];const r=e[t];return r?r.compressed?yde(r.data):[...r.data]:[]},yde=e=>[...e],uI=e=>e>0,dI=(e,t)=>e<t-1,xde=()=>({history:[],index:-1}),vde=()=>{const[e,t]=C.useState({zoom:1,position:{x:0,y:0},rotation:0,currentTool:"pencil",currentColor:"#000000",currentThickness:2,eraserSize:10,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:[],historyIndex:-1,isFullscreen:!1,preFullscreenState:null}),[r,n]=C.useState([]),[s,a]=C.useState([]),i=C.useCallback(k=>{t(A=>({...A,...k}))},[]),o=C.useCallback(()=>{t({zoom:1,position:{x:0,y:0},rotation:0,currentTool:"pencil",currentColor:"#000000",currentThickness:2,eraserSize:10,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:[],historyIndex:-1,isFullscreen:!1,preFullscreenState:null})},[]),l=C.useCallback(k=>{const A={x:k.x,y:k.y,color:e.currentColor,thickness:e.currentThickness};e.currentTool==="pencil"?t(P=>({...P,isDrawing:!0,currentLine:[A]})):["line","rectangle","circle"].includes(e.currentTool)&&t(P=>({...P,isDrawing:!0,currentShape:{type:e.currentTool,startX:k.x,startY:k.y,endX:k.x,endY:k.y,color:e.currentColor,thickness:e.currentThickness}}))},[e.currentTool,e.currentColor,e.currentThickness]),u=C.useCallback(k=>{if(!e.isDrawing)return;const A={x:k.x,y:k.y,color:e.currentColor,thickness:e.currentThickness};e.currentTool==="pencil"?t(P=>({...P,currentLine:[...P.currentLine,A]})):e.currentShape&&t(P=>({...P,currentShape:{...P.currentShape,endX:k.x,endY:k.y}}))},[e.isDrawing,e.currentTool,e.currentColor,e.currentThickness,e.currentShape]),d=C.useCallback(()=>{if(!e.isDrawing)return;let k=r;if(e.currentTool==="pencil"&&e.currentLine.length>0?(k=[...r,e.currentLine],n(k)):e.currentShape&&(k=[...r,e.currentShape],n(k)),k!==r){const A=lI(e.drawingHistory,k,e.historyIndex);t(P=>({...P,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:A.history,historyIndex:A.index}))}else t(A=>({...A,isDrawing:!1,currentLine:[],currentShape:null}))},[e.isDrawing,e.currentTool,e.currentLine,e.currentShape,r,e.drawingHistory,e.historyIndex]),f=C.useCallback(k=>Math.round(k*oI.ERASER_TO_THICKNESS_RATIO),[]),g=C.useCallback(k=>Math.round(k*oI.THICKNESS_TO_ERASER_RATIO),[]),p=C.useCallback(k=>{t(A=>({...A,currentThickness:k,eraserSize:f(k)}))},[f]),x=C.useCallback(k=>{t(A=>({...A,eraserSize:k,currentThickness:g(k)}))},[g]),y=C.useCallback(k=>{const A=lI(e.drawingHistory,k,e.historyIndex);t(P=>({...P,drawingHistory:A.history,historyIndex:A.index}))},[e.drawingHistory,e.historyIndex]),v=C.useCallback(()=>{if(uI(e.historyIndex)){const k=e.historyIndex-1,A=cI(e.drawingHistory,k);n([...A]),t(P=>({...P,historyIndex:k}))}},[e.historyIndex,e.drawingHistory]),T=C.useCallback(()=>{if(dI(e.historyIndex,e.drawingHistory.length)){const k=e.historyIndex+1,A=cI(e.drawingHistory,k);n([...A]),t(P=>({...P,historyIndex:k}))}},[e.historyIndex,e.drawingHistory]),_=C.useCallback(()=>{const k=xde();t(A=>({...A,drawingHistory:k.history,historyIndex:k.index}))},[]),b=uI(e.historyIndex),E=dI(e.historyIndex,e.drawingHistory.length);return{drawingState:e,setDrawingState:t,drawingData:r,setDrawingData:n,textBoxes:s,setTextBoxes:a,updateDrawingState:i,resetDrawingState:o,startDrawing:l,continueDrawing:u,finishDrawing:d,handleThicknessChange:p,handleEraserSizeChange:x,saveToHistoryState:y,undo:v,redo:T,clearHistoryState:_,canUndoState:b,canRedoState:E}},fI={SCALE_DELTA:.05,CENTER_DELTA:20},Xg=e=>{if(e.length<2)return 0;const t=e[0],r=e[1];return Math.sqrt(Math.pow(r.clientX-t.clientX,2)+Math.pow(r.clientY-t.clientY,2))},Qd=e=>{if(e.length<2)return null;const t=e[0],r=e[1];return{x:(t.clientX+r.clientX)/2,y:(t.clientY+r.clientY)/2}},wde=(e,t)=>{if(e.length!==2||!t)return null;const r=Xg(e),n=Xg(t),s=Qd(e),a=Qd(t);if(n===0)return null;const i=Math.abs(r/n-1),o=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2));return i>fI.SCALE_DELTA?"zoom":o>fI.CENTER_DELTA?"pan":null},bde=e=>{let t;return function(){const r=arguments,n=this;t&&cancelAnimationFrame(t),t=requestAnimationFrame(()=>{e.apply(n,r),t=null})}},Bg=(e,t)=>{const r=t.getPointerPosition();return{x:(r.x-t.x())/t.scaleX(),y:(r.y-t.y())/t.scaleY()}},el={PENCIL:"pencil",LINE:"line",RECTANGLE:"rectangle",CIRCLE:"circle",PAN:"pan"},v_={color:"#000000",thickness:2},hI=(e,t,r)=>({x:e.x,y:e.y,color:t||v_.color,thickness:r||v_.thickness}),_de=(e,t,r,n,s)=>({type:e,startX:t.x,startY:t.y,endX:r.x,endY:r.y,color:n||v_.color,thickness:s||v_.thickness}),LV=(e,t,r,n,s,a)=>{const i=e-r,o=t-n,l=s-r,u=a-n,d=i*l+o*u,f=l*l+u*u;let g=-1;f!==0&&(g=d/f);let p,x;g<0?(p=r,x=n):g>1?(p=s,x=a):(p=r+g*l,x=n+g*u);const y=e-p,v=t-x;return Math.sqrt(y*y+v*v)},Sde=(e,t)=>{if(t.length===0)return[e];const r=t.sort((a,i)=>a.index-i.index),n=[];let s=0;for(const a of r)a.index>s&&n.push(e.slice(s,a.index+1)),s=a.index+1;return s<e.length&&n.push(e.slice(s)),n.filter(a=>a.length>0)},kde=(e,t,r,n)=>{const s=[],a=r/2;for(let i=0;i<n.length-1;i++){const o=n[i],l=n[i+1],u=LV(e,t,o.x,o.y,l.x,l.y);u<=a&&s.push({index:i,point:{x:o.x,y:o.y},distance:u})}return s},Tde=(e,t,r,n)=>{const s=kde(t,r,n,e);return s.length===0?[e]:Sde(e,s)},Cde=(e,t,r,n)=>{if(n.type==="rectangle"){const s=Math.min(n.startX,n.endX),a=Math.min(n.startY,n.endY),i=Math.abs(n.endX-n.startX),o=Math.abs(n.endY-n.startY);return e>=s&&e<=s+i&&t>=a&&t<=a+o}else if(n.type==="circle"){const s=(n.startX+n.endX)/2,a=(n.startY+n.endY)/2,i=Math.sqrt(Math.pow(n.endX-n.startX,2)+Math.pow(n.endY-n.startY,2))/2;return Math.sqrt(Math.pow(e-s,2)+Math.pow(t-a,2))<=i}return!1},gI=(e,t,r,n)=>{const s=[];for(const a of n)if(Array.isArray(a)){const i=Tde(a,e,t,r);s.push(...i)}else a.type==="line"?LV(e,t,a.startX,a.startY,a.endX,a.endY)>r/2&&s.push(a):(a.type==="rectangle"||a.type==="circle")&&(Cde(e,t,r,a)||s.push(a));return s},Ede=(e,t,r,n,s,a,i,o,l)=>{const[u,d]=C.useState({isActive:!1,type:null,lastDistance:null,lastCenter:null}),f=C.useCallback(A=>{if(A.evt.preventDefault(),A.evt.stopPropagation(),e.currentTool===el.PAN)return;const P=A.target.getStage(),j=Bg(A,P),O=hI(j,e.currentColor,e.currentThickness);e.currentTool===el.PENCIL?t(R=>({...R,isDrawing:!0,currentLine:[O]})):[el.LINE,el.RECTANGLE,el.CIRCLE].includes(e.currentTool)&&t(R=>({...R,isDrawing:!0,currentShape:_de(e.currentTool,j,j,e.currentColor,e.currentThickness)}))},[e.currentTool,e.currentColor,e.currentThickness,t]),g=C.useCallback(A=>{const P=gI(A.x,A.y,e.eraserSize,r);n(P),s(P)},[e.eraserSize,r,n,s]),p=C.useCallback(A=>{o&&(a(),y("Undo",A))},[o,a]),x=C.useCallback(A=>{l&&(i(),y("Redo",A))},[l,i]),y=C.useCallback((A,P)=>{const j=P.target.getStage(),O=Bg(P,j),R=new Konva.Circle({x:O.x,y:O.y,radius:20,stroke:"#4CAF50",strokeWidth:3,opacity:.8,listening:!1});j.add(R),R.to({scaleX:2,scaleY:2,opacity:0,duration:.3,onFinish:()=>{R.destroy()}})},[]),v=C.useCallback(A=>{if(A.evt.preventDefault(),A.evt.stopPropagation(),!e.isDrawing)return;const P=A.target.getStage(),j=Bg(A,P),O=hI(j,e.currentColor,e.currentThickness);e.currentTool===el.PENCIL?t(R=>({...R,currentLine:[...R.currentLine,O]})):e.currentShape&&t(R=>({...R,currentShape:{...R.currentShape,endX:j.x,endY:j.y}}))},[e.isDrawing,e.currentTool,e.currentColor,e.currentThickness,e.currentShape,t]),T=C.useCallback(A=>{A&&A.evt&&(A.evt.preventDefault(),A.evt.stopPropagation()),e.isDrawing&&(e.currentTool===el.PENCIL&&e.currentLine.length>0?n(P=>[...P,e.currentLine]):e.currentShape&&n(P=>[...P,e.currentShape]),t(P=>({...P,isDrawing:!1,currentLine:[],currentShape:null})))},[e.isDrawing,e.currentTool,e.currentLine,e.currentShape,n,t]),_=C.useCallback(A=>{A.evt.preventDefault(),A.evt.stopPropagation();const P=A.evt.touches;if(P.length===2)d({isActive:!0,type:"pan",lastDistance:Xg(P),lastCenter:Qd(P)});else if(P.length===1)if(e.currentTool===el.ERASER){const j=A.target.getStage(),O=Bg(A,j);g(O)}else e.currentTool===el.UNDO?p(A):e.currentTool===el.REDO?x(A):f(A)},[Xg,Qd,f,e.currentTool,g,p,x]),b=C.useCallback(bde(A=>{A.evt.preventDefault(),A.evt.stopPropagation();const P=A.evt.touches;if(P.length===2&&u.isActive){const j=wde(P,u);if(j==="zoom"){const O=Xg(P),R=Qd(P),M=O/u.lastDistance,G=Math.max(.25,Math.min(1,e.zoom*M));t(K=>({...K,zoom:G,position:{x:R.x-(R.x-K.position.x)*(G/K.zoom),y:R.y-(R.y-K.position.y)*(G/K.zoom)}}))}else if(j==="pan"){const O=Qd(P),R=O.x-u.lastCenter.x,M=O.y-u.lastCenter.y;t(G=>({...G,position:{x:G.position.x+R,y:G.position.y+M}}))}d(O=>({...O,lastDistance:Xg(P),lastCenter:Qd(P)}))}else if(P.length===1)if(e.currentTool===el.ERASER){const j=A.target.getStage(),O=Bg(A,j),R=gI(O.x,O.y,e.eraserSize,r);n(R)}else if(e.currentTool===el.PAN){const j=Qd(P),O=j.x-u.lastCenter.x,R=j.y-u.lastCenter.y;t(M=>({...M,position:{x:M.position.x+O,y:M.position.y+R}})),d(M=>({...M,lastCenter:j}))}else v(A)}),[u,e.zoom,t,v]),E=C.useCallback(A=>{b(A)},[b]),k=C.useCallback(A=>{A.evt.preventDefault(),A.evt.stopPropagation();const P=A.evt.touches;P.length===0?(T(A),d({isActive:!1,type:null,lastDistance:null,lastCenter:null})):P.length===1&&d(j=>({...j,isActive:!1}))},[T]);return{handleTouchStart:_,handleTouchMove:E,handleTouchEnd:k,handleEraserStart:g,handleUndoTouch:p,handleRedoTouch:x,showTouchFeedback:y}},Nde=(e,t)=>{const[r,n]=C.useState(e.MIN),[s,a]=C.useState({x:0,y:0}),i=C.useCallback((g,p,x)=>{const y=Math.max(e.MIN,Math.min(e.MAX,g));if(p){const v=y/r,T={x:p.x-(p.x-s.x)*v,y:p.y-(p.y-s.y)*v};return{zoom:y,position:T}}else{const v=t.width*y,T=t.height*y,_={x:(x.width-v)/2,y:(x.height-T)/2};return{zoom:y,position:_}}},[r,s,e,t]),o=C.useCallback(()=>{const g=Math.min(r*(1+e.STEP),e.MAX);n(g)},[r,e]),l=C.useCallback(()=>{const g=Math.max(r/(1+e.STEP),e.MIN);n(g)},[r,e]),u=C.useCallback((g,p,x)=>{const y=i(g,p,x);n(y.zoom),a(y.position)},[i]),d=C.useCallback((g,p)=>{a(x=>({x:x.x+g,y:x.y+p}))},[]),f=C.useCallback(()=>{n(e.INITIAL),a({x:0,y:0})},[e.INITIAL]);return{zoom:r,setZoom:n,position:s,setPosition:a,handleZoomIn:o,handleZoomOut:l,handleZoomToPoint:u,handlePan:d,resetZoom:f}},Ade=e=>{const[t,r]=C.useState([]),[n,s]=C.useState(0),a=C.useCallback(f=>{if(console.log("parseDrawingData - input drawing:",f),console.log("parseDrawingData - drawing.answers:",f?.answers),!f?.answers)return console.log("parseDrawingData - no answers found, returning empty array"),[];try{if(typeof f.answers=="string"){console.log("parseDrawingData - parsing string answers");const g=JSON.parse(f.answers);return console.log("parseDrawingData - parsed string result:",g),g&&typeof g=="object"&&g.lines&&console.log("parseDrawingData - new format detected with lines and textBoxes"),g}if(f.answers&&typeof f.answers=="object"&&f.answers.lines)return console.log("parseDrawingData - answers is new format object"),f.answers;if(Array.isArray(f.answers)){if(console.log("parseDrawingData - answers is array"),f.answers.every(p=>typeof p=="string"))try{const p=f.answers.map(x=>{try{return JSON.parse(x)}catch{return x}});return console.log("parseDrawingData - parsed array elements"),p}catch{return console.log("parseDrawingData - failed to parse array elements, returning raw"),f.answers}return f.answers}return console.log("parseDrawingData - answers is neither string nor array, returning empty array"),[]}catch(g){return console.error("Error parsing drawing data:",g),[]}},[]),i=C.useCallback(f=>{if(console.log("processQuestions - input answers:",f),console.log("processQuestions - answers type:",typeof f),console.log("processQuestions - answers isArray:",Array.isArray(f)),f&&typeof f=="object"&&f.lines){console.log("processQuestions - new format detected with lines and textBoxes"),console.log("processQuestions - lines count:",f.lines?.length),console.log("processQuestions - textBoxes count:",f.textBoxes?.length);const p=o(f.lines);return console.log("processQuestions - canvas groups:",p),console.log("processQuestions - number of canvas groups:",p.length),p.map((x,y)=>(console.log(`processQuestions - canvas ${y} strokes:`,x),console.log(`processQuestions - canvas ${y} stroke count:`,x.length),{questionNumber:y+1,drawingData:x,textBoxes:f.textBoxes||[]}))}if(Array.isArray(f)&&f.every(p=>p&&typeof p=="object"&&p.lines))return console.log("processQuestions - array of {lines,textBoxes} detected"),f.map((p,x)=>({questionNumber:x+1,drawingData:p.lines||[],textBoxes:p.textBoxes||[]}));if(!Array.isArray(f))return console.log("processQuestions - answers is not array or object, returning empty array"),[];console.log("processQuestions - processing",f.length,"answers (old format)");const g=o(f);return console.log("processQuestions - canvas groups:",g),console.log("processQuestions - number of canvas groups:",g.length),g.map((p,x)=>(console.log(`processQuestions - canvas ${x} strokes:`,p),console.log(`processQuestions - canvas ${x} stroke count:`,p.length),{questionNumber:x+1,drawingData:p,textBoxes:[]}))},[]),o=C.useCallback(f=>{console.log("groupStrokesByCanvas - input answers:",f);const g=l(f);return console.log("groupStrokesByCanvas - using strategy:",g),g==="by_question_boundary"?u(f):g==="by_stroke_type"?d(f):[f]},[]),l=C.useCallback(f=>{console.log("determineGroupingStrategy - analyzing answers:",f);let g=0,p=0;return f.forEach(x=>{Array.isArray(x)?g++:typeof x=="object"&&p++}),console.log("determineGroupingStrategy - arrayCount:",g,"objectCount:",p),g>0&&p>0?"by_stroke_type":f.length>3?"by_question_boundary":"single_canvas"},[]),u=C.useCallback(f=>{console.log("groupByQuestionBoundary - grouping answers:",f);const g=[];let p=[];const x=Math.ceil(f.length/2);for(let y=0;y<f.length;y++)p.push(f[y]),(y+1)%x===0&&y<f.length-1&&(g.push([...p]),p=[]);return p.length>0&&g.push(p),console.log("groupByQuestionBoundary - result:",g),g},[]),d=C.useCallback(f=>{console.log("groupByStrokeType - grouping answers:",f);const g=[],p=[];f.forEach(y=>{Array.isArray(y)?g.push(y):typeof y=="object"&&p.push(y)});const x=[];return g.length>0&&x.push(g),p.length>0&&x.push(p),console.log("groupByStrokeType - result:",x),x},[]);return C.useEffect(()=>{if(e){console.log("useDataParsing - drawing object:",e),console.log("useDataParsing - drawing.answers:",e.answers),console.log("useDataParsing - drawing.answers type:",typeof e.answers),console.log("useDataParsing - drawing.answers length:",e.answers?.length);const f=a(e);console.log("useDataParsing - parsed answers:",f),console.log("useDataParsing - parsed answers type:",typeof f),console.log("useDataParsing - parsed answers length:",f?.length);const g=i(f);console.log("useDataParsing - processed questions:",g),console.log("useDataParsing - processed questions length:",g?.length),g.length>0&&(console.log("useDataParsing - first question drawingData:",g[0]?.drawingData),console.log("useDataParsing - first question drawingData length:",g[0]?.drawingData?.length)),r(g),s(0)}},[e,a,i]),{questionsData:t,setQuestionsData:r,currentQuestionIndex:n,setCurrentQuestionIndex:s,parseDrawingData:a,processQuestions:i}},pI={MIN:.25,INITIAL:1},jde=(e,t)=>{const[r,n]=C.useState(!1),[s,a]=C.useState(null),i=C.useCallback(()=>{document.fullscreenElement||(a({zoom:e.zoom,position:{...e.position}}),document.documentElement.requestFullscreen().then(()=>{n(!0),t(l=>({...l,zoom:pI.MIN,position:{x:0,y:0},isFullscreen:!0}))}).catch(l=>{console.error("Error entering fullscreen:",l)}))},[e.zoom,e.position,t]),o=C.useCallback(()=>{document.fullscreenElement&&document.exitFullscreen().then(()=>{n(!1),s?(t(l=>({...l,zoom:s.zoom,position:s.position,isFullscreen:!1})),a(null)):t(l=>({...l,zoom:pI.INITIAL,position:{x:0,y:0},isFullscreen:!1}))}).catch(l=>{console.error("Error exiting fullscreen:",l)})},[s,t]);return{isFullscreen:r,enterFullscreen:i,exitFullscreen:o}},BV=C.forwardRef(({drawingData:e,textBoxes:t=[],drawingState:r,canvasSize:n,zoom:s,position:a,onTouchStart:i,onTouchMove:o,onTouchEnd:l,mousePosition:u,isMouseOverCanvas:d,isEraserDrawing:f},g)=>{const p=C.useRef(null),[x,y]=C.useState(.25),[v,T]=C.useState(null),[_,b]=C.useState({x:0,y:0}),[E,k]=C.useState(!1),A=C.useCallback(({x:W,y:V,size:L,visible:H,isDrawing:J})=>!H||!W||!V?null:c.jsx(uf,{x:W,y:V,radius:L/2,stroke:iI.CURSOR_COLOR,strokeWidth:2,dash:[5,5],opacity:J?.8:iI.CURSOR_OPACITY,listening:!1,zIndex:1e3}),[]),P=C.useCallback(W=>{if(r.currentTool===vh.ERASER){const V=W.target.getStage(),L=Bg(W,V);b(L)}},[r.currentTool]),j=C.useCallback(()=>{r.currentTool===vh.ERASER&&k(!0)},[r.currentTool]),O=C.useCallback(()=>{k(!1)},[]);C.useEffect(()=>{const W=g.current;if(W)return W.on("mousemove",P),W.on("mouseenter",j),W.on("mouseleave",O),()=>{W.off("mousemove",P),W.off("mouseenter",j),W.off("mouseleave",O)}},[P,j,O,g]),C.useEffect(()=>{const W=n.width??n.WIDTH,V=n.height??n.HEIGHT,L=()=>{const H=p.current;if(!H)return;const J=H.clientWidth||1,Q=H.clientHeight||1,ne=Math.abs(r.rotation%180)===90,Z=ne?V:W,se=ne?W:V,ce=Math.min(J/(Z||1),Q/(se||1));y(Math.min(ce,1))};return L(),window.addEventListener("resize",L),()=>window.removeEventListener("resize",L)},[n.width,n.height,n.WIDTH,n.HEIGHT,r.rotation]);const R=C.useMemo(()=>{const W=p.current;if(!W||!v)return 0;const V=W.clientWidth||1,L=W.clientHeight||1,H=Math.min(V/Math.max(v.width,1),L/Math.max(v.height,1));return Math.min(H,IV.MAX)},[v]),M=C.useMemo(()=>Math.max(s,x||1),[s,x]),G=C.useMemo(()=>{const W=n.width??n.WIDTH,V=n.height??n.HEIGHT;if(!p.current)return{x:0,y:0};const L=p.current.clientWidth||1,H=p.current.clientHeight||1,J=(L-W*M)/2,Q=(H-V*M)/2;return s<=x?{x:J,y:Q}:{x:a.x!==void 0?a.x:J,y:a.y!==void 0?a.y:Q}},[a,s,x,M,n.width,n.height,v,R]);C.useEffect(()=>{if(!Array.isArray(e)||e.length===0){T(null);return}let W=1/0,V=1/0,L=-1/0,H=-1/0;const J=(se,ce)=>{Number.isFinite(se)&&Number.isFinite(ce)&&(se<W&&(W=se),ce<V&&(V=ce),se>L&&(L=se),ce>H&&(H=ce))};if(e.forEach(se=>{if(Array.isArray(se))se.forEach(ce=>J(ce.x,ce.y));else if(se&&typeof se=="object"){if(se.type==="line")J(se.startX,se.startY),J(se.endX,se.endY);else if(se.type==="rectangle")J(se.startX,se.startY),J(se.endX,se.endY);else if(se.type==="circle"){const ce=Math.sqrt(Math.pow(se.endX-se.startX,2)+Math.pow(se.endY-se.startY,2))/2,he=(se.startX+se.endX)/2,Ee=(se.startY+se.endY)/2;J(he-ce,Ee-ce),J(he+ce,Ee+ce)}}}),!Number.isFinite(W)||!Number.isFinite(V)||!Number.isFinite(L)||!Number.isFinite(H)){T(null);return}const Q=16,ne=Math.max(1,L-W+Q*2),Z=Math.max(1,H-V+Q*2);T({minX:W-Q,minY:V-Q,width:ne,height:Z})},[e]),C.useEffect(()=>{console.log("CanvasViewer - drawingData:",e),console.log("CanvasViewer - drawingData length:",e?.length),console.log("CanvasViewer - textBoxes:",t),console.log("CanvasViewer - textBoxes length:",t?.length),e&&e.length>0&&console.log("CanvasViewer - first item:",e[0]),t&&t.length>0&&console.log("CanvasViewer - first textBox:",t[0])},[e,t]),C.useEffect(()=>{const W=n.width??n.WIDTH,V=n.height??n.HEIGHT;console.log("CanvasViewer - canvas dimensions:",{width:W,height:V}),console.log("CanvasViewer - zoom:",s,"fitZoom:",x,"displayScale:",M),console.log("CanvasViewer - stagePosition:",G)},[n,s,x,M,G]);const K=(W,V)=>{if(console.log(`CanvasViewer - rendering element ${V}:`,W),Array.isArray(W))return console.log(`CanvasViewer - rendering line with ${W.length} points`),c.jsx(ti,{points:W.flatMap(L=>[L.x,L.y]),stroke:W[0]?.color||"#000000",strokeWidth:W[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round"},V);if(W.type==="line")return c.jsx(ti,{points:[W.startX,W.startY,W.endX,W.endY],stroke:W.color,strokeWidth:W.thickness,lineCap:"round"},V);if(W.type==="rectangle"){const L=Math.abs(W.endX-W.startX),H=Math.abs(W.endY-W.startY),J=Math.min(W.startX,W.endX),Q=Math.min(W.startY,W.endY);return c.jsx(Ma,{x:J,y:Q,width:L,height:H,stroke:W.color,strokeWidth:W.thickness,fill:"transparent"},V)}else if(W.type==="circle"){const L=Math.sqrt(Math.pow(W.endX-W.startX,2)+Math.pow(W.endY-W.startY,2))/2,H=(W.startX+W.endX)/2,J=(W.startY+W.endY)/2;return c.jsx(uf,{x:H,y:J,radius:L,stroke:W.color,strokeWidth:W.thickness,fill:"transparent"},V)}return null},re=()=>{if(!r.isDrawing)return null;if(r.currentTool===vh.PENCIL&&r.currentLine.length>0)return c.jsx(ti,{points:r.currentLine.flatMap(W=>[W.x,W.y]),stroke:r.currentColor,strokeWidth:r.currentThickness,tension:.5,lineCap:"round",lineJoin:"round"});if(r.currentShape){const{type:W,startX:V,startY:L,endX:H,endY:J,color:Q,thickness:ne}=r.currentShape;if(W===vh.LINE)return c.jsx(ti,{points:[V,L,H,J],stroke:Q,strokeWidth:ne,lineCap:"round"});if(W===vh.RECTANGLE){const Z=Math.abs(H-V),se=Math.abs(J-L),ce=Math.min(V,H),he=Math.min(L,J);return c.jsx(Ma,{x:ce,y:he,width:Z,height:se,stroke:Q,strokeWidth:ne,fill:"transparent"})}else if(W===vh.CIRCLE){const Z=Math.sqrt(Math.pow(H-V,2)+Math.pow(J-L,2))/2,se=(V+H)/2,ce=(L+J)/2;return c.jsx(uf,{x:se,y:ce,radius:Z,stroke:Q,strokeWidth:ne,fill:"transparent"})}}return null},Y=r.isFullscreen?{position:"fixed",inset:0,width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",zIndex:60}:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"},ee={transform:`rotate(${r.rotation}deg)`,transformOrigin:"center center"},B=C.useCallback(W=>{W.preventDefault(),W.stopPropagation()},[]),z=C.useCallback(W=>{W.preventDefault(),W.stopPropagation()},[]),I=C.useCallback(W=>{W.preventDefault(),W.stopPropagation()},[]);return c.jsx("div",{style:{...Y,touchAction:"none",WebkitTouchCallout:"none"},ref:p,className:"select-none",onTouchStart:B,onTouchMove:z,onTouchEnd:I,children:c.jsx("div",{style:{...ee,touchAction:"none",WebkitTouchCallout:"none"},className:"select-none",onTouchStart:B,onTouchMove:z,onTouchEnd:I,children:c.jsx(qh,{ref:g,width:Math.max((n.width??n.WIDTH)||0,1536),height:Math.max((n.height??n.HEIGHT)||0,2048),scaleX:M,scaleY:M,x:G.x,y:G.y,onTouchStart:i,onTouchMove:o,onTouchEnd:l,children:c.jsxs(Vh,{children:[c.jsx(Ma,{x:0,y:0,width:Math.max((n.width??n.WIDTH)||0,1536),height:Math.max((n.height??n.HEIGHT)||0,2048),fill:"white"}),e.map((W,V)=>(console.log(`CanvasViewer - mapping item ${V}:`,W),K(W,V))),t&&t.map((W,V)=>c.jsx(Ma,{x:W.x,y:W.y,width:W.width,height:W.height,fill:"#ffffff",stroke:"#d1d5db",strokeWidth:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1}},`textbox-${V}`)),t&&t.map((W,V)=>c.jsx(Mc,{x:W.x+8,y:W.y+8,width:W.width-16,height:W.height-16,text:W.text,fontSize:W.fontSize||14,fill:W.color||"#000000",wrap:"word",align:"left",verticalAlign:"top"},`text-${V}`)),re(),r.currentTool===vh.ERASER&&c.jsx(A,{x:_.x,y:_.y,size:r.eraserSize,visible:E,isDrawing:f})]})})})})});BV.displayName="CanvasViewer";function Pde({containerRef:e,canvasSize:t,rotation:r=0}){const[n,s]=C.useState(1),[a,i]=C.useState({x:0,y:0}),o=C.useRef({width:1,height:1}),l=C.useRef(.01),u=C.useRef(0),d=C.useRef(!1),f=C.useCallback(()=>{const E=t?.width??t?.WIDTH??0,k=t?.height??t?.HEIGHT??0,A=Math.abs(r%180)===90;return{width:A?k:E,height:A?E:k}},[t,r]),g=C.useCallback(()=>{const E=e?.current;if(!E)return{width:1,height:1};const k=E.clientWidth||1,A=E.clientHeight||1;return o.current={width:k,height:A},{width:k,height:A}},[e]),p=C.useCallback(()=>{const{width:E,height:k}=o.current,{width:A,height:P}=f(),j=E/Math.max(A,1),O=k/Math.max(P,1);return Math.min(j,O,1)*.98},[f]),x=C.useCallback(E=>{const{width:k,height:A}=o.current,{width:P,height:j}=f(),O=Math.max(l.current,Math.min(E,1.5));let R=(k-P*O)/2,M=(A-j*O)/2;const G=k-P*O,K=A-j*O;R=Math.min(Math.max(0,R),Math.max(0,G)),M=Math.min(Math.max(0,M),Math.max(0,K));try{console.log("[Camera] centerAtScale",{targetScale:E,clampedScale:O,container:{containerW:k,containerH:A},canvas:{canvasW:P,canvasH:j},translate:{x:R,y:M},rotation:r})}catch{}i({x:R,y:M}),s(O)},[f]),y=C.useCallback(()=>{const{width:E,height:k}=g(),{width:A,height:P}=f(),j=p();let O=(E-A*j)/2,R=(k-P*j)/2;const M=E-A*j,G=k-P*j;O=Math.min(Math.max(0,O),Math.max(0,M)),R=Math.min(Math.max(0,R),Math.max(0,G));try{console.log("[Camera] fitCanvas",{scale:j,container:{containerW:E,containerH:k},canvas:{canvasW:A,canvasH:P},translate:{x:O,y:R},rotation:r})}catch{}s(j),i({x:O,y:R}),l.current=j,d.current=!1},[f,g,p]),v=C.useCallback(()=>{const{width:E,height:k}=g(),{width:A,height:P}=f(),j=(E-A)/2,O=(k-P)/2;s(1),i({x:j,y:O})},[f,g]),T=C.useCallback((E,k)=>{const{width:A,height:P}=o.current,{width:j,height:O}=f(),R=Math.max(l.current,Math.min(E,1.5));if(k&&Number.isFinite(k.x)&&Number.isFinite(k.y)){const M={x:(k.x-a.x)/n,y:(k.y-a.y)/n},G=k.x-M.x*R,K=k.y-M.y*R;try{console.log("[Camera] zoomTo(pointer) ->",{from:n,to:R})}catch{}s(R),i({x:G,y:K}),u.current=Date.now()+400,d.current=!0}else{let M=(A-j*R)/2,G=(P-O*R)/2;const K=A-j*R,re=P-O*R;M=Math.min(Math.max(0,M),Math.max(0,K)),G=Math.min(Math.max(0,G),Math.max(0,re));try{console.log("[Camera] zoomTo(center) ->",{from:n,to:R})}catch{}s(R),i({x:M,y:G}),u.current=Date.now()+400,d.current=!0}},[f,n,a]),_=C.useCallback((E,k)=>{const A=n*E,{width:P,height:j}=o.current,O={x:P/2,y:j/2};T(A,k||O)},[n,T]),b=C.useCallback((E,k)=>{i(A=>({x:A.x+E,y:A.y+k})),u.current=Date.now()+200,d.current=!0},[]);return C.useEffect(()=>{const E=e?.current;if(!E)return;const k=new ResizeObserver(()=>{g();const A=p();if(l.current=A,!(Date.now()<u.current)&&!d.current){try{console.log("[Camera] resize centerAtScale",{scale:n})}catch{}x(n)}});return k.observe(E),g(),()=>k.disconnect()},[e,g,p,x,n]),C.useEffect(()=>{d.current=!1,l.current=p(),x(n)},[r,t?.width,t?.height,t?.WIDTH,t?.HEIGHT,p,x,n]),C.useMemo(()=>({scale:n,translate:a,setScale:s,setTranslate:i,centerAtScale:x,fitCanvas:y,oneToOne:v,zoomTo:T,zoomByFactor:_,panBy:b}),[n,a,x,y,v,T,_,b])}const lx=new Map,$V=C.forwardRef(({drawingData:e,textBoxes:t=[],canvasSize:r,rotation:n=0,onScaleChange:s,persistKey:a="viewer",onTextBoxEdit:i},o)=>{const l=C.useRef(null),u=C.useRef(null),d=Pde({containerRef:l,canvasSize:r,rotation:n}),[f,g]=C.useState({width:1,height:1}),p=C.useRef(null),x=C.useRef(null),[y,v]=C.useState(null);C.useEffect(()=>{console.log("[ViewerCanvas] drawingData received:",e),console.log("[ViewerCanvas] drawingData length:",e?.length),e&&e.length>0&&console.log("[ViewerCanvas] First drawing element:",e[0]),console.log("[ViewerCanvas] textBoxes:",t),console.log("[ViewerCanvas] textBoxes length:",t?.length)},[e]),C.useEffect(()=>{typeof s=="function"&&s(d.scale);try{console.log("[ViewerCanvas] scale changed",{scale:d.scale})}catch{}if(a){const I=lx.get(a)||{};lx.set(a,{...I,scale:d.scale})}},[d.scale,s]),C.useEffect(()=>{if(a){const I=lx.get(a)||{};lx.set(a,{...I,translate:{x:d.translate.x,y:d.translate.y}})}},[a,d.translate.x,d.translate.y]),C.useImperativeHandle(o,()=>({zoomIn:I=>d.zoomByFactor(1.1,I),zoomOut:I=>d.zoomByFactor(1/1.1,I),fitCanvas:()=>d.fitCanvas(),oneToOne:()=>d.oneToOne(),getScale:()=>d.scale,getStage:()=>u.current,getPointerPosition:()=>u.current?.getPointerPosition?.(),exportPNGFullCanvas:()=>{const I=u.current;if(!I)return null;const W=r?.width??r?.WIDTH??1536,V=r?.height??r?.HEIGHT??2048,L={scaleX:I.scaleX(),scaleY:I.scaleY(),x:I.x(),y:I.y(),width:I.width(),height:I.height()},H=p.current,J=x.current,Q=H?{x:H.x(),y:H.y(),scaleX:H.scaleX(),scaleY:H.scaleY()}:null,ne=J?{x:J.x(),y:J.y(),rotation:J.rotation()}:null;try{return I.scale({x:1,y:1}),I.position({x:0,y:0}),I.size({width:W,height:V}),H&&(H.position({x:0,y:0}),H.scale({x:1,y:1})),J&&(J.position({x:0,y:0}),J.rotation(0)),I.batchDraw(),I.toDataURL({mimeType:"image/png",quality:1,pixelRatio:1,x:0,y:0,width:W,height:V})}finally{J&&ne&&(J.position({x:ne.x,y:ne.y}),J.rotation(ne.rotation)),H&&Q&&(H.position({x:Q.x,y:Q.y}),H.scale({x:Q.scaleX,y:Q.scaleY})),I.scale({x:L.scaleX,y:L.scaleY}),I.position({x:L.x,y:L.y}),I.size({width:L.width,height:L.height}),I.batchDraw()}}}),[d]),C.useEffect(()=>{const I=l.current;if(!I)return;const W=()=>{g({width:I.clientWidth||1,height:I.clientHeight||1})};W();const V=new ResizeObserver(W);return V.observe(I),()=>V.disconnect()},[]),C.useEffect(()=>{if(!Array.isArray(e)||e.length===0){v(null);return}let I=1/0,W=1/0,V=-1/0,L=-1/0;const H=(Z,se)=>{Number.isFinite(Z)&&Number.isFinite(se)&&(Z<I&&(I=Z),se<W&&(W=se),Z>V&&(V=Z),se>L&&(L=se))};if(e.forEach(Z=>{if(Array.isArray(Z))Z.forEach(se=>H(se.x,se.y));else if(Z&&typeof Z=="object"){if(Z.type==="line")H(Z.startX,Z.startY),H(Z.endX,Z.endY);else if(Z.type==="rectangle")H(Z.startX,Z.startY),H(Z.endX,Z.endY);else if(Z.type==="circle"){const se=Math.hypot(Z.endX-Z.startX,Z.endY-Z.startY)/2,ce=(Z.startX+Z.endX)/2,he=(Z.startY+Z.endY)/2;H(ce-se,he-se),H(ce+se,he+se)}}}),!Number.isFinite(I)||!Number.isFinite(W)||!Number.isFinite(V)||!Number.isFinite(L)){v(null);return}const J=16,Q=Math.max(1,V-I+J*2),ne=Math.max(1,L-W+J*2);v({minX:I-J,minY:W-J,width:Q,height:ne,centerX:I-J+Q/2,centerY:W-J+ne/2})},[e]);const T=C.useMemo(()=>{if(!y)return{scale:1,x:0,y:0};const I=r?.width??r?.WIDTH??1536,W=r?.height??r?.HEIGHT??2048,V=Math.min(I/Math.max(1,y.width),W/Math.max(1,y.height),1),L=y.width*V,H=y.height*V,J=(I-L)/2,Q=(W-H)/2,ne=J-y.minX*V,Z=Q-y.minY*V;return{scale:V,x:ne,y:Z}},[y,r?.width,r?.height,r?.WIDTH,r?.HEIGHT]),_=C.useRef(!1);C.useEffect(()=>{if(_.current)return;const I=a?lx.get(a):null;I&&Number.isFinite(I.scale)&&I.translate&&Number.isFinite(I.translate.x)&&Number.isFinite(I.translate.y)?(d.setScale(I.scale),d.setTranslate(I.translate)):d.fitCanvas(),_.current=!0},[a,d]),C.useEffect(()=>{try{console.log("[ViewerCanvas] rotation changed",{rotation:n,scale:d.scale,translate:d.translate})}catch{}d.fitCanvas()},[n]),C.useEffect(()=>{d.centerAtScale(d.scale)},[n]);const b=I=>{I.evt.preventDefault();const W=u.current;if(!W)return;const V=W.getPointerPosition(),L=Math.pow(1.0015,-I.evt.deltaY);d.zoomByFactor(L,V)},E=C.useRef(!1),k=C.useRef({x:0,y:0}),A=()=>{const I=l.current;if(!I)return 1;const W=I.clientWidth||1,V=I.clientHeight||1,L=r?.width??r?.WIDTH??1,H=r?.height??r?.HEIGHT??1,J=Math.abs(n%180)===90,Q=J?H:L,ne=J?L:H,Z=Math.min(W/Q,V/ne);return Math.min(Z,1)},P=I=>{const W=A();d.scale<=W||(E.current=!0,k.current={x:I.evt.clientX,y:I.evt.clientY})},j=I=>{if(!E.current)return;const W=I.evt.clientX-k.current.x,V=I.evt.clientY-k.current.y;k.current={x:I.evt.clientX,y:I.evt.clientY},d.panBy(W,V)},O=()=>{E.current=!1},R=1536,M=2048,G=(I,W)=>{if(console.log(`[ViewerCanvas] Rendering drawing element ${W}:`,I),Array.isArray(I))return console.log(`[ViewerCanvas] Array item with ${I.length} points:`,I.slice(0,3)),c.jsx(ti,{points:I.flatMap(V=>[V.x,V.y]),stroke:I[0]?.color||"#000000",strokeWidth:I[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round"},W);if(I?.type==="line")return c.jsx(ti,{points:[I.startX,I.startY,I.endX,I.endY],stroke:I.color,strokeWidth:I.thickness,lineCap:"round"},W);if(I?.type==="rectangle"){const V=Math.abs(I.endX-I.startX),L=Math.abs(I.endY-I.startY),H=Math.min(I.startX,I.endX),J=Math.min(I.startY,I.endY);return c.jsx(Ma,{x:H,y:J,width:V,height:L,stroke:I.color,strokeWidth:I.thickness,fill:"transparent"},W)}else if(I?.type==="circle"){const V=Math.sqrt(Math.pow(I.endX-I.startX,2)+Math.pow(I.endY-I.startY,2))/2,L=(I.startX+I.endX)/2,H=(I.startY+I.endY)/2;return c.jsx(uf,{x:L,y:H,radius:V,stroke:I.color,strokeWidth:I.thickness,fill:"transparent"},W)}return null},K=C.useRef(new Map),re=C.useRef(null),Y=C.useRef({x:0,y:0}),ee=C.useCallback(I=>{const W=l.current;W&&(W.setPointerCapture?.(I.pointerId),K.current.set(I.pointerId,{x:I.clientX,y:I.clientY}),k.current={x:I.clientX,y:I.clientY})},[]),B=C.useCallback(I=>{const W=K.current;if(W.has(I.pointerId)){if(W.set(I.pointerId,{x:I.clientX,y:I.clientY}),W.size===2){const V=Array.from(W.values()),L=V[1].x-V[0].x,H=V[1].y-V[0].y,J=Math.hypot(L,H),Q={x:(V[0].x+V[1].x)/2,y:(V[0].y+V[1].y)/2},ne=u.current,Z=ne&&ne.getPointerPosition()||Q;if(re.current!=null){const se=J/Math.max(1,re.current);d.zoomByFactor(se,Z)}re.current=J,Y.current=Z}else if(W.size===1){const V=A();if(d.scale<=V)return;const L=I.clientX-k.current.x,H=I.clientY-k.current.y;k.current={x:I.clientX,y:I.clientY},d.panBy(L,H)}}},[]),z=C.useCallback(I=>{const W=l.current;W&&(W.releasePointerCapture?.(I.pointerId),K.current.delete(I.pointerId),K.current.size<2&&(re.current=null),E.current=!1)},[]);return c.jsx("div",{ref:l,style:{width:"100%",height:"100%",display:"block",backgroundColor:"transparent",touchAction:"none",WebkitTouchCallout:"none"},className:"select-none",onPointerDown:ee,onPointerMove:B,onPointerUp:z,children:c.jsx(qh,{ref:u,width:f.width,height:f.height,onWheel:b,onMouseDown:P,onMouseMove:j,onMouseUp:O,onMouseLeave:O,children:c.jsx(Vh,{children:c.jsx(Kl,{ref:p,x:d.translate.x,y:d.translate.y,scaleX:d.scale,scaleY:d.scale,children:(()=>{const I=(n%360+360)%360;let W=0,V=0;I===90?W=M:I===180?(W=R,V=M):I===270&&(V=R);try{console.log("[ViewerCanvas] rotatedGroup offset",{rotation:n,norm:I,tx:W,ty:V,canvasW:R,canvasH:M})}catch{}return c.jsxs(Kl,{ref:x,x:W,y:V,rotation:n,children:[c.jsx(Ma,{x:0,y:0,width:R,height:M,fill:"white"}),c.jsxs(Kl,{x:T.x,y:T.y,scaleX:T.scale,scaleY:T.scale,children:[Array.isArray(e)?(console.log("[ViewerCanvas] Rendering",e.length,"drawing elements"),e.map((L,H)=>G(L,H))):null,Array.isArray(t)&&t.map((L,H)=>c.jsxs(Kl,{x:L.x,y:L.y,children:[c.jsx(Ma,{width:L.width,height:L.height,fill:"#ffffff",stroke:"#d1d5db",strokeWidth:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1}}),c.jsx(Mc,{text:L.text,x:8,y:8,width:Math.max(0,(L.width||0)-16),height:Math.max(0,(L.height||0)-16),fontSize:L.fontSize||14,fill:L.color||"#000000",wrap:"word",align:"left",verticalAlign:"top"})]},`tb-${H}`))]})]})})()})})})})});$V.displayName="ViewerCanvas";const Ode=({zoom:e,onZoomIn:t,onZoomOut:r,onRotate:n,onDownload:s,onFullscreen:a,isFullscreen:i})=>c.jsxs("div",{className:"absolute top-4 right-4 flex flex-col space-y-2 items-center justify-center",children:[c.jsx(nt,{onClick:t,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Zoom In",children:c.jsx(ude,{className:"w-4 h-4 mx-auto my-auto"})}),c.jsx(nt,{onClick:r,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Zoom Out",children:c.jsx(fde,{className:"w-4 h-4 mx-auto my-auto"})}),c.jsx(nt,{onClick:n,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Rotate",children:c.jsx(ode,{className:"w-4 h-4 mx-auto my-auto"})}),c.jsx(nt,{onClick:s,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Download",children:c.jsx(nde,{className:"w-4 h-4 mx-auto my-auto"})}),c.jsx(nt,{onClick:a,variant:"secondary",size:"icon",className:"w-10 h-10",title:i?"Exit Fullscreen":"Enter Fullscreen",children:i?c.jsx(DV,{className:"w-4 h-4 mx-auto my-auto"}):c.jsx(ade,{className:"w-4 h-4 mx-auto my-auto"})})]}),Fde=({currentQuestion:e,totalQuestions:t,onPrevious:r,onNext:n,drawingDataLength:s})=>t<=1?null:c.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(nt,{onClick:r,disabled:e===0,variant:"outline",size:"sm",children:"Previous"}),c.jsxs("span",{className:"text-sm text-gray-600",children:["Question ",e+1," of ",t]}),c.jsx(nt,{onClick:n,disabled:e===t-1,variant:"outline",size:"sm",children:"Next"})]}),c.jsxs("div",{className:"text-sm text-gray-500",children:[s," lines"]})]})}),UV=({drawing:e,isOpen:t,onClose:r,onScoreChange:n,onMaxScoreChange:s,isTeacherView:a=!1,onSaveScore:i})=>{const{drawingState:o,setDrawingState:l,drawingData:u,setDrawingData:d,textBoxes:f,setTextBoxes:g,saveToHistoryState:p,undo:x,redo:y,canUndoState:v,canRedoState:T}=vde(),{questionsData:_,currentQuestionIndex:b,setCurrentQuestionIndex:E}=Ade(e),{zoom:k,position:A,handleZoomIn:P,handleZoomOut:j}=Nde(IV,Ll),{isFullscreen:O,enterFullscreen:R,exitFullscreen:M}=jde(o,l),{handleTouchStart:G,handleTouchMove:K,handleTouchEnd:re}=Ede(o,l,u,d,p,x,y,v,T),Y=C.useRef(null),ee=C.useRef(null),[B,z]=C.useState(1),[I,W]=C.useState(""),[V,L]=C.useState("");C.useEffect(()=>{if(console.log("DrawingModal - questionsData:",_),console.log("DrawingModal - currentQuestionIndex:",b),_.length>0){const he=_[b]?.drawingData||[],Ee=_[b]?.textBoxes||[];console.log("DrawingModal - setting drawingData:",he),console.log("DrawingModal - setting textBoxes:",Ee),d(he),g(Ee)}},[_,b,d,g]),C.useEffect(()=>{t&&e&&(W((Number.isFinite(e.score)?e.score:0).toString()),L("10"))},[t,e]);const H=()=>{b>0&&E(b-1)},J=()=>{b<_.length-1&&E(b+1)},Q=()=>{v&&x()},ne=()=>{T&&y()};C.useEffect(()=>{const he=Ee=>{(Ee.ctrlKey||Ee.metaKey)&&(Ee.key==="z"&&!Ee.shiftKey?(Ee.preventDefault(),Q()):(Ee.key==="y"||Ee.key==="z"&&Ee.shiftKey)&&(Ee.preventDefault(),ne()))};return document.addEventListener("keydown",he),()=>document.removeEventListener("keydown",he)},[Q,ne]);const Z=()=>{l(he=>({...he,rotation:(he.rotation+90)%360}))},se=()=>{if(a&&ee.current){const me=ee.current.exportPNGFullCanvas();if(!me)return;const Ne=document.createElement("a");Ne.href=me,Ne.download=`drawing-${e?.name||"student"}-${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne);return}const he=Y.current;if(!he)return;const Ee=he.toDataURL({mimeType:"image/png",quality:1,pixelRatio:1,x:0,y:0,width:Ll.WIDTH,height:Ll.HEIGHT}),ie=document.createElement("a");ie.href=Ee,ie.download=`drawing-${e?.name||"student"}-${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(ie),ie.click(),document.body.removeChild(ie)},ce=async()=>{if(!a)return r();const he=parseInt(I,10),Ee=10;Number.isFinite(he)&&(typeof i=="function"?await i({resultId:e.id,score:Math.max(0,Math.min(10,he)),maxScore:Ee}):(n&&n(e.id,he),s&&s(e.id,Ee))),r()};return!t||!e?null:c.jsx(co,{children:c.jsx(rt.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:c.jsxs(rt.div,{className:"bg-white rounded-lg shadow-xl max-w-4xl h-[90vh] w-full mx-4 flex flex-col select-none",style:{touchAction:"none",WebkitTouchCallout:"none"},initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:he=>he.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Drawing Submission"}),c.jsxs("p",{className:"text-sm text-gray-600",children:[e.name," ",e.surname," - ",e.test_name]})]}),c.jsx(nt,{onClick:r,variant:"ghost",size:"icon",className:"text-gray-400 hover:text-gray-600",children:c.jsx(DV,{className:"w-5 h-5"})})]}),_.length>1&&c.jsx(Fde,{currentQuestion:b,totalQuestions:_.length,onPrevious:H,onNext:J,drawingDataLength:_[b]?.drawingData?.length||0}),c.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[c.jsxs("div",{className:"flex-1 min-h-0 relative overflow-hidden bg-gray-100 p-0 sm:p-4 select-none",style:{touchAction:"none",WebkitTouchCallout:"none"},children:[a?c.jsx($V,{ref:ee,drawingData:u,textBoxes:f,canvasSize:{width:Ll.WIDTH,height:Ll.HEIGHT,WIDTH:Ll.WIDTH,HEIGHT:Ll.HEIGHT},rotation:o.rotation,onScaleChange:z}):c.jsx(BV,{ref:Y,drawingData:u,textBoxes:f,drawingState:o,canvasSize:{width:Ll.WIDTH,height:Ll.HEIGHT,WIDTH:Ll.WIDTH,HEIGHT:Ll.HEIGHT},zoom:k,position:A,onTouchStart:G,onTouchMove:K,onTouchEnd:re,mousePosition:{x:0,y:0},isMouseOverCanvas:!1,isEraserDrawing:!1}),c.jsx(Ode,{zoom:a?B:k,onZoomIn:()=>{if(a&&ee.current){try{console.log("[ZoomButton] ZoomIn click (teacher)",{before:ee.current.getScale?.()})}catch{}ee.current.zoomIn(void 0),setTimeout(()=>{try{console.log("[ZoomButton] ZoomIn after",{after:ee.current.getScale?.()})}catch{}},0)}else P()},onZoomOut:()=>{if(a&&ee.current){try{console.log("[ZoomButton] ZoomOut click (teacher)",{before:ee.current.getScale?.()})}catch{}ee.current.zoomOut(void 0),setTimeout(()=>{try{console.log("[ZoomButton] ZoomOut after",{after:ee.current.getScale?.()})}catch{}},0)}else j()},onRotate:Z,onDownload:se,onFullscreen:O?M:R,isFullscreen:O}),c.jsxs("div",{className:"absolute bottom-4 left-4 bg-gray-800 bg-opacity-70 text-white px-3 py-1 rounded-full text-sm",children:[Math.round((a?B:k)*100),"%"]})]}),a&&c.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Score:"}),c.jsx("input",{type:"number",min:"0",max:10,value:I,onChange:he=>W(he.target.value),className:"w-20 px-3 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max:"}),c.jsx("input",{type:"number",value:10,disabled:!0,className:"w-20 px-3 py-1 text-sm border border-gray-300 rounded bg-gray-100"})]}),c.jsx(nt,{onClick:ce,variant:"primary",size:"sm",children:"Save"})]})})]})]})})})},WV=({testType:e,testId:t,studentAnswers:r,onBackToCabinet:n,compact:s=!1,showAll:a=!1,onToggleShowAll:i,maxInitial:o=3})=>{const l=yo(),{user:u,isAuthenticated:d}=ls(),{testResults:f,loadTestResults:g}=A1(),[p,x]=C.useState(!0),[y,v]=C.useState(""),[T,_]=C.useState([]),[b,E]=C.useState([]),[k,A]=C.useState(null),[P,j]=C.useState([]),[O,R]=C.useState(0),[M,G]=C.useState(0),[K,re]=C.useState(!1),[Y,ee]=C.useState(null);C.useEffect(()=>{B()},[e,t]),C.useEffect(()=>{!e&&!t&&(f&&f.results?(console.log(" Using cached test results from TestContext"),E(f.results),x(!1)):I())},[e,t,f]);const B=C.useCallback(async()=>{console.log(" Initializing Student Results...");try{if(x(!0),v(""),!d||!u){console.log(" User not authenticated"),v("User not authenticated");return}if(u.role!==Gi.STUDENT){console.error(" Invalid user role for student results:",u.role),v("Access denied. Student role required.");return}console.log(" Loading test results..."),await g(u?.student_id||u?.id||""),e&&t&&r&&(console.log(" Loading specific test results..."),await z(e,t,r)),console.log(" Student Results initialization complete!")}catch(ne){console.error(" Error initializing student results:",ne),v("Failed to initialize student results")}finally{x(!1)}},[d,u,e,t,r,g]),z=C.useCallback(async(ne,Z,se)=>{console.log(" Loading specific test results:",ne,Z);try{const ce=await yn.getTestInfo(ne,Z);console.log(" Test info loaded:",ce),A(ce);const he=await yn.getTestQuestions(ne,Z);console.log(" Test questions loaded:",he),j(he);const Ee=gf(he,se,ne).score,ie=he.length>0?Math.round(Ee/he.length*100):0;R(Ee),G(ie),console.log(" Test results calculated:",{score:Ee,percentage:ie})}catch(ce){throw console.error(" Error loading specific test results:",ce),ce}},[]),I=C.useCallback(async(ne=0)=>{console.log(" Loading all student results using existing test results API...",ne>0?`(retry ${ne})`:"");try{if(!(u?.student_id||u?.sub))throw new Error("Student ID not found");const se=await yn.getStudentTestResults();if(se.success){console.log(" All student results loaded:",se.results.length,"results");const ce=se.results.map(he=>({...he,caught_cheating:he.caught_cheating||!1,visibility_change_times:he.visibility_change_times||0}));E(ce),ee(new Date),se.results.length===0&&ne===0&&(console.log(" No results found, retrying in 2 seconds..."),setTimeout(()=>{I(1)},2e3))}else throw new Error(se.error||"Failed to load student results")}catch(Z){console.error(" Error loading all student results:",Z),v(Z.message)}},[u]),W=C.useCallback(ne=>({"Listening and Speaking":"L&S","Reading and Writing":"R&W","English for Career":"Eng for Career","Science Fundamental":"Science F","Science Supplementary":"Science S","Math Fundamental":"Math F","Math Supplementary":"Math S","English for Communication":"Eng for Comm"})[ne]||ne,[]),V=C.useCallback(ne=>{if(!ne||ne.length===0)return c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"No results available"})});const Z=a?ne:ne.slice(0,o);return c.jsxs("div",{className:"overflow-x-auto",children:[c.jsxs("table",{className:"w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),c.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),c.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test Name"}),c.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Result"}),c.jsx("th",{className:"hidden sm:table-cell px-2 sm:px-4 lg:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Z.map((se,ce)=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs font-medium text-gray-900",children:c.jsx("span",{className:"bg-blue-100 text-blue-800 px-0.5 sm:px-2 py-0.5 rounded text-xs",children:W(se.subject)})}),c.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-gray-500 truncate max-w-12 sm:max-w-none",children:se.teacher_name}),c.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-gray-500 truncate max-w-16 sm:max-w-none",children:se.test_name}),c.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-gray-500",children:c.jsx("div",{className:"flex flex-col items-center space-y-1",children:se.test_type==="drawing"?se.score!==null?c.jsxs("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold ${Math.round(se.score/se.max_score*100)>=80?"bg-green-100 text-green-800":Math.round(se.score/se.max_score*100)>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[se.score,"/",se.max_score," (",Math.round(se.score/se.max_score*100),"%)"]}):c.jsx("span",{className:"px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold bg-gray-100 text-gray-800",children:"Pending Review"}):se.test_type==="speaking"?se.score!==null?c.jsxs("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold ${Math.round(se.score/se.max_score*100)>=80?"bg-green-100 text-green-800":Math.round(se.score/se.max_score*100)>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[se.score,"/",se.max_score," (",Math.round(se.score/se.max_score*100),"%)"]}):c.jsx("span",{className:"px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold bg-gray-100 text-gray-800",children:"Pending Review"}):c.jsxs("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold ${Math.round(se.score/se.max_score*100)>=80?"bg-green-100 text-green-800":Math.round(se.score/se.max_score*100)>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[se.score,"/",se.max_score," (",Math.round(se.score/se.max_score*100),"%)"]})})}),c.jsx("td",{className:"hidden sm:table-cell px-2 sm:px-4 lg:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:new Date(se.submitted_at).toLocaleDateString()})]},ce))})]}),ne.length>o&&i&&c.jsx("div",{className:"text-center pt-4",children:c.jsx("button",{onClick:i,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:a?"Show Less":`Show ${ne.length-o} More`})})]})},[W,a,o,i]),L=C.useCallback((ne,Z)=>{if(console.log(" formatAnswer called with:",{answer:ne,testType:Z,answerType:typeof ne}),!ne)return"No answer";switch(Z){case"true_false":const se=typeof ne=="boolean"?ne:ne==="true";return console.log(" Boolean answer processed:",se),se?"True":"False";case"multiple_choice":return ne.toUpperCase();case"input":return ne;case"word_matching":return typeof ne=="object"?Object.entries(ne).map(([ce,he])=>`${ce}  ${he}`).join(", "):ne;case"drawing":return"Drawing submitted";default:return ne}},[]),H=C.useCallback(()=>!k||!P||!r?null:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:["Test Results: ",k.test_name||k.title||"Test"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-blue-600",children:O}),c.jsx("p",{className:"text-sm text-gray-500",children:"Correct Answers"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-gray-900",children:P.length}),c.jsx("p",{className:"text-sm text-gray-500",children:"Total Questions"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:`text-3xl font-bold ${M>=80?"text-green-600":M>=60?"text-yellow-600":"text-red-600"}`,children:[M,"%"]}),c.jsx("p",{className:"text-sm text-gray-500",children:"Score"})]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Questions Review"}),c.jsx("div",{className:"space-y-4",children:P.map((ne,Z)=>{const se=r[Z],ce=gv(ne,e),he=_p(ne,se,e);return c.jsxs("div",{className:`border rounded-lg p-4 ${he?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("h4",{className:"font-medium text-gray-900",children:["Question ",Z+1]}),c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${he?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:he?"Correct":"Incorrect"})]}),c.jsx("p",{className:"text-gray-700 mb-3",children:ne.question}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Your Answer:"}),c.jsx("p",{className:"text-sm text-gray-900",children:L(se,e)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Correct Answer:"}),c.jsx("p",{className:"text-sm text-gray-900",children:L(ce,e)})]})]})]},Z)})})]})]}),[k,P,r,e,O,M,gv,_p,L]),J=C.useCallback(()=>{if(!b||b.length===0)return c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"No test results available yet."})});const ne={};return b.forEach(Z=>{const se=Z.subject||"Unknown Subject";ne[se]||(ne[se]=[]),ne[se].push(Z)}),c.jsx("div",{className:"space-y-6",children:Object.entries(ne).map(([Z,se])=>c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:Z})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test Name"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:se.map((ce,he)=>{const Ee=Math.round(ce.score/ce.max_score*100),ie=Ee>=80?"text-green-600":Ee>=60?"text-yellow-600":"text-red-600";return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:ce.test_name}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ce.teacher_name||"Unknown"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c.jsxs("span",{className:ie,children:[ce.score,"/",ce.max_score," (",Ee,"%)"]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(ce.submitted_at).toLocaleDateString()})]},he)})})]})})]},Z))})},[b]);C.useCallback(()=>{console.log(" Clearing test data and returning to cabinet..."),A(null),j([]),setStudentAnswers(null),R(0),G(0),re(!1),n?n():l("/student")},[n,l]);const Q=C.useCallback(()=>{console.log(" Navigating back to cabinet..."),n?n():l("/student")},[n,l]);return C.useCallback((ne,Z)=>{const se={id:Date.now(),message:ne,type:Z,timestamp:new Date};_(ce=>[...ce,se]),setTimeout(()=>{_(ce=>ce.filter(he=>he.id!==se.id))},bf.NOTIFICATION_DURATION)},[]),p?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Gr,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Student Results..."})]})}):y?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Results Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:y}),c.jsx(nt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):s?c.jsxs("div",{children:[p?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(Gr,{size:"md"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Loading results..."})]}):y?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-red-500 text-4xl mb-2",children:""}),c.jsx("p",{className:"text-red-600",children:y})]}):V(b),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:T.map(ne=>c.jsx(tc,{type:ne.type,message:ne.message,onClose:()=>_(Z=>Z.filter(se=>se.id!==ne.id))},ne.id))})]}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Results"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",Y?Y.toLocaleString():"Never"]})]}),c.jsxs("div",{className:"flex space-x-3",children:[k&&c.jsx(nt,{variant:"outline",onClick:()=>re(!K),children:K?"Hide Details":"Show Details"}),c.jsx(nt,{variant:"outline",onClick:Q,children:"Back to Cabinet"})]})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:K&&k?H():J()}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:T.map(ne=>c.jsx(tc,{type:ne.type,message:ne.message,onClose:()=>_(Z=>Z.filter(se=>se.id!==ne.id))},ne.id))}),selectedDrawing&&c.jsx(UV,{drawing:selectedDrawing,isOpen:isDrawingModalOpen,onClose:()=>setIsDrawingModalOpen(!1)})]})},Rde=({isMenuOpen:e,onToggleMenu:t,onShowPasswordChange:r})=>{const n=yo(),{user:s,isAuthenticated:a,logout:i}=ls(),{studentData:o,loadStudentData:l}=rS(),{activeTests:u,testResults:d,loadActiveTests:f,loadTestResults:g,viewTestDetails:p,testDetailsModal:x,closeTestDetailsModal:y}=A1(),[v,T]=C.useState(!0),[_,b]=C.useState(""),[E,k]=C.useState([]),[A,P]=C.useState(null),[j,O]=C.useState(!1),[R,M]=C.useState(null),[G,K]=C.useState(null),[re,Y]=C.useState(new Set),[ee,B]=C.useState(!1),[z,I]=C.useState(!1),[W,V]=C.useState(!1),[L,H]=C.useState(!1);C.useEffect(()=>{J()},[]),C.useEffect(()=>()=>{V(!1)},[]),C.useEffect(()=>{if(W){const me=setTimeout(()=>{V(!1)},1e3);return()=>clearTimeout(me)}},[W]);const J=C.useCallback(async()=>{console.log(" Initializing Student Cabinet...");try{if(T(!0),b(""),!a||!s){console.log(" User not authenticated, redirecting to login"),n("/login");return}if(s.role!==Gi.STUDENT){console.error(" Invalid user role for student cabinet:",s.role),b("Access denied. Student role required.");return}console.log(" Loading active tests (single API call)...");const me=s?.student_id||s?.id||"";if(Q(me)){console.log(" Cache refresh triggered - clearing cache");try{const Oe=`student_active_tests_${me}`,Re=`student_results_table_${me}`;localStorage.removeItem(Oe),localStorage.removeItem(Re)}catch{}}else console.log(" Using existing cache - no refresh needed");try{localStorage.removeItem(`student_active_tests_${me}`)}catch{}await f(me),console.log(" Student Cabinet initialization complete!")}catch(me){console.error(" Error initializing student cabinet:",me),b("Failed to initialize student cabinet")}finally{T(!1)}},[a,s,n]),Q=C.useCallback(me=>{if(window.studentCabinetRefreshRequested)return window.studentCabinetRefreshRequested=!1,console.log(" Manual refresh requested"),!0;if(window.recentTestCompleted)return window.recentTestCompleted=!1,console.log(" Test completed - cache refresh triggered"),!0;const Ne=localStorage.getItem(`last_cabinet_refresh_${me}`);if(Ne&&Date.now()-parseInt(Ne)>1800*1e3)return console.log(" Time-based refresh triggered"),!0;try{for(let Oe=0;Oe<localStorage.length;Oe++){const Re=localStorage.key(Oe);if(Re&&Re.startsWith(`retest_assignment_id_${me}_`))return console.log(" Retest assignment key detected, forcing cache refresh:",Re),!0}}catch{}return console.log(" No refresh triggers - using existing cache"),!1},[]);C.useCallback(async()=>{console.log(" Calculating average score...");try{if(d&&d.length>0){const me=d.reduce((Oe,Re)=>typeof Re.score=="number"&&typeof Re.max_score=="number"&&Re.max_score>0?Oe+Math.round(Re.score/Re.max_score*100):Oe,0),Ne=Math.round(me/d.length);K(Ne),console.log(" Average score calculated:",Ne)}}catch(me){console.error(" Error calculating average score:",me)}},[d]),C.useEffect(()=>{if(W){console.log(" Skipping completed tests initialization during navigation");return}const me=s?.student_id||s?.id;if(!me){console.log(" Student ID not available yet, skipping localStorage initialization");return}const Ne=new Set;for(let Oe=0;Oe<localStorage.length;Oe++){const Re=localStorage.key(Oe);if(Re&&Re.startsWith(`test_completed_${me}_`)&&localStorage.getItem(Re)==="true"){const Nt=Re.replace(`test_completed_${me}_`,"").split("_");if(Nt.length>=2){const et=Nt[0],Me=Nt.slice(1).join("_"),Fe=`${et}_${Me}`;Ne.add(Fe),console.log(" Found completed test in localStorage:",Fe)}}}Y(Ne),H(!0),console.log(" Initialized completed tests from localStorage:",Array.from(Ne))},[s?.student_id,s?.id,W]),C.useEffect(()=>{console.log(" testResults structure:",d);const me=d?.results||d;if(console.log(" resultsArray:",me),me&&me.length>0){const Ne=s?.student_id||s?.id||"",Oe=new Set;me.forEach(Re=>{const ze=`${Re.test_type}_${Re.test_id}`;Oe.add(ze),localStorage.setItem(`test_completed_${Ne}_${Re.test_type}_${Re.test_id}`,"true")}),Y(Re=>{const ze=new Set([...Re,...Oe]);return console.log(" Updated completed tests (merged):",Array.from(ze)),ze})}},[d,s?.student_id,s?.id]);const ne=C.useCallback(async(me,Ne,Oe=!1,Re=null)=>{console.log(" Checking test completion:",me,Ne,"retestAvailable:",Oe);try{const ze=s?.student_id||s?.id||"";if(Oe){console.log(" Retest available from backend, checking attempt limits.");const Fe=[];for(let ut=1;ut<=10;ut++){const At=`retest_attempt${ut}_${ze}_${me}_${Ne}`;localStorage.getItem(At)==="true"&&Fe.push(At)}const Ke=Fe.length,xt=Re?.retest_attempts_left||Re?.max_attempts||3;return console.log(" Current attempts:",Ke,"Max attempts:",xt,"Attempt keys:",Fe),Ke>=xt?(console.log(" Maximum retest attempts reached in localStorage"),!0):(console.log(" Retest attempts available, allowing start."),!1)}const Nt=`test_completed_${ze}_${me}_${Ne}`,et=localStorage.getItem(Nt);if(console.log(" localStorage key:",Nt),console.log(" localStorage value:",et),me==="word_matching"){console.log(" Debug: All localStorage keys for student",ze);for(let Fe=0;Fe<localStorage.length;Fe++){const Ke=localStorage.key(Fe);Ke&&Ke.includes(ze)&&Ke.includes("word_matching")&&console.log(" Found word_matching key:",Ke,"=",localStorage.getItem(Ke))}}if(et==="true")return console.log(" Found completion status in local storage:",et),!0;const Me=d?.results||d;return Me&&Me.length>0&&(console.log(" Checking database results:",Me.length,"results"),Me.some(Ke=>(console.log(" Checking result:",Ke.test_type,Ke.test_id,"vs",me,Ne),Ke.test_type===me&&Ke.test_id===Ne)))?(console.log(" Found completion status in database results"),localStorage.setItem(Nt,"true"),!0):(console.log(" Test not completed according to local storage or database"),!1)}catch(ze){return console.error(" Error checking test completion:",ze),!1}},[d,s?.student_id,s?.id]),Z=C.useCallback((me,Ne)=>{const Oe={id:Date.now(),message:me,type:Ne,timestamp:new Date};k(Re=>[...Re,Oe]),setTimeout(()=>{k(Re=>Re.filter(ze=>ze.id!==Oe.id))},bf.NOTIFICATION_DURATION)},[]),se=C.useCallback(async me=>{console.log(" Showing test details:",me);try{await p(me.test_type,me.test_id,me.test_name)}catch(Ne){console.error("Error loading test details:",Ne),Z("Failed to load test details","error")}},[p,Z]),ce=C.useCallback(me=>{console.log(" Starting test:",me);const Ne=`${me.test_type}_${me.test_id}`;if(re.has(Ne)&&!me?.retest_available){Z("This test has already been completed","warning");return}if(console.log(" Checking retest conditions:"),console.log(" test.retest_available:",me?.retest_available),console.log(" testKey:",Ne),console.log(" completedTests.has(testKey):",re.has(Ne)),console.log(" completedTests:",Array.from(re)),me?.retest_available){const Oe=s?.student_id||s?.id||"",Re=`retest1_${Oe}_${me.test_type}_${me.test_id}`;localStorage.setItem(Re,"true"),console.log(" Set retest key:",Re);try{const ze=`test_completed_${Oe}_${me.test_type}_${me.test_id}`;localStorage.removeItem(ze);const Nt=`${me.test_type}_${me.test_id}`;localStorage.removeItem(Nt),console.log(" Cleared completion keys for retest:",ze,Nt);const et=`retest_in_progress_${Oe}_${me.test_type}_${me.test_id}`;localStorage.setItem(et,"1"),console.log(" Set in-progress retest lock:",et);try{const Me=`anti_cheating_${Oe}_${me.test_type}_${me.test_id}`;localStorage.removeItem(Me);const Fe=`speaking_test_data_${Oe}_${me.test_id}`;localStorage.removeItem(Fe);const Ke=`speaking_progress_${me.test_id}`;localStorage.removeItem(Ke);const xt=`_${Oe}_${me.test_type}_${me.test_id}`,ut=[];for(let Dt=0;Dt<localStorage.length;Dt++){const Qe=localStorage.key(Dt);Qe&&(Qe.endsWith(xt)||Qe.includes(`answers_${Oe}_${me.test_type}_${me.test_id}`)||Qe.includes(`progress_${Oe}_${me.test_type}_${me.test_id}`)||Qe.includes(`state_${Oe}_${me.test_type}_${me.test_id}`)||Qe.includes(`selected_${Oe}_${me.test_type}_${me.test_id}`))&&ut.push(Qe)}ut.forEach(Dt=>localStorage.removeItem(Dt)),console.log(" Cleared generic cached keys for retest start:",ut);const At=`retest_attempts_${Oe}_${me.test_type}_${me.test_id}`;console.log(" Cleared per-test cached keys for retest start:",{antiCheatKey:Me,speakingCacheKey:Fe,speakingProgressKey:Ke})}catch{}}catch{}if(console.log(" Test retest_assignment_id:",me.retest_assignment_id),console.log(" Test retest_assignment_id type:",typeof me.retest_assignment_id),me?.retest_assignment_id){const ze=`retest_assignment_id_${Oe}_${me.test_type}_${me.test_id}`;localStorage.setItem(ze,String(me.retest_assignment_id)),console.log(" Set retest assignment ID:",ze,"=",me.retest_assignment_id)}else console.log(" No retest assignment ID found in test data")}else console.log(" Retest assignment ID storage skipped - retest not available");if(V(!0),console.log(" Set isStartingTest to true for test:",me.test_type),me.test_type==="matching_type"){console.log(" Redirecting to matching test page for testId:",me.test_id),n(`/student/matching-test/${me.test_id}`);return}if(me.test_type==="word_matching"){console.log(" Redirecting to word matching test page for testId:",me.test_id),n(`/student/word-matching-test/${me.test_id}`);return}if(me.test_type==="speaking"){console.log(" Redirecting to speaking test page for testId:",me.test_id),n(`/student/speaking-test/${me.test_id}`);return}n(`/student/test/${me.test_type}/${me.test_id}`)},[n,re,Z,s?.student_id,s?.id]),he=C.useCallback(()=>{B(me=>!me)},[]),Ee=C.useCallback(()=>{I(me=>!me)},[]),ie=C.useCallback(async me=>{if(console.log(" Starting test:",me),W){console.log(" Test already starting, ignoring click");return}try{if(await ne(me.test_type,me.test_id,me?.retest_available,me)&&!me?.retest_available){Z("This test has already been completed","warning");return}ce(me)}catch(Ne){console.error(" Error starting test:",Ne),Z("Failed to start test. Please try again.","error")}},[ne,ce,Z,W]);return C.useCallback(me=>{console.log(" Viewing test details:",me),se(me)},[se]),v?c.jsx(rt.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:c.jsxs(rt.div,{className:"text-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsx(Gr,{size:"lg"}),c.jsx(rt.p,{className:"mt-4 text-gray-600",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.3},children:"Loading Student Cabinet..."})]})}):_?c.jsx(rt.div,{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-100 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:c.jsx(rt.div,{className:"text-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:c.jsxs(rt.div,{className:"bg-white border border-red-200 rounded-xl p-8 max-w-md shadow-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,duration:.3},children:[c.jsx(rt.div,{className:"text-4xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.3,type:"spring"},children:""}),c.jsx("h2",{className:"text-xl font-semibold text-red-800 mb-2",children:"Cabinet Error"}),c.jsx("p",{className:"text-red-600 mb-6",children:_}),c.jsx(nt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):c.jsxs(rt.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[c.jsx(rt.div,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-6",children:[c.jsxs(rt.div,{className:"flex items-center space-x-4",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(rt.div,{className:"h-12 w-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.3,type:"spring"},whileHover:{scale:1.1},children:c.jsx("span",{className:"text-white font-semibold text-xl",children:s?.name?.charAt(0)||"S"})})}),c.jsxs("div",{children:[c.jsxs("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white",children:[s?.name," ",s?.surname]}),c.jsxs("p",{className:"text-blue-100 text-sm sm:text-base md:text-lg",children:["Grade ",s?.grade," - Class ",s?.class]})]})]}),c.jsxs(rt.div,{className:"relative",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[c.jsxs("button",{onClick:t,className:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border-white/20 text-white hover:bg-white/20 font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm border-2",style:{zIndex:1e3},children:[c.jsx("span",{className:"hidden sm:inline",children:"Menu"}),c.jsx(rt.svg,{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:e?180:0},transition:{duration:.2},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),c.jsx(co,{children:e&&c.jsx(rt.div,{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg z-50 overflow-hidden",initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:c.jsxs("div",{className:"py-2",children:[c.jsx(rt.button,{onClick:r,className:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-blue-50 transition-colors",whileHover:{x:4},transition:{duration:.2},children:"Change Password"}),c.jsx(rt.button,{onClick:()=>{t(),i()},className:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-red-50 transition-colors",whileHover:{x:4},transition:{duration:.2},children:"Logout"})]})})})]})]})})}),c.jsxs(rt.div,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:[c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:c.jsx("div",{className:"lg:col-span-1 space-y-6",children:G!==null&&c.jsx(rt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7,duration:.5},children:c.jsxs(Et,{children:[c.jsx(Et.Header,{children:c.jsx(Et.Title,{children:"Average Score"})}),c.jsx(Et.Body,{children:c.jsxs(rt.div,{className:"text-center",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.8,duration:.3},children:[c.jsxs(rt.div,{className:"text-4xl font-bold text-blue-600 mb-2",initial:{scale:0},animate:{scale:1},transition:{delay:.9,duration:.5,type:"spring"},children:[G,"%"]}),c.jsx("p",{className:"text-sm text-gray-500",children:"Overall Performance"})]})})]})})})}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:c.jsxs(Et,{children:[c.jsx(Et.Header,{children:c.jsx(Et.Title,{className:"text-center",children:"Active Tests"})}),c.jsx(Et.Body,{children:u&&u.length>0?c.jsxs("div",{className:"relative",children:[console.log(" Rendering overlay, isStartingTest:",W),W&&c.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50 rounded-lg border-2 border-blue-200",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Starting test..."}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait..."})]})}),c.jsxs("div",{className:"space-y-4",children:[(ee?u:u.slice(0,3)).map((me,Ne)=>c.jsx(rt.div,{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:ee?0:.7+Ne*.1,duration:.3},whileHover:{scale:1.02},children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[c.jsx("h3",{className:"text-sm sm:text-lg font-medium text-gray-900 w-16 sm:w-auto break-words leading-tight line-clamp-2 sm:line-clamp-none",children:me.test_name}),c.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:me.subject}),c.jsx("span",{className:"text-gray-500",children:me.teacher_name}),c.jsxs("span",{className:"text-gray-500",children:[c.jsx("span",{className:"sm:hidden",children:new Date(me.assigned_at).toLocaleDateString("en-US",{year:"2-digit",month:"numeric",day:"numeric"})}),c.jsx("span",{className:"hidden sm:inline",children:new Date(me.assigned_at).toLocaleDateString()})]})]})}),c.jsx("div",{className:"flex space-x-2 ml-4",children:(()=>{const Oe=`${me.test_type}_${me.test_id}`,Re=re.has(Oe);if(!L)return c.jsx(nt,{variant:"secondary",size:"sm",disabled:!0,className:"bg-gray-100 text-gray-500 border-gray-200",children:"Loading..."});if(Re&&me?.retest_available){const ze=s?.student_id||s?.id||"";let Nt=!1;try{const et=localStorage.getItem(`retest_attempts_${ze}_${me.test_type}_${me.test_id}`);if(et){const Me=JSON.parse(et);typeof Me?.used=="number"&&typeof Me?.max=="number"&&Me.used>=Me.max&&(Nt=!0)}}catch{}return Nt?c.jsx(nt,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):c.jsx(nt,{variant:"primary",size:"sm",onClick:()=>ie(me),disabled:W,children:"Start Retest"})}return Re?c.jsx(nt,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):(console.log(" Button render, isStartingTest:",W,"test:",me.test_type),c.jsx(nt,{variant:"primary",size:"sm",onClick:()=>ie(me),disabled:W,children:"Start Test"}))})()})]})},`${me.test_type}_${me.test_id}`)),u.length>3&&c.jsx("div",{className:"text-center pt-2",children:c.jsx("button",{onClick:he,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:ee?"Show Less":`Show ${u.length-3} More`})})]})]}):c.jsxs(rt.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},transition:{delay:.7,duration:.3},children:[c.jsx(rt.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.8,duration:.5,type:"spring"},children:""}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Active Tests"}),c.jsx("p",{className:"text-gray-500",children:"No active tests available for your class at the moment."})]})})]})}),c.jsx(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:c.jsxs(Et,{children:[c.jsx(Et.Header,{children:c.jsx(Et.Title,{children:"Test Results"})}),c.jsx(Et.Body,{children:d&&d.showResults?c.jsx(j1,{testResults:d,onBackToCabinet:()=>{setTestResults(null)},onRetakeTest:(me,Ne)=>{f(),setTestResults(null)},isLoading:v}):c.jsx(WV,{compact:!0,showAll:z,onToggleShowAll:Ee,maxInitial:3})})]})})]})]}),c.jsx(PV,{isOpen:x.isOpen,onClose:y,testType:x.testType,testId:x.testId,testName:x.testName,questions:x.questions||[],isLoading:x.isLoading||!1}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:E.map(me=>c.jsx(tc,{type:me.type,message:me.message,onClose:()=>k(Ne=>Ne.filter(Oe=>Oe.id!==me.id))},me.id))})]})},Dde=({testInfo:e,questions:t,testType:r,studentAnswers:n,onBackToCabinet:s,checkAnswerCorrectness:a,formatStudentAnswerForDisplay:i,getCorrectAnswer:o})=>{const[l,u]=C.useState(0),[d,f]=C.useState(0),[g,p]=C.useState(!0);if(C.useEffect(()=>{const v=()=>{try{const T=gf(t,n,r).score,_=e?.num_questions||t?.length||0,b=_>0?Math.round(T/_*100):0;u(T),f(b),p(!1)}catch(T){console.error("Error calculating test results:",T),u(0),f(0),p(!1)}};t&&t.length>0?v():p(!1)},[t,n,r,e,gf]),g)return c.jsx("div",{className:"flex justify-center items-center min-h-64",children:c.jsx("div",{className:"text-lg",children:"Calculating results..."})});const x=e?.num_questions||t?.length||0,y=e?.test_name||e?.title||"Test";return c.jsxs("div",{className:"test-results-page max-w-4xl mx-auto p-6 overflow-y-auto min-h-screen",children:[c.jsx(Et,{className:"mb-6",children:c.jsxs("div",{className:"results-header text-center",children:[c.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:["Test Results: ",y]}),c.jsx("p",{className:"text-gray-600",children:r==="matching_type"?"Matching Test":r==="multiple_choice"?"Multiple Choice Test":r==="true_false"?"True/False Test":r==="input"?"Input Test":r==="drawing"?"Drawing Test":"Test"})]})}),c.jsx(Et,{className:"mb-6",children:c.jsxs("div",{className:"results-summary",children:[c.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-4 text-center",children:["Your Score: ",l," / ",x," (",d,"%)"]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 mb-4",children:c.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${d>=80?"bg-green-500":d>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${d}%`}})}),c.jsx("div",{className:"text-center",children:c.jsx("p",{className:`text-lg font-medium ${d>=80?"text-green-600":d>=60?"text-yellow-600":"text-red-600"}`,children:d>=80?"Excellent!":d>=60?"Good job!":"Keep practicing!"})})]})}),t&&t.length>0&&c.jsx(Et,{className:"mb-6",children:c.jsxs("div",{className:"questions-review",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Question Review"}),c.jsx("div",{className:"space-y-4",children:t.map((v,T)=>{const _=n[String(v.question_id)]||"No answer";console.log(" TestResultsDisplay - Question",T+1,":",{question:v,studentAnswer:_,testType:r});const b=a(v,_,r);return console.log(" TestResultsDisplay - isCorrect result:",b),c.jsxs("div",{className:`question-review p-4 rounded-lg border-2 ${b?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[c.jsxs("div",{className:"question-review-header flex justify-between items-start mb-3",children:[c.jsxs("h4",{className:"text-lg font-medium text-gray-800",children:["Question ",T+1]}),c.jsx("span",{className:`text-2xl font-bold ${b?"text-green-600":"text-red-600"}`,children:b?"":""})]}),c.jsx("div",{className:"question-text mb-3",children:c.jsx("p",{className:"text-gray-700 font-medium",children:v.question})}),c.jsxs("div",{className:"answer-section space-y-2",children:[c.jsxs("p",{className:"student-answer",children:[c.jsx("strong",{className:"text-gray-600",children:"Your Answer:"})," ",c.jsx("span",{className:`font-medium ${b?"text-green-700":"text-red-700"}`,children:i(_,r,v)})]}),!b&&c.jsxs("p",{className:"correct-answer",children:[c.jsx("strong",{className:"text-gray-600",children:"Correct Answer:"})," ",c.jsx("span",{className:"text-green-700 font-medium",children:r==="multiple_choice"?String(v.correct_answer||"").toUpperCase():i(o(v,r),r,v)})]})]})]},v.question_id||T)})})]})}),c.jsx(Et,{children:c.jsx("div",{className:"results-actions text-center",children:c.jsx(nt,{onClick:s,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 text-lg font-medium",children:"Back to Cabinet"})})})]})};class Ide{constructor(){this.activeRequests=new Map,this.completedRequests=new Map,this.maxCacheSize=100,this.cacheTimeout=3e4}generateKey(t,r,n={}){const s=Object.keys(n).sort().reduce((a,i)=>(a[i]=n[i],a),{});return`${t}_${r}_${JSON.stringify(s)}`}isRequestInProgress(t){return this.activeRequests.has(t)}getCachedResult(t){const r=this.completedRequests.get(t);return r&&Date.now()-r.timestamp<this.cacheTimeout?r.result:null}startRequest(t,r){return this.activeRequests.set(t,r),r.finally(()=>{this.activeRequests.delete(t)}),r}cacheResult(t,r){if(this.completedRequests.size>=this.maxCacheSize){const n=this.completedRequests.keys().next().value;this.completedRequests.delete(n)}this.completedRequests.set(t,{result:r,timestamp:Date.now()})}async deduplicateApiCall(t,r,n,s){const a=this.generateKey(t,r,n);if(this.isRequestInProgress(a))return console.log(" API deduplication: Request already in progress, waiting...",a),this.activeRequests.get(a);const i=this.getCachedResult(a);if(i)return console.log(" API deduplication: Using cached result",a),i;console.log(" API deduplication: Making new request",a);const o=this.startRequest(a,s());try{const l=await o;return this.cacheResult(a,l),l}catch(l){throw l}}clearCache(){this.activeRequests.clear(),this.completedRequests.clear(),console.log(" API deduplication: Cache cleared")}}const mI=new Ide,Mde=(e,t)=>{let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>e.apply(null,n),t)}},Lde=({onBackToCabinet:e,currentTest:t})=>{const r=yo(),{user:n,isAuthenticated:s}=ls(),{activeTests:a,loadActiveTests:i}=A1(),o=C.useCallback(Mde((ue,we,Te)=>{try{if(window.skipInitialProgressSave&&Te.answers&&Te.answers.length===0){console.log(" Skipping empty progress save during restoration"),window.skipInitialProgressSave=!1;return}const Ct=`test_progress_${n?.student_id||n?.id||"unknown"}_${ue}_${we}`,Pt=localStorage.getItem(Ct);if(Pt&&Te.answers&&Te.answers.length===0)try{const Ue=JSON.parse(Pt);if(Ue.answers&&Ue.answers.length>0){console.log(" Skipping empty progress save - existing progress is better:",Ue.answers);return}}catch{}localStorage.setItem(Ct,JSON.stringify(Te)),console.log(`Saved test progress for ${ue}_${we}:`,Te)}catch(Xe){console.error("Error saving test progress:",Xe)}},1e3),[n?.student_id,n?.id]),l=C.useCallback((ue,we,Te)=>{o(ue,we,Te)},[o]),u=C.useCallback((ue,we)=>{try{const Xe=`test_progress_${n?.student_id||n?.id||"unknown"}_${ue}_${we}`,Ct=localStorage.getItem(Xe);return Ct?JSON.parse(Ct):null}catch(Te){return console.error("Error getting test progress:",Te),null}},[n?.student_id,n?.id]),d=C.useCallback((ue,we)=>{try{const Te=n?.student_id||n?.id||"unknown",Xe=`test_progress_${Te}_${ue}_${we}`;localStorage.removeItem(Xe);for(let Ct=0;Ct<localStorage.length;Ct++){const Pt=localStorage.key(Ct);Pt&&Pt.startsWith(`test_progress_${Te}_${ue}_${we}_`)&&(localStorage.removeItem(Pt),console.log(` Cleared individual question key: ${Pt}`))}console.log(`Cleared test progress for ${ue}_${we}`)}catch(Te){console.error("Error clearing test progress:",Te)}},[n?.student_id,n?.id]),[f,g]=C.useState(!0),[p,x]=C.useState(!1),[y,v]=C.useState(""),[T,_]=C.useState(!1),[b,E]=C.useState(""),[k,A]=C.useState([]),[P,j]=C.useState(t?"test":"list"),[O,R]=C.useState(null),[M,G]=C.useState(null),[K,re]=C.useState(null),[Y,ee]=C.useState([]),[B,z]=C.useState([]),[I,W]=C.useState(0),[V,L]=C.useState(0),[H,J]=C.useState(null),Q=Be.useRef(null),ne=Be.useRef(null),[Z,se]=C.useState(!1),[ce,he]=C.useState(!1),[Ee,ie]=C.useState(null),[me,Ne]=C.useState(null),[Oe,Re]=C.useState({isInitialized:!1,initializationId:null,lastTestId:null,initializationCount:0}),[ze,Nt]=C.useState({isRestored:!1,restoredTestId:null,restorationCount:0}),{startTracking:et,stopTracking:Me,getCheatingData:Fe,clearData:Ke,isCheating:xt,tabSwitches:ut}=um(O?.test_type,O?.test_id,n?.student_id||n?.id);C.useEffect(()=>{(()=>{const we=[];for(let Te=0;Te<localStorage.length;Te++){const Xe=localStorage.key(Te);if(Xe&&Xe.startsWith("test_progress_")&&!Xe.includes("_51712_")&&!Xe.includes("_51736_")){const Ct=Xe.split("_");Ct.length===4&&Ct[0]==="test"&&Ct[1]==="progress"&&we.push(Xe)}}we.forEach(Te=>{localStorage.removeItem(Te),console.log(" Cleared old cache key:",Te)})})()},[]);const At=C.useCallback(()=>{const ue=O?.test_id,we=n?.student_id||n?.id;if(!we||!ue)return console.log(" Skipping initialization - missing required data:",{studentId:we,currentTestId:ue}),!1;const Te=`${we}_${ue}_${Date.now()}`;return Oe.isInitialized&&Oe.lastTestId===ue?(console.log(" Already initialized for this test - skipping"),!1):Oe.initializationId?(console.log(" Initialization in progress - skipping duplicate"),!1):(console.log(" Starting initialization:",Te),Re({isInitialized:!1,initializationId:Te,lastTestId:ue}),!0)},[Oe,O,n?.student_id,n?.id]),Dt=C.useCallback(()=>{Re(ue=>({...ue,isInitialized:!0,initializationId:null})),console.log(" Initialization completed")},[]),Qe=C.useCallback(async()=>{console.log(" Initializing Student Tests...");try{if(g(!0),E(""),!s||!n){console.log(" User not authenticated"),E("User not authenticated");return}if(n.role!==Gi.STUDENT){console.error(" Invalid user role for student tests:",n.role),E("Access denied. Student role required.");return}console.log(" Loading active tests..."),await i(),Dt(),console.log(" Student Tests initialization complete!")}catch(ue){console.error(" Error initializing student tests:",ue),E("Failed to initialize student tests")}finally{g(!1)}},[s,n,i,Dt]);C.useEffect(()=>{At()&&Qe()},[At,Qe]),C.useEffect(()=>{t&&(console.log(" Auto-starting test from prop:",t),_(!0),gt(t))},[t]),C.useCallback(async()=>{console.log(" Loading student active tests...");try{const ue=await yn.getActiveTests();console.log(" Active tests loaded:",ue);const we=ue.map(Te=>({...Te,subject_id:Te.subject_id||Te.subjectId,teacher_id:Te.teacher_id||Te.teacherId,is_active:Te.is_active!==void 0?Te.is_active:!0,created_at:Te.created_at||Te.createdAt,updated_at:Te.updated_at||Te.updatedAt}));return Ne(new Date),we}catch(ue){throw console.error(" Error loading active tests:",ue),ue}},[]),C.useCallback(async(ue,we)=>{console.log(" Checking test completion:",ue,we);try{const Te=u(ue,we);return Te&&Te.completed}catch(Te){return console.error(" Error checking test completion:",Te),!1}},[u]),C.useEffect(()=>{if(Y.length>0&&O?.test_id){const ue=setTimeout(()=>{let we=!1;const Te=new Array(Y.length).fill("");if(Y.forEach((Xe,Ct)=>{const Ue=`test_progress_${n?.student_id||n?.id||"unknown"}_${M}_${O?.test_id}_${Xe.question_id}`,ft=localStorage.getItem(Ue);if(ft){const ot=ft.replace(/^"(.*)"$/,"$1");Te[Ct]=ot,we=!0}}),we){z(Te);const Xe=Te.filter(Pt=>Pt&&typeof Pt=="string"&&Pt.trim()!=="").length,Ct=Y.length>0?Xe/Y.length*100:0;W(Ct)}},100);return()=>clearTimeout(ue)}},[Y,M,O?.test_id]);const tt=C.useCallback(async(ue,we)=>{console.log(" Marking test as completed:",ue,we);try{const Te=u(ue,we)||{};Te.completed=!0,Te.completedAt=new Date().toISOString(),l(ue,we,Te);const Ct=`test_completed_${n?.student_id||n?.id||""}_${ue}_${we}`;localStorage.setItem(Ct,"true"),console.log(" Test completion marked in localStorage:",Ct),console.log(" localStorage value after setting:",localStorage.getItem(Ct)),br("Test marked as completed","success")}catch(Te){console.error(" Error marking test as completed:",Te),br("Failed to mark test as completed","error")}},[u,l]),vt=C.useCallback(ue=>{console.log(" Showing test details:",ue),ie(ue),he(!0)},[]),gt=C.useCallback(async ue=>{console.log(" Starting test:",ue);let we=Date.now(),Te;try{v(""),x(!0),we=Date.now();const Xe=()=>{const Ie=Date.now()-we,fe=Math.max(0,250-Ie);setTimeout(()=>{g(!1),x(!1)},fe)};let Ct=!1;Te=setTimeout(()=>{Ct=!0,v("Loading is taking longer than expected...")},15e3);const Ue=`test_completed_${n?.student_id||n?.id||""}_${ue.test_type}_${ue.test_id}`,ft=localStorage.getItem(Ue)==="true";if(ft&&!ue?.retest_available){console.log(" Test already completed, redirecting to main cabinet"),br("This test has already been completed","info"),r("/student");return}if(ft&&ue?.retest_available&&console.log(" Test completed but retest available, allowing retest"),ue.test_type===Fn.MATCHING){console.log(" Redirecting to matching test page for testId:",ue.test_id),r(`/student/matching-test/${ue.test_id}`);return}if(ue.test_type===Fn.WORD_MATCHING){console.log(" Redirecting to word matching test page for testId:",ue.test_id),r(`/student/word-matching-test/${ue.test_id}`);return}R(ue),G(ue.test_type),Nt({isRestored:!1,restoredTestId:null,restorationCount:0});const[ot,Ht]=await Promise.all([mI.deduplicateApiCall("GET",`test-info-${ue.test_type}-${ue.test_id}`,{testType:ue.test_type,testId:ue.test_id},()=>yn.getTestInfo(ue.test_type,ue.test_id)),mI.deduplicateApiCall("GET",`test-questions-${ue.test_type}-${ue.test_id}`,{testType:ue.test_type,testId:ue.test_id},()=>yn.getTestQuestions(ue.test_type,ue.test_id))]);re(ot);let Gt=Ht;try{if(!!ot?.is_shuffled){const oe=n?.student_id||n?.id||"unknown",fe=`${oe}:${ue.test_type}:${ue.test_id}`,Ce=Array.from(fe).reduce((Ze,mt)=>(Ze<<5)-Ze+mt.charCodeAt(0),0)>>>0,je=`test_shuffle_order_${oe}_${ue.test_type}_${ue.test_id}`,qe=localStorage.getItem(je);if(qe){const Ze=JSON.parse(qe),mt=new Map(Ht.map(qt=>[qt.question_id,qt]));Gt=Ze.map(qt=>mt.get(qt)).filter(Boolean)}else{const mt=function(pt){return function(){var Bt=pt+=1831565813;return Bt=Math.imul(Bt^Bt>>>15,Bt|1),Bt^=Bt+Math.imul(Bt^Bt>>>7,Bt|61),((Bt^Bt>>>14)>>>0)/4294967296}}(Ce);Gt=[...Ht];for(let pt=Gt.length-1;pt>0;pt--){const Bt=Math.floor(mt()*(pt+1));[Gt[pt],Gt[Bt]]=[Gt[Bt],Gt[pt]]}const qt=Gt.map(pt=>pt.question_id);localStorage.setItem(je,JSON.stringify(qt))}}}catch(Ie){console.error("Shuffle error (ignored):",Ie)}ee(Gt),Xe();const mr=ue.test_id;if(ze.isRestored&&ze.restoredTestId===mr){console.log(" Progress already restored for this test - skipping");return}console.log(" Starting progress restoration for test:",ue.test_type,ue.test_id),Nt(Ie=>({...Ie,restorationCount:Ie.restorationCount+1}));const Vr=n?.student_id||n?.id||"unknown",vr=`test_progress_${Vr}_${ue.test_type}_${ue.test_id}`,hr=localStorage.getItem(vr);console.log(" Checking main progress key:",vr),console.log(" Main progress data:",hr);let le=new Array(Ht.length).fill("");if(hr)try{const Ie=JSON.parse(hr);console.log(" Parsed progress data:",Ie),Ie.answers&&Array.isArray(Ie.answers)&&(le=Ie.answers,console.log(" Loaded answers from main progress:",le))}catch(Ie){console.error(" Error parsing main progress:",Ie)}Ht.forEach((Ie,oe)=>{const fe=`test_progress_${Vr}_${ue.test_type}_${ue.test_id}_${Ie.question_id}`,Ce=localStorage.getItem(fe);if(console.log(` Checking individual answer for question ${Ie.question_id}:`,Ce),Ce){const je=Ce.replace(/^"(.*)"$/,"$1");le[oe]=je,console.log(` Loaded individual answer for question ${Ie.question_id}:`,je)}}),console.log(" Final initial answers after loading all sources:",le);const _e=le.filter(Ie=>Ie&&typeof Ie=="string"&&Ie.trim()!=="").length;if(_e>0){console.log(` Restoring progress: ${_e}/${Ht.length} questions answered`),z(le);const Ie=Ht.length>0?_e/Ht.length*100:0;W(Ie),console.log(` Progress restored: ${Ie}% complete`)}else console.log(" No existing progress found - starting fresh"),z(le),W(0);Nt(Ie=>({...Ie,isRestored:!0,restoredTestId:mr})),_e>0&&(console.log(" Existing progress found - preventing overwrite during initialization"),window.skipInitialProgressSave=!0);const pe=Number(ot?.allowed_time||0),ve=n?.student_id||n?.id||"unknown";if(Q.current=`test_timer_${ve}_${ue.test_type}_${ue.test_id}`,pe>0)try{const Ie=localStorage.getItem(Q.current),oe=Date.now();if(Ie){const fe=JSON.parse(Ie),Ce=Math.floor((oe-new Date(fe.lastTickAt).getTime())/1e3),je=Math.max(0,Number(fe.remainingSeconds||pe)-Math.max(0,Ce));L(je),ne.current=oe}else L(pe),ne.current=oe,localStorage.setItem(Q.current,JSON.stringify({remainingSeconds:pe,lastTickAt:new Date(oe).toISOString(),startedAt:new Date(oe).toISOString()}))}catch(Ie){console.error("Timer cache init error:",Ie),L(pe)}else L(0);const Se=new Date;J(Se),console.log(" Test timer started at:",Se.toISOString());const ke=n?.student_id||n?.id||"unknown",Ge=`anti_cheating_${ke}_${ue.test_type}_${ue.test_id}`,dt=localStorage.getItem(Ge);if(console.log(" Checking for anti-cheating data with key:",Ge),console.log(" Key format: anti_cheating_{studentId}_{testType}_{testId}"),console.log(" Current test details:",{testType:ue.test_type,testId:ue.test_id,studentId:ke}),dt)try{const Ie=JSON.parse(dt);console.log(" Found existing anti-cheating data for THIS test:",Ie),console.log(" Visibility change times for this test:",Ie.tabSwitches||0),console.log(" Cheating status for this test:",Ie.isCheating||!1),Ie.isCheating&&(console.log(" WARNING: Student has been flagged for cheating in THIS test!"),console.log(" Tab switches detected in this test:",Ie.tabSwitches),br(` Warning: Suspicious activity detected in this test (${Ie.tabSwitches} tab switches). Continued violations may result in test disqualification.`,"warning"))}catch(Ie){console.error(" Error parsing existing anti-cheating data:",Ie)}else console.log(" No existing anti-cheating data found for this test - starting fresh");et(),console.log(" Anti-cheating tracking started"),j("test"),console.log(" Test started successfully")}catch(Xe){console.error(" Error starting test:",Xe),br("Failed to start test","error"),v("Failed to load test data. Please try again.")}finally{const Xe=Date.now()-we,Pt=Math.max(0,250-Xe);setTimeout(()=>{g(!1),x(!1)},Pt),_(!1);try{Te&&clearTimeout(Te)}catch{}}},[u]),_t=C.useCallback(async()=>{if(!O||!K||!Y||!B){br("No test data to submit","error");return}console.log(" Submitting test:",O);try{se(!0);const ue=gf(Y,B,O.test_type),we=new Date,Te=H?Math.round((we-H)/1e3):0,Xe=H?H.toISOString():we.toISOString();console.log(" Test timing:",{startedAt:Xe,endTime:we.toISOString(),timeTaken:`${Te} seconds`});const Ct=Fe();console.log(" Anti-cheating data for submission:",Ct);const Pt={};Y.forEach((ft,ot)=>{Pt[ft.question_id]=B[ot]??""}),O.test_type==="drawing"&&(console.log(" Drawing test answers being submitted:",B),console.log(" Drawing test answers type:",typeof B[0]),console.log(" Drawing test answers content:",B[0]));const Ue=await yn.submitTest(O.test_type,O.test_id,B,{time_taken:(()=>{const ft=Number(K?.allowed_time||0);return ft>0?Math.min(Te,ft):Te})(),started_at:Xe,submitted_at:we.toISOString(),answers_by_id:Pt,question_order:Y.map(ft=>ft.question_id),caught_cheating:Ct.caught_cheating,visibility_change_times:Ct.visibility_change_times,retest_assignment_id:(()=>{const ot=`retest_assignment_id_${n?.student_id||n?.id||""}_${O.test_type}_${O.test_id}`,Ht=localStorage.getItem(ot);return console.log(" Frontend retest key:",ot),console.log(" Frontend retest assignment ID from localStorage:",Ht),console.log(" Frontend retest assignment ID converted:",Ht?Number(Ht):null),console.log(" Frontend current test data:",O),console.log(" Frontend current test retest_assignment_id:",O.retest_assignment_id),Ht?Number(Ht):null})(),parent_test_id:O.test_id},n);if(console.log(" Test submission result:",Ue),Ue.success){window.recentTestCompleted=!0,console.log(" Test completed - cache refresh triggered");const ft=n?.student_id||n?.id||"",ot=`retest1_${ft}_${O.test_type}_${O.test_id}`;if(localStorage.getItem(ot)==="true"){const hr=O?.retest_attempts_left||O?.max_attempts||3;if((Ue?.percentage_score??0)>=50){const _e=`retest_attempt${hr}_${ft}_${O.test_type}_${O.test_id}`;localStorage.setItem(_e,"true"),console.log(" Passed retest, marking last-slot key:",_e),localStorage.removeItem(ot)}else{let _e=1;for(let ve=1;ve<=10;ve++){const Se=`retest_attempt${ve}_${ft}_${O.test_type}_${O.test_id}`;if(localStorage.getItem(Se)!=="true"){_e=ve;break}}const pe=`retest_attempt${_e}_${ft}_${O.test_type}_${O.test_id}`;localStorage.setItem(pe,"true"),console.log(" Marked retest attempt as completed:",pe),_e>=hr&&localStorage.removeItem(ot)}}if(console.log(" Marking test as completed..."),await tt(O.test_type,O.test_id),O.test_type!=="drawing"){console.log(" Caching test results after submission...");const le=`student_results_table_${n?.student_id||n?.id||"unknown"}`,{setCachedData:_e,CACHE_TTL:pe}=await Vi(async()=>{const{setCachedData:ve,CACHE_TTL:Se}=await Promise.resolve().then(()=>Ug);return{setCachedData:ve,CACHE_TTL:Se}},void 0);_e(le,Ue,pe.student_results_table),console.log(" Test results cached with key:",le)}else console.log(" Drawing test submitted - not caching results (will appear after teacher grades)");console.log(" Clearing test progress..."),d(O.test_type,O.test_id);try{const hr=n?.student_id||n?.id||"unknown",le=`test_timer_${hr}_${O.test_type}_${O.test_id}`;localStorage.removeItem(le);const _e=`test_shuffle_order_${hr}_${O.test_type}_${O.test_id}`;localStorage.removeItem(_e)}catch{}if(n?.student_id){const hr=`test_completed_${n.student_id}_${O.test_type}_${O.test_id}`;localStorage.setItem(hr,"true"),console.log(" Test marked as completed in localStorage:",hr)}try{const hr=n?.student_id||n?.id||"",le=`retest1_${hr}_${O.test_type}_${O.test_id}`,_e=`retest_assignment_id_${hr}_${O.test_type}_${O.test_id}`;localStorage.removeItem(le),localStorage.removeItem(_e),console.log(" Cleared retest keys:",le,_e)}catch(hr){console.warn("Failed to clear retest keys:",hr)}console.log(" Clearing test progress and anti-cheating data for THIS test only...");const Gt=n?.student_id||n?.id||"unknown",mr=[],Vr=`test_progress_${Gt}_${O.test_type}_${O.test_id}`,vr=`anti_cheating_${Gt}_${O.test_type}_${O.test_id}`;for(let hr=0;hr<localStorage.length;hr++){const le=localStorage.key(hr);le&&(le===Vr||le===vr)&&mr.push(le)}mr.forEach(hr=>{localStorage.removeItem(hr),console.log(` Cleared for THIS test only: ${hr}`)}),console.log(" Clearing anti-cheating data..."),Me(),Ke(),O.test_type!=="drawing"?j("results"):r("/student"),br("Test submitted successfully!","success"),console.log(" Test submitted successfully")}else throw console.error(" Test submission failed:",Ue.error),new Error(Ue.error||"Failed to submit test")}catch(ue){console.error(" Error submitting test:",ue),br("Failed to submit test","error")}finally{se(!1)}},[O,K,Y,B,tt,d]);C.useCallback(()=>(console.log(" Collecting test answers..."),B),[B]);const Wt=C.useCallback(()=>{if(!Y||!B)return;const ue=B.filter(Te=>Te&&typeof Te=="string"&&Te.trim()!=="").length,we=Y.length>0?ue/Y.length*100:0;if(W(we),console.log(` Progress updated: ${ue}/${Y.length} questions answered (${Math.round(we)}%)`),O){const Te={answers:B,progress:we,lastSaved:new Date().toISOString()};l(O.test_type,O.test_id,Te)}},[Y,B,O,l]);C.useEffect(()=>{Wt()},[Wt]);const Zt=C.useCallback(()=>{if(!B)return 0;const ue=B.filter(we=>we&&typeof we=="string"&&we.trim()!=="").length;return console.log(" getAnsweredCount:",{studentAnswers:B,answeredCount:ue,totalQuestions:Y?.length}),ue},[B,Y]),pr=C.useCallback(()=>{if(console.log(" Navigating back to cabinet..."),O&&n?.student_id){console.log(" Cabinet navigation detected - counting as cheating attempt");const we=`anti_cheating_${n?.student_id||n?.id||"unknown"}_${O.test_type}_${O.test_id}`,Te=localStorage.getItem(we);let Xe=0,Ct=!1;if(Te)try{const ot=JSON.parse(Te);Xe=ot.tabSwitches||0,Ct=ot.isCheating||!1}catch(ot){console.error(" Error parsing existing anti-cheating data:",ot)}const Pt=Xe+1,Ue=Pt>=2;console.log(` Tab switch count: ${Xe}  ${Pt} (cheating: ${Ue})`);const ft={tabSwitches:Pt,isCheating:Ue,lastUpdated:new Date().toISOString()};localStorage.setItem(we,JSON.stringify(ft)),console.log(" Anti-cheating data updated for cabinet navigation:",ft)}e?e():r("/student")},[e,r,O,n?.student_id]);C.useCallback(()=>{console.log(" Showing test results..."),j("results")},[]);const Ir=C.useCallback((ue,we,Te=null)=>{switch(console.log(" Formatting student answer for display:",ue,"testType:",we,"question:",Te),we){case Fn.MULTIPLE_CHOICE:if(ue.toString().startsWith("Option "))return ue;if(Te&&typeof ue=="string"&&!isNaN(parseInt(ue))){const Xe=parseInt(ue),Ct=`option_${String.fromCharCode(97+Xe)}`,Pt=Te[Ct];if(Pt)return console.log(" Converted",ue,"to option text:",Pt),Pt;{const Ue=String.fromCharCode(65+Xe);return console.log(" Converted",ue,"to",Ue),Ue}}else{if(typeof ue=="string"&&isNaN(parseInt(ue)))return console.log(" Already formatted text:",ue),ue;{const Xe=String.fromCharCode(65+parseInt(ue));return console.log(" Converted",ue,"to",Xe),Xe}}case Fn.TRUE_FALSE:return ue==="true"?"True":"False";case Fn.INPUT:return ue;case Fn.MATCHING:return typeof ue=="object"?JSON.stringify(ue):ue;case Fn.WORD_MATCHING:return typeof ue=="object"?JSON.stringify(ue):ue;case Fn.DRAWING:return ue&&ue.trim()!==""?"Drawing submitted":"No drawing";case Fn.FILL_BLANKS:return ue;default:return console.warn(" Unknown test type for answer formatting:",we),ue}},[]),br=C.useCallback((ue,we)=>{const Te={id:Date.now(),message:ue,type:we,timestamp:new Date};A(Xe=>[...Xe,Te]),setTimeout(()=>{A(Xe=>Xe.filter(Ct=>Ct.id!==Te.id))},bf.NOTIFICATION_DURATION)},[]);C.useEffect(()=>{Wt()},[Wt]),C.useEffect(()=>{if(P!=="test")return;const ue=Number(K?.allowed_time||0);if(!ue)return;const we=setInterval(()=>{L(Te=>{const Xe=Math.max(0,Te-1);try{const Ct=Date.now();ne.current||(ne.current=Ct),Q.current&&localStorage.setItem(Q.current,JSON.stringify({remainingSeconds:Xe,lastTickAt:new Date(Ct).toISOString(),startedAt:H?H.toISOString():new Date(Ct-(ue-Xe)*1e3).toISOString()}))}catch{}return Xe===0&&_t(),Xe})},1e3);return()=>clearInterval(we)},[P,K?.allowed_time,_t,H]);const xr=C.useCallback((ue,we)=>{if(!ue)return null;const Te=(Xe,Ct)=>{const Pt=[...B];Pt[we]=Ct,z(Pt),console.log(` Answer changed: question ${Xe} = ${Ct}`),console.log(" Updated studentAnswers:",Pt)};switch(O.test_type){case Fn.TRUE_FALSE:return c.jsx(jue,{question:ue,questionIndex:we,studentAnswer:B[we]||"",onAnswerChange:Te,mode:"student",testId:O?.test_id,testType:M,displayNumber:we+1});case Fn.MULTIPLE_CHOICE:return c.jsx(Pue,{question:ue,questionIndex:we,studentAnswer:B[we]||"",onAnswerChange:Te,mode:"student",testId:O?.test_id,testType:M,displayNumber:we+1});case Fn.INPUT:return c.jsx(Oue,{question:ue,questionIndex:we,studentAnswer:B[we]||"",onAnswerChange:Te,mode:"student",testId:O?.test_id,testType:M,displayNumber:we+1});case Fn.MATCHING:return console.error("Matching test reached renderQuestion - this should not happen"),c.jsxs("div",{className:"text-center p-8",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-600 mb-4",children:"Matching Test"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Redirecting to matching test page..."}),c.jsx(nt,{onClick:()=>r("/student"),variant:"primary",children:"Back to Dashboard"})]});case Fn.DRAWING:return c.jsx(Uue,{question:ue,questionIndex:we,studentAnswer:B[we]||"",onAnswerChange:Te,mode:"student",testId:O?.test_id,testType:M});case Fn.FILL_BLANKS:return we===0?c.jsx(Gue,{testText:K?.test_text,blanks:(Y||[]).map((Xe,Ct)=>({id:Xe.question_id||Ct+1,options:Xe.blank_options||[],correct_answer:Xe.correct_answers?.[0]||Xe.correct_answer,question:Xe.question_json||""})),separateType:K?.separate_type,testId:O?.test_id,testName:K?.test_name||O?.test_name,teacherId:K?.teacher_id||O?.teacher_id,subjectId:K?.subject_id||O?.subject_id,onTestComplete:_t,onAnswerChange:(Xe,Ct)=>{const Pt=Y.findIndex(Ue=>Ue.question_id===Xe);if(Pt!==-1){const Ue=[...B];Ue[Pt]=Ct,z(Ue),console.log(` Fill Blanks answer changed: question ${Xe} = ${Ct}`)}}},`fill-blanks-${O?.test_id}-${K?.test_name}`):null;default:return c.jsx("div",{children:"Unsupported question type"})}},[O,B,M]);function er(){return!O||!K||!Y?null:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("div",{className:"flex justify-between items-center mb-4",children:c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:K.test_name||K.title||"Test"})}),c.jsx("div",{className:"mb-4",children:c.jsx(Hue,{answeredCount:Zt(),totalQuestions:Y.length,percentage:Math.round(I),timeElapsed:Number(K?.allowed_time||0)>0?V:0,showDetails:!0})})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Answer all questions below:"}),c.jsx("div",{className:"space-y-8",children:Y.map((ue,we)=>c.jsx("div",{className:"question-container",children:xr(ue,we)},ue.question_id||we))})]}),c.jsx("div",{className:"flex justify-center",children:c.jsx(nt,{variant:"primary",size:"lg",onClick:_t,disabled:Z||Zt()<Y.length,loading:Z,children:Z?"Submitting...":`Submit Test (${Zt()}/${Y.length})`})})]})}if(f)return c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Gr,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:t?"Starting Test...":"Loading Student Tests..."})]})});if(b)return c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Tests Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:b}),c.jsx(nt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})});return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Test"})}),c.jsx(nt,{variant:"outline",onClick:pr,children:"Back to Cabinet"})]})})}),xt&&P==="results"&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mx-4 sm:mx-6 lg:mx-8 mt-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsxs("p",{className:"text-sm text-red-700",children:[c.jsx("strong",{children:"Academic Integrity Warning:"}),"This test has been flagged for suspicious behavior. You have switched tabs ",ut," times during the test."]})})]})}),c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 overflow-y-auto",children:[!t&&P==="list"&&_r(),P==="test"&&er(),P==="results"&&ge()]}),P==="test"&&p&&c.jsxs("div",{className:"fixed inset-0 bg-white/80 backdrop-blur-[1px] flex flex-col items-center justify-center z-50",children:[c.jsx(Gr,{size:"lg"}),c.jsx("p",{className:"mt-3 text-gray-700",children:"Preparing your test"}),y&&c.jsx("div",{className:"mt-3 text-sm text-gray-500",children:y})]}),c.jsx(PV,{isOpen:ce,onClose:()=>he(!1),testType:Ee?.test_type,testId:Ee?.test_id,testName:Ee?.test_name,questions:Ee?.questions,isLoading:f}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:k.map(ue=>c.jsx(tc,{type:ue.type,message:ue.message,onClose:()=>A(we=>we.filter(Te=>Te.id!==ue.id))},ue.id))})]});function _r(){return!a||a.length===0?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"No active tests available for your class."})}):c.jsx("div",{className:"space-y-6",children:a.map((ue,we)=>c.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:ue.test_name}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Subject:"})," ",ue.subject]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Teacher:"})," ",ue.teacher_name]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Type:"})," ",ue.test_type]})]}),c.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Assigned: ",new Date(ue.assigned_at).toLocaleDateString()]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx(nt,{variant:"outline",onClick:()=>vt(ue),disabled:T||f,children:"View Details"}),c.jsx(nt,{variant:"primary",onClick:()=>gt(ue),disabled:T||f,children:T?"Starting...":"Start Test"})]})]})},we))})}function ge(){if(!O||!K||!Y||!B)return null;const ue={};return B.forEach((we,Te)=>{if(Y[Te]){const Xe=Y[Te].question_id||Y[Te].id||Te;ue[String(Xe)]=we,console.log(" Converting answer:",{index:Te,questionId:Xe,answer:we,question:Y[Te]})}}),console.log(" Final answersObject:",ue),console.log(" Questions structure:",Y.map(we=>({id:we.question_id,correct_answer:we.correct_answer}))),c.jsx(Dde,{testInfo:K,questions:Y,testType:O.test_type,studentAnswers:ue,onBackToCabinet:pr,checkAnswerCorrectness:_p,formatStudentAnswerForDisplay:Ir,getCorrectAnswer:gv})}},Bde=()=>{const{testId:e}=O2(),t=yo(),{user:r}=ls(),{makeAuthenticatedRequest:n}=Bo(),{showNotification:s}=Ba(),[a,i]=C.useState(null),[o,l]=C.useState(!0),[u,d]=C.useState(null),[f,g]=C.useState(null),[p,x]=C.useState(!1);um("matching_type",a?.id);const y=C.useCallback(()=>{if(!r?.student_id||!e)return!1;const E=`test_completed_${r.student_id}_matching_type_${e}`,k=localStorage.getItem(E)==="true",A=`retest1_${r.student_id}_matching_type_${e}`,P=localStorage.getItem(A)==="true";return k&&!P?(console.log(" Test already completed, redirecting to cabinet"),s("This test has already been completed","info"),t("/student"),!0):!1},[r?.student_id,e,t,s]),v=C.useCallback(async()=>{if(!e){d("Test ID is required"),l(!1);return}if(!y())try{l(!0),d(null);const E=await n(`/.netlify/functions/get-matching-type-test?test_id=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!E.ok)throw new Error("Failed to load test data");const k=await E.json();if(!k.success)throw new Error(k.message||"Failed to load test");const A=k.data;console.log(" Test data from get-matching-type-test:",A);const P=await n(`/.netlify/functions/get-test-questions?test_id=${e}&test_type=matching_type`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!P.ok)throw new Error("Failed to load test questions");const j=await P.json();if(!j.success)throw new Error(j.message||"Failed to load test questions");console.log(" Questions data from get-test-questions:",j);const O={id:A.test_id,test_name:A.test_name,teacher_id:A.teacher_id,subject_id:A.subject_id,image_url:A.image_url,image:null,blocks:(()=>{if(Array.isArray(j.questions)&&j.questions.length>0){const R=j.questions[0];return Array.isArray(R.blocks)?R.blocks.map((M,G)=>{let K=M.block_coordinates||M.coordinates||(typeof M.x=="number"?{x:M.x,y:M.y,width:M.width,height:M.height}:null);if(typeof K=="string")try{K=JSON.parse(K)}catch{K=null}return(!K||typeof K!="object")&&(K={x:0,y:0,width:30,height:10}),K={x:(typeof K.x=="number"?K.x:Number(K.x))||0,y:(typeof K.y=="number"?K.y:Number(K.y))||0,width:(typeof K.width=="number"?K.width:Number(K.width))||30,height:(typeof K.height=="number"?K.height:Number(K.height))||10},{id:M.block_id||M.question_id||M.id||G+1,word:M.word||`Word ${G+1}`,coordinates:K,hasArrow:!!M.has_arrow,arrow:M.arrow||null}}):j.questions.map(M=>{console.log(" Processing question:",M);let G;try{G=typeof M.block_coordinates=="string"?JSON.parse(M.block_coordinates):M.block_coordinates}catch{G={x:0,y:0,width:100,height:100}}return(!G||typeof G!="object")&&(G={x:0,y:0,width:100,height:100}),G={x:(typeof G.x=="number"?G.x:Number(G.x))||0,y:(typeof G.y=="number"?G.y:Number(G.y))||0,width:(typeof G.width=="number"?G.width:Number(G.width))||100,height:(typeof G.height=="number"?G.height:Number(G.height))||100},{id:M.question_id,word:M.word,coordinates:G,hasArrow:M.has_arrow,arrow:M.arrow}})}return[]})(),words:(()=>{if(Array.isArray(j.questions)&&j.questions.length>0){const R=j.questions[0];if(Array.isArray(R.words)){const M=R.words,G=Array.isArray(R.blocks)?R.blocks:[];return typeof M[0]=="string"?M.map((re,Y)=>({id:`w_${G[Y]?.question_id||G[Y]?.block_id||j.questions[Y]?.question_id||Y+1}_${Y}`,word:String(re),blockId:null,isPlaced:!1,isCorrect:!1})):M.map((re,Y)=>({id:`w_${re.question_id||re.id||Y+1}_${Y}`,word:re.word||String(re.text||""),blockId:null,isPlaced:!1,isCorrect:!1}))}return j.questions.map(M=>({id:`w_${M.question_id}`,word:M.word,blockId:null,isPlaced:!1,isCorrect:!1}))}return[]})(),arrows:A.arrows?A.arrows.map(R=>(console.log(" Processing arrow:",R),{id:R.id,questionId:R.question_id,blockId:R.block_id||R.question_id,start:{x:Number(R.start_x)||0,y:Number(R.start_y)||0},end:{x:Number(R.end_x)||0,y:Number(R.end_y)||0},rel_start_x:R.rel_start_x!==null?Number(R.rel_start_x):null,rel_start_y:R.rel_start_y!==null?Number(R.rel_start_y):null,rel_end_x:R.rel_end_x!==null?Number(R.rel_end_x):null,rel_end_y:R.rel_end_y!==null?Number(R.rel_end_y):null,image_width:R.image_width?Number(R.image_width):null,image_height:R.image_height?Number(R.image_height):null,style:(typeof R.style=="string"?JSON.parse(R.style):R.style)||{color:"#dc3545",thickness:3}})):[]};if(A.image_url){const R=new Image;R.crossOrigin="anonymous",R.onload=()=>{O.image=R,i(O),l(!1)},R.onerror=()=>{console.warn("Failed to load test image"),i(O),l(!1)},R.src=A.image_url}else i(O),l(!1)}catch(E){console.error("Error loading test data:",E),d(E.message||"Failed to load test"),l(!1)}},[e,n]);C.useEffect(()=>{r?.student_id&&v()},[v,r?.student_id]);const T=C.useCallback(async E=>{console.log("Test completed:",E),s("Test completed successfully!","success");const k=parseInt(E)||0,A=a?.blocks?.length||a?.words?.length||0,P=A>0?Math.round(k/A*100):0,j={showResults:!0,testInfo:{test_name:a?.test_name||"Test",id:a?.id,test_id:a?.id},testType:"matching_type",score:k,totalQuestions:A,percentage:P,passed:P>=60,questionAnalysis:a?.questions?.map((O,R)=>({questionNumber:R+1,isCorrect:R<k,userAnswer:R<k?`Matched: ${O.word}`:"Not answered",correctAnswer:`Match: ${O.word}`}))||Array.from({length:A},(O,R)=>({questionNumber:R+1,isCorrect:R<k,userAnswer:R<k?"Matched":"Not answered",correctAnswer:"Match required"})),timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};console.log(" Using test results data:",j),g(j),x(!0)},[a,s]),_=C.useCallback(()=>{t("/student")},[t]),b=C.useCallback(()=>{x(!1),g(null),v()},[v]);return o?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx(Et,{className:"max-w-md w-full",children:c.jsxs(Et.Body,{className:"text-center",children:[c.jsx(Gr,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading test..."})]})})}):u?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx(Et,{className:"max-w-md w-full",children:c.jsxs(Et.Body,{className:"text-center",children:[c.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Test"}),c.jsx("p",{className:"text-gray-600 mb-4",children:u}),c.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Dashboard"})]})})}):a?p&&f?c.jsx("div",{className:"bg-gray-50 overflow-y-auto min-h-screen",children:c.jsx(j1,{testResults:f,onBackToCabinet:_,onRetakeTest:b,isLoading:!1})}):c.jsx(Fue,{testData:a,onTestComplete:T,onBackToCabinet:_}):c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx(Et,{className:"max-w-md w-full",children:c.jsxs(Et.Body,{className:"text-center",children:[c.jsx("div",{className:"text-gray-500 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Test Data"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load test data"}),c.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Dashboard"})]})})})},$de=()=>{const{testId:e}=O2(),t=yo(),{user:r}=ls(),{makeAuthenticatedRequest:n}=Bo(),{showNotification:s}=Ba(),[a,i]=C.useState(null),[o,l]=C.useState(!0),[u,d]=C.useState(null),[f,g]=C.useState(null),[p,x]=C.useState(!1),y=C.useCallback(()=>{if(!r?.student_id||!e)return!1;const b=`test_completed_${r.student_id}_word_matching_${e}`,E=`retest1_${r.student_id}_word_matching_${e}`;return localStorage.getItem(E)==="true"?!1:localStorage.getItem(b)==="true"},[r?.student_id,e]),v=C.useCallback(async()=>{if(!e){d("Test ID is required"),l(!1);return}if(y()){s("This test has already been completed","warning"),t("/student");return}l(!0),d(null);try{const b=`word_matching_test_${e}`,E=ms(b);if(E){if(console.log(" Word matching test loaded from cache:",E),E.id){let P=E;if(Array.isArray(P.rightWords)&&Array.isArray(P.correctPairs)){const j=P.rightWords.map((G,K)=>K);for(let G=j.length-1;G>0;G--){const K=Math.floor(Math.random()*(G+1));[j[G],j[K]]=[j[K],j[G]]}const O=j.map(G=>P.rightWords[G]),R=new Map(j.map((G,K)=>[G,K])),M=P.correctPairs.map(G=>R.get(G));P={...P,rightWords:O,correctPairs:M}}i(P)}else{let j={id:E.test_id,test_id:E.test_id,test_name:E.test_name,teacher_id:E.teacher_id,subject_id:E.subject_id,num_questions:E.num_questions,interaction_type:E.interaction_type,passing_score:E.passing_score,created_at:E.created_at,updated_at:E.updated_at,leftWords:E.leftWords,rightWords:E.rightWords,correctPairs:E.correctPairs,originalPairs:E.originalPairs};if(Array.isArray(j.rightWords)&&Array.isArray(j.correctPairs)){const O=j.rightWords.map((K,re)=>re);for(let K=O.length-1;K>0;K--){const re=Math.floor(Math.random()*(K+1));[O[K],O[re]]=[O[re],O[K]]}const R=O.map(K=>j.rightWords[K]),M=new Map(O.map((K,re)=>[K,re])),G=j.correctPairs.map(K=>M.get(K));j={...j,rightWords:R,correctPairs:G}}i(j)}l(!1);return}const A=await(await n(`/.netlify/functions/get-word-matching-test?test_id=${e}`)).json();if(A.success){const P={id:A.data.test_id,test_id:A.data.test_id,test_name:A.data.test_name,teacher_id:A.data.teacher_id,subject_id:A.data.subject_id,num_questions:A.data.num_questions,interaction_type:A.data.interaction_type,passing_score:A.data.passing_score,created_at:A.data.created_at,updated_at:A.data.updated_at,leftWords:A.data.leftWords,rightWords:A.data.rightWords,correctPairs:A.data.correctPairs,originalPairs:A.data.originalPairs};let j=P;if(Array.isArray(j.rightWords)&&Array.isArray(j.correctPairs)){const O=j.rightWords.map((K,re)=>re);for(let K=O.length-1;K>0;K--){const re=Math.floor(Math.random()*(K+1));[O[K],O[re]]=[O[re],O[K]]}const R=O.map(K=>j.rightWords[K]),M=new Map(O.map((K,re)=>[K,re])),G=j.correctPairs.map(K=>M.get(K));j={...j,rightWords:R,correctPairs:G}}i(j),ys(b,j,Os.word_matching_test),console.log(" Word matching test loaded from API and cached:",P)}else throw new Error(A.message||"Failed to load test")}catch(b){console.error("Error loading word matching test:",b),d(b.message),s("Failed to load test: "+b.message,"error")}finally{l(!1)}},[e,y,n,s,t]),T=C.useCallback(async b=>{console.log("Test completed:",b),s("Test completed successfully!","success");const E=parseInt(b)||0,k=a?.num_questions||0,A=k>0?Math.round(E/k*100):0,P={showResults:!0,testInfo:{test_name:a?.test_name||"Test",id:a?.id,test_id:a?.id},testType:"word_matching",score:E,totalQuestions:k,percentage:A,passed:A>=60,questionAnalysis:Array.isArray(a?.correctPairs)?a.correctPairs.map((j,O)=>({questionNumber:O+1,isCorrect:O<E,userAnswer:O<E?`${j.left}  ${j.right}`:"Not answered",correctAnswer:`${j.left}  ${j.right}`})):Array.from({length:k},(j,O)=>({questionNumber:O+1,isCorrect:O<E,userAnswer:O<E?"Matched":"Not answered",correctAnswer:"Match required"})),timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};console.log(" Using test results data:",P),g(P),x(!0)},[a,s]),_=C.useCallback(()=>{t("/student")},[t]);return C.useEffect(()=>{v()},[v]),o?c.jsx("div",{className:"flex justify-center items-center min-h-screen",children:c.jsxs(Et,{className:"p-8 text-center",children:[c.jsx(Gr,{size:"lg",className:"mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading word matching test..."})]})}):u?c.jsx("div",{className:"flex justify-center items-center min-h-screen",children:c.jsx(Et,{className:"p-8 text-center",children:c.jsxs("div",{className:"text-red-600 mb-4",children:[c.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error Loading Test"}),c.jsx("p",{className:"text-gray-600 mb-4",children:u}),c.jsx("button",{onClick:()=>t("/student"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Cabinet"})]})})}):a?p&&f?c.jsx("div",{className:"bg-gray-50 overflow-y-auto min-h-screen",children:c.jsx(j1,{testResults:f,onBackToCabinet:()=>{g(null),x(!1),t("/student")},onRetakeTest:(b,E)=>{g(null),x(!1),v()},isLoading:!1})}):c.jsx(rt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"min-h-screen bg-gray-50 py-8",children:c.jsx(Iue,{testData:a,onTestComplete:T,onBackToCabinet:_})}):c.jsx("div",{className:"flex justify-center items-center min-h-screen",children:c.jsx(Et,{className:"p-8 text-center",children:c.jsxs("div",{className:"text-gray-600 mb-4",children:[c.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Not Found"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"The requested test could not be found."}),c.jsx("button",{onClick:()=>t("/student"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Cabinet"})]})})})},Ude=C.forwardRef(({onRecordingComplete:e,minDuration:t=0,maxDuration:r=600,minWords:n=50,maxAttempts:s=3,currentAttempt:a=1},i)=>{const[o,l]=C.useState(!1),[u,d]=C.useState(!1),[f,g]=C.useState(0),[p,x]=C.useState(null),[y,v]=C.useState(null),[T,_]=C.useState("good"),b=C.useRef(null),E=C.useRef([]),k=C.useRef(null),A=C.useRef(null),P=C.useRef(null),j=C.useRef(null),O=C.useRef(null);C.useImperativeHandle(i,()=>({startRecording:()=>R(),stopRecording:()=>M(),pauseRecording:()=>G(),resumeRecording:()=>K()}));const R=C.useCallback(async()=>{try{if(v(null),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox.");if(!window.isSecureContext&&!window.location.hostname.includes("localhost"))throw new Error("Microphone access requires HTTPS. Please use a secure connection.");const z=window.AudioContext||window.webkitAudioContext;P.current||(P.current=new z),P.current.state!=="running"&&await P.current.resume().catch(()=>{}),console.log(" Requesting microphone permission...");const I=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,channelCount:1}});console.log(" Microphone permission granted"),k.current=I;try{let J=document.getElementById("ios-audio-sink");J||(J=document.createElement("audio"),J.id="ios-audio-sink",J.muted=!0,J.playsInline=!0,J.style.display="none",document.body.appendChild(J)),J.srcObject=I,await J.play().catch(()=>{})}catch{}const W=P.current.createAnalyser();P.current.createMediaStreamSource(I).connect(W),W.fftSize=256,j.current=W,re();let L="audio/webm;codecs=opus";typeof MediaRecorder<"u"&&MediaRecorder.isTypeSupported&&!MediaRecorder.isTypeSupported(L)&&(MediaRecorder.isTypeSupported("audio/mp4")?L="audio/mp4":MediaRecorder.isTypeSupported("audio/aac")?L="audio/aac":L="");const H=new MediaRecorder(I,L?{mimeType:L}:void 0);b.current=H,E.current=[],H.ondataavailable=J=>{J.data.size>0&&E.current.push(J.data)},H.onstop=()=>{const J=L&&L.startsWith("audio/")?L:"audio/webm",Q=new Blob(E.current,{type:J});x(Q),e(Q,f),k.current&&k.current.getTracks().forEach(ne=>ne.stop()),O.current&&cancelAnimationFrame(O.current)},H.start(1e3),l(!0),g(0),A.current=setInterval(()=>{g(J=>{const Q=J+1;return Q>=r&&M(),Q})},1e3)}catch(z){console.error("Error starting recording:",z);const I=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;z.name==="NotAllowedError"?v(I?"Microphone access denied. Please go to Settings > Safari > Microphone and allow access, then refresh the page.":"Microphone access denied. Please allow microphone access in your browser settings and try again."):z.name==="NotFoundError"?v("No microphone found. Please connect a microphone and try again."):z.name==="NotSupportedError"?v("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox."):z.message.includes("HTTPS")?v("Microphone access requires HTTPS. Please use a secure connection."):v(`Failed to access microphone: ${z.message}`)}},[r]),M=C.useCallback(()=>{if(b.current&&o&&(b.current.stop(),l(!1),d(!1),A.current&&clearInterval(A.current),f<t)){v(`Recording must be at least ${t} seconds long.`);return}},[o,f,t,p,e]),G=C.useCallback(()=>{b.current&&o&&!u&&(b.current.pause(),d(!0),A.current&&clearInterval(A.current))},[o,u]),K=C.useCallback(()=>{b.current&&o&&u&&(b.current.resume(),d(!1),A.current=setInterval(()=>{g(z=>{const I=z+1;return I>=r&&M(),I})},1e3))},[o,u,r,M]),re=C.useCallback(()=>{if(!j.current)return;const z=j.current,I=new Uint8Array(z.frequencyBinCount),W=()=>{z.getByteFrequencyData(I);const V=I.reduce((L,H)=>L+H,0)/I.length;V<10?_("poor"):V<30?_("fair"):_("good"),o&&(O.current=requestAnimationFrame(W))};W()},[o]),Y=z=>{const I=Math.floor(z/60),W=z%60;return`${I}:${W.toString().padStart(2,"0")}`},ee=()=>{switch(T){case"poor":return"text-red-600";case"fair":return"text-yellow-600";case"good":return"text-green-600";default:return"text-gray-600"}},B=()=>{switch(T){case"poor":return"Poor audio quality - speak closer to microphone";case"fair":return"Fair audio quality - good for recording";case"good":return"Excellent audio quality";default:return"Monitoring audio quality..."}};return c.jsxs("div",{className:"audio-recorder bg-white rounded-lg shadow-lg p-3 sm:p-6",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Record Your Response"}),c.jsx("p",{className:"text-gray-600",children:"Speak clearly and at a normal pace. You can pause and resume if needed."})]}),c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:Y(f)}),c.jsx("div",{className:`text-sm ${ee()}`,children:B()}),u&&c.jsx("div",{className:"text-yellow-600 font-semibold mt-2",children:" Recording Paused"})]}),o&&c.jsx("div",{className:"mb-6",children:c.jsx("div",{className:"flex justify-center items-center space-x-1 h-8",children:Array.from({length:20},(z,I)=>c.jsx("div",{className:"bg-blue-400 rounded-sm",style:{width:"4px",height:`${Math.random()*20+4}px`,animation:"pulse 0.5s ease-in-out infinite"}},I))})}),c.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-center mb-6",children:o?c.jsxs(c.Fragment,{children:[u?c.jsxs("button",{onClick:K,className:"w-full sm:w-auto bg-green-600 text-white px-6 py-4 rounded-full hover:bg-green-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("span",{children:"Resume"})]}):c.jsxs("button",{onClick:G,className:"w-full sm:w-auto bg-yellow-600 text-white px-6 py-4 rounded-full hover:bg-yellow-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("span",{children:"Pause"})]}),c.jsxs("button",{onClick:M,className:"w-full sm:w-auto bg-gray-600 text-white px-6 py-4 rounded-full hover:bg-gray-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("span",{children:"Stop & Submit"})]})]}):c.jsxs("button",{onClick:R,className:"w-full sm:w-auto bg-red-600 text-white px-6 py-4 rounded-full hover:bg-red-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("span",{children:"Start Recording"})]})}),y&&c.jsx("div",{className:"mt-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-800",children:y})}),c.jsxs("div",{className:"mt-4 text-center text-sm text-gray-600",children:["Attempt ",a," of ",s,a<s&&c.jsx("span",{className:"ml-2 text-blue-600",children:"(You can re-record if needed)"})]})]})}),zV=({audioBlob:e,audioUrl:t,recordingTime:r,className:n=""})=>{const[s,a]=C.useState(!1),[i,o]=C.useState(0),[l,u]=C.useState(0),[d,f]=C.useState(1),[g,p]=C.useState(1),[x,y]=C.useState(!0),[v,T]=C.useState(""),[_,b]=C.useState(!1),[E,k]=C.useState(null),[A,P]=C.useState(!1),j=C.useRef(null),O=C.useRef(null),R=C.useRef(!1);C.useEffect(()=>()=>{R.current=!0},[]),C.useEffect(()=>{let I=!1;if(t)I||T(t);else if(e){if(!e||e.size===0){I||y(!1);return}if(!(e instanceof Blob)){console.error("audioBlob is not a Blob:",typeof e,e),I||y(!1);return}const W=URL.createObjectURL(e);return I||T(W),()=>{I=!0,URL.revokeObjectURL(W)}}return()=>{I=!0}},[e,t]),C.useEffect(()=>{let I=!1;const W=L=>{try{const H=new URL(L);return/\/storage\/v1\/object\/public\//.test(H.pathname)}catch{return!1}};async function V(L){if(!L||A||/\/object\/sign\//.test(L)||!W(L))return L;try{const J=new URL(L).pathname.replace(/^\/storage\/v1\/object\/public\//,""),Q=J.split("/")[0],ne=J.substring(Q.length+1),Z=await fetch(`/.netlify/functions/get-speaking-test-new?action=sign-audio&bucket=${encodeURIComponent(Q)}&file_path=${encodeURIComponent(ne)}`);if(Z.ok){const{url:se}=await Z.json();if(!I&&!R.current){P(!0);try{await fetch(se,{headers:{Range:"bytes=0-1"},mode:"cors"})}catch{}T(se)}return se}}catch{}return L}return(async()=>{if(t){const L=await V(t);try{await fetch(L,{headers:{Range:"bytes=0-1"},mode:"cors"})}catch{}!I&&!R.current&&!A&&T(L)}})(),()=>{I=!0}},[t,A]),C.useEffect(()=>{let I=!1;return v&&(I||(b(!1),k(null),y(!0))),()=>{I=!0}},[v]),C.useEffect(()=>{if(j.current&&v){const I=j.current;let W=!1;try{I.src=v}catch{}I.load();const V=()=>{if(W||R.current)return;let ie=I.duration;if(ie===1/0)try{I.currentTime=1e101,I.ontimeupdate=()=>{if(W||R.current)return;I.ontimeupdate=null;const me=I.duration;W||(u(isFinite(me)&&me>0?me:0),I.currentTime=0,y(!1))};return}catch(me){console.warn("Seek trick failed:",me)}if(isNaN(ie)||!isFinite(ie)||ie<=0){const me=I.seekable&&I.seekable.length>0&&isFinite(I.seekable.end(0)),Ne=!me&&I.buffered&&I.buffered.length>0&&isFinite(I.buffered.end(I.buffered.length-1));me?ie=I.seekable.end(0):Ne&&(ie=I.buffered.end(I.buffered.length-1))}isNaN(ie)||!isFinite(ie)||ie<=0?(console.warn("Invalid audio duration after fallbacks:",ie),r&&r>0?W||u(r):W||u(0)):W||u(ie),W||y(!1)},L=()=>{W||R.current||V()},H=()=>{W||R.current||V()},J=()=>{W||R.current||V()},Q=()=>{W||R.current||V()},ne=()=>{W||R.current||o(I.currentTime)},Z=()=>{W||R.current||(a(!1),o(0))},se=()=>{W||R.current||a(!0)},ce=()=>{W||R.current||a(!1)},he=ie=>{if(W||R.current)return;console.error("Audio loading error:",ie),console.error("Audio error details:",{error:I.error,networkState:I.networkState,readyState:I.readyState,src:I.src,currentSrc:I.currentSrc});const me=I.error?.code;me===4&&b(!0),k(I.error||{code:me}),y(!1)},Ee=setTimeout(()=>{W||R.current||I.readyState===0&&y(!1)},6e3);return I.addEventListener("loadedmetadata",L),I.addEventListener("durationchange",H),I.addEventListener("canplay",J),I.addEventListener("canplaythrough",Q),I.addEventListener("timeupdate",ne),I.addEventListener("ended",Z),I.addEventListener("play",se),I.addEventListener("pause",ce),I.addEventListener("error",he),()=>{W=!0,clearTimeout(Ee),I.removeEventListener("loadedmetadata",L),I.removeEventListener("durationchange",H),I.removeEventListener("canplay",J),I.removeEventListener("canplaythrough",Q),I.removeEventListener("timeupdate",ne),I.removeEventListener("ended",Z),I.removeEventListener("play",se),I.removeEventListener("pause",ce),I.removeEventListener("error",he),I.pause(),I.src="",I.load()}}},[v,r]),C.useEffect(()=>{let I=!1;return r&&r>0&&(isNaN(l)||!isFinite(l)||l<=0)&&(I||u(r)),()=>{I=!0}},[r,l]);const M=()=>{j.current&&(s?j.current.pause():j.current.play().catch(I=>{console.error("Play failed:",I)}))},G=I=>{if(j.current&&O.current&&l>0){const W=O.current.getBoundingClientRect(),V=I.clientX-W.left,L=W.width,H=Math.max(0,Math.min(l,V/L*l));isFinite(H)&&H>=0&&(j.current.currentTime=H,o(H))}},K=I=>{const W=parseFloat(I.target.value);f(W),j.current&&(j.current.volume=W)},re=I=>{const W=parseFloat(I.target.value);p(W),j.current&&(j.current.playbackRate=W)},Y=I=>{if(isNaN(I))return"0:00";const W=Math.floor(I/60),V=Math.floor(I%60);return`${W}:${V.toString().padStart(2,"0")}`};if(!e&&!t)return c.jsx("div",{className:`audio-player ${n}`,children:c.jsx("div",{className:"text-center text-gray-500 py-8",children:"No audio available"})});const B=(I=>{try{const V=(I||"").toLowerCase().split("?")[0].split("#")[0];return V.endsWith(".webm")?"audio/webm":V.endsWith(".mp3")?"audio/mpeg":V.endsWith(".m4a")?"audio/mp4":V.endsWith(".aac")?"audio/aac":V.endsWith(".wav")?"audio/wav":void 0}catch{return}})(v||t),z=Be.useMemo(()=>typeof window>"u"?!0:document.createElement("audio").canPlayType("audio/webm")!=="",[]);return c.jsxs("div",{className:`audio-player bg-gray-50 rounded-lg p-4 ${n}`,children:[c.jsx("audio",{ref:j,preload:"metadata",controls:!1,style:{display:"none"},crossOrigin:"anonymous",children:c.jsx("source",{src:v,type:B})}),x?c.jsxs("div",{className:"text-center py-4",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),c.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading audio..."})]}):_?c.jsxs("div",{className:"text-center py-4",children:[c.jsx("p",{className:"text-sm text-red-600",children:"This audio format isn't supported by your browser."}),v?c.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-sm",children:"Open in new tab"}):null,B?c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Detected type: ",B]}):null,c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Browser WebM support: ",z?"Yes":"No",!z&&" - Try using Chrome, Firefox, or Edge"]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Preferred format: WebM"})]}):E?c.jsxs("div",{className:"text-center py-4",children:[c.jsx("p",{className:"text-sm text-red-600",children:"Playback failed. Please try opening the audio directly."}),v?c.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-sm",children:"Open in new tab"}):null,B?c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Detected type: ",B]}):null]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("div",{ref:O,className:"w-full bg-gray-200 rounded-full h-3 cursor-pointer hover:h-4 transition-all min-h-[24px]",onClick:G,children:c.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all",style:{width:`${i/l*100}%`}})}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mt-2 font-medium",children:[c.jsx("span",{children:Y(i)}),c.jsx("span",{children:Y(l)})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("button",{onClick:M,className:"bg-blue-600 text-white p-3 rounded-full hover:bg-blue-700 transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center",children:s?c.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):c.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.617 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.617l3.766-3.793a1 1 0 011.617.793zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:d,onChange:K,className:"w-24 h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer min-h-[20px]"}),c.jsxs("span",{className:"text-sm text-gray-600 w-10 font-medium",children:[Math.round(d*100),"%"]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Speed:"}),c.jsxs("select",{value:g,onChange:re,className:"text-sm border border-gray-300 rounded px-2 py-1",children:[c.jsx("option",{value:"0.5",children:"0.5x"}),c.jsx("option",{value:"0.75",children:"0.75x"}),c.jsx("option",{value:"1",children:"1x"}),c.jsx("option",{value:"1.25",children:"1.25x"}),c.jsx("option",{value:"1.5",children:"1.5x"}),c.jsx("option",{value:"2",children:"2x"})]})]})]})]})]})},Wde=({transcript:e,scores:t,audioBlob:r,recordingTime:n,onReRecord:s,onFinalSubmit:a,canReRecord:i,attemptNumber:o,maxAttempts:l,isSubmitting:u=!1})=>{const[d,f]=C.useState(!1);console.log(" FeedbackDisplay received recordingTime:",n);const g=(v,T)=>{const _=v/T*100;return _>=80?"text-green-600":_>=60?"text-yellow-600":"text-red-600"},p=(v,T)=>{const _=v/T*100;return _>=90?"A+":_>=80?"A":_>=70?"B":_>=60?"C":_>=50?"D":"F"},x=()=>p(t?.overall_score||0,100),y=()=>g(t?.overall_score||0,100);return console.log(" FeedbackDisplay received scores:",t),console.log(" Individual score values:",{grammar_score:t?.grammar_score,vocabulary_score:t?.vocabulary_score,pronunciation_score:t?.pronunciation_score,fluency_score:t?.fluency_score,content_score:t?.content_score}),c.jsxs("div",{className:"feedback-display bg-white rounded-lg shadow-lg p-3 sm:p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Speaking Test Results"}),c.jsx("p",{className:"text-gray-600",children:"Review your performance and decide whether to submit or re-record."})]}),c.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-3 sm:p-6 rounded-lg mb-6",children:c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:`text-4xl font-bold ${y()}`,children:[t?.overall_score||0,"/100"]}),c.jsxs("div",{className:`text-2xl font-semibold ${y()} mt-2`,children:["Grade: ",x()]}),c.jsx("div",{className:"text-gray-600 mt-2",children:t?.overall_score>=80?"Excellent work!":t?.overall_score>=60?"Good job!":t?.overall_score>=50?"Not bad, but could be better.":"Keep practicing!"})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Grammar"}),c.jsxs("span",{className:`font-bold ${g(t?.grammar_score||0,25)}`,children:[t?.grammar_score||0,"/25"]})]}),c.jsxs("div",{className:"text-sm text-gray-600",children:[t?.grammar_mistakes||0," mistakes found"]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min((t?.grammar_score||0)/25*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Vocabulary"}),c.jsxs("span",{className:`font-bold ${g(t?.vocabulary_score||0,20)}`,children:[t?.vocabulary_score||0,"/20"]})]}),c.jsxs("div",{className:"text-sm text-gray-600",children:[t?.vocabulary_mistakes||0," vocabulary issues"]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${Math.min((t?.vocabulary_score||0)/20*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Pronunciation"}),c.jsxs("span",{className:`font-bold ${g(t?.pronunciation_score||0,15)}`,children:[t?.pronunciation_score||0,"/15"]})]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Clarity and accuracy"}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:`${Math.min((t?.pronunciation_score||0)/15*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Fluency"}),c.jsxs("span",{className:`font-bold ${g(t?.fluency_score||0,20)}`,children:[t?.fluency_score||0,"/20"]})]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Pace, pauses, and flow"}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min((t?.fluency_score||0)/20*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Content"}),c.jsxs("span",{className:`font-bold ${g(t?.content_score||0,20)}`,children:[t?.content_score||0,"/20"]})]}),c.jsx("div",{className:"text-sm text-gray-600",children:"How well addressed the prompt"}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:`${Math.min((t?.content_score||0)/20*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Word Count"}),c.jsxs("span",{className:"font-bold text-gray-700",children:[t?.word_count||0," words"]})]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Total words spoken"}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-gray-600 h-2 rounded-full",style:{width:`${Math.min((t?.word_count||0)/100*100,100)}%`}})})]})]}),r&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Your Recording"}),c.jsx(zV,{audioBlob:r,recordingTime:n})]}),t?.feedback&&c.jsx("div",{className:"mb-6 bg-gradient-to-r from-green-50 to-blue-50 p-3 sm:p-6 rounded-lg border border-green-200",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("span",{className:"text-green-600 text-2xl",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-semibold text-green-800 mb-3 text-lg",children:"AI Feedback"}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:t.feedback})]})]})}),t?.improved_transcript&&c.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex items-start space-x-2 mb-3",children:[c.jsx("span",{className:"text-green-600 text-lg",children:""}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Improved Version"}),c.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Here's how your response could be improved with better grammar and vocabulary:"})]})]}),c.jsx("div",{className:"bg-white border border-green-200 rounded p-3",children:c.jsx("p",{className:"text-gray-800 leading-relaxed",children:t.improved_transcript})})]}),c.jsx("div",{className:"mb-6",children:c.jsx("button",{onClick:()=>f(!d),className:"text-blue-600 hover:text-blue-800 text-sm",children:d?"Hide Details":"Show Details"})}),d&&c.jsxs("div",{className:"mb-6 bg-blue-50 p-3 sm:p-4 rounded-lg",children:[c.jsx("h4",{className:"font-semibold mb-3",children:"Detailed Analysis"}),c.jsxs("div",{className:"space-y-3 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Word Count Analysis:"}),c.jsxs("span",{className:"ml-2 text-gray-700",children:["You spoke ",t?.word_count||0," words.",t?.word_count>=50?" Great job meeting the minimum requirement!":" Consider speaking more to meet the minimum word requirement."]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Grammar Analysis:"}),c.jsx("span",{className:"ml-2 text-gray-700",children:t?.grammar_mistakes===0?"Perfect grammar!":`Found ${t?.grammar_mistakes||0} grammar ${t?.grammar_mistakes===1?"mistake":"mistakes"}.`}),t?.grammar_corrections&&t.grammar_corrections.length>0&&c.jsx("div",{className:"mt-2 space-y-2",children:t.grammar_corrections.map((v,T)=>c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-2 sm:p-3",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx("span",{className:"text-red-600 font-mono text-sm",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-red-600",children:v.mistake}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{className:"font-medium text-green-600",children:v.correction})]}),c.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[c.jsx("strong",{children:"Explanation:"})," ",v.explanation]})]})]})},T))})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Vocabulary Analysis:"}),c.jsx("span",{className:"ml-2 text-gray-700",children:t?.vocabulary_mistakes===0?"Excellent vocabulary usage!":`Found ${t?.vocabulary_mistakes||0} vocabulary ${t?.vocabulary_mistakes===1?"issue":"issues"}.`}),t?.vocabulary_corrections&&t.vocabulary_corrections.length>0&&c.jsx("div",{className:"mt-2 space-y-2",children:t.vocabulary_corrections.map((v,T)=>c.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded p-2 sm:p-3",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx("span",{className:"text-purple-600 font-mono text-sm",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-purple-600",children:v.mistake}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{className:"font-medium text-green-600",children:v.correction})]}),c.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[c.jsx("strong",{children:"Explanation:"})," ",v.explanation]})]})]})},T))})]}),t?.language_use_corrections&&t.language_use_corrections.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Language Use Suggestions:"}),c.jsx("div",{className:"mt-2 space-y-2",children:t.language_use_corrections.map((v,T)=>c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 sm:p-3",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx("span",{className:"text-blue-600 font-mono text-sm",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-blue-700",children:v.mistake}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{className:"font-medium text-green-700",children:v.suggestion})]}),v.explanation&&c.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:[c.jsx("strong",{children:"Why:"})," ",v.explanation]})]})]})},T))})]})]})]}),c.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:["Attempt ",o," of ",l]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center justify-center",children:[i&&c.jsxs("button",{onClick:s,className:"w-full sm:w-auto bg-yellow-600 text-white px-4 py-2.5 rounded-lg hover:bg-yellow-700 flex items-center justify-center space-x-2 min-h-[40px] text-base font-medium",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Re-record"})]}),c.jsx("button",{onClick:a,disabled:u,className:`w-full sm:w-auto px-4 py-2.5 rounded-lg flex items-center justify-center space-x-2 min-h-[40px] text-base font-medium ${u?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"} text-white`,children:u?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Submitting..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Submit Final"})]})})]}),!i&&c.jsx("div",{className:"mt-4 p-2 sm:p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:c.jsxs("p",{className:"text-yellow-800 text-sm",children:[c.jsx("strong",{children:"Maximum attempts reached."}),' This is your final attempt. Click "Submit Final" to complete the test.']})})]})},zde=({testData:e,onComplete:t,onExit:r,onTestComplete:n})=>{const[s,a]=C.useState("recording"),[i,o]=C.useState(null),[l,u]=C.useState(""),[d,f]=C.useState(null),[g,p]=C.useState(!1),[x,y]=C.useState(null),[v,T]=C.useState(1),[_]=C.useState(e.max_attempts||3),[b,E]=C.useState(!1),[k,A]=C.useState(0),P=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,[j,O]=C.useState(0),[R,M]=C.useState(null),G=Bo(),{user:K}=ls(),{makeAuthenticatedRequest:re}=G,Y=C.useRef(null);C.useEffect(()=>{if(e?.test_id&&K?.student_id){const Q=`speaking_attempts_${K.student_id}_${e.test_id}`,ne=localStorage.getItem(Q);if(ne){const Z=parseInt(ne,10);Z>0&&Z<=_&&(T(Z),console.log(" Loaded attempts from localStorage:",Z))}}},[e,K,_]),C.useEffect(()=>{if(e&&!R){const Q=new Date;M(Q),console.log(" Speaking test timer started at:",Q.toISOString())}},[e,R]),C.useEffect(()=>{let Q=0;s==="recording"?Q=25:s==="processing"?Q=50:s==="feedback"?Q=75:s==="completed"&&(Q=100),O(Q)},[s]),C.useEffect(()=>{(async()=>{try{if(console.log(" Automatically requesting microphone permission..."),!window.isSecureContext&&!window.location.hostname.includes("localhost")){y("Microphone access requires HTTPS. Please use a secure connection.");return}if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){y("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox.");return}if(P())return;const ne=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});console.log(" Microphone permission granted!"),E(!0),ne.getTracks().forEach(Z=>Z.stop())}catch(ne){console.error(" Microphone permission denied:",ne),ne.name==="NotAllowedError"?y("Microphone access denied. Please allow microphone access in your browser settings and refresh the page."):ne.name==="NotFoundError"?y("No microphone found. Please connect a microphone and try again."):y("Microphone access failed. Please check your browser settings and try again.")}})()},[]),C.useEffect(()=>{const Q=setInterval(()=>{i&&s==="recording"&&ee()},3e4);return()=>clearInterval(Q)},[i,s]);const ee=C.useCallback(async()=>{try{const Q={test_id:e.test_id,audio_blob:i?await B(i):null,attempt_number:v,step:s,timestamp:new Date().toISOString()};localStorage.setItem(`speaking_progress_${e.test_id}`,JSON.stringify(Q))}catch(Q){console.error("Failed to save progress:",Q)}},[e.test_id,i,v,s]),B=Q=>new Promise((ne,Z)=>{const se=new FileReader;se.onloadend=()=>{const he=se.result.split(",")[1];ne(he)},se.onerror=Z,se.readAsDataURL(Q)}),z=C.useCallback(Q=>{if(e?.test_id&&K?.student_id){const ne=`speaking_attempts_${K.student_id}_${e.test_id}`;localStorage.setItem(ne,Q.toString()),console.log(" Saved attempts to localStorage:",Q)}},[e,K]),I=C.useCallback(async(Q,ne,Z,se,ce)=>{if(e?.test_id&&K?.student_id)try{const{setCachedData:he,CACHE_TTL:Ee}=await Vi(async()=>{const{setCachedData:Oe,CACHE_TTL:Re}=await Promise.resolve().then(()=>Ug);return{setCachedData:Oe,CACHE_TTL:Re}},void 0),ie=`speaking_test_data_${K.student_id}_${e.test_id}`,Ne={audioBlob:Q?await B(Q):null,transcript:ne,scores:Z,recordingTime:se,currentStep:ce,timestamp:Date.now()};he(ie,Ne,Ee.speaking_test_data),console.log(" Saved speaking test data to cache:",ie)}catch(he){console.error("Failed to save speaking test data to cache:",he)}},[e,K]),W=C.useCallback(async()=>{if(e?.test_id&&K?.student_id)try{const{getCachedData:Q}=await Vi(async()=>{const{getCachedData:se}=await Promise.resolve().then(()=>Ug);return{getCachedData:se}},void 0),ne=`speaking_test_data_${K.student_id}_${e.test_id}`,Z=Q(ne);if(Z){if(console.log(" Loaded speaking test data from cache:",Z),Z.audioBlob){const se=new Blob([Uint8Array.from(atob(Z.audioBlob),ce=>ce.charCodeAt(0))],{type:"audio/webm"});o(se)}return Z.transcript&&u(Z.transcript),Z.scores&&f(Z.scores),Z.recordingTime&&A(Z.recordingTime),Z.currentStep&&a(Z.currentStep),!0}}catch(Q){console.error("Failed to load speaking test data from cache:",Q)}return!1},[e,K]);C.useEffect(()=>{if(e?.test_id&&K?.student_id){try{const Q=K.student_id,ne=`retest_assignment_id_${Q}_speaking_${e.test_id}`,Z=`retest_in_progress_${Q}_speaking_${e.test_id}`;if(!!localStorage.getItem(ne)||!!localStorage.getItem(Z)){const ce=`speaking_test_data_${Q}_${e.test_id}`,he=`anti_cheating_${Q}_speaking_${e.test_id}`,Ee=`speaking_progress_${e.test_id}`;localStorage.removeItem(ce),localStorage.removeItem(he),localStorage.removeItem(Ee),console.log(" Cleared speaking per-test cache for retest start:",{cacheKey:ce,antiCheatKey:he,progressKey:Ee})}}catch{}W()}},[e,K,W]),C.useEffect(()=>{e?.test_id&&K?.student_id&&(i||l||d)&&I(i,l,d,k,s)},[i,l,d,k,s,e,K,I]);const V=C.useCallback(async(Q,ne)=>{console.log(" Recording completed, duration:",ne),o(Q),A(ne),a("processing"),y(null);try{const Z=await B(Q),se=new Date,ce=e.start_time?Math.round((se-e.start_time)/1e3):0,he=e.start_time?new Date(e.start_time).toISOString():se.toISOString(),Ee=K.student_id,ie=`retest_assignment_id_${Ee}_speaking_${e.test_id}`,me=localStorage.getItem(ie),Ne={test_id:e.test_id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:Ee,question_id:e.question_id||1,audio_blob:Z,audio_duration:Q.duration||0,time_taken:ce,started_at:he,submitted_at:se.toISOString(),caught_cheating:!1,visibility_change_times:0,is_completed:!0,retest_assignment_id:me?Number(me):null,parent_test_id:e.test_id};console.log(" Submitting speaking test:",Ne),console.log(" Processing audio with AI...");try{const Re=await(await re("/.netlify/functions/process-speaking-audio-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e.test_id,question_id:e.question_id||1,audio_blob:Z})})).json();if(Re.success){console.log(" AI Analysis Result:",Re),u(Re.transcript);const ze=Re.transcript?Re.transcript.split(/\s+/).filter(Me=>Me.length>0).length:0;console.log(" Word Count Verification:",{aiCount:Re.word_count,actualCount:ze,transcript:Re.transcript});const Nt=ze,et={overall_score:Re.overall_score,word_count:Nt,grammar_score:Re.grammar_score,vocabulary_score:Re.vocabulary_score,pronunciation_score:Re.pronunciation_score,fluency_score:Re.fluency_score,content_score:Re.content_score,grammar_mistakes:Re.grammar_mistakes,vocabulary_mistakes:Re.vocabulary_mistakes,feedback:Re.feedback,improved_transcript:Re.improved_transcript,grammar_corrections:Re.grammar_corrections||[],vocabulary_corrections:Re.vocabulary_corrections||[],language_use_corrections:Re.language_use_corrections||[],ai_feedback:Re.ai_feedback||null};console.log(" Mapped Scores:",et),console.log(" Individual scores check:",{grammar_score:Re.grammar_score,vocabulary_score:Re.vocabulary_score,pronunciation_score:Re.pronunciation_score,fluency_score:Re.fluency_score,content_score:Re.content_score}),f(et),a("feedback")}else throw new Error(Re.message||"Failed to process audio with AI");localStorage.removeItem(`speaking_progress_${e.test_id}`)}catch(Oe){console.error("Speaking test submission error:",Oe),Oe.message.includes("No valid authentication token found")?(y("Your session has expired. Please refresh the page and try again."),setTimeout(()=>{window.location.reload()},3e3)):y(Oe.message),a("recording")}}catch(Z){console.error("Speaking test submission error:",Z),y(Z.message),a("recording")}},[e,K,re,v,z]),L=C.useCallback(()=>{if(v<_){o(null),u(""),f(null),y(null);const Q=v+1;T(Q),z(Q),a("recording")}else y("Maximum attempts reached")},[v,_,z]),H=C.useCallback(async()=>{if(!(!l||!d)){p(!0);try{const Q=new Date,ne=e.start_time?Math.round((Q-e.start_time)/1e3):0,Z=e.start_time?new Date(e.start_time).toISOString():Q.toISOString(),se=K.student_id,ce=`retest_assignment_id_${se}_speaking_${e.test_id}`,he=localStorage.getItem(ce),{academicCalendarService:Ee}=await Vi(async()=>{const{academicCalendarService:ze}=await Promise.resolve().then(()=>nS);return{academicCalendarService:ze}},void 0);await Ee.loadAcademicCalendar();const me=Ee.getCurrentTerm()?.id;if(!me)throw new Error("No current academic period found");const Ne={test_id:e.test_id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:se,academic_period_id:me,question_id:e.question_id||1,audio_blob:i?await B(i):null,audio_duration:i?.duration||0,time_taken:ne,started_at:Z,submitted_at:Q.toISOString(),caught_cheating:!1,visibility_change_times:0,is_completed:!0,retest_assignment_id:he?Number(he):null,parent_test_id:e.test_id,transcript:l,scores:d,final_submission:!0};console.log(" Final submission:",Ne),console.log(" Making final submission request...");const Oe=await re("/.netlify/functions/submit-speaking-test-final",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ne)});console.log(" Final submission response status:",Oe.status);const Re=await Oe.json();if(console.log(" Final submission result:",Re),Re.success){if(K?.student_id){const At=`test_completed_${K.student_id}_speaking_${e.test_id}`;localStorage.setItem(At,"true"),console.log(" Speaking test marked as completed in localStorage:",At);const Dt=`retest_in_progress_${K.student_id}_speaking_${e.test_id}`;localStorage.removeItem(Dt),console.log(" Cleared in-progress retest lock:",Dt);const Qe=`speaking_attempts_${K.student_id}_${e.test_id}`;localStorage.removeItem(Qe),console.log(" Cleared attempts from localStorage upon submission");const{clearTestData:tt}=await Vi(async()=>{const{clearTestData:vt}=await Promise.resolve().then(()=>Ug);return{clearTestData:vt}},void 0);tt(K.student_id,"speaking_test_data",e.test_id),console.log(" Cleared speaking test data from cache upon submission");try{const vt=`anti_cheating_${K.student_id}_speaking_${e.test_id}`;localStorage.removeItem(vt),console.log(" Cleared anti-cheating key:",vt)}catch{}}console.log(" Caching speaking test results after submission...");const Nt=`student_results_table_${K?.student_id||K?.id||"unknown"}`,{setCachedData:et,getCachedData:Me,CACHE_TTL:Fe,clearTestData:Ke}=await Vi(async()=>{const{setCachedData:At,getCachedData:Dt,CACHE_TTL:Qe,clearTestData:tt}=await Promise.resolve().then(()=>Ug);return{setCachedData:At,getCachedData:Dt,CACHE_TTL:Qe,clearTestData:tt}},void 0),xt={id:Date.now(),test_id:e.test_id,test_type:"speaking",test_name:e.test_name,score:Math.round(d.overall_score/10),max_score:10,percentage:d.overall_score,caught_cheating:!1,visibility_change_times:0,is_completed:!0,submitted_at:new Date().toISOString(),subject:"Listening and Speaking",teacher_name:e.teacher_name||"Unknown"};let ut={success:!0,results:[],count:0};try{const At=Me(Nt);At&&Array.isArray(At.results)&&(ut.results=At.results.slice())}catch{}ut.results.unshift(xt),ut.count=ut.results.length,et(Nt,ut,Fe.student_results_table),console.log(" Speaking test results cached (merged) with key:",Nt),K?.student_id&&Ke(K.student_id,"speaking",e.test_id);try{const At=`retest_attempts_${K.student_id}_speaking_${e.test_id}`,Dt=localStorage.getItem(At);let Qe=0;if(Dt)try{Qe=JSON.parse(Dt)?.used||0}catch{Qe=0}const tt={used:Qe+1,max:_};localStorage.setItem(At,JSON.stringify(tt));const vt=`retest1_${K.student_id}_speaking_${e.test_id}`,gt=`retest_assignment_id_${K.student_id}_speaking_${e.test_id}`;localStorage.removeItem(vt),localStorage.removeItem(gt),console.log(" Updated retest attempts meta and cleared retest keys:",tt)}catch(At){console.warn(" Failed to update retest attempts meta/keys",At)}try{n&&n(d.overall_score),typeof r=="function"&&r()}catch{}return}else throw new Error(Re.message||"Failed to submit speaking test")}catch(Q){console.error("Speaking test submission error:",Q),y(Q.message)}finally{p(!1)}}},[e,K,re,l,d,i,v,t]);C.useCallback(()=>{a("completed"),t({test_id:e.test_id,transcript:l,scores:d,attempt_number:v})},[e.test_id,l,d,v,t]);const J=()=>{switch(s){case"recording":return c.jsxs("div",{className:"speaking-test-recording",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:e.test_name}),c.jsxs("div",{className:"mb-6 text-center",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Instructions:"}),c.jsx("p",{className:"text-gray-700 mb-4",children:e.prompt}),c.jsx("div",{className:"bg-blue-50 p-3 sm:p-4 rounded-lg",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Requirements:"})," Minimum ",e.min_words||50," words, 0-",e.max_duration||600," seconds duration"]})})]}),c.jsx(Ude,{ref:Y,onRecordingComplete:V,minDuration:0,maxDuration:e.max_duration||600,minWords:e.min_words||50,maxAttempts:_,currentAttempt:v}),x&&c.jsx("div",{className:"mt-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-800",children:x})})]});case"processing":return c.jsxs("div",{className:"transcription-status bg-white rounded-lg shadow-lg p-4 sm:p-8 text-center",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Processing Your Speech"}),c.jsx("p",{className:"text-lg text-blue-600",children:"Please wait while we process your audio..."})]}),c.jsxs("div",{className:"inline-flex space-x-1",children:[c.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),c.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),c.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]});case"feedback":return console.log(" Rendering feedback step with Submit Final button"),c.jsx(Wde,{transcript:l,scores:d,audioBlob:i,recordingTime:k,onReRecord:L,onFinalSubmit:H,canReRecord:v<_,attemptNumber:v,maxAttempts:_,isSubmitting:g});case"completed":const Q={showResults:!0,testInfo:{test_name:e?.test_name||"Speaking Test",id:e?.test_id,test_id:e?.test_id},testType:"speaking",score:d?.overall_score||0,totalQuestions:1,percentage:d?.overall_score||0,passed:(d?.overall_score||0)>=50,questionAnalysis:[{questionNumber:1,userAnswer:l,correctAnswer:"Speaking test completed",isCorrect:!0,score:d?.overall_score||0,maxScore:100,feedback:`Word Count: ${d?.word_count||0}, Grammar: ${d?.grammar_score||0}/40, Vocabulary: ${d?.vocab_score||0}/30`}],timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};return c.jsx("div",{className:"speaking-test-completed",children:c.jsx(j1,{testResults:Q,onBackToCabinet:r,onRetakeTest:()=>{a("recording"),u(""),f(null),o(null),T(1)},isLoading:!1})});default:return null}};return c.jsx("div",{children:c.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6",children:[x&&c.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-800",children:x})}),J()]})})},Hde=()=>{const{testId:e}=O2(),t=yo(),{user:r}=ls(),n=Bo(),{showNotification:s}=Ba(),[a,i]=C.useState(null),[o,l]=C.useState([]),[u,d]=C.useState(!0),[f,g]=C.useState(null),[p,x]=C.useState(!1),[y,v]=C.useState(null),{startTracking:T,stopTracking:_}=um("speaking",e,r?.student_id||r?.id);C.useEffect(()=>{b(),E()},[e]),C.useEffect(()=>{if(a&&!p){console.log(" Speaking test - initializing anti-cheating tracking");const j=r?.student_id||r?.id||"unknown",O=`anti_cheating_${j}_speaking_${e}`,R=localStorage.getItem(O);if(console.log(" Checking for anti-cheating data with key:",O),console.log(" Key format: anti_cheating_{studentId}_{testType}_{testId}"),console.log(" Current test details:",{testType:"speaking",testId:e,studentId:j}),R)try{const M=JSON.parse(R);console.log(" Found existing anti-cheating data for THIS speaking test:",M),console.log(" Visibility change times for this test:",M.tabSwitches||0),console.log(" Cheating status for this test:",M.isCheating||!1),M.isCheating&&(console.log(" WARNING: Student has been flagged for cheating in THIS speaking test!"),console.log(" Tab switches detected in this test:",M.tabSwitches),s(` Warning: Suspicious activity detected in this speaking test (${M.tabSwitches} tab switches). Continued violations may result in test disqualification.`,"warning"))}catch(M){console.error(" Error parsing existing anti-cheating data:",M)}else console.log(" No existing anti-cheating data found for this speaking test - starting fresh");T(),console.log(" Anti-cheating tracking started for speaking test")}return()=>{a&&(console.log(" Cleaning up anti-cheating tracking for speaking test"),_())}},[a,p,e,r?.student_id,r?.id,T,_,s]);const b=async()=>{try{d(!0);const j=await n.getSpeakingTest(e);if(j.success)i(j.test);else throw new Error(j.message||"Failed to load test");const O=await n.getSpeakingTestQuestions(e);O.success&&l(O.questions)}catch(j){console.error("Error loading test data:",j),g(j.message)}finally{d(!1)}},E=()=>{const O=`test_completed_${r?.student_id||r?.id}_speaking_${e}`;if(localStorage.getItem(O)==="true"){x(!0);const M=localStorage.getItem(`speaking_test_result_${e}`);M&&v(JSON.parse(M))}},k=async j=>{try{x(!0),v(j),localStorage.setItem(`speaking_test_result_${e}`,JSON.stringify(j)),window.dispatchEvent(new CustomEvent("testCompleted",{detail:{testId:e,testType:"speaking"}})),setTimeout(()=>{t("/student")},2e3)}catch(O){console.error("Error handling test completion:",O)}},A=()=>{if(console.log(" Navigating back to cabinet from speaking test..."),a&&r?.student_id){console.log(" Cabinet navigation detected - counting as cheating attempt");const O=`anti_cheating_${r?.student_id||r?.id||"unknown"}_speaking_${e}`,R=localStorage.getItem(O);let M=0,G=!1;if(R)try{const ee=JSON.parse(R);M=ee.tabSwitches||0,G=ee.isCheating||!1}catch(ee){console.error(" Error parsing existing anti-cheating data:",ee)}const K=M+1,re=K>=2;console.log(` Tab switch count: ${M}  ${K} (cheating: ${re})`);const Y={tabSwitches:K,isCheating:re,lastUpdated:new Date().toISOString()};localStorage.setItem(O,JSON.stringify(Y)),console.log(" Anti-cheating data updated for cabinet navigation:",Y)}t("/student")};if(u)return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),c.jsx(nt,{variant:"outline",onClick:A,children:"Back to Cabinet"})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),c.jsx("p",{className:"text-gray-600 mt-4",children:"Loading speaking test..."})]})})})]});if(f)return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),c.jsx(nt,{variant:"outline",onClick:A,children:"Back to Cabinet"})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-red-600 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Test"}),c.jsx("p",{className:"text-gray-600 mb-6",children:f})]})})})]});if(p&&y)return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test Results"})}),c.jsx(nt,{variant:"outline",onClick:A,children:"Back to Cabinet"})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx(j1,{testType:"speaking",testData:a,result:y,onRetake:()=>{x(!1),v(null);const j=JSON.parse(localStorage.getItem("userData")||"{}").student_id;localStorage.removeItem(`test_completed_${j}_speaking_${e}`)}})})]});if(!a||o.length===0)return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),c.jsx(nt,{variant:"outline",onClick:A,children:"Back to Cabinet"})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No Test Data"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Unable to load test information"})]})})})]});const P=o[0];return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),c.jsx(nt,{variant:"outline",onClick:A,children:"Back to Cabinet"})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx(zde,{testData:{...a,test_id:parseInt(e),question_id:P?.id,prompt:P?.prompt,start_time:Date.now()},onComplete:k,onExit:A,onTestComplete:k})})]})},Gde=()=>{const{testType:e,testId:t}=O2(),r=yo(),{activeTests:n}=A1(),s=()=>{r("/student")},a=n.find(i=>i.test_type===e&&i.test_id===parseInt(t));return c.jsx(Lde,{onBackToCabinet:s,currentTest:a||{test_type:e,test_id:parseInt(t)}})},Vde=()=>{const e=yo(),{user:t,isAuthenticated:r,isLoading:n}=ls(),[s,a]=C.useState(!1),[i,o]=C.useState(!0),[l,u]=C.useState(""),[d,f]=C.useState([]),[g,p]=C.useState(!1),[x,y]=C.useState(!1),[v,T]=C.useState({currentPassword:"",newPassword:"",confirmPassword:""}),_=C.useCallback(async()=>{console.log(" Initializing Student Application...");try{if(o(!0),u(""),!r||!t){console.log(" User not authenticated, redirecting to login"),e("/login");return}if(t.role!==Gi.STUDENT){console.error(" Invalid user role for student app:",t.role),u("Access denied. Student role required.");return}console.log(" Initializing event listeners..."),b(),console.log(" Setting up back to cabinet button listeners..."),E(),console.log(" Setting up password change form listener..."),k(),console.log(" Loading student data..."),await A(),console.log(" Exposing student functions globally..."),P(),console.log(" Populating student info from user data..."),K(t),a(!0),console.log(" Student Application initialization complete!")}catch(ee){console.error(" Error initializing student app:",ee),u("Failed to initialize student application")}finally{o(!1)}},[r,t,e]);C.useEffect(()=>{n||_()},[n,r,t,_]);const b=C.useCallback(()=>{console.log(" Setting up student event listeners...");const ee=z=>{g&&!z.target.closest(".student-menu")&&p(!1)},B=z=>{z.key==="Escape"&&g&&p(!1)};return document.addEventListener("click",ee),document.addEventListener("keydown",B),()=>{document.removeEventListener("click",ee),document.removeEventListener("keydown",B)}},[g]),E=C.useCallback(()=>{console.log(" Setting up back to cabinet listeners...")},[]),k=C.useCallback(()=>{console.log(" Setting up password change form...")},[]),A=C.useCallback(async()=>{console.log(" Loading student data...");try{console.log(" Student data loaded successfully")}catch(ee){throw console.error(" Error loading student data:",ee),ee}},[]),P=C.useCallback(()=>{console.log(" Exposing student functions globally..."),window.toggleStudentMenu=j,window.showChangePasswordTab=O,window.hideChangePasswordTab=R,window.navigateBackToCabinet=G,window.handlePasswordChange=M,window.populateStudentInfoDirectly=K,console.log(" All student functions exposed globally")},[]),j=C.useCallback(()=>{console.log(" toggleStudentMenu called"),p(ee=>{const B=!ee;return console.log(" Menu state changed from",ee,"to",B),B}),console.log(" Toggled dropdown menu")},[]),O=C.useCallback(()=>{console.log(" showChangePasswordTab called"),y(!0),p(!1)},[]),R=C.useCallback(()=>{console.log(" hideChangePasswordTab called"),y(!1),T({currentPassword:"",newPassword:"",confirmPassword:""})},[]),M=C.useCallback(async ee=>{ee.preventDefault(),console.log(" handlePasswordChange called");const{currentPassword:B,newPassword:z,confirmPassword:I}=v;if(!B||!z||!I){re("Please fill in all fields","error");return}if(z!==I){re("New passwords do not match","error");return}if(z.length<6){re("New password must be at least 6 characters long","error");return}const W=/[a-zA-Z]/.test(z),V=/[0-9]/.test(z);if(!W||!V){re("New password must contain both letters and numbers","error");return}if(!t||!t.student_id){re("Session expired. Please login again.","error");return}const L=t.student_id;if(window.confirm("Are you sure you want to change your password?"))try{o(!0);const H=await ts.changePassword({studentId:L,currentPassword:B,newPassword:z});H.success?(re("Password changed successfully!","success"),R()):re(H.message||"Failed to change password","error")}catch(H){console.error("Password change error:",H),re("Failed to change password. Please try again.","error")}finally{o(!1)}},[v,t]),G=C.useCallback(()=>{if(console.log("[DEBUG] navigateBackToCabinet called"),!r||!t){console.warn("[WARN] No valid user found, redirecting to login"),e("/login");return}t.role===Gi.STUDENT?(console.log("[DEBUG] Navigating to student cabinet"),e("/student")):(console.warn("[WARN] Unknown user role, redirecting to login"),e("/login"))},[r,t,e]),K=C.useCallback(ee=>{console.log(" populateStudentInfoDirectly called with:",ee);try{console.log(" Student info populated successfully")}catch(B){console.error(" Error populating student info:",B)}},[]),re=C.useCallback((ee,B)=>{const z={id:Date.now(),message:ee,type:B,timestamp:new Date};f(I=>[...I,z]),setTimeout(()=>{f(I=>I.filter(W=>W.id!==z.id))},bf.NOTIFICATION_DURATION)},[]),Y=C.useCallback(ee=>{const{name:B,value:z}=ee.target;T(I=>({...I,[B]:z}))},[]);return i?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Gr,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Initializing Student Application..."})]})}):l?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Initialization Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:l}),c.jsx(nt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):s?c.jsxs("div",{className:"bg-gray-50",children:[c.jsxs(bj,{children:[c.jsx(As,{path:"/",element:c.jsxs("div",{className:"student-app",children:[c.jsx(Rde,{isMenuOpen:g,onToggleMenu:j,onShowPasswordChange:O}),x&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Change Password"}),c.jsxs("form",{onSubmit:M,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),c.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",value:v.currentPassword,onChange:Y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),c.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:v.newPassword,onChange:Y,required:!0,minLength:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),c.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:v.confirmPassword,onChange:Y,required:!0,minLength:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx(nt,{type:"button",variant:"secondary",onClick:R,className:"flex-1",children:"Cancel"}),c.jsx(nt,{type:"submit",variant:"primary",disabled:i,className:"flex-1",children:i?c.jsxs(c.Fragment,{children:[c.jsx(Gr,{size:"sm",className:"mr-2"}),"Changing..."]}):"Change Password"})]})]})]})})]})}),c.jsx(As,{path:"/test/:testType/:testId",element:c.jsx(Gde,{})}),c.jsx(As,{path:"matching-test/:testId",element:c.jsx(Bde,{})}),c.jsx(As,{path:"word-matching-test/:testId",element:c.jsx($de,{})}),c.jsx(As,{path:"speaking-test/:testId",element:c.jsx(Hde,{})}),c.jsx(As,{path:"/results",element:c.jsx(WV,{})})]}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:d.map(ee=>c.jsx(tc,{type:ee.type,message:ee.message,onClose:()=>f(B=>B.filter(z=>z.id!==ee.id))},ee.id))})]}):c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Gr,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Setting up Student Application..."})]})})},qde=()=>c.jsx(OW,{children:c.jsx(jV,{children:c.jsx(NV,{children:c.jsx(Vde,{})})})}),Kde=({result:e,isOpen:t,onClose:r,initialTab:n="overview",editingSpeakingScore:s,tempSpeakingScore:a,isSavingSpeakingScore:i,onStartSpeakingScoreEdit:o,onSaveSpeakingScore:l,onCancelSpeakingScoreEdit:u,onTempSpeakingScoreChange:d})=>{const[f,g]=C.useState(n),p=C.useRef(!1);if(C.useEffect(()=>()=>{p.current=!0},[]),C.useEffect(()=>{t&&g(n)},[t,n]),!t||!e)return null;const x={test_id:e.test_id,test_name:e.test_name,subject_id:e.subject_id};let y=e?.__audioUrl||void 0;const v=y?void 0:e?.answers;typeof v=="string"?y=v:v&&typeof v=="object"&&(y=v.audio_url),C.useEffect(()=>{console.log("[SpeakingReview] Transcript sources",{fromResult:e?.transcript,fromAnswersObject:typeof v=="object"&&v?.transcript?v.transcript:void 0,hasAnswers:!!v,test_id:e?.test_id,student_id:e?.student_id})},[e?.test_id,e?.student_id]);const[T,_]=C.useState("");C.useEffect(()=>{const E=new AbortController;let k=!1;const A=e?.__studentId||e?.student_id;return!e?.transcript&&!(typeof v=="object"&&v?.transcript)&&e?.test_id&&A&&(async()=>{try{const P=`/.netlify/functions/get-speaking-test-new?action=transcript&test_id=${encodeURIComponent(e.test_id)}&student_id=${encodeURIComponent(A)}`;console.log("[SpeakingReview] Fetching transcript from API:",{url:P});const j=localStorage.getItem("auth_token")||localStorage.getItem("accessToken")||localStorage.getItem("token"),O=await fetch(P,{headers:{Authorization:j?`Bearer ${j}`:""},signal:E.signal});console.log("[SpeakingReview] Transcript API response:",{ok:O.ok,status:O.status});const R=await O.json().catch(()=>({}));console.log("[SpeakingReview] Transcript API body:",R),!k&&!p.current&&(O.ok?_(R.transcript||""):console.warn("[SpeakingReview] Transcript API failed:",R?.error||"unknown error"))}catch(P){P.name!=="AbortError"&&!p.current&&console.error("[SpeakingReview] Transcript fetch error:",P)}})(),()=>{k=!0;try{E.abort()}catch{}}},[e]);const b={score:e.score,max_score:e.max_score,percentage:e.percentage,audio_url:y,transcript:e.transcript||T||(typeof v=="object"&&v?.transcript?v.transcript:void 0),time_taken:e.time_taken,started_at:e.started_at,submitted_at:e.submitted_at};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[c.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 flex justify-between items-center",children:[c.jsxs("h2",{className:"text-xl font-semibold",children:["Speaking Test Review - ",x.test_name]}),c.jsx("button",{onClick:r,className:"text-white hover:text-gray-200 text-2xl font-bold",children:""})]}),c.jsx("div",{className:"border-b border-gray-200",children:c.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"audio",label:"Audio"},{id:"transcript",label:"Transcript"},{id:"analysis",label:"AI Analysis"},{id:"scoring",label:"Scoring"}].map(E=>c.jsx("button",{onClick:()=>g(E.id),className:`py-4 px-1 border-b-2 font-medium text-sm ${f===E.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:E.label},E.id))})}),c.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[f==="overview"&&c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Test Name"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:x.test_name})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Score"}),c.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[b.score," / ",b.max_score]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Time Taken"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:b.time_taken?`${Math.floor(b.time_taken/60)}:${(b.time_taken%60).toString().padStart(2,"0")}`:"N/A"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Submitted At"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:b.submitted_at?new Date(b.submitted_at).toLocaleString():"N/A"})]})]})}),f==="audio"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Audio Recording"}),b.audio_url?c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Click the play button to listen to the student's recording:"}),c.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:c.jsx(zV,{audioUrl:b.audio_url,className:"w-full"})})]}):c.jsx("div",{className:"text-center py-8 text-gray-500",children:c.jsx("p",{children:"No audio recording available"})})]}),f==="transcript"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transcript"}),b.transcript?c.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:c.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:b.transcript})}):c.jsx("div",{className:"text-center py-8 text-gray-500",children:c.jsx("p",{children:"No transcript available"})})]}),f==="analysis"&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI Analysis Results"}),(()=>{let E=e.ai_feedback;if(E&&typeof E=="string")try{E=JSON.parse(E)}catch{E=null}return E?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"Overall Performance"}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-gray-800",children:E.overall_score||0}),c.jsx("div",{className:"text-sm text-gray-600",children:"Overall Score (0-100)"})]})]}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"Category Breakdown"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[E.grammar_score||0,"/25"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Grammar"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-green-600",children:[E.vocabulary_score||0,"/20"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Vocabulary"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[E.pronunciation_score||0,"/15"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Pronunciation"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-orange-600",children:[E.fluency_score||0,"/20"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Fluency"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-red-600",children:[E.content_score||0,"/20"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Content"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Performance Metrics"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Word Count:"}),c.jsx("span",{className:"text-sm font-medium",children:E.word_count||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Grammar Mistakes:"}),c.jsx("span",{className:"text-sm font-medium text-red-600",children:E.grammar_mistakes||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Vocabulary Issues:"}),c.jsx("span",{className:"text-sm font-medium text-red-600",children:E.vocabulary_mistakes||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Difficulty Level:"}),c.jsx("span",{className:"text-sm font-medium",children:E.difficulty_level||"N/A"})]})]})]}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"AI Feedback"}),E.feedback?c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:c.jsx("p",{className:"text-sm text-gray-700",children:E.feedback})}):c.jsx("div",{className:"text-center py-4 text-gray-500",children:c.jsx("p",{className:"text-sm",children:"No AI feedback available"})})]})]}),E.improved_transcript&&c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Improved Transcript"}),c.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:c.jsx("p",{className:"text-sm text-gray-700",children:E.improved_transcript})})]}),E.grammar_corrections&&E.grammar_corrections.length>0&&c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Grammar Corrections"}),c.jsx("div",{className:"space-y-3",children:E.grammar_corrections.map((k,A)=>c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-red-800",children:"Mistake:"})," ",k.mistake]}),c.jsxs("div",{className:"text-sm mt-1",children:[c.jsx("span",{className:"font-medium text-green-800",children:"Correction:"})," ",k.correction]}),k.explanation&&c.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[c.jsx("span",{className:"font-medium",children:"Explanation:"})," ",k.explanation]})]},A))})]}),E.vocabulary_corrections&&E.vocabulary_corrections.length>0&&c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Vocabulary Improvements"}),c.jsx("div",{className:"space-y-3",children:E.vocabulary_corrections.map((k,A)=>c.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-yellow-800",children:"Original:"})," ",k.mistake]}),c.jsxs("div",{className:"text-sm mt-1",children:[c.jsx("span",{className:"font-medium text-green-800",children:"Better:"})," ",k.correction]}),k.explanation&&c.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[c.jsx("span",{className:"font-medium",children:"Explanation:"})," ",k.explanation]})]},A))})]}),E.language_use_corrections&&E.language_use_corrections.length>0&&c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Language Use Suggestions"}),c.jsx("div",{className:"space-y-3",children:E.language_use_corrections.map((k,A)=>c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-blue-800",children:"Original:"})," ",k.mistake]}),c.jsxs("div",{className:"text-sm mt-1",children:[c.jsx("span",{className:"font-medium text-blue-800",children:"Suggestion:"})," ",k.suggestion]}),k.explanation&&c.jsx("div",{className:"text-xs text-blue-700 mt-1",children:k.explanation})]},A))})]})]}):c.jsx("div",{className:"text-center py-8 text-gray-500",children:c.jsx("p",{children:"No AI analysis available for this result"})})})()]}),f==="scoring"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center",children:"Score Details"}),s?c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 place-items-center",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Score"}),c.jsx("input",{type:"number",min:"0",max:b.max_score,value:a,onChange:E=>d(E.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Max Score"}),c.jsxs("p",{className:"mt-1 text-sm text-gray-900 text-center",children:[b.max_score," (Fixed)"]})]})]}),c.jsxs("div",{className:"flex justify-center space-x-3",children:[c.jsx("button",{onClick:l,disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:i?"Saving...":"Save Score"}),c.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"})]})]}):c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsx("div",{className:"grid grid-cols-1 place-items-center gap-2",children:c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Current Score"}),c.jsxs("p",{className:"mt-1 text-sm text-gray-900 text-center",children:[b.score," / ",b.max_score]})]})}),c.jsx("button",{onClick:()=>o(e.id,b.score),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 mx-auto",children:"Edit Score"})]})]})]}),c.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:c.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"})})]})})};class yI extends Be.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){if(console.error("ErrorBoundary caught an error:",t,r),t.message&&t.message.includes("Minified React error #300")){console.warn("React error #300 caught and handled by ErrorBoundary");return}}render(){return this.state.hasError?c.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:[c.jsx("h3",{className:"text-red-800 font-medium",children:"Something went wrong"}),c.jsx("p",{className:"text-red-600 text-sm mt-1",children:"An error occurred while rendering this component."})]}):this.props.children}}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var w_={};w_.version="0.18.5";var HV=1252,Xde=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],n6={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},s6=function(e){Xde.indexOf(e)!=-1&&(HV=n6[0]=e)};function Yde(){s6(1252)}var Xl=function(e){s6(e)};function a6(){Xl(1200),Yde()}function xI(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function Jde(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function GV(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var _x=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Jde(e.slice(2)):t==254&&r==255?GV(e.slice(2)):t==65279?e.slice(1):e},db=function(t){return String.fromCharCode(t)},vI=function(t){return String.fromCharCode(t)},pv,of="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function mv(e){for(var t="",r=0,n=0,s=0,a=0,i=0,o=0,l=0,u=0;u<e.length;)r=e.charCodeAt(u++),a=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,s=e.charCodeAt(u++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),t+=of.charAt(a)+of.charAt(i)+of.charAt(o)+of.charAt(l);return t}function Mo(e){var t="",r=0,n=0,s=0,a=0,i=0,o=0,l=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)a=of.indexOf(e.charAt(u++)),i=of.indexOf(e.charAt(u++)),r=a<<2|i>>4,t+=String.fromCharCode(r),o=of.indexOf(e.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),l=of.indexOf(e.charAt(u++)),s=(o&3)<<6|l,l!==64&&(t+=String.fromCharCode(s));return t}var Qr=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),sd=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function _f(e){return Qr?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function wI(e){return Qr?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Fo=function(t){return Qr?sd(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function sS(e){if(typeof ArrayBuffer>"u")return Fo(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Ff(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Qde(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function i6(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return i6(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Ia=Qr?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:sd(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function Zde(e){for(var t=[],r=0,n=e.length+250,s=_f(e.length+255),a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i<128)s[r++]=i;else if(i<2048)s[r++]=192|i>>6&31,s[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++a)&1023;s[r++]=240|i>>8&7,s[r++]=128|i>>2&63,s[r++]=128|o>>6&15|(i&3)<<4,s[r++]=128|o&63}else s[r++]=224|i>>12&15,s[r++]=128|i>>6&63,s[r++]=128|i&63;r>n&&(t.push(s.slice(0,r)),r=0,s=_f(65535),n=65530)}return t.push(s.slice(0,r)),Ia(t)}var Yi=/\u0000/g,Sx=/[\u0001-\u0006]/g;function op(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Yl(e,t){var r=""+e;return r.length>=t?r:js("0",t-r.length)+r}function o6(e,t){var r=""+e;return r.length>=t?r:js(" ",t-r.length)+r}function b_(e,t){var r=""+e;return r.length>=t?r:r+js(" ",t-r.length)}function efe(e,t){var r=""+Math.round(e);return r.length>=t?r:js("0",t-r.length)+r}function tfe(e,t){var r=""+e;return r.length>=t?r:js("0",t-r.length)+r}var bI=Math.pow(2,32);function Eg(e,t){if(e>bI||e<-bI)return efe(e,t);var r=Math.round(e);return tfe(r,t)}function __(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var _I=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],_T=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function rfe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Ar={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},SI={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},nfe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function S_(e,t,r){for(var n=e<0?-1:1,s=e*n,a=0,i=1,o=0,l=1,u=0,d=0,f=Math.floor(s);u<t&&(f=Math.floor(s),o=f*i+a,d=f*u+l,!(s-f<5e-8));)s=1/(s-f),a=i,i=o,l=u,u=d;if(d>t&&(u>t?(d=l,o=a):(d=u,o=i)),!r)return[0,n*o,d];var g=Math.floor(n*o/d);return[g,n*o-g*d,d]}function Ah(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),a=0,i=[],o={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),n<60&&(a=(a+6)%7),r&&(a=cfe(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var VV=new Date(1899,11,31,0,0,0),sfe=VV.getTime(),afe=new Date(1900,2,1,0,0,0);function qV(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=afe&&(r+=1440*60*1e3),(r-(sfe+(e.getTimezoneOffset()-VV.getTimezoneOffset())*6e4))/(1440*60*1e3)}function l6(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function ife(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function ofe(e){var t=e<0?12:11,r=l6(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function lfe(e){var t=l6(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function yv(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=ofe(e):t===10?r=e.toFixed(10).substr(0,12):r=lfe(e),l6(ife(r.toUpperCase()))}function i0(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):yv(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return wl(14,qV(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function cfe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function ufe(e,t,r,n){var s="",a=0,i=0,o=r.y,l,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:l=r.m,u=t.length;break;case 3:return _T[r.m-1][1];case 5:return _T[r.m-1][0];default:return _T[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=r.d,u=t.length;break;case 3:return _I[r.q][0];default:return _I[r.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Yl(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,a=Math.round(i*(r.S+r.u)),a>=60*i&&(a=0),t==="s"?a===0?"0":""+a/i:(s=Yl(a,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:l=o,u=1;break}var d=u>0?Yl(l,u):"";return d}function lf(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var KV=/%/g;function dfe(e,t,r){var n=t.replace(KV,""),s=t.length-n.length;return Uu(e,n,r*Math.pow(10,2*s))+js("%",s)}function ffe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Uu(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function XV(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+XV(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var YV=/# (\?+)( ?)\/( ?)(\d+)/;function hfe(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),a=Math.floor(s/n),i=s-a*n,o=n;return r+(a===0?"":""+a)+" "+(i===0?js(" ",e[1].length+1+e[4].length):o6(i,e[1].length)+e[2]+"/"+e[3]+Yl(o,e[4].length))}function gfe(e,t,r){return r+(t===0?"":""+t)+js(" ",e[1].length+2+e[4].length)}var JV=/^#*0*\.([0#]+)/,QV=/\).*[0#]/,ZV=/\(###\) ###\\?-####/;function zi(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function kI(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function TI(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function pfe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function mfe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function al(e,t,r){if(e.charCodeAt(0)===40&&!t.match(QV)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?al("n",n,r):"("+al("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return ffe(e,t,r);if(t.indexOf("%")!==-1)return dfe(e,t,r);if(t.indexOf("E")!==-1)return XV(t,r);if(t.charCodeAt(0)===36)return"$"+al(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,i,o,l=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Eg(l,t.length);if(t.match(/^[#?]+$/))return s=Eg(r,0),s==="0"&&(s=""),s.length>t.length?s:zi(t.substr(0,t.length-s.length))+s;if(a=t.match(YV))return hfe(a,l,u);if(t.match(/^#+0+$/))return u+Eg(l,t.length-t.indexOf("0"));if(a=t.match(JV))return s=kI(r,a[1].length).replace(/^([^\.]+)$/,"$1."+zi(a[1])).replace(/\.$/,"."+zi(a[1])).replace(/\.(\d*)$/,function(x,y){return"."+y+js("0",zi(a[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return u+kI(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return u+lf(Eg(l,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+al(e,t,-r):lf(""+(Math.floor(r)+pfe(r,a[1].length)))+"."+Yl(TI(r,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return al(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=op(al(e,t.replace(/[\\-]/g,""),r)),i=0,op(op(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<s.length?s.charAt(i++):x==="0"?"0":""}));if(t.match(ZV))return s=al(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=S_(l,Math.pow(10,i)-1,!1),s=""+u,d=Uu("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=b_(o[2],i),d.length<a[4].length&&(d=zi(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=S_(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?o6(o[1],i)+a[2]+"/"+a[3]+b_(o[2],i):js(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=Eg(r,0),t.length<=s.length?s:zi(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var f=t.indexOf(".")-i,g=t.length-s.length-f;return zi(t.substr(0,f)+s+t.substr(t.length-g))}if(a=t.match(/^00,000\.([#0]*0)$/))return i=TI(r,a[1].length),r<0?"-"+al(e,t,-r):lf(mfe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Yl(0,3-x.length):"")+x})+"."+Yl(i,a[1].length);switch(t){case"###,##0.00":return al(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=lf(Eg(l,0));return p!=="0"?u+p:"";case"###,###.00":return al(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return al(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function yfe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Uu(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function xfe(e,t,r){var n=t.replace(KV,""),s=t.length-n.length;return Uu(e,n,r*Math.pow(10,2*s))+js("%",s)}function eq(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+eq(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Pc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(QV)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Pc("n",n,r):"("+Pc("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return yfe(e,t,r);if(t.indexOf("%")!==-1)return xfe(e,t,r);if(t.indexOf("E")!==-1)return eq(t,r);if(t.charCodeAt(0)===36)return"$"+Pc(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,i,o,l=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Yl(l,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:zi(t.substr(0,t.length-s.length))+s;if(a=t.match(YV))return gfe(a,l,u);if(t.match(/^#+0+$/))return u+Yl(l,t.length-t.indexOf("0"));if(a=t.match(JV))return s=(""+r).replace(/^([^\.]+)$/,"$1."+zi(a[1])).replace(/\.$/,"."+zi(a[1])),s=s.replace(/\.(\d*)$/,function(x,y){return"."+y+js("0",zi(a[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return u+lf(""+l);if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Pc(e,t,-r):lf(""+r)+"."+js("0",a[1].length);if(a=t.match(/^#,#*,#0/))return Pc(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=op(Pc(e,t.replace(/[\\-]/g,""),r)),i=0,op(op(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<s.length?s.charAt(i++):x==="0"?"0":""}));if(t.match(ZV))return s=Pc(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=S_(l,Math.pow(10,i)-1,!1),s=""+u,d=Uu("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=b_(o[2],i),d.length<a[4].length&&(d=zi(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=S_(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?o6(o[1],i)+a[2]+"/"+a[3]+b_(o[2],i):js(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:zi(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var f=t.indexOf(".")-i,g=t.length-s.length-f;return zi(t.substr(0,f)+s+t.substr(t.length-g))}if(a=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Pc(e,t,-r):lf(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Yl(0,3-x.length):"")+x})+"."+Yl(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=lf(""+l);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return Pc(e,t.slice(0,t.lastIndexOf(".")),r)+zi(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Uu(e,t,r){return(r|0)===r?Pc(e,t,r):al(e,t,r)}function vfe(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var tq=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function fm(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":__(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(tq))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function wfe(e,t,r,n){for(var s=[],a="",i=0,o="",l="t",u,d,f,g="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!__(e,i))throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(f=e.charCodeAt(++i))!==34&&i<e.length;)a+=String.fromCharCode(f);s[s.length]={t:"t",v:a},++i;break;case"\\":var p=e.charAt(++i),x=p==="("||p===")"?p:"t";s[s.length]={t:x,v:p},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=Ah(t,r,e.charAt(i+1)==="2"),u==null))return"";s[s.length]={t:"X",v:e.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Ah(t,r),u==null))return"";for(a=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=g),s[s.length]={t:o,v:a},l=o;break;case"A":case"a":case"":var y={t:o,v:o};if(u==null&&(u=Ah(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",g="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",i+=5,g="h"):e.substr(i,5).toUpperCase()==="/"?(u!=null&&(y.v=u.H>=12?"":""),y.t="T",i+=5,g="h"):(y.t="t",++i),u==null&&y.t==="T")return"";s[s.length]=y,l=o;break;case"[":for(a=o;e.charAt(i++)!=="]"&&i<e.length;)a+=e.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(tq)){if(u==null&&(u=Ah(t,r),u==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",fm(e)||(s[s.length]={t:"t",v:a}));break;case".":if(u!=null){for(a=o;++i<e.length&&(o=e.charAt(i))==="0";)a+=o;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)a+=o;s[s.length]={t:"n",v:a};break;case"?":for(a=o;e.charAt(++i)===o;)a+=o;s[s.length]={t:o,v:a},l=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)a+=e.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:o,v:o},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"t",v:o},++i;break}var v=0,T=0,_;for(i=s.length-1,l="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=g,l="h",v<1&&(v=1);break;case"s":(_=s[i].v.match(/\.0+$/))&&(T=Math.max(T,_[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":l=s[i].t;break;case"m":l==="s"&&(s[i].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[i].v.match(/[Hh]/)&&(v=1),v<2&&s[i].v.match(/[Mm]/)&&(v=2),v<3&&s[i].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",E;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=ufe(s[i].t.charCodeAt(0),s[i].v,u,T),s[i].t="t";break;case"n":case"?":for(E=i+1;s[E]!=null&&((o=s[E].t)==="?"||o==="D"||(o===" "||o==="t")&&s[E+1]!=null&&(s[E+1].t==="?"||s[E+1].t==="t"&&s[E+1].v==="/")||s[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[E].v==="/"||s[E].v===" "&&s[E+1]!=null&&s[E+1].t=="?"));)s[i].v+=s[E].v,s[E]={v:"",t:";"},++E;b+=s[i].v,i=E-1;break;case"G":s[i].t="t",s[i].v=i0(t,r);break}var k="",A,P;if(b.length>0){b.charCodeAt(0)==40?(A=t<0&&b.charCodeAt(0)===45?-t:t,P=Uu("n",b,A)):(A=t<0&&n>1?-t:t,P=Uu("n",b,A),A<0&&s[0]&&s[0].t=="t"&&(P=P.substr(1),s[0].v="-"+s[0].v)),E=P.length-1;var j=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){j=i;break}var O=s.length;if(j===s.length&&P.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(E>=s[i].v.length-1?(E-=s[i].v.length,s[i].v=P.substr(E+1,s[i].v.length)):E<0?s[i].v="":(s[i].v=P.substr(0,E+1),E=-1),s[i].t="t",O=i);E>=0&&O<s.length&&(s[O].v=P.substr(0,E+1)+s[O].v)}else if(j!==s.length&&P.indexOf("E")===-1){for(E=P.indexOf(".")-1,i=j;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(d=s[i].v.indexOf(".")>-1&&i===j?s[i].v.indexOf(".")-1:s[i].v.length-1,k=s[i].v.substr(d+1);d>=0;--d)E>=0&&(s[i].v.charAt(d)==="0"||s[i].v.charAt(d)==="#")&&(k=P.charAt(E--)+k);s[i].v=k,s[i].t="t",O=i}for(E>=0&&O<s.length&&(s[O].v=P.substr(0,E+1)+s[O].v),E=P.indexOf(".")+1,i=j;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==j)){for(d=s[i].v.indexOf(".")>-1&&i===j?s[i].v.indexOf(".")+1:0,k=s[i].v.substr(0,d);d<s[i].v.length;++d)E<P.length&&(k+=P.charAt(E++));s[i].v=k,s[i].t="t",O=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(A=n>1&&t<0&&i>0&&s[i-1].v==="-"?-t:t,s[i].v=Uu(s[i].t,s[i].v,A),s[i].t="t");var R="";for(i=0;i!==s.length;++i)s[i]!=null&&(R+=s[i].v);return R}var CI=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function EI(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function bfe(e,t){var r=vfe(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(CI),o=r[1].match(CI);return EI(t,i)?[n,r[0]]:EI(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,a]}function wl(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Ar)[e],n==null&&(n=r.table&&r.table[SI[e]]||Ar[SI[e]]),n==null&&(n=nfe[e]||"General");break}if(__(n,0))return i0(t,r);t instanceof Date&&(t=qV(t,r.date1904));var s=bfe(n,t);if(__(s[1]))return i0(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return wfe(s[1],t,r,s[0])}function Wu(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Ar[r]==null){t<0&&(t=r);continue}if(Ar[r]==e){t=r;break}}t<0&&(t=391)}return Ar[t]=e,t}function aS(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Wu(e[t],t)}function hm(){Ar=rfe()}var _fe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},rq=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Sfe(e){var t=typeof e=="number"?Ar[e]:e;return t=t.replace(rq,"(\\d+)"),new RegExp("^"+t+"$")}function kfe(e,t,r){var n=-1,s=-1,a=-1,i=-1,o=-1,l=-1;(t.match(rq)||[]).forEach(function(f,g){var p=parseInt(r[g+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=p;break;case"d":a=p;break;case"h":i=p;break;case"s":l=p;break;case"m":i>=0?o=p:s=p;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?u:n==-1&&s==-1&&a==-1?d:u+"T"+d}var Tfe=(function(){var e={};e.version="1.2.0";function t(){for(var P=0,j=new Array(256),O=0;O!=256;++O)P=O,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,j[O]=P;return typeof Int32Array<"u"?new Int32Array(j):j}var r=t();function n(P){var j=0,O=0,R=0,M=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(R=0;R!=256;++R)M[R]=P[R];for(R=0;R!=256;++R)for(O=P[R],j=256+R;j<4096;j+=256)O=M[j]=O>>>8^P[O&255];var G=[];for(R=1;R!=16;++R)G[R-1]=typeof Int32Array<"u"?M.subarray(R*256,R*256+256):M.slice(R*256,R*256+256);return G}var s=n(r),a=s[0],i=s[1],o=s[2],l=s[3],u=s[4],d=s[5],f=s[6],g=s[7],p=s[8],x=s[9],y=s[10],v=s[11],T=s[12],_=s[13],b=s[14];function E(P,j){for(var O=j^-1,R=0,M=P.length;R<M;)O=O>>>8^r[(O^P.charCodeAt(R++))&255];return~O}function k(P,j){for(var O=j^-1,R=P.length-15,M=0;M<R;)O=b[P[M++]^O&255]^_[P[M++]^O>>8&255]^T[P[M++]^O>>16&255]^v[P[M++]^O>>>24]^y[P[M++]]^x[P[M++]]^p[P[M++]]^g[P[M++]]^f[P[M++]]^d[P[M++]]^u[P[M++]]^l[P[M++]]^o[P[M++]]^i[P[M++]]^a[P[M++]]^r[P[M++]];for(R+=15;M<R;)O=O>>>8^r[(O^P[M++])&255];return~O}function A(P,j){for(var O=j^-1,R=0,M=P.length,G=0,K=0;R<M;)G=P.charCodeAt(R++),G<128?O=O>>>8^r[(O^G)&255]:G<2048?(O=O>>>8^r[(O^(192|G>>6&31))&255],O=O>>>8^r[(O^(128|G&63))&255]):G>=55296&&G<57344?(G=(G&1023)+64,K=P.charCodeAt(R++)&1023,O=O>>>8^r[(O^(240|G>>8&7))&255],O=O>>>8^r[(O^(128|G>>2&63))&255],O=O>>>8^r[(O^(128|K>>6&15|(G&3)<<4))&255],O=O>>>8^r[(O^(128|K&63))&255]):(O=O>>>8^r[(O^(224|G>>12&15))&255],O=O>>>8^r[(O^(128|G>>6&63))&255],O=O>>>8^r[(O^(128|G&63))&255]);return~O}return e.table=r,e.bstr=E,e.buf=k,e.str=A,e})(),wr=(function(){var t={};t.version="1.2.1";function r(le,_e){for(var pe=le.split("/"),ve=_e.split("/"),Se=0,ke=0,Ge=Math.min(pe.length,ve.length);Se<Ge;++Se){if(ke=pe[Se].length-ve[Se].length)return ke;if(pe[Se]!=ve[Se])return pe[Se]<ve[Se]?-1:1}return pe.length-ve.length}function n(le){if(le.charAt(le.length-1)=="/")return le.slice(0,-1).indexOf("/")===-1?le:n(le.slice(0,-1));var _e=le.lastIndexOf("/");return _e===-1?le:le.slice(0,_e+1)}function s(le){if(le.charAt(le.length-1)=="/")return s(le.slice(0,-1));var _e=le.lastIndexOf("/");return _e===-1?le:le.slice(_e+1)}function a(le,_e){typeof _e=="string"&&(_e=new Date(_e));var pe=_e.getHours();pe=pe<<6|_e.getMinutes(),pe=pe<<5|_e.getSeconds()>>>1,le.write_shift(2,pe);var ve=_e.getFullYear()-1980;ve=ve<<4|_e.getMonth()+1,ve=ve<<5|_e.getDate(),le.write_shift(2,ve)}function i(le){var _e=le.read_shift(2)&65535,pe=le.read_shift(2)&65535,ve=new Date,Se=pe&31;pe>>>=5;var ke=pe&15;pe>>>=4,ve.setMilliseconds(0),ve.setFullYear(pe+1980),ve.setMonth(ke-1),ve.setDate(Se);var Ge=_e&31;_e>>>=5;var dt=_e&63;return _e>>>=6,ve.setHours(_e),ve.setMinutes(dt),ve.setSeconds(Ge<<1),ve}function o(le){ri(le,0);for(var _e={},pe=0;le.l<=le.length-4;){var ve=le.read_shift(2),Se=le.read_shift(2),ke=le.l+Se,Ge={};switch(ve){case 21589:pe=le.read_shift(1),pe&1&&(Ge.mtime=le.read_shift(4)),Se>5&&(pe&2&&(Ge.atime=le.read_shift(4)),pe&4&&(Ge.ctime=le.read_shift(4))),Ge.mtime&&(Ge.mt=new Date(Ge.mtime*1e3));break}le.l=ke,_e[ve]=Ge}return _e}var l;function u(){return l||(l={})}function d(le,_e){if(le[0]==80&&le[1]==75)return ge(le,_e);if((le[0]|32)==109&&(le[1]|32)==105)return ot(le,_e);if(le.length<512)throw new Error("CFB file size "+le.length+" < 512");var pe=3,ve=512,Se=0,ke=0,Ge=0,dt=0,Ie=0,oe=[],fe=le.slice(0,512);ri(fe,0);var Ce=f(fe);switch(pe=Ce[0],pe){case 3:ve=512;break;case 4:ve=4096;break;case 0:if(Ce[1]==0)return ge(le,_e);default:throw new Error("Major Version: Expected 3 or 4 saw "+pe)}ve!==512&&(fe=le.slice(0,ve),ri(fe,28));var je=le.slice(0,ve);g(fe,pe);var qe=fe.read_shift(4,"i");if(pe===3&&qe!==0)throw new Error("# Directory Sectors: Expected 0 saw "+qe);fe.l+=4,Ge=fe.read_shift(4,"i"),fe.l+=4,fe.chk("00100000","Mini Stream Cutoff Size: "),dt=fe.read_shift(4,"i"),Se=fe.read_shift(4,"i"),Ie=fe.read_shift(4,"i"),ke=fe.read_shift(4,"i");for(var Ze=-1,mt=0;mt<109&&(Ze=fe.read_shift(4,"i"),!(Ze<0));++mt)oe[mt]=Ze;var qt=p(le,ve);v(Ie,ke,qt,ve,oe);var pt=_(qt,Ge,oe,ve);pt[Ge].name="!Directory",Se>0&&dt!==K&&(pt[dt].name="!MiniFAT"),pt[oe[0]].name="!FAT",pt.fat_addrs=oe,pt.ssz=ve;var Bt={},Cr=[],$r=[],Ur=[];b(Ge,pt,qt,Cr,Se,Bt,$r,dt),x($r,Ur,Cr),Cr.shift();var wn={FileIndex:$r,FullPaths:Ur};return _e&&_e.raw&&(wn.raw={header:je,sectors:qt}),wn}function f(le){if(le[le.l]==80&&le[le.l+1]==75)return[0,0];le.chk(re,"Header Signature: "),le.l+=16;var _e=le.read_shift(2,"u");return[le.read_shift(2,"u"),_e]}function g(le,_e){var pe=9;switch(le.l+=2,pe=le.read_shift(2)){case 9:if(_e!=3)throw new Error("Sector Shift: Expected 9 saw "+pe);break;case 12:if(_e!=4)throw new Error("Sector Shift: Expected 12 saw "+pe);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+pe)}le.chk("0600","Mini Sector Shift: "),le.chk("000000000000","Reserved: ")}function p(le,_e){for(var pe=Math.ceil(le.length/_e)-1,ve=[],Se=1;Se<pe;++Se)ve[Se-1]=le.slice(Se*_e,(Se+1)*_e);return ve[pe-1]=le.slice(pe*_e),ve}function x(le,_e,pe){for(var ve=0,Se=0,ke=0,Ge=0,dt=0,Ie=pe.length,oe=[],fe=[];ve<Ie;++ve)oe[ve]=fe[ve]=ve,_e[ve]=pe[ve];for(;dt<fe.length;++dt)ve=fe[dt],Se=le[ve].L,ke=le[ve].R,Ge=le[ve].C,oe[ve]===ve&&(Se!==-1&&oe[Se]!==Se&&(oe[ve]=oe[Se]),ke!==-1&&oe[ke]!==ke&&(oe[ve]=oe[ke])),Ge!==-1&&(oe[Ge]=ve),Se!==-1&&ve!=oe[ve]&&(oe[Se]=oe[ve],fe.lastIndexOf(Se)<dt&&fe.push(Se)),ke!==-1&&ve!=oe[ve]&&(oe[ke]=oe[ve],fe.lastIndexOf(ke)<dt&&fe.push(ke));for(ve=1;ve<Ie;++ve)oe[ve]===ve&&(ke!==-1&&oe[ke]!==ke?oe[ve]=oe[ke]:Se!==-1&&oe[Se]!==Se&&(oe[ve]=oe[Se]));for(ve=1;ve<Ie;++ve)if(le[ve].type!==0){if(dt=ve,dt!=oe[dt])do dt=oe[dt],_e[ve]=_e[dt]+"/"+_e[ve];while(dt!==0&&oe[dt]!==-1&&dt!=oe[dt]);oe[ve]=-1}for(_e[0]+="/",ve=1;ve<Ie;++ve)le[ve].type!==2&&(_e[ve]+="/")}function y(le,_e,pe){for(var ve=le.start,Se=le.size,ke=[],Ge=ve;pe&&Se>0&&Ge>=0;)ke.push(_e.slice(Ge*G,Ge*G+G)),Se-=G,Ge=Th(pe,Ge*4);return ke.length===0?bt(0):Ia(ke).slice(0,le.size)}function v(le,_e,pe,ve,Se){var ke=K;if(le===K){if(_e!==0)throw new Error("DIFAT chain shorter than expected")}else if(le!==-1){var Ge=pe[le],dt=(ve>>>2)-1;if(!Ge)return;for(var Ie=0;Ie<dt&&(ke=Th(Ge,Ie*4))!==K;++Ie)Se.push(ke);v(Th(Ge,ve-4),_e-1,pe,ve,Se)}}function T(le,_e,pe,ve,Se){var ke=[],Ge=[];Se||(Se=[]);var dt=ve-1,Ie=0,oe=0;for(Ie=_e;Ie>=0;){Se[Ie]=!0,ke[ke.length]=Ie,Ge.push(le[Ie]);var fe=pe[Math.floor(Ie*4/ve)];if(oe=Ie*4&dt,ve<4+oe)throw new Error("FAT boundary crossed: "+Ie+" 4 "+ve);if(!le[fe])break;Ie=Th(le[fe],oe)}return{nodes:ke,data:BI([Ge])}}function _(le,_e,pe,ve){var Se=le.length,ke=[],Ge=[],dt=[],Ie=[],oe=ve-1,fe=0,Ce=0,je=0,qe=0;for(fe=0;fe<Se;++fe)if(dt=[],je=fe+_e,je>=Se&&(je-=Se),!Ge[je]){Ie=[];var Ze=[];for(Ce=je;Ce>=0;){Ze[Ce]=!0,Ge[Ce]=!0,dt[dt.length]=Ce,Ie.push(le[Ce]);var mt=pe[Math.floor(Ce*4/ve)];if(qe=Ce*4&oe,ve<4+qe)throw new Error("FAT boundary crossed: "+Ce+" 4 "+ve);if(!le[mt]||(Ce=Th(le[mt],qe),Ze[Ce]))break}ke[je]={nodes:dt,data:BI([Ie])}}return ke}function b(le,_e,pe,ve,Se,ke,Ge,dt){for(var Ie=0,oe=ve.length?2:0,fe=_e[le].data,Ce=0,je=0,qe;Ce<fe.length;Ce+=128){var Ze=fe.slice(Ce,Ce+128);ri(Ze,64),je=Ze.read_shift(2),qe=p6(Ze,0,je-oe),ve.push(qe);var mt={name:qe,type:Ze.read_shift(1),color:Ze.read_shift(1),L:Ze.read_shift(4,"i"),R:Ze.read_shift(4,"i"),C:Ze.read_shift(4,"i"),clsid:Ze.read_shift(16),state:Ze.read_shift(4,"i"),start:0,size:0},qt=Ze.read_shift(2)+Ze.read_shift(2)+Ze.read_shift(2)+Ze.read_shift(2);qt!==0&&(mt.ct=E(Ze,Ze.l-8));var pt=Ze.read_shift(2)+Ze.read_shift(2)+Ze.read_shift(2)+Ze.read_shift(2);pt!==0&&(mt.mt=E(Ze,Ze.l-8)),mt.start=Ze.read_shift(4,"i"),mt.size=Ze.read_shift(4,"i"),mt.size<0&&mt.start<0&&(mt.size=mt.type=0,mt.start=K,mt.name=""),mt.type===5?(Ie=mt.start,Se>0&&Ie!==K&&(_e[Ie].name="!StreamData")):mt.size>=4096?(mt.storage="fat",_e[mt.start]===void 0&&(_e[mt.start]=T(pe,mt.start,_e.fat_addrs,_e.ssz)),_e[mt.start].name=mt.name,mt.content=_e[mt.start].data.slice(0,mt.size)):(mt.storage="minifat",mt.size<0?mt.size=0:Ie!==K&&mt.start!==K&&_e[Ie]&&(mt.content=y(mt,_e[Ie].data,(_e[dt]||{}).data))),mt.content&&ri(mt.content,0),ke[qe]=mt,Ge.push(mt)}}function E(le,_e){return new Date((Oo(le,_e+4)/1e7*Math.pow(2,32)+Oo(le,_e)/1e7-11644473600)*1e3)}function k(le,_e){return u(),d(l.readFileSync(le),_e)}function A(le,_e){var pe=_e&&_e.type;switch(pe||Qr&&Buffer.isBuffer(le)&&(pe="buffer"),pe||"base64"){case"file":return k(le,_e);case"base64":return d(Fo(Mo(le)),_e);case"binary":return d(Fo(le),_e)}return d(le,_e)}function P(le,_e){var pe=_e||{},ve=pe.root||"Root Entry";if(le.FullPaths||(le.FullPaths=[]),le.FileIndex||(le.FileIndex=[]),le.FullPaths.length!==le.FileIndex.length)throw new Error("inconsistent CFB structure");le.FullPaths.length===0&&(le.FullPaths[0]=ve+"/",le.FileIndex[0]={name:ve,type:5}),pe.CLSID&&(le.FileIndex[0].clsid=pe.CLSID),j(le)}function j(le){var _e="Sh33tJ5";if(!wr.find(le,"/"+_e)){var pe=bt(4);pe[0]=55,pe[1]=pe[3]=50,pe[2]=54,le.FileIndex.push({name:_e,type:2,content:pe,size:4,L:69,R:69,C:69}),le.FullPaths.push(le.FullPaths[0]+_e),O(le)}}function O(le,_e){P(le);for(var pe=!1,ve=!1,Se=le.FullPaths.length-1;Se>=0;--Se){var ke=le.FileIndex[Se];switch(ke.type){case 0:ve?pe=!0:(le.FileIndex.pop(),le.FullPaths.pop());break;case 1:case 2:case 5:ve=!0,isNaN(ke.R*ke.L*ke.C)&&(pe=!0),ke.R>-1&&ke.L>-1&&ke.R==ke.L&&(pe=!0);break;default:pe=!0;break}}if(!(!pe&&!_e)){var Ge=new Date(1987,1,19),dt=0,Ie=Object.create?Object.create(null):{},oe=[];for(Se=0;Se<le.FullPaths.length;++Se)Ie[le.FullPaths[Se]]=!0,le.FileIndex[Se].type!==0&&oe.push([le.FullPaths[Se],le.FileIndex[Se]]);for(Se=0;Se<oe.length;++Se){var fe=n(oe[Se][0]);ve=Ie[fe],ve||(oe.push([fe,{name:s(fe).replace("/",""),type:1,clsid:ee,ct:Ge,mt:Ge,content:null}]),Ie[fe]=!0)}for(oe.sort(function(qe,Ze){return r(qe[0],Ze[0])}),le.FullPaths=[],le.FileIndex=[],Se=0;Se<oe.length;++Se)le.FullPaths[Se]=oe[Se][0],le.FileIndex[Se]=oe[Se][1];for(Se=0;Se<oe.length;++Se){var Ce=le.FileIndex[Se],je=le.FullPaths[Se];if(Ce.name=s(je).replace("/",""),Ce.L=Ce.R=Ce.C=-(Ce.color=1),Ce.size=Ce.content?Ce.content.length:0,Ce.start=0,Ce.clsid=Ce.clsid||ee,Se===0)Ce.C=oe.length>1?1:-1,Ce.size=0,Ce.type=5;else if(je.slice(-1)=="/"){for(dt=Se+1;dt<oe.length&&n(le.FullPaths[dt])!=je;++dt);for(Ce.C=dt>=oe.length?-1:dt,dt=Se+1;dt<oe.length&&n(le.FullPaths[dt])!=n(je);++dt);Ce.R=dt>=oe.length?-1:dt,Ce.type=1}else n(le.FullPaths[Se+1]||"")==n(je)&&(Ce.R=Se+1),Ce.type=2}}}function R(le,_e){var pe=_e||{};if(pe.fileType=="mad")return Ht(le,pe);switch(O(le),pe.fileType){case"zip":return we(le,pe)}var ve=(function(qe){for(var Ze=0,mt=0,qt=0;qt<qe.FileIndex.length;++qt){var pt=qe.FileIndex[qt];if(pt.content){var Bt=pt.content.length;Bt>0&&(Bt<4096?Ze+=Bt+63>>6:mt+=Bt+511>>9)}}for(var Cr=qe.FullPaths.length+3>>2,$r=Ze+7>>3,Ur=Ze+127>>7,wn=$r+mt+Cr+Ur,Xr=wn+127>>7,Wr=Xr<=109?0:Math.ceil((Xr-109)/127);wn+Xr+Wr+127>>7>Xr;)Wr=++Xr<=109?0:Math.ceil((Xr-109)/127);var ar=[1,Wr,Xr,Ur,Cr,mt,Ze,0];return qe.FileIndex[0].size=Ze<<6,ar[7]=(qe.FileIndex[0].start=ar[0]+ar[1]+ar[2]+ar[3]+ar[4]+ar[5])+(ar[6]+7>>3),ar})(le),Se=bt(ve[7]<<9),ke=0,Ge=0;{for(ke=0;ke<8;++ke)Se.write_shift(1,Y[ke]);for(ke=0;ke<8;++ke)Se.write_shift(2,0);for(Se.write_shift(2,62),Se.write_shift(2,3),Se.write_shift(2,65534),Se.write_shift(2,9),Se.write_shift(2,6),ke=0;ke<3;++ke)Se.write_shift(2,0);for(Se.write_shift(4,0),Se.write_shift(4,ve[2]),Se.write_shift(4,ve[0]+ve[1]+ve[2]+ve[3]-1),Se.write_shift(4,0),Se.write_shift(4,4096),Se.write_shift(4,ve[3]?ve[0]+ve[1]+ve[2]-1:K),Se.write_shift(4,ve[3]),Se.write_shift(-4,ve[1]?ve[0]-1:K),Se.write_shift(4,ve[1]),ke=0;ke<109;++ke)Se.write_shift(-4,ke<ve[2]?ve[1]+ke:-1)}if(ve[1])for(Ge=0;Ge<ve[1];++Ge){for(;ke<236+Ge*127;++ke)Se.write_shift(-4,ke<ve[2]?ve[1]+ke:-1);Se.write_shift(-4,Ge===ve[1]-1?K:Ge+1)}var dt=function(qe){for(Ge+=qe;ke<Ge-1;++ke)Se.write_shift(-4,ke+1);qe&&(++ke,Se.write_shift(-4,K))};for(Ge=ke=0,Ge+=ve[1];ke<Ge;++ke)Se.write_shift(-4,B.DIFSECT);for(Ge+=ve[2];ke<Ge;++ke)Se.write_shift(-4,B.FATSECT);dt(ve[3]),dt(ve[4]);for(var Ie=0,oe=0,fe=le.FileIndex[0];Ie<le.FileIndex.length;++Ie)fe=le.FileIndex[Ie],fe.content&&(oe=fe.content.length,!(oe<4096)&&(fe.start=Ge,dt(oe+511>>9)));for(dt(ve[6]+7>>3);Se.l&511;)Se.write_shift(-4,B.ENDOFCHAIN);for(Ge=ke=0,Ie=0;Ie<le.FileIndex.length;++Ie)fe=le.FileIndex[Ie],fe.content&&(oe=fe.content.length,!(!oe||oe>=4096)&&(fe.start=Ge,dt(oe+63>>6)));for(;Se.l&511;)Se.write_shift(-4,B.ENDOFCHAIN);for(ke=0;ke<ve[4]<<2;++ke){var Ce=le.FullPaths[ke];if(!Ce||Ce.length===0){for(Ie=0;Ie<17;++Ie)Se.write_shift(4,0);for(Ie=0;Ie<3;++Ie)Se.write_shift(4,-1);for(Ie=0;Ie<12;++Ie)Se.write_shift(4,0);continue}fe=le.FileIndex[ke],ke===0&&(fe.start=fe.size?fe.start-1:K);var je=ke===0&&pe.root||fe.name;if(oe=2*(je.length+1),Se.write_shift(64,je,"utf16le"),Se.write_shift(2,oe),Se.write_shift(1,fe.type),Se.write_shift(1,fe.color),Se.write_shift(-4,fe.L),Se.write_shift(-4,fe.R),Se.write_shift(-4,fe.C),fe.clsid)Se.write_shift(16,fe.clsid,"hex");else for(Ie=0;Ie<4;++Ie)Se.write_shift(4,0);Se.write_shift(4,fe.state||0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,0),Se.write_shift(4,fe.start),Se.write_shift(4,fe.size),Se.write_shift(4,0)}for(ke=1;ke<le.FileIndex.length;++ke)if(fe=le.FileIndex[ke],fe.size>=4096)if(Se.l=fe.start+1<<9,Qr&&Buffer.isBuffer(fe.content))fe.content.copy(Se,Se.l,0,fe.size),Se.l+=fe.size+511&-512;else{for(Ie=0;Ie<fe.size;++Ie)Se.write_shift(1,fe.content[Ie]);for(;Ie&511;++Ie)Se.write_shift(1,0)}for(ke=1;ke<le.FileIndex.length;++ke)if(fe=le.FileIndex[ke],fe.size>0&&fe.size<4096)if(Qr&&Buffer.isBuffer(fe.content))fe.content.copy(Se,Se.l,0,fe.size),Se.l+=fe.size+63&-64;else{for(Ie=0;Ie<fe.size;++Ie)Se.write_shift(1,fe.content[Ie]);for(;Ie&63;++Ie)Se.write_shift(1,0)}if(Qr)Se.l=Se.length;else for(;Se.l<Se.length;)Se.write_shift(1,0);return Se}function M(le,_e){var pe=le.FullPaths.map(function(Ie){return Ie.toUpperCase()}),ve=pe.map(function(Ie){var oe=Ie.split("/");return oe[oe.length-(Ie.slice(-1)=="/"?2:1)]}),Se=!1;_e.charCodeAt(0)===47?(Se=!0,_e=pe[0].slice(0,-1)+_e):Se=_e.indexOf("/")!==-1;var ke=_e.toUpperCase(),Ge=Se===!0?pe.indexOf(ke):ve.indexOf(ke);if(Ge!==-1)return le.FileIndex[Ge];var dt=!ke.match(Sx);for(ke=ke.replace(Yi,""),dt&&(ke=ke.replace(Sx,"!")),Ge=0;Ge<pe.length;++Ge)if((dt?pe[Ge].replace(Sx,"!"):pe[Ge]).replace(Yi,"")==ke||(dt?ve[Ge].replace(Sx,"!"):ve[Ge]).replace(Yi,"")==ke)return le.FileIndex[Ge];return null}var G=64,K=-2,re="d0cf11e0a1b11ae1",Y=[208,207,17,224,161,177,26,225],ee="00000000000000000000000000000000",B={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:K,FREESECT:-1,HEADER_SIGNATURE:re,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ee,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function z(le,_e,pe){u();var ve=R(le,pe);l.writeFileSync(_e,ve)}function I(le){for(var _e=new Array(le.length),pe=0;pe<le.length;++pe)_e[pe]=String.fromCharCode(le[pe]);return _e.join("")}function W(le,_e){var pe=R(le,_e);switch(_e&&_e.type||"buffer"){case"file":return u(),l.writeFileSync(_e.filename,pe),pe;case"binary":return typeof pe=="string"?pe:I(pe);case"base64":return mv(typeof pe=="string"?pe:I(pe));case"buffer":if(Qr)return Buffer.isBuffer(pe)?pe:sd(pe);case"array":return typeof pe=="string"?Fo(pe):pe}return pe}var V;function L(le){try{var _e=le.InflateRaw,pe=new _e;if(pe._processChunk(new Uint8Array([3,0]),pe._finishFlushFlag),pe.bytesRead)V=le;else throw new Error("zlib does not expose bytesRead")}catch(ve){console.error("cannot use native zlib: "+(ve.message||ve))}}function H(le,_e){if(!V)return er(le,_e);var pe=V.InflateRaw,ve=new pe,Se=ve._processChunk(le.slice(le.l),ve._finishFlushFlag);return le.l+=ve.bytesRead,Se}function J(le){return V?V.deflateRawSync(le):gt(le)}var Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ne=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Z=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function se(le){var _e=(le<<1|le<<11)&139536|(le<<5|le<<15)&558144;return(_e>>16|_e>>8|_e)&255}for(var ce=typeof Uint8Array<"u",he=ce?new Uint8Array(256):[],Ee=0;Ee<256;++Ee)he[Ee]=se(Ee);function ie(le,_e){var pe=he[le&255];return _e<=8?pe>>>8-_e:(pe=pe<<8|he[le>>8&255],_e<=16?pe>>>16-_e:(pe=pe<<8|he[le>>16&255],pe>>>24-_e))}function me(le,_e){var pe=_e&7,ve=_e>>>3;return(le[ve]|(pe<=6?0:le[ve+1]<<8))>>>pe&3}function Ne(le,_e){var pe=_e&7,ve=_e>>>3;return(le[ve]|(pe<=5?0:le[ve+1]<<8))>>>pe&7}function Oe(le,_e){var pe=_e&7,ve=_e>>>3;return(le[ve]|(pe<=4?0:le[ve+1]<<8))>>>pe&15}function Re(le,_e){var pe=_e&7,ve=_e>>>3;return(le[ve]|(pe<=3?0:le[ve+1]<<8))>>>pe&31}function ze(le,_e){var pe=_e&7,ve=_e>>>3;return(le[ve]|(pe<=1?0:le[ve+1]<<8))>>>pe&127}function Nt(le,_e,pe){var ve=_e&7,Se=_e>>>3,ke=(1<<pe)-1,Ge=le[Se]>>>ve;return pe<8-ve||(Ge|=le[Se+1]<<8-ve,pe<16-ve)||(Ge|=le[Se+2]<<16-ve,pe<24-ve)||(Ge|=le[Se+3]<<24-ve),Ge&ke}function et(le,_e,pe){var ve=_e&7,Se=_e>>>3;return ve<=5?le[Se]|=(pe&7)<<ve:(le[Se]|=pe<<ve&255,le[Se+1]=(pe&7)>>8-ve),_e+3}function Me(le,_e,pe){var ve=_e&7,Se=_e>>>3;return pe=(pe&1)<<ve,le[Se]|=pe,_e+1}function Fe(le,_e,pe){var ve=_e&7,Se=_e>>>3;return pe<<=ve,le[Se]|=pe&255,pe>>>=8,le[Se+1]=pe,_e+8}function Ke(le,_e,pe){var ve=_e&7,Se=_e>>>3;return pe<<=ve,le[Se]|=pe&255,pe>>>=8,le[Se+1]=pe&255,le[Se+2]=pe>>>8,_e+16}function xt(le,_e){var pe=le.length,ve=2*pe>_e?2*pe:_e+5,Se=0;if(pe>=_e)return le;if(Qr){var ke=wI(ve);if(le.copy)le.copy(ke);else for(;Se<le.length;++Se)ke[Se]=le[Se];return ke}else if(ce){var Ge=new Uint8Array(ve);if(Ge.set)Ge.set(le);else for(;Se<pe;++Se)Ge[Se]=le[Se];return Ge}return le.length=ve,le}function ut(le){for(var _e=new Array(le),pe=0;pe<le;++pe)_e[pe]=0;return _e}function At(le,_e,pe){var ve=1,Se=0,ke=0,Ge=0,dt=0,Ie=le.length,oe=ce?new Uint16Array(32):ut(32);for(ke=0;ke<32;++ke)oe[ke]=0;for(ke=Ie;ke<pe;++ke)le[ke]=0;Ie=le.length;var fe=ce?new Uint16Array(Ie):ut(Ie);for(ke=0;ke<Ie;++ke)oe[Se=le[ke]]++,ve<Se&&(ve=Se),fe[ke]=0;for(oe[0]=0,ke=1;ke<=ve;++ke)oe[ke+16]=dt=dt+oe[ke-1]<<1;for(ke=0;ke<Ie;++ke)dt=le[ke],dt!=0&&(fe[ke]=oe[dt+16]++);var Ce=0;for(ke=0;ke<Ie;++ke)if(Ce=le[ke],Ce!=0)for(dt=ie(fe[ke],ve)>>ve-Ce,Ge=(1<<ve+4-Ce)-1;Ge>=0;--Ge)_e[dt|Ge<<Ce]=Ce&15|ke<<4;return ve}var Dt=ce?new Uint16Array(512):ut(512),Qe=ce?new Uint16Array(32):ut(32);if(!ce){for(var tt=0;tt<512;++tt)Dt[tt]=0;for(tt=0;tt<32;++tt)Qe[tt]=0}(function(){for(var le=[],_e=0;_e<32;_e++)le.push(5);At(le,Qe,32);var pe=[];for(_e=0;_e<=143;_e++)pe.push(8);for(;_e<=255;_e++)pe.push(9);for(;_e<=279;_e++)pe.push(7);for(;_e<=287;_e++)pe.push(8);At(pe,Dt,288)})();var vt=(function(){for(var _e=ce?new Uint8Array(32768):[],pe=0,ve=0;pe<Z.length-1;++pe)for(;ve<Z[pe+1];++ve)_e[ve]=pe;for(;ve<32768;++ve)_e[ve]=29;var Se=ce?new Uint8Array(259):[];for(pe=0,ve=0;pe<ne.length-1;++pe)for(;ve<ne[pe+1];++ve)Se[ve]=pe;function ke(dt,Ie){for(var oe=0;oe<dt.length;){var fe=Math.min(65535,dt.length-oe),Ce=oe+fe==dt.length;for(Ie.write_shift(1,+Ce),Ie.write_shift(2,fe),Ie.write_shift(2,~fe&65535);fe-- >0;)Ie[Ie.l++]=dt[oe++]}return Ie.l}function Ge(dt,Ie){for(var oe=0,fe=0,Ce=ce?new Uint16Array(32768):[];fe<dt.length;){var je=Math.min(65535,dt.length-fe);if(je<10){for(oe=et(Ie,oe,+(fe+je==dt.length)),oe&7&&(oe+=8-(oe&7)),Ie.l=oe/8|0,Ie.write_shift(2,je),Ie.write_shift(2,~je&65535);je-- >0;)Ie[Ie.l++]=dt[fe++];oe=Ie.l*8;continue}oe=et(Ie,oe,+(fe+je==dt.length)+2);for(var qe=0;je-- >0;){var Ze=dt[fe];qe=(qe<<5^Ze)&32767;var mt=-1,qt=0;if((mt=Ce[qe])&&(mt|=fe&-32768,mt>fe&&(mt-=32768),mt<fe))for(;dt[mt+qt]==dt[fe+qt]&&qt<250;)++qt;if(qt>2){Ze=Se[qt],Ze<=22?oe=Fe(Ie,oe,he[Ze+1]>>1)-1:(Fe(Ie,oe,3),oe+=5,Fe(Ie,oe,he[Ze-23]>>5),oe+=3);var pt=Ze<8?0:Ze-4>>2;pt>0&&(Ke(Ie,oe,qt-ne[Ze]),oe+=pt),Ze=_e[fe-mt],oe=Fe(Ie,oe,he[Ze]>>3),oe-=3;var Bt=Ze<4?0:Ze-2>>1;Bt>0&&(Ke(Ie,oe,fe-mt-Z[Ze]),oe+=Bt);for(var Cr=0;Cr<qt;++Cr)Ce[qe]=fe&32767,qe=(qe<<5^dt[fe])&32767,++fe;je-=qt-1}else Ze<=143?Ze=Ze+48:oe=Me(Ie,oe,1),oe=Fe(Ie,oe,he[Ze]),Ce[qe]=fe&32767,++fe}oe=Fe(Ie,oe,0)-1}return Ie.l=(oe+7)/8|0,Ie.l}return function(Ie,oe){return Ie.length<8?ke(Ie,oe):Ge(Ie,oe)}})();function gt(le){var _e=bt(50+Math.floor(le.length*1.1)),pe=vt(le,_e);return _e.slice(0,pe)}var _t=ce?new Uint16Array(32768):ut(32768),Wt=ce?new Uint16Array(32768):ut(32768),Zt=ce?new Uint16Array(128):ut(128),pr=1,Ir=1;function br(le,_e){var pe=Re(le,_e)+257;_e+=5;var ve=Re(le,_e)+1;_e+=5;var Se=Oe(le,_e)+4;_e+=4;for(var ke=0,Ge=ce?new Uint8Array(19):ut(19),dt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ie=1,oe=ce?new Uint8Array(8):ut(8),fe=ce?new Uint8Array(8):ut(8),Ce=Ge.length,je=0;je<Se;++je)Ge[Q[je]]=ke=Ne(le,_e),Ie<ke&&(Ie=ke),oe[ke]++,_e+=3;var qe=0;for(oe[0]=0,je=1;je<=Ie;++je)fe[je]=qe=qe+oe[je-1]<<1;for(je=0;je<Ce;++je)(qe=Ge[je])!=0&&(dt[je]=fe[qe]++);var Ze=0;for(je=0;je<Ce;++je)if(Ze=Ge[je],Ze!=0){qe=he[dt[je]]>>8-Ze;for(var mt=(1<<7-Ze)-1;mt>=0;--mt)Zt[qe|mt<<Ze]=Ze&7|je<<3}var qt=[];for(Ie=1;qt.length<pe+ve;)switch(qe=Zt[ze(le,_e)],_e+=qe&7,qe>>>=3){case 16:for(ke=3+me(le,_e),_e+=2,qe=qt[qt.length-1];ke-- >0;)qt.push(qe);break;case 17:for(ke=3+Ne(le,_e),_e+=3;ke-- >0;)qt.push(0);break;case 18:for(ke=11+ze(le,_e),_e+=7;ke-- >0;)qt.push(0);break;default:qt.push(qe),Ie<qe&&(Ie=qe);break}var pt=qt.slice(0,pe),Bt=qt.slice(pe);for(je=pe;je<286;++je)pt[je]=0;for(je=ve;je<30;++je)Bt[je]=0;return pr=At(pt,_t,286),Ir=At(Bt,Wt,30),_e}function xr(le,_e){if(le[0]==3&&!(le[1]&3))return[_f(_e),2];for(var pe=0,ve=0,Se=wI(_e||1<<18),ke=0,Ge=Se.length>>>0,dt=0,Ie=0;(ve&1)==0;){if(ve=Ne(le,pe),pe+=3,ve>>>1)ve>>1==1?(dt=9,Ie=5):(pe=br(le,pe),dt=pr,Ie=Ir);else{pe&7&&(pe+=8-(pe&7));var oe=le[pe>>>3]|le[(pe>>>3)+1]<<8;if(pe+=32,oe>0)for(!_e&&Ge<ke+oe&&(Se=xt(Se,ke+oe),Ge=Se.length);oe-- >0;)Se[ke++]=le[pe>>>3],pe+=8;continue}for(;;){!_e&&Ge<ke+32767&&(Se=xt(Se,ke+32767),Ge=Se.length);var fe=Nt(le,pe,dt),Ce=ve>>>1==1?Dt[fe]:_t[fe];if(pe+=Ce&15,Ce>>>=4,(Ce>>>8&255)===0)Se[ke++]=Ce;else{if(Ce==256)break;Ce-=257;var je=Ce<8?0:Ce-4>>2;je>5&&(je=0);var qe=ke+ne[Ce];je>0&&(qe+=Nt(le,pe,je),pe+=je),fe=Nt(le,pe,Ie),Ce=ve>>>1==1?Qe[fe]:Wt[fe],pe+=Ce&15,Ce>>>=4;var Ze=Ce<4?0:Ce-2>>1,mt=Z[Ce];for(Ze>0&&(mt+=Nt(le,pe,Ze),pe+=Ze),!_e&&Ge<qe&&(Se=xt(Se,qe+100),Ge=Se.length);ke<qe;)Se[ke]=Se[ke-mt],++ke}}}return _e?[Se,pe+7>>>3]:[Se.slice(0,ke),pe+7>>>3]}function er(le,_e){var pe=le.slice(le.l||0),ve=xr(pe,_e);return le.l+=ve[1],ve[0]}function _r(le,_e){if(le)typeof console<"u"&&console.error(_e);else throw new Error(_e)}function ge(le,_e){var pe=le;ri(pe,0);var ve=[],Se=[],ke={FileIndex:ve,FullPaths:Se};P(ke,{root:_e.root});for(var Ge=pe.length-4;(pe[Ge]!=80||pe[Ge+1]!=75||pe[Ge+2]!=5||pe[Ge+3]!=6)&&Ge>=0;)--Ge;pe.l=Ge+4,pe.l+=4;var dt=pe.read_shift(2);pe.l+=6;var Ie=pe.read_shift(4);for(pe.l=Ie,Ge=0;Ge<dt;++Ge){pe.l+=20;var oe=pe.read_shift(4),fe=pe.read_shift(4),Ce=pe.read_shift(2),je=pe.read_shift(2),qe=pe.read_shift(2);pe.l+=8;var Ze=pe.read_shift(4),mt=o(pe.slice(pe.l+Ce,pe.l+Ce+je));pe.l+=Ce+je+qe;var qt=pe.l;pe.l=Ze+4,ue(pe,oe,fe,ke,mt),pe.l=qt}return ke}function ue(le,_e,pe,ve,Se){le.l+=2;var ke=le.read_shift(2),Ge=le.read_shift(2),dt=i(le);if(ke&8257)throw new Error("Unsupported ZIP encryption");for(var Ie=le.read_shift(4),oe=le.read_shift(4),fe=le.read_shift(4),Ce=le.read_shift(2),je=le.read_shift(2),qe="",Ze=0;Ze<Ce;++Ze)qe+=String.fromCharCode(le[le.l++]);if(je){var mt=o(le.slice(le.l,le.l+je));(mt[21589]||{}).mt&&(dt=mt[21589].mt),((Se||{})[21589]||{}).mt&&(dt=Se[21589].mt)}le.l+=je;var qt=le.slice(le.l,le.l+oe);switch(Ge){case 8:qt=H(le,fe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ge)}var pt=!1;ke&8&&(Ie=le.read_shift(4),Ie==134695760&&(Ie=le.read_shift(4),pt=!0),oe=le.read_shift(4),fe=le.read_shift(4)),oe!=_e&&_r(pt,"Bad compressed size: "+_e+" != "+oe),fe!=pe&&_r(pt,"Bad uncompressed size: "+pe+" != "+fe),mr(ve,qe,qt,{unsafe:!0,mt:dt})}function we(le,_e){var pe=_e||{},ve=[],Se=[],ke=bt(1),Ge=pe.compression?8:0,dt=0,Ie=0,oe=0,fe=0,Ce=0,je=le.FullPaths[0],qe=je,Ze=le.FileIndex[0],mt=[],qt=0;for(Ie=1;Ie<le.FullPaths.length;++Ie)if(qe=le.FullPaths[Ie].slice(je.length),Ze=le.FileIndex[Ie],!(!Ze.size||!Ze.content||qe=="Sh33tJ5")){var pt=fe,Bt=bt(qe.length);for(oe=0;oe<qe.length;++oe)Bt.write_shift(1,qe.charCodeAt(oe)&127);Bt=Bt.slice(0,Bt.l),mt[Ce]=Tfe.buf(Ze.content,0);var Cr=Ze.content;Ge==8&&(Cr=J(Cr)),ke=bt(30),ke.write_shift(4,67324752),ke.write_shift(2,20),ke.write_shift(2,dt),ke.write_shift(2,Ge),Ze.mt?a(ke,Ze.mt):ke.write_shift(4,0),ke.write_shift(-4,mt[Ce]),ke.write_shift(4,Cr.length),ke.write_shift(4,Ze.content.length),ke.write_shift(2,Bt.length),ke.write_shift(2,0),fe+=ke.length,ve.push(ke),fe+=Bt.length,ve.push(Bt),fe+=Cr.length,ve.push(Cr),ke=bt(46),ke.write_shift(4,33639248),ke.write_shift(2,0),ke.write_shift(2,20),ke.write_shift(2,dt),ke.write_shift(2,Ge),ke.write_shift(4,0),ke.write_shift(-4,mt[Ce]),ke.write_shift(4,Cr.length),ke.write_shift(4,Ze.content.length),ke.write_shift(2,Bt.length),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(4,0),ke.write_shift(4,pt),qt+=ke.l,Se.push(ke),qt+=Bt.length,Se.push(Bt),++Ce}return ke=bt(22),ke.write_shift(4,101010256),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,Ce),ke.write_shift(2,Ce),ke.write_shift(4,qt),ke.write_shift(4,fe),ke.write_shift(2,0),Ia([Ia(ve),Ia(Se),ke])}var Te={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Xe(le,_e){if(le.ctype)return le.ctype;var pe=le.name||"",ve=pe.match(/\.([^\.]+)$/);return ve&&Te[ve[1]]||_e&&(ve=(pe=_e).match(/[\.\\]([^\.\\])+$/),ve&&Te[ve[1]])?Te[ve[1]]:"application/octet-stream"}function Ct(le){for(var _e=mv(le),pe=[],ve=0;ve<_e.length;ve+=76)pe.push(_e.slice(ve,ve+76));return pe.join(`\r
`)+`\r
`}function Pt(le){var _e=le.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(oe){var fe=oe.charCodeAt(0).toString(16).toUpperCase();return"="+(fe.length==1?"0"+fe:fe)});_e=_e.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),_e.charAt(0)==`
`&&(_e="=0D"+_e.slice(1)),_e=_e.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var pe=[],ve=_e.split(`\r
`),Se=0;Se<ve.length;++Se){var ke=ve[Se];if(ke.length==0){pe.push("");continue}for(var Ge=0;Ge<ke.length;){var dt=76,Ie=ke.slice(Ge,Ge+dt);Ie.charAt(dt-1)=="="?dt--:Ie.charAt(dt-2)=="="?dt-=2:Ie.charAt(dt-3)=="="&&(dt-=3),Ie=ke.slice(Ge,Ge+dt),Ge+=dt,Ge<ke.length&&(Ie+="="),pe.push(Ie)}}return pe.join(`\r
`)}function Ue(le){for(var _e=[],pe=0;pe<le.length;++pe){for(var ve=le[pe];pe<=le.length&&ve.charAt(ve.length-1)=="=";)ve=ve.slice(0,ve.length-1)+le[++pe];_e.push(ve)}for(var Se=0;Se<_e.length;++Se)_e[Se]=_e[Se].replace(/[=][0-9A-Fa-f]{2}/g,function(ke){return String.fromCharCode(parseInt(ke.slice(1),16))});return Fo(_e.join(`\r
`))}function ft(le,_e,pe){for(var ve="",Se="",ke="",Ge,dt=0;dt<10;++dt){var Ie=_e[dt];if(!Ie||Ie.match(/^\s*$/))break;var oe=Ie.match(/^(.*?):\s*([^\s].*)$/);if(oe)switch(oe[1].toLowerCase()){case"content-location":ve=oe[2].trim();break;case"content-type":ke=oe[2].trim();break;case"content-transfer-encoding":Se=oe[2].trim();break}}switch(++dt,Se.toLowerCase()){case"base64":Ge=Fo(Mo(_e.slice(dt).join("")));break;case"quoted-printable":Ge=Ue(_e.slice(dt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Se)}var fe=mr(le,ve.slice(pe.length),Ge,{unsafe:!0});ke&&(fe.ctype=ke)}function ot(le,_e){if(I(le.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var pe=_e&&_e.root||"",ve=(Qr&&Buffer.isBuffer(le)?le.toString("binary"):I(le)).split(`\r
`),Se=0,ke="";for(Se=0;Se<ve.length;++Se)if(ke=ve[Se],!!/^Content-Location:/i.test(ke)&&(ke=ke.slice(ke.indexOf("file")),pe||(pe=ke.slice(0,ke.lastIndexOf("/")+1)),ke.slice(0,pe.length)!=pe))for(;pe.length>0&&(pe=pe.slice(0,pe.length-1),pe=pe.slice(0,pe.lastIndexOf("/")+1),ke.slice(0,pe.length)!=pe););var Ge=(ve[1]||"").match(/boundary="(.*?)"/);if(!Ge)throw new Error("MAD cannot find boundary");var dt="--"+(Ge[1]||""),Ie=[],oe=[],fe={FileIndex:Ie,FullPaths:oe};P(fe);var Ce,je=0;for(Se=0;Se<ve.length;++Se){var qe=ve[Se];qe!==dt&&qe!==dt+"--"||(je++&&ft(fe,ve.slice(Ce,Se),pe),Ce=Se)}return fe}function Ht(le,_e){var pe=_e||{},ve=pe.boundary||"SheetJS";ve="------="+ve;for(var Se=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ve.slice(2)+'"',"","",""],ke=le.FullPaths[0],Ge=ke,dt=le.FileIndex[0],Ie=1;Ie<le.FullPaths.length;++Ie)if(Ge=le.FullPaths[Ie].slice(ke.length),dt=le.FileIndex[Ie],!(!dt.size||!dt.content||Ge=="Sh33tJ5")){Ge=Ge.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(qt){return"_x"+qt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(qt){return"_u"+qt.charCodeAt(0).toString(16)+"_"});for(var oe=dt.content,fe=Qr&&Buffer.isBuffer(oe)?oe.toString("binary"):I(oe),Ce=0,je=Math.min(1024,fe.length),qe=0,Ze=0;Ze<=je;++Ze)(qe=fe.charCodeAt(Ze))>=32&&qe<128&&++Ce;var mt=Ce>=je*4/5;Se.push(ve),Se.push("Content-Location: "+(pe.root||"file:///C:/SheetJS/")+Ge),Se.push("Content-Transfer-Encoding: "+(mt?"quoted-printable":"base64")),Se.push("Content-Type: "+Xe(dt,Ge)),Se.push(""),Se.push(mt?Pt(fe):Ct(fe))}return Se.push(ve+`--\r
`),Se.join(`\r
`)}function Gt(le){var _e={};return P(_e,le),_e}function mr(le,_e,pe,ve){var Se=ve&&ve.unsafe;Se||P(le);var ke=!Se&&wr.find(le,_e);if(!ke){var Ge=le.FullPaths[0];_e.slice(0,Ge.length)==Ge?Ge=_e:(Ge.slice(-1)!="/"&&(Ge+="/"),Ge=(Ge+_e).replace("//","/")),ke={name:s(_e),type:2},le.FileIndex.push(ke),le.FullPaths.push(Ge),Se||wr.utils.cfb_gc(le)}return ke.content=pe,ke.size=pe?pe.length:0,ve&&(ve.CLSID&&(ke.clsid=ve.CLSID),ve.mt&&(ke.mt=ve.mt),ve.ct&&(ke.ct=ve.ct)),ke}function Vr(le,_e){P(le);var pe=wr.find(le,_e);if(pe){for(var ve=0;ve<le.FileIndex.length;++ve)if(le.FileIndex[ve]==pe)return le.FileIndex.splice(ve,1),le.FullPaths.splice(ve,1),!0}return!1}function vr(le,_e,pe){P(le);var ve=wr.find(le,_e);if(ve){for(var Se=0;Se<le.FileIndex.length;++Se)if(le.FileIndex[Se]==ve)return le.FileIndex[Se].name=s(pe),le.FullPaths[Se]=pe,!0}return!1}function hr(le){O(le,!0)}return t.find=M,t.read=A,t.parse=d,t.write=W,t.writeFile=z,t.utils={cfb_new:Gt,cfb_add:mr,cfb_del:Vr,cfb_mov:vr,cfb_gc:hr,ReadShift:Lx,CheckField:kq,prep_blob:ri,bconcat:Ia,use_zlib:L,_deflateRaw:gt,_inflateRaw:er,consts:B},t})();function Cfe(e){return typeof e=="string"?sS(e):Array.isArray(e)?Qde(e):e}function P1(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=sS(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Bc(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var s=new Blob([Cfe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=Ff(t)),o.write(t),o.close(),t}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+e)}function Efe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Rs(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function NI(e,t){for(var r=[],n=Rs(e),s=0;s!==n.length;++s)r[e[n[s]][t]]==null&&(r[e[n[s]][t]]=n[s]);return r}function iS(e){for(var t=[],r=Rs(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function oS(e){for(var t=[],r=Rs(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function Nfe(e){for(var t=[],r=Rs(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var k_=new Date(1899,11,30,0,0,0);function _a(e,t){var r=e.getTime(),n=k_.getTime()+(e.getTimezoneOffset()-k_.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var nq=new Date,Afe=k_.getTime()+(nq.getTimezoneOffset()-k_.getTimezoneOffset())*6e4,AI=nq.getTimezoneOffset();function lS(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Afe),t.getTimezoneOffset()!==AI&&t.setTime(t.getTime()+(t.getTimezoneOffset()-AI)*6e4),t}function jfe(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(r=1,a>3&&(n=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[a],10)}return t}var jI=new Date("2017-02-19T19:06:09.000Z"),sq=isNaN(jI.getFullYear())?new Date("2/19/17"):jI,Pfe=sq.getFullYear()==2017;function is(e,t){var r=new Date(e);if(Pfe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(sq.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function o0(e,t){if(Qr&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Bc(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Bc(GV(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Bc(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Bc(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(a){return r[a]||a})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function os(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=os(e[r]));return t}function js(e,t){for(var r="";r.length<t;)r+=e;return r}function Zl(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,a){return r=-r,a}),!isNaN(t=Number(n)))?t/r:t}var Ofe=["january","february","march","april","may","june","july","august","september","october","november","december"];function kp(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),a=t.getDate();if(isNaN(a))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&Ofe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||a>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var Ffe=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var a=r.split(n),i=[a[0]],o=1;o<a.length;++o)i.push(s),i.push(a[o]);return i}})();function aq(e){return e?e.content&&e.type?o0(e.content,!0):e.data?_x(e.data):e.asNodeBuffer&&Qr?_x(e.asNodeBuffer().toString("binary")):e.asBinary?_x(e.asBinary()):e._data&&e._data.getContent?_x(o0(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function iq(e){if(!e)return null;if(e.data)return xI(e.data);if(e.asNodeBuffer&&Qr)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?xI(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function Rfe(e){return e&&e.name.slice(-4)===".bin"?iq(e):aq(e)}function cl(e,t){for(var r=e.FullPaths||Rs(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),a=0;a<r.length;++a){var i=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||s==i)return e.files?e.files[r[a]]:e.FileIndex[a]}return null}function c6(e,t){var r=cl(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function ta(e,t,r){if(!r)return Rfe(c6(e,t));if(!t)return null;try{return ta(e,t)}catch{return null}}function Ro(e,t,r){if(!r)return aq(c6(e,t));if(!t)return null;try{return Ro(e,t)}catch{return null}}function Dfe(e,t,r){return iq(c6(e,t))}function PI(e){for(var t=e.FullPaths||Rs(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Yr(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return Qr?n=sd(r):n=Zde(r),wr.utils.cfb_add(e,t,n)}wr.utils.cfb_add(e,t,r)}else e.file(t,r)}function u6(){return wr.utils.cfb_new()}function oq(e,t){switch(t.type){case"base64":return wr.read(e,{type:"base64"});case"binary":return wr.read(e,{type:"binary"});case"buffer":case"array":return wr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function kx(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var Ks=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Ife=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,OI=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Mfe=/<[^>]*>/g,ji=Ks.match(OI)?OI:Mfe,Lfe=/<\w*:/,Bfe=/<(\/?)\w+:/;function Dr(e,t,r){for(var n={},s=0,a=0;s!==e.length&&!((a=e.charCodeAt(s))===32||a===10||a===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var i=e.match(Ife),o=0,l="",u=0,d="",f="",g=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],a=0;a!=f.length&&f.charCodeAt(a)!==61;++a);for(d=f.slice(0,a).trim();f.charCodeAt(a+1)==32;)++a;for(g=(s=f.charCodeAt(a+1))==34||s==39?1:0,l=f.slice(a+1+g,f.length-g),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var p=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[p]&&d.slice(o-3,o)=="ext")continue;n[p]=l,n[p.toLowerCase()]=l}}return n}function Jc(e){return e.replace(Bfe,"<$1")}var lq={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},d6=iS(lq),fn=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",a=s.indexOf("<![CDATA[");if(a==-1)return s.replace(e,function(o,l){return lq[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=s.indexOf("]]>");return r(s.slice(0,a))+s.slice(a+9,i)+r(s.slice(i+3))}})(),f6=/[&<>'"]/g,$fe=/[\u0000-\u0008\u000b-\u001f]/g;function Dn(e){var t=e+"";return t.replace(f6,function(r){return d6[r]}).replace($fe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function FI(e){return Dn(e).replace(/ /g,"_x0020_")}var cq=/[\u0000-\u001f]/g;function h6(e){var t=e+"";return t.replace(f6,function(r){return d6[r]}).replace(/\n/g,"<br/>").replace(cq,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Ufe(e){var t=e+"";return t.replace(f6,function(r){return d6[r]}).replace(cq,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var RI=(function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}})();function Wfe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function ns(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function ST(e){for(var t="",r=0,n=0,s=0,a=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=s&63,t+=String.fromCharCode(i);continue}if(a=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|a&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function DI(e){var t=_f(2*e.length),r,n,s=1,a=0,i=0,o;for(n=0;n<e.length;n+=s)s=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[a++]=i&255,t[a++]=i>>>8,i=0),t[a++]=r%256,t[a++]=r>>>8;return t.slice(0,a).toString("ucs2")}function II(e){return sd(e,"binary").toString("utf8")}var fb="foo bar baz",Wn=Qr&&(II(fb)==ST(fb)&&II||DI(fb)==ST(fb)&&DI)||ST,Bc=Qr?function(e){return sd(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},xv=(function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),uq=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}})(),zfe=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),Hfe=/<\/?(?:vt:)?variant>/g,Gfe=/<(?:vt:)([^>]*)>([\s\S]*)</;function MI(e,t){var r=Dr(e),n=e.match(zfe(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(a){var i=a.replace(Hfe,"").match(Gfe);i&&s.push({v:Wn(i[2]),t:i[1]})}),s}var dq=/(^\s|\s$|\n)/;function ai(e,t){return"<"+e+(t.match(dq)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function vv(e){return Rs(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Vt(e,t,r){return"<"+e+(r!=null?vv(r):"")+(t!=null?(t.match(dq)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function WA(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function Vfe(e,t){switch(typeof e){case"string":var r=Vt("vt:lpwstr",Dn(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Vt((e|0)==e?"vt:i4":"vt:r8",Dn(String(e)));case"boolean":return Vt("vt:bool",e?"true":"false")}if(e instanceof Date)return Vt("vt:filetime",WA(e));throw new Error("Unable to serialize "+e)}function g6(e){if(Qr&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Wn(Ff(i6(e)));throw new Error("Bad input format: expected Buffer or string")}var wv=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,va={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},w0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Po={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function qfe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,a=5;a>=0;--a)s=s*256+e[t+a];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function Kfe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,a=0,i=n?-t:t;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(t)?26985:0);for(var o=0;o<=5;++o,a/=256)e[r+o]=a&255;e[r+6]=(s&15)<<4|a&15,e[r+7]=s>>4|n}var LI=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,a=e[0][n].length;s<a;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},BI=Qr?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:sd(t)})):LI(e)}:LI,$I=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(Iu(e,s)));return n.join("").replace(Yi,"")},p6=Qr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Yi,""):$I(e,t,r)}:$I,UI=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},fq=Qr?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):UI(e,t,r)}:UI,WI=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode($g(e,s)));return n.join("")},O1=Qr?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):WI(t,r,n)}:WI,hq=function(e,t){var r=Oo(e,t);return r>0?O1(e,t+4,t+4+r-1):""},gq=hq,pq=function(e,t){var r=Oo(e,t);return r>0?O1(e,t+4,t+4+r-1):""},mq=pq,yq=function(e,t){var r=2*Oo(e,t);return r>0?O1(e,t+4,t+4+r-1):""},xq=yq,vq=function(t,r){var n=Oo(t,r);return n>0?p6(t,r+4,r+4+n):""},wq=vq,bq=function(e,t){var r=Oo(e,t);return r>0?O1(e,t+4,t+4+r):""},_q=bq,Sq=function(e,t){return qfe(e,t)},T_=Sq,m6=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Qr&&(gq=function(t,r){if(!Buffer.isBuffer(t))return hq(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},mq=function(t,r){if(!Buffer.isBuffer(t))return pq(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},xq=function(t,r){if(!Buffer.isBuffer(t))return yq(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},wq=function(t,r){if(!Buffer.isBuffer(t))return vq(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},_q=function(t,r){if(!Buffer.isBuffer(t))return bq(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},T_=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Sq(t,r)},m6=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var $g=function(e,t){return e[t]},Iu=function(e,t){return e[t+1]*256+e[t]},Xfe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Oo=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Th=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Yfe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Lx(e,t){var r="",n,s,a=[],i,o,l,u;switch(t){case"dbcs":if(u=this.l,Qr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(l=0;l<e;++l)r+=String.fromCharCode(Iu(this,u)),u+=2;e*=2;break;case"utf8":r=O1(this,this.l,this.l+e);break;case"utf16le":e*=2,r=p6(this,this.l,this.l+e);break;case"wstr":return Lx.call(this,e,"dbcs");case"lpstr-ansi":r=gq(this,this.l),e=4+Oo(this,this.l);break;case"lpstr-cp":r=mq(this,this.l),e=4+Oo(this,this.l);break;case"lpwstr":r=xq(this,this.l),e=4+2*Oo(this,this.l);break;case"lpp4":e=4+Oo(this,this.l),r=wq(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Oo(this,this.l),r=_q(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=$g(this,this.l+e++))!==0;)a.push(db(i));r=a.join("");break;case"_wstr":for(e=0,r="";(i=Iu(this,this.l+e))!==0;)a.push(db(i)),e+=2;e+=2,r=a.join("");break;case"dbcs-cont":for(r="",u=this.l,l=0;l<e;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=$g(this,u),this.l=u+1,o=Lx.call(this,e-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(db(Iu(this,u))),u+=2}r=a.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,l=0;l!=e;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=$g(this,u),this.l=u+1,o=Lx.call(this,e-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(db($g(this,u))),u+=1}r=a.join("");break;default:switch(e){case 1:return n=$g(this,this.l),this.l++,n;case 2:return n=(t==="i"?Xfe:Iu)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Th:Yfe)(this,this.l),this.l+=4,n):(s=Oo(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=T_(this,this.l):s=T_([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=fq(this,this.l,e);break}}return this.l+=e,r}var Jfe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Qfe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Zfe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function ehe(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)Zfe(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var i=t.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,Jfe(this,t,this.l);break;case 8:if(n=8,r==="f"){Kfe(this,t,this.l);break}case 16:break;case-4:n=4,Qfe(this,t,this.l);break}return this.l+=n,this}function kq(e,t){var r=fq(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function ri(e,t){e.l=t,e.read_shift=Lx,e.chk=kq,e.write_shift=ehe}function Ai(e,t){e.l+=t}function bt(e){var t=_f(e);return ri(t,0),t}function ad(e,t,r){if(e){var n,s,a;ri(e,e.l||0);for(var i=e.length,o=0,l=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=Cv[o]||Cv[65535];for(n=e.read_shift(1),a=n&127,s=1;s<4&&n&128;++s)a+=((n=e.read_shift(1))&127)<<7*s;l=e.l+a;var d=u.f&&u.f(e,a,r);if(e.l=l,t(d,u,o))return}}}function po(){var e=[],t=Qr?256:2048,r=function(u){var d=bt(u);return ri(d,0),d},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},a=function(u){return n&&u<n.length-n.l?n:(s(),n=r(Math.max(u+1,t)))},i=function(){return s(),Ia(e)},o=function(u){s(),n=u,n.l==null&&(n.l=n.length),a(t)};return{next:a,push:o,end:i,_bufs:e}}function jt(e,t,r,n){var s=+t,a;if(!isNaN(s)){n||(n=Cv[s].p||(r||[]).length||0),a=1+(s>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var i=e.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,(s&127)+128),i.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&m6(r)&&e.push(r)}}function Bx(e,t,r){var n=os(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function zI(e,t,r){var n=os(e);return n.s=Bx(n.s,t.s,r),n.e=Bx(n.e,t.s,r),n}function $x(e,t){if(e.cRel&&e.c<0)for(e=os(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=os(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Pr(e);return!e.cRel&&e.cRel!=null&&(r=nhe(r)),!e.rRel&&e.rRel!=null&&(r=the(r)),r}function kT(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+vs(e.s.c)+":"+(e.e.cRel?"":"$")+vs(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Vs(e.s.r)+":"+(e.e.rRel?"":"$")+Vs(e.e.r):$x(e.s,t.biff)+":"+$x(e.e,t.biff)}function y6(e){return parseInt(rhe(e),10)-1}function Vs(e){return""+(e+1)}function the(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function rhe(e){return e.replace(/\$(\d+)$/,"$1")}function x6(e){for(var t=she(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function vs(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function nhe(e){return e.replace(/^([A-Z])/,"$$$1")}function she(e){return e.replace(/^\$([A-Z])/,"$1")}function ahe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ws(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function Pr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function mo(e){var t=e.indexOf(":");return t==-1?{s:ws(e),e:ws(e)}:{s:ws(e.slice(0,t)),e:ws(e.slice(t+1))}}function Kr(e,t){return typeof t>"u"||typeof t=="number"?Kr(e.s,e.e):(typeof e!="string"&&(e=Pr(e)),typeof t!="string"&&(t=Pr(t)),e==t?e:e+":"+t)}function gn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,a=e.length;for(r=0;n<a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===a||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function HI(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=wl(e.z,r?_a(t):t)}catch{}try{return e.w=wl((e.XF||{}).numFmtId||(r?14:0),r?_a(t):t)}catch{return""+t}}function Ju(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?id[e.v]||e.v:t==null?HI(e,e.v):HI(e,t))}function Rf(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function Tq(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,a=e||(s?[]:{}),i=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?ws(n.origin):n.origin;i=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=gn(a["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=t[f].length;++g)if(!(typeof t[f][g]>"u")){var p={v:t[f][g]},x=i+f,y=o+g;if(u.s.r>x&&(u.s.r=x),u.s.c>y&&(u.s.c=y),u.e.r<x&&(u.e.r=x),u.e.c<y&&(u.e.c=y),t[f][g]&&typeof t[f][g]=="object"&&!Array.isArray(t[f][g])&&!(t[f][g]instanceof Date))p=t[f][g];else if(Array.isArray(p.v)&&(p.f=t[f][g][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Ar[14],n.cellDates?(p.t="d",p.w=wl(p.z,_a(p.v))):(p.t="n",p.v=_a(p.v),p.w=wl(p.z,p.v))):p.t="s";if(s)a[x]||(a[x]=[]),a[x][y]&&a[x][y].z&&(p.z=a[x][y].z),a[x][y]=p;else{var v=Pr({c:y,r:x});a[v]&&a[v].z&&(p.z=a[v].z),a[v]=p}}}return u.s.c<1e7&&(a["!ref"]=Kr(u)),a}function gm(e,t){return Tq(null,e,t)}function ihe(e){return e.read_shift(4,"i")}function ec(e,t){return t||(t=bt(4)),t.write_shift(4,e),t}function Ei(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function La(e,t){var r=!1;return t==null&&(r=!0,t=bt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function ohe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function lhe(e,t){return t||(t=bt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function v6(e,t){var r=e.l,n=e.read_shift(1),s=Ei(e),a=[],i={t:s,h:s};if((n&1)!==0){for(var o=e.read_shift(4),l=0;l!=o;++l)a.push(ohe(e));i.r=a}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function che(e,t){var r=!1;return t==null&&(r=!0,t=bt(15+4*e.t.length)),t.write_shift(1,0),La(e.t,t),r?t.slice(0,t.l):t}var uhe=v6;function dhe(e,t){var r=!1;return t==null&&(r=!0,t=bt(23+4*e.t.length)),t.write_shift(1,1),La(e.t,t),t.write_shift(4,1),lhe({},t),r?t.slice(0,t.l):t}function _l(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function b0(e,t){return t==null&&(t=bt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function _0(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function S0(e,t){return t==null&&(t=bt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var fhe=Ei,Cq=La;function w6(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function C_(e,t){var r=!1;return t==null&&(r=!0,t=bt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var hhe=Ei,zA=w6,b6=C_;function _6(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?T_([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Th(t,0)>>2;return r?s/100:s}function Eq(e,t){t==null&&(t=bt(4));var r=0,n=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function Nq(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function ghe(e,t){return t||(t=bt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var k0=Nq,pm=ghe;function Si(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function l0(e,t){return(t||bt(8)).write_shift(8,e,"f")}function phe(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),a=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var u=$h[s];u&&(t.rgb=_v(u));break;case 2:t.rgb=_v([i,o,l]);break;case 3:t.theme=s;break}return a!=0&&(t.tint=a>0?a/32767:a/32768),t}function E_(e,t){if(t||(t=bt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function mhe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function yhe(e,t){t||(t=bt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function Aq(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function xhe(e){return Aq(e,1)}function vhe(e){return Aq(e,2)}var S6=2,lo=3,hb=11,GI=12,N_=19,gb=64,whe=65,bhe=71,_he=4108,She=4126,Oa=80,jq=81,khe=[Oa,jq],HA={1:{n:"CodePage",t:S6},2:{n:"Category",t:Oa},3:{n:"PresentationFormat",t:Oa},4:{n:"ByteCount",t:lo},5:{n:"LineCount",t:lo},6:{n:"ParagraphCount",t:lo},7:{n:"SlideCount",t:lo},8:{n:"NoteCount",t:lo},9:{n:"HiddenCount",t:lo},10:{n:"MultimediaClipCount",t:lo},11:{n:"ScaleCrop",t:hb},12:{n:"HeadingPairs",t:_he},13:{n:"TitlesOfParts",t:She},14:{n:"Manager",t:Oa},15:{n:"Company",t:Oa},16:{n:"LinksUpToDate",t:hb},17:{n:"CharacterCount",t:lo},19:{n:"SharedDoc",t:hb},22:{n:"HyperlinksChanged",t:hb},23:{n:"AppVersion",t:lo,p:"version"},24:{n:"DigSig",t:whe},26:{n:"ContentType",t:Oa},27:{n:"ContentStatus",t:Oa},28:{n:"Language",t:Oa},29:{n:"Version",t:Oa},255:{},2147483648:{n:"Locale",t:N_},2147483651:{n:"Behavior",t:N_},1919054434:{}},GA={1:{n:"CodePage",t:S6},2:{n:"Title",t:Oa},3:{n:"Subject",t:Oa},4:{n:"Author",t:Oa},5:{n:"Keywords",t:Oa},6:{n:"Comments",t:Oa},7:{n:"Template",t:Oa},8:{n:"LastAuthor",t:Oa},9:{n:"RevNumber",t:Oa},10:{n:"EditTime",t:gb},11:{n:"LastPrinted",t:gb},12:{n:"CreatedDate",t:gb},13:{n:"ModifiedDate",t:gb},14:{n:"PageCount",t:lo},15:{n:"WordCount",t:lo},16:{n:"CharCount",t:lo},17:{n:"Thumbnail",t:bhe},18:{n:"Application",t:Oa},19:{n:"DocSecurity",t:lo},255:{},2147483648:{n:"Locale",t:N_},2147483651:{n:"Behavior",t:N_},1919054434:{}},VI={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},The=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Che(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Ehe=Che([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),$h=os(Ehe),id={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Pq={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},VA={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},pb={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function k6(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Nhe(e){var t=k6();if(!e||!e.match)return t;var r={};if((e.match(ji)||[]).forEach(function(n){var s=Dr(n);switch(s[0].replace(Lfe,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[VA[s.ContentType]]!==void 0&&t[VA[s.ContentType]].push(s.PartName);break}}),t.xmlns!==va.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function Oq(e,t){var r=Nfe(VA),n=[],s;n[n.length]=Ks,n[n.length]=Vt("Types",null,{xmlns:va.CT,"xmlns:xsd":va.xsd,"xmlns:xsi":va.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Vt("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){e[l]&&e[l].length>0&&(s=e[l][0],n[n.length]=Vt("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:pb[l][t.bookType]||pb[l].xlsx}))},i=function(l){(e[l]||[]).forEach(function(u){n[n.length]=Vt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:pb[l][t.bookType]||pb[l].xlsx})})},o=function(l){(e[l]||[]).forEach(function(u){n[n.length]=Vt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[l][0]})})};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var rn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function bv(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Ux(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(ji)||[]).forEach(function(s){var a=Dr(s);if(a[0]==="<Relationship"){var i={};i.Type=a.Type,i.Target=a.Target,i.Id=a.Id,a.TargetMode&&(i.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:kx(a.Target,t);r[o]=i,n[a.Id]=i}}),r["!id"]=n,r}function lp(e){var t=[Ks,Vt("Relationships",null,{xmlns:va.RELS})];return Rs(e["!id"]).forEach(function(r){t[t.length]=Vt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Rn(e,t,r,n,s,a){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=n,s.Target=r,[rn.HLINK,rn.XPATH,rn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var Ahe="application/vnd.oasis.opendocument.spreadsheet";function jhe(e,t){for(var r=g6(e),n,s;n=wv.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=Dr(n[0],!1),s.path=="/"&&s.type!==Ahe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function Phe(e){var t=[Ks];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function qI(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function Ohe(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function Fhe(e){var t=[Ks];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(qI(e[r][0],e[r][1])),t.push(Ohe("",e[r][0]));return t.push(qI("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function Fq(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+w_.version+"</meta:generator></office:meta></office:document-meta>"}var pl=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Rhe=(function(){for(var e=new Array(pl.length),t=0;t<pl.length;++t){var r=pl[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e})();function Rq(e){var t={};e=Wn(e);for(var r=0;r<pl.length;++r){var n=pl[r],s=e.match(Rhe[r]);s!=null&&s.length>0&&(t[n[1]]=fn(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=is(t[n[1]]))}return t}function TT(e,t,r,n,s){s[e]!=null||t==null||t===""||(s[e]=t,t=Dn(t),n[n.length]=r?Vt(e,t,r):ai(e,t))}function Dq(e,t){var r=t||{},n=[Ks,Vt("cp:coreProperties",null,{"xmlns:cp":va.CORE_PROPS,"xmlns:dc":va.dc,"xmlns:dcterms":va.dcterms,"xmlns:dcmitype":va.dcmitype,"xmlns:xsi":va.xsi})],s={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&TT("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:WA(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),e.ModifiedDate!=null&&TT("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:WA(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var a=0;a!=pl.length;++a){var i=pl[a],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&TT(i[0],o,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Uh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Iq=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Mq(e,t,r,n){var s=[];if(typeof e=="string")s=MI(e,n);else for(var a=0;a<e.length;++a)s=s.concat(e[a].map(function(d){return{v:d}}));var i=typeof t=="string"?MI(t,n).map(function(d){return d.v}):t,o=0,l=0;if(i.length>0)for(var u=0;u!==s.length;u+=2){switch(l=+s[u+1].v,s[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=i.slice(o,o+l);break}o+=l}}function Dhe(e,t,r){var n={};return t||(t={}),e=Wn(e),Uh.forEach(function(s){var a=(e.match(xv(s[0]))||[])[1];switch(s[2]){case"string":a&&(t[s[1]]=fn(a));break;case"bool":t[s[1]]=a==="true";break;case"raw":var i=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));i&&i.length>0&&(n[s[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&Mq(n.HeadingPairs,n.TitlesOfParts,t,r),t}function Lq(e){var t=[],r=Vt;return e||(e={}),e.Application="SheetJS",t[t.length]=Ks,t[t.length]=Vt("Properties",null,{xmlns:va.EXT_PROPS,"xmlns:vt":va.vt}),Uh.forEach(function(n){if(e[n[1]]!==void 0){var s;switch(n[2]){case"string":s=Dn(String(e[n[1]]));break;case"bool":s=e[n[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(n[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+Dn(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Ihe=/<[^>]+>[^<]*/g;function Mhe(e,t){var r={},n="",s=e.match(Ihe);if(s)for(var a=0;a!=s.length;++a){var i=s[a],o=Dr(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=fn(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),u=l[0].slice(4),d=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=fn(d);break;case"bool":r[n]=ns(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=is(d);break;case"cy":case"error":r[n]=fn(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,l)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function Bq(e){var t=[Ks,Vt("Properties",null,{xmlns:va.CUST_PROPS,"xmlns:vt":va.vt})];if(!e)return t.join("");var r=1;return Rs(e).forEach(function(s){++r,t[t.length]=Vt("property",Vfe(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Dn(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var qA={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},CT;function Lhe(e,t,r){CT||(CT=iS(qA)),t=CT[t]||t,e[t]=r}function Bhe(e,t){var r=[];return Rs(qA).map(function(n){for(var s=0;s<pl.length;++s)if(pl[s][1]==n)return pl[s];for(s=0;s<Uh.length;++s)if(Uh[s][1]==n)return Uh[s];throw n}).forEach(function(n){if(e[n[1]]!=null){var s=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(ai(qA[n[1]]||n[1],s))}}),Vt("DocumentProperties",r.join(""),{xmlns:Po.o})}function $he(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return e&&Rs(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)){for(var i=0;i<pl.length;++i)if(a==pl[i][1])return;for(i=0;i<Uh.length;++i)if(a==Uh[i][1])return;for(i=0;i<r.length;++i)if(a==r[i])return;var o=e[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),s.push(Vt(FI(a),o,{"dt:dt":l}))}}),t&&Rs(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)&&!(e&&Object.prototype.hasOwnProperty.call(e,a))){var i=t[a],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),s.push(Vt(FI(a),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Po.o+'">'+s.join("")+"</"+n+">"}function T6(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Uhe(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),s+=a);var i=bt(8);return i.write_shift(4,n),i.write_shift(4,s),i}function $q(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function Uq(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function Wq(e,t,r){return t===31?Uq(e):$q(e,t,r)}function KA(e,t,r){return Wq(e,t,r===!1?0:4)}function Whe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Wq(e,t,0)}function zhe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Yi,""),e.l-s&2&&(e.l+=2)}return r}function Hhe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Yi,"");return r}function Ghe(e){var t=e.l,r=A_(e,jq);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=A_(e,lo);return[r,n]}function Vhe(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(Ghe(e));return r}function KI(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var a=e.read_shift(4),i=e.read_shift(4);n[a]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(Yi,"").replace(Sx,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function zq(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function qhe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function A_(e,t,r){var n=e.read_shift(2),s,a=r||{};if(e.l+=2,t!==GI&&n!==t&&khe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===GI?n:t){case 2:return s=e.read_shift(2,"i"),a.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return $q(e,n,4).replace(Yi,"");case 31:return Uq(e);case 64:return T6(e);case 65:return zq(e);case 71:return qhe(e);case 80:return KA(e,n,!a.raw).replace(Yi,"");case 81:return Whe(e,n).replace(Yi,"");case 4108:return Vhe(e);case 4126:case 4127:return n==4127?zhe(e):Hhe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function XI(e,t){var r=bt(4),n=bt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=bt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=Uhe(t);break;case 31:case 80:for(n=bt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Ia([r,n])}function YI(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),a=[],i=0,o=0,l=-1,u={};for(i=0;i!=s;++i){var d=e.read_shift(4),f=e.read_shift(4);a[i]=[d,f+r]}a.sort(function(_,b){return _[1]-b[1]});var g={};for(i=0;i!=s;++i){if(e.l!==a[i][1]){var p=!0;if(i>0&&t)switch(t[a[i-1][0]].t){case 2:e.l+2===a[i][1]&&(e.l+=2,p=!1);break;case 80:e.l<=a[i][1]&&(e.l=a[i][1],p=!1);break;case 4108:e.l<=a[i][1]&&(e.l=a[i][1],p=!1);break}if((!t||i==0)&&e.l<=a[i][1]&&(p=!1,e.l=a[i][1]),p)throw new Error("Read Error: Expected address "+a[i][1]+" at "+e.l+" :"+i)}if(t){var x=t[a[i][0]];if(g[x.n]=A_(e,x.t,{raw:!0}),x.p==="version"&&(g[x.n]=String(g[x.n]>>16)+"."+("0000"+String(g[x.n]&65535)).slice(-4)),x.n=="CodePage")switch(g[x.n]){case 0:g[x.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Xl(o=g[x.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+g[x.n])}}else if(a[i][0]===1){if(o=g.CodePage=A_(e,S6),Xl(o),l!==-1){var y=e.l;e.l=a[l][1],u=KI(e,o),e.l=y}}else if(a[i][0]===0){if(o===0){l=i,e.l=a[i+1][1];continue}u=KI(e,o)}else{var v=u[a[i][0]],T;switch(e[e.l]){case 65:e.l+=4,T=zq(e);break;case 30:e.l+=4,T=KA(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,T=KA(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,T=e.read_shift(4,"i");break;case 19:e.l+=4,T=e.read_shift(4);break;case 5:e.l+=4,T=e.read_shift(8,"f");break;case 11:e.l+=4,T=zs(e,4);break;case 64:e.l+=4,T=is(T6(e));break;default:throw new Error("unparsed value: "+e[e.l])}g[v]=T}}return e.l=r+n,g}var Hq=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Khe(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function JI(e,t,r){var n=bt(8),s=[],a=[],i=8,o=0,l=bt(8),u=bt(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),a.push(l),s.push(u),i+=8+l.length,!t){u=bt(8),u.write_shift(4,0),s.unshift(u);var d=[bt(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(l=bt(8+2*(f.length+1)+(f.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,f.length+1),l.write_shift(0,f,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=Ia(d),a.unshift(l),i+=8+l.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(Hq.indexOf(e[o][0])>-1||Iq.indexOf(e[o][0])>-1)&&e[o][1]!=null){var g=e[o][1],p=0;if(t){p=+t[e[o][0]];var x=r[p];if(x.p=="version"&&typeof g=="string"){var y=g.split(".");g=(+y[0]<<16)+(+y[1]||0)}l=XI(x.t,g)}else{var v=Khe(g);v==-1&&(v=31,g=String(g)),l=XI(v,g)}a.push(l),u=bt(8),u.write_shift(4,t?p:2+o),s.push(u),i+=8+l.length}var T=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,T),T+=a[o].length;return n.write_shift(4,i),n.write_shift(4,a.length),Ia([n].concat(s).concat(a))}function QI(e,t,r){var n=e.content;if(!n)return{};ri(n,0);var s,a,i,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==wr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(a=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(i=n.read_shift(16),l=n.read_shift(4));var f=YI(n,t),g={SystemIdentifier:u};for(var p in f)g[p]=f[p];if(g.FMTID=a,s===1)return g;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var x;try{x=YI(n,null)}catch{}for(p in x)g[p]=x[p];return g.FMTID=[a,i],g}function ZI(e,t,r,n,s,a){var i=bt(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,wr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,s?68:48);var l=JI(e,r,n);if(o.push(l),s){var u=JI(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+l.length),o.push(u)}return Ia(o)}function Yd(e,t){return e.read_shift(t),null}function Xhe(e,t){t||(t=bt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function Yhe(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function zs(e,t){return e.read_shift(t)===1}function Hi(e,t){return t||(t=bt(2)),t.write_shift(2,+!!e),t}function ra(e){return e.read_shift(2,"u")}function ul(e,t){return t||(t=bt(2)),t.write_shift(2,e),t}function Gq(e,t){return Yhe(e,t,ra)}function Jhe(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function Vq(e,t,r){return r||(r=bt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function F1(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=e.read_shift(1);a&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var i=n?e.read_shift(n,s):"";return i}function Qhe(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,a=1+(r&1),i=0,o,l={};s&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var u=a==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return s&&(e.l+=4*i),n&&(e.l+=o),l.t=d,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function Zhe(e){var t=e.t||"",r=bt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=bt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var s=[r,n];return Ia(s)}function c0(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function R1(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):c0(e,n,r)}function T0(e,t,r){if(r.biff>5)return R1(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function qq(e,t,r){return r||(r=bt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function e0e(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function t0e(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Yi,"");return n&&(e.l+=24),s}function r0e(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var a=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(a>>1,"utf16le").replace(Yi,"");return r+i}function n0e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return t0e(e);case"0303000000000000c000000000000046":return r0e(e);default:throw new Error("Unsupported Moniker "+r)}}function mb(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Yi,""):"";return r}function eM(e,t){t||(t=bt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function s0e(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var a,i,o,l,u="",d,f;s&16&&(a=mb(e,r-e.l)),s&128&&(i=mb(e,r-e.l)),(s&257)===257&&(o=mb(e,r-e.l)),(s&257)===1&&(l=n0e(e,r-e.l)),s&8&&(u=mb(e,r-e.l)),s&32&&(d=e.read_shift(16)),s&64&&(f=T6(e)),e.l=r;var g=i||o||l||"";g&&u&&(g+="#"+u),g||(g="#"+u),s&2&&g.charAt(0)=="/"&&g.charAt(1)!="/"&&(g="file://"+g);var p={Target:g};return d&&(p.guid=d),f&&(p.time=f),a&&(p.Tooltip=a),p}function a0e(e){var t=bt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),a=s>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}t.write_shift(4,2),t.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(a==28)n=n.slice(1),eM(n,t);else if(a&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=s>-1?n.slice(0,s):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),a&8&&eM(s>-1?n.slice(s+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)t.write_shift(1,n.charCodeAt(r+3*l)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Kq(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function Xq(e,t){var r=Kq(e);return r[3]=0,r}function Qc(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function u0(e,t,r,n){return n||(n=bt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function i0e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function o0e(e,t,r){return t===0?"":T0(e,t,r)}function l0e(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),a=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[s,a,i]}function Yq(e){var t=e.read_shift(2),r=_6(e);return[t,r]}function c0e(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=F1(e,t,r),a=e.read_shift(2);if(n-=e.l,a!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return e.l+=a,s}function cS(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function Jq(e,t){return t||(t=bt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Qq(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var u0e=Qq;function Zq(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function d0e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function f0e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function pi(e){e.l+=2,e.l+=e.read_shift(2)}var h0e={0:pi,4:pi,5:pi,6:pi,7:f0e,8:pi,9:pi,10:pi,11:pi,12:pi,13:d0e,14:pi,15:pi,16:pi,17:pi,18:pi,19:pi,20:pi,21:Zq};function g0e(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(h0e[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function yb(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function C6(e,t,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=bt(s);return a.write_shift(2,n),a.write_shift(2,t),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function p0e(e,t){return t===0||e.read_shift(2),1200}function m0e(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=T0(e,0,r);return e.read_shift(t+n-e.l),s}function y0e(e,t){var r=!t||t.biff==8,n=bt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function x0e(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function v0e(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,a=e.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var i=F1(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:s,dt:a,name:i}}function w0e(e,t){var r=!t||t.biff>=8?2:1,n=bt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function b0e(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),a=[],i=0;i!=s&&e.l<r;++i)a.push(Qhe(e));return a.Count=n,a.Unique=s,a}function _0e(e,t){var r=bt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],s=0;s<e.length;++s)n[s]=Zhe(e[s]);var a=Ia([r].concat(n));return a.parts=[r.length].concat(n.map(function(i){return i.length})),a}function S0e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function k0e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function T0e(e){var t=i0e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function C0e(e){return e.read_shift(2),e.read_shift(4)}function tM(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var a={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[a,s]}function E0e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:a,CurTab:i,FirstTab:o,Selected:l,TabRatio:u}}function N0e(){var e=bt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function A0e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function j0e(e){var t=bt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function P0e(){}function O0e(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=F1(e,0,r),n}function F0e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,s=n?15+r.length:16+2*r.length,a=bt(s);return a.write_shift(2,e.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}function R0e(e){var t=Qc(e);return t.isst=e.read_shift(4),t}function D0e(e,t,r,n){var s=bt(10);return u0(e,t,n,s),s.write_shift(4,r),s}function I0e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=Qc(e);r.biff==2&&e.l++;var a=R1(e,n-e.l,r);return s.val=a,s}function M0e(e,t,r,n,s){var a=!s||s.biff==8,i=bt(8+ +a+(1+a)*r.length);return u0(e,t,n,i),i.write_shift(2,r.length),a&&i.write_shift(1,1),i.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),i}function L0e(e,t,r){var n=e.read_shift(2),s=T0(e,0,r);return[n,s]}function B0e(e,t,r,n){var s=r&&r.biff==5;n||(n=bt(s?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(s?1:2,t.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}var $0e=T0;function rM(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,a=e.read_shift(s),i=e.read_shift(s),o=e.read_shift(2),l=e.read_shift(2);return e.l=n,{s:{r:a,c:o},e:{r:i,c:l}}}function U0e(e,t){var r=t.biff==8||!t.biff?4:2,n=bt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function W0e(e){var t=e.read_shift(2),r=e.read_shift(2),n=Yq(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function z0e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),a=[];e.l<r;)a.push(Yq(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:i,rkrec:a}}function H0e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),a=[];e.l<r;)a.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:i,ixfe:a}}function G0e(e,t,r,n){var s={},a=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return s.patternType=The[o>>26],n.cellStyles&&(s.alc=a&7,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=i&15,s.dgRight=i>>4&15,s.dgTop=i>>8&15,s.dgBottom=i>>12&15,s.icvLeft=i>>16&127,s.icvRight=i>>23&127,s.grbitDiag=i>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function V0e(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=G0e(e,t,n.fStyle,r),n}function nM(e,t,r,n){var s=r&&r.biff==5;n||(n=bt(s?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var a=0;return e.numFmtId>0&&s&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function q0e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function K0e(e){var t=bt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function sM(e,t,r){var n=Qc(e);(r.biff==2||t==9)&&++e.l;var s=Jhe(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function X0e(e,t,r,n,s,a){var i=bt(8);return u0(e,t,n,i),Vq(r,a,i),i}function Y0e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Qc(e),s=Si(e);return n.val=s,n}function J0e(e,t,r,n){var s=bt(14);return u0(e,t,n,s),l0(r,s),s}var aM=o0e;function Q0e(e,t,r){var n=e.l+t,s=e.read_shift(2),a=e.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var i=c0(e,a),o=[];n>e.l;)o.push(R1(e));return[a,s,i,o]}function iM(e,t,r){var n=e.read_shift(2),s,a={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=c0e(e,t-2,r)),a.body=s||e.read_shift(t-2),typeof s=="string"&&(a.Name=s),a}var Z0e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function oM(e,t,r){var n=e.l+t,s=e.read_shift(2),a=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),l=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=c0(e,i,r);s&32&&(u=Z0e[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:gxe(e,d,r,o);return{chKey:a,Name:u,itab:l,rgce:f}}function eK(e,t,r){if(r.biff<8)return ege(e,t,r);for(var n=[],s=e.l+t,a=e.read_shift(r.biff>8?4:2);a--!==0;)n.push(l0e(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function ege(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=F1(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function tge(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),a=c0(e,n,r),i=c0(e,s,r);return[a,i]}function rge(e,t,r){var n=Qq(e);e.l++;var s=e.read_shift(1);return t-=8,[pxe(e,t,r),s,n]}function lM(e,t,r){var n=u0e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,fxe(e,t,r)]}function nge(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function sge(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=T0(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},o,i,a]}}function age(e,t,r){return sge(e,t,r)}function ige(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(cS(e));return r}function oge(e){var t=bt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)Jq(e[r],t);return t}function lge(e,t,r){if(r&&r.biff<8)return uge(e,t,r);var n=Zq(e),s=g0e(e,t-22,n[1]);return{cmo:n,ft:s}}var cge={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function uge(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((cge[n]||Ai)(e,t,r)),{cmo:[s,n,a],ft:i}}function dge(e,t,r){var n=e.l,s="";try{e.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(a)==-1?e.l+=6:i=e0e(e,6,r);var o=e.read_shift(2);e.read_shift(2),ra(e,2);var l=e.read_shift(2);e.l+=l;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=c0(e,e.lens[u+1]-e.lens[u]-1);if(s+=f,s.length>=(d?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function fge(e,t){var r=cS(e);e.l+=16;var n=s0e(e,t-24);return[r,n]}function hge(e){var t=bt(24),r=ws(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(n[s],16));return Ia([t,a0e(e[1])])}function gge(e,t){e.read_shift(2);var r=cS(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Yi,""),[r,n]}function pge(e){var t=e[1].Tooltip,r=bt(10+2*(t.length+1));r.write_shift(2,2048);var n=ws(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function mge(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=VI[r]||r,r=e.read_shift(2),t[1]=VI[r]||r,t}function yge(e){return e||(e=bt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function xge(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Xq(e));return r}function vge(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Xq(e));return r}function wge(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function tK(e,t,r){if(!r.cellStyles)return Ai(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),a=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2);n==2&&(e.l+=2);var u={s,e:a,w:i,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(u.level=l>>8&7),u}function bge(e,t){var r=bt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function _ge(e,t){var r={};return t<32||(e.l+=16,r.header=Si(e),r.footer=Si(e),e.l+=2),r}function Sge(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}function kge(e){for(var t=bt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var Tge=Qc,Cge=Gq,Ege=R1;function Nge(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function Age(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Qc(e);++e.l;var s=T0(e,t-7,r);return n.t="str",n.val=s,n}function jge(e){var t=Qc(e);++e.l;var r=Si(e);return t.t="n",t.val=r,t}function Pge(e,t,r){var n=bt(15);return L1(n,e,t),n.write_shift(8,r,"f"),n}function Oge(e){var t=Qc(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function Fge(e,t,r){var n=bt(9);return L1(n,e,t),n.write_shift(2,r),n}function Rge(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Dge(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Ige(e,t,r){var n=e.l+t,s=Qc(e),a=e.read_shift(2),i=c0(e,a,r);return e.l=n,s.t="str",s.val=i,s}var Mge=[2,3,48,49,131,139,140,245],XA=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=iS({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var u=[],d=_f(1);switch(l.type){case"base64":d=Fo(Mo(o));break;case"binary":d=Fo(o);break;case"buffer":case"array":d=o;break}ri(d,0);var f=d.read_shift(1),g=!!(f&136),p=!1,x=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,g=!0;break;case 49:p=!0,g=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var y=0,v=521;f==2&&(y=d.read_shift(2)),d.l+=3,f!=2&&(y=d.read_shift(4)),y>1048576&&(y=1e6),f!=2&&(v=d.read_shift(2));var T=d.read_shift(2),_=l.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(_=e[d[d.l]]),d.l+=1,d.l+=2),x&&(d.l+=36);for(var b=[],E={},k=Math.min(d.length,f==2?521:v-10-(p?264:0)),A=x?32:11;d.l<k&&d[d.l]!=13;)switch(E={},E.name=pv.utils.decode(_,d.slice(d.l,d.l+A)).replace(/[\u0000\r\n].*$/g,""),d.l+=A,E.type=String.fromCharCode(d.read_shift(1)),f!=2&&!x&&(E.offset=d.read_shift(4)),E.len=d.read_shift(1),f==2&&(E.offset=d.read_shift(2)),E.dec=d.read_shift(1),E.name.length&&b.push(E),f!=2&&(d.l+=x?13:14),E.type){case"B":(!p||E.len!=8)&&l.WTF&&console.log("Skipping "+E.name+":"+E.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+E.name+":"+E.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+E.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var P=0,j=0;for(u[0]=[],j=0;j!=b.length;++j)u[0][j]=b[j].name;for(;y-- >0;){if(d[d.l]===42){d.l+=T;continue}for(++d.l,u[++P]=[],j=0,j=0;j!=b.length;++j){var O=d.slice(d.l,d.l+b[j].len);d.l+=b[j].len,ri(O,0);var R=pv.utils.decode(_,O);switch(b[j].type){case"C":R.trim().length&&(u[P][j]=R.replace(/\s+$/,""));break;case"D":R.length===8?u[P][j]=new Date(+R.slice(0,4),+R.slice(4,6)-1,+R.slice(6,8)):u[P][j]=R;break;case"F":u[P][j]=parseFloat(R.trim());break;case"+":case"I":u[P][j]=x?O.read_shift(-4,"i")^2147483648:O.read_shift(4,"i");break;case"L":switch(R.trim().toUpperCase()){case"Y":case"T":u[P][j]=!0;break;case"N":case"F":u[P][j]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+R+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[P][j]="##MEMO##"+(x?parseInt(R.trim(),10):O.read_shift(4));break;case"N":R=R.replace(/\u0000/g,"").trim(),R&&R!="."&&(u[P][j]=+R||0);break;case"@":u[P][j]=new Date(O.read_shift(-8,"f")-621356832e5);break;case"T":u[P][j]=new Date((O.read_shift(4)-2440588)*864e5+O.read_shift(4));break;case"Y":u[P][j]=O.read_shift(4,"i")/1e4+O.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[P][j]=-O.read_shift(-8,"f");break;case"B":if(p&&b[j].len==8){u[P][j]=O.read_shift(8,"f");break}case"G":case"P":O.l+=b[j].len;break;case"0":if(b[j].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[j].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=b,u}function n(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var d=gm(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function s(o,l){try{return Rf(n(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var u=l||{};if(+u.codepage>=0&&Xl(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=po(),f=O_(o,{header:1,raw:!0,cellDates:!0}),g=f[0],p=f.slice(1),x=o["!cols"]||[],y=0,v=0,T=0,_=1;for(y=0;y<g.length;++y){if(((x[y]||{}).DBF||{}).name){g[y]=x[y].DBF.name,++T;continue}if(g[y]!=null){if(++T,typeof g[y]=="number"&&(g[y]=g[y].toString(10)),typeof g[y]!="string")throw new Error("DBF Invalid column name "+g[y]+" |"+typeof g[y]+"|");if(g.indexOf(g[y])!==y){for(v=0;v<1024;++v)if(g.indexOf(g[y]+"_"+v)==-1){g[y]+="_"+v;break}}}}var b=gn(o["!ref"]),E=[],k=[],A=[];for(y=0;y<=b.e.c-b.s.c;++y){var P="",j="",O=0,R=[];for(v=0;v<p.length;++v)p[v][y]!=null&&R.push(p[v][y]);if(R.length==0||g[y]==null){E[y]="?";continue}for(v=0;v<R.length;++v){switch(typeof R[v]){case"number":j="B";break;case"string":j="C";break;case"boolean":j="L";break;case"object":j=R[v]instanceof Date?"D":"C";break;default:j="C"}O=Math.max(O,String(R[v]).length),P=P&&P!=j?"C":j}O>250&&(O=250),j=((x[y]||{}).DBF||{}).type,j=="C"&&x[y].DBF.len>O&&(O=x[y].DBF.len),P=="B"&&j=="N"&&(P="N",A[y]=x[y].DBF.dec,O=x[y].DBF.len),k[y]=P=="C"||j=="N"?O:a[P]||0,_+=k[y],E[y]=P}var M=d.next(32);for(M.write_shift(4,318902576),M.write_shift(4,p.length),M.write_shift(2,296+32*T),M.write_shift(2,_),y=0;y<4;++y)M.write_shift(4,0);for(M.write_shift(4,0|(+t[HV]||3)<<8),y=0,v=0;y<g.length;++y)if(g[y]!=null){var G=d.next(32),K=(g[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);G.write_shift(1,K,"sbcs"),G.write_shift(1,E[y]=="?"?"C":E[y],"sbcs"),G.write_shift(4,v),G.write_shift(1,k[y]||a[E[y]]||0),G.write_shift(1,A[y]||0),G.write_shift(1,2),G.write_shift(4,0),G.write_shift(1,0),G.write_shift(4,0),G.write_shift(4,0),v+=k[y]||a[E[y]]||0}var re=d.next(264);for(re.write_shift(4,13),y=0;y<65;++y)re.write_shift(4,0);for(y=0;y<p.length;++y){var Y=d.next(_);for(Y.write_shift(1,0),v=0;v<g.length;++v)if(g[v]!=null)switch(E[v]){case"L":Y.write_shift(1,p[y][v]==null?63:p[y][v]?84:70);break;case"B":Y.write_shift(8,p[y][v]||0,"f");break;case"N":var ee="0";for(typeof p[y][v]=="number"&&(ee=p[y][v].toFixed(A[v]||0)),T=0;T<k[v]-ee.length;++T)Y.write_shift(1,32);Y.write_shift(1,ee,"sbcs");break;case"D":p[y][v]?(Y.write_shift(4,("0000"+p[y][v].getFullYear()).slice(-4),"sbcs"),Y.write_shift(2,("00"+(p[y][v].getMonth()+1)).slice(-2),"sbcs"),Y.write_shift(2,("00"+p[y][v].getDate()).slice(-2),"sbcs")):Y.write_shift(8,"00000000","sbcs");break;case"C":var B=String(p[y][v]!=null?p[y][v]:"").slice(0,k[v]);for(Y.write_shift(1,B,"sbcs"),T=0;T<k[v]-B.length;++T)Y.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:n,from_sheet:i}})(),rK=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Rs(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(g,p){var x=e[p];return typeof x=="number"?vI(x):x},n=function(g,p,x){var y=p.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return y==59?g:vI(y)};e["|"]=254;function s(g,p){switch(p.type){case"base64":return a(Mo(g),p);case"binary":return a(g,p);case"buffer":return a(Qr&&Buffer.isBuffer(g)?g.toString("binary"):Ff(g),p);case"array":return a(o0(g),p)}throw new Error("Unrecognized type "+p.type)}function a(g,p){var x=g.split(/[\n\r]+/),y=-1,v=-1,T=0,_=0,b=[],E=[],k=null,A={},P=[],j=[],O=[],R=0,M;for(+p.codepage>=0&&Xl(+p.codepage);T!==x.length;++T){R=0;var G=x[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),K=G.replace(/;;/g,"\0").split(";").map(function(Q){return Q.replace(/\u0000/g,";")}),re=K[0],Y;if(G.length>0)switch(re){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":K[1].charAt(0)=="P"&&E.push(G.slice(3).replace(/;;/g,";"));break;case"C":var ee=!1,B=!1,z=!1,I=!1,W=-1,V=-1;for(_=1;_<K.length;++_)switch(K[_].charAt(0)){case"A":break;case"X":v=parseInt(K[_].slice(1))-1,B=!0;break;case"Y":for(y=parseInt(K[_].slice(1))-1,B||(v=0),M=b.length;M<=y;++M)b[M]=[];break;case"K":Y=K[_].slice(1),Y.charAt(0)==='"'?Y=Y.slice(1,Y.length-1):Y==="TRUE"?Y=!0:Y==="FALSE"?Y=!1:isNaN(Zl(Y))?isNaN(kp(Y).getDate())||(Y=is(Y)):(Y=Zl(Y),k!==null&&fm(k)&&(Y=lS(Y))),ee=!0;break;case"E":I=!0;var L=cp(K[_].slice(1),{r:y,c:v});b[y][v]=[b[y][v],L];break;case"S":z=!0,b[y][v]=[b[y][v],"S5S"];break;case"G":break;case"R":W=parseInt(K[_].slice(1))-1;break;case"C":V=parseInt(K[_].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+G)}if(ee&&(b[y][v]&&b[y][v].length==2?b[y][v][0]=Y:b[y][v]=Y,k=null),z){if(I)throw new Error("SYLK shared formula cannot have own formula");var H=W>-1&&b[W][V];if(!H||!H[1])throw new Error("SYLK shared formula cannot find base");b[y][v][1]=wK(H[1],{r:y-W,c:v-V})}break;case"F":var J=0;for(_=1;_<K.length;++_)switch(K[_].charAt(0)){case"X":v=parseInt(K[_].slice(1))-1,++J;break;case"Y":for(y=parseInt(K[_].slice(1))-1,M=b.length;M<=y;++M)b[M]=[];break;case"M":R=parseInt(K[_].slice(1))/20;break;case"F":break;case"G":break;case"P":k=E[parseInt(K[_].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(O=K[_].slice(1).split(" "),M=parseInt(O[0],10);M<=parseInt(O[1],10);++M)R=parseInt(O[2],10),j[M-1]=R===0?{hidden:!0}:{wch:R},Sf(j[M-1]);break;case"C":v=parseInt(K[_].slice(1))-1,j[v]||(j[v]={});break;case"R":y=parseInt(K[_].slice(1))-1,P[y]||(P[y]={}),R>0?(P[y].hpt=R,P[y].hpx=Cp(R)):R===0&&(P[y].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+G)}J<1&&(k=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+G)}}return P.length>0&&(A["!rows"]=P),j.length>0&&(A["!cols"]=j),p&&p.sheetRows&&(b=b.slice(0,p.sheetRows)),[b,A]}function i(g,p){var x=s(g,p),y=x[0],v=x[1],T=gm(y,p);return Rs(v).forEach(function(_){T[_]=v[_]}),T}function o(g,p){return Rf(i(g,p),p)}function l(g,p,x,y){var v="C;Y"+(x+1)+";X"+(y+1)+";K";switch(g.t){case"n":v+=g.v||0,g.f&&!g.F&&(v+=";E"+O6(g.f,{r:x,c:y}));break;case"b":v+=g.v?"TRUE":"FALSE";break;case"e":v+=g.w||g.v;break;case"d":v+='"'+(g.w||g.v)+'"';break;case"s":v+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(g,p){p.forEach(function(x,y){var v="F;W"+(y+1)+" "+(y+1)+" ";x.hidden?v+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=Sv(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=kv(x.wpx)),typeof x.wch=="number"&&(v+=Math.round(x.wch))),v.charAt(v.length-1)!=" "&&g.push(v)})}function d(g,p){p.forEach(function(x,y){var v="F;";x.hidden?v+="M0;":x.hpt?v+="M"+20*x.hpt+";":x.hpx&&(v+="M"+20*Tv(x.hpx)+";"),v.length>2&&g.push(v+"R"+(y+1))})}function f(g,p){var x=["ID;PWXL;N;E"],y=[],v=gn(g["!ref"]),T,_=Array.isArray(g),b=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),g["!cols"]&&u(x,g["!cols"]),g["!rows"]&&d(x,g["!rows"]),x.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var E=v.s.r;E<=v.e.r;++E)for(var k=v.s.c;k<=v.e.c;++k){var A=Pr({r:E,c:k});T=_?(g[E]||[])[k]:g[A],!(!T||T.v==null&&(!T.f||T.F))&&y.push(l(T,g,E,k))}return x.join(b)+b+y.join(b)+b+"E"+b}return{to_workbook:o,to_sheet:i,from_sheet:f}})(),nK=(function(){function e(a,i){switch(i.type){case"base64":return t(Mo(a),i);case"binary":return t(a,i);case"buffer":return t(Qr&&Buffer.isBuffer(a)?a.toString("binary"):Ff(a),i);case"array":return t(o0(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){for(var o=a.split(`
`),l=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++l]=[],u=0;continue}if(!(l<0)){var g=o[d].trim().split(","),p=g[0],x=g[1];++d;for(var y=o[d]||"";(y.match(/["]/g)||[]).length&1&&d<o.length-1;)y+=`
`+o[++d];switch(y=y.trim(),+p){case-1:if(y==="BOT"){f[++l]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?f[l][u]=!0:y==="FALSE"?f[l][u]=!1:isNaN(Zl(x))?isNaN(kp(x).getDate())?f[l][u]=x:f[l][u]=is(x):f[l][u]=Zl(x),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),f[l][u++]=y!==""?y:null;break}if(y==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(a,i){return gm(e(a,i),i)}function n(a,i){return Rf(r(a,i),i)}var s=(function(){var a=function(l,u,d,f,g){l.push(u),l.push(d+","+f),l.push('"'+g.replace(/"/g,'""')+'"')},i=function(l,u,d,f){l.push(u+","+d),l.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var u=[],d=gn(l["!ref"]),f,g=Array.isArray(l);a(u,"TABLE",0,1,"sheetjs"),a(u,"VECTORS",0,d.e.r-d.s.r+1,""),a(u,"TUPLES",0,d.e.c-d.s.c+1,""),a(u,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){i(u,-1,0,"BOT");for(var x=d.s.c;x<=d.e.c;++x){var y=Pr({r:p,c:x});if(f=g?(l[p]||[])[x]:l[y],!f){i(u,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,v,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=wl(f.z||Ar[14],_a(is(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var T=`\r
`,_=u.join(T);return _}})();return{to_workbook:n,to_sheet:r,from_sheet:s}})(),sK=(function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,g){for(var p=f.split(`
`),x=-1,y=-1,v=0,T=[];v!==p.length;++v){var _=p[v].trim().split(":");if(_[0]==="cell"){var b=ws(_[1]);if(T.length<=b.r)for(x=T.length;x<=b.r;++x)T[x]||(T[x]=[]);switch(x=b.r,y=b.c,_[2]){case"t":T[x][y]=e(_[3]);break;case"v":T[x][y]=+_[3];break;case"vtf":var E=_[_.length-1];case"vtc":switch(_[3]){case"nl":T[x][y]=!!+_[4];break;default:T[x][y]=+_[4];break}_[2]=="vtf"&&(T[x][y]=[T[x][y],E])}}}return g&&g.sheetRows&&(T=T.slice(0,g.sheetRows)),T}function n(f,g){return gm(r(f,g),g)}function s(f,g){return Rf(n(f,g),g)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var g=[],p=[],x,y="",v=mo(f["!ref"]),T=Array.isArray(f),_=v.s.r;_<=v.e.r;++_)for(var b=v.s.c;b<=v.e.c;++b)if(y=Pr({r:_,c:b}),x=T?(f[_]||[])[b]:f[y],!(!x||x.v==null||x.t==="z")){switch(p=["cell",y,"t"],x.t){case"s":case"str":p.push(t(x.v));break;case"n":x.f?(p[2]="vtf",p[3]="n",p[4]=x.v,p[5]=t(x.f)):(p[2]="v",p[3]=x.v);break;case"b":p[2]="vt"+(x.f?"f":"c"),p[3]="nl",p[4]=x.v?"1":"0",p[5]=t(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var E=_a(is(x.v));p[2]="vtc",p[3]="nd",p[4]=""+E,p[5]=x.w||wl(x.z||Ar[14],E);break;case"e":continue}g.push(p.join(":"))}return g.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function d(f){return[a,i,o,i,u(f),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:d}})(),Tp=(function(){function e(d,f,g,p,x){x.raw?f[g][p]=d:d===""||(d==="TRUE"?f[g][p]=!0:d==="FALSE"?f[g][p]=!1:isNaN(Zl(d))?isNaN(kp(d).getDate())?f[g][p]=d:f[g][p]=is(d):f[g][p]=Zl(d))}function t(d,f){var g=f||{},p=[];if(!d||d.length===0)return p;for(var x=d.split(/[\r\n]/),y=x.length-1;y>=0&&x[y].length===0;)--y;for(var v=10,T=0,_=0;_<=y;++_)T=x[_].indexOf(" "),T==-1?T=x[_].length:T++,v=Math.max(v,T);for(_=0;_<=y;++_){p[_]=[];var b=0;for(e(x[_].slice(0,v).trim(),p,_,b,g),b=1;b<=(x[_].length-v)/10+1;++b)e(x[_].slice(v+(b-1)*10,v+b*10).trim(),p,_,b,g)}return g.sheetRows&&(p=p.slice(0,g.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(d){for(var f={},g=!1,p=0,x=0;p<d.length;++p)(x=d.charCodeAt(p))==34?g=!g:!g&&x in r&&(f[x]=(f[x]||0)+1);x=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&x.push([f[p],p]);if(!x.length){f=n;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&x.push([f[p],p])}return x.sort(function(y,v){return y[0]-v[0]||n[y[1]]-n[v[1]]}),r[x.pop()[1]]||44}function a(d,f){var g=f||{},p="",x=g.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=s(d.slice(0,1024)):g&&g.FS?p=g.FS:p=s(d.slice(0,1024));var v=0,T=0,_=0,b=0,E=0,k=p.charCodeAt(0),A=!1,P=0,j=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var O=g.dateNF!=null?Sfe(g.dateNF):null;function R(){var M=d.slice(b,E),G={};if(M.charAt(0)=='"'&&M.charAt(M.length-1)=='"'&&(M=M.slice(1,-1).replace(/""/g,'"')),M.length===0)G.t="z";else if(g.raw)G.t="s",G.v=M;else if(M.trim().length===0)G.t="s",G.v=M;else if(M.charCodeAt(0)==61)M.charCodeAt(1)==34&&M.charCodeAt(M.length-1)==34?(G.t="s",G.v=M.slice(2,-1).replace(/""/g,'"')):Qme(M)?(G.t="n",G.f=M.slice(1)):(G.t="s",G.v=M);else if(M=="TRUE")G.t="b",G.v=!0;else if(M=="FALSE")G.t="b",G.v=!1;else if(!isNaN(_=Zl(M)))G.t="n",g.cellText!==!1&&(G.w=M),G.v=_;else if(!isNaN(kp(M).getDate())||O&&M.match(O)){G.z=g.dateNF||Ar[14];var K=0;O&&M.match(O)&&(M=kfe(M,g.dateNF,M.match(O)||[]),K=1),g.cellDates?(G.t="d",G.v=is(M,K)):(G.t="n",G.v=_a(is(M,K))),g.cellText!==!1&&(G.w=wl(G.z,G.v instanceof Date?_a(G.v):G.v)),g.cellNF||delete G.z}else G.t="s",G.v=M;if(G.t=="z"||(g.dense?(x[v]||(x[v]=[]),x[v][T]=G):x[Pr({c:T,r:v})]=G),b=E+1,j=d.charCodeAt(b),y.e.c<T&&(y.e.c=T),y.e.r<v&&(y.e.r=v),P==k)++T;else if(T=0,++v,g.sheetRows&&g.sheetRows<=v)return!0}e:for(;E<d.length;++E)switch(P=d.charCodeAt(E)){case 34:j===34&&(A=!A);break;case k:case 10:case 13:if(!A&&R())break e;break}return E-b>0&&R(),x["!ref"]=Kr(y),x}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,f):gm(t(d,f),f)}function o(d,f){var g="",p=f.type=="string"?[0,0,0,0]:$6(d,f);switch(f.type){case"base64":g=Mo(d);break;case"binary":g=d;break;case"buffer":f.codepage==65001?g=d.toString("utf8"):f.codepage&&typeof pv<"u"||(g=Qr&&Buffer.isBuffer(d)?d.toString("binary"):Ff(d));break;case"array":g=o0(d);break;case"string":g=d;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?g=Wn(g.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?g=Wn(g):f.type=="binary"&&typeof pv<"u",g.slice(0,19)=="socialcalc:version:"?sK.to_sheet(f.type=="string"?g:Wn(g),f):i(g,f)}function l(d,f){return Rf(o(d,f),f)}function u(d){for(var f=[],g=gn(d["!ref"]),p,x=Array.isArray(d),y=g.s.r;y<=g.e.r;++y){for(var v=[],T=g.s.c;T<=g.e.c;++T){var _=Pr({r:y,c:T});if(p=x?(d[y]||[])[T]:d[_],!p||p.v==null){v.push("          ");continue}for(var b=(p.w||(Ju(p),p.w)||"").slice(0,10);b.length<10;)b+=" ";v.push(b+(T===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}})();function Lge(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=rK.to_workbook(e,r);return r.WTF=n,s}catch(a){if(r.WTF=n,!a.message.match(/SYLK bad record ID/)&&n)throw a;return Tp.to_workbook(e,t)}}var Wh=(function(){function e(L,H,J){if(L){ri(L,L.l||0);for(var Q=J.Enum||W;L.l<L.length;){var ne=L.read_shift(2),Z=Q[ne]||Q[65535],se=L.read_shift(2),ce=L.l+se,he=Z.f&&Z.f(L,se,J);if(L.l=ce,H(he,Z,ne))return}}}function t(L,H){switch(H.type){case"base64":return r(Fo(Mo(L)),H);case"binary":return r(Fo(L),H);case"buffer":case"array":return r(L,H)}throw"Unsupported type "+H.type}function r(L,H){if(!L)return L;var J=H||{},Q=J.dense?[]:{},ne="Sheet1",Z="",se=0,ce={},he=[],Ee=[],ie={s:{r:0,c:0},e:{r:0,c:0}},me=J.sheetRows||0;if(L[2]==0&&(L[3]==8||L[3]==9)&&L.length>=16&&L[14]==5&&L[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(L[2]==2)J.Enum=W,e(L,function(ze,Nt,et){switch(et){case 0:J.vers=ze,ze>=4096&&(J.qpro=!0);break;case 6:ie=ze;break;case 204:ze&&(Z=ze);break;case 222:Z=ze;break;case 15:case 51:J.qpro||(ze[1].v=ze[1].v.slice(1));case 13:case 14:case 16:et==14&&(ze[2]&112)==112&&(ze[2]&15)>1&&(ze[2]&15)<15&&(ze[1].z=J.dateNF||Ar[14],J.cellDates&&(ze[1].t="d",ze[1].v=lS(ze[1].v))),J.qpro&&ze[3]>se&&(Q["!ref"]=Kr(ie),ce[ne]=Q,he.push(ne),Q=J.dense?[]:{},ie={s:{r:0,c:0},e:{r:0,c:0}},se=ze[3],ne=Z||"Sheet"+(se+1),Z="");var Me=J.dense?(Q[ze[0].r]||[])[ze[0].c]:Q[Pr(ze[0])];if(Me){Me.t=ze[1].t,Me.v=ze[1].v,ze[1].z!=null&&(Me.z=ze[1].z),ze[1].f!=null&&(Me.f=ze[1].f);break}J.dense?(Q[ze[0].r]||(Q[ze[0].r]=[]),Q[ze[0].r][ze[0].c]=ze[1]):Q[Pr(ze[0])]=ze[1];break}},J);else if(L[2]==26||L[2]==14)J.Enum=V,L[2]==14&&(J.qpro=!0,L.l=0),e(L,function(ze,Nt,et){switch(et){case 204:ne=ze;break;case 22:ze[1].v=ze[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ze[3]>se&&(Q["!ref"]=Kr(ie),ce[ne]=Q,he.push(ne),Q=J.dense?[]:{},ie={s:{r:0,c:0},e:{r:0,c:0}},se=ze[3],ne="Sheet"+(se+1)),me>0&&ze[0].r>=me)break;J.dense?(Q[ze[0].r]||(Q[ze[0].r]=[]),Q[ze[0].r][ze[0].c]=ze[1]):Q[Pr(ze[0])]=ze[1],ie.e.c<ze[0].c&&(ie.e.c=ze[0].c),ie.e.r<ze[0].r&&(ie.e.r=ze[0].r);break;case 27:ze[14e3]&&(Ee[ze[14e3][0]]=ze[14e3][1]);break;case 1537:Ee[ze[0]]=ze[1],ze[0]==se&&(ne=ze[1]);break}},J);else throw new Error("Unrecognized LOTUS BOF "+L[2]);if(Q["!ref"]=Kr(ie),ce[Z||ne]=Q,he.push(Z||ne),!Ee.length)return{SheetNames:he,Sheets:ce};for(var Ne={},Oe=[],Re=0;Re<Ee.length;++Re)ce[he[Re]]?(Oe.push(Ee[Re]||he[Re]),Ne[Ee[Re]]=ce[Ee[Re]]||ce[he[Re]]):(Oe.push(Ee[Re]),Ne[Ee[Re]]={"!ref":"A1"});return{SheetNames:Oe,Sheets:Ne}}function n(L,H){var J=H||{};if(+J.codepage>=0&&Xl(+J.codepage),J.type=="string")throw new Error("Cannot write WK1 to JS string");var Q=po(),ne=gn(L["!ref"]),Z=Array.isArray(L),se=[];Kt(Q,0,a(1030)),Kt(Q,6,l(ne));for(var ce=Math.min(ne.e.r,8191),he=ne.s.r;he<=ce;++he)for(var Ee=Vs(he),ie=ne.s.c;ie<=ne.e.c;++ie){he===ne.s.r&&(se[ie]=vs(ie));var me=se[ie]+Ee,Ne=Z?(L[he]||[])[ie]:L[me];if(!(!Ne||Ne.t=="z"))if(Ne.t=="n")(Ne.v|0)==Ne.v&&Ne.v>=-32768&&Ne.v<=32767?Kt(Q,13,p(he,ie,Ne.v)):Kt(Q,14,y(he,ie,Ne.v));else{var Oe=Ju(Ne);Kt(Q,15,f(he,ie,Oe.slice(0,239)))}}return Kt(Q,1),Q.end()}function s(L,H){var J=H||{};if(+J.codepage>=0&&Xl(+J.codepage),J.type=="string")throw new Error("Cannot write WK3 to JS string");var Q=po();Kt(Q,0,i(L));for(var ne=0,Z=0;ne<L.SheetNames.length;++ne)(L.Sheets[L.SheetNames[ne]]||{})["!ref"]&&Kt(Q,27,I(L.SheetNames[ne],Z++));var se=0;for(ne=0;ne<L.SheetNames.length;++ne){var ce=L.Sheets[L.SheetNames[ne]];if(!(!ce||!ce["!ref"])){for(var he=gn(ce["!ref"]),Ee=Array.isArray(ce),ie=[],me=Math.min(he.e.r,8191),Ne=he.s.r;Ne<=me;++Ne)for(var Oe=Vs(Ne),Re=he.s.c;Re<=he.e.c;++Re){Ne===he.s.r&&(ie[Re]=vs(Re));var ze=ie[Re]+Oe,Nt=Ee?(ce[Ne]||[])[Re]:ce[ze];if(!(!Nt||Nt.t=="z"))if(Nt.t=="n")Kt(Q,23,R(Ne,Re,se,Nt.v));else{var et=Ju(Nt);Kt(Q,22,P(Ne,Re,se,et.slice(0,239)))}}++se}}return Kt(Q,1),Q.end()}function a(L){var H=bt(2);return H.write_shift(2,L),H}function i(L){var H=bt(26);H.write_shift(2,4096),H.write_shift(2,4),H.write_shift(4,0);for(var J=0,Q=0,ne=0,Z=0;Z<L.SheetNames.length;++Z){var se=L.SheetNames[Z],ce=L.Sheets[se];if(!(!ce||!ce["!ref"])){++ne;var he=mo(ce["!ref"]);J<he.e.r&&(J=he.e.r),Q<he.e.c&&(Q=he.e.c)}}return J>8191&&(J=8191),H.write_shift(2,J),H.write_shift(1,ne),H.write_shift(1,Q),H.write_shift(2,0),H.write_shift(2,0),H.write_shift(1,1),H.write_shift(1,2),H.write_shift(4,0),H.write_shift(4,0),H}function o(L,H,J){var Q={s:{c:0,r:0},e:{c:0,r:0}};return H==8&&J.qpro?(Q.s.c=L.read_shift(1),L.l++,Q.s.r=L.read_shift(2),Q.e.c=L.read_shift(1),L.l++,Q.e.r=L.read_shift(2),Q):(Q.s.c=L.read_shift(2),Q.s.r=L.read_shift(2),H==12&&J.qpro&&(L.l+=2),Q.e.c=L.read_shift(2),Q.e.r=L.read_shift(2),H==12&&J.qpro&&(L.l+=2),Q.s.c==65535&&(Q.s.c=Q.e.c=Q.s.r=Q.e.r=0),Q)}function l(L){var H=bt(8);return H.write_shift(2,L.s.c),H.write_shift(2,L.s.r),H.write_shift(2,L.e.c),H.write_shift(2,L.e.r),H}function u(L,H,J){var Q=[{c:0,r:0},{t:"n",v:0},0,0];return J.qpro&&J.vers!=20768?(Q[0].c=L.read_shift(1),Q[3]=L.read_shift(1),Q[0].r=L.read_shift(2),L.l+=2):(Q[2]=L.read_shift(1),Q[0].c=L.read_shift(2),Q[0].r=L.read_shift(2)),Q}function d(L,H,J){var Q=L.l+H,ne=u(L,H,J);if(ne[1].t="s",J.vers==20768){L.l++;var Z=L.read_shift(1);return ne[1].v=L.read_shift(Z,"utf8"),ne}return J.qpro&&L.l++,ne[1].v=L.read_shift(Q-L.l,"cstr"),ne}function f(L,H,J){var Q=bt(7+J.length);Q.write_shift(1,255),Q.write_shift(2,H),Q.write_shift(2,L),Q.write_shift(1,39);for(var ne=0;ne<Q.length;++ne){var Z=J.charCodeAt(ne);Q.write_shift(1,Z>=128?95:Z)}return Q.write_shift(1,0),Q}function g(L,H,J){var Q=u(L,H,J);return Q[1].v=L.read_shift(2,"i"),Q}function p(L,H,J){var Q=bt(7);return Q.write_shift(1,255),Q.write_shift(2,H),Q.write_shift(2,L),Q.write_shift(2,J,"i"),Q}function x(L,H,J){var Q=u(L,H,J);return Q[1].v=L.read_shift(8,"f"),Q}function y(L,H,J){var Q=bt(13);return Q.write_shift(1,255),Q.write_shift(2,H),Q.write_shift(2,L),Q.write_shift(8,J,"f"),Q}function v(L,H,J){var Q=L.l+H,ne=u(L,H,J);if(ne[1].v=L.read_shift(8,"f"),J.qpro)L.l=Q;else{var Z=L.read_shift(2);E(L.slice(L.l,L.l+Z),ne),L.l+=Z}return ne}function T(L,H,J){var Q=H&32768;return H&=-32769,H=(Q?L:0)+(H>=8192?H-16384:H),(Q?"":"$")+(J?vs(H):Vs(H))}var _={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function E(L,H){ri(L,0);for(var J=[],Q=0,ne="",Z="",se="",ce="";L.l<L.length;){var he=L[L.l++];switch(he){case 0:J.push(L.read_shift(8,"f"));break;case 1:Z=T(H[0].c,L.read_shift(2),!0),ne=T(H[0].r,L.read_shift(2),!1),J.push(Z+ne);break;case 2:{var Ee=T(H[0].c,L.read_shift(2),!0),ie=T(H[0].r,L.read_shift(2),!1);Z=T(H[0].c,L.read_shift(2),!0),ne=T(H[0].r,L.read_shift(2),!1),J.push(Ee+ie+":"+Z+ne)}break;case 3:if(L.l<L.length){console.error("WK1 premature formula end");return}break;case 4:J.push("("+J.pop()+")");break;case 5:J.push(L.read_shift(2));break;case 6:{for(var me="";he=L[L.l++];)me+=String.fromCharCode(he);J.push('"'+me.replace(/"/g,'""')+'"')}break;case 8:J.push("-"+J.pop());break;case 23:J.push("+"+J.pop());break;case 22:J.push("NOT("+J.pop()+")");break;case 20:case 21:ce=J.pop(),se=J.pop(),J.push(["AND","OR"][he-20]+"("+se+","+ce+")");break;default:if(he<32&&b[he])ce=J.pop(),se=J.pop(),J.push(se+b[he]+ce);else if(_[he]){if(Q=_[he][1],Q==69&&(Q=L[L.l++]),Q>J.length){console.error("WK1 bad formula parse 0x"+he.toString(16)+":|"+J.join("|")+"|");return}var Ne=J.slice(-Q);J.length-=Q,J.push(_[he][0]+"("+Ne.join(",")+")")}else return he<=7?console.error("WK1 invalid opcode "+he.toString(16)):he<=24?console.error("WK1 unsupported op "+he.toString(16)):he<=30?console.error("WK1 invalid opcode "+he.toString(16)):he<=115?console.error("WK1 unsupported function opcode "+he.toString(16)):console.error("WK1 unrecognized opcode "+he.toString(16))}}J.length==1?H[1].f=""+J[0]:console.error("WK1 bad formula parse |"+J.join("|")+"|")}function k(L){var H=[{c:0,r:0},{t:"n",v:0},0];return H[0].r=L.read_shift(2),H[3]=L[L.l++],H[0].c=L[L.l++],H}function A(L,H){var J=k(L);return J[1].t="s",J[1].v=L.read_shift(H-4,"cstr"),J}function P(L,H,J,Q){var ne=bt(6+Q.length);ne.write_shift(2,L),ne.write_shift(1,J),ne.write_shift(1,H),ne.write_shift(1,39);for(var Z=0;Z<Q.length;++Z){var se=Q.charCodeAt(Z);ne.write_shift(1,se>=128?95:se)}return ne.write_shift(1,0),ne}function j(L,H){var J=k(L);J[1].v=L.read_shift(2);var Q=J[1].v>>1;if(J[1].v&1)switch(Q&7){case 0:Q=(Q>>3)*5e3;break;case 1:Q=(Q>>3)*500;break;case 2:Q=(Q>>3)/20;break;case 3:Q=(Q>>3)/200;break;case 4:Q=(Q>>3)/2e3;break;case 5:Q=(Q>>3)/2e4;break;case 6:Q=(Q>>3)/16;break;case 7:Q=(Q>>3)/64;break}return J[1].v=Q,J}function O(L,H){var J=k(L),Q=L.read_shift(4),ne=L.read_shift(4),Z=L.read_shift(2);if(Z==65535)return Q===0&&ne===3221225472?(J[1].t="e",J[1].v=15):Q===0&&ne===3489660928?(J[1].t="e",J[1].v=42):J[1].v=0,J;var se=Z&32768;return Z=(Z&32767)-16446,J[1].v=(1-se*2)*(ne*Math.pow(2,Z+32)+Q*Math.pow(2,Z)),J}function R(L,H,J,Q){var ne=bt(14);if(ne.write_shift(2,L),ne.write_shift(1,J),ne.write_shift(1,H),Q==0)return ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(2,65535),ne;var Z=0,se=0,ce=0,he=0;return Q<0&&(Z=1,Q=-Q),se=Math.log2(Q)|0,Q/=Math.pow(2,se-31),he=Q>>>0,(he&2147483648)==0&&(Q/=2,++se,he=Q>>>0),Q-=he,he|=2147483648,he>>>=0,Q*=Math.pow(2,32),ce=Q>>>0,ne.write_shift(4,ce),ne.write_shift(4,he),se+=16383+(Z?32768:0),ne.write_shift(2,se),ne}function M(L,H){var J=O(L);return L.l+=H-14,J}function G(L,H){var J=k(L),Q=L.read_shift(4);return J[1].v=Q>>6,J}function K(L,H){var J=k(L),Q=L.read_shift(8,"f");return J[1].v=Q,J}function re(L,H){var J=K(L);return L.l+=H-10,J}function Y(L,H){return L[L.l+H-1]==0?L.read_shift(H,"cstr"):""}function ee(L,H){var J=L[L.l++];J>H-1&&(J=H-1);for(var Q="";Q.length<J;)Q+=String.fromCharCode(L[L.l++]);return Q}function B(L,H,J){if(!(!J.qpro||H<21)){var Q=L.read_shift(1);L.l+=17,L.l+=1,L.l+=2;var ne=L.read_shift(H-21,"cstr");return[Q,ne]}}function z(L,H){for(var J={},Q=L.l+H;L.l<Q;){var ne=L.read_shift(2);if(ne==14e3){for(J[ne]=[0,""],J[ne][0]=L.read_shift(2);L[L.l];)J[ne][1]+=String.fromCharCode(L[L.l]),L.l++;L.l++}}return J}function I(L,H){var J=bt(5+L.length);J.write_shift(2,14e3),J.write_shift(2,H);for(var Q=0;Q<L.length;++Q){var ne=L.charCodeAt(Q);J[J.l++]=ne>127?95:ne}return J[J.l++]=0,J}var W={0:{n:"BOF",f:ra},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Y},222:{n:"SHEETNAMELP",f:ee},65535:{n:""}},V={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:A},23:{n:"NUMBER17",f:O},24:{n:"NUMBER18",f:j},25:{n:"FORMULA19",f:M},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:z},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:G},38:{n:"??"},39:{n:"NUMBER27",f:K},40:{n:"FORMULA28",f:re},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Y},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:B},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}})();function Bge(e){var t={},r=e.match(ji),n=0,s=!1;if(r)for(;n!=r.length;++n){var a=Dr(r[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;t.cp=n6[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=a.val;break;case"<sz":t.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":a.rgb&&(t.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+a[0])}}return t}var $ge=(function(){var e=xv("t"),t=xv("rPr");function r(a){var i=a.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:fn(i[1])},l=a.match(t);return l&&(o.s=Bge(l[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(s).map(r).filter(function(o){return o.v})}})(),Uge=(function(){var t=/(\r\n|\n)/g;function r(s,a,i){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),s.b&&(a.push("<b>"),i.push("</b>")),s.i&&(a.push("<i>"),i.push("</i>")),s.strike&&(a.push("<s>"),i.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),s}function n(s){var a=[[],s.v,[]];return s.v?(s.s&&r(s.s,a[0],a[2]),a[0].join("")+a[1].replace(t,"<br/>")+a[2].join("")):""}return function(a){return a.map(n).join("")}})(),Wge=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,zge=/<(?:\w+:)?r>/,Hge=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function E6(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=fn(Wn(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Wn(e),r&&(n.h=h6(n.t))):e.match(zge)&&(n.r=Wn(e),n.t=fn(Wn((e.replace(Hge,"").match(Wge)||[]).join("").replace(ji,""))),r&&(n.h=Uge($ge(n.r)))),n):{t:""}}var Gge=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Vge=/<(?:\w+:)?(?:si|sstItem)>/g,qge=/<\/(?:\w+:)?(?:si|sstItem)>/;function Kge(e,t){var r=[],n="";if(!e)return r;var s=e.match(Gge);if(s){n=s[2].replace(Vge,"").split(qge);for(var a=0;a!=n.length;++a){var i=E6(n[a].trim(),t);i!=null&&(r[r.length]=i)}s=Dr(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var Xge=/^\s|\s$|[\t\n\r]/;function aK(e,t){if(!t.bookSST)return"";var r=[Ks];r[r.length]=Vt("sst",null,{xmlns:w0[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var s=e[n],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(Xge)&&(a+=' xml:space="preserve"'),a+=">"+Dn(s.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Yge(e){return[e.read_shift(4),e.read_shift(4)]}function Jge(e,t){var r=[],n=!1;return ad(e,function(a,i,o){switch(o){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Qge(e,t){return t||(t=bt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Zge=che;function epe(e){var t=po();jt(t,159,Qge(e));for(var r=0;r<e.length;++r)jt(t,19,Zge(e[r]));return jt(t,160),t.end()}function iK(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function zu(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function tpe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=zu(e,4),t.U=zu(e,4),t.W=zu(e,4),t}function rpe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),a=[];s-- >0;)a.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=a,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function npe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(rpe(e));return t}function spe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function ape(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=zu(e,4),t.U=zu(e,4),t.W=zu(e,4),t}function ipe(e){var t=ape(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function oK(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function lK(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function ope(e){var t=zu(e);switch(t.Minor){case 2:return[t.Minor,lpe(e)];case 3:return[t.Minor,cpe()];case 4:return[t.Minor,upe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function lpe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=oK(e,r),s=lK(e,e.length-e.l);return{t:"Std",h:n,v:s}}function cpe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function upe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(ji,function(a){var i=Dr(a);switch(Jc(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function dpe(e,t){var r={},n=r.EncryptionVersionInfo=zu(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=oK(e,s),t-=s,r.EncryptionVerifier=lK(e,t),r}function fpe(e){var t={},r=t.EncryptionVersionInfo=zu(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function N6(e){var t=0,r,n=iK(e),s=n.length+1,a,i,o,l,u;for(r=_f(s),r[0]=n.length,a=1;a!=s;++a)r[a]=n[a-1];for(a=s-1;a>=0;--a)i=r[a],o=(t&16384)===0?0:1,l=t<<1&32767,u=o|l,t=u^i;return t^52811}var cK=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},s=function(i,o){return n(i^o)},a=function(i){for(var o=t[i.length-1],l=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(o^=r[l]),d*=2,--l;return o};return function(i){for(var o=iK(i),l=a(o),u=o.length,d=_f(16),f=0;f!=16;++f)d[f]=0;var g,p,x;for((u&1)===1&&(g=l>>8,d[u]=s(e[0],g),--u,g=l&255,p=o[o.length-1],d[u]=s(p,g));u>0;)--u,g=l>>8,d[u]=s(o[u],g),--u,g=l&255,d[u]=s(o[u],g);for(u=15,x=15-o.length;x>0;)g=l>>8,d[u]=s(e[x],g),--u,--x,g=l&255,d[u]=s(o[u],g),--u,--x;return d}})(),hpe=function(e,t,r,n,s){s||(s=t),n||(n=cK(e));var a,i;for(a=0;a!=t.length;++a)i=t[a],i^=n[r],i=(i>>5|i<<3)&255,s[a]=i,++r;return[s,r,n]},gpe=function(e){var t=0,r=cK(e);return function(n){var s=hpe("",n,t,r);return t=s[1],s[0]}};function ppe(e,t,r,n){var s={key:ra(e),verificationBytes:ra(e)};return r.password&&(s.verifier=N6(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=gpe(r.password)),s}function mpe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=fpe(e):n.Data=dpe(e,t),n}function ype(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?mpe(e,t-2,n):ppe(e,r.biff>=8?t:t-2,r,n),n}var uK=(function(){function e(s,a){switch(a.type){case"base64":return t(Mo(s),a);case"binary":return t(s,a);case"buffer":return t(Qr&&Buffer.isBuffer(s)?s.toString("binary"):Ff(s),a);case"array":return t(o0(s),a)}throw new Error("Unrecognized type "+a.type)}function t(s,a){var i=a||{},o=i.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var g=/\\\w+\b/g,p=0,x,y=-1;x=g.exec(d);){switch(x[0]){case"\\cell":var v=d.slice(p,g.lastIndex-x[0].length);if(v[0]==" "&&(v=v.slice(1)),++y,v.length){var T={v,t:"s"};Array.isArray(o)?o[f][y]=T:o[Pr({r:f,c:y})]=T}break}p=g.lastIndex}y>u.e.c&&(u.e.c=y)}),o["!ref"]=Kr(u),o}function r(s,a){return Rf(e(s,a),a)}function n(s){for(var a=["{\\rtf1\\ansi"],i=gn(s["!ref"]),o,l=Array.isArray(s),u=i.s.r;u<=i.e.r;++u){a.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=Pr({r:u,c:d});o=l?(s[u]||[])[d]:s[f],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(Ju(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}})();function xpe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function _v(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function vpe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),a=Math.min(t,r,n),i=s-a;if(i===0)return[0,0,t];var o=0,l=0,u=s+a;switch(l=i/(u>1?2-u:u),s){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,l,u/2]}function wpe(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),a=n-s/2,i=[a,a,a],o=6*t,l;if(r!==0)switch(o|0){case 0:case 6:l=s*o,i[0]+=s,i[1]+=l;break;case 1:l=s*(2-o),i[0]+=l,i[1]+=s;break;case 2:l=s*(o-2),i[1]+=s,i[2]+=l;break;case 3:l=s*(4-o),i[1]+=l,i[2]+=s;break;case 4:l=s*(o-4),i[2]+=s,i[0]+=l;break;case 5:l=s*(6-o),i[2]+=l,i[0]+=s;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function j_(e,t){if(t===0)return e;var r=vpe(xpe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),_v(wpe(r))}var dK=6,bpe=15,_pe=1,wi=dK;function Sv(e){return Math.floor((e+Math.round(128/wi)/256)*wi)}function kv(e){return Math.floor((e-5)/wi*100+.5)/100}function P_(e){return Math.round((e*wi+5)/wi*256)/256}function ET(e){return P_(kv(Sv(e)))}function A6(e){var t=Math.abs(e-ET(e)),r=wi;if(t>.005)for(wi=_pe;wi<bpe;++wi)Math.abs(e-ET(e))<=t&&(t=Math.abs(e-ET(e)),r=wi);wi=r}function Sf(e){e.width?(e.wpx=Sv(e.width),e.wch=kv(e.wpx),e.MDW=wi):e.wpx?(e.wch=kv(e.wpx),e.width=P_(e.wch),e.MDW=wi):typeof e.wch=="number"&&(e.width=P_(e.wch),e.wpx=Sv(e.width),e.MDW=wi),e.customWidth&&delete e.customWidth}var Spe=96,fK=Spe;function Tv(e){return e*96/fK}function Cp(e){return e*fK/96}var kpe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Tpe(e,t,r,n){t.Borders=[];var s={},a=!1;(e[0].match(ji)||[]).forEach(function(i){var o=Dr(i);switch(Jc(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=ns(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=ns(o.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function Cpe(e,t,r,n){t.Fills=[];var s={},a=!1;(e[0].match(ji)||[]).forEach(function(i){var o=Dr(i);switch(Jc(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function Epe(e,t,r,n){t.Fonts=[];var s={},a=!1;(e[0].match(ji)||[]).forEach(function(i){var o=Dr(i);switch(Jc(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=Wn(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?ns(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?ns(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?ns(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?ns(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?ns(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?ns(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?ns(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=n6[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=ns(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=$h[s.color.index];s.color.index==81&&(l=$h[1]),l||(l=$h[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=j_(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function Npe(e,t,r){t.NumberFmt=[];for(var n=Rs(Ar),s=0;s<n.length;++s)t.NumberFmt[n[s]]=Ar[n[s]];var a=e[0].match(ji);if(a)for(s=0;s<a.length;++s){var i=Dr(a[s]);switch(Jc(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=fn(Wn(i.formatCode)),l=parseInt(i.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&t.NumberFmt[l]!=null;--l);t.NumberFmt[l]=o}Wu(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function Ape(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Vt("numFmt",null,{numFmtId:n,formatCode:Dn(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Vt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var xb=["numFmtId","fillId","fontId","borderId","xfId"],vb=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function jpe(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(ji)||[]).forEach(function(a){var i=Dr(a),o=0;switch(Jc(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<xb.length;++o)n[xb[o]]&&(n[xb[o]]=parseInt(n[xb[o]],10));for(o=0;o<vb.length;++o)n[vb[o]]&&(n[vb[o]]=ns(n[vb[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=ns(i.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function Ppe(e){var t=[];return t[t.length]=Vt("cellXfs",null),e.forEach(function(r){t[t.length]=Vt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Vt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Ope=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&Npe(f,d,u),(f=o.match(s))&&Epe(f,d,l,u),(f=o.match(n))&&Cpe(f,d,l,u),(f=o.match(a))&&Tpe(f,d,l,u),(f=o.match(r))&&jpe(f,d,u),d}})();function hK(e,t){var r=[Ks,Vt("styleSheet",null,{xmlns:w0[0],"xmlns:vt":va.vt})],n;return e.SSF&&(n=Ape(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Ppe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Fpe(e,t){var r=e.read_shift(2),n=Ei(e);return[r,n]}function Rpe(e,t,r){r||(r=bt(6+4*t.length)),r.write_shift(2,e),La(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Dpe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=mhe(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var a=e.read_shift(2);switch(a===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var l=e.read_shift(1);switch(l>0&&(n.charset=l),e.l++,n.color=phe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Ei(e),n}function Ipe(e,t){t||(t=bt(153)),t.write_shift(2,e.sz*20),yhe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),E_(e.color,t);var n=0;return n=2,t.write_shift(1,n),La(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Mpe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],NT,Lpe=Ai;function cM(e,t){t||(t=bt(84)),NT||(NT=iS(Mpe));var r=NT[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(E_({auto:1},t),E_({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Bpe(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}function gK(e,t,r){r||(r=bt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function cx(e,t){return t||(t=bt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var $pe=Ai;function Upe(e,t){return t||(t=bt(51)),t.write_shift(1,0),cx(null,t),cx(null,t),cx(null,t),cx(null,t),cx(null,t),t.length>t.l?t.slice(0,t.l):t}function Wpe(e,t){return t||(t=bt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),C_(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function zpe(e,t,r){var n=bt(2052);return n.write_shift(4,e),C_(t,n),C_(r,n),n.length>n.l?n.slice(0,n.l):n}function Hpe(e,t,r){var n={};n.NumberFmt=[];for(var s in Ar)n.NumberFmt[s]=Ar[s];n.CellXf=[],n.Fonts=[];var a=[],i=!1;return ad(e,function(l,u,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],Wu(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(l.color.rgb=j_(t.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:a.push(d),i=!0;break;case 38:a.pop(),i=!1;break;default:if(u.T>0)a.push(d);else if(u.T<0)a.pop();else if(!i||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function Gpe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&++r}),r!=0&&(jt(e,615,ec(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&jt(e,44,Rpe(s,t[s]))}),jt(e,616))}}function Vpe(e){var t=1;jt(e,611,ec(t)),jt(e,43,Ipe({sz:12,color:{theme:1},name:"Calibri",family:2})),jt(e,612)}function qpe(e){var t=2;jt(e,603,ec(t)),jt(e,45,cM({patternType:"none"})),jt(e,45,cM({patternType:"gray125"})),jt(e,604)}function Kpe(e){var t=1;jt(e,613,ec(t)),jt(e,46,Upe()),jt(e,614)}function Xpe(e){var t=1;jt(e,626,ec(t)),jt(e,47,gK({numFmtId:0},65535)),jt(e,627)}function Ype(e,t){jt(e,617,ec(t.length)),t.forEach(function(r){jt(e,47,gK(r,0))}),jt(e,618)}function Jpe(e){var t=1;jt(e,619,ec(t)),jt(e,48,Wpe({xfId:0,name:"Normal"})),jt(e,620)}function Qpe(e){var t=0;jt(e,505,ec(t)),jt(e,506)}function Zpe(e){var t=0;jt(e,508,zpe(t,"TableStyleMedium9","PivotStyleMedium4")),jt(e,509)}function eme(e,t){var r=po();return jt(r,278),Gpe(r,e.SSF),Vpe(r),qpe(r),Kpe(r),Xpe(r),Ype(r,t.cellXfs),Jpe(r),Qpe(r),Zpe(r),jt(r,279),r.end()}var tme=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function rme(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(ji)||[]).forEach(function(s){var a=Dr(s);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(t.themeElements.clrScheme[tme.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function nme(){}function sme(){}var ame=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,ime=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,ome=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function lme(e,t,r){t.themeElements={};var n;[["clrScheme",ame,rme],["fontScheme",ime,nme],["fmtScheme",ome,sme]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var cme=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function pK(e,t){(!e||e.length===0)&&(e=j6());var r,n={};if(!(r=e.match(cme)))throw new Error("themeElements not found in theme");return lme(r[0],n,t),n.raw=e,n}function j6(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Ks];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function ume(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var a=e.slice(e.l);e.l=n;var i;try{i=oq(a,{type:"array"})}catch{return}var o=Ro(i,"theme/theme/theme1.xml",!0);if(o)return pK(o,r)}}function dme(e){return e.read_shift(4)}function fme(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=hme(e,4);break;case 2:t.xclrValue=Kq(e);break;case 3:t.xclrValue=dme(e);break;case 4:e.l+=4;break}return e.l+=8,t}function hme(e,t){return Ai(e,t)}function gme(e,t){return Ai(e,t)}function pme(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=fme(e);break;case 6:n[1]=gme(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function mme(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),a=[];s-- >0;)a.push(pme(e,r-e.l));return{ixfe:n,ext:a}}function yme(e,t){t.forEach(function(r){r[0]})}function xme(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Ei(e)}}function vme(e){var t=bt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),La(e.name,t),t.slice(0,t.l)}function wme(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function bme(e){var t=bt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function _me(e,t){var r=bt(8+2*t.length);return r.write_shift(4,e),La(t,r),r.slice(0,r.l)}function Sme(e){return e.l+=4,e.read_shift(4)!=0}function kme(e,t){var r=bt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function Tme(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},a=[],i=!1,o=2;return ad(e,function(l,u,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(d),i=!0;break;case 36:a.pop(),i=!1;break;default:if(!u.T){if(!i||s.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function Cme(){var e=po();return jt(e,332),jt(e,334,ec(1)),jt(e,335,vme({name:"XLDAPR",version:12e4,flags:3496657072})),jt(e,336),jt(e,339,_me(1,"XLDAPR")),jt(e,52),jt(e,35,ec(514)),jt(e,4096,ec(0)),jt(e,4097,ul(1)),jt(e,36),jt(e,53),jt(e,340),jt(e,337,kme(1)),jt(e,51,bme([[1,0]])),jt(e,338),jt(e,333),e.end()}function Eme(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,a=2,i;return e.replace(ji,function(o){var l=Dr(o);switch(Jc(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==l.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):a==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function mK(){var e=[Ks];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function Nme(e){var t=[];if(!e)return t;var r=1;return(e.match(ji)||[]).forEach(function(n){var s=Dr(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function Ame(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Pr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function jme(e,t,r){var n=[];return ad(e,function(a,i,o){switch(o){case 63:n.push(a);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function Pme(e,t,r,n){if(!e)return e;var s=n||{},a=!1;ad(e,function(o,l,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function Ome(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Yg=1024;function yK(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[Vt("xml",null,{"xmlns:v":Po.v,"xmlns:o":Po.o,"xmlns:x":Po.x,"xmlns:mv":Po.mv}).replace(/\/>/,">"),Vt("o:shapelayout",Vt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Vt("v:shapetype",[Vt("v:stroke",null,{joinstyle:"miter"}),Vt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Yg<e*1e3;)Yg+=1e3;return t.forEach(function(a){var i=ws(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Vt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Vt("v:fill",l,o),d={on:"t",obscured:"t"};++Yg,s=s.concat(["<v:shape"+vv({id:"_x0000_s"+Yg,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Vt("v:shadow",null,d),Vt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ai("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),ai("x:AutoFill","False"),ai("x:Row",String(i.r)),ai("x:Column",String(i.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function uM(e,t,r,n){var s=Array.isArray(e),a;t.forEach(function(i){var o=ws(i.ref);if(s?(e[o.r]||(e[o.r]=[]),a=e[o.r][o.c]):a=e[i.ref],!a){a={t:"z"},s?e[o.r][o.c]=a:e[i.ref]=a;var l=gn(e["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var u=Kr(l);u!==e["!ref"]&&(e["!ref"]=u)}a.c||(a.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=a.c.length-1;f>=0;--f){if(!r&&a.c[f].T)return;r&&!a.c[f].T&&a.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}a.c.push(d)})}function Fme(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var a=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Dr(o[0]),u={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=ws(l.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),g=!!f&&!!f[1]&&E6(f[1])||{r:"",t:"",h:""};u.r=g.r,g.r=="<t></t>"&&(g.t=g.h=""),u.t=(g.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=g.h),n.push(u)}}}}),n}function xK(e){var t=[Ks,Vt("comments",null,{xmlns:w0[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(s){var a=Dn(s.a);r.indexOf(a)==-1&&(r.push(a),t.push("<author>"+a+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var s=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(s=r.indexOf(Dn(l.a))),a.push(l.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),a.length<=1)t.push(ai("t",Dn(a[0]||"")));else{for(var i=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)i+=`Reply:
    `+a[o]+`
`;t.push(ai("t",Dn(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function Rme(e,t){var r=[],n=!1,s={},a=0;return e.replace(ji,function(o,l){var u=Dr(o);switch(Jc(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":s.t=e.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function Dme(e,t,r){var n=[Ks,Vt("ThreadedComments",null,{xmlns:va.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var a="";(s[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var l={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?a=l.id:l.parentId=a,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(Vt("threadedComment",ai("text",i.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function Ime(e,t){var r=[],n=!1;return e.replace(ji,function(a){var i=Dr(a);switch(Jc(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return a}),r}function Mme(e){var t=[Ks,Vt("personList",null,{xmlns:va.TCMNT,"xmlns:x":w0[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Vt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function Lme(e){var t={};t.iauthor=e.read_shift(4);var r=k0(e);return t.rfx=r.s,t.ref=Pr(r.s),e.l+=16,t}function Bme(e,t){return t==null&&(t=bt(36)),t.write_shift(4,e[1].iauthor),pm(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var $me=Ei;function Ume(e){return La(e.slice(0,54))}function Wme(e,t){var r=[],n=[],s={},a=!1;return ad(e,function(o,l,u){switch(u){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function zme(e){var t=po(),r=[];return jt(t,628),jt(t,630),e.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),jt(t,632,Ume(s.a)))})}),jt(t,631),jt(t,633),e.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var a={s:ws(n[0]),e:ws(n[0])};jt(t,635,Bme([a,s])),s.t&&s.t.length>0&&jt(t,637,dhe(s)),jt(t,636),delete s.iauthor})}),jt(t,634),jt(t,629),t.end()}var Hme="application/vnd.ms-office.vbaProject";function Gme(e){var t=wr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");wr.utils.cfb_add(t,s,e.FileIndex[n].content)}}),wr.write(t)}function Vme(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&wr.utils.cfb_add(e,s,t.FileIndex[n].content)}})}var vK=["xlsb","xlsm","xlam","biff8","xla"];function qme(){return{"!type":"dialog"}}function Kme(){return{"!type":"dialog"}}function Xme(){return{"!type":"macro"}}function Yme(){return{"!type":"macro"}}var cp=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,a,i){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=a.length>0?parseInt(a,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=t.c:--d,l?u+=t.r:--u,s+(o?"":"$")+vs(d)+(l?"":"$")+Vs(u)}return function(s,a){return t=a,s.replace(e,r)}})(),P6=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,O6=(function(){return function(t,r){return t.replace(P6,function(n,s,a,i,o,l){var u=x6(i)-(a?0:r.c),d=y6(l)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",g=u==0?"":a?u+1:"["+u+"]";return s+"R"+f+"C"+g})}})();function wK(e,t){return e.replace(P6,function(r,n,s,a,i,o){return n+(s=="$"?s+a:vs(x6(a)+t.c))+(i=="$"?i+o:Vs(y6(o)+t.r))})}function Jme(e,t,r){var n=mo(t),s=n.s,a=ws(r),i={r:a.r-s.r,c:a.c-s.c};return wK(e,i)}function Qme(e){return e.length!=1}function dM(e){return e.replace(/_xlfn\./g,"")}function ea(e){e.l+=1}function kf(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function bK(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return _K(e);r.biff==12&&(n=4)}var s=e.read_shift(n),a=e.read_shift(n),i=kf(e),o=kf(e);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function _K(e){var t=kf(e),r=kf(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function Zme(e,t,r){if(r.biff<8)return _K(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),a=kf(e),i=kf(e);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function SK(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return eye(e);var n=e.read_shift(r&&r.biff==12?4:2),s=kf(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function eye(e){var t=kf(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function tye(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function rye(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return nye(e);var s=e.read_shift(n>=12?4:2),a=e.read_shift(2),i=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:o}}function nye(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function sye(e,t,r){var n=(e[e.l++]&96)>>5,s=bK(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function aye(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}var i=bK(e,a,r);return[n,s,i]}function iye(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function oye(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}return e.l+=a,[n,s]}function lye(e,t,r){var n=(e[e.l++]&96)>>5,s=Zme(e,t-1,r);return[n,s]}function cye(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function fM(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function uye(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],a=0;a<=n;++a)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function dye(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function fye(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function hye(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function gye(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function kK(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function pye(e){return e.read_shift(2),kK(e)}function mye(e){return e.read_shift(2),kK(e)}function yye(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=SK(e,0,r);return[n,s]}function xye(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=rye(e,0,r);return[n,s]}function vye(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var a=SK(e,0,r);return[n,s,a]}function wye(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[Sxe[s],EK[s],n]}function bye(e,t,r){var n=e[e.l++],s=e.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:_ye(e);return[s,(a[0]===0?EK:_xe)[a[1]]]}function _ye(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Sye(e,t,r){e.l+=r&&r.biff==2?3:4}function kye(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Tye(e){return e.l++,id[e.read_shift(1)]}function Cye(e){return e.l++,e.read_shift(2)}function Eye(e){return e.l++,e.read_shift(1)!==0}function Nye(e){return e.l++,Si(e)}function Aye(e,t,r){return e.l++,F1(e,t-1,r)}function jye(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=zs(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=id[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Si(e);break;case 2:r[1]=T0(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Pye(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],a=0;a!=n;++a)s.push((r.biff==12?k0:cS)(e));return s}function Oye(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var a=0,i=[];a!=n&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=jye(e,r.biff);return i}function Fye(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,a=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,a]}function Rye(e,t,r){if(r.biff==5)return Dye(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),a=e.read_shift(4);return[n,s,a]}function Dye(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function Iye(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Mye(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Lye(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function Bye(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return e.l+=a,[n,s]}var $ye=Ai,Uye=Ai,Wye=Ai;function D1(e,t,r){return e.l+=2,[tye(e)]}function F6(e){return e.l+=6,[]}var zye=D1,Hye=F6,Gye=F6,Vye=D1;function TK(e){return e.l+=2,[ra(e),e.read_shift(2)&1]}var qye=D1,Kye=TK,Xye=F6,Yye=D1,Jye=D1,Qye=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Zye(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),a=e.read_shift(2),i=Qye[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:s,C:a}}function exe(e){return e.l+=2,[e.read_shift(4)]}function txe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function rxe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function nxe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function sxe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function axe(e){return e.l+=4,[0,0]}var hM={1:{n:"PtgExp",f:kye},2:{n:"PtgTbl",f:Wye},3:{n:"PtgAdd",f:ea},4:{n:"PtgSub",f:ea},5:{n:"PtgMul",f:ea},6:{n:"PtgDiv",f:ea},7:{n:"PtgPower",f:ea},8:{n:"PtgConcat",f:ea},9:{n:"PtgLt",f:ea},10:{n:"PtgLe",f:ea},11:{n:"PtgEq",f:ea},12:{n:"PtgGe",f:ea},13:{n:"PtgGt",f:ea},14:{n:"PtgNe",f:ea},15:{n:"PtgIsect",f:ea},16:{n:"PtgUnion",f:ea},17:{n:"PtgRange",f:ea},18:{n:"PtgUplus",f:ea},19:{n:"PtgUminus",f:ea},20:{n:"PtgPercent",f:ea},21:{n:"PtgParen",f:ea},22:{n:"PtgMissArg",f:ea},23:{n:"PtgStr",f:Aye},26:{n:"PtgSheet",f:txe},27:{n:"PtgEndSheet",f:rxe},28:{n:"PtgErr",f:Tye},29:{n:"PtgBool",f:Eye},30:{n:"PtgInt",f:Cye},31:{n:"PtgNum",f:Nye},32:{n:"PtgArray",f:cye},33:{n:"PtgFunc",f:wye},34:{n:"PtgFuncVar",f:bye},35:{n:"PtgName",f:Fye},36:{n:"PtgRef",f:yye},37:{n:"PtgArea",f:sye},38:{n:"PtgMemArea",f:Iye},39:{n:"PtgMemErr",f:$ye},40:{n:"PtgMemNoMem",f:Uye},41:{n:"PtgMemFunc",f:Mye},42:{n:"PtgRefErr",f:Lye},43:{n:"PtgAreaErr",f:iye},44:{n:"PtgRefN",f:xye},45:{n:"PtgAreaN",f:lye},46:{n:"PtgMemAreaN",f:nxe},47:{n:"PtgMemNoMemN",f:sxe},57:{n:"PtgNameX",f:Rye},58:{n:"PtgRef3d",f:vye},59:{n:"PtgArea3d",f:aye},60:{n:"PtgRefErr3d",f:Bye},61:{n:"PtgAreaErr3d",f:oye},255:{}},ixe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},oxe={1:{n:"PtgElfLel",f:TK},2:{n:"PtgElfRw",f:Yye},3:{n:"PtgElfCol",f:zye},6:{n:"PtgElfRwV",f:Jye},7:{n:"PtgElfColV",f:Vye},10:{n:"PtgElfRadical",f:qye},11:{n:"PtgElfRadicalS",f:Xye},13:{n:"PtgElfColS",f:Hye},15:{n:"PtgElfColSV",f:Gye},16:{n:"PtgElfRadicalLel",f:Kye},25:{n:"PtgList",f:Zye},29:{n:"PtgSxName",f:exe},255:{}},lxe={0:{n:"PtgAttrNoop",f:axe},1:{n:"PtgAttrSemi",f:gye},2:{n:"PtgAttrIf",f:fye},4:{n:"PtgAttrChoose",f:uye},8:{n:"PtgAttrGoto",f:dye},16:{n:"PtgAttrSum",f:Sye},32:{n:"PtgAttrBaxcel",f:fM},33:{n:"PtgAttrBaxcel",f:fM},64:{n:"PtgAttrSpace",f:pye},65:{n:"PtgAttrSpaceSemi",f:mye},128:{n:"PtgAttrIfError",f:hye},255:{}};function I1(e,t,r,n){if(n.biff<8)return Ai(e,t);for(var s=e.l+t,a=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=Oye(e,0,n),a.push(r[i][1]);break;case"PtgMemArea":r[i][2]=Pye(e,r[i][1],n),a.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),a.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=s-e.l,t!==0&&a.push(Ai(e,t)),a}function M1(e,t,r){for(var n=e.l+t,s,a,i=[];n!=e.l;)t=n-e.l,a=e[e.l],s=hM[a]||hM[ixe[a]],(a===24||a===25)&&(s=(a===24?oxe:lxe)[e[e.l+1]]),!s||!s.f?Ai(e,t):i.push([s.n,s.f(e,t,r)]);return i}function cxe(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],a=0;a<n.length;++a){var i=n[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var uxe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function dxe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function CK(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function gM(e,t,r){var n=CK(e,t,r);return n=="#REF"?n:dxe(n,r)}function vi(e,t,r,n,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},o=[],l,u,d,f=0,g=0,p,x="";if(!e[0]||!e[0][0])return"";for(var y=-1,v="",T=0,_=e[0].length;T<_;++T){var b=e[0][T];switch(b[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),y>=0){switch(e[0][y][1][0]){case 0:v=js(" ",e[0][y][1][1]);break;case 1:v=js("\r",e[0][y][1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}u=u+v,y=-1}o.push(u+uxe[b[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Bx(b[1][1],i,s),o.push($x(d,a));break;case"PtgRefN":d=r?Bx(b[1][1],r,s):b[1][1],o.push($x(d,a));break;case"PtgRef3d":f=b[1][1],d=Bx(b[1][2],i,s),x=gM(n,f,s),o.push(x+"!"+$x(d,a));break;case"PtgFunc":case"PtgFuncVar":var E=b[1][0],k=b[1][1];E||(E=0),E&=127;var A=E==0?[]:o.slice(-E);o.length-=E,k==="User"&&(k=A.shift()),o.push(k+"("+A.join(",")+")");break;case"PtgBool":o.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(b[1]);break;case"PtgNum":o.push(String(b[1]));break;case"PtgStr":o.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(b[1]);break;case"PtgAreaN":p=zI(b[1][1],r?{s:r}:i,s),o.push(kT(p,s));break;case"PtgArea":p=zI(b[1][1],i,s),o.push(kT(p,s));break;case"PtgArea3d":f=b[1][1],p=b[1][2],x=gM(n,f,s),o.push(x+"!"+kT(p,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=b[1][2];var P=(n.names||[])[g-1]||(n[0]||[])[g],j=P?P.Name:"SH33TJSNAME"+String(g);j&&j.slice(0,6)=="_xlfn."&&!s.xlfn&&(j=j.slice(6)),o.push(j);break;case"PtgNameX":var O=b[1][1];g=b[1][2];var R;if(s.biff<=5)O<0&&(O=-O),n[O]&&(R=n[O][g]);else{var M="";if(((n[O]||[])[0]||[])[0]==14849||(((n[O]||[])[0]||[])[0]==1025?n[O][g]&&n[O][g].itab>0&&(M=n.SheetNames[n[O][g].itab-1]+"!"):M=n.SheetNames[g-1]+"!"),n[O]&&n[O][g])M+=n[O][g].Name;else if(n[0]&&n[0][g])M+=n[0][g].Name;else{var G=(CK(n,O,s)||"").split(";;");G[g-1]?M=G[g-1]:M+="SH33TJSERRX"}o.push(M);break}R||(R={Name:"SH33TJSERRY"}),o.push(R.Name);break;case"PtgParen":var K="(",re=")";if(y>=0){switch(v="",e[0][y][1][0]){case 2:K=js(" ",e[0][y][1][1])+K;break;case 3:K=js("\r",e[0][y][1][1])+K;break;case 4:re=js(" ",e[0][y][1][1])+re;break;case 5:re=js("\r",e[0][y][1][1])+re;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}y=-1}o.push(K+o.pop()+re);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var Y={c:r.c,r:r.r};if(n.sharedf[Pr(d)]){var ee=n.sharedf[Pr(d)];o.push(vi(ee,i,Y,n,s))}else{var B=!1;for(l=0;l!=n.arrayf.length;++l)if(u=n.arrayf[l],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(vi(u[1],i,Y,n,s)),B=!0;break}B||o.push(b[1])}break;case"PtgArray":o.push("{"+cxe(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=T;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var z=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&z.indexOf(e[0][T][0])==-1){b=e[0][y];var I=!0;switch(b[1][0]){case 4:I=!1;case 0:v=js(" ",b[1][1]);break;case 5:I=!1;case 1:v=js("\r",b[1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}o.push((I?v:"")+o.pop()+(I?"":v)),y=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function fxe(e,t,r){var n=e.l+t,s=r.biff==2?1:2,a,i=e.read_shift(s);if(i==65535)return[[],Ai(e,t-2)];var o=M1(e,i,r);return t!==i+s&&(a=I1(e,t-i-s,o,r)),e.l=n,[o,a]}function hxe(e,t,r){var n=e.l+t,s=r.biff==2?1:2,a,i=e.read_shift(s);if(i==65535)return[[],Ai(e,t-2)];var o=M1(e,i,r);return t!==i+s&&(a=I1(e,t-i-s,o,r)),e.l=n,[o,a]}function gxe(e,t,r,n){var s=e.l+t,a=M1(e,n,r),i;return s!==e.l&&(i=I1(e,s-e.l,a,r)),[a,i]}function pxe(e,t,r){var n=e.l+t,s,a=e.read_shift(2),i=M1(e,a,r);return a==65535?[[],Ai(e,t-2)]:(t!==a+2&&(s=I1(e,n-a-2,i,r)),[i,s])}function mxe(e){var t;if(Iu(e,e.l+6)!==65535)return[Si(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function yxe(e){if(e==null){var t=bt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return l0(e);return l0(0)}function AT(e,t,r){var n=e.l+t,s=Qc(e);r.biff==2&&++e.l;var a=mxe(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=hxe(e,n-e.l,r);return{cell:s,val:a[0],formula:o,shared:i>>3&1,tt:a[1]}}function xxe(e,t,r,n,s){var a=u0(t,r,s),i=yxe(e.v),o=bt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=bt(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Ia([a,i,o,u]);return f}function uS(e,t,r){var n=e.read_shift(4),s=M1(e,n,r),a=e.read_shift(4),i=a>0?I1(e,a,s,r):null;return[s,i]}var vxe=uS,dS=uS,wxe=uS,bxe=uS,_xe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},EK={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Sxe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function pM(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function kxe(e){var t="of:="+e.replace(P6,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function jT(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function Txe(e){return e.replace(/\./,"!")}var Wx={},up={},zx=typeof Map<"u";function R6(e,t,r){var n=0,s=e.length;if(r){if(zx?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var a=zx?r.get(t):r[t];n<a.length;++n)if(e[a[n]].t===t)return e.Count++,a[n]}}else for(;n<s;++n)if(e[n].t===t)return e.Count++,n;return e[s]={t},e.Count++,e.Unique++,r&&(zx?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function fS(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(wi=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=kv(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=P_(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function zh(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Df(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],s=60,a=e.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){Wu(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=n=s;break}}for(s=0;s!=a;++s)if(e[s].numFmtId===n)return s;return e[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function NK(e,t,r,n,s,a){try{n.cellNF&&(e.z=Ar[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=is(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Ar[t]==null&&Wu(_fe[t]||"General",t),e.t==="e")e.w=e.w||id[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=yv(e.v);else if(e.t==="d"){var i=_a(e.v);(i|0)===i?e.w=i.toString(10):e.w=yv(i)}else{if(e.v===void 0)return"";e.w=i0(e.v,up)}else e.t==="d"?e.w=wl(t,_a(e.v),up):e.w=wl(t,e.v,up)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=a.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=j_(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=j_(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&a.Fills)throw o}}}function Cxe(e,t,r){if(e&&e["!ref"]){var n=gn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Exe(e,t){var r=gn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Kr(r))}var Nxe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Axe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,jxe=/<(?:\w:)?hyperlink [^>]*>/mg,Pxe=/"(\w*:\w*)"/,Oxe=/<(?:\w:)?col\b[^>]*[\/]?>/g,Fxe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Rxe=/<(?:\w:)?pageMargins[^>]*\/>/g,AK=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Dxe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Ixe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Mxe(e,t,r,n,s,a,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(Axe);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var g=u.match(AK);g?D6(g[0],o,s,r):(g=u.match(Dxe))&&Bxe(g[0],g[1]||"",o,s,r);var p=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var x=u.slice(p,p+50).match(Pxe);x&&Exe(o,x[1])}var y=u.match(Ixe);y&&y[1]&&Qxe(y[1],s);var v=[];if(t.cellStyles){var T=u.match(Oxe);T&&qxe(v,T)}f&&tve(f[1],o,t,l,a,i);var _=d.match(Fxe);_&&(o["!autofilter"]=Xxe(_[0]));var b=[],E=d.match(Nxe);if(E)for(p=0;p!=E.length;++p)b[p]=gn(E[p].slice(E[p].indexOf('"')+1));var k=d.match(jxe);k&&Hxe(o,k,n);var A=d.match(Rxe);if(A&&(o["!margins"]=Gxe(Dr(A[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Kr(l)),t.sheetRows>0&&o["!ref"]){var P=gn(o["!ref"]);t.sheetRows<=+P.e.r&&(P.e.r=t.sheetRows-1,P.e.r>l.e.r&&(P.e.r=l.e.r),P.e.r<P.s.r&&(P.s.r=P.e.r),P.e.c>l.e.c&&(P.e.c=l.e.c),P.e.c<P.s.c&&(P.s.c=P.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Kr(P))}return v.length>0&&(o["!cols"]=v),b.length>0&&(o["!merges"]=b),o}function Lxe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Kr(e[r])+'"/>';return t+"</mergeCells>"}function D6(e,t,r,n){var s=Dr(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=fn(Wn(s.codeName)))}function Bxe(e,t,r,n,s){D6(e.slice(0,e.indexOf(">")),r,n,s)}function $xe(e,t,r,n,s){var a=!1,i={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var l=t.SheetNames[r];try{t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch{}a=!0,i.codeName=Bc(Dn(l))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+Vt("outlinePr",null,u)}!a&&!o||(s[s.length]=Vt("sheetPr",o,i))}var Uxe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Wxe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function zxe(e){var t={sheet:1};return Uxe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Wxe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=N6(e.password).toString(16).toUpperCase()),Vt("sheetProtection",null,t)}function Hxe(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var a=Dr(Wn(t[s]),!0);if(!a.ref)return;var i=((r||{})["!id"]||[])[a.id];i?(a.Target=i.Target,a.location&&(a.Target+="#"+fn(a.location))):(a.Target="#"+fn(a.location),i={Target:a.Target,TargetMode:"Internal"}),a.Rel=i,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=gn(a.ref),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u){var d=Pr({c:u,r:l});n?(e[l]||(e[l]=[]),e[l][u]||(e[l][u]={t:"z",v:void 0}),e[l][u].l=a):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=a)}}}function Gxe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function Vxe(e){return zh(e),Vt("pageMargins",null,e)}function qxe(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=Dr(t[n],!0);s.hidden&&(s.hidden=ns(s.hidden));var a=parseInt(s.min,10)-1,i=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,A6(s.width)),Sf(s);a<=i;)e[a++]=os(s)}}function Kxe(e,t){for(var r=["<cols>"],n,s=0;s!=t.length;++s)(n=t[s])&&(r[r.length]=Vt("col",null,fS(s,n)));return r[r.length]="</cols>",r.join("")}function Xxe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function Yxe(e,t,r,n){var s=typeof e.ref=="string"?e.ref:Kr(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,i=mo(s);i.s.r==i.e.r&&(i.e.r=mo(t["!ref"]).e.r,s=Kr(i));for(var o=0;o<a.length;++o){var l=a[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Vt("autoFilter",null,{ref:s})}var Jxe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Qxe(e,t){t.Views||(t.Views=[{}]),(e.match(Jxe)||[]).forEach(function(r,n){var s=Dr(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),ns(s.rightToLeft)&&(t.Views[n].RTL=!0)})}function Zxe(e,t,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Vt("sheetViews",Vt("sheetView",null,s),{})}function eve(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",a=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=id[e.v];break;case"d":n&&n.cellDates?s=is(e.v,-1).toISOString():(e=os(e),e.t="n",s=""+(e.v=_a(is(e.v)))),typeof e.z>"u"&&(e.z=Ar[14]);break;default:s=e.v;break}var o=ai("v",Dn(s)),l={r:t},u=Df(n.cellXfs,e,n);switch(u!==0&&(l.s=u),e.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=ai("v",""+R6(n.Strings,e.v,n.revStrings)),l.t="s";break}l.t="str";break}if(e.t!=a&&(e.t=a,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Vt("f",Dn(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(l.cm=1),Vt("c",o,l)}var tve=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=xv("v"),i=xv("f");return function(l,u,d,f,g,p){for(var x=0,y="",v=[],T=[],_=0,b=0,E=0,k="",A,P,j=0,O=0,R,M,G=0,K=0,re=Array.isArray(p.CellXf),Y,ee=[],B=[],z=Array.isArray(u),I=[],W={},V=!1,L=!!d.sheetStubs,H=l.split(t),J=0,Q=H.length;J!=Q;++J){y=H[J].trim();var ne=y.length;if(ne!==0){var Z=0;e:for(x=0;x<ne;++x)switch(y[x]){case">":if(y[x-1]!="/"){++x;break e}if(d&&d.cellStyles){if(P=Dr(y.slice(Z,x),!0),j=P.r!=null?parseInt(P.r,10):j+1,O=-1,d.sheetRows&&d.sheetRows<j)continue;W={},V=!1,P.ht&&(V=!0,W.hpt=parseFloat(P.ht),W.hpx=Cp(W.hpt)),P.hidden=="1"&&(V=!0,W.hidden=!0),P.outlineLevel!=null&&(V=!0,W.level=+P.outlineLevel),V&&(I[j-1]=W)}break;case"<":Z=x;break}if(Z>=x)break;if(P=Dr(y.slice(Z,x),!0),j=P.r!=null?parseInt(P.r,10):j+1,O=-1,!(d.sheetRows&&d.sheetRows<j)){f.s.r>j-1&&(f.s.r=j-1),f.e.r<j-1&&(f.e.r=j-1),d&&d.cellStyles&&(W={},V=!1,P.ht&&(V=!0,W.hpt=parseFloat(P.ht),W.hpx=Cp(W.hpt)),P.hidden=="1"&&(V=!0,W.hidden=!0),P.outlineLevel!=null&&(V=!0,W.level=+P.outlineLevel),V&&(I[j-1]=W)),v=y.slice(x).split(e);for(var se=0;se!=v.length&&v[se].trim().charAt(0)=="<";++se);for(v=v.slice(se),x=0;x!=v.length;++x)if(y=v[x].trim(),y.length!==0){if(T=y.match(r),_=x,b=0,E=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,T!=null&&T.length===2){for(_=0,k=T[1],b=0;b!=k.length&&!((E=k.charCodeAt(b)-64)<1||E>26);++b)_=26*_+E;--_,O=_}else++O;for(b=0;b!=y.length&&y.charCodeAt(b)!==62;++b);if(++b,P=Dr(y.slice(0,b),!0),P.r||(P.r=Pr({r:j-1,c:O})),k=y.slice(b),A={t:""},(T=k.match(a))!=null&&T[1]!==""&&(A.v=fn(T[1])),d.cellFormula){if((T=k.match(i))!=null&&T[1]!==""){if(A.f=fn(Wn(T[1])).replace(/\r\n/g,`
`),d.xlfn||(A.f=dM(A.f)),T[0].indexOf('t="array"')>-1)A.F=(k.match(s)||[])[1],A.F.indexOf(":")>-1&&ee.push([gn(A.F),A.F]);else if(T[0].indexOf('t="shared"')>-1){M=Dr(T[0]);var ce=fn(Wn(T[1]));d.xlfn||(ce=dM(ce)),B[parseInt(M.si,10)]=[M,ce,P.r]}}else(T=k.match(/<f[^>]*\/>/))&&(M=Dr(T[0]),B[M.si]&&(A.f=Jme(B[M.si][1],B[M.si][2],P.r)));var he=ws(P.r);for(b=0;b<ee.length;++b)he.r>=ee[b][0].s.r&&he.r<=ee[b][0].e.r&&he.c>=ee[b][0].s.c&&he.c<=ee[b][0].e.c&&(A.F=ee[b][1])}if(P.t==null&&A.v===void 0)if(A.f||A.F)A.v=0,A.t="n";else if(L)A.t="z";else continue;else A.t=P.t||"n";switch(f.s.c>O&&(f.s.c=O),f.e.c<O&&(f.e.c=O),A.t){case"n":if(A.v==""||A.v==null){if(!L)continue;A.t="z"}else A.v=parseFloat(A.v);break;case"s":if(typeof A.v>"u"){if(!L)continue;A.t="z"}else R=Wx[parseInt(A.v,10)],A.v=R.t,A.r=R.r,d.cellHTML&&(A.h=R.h);break;case"str":A.t="s",A.v=A.v!=null?Wn(A.v):"",d.cellHTML&&(A.h=h6(A.v));break;case"inlineStr":T=k.match(n),A.t="s",T!=null&&(R=E6(T[1]))?(A.v=R.t,d.cellHTML&&(A.h=R.h)):A.v="";break;case"b":A.v=ns(A.v);break;case"d":d.cellDates?A.v=is(A.v,1):(A.v=_a(is(A.v,1)),A.t="n");break;case"e":(!d||d.cellText!==!1)&&(A.w=A.v),A.v=Pq[A.v];break}if(G=K=0,Y=null,re&&P.s!==void 0&&(Y=p.CellXf[P.s],Y!=null&&(Y.numFmtId!=null&&(G=Y.numFmtId),d.cellStyles&&Y.fillId!=null&&(K=Y.fillId))),NK(A,G,K,d,g,p),d.cellDates&&re&&A.t=="n"&&fm(Ar[G])&&(A.t="d",A.v=lS(A.v)),P.cm&&d.xlmeta){var Ee=(d.xlmeta.Cell||[])[+P.cm-1];Ee&&Ee.type=="XLDAPR"&&(A.D=!0)}if(z){var ie=ws(P.r);u[ie.r]||(u[ie.r]=[]),u[ie.r][ie.c]=A}else u[P.r]=A}}}}I.length>0&&(u["!rows"]=I)}})();function rve(e,t,r,n){var s=[],a=[],i=gn(e["!ref"]),o="",l,u="",d=[],f=0,g=0,p=e["!rows"],x=Array.isArray(e),y={r:u},v,T=-1;for(g=i.s.c;g<=i.e.c;++g)d[g]=vs(g);for(f=i.s.r;f<=i.e.r;++f){for(a=[],u=Vs(f),g=i.s.c;g<=i.e.c;++g){l=d[g]+u;var _=x?(e[f]||[])[g]:e[l];_!==void 0&&(o=eve(_,l,e,t))!=null&&a.push(o)}(a.length>0||p&&p[f])&&(y={r:u},p&&p[f]&&(v=p[f],v.hidden&&(y.hidden=1),T=-1,v.hpx?T=Tv(v.hpx):v.hpt&&(T=v.hpt),T>-1&&(y.ht=T,y.customHeight=1),v.level&&(y.outlineLevel=v.level)),s[s.length]=Vt("row",a.join(""),y))}if(p)for(;f<p.length;++f)p&&p[f]&&(y={r:f+1},v=p[f],v.hidden&&(y.hidden=1),T=-1,v.hpx?T=Tv(v.hpx):v.hpt&&(T=v.hpt),T>-1&&(y.ht=T,y.customHeight=1),v.level&&(y.outlineLevel=v.level),s[s.length]=Vt("row","",y));return s.join("")}function jK(e,t,r,n){var s=[Ks,Vt("worksheet",null,{xmlns:w0[0],"xmlns:r":va.r})],a=r.SheetNames[e],i=0,o="",l=r.Sheets[a];l==null&&(l={});var u=l["!ref"]||"A1",d=gn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Kr(d)}n||(n={}),l["!comments"]=[];var f=[];$xe(l,r,e,t,s),s[s.length]=Vt("dimension",null,{ref:u}),s[s.length]=Zxe(l,t,e,r),t.sheetFormat&&(s[s.length]=Vt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(s[s.length]=Kxe(l,l["!cols"])),s[i=s.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=rve(l,t),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),l["!protect"]&&(s[s.length]=zxe(l["!protect"])),l["!autofilter"]!=null&&(s[s.length]=Yxe(l["!autofilter"],l,r,e)),l["!merges"]!=null&&l["!merges"].length>0&&(s[s.length]=Lxe(l["!merges"]));var g=-1,p,x=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(y){y[1].Target&&(p={ref:y[0]},y[1].Target.charAt(0)!="#"&&(x=Rn(n,-1,Dn(y[1].Target).replace(/#.*$/,""),rn.HLINK),p["r:id"]="rId"+x),(g=y[1].Target.indexOf("#"))>-1&&(p.location=Dn(y[1].Target.slice(g+1))),y[1].Tooltip&&(p.tooltip=Dn(y[1].Tooltip)),s[s.length]=Vt("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(s[s.length]=Vxe(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=ai("ignoredErrors",Vt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(x=Rn(n,-1,"../drawings/drawing"+(e+1)+".xml",rn.DRAW),s[s.length]=Vt("drawing",null,{"r:id":"rId"+x}),l["!drawing"]=f),l["!comments"].length>0&&(x=Rn(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",rn.VML),s[s.length]=Vt("legacyDrawing",null,{"r:id":"rId"+x}),l["!legacy"]=x),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function nve(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=s/20),r}function sve(e,t,r){var n=bt(145),s=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var a=320;s.hpx?a=Tv(s.hpx)*20:s.hpt&&(a=s.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,g=-1,p=d<<10;p<d+1<<10;++p){u.c=p;var x=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Pr(u)];x&&(f<0&&(f=p),g=p)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,g))}var y=n.l;return n.l=l,n.write_shift(4,o),n.l=y,n.length>n.l?n.slice(0,n.l):n}function ave(e,t,r,n){var s=sve(n,r,t);(s.length>17||(t["!rows"]||[])[n])&&jt(e,0,s)}var ive=k0,ove=pm;function lve(){}function cve(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=fhe(e),r}function uve(e,t,r){r==null&&(r=bt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return E_({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Cq(e,r),r.slice(0,r.l)}function dve(e){var t=_l(e);return[t]}function fve(e,t,r){return r==null&&(r=bt(8)),b0(t,r)}function hve(e){var t=_0(e);return[t]}function gve(e,t,r){return r==null&&(r=bt(4)),S0(t,r)}function pve(e){var t=_l(e),r=e.read_shift(1);return[t,r,"b"]}function mve(e,t,r){return r==null&&(r=bt(9)),b0(t,r),r.write_shift(1,e.v?1:0),r}function yve(e){var t=_0(e),r=e.read_shift(1);return[t,r,"b"]}function xve(e,t,r){return r==null&&(r=bt(5)),S0(t,r),r.write_shift(1,e.v?1:0),r}function vve(e){var t=_l(e),r=e.read_shift(1);return[t,r,"e"]}function wve(e,t,r){return r==null&&(r=bt(9)),b0(t,r),r.write_shift(1,e.v),r}function bve(e){var t=_0(e),r=e.read_shift(1);return[t,r,"e"]}function _ve(e,t,r){return r==null&&(r=bt(8)),S0(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function Sve(e){var t=_l(e),r=e.read_shift(4);return[t,r,"s"]}function kve(e,t,r){return r==null&&(r=bt(12)),b0(t,r),r.write_shift(4,t.v),r}function Tve(e){var t=_0(e),r=e.read_shift(4);return[t,r,"s"]}function Cve(e,t,r){return r==null&&(r=bt(8)),S0(t,r),r.write_shift(4,t.v),r}function Eve(e){var t=_l(e),r=Si(e);return[t,r,"n"]}function Nve(e,t,r){return r==null&&(r=bt(16)),b0(t,r),l0(e.v,r),r}function PK(e){var t=_0(e),r=Si(e);return[t,r,"n"]}function Ave(e,t,r){return r==null&&(r=bt(12)),S0(t,r),l0(e.v,r),r}function jve(e){var t=_l(e),r=_6(e);return[t,r,"n"]}function Pve(e,t,r){return r==null&&(r=bt(12)),b0(t,r),Eq(e.v,r),r}function Ove(e){var t=_0(e),r=_6(e);return[t,r,"n"]}function Fve(e,t,r){return r==null&&(r=bt(8)),S0(t,r),Eq(e.v,r),r}function Rve(e){var t=_l(e),r=v6(e);return[t,r,"is"]}function Dve(e){var t=_l(e),r=Ei(e);return[t,r,"str"]}function Ive(e,t,r){return r==null&&(r=bt(12+4*e.v.length)),b0(t,r),La(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Mve(e){var t=_0(e),r=Ei(e);return[t,r,"str"]}function Lve(e,t,r){return r==null&&(r=bt(8+4*e.v.length)),S0(t,r),La(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Bve(e,t,r){var n=e.l+t,s=_l(e);s.r=r["!row"];var a=e.read_shift(1),i=[s,a,"b"];if(r.cellFormula){e.l+=2;var o=dS(e,n-e.l,r);i[3]=vi(o,null,s,r.supbooks,r)}else e.l=n;return i}function $ve(e,t,r){var n=e.l+t,s=_l(e);s.r=r["!row"];var a=e.read_shift(1),i=[s,a,"e"];if(r.cellFormula){e.l+=2;var o=dS(e,n-e.l,r);i[3]=vi(o,null,s,r.supbooks,r)}else e.l=n;return i}function Uve(e,t,r){var n=e.l+t,s=_l(e);s.r=r["!row"];var a=Si(e),i=[s,a,"n"];if(r.cellFormula){e.l+=2;var o=dS(e,n-e.l,r);i[3]=vi(o,null,s,r.supbooks,r)}else e.l=n;return i}function Wve(e,t,r){var n=e.l+t,s=_l(e);s.r=r["!row"];var a=Ei(e),i=[s,a,"str"];if(r.cellFormula){e.l+=2;var o=dS(e,n-e.l,r);i[3]=vi(o,null,s,r.supbooks,r)}else e.l=n;return i}var zve=k0,Hve=pm;function Gve(e,t){return t==null&&(t=bt(4)),t.write_shift(4,e),t}function Vve(e,t){var r=e.l+t,n=k0(e),s=w6(e),a=Ei(e),i=Ei(e),o=Ei(e);e.l=r;var l={rfx:n,relId:s,loc:a,display:o};return i&&(l.Tooltip=i),l}function qve(e,t){var r=bt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));pm({s:ws(e[0]),e:ws(e[0])},r),b6("rId"+t,r);var n=e[1].Target.indexOf("#"),s=n==-1?"":e[1].Target.slice(n+1);return La(s||"",r),La(e[1].Tooltip||"",r),La("",r),r.slice(0,r.l)}function Kve(){}function Xve(e,t,r){var n=e.l+t,s=Nq(e),a=e.read_shift(1),i=[s];if(i[2]=a,r.cellFormula){var o=vxe(e,n-e.l,r);i[1]=o}else e.l=n;return i}function Yve(e,t,r){var n=e.l+t,s=k0(e),a=[s];if(r.cellFormula){var i=bxe(e,n-e.l,r);a[1]=i,e.l=n}else e.l=n;return a}function Jve(e,t,r){r==null&&(r=bt(18));var n=fS(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var OK=["left","right","top","bottom","header","footer"];function Qve(e){var t={};return OK.forEach(function(r){t[r]=Si(e)}),t}function Zve(e,t){return t==null&&(t=bt(48)),zh(e),OK.forEach(function(r){l0(e[r],t)}),t}function e1e(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function t1e(e,t,r){r==null&&(r=bt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function r1e(e){var t=bt(24);return t.write_shift(4,4),t.write_shift(4,1),pm(e,t),t}function n1e(e,t){return t==null&&(t=bt(66)),t.write_shift(2,e.password?N6(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function s1e(){}function a1e(){}function i1e(e,t,r,n,s,a,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var l=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,g=!1,p,x,y,v,T,_,b,E,k,A=[];o.biff=12,o["!row"]=0;var P=0,j=!1,O=[],R={},M=o.supbooks||s.supbooks||[[]];if(M.sharedf=R,M.arrayf=O,M.SheetNames=s.SheetNames||s.Sheets.map(function(z){return z.name}),!o.supbooks&&(o.supbooks=M,s.Names))for(var G=0;G<s.Names.length;++G)M[0][G+1]=s.Names[G];var K=[],re=[],Y=!1;Cv[16]={n:"BrtShortReal",f:PK};var ee;if(ad(e,function(I,W,V){if(!g)switch(V){case 148:u=I;break;case 0:p=I,o.sheetRows&&o.sheetRows<=p.r&&(g=!0),E=Vs(v=p.r),o["!row"]=p.r,(I.hidden||I.hpt||I.level!=null)&&(I.hpt&&(I.hpx=Cp(I.hpt)),re[I.r]=I);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(x={t:I[2]},I[2]){case"n":x.v=I[1];break;case"s":b=Wx[I[1]],x.v=b.t,x.r=b.r;break;case"b":x.v=!!I[1];break;case"e":x.v=I[1],o.cellText!==!1&&(x.w=id[x.v]);break;case"str":x.t="s",x.v=I[1];break;case"is":x.t="s",x.v=I[1].t;break}if((y=i.CellXf[I[0].iStyleRef])&&NK(x,y.numFmtId,null,o,a,i),T=I[0].c==-1?T+1:I[0].c,o.dense?(l[v]||(l[v]=[]),l[v][T]=x):l[vs(T)+E]=x,o.cellFormula){for(j=!1,P=0;P<O.length;++P){var L=O[P];p.r>=L[0].s.r&&p.r<=L[0].e.r&&T>=L[0].s.c&&T<=L[0].e.c&&(x.F=Kr(L[0]),j=!0)}!j&&I.length>3&&(x.f=I[3])}if(d.s.r>p.r&&(d.s.r=p.r),d.s.c>T&&(d.s.c=T),d.e.r<p.r&&(d.e.r=p.r),d.e.c<T&&(d.e.c=T),o.cellDates&&y&&x.t=="n"&&fm(Ar[y.numFmtId])){var H=Ah(x.v);H&&(x.t="d",x.v=new Date(H.y,H.m-1,H.d,H.H,H.M,H.S,H.u))}ee&&(ee.type=="XLDAPR"&&(x.D=!0),ee=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;x={t:"z",v:void 0},T=I[0].c==-1?T+1:I[0].c,o.dense?(l[v]||(l[v]=[]),l[v][T]=x):l[vs(T)+E]=x,d.s.r>p.r&&(d.s.r=p.r),d.s.c>T&&(d.s.c=T),d.e.r<p.r&&(d.e.r=p.r),d.e.c<T&&(d.e.c=T),ee&&(ee.type=="XLDAPR"&&(x.D=!0),ee=void 0);break;case 176:A.push(I);break;case 49:ee=((o.xlmeta||{}).Cell||[])[I-1];break;case 494:var J=n["!id"][I.relId];for(J?(I.Target=J.Target,I.loc&&(I.Target+="#"+I.loc),I.Rel=J):I.relId==""&&(I.Target="#"+I.loc),v=I.rfx.s.r;v<=I.rfx.e.r;++v)for(T=I.rfx.s.c;T<=I.rfx.e.c;++T)o.dense?(l[v]||(l[v]=[]),l[v][T]||(l[v][T]={t:"z",v:void 0}),l[v][T].l=I):(_=Pr({c:T,r:v}),l[_]||(l[_]={t:"z",v:void 0}),l[_].l=I);break;case 426:if(!o.cellFormula)break;O.push(I),k=o.dense?l[v][T]:l[vs(T)+E],k.f=vi(I[1],d,{r:p.r,c:T},M,o),k.F=Kr(I[0]);break;case 427:if(!o.cellFormula)break;R[Pr(I[0].s)]=I[1],k=o.dense?l[v][T]:l[vs(T)+E],k.f=vi(I[1],d,{r:p.r,c:T},M,o);break;case 60:if(!o.cellStyles)break;for(;I.e>=I.s;)K[I.e--]={width:I.w/256,hidden:!!(I.flags&1),level:I.level},Y||(Y=!0,A6(I.w/256)),Sf(K[I.e+1]);break;case 161:l["!autofilter"]={ref:Kr(I)};break;case 476:l["!margins"]=I;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),I.name&&(s.Sheets[r].CodeName=I.name),(I.above||I.left)&&(l["!outline"]={above:I.above,left:I.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),I.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!W.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+V.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(l["!ref"]=Kr(u||d)),o.sheetRows&&l["!ref"]){var B=gn(l["!ref"]);o.sheetRows<=+B.e.r&&(B.e.r=o.sheetRows-1,B.e.r>d.e.r&&(B.e.r=d.e.r),B.e.r<B.s.r&&(B.s.r=B.e.r),B.e.c>d.e.c&&(B.e.c=d.e.c),B.e.c<B.s.c&&(B.s.c=B.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Kr(B))}return A.length>0&&(l["!merges"]=A),K.length>0&&(l["!cols"]=K),re.length>0&&(l["!rows"]=re),l}function o1e(e,t,r,n,s,a,i){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=os(t),t.z=t.z||Ar[14],t.v=_a(is(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var l={r,c:n};switch(l.s=Df(s.cellXfs,t,s),t.l&&a["!links"].push([Pr(l),t.l]),t.c&&a["!comments"].push([Pr(l),t.c]),t.t){case"s":case"str":return s.bookSST?(o=R6(s.Strings,t.v,s.revStrings),l.t="s",l.v=o,i?jt(e,18,Cve(t,l)):jt(e,7,kve(t,l))):(l.t="str",i?jt(e,17,Lve(t,l)):jt(e,6,Ive(t,l))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?jt(e,13,Fve(t,l)):jt(e,2,Pve(t,l)):i?jt(e,16,Ave(t,l)):jt(e,5,Nve(t,l)),!0;case"b":return l.t="b",i?jt(e,15,xve(t,l)):jt(e,4,mve(t,l)),!0;case"e":return l.t="e",i?jt(e,14,_ve(t,l)):jt(e,3,wve(t,l)),!0}return i?jt(e,12,gve(t,l)):jt(e,1,fve(t,l)),!0}function l1e(e,t,r,n){var s=gn(t["!ref"]||"A1"),a,i="",o=[];jt(e,145);var l=Array.isArray(t),u=s.e.r;t["!rows"]&&(u=Math.max(s.e.r,t["!rows"].length-1));for(var d=s.s.r;d<=u;++d){i=Vs(d),ave(e,t,s,d);var f=!1;if(d<=s.e.r)for(var g=s.s.c;g<=s.e.c;++g){d===s.s.r&&(o[g]=vs(g)),a=o[g]+i;var p=l?(t[d]||[])[g]:t[a];if(!p){f=!1;continue}f=o1e(e,p,d,g,n,t,f)}}jt(e,146)}function c1e(e,t){!t||!t["!merges"]||(jt(e,177,Gve(t["!merges"].length)),t["!merges"].forEach(function(r){jt(e,176,Hve(r))}),jt(e,178))}function u1e(e,t){!t||!t["!cols"]||(jt(e,390),t["!cols"].forEach(function(r,n){r&&jt(e,60,Jve(n,r))}),jt(e,391))}function d1e(e,t){!t||!t["!ref"]||(jt(e,648),jt(e,649,r1e(gn(t["!ref"]))),jt(e,650))}function f1e(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var s=Rn(r,-1,n[1].Target.replace(/#.*$/,""),rn.HLINK);jt(e,494,qve(n,s))}}),delete t["!links"]}function h1e(e,t,r,n){if(t["!comments"].length>0){var s=Rn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",rn.VML);jt(e,551,b6("rId"+s)),t["!legacy"]=s}}function g1e(e,t,r,n){if(t["!autofilter"]){var s=t["!autofilter"],a=typeof s.ref=="string"?s.ref:Kr(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=mo(a);o.s.r==o.e.r&&(o.e.r=mo(t["!ref"]).e.r,a=Kr(o));for(var l=0;l<i.length;++l){var u=i[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+a;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),jt(e,161,pm(gn(a))),jt(e,162)}}function p1e(e,t,r){jt(e,133),jt(e,137,t1e(t,r)),jt(e,138),jt(e,134)}function m1e(e,t){t["!protect"]&&jt(e,535,n1e(t["!protect"]))}function y1e(e,t,r,n){var s=po(),a=r.SheetNames[e],i=r.Sheets[a]||{},o=a;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var l=gn(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],jt(s,129),(r.vbaraw||i["!outline"])&&jt(s,147,uve(o,i["!outline"])),jt(s,148,ove(l)),p1e(s,i,r.Workbook),u1e(s,i),l1e(s,i,e,t),m1e(s,i),g1e(s,i,r,e),c1e(s,i),f1e(s,i,n),i["!margins"]&&jt(s,476,Zve(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&d1e(s,i),h1e(s,i,e,n),jt(s,130),s.end()}function x1e(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var i=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var s=fn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){n=a.replace(/<.*?>/g,"")}),[t,s,n]}function v1e(e,t,r,n,s,a){var i=a||{"!type":"chart"};if(!e)return a;var o=0,l=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var g=x1e(f);d.s.r=d.s.c=0,d.e.c=o,u=vs(o),g[0].forEach(function(p,x){i[u+Vs(x)]={t:"n",v:p,z:g[1]},l=x}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=Kr(d)),i}function w1e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(AK);return o&&D6(o[0],a,s,r),(i=e.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=i[1]),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}function b1e(e,t){e.l+=10;var r=Ei(e);return{name:r}}function _1e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i=!1;return ad(e,function(l,u,d){switch(d){case 550:a["!rel"]=l;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),l.name&&(s.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}var I6=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],S1e=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],k1e=[],T1e=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function mM(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var a=t[s];if(n[a[0]]==null)n[a[0]]=a[1];else switch(a[2]){case"bool":typeof n[a[0]]=="string"&&(n[a[0]]=ns(n[a[0]]));break;case"int":typeof n[a[0]]=="string"&&(n[a[0]]=parseInt(n[a[0]],10));break}}}function yM(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=ns(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function FK(e){yM(e.WBProps,I6),yM(e.CalcPr,T1e),mM(e.WBView,S1e),mM(e.Sheets,k1e),up.date1904=ns(e.WBProps.date1904)}function C1e(e){return!e.Workbook||!e.Workbook.WBProps?"false":ns(e.Workbook.WBProps.date1904)?"true":"false"}var E1e="][*?/\\".split("");function RK(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return E1e.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function N1e(e,t,r){e.forEach(function(n,s){RK(n);for(var a=0;a<s;++a)if(n==e[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[s]&&t[s].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function A1e(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];N1e(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Cxe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var j1e=/<\w+:workbook/;function P1e(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",a={},i=0;if(e.replace(ji,function(l,u){var d=Dr(l);switch(Jc(d[0])){case"<?xml":break;case"<workbook":l.match(j1e)&&(s="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":I6.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=ns(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Wn(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=fn(Wn(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":a={},a.Name=Wn(d.name),d.comment&&(a.Comment=d.comment),d.localSheetId&&(a.Sheet=+d.localSheetId),ns(d.hidden||"0")&&(a.Hidden=!0),i=u+l.length;break;case"</definedName>":a.Ref=fn(Wn(e.slice(i,u))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),w0.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return FK(r),r}function DK(e){var t=[Ks];t[t.length]=Vt("workbook",null,{xmlns:w0[0],"xmlns:r":va.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(I6.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Vt("workbookPr",null,n);var s=e.Workbook&&e.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",a=0;a!=e.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==e.SheetNames.length&&(a=0),t[t.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",a=0;a!=e.SheetNames.length;++a){var i={name:Dn(e.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=Vt("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(t[t.length]=Vt("definedName",Dn(o.Ref),l))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function O1e(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=zA(e),r.name=Ei(e),r}function F1e(e,t){return t||(t=bt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),b6(e.strRelID,t),La(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function R1e(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?Ei(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function D1e(e,t){t||(t=bt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Cq(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function I1e(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function M1e(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),a=hhe(e),i=wxe(e,0,r),o=w6(e);e.l=n;var l={Name:a,Ptg:i};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function L1e(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var a=[],i=[[]];return i.SheetNames=[],i.XTI=[],Cv[16]={n:"BrtFRTArchID$",f:I1e},ad(e,function(l,u,d){switch(d){case 156:i.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(t.SID=l.Sheet),l.Ref=vi(l.Ptg,null,null,i,t),delete t.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(d),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),FK(r),r.Names=a,r.supbooks=i,r}function B1e(e,t){jt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};jt(e,156,F1e(s))}jt(e,144)}function $1e(e,t){t||(t=bt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return La("SheetJS",t),La(w_.version,t),La(w_.version,t),La("7262",t),t.length>t.l?t.slice(0,t.l):t}function U1e(e,t){t||(t=bt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function W1e(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,s=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&a==-1&&(a=n);a>s||(jt(e,135),jt(e,158,U1e(s)),jt(e,136))}}function z1e(e,t){var r=po();return jt(r,131),jt(r,128,$1e()),jt(r,153,D1e(e.Workbook&&e.Workbook.WBProps||null)),W1e(r,e),B1e(r,e),jt(r,132),r.end()}function H1e(e,t,r){return t.slice(-4)===".bin"?L1e(e,r):P1e(e,r)}function G1e(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?i1e(e,n,r,s,a,i,o):Mxe(e,n,r,s,a,i,o)}function V1e(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?_1e(e,n,r,s,a):w1e(e,n,r,s,a)}function q1e(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?Xme():Yme()}function K1e(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?qme():Kme()}function X1e(e,t,r,n){return t.slice(-4)===".bin"?Hpe(e,r,n):Ope(e,r,n)}function Y1e(e,t,r){return pK(e,r)}function J1e(e,t,r){return t.slice(-4)===".bin"?Jge(e,r):Kge(e,r)}function Q1e(e,t,r){return t.slice(-4)===".bin"?Wme(e,r):Fme(e,r)}function Z1e(e,t,r){return t.slice(-4)===".bin"?jme(e):Nme(e)}function ewe(e,t,r,n){return r.slice(-4)===".bin"?Pme(e,t,r,n):void 0}function twe(e,t,r){return t.slice(-4)===".bin"?Tme(e,t,r):Eme(e,t,r)}function rwe(e,t,r){return(t.slice(-4)===".bin"?z1e:DK)(e)}function nwe(e,t,r,n,s){return(t.slice(-4)===".bin"?y1e:jK)(e,r,n,s)}function swe(e,t,r){return(t.slice(-4)===".bin"?eme:hK)(e,r)}function awe(e,t,r){return(t.slice(-4)===".bin"?epe:aK)(e,r)}function iwe(e,t,r){return(t.slice(-4)===".bin"?zme:xK)(e)}function owe(e){return(e.slice(-4)===".bin"?Cme:mK)()}var IK=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,MK=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Bl(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match(IK),a,i,o,l;if(s)for(l=0;l!=s.length;++l)a=s[l].match(MK),(i=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),n[o]=a[2].slice(1,a[2].length-1));return n}function lwe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(IK),s,a,i,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(MK),(a=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(a+1),r[i]=s[2].slice(1,s[2].length-1));return r}var Hx;function cwe(e,t){var r=Hx[e]||fn(e);return r==="General"?i0(t):wl(r,t)}function uwe(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=ns(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=is(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[fn(t)]=s}function dwe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||id[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=yv(e.v):e.w=i0(e.v):e.w=cwe(t||"General",e.v)}catch(a){if(r.WTF)throw a}try{var n=Hx[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&fm(n)){var s=Ah(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(a){if(r.WTF)throw a}}}function fwe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=kpe[n.Pattern]||n.Pattern)}e[t.ID]=t}function hwe(e,t,r,n,s,a,i,o,l,u){var d="General",f=n.StyleID,g={};u=u||{};var p=[],x=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&i&&(f=i.StyleID);a[f]!==void 0&&(a[f].nf&&(d=a[f].nf),a[f].Interior&&p.push(a[f].Interior),!!a[f].Parent);)f=a[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=ns(e);break;case"String":n.t="s",n.r=RI(fn(e)),n.v=e.indexOf("<")>-1?fn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(is(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=fn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Pq[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=RI(t||e));break}if(dwe(n,d,u),u.cellFormula!==!1)if(n.Formula){var y=fn(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=cp(y,s),delete n.Formula,n.ArrayRange=="RC"?n.F=cp("RC:RC",s):n.ArrayRange&&(n.F=cp(n.ArrayRange,s),l.push([gn(n.F),n.F]))}else for(x=0;x<l.length;++x)s.r>=l[x][0].s.r&&s.r<=l[x][0].e.r&&s.c>=l[x][0].s.c&&s.c<=l[x][0].e.c&&(n.F=l[x][1]);u.cellStyles&&(p.forEach(function(v){!g.patternType&&v.patternType&&(g.patternType=v.patternType)}),n.s=g),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function gwe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function PT(e,t){var r=t||{};hm();var n=_x(g6(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Wn(n));var s=n.slice(0,1024).toLowerCase(),a=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var i=os(r);return i.type="string",Tp.to_workbook(n,i)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Nt){s.indexOf("<"+Nt)>=0&&(a=!0)}),a)return Zwe(n,r);Hx={"General Number":"General","General Date":Ar[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Ar[15],"Short Date":Ar[14],"Long Time":Ar[19],"Medium Time":Ar[18],"Short Time":Ar[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Ar[2],Standard:Ar[4],Percent:Ar[10],Scientific:Ar[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],u,d={},f=[],g=r.dense?[]:{},p="",x={},y={},v=Bl('<Data ss:Type="String">'),T=0,_=0,b=0,E={s:{r:2e6,c:2e6},e:{r:0,c:0}},k={},A={},P="",j=0,O=[],R={},M={},G=0,K=[],re=[],Y={},ee=[],B,z=!1,I=[],W=[],V={},L=0,H=0,J={Sheets:[],WBProps:{date1904:!1}},Q={};wv.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ne="";o=wv.exec(n);)switch(o[3]=(ne=o[3]).toLowerCase()){case"data":if(ne=="data"){if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?hwe(n.slice(T,o.index),P,v,l[l.length-1][0]=="comment"?Y:x,{c:_,r:b},k,ee[_],y,I,r):(P="",v=Bl(o[0]),T=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(re.length>0&&(x.c=re),(!r.sheetRows||r.sheetRows>b)&&x.v!==void 0&&(r.dense?(g[b]||(g[b]=[]),g[b][_]=x):g[vs(_)+Vs(b)]=x),x.HRef&&(x.l={Target:fn(x.HRef)},x.HRefScreenTip&&(x.l.Tooltip=x.HRefScreenTip),delete x.HRef,delete x.HRefScreenTip),(x.MergeAcross||x.MergeDown)&&(L=_+(parseInt(x.MergeAcross,10)|0),H=b+(parseInt(x.MergeDown,10)|0),O.push({s:{c:_,r:b},e:{c:L,r:H}})),!r.sheetStubs)x.MergeAcross?_=L+1:++_;else if(x.MergeAcross||x.MergeDown){for(var Z=_;Z<=L;++Z)for(var se=b;se<=H;++se)(Z>_||se>b)&&(r.dense?(g[se]||(g[se]=[]),g[se][Z]={t:"z"}):g[vs(Z)+Vs(se)]={t:"z"});_=L+1}else++_;else x=lwe(o[0]),x.Index&&(_=+x.Index-1),_<E.s.c&&(E.s.c=_),_>E.e.c&&(E.e.c=_),o[0].slice(-2)==="/>"&&++_,re=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(b<E.s.r&&(E.s.r=b),b>E.e.r&&(E.e.r=b),o[0].slice(-2)==="/>"&&(y=Bl(o[0]),y.Index&&(b=+y.Index-1)),_=0,++b):(y=Bl(o[0]),y.Index&&(b=+y.Index-1),V={},(y.AutoFitHeight=="0"||y.Height)&&(V.hpx=parseInt(y.Height,10),V.hpt=Tv(V.hpx),W[b]=V),y.Hidden=="1"&&(V.hidden=!0,W[b]=V));break;case"worksheet":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(p),E.s.r<=E.e.r&&E.s.c<=E.e.c&&(g["!ref"]=Kr(E),r.sheetRows&&r.sheetRows<=E.e.r&&(g["!fullref"]=g["!ref"],E.e.r=r.sheetRows-1,g["!ref"]=Kr(E))),O.length&&(g["!merges"]=O),ee.length>0&&(g["!cols"]=ee),W.length>0&&(g["!rows"]=W),d[p]=g}else E={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=_=0,l.push([o[3],!1]),u=Bl(o[0]),p=fn(u.Name),g=r.dense?[]:{},O=[],I=[],W=[],Q={name:p,Hidden:0},J.Sheets.push(Q);break;case"table":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),ee=[],z=!1}break;case"style":o[1]==="/"?fwe(k,A,r):A=Bl(o[0]);break;case"numberformat":A.nf=fn(Bl(o[0]).Format||"General"),Hx[A.nf]&&(A.nf=Hx[A.nf]);for(var ce=0;ce!=392&&Ar[ce]!=A.nf;++ce);if(ce==392){for(ce=57;ce!=392;++ce)if(Ar[ce]==null){Wu(A.nf,ce);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(B=Bl(o[0]),B.Hidden&&(B.hidden=!0,delete B.Hidden),B.Width&&(B.wpx=parseInt(B.Width,10)),!z&&B.wpx>10){z=!0,wi=dK;for(var he=0;he<ee.length;++he)ee[he]&&Sf(ee[he])}z&&Sf(B),ee[B.Index-1||ee.length]=B;for(var Ee=0;Ee<+B.Span;++Ee)ee[ee.length]=os(B);break;case"namedrange":if(o[1]==="/")break;J.Names||(J.Names=[]);var ie=Dr(o[0]),me={Name:ie.Name,Ref:cp(ie.RefersTo.slice(1),{r:0,c:0})};J.Sheets.length>0&&(me.Sheet=J.Sheets.length-1),J.Names.push(me);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?P+=n.slice(j,o.index):j=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;A.Interior=Bl(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?Lhe(R,ne,n.slice(G,o.index)):G=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));gwe(Y),re.push(Y)}else l.push([o[3],!1]),u=Bl(o[0]),Y={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Ne=Bl(o[0]);g["!autofilter"]={ref:cp(Ne.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return _M(n,r);var Oe=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Oe=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Oe=!1}break;case"excelworkbook":switch(o[3]){case"date1904":J.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Oe=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Oe=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(G,o.index)){case"SheetHidden":Q.Hidden=1;break;case"SheetVeryHidden":Q.Hidden=2;break}else G=o.index+o[0].length;break;case"header":g["!margins"]||zh(g["!margins"]={},"xlml"),isNaN(+Dr(o[0]).Margin)||(g["!margins"].header=+Dr(o[0]).Margin);break;case"footer":g["!margins"]||zh(g["!margins"]={},"xlml"),isNaN(+Dr(o[0]).Margin)||(g["!margins"].footer=+Dr(o[0]).Margin);break;case"pagemargins":var Re=Dr(o[0]);g["!margins"]||zh(g["!margins"]={},"xlml"),isNaN(+Re.Top)||(g["!margins"].top=+Re.Top),isNaN(+Re.Left)||(g["!margins"].left=+Re.Left),isNaN(+Re.Right)||(g["!margins"].right=+Re.Right),isNaN(+Re.Bottom)||(g["!margins"].bottom=+Re.Bottom);break;case"displayrighttoleft":J.Views||(J.Views=[]),J.Views[0]||(J.Views[0]={}),J.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":g["!outline"]||(g["!outline"]={}),g["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":g["!outline"]||(g["!outline"]={}),g["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Oe=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Oe=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Oe=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Oe=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Oe=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Oe=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Oe=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Oe=!1}break;case"smarttags":break;default:Oe=!1;break}if(Oe||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?uwe(M,ne,K,n.slice(G,o.index)):(K=o,G=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var ze={};return!r.bookSheets&&!r.bookProps&&(ze.Sheets=d),ze.SheetNames=f,ze.Workbook=J,ze.SSF=os(Ar),ze.Props=R,ze.Custprops=M,ze}function YA(e,t){switch(L6(t=t||{}),t.type||"base64"){case"base64":return PT(Mo(e),t);case"binary":case"buffer":case"file":return PT(e,t);case"array":return PT(Ff(e),t)}}function pwe(e,t){var r=[];return e.Props&&r.push(Bhe(e.Props,t)),e.Custprops&&r.push($he(e.Props,e.Custprops)),r.join("")}function mwe(){return""}function ywe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,s){var a=[];a.push(Vt("NumberFormat",null,{"ss:Format":Dn(Ar[n.numFmtId])}));var i={"ss:ID":"s"+(21+s)};r.push(Vt("Style",a.join(""),i))}),Vt("Styles",r.join(""))}function LK(e){return Vt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+O6(e.Ref,{r:0,c:0})})}function xwe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var s=t[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(LK(s)))}return Vt("Names",r.join(""))}function vwe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||a.push(LK(o)))}return a.join("")}function wwe(e,t,r,n){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(Vt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(Vt("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(Vt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(Vt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(ai("ProtectContents","True")),e["!protect"].objects&&s.push(ai("ProtectObjects","True")),e["!protect"].scenarios&&s.push(ai("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(ai("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(ai("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&s.push("<"+i[1]+"/>")})),s.length==0?"":Vt("WorksheetOptions",s.join(""),{xmlns:Po.x})}function bwe(e){return e.map(function(t){var r=Wfe(t.t||""),n=Vt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Vt("Comment",n,{"ss:Author":t.a})}).join("")}function _we(e,t,r,n,s,a,i){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+Dn(O6(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var l=ws(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=Dn(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=Dn(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",g="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",g=String(e.v);break;case"b":f="Boolean",g=e.v?"1":"0";break;case"e":f="Error",g=id[e.v];break;case"d":f="DateTime",g=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Ar[14]);break;case"s":f="String",g=Ufe(e.v||"");break}var p=Df(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=i.c+1;var x=e.v!=null?g:"",y=e.t=="z"?"":'<Data ss:Type="'+f+'">'+x+"</Data>";return(e.c||[]).length>0&&(y+=bwe(e.c)),Vt("Cell",y,o)}function Swe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Cp(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function kwe(e,t,r,n){if(!e["!ref"])return"";var s=gn(e["!ref"]),a=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(v,T){Sf(v);var _=!!v.width,b=fS(T,v),E={"ss:Index":T+1};_&&(E["ss:Width"]=Sv(b.width)),v.hidden&&(E["ss:Hidden"]="1"),o.push(Vt("Column",null,E))});for(var l=Array.isArray(e),u=s.s.r;u<=s.e.r;++u){for(var d=[Swe(u,(e["!rows"]||[])[u])],f=s.s.c;f<=s.e.c;++f){var g=!1;for(i=0;i!=a.length;++i)if(!(a[i].s.c>f)&&!(a[i].s.r>u)&&!(a[i].e.c<f)&&!(a[i].e.r<u)){(a[i].s.c!=f||a[i].s.r!=u)&&(g=!0);break}if(!g){var p={r:u,c:f},x=Pr(p),y=l?(e[u]||[])[f]:e[x];d.push(_we(y,x,e,t,r,n,p))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function Twe(e,t,r){var n=[],s=r.SheetNames[e],a=r.Sheets[s],i=a?vwe(a,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=a?kwe(a,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(wwe(a,t,e,r)),n.join("")}function Cwe(e,t){t||(t={}),e.SSF||(e.SSF=os(Ar)),e.SSF&&(hm(),aS(e.SSF),t.revssf=oS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Df(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(pwe(e,t)),r.push(mwe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Vt("Worksheet",Twe(n,t,e),{"ss:Name":Dn(e.SheetNames[n])}));return r[2]=ywe(e,t),r[3]=xwe(e),Ks+Vt("Workbook",r.join(""),{xmlns:Po.ss,"xmlns:o":Po.o,"xmlns:x":Po.x,"xmlns:ss":Po.ss,"xmlns:dt":Po.dt,"xmlns:html":Po.html})}function Ewe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=xhe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=vhe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var Nwe=[60,1084,2066,2165,2175];function Awe(e,t,r,n,s){var a=n,i=[],o=r.slice(r.l,r.l+a);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}i.push(o),r.l+=a;for(var l=Iu(r,r.l),u=JA[l],d=0;u!=null&&Nwe.indexOf(l)>-1;)a=Iu(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+a),i.push(o),r.l+=4+a,u=JA[l=Iu(r,r.l)];var f=Ia(i);ri(f,0);var g=0;f.lens=[];for(var p=0;p<i.length;++p)f.lens.push(g),g+=i[p].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,s)}function jc(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Ar[n])}catch(a){if(t.WTF)throw a}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||id[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=yv(e.v):e.w=i0(e.v):e.w=wl(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(a){if(t.WTF)throw a}if(t.cellDates&&n&&e.t=="n"&&fm(Ar[n]||String(n))){var s=Ah(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function wb(e,t,r){return{v:e,ixfe:t,t:r}}function jwe(e,t){var r={opts:{}},n={},s=t.dense?[]:{},a={},i={},o=null,l=[],u="",d={},f,g="",p,x,y,v,T={},_=[],b,E,k=[],A=[],P={Sheets:[],WBProps:{date1904:!1},Views:[{}]},j={},O=function(gt){return gt<8?$h[gt]:gt<64&&A[gt-8]||$h[gt]},R=function(gt,_t,Wt){var Zt=_t.XF.data;if(!(!Zt||!Zt.patternType||!Wt||!Wt.cellStyles)){_t.s={},_t.s.patternType=Zt.patternType;var pr;(pr=_v(O(Zt.icvFore)))&&(_t.s.fgColor={rgb:pr}),(pr=_v(O(Zt.icvBack)))&&(_t.s.bgColor={rgb:pr})}},M=function(gt,_t,Wt){if(!(V>1)&&!(Wt.sheetRows&&gt.r>=Wt.sheetRows)){if(Wt.cellStyles&&_t.XF&&_t.XF.data&&R(gt,_t,Wt),delete _t.ixfe,delete _t.XF,f=gt,g=Pr(gt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),gt.r<i.s.r&&(i.s.r=gt.r),gt.c<i.s.c&&(i.s.c=gt.c),gt.r+1>i.e.r&&(i.e.r=gt.r+1),gt.c+1>i.e.c&&(i.e.c=gt.c+1),Wt.cellFormula&&_t.f){for(var Zt=0;Zt<_.length;++Zt)if(!(_[Zt][0].s.c>gt.c||_[Zt][0].s.r>gt.r)&&!(_[Zt][0].e.c<gt.c||_[Zt][0].e.r<gt.r)){_t.F=Kr(_[Zt][0]),(_[Zt][0].s.c!=gt.c||_[Zt][0].s.r!=gt.r)&&delete _t.f,_t.f&&(_t.f=""+vi(_[Zt][1],i,gt,I,G));break}}Wt.dense?(s[gt.r]||(s[gt.r]=[]),s[gt.r][gt.c]=_t):s[g]=_t}},G={enc:!1,sbcch:0,snames:[],sharedf:T,arrayf:_,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(G.password=t.password);var K,re=[],Y=[],ee=[],B=[],z=!1,I=[];I.SheetNames=G.snames,I.sharedf=G.sharedf,I.arrayf=G.arrayf,I.names=[],I.XTI=[];var W=0,V=0,L=0,H=[],J=[],Q;G.codepage=1200,Xl(1200);for(var ne=!1;e.l<e.length-1;){var Z=e.l,se=e.read_shift(2);if(se===0&&W===10)break;var ce=e.l===e.length?0:e.read_shift(2),he=JA[se];if(he&&he.f){if(t.bookSheets&&W===133&&se!==133)break;if(W=se,he.r===2||he.r==12){var Ee=e.read_shift(2);if(ce-=2,!G.enc&&Ee!==se&&((Ee&255)<<8|Ee>>8)!==se)throw new Error("rt mismatch: "+Ee+"!="+se);he.r==12&&(e.l+=10,ce-=10)}var ie={};if(se===10?ie=he.f(e,ce,G):ie=Awe(se,he,e,ce,G),V==0&&[9,521,1033,2057].indexOf(W)===-1)continue;switch(se){case 34:r.opts.Date1904=P.WBProps.date1904=ie;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(G.enc||(e.l=0),G.enc=ie,!t.password)throw new Error("File is password-protected");if(ie.valid==null)throw new Error("Encryption scheme unsupported");if(!ie.valid)throw new Error("Password is incorrect");break;case 92:G.lastuser=ie;break;case 66:var me=Number(ie);switch(me){case 21010:me=1200;break;case 32768:me=1e4;break;case 32769:me=1252;break}Xl(G.codepage=me),ne=!0;break;case 317:G.rrtabid=ie;break;case 25:G.winlocked=ie;break;case 439:r.opts.RefreshAll=ie;break;case 12:r.opts.CalcCount=ie;break;case 16:r.opts.CalcDelta=ie;break;case 17:r.opts.CalcIter=ie;break;case 13:r.opts.CalcMode=ie;break;case 14:r.opts.CalcPrecision=ie;break;case 95:r.opts.CalcSaveRecalc=ie;break;case 15:G.CalcRefMode=ie;break;case 2211:r.opts.FullCalc=ie;break;case 129:ie.fDialog&&(s["!type"]="dialog"),ie.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),ie.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:k.push(ie);break;case 430:I.push([ie]),I[I.length-1].XTI=[];break;case 35:case 547:I[I.length-1].push(ie);break;case 24:case 536:Q={Name:ie.Name,Ref:vi(ie.rgce,i,null,I,G)},ie.itab>0&&(Q.Sheet=ie.itab-1),I.names.push(Q),I[0]||(I[0]=[],I[0].XTI=[]),I[I.length-1].push(ie),ie.Name=="_xlnm._FilterDatabase"&&ie.itab>0&&ie.rgce&&ie.rgce[0]&&ie.rgce[0][0]&&ie.rgce[0][0][0]=="PtgArea3d"&&(J[ie.itab-1]={ref:Kr(ie.rgce[0][0][1][2])});break;case 22:G.ExternCount=ie;break;case 23:I.length==0&&(I[0]=[],I[0].XTI=[]),I[I.length-1].XTI=I[I.length-1].XTI.concat(ie),I.XTI=I.XTI.concat(ie);break;case 2196:if(G.biff<8)break;Q!=null&&(Q.Comment=ie[1]);break;case 18:s["!protect"]=ie;break;case 19:ie!==0&&G.WTF&&console.error("Password verifier: "+ie);break;case 133:a[ie.pos]=ie,G.snames.push(ie.name);break;case 10:{if(--V)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,s["!ref"]=Kr(i),t.sheetRows&&t.sheetRows<=i.e.r){var Ne=i.e.r;i.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=Kr(i),i.e.r=Ne}i.e.r++,i.e.c++}re.length>0&&(s["!merges"]=re),Y.length>0&&(s["!objects"]=Y),ee.length>0&&(s["!cols"]=ee),B.length>0&&(s["!rows"]=B),P.Sheets.push(j)}u===""?d=s:n[u]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(G.biff===8&&(G.biff={9:2,521:3,1033:4}[se]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ie.BIFFVer]||8),G.biffguess=ie.BIFFVer==0,ie.BIFFVer==0&&ie.dt==4096&&(G.biff=5,ne=!0,Xl(G.codepage=28591)),G.biff==8&&ie.BIFFVer==0&&ie.dt==16&&(G.biff=2),V++)break;if(s=t.dense?[]:{},G.biff<8&&!ne&&(ne=!0,Xl(G.codepage=t.codepage||1252)),G.biff<5||ie.BIFFVer==0&&ie.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Oe={pos:e.l-ce,name:u};a[Oe.pos]=Oe,G.snames.push(u)}else u=(a[Z]||{name:""}).name;ie.dt==32&&(s["!type"]="chart"),ie.dt==64&&(s["!type"]="macro"),re=[],Y=[],G.arrayf=_=[],ee=[],B=[],z=!1,j={Hidden:(a[Z]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[ie.r]||[])[ie.c]:s[Pr({c:ie.c,r:ie.r})])&&++ie.c,b={ixfe:ie.ixfe,XF:k[ie.ixfe]||{},v:ie.val,t:"n"},L>0&&(b.z=H[b.ixfe>>8&63]),jc(b,t,r.opts.Date1904),M({c:ie.c,r:ie.r},b,t);break;case 5:case 517:b={ixfe:ie.ixfe,XF:k[ie.ixfe],v:ie.val,t:ie.t},L>0&&(b.z=H[b.ixfe>>8&63]),jc(b,t,r.opts.Date1904),M({c:ie.c,r:ie.r},b,t);break;case 638:b={ixfe:ie.ixfe,XF:k[ie.ixfe],v:ie.rknum,t:"n"},L>0&&(b.z=H[b.ixfe>>8&63]),jc(b,t,r.opts.Date1904),M({c:ie.c,r:ie.r},b,t);break;case 189:for(var Re=ie.c;Re<=ie.C;++Re){var ze=ie.rkrec[Re-ie.c][0];b={ixfe:ze,XF:k[ze],v:ie.rkrec[Re-ie.c][1],t:"n"},L>0&&(b.z=H[b.ixfe>>8&63]),jc(b,t,r.opts.Date1904),M({c:Re,r:ie.r},b,t)}break;case 6:case 518:case 1030:{if(ie.val=="String"){o=ie;break}if(b=wb(ie.val,ie.cell.ixfe,ie.tt),b.XF=k[b.ixfe],t.cellFormula){var Nt=ie.formula;if(Nt&&Nt[0]&&Nt[0][0]&&Nt[0][0][0]=="PtgExp"){var et=Nt[0][0][1][0],Me=Nt[0][0][1][1],Fe=Pr({r:et,c:Me});T[Fe]?b.f=""+vi(ie.formula,i,ie.cell,I,G):b.F=((t.dense?(s[et]||[])[Me]:s[Fe])||{}).F}else b.f=""+vi(ie.formula,i,ie.cell,I,G)}L>0&&(b.z=H[b.ixfe>>8&63]),jc(b,t,r.opts.Date1904),M(ie.cell,b,t),o=ie}break;case 7:case 519:if(o)o.val=ie,b=wb(ie,o.cell.ixfe,"s"),b.XF=k[b.ixfe],t.cellFormula&&(b.f=""+vi(o.formula,i,o.cell,I,G)),L>0&&(b.z=H[b.ixfe>>8&63]),jc(b,t,r.opts.Date1904),M(o.cell,b,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{_.push(ie);var Ke=Pr(ie[0].s);if(p=t.dense?(s[ie[0].s.r]||[])[ie[0].s.c]:s[Ke],t.cellFormula&&p){if(!o||!Ke||!p)break;p.f=""+vi(ie[1],i,ie[0],I,G),p.F=Kr(ie[0])}}break;case 1212:{if(!t.cellFormula)break;if(g){if(!o)break;T[Pr(o.cell)]=ie[0],p=t.dense?(s[o.cell.r]||[])[o.cell.c]:s[Pr(o.cell)],(p||{}).f=""+vi(ie[0],i,f,I,G)}}break;case 253:b=wb(l[ie.isst].t,ie.ixfe,"s"),l[ie.isst].h&&(b.h=l[ie.isst].h),b.XF=k[b.ixfe],L>0&&(b.z=H[b.ixfe>>8&63]),jc(b,t,r.opts.Date1904),M({c:ie.c,r:ie.r},b,t);break;case 513:t.sheetStubs&&(b={ixfe:ie.ixfe,XF:k[ie.ixfe],t:"z"},L>0&&(b.z=H[b.ixfe>>8&63]),jc(b,t,r.opts.Date1904),M({c:ie.c,r:ie.r},b,t));break;case 190:if(t.sheetStubs)for(var xt=ie.c;xt<=ie.C;++xt){var ut=ie.ixfe[xt-ie.c];b={ixfe:ut,XF:k[ut],t:"z"},L>0&&(b.z=H[b.ixfe>>8&63]),jc(b,t,r.opts.Date1904),M({c:xt,r:ie.r},b,t)}break;case 214:case 516:case 4:b=wb(ie.val,ie.ixfe,"s"),b.XF=k[b.ixfe],L>0&&(b.z=H[b.ixfe>>8&63]),jc(b,t,r.opts.Date1904),M({c:ie.c,r:ie.r},b,t);break;case 0:case 512:V===1&&(i=ie);break;case 252:l=ie;break;case 1054:if(G.biff==4){H[L++]=ie[1];for(var At=0;At<L+163&&Ar[At]!=ie[1];++At);At>=163&&Wu(ie[1],L+163)}else Wu(ie[1],ie[0]);break;case 30:{H[L++]=ie;for(var Dt=0;Dt<L+163&&Ar[Dt]!=ie;++Dt);Dt>=163&&Wu(ie,L+163)}break;case 229:re=re.concat(ie);break;case 93:Y[ie.cmo[0]]=G.lastobj=ie;break;case 438:G.lastobj.TxO=ie;break;case 127:G.lastobj.ImData=ie;break;case 440:for(v=ie[0].s.r;v<=ie[0].e.r;++v)for(y=ie[0].s.c;y<=ie[0].e.c;++y)p=t.dense?(s[v]||[])[y]:s[Pr({c:y,r:v})],p&&(p.l=ie[1]);break;case 2048:for(v=ie[0].s.r;v<=ie[0].e.r;++v)for(y=ie[0].s.c;y<=ie[0].e.c;++y)p=t.dense?(s[v]||[])[y]:s[Pr({c:y,r:v})],p&&p.l&&(p.l.Tooltip=ie[1]);break;case 28:{if(G.biff<=5&&G.biff>=2)break;p=t.dense?(s[ie[0].r]||[])[ie[0].c]:s[Pr(ie[0])];var Qe=Y[ie[2]];p||(t.dense?(s[ie[0].r]||(s[ie[0].r]=[]),p=s[ie[0].r][ie[0].c]={t:"z"}):p=s[Pr(ie[0])]={t:"z"},i.e.r=Math.max(i.e.r,ie[0].r),i.s.r=Math.min(i.s.r,ie[0].r),i.e.c=Math.max(i.e.c,ie[0].c),i.s.c=Math.min(i.s.c,ie[0].c)),p.c||(p.c=[]),x={a:ie[1],t:Qe.TxO.t},p.c.push(x)}break;case 2173:yme(k[ie.ixfe],ie.ext);break;case 125:{if(!G.cellStyles)break;for(;ie.e>=ie.s;)ee[ie.e--]={width:ie.w/256,level:ie.level||0,hidden:!!(ie.flags&1)},z||(z=!0,A6(ie.w/256)),Sf(ee[ie.e+1])}break;case 520:{var tt={};ie.level!=null&&(B[ie.r]=tt,tt.level=ie.level),ie.hidden&&(B[ie.r]=tt,tt.hidden=!0),ie.hpt&&(B[ie.r]=tt,tt.hpt=ie.hpt,tt.hpx=Cp(ie.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||zh(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[se]]=ie;break;case 161:s["!margins"]||zh(s["!margins"]={}),s["!margins"].header=ie.header,s["!margins"].footer=ie.footer;break;case 574:ie.RTL&&(P.Views[0].RTL=!0);break;case 146:A=ie;break;case 2198:K=ie;break;case 140:E=ie;break;case 442:u?j.CodeName=ie||j.name:P.WBProps.CodeName=ie||"ThisWorkbook";break}}else he||console.error("Missing Info for XLS Record 0x"+se.toString(16)),e.l+=ce}return r.SheetNames=Rs(a).sort(function(vt,gt){return Number(vt)-Number(gt)}).map(function(vt){return a[vt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&J.forEach(function(vt,gt){r.Sheets[r.SheetNames[gt]]["!autofilter"]=vt}),r.Strings=l,r.SSF=os(Ar),G.enc&&(r.Encryption=G.enc),K&&(r.Themes=K),r.Metadata={},E!==void 0&&(r.Metadata.Country=E),I.names.length>0&&(P.Names=I.names),r.Workbook=P,r}var Gx={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Pwe(e,t,r){var n=wr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=QI(n,HA,Gx.DSI);for(var a in s)t[a]=s[a]}catch(u){if(r.WTF)throw u}var i=wr.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=QI(i,GA,Gx.SI);for(var l in o)t[l]==null&&(t[l]=o[l])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(Mq(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function Owe(e,t){var r=[],n=[],s=[],a=0,i,o=NI(HA,"n"),l=NI(GA,"n");if(e.Props)for(i=Rs(e.Props),a=0;a<i.length;++a)(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(l,i[a])?n:s).push([i[a],e.Props[i[a]]]);if(e.Custprops)for(i=Rs(e.Custprops),a=0;a<i.length;++a)Object.prototype.hasOwnProperty.call(e.Props||{},i[a])||(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(l,i[a])?n:s).push([i[a],e.Custprops[i[a]]]);var u=[];for(a=0;a<s.length;++a)Hq.indexOf(s[a][0])>-1||Iq.indexOf(s[a][0])>-1||s[a][1]!=null&&u.push(s[a]);n.length&&wr.utils.cfb_add(t,"/SummaryInformation",ZI(n,Gx.SI,l,GA)),(r.length||u.length)&&wr.utils.cfb_add(t,"/DocumentSummaryInformation",ZI(r,Gx.DSI,o,HA,u.length?u:null,Gx.UDI))}function BK(e,t){t||(t={}),L6(t),a6(),t.codepage&&s6(t.codepage);var r,n;if(e.FullPaths){if(wr.find(e,"/encryption"))throw new Error("File is password-protected");r=wr.find(e,"!CompObj"),n=wr.find(e,"/Workbook")||wr.find(e,"/Book")}else{switch(t.type){case"base64":e=Fo(Mo(e));break;case"binary":e=Fo(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}ri(e,0),n={content:e}}var s,a;if(r&&Ewe(r),t.bookProps&&!t.bookSheets)s={};else{var i=Qr?"buffer":"array";if(n&&n.content)s=jwe(n.content,t);else if((a=wr.find(e,"PerfectOffice_MAIN"))&&a.content)s=Wh.to_workbook(a.content,(t.type=i,t));else if((a=wr.find(e,"NativeContent_MAIN"))&&a.content)s=Wh.to_workbook(a.content,(t.type=i,t));else throw(a=wr.find(e,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&wr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=Gme(e))}var o={};return e.FullPaths&&Pwe(e,o,t),s.Props=s.Custprops=o,t.bookFiles&&(s.cfb=e),s}function Fwe(e,t){var r=t||{},n=wr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return wr.utils.cfb_add(n,s,$K(e,r)),r.biff==8&&(e.Props||e.Custprops)&&Owe(e,n),r.biff==8&&e.vbaraw&&Vme(n,wr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var Cv={0:{f:nve},1:{f:dve},2:{f:jve},3:{f:vve},4:{f:pve},5:{f:Eve},6:{f:Dve},7:{f:Sve},8:{f:Wve},9:{f:Uve},10:{f:Bve},11:{f:$ve},12:{f:hve},13:{f:Ove},14:{f:bve},15:{f:yve},16:{f:PK},17:{f:Mve},18:{f:Tve},19:{f:v6},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:M1e},40:{},42:{},43:{f:Dpe},44:{f:Fpe},45:{f:Lpe},46:{f:$pe},47:{f:Bpe},48:{},49:{f:ihe},50:{},51:{f:wme},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:tK},62:{f:Rve},63:{f:Ame},64:{f:s1e},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ai,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:e1e},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:cve},148:{f:ive,p:16},151:{f:Kve},152:{},153:{f:R1e},154:{},155:{},156:{f:O1e},157:{},158:{},159:{T:1,f:Yge},160:{T:-1},161:{T:1,f:k0},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:zve},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:xme},336:{T:-1},337:{f:Sme,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:zA},357:{},358:{},359:{},360:{T:1},361:{},362:{f:eK},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Xve},427:{f:Yve},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Qve},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:lve},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Vve},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:zA},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:$me},633:{T:1},634:{T:-1},635:{T:1,f:Lme},636:{T:-1},637:{f:uhe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:b1e},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:a1e},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},JA={6:{f:AT},10:{f:Yd},12:{f:ra},13:{f:ra},14:{f:zs},15:{f:zs},16:{f:Si},17:{f:zs},18:{f:zs},19:{f:ra},20:{f:aM},21:{f:aM},23:{f:eK},24:{f:oM},25:{f:zs},26:{},27:{},28:{f:age},29:{},34:{f:zs},35:{f:iM},38:{f:Si},39:{f:Si},40:{f:Si},41:{f:Si},42:{f:zs},43:{f:zs},47:{f:ype},49:{f:O0e},51:{f:ra},60:{},61:{f:E0e},64:{f:zs},65:{f:P0e},66:{f:ra},77:{},80:{},81:{},82:{},85:{f:ra},89:{},90:{},91:{},92:{f:m0e},93:{f:lge},94:{},95:{f:zs},96:{},97:{},99:{f:zs},125:{f:tK},128:{f:q0e},129:{f:x0e},130:{f:ra},131:{f:zs},132:{f:zs},133:{f:v0e},134:{},140:{f:mge},141:{f:ra},144:{},146:{f:vge},151:{},152:{},153:{},154:{},155:{},156:{f:ra},157:{},158:{},160:{f:Cge},161:{f:_ge},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:z0e},190:{f:H0e},193:{f:Yd},197:{},198:{},199:{},200:{},201:{},202:{f:zs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ra},220:{},221:{f:zs},222:{},224:{f:V0e},225:{f:p0e},226:{f:Yd},227:{},229:{f:ige},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:b0e},253:{f:R0e},255:{f:S0e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Gq},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:zs},353:{f:Yd},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Q0e},431:{f:zs},432:{},433:{},434:{},437:{},438:{f:dge},439:{f:zs},440:{f:fge},441:{},442:{f:R1},443:{},444:{f:ra},445:{},446:{},448:{f:Yd},449:{f:C0e,r:2},450:{f:Yd},512:{f:rM},513:{f:Tge},515:{f:Y0e},516:{f:I0e},517:{f:sM},519:{f:Ege},520:{f:k0e},523:{},545:{f:lM},549:{f:tM},566:{},574:{f:A0e},638:{f:W0e},659:{},1048:{},1054:{f:L0e},1084:{},1212:{f:rge},2048:{f:gge},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:yb},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Yd},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:wge,r:12},2173:{f:mme,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:zs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:tge,r:12},2197:{},2198:{f:ume,r:12},2199:{},2200:{},2201:{},2202:{f:nge,r:12},2203:{f:Yd},2204:{},2205:{},2206:{},2207:{},2211:{f:T0e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ra},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Sge},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:xge},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:rM},1:{},2:{f:Oge},3:{f:jge},4:{f:Age},5:{f:sM},7:{f:Rge},8:{},9:{f:yb},11:{},22:{f:ra},30:{f:$0e},31:{},32:{},33:{f:lM},36:{},37:{f:tM},50:{f:Dge},62:{},52:{},67:{},68:{f:ra},69:{},86:{},126:{},127:{f:Nge},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Ige},223:{},234:{},354:{},421:{},518:{f:AT},521:{f:yb},536:{f:oM},547:{f:iM},561:{},579:{},1030:{f:AT},1033:{f:yb},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Kt(e,t,r,n){var s=t;if(!isNaN(s)){var a=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&m6(r)&&e.push(r)}}function Rwe(e,t,r,n){var s=(r||[]).length||0;if(s<=8224)return Kt(e,t,r,s);var a=t;if(!isNaN(a)){for(var i=r.parts||[],o=0,l=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,a),d.write_shift(2,u),e.push(r.slice(l,l+u)),l+=u;l<s;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(l,l+u)),l+=u}}}function L1(e,t,r){return e||(e=bt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function Dwe(e,t,r,n){var s=bt(9);return L1(s,e,t),Vq(r,n||"b",s),s}function Iwe(e,t,r){var n=bt(8+2*r.length);return L1(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Mwe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?_a(is(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?Kt(e,2,Fge(r,n,s)):Kt(e,3,Pge(r,n,s));return;case"b":case"e":Kt(e,5,Dwe(r,n,t.v,t.t));return;case"s":case"str":Kt(e,4,Iwe(r,n,(t.v||"").slice(0,255)));return}Kt(e,1,L1(null,r,n))}function Lwe(e,t,r,n){var s=Array.isArray(t),a=gn(t["!ref"]||"A1"),i,o="",l=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=Kr(a)}for(var u=a.s.r;u<=a.e.r;++u){o=Vs(u);for(var d=a.s.c;d<=a.e.c;++d){u===a.s.r&&(l[d]=vs(d)),i=l[d]+o;var f=s?(t[u]||[])[d]:t[i];f&&Mwe(e,f,u,d)}}}function Bwe(e,t){for(var r=t||{},n=po(),s=0,a=0;a<e.SheetNames.length;++a)e.SheetNames[a]==r.sheet&&(s=a);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Kt(n,r.biff==4?1033:r.biff==3?521:9,C6(e,16,r)),Lwe(n,e.Sheets[e.SheetNames[s]],s,r),Kt(n,10),n.end()}function $we(e,t,r){Kt(e,49,F0e({sz:12,name:"Arial"},r))}function Uwe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&Kt(e,1054,B0e(s,t[s],r))})}function Wwe(e,t){var r=bt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Kt(e,2151,r),r=bt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Jq(gn(t["!ref"]||"A1"),r),r.write_shift(4,4),Kt(e,2152,r)}function zwe(e,t){for(var r=0;r<16;++r)Kt(e,224,nM({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Kt(e,224,nM(n,0,t))})}function Hwe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];Kt(e,440,hge(n)),n[1].Tooltip&&Kt(e,2048,pge(n))}delete t["!links"]}function Gwe(e,t){if(t){var r=0;t.forEach(function(n,s){++r<=256&&n&&Kt(e,125,bge(fS(s,n),s))})}}function Vwe(e,t,r,n,s){var a=16+Df(s.cellXfs,t,s);if(t.v==null&&!t.bf){Kt(e,513,u0(r,n,a));return}if(t.bf)Kt(e,6,xxe(t,r,n,s,a));else switch(t.t){case"d":case"n":var i=t.t=="d"?_a(is(t.v)):t.v;Kt(e,515,J0e(r,n,i,a));break;case"b":case"e":Kt(e,517,X0e(r,n,t.v,a,s,t.t));break;case"s":case"str":if(s.bookSST){var o=R6(s.Strings,t.v,s.revStrings);Kt(e,253,D0e(r,n,o,a))}else Kt(e,516,M0e(r,n,(t.v||"").slice(0,255),a,s));break;default:Kt(e,513,u0(r,n,a))}}function qwe(e,t,r){var n=po(),s=r.SheetNames[e],a=r.Sheets[s]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[e]||{},l=Array.isArray(a),u=t.biff==8,d,f="",g=[],p=gn(a["!ref"]||"A1"),x=u?65536:16384;if(p.e.c>255||p.e.r>=x){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,x-1)}Kt(n,2057,C6(r,16,t)),Kt(n,13,ul(1)),Kt(n,12,ul(100)),Kt(n,15,Hi(!0)),Kt(n,17,Hi(!1)),Kt(n,16,l0(.001)),Kt(n,95,Hi(!0)),Kt(n,42,Hi(!1)),Kt(n,43,Hi(!1)),Kt(n,130,ul(1)),Kt(n,128,K0e()),Kt(n,131,Hi(!1)),Kt(n,132,Hi(!1)),u&&Gwe(n,a["!cols"]),Kt(n,512,U0e(p,t)),u&&(a["!links"]=[]);for(var y=p.s.r;y<=p.e.r;++y){f=Vs(y);for(var v=p.s.c;v<=p.e.c;++v){y===p.s.r&&(g[v]=vs(v)),d=g[v]+f;var T=l?(a[y]||[])[v]:a[d];T&&(Vwe(n,T,y,v,t),u&&T.l&&a["!links"].push([d,T.l]))}}var _=o.CodeName||o.name||s;return u&&Kt(n,574,j0e((i.Views||[])[0])),u&&(a["!merges"]||[]).length&&Kt(n,229,oge(a["!merges"])),u&&Hwe(n,a),Kt(n,442,qq(_)),u&&Wwe(n,a),Kt(n,10),n.end()}function Kwe(e,t,r){var n=po(),s=(e||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=r.biff==8,l=r.biff==5;if(Kt(n,2057,C6(e,5,r)),r.bookType=="xla"&&Kt(n,135),Kt(n,225,o?ul(1200):null),Kt(n,193,Xhe(2)),l&&Kt(n,191),l&&Kt(n,192),Kt(n,226),Kt(n,92,y0e("SheetJS",r)),Kt(n,66,ul(o?1200:1252)),o&&Kt(n,353,ul(0)),o&&Kt(n,448),Kt(n,317,kge(e.SheetNames.length)),o&&e.vbaraw&&Kt(n,211),o&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";Kt(n,442,qq(u))}Kt(n,156,ul(17)),Kt(n,25,Hi(!1)),Kt(n,18,Hi(!1)),Kt(n,19,ul(0)),o&&Kt(n,431,Hi(!1)),o&&Kt(n,444,ul(0)),Kt(n,61,N0e()),Kt(n,64,Hi(!1)),Kt(n,141,ul(0)),Kt(n,34,Hi(C1e(e)=="true")),Kt(n,14,Hi(!0)),o&&Kt(n,439,Hi(!1)),Kt(n,218,ul(0)),$we(n,e,r),Uwe(n,e.SSF,r),zwe(n,r),o&&Kt(n,352,Hi(!1));var d=n.end(),f=po();o&&Kt(f,140,yge()),o&&r.Strings&&Rwe(f,252,_0e(r.Strings)),Kt(f,10);var g=f.end(),p=po(),x=0,y=0;for(y=0;y<e.SheetNames.length;++y)x+=(o?12:11)+(o?2:1)*e.SheetNames[y].length;var v=d.length+x+g.length;for(y=0;y<e.SheetNames.length;++y){var T=a[y]||{};Kt(p,133,w0e({pos:v,hs:T.Hidden||0,dt:0,name:e.SheetNames[y]},r)),v+=t[y].length}var _=p.end();if(x!=_.length)throw new Error("BS8 "+x+" != "+_.length);var b=[];return d.length&&b.push(d),_.length&&b.push(_),g.length&&b.push(g),Ia(b)}function Xwe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=os(Ar)),e&&e.SSF&&(hm(),aS(e.SSF),r.revssf=oS(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,B6(r),r.cellXfs=[],Df(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)n[n.length]=qwe(s,r,e);return n.unshift(Kwe(e,n,r)),Ia(n)}function $K(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var s=mo(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var a=t||{};switch(a.biff||2){case 8:case 5:return Xwe(e,t);case 4:case 3:case 2:return Bwe(e,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function xM(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=e.match(/<\/table/i),i=s.index,o=a&&a.index||e.length,l=Ffe(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,g=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},x=[];for(i=0;i<l.length;++i){var y=l[i].trim(),v=y.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(v!="<td"&&v!="<th")){var T=y.split(/<\/t[dh]>/i);for(o=0;o<T.length;++o){var _=T[o].trim();if(_.match(/<t[dh]/i)){for(var b=_,E=0;b.charAt(0)=="<"&&(E=b.indexOf(">"))>-1;)b=b.slice(E+1);for(var k=0;k<x.length;++k){var A=x[k];A.s.c==d&&A.s.r<u&&u<=A.e.r&&(d=A.e.c+1,k=-1)}var P=Dr(_.slice(0,_.indexOf(">")));g=P.colspan?+P.colspan:1,((f=+P.rowspan)>1||g>1)&&x.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+g-1}});var j=P.t||P["data-t"]||"";if(!b.length){d+=g;continue}if(b=uq(b),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>d&&(p.s.c=d),p.e.c<d&&(p.e.c=d),!b.length){d+=g;continue}var O={t:"s",v:b};r.raw||!b.trim().length||j=="s"||(b==="TRUE"?O={t:"b",v:!0}:b==="FALSE"?O={t:"b",v:!1}:isNaN(Zl(b))?isNaN(kp(b).getDate())||(O={t:"d",v:is(b)},r.cellDates||(O={t:"n",v:_a(O.v)}),O.z=r.dateNF||Ar[14]):O={t:"n",v:Zl(b)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=O):n[Pr({r:u,c:d})]=O,d+=g}}}}return n["!ref"]=Kr(p),x.length&&(n["!merges"]=x),n}function Ywe(e,t,r,n){for(var s=e["!merges"]||[],a=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,l=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>i)&&!(s[u].e.r<r||s[u].e.c<i)){if(s[u].s.r<r||s[u].s.c<i){o=-1;break}o=s[u].e.r-s[u].s.r+1,l=s[u].e.c-s[u].s.c+1;break}if(!(o<0)){var d=Pr({r,c:i}),f=n.dense?(e[r]||[])[i]:e[d],g=f&&f.v!=null&&(f.h||h6(f.w||(Ju(f),f.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),n.editable?g='<span contenteditable="true">'+g+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+f.l.Target+'">'+g+"</a>")),p.id=(n.id||"sjs")+"-"+d,a.push(Vt("td",g,p))}}var x="<tr>";return x+a.join("")+"</tr>"}var Jwe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Qwe="</body></html>";function Zwe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Rf(xM(r[0],t),t);var n=W6();return r.forEach(function(s,a){z6(n,xM(s,t),"Sheet"+(a+1))}),n}function ebe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function UK(e,t){var r=t||{},n=r.header!=null?r.header:Jwe,s=r.footer!=null?r.footer:Qwe,a=[n],i=mo(e["!ref"]);r.dense=Array.isArray(e),a.push(ebe(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)a.push(Ywe(e,i,o,r));return a.push("</table>"+s),a.join("")}function WK(e,t,r){var n=r||{},s=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var i=typeof n.origin=="string"?ws(n.origin):n.origin;s=i.r,a=i.c}var o=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:s,c:a}};if(e["!ref"]){var d=mo(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),s==-1&&(u.e.r=s=d.e.r+1)}var f=[],g=0,p=e["!rows"]||(e["!rows"]=[]),x=0,y=0,v=0,T=0,_=0,b=0;for(e["!cols"]||(e["!cols"]=[]);x<o.length&&y<l;++x){var E=o[x];if(vM(E)){if(n.display)continue;p[y]={hidden:!0}}var k=E.children;for(v=T=0;v<k.length;++v){var A=k[v];if(!(n.display&&vM(A))){var P=A.hasAttribute("data-v")?A.getAttribute("data-v"):A.hasAttribute("v")?A.getAttribute("v"):uq(A.innerHTML),j=A.getAttribute("data-z")||A.getAttribute("z");for(g=0;g<f.length;++g){var O=f[g];O.s.c==T+a&&O.s.r<y+s&&y+s<=O.e.r&&(T=O.e.c+1-a,g=-1)}b=+A.getAttribute("colspan")||1,((_=+A.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:y+s,c:T+a},e:{r:y+s+(_||1)-1,c:T+a+(b||1)-1}});var R={t:"s",v:P},M=A.getAttribute("data-t")||A.getAttribute("t")||"";P!=null&&(P.length==0?R.t=M||"z":n.raw||P.trim().length==0||M=="s"||(P==="TRUE"?R={t:"b",v:!0}:P==="FALSE"?R={t:"b",v:!1}:isNaN(Zl(P))?isNaN(kp(P).getDate())||(R={t:"d",v:is(P)},n.cellDates||(R={t:"n",v:_a(R.v)}),R.z=n.dateNF||Ar[14]):R={t:"n",v:Zl(P)})),R.z===void 0&&j!=null&&(R.z=j);var G="",K=A.getElementsByTagName("A");if(K&&K.length)for(var re=0;re<K.length&&!(K[re].hasAttribute("href")&&(G=K[re].getAttribute("href"),G.charAt(0)!="#"));++re);G&&G.charAt(0)!="#"&&(R.l={Target:G}),n.dense?(e[y+s]||(e[y+s]=[]),e[y+s][T+a]=R):e[Pr({c:T+a,r:y+s})]=R,u.e.c<T+a&&(u.e.c=T+a),T+=b}}++y}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,y-1+s),e["!ref"]=Kr(u),y>=l&&(e["!fullref"]=Kr((u.e.r=o.length-x+y-1+s,u))),e}function zK(e,t){var r=t||{},n=r.dense?[]:{};return WK(n,e,t)}function tbe(e,t){return Rf(zK(e,t),t)}function vM(e){var t="",r=rbe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function rbe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function nbe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=fn(t.replace(/<[^>]*>/g,""));return[r]}var wM={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function HK(e,t){var r=t||{},n=g6(e),s=[],a,i,o={name:""},l="",u=0,d,f,g={},p=[],x=r.dense?[]:{},y,v,T={value:""},_="",b=0,E=[],k=-1,A=-1,P={s:{r:1e6,c:1e7},e:{r:0,c:0}},j=0,O={},R=[],M={},G=0,K=0,re=[],Y=1,ee=1,B=[],z={Names:[]},I={},W=["",""],V=[],L={},H="",J=0,Q=!1,ne=!1,Z=0;for(wv.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=wv.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(P.e.c>=P.s.c&&P.e.r>=P.s.r?x["!ref"]=Kr(P):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=P.e.r&&(x["!fullref"]=x["!ref"],P.e.r=r.sheetRows-1,x["!ref"]=Kr(P)),R.length&&(x["!merges"]=R),re.length&&(x["!rows"]=re),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),p.push(d.name),g[d.name]=x,ne=!1):y[0].charAt(y[0].length-2)!=="/"&&(d=Dr(y[0],!1),k=A=-1,P.s.r=P.s.c=1e7,P.e.r=P.e.c=0,x=r.dense?[]:{},R=[],re=[],ne=!0);break;case"table-row-group":y[1]==="/"?--j:++j;break;case"table-row":case"":if(y[1]==="/"){k+=Y,Y=1;break}if(f=Dr(y[0],!1),f.?k=f.-1:k==-1&&(k=0),Y=+f["number-rows-repeated"]||1,Y<10)for(Z=0;Z<Y;++Z)j>0&&(re[k+Z]={level:j});A=-1;break;case"covered-table-cell":y[1]!=="/"&&++A,r.sheetStubs&&(r.dense?(x[k]||(x[k]=[]),x[k][A]={t:"z"}):x[Pr({r:k,c:A})]={t:"z"}),_="",E=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++A,T=Dr(y[0],!1),ee=parseInt(T["number-columns-repeated"]||"1",10),v={t:"z",v:null},T.formula&&r.cellFormula!=!1&&(v.f=pM(fn(T.formula))),(T.||T["value-type"])=="string"&&(v.t="s",v.v=fn(T["string-value"]||""),r.dense?(x[k]||(x[k]=[]),x[k][A]=v):x[Pr({r:k,c:A})]=v),A+=ee-1;else if(y[1]!=="/"){++A,_="",b=0,E=[],ee=1;var se=Y?k+Y-1:k;if(A>P.e.c&&(P.e.c=A),A<P.s.c&&(P.s.c=A),k<P.s.r&&(P.s.r=k),se>P.e.r&&(P.e.r=se),T=Dr(y[0],!1),V=[],L={},v={t:T.||T["value-type"],v:null},r.cellFormula)if(T.formula&&(T.formula=fn(T.formula)),T["number-matrix-columns-spanned"]&&T["number-matrix-rows-spanned"]&&(G=parseInt(T["number-matrix-rows-spanned"],10)||0,K=parseInt(T["number-matrix-columns-spanned"],10)||0,M={s:{r:k,c:A},e:{r:k+G-1,c:A+K-1}},v.F=Kr(M),B.push([M,v.F])),T.formula)v.f=pM(T.formula);else for(Z=0;Z<B.length;++Z)k>=B[Z][0].s.r&&k<=B[Z][0].e.r&&A>=B[Z][0].s.c&&A<=B[Z][0].e.c&&(v.F=B[Z][1]);switch((T["number-columns-spanned"]||T["number-rows-spanned"])&&(G=parseInt(T["number-rows-spanned"],10)||0,K=parseInt(T["number-columns-spanned"],10)||0,M={s:{r:k,c:A},e:{r:k+G-1,c:A+K-1}},R.push(M)),T["number-columns-repeated"]&&(ee=parseInt(T["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=ns(T["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(T.value);break;case"percentage":v.t="n",v.v=parseFloat(T.value);break;case"currency":v.t="n",v.v=parseFloat(T.value);break;case"date":v.t="d",v.v=is(T["date-value"]),r.cellDates||(v.t="n",v.v=_a(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=jfe(T["time-value"])/86400,r.cellDates&&(v.t="d",v.v=lS(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(T.);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",T["string-value"]!=null&&(_=fn(T["string-value"]),E=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(Q=!1,v.t==="s"&&(v.v=_||"",E.length&&(v.R=E),Q=b==0),I.Target&&(v.l=I),V.length>0&&(v.c=V,V=[]),_&&r.cellText!==!1&&(v.w=_),Q&&(v.t="z",delete v.v),(!Q||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=k))for(var ce=0;ce<Y;++ce){if(ee=parseInt(T["number-columns-repeated"]||"1",10),r.dense)for(x[k+ce]||(x[k+ce]=[]),x[k+ce][A]=ce==0?v:os(v);--ee>0;)x[k+ce][A+ee]=os(v);else for(x[Pr({r:k+ce,c:A})]=v;--ee>0;)x[Pr({r:k+ce,c:A+ee})]=os(v);P.e.c<=A&&(P.e.c=A)}ee=parseInt(T["number-columns-repeated"]||"1",10),A+=ee-1,ee=0,v={},_="",E=[]}I={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a;L.t=_,E.length&&(L.R=E),L.a=H,V.push(L)}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);H="",J=0,_="",b=0,E=[];break;case"creator":y[1]==="/"?H=n.slice(J,y.index):J=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);_="",b=0,E=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(O[o.name]=l,(a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&(l="",o=Dr(y[0],!1),s.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":i=Dr(y[0],!1),l+=wM[y[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":i=Dr(y[0],!1),l+=wM[y[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(u,y.index);break}else u=y.index+y[0].length;break;case"named-range":i=Dr(y[0],!1),W=jT(i["cell-range-address"]);var he={Name:i.name,Ref:W[0]+"!"+W[1]};ne&&(he.Sheet=p.length),z.Names.push(he);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(y[1]==="/"&&(!T||!T["string-value"])){var Ee=nbe(n.slice(b,y.index));_=(_.length>0?_+`
`:"")+Ee[0]}else Dr(y[0],!1),b=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{W=jT(Dr(y[0])["target-range-address"]),g[W[0]]["!autofilter"]={ref:W[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(I=Dr(y[0],!1),!I.href)break;I.Target=fn(I.href),delete I.href,I.Target.charAt(0)=="#"&&I.Target.indexOf(".")>-1?(W=jT(I.Target.slice(1)),I.Target="#"+W[0]+"!"+W[1]):I.Target.match(/^\.\.[\\\/]/)&&(I.Target=I.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(y)}}var ie={Sheets:g,SheetNames:p,Workbook:z};return r.bookSheets&&delete ie.Sheets,ie}function bM(e,t){t=t||{},cl(e,"META-INF/manifest.xml")&&jhe(ta(e,"META-INF/manifest.xml"),t);var r=Ro(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=HK(Wn(r),t);return cl(e,"meta.xml")&&(n.Props=Rq(ta(e,"meta.xml"))),n}function _M(e,t){return HK(e,t)}var sbe=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+vv({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Ks+t}})(),SM=(function(){var e=function(a){return Dn(a).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(a,i,o){var l=[];l.push('      <table:table table:name="'+Dn(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=mo(a["!ref"]||"A1"),g=a["!merges"]||[],p=0,x=Array.isArray(a);if(a["!cols"])for(d=0;d<=f.e.c;++d)l.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var y="",v=a["!rows"]||[];for(u=0;u<f.s.r;++u)y=v[u]?' table:style-name="ro'+v[u].ods+'"':"",l.push("        <table:table-row"+y+`></table:table-row>
`);for(;u<=f.e.r;++u){for(y=v[u]?' table:style-name="ro'+v[u].ods+'"':"",l.push("        <table:table-row"+y+`>
`),d=0;d<f.s.c;++d)l.push(t);for(;d<=f.e.c;++d){var T=!1,_={},b="";for(p=0;p!=g.length;++p)if(!(g[p].s.c>d)&&!(g[p].s.r>u)&&!(g[p].e.c<d)&&!(g[p].e.r<u)){(g[p].s.c!=d||g[p].s.r!=u)&&(T=!0),_["table:number-columns-spanned"]=g[p].e.c-g[p].s.c+1,_["table:number-rows-spanned"]=g[p].e.r-g[p].s.r+1;break}if(T){l.push(r);continue}var E=Pr({r:u,c:d}),k=x?(a[u]||[])[d]:a[E];if(k&&k.f&&(_["table:formula"]=Dn(kxe(k.f)),k.F&&k.F.slice(0,E.length)==E)){var A=mo(k.F);_["table:number-matrix-columns-spanned"]=A.e.c-A.s.c+1,_["table:number-matrix-rows-spanned"]=A.e.r-A.s.r+1}if(!k){l.push(t);continue}switch(k.t){case"b":b=k.v?"TRUE":"FALSE",_["office:value-type"]="boolean",_["office:boolean-value"]=k.v?"true":"false";break;case"n":b=k.w||String(k.v||0),_["office:value-type"]="float",_["office:value"]=k.v||0;break;case"s":case"str":b=k.v==null?"":k.v,_["office:value-type"]="string";break;case"d":b=k.w||is(k.v).toISOString(),_["office:value-type"]="date",_["office:date-value"]=is(k.v).toISOString(),_["table:style-name"]="ce1";break;default:l.push(t);continue}var P=e(b);if(k.l&&k.l.Target){var j=k.l.Target;j=j.charAt(0)=="#"?"#"+Txe(j.slice(1)):j,j.charAt(0)!="#"&&!j.match(/^\w+:/)&&(j="../"+j),P=Vt("text:a",P,{"xlink:href":j.replace(/&/g,"&amp;")})}l.push("          "+Vt("table:table-cell",Vt("text:p",P,{}),_)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},s=function(a,i){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Sf(f),f.ods=o;var g=u["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),a.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=l;var f=u["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),a.push(`  </style:style>
`),++l}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(i,o){var l=[Ks],u=vv({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=vv({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+d+`>
`),l.push(Fq().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),s(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)l.push(n(i.Sheets[i.SheetNames[f]],i,f));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function GK(e,t){if(t.bookType=="fods")return SM(e,t);var r=u6(),n="",s=[],a=[];return n="mimetype",Yr(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Yr(r,n,SM(e,t)),s.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",Yr(r,n,sbe(e,t)),s.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",Yr(r,n,Ks+Fq()),s.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",Yr(r,n,Fhe(a)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Yr(r,n,Phe(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function d0(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function QA(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Wn(Ff(e))}function abe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Fo(Bc(e))}function ibe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Tf(e){var t=e.reduce(function(s,a){return s+a.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function kM(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function obe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function lbe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var a=0;s>=1;++a,s/=256)e[t+a]=s&255;e[t+15]|=r>=0?0:128}function Ev(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function On(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Fs(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function mn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=Ev(e,r),a=s&7;s=Math.floor(s/8);var i=0,o;if(s==0)break;switch(a){case 0:{for(var l=r[0];e[r[0]++]>=128;);o=e.slice(l,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=Ev(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(n))}var u={data:o,type:a};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function Qa(e){var t=[];return e.forEach(function(r,n){r.forEach(function(s){s.data&&(t.push(On(n*8+s.type)),s.type==2&&t.push(On(s.data.length)),t.push(s.data))})}),Tf(t)}function M6(e,t){return e?.map(function(r){return t(r.data)})||[]}function il(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=Ev(e,n),a=mn(e.slice(n[0],n[0]+s));n[0]+=s;var i={id:Fs(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=mn(o.data),u=Fs(l[3][0].data);i.messages.push({meta:l,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=a[3])!=null&&t[0]&&(i.merge=Fs(a[3][0].data)>>>0>0),r.push(i)}return r}function Ng(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:On(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:On(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(i){s.push(i.data),i.meta[3]=[{type:0,data:On(i.data.length)}],n[2].push({data:Qa(i.meta),type:2})});var a=Qa(n);t.push(On(a.length)),t.push(a),s.forEach(function(i){return t.push(i)})}),Tf(t)}function cbe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Ev(t,r),s=[];r[0]<t.length;){var a=t[r[0]]&3;if(a==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}s.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var l=0,u=0;if(a==1?(u=(t[r[0]]>>2&7)+4,l=(t[r[0]++]&224)<<3,l|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,a==2?(l=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(l=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Tf(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(s.push(s[0].slice(-l)),u-=l;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-l,-l+u))}}var d=Tf(s);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function ol(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(cbe(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Tf(t)}function Ag(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var a=On(n),i=a.length;t.push(a),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,s[0]=0,s[1]=i&255,s[2]=i>>8&255,s[3]=i>>16&255,r+=n}return Tf(t)}function ube(e,t,r,n){var s=d0(e),a=s.getUint32(4,!0),i=(n>1?12:8)+kM(a&(n>1?3470:398))*4,o=-1,l=-1,u=NaN,d=new Date(2001,0,1);a&512&&(o=s.getUint32(i,!0),i+=4),i+=kM(a&(n>1?12288:4096))*4,a&16&&(l=s.getUint32(i,!0),i+=4),a&32&&(u=s.getFloat64(i,!0),i+=8),a&64&&(d.setTime(d.getTime()+s.getFloat64(i,!0)*1e3),i+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(l>-1)f={t:"s",v:t[l]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function dbe(e,t,r){var n=d0(e),s=n.getUint32(8,!0),a=12,i=-1,o=-1,l=NaN,u=NaN,d=new Date(2001,0,1);s&1&&(l=obe(e,a),a+=16),s&2&&(u=n.getFloat64(a,!0),a+=8),s&4&&(d.setTime(d.getTime()+n.getFloat64(a,!0)*1e3),a+=8),s&8&&(o=n.getUint32(a,!0),a+=4),s&16&&(i=n.getUint32(a,!0),a+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:l};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return f}function OT(e,t){var r=new Uint8Array(32),n=d0(r),s=12,a=0;switch(r[0]=5,e.t){case"n":r[1]=2,lbe(r,s,e.v),a|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,e.v?1:0,!0),a|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,a,!0),r.slice(0,s)}function FT(e,t){var r=new Uint8Array(32),n=d0(r),s=12,a=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(s,e.v,!0),a|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,e.v?1:0,!0),a|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,a,!0),r.slice(0,s)}function fbe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return ube(e,t,r,e[0]);case 5:return dbe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function xi(e){var t=mn(e);return Ev(t[1][0].data)}function TM(e,t){var r=mn(t.data),n=Fs(r[1][0].data),s=r[3],a=[];return(s||[]).forEach(function(i){var o=mn(i.data),l=Fs(o[1][0].data)>>>0;switch(n){case 1:a[l]=QA(o[3][0].data);break;case 8:{var u=e[xi(o[9][0].data)][0],d=mn(u.data),f=e[xi(d[1][0].data)][0],g=Fs(f.meta[1][0].data);if(g!=2001)throw new Error("2000 unexpected reference to ".concat(g));var p=mn(f.data);a[l]=p[3].map(function(x){return QA(x.data)}).join("")}break}}),a}function hbe(e,t){var r,n,s,a,i,o,l,u,d,f,g,p,x,y,v=mn(e),T=Fs(v[1][0].data)>>>0,_=Fs(v[2][0].data)>>>0,b=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&Fs(v[8][0].data)>0||!1,E,k;if((a=(s=v[7])==null?void 0:s[0])!=null&&a.data&&t!=0)E=(o=(i=v[7])==null?void 0:i[0])==null?void 0:o.data,k=(u=(l=v[6])==null?void 0:l[0])==null?void 0:u.data;else if((f=(d=v[4])==null?void 0:d[0])!=null&&f.data&&t!=1)E=(p=(g=v[4])==null?void 0:g[0])==null?void 0:p.data,k=(y=(x=v[3])==null?void 0:x[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var A=b?4:1,P=d0(E),j=[],O=0;O<E.length/2;++O){var R=P.getUint16(O*2,!0);R<65535&&j.push([O,R])}if(j.length!=_)throw"Expected ".concat(_," cells, found ").concat(j.length);var M=[];for(O=0;O<j.length-1;++O)M[j[O][0]]=k.subarray(j[O][1]*A,j[O+1][1]*A);return j.length>=1&&(M[j[j.length-1][0]]=k.subarray(j[j.length-1][1]*A)),{R:T,cells:M}}function gbe(e,t){var r,n=mn(t.data),s=(r=n?.[7])!=null&&r[0]?Fs(n[7][0].data)>>>0>0?1:0:-1,a=M6(n[5],function(i){return hbe(i,s)});return{nrows:Fs(n[4][0].data)>>>0,data:a.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=l}),i},[])}}function pbe(e,t,r){var n,s=mn(t.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(Fs(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(Fs(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=Kr(a);var i=mn(s[4][0].data),o=TM(e,e[xi(i[4][0].data)][0]),l=(n=i[17])!=null&&n[0]?TM(e,e[xi(i[17][0].data)][0]):[],u=mn(i[3][0].data),d=0;u[1].forEach(function(f){var g=mn(f.data),p=e[xi(g[2][0].data)][0],x=Fs(p.meta[1][0].data);if(x!=6002)throw new Error("6001 unexpected reference to ".concat(x));var y=gbe(e,p);y.data.forEach(function(v,T){v.forEach(function(_,b){var E=Pr({r:d+T,c:b}),k=fbe(_,o,l);k&&(r[E]=k)})}),d+=y.nrows})}function mbe(e,t){var r=mn(t.data),n={"!ref":"A1"},s=e[xi(r[2][0].data)],a=Fs(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return pbe(e,s[0],n),n}function ybe(e,t){var r,n=mn(t.data),s={name:(r=n[1])!=null&&r[0]?QA(n[1][0].data):"",sheets:[]},a=M6(n[2],xi);return a.forEach(function(i){e[i].forEach(function(o){var l=Fs(o.meta[1][0].data);l==6e3&&s.sheets.push(mbe(e,o))})}),s}function xbe(e,t){var r=W6(),n=mn(t.data),s=M6(n[1],xi);if(s.forEach(function(a){e[a].forEach(function(i){var o=Fs(i.meta[1][0].data);if(o==2){var l=ybe(e,i);l.sheets.forEach(function(u,d){z6(r,u,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function RT(e){var t,r,n,s,a={},i=[];if(e.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var u;try{u=ol(l.content)}catch(f){return console.log("?? "+l.content.length+" "+(f.message||f))}var d;try{d=il(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){a[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var o=((s=(n=(r=(t=a?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&Fs(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||i.forEach(function(l){a[l].forEach(function(u){var d=Fs(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return xbe(a,o)}function vbe(e,t,r){var n,s,a,i;if(!((n=e[6])!=null&&n[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(a=e[8])==null?void 0:a[0])==null?void 0:i.data)&&Fs(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=d0(e[7][0].data),d=0,f=[],g=d0(e[4][0].data),p=0,x=[],y=0;y<t.length;++y){if(t[y]==null){u.setUint16(y*2,65535,!0),g.setUint16(y*2,65535);continue}u.setUint16(y*2,d,!0),g.setUint16(y*2,p,!0);var v,T;switch(typeof t[y]){case"string":v=OT({t:"s",v:t[y]},r),T=FT({t:"s",v:t[y]},r);break;case"number":v=OT({t:"n",v:t[y]},r),T=FT({t:"n",v:t[y]},r);break;case"boolean":v=OT({t:"b",v:t[y]},r),T=FT({t:"b",v:t[y]},r);break;default:throw new Error("Unsupported value "+t[y])}f.push(v),d+=v.length,x.push(T),p+=T.length,++l}for(e[2][0].data=On(l);y<e[7][0].data.length/2;++y)u.setUint16(y*2,65535,!0),g.setUint16(y*2,65535,!0);return e[6][0].data=Tf(f),e[3][0].data=Tf(x),l}function wbe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=mo(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(Kr(n)));var a=O_(r,{range:n,header:1}),i=["~Sh33tJ5~"];a.forEach(function(H){return H.forEach(function(J){typeof J=="string"&&i.push(J)})});var o={},l=[],u=wr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(H,J){return[H,u.FullPaths[J]]}).forEach(function(H){var J=H[0],Q=H[1];if(J.type==2&&J.name.match(/\.iwa/)){var ne=J.content,Z=ol(ne),se=il(Z);se.forEach(function(ce){l.push(ce.id),o[ce.id]={deps:[],location:Q,type:Fs(ce.messages[0].meta[1][0].data)}})}}),l.sort(function(H,J){return H-J});var d=l.filter(function(H){return H>1}).map(function(H){return[H,On(H)]});u.FileIndex.map(function(H,J){return[H,u.FullPaths[J]]}).forEach(function(H){var J=H[0];if(H[1],!!J.name.match(/\.iwa/)){var Q=il(ol(J.content));Q.forEach(function(ne){ne.messages.forEach(function(Z){d.forEach(function(se){ne.messages.some(function(ce){return Fs(ce.meta[1][0].data)!=11006&&ibe(ce.data,se[1])})&&o[se[0]].deps.push(ne.id)})})})}});for(var f=wr.find(u,o[1].location),g=il(ol(f.content)),p,x=0;x<g.length;++x){var y=g[x];y.id==1&&(p=y)}var v=xi(mn(p.messages[0].data)[1][0].data);for(f=wr.find(u,o[v].location),g=il(ol(f.content)),x=0;x<g.length;++x)y=g[x],y.id==v&&(p=y);for(v=xi(mn(p.messages[0].data)[2][0].data),f=wr.find(u,o[v].location),g=il(ol(f.content)),x=0;x<g.length;++x)y=g[x],y.id==v&&(p=y);for(v=xi(mn(p.messages[0].data)[2][0].data),f=wr.find(u,o[v].location),g=il(ol(f.content)),x=0;x<g.length;++x)y=g[x],y.id==v&&(p=y);var T=mn(p.messages[0].data);{T[6][0].data=On(n.e.r+1),T[7][0].data=On(n.e.c+1);var _=xi(T[46][0].data),b=wr.find(u,o[_].location),E=il(ol(b.content));{for(var k=0;k<E.length&&E[k].id!=_;++k);if(E[k].id!=_)throw"Bad ColumnRowUIDMapArchive";var A=mn(E[k].messages[0].data);A[1]=[],A[2]=[],A[3]=[];for(var P=0;P<=n.e.c;++P){var j=[];j[1]=j[2]=[{type:0,data:On(P+420690)}],A[1].push({type:2,data:Qa(j)}),A[2].push({type:0,data:On(P)}),A[3].push({type:0,data:On(P)})}A[4]=[],A[5]=[],A[6]=[];for(var O=0;O<=n.e.r;++O)j=[],j[1]=j[2]=[{type:0,data:On(O+726270)}],A[4].push({type:2,data:Qa(j)}),A[5].push({type:0,data:On(O)}),A[6].push({type:0,data:On(O)});E[k].messages[0].data=Qa(A)}b.content=Ag(Ng(E)),b.size=b.content.length,delete T[46];var R=mn(T[4][0].data);{R[7][0].data=On(n.e.r+1);var M=mn(R[1][0].data),G=xi(M[2][0].data);b=wr.find(u,o[G].location),E=il(ol(b.content));{if(E[0].id!=G)throw"Bad HeaderStorageBucket";var K=mn(E[0].messages[0].data);for(O=0;O<a.length;++O){var re=mn(K[2][0].data);re[1][0].data=On(O),re[4][0].data=On(a[O].length),K[2][O]={type:K[2][0].type,data:Qa(re)}}E[0].messages[0].data=Qa(K)}b.content=Ag(Ng(E)),b.size=b.content.length;var Y=xi(R[2][0].data);b=wr.find(u,o[Y].location),E=il(ol(b.content));{if(E[0].id!=Y)throw"Bad HeaderStorageBucket";for(K=mn(E[0].messages[0].data),P=0;P<=n.e.c;++P)re=mn(K[2][0].data),re[1][0].data=On(P),re[4][0].data=On(n.e.r+1),K[2][P]={type:K[2][0].type,data:Qa(re)};E[0].messages[0].data=Qa(K)}b.content=Ag(Ng(E)),b.size=b.content.length;var ee=xi(R[4][0].data);(function(){for(var H=wr.find(u,o[ee].location),J=il(ol(H.content)),Q,ne=0;ne<J.length;++ne){var Z=J[ne];Z.id==ee&&(Q=Z)}var se=mn(Q.messages[0].data);{se[3]=[];var ce=[];i.forEach(function(ie,me){ce[1]=[{type:0,data:On(me)}],ce[2]=[{type:0,data:On(1)}],ce[3]=[{type:2,data:abe(ie)}],se[3].push({type:2,data:Qa(ce)})})}Q.messages[0].data=Qa(se);var he=Ng(J),Ee=Ag(he);H.content=Ee,H.size=H.content.length})();var B=mn(R[3][0].data);{var z=B[1][0];delete B[2];var I=mn(z.data);{var W=xi(I[2][0].data);(function(){for(var H=wr.find(u,o[W].location),J=il(ol(H.content)),Q,ne=0;ne<J.length;++ne){var Z=J[ne];Z.id==W&&(Q=Z)}var se=mn(Q.messages[0].data);{delete se[6],delete B[7];var ce=new Uint8Array(se[5][0].data);se[5]=[];for(var he=0,Ee=0;Ee<=n.e.r;++Ee){var ie=mn(ce);he+=vbe(ie,a[Ee],i),ie[1][0].data=On(Ee),se[5].push({data:Qa(ie),type:2})}se[1]=[{type:0,data:On(n.e.c+1)}],se[2]=[{type:0,data:On(n.e.r+1)}],se[3]=[{type:0,data:On(he)}],se[4]=[{type:0,data:On(n.e.r+1)}]}Q.messages[0].data=Qa(se);var me=Ng(J),Ne=Ag(me);H.content=Ne,H.size=H.content.length})()}z.data=Qa(I)}R[3][0].data=Qa(B)}T[4][0].data=Qa(R)}p.messages[0].data=Qa(T);var V=Ng(g),L=Ag(V);return f.content=L,f.size=f.content.length,u}function VK(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function L6(e){VK([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function B6(e){VK([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function bbe(e){return rn.WS.indexOf(e)>-1?"sheet":e==rn.CS?"chart":e==rn.DS?"dialog":e==rn.MS?"macro":e&&e.length?e:"sheet"}function _be(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,bbe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function Sbe(e,t,r,n,s,a,i,o,l,u,d,f){try{a[n]=Ux(Ro(e,r,!0),t);var g=ta(e,t),p;switch(o){case"sheet":p=G1e(g,t,s,l,a[n],u,d,f);break;case"chart":if(p=V1e(g,t,s,l,a[n],u,d,f),!p||!p["!drawel"])break;var x=kx(p["!drawel"].Target,t),y=bv(x),v=Ome(Ro(e,x,!0),Ux(Ro(e,y,!0),x)),T=kx(v,x),_=bv(T);p=v1e(Ro(e,T,!0),T,l,Ux(Ro(e,_,!0),T),u,p);break;case"macro":p=q1e(g,t,s,l,a[n],u,d,f);break;case"dialog":p=K1e(g,t,s,l,a[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=p;var b=[];a&&a[n]&&Rs(a[n]).forEach(function(E){var k="";if(a[n][E].Type==rn.CMNT){k=kx(a[n][E].Target,t);var A=Q1e(ta(e,k,!0),k,l);if(!A||!A.length)return;uM(p,A,!1)}a[n][E].Type==rn.TCMNT&&(k=kx(a[n][E].Target,t),b=b.concat(Rme(ta(e,k,!0),l)))}),b&&b.length&&uM(p,b,!0,l.people||[])}catch(E){if(l.WTF)throw E}}function tl(e){return e.charAt(0)=="/"?e.slice(1):e}function kbe(e,t){if(hm(),t=t||{},L6(t),cl(e,"META-INF/manifest.xml")||cl(e,"objectdata.xml"))return bM(e,t);if(cl(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof RT<"u"){if(e.FileIndex)return RT(e);var r=wr.utils.cfb_new();return PI(e).forEach(function(re){Yr(r,re,Dfe(e,re))}),RT(r)}throw new Error("Unsupported NUMBERS file")}if(!cl(e,"[Content_Types].xml"))throw cl(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):cl(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=PI(e),s=Nhe(Ro(e,"[Content_Types].xml")),a=!1,i,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",ta(e,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!ta(e,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},u={};if(!t.bookSheets&&!t.bookProps){if(Wx=[],s.sst)try{Wx=J1e(ta(e,tl(s.sst)),s.sst,t)}catch(re){if(t.WTF)throw re}t.cellStyles&&s.themes.length&&(l=Y1e(Ro(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(u=X1e(ta(e,tl(s.style)),s.style,l,t))}s.links.map(function(re){try{var Y=Ux(Ro(e,bv(tl(re))),re);return ewe(ta(e,tl(re)),Y,re,t)}catch{}});var d=H1e(ta(e,tl(s.workbooks[0])),s.workbooks[0],t),f={},g="";s.coreprops.length&&(g=ta(e,tl(s.coreprops[0]),!0),g&&(f=Rq(g)),s.extprops.length!==0&&(g=ta(e,tl(s.extprops[0]),!0),g&&Dhe(g,f,t)));var p={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(g=Ro(e,tl(s.custprops[0]),!0),g&&(p=Mhe(g,t)));var x={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(Y){return Y.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),t.bookProps&&(x.Props=f,x.Custprops=p),t.bookSheets&&typeof i<"u"&&(x.SheetNames=i),t.bookSheets?x.SheetNames:t.bookProps))return x;i={};var y={};t.bookDeps&&s.calcchain&&(y=Z1e(ta(e,tl(s.calcchain)),s.calcchain));var v=0,T={},_,b;{var E=d.Sheets;f.Worksheets=E.length,f.SheetNames=[];for(var k=0;k!=E.length;++k)f.SheetNames[k]=E[k].name}var A=a?"bin":"xml",P=s.workbooks[0].lastIndexOf("/"),j=(s.workbooks[0].slice(0,P+1)+"_rels/"+s.workbooks[0].slice(P+1)+".rels").replace(/^\//,"");cl(e,j)||(j="xl/_rels/workbook."+A+".rels");var O=Ux(Ro(e,j,!0),j.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=twe(ta(e,tl(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=Ime(ta(e,tl(s.people[0])),t)),O&&(O=_be(O,d.Sheets));var R=ta(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var M="sheet";if(O&&O[v]?(_="xl/"+O[v][1].replace(/[\/]?xl\//,""),cl(e,_)||(_=O[v][1]),cl(e,_)||(_=j.replace(/_rels\/.*$/,"")+O[v][1]),M=O[v][2]):(_="xl/worksheets/sheet"+(v+1-R)+"."+A,_=_.replace(/sheet0\./,"sheet.")),b=_.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var G=!1,K=0;K!=t.sheets.length;++K)typeof t.sheets[K]=="number"&&t.sheets[K]==v&&(G=1),typeof t.sheets[K]=="string"&&t.sheets[K].toLowerCase()==f.SheetNames[v].toLowerCase()&&(G=1);if(!G)continue e}}Sbe(e,_,b,f.SheetNames[v],v,T,i,M,t,d,l,u)}return x={Directory:s,Workbook:d,Props:f,Custprops:p,Deps:y,Sheets:i,SheetNames:f.SheetNames,Strings:Wx,Styles:u,Themes:l,SSF:os(Ar)},t&&t.bookFiles&&(e.files?(x.keys=n,x.files=e.files):(x.keys=[],x.files={},e.FullPaths.forEach(function(re,Y){re=re.replace(/^Root Entry[\/]/,""),x.keys.push(re),x.files[re]=e.FileIndex[Y]}))),t&&t.bookVBA&&(s.vba.length>0?x.vbaraw=ta(e,tl(s.vba[0]),!0):s.defaults&&s.defaults.bin===Hme&&(x.vbaraw=ta(e,"xl/vbaProject.bin",!0))),x}function Tbe(e,t){var r=t||{},n="Workbook",s=wr.find(e,n);try{if(n="/!DataSpaces/Version",s=wr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(tpe(s.content),n="/!DataSpaces/DataSpaceMap",s=wr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=npe(s.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=wr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=spe(s.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=wr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);ipe(s.content)}catch{}if(n="/EncryptionInfo",s=wr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=ope(s.content);if(n="/EncryptedPackage",s=wr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Cbe(e,t){return t.bookType=="ods"?GK(e,t):t.bookType=="numbers"?wbe(e,t):t.bookType=="xlsb"?Ebe(e,t):Nbe(e,t)}function Ebe(e,t){Yg=1024,e&&!e.SSF&&(e.SSF=os(Ar)),e&&e.SSF&&(hm(),aS(e.SSF),t.revssf=oS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,zx?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=vK.indexOf(t.bookType)>-1,s=k6();B6(t=t||{});var a=u6(),i="",o=0;if(t.cellXfs=[],Df(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",Yr(a,i,Dq(e.Props,t)),s.coreprops.push(i),Rn(t.rels,2,i,rn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}for(e.Props.Worksheets=e.Props.SheetNames.length,Yr(a,i,Lq(e.Props)),s.extprops.push(i),Rn(t.rels,3,i,rn.EXT_PROPS),e.Custprops!==e.Props&&Rs(e.Custprops||{}).length>0&&(i="docProps/custom.xml",Yr(a,i,Bq(e.Custprops)),s.custprops.push(i),Rn(t.rels,4,i,rn.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],g=(f||{})["!type"]||"sheet";switch(g){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,Yr(a,i,nwe(o-1,i,t,e,d)),s.sheets.push(i),Rn(t.wbrels,-1,"worksheets/sheet"+o+"."+r,rn.WS[0])}if(f){var p=f["!comments"],x=!1,y="";p&&p.length>0&&(y="xl/comments"+o+"."+r,Yr(a,y,iwe(p,y)),s.comments.push(y),Rn(d,-1,"../comments"+o+"."+r,rn.CMNT),x=!0),f["!legacy"]&&x&&Yr(a,"xl/drawings/vmlDrawing"+o+".vml",yK(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&Yr(a,bv(i),lp(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,Yr(a,i,awe(t.Strings,i,t)),s.strs.push(i),Rn(t.wbrels,-1,"sharedStrings."+r,rn.SST)),i="xl/workbook."+r,Yr(a,i,rwe(e,i)),s.workbooks.push(i),Rn(t.rels,1,i,rn.WB),i="xl/theme/theme1.xml",Yr(a,i,j6(e.Themes,t)),s.themes.push(i),Rn(t.wbrels,-1,"theme/theme1.xml",rn.THEME),i="xl/styles."+r,Yr(a,i,swe(e,i,t)),s.styles.push(i),Rn(t.wbrels,-1,"styles."+r,rn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",Yr(a,i,e.vbaraw),s.vba.push(i),Rn(t.wbrels,-1,"vbaProject.bin",rn.VBA)),i="xl/metadata."+r,Yr(a,i,owe(i)),s.metadata.push(i),Rn(t.wbrels,-1,"metadata."+r,rn.XLMETA),Yr(a,"[Content_Types].xml",Oq(s,t)),Yr(a,"_rels/.rels",lp(t.rels)),Yr(a,"xl/_rels/workbook."+r+".rels",lp(t.wbrels)),delete t.revssf,delete t.ssf,a}function Nbe(e,t){Yg=1024,e&&!e.SSF&&(e.SSF=os(Ar)),e&&e.SSF&&(hm(),aS(e.SSF),t.revssf=oS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,zx?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=vK.indexOf(t.bookType)>-1,s=k6();B6(t=t||{});var a=u6(),i="",o=0;if(t.cellXfs=[],Df(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",Yr(a,i,Dq(e.Props,t)),s.coreprops.push(i),Rn(t.rels,2,i,rn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}e.Props.Worksheets=e.Props.SheetNames.length,Yr(a,i,Lq(e.Props)),s.extprops.push(i),Rn(t.rels,3,i,rn.EXT_PROPS),e.Custprops!==e.Props&&Rs(e.Custprops||{}).length>0&&(i="docProps/custom.xml",Yr(a,i,Bq(e.Custprops)),s.custprops.push(i),Rn(t.rels,4,i,rn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},g=e.Sheets[e.SheetNames[o-1]],p=(g||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,Yr(a,i,jK(o-1,t,e,f)),s.sheets.push(i),Rn(t.wbrels,-1,"worksheets/sheet"+o+"."+r,rn.WS[0])}if(g){var x=g["!comments"],y=!1,v="";if(x&&x.length>0){var T=!1;x.forEach(function(_){_[1].forEach(function(b){b.T==!0&&(T=!0)})}),T&&(v="xl/threadedComments/threadedComment"+o+"."+r,Yr(a,v,Dme(x,d,t)),s.threadedcomments.push(v),Rn(f,-1,"../threadedComments/threadedComment"+o+"."+r,rn.TCMNT)),v="xl/comments"+o+"."+r,Yr(a,v,xK(x)),s.comments.push(v),Rn(f,-1,"../comments"+o+"."+r,rn.CMNT),y=!0}g["!legacy"]&&y&&Yr(a,"xl/drawings/vmlDrawing"+o+".vml",yK(o,g["!comments"])),delete g["!comments"],delete g["!legacy"]}f["!id"].rId1&&Yr(a,bv(i),lp(f))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,Yr(a,i,aK(t.Strings,t)),s.strs.push(i),Rn(t.wbrels,-1,"sharedStrings."+r,rn.SST)),i="xl/workbook."+r,Yr(a,i,DK(e)),s.workbooks.push(i),Rn(t.rels,1,i,rn.WB),i="xl/theme/theme1.xml",Yr(a,i,j6(e.Themes,t)),s.themes.push(i),Rn(t.wbrels,-1,"theme/theme1.xml",rn.THEME),i="xl/styles."+r,Yr(a,i,hK(e,t)),s.styles.push(i),Rn(t.wbrels,-1,"styles."+r,rn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",Yr(a,i,e.vbaraw),s.vba.push(i),Rn(t.wbrels,-1,"vbaProject.bin",rn.VBA)),i="xl/metadata."+r,Yr(a,i,mK()),s.metadata.push(i),Rn(t.wbrels,-1,"metadata."+r,rn.XLMETA),d.length>1&&(i="xl/persons/person.xml",Yr(a,i,Mme(d)),s.people.push(i),Rn(t.wbrels,-1,"persons/person.xml",rn.PEOPLE)),Yr(a,"[Content_Types].xml",Oq(s,t)),Yr(a,"_rels/.rels",lp(t.rels)),Yr(a,"xl/_rels/workbook."+r+".rels",lp(t.wbrels)),delete t.revssf,delete t.ssf,a}function $6(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Mo(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Abe(e,t){return wr.find(e,"EncryptedPackage")?Tbe(e,t):BK(e,t)}function jbe(e,t){var r,n=e,s=t||{};return s.type||(s.type=Qr&&Buffer.isBuffer(e)?"buffer":"base64"),r=oq(n,s),kbe(r,s)}function qK(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return YA(e.slice(r),t);default:break e}return Tp.to_workbook(e,t)}function Pbe(e,t){var r="",n=$6(e,t);switch(t.type){case"base64":r=Mo(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=o0(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Wn(r)),t.type="binary",qK(r,t)}function Obe(e,t){var r=e;return t.type=="base64"&&(r=Mo(r)),r=pv.utils.decode(1200,r.slice(2),"str"),t.type="binary",qK(r,t)}function Fbe(e){return e.match(/[^\x00-\x7F]/)?Bc(e):e}function DT(e,t,r,n){return n?(r.type="string",Tp.to_workbook(e,r)):Tp.to_workbook(t,r)}function ZA(e,t){a6();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return ZA(new Uint8Array(e),(r=os(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),up={},r.dateNF&&(up.dateNF=r.dateNF),r.type||(r.type=Qr&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=Qr?"buffer":"binary",n=Efe(e),typeof Uint8Array<"u"&&!Qr&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,n=Fbe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=os(r),r.type="array",ZA(i6(n),r)}switch((s=$6(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return Abe(wr.read(n,r),r);break;case 9:if(s[1]<=8)return BK(n,r);break;case 60:return YA(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Lge(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return nK.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?jbe(n,r):DT(e,n,r,a);case 239:return s[3]===60?YA(n,r):DT(e,n,r,a);case 255:if(s[1]===254)return Obe(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Wh.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Wh.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return XA.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return uK.to_workbook(n,r);break;case 10:case 13:case 32:return Pbe(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Mge.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?XA.to_workbook(n,r):DT(e,n,r,a)}function KK(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return P1(t.file,wr.write(e,{type:Qr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return wr.write(e,t)}function Rbe(e,t){var r=os(t||{}),n=Cbe(e,r);return Dbe(n,r)}function Dbe(e,t){var r={},n=Qr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?wr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(sS(s))}return t.password&&typeof encrypt_agile<"u"?KK(encrypt_agile(s,t.password),t):t.type==="file"?P1(t.file,s):t.type=="string"?Wn(s):s}function Ibe(e,t){var r=t||{},n=Fwe(e,r);return KK(n,r)}function Oc(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return mv(Bc(n));case"binary":return Bc(n);case"string":return e;case"file":return P1(t.file,n,"utf8");case"buffer":return Qr?sd(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Oc(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Mbe(e,t){switch(t.type){case"base64":return mv(e);case"binary":return e;case"string":return e;case"file":return P1(t.file,e,"binary");case"buffer":return Qr?sd(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function bb(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?mv(r):t.type=="string"?Wn(r):r;case"file":return P1(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function XK(e,t){a6(),A1e(e);var r=os(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=XK(e,r);return r.type="array",sS(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Oc(Cwe(e,r),r);case"slk":case"sylk":return Oc(rK.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return Oc(UK(e.Sheets[e.SheetNames[s]],r),r);case"txt":return Mbe(YK(e.Sheets[e.SheetNames[s]],r),r);case"csv":return Oc(U6(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return Oc(nK.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return bb(XA.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return Oc(Tp.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return Oc(uK.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return Oc(sK.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return Oc(GK(e,r),r);case"wk1":return bb(Wh.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return bb(Wh.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),bb($K(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Ibe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Rbe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Lbe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function Bbe(e,t,r){var n={};return n.type="file",n.file=t,Lbe(n),XK(e,n)}function $be(e,t,r,n,s,a,i,o){var l=Vs(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,g=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:r,enumerable:!1})}catch{g.__rowNum__=r}else g.__rowNum__=r;if(!i||e[r])for(var p=t.s.c;p<=t.e.c;++p){var x=i?e[r][p]:e[n[p]+l];if(x===void 0||x.t===void 0){if(u===void 0)continue;a[p]!=null&&(g[a[p]]=u);continue}var y=x.v;switch(x.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(a[p]!=null){if(y==null)if(x.t=="e"&&y===null)g[a[p]]=null;else if(u!==void 0)g[a[p]]=u;else if(d&&y===null)g[a[p]]=null;else continue;else g[a[p]]=d&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?y:Ju(x,y,o);y!=null&&(f=!1)}}return{row:g,isempty:f}}function O_(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,a=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":l=gn(d);break;case"number":l=gn(e["!ref"]),l.s.r=d;break;default:l=d}n>0&&(s=0);var f=Vs(l.s.r),g=[],p=[],x=0,y=0,v=Array.isArray(e),T=l.s.r,_=0,b={};v&&!e[T]&&(e[T]=[]);var E=u.skipHidden&&e["!cols"]||[],k=u.skipHidden&&e["!rows"]||[];for(_=l.s.c;_<=l.e.c;++_)if(!(E[_]||{}).hidden)switch(g[_]=vs(_),r=v?e[T][_]:e[g[_]+f],n){case 1:a[_]=_-l.s.c;break;case 2:a[_]=g[_];break;case 3:a[_]=u.header[_-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=Ju(r,null,u),y=b[i]||0,!y)b[i]=1;else{do o=i+"_"+y++;while(b[o]);b[i]=y,b[o]=1}a[_]=o}for(T=l.s.r+s;T<=l.e.r;++T)if(!(k[T]||{}).hidden){var A=$be(e,l,T,g,n,a,v,u);(A.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(p[x++]=A.row)}return p.length=x,p}var CM=/"/g;function Ube(e,t,r,n,s,a,i,o){for(var l=!0,u=[],d="",f=Vs(r),g=t.s.c;g<=t.e.c;++g)if(n[g]){var p=o.dense?(e[r]||[])[g]:e[n[g]+f];if(p==null)d="";else if(p.v!=null){l=!1,d=""+(o.rawNumbers&&p.t=="n"?p.v:Ju(p,null,o));for(var x=0,y=0;x!==d.length;++x)if((y=d.charCodeAt(x))===s||y===a||y===34||o.forceQuotes){d='"'+d.replace(CM,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(l=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(CM,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&l?null:u.join(i)}function U6(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=gn(e["!ref"]),a=n.FS!==void 0?n.FS:",",i=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),u=new RegExp((a=="|"?"\\|":a)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var g=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],x=s.s.c;x<=s.e.c;++x)(g[x]||{}).hidden||(f[x]=vs(x));for(var y=0,v=s.s.r;v<=s.e.r;++v)(p[v]||{}).hidden||(d=Ube(e,s,v,f,i,l,a,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((y++?o:"")+d)));return delete n.dense,r.join("")}function YK(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=U6(e,t);return r}function Wbe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=gn(e["!ref"]),a="",i=[],o,l=[],u=Array.isArray(e);for(o=s.s.c;o<=s.e.c;++o)i[o]=vs(o);for(var d=s.s.r;d<=s.e.r;++d)for(a=Vs(d),o=s.s.c;o<=s.e.c;++o)if(t=i[o]+a,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=t+"="+n}return l}function JK(e,t,r){var n=r||{},s=+!n.skipHeader,a=e||{},i=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?ws(n.origin):n.origin;i=l.r,o=l.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+s}};if(a["!ref"]){var f=gn(a["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+t.length-1+s)}else i==-1&&(i=0,d.e.r=t.length-1+s);var g=n.header||[],p=0;t.forEach(function(y,v){Rs(y).forEach(function(T){(p=g.indexOf(T))==-1&&(g[p=g.length]=T);var _=y[T],b="z",E="",k=Pr({c:o+p,r:i+v+s});u=Nv(a,k),_&&typeof _=="object"&&!(_ instanceof Date)?a[k]=_:(typeof _=="number"?b="n":typeof _=="boolean"?b="b":typeof _=="string"?b="s":_ instanceof Date?(b="d",n.cellDates||(b="n",_=_a(_)),E=n.dateNF||Ar[14]):_===null&&n.nullError&&(b="e",_=0),u?(u.t=b,u.v=_,delete u.w,delete u.R,E&&(u.z=E)):a[k]=u={t:b,v:_},E&&(u.z=E))})}),d.e.c=Math.max(d.e.c,o+g.length-1);var x=Vs(i);if(s)for(p=0;p<g.length;++p)a[vs(p+o)+x]={t:"s",v:g[p]};return a["!ref"]=Kr(d),a}function zbe(e,t){return JK(null,e,t)}function Nv(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=ws(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Nv(e,Pr(t)):Nv(e,Pr({r:t,c:r||0}))}function Hbe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function W6(){return{SheetNames:[],Sheets:{}}}function z6(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=i+s)!=-1;++s);}if(RK(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function Gbe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=Hbe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function Vbe(e,t){return e.z=t,e}function QK(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function qbe(e,t,r){return QK(e,"#"+t,r)}function Kbe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function Xbe(e,t,r,n){for(var s=typeof t!="string"?t:gn(t),a=typeof t=="string"?t:Kr(t),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var l=Nv(e,i,o);l.t="n",l.F=a,delete l.v,i==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return e}var Gb={encode_col:vs,encode_row:Vs,encode_cell:Pr,encode_range:Kr,decode_col:x6,decode_row:y6,split_cell:ahe,decode_cell:ws,decode_range:mo,format_cell:Ju,sheet_add_aoa:Tq,sheet_add_json:JK,sheet_add_dom:WK,aoa_to_sheet:gm,json_to_sheet:zbe,table_to_sheet:zK,table_to_book:tbe,sheet_to_csv:U6,sheet_to_txt:YK,sheet_to_json:O_,sheet_to_html:UK,sheet_to_formulae:Wbe,sheet_to_row_object_array:O_,sheet_get_cell:Nv,book_new:W6,book_append_sheet:z6,book_set_sheet_visibility:Gbe,cell_set_number_format:Vbe,cell_set_hyperlink:QK,cell_set_internal_link:qbe,cell_add_comment:Kbe,sheet_set_array_formula:Xbe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const ZK=({onBackToCabinet:e,selectedGrade:t,selectedClass:r,openRetestModal:n})=>{yo(),P2();const{user:s,isAuthenticated:a}=ls(),{showNotification:i}=Ba(),o=C.useCallback(Ye=>{let ye=null;if(typeof Ye?.percentage=="number"&&!Number.isNaN(Ye.percentage))return ye=Math.round(Ye.percentage),console.debug("[TeacherResults] Using provided percentage",{percentage:Ye.percentage,rounded:ye,result:Ye}),ye;const $e=Ye?.retest_best_score??Ye?.score,Pe=Ye?.retest_best_max_score??Ye?.max_score,Tt=Number($e??0),kt=Number(Pe??0);return kt>0&&(ye=Math.round(Tt/kt*100)),ye},[]);C.useCallback(Ye=>{const ye=o(Ye);return ye===null?"text-gray-600":ye<50?"text-red-600 font-semibold":ye<70?"text-yellow-600":"text-green-600"},[o]),C.useCallback(Ye=>{const ye=o(Ye);return ye!==null&&ye<50},[o]);const[l,u]=C.useState(null),[d,f]=C.useState(!0),[g,p]=C.useState(""),[x,y]=C.useState([]),[v,T]=C.useState(null),[_,b]=C.useState(!1),[E,k]=C.useState([]),[A,P]=C.useState([]),[j,O]=C.useState([1,2]),[R,M]=C.useState(null),[G,K]=C.useState(null),[re,Y]=C.useState(null),[ee,B]=C.useState("main"),[z,I]=C.useState(null),[W,V]=C.useState(null),L=z||t,H=W||r,[J,Q]=C.useState(null),[ne,Z]=C.useState({}),[se,ce]=C.useState(!1),[he,Ee]=C.useState(new Set),[ie,me]=C.useState(!0),[Ne,Oe]=C.useState(null),[Re,ze]=C.useState(null),[Nt,et]=C.useState(!1),[Me,Fe]=C.useState(!1),[Ke,xt]=C.useState(!1),ut=C.useRef(null),[At,Dt]=C.useState(null),[Qe,tt]=C.useState(!1),[vt,gt]=C.useState(null),[_t,Wt]=C.useState(!1),[Zt,pr]=C.useState(null),[Ir,br]=C.useState(""),[xr,er]=C.useState(""),[_r,ge]=C.useState(!1),[ue,we]=C.useState(!1),[Te,Xe]=C.useState(null),[Ct,Pt]=C.useState(""),[Ue,ft]=C.useState(!1),[ot,Ht]=C.useState(new Set),[Gt,mr]=C.useState({}),[Vr,vr]=C.useState(!1),[hr,le]=C.useState(null),[_e,pe]=C.useState(""),[ve,Se]=C.useState(!1),ke=C.useRef(new Set),Ge=C.useRef({}),dt=C.useRef(null);C.useEffect(()=>{console.log(" editingColumns state changed:",Array.from(ot)),ke.current=ot},[ot]),C.useEffect(()=>{console.log(" columnScores state changed:",Gt),Ge.current=Gt},[Gt]);const Ie=C.useCallback(Ye=>{console.log(" Toggling test collapse for:",Ye),Ee(ye=>{const $e=new Set(ye);return $e.has(Ye)?($e.delete(Ye),console.log(" Expanding test:",Ye)):($e.add(Ye),console.log(" Collapsing test:",Ye)),console.log(" New collapsed tests:",Array.from($e)),$e})},[]),oe=C.useCallback(()=>{if(ut.current){const{scrollLeft:Ye,scrollWidth:ye,clientWidth:$e}=ut.current;Fe(Ye>0),xt(Ye<ye-$e-1)}},[]);C.useEffect(()=>{Ce()},[]),C.useEffect(()=>{if(R&&ut.current){const Ye=setTimeout(oe,100);return()=>clearTimeout(Ye)}},[R,oe]),C.useEffect(()=>{console.log(" Current collapsed tests state:",Array.from(he))},[he]);const fe=C.useCallback(async Ye=>{try{ce(!0);const ye=s?.teacher_id,$e=`${L}/${H}`,Pe=await Yue.getTeacherStudentResults(ye,L,$e,Ye);if(Pe.success){console.log(" Results loaded for term:",Ye,Pe.results?.length||0,"results"),console.log(" Students loaded:",Pe.students?.length||0,"students");const Tt=[],kt=new Set,nr=new Set;Pe.results&&Pe.results.length>0&&Pe.results.forEach(Ut=>{Ut.test_name&&!kt.has(Ut.test_name)&&(kt.add(Ut.test_name),Tt.push({test_name:Ut.test_name,test_type:Ut.test_type,subject:Ut.subject})),Ut.subject&&nr.add(Ut.subject)});const Or=(Pe.students||[]).map(Ut=>{const It={};return(Pe.results||[]).filter(ur=>ur.student_id===Ut.student_id).forEach(ur=>{ur.test_name&&(It[ur.test_name]={id:ur.id,test_type:ur.test_type,test_id:ur.test_id,subject_id:ur.subject_id,score:ur.score,max_score:ur.max_score,retest_offered:ur.retest_offered,caught_cheating:ur.caught_cheating,visibility_change_times:ur.visibility_change_times,answers:ur.answers,ai_feedback:ur.ai_feedback,name:ur.name,surname:ur.surname,test_name:ur.test_name})}),{...Ut,...It}}),ct={results:Pe.results||[],students:Or,class:Or,unique_tests:Tt,subjects:Array.from(nr),count:Pe.count||0,student_count:Pe.student_count||0};console.log(" Processed results data:",{uniqueTests:Tt.length,subjects:Array.from(nr),resultsCount:Pe.results?.length||0,studentsWithScores:Or.length,sampleStudent:Or[0]}),M(ct),Z(ct),Y(new Date)}}catch(ye){console.error(" Error loading results for term:",ye),M(null),Z(null)}finally{ce(!1)}},[s,L,H]);C.useEffect(()=>{(async()=>{try{et(!0),await nc.loadAcademicCalendar();const ye=nc.getCurrentSemesterTerms();ze(ye),ye?.currentTerm&&(Oe(ye.currentTerm.id),L&&H&&fe(ye.currentTerm.id))}catch(ye){console.error(" Error initializing academic calendar:",ye)}finally{et(!1)}})()},[L,H]),C.useEffect(()=>{t&&r&&(console.log(" Props detected:",{grade:t,class:r}),Re?.currentTerm&&(Oe(Re.currentTerm.id),fe(Re.currentTerm.id)))},[t,r,Re]);const Ce=C.useCallback(async()=>{console.log(" Initializing teacher results...");try{if(f(!0),p(""),!a||!s){console.log(" User not authenticated"),p("User not authenticated");return}if(s.role!==Gi.TEACHER){console.error(" Invalid user role for teacher results:",s.role),p("Access denied. Teacher role required.");return}console.log(" Loading teacher assignments..."),await je(),console.log(" TODO: Load academic calendar service"),console.log(" Teacher results initialization complete!")}catch(Ye){console.error(" Error initializing teacher results:",Ye),p("Failed to initialize teacher results")}finally{f(!1)}},[a,s]),je=C.useCallback(async()=>{console.log(" Loading teacher assignments...");try{const Ye=`teacher_data_${s?.teacher_id||s?.id||""}`;let ye=ms(Ye);ye&&ye.subjects&&ye.subjects.length>0&&(ye.subjects.some(ct=>ct.subject&&ct.classes&&ct.classes.length>0)||(console.log(" Cached data has invalid subject structure, forcing refresh"),localStorage.removeItem(Ye),ye=null)),ye?console.log(" Cache HIT! Using cached teacher data"):(console.log(" Cache MISS! Fetching teacher data from API"),ye=await ts.getTeacherData(),console.log(" Teacher data loaded:",ye),ys(Ye,ye,Os.teacher_subjects)),u(ye);const $e=[];ye&&ye.subjects&&(console.log(" Teacher subjects structure:",ye.subjects),ye.subjects.forEach(Or=>{console.log(" Processing subject:",Or),Or.classes&&Or.classes.forEach(ct=>{ct.grade&&ct.class&&$e.push({grade:ct.grade,class:ct.class,subject:Or.subject||Or.name||"Unknown Subject"})})})),P($e),console.log(" Available classes from teacher data:",$e);const Pe=`teacher_tests_${s?.teacher_id||s?.id||""}`,Tt=ms(Pe);Tt&&Tt.some(Or=>Or.test_type==="drawing")&&(console.log(" Drawing test detected - forcing cache refresh"),localStorage.removeItem(Pe));let kt=ms(Pe);kt?console.log(" Cache HIT! Using cached teacher tests"):(console.log(" Cache MISS! Fetching teacher tests from API"),kt=await yn.getTeacherTests(),console.log(" Teacher tests loaded:",kt),ys(Pe,kt,Os.teacher_tests));const nr=kt.flatMap(Or=>Or.assignments||[]);y(nr),console.log(" Raw assignments data:",nr),console.log(" Teacher assignments loaded:",nr.length)}catch(Ye){console.error(" Error loading teacher assignments:",Ye),i("Failed to load teacher assignments","error")}},[i]),qe=C.useCallback(async(Ye,ye)=>{console.log(" Showing classes for grade:",Ye,"class:",ye),I(Ye),V(ye),T(null),M(null),Ye&&ye&&console.log(" TODO: Implement academic calendar service for term selection")},[]);C.useCallback((Ye,ye)=>{console.log(" Showing semesters for class:",Ye,ye),T(null),M(null),console.log(" TODO: Implement academic calendar service for term selection")},[]),C.useCallback((Ye,ye)=>{console.log(" Class clicked:",Ye,ye),b(!0),console.log(" TODO: Implement academic calendar service for term selection")},[]);const Ze=C.useCallback(async Ye=>{!L||!H||(console.log(" Loading results for semester:",Ye),T(Ye),Re?.currentTerm&&await fe(Re.currentTerm.id))},[L,H,Re,fe]),mt=C.useCallback(()=>Re?c.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[c.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Current Semester: ",Re?.semester===1?"Semester 1":"Semester 2"]}),c.jsx("div",{className:"flex space-x-4",children:Re?.terms.map(Ye=>c.jsx(rt.button,{className:`px-6 py-3 rounded-lg font-semibold transition-all duration-300 ${Ye.isCurrent?"bg-blue-600 text-white shadow-lg":Ne===Ye.id?"bg-green-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,onClick:()=>{Oe(Ye.id),fe(Ye.id)},whileHover:{scale:1.05},whileTap:{scale:.95},children:Ye.label},Ye.id))})]}):c.jsx("div",{className:"flex space-x-4 mb-6",children:c.jsx("div",{className:"px-6 py-3 rounded-lg bg-gray-200 text-gray-500",children:"Loading terms..."})}),[Re,Ne,fe]);C.useCallback(Ye=>Ye.reduce((ye,$e)=>(ye[$e.student_id]||(ye[$e.student_id]=[]),ye[$e.student_id].push($e),ye),{}),[]),C.useCallback(Ye=>{if(Ye.length===0)return 0;const ye=Ye.reduce(($e,Pe)=>$e+(Pe.percentage||0),0);return Math.round(ye/Ye.length)},[]),C.useCallback(Ye=>{Ye.score<Ye.passing_score&&window.confirm("Give another try?")&&qt(Ye.student_id,Ye.test_id)},[]);const qt=C.useCallback(async(Ye,ye)=>{try{(await fetch("/.netlify/functions/reset-test-attempt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:Ye,testId:ye})})).ok&&(H&&Ze(v),i("Test made accessible to student","success"))}catch($e){console.error("Error resetting test attempt:",$e),i("Failed to reset test attempt","error")}},[H,v,Ze,i]),pt=C.useCallback((Ye,ye)=>{if(Ye===null||ye===null)return"";const $e=Math.round(Ye/ye*100);return $e>=80?"text-green-600 bg-green-50":$e>=60?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50"},[]),Bt=C.useCallback(Ye=>{Dt(Ye),tt(!0)},[]),Cr=C.useCallback((Ye,ye="overview",$e)=>{try{const Tt=!!Ye?.ai_feedback,kt=typeof Ye?.ai_feedback;let nr=[];if(Tt)if(kt==="string")try{nr=Object.keys(JSON.parse(Ye.ai_feedback))}catch{nr=["<invalid json>"]}else kt==="object"&&(nr=Object.keys(Ye.ai_feedback||{}));console.log("[AI DEBUG] Opening speaking result",{hasAi:Tt,aiType:kt,aiKeys:nr})}catch{}const Pe={...Ye,__initialTab:ye};$e&&(Pe.__audioUrl=$e),gt(Pe),Wt(!0)},[]);C.useCallback((Ye,ye,$e)=>{pr({resultId:Ye,score:ye,maxScore:$e}),br(ye?.toString()||""),er($e?.toString()||""),we(!0)},[]),C.useCallback(Ye=>{br(Ye)},[]),C.useCallback(Ye=>{er(Ye)},[]),C.useCallback(async()=>{if(Zt){ge(!0);try{const Ye={resultId:Zt.resultId,score:parseInt(Ir)||0,maxScore:parseInt(xr)||1};(await fetch(ox.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ye)})).ok?(i("Score updated successfully","success"),H&&Ze(v),pr(null),br(""),er(""),we(!1)):i("Failed to update score","error")}catch(Ye){console.error("Error updating score:",Ye),i("Failed to update score","error")}finally{ge(!1)}}},[Zt,Ir,xr,H,v,Ze,i]),C.useCallback(()=>{pr(null),br(""),er(""),we(!1)},[]);const $r=C.useCallback((Ye,ye)=>{Xe({resultId:Ye,score:ye}),Pt(ye.toString())},[]),Ur=C.useCallback(async()=>{if(Te){ft(!0);try{const Ye={resultId:Te.resultId,score:parseInt(Ct)||0},ye=await fetch(ox.UPDATE_SPEAKING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ye)});if(ye.ok){const $e=await ye.json();i("Speaking test score updated successfully","success"),vt&&gt(Pe=>({...Pe,score:$e.score,percentage:$e.percentage})),H&&Ze(v),Xe(null),Pt("")}else{const $e=await ye.json();i($e.error||"Failed to update speaking test score","error")}}catch(Ye){console.error("Error updating speaking test score:",Ye),i("Failed to update speaking test score","error")}finally{ft(!1)}}},[Te,Ct,H,v,Ze,i]),wn=C.useCallback(()=>{Xe(null),Pt("")},[]),Xr=(Ye,ye)=>{console.log(" Starting column editing for drawing test:",Ye),console.log(" Current editingColumns before update:",Array.from(ot)),console.log(" Results data passed to function:",ye),Ht($e=>{const Pe=new Set($e).add(Ye);return console.log(" Updated editingColumns:",Array.from(Pe)),Pe}),console.log(" Initializing column scores for test:",Ye),console.log(" Results data:",ye),console.log(" Results.class:","null"),console.log(" No results or class data available")},Wr=C.useCallback(Ye=>{Ht(ye=>{const $e=new Set(ye);return $e.delete(Ye),$e}),mr(ye=>{const $e={...ye};return delete $e[Ye],$e})},[]),ar=C.useCallback((Ye,ye,$e,Pe)=>{const Tt=Pe.toString();Ge.current[Ye]||(Ge.current[Ye]={}),Ge.current[Ye][ye]||(Ge.current[Ye][ye]={}),Ge.current[Ye][ye][$e]=Tt;const kt=parseInt(Pe)||0;mr(nr=>({...nr,[Ye]:{...nr[Ye],[ye]:{...nr[Ye]?.[ye],[$e]:kt}}}))},[]),xe=C.useCallback(async Ye=>{if(Ge.current[Ye]){vr(!0);try{const ye=Object.entries(Ge.current[Ye]).map(([kt,nr])=>({resultId:nr.resultId,score:parseInt(nr.score)||0,maxScore:parseInt(nr.maxScore)||100}));console.log(" Saving column scores for",Ye,":",ye);const $e=ye.map(kt=>(console.log(" Sending update:",kt),fetch(ox.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(kt)})));(await Promise.all($e)).every(kt=>kt.ok)?(i(`Scores updated successfully for ${Ye}`,"success"),H&&Ze(v),Wr(Ye)):i("Failed to update some scores","error")}catch(ye){console.error("Error updating column scores:",ye),i("Failed to update scores","error")}finally{vr(!1)}}},[Gt,H,v,Ze,i,Wr]),ht=C.useCallback((Ye,ye,$e)=>!ye||ye.length===0?c.jsx(rt.div,{className:"text-center py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:c.jsx("p",{className:"text-gray-500",children:"No students found for this subject"})}):c.jsx(rt.div,{className:"relative",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:c.jsxs(rt.div,{className:"bg-white rounded-lg shadow-lg overflow-hidden",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.1},children:[c.jsx("div",{className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",onScroll:Pe=>{ut.current&&(ut.current.scrollLeft=Pe.target.scrollLeft)},children:c.jsx("div",{className:"min-w-full h-1",children:c.jsx("div",{className:"h-1",style:{width:`${($e.length+5)*120}px`}})})}),c.jsx("div",{ref:ut,className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",onScroll:Pe=>{oe(Pe);const Tt=Pe.target.previousElementSibling;Tt&&(Tt.scrollLeft=Pe.target.scrollLeft)},children:c.jsxs("table",{className:"min-w-full border-collapse text-sm min-w-max",children:[c.jsx("thead",{children:c.jsxs(rt.tr,{className:"bg-gradient-to-r from-blue-50 to-indigo-50",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[c.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 w-20 text-center",children:"Student ID"}),c.jsx("th",{className:`border-b border-gray-200 px-2 py-4 text-left font-semibold text-gray-700 ${ie?"w-8 min-w-[32px] max-w-[32px] bg-gray-100 cursor-pointer select-none":"min-w-[180px] bg-blue-50 cursor-pointer select-none"}`,onClick:Pe=>{Pe.preventDefault(),Pe.stopPropagation(),me(!ie)},title:"Toggle student name columns",children:ie?c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"truncate",title:"Student Name",children:"Student Name"}),c.jsx("svg",{className:"w-4 h-4 ml-1 flex-shrink-0 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),c.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 w-16 text-center",children:"No."}),c.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 min-w-[100px]",children:"Nickname"}),$e.map((Pe,Tt)=>{const kt=he.has(Pe.test_name),nr=Pe.test_type==="drawing",Or=ke.current.has(Pe.test_name);return console.log(` Rendering test ${Pe.test_name}:`,{isDrawingTest:nr,isEditingColumn:Or,editingColumns:Array.from(ke.current),test_type:Pe.test_type}),c.jsx("th",{className:`border-b border-gray-200 px-2 py-4 text-left font-semibold text-gray-700 cursor-pointer hover:bg-blue-200 transition-colors select-none ${kt?"w-8 min-w-[32px] max-w-[32px] bg-gray-100":"min-w-[100px] bg-blue-50"}`,onClick:ct=>{ct.preventDefault(),ct.stopPropagation(),Ie(Pe.test_name)},children:kt?c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"truncate",title:Pe.test_name,children:Pe.test_name.length>8?Pe.test_name.substring(0,8)+"...":Pe.test_name}),c.jsx("svg",{className:"w-4 h-4 ml-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})},Tt)})]})}),c.jsx("tbody",{children:c.jsx(co,{children:ye.map((Pe,Tt)=>c.jsxs(rt.tr,{className:`border-b border-gray-100 hover:bg-blue-50 transition-colors duration-200 ${Tt%2===0?"bg-white":"bg-gray-50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1+Tt*.05,ease:"easeOut"},whileHover:{scale:1.01,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.99},children:[c.jsx(rt.td,{className:"border-b border-gray-100 px-4 py-4 text-center font-semibold text-gray-900",whileHover:{scale:1.05},transition:{duration:.2},children:Pe.student_id}),ie?c.jsx("td",{className:"border-b border-gray-100 px-1 py-4 text-sm w-8 min-w-[32px] max-w-[32px]",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:kt=>{kt.preventDefault(),kt.stopPropagation(),me(!1)},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}):c.jsxs(c.Fragment,{children:[c.jsx(rt.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:Pe.name}),c.jsx(rt.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:Pe.surname})]}),c.jsx(rt.td,{className:"border-b border-gray-100 px-4 py-4 text-center text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:Pe.number??Tt+1}),c.jsx(rt.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-600",whileHover:{scale:1.02},transition:{duration:.2},children:Pe.nickname||"-"}),$e.map((kt,nr)=>{const Or=he.has(kt.test_name),ct=Pe[kt.test_name];return Or?(console.log(" Rendering collapsed column for test:",kt.test_name),c.jsx("td",{className:"border-b border-gray-100 px-1 py-4 text-sm w-8 min-w-[32px] max-w-[32px]",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:Ut=>{Ut.preventDefault(),Ut.stopPropagation(),console.log(" Clicked on collapsed arrow for:",kt.test_name),Ie(kt.test_name)},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})},nr)):c.jsx(rt.td,{className:"border-b border-gray-100 px-2 py-4 text-sm min-w-[100px]",initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},transition:{duration:.3},whileHover:{scale:1.02},onClick:Ut=>{if(console.debug("[TeacherResults] Main table TD clicked",{testResult:ct,student:Pe.student_id}),ct?.retest_offered){i("Retest is already offered","info");return}const It=o(ct);It!==null&&It<50&&(console.debug("[TeacherResults] Main table TD -> opening retest modal",{studentId:Pe.student_id,test:kt}),n({failedStudentIds:[Pe.student_id],test_type:kt.test_type,original_test_id:ct?.test_id||kt.test_id,subject_id:ct?.subject_id||kt.subject_id,grade:t,class:r}))},children:ct&&ct.test_type==="drawing"?c.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[c.jsx("button",{onClick:()=>Bt(ct),className:"text-blue-600 hover:text-blue-800 underline text-sm font-medium px-2 py-1 rounded hover:bg-blue-50",children:"View Drawing"}),(()=>{const Ut=`${kt.test_name}|${Pe.student_id}`,It=hr===Ut,Zn=Number.isFinite(ct?.score)?ct.score:0;if(!It){const ur=o(ct),Fr=ur!==null&&ur<50,In=ur!==null&&ur>=50&&ur<70,la=ct?.retest_offered===!0,ic=ur===null?"text-gray-600":Fr?"text-red-600 font-semibold":In?"text-yellow-600":"text-green-600";return c.jsxs(rt.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${ic} ${Fr?"cursor-pointer hover:opacity-90":""} ${la?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:Fr?{color:"#b91c1c"}:void 0,whileHover:{scale:Fr?1.1:1.05},transition:{duration:.2},onClick:()=>{Fr&&!la?n({failedStudentIds:[Pe.student_id],test_type:kt.test_type,original_test_id:ct?.test_id||kt.test_id,subject_id:ct?.subject_id||kt.subject_id,grade:t,class:r}):(le(Ut),pe(String(Zn)))},title:la?"Retest offered":Fr?"Offer retest":"Click to edit score",children:[(()=>{const ud=ct.retest_best_score??ct.score,oc=ct.retest_best_max_score??ct.max_score;return c.jsxs(c.Fragment,{children:[c.jsx("span",{className:Fr?"text-red-700":"",children:ud}),"/",c.jsx("span",{children:oc})]})})(),ct.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})}return c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("input",{type:"number",min:"0",max:10,value:_e,onChange:ur=>pe(ur.target.value),onBlur:async()=>{const ur=Math.max(0,Math.min(10,parseFloat(_e||"0")));Se(!0);try{const Fr={resultId:ct?.id,score:ur,maxScore:10},In=localStorage.getItem("auth_token")||localStorage.getItem("accessToken")||localStorage.getItem("token");if(!(await fetch(ox.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:In?`Bearer ${In}`:""},body:JSON.stringify(Fr)})).ok)throw new Error("Failed to save")}catch{}finally{Se(!1),le(null),Ze(v)}},onKeyDown:async ur=>{ur.key==="Enter"?ur.currentTarget.blur():ur.key==="Escape"&&le(null)},className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0",disabled:ve}),c.jsx("span",{className:"text-xs text-gray-500",children:"/"}),c.jsx("input",{type:"number",value:10,className:"w-12 px-2 py-1 text-xs border border-gray-300 bg-gray-100 rounded",disabled:!0})]})})(),ct.caught_cheating&&ct.visibility_change_times&&c.jsxs("span",{className:"text-xs text-red-600",children:["(",ct.visibility_change_times,")"]})]}):ct&&(ct.test_type==="speaking"||kt.test_type==="speaking")?c.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[(()=>{const Ut=ct?.answers;let It;if(typeof Ut=="string")if(/^https?:\/\//i.test(Ut))It=Ut;else try{It=JSON.parse(Ut)?.audio_url}catch{}else Ut&&typeof Ut=="object"&&(It=Ut.audio_url);return!It&&ct?.audio_url&&(It=ct.audio_url),c.jsx(c.Fragment,{children:c.jsx("button",{onClick:()=>Cr({...ct,__studentId:Pe.student_id},"audio",It),className:"text-blue-600 hover:text-blue-800 underline text-sm font-medium px-2 py-1 rounded hover:bg-blue-50",children:"Results"})})})(),(()=>{const Ut=ke.current.has(kt.test_name);return console.log(` Score cell for ${kt.test_name}:`,{isEditing:Ut,editingColumns:Array.from(ke.current),test_name:kt.test_name}),Ut})()?c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("input",{type:"number",min:"0",max:ct.max_score||100,value:Ge.current[kt.test_name]?.[Pe.student_id]?.score||ct.score||"",onChange:Ut=>ar(kt.test_name,Pe.student_id,"score",Ut.target.value),className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),c.jsx("span",{className:"text-xs text-gray-500",children:"/"}),c.jsx("input",{type:"number",min:"1",value:Ge.current[kt.test_name]?.[Pe.student_id]?.maxScore||ct.max_score||100,onChange:Ut=>ar(kt.test_name,Pe.student_id,"maxScore",Ut.target.value),className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Max"})]}):c.jsxs("div",{className:"px-2 py-1 rounded-full text-xs font-medium",onDoubleClick:()=>{console.log(" Double-clicked on speaking test score:",kt.test_name),console.log(" Results state at double-click:",R),console.log(" Test result:",ct),console.log(" Student:",Pe),console.log(" Test:",kt),ct&&ct.id?(console.log(" Starting column editing for speaking test:",kt.test_name),Xr(kt.test_name)):console.log(" No test result ID found, cannot edit")},title:"Double-click to edit scores",children:[(()=>{const Ut=o(ct),It=Ut!==null&&Ut<50,Zn=Ut!==null&&Ut>=50&&Ut<70,ur=ct.retest_offered,Fr=Ut===null?"text-gray-600":It?"text-red-600 font-semibold":Zn?"text-yellow-600":"text-green-600";return c.jsxs(rt.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${Fr} ${It?"cursor-pointer hover:opacity-90":""} ${ur?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:It?{color:"#b91c1c"}:void 0,whileHover:{scale:It?1.1:1.05},transition:{duration:.2},onClick:()=>{It&&!ur&&(console.log(" Offering retest for speaking test:",kt.test_name),n({failedStudentIds:[Pe.student_id],test_type:kt.test_type,original_test_id:ct?.test_id||kt.test_id,subject_id:ct?.subject_id||kt.subject_id,grade:t,class:r}))},title:ur?"Retest offered":It?"Offer retest":"",children:[(()=>{const In=ct.retest_best_score??ct.score,la=ct.retest_best_max_score??ct.max_score;return c.jsxs(c.Fragment,{children:[c.jsx("span",{className:It?"text-red-700":"",children:In}),"/",c.jsx("span",{children:la})]})})(),ct.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})(),ct.caught_cheating&&ct.visibility_change_times&&c.jsxs("span",{className:"text-xs text-red-600",children:["(",ct.visibility_change_times,")"]})]})]}):ct&&ct.score!==null&&ct.score!==void 0?c.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[(()=>{const Ut=o(ct),It=Ut!==null&&Ut<50,Zn=Ut!==null&&Ut>=50&&Ut<70,ur=Ut===null?"text-gray-600":It?"text-red-600 font-semibold":Zn?"text-yellow-600":"text-green-600",Fr=ct?.retest_offered===!0;return c.jsxs(rt.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${ur} ${It?"cursor-pointer hover:opacity-90":""} ${Fr?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:It?{color:"#b91c1c"}:void 0,whileHover:{scale:It?1.1:1.05},transition:{duration:.2},onClick:In=>{if(In.preventDefault(),In.stopPropagation(),ct?.retest_offered){i("Retest is already offered","info");return}It&&n({failedStudentIds:[Pe.student_id],test_type:kt.test_type,original_test_id:ct?.test_id||kt.test_id,subject_id:ct?.subject_id||kt.subject_id,grade:t,class:r})},title:Fr?"Retest offered":It?"Offer retest":"",children:[(()=>{const In=ct.retest_best_score??ct.score,la=ct.retest_best_max_score??ct.max_score;return c.jsxs(c.Fragment,{children:[c.jsx("span",{className:It?"text-red-700":"",children:In}),"/",c.jsx("span",{children:la})]})})(),ct.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})(),ct.caught_cheating&&ct.visibility_change_times&&c.jsxs("span",{className:"text-xs text-red-600",children:["(",ct.visibility_change_times,")"]})]}):c.jsx("span",{className:"text-gray-400",children:"-"})},nr)})]},Tt))})})]})})]})}),[pt,he,Ie,ie]),Er=C.useCallback((Ye,ye,$e)=>!ye||ye.length===0?c.jsx(rt.div,{className:"text-center py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:c.jsx("p",{className:"text-gray-500",children:"No students found for this subject"})}):c.jsx(rt.div,{className:"w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},children:c.jsx(rt.div,{className:"overflow-x-auto -mx-4 px-4",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1},children:c.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden min-w-max",children:c.jsxs("table",{className:"w-full border-collapse text-xs min-w-max",children:[c.jsx("thead",{children:c.jsxs(rt.tr,{className:"bg-gradient-to-r from-blue-50 to-indigo-50",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2,delay:.2},children:[c.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 w-16 text-center",children:"ID"}),c.jsx("th",{className:`border-b border-gray-200 px-2 py-3 text-left font-semibold text-gray-700 ${ie?"w-8 min-w-[32px] max-w-[32px] bg-gray-100 cursor-pointer select-none":"min-w-[160px] bg-blue-50 cursor-pointer select-none"}`,onClick:Pe=>{Pe.preventDefault(),Pe.stopPropagation(),me(!ie)},title:"Toggle student name columns",children:ie?c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"truncate",title:"Student Name",children:"Student Name"}),c.jsx("svg",{className:"w-3 h-3 ml-1 flex-shrink-0 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),c.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 w-12 text-center",children:"No."}),c.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 min-w-[80px]",children:"Nickname"}),$e.map((Pe,Tt)=>{const kt=Pe.test_type==="drawing",nr=ke.current.has(Pe.test_name);return c.jsx(rt.th,{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 min-w-[100px]",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.3+Tt*.05},children:c.jsxs("div",{className:"flex flex-col space-y-1",children:[kt&&c.jsx("div",{className:"flex justify-center",children:nr?c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:Or=>{Or.preventDefault(),Or.stopPropagation(),xe(Pe.test_name)},disabled:Vr,className:"px-1 py-0.5 bg-green-600 text-white text-xs rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:Vr?"Saving...":"Save"}),c.jsx("button",{onClick:Or=>{Or.preventDefault(),Or.stopPropagation(),Wr(Pe.test_name)},disabled:Vr,className:"px-1 py-0.5 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 disabled:opacity-50",children:"Cancel"})]}):c.jsx("button",{onClick:Or=>{Or.preventDefault(),Or.stopPropagation(),Xr(Pe.test_name)},className:"px-1 py-0.5 bg-blue-600 text-white text-xs rounded hover:bg-blue-700",children:"Edit"})}),c.jsx("span",{className:"text-xs",children:Pe.test_name.length>10?Pe.test_name.substring(0,10)+"...":Pe.test_name})]})},Tt)})]})}),c.jsx("tbody",{children:c.jsx(co,{children:ye.map((Pe,Tt)=>c.jsxs(rt.tr,{className:`border-b border-gray-100 hover:bg-blue-50 transition-colors duration-200 ${Tt%2===0?"bg-white":"bg-gray-50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.1+Tt*.03,ease:"easeOut"},whileHover:{scale:1.005,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.995},children:[c.jsx(rt.td,{className:"border-b border-gray-100 px-3 py-3 text-center font-semibold text-gray-900",whileHover:{scale:1.03},transition:{duration:.15},children:Pe.student_id}),ie?c.jsx("td",{className:"border-b border-gray-100 px-1 py-3 text-xs w-8 min-w-[32px] max-w-[32px]",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-3 h-3 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:kt=>{kt.preventDefault(),kt.stopPropagation(),me(!1)},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}):c.jsxs(c.Fragment,{children:[c.jsx(rt.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:Pe.name}),c.jsx(rt.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:Pe.surname})]}),c.jsx(rt.td,{className:"border-b border-gray-100 px-3 py-3 text-center text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:Pe.number??Tt+1}),c.jsx(rt.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-600 whitespace-normal break-words",whileHover:{scale:1.01},transition:{duration:.15},children:Pe.nickname||"-"}),$e.map((kt,nr)=>{const Or=he.has(kt.test_name),ct=Pe[kt.test_name];return Or?c.jsx("td",{className:"border-b border-gray-100 px-1 py-3 text-sm w-8 min-w-[32px] max-w-[32px]",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:Ut=>{Ut.preventDefault(),Ut.stopPropagation(),Ie(kt.test_name)},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})},nr):c.jsx(rt.td,{className:"border-b border-gray-100 px-3 py-3 text-sm",whileHover:{scale:1.01},transition:{duration:.15},onClick:Ut=>{console.debug("[TeacherResults] TD clicked",{testResult:ct,student:Pe.student_id});const It=o(ct);if(It!==null&&It<50){if(ct?.retest_offered){i("Retest is already offered","info");return}console.debug("[TeacherResults] TD -> opening retest modal",{studentId:Pe.student_id}),n({failedStudentIds:[Pe.student_id],test_type:ct.test_type,original_test_id:ct.test_id,subject_id:ct.subject_id,grade:t,class:r})}},children:ct&&ct.score!==null&&ct.score!==void 0?c.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[ct.test_type==="drawing"?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>Bt(ct),className:"text-blue-600 hover:text-blue-800 underline text-xs font-medium px-1 py-0.5 rounded hover:bg-blue-50",children:"View"}),ke.current.has(kt.test_name)?c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("input",{type:"number",min:"0",max:ct.max_score||100,value:Ge.current[kt.test_name]?.[Pe.student_id]?.score||ct.score||"",onChange:Ut=>ar(kt.test_name,Pe.student_id,"score",Ut.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),c.jsx("span",{className:"text-xs text-gray-500",children:"/"}),c.jsx("input",{type:"number",min:"1",value:Ge.current[kt.test_name]?.[Pe.student_id]?.maxScore||ct.max_score||100,onChange:Ut=>ar(kt.test_name,Pe.student_id,"maxScore",Ut.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Max"})]}):(()=>{const Ut=o(ct),It=Ut!==null&&Ut<50,Zn=Ut!==null&&Ut>=50&&Ut<70,ur=ct.retest_offered,Fr=Ut===null?"text-gray-600":It?"text-red-600 font-semibold":Zn?"text-yellow-600":"text-green-600";return c.jsxs(rt.div,{className:`px-1 py-0.5 rounded text-xs font-medium ${Fr} ${It?"cursor-pointer hover:opacity-90":""} ${ur?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:It?{color:"#b91c1c"}:void 0,whileHover:{scale:It?1.05:1},transition:{duration:.15},onDoubleClick:()=>Xr(kt.test_name),onClick:It?In=>{if(In.preventDefault(),In.stopPropagation(),ct?.retest_offered){i("Retest is already offered","info");return}n({failedStudentIds:[Pe.student_id],test_type:kt.test_type,original_test_id:ct?.test_id||kt.test_id,subject_id:ct?.subject_id||kt.subject_id,grade:t,class:r})}:void 0,title:ur?"Retest offered":It?"Offer retest":"Double-click to edit column",children:[c.jsx("span",{className:It?"text-red-700":"",children:ct.score}),"/",c.jsx("span",{children:ct.max_score}),ct.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})()]}):ct.test_type==="speaking"||kt.test_type==="speaking"?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>Cr({...ct,__studentId:Pe.student_id},"audio"),className:"text-blue-600 hover:text-blue-800 underline text-xs font-medium px-1 py-0.5 rounded hover:bg-blue-50",children:"View Audio"}),Te&&Te.resultId===ct.result_id?c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("input",{type:"number",min:"0",max:ct.max_score||100,value:Ct,onChange:Ut=>Pt(Ut.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),c.jsx("button",{onClick:()=>Ur(),disabled:Ue,className:"px-1 py-0.5 bg-green-600 text-white text-xs rounded hover:bg-green-700 disabled:opacity-50",children:Ue?"Saving...":"Save"}),c.jsx("button",{onClick:()=>wn(),disabled:Ue,className:"px-1 py-0.5 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 disabled:opacity-50",children:"Cancel"})]}):(()=>{const Ut=o(ct),It=Ut!==null&&Ut<50,Zn=Ut!==null&&Ut>=50&&Ut<70,ur=ct.retest_offered,Fr=Ut===null?"text-gray-600":It?"text-red-600 font-semibold":Zn?"text-yellow-600":"text-green-600";return c.jsxs(rt.div,{className:`px-1 py-0.5 rounded text-xs font-medium ${Fr} ${It?"cursor-pointer hover:opacity-90":""} ${ur?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:It?{color:"#b91c1c"}:void 0,whileHover:{scale:It?1.05:1},transition:{duration:.15},onDoubleClick:()=>{Xe({resultId:ct.result_id,score:ct.score}),Pt(ct.score?.toString()||"")},onClick:It?In=>{if(In.preventDefault(),In.stopPropagation(),ct?.retest_offered){i("Retest is already offered","info");return}n({failedStudentIds:[Pe.student_id],test_type:kt.test_type,original_test_id:ct?.test_id||kt.test_id,subject_id:ct?.subject_id||kt.subject_id,grade:t,class:r})}:void 0,title:ur?"Retest offered":It?"Offer retest":"Double-click to edit score",children:[c.jsx("span",{className:It?"text-red-700":"",children:ct.score||0}),"/",c.jsx("span",{children:ct.max_score||100}),ct.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})()]}):(()=>{const Ut=o(ct),It=Ut!==null&&Ut<50,Zn=Ut!==null&&Ut>=50&&Ut<70,ur=Ut!==null&&Ut>=70;console.debug("[TeacherResults] Render pill",{studentId:Pe.student_id,pct:Ut,isRed:It,isYellow:Zn,isGreen:ur,score:ct.score,max:ct.max_score,percentageField:ct.percentage});const In=`px-1 py-0.5 rounded text-xs font-medium ${Ut===null?"text-gray-600":It?"text-red-600 font-semibold":Zn?"text-yellow-600":"text-green-600"} ${It?"cursor-pointer hover:opacity-90 pointer-events-auto":""}`;return c.jsxs(rt.div,{className:In,style:It?{color:"#b91c1c"}:void 0,whileHover:{scale:It?1.05:1},transition:{duration:.15},onClick:It?la=>{la.preventDefault(),la.stopPropagation();const ic=window.getComputedStyle(la.currentTarget).color;console.debug("[TeacherResults] Red pill clicked -> opening retest modal",{studentId:Pe.student_id,className:In,computedColor:ic}),n({failedStudentIds:[Pe.student_id],grade:t,class:r})}:void 0,title:It?"Offer retest":"",children:[c.jsx("span",{className:It?"text-red-700":"",children:ct.score}),"/",c.jsx("span",{children:ct.max_score}),ct.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})(),ct.caught_cheating&&ct.visibility_change_times&&c.jsxs("span",{className:"text-xs text-red-600",children:["(",ct.visibility_change_times,")"]})]}):c.jsx("span",{className:"text-gray-400",children:"-"})},nr)})]},Tt))})})]})})})}),[pt,he,Ie,ie]),Sr=C.useCallback(()=>{if(!R)return null;console.log(" renderResults - results:",R),console.log(" renderResults - results.class:",R.class),console.log(" renderResults - results.unique_tests:",R.unique_tests);const Ye=R.class&&Array.isArray(R.class)&&R.class.length>0;if(console.log(" renderResults - hasStudentData:",Ye),!Ye)return console.log(" renderResults - No student data, showing no students message"),c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"No students found for this class and semester."})});const ye=R.unique_tests||[];return console.log(" renderResults - uniqueTests:",ye),dt.current=R,c.jsxs("div",{className:"space-y-6",children:[c.jsxs(rt.div,{className:"bg-gradient-to-r from-red-500 to-pink-500 rounded-lg p-6 text-white",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:[c.jsxs(rt.h2,{className:"text-2xl font-bold mb-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.1},children:["Test Results - Grade M",L,", Class ",L,"/",H,", Semester ",v]}),c.jsxs(rt.p,{className:"text-cyan-100",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.2},children:["Viewing results for ",R.subjects?.length||0," subject(s)"]}),c.jsxs(rt.div,{className:"mt-4 flex gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:[c.jsx("button",{onClick:()=>{const $e=R.unique_tests?.map(Pe=>Pe.test_name)||[];Ee(new Set($e))},className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-colors",children:"Collapse All Tests"}),c.jsx("button",{onClick:()=>Ee(new Set),className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-colors",children:"Expand All Tests"})]})]}),c.jsxs(rt.div,{className:"bg-white rounded-lg shadow p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},children:[c.jsx(rt.h3,{className:"text-lg font-semibold text-gray-900 mb-4",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.2},children:"Class Results"}),c.jsx("div",{className:"hidden md:block",children:ht("All Subjects",R.class,ye)}),c.jsx("div",{className:"md:hidden",children:Er("All Subjects",R.class,ye)})]})]})},[R,ht,L,H,v]),Qn=C.useCallback(()=>{if(!R||!R.class||!R.unique_tests)return;const Ye=["Student ID","Name","Surname","No.","Nickname",...R.unique_tests.map(nr=>nr.test_name)],ye=R.class.map((nr,Or)=>{const ct=[];return ct.push(nr.student_id),ct.push(nr.name),ct.push(nr.surname),ct.push(nr.number??Or+1),ct.push(nr.nickname||"-"),R.unique_tests.forEach(Ut=>{const It=nr[Ut.test_name];It&&It.score!==null&&It.score!==void 0?ct.push(`${It.score}/${It.max_score}`):ct.push("-")}),ct}),$e=Gb.aoa_to_sheet([Ye,...ye]),Pe=Gb.book_new(),Tt=[{wch:10},{wch:15},{wch:15},{wch:6},{wch:12},...R.unique_tests.map(()=>({wch:15}))];$e["!cols"]=Tt,Gb.book_append_sheet(Pe,$e,"Class Results");const kt=`class-results-${L}-${H}-semester-${v}.xlsx`;Bbe(Pe,kt),i("Excel file exported successfully!","success")},[R,L,H,v,i]);return d?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Gr,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Results..."})]})}):g?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Results Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:g}),c.jsx(nt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsx("div",{className:"flex justify-between items-center py-4",children:c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Class Results"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",re?re.toLocaleString():"Never"]})]})})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Class"}),A.length>0?(()=>{const Ye=A.reduce((ye,$e)=>{const Pe=$e.subject||"Unknown Subject";return ye[Pe]||(ye[Pe]=[]),ye[Pe].push($e),ye},{});return c.jsx("div",{className:"space-y-6",children:Object.entries(Ye).map(([ye,$e])=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("h3",{className:"text-md font-semibold text-gray-800 mb-3 flex flex-col sm:flex-row sm:items-center items-center",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),ye]}),c.jsxs("span",{className:"ml-0 sm:ml-2 text-sm text-gray-500 mt-1 sm:mt-0",children:["(",$e.length," classes)"]})]}),c.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:$e.map((Pe,Tt)=>c.jsxs(nt,{variant:L===Pe.grade&&H===Pe.class?"primary":"outline",onClick:()=>qe(Pe.grade,Pe.class),className:"px-3 py-1 text-xs font-medium min-w-[60px]",children:[Pe.grade,"/",Pe.class]},`${Pe.grade}-${Pe.class}-${Tt}`))})]},ye))})})():c.jsx("p",{className:"text-gray-500",children:"No classes available"})]}),H&&mt(),H&&R&&c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[L," ",H," - Test Results ",Ne?`(Term ${Re?.terms.find(Ye=>Ye.id===Ne)?.term})`:""]}),c.jsx("div",{className:"flex space-x-3",children:c.jsxs("button",{type:"button",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-2",onClick:Qn,children:[c.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-4 h-4 object-contain"}),c.jsx("span",{className:"font-medium text-sm",children:"Export Excel"})]})})]}),Sr()]}),H&&!R&&c.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-gray-200 border-t-blue-500"}),c.jsx("span",{className:"text-gray-600",children:"Loading results"})]})})})]})}),At&&Qe&&c.jsx(yI,{children:c.jsx(UV,{drawing:At,isOpen:Qe,onClose:()=>tt(!1),isTeacherView:!0,onSaveScore:async({resultId:Ye,score:ye,maxScore:$e})=>{try{const Pe=localStorage.getItem("auth_token")||localStorage.getItem("accessToken")||localStorage.getItem("token");if(!(await fetch(ox.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:Pe?`Bearer ${Pe}`:""},body:JSON.stringify({resultId:Ye,score:ye,maxScore:$e})})).ok)throw new Error("Failed to save");await Ze(v)}catch{i("Failed to save drawing score","error")}}})}),vt&&_t&&c.jsx(yI,{children:c.jsx(Kde,{result:vt,isOpen:_t,onClose:()=>Wt(!1),initialTab:vt.__initialTab||"overview",editingSpeakingScore:Te,tempSpeakingScore:Ct,isSavingSpeakingScore:Ue,onStartSpeakingScoreEdit:$r,onSaveSpeakingScore:Ur,onCancelSpeakingScoreEdit:wn,onTempSpeakingScoreChange:Pt})})]})},Ybe={getTestPerformance:async(e,t=null)=>{try{await nc.loadAcademicCalendar();const n=nc.getCurrentTerm()?.id;if(!n)throw new Error("No current academic period found");console.log(` Fetching test performance for teacher ${e}, period ${n}, class: ${t||"all"}`);let s=`/.netlify/functions/get-test-performance?teacher_id=${e}&academic_period_id=${n}`;if(t){const[o,l]=t.split("/"),u=o.startsWith("M")?o:`M${o}`;s+=`&grade=${u}&class=${l}`}const a=await fetch(s,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const i=await a.json();if(!i.success)throw new Error(i.error||"Failed to fetch performance data");return console.log(` Performance data loaded: ${i.count} tests`),i.data}catch(r){throw console.error(" Error fetching test performance:",r),r}}};function eX(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=eX(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function hn(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=eX(e))&&(n&&(n+=" "),n+=t);return n}var IT,EM;function xo(){if(EM)return IT;EM=1;var e=Array.isArray;return IT=e,IT}var MT,NM;function tX(){if(NM)return MT;NM=1;var e=typeof tf=="object"&&tf&&tf.Object===Object&&tf;return MT=e,MT}var LT,AM;function Zc(){if(AM)return LT;AM=1;var e=tX(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return LT=r,LT}var BT,jM;function B1(){if(jM)return BT;jM=1;var e=Zc(),t=e.Symbol;return BT=t,BT}var $T,PM;function Jbe(){if(PM)return $T;PM=1;var e=B1(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,s=e?e.toStringTag:void 0;function a(i){var o=r.call(i,s),l=i[s];try{i[s]=void 0;var u=!0}catch{}var d=n.call(i);return u&&(o?i[s]=l:delete i[s]),d}return $T=a,$T}var UT,OM;function Qbe(){if(OM)return UT;OM=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return UT=r,UT}var WT,FM;function od(){if(FM)return WT;FM=1;var e=B1(),t=Jbe(),r=Qbe(),n="[object Null]",s="[object Undefined]",a=e?e.toStringTag:void 0;function i(o){return o==null?o===void 0?s:n:a&&a in Object(o)?t(o):r(o)}return WT=i,WT}var zT,RM;function ld(){if(RM)return zT;RM=1;function e(t){return t!=null&&typeof t=="object"}return zT=e,zT}var HT,DM;function mm(){if(DM)return HT;DM=1;var e=od(),t=ld(),r="[object Symbol]";function n(s){return typeof s=="symbol"||t(s)&&e(s)==r}return HT=n,HT}var GT,IM;function H6(){if(IM)return GT;IM=1;var e=xo(),t=mm(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(a,i){if(e(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||t(a)?!0:n.test(a)||!r.test(a)||i!=null&&a in Object(i)}return GT=s,GT}var VT,MM;function If(){if(MM)return VT;MM=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return VT=e,VT}var qT,LM;function G6(){if(LM)return qT;LM=1;var e=od(),t=If(),r="[object AsyncFunction]",n="[object Function]",s="[object GeneratorFunction]",a="[object Proxy]";function i(o){if(!t(o))return!1;var l=e(o);return l==n||l==s||l==r||l==a}return qT=i,qT}var KT,BM;function Zbe(){if(BM)return KT;BM=1;var e=Zc(),t=e["__core-js_shared__"];return KT=t,KT}var XT,$M;function e_e(){if($M)return XT;$M=1;var e=Zbe(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return XT=r,XT}var YT,UM;function rX(){if(UM)return YT;UM=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return YT=r,YT}var JT,WM;function t_e(){if(WM)return JT;WM=1;var e=G6(),t=e_e(),r=If(),n=rX(),s=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,i=Function.prototype,o=Object.prototype,l=i.toString,u=o.hasOwnProperty,d=RegExp("^"+l.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(g){if(!r(g)||t(g))return!1;var p=e(g)?d:a;return p.test(n(g))}return JT=f,JT}var QT,zM;function r_e(){if(zM)return QT;zM=1;function e(t,r){return t?.[r]}return QT=e,QT}var ZT,HM;function C0(){if(HM)return ZT;HM=1;var e=t_e(),t=r_e();function r(n,s){var a=t(n,s);return e(a)?a:void 0}return ZT=r,ZT}var eC,GM;function hS(){if(GM)return eC;GM=1;var e=C0(),t=e(Object,"create");return eC=t,eC}var tC,VM;function n_e(){if(VM)return tC;VM=1;var e=hS();function t(){this.__data__=e?e(null):{},this.size=0}return tC=t,tC}var rC,qM;function s_e(){if(qM)return rC;qM=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return rC=e,rC}var nC,KM;function a_e(){if(KM)return nC;KM=1;var e=hS(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function s(a){var i=this.__data__;if(e){var o=i[a];return o===t?void 0:o}return n.call(i,a)?i[a]:void 0}return nC=s,nC}var sC,XM;function i_e(){if(XM)return sC;XM=1;var e=hS(),t=Object.prototype,r=t.hasOwnProperty;function n(s){var a=this.__data__;return e?a[s]!==void 0:r.call(a,s)}return sC=n,sC}var aC,YM;function o_e(){if(YM)return aC;YM=1;var e=hS(),t="__lodash_hash_undefined__";function r(n,s){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=e&&s===void 0?t:s,this}return aC=r,aC}var iC,JM;function l_e(){if(JM)return iC;JM=1;var e=n_e(),t=s_e(),r=a_e(),n=i_e(),s=o_e();function a(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var u=i[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=s,iC=a,iC}var oC,QM;function c_e(){if(QM)return oC;QM=1;function e(){this.__data__=[],this.size=0}return oC=e,oC}var lC,ZM;function V6(){if(ZM)return lC;ZM=1;function e(t,r){return t===r||t!==t&&r!==r}return lC=e,lC}var cC,e7;function gS(){if(e7)return cC;e7=1;var e=V6();function t(r,n){for(var s=r.length;s--;)if(e(r[s][0],n))return s;return-1}return cC=t,cC}var uC,t7;function u_e(){if(t7)return uC;t7=1;var e=gS(),t=Array.prototype,r=t.splice;function n(s){var a=this.__data__,i=e(a,s);if(i<0)return!1;var o=a.length-1;return i==o?a.pop():r.call(a,i,1),--this.size,!0}return uC=n,uC}var dC,r7;function d_e(){if(r7)return dC;r7=1;var e=gS();function t(r){var n=this.__data__,s=e(n,r);return s<0?void 0:n[s][1]}return dC=t,dC}var fC,n7;function f_e(){if(n7)return fC;n7=1;var e=gS();function t(r){return e(this.__data__,r)>-1}return fC=t,fC}var hC,s7;function h_e(){if(s7)return hC;s7=1;var e=gS();function t(r,n){var s=this.__data__,a=e(s,r);return a<0?(++this.size,s.push([r,n])):s[a][1]=n,this}return hC=t,hC}var gC,a7;function pS(){if(a7)return gC;a7=1;var e=c_e(),t=u_e(),r=d_e(),n=f_e(),s=h_e();function a(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var u=i[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=s,gC=a,gC}var pC,i7;function q6(){if(i7)return pC;i7=1;var e=C0(),t=Zc(),r=e(t,"Map");return pC=r,pC}var mC,o7;function g_e(){if(o7)return mC;o7=1;var e=l_e(),t=pS(),r=q6();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return mC=n,mC}var yC,l7;function p_e(){if(l7)return yC;l7=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return yC=e,yC}var xC,c7;function mS(){if(c7)return xC;c7=1;var e=p_e();function t(r,n){var s=r.__data__;return e(n)?s[typeof n=="string"?"string":"hash"]:s.map}return xC=t,xC}var vC,u7;function m_e(){if(u7)return vC;u7=1;var e=mS();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return vC=t,vC}var wC,d7;function y_e(){if(d7)return wC;d7=1;var e=mS();function t(r){return e(this,r).get(r)}return wC=t,wC}var bC,f7;function x_e(){if(f7)return bC;f7=1;var e=mS();function t(r){return e(this,r).has(r)}return bC=t,bC}var _C,h7;function v_e(){if(h7)return _C;h7=1;var e=mS();function t(r,n){var s=e(this,r),a=s.size;return s.set(r,n),this.size+=s.size==a?0:1,this}return _C=t,_C}var SC,g7;function K6(){if(g7)return SC;g7=1;var e=g_e(),t=m_e(),r=y_e(),n=x_e(),s=v_e();function a(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var u=i[o];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=s,SC=a,SC}var kC,p7;function nX(){if(p7)return kC;p7=1;var e=K6(),t="Expected a function";function r(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var a=function(){var i=arguments,o=s?s.apply(this,i):i[0],l=a.cache;if(l.has(o))return l.get(o);var u=n.apply(this,i);return a.cache=l.set(o,u)||l,u};return a.cache=new(r.Cache||e),a}return r.Cache=e,kC=r,kC}var TC,m7;function w_e(){if(m7)return TC;m7=1;var e=nX(),t=500;function r(n){var s=e(n,function(i){return a.size===t&&a.clear(),i}),a=s.cache;return s}return TC=r,TC}var CC,y7;function b_e(){if(y7)return CC;y7=1;var e=w_e(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(t,function(i,o,l,u){a.push(l?u.replace(r,"$1"):o||i)}),a});return CC=n,CC}var EC,x7;function X6(){if(x7)return EC;x7=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,a=Array(s);++n<s;)a[n]=r(t[n],n,t);return a}return EC=e,EC}var NC,v7;function __e(){if(v7)return NC;v7=1;var e=B1(),t=X6(),r=xo(),n=mm(),s=e?e.prototype:void 0,a=s?s.toString:void 0;function i(o){if(typeof o=="string")return o;if(r(o))return t(o,i)+"";if(n(o))return a?a.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return NC=i,NC}var AC,w7;function sX(){if(w7)return AC;w7=1;var e=__e();function t(r){return r==null?"":e(r)}return AC=t,AC}var jC,b7;function aX(){if(b7)return jC;b7=1;var e=xo(),t=H6(),r=b_e(),n=sX();function s(a,i){return e(a)?a:t(a,i)?[a]:r(n(a))}return jC=s,jC}var PC,_7;function yS(){if(_7)return PC;_7=1;var e=mm();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return PC=t,PC}var OC,S7;function Y6(){if(S7)return OC;S7=1;var e=aX(),t=yS();function r(n,s){s=e(s,n);for(var a=0,i=s.length;n!=null&&a<i;)n=n[t(s[a++])];return a&&a==i?n:void 0}return OC=r,OC}var FC,k7;function iX(){if(k7)return FC;k7=1;var e=Y6();function t(r,n,s){var a=r==null?void 0:e(r,n);return a===void 0?s:a}return FC=t,FC}var S_e=iX();const ml=kn(S_e);var RC,T7;function k_e(){if(T7)return RC;T7=1;function e(t){return t==null}return RC=e,RC}var T_e=k_e();const sn=kn(T_e);var DC,C7;function C_e(){if(C7)return DC;C7=1;var e=od(),t=xo(),r=ld(),n="[object String]";function s(a){return typeof a=="string"||!t(a)&&r(a)&&e(a)==n}return DC=s,DC}var E_e=C_e();const f0=kn(E_e);var N_e=G6();const Jr=kn(N_e);var A_e=If();const ym=kn(A_e);var IC={exports:{}},Cn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E7;function j_e(){if(E7)return Cn;E7=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),i=Symbol.for("react.context"),o=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),x;x=Symbol.for("react.module.reference");function y(v){if(typeof v=="object"&&v!==null){var T=v.$$typeof;switch(T){case e:switch(v=v.type,v){case r:case s:case n:case u:case d:return v;default:switch(v=v&&v.$$typeof,v){case o:case i:case l:case g:case f:case a:return v;default:return T}}case t:return T}}}return Cn.ContextConsumer=i,Cn.ContextProvider=a,Cn.Element=e,Cn.ForwardRef=l,Cn.Fragment=r,Cn.Lazy=g,Cn.Memo=f,Cn.Portal=t,Cn.Profiler=s,Cn.StrictMode=n,Cn.Suspense=u,Cn.SuspenseList=d,Cn.isAsyncMode=function(){return!1},Cn.isConcurrentMode=function(){return!1},Cn.isContextConsumer=function(v){return y(v)===i},Cn.isContextProvider=function(v){return y(v)===a},Cn.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===e},Cn.isForwardRef=function(v){return y(v)===l},Cn.isFragment=function(v){return y(v)===r},Cn.isLazy=function(v){return y(v)===g},Cn.isMemo=function(v){return y(v)===f},Cn.isPortal=function(v){return y(v)===t},Cn.isProfiler=function(v){return y(v)===s},Cn.isStrictMode=function(v){return y(v)===n},Cn.isSuspense=function(v){return y(v)===u},Cn.isSuspenseList=function(v){return y(v)===d},Cn.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===r||v===s||v===n||v===u||v===d||v===p||typeof v=="object"&&v!==null&&(v.$$typeof===g||v.$$typeof===f||v.$$typeof===a||v.$$typeof===i||v.$$typeof===l||v.$$typeof===x||v.getModuleId!==void 0)},Cn.typeOf=y,Cn}var N7;function P_e(){return N7||(N7=1,IC.exports=j_e()),IC.exports}var O_e=P_e(),MC,A7;function oX(){if(A7)return MC;A7=1;var e=od(),t=ld(),r="[object Number]";function n(s){return typeof s=="number"||t(s)&&e(s)==r}return MC=n,MC}var LC,j7;function F_e(){if(j7)return LC;j7=1;var e=oX();function t(r){return e(r)&&r!=+r}return LC=t,LC}var R_e=F_e();const $1=kn(R_e);var D_e=oX();const I_e=kn(D_e);var Jl=function(t){return t===0?0:t>0?1:-1},jh=function(t){return f0(t)&&t.indexOf("%")===t.length-1},Jt=function(t){return I_e(t)&&!$1(t)},M_e=function(t){return sn(t)},ba=function(t){return Jt(t)||f0(t)},L_e=0,U1=function(t){var r=++L_e;return"".concat(t||"").concat(r)},h0=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Jt(t)&&!f0(t))return n;var a;if(jh(t)){var i=t.indexOf("%");a=r*parseFloat(t.slice(0,i))/100}else a=+t;return $1(a)&&(a=n),s&&a>r&&(a=r),a},ef=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},B_e=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},s=0;s<r;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},Gl=function(t,r){return Jt(t)&&Jt(r)?function(n){return t+n*(r-t)}:function(){return r}};function F_(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):ml(n,t))===r})}var $_e=function(t,r){return Jt(t)&&Jt(r)?t-r:f0(t)&&f0(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function dp(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function e3(e){"@babel/helpers - typeof";return e3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e3(e)}var U_e=["viewBox","children"],W_e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],P7=["points","pathLength"],BC={svg:U_e,polygon:P7,polyline:P7},J6=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],R_=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(C.isValidElement(t)&&(n=t.props),!ym(n))return null;var s={};return Object.keys(n).forEach(function(a){J6.includes(a)&&(s[a]=r||function(i){return n[a](n,i)})}),s},z_e=function(t,r,n){return function(s){return t(r,n,s),null}},D_=function(t,r,n){if(!ym(t)||e3(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(a){var i=t[a];J6.includes(a)&&typeof i=="function"&&(s||(s={}),s[a]=z_e(i,r,n))}),s},H_e=["children"],G_e=["children"];function O7(e,t){if(e==null)return{};var r=V_e(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function V_e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function t3(e){"@babel/helpers - typeof";return t3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t3(e)}var F7={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Hu=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},R7=null,$C=null,Q6=function e(t){if(t===R7&&Array.isArray($C))return $C;var r=[];return C.Children.forEach(t,function(n){sn(n)||(O_e.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),$C=r,R7=t,r};function yl(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(s){return Hu(s)}):n=[Hu(t)],Q6(e).forEach(function(s){var a=ml(s,"type.displayName")||ml(s,"type.name");n.indexOf(a)!==-1&&r.push(s)}),r}function Ao(e,t){var r=yl(e,t);return r&&r[0]}var D7=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,s=r.height;return!(!Jt(n)||n<=0||!Jt(s)||s<=0)},q_e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],K_e=function(t){return t&&t.type&&f0(t.type)&&q_e.indexOf(t.type)>=0},X_e=function(t){return t&&t3(t)==="object"&&"clipDot"in t},Y_e=function(t,r,n,s){var a,i=(a=BC?.[s])!==null&&a!==void 0?a:[];return r.startsWith("data-")||!Jr(t)&&(s&&i.includes(r)||W_e.includes(r))||n&&J6.includes(r)},cn=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(C.isValidElement(t)&&(s=t.props),!ym(s))return null;var a={};return Object.keys(s).forEach(function(i){var o;Y_e((o=s)===null||o===void 0?void 0:o[i],i,r,n)&&(a[i]=s[i])}),a},r3=function e(t,r){if(t===r)return!0;var n=C.Children.count(t);if(n!==C.Children.count(r))return!1;if(n===0)return!0;if(n===1)return I7(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var a=t[s],i=r[s];if(Array.isArray(a)||Array.isArray(i)){if(!e(a,i))return!1}else if(!I7(a,i))return!1}return!0},I7=function(t,r){if(sn(t)&&sn(r))return!0;if(!sn(t)&&!sn(r)){var n=t.props||{},s=n.children,a=O7(n,H_e),i=r.props||{},o=i.children,l=O7(i,G_e);return s&&o?dp(a,l)&&r3(s,o):!s&&!o?dp(a,l):!1}return!1},M7=function(t,r){var n=[],s={};return Q6(t).forEach(function(a,i){if(K_e(a))n.push(a);else if(a){var o=Hu(a.type),l=r[o]||{},u=l.handler,d=l.once;if(u&&(!d||!s[o])){var f=u(a,o,i);n.push(f),s[o]=!0}}}),n},J_e=function(t){var r=t&&t.type;return r&&F7[r]?F7[r]:null},Q_e=function(t,r){return Q6(r).indexOf(t)},Z_e=["children","width","height","viewBox","className","style","title","desc"];function n3(){return n3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n3.apply(this,arguments)}function e2e(e,t){if(e==null)return{};var r=t2e(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function t2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function s3(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,a=e.className,i=e.style,o=e.title,l=e.desc,u=e2e(e,Z_e),d=s||{width:r,height:n,x:0,y:0},f=hn("recharts-surface",a);return Be.createElement("svg",n3({},cn(u,!0,"svg"),{className:f,width:r,height:n,style:i,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),Be.createElement("title",null,o),Be.createElement("desc",null,l),t)}var r2e=["children","className"];function a3(){return a3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a3.apply(this,arguments)}function n2e(e,t){if(e==null)return{};var r=s2e(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function s2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Gs=Be.forwardRef(function(e,t){var r=e.children,n=e.className,s=n2e(e,r2e),a=hn("recharts-layer",n);return Be.createElement("g",a3({className:a},cn(s,!0),{ref:t}),r)}),Gu=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a]},UC,L7;function a2e(){if(L7)return UC;L7=1;function e(t,r,n){var s=-1,a=t.length;r<0&&(r=-r>a?0:a+r),n=n>a?a:n,n<0&&(n+=a),a=r>n?0:n-r>>>0,r>>>=0;for(var i=Array(a);++s<a;)i[s]=t[s+r];return i}return UC=e,UC}var WC,B7;function i2e(){if(B7)return WC;B7=1;var e=a2e();function t(r,n,s){var a=r.length;return s=s===void 0?a:s,!n&&s>=a?r:e(r,n,s)}return WC=t,WC}var zC,$7;function lX(){if($7)return zC;$7=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,a="\\ufe0e\\ufe0f",i="\\u200d",o=RegExp("["+i+e+s+a+"]");function l(u){return o.test(u)}return zC=l,zC}var HC,U7;function o2e(){if(U7)return HC;U7=1;function e(t){return t.split("")}return HC=e,HC}var GC,W7;function l2e(){if(W7)return GC;W7=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,a="\\ufe0e\\ufe0f",i="["+e+"]",o="["+s+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+l+")",d="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",x=u+"?",y="["+a+"]?",v="(?:"+p+"(?:"+[d,f,g].join("|")+")"+y+x+")*",T=y+x+v,_="(?:"+[d+o+"?",o,f,g,i].join("|")+")",b=RegExp(l+"(?="+l+")|"+_+T,"g");function E(k){return k.match(b)||[]}return GC=E,GC}var VC,z7;function c2e(){if(z7)return VC;z7=1;var e=o2e(),t=lX(),r=l2e();function n(s){return t(s)?r(s):e(s)}return VC=n,VC}var qC,H7;function u2e(){if(H7)return qC;H7=1;var e=i2e(),t=lX(),r=c2e(),n=sX();function s(a){return function(i){i=n(i);var o=t(i)?r(i):void 0,l=o?o[0]:i.charAt(0),u=o?e(o,1).join(""):i.slice(1);return l[a]()+u}}return qC=s,qC}var KC,G7;function d2e(){if(G7)return KC;G7=1;var e=u2e(),t=e("toUpperCase");return KC=t,KC}var f2e=d2e();const xS=kn(f2e);function Jn(e){return function(){return e}}const cX=Math.cos,I_=Math.sin,ac=Math.sqrt,M_=Math.PI,vS=2*M_,i3=Math.PI,o3=2*i3,_h=1e-6,h2e=o3-_h;function uX(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function g2e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return uX;const r=10**t;return function(n){this._+=n[0];for(let s=1,a=n.length;s<a;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class p2e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?uX:g2e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,a,i){this._append`C${+t},${+r},${+n},${+s},${this._x1=+a},${this._y1=+i}`}arcTo(t,r,n,s,a){if(t=+t,r=+r,n=+n,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let i=this._x1,o=this._y1,l=n-t,u=s-r,d=i-t,f=o-r,g=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(g>_h)if(!(Math.abs(f*l-u*d)>_h)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-i,x=s-o,y=l*l+u*u,v=p*p+x*x,T=Math.sqrt(y),_=Math.sqrt(g),b=a*Math.tan((i3-Math.acos((y+g-v)/(2*T*_)))/2),E=b/_,k=b/T;Math.abs(E-1)>_h&&this._append`L${t+E*d},${r+E*f}`,this._append`A${a},${a},0,0,${+(f*p>d*x)},${this._x1=t+k*l},${this._y1=r+k*u}`}}arc(t,r,n,s,a,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(s),l=n*Math.sin(s),u=t+o,d=r+l,f=1^i,g=i?s-a:a-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>_h||Math.abs(this._y1-d)>_h)&&this._append`L${u},${d}`,n&&(g<0&&(g=g%o3+o3),g>h2e?this._append`A${n},${n},0,1,${f},${t-o},${r-l}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:g>_h&&this._append`A${n},${n},0,${+(g>=i3)},${f},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function Z6(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new p2e(t)}function eP(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dX(e){this._context=e}dX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function wS(e){return new dX(e)}function fX(e){return e[0]}function hX(e){return e[1]}function gX(e,t){var r=Jn(!0),n=null,s=wS,a=null,i=Z6(o);e=typeof e=="function"?e:e===void 0?fX:Jn(e),t=typeof t=="function"?t:t===void 0?hX:Jn(t);function o(l){var u,d=(l=eP(l)).length,f,g=!1,p;for(n==null&&(a=s(p=i())),u=0;u<=d;++u)!(u<d&&r(f=l[u],u,l))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+e(f,u,l),+t(f,u,l));if(p)return a=null,p+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:Jn(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:Jn(+l),o):t},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Jn(!!l),o):r},o.curve=function(l){return arguments.length?(s=l,n!=null&&(a=s(n)),o):s},o.context=function(l){return arguments.length?(l==null?n=a=null:a=s(n=l),o):n},o}function _b(e,t,r){var n=null,s=Jn(!0),a=null,i=wS,o=null,l=Z6(u);e=typeof e=="function"?e:e===void 0?fX:Jn(+e),t=typeof t=="function"?t:Jn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?hX:Jn(+r);function u(f){var g,p,x,y=(f=eP(f)).length,v,T=!1,_,b=new Array(y),E=new Array(y);for(a==null&&(o=i(_=l())),g=0;g<=y;++g){if(!(g<y&&s(v=f[g],g,f))===T)if(T=!T)p=g,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),x=g-1;x>=p;--x)o.point(b[x],E[x]);o.lineEnd(),o.areaEnd()}T&&(b[g]=+e(v,g,f),E[g]=+t(v,g,f),o.point(n?+n(v,g,f):b[g],r?+r(v,g,f):E[g]))}if(_)return o=null,_+""||null}function d(){return gX().defined(s).curve(i).context(a)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Jn(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Jn(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Jn(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Jn(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Jn(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Jn(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:Jn(!!f),u):s},u.curve=function(f){return arguments.length?(i=f,a!=null&&(o=i(a)),u):i},u.context=function(f){return arguments.length?(f==null?a=o=null:o=i(a=f),u):a},u}class pX{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function m2e(e){return new pX(e,!0)}function y2e(e){return new pX(e,!1)}const tP={draw(e,t){const r=ac(t/M_);e.moveTo(r,0),e.arc(0,0,r,0,vS)}},x2e={draw(e,t){const r=ac(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},mX=ac(1/3),v2e=mX*2,w2e={draw(e,t){const r=ac(t/v2e),n=r*mX;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},b2e={draw(e,t){const r=ac(t),n=-r/2;e.rect(n,n,r,r)}},_2e=.8908130915292852,yX=I_(M_/10)/I_(7*M_/10),S2e=I_(vS/10)*yX,k2e=-cX(vS/10)*yX,T2e={draw(e,t){const r=ac(t*_2e),n=S2e*r,s=k2e*r;e.moveTo(0,-r),e.lineTo(n,s);for(let a=1;a<5;++a){const i=vS*a/5,o=cX(i),l=I_(i);e.lineTo(l*r,-o*r),e.lineTo(o*n-l*s,l*n+o*s)}e.closePath()}},XC=ac(3),C2e={draw(e,t){const r=-ac(t/(XC*3));e.moveTo(0,r*2),e.lineTo(-XC*r,-r),e.lineTo(XC*r,-r),e.closePath()}},rl=-.5,nl=ac(3)/2,l3=1/ac(12),E2e=(l3/2+1)*3,N2e={draw(e,t){const r=ac(t/E2e),n=r/2,s=r*l3,a=n,i=r*l3+r,o=-a,l=i;e.moveTo(n,s),e.lineTo(a,i),e.lineTo(o,l),e.lineTo(rl*n-nl*s,nl*n+rl*s),e.lineTo(rl*a-nl*i,nl*a+rl*i),e.lineTo(rl*o-nl*l,nl*o+rl*l),e.lineTo(rl*n+nl*s,rl*s-nl*n),e.lineTo(rl*a+nl*i,rl*i-nl*a),e.lineTo(rl*o+nl*l,rl*l-nl*o),e.closePath()}};function A2e(e,t){let r=null,n=Z6(s);e=typeof e=="function"?e:Jn(e||tP),t=typeof t=="function"?t:Jn(t===void 0?64:+t);function s(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return s.type=function(a){return arguments.length?(e=typeof a=="function"?a:Jn(a),s):e},s.size=function(a){return arguments.length?(t=typeof a=="function"?a:Jn(+a),s):t},s.context=function(a){return arguments.length?(r=a??null,s):r},s}function L_(){}function B_(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function xX(e){this._context=e}xX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:B_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:B_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function j2e(e){return new xX(e)}function vX(e){this._context=e}vX.prototype={areaStart:L_,areaEnd:L_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:B_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function P2e(e){return new vX(e)}function wX(e){this._context=e}wX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:B_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function O2e(e){return new wX(e)}function bX(e){this._context=e}bX.prototype={areaStart:L_,areaEnd:L_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function F2e(e){return new bX(e)}function V7(e){return e<0?-1:1}function q7(e,t,r){var n=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(n||s<0&&-0),i=(r-e._y1)/(s||n<0&&-0),o=(a*s+i*n)/(n+s);return(V7(a)+V7(i))*Math.min(Math.abs(a),Math.abs(i),.5*Math.abs(o))||0}function K7(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function YC(e,t,r){var n=e._x0,s=e._y0,a=e._x1,i=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,s+o*t,a-o,i-o*r,a,i)}function $_(e){this._context=e}$_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:YC(this,this._t0,K7(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,YC(this,K7(this,r=q7(this,e,t)),r);break;default:YC(this,this._t0,r=q7(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function _X(e){this._context=new SX(e)}(_X.prototype=Object.create($_.prototype)).point=function(e,t){$_.prototype.point.call(this,t,e)};function SX(e){this._context=e}SX.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,a){this._context.bezierCurveTo(t,e,n,r,a,s)}};function R2e(e){return new $_(e)}function D2e(e){return new _X(e)}function kX(e){this._context=e}kX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=X7(e),s=X7(t),a=0,i=1;i<r;++a,++i)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function X7(e){var t,r=e.length-1,n,s=new Array(r),a=new Array(r),i=new Array(r);for(s[0]=0,a[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,a[t]=4,i[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,a[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/a[t-1],a[t]-=n,i[t]-=n*i[t-1];for(s[r-1]=i[r-1]/a[r-1],t=r-2;t>=0;--t)s[t]=(i[t]-s[t+1])/a[t];for(a[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function I2e(e){return new kX(e)}function bS(e,t){this._context=e,this._t=t}bS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function M2e(e){return new bS(e,.5)}function L2e(e){return new bS(e,0)}function B2e(e){return new bS(e,1)}function Ep(e,t){if((i=e.length)>1)for(var r=1,n,s,a=e[t[0]],i,o=a.length;r<i;++r)for(s=a,a=e[t[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function c3(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function $2e(e,t){return e[t]}function U2e(e){const t=[];return t.key=e,t}function W2e(){var e=Jn([]),t=c3,r=Ep,n=$2e;function s(a){var i=Array.from(e.apply(this,arguments),U2e),o,l=i.length,u=-1,d;for(const f of a)for(o=0,++u;o<l;++o)(i[o][u]=[0,+n(f,i[o].key,u,a)]).data=f;for(o=0,d=eP(t(i));o<l;++o)i[d[o]].index=o;return r(i,d),i}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Jn(Array.from(a)),s):e},s.value=function(a){return arguments.length?(n=typeof a=="function"?a:Jn(+a),s):n},s.order=function(a){return arguments.length?(t=a==null?c3:typeof a=="function"?a:Jn(Array.from(a)),s):t},s.offset=function(a){return arguments.length?(r=a??Ep,s):r},s}function z2e(e,t){if((n=e.length)>0){for(var r,n,s=0,a=e[0].length,i;s<a;++s){for(i=r=0;r<n;++r)i+=e[r][s][1]||0;if(i)for(r=0;r<n;++r)e[r][s][1]/=i}Ep(e,t)}}function H2e(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,a=n.length;r<a;++r){for(var i=0,o=0;i<s;++i)o+=e[i][r][1]||0;n[r][1]+=n[r][0]=-o/2}Ep(e,t)}}function G2e(e,t){if(!(!((i=e.length)>0)||!((a=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,a,i;n<a;++n){for(var o=0,l=0,u=0;o<i;++o){for(var d=e[t[o]],f=d[n][1]||0,g=d[n-1][1]||0,p=(f-g)/2,x=0;x<o;++x){var y=e[t[x]],v=y[n][1]||0,T=y[n-1][1]||0;p+=v-T}l+=f,u+=p*f}s[n-1][1]+=s[n-1][0]=r,l&&(r-=u/l)}s[n-1][1]+=s[n-1][0]=r,Ep(e,t)}}function Av(e){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Av(e)}var V2e=["type","size","sizeType"];function u3(){return u3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u3.apply(this,arguments)}function Y7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function J7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y7(Object(r),!0).forEach(function(n){q2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q2e(e,t,r){return t=K2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K2e(e){var t=X2e(e,"string");return Av(t)=="symbol"?t:t+""}function X2e(e,t){if(Av(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Av(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Y2e(e,t){if(e==null)return{};var r=J2e(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function J2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var TX={symbolCircle:tP,symbolCross:x2e,symbolDiamond:w2e,symbolSquare:b2e,symbolStar:T2e,symbolTriangle:C2e,symbolWye:N2e},Q2e=Math.PI/180,Z2e=function(t){var r="symbol".concat(xS(t));return TX[r]||tP},eSe=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*Q2e;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},tSe=function(t,r){TX["symbol".concat(xS(t))]=r},rP=function(t){var r=t.type,n=r===void 0?"circle":r,s=t.size,a=s===void 0?64:s,i=t.sizeType,o=i===void 0?"area":i,l=Y2e(t,V2e),u=J7(J7({},l),{},{type:n,size:a,sizeType:o}),d=function(){var v=Z2e(n),T=A2e().type(v).size(eSe(a,o,n));return T()},f=u.className,g=u.cx,p=u.cy,x=cn(u,!0);return g===+g&&p===+p&&a===+a?Be.createElement("path",u3({},x,{className:hn("recharts-symbols",f),transform:"translate(".concat(g,", ").concat(p,")"),d:d()})):null};rP.registerSymbol=tSe;function Np(e){"@babel/helpers - typeof";return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Np(e)}function d3(){return d3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d3.apply(this,arguments)}function Q7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function rSe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q7(Object(r),!0).forEach(function(n){jv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sSe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,EX(n.key),n)}}function aSe(e,t,r){return t&&sSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function iSe(e,t,r){return t=U_(t),oSe(e,CX()?Reflect.construct(t,r||[],U_(e).constructor):t.apply(e,r))}function oSe(e,t){if(t&&(Np(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lSe(e)}function lSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CX=function(){return!!e})()}function U_(e){return U_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},U_(e)}function cSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f3(e,t)}function f3(e,t){return f3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},f3(e,t)}function jv(e,t,r){return t=EX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EX(e){var t=uSe(e,"string");return Np(t)=="symbol"?t:t+""}function uSe(e,t){if(Np(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Np(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var sl=32,nP=(function(e){function t(){return nSe(this,t),iSe(this,t,arguments)}return cSe(t,e),aSe(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,a=sl/2,i=sl/6,o=sl/3,l=n.inactive?s:n.color;if(n.type==="plainline")return Be.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:a,x2:sl,y2:a,className:"recharts-legend-icon"});if(n.type==="line")return Be.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(sl,"M").concat(2*o,",").concat(a,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(n.type==="rect")return Be.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(sl/8,"h").concat(sl,"v").concat(sl*3/4,"h").concat(-sl,"z"),className:"recharts-legend-icon"});if(Be.isValidElement(n.legendIcon)){var u=rSe({},n);return delete u.legendIcon,Be.cloneElement(n.legendIcon,u)}return Be.createElement(rP,{fill:l,cx:a,cy:a,size:sl,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,a=s.payload,i=s.iconSize,o=s.layout,l=s.formatter,u=s.inactiveColor,d={x:0,y:0,width:sl,height:sl},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},g={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(p,x){var y=p.formatter||l,v=hn(jv(jv({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",p.inactive));if(p.type==="none")return null;var T=Jr(p.value)?null:p.value;Gu(!Jr(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var _=p.inactive?u:p.color;return Be.createElement("li",d3({className:v,style:f,key:"legend-item-".concat(x)},D_(n.props,p,x)),Be.createElement(s3,{width:i,height:i,viewBox:d,style:g},n.renderIcon(p)),Be.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},y?y(T,p,x):T))})}},{key:"render",value:function(){var n=this.props,s=n.payload,a=n.layout,i=n.align;if(!s||!s.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?i:"left"};return Be.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])})(C.PureComponent);jv(nP,"displayName","Legend");jv(nP,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var JC,Z7;function dSe(){if(Z7)return JC;Z7=1;var e=pS();function t(){this.__data__=new e,this.size=0}return JC=t,JC}var QC,eL;function fSe(){if(eL)return QC;eL=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return QC=e,QC}var ZC,tL;function hSe(){if(tL)return ZC;tL=1;function e(t){return this.__data__.get(t)}return ZC=e,ZC}var eE,rL;function gSe(){if(rL)return eE;rL=1;function e(t){return this.__data__.has(t)}return eE=e,eE}var tE,nL;function pSe(){if(nL)return tE;nL=1;var e=pS(),t=q6(),r=K6(),n=200;function s(a,i){var o=this.__data__;if(o instanceof e){var l=o.__data__;if(!t||l.length<n-1)return l.push([a,i]),this.size=++o.size,this;o=this.__data__=new r(l)}return o.set(a,i),this.size=o.size,this}return tE=s,tE}var rE,sL;function NX(){if(sL)return rE;sL=1;var e=pS(),t=dSe(),r=fSe(),n=hSe(),s=gSe(),a=pSe();function i(o){var l=this.__data__=new e(o);this.size=l.size}return i.prototype.clear=t,i.prototype.delete=r,i.prototype.get=n,i.prototype.has=s,i.prototype.set=a,rE=i,rE}var nE,aL;function mSe(){if(aL)return nE;aL=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return nE=t,nE}var sE,iL;function ySe(){if(iL)return sE;iL=1;function e(t){return this.__data__.has(t)}return sE=e,sE}var aE,oL;function AX(){if(oL)return aE;oL=1;var e=K6(),t=mSe(),r=ySe();function n(s){var a=-1,i=s==null?0:s.length;for(this.__data__=new e;++a<i;)this.add(s[a])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,aE=n,aE}var iE,lL;function jX(){if(lL)return iE;lL=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(r(t[n],n,t))return!0;return!1}return iE=e,iE}var oE,cL;function PX(){if(cL)return oE;cL=1;function e(t,r){return t.has(r)}return oE=e,oE}var lE,uL;function OX(){if(uL)return lE;uL=1;var e=AX(),t=jX(),r=PX(),n=1,s=2;function a(i,o,l,u,d,f){var g=l&n,p=i.length,x=o.length;if(p!=x&&!(g&&x>p))return!1;var y=f.get(i),v=f.get(o);if(y&&v)return y==o&&v==i;var T=-1,_=!0,b=l&s?new e:void 0;for(f.set(i,o),f.set(o,i);++T<p;){var E=i[T],k=o[T];if(u)var A=g?u(k,E,T,o,i,f):u(E,k,T,i,o,f);if(A!==void 0){if(A)continue;_=!1;break}if(b){if(!t(o,function(P,j){if(!r(b,j)&&(E===P||d(E,P,l,u,f)))return b.push(j)})){_=!1;break}}else if(!(E===k||d(E,k,l,u,f))){_=!1;break}}return f.delete(i),f.delete(o),_}return lE=a,lE}var cE,dL;function xSe(){if(dL)return cE;dL=1;var e=Zc(),t=e.Uint8Array;return cE=t,cE}var uE,fL;function vSe(){if(fL)return uE;fL=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s,a){n[++r]=[a,s]}),n}return uE=e,uE}var dE,hL;function sP(){if(hL)return dE;hL=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s){n[++r]=s}),n}return dE=e,dE}var fE,gL;function wSe(){if(gL)return fE;gL=1;var e=B1(),t=xSe(),r=V6(),n=OX(),s=vSe(),a=sP(),i=1,o=2,l="[object Boolean]",u="[object Date]",d="[object Error]",f="[object Map]",g="[object Number]",p="[object RegExp]",x="[object Set]",y="[object String]",v="[object Symbol]",T="[object ArrayBuffer]",_="[object DataView]",b=e?e.prototype:void 0,E=b?b.valueOf:void 0;function k(A,P,j,O,R,M,G){switch(j){case _:if(A.byteLength!=P.byteLength||A.byteOffset!=P.byteOffset)return!1;A=A.buffer,P=P.buffer;case T:return!(A.byteLength!=P.byteLength||!M(new t(A),new t(P)));case l:case u:case g:return r(+A,+P);case d:return A.name==P.name&&A.message==P.message;case p:case y:return A==P+"";case f:var K=s;case x:var re=O&i;if(K||(K=a),A.size!=P.size&&!re)return!1;var Y=G.get(A);if(Y)return Y==P;O|=o,G.set(A,P);var ee=n(K(A),K(P),O,R,M,G);return G.delete(A),ee;case v:if(E)return E.call(A)==E.call(P)}return!1}return fE=k,fE}var hE,pL;function FX(){if(pL)return hE;pL=1;function e(t,r){for(var n=-1,s=r.length,a=t.length;++n<s;)t[a+n]=r[n];return t}return hE=e,hE}var gE,mL;function bSe(){if(mL)return gE;mL=1;var e=FX(),t=xo();function r(n,s,a){var i=s(n);return t(n)?i:e(i,a(n))}return gE=r,gE}var pE,yL;function _Se(){if(yL)return pE;yL=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,a=0,i=[];++n<s;){var o=t[n];r(o,n,t)&&(i[a++]=o)}return i}return pE=e,pE}var mE,xL;function SSe(){if(xL)return mE;xL=1;function e(){return[]}return mE=e,mE}var yE,vL;function kSe(){if(vL)return yE;vL=1;var e=_Se(),t=SSe(),r=Object.prototype,n=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(i){return i==null?[]:(i=Object(i),e(s(i),function(o){return n.call(i,o)}))}:t;return yE=a,yE}var xE,wL;function TSe(){if(wL)return xE;wL=1;function e(t,r){for(var n=-1,s=Array(t);++n<t;)s[n]=r(n);return s}return xE=e,xE}var vE,bL;function CSe(){if(bL)return vE;bL=1;var e=od(),t=ld(),r="[object Arguments]";function n(s){return t(s)&&e(s)==r}return vE=n,vE}var wE,_L;function aP(){if(_L)return wE;_L=1;var e=CSe(),t=ld(),r=Object.prototype,n=r.hasOwnProperty,s=r.propertyIsEnumerable,a=e((function(){return arguments})())?e:function(i){return t(i)&&n.call(i,"callee")&&!s.call(i,"callee")};return wE=a,wE}var Tx={exports:{}},bE,SL;function ESe(){if(SL)return bE;SL=1;function e(){return!1}return bE=e,bE}Tx.exports;var kL;function RX(){return kL||(kL=1,(function(e,t){var r=Zc(),n=ESe(),s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===s,o=i?r.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||n;e.exports=u})(Tx,Tx.exports)),Tx.exports}var _E,TL;function iP(){if(TL)return _E;TL=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,s){var a=typeof n;return s=s??e,!!s&&(a=="number"||a!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<s}return _E=r,_E}var SE,CL;function oP(){if(CL)return SE;CL=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return SE=t,SE}var kE,EL;function NSe(){if(EL)return kE;EL=1;var e=od(),t=oP(),r=ld(),n="[object Arguments]",s="[object Array]",a="[object Boolean]",i="[object Date]",o="[object Error]",l="[object Function]",u="[object Map]",d="[object Number]",f="[object Object]",g="[object RegExp]",p="[object Set]",x="[object String]",y="[object WeakMap]",v="[object ArrayBuffer]",T="[object DataView]",_="[object Float32Array]",b="[object Float64Array]",E="[object Int8Array]",k="[object Int16Array]",A="[object Int32Array]",P="[object Uint8Array]",j="[object Uint8ClampedArray]",O="[object Uint16Array]",R="[object Uint32Array]",M={};M[_]=M[b]=M[E]=M[k]=M[A]=M[P]=M[j]=M[O]=M[R]=!0,M[n]=M[s]=M[v]=M[a]=M[T]=M[i]=M[o]=M[l]=M[u]=M[d]=M[f]=M[g]=M[p]=M[x]=M[y]=!1;function G(K){return r(K)&&t(K.length)&&!!M[e(K)]}return kE=G,kE}var TE,NL;function DX(){if(NL)return TE;NL=1;function e(t){return function(r){return t(r)}}return TE=e,TE}var Cx={exports:{}};Cx.exports;var AL;function ASe(){return AL||(AL=1,(function(e,t){var r=tX(),n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,a=s&&s.exports===n,i=a&&r.process,o=(function(){try{var l=s&&s.require&&s.require("util").types;return l||i&&i.binding&&i.binding("util")}catch{}})();e.exports=o})(Cx,Cx.exports)),Cx.exports}var CE,jL;function IX(){if(jL)return CE;jL=1;var e=NSe(),t=DX(),r=ASe(),n=r&&r.isTypedArray,s=n?t(n):e;return CE=s,CE}var EE,PL;function jSe(){if(PL)return EE;PL=1;var e=TSe(),t=aP(),r=xo(),n=RX(),s=iP(),a=IX(),i=Object.prototype,o=i.hasOwnProperty;function l(u,d){var f=r(u),g=!f&&t(u),p=!f&&!g&&n(u),x=!f&&!g&&!p&&a(u),y=f||g||p||x,v=y?e(u.length,String):[],T=v.length;for(var _ in u)(d||o.call(u,_))&&!(y&&(_=="length"||p&&(_=="offset"||_=="parent")||x&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||s(_,T)))&&v.push(_);return v}return EE=l,EE}var NE,OL;function PSe(){if(OL)return NE;OL=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,s=typeof n=="function"&&n.prototype||e;return r===s}return NE=t,NE}var AE,FL;function MX(){if(FL)return AE;FL=1;function e(t,r){return function(n){return t(r(n))}}return AE=e,AE}var jE,RL;function OSe(){if(RL)return jE;RL=1;var e=MX(),t=e(Object.keys,Object);return jE=t,jE}var PE,DL;function FSe(){if(DL)return PE;DL=1;var e=PSe(),t=OSe(),r=Object.prototype,n=r.hasOwnProperty;function s(a){if(!e(a))return t(a);var i=[];for(var o in Object(a))n.call(a,o)&&o!="constructor"&&i.push(o);return i}return PE=s,PE}var OE,IL;function W1(){if(IL)return OE;IL=1;var e=G6(),t=oP();function r(n){return n!=null&&t(n.length)&&!e(n)}return OE=r,OE}var FE,ML;function _S(){if(ML)return FE;ML=1;var e=jSe(),t=FSe(),r=W1();function n(s){return r(s)?e(s):t(s)}return FE=n,FE}var RE,LL;function RSe(){if(LL)return RE;LL=1;var e=bSe(),t=kSe(),r=_S();function n(s){return e(s,r,t)}return RE=n,RE}var DE,BL;function DSe(){if(BL)return DE;BL=1;var e=RSe(),t=1,r=Object.prototype,n=r.hasOwnProperty;function s(a,i,o,l,u,d){var f=o&t,g=e(a),p=g.length,x=e(i),y=x.length;if(p!=y&&!f)return!1;for(var v=p;v--;){var T=g[v];if(!(f?T in i:n.call(i,T)))return!1}var _=d.get(a),b=d.get(i);if(_&&b)return _==i&&b==a;var E=!0;d.set(a,i),d.set(i,a);for(var k=f;++v<p;){T=g[v];var A=a[T],P=i[T];if(l)var j=f?l(P,A,T,i,a,d):l(A,P,T,a,i,d);if(!(j===void 0?A===P||u(A,P,o,l,d):j)){E=!1;break}k||(k=T=="constructor")}if(E&&!k){var O=a.constructor,R=i.constructor;O!=R&&"constructor"in a&&"constructor"in i&&!(typeof O=="function"&&O instanceof O&&typeof R=="function"&&R instanceof R)&&(E=!1)}return d.delete(a),d.delete(i),E}return DE=s,DE}var IE,$L;function ISe(){if($L)return IE;$L=1;var e=C0(),t=Zc(),r=e(t,"DataView");return IE=r,IE}var ME,UL;function MSe(){if(UL)return ME;UL=1;var e=C0(),t=Zc(),r=e(t,"Promise");return ME=r,ME}var LE,WL;function LX(){if(WL)return LE;WL=1;var e=C0(),t=Zc(),r=e(t,"Set");return LE=r,LE}var BE,zL;function LSe(){if(zL)return BE;zL=1;var e=C0(),t=Zc(),r=e(t,"WeakMap");return BE=r,BE}var $E,HL;function BSe(){if(HL)return $E;HL=1;var e=ISe(),t=q6(),r=MSe(),n=LX(),s=LSe(),a=od(),i=rX(),o="[object Map]",l="[object Object]",u="[object Promise]",d="[object Set]",f="[object WeakMap]",g="[object DataView]",p=i(e),x=i(t),y=i(r),v=i(n),T=i(s),_=a;return(e&&_(new e(new ArrayBuffer(1)))!=g||t&&_(new t)!=o||r&&_(r.resolve())!=u||n&&_(new n)!=d||s&&_(new s)!=f)&&(_=function(b){var E=a(b),k=E==l?b.constructor:void 0,A=k?i(k):"";if(A)switch(A){case p:return g;case x:return o;case y:return u;case v:return d;case T:return f}return E}),$E=_,$E}var UE,GL;function $Se(){if(GL)return UE;GL=1;var e=NX(),t=OX(),r=wSe(),n=DSe(),s=BSe(),a=xo(),i=RX(),o=IX(),l=1,u="[object Arguments]",d="[object Array]",f="[object Object]",g=Object.prototype,p=g.hasOwnProperty;function x(y,v,T,_,b,E){var k=a(y),A=a(v),P=k?d:s(y),j=A?d:s(v);P=P==u?f:P,j=j==u?f:j;var O=P==f,R=j==f,M=P==j;if(M&&i(y)){if(!i(v))return!1;k=!0,O=!1}if(M&&!O)return E||(E=new e),k||o(y)?t(y,v,T,_,b,E):r(y,v,P,T,_,b,E);if(!(T&l)){var G=O&&p.call(y,"__wrapped__"),K=R&&p.call(v,"__wrapped__");if(G||K){var re=G?y.value():y,Y=K?v.value():v;return E||(E=new e),b(re,Y,T,_,E)}}return M?(E||(E=new e),n(y,v,T,_,b,E)):!1}return UE=x,UE}var WE,VL;function lP(){if(VL)return WE;VL=1;var e=$Se(),t=ld();function r(n,s,a,i,o){return n===s?!0:n==null||s==null||!t(n)&&!t(s)?n!==n&&s!==s:e(n,s,a,i,r,o)}return WE=r,WE}var zE,qL;function USe(){if(qL)return zE;qL=1;var e=NX(),t=lP(),r=1,n=2;function s(a,i,o,l){var u=o.length,d=u,f=!l;if(a==null)return!d;for(a=Object(a);u--;){var g=o[u];if(f&&g[2]?g[1]!==a[g[0]]:!(g[0]in a))return!1}for(;++u<d;){g=o[u];var p=g[0],x=a[p],y=g[1];if(f&&g[2]){if(x===void 0&&!(p in a))return!1}else{var v=new e;if(l)var T=l(x,y,p,a,i,v);if(!(T===void 0?t(y,x,r|n,l,v):T))return!1}}return!0}return zE=s,zE}var HE,KL;function BX(){if(KL)return HE;KL=1;var e=If();function t(r){return r===r&&!e(r)}return HE=t,HE}var GE,XL;function WSe(){if(XL)return GE;XL=1;var e=BX(),t=_S();function r(n){for(var s=t(n),a=s.length;a--;){var i=s[a],o=n[i];s[a]=[i,o,e(o)]}return s}return GE=r,GE}var VE,YL;function $X(){if(YL)return VE;YL=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return VE=e,VE}var qE,JL;function zSe(){if(JL)return qE;JL=1;var e=USe(),t=WSe(),r=$X();function n(s){var a=t(s);return a.length==1&&a[0][2]?r(a[0][0],a[0][1]):function(i){return i===s||e(i,s,a)}}return qE=n,qE}var KE,QL;function HSe(){if(QL)return KE;QL=1;function e(t,r){return t!=null&&r in Object(t)}return KE=e,KE}var XE,ZL;function GSe(){if(ZL)return XE;ZL=1;var e=aX(),t=aP(),r=xo(),n=iP(),s=oP(),a=yS();function i(o,l,u){l=e(l,o);for(var d=-1,f=l.length,g=!1;++d<f;){var p=a(l[d]);if(!(g=o!=null&&u(o,p)))break;o=o[p]}return g||++d!=f?g:(f=o==null?0:o.length,!!f&&s(f)&&n(p,f)&&(r(o)||t(o)))}return XE=i,XE}var YE,e9;function VSe(){if(e9)return YE;e9=1;var e=HSe(),t=GSe();function r(n,s){return n!=null&&t(n,s,e)}return YE=r,YE}var JE,t9;function qSe(){if(t9)return JE;t9=1;var e=lP(),t=iX(),r=VSe(),n=H6(),s=BX(),a=$X(),i=yS(),o=1,l=2;function u(d,f){return n(d)&&s(f)?a(i(d),f):function(g){var p=t(g,d);return p===void 0&&p===f?r(g,d):e(f,p,o|l)}}return JE=u,JE}var QE,r9;function xm(){if(r9)return QE;r9=1;function e(t){return t}return QE=e,QE}var ZE,n9;function KSe(){if(n9)return ZE;n9=1;function e(t){return function(r){return r?.[t]}}return ZE=e,ZE}var eN,s9;function XSe(){if(s9)return eN;s9=1;var e=Y6();function t(r){return function(n){return e(n,r)}}return eN=t,eN}var tN,a9;function YSe(){if(a9)return tN;a9=1;var e=KSe(),t=XSe(),r=H6(),n=yS();function s(a){return r(a)?e(n(a)):t(a)}return tN=s,tN}var rN,i9;function Mf(){if(i9)return rN;i9=1;var e=zSe(),t=qSe(),r=xm(),n=xo(),s=YSe();function a(i){return typeof i=="function"?i:i==null?r:typeof i=="object"?n(i)?t(i[0],i[1]):e(i):s(i)}return rN=a,rN}var nN,o9;function UX(){if(o9)return nN;o9=1;function e(t,r,n,s){for(var a=t.length,i=n+(s?1:-1);s?i--:++i<a;)if(r(t[i],i,t))return i;return-1}return nN=e,nN}var sN,l9;function JSe(){if(l9)return sN;l9=1;function e(t){return t!==t}return sN=e,sN}var aN,c9;function QSe(){if(c9)return aN;c9=1;function e(t,r,n){for(var s=n-1,a=t.length;++s<a;)if(t[s]===r)return s;return-1}return aN=e,aN}var iN,u9;function ZSe(){if(u9)return iN;u9=1;var e=UX(),t=JSe(),r=QSe();function n(s,a,i){return a===a?r(s,a,i):e(s,t,i)}return iN=n,iN}var oN,d9;function eke(){if(d9)return oN;d9=1;var e=ZSe();function t(r,n){var s=r==null?0:r.length;return!!s&&e(r,n,0)>-1}return oN=t,oN}var lN,f9;function tke(){if(f9)return lN;f9=1;function e(t,r,n){for(var s=-1,a=t==null?0:t.length;++s<a;)if(n(r,t[s]))return!0;return!1}return lN=e,lN}var cN,h9;function rke(){if(h9)return cN;h9=1;function e(){}return cN=e,cN}var uN,g9;function nke(){if(g9)return uN;g9=1;var e=LX(),t=rke(),r=sP(),n=1/0,s=e&&1/r(new e([,-0]))[1]==n?function(a){return new e(a)}:t;return uN=s,uN}var dN,p9;function ske(){if(p9)return dN;p9=1;var e=AX(),t=eke(),r=tke(),n=PX(),s=nke(),a=sP(),i=200;function o(l,u,d){var f=-1,g=t,p=l.length,x=!0,y=[],v=y;if(d)x=!1,g=r;else if(p>=i){var T=u?null:s(l);if(T)return a(T);x=!1,g=n,v=new e}else v=u?[]:y;e:for(;++f<p;){var _=l[f],b=u?u(_):_;if(_=d||_!==0?_:0,x&&b===b){for(var E=v.length;E--;)if(v[E]===b)continue e;u&&v.push(b),y.push(_)}else g(v,b,d)||(v!==y&&v.push(b),y.push(_))}return y}return dN=o,dN}var fN,m9;function ake(){if(m9)return fN;m9=1;var e=Mf(),t=ske();function r(n,s){return n&&n.length?t(n,e(s,2)):[]}return fN=r,fN}var ike=ake();const y9=kn(ike);function WX(e,t,r){return t===!0?y9(e,r):Jr(t)?y9(e,t):e}function Ap(e){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ap(e)}var oke=["ref"];function x9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ju(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x9(Object(r),!0).forEach(function(n){SS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v9(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HX(n.key),n)}}function cke(e,t,r){return t&&v9(e.prototype,t),r&&v9(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function uke(e,t,r){return t=W_(t),dke(e,zX()?Reflect.construct(t,r||[],W_(e).constructor):t.apply(e,r))}function dke(e,t){if(t&&(Ap(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fke(e)}function fke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zX=function(){return!!e})()}function W_(e){return W_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},W_(e)}function hke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h3(e,t)}function h3(e,t){return h3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},h3(e,t)}function SS(e,t,r){return t=HX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HX(e){var t=gke(e,"string");return Ap(t)=="symbol"?t:t+""}function gke(e,t){if(Ap(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function pke(e,t){if(e==null)return{};var r=mke(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mke(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function yke(e){return e.value}function xke(e,t){if(Be.isValidElement(e))return Be.cloneElement(e,t);if(typeof e=="function")return Be.createElement(e,t);t.ref;var r=pke(t,oke);return Be.createElement(nP,r)}var w9=1,fp=(function(e){function t(){var r;lke(this,t);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=uke(this,t,[].concat(s)),SS(r,"lastBoundingBox",{width:-1,height:-1}),r}return hke(t,e),cke(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>w9||Math.abs(s.height-this.lastBoundingBox.height)>w9)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ju({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,a=s.layout,i=s.align,o=s.verticalAlign,l=s.margin,u=s.chartWidth,d=s.chartHeight,f,g;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(i==="center"&&a==="vertical"){var p=this.getBBoxSnapshot();f={left:((u||0)-p.width)/2}}else f=i==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(o==="middle"){var x=this.getBBoxSnapshot();g={top:((d||0)-x.height)/2}}else g=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return ju(ju({},f),g)}},{key:"render",value:function(){var n=this,s=this.props,a=s.content,i=s.width,o=s.height,l=s.wrapperStyle,u=s.payloadUniqBy,d=s.payload,f=ju(ju({position:"absolute",width:i||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return Be.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){n.wrapperNode=p}},xke(a,ju(ju({},this.props),{},{payload:WX(d,u,yke)})))}}],[{key:"getWithHeight",value:function(n,s){var a=ju(ju({},this.defaultProps),n.props),i=a.layout;return i==="vertical"&&Jt(n.props.height)?{height:n.props.height}:i==="horizontal"?{width:n.props.width||s}:null}}])})(C.PureComponent);SS(fp,"displayName","Legend");SS(fp,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var hN,b9;function vke(){if(b9)return hN;b9=1;var e=B1(),t=aP(),r=xo(),n=e?e.isConcatSpreadable:void 0;function s(a){return r(a)||t(a)||!!(n&&a&&a[n])}return hN=s,hN}var gN,_9;function GX(){if(_9)return gN;_9=1;var e=FX(),t=vke();function r(n,s,a,i,o){var l=-1,u=n.length;for(a||(a=t),o||(o=[]);++l<u;){var d=n[l];s>0&&a(d)?s>1?r(d,s-1,a,i,o):e(o,d):i||(o[o.length]=d)}return o}return gN=r,gN}var pN,S9;function wke(){if(S9)return pN;S9=1;function e(t){return function(r,n,s){for(var a=-1,i=Object(r),o=s(r),l=o.length;l--;){var u=o[t?l:++a];if(n(i[u],u,i)===!1)break}return r}}return pN=e,pN}var mN,k9;function bke(){if(k9)return mN;k9=1;var e=wke(),t=e();return mN=t,mN}var yN,T9;function VX(){if(T9)return yN;T9=1;var e=bke(),t=_S();function r(n,s){return n&&e(n,s,t)}return yN=r,yN}var xN,C9;function _ke(){if(C9)return xN;C9=1;var e=W1();function t(r,n){return function(s,a){if(s==null)return s;if(!e(s))return r(s,a);for(var i=s.length,o=n?i:-1,l=Object(s);(n?o--:++o<i)&&a(l[o],o,l)!==!1;);return s}}return xN=t,xN}var vN,E9;function cP(){if(E9)return vN;E9=1;var e=VX(),t=_ke(),r=t(e);return vN=r,vN}var wN,N9;function qX(){if(N9)return wN;N9=1;var e=cP(),t=W1();function r(n,s){var a=-1,i=t(n)?Array(n.length):[];return e(n,function(o,l,u){i[++a]=s(o,l,u)}),i}return wN=r,wN}var bN,A9;function Ske(){if(A9)return bN;A9=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return bN=e,bN}var _N,j9;function kke(){if(j9)return _N;j9=1;var e=mm();function t(r,n){if(r!==n){var s=r!==void 0,a=r===null,i=r===r,o=e(r),l=n!==void 0,u=n===null,d=n===n,f=e(n);if(!u&&!f&&!o&&r>n||o&&l&&d&&!u&&!f||a&&l&&d||!s&&d||!i)return 1;if(!a&&!o&&!f&&r<n||f&&s&&i&&!a&&!o||u&&s&&i||!l&&i||!d)return-1}return 0}return _N=t,_N}var SN,P9;function Tke(){if(P9)return SN;P9=1;var e=kke();function t(r,n,s){for(var a=-1,i=r.criteria,o=n.criteria,l=i.length,u=s.length;++a<l;){var d=e(i[a],o[a]);if(d){if(a>=u)return d;var f=s[a];return d*(f=="desc"?-1:1)}}return r.index-n.index}return SN=t,SN}var kN,O9;function Cke(){if(O9)return kN;O9=1;var e=X6(),t=Y6(),r=Mf(),n=qX(),s=Ske(),a=DX(),i=Tke(),o=xm(),l=xo();function u(d,f,g){f.length?f=e(f,function(y){return l(y)?function(v){return t(v,y.length===1?y[0]:y)}:y}):f=[o];var p=-1;f=e(f,a(r));var x=n(d,function(y,v,T){var _=e(f,function(b){return b(y)});return{criteria:_,index:++p,value:y}});return s(x,function(y,v){return i(y,v,g)})}return kN=u,kN}var TN,F9;function Eke(){if(F9)return TN;F9=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return TN=e,TN}var CN,R9;function Nke(){if(R9)return CN;R9=1;var e=Eke(),t=Math.max;function r(n,s,a){return s=t(s===void 0?n.length-1:s,0),function(){for(var i=arguments,o=-1,l=t(i.length-s,0),u=Array(l);++o<l;)u[o]=i[s+o];o=-1;for(var d=Array(s+1);++o<s;)d[o]=i[o];return d[s]=a(u),e(n,this,d)}}return CN=r,CN}var EN,D9;function Ake(){if(D9)return EN;D9=1;function e(t){return function(){return t}}return EN=e,EN}var NN,I9;function KX(){if(I9)return NN;I9=1;var e=C0(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return NN=t,NN}var AN,M9;function jke(){if(M9)return AN;M9=1;var e=Ake(),t=KX(),r=xm(),n=t?function(s,a){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:r;return AN=n,AN}var jN,L9;function Pke(){if(L9)return jN;L9=1;var e=800,t=16,r=Date.now;function n(s){var a=0,i=0;return function(){var o=r(),l=t-(o-i);if(i=o,l>0){if(++a>=e)return arguments[0]}else a=0;return s.apply(void 0,arguments)}}return jN=n,jN}var PN,B9;function Oke(){if(B9)return PN;B9=1;var e=jke(),t=Pke(),r=t(e);return PN=r,PN}var ON,$9;function Fke(){if($9)return ON;$9=1;var e=xm(),t=Nke(),r=Oke();function n(s,a){return r(t(s,a,e),s+"")}return ON=n,ON}var FN,U9;function kS(){if(U9)return FN;U9=1;var e=V6(),t=W1(),r=iP(),n=If();function s(a,i,o){if(!n(o))return!1;var l=typeof i;return(l=="number"?t(o)&&r(i,o.length):l=="string"&&i in o)?e(o[i],a):!1}return FN=s,FN}var RN,W9;function Rke(){if(W9)return RN;W9=1;var e=GX(),t=Cke(),r=Fke(),n=kS(),s=r(function(a,i){if(a==null)return[];var o=i.length;return o>1&&n(a,i[0],i[1])?i=[]:o>2&&n(i[0],i[1],i[2])&&(i=[i[0]]),t(a,e(i,1),[])});return RN=s,RN}var Dke=Rke();const uP=kn(Dke);function Pv(e){"@babel/helpers - typeof";return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pv(e)}function g3(){return g3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g3.apply(this,arguments)}function Ike(e,t){return $ke(e)||Bke(e,t)||Lke(e,t)||Mke()}function Mke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lke(e,t){if(e){if(typeof e=="string")return z9(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z9(e,t)}}function z9(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bke(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,a,i,o=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){u=!0,s=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function $ke(e){if(Array.isArray(e))return e}function H9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function DN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H9(Object(r),!0).forEach(function(n){Uke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uke(e,t,r){return t=Wke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wke(e){var t=zke(e,"string");return Pv(t)=="symbol"?t:t+""}function zke(e,t){if(Pv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hke(e){return Array.isArray(e)&&ba(e[0])&&ba(e[1])?e.join(" ~ "):e}var Gke=function(t){var r=t.separator,n=r===void 0?" : ":r,s=t.contentStyle,a=s===void 0?{}:s,i=t.itemStyle,o=i===void 0?{}:i,l=t.labelStyle,u=l===void 0?{}:l,d=t.payload,f=t.formatter,g=t.itemSorter,p=t.wrapperClassName,x=t.labelClassName,y=t.label,v=t.labelFormatter,T=t.accessibilityLayer,_=T===void 0?!1:T,b=function(){if(d&&d.length){var G={padding:0,margin:0},K=(g?uP(d,g):d).map(function(re,Y){if(re.type==="none")return null;var ee=DN({display:"block",paddingTop:4,paddingBottom:4,color:re.color||"#000"},o),B=re.formatter||f||Hke,z=re.value,I=re.name,W=z,V=I;if(B&&W!=null&&V!=null){var L=B(z,I,re,Y,d);if(Array.isArray(L)){var H=Ike(L,2);W=H[0],V=H[1]}else W=L}return Be.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Y),style:ee},ba(V)?Be.createElement("span",{className:"recharts-tooltip-item-name"},V):null,ba(V)?Be.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,Be.createElement("span",{className:"recharts-tooltip-item-value"},W),Be.createElement("span",{className:"recharts-tooltip-item-unit"},re.unit||""))});return Be.createElement("ul",{className:"recharts-tooltip-item-list",style:G},K)}return null},E=DN({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),k=DN({margin:0},u),A=!sn(y),P=A?y:"",j=hn("recharts-default-tooltip",p),O=hn("recharts-tooltip-label",x);A&&v&&d!==void 0&&d!==null&&(P=v(y,d));var R=_?{role:"status","aria-live":"assertive"}:{};return Be.createElement("div",g3({className:j,style:E},R),Be.createElement("p",{className:O,style:k},Be.isValidElement(P)?P:"".concat(P)),b())};function Ov(e){"@babel/helpers - typeof";return Ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ov(e)}function Sb(e,t,r){return t=Vke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vke(e){var t=qke(e,"string");return Ov(t)=="symbol"?t:t+""}function qke(e,t){if(Ov(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ov(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ux="recharts-tooltip-wrapper",Kke={visibility:"hidden"};function Xke(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return hn(ux,Sb(Sb(Sb(Sb({},"".concat(ux,"-right"),Jt(r)&&t&&Jt(t.x)&&r>=t.x),"".concat(ux,"-left"),Jt(r)&&t&&Jt(t.x)&&r<t.x),"".concat(ux,"-bottom"),Jt(n)&&t&&Jt(t.y)&&n>=t.y),"".concat(ux,"-top"),Jt(n)&&t&&Jt(t.y)&&n<t.y))}function G9(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipDimension,l=e.viewBox,u=e.viewBoxDimension;if(a&&Jt(a[n]))return a[n];var d=r[n]-o-s,f=r[n]+s;if(t[n])return i[n]?d:f;if(i[n]){var g=d,p=l[n];return g<p?Math.max(f,l[n]):Math.max(d,l[n])}var x=f+o,y=l[n]+u;return x>y?Math.max(d,l[n]):Math.max(f,l[n])}function Yke(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Jke(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,s=e.position,a=e.reverseDirection,i=e.tooltipBox,o=e.useTranslate3d,l=e.viewBox,u,d,f;return i.height>0&&i.width>0&&r?(d=G9({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:i.width,viewBox:l,viewBoxDimension:l.width}),f=G9({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:i.height,viewBox:l,viewBoxDimension:l.height}),u=Yke({translateX:d,translateY:f,useTranslate3d:o})):u=Kke,{cssProperties:u,cssClasses:Xke({translateX:d,translateY:f,coordinate:r})}}function jp(e){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jp(e)}function V9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function q9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V9(Object(r),!0).forEach(function(n){m3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YX(n.key),n)}}function eTe(e,t,r){return t&&Zke(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tTe(e,t,r){return t=z_(t),rTe(e,XX()?Reflect.construct(t,r||[],z_(e).constructor):t.apply(e,r))}function rTe(e,t){if(t&&(jp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nTe(e)}function nTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XX=function(){return!!e})()}function z_(e){return z_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},z_(e)}function sTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p3(e,t)}function p3(e,t){return p3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},p3(e,t)}function m3(e,t,r){return t=YX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YX(e){var t=aTe(e,"string");return jp(t)=="symbol"?t:t+""}function aTe(e,t){if(jp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var K9=1,iTe=(function(e){function t(){var r;Qke(this,t);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=tTe(this,t,[].concat(s)),m3(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),m3(r,"handleKeyDown",function(i){if(i.key==="Escape"){var o,l,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=r.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return sTe(t,e),eTe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>K9||Math.abs(n.height-this.state.lastBoundingBox.height)>K9)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,a=s.active,i=s.allowEscapeViewBox,o=s.animationDuration,l=s.animationEasing,u=s.children,d=s.coordinate,f=s.hasPayload,g=s.isAnimationActive,p=s.offset,x=s.position,y=s.reverseDirection,v=s.useTranslate3d,T=s.viewBox,_=s.wrapperStyle,b=Jke({allowEscapeViewBox:i,coordinate:d,offsetTopLeft:p,position:x,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:T}),E=b.cssClasses,k=b.cssProperties,A=q9(q9({transition:g&&a?"transform ".concat(o,"ms ").concat(l):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&f?"visible":"hidden",position:"absolute",top:0,left:0},_);return Be.createElement("div",{tabIndex:-1,className:E,style:A,ref:function(j){n.wrapperNode=j}},u)}}])})(C.PureComponent),oTe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},vm={isSsr:oTe()};function Pp(e){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function X9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Y9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X9(Object(r),!0).forEach(function(n){dP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cTe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QX(n.key),n)}}function uTe(e,t,r){return t&&cTe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dTe(e,t,r){return t=H_(t),fTe(e,JX()?Reflect.construct(t,r||[],H_(e).constructor):t.apply(e,r))}function fTe(e,t){if(t&&(Pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hTe(e)}function hTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JX=function(){return!!e})()}function H_(e){return H_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},H_(e)}function gTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y3(e,t)}function y3(e,t){return y3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},y3(e,t)}function dP(e,t,r){return t=QX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QX(e){var t=pTe(e,"string");return Pp(t)=="symbol"?t:t+""}function pTe(e,t){if(Pp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function mTe(e){return e.dataKey}function yTe(e,t){return Be.isValidElement(e)?Be.cloneElement(e,t):typeof e=="function"?Be.createElement(e,t):Be.createElement(Gke,t)}var Dc=(function(e){function t(){return lTe(this,t),dTe(this,t,arguments)}return gTe(t,e),uTe(t,[{key:"render",value:function(){var n=this,s=this.props,a=s.active,i=s.allowEscapeViewBox,o=s.animationDuration,l=s.animationEasing,u=s.content,d=s.coordinate,f=s.filterNull,g=s.isAnimationActive,p=s.offset,x=s.payload,y=s.payloadUniqBy,v=s.position,T=s.reverseDirection,_=s.useTranslate3d,b=s.viewBox,E=s.wrapperStyle,k=x??[];f&&k.length&&(k=WX(x.filter(function(P){return P.value!=null&&(P.hide!==!0||n.props.includeHidden)}),y,mTe));var A=k.length>0;return Be.createElement(iTe,{allowEscapeViewBox:i,animationDuration:o,animationEasing:l,isAnimationActive:g,active:a,coordinate:d,hasPayload:A,offset:p,position:v,reverseDirection:T,useTranslate3d:_,viewBox:b,wrapperStyle:E},yTe(u,Y9(Y9({},this.props),{},{payload:k})))}}])})(C.PureComponent);dP(Dc,"displayName","Tooltip");dP(Dc,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!vm.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var IN,J9;function xTe(){if(J9)return IN;J9=1;var e=Zc(),t=function(){return e.Date.now()};return IN=t,IN}var MN,Q9;function vTe(){if(Q9)return MN;Q9=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return MN=t,MN}var LN,Z9;function wTe(){if(Z9)return LN;Z9=1;var e=vTe(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return LN=r,LN}var BN,eB;function ZX(){if(eB)return BN;eB=1;var e=wTe(),t=If(),r=mm(),n=NaN,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(r(u))return n;if(t(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=t(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=e(u);var f=a.test(u);return f||i.test(u)?o(u.slice(2),f?2:8):s.test(u)?n:+u}return BN=l,BN}var $N,tB;function bTe(){if(tB)return $N;tB=1;var e=If(),t=xTe(),r=ZX(),n="Expected a function",s=Math.max,a=Math.min;function i(o,l,u){var d,f,g,p,x,y,v=0,T=!1,_=!1,b=!0;if(typeof o!="function")throw new TypeError(n);l=r(l)||0,e(u)&&(T=!!u.leading,_="maxWait"in u,g=_?s(r(u.maxWait)||0,l):g,b="trailing"in u?!!u.trailing:b);function E(K){var re=d,Y=f;return d=f=void 0,v=K,p=o.apply(Y,re),p}function k(K){return v=K,x=setTimeout(j,l),T?E(K):p}function A(K){var re=K-y,Y=K-v,ee=l-re;return _?a(ee,g-Y):ee}function P(K){var re=K-y,Y=K-v;return y===void 0||re>=l||re<0||_&&Y>=g}function j(){var K=t();if(P(K))return O(K);x=setTimeout(j,A(K))}function O(K){return x=void 0,b&&d?E(K):(d=f=void 0,p)}function R(){x!==void 0&&clearTimeout(x),v=0,d=y=f=x=void 0}function M(){return x===void 0?p:O(t())}function G(){var K=t(),re=P(K);if(d=arguments,f=this,y=K,re){if(x===void 0)return k(y);if(_)return clearTimeout(x),x=setTimeout(j,l),E(y)}return x===void 0&&(x=setTimeout(j,l)),p}return G.cancel=R,G.flush=M,G}return $N=i,$N}var UN,rB;function _Te(){if(rB)return UN;rB=1;var e=bTe(),t=If(),r="Expected a function";function n(s,a,i){var o=!0,l=!0;if(typeof s!="function")throw new TypeError(r);return t(i)&&(o="leading"in i?!!i.leading:o,l="trailing"in i?!!i.trailing:l),e(s,a,{leading:o,maxWait:a,trailing:l})}return UN=n,UN}var STe=_Te();const eY=kn(STe);function Fv(e){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fv(e)}function nB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nB(Object(r),!0).forEach(function(n){kTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kTe(e,t,r){return t=TTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TTe(e){var t=CTe(e,"string");return Fv(t)=="symbol"?t:t+""}function CTe(e,t){if(Fv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ETe(e,t){return PTe(e)||jTe(e,t)||ATe(e,t)||NTe()}function NTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ATe(e,t){if(e){if(typeof e=="string")return sB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sB(e,t)}}function sB(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jTe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,a,i,o=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){u=!0,s=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function PTe(e){if(Array.isArray(e))return e}var OTe=C.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,a=e.width,i=a===void 0?"100%":a,o=e.height,l=o===void 0?"100%":o,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,g=e.maxHeight,p=e.children,x=e.debounce,y=x===void 0?0:x,v=e.id,T=e.className,_=e.onResize,b=e.style,E=b===void 0?{}:b,k=C.useRef(null),A=C.useRef();A.current=_,C.useImperativeHandle(t,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var P=C.useState({containerWidth:s.width,containerHeight:s.height}),j=ETe(P,2),O=j[0],R=j[1],M=C.useCallback(function(K,re){R(function(Y){var ee=Math.round(K),B=Math.round(re);return Y.containerWidth===ee&&Y.containerHeight===B?Y:{containerWidth:ee,containerHeight:B}})},[]);C.useEffect(function(){var K=function(I){var W,V=I[0].contentRect,L=V.width,H=V.height;M(L,H),(W=A.current)===null||W===void 0||W.call(A,L,H)};y>0&&(K=eY(K,y,{trailing:!0,leading:!1}));var re=new ResizeObserver(K),Y=k.current.getBoundingClientRect(),ee=Y.width,B=Y.height;return M(ee,B),re.observe(k.current),function(){re.disconnect()}},[M,y]);var G=C.useMemo(function(){var K=O.containerWidth,re=O.containerHeight;if(K<0||re<0)return null;Gu(jh(i)||jh(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,l),Gu(!r||r>0,"The aspect(%s) must be greater than zero.",r);var Y=jh(i)?K:i,ee=jh(l)?re:l;r&&r>0&&(Y?ee=Y/r:ee&&(Y=ee*r),g&&ee>g&&(ee=g)),Gu(Y>0||ee>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Y,ee,i,l,d,f,r);var B=!Array.isArray(p)&&Hu(p.type).endsWith("Chart");return Be.Children.map(p,function(z){return Be.isValidElement(z)?C.cloneElement(z,kb({width:Y,height:ee},B?{style:kb({height:"100%",width:"100%",maxHeight:ee,maxWidth:Y},z.props.style)}:{})):z})},[r,p,l,g,f,d,O,i]);return Be.createElement("div",{id:v?"".concat(v):void 0,className:hn("recharts-responsive-container",T),style:kb(kb({},E),{},{width:i,height:l,minWidth:d,minHeight:f,maxHeight:g}),ref:k},G)}),tY=function(t){return null};tY.displayName="Cell";function Rv(e){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rv(e)}function aB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function x3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aB(Object(r),!0).forEach(function(n){FTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FTe(e,t,r){return t=RTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RTe(e){var t=DTe(e,"string");return Rv(t)=="symbol"?t:t+""}function DTe(e,t){if(Rv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jg={widthCache:{},cacheCount:0},ITe=2e3,MTe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},iB="recharts_measurement_span";function LTe(e){var t=x3({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Vx=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||vm.isSsr)return{width:0,height:0};var n=LTe(r),s=JSON.stringify({text:t,copyStyle:n});if(jg.widthCache[s])return jg.widthCache[s];try{var a=document.getElementById(iB);a||(a=document.createElement("span"),a.setAttribute("id",iB),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var i=x3(x3({},MTe),n);Object.assign(a.style,i),a.textContent="".concat(t);var o=a.getBoundingClientRect(),l={width:o.width,height:o.height};return jg.widthCache[s]=l,++jg.cacheCount>ITe&&(jg.cacheCount=0,jg.widthCache={}),l}catch{return{width:0,height:0}}},BTe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Dv(e){"@babel/helpers - typeof";return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dv(e)}function G_(e,t){return zTe(e)||WTe(e,t)||UTe(e,t)||$Te()}function $Te(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UTe(e,t){if(e){if(typeof e=="string")return oB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oB(e,t)}}function oB(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function WTe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,a,i,o=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){u=!0,s=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function zTe(e){if(Array.isArray(e))return e}function HTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VTe(n.key),n)}}function GTe(e,t,r){return t&&lB(e.prototype,t),r&&lB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function VTe(e){var t=qTe(e,"string");return Dv(t)=="symbol"?t:t+""}function qTe(e,t){if(Dv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var cB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KTe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,XTe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,rY={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},YTe=Object.keys(rY),Jg="NaN";function JTe(e,t){return e*rY[t]}var Tb=(function(){function e(t,r){HTe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!KTe.test(r)&&(this.num=NaN,this.unit=""),YTe.includes(r)&&(this.num=JTe(t,r),this.unit="px")}return GTe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=XTe.exec(r))!==null&&n!==void 0?n:[],a=G_(s,3),i=a[1],o=a[2];return new e(parseFloat(i),o??"")}}])})();function nY(e){if(e.includes(Jg))return Jg;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=cB.exec(t))!==null&&r!==void 0?r:[],s=G_(n,4),a=s[1],i=s[2],o=s[3],l=Tb.parse(a??""),u=Tb.parse(o??""),d=i==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Jg;t=t.replace(cB,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,g=(f=uB.exec(t))!==null&&f!==void 0?f:[],p=G_(g,4),x=p[1],y=p[2],v=p[3],T=Tb.parse(x??""),_=Tb.parse(v??""),b=y==="+"?T.add(_):T.subtract(_);if(b.isNaN())return Jg;t=t.replace(uB,b.toString())}return t}var dB=/\(([^()]*)\)/;function QTe(e){for(var t=e;t.includes("(");){var r=dB.exec(t),n=G_(r,2),s=n[1];t=t.replace(dB,nY(s))}return t}function ZTe(e){var t=e.replace(/\s+/g,"");return t=QTe(t),t=nY(t),t}function eCe(e){try{return ZTe(e)}catch{return Jg}}function WN(e){var t=eCe(e.slice(5,-1));return t===Jg?"":t}var tCe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],rCe=["dx","dy","angle","className","breakAll"];function v3(){return v3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v3.apply(this,arguments)}function fB(e,t){if(e==null)return{};var r=nCe(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function nCe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function hB(e,t){return oCe(e)||iCe(e,t)||aCe(e,t)||sCe()}function sCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aCe(e,t){if(e){if(typeof e=="string")return gB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gB(e,t)}}function gB(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function iCe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,a,i,o=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){u=!0,s=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function oCe(e){if(Array.isArray(e))return e}var sY=/[ \f\n\r\t\v\u2028\u2029]+/,aY=function(t){var r=t.children,n=t.breakAll,s=t.style;try{var a=[];sn(r)||(n?a=r.toString().split(""):a=r.toString().split(sY));var i=a.map(function(l){return{word:l,width:Vx(l,s).width}}),o=n?0:Vx("",s).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},lCe=function(t,r,n,s,a){var i=t.maxLines,o=t.children,l=t.style,u=t.breakAll,d=Jt(i),f=o,g=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Y.reduce(function(ee,B){var z=B.word,I=B.width,W=ee[ee.length-1];if(W&&(s==null||a||W.width+I+n<Number(s)))W.words.push(z),W.width+=I+n;else{var V={words:[z],width:I};ee.push(V)}return ee},[])},p=g(r),x=function(Y){return Y.reduce(function(ee,B){return ee.width>B.width?ee:B})};if(!d)return p;for(var y="",v=function(Y){var ee=f.slice(0,Y),B=aY({breakAll:u,style:l,children:ee+y}).wordsWithComputedWidth,z=g(B),I=z.length>i||x(z).width>Number(s);return[I,z]},T=0,_=f.length-1,b=0,E;T<=_&&b<=f.length-1;){var k=Math.floor((T+_)/2),A=k-1,P=v(A),j=hB(P,2),O=j[0],R=j[1],M=v(k),G=hB(M,1),K=G[0];if(!O&&!K&&(T=k+1),O&&K&&(_=k-1),!O&&K){E=R;break}b++}return E||p},pB=function(t){var r=sn(t)?[]:t.toString().split(sY);return[{words:r}]},cCe=function(t){var r=t.width,n=t.scaleToFit,s=t.children,a=t.style,i=t.breakAll,o=t.maxLines;if((r||n)&&!vm.isSsr){var l,u,d=aY({breakAll:i,children:s,style:a});if(d){var f=d.wordsWithComputedWidth,g=d.spaceWidth;l=f,u=g}else return pB(s);return lCe({breakAll:i,children:s,maxLines:o,style:a},l,u,r,n)}return pB(s)},mB="#808080",V_=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,a=s===void 0?0:s,i=t.lineHeight,o=i===void 0?"1em":i,l=t.capHeight,u=l===void 0?"0.71em":l,d=t.scaleToFit,f=d===void 0?!1:d,g=t.textAnchor,p=g===void 0?"start":g,x=t.verticalAnchor,y=x===void 0?"end":x,v=t.fill,T=v===void 0?mB:v,_=fB(t,tCe),b=C.useMemo(function(){return cCe({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:f,style:_.style,width:_.width})},[_.breakAll,_.children,_.maxLines,f,_.style,_.width]),E=_.dx,k=_.dy,A=_.angle,P=_.className,j=_.breakAll,O=fB(_,rCe);if(!ba(n)||!ba(a))return null;var R=n+(Jt(E)?E:0),M=a+(Jt(k)?k:0),G;switch(y){case"start":G=WN("calc(".concat(u,")"));break;case"middle":G=WN("calc(".concat((b.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:G=WN("calc(".concat(b.length-1," * -").concat(o,")"));break}var K=[];if(f){var re=b[0].width,Y=_.width;K.push("scale(".concat((Jt(Y)?Y/re:1)/re,")"))}return A&&K.push("rotate(".concat(A,", ").concat(R,", ").concat(M,")")),K.length&&(O.transform=K.join(" ")),Be.createElement("text",v3({},cn(O,!0),{x:R,y:M,className:hn("recharts-text",P),textAnchor:p,fill:T.includes("url")?mB:T}),b.map(function(ee,B){var z=ee.words.join(j?"":" ");return Be.createElement("tspan",{x:R,dy:B===0?G:o,key:"".concat(z,"-").concat(B)},z)}))};function pf(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function uCe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function fP(e){let t,r,n;e.length!==2?(t=pf,r=(o,l)=>pf(e(o),l),n=(o,l)=>e(o)-l):(t=e===pf||e===uCe?e:dCe,r=e,n=e);function s(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<0?u=f+1:d=f}while(u<d)}return u}function a(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function i(o,l,u=0,d=o.length){const f=s(o,l,u,d-1);return f>u&&n(o[f-1],l)>-n(o[f],l)?f-1:f}return{left:s,center:i,right:a}}function dCe(){return 0}function iY(e){return e===null?NaN:+e}function*fCe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const hCe=fP(pf),z1=hCe.right;fP(iY).center;class yB extends Map{constructor(t,r=mCe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(xB(this,t))}has(t){return super.has(xB(this,t))}set(t,r){return super.set(gCe(this,t),r)}delete(t){return super.delete(pCe(this,t))}}function xB({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function gCe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function pCe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function mCe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function yCe(e=pf){if(e===pf)return oY;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function oY(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const xCe=Math.sqrt(50),vCe=Math.sqrt(10),wCe=Math.sqrt(2);function q_(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),i=a>=xCe?10:a>=vCe?5:a>=wCe?2:1;let o,l,u;return s<0?(u=Math.pow(10,-s)/i,o=Math.round(e*u),l=Math.round(t*u),o/u<e&&++o,l/u>t&&--l,u=-u):(u=Math.pow(10,s)*i,o=Math.round(e/u),l=Math.round(t/u),o*u<e&&++o,l*u>t&&--l),l<o&&.5<=r&&r<2?q_(e,t,r*2):[o,l,u]}function w3(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,a,i]=n?q_(t,e,r):q_(e,t,r);if(!(a>=s))return[];const o=a-s+1,l=new Array(o);if(n)if(i<0)for(let u=0;u<o;++u)l[u]=(a-u)/-i;else for(let u=0;u<o;++u)l[u]=(a-u)*i;else if(i<0)for(let u=0;u<o;++u)l[u]=(s+u)/-i;else for(let u=0;u<o;++u)l[u]=(s+u)*i;return l}function b3(e,t,r){return t=+t,e=+e,r=+r,q_(e,t,r)[2]}function _3(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?b3(t,e,r):b3(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function vB(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function wB(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function lY(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?oY:yCe(s);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),g=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/l+g)),x=Math.min(n,Math.floor(t+(l-u)*f/l+g));lY(e,t,p,x,s)}const a=e[t];let i=r,o=n;for(dx(e,r,t),s(e[n],a)>0&&dx(e,r,n);i<o;){for(dx(e,i,o),++i,--o;s(e[i],a)<0;)++i;for(;s(e[o],a)>0;)--o}s(e[r],a)===0?dx(e,r,o):(++o,dx(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function dx(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function bCe(e,t,r){if(e=Float64Array.from(fCe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return wB(e);if(t>=1)return vB(e);var n,s=(n-1)*t,a=Math.floor(s),i=vB(lY(e,a).subarray(0,a+1)),o=wB(e.subarray(a+1));return i+(o-i)*(s-a)}}function _Ce(e,t,r=iY){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,a=Math.floor(s),i=+r(e[a],a,e),o=+r(e[a+1],a+1,e);return i+(o-i)*(s-a)}}function SCe(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(s);++n<s;)a[n]=e+n*r;return a}function Sl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function cd(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const S3=Symbol("implicit");function hP(){var e=new yB,t=[],r=[],n=S3;function s(a){let i=e.get(a);if(i===void 0){if(n!==S3)return n;e.set(a,i=t.push(a)-1)}return r[i%r.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new yB;for(const i of a)e.has(i)||e.set(i,t.push(i)-1);return s},s.range=function(a){return arguments.length?(r=Array.from(a),s):r.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return hP(t,r).unknown(n)},Sl.apply(s,arguments),s}function Iv(){var e=hP().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,a,i,o=!1,l=0,u=0,d=.5;delete e.unknown;function f(){var g=t().length,p=s<n,x=p?s:n,y=p?n:s;a=(y-x)/Math.max(1,g-l+u*2),o&&(a=Math.floor(a)),x+=(y-x-a*(g-l))*d,i=a*(1-l),o&&(x=Math.round(x),i=Math.round(i));var v=SCe(g).map(function(T){return x+a*T});return r(p?v.reverse():v)}return e.domain=function(g){return arguments.length?(t(g),f()):t()},e.range=function(g){return arguments.length?([n,s]=g,n=+n,s=+s,f()):[n,s]},e.rangeRound=function(g){return[n,s]=g,n=+n,s=+s,o=!0,f()},e.bandwidth=function(){return i},e.step=function(){return a},e.round=function(g){return arguments.length?(o=!!g,f()):o},e.padding=function(g){return arguments.length?(l=Math.min(1,u=+g),f()):l},e.paddingInner=function(g){return arguments.length?(l=Math.min(1,g),f()):l},e.paddingOuter=function(g){return arguments.length?(u=+g,f()):u},e.align=function(g){return arguments.length?(d=Math.max(0,Math.min(1,g)),f()):d},e.copy=function(){return Iv(t(),[n,s]).round(o).paddingInner(l).paddingOuter(u).align(d)},Sl.apply(f(),arguments)}function cY(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return cY(t())},e}function qx(){return cY(Iv.apply(null,arguments).paddingInner(1))}function gP(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function uY(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function H1(){}var Mv=.7,K_=1/Mv,hp="\\s*([+-]?\\d+)\\s*",Lv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kCe=/^#([0-9a-f]{3,8})$/,TCe=new RegExp(`^rgb\\(${hp},${hp},${hp}\\)$`),CCe=new RegExp(`^rgb\\(${Gc},${Gc},${Gc}\\)$`),ECe=new RegExp(`^rgba\\(${hp},${hp},${hp},${Lv}\\)$`),NCe=new RegExp(`^rgba\\(${Gc},${Gc},${Gc},${Lv}\\)$`),ACe=new RegExp(`^hsl\\(${Lv},${Gc},${Gc}\\)$`),jCe=new RegExp(`^hsla\\(${Lv},${Gc},${Gc},${Lv}\\)$`),bB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gP(H1,Bv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_B,formatHex:_B,formatHex8:PCe,formatHsl:OCe,formatRgb:SB,toString:SB});function _B(){return this.rgb().formatHex()}function PCe(){return this.rgb().formatHex8()}function OCe(){return dY(this).formatHsl()}function SB(){return this.rgb().formatRgb()}function Bv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=kCe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?kB(t):r===3?new fo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Cb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Cb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=TCe.exec(e))?new fo(t[1],t[2],t[3],1):(t=CCe.exec(e))?new fo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ECe.exec(e))?Cb(t[1],t[2],t[3],t[4]):(t=NCe.exec(e))?Cb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ACe.exec(e))?EB(t[1],t[2]/100,t[3]/100,1):(t=jCe.exec(e))?EB(t[1],t[2]/100,t[3]/100,t[4]):bB.hasOwnProperty(e)?kB(bB[e]):e==="transparent"?new fo(NaN,NaN,NaN,0):null}function kB(e){return new fo(e>>16&255,e>>8&255,e&255,1)}function Cb(e,t,r,n){return n<=0&&(e=t=r=NaN),new fo(e,t,r,n)}function FCe(e){return e instanceof H1||(e=Bv(e)),e?(e=e.rgb(),new fo(e.r,e.g,e.b,e.opacity)):new fo}function k3(e,t,r,n){return arguments.length===1?FCe(e):new fo(e,t,r,n??1)}function fo(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}gP(fo,k3,uY(H1,{brighter(e){return e=e==null?K_:Math.pow(K_,e),new fo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Mv:Math.pow(Mv,e),new fo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fo(Hh(this.r),Hh(this.g),Hh(this.b),X_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:TB,formatHex:TB,formatHex8:RCe,formatRgb:CB,toString:CB}));function TB(){return`#${Ph(this.r)}${Ph(this.g)}${Ph(this.b)}`}function RCe(){return`#${Ph(this.r)}${Ph(this.g)}${Ph(this.b)}${Ph((isNaN(this.opacity)?1:this.opacity)*255)}`}function CB(){const e=X_(this.opacity);return`${e===1?"rgb(":"rgba("}${Hh(this.r)}, ${Hh(this.g)}, ${Hh(this.b)}${e===1?")":`, ${e})`}`}function X_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Hh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ph(e){return e=Hh(e),(e<16?"0":"")+e.toString(16)}function EB(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ql(e,t,r,n)}function dY(e){if(e instanceof ql)return new ql(e.h,e.s,e.l,e.opacity);if(e instanceof H1||(e=Bv(e)),!e)return new ql;if(e instanceof ql)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),a=Math.max(t,r,n),i=NaN,o=a-s,l=(a+s)/2;return o?(t===a?i=(r-n)/o+(r<n)*6:r===a?i=(n-t)/o+2:i=(t-r)/o+4,o/=l<.5?a+s:2-a-s,i*=60):o=l>0&&l<1?0:i,new ql(i,o,l,e.opacity)}function DCe(e,t,r,n){return arguments.length===1?dY(e):new ql(e,t,r,n??1)}function ql(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}gP(ql,DCe,uY(H1,{brighter(e){return e=e==null?K_:Math.pow(K_,e),new ql(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Mv:Math.pow(Mv,e),new ql(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new fo(zN(e>=240?e-240:e+120,s,n),zN(e,s,n),zN(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new ql(NB(this.h),Eb(this.s),Eb(this.l),X_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=X_(this.opacity);return`${e===1?"hsl(":"hsla("}${NB(this.h)}, ${Eb(this.s)*100}%, ${Eb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function NB(e){return e=(e||0)%360,e<0?e+360:e}function Eb(e){return Math.max(0,Math.min(1,e||0))}function zN(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const pP=e=>()=>e;function ICe(e,t){return function(r){return e+r*t}}function MCe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function LCe(e){return(e=+e)==1?fY:function(t,r){return r-t?MCe(t,r,e):pP(isNaN(t)?r:t)}}function fY(e,t){var r=t-e;return r?ICe(e,r):pP(isNaN(e)?t:e)}const AB=(function e(t){var r=LCe(t);function n(s,a){var i=r((s=k3(s)).r,(a=k3(a)).r),o=r(s.g,a.g),l=r(s.b,a.b),u=fY(s.opacity,a.opacity);return function(d){return s.r=i(d),s.g=o(d),s.b=l(d),s.opacity=u(d),s+""}}return n.gamma=e,n})(1);function BCe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(a){for(s=0;s<r;++s)n[s]=e[s]*(1-a)+t[s]*a;return n}}function $Ce(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function UCe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),a=new Array(r),i;for(i=0;i<n;++i)s[i]=wm(e[i],t[i]);for(;i<r;++i)a[i]=t[i];return function(o){for(i=0;i<n;++i)a[i]=s[i](o);return a}}function WCe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Y_(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function zCe(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=wm(e[s],t[s]):n[s]=t[s];return function(a){for(s in r)n[s]=r[s](a);return n}}var T3=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,HN=new RegExp(T3.source,"g");function HCe(e){return function(){return e}}function GCe(e){return function(t){return e(t)+""}}function VCe(e,t){var r=T3.lastIndex=HN.lastIndex=0,n,s,a,i=-1,o=[],l=[];for(e=e+"",t=t+"";(n=T3.exec(e))&&(s=HN.exec(t));)(a=s.index)>r&&(a=t.slice(r,a),o[i]?o[i]+=a:o[++i]=a),(n=n[0])===(s=s[0])?o[i]?o[i]+=s:o[++i]=s:(o[++i]=null,l.push({i,x:Y_(n,s)})),r=HN.lastIndex;return r<t.length&&(a=t.slice(r),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?GCe(l[0].x):HCe(t):(t=l.length,function(u){for(var d=0,f;d<t;++d)o[(f=l[d]).i]=f.x(u);return o.join("")})}function wm(e,t){var r=typeof t,n;return t==null||r==="boolean"?pP(t):(r==="number"?Y_:r==="string"?(n=Bv(t))?(t=n,AB):VCe:t instanceof Bv?AB:t instanceof Date?WCe:$Ce(t)?BCe:Array.isArray(t)?UCe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?zCe:Y_)(e,t)}function mP(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function qCe(e,t){t===void 0&&(t=e,e=wm);for(var r=0,n=t.length-1,s=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(s,s=t[++r]);return function(i){var o=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return a[o](i-o)}}function KCe(e){return function(){return e}}function J_(e){return+e}var jB=[0,1];function Ki(e){return e}function C3(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:KCe(isNaN(t)?NaN:.5)}function XCe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function YCe(e,t,r){var n=e[0],s=e[1],a=t[0],i=t[1];return s<n?(n=C3(s,n),a=r(i,a)):(n=C3(n,s),a=r(a,i)),function(o){return a(n(o))}}function JCe(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),a=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)s[i]=C3(e[i],e[i+1]),a[i]=r(t[i],t[i+1]);return function(o){var l=z1(e,o,1,n)-1;return a[l](s[l](o))}}function G1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function TS(){var e=jB,t=jB,r=wm,n,s,a,i=Ki,o,l,u;function d(){var g=Math.min(e.length,t.length);return i!==Ki&&(i=XCe(e[0],e[g-1])),o=g>2?JCe:YCe,l=u=null,f}function f(g){return g==null||isNaN(g=+g)?a:(l||(l=o(e.map(n),t,r)))(n(i(g)))}return f.invert=function(g){return i(s((u||(u=o(t,e.map(n),Y_)))(g)))},f.domain=function(g){return arguments.length?(e=Array.from(g,J_),d()):e.slice()},f.range=function(g){return arguments.length?(t=Array.from(g),d()):t.slice()},f.rangeRound=function(g){return t=Array.from(g),r=mP,d()},f.clamp=function(g){return arguments.length?(i=g?!0:Ki,d()):i!==Ki},f.interpolate=function(g){return arguments.length?(r=g,d()):r},f.unknown=function(g){return arguments.length?(a=g,f):a},function(g,p){return n=g,s=p,d()}}function yP(){return TS()(Ki,Ki)}function QCe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Q_(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Op(e){return e=Q_(Math.abs(e)),e?e[1]:NaN}function ZCe(e,t){return function(r,n){for(var s=r.length,a=[],i=0,o=e[0],l=0;s>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(r.substring(s-=o,s+o)),!((l+=o+1)>n));)o=e[i=(i+1)%e.length];return a.reverse().join(t)}}function eEe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var tEe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $v(e){if(!(t=tEe.exec(e)))throw new Error("invalid format: "+e);var t;return new xP({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}$v.prototype=xP.prototype;function xP(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}xP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function rEe(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var hY;function nEe(e,t){var r=Q_(e,t);if(!r)return e+"";var n=r[0],s=r[1],a=s-(hY=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,i=n.length;return a===i?n:a>i?n+new Array(a-i+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Q_(e,Math.max(0,t+a-1))[0]}function PB(e,t){var r=Q_(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const OB={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:QCe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>PB(e*100,t),r:PB,s:nEe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function FB(e){return e}var RB=Array.prototype.map,DB=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function sEe(e){var t=e.grouping===void 0||e.thousands===void 0?FB:ZCe(RB.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?FB:eEe(RB.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=$v(f);var g=f.fill,p=f.align,x=f.sign,y=f.symbol,v=f.zero,T=f.width,_=f.comma,b=f.precision,E=f.trim,k=f.type;k==="n"?(_=!0,k="g"):OB[k]||(b===void 0&&(b=12),E=!0,k="g"),(v||g==="0"&&p==="=")&&(v=!0,g="0",p="=");var A=y==="$"?r:y==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",P=y==="$"?n:/[%p]/.test(k)?i:"",j=OB[k],O=/[defgprs%]/.test(k);b=b===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function R(M){var G=A,K=P,re,Y,ee;if(k==="c")K=j(M)+K,M="";else{M=+M;var B=M<0||1/M<0;if(M=isNaN(M)?l:j(Math.abs(M),b),E&&(M=rEe(M)),B&&+M==0&&x!=="+"&&(B=!1),G=(B?x==="("?x:o:x==="-"||x==="("?"":x)+G,K=(k==="s"?DB[8+hY/3]:"")+K+(B&&x==="("?")":""),O){for(re=-1,Y=M.length;++re<Y;)if(ee=M.charCodeAt(re),48>ee||ee>57){K=(ee===46?s+M.slice(re+1):M.slice(re))+K,M=M.slice(0,re);break}}}_&&!v&&(M=t(M,1/0));var z=G.length+M.length+K.length,I=z<T?new Array(T-z+1).join(g):"";switch(_&&v&&(M=t(I+M,I.length?T-K.length:1/0),I=""),p){case"<":M=G+M+K+I;break;case"=":M=G+I+M+K;break;case"^":M=I.slice(0,z=I.length>>1)+G+M+K+I.slice(z);break;default:M=I+G+M+K;break}return a(M)}return R.toString=function(){return f+""},R}function d(f,g){var p=u((f=$v(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(Op(g)/3)))*3,y=Math.pow(10,-x),v=DB[8+x/3];return function(T){return p(y*T)+v}}return{format:u,formatPrefix:d}}var Nb,vP,gY;aEe({thousands:",",grouping:[3],currency:["$",""]});function aEe(e){return Nb=sEe(e),vP=Nb.format,gY=Nb.formatPrefix,Nb}function iEe(e){return Math.max(0,-Op(Math.abs(e)))}function oEe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Op(t)/3)))*3-Op(Math.abs(e)))}function lEe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Op(t)-Op(e))+1}function pY(e,t,r,n){var s=_3(e,t,r),a;switch(n=$v(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=oEe(s,i))&&(n.precision=a),gY(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=lEe(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=iEe(s))&&(n.precision=a-(n.type==="%")*2);break}}return vP(n)}function Lf(e){var t=e.domain;return e.ticks=function(r){var n=t();return w3(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return pY(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,a=n.length-1,i=n[s],o=n[a],l,u,d=10;for(o<i&&(u=i,i=o,o=u,u=s,s=a,a=u);d-- >0;){if(u=b3(i,o,r),u===l)return n[s]=i,n[a]=o,t(n);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;l=u}return e},e}function Z_(){var e=yP();return e.copy=function(){return G1(e,Z_())},Sl.apply(e,arguments),Lf(e)}function mY(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,J_),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return mY(e).unknown(t)},e=arguments.length?Array.from(e,J_):[0,1],Lf(r)}function yY(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],a=e[n],i;return a<s&&(i=r,r=n,n=i,i=s,s=a,a=i),e[r]=t.floor(s),e[n]=t.ceil(a),e}function IB(e){return Math.log(e)}function MB(e){return Math.exp(e)}function cEe(e){return-Math.log(-e)}function uEe(e){return-Math.exp(-e)}function dEe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function fEe(e){return e===10?dEe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function hEe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function LB(e){return(t,r)=>-e(-t,r)}function wP(e){const t=e(IB,MB),r=t.domain;let n=10,s,a;function i(){return s=hEe(n),a=fEe(n),r()[0]<0?(s=LB(s),a=LB(a),e(cEe,uEe)):e(IB,MB),t}return t.base=function(o){return arguments.length?(n=+o,i()):n},t.domain=function(o){return arguments.length?(r(o),i()):r()},t.ticks=o=>{const l=r();let u=l[0],d=l[l.length-1];const f=d<u;f&&([u,d]=[d,u]);let g=s(u),p=s(d),x,y;const v=o==null?10:+o;let T=[];if(!(n%1)&&p-g<v){if(g=Math.floor(g),p=Math.ceil(p),u>0){for(;g<=p;++g)for(x=1;x<n;++x)if(y=g<0?x/a(-g):x*a(g),!(y<u)){if(y>d)break;T.push(y)}}else for(;g<=p;++g)for(x=n-1;x>=1;--x)if(y=g>0?x/a(-g):x*a(g),!(y<u)){if(y>d)break;T.push(y)}T.length*2<v&&(T=w3(u,d,v))}else T=w3(g,p,Math.min(p-g,v)).map(a);return f?T.reverse():T},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=$v(l)).precision==null&&(l.trim=!0),l=vP(l)),o===1/0)return l;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/a(Math.round(s(d)));return f*n<n-.5&&(f*=n),f<=u?l(d):""}},t.nice=()=>r(yY(r(),{floor:o=>a(Math.floor(s(o))),ceil:o=>a(Math.ceil(s(o)))})),t}function xY(){const e=wP(TS()).domain([1,10]);return e.copy=()=>G1(e,xY()).base(e.base()),Sl.apply(e,arguments),e}function BB(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function $B(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function bP(e){var t=1,r=e(BB(t),$B(t));return r.constant=function(n){return arguments.length?e(BB(t=+n),$B(t)):t},Lf(r)}function vY(){var e=bP(TS());return e.copy=function(){return G1(e,vY()).constant(e.constant())},Sl.apply(e,arguments)}function UB(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function gEe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function pEe(e){return e<0?-e*e:e*e}function _P(e){var t=e(Ki,Ki),r=1;function n(){return r===1?e(Ki,Ki):r===.5?e(gEe,pEe):e(UB(r),UB(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Lf(t)}function SP(){var e=_P(TS());return e.copy=function(){return G1(e,SP()).exponent(e.exponent())},Sl.apply(e,arguments),e}function mEe(){return SP.apply(null,arguments).exponent(.5)}function WB(e){return Math.sign(e)*e*e}function yEe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function wY(){var e=yP(),t=[0,1],r=!1,n;function s(a){var i=yEe(e(a));return isNaN(i)?n:r?Math.round(i):i}return s.invert=function(a){return e.invert(WB(a))},s.domain=function(a){return arguments.length?(e.domain(a),s):e.domain()},s.range=function(a){return arguments.length?(e.range((t=Array.from(a,J_)).map(WB)),s):t.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(r=!!a,s):r},s.clamp=function(a){return arguments.length?(e.clamp(a),s):e.clamp()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return wY(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Sl.apply(s,arguments),Lf(s)}function bY(){var e=[],t=[],r=[],n;function s(){var i=0,o=Math.max(1,t.length);for(r=new Array(o-1);++i<o;)r[i-1]=_Ce(e,i/o);return a}function a(i){return i==null||isNaN(i=+i)?n:t[z1(r,i)]}return a.invertExtent=function(i){var o=t.indexOf(i);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},a.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let o of i)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(pf),s()},a.range=function(i){return arguments.length?(t=Array.from(i),s()):t.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return bY().domain(e).range(t).unknown(n)},Sl.apply(a,arguments)}function _Y(){var e=0,t=1,r=1,n=[.5],s=[0,1],a;function i(l){return l!=null&&l<=l?s[z1(n,l,0,r)]:a}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return i}return i.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},i.range=function(l){return arguments.length?(r=(s=Array.from(l)).length-1,o()):s.slice()},i.invertExtent=function(l){var u=s.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(l){return arguments.length&&(a=l),i},i.thresholds=function(){return n.slice()},i.copy=function(){return _Y().domain([e,t]).range(s).unknown(a)},Sl.apply(Lf(i),arguments)}function SY(){var e=[.5],t=[0,1],r,n=1;function s(a){return a!=null&&a<=a?t[z1(e,a,0,n)]:r}return s.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var i=t.indexOf(a);return[e[i-1],e[i]]},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return SY().domain(e).range(t).unknown(r)},Sl.apply(s,arguments)}const GN=new Date,VN=new Date;function Sa(e,t,r,n){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const i=s(a),o=s.ceil(a);return a-i<o-a?i:o},s.offset=(a,i)=>(t(a=new Date(+a),i==null?1:Math.floor(i)),a),s.range=(a,i,o)=>{const l=[];if(a=s.ceil(a),o=o==null?1:Math.floor(o),!(a<i)||!(o>0))return l;let u;do l.push(u=new Date(+a)),t(a,o),e(a);while(u<a&&a<i);return l},s.filter=a=>Sa(i=>{if(i>=i)for(;e(i),!a(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;t(i,-1),!a(i););else for(;--o>=0;)for(;t(i,1),!a(i););}),r&&(s.count=(a,i)=>(GN.setTime(+a),VN.setTime(+i),e(GN),e(VN),Math.floor(r(GN,VN))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(n?i=>n(i)%a===0:i=>s.count(0,i)%a===0):s)),s}const e2=Sa(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);e2.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Sa(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):e2);e2.range;const Mu=1e3,hl=Mu*60,Lu=hl*60,Qu=Lu*24,kP=Qu*7,zB=Qu*30,qN=Qu*365,Oh=Sa(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Mu)},(e,t)=>(t-e)/Mu,e=>e.getUTCSeconds());Oh.range;const TP=Sa(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Mu)},(e,t)=>{e.setTime(+e+t*hl)},(e,t)=>(t-e)/hl,e=>e.getMinutes());TP.range;const CP=Sa(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*hl)},(e,t)=>(t-e)/hl,e=>e.getUTCMinutes());CP.range;const EP=Sa(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Mu-e.getMinutes()*hl)},(e,t)=>{e.setTime(+e+t*Lu)},(e,t)=>(t-e)/Lu,e=>e.getHours());EP.range;const NP=Sa(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Lu)},(e,t)=>(t-e)/Lu,e=>e.getUTCHours());NP.range;const V1=Sa(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*hl)/Qu,e=>e.getDate()-1);V1.range;const CS=Sa(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Qu,e=>e.getUTCDate()-1);CS.range;const kY=Sa(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Qu,e=>Math.floor(e/Qu));kY.range;function E0(e){return Sa(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*hl)/kP)}const ES=E0(0),t2=E0(1),xEe=E0(2),vEe=E0(3),Fp=E0(4),wEe=E0(5),bEe=E0(6);ES.range;t2.range;xEe.range;vEe.range;Fp.range;wEe.range;bEe.range;function N0(e){return Sa(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/kP)}const NS=N0(0),r2=N0(1),_Ee=N0(2),SEe=N0(3),Rp=N0(4),kEe=N0(5),TEe=N0(6);NS.range;r2.range;_Ee.range;SEe.range;Rp.range;kEe.range;TEe.range;const AP=Sa(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());AP.range;const jP=Sa(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());jP.range;const Zu=Sa(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Zu.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Sa(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Zu.range;const ed=Sa(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ed.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Sa(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ed.range;function TY(e,t,r,n,s,a){const i=[[Oh,1,Mu],[Oh,5,5*Mu],[Oh,15,15*Mu],[Oh,30,30*Mu],[a,1,hl],[a,5,5*hl],[a,15,15*hl],[a,30,30*hl],[s,1,Lu],[s,3,3*Lu],[s,6,6*Lu],[s,12,12*Lu],[n,1,Qu],[n,2,2*Qu],[r,1,kP],[t,1,zB],[t,3,3*zB],[e,1,qN]];function o(u,d,f){const g=d<u;g&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:l(u,d,f),x=p?p.range(u,+d+1):[];return g?x.reverse():x}function l(u,d,f){const g=Math.abs(d-u)/f,p=fP(([,,v])=>v).right(i,g);if(p===i.length)return e.every(_3(u/qN,d/qN,f));if(p===0)return e2.every(Math.max(_3(u,d,f),1));const[x,y]=i[g/i[p-1][2]<i[p][2]/g?p-1:p];return x.every(y)}return[o,l]}const[CEe,EEe]=TY(ed,jP,NS,kY,NP,CP),[NEe,AEe]=TY(Zu,AP,ES,V1,EP,TP);function KN(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function XN(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function fx(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function jEe(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,a=e.days,i=e.shortDays,o=e.months,l=e.shortMonths,u=hx(s),d=gx(s),f=hx(a),g=gx(a),p=hx(i),x=gx(i),y=hx(o),v=gx(o),T=hx(l),_=gx(l),b={a:B,A:z,b:I,B:W,c:null,d:XB,e:XB,f:ZEe,g:cNe,G:dNe,H:YEe,I:JEe,j:QEe,L:CY,m:eNe,M:tNe,p:V,q:L,Q:QB,s:ZB,S:rNe,u:nNe,U:sNe,V:aNe,w:iNe,W:oNe,x:null,X:null,y:lNe,Y:uNe,Z:fNe,"%":JB},E={a:H,A:J,b:Q,B:ne,c:null,d:YB,e:YB,f:mNe,g:CNe,G:NNe,H:hNe,I:gNe,j:pNe,L:NY,m:yNe,M:xNe,p:Z,q:se,Q:QB,s:ZB,S:vNe,u:wNe,U:bNe,V:_Ne,w:SNe,W:kNe,x:null,X:null,y:TNe,Y:ENe,Z:ANe,"%":JB},k={a:R,A:M,b:G,B:K,c:re,d:qB,e:qB,f:VEe,g:VB,G:GB,H:KB,I:KB,j:WEe,L:GEe,m:UEe,M:zEe,p:O,q:$Ee,Q:KEe,s:XEe,S:HEe,u:DEe,U:IEe,V:MEe,w:REe,W:LEe,x:Y,X:ee,y:VB,Y:GB,Z:BEe,"%":qEe};b.x=A(r,b),b.X=A(n,b),b.c=A(t,b),E.x=A(r,E),E.X=A(n,E),E.c=A(t,E);function A(ce,he){return function(Ee){var ie=[],me=-1,Ne=0,Oe=ce.length,Re,ze,Nt;for(Ee instanceof Date||(Ee=new Date(+Ee));++me<Oe;)ce.charCodeAt(me)===37&&(ie.push(ce.slice(Ne,me)),(ze=HB[Re=ce.charAt(++me)])!=null?Re=ce.charAt(++me):ze=Re==="e"?" ":"0",(Nt=he[Re])&&(Re=Nt(Ee,ze)),ie.push(Re),Ne=me+1);return ie.push(ce.slice(Ne,me)),ie.join("")}}function P(ce,he){return function(Ee){var ie=fx(1900,void 0,1),me=j(ie,ce,Ee+="",0),Ne,Oe;if(me!=Ee.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(he&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(Ne=XN(fx(ie.y,0,1)),Oe=Ne.getUTCDay(),Ne=Oe>4||Oe===0?r2.ceil(Ne):r2(Ne),Ne=CS.offset(Ne,(ie.V-1)*7),ie.y=Ne.getUTCFullYear(),ie.m=Ne.getUTCMonth(),ie.d=Ne.getUTCDate()+(ie.w+6)%7):(Ne=KN(fx(ie.y,0,1)),Oe=Ne.getDay(),Ne=Oe>4||Oe===0?t2.ceil(Ne):t2(Ne),Ne=V1.offset(Ne,(ie.V-1)*7),ie.y=Ne.getFullYear(),ie.m=Ne.getMonth(),ie.d=Ne.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),Oe="Z"in ie?XN(fx(ie.y,0,1)).getUTCDay():KN(fx(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(Oe+5)%7:ie.w+ie.U*7-(Oe+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,XN(ie)):KN(ie)}}function j(ce,he,Ee,ie){for(var me=0,Ne=he.length,Oe=Ee.length,Re,ze;me<Ne;){if(ie>=Oe)return-1;if(Re=he.charCodeAt(me++),Re===37){if(Re=he.charAt(me++),ze=k[Re in HB?he.charAt(me++):Re],!ze||(ie=ze(ce,Ee,ie))<0)return-1}else if(Re!=Ee.charCodeAt(ie++))return-1}return ie}function O(ce,he,Ee){var ie=u.exec(he.slice(Ee));return ie?(ce.p=d.get(ie[0].toLowerCase()),Ee+ie[0].length):-1}function R(ce,he,Ee){var ie=p.exec(he.slice(Ee));return ie?(ce.w=x.get(ie[0].toLowerCase()),Ee+ie[0].length):-1}function M(ce,he,Ee){var ie=f.exec(he.slice(Ee));return ie?(ce.w=g.get(ie[0].toLowerCase()),Ee+ie[0].length):-1}function G(ce,he,Ee){var ie=T.exec(he.slice(Ee));return ie?(ce.m=_.get(ie[0].toLowerCase()),Ee+ie[0].length):-1}function K(ce,he,Ee){var ie=y.exec(he.slice(Ee));return ie?(ce.m=v.get(ie[0].toLowerCase()),Ee+ie[0].length):-1}function re(ce,he,Ee){return j(ce,t,he,Ee)}function Y(ce,he,Ee){return j(ce,r,he,Ee)}function ee(ce,he,Ee){return j(ce,n,he,Ee)}function B(ce){return i[ce.getDay()]}function z(ce){return a[ce.getDay()]}function I(ce){return l[ce.getMonth()]}function W(ce){return o[ce.getMonth()]}function V(ce){return s[+(ce.getHours()>=12)]}function L(ce){return 1+~~(ce.getMonth()/3)}function H(ce){return i[ce.getUTCDay()]}function J(ce){return a[ce.getUTCDay()]}function Q(ce){return l[ce.getUTCMonth()]}function ne(ce){return o[ce.getUTCMonth()]}function Z(ce){return s[+(ce.getUTCHours()>=12)]}function se(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var he=A(ce+="",b);return he.toString=function(){return ce},he},parse:function(ce){var he=P(ce+="",!1);return he.toString=function(){return ce},he},utcFormat:function(ce){var he=A(ce+="",E);return he.toString=function(){return ce},he},utcParse:function(ce){var he=P(ce+="",!0);return he.toString=function(){return ce},he}}}var HB={"-":"",_:" ",0:"0"},Ua=/^\s*\d+/,PEe=/^%/,OEe=/[\\^$*+?|[\]().{}]/g;function vn(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",a=s.length;return n+(a<r?new Array(r-a+1).join(t)+s:s)}function FEe(e){return e.replace(OEe,"\\$&")}function hx(e){return new RegExp("^(?:"+e.map(FEe).join("|")+")","i")}function gx(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function REe(e,t,r){var n=Ua.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function DEe(e,t,r){var n=Ua.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function IEe(e,t,r){var n=Ua.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function MEe(e,t,r){var n=Ua.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function LEe(e,t,r){var n=Ua.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function GB(e,t,r){var n=Ua.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function VB(e,t,r){var n=Ua.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function BEe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function $Ee(e,t,r){var n=Ua.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function UEe(e,t,r){var n=Ua.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function qB(e,t,r){var n=Ua.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function WEe(e,t,r){var n=Ua.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function KB(e,t,r){var n=Ua.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function zEe(e,t,r){var n=Ua.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function HEe(e,t,r){var n=Ua.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function GEe(e,t,r){var n=Ua.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function VEe(e,t,r){var n=Ua.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function qEe(e,t,r){var n=PEe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function KEe(e,t,r){var n=Ua.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function XEe(e,t,r){var n=Ua.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function XB(e,t){return vn(e.getDate(),t,2)}function YEe(e,t){return vn(e.getHours(),t,2)}function JEe(e,t){return vn(e.getHours()%12||12,t,2)}function QEe(e,t){return vn(1+V1.count(Zu(e),e),t,3)}function CY(e,t){return vn(e.getMilliseconds(),t,3)}function ZEe(e,t){return CY(e,t)+"000"}function eNe(e,t){return vn(e.getMonth()+1,t,2)}function tNe(e,t){return vn(e.getMinutes(),t,2)}function rNe(e,t){return vn(e.getSeconds(),t,2)}function nNe(e){var t=e.getDay();return t===0?7:t}function sNe(e,t){return vn(ES.count(Zu(e)-1,e),t,2)}function EY(e){var t=e.getDay();return t>=4||t===0?Fp(e):Fp.ceil(e)}function aNe(e,t){return e=EY(e),vn(Fp.count(Zu(e),e)+(Zu(e).getDay()===4),t,2)}function iNe(e){return e.getDay()}function oNe(e,t){return vn(t2.count(Zu(e)-1,e),t,2)}function lNe(e,t){return vn(e.getFullYear()%100,t,2)}function cNe(e,t){return e=EY(e),vn(e.getFullYear()%100,t,2)}function uNe(e,t){return vn(e.getFullYear()%1e4,t,4)}function dNe(e,t){var r=e.getDay();return e=r>=4||r===0?Fp(e):Fp.ceil(e),vn(e.getFullYear()%1e4,t,4)}function fNe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+vn(t/60|0,"0",2)+vn(t%60,"0",2)}function YB(e,t){return vn(e.getUTCDate(),t,2)}function hNe(e,t){return vn(e.getUTCHours(),t,2)}function gNe(e,t){return vn(e.getUTCHours()%12||12,t,2)}function pNe(e,t){return vn(1+CS.count(ed(e),e),t,3)}function NY(e,t){return vn(e.getUTCMilliseconds(),t,3)}function mNe(e,t){return NY(e,t)+"000"}function yNe(e,t){return vn(e.getUTCMonth()+1,t,2)}function xNe(e,t){return vn(e.getUTCMinutes(),t,2)}function vNe(e,t){return vn(e.getUTCSeconds(),t,2)}function wNe(e){var t=e.getUTCDay();return t===0?7:t}function bNe(e,t){return vn(NS.count(ed(e)-1,e),t,2)}function AY(e){var t=e.getUTCDay();return t>=4||t===0?Rp(e):Rp.ceil(e)}function _Ne(e,t){return e=AY(e),vn(Rp.count(ed(e),e)+(ed(e).getUTCDay()===4),t,2)}function SNe(e){return e.getUTCDay()}function kNe(e,t){return vn(r2.count(ed(e)-1,e),t,2)}function TNe(e,t){return vn(e.getUTCFullYear()%100,t,2)}function CNe(e,t){return e=AY(e),vn(e.getUTCFullYear()%100,t,2)}function ENe(e,t){return vn(e.getUTCFullYear()%1e4,t,4)}function NNe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Rp(e):Rp.ceil(e),vn(e.getUTCFullYear()%1e4,t,4)}function ANe(){return"+0000"}function JB(){return"%"}function QB(e){return+e}function ZB(e){return Math.floor(+e/1e3)}var Pg,jY,PY;jNe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function jNe(e){return Pg=jEe(e),jY=Pg.format,Pg.parse,PY=Pg.utcFormat,Pg.utcParse,Pg}function PNe(e){return new Date(e)}function ONe(e){return e instanceof Date?+e:+new Date(+e)}function PP(e,t,r,n,s,a,i,o,l,u){var d=yP(),f=d.invert,g=d.domain,p=u(".%L"),x=u(":%S"),y=u("%I:%M"),v=u("%I %p"),T=u("%a %d"),_=u("%b %d"),b=u("%B"),E=u("%Y");function k(A){return(l(A)<A?p:o(A)<A?x:i(A)<A?y:a(A)<A?v:n(A)<A?s(A)<A?T:_:r(A)<A?b:E)(A)}return d.invert=function(A){return new Date(f(A))},d.domain=function(A){return arguments.length?g(Array.from(A,ONe)):g().map(PNe)},d.ticks=function(A){var P=g();return e(P[0],P[P.length-1],A??10)},d.tickFormat=function(A,P){return P==null?k:u(P)},d.nice=function(A){var P=g();return(!A||typeof A.range!="function")&&(A=t(P[0],P[P.length-1],A??10)),A?g(yY(P,A)):d},d.copy=function(){return G1(d,PP(e,t,r,n,s,a,i,o,l,u))},d}function FNe(){return Sl.apply(PP(NEe,AEe,Zu,AP,ES,V1,EP,TP,Oh,jY).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function RNe(){return Sl.apply(PP(CEe,EEe,ed,jP,NS,CS,NP,CP,Oh,PY).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function AS(){var e=0,t=1,r,n,s,a,i=Ki,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:i(s===0?.5:(f=(a(f)-r)*s,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=a(e=+e),n=a(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(g){var p,x;return arguments.length?([p,x]=g,i=f(p,x),u):[i(0),i(1)]}}return u.range=d(wm),u.rangeRound=d(mP),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,r=f(e),n=f(t),s=r===n?0:1/(n-r),u}}function Bf(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function OY(){var e=Lf(AS()(Ki));return e.copy=function(){return Bf(e,OY())},cd.apply(e,arguments)}function FY(){var e=wP(AS()).domain([1,10]);return e.copy=function(){return Bf(e,FY()).base(e.base())},cd.apply(e,arguments)}function RY(){var e=bP(AS());return e.copy=function(){return Bf(e,RY()).constant(e.constant())},cd.apply(e,arguments)}function OP(){var e=_P(AS());return e.copy=function(){return Bf(e,OP()).exponent(e.exponent())},cd.apply(e,arguments)}function DNe(){return OP.apply(null,arguments).exponent(.5)}function DY(){var e=[],t=Ki;function r(n){if(n!=null&&!isNaN(n=+n))return t((z1(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(pf),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,a)=>bCe(e,a/n))},r.copy=function(){return DY(t).domain(e)},cd.apply(r,arguments)}function jS(){var e=0,t=.5,r=1,n=1,s,a,i,o,l,u=Ki,d,f=!1,g;function p(y){return isNaN(y=+y)?g:(y=.5+((y=+d(y))-a)*(n*y<n*a?o:l),u(f?Math.max(0,Math.min(1,y)):y))}p.domain=function(y){return arguments.length?([e,t,r]=y,s=d(e=+e),a=d(t=+t),i=d(r=+r),o=s===a?0:.5/(a-s),l=a===i?0:.5/(i-a),n=a<s?-1:1,p):[e,t,r]},p.clamp=function(y){return arguments.length?(f=!!y,p):f},p.interpolator=function(y){return arguments.length?(u=y,p):u};function x(y){return function(v){var T,_,b;return arguments.length?([T,_,b]=v,u=qCe(y,[T,_,b]),p):[u(0),u(.5),u(1)]}}return p.range=x(wm),p.rangeRound=x(mP),p.unknown=function(y){return arguments.length?(g=y,p):g},function(y){return d=y,s=y(e),a=y(t),i=y(r),o=s===a?0:.5/(a-s),l=a===i?0:.5/(i-a),n=a<s?-1:1,p}}function IY(){var e=Lf(jS()(Ki));return e.copy=function(){return Bf(e,IY())},cd.apply(e,arguments)}function MY(){var e=wP(jS()).domain([.1,1,10]);return e.copy=function(){return Bf(e,MY()).base(e.base())},cd.apply(e,arguments)}function LY(){var e=bP(jS());return e.copy=function(){return Bf(e,LY()).constant(e.constant())},cd.apply(e,arguments)}function FP(){var e=_P(jS());return e.copy=function(){return Bf(e,FP()).exponent(e.exponent())},cd.apply(e,arguments)}function INe(){return FP.apply(null,arguments).exponent(.5)}const e$=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Iv,scaleDiverging:IY,scaleDivergingLog:MY,scaleDivergingPow:FP,scaleDivergingSqrt:INe,scaleDivergingSymlog:LY,scaleIdentity:mY,scaleImplicit:S3,scaleLinear:Z_,scaleLog:xY,scaleOrdinal:hP,scalePoint:qx,scalePow:SP,scaleQuantile:bY,scaleQuantize:_Y,scaleRadial:wY,scaleSequential:OY,scaleSequentialLog:FY,scaleSequentialPow:OP,scaleSequentialQuantile:DY,scaleSequentialSqrt:DNe,scaleSequentialSymlog:RY,scaleSqrt:mEe,scaleSymlog:vY,scaleThreshold:SY,scaleTime:FNe,scaleUtc:RNe,tickFormat:pY},Symbol.toStringTag,{value:"Module"}));var YN,t$;function BY(){if(t$)return YN;t$=1;var e=mm();function t(r,n,s){for(var a=-1,i=r.length;++a<i;){var o=r[a],l=n(o);if(l!=null&&(u===void 0?l===l&&!e(l):s(l,u)))var u=l,d=o}return d}return YN=t,YN}var JN,r$;function MNe(){if(r$)return JN;r$=1;function e(t,r){return t>r}return JN=e,JN}var QN,n$;function LNe(){if(n$)return QN;n$=1;var e=BY(),t=MNe(),r=xm();function n(s){return s&&s.length?e(s,r,t):void 0}return QN=n,QN}var BNe=LNe();const PS=kn(BNe);var ZN,s$;function $Ne(){if(s$)return ZN;s$=1;function e(t,r){return t<r}return ZN=e,ZN}var e4,a$;function UNe(){if(a$)return e4;a$=1;var e=BY(),t=$Ne(),r=xm();function n(s){return s&&s.length?e(s,r,t):void 0}return e4=n,e4}var WNe=UNe();const OS=kn(WNe);var t4,i$;function zNe(){if(i$)return t4;i$=1;var e=X6(),t=Mf(),r=qX(),n=xo();function s(a,i){var o=n(a)?e:r;return o(a,t(i,3))}return t4=s,t4}var r4,o$;function HNe(){if(o$)return r4;o$=1;var e=GX(),t=zNe();function r(n,s){return e(t(n,s),1)}return r4=r,r4}var GNe=HNe();const VNe=kn(GNe);var n4,l$;function qNe(){if(l$)return n4;l$=1;var e=lP();function t(r,n){return e(r,n)}return n4=t,n4}var KNe=qNe();const FS=kn(KNe);var bm=1e9,XNe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},DP,fs=!0,bl="[DecimalError] ",Gh=bl+"Invalid argument: ",RP=bl+"Exponent out of range: ",_m=Math.floor,Sh=Math.pow,YNe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Do,Fa=1e7,rs=7,$Y=9007199254740991,n2=_m($Y/rs),cr={};cr.absoluteValue=cr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};cr.comparedTo=cr.cmp=function(e){var t,r,n,s,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===s?0:n>s^a.s<0?1:-1};cr.decimalPlaces=cr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*rs;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};cr.dividedBy=cr.div=function(e){return Vu(this,new this.constructor(e))};cr.dividedToIntegerBy=cr.idiv=function(e){var t=this,r=t.constructor;return Vn(Vu(t,new r(e),0,1),r.precision)};cr.equals=cr.eq=function(e){return!this.cmp(e)};cr.exponent=function(){return oa(this)};cr.greaterThan=cr.gt=function(e){return this.cmp(e)>0};cr.greaterThanOrEqualTo=cr.gte=function(e){return this.cmp(e)>=0};cr.isInteger=cr.isint=function(){return this.e>this.d.length-2};cr.isNegative=cr.isneg=function(){return this.s<0};cr.isPositive=cr.ispos=function(){return this.s>0};cr.isZero=function(){return this.s===0};cr.lessThan=cr.lt=function(e){return this.cmp(e)<0};cr.lessThanOrEqualTo=cr.lte=function(e){return this.cmp(e)<1};cr.logarithm=cr.log=function(e){var t,r=this,n=r.constructor,s=n.precision,a=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Do))throw Error(bl+"NaN");if(r.s<1)throw Error(bl+(r.s?"NaN":"-Infinity"));return r.eq(Do)?new n(0):(fs=!1,t=Vu(Uv(r,a),Uv(e,a),a),fs=!0,Vn(t,s))};cr.minus=cr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?zY(t,e):UY(t,(e.s=-e.s,e))};cr.modulo=cr.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(bl+"NaN");return r.s?(fs=!1,t=Vu(r,e,0,1).times(e),fs=!0,r.minus(t)):Vn(new n(r),s)};cr.naturalExponential=cr.exp=function(){return WY(this)};cr.naturalLogarithm=cr.ln=function(){return Uv(this)};cr.negated=cr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};cr.plus=cr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?UY(t,e):zY(t,(e.s=-e.s,e))};cr.precision=cr.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Gh+e);if(t=oa(s)+1,n=s.d.length-1,r=n*rs+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};cr.squareRoot=cr.sqrt=function(){var e,t,r,n,s,a,i,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(bl+"NaN")}for(e=oa(o),fs=!1,s=Math.sqrt(+o),s==0||s==1/0?(t=$c(o.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=_m((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(s.toString()),r=l.precision,s=i=r+3;;)if(a=n,n=a.plus(Vu(o,a,i+2)).times(.5),$c(a.d).slice(0,i)===(t=$c(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),s==i&&t=="4999"){if(Vn(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if(t!="9999")break;i+=4}return fs=!0,Vn(n,r)};cr.times=cr.mul=function(e){var t,r,n,s,a,i,o,l,u,d=this,f=d.constructor,g=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,l=g.length,u=p.length,l<u&&(a=g,g=p,p=a,i=l,l=u,u=i),a=[],i=l+u,n=i;n--;)a.push(0);for(n=u;--n>=0;){for(t=0,s=l+n;s>n;)o=a[s]+p[n]*g[s-n-1]+t,a[s--]=o%Fa|0,t=o/Fa|0;a[s]=(a[s]+t)%Fa|0}for(;!a[--i];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,fs?Vn(e,f.precision):e};cr.toDecimalPlaces=cr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Xc(e,0,bm),t===void 0?t=n.rounding:Xc(t,0,8),Vn(r,e+oa(r)+1,t))};cr.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=g0(n,!0):(Xc(e,0,bm),t===void 0?t=s.rounding:Xc(t,0,8),n=Vn(new s(n),e+1,t),r=g0(n,!0,e+1)),r};cr.toFixed=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?g0(s):(Xc(e,0,bm),t===void 0?t=a.rounding:Xc(t,0,8),n=Vn(new a(s),e+oa(s)+1,t),r=g0(n.abs(),!1,e+oa(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};cr.toInteger=cr.toint=function(){var e=this,t=e.constructor;return Vn(new t(e),oa(e)+1,t.rounding)};cr.toNumber=function(){return+this};cr.toPower=cr.pow=function(e){var t,r,n,s,a,i,o=this,l=o.constructor,u=12,d=+(e=new l(e));if(!e.s)return new l(Do);if(o=new l(o),!o.s){if(e.s<1)throw Error(bl+"Infinity");return o}if(o.eq(Do))return o;if(n=l.precision,e.eq(Do))return Vn(o,n);if(t=e.e,r=e.d.length-1,i=t>=r,a=o.s,i){if((r=d<0?-d:d)<=$Y){for(s=new l(Do),t=Math.ceil(n/rs+4),fs=!1;r%2&&(s=s.times(o),u$(s.d,t)),r=_m(r/2),r!==0;)o=o.times(o),u$(o.d,t);return fs=!0,e.s<0?new l(Do).div(s):Vn(s,n)}}else if(a<0)throw Error(bl+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,fs=!1,s=e.times(Uv(o,n+u)),fs=!0,s=WY(s),s.s=a,s};cr.toPrecision=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?(r=oa(s),n=g0(s,r<=a.toExpNeg||r>=a.toExpPos)):(Xc(e,1,bm),t===void 0?t=a.rounding:Xc(t,0,8),s=Vn(new a(s),e,t),r=oa(s),n=g0(s,e<=r||r<=a.toExpNeg,e)),n};cr.toSignificantDigits=cr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Xc(e,1,bm),t===void 0?t=n.rounding:Xc(t,0,8)),Vn(new n(r),e,t)};cr.toString=cr.valueOf=cr.val=cr.toJSON=cr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=oa(e),r=e.constructor;return g0(e,t<=r.toExpNeg||t>=r.toExpPos)};function UY(e,t){var r,n,s,a,i,o,l,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),fs?Vn(t,f):t;if(l=e.d,u=t.d,i=e.e,s=t.e,l=l.slice(),a=i-s,a){for(a<0?(n=l,a=-a,o=u.length):(n=u,s=i,o=l.length),i=Math.ceil(f/rs),o=i>o?i+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=l.length,a=u.length,o-a<0&&(a=o,n=u,u=l,l=n),r=0;a;)r=(l[--a]=l[a]+u[a]+r)/Fa|0,l[a]%=Fa;for(r&&(l.unshift(r),++s),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=s,fs?Vn(t,f):t}function Xc(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Gh+e)}function $c(e){var t,r,n,s=e.length-1,a="",i=e[0];if(s>0){for(a+=i,t=1;t<s;t++)n=e[t]+"",r=rs-n.length,r&&(a+=Zd(r)),a+=n;i=e[t],n=i+"",r=rs-n.length,r&&(a+=Zd(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return a+i}var Vu=(function(){function e(n,s){var a,i=0,o=n.length;for(n=n.slice();o--;)a=n[o]*s+i,n[o]=a%Fa|0,i=a/Fa|0;return i&&n.unshift(i),n}function t(n,s,a,i){var o,l;if(a!=i)l=a>i?1:-1;else for(o=l=0;o<a;o++)if(n[o]!=s[o]){l=n[o]>s[o]?1:-1;break}return l}function r(n,s,a){for(var i=0;a--;)n[a]-=i,i=n[a]<s[a]?1:0,n[a]=i*Fa+n[a]-s[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,a,i){var o,l,u,d,f,g,p,x,y,v,T,_,b,E,k,A,P,j,O=n.constructor,R=n.s==s.s?1:-1,M=n.d,G=s.d;if(!n.s)return new O(n);if(!s.s)throw Error(bl+"Division by zero");for(l=n.e-s.e,P=G.length,k=M.length,p=new O(R),x=p.d=[],u=0;G[u]==(M[u]||0);)++u;if(G[u]>(M[u]||0)&&--l,a==null?_=a=O.precision:i?_=a+(oa(n)-oa(s))+1:_=a,_<0)return new O(0);if(_=_/rs+2|0,u=0,P==1)for(d=0,G=G[0],_++;(u<k||d)&&_--;u++)b=d*Fa+(M[u]||0),x[u]=b/G|0,d=b%G|0;else{for(d=Fa/(G[0]+1)|0,d>1&&(G=e(G,d),M=e(M,d),P=G.length,k=M.length),E=P,y=M.slice(0,P),v=y.length;v<P;)y[v++]=0;j=G.slice(),j.unshift(0),A=G[0],G[1]>=Fa/2&&++A;do d=0,o=t(G,y,P,v),o<0?(T=y[0],P!=v&&(T=T*Fa+(y[1]||0)),d=T/A|0,d>1?(d>=Fa&&(d=Fa-1),f=e(G,d),g=f.length,v=y.length,o=t(f,y,g,v),o==1&&(d--,r(f,P<g?j:G,g))):(d==0&&(o=d=1),f=G.slice()),g=f.length,g<v&&f.unshift(0),r(y,f,v),o==-1&&(v=y.length,o=t(G,y,P,v),o<1&&(d++,r(y,P<v?j:G,v))),v=y.length):o===0&&(d++,y=[0]),x[u++]=d,o&&y[0]?y[v++]=M[E]||0:(y=[M[E]],v=1);while((E++<k||y[0]!==void 0)&&_--)}return x[0]||x.shift(),p.e=l,Vn(p,i?a+oa(p)+1:a)}})();function WY(e,t){var r,n,s,a,i,o,l=0,u=0,d=e.constructor,f=d.precision;if(oa(e)>16)throw Error(RP+oa(e));if(!e.s)return new d(Do);for(fs=!1,o=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(Sh(2,u))/Math.LN10*2+5|0,o+=n,r=s=a=new d(Do),d.precision=o;;){if(s=Vn(s.times(e),o),r=r.times(++l),i=a.plus(Vu(s,r,o)),$c(i.d).slice(0,o)===$c(a.d).slice(0,o)){for(;u--;)a=Vn(a.times(a),o);return d.precision=f,t==null?(fs=!0,Vn(a,f)):a}a=i}}function oa(e){for(var t=e.e*rs,r=e.d[0];r>=10;r/=10)t++;return t}function s4(e,t,r){if(t>e.LN10.sd())throw fs=!0,r&&(e.precision=r),Error(bl+"LN10 precision limit exceeded");return Vn(new e(e.LN10),t)}function Zd(e){for(var t="";e--;)t+="0";return t}function Uv(e,t){var r,n,s,a,i,o,l,u,d,f=1,g=10,p=e,x=p.d,y=p.constructor,v=y.precision;if(p.s<1)throw Error(bl+(p.s?"NaN":"-Infinity"));if(p.eq(Do))return new y(0);if(t==null?(fs=!1,u=v):u=t,p.eq(10))return t==null&&(fs=!0),s4(y,u);if(u+=g,y.precision=u,r=$c(x),n=r.charAt(0),a=oa(p),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=$c(p.d),n=r.charAt(0),f++;a=oa(p),n>1?(p=new y("0."+r),a++):p=new y(n+"."+r.slice(1))}else return l=s4(y,u+2,v).times(a+""),p=Uv(new y(n+"."+r.slice(1)),u-g).plus(l),y.precision=v,t==null?(fs=!0,Vn(p,v)):p;for(o=i=p=Vu(p.minus(Do),p.plus(Do),u),d=Vn(p.times(p),u),s=3;;){if(i=Vn(i.times(d),u),l=o.plus(Vu(i,new y(s),u)),$c(l.d).slice(0,u)===$c(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(s4(y,u+2,v).times(a+""))),o=Vu(o,new y(f),u),y.precision=v,t==null?(fs=!0,Vn(o,v)):o;o=l,s+=2}}function c$(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=_m(r/rs),e.d=[],n=(r+1)%rs,r<0&&(n+=rs),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=rs;n<s;)e.d.push(+t.slice(n,n+=rs));t=t.slice(n),n=rs-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),fs&&(e.e>n2||e.e<-n2))throw Error(RP+r)}else e.s=0,e.e=0,e.d=[0];return e}function Vn(e,t,r){var n,s,a,i,o,l,u,d,f=e.d;for(i=1,a=f[0];a>=10;a/=10)i++;if(n=t-i,n<0)n+=rs,s=t,u=f[d=0];else{if(d=Math.ceil((n+1)/rs),a=f.length,d>=a)return e;for(u=a=f[d],i=1;a>=10;a/=10)i++;n%=rs,s=n-rs+i}if(r!==void 0&&(a=Sh(10,i-s-1),o=u/a%10|0,l=t<0||f[d+1]!==void 0||u%a,l=r<4?(o||l)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?s>0?u/Sh(10,i-s):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return l?(a=oa(e),f.length=1,t=t-a-1,f[0]=Sh(10,(rs-t%rs)%rs),e.e=_m(-t/rs)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,a=1,d--):(f.length=d+1,a=Sh(10,rs-n),f[d]=s>0?(u/Sh(10,i-s)%Sh(10,s)|0)*a:0),l)for(;;)if(d==0){(f[0]+=a)==Fa&&(f[0]=1,++e.e);break}else{if(f[d]+=a,f[d]!=Fa)break;f[d--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(fs&&(e.e>n2||e.e<-n2))throw Error(RP+oa(e));return e}function zY(e,t){var r,n,s,a,i,o,l,u,d,f,g=e.constructor,p=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),fs?Vn(t,p):t;if(l=e.d,f=t.d,n=t.e,u=e.e,l=l.slice(),i=u-n,i){for(d=i<0,d?(r=l,i=-i,o=f.length):(r=f,n=u,o=l.length),s=Math.max(Math.ceil(p/rs),o)+2,i>s&&(i=s,r.length=1),r.reverse(),s=i;s--;)r.push(0);r.reverse()}else{for(s=l.length,o=f.length,d=s<o,d&&(o=s),s=0;s<o;s++)if(l[s]!=f[s]){d=l[s]<f[s];break}i=0}for(d&&(r=l,l=f,f=r,t.s=-t.s),o=l.length,s=f.length-o;s>0;--s)l[o++]=0;for(s=f.length;s>i;){if(l[--s]<f[s]){for(a=s;a&&l[--a]===0;)l[a]=Fa-1;--l[a],l[s]+=Fa}l[s]-=f[s]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,fs?Vn(t,p):t):new g(0)}function g0(e,t,r){var n,s=oa(e),a=$c(e.d),i=a.length;return t?(r&&(n=r-i)>0?a=a.charAt(0)+"."+a.slice(1)+Zd(n):i>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+Zd(-s-1)+a,r&&(n=r-i)>0&&(a+=Zd(n))):s>=i?(a+=Zd(s+1-i),r&&(n=r-s-1)>0&&(a=a+"."+Zd(n))):((n=s+1)<i&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-i)>0&&(s+1===i&&(a+="."),a+=Zd(n))),e.s<0?"-"+a:a}function u$(e,t){if(e.length>t)return e.length=t,!0}function HY(e){var t,r,n;function s(a){var i=this;if(!(i instanceof s))return new s(a);if(i.constructor=s,a instanceof s){i.s=a.s,i.e=a.e,i.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Gh+a);if(a>0)i.s=1;else if(a<0)a=-a,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(a===~~a&&a<1e7){i.e=0,i.d=[a];return}return c$(i,a.toString())}else if(typeof a!="string")throw Error(Gh+a);if(a.charCodeAt(0)===45?(a=a.slice(1),i.s=-1):i.s=1,YNe.test(a))c$(i,a);else throw Error(Gh+a)}if(s.prototype=cr,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=HY,s.config=s.set=JNe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function JNe(e){if(!e||typeof e!="object")throw Error(bl+"Object expected");var t,r,n,s=["precision",1,bm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(_m(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Gh+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Gh+r+": "+n);return this}var DP=HY(XNe);Do=new DP(1);const Un=DP;function QNe(e){return r4e(e)||t4e(e)||e4e(e)||ZNe()}function ZNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e4e(e,t){if(e){if(typeof e=="string")return E3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E3(e,t)}}function t4e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function r4e(e){if(Array.isArray(e))return E3(e)}function E3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var n4e=function(t){return t},GY={},VY=function(t){return t===GY},d$=function(t){return function r(){return arguments.length===0||arguments.length===1&&VY(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},s4e=function e(t,r){return t===1?r:d$(function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];var i=s.filter(function(o){return o!==GY}).length;return i>=t?r.apply(void 0,s):e(t-i,d$(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];var d=s.map(function(f){return VY(f)?l.shift():f});return r.apply(void 0,QNe(d).concat(l))}))})},RS=function(t){return s4e(t.length,t)},N3=function(t,r){for(var n=[],s=t;s<r;++s)n[s-t]=s;return n},a4e=RS(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),i4e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return n4e;var s=r.reverse(),a=s[0],i=s.slice(1);return function(){return i.reduce(function(o,l){return l(o)},a.apply(void 0,arguments))}},A3=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},qY=function(t){var r=null,n=null;return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r&&a.every(function(o,l){return o===r[l]})||(r=a,n=t.apply(void 0,a)),n}};function o4e(e){var t;return e===0?t=1:t=Math.floor(new Un(e).abs().log(10).toNumber())+1,t}function l4e(e,t,r){for(var n=new Un(e),s=0,a=[];n.lt(t)&&s<1e5;)a.push(n.toNumber()),n=n.add(r),s++;return a}var c4e=RS(function(e,t,r){var n=+e,s=+t;return n+r*(s-n)}),u4e=RS(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),d4e=RS(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const DS={rangeStep:l4e,getDigitCount:o4e,interpolateNumber:c4e,uninterpolateNumber:u4e,uninterpolateTruncation:d4e};function j3(e){return g4e(e)||h4e(e)||KY(e)||f4e()}function f4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h4e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function g4e(e){if(Array.isArray(e))return P3(e)}function Wv(e,t){return y4e(e)||m4e(e,t)||KY(e,t)||p4e()}function p4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KY(e,t){if(e){if(typeof e=="string")return P3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P3(e,t)}}function P3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m4e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,s=!1,a=void 0;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done)&&(r.push(o.value),!(t&&r.length===t));n=!0);}catch(l){s=!0,a=l}finally{try{!n&&i.return!=null&&i.return()}finally{if(s)throw a}}return r}}function y4e(e){if(Array.isArray(e))return e}function XY(e){var t=Wv(e,2),r=t[0],n=t[1],s=r,a=n;return r>n&&(s=n,a=r),[s,a]}function YY(e,t,r){if(e.lte(0))return new Un(0);var n=DS.getDigitCount(e.toNumber()),s=new Un(10).pow(n),a=e.div(s),i=n!==1?.05:.1,o=new Un(Math.ceil(a.div(i).toNumber())).add(r).mul(i),l=o.mul(s);return t?l:new Un(Math.ceil(l))}function x4e(e,t,r){var n=1,s=new Un(e);if(!s.isint()&&r){var a=Math.abs(e);a<1?(n=new Un(10).pow(DS.getDigitCount(e)-1),s=new Un(Math.floor(s.div(n).toNumber())).mul(n)):a>1&&(s=new Un(Math.floor(e)))}else e===0?s=new Un(Math.floor((t-1)/2)):r||(s=new Un(Math.floor(e)));var i=Math.floor((t-1)/2),o=i4e(a4e(function(l){return s.add(new Un(l-i).mul(n)).toNumber()}),N3);return o(0,t)}function JY(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Un(0),tickMin:new Un(0),tickMax:new Un(0)};var a=YY(new Un(t).sub(e).div(r-1),n,s),i;e<=0&&t>=0?i=new Un(0):(i=new Un(e).add(t).div(2),i=i.sub(new Un(i).mod(a)));var o=Math.ceil(i.sub(e).div(a).toNumber()),l=Math.ceil(new Un(t).sub(i).div(a).toNumber()),u=o+l+1;return u>r?JY(e,t,r,n,s+1):(u<r&&(l=t>0?l+(r-u):l,o=t>0?o:o+(r-u)),{step:a,tickMin:i.sub(new Un(o).mul(a)),tickMax:i.add(new Un(l).mul(a))})}function v4e(e){var t=Wv(e,2),r=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(s,2),o=XY([r,n]),l=Wv(o,2),u=l[0],d=l[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(j3(N3(0,s-1).map(function(){return 1/0}))):[].concat(j3(N3(0,s-1).map(function(){return-1/0})),[d]);return r>n?A3(f):f}if(u===d)return x4e(u,s,a);var g=JY(u,d,i,a),p=g.step,x=g.tickMin,y=g.tickMax,v=DS.rangeStep(x,y.add(new Un(.1).mul(p)),p);return r>n?A3(v):v}function w4e(e,t){var r=Wv(e,2),n=r[0],s=r[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=XY([n,s]),o=Wv(i,2),l=o[0],u=o[1];if(l===-1/0||u===1/0)return[n,s];if(l===u)return[l];var d=Math.max(t,2),f=YY(new Un(u).sub(l).div(d-1),a,0),g=[].concat(j3(DS.rangeStep(new Un(l),new Un(u).sub(new Un(.99).mul(f)),f)),[u]);return n>s?A3(g):g}var b4e=qY(v4e),_4e=qY(w4e),S4e="Invariant failed";function p0(e,t){throw new Error(S4e)}var k4e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Dp(e){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dp(e)}function s2(){return s2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s2.apply(this,arguments)}function T4e(e,t){return A4e(e)||N4e(e,t)||E4e(e,t)||C4e()}function C4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E4e(e,t){if(e){if(typeof e=="string")return f$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f$(e,t)}}function f$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function N4e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,a,i,o=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){u=!0,s=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function A4e(e){if(Array.isArray(e))return e}function j4e(e,t){if(e==null)return{};var r=P4e(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function P4e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function O4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F4e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eJ(n.key),n)}}function R4e(e,t,r){return t&&F4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function D4e(e,t,r){return t=a2(t),I4e(e,QY()?Reflect.construct(t,r||[],a2(e).constructor):t.apply(e,r))}function I4e(e,t){if(t&&(Dp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M4e(e)}function M4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QY=function(){return!!e})()}function a2(e){return a2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},a2(e)}function L4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O3(e,t)}function O3(e,t){return O3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},O3(e,t)}function ZY(e,t,r){return t=eJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eJ(e){var t=B4e(e,"string");return Dp(t)=="symbol"?t:t+""}function B4e(e,t){if(Dp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var q1=(function(e){function t(){return O4e(this,t),D4e(this,t,arguments)}return L4e(t,e),R4e(t,[{key:"render",value:function(){var n=this.props,s=n.offset,a=n.layout,i=n.width,o=n.dataKey,l=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,g=j4e(n,k4e),p=cn(g,!1);this.props.direction==="x"&&d.type!=="number"&&p0();var x=l.map(function(y){var v=u(y,o),T=v.x,_=v.y,b=v.value,E=v.errorVal;if(!E)return null;var k=[],A,P;if(Array.isArray(E)){var j=T4e(E,2);A=j[0],P=j[1]}else A=P=E;if(a==="vertical"){var O=d.scale,R=_+s,M=R+i,G=R-i,K=O(b-A),re=O(b+P);k.push({x1:re,y1:M,x2:re,y2:G}),k.push({x1:K,y1:R,x2:re,y2:R}),k.push({x1:K,y1:M,x2:K,y2:G})}else if(a==="horizontal"){var Y=f.scale,ee=T+s,B=ee-i,z=ee+i,I=Y(b-A),W=Y(b+P);k.push({x1:B,y1:W,x2:z,y2:W}),k.push({x1:ee,y1:I,x2:ee,y2:W}),k.push({x1:B,y1:I,x2:z,y2:I})}return Be.createElement(Gs,s2({className:"recharts-errorBar",key:"bar-".concat(k.map(function(V){return"".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))},p),k.map(function(V){return Be.createElement("line",s2({},V,{key:"line-".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))}))});return Be.createElement(Gs,{className:"recharts-errorBars"},x)}}])})(Be.Component);ZY(q1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});ZY(q1,"displayName","ErrorBar");function zv(e){"@babel/helpers - typeof";return zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zv(e)}function h$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h$(Object(r),!0).forEach(function(n){$4e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $4e(e,t,r){return t=U4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U4e(e){var t=W4e(e,"string");return zv(t)=="symbol"?t:t+""}function W4e(e,t){if(zv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tJ=function(t){var r=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,a=t.legendContent,i=Ao(r,fp);if(!i)return null;var o=fp.defaultProps,l=o!==void 0?wh(wh({},o),i.props):{},u;return i.props&&i.props.payload?u=i.props&&i.props.payload:a==="children"?u=(n||[]).reduce(function(d,f){var g=f.item,p=f.props,x=p.sectors||p.data||[];return d.concat(x.map(function(y){return{type:i.props.iconType||g.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):u=(n||[]).map(function(d){var f=d.item,g=f.type.defaultProps,p=g!==void 0?wh(wh({},g),f.props):{},x=p.dataKey,y=p.name,v=p.legendType,T=p.hide;return{inactive:T,dataKey:x,type:l.iconType||v||"square",color:IP(f),value:y||x,payload:p}}),wh(wh(wh({},l),fp.getWithHeight(i,s)),{},{payload:u,item:i})};function Hv(e){"@babel/helpers - typeof";return Hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hv(e)}function g$(e){return V4e(e)||G4e(e)||H4e(e)||z4e()}function z4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H4e(e,t){if(e){if(typeof e=="string")return F3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F3(e,t)}}function G4e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function V4e(e){if(Array.isArray(e))return F3(e)}function F3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ps(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p$(Object(r),!0).forEach(function(n){gp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gp(e,t,r){return t=q4e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q4e(e){var t=K4e(e,"string");return Hv(t)=="symbol"?t:t+""}function K4e(e,t){if(Hv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lo(e,t,r){return sn(e)||sn(t)?r:ba(t)?ml(e,t,r):Jr(t)?t(e):r}function Kx(e,t,r,n){var s=VNe(e,function(o){return Lo(o,t)});if(r==="number"){var a=s.filter(function(o){return Jt(o)||parseFloat(o)});return a.length?[OS(a),PS(a)]:[1/0,-1/0]}var i=n?s.filter(function(o){return!sn(o)}):s;return i.map(function(o){return ba(o)||o instanceof Date?o:""})}var X4e=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,i=-1,o=(r=n?.length)!==null&&r!==void 0?r:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,u=0;u<o;u++){var d=u>0?s[u-1].coordinate:s[o-1].coordinate,f=s[u].coordinate,g=u>=o-1?s[0].coordinate:s[u+1].coordinate,p=void 0;if(Jl(f-d)!==Jl(g-f)){var x=[];if(Jl(g-f)===Jl(l[1]-l[0])){p=g;var y=f+l[1]-l[0];x[0]=Math.min(y,(y+d)/2),x[1]=Math.max(y,(y+d)/2)}else{p=d;var v=g+l[1]-l[0];x[0]=Math.min(f,(v+f)/2),x[1]=Math.max(f,(v+f)/2)}var T=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(t>T[0]&&t<=T[1]||t>=x[0]&&t<=x[1]){i=s[u].index;break}}else{var _=Math.min(d,g),b=Math.max(d,g);if(t>(_+f)/2&&t<=(b+f)/2){i=s[u].index;break}}}else for(var E=0;E<o;E++)if(E===0&&t<=(n[E].coordinate+n[E+1].coordinate)/2||E>0&&E<o-1&&t>(n[E].coordinate+n[E-1].coordinate)/2&&t<=(n[E].coordinate+n[E+1].coordinate)/2||E===o-1&&t>(n[E].coordinate+n[E-1].coordinate)/2){i=n[E].index;break}return i},IP=function(t){var r,n=t,s=n.type.displayName,a=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Ps(Ps({},t.type.defaultProps),t.props):t.props,i=a.stroke,o=a.fill,l;switch(s){case"Line":l=i;break;case"Area":case"Radar":l=i&&i!=="none"?i:o;break;default:l=o;break}return l},Y4e=function(t){var r=t.barSize,n=t.totalSize,s=t.stackGroups,a=s===void 0?{}:s;if(!a)return{};for(var i={},o=Object.keys(a),l=0,u=o.length;l<u;l++)for(var d=a[o[l]].stackGroups,f=Object.keys(d),g=0,p=f.length;g<p;g++){var x=d[f[g]],y=x.items,v=x.cateAxisId,T=y.filter(function(P){return Hu(P.type).indexOf("Bar")>=0});if(T&&T.length){var _=T[0].type.defaultProps,b=_!==void 0?Ps(Ps({},_),T[0].props):T[0].props,E=b.barSize,k=b[v];i[k]||(i[k]=[]);var A=sn(E)?r:E;i[k].push({item:T[0],stackList:T.slice(1),barSize:sn(A)?void 0:h0(A,n,0)})}}return i},J4e=function(t){var r=t.barGap,n=t.barCategoryGap,s=t.bandSize,a=t.sizeList,i=a===void 0?[]:a,o=t.maxBarSize,l=i.length;if(l<1)return null;var u=h0(r,s,0,!0),d,f=[];if(i[0].barSize===+i[0].barSize){var g=!1,p=s/l,x=i.reduce(function(E,k){return E+k.barSize||0},0);x+=(l-1)*u,x>=s&&(x-=(l-1)*u,u=0),x>=s&&p>0&&(g=!0,p*=.9,x=l*p);var y=(s-x)/2>>0,v={offset:y-u,size:0};d=i.reduce(function(E,k){var A={item:k.item,position:{offset:v.offset+v.size+u,size:g?p:k.barSize}},P=[].concat(g$(E),[A]);return v=P[P.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(j){P.push({item:j,position:v})}),P},f)}else{var T=h0(n,s,0,!0);s-2*T-(l-1)*u<=0&&(u=0);var _=(s-2*T-(l-1)*u)/l;_>1&&(_>>=0);var b=o===+o?Math.min(_,o):_;d=i.reduce(function(E,k,A){var P=[].concat(g$(E),[{item:k.item,position:{offset:T+(_+u)*A+(_-b)/2,size:b}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(j){P.push({item:j,position:P[P.length-1].position})}),P},f)}return d},Q4e=function(t,r,n,s){var a=n.children,i=n.width,o=n.margin,l=i-(o.left||0)-(o.right||0),u=tJ({children:a,legendWidth:l});if(u){var d=s||{},f=d.width,g=d.height,p=u.align,x=u.verticalAlign,y=u.layout;if((y==="vertical"||y==="horizontal"&&x==="middle")&&p!=="center"&&Jt(t[p]))return Ps(Ps({},t),{},gp({},p,t[p]+(f||0)));if((y==="horizontal"||y==="vertical"&&p==="center")&&x!=="middle"&&Jt(t[x]))return Ps(Ps({},t),{},gp({},x,t[x]+(g||0)))}return t},Z4e=function(t,r,n){return sn(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},rJ=function(t,r,n,s,a){var i=r.props.children,o=yl(i,q1).filter(function(u){return Z4e(s,a,u.props.direction)});if(o&&o.length){var l=o.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=Lo(d,n);if(sn(f))return u;var g=Array.isArray(f)?[OS(f),PS(f)]:[f,f],p=l.reduce(function(x,y){var v=Lo(d,y,0),T=g[0]-Math.abs(Array.isArray(v)?v[0]:v),_=g[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(T,x[0]),Math.max(_,x[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},eAe=function(t,r,n,s,a){var i=r.map(function(o){return rJ(t,o,n,a,s)}).filter(function(o){return!sn(o)});return i&&i.length?i.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},nJ=function(t,r,n,s,a){var i=r.map(function(l){var u=l.props.dataKey;return n==="number"&&u&&rJ(t,l,u,s)||Kx(t,u,n,a)});if(n==="number")return i.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var o={};return i.reduce(function(l,u){for(var d=0,f=u.length;d<f;d++)o[u[d]]||(o[u[d]]=!0,l.push(u[d]));return l},[])},sJ=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},aJ=function(t,r,n,s){if(s)return t.map(function(l){return l.coordinate});var a,i,o=t.map(function(l){return l.coordinate===r&&(a=!0),l.coordinate===n&&(i=!0),l.coordinate});return a||o.push(r),i||o.push(n),o},Bu=function(t,r,n){if(!t)return null;var s=t.scale,a=t.duplicateDomain,i=t.type,o=t.range,l=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(r||n)&&i==="category"&&s.bandwidth?s.bandwidth()/l:0;if(u=t.axisType==="angleAxis"&&o?.length>=2?Jl(o[0]-o[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var g=a?a.indexOf(f):f;return{coordinate:s(g)+u,value:f,offset:u}});return d.filter(function(f){return!$1(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,g){return{coordinate:s(f)+u,value:f,index:g,offset:u}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(f){return{coordinate:s(f)+u,value:f,offset:u}}):s.domain().map(function(f,g){return{coordinate:s(f)+u,value:a?a[f]:f,index:g,offset:u}})},a4=new WeakMap,Ab=function(t,r){if(typeof r!="function")return t;a4.has(t)||a4.set(t,new WeakMap);var n=a4.get(t);if(n.has(r))return n.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},tAe=function(t,r,n){var s=t.scale,a=t.type,i=t.layout,o=t.axisType;if(s==="auto")return i==="radial"&&o==="radiusAxis"?{scale:Iv(),realScaleType:"band"}:i==="radial"&&o==="angleAxis"?{scale:Z_(),realScaleType:"linear"}:a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:qx(),realScaleType:"point"}:a==="category"?{scale:Iv(),realScaleType:"band"}:{scale:Z_(),realScaleType:"linear"};if(f0(s)){var l="scale".concat(xS(s));return{scale:(e$[l]||qx)(),realScaleType:e$[l]?l:"point"}}return Jr(s)?{scale:s}:{scale:qx(),realScaleType:"point"}},m$=1e-4,rAe=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,s=t.range(),a=Math.min(s[0],s[1])-m$,i=Math.max(s[0],s[1])+m$,o=t(r[0]),l=t(r[n-1]);(o<a||o>i||l<a||l>i)&&t.domain([r[0],r[n-1]])}},nAe=function(t,r){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===r)return t[n].position;return null},sAe=function(t,r){if(!r||r.length!==2||!Jt(r[0])||!Jt(r[1]))return t;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),a=[t[0],t[1]];return(!Jt(t[0])||t[0]<n)&&(a[0]=n),(!Jt(t[1])||t[1]>s)&&(a[1]=s),a[0]>s&&(a[0]=s),a[1]<n&&(a[1]=n),a},aAe=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var a=0,i=0,o=0;o<r;++o){var l=$1(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=a,t[o][n][1]=a+l,a=t[o][n][1]):(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1])}},iAe=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var a=0,i=0;i<r;++i){var o=$1(t[i][n][1])?t[i][n][0]:t[i][n][1];o>=0?(t[i][n][0]=a,t[i][n][1]=a+o,a=t[i][n][1]):(t[i][n][0]=0,t[i][n][1]=0)}},oAe={sign:aAe,expand:z2e,none:Ep,silhouette:H2e,wiggle:G2e,positive:iAe},lAe=function(t,r,n){var s=r.map(function(o){return o.props.dataKey}),a=oAe[n],i=W2e().keys(s).value(function(o,l){return+Lo(o,l,0)}).order(c3).offset(a);return i(t)},cAe=function(t,r,n,s,a,i){if(!t)return null;var o=i?r.reverse():r,l={},u=o.reduce(function(f,g){var p,x=(p=g.type)!==null&&p!==void 0&&p.defaultProps?Ps(Ps({},g.type.defaultProps),g.props):g.props,y=x.stackId,v=x.hide;if(v)return f;var T=x[n],_=f[T]||{hasStack:!1,stackGroups:{}};if(ba(y)){var b=_.stackGroups[y]||{numericAxisId:n,cateAxisId:s,items:[]};b.items.push(g),_.hasStack=!0,_.stackGroups[y]=b}else _.stackGroups[U1("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[g]};return Ps(Ps({},f),{},gp({},T,_))},l),d={};return Object.keys(u).reduce(function(f,g){var p=u[g];if(p.hasStack){var x={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(y,v){var T=p.stackGroups[v];return Ps(Ps({},y),{},gp({},v,{numericAxisId:n,cateAxisId:s,items:T.items,stackedData:lAe(t,T.items,a)}))},x)}return Ps(Ps({},f),{},gp({},g,p))},d)},uAe=function(t,r){var n=r.realScaleType,s=r.type,a=r.tickCount,i=r.originalDomain,o=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&s==="number"&&i&&(i[0]==="auto"||i[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=b4e(u,a,o);return t.domain([OS(d),PS(d)]),{niceTicks:d}}if(a&&s==="number"){var f=t.domain(),g=_4e(f,a,o);return{niceTicks:g}}return null};function y$(e){var t=e.axis,r=e.ticks,n=e.bandSize,s=e.entry,a=e.index,i=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!sn(s[t.dataKey])){var o=F_(r,"value",s[t.dataKey]);if(o)return o.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var l=Lo(s,sn(i)?t.dataKey:i);return sn(l)?null:t.scale(l)}var x$=function(t){var r=t.axis,n=t.ticks,s=t.offset,a=t.bandSize,i=t.entry,o=t.index;if(r.type==="category")return n[o]?n[o].coordinate+s:null;var l=Lo(i,r.dataKey,r.domain[o]);return sn(l)?null:r.scale(l)-a/2+s},dAe=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return s<=0&&a>=0?0:a<0?a:s}return n[0]},fAe=function(t,r){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Ps(Ps({},t.type.defaultProps),t.props):t.props,a=s.stackId;if(ba(a)){var i=r[a];if(i){var o=i.items.indexOf(t);return o>=0?i.stackedData[o]:null}}return null},hAe=function(t){return t.reduce(function(r,n){return[OS(n.concat([r[0]]).filter(Jt)),PS(n.concat([r[1]]).filter(Jt))]},[1/0,-1/0])},iJ=function(t,r,n){return Object.keys(t).reduce(function(s,a){var i=t[a],o=i.stackedData,l=o.reduce(function(u,d){var f=hAe(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],s[0]),Math.max(l[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},v$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,w$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,R3=function(t,r,n){if(Jr(t))return t(r,n);if(!Array.isArray(t))return r;var s=[];if(Jt(t[0]))s[0]=n?t[0]:Math.min(t[0],r[0]);else if(v$.test(t[0])){var a=+v$.exec(t[0])[1];s[0]=r[0]-a}else Jr(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(Jt(t[1]))s[1]=n?t[1]:Math.max(t[1],r[1]);else if(w$.test(t[1])){var i=+w$.exec(t[1])[1];s[1]=r[1]+i}else Jr(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},i2=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&r&&r.length>=2){for(var a=uP(r,function(f){return f.coordinate}),i=1/0,o=1,l=a.length;o<l;o++){var u=a[o],d=a[o-1];i=Math.min((u.coordinate||0)-(d.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0},b$=function(t,r,n){return!t||!t.length||FS(t,ml(n,"type.defaultProps.domain"))?r:t},oJ=function(t,r){var n=t.type.defaultProps?Ps(Ps({},t.type.defaultProps),t.props):t.props,s=n.dataKey,a=n.name,i=n.unit,o=n.formatter,l=n.tooltipType,u=n.chartType,d=n.hide;return Ps(Ps({},cn(t,!1)),{},{dataKey:s,unit:i,formatter:o,name:a||s,color:IP(t),value:Lo(r,s),type:l,payload:r,chartType:u,hide:d})};function Gv(e){"@babel/helpers - typeof";return Gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gv(e)}function _$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function S$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_$(Object(r),!0).forEach(function(n){gAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gAe(e,t,r){return t=pAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pAe(e){var t=mAe(e,"string");return Gv(t)=="symbol"?t:t+""}function mAe(e,t){if(Gv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o2=Math.PI/180,yAe=function(t){return t*180/Math.PI},ii=function(t,r,n,s){return{x:t+Math.cos(-o2*s)*n,y:r+Math.sin(-o2*s)*n}},xAe=function(t,r){var n=t.x,s=t.y,a=r.x,i=r.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(s-i,2))},vAe=function(t,r){var n=t.x,s=t.y,a=r.cx,i=r.cy,o=xAe({x:n,y:s},{x:a,y:i});if(o<=0)return{radius:o};var l=(n-a)/o,u=Math.acos(l);return s>i&&(u=2*Math.PI-u),{radius:o,angle:yAe(u),angleInRadian:u}},wAe=function(t){var r=t.startAngle,n=t.endAngle,s=Math.floor(r/360),a=Math.floor(n/360),i=Math.min(s,a);return{startAngle:r-i*360,endAngle:n-i*360}},bAe=function(t,r){var n=r.startAngle,s=r.endAngle,a=Math.floor(n/360),i=Math.floor(s/360),o=Math.min(a,i);return t+o*360},k$=function(t,r){var n=t.x,s=t.y,a=vAe({x:n,y:s},r),i=a.radius,o=a.angle,l=r.innerRadius,u=r.outerRadius;if(i<l||i>u)return!1;if(i===0)return!0;var d=wAe(r),f=d.startAngle,g=d.endAngle,p=o,x;if(f<=g){for(;p>g;)p-=360;for(;p<f;)p+=360;x=p>=f&&p<=g}else{for(;p>f;)p-=360;for(;p<g;)p+=360;x=p>=g&&p<=f}return x?S$(S$({},r),{},{radius:i,angle:bAe(p,r)}):null};function Vv(e){"@babel/helpers - typeof";return Vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vv(e)}var _Ae=["offset"];function SAe(e){return EAe(e)||CAe(e)||TAe(e)||kAe()}function kAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TAe(e,t){if(e){if(typeof e=="string")return D3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D3(e,t)}}function CAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function EAe(e){if(Array.isArray(e))return D3(e)}function D3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function NAe(e,t){if(e==null)return{};var r=AAe(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function AAe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function T$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ma(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T$(Object(r),!0).forEach(function(n){jAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jAe(e,t,r){return t=PAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PAe(e){var t=OAe(e,"string");return Vv(t)=="symbol"?t:t+""}function OAe(e,t){if(Vv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qv(){return qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qv.apply(this,arguments)}var FAe=function(t){var r=t.value,n=t.formatter,s=sn(t.children)?r:t.children;return Jr(n)?n(s):s},RAe=function(t,r){var n=Jl(r-t),s=Math.min(Math.abs(r-t),360);return n*s},DAe=function(t,r,n){var s=t.position,a=t.viewBox,i=t.offset,o=t.className,l=a,u=l.cx,d=l.cy,f=l.innerRadius,g=l.outerRadius,p=l.startAngle,x=l.endAngle,y=l.clockWise,v=(f+g)/2,T=RAe(p,x),_=T>=0?1:-1,b,E;s==="insideStart"?(b=p+_*i,E=y):s==="insideEnd"?(b=x-_*i,E=!y):s==="end"&&(b=x+_*i,E=y),E=T<=0?E:!E;var k=ii(u,d,v,b),A=ii(u,d,v,b+(E?1:-1)*359),P="M".concat(k.x,",").concat(k.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(E?0:1,`,
    `).concat(A.x,",").concat(A.y),j=sn(t.id)?U1("recharts-radial-line-"):t.id;return Be.createElement("text",qv({},n,{dominantBaseline:"central",className:hn("recharts-radial-bar-label",o)}),Be.createElement("defs",null,Be.createElement("path",{id:j,d:P})),Be.createElement("textPath",{xlinkHref:"#".concat(j)},r))},IAe=function(t){var r=t.viewBox,n=t.offset,s=t.position,a=r,i=a.cx,o=a.cy,l=a.innerRadius,u=a.outerRadius,d=a.startAngle,f=a.endAngle,g=(d+f)/2;if(s==="outside"){var p=ii(i,o,u+n,g),x=p.x,y=p.y;return{x,y,textAnchor:x>=i?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:i,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:i,y:o,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:i,y:o,textAnchor:"middle",verticalAnchor:"end"};var v=(l+u)/2,T=ii(i,o,v,g),_=T.x,b=T.y;return{x:_,y:b,textAnchor:"middle",verticalAnchor:"middle"}},MAe=function(t){var r=t.viewBox,n=t.parentViewBox,s=t.offset,a=t.position,i=r,o=i.x,l=i.y,u=i.width,d=i.height,f=d>=0?1:-1,g=f*s,p=f>0?"end":"start",x=f>0?"start":"end",y=u>=0?1:-1,v=y*s,T=y>0?"end":"start",_=y>0?"start":"end";if(a==="top"){var b={x:o+u/2,y:l-f*s,textAnchor:"middle",verticalAnchor:p};return ma(ma({},b),n?{height:Math.max(l-n.y,0),width:u}:{})}if(a==="bottom"){var E={x:o+u/2,y:l+d+g,textAnchor:"middle",verticalAnchor:x};return ma(ma({},E),n?{height:Math.max(n.y+n.height-(l+d),0),width:u}:{})}if(a==="left"){var k={x:o-v,y:l+d/2,textAnchor:T,verticalAnchor:"middle"};return ma(ma({},k),n?{width:Math.max(k.x-n.x,0),height:d}:{})}if(a==="right"){var A={x:o+u+v,y:l+d/2,textAnchor:_,verticalAnchor:"middle"};return ma(ma({},A),n?{width:Math.max(n.x+n.width-A.x,0),height:d}:{})}var P=n?{width:u,height:d}:{};return a==="insideLeft"?ma({x:o+v,y:l+d/2,textAnchor:_,verticalAnchor:"middle"},P):a==="insideRight"?ma({x:o+u-v,y:l+d/2,textAnchor:T,verticalAnchor:"middle"},P):a==="insideTop"?ma({x:o+u/2,y:l+g,textAnchor:"middle",verticalAnchor:x},P):a==="insideBottom"?ma({x:o+u/2,y:l+d-g,textAnchor:"middle",verticalAnchor:p},P):a==="insideTopLeft"?ma({x:o+v,y:l+g,textAnchor:_,verticalAnchor:x},P):a==="insideTopRight"?ma({x:o+u-v,y:l+g,textAnchor:T,verticalAnchor:x},P):a==="insideBottomLeft"?ma({x:o+v,y:l+d-g,textAnchor:_,verticalAnchor:p},P):a==="insideBottomRight"?ma({x:o+u-v,y:l+d-g,textAnchor:T,verticalAnchor:p},P):ym(a)&&(Jt(a.x)||jh(a.x))&&(Jt(a.y)||jh(a.y))?ma({x:o+h0(a.x,u),y:l+h0(a.y,d),textAnchor:"end",verticalAnchor:"end"},P):ma({x:o+u/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},P)},LAe=function(t){return"cx"in t&&Jt(t.cx)};function bi(e){var t=e.offset,r=t===void 0?5:t,n=NAe(e,_Ae),s=ma({offset:r},n),a=s.viewBox,i=s.position,o=s.value,l=s.children,u=s.content,d=s.className,f=d===void 0?"":d,g=s.textBreakAll;if(!a||sn(o)&&sn(l)&&!C.isValidElement(u)&&!Jr(u))return null;if(C.isValidElement(u))return C.cloneElement(u,s);var p;if(Jr(u)){if(p=C.createElement(u,s),C.isValidElement(p))return p}else p=FAe(s);var x=LAe(a),y=cn(s,!0);if(x&&(i==="insideStart"||i==="insideEnd"||i==="end"))return DAe(s,p,y);var v=x?IAe(s):MAe(s);return Be.createElement(V_,qv({className:hn("recharts-label",f)},y,v,{breakAll:g}),p)}bi.displayName="Label";var lJ=function(t){var r=t.cx,n=t.cy,s=t.angle,a=t.startAngle,i=t.endAngle,o=t.r,l=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,g=t.y,p=t.top,x=t.left,y=t.width,v=t.height,T=t.clockWise,_=t.labelViewBox;if(_)return _;if(Jt(y)&&Jt(v)){if(Jt(f)&&Jt(g))return{x:f,y:g,width:y,height:v};if(Jt(p)&&Jt(x))return{x:p,y:x,width:y,height:v}}return Jt(f)&&Jt(g)?{x:f,y:g,width:0,height:0}:Jt(r)&&Jt(n)?{cx:r,cy:n,startAngle:a||s||0,endAngle:i||s||0,innerRadius:u||0,outerRadius:d||l||o||0,clockWise:T}:t.viewBox?t.viewBox:{}},BAe=function(t,r){return t?t===!0?Be.createElement(bi,{key:"label-implicit",viewBox:r}):ba(t)?Be.createElement(bi,{key:"label-implicit",viewBox:r,value:t}):C.isValidElement(t)?t.type===bi?C.cloneElement(t,{key:"label-implicit",viewBox:r}):Be.createElement(bi,{key:"label-implicit",content:t,viewBox:r}):Jr(t)?Be.createElement(bi,{key:"label-implicit",content:t,viewBox:r}):ym(t)?Be.createElement(bi,qv({viewBox:r},t,{key:"label-implicit"})):null:null},$Ae=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,a=lJ(t),i=yl(s,bi).map(function(l,u){return C.cloneElement(l,{viewBox:r||a,key:"label-".concat(u)})});if(!n)return i;var o=BAe(t.label,r||a);return[o].concat(SAe(i))};bi.parseViewBox=lJ;bi.renderCallByParent=$Ae;var i4,C$;function UAe(){if(C$)return i4;C$=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return i4=e,i4}var WAe=UAe();const zAe=kn(WAe);function Kv(e){"@babel/helpers - typeof";return Kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kv(e)}var HAe=["valueAccessor"],GAe=["data","dataKey","clockWise","id","textBreakAll"];function VAe(e){return YAe(e)||XAe(e)||KAe(e)||qAe()}function qAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KAe(e,t){if(e){if(typeof e=="string")return I3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I3(e,t)}}function XAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function YAe(e){if(Array.isArray(e))return I3(e)}function I3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l2(){return l2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l2.apply(this,arguments)}function E$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function N$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E$(Object(r),!0).forEach(function(n){JAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JAe(e,t,r){return t=QAe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QAe(e){var t=ZAe(e,"string");return Kv(t)=="symbol"?t:t+""}function ZAe(e,t){if(Kv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A$(e,t){if(e==null)return{};var r=e3e(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function e3e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var t3e=function(t){return Array.isArray(t.value)?zAe(t.value):t.value};function mf(e){var t=e.valueAccessor,r=t===void 0?t3e:t,n=A$(e,HAe),s=n.data,a=n.dataKey,i=n.clockWise,o=n.id,l=n.textBreakAll,u=A$(n,GAe);return!s||!s.length?null:Be.createElement(Gs,{className:"recharts-label-list"},s.map(function(d,f){var g=sn(a)?r(d,f):Lo(d&&d.payload,a),p=sn(o)?{}:{id:"".concat(o,"-").concat(f)};return Be.createElement(bi,l2({},cn(d,!0),u,p,{parentViewBox:d.parentViewBox,value:g,textBreakAll:l,viewBox:bi.parseViewBox(sn(i)?d:N$(N$({},d),{},{clockWise:i})),key:"label-".concat(f),index:f}))}))}mf.displayName="LabelList";function r3e(e,t){return e?e===!0?Be.createElement(mf,{key:"labelList-implicit",data:t}):Be.isValidElement(e)||Jr(e)?Be.createElement(mf,{key:"labelList-implicit",data:t,content:e}):ym(e)?Be.createElement(mf,l2({data:t},e,{key:"labelList-implicit"})):null:null}function n3e(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=yl(n,mf).map(function(i,o){return C.cloneElement(i,{data:t,key:"labelList-".concat(o)})});if(!r)return s;var a=r3e(e.label,t);return[a].concat(VAe(s))}mf.renderCallByParent=n3e;function Xv(e){"@babel/helpers - typeof";return Xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xv(e)}function M3(){return M3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M3.apply(this,arguments)}function j$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function P$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j$(Object(r),!0).forEach(function(n){s3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s3e(e,t,r){return t=a3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a3e(e){var t=i3e(e,"string");return Xv(t)=="symbol"?t:t+""}function i3e(e,t){if(Xv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o3e=function(t,r){var n=Jl(r-t),s=Math.min(Math.abs(r-t),359.999);return n*s},jb=function(t){var r=t.cx,n=t.cy,s=t.radius,a=t.angle,i=t.sign,o=t.isExternal,l=t.cornerRadius,u=t.cornerIsExternal,d=l*(o?1:-1)+s,f=Math.asin(l/d)/o2,g=u?a:a+i*f,p=ii(r,n,d,g),x=ii(r,n,s,g),y=u?a-i*f:a,v=ii(r,n,d*Math.cos(f*o2),y);return{center:p,circleTangency:x,lineTangency:v,theta:f}},cJ=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,a=t.outerRadius,i=t.startAngle,o=t.endAngle,l=o3e(i,o),u=i+l,d=ii(r,n,a,i),f=ii(r,n,a,u),g="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(s>0){var p=ii(r,n,s,i),x=ii(r,n,s,u);g+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else g+="L ".concat(r,",").concat(n," Z");return g},l3e=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,a=t.outerRadius,i=t.cornerRadius,o=t.forceCornerRadius,l=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=Jl(d-u),g=jb({cx:r,cy:n,radius:a,angle:u,sign:f,cornerRadius:i,cornerIsExternal:l}),p=g.circleTangency,x=g.lineTangency,y=g.theta,v=jb({cx:r,cy:n,radius:a,angle:d,sign:-f,cornerRadius:i,cornerIsExternal:l}),T=v.circleTangency,_=v.lineTangency,b=v.theta,E=l?Math.abs(u-d):Math.abs(u-d)-y-b;if(E<0)return o?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):cJ({cx:r,cy:n,innerRadius:s,outerRadius:a,startAngle:u,endAngle:d});var k="M ".concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(E>180),",").concat(+(f<0),",").concat(T.x,",").concat(T.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(_.x,",").concat(_.y,`
  `);if(s>0){var A=jb({cx:r,cy:n,radius:s,angle:u,sign:f,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),P=A.circleTangency,j=A.lineTangency,O=A.theta,R=jb({cx:r,cy:n,radius:s,angle:d,sign:-f,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),M=R.circleTangency,G=R.lineTangency,K=R.theta,re=l?Math.abs(u-d):Math.abs(u-d)-O-K;if(re<0&&i===0)return"".concat(k,"L").concat(r,",").concat(n,"Z");k+="L".concat(G.x,",").concat(G.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(M.x,",").concat(M.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(re>180),",").concat(+(f>0),",").concat(P.x,",").concat(P.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(j.x,",").concat(j.y,"Z")}else k+="L".concat(r,",").concat(n,"Z");return k},c3e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},uJ=function(t){var r=P$(P$({},c3e),t),n=r.cx,s=r.cy,a=r.innerRadius,i=r.outerRadius,o=r.cornerRadius,l=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,g=r.className;if(i<a||d===f)return null;var p=hn("recharts-sector",g),x=i-a,y=h0(o,x,0,!0),v;return y>0&&Math.abs(d-f)<360?v=l3e({cx:n,cy:s,innerRadius:a,outerRadius:i,cornerRadius:Math.min(y,x/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:f}):v=cJ({cx:n,cy:s,innerRadius:a,outerRadius:i,startAngle:d,endAngle:f}),Be.createElement("path",M3({},cn(r,!0),{className:p,d:v,role:"img"}))};function Yv(e){"@babel/helpers - typeof";return Yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yv(e)}function L3(){return L3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L3.apply(this,arguments)}function O$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function F$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O$(Object(r),!0).forEach(function(n){u3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u3e(e,t,r){return t=d3e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d3e(e){var t=f3e(e,"string");return Yv(t)=="symbol"?t:t+""}function f3e(e,t){if(Yv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R$={curveBasisClosed:P2e,curveBasisOpen:O2e,curveBasis:j2e,curveBumpX:m2e,curveBumpY:y2e,curveLinearClosed:F2e,curveLinear:wS,curveMonotoneX:R2e,curveMonotoneY:D2e,curveNatural:I2e,curveStep:M2e,curveStepAfter:B2e,curveStepBefore:L2e},Pb=function(t){return t.x===+t.x&&t.y===+t.y},px=function(t){return t.x},mx=function(t){return t.y},h3e=function(t,r){if(Jr(t))return t;var n="curve".concat(xS(t));return(n==="curveMonotone"||n==="curveBump")&&r?R$["".concat(n).concat(r==="vertical"?"Y":"X")]:R$[n]||wS},g3e=function(t){var r=t.type,n=r===void 0?"linear":r,s=t.points,a=s===void 0?[]:s,i=t.baseLine,o=t.layout,l=t.connectNulls,u=l===void 0?!1:l,d=h3e(n,o),f=u?a.filter(function(y){return Pb(y)}):a,g;if(Array.isArray(i)){var p=u?i.filter(function(y){return Pb(y)}):i,x=f.map(function(y,v){return F$(F$({},y),{},{base:p[v]})});return o==="vertical"?g=_b().y(mx).x1(px).x0(function(y){return y.base.x}):g=_b().x(px).y1(mx).y0(function(y){return y.base.y}),g.defined(Pb).curve(d),g(x)}return o==="vertical"&&Jt(i)?g=_b().y(mx).x1(px).x0(i):Jt(i)?g=_b().x(px).y1(mx).y0(i):g=gX().x(px).y(mx),g.defined(Pb).curve(d),g(f)},B3=function(t){var r=t.className,n=t.points,s=t.path,a=t.pathRef;if((!n||!n.length)&&!s)return null;var i=n&&n.length?g3e(t):s;return C.createElement("path",L3({},cn(t,!1),R_(t),{className:hn("recharts-curve",r),d:i,ref:a}))},o4={exports:{}},l4,D$;function p3e(){if(D$)return l4;D$=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return l4=e,l4}var c4,I$;function m3e(){if(I$)return c4;I$=1;var e=p3e();function t(){}function r(){}return r.resetWarningCache=t,c4=function(){function n(i,o,l,u,d,f){if(f!==e){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}n.isRequired=n;function s(){return n}var a={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return a.PropTypes=a,a},c4}var M$;function y3e(){return M$||(M$=1,o4.exports=m3e()()),o4.exports}var x3e=y3e();const En=kn(x3e);var v3e=Object.getOwnPropertyNames,w3e=Object.getOwnPropertySymbols,b3e=Object.prototype.hasOwnProperty;function L$(e,t){return function(n,s,a){return e(n,s,a)&&t(n,s,a)}}function Ob(e){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,s);var a=s.cache,i=a.get(r),o=a.get(n);if(i&&o)return i===n&&o===r;a.set(r,n),a.set(n,r);var l=e(r,n,s);return a.delete(r),a.delete(n),l}}function _3e(e){return e?.[Symbol.toStringTag]}function B$(e){return v3e(e).concat(w3e(e))}var S3e=Object.hasOwn||(function(e,t){return b3e.call(e,t)});function A0(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var k3e="__v",T3e="__o",C3e="_owner",$$=Object.getOwnPropertyDescriptor,U$=Object.keys;function E3e(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function N3e(e,t){return A0(e.getTime(),t.getTime())}function A3e(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function j3e(e,t){return e===t}function W$(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var s=new Array(n),a=e.entries(),i,o,l=0;(i=a.next())&&!i.done;){for(var u=t.entries(),d=!1,f=0;(o=u.next())&&!o.done;){if(s[f]){f++;continue}var g=i.value,p=o.value;if(r.equals(g[0],p[0],l,f,e,t,r)&&r.equals(g[1],p[1],g[0],p[0],e,t,r)){d=s[f]=!0;break}f++}if(!d)return!1;l++}return!0}var P3e=A0;function O3e(e,t,r){var n=U$(e),s=n.length;if(U$(t).length!==s)return!1;for(;s-- >0;)if(!dJ(e,t,r,n[s]))return!1;return!0}function yx(e,t,r){var n=B$(e),s=n.length;if(B$(t).length!==s)return!1;for(var a,i,o;s-- >0;)if(a=n[s],!dJ(e,t,r,a)||(i=$$(e,a),o=$$(t,a),(i||o)&&(!i||!o||i.configurable!==o.configurable||i.enumerable!==o.enumerable||i.writable!==o.writable)))return!1;return!0}function F3e(e,t){return A0(e.valueOf(),t.valueOf())}function R3e(e,t){return e.source===t.source&&e.flags===t.flags}function z$(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var s=new Array(n),a=e.values(),i,o;(i=a.next())&&!i.done;){for(var l=t.values(),u=!1,d=0;(o=l.next())&&!o.done;){if(!s[d]&&r.equals(i.value,o.value,i.value,o.value,e,t,r)){u=s[d]=!0;break}d++}if(!u)return!1}return!0}function D3e(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function I3e(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function dJ(e,t,r,n){return(n===C3e||n===T3e||n===k3e)&&(e.$$typeof||t.$$typeof)?!0:S3e(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var M3e="[object Arguments]",L3e="[object Boolean]",B3e="[object Date]",$3e="[object Error]",U3e="[object Map]",W3e="[object Number]",z3e="[object Object]",H3e="[object RegExp]",G3e="[object Set]",V3e="[object String]",q3e="[object URL]",K3e=Array.isArray,H$=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,G$=Object.assign,X3e=Object.prototype.toString.call.bind(Object.prototype.toString);function Y3e(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,s=e.areFunctionsEqual,a=e.areMapsEqual,i=e.areNumbersEqual,o=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,g=e.areUrlsEqual,p=e.unknownTagComparators;return function(y,v,T){if(y===v)return!0;if(y==null||v==null)return!1;var _=typeof y;if(_!==typeof v)return!1;if(_!=="object")return _==="number"?i(y,v,T):_==="function"?s(y,v,T):!1;var b=y.constructor;if(b!==v.constructor)return!1;if(b===Object)return o(y,v,T);if(K3e(y))return t(y,v,T);if(H$!=null&&H$(y))return f(y,v,T);if(b===Date)return r(y,v,T);if(b===RegExp)return u(y,v,T);if(b===Map)return a(y,v,T);if(b===Set)return d(y,v,T);var E=X3e(y);if(E===B3e)return r(y,v,T);if(E===H3e)return u(y,v,T);if(E===U3e)return a(y,v,T);if(E===G3e)return d(y,v,T);if(E===z3e)return typeof y.then!="function"&&typeof v.then!="function"&&o(y,v,T);if(E===q3e)return g(y,v,T);if(E===$3e)return n(y,v,T);if(E===M3e)return o(y,v,T);if(E===L3e||E===W3e||E===V3e)return l(y,v,T);if(p){var k=p[E];if(!k){var A=_3e(y);A&&(k=p[A])}if(k)return k(y,v,T)}return!1}}function J3e(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,s={areArraysEqual:n?yx:E3e,areDatesEqual:N3e,areErrorsEqual:A3e,areFunctionsEqual:j3e,areMapsEqual:n?L$(W$,yx):W$,areNumbersEqual:P3e,areObjectsEqual:n?yx:O3e,arePrimitiveWrappersEqual:F3e,areRegExpsEqual:R3e,areSetsEqual:n?L$(z$,yx):z$,areTypedArraysEqual:n?yx:D3e,areUrlsEqual:I3e,unknownTagComparators:void 0};if(r&&(s=G$({},s,r(s))),t){var a=Ob(s.areArraysEqual),i=Ob(s.areMapsEqual),o=Ob(s.areObjectsEqual),l=Ob(s.areSetsEqual);s=G$({},s,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return s}function Q3e(e){return function(t,r,n,s,a,i,o){return e(t,r,o)}}function Z3e(e){var t=e.circular,r=e.comparator,n=e.createState,s=e.equals,a=e.strict;if(n)return function(l,u){var d=n(),f=d.cache,g=f===void 0?t?new WeakMap:void 0:f,p=d.meta;return r(l,u,{cache:g,equals:s,meta:p,strict:a})};if(t)return function(l,u){return r(l,u,{cache:new WeakMap,equals:s,meta:void 0,strict:a})};var i={cache:void 0,equals:s,meta:void 0,strict:a};return function(l,u){return r(l,u,i)}}var eje=$f();$f({strict:!0});$f({circular:!0});$f({circular:!0,strict:!0});$f({createInternalComparator:function(){return A0}});$f({strict:!0,createInternalComparator:function(){return A0}});$f({circular:!0,createInternalComparator:function(){return A0}});$f({circular:!0,createInternalComparator:function(){return A0},strict:!0});function $f(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,s=e.createState,a=e.strict,i=a===void 0?!1:a,o=J3e(e),l=Y3e(o),u=n?n(l):Q3e(l);return Z3e({circular:r,comparator:l,createState:s,equals:u,strict:i})}function tje(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function V$(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(a){r<0&&(r=a),a-r>t?(e(a),r=-1):tje(s)};requestAnimationFrame(n)}function $3(e){"@babel/helpers - typeof";return $3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$3(e)}function rje(e){return ije(e)||aje(e)||sje(e)||nje()}function nje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sje(e,t){if(e){if(typeof e=="string")return q$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q$(e,t)}}function q$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function aje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ije(e){if(Array.isArray(e))return e}function oje(){var e={},t=function(){return null},r=!1,n=function s(a){if(!r){if(Array.isArray(a)){if(!a.length)return;var i=a,o=rje(i),l=o[0],u=o.slice(1);if(typeof l=="number"){V$(s.bind(null,u),l);return}s(l),V$(s.bind(null,u));return}$3(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){r=!0},start:function(a){r=!1,n(a)},subscribe:function(a){return t=a,function(){t=function(){return null}}}}}function Jv(e){"@babel/helpers - typeof";return Jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jv(e)}function K$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function X$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K$(Object(r),!0).forEach(function(n){fJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fJ(e,t,r){return t=lje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lje(e){var t=cje(e,"string");return Jv(t)==="symbol"?t:String(t)}function cje(e,t){if(Jv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Jv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uje=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,s){return n.filter(function(a){return s.includes(a)})})},dje=function(t){return t},fje=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Xx=function(t,r){return Object.keys(r).reduce(function(n,s){return X$(X$({},n),{},fJ({},s,t(s,r[s])))},{})},Y$=function(t,r,n){return t.map(function(s){return"".concat(fje(s)," ").concat(r,"ms ").concat(n)}).join(",")};function hje(e,t){return mje(e)||pje(e,t)||hJ(e,t)||gje()}function gje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pje(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,a,i,o=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){u=!0,s=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function mje(e){if(Array.isArray(e))return e}function yje(e){return wje(e)||vje(e)||hJ(e)||xje()}function xje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hJ(e,t){if(e){if(typeof e=="string")return U3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U3(e,t)}}function vje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wje(e){if(Array.isArray(e))return U3(e)}function U3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c2=1e-4,gJ=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},pJ=function(t,r){return t.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},J$=function(t,r){return function(n){var s=gJ(t,r);return pJ(s,n)}},bje=function(t,r){return function(n){var s=gJ(t,r),a=[].concat(yje(s.map(function(i,o){return i*o}).slice(1)),[0]);return pJ(a,n)}},Q$=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0],a=r[1],i=r[2],o=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,a=0,i=1,o=1;break;case"ease":s=.25,a=.1,i=.25,o=1;break;case"ease-in":s=.42,a=0,i=1,o=1;break;case"ease-out":s=.42,a=0,i=.58,o=1;break;case"ease-in-out":s=0,a=0,i=.58,o=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),d=hje(u,4);s=d[0],a=d[1],i=d[2],o=d[3]}}}var f=J$(s,i),g=J$(a,o),p=bje(s,i),x=function(T){return T>1?1:T<0?0:T},y=function(T){for(var _=T>1?1:T,b=_,E=0;E<8;++E){var k=f(b)-_,A=p(b);if(Math.abs(k-_)<c2||A<c2)return g(b);b=x(b-k/A)}return g(b)};return y.isStepper=!1,y},_je=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,s=t.damping,a=s===void 0?8:s,i=t.dt,o=i===void 0?17:i,l=function(d,f,g){var p=-(d-f)*n,x=g*a,y=g+(p-x)*o/1e3,v=g*o/1e3+d;return Math.abs(v-f)<c2&&Math.abs(y)<c2?[f,0]:[v,y]};return l.isStepper=!0,l.dt=o,l},Sje=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Q$(s);case"spring":return _je();default:if(s.split("(")[0]==="cubic-bezier")return Q$(s)}return typeof s=="function"?s:null};function Qv(e){"@babel/helpers - typeof";return Qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qv(e)}function Z$(e){return Cje(e)||Tje(e)||mJ(e)||kje()}function kje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Cje(e){if(Array.isArray(e))return z3(e)}function eU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Za(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eU(Object(r),!0).forEach(function(n){W3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W3(e,t,r){return t=Eje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Eje(e){var t=Nje(e,"string");return Qv(t)==="symbol"?t:String(t)}function Nje(e,t){if(Qv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Aje(e,t){return Oje(e)||Pje(e,t)||mJ(e,t)||jje()}function jje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mJ(e,t){if(e){if(typeof e=="string")return z3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z3(e,t)}}function z3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pje(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,a,i,o=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){u=!0,s=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function Oje(e){if(Array.isArray(e))return e}var u2=function(t,r,n){return t+(r-t)*n},H3=function(t){var r=t.from,n=t.to;return r!==n},Fje=function e(t,r,n){var s=Xx(function(a,i){if(H3(i)){var o=t(i.from,i.to,i.velocity),l=Aje(o,2),u=l[0],d=l[1];return Za(Za({},i),{},{from:u,velocity:d})}return i},r);return n<1?Xx(function(a,i){return H3(i)?Za(Za({},i),{},{velocity:u2(i.velocity,s[a].velocity,n),from:u2(i.from,s[a].from,n)}):i},r):e(t,s,n-1)};const Rje=(function(e,t,r,n,s){var a=uje(e,t),i=a.reduce(function(v,T){return Za(Za({},v),{},W3({},T,[e[T],t[T]]))},{}),o=a.reduce(function(v,T){return Za(Za({},v),{},W3({},T,{from:e[T],velocity:0,to:t[T]}))},{}),l=-1,u,d,f=function(){return null},g=function(){return Xx(function(T,_){return _.from},o)},p=function(){return!Object.values(o).filter(H3).length},x=function(T){u||(u=T);var _=T-u,b=_/r.dt;o=Fje(r,o,b),s(Za(Za(Za({},e),t),g())),u=T,p()||(l=requestAnimationFrame(f))},y=function(T){d||(d=T);var _=(T-d)/n,b=Xx(function(k,A){return u2.apply(void 0,Z$(A).concat([r(_)]))},i);if(s(Za(Za(Za({},e),t),b)),_<1)l=requestAnimationFrame(f);else{var E=Xx(function(k,A){return u2.apply(void 0,Z$(A).concat([r(1)]))},i);s(Za(Za(Za({},e),t),E))}};return f=r.isStepper?x:y,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}});function Ip(e){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(e)}var Dje=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Ije(e,t){if(e==null)return{};var r=Mje(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Mje(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,a;for(a=0;a<n.length;a++)s=n[a],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function u4(e){return Uje(e)||$je(e)||Bje(e)||Lje()}function Lje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bje(e,t){if(e){if(typeof e=="string")return G3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G3(e,t)}}function $je(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Uje(e){if(Array.isArray(e))return G3(e)}function G3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $l(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tU(Object(r),!0).forEach(function(n){Ex(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ex(e,t,r){return t=yJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zje(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yJ(n.key),n)}}function Hje(e,t,r){return t&&zje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yJ(e){var t=Gje(e,"string");return Ip(t)==="symbol"?t:String(t)}function Gje(e,t){if(Ip(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ip(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V3(e,t)}function V3(e,t){return V3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},V3(e,t)}function qje(e){var t=Kje();return function(){var n=d2(e),s;if(t){var a=d2(this).constructor;s=Reflect.construct(n,arguments,a)}else s=n.apply(this,arguments);return q3(this,s)}}function q3(e,t){if(t&&(Ip(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K3(e)}function K3(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kje(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d2(e){return d2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},d2(e)}var td=(function(e){Vje(r,e);var t=qje(r);function r(n,s){var a;Wje(this,r),a=t.call(this,n,s);var i=a.props,o=i.isActive,l=i.attributeName,u=i.from,d=i.to,f=i.steps,g=i.children,p=i.duration;if(a.handleStyleChange=a.handleStyleChange.bind(K3(a)),a.changeStyle=a.changeStyle.bind(K3(a)),!o||p<=0)return a.state={style:{}},typeof g=="function"&&(a.state={style:d}),q3(a);if(f&&f.length)a.state={style:f[0].style};else if(u){if(typeof g=="function")return a.state={style:u},q3(a);a.state={style:l?Ex({},l,u):u}}else a.state={style:{}};return a}return Hje(r,[{key:"componentDidMount",value:function(){var s=this.props,a=s.isActive,i=s.canBegin;this.mounted=!0,!(!a||!i)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var a=this.props,i=a.isActive,o=a.canBegin,l=a.attributeName,u=a.shouldReAnimate,d=a.to,f=a.from,g=this.state.style;if(o){if(!i){var p={style:l?Ex({},l,d):d};this.state&&g&&(l&&g[l]!==d||!l&&g!==d)&&this.setState(p);return}if(!(eje(s.to,d)&&s.canBegin&&s.isActive)){var x=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=x||u?f:s.to;if(this.state&&g){var v={style:l?Ex({},l,y):y};(l&&g[l]!==y||!l&&g!==y)&&this.setState(v)}this.runAnimation($l($l({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var a=this,i=s.from,o=s.to,l=s.duration,u=s.easing,d=s.begin,f=s.onAnimationEnd,g=s.onAnimationStart,p=Rje(i,o,Sje(u),l,this.changeStyle),x=function(){a.stopJSAnimation=p()};this.manager.start([g,d,x,l,f])}},{key:"runStepAnimation",value:function(s){var a=this,i=s.steps,o=s.begin,l=s.onAnimationStart,u=i[0],d=u.style,f=u.duration,g=f===void 0?0:f,p=function(y,v,T){if(T===0)return y;var _=v.duration,b=v.easing,E=b===void 0?"ease":b,k=v.style,A=v.properties,P=v.onAnimationEnd,j=T>0?i[T-1]:v,O=A||Object.keys(k);if(typeof E=="function"||E==="spring")return[].concat(u4(y),[a.runJSAnimation.bind(a,{from:j.style,to:k,duration:_,easing:E}),_]);var R=Y$(O,_,E),M=$l($l($l({},j.style),k),{},{transition:R});return[].concat(u4(y),[M,_,P]).filter(dje)};return this.manager.start([l].concat(u4(i.reduce(p,[d,Math.max(g,o)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=oje());var a=s.begin,i=s.duration,o=s.attributeName,l=s.to,u=s.easing,d=s.onAnimationStart,f=s.onAnimationEnd,g=s.steps,p=s.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(s);return}if(g.length>1){this.runStepAnimation(s);return}var y=o?Ex({},o,l):l,v=Y$(Object.keys(y),i,u);x.start([d,a,$l($l({},y),{},{transition:v}),i,f])}},{key:"render",value:function(){var s=this.props,a=s.children;s.begin;var i=s.duration;s.attributeName,s.easing;var o=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var l=Ije(s,Dje),u=C.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!o||u===0||i<=0)return a;var f=function(p){var x=p.props,y=x.style,v=y===void 0?{}:y,T=x.className,_=C.cloneElement(p,$l($l({},l),{},{style:$l($l({},v),d),className:T}));return _};return u===1?f(C.Children.only(a)):Be.createElement("div",null,C.Children.map(a,function(g){return f(g)}))}}]),r})(C.PureComponent);td.displayName="Animate";td.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};td.propTypes={from:En.oneOfType([En.object,En.string]),to:En.oneOfType([En.object,En.string]),attributeName:En.string,duration:En.number,begin:En.number,easing:En.oneOfType([En.string,En.func]),steps:En.arrayOf(En.shape({duration:En.number.isRequired,style:En.object.isRequired,easing:En.oneOfType([En.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),En.func]),properties:En.arrayOf("string"),onAnimationEnd:En.func})),children:En.oneOfType([En.node,En.func]),isActive:En.bool,canBegin:En.bool,onAnimationEnd:En.func,shouldReAnimate:En.bool,onAnimationStart:En.func,onAnimationReStart:En.func};function Zv(e){"@babel/helpers - typeof";return Zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zv(e)}function f2(){return f2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f2.apply(this,arguments)}function Xje(e,t){return Zje(e)||Qje(e,t)||Jje(e,t)||Yje()}function Yje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jje(e,t){if(e){if(typeof e=="string")return rU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rU(e,t)}}function rU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qje(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,a,i,o=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){u=!0,s=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function Zje(e){if(Array.isArray(e))return e}function nU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nU(Object(r),!0).forEach(function(n){e5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function e5e(e,t,r){return t=t5e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t5e(e){var t=r5e(e,"string");return Zv(t)=="symbol"?t:t+""}function r5e(e,t){if(Zv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Zv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aU=function(t,r,n,s,a){var i=Math.min(Math.abs(n)/2,Math.abs(s)/2),o=s>=0?1:-1,l=n>=0?1:-1,u=s>=0&&n>=0||s<0&&n<0?1:0,d;if(i>0&&a instanceof Array){for(var f=[0,0,0,0],g=0,p=4;g<p;g++)f[g]=a[g]>i?i:a[g];d="M".concat(t,",").concat(r+o*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+l*f[0],",").concat(r)),d+="L ".concat(t+n-l*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+o*f[1])),d+="L ".concat(t+n,",").concat(r+s-o*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-l*f[2],",").concat(r+s)),d+="L ".concat(t+l*f[3],",").concat(r+s),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+s-o*f[3])),d+="Z"}else if(i>0&&a===+a&&a>0){var x=Math.min(i,a);d="M ".concat(t,",").concat(r+o*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+l*x,",").concat(r,`
            L `).concat(t+n-l*x,",").concat(r,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+n,",").concat(r+o*x,`
            L `).concat(t+n,",").concat(r+s-o*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+n-l*x,",").concat(r+s,`
            L `).concat(t+l*x,",").concat(r+s,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t,",").concat(r+s-o*x," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return d},n5e=function(t,r){if(!t||!r)return!1;var n=t.x,s=t.y,a=r.x,i=r.y,o=r.width,l=r.height;if(Math.abs(o)>0&&Math.abs(l)>0){var u=Math.min(a,a+o),d=Math.max(a,a+o),f=Math.min(i,i+l),g=Math.max(i,i+l);return n>=u&&n<=d&&s>=f&&s<=g}return!1},s5e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},MP=function(t){var r=sU(sU({},s5e),t),n=C.useRef(),s=C.useState(-1),a=Xje(s,2),i=a[0],o=a[1];C.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var E=n.current.getTotalLength();E&&o(E)}catch{}},[]);var l=r.x,u=r.y,d=r.width,f=r.height,g=r.radius,p=r.className,x=r.animationEasing,y=r.animationDuration,v=r.animationBegin,T=r.isAnimationActive,_=r.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var b=hn("recharts-rectangle",p);return _?Be.createElement(td,{canBegin:i>0,from:{width:d,height:f,x:l,y:u},to:{width:d,height:f,x:l,y:u},duration:y,animationEasing:x,isActive:_},function(E){var k=E.width,A=E.height,P=E.x,j=E.y;return Be.createElement(td,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:y,isActive:T,easing:x},Be.createElement("path",f2({},cn(r,!0),{className:b,d:aU(P,j,k,A,g),ref:n})))}):Be.createElement("path",f2({},cn(r,!0),{className:b,d:aU(l,u,d,f,g)}))};function X3(){return X3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X3.apply(this,arguments)}var LP=function(t){var r=t.cx,n=t.cy,s=t.r,a=t.className,i=hn("recharts-dot",a);return r===+r&&n===+n&&s===+s?C.createElement("circle",X3({},cn(t,!1),R_(t),{className:i,cx:r,cy:n,r:s})):null};function e1(e){"@babel/helpers - typeof";return e1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e1(e)}var a5e=["x","y","top","left","width","height","className"];function Y3(){return Y3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Y3.apply(this,arguments)}function iU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function i5e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iU(Object(r),!0).forEach(function(n){o5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o5e(e,t,r){return t=l5e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l5e(e){var t=c5e(e,"string");return e1(t)=="symbol"?t:t+""}function c5e(e,t){if(e1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(e1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u5e(e,t){if(e==null)return{};var r=d5e(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function d5e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var f5e=function(t,r,n,s,a,i){return"M".concat(t,",").concat(a,"v").concat(s,"M").concat(i,",").concat(r,"h").concat(n)},h5e=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,a=s===void 0?0:s,i=t.top,o=i===void 0?0:i,l=t.left,u=l===void 0?0:l,d=t.width,f=d===void 0?0:d,g=t.height,p=g===void 0?0:g,x=t.className,y=u5e(t,a5e),v=i5e({x:n,y:a,top:o,left:u,width:f,height:p},y);return!Jt(n)||!Jt(a)||!Jt(f)||!Jt(p)||!Jt(o)||!Jt(u)?null:Be.createElement("path",Y3({},cn(v,!0),{className:hn("recharts-cross",x),d:f5e(n,a,f,p,o,u)}))},d4,oU;function g5e(){if(oU)return d4;oU=1;var e=MX(),t=e(Object.getPrototypeOf,Object);return d4=t,d4}var f4,lU;function p5e(){if(lU)return f4;lU=1;var e=od(),t=g5e(),r=ld(),n="[object Object]",s=Function.prototype,a=Object.prototype,i=s.toString,o=a.hasOwnProperty,l=i.call(Object);function u(d){if(!r(d)||e(d)!=n)return!1;var f=t(d);if(f===null)return!0;var g=o.call(f,"constructor")&&f.constructor;return typeof g=="function"&&g instanceof g&&i.call(g)==l}return f4=u,f4}var m5e=p5e();const y5e=kn(m5e);var h4,cU;function x5e(){if(cU)return h4;cU=1;var e=od(),t=ld(),r="[object Boolean]";function n(s){return s===!0||s===!1||t(s)&&e(s)==r}return h4=n,h4}var v5e=x5e();const w5e=kn(v5e);function t1(e){"@babel/helpers - typeof";return t1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t1(e)}function h2(){return h2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h2.apply(this,arguments)}function b5e(e,t){return T5e(e)||k5e(e,t)||S5e(e,t)||_5e()}function _5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S5e(e,t){if(e){if(typeof e=="string")return uU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uU(e,t)}}function uU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k5e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,a,i,o=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){u=!0,s=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function T5e(e){if(Array.isArray(e))return e}function dU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dU(Object(r),!0).forEach(function(n){C5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function C5e(e,t,r){return t=E5e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E5e(e){var t=N5e(e,"string");return t1(t)=="symbol"?t:t+""}function N5e(e,t){if(t1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(t1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hU=function(t,r,n,s,a){var i=n-s,o;return o="M ".concat(t,",").concat(r),o+="L ".concat(t+n,",").concat(r),o+="L ".concat(t+n-i/2,",").concat(r+a),o+="L ".concat(t+n-i/2-s,",").concat(r+a),o+="L ".concat(t,",").concat(r," Z"),o},A5e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},j5e=function(t){var r=fU(fU({},A5e),t),n=C.useRef(),s=C.useState(-1),a=b5e(s,2),i=a[0],o=a[1];C.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var b=n.current.getTotalLength();b&&o(b)}catch{}},[]);var l=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,g=r.height,p=r.className,x=r.animationEasing,y=r.animationDuration,v=r.animationBegin,T=r.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||f!==+f||g!==+g||d===0&&f===0||g===0)return null;var _=hn("recharts-trapezoid",p);return T?Be.createElement(td,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:g,x:l,y:u},to:{upperWidth:d,lowerWidth:f,height:g,x:l,y:u},duration:y,animationEasing:x,isActive:T},function(b){var E=b.upperWidth,k=b.lowerWidth,A=b.height,P=b.x,j=b.y;return Be.createElement(td,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:y,easing:x},Be.createElement("path",h2({},cn(r,!0),{className:_,d:hU(P,j,E,k,A),ref:n})))}):Be.createElement("g",null,Be.createElement("path",h2({},cn(r,!0),{className:_,d:hU(l,u,d,f,g)})))},P5e=["option","shapeType","propTransformer","activeClassName","isActive"];function r1(e){"@babel/helpers - typeof";return r1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r1(e)}function O5e(e,t){if(e==null)return{};var r=F5e(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function F5e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function gU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function g2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gU(Object(r),!0).forEach(function(n){R5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R5e(e,t,r){return t=D5e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D5e(e){var t=I5e(e,"string");return r1(t)=="symbol"?t:t+""}function I5e(e,t){if(r1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(r1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function M5e(e,t){return g2(g2({},t),e)}function L5e(e,t){return e==="symbols"}function pU(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return Be.createElement(MP,r);case"trapezoid":return Be.createElement(j5e,r);case"sector":return Be.createElement(uJ,r);case"symbols":if(L5e(t))return Be.createElement(rP,r);break;default:return null}}function B5e(e){return C.isValidElement(e)?e.props:e}function $5e(e){var t=e.option,r=e.shapeType,n=e.propTransformer,s=n===void 0?M5e:n,a=e.activeClassName,i=a===void 0?"recharts-active-shape":a,o=e.isActive,l=O5e(e,P5e),u;if(C.isValidElement(t))u=C.cloneElement(t,g2(g2({},l),B5e(t)));else if(Jr(t))u=t(l);else if(y5e(t)&&!w5e(t)){var d=s(t,l);u=Be.createElement(pU,{shapeType:r,elementProps:d})}else{var f=l;u=Be.createElement(pU,{shapeType:r,elementProps:f})}return o?Be.createElement(Gs,{className:i},u):u}function IS(e,t){return t!=null&&"trapezoids"in e.props}function MS(e,t){return t!=null&&"sectors"in e.props}function n1(e,t){return t!=null&&"points"in e.props}function U5e(e,t){var r,n,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,a=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&a}function W5e(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function z5e(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function H5e(e,t){var r;return IS(e,t)?r=U5e:MS(e,t)?r=W5e:n1(e,t)&&(r=z5e),r}function G5e(e,t){var r;return IS(e,t)?r="trapezoids":MS(e,t)?r="sectors":n1(e,t)&&(r="points"),r}function V5e(e,t){if(IS(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(MS(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return n1(e,t)?t.payload:{}}function q5e(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=G5e(r,t),a=V5e(r,t),i=n.filter(function(l,u){var d=FS(a,l),f=r.props[s].filter(function(x){var y=H5e(r,t);return y(x,t)}),g=r.props[s].indexOf(f[f.length-1]),p=u===g;return d&&p}),o=n.indexOf(i[i.length-1]);return o}var g4,mU;function K5e(){if(mU)return g4;mU=1;var e=Math.ceil,t=Math.max;function r(n,s,a,i){for(var o=-1,l=t(e((s-n)/(a||1)),0),u=Array(l);l--;)u[i?l:++o]=n,n+=a;return u}return g4=r,g4}var p4,yU;function xJ(){if(yU)return p4;yU=1;var e=ZX(),t=1/0,r=17976931348623157e292;function n(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var a=s<0?-1:1;return a*r}return s===s?s:0}return p4=n,p4}var m4,xU;function X5e(){if(xU)return m4;xU=1;var e=K5e(),t=kS(),r=xJ();function n(s){return function(a,i,o){return o&&typeof o!="number"&&t(a,i,o)&&(i=o=void 0),a=r(a),i===void 0?(i=a,a=0):i=r(i),o=o===void 0?a<i?1:-1:r(o),e(a,i,o,s)}}return m4=n,m4}var y4,vU;function Y5e(){if(vU)return y4;vU=1;var e=X5e(),t=e();return y4=t,y4}var J5e=Y5e();const p2=kn(J5e);function s1(e){"@babel/helpers - typeof";return s1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s1(e)}function wU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wU(Object(r),!0).forEach(function(n){vJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vJ(e,t,r){return t=Q5e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q5e(e){var t=Z5e(e,"string");return s1(t)=="symbol"?t:t+""}function Z5e(e,t){if(s1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(s1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e6e=["Webkit","Moz","O","ms"],t6e=function(t,r){var n=t.replace(/(\w)/,function(a){return a.toUpperCase()}),s=e6e.reduce(function(a,i){return bU(bU({},a),{},vJ({},i+n,r))},{});return s[t]=r,s};function Mp(e){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mp(e)}function m2(){return m2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m2.apply(this,arguments)}function _U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function x4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_U(Object(r),!0).forEach(function(n){No(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_U(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bJ(n.key),n)}}function n6e(e,t,r){return t&&SU(e.prototype,t),r&&SU(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s6e(e,t,r){return t=y2(t),a6e(e,wJ()?Reflect.construct(t,r||[],y2(e).constructor):t.apply(e,r))}function a6e(e,t){if(t&&(Mp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i6e(e)}function i6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wJ=function(){return!!e})()}function y2(e){return y2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},y2(e)}function o6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J3(e,t)}function J3(e,t){return J3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},J3(e,t)}function No(e,t,r){return t=bJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bJ(e){var t=l6e(e,"string");return Mp(t)=="symbol"?t:t+""}function l6e(e,t){if(Mp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var c6e=function(t){var r=t.data,n=t.startIndex,s=t.endIndex,a=t.x,i=t.width,o=t.travellerWidth;if(!r||!r.length)return{};var l=r.length,u=qx().domain(p2(0,l)).range([a,a+i-o]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(s),scale:u,scaleValues:d}},kU=function(t){return t.changedTouches&&!!t.changedTouches.length},Lp=(function(e){function t(r){var n;return r6e(this,t),n=s6e(this,t,[r]),No(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),No(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),No(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,a=s.endIndex,i=s.onDragEnd,o=s.startIndex;i?.({endIndex:a,startIndex:o})}),n.detachDragEndListener()}),No(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),No(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),No(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),No(n,"handleSlideDragStart",function(s){var a=kU(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return o6e(t,e),n6e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,a=n.endX,i=this.state.scaleValues,o=this.props,l=o.gap,u=o.data,d=u.length-1,f=Math.min(s,a),g=Math.max(s,a),p=t.getIndexInRange(i,f),x=t.getIndexInRange(i,g);return{startIndex:p-p%l,endIndex:x===d?d:x-x%l}}},{key:"getTextOfTick",value:function(n){var s=this.props,a=s.data,i=s.tickFormatter,o=s.dataKey,l=Lo(a[n],o,n);return Jr(i)?i(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,a=s.slideMoveStartX,i=s.startX,o=s.endX,l=this.props,u=l.x,d=l.width,f=l.travellerWidth,g=l.startIndex,p=l.endIndex,x=l.onChange,y=n.pageX-a;y>0?y=Math.min(y,u+d-f-o,u+d-f-i):y<0&&(y=Math.max(y,u-i,u-o));var v=this.getIndex({startX:i+y,endX:o+y});(v.startIndex!==g||v.endIndex!==p)&&x&&x(v),this.setState({startX:i+y,endX:o+y,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var a=kU(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,a=s.brushMoveStartX,i=s.movingTravellerId,o=s.endX,l=s.startX,u=this.state[i],d=this.props,f=d.x,g=d.width,p=d.travellerWidth,x=d.onChange,y=d.gap,v=d.data,T={startX:this.state.startX,endX:this.state.endX},_=n.pageX-a;_>0?_=Math.min(_,f+g-p-u):_<0&&(_=Math.max(_,f-u)),T[i]=u+_;var b=this.getIndex(T),E=b.startIndex,k=b.endIndex,A=function(){var j=v.length-1;return i==="startX"&&(o>l?E%y===0:k%y===0)||o<l&&k===j||i==="endX"&&(o>l?k%y===0:E%y===0)||o>l&&k===j};this.setState(No(No({},i,u+_),"brushMoveStartX",n.pageX),function(){x&&A()&&x(b)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var a=this,i=this.state,o=i.scaleValues,l=i.startX,u=i.endX,d=this.state[s],f=o.indexOf(d);if(f!==-1){var g=f+n;if(!(g===-1||g>=o.length)){var p=o[g];s==="startX"&&p>=u||s==="endX"&&p<=l||this.setState(No({},s,p),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,a=n.y,i=n.width,o=n.height,l=n.fill,u=n.stroke;return Be.createElement("rect",{stroke:u,fill:l,x:s,y:a,width:i,height:o})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,a=n.y,i=n.width,o=n.height,l=n.data,u=n.children,d=n.padding,f=C.Children.only(u);return f?Be.cloneElement(f,{x:s,y:a,width:i,height:o,margin:d,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,s){var a,i,o=this,l=this.props,u=l.y,d=l.travellerWidth,f=l.height,g=l.traveller,p=l.ariaLabel,x=l.data,y=l.startIndex,v=l.endIndex,T=Math.max(n,this.props.x),_=x4(x4({},cn(this.props,!1)),{},{x:T,y:u,width:d,height:f}),b=p||"Min value: ".concat((a=x[y])===null||a===void 0?void 0:a.name,", Max value: ").concat((i=x[v])===null||i===void 0?void 0:i.name);return Be.createElement(Gs,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),o.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,s))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(g,_))}},{key:"renderSlide",value:function(n,s){var a=this.props,i=a.y,o=a.height,l=a.stroke,u=a.travellerWidth,d=Math.min(n,s)+u,f=Math.max(Math.abs(s-n)-u,0);return Be.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:d,y:i,width:f,height:o})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,a=n.endIndex,i=n.y,o=n.height,l=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,g=d.endX,p=5,x={pointerEvents:"none",fill:u};return Be.createElement(Gs,{className:"recharts-brush-texts"},Be.createElement(V_,m2({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,g)-p,y:i+o/2},x),this.getTextOfTick(s)),Be.createElement(V_,m2({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,g)+l+p,y:i+o/2},x),this.getTextOfTick(a)))}},{key:"render",value:function(){var n=this.props,s=n.data,a=n.className,i=n.children,o=n.x,l=n.y,u=n.width,d=n.height,f=n.alwaysShowText,g=this.state,p=g.startX,x=g.endX,y=g.isTextActive,v=g.isSlideMoving,T=g.isTravellerMoving,_=g.isTravellerFocused;if(!s||!s.length||!Jt(o)||!Jt(l)||!Jt(u)||!Jt(d)||u<=0||d<=0)return null;var b=hn("recharts-brush",a),E=Be.Children.count(i)===1,k=t6e("userSelect","none");return Be.createElement(Gs,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),E&&this.renderPanorama(),this.renderSlide(p,x),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(x,"endX"),(y||v||T||_||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,a=n.y,i=n.width,o=n.height,l=n.stroke,u=Math.floor(a+o/2)-1;return Be.createElement(Be.Fragment,null,Be.createElement("rect",{x:s,y:a,width:i,height:o,fill:l,stroke:"none"}),Be.createElement("line",{x1:s+1,y1:u,x2:s+i-1,y2:u,fill:"none",stroke:"#fff"}),Be.createElement("line",{x1:s+1,y1:u+2,x2:s+i-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var a;return Be.isValidElement(n)?a=Be.cloneElement(n,s):Jr(n)?a=n(s):a=t.renderDefaultTraveller(s),a}},{key:"getDerivedStateFromProps",value:function(n,s){var a=n.data,i=n.width,o=n.x,l=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(a!==s.prevData||u!==s.prevUpdateId)return x4({prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:i},a&&a.length?c6e({data:a,width:i,x:o,travellerWidth:l,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(s.scale&&(i!==s.prevWidth||o!==s.prevX||l!==s.prevTravellerWidth)){s.scale.range([o,o+i-l]);var g=s.scale.domain().map(function(p){return s.scale(p)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:i,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:g}}return null}},{key:"getIndexInRange",value:function(n,s){for(var a=n.length,i=0,o=a-1;o-i>1;){var l=Math.floor((i+o)/2);n[l]>s?o=l:i=l}return s>=n[o]?o:i}}])})(C.PureComponent);No(Lp,"displayName","Brush");No(Lp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var v4,TU;function u6e(){if(TU)return v4;TU=1;var e=cP();function t(r,n){var s;return e(r,function(a,i,o){return s=n(a,i,o),!s}),!!s}return v4=t,v4}var w4,CU;function d6e(){if(CU)return w4;CU=1;var e=jX(),t=Mf(),r=u6e(),n=xo(),s=kS();function a(i,o,l){var u=n(i)?e:r;return l&&s(i,o,l)&&(o=void 0),u(i,t(o,3))}return w4=a,w4}var f6e=d6e();const h6e=kn(f6e);var Vc=function(t,r){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===r},b4,EU;function g6e(){if(EU)return b4;EU=1;var e=KX();function t(r,n,s){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[n]=s}return b4=t,b4}var _4,NU;function p6e(){if(NU)return _4;NU=1;var e=g6e(),t=VX(),r=Mf();function n(s,a){var i={};return a=r(a,3),t(s,function(o,l,u){e(i,l,a(o,l,u))}),i}return _4=n,_4}var m6e=p6e();const y6e=kn(m6e);var S4,AU;function x6e(){if(AU)return S4;AU=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(!r(t[n],n,t))return!1;return!0}return S4=e,S4}var k4,jU;function v6e(){if(jU)return k4;jU=1;var e=cP();function t(r,n){var s=!0;return e(r,function(a,i,o){return s=!!n(a,i,o),s}),s}return k4=t,k4}var T4,PU;function w6e(){if(PU)return T4;PU=1;var e=x6e(),t=v6e(),r=Mf(),n=xo(),s=kS();function a(i,o,l){var u=n(i)?e:t;return l&&s(i,o,l)&&(o=void 0),u(i,r(o,3))}return T4=a,T4}var b6e=w6e();const _J=kn(b6e);var _6e=["x","y"];function a1(e){"@babel/helpers - typeof";return a1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a1(e)}function Q3(){return Q3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q3.apply(this,arguments)}function OU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OU(Object(r),!0).forEach(function(n){S6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S6e(e,t,r){return t=k6e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k6e(e){var t=T6e(e,"string");return a1(t)=="symbol"?t:t+""}function T6e(e,t){if(a1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(a1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C6e(e,t){if(e==null)return{};var r=E6e(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function E6e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function N6e(e,t){var r=e.x,n=e.y,s=C6e(e,_6e),a="".concat(r),i=parseInt(a,10),o="".concat(n),l=parseInt(o,10),u="".concat(t.height||s.height),d=parseInt(u,10),f="".concat(t.width||s.width),g=parseInt(f,10);return xx(xx(xx(xx(xx({},t),s),i?{x:i}:{}),l?{y:l}:{}),{},{height:d,width:g,name:t.name,radius:t.radius})}function FU(e){return Be.createElement($5e,Q3({shapeType:"rectangle",propTransformer:N6e,activeClassName:"recharts-active-bar"},e))}var A6e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var a=Jt(n)||M_e(n);return a?t(n,s):(a||p0(),r)}},j6e=["value","background"],SJ;function Bp(e){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bp(e)}function P6e(e,t){if(e==null)return{};var r=O6e(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function O6e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function x2(){return x2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x2.apply(this,arguments)}function RU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function na(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RU(Object(r),!0).forEach(function(n){cf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TJ(n.key),n)}}function R6e(e,t,r){return t&&DU(e.prototype,t),r&&DU(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function D6e(e,t,r){return t=v2(t),I6e(e,kJ()?Reflect.construct(t,r||[],v2(e).constructor):t.apply(e,r))}function I6e(e,t){if(t&&(Bp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M6e(e)}function M6e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kJ=function(){return!!e})()}function v2(e){return v2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},v2(e)}function L6e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z3(e,t)}function Z3(e,t){return Z3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Z3(e,t)}function cf(e,t,r){return t=TJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TJ(e){var t=B6e(e,"string");return Bp(t)=="symbol"?t:t+""}function B6e(e,t){if(Bp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var K1=(function(e){function t(){var r;F6e(this,t);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=D6e(this,t,[].concat(s)),cf(r,"state",{isAnimationFinished:!1}),cf(r,"id",U1("recharts-bar-")),cf(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),i&&i()}),cf(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),i&&i()}),r}return L6e(t,e),R6e(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,a=this.props,i=a.shape,o=a.dataKey,l=a.activeIndex,u=a.activeBar,d=cn(this.props,!1);return n&&n.map(function(f,g){var p=g===l,x=p?u:i,y=na(na(na({},d),f),{},{isActive:p,option:x,index:g,dataKey:o,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return Be.createElement(Gs,x2({className:"recharts-bar-rectangle"},D_(s.props,f,g),{key:"rectangle-".concat(f?.x,"-").concat(f?.y,"-").concat(f?.value,"-").concat(g)}),Be.createElement(FU,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,a=s.data,i=s.layout,o=s.isAnimationActive,l=s.animationBegin,u=s.animationDuration,d=s.animationEasing,f=s.animationId,g=this.state.prevData;return Be.createElement(td,{begin:l,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var x=p.t,y=a.map(function(v,T){var _=g&&g[T];if(_){var b=Gl(_.x,v.x),E=Gl(_.y,v.y),k=Gl(_.width,v.width),A=Gl(_.height,v.height);return na(na({},v),{},{x:b(x),y:E(x),width:k(x),height:A(x)})}if(i==="horizontal"){var P=Gl(0,v.height),j=P(x);return na(na({},v),{},{y:v.y+v.height-j,height:j})}var O=Gl(0,v.width),R=O(x);return na(na({},v),{},{width:R})});return Be.createElement(Gs,null,n.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,a=n.isAnimationActive,i=this.state.prevData;return a&&s&&s.length&&(!i||!FS(i,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,a=s.data,i=s.dataKey,o=s.activeIndex,l=cn(this.props.background,!1);return a.map(function(u,d){u.value;var f=u.background,g=P6e(u,j6e);if(!f)return null;var p=na(na(na(na(na({},g),{},{fill:"#eee"},f),l),D_(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:i,index:d,className:"recharts-bar-background-rectangle"});return Be.createElement(FU,x2({key:"background-bar-".concat(d),option:n.props.background,isActive:d===o},p))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.data,o=a.xAxis,l=a.yAxis,u=a.layout,d=a.children,f=yl(d,q1);if(!f)return null;var g=u==="vertical"?i[0].height/2:i[0].width/2,p=function(v,T){var _=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:_,errorVal:Lo(v,T)}},x={clipPath:n?"url(#clipPath-".concat(s,")"):null};return Be.createElement(Gs,x,f.map(function(y){return Be.cloneElement(y,{key:"error-bar-".concat(s,"-").concat(y.props.dataKey),data:i,xAxis:o,yAxis:l,layout:u,offset:g,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,a=n.data,i=n.className,o=n.xAxis,l=n.yAxis,u=n.left,d=n.top,f=n.width,g=n.height,p=n.isAnimationActive,x=n.background,y=n.id;if(s||!a||!a.length)return null;var v=this.state.isAnimationFinished,T=hn("recharts-bar",i),_=o&&o.allowDataOverflow,b=l&&l.allowDataOverflow,E=_||b,k=sn(y)?this.id:y;return Be.createElement(Gs,{className:T},_||b?Be.createElement("defs",null,Be.createElement("clipPath",{id:"clipPath-".concat(k)},Be.createElement("rect",{x:_?u:u-f/2,y:b?d:d-g/2,width:_?f:f*2,height:b?g:g*2}))):null,Be.createElement(Gs,{className:"recharts-bar-rectangles",clipPath:E?"url(#clipPath-".concat(k,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(E,k),(!p||v)&&mf.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])})(C.PureComponent);SJ=K1;cf(K1,"displayName","Bar");cf(K1,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!vm.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});cf(K1,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,s=e.bandSize,a=e.xAxis,i=e.yAxis,o=e.xAxisTicks,l=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,g=e.offset,p=nAe(n,r);if(!p)return null;var x=t.layout,y=r.type.defaultProps,v=y!==void 0?na(na({},y),r.props):r.props,T=v.dataKey,_=v.children,b=v.minPointSize,E=x==="horizontal"?i:a,k=u?E.scale.domain():null,A=dAe({numericAxis:E}),P=yl(_,tY),j=f.map(function(O,R){var M,G,K,re,Y,ee;u?M=sAe(u[d+R],k):(M=Lo(O,T),Array.isArray(M)||(M=[A,M]));var B=A6e(b,SJ.defaultProps.minPointSize)(M[1],R);if(x==="horizontal"){var z,I=[i.scale(M[0]),i.scale(M[1])],W=I[0],V=I[1];G=x$({axis:a,ticks:o,bandSize:s,offset:p.offset,entry:O,index:R}),K=(z=V??W)!==null&&z!==void 0?z:void 0,re=p.size;var L=W-V;if(Y=Number.isNaN(L)?0:L,ee={x:G,y:i.y,width:re,height:i.height},Math.abs(B)>0&&Math.abs(Y)<Math.abs(B)){var H=Jl(Y||B)*(Math.abs(B)-Math.abs(Y));K-=H,Y+=H}}else{var J=[a.scale(M[0]),a.scale(M[1])],Q=J[0],ne=J[1];if(G=Q,K=x$({axis:i,ticks:l,bandSize:s,offset:p.offset,entry:O,index:R}),re=ne-Q,Y=p.size,ee={x:a.x,y:K,width:a.width,height:Y},Math.abs(B)>0&&Math.abs(re)<Math.abs(B)){var Z=Jl(re||B)*(Math.abs(B)-Math.abs(re));re+=Z}}return na(na(na({},O),{},{x:G,y:K,width:re,height:Y,value:u?M:M[1],payload:O,background:ee},P&&P[R]&&P[R].props),{},{tooltipPayload:[oJ(r,O)],tooltipPosition:{x:G+re/2,y:K+Y/2}})});return na({data:j,layout:x},g)});function i1(e){"@babel/helpers - typeof";return i1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i1(e)}function $6e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CJ(n.key),n)}}function U6e(e,t,r){return t&&IU(e.prototype,t),r&&IU(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function MU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MU(Object(r),!0).forEach(function(n){LS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LS(e,t,r){return t=CJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CJ(e){var t=W6e(e,"string");return i1(t)=="symbol"?t:t+""}function W6e(e,t){if(i1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(i1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var z6e=function(t,r,n,s,a){var i=t.width,o=t.height,l=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:i-n.right,rightMirror:i-n.right,top:n.top,topMirror:n.top,bottom:o-n.bottom,bottomMirror:o-n.bottom},g=!!Ao(u,K1);return d.reduce(function(p,x){var y=r[x],v=y.orientation,T=y.domain,_=y.padding,b=_===void 0?{}:_,E=y.mirror,k=y.reversed,A="".concat(v).concat(E?"Mirror":""),P,j,O,R,M;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var G=T[1]-T[0],K=1/0,re=y.categoricalDomain.sort($_e);if(re.forEach(function(J,Q){Q>0&&(K=Math.min((J||0)-(re[Q-1]||0),K))}),Number.isFinite(K)){var Y=K/G,ee=y.layout==="vertical"?n.height:n.width;if(y.padding==="gap"&&(P=Y*ee/2),y.padding==="no-gap"){var B=h0(t.barCategoryGap,Y*ee),z=Y*ee/2;P=z-B-(z-B)/ee*B}}}s==="xAxis"?j=[n.left+(b.left||0)+(P||0),n.left+n.width-(b.right||0)-(P||0)]:s==="yAxis"?j=l==="horizontal"?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(P||0),n.top+n.height-(b.bottom||0)-(P||0)]:j=y.range,k&&(j=[j[1],j[0]]);var I=tAe(y,a,g),W=I.scale,V=I.realScaleType;W.domain(T).range(j),rAe(W);var L=uAe(W,zl(zl({},y),{},{realScaleType:V}));s==="xAxis"?(M=v==="top"&&!E||v==="bottom"&&E,O=n.left,R=f[A]-M*y.height):s==="yAxis"&&(M=v==="left"&&!E||v==="right"&&E,O=f[A]-M*y.width,R=n.top);var H=zl(zl(zl({},y),L),{},{realScaleType:V,x:O,y:R,scale:W,width:s==="xAxis"?n.width:y.width,height:s==="yAxis"?n.height:y.height});return H.bandSize=i2(H,L),!y.hide&&s==="xAxis"?f[A]+=(M?-1:1)*H.height:y.hide||(f[A]+=(M?-1:1)*H.width),zl(zl({},p),{},LS({},x,H))},{})},EJ=function(t,r){var n=t.x,s=t.y,a=r.x,i=r.y;return{x:Math.min(n,a),y:Math.min(s,i),width:Math.abs(a-n),height:Math.abs(i-s)}},H6e=function(t){var r=t.x1,n=t.y1,s=t.x2,a=t.y2;return EJ({x:r,y:n},{x:s,y:a})},NJ=(function(){function e(t){$6e(this,e),this.scale=t}return U6e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,a=n.position;if(r!==void 0){if(a)switch(a){case"start":return this.scale(r);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+i}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(r)+o}default:return this.scale(r)}if(s){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],a=n[n.length-1];return s<=a?r>=s&&r<=a:r>=a&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])})();LS(NJ,"EPS",1e-4);var BP=function(t){var r=Object.keys(t).reduce(function(n,s){return zl(zl({},n),{},LS({},s,NJ.create(t[s])))},{});return zl(zl({},r),{},{apply:function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.bandAware,o=a.position;return y6e(s,function(l,u){return r[u].apply(l,{bandAware:i,position:o})})},isInRange:function(s){return _J(s,function(a,i){return r[i].isInRange(a)})}})};function G6e(e){return(e%180+180)%180}var V6e=function(t){var r=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=G6e(s),i=a*Math.PI/180,o=Math.atan(n/r),l=i>o&&i<Math.PI-o?n/Math.sin(i):r/Math.cos(i);return Math.abs(l)},C4,LU;function q6e(){if(LU)return C4;LU=1;var e=Mf(),t=W1(),r=_S();function n(s){return function(a,i,o){var l=Object(a);if(!t(a)){var u=e(i,3);a=r(a),i=function(f){return u(l[f],f,l)}}var d=s(a,i,o);return d>-1?l[u?a[d]:d]:void 0}}return C4=n,C4}var E4,BU;function K6e(){if(BU)return E4;BU=1;var e=xJ();function t(r){var n=e(r),s=n%1;return n===n?s?n-s:n:0}return E4=t,E4}var N4,$U;function X6e(){if($U)return N4;$U=1;var e=UX(),t=Mf(),r=K6e(),n=Math.max;function s(a,i,o){var l=a==null?0:a.length;if(!l)return-1;var u=o==null?0:r(o);return u<0&&(u=n(l+u,0)),e(a,t(i,3),u)}return N4=s,N4}var A4,UU;function Y6e(){if(UU)return A4;UU=1;var e=q6e(),t=X6e(),r=e(t);return A4=r,A4}var J6e=Y6e();const Q6e=kn(J6e);var Z6e=nX();const ePe=kn(Z6e);var tPe=ePe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),$P=C.createContext(void 0),UP=C.createContext(void 0),AJ=C.createContext(void 0),jJ=C.createContext({}),PJ=C.createContext(void 0),OJ=C.createContext(0),FJ=C.createContext(0),WU=function(t){var r=t.state,n=r.xAxisMap,s=r.yAxisMap,a=r.offset,i=t.clipPathId,o=t.children,l=t.width,u=t.height,d=tPe(a);return Be.createElement($P.Provider,{value:n},Be.createElement(UP.Provider,{value:s},Be.createElement(jJ.Provider,{value:a},Be.createElement(AJ.Provider,{value:d},Be.createElement(PJ.Provider,{value:i},Be.createElement(OJ.Provider,{value:u},Be.createElement(FJ.Provider,{value:l},o)))))))},rPe=function(){return C.useContext(PJ)},RJ=function(t){var r=C.useContext($P);r==null&&p0();var n=r[t];return n==null&&p0(),n},nPe=function(){var t=C.useContext($P);return ef(t)},sPe=function(){var t=C.useContext(UP),r=Q6e(t,function(n){return _J(n.domain,Number.isFinite)});return r||ef(t)},DJ=function(t){var r=C.useContext(UP);r==null&&p0();var n=r[t];return n==null&&p0(),n},aPe=function(){var t=C.useContext(AJ);return t},iPe=function(){return C.useContext(jJ)},WP=function(){return C.useContext(FJ)},zP=function(){return C.useContext(OJ)};function $p(e){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$p(e)}function oPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lPe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MJ(n.key),n)}}function cPe(e,t,r){return t&&lPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uPe(e,t,r){return t=w2(t),dPe(e,IJ()?Reflect.construct(t,r||[],w2(e).constructor):t.apply(e,r))}function dPe(e,t){if(t&&($p(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fPe(e)}function fPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IJ=function(){return!!e})()}function w2(e){return w2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},w2(e)}function hPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ej(e,t)}function ej(e,t){return ej=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ej(e,t)}function zU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function HU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zU(Object(r),!0).forEach(function(n){HP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HP(e,t,r){return t=MJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MJ(e){var t=gPe(e,"string");return $p(t)=="symbol"?t:t+""}function gPe(e,t){if($p(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function pPe(e,t){return vPe(e)||xPe(e,t)||yPe(e,t)||mPe()}function mPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yPe(e,t){if(e){if(typeof e=="string")return GU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GU(e,t)}}function GU(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xPe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,a,i,o=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){u=!0,s=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function vPe(e){if(Array.isArray(e))return e}function tj(){return tj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tj.apply(this,arguments)}var wPe=function(t,r){var n;return Be.isValidElement(t)?n=Be.cloneElement(t,r):Jr(t)?n=t(r):n=Be.createElement("line",tj({},r,{className:"recharts-reference-line-line"})),n},bPe=function(t,r,n,s,a,i,o,l,u){var d=a.x,f=a.y,g=a.width,p=a.height;if(n){var x=u.y,y=t.y.apply(x,{position:i});if(Vc(u,"discard")&&!t.y.isInRange(y))return null;var v=[{x:d+g,y},{x:d,y}];return l==="left"?v.reverse():v}if(r){var T=u.x,_=t.x.apply(T,{position:i});if(Vc(u,"discard")&&!t.x.isInRange(_))return null;var b=[{x:_,y:f+p},{x:_,y:f}];return o==="top"?b.reverse():b}if(s){var E=u.segment,k=E.map(function(A){return t.apply(A,{position:i})});return Vc(u,"discard")&&h6e(k,function(A){return!t.isInRange(A)})?null:k}return null};function _Pe(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,a=e.yAxisId,i=e.shape,o=e.className,l=e.alwaysShow,u=rPe(),d=RJ(s),f=DJ(a),g=aPe();if(!u||!g)return null;Gu(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=BP({x:d.scale,y:f.scale}),x=ba(t),y=ba(r),v=n&&n.length===2,T=bPe(p,x,y,v,g,e.position,d.orientation,f.orientation,e);if(!T)return null;var _=pPe(T,2),b=_[0],E=b.x,k=b.y,A=_[1],P=A.x,j=A.y,O=Vc(e,"hidden")?"url(#".concat(u,")"):void 0,R=HU(HU({clipPath:O},cn(e,!0)),{},{x1:E,y1:k,x2:P,y2:j});return Be.createElement(Gs,{className:hn("recharts-reference-line",o)},wPe(i,R),bi.renderCallByParent(e,H6e({x1:E,y1:k,x2:P,y2:j})))}var GP=(function(e){function t(){return oPe(this,t),uPe(this,t,arguments)}return hPe(t,e),cPe(t,[{key:"render",value:function(){return Be.createElement(_Pe,this.props)}}])})(Be.Component);HP(GP,"displayName","ReferenceLine");HP(GP,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function rj(){return rj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rj.apply(this,arguments)}function Up(e){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Up(e)}function VU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VU(Object(r),!0).forEach(function(n){BS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kPe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BJ(n.key),n)}}function TPe(e,t,r){return t&&kPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function CPe(e,t,r){return t=b2(t),EPe(e,LJ()?Reflect.construct(t,r||[],b2(e).constructor):t.apply(e,r))}function EPe(e,t){if(t&&(Up(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NPe(e)}function NPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LJ=function(){return!!e})()}function b2(e){return b2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},b2(e)}function APe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nj(e,t)}function nj(e,t){return nj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},nj(e,t)}function BS(e,t,r){return t=BJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BJ(e){var t=jPe(e,"string");return Up(t)=="symbol"?t:t+""}function jPe(e,t){if(Up(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Up(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var PPe=function(t){var r=t.x,n=t.y,s=t.xAxis,a=t.yAxis,i=BP({x:s.scale,y:a.scale}),o=i.apply({x:r,y:n},{bandAware:!0});return Vc(t,"discard")&&!i.isInRange(o)?null:o},$S=(function(e){function t(){return SPe(this,t),CPe(this,t,arguments)}return APe(t,e),TPe(t,[{key:"render",value:function(){var n=this.props,s=n.x,a=n.y,i=n.r,o=n.alwaysShow,l=n.clipPathId,u=ba(s),d=ba(a);if(Gu(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=PPe(this.props);if(!f)return null;var g=f.x,p=f.y,x=this.props,y=x.shape,v=x.className,T=Vc(this.props,"hidden")?"url(#".concat(l,")"):void 0,_=qU(qU({clipPath:T},cn(this.props,!0)),{},{cx:g,cy:p});return Be.createElement(Gs,{className:hn("recharts-reference-dot",v)},t.renderDot(y,_),bi.renderCallByParent(this.props,{x:g-i,y:p-i,width:2*i,height:2*i}))}}])})(Be.Component);BS($S,"displayName","ReferenceDot");BS($S,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});BS($S,"renderDot",function(e,t){var r;return Be.isValidElement(e)?r=Be.cloneElement(e,t):Jr(e)?r=e(t):r=Be.createElement(LP,rj({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function sj(){return sj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sj.apply(this,arguments)}function Wp(e){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wp(e)}function KU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function XU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KU(Object(r),!0).forEach(function(n){US(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FPe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UJ(n.key),n)}}function RPe(e,t,r){return t&&FPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function DPe(e,t,r){return t=_2(t),IPe(e,$J()?Reflect.construct(t,r||[],_2(e).constructor):t.apply(e,r))}function IPe(e,t){if(t&&(Wp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MPe(e)}function MPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $J(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($J=function(){return!!e})()}function _2(e){return _2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_2(e)}function LPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aj(e,t)}function aj(e,t){return aj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},aj(e,t)}function US(e,t,r){return t=UJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UJ(e){var t=BPe(e,"string");return Wp(t)=="symbol"?t:t+""}function BPe(e,t){if(Wp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $Pe=function(t,r,n,s,a){var i=a.x1,o=a.x2,l=a.y1,u=a.y2,d=a.xAxis,f=a.yAxis;if(!d||!f)return null;var g=BP({x:d.scale,y:f.scale}),p={x:t?g.x.apply(i,{position:"start"}):g.x.rangeMin,y:n?g.y.apply(l,{position:"start"}):g.y.rangeMin},x={x:r?g.x.apply(o,{position:"end"}):g.x.rangeMax,y:s?g.y.apply(u,{position:"end"}):g.y.rangeMax};return Vc(a,"discard")&&(!g.isInRange(p)||!g.isInRange(x))?null:EJ(p,x)},WS=(function(e){function t(){return OPe(this,t),DPe(this,t,arguments)}return LPe(t,e),RPe(t,[{key:"render",value:function(){var n=this.props,s=n.x1,a=n.x2,i=n.y1,o=n.y2,l=n.className,u=n.alwaysShow,d=n.clipPathId;Gu(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=ba(s),g=ba(a),p=ba(i),x=ba(o),y=this.props.shape;if(!f&&!g&&!p&&!x&&!y)return null;var v=$Pe(f,g,p,x,this.props);if(!v&&!y)return null;var T=Vc(this.props,"hidden")?"url(#".concat(d,")"):void 0;return Be.createElement(Gs,{className:hn("recharts-reference-area",l)},t.renderRect(y,XU(XU({clipPath:T},cn(this.props,!0)),v)),bi.renderCallByParent(this.props,v))}}])})(Be.Component);US(WS,"displayName","ReferenceArea");US(WS,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});US(WS,"renderRect",function(e,t){var r;return Be.isValidElement(e)?r=Be.cloneElement(e,t):Jr(e)?r=e(t):r=Be.createElement(MP,sj({},t,{className:"recharts-reference-area-rect"})),r});function WJ(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function UPe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return V6e(n,r)}function WPe(e,t,r){var n=r==="width",s=e.x,a=e.y,i=e.width,o=e.height;return t===1?{start:n?s:a,end:n?s+i:a+o}:{start:n?s+i:a+o,end:n?s:a}}function S2(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-s)<=0}function zPe(e,t){return WJ(e,t+1)}function HPe(e,t,r,n,s){for(var a=(n||[]).slice(),i=t.start,o=t.end,l=0,u=1,d=i,f=function(){var x=n?.[l];if(x===void 0)return{v:WJ(n,u)};var y=l,v,T=function(){return v===void 0&&(v=r(x,y)),v},_=x.coordinate,b=l===0||S2(e,_,T,d,o);b||(l=0,d=i,u+=1),b&&(d=_+e*(T()/2+s),l+=u)},g;u<=a.length;)if(g=f(),g)return g.v;return[]}function o1(e){"@babel/helpers - typeof";return o1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o1(e)}function YU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YU(Object(r),!0).forEach(function(n){GPe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GPe(e,t,r){return t=VPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VPe(e){var t=qPe(e,"string");return o1(t)=="symbol"?t:t+""}function qPe(e,t){if(o1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(o1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KPe(e,t,r,n,s){for(var a=(n||[]).slice(),i=a.length,o=t.start,l=t.end,u=function(g){var p=a[g],x,y=function(){return x===void 0&&(x=r(p,g)),x};if(g===i-1){var v=e*(p.coordinate+e*y()/2-l);a[g]=p=yi(yi({},p),{},{tickCoord:v>0?p.coordinate-v*e:p.coordinate})}else a[g]=p=yi(yi({},p),{},{tickCoord:p.coordinate});var T=S2(e,p.tickCoord,y,o,l);T&&(l=p.tickCoord-e*(y()/2+s),a[g]=yi(yi({},p),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return a}function XPe(e,t,r,n,s,a){var i=(n||[]).slice(),o=i.length,l=t.start,u=t.end;if(a){var d=n[o-1],f=r(d,o-1),g=e*(d.coordinate+e*f/2-u);i[o-1]=d=yi(yi({},d),{},{tickCoord:g>0?d.coordinate-g*e:d.coordinate});var p=S2(e,d.tickCoord,function(){return f},l,u);p&&(u=d.tickCoord-e*(f/2+s),i[o-1]=yi(yi({},d),{},{isShow:!0}))}for(var x=a?o-1:o,y=function(_){var b=i[_],E,k=function(){return E===void 0&&(E=r(b,_)),E};if(_===0){var A=e*(b.coordinate-e*k()/2-l);i[_]=b=yi(yi({},b),{},{tickCoord:A<0?b.coordinate-A*e:b.coordinate})}else i[_]=b=yi(yi({},b),{},{tickCoord:b.coordinate});var P=S2(e,b.tickCoord,k,l,u);P&&(l=b.tickCoord+e*(k()/2+s),i[_]=yi(yi({},b),{},{isShow:!0}))},v=0;v<x;v++)y(v);return i}function VP(e,t,r){var n=e.tick,s=e.ticks,a=e.viewBox,i=e.minTickGap,o=e.orientation,l=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!s||!s.length||!n)return[];if(Jt(l)||vm.isSsr)return zPe(s,typeof l=="number"&&Jt(l)?l:0);var g=[],p=o==="top"||o==="bottom"?"width":"height",x=d&&p==="width"?Vx(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},y=function(b,E){var k=Jr(u)?u(b.value,E):b.value;return p==="width"?UPe(Vx(k,{fontSize:t,letterSpacing:r}),x,f):Vx(k,{fontSize:t,letterSpacing:r})[p]},v=s.length>=2?Jl(s[1].coordinate-s[0].coordinate):1,T=WPe(a,v,p);return l==="equidistantPreserveStart"?HPe(v,T,y,s,i):(l==="preserveStart"||l==="preserveStartEnd"?g=XPe(v,T,y,s,i,l==="preserveStartEnd"):g=KPe(v,T,y,s,i),g.filter(function(_){return _.isShow}))}var YPe=["viewBox"],JPe=["viewBox"],QPe=["ticks"];function zp(e){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zp(e)}function Qg(){return Qg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qg.apply(this,arguments)}function JU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JU(Object(r),!0).forEach(function(n){qP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j4(e,t){if(e==null)return{};var r=ZPe(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ZPe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function eOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HJ(n.key),n)}}function tOe(e,t,r){return t&&QU(e.prototype,t),r&&QU(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rOe(e,t,r){return t=k2(t),nOe(e,zJ()?Reflect.construct(t,r||[],k2(e).constructor):t.apply(e,r))}function nOe(e,t){if(t&&(zp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sOe(e)}function sOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zJ=function(){return!!e})()}function k2(e){return k2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},k2(e)}function aOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ij(e,t)}function ij(e,t){return ij=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ij(e,t)}function qP(e,t,r){return t=HJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HJ(e){var t=iOe(e,"string");return zp(t)=="symbol"?t:t+""}function iOe(e,t){if(zp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Sm=(function(e){function t(r){var n;return eOe(this,t),n=rOe(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return aOe(t,e),tOe(t,[{key:"shouldComponentUpdate",value:function(n,s){var a=n.viewBox,i=j4(n,YPe),o=this.props,l=o.viewBox,u=j4(o,JPe);return!dp(a,l)||!dp(i,u)||!dp(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,u=s.orientation,d=s.tickSize,f=s.mirror,g=s.tickMargin,p,x,y,v,T,_,b=f?-1:1,E=n.tickSize||d,k=Jt(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":p=x=n.coordinate,v=i+ +!f*l,y=v-b*E,_=y-b*g,T=k;break;case"left":y=v=n.coordinate,x=a+ +!f*o,p=x-b*E,T=p-b*g,_=k;break;case"right":y=v=n.coordinate,x=a+ +f*o,p=x+b*E,T=p+b*g,_=k;break;default:p=x=n.coordinate,v=i+ +f*l,y=v+b*E,_=y+b*g,T=k;break}return{line:{x1:p,y1:y,x2:x,y2:v},tick:{x:T,y:_}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,a=n.mirror,i;switch(s){case"left":i=a?"start":"end";break;case"right":i=a?"end":"start";break;default:i="middle";break}return i}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,a=n.mirror,i="end";switch(s){case"left":case"right":i="middle";break;case"top":i=a?"start":"end";break;default:i=a?"end":"start";break}return i}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,a=n.y,i=n.width,o=n.height,l=n.orientation,u=n.mirror,d=n.axisLine,f=pa(pa(pa({},cn(this.props,!1)),cn(d,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var g=+(l==="top"&&!u||l==="bottom"&&u);f=pa(pa({},f),{},{x1:s,y1:a+g*o,x2:s+i,y2:a+g*o})}else{var p=+(l==="left"&&!u||l==="right"&&u);f=pa(pa({},f),{},{x1:s+p*i,y1:a,x2:s+p*i,y2:a+o})}return Be.createElement("line",Qg({},f,{className:hn("recharts-cartesian-axis-line",ml(d,"className"))}))}},{key:"renderTicks",value:function(n,s,a){var i=this,o=this.props,l=o.tickLine,u=o.stroke,d=o.tick,f=o.tickFormatter,g=o.unit,p=VP(pa(pa({},this.props),{},{ticks:n}),s,a),x=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),v=cn(this.props,!1),T=cn(d,!1),_=pa(pa({},v),{},{fill:"none"},cn(l,!1)),b=p.map(function(E,k){var A=i.getTickLineCoord(E),P=A.line,j=A.tick,O=pa(pa(pa(pa({textAnchor:x,verticalAnchor:y},v),{},{stroke:"none",fill:u},T),j),{},{index:k,payload:E,visibleTicksCount:p.length,tickFormatter:f});return Be.createElement(Gs,Qg({className:"recharts-cartesian-axis-tick",key:"tick-".concat(E.value,"-").concat(E.coordinate,"-").concat(E.tickCoord)},D_(i.props,E,k)),l&&Be.createElement("line",Qg({},_,P,{className:hn("recharts-cartesian-axis-tick-line",ml(l,"className"))})),d&&t.renderTickItem(d,O,"".concat(Jr(f)?f(E.value,k):E.value).concat(g||"")))});return Be.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var n=this,s=this.props,a=s.axisLine,i=s.width,o=s.height,l=s.ticksGenerator,u=s.className,d=s.hide;if(d)return null;var f=this.props,g=f.ticks,p=j4(f,QPe),x=g;return Jr(l)&&(x=g&&g.length>0?l(this.props):l(p)),i<=0||o<=0||!x||!x.length?null:Be.createElement(Gs,{className:hn("recharts-cartesian-axis",u),ref:function(v){n.layerReference=v}},a&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),bi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,a){var i,o=hn(s.className,"recharts-cartesian-axis-tick-value");return Be.isValidElement(n)?i=Be.cloneElement(n,pa(pa({},s),{},{className:o})):Jr(n)?i=n(pa(pa({},s),{},{className:o})):i=Be.createElement(V_,Qg({},s,{className:"recharts-cartesian-axis-tick-value"}),a),i}}])})(C.Component);qP(Sm,"displayName","CartesianAxis");qP(Sm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var oOe=["x1","y1","x2","y2","key"],lOe=["offset"];function m0(e){"@babel/helpers - typeof";return m0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m0(e)}function ZU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _i(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZU(Object(r),!0).forEach(function(n){cOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZU(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cOe(e,t,r){return t=uOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uOe(e){var t=dOe(e,"string");return m0(t)=="symbol"?t:t+""}function dOe(e,t){if(m0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(m0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fh(){return Fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fh.apply(this,arguments)}function eW(e,t){if(e==null)return{};var r=fOe(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fOe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var hOe=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,s=t.x,a=t.y,i=t.width,o=t.height,l=t.ry;return Be.createElement("rect",{x:s,y:a,ry:l,width:i,height:o,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function GJ(e,t){var r;if(Be.isValidElement(e))r=Be.cloneElement(e,t);else if(Jr(e))r=e(t);else{var n=t.x1,s=t.y1,a=t.x2,i=t.y2,o=t.key,l=eW(t,oOe),u=cn(l,!1);u.offset;var d=eW(u,lOe);r=Be.createElement("line",Fh({},d,{x1:n,y1:s,x2:a,y2:i,fill:"none",key:o}))}return r}function gOe(e){var t=e.x,r=e.width,n=e.horizontal,s=n===void 0?!0:n,a=e.horizontalPoints;if(!s||!a||!a.length)return null;var i=a.map(function(o,l){var u=_i(_i({},e),{},{x1:t,y1:o,x2:t+r,y2:o,key:"line-".concat(l),index:l});return GJ(s,u)});return Be.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function pOe(e){var t=e.y,r=e.height,n=e.vertical,s=n===void 0?!0:n,a=e.verticalPoints;if(!s||!a||!a.length)return null;var i=a.map(function(o,l){var u=_i(_i({},e),{},{x1:o,y1:t,x2:o,y2:t+r,key:"line-".concat(l),index:l});return GJ(s,u)});return Be.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function mOe(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,a=e.width,i=e.height,o=e.horizontalPoints,l=e.horizontal,u=l===void 0?!0:l;if(!u||!t||!t.length)return null;var d=o.map(function(g){return Math.round(g+s-s)}).sort(function(g,p){return g-p});s!==d[0]&&d.unshift(0);var f=d.map(function(g,p){var x=!d[p+1],y=x?s+i-g:d[p+1]-g;if(y<=0)return null;var v=p%t.length;return Be.createElement("rect",{key:"react-".concat(p),y:g,x:n,height:y,width:a,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return Be.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function yOe(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,a=e.x,i=e.y,o=e.width,l=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(g){return Math.round(g+a-a)}).sort(function(g,p){return g-p});a!==d[0]&&d.unshift(0);var f=d.map(function(g,p){var x=!d[p+1],y=x?a+o-g:d[p+1]-g;if(y<=0)return null;var v=p%n.length;return Be.createElement("rect",{key:"react-".concat(p),x:g,y:i,width:y,height:l,stroke:"none",fill:n[v],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return Be.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var xOe=function(t,r){var n=t.xAxis,s=t.width,a=t.height,i=t.offset;return aJ(VP(_i(_i(_i({},Sm.defaultProps),n),{},{ticks:Bu(n,!0),viewBox:{x:0,y:0,width:s,height:a}})),i.left,i.left+i.width,r)},vOe=function(t,r){var n=t.yAxis,s=t.width,a=t.height,i=t.offset;return aJ(VP(_i(_i(_i({},Sm.defaultProps),n),{},{ticks:Bu(n,!0),viewBox:{x:0,y:0,width:s,height:a}})),i.top,i.top+i.height,r)},Og={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function VJ(e){var t,r,n,s,a,i,o=WP(),l=zP(),u=iPe(),d=_i(_i({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Og.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Og.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Og.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:Og.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:Og.vertical,verticalFill:(i=e.verticalFill)!==null&&i!==void 0?i:Og.verticalFill,x:Jt(e.x)?e.x:u.left,y:Jt(e.y)?e.y:u.top,width:Jt(e.width)?e.width:u.width,height:Jt(e.height)?e.height:u.height}),f=d.x,g=d.y,p=d.width,x=d.height,y=d.syncWithTicks,v=d.horizontalValues,T=d.verticalValues,_=nPe(),b=sPe();if(!Jt(p)||p<=0||!Jt(x)||x<=0||!Jt(f)||f!==+f||!Jt(g)||g!==+g)return null;var E=d.verticalCoordinatesGenerator||xOe,k=d.horizontalCoordinatesGenerator||vOe,A=d.horizontalPoints,P=d.verticalPoints;if((!A||!A.length)&&Jr(k)){var j=v&&v.length,O=k({yAxis:b?_i(_i({},b),{},{ticks:j?v:b.ticks}):void 0,width:o,height:l,offset:u},j?!0:y);Gu(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(m0(O),"]")),Array.isArray(O)&&(A=O)}if((!P||!P.length)&&Jr(E)){var R=T&&T.length,M=E({xAxis:_?_i(_i({},_),{},{ticks:R?T:_.ticks}):void 0,width:o,height:l,offset:u},R?!0:y);Gu(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(m0(M),"]")),Array.isArray(M)&&(P=M)}return Be.createElement("g",{className:"recharts-cartesian-grid"},Be.createElement(hOe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),Be.createElement(gOe,Fh({},d,{offset:u,horizontalPoints:A,xAxis:_,yAxis:b})),Be.createElement(pOe,Fh({},d,{offset:u,verticalPoints:P,xAxis:_,yAxis:b})),Be.createElement(mOe,Fh({},d,{horizontalPoints:A})),Be.createElement(yOe,Fh({},d,{verticalPoints:P})))}VJ.displayName="CartesianGrid";var wOe=["type","layout","connectNulls","ref"],bOe=["key"];function Hp(e){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hp(e)}function tW(e,t){if(e==null)return{};var r=_Oe(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _Oe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Yx(){return Yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yx.apply(this,arguments)}function rW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Eo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rW(Object(r),!0).forEach(function(n){Hl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fg(e){return COe(e)||TOe(e)||kOe(e)||SOe()}function SOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kOe(e,t){if(e){if(typeof e=="string")return oj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oj(e,t)}}function TOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function COe(e){if(Array.isArray(e))return oj(e)}function oj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function EOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KJ(n.key),n)}}function NOe(e,t,r){return t&&nW(e.prototype,t),r&&nW(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function AOe(e,t,r){return t=T2(t),jOe(e,qJ()?Reflect.construct(t,r||[],T2(e).constructor):t.apply(e,r))}function jOe(e,t){if(t&&(Hp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return POe(e)}function POe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qJ=function(){return!!e})()}function T2(e){return T2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},T2(e)}function OOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lj(e,t)}function lj(e,t){return lj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},lj(e,t)}function Hl(e,t,r){return t=KJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KJ(e){var t=FOe(e,"string");return Hp(t)=="symbol"?t:t+""}function FOe(e,t){if(Hp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var X1=(function(e){function t(){var r;EOe(this,t);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return r=AOe(this,t,[].concat(s)),Hl(r,"state",{isAnimationFinished:!0,totalLength:0}),Hl(r,"generateSimpleStrokeDasharray",function(i,o){return"".concat(o,"px ").concat(i-o,"px")}),Hl(r,"getStrokeDasharray",function(i,o,l){var u=l.reduce(function(T,_){return T+_});if(!u)return r.generateSimpleStrokeDasharray(o,i);for(var d=Math.floor(i/u),f=i%u,g=o-i,p=[],x=0,y=0;x<l.length;y+=l[x],++x)if(y+l[x]>f){p=[].concat(Fg(l.slice(0,x)),[f-y]);break}var v=p.length%2===0?[0,g]:[g];return[].concat(Fg(t.repeat(l,d)),Fg(p),v).map(function(T){return"".concat(T,"px")}).join(", ")}),Hl(r,"id",U1("recharts-line-")),Hl(r,"pathRef",function(i){r.mainCurve=i}),Hl(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Hl(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return OOe(t,e),NOe(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,o=a.xAxis,l=a.yAxis,u=a.layout,d=a.children,f=yl(d,q1);if(!f)return null;var g=function(y,v){return{x:y.x,y:y.y,value:y.value,errorVal:Lo(y.payload,v)}},p={clipPath:n?"url(#clipPath-".concat(s,")"):null};return Be.createElement(Gs,p,f.map(function(x){return Be.cloneElement(x,{key:"bar-".concat(x.props.dataKey),data:i,xAxis:o,yAxis:l,layout:u,dataPointFormatter:g})}))}},{key:"renderDots",value:function(n,s,a){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.dot,u=o.points,d=o.dataKey,f=cn(this.props,!1),g=cn(l,!0),p=u.map(function(y,v){var T=Eo(Eo(Eo({key:"dot-".concat(v),r:3},f),g),{},{index:v,cx:y.x,cy:y.y,value:y.value,dataKey:d,payload:y.payload,points:u});return t.renderDotItem(l,T)}),x={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(a,")"):null};return Be.createElement(Gs,Yx({className:"recharts-line-dots",key:"dots"},x),p)}},{key:"renderCurveStatically",value:function(n,s,a,i){var o=this.props,l=o.type,u=o.layout,d=o.connectNulls;o.ref;var f=tW(o,wOe),g=Eo(Eo(Eo({},cn(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(a,")"):null,points:n},i),{},{type:l,layout:u,connectNulls:d});return Be.createElement(B3,Yx({},g,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,s){var a=this,i=this.props,o=i.points,l=i.strokeDasharray,u=i.isAnimationActive,d=i.animationBegin,f=i.animationDuration,g=i.animationEasing,p=i.animationId,x=i.animateNewValues,y=i.width,v=i.height,T=this.state,_=T.prevPoints,b=T.totalLength;return Be.createElement(td,{begin:d,duration:f,isActive:u,easing:g,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(E){var k=E.t;if(_){var A=_.length/o.length,P=o.map(function(G,K){var re=Math.floor(K*A);if(_[re]){var Y=_[re],ee=Gl(Y.x,G.x),B=Gl(Y.y,G.y);return Eo(Eo({},G),{},{x:ee(k),y:B(k)})}if(x){var z=Gl(y*2,G.x),I=Gl(v/2,G.y);return Eo(Eo({},G),{},{x:z(k),y:I(k)})}return Eo(Eo({},G),{},{x:G.x,y:G.y})});return a.renderCurveStatically(P,n,s)}var j=Gl(0,b),O=j(k),R;if(l){var M="".concat(l).split(/[,\s]+/gim).map(function(G){return parseFloat(G)});R=a.getStrokeDasharray(O,b,M)}else R=a.generateSimpleStrokeDasharray(b,O);return a.renderCurveStatically(o,n,s,{strokeDasharray:R})})}},{key:"renderCurve",value:function(n,s){var a=this.props,i=a.points,o=a.isAnimationActive,l=this.state,u=l.prevPoints,d=l.totalLength;return o&&i&&i.length&&(!u&&d>0||!FS(u,i))?this.renderCurveWithAnimation(n,s):this.renderCurveStatically(i,n,s)}},{key:"render",value:function(){var n,s=this.props,a=s.hide,i=s.dot,o=s.points,l=s.className,u=s.xAxis,d=s.yAxis,f=s.top,g=s.left,p=s.width,x=s.height,y=s.isAnimationActive,v=s.id;if(a||!o||!o.length)return null;var T=this.state.isAnimationFinished,_=o.length===1,b=hn("recharts-line",l),E=u&&u.allowDataOverflow,k=d&&d.allowDataOverflow,A=E||k,P=sn(v)?this.id:v,j=(n=cn(i,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},O=j.r,R=O===void 0?3:O,M=j.strokeWidth,G=M===void 0?2:M,K=X_e(i)?i:{},re=K.clipDot,Y=re===void 0?!0:re,ee=R*2+G;return Be.createElement(Gs,{className:b},E||k?Be.createElement("defs",null,Be.createElement("clipPath",{id:"clipPath-".concat(P)},Be.createElement("rect",{x:E?g:g-p/2,y:k?f:f-x/2,width:E?p:p*2,height:k?x:x*2})),!Y&&Be.createElement("clipPath",{id:"clipPath-dots-".concat(P)},Be.createElement("rect",{x:g-ee/2,y:f-ee/2,width:p+ee,height:x+ee}))):null,!_&&this.renderCurve(A,P),this.renderErrorBar(A,P),(_||i)&&this.renderDots(A,Y,P),(!y||T)&&mf.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,s){for(var a=n.length%2!==0?[].concat(Fg(n),[0]):n,i=[],o=0;o<s;++o)i=[].concat(Fg(i),Fg(a));return i}},{key:"renderDotItem",value:function(n,s){var a;if(Be.isValidElement(n))a=Be.cloneElement(n,s);else if(Jr(n))a=n(s);else{var i=s.key,o=tW(s,bOe),l=hn("recharts-line-dot",typeof n!="boolean"?n.className:"");a=Be.createElement(LP,Yx({key:i},o,{className:l}))}return a}}])})(C.PureComponent);Hl(X1,"displayName","Line");Hl(X1,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!vm.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Hl(X1,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,s=e.xAxisTicks,a=e.yAxisTicks,i=e.dataKey,o=e.bandSize,l=e.displayedData,u=e.offset,d=t.layout,f=l.map(function(g,p){var x=Lo(g,i);return d==="horizontal"?{x:y$({axis:r,ticks:s,bandSize:o,entry:g,index:p}),y:sn(x)?null:n.scale(x),value:x,payload:g}:{x:sn(x)?null:r.scale(x),y:y$({axis:n,ticks:a,bandSize:o,entry:g,index:p}),value:x,payload:g}});return Eo({points:f,layout:d},u)});function Gp(e){"@babel/helpers - typeof";return Gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gp(e)}function ROe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DOe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JJ(n.key),n)}}function IOe(e,t,r){return t&&DOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function MOe(e,t,r){return t=C2(t),LOe(e,XJ()?Reflect.construct(t,r||[],C2(e).constructor):t.apply(e,r))}function LOe(e,t){if(t&&(Gp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BOe(e)}function BOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XJ=function(){return!!e})()}function C2(e){return C2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},C2(e)}function $Oe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cj(e,t)}function cj(e,t){return cj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},cj(e,t)}function YJ(e,t,r){return t=JJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JJ(e){var t=UOe(e,"string");return Gp(t)=="symbol"?t:t+""}function UOe(e,t){if(Gp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function uj(){return uj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uj.apply(this,arguments)}function WOe(e){var t=e.xAxisId,r=WP(),n=zP(),s=RJ(t);return s==null?null:C.createElement(Sm,uj({},s,{className:hn("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(i){return Bu(i,!0)}}))}var zS=(function(e){function t(){return ROe(this,t),MOe(this,t,arguments)}return $Oe(t,e),IOe(t,[{key:"render",value:function(){return C.createElement(WOe,this.props)}}])})(C.Component);YJ(zS,"displayName","XAxis");YJ(zS,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Vp(e){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vp(e)}function zOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HOe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eQ(n.key),n)}}function GOe(e,t,r){return t&&HOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function VOe(e,t,r){return t=E2(t),qOe(e,QJ()?Reflect.construct(t,r||[],E2(e).constructor):t.apply(e,r))}function qOe(e,t){if(t&&(Vp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KOe(e)}function KOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QJ=function(){return!!e})()}function E2(e){return E2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},E2(e)}function XOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dj(e,t)}function dj(e,t){return dj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},dj(e,t)}function ZJ(e,t,r){return t=eQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eQ(e){var t=YOe(e,"string");return Vp(t)=="symbol"?t:t+""}function YOe(e,t){if(Vp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function fj(){return fj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fj.apply(this,arguments)}var JOe=function(t){var r=t.yAxisId,n=WP(),s=zP(),a=DJ(r);return a==null?null:C.createElement(Sm,fj({},a,{className:hn("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(o){return Bu(o,!0)}}))},HS=(function(e){function t(){return zOe(this,t),VOe(this,t,arguments)}return XOe(t,e),GOe(t,[{key:"render",value:function(){return C.createElement(JOe,this.props)}}])})(C.Component);ZJ(HS,"displayName","YAxis");ZJ(HS,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function sW(e){return t8e(e)||e8e(e)||ZOe(e)||QOe()}function QOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZOe(e,t){if(e){if(typeof e=="string")return hj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hj(e,t)}}function e8e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function t8e(e){if(Array.isArray(e))return hj(e)}function hj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var gj=function(t,r,n,s,a){var i=yl(t,GP),o=yl(t,$S),l=[].concat(sW(i),sW(o)),u=yl(t,WS),d="".concat(s,"Id"),f=s[0],g=r;if(l.length&&(g=l.reduce(function(y,v){if(v.props[d]===n&&Vc(v.props,"extendDomain")&&Jt(v.props[f])){var T=v.props[f];return[Math.min(y[0],T),Math.max(y[1],T)]}return y},g)),u.length){var p="".concat(f,"1"),x="".concat(f,"2");g=u.reduce(function(y,v){if(v.props[d]===n&&Vc(v.props,"extendDomain")&&Jt(v.props[p])&&Jt(v.props[x])){var T=v.props[p],_=v.props[x];return[Math.min(y[0],T,_),Math.max(y[1],T,_)]}return y},g)}return a&&a.length&&(g=a.reduce(function(y,v){return Jt(v)?[Math.min(y[0],v),Math.max(y[1],v)]:y},g)),g},P4={exports:{}},aW;function r8e(){return aW||(aW=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function a(l,u,d,f,g){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new s(d,f||l,g),x=r?r+u:u;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],p]:l._events[x].push(p):(l._events[x]=p,l._eventsCount++),l}function i(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var g=0,p=f.length,x=new Array(p);g<p;g++)x[g]=f[g].fn;return x},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,g,p,x){var y=r?r+u:u;if(!this._events[y])return!1;var v=this._events[y],T=arguments.length,_,b;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),T){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,g),!0;case 5:return v.fn.call(v.context,d,f,g,p),!0;case 6:return v.fn.call(v.context,d,f,g,p,x),!0}for(b=1,_=new Array(T-1);b<T;b++)_[b-1]=arguments[b];v.fn.apply(v.context,_)}else{var E=v.length,k;for(b=0;b<E;b++)switch(v[b].once&&this.removeListener(u,v[b].fn,void 0,!0),T){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,d);break;case 3:v[b].fn.call(v[b].context,d,f);break;case 4:v[b].fn.call(v[b].context,d,f,g);break;default:if(!_)for(k=1,_=new Array(T-1);k<T;k++)_[k-1]=arguments[k];v[b].fn.apply(v[b].context,_)}}return!0},o.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,g){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return i(this,p),this;var x=this._events[p];if(x.fn)x.fn===d&&(!g||x.once)&&(!f||x.context===f)&&i(this,p);else{for(var y=0,v=[],T=x.length;y<T;y++)(x[y].fn!==d||g&&!x[y].once||f&&x[y].context!==f)&&v.push(x[y]);v.length?this._events[p]=v.length===1?v[0]:v:i(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(P4)),P4.exports}var n8e=r8e();const s8e=kn(n8e);var O4=new s8e,F4="recharts.syncMouseEvents";function l1(e){"@babel/helpers - typeof";return l1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l1(e)}function a8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i8e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tQ(n.key),n)}}function o8e(e,t,r){return t&&i8e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function R4(e,t,r){return t=tQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tQ(e){var t=l8e(e,"string");return l1(t)=="symbol"?t:t+""}function l8e(e,t){if(l1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(l1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var c8e=(function(){function e(){a8e(this,e),R4(this,"activeIndex",0),R4(this,"coordinateList",[]),R4(this,"layout","horizontal")}return o8e(e,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,a=s===void 0?null:s,i=r.container,o=i===void 0?null:i,l=r.layout,u=l===void 0?null:l,d=r.offset,f=d===void 0?null:d,g=r.mouseHandlerCallback,p=g===void 0?null:g;this.coordinateList=(n=a??this.coordinateList)!==null&&n!==void 0?n:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),a=s.x,i=s.y,o=s.height,l=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=a+l+u,g=i+this.offset.top+o/2+d;this.mouseHandlerCallback({pageX:f,pageY:g})}}}])})();function u8e(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e?.[0],s=e?.[1];if(n&&s&&Jt(n)&&Jt(s))return!0}return!1}function d8e(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function rQ(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,a=e.endAngle,i=ii(t,r,n,s),o=ii(t,r,n,a);return{points:[i,o],cx:t,cy:r,radius:n,startAngle:s,endAngle:a}}function f8e(e,t,r){var n,s,a,i;if(e==="horizontal")n=t.x,a=n,s=r.top,i=r.top+r.height;else if(e==="vertical")s=t.y,i=s,n=r.left,a=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var o=t.cx,l=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,g=ii(o,l,u,f),p=ii(o,l,d,f);n=g.x,s=g.y,a=p.x,i=p.y}else return rQ(t);return[{x:n,y:s},{x:a,y:i}]}function c1(e){"@babel/helpers - typeof";return c1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c1(e)}function iW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iW(Object(r),!0).forEach(function(n){h8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function h8e(e,t,r){return t=g8e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g8e(e){var t=p8e(e,"string");return c1(t)=="symbol"?t:t+""}function p8e(e,t){if(c1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(c1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m8e(e){var t,r,n=e.element,s=e.tooltipEventType,a=e.isActive,i=e.activeCoordinate,o=e.activePayload,l=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,g=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!a||!i||g!=="ScatterChart"&&s!=="axis")return null;var x,y=B3;if(g==="ScatterChart")x=i,y=h5e;else if(g==="BarChart")x=d8e(f,i,l,d),y=MP;else if(f==="radial"){var v=rQ(i),T=v.cx,_=v.cy,b=v.radius,E=v.startAngle,k=v.endAngle;x={cx:T,cy:_,startAngle:E,endAngle:k,innerRadius:b,outerRadius:b},y=uJ}else x={points:f8e(f,i,l)},y=B3;var A=Fb(Fb(Fb(Fb({stroke:"#ccc",pointerEvents:"none"},l),x),cn(p,!1)),{},{payload:o,payloadIndex:u,className:hn("recharts-tooltip-cursor",p.className)});return C.isValidElement(p)?C.cloneElement(p,A):C.createElement(y,A)}var y8e=["item"],x8e=["children","className","width","height","style","compact","title","desc"];function qp(e){"@babel/helpers - typeof";return qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qp(e)}function Zg(){return Zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zg.apply(this,arguments)}function oW(e,t){return b8e(e)||w8e(e,t)||sQ(e,t)||v8e()}function v8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w8e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,a,i,o=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(l=(n=a.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(d){u=!0,s=d}finally{try{if(!l&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function b8e(e){if(Array.isArray(e))return e}function lW(e,t){if(e==null)return{};var r=_8e(e,t),n,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _8e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function S8e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k8e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aQ(n.key),n)}}function T8e(e,t,r){return t&&k8e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function C8e(e,t,r){return t=N2(t),E8e(e,nQ()?Reflect.construct(t,r||[],N2(e).constructor):t.apply(e,r))}function E8e(e,t){if(t&&(qp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N8e(e)}function N8e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nQ=function(){return!!e})()}function N2(e){return N2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},N2(e)}function A8e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pj(e,t)}function pj(e,t){return pj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},pj(e,t)}function Kp(e){return O8e(e)||P8e(e)||sQ(e)||j8e()}function j8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sQ(e,t){if(e){if(typeof e=="string")return mj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mj(e,t)}}function P8e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function O8e(e){if(Array.isArray(e))return mj(e)}function mj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cW(Object(r),!0).forEach(function(n){Nr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nr(e,t,r){return t=aQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aQ(e){var t=F8e(e,"string");return qp(t)=="symbol"?t:t+""}function F8e(e,t){if(qp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R8e={xAxis:["bottom","top"],yAxis:["left","right"]},D8e={width:"100%",height:"100%"},iQ={x:0,y:0};function Rb(e){return e}var I8e=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},M8e=function(t,r,n,s){var a=r.find(function(d){return d&&d.index===n});if(a){if(t==="horizontal")return{x:a.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:a.coordinate};if(t==="centric"){var i=a.coordinate,o=s.radius;return St(St(St({},s),ii(s.cx,s.cy,o,i)),{},{angle:i,radius:o})}var l=a.coordinate,u=s.angle;return St(St(St({},s),ii(s.cx,s.cy,l,u)),{},{angle:u,radius:l})}return iQ},GS=function(t,r){var n=r.graphicalItems,s=r.dataStartIndex,a=r.dataEndIndex,i=(n??[]).reduce(function(o,l){var u=l.props.data;return u&&u.length?[].concat(Kp(o),Kp(u)):o},[]);return i.length>0?i:t&&t.length&&Jt(s)&&Jt(a)?t.slice(s,a+1):[]};function oQ(e){return e==="number"?[0,"auto"]:void 0}var yj=function(t,r,n,s){var a=t.graphicalItems,i=t.tooltipAxis,o=GS(r,t);return n<0||!a||!a.length||n>=o.length?null:a.reduce(function(l,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var g;if(i.dataKey&&!i.allowDuplicatedCategory){var p=f===void 0?o:f;g=F_(p,i.dataKey,s)}else g=f&&f[n]||o[n];return g?[].concat(Kp(l),[oJ(u,g)]):l},[])},uW=function(t,r,n,s){var a=s||{x:t.chartX,y:t.chartY},i=I8e(a,n),o=t.orderedTooltipTicks,l=t.tooltipAxis,u=t.tooltipTicks,d=X4e(i,o,u,l);if(d>=0&&u){var f=u[d]&&u[d].value,g=yj(t,r,d,f),p=M8e(n,o,d,a);return{activeTooltipIndex:d,activeLabel:f,activePayload:g,activeCoordinate:p}}return null},L8e=function(t,r){var n=r.axes,s=r.graphicalItems,a=r.axisType,i=r.axisIdKey,o=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,g=t.stackOffset,p=sJ(d,a);return n.reduce(function(x,y){var v,T=y.type.defaultProps!==void 0?St(St({},y.type.defaultProps),y.props):y.props,_=T.type,b=T.dataKey,E=T.allowDataOverflow,k=T.allowDuplicatedCategory,A=T.scale,P=T.ticks,j=T.includeHidden,O=T[i];if(x[O])return x;var R=GS(t.data,{graphicalItems:s.filter(function(L){var H,J=i in L.props?L.props[i]:(H=L.type.defaultProps)===null||H===void 0?void 0:H[i];return J===O}),dataStartIndex:l,dataEndIndex:u}),M=R.length,G,K,re;u8e(T.domain,E,_)&&(G=R3(T.domain,null,E),p&&(_==="number"||A!=="auto")&&(re=Kx(R,b,"category")));var Y=oQ(_);if(!G||G.length===0){var ee,B=(ee=T.domain)!==null&&ee!==void 0?ee:Y;if(b){if(G=Kx(R,b,_),_==="category"&&p){var z=B_e(G);k&&z?(K=G,G=p2(0,M)):k||(G=b$(B,G,y).reduce(function(L,H){return L.indexOf(H)>=0?L:[].concat(Kp(L),[H])},[]))}else if(_==="category")k?G=G.filter(function(L){return L!==""&&!sn(L)}):G=b$(B,G,y).reduce(function(L,H){return L.indexOf(H)>=0||H===""||sn(H)?L:[].concat(Kp(L),[H])},[]);else if(_==="number"){var I=eAe(R,s.filter(function(L){var H,J,Q=i in L.props?L.props[i]:(H=L.type.defaultProps)===null||H===void 0?void 0:H[i],ne="hide"in L.props?L.props.hide:(J=L.type.defaultProps)===null||J===void 0?void 0:J.hide;return Q===O&&(j||!ne)}),b,a,d);I&&(G=I)}p&&(_==="number"||A!=="auto")&&(re=Kx(R,b,"category"))}else p?G=p2(0,M):o&&o[O]&&o[O].hasStack&&_==="number"?G=g==="expand"?[0,1]:iJ(o[O].stackGroups,l,u):G=nJ(R,s.filter(function(L){var H=i in L.props?L.props[i]:L.type.defaultProps[i],J="hide"in L.props?L.props.hide:L.type.defaultProps.hide;return H===O&&(j||!J)}),_,d,!0);if(_==="number")G=gj(f,G,O,a,P),B&&(G=R3(B,G,E));else if(_==="category"&&B){var W=B,V=G.every(function(L){return W.indexOf(L)>=0});V&&(G=W)}}return St(St({},x),{},Nr({},O,St(St({},T),{},{axisType:a,domain:G,categoricalDomain:re,duplicateDomain:K,originalDomain:(v=T.domain)!==null&&v!==void 0?v:Y,isCategorical:p,layout:d})))},{})},B8e=function(t,r){var n=r.graphicalItems,s=r.Axis,a=r.axisType,i=r.axisIdKey,o=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,g=GS(t.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:u}),p=g.length,x=sJ(d,a),y=-1;return n.reduce(function(v,T){var _=T.type.defaultProps!==void 0?St(St({},T.type.defaultProps),T.props):T.props,b=_[i],E=oQ("number");if(!v[b]){y++;var k;return x?k=p2(0,p):o&&o[b]&&o[b].hasStack?(k=iJ(o[b].stackGroups,l,u),k=gj(f,k,b,a)):(k=R3(E,nJ(g,n.filter(function(A){var P,j,O=i in A.props?A.props[i]:(P=A.type.defaultProps)===null||P===void 0?void 0:P[i],R="hide"in A.props?A.props.hide:(j=A.type.defaultProps)===null||j===void 0?void 0:j.hide;return O===b&&!R}),"number",d),s.defaultProps.allowDataOverflow),k=gj(f,k,b,a)),St(St({},v),{},Nr({},b,St(St({axisType:a},s.defaultProps),{},{hide:!0,orientation:ml(R8e,"".concat(a,".").concat(y%2),null),domain:k,originalDomain:E,isCategorical:x,layout:d})))}return v},{})},$8e=function(t,r){var n=r.axisType,s=n===void 0?"xAxis":n,a=r.AxisComp,i=r.graphicalItems,o=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(s,"Id"),g=yl(d,a),p={};return g&&g.length?p=L8e(t,{axes:g,graphicalItems:i,axisType:s,axisIdKey:f,stackGroups:o,dataStartIndex:l,dataEndIndex:u}):i&&i.length&&(p=B8e(t,{Axis:a,graphicalItems:i,axisType:s,axisIdKey:f,stackGroups:o,dataStartIndex:l,dataEndIndex:u})),p},U8e=function(t){var r=ef(t),n=Bu(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:uP(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:i2(r,n)}},dW=function(t){var r=t.children,n=t.defaultShowTooltip,s=Ao(r,Lp),a=0,i=0;return t.data&&t.data.length!==0&&(i=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(a=s.props.startIndex),s.props.endIndex>=0&&(i=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:i,activeTooltipIndex:-1,isTooltipActive:!!n}},W8e=function(t){return!t||!t.length?!1:t.some(function(r){var n=Hu(r&&r.type);return n&&n.indexOf("Bar")>=0})},fW=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},z8e=function(t,r){var n=t.props,s=t.graphicalItems,a=t.xAxisMap,i=a===void 0?{}:a,o=t.yAxisMap,l=o===void 0?{}:o,u=n.width,d=n.height,f=n.children,g=n.margin||{},p=Ao(f,Lp),x=Ao(f,fp),y=Object.keys(l).reduce(function(k,A){var P=l[A],j=P.orientation;return!P.mirror&&!P.hide?St(St({},k),{},Nr({},j,k[j]+P.width)):k},{left:g.left||0,right:g.right||0}),v=Object.keys(i).reduce(function(k,A){var P=i[A],j=P.orientation;return!P.mirror&&!P.hide?St(St({},k),{},Nr({},j,ml(k,"".concat(j))+P.height)):k},{top:g.top||0,bottom:g.bottom||0}),T=St(St({},v),y),_=T.bottom;p&&(T.bottom+=p.props.height||Lp.defaultProps.height),x&&r&&(T=Q4e(T,s,n,r));var b=u-T.left-T.right,E=d-T.top-T.bottom;return St(St({brushBottom:_},T),{},{width:Math.max(b,0),height:Math.max(E,0)})},H8e=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},G8e=function(t){var r=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,a=s===void 0?"axis":s,i=t.validateTooltipEventTypes,o=i===void 0?["axis"]:i,l=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,g=function(T,_){var b=_.graphicalItems,E=_.stackGroups,k=_.offset,A=_.updateId,P=_.dataStartIndex,j=_.dataEndIndex,O=T.barSize,R=T.layout,M=T.barGap,G=T.barCategoryGap,K=T.maxBarSize,re=fW(R),Y=re.numericAxisName,ee=re.cateAxisName,B=W8e(b),z=[];return b.forEach(function(I,W){var V=GS(T.data,{graphicalItems:[I],dataStartIndex:P,dataEndIndex:j}),L=I.type.defaultProps!==void 0?St(St({},I.type.defaultProps),I.props):I.props,H=L.dataKey,J=L.maxBarSize,Q=L["".concat(Y,"Id")],ne=L["".concat(ee,"Id")],Z={},se=l.reduce(function(Fe,Ke){var xt=_["".concat(Ke.axisType,"Map")],ut=L["".concat(Ke.axisType,"Id")];xt&&xt[ut]||Ke.axisType==="zAxis"||p0();var At=xt[ut];return St(St({},Fe),{},Nr(Nr({},Ke.axisType,At),"".concat(Ke.axisType,"Ticks"),Bu(At)))},Z),ce=se[ee],he=se["".concat(ee,"Ticks")],Ee=E&&E[Q]&&E[Q].hasStack&&fAe(I,E[Q].stackGroups),ie=Hu(I.type).indexOf("Bar")>=0,me=i2(ce,he),Ne=[],Oe=B&&Y4e({barSize:O,stackGroups:E,totalSize:H8e(se,ee)});if(ie){var Re,ze,Nt=sn(J)?K:J,et=(Re=(ze=i2(ce,he,!0))!==null&&ze!==void 0?ze:Nt)!==null&&Re!==void 0?Re:0;Ne=J4e({barGap:M,barCategoryGap:G,bandSize:et!==me?et:me,sizeList:Oe[ne],maxBarSize:Nt}),et!==me&&(Ne=Ne.map(function(Fe){return St(St({},Fe),{},{position:St(St({},Fe.position),{},{offset:Fe.position.offset-et/2})})}))}var Me=I&&I.type&&I.type.getComposedData;Me&&z.push({props:St(St({},Me(St(St({},se),{},{displayedData:V,props:T,dataKey:H,item:I,bandSize:me,barPosition:Ne,offset:k,stackedData:Ee,layout:R,dataStartIndex:P,dataEndIndex:j}))),{},Nr(Nr(Nr({key:I.key||"item-".concat(W)},Y,se[Y]),ee,se[ee]),"animationId",A)),childIndex:Q_e(I,T.children),item:I})}),z},p=function(T,_){var b=T.props,E=T.dataStartIndex,k=T.dataEndIndex,A=T.updateId;if(!D7({props:b}))return null;var P=b.children,j=b.layout,O=b.stackOffset,R=b.data,M=b.reverseStackOrder,G=fW(j),K=G.numericAxisName,re=G.cateAxisName,Y=yl(P,n),ee=cAe(R,Y,"".concat(K,"Id"),"".concat(re,"Id"),O,M),B=l.reduce(function(L,H){var J="".concat(H.axisType,"Map");return St(St({},L),{},Nr({},J,$8e(b,St(St({},H),{},{graphicalItems:Y,stackGroups:H.axisType===K&&ee,dataStartIndex:E,dataEndIndex:k}))))},{}),z=z8e(St(St({},B),{},{props:b,graphicalItems:Y}),_?.legendBBox);Object.keys(B).forEach(function(L){B[L]=d(b,B[L],z,L.replace("Map",""),r)});var I=B["".concat(re,"Map")],W=U8e(I),V=g(b,St(St({},B),{},{dataStartIndex:E,dataEndIndex:k,updateId:A,graphicalItems:Y,stackGroups:ee,offset:z}));return St(St({formattedGraphicalItems:V,graphicalItems:Y,offset:z,stackGroups:ee},W),B)},x=(function(v){function T(_){var b,E,k;return S8e(this,T),k=C8e(this,T,[_]),Nr(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Nr(k,"accessibilityManager",new c8e),Nr(k,"handleLegendBBoxUpdate",function(A){if(A){var P=k.state,j=P.dataStartIndex,O=P.dataEndIndex,R=P.updateId;k.setState(St({legendBBox:A},p({props:k.props,dataStartIndex:j,dataEndIndex:O,updateId:R},St(St({},k.state),{},{legendBBox:A}))))}}),Nr(k,"handleReceiveSyncEvent",function(A,P,j){if(k.props.syncId===A){if(j===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(P)}}),Nr(k,"handleBrushChange",function(A){var P=A.startIndex,j=A.endIndex;if(P!==k.state.dataStartIndex||j!==k.state.dataEndIndex){var O=k.state.updateId;k.setState(function(){return St({dataStartIndex:P,dataEndIndex:j},p({props:k.props,dataStartIndex:P,dataEndIndex:j,updateId:O},k.state))}),k.triggerSyncEvent({dataStartIndex:P,dataEndIndex:j})}}),Nr(k,"handleMouseEnter",function(A){var P=k.getMouseInfo(A);if(P){var j=St(St({},P),{},{isTooltipActive:!0});k.setState(j),k.triggerSyncEvent(j);var O=k.props.onMouseEnter;Jr(O)&&O(j,A)}}),Nr(k,"triggeredAfterMouseMove",function(A){var P=k.getMouseInfo(A),j=P?St(St({},P),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(j),k.triggerSyncEvent(j);var O=k.props.onMouseMove;Jr(O)&&O(j,A)}),Nr(k,"handleItemMouseEnter",function(A){k.setState(function(){return{isTooltipActive:!0,activeItem:A,activePayload:A.tooltipPayload,activeCoordinate:A.tooltipPosition||{x:A.cx,y:A.cy}}})}),Nr(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),Nr(k,"handleMouseMove",function(A){A.persist(),k.throttleTriggeredAfterMouseMove(A)}),Nr(k,"handleMouseLeave",function(A){k.throttleTriggeredAfterMouseMove.cancel();var P={isTooltipActive:!1};k.setState(P),k.triggerSyncEvent(P);var j=k.props.onMouseLeave;Jr(j)&&j(P,A)}),Nr(k,"handleOuterEvent",function(A){var P=J_e(A),j=ml(k.props,"".concat(P));if(P&&Jr(j)){var O,R;/.*touch.*/i.test(P)?R=k.getMouseInfo(A.changedTouches[0]):R=k.getMouseInfo(A),j((O=R)!==null&&O!==void 0?O:{},A)}}),Nr(k,"handleClick",function(A){var P=k.getMouseInfo(A);if(P){var j=St(St({},P),{},{isTooltipActive:!0});k.setState(j),k.triggerSyncEvent(j);var O=k.props.onClick;Jr(O)&&O(j,A)}}),Nr(k,"handleMouseDown",function(A){var P=k.props.onMouseDown;if(Jr(P)){var j=k.getMouseInfo(A);P(j,A)}}),Nr(k,"handleMouseUp",function(A){var P=k.props.onMouseUp;if(Jr(P)){var j=k.getMouseInfo(A);P(j,A)}}),Nr(k,"handleTouchMove",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(A.changedTouches[0])}),Nr(k,"handleTouchStart",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&k.handleMouseDown(A.changedTouches[0])}),Nr(k,"handleTouchEnd",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&k.handleMouseUp(A.changedTouches[0])}),Nr(k,"handleDoubleClick",function(A){var P=k.props.onDoubleClick;if(Jr(P)){var j=k.getMouseInfo(A);P(j,A)}}),Nr(k,"handleContextMenu",function(A){var P=k.props.onContextMenu;if(Jr(P)){var j=k.getMouseInfo(A);P(j,A)}}),Nr(k,"triggerSyncEvent",function(A){k.props.syncId!==void 0&&O4.emit(F4,k.props.syncId,A,k.eventEmitterSymbol)}),Nr(k,"applySyncEvent",function(A){var P=k.props,j=P.layout,O=P.syncMethod,R=k.state.updateId,M=A.dataStartIndex,G=A.dataEndIndex;if(A.dataStartIndex!==void 0||A.dataEndIndex!==void 0)k.setState(St({dataStartIndex:M,dataEndIndex:G},p({props:k.props,dataStartIndex:M,dataEndIndex:G,updateId:R},k.state)));else if(A.activeTooltipIndex!==void 0){var K=A.chartX,re=A.chartY,Y=A.activeTooltipIndex,ee=k.state,B=ee.offset,z=ee.tooltipTicks;if(!B)return;if(typeof O=="function")Y=O(z,A);else if(O==="value"){Y=-1;for(var I=0;I<z.length;I++)if(z[I].value===A.activeLabel){Y=I;break}}var W=St(St({},B),{},{x:B.left,y:B.top}),V=Math.min(K,W.x+W.width),L=Math.min(re,W.y+W.height),H=z[Y]&&z[Y].value,J=yj(k.state,k.props.data,Y),Q=z[Y]?{x:j==="horizontal"?z[Y].coordinate:V,y:j==="horizontal"?L:z[Y].coordinate}:iQ;k.setState(St(St({},A),{},{activeLabel:H,activeCoordinate:Q,activePayload:J,activeTooltipIndex:Y}))}else k.setState(A)}),Nr(k,"renderCursor",function(A){var P,j=k.state,O=j.isTooltipActive,R=j.activeCoordinate,M=j.activePayload,G=j.offset,K=j.activeTooltipIndex,re=j.tooltipAxisBandSize,Y=k.getTooltipEventType(),ee=(P=A.props.active)!==null&&P!==void 0?P:O,B=k.props.layout,z=A.key||"_recharts-cursor";return Be.createElement(m8e,{key:z,activeCoordinate:R,activePayload:M,activeTooltipIndex:K,chartName:r,element:A,isActive:ee,layout:B,offset:G,tooltipAxisBandSize:re,tooltipEventType:Y})}),Nr(k,"renderPolarAxis",function(A,P,j){var O=ml(A,"type.axisType"),R=ml(k.state,"".concat(O,"Map")),M=A.type.defaultProps,G=M!==void 0?St(St({},M),A.props):A.props,K=R&&R[G["".concat(O,"Id")]];return C.cloneElement(A,St(St({},K),{},{className:hn(O,K.className),key:A.key||"".concat(P,"-").concat(j),ticks:Bu(K,!0)}))}),Nr(k,"renderPolarGrid",function(A){var P=A.props,j=P.radialLines,O=P.polarAngles,R=P.polarRadius,M=k.state,G=M.radiusAxisMap,K=M.angleAxisMap,re=ef(G),Y=ef(K),ee=Y.cx,B=Y.cy,z=Y.innerRadius,I=Y.outerRadius;return C.cloneElement(A,{polarAngles:Array.isArray(O)?O:Bu(Y,!0).map(function(W){return W.coordinate}),polarRadius:Array.isArray(R)?R:Bu(re,!0).map(function(W){return W.coordinate}),cx:ee,cy:B,innerRadius:z,outerRadius:I,key:A.key||"polar-grid",radialLines:j})}),Nr(k,"renderLegend",function(){var A=k.state.formattedGraphicalItems,P=k.props,j=P.children,O=P.width,R=P.height,M=k.props.margin||{},G=O-(M.left||0)-(M.right||0),K=tJ({children:j,formattedGraphicalItems:A,legendWidth:G,legendContent:u});if(!K)return null;var re=K.item,Y=lW(K,y8e);return C.cloneElement(re,St(St({},Y),{},{chartWidth:O,chartHeight:R,margin:M,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),Nr(k,"renderTooltip",function(){var A,P=k.props,j=P.children,O=P.accessibilityLayer,R=Ao(j,Dc);if(!R)return null;var M=k.state,G=M.isTooltipActive,K=M.activeCoordinate,re=M.activePayload,Y=M.activeLabel,ee=M.offset,B=(A=R.props.active)!==null&&A!==void 0?A:G;return C.cloneElement(R,{viewBox:St(St({},ee),{},{x:ee.left,y:ee.top}),active:B,label:Y,payload:B?re:[],coordinate:K,accessibilityLayer:O})}),Nr(k,"renderBrush",function(A){var P=k.props,j=P.margin,O=P.data,R=k.state,M=R.offset,G=R.dataStartIndex,K=R.dataEndIndex,re=R.updateId;return C.cloneElement(A,{key:A.key||"_recharts-brush",onChange:Ab(k.handleBrushChange,A.props.onChange),data:O,x:Jt(A.props.x)?A.props.x:M.left,y:Jt(A.props.y)?A.props.y:M.top+M.height+M.brushBottom-(j.bottom||0),width:Jt(A.props.width)?A.props.width:M.width,startIndex:G,endIndex:K,updateId:"brush-".concat(re)})}),Nr(k,"renderReferenceElement",function(A,P,j){if(!A)return null;var O=k,R=O.clipPathId,M=k.state,G=M.xAxisMap,K=M.yAxisMap,re=M.offset,Y=A.type.defaultProps||{},ee=A.props,B=ee.xAxisId,z=B===void 0?Y.xAxisId:B,I=ee.yAxisId,W=I===void 0?Y.yAxisId:I;return C.cloneElement(A,{key:A.key||"".concat(P,"-").concat(j),xAxis:G[z],yAxis:K[W],viewBox:{x:re.left,y:re.top,width:re.width,height:re.height},clipPathId:R})}),Nr(k,"renderActivePoints",function(A){var P=A.item,j=A.activePoint,O=A.basePoint,R=A.childIndex,M=A.isRange,G=[],K=P.props.key,re=P.item.type.defaultProps!==void 0?St(St({},P.item.type.defaultProps),P.item.props):P.item.props,Y=re.activeDot,ee=re.dataKey,B=St(St({index:R,dataKey:ee,cx:j.x,cy:j.y,r:4,fill:IP(P.item),strokeWidth:2,stroke:"#fff",payload:j.payload,value:j.value},cn(Y,!1)),R_(Y));return G.push(T.renderActiveDot(Y,B,"".concat(K,"-activePoint-").concat(R))),O?G.push(T.renderActiveDot(Y,St(St({},B),{},{cx:O.x,cy:O.y}),"".concat(K,"-basePoint-").concat(R))):M&&G.push(null),G}),Nr(k,"renderGraphicChild",function(A,P,j){var O=k.filterFormatItem(A,P,j);if(!O)return null;var R=k.getTooltipEventType(),M=k.state,G=M.isTooltipActive,K=M.tooltipAxis,re=M.activeTooltipIndex,Y=M.activeLabel,ee=k.props.children,B=Ao(ee,Dc),z=O.props,I=z.points,W=z.isRange,V=z.baseLine,L=O.item.type.defaultProps!==void 0?St(St({},O.item.type.defaultProps),O.item.props):O.item.props,H=L.activeDot,J=L.hide,Q=L.activeBar,ne=L.activeShape,Z=!!(!J&&G&&B&&(H||Q||ne)),se={};R!=="axis"&&B&&B.props.trigger==="click"?se={onClick:Ab(k.handleItemMouseEnter,A.props.onClick)}:R!=="axis"&&(se={onMouseLeave:Ab(k.handleItemMouseLeave,A.props.onMouseLeave),onMouseEnter:Ab(k.handleItemMouseEnter,A.props.onMouseEnter)});var ce=C.cloneElement(A,St(St({},O.props),se));function he(Ke){return typeof K.dataKey=="function"?K.dataKey(Ke.payload):null}if(Z)if(re>=0){var Ee,ie;if(K.dataKey&&!K.allowDuplicatedCategory){var me=typeof K.dataKey=="function"?he:"payload.".concat(K.dataKey.toString());Ee=F_(I,me,Y),ie=W&&V&&F_(V,me,Y)}else Ee=I?.[re],ie=W&&V&&V[re];if(ne||Q){var Ne=A.props.activeIndex!==void 0?A.props.activeIndex:re;return[C.cloneElement(A,St(St(St({},O.props),se),{},{activeIndex:Ne})),null,null]}if(!sn(Ee))return[ce].concat(Kp(k.renderActivePoints({item:O,activePoint:Ee,basePoint:ie,childIndex:re,isRange:W})))}else{var Oe,Re=(Oe=k.getItemByXY(k.state.activeCoordinate))!==null&&Oe!==void 0?Oe:{graphicalItem:ce},ze=Re.graphicalItem,Nt=ze.item,et=Nt===void 0?A:Nt,Me=ze.childIndex,Fe=St(St(St({},O.props),se),{},{activeIndex:Me});return[C.cloneElement(et,Fe),null,null]}return W?[ce,null,null]:[ce,null]}),Nr(k,"renderCustomized",function(A,P,j){return C.cloneElement(A,St(St({key:"recharts-customized-".concat(j)},k.props),k.state))}),Nr(k,"renderMap",{CartesianGrid:{handler:Rb,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:Rb},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:Rb},YAxis:{handler:Rb},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((b=_.id)!==null&&b!==void 0?b:U1("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=eY(k.triggeredAfterMouseMove,(E=_.throttleDelay)!==null&&E!==void 0?E:1e3/60),k.state={},k}return A8e(T,v),T8e(T,[{key:"componentDidMount",value:function(){var b,E;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,E=b.children,k=b.data,A=b.height,P=b.layout,j=Ao(E,Dc);if(j){var O=j.props.defaultIndex;if(!(typeof O!="number"||O<0||O>this.state.tooltipTicks.length-1)){var R=this.state.tooltipTicks[O]&&this.state.tooltipTicks[O].value,M=yj(this.state,k,O,R),G=this.state.tooltipTicks[O].coordinate,K=(this.state.offset.top+A)/2,re=P==="horizontal",Y=re?{x:G,y:K}:{y:G,x:K},ee=this.state.formattedGraphicalItems.find(function(z){var I=z.item;return I.type.name==="Scatter"});ee&&(Y=St(St({},Y),ee.props.points[O].tooltipPosition),M=ee.props.points[O].tooltipPayload);var B={activeTooltipIndex:O,isTooltipActive:!0,activeLabel:R,activePayload:M,activeCoordinate:Y};this.setState(B),this.renderCursor(j),this.accessibilityManager.setIndex(O)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,E){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==E.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var k,A;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0}})}return null}},{key:"componentDidUpdate",value:function(b){r3([Ao(b.children,Dc)],[Ao(this.props.children,Dc)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=Ao(this.props.children,Dc);if(b&&typeof b.props.shared=="boolean"){var E=b.props.shared?"axis":"item";return o.indexOf(E)>=0?E:a}return a}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var E=this.container,k=E.getBoundingClientRect(),A=BTe(k),P={chartX:Math.round(b.pageX-A.left),chartY:Math.round(b.pageY-A.top)},j=k.width/E.offsetWidth||1,O=this.inRange(P.chartX,P.chartY,j);if(!O)return null;var R=this.state,M=R.xAxisMap,G=R.yAxisMap,K=this.getTooltipEventType(),re=uW(this.state,this.props.data,this.props.layout,O);if(K!=="axis"&&M&&G){var Y=ef(M).scale,ee=ef(G).scale,B=Y&&Y.invert?Y.invert(P.chartX):null,z=ee&&ee.invert?ee.invert(P.chartY):null;return St(St({},P),{},{xValue:B,yValue:z},re)}return re?St(St({},P),re):null}},{key:"inRange",value:function(b,E){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,A=this.props.layout,P=b/k,j=E/k;if(A==="horizontal"||A==="vertical"){var O=this.state.offset,R=P>=O.left&&P<=O.left+O.width&&j>=O.top&&j<=O.top+O.height;return R?{x:P,y:j}:null}var M=this.state,G=M.angleAxisMap,K=M.radiusAxisMap;if(G&&K){var re=ef(G);return k$({x:P,y:j},re)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,E=this.getTooltipEventType(),k=Ao(b,Dc),A={};k&&E==="axis"&&(k.props.trigger==="click"?A={onClick:this.handleClick}:A={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var P=R_(this.props,this.handleOuterEvent);return St(St({},P),A)}},{key:"addListener",value:function(){O4.on(F4,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){O4.removeListener(F4,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,E,k){for(var A=this.state.formattedGraphicalItems,P=0,j=A.length;P<j;P++){var O=A[P];if(O.item===b||O.props.key===b.key||E===Hu(O.item.type)&&k===O.childIndex)return O}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,E=this.state.offset,k=E.left,A=E.top,P=E.height,j=E.width;return Be.createElement("defs",null,Be.createElement("clipPath",{id:b},Be.createElement("rect",{x:k,y:A,height:P,width:j})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(E,k){var A=oW(k,2),P=A[0],j=A[1];return St(St({},E),{},Nr({},P,j.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(E,k){var A=oW(k,2),P=A[0],j=A[1];return St(St({},E),{},Nr({},P,j.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var E;return(E=this.state.xAxisMap)===null||E===void 0||(E=E[b])===null||E===void 0?void 0:E.scale}},{key:"getYScaleByAxisId",value:function(b){var E;return(E=this.state.yAxisMap)===null||E===void 0||(E=E[b])===null||E===void 0?void 0:E.scale}},{key:"getItemByXY",value:function(b){var E=this.state,k=E.formattedGraphicalItems,A=E.activeItem;if(k&&k.length)for(var P=0,j=k.length;P<j;P++){var O=k[P],R=O.props,M=O.item,G=M.type.defaultProps!==void 0?St(St({},M.type.defaultProps),M.props):M.props,K=Hu(M.type);if(K==="Bar"){var re=(R.data||[]).find(function(z){return n5e(b,z)});if(re)return{graphicalItem:O,payload:re}}else if(K==="RadialBar"){var Y=(R.data||[]).find(function(z){return k$(b,z)});if(Y)return{graphicalItem:O,payload:Y}}else if(IS(O,A)||MS(O,A)||n1(O,A)){var ee=q5e({graphicalItem:O,activeTooltipItem:A,itemData:G.data}),B=G.activeIndex===void 0?ee:G.activeIndex;return{graphicalItem:St(St({},O),{},{childIndex:B}),payload:n1(O,A)?G.data[ee]:O.props.data[ee]}}}return null}},{key:"render",value:function(){var b=this;if(!D7(this))return null;var E=this.props,k=E.children,A=E.className,P=E.width,j=E.height,O=E.style,R=E.compact,M=E.title,G=E.desc,K=lW(E,x8e),re=cn(K,!1);if(R)return Be.createElement(WU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Be.createElement(s3,Zg({},re,{width:P,height:j,title:M,desc:G}),this.renderClipPath(),M7(k,this.renderMap)));if(this.props.accessibilityLayer){var Y,ee;re.tabIndex=(Y=this.props.tabIndex)!==null&&Y!==void 0?Y:0,re.role=(ee=this.props.role)!==null&&ee!==void 0?ee:"application",re.onKeyDown=function(z){b.accessibilityManager.keyboardEvent(z)},re.onFocus=function(){b.accessibilityManager.focus()}}var B=this.parseEventsOfWrapper();return Be.createElement(WU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Be.createElement("div",Zg({className:hn("recharts-wrapper",A),style:St({position:"relative",cursor:"default",width:P,height:j},O)},B,{ref:function(I){b.container=I}}),Be.createElement(s3,Zg({},re,{width:P,height:j,title:M,desc:G,style:D8e}),this.renderClipPath(),M7(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(C.Component);Nr(x,"displayName",r),Nr(x,"defaultProps",St({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Nr(x,"getDerivedStateFromProps",function(v,T){var _=v.dataKey,b=v.data,E=v.children,k=v.width,A=v.height,P=v.layout,j=v.stackOffset,O=v.margin,R=T.dataStartIndex,M=T.dataEndIndex;if(T.updateId===void 0){var G=dW(v);return St(St(St({},G),{},{updateId:0},p(St(St({props:v},G),{},{updateId:0}),T)),{},{prevDataKey:_,prevData:b,prevWidth:k,prevHeight:A,prevLayout:P,prevStackOffset:j,prevMargin:O,prevChildren:E})}if(_!==T.prevDataKey||b!==T.prevData||k!==T.prevWidth||A!==T.prevHeight||P!==T.prevLayout||j!==T.prevStackOffset||!dp(O,T.prevMargin)){var K=dW(v),re={chartX:T.chartX,chartY:T.chartY,isTooltipActive:T.isTooltipActive},Y=St(St({},uW(T,b,P)),{},{updateId:T.updateId+1}),ee=St(St(St({},K),re),Y);return St(St(St({},ee),p(St({props:v},ee),T)),{},{prevDataKey:_,prevData:b,prevWidth:k,prevHeight:A,prevLayout:P,prevStackOffset:j,prevMargin:O,prevChildren:E})}if(!r3(E,T.prevChildren)){var B,z,I,W,V=Ao(E,Lp),L=V&&(B=(z=V.props)===null||z===void 0?void 0:z.startIndex)!==null&&B!==void 0?B:R,H=V&&(I=(W=V.props)===null||W===void 0?void 0:W.endIndex)!==null&&I!==void 0?I:M,J=L!==R||H!==M,Q=!sn(b),ne=Q&&!J?T.updateId:T.updateId+1;return St(St({updateId:ne},p(St(St({props:v},T),{},{updateId:ne,dataStartIndex:L,dataEndIndex:H}),T)),{},{prevChildren:E,dataStartIndex:L,dataEndIndex:H})}return null}),Nr(x,"renderActiveDot",function(v,T,_){var b;return C.isValidElement(v)?b=C.cloneElement(v,T):Jr(v)?b=v(T):b=Be.createElement(LP,T),Be.createElement(Gs,{className:"recharts-active-dot",key:_},b)});var y=C.forwardRef(function(T,_){return Be.createElement(x,Zg({},T,{ref:_}))});return y.displayName=x.displayName,y},V8e=G8e({chartName:"LineChart",GraphicalChild:X1,axisComponents:[{axisType:"xAxis",AxisComp:zS},{axisType:"yAxis",AxisComp:HS}],formatAxisMap:z6e});const q8e=({data:e=[],loading:t=!1,error:r=null})=>{if(t)return c.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:c.jsx("div",{className:"spinner-border text-primary",role:"status",children:c.jsx("span",{className:"visually-hidden",children:"Loading..."})})});if(r)return c.jsxs("div",{className:"alert alert-danger",role:"alert",children:[c.jsx("h5",{className:"alert-heading",children:"Error Loading Performance Data"}),c.jsx("p",{children:r})]});if(!e||e.length===0)return c.jsx("div",{className:"text-center text-muted",style:{height:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs("div",{children:[c.jsx("h5",{children:"No Test Data Available"}),c.jsx("p",{children:"No tests have been completed yet for the current term."})]})});const n=e.map(s=>({testName:s.test_name,testDate:s.submitted_at,averageScore:parseFloat(s.average_score),totalStudents:s.total_students,testId:s.test_id}));return c.jsxs("div",{className:"test-performance-graph",children:[c.jsx("div",{style:{width:"100%",height:"400px"},children:c.jsx(OTe,{children:c.jsxs(V8e,{data:n,margin:{top:20,right:30,left:20,bottom:20},children:[c.jsx(VJ,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),c.jsx(zS,{dataKey:"testDate",tickFormatter:s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"}),stroke:"#666",fontSize:12}),c.jsx(HS,{domain:[0,100],tickFormatter:s=>`${s}%`,stroke:"#666",fontSize:12}),c.jsx(Dc,{formatter:(s,a)=>[`${parseFloat(s).toFixed(1)}%`,"Average Score"],labelFormatter:s=>{const a=n.find(i=>i.testDate===s);if(a){const i=new Date(s);return`${a.testName} (${i.toLocaleDateString("en-US",{month:"long",day:"numeric"})})`}return s},contentStyle:{backgroundColor:"#fff",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),c.jsx(X1,{type:"monotone",dataKey:"averageScore",stroke:"#007bff",strokeWidth:3,connectNulls:!0,dot:{r:6,fill:"#007bff",stroke:"#fff",strokeWidth:2},activeDot:{r:8,fill:"#ff6b35",stroke:"#fff",strokeWidth:2}})]})})}),c.jsx("div",{className:"mt-3",children:c.jsxs("div",{className:"row",children:[c.jsx("div",{className:"col-md-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("strong",{children:n.length}),c.jsx("br",{}),c.jsx("small",{className:"text-muted",children:"Total Tests"})]})}),c.jsx("div",{className:"col-md-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("strong",{children:n.length>0?`${(n.reduce((s,a)=>s+a.averageScore,0)/n.length).toFixed(1)}%`:"N/A"}),c.jsx("br",{}),c.jsx("small",{className:"text-muted",children:"Average Score"})]})}),c.jsx("div",{className:"col-md-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("strong",{children:n.length>0?n.reduce((s,a)=>a.averageScore>s.averageScore?a:s).testName:"N/A"}),c.jsx("br",{}),c.jsx("small",{className:"text-muted",children:"Best Test"})]})}),c.jsx("div",{className:"col-md-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("strong",{children:n.length>0?n[n.length-1].testName:"N/A"}),c.jsx("br",{}),c.jsx("small",{className:"text-muted",children:"Latest Test"})]})})]})})]})},Db=window.location.hostname!=="localhost"&&!window.location.hostname.includes("127.0.0.1")&&!window.location.hostname.includes("netlify.app")&&!window.location.hostname.includes("vercel.app")&&!window.location.hostname.includes("github.io"),jn={debug:(e,...t)=>{Db||console.log(e,...t)},warn:(e,...t)=>{Db||console.warn(e,...t)},error:(e,...t)=>{console.error(e,...t)},info:(e,...t)=>{Db||console.info(e,...t)},isEnabled:()=>!Db},hW=({onBackToLogin:e})=>{const t=yo(),{user:r,isAuthenticated:n,logout:s,getCurrentTeacherUsername:a}=ls(),{teacherData:i,loadTeacherData:o}=rS(),{activeTests:l,loadActiveTests:u}=A1(),{showNotification:d,notifications:f}=Ba(),[g,p]=C.useState(!0),[x,y]=C.useState(""),[v,T]=C.useState("main"),[_,b]=C.useState([]),[E,k]=C.useState([]),[A,P]=C.useState(null),[j,O]=C.useState(null),[R,M]=C.useState(null),[G,K]=C.useState(!1),[re,Y]=C.useState(!1),[ee,B]=C.useState(null),[z,I]=C.useState(!1),[W,V]=C.useState(null),[L,H]=C.useState(!1),[J,Q]=C.useState(null),[ne,Z]=C.useState(null),[se,ce]=C.useState([]),[he,Ee]=C.useState(!1),[ie,me]=C.useState([]),[Ne,Oe]=C.useState(!1),[Re,ze]=C.useState(null),[Nt,et]=C.useState(null),[Me,Fe]=C.useState(!1),[Ke,xt]=C.useState(!1),[ut,At]=C.useState(0),[Dt,Qe]=C.useState(!1),[tt,vt]=C.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[gt,_t]=C.useState([]),[Wt,Zt]=C.useState([]),[pr,Ir]=C.useState(!1),[br,xr]=C.useState(!1),[er,_r]=C.useState(null),[ge,ue]=C.useState([]),[we,Te]=C.useState(!1),[Xe,Ct]=C.useState("subject");C.useEffect(()=>{Vr()},[]),C.useEffect(()=>{const ye=$e=>{Me&&!$e.target.closest(".relative")&&Fe(!1),Ke&&!$e.target.closest(".relative")&&xt(!1)};return document.addEventListener("mousedown",ye),()=>{document.removeEventListener("mousedown",ye)}},[Me,Ke]);const Pt=C.useCallback(()=>{console.log(" showChangePasswordTab called"),Qe(!0),Fe(!1),xt(!1)},[]),Ue=C.useCallback(()=>{console.log(" hideChangePasswordTab called"),Qe(!1),vt({currentPassword:"",newPassword:"",confirmPassword:""})},[]),ft=C.useCallback(async()=>{if(!r)return;const{currentPassword:ye,newPassword:$e,confirmPassword:Pe}=tt;if(!ye||!$e||!Pe){d("Please fill in all fields","error");return}if($e!==Pe){d("New passwords do not match","error");return}if($e.length<6){d("New password must be at least 6 characters long","error");return}const Tt=/[a-zA-Z]/.test($e),kt=/[0-9]/.test($e);if(!Tt||!kt){d("New password must contain both letters and numbers","error");return}try{const nr=await ts.changePassword({username:r.username,currentPassword:ye,newPassword:$e});nr.success?(d("Password changed successfully!","success"),Ue()):d(nr.message||"Failed to change password","error")}catch(nr){console.error("Password change error:",nr),d("Failed to change password. Please try again.","error")}},[r,tt,d]),ot=C.useCallback(ye=>{const{name:$e,value:Pe}=ye.target;vt(Tt=>({...Tt,[$e]:Pe}))},[]),Ht=C.useCallback(async()=>{jn.debug(" Loading teacher data...");try{const ye=await ts.getTeacherData();return jn.debug(" Teacher data loaded:",ye),Z(new Date),ye}catch(ye){throw jn.error(" Error loading teacher data:",ye),ye}},[]),Gt=C.useCallback(async(ye=null)=>{jn.debug(" Loading teacher subjects...");try{if(!ye){const Tt=`teacher_subjects_${r?.teacher_id||r?.id||""}`,kt=ms(Tt);if(kt)return jn.debug(" Using cached teacher subjects"),b(kt),kt}let $e=ye,Pe;if(ye?(jn.debug(" Using passed teacher data for subjects"),Pe=ts.getTeacherSubjects(ye.subjects)):(jn.debug(" No teacher data passed, fetching from API"),$e=await ts.getTeacherData(),jn.debug(" Raw teacher data:",$e),Pe=ts.getTeacherSubjects($e.subjects)),jn.debug(" Teacher subjects loaded:",Pe),b(Pe),!ye){const Tt=`teacher_subjects_${r?.teacher_id||r?.id||""}`;ys(Tt,Pe,Os.teacher_subjects)}return jn.debug(" Available classes for performance chart:",Pe[0]?.classes||[]),jn.debug(" Performance chart will load when user clicks on a class"),Pe}catch($e){throw jn.error(" Error loading teacher subjects:",$e),$e}},[r?.teacher_id,r?.id]),mr=C.useCallback(async()=>{jn.debug(" Loading teacher active tests...");try{const ye=`teacher_tests_${r?.teacher_id||r?.id||""}`,$e=ms(ye);$e&&$e.some(kt=>kt.test_type==="drawing")&&(jn.debug(" Drawing test detected - forcing cache refresh"),localStorage.removeItem(ye));const Pe=ms(ye);if(Pe)return jn.debug(" Using cached teacher tests"),k(Pe),Pe;const Tt=await yn.getTeacherTests();return jn.debug(" Teacher tests loaded:",Tt),k(Tt),ys(ye,Tt,Os.teacher_tests),Tt}catch(ye){throw jn.error(" Error loading teacher tests:",ye),ye}},[r?.teacher_id,r?.id]),Vr=C.useCallback(async()=>{jn.debug(" Initializing Teacher Cabinet...");try{if(p(!0),y(""),!n||!r){jn.debug(" User not authenticated"),y("User not authenticated");return}if(r.role!==Gi.TEACHER){jn.error(" Invalid user role for teacher cabinet:",r.role),y("Access denied. Teacher role required.");return}jn.debug(" Loading teacher data...");const ye=await Ht();jn.debug(" Loading subjects and tests in parallel...");const[$e,Pe]=await Promise.allSettled([Gt(ye),mr()]);let Tt=!1;$e.status==="rejected"&&(jn.warn(" Subjects loading failed:",$e.reason),Tt=!0),Pe.status==="rejected"&&(jn.warn(" Tests loading failed:",Pe.reason),Tt=!0),Tt&&d("Some data failed to load, but you can continue","warning"),jn.debug(" Teacher Cabinet initialization complete!")}catch(ye){jn.error(" Error initializing teacher cabinet:",ye),y("Failed to initialize teacher cabinet")}finally{p(!1)}},[n,r,Ht,Gt,mr,d]),vr=C.useCallback(()=>{console.log(" Showing subject selection prompt..."),K(!0),hr(),Ct("subject")},[]),hr=C.useCallback(async()=>{console.log(" Loading available subjects..."),Ir(!0);try{const ye=await ts.getSubjectsForSelection();_t(ye),console.log(" Available subjects loaded:",ye)}catch(ye){console.error(" Error loading available subjects:",ye),d("Failed to load subjects","error")}finally{Ir(!1)}},[]),le=C.useCallback(ye=>{if(!ye){_r(null);return}const $e=gt.find(Pe=>Pe.subject_id==ye);$e&&(_r($e),ue([]),Ct("classes"))},[gt]),_e=C.useCallback((ye,$e)=>{ue(Pe=>Pe.some(Tt=>Tt.grade===ye&&Tt.class===$e)?Pe.filter(Tt=>!(Tt.grade===ye&&Tt.class===$e)):[...Pe,{grade:ye,class:$e}])},[]),pe=C.useCallback(()=>{if(!er||ge.length===0){d("Please select at least one class","warning");return}const ye={subject_id:parseInt(er.subject_id),subject_name:er.subject,classes:ge};Zt($e=>[...$e,ye]),_r(null),ue([]),Ct("subject"),d(`Added ${er.subject} with ${ge.length} classes`,"success")},[er,ge]),ve=C.useCallback(ye=>{Zt($e=>$e.filter((Pe,Tt)=>Tt!==ye))},[]),Se=C.useCallback(async(ye,$e,Pe)=>{console.log(" Deleting teacher subject:",{subjectId:ye,grade:$e,classNumber:Pe});try{const Tt={subjectId:ye,grade:$e,class:Pe};console.log(" Sending delete request with data:",Tt);const kt=await ts.deleteTeacherSubject(Tt);if(kt.success)d("Subject assignment deleted successfully!","success"),await Gt();else throw new Error(kt.error||"Failed to delete subject assignment")}catch(Tt){console.error(" Error deleting subject assignment:",Tt),d("Error deleting subject assignment. Please try again.","error")}},[Gt,d]),ke=C.useCallback((ye,$e,Pe,Tt)=>{Q({subjectId:ye,subjectName:$e,grade:Pe,classNumber:Tt}),H(!0)},[]),Ge=C.useCallback(async()=>{J&&(await Se(J.subjectId,J.grade,J.classNumber),H(!1),Q(null))},[J,Se]),dt=C.useCallback(()=>{H(!1),Q(null)},[]),Ie=C.useCallback(async()=>{if(Wt.length===0){d("Please select at least one subject","warning");return}xr(!0);try{const ye=await ts.saveTeacherSubjects(Wt);if(ye.success)d("Subjects saved successfully!","success"),K(!1),Zt([]),Ct("subject"),await Gt();else throw new Error(ye.error||"Failed to save subjects")}catch(ye){console.error(" Error saving teacher subjects:",ye),d("Failed to save subjects","error")}finally{xr(!1)}},[Wt,Gt]);C.useCallback(async ye=>{console.log(" Saving teacher subjects:",ye);try{const $e=await ts.saveTeacherSubjects(ye);if($e.success)d("Subjects saved successfully!","success"),await Gt(),K(!1);else throw new Error($e.error||"Failed to save subjects")}catch($e){console.error(" Error saving teacher subjects:",$e),d("Failed to save subjects","error")}},[Gt]);const oe=C.useCallback(()=>{console.log(" Showing active tests..."),T("tests")},[]),fe=C.useCallback(ye=>{console.log(" Showing test details:",ye),B(ye),Y(!0)},[]);C.useCallback(async(ye,$e,Pe)=>{console.log(" Removing class assignment:",ye,$e,Pe);try{const Tt=await yn.removeClassAssignment(ye,$e,Pe);if(Tt.success)d("Assignment removed successfully!","success"),await mr();else throw new Error(Tt.error||"Failed to remove assignment")}catch(Tt){console.error(" Error removing class assignment:",Tt),d("Failed to remove assignment","error")}},[mr]);const Ce=C.useCallback(async(ye,$e)=>{console.log(" Marking test as completed:",ye,$e);try{const Pe=await yn.markTestCompleted(ye,$e);if(Pe.success){d("Test marked as completed!","success");const Tt=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(Tt),console.log(" Cleared teacher tests cache"),await mr()}else throw new Error(Pe.error||"Failed to mark test as completed")}catch(Pe){console.error(" Error marking test as completed:",Pe),d("Failed to mark test as completed","error")}},[mr,d,r?.teacher_id,r?.id]),je=C.useCallback(async()=>{console.log(" Refreshing active tests data...");try{await mr(),d("Tests refreshed successfully!","success")}catch(ye){console.error(" Error refreshing tests:",ye),d("Failed to refresh tests","error")}},[mr]),[qe,Ze]=C.useState(!1),mt=C.useCallback(async ye=>{console.log(" Loading performance data for class:",ye),console.log(" Current selectedClassForChart:",Nt);try{Ze(!0);const[$e,Pe]=ye.split("/"),Tt=$e.startsWith("M")?$e:`M${$e}`;await nc.loadAcademicCalendar();const kt=nc.getCurrentTerm(),nr=kt?.id;if(!nr)throw new Error("No current academic period found");const Or=`class_summary_${r.teacher_id}_${Tt}_${Pe}_${nr}`,ct=ms(Or);if((ct?Date.now()-ct.timestamp:1/0)>36e5)try{await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/refresh-class-summary-semester")}catch(Fr){console.warn("Materialized view refresh failed (continuing):",Fr.message)}const Zn=await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-class-summary-term?teacher_id=${r.teacher_id}&grade=${Tt}&class=${Pe}&term_id=${nr}`);console.log(" API response status:",Zn.status);const ur=await Zn.json();if(console.log(" Performance API response:",ur),console.log(" API success:",ur.success),console.log(" API summary:",ur.summary),ur.success&&ur.summary){console.log(" Processing semester performance data:",ur.summary);const Fr=ur.summary;console.log(" Semester summary:",{total_students:Fr.total_students,total_tests:Fr.total_tests,completed_tests:Fr.completed_tests,average_class_score:Fr.average_class_score,pass_rate:Fr.pass_rate,cheating_incidents:Fr.cheating_incidents});const In={summary:Fr,term:kt.term,semester:kt.semester,academicYear:kt.academic_year,termId:nr,overallAverage:Fr.average_class_score||0,totalTests:Fr.total_tests||0,completedTests:Fr.completed_tests||0,passRate:Fr.pass_rate||0,cheatingIncidents:Fr.cheating_incidents||0,lastTestDate:Fr.last_test_date,termProgress:qt(Fr,kt)};console.log(" Term performance data:",In),setPerformanceData(la=>({...la,[ye]:In}))}else console.log(" No performance data available for class:",ye),setPerformanceData(Fr=>({...Fr,[ye]:{tests:[],overallAverage:0}}))}catch($e){console.error(" Error loading performance data:",$e),console.error(" Error details:",$e.message),setPerformanceData(Pe=>({...Pe,[ye]:{tests:[],overallAverage:0}}))}finally{Ze(!1)}},[r]),qt=C.useCallback((ye,$e)=>{if(!ye.last_test_date||!$e)return 0;const Pe=new Date($e.start_date),Tt=new Date($e.end_date),kt=new Date,nr=Tt-Pe,Or=Math.min(kt-Pe,nr);return Math.round(Or/nr*100)},[]);C.useCallback((ye,$e)=>{console.log(" Showing class results:",ye,$e),console.log(" Class click - grade:",ye,"className:",$e),O(ye),M($e),T("results");const Pe=`${ye}/${$e}`;console.log(" Loading performance data for clicked class:",Pe),et(Pe),mt(Pe)},[mt]);const pt=C.useCallback(async(ye=null)=>{if(r?.teacher_id){Oe(!0),ze(null);try{jn.debug(" Loading test performance data for class:",ye);const $e=await Ybe.getTestPerformance(r.teacher_id,ye);me($e),jn.debug(" Test performance data loaded:",$e.length,"tests")}catch($e){jn.error(" Error loading test performance data:",$e),ze($e.message)}finally{Oe(!1)}}},[r?.teacher_id]),[Bt,Cr]=C.useState([]),[$r,Ur]=C.useState([]),wn=C.useCallback(async()=>{try{const $e=await(await Vi(()=>import("./retestService-C6b0YDiD.js"),[])).retestService.getRetestAssignments(r.teacher_id);Cr($e)}catch(ye){console.warn("Failed to load retests",ye)}},[r]);C.useCallback(async ye=>{try{const Pe=await(await Vi(()=>import("./retestService-C6b0YDiD.js"),[])).retestService.getRetestTargets(ye);Ur(Pe)}catch($e){console.warn("Failed to load retest targets",$e)}},[]);const[Xr,Wr]=C.useState(!1);C.useEffect(()=>{console.debug("[TeacherCabinet] showRetestModal state changed:",Xr)},[Xr]);const[ar,xe]=C.useState({test_type:"",original_test_id:"",subject_id:"",passing_threshold:50,scoring_policy:"BEST",max_attempts:1,window_days:2,student_ids:[]}),ht=C.useCallback(async ye=>{console.debug("[TeacherCabinet] openRetestModal called with:",ye);const{test_type:$e,original_test_id:Pe,subject_id:Tt,failedStudentIds:kt=[],grade:nr,class:Or}=ye||{};xe({test_type:$e||"multiple_choice",original_test_id:Pe||"",subject_id:Tt||"",passing_threshold:50,scoring_policy:"BEST",max_attempts:1,window_days:2,student_ids:kt}),nr!==void 0&&O(nr),Or!==void 0&&M(Or),console.debug("[TeacherCabinet] Setting showRetestModal to true"),Wr(!0)},[]),Er=C.useCallback(async()=>{try{const ye=await Vi(()=>import("./retestService-C6b0YDiD.js"),[]),$e=new Date,Pe=new Date($e.getTime()+ar.window_days*24*60*60*1e3),Tt={...ar,teacher_id:r.teacher_id,grade:j,class:R,window_start:$e.toISOString(),window_end:Pe.toISOString()};console.debug("[Retest][TeacherCabinet] Prepared payload:",JSON.stringify(Tt)),console.debug("[Retest][TeacherCabinet] Selected students count:",(Tt.student_ids||[]).length,"IDs:",Tt.student_ids),await ye.retestService.createRetestAssignment(Tt),d("Retest created","success"),Wr(!1),wn(),At(kt=>kt+1)}catch(ye){console.error("Create retest error",ye),d(ye.message||"Failed to create retest","error")}},[ar,j,R,wn]);if(g)return c.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[c.jsxs("div",{className:"text-center",children:[c.jsx(Gr,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Cabinet..."})]}),c.jsx("div",{className:"flex flex-wrap gap-2"})]});if(x)return c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Cabinet Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:x}),c.jsx(nt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})});return c.jsxs(rt.div,{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[c.jsx(rt.div,{className:"bg-gradient-to-r from-sky-400 to-sky-600 text-white shadow-lg",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-6",children:[c.jsxs(rt.div,{className:"flex-1 text-center",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-white mb-2",children:"Teacher Cabinet"}),c.jsxs("p",{className:"text-sky-100 text-sm sm:text-base md:text-lg",children:["Welcome, Teacher ",a()||""]})]}),c.jsxs(rt.div,{className:"relative",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[c.jsx("div",{className:"hidden md:block",children:c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>Fe(!Me),className:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border border-white/20 text-white hover:bg-white/20 px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50",children:[c.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm font-medium",children:"Menu"}),c.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 transition-transform duration-200",style:{transform:Me?"rotate(180deg)":"rotate(0deg)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),Me&&c.jsxs(rt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[c.jsxs("button",{onClick:()=>{Fe(!1),Pt()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),c.jsx("span",{children:"Change Password"})]}),c.jsxs("button",{onClick:()=>{Fe(!1),e?e():s()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),c.jsx("span",{children:"Logout"})]})]})]})}),c.jsxs("div",{className:"md:hidden",children:[c.jsx("button",{onClick:()=>xt(!Ke),className:"flex items-center justify-center w-10 h-10 bg-white/10 border border-white/20 text-white hover:bg-white/20 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),Ke&&c.jsxs(rt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[c.jsxs("div",{className:"px-4 py-2 border-b border-gray-200",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:a()||"Teacher"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Teacher Account"})]}),c.jsxs("button",{onClick:()=>{xt(!1),Pt()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),c.jsx("span",{children:"Change Password"})]}),c.jsxs("button",{onClick:()=>{xt(!1),e?e():s()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),c.jsx("span",{children:"Logout"})]})]})]})]})]})})}),c.jsx(rt.div,{className:"bg-white border-b shadow-sm",initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.5},children:c.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:c.jsx("nav",{className:"flex space-x-1 sm:space-x-8 overflow-x-auto",children:[{key:"main",label:"Main Dashboard",shortLabel:"Dashboard"},{key:"tests",label:"Test Management",shortLabel:"Tests"},{key:"results",label:"Class Results",shortLabel:"Results"},{key:"subjects",label:"Subject Management",shortLabel:"Subjects"}].map((ye,$e)=>c.jsxs(rt.button,{onClick:()=>ye.key==="tests"?oe():T(ye.key),className:`py-2 sm:py-4 px-2 sm:px-1 border-b-2 font-medium text-xs sm:text-sm transition-colors duration-200 whitespace-nowrap flex-shrink-0 ${v===ye.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5+$e*.1,duration:.3},whileHover:{scale:1.05},whileTap:{scale:.95},children:[c.jsx("span",{className:"sm:hidden",children:ye.shortLabel}),c.jsx("span",{className:"hidden sm:inline",children:ye.label})]},ye.key))})})}),c.jsx(rt.div,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.5},children:c.jsxs(co,{mode:"wait",children:[v==="main"&&c.jsx(rt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:Sr()},"main"),v==="subjects"&&c.jsx(rt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:Qn()},"subjects"),v==="tests"&&c.jsx(rt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:Ye()},"tests"),v==="results"&&c.jsx(rt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:c.jsx(ZK,{selectedGrade:j,selectedClass:R,onBackToCabinet:()=>T("main"),openRetestModal:ht},ut)},"results")]})}),G&&c.jsx(Vl,{isOpen:G,onClose:()=>{K(!1),Ct("subject"),Zt([]),_r(null),ue([])},title:"Select Subjects and Classes",size:"large",children:c.jsxs("div",{className:"space-y-6 px-4 max-h-[80vh] overflow-y-auto",children:[Xe==="subject"&&c.jsxs(rt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Step 1: Select Subject"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Choose the subject you want to teach:"}),pr?c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),c.jsx("span",{className:"ml-2 text-gray-600",children:"Loading subjects..."})]}):c.jsxs("select",{value:er?.subject_id||"",onChange:ye=>le(ye.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"Select a subject"}),gt.map(ye=>c.jsx("option",{value:ye.subject_id,children:ye.subject},ye.subject_id))]})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx(nt,{variant:"outline",onClick:()=>K(!1),children:"Cancel"}),c.jsx(nt,{variant:"primary",onClick:()=>Ct("classes"),disabled:!er,children:"Next: Select Classes"})]})]}),Xe==="classes"&&er&&c.jsxs(rt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Step 2: Select Classes for ",er.subject]}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Choose the classes you teach for this subject:"}),c.jsx("div",{className:"max-h-80 overflow-y-auto border border-gray-200 rounded-lg p-4",children:c.jsx("div",{className:"grid grid-cols-3 gap-3",children:[1,2,3,4,5,6].map(ye=>{let $e;return ye===1||ye===2||ye===3?$e=[15,16]:ye===4||ye===5||ye===6?$e=[13,14]:$e=[],c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h4",{className:"font-medium text-gray-700 text-sm",children:["Grade ",ye]}),c.jsx("div",{className:"space-y-1",children:$e.map(Pe=>c.jsxs("label",{className:"flex items-center space-x-2 py-1",children:[c.jsx("input",{type:"checkbox",checked:ge.some(Tt=>Tt.grade===ye.toString()&&Tt.class===Pe.toString()),onChange:()=>_e(ye.toString(),Pe.toString()),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),c.jsxs("span",{className:"text-xs text-gray-700",children:["Class ",Pe]})]},Pe))})]},ye)})})})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx(nt,{variant:"outline",onClick:()=>Ct("subject"),children:"Back to Subjects"}),c.jsxs("div",{className:"space-x-3",children:[c.jsx(nt,{variant:"outline",onClick:()=>K(!1),children:"Cancel"}),c.jsx(nt,{variant:"primary",onClick:pe,disabled:ge.length===0,children:"Add Subject"})]})]})]}),Wt.length>0&&c.jsxs(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Selected Subjects"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Review your selected subjects and classes:"}),c.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:Wt.map((ye,$e)=>c.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-gray-900",children:ye.subject_name}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Classes: ",ye.classes.map(Pe=>`Grade ${Pe.grade} Class ${Pe.class}`).join(", ")]})]}),c.jsx("button",{onClick:()=>ve($e),className:"text-red-600 hover:text-red-800 p-1",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},$e))})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx(nt,{variant:"outline",onClick:()=>Ct("subject"),children:"Add More Subjects"}),c.jsxs("div",{className:"space-x-3",children:[c.jsx(nt,{variant:"outline",onClick:()=>K(!1),children:"Cancel"}),c.jsx(nt,{variant:"primary",onClick:Ie,disabled:br,className:"relative",children:br?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save All Subjects"})]})]})]})]})}),Xr&&c.jsxs(Vl,{isOpen:Xr,onClose:()=>Wr(!1),title:"Create Retest",size:"medium",children:[c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Retest Window"}),c.jsxs("select",{className:"w-full border rounded px-3 py-2 text-sm",value:ar.window_days,onChange:ye=>xe($e=>({...$e,window_days:Number(ye.target.value)})),children:[c.jsx("option",{value:1,children:"1 day"}),c.jsx("option",{value:2,children:"2 days"}),c.jsx("option",{value:3,children:"3 days"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Attempts"}),c.jsxs("select",{className:"w-full border rounded px-3 py-2 text-sm",value:ar.max_attempts,onChange:ye=>xe($e=>({...$e,max_attempts:Number(ye.target.value)})),children:[c.jsx("option",{value:1,children:"1 attempt"}),c.jsx("option",{value:2,children:"2 attempts"}),c.jsx("option",{value:3,children:"3 attempts"})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Students can retry immediately if they fail"})]})]})}),c.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[c.jsx("button",{onClick:()=>Wr(!1),className:"px-4 py-2 text-sm rounded border border-gray-300 hover:bg-gray-50",children:"Cancel"}),c.jsx("button",{onClick:Er,className:"px-4 py-2 text-sm rounded bg-indigo-600 text-white hover:bg-indigo-700",children:"Create Retest"})]})]}),re&&ee&&c.jsxs(Vl,{isOpen:re,onClose:()=>Y(!1),title:"Test Details",size:"large",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Test Name:"}),c.jsx("p",{className:"text-sm text-gray-900",children:ee.test_name})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Subject:"}),c.jsx("p",{className:"text-sm text-gray-900",children:ee.subject})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Test Type:"}),c.jsx("p",{className:"text-sm text-gray-900",children:ee.test_type})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Created:"}),c.jsx("p",{className:"text-sm text-gray-900",children:new Date(ee.created_at).toLocaleDateString()})]}),ee.assignments&&ee.assignments.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Classes:"}),c.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:ee.assignments.map((ye,$e)=>c.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs font-medium",children:[ye.grade,"/",ye.class]},$e))})]})]}),c.jsx("div",{className:"flex justify-end space-x-3 mt-6",children:c.jsx(nt,{variant:"outline",onClick:()=>Y(!1),children:"Close"})})]}),L&&J&&c.jsx(Vl,{isOpen:L,onClose:dt,title:"Delete Subject Assignment",size:"small",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:c.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Delete Subject Assignment"}),c.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Are you sure you want to delete the assignment for"," ",c.jsx("span",{className:"font-semibold text-gray-900",children:J.subjectName})," ","in Grade ",J.grade,", Class ",J.classNumber,"?"]}),c.jsx("p",{className:"text-xs text-red-600",children:"This action cannot be undone."})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx(nt,{variant:"outline",onClick:dt,children:"Cancel"}),c.jsx(nt,{variant:"danger",onClick:Ge,children:"Delete Assignment"})]})]})}),c.jsx(rt.div,{className:"fixed top-4 right-4 space-y-2 z-50",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.8,duration:.5},children:f.map(ye=>c.jsx(rt.div,{initial:{opacity:0,y:-20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9},transition:{duration:.3},children:c.jsx("div",{className:`p-4 rounded-lg shadow-lg ${ye.type==="success"?"bg-green-600 text-white":ye.type==="error"?"bg-red-600 text-white":ye.type==="warning"?"bg-yellow-600 text-white":"bg-blue-600 text-white"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{children:ye.message}),c.jsx("button",{onClick:()=>setNotifications($e=>$e.filter(Pe=>Pe.id!==ye.id)),className:"ml-4 text-white hover:text-gray-200",children:""})]})})},ye.id))}),Dt&&c.jsx(Vl,{isOpen:Dt,onClose:Ue,title:"Change Password",size:"small",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),c.jsx("input",{type:"password",name:"currentPassword",value:tt.currentPassword,onChange:ot,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Enter current password"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),c.jsx("input",{type:"password",name:"newPassword",value:tt.newPassword,onChange:ot,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Enter new password"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),c.jsx("input",{type:"password",name:"confirmPassword",value:tt.confirmPassword,onChange:ot,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Confirm new password"})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx(nt,{type:"button",variant:"secondary",onClick:Ue,className:"flex-1",children:"Cancel"}),c.jsx(nt,{type:"button",onClick:ft,className:"flex-1",children:"Change Password"})]})]})})]});function Sr(){return c.jsxs("div",{className:"space-y-8",children:[c.jsx(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:c.jsxs(Et,{children:[c.jsx(Et.Header,{children:c.jsx(Et.Title,{children:"My Subjects & Classes"})}),c.jsx(Et.Body,{children:_.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No subjects assigned"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"You don't have any subjects assigned yet."}),c.jsx(nt,{variant:"outline",onClick:()=>T("subjects"),children:"Manage Subjects"})]}):c.jsx("div",{className:"space-y-6",children:_.map((ye,$e)=>c.jsxs(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+$e*.1,duration:.3},className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:ye.name}),c.jsxs("span",{className:"text-sm text-gray-500",children:[ye.classes?.length||0," classes"]})]}),ye.classes&&ye.classes.length>0?c.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:ye.classes.map((Pe,Tt)=>c.jsx(rt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3+$e*.1+Tt*.05,duration:.2},whileHover:{scale:1.05},whileTap:{scale:.95},children:c.jsxs(nt,{variant:"outline",size:"sm",onClick:()=>{O(Pe.grade),M(Pe.class),T("results")},className:"font-medium",children:[Pe.grade,"/",Pe.class]})},Tt))}):c.jsx("div",{className:"text-center py-4 text-gray-500",children:c.jsx("span",{className:"text-sm",children:"No classes assigned to this subject"})})]},ye.id))})})]})}),c.jsx(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:c.jsxs(Et,{children:[c.jsxs(Et.Header,{children:[c.jsx(Et.Title,{children:"Test Performance Overview"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Test performance over time with average scores"})]}),c.jsx(Et.Body,{children:_.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-gray-400 text-4xl mb-2",children:""}),c.jsx("p",{className:"text-gray-500",children:"No subjects assigned - no performance data available"})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex flex-wrap gap-2 border-b border-gray-200",children:(()=>{const ye=[];return _.forEach($e=>{$e.classes&&$e.classes.forEach(Pe=>{const Tt=`${Pe.grade}/${Pe.class}`;ye.find(kt=>kt.key===Tt)||ye.push({key:Tt,grade:Pe.grade,class:Pe.class,subject:$e.name})})}),ye})().map((ye,$e)=>c.jsxs("button",{onClick:()=>{console.log(" Class button clicked:",ye.key),et(ye.key),pt(ye.key)},className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors ${Nt===ye.key?"bg-blue-100 text-blue-700 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[ye.grade,"/",ye.class]},ye.key))}),Nt?c.jsx("div",{className:"mt-4",children:c.jsx(q8e,{data:ie,loading:Ne,error:Re})}):c.jsxs("div",{className:"mt-4 text-center text-muted py-4",children:[c.jsx("div",{className:"text-gray-400 text-4xl mb-2",children:""}),c.jsx("p",{className:"text-gray-500",children:"Select a class above to view test performance data"})]})]})})]})})]})}function Qn(){return c.jsxs("div",{className:"space-y-8",children:[c.jsx(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:c.jsx(Et,{children:c.jsx(Et.Header,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx(Et.Title,{children:"Subject Management"}),c.jsx(nt,{variant:"primary",onClick:vr,children:"Add Subject"})]})})})}),_.length===0?c.jsx(rt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},children:c.jsx(Et,{children:c.jsx(Et.Body,{children:c.jsxs("div",{className:"text-center p-12",children:[c.jsx(rt.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"},children:""}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No subjects assigned yet"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Add your first subject to get started with creating tests and managing classes."}),c.jsx(nt,{variant:"primary",onClick:vr,size:"lg",children:"Add Your First Subject"})]})})})}):c.jsx(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},children:c.jsxs(Et,{children:[c.jsx(Et.Header,{children:c.jsx(Et.Title,{children:"Your Subjects"})}),c.jsx(Et.Body,{children:c.jsx("div",{className:"space-y-4",children:_.map((ye,$e)=>c.jsx(rt.div,{className:"p-4 bg-gray-50 rounded-lg border-l-4 border-green-500",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+$e*.1,duration:.3},whileHover:{scale:1.02,backgroundColor:"#f9fafb"},children:c.jsx("div",{className:"flex justify-between items-start",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:ye.name}),c.jsx("div",{className:"flex flex-wrap gap-2",children:ye.classes?.map((Pe,Tt)=>c.jsxs(rt.div,{className:"inline-flex items-center gap-2 bg-blue-100 text-blue-800 text-xs rounded-full px-3 py-1",initial:{scale:0},animate:{scale:1},transition:{delay:.4+$e*.1+Tt*.05,duration:.2},whileHover:{scale:1.1},children:[c.jsxs("span",{children:[Pe.grade," - ",Pe.className]}),c.jsx("button",{onClick:()=>ke(ye.id,ye.name,Pe.grade,Pe.class),className:"ml-1 text-red-600 hover:text-red-800 transition-colors",title:"Delete this subject assignment",children:c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},Tt))||c.jsx("span",{className:"text-gray-500 text-sm",children:"No classes assigned"})})]})})},$e))})})]})})]})}function Ye(){return c.jsxs("div",{className:"space-y-8",children:[c.jsx(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:c.jsx(Et,{children:c.jsx(Et.Header,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx(Et.Title,{children:"Active Tests"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx(nt,{variant:"outline",onClick:je,children:"Refresh"}),c.jsx(nt,{variant:"primary",onClick:()=>t("/teacher/tests/create"),children:"Create New Test"})]})]})})})}),E.length===0?c.jsx(rt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},children:c.jsx(Et,{children:c.jsx(Et.Body,{children:c.jsxs("div",{className:"text-center p-12",children:[c.jsx(rt.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"},children:""}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No active tests found"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first test to get started with assessments."}),c.jsx(nt,{variant:"primary",onClick:()=>t("/teacher/tests/create"),size:"lg",children:"Create Your First Test"})]})})})}):c.jsx(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},className:"space-y-4",children:E.map((ye,$e)=>c.jsx(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+$e*.1,duration:.3},whileHover:{scale:1.01},children:c.jsx(Et,{children:c.jsx(Et.Body,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex-1 flex items-center space-x-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 min-w-0 flex-shrink-0",children:ye.test_name}),c.jsx("span",{className:"hidden sm:inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-medium flex-shrink-0",children:ye.test_type}),c.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 flex-shrink-0",children:[c.jsx("span",{className:"font-medium",children:"Assignments:"}),c.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium",children:ye.assignments?.length||0})]}),ye.assignments&&ye.assignments.length>0&&c.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 flex-shrink-0",children:[c.jsx("span",{className:"font-medium",children:"Classes:"}),c.jsx("div",{className:"flex flex-wrap gap-1",children:ye.assignments.map((Pe,Tt)=>c.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs font-medium",children:[Pe.grade,"/",Pe.class]},Tt))})]}),c.jsx("div",{className:"text-sm text-gray-500 flex-shrink-0",children:new Date(ye.created_at).toLocaleDateString()})]})]}),c.jsxs("div",{className:"flex gap-2 ml-4 flex-shrink-0",children:[c.jsx("div",{className:"sm:hidden",children:c.jsx(nt,{variant:"outline",onClick:()=>fe(ye),size:"sm",className:"text-xs",title:`Type: ${ye.test_type} | Assignments: ${ye.assignments?.length||0} | Classes: ${ye.assignments?.map(Pe=>`${Pe.grade}/${Pe.class}`).join(", ")||"None"} | ${new Date(ye.created_at).toLocaleDateString("en-US",{year:"2-digit",month:"numeric",day:"numeric"})}`,children:"Details"})}),c.jsx("div",{className:"hidden sm:block",children:c.jsx(nt,{variant:"outline",onClick:()=>fe(ye),size:"sm",children:"Details"})}),c.jsx(nt,{variant:"success",onClick:()=>Ce(ye.test_type,ye.test_id),size:"sm",children:"Complete"})]})]})})})},$e))})]})}},K8e={multipleChoice:"multiple_choice",trueFalse:"true_false",input:"input",matching:"matching_type",wordMatching:"word_matching",drawing:"drawing",fillBlanks:"fill_blanks",speaking:"speaking"},gW=()=>{const{user:e}=ls();Due();const{notifications:t,showNotification:r,removeNotification:n}=Ba(),[s,a]=C.useState(!1),[i,o]=C.useState(!1),[l,u]=C.useState("typeSelection"),[d,f]=C.useState(!1),[g,p]=C.useState(null),[x,y]=C.useState([]),[v,T]=C.useState(!1),[_,b]=C.useState(!1),[E,k]=C.useState(!1),[A,P]=C.useState(!1),[j,O]=C.useState({testName:"",numQuestions:0,numOptions:0,questions:{},enableTimer:!1,timerMinutes:"",isShuffled:!1}),[R,M]=C.useState([]),[G,K]=C.useState(null);C.useRef(null),C.useRef(null),C.useRef(null),C.useRef(null),C.useRef(null),C.useRef(null),C.useRef(null);const re=C.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in initializeTestCreation, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}console.log(" Setting up test creation event listeners..."),V(),console.log(" Test creation initialization complete")},[e,r]),Y=C.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in showTestTypeSelection, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}console.log(" showTestTypeSelection called - starting new test creation"),o(!1),console.log(" Reset testAssignmentCompleted flag to false"),a(!0),console.log(" Set isInTestCreation flag to true"),ee(),u("typeSelection"),z("testTypeSelection")},[e,r]),ee=C.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in disableNavigationButtons, redirecting to login");return}console.log(" Disabling navigation buttons..."),f(!0)},[e]),B=C.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in enableNavigationButtons, redirecting to login");return}console.log(" Enabling navigation buttons..."),f(!1)},[e]),z=C.useCallback(async oe=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in saveTestCreationState, redirecting to login");return}console.log("  saveTestCreationState called with step:",oe),console.log("  Call stack:",new Error().stack);const fe={multipleChoice:{buttonVisible:!0,hintVisible:!1},trueFalse:{buttonVisible:!0,hintVisible:!1},input:{buttonVisible:!0,hintVisible:!1}},Ce={isInTestCreation:!0,currentStep:oe,timestamp:Date.now(),excelState:fe};localStorage.setItem("test_creation_state",JSON.stringify(Ce)),console.log(" Saved test creation state:",Ce);const je={};switch(oe){case"testTypeSelection":break;case"multipleChoiceForm":je.testName=j.testName||"",je.numQuestions=j.numQuestions||"",je.numOptions=j.numOptions||"",je.questions=j.questions||{};break;case"trueFalseForm":je.testName=j.testName||"",je.numQuestions=j.numQuestions||"",je.questions=j.questions||{};break;case"inputForm":je.testName=j.testName||"",je.numQuestions=j.numQuestions||"",je.questions=j.questions||{};break;case"formCreation":je.testName=j.testName||"",je.numQuestions=j.numQuestions||"",je.numOptions=j.numOptions||"",je.questions=j.questions||{},je.enableTimer=!!j.enableTimer,je.timerMinutes=j.timerMinutes||"",je.isShuffled=!!j.isShuffled;break;case"assignment":case"testAssignment":je.testName=j.testName||"",je.numQuestions=j.numQuestions||"",je.numOptions=j.numOptions||"",je.questions=j.questions||{};break;default:console.log(" Unknown step in saveTestCreationState:",oe);break}Object.keys(je).length>0&&(localStorage.setItem(`form_data_${oe}`,JSON.stringify(je)),console.log(" Saved form data for step:",oe,je))},[e,j]),I=C.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in clearTestCreationState, redirecting to login");return}localStorage.removeItem("test_creation_state"),localStorage.removeItem("test_creation_form_data");const oe=[];for(let fe=0;fe<localStorage.length;fe++){const Ce=localStorage.key(fe);Ce&&(Ce.includes("test")||Ce.includes("form")||Ce.includes("question"))&&oe.push(Ce)}oe.forEach(fe=>{localStorage.removeItem(fe),console.log(" Removed localStorage key:",fe)}),console.log(" Cleared test creation state from localStorage")},[e]);C.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in clearAllTestFields, redirecting to login");return}console.log(" Clearing all test form fields..."),O({testName:"",numQuestions:0,numOptions:0,questions:{}}),p(null),M([]),K(null),console.log(" Cleared all test form fields")},[e]);const W=C.useCallback(()=>{console.log(" Resetting Excel upload state..."),_t({multipleChoice:{buttonVisible:!1,hintVisible:!1},trueFalse:{buttonVisible:!1,hintVisible:!1},input:{buttonVisible:!1,hintVisible:!1}}),["multiple-choice","true-false","input","word-matching"].forEach(fe=>{const Ce=document.querySelector(`.excel-upload-btn[data-test-type="${fe}"]`);Ce&&(Ce.style.display="none",console.log(" Excel button hidden for:",fe));const je=document.querySelector(`.excel-hint[data-test-type="${fe}"]`);je&&(je.style.display="none",console.log(" Excel hint hidden for:",fe));const qe=document.querySelector(`.excel-file-input[data-test-type="${fe}"]`);qe&&(qe.value="",console.log(" File input cleared for:",fe))}),console.log(" Excel upload state reset complete")},[]),V=C.useCallback(()=>{console.log(" Setting up auto-save listeners for initial form fields..."),["testName","numQuestions","numOptions","enableTimer","timerMinutes","isShuffled"].forEach(fe=>{const Ce=document.getElementById(fe);Ce&&Ce.addEventListener("input",()=>{console.log(` Auto-save triggered for field: ${fe}`)})}),console.log(" Form auto-save setup complete")},[]);C.useCallback(async oe=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in saveFormDataForStep, redirecting to login");return}console.log("  saveFormDataForStep called with step:",oe),console.log("  Call stack:",new Error().stack);const fe={};switch(oe){case"testTypeSelection":break;case"multipleChoiceForm":fe.testName=j.testName||"",fe.numQuestions=j.numQuestions||"",fe.numOptions=j.numOptions||"",fe.questions=j.questions||{};break;case"trueFalseForm":fe.testName=j.testName||"",fe.numQuestions=j.numQuestions||"",fe.questions=j.questions||{};break;case"inputForm":fe.testName=j.testName||"",fe.numQuestions=j.numQuestions||"",fe.questions=j.questions||{};break;case"formCreation":fe.testName=j.testName||"",fe.numQuestions=j.numQuestions||"",fe.numOptions=j.numOptions||"",fe.questions=j.questions||{};break;default:console.log(" Unknown step for form data save:",oe);return}localStorage.setItem("test_creation_form_data",JSON.stringify({step:oe,data:fe,timestamp:Date.now()})),console.log(" Saved form data for step:",oe,fe)},[e,j]);const L=C.useCallback(async oe=>{console.log(" Restoring form data for step:",oe);try{const fe=localStorage.getItem(`form_data_${oe}`);if(fe){const Ce=JSON.parse(fe);console.log(" Restored form data:",Ce),O(je=>{const qe={...je,...Ce};return console.log(" Updated formData with restored data:",qe),console.log(" Matching test data in restored data:",qe.matchingTestData),qe}),Object.keys(Ce).forEach(je=>{const qe=document.getElementById(je);qe&&Ce[je]!==void 0&&(qe.value=Ce[je])}),console.log(" Form data restored for step:",oe)}else console.log(" No saved data found for step:",oe)}catch(fe){console.error(" Error restoring form data:",fe)}},[e]),H=C.useCallback(()=>{console.log(" Setting up multiple choice form auto-save..."),["mcNumOptions"].forEach(Ce=>{const je=document.getElementById(Ce);je&&je.addEventListener("input",()=>{console.log(` Auto-save triggered for MC field: ${Ce}`)})}),document.querySelectorAll("#mcQuestionsContainer input, #mcQuestionsContainer textarea, #mcQuestionsContainer select").forEach(Ce=>{Ce.addEventListener("input",()=>{console.log(" Auto-save triggered for MC question field")})}),console.log(" Multiple choice form auto-save setup complete")},[]),J=C.useCallback(()=>{console.log(" Setting up true/false form auto-save..."),document.querySelectorAll("#tfQuestionsContainer input, #tfQuestionsContainer textarea, #tfQuestionsContainer select").forEach(fe=>{fe.addEventListener("input",()=>{console.log(" Auto-save triggered for TF question field")})}),console.log(" True/false form auto-save setup complete")},[]),Q=C.useCallback(()=>{console.log(" Setting up input form auto-save..."),document.querySelectorAll("#inputQuestionsContainer input, #inputQuestionsContainer textarea, #inputQuestionsContainer select").forEach(fe=>{fe.addEventListener("input",()=>{console.log(" Auto-save triggered for Input question field")})}),console.log(" Input form auto-save setup complete")},[]),ne=C.useCallback(oe=>{console.log(" showExcelUploadButton called with testType:",oe);const fe=oe==="multiple-choice"?"multipleChoice":oe==="true-false"?"trueFalse":oe==="input"?"input":oe;_t(Ce=>({...Ce,[fe]:{...Ce[fe],buttonVisible:!0}}))},[]),Z=C.useCallback(oe=>{console.log(" showExcelHint called with testType:",oe);const fe=oe==="multiple-choice"?"multipleChoice":oe==="true-false"?"trueFalse":oe==="input"?"input":oe;_t(Ce=>({...Ce,[fe]:{...Ce[fe],hintVisible:!0}}))},[]),se=C.useCallback(async(oe,fe,Ce)=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayTestAssignmentOptions, redirecting to login");return}console.log("displayTestAssignmentOptions called with:",{classes:oe,testType:fe,testId:Ce}),y(oe),console.log(" Test assignment options displayed for:",{testType:fe,testId:Ce,classesCount:oe.length})},[e]),ce=C.useCallback(async(oe,fe)=>{try{if(console.log("Loading teacher grades and classes for test assignment"),!e||!e.teacher_id){console.error("No valid teacher session found, redirecting to login");return}console.log("Teacher ID:",e.teacher_id);const je=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-subjects?teacher_id=${e.teacher_id}`)).json();console.log("Teacher subjects response:",je),je.success&&je.subjects&&je.subjects.length>0?(console.log("Teacher subjects loaded:",je.subjects),y(je.subjects),se(je.subjects,oe,fe)):(console.log("No teacher subjects found"),r("No subjects found. Please assign subjects to grades and classes first.","warning"))}catch(Ce){console.error("Error loading teacher grades and classes:",Ce),r("Error loading teacher grades and classes","error")}},[e,r,se]),he=C.useCallback(async()=>{console.log(" Loading available classes...");try{const oe=await ts.getGradesAndClasses();if(console.log(" Raw grades/classes data:",oe),!oe||oe.length===0){y([]);return}const fe=new Map;oe.forEach(je=>{const qe=je.subject_id,Ze=je.subject||`Subject ${qe}`;fe.has(qe)||fe.set(qe,{subject_id:qe,subject:Ze,classes:[]}),fe.get(qe).classes.push({grade:je.grade,class:je.class})});const Ce=Array.from(fe.values());y(Ce),console.log(" Transformed available classes:",Ce)}catch(oe){console.error(" Error loading available classes:",oe),r("Failed to load available classes","error")}},[r]);C.useCallback(async(oe,fe)=>{if(i){o(!1);return}if(!e||!e.teacher_id){console.error("No valid teacher session found in showTestAssignment, redirecting to login");return}ee(),z("testAssignment"),K(fe),p(oe),u("testAssignment"),ce(oe,fe),he(),console.log(" Test assignment interface shown for:",{testType:oe,testId:fe})},[i,e,ee,z,ce,he]);const Ee=C.useCallback(async oe=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayTeacherActiveTests, redirecting to login");return}if(console.log(" Displaying teacher active tests:",oe),oe.length===0){ze([]);return}ze(oe),console.log(" Active tests displayed:",oe.length,"tests")},[e]);C.useCallback(async(oe,fe)=>{try{console.log(" Loading test questions for:",{testType:oe,testId:fe});const Ce=await yn.getTestQuestions(fe,oe);return console.log(" Test questions loaded:",Ce),Ce}catch(Ce){throw console.error("Error loading test questions:",Ce),Ce}},[]),C.useCallback((oe,fe,Ce,je)=>{console.log(" Showing teacher test details modal:",{testType:oe,testId:fe,testName:Ce,questionsCount:je.length}),console.log("Test Details:",{testType:oe,testId:fe,testName:Ce,questions:je.map(qe=>({id:qe.question_id,question:qe.question,correctAnswer:qe.correct_answer}))}),r(`Test details for "${Ce}" loaded successfully.`,"success")},[r]);const ie=C.useCallback(async()=>{console.log(" DEBUG: loadTeacherActiveTests called");try{console.log(" DEBUG: Fetching teacher active tests using JWT authentication...");const oe=await yn.getTeacherTests();console.log(" DEBUG: Tests loaded:",oe),oe&&oe.length>0?(console.log(" DEBUG: Success! Displaying",oe.length,"tests"),Ee(oe)):(console.log(" DEBUG: No tests found"),ze([]))}catch(oe){console.error(" DEBUG: Error loading active tests:",oe),r("Error loading active tests.","error")}},[r,Ee]),me=C.useCallback(()=>{console.log("showTestCreationSuccessMessage called"),r("Test created and assigned successfully!","success"),u("typeSelection"),O({testName:"",numQuestions:0,numOptions:0,questions:{}}),M([]),o(!1),a(!1),I()},[r,I]),Ne=C.useCallback(async(oe,fe)=>{if(console.log(" === ASSIGN TEST TO CLASSES DEBUG START ==="),console.log(" Test Type:",oe),console.log(" Test ID:",fe),console.log(" Current formData:",j),console.log(" Selected Classes:",R),console.log(" User:",e),!e||!e.teacher_id){console.error(" No valid teacher session found in assignTestToClasses, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}if(console.log(" Teacher ID:",e.teacher_id),R.length===0){console.warn(" No classes selected"),r("Please select at least one class.","warning");return}try{console.log(" Preparing test + assignment request..."),await nc.loadAcademicCalendar();const je=nc.getCurrentTerm()?.id;if(!je)throw new Error("No current academic period found");const qe=R.map(pt=>{const Bt={grade:parseInt(pt.grade),class:parseInt(pt.class),subject_id:parseInt(pt.subject_id),academic_period_id:je,due_date:null};return console.log(" Created assignment:",Bt),Bt});if(console.log(" Final assignments array:",qe),oe==="matching"){console.log(" Processing matching test..."),console.log(" Setting isAssigningTest to true for matching test..."),P(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Ur=>setTimeout(Ur,100));const pt=j.matchingTestData;if(console.log(" Matching test data from formData:",pt),!pt){console.error(" Matching test data not found in formData"),r("Matching test data not found. Please recreate the test.","error");return}console.log(" Matching test data found, processing...");let Bt;pt.processedQuestions?(console.log(" Using pre-processed questions from MatchingTestCreator"),Bt=pt.processedQuestions):(console.log(" Converting blocks to questions (fallback)..."),console.log(" Blocks:",pt.blocks),console.log(" Words:",pt.words),console.log(" Arrows:",pt.arrows),Bt=pt.blocks.map((Ur,wn)=>{const Xr=pt.words.find(ht=>ht.blockId===Ur.id)?.word||`Word ${wn+1}`,Wr=pt.arrows.some(ht=>ht.startBlock===Ur.id),ar=pt.arrows.find(ht=>ht.startBlock===Ur.id)||null,xe={question_id:wn+1,word:Xr,block_coordinates:{x:Ur.x,y:Ur.y,width:Ur.width,height:Ur.height},has_arrow:Wr,arrow:ar?{startX:ar.startX,startY:ar.startY,endX:ar.endX,endY:ar.endY,style:ar.style||{}}:null};return console.log(` Question ${wn+1}:`,xe),xe})),console.log(" Final questions array:",Bt);const Cr={teacher_id:e.teacher_id,test_name:j.testName,image_url:pt.imageUrl,num_blocks:pt.blocks.length,questions:Bt,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,assignments:qe};console.log(" Final matching test data payload:",Cr),console.log(" Calling testService.saveMatchingTest...");const $r=await yn.saveMatchingTest(Cr);console.log(" API Response:",$r),$r.success?(console.log(" Matching test created and assigned successfully!"),r("Matching test created and assigned successfully!","success"),console.log("Matching test created and assigned successfully"),o(!0),Oe()):(console.error(" Failed to create matching test:",$r.message),r("Error creating and assigning matching test: "+$r.message,"error")),P(!1);return}if(oe==="wordMatching"){console.log(" Processing word matching test..."),console.log(" Setting isAssigningTest to true for word matching test..."),P(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Ur=>setTimeout(Ur,100));const pt=j.wordMatchingData;if(console.log(" Word matching test data from formData:",pt),!pt){console.error(" Word matching test data not found in formData"),r("Word matching test data not found. Please recreate the test.","error");return}console.log(" Word matching test data found, processing...");const Bt=pt.wordPairs.map((Ur,wn)=>({question_id:wn+1,left_word:Ur.leftWord,right_word:Ur.rightWord}));console.log(" Final word matching questions array:",Bt);const Cr={teacher_id:e.teacher_id,test_type:"word_matching",test_name:j.testName,num_questions:pt.wordPairs.length,interaction_type:pt.interactionType||"drag",questions:Bt,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,assignments:qe};console.log(" Final word matching test data payload:",Cr),console.log(" Calling testService.assignTestToClasses for word matching...");const $r=await yn.assignTestToClasses(Cr);console.log(" API Response:",$r),$r.success?(console.log(" Word matching test created and assigned successfully!"),r("Word matching test created and assigned successfully!","success"),console.log("Word matching test created and assigned successfully"),o(!0),Oe()):(console.error(" Failed to create word matching test:",$r.message),r("Error creating and assigning word matching test: "+$r.message,"error")),P(!1);return}if(oe==="drawing"){console.log(" Processing drawing test..."),console.log(" Setting isAssigningTest to true for drawing test..."),P(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Ur=>setTimeout(Ur,100));const pt=j.drawingData;if(console.log(" Drawing test data from formData:",pt),!pt){console.error(" Drawing test data not found in formData"),r("Drawing test data not found. Please recreate the test.","error");return}console.log(" Drawing test data found, processing...");const Bt=pt.questions||[];console.log(" Drawing questions array:",Bt);const Cr={teacher_id:e.teacher_id,test_type:"drawing",test_name:j.testName,num_questions:pt.num_questions,passing_score:pt.passing_score,questions:Bt,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,assignments:qe};console.log(" Final drawing test data payload:",Cr),console.log(" Calling testService.assignTestToClasses...");const $r=await yn.assignTestToClasses(Cr);console.log(" API Response:",$r),$r.success?(console.log(" Drawing test created and assigned successfully!"),r("Drawing test created and assigned successfully!","success"),o(!0),Oe()):(console.error(" Failed to create drawing test:",$r.message),r("Error creating and assigning drawing test: "+$r.message,"error")),P(!1);return}if(oe==="fillBlanks"){console.log(" Processing fill blanks test..."),console.log(" Setting isAssigningTest to true for fill blanks test..."),P(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Ur=>setTimeout(Ur,100));const pt=j.fillBlanksData;if(console.log(" Fill blanks test data from formData:",pt),!pt){console.error(" Fill blanks test data not found in formData"),r("Fill blanks test data not found. Please recreate the test.","error");return}console.log(" Fill blanks test data found, processing...");const Bt=pt.blanks||[];console.log(" Fill blanks questions array:",Bt);const Cr={teacher_id:e.teacher_id,test_type:"fill_blanks",test_name:j.testName,test_text:pt.test_text,num_questions:pt.num_questions,num_blanks:pt.num_blanks,separate_type:pt.separate_type,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,questions:Bt,assignments:qe};console.log(" Final fill blanks test data payload:",Cr),console.log(" Calling testService.assignTestToClasses...");const $r=await yn.assignTestToClasses(Cr);console.log(" API Response:",$r),$r.success?(console.log(" Fill blanks test created and assigned successfully!"),r("Fill blanks test created and assigned successfully!","success"),o(!0),Oe()):(console.error(" Failed to create fill blanks test:",$r.message),r("Error creating and assigning fill blanks test: "+$r.message,"error")),P(!1);return}if(oe==="speaking"){console.log(" Processing speaking test..."),console.log(" Setting isAssigningTest to true for speaking test..."),P(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Ur=>setTimeout(Ur,100));const pt=j.speakingData;if(console.log(" Speaking test data from formData:",pt),!pt){console.error(" Speaking test data not found in formData"),r("Speaking test data not found. Please recreate the test.","error");return}console.log(" Speaking test data found, processing...");const Bt={teacher_id:e.teacher_id,test_type:"speaking",test_name:j.testName,time_limit:pt.time_limit,min_duration:pt.min_duration,max_duration:pt.max_duration,max_attempts:pt.max_attempts,min_words:pt.min_words,passing_score:pt.passing_score,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,questions:pt.questions,assignments:qe};console.log(" Final speaking test data payload:",Bt),console.log(" Calling save-speaking-test-with-assignments for speaking test...");const $r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-speaking-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Bt)})).json();console.log(" API Response:",$r),$r.success?(console.log(" Speaking test created and assigned successfully!"),r("Speaking test created and assigned successfully!","success"),o(!0),Oe()):(console.error(" Failed to create speaking test:",$r.message),r("Error creating and assigning speaking test: "+$r.message,"error")),P(!1);return}console.log(" Processing non-matching test..."),console.log(" Form data questions:",j.questions);const Ze=Object.keys(j.questions).map(pt=>{const Bt=j.questions[pt];console.log(` Processing question ${pt}:`,Bt);let Cr;oe==="input"?Cr={correct_answers:Bt.correct_answers||[Bt.correctAnswer||""]}:Cr={correct_answer:Bt.correctAnswer||Bt.correct_answers?.[0]||""};const $r={question_id:parseInt(pt),question:Bt.question,...Cr,options:Bt.options||[]};return console.log(` Question ${pt} correct_answers:`,Bt.correct_answers),console.log(` Question ${pt} correctAnswer:`,Bt.correctAnswer),console.log(` Converted question ${pt}:`,$r),$r});console.log(" Final questions array:",Ze);const mt={teacher_id:e.teacher_id,test_type:K8e[oe],test_name:j.testName,num_questions:j.numQuestions,num_options:j.numOptions,questions:Ze,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,is_shuffled:!!j.isShuffled,assignments:qe};console.log(" Final test data payload:",mt),console.log(" Setting isAssigningTest to true..."),P(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(pt=>setTimeout(pt,100)),console.log(" Calling testService.assignTestToClasses...");const qt=await yn.assignTestToClasses(mt);console.log(" API Response:",qt),qt.success?(console.log(" Test created and assigned successfully!"),r("Test created and assigned successfully!","success"),console.log("Test created and assigned successfully"),o(!0),Oe()):(console.error(" Failed to create and assign test:",qt.message),r("Error creating and assigning test: "+qt.message,"error"))}catch(Ce){console.error(" Exception in assignTestToClasses:",Ce),console.error("Error creating and assigning test:",Ce),r("Error creating and assigning test. Please try again.","error")}finally{P(!1)}console.log(" === ASSIGN TEST TO CLASSES DEBUG END ===")},[e,R,j,r,me]),Oe=C.useCallback(async()=>{console.log("returnToMainCabinet called - restoring main cabinet view");try{a(!1),o(!1),u("typeSelection"),p(null),K(null),M([]),B(),I(),me(),console.log(" Returned to main cabinet")}catch(oe){console.error("Error returning to main cabinet:",oe)}},[B,I,me]),[Re,ze]=C.useState([]),[Nt,et]=C.useState(!1);C.useCallback(async()=>{console.log(" Refreshing active tests data...");try{await ie(),r("Active tests data refreshed.","success")}catch(oe){console.error("Error refreshing active tests data:",oe),r("Error refreshing data.","error")}},[ie,r]);const[Me,Fe]=C.useState([]),[Ke,xt]=C.useState([]),[ut,At]=C.useState(!1),[Dt,Qe]=C.useState(!1),tt=C.useCallback(async oe=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayExistingSubjectsInSelection, redirecting to login");return}console.log("Displaying existing subjects in selection interface:",oe),Fe(oe),console.log(" Existing subjects displayed in selection:",oe.length,"subjects")},[e]);C.useCallback(async()=>{try{console.log("Loading existing subjects...");const oe=await ts.getTeacherSubjects();console.log("Existing subjects loaded:",oe),oe&&oe.length>0?tt(oe):(console.log("No existing subjects found"),Fe([]))}catch(oe){console.error("Error loading existing subjects:",oe),r("Error loading subjects.","error")}},[r,tt]);const vt=C.useCallback(oe=>{console.log("Checking for outside click...");const fe=document.getElementById("dropdownMenu"),Ce=document.querySelector("[data-menu-button]");fe&&!fe.contains(oe.target)&&!Ce?.contains(oe.target)&&(console.log("Outside click detected, closing menu"),fe.classList.remove("show"),document.removeEventListener("click",vt))},[]),[gt,_t]=C.useState({multipleChoice:{buttonVisible:!1,hintVisible:!1},trueFalse:{buttonVisible:!1,hintVisible:!1},input:{buttonVisible:!1,hintVisible:!1}}),Wt=C.useCallback((oe,fe)=>{const Ce=oe.target.files[0];if(!Ce)return;if(!Ce.name.match(/\.(xlsx|xls)$/i)){r("Please select a valid Excel file (.xlsx or .xls)","error"),oe.target.value="";return}if(Ce.size>5*1024*1024){r("File is too large. Please select a file smaller than 5MB.","error"),oe.target.value="";return}k(!0);const je=new FileReader;je.onload=function(qe){try{console.log(" File loaded, processing data...");const Ze=new Uint8Array(qe.target.result),mt=ZA(Ze,{type:"array"}),qt=mt.SheetNames[0],pt=mt.Sheets[qt],Bt=Gb.sheet_to_json(pt,{header:1});console.log(" Parsed Excel data:",Bt),pr(Bt,fe),k(!1)}catch(Ze){console.error("Error processing Excel file:",Ze),r("Error reading Excel file: "+Ze.message,"error"),oe.target.value="",k(!1)}},je.onerror=function(){r("Failed to read file","error"),oe.target.value="",k(!1)},je.readAsArrayBuffer(Ce)},[r]),Zt=C.useCallback(()=>{console.log(" Initializing Excel upload for all test types...");const oe=document.querySelectorAll(".excel-upload-btn");console.log(` Found ${oe.length} Excel upload buttons`),oe.forEach((fe,Ce)=>{const je=fe.dataset.testType,qe=document.querySelector(`.excel-file-input[data-test-type="${je}"]`);console.log(` Processing button ${Ce+1}: testType=${je}, fileInput=${qe?"found":"not found"}`),qe?(fe._excelClickHandler&&fe.removeEventListener("click",fe._excelClickHandler),qe._excelChangeHandler&&qe.removeEventListener("change",qe._excelChangeHandler),fe._excelClickHandler=()=>{console.log(` Excel upload button clicked for test type: ${je}`),qe.click()},qe._excelChangeHandler=Ze=>{console.log(` File input changed for test type: ${je}`),Wt(Ze,je)},fe.addEventListener("click",fe._excelClickHandler),qe.addEventListener("change",qe._excelChangeHandler),console.log(` Excel upload initialized for test type: ${je}`)):console.warn(` File input not found for test type: ${je}`)}),console.log(" Excel upload initialization complete")},[Wt]),pr=C.useCallback((oe,fe)=>{const Ce=oe.filter(pt=>Array.isArray(pt)&&pt.length>0&&pt.some(Bt=>Bt&&Bt.toString().trim()!==""));console.log(" Original Excel data rows:",oe.length),console.log(" Filtered Excel data rows:",Ce.length);const qe=Ir(Ce,fe).dataRows;if(qe.length===0){const pt="No data rows found after header processing. Please check your Excel file.";r(pt,"error"),alert(pt),we(fe);return}console.log(` Processing Excel data for test type: ${fe}`),console.log(" Data rows after header processing:",qe);const Ze=er(qe,fe);if(console.log(" Recognition result:",Ze),!Ze.recognized){console.log(` Excel data recognition failed for test type: ${fe}`);const pt="Excel data recognition failed. Please check your file format.";r(pt,"error"),alert(pt),we(fe);return}console.log(` Excel data recognition successful for test type: ${fe}`);const mt=qe.length,qt=ue(fe);if(qt===0)console.log(` No question count specified, using CSV count: ${mt}`),O(pt=>({...pt,numQuestions:mt}));else if(mt!==qt){const pt=`Your CSV file has ${mt} data rows, but you specified ${qt} questions.

Please either:
1. Change your question count to ${mt}, or
2. Fix your CSV file to have exactly ${qt} data rows

Then try uploading again.`;r(pt,"error"),we(fe);return}Te(qe,fe)},[r]),Ir=C.useCallback((oe,fe)=>{if(oe.length===0)return{hasHeaders:!1,headerRow:null,dataRows:oe};const Ce=oe[0],je=br(fe);if(xr(Ce,je).isLikelyHeader){const Ze=`The first row of your Excel file looks like it contains headers:

"${Ce.join(" | ")}"

Does the first row contain column headers?

Click "OK" if YES (headers will be removed)
Click "Cancel" if NO (first row will be treated as data)`;if(window.confirm(Ze))return{hasHeaders:!0,headerRow:Ce,dataRows:oe.slice(1)}}return{hasHeaders:!1,headerRow:null,dataRows:oe}},[]),br=C.useCallback(oe=>{switch(oe){case"multipleChoice":return{keywords:["question","answer","correct","option","a","b","c","d","e","f"],expectedColumns:4};case"trueFalse":return{keywords:["question","answer","correct","true","false"],expectedColumns:2};case"input":return{keywords:["question","answer","correct"],expectedColumns:2};default:return{keywords:[],expectedColumns:0}}},[]),xr=C.useCallback((oe,fe)=>{if(!oe||oe.length===0)return{isLikelyHeader:!1};if(oe.length<fe.expectedColumns)return{isLikelyHeader:!1};const Ce=oe.join(" ").toLowerCase(),je=fe.keywords.filter(Ze=>Ce.includes(Ze.toLowerCase()));return{isLikelyHeader:je.length>fe.keywords.length/2,keywordMatches:je}},[]),er=C.useCallback((oe,fe)=>{if(oe.length===0)return r("No data rows found. Please check your Excel file.","error"),{recognized:!1,data:[]};console.log(` Checking data pattern for test type: ${fe}`),console.log(" Excel data to validate:",oe);const Ce=_r(oe,fe);if(console.log(" Recognition result:",Ce),!Ce.matches){const je=`Your Excel file doesn't match the expected format.

Required format:
${ge(fe)}

Please review your Excel file and make sure it follows this format exactly.

Then try uploading again.`;return console.log(" Data pattern validation failed:",je),console.log(" Calling showNotification with message:",je),r(je,"error"),console.log(" showNotification called"),alert(je),{recognized:!1,data:[]}}return console.log(` Data pattern validation passed for test type: ${fe}`),{recognized:!0,data:oe}},[r]),_r=C.useCallback((oe,fe)=>{if(fe==="multipleChoice")for(let Ce=0;Ce<oe.length;Ce++){const je=oe[Ce];if(je.length<4)return{matches:!1,issue:`Row ${Ce+1} has ${je.length} columns but needs at least 4`};if(!je[0]||je[0].toString().trim()==="")return{matches:!1,issue:`Row ${Ce+1} has no question in column 1`};if(!je[1]||je[1].toString().trim()==="")return{matches:!1,issue:`Row ${Ce+1} has no correct answer in column 2`}}else if(fe==="trueFalse")for(let Ce=0;Ce<oe.length;Ce++){const je=oe[Ce];if(je.length<2)return{matches:!1,issue:`Row ${Ce+1} has ${je.length} columns but needs at least 2`};if(!je[0]||je[0].toString().trim()==="")return{matches:!1,issue:`Row ${Ce+1} has no question in column 1`};const qe=je[1]?.toString().trim().toLowerCase();if(!qe||!["true","false","t","f"].includes(qe))return{matches:!1,issue:`Row ${Ce+1} has invalid correct answer in column 2 (must be True/False)`}}else if(fe==="input")for(let Ce=0;Ce<oe.length;Ce++){const je=oe[Ce];if(je.length<2)return{matches:!1,issue:`Row ${Ce+1} has ${je.length} columns but needs at least 2`};if(!je[0]||je[0].toString().trim()==="")return{matches:!1,issue:`Row ${Ce+1} has no question in column 1`};if(!je[1]||je[1].toString().trim()==="")return{matches:!1,issue:`Row ${Ce+1} has no correct answer in column 2`}}return{matches:!0}},[]),ge=C.useCallback(oe=>{switch(oe){case"multipleChoice":return`Column 1: Question
Column 2: Correct Answer (A, B, C, D, E, or F)
Column 3: Option A
Column 4: Option B
Column 5: Option C (optional)
Column 6: Option D (optional)
Column 7: Option E (optional)
Column 8: Option F (optional)`;case"trueFalse":return`Column 1: Question
Column 2: Correct Answer (True or False)`;case"input":return`Column 1: Question
Column 2: Correct Answer`;default:return"Unknown test type"}},[]),ue=C.useCallback(oe=>j.numQuestions||0,[j.numQuestions]),we=C.useCallback(oe=>{console.log(` Clearing file input for test type: ${oe}`)},[]),Te=C.useCallback((oe,fe)=>{switch(console.log(` populateFromExcelForTestType called with testType: ${fe}`),fe){case"multipleChoice":case"multiple-choice":Xe(oe);break;case"trueFalse":case"true-false":Ct(oe);break;case"input":Pt(oe);break;default:console.log(` Unknown test type: ${fe}`)}},[]),Xe=C.useCallback(oe=>{console.log(" populateMultipleChoiceFromExcel called with:",oe);const fe=Math.max(...oe.map(qe=>qe.length-2)),Ce=Math.min(fe,6);console.log(` Excel data has ${fe} option columns, using ${Ce} options`),O(qe=>({...qe,numOptions:Ce}));const je={};oe.forEach((qe,Ze)=>{const mt=Ze+1;console.log(` Row ${Ze+1} data:`,qe);const qt={question:(qe[0]||"").toString().trim(),options:[],correctAnswer:(qe[1]||"").toString().trim().toUpperCase()};console.log(` Question ${mt} correctAnswer:`,qt.correctAnswer),["A","B","C","D","E","F"].slice(0,Ce).forEach((Cr,$r)=>{const Ur=(qe[$r+2]||"").toString().trim();console.log(` Option ${$r} (${Cr}):`,Ur),qt.options.push(Ur)}),je[mt]=qt}),O(qe=>{const Ze={...qe,questions:je};return console.log(" Updating form data with:",Ze),Ze}),console.log(" Populated multiple choice questions from Excel:",je),r(`Successfully loaded ${oe.length} questions from CSV file!`,"success"),H(),Ue("multiple-choice")},[j.numOptions,H,r]),Ct=C.useCallback(oe=>{console.log(" populateTrueFalseFromExcel called with:",oe);const fe={};oe.forEach((Ce,je)=>{const qe=je+1,Ze={question:(Ce[0]||"").toString().trim(),correctAnswer:Ce[1]?.toString().trim().toLowerCase()==="true"?"true":"false"};fe[qe]=Ze}),O(Ce=>({...Ce,questions:fe})),console.log(" Populated true/false questions from Excel:",fe),r(`Successfully loaded ${oe.length} questions from CSV file!`,"success"),J(),Ue("true-false")},[J,r]),Pt=C.useCallback(oe=>{console.log(" populateInputFromExcel called with:",oe);const fe={};oe.forEach((Ce,je)=>{const qe=je+1,Ze=[];for(let qt=1;qt<Ce.length;qt++){const pt=(Ce[qt]||"").toString().trim();pt&&Ze.push(pt)}const mt={question:(Ce[0]||"").toString().trim(),correctAnswer:Ze[0]||"",correct_answers:Ze};console.log(` Excel question ${qe} data:`,mt),fe[qe]=mt}),O(Ce=>({...Ce,questions:fe})),console.log(" Populated input questions from Excel:",fe),r(`Successfully loaded ${oe.length} questions from Excel file!`,"success"),Q(),Ue("input")},[Q,r]),Ue=C.useCallback(oe=>{switch(console.log(` Reattaching form event listeners for test type: ${oe}`),document.querySelectorAll('[data-listener-attached="true"]').forEach(Ce=>{Ce.removeEventListener("input",()=>{}),Ce.removeAttribute("data-listener-attached")}),oe){case"multiple-choice":H();break;case"true-false":J();break;case"input":Q();break;default:console.warn("Unknown test type for event listener reattachment:",oe)}console.log(` Form event listeners reattached for test type: ${oe}`)},[H,J,Q]),ft=C.useCallback(()=>{const oe=localStorage.getItem("test_creation_state");if(!oe)return console.log(" No test creation state found in localStorage"),!1;try{const fe=JSON.parse(oe);console.log(" Found test creation state:",fe);const Ce=Date.now()-fe.timestamp,je=1800*1e3;if(Ce>je)return console.log(" Test creation state is too old, clearing it"),I(),!1;switch(a(!0),console.log(" Restored isInTestCreation flag to true"),ee(),fe.excelState&&W(),fe.currentStep){case"testTypeSelection":console.log(" Restoring test type selection step"),u("typeSelection");break;case"multipleChoiceForm":console.log(" Restoring multiple choice form step"),p("multipleChoice"),u("formCreation");break;case"trueFalseForm":console.log(" Restoring true/false form step"),p("trueFalse"),u("formCreation");break;case"inputForm":console.log(" Restoring input form step"),p("input"),u("formCreation");break;case"testAssignment":case"assignment":console.log(" Restoring test assignment step"),console.log(" Cannot restore test assignment step without test data, going back to type selection"),u("typeSelection");break;default:console.log(" Unknown step in state, defaulting to type selection"),u("typeSelection")}return L(fe.currentStep),!0}catch(fe){return console.error(" Error restoring test creation state:",fe),I(),!1}},[I,ee,W,L]);C.useEffect(()=>{console.log(" Initializing Teacher Tests..."),re(),ft(),he(),Zt()},[re,ft,he,Zt]),C.useEffect(()=>{j.numQuestions>0&&g&&g!=="matching"&&g!=="drawing"&&g!=="fillBlanks"&&(console.log(" Excel upload buttons rendered, initializing event listeners..."),setTimeout(()=>{Zt()},100))},[j.numQuestions,g,Zt]);const ot=oe=>{console.log(" Test type selected:",oe),console.log(" Setting testType to:",oe),p(oe),u("formCreation"),O({testName:"",numQuestions:0,numOptions:0,questions:{},enableTimer:!1,timerMinutes:""}),z("formCreation"),setTimeout(()=>{Zt()},100)},Ht=(oe,fe)=>{O(Ce=>({...Ce,[oe]:fe}))},Gt=(oe,fe,Ce)=>{O(je=>({...je,questions:{...je.questions,[oe]:{...je.questions[oe],[fe]:Ce}}}))},mr=(oe,fe,Ce,je=0)=>{const qe={};for(let Ze=1;Ze<=Ce;Ze++)oe==="multipleChoice"?qe[Ze]={question:"",options:Array.from({length:je},()=>""),correctAnswer:""}:oe==="trueFalse"?qe[Ze]={question:"",correctAnswer:""}:oe==="input"&&(qe[Ze]={question:"",correct_answers:[""]});O(Ze=>({...Ze,questions:qe})),oe==="multipleChoice"?(ne("multiple-choice"),Z("multiple-choice")):oe==="trueFalse"?(ne("true-false"),Z("true-false")):oe==="input"&&(ne("input"),Z("input"))},Vr=async()=>{if(!g||!j.testName||!j.numQuestions){r("Please fill in all required fields","error");return}console.log(" Test form completed, proceeding to assignment step"),z("testAssignment",j),u("testAssignment"),r("Test form completed! Now select classes and subjects.","success")},vr=(oe,fe,Ce,je,qe)=>{M(Ce?Ze=>[...Ze,{grade:oe,class:fe,subject_id:je,subject:qe}]:Ze=>Ze.filter(mt=>!(mt.grade===oe&&mt.class===fe&&mt.subject_id===je)))},hr=C.useCallback(async oe=>{console.log(" [DEBUG] handleMatchingTestSave called"),console.log(" [DEBUG] Received testData:",oe),console.log(" [DEBUG] Current formData:",j),console.log(" [DEBUG] Current testType:",g),console.log(" [DEBUG] Current user:",e),console.log(" [DEBUG] Current currentStep:",l),b(!0);try{const fe=oe.blocks.map((qe,Ze)=>{const mt=oe.words.find(Bt=>Bt.blockId===qe.id)?.word||`Word ${Ze+1}`,qt=oe.arrows.some(Bt=>Bt.startBlock===qe.id),pt=oe.arrows.find(Bt=>Bt.startBlock===qe.id)||null;return{question_id:Ze+1,word:mt,block_coordinates:{x:qe.x,y:qe.y,width:qe.width,height:qe.height},has_arrow:qt,arrow:pt?{startX:pt.startX,startY:pt.startY,endX:pt.endX,endY:pt.endY,style:pt.style||{}}:null}}),Ce={teacher_id:e.teacher_id,test_name:j.testName||`Matching Test - ${new Date().toLocaleString()}`,image_url:oe.imageUrl,num_blocks:oe.blocks.length,questions:fe,assignments:[]};console.log(" Sending matching test payload:",Ce);const je={...j,testName:Ce.test_name,numQuestions:Ce.num_blocks,numOptions:0,questions:fe.reduce((qe,Ze,mt)=>(qe[mt+1]={question:Ze.word,correctAnswer:Ze.word,options:[]},qe),{}),matchingTestData:oe};console.log(" Assignment form data:",je),O(je),z("testAssignment",je),console.log(" Setting current step to testAssignment"),u("testAssignment"),r("Matching test data saved! Now select classes and subjects.","success")}catch(fe){console.error(" Error saving matching test:",fe),r("Failed to save matching test: "+fe.message,"error")}finally{b(!1)}},[e,j,g,r,z]),le=C.useCallback(()=>{console.log(" Cancelling matching test creation"),u("typeSelection"),O({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),_e=C.useCallback(async oe=>{console.log(" [DEBUG] handleWordMatchingTestSave called"),console.log(" [DEBUG] Received testData:",oe),b(!0);try{O(fe=>({...fe,wordMatchingData:oe,numQuestions:oe.numQuestions||oe.wordPairs?.length||0})),u("testAssignment"),r("Word matching test created! Now assign it to classes.","success")}catch(fe){console.error("Error saving word matching test:",fe),r("Failed to save word matching test: "+fe.message,"error")}finally{b(!1)}},[r]),pe=C.useCallback(()=>{console.log(" Cancelling word matching test creation"),u("typeSelection"),O({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),ve=C.useCallback(async oe=>{console.log(" [DEBUG] handleDrawingTestSave called"),console.log(" [DEBUG] Received testData:",oe),b(!0);try{O(fe=>({...fe,drawingData:oe,numQuestions:oe.num_questions||oe.questions?.length||0})),u("testAssignment"),r("Drawing test created! Now assign it to classes.","success")}catch(fe){console.error(" Error saving drawing test:",fe),r("Error saving drawing test","error")}finally{b(!1)}},[r]),Se=C.useCallback(()=>{console.log(" Cancelling drawing test creation"),u("typeSelection"),O({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),ke=C.useCallback(()=>{console.log(" Cancelling fill blanks test creation"),u("typeSelection"),O({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),Ge=C.useCallback(async oe=>{console.log(" [DEBUG] handleFillBlanksTestSave called"),console.log(" [DEBUG] Received testData:",oe),b(!0);try{O(fe=>({...fe,fillBlanksData:oe,numQuestions:oe.num_questions||oe.blanks?.length||0})),u("testAssignment"),r("Fill blanks test created! Now assign it to classes.","success")}catch(fe){console.error(" Error saving fill blanks test:",fe),r("Error saving fill blanks test","error")}finally{b(!1)}},[r]),dt=C.useCallback(()=>{console.log(" Cancelling speaking test creation"),u("typeSelection"),O({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),Ie=C.useCallback(async oe=>{console.log(" [DEBUG] handleSpeakingTestSave called"),console.log(" [DEBUG] Received testData:",oe),b(!0);try{O(fe=>({...fe,speakingData:oe,numQuestions:oe.questions?.length||0})),u("testAssignment"),r("Speaking test created! Now assign it to classes.","success")}catch(fe){console.error(" Error saving speaking test:",fe),r("Error saving speaking test","error")}finally{b(!1)}},[r]);return c.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[c.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs(co,{mode:"wait",children:[l==="typeSelection"&&c.jsxs(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs(nt,{variant:"outline",onClick:()=>window.history.back(),className:"flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),c.jsx("span",{children:"Back to Main"})]}),c.jsx("div",{className:"flex-1"})]}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Create New Test"}),c.jsx("p",{className:"text-gray-600",children:"Choose the type of test you want to create"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{type:"multipleChoice",title:"Multiple Choice",description:"Questions with multiple answer options",icon:"/pics/multiple-choice.png"},{type:"trueFalse",title:"True/False",description:"Questions with true or false answers",icon:"/pics/true-false.png"},{type:"input",title:"Input",description:"Questions requiring text input",icon:"/pics/input.png"},{type:"matching",title:"Picture Matching",description:"Labeling pictures",icon:"/pics/matching.png"},{type:"wordMatching",title:"Word Matching",description:"Matching word pairs by dragging or drawing arrows",icon:"/pics/matching-words.png"},{type:"drawing",title:"Drawing Test",description:"Interactive drawing tests with canvas for students",icon:"/pics/drawing.png"},{type:"fillBlanks",title:"Fill Blanks",description:"Text with multiple choice blanks",icon:"/pics/fill-blanks.png"},{type:"speaking",title:"Speaking Test",description:"Audio recording with AI-powered feedback",icon:"/pics/speaking.png"}].map(({type:oe,title:fe,description:Ce,icon:je})=>c.jsx(rt.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"cursor-pointer",onClick:()=>ot(oe),children:c.jsxs(Et,{className:"h-full text-center hover:shadow-lg transition-shadow",children:[c.jsx("div",{className:"mb-3 flex justify-center",children:c.jsx("img",{src:je,alt:fe,className:"w-12 h-12 object-contain"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:fe}),c.jsx("p",{className:"text-sm text-gray-600",children:Ce})]})},oe))})]}),l==="formCreation"&&c.jsxs(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"flex space-x-2",children:c.jsx(nt,{variant:"outline",onClick:Y,children:" Back to Test Types"})}),c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Create ",g==="multipleChoice"?"Multiple Choice":g==="trueFalse"?"True/False":g==="input"?"Input":g==="drawing"?"Drawing":g==="fillBlanks"?"Fill Blanks":g==="wordMatching"?"Word Matching":g==="speaking"?"Speaking":"Picture Matching"," Test"]}),c.jsx("p",{className:"text-gray-600",children:"Fill in the test details and questions"})]})]})}),c.jsx(Et,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Information"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Test Name"}),c.jsx("input",{type:"text",value:j.testName,onChange:oe=>Ht("testName",oe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter test name"})]}),g!=="matching"&&g!=="wordMatching"&&g!=="drawing"&&g!=="fillBlanks"&&g!=="speaking"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Questions"}),c.jsx("input",{type:"number",min:"1",max:"50",value:j.numQuestions,onChange:oe=>{const fe=parseInt(oe.target.value)||0;Ht("numQuestions",fe),fe>0&&mr(g,j.testName,fe,j.numOptions)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter number of questions"})]}),g==="multipleChoice"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Options per Question"}),c.jsx("input",{type:"number",min:"2",max:"6",value:j.numOptions,onChange:oe=>{const fe=parseInt(oe.target.value)||0;Ht("numOptions",fe),fe>0&&fe<2&&r("Multiple choice tests require at least 2 options per question. Please enter 2 or more.","warning"),j.numQuestions>0&&mr(g,j.testName,j.numQuestions,fe)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter number of options (2-6)"})]}),g!=="speaking"&&c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("label",{className:"inline-flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",checked:!!j.enableTimer,onChange:oe=>Ht("enableTimer",oe.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),c.jsx("span",{className:"text-sm text-gray-700",children:"Enable timer for this test"})]}),j.enableTimer&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm text-gray-700",children:"Time (minutes):"}),c.jsx("input",{type:"number",min:"1",max:"1440",value:j.timerMinutes,onChange:oe=>Ht("timerMinutes",oe.target.value.replace(/[^0-9]/g,"")),className:"w-28 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g. 30"})]}),g!=="drawing"&&g!=="matching"&&g!=="wordMatching"&&g!=="fillBlanks"&&g!=="speaking"&&c.jsxs("label",{className:"inline-flex items-center space-x-2 ml-6",children:[c.jsx("input",{type:"checkbox",checked:!!j.isShuffled,onChange:oe=>Ht("isShuffled",oe.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),c.jsx("span",{className:"text-sm text-gray-700",children:"Shuffle questions during test"})]})]})]})}),g==="matching"&&c.jsx(Et,{children:c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Picture Matching Test"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Upload an image and create interactive matching blocks with words."}),c.jsx(Oie,{testName:j.testName,onTestSaved:hr,onCancel:le,onBackToCabinet:Oe,isSaving:_,validationErrors:{}})]})}),g==="wordMatching"&&c.jsx(Et,{children:c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Word Matching Test"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Create word pairs for students to match by dragging or drawing arrows."}),c.jsx(Rue,{testName:j.testName,onTestSaved:_e,onCancel:pe,onBackToCabinet:Oe,isSaving:_,validationErrors:{}})]})}),g==="drawing"&&c.jsxs("div",{className:"drawing-test-section",children:[console.log(" Rendering DrawingTestCreator, testType:",g),c.jsx(Sue,{testName:j.testName,onTestSaved:ve,onCancel:Se,onBackToCabinet:Oe,isSaving:_,validationErrors:{}})]}),g==="fillBlanks"&&c.jsxs("div",{className:"fill-blanks-test-section",children:[console.log(" Rendering FillBlanksTestCreator, testType:",g),c.jsx(Eue,{testName:j.testName,allowedTime:j.enableTimer&&parseInt(j.timerMinutes)||null,onTestSaved:Ge,onCancel:ke,onBackToCabinet:Oe,isSaving:_,validationErrors:{}})]}),g==="speaking"&&c.jsxs(Et,{children:[console.log(" Rendering SpeakingTestCreator, testType:",g),c.jsx(Aue,{testName:j.testName,onTestSaved:Ie,onCancel:dt,onBackToCabinet:Oe,isSaving:_,validationErrors:{}})]}),g!=="matching"&&g!=="drawing"&&g!=="fillBlanks"&&g!=="speaking"&&j.numQuestions>0&&c.jsx(Et,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Excel Upload"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Upload an Excel file to automatically populate questions, or fill them in manually below."}),c.jsxs("div",{className:"space-y-6",children:[g==="multipleChoice"&&gt.multipleChoice?.buttonVisible&&c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"multiple-choice",disabled:E,children:E?c.jsxs(c.Fragment,{children:[c.jsx(Gr,{size:"sm",color:"white"}),c.jsx("span",{className:"font-medium",children:"Processing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),c.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),c.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"multiple-choice"})]}),c.jsx("div",{className:"w-fit",children:c.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:c.jsxs("div",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Multiple Choice Format:"}),c.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[c.jsx("div",{children:"Column 1: Question"}),c.jsx("div",{children:"Column 2: Correct Answer (A-F)"}),c.jsx("div",{children:"Column 3: Option A text"}),c.jsx("div",{children:"Column 4: Option B text"}),c.jsx("div",{children:"Column 5: Option C text"}),c.jsx("div",{children:"Column 6: Option D text"})]})]})})})]}),g==="trueFalse"&&gt.trueFalse?.buttonVisible&&c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"true-false",disabled:E,children:E?c.jsxs(c.Fragment,{children:[c.jsx(Gr,{size:"sm",color:"white"}),c.jsx("span",{className:"font-medium",children:"Processing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),c.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),c.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"true-false"})]}),c.jsx("div",{className:"w-fit",children:c.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:c.jsxs("div",{className:"text-xs text-blue-800",children:[c.jsxs("div",{children:[c.jsx("strong",{children:"Format:"})," Question | Answer (true/false)"]}),c.jsxs("div",{className:"mt-1",children:[c.jsx("strong",{children:"Example:"})," The Earth is round | true"]}),c.jsxs("div",{className:"mt-1",children:[c.jsx("strong",{children:"Note:"})," Headers are optional"]})]})})})]}),g==="input"&&gt.input?.buttonVisible&&c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"input",disabled:E,children:E?c.jsxs(c.Fragment,{children:[c.jsx(Gr,{size:"sm",color:"white"}),c.jsx("span",{className:"font-medium",children:"Processing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),c.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),c.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"input"})]}),c.jsx("div",{className:"w-fit",children:c.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:c.jsxs("div",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Input Test Format:"}),c.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[c.jsx("div",{children:"Column 1: Question"}),c.jsx("div",{children:"Column 2: Answer 1"}),c.jsx("div",{children:"Column 3: Answer 2 (optional)"})]})]})})})]})]})]})}),g!=="matching"&&g!=="drawing"&&g!=="fillBlanks"&&j.numQuestions>0&&c.jsx(Et,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Manual Question Entry"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Fill in the questions manually using the form below."})]})}),j.numQuestions>0&&c.jsx(Et,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Questions"}),c.jsx("div",{className:"space-y-6",children:Object.keys(j.questions).map(oe=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Question ",oe]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text"}),c.jsx("textarea",{value:j.questions[oe]?.question||"",onChange:fe=>Gt(oe,"question",fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"Enter the question text"})]}),g==="multipleChoice"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answer Options"}),c.jsx("div",{className:"space-y-2",children:j.questions[oe]?.options?.map((fe,Ce)=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("span",{className:"w-6 text-sm font-medium text-gray-700",children:[String.fromCharCode(65+Ce),":"]}),c.jsx("input",{type:"text",value:fe,onChange:je=>{const qe=[...j.questions[oe].options];qe[Ce]=je.target.value,Gt(oe,"options",qe)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Option ${String.fromCharCode(65+Ce)}`})]},Ce))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer"}),g==="multipleChoice"?c.jsx("div",{children:c.jsxs("select",{value:j.questions[oe]?.correctAnswer||"",onChange:fe=>Gt(oe,"correctAnswer",fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"",children:"Select correct answer"}),j.questions[oe]?.options?.map((fe,Ce)=>c.jsx("option",{value:String.fromCharCode(65+Ce),children:String.fromCharCode(65+Ce)},Ce))]})}):g==="trueFalse"?c.jsxs("select",{value:j.questions[oe]?.correctAnswer||"",onChange:fe=>Gt(oe,"correctAnswer",fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"true",children:"True"}),c.jsx("option",{value:"false",children:"False"})]}):c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer(s)"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("input",{type:"text",value:j.questions[oe]?.correct_answers?.[0]||"",onChange:fe=>{const je=[...j.questions[oe]?.correct_answers||[""]];je[0]=fe.target.value,Gt(oe,"correct_answers",je)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter the primary correct answer"}),j.questions[oe]?.correct_answers?.slice(1).map((fe,Ce)=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("input",{type:"text",value:fe,onChange:je=>{const qe=[...j.questions[oe]?.correct_answers||[]];qe[Ce+1]=je.target.value,Gt(oe,"correct_answers",qe)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Alternative answer ${Ce+2}`}),c.jsx("button",{type:"button",onClick:()=>{const je=[...j.questions[oe]?.correct_answers||[]];je.splice(Ce+1,1),Gt(oe,"correct_answers",je)},className:"px-2 py-1 text-red-600 hover:text-red-800 text-sm",children:"Remove"})]},Ce))||[],c.jsx("button",{type:"button",onClick:()=>{const Ce=[...j.questions[oe]?.correct_answers||[""],""];Gt(oe,"correct_answers",Ce)},className:"px-3 py-1 text-blue-600 hover:text-blue-800 text-sm border border-blue-300 rounded-md hover:bg-blue-50",children:"+ Add Alternative Answer"})]}),c.jsx("p",{className:"text-xs text-gray-500",children:"You can add multiple correct answers for the same question. Students will get credit for any of them."})]})]})]})]},oe))})]})}),j.testName&&j.numQuestions>0&&c.jsx("div",{className:"flex justify-end",children:c.jsx(nt,{onClick:Vr,disabled:_,className:"px-8",children:_?c.jsxs(c.Fragment,{children:[c.jsx(Gr,{size:"sm",color:"white",className:"mr-2"}),"Saving Test..."]}):"Save Test & Continue to Assignment"})})]}),l==="testAssignment"&&c.jsxs(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs(nt,{variant:"outline",onClick:()=>window.history.back(),className:"flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),c.jsx("span",{children:"Back to Main"})]}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Assign Test to Classes"}),c.jsx("p",{className:"text-gray-600",children:"Select which classes should take this test"})]})]}),c.jsx(nt,{variant:"outline",onClick:()=>u("formCreation"),children:" Back to Test Form"})]}),c.jsx(Et,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Available Classes"}),x.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("p",{className:"text-gray-500 text-lg",children:"No subjects available for assignment."}),c.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"You need to assign subjects to grades and classes first."}),c.jsx("div",{className:"mt-4",children:c.jsx(nt,{onClick:()=>window.location.href="/teacher/subjects",className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Go to Subjects Page"})})]}):c.jsx("div",{className:"space-y-6",children:x.map(oe=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:oe.subject}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2",children:oe.classes.map(fe=>c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:R.some(Ce=>Ce.grade===fe.grade&&Ce.class===fe.class&&Ce.subject_id===oe.subject_id),onChange:Ce=>vr(fe.grade,fe.class,Ce.target.checked,oe.subject_id,oe.subject),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),c.jsxs("span",{className:"text-sm text-gray-700",children:[fe.grade,"/",fe.class]})]},`${fe.grade}-${fe.class}-${oe.subject_id}`))})]},oe.subject_id))})]})}),R.length>0&&c.jsx("div",{className:"flex justify-end",children:c.jsx(nt,{onClick:()=>Ne(g,null),disabled:v,className:"px-8",children:v?c.jsxs(c.Fragment,{children:[c.jsx(Gr,{size:"sm",color:"white",className:"mr-2"}),"Assigning Test..."]}):`Assign Test to ${R.length} Class${R.length>1?"es":""}`})})]})]})}),console.log(" Checking isAssigningTest:",A),A&&c.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Assigning test to classes..."}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we process your assignment"})]})}),_&&c.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Saving test..."}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we save your test"})]})}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:t.map(oe=>c.jsx(tc,{type:oe.type,message:oe.message,duration:oe.duration,onClose:()=>n(oe.id)},oe.id))})]})},X8e=({onDataLoaded:e,onError:t})=>{const r=yo(),{user:n,isAuthenticated:s}=ls(),{teacherData:a,loadTeacherData:i}=rS(),[o,l]=C.useState(!0),[u,d]=C.useState(""),[f,g]=C.useState([]),[p,x]=C.useState(null),[y,v]=C.useState([]),[T,_]=C.useState([]),[b,E]=C.useState([]),[k,A]=C.useState(null),[P,j]=C.useState(0);C.useEffect(()=>{re()},[]),C.useCallback(async ee=>{console.log(" Teacher login attempt...");try{const B=await ts.teacherLogin(ee);if(B.success)return K("Login successful!","success"),await O(),B;throw new Error(B.error||"Login failed")}catch(B){throw console.error(" Teacher login error:",B),K("Login failed. Please check your credentials.","error"),B}},[]);const O=C.useCallback(async()=>{console.log(" Loading teacher data...");try{if(l(!0),d(""),!s||!n){console.log(" User not authenticated"),d("User not authenticated");return}if(n.role!==Gi.TEACHER){console.error(" Invalid user role for teacher data:",n.role),d("Access denied. Teacher role required.");return}console.log(" Fetching teacher data from service...");const ee=await ts.getTeacherData();if(ee&&ee.success)console.log(" Teacher data loaded successfully:",ee),x(ee.teacher||n),ee.subjects&&(v(ee.subjects),console.log(" Teacher subjects loaded:",ee.subjects.length)),ee.grades&&_(ee.grades),ee.classes&&E(ee.classes),A(new Date),j(B=>B+1),e&&e(ee),K("Teacher data loaded successfully!","success");else throw new Error(ee?.error||"Failed to load teacher data")}catch(ee){console.error(" Error loading teacher data:",ee);const B=ee.message||"Failed to load teacher data";d(B),t&&t(ee),K(B,"error")}finally{l(!1)}},[s,n,e,t]),R=C.useCallback(()=>{console.log(" Returning to main cabinet..."),r("/teacher/cabinet")},[r]);C.useCallback(ee=>{console.log(" Showing main cabinet with subjects:",ee),ee&&v(ee),r("/teacher/cabinet")},[r]);const M=C.useCallback(()=>(console.log(" Rendering grade buttons..."),["M1","M2","M3","M4","M5","M6"].map(B=>({id:B,name:`Grade ${B}`,classes:G(B)}))),[]),G=C.useCallback(ee=>Array.from({length:10},(z,I)=>I+1).map(z=>({id:`${ee}-${z}`,name:`Class ${z}`,grade:ee,classNumber:z})),[]),K=C.useCallback((ee,B)=>{const z={id:Date.now(),message:ee,type:B,timestamp:new Date};g(I=>[...I,z]),setTimeout(()=>{g(I=>I.filter(W=>W.id!==z.id))},bf.NOTIFICATION_DURATION)},[]),re=C.useCallback(async()=>{console.log(" Initializing teacher data..."),await O()},[O]),Y=C.useCallback(async()=>{console.log(" Refreshing teacher data..."),await O()},[O]);return C.useCallback(async ee=>{console.log(" Updating teacher profile:",ee);try{const B=await ts.updateUserProfile(ee);if(B.success)return x(z=>({...z,...ee})),K("Profile updated successfully!","success"),B;throw new Error(B.error||"Failed to update profile")}catch(B){throw console.error(" Error updating teacher profile:",B),K("Failed to update profile","error"),B}},[]),C.useCallback(async ee=>{console.log(" Changing teacher password...");try{const B=await ts.changePassword(ee);if(B.success)return K("Password changed successfully!","success"),B;throw new Error(B.error||"Failed to change password")}catch(B){throw console.error(" Error changing teacher password:",B),K("Failed to change password","error"),B}},[]),o?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Gr,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Data..."})]})}):u?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Data Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:u}),c.jsxs("div",{className:"flex space-x-3 justify-center",children:[c.jsx(nt,{variant:"primary",onClick:Y,children:"Retry"}),c.jsx(nt,{variant:"outline",onClick:R,children:"Go Back"})]})]})})}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Teacher Data"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",k?k.toLocaleString():"Never"," | Version: ",P]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx(nt,{variant:"outline",onClick:Y,children:"Refresh Data"}),c.jsx(nt,{variant:"outline",onClick:R,children:"Back to Cabinet"})]})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Teacher Information"}),p?c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Name:"}),c.jsx("p",{className:"text-sm text-gray-900",children:p.name||"N/A"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Username:"}),c.jsx("p",{className:"text-sm text-gray-900",children:p.username||"N/A"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Email:"}),c.jsx("p",{className:"text-sm text-gray-900",children:p.email||"N/A"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Role:"}),c.jsx("p",{className:"text-sm text-gray-900",children:p.role||"N/A"})]})]}):c.jsx("p",{className:"text-gray-500",children:"No teacher information available"})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Subjects (",y.length,")"]}),y.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map((ee,B)=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-medium text-gray-900",children:ee.name}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ee.description||"No description"}),ee.classes&&ee.classes.length>0&&c.jsxs("div",{className:"mt-2",children:[c.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Classes:"}),c.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:ee.classes.map((z,I)=>c.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:[z.grade," - ",z.className]},I))})]})]},B))}):c.jsx("p",{className:"text-gray-500",children:"No subjects assigned"})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grade Levels"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M().map(ee=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:ee.name}),c.jsx("div",{className:"grid grid-cols-5 gap-1",children:ee.classes.map(B=>c.jsx("button",{className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",onClick:()=>console.log("Class clicked:",B),children:B.classNumber},B.id))})]},ee.id))})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Statistics"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-semibold text-blue-600",children:y.length}),c.jsx("p",{className:"text-sm text-gray-500",children:"Subjects"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-semibold text-green-600",children:T.length}),c.jsx("p",{className:"text-sm text-gray-500",children:"Grades"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-semibold text-yellow-600",children:b.length}),c.jsx("p",{className:"text-sm text-gray-500",children:"Classes"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-semibold text-purple-600",children:P}),c.jsx("p",{className:"text-sm text-gray-500",children:"Data Version"})]})]})]})]})}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:f.map(ee=>c.jsx(tc,{type:ee.type,message:ee.message,onClose:()=>g(B=>B.filter(z=>z.id!==ee.id))},ee.id))})]})},Y8e=({onBackToCabinet:e})=>{const t=yo(),{user:r,isAuthenticated:n}=ls(),{teacherData:s}=rS(),[a,i]=C.useState(!0),[o,l]=C.useState(""),[u,d]=C.useState([]),[f,g]=C.useState([]),[p,x]=C.useState([]),[y,v]=C.useState([]),[T,_]=C.useState(null),[b,E]=C.useState([]),[k,A]=C.useState(!1),[P,j]=C.useState(!1),[O,R]=C.useState(!1),[M,G]=C.useState(!1),[K,re]=C.useState(null),[Y,ee]=C.useState(!0),[B,z]=C.useState(null);C.useEffect(()=>{ze()},[]),C.useCallback(et=>{console.log(" Rendering existing subjects:",et),g(et)},[]);const I=C.useCallback(()=>{console.log(" Showing subject selection prompt..."),A(!0),ee(!1),W()},[]),W=C.useCallback(async()=>{console.log(" Loading existing subjects...");try{const et=await ts.getTeacherSubjects();et.success&&et.subjects&&et.subjects.length>0?(console.log(" Existing subjects found:",et.subjects),V(et.subjects)):(console.log(" No existing subjects found"),v([]))}catch(et){console.error(" Error loading existing subjects:",et),Re("Failed to load existing subjects","error")}},[]),V=C.useCallback(et=>{console.log(" Rendering subject selection:",et);const Me=[];et.forEach(Fe=>{Fe.classes&&Array.isArray(Fe.classes)&&Fe.classes.forEach(Ke=>{Me.push({id:`${Fe.subject_id}-${Ke.grade}-${Ke.class}`,subjectId:Fe.subject_id,subjectName:Fe.subject,grade:Ke.grade,class:Ke.class,displayText:`${Fe.subject} - ${Ke.grade}/${Ke.class}`})})}),v(Me),console.log(" Processed subjects for selection:",Me)},[]),L=C.useCallback(async et=>{if(console.log(" Saving teacher subjects:",et),!et||et.length===0){Re("Please select at least one subject and class combination.","warning");return}try{const Me=et.reduce((Ke,xt)=>{const ut=Ke.find(At=>At.subject_id===xt.subjectId);return ut?ut.classes.push({grade:xt.grade,class:xt.class}):Ke.push({subject_id:xt.subjectId,classes:[{grade:xt.grade,class:xt.class}]}),Ke},[]);console.log(" Transformed data for backend:",Me);const Fe=await ts.saveTeacherSubjects(Me);if(Fe.success)Re("Subjects saved successfully!","success"),A(!1),ee(!0),z(new Date),await W();else throw new Error(Fe.error||"Failed to save subjects")}catch(Me){console.error(" Error saving subjects:",Me),Re("Error saving subjects. Please try again.","error")}},[]),H=C.useCallback(()=>{console.log(" Toggling subject dropdown..."),j(et=>!et),R(!1)},[]),J=C.useCallback(async()=>{console.log(" Loading subjects for dropdown...");try{const et=await ts.getAllSubjects();if(et.success)x(et.subjects||[]),console.log(" Available subjects loaded:",et.subjects?.length||0);else throw new Error(et.error||"Failed to load subjects")}catch(et){console.error(" Error loading subjects for dropdown:",et),Re("Failed to load subjects","error")}},[]),Q=C.useCallback(et=>{console.log(" Subject selected:",et);const Me=p.find(Fe=>Fe.subject_id===parseInt(et));Me&&(_(Me),R(!0),j(!1),ne())},[p]),ne=C.useCallback(()=>{console.log(" Loading grades and classes...")},[]),Z=C.useCallback((et,Me)=>{console.log(" Saving classes for subject:",et,Me);const Fe={id:`${et.subject_id}-${Date.now()}`,subjectId:et.subject_id,subjectName:et.subject,grade:Me.grade,class:Me.class,displayText:`${et.subject} - ${Me.grade}/${Me.class}`};v(Ke=>[...Ke,Fe]),_(null),E([]),R(!1),ce(`Added ${et.subject} for ${Me.grade}/${Me.class}`)},[]),se=C.useCallback(()=>{console.log(" Resetting subject selection..."),_(null),E([]),j(!1),R(!1)},[]),ce=C.useCallback(et=>{console.log(" Showing message:",et),Re(et,"success")},[]),he=C.useCallback(et=>{console.log(" Showing confirmation modal:",et),re(et),G(!0)},[]),Ee=C.useCallback(()=>{console.log(" Hiding confirmation modal..."),G(!1),re(null)},[]),ie=C.useCallback(()=>{console.log(" Confirming save subjects..."),Ee(),L(y)},[y,L,Ee]),me=C.useCallback(()=>{console.log(" Cancelling save subjects..."),Ee()},[Ee]),Ne=C.useCallback(et=>{console.log(" Removing subject:",et),v(Me=>Me.filter(Fe=>Fe.id!==et)),Re("Subject removed","info")},[]);C.useCallback(()=>{console.log(" Showing edit subjects button..."),ee(!0)},[]),C.useCallback(()=>{console.log(" Hiding edit subjects button..."),ee(!1)},[]);const Oe=C.useCallback(et=>{console.log(" Generating class buttons for grade:",et);let Me;return et===1||et===2?Me=["15","16"]:et===3?Me=["15","16"]:et===4?Me=["13","14"]:et===5||et===6?Me=["13","14"]:Me=[],Me.map(Fe=>({id:`${et}-${Fe}`,grade:et,class:Fe,displayText:`${et}/${Fe}`}))},[]);C.useCallback((et,Me)=>{console.log(" Showing class results:",et,Me),t("/teacher/results")},[t]);const Re=C.useCallback((et,Me)=>{const Fe={id:Date.now(),message:et,type:Me,timestamp:new Date};d(Ke=>[...Ke,Fe]),setTimeout(()=>{d(Ke=>Ke.filter(xt=>xt.id!==Fe.id))},bf.NOTIFICATION_DURATION)},[]),ze=C.useCallback(async()=>{console.log(" Initializing teacher subjects...");try{if(i(!0),l(""),!n||!r){console.log(" User not authenticated"),l("User not authenticated");return}if(r.role!==Gi.TEACHER){console.error(" Invalid user role for teacher subjects:",r.role),l("Access denied. Teacher role required.");return}await W(),await J(),console.log(" Teacher subjects initialization complete!")}catch(et){console.error(" Error initializing teacher subjects:",et),l("Failed to initialize teacher subjects")}finally{i(!1)}},[n,r,W,J]),Nt=C.useCallback(()=>{e?e():t("/teacher/cabinet")},[e,t]);return a?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Gr,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Subjects..."})]})}):o?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Subjects Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:o}),c.jsx(nt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Subject Management"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",B?B.toLocaleString():"Never"]})]}),c.jsxs("div",{className:"flex space-x-3",children:[Y&&c.jsx(nt,{variant:"primary",onClick:I,children:"Edit Subjects"}),c.jsx(nt,{variant:"outline",onClick:Nt,children:"Back to Cabinet"})]})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"space-y-6",children:[!k&&c.jsxs("div",{className:`\r
              bg-white rounded-xl shadow-md border border-gray-200 p-6\r
              hover:shadow-lg hover:-translate-y-1 transition-all duration-200\r
            `,children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Assigned Subjects"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your teaching subjects and class assignments"})]}),c.jsx("div",{className:"flex space-x-3",children:c.jsxs(nt,{variant:"primary",onClick:I,className:"px-6 py-2",children:[c.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Subjects"]})})]}),f.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map((et,Me)=>c.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6 hover:shadow-md transition-shadow duration-200",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:et.subject}),et.classes&&et.classes.length>0&&c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Assigned Classes:"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:et.classes.map((Fe,Ke)=>c.jsxs("span",{className:"px-3 py-1 bg-blue-500 text-white text-sm font-medium rounded-full",children:["Grade ",Fe.grade," - Class ",Fe.class]},Ke))})]})]}),c.jsx("div",{className:"ml-4",children:c.jsx(nt,{variant:"outline",size:"sm",onClick:()=>Ne(et.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-300",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})},Me))}):c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:c.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No subjects assigned yet"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Get started by adding your teaching subjects and class assignments"}),c.jsxs(nt,{variant:"primary",onClick:I,className:"px-6 py-3",children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Your First Subject"]})]})]}),k&&c.jsxs("div",{className:`\r
              bg-white rounded-xl shadow-md border border-gray-200 p-6\r
              hover:shadow-lg hover:-translate-y-1 transition-all duration-200\r
            `,children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Select Subjects and Classes"}),c.jsx("p",{className:"text-gray-600",children:"Choose the subjects you want to teach and assign them to specific classes"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:c.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:"1"})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-lg font-semibold text-gray-900",children:"Select Subject"}),c.jsx("p",{className:"text-gray-600",children:"Choose the subject you want to teach"})]})]}),c.jsxs("div",{className:"relative",children:[c.jsxs(nt,{variant:"outline",onClick:H,className:"w-full justify-between p-4 h-auto text-left border-2 border-gray-200 hover:border-blue-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white rounded-xl shadow-sm",children:[c.jsx("span",{className:"text-gray-900 font-medium",children:T?T.subject:"Select a subject"}),c.jsx("svg",{className:"w-5 h-5 ml-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),P&&c.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border-2 border-gray-200 rounded-xl shadow-xl max-h-60 overflow-y-auto",children:p.map(et=>c.jsx("button",{onClick:()=>Q(et.subject_id),className:"w-full px-4 py-4 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 border-b border-gray-100 last:border-b-0",children:c.jsx("span",{className:"text-gray-900 font-medium",children:et.subject})},et.subject_id))})]})]}),O&&T&&c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3",children:c.jsx("span",{className:"text-green-600 font-semibold text-sm",children:"2"})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Select Classes for ",T.subject]}),c.jsx("p",{className:"text-gray-600",children:"Choose which classes you want to teach this subject to"})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(et=>c.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-6 hover:shadow-md transition-shadow duration-200",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-2",children:c.jsx("span",{className:"text-white font-bold text-xs",children:et})}),c.jsxs("h4",{className:"font-semibold text-gray-900",children:["Grade ",et]})]}),c.jsx("div",{className:"space-y-3",children:Oe(et).map(Me=>c.jsx(nt,{variant:"outline",size:"sm",onClick:()=>Z(T,Me),className:"w-full text-sm py-2 px-4 border-green-300 hover:border-green-400 hover:bg-green-100 focus:ring-2 focus:ring-green-500 rounded-lg font-medium",children:Me.displayText},Me.id))})]},et))})]}),y.length>0&&c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3",children:c.jsx("span",{className:"text-purple-600 font-semibold text-sm",children:"3"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Selected Subjects"}),c.jsx("p",{className:"text-gray-600",children:"Review your subject and class selections"})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map(et=>c.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4 hover:shadow-md transition-shadow duration-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex-1",children:c.jsx("span",{className:"text-sm font-semibold text-purple-900",children:et.displayText})}),c.jsx(nt,{variant:"outline",size:"sm",onClick:()=>Ne(et.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-300 focus:ring-2 focus:ring-red-500 rounded-lg",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},et.id))})]}),c.jsxs("div",{className:"flex justify-between items-center pt-6 border-t-2 border-gray-100",children:[c.jsx("div",{className:"text-sm text-gray-500",children:y.length>0?`${y.length} subject${y.length>1?"s":""} selected`:"No subjects selected"}),c.jsxs("div",{className:"flex space-x-4",children:[c.jsxs(nt,{variant:"outline",onClick:()=>{A(!1),ee(!0),se()},className:"px-6 py-3 text-sm font-medium text-gray-700 bg-white border-2 border-gray-300 hover:bg-gray-50 focus:ring-2 focus:ring-gray-500 rounded-xl",children:[c.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]}),c.jsxs(nt,{variant:"primary",onClick:()=>he({type:"save",data:y}),disabled:y.length===0,className:"px-8 py-3 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-indigo-600 border border-transparent rounded-xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[c.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),O?"Next: Select Classes":"Save Subjects"]})]})]})]})]})]})}),M&&c.jsx(Vl,{isOpen:M,onClose:Ee,title:"Confirm Save",variant:"confirmation",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to save ",K?.data?.length||0," subject assignments?"]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx(nt,{variant:"outline",onClick:me,children:"Cancel"}),c.jsx(nt,{variant:"primary",onClick:ie,children:"Save"})]})]})}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:u.map(et=>c.jsx(tc,{type:et.type,message:et.message,onClose:()=>d(Me=>Me.filter(Fe=>Fe.id!==et.id))},et.id))})]})},J8e=()=>{const{user:e,role:t,isAuthenticated:r,isLoading:n}=ls(),[s,a]=C.useState("cabinet");return!r||t!=="teacher"?c.jsx(pp,{to:"/login",replace:!0}):n?c.jsxs("div",{className:"teacher-app-loading",children:[c.jsx(Gr,{}),c.jsx("p",{children:"Loading teacher interface..."})]}):c.jsx("div",{className:"teacher-app",children:c.jsxs(bj,{children:[c.jsx(As,{path:"/",element:c.jsx(hW,{})}),c.jsx(As,{path:"/cabinet",element:c.jsx(hW,{})}),c.jsx(As,{path:"/tests",element:c.jsx(gW,{})}),c.jsx(As,{path:"/tests/create",element:c.jsx(gW,{})}),c.jsx(As,{path:"/data",element:c.jsx(X8e,{})}),c.jsx(As,{path:"/subjects",element:c.jsx(Y8e,{})}),c.jsx(As,{path:"/results",element:c.jsx(ZK,{})}),c.jsx(As,{path:"*",element:c.jsx(pp,{to:"/teacher",replace:!0})})]})})},De={container:"min-h-screen bg-gradient-to-br from-purple-50 to-indigo-100",mainContainer:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",header:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg",headerContent:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",headerFlex:"flex justify-between items-center",adminInfo:"flex items-center space-x-4",adminAvatar:"h-12 w-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",adminText:"text-lg sm:text-xl md:text-2xl font-bold text-white",adminSubtext:"text-purple-100 text-sm sm:text-base md:text-lg",menuContainer:"relative admin-menu",menuButton:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border-white/20 text-white hover:bg-white/20 font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm border-2",menuDropdown:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg z-50 overflow-hidden",menuItem:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-purple-50 transition-colors",menuItemLogout:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-red-50 transition-colors",cardContainer:"bg-white rounded-xl shadow-lg border border-gray-200 hover:shadow-xl transition-shadow duration-300",cardHeader:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-indigo-50",cardTitle:"text-xl font-bold text-gray-800",cardBody:"p-6",buttonGroup:"flex flex-wrap gap-3 mb-6",buttonPrimary:"bg-purple-600 hover:bg-purple-700 text-white font-medium px-4 py-2 rounded-lg transition-colors duration-200",buttonSecondary:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium px-4 py-2 rounded-lg transition-colors duration-200",formContainer:"bg-gray-50 rounded-lg p-6 border border-gray-200",formGrid:"grid grid-cols-1 md:grid-cols-2 gap-4",formGroup:"space-y-2",formLabel:"block text-sm font-medium text-gray-700",formInput:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors duration-200",formCheckbox:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded",formActions:"flex space-x-3 pt-4",table:"min-w-full divide-y divide-gray-200",tableHeader:"bg-gray-50",tableHeaderCell:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",tableBody:"bg-white divide-y divide-gray-200",tableRow:"hover:bg-gray-50 transition-colors duration-150",tableCell:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",statusActive:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",statusInactive:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",modalOverlay:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",modalContent:"bg-white rounded-lg p-6 w-full max-w-md mx-4 shadow-xl",modalTitle:"text-xl font-semibold text-gray-900 mb-4",modalActions:"flex space-x-3 pt-4"},Q8e=()=>{const{user:e,isAdmin:t,logout:r}=ls(),{get:n,post:s,delete:a}=Bo(),i=C.useCallback(async()=>{try{p({type:"info",message:"Refreshing class summary view..."});const xe=await s("/.netlify/functions/refresh-class-summary-semester",{});xe&&(xe.success||xe.message)?p({type:"success",message:"Class summary view refreshed."}):p({type:"error",message:xe?.error||"Failed to refresh view"})}catch(xe){p({type:"error",message:"Failed to refresh view"}),console.error("Refresh class summary error:",xe)}},[s]),o=C.useCallback(async()=>{try{p({type:"info",message:"Checking for overdue assignments..."});const xe=await s("/.netlify/functions/check-overdue-assignments",{});if(xe&&xe.success){const ht=xe.overdue_count||0;ht>0?p({type:"success",message:`Found and marked ${ht} overdue assignments as inactive.`}):p({type:"info",message:"No overdue assignments found."})}else p({type:"error",message:xe?.error||"Failed to check assignments"})}catch(xe){p({type:"error",message:"Failed to check assignments"}),console.error("Check overdue assignments error:",xe)}},[s]),[l,u]=C.useState(!1),[d,f]=C.useState(null),[g,p]=C.useState(null),[x,y]=C.useState(!1),[v,T]=C.useState(!1),[_,b]=C.useState(!1),[E,k]=C.useState(!1),[A,P]=C.useState(""),[j,O]=C.useState(null),[R,M]=C.useState({}),[G,K]=C.useState(null),[re,Y]=C.useState({}),[ee,B]=C.useState(null),[z,I]=C.useState({}),[W,V]=C.useState([]),[L,H]=C.useState(""),[J,Q]=C.useState(""),[ne,Z]=C.useState(""),[se,ce]=C.useState(!0),[he,Ee]=C.useState(!1),[ie,me]=C.useState([]),[Ne,Oe]=C.useState(""),[Re,ze]=C.useState(""),[Nt,et]=C.useState(""),[Me,Fe]=C.useState(!1),[Ke,xt]=C.useState(!1),[ut,At]=C.useState([]),[Dt,Qe]=C.useState([]),[tt,vt]=C.useState([]),[gt,_t]=C.useState([]),[Wt,Zt]=C.useState(!1),[pr,Ir]=C.useState(!1),[br,xr]=C.useState(!1),[er,_r]=C.useState(!1),[ge,ue]=C.useState({grade:"",class:"",number:"",student_id:"",name:"",surname:"",nickname:"",password:"",is_active:!0}),[we,Te]=C.useState({teacher_id:"",username:"",password:"",first_name:"",last_name:"",is_active:!0}),[Xe,Ct]=C.useState({subject_id:"",subject:"",description:"",is_active:!0}),[Pt,Ue]=C.useState({startDate:"",endDate:"",teacherId:"",grades:[],classes:[],subjectId:""});C.useEffect(()=>{console.log(" AdminCabinet component mounted - initializing..."),ft()},[]),C.useEffect(()=>{const xe=ht=>{Me&&!ht.target.closest(".admin-menu")&&Fe(!1)};return document.addEventListener("mousedown",xe),()=>{document.removeEventListener("mousedown",xe)}},[Me]);const ft=C.useCallback(async()=>{try{u(!0),await mr(),console.log("Admin app initialized")}catch(xe){f("Failed to initialize admin app"),console.error("Admin app initialization error:",xe)}finally{u(!1)}},[]),ot=C.useCallback(()=>{Fe(xe=>!xe)},[]),Ht=C.useCallback(()=>{xt(!0),Fe(!1)},[]),Gt=C.useCallback(()=>{xt(!1)},[]),mr=C.useCallback(async()=>{try{await Promise.all([Vr(),vr(),hr(),le()])}catch(xe){console.error("Error loading admin data:",xe),f("Failed to load admin data")}},[]),Vr=C.useCallback(async()=>{try{const xe="admin_users_",ht=ms(xe);if(ht){console.log(" Using cached users data"),At(ht);return}const Er=await n("/.netlify/functions/get-all-users");console.log(" Users response:",Er);const Sr=Er.users||[];At(Sr),ys(xe,Sr,Os.admin_users),console.log(" Users set to state:",Sr)}catch(xe){console.error("Error loading users:",xe)}},[n]),vr=C.useCallback(async()=>{try{const xe="admin_teachers_",ht=ms(xe);if(ht){console.log(" Using cached teachers data"),Qe(ht);return}const Er=await n("/.netlify/functions/get-all-teachers");console.log(" Teachers response:",Er);const Sr=Er.teachers||[];Qe(Sr),ys(xe,Sr,Os.admin_teachers),console.log(" Teachers set to state:",Sr)}catch(xe){console.error("Error loading teachers:",xe)}},[n]),hr=C.useCallback(async()=>{try{const xe="admin_subjects_",ht=ms(xe);if(ht){console.log(" Using cached subjects data"),vt(ht);return}const Er=await n("/.netlify/functions/get-all-subjects");console.log(" Subjects response:",Er);const Sr=Er.subjects||[];vt(Sr),ys(xe,Sr,Os.admin_subjects),console.log(" Subjects set to state:",Sr)}catch(xe){console.error("Error loading subjects:",xe)}},[n]),le=C.useCallback(async()=>{try{const xe="admin_academic_years_",ht=ms(xe);if(ht){console.log(" Using cached academic years data"),_t(ht);return}const Sr=(await n("/.netlify/functions/get-academic-year")).academic_years||[];_t(Sr),ys(xe,Sr,Os.admin_academic_years)}catch(xe){console.error("Error loading academic year:",xe)}},[n]),_e=C.useCallback(async()=>{try{if(k(!E),!E){const[xe,ht]=await Promise.all([n("/.netlify/functions/get-all-tests"),n("/.netlify/functions/get-test-assignments")]);console.log(" Active tests response:",xe),console.log(" Assignments response:",ht);const Er=xe.tests||[],Qn=(ht.assignments||[]).reduce((ye,$e)=>{const Pe=`${$e.test_type}-${$e.test_id}`;return ye[Pe]||(ye[Pe]=[]),ye[Pe].push($e),ye},{}),Ye=Er.map(ye=>{const $e=`${ye.test_type}-${ye.test_id}`,Pe=Qn[$e]||[],Tt=Pe.some(kt=>kt.is_active);return{...ye,is_active:Tt,assignments:Pe}});V(Ye),console.log(" All tests with status set to state:",Ye)}}catch(xe){console.error("Error loading tests:",xe),p({type:"error",message:"Failed to load tests"})}},[n,E]),pe=C.useCallback((xe,ht)=>{ue(Er=>({...Er,[xe]:ht}))},[]),ve=C.useCallback((xe,ht)=>{Te(Er=>({...Er,[xe]:ht}))},[]),Se=C.useCallback((xe,ht)=>{Ct(Er=>({...Er,[xe]:ht}))},[]);C.useCallback(()=>{console.log(" Testing local storage...");try{const xe={test:"data",timestamp:Date.now()};localStorage.setItem("test",JSON.stringify(xe));const ht=JSON.parse(localStorage.getItem("test"));console.log(" Local storage test successful:",ht),p({type:"success",message:"Local storage test successful"})}catch(xe){console.error(" Local storage test failed:",xe),p({type:"error",message:"Local storage test failed"})}},[]),C.useCallback(()=>{console.log(" Clearing local storage...");try{localStorage.clear(),console.log(" Local storage cleared"),p({type:"success",message:"Local storage cleared"})}catch(xe){console.error(" Error clearing local storage:",xe),p({type:"error",message:"Error clearing local storage"})}},[]),C.useCallback(async()=>{console.log(" Checking teacher subjects...");try{const ht=(await n("/.netlify/functions/get-all-teachers")).data||[];console.log(" Teachers data:",ht),p({type:"success",message:`Found ${ht.length} teachers`})}catch(xe){console.error(" Error checking teacher subjects:",xe),p({type:"error",message:"Error checking teacher subjects"})}},[n]);const ke=C.useCallback(async xe=>{xe.preventDefault();try{console.log(" Submitting user:",ge);const ht=await s("/.netlify/functions/add-user",ge);ht.success?(p({type:"success",message:"User added successfully"}),Zt(!1),ue({grade:"",class:"",number:"",student_id:"",name:"",surname:"",nickname:"",password:"",is_active:!0}),Vr()):p({type:"error",message:ht.message||"Failed to add user"})}catch(ht){console.error(" Error adding user:",ht),p({type:"error",message:"Error adding user"})}},[ge,s,Vr]),Ge=C.useCallback(async xe=>{xe.preventDefault();try{console.log(" Submitting teacher:",we);const ht=await s("/.netlify/functions/add-teacher",we);ht.success?(p({type:"success",message:"Teacher added successfully"}),Ir(!1),Te({teacher_id:"",username:"",password:"",first_name:"",last_name:"",is_active:!0}),vr()):p({type:"error",message:ht.message||"Failed to add teacher"})}catch(ht){console.error(" Error adding teacher:",ht),p({type:"error",message:"Error adding teacher"})}},[we,s,vr]),dt=C.useCallback(async xe=>{xe.preventDefault();try{console.log(" Submitting subject:",Xe);const ht=await s("/.netlify/functions/add-subject",Xe);ht.success?(p({type:"success",message:"Subject added successfully"}),xr(!1),Ct({subject_id:"",subject:"",description:"",is_active:!0}),hr()):p({type:"error",message:ht.message||"Failed to add subject"})}catch(ht){console.error(" Error adding subject:",ht),p({type:"error",message:"Error adding subject"})}},[Xe,s,hr]),Ie=C.useCallback(xe=>{O(xe),M({name:xe.name||"",surname:xe.surname||"",grade:xe.grade||"",class:xe.class||"",student_id:xe.student_id||"",nickname:xe.nickname||"",password:xe.password||"",is_active:xe.is_active!==void 0?xe.is_active:!0})},[]),oe=C.useCallback(async()=>{try{const xe=[];Object.keys(R).forEach(ht=>{ht!=="student_id"&&R[ht]!==j[ht]&&xe.push({fieldName:ht,newValue:R[ht]})});for(const ht of xe)await s("/.netlify/functions/update-user",{userId:j.student_id,fieldName:ht.fieldName,newValue:ht.newValue});p({type:"success",message:"User updated successfully!"}),O(null),M({}),Vr()}catch{p({type:"error",message:"Failed to update user"})}},[R,j,s,Vr]),fe=C.useCallback(async xe=>{if(window.confirm("Are you sure you want to delete this user?"))try{(await s("/.netlify/functions/delete-user",{userId:xe})).success&&(p({type:"success",message:"User deleted successfully!"}),Vr())}catch{p({type:"error",message:"Failed to delete user"})}},[s,Vr]),Ce=C.useCallback(xe=>{K(xe),Y({teacher_id:xe.teacher_id||"",username:xe.username||"",password:xe.password||"",first_name:xe.first_name||"",last_name:xe.last_name||"",is_active:xe.is_active!==void 0?xe.is_active:!0})},[]),je=C.useCallback(async()=>{try{const xe=[];Object.keys(re).forEach(ht=>{ht!=="teacher_id"&&re[ht]!==G[ht]&&xe.push({fieldName:ht,newValue:re[ht]})});for(const ht of xe)await s("/.netlify/functions/update-teacher",{teacherId:G.teacher_id,fieldName:ht.fieldName,newValue:ht.newValue});p({type:"success",message:"Teacher updated successfully!"}),K(null),Y({}),vr()}catch{p({type:"error",message:"Failed to update teacher"})}},[re,G,s,vr]),qe=C.useCallback(async xe=>{if(window.confirm("Are you sure you want to delete this teacher?"))try{(await s("/.netlify/functions/delete-teacher",{teacherId:xe})).success&&(p({type:"success",message:"Teacher deleted successfully!"}),vr())}catch{p({type:"error",message:"Failed to delete teacher"})}},[s,vr]),Ze=C.useCallback(xe=>{B(xe),I({subject_id:xe.subject_id||"",subject:xe.subject||""})},[]),mt=C.useCallback(async()=>{try{const xe=[];Object.keys(z).forEach(ht=>{ht!=="subject_id"&&z[ht]!==ee[ht]&&xe.push({fieldName:ht,newValue:z[ht]})});for(const ht of xe)await s("/.netlify/functions/update-subject",{subjectId:ee.subject_id,fieldName:ht.fieldName,newValue:ht.newValue});p({type:"success",message:"Subject updated successfully!"}),B(null),I({}),hr()}catch{p({type:"error",message:"Failed to update subject"})}},[z,ee,s,hr]),qt=C.useCallback(async xe=>{if(window.confirm("Are you sure you want to delete this subject?"))try{const ht=await s("/.netlify/functions/delete-subject",{subjectId:xe});ht.success?(p({type:"success",message:"Subject deleted successfully!"}),hr()):p({type:"error",message:ht.message||"Failed to delete subject"})}catch{p({type:"error",message:"Failed to delete subject"})}},[s,hr]),pt=C.useCallback((xe,ht)=>{Ue(Er=>({...Er,[xe]:ht}))},[]),Bt=C.useCallback(async xe=>{if(xe.preventDefault(),!Pt.startDate||!Pt.endDate||!Pt.teacherId){p({type:"error",message:"Please fill in all required fields (Start Date, End Date, Teacher ID)"});return}if(window.confirm("Are you sure you want to delete all test data for the selected criteria? This action cannot be undone."))try{const ht=await s("/.netlify/functions/delete-test-data",Pt);ht.success?(p({type:"success",message:`Successfully deleted ${ht.deletedCount} test records!`}),_r(!1),Ue({startDate:"",endDate:"",teacherId:"",grades:[],classes:[],subjectId:""})):p({type:"error",message:ht.message||"Failed to delete test data"})}catch{p({type:"error",message:"Failed to delete test data"})}},[Pt,s]),Cr=C.useCallback(async(xe,ht,Er)=>{try{const Sr=await n("/.netlify/functions/get-test-assignments");if(Sr.success&&Sr.assignments){const Qn=Sr.assignments.filter(Ye=>Ye.test_id===parseInt(xe)&&Ye.test_type===ht);if(Qn.length===0){p({type:"error",message:"No assignments found for this test"});return}for(const Ye of Qn){const ye=await s("/.netlify/functions/remove-assignment",{teacher_id:Er,assignment_id:Ye.assignment_id,test_type:ht,test_id:xe});if(!ye.success){p({type:"error",message:`Failed to complete test: ${ye.message}`});return}}p({type:"success",message:"Test marked as complete successfully!"}),await _e()}else p({type:"error",message:"Failed to get test assignments"})}catch(Sr){console.error("Error completing test:",Sr),p({type:"error",message:"Failed to complete test"})}},[s,n,_e]),$r=C.useCallback(async(xe,ht,Er)=>{try{const Sr=await n("/.netlify/functions/get-test-assignments");if(Sr.success&&Sr.assignments){const Qn=Sr.assignments.filter(Ye=>Ye.test_id===parseInt(xe)&&Ye.test_type===ht);if(Qn.length===0){p({type:"error",message:"No assignments found for this test"});return}for(const Ye of Qn){const ye=await s("/.netlify/functions/remove-assignment",{teacher_id:Er,assignment_id:Ye.assignment_id,test_type:ht,test_id:xe,mark_active:!0});if(!ye.success){p({type:"error",message:`Failed to reactivate test: ${ye.message}`});return}}p({type:"success",message:"Test marked as active successfully!"}),await _e()}else p({type:"error",message:"Failed to get test assignments"})}catch(Sr){console.error("Error reactivating test:",Sr),p({type:"error",message:"Failed to reactivate test"})}},[s,n,_e]),Ur=C.useCallback(async()=>{try{if(Ee(!he),!he){const xe=await n("/.netlify/functions/get-all-tests");console.log(" Actual tests response:",xe),me(xe.tests||[]),console.log(" Actual tests set to state:",xe.tests||[])}}catch(xe){console.error("Error loading actual tests:",xe),p({type:"error",message:"Failed to load tests"})}},[n,he]),wn=C.useCallback(async(xe,ht,Er)=>{try{const Sr=await s("/.netlify/functions/delete-test",{test_id:xe,test_type:ht,teacher_id:Er});Sr.success?(p({type:"success",message:"Test deleted successfully!"}),await Ur()):p({type:"error",message:`Failed to delete test: ${Sr.message}`})}catch(Sr){console.error("Error deleting test:",Sr),p({type:"error",message:"Failed to delete test"})}},[s,Ur]),Xr=A?ut.filter(xe=>xe.grade.toString()===A):ut,Wr=W.filter(xe=>{const ht=!L||xe.teacher_id===L,Er=!J||new Date(xe.created_at)>=new Date(J),Sr=!ne||new Date(xe.created_at)<=new Date(ne+"T23:59:59"),Qn=se?xe.is_active:!xe.is_active;return ht&&Er&&Sr&&Qn}),ar=ie.filter(xe=>{const ht=!Ne||xe.teacher_id===Ne,Er=!Re||new Date(xe.created_at)>=new Date(Re),Sr=!Nt||new Date(xe.created_at)<=new Date(Nt+"T23:59:59");return ht&&Er&&Sr});return c.jsxs(rt.div,{id:"admin-cabinet-main",className:De.container,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[c.jsx(rt.div,{className:De.header,initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:c.jsx("div",{className:De.headerContent,children:c.jsxs("div",{className:De.headerFlex,children:[c.jsxs(rt.div,{className:De.adminInfo,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(rt.div,{className:De.adminAvatar,initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.3,type:"spring"},whileHover:{scale:1.1},children:c.jsx("span",{className:"text-white font-semibold text-xl",children:e?.username?.charAt(0)||"A"})})}),c.jsxs("div",{children:[c.jsx("h1",{className:De.adminText,children:e?.username||"Administrator"}),c.jsx("p",{className:De.adminSubtext,children:"Administrator Dashboard"})]})]}),c.jsxs(rt.div,{className:De.menuContainer,initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[c.jsxs("button",{onClick:ot,className:De.menuButton,style:{zIndex:1e3},children:[c.jsx("span",{className:"hidden sm:inline",children:"Menu"}),c.jsx(rt.svg,{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:Me?180:0},transition:{duration:.2},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),c.jsx(co,{children:Me&&c.jsx(rt.div,{className:De.menuDropdown,initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:c.jsxs("div",{className:"py-2",children:[c.jsx(rt.button,{onClick:Ht,className:De.menuItem,whileHover:{x:4},transition:{duration:.2},children:"Change Password"}),c.jsx(rt.button,{onClick:()=>{ot(),r()},className:De.menuItemLogout,whileHover:{x:4},transition:{duration:.2},children:"Logout"})]})})})]})]})})}),l&&c.jsx(Gr,{text:"Loading..."}),d&&c.jsx(tc,{type:"error",message:d,onClose:()=>f(null)}),g&&c.jsx(tc,{type:g.type,message:g.message,onClose:()=>p(null)}),Ke&&c.jsx("div",{className:De.modalOverlay,children:c.jsxs("div",{className:De.modalContent,children:[c.jsx("h2",{className:De.modalTitle,children:"Change Password"}),c.jsxs("form",{className:"space-y-4",children:[c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{htmlFor:"currentPassword",className:De.formLabel,children:"Current Password"}),c.jsx("input",{type:"password",id:"currentPassword",className:De.formInput})]}),c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{htmlFor:"newPassword",className:De.formLabel,children:"New Password"}),c.jsx("input",{type:"password",id:"newPassword",className:De.formInput})]}),c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{htmlFor:"confirmPassword",className:De.formLabel,children:"Confirm New Password"}),c.jsx("input",{type:"password",id:"confirmPassword",className:De.formInput})]}),c.jsxs("div",{className:De.modalActions,children:[c.jsx(nt,{type:"button",variant:"secondary",onClick:Gt,className:"flex-1",children:"Cancel"}),c.jsx(nt,{type:"submit",variant:"primary",className:"flex-1 bg-purple-600 hover:bg-purple-700",children:"Change Password"})]})]})]})}),c.jsx(rt.div,{className:De.mainContainer,initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:c.jsxs("div",{className:"space-y-6",children:[c.jsx(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},children:c.jsxs(Et,{className:De.cardContainer,children:[c.jsx(Et.Header,{className:De.cardHeader,children:c.jsx(Et.Title,{className:De.cardTitle,children:"User Management"})}),c.jsxs(Et.Body,{className:De.cardBody,children:[c.jsxs("div",{className:De.buttonGroup,children:[c.jsx(nt,{variant:"primary",onClick:()=>Zt(!0),className:De.buttonPrimary,children:"Add User"}),c.jsx(nt,{variant:"secondary",onClick:()=>{Vr(),y(!x)},className:De.buttonSecondary,children:x?"Hide Users Table":"Get All Users "})]}),c.jsx(co,{children:Wt&&c.jsxs(rt.div,{className:De.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New User"}),c.jsxs("form",{onSubmit:ke,className:"space-y-4",children:[c.jsxs("div",{className:De.formGrid,children:[c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{className:De.formLabel,children:"Grade"}),c.jsx("input",{type:"text",value:ge.grade,onChange:xe=>pe("grade",xe.target.value),className:De.formInput,placeholder:"Enter grade"})]}),c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{className:De.formLabel,children:"Class"}),c.jsx("input",{type:"text",value:ge.class,onChange:xe=>pe("class",xe.target.value),className:De.formInput,placeholder:"Enter class"})]}),c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{className:De.formLabel,children:"Number"}),c.jsx("input",{type:"text",value:ge.number,onChange:xe=>pe("number",xe.target.value),className:De.formInput,placeholder:"Enter number"})]}),c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{className:De.formLabel,children:"Student ID"}),c.jsx("input",{type:"text",value:ge.student_id,onChange:xe=>pe("student_id",xe.target.value),className:De.formInput,placeholder:"Enter student ID"})]}),c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{className:De.formLabel,children:"Name"}),c.jsx("input",{type:"text",value:ge.name,onChange:xe=>pe("name",xe.target.value),className:De.formInput,placeholder:"Enter name"})]}),c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{className:De.formLabel,children:"Surname"}),c.jsx("input",{type:"text",value:ge.surname,onChange:xe=>pe("surname",xe.target.value),className:De.formInput,placeholder:"Enter surname"})]}),c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{className:De.formLabel,children:"Nickname"}),c.jsx("input",{type:"text",value:ge.nickname,onChange:xe=>pe("nickname",xe.target.value),className:De.formInput,placeholder:"Enter nickname"})]}),c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{className:De.formLabel,children:"Password"}),c.jsx("input",{type:"password",value:ge.password,onChange:xe=>pe("password",xe.target.value),className:De.formInput,placeholder:"Enter password"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"userActive",checked:ge.is_active,onChange:xe=>pe("is_active",xe.target.checked),className:De.formCheckbox}),c.jsx("label",{htmlFor:"userActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),c.jsxs("div",{className:De.formActions,children:[c.jsx(nt,{type:"button",variant:"secondary",onClick:()=>Zt(!1),className:De.buttonSecondary,children:"Cancel"}),c.jsx(nt,{type:"submit",variant:"primary",className:De.buttonPrimary,children:"Add User"})]})]})]})}),x&&c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Users (",Xr.length," of ",ut.length,")"]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Filter by Grade:"}),c.jsxs("select",{value:A,onChange:xe=>P(xe.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"All Grades"}),[...new Set(ut.map(xe=>xe.grade))].sort().map(xe=>c.jsxs("option",{value:xe,children:["Grade ",xe]},xe))]})]})]}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto max-h-[600px]",children:c.jsxs("table",{className:De.table,children:[c.jsx("thead",{className:De.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:De.tableHeaderCell,children:"Name"}),c.jsx("th",{className:De.tableHeaderCell,children:"Grade"}),c.jsx("th",{className:De.tableHeaderCell,children:"Class"}),c.jsx("th",{className:De.tableHeaderCell,children:"Student ID"}),c.jsx("th",{className:De.tableHeaderCell,children:"Number"}),c.jsx("th",{className:De.tableHeaderCell,children:"Nickname"}),c.jsx("th",{className:De.tableHeaderCell,children:"Actions"})]})}),c.jsx("tbody",{className:De.tableBody,children:Xr.map((xe,ht)=>c.jsxs("tr",{className:De.tableRow,children:[c.jsxs("td",{className:De.tableCell,children:[xe.name," ",xe.surname]}),c.jsx("td",{className:De.tableCell,children:xe.grade}),c.jsx("td",{className:De.tableCell,children:xe.class}),c.jsx("td",{className:De.tableCell,children:xe.student_id}),c.jsx("td",{className:De.tableCell,children:xe.number}),c.jsx("td",{className:De.tableCell,children:xe.nickname}),c.jsx("td",{className:De.tableCell,children:c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>Ie(xe),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),c.jsx("button",{onClick:()=>fe(xe.student_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},xe.id||ht))})]})})})]})]})]})}),c.jsx(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:c.jsxs(Et,{className:De.cardContainer,children:[c.jsxs(Et.Header,{className:De.cardHeader,children:[c.jsx(Et.Title,{className:De.cardTitle,children:"Teacher Management"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:i,className:"px-3 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-xs whitespace-nowrap",title:"Refresh materialized class summary view",children:"Refresh Class Summary View"}),c.jsx("button",{onClick:o,className:"px-3 py-1.5 bg-orange-600 text-white rounded hover:bg-orange-700 transition-colors text-xs whitespace-nowrap",title:"Check and mark overdue assignments (7+ days old) as inactive",children:"Check Overdue Assignments"}),c.jsx(nt,{variant:"primary",onClick:()=>Ir(!0),className:"text-xs whitespace-nowrap",children:"Add Teacher"}),c.jsx(nt,{variant:"secondary",onClick:()=>{vr(),T(!v)},className:"text-xs whitespace-nowrap",children:v?"Hide Teachers Table":"Get All Teachers "})]})]}),c.jsxs(Et.Body,{className:De.cardBody,children:[c.jsx(co,{children:pr&&c.jsxs(rt.div,{className:De.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New Teacher"}),c.jsxs("form",{onSubmit:Ge,className:"space-y-4",children:[c.jsxs("div",{className:De.formGrid,children:[c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{className:De.formLabel,children:"Teacher ID"}),c.jsx("input",{type:"text",value:we.teacher_id,onChange:xe=>ve("teacher_id",xe.target.value),className:De.formInput,placeholder:"Enter teacher ID"})]}),c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{className:De.formLabel,children:"Username"}),c.jsx("input",{type:"text",value:we.username,onChange:xe=>ve("username",xe.target.value),className:De.formInput,placeholder:"Enter username"})]}),c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{className:De.formLabel,children:"Password"}),c.jsx("input",{type:"password",value:we.password,onChange:xe=>ve("password",xe.target.value),className:De.formInput,placeholder:"Enter password"})]}),c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{className:De.formLabel,children:"First Name"}),c.jsx("input",{type:"text",value:we.first_name,onChange:xe=>ve("first_name",xe.target.value),className:De.formInput,placeholder:"Enter first name"})]}),c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{className:De.formLabel,children:"Last Name"}),c.jsx("input",{type:"text",value:we.last_name,onChange:xe=>ve("last_name",xe.target.value),className:De.formInput,placeholder:"Enter last name"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"teacherActive",checked:we.is_active,onChange:xe=>ve("is_active",xe.target.checked),className:De.formCheckbox}),c.jsx("label",{htmlFor:"teacherActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),c.jsxs("div",{className:De.formActions,children:[c.jsx(nt,{type:"button",variant:"secondary",onClick:()=>Ir(!1),className:De.buttonSecondary,children:"Cancel"}),c.jsx(nt,{type:"submit",variant:"primary",className:De.buttonPrimary,children:"Add Teacher"})]})]})]})}),j&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit User"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),c.jsx("input",{type:"text",value:R.name,onChange:xe=>M({...R,name:xe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Surname"}),c.jsx("input",{type:"text",value:R.surname,onChange:xe=>M({...R,surname:xe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade"}),c.jsx("input",{type:"number",value:R.grade,onChange:xe=>M({...R,grade:xe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),c.jsx("input",{type:"number",value:R.class,onChange:xe=>M({...R,class:xe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student ID"}),c.jsx("input",{type:"text",value:R.student_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Student ID cannot be changed"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nickname"}),c.jsx("input",{type:"text",value:R.nickname,onChange:xe=>M({...R,nickname:xe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),c.jsx("input",{type:"text",value:R.password,onChange:xe=>M({...R,password:xe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"is_active",checked:R.is_active,onChange:xe=>M({...R,is_active:xe.target.checked}),className:"h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),c.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Active"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[c.jsx("button",{onClick:()=>{O(null),M({})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),c.jsx("button",{onClick:oe,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700",children:"Update User"})]})]})}),v&&c.jsxs("div",{className:"mt-6",children:[c.jsx("div",{className:"mb-4",children:c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Teachers (",Dt.length,")"]})}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:De.table,children:[c.jsx("thead",{className:De.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:De.tableHeaderCell,children:"Teacher ID"}),c.jsx("th",{className:De.tableHeaderCell,children:"Name"}),c.jsx("th",{className:De.tableHeaderCell,children:"Username"}),c.jsx("th",{className:De.tableHeaderCell,children:"Password"}),c.jsx("th",{className:De.tableHeaderCell,children:"Status"}),c.jsx("th",{className:De.tableHeaderCell,children:"Created"}),c.jsx("th",{className:De.tableHeaderCell,children:"Actions"})]})}),c.jsx("tbody",{className:De.tableBody,children:Dt.map((xe,ht)=>c.jsxs("tr",{className:De.tableRow,children:[c.jsx("td",{className:De.tableCell,children:xe.teacher_id}),c.jsxs("td",{className:De.tableCell,children:[xe.first_name," ",xe.last_name]}),c.jsx("td",{className:De.tableCell,children:xe.username}),c.jsx("td",{className:De.tableCell,children:xe.password}),c.jsx("td",{className:De.tableCell,children:c.jsx("span",{className:xe.is_active?De.statusActive:De.statusInactive,children:xe.is_active?"Active":"Inactive"})}),c.jsx("td",{className:De.tableCell,children:new Date(xe.created_at).toLocaleDateString()}),c.jsx("td",{className:De.tableCell,children:c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>Ce(xe),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),c.jsx("button",{onClick:()=>qe(xe.teacher_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},xe.teacher_id||ht))})]})})})]})]})]})}),c.jsx(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,duration:.5},children:c.jsxs(Et,{className:De.cardContainer,children:[c.jsx(Et.Header,{className:De.cardHeader,children:c.jsx(Et.Title,{className:De.cardTitle,children:"Subject Management"})}),c.jsxs(Et.Body,{className:De.cardBody,children:[c.jsxs("div",{className:De.buttonGroup,children:[c.jsx(nt,{variant:"primary",onClick:()=>xr(!0),className:De.buttonPrimary,children:"Add Subject"}),c.jsx(nt,{variant:"secondary",onClick:()=>{hr(),b(!_)},className:De.buttonSecondary,children:_?"Hide Subjects Table":"Get All Subjects "})]}),c.jsx(co,{children:br&&c.jsxs(rt.div,{className:De.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New Subject"}),c.jsxs("form",{onSubmit:dt,className:"space-y-4",children:[c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{className:De.formLabel,children:"Subject Name"}),c.jsx("input",{type:"text",value:Xe.subject,onChange:xe=>Se("subject",xe.target.value),className:De.formInput,placeholder:"Enter subject name",required:!0}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Subject ID will be automatically generated"})]}),c.jsxs("div",{className:De.formActions,children:[c.jsx(nt,{type:"button",variant:"secondary",onClick:()=>xr(!1),className:De.buttonSecondary,children:"Cancel"}),c.jsx(nt,{type:"submit",variant:"primary",className:De.buttonPrimary,children:"Add Subject"})]})]})]})}),G&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Teacher"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher ID"}),c.jsx("input",{type:"text",value:re.teacher_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Teacher ID cannot be changed"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),c.jsx("input",{type:"text",value:re.username,onChange:xe=>Y({...re,username:xe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),c.jsx("input",{type:"text",value:re.password,onChange:xe=>Y({...re,password:xe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),c.jsx("input",{type:"text",value:re.first_name,onChange:xe=>Y({...re,first_name:xe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),c.jsx("input",{type:"text",value:re.last_name,onChange:xe=>Y({...re,last_name:xe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"teacher_is_active",checked:re.is_active,onChange:xe=>Y({...re,is_active:xe.target.checked}),className:"h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),c.jsx("label",{htmlFor:"teacher_is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Active"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[c.jsx("button",{onClick:()=>{K(null),Y({})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),c.jsx("button",{onClick:je,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700",children:"Update Teacher"})]})]})}),ee&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Subject"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject ID"}),c.jsx("input",{type:"text",value:z.subject_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Subject ID cannot be changed"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject Name"}),c.jsx("input",{type:"text",value:z.subject,onChange:xe=>I({...z,subject:xe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[c.jsx("button",{onClick:()=>B(null),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),c.jsx("button",{onClick:mt,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Update Subject"})]})]})}),_&&c.jsxs("div",{className:"mt-6",children:[c.jsx("div",{className:"mb-4",children:c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Subjects (",tt.length,")"]})}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:De.table,children:[c.jsx("thead",{className:De.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:De.tableHeaderCell,children:"Subject ID"}),c.jsx("th",{className:De.tableHeaderCell,children:"Subject Name"}),c.jsx("th",{className:De.tableHeaderCell,children:"Actions"})]})}),c.jsx("tbody",{className:De.tableBody,children:tt.map((xe,ht)=>c.jsxs("tr",{className:De.tableRow,children:[c.jsx("td",{className:De.tableCell,children:xe.subject_id}),c.jsx("td",{className:De.tableCell,children:xe.subject}),c.jsx("td",{className:De.tableCell,children:c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>Ze(xe),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),c.jsx("button",{onClick:()=>qt(xe.subject_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},xe.subject_id||ht))})]})})})]})]})]})}),c.jsx(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:c.jsxs(Et,{className:De.cardContainer,children:[c.jsx(Et.Header,{className:De.cardHeader,children:c.jsx(Et.Title,{className:De.cardTitle,children:"Test Data Deletion"})}),c.jsxs(Et.Body,{className:De.cardBody,children:[c.jsx("div",{className:De.buttonGroup,children:c.jsx(nt,{variant:"danger",onClick:()=>_r(!0),className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 shadow-md",children:"Delete Test Data"})}),c.jsx(co,{children:er&&c.jsxs(rt.div,{className:De.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Delete Test Data by Date Range"}),c.jsxs("form",{onSubmit:Bt,className:"space-y-4",children:[c.jsxs("div",{className:De.formGrid,children:[c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{className:De.formLabel,children:"Start Date *"}),c.jsx("input",{type:"date",value:Pt.startDate,onChange:xe=>pt("startDate",xe.target.value),className:De.formInput,required:!0})]}),c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{className:De.formLabel,children:"End Date *"}),c.jsx("input",{type:"date",value:Pt.endDate,onChange:xe=>pt("endDate",xe.target.value),className:De.formInput,required:!0})]})]}),c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{className:De.formLabel,children:"Teacher ID *"}),c.jsxs("select",{value:Pt.teacherId,onChange:xe=>pt("teacherId",xe.target.value),className:De.formInput,required:!0,children:[c.jsx("option",{value:"",children:"Select a teacher"}),Dt.map(xe=>c.jsxs("option",{value:xe.teacher_id,children:[xe.teacher_id," - ",xe.first_name," ",xe.last_name]},xe.teacher_id))]})]}),c.jsxs("div",{className:De.formGroup,children:[c.jsx("label",{className:De.formLabel,children:"Subject (Optional)"}),c.jsxs("select",{value:Pt.subjectId,onChange:xe=>pt("subjectId",xe.target.value),className:De.formInput,children:[c.jsx("option",{value:"",children:"All subjects"}),tt.map(xe=>c.jsx("option",{value:xe.subject_id,children:xe.subject},xe.subject_id))]})]}),c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning: This action cannot be undone"}),c.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[c.jsx("p",{children:"This will permanently delete:"}),c.jsxs("ul",{className:"list-disc list-inside mt-1",children:[c.jsx("li",{children:"All test records within the date range"}),c.jsx("li",{children:"All test questions and answers"}),c.jsx("li",{children:"All test results and submissions"}),c.jsx("li",{children:"All test assignments"}),c.jsx("li",{children:"Associated Cloudinary images (for matching tests)"})]})]})]})]})}),c.jsxs("div",{className:De.formActions,children:[c.jsx(nt,{type:"button",variant:"secondary",onClick:()=>_r(!1),className:De.buttonSecondary,children:"Cancel"}),c.jsx(nt,{type:"submit",variant:"danger",className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 shadow-md",children:"Delete Test Data"})]})]})]})})]})]})}),c.jsx(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.85,duration:.5},children:c.jsxs(Et,{className:De.cardContainer,children:[c.jsx(Et.Header,{className:De.cardHeader,children:c.jsx(Et.Title,{className:De.cardTitle,children:"Assignments Management"})}),c.jsxs(Et.Body,{className:De.cardBody,children:[c.jsx("div",{className:"mb-4",children:c.jsx(nt,{variant:"primary",onClick:_e,className:De.buttonPrimary,children:E?"Hide Assignments Table":"Get All Assignments "})}),E&&c.jsx("div",{className:"mb-6",children:c.jsx("div",{className:"border-b border-gray-200",children:c.jsxs("nav",{className:"-mb-px flex space-x-8",children:[c.jsx("button",{onClick:()=>ce(!0),className:`py-2 px-1 border-b-2 font-medium text-sm ${se?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Active Assignments"}),c.jsx("button",{onClick:()=>ce(!1),className:`py-2 px-1 border-b-2 font-medium text-sm ${se?"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":"border-purple-500 text-purple-600"}`,children:"Inactive Assignments"})]})})}),E&&c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:[se?"Active":"Inactive"," Assignments (",Wr.length," of ",W.filter(xe=>se?xe.is_active:!xe.is_active).length,")"]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs("select",{value:L,onChange:xe=>H(xe.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"All Teachers"}),Dt.map(xe=>c.jsxs("option",{value:xe.teacher_id,children:[xe.first_name," ",xe.last_name]},xe.teacher_id))]}),c.jsx("input",{type:"date",value:J,onChange:xe=>Q(xe.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Start Date"}),c.jsx("input",{type:"date",value:ne,onChange:xe=>Z(xe.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"End Date"})]})]}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:De.table,children:[c.jsx("thead",{className:De.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:De.tableHeaderCell,children:"Test Name"}),c.jsx("th",{className:De.tableHeaderCell,children:"Type"}),c.jsx("th",{className:De.tableHeaderCell,children:"Teacher"}),c.jsx("th",{className:De.tableHeaderCell,children:"Questions"}),c.jsx("th",{className:De.tableHeaderCell,children:"Created"}),c.jsx("th",{className:De.tableHeaderCell,children:"Actions"})]})}),c.jsx("tbody",{className:De.tableBody,children:Wr.map((xe,ht)=>c.jsxs("tr",{className:De.tableRow,children:[c.jsx("td",{className:De.tableCell,children:xe.test_name}),c.jsx("td",{className:De.tableCell,children:c.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:xe.test_type.replace("_"," ").toUpperCase()})}),c.jsx("td",{className:De.tableCell,children:xe.teacher_name}),c.jsx("td",{className:De.tableCell,children:xe.num_questions}),c.jsx("td",{className:De.tableCell,children:new Date(xe.created_at).toLocaleDateString()}),c.jsx("td",{className:De.tableCell,children:c.jsx("div",{className:"flex space-x-2",children:se?c.jsx("button",{onClick:()=>Cr(xe.test_id,xe.test_type,xe.teacher_id),className:"text-sm font-medium px-3 py-1 rounded bg-orange-100 text-orange-700 hover:bg-orange-200",children:"Mark Complete"}):c.jsx("button",{onClick:()=>$r(xe.test_id,xe.test_type,xe.teacher_id),className:"text-sm font-medium px-3 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200",children:"Mark Active"})})})]},`${xe.test_type}-${xe.test_id}-${ht}`))})]})})})]})]})]})}),c.jsx(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.5},children:c.jsxs(Et,{className:De.cardContainer,children:[c.jsx(Et.Header,{className:De.cardHeader,children:c.jsx(Et.Title,{className:De.cardTitle,children:"Test Management"})}),c.jsxs(Et.Body,{className:De.cardBody,children:[c.jsx("div",{className:"mb-4",children:c.jsx(nt,{variant:"primary",onClick:Ur,className:De.buttonPrimary,children:he?"Hide Tests Table":"Get All Tests "})}),he&&c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Tests (",ar.length," of ",ie.length,")"]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs("select",{value:Ne,onChange:xe=>Oe(xe.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"All Teachers"}),Dt.map(xe=>c.jsxs("option",{value:xe.teacher_id,children:[xe.first_name," ",xe.last_name]},xe.teacher_id))]}),c.jsx("input",{type:"date",value:Re,onChange:xe=>ze(xe.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Start Date"}),c.jsx("input",{type:"date",value:Nt,onChange:xe=>et(xe.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"End Date"})]})]}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:De.table,children:[c.jsx("thead",{className:De.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:De.tableHeaderCell,children:"Test Name"}),c.jsx("th",{className:De.tableHeaderCell,children:"Type"}),c.jsx("th",{className:De.tableHeaderCell,children:"Teacher"}),c.jsx("th",{className:De.tableHeaderCell,children:"Questions"}),c.jsx("th",{className:De.tableHeaderCell,children:"Created"}),c.jsx("th",{className:De.tableHeaderCell,children:"Actions"})]})}),c.jsx("tbody",{className:De.tableBody,children:ar.map((xe,ht)=>c.jsxs("tr",{className:De.tableRow,children:[c.jsx("td",{className:De.tableCell,children:xe.test_name}),c.jsx("td",{className:De.tableCell,children:c.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:xe.test_type.replace("_"," ").toUpperCase()})}),c.jsx("td",{className:De.tableCell,children:xe.teacher_name}),c.jsx("td",{className:De.tableCell,children:xe.num_questions}),c.jsx("td",{className:De.tableCell,children:new Date(xe.created_at).toLocaleDateString()}),c.jsx("td",{className:De.tableCell,children:c.jsx("div",{className:"flex space-x-2",children:c.jsx("button",{onClick:()=>wn(xe.test_id,xe.test_type,xe.teacher_id),className:"text-sm font-medium px-3 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200",children:"Delete Test"})})})]},`${xe.test_type}-${xe.test_id}-${ht}`))})]})})})]})]})]})}),c.jsx(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.5},children:c.jsxs(Et,{className:De.cardContainer,children:[c.jsx(Et.Header,{className:De.cardHeader,children:c.jsx(Et.Title,{className:De.cardTitle,children:"Debug & Testing"})}),c.jsx(Et.Body,{className:De.cardBody})]})})]})})]})},Z8e=()=>{const{isAdmin:e,getCurrentAdminId:t,logout:r}=ls(),{get:n}=Bo(),{showNotification:s}=Ba();C.useEffect(()=>{a()},[]);const a=C.useCallback(async()=>{if(console.log(" Initializing Admin Application..."),!e()){console.error(" User is not an admin, redirecting to login"),s("Access Denied: You are not an administrator.","error"),r();return}try{i(),await o(),l(),u(),console.log(" Admin Application initialized successfully"),s("Admin dashboard loaded successfully","success")}catch(d){console.error(" Error initializing admin app:",d),s("Failed to initialize admin dashboard","error")}},[e,t,r,s,n]),i=C.useCallback(()=>{console.log(" Initializing global event listeners...");const d=f=>{f.ctrlKey&&f.key==="k"&&(f.preventDefault(),console.log("Admin search shortcut triggered"))};return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[]),o=C.useCallback(async()=>{try{console.log(" Loading admin data...");const[d,f,g,p]=await Promise.allSettled([n("/.netlify/functions/get-all-users"),n("/.netlify/functions/get-all-teachers"),n("/.netlify/functions/get-all-subjects"),n("/.netlify/functions/get-academic-year")]);d.status==="fulfilled"&&d.value?.success&&console.log(" Users loaded:",d.value.users?.length||0),f.status==="fulfilled"&&f.value?.success&&console.log(" Teachers loaded:",f.value.teachers?.length||0),g.status==="fulfilled"&&g.value?.success&&console.log(" Subjects loaded:",g.value.subjects?.length||0),p.status==="fulfilled"&&p.value?.success&&console.log(" Academic years loaded:",p.value.academic_years?.length||0),console.log(" Admin data loading completed")}catch(d){throw console.error(" Error loading admin data:",d),d}},[n]),l=C.useCallback(()=>{console.log(" Initializing test deletion functionality..."),console.log(" Test deletion functionality initialized")},[]),u=C.useCallback(()=>{console.log(" Exposing admin functions globally..."),window.toggleSubjectsContent=()=>{const f=document.getElementById("allSubjectsContainer"),g=document.querySelector('button[onclick="toggleSubjectsContent()"]');if(!f){console.error(" allSubjectsContainer not found");return}if(!g){console.error(" Button not found");return}const p=f.style.display!=="none";f.style.display=p?"none":"block",g.textContent=p?"Show Subjects":"Hide Subjects"},window.showAddSubjectForm=()=>{const f=document.getElementById("addSubjectForm");f&&(f.style.display="block")},window.hideAddSubjectForm=()=>{const f=document.getElementById("addSubjectForm"),g=document.getElementById("newSubjectForm");f&&(f.style.display="none"),g&&g.reset()},window.showAddAcademicYearForm=()=>{const f=document.getElementById("addAcademicYearForm");f&&(f.style.display="block")},window.hideAddAcademicYearForm=()=>{const f=document.getElementById("addAcademicYearForm"),g=document.getElementById("newAcademicYearForm");f&&(f.style.display="none"),g&&g.reset()},window.toggleUsersContent=()=>{const f=document.getElementById("allUsersContainer"),g=document.querySelector('button[onclick="toggleUsersContent()"]');if(!f){console.error(" allUsersContainer not found");return}if(!g){console.error(" Button not found");return}const p=f.style.display!=="none";f.style.display=p?"none":"block",g.textContent=p?"Show Users":"Hide Users"},window.showAddUserForm=()=>{const f=document.getElementById("addUserForm");f&&(f.style.display="block")},window.hideAddUserForm=()=>{const f=document.getElementById("addUserForm"),g=document.getElementById("newUserForm");f&&(f.style.display="none"),g&&g.reset()},window.showAddTeacherForm=()=>{const f=document.getElementById("addTeacherForm");f&&(f.style.display="block")},window.hideAddTeacherForm=()=>{const f=document.getElementById("addTeacherForm"),g=document.getElementById("newTeacherForm");f&&(f.style.display="none"),g&&g.reset()},window.toggleTeachersContent=()=>{const f=document.getElementById("allTeachersContainer"),g=document.querySelector('button[onclick="toggleTeachersContent()"]');if(!f){console.error(" allTeachersContainer not found");return}if(!g){console.error(" Button not found");return}const p=f.style.display!=="none";f.style.display=p?"none":"block",g.textContent=p?"Show Teachers":"Hide Teachers"},window.toggleTestsContent=()=>{const f=document.getElementById("allTestsContainer"),g=document.querySelector('button[onclick="toggleTestsContent()"]');if(!f){console.error(" allTestsContainer not found");return}if(!g){console.error(" Button not found");return}const p=f.style.display!=="none";f.style.display=p?"none":"block",g.textContent=p?"Show Tests":"Hide Tests"},window.toggleAssignmentsContent=()=>{const f=document.getElementById("allAssignmentsContainer"),g=document.querySelector('button[onclick="toggleAssignmentsContent()"]');if(!f){console.error(" allAssignmentsContainer not found");return}if(!g){console.error(" Button not found");return}const p=f.style.display!=="none";f.style.display=p?"none":"block",g.textContent=p?"Show Assignments":"Hide Assignments"},window.toggleResultsContent=()=>{const f=document.getElementById("allResultsContainer"),g=document.querySelector('button[onclick="toggleResultsContent()"]');if(!f){console.error(" allResultsContainer not found");return}if(!g){console.error(" Button not found");return}const p=f.style.display!=="none";f.style.display=p?"none":"block",g.textContent=p?"Show Results":"Hide Results"};const d={};window.toggleSection=f=>{console.log(` toggleSection called with sectionId: ${f}`);const g=Date.now();if(d[f]&&g-d[f]<300){console.log(` Ignoring rapid successive call for ${f}`);return}d[f]=g;const p=document.getElementById(f);if(!p){console.error(` Section with id '${f}' not found!`);return}const x=p.style.display!=="none";p.style.display=x?"none":"block";const y=document.querySelector(`button[onclick="toggleSection('${f}')"]`);y&&(y.textContent=x?"Show":"Hide")},window.addClickListeners=()=>{console.log(" Adding click listeners to section headers...");const f=document.querySelectorAll(".section-header");console.log(` Found ${f.length} section headers`),f.forEach((g,p)=>{const x=g.textContent.trim();if(console.log(` Processing header ${p+1}:`,x),g.dataset.listenerAdded==="true"){console.log(` Skipping header ${x} - listener already added`);return}g.addEventListener("click",()=>{const y=g.dataset.sectionId;y&&window.toggleSection(y)}),g.dataset.listenerAdded="true",console.log(` Added click listener to header: ${x}`)})},window.makeFieldEditable=f=>{const g=f.textContent;f.dataset.field;const p=document.createElement("input");p.type="text",p.value=g,p.className="editable-input";const x=document.createElement("button");x.textContent="Save",x.className="btn-save",x.onclick=()=>window.saveField(f,p,x,y);const y=document.createElement("button");y.textContent="Cancel",y.className="btn-cancel",y.onclick=()=>{f.textContent=g,f.style.display="block",p.remove(),x.remove(),y.remove()},f.style.display="none",f.parentNode.insertBefore(p,f),f.parentNode.insertBefore(x,f),f.parentNode.insertBefore(y,f)},window.saveField=(f,g,p,x)=>{const y=g.value.trim(),v=f.dataset.field,T=f.dataset.recordId;if(!y){alert("Field cannot be empty");return}console.log(`Saving field ${v} for record ${T} with value: ${y}`),f.textContent=y,f.style.display="block",g.remove(),p.remove(),x.remove()},window.showTestDataDeletion=()=>console.log("showTestDataDeletion called"),window.hideTestDataDeletionForm=()=>console.log("hideTestDataDeletionForm called"),window.loadTeacherGradesClasses=()=>console.log("loadTeacherGradesClasses called"),window.checkTeacherSubjects=()=>console.log("checkTeacherSubjects called"),window.initializeTestDeletion=()=>console.log("initializeTestDeletion called"),window.handleAssignmentDeletion=()=>console.log("handleAssignmentDeletion called"),window.handleTestDataDeletion=()=>console.log("handleTestDataDeletion called"),window.getSelectedGradesClasses=()=>console.log("getSelectedGradesClasses called"),window.hideAssignmentDeletionForm=()=>console.log("hideAssignmentDeletionForm called"),window.addKeyboardAccessibility=()=>console.log("addKeyboardAccessibility called"),window.testToggleSection=()=>console.log("testToggleSection called"),window.testAllToggles=()=>console.log("testAllToggles called"),window.manualToggleTest=()=>console.log("manualToggleTest called"),window.addEditableFieldListeners=()=>console.log("addEditableFieldListeners called"),window.deleteTest=()=>console.log("deleteTest called"),window.testLocalStorage=()=>{console.log("Testing localStorage...");try{localStorage.setItem("test","value");const f=localStorage.getItem("test");return localStorage.removeItem("test"),console.log(" localStorage is working"),!0}catch(f){return console.error(" localStorage error:",f),!1}},window.clearAllLocalStorage=()=>{console.log("Clearing all localStorage..."),localStorage.clear(),console.log(" localStorage cleared")},window.exportLocalStorage=()=>{console.log("Exporting localStorage...");const f={};for(let y=0;y<localStorage.length;y++){const v=localStorage.key(y);f[v]=localStorage.getItem(v)}const g=new Blob([JSON.stringify(f,null,2)],{type:"application/json"}),p=URL.createObjectURL(g),x=document.createElement("a");x.href=p,x.download="localStorage-backup.json",x.click(),URL.revokeObjectURL(p)},console.log(" Admin functions exposed globally")},[]);return e()?c.jsx(Q8e,{}):c.jsxs("div",{className:"admin-error",children:[c.jsx("h2",{children:"Access Denied"}),c.jsx("p",{children:"You don't have permission to access the admin dashboard."}),c.jsx("button",{onClick:r,children:"Return to Login"})]})},D4=({children:e,allowedRoles:t})=>{const{isAuthenticated:r,role:n,isLoading:s}=ls();return s?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):r?t&&!t.includes(n)?c.jsx(pp,{to:"/unauthorized",replace:!0}):e:c.jsx(pp,{to:"/login",replace:!0})},eFe=()=>c.jsxs("div",{className:"unauthorized-page",children:[c.jsx("h1",{children:"Access Denied"}),c.jsx("p",{children:"You don't have permission to access this page."})]}),tFe=()=>c.jsx(OW,{children:c.jsx(jV,{children:c.jsx(NV,{children:c.jsx(OZ,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:c.jsx("div",{className:"app",children:c.jsxs(bj,{children:[c.jsx(As,{path:"/login",element:c.jsx(Wue,{})}),c.jsx(As,{path:"/unauthorized",element:c.jsx(eFe,{})}),c.jsx(As,{path:"/student/*",element:c.jsx(D4,{allowedRoles:["student"],children:c.jsx(qde,{})})}),c.jsx(As,{path:"/teacher/*",element:c.jsx(D4,{allowedRoles:["teacher"],children:c.jsx(J8e,{})})}),c.jsx(As,{path:"/admin/*",element:c.jsx(D4,{allowedRoles:["admin"],children:c.jsx(Z8e,{})})}),c.jsx(As,{path:"/",element:c.jsx(pp,{to:"/login",replace:!0})}),c.jsx(As,{path:"*",element:c.jsx(pp,{to:"/login",replace:!0})})]})})})})})});class rFe{constructor(){this.tokenKey="auth_token",this.refreshTokenKey="refresh_token",this.userKey="user_data"}getToken(){return localStorage.getItem(this.tokenKey)}getRefreshToken(){return localStorage.getItem(this.refreshTokenKey)}getUserData(){const t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}setToken(t){localStorage.setItem(this.tokenKey,t)}setRefreshToken(t){localStorage.setItem(this.refreshTokenKey,t)}setUserData(t){localStorage.setItem(this.userKey,JSON.stringify(t))}setTokens(t,r){this.setToken(t),this.setUserData({role:r}),localStorage.setItem("accessToken",t)}isAuthenticated(){const t=this.getToken();if(!t)return!1;try{const r=JSON.parse(atob(t.split(".")[1])),n=Date.now()/1e3;return r.exp>n}catch(r){return console.error("Error decoding token:",r),!1}}getUserRole(){const t=this.getUserData();return t?t.role:null}isAdmin(){return this.getUserRole()==="admin"}isTeacher(){return this.getUserRole()==="teacher"}isStudent(){return this.getUserRole()==="student"}clearAuth(){localStorage.removeItem(this.tokenKey),localStorage.removeItem(this.refreshTokenKey),localStorage.removeItem(this.userKey)}logout(){this.clearAuth(),window.location.href="/login"}getAuthHeader(){const t=this.getToken();return t?`Bearer ${t}`:null}async makeAuthenticatedRequest(t,r={}){const n=this.getToken();if(!n)throw new Error("No authentication token found");const s={"Content-Type":"application/json",Authorization:`Bearer ${n}`,...r.headers},a=await fetch(t,{...r,headers:s});if(a.status===401){if(await this.refreshToken())return s.Authorization=`Bearer ${this.getToken()}`,fetch(t,{...r,headers:s});throw this.logout(),new Error("Authentication failed")}return a}async refreshToken(){const t=this.getRefreshToken();if(!t)return!1;try{const r=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(r.ok){const n=await r.json();return this.setToken(n.token),n.refreshToken&&this.setRefreshToken(n.refreshToken),!0}}catch(r){console.error("Error refreshing token:",r)}return!1}getAccessToken(){return this.getToken()}decodeToken(t){try{return JSON.parse(atob(t.split(".")[1]))}catch(r){return console.error("Error decoding token:",r),null}}init(){return this.isAuthenticated()?(this.setupTokenRefresh(),!0):(window.location.pathname!=="/login"&&(window.location.href="/login"),!1)}setupTokenRefresh(){setInterval(async()=>{this.isAuthenticated()&&await this.refreshToken()},3e3*1e3)}}const xj=new rFe;window.tokenManager=xj;typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{xj.init()}):xj.init());class lQ{constructor(){this.currentRole=null,this.loadedFunctions=new Set,this.blockedFunctions=new Set,this.initialized=!1,this.retryCount=0,this.maxRetries=20}initialize(){if(this.initialized){console.log("[DEBUG] Role-based loader already initialized, skipping...");return}if(this.retryCount>=this.maxRetries){console.warn("[DEBUG] Max retries reached, stopping role-based loader initialization");return}if(this.retryCount++,(this.retryCount%5===1||this.retryCount===this.maxRetries)&&console.log(`[DEBUG] Role-based loader initializing... (attempt ${this.retryCount}/${this.maxRetries})`),console.log("[DEBUG] Token manager available:",!!window.tokenManager),window.tokenManager&&window.tokenManager.isAuthenticated()){const t=window.tokenManager.getUserRole();console.log("[DEBUG] Role from token manager:",t),console.log("[DEBUG] Access token exists:",!!window.tokenManager.getAccessToken()),t?(this.currentRole=t,this.initialized=!0,this.retryCount=0,this.setupRoleBasedAccess()):(console.log("[DEBUG] No role found, waiting for role to be set..."),setTimeout(()=>this.initialize(),500))}else console.log("[DEBUG] Token manager not available or not authenticated, waiting..."),setTimeout(()=>this.initialize(),500)}setupRoleBasedAccess(){this.currentRole||(console.warn("No role detected, defaulting to student access"),this.currentRole="student");let t=!1;try{const r=window.tokenManager.getAccessToken();r&&(t=window.tokenManager.decodeToken(r).role==="admin")}catch(r){console.warn("Could not decode token for admin check:",r),t=!1}console.log(`Role-based loader initialized for: ${this.currentRole}${t?" (admin)":""}`),this.loadRoleSpecificFunctions(),this.setupRoleBasedUI(),this.replaceBlockedFunctions()}loadRoleSpecificFunctions(){this.currentRole==="teacher"?this.loadTeacherFunctions():this.currentRole==="student"&&this.loadStudentFunctions()}loadTeacherFunctions(){console.log("Teacher functions already available in main script")}loadStudentFunctions(){console.log("Student functions already available in main script")}loadFunction(t,r){console.log(`Function ${t} already available in main script for ${r}`),this.loadedFunctions.add(t)}setupRoleBasedUI(){let t=!1;try{const r=window.tokenManager.getAccessToken();r&&(t=window.tokenManager.decodeToken(r).role==="admin")}catch(r){console.warn("Could not decode token for admin check in UI:",r),t=!1}this.currentRole==="student"&&this.hideTeacherElements(),this.currentRole==="teacher"&&!t&&this.hideStudentElements()}hideTeacherElements(){[".teacher-cabinet",".test-creation-panel",".grade-management-panel",".class-management-panel",'[data-role="teacher"]'].forEach(r=>{document.querySelectorAll(r).forEach(s=>{s.style.display="none",s.classList.add("role-hidden")})})}hideStudentElements(){[".student-cabinet",".test-taking-panel",".results-viewing-panel",'[data-role="student"]'].forEach(r=>{document.querySelectorAll(r).forEach(s=>{s.style.display="none",s.classList.add("role-hidden")})})}replaceBlockedFunctions(){this.currentRole==="student"?this.blockTeacherFunctions():this.currentRole==="teacher"&&this.blockStudentFunctions()}blockTeacherFunctions(){Object.entries({createTest:()=>this.showAccessDenied("teacher"),assignTest:()=>this.showAccessDenied("teacher"),gradeTest:()=>this.showAccessDenied("teacher"),manageClasses:()=>this.showAccessDenied("teacher"),viewAllResults:()=>this.showAccessDenied("teacher")}).forEach(([r,n])=>{window[r]&&(this.blockedFunctions.add(r),window[r]=n)})}blockStudentFunctions(){Object.entries({takeTest:()=>this.showAccessDenied("student"),submitTest:()=>this.showAccessDenied("student"),viewMyResults:()=>this.showAccessDenied("student")}).forEach(([r,n])=>{window[r]&&(this.blockedFunctions.add(r),window[r]=n)})}showAccessDenied(t){const r=`Access denied. This function requires ${t} role.`;console.warn(r),typeof showNotification=="function"?showNotification(r,"warning"):alert(r)}isFunctionBlocked(t){return this.blockedFunctions.has(t)}isFunctionLoaded(t){return this.loadedFunctions.has(t)}getCurrentRole(){return this.currentRole}hasRole(t){return this.currentRole===t}reloadRoleAccess(){this.initialize()}setupAccessAfterLogin(){if(console.log("[DEBUG] Setting up role-based access after login..."),console.log("[DEBUG] Role-based loader will now initialize (no more retry loop before login)"),!window.tokenManager)return console.error("[ERROR] Token manager not available during setupAccessAfterLogin"),!1;if(!window.tokenManager.isAuthenticated())return console.error("[ERROR] User not authenticated during setupAccessAfterLogin"),!1;const t=window.tokenManager.getUserRole();return t?(console.log("[DEBUG] Setting role after login:",t),this.currentRole=t,this.initialized=!0,this.retryCount=0,this.setupRoleBasedAccess(),console.log("[DEBUG] Role-based access setup completed successfully for role:",t),!0):(console.error("[ERROR] No role found in token during setupAccessAfterLogin"),!1)}}window.roleBasedLoader=new lQ;typeof Vb<"u"&&Vb.exports&&(Vb.exports=lQ);const nFe=()=>{console.log("[DEBUG] Initializing application with new structure");const e={schemaVersion:"2.0",enhancedFeatures:!0,newUserStructure:!0,newTestStructure:!0};localStorage.setItem("app_init_data",JSON.stringify(e)),console.log("[DEBUG] Application initialized with enhanced features")},sFe=()=>{console.log("[DEBUG] Starting main application"),nFe(),$Q.createRoot(document.getElementById("root")).render(c.jsx(Be.StrictMode,{children:c.jsx(tFe,{})}))};sFe()});export default aFe();
