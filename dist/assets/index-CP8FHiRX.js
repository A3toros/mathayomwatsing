var jJ=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Dje=jJ((gPe,s4)=>{function nB(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var a4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var T3={exports:{}},Px={},E3={exports:{}},Nn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z9;function PJ(){if(z9)return Nn;z9=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(W){return W===null||typeof W!="object"?null:(W=f&&W[f]||W["@@iterator"],typeof W=="function"?W:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,y={};function v(W,D,U){this.props=W,this.context=D,this.refs=y,this.updater=U||g}v.prototype.isReactComponent={},v.prototype.setState=function(W,D){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,D,"setState")},v.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function C(){}C.prototype=v.prototype;function S(W,D,U){this.props=W,this.context=D,this.refs=y,this.updater=U||g}var w=S.prototype=new C;w.constructor=S,p(w,v.prototype),w.isPureReactComponent=!0;var T=Array.isArray,N=Object.prototype.hasOwnProperty,A={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function j(W,D,U){var q,H={},te=null,Q=null;if(D!=null)for(q in D.ref!==void 0&&(Q=D.ref),D.key!==void 0&&(te=""+D.key),D)N.call(D,q)&&!P.hasOwnProperty(q)&&(H[q]=D[q]);var ae=arguments.length-2;if(ae===1)H.children=U;else if(1<ae){for(var ce=Array(ae),me=0;me<ae;me++)ce[me]=arguments[me+2];H.children=ce}if(W&&W.defaultProps)for(q in ae=W.defaultProps,ae)H[q]===void 0&&(H[q]=ae[q]);return{$$typeof:e,type:W,key:te,ref:Q,props:H,_owner:A.current}}function F(W,D){return{$$typeof:e,type:W.type,key:D,ref:W.ref,props:W.props,_owner:W._owner}}function R(W){return typeof W=="object"&&W!==null&&W.$$typeof===e}function L(W){var D={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(U){return D[U]})}var V=/\/+/g;function Z(W,D){return typeof W=="object"&&W!==null&&W.key!=null?L(""+W.key):D.toString(36)}function Y(W,D,U,q,H){var te=typeof W;(te==="undefined"||te==="boolean")&&(W=null);var Q=!1;if(W===null)Q=!0;else switch(te){case"string":case"number":Q=!0;break;case"object":switch(W.$$typeof){case e:case t:Q=!0}}if(Q)return Q=W,H=H(Q),W=q===""?"."+Z(Q,0):q,T(H)?(U="",W!=null&&(U=W.replace(V,"$&/")+"/"),Y(H,D,U,"",function(me){return me})):H!=null&&(R(H)&&(H=F(H,U+(!H.key||Q&&Q.key===H.key?"":(""+H.key).replace(V,"$&/")+"/")+W)),D.push(H)),1;if(Q=0,q=q===""?".":q+":",T(W))for(var ae=0;ae<W.length;ae++){te=W[ae];var ce=q+Z(te,ae);Q+=Y(te,D,U,ce,H)}else if(ce=h(W),typeof ce=="function")for(W=ce.call(W),ae=0;!(te=W.next()).done;)te=te.value,ce=q+Z(te,ae++),Q+=Y(te,D,U,ce,H);else if(te==="object")throw D=String(W),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return Q}function re(W,D,U){if(W==null)return W;var q=[],H=0;return Y(W,q,"","",function(te){return D.call(U,te,H++)}),q}function ue(W){if(W._status===-1){var D=W._result;D=D(),D.then(function(U){(W._status===0||W._status===-1)&&(W._status=1,W._result=U)},function(U){(W._status===0||W._status===-1)&&(W._status=2,W._result=U)}),W._status===-1&&(W._status=0,W._result=D)}if(W._status===1)return W._result.default;throw W._result}var z={current:null},X={transition:null},I={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:X,ReactCurrentOwner:A};function B(){throw Error("act(...) is not supported in production builds of React.")}return Nn.Children={map:re,forEach:function(W,D,U){re(W,function(){D.apply(this,arguments)},U)},count:function(W){var D=0;return re(W,function(){D++}),D},toArray:function(W){return re(W,function(D){return D})||[]},only:function(W){if(!R(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Nn.Component=v,Nn.Fragment=r,Nn.Profiler=s,Nn.PureComponent=S,Nn.StrictMode=n,Nn.Suspense=c,Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,Nn.act=B,Nn.cloneElement=function(W,D,U){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var q=p({},W.props),H=W.key,te=W.ref,Q=W._owner;if(D!=null){if(D.ref!==void 0&&(te=D.ref,Q=A.current),D.key!==void 0&&(H=""+D.key),W.type&&W.type.defaultProps)var ae=W.type.defaultProps;for(ce in D)N.call(D,ce)&&!P.hasOwnProperty(ce)&&(q[ce]=D[ce]===void 0&&ae!==void 0?ae[ce]:D[ce])}var ce=arguments.length-2;if(ce===1)q.children=U;else if(1<ce){ae=Array(ce);for(var me=0;me<ce;me++)ae[me]=arguments[me+2];q.children=ae}return{$$typeof:e,type:W.type,key:H,ref:te,props:q,_owner:Q}},Nn.createContext=function(W){return W={$$typeof:i,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:a,_context:W},W.Consumer=W},Nn.createElement=j,Nn.createFactory=function(W){var D=j.bind(null,W);return D.type=W,D},Nn.createRef=function(){return{current:null}},Nn.forwardRef=function(W){return{$$typeof:o,render:W}},Nn.isValidElement=R,Nn.lazy=function(W){return{$$typeof:d,_payload:{_status:-1,_result:W},_init:ue}},Nn.memo=function(W,D){return{$$typeof:u,type:W,compare:D===void 0?null:D}},Nn.startTransition=function(W){var D=X.transition;X.transition={};try{W()}finally{X.transition=D}},Nn.unstable_act=B,Nn.useCallback=function(W,D){return z.current.useCallback(W,D)},Nn.useContext=function(W){return z.current.useContext(W)},Nn.useDebugValue=function(){},Nn.useDeferredValue=function(W){return z.current.useDeferredValue(W)},Nn.useEffect=function(W,D){return z.current.useEffect(W,D)},Nn.useId=function(){return z.current.useId()},Nn.useImperativeHandle=function(W,D,U){return z.current.useImperativeHandle(W,D,U)},Nn.useInsertionEffect=function(W,D){return z.current.useInsertionEffect(W,D)},Nn.useLayoutEffect=function(W,D){return z.current.useLayoutEffect(W,D)},Nn.useMemo=function(W,D){return z.current.useMemo(W,D)},Nn.useReducer=function(W,D,U){return z.current.useReducer(W,D,U)},Nn.useRef=function(W){return z.current.useRef(W)},Nn.useState=function(W){return z.current.useState(W)},Nn.useSyncExternalStore=function(W,D,U){return z.current.useSyncExternalStore(W,D,U)},Nn.useTransition=function(){return z.current.useTransition()},Nn.version="18.3.1",Nn}var W9;function Ym(){return W9||(W9=1,E3.exports=PJ()),E3.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H9;function FJ(){if(H9)return Px;H9=1;var e=Ym(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function i(o,c,u){var d,f={},h=null,g=null;u!==void 0&&(h=""+u),c.key!==void 0&&(h=""+c.key),c.ref!==void 0&&(g=c.ref);for(d in c)n.call(c,d)&&!a.hasOwnProperty(d)&&(f[d]=c[d]);if(o&&o.defaultProps)for(d in c=o.defaultProps,c)f[d]===void 0&&(f[d]=c[d]);return{$$typeof:t,type:o,key:h,ref:g,props:f,_owner:s.current}}return Px.Fragment=r,Px.jsx=i,Px.jsxs=i,Px}var G9;function MJ(){return G9||(G9=1,T3.exports=FJ()),T3.exports}var l=MJ(),_=Ym();const zs=Fc(_),sB=nB({__proto__:null,default:zs},[_]);var Hb={},N3={exports:{}},al={},A3={exports:{}},j3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V9;function OJ(){return V9||(V9=1,(function(e){function t(X,I){var B=X.length;X.push(I);e:for(;0<B;){var W=B-1>>>1,D=X[W];if(0<s(D,I))X[W]=I,X[B]=D,B=W;else break e}}function r(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var I=X[0],B=X.pop();if(B!==I){X[0]=B;e:for(var W=0,D=X.length,U=D>>>1;W<U;){var q=2*(W+1)-1,H=X[q],te=q+1,Q=X[te];if(0>s(H,B))te<D&&0>s(Q,H)?(X[W]=Q,X[te]=B,W=te):(X[W]=H,X[q]=B,W=q);else if(te<D&&0>s(Q,B))X[W]=Q,X[te]=B,W=te;else break e}}return I}function s(X,I){var B=X.sortIndex-I.sortIndex;return B!==0?B:X.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],u=[],d=1,f=null,h=3,g=!1,p=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(X){for(var I=r(u);I!==null;){if(I.callback===null)n(u);else if(I.startTime<=X)n(u),I.sortIndex=I.expirationTime,t(c,I);else break;I=r(u)}}function T(X){if(y=!1,w(X),!p)if(r(c)!==null)p=!0,ue(N);else{var I=r(u);I!==null&&z(T,I.startTime-X)}}function N(X,I){p=!1,y&&(y=!1,C(j),j=-1),g=!0;var B=h;try{for(w(I),f=r(c);f!==null&&(!(f.expirationTime>I)||X&&!L());){var W=f.callback;if(typeof W=="function"){f.callback=null,h=f.priorityLevel;var D=W(f.expirationTime<=I);I=e.unstable_now(),typeof D=="function"?f.callback=D:f===r(c)&&n(c),w(I)}else n(c);f=r(c)}if(f!==null)var U=!0;else{var q=r(u);q!==null&&z(T,q.startTime-I),U=!1}return U}finally{f=null,h=B,g=!1}}var A=!1,P=null,j=-1,F=5,R=-1;function L(){return!(e.unstable_now()-R<F)}function V(){if(P!==null){var X=e.unstable_now();R=X;var I=!0;try{I=P(!0,X)}finally{I?Z():(A=!1,P=null)}}else A=!1}var Z;if(typeof S=="function")Z=function(){S(V)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,re=Y.port2;Y.port1.onmessage=V,Z=function(){re.postMessage(null)}}else Z=function(){v(V,0)};function ue(X){P=X,A||(A=!0,Z())}function z(X,I){j=v(function(){X(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_continueExecution=function(){p||g||(p=!0,ue(N))},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(X){switch(h){case 1:case 2:case 3:var I=3;break;default:I=h}var B=h;h=I;try{return X()}finally{h=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(X,I){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var B=h;h=X;try{return I()}finally{h=B}},e.unstable_scheduleCallback=function(X,I,B){var W=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?W+B:W):B=W,X){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=B+D,X={id:d++,callback:I,priorityLevel:X,startTime:B,expirationTime:D,sortIndex:-1},B>W?(X.sortIndex=B,t(u,X),r(c)===null&&X===r(u)&&(y?(C(j),j=-1):y=!0,z(T,B-W))):(X.sortIndex=D,t(c,X),p||g||(p=!0,ue(N))),X},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(X){var I=h;return function(){var B=h;h=I;try{return X.apply(this,arguments)}finally{h=B}}}})(j3)),j3}var q9;function qC(){return q9||(q9=1,A3.exports=OJ()),A3.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K9;function DJ(){if(K9)return al;K9=1;var e=Ym(),t=qC();function r(m){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+m,E=1;E<arguments.length;E++)x+="&args[]="+encodeURIComponent(arguments[E]);return"Minified React error #"+m+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(m,x){i(m,x),i(m+"Capture",x)}function i(m,x){for(s[m]=x,m=0;m<x.length;m++)n.add(x[m])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function h(m){return c.call(f,m)?!0:c.call(d,m)?!1:u.test(m)?f[m]=!0:(d[m]=!0,!1)}function g(m,x,E,O){if(E!==null&&E.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return O?!1:E!==null?!E.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function p(m,x,E,O){if(x===null||typeof x>"u"||g(m,x,E,O))return!0;if(O)return!1;if(E!==null)switch(E.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function y(m,x,E,O,K,ne,be){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=O,this.attributeNamespace=K,this.mustUseProperty=E,this.propertyName=m,this.type=x,this.sanitizeURL=ne,this.removeEmptyString=be}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){v[m]=new y(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var x=m[0];v[x]=new y(x,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){v[m]=new y(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){v[m]=new y(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){v[m]=new y(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){v[m]=new y(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){v[m]=new y(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){v[m]=new y(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){v[m]=new y(m,5,!1,m.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function S(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var x=m.replace(C,S);v[x]=new y(x,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var x=m.replace(C,S);v[x]=new y(x,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var x=m.replace(C,S);v[x]=new y(x,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){v[m]=new y(m,1,!1,m.toLowerCase(),null,!1,!1)}),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){v[m]=new y(m,1,!1,m.toLowerCase(),null,!0,!0)});function w(m,x,E,O){var K=v.hasOwnProperty(x)?v[x]:null;(K!==null?K.type!==0:O||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(p(x,E,K,O)&&(E=null),O||K===null?h(x)&&(E===null?m.removeAttribute(x):m.setAttribute(x,""+E)):K.mustUseProperty?m[K.propertyName]=E===null?K.type===3?!1:"":E:(x=K.attributeName,O=K.attributeNamespace,E===null?m.removeAttribute(x):(K=K.type,E=K===3||K===4&&E===!0?"":""+E,O?m.setAttributeNS(O,x,E):m.setAttribute(x,E))))}var T=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),A=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),L=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),X=Symbol.iterator;function I(m){return m===null||typeof m!="object"?null:(m=X&&m[X]||m["@@iterator"],typeof m=="function"?m:null)}var B=Object.assign,W;function D(m){if(W===void 0)try{throw Error()}catch(E){var x=E.stack.trim().match(/\n( *(at )?)/);W=x&&x[1]||""}return`
`+W+m}var U=!1;function q(m,x){if(!m||U)return"";U=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(St){var O=St}Reflect.construct(m,[],x)}else{try{x.call()}catch(St){O=St}m.call(x.prototype)}else{try{throw Error()}catch(St){O=St}m()}}catch(St){if(St&&O&&typeof St.stack=="string"){for(var K=St.stack.split(`
`),ne=O.stack.split(`
`),be=K.length-1,Ie=ne.length-1;1<=be&&0<=Ie&&K[be]!==ne[Ie];)Ie--;for(;1<=be&&0<=Ie;be--,Ie--)if(K[be]!==ne[Ie]){if(be!==1||Ie!==1)do if(be--,Ie--,0>Ie||K[be]!==ne[Ie]){var Ve=`
`+K[be].replace(" at new "," at ");return m.displayName&&Ve.includes("<anonymous>")&&(Ve=Ve.replace("<anonymous>",m.displayName)),Ve}while(1<=be&&0<=Ie);break}}}finally{U=!1,Error.prepareStackTrace=E}return(m=m?m.displayName||m.name:"")?D(m):""}function H(m){switch(m.tag){case 5:return D(m.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return m=q(m.type,!1),m;case 11:return m=q(m.type.render,!1),m;case 1:return m=q(m.type,!0),m;default:return""}}function te(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case P:return"Fragment";case A:return"Portal";case F:return"Profiler";case j:return"StrictMode";case Z:return"Suspense";case Y:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case L:return(m.displayName||"Context")+".Consumer";case R:return(m._context.displayName||"Context")+".Provider";case V:var x=m.render;return m=m.displayName,m||(m=x.displayName||x.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case re:return x=m.displayName||null,x!==null?x:te(m.type)||"Memo";case ue:x=m._payload,m=m._init;try{return te(m(x))}catch{}}return null}function Q(m){var x=m.type;switch(m.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=x.render,m=m.displayName||m.name||"",x.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(x);case 8:return x===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function ae(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function ce(m){var x=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function me(m){var x=ce(m)?"checked":"value",E=Object.getOwnPropertyDescriptor(m.constructor.prototype,x),O=""+m[x];if(!m.hasOwnProperty(x)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var K=E.get,ne=E.set;return Object.defineProperty(m,x,{configurable:!0,get:function(){return K.call(this)},set:function(be){O=""+be,ne.call(this,be)}}),Object.defineProperty(m,x,{enumerable:E.enumerable}),{getValue:function(){return O},setValue:function(be){O=""+be},stopTracking:function(){m._valueTracker=null,delete m[x]}}}}function xe(m){m._valueTracker||(m._valueTracker=me(m))}function se(m){if(!m)return!1;var x=m._valueTracker;if(!x)return!0;var E=x.getValue(),O="";return m&&(O=ce(m)?m.checked?"true":"false":m.value),m=O,m!==E?(x.setValue(m),!0):!1}function De(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function He(m,x){var E=x.checked;return B({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:E??m._wrapperState.initialChecked})}function rt(m,x){var E=x.defaultValue==null?"":x.defaultValue,O=x.checked!=null?x.checked:x.defaultChecked;E=ae(x.value!=null?x.value:E),m._wrapperState={initialChecked:O,initialValue:E,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function _t(m,x){x=x.checked,x!=null&&w(m,"checked",x,!1)}function Ke(m,x){_t(m,x);var E=ae(x.value),O=x.type;if(E!=null)O==="number"?(E===0&&m.value===""||m.value!=E)&&(m.value=""+E):m.value!==""+E&&(m.value=""+E);else if(O==="submit"||O==="reset"){m.removeAttribute("value");return}x.hasOwnProperty("value")?Pe(m,x.type,E):x.hasOwnProperty("defaultValue")&&Pe(m,x.type,ae(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(m.defaultChecked=!!x.defaultChecked)}function tt(m,x,E){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var O=x.type;if(!(O!=="submit"&&O!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+m._wrapperState.initialValue,E||x===m.value||(m.value=x),m.defaultValue=x}E=m.name,E!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,E!==""&&(m.name=E)}function Pe(m,x,E){(x!=="number"||De(m.ownerDocument)!==m)&&(E==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+E&&(m.defaultValue=""+E))}var je=Array.isArray;function Qe(m,x,E,O){if(m=m.options,x){x={};for(var K=0;K<E.length;K++)x["$"+E[K]]=!0;for(E=0;E<m.length;E++)K=x.hasOwnProperty("$"+m[E].value),m[E].selected!==K&&(m[E].selected=K),K&&O&&(m[E].defaultSelected=!0)}else{for(E=""+ae(E),x=null,K=0;K<m.length;K++){if(m[K].value===E){m[K].selected=!0,O&&(m[K].defaultSelected=!0);return}x!==null||m[K].disabled||(x=m[K])}x!==null&&(x.selected=!0)}}function vt(m,x){if(x.dangerouslySetInnerHTML!=null)throw Error(r(91));return B({},x,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function Ot(m,x){var E=x.value;if(E==null){if(E=x.children,x=x.defaultValue,E!=null){if(x!=null)throw Error(r(92));if(je(E)){if(1<E.length)throw Error(r(93));E=E[0]}x=E}x==null&&(x=""),E=x}m._wrapperState={initialValue:ae(E)}}function $t(m,x){var E=ae(x.value),O=ae(x.defaultValue);E!=null&&(E=""+E,E!==m.value&&(m.value=E),x.defaultValue==null&&m.defaultValue!==E&&(m.defaultValue=E)),O!=null&&(m.defaultValue=""+O)}function Gt(m){var x=m.textContent;x===m._wrapperState.initialValue&&x!==""&&x!==null&&(m.value=x)}function ir(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dt(m,x){return m==null||m==="http://www.w3.org/1999/xhtml"?ir(x):m==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var gt,kt=(function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,E,O,K){MSApp.execUnsafeLocalFunction(function(){return m(x,E,O,K)})}:m})(function(m,x){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=x;else{for(gt=gt||document.createElement("div"),gt.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=gt.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;x.firstChild;)m.appendChild(x.firstChild)}});function Ge(m,x){if(x){var E=m.firstChild;if(E&&E===m.lastChild&&E.nodeType===3){E.nodeValue=x;return}}m.textContent=x}var Xe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Et=["Webkit","ms","Moz","O"];Object.keys(Xe).forEach(function(m){Et.forEach(function(x){x=x+m.charAt(0).toUpperCase()+m.substring(1),Xe[x]=Xe[m]})});function Ut(m,x,E){return x==null||typeof x=="boolean"||x===""?"":E||typeof x!="number"||x===0||Xe.hasOwnProperty(m)&&Xe[m]?(""+x).trim():x+"px"}function Wt(m,x){m=m.style;for(var E in x)if(x.hasOwnProperty(E)){var O=E.indexOf("--")===0,K=Ut(E,x[E],O);E==="float"&&(E="cssFloat"),O?m.setProperty(E,K):m[E]=K}}var pr=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wr(m,x){if(x){if(pr[m]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(r(137,m));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(r(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(r(61))}if(x.style!=null&&typeof x.style!="object")throw Error(r(62))}}function br(m,x){if(m.indexOf("-")===-1)return typeof x.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lr=null;function Er(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var we=null,_e=null,Ee=null;function Fe(m){if(m=Ah(m)){if(typeof we!="function")throw Error(r(280));var x=m.stateNode;x&&(x=La(x),we(m.stateNode,m.type,x))}}function at(m){_e?Ee?Ee.push(m):Ee=[m]:_e=m}function jt(){if(_e){var m=_e,x=Ee;if(Ee=_e=null,Fe(m),x)for(m=0;m<x.length;m++)Fe(x[m])}}function Mt(m,x){return m(x)}function Be(){}var lt=!1;function ct(m,x,E){if(lt)return m(x,E);lt=!0;try{return Mt(m,x,E)}finally{lt=!1,(_e!==null||Ee!==null)&&(Be(),jt())}}function Qt(m,x){var E=m.stateNode;if(E===null)return null;var O=La(E);if(O===null)return null;E=O[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(O=!O.disabled)||(m=m.type,O=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!O;break e;default:m=!1}if(m)return null;if(E&&typeof E!="function")throw Error(r(231,x,typeof E));return E}var rr=!1;if(o)try{var _r={};Object.defineProperty(_r,"passive",{get:function(){rr=!0}}),window.addEventListener("test",_r,_r),window.removeEventListener("test",_r,_r)}catch{rr=!1}function tn(m,x,E,O,K,ne,be,Ie,Ve){var St=Array.prototype.slice.call(arguments,3);try{x.apply(E,St)}catch(Jt){this.onError(Jt)}}var Fr=!1,an=null,pe=!1,Ne=null,le={onError:function(m){Fr=!0,an=m}};function fe(m,x,E,O,K,ne,be,Ie,Ve){Fr=!1,an=null,tn.apply(le,arguments)}function ge(m,x,E,O,K,ne,be,Ie,Ve){if(fe.apply(this,arguments),Fr){if(Fr){var St=an;Fr=!1,an=null}else throw Error(r(198));pe||(pe=!0,Ne=St)}}function Se(m){var x=m,E=m;if(m.alternate)for(;x.return;)x=x.return;else{m=x;do x=m,(x.flags&4098)!==0&&(E=x.return),m=x.return;while(m)}return x.tag===3?E:null}function ze(m){if(m.tag===13){var x=m.memoizedState;if(x===null&&(m=m.alternate,m!==null&&(x=m.memoizedState)),x!==null)return x.dehydrated}return null}function it(m){if(Se(m)!==m)throw Error(r(188))}function Ye(m){var x=m.alternate;if(!x){if(x=Se(m),x===null)throw Error(r(188));return x!==m?null:m}for(var E=m,O=x;;){var K=E.return;if(K===null)break;var ne=K.alternate;if(ne===null){if(O=K.return,O!==null){E=O;continue}break}if(K.child===ne.child){for(ne=K.child;ne;){if(ne===E)return it(K),m;if(ne===O)return it(K),x;ne=ne.sibling}throw Error(r(188))}if(E.return!==O.return)E=K,O=ne;else{for(var be=!1,Ie=K.child;Ie;){if(Ie===E){be=!0,E=K,O=ne;break}if(Ie===O){be=!0,O=K,E=ne;break}Ie=Ie.sibling}if(!be){for(Ie=ne.child;Ie;){if(Ie===E){be=!0,E=ne,O=K;break}if(Ie===O){be=!0,O=ne,E=K;break}Ie=Ie.sibling}if(!be)throw Error(r(189))}}if(E.alternate!==O)throw Error(r(190))}if(E.tag!==3)throw Error(r(188));return E.stateNode.current===E?m:x}function de(m){return m=Ye(m),m!==null?ve(m):null}function ve(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var x=ve(m);if(x!==null)return x;m=m.sibling}return null}var Me=t.unstable_scheduleCallback,Oe=t.unstable_cancelCallback,nt=t.unstable_shouldYield,bt=t.unstable_requestPaint,At=t.unstable_now,cr=t.unstable_getCurrentPriorityLevel,pt=t.unstable_ImmediatePriority,zt=t.unstable_UserBlockingPriority,xr=t.unstable_NormalPriority,Ir=t.unstable_LowPriority,$r=t.unstable_IdlePriority,mn=null,Gr=null;function zr(m){if(Gr&&typeof Gr.onCommitFiberRoot=="function")try{Gr.onCommitFiberRoot(mn,m,void 0,(m.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:jn,xn=Math.log,Lr=Math.LN2;function jn(m){return m>>>=0,m===0?32:31-(xn(m)/Lr|0)|0}var Ln=64,ya=4194304;function On(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function Te(m,x){var E=m.pendingLanes;if(E===0)return 0;var O=0,K=m.suspendedLanes,ne=m.pingedLanes,be=E&268435455;if(be!==0){var Ie=be&~K;Ie!==0?O=On(Ie):(ne&=be,ne!==0&&(O=On(ne)))}else be=E&~K,be!==0?O=On(be):ne!==0&&(O=On(ne));if(O===0)return 0;if(x!==0&&x!==O&&(x&K)===0&&(K=O&-O,ne=x&-x,K>=ne||K===16&&(ne&4194240)!==0))return x;if((O&4)!==0&&(O|=E&16),x=m.entangledLanes,x!==0)for(m=m.entanglements,x&=O;0<x;)E=31-Xt(x),K=1<<E,O|=m[E],x&=~K;return O}function Tt(m,x){switch(m){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sr(m,x){for(var E=m.suspendedLanes,O=m.pingedLanes,K=m.expirationTimes,ne=m.pendingLanes;0<ne;){var be=31-Xt(ne),Ie=1<<be,Ve=K[be];Ve===-1?((Ie&E)===0||(Ie&O)!==0)&&(K[be]=Tt(Ie,x)):Ve<=x&&(m.expiredLanes|=Ie),ne&=~Ie}}function Dr(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function Yn(){var m=Ln;return Ln<<=1,(Ln&4194240)===0&&(Ln=64),m}function Pn(m){for(var x=[],E=0;31>E;E++)x.push(m);return x}function us(m,x,E){m.pendingLanes|=x,x!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,x=31-Xt(x),m[x]=E}function qs(m,x){var E=m.pendingLanes&~x;m.pendingLanes=x,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=x,m.mutableReadLanes&=x,m.entangledLanes&=x,x=m.entanglements;var O=m.eventTimes;for(m=m.expirationTimes;0<E;){var K=31-Xt(E),ne=1<<K;x[K]=0,O[K]=-1,m[K]=-1,E&=~ne}}function fi(m,x){var E=m.entangledLanes|=x;for(m=m.entanglements;E;){var O=31-Xt(E),K=1<<O;K&x|m[O]&x&&(m[O]|=x),E&=~K}}var dn=0;function vl(m){return m&=-m,1<m?4<m?(m&268435455)!==0?16:536870912:4:1}var $e,Pt,Re,qe,Lt,yt=!1,yr=[],Nt=null,Vr=null,Dn=null,We=new Map,fr=new Map,sr=[],xs="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yn(m,x){switch(m){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":We.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":fr.delete(x.pointerId)}}function on(m,x,E,O,K,ne){return m===null||m.nativeEvent!==ne?(m={blockedOn:x,domEventName:E,eventSystemFlags:O,nativeEvent:ne,targetContainers:[K]},x!==null&&(x=Ah(x),x!==null&&Pt(x)),m):(m.eventSystemFlags|=O,x=m.targetContainers,K!==null&&x.indexOf(K)===-1&&x.push(K),m)}function vn(m,x,E,O,K){switch(x){case"focusin":return Nt=on(Nt,m,x,E,O,K),!0;case"dragenter":return Vr=on(Vr,m,x,E,O,K),!0;case"mouseover":return Dn=on(Dn,m,x,E,O,K),!0;case"pointerover":var ne=K.pointerId;return We.set(ne,on(We.get(ne)||null,m,x,E,O,K)),!0;case"gotpointercapture":return ne=K.pointerId,fr.set(ne,on(fr.get(ne)||null,m,x,E,O,K)),!0}return!1}function kn(m){var x=Cu(m.target);if(x!==null){var E=Se(x);if(E!==null){if(x=E.tag,x===13){if(x=ze(E),x!==null){m.blockedOn=x,Lt(m.priority,function(){Re(E)});return}}else if(x===3&&E.stateNode.current.memoizedState.isDehydrated){m.blockedOn=E.tag===3?E.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Kl(m){if(m.blockedOn!==null)return!1;for(var x=m.targetContainers;0<x.length;){var E=fg(m.domEventName,m.eventSystemFlags,x[0],m.nativeEvent);if(E===null){E=m.nativeEvent;var O=new E.constructor(E.type,E);lr=O,E.target.dispatchEvent(O),lr=null}else return x=Ah(E),x!==null&&Pt(x),m.blockedOn=E,!1;x.shift()}return!0}function Fi(m,x,E){Kl(m)&&E.delete(x)}function gh(){yt=!1,Nt!==null&&Kl(Nt)&&(Nt=null),Vr!==null&&Kl(Vr)&&(Vr=null),Dn!==null&&Kl(Dn)&&(Dn=null),We.forEach(Fi),fr.forEach(Fi)}function pu(m,x){m.blockedOn===x&&(m.blockedOn=null,yt||(yt=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,gh)))}function no(m){function x(K){return pu(K,m)}if(0<yr.length){pu(yr[0],m);for(var E=1;E<yr.length;E++){var O=yr[E];O.blockedOn===m&&(O.blockedOn=null)}}for(Nt!==null&&pu(Nt,m),Vr!==null&&pu(Vr,m),Dn!==null&&pu(Dn,m),We.forEach(x),fr.forEach(x),E=0;E<sr.length;E++)O=sr[E],O.blockedOn===m&&(O.blockedOn=null);for(;0<sr.length&&(E=sr[0],E.blockedOn===null);)kn(E),E.blockedOn===null&&sr.shift()}var D0=T.ReactCurrentBatchConfig,dg=!0;function bl(m,x,E,O){var K=dn,ne=D0.transition;D0.transition=null;try{dn=1,R0(m,x,E,O)}finally{dn=K,D0.transition=ne}}function Ic(m,x,E,O){var K=dn,ne=D0.transition;D0.transition=null;try{dn=4,R0(m,x,E,O)}finally{dn=K,D0.transition=ne}}function R0(m,x,E,O){if(dg){var K=fg(m,x,E,O);if(K===null)Ng(m,x,O,I0,E),yn(m,O);else if(vn(K,m,x,E,O))O.stopPropagation();else if(yn(m,O),x&4&&-1<xs.indexOf(m)){for(;K!==null;){var ne=Ah(K);if(ne!==null&&$e(ne),ne=fg(m,x,E,O),ne===null&&Ng(m,x,O,I0,E),ne===K)break;K=ne}K!==null&&O.stopPropagation()}else Ng(m,x,O,null,E)}}var I0=null;function fg(m,x,E,O){if(I0=null,m=Er(O),m=Cu(m),m!==null)if(x=Se(m),x===null)m=null;else if(E=x.tag,E===13){if(m=ze(x),m!==null)return m;m=null}else if(E===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;m=null}else x!==m&&(m=null);return I0=m,null}function K2(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cr()){case pt:return 1;case zt:return 4;case xr:case Ir:return 16;case $r:return 536870912;default:return 16}default:return 16}}var Ya=null,xu=null,Lc=null;function ph(){if(Lc)return Lc;var m,x=xu,E=x.length,O,K="value"in Ya?Ya.value:Ya.textContent,ne=K.length;for(m=0;m<E&&x[m]===K[m];m++);var be=E-m;for(O=1;O<=be&&x[E-O]===K[ne-O];O++);return Lc=K.slice(m,1<O?1-O:void 0)}function dd(m){var x=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&x===13&&(m=13)):m=x,m===10&&(m=13),32<=m||m===13?m:0}function Mi(){return!0}function Co(){return!1}function va(m){function x(E,O,K,ne,be){this._reactName=E,this._targetInst=K,this.type=O,this.nativeEvent=ne,this.target=be,this.currentTarget=null;for(var Ie in m)m.hasOwnProperty(Ie)&&(E=m[Ie],this[Ie]=E?E(ne):ne[Ie]);return this.isDefaultPrevented=(ne.defaultPrevented!=null?ne.defaultPrevented:ne.returnValue===!1)?Mi:Co,this.isPropagationStopped=Co,this}return B(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var E=this.nativeEvent;E&&(E.preventDefault?E.preventDefault():typeof E.returnValue!="unknown"&&(E.returnValue=!1),this.isDefaultPrevented=Mi)},stopPropagation:function(){var E=this.nativeEvent;E&&(E.stopPropagation?E.stopPropagation():typeof E.cancelBubble!="unknown"&&(E.cancelBubble=!0),this.isPropagationStopped=Mi)},persist:function(){},isPersistent:Mi}),x}var so={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wl=va(so),_l=B({},so,{view:0,detail:0}),Y2=va(_l),xh,yh,Xa,Oi=B({},_l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hd,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Xa&&(Xa&&m.type==="mousemove"?(xh=m.screenX-Xa.screenX,yh=m.screenY-Xa.screenY):yh=xh=0,Xa=m),xh)},movementY:function(m){return"movementY"in m?m.movementY:yh}}),ys=va(Oi),vh=B({},Oi,{dataTransfer:0}),Sl=va(vh),X2=B({},_l,{relatedTarget:0}),hg=va(X2),z1=B({},so,{animationName:0,elapsedTime:0,pseudoElement:0}),W1=va(z1),J2=B({},so,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),mg=va(J2),Q2=B({},so,{data:0}),fd=va(Q2),H1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QS(m){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(m):(m=gg[m])?!!x[m]:!1}function hd(){return QS}var pg=B({},_l,{key:function(m){if(m.key){var x=H1[m.key]||m.key;if(x!=="Unidentified")return x}return m.type==="keypress"?(m=dd(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?JS[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hd,charCode:function(m){return m.type==="keypress"?dd(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?dd(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),Z2=va(pg),eb=B({},Oi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),md=va(eb),tb=B({},_l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hd}),xg=va(tb),yg=B({},so,{propertyName:0,elapsedTime:0,pseudoElement:0}),L0=va(yg),G1=B({},Oi,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),V1=va(G1),rb=[9,13,27,32],bh=o&&"CompositionEvent"in window,gd=null;o&&"documentMode"in document&&(gd=document.documentMode);var B0=o&&"TextEvent"in window&&!gd,To=o&&(!bh||gd&&8<gd&&11>=gd),yu=" ",vg=!1;function q1(m,x){switch(m){case"keyup":return rb.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kl(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var Eo=!1;function K1(m,x){switch(m){case"compositionend":return kl(x);case"keypress":return x.which!==32?null:(vg=!0,yu);case"textInput":return m=x.data,m===yu&&vg?null:m;default:return null}}function nb(m,x){if(Eo)return m==="compositionend"||!bh&&q1(m,x)?(m=ph(),Lc=xu=Ya=null,Eo=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return To&&x.locale!=="ko"?null:x.data;default:return null}}var Bc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $c(m){var x=m&&m.nodeName&&m.nodeName.toLowerCase();return x==="input"?!!Bc[m.type]:x==="textarea"}function wh(m,x,E,O){at(O),x=Ag(x,"onChange"),0<x.length&&(E=new wl("onChange","change",null,E,O),m.push({event:E,listeners:x}))}var $0=null,vu=null;function sb(m){ax(m,0)}function bu(m){var x=wa(m);if(se(x))return m}function Qo(m,x){if(m==="change")return x}var U0=!1;if(o){var wu;if(o){var Zo="oninput"in document;if(!Zo){var bg=document.createElement("div");bg.setAttribute("oninput","return;"),Zo=typeof bg.oninput=="function"}wu=Zo}else wu=!1;U0=wu&&(!document.documentMode||9<document.documentMode)}function pd(){$0&&($0.detachEvent("onpropertychange",Y1),vu=$0=null)}function Y1(m){if(m.propertyName==="value"&&bu(vu)){var x=[];wh(x,vu,m,Er(m)),ct(sb,x)}}function X1(m,x,E){m==="focusin"?(pd(),$0=x,vu=E,$0.attachEvent("onpropertychange",Y1)):m==="focusout"&&pd()}function As(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return bu(vu)}function wg(m,x){if(m==="click")return bu(x)}function J1(m,x){if(m==="input"||m==="change")return bu(x)}function Q1(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var ao=typeof Object.is=="function"?Object.is:Q1;function xd(m,x){if(ao(m,x))return!0;if(typeof m!="object"||m===null||typeof x!="object"||x===null)return!1;var E=Object.keys(m),O=Object.keys(x);if(E.length!==O.length)return!1;for(O=0;O<E.length;O++){var K=E[O];if(!c.call(x,K)||!ao(m[K],x[K]))return!1}return!0}function _u(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function Ss(m,x){var E=_u(m);m=0;for(var O;E;){if(E.nodeType===3){if(O=m+E.textContent.length,m<=x&&O>=x)return{node:E,offset:x-m};m=O}e:{for(;E;){if(E.nextSibling){E=E.nextSibling;break e}E=E.parentNode}E=void 0}E=_u(E)}}function na(m,x){return m&&x?m===x?!0:m&&m.nodeType===3?!1:x&&x.nodeType===3?na(m,x.parentNode):"contains"in m?m.contains(x):m.compareDocumentPosition?!!(m.compareDocumentPosition(x)&16):!1:!1}function ba(){for(var m=window,x=De();x instanceof m.HTMLIFrameElement;){try{var E=typeof x.contentWindow.location.href=="string"}catch{E=!1}if(E)m=x.contentWindow;else break;x=De(m.document)}return x}function z0(m){var x=m&&m.nodeName&&m.nodeName.toLowerCase();return x&&(x==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||x==="textarea"||m.contentEditable==="true")}function _h(m){var x=ba(),E=m.focusedElem,O=m.selectionRange;if(x!==E&&E&&E.ownerDocument&&na(E.ownerDocument.documentElement,E)){if(O!==null&&z0(E)){if(x=O.start,m=O.end,m===void 0&&(m=x),"selectionStart"in E)E.selectionStart=x,E.selectionEnd=Math.min(m,E.value.length);else if(m=(x=E.ownerDocument||document)&&x.defaultView||window,m.getSelection){m=m.getSelection();var K=E.textContent.length,ne=Math.min(O.start,K);O=O.end===void 0?ne:Math.min(O.end,K),!m.extend&&ne>O&&(K=O,O=ne,ne=K),K=Ss(E,ne);var be=Ss(E,O);K&&be&&(m.rangeCount!==1||m.anchorNode!==K.node||m.anchorOffset!==K.offset||m.focusNode!==be.node||m.focusOffset!==be.offset)&&(x=x.createRange(),x.setStart(K.node,K.offset),m.removeAllRanges(),ne>O?(m.addRange(x),m.extend(be.node,be.offset)):(x.setEnd(be.node,be.offset),m.addRange(x)))}}for(x=[],m=E;m=m.parentNode;)m.nodeType===1&&x.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<x.length;E++)m=x[E],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var Sh=o&&"documentMode"in document&&11>=document.documentMode,W0=null,Ia=null,yd=null,kh=!1;function _g(m,x,E){var O=E.window===E?E.document:E.nodeType===9?E:E.ownerDocument;kh||W0==null||W0!==De(O)||(O=W0,"selectionStart"in O&&z0(O)?O={start:O.selectionStart,end:O.selectionEnd}:(O=(O.ownerDocument&&O.ownerDocument.defaultView||window).getSelection(),O={anchorNode:O.anchorNode,anchorOffset:O.anchorOffset,focusNode:O.focusNode,focusOffset:O.focusOffset}),yd&&xd(yd,O)||(yd=O,O=Ag(Ia,"onSelect"),0<O.length&&(x=new wl("onSelect","select",null,x,E),m.push({event:x,listeners:O}),x.target=W0)))}function No(m,x){var E={};return E[m.toLowerCase()]=x.toLowerCase(),E["Webkit"+m]="webkit"+x,E["Moz"+m]="moz"+x,E}var Ja={animationend:No("Animation","AnimationEnd"),animationiteration:No("Animation","AnimationIteration"),animationstart:No("Animation","AnimationStart"),transitionend:No("Transition","TransitionEnd")},vd={},Sg={};o&&(Sg=document.createElement("div").style,"AnimationEvent"in window||(delete Ja.animationend.animation,delete Ja.animationiteration.animation,delete Ja.animationstart.animation),"TransitionEvent"in window||delete Ja.transitionend.transition);function H0(m){if(vd[m])return vd[m];if(!Ja[m])return m;var x=Ja[m],E;for(E in x)if(x.hasOwnProperty(E)&&E in Sg)return vd[m]=x[E];return m}var Z1=H0("animationend"),ex=H0("animationiteration"),tx=H0("animationstart"),rx=H0("transitionend"),nx=new Map,sx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Uc(m,x){nx.set(m,x),a(x,[m])}for(var kg=0;kg<sx.length;kg++){var bd=sx[kg],ab=bd.toLowerCase(),Cg=bd[0].toUpperCase()+bd.slice(1);Uc(ab,"on"+Cg)}Uc(Z1,"onAnimationEnd"),Uc(ex,"onAnimationIteration"),Uc(tx,"onAnimationStart"),Uc("dblclick","onDoubleClick"),Uc("focusin","onFocus"),Uc("focusout","onBlur"),Uc(rx,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ib=new Set("cancel close invalid load scroll toggle".split(" ").concat(Su));function Tg(m,x,E){var O=m.type||"unknown-event";m.currentTarget=E,ge(O,x,void 0,m),m.currentTarget=null}function ax(m,x){x=(x&4)!==0;for(var E=0;E<m.length;E++){var O=m[E],K=O.event;O=O.listeners;e:{var ne=void 0;if(x)for(var be=O.length-1;0<=be;be--){var Ie=O[be],Ve=Ie.instance,St=Ie.currentTarget;if(Ie=Ie.listener,Ve!==ne&&K.isPropagationStopped())break e;Tg(K,Ie,St),ne=Ve}else for(be=0;be<O.length;be++){if(Ie=O[be],Ve=Ie.instance,St=Ie.currentTarget,Ie=Ie.listener,Ve!==ne&&K.isPropagationStopped())break e;Tg(K,Ie,St),ne=Ve}}}if(pe)throw m=Ne,pe=!1,Ne=null,m}function ds(m,x){var E=x[Pg];E===void 0&&(E=x[Pg]=new Set);var O=m+"__bubble";E.has(O)||(ix(x,m,2,!1),E.add(O))}function Eg(m,x,E){var O=0;x&&(O|=4),ix(E,m,O,x)}var Ch="_reactListening"+Math.random().toString(36).slice(2);function wd(m){if(!m[Ch]){m[Ch]=!0,n.forEach(function(E){E!=="selectionchange"&&(ib.has(E)||Eg(E,!1,m),Eg(E,!0,m))});var x=m.nodeType===9?m:m.ownerDocument;x===null||x[Ch]||(x[Ch]=!0,Eg("selectionchange",!1,x))}}function ix(m,x,E,O){switch(K2(x)){case 1:var K=bl;break;case 4:K=Ic;break;default:K=R0}E=K.bind(null,x,E,m),K=void 0,!rr||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(K=!0),O?K!==void 0?m.addEventListener(x,E,{capture:!0,passive:K}):m.addEventListener(x,E,!0):K!==void 0?m.addEventListener(x,E,{passive:K}):m.addEventListener(x,E,!1)}function Ng(m,x,E,O,K){var ne=O;if((x&1)===0&&(x&2)===0&&O!==null)e:for(;;){if(O===null)return;var be=O.tag;if(be===3||be===4){var Ie=O.stateNode.containerInfo;if(Ie===K||Ie.nodeType===8&&Ie.parentNode===K)break;if(be===4)for(be=O.return;be!==null;){var Ve=be.tag;if((Ve===3||Ve===4)&&(Ve=be.stateNode.containerInfo,Ve===K||Ve.nodeType===8&&Ve.parentNode===K))return;be=be.return}for(;Ie!==null;){if(be=Cu(Ie),be===null)return;if(Ve=be.tag,Ve===5||Ve===6){O=ne=be;continue e}Ie=Ie.parentNode}}O=O.return}ct(function(){var St=ne,Jt=Er(E),er=[];e:{var Kt=nx.get(m);if(Kt!==void 0){var Nr=wl,Rr=m;switch(m){case"keypress":if(dd(E)===0)break e;case"keydown":case"keyup":Nr=Z2;break;case"focusin":Rr="focus",Nr=hg;break;case"focusout":Rr="blur",Nr=hg;break;case"beforeblur":case"afterblur":Nr=hg;break;case"click":if(E.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nr=ys;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nr=Sl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nr=xg;break;case Z1:case ex:case tx:Nr=W1;break;case rx:Nr=L0;break;case"scroll":Nr=Y2;break;case"wheel":Nr=V1;break;case"copy":case"cut":case"paste":Nr=mg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nr=md}var Br=(x&4)!==0,Ca=!Br&&m==="scroll",ft=Br?Kt!==null?Kt+"Capture":null:Kt;Br=[];for(var et=St,xt;et!==null;){xt=et;var or=xt.stateNode;if(xt.tag===5&&or!==null&&(xt=or,ft!==null&&(or=Qt(et,ft),or!=null&&Br.push(G0(et,or,xt)))),Ca)break;et=et.return}0<Br.length&&(Kt=new Nr(Kt,Rr,null,E,Jt),er.push({event:Kt,listeners:Br}))}}if((x&7)===0){e:{if(Kt=m==="mouseover"||m==="pointerover",Nr=m==="mouseout"||m==="pointerout",Kt&&E!==lr&&(Rr=E.relatedTarget||E.fromElement)&&(Cu(Rr)||Rr[Xl]))break e;if((Nr||Kt)&&(Kt=Jt.window===Jt?Jt:(Kt=Jt.ownerDocument)?Kt.defaultView||Kt.parentWindow:window,Nr?(Rr=E.relatedTarget||E.toElement,Nr=St,Rr=Rr?Cu(Rr):null,Rr!==null&&(Ca=Se(Rr),Rr!==Ca||Rr.tag!==5&&Rr.tag!==6)&&(Rr=null)):(Nr=null,Rr=St),Nr!==Rr)){if(Br=ys,or="onMouseLeave",ft="onMouseEnter",et="mouse",(m==="pointerout"||m==="pointerover")&&(Br=md,or="onPointerLeave",ft="onPointerEnter",et="pointer"),Ca=Nr==null?Kt:wa(Nr),xt=Rr==null?Kt:wa(Rr),Kt=new Br(or,et+"leave",Nr,E,Jt),Kt.target=Ca,Kt.relatedTarget=xt,or=null,Cu(Jt)===St&&(Br=new Br(ft,et+"enter",Rr,E,Jt),Br.target=xt,Br.relatedTarget=Ca,or=Br),Ca=or,Nr&&Rr)t:{for(Br=Nr,ft=Rr,et=0,xt=Br;xt;xt=_d(xt))et++;for(xt=0,or=ft;or;or=_d(or))xt++;for(;0<et-xt;)Br=_d(Br),et--;for(;0<xt-et;)ft=_d(ft),xt--;for(;et--;){if(Br===ft||ft!==null&&Br===ft.alternate)break t;Br=_d(Br),ft=_d(ft)}Br=null}else Br=null;Nr!==null&&ob(er,Kt,Nr,Br,!1),Rr!==null&&Ca!==null&&ob(er,Ca,Rr,Br,!0)}}e:{if(Kt=St?wa(St):window,Nr=Kt.nodeName&&Kt.nodeName.toLowerCase(),Nr==="select"||Nr==="input"&&Kt.type==="file")var Ur=Qo;else if($c(Kt))if(U0)Ur=J1;else{Ur=As;var qr=X1}else(Nr=Kt.nodeName)&&Nr.toLowerCase()==="input"&&(Kt.type==="checkbox"||Kt.type==="radio")&&(Ur=wg);if(Ur&&(Ur=Ur(m,St))){wh(er,Ur,E,Jt);break e}qr&&qr(m,Kt,St),m==="focusout"&&(qr=Kt._wrapperState)&&qr.controlled&&Kt.type==="number"&&Pe(Kt,"number",Kt.value)}switch(qr=St?wa(St):window,m){case"focusin":($c(qr)||qr.contentEditable==="true")&&(W0=qr,Ia=St,yd=null);break;case"focusout":yd=Ia=W0=null;break;case"mousedown":kh=!0;break;case"contextmenu":case"mouseup":case"dragend":kh=!1,_g(er,E,Jt);break;case"selectionchange":if(Sh)break;case"keydown":case"keyup":_g(er,E,Jt)}var Kr;if(bh)e:{switch(m){case"compositionstart":var ln="onCompositionStart";break e;case"compositionend":ln="onCompositionEnd";break e;case"compositionupdate":ln="onCompositionUpdate";break e}ln=void 0}else Eo?q1(m,E)&&(ln="onCompositionEnd"):m==="keydown"&&E.keyCode===229&&(ln="onCompositionStart");ln&&(To&&E.locale!=="ko"&&(Eo||ln!=="onCompositionStart"?ln==="onCompositionEnd"&&Eo&&(Kr=ph()):(Ya=Jt,xu="value"in Ya?Ya.value:Ya.textContent,Eo=!0)),qr=Ag(St,ln),0<qr.length&&(ln=new fd(ln,m,null,E,Jt),er.push({event:ln,listeners:qr}),Kr?ln.data=Kr:(Kr=kl(E),Kr!==null&&(ln.data=Kr)))),(Kr=B0?K1(m,E):nb(m,E))&&(St=Ag(St,"onBeforeInput"),0<St.length&&(Jt=new fd("onBeforeInput","beforeinput",null,E,Jt),er.push({event:Jt,listeners:St}),Jt.data=Kr))}ax(er,x)})}function G0(m,x,E){return{instance:m,listener:x,currentTarget:E}}function Ag(m,x){for(var E=x+"Capture",O=[];m!==null;){var K=m,ne=K.stateNode;K.tag===5&&ne!==null&&(K=ne,ne=Qt(m,E),ne!=null&&O.unshift(G0(m,ne,K)),ne=Qt(m,x),ne!=null&&O.push(G0(m,ne,K))),m=m.return}return O}function _d(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function ob(m,x,E,O,K){for(var ne=x._reactName,be=[];E!==null&&E!==O;){var Ie=E,Ve=Ie.alternate,St=Ie.stateNode;if(Ve!==null&&Ve===O)break;Ie.tag===5&&St!==null&&(Ie=St,K?(Ve=Qt(E,ne),Ve!=null&&be.unshift(G0(E,Ve,Ie))):K||(Ve=Qt(E,ne),Ve!=null&&be.push(G0(E,Ve,Ie)))),E=E.return}be.length!==0&&m.push({event:x,listeners:be})}var ZS=/\r\n?/g,lb=/\u0000|\uFFFD/g;function ox(m){return(typeof m=="string"?m:""+m).replace(ZS,`
`).replace(lb,"")}function Th(m,x,E){if(x=ox(x),ox(m)!==x&&E)throw Error(r(425))}function Sd(){}var lx=null,cx=null;function ux(m,x){return m==="textarea"||m==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var Ao=typeof setTimeout=="function"?setTimeout:void 0,dx=typeof clearTimeout=="function"?clearTimeout:void 0,Eh=typeof Promise=="function"?Promise:void 0,cb=typeof queueMicrotask=="function"?queueMicrotask:typeof Eh<"u"?function(m){return Eh.resolve(null).then(m).catch(ub)}:Ao;function ub(m){setTimeout(function(){throw m})}function jg(m,x){var E=x,O=0;do{var K=E.nextSibling;if(m.removeChild(E),K&&K.nodeType===8)if(E=K.data,E==="/$"){if(O===0){m.removeChild(K),no(x);return}O--}else E!=="$"&&E!=="$?"&&E!=="$!"||O++;E=K}while(E);no(x)}function Yl(m){for(;m!=null;m=m.nextSibling){var x=m.nodeType;if(x===1||x===3)break;if(x===8){if(x=m.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return m}function kd(m){m=m.previousSibling;for(var x=0;m;){if(m.nodeType===8){var E=m.data;if(E==="$"||E==="$!"||E==="$?"){if(x===0)return m;x--}else E==="/$"&&x++}m=m.previousSibling}return null}var ku=Math.random().toString(36).slice(2),el="__reactFiber$"+ku,Nh="__reactProps$"+ku,Xl="__reactContainer$"+ku,Pg="__reactEvents$"+ku,db="__reactListeners$"+ku,fb="__reactHandles$"+ku;function Cu(m){var x=m[el];if(x)return x;for(var E=m.parentNode;E;){if(x=E[Xl]||E[el]){if(E=x.alternate,x.child!==null||E!==null&&E.child!==null)for(m=kd(m);m!==null;){if(E=m[el])return E;m=kd(m)}return x}m=E,E=m.parentNode}return null}function Ah(m){return m=m[el]||m[Xl],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function wa(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(r(33))}function La(m){return m[Nh]||null}var Fg=[],Cd=-1;function zc(m){return{current:m}}function fs(m){0>Cd||(m.current=Fg[Cd],Fg[Cd]=null,Cd--)}function ts(m,x){Cd++,Fg[Cd]=m.current,m.current=x}var Jl={},Qa=zc(Jl),hi=zc(!1),Tu=Jl;function Td(m,x){var E=m.type.contextTypes;if(!E)return Jl;var O=m.stateNode;if(O&&O.__reactInternalMemoizedUnmaskedChildContext===x)return O.__reactInternalMemoizedMaskedChildContext;var K={},ne;for(ne in E)K[ne]=x[ne];return O&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=x,m.__reactInternalMemoizedMaskedChildContext=K),K}function mi(m){return m=m.childContextTypes,m!=null}function V0(){fs(hi),fs(Qa)}function fx(m,x,E){if(Qa.current!==Jl)throw Error(r(168));ts(Qa,x),ts(hi,E)}function Mg(m,x,E){var O=m.stateNode;if(x=x.childContextTypes,typeof O.getChildContext!="function")return E;O=O.getChildContext();for(var K in O)if(!(K in x))throw Error(r(108,Q(m)||"Unknown",K));return B({},E,O)}function Ed(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||Jl,Tu=Qa.current,ts(Qa,m),ts(hi,hi.current),!0}function hb(m,x,E){var O=m.stateNode;if(!O)throw Error(r(169));E?(m=Mg(m,x,Tu),O.__reactInternalMemoizedMergedChildContext=m,fs(hi),fs(Qa),ts(Qa,m)):fs(hi),ts(hi,E)}var Ql=null,q0=!1,Og=!1;function jh(m){Ql===null?Ql=[m]:Ql.push(m)}function Wc(m){q0=!0,jh(m)}function Eu(){if(!Og&&Ql!==null){Og=!0;var m=0,x=dn;try{var E=Ql;for(dn=1;m<E.length;m++){var O=E[m];do O=O(!0);while(O!==null)}Ql=null,q0=!1}catch(K){throw Ql!==null&&(Ql=Ql.slice(m+1)),Me(pt,Eu),K}finally{dn=x,Og=!1}}return null}var Di=[],Nd=0,Nu=null,Au=0,Ri=[],Ii=0,ju=null,jo=1,ks="";function Ad(m,x){Di[Nd++]=Au,Di[Nd++]=Nu,Nu=m,Au=x}function mb(m,x,E){Ri[Ii++]=jo,Ri[Ii++]=ks,Ri[Ii++]=ju,ju=m;var O=jo;m=ks;var K=32-Xt(O)-1;O&=~(1<<K),E+=1;var ne=32-Xt(x)+K;if(30<ne){var be=K-K%5;ne=(O&(1<<be)-1).toString(32),O>>=be,K-=be,jo=1<<32-Xt(x)+K|E<<K|O,ks=ne+m}else jo=1<<ne|E<<K|O,ks=m}function K0(m){m.return!==null&&(Ad(m,1),mb(m,1,0))}function Ba(m){for(;m===Nu;)Nu=Di[--Nd],Di[Nd]=null,Au=Di[--Nd],Di[Nd]=null;for(;m===ju;)ju=Ri[--Ii],Ri[Ii]=null,ks=Ri[--Ii],Ri[Ii]=null,jo=Ri[--Ii],Ri[Ii]=null}var Po=null,vr=null,Xn=!1,Fo=null;function hx(m,x){var E=ac(5,null,null,0);E.elementType="DELETED",E.stateNode=x,E.return=m,x=m.deletions,x===null?(m.deletions=[E],m.flags|=16):x.push(E)}function gb(m,x){switch(m.tag){case 5:var E=m.type;return x=x.nodeType!==1||E.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(m.stateNode=x,Po=m,vr=Yl(x.firstChild),!0):!1;case 6:return x=m.pendingProps===""||x.nodeType!==3?null:x,x!==null?(m.stateNode=x,Po=m,vr=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(E=ju!==null?{id:jo,overflow:ks}:null,m.memoizedState={dehydrated:x,treeContext:E,retryLane:1073741824},E=ac(18,null,null,0),E.stateNode=x,E.return=m,m.child=E,Po=m,vr=null,!0):!1;default:return!1}}function jd(m){return(m.mode&1)!==0&&(m.flags&128)===0}function Y0(m){if(Xn){var x=vr;if(x){var E=x;if(!gb(m,x)){if(jd(m))throw Error(r(418));x=Yl(E.nextSibling);var O=Po;x&&gb(m,x)?hx(O,E):(m.flags=m.flags&-4097|2,Xn=!1,Po=m)}}else{if(jd(m))throw Error(r(418));m.flags=m.flags&-4097|2,Xn=!1,Po=m}}}function Dg(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;Po=m}function Ph(m){if(m!==Po)return!1;if(!Xn)return Dg(m),Xn=!0,!1;var x;if((x=m.tag!==3)&&!(x=m.tag!==5)&&(x=m.type,x=x!=="head"&&x!=="body"&&!ux(m.type,m.memoizedProps)),x&&(x=vr)){if(jd(m))throw mx(),Error(r(418));for(;x;)hx(m,x),x=Yl(x.nextSibling)}if(Dg(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));e:{for(m=m.nextSibling,x=0;m;){if(m.nodeType===8){var E=m.data;if(E==="/$"){if(x===0){vr=Yl(m.nextSibling);break e}x--}else E!=="$"&&E!=="$!"&&E!=="$?"||x++}m=m.nextSibling}vr=null}}else vr=Po?Yl(m.stateNode.nextSibling):null;return!0}function mx(){for(var m=vr;m;)m=Yl(m.nextSibling)}function Pd(){vr=Po=null,Xn=!1}function Fh(m){Fo===null?Fo=[m]:Fo.push(m)}var gx=T.ReactCurrentBatchConfig;function Ks(m,x,E){if(m=E.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(E._owner){if(E=E._owner,E){if(E.tag!==1)throw Error(r(309));var O=E.stateNode}if(!O)throw Error(r(147,m));var K=O,ne=""+m;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===ne?x.ref:(x=function(be){var Ie=K.refs;be===null?delete Ie[ne]:Ie[ne]=be},x._stringRef=ne,x)}if(typeof m!="string")throw Error(r(284));if(!E._owner)throw Error(r(290,m))}return m}function io(m,x){throw m=Object.prototype.toString.call(x),Error(r(31,m==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":m))}function Cl(m){var x=m._init;return x(m._payload)}function Rg(m){function x(ft,et){if(m){var xt=ft.deletions;xt===null?(ft.deletions=[et],ft.flags|=16):xt.push(et)}}function E(ft,et){if(!m)return null;for(;et!==null;)x(ft,et),et=et.sibling;return null}function O(ft,et){for(ft=new Map;et!==null;)et.key!==null?ft.set(et.key,et):ft.set(et.index,et),et=et.sibling;return ft}function K(ft,et){return ft=pf(ft,et),ft.index=0,ft.sibling=null,ft}function ne(ft,et,xt){return ft.index=xt,m?(xt=ft.alternate,xt!==null?(xt=xt.index,xt<et?(ft.flags|=2,et):xt):(ft.flags|=2,et)):(ft.flags|=1048576,et)}function be(ft){return m&&ft.alternate===null&&(ft.flags|=2),ft}function Ie(ft,et,xt,or){return et===null||et.tag!==6?(et=b3(xt,ft.mode,or),et.return=ft,et):(et=K(et,xt),et.return=ft,et)}function Ve(ft,et,xt,or){var Ur=xt.type;return Ur===P?Jt(ft,et,xt.props.children,or,xt.key):et!==null&&(et.elementType===Ur||typeof Ur=="object"&&Ur!==null&&Ur.$$typeof===ue&&Cl(Ur)===et.type)?(or=K(et,xt.props),or.ref=Ks(ft,et,xt),or.return=ft,or):(or=Rb(xt.type,xt.key,xt.props,null,ft.mode,or),or.ref=Ks(ft,et,xt),or.return=ft,or)}function St(ft,et,xt,or){return et===null||et.tag!==4||et.stateNode.containerInfo!==xt.containerInfo||et.stateNode.implementation!==xt.implementation?(et=w3(xt,ft.mode,or),et.return=ft,et):(et=K(et,xt.children||[]),et.return=ft,et)}function Jt(ft,et,xt,or,Ur){return et===null||et.tag!==7?(et=Wh(xt,ft.mode,or,Ur),et.return=ft,et):(et=K(et,xt),et.return=ft,et)}function er(ft,et,xt){if(typeof et=="string"&&et!==""||typeof et=="number")return et=b3(""+et,ft.mode,xt),et.return=ft,et;if(typeof et=="object"&&et!==null){switch(et.$$typeof){case N:return xt=Rb(et.type,et.key,et.props,null,ft.mode,xt),xt.ref=Ks(ft,null,et),xt.return=ft,xt;case A:return et=w3(et,ft.mode,xt),et.return=ft,et;case ue:var or=et._init;return er(ft,or(et._payload),xt)}if(je(et)||I(et))return et=Wh(et,ft.mode,xt,null),et.return=ft,et;io(ft,et)}return null}function Kt(ft,et,xt,or){var Ur=et!==null?et.key:null;if(typeof xt=="string"&&xt!==""||typeof xt=="number")return Ur!==null?null:Ie(ft,et,""+xt,or);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case N:return xt.key===Ur?Ve(ft,et,xt,or):null;case A:return xt.key===Ur?St(ft,et,xt,or):null;case ue:return Ur=xt._init,Kt(ft,et,Ur(xt._payload),or)}if(je(xt)||I(xt))return Ur!==null?null:Jt(ft,et,xt,or,null);io(ft,xt)}return null}function Nr(ft,et,xt,or,Ur){if(typeof or=="string"&&or!==""||typeof or=="number")return ft=ft.get(xt)||null,Ie(et,ft,""+or,Ur);if(typeof or=="object"&&or!==null){switch(or.$$typeof){case N:return ft=ft.get(or.key===null?xt:or.key)||null,Ve(et,ft,or,Ur);case A:return ft=ft.get(or.key===null?xt:or.key)||null,St(et,ft,or,Ur);case ue:var qr=or._init;return Nr(ft,et,xt,qr(or._payload),Ur)}if(je(or)||I(or))return ft=ft.get(xt)||null,Jt(et,ft,or,Ur,null);io(et,or)}return null}function Rr(ft,et,xt,or){for(var Ur=null,qr=null,Kr=et,ln=et=0,bi=null;Kr!==null&&ln<xt.length;ln++){Kr.index>ln?(bi=Kr,Kr=null):bi=Kr.sibling;var Hn=Kt(ft,Kr,xt[ln],or);if(Hn===null){Kr===null&&(Kr=bi);break}m&&Kr&&Hn.alternate===null&&x(ft,Kr),et=ne(Hn,et,ln),qr===null?Ur=Hn:qr.sibling=Hn,qr=Hn,Kr=bi}if(ln===xt.length)return E(ft,Kr),Xn&&Ad(ft,ln),Ur;if(Kr===null){for(;ln<xt.length;ln++)Kr=er(ft,xt[ln],or),Kr!==null&&(et=ne(Kr,et,ln),qr===null?Ur=Kr:qr.sibling=Kr,qr=Kr);return Xn&&Ad(ft,ln),Ur}for(Kr=O(ft,Kr);ln<xt.length;ln++)bi=Nr(Kr,ft,ln,xt[ln],or),bi!==null&&(m&&bi.alternate!==null&&Kr.delete(bi.key===null?ln:bi.key),et=ne(bi,et,ln),qr===null?Ur=bi:qr.sibling=bi,qr=bi);return m&&Kr.forEach(function(xf){return x(ft,xf)}),Xn&&Ad(ft,ln),Ur}function Br(ft,et,xt,or){var Ur=I(xt);if(typeof Ur!="function")throw Error(r(150));if(xt=Ur.call(xt),xt==null)throw Error(r(151));for(var qr=Ur=null,Kr=et,ln=et=0,bi=null,Hn=xt.next();Kr!==null&&!Hn.done;ln++,Hn=xt.next()){Kr.index>ln?(bi=Kr,Kr=null):bi=Kr.sibling;var xf=Kt(ft,Kr,Hn.value,or);if(xf===null){Kr===null&&(Kr=bi);break}m&&Kr&&xf.alternate===null&&x(ft,Kr),et=ne(xf,et,ln),qr===null?Ur=xf:qr.sibling=xf,qr=xf,Kr=bi}if(Hn.done)return E(ft,Kr),Xn&&Ad(ft,ln),Ur;if(Kr===null){for(;!Hn.done;ln++,Hn=xt.next())Hn=er(ft,Hn.value,or),Hn!==null&&(et=ne(Hn,et,ln),qr===null?Ur=Hn:qr.sibling=Hn,qr=Hn);return Xn&&Ad(ft,ln),Ur}for(Kr=O(ft,Kr);!Hn.done;ln++,Hn=xt.next())Hn=Nr(Kr,ft,ln,Hn.value,or),Hn!==null&&(m&&Hn.alternate!==null&&Kr.delete(Hn.key===null?ln:Hn.key),et=ne(Hn,et,ln),qr===null?Ur=Hn:qr.sibling=Hn,qr=Hn);return m&&Kr.forEach(function(AJ){return x(ft,AJ)}),Xn&&Ad(ft,ln),Ur}function Ca(ft,et,xt,or){if(typeof xt=="object"&&xt!==null&&xt.type===P&&xt.key===null&&(xt=xt.props.children),typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case N:e:{for(var Ur=xt.key,qr=et;qr!==null;){if(qr.key===Ur){if(Ur=xt.type,Ur===P){if(qr.tag===7){E(ft,qr.sibling),et=K(qr,xt.props.children),et.return=ft,ft=et;break e}}else if(qr.elementType===Ur||typeof Ur=="object"&&Ur!==null&&Ur.$$typeof===ue&&Cl(Ur)===qr.type){E(ft,qr.sibling),et=K(qr,xt.props),et.ref=Ks(ft,qr,xt),et.return=ft,ft=et;break e}E(ft,qr);break}else x(ft,qr);qr=qr.sibling}xt.type===P?(et=Wh(xt.props.children,ft.mode,or,xt.key),et.return=ft,ft=et):(or=Rb(xt.type,xt.key,xt.props,null,ft.mode,or),or.ref=Ks(ft,et,xt),or.return=ft,ft=or)}return be(ft);case A:e:{for(qr=xt.key;et!==null;){if(et.key===qr)if(et.tag===4&&et.stateNode.containerInfo===xt.containerInfo&&et.stateNode.implementation===xt.implementation){E(ft,et.sibling),et=K(et,xt.children||[]),et.return=ft,ft=et;break e}else{E(ft,et);break}else x(ft,et);et=et.sibling}et=w3(xt,ft.mode,or),et.return=ft,ft=et}return be(ft);case ue:return qr=xt._init,Ca(ft,et,qr(xt._payload),or)}if(je(xt))return Rr(ft,et,xt,or);if(I(xt))return Br(ft,et,xt,or);io(ft,xt)}return typeof xt=="string"&&xt!==""||typeof xt=="number"?(xt=""+xt,et!==null&&et.tag===6?(E(ft,et.sibling),et=K(et,xt),et.return=ft,ft=et):(E(ft,et),et=b3(xt,ft.mode,or),et.return=ft,ft=et),be(ft)):E(ft,et)}return Ca}var Fd=Rg(!0),tl=Rg(!1),Mh=zc(null),Mo=null,X0=null,Ig=null;function Lg(){Ig=X0=Mo=null}function Bg(m){var x=Mh.current;fs(Mh),m._currentValue=x}function $g(m,x,E){for(;m!==null;){var O=m.alternate;if((m.childLanes&x)!==x?(m.childLanes|=x,O!==null&&(O.childLanes|=x)):O!==null&&(O.childLanes&x)!==x&&(O.childLanes|=x),m===E)break;m=m.return}}function Hc(m,x){Mo=m,Ig=X0=null,m=m.dependencies,m!==null&&m.firstContext!==null&&((m.lanes&x)!==0&&(oe=!0),m.firstContext=null)}function Li(m){var x=m._currentValue;if(Ig!==m)if(m={context:m,memoizedValue:x,next:null},X0===null){if(Mo===null)throw Error(r(308));X0=m,Mo.dependencies={lanes:0,firstContext:m}}else X0=X0.next=m;return x}var Zl=null;function J0(m){Zl===null?Zl=[m]:Zl.push(m)}function Oh(m,x,E,O){var K=x.interleaved;return K===null?(E.next=E,J0(x)):(E.next=K.next,K.next=E),x.interleaved=E,Oo(m,O)}function Oo(m,x){m.lanes|=x;var E=m.alternate;for(E!==null&&(E.lanes|=x),E=m,m=m.return;m!==null;)m.childLanes|=x,E=m.alternate,E!==null&&(E.childLanes|=x),E=m,m=m.return;return E.tag===3?E.stateNode:null}var ec=!1;function Dh(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ug(m,x){m=m.updateQueue,x.updateQueue===m&&(x.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function tc(m,x){return{eventTime:m,lane:x,tag:0,payload:null,callback:null,next:null}}function rc(m,x,E){var O=m.updateQueue;if(O===null)return null;if(O=O.shared,($n&2)!==0){var K=O.pending;return K===null?x.next=x:(x.next=K.next,K.next=x),O.pending=x,Oo(m,E)}return K=O.interleaved,K===null?(x.next=x,J0(O)):(x.next=K.next,K.next=x),O.interleaved=x,Oo(m,E)}function zg(m,x,E){if(x=x.updateQueue,x!==null&&(x=x.shared,(E&4194240)!==0)){var O=x.lanes;O&=m.pendingLanes,E|=O,x.lanes=E,fi(m,E)}}function Rh(m,x){var E=m.updateQueue,O=m.alternate;if(O!==null&&(O=O.updateQueue,E===O)){var K=null,ne=null;if(E=E.firstBaseUpdate,E!==null){do{var be={eventTime:E.eventTime,lane:E.lane,tag:E.tag,payload:E.payload,callback:E.callback,next:null};ne===null?K=ne=be:ne=ne.next=be,E=E.next}while(E!==null);ne===null?K=ne=x:ne=ne.next=x}else K=ne=x;E={baseState:O.baseState,firstBaseUpdate:K,lastBaseUpdate:ne,shared:O.shared,effects:O.effects},m.updateQueue=E;return}m=E.lastBaseUpdate,m===null?E.firstBaseUpdate=x:m.next=x,E.lastBaseUpdate=x}function Q0(m,x,E,O){var K=m.updateQueue;ec=!1;var ne=K.firstBaseUpdate,be=K.lastBaseUpdate,Ie=K.shared.pending;if(Ie!==null){K.shared.pending=null;var Ve=Ie,St=Ve.next;Ve.next=null,be===null?ne=St:be.next=St,be=Ve;var Jt=m.alternate;Jt!==null&&(Jt=Jt.updateQueue,Ie=Jt.lastBaseUpdate,Ie!==be&&(Ie===null?Jt.firstBaseUpdate=St:Ie.next=St,Jt.lastBaseUpdate=Ve))}if(ne!==null){var er=K.baseState;be=0,Jt=St=Ve=null,Ie=ne;do{var Kt=Ie.lane,Nr=Ie.eventTime;if((O&Kt)===Kt){Jt!==null&&(Jt=Jt.next={eventTime:Nr,lane:0,tag:Ie.tag,payload:Ie.payload,callback:Ie.callback,next:null});e:{var Rr=m,Br=Ie;switch(Kt=x,Nr=E,Br.tag){case 1:if(Rr=Br.payload,typeof Rr=="function"){er=Rr.call(Nr,er,Kt);break e}er=Rr;break e;case 3:Rr.flags=Rr.flags&-65537|128;case 0:if(Rr=Br.payload,Kt=typeof Rr=="function"?Rr.call(Nr,er,Kt):Rr,Kt==null)break e;er=B({},er,Kt);break e;case 2:ec=!0}}Ie.callback!==null&&Ie.lane!==0&&(m.flags|=64,Kt=K.effects,Kt===null?K.effects=[Ie]:Kt.push(Ie))}else Nr={eventTime:Nr,lane:Kt,tag:Ie.tag,payload:Ie.payload,callback:Ie.callback,next:null},Jt===null?(St=Jt=Nr,Ve=er):Jt=Jt.next=Nr,be|=Kt;if(Ie=Ie.next,Ie===null){if(Ie=K.shared.pending,Ie===null)break;Kt=Ie,Ie=Kt.next,Kt.next=null,K.lastBaseUpdate=Kt,K.shared.pending=null}}while(!0);if(Jt===null&&(Ve=er),K.baseState=Ve,K.firstBaseUpdate=St,K.lastBaseUpdate=Jt,x=K.shared.interleaved,x!==null){K=x;do be|=K.lane,K=K.next;while(K!==x)}else ne===null&&(K.shared.lanes=0);Bh|=be,m.lanes=be,m.memoizedState=er}}function Bs(m,x,E){if(m=x.effects,x.effects=null,m!==null)for(x=0;x<m.length;x++){var O=m[x],K=O.callback;if(K!==null){if(O.callback=null,O=E,typeof K!="function")throw Error(r(191,K));K.call(O)}}}var gn={},rs=zc(gn),Cs=zc(gn),Ys=zc(gn);function _a(m){if(m===gn)throw Error(r(174));return m}function Pu(m,x){switch(ts(Ys,x),ts(Cs,m),ts(rs,gn),m=x.nodeType,m){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:dt(null,"");break;default:m=m===8?x.parentNode:x,x=m.namespaceURI||null,m=m.tagName,x=dt(x,m)}fs(rs),ts(rs,x)}function Ts(){fs(rs),fs(Cs),fs(Ys)}function Z0(m){_a(Ys.current);var x=_a(rs.current),E=dt(x,m.type);x!==E&&(ts(Cs,m),ts(rs,E))}function Gc(m){Cs.current===m&&(fs(rs),fs(Cs))}var hs=zc(0);function ef(m){for(var x=m;x!==null;){if(x.tag===13){var E=x.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||E.data==="$?"||E.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===m)break;for(;x.sibling===null;){if(x.return===null||x.return===m)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var Md=[];function gi(){for(var m=0;m<Md.length;m++)Md[m]._workInProgressVersionPrimary=null;Md.length=0}var tf=T.ReactCurrentDispatcher,Ih=T.ReactCurrentBatchConfig,Bi=0,Zn=null,$s=null,sa=null,Tl=!1,Fu=!1,rl=0,Wg=0;function aa(){throw Error(r(321))}function Lh(m,x){if(x===null)return!1;for(var E=0;E<x.length&&E<m.length;E++)if(!ao(m[E],x[E]))return!1;return!0}function rf(m,x,E,O,K,ne){if(Bi=ne,Zn=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,tf.current=m===null||m.memoizedState===null?t3:Du,m=E(O,K),Fu){ne=0;do{if(Fu=!1,rl=0,25<=ne)throw Error(r(301));ne+=1,sa=$s=null,x.updateQueue=null,tf.current=Kg,m=E(O,K)}while(Fu)}if(tf.current=of,x=$s!==null&&$s.next!==null,Bi=0,sa=$s=Zn=null,Tl=!1,x)throw Error(r(300));return m}function nf(){var m=rl!==0;return rl=0,m}function vs(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sa===null?Zn.memoizedState=sa=m:sa=sa.next=m,sa}function Sa(){if($s===null){var m=Zn.alternate;m=m!==null?m.memoizedState:null}else m=$s.next;var x=sa===null?Zn.memoizedState:sa.next;if(x!==null)sa=x,$s=m;else{if(m===null)throw Error(r(310));$s=m,m={memoizedState:$s.memoizedState,baseState:$s.baseState,baseQueue:$s.baseQueue,queue:$s.queue,next:null},sa===null?Zn.memoizedState=sa=m:sa=sa.next=m}return sa}function pi(m,x){return typeof x=="function"?x(m):x}function xi(m){var x=Sa(),E=x.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=m;var O=$s,K=O.baseQueue,ne=E.pending;if(ne!==null){if(K!==null){var be=K.next;K.next=ne.next,ne.next=be}O.baseQueue=K=ne,E.pending=null}if(K!==null){ne=K.next,O=O.baseState;var Ie=be=null,Ve=null,St=ne;do{var Jt=St.lane;if((Bi&Jt)===Jt)Ve!==null&&(Ve=Ve.next={lane:0,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null}),O=St.hasEagerState?St.eagerState:m(O,St.action);else{var er={lane:Jt,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null};Ve===null?(Ie=Ve=er,be=O):Ve=Ve.next=er,Zn.lanes|=Jt,Bh|=Jt}St=St.next}while(St!==null&&St!==ne);Ve===null?be=O:Ve.next=Ie,ao(O,x.memoizedState)||(oe=!0),x.memoizedState=O,x.baseState=be,x.baseQueue=Ve,E.lastRenderedState=O}if(m=E.interleaved,m!==null){K=m;do ne=K.lane,Zn.lanes|=ne,Bh|=ne,K=K.next;while(K!==m)}else K===null&&(E.lanes=0);return[x.memoizedState,E.dispatch]}function Hg(m){var x=Sa(),E=x.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=m;var O=E.dispatch,K=E.pending,ne=x.memoizedState;if(K!==null){E.pending=null;var be=K=K.next;do ne=m(ne,be.action),be=be.next;while(be!==K);ao(ne,x.memoizedState)||(oe=!0),x.memoizedState=ne,x.baseQueue===null&&(x.baseState=ne),E.lastRenderedState=ne}return[ne,O]}function Gg(){}function Vg(m,x){var E=Zn,O=Sa(),K=x(),ne=!ao(O.memoizedState,K);if(ne&&(O.memoizedState=K,oe=!0),O=O.queue,vx(px.bind(null,E,O,m),[m]),O.getSnapshot!==x||ne||sa!==null&&sa.memoizedState.tag&1){if(E.flags|=2048,sf(9,Vc.bind(null,E,O,K,x),void 0,null),vi===null)throw Error(r(349));(Bi&30)!==0||pb(E,x,K)}return K}function pb(m,x,E){m.flags|=16384,m={getSnapshot:x,value:E},x=Zn.updateQueue,x===null?(x={lastEffect:null,stores:null},Zn.updateQueue=x,x.stores=[m]):(E=x.stores,E===null?x.stores=[m]:E.push(m))}function Vc(m,x,E,O){x.value=E,x.getSnapshot=O,xx(x)&&qg(m)}function px(m,x,E){return E(function(){xx(x)&&qg(m)})}function xx(m){var x=m.getSnapshot;m=m.value;try{var E=x();return!ao(m,E)}catch{return!0}}function qg(m){var x=Oo(m,1);x!==null&&Xc(x,m,1,-1)}function Mu(m){var x=vs();return typeof m=="function"&&(m=m()),x.memoizedState=x.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:m},x.queue=m,m=m.dispatch=_b.bind(null,Zn,m),[x.memoizedState,m]}function sf(m,x,E,O){return m={tag:m,create:x,destroy:E,deps:O,next:null},x=Zn.updateQueue,x===null?(x={lastEffect:null,stores:null},Zn.updateQueue=x,x.lastEffect=m.next=m):(E=x.lastEffect,E===null?x.lastEffect=m.next=m:(O=E.next,E.next=m,m.next=O,x.lastEffect=m)),m}function yx(){return Sa().memoizedState}function af(m,x,E,O){var K=vs();Zn.flags|=m,K.memoizedState=sf(1|x,E,void 0,O===void 0?null:O)}function Od(m,x,E,O){var K=Sa();O=O===void 0?null:O;var ne=void 0;if($s!==null){var be=$s.memoizedState;if(ne=be.destroy,O!==null&&Lh(O,be.deps)){K.memoizedState=sf(x,E,ne,O);return}}Zn.flags|=m,K.memoizedState=sf(1|x,E,ne,O)}function xb(m,x){return af(8390656,8,m,x)}function vx(m,x){return Od(2048,8,m,x)}function bx(m,x){return Od(4,2,m,x)}function wx(m,x){return Od(4,4,m,x)}function Ou(m,x){if(typeof x=="function")return m=m(),x(m),function(){x(null)};if(x!=null)return m=m(),x.current=m,function(){x.current=null}}function yb(m,x,E){return E=E!=null?E.concat([m]):null,Od(4,4,Ou.bind(null,x,m),E)}function qc(){}function _x(m,x){var E=Sa();x=x===void 0?null:x;var O=E.memoizedState;return O!==null&&x!==null&&Lh(x,O[1])?O[0]:(E.memoizedState=[m,x],m)}function bs(m,x){var E=Sa();x=x===void 0?null:x;var O=E.memoizedState;return O!==null&&x!==null&&Lh(x,O[1])?O[0]:(m=m(),E.memoizedState=[m,x],m)}function vb(m,x,E){return(Bi&21)===0?(m.baseState&&(m.baseState=!1,oe=!0),m.memoizedState=E):(ao(E,x)||(E=Yn(),Zn.lanes|=E,Bh|=E,m.baseState=!0),x)}function bb(m,x){var E=dn;dn=E!==0&&4>E?E:4,m(!0);var O=Ih.transition;Ih.transition={};try{m(!1),x()}finally{dn=E,Ih.transition=O}}function wb(){return Sa().memoizedState}function e3(m,x,E){var O=mf(m);if(E={lane:O,action:E,hasEagerState:!1,eagerState:null,next:null},Sx(m))Sb(x,E);else if(E=Oh(m,x,E,O),E!==null){var K=Ro();Xc(E,m,O,K),Do(E,x,O)}}function _b(m,x,E){var O=mf(m),K={lane:O,action:E,hasEagerState:!1,eagerState:null,next:null};if(Sx(m))Sb(x,K);else{var ne=m.alternate;if(m.lanes===0&&(ne===null||ne.lanes===0)&&(ne=x.lastRenderedReducer,ne!==null))try{var be=x.lastRenderedState,Ie=ne(be,E);if(K.hasEagerState=!0,K.eagerState=Ie,ao(Ie,be)){var Ve=x.interleaved;Ve===null?(K.next=K,J0(x)):(K.next=Ve.next,Ve.next=K),x.interleaved=K;return}}catch{}finally{}E=Oh(m,x,K,O),E!==null&&(K=Ro(),Xc(E,m,O,K),Do(E,x,O))}}function Sx(m){var x=m.alternate;return m===Zn||x!==null&&x===Zn}function Sb(m,x){Fu=Tl=!0;var E=m.pending;E===null?x.next=x:(x.next=E.next,E.next=x),m.pending=x}function Do(m,x,E){if((E&4194240)!==0){var O=x.lanes;O&=m.pendingLanes,E|=O,x.lanes=E,fi(m,E)}}var of={readContext:Li,useCallback:aa,useContext:aa,useEffect:aa,useImperativeHandle:aa,useInsertionEffect:aa,useLayoutEffect:aa,useMemo:aa,useReducer:aa,useRef:aa,useState:aa,useDebugValue:aa,useDeferredValue:aa,useTransition:aa,useMutableSource:aa,useSyncExternalStore:aa,useId:aa,unstable_isNewReconciler:!1},t3={readContext:Li,useCallback:function(m,x){return vs().memoizedState=[m,x===void 0?null:x],m},useContext:Li,useEffect:xb,useImperativeHandle:function(m,x,E){return E=E!=null?E.concat([m]):null,af(4194308,4,Ou.bind(null,x,m),E)},useLayoutEffect:function(m,x){return af(4194308,4,m,x)},useInsertionEffect:function(m,x){return af(4,2,m,x)},useMemo:function(m,x){var E=vs();return x=x===void 0?null:x,m=m(),E.memoizedState=[m,x],m},useReducer:function(m,x,E){var O=vs();return x=E!==void 0?E(x):x,O.memoizedState=O.baseState=x,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:x},O.queue=m,m=m.dispatch=e3.bind(null,Zn,m),[O.memoizedState,m]},useRef:function(m){var x=vs();return m={current:m},x.memoizedState=m},useState:Mu,useDebugValue:qc,useDeferredValue:function(m){return vs().memoizedState=m},useTransition:function(){var m=Mu(!1),x=m[0];return m=bb.bind(null,m[1]),vs().memoizedState=m,[x,m]},useMutableSource:function(){},useSyncExternalStore:function(m,x,E){var O=Zn,K=vs();if(Xn){if(E===void 0)throw Error(r(407));E=E()}else{if(E=x(),vi===null)throw Error(r(349));(Bi&30)!==0||pb(O,x,E)}K.memoizedState=E;var ne={value:E,getSnapshot:x};return K.queue=ne,xb(px.bind(null,O,ne,m),[m]),O.flags|=2048,sf(9,Vc.bind(null,O,ne,E,x),void 0,null),E},useId:function(){var m=vs(),x=vi.identifierPrefix;if(Xn){var E=ks,O=jo;E=(O&~(1<<32-Xt(O)-1)).toString(32)+E,x=":"+x+"R"+E,E=rl++,0<E&&(x+="H"+E.toString(32)),x+=":"}else E=Wg++,x=":"+x+"r"+E.toString(32)+":";return m.memoizedState=x},unstable_isNewReconciler:!1},Du={readContext:Li,useCallback:_x,useContext:Li,useEffect:vx,useImperativeHandle:yb,useInsertionEffect:bx,useLayoutEffect:wx,useMemo:bs,useReducer:xi,useRef:yx,useState:function(){return xi(pi)},useDebugValue:qc,useDeferredValue:function(m){var x=Sa();return vb(x,$s.memoizedState,m)},useTransition:function(){var m=xi(pi)[0],x=Sa().memoizedState;return[m,x]},useMutableSource:Gg,useSyncExternalStore:Vg,useId:wb,unstable_isNewReconciler:!1},Kg={readContext:Li,useCallback:_x,useContext:Li,useEffect:vx,useImperativeHandle:yb,useInsertionEffect:bx,useLayoutEffect:wx,useMemo:bs,useReducer:Hg,useRef:yx,useState:function(){return Hg(pi)},useDebugValue:qc,useDeferredValue:function(m){var x=Sa();return $s===null?x.memoizedState=m:vb(x,$s.memoizedState,m)},useTransition:function(){var m=Hg(pi)[0],x=Sa().memoizedState;return[m,x]},useMutableSource:Gg,useSyncExternalStore:Vg,useId:wb,unstable_isNewReconciler:!1};function Za(m,x){if(m&&m.defaultProps){x=B({},x),m=m.defaultProps;for(var E in m)x[E]===void 0&&(x[E]=m[E]);return x}return x}function lf(m,x,E,O){x=m.memoizedState,E=E(O,x),E=E==null?x:B({},x,E),m.memoizedState=E,m.lanes===0&&(m.updateQueue.baseState=E)}var cf={isMounted:function(m){return(m=m._reactInternals)?Se(m)===m:!1},enqueueSetState:function(m,x,E){m=m._reactInternals;var O=Ro(),K=mf(m),ne=tc(O,K);ne.payload=x,E!=null&&(ne.callback=E),x=rc(m,ne,K),x!==null&&(Xc(x,m,K,O),zg(x,m,K))},enqueueReplaceState:function(m,x,E){m=m._reactInternals;var O=Ro(),K=mf(m),ne=tc(O,K);ne.tag=1,ne.payload=x,E!=null&&(ne.callback=E),x=rc(m,ne,K),x!==null&&(Xc(x,m,K,O),zg(x,m,K))},enqueueForceUpdate:function(m,x){m=m._reactInternals;var E=Ro(),O=mf(m),K=tc(E,O);K.tag=2,x!=null&&(K.callback=x),x=rc(m,K,O),x!==null&&(Xc(x,m,O,E),zg(x,m,O))}};function Yg(m,x,E,O,K,ne,be){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(O,ne,be):x.prototype&&x.prototype.isPureReactComponent?!xd(E,O)||!xd(K,ne):!0}function kb(m,x,E){var O=!1,K=Jl,ne=x.contextType;return typeof ne=="object"&&ne!==null?ne=Li(ne):(K=mi(x)?Tu:Qa.current,O=x.contextTypes,ne=(O=O!=null)?Td(m,K):Jl),x=new x(E,ne),m.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=cf,m.stateNode=x,x._reactInternals=m,O&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=K,m.__reactInternalMemoizedMaskedChildContext=ne),x}function kx(m,x,E,O){m=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(E,O),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(E,O),x.state!==m&&cf.enqueueReplaceState(x,x.state,null)}function Xg(m,x,E,O){var K=m.stateNode;K.props=E,K.state=m.memoizedState,K.refs={},Dh(m);var ne=x.contextType;typeof ne=="object"&&ne!==null?K.context=Li(ne):(ne=mi(x)?Tu:Qa.current,K.context=Td(m,ne)),K.state=m.memoizedState,ne=x.getDerivedStateFromProps,typeof ne=="function"&&(lf(m,x,ne,E),K.state=m.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof K.getSnapshotBeforeUpdate=="function"||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(x=K.state,typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount(),x!==K.state&&cf.enqueueReplaceState(K,K.state,null),Q0(m,E,K,O),K.state=m.memoizedState),typeof K.componentDidMount=="function"&&(m.flags|=4194308)}function Dd(m,x){try{var E="",O=x;do E+=H(O),O=O.return;while(O);var K=E}catch(ne){K=`
Error generating stack: `+ne.message+`
`+ne.stack}return{value:m,source:x,stack:K,digest:null}}function Jg(m,x,E){return{value:m,source:null,stack:E??null,digest:x??null}}function uf(m,x){try{console.error(x.value)}catch(E){setTimeout(function(){throw E})}}var r3=typeof WeakMap=="function"?WeakMap:Map;function Cb(m,x,E){E=tc(-1,E),E.tag=3,E.payload={element:null};var O=x.value;return E.callback=function(){jb||(jb=!0,f3=O),uf(m,x)},E}function b(m,x,E){E=tc(-1,E),E.tag=3;var O=m.type.getDerivedStateFromError;if(typeof O=="function"){var K=x.value;E.payload=function(){return O(K)},E.callback=function(){uf(m,x)}}var ne=m.stateNode;return ne!==null&&typeof ne.componentDidCatch=="function"&&(E.callback=function(){uf(m,x),typeof O!="function"&&(ff===null?ff=new Set([this]):ff.add(this));var be=x.stack;this.componentDidCatch(x.value,{componentStack:be!==null?be:""})}),E}function k(m,x,E){var O=m.pingCache;if(O===null){O=m.pingCache=new r3;var K=new Set;O.set(x,K)}else K=O.get(x),K===void 0&&(K=new Set,O.set(x,K));K.has(E)||(K.add(E),m=yJ.bind(null,m,x,E),x.then(m,m))}function M(m){do{var x;if((x=m.tag===13)&&(x=m.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return m;m=m.return}while(m!==null);return null}function G(m,x,E,O,K){return(m.mode&1)===0?(m===x?m.flags|=65536:(m.flags|=128,E.flags|=131072,E.flags&=-52805,E.tag===1&&(E.alternate===null?E.tag=17:(x=tc(-1,1),x.tag=2,rc(E,x,1))),E.lanes|=1),m):(m.flags|=65536,m.lanes=K,m)}var J=T.ReactCurrentOwner,oe=!1;function Ae(m,x,E,O){x.child=m===null?tl(x,null,E,O):Fd(x,m.child,E,O)}function st(m,x,E,O,K){E=E.render;var ne=x.ref;return Hc(x,K),O=rf(m,x,E,O,ne,K),E=nf(),m!==null&&!oe?(x.updateQueue=m.updateQueue,x.flags&=-2053,m.lanes&=~K,yi(m,x,K)):(Xn&&E&&K0(x),x.flags|=1,Ae(m,x,O,K),x.child)}function Ct(m,x,E,O,K){if(m===null){var ne=E.type;return typeof ne=="function"&&!v3(ne)&&ne.defaultProps===void 0&&E.compare===null&&E.defaultProps===void 0?(x.tag=15,x.type=ne,ar(m,x,ne,O,K)):(m=Rb(E.type,null,O,x,x.mode,K),m.ref=x.ref,m.return=x,x.child=m)}if(ne=m.child,(m.lanes&K)===0){var be=ne.memoizedProps;if(E=E.compare,E=E!==null?E:xd,E(be,O)&&m.ref===x.ref)return yi(m,x,K)}return x.flags|=1,m=pf(ne,O),m.ref=x.ref,m.return=x,x.child=m}function ar(m,x,E,O,K){if(m!==null){var ne=m.memoizedProps;if(xd(ne,O)&&m.ref===x.ref)if(oe=!1,x.pendingProps=O=ne,(m.lanes&K)!==0)(m.flags&131072)!==0&&(oe=!0);else return x.lanes=m.lanes,yi(m,x,K)}return kr(m,x,E,O,K)}function Pr(m,x,E){var O=x.pendingProps,K=O.children,ne=m!==null?m.memoizedState:null;if(O.mode==="hidden")if((x.mode&1)===0)x.memoizedState={baseLanes:0,cachePool:null,transitions:null},ts(Zg,El),El|=E;else{if((E&1073741824)===0)return m=ne!==null?ne.baseLanes|E:E,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:m,cachePool:null,transitions:null},x.updateQueue=null,ts(Zg,El),El|=m,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},O=ne!==null?ne.baseLanes:E,ts(Zg,El),El|=O}else ne!==null?(O=ne.baseLanes|E,x.memoizedState=null):O=E,ts(Zg,El),El|=O;return Ae(m,x,K,E),x.child}function fn(m,x){var E=x.ref;(m===null&&E!==null||m!==null&&m.ref!==E)&&(x.flags|=512,x.flags|=2097152)}function kr(m,x,E,O,K){var ne=mi(E)?Tu:Qa.current;return ne=Td(x,ne),Hc(x,K),E=rf(m,x,E,O,ne,K),O=nf(),m!==null&&!oe?(x.updateQueue=m.updateQueue,x.flags&=-2053,m.lanes&=~K,yi(m,x,K)):(Xn&&O&&K0(x),x.flags|=1,Ae(m,x,E,K),x.child)}function ms(m,x,E,O,K){if(mi(E)){var ne=!0;Ed(x)}else ne=!1;if(Hc(x,K),x.stateNode===null)Fn(m,x),kb(x,E,O),Xg(x,E,O,K),O=!0;else if(m===null){var be=x.stateNode,Ie=x.memoizedProps;be.props=Ie;var Ve=be.context,St=E.contextType;typeof St=="object"&&St!==null?St=Li(St):(St=mi(E)?Tu:Qa.current,St=Td(x,St));var Jt=E.getDerivedStateFromProps,er=typeof Jt=="function"||typeof be.getSnapshotBeforeUpdate=="function";er||typeof be.UNSAFE_componentWillReceiveProps!="function"&&typeof be.componentWillReceiveProps!="function"||(Ie!==O||Ve!==St)&&kx(x,be,O,St),ec=!1;var Kt=x.memoizedState;be.state=Kt,Q0(x,O,be,K),Ve=x.memoizedState,Ie!==O||Kt!==Ve||hi.current||ec?(typeof Jt=="function"&&(lf(x,E,Jt,O),Ve=x.memoizedState),(Ie=ec||Yg(x,E,Ie,O,Kt,Ve,St))?(er||typeof be.UNSAFE_componentWillMount!="function"&&typeof be.componentWillMount!="function"||(typeof be.componentWillMount=="function"&&be.componentWillMount(),typeof be.UNSAFE_componentWillMount=="function"&&be.UNSAFE_componentWillMount()),typeof be.componentDidMount=="function"&&(x.flags|=4194308)):(typeof be.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=O,x.memoizedState=Ve),be.props=O,be.state=Ve,be.context=St,O=Ie):(typeof be.componentDidMount=="function"&&(x.flags|=4194308),O=!1)}else{be=x.stateNode,Ug(m,x),Ie=x.memoizedProps,St=x.type===x.elementType?Ie:Za(x.type,Ie),be.props=St,er=x.pendingProps,Kt=be.context,Ve=E.contextType,typeof Ve=="object"&&Ve!==null?Ve=Li(Ve):(Ve=mi(E)?Tu:Qa.current,Ve=Td(x,Ve));var Nr=E.getDerivedStateFromProps;(Jt=typeof Nr=="function"||typeof be.getSnapshotBeforeUpdate=="function")||typeof be.UNSAFE_componentWillReceiveProps!="function"&&typeof be.componentWillReceiveProps!="function"||(Ie!==er||Kt!==Ve)&&kx(x,be,O,Ve),ec=!1,Kt=x.memoizedState,be.state=Kt,Q0(x,O,be,K);var Rr=x.memoizedState;Ie!==er||Kt!==Rr||hi.current||ec?(typeof Nr=="function"&&(lf(x,E,Nr,O),Rr=x.memoizedState),(St=ec||Yg(x,E,St,O,Kt,Rr,Ve)||!1)?(Jt||typeof be.UNSAFE_componentWillUpdate!="function"&&typeof be.componentWillUpdate!="function"||(typeof be.componentWillUpdate=="function"&&be.componentWillUpdate(O,Rr,Ve),typeof be.UNSAFE_componentWillUpdate=="function"&&be.UNSAFE_componentWillUpdate(O,Rr,Ve)),typeof be.componentDidUpdate=="function"&&(x.flags|=4),typeof be.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof be.componentDidUpdate!="function"||Ie===m.memoizedProps&&Kt===m.memoizedState||(x.flags|=4),typeof be.getSnapshotBeforeUpdate!="function"||Ie===m.memoizedProps&&Kt===m.memoizedState||(x.flags|=1024),x.memoizedProps=O,x.memoizedState=Rr),be.props=O,be.state=Rr,be.context=Ve,O=St):(typeof be.componentDidUpdate!="function"||Ie===m.memoizedProps&&Kt===m.memoizedState||(x.flags|=4),typeof be.getSnapshotBeforeUpdate!="function"||Ie===m.memoizedProps&&Kt===m.memoizedState||(x.flags|=1024),O=!1)}return Jn(m,x,E,O,ne,K)}function Jn(m,x,E,O,K,ne){fn(m,x);var be=(x.flags&128)!==0;if(!O&&!be)return K&&hb(x,E,!1),yi(m,x,ne);O=x.stateNode,J.current=x;var Ie=be&&typeof E.getDerivedStateFromError!="function"?null:O.render();return x.flags|=1,m!==null&&be?(x.child=Fd(x,m.child,null,ne),x.child=Fd(x,null,Ie,ne)):Ae(m,x,Ie,ne),x.memoizedState=O.state,K&&hb(x,E,!0),x.child}function $i(m){var x=m.stateNode;x.pendingContext?fx(m,x.pendingContext,x.pendingContext!==x.context):x.context&&fx(m,x.context,!1),Pu(m,x.containerInfo)}function nc(m,x,E,O,K){return Pd(),Fh(K),x.flags|=256,Ae(m,x,E,O),x.child}var wt={dehydrated:null,treeContext:null,retryLane:0};function ut(m){return{baseLanes:m,cachePool:null,transitions:null}}function Ft(m,x,E){var O=x.pendingProps,K=hs.current,ne=!1,be=(x.flags&128)!==0,Ie;if((Ie=be)||(Ie=m!==null&&m.memoizedState===null?!1:(K&2)!==0),Ie?(ne=!0,x.flags&=-129):(m===null||m.memoizedState!==null)&&(K|=1),ts(hs,K&1),m===null)return Y0(x),m=x.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?((x.mode&1)===0?x.lanes=1:m.data==="$!"?x.lanes=8:x.lanes=1073741824,null):(be=O.children,m=O.fallback,ne?(O=x.mode,ne=x.child,be={mode:"hidden",children:be},(O&1)===0&&ne!==null?(ne.childLanes=0,ne.pendingProps=be):ne=Ib(be,O,0,null),m=Wh(m,O,E,null),ne.return=x,m.return=x,ne.sibling=m,x.child=ne,x.child.memoizedState=ut(E),x.memoizedState=wt,m):Cr(x,be));if(K=m.memoizedState,K!==null&&(Ie=K.dehydrated,Ie!==null))return bn(m,x,be,O,Ie,K,E);if(ne){ne=O.fallback,be=x.mode,K=m.child,Ie=K.sibling;var Ve={mode:"hidden",children:O.children};return(be&1)===0&&x.child!==K?(O=x.child,O.childLanes=0,O.pendingProps=Ve,x.deletions=null):(O=pf(K,Ve),O.subtreeFlags=K.subtreeFlags&14680064),Ie!==null?ne=pf(Ie,ne):(ne=Wh(ne,be,E,null),ne.flags|=2),ne.return=x,O.return=x,O.sibling=ne,x.child=O,O=ne,ne=x.child,be=m.child.memoizedState,be=be===null?ut(E):{baseLanes:be.baseLanes|E,cachePool:null,transitions:be.transitions},ne.memoizedState=be,ne.childLanes=m.childLanes&~E,x.memoizedState=wt,O}return ne=m.child,m=ne.sibling,O=pf(ne,{mode:"visible",children:O.children}),(x.mode&1)===0&&(O.lanes=E),O.return=x,O.sibling=null,m!==null&&(E=x.deletions,E===null?(x.deletions=[m],x.flags|=16):E.push(m)),x.child=O,x.memoizedState=null,O}function Cr(m,x){return x=Ib({mode:"visible",children:x},m.mode,0,null),x.return=m,m.child=x}function Wr(m,x,E,O){return O!==null&&Fh(O),Fd(x,m.child,null,E),m=Cr(x,x.pendingProps.children),m.flags|=2,x.memoizedState=null,m}function bn(m,x,E,O,K,ne,be){if(E)return x.flags&256?(x.flags&=-257,O=Jg(Error(r(422))),Wr(m,x,be,O)):x.memoizedState!==null?(x.child=m.child,x.flags|=128,null):(ne=O.fallback,K=x.mode,O=Ib({mode:"visible",children:O.children},K,0,null),ne=Wh(ne,K,be,null),ne.flags|=2,O.return=x,ne.return=x,O.sibling=ne,x.child=O,(x.mode&1)!==0&&Fd(x,m.child,null,be),x.child.memoizedState=ut(be),x.memoizedState=wt,ne);if((x.mode&1)===0)return Wr(m,x,be,null);if(K.data==="$!"){if(O=K.nextSibling&&K.nextSibling.dataset,O)var Ie=O.dgst;return O=Ie,ne=Error(r(419)),O=Jg(ne,O,void 0),Wr(m,x,be,O)}if(Ie=(be&m.childLanes)!==0,oe||Ie){if(O=vi,O!==null){switch(be&-be){case 4:K=2;break;case 16:K=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:K=32;break;case 536870912:K=268435456;break;default:K=0}K=(K&(O.suspendedLanes|be))!==0?0:K,K!==0&&K!==ne.retryLane&&(ne.retryLane=K,Oo(m,K),Xc(O,m,K,-1))}return y3(),O=Jg(Error(r(421))),Wr(m,x,be,O)}return K.data==="$?"?(x.flags|=128,x.child=m.child,x=vJ.bind(null,m),K._reactRetry=x,null):(m=ne.treeContext,vr=Yl(K.nextSibling),Po=x,Xn=!0,Fo=null,m!==null&&(Ri[Ii++]=jo,Ri[Ii++]=ks,Ri[Ii++]=ju,jo=m.id,ks=m.overflow,ju=x),x=Cr(x,O.children),x.flags|=4096,x)}function hn(m,x,E){m.lanes|=x;var O=m.alternate;O!==null&&(O.lanes|=x),$g(m.return,x,E)}function Rn(m,x,E,O,K){var ne=m.memoizedState;ne===null?m.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:O,tail:E,tailMode:K}:(ne.isBackwards=x,ne.rendering=null,ne.renderingStartTime=0,ne.last=O,ne.tail=E,ne.tailMode=K)}function ka(m,x,E){var O=x.pendingProps,K=O.revealOrder,ne=O.tail;if(Ae(m,x,O.children,E),O=hs.current,(O&2)!==0)O=O&1|2,x.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=x.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&hn(m,E,x);else if(m.tag===19)hn(m,E,x);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===x)break e;for(;m.sibling===null;){if(m.return===null||m.return===x)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}O&=1}if(ts(hs,O),(x.mode&1)===0)x.memoizedState=null;else switch(K){case"forwards":for(E=x.child,K=null;E!==null;)m=E.alternate,m!==null&&ef(m)===null&&(K=E),E=E.sibling;E=K,E===null?(K=x.child,x.child=null):(K=E.sibling,E.sibling=null),Rn(x,!1,K,E,ne);break;case"backwards":for(E=null,K=x.child,x.child=null;K!==null;){if(m=K.alternate,m!==null&&ef(m)===null){x.child=K;break}m=K.sibling,K.sibling=E,E=K,K=m}Rn(x,!0,E,null,ne);break;case"together":Rn(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function Fn(m,x){(x.mode&1)===0&&m!==null&&(m.alternate=null,x.alternate=null,x.flags|=2)}function yi(m,x,E){if(m!==null&&(x.dependencies=m.dependencies),Bh|=x.lanes,(E&x.childLanes)===0)return null;if(m!==null&&x.child!==m.child)throw Error(r(153));if(x.child!==null){for(m=x.child,E=pf(m,m.pendingProps),x.child=E,E.return=x;m.sibling!==null;)m=m.sibling,E=E.sibling=pf(m,m.pendingProps),E.return=x;E.sibling=null}return x.child}function n3(m,x,E){switch(x.tag){case 3:$i(x),Pd();break;case 5:Z0(x);break;case 1:mi(x.type)&&Ed(x);break;case 4:Pu(x,x.stateNode.containerInfo);break;case 10:var O=x.type._context,K=x.memoizedProps.value;ts(Mh,O._currentValue),O._currentValue=K;break;case 13:if(O=x.memoizedState,O!==null)return O.dehydrated!==null?(ts(hs,hs.current&1),x.flags|=128,null):(E&x.child.childLanes)!==0?Ft(m,x,E):(ts(hs,hs.current&1),m=yi(m,x,E),m!==null?m.sibling:null);ts(hs,hs.current&1);break;case 19:if(O=(E&x.childLanes)!==0,(m.flags&128)!==0){if(O)return ka(m,x,E);x.flags|=128}if(K=x.memoizedState,K!==null&&(K.rendering=null,K.tail=null,K.lastEffect=null),ts(hs,hs.current),O)break;return null;case 22:case 23:return x.lanes=0,Pr(m,x,E)}return yi(m,x,E)}var h9,s3,m9,g9;h9=function(m,x){for(var E=x.child;E!==null;){if(E.tag===5||E.tag===6)m.appendChild(E.stateNode);else if(E.tag!==4&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===x)break;for(;E.sibling===null;){if(E.return===null||E.return===x)return;E=E.return}E.sibling.return=E.return,E=E.sibling}},s3=function(){},m9=function(m,x,E,O){var K=m.memoizedProps;if(K!==O){m=x.stateNode,_a(rs.current);var ne=null;switch(E){case"input":K=He(m,K),O=He(m,O),ne=[];break;case"select":K=B({},K,{value:void 0}),O=B({},O,{value:void 0}),ne=[];break;case"textarea":K=vt(m,K),O=vt(m,O),ne=[];break;default:typeof K.onClick!="function"&&typeof O.onClick=="function"&&(m.onclick=Sd)}wr(E,O);var be;E=null;for(St in K)if(!O.hasOwnProperty(St)&&K.hasOwnProperty(St)&&K[St]!=null)if(St==="style"){var Ie=K[St];for(be in Ie)Ie.hasOwnProperty(be)&&(E||(E={}),E[be]="")}else St!=="dangerouslySetInnerHTML"&&St!=="children"&&St!=="suppressContentEditableWarning"&&St!=="suppressHydrationWarning"&&St!=="autoFocus"&&(s.hasOwnProperty(St)?ne||(ne=[]):(ne=ne||[]).push(St,null));for(St in O){var Ve=O[St];if(Ie=K?.[St],O.hasOwnProperty(St)&&Ve!==Ie&&(Ve!=null||Ie!=null))if(St==="style")if(Ie){for(be in Ie)!Ie.hasOwnProperty(be)||Ve&&Ve.hasOwnProperty(be)||(E||(E={}),E[be]="");for(be in Ve)Ve.hasOwnProperty(be)&&Ie[be]!==Ve[be]&&(E||(E={}),E[be]=Ve[be])}else E||(ne||(ne=[]),ne.push(St,E)),E=Ve;else St==="dangerouslySetInnerHTML"?(Ve=Ve?Ve.__html:void 0,Ie=Ie?Ie.__html:void 0,Ve!=null&&Ie!==Ve&&(ne=ne||[]).push(St,Ve)):St==="children"?typeof Ve!="string"&&typeof Ve!="number"||(ne=ne||[]).push(St,""+Ve):St!=="suppressContentEditableWarning"&&St!=="suppressHydrationWarning"&&(s.hasOwnProperty(St)?(Ve!=null&&St==="onScroll"&&ds("scroll",m),ne||Ie===Ve||(ne=[])):(ne=ne||[]).push(St,Ve))}E&&(ne=ne||[]).push("style",E);var St=ne;(x.updateQueue=St)&&(x.flags|=4)}},g9=function(m,x,E,O){E!==O&&(x.flags|=4)};function Cx(m,x){if(!Xn)switch(m.tailMode){case"hidden":x=m.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?m.tail=null:E.sibling=null;break;case"collapsed":E=m.tail;for(var O=null;E!==null;)E.alternate!==null&&(O=E),E=E.sibling;O===null?x||m.tail===null?m.tail=null:m.tail.sibling=null:O.sibling=null}}function oo(m){var x=m.alternate!==null&&m.alternate.child===m.child,E=0,O=0;if(x)for(var K=m.child;K!==null;)E|=K.lanes|K.childLanes,O|=K.subtreeFlags&14680064,O|=K.flags&14680064,K.return=m,K=K.sibling;else for(K=m.child;K!==null;)E|=K.lanes|K.childLanes,O|=K.subtreeFlags,O|=K.flags,K.return=m,K=K.sibling;return m.subtreeFlags|=O,m.childLanes=E,x}function lJ(m,x,E){var O=x.pendingProps;switch(Ba(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oo(x),null;case 1:return mi(x.type)&&V0(),oo(x),null;case 3:return O=x.stateNode,Ts(),fs(hi),fs(Qa),gi(),O.pendingContext&&(O.context=O.pendingContext,O.pendingContext=null),(m===null||m.child===null)&&(Ph(x)?x.flags|=4:m===null||m.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,Fo!==null&&(g3(Fo),Fo=null))),s3(m,x),oo(x),null;case 5:Gc(x);var K=_a(Ys.current);if(E=x.type,m!==null&&x.stateNode!=null)m9(m,x,E,O,K),m.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!O){if(x.stateNode===null)throw Error(r(166));return oo(x),null}if(m=_a(rs.current),Ph(x)){O=x.stateNode,E=x.type;var ne=x.memoizedProps;switch(O[el]=x,O[Nh]=ne,m=(x.mode&1)!==0,E){case"dialog":ds("cancel",O),ds("close",O);break;case"iframe":case"object":case"embed":ds("load",O);break;case"video":case"audio":for(K=0;K<Su.length;K++)ds(Su[K],O);break;case"source":ds("error",O);break;case"img":case"image":case"link":ds("error",O),ds("load",O);break;case"details":ds("toggle",O);break;case"input":rt(O,ne),ds("invalid",O);break;case"select":O._wrapperState={wasMultiple:!!ne.multiple},ds("invalid",O);break;case"textarea":Ot(O,ne),ds("invalid",O)}wr(E,ne),K=null;for(var be in ne)if(ne.hasOwnProperty(be)){var Ie=ne[be];be==="children"?typeof Ie=="string"?O.textContent!==Ie&&(ne.suppressHydrationWarning!==!0&&Th(O.textContent,Ie,m),K=["children",Ie]):typeof Ie=="number"&&O.textContent!==""+Ie&&(ne.suppressHydrationWarning!==!0&&Th(O.textContent,Ie,m),K=["children",""+Ie]):s.hasOwnProperty(be)&&Ie!=null&&be==="onScroll"&&ds("scroll",O)}switch(E){case"input":xe(O),tt(O,ne,!0);break;case"textarea":xe(O),Gt(O);break;case"select":case"option":break;default:typeof ne.onClick=="function"&&(O.onclick=Sd)}O=K,x.updateQueue=O,O!==null&&(x.flags|=4)}else{be=K.nodeType===9?K:K.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=ir(E)),m==="http://www.w3.org/1999/xhtml"?E==="script"?(m=be.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof O.is=="string"?m=be.createElement(E,{is:O.is}):(m=be.createElement(E),E==="select"&&(be=m,O.multiple?be.multiple=!0:O.size&&(be.size=O.size))):m=be.createElementNS(m,E),m[el]=x,m[Nh]=O,h9(m,x,!1,!1),x.stateNode=m;e:{switch(be=br(E,O),E){case"dialog":ds("cancel",m),ds("close",m),K=O;break;case"iframe":case"object":case"embed":ds("load",m),K=O;break;case"video":case"audio":for(K=0;K<Su.length;K++)ds(Su[K],m);K=O;break;case"source":ds("error",m),K=O;break;case"img":case"image":case"link":ds("error",m),ds("load",m),K=O;break;case"details":ds("toggle",m),K=O;break;case"input":rt(m,O),K=He(m,O),ds("invalid",m);break;case"option":K=O;break;case"select":m._wrapperState={wasMultiple:!!O.multiple},K=B({},O,{value:void 0}),ds("invalid",m);break;case"textarea":Ot(m,O),K=vt(m,O),ds("invalid",m);break;default:K=O}wr(E,K),Ie=K;for(ne in Ie)if(Ie.hasOwnProperty(ne)){var Ve=Ie[ne];ne==="style"?Wt(m,Ve):ne==="dangerouslySetInnerHTML"?(Ve=Ve?Ve.__html:void 0,Ve!=null&&kt(m,Ve)):ne==="children"?typeof Ve=="string"?(E!=="textarea"||Ve!=="")&&Ge(m,Ve):typeof Ve=="number"&&Ge(m,""+Ve):ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&ne!=="autoFocus"&&(s.hasOwnProperty(ne)?Ve!=null&&ne==="onScroll"&&ds("scroll",m):Ve!=null&&w(m,ne,Ve,be))}switch(E){case"input":xe(m),tt(m,O,!1);break;case"textarea":xe(m),Gt(m);break;case"option":O.value!=null&&m.setAttribute("value",""+ae(O.value));break;case"select":m.multiple=!!O.multiple,ne=O.value,ne!=null?Qe(m,!!O.multiple,ne,!1):O.defaultValue!=null&&Qe(m,!!O.multiple,O.defaultValue,!0);break;default:typeof K.onClick=="function"&&(m.onclick=Sd)}switch(E){case"button":case"input":case"select":case"textarea":O=!!O.autoFocus;break e;case"img":O=!0;break e;default:O=!1}}O&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return oo(x),null;case 6:if(m&&x.stateNode!=null)g9(m,x,m.memoizedProps,O);else{if(typeof O!="string"&&x.stateNode===null)throw Error(r(166));if(E=_a(Ys.current),_a(rs.current),Ph(x)){if(O=x.stateNode,E=x.memoizedProps,O[el]=x,(ne=O.nodeValue!==E)&&(m=Po,m!==null))switch(m.tag){case 3:Th(O.nodeValue,E,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&Th(O.nodeValue,E,(m.mode&1)!==0)}ne&&(x.flags|=4)}else O=(E.nodeType===9?E:E.ownerDocument).createTextNode(O),O[el]=x,x.stateNode=O}return oo(x),null;case 13:if(fs(hs),O=x.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(Xn&&vr!==null&&(x.mode&1)!==0&&(x.flags&128)===0)mx(),Pd(),x.flags|=98560,ne=!1;else if(ne=Ph(x),O!==null&&O.dehydrated!==null){if(m===null){if(!ne)throw Error(r(318));if(ne=x.memoizedState,ne=ne!==null?ne.dehydrated:null,!ne)throw Error(r(317));ne[el]=x}else Pd(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;oo(x),ne=!1}else Fo!==null&&(g3(Fo),Fo=null),ne=!0;if(!ne)return x.flags&65536?x:null}return(x.flags&128)!==0?(x.lanes=E,x):(O=O!==null,O!==(m!==null&&m.memoizedState!==null)&&O&&(x.child.flags|=8192,(x.mode&1)!==0&&(m===null||(hs.current&1)!==0?ei===0&&(ei=3):y3())),x.updateQueue!==null&&(x.flags|=4),oo(x),null);case 4:return Ts(),s3(m,x),m===null&&wd(x.stateNode.containerInfo),oo(x),null;case 10:return Bg(x.type._context),oo(x),null;case 17:return mi(x.type)&&V0(),oo(x),null;case 19:if(fs(hs),ne=x.memoizedState,ne===null)return oo(x),null;if(O=(x.flags&128)!==0,be=ne.rendering,be===null)if(O)Cx(ne,!1);else{if(ei!==0||m!==null&&(m.flags&128)!==0)for(m=x.child;m!==null;){if(be=ef(m),be!==null){for(x.flags|=128,Cx(ne,!1),O=be.updateQueue,O!==null&&(x.updateQueue=O,x.flags|=4),x.subtreeFlags=0,O=E,E=x.child;E!==null;)ne=E,m=O,ne.flags&=14680066,be=ne.alternate,be===null?(ne.childLanes=0,ne.lanes=m,ne.child=null,ne.subtreeFlags=0,ne.memoizedProps=null,ne.memoizedState=null,ne.updateQueue=null,ne.dependencies=null,ne.stateNode=null):(ne.childLanes=be.childLanes,ne.lanes=be.lanes,ne.child=be.child,ne.subtreeFlags=0,ne.deletions=null,ne.memoizedProps=be.memoizedProps,ne.memoizedState=be.memoizedState,ne.updateQueue=be.updateQueue,ne.type=be.type,m=be.dependencies,ne.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),E=E.sibling;return ts(hs,hs.current&1|2),x.child}m=m.sibling}ne.tail!==null&&At()>ep&&(x.flags|=128,O=!0,Cx(ne,!1),x.lanes=4194304)}else{if(!O)if(m=ef(be),m!==null){if(x.flags|=128,O=!0,E=m.updateQueue,E!==null&&(x.updateQueue=E,x.flags|=4),Cx(ne,!0),ne.tail===null&&ne.tailMode==="hidden"&&!be.alternate&&!Xn)return oo(x),null}else 2*At()-ne.renderingStartTime>ep&&E!==1073741824&&(x.flags|=128,O=!0,Cx(ne,!1),x.lanes=4194304);ne.isBackwards?(be.sibling=x.child,x.child=be):(E=ne.last,E!==null?E.sibling=be:x.child=be,ne.last=be)}return ne.tail!==null?(x=ne.tail,ne.rendering=x,ne.tail=x.sibling,ne.renderingStartTime=At(),x.sibling=null,E=hs.current,ts(hs,O?E&1|2:E&1),x):(oo(x),null);case 22:case 23:return x3(),O=x.memoizedState!==null,m!==null&&m.memoizedState!==null!==O&&(x.flags|=8192),O&&(x.mode&1)!==0?(El&1073741824)!==0&&(oo(x),x.subtreeFlags&6&&(x.flags|=8192)):oo(x),null;case 24:return null;case 25:return null}throw Error(r(156,x.tag))}function cJ(m,x){switch(Ba(x),x.tag){case 1:return mi(x.type)&&V0(),m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 3:return Ts(),fs(hi),fs(Qa),gi(),m=x.flags,(m&65536)!==0&&(m&128)===0?(x.flags=m&-65537|128,x):null;case 5:return Gc(x),null;case 13:if(fs(hs),m=x.memoizedState,m!==null&&m.dehydrated!==null){if(x.alternate===null)throw Error(r(340));Pd()}return m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 19:return fs(hs),null;case 4:return Ts(),null;case 10:return Bg(x.type._context),null;case 22:case 23:return x3(),null;case 24:return null;default:return null}}var Tb=!1,lo=!1,uJ=typeof WeakSet=="function"?WeakSet:Set,Mr=null;function Qg(m,x){var E=m.ref;if(E!==null)if(typeof E=="function")try{E(null)}catch(O){ia(m,x,O)}else E.current=null}function a3(m,x,E){try{E()}catch(O){ia(m,x,O)}}var p9=!1;function dJ(m,x){if(lx=dg,m=ba(),z0(m)){if("selectionStart"in m)var E={start:m.selectionStart,end:m.selectionEnd};else e:{E=(E=m.ownerDocument)&&E.defaultView||window;var O=E.getSelection&&E.getSelection();if(O&&O.rangeCount!==0){E=O.anchorNode;var K=O.anchorOffset,ne=O.focusNode;O=O.focusOffset;try{E.nodeType,ne.nodeType}catch{E=null;break e}var be=0,Ie=-1,Ve=-1,St=0,Jt=0,er=m,Kt=null;t:for(;;){for(var Nr;er!==E||K!==0&&er.nodeType!==3||(Ie=be+K),er!==ne||O!==0&&er.nodeType!==3||(Ve=be+O),er.nodeType===3&&(be+=er.nodeValue.length),(Nr=er.firstChild)!==null;)Kt=er,er=Nr;for(;;){if(er===m)break t;if(Kt===E&&++St===K&&(Ie=be),Kt===ne&&++Jt===O&&(Ve=be),(Nr=er.nextSibling)!==null)break;er=Kt,Kt=er.parentNode}er=Nr}E=Ie===-1||Ve===-1?null:{start:Ie,end:Ve}}else E=null}E=E||{start:0,end:0}}else E=null;for(cx={focusedElem:m,selectionRange:E},dg=!1,Mr=x;Mr!==null;)if(x=Mr,m=x.child,(x.subtreeFlags&1028)!==0&&m!==null)m.return=x,Mr=m;else for(;Mr!==null;){x=Mr;try{var Rr=x.alternate;if((x.flags&1024)!==0)switch(x.tag){case 0:case 11:case 15:break;case 1:if(Rr!==null){var Br=Rr.memoizedProps,Ca=Rr.memoizedState,ft=x.stateNode,et=ft.getSnapshotBeforeUpdate(x.elementType===x.type?Br:Za(x.type,Br),Ca);ft.__reactInternalSnapshotBeforeUpdate=et}break;case 3:var xt=x.stateNode.containerInfo;xt.nodeType===1?xt.textContent="":xt.nodeType===9&&xt.documentElement&&xt.removeChild(xt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(or){ia(x,x.return,or)}if(m=x.sibling,m!==null){m.return=x.return,Mr=m;break}Mr=x.return}return Rr=p9,p9=!1,Rr}function Tx(m,x,E){var O=x.updateQueue;if(O=O!==null?O.lastEffect:null,O!==null){var K=O=O.next;do{if((K.tag&m)===m){var ne=K.destroy;K.destroy=void 0,ne!==void 0&&a3(x,E,ne)}K=K.next}while(K!==O)}}function Eb(m,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var E=x=x.next;do{if((E.tag&m)===m){var O=E.create;E.destroy=O()}E=E.next}while(E!==x)}}function i3(m){var x=m.ref;if(x!==null){var E=m.stateNode;switch(m.tag){case 5:m=E;break;default:m=E}typeof x=="function"?x(m):x.current=m}}function x9(m){var x=m.alternate;x!==null&&(m.alternate=null,x9(x)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(x=m.stateNode,x!==null&&(delete x[el],delete x[Nh],delete x[Pg],delete x[db],delete x[fb])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function y9(m){return m.tag===5||m.tag===3||m.tag===4}function v9(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||y9(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function o3(m,x,E){var O=m.tag;if(O===5||O===6)m=m.stateNode,x?E.nodeType===8?E.parentNode.insertBefore(m,x):E.insertBefore(m,x):(E.nodeType===8?(x=E.parentNode,x.insertBefore(m,E)):(x=E,x.appendChild(m)),E=E._reactRootContainer,E!=null||x.onclick!==null||(x.onclick=Sd));else if(O!==4&&(m=m.child,m!==null))for(o3(m,x,E),m=m.sibling;m!==null;)o3(m,x,E),m=m.sibling}function l3(m,x,E){var O=m.tag;if(O===5||O===6)m=m.stateNode,x?E.insertBefore(m,x):E.appendChild(m);else if(O!==4&&(m=m.child,m!==null))for(l3(m,x,E),m=m.sibling;m!==null;)l3(m,x,E),m=m.sibling}var Ui=null,Kc=!1;function df(m,x,E){for(E=E.child;E!==null;)b9(m,x,E),E=E.sibling}function b9(m,x,E){if(Gr&&typeof Gr.onCommitFiberUnmount=="function")try{Gr.onCommitFiberUnmount(mn,E)}catch{}switch(E.tag){case 5:lo||Qg(E,x);case 6:var O=Ui,K=Kc;Ui=null,df(m,x,E),Ui=O,Kc=K,Ui!==null&&(Kc?(m=Ui,E=E.stateNode,m.nodeType===8?m.parentNode.removeChild(E):m.removeChild(E)):Ui.removeChild(E.stateNode));break;case 18:Ui!==null&&(Kc?(m=Ui,E=E.stateNode,m.nodeType===8?jg(m.parentNode,E):m.nodeType===1&&jg(m,E),no(m)):jg(Ui,E.stateNode));break;case 4:O=Ui,K=Kc,Ui=E.stateNode.containerInfo,Kc=!0,df(m,x,E),Ui=O,Kc=K;break;case 0:case 11:case 14:case 15:if(!lo&&(O=E.updateQueue,O!==null&&(O=O.lastEffect,O!==null))){K=O=O.next;do{var ne=K,be=ne.destroy;ne=ne.tag,be!==void 0&&((ne&2)!==0||(ne&4)!==0)&&a3(E,x,be),K=K.next}while(K!==O)}df(m,x,E);break;case 1:if(!lo&&(Qg(E,x),O=E.stateNode,typeof O.componentWillUnmount=="function"))try{O.props=E.memoizedProps,O.state=E.memoizedState,O.componentWillUnmount()}catch(Ie){ia(E,x,Ie)}df(m,x,E);break;case 21:df(m,x,E);break;case 22:E.mode&1?(lo=(O=lo)||E.memoizedState!==null,df(m,x,E),lo=O):df(m,x,E);break;default:df(m,x,E)}}function w9(m){var x=m.updateQueue;if(x!==null){m.updateQueue=null;var E=m.stateNode;E===null&&(E=m.stateNode=new uJ),x.forEach(function(O){var K=bJ.bind(null,m,O);E.has(O)||(E.add(O),O.then(K,K))})}}function Yc(m,x){var E=x.deletions;if(E!==null)for(var O=0;O<E.length;O++){var K=E[O];try{var ne=m,be=x,Ie=be;e:for(;Ie!==null;){switch(Ie.tag){case 5:Ui=Ie.stateNode,Kc=!1;break e;case 3:Ui=Ie.stateNode.containerInfo,Kc=!0;break e;case 4:Ui=Ie.stateNode.containerInfo,Kc=!0;break e}Ie=Ie.return}if(Ui===null)throw Error(r(160));b9(ne,be,K),Ui=null,Kc=!1;var Ve=K.alternate;Ve!==null&&(Ve.return=null),K.return=null}catch(St){ia(K,x,St)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)_9(x,m),x=x.sibling}function _9(m,x){var E=m.alternate,O=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(Yc(x,m),Ru(m),O&4){try{Tx(3,m,m.return),Eb(3,m)}catch(Br){ia(m,m.return,Br)}try{Tx(5,m,m.return)}catch(Br){ia(m,m.return,Br)}}break;case 1:Yc(x,m),Ru(m),O&512&&E!==null&&Qg(E,E.return);break;case 5:if(Yc(x,m),Ru(m),O&512&&E!==null&&Qg(E,E.return),m.flags&32){var K=m.stateNode;try{Ge(K,"")}catch(Br){ia(m,m.return,Br)}}if(O&4&&(K=m.stateNode,K!=null)){var ne=m.memoizedProps,be=E!==null?E.memoizedProps:ne,Ie=m.type,Ve=m.updateQueue;if(m.updateQueue=null,Ve!==null)try{Ie==="input"&&ne.type==="radio"&&ne.name!=null&&_t(K,ne),br(Ie,be);var St=br(Ie,ne);for(be=0;be<Ve.length;be+=2){var Jt=Ve[be],er=Ve[be+1];Jt==="style"?Wt(K,er):Jt==="dangerouslySetInnerHTML"?kt(K,er):Jt==="children"?Ge(K,er):w(K,Jt,er,St)}switch(Ie){case"input":Ke(K,ne);break;case"textarea":$t(K,ne);break;case"select":var Kt=K._wrapperState.wasMultiple;K._wrapperState.wasMultiple=!!ne.multiple;var Nr=ne.value;Nr!=null?Qe(K,!!ne.multiple,Nr,!1):Kt!==!!ne.multiple&&(ne.defaultValue!=null?Qe(K,!!ne.multiple,ne.defaultValue,!0):Qe(K,!!ne.multiple,ne.multiple?[]:"",!1))}K[Nh]=ne}catch(Br){ia(m,m.return,Br)}}break;case 6:if(Yc(x,m),Ru(m),O&4){if(m.stateNode===null)throw Error(r(162));K=m.stateNode,ne=m.memoizedProps;try{K.nodeValue=ne}catch(Br){ia(m,m.return,Br)}}break;case 3:if(Yc(x,m),Ru(m),O&4&&E!==null&&E.memoizedState.isDehydrated)try{no(x.containerInfo)}catch(Br){ia(m,m.return,Br)}break;case 4:Yc(x,m),Ru(m);break;case 13:Yc(x,m),Ru(m),K=m.child,K.flags&8192&&(ne=K.memoizedState!==null,K.stateNode.isHidden=ne,!ne||K.alternate!==null&&K.alternate.memoizedState!==null||(d3=At())),O&4&&w9(m);break;case 22:if(Jt=E!==null&&E.memoizedState!==null,m.mode&1?(lo=(St=lo)||Jt,Yc(x,m),lo=St):Yc(x,m),Ru(m),O&8192){if(St=m.memoizedState!==null,(m.stateNode.isHidden=St)&&!Jt&&(m.mode&1)!==0)for(Mr=m,Jt=m.child;Jt!==null;){for(er=Mr=Jt;Mr!==null;){switch(Kt=Mr,Nr=Kt.child,Kt.tag){case 0:case 11:case 14:case 15:Tx(4,Kt,Kt.return);break;case 1:Qg(Kt,Kt.return);var Rr=Kt.stateNode;if(typeof Rr.componentWillUnmount=="function"){O=Kt,E=Kt.return;try{x=O,Rr.props=x.memoizedProps,Rr.state=x.memoizedState,Rr.componentWillUnmount()}catch(Br){ia(O,E,Br)}}break;case 5:Qg(Kt,Kt.return);break;case 22:if(Kt.memoizedState!==null){C9(er);continue}}Nr!==null?(Nr.return=Kt,Mr=Nr):C9(er)}Jt=Jt.sibling}e:for(Jt=null,er=m;;){if(er.tag===5){if(Jt===null){Jt=er;try{K=er.stateNode,St?(ne=K.style,typeof ne.setProperty=="function"?ne.setProperty("display","none","important"):ne.display="none"):(Ie=er.stateNode,Ve=er.memoizedProps.style,be=Ve!=null&&Ve.hasOwnProperty("display")?Ve.display:null,Ie.style.display=Ut("display",be))}catch(Br){ia(m,m.return,Br)}}}else if(er.tag===6){if(Jt===null)try{er.stateNode.nodeValue=St?"":er.memoizedProps}catch(Br){ia(m,m.return,Br)}}else if((er.tag!==22&&er.tag!==23||er.memoizedState===null||er===m)&&er.child!==null){er.child.return=er,er=er.child;continue}if(er===m)break e;for(;er.sibling===null;){if(er.return===null||er.return===m)break e;Jt===er&&(Jt=null),er=er.return}Jt===er&&(Jt=null),er.sibling.return=er.return,er=er.sibling}}break;case 19:Yc(x,m),Ru(m),O&4&&w9(m);break;case 21:break;default:Yc(x,m),Ru(m)}}function Ru(m){var x=m.flags;if(x&2){try{e:{for(var E=m.return;E!==null;){if(y9(E)){var O=E;break e}E=E.return}throw Error(r(160))}switch(O.tag){case 5:var K=O.stateNode;O.flags&32&&(Ge(K,""),O.flags&=-33);var ne=v9(m);l3(m,ne,K);break;case 3:case 4:var be=O.stateNode.containerInfo,Ie=v9(m);o3(m,Ie,be);break;default:throw Error(r(161))}}catch(Ve){ia(m,m.return,Ve)}m.flags&=-3}x&4096&&(m.flags&=-4097)}function fJ(m,x,E){Mr=m,S9(m)}function S9(m,x,E){for(var O=(m.mode&1)!==0;Mr!==null;){var K=Mr,ne=K.child;if(K.tag===22&&O){var be=K.memoizedState!==null||Tb;if(!be){var Ie=K.alternate,Ve=Ie!==null&&Ie.memoizedState!==null||lo;Ie=Tb;var St=lo;if(Tb=be,(lo=Ve)&&!St)for(Mr=K;Mr!==null;)be=Mr,Ve=be.child,be.tag===22&&be.memoizedState!==null?T9(K):Ve!==null?(Ve.return=be,Mr=Ve):T9(K);for(;ne!==null;)Mr=ne,S9(ne),ne=ne.sibling;Mr=K,Tb=Ie,lo=St}k9(m)}else(K.subtreeFlags&8772)!==0&&ne!==null?(ne.return=K,Mr=ne):k9(m)}}function k9(m){for(;Mr!==null;){var x=Mr;if((x.flags&8772)!==0){var E=x.alternate;try{if((x.flags&8772)!==0)switch(x.tag){case 0:case 11:case 15:lo||Eb(5,x);break;case 1:var O=x.stateNode;if(x.flags&4&&!lo)if(E===null)O.componentDidMount();else{var K=x.elementType===x.type?E.memoizedProps:Za(x.type,E.memoizedProps);O.componentDidUpdate(K,E.memoizedState,O.__reactInternalSnapshotBeforeUpdate)}var ne=x.updateQueue;ne!==null&&Bs(x,ne,O);break;case 3:var be=x.updateQueue;if(be!==null){if(E=null,x.child!==null)switch(x.child.tag){case 5:E=x.child.stateNode;break;case 1:E=x.child.stateNode}Bs(x,be,E)}break;case 5:var Ie=x.stateNode;if(E===null&&x.flags&4){E=Ie;var Ve=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":Ve.autoFocus&&E.focus();break;case"img":Ve.src&&(E.src=Ve.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var St=x.alternate;if(St!==null){var Jt=St.memoizedState;if(Jt!==null){var er=Jt.dehydrated;er!==null&&no(er)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}lo||x.flags&512&&i3(x)}catch(Kt){ia(x,x.return,Kt)}}if(x===m){Mr=null;break}if(E=x.sibling,E!==null){E.return=x.return,Mr=E;break}Mr=x.return}}function C9(m){for(;Mr!==null;){var x=Mr;if(x===m){Mr=null;break}var E=x.sibling;if(E!==null){E.return=x.return,Mr=E;break}Mr=x.return}}function T9(m){for(;Mr!==null;){var x=Mr;try{switch(x.tag){case 0:case 11:case 15:var E=x.return;try{Eb(4,x)}catch(Ve){ia(x,E,Ve)}break;case 1:var O=x.stateNode;if(typeof O.componentDidMount=="function"){var K=x.return;try{O.componentDidMount()}catch(Ve){ia(x,K,Ve)}}var ne=x.return;try{i3(x)}catch(Ve){ia(x,ne,Ve)}break;case 5:var be=x.return;try{i3(x)}catch(Ve){ia(x,be,Ve)}}}catch(Ve){ia(x,x.return,Ve)}if(x===m){Mr=null;break}var Ie=x.sibling;if(Ie!==null){Ie.return=x.return,Mr=Ie;break}Mr=x.return}}var hJ=Math.ceil,Nb=T.ReactCurrentDispatcher,c3=T.ReactCurrentOwner,sc=T.ReactCurrentBatchConfig,$n=0,vi=null,$a=null,zi=0,El=0,Zg=zc(0),ei=0,Ex=null,Bh=0,Ab=0,u3=0,Nx=null,nl=null,d3=0,ep=1/0,Rd=null,jb=!1,f3=null,ff=null,Pb=!1,hf=null,Fb=0,Ax=0,h3=null,Mb=-1,Ob=0;function Ro(){return($n&6)!==0?At():Mb!==-1?Mb:Mb=At()}function mf(m){return(m.mode&1)===0?1:($n&2)!==0&&zi!==0?zi&-zi:gx.transition!==null?(Ob===0&&(Ob=Yn()),Ob):(m=dn,m!==0||(m=window.event,m=m===void 0?16:K2(m.type)),m)}function Xc(m,x,E,O){if(50<Ax)throw Ax=0,h3=null,Error(r(185));us(m,E,O),(($n&2)===0||m!==vi)&&(m===vi&&(($n&2)===0&&(Ab|=E),ei===4&&gf(m,zi)),sl(m,O),E===1&&$n===0&&(x.mode&1)===0&&(ep=At()+500,q0&&Eu()))}function sl(m,x){var E=m.callbackNode;Sr(m,x);var O=Te(m,m===vi?zi:0);if(O===0)E!==null&&Oe(E),m.callbackNode=null,m.callbackPriority=0;else if(x=O&-O,m.callbackPriority!==x){if(E!=null&&Oe(E),x===1)m.tag===0?Wc(N9.bind(null,m)):jh(N9.bind(null,m)),cb(function(){($n&6)===0&&Eu()}),E=null;else{switch(vl(O)){case 1:E=pt;break;case 4:E=zt;break;case 16:E=xr;break;case 536870912:E=$r;break;default:E=xr}E=R9(E,E9.bind(null,m))}m.callbackPriority=x,m.callbackNode=E}}function E9(m,x){if(Mb=-1,Ob=0,($n&6)!==0)throw Error(r(327));var E=m.callbackNode;if(tp()&&m.callbackNode!==E)return null;var O=Te(m,m===vi?zi:0);if(O===0)return null;if((O&30)!==0||(O&m.expiredLanes)!==0||x)x=Db(m,O);else{x=O;var K=$n;$n|=2;var ne=j9();(vi!==m||zi!==x)&&(Rd=null,ep=At()+500,Uh(m,x));do try{pJ();break}catch(Ie){A9(m,Ie)}while(!0);Lg(),Nb.current=ne,$n=K,$a!==null?x=0:(vi=null,zi=0,x=ei)}if(x!==0){if(x===2&&(K=Dr(m),K!==0&&(O=K,x=m3(m,K))),x===1)throw E=Ex,Uh(m,0),gf(m,O),sl(m,At()),E;if(x===6)gf(m,O);else{if(K=m.current.alternate,(O&30)===0&&!mJ(K)&&(x=Db(m,O),x===2&&(ne=Dr(m),ne!==0&&(O=ne,x=m3(m,ne))),x===1))throw E=Ex,Uh(m,0),gf(m,O),sl(m,At()),E;switch(m.finishedWork=K,m.finishedLanes=O,x){case 0:case 1:throw Error(r(345));case 2:zh(m,nl,Rd);break;case 3:if(gf(m,O),(O&130023424)===O&&(x=d3+500-At(),10<x)){if(Te(m,0)!==0)break;if(K=m.suspendedLanes,(K&O)!==O){Ro(),m.pingedLanes|=m.suspendedLanes&K;break}m.timeoutHandle=Ao(zh.bind(null,m,nl,Rd),x);break}zh(m,nl,Rd);break;case 4:if(gf(m,O),(O&4194240)===O)break;for(x=m.eventTimes,K=-1;0<O;){var be=31-Xt(O);ne=1<<be,be=x[be],be>K&&(K=be),O&=~ne}if(O=K,O=At()-O,O=(120>O?120:480>O?480:1080>O?1080:1920>O?1920:3e3>O?3e3:4320>O?4320:1960*hJ(O/1960))-O,10<O){m.timeoutHandle=Ao(zh.bind(null,m,nl,Rd),O);break}zh(m,nl,Rd);break;case 5:zh(m,nl,Rd);break;default:throw Error(r(329))}}}return sl(m,At()),m.callbackNode===E?E9.bind(null,m):null}function m3(m,x){var E=Nx;return m.current.memoizedState.isDehydrated&&(Uh(m,x).flags|=256),m=Db(m,x),m!==2&&(x=nl,nl=E,x!==null&&g3(x)),m}function g3(m){nl===null?nl=m:nl.push.apply(nl,m)}function mJ(m){for(var x=m;;){if(x.flags&16384){var E=x.updateQueue;if(E!==null&&(E=E.stores,E!==null))for(var O=0;O<E.length;O++){var K=E[O],ne=K.getSnapshot;K=K.value;try{if(!ao(ne(),K))return!1}catch{return!1}}}if(E=x.child,x.subtreeFlags&16384&&E!==null)E.return=x,x=E;else{if(x===m)break;for(;x.sibling===null;){if(x.return===null||x.return===m)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function gf(m,x){for(x&=~u3,x&=~Ab,m.suspendedLanes|=x,m.pingedLanes&=~x,m=m.expirationTimes;0<x;){var E=31-Xt(x),O=1<<E;m[E]=-1,x&=~O}}function N9(m){if(($n&6)!==0)throw Error(r(327));tp();var x=Te(m,0);if((x&1)===0)return sl(m,At()),null;var E=Db(m,x);if(m.tag!==0&&E===2){var O=Dr(m);O!==0&&(x=O,E=m3(m,O))}if(E===1)throw E=Ex,Uh(m,0),gf(m,x),sl(m,At()),E;if(E===6)throw Error(r(345));return m.finishedWork=m.current.alternate,m.finishedLanes=x,zh(m,nl,Rd),sl(m,At()),null}function p3(m,x){var E=$n;$n|=1;try{return m(x)}finally{$n=E,$n===0&&(ep=At()+500,q0&&Eu())}}function $h(m){hf!==null&&hf.tag===0&&($n&6)===0&&tp();var x=$n;$n|=1;var E=sc.transition,O=dn;try{if(sc.transition=null,dn=1,m)return m()}finally{dn=O,sc.transition=E,$n=x,($n&6)===0&&Eu()}}function x3(){El=Zg.current,fs(Zg)}function Uh(m,x){m.finishedWork=null,m.finishedLanes=0;var E=m.timeoutHandle;if(E!==-1&&(m.timeoutHandle=-1,dx(E)),$a!==null)for(E=$a.return;E!==null;){var O=E;switch(Ba(O),O.tag){case 1:O=O.type.childContextTypes,O!=null&&V0();break;case 3:Ts(),fs(hi),fs(Qa),gi();break;case 5:Gc(O);break;case 4:Ts();break;case 13:fs(hs);break;case 19:fs(hs);break;case 10:Bg(O.type._context);break;case 22:case 23:x3()}E=E.return}if(vi=m,$a=m=pf(m.current,null),zi=El=x,ei=0,Ex=null,u3=Ab=Bh=0,nl=Nx=null,Zl!==null){for(x=0;x<Zl.length;x++)if(E=Zl[x],O=E.interleaved,O!==null){E.interleaved=null;var K=O.next,ne=E.pending;if(ne!==null){var be=ne.next;ne.next=K,O.next=be}E.pending=O}Zl=null}return m}function A9(m,x){do{var E=$a;try{if(Lg(),tf.current=of,Tl){for(var O=Zn.memoizedState;O!==null;){var K=O.queue;K!==null&&(K.pending=null),O=O.next}Tl=!1}if(Bi=0,sa=$s=Zn=null,Fu=!1,rl=0,c3.current=null,E===null||E.return===null){ei=1,Ex=x,$a=null;break}e:{var ne=m,be=E.return,Ie=E,Ve=x;if(x=zi,Ie.flags|=32768,Ve!==null&&typeof Ve=="object"&&typeof Ve.then=="function"){var St=Ve,Jt=Ie,er=Jt.tag;if((Jt.mode&1)===0&&(er===0||er===11||er===15)){var Kt=Jt.alternate;Kt?(Jt.updateQueue=Kt.updateQueue,Jt.memoizedState=Kt.memoizedState,Jt.lanes=Kt.lanes):(Jt.updateQueue=null,Jt.memoizedState=null)}var Nr=M(be);if(Nr!==null){Nr.flags&=-257,G(Nr,be,Ie,ne,x),Nr.mode&1&&k(ne,St,x),x=Nr,Ve=St;var Rr=x.updateQueue;if(Rr===null){var Br=new Set;Br.add(Ve),x.updateQueue=Br}else Rr.add(Ve);break e}else{if((x&1)===0){k(ne,St,x),y3();break e}Ve=Error(r(426))}}else if(Xn&&Ie.mode&1){var Ca=M(be);if(Ca!==null){(Ca.flags&65536)===0&&(Ca.flags|=256),G(Ca,be,Ie,ne,x),Fh(Dd(Ve,Ie));break e}}ne=Ve=Dd(Ve,Ie),ei!==4&&(ei=2),Nx===null?Nx=[ne]:Nx.push(ne),ne=be;do{switch(ne.tag){case 3:ne.flags|=65536,x&=-x,ne.lanes|=x;var ft=Cb(ne,Ve,x);Rh(ne,ft);break e;case 1:Ie=Ve;var et=ne.type,xt=ne.stateNode;if((ne.flags&128)===0&&(typeof et.getDerivedStateFromError=="function"||xt!==null&&typeof xt.componentDidCatch=="function"&&(ff===null||!ff.has(xt)))){ne.flags|=65536,x&=-x,ne.lanes|=x;var or=b(ne,Ie,x);Rh(ne,or);break e}}ne=ne.return}while(ne!==null)}F9(E)}catch(Ur){x=Ur,$a===E&&E!==null&&($a=E=E.return);continue}break}while(!0)}function j9(){var m=Nb.current;return Nb.current=of,m===null?of:m}function y3(){(ei===0||ei===3||ei===2)&&(ei=4),vi===null||(Bh&268435455)===0&&(Ab&268435455)===0||gf(vi,zi)}function Db(m,x){var E=$n;$n|=2;var O=j9();(vi!==m||zi!==x)&&(Rd=null,Uh(m,x));do try{gJ();break}catch(K){A9(m,K)}while(!0);if(Lg(),$n=E,Nb.current=O,$a!==null)throw Error(r(261));return vi=null,zi=0,ei}function gJ(){for(;$a!==null;)P9($a)}function pJ(){for(;$a!==null&&!nt();)P9($a)}function P9(m){var x=D9(m.alternate,m,El);m.memoizedProps=m.pendingProps,x===null?F9(m):$a=x,c3.current=null}function F9(m){var x=m;do{var E=x.alternate;if(m=x.return,(x.flags&32768)===0){if(E=lJ(E,x,El),E!==null){$a=E;return}}else{if(E=cJ(E,x),E!==null){E.flags&=32767,$a=E;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{ei=6,$a=null;return}}if(x=x.sibling,x!==null){$a=x;return}$a=x=m}while(x!==null);ei===0&&(ei=5)}function zh(m,x,E){var O=dn,K=sc.transition;try{sc.transition=null,dn=1,xJ(m,x,E,O)}finally{sc.transition=K,dn=O}return null}function xJ(m,x,E,O){do tp();while(hf!==null);if(($n&6)!==0)throw Error(r(327));E=m.finishedWork;var K=m.finishedLanes;if(E===null)return null;if(m.finishedWork=null,m.finishedLanes=0,E===m.current)throw Error(r(177));m.callbackNode=null,m.callbackPriority=0;var ne=E.lanes|E.childLanes;if(qs(m,ne),m===vi&&($a=vi=null,zi=0),(E.subtreeFlags&2064)===0&&(E.flags&2064)===0||Pb||(Pb=!0,R9(xr,function(){return tp(),null})),ne=(E.flags&15990)!==0,(E.subtreeFlags&15990)!==0||ne){ne=sc.transition,sc.transition=null;var be=dn;dn=1;var Ie=$n;$n|=4,c3.current=null,dJ(m,E),_9(E,m),_h(cx),dg=!!lx,cx=lx=null,m.current=E,fJ(E),bt(),$n=Ie,dn=be,sc.transition=ne}else m.current=E;if(Pb&&(Pb=!1,hf=m,Fb=K),ne=m.pendingLanes,ne===0&&(ff=null),zr(E.stateNode),sl(m,At()),x!==null)for(O=m.onRecoverableError,E=0;E<x.length;E++)K=x[E],O(K.value,{componentStack:K.stack,digest:K.digest});if(jb)throw jb=!1,m=f3,f3=null,m;return(Fb&1)!==0&&m.tag!==0&&tp(),ne=m.pendingLanes,(ne&1)!==0?m===h3?Ax++:(Ax=0,h3=m):Ax=0,Eu(),null}function tp(){if(hf!==null){var m=vl(Fb),x=sc.transition,E=dn;try{if(sc.transition=null,dn=16>m?16:m,hf===null)var O=!1;else{if(m=hf,hf=null,Fb=0,($n&6)!==0)throw Error(r(331));var K=$n;for($n|=4,Mr=m.current;Mr!==null;){var ne=Mr,be=ne.child;if((Mr.flags&16)!==0){var Ie=ne.deletions;if(Ie!==null){for(var Ve=0;Ve<Ie.length;Ve++){var St=Ie[Ve];for(Mr=St;Mr!==null;){var Jt=Mr;switch(Jt.tag){case 0:case 11:case 15:Tx(8,Jt,ne)}var er=Jt.child;if(er!==null)er.return=Jt,Mr=er;else for(;Mr!==null;){Jt=Mr;var Kt=Jt.sibling,Nr=Jt.return;if(x9(Jt),Jt===St){Mr=null;break}if(Kt!==null){Kt.return=Nr,Mr=Kt;break}Mr=Nr}}}var Rr=ne.alternate;if(Rr!==null){var Br=Rr.child;if(Br!==null){Rr.child=null;do{var Ca=Br.sibling;Br.sibling=null,Br=Ca}while(Br!==null)}}Mr=ne}}if((ne.subtreeFlags&2064)!==0&&be!==null)be.return=ne,Mr=be;else e:for(;Mr!==null;){if(ne=Mr,(ne.flags&2048)!==0)switch(ne.tag){case 0:case 11:case 15:Tx(9,ne,ne.return)}var ft=ne.sibling;if(ft!==null){ft.return=ne.return,Mr=ft;break e}Mr=ne.return}}var et=m.current;for(Mr=et;Mr!==null;){be=Mr;var xt=be.child;if((be.subtreeFlags&2064)!==0&&xt!==null)xt.return=be,Mr=xt;else e:for(be=et;Mr!==null;){if(Ie=Mr,(Ie.flags&2048)!==0)try{switch(Ie.tag){case 0:case 11:case 15:Eb(9,Ie)}}catch(Ur){ia(Ie,Ie.return,Ur)}if(Ie===be){Mr=null;break e}var or=Ie.sibling;if(or!==null){or.return=Ie.return,Mr=or;break e}Mr=Ie.return}}if($n=K,Eu(),Gr&&typeof Gr.onPostCommitFiberRoot=="function")try{Gr.onPostCommitFiberRoot(mn,m)}catch{}O=!0}return O}finally{dn=E,sc.transition=x}}return!1}function M9(m,x,E){x=Dd(E,x),x=Cb(m,x,1),m=rc(m,x,1),x=Ro(),m!==null&&(us(m,1,x),sl(m,x))}function ia(m,x,E){if(m.tag===3)M9(m,m,E);else for(;x!==null;){if(x.tag===3){M9(x,m,E);break}else if(x.tag===1){var O=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(ff===null||!ff.has(O))){m=Dd(E,m),m=b(x,m,1),x=rc(x,m,1),m=Ro(),x!==null&&(us(x,1,m),sl(x,m));break}}x=x.return}}function yJ(m,x,E){var O=m.pingCache;O!==null&&O.delete(x),x=Ro(),m.pingedLanes|=m.suspendedLanes&E,vi===m&&(zi&E)===E&&(ei===4||ei===3&&(zi&130023424)===zi&&500>At()-d3?Uh(m,0):u3|=E),sl(m,x)}function O9(m,x){x===0&&((m.mode&1)===0?x=1:(x=ya,ya<<=1,(ya&130023424)===0&&(ya=4194304)));var E=Ro();m=Oo(m,x),m!==null&&(us(m,x,E),sl(m,E))}function vJ(m){var x=m.memoizedState,E=0;x!==null&&(E=x.retryLane),O9(m,E)}function bJ(m,x){var E=0;switch(m.tag){case 13:var O=m.stateNode,K=m.memoizedState;K!==null&&(E=K.retryLane);break;case 19:O=m.stateNode;break;default:throw Error(r(314))}O!==null&&O.delete(x),O9(m,E)}var D9;D9=function(m,x,E){if(m!==null)if(m.memoizedProps!==x.pendingProps||hi.current)oe=!0;else{if((m.lanes&E)===0&&(x.flags&128)===0)return oe=!1,n3(m,x,E);oe=(m.flags&131072)!==0}else oe=!1,Xn&&(x.flags&1048576)!==0&&mb(x,Au,x.index);switch(x.lanes=0,x.tag){case 2:var O=x.type;Fn(m,x),m=x.pendingProps;var K=Td(x,Qa.current);Hc(x,E),K=rf(null,x,O,m,K,E);var ne=nf();return x.flags|=1,typeof K=="object"&&K!==null&&typeof K.render=="function"&&K.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,mi(O)?(ne=!0,Ed(x)):ne=!1,x.memoizedState=K.state!==null&&K.state!==void 0?K.state:null,Dh(x),K.updater=cf,x.stateNode=K,K._reactInternals=x,Xg(x,O,m,E),x=Jn(null,x,O,!0,ne,E)):(x.tag=0,Xn&&ne&&K0(x),Ae(null,x,K,E),x=x.child),x;case 16:O=x.elementType;e:{switch(Fn(m,x),m=x.pendingProps,K=O._init,O=K(O._payload),x.type=O,K=x.tag=_J(O),m=Za(O,m),K){case 0:x=kr(null,x,O,m,E);break e;case 1:x=ms(null,x,O,m,E);break e;case 11:x=st(null,x,O,m,E);break e;case 14:x=Ct(null,x,O,Za(O.type,m),E);break e}throw Error(r(306,O,""))}return x;case 0:return O=x.type,K=x.pendingProps,K=x.elementType===O?K:Za(O,K),kr(m,x,O,K,E);case 1:return O=x.type,K=x.pendingProps,K=x.elementType===O?K:Za(O,K),ms(m,x,O,K,E);case 3:e:{if($i(x),m===null)throw Error(r(387));O=x.pendingProps,ne=x.memoizedState,K=ne.element,Ug(m,x),Q0(x,O,null,E);var be=x.memoizedState;if(O=be.element,ne.isDehydrated)if(ne={element:O,isDehydrated:!1,cache:be.cache,pendingSuspenseBoundaries:be.pendingSuspenseBoundaries,transitions:be.transitions},x.updateQueue.baseState=ne,x.memoizedState=ne,x.flags&256){K=Dd(Error(r(423)),x),x=nc(m,x,O,E,K);break e}else if(O!==K){K=Dd(Error(r(424)),x),x=nc(m,x,O,E,K);break e}else for(vr=Yl(x.stateNode.containerInfo.firstChild),Po=x,Xn=!0,Fo=null,E=tl(x,null,O,E),x.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(Pd(),O===K){x=yi(m,x,E);break e}Ae(m,x,O,E)}x=x.child}return x;case 5:return Z0(x),m===null&&Y0(x),O=x.type,K=x.pendingProps,ne=m!==null?m.memoizedProps:null,be=K.children,ux(O,K)?be=null:ne!==null&&ux(O,ne)&&(x.flags|=32),fn(m,x),Ae(m,x,be,E),x.child;case 6:return m===null&&Y0(x),null;case 13:return Ft(m,x,E);case 4:return Pu(x,x.stateNode.containerInfo),O=x.pendingProps,m===null?x.child=Fd(x,null,O,E):Ae(m,x,O,E),x.child;case 11:return O=x.type,K=x.pendingProps,K=x.elementType===O?K:Za(O,K),st(m,x,O,K,E);case 7:return Ae(m,x,x.pendingProps,E),x.child;case 8:return Ae(m,x,x.pendingProps.children,E),x.child;case 12:return Ae(m,x,x.pendingProps.children,E),x.child;case 10:e:{if(O=x.type._context,K=x.pendingProps,ne=x.memoizedProps,be=K.value,ts(Mh,O._currentValue),O._currentValue=be,ne!==null)if(ao(ne.value,be)){if(ne.children===K.children&&!hi.current){x=yi(m,x,E);break e}}else for(ne=x.child,ne!==null&&(ne.return=x);ne!==null;){var Ie=ne.dependencies;if(Ie!==null){be=ne.child;for(var Ve=Ie.firstContext;Ve!==null;){if(Ve.context===O){if(ne.tag===1){Ve=tc(-1,E&-E),Ve.tag=2;var St=ne.updateQueue;if(St!==null){St=St.shared;var Jt=St.pending;Jt===null?Ve.next=Ve:(Ve.next=Jt.next,Jt.next=Ve),St.pending=Ve}}ne.lanes|=E,Ve=ne.alternate,Ve!==null&&(Ve.lanes|=E),$g(ne.return,E,x),Ie.lanes|=E;break}Ve=Ve.next}}else if(ne.tag===10)be=ne.type===x.type?null:ne.child;else if(ne.tag===18){if(be=ne.return,be===null)throw Error(r(341));be.lanes|=E,Ie=be.alternate,Ie!==null&&(Ie.lanes|=E),$g(be,E,x),be=ne.sibling}else be=ne.child;if(be!==null)be.return=ne;else for(be=ne;be!==null;){if(be===x){be=null;break}if(ne=be.sibling,ne!==null){ne.return=be.return,be=ne;break}be=be.return}ne=be}Ae(m,x,K.children,E),x=x.child}return x;case 9:return K=x.type,O=x.pendingProps.children,Hc(x,E),K=Li(K),O=O(K),x.flags|=1,Ae(m,x,O,E),x.child;case 14:return O=x.type,K=Za(O,x.pendingProps),K=Za(O.type,K),Ct(m,x,O,K,E);case 15:return ar(m,x,x.type,x.pendingProps,E);case 17:return O=x.type,K=x.pendingProps,K=x.elementType===O?K:Za(O,K),Fn(m,x),x.tag=1,mi(O)?(m=!0,Ed(x)):m=!1,Hc(x,E),kb(x,O,K),Xg(x,O,K,E),Jn(null,x,O,!0,m,E);case 19:return ka(m,x,E);case 22:return Pr(m,x,E)}throw Error(r(156,x.tag))};function R9(m,x){return Me(m,x)}function wJ(m,x,E,O){this.tag=m,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ac(m,x,E,O){return new wJ(m,x,E,O)}function v3(m){return m=m.prototype,!(!m||!m.isReactComponent)}function _J(m){if(typeof m=="function")return v3(m)?1:0;if(m!=null){if(m=m.$$typeof,m===V)return 11;if(m===re)return 14}return 2}function pf(m,x){var E=m.alternate;return E===null?(E=ac(m.tag,x,m.key,m.mode),E.elementType=m.elementType,E.type=m.type,E.stateNode=m.stateNode,E.alternate=m,m.alternate=E):(E.pendingProps=x,E.type=m.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=m.flags&14680064,E.childLanes=m.childLanes,E.lanes=m.lanes,E.child=m.child,E.memoizedProps=m.memoizedProps,E.memoizedState=m.memoizedState,E.updateQueue=m.updateQueue,x=m.dependencies,E.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},E.sibling=m.sibling,E.index=m.index,E.ref=m.ref,E}function Rb(m,x,E,O,K,ne){var be=2;if(O=m,typeof m=="function")v3(m)&&(be=1);else if(typeof m=="string")be=5;else e:switch(m){case P:return Wh(E.children,K,ne,x);case j:be=8,K|=8;break;case F:return m=ac(12,E,x,K|2),m.elementType=F,m.lanes=ne,m;case Z:return m=ac(13,E,x,K),m.elementType=Z,m.lanes=ne,m;case Y:return m=ac(19,E,x,K),m.elementType=Y,m.lanes=ne,m;case z:return Ib(E,K,ne,x);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case R:be=10;break e;case L:be=9;break e;case V:be=11;break e;case re:be=14;break e;case ue:be=16,O=null;break e}throw Error(r(130,m==null?m:typeof m,""))}return x=ac(be,E,x,K),x.elementType=m,x.type=O,x.lanes=ne,x}function Wh(m,x,E,O){return m=ac(7,m,O,x),m.lanes=E,m}function Ib(m,x,E,O){return m=ac(22,m,O,x),m.elementType=z,m.lanes=E,m.stateNode={isHidden:!1},m}function b3(m,x,E){return m=ac(6,m,null,x),m.lanes=E,m}function w3(m,x,E){return x=ac(4,m.children!==null?m.children:[],m.key,x),x.lanes=E,x.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},x}function SJ(m,x,E,O,K){this.tag=x,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pn(0),this.expirationTimes=Pn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pn(0),this.identifierPrefix=O,this.onRecoverableError=K,this.mutableSourceEagerHydrationData=null}function _3(m,x,E,O,K,ne,be,Ie,Ve){return m=new SJ(m,x,E,Ie,Ve),x===1?(x=1,ne===!0&&(x|=8)):x=0,ne=ac(3,null,null,x),m.current=ne,ne.stateNode=m,ne.memoizedState={element:O,isDehydrated:E,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dh(ne),m}function kJ(m,x,E){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:O==null?null:""+O,children:m,containerInfo:x,implementation:E}}function I9(m){if(!m)return Jl;m=m._reactInternals;e:{if(Se(m)!==m||m.tag!==1)throw Error(r(170));var x=m;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(mi(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(r(171))}if(m.tag===1){var E=m.type;if(mi(E))return Mg(m,E,x)}return x}function L9(m,x,E,O,K,ne,be,Ie,Ve){return m=_3(E,O,!0,m,K,ne,be,Ie,Ve),m.context=I9(null),E=m.current,O=Ro(),K=mf(E),ne=tc(O,K),ne.callback=x??null,rc(E,ne,K),m.current.lanes=K,us(m,K,O),sl(m,O),m}function Lb(m,x,E,O){var K=x.current,ne=Ro(),be=mf(K);return E=I9(E),x.context===null?x.context=E:x.pendingContext=E,x=tc(ne,be),x.payload={element:m},O=O===void 0?null:O,O!==null&&(x.callback=O),m=rc(K,x,be),m!==null&&(Xc(m,K,be,ne),zg(m,K,be)),be}function Bb(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function B9(m,x){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var E=m.retryLane;m.retryLane=E!==0&&E<x?E:x}}function S3(m,x){B9(m,x),(m=m.alternate)&&B9(m,x)}function CJ(){return null}var $9=typeof reportError=="function"?reportError:function(m){console.error(m)};function k3(m){this._internalRoot=m}$b.prototype.render=k3.prototype.render=function(m){var x=this._internalRoot;if(x===null)throw Error(r(409));Lb(m,x,null,null)},$b.prototype.unmount=k3.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var x=m.containerInfo;$h(function(){Lb(null,m,null,null)}),x[Xl]=null}};function $b(m){this._internalRoot=m}$b.prototype.unstable_scheduleHydration=function(m){if(m){var x=qe();m={blockedOn:null,target:m,priority:x};for(var E=0;E<sr.length&&x!==0&&x<sr[E].priority;E++);sr.splice(E,0,m),E===0&&kn(m)}};function C3(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function Ub(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function U9(){}function TJ(m,x,E,O,K){if(K){if(typeof O=="function"){var ne=O;O=function(){var St=Bb(be);ne.call(St)}}var be=L9(x,O,m,0,null,!1,!1,"",U9);return m._reactRootContainer=be,m[Xl]=be.current,wd(m.nodeType===8?m.parentNode:m),$h(),be}for(;K=m.lastChild;)m.removeChild(K);if(typeof O=="function"){var Ie=O;O=function(){var St=Bb(Ve);Ie.call(St)}}var Ve=_3(m,0,!1,null,null,!1,!1,"",U9);return m._reactRootContainer=Ve,m[Xl]=Ve.current,wd(m.nodeType===8?m.parentNode:m),$h(function(){Lb(x,Ve,E,O)}),Ve}function zb(m,x,E,O,K){var ne=E._reactRootContainer;if(ne){var be=ne;if(typeof K=="function"){var Ie=K;K=function(){var Ve=Bb(be);Ie.call(Ve)}}Lb(x,be,m,K)}else be=TJ(E,x,m,K,O);return Bb(be)}$e=function(m){switch(m.tag){case 3:var x=m.stateNode;if(x.current.memoizedState.isDehydrated){var E=On(x.pendingLanes);E!==0&&(fi(x,E|1),sl(x,At()),($n&6)===0&&(ep=At()+500,Eu()))}break;case 13:$h(function(){var O=Oo(m,1);if(O!==null){var K=Ro();Xc(O,m,1,K)}}),S3(m,1)}},Pt=function(m){if(m.tag===13){var x=Oo(m,134217728);if(x!==null){var E=Ro();Xc(x,m,134217728,E)}S3(m,134217728)}},Re=function(m){if(m.tag===13){var x=mf(m),E=Oo(m,x);if(E!==null){var O=Ro();Xc(E,m,x,O)}S3(m,x)}},qe=function(){return dn},Lt=function(m,x){var E=dn;try{return dn=m,x()}finally{dn=E}},we=function(m,x,E){switch(x){case"input":if(Ke(m,E),x=E.name,E.type==="radio"&&x!=null){for(E=m;E.parentNode;)E=E.parentNode;for(E=E.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<E.length;x++){var O=E[x];if(O!==m&&O.form===m.form){var K=La(O);if(!K)throw Error(r(90));se(O),Ke(O,K)}}}break;case"textarea":$t(m,E);break;case"select":x=E.value,x!=null&&Qe(m,!!E.multiple,x,!1)}},Mt=p3,Be=$h;var EJ={usingClientEntryPoint:!1,Events:[Ah,wa,La,at,jt,p3]},jx={findFiberByHostInstance:Cu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},NJ={bundleType:jx.bundleType,version:jx.version,rendererPackageName:jx.rendererPackageName,rendererConfig:jx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=de(m),m===null?null:m.stateNode},findFiberByHostInstance:jx.findFiberByHostInstance||CJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wb.isDisabled&&Wb.supportsFiber)try{mn=Wb.inject(NJ),Gr=Wb}catch{}}return al.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EJ,al.createPortal=function(m,x){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C3(x))throw Error(r(200));return kJ(m,x,null,E)},al.createRoot=function(m,x){if(!C3(m))throw Error(r(299));var E=!1,O="",K=$9;return x!=null&&(x.unstable_strictMode===!0&&(E=!0),x.identifierPrefix!==void 0&&(O=x.identifierPrefix),x.onRecoverableError!==void 0&&(K=x.onRecoverableError)),x=_3(m,1,!1,null,null,E,!1,O,K),m[Xl]=x.current,wd(m.nodeType===8?m.parentNode:m),new k3(x)},al.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var x=m._reactInternals;if(x===void 0)throw typeof m.render=="function"?Error(r(188)):(m=Object.keys(m).join(","),Error(r(268,m)));return m=de(x),m=m===null?null:m.stateNode,m},al.flushSync=function(m){return $h(m)},al.hydrate=function(m,x,E){if(!Ub(x))throw Error(r(200));return zb(null,m,x,!0,E)},al.hydrateRoot=function(m,x,E){if(!C3(m))throw Error(r(405));var O=E!=null&&E.hydratedSources||null,K=!1,ne="",be=$9;if(E!=null&&(E.unstable_strictMode===!0&&(K=!0),E.identifierPrefix!==void 0&&(ne=E.identifierPrefix),E.onRecoverableError!==void 0&&(be=E.onRecoverableError)),x=L9(x,null,m,1,E??null,K,!1,ne,be),m[Xl]=x.current,wd(m),O)for(m=0;m<O.length;m++)E=O[m],K=E._getVersion,K=K(E._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[E,K]:x.mutableSourceEagerHydrationData.push(E,K);return new $b(x)},al.render=function(m,x,E){if(!Ub(x))throw Error(r(200));return zb(null,m,x,!1,E)},al.unmountComponentAtNode=function(m){if(!Ub(m))throw Error(r(40));return m._reactRootContainer?($h(function(){zb(null,null,m,!1,function(){m._reactRootContainer=null,m[Xl]=null})}),!0):!1},al.unstable_batchedUpdates=p3,al.unstable_renderSubtreeIntoContainer=function(m,x,E,O){if(!Ub(E))throw Error(r(200));if(m==null||m._reactInternals===void 0)throw Error(r(38));return zb(m,x,E,!1,O)},al.version="18.3.1-next-f1338f8080-20240426",al}var Y9;function aB(){if(Y9)return N3.exports;Y9=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),N3.exports=DJ(),N3.exports}var X9;function RJ(){if(X9)return Hb;X9=1;var e=aB();return Hb.createRoot=e.createRoot,Hb.hydrateRoot=e.hydrateRoot,Hb}var IJ=RJ();const LJ=Fc(IJ);var Ak=aB();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fv(){return fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fv.apply(this,arguments)}var Nf;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Nf||(Nf={}));const J9="popstate";function BJ(e){e===void 0&&(e={});function t(n,s){let{pathname:a,search:i,hash:o}=n.location;return jk("",{pathname:a,search:i,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:i4(s)}return UJ(t,r,null,e)}function Pa(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function iB(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $J(){return Math.random().toString(36).substr(2,8)}function Q9(e,t){return{usr:e.state,key:e.key,idx:t}}function jk(e,t,r,n){return r===void 0&&(r=null),fv({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?l1(t):t,{state:r,key:t&&t.key||n||$J()})}function i4(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function l1(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function UJ(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,i=s.history,o=Nf.Pop,c=null,u=d();u==null&&(u=0,i.replaceState(fv({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function f(){o=Nf.Pop;let v=d(),C=v==null?null:v-u;u=v,c&&c({action:o,location:y.location,delta:C})}function h(v,C){o=Nf.Push;let S=jk(y.location,v,C);u=d()+1;let w=Q9(S,u),T=y.createHref(S);try{i.pushState(w,"",T)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(T)}a&&c&&c({action:o,location:y.location,delta:1})}function g(v,C){o=Nf.Replace;let S=jk(y.location,v,C);u=d();let w=Q9(S,u),T=y.createHref(S);i.replaceState(w,"",T),a&&c&&c({action:o,location:y.location,delta:0})}function p(v){let C=s.location.origin!=="null"?s.location.origin:s.location.href,S=typeof v=="string"?v:i4(v);return S=S.replace(/ $/,"%20"),Pa(C,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,C)}let y={get action(){return o},get location(){return e(s,i)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(J9,f),c=v,()=>{s.removeEventListener(J9,f),c=null}},createHref(v){return t(s,v)},createURL:p,encodeLocation(v){let C=p(v);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:h,replace:g,go(v){return i.go(v)}};return y}var Z9;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Z9||(Z9={}));function zJ(e,t,r){return r===void 0&&(r="/"),WJ(e,t,r)}function WJ(e,t,r,n){let s=typeof t=="string"?l1(t):t,a=KC(s.pathname||"/",r);if(a==null)return null;let i=oB(e);HJ(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let u=rQ(a);o=ZJ(i[c],u)}return o}function oB(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,i,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&(Pa(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Df([n,c.relativePath]),d=r.concat(c);a.children&&a.children.length>0&&(Pa(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),oB(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:JJ(u,a.index),routesMeta:d})};return e.forEach((a,i)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))s(a,i);else for(let c of lB(a.path))s(a,i,c)}),t}function lB(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let i=lB(n.join("/")),o=[];return o.push(...i.map(c=>c===""?a:[a,c].join("/"))),s&&o.push(...i),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function HJ(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:QJ(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const GJ=/^:[\w-]+$/,VJ=3,qJ=2,KJ=1,YJ=10,XJ=-2,eA=e=>e==="*";function JJ(e,t){let r=e.split("/"),n=r.length;return r.some(eA)&&(n+=XJ),t&&(n+=qJ),r.filter(s=>!eA(s)).reduce((s,a)=>s+(GJ.test(a)?VJ:a===""?KJ:YJ),n)}function QJ(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function ZJ(e,t,r){let{routesMeta:n}=e,s={},a="/",i=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,d=a==="/"?t:t.slice(a.length)||"/",f=eQ({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f)return null;Object.assign(s,f.params),i.push({params:s,pathname:Df([a,f.pathname]),pathnameBase:iQ(Df([a,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(a=Df([a,f.pathnameBase]))}return i}function eQ(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=tQ(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:g}=d;if(h==="*"){let y=o[f]||"";i=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const p=o[f];return g&&!p?u[h]=void 0:u[h]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:e}}function tQ(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),iB(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function rQ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return iB(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function KC(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function nQ(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?l1(e):e;return{pathname:r?r.startsWith("/")?r:sQ(r,t):t,search:oQ(n),hash:lQ(s)}}function sQ(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function P3(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aQ(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function YC(e,t){let r=aQ(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function XC(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=l1(e):(s=fv({},e),Pa(!s.pathname||!s.pathname.includes("?"),P3("?","pathname","search",s)),Pa(!s.pathname||!s.pathname.includes("#"),P3("#","pathname","hash",s)),Pa(!s.search||!s.search.includes("#"),P3("#","search","hash",s)));let a=e===""||s.pathname==="",i=a?"/":s.pathname,o;if(i==null)o=r;else{let f=t.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}o=f>=0?t[f]:"/"}let c=nQ(s,o),u=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Df=e=>e.join("/").replace(/\/\/+/g,"/"),iQ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oQ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,lQ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function cQ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const cB=["post","put","patch","delete"];new Set(cB);const uQ=["get",...cB];new Set(uQ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hv(){return hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hv.apply(this,arguments)}const JC=_.createContext(null),dQ=_.createContext(null),eh=_.createContext(null),M_=_.createContext(null),w0=_.createContext({outlet:null,matches:[],isDataRoute:!1}),uB=_.createContext(null);function fQ(e,t){let{relative:r}=t===void 0?{}:t;c1()||Pa(!1);let{basename:n,navigator:s}=_.useContext(eh),{hash:a,pathname:i,search:o}=fB(e,{relative:r}),c=i;return n!=="/"&&(c=i==="/"?n:Df([n,i])),s.createHref({pathname:c,search:o,hash:a})}function c1(){return _.useContext(M_)!=null}function _0(){return c1()||Pa(!1),_.useContext(M_).location}function dB(e){_.useContext(eh).static||_.useLayoutEffect(e)}function Ko(){let{isDataRoute:e}=_.useContext(w0);return e?CQ():hQ()}function hQ(){c1()||Pa(!1);let e=_.useContext(JC),{basename:t,future:r,navigator:n}=_.useContext(eh),{matches:s}=_.useContext(w0),{pathname:a}=_0(),i=JSON.stringify(YC(s,r.v7_relativeSplatPath)),o=_.useRef(!1);return dB(()=>{o.current=!0}),_.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=XC(u,JSON.parse(i),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Df([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,i,a,e])}function O_(){let{matches:e}=_.useContext(w0),t=e[e.length-1];return t?t.params:{}}function fB(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=_.useContext(eh),{matches:s}=_.useContext(w0),{pathname:a}=_0(),i=JSON.stringify(YC(s,n.v7_relativeSplatPath));return _.useMemo(()=>XC(e,JSON.parse(i),a,r==="path"),[e,i,a,r])}function mQ(e,t){return gQ(e,t)}function gQ(e,t,r,n){c1()||Pa(!1);let{navigator:s}=_.useContext(eh),{matches:a}=_.useContext(w0),i=a[a.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=_0(),d;if(t){var f;let v=typeof t=="string"?l1(t):t;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||Pa(!1),d=v}else d=u;let h=d.pathname||"/",g=h;if(c!=="/"){let v=c.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let p=zJ(e,{pathname:g}),y=bQ(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:Df([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Df([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,r,n);return t&&y?_.createElement(M_.Provider,{value:{location:hv({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Nf.Pop}},y):y}function pQ(){let e=kQ(),t=cQ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),r?_.createElement("pre",{style:s},r):null,null)}const xQ=_.createElement(pQ,null);class yQ extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?_.createElement(w0.Provider,{value:this.props.routeContext},_.createElement(uB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function vQ(e){let{routeContext:t,match:r,children:n}=e,s=_.useContext(JC);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),_.createElement(w0.Provider,{value:t},n)}function bQ(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=(s=r)==null?void 0:s.errors;if(o!=null){let d=i.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);d>=0||Pa(!1),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:g}=r,p=f.route.loader&&h[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||p){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,f,h)=>{let g,p=!1,y=null,v=null;r&&(g=o&&f.route.id?o[f.route.id]:void 0,y=f.route.errorElement||xQ,c&&(u<0&&h===0?(TQ("route-fallback"),p=!0,v=null):u===h&&(p=!0,v=f.route.hydrateFallbackElement||null)));let C=t.concat(i.slice(0,h+1)),S=()=>{let w;return g?w=y:p?w=v:f.route.Component?w=_.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,_.createElement(vQ,{match:f,routeContext:{outlet:d,matches:C,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?_.createElement(yQ,{location:r.location,revalidation:r.revalidation,component:y,error:g,children:S(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):S()},null)}var hB=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(hB||{}),mB=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(mB||{});function wQ(e){let t=_.useContext(JC);return t||Pa(!1),t}function _Q(e){let t=_.useContext(dQ);return t||Pa(!1),t}function SQ(e){let t=_.useContext(w0);return t||Pa(!1),t}function gB(e){let t=SQ(),r=t.matches[t.matches.length-1];return r.route.id||Pa(!1),r.route.id}function kQ(){var e;let t=_.useContext(uB),r=_Q(),n=gB();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function CQ(){let{router:e}=wQ(hB.UseNavigateStable),t=gB(mB.UseNavigateStable),r=_.useRef(!1);return dB(()=>{r.current=!0}),_.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,hv({fromRouteId:t},a)))},[e,t])}const tA={};function TQ(e,t,r){tA[e]||(tA[e]=!0)}function EQ(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function zp(e){let{to:t,replace:r,state:n,relative:s}=e;c1()||Pa(!1);let{future:a,static:i}=_.useContext(eh),{matches:o}=_.useContext(w0),{pathname:c}=_0(),u=Ko(),d=XC(t,YC(o,a.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return _.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function Js(e){Pa(!1)}function NQ(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Nf.Pop,navigator:a,static:i=!1,future:o}=e;c1()&&Pa(!1);let c=t.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:c,navigator:a,static:i,future:hv({v7_relativeSplatPath:!1},o)}),[c,o,a,i]);typeof n=="string"&&(n=l1(n));let{pathname:d="/",search:f="",hash:h="",state:g=null,key:p="default"}=n,y=_.useMemo(()=>{let v=KC(d,c);return v==null?null:{location:{pathname:v,search:f,hash:h,state:g,key:p},navigationType:s}},[c,d,f,h,g,p,s]);return y==null?null:_.createElement(eh.Provider,{value:u},_.createElement(M_.Provider,{children:r,value:y}))}function QC(e){let{children:t,location:r}=e;return mQ(Pk(t),r)}new Promise(()=>{});function Pk(e,t){t===void 0&&(t=[]);let r=[];return _.Children.forEach(e,(n,s)=>{if(!_.isValidElement(n))return;let a=[...t,s];if(n.type===_.Fragment){r.push.apply(r,Pk(n.props.children,a));return}n.type!==Js&&Pa(!1),!n.props.index||!n.props.children||Pa(!1);let i={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Pk(n.props.children,a)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fk(){return Fk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fk.apply(this,arguments)}function AQ(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,a;for(a=0;a<n.length;a++)s=n[a],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function jQ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function PQ(e,t){return e.button===0&&(!t||t==="_self")&&!jQ(e)}const FQ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],MQ="6";try{window.__reactRouterVersion=MQ}catch{}const OQ="startTransition",rA=sB[OQ];function DQ(e){let{basename:t,children:r,future:n,window:s}=e,a=_.useRef();a.current==null&&(a.current=BJ({window:s,v5Compat:!0}));let i=a.current,[o,c]=_.useState({action:i.action,location:i.location}),{v7_startTransition:u}=n||{},d=_.useCallback(f=>{u&&rA?rA(()=>c(f)):c(f)},[c,u]);return _.useLayoutEffect(()=>i.listen(d),[i,d]),_.useEffect(()=>EQ(n),[n]),_.createElement(NQ,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}const RQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IQ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pB=_.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:a,replace:i,state:o,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=AQ(t,FQ),{basename:g}=_.useContext(eh),p,y=!1;if(typeof u=="string"&&IQ.test(u)&&(p=u,RQ))try{let w=new URL(window.location.href),T=u.startsWith("//")?new URL(w.protocol+u):new URL(u),N=KC(T.pathname,g);T.origin===w.origin&&N!=null?u=N+T.search+T.hash:y=!0}catch{}let v=fQ(u,{relative:s}),C=LQ(u,{replace:i,state:o,target:c,preventScrollReset:d,relative:s,viewTransition:f});function S(w){n&&n(w),w.defaultPrevented||C(w)}return _.createElement("a",Fk({},h,{href:p||v,onClick:y||a?n:S,ref:r,target:c}))});var nA;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(nA||(nA={}));var sA;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(sA||(sA={}));function LQ(e,t){let{target:r,replace:n,state:s,preventScrollReset:a,relative:i,viewTransition:o}=t===void 0?{}:t,c=Ko(),u=_0(),d=fB(e,{relative:i});return _.useCallback(f=>{if(PQ(f,r)){f.preventDefault();let h=n!==void 0?n:i4(u)===i4(d);c(e,{replace:h,state:s,preventScrollReset:a,relative:i,viewTransition:o})}},[u,c,d,n,s,r,e,a,i,o])}const ls={student_subjects:1800*1e3,student_active_tests:180*1e3,student_results_table:300*1e3,teacher_subjects:900*1e3,teacher_classes:900*1e3,teacher_tests:600*1e3,teacher_results_table:600*1e3,admin_users:1200*1e3,admin_teachers:1200*1e3,admin_subjects:1800*1e3,admin_academic_years:3600*1e3,admin_tests:900*1e3,admin_results_table:null,admin_teacher_id:3600*1e3,all_tests:1200*1e3,subjects_dropdown:1800*1e3,grades_classes:3600*1e3,test_progress:120*1e3,anti_cheating:120*1e3,word_matching_test:600*1e3,speaking_test_data:3600*1e3},ZC=(e,t={})=>{const{includeExpired:r=!1}=t;try{const n=localStorage.getItem(e);if(!n)return console.log(" Cache: No data found for key:",e),null;const s=JSON.parse(n),{data:a,timestamp:i,ttl:o}=s,c=Date.now()-i,d=typeof o=="number"&&Number.isFinite(o)?c>o:!1;return d&&!r?(console.log(" Cache: Data expired for key:",e,"age:",c,"ttl:",o),localStorage.removeItem(e),null):(console.log(" Cache: Entry found for key:",e,"age:",c,"ttl:",o,"expired:",d),{data:a,timestamp:i,ttl:o,age:c,isExpired:d})}catch(n){return console.log(" Cache: Corrupted data for key:",e,n),localStorage.removeItem(e),null}},Es=e=>{const t=ZC(e);return t?t.data:null},gs=(e,t,r)=>{try{console.log(" Cache: Setting data for key:",e,"ttl:",r),localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now(),ttl:typeof r=="number"&&Number.isFinite(r)?r:r===null?null:void 0})),console.log(" Cache: Data cached successfully for key:",e)}catch{console.log(" Cache: Storage full, cleaning old data for key:",e),xB();try{localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now(),ttl:typeof r=="number"&&Number.isFinite(r)?r:r===null?null:void 0})),console.log(" Cache: Data cached after cleanup for key:",e)}catch{console.warn("Storage full, cannot cache data")}}},xB=()=>{const e=Date.now(),t=Object.keys(localStorage);t.forEach(s=>{try{const a=localStorage.getItem(s);if(a){const{timestamp:i,ttl:o}=JSON.parse(a);e-i>o&&localStorage.removeItem(s)}}catch{localStorage.removeItem(s)}});const r=e-10080*60*1e3;t.forEach(s=>{try{const a=localStorage.getItem(s);if(a){const{timestamp:i}=JSON.parse(a);i<r&&localStorage.removeItem(s)}}catch{localStorage.removeItem(s)}});const n=Object.keys(localStorage);if(n.length>0){const s=n.map(i=>{try{const o=localStorage.getItem(i);if(o){const{timestamp:c}=JSON.parse(o);return{key:i,timestamp:c}}}catch{return{key:i,timestamp:0}}return{key:i,timestamp:0}}),a=Math.ceil(s.length*.25);s.sort((i,o)=>i.timestamp-o.timestamp).slice(0,a).forEach(({key:i})=>localStorage.removeItem(i))}},eT=e=>{Object.keys(localStorage).forEach(r=>{r.includes(e)&&localStorage.removeItem(r)})},u1=(e,t,r)=>{const n=`test_progress_${e}_${t}_${r}`,s=`anti_cheating_${e}_${t}_${r}`;if(localStorage.removeItem(n),localStorage.removeItem(s),t==="speaking_test_data"){const a=`speaking_test_data_${e}_${r}`;localStorage.removeItem(a),console.log(`Cleared speaking test data cache for ${r}`)}console.log(`Cleared test data for ${t}_${r}`)},xp=Object.freeze(Object.defineProperty({__proto__:null,CACHE_TTL:ls,cleanupOldData:xB,clearTestData:u1,clearUserData:eT,getCachedData:Es,getCachedEntry:ZC,setCachedData:gs},Symbol.toStringTag,{value:"Module"}));let Jc=null,Fx=null;function Ww(){if(Fx!==null)return Fx;try{const e="_test";localStorage.setItem(e,"test");const t=localStorage.getItem(e);localStorage.removeItem(e),Fx=t==="test"}catch(e){console.warn("localStorage unavailable, falling back to sessionStorage",e),Fx=!1}return Fx}function mv(){return Ww()?localStorage:sessionStorage}async function tT(e){try{const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}catch(t){return console.warn("Hash computation failed",t),btoa(e).replace(/[^a-zA-Z0-9]/g,"").substring(0,64)}}async function BQ(e,t){try{const r=mv();return r.setItem(e,t),r.getItem(e)===t}catch(r){return console.warn("Storage write failed",r),!1}}async function $Q(e,t){try{const r=mv(),n=await tT(t);return r.setItem(`${e}_hash`,n),await BQ(e,t)}catch(r){return console.warn("Failed to store with hash",r),!1}}async function UQ(e){try{const t=mv(),r=t.getItem(e),n=t.getItem(`${e}_hash`);return!r||!n?!1:await tT(r)===n}catch(t){return console.warn("Hash verification failed",t),!1}}async function zQ(e,t=3,r=200){for(let n=0;n<t;n++){if(await e())return!0;await new Promise(a=>setTimeout(a,r))}return!1}const da={async set(e){const t=Ww(),r=mv();if(!t){console.warn(" localStorage unavailable - using sessionStorage (less persistent)");try{r.setItem("auth_token",e);const a=r.getItem("auth_token")===e;return a&&(Jc=e),a}catch(s){return console.error("sessionStorage fallback failed",s),!1}}const n=await zQ(()=>$Q("auth_token",e));return n&&(Jc=e),n},async get(){if(Jc)return Jc;const e=mv();if(!Ww())try{const t=e.getItem("auth_token");return Jc=t,t}catch(t){return console.error("sessionStorage fallback read failed",t),null}try{const t=e.getItem("auth_token");if(!t)return Jc=null,null;if(e.getItem("auth_token_hash")){if(!await UQ("auth_token"))return Jc=null,null}else{console.log("Migrating legacy token to secure storage format...");try{const n=await tT(t);if(e.setItem("auth_token_hash",n),e.getItem("auth_token_hash")!==n)return console.warn("Failed to store hash during migration"),t}catch(n){console.warn("Failed to migrate token hash:",n)}}return Jc=t,t}catch(t){return console.warn("Failed to get token",t),Jc=null,null}},async clear(){try{Ww()&&(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_token_hash"))}catch{}try{sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("auth_token_hash")}catch{}Jc=null},clearCache(){Jc=null}},o4=Object.freeze(Object.defineProperty({__proto__:null,SecureToken:da},Symbol.toStringTag,{value:"Module"})),yB=_.createContext(),vB=({children:e})=>{const[t,r]=_.useState(null),[n,s]=_.useState(null),[a,i]=_.useState(null),[o,c]=_.useState(!1),[u,d]=_.useState(!0),[f,h]=_.useState(null);_.useEffect(()=>{console.log("[AUTH] Initializing application session..."),v()},[]),_.useEffect(()=>{if(o&&a){console.log("[AUTH] Setting up proactive token refresh...");let W=!1;const D=setInterval(async()=>{if(o&&a&&!W){W=!0;try{const U=a||await(window.tokenManager?.getToken()||da.get());if(U&&g(U))console.log("[AUTH] Token expired, attempting refresh..."),await p()||console.log("[AUTH] Proactive refresh failed, but user remains logged in");else if(U)try{const H=JSON.parse(atob(U.split(".")[1])).exp*1e3,te=Date.now(),Q=H-te;Q<300*1e3&&Q>0&&(console.log(`[AUTH] Token expires in ${Math.round(Q/1e3)} seconds, refreshing...`),await p()||console.log("[AUTH] Proactive refresh failed, but user remains logged in"))}catch(q){console.error("[AUTH] Error parsing token for expiration check:",q)}}catch(U){console.error("[AUTH] Error in proactive refresh:",U)}finally{W=!1}}},300*1e3);return()=>{console.log("[AUTH] Clearing proactive token refresh interval"),clearInterval(D)}}},[o,a]);const g=W=>{if(!W)return!0;try{if(typeof W!="string"||!W.includes("."))return console.warn("[AUTH] Invalid token format - not a JWT"),!0;const D=W.split(".");if(D.length!==3)return console.warn("[AUTH] Invalid token format - not 3 parts"),!0;const U=JSON.parse(atob(D[1])),q=Date.now()/1e3;return U.exp<=q}catch(D){if(console.error("[AUTH] Error decoding token:",D),console.warn("[AUTH] Token appears to be corrupted - clearing authentication"),da.clear().catch(()=>{}),localStorage.removeItem("accessToken"),localStorage.removeItem("refresh_token"),localStorage.removeItem("userData"),window.tokenManager)try{window.tokenManager.clearAuth()}catch(U){console.warn("[AUTH] Error clearing token manager:",U)}return!0}},p=async()=>{const W=localStorage.getItem("refresh_token");if(!W)return console.log("[AUTH] No refresh token found"),!1;try{const D=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:W})});if(D.ok){const U=await D.json();console.log("[AUTH] Token refresh successful"),await da.set(U.accessToken),localStorage.setItem("refresh_token",U.refreshToken),localStorage.setItem("accessToken",U.accessToken);try{window.tokenManager&&(await window.tokenManager.setToken(U.accessToken),U.refreshToken&&window.tokenManager.setRefreshToken(U.refreshToken))}catch{}return i(U.accessToken),!0}else return console.error("[AUTH] Token refresh failed:",D.status),!1}catch(D){return console.error("[AUTH] Token refresh error:",D),!1}},y=async(W,D={})=>{const U=a||await(window.tokenManager?.getToken()||da.get());if(!U)throw new Error("No authentication token found");const q={"Content-Type":"application/json",Authorization:`Bearer ${U}`,...D.headers},H=await fetch(W,{...D,headers:q});if(H.status===401)if(console.log("[AUTH] 401 error, attempting token refresh..."),await p()){const Q=await(window.tokenManager?.getToken()||da.get());return q.Authorization=`Bearer ${Q}`,fetch(W,{...D,headers:q})}else throw console.log("[AUTH] Token refresh failed, returning 401 response"),new Error("Authentication failed - please login again");return H},v=async()=>{try{console.log("[AUTH] Starting session initialization..."),d(!0);const W=await(window.tokenManager?.getToken()||da.get())||localStorage.getItem("accessToken")||localStorage.getItem("token"),D=localStorage.getItem("user_data")||localStorage.getItem("userData"),U=D?JSON.parse(D).role:null;if(console.log("[AUTH] Found stored data:",{hasToken:!!W,hasUser:!!D,role:U}),W&&U&&D)try{const q=JSON.parse(D);if(g(W))if(console.log("[AUTH] Token expired, attempting refresh..."),await p()){console.log("[AUTH] Token refreshed successfully");const te=await(window.tokenManager?.getToken()||da.get());i(te)}else console.log("[AUTH] Token refresh failed, but continuing with existing token..."),i(W);else i(W);s(U),r(q);try{if(window.tokenManager&&W){await window.tokenManager.setToken(W);const H=localStorage.getItem("refresh_token");H&&window.tokenManager.setRefreshToken(H)}}catch{}c(!0),await w(q,U)}catch(q){console.error("[AUTH] Error parsing stored user data:",q),console.log("[AUTH] Invalid user data, but not forcing logout - continuing with empty state"),c(!1)}}catch(W){console.error("[AUTH] Session initialization error:",W),console.log("[AUTH] Initialization error, but not forcing logout - continuing with empty state"),c(!1)}finally{console.log("[AUTH] Session initialization complete"),d(!1)}},C=async W=>{try{if(d(!0),h(null),window.forceLogout||window.preventAutoLogin){console.log(" Login blocked - force logout in progress"),h("Please wait for the logout process to complete.");return}console.log("Attempting login with:",W.username);let D,U;W.username==="admin"?(D={ok:!0,json:()=>({success:!0,token:"test-token"})},U="admin"):(D=await authService.teacherLogin(W),U="teacher");const q=await D.json();await S(D,U,q)}catch(D){j(D)}finally{d(!1)}},S=async(W,D,U)=>{try{if(W.ok&&U.success&&U.token){i(U.token),s(D),r(U),c(!0);const q=U.accessToken||U.token;await da.set(q),localStorage.setItem("refresh_token",U.refreshToken),localStorage.setItem("user_data",JSON.stringify(U)),localStorage.setItem("accessToken",q);try{window.tokenManager&&(await window.tokenManager.setToken(q),U.refreshToken&&window.tokenManager.setRefreshToken(U.refreshToken))}catch{}try{const H=Date.now(),te=10080*60*1e3,Q=[];for(let ae=0;ae<localStorage.length;ae++){const ce=localStorage.key(ae);if(!(!ce||!(ce.startsWith("test_progress_")||ce.startsWith("test_timer_")||ce.startsWith("test_shuffle_order_")||ce.startsWith("student_results_table_")||ce.startsWith("anti_cheating_"))))try{const xe=localStorage.getItem(ce);if(!xe){Q.push(ce);continue}let se=null;if(xe.startsWith("{")||xe.startsWith("[")){const De=JSON.parse(xe),He=De.timestamp||De.lastSaved||De.lastTickAt||De.createdAt||De.updatedAt||De.startedAt||De.started_at;He&&(se=new Date(He).getTime())}if(!se){const De=`${ce}__ts`,He=localStorage.getItem(De);He&&(se=parseInt(He)||null)}if(!se)continue;H-se>te&&Q.push(ce)}catch{}}Q.forEach(ae=>{try{localStorage.removeItem(ae)}catch{}})}catch(H){console.warn("LocalStorage cleanup skipped:",H)}return await w(U,D),!0}else{const q=U.message||W.statusText||"Login failed";return j(new Error(q)),!1}}catch(q){return j(q),!1}},w=async(W,D)=>{try{switch(D){case"admin":console.log("Admin login successful, role:",W.role),console.log("Admin logged in:",W);break;case"teacher":console.log("Teacher login successful, role:",W.role),console.log("Teacher data:",W.teacher),await N(W),await P();break;case"student":console.log("Student login successful"),T(W);break;default:console.warn("Unknown user role:",D)}}catch(U){console.error("Post-login actions error:",U)}},T=W=>{r(W),console.log("Student info populated:",W)},N=async W=>{r(W),console.log("Teacher info populated:",W)},A=async()=>{try{console.log("Initializing teacher cabinet...")}catch(W){console.error("Error initializing teacher cabinet:",W)}},P=async()=>{try{console.log("Checking teacher subjects...")}catch(W){console.error("Error checking teacher subjects:",W)}},j=W=>{h(W.message||"Login failed"),F()},F=()=>{h(null),d(!1)},R=_.useCallback(()=>{L()},[]),L=async()=>{r(null),s(null),i(null),c(!1),h(null);const W=t?.student_id||t?.teacher_id||t?.admin_id||t?.id;W&&eT(W),await da.clear(),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),localStorage.removeItem("user_data"),localStorage.removeItem("user_role"),localStorage.removeItem("accessToken"),localStorage.removeItem("refresh_token"),localStorage.removeItem("testProgress"),localStorage.removeItem("formData"),window.tokenManager&&await window.tokenManager.clearAuth(),setTimeout(()=>{V()},100)},V=()=>{console.log("Interface reset after session clear - redirecting to login"),window.location.replace("/login")},Z=()=>t?.id||null,Y=()=>n==="admin"?t:null,re=()=>n==="admin",ue=()=>re()?t?.admin_id:null,z=()=>n==="teacher"?t?.username:null,X=()=>{console.log("Auth functions available:",{handleUnifiedLogin:typeof C,logout:typeof R,getCurrentTeacherId:typeof Z,isAdmin:typeof re,getCurrentAdmin:typeof Y,getCurrentAdminId:typeof ue,getCurrentTeacherUsername:typeof z})};_.useEffect(()=>(window.logout=R,window.getCurrentTeacherId=Z,window.getCurrentAdmin=Y,window.isAdmin=re,window.getCurrentAdminId=ue,window.getCurrentTeacherUsername=z,window.checkFunctionAvailability=X,()=>{delete window.logout,delete window.getCurrentTeacherId,delete window.getCurrentAdmin,delete window.isAdmin,delete window.getCurrentAdminId,delete window.getCurrentTeacherUsername,delete window.checkFunctionAvailability}),[R]);const I=_.useCallback(W=>{console.log("Setting user data from external auth:",W),r(W),s(W.role),i(W.token),c(!0),d(!1),h(null),da.set(W.token).catch(D=>{console.error("[AUTH] Failed to store token securely:",D)}),localStorage.setItem("user_data",JSON.stringify(W)),localStorage.setItem("accessToken",W.token),window.tokenManager&&window.tokenManager.setToken(W.token).catch(()=>{})},[]),B={user:t,role:n,token:a,isAuthenticated:o,isLoading:u,error:f,login:C,setUserData:I,logout:R,resetLoginForm:F,forceCompleteLogout:L,initializeApplicationSession:v,makeAuthenticatedRequest:y,populateStudentInfo:T,populateTeacherInfo:N,initializeTeacherCabinet:A,checkTeacherSubjects:P,getCurrentTeacherId:Z,getCurrentAdmin:Y,isAdmin:re,getCurrentAdminId:ue,getCurrentTeacherUsername:z,handleLoginResponse:S,handlePostLoginActions:w,handleLoginFailure:j,resetInterfaceAfterSessionClear:V,checkFunctionAvailability:X};return l.jsx(yB.Provider,{value:B,children:e})},Is=()=>{const e=_.useContext(yB);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};class WQ{constructor(){this.baseURL="https://mathayomwatsing.netlify.app/.netlify/functions.",this.timeout=1e4,this.retryCount=3,this.retryDelay=1e3}async getHeaders(){const t=await(window.tokenManager?.getToken()||da.get())||localStorage.getItem("token");return{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}}async sendRequest(t,r){try{return await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}catch(n){throw console.error(" Network error:",n),n}}async request(t,r={}){const n=`${this.baseURL}${t}`,a={method:"GET",headers:await this.getHeaders(),timeout:this.timeout,...r};let i;for(let o=0;o<this.retryCount;o++)try{const c=new AbortController,u=setTimeout(()=>c.abort(),this.timeout),d=await fetch(n,{...a,signal:c.signal});if(clearTimeout(u),!d.ok)throw new Error(`HTTP error! status: ${d.status}`);return await d.json()}catch(c){if(i=c,c.name==="AbortError")throw new Error("Request timeout");o<this.retryCount-1&&(console.warn(`Request failed, retrying in ${this.retryDelay}ms... (attempt ${o+1}/${this.retryCount})`),await new Promise(u=>setTimeout(u,this.retryDelay*Math.pow(2,o))))}throw i}async get(t,r={}){return this.request(t,{...r,method:"GET"})}async post(t,r,n={}){return this.request(t,{...n,method:"POST",body:JSON.stringify(r)})}async put(t,r,n={}){return this.request(t,{...n,method:"PUT",body:JSON.stringify(r)})}async delete(t,r={}){return this.request(t,{...r,method:"DELETE"})}async patch(t,r,n={}){return this.request(t,{...n,method:"PATCH",body:JSON.stringify(r)})}async uploadFile(t,r,n={}){const s=new FormData;s.append("file",r);const a=`${this.baseURL}${t}`,i=await(window.tokenManager?.getToken()||da.get())||localStorage.getItem("token"),o={method:"POST",headers:{...i&&{Authorization:`Bearer ${i}`}},body:s,...n};try{const c=await fetch(a,o);if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);return await c.json()}catch(c){throw c}}async downloadFile(t,r,n={}){const s=`${this.baseURL}${t}`,i={method:"GET",headers:await this.getHeaders(),...n};try{const o=await fetch(s,i);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const c=await o.blob(),u=window.URL.createObjectURL(c),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(u)}catch(o){throw o}}ensureDebugOutput(){let t=document.getElementById("debug-output");return t||(t=document.createElement("div"),t.id="debug-output",t.className="fixed top-4 right-4 w-96 max-h-96 bg-white border border-gray-300 rounded-lg shadow-lg p-4 z-50 overflow-auto",t.innerHTML='<div class="text-sm font-mono text-gray-800">Debug Output</div>',document.body.appendChild(t)),t}async testDbConnection(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/test-db-connection")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Database Connection Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,message:"Database connection successful",data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Database Connection Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,message:"Database connection failed",error:t.message}}}async testStudentLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/student-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:"51706",password:"1"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Student Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Student Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testTeacherLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/teacher-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"Aleksandr_Petrov",password:"465"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Teacher Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Teacher Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testAdminLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/admin-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"admin",password:"admin123"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Admin Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Admin Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetTeacherSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-teacher-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Teacher Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Teacher Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetClassResults(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-class-results")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Class Results Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Class Results Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetStudentSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-student-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Student Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Student Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetStudentTestResults(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-student-test-results")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Student Test Results Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Student Test Results Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testEndpoints(){const t=["/debug/test-student-login","/debug/test-teacher-login","/debug/test-admin-login","/debug/test-get-subjects","/debug/test-get-teacher-subjects","/debug/test-get-class-results","/debug/test-get-student-subjects","/debug/test-get-student-test-results"],r={};for(const n of t)try{const s=await this.get(n);r[n]={success:!0,data:s}}catch(s){r[n]={success:!1,error:s.message}}return r}async debugFunction(t){const r=this.ensureDebugOutput();try{let n;switch(t){case"testDbConnection":n=await this.testDbConnection();break;case"testStudentLogin":n=await this.testStudentLogin();break;case"testTeacherLogin":n=await this.testTeacherLogin();break;case"testAdminLogin":n=await this.testAdminLogin();break;case"testGetSubjects":n=await this.testGetSubjects();break;case"testGetTeacherSubjects":n=await this.testGetTeacherSubjects();break;case"testGetClassResults":n=await this.testGetClassResults();break;case"testGetStudentSubjects":n=await this.testGetStudentSubjects();break;case"testGetStudentTestResults":n=await this.testGetStudentTestResults();break;default:throw new Error(`Unknown debug function: ${t}`)}return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Debug Function: ${t}</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),n}catch(n){throw r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Debug Function Error: ${t}</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${n.message}</pre>
        `),n}}showDebugFunctions(){const t=this.ensureDebugOutput(),r=`
      <div class="text-sm font-mono text-gray-800 mb-4">Debug Functions</div>
      <div class="grid grid-cols-2 gap-2 mb-4">
        <button onclick="apiClient.testDbConnection()" class="px-3 py-2 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 transition-colors">
          Test DB Connection
        </button>
        <button onclick="apiClient.testStudentLogin()" class="px-3 py-2 bg-green-500 text-white text-xs rounded hover:bg-green-600 transition-colors">
          Test Student Login
        </button>
        <button onclick="apiClient.testTeacherLogin()" class="px-3 py-2 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600 transition-colors">
          Test Teacher Login
        </button>
        <button onclick="apiClient.testAdminLogin()" class="px-3 py-2 bg-red-500 text-white text-xs rounded hover:bg-red-600 transition-colors">
          Test Admin Login
        </button>
        <button onclick="apiClient.testGetSubjects()" class="px-3 py-2 bg-purple-500 text-white text-xs rounded hover:bg-purple-600 transition-colors">
          Test Get Subjects
        </button>
        <button onclick="apiClient.testGetTeacherSubjects()" class="px-3 py-2 bg-indigo-500 text-white text-xs rounded hover:bg-indigo-600 transition-colors">
          Test Get Teacher Subjects
        </button>
        <button onclick="apiClient.testGetClassResults()" class="px-3 py-2 bg-pink-500 text-white text-xs rounded hover:bg-pink-600 transition-colors">
          Test Get Class Results
        </button>
        <button onclick="apiClient.testGetStudentSubjects()" class="px-3 py-2 bg-teal-500 text-white text-xs rounded hover:bg-teal-600 transition-colors">
          Test Get Student Subjects
        </button>
        <button onclick="apiClient.testGetStudentTestResults()" class="px-3 py-2 bg-orange-500 text-white text-xs rounded hover:bg-orange-600 transition-colors">
          Test Get Student Test Results
        </button>
        <button onclick="apiClient.testEndpoints()" class="px-3 py-2 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 transition-colors">
          Test All Endpoints
        </button>
      </div>
    `;t.innerHTML=r}}const la=new WQ,rT=_.createContext({});function nT(e){const t=_.useRef(null);return t.current===null&&(t.current=e()),t.current}const sT=typeof window<"u",bB=sT?_.useLayoutEffect:_.useEffect,D_=_.createContext(null);function aT(e,t){e.indexOf(t)===-1&&e.push(t)}function iT(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const c0=(e,t,r)=>r>t?t:r<e?e:r;let oT=()=>{};const u0={},wB=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function _B(e){return typeof e=="object"&&e!==null}const SB=e=>/^0[^.\s]+$/u.test(e);function lT(e){let t;return()=>(t===void 0&&(t=e()),t)}const _c=e=>e,HQ=(e,t)=>r=>t(e(r)),s2=(...e)=>e.reduce(HQ),gv=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class cT{constructor(){this.subscriptions=[]}add(t){return aT(this.subscriptions,t),()=>iT(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let a=0;a<s;a++){const i=this.subscriptions[a];i&&i(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Xu=e=>e*1e3,Ju=e=>e/1e3;function kB(e,t){return t?e*(1e3/t):0}const CB=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,GQ=1e-7,VQ=12;function qQ(e,t,r,n,s){let a,i,o=0;do i=t+(r-t)/2,a=CB(i,n,s)-e,a>0?r=i:t=i;while(Math.abs(a)>GQ&&++o<VQ);return i}function a2(e,t,r,n){if(e===t&&r===n)return _c;const s=a=>qQ(a,0,1,e,r);return a=>a===0||a===1?a:CB(s(a),t,n)}const TB=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,EB=e=>t=>1-e(1-t),NB=a2(.33,1.53,.69,.99),uT=EB(NB),AB=TB(uT),jB=e=>(e*=2)<1?.5*uT(e):.5*(2-Math.pow(2,-10*(e-1))),dT=e=>1-Math.sin(Math.acos(e)),PB=EB(dT),FB=TB(dT),KQ=a2(.42,0,1,1),YQ=a2(0,0,.58,1),MB=a2(.42,0,.58,1),XQ=e=>Array.isArray(e)&&typeof e[0]!="number",OB=e=>Array.isArray(e)&&typeof e[0]=="number",JQ={linear:_c,easeIn:KQ,easeInOut:MB,easeOut:YQ,circIn:dT,circInOut:FB,circOut:PB,backIn:uT,backInOut:AB,backOut:NB,anticipate:jB},QQ=e=>typeof e=="string",aA=e=>{if(OB(e)){oT(e.length===4);const[t,r,n,s]=e;return a2(t,r,n,s)}else if(QQ(e))return JQ[e];return e},Gb=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function ZQ(e,t){let r=new Set,n=new Set,s=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(d){i.has(d)&&(u.schedule(d),e()),d(o)}const u={schedule:(d,f=!1,h=!1)=>{const p=h&&s?r:n;return f&&i.add(d),p.has(d)||p.add(d),d},cancel:d=>{n.delete(d),i.delete(d)},process:d=>{if(o=d,s){a=!0;return}s=!0,[r,n]=[n,r],r.forEach(c),r.clear(),s=!1,a&&(a=!1,u.process(d))}};return u}const eZ=40;function DB(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,i=Gb.reduce((w,T)=>(w[T]=ZQ(a),w),{}),{setup:o,read:c,resolveKeyframes:u,preUpdate:d,update:f,preRender:h,render:g,postRender:p}=i,y=()=>{const w=u0.useManualTiming?s.timestamp:performance.now();r=!1,u0.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(w-s.timestamp,eZ),1)),s.timestamp=w,s.isProcessing=!0,o.process(s),c.process(s),u.process(s),d.process(s),f.process(s),h.process(s),g.process(s),p.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(y))},v=()=>{r=!0,n=!0,s.isProcessing||e(y)};return{schedule:Gb.reduce((w,T)=>{const N=i[T];return w[T]=(A,P=!1,j=!1)=>(r||v(),N.schedule(A,P,j)),w},{}),cancel:w=>{for(let T=0;T<Gb.length;T++)i[Gb[T]].cancel(w)},state:s,steps:i}}const{schedule:Ws,cancel:zf,state:Gi,steps:F3}=DB(typeof requestAnimationFrame<"u"?requestAnimationFrame:_c,!0);let Hw;function tZ(){Hw=void 0}const dl={now:()=>(Hw===void 0&&dl.set(Gi.isProcessing||u0.useManualTiming?Gi.timestamp:performance.now()),Hw),set:e=>{Hw=e,queueMicrotask(tZ)}},RB=e=>t=>typeof t=="string"&&t.startsWith(e),fT=RB("--"),rZ=RB("var(--"),hT=e=>rZ(e)?nZ.test(e.split("/*")[0].trim()):!1,nZ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,d1={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},pv={...d1,transform:e=>c0(0,1,e)},Vb={...d1,default:1},Gy=e=>Math.round(e*1e5)/1e5,mT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function sZ(e){return e==null}const aZ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,gT=(e,t)=>r=>!!(typeof r=="string"&&aZ.test(r)&&r.startsWith(e)||t&&!sZ(r)&&Object.prototype.hasOwnProperty.call(r,t)),IB=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,a,i,o]=n.match(mT);return{[e]:parseFloat(s),[t]:parseFloat(a),[r]:parseFloat(i),alpha:o!==void 0?parseFloat(o):1}},iZ=e=>c0(0,255,e),M3={...d1,transform:e=>Math.round(iZ(e))},nm={test:gT("rgb","red"),parse:IB("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+M3.transform(e)+", "+M3.transform(t)+", "+M3.transform(r)+", "+Gy(pv.transform(n))+")"};function oZ(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Mk={test:gT("#"),parse:oZ,transform:nm.transform},i2=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Sf=i2("deg"),Qu=i2("%"),nn=i2("px"),lZ=i2("vh"),cZ=i2("vw"),iA={...Qu,parse:e=>Qu.parse(e)/100,transform:e=>Qu.transform(e*100)},yp={test:gT("hsl","hue"),parse:IB("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Qu.transform(Gy(t))+", "+Qu.transform(Gy(r))+", "+Gy(pv.transform(n))+")"},Ha={test:e=>nm.test(e)||Mk.test(e)||yp.test(e),parse:e=>nm.test(e)?nm.parse(e):yp.test(e)?yp.parse(e):Mk.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?nm.transform(e):yp.transform(e),getAnimatableNone:e=>{const t=Ha.parse(e);return t.alpha=0,Ha.transform(t)}},uZ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function dZ(e){return isNaN(e)&&typeof e=="string"&&(e.match(mT)?.length||0)+(e.match(uZ)?.length||0)>0}const LB="number",BB="color",fZ="var",hZ="var(",oA="${}",mZ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xv(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let a=0;const o=t.replace(mZ,c=>(Ha.test(c)?(n.color.push(a),s.push(BB),r.push(Ha.parse(c))):c.startsWith(hZ)?(n.var.push(a),s.push(fZ),r.push(c)):(n.number.push(a),s.push(LB),r.push(parseFloat(c))),++a,oA)).split(oA);return{values:r,split:o,indexes:n,types:s}}function $B(e){return xv(e).values}function UB(e){const{split:t,types:r}=xv(e),n=t.length;return s=>{let a="";for(let i=0;i<n;i++)if(a+=t[i],s[i]!==void 0){const o=r[i];o===LB?a+=Gy(s[i]):o===BB?a+=Ha.transform(s[i]):a+=s[i]}return a}}const gZ=e=>typeof e=="number"?0:Ha.test(e)?Ha.getAnimatableNone(e):e;function pZ(e){const t=$B(e);return UB(e)(t.map(gZ))}const Wf={test:dZ,parse:$B,createTransformer:UB,getAnimatableNone:pZ};function O3(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function xZ({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,a=0,i=0;if(!t)s=a=i=r;else{const o=r<.5?r*(1+t):r+t-r*t,c=2*r-o;s=O3(c,o,e+1/3),a=O3(c,o,e),i=O3(c,o,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(i*255),alpha:n}}function l4(e,t){return r=>r>0?t:e}const Zs=(e,t,r)=>e+(t-e)*r,D3=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},yZ=[Mk,nm,yp],vZ=e=>yZ.find(t=>t.test(e));function lA(e){const t=vZ(e);if(!t)return!1;let r=t.parse(e);return t===yp&&(r=xZ(r)),r}const cA=(e,t)=>{const r=lA(e),n=lA(t);if(!r||!n)return l4(e,t);const s={...r};return a=>(s.red=D3(r.red,n.red,a),s.green=D3(r.green,n.green,a),s.blue=D3(r.blue,n.blue,a),s.alpha=Zs(r.alpha,n.alpha,a),nm.transform(s))},Ok=new Set(["none","hidden"]);function bZ(e,t){return Ok.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function wZ(e,t){return r=>Zs(e,t,r)}function pT(e){return typeof e=="number"?wZ:typeof e=="string"?hT(e)?l4:Ha.test(e)?cA:kZ:Array.isArray(e)?zB:typeof e=="object"?Ha.test(e)?cA:_Z:l4}function zB(e,t){const r=[...e],n=r.length,s=e.map((a,i)=>pT(a)(a,t[i]));return a=>{for(let i=0;i<n;i++)r[i]=s[i](a);return r}}function _Z(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=pT(e[s])(e[s],t[s]));return s=>{for(const a in n)r[a]=n[a](s);return r}}function SZ(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],i=e.indexes[a][n[a]],o=e.values[i]??0;r[s]=o,n[a]++}return r}const kZ=(e,t)=>{const r=Wf.createTransformer(t),n=xv(e),s=xv(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?Ok.has(e)&&!s.values.length||Ok.has(t)&&!n.values.length?bZ(e,t):s2(zB(SZ(n,s),s.values),r):l4(e,t)};function WB(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Zs(e,t,r):pT(e)(e,t)}const CZ=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Ws.update(t,r),stop:()=>zf(t),now:()=>Gi.isProcessing?Gi.timestamp:dl.now()}},HB=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let a=0;a<s;a++)n+=Math.round(e(a/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},c4=2e4;function xT(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<c4;)t+=r,n=e.next(t);return t>=c4?1/0:t}function TZ(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(xT(n),c4);return{type:"keyframes",ease:a=>n.next(s*a).value/t,duration:Ju(s)}}const EZ=5;function GB(e,t,r){const n=Math.max(t-EZ,0);return kB(r-e(n),t-n)}const fa={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},R3=.001;function NZ({duration:e=fa.duration,bounce:t=fa.bounce,velocity:r=fa.velocity,mass:n=fa.mass}){let s,a,i=1-t;i=c0(fa.minDamping,fa.maxDamping,i),e=c0(fa.minDuration,fa.maxDuration,Ju(e)),i<1?(s=u=>{const d=u*i,f=d*e,h=d-r,g=Dk(u,i),p=Math.exp(-f);return R3-h/g*p},a=u=>{const f=u*i*e,h=f*r+r,g=Math.pow(i,2)*Math.pow(u,2)*e,p=Math.exp(-f),y=Dk(Math.pow(u,2),i);return(-s(u)+R3>0?-1:1)*((h-g)*p)/y}):(s=u=>{const d=Math.exp(-u*e),f=(u-r)*e+1;return-R3+d*f},a=u=>{const d=Math.exp(-u*e),f=(r-u)*(e*e);return d*f});const o=5/e,c=jZ(s,a,o);if(e=Xu(e),isNaN(c))return{stiffness:fa.stiffness,damping:fa.damping,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:i*2*Math.sqrt(n*u),duration:e}}}const AZ=12;function jZ(e,t,r){let n=r;for(let s=1;s<AZ;s++)n=n-e(n)/t(n);return n}function Dk(e,t){return e*Math.sqrt(1-t*t)}const PZ=["duration","bounce"],FZ=["stiffness","damping","mass"];function uA(e,t){return t.some(r=>e[r]!==void 0)}function MZ(e){let t={velocity:fa.velocity,stiffness:fa.stiffness,damping:fa.damping,mass:fa.mass,isResolvedFromDuration:!1,...e};if(!uA(e,FZ)&&uA(e,PZ))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,a=2*c0(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:fa.mass,stiffness:s,damping:a}}else{const r=NZ(e);t={...t,...r,mass:fa.mass},t.isResolvedFromDuration=!0}return t}function u4(e=fa.visualDuration,t=fa.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const a=r.keyframes[0],i=r.keyframes[r.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:f,velocity:h,isResolvedFromDuration:g}=MZ({...r,velocity:-Ju(r.velocity||0)}),p=h||0,y=u/(2*Math.sqrt(c*d)),v=i-a,C=Ju(Math.sqrt(c/d)),S=Math.abs(v)<5;n||(n=S?fa.restSpeed.granular:fa.restSpeed.default),s||(s=S?fa.restDelta.granular:fa.restDelta.default);let w;if(y<1){const N=Dk(C,y);w=A=>{const P=Math.exp(-y*C*A);return i-P*((p+y*C*v)/N*Math.sin(N*A)+v*Math.cos(N*A))}}else if(y===1)w=N=>i-Math.exp(-C*N)*(v+(p+C*v)*N);else{const N=C*Math.sqrt(y*y-1);w=A=>{const P=Math.exp(-y*C*A),j=Math.min(N*A,300);return i-P*((p+y*C*v)*Math.sinh(j)+N*v*Math.cosh(j))/N}}const T={calculatedDuration:g&&f||null,next:N=>{const A=w(N);if(g)o.done=N>=f;else{let P=N===0?p:0;y<1&&(P=N===0?Xu(p):GB(w,N,A));const j=Math.abs(P)<=n,F=Math.abs(i-A)<=s;o.done=j&&F}return o.value=o.done?i:A,o},toString:()=>{const N=Math.min(xT(T),c4),A=HB(P=>T.next(N*P).value,N,30);return N+"ms "+A},toTransition:()=>{}};return T}u4.applyToOptions=e=>{const t=TZ(e,100,u4);return e.ease=t.ease,e.duration=Xu(t.duration),e.type="keyframes",e};function Rk({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:o,max:c,restDelta:u=.5,restSpeed:d}){const f=e[0],h={done:!1,value:f},g=j=>o!==void 0&&j<o||c!==void 0&&j>c,p=j=>o===void 0?c:c===void 0||Math.abs(o-j)<Math.abs(c-j)?o:c;let y=r*t;const v=f+y,C=i===void 0?v:i(v);C!==v&&(y=C-f);const S=j=>-y*Math.exp(-j/n),w=j=>C+S(j),T=j=>{const F=S(j),R=w(j);h.done=Math.abs(F)<=u,h.value=h.done?C:R};let N,A;const P=j=>{g(h.value)&&(N=j,A=u4({keyframes:[h.value,p(h.value)],velocity:GB(w,j,h.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return P(0),{calculatedDuration:null,next:j=>{let F=!1;return!A&&N===void 0&&(F=!0,T(j),P(j)),N!==void 0&&j>=N?A.next(j-N):(!F&&T(j),h)}}}function OZ(e,t,r){const n=[],s=r||u0.mix||WB,a=e.length-1;for(let i=0;i<a;i++){let o=s(e[i],e[i+1]);if(t){const c=Array.isArray(t)?t[i]||_c:t;o=s2(c,o)}n.push(o)}return n}function DZ(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const a=e.length;if(oT(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=OZ(t,n,s),c=o.length,u=d=>{if(i&&d<e[0])return t[0];let f=0;if(c>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const h=gv(e[f],e[f+1],d);return o[f](h)};return r?d=>u(c0(e[0],e[a-1],d)):u}function RZ(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=gv(0,t,n);e.push(Zs(r,1,s))}}function IZ(e){const t=[0];return RZ(t,e.length-1),t}function LZ(e,t){return e.map(r=>r*t)}function BZ(e,t){return e.map(()=>t||MB).splice(0,e.length-1)}function Vy({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=XQ(n)?n.map(aA):aA(n),a={done:!1,value:t[0]},i=LZ(r&&r.length===t.length?r:IZ(t),e),o=DZ(i,t,{ease:Array.isArray(s)?s:BZ(t,s)});return{calculatedDuration:e,next:c=>(a.value=o(c),a.done=c>=e,a)}}const $Z=e=>e!==null;function yT(e,{repeat:t,repeatType:r="loop"},n,s=1){const a=e.filter($Z),o=s<0||t&&r!=="loop"&&t%2===1?0:a.length-1;return!o||n===void 0?a[o]:n}const UZ={decay:Rk,inertia:Rk,tween:Vy,keyframes:Vy,spring:u4};function VB(e){typeof e.type=="string"&&(e.type=UZ[e.type])}class vT{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const zZ=e=>e/100;class bT extends vT{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==dl.now()&&this.tick(dl.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;VB(t);const{type:r=Vy,repeat:n=0,repeatDelay:s=0,repeatType:a,velocity:i=0}=t;let{keyframes:o}=t;const c=r||Vy;c!==Vy&&typeof o[0]!="number"&&(this.mixKeyframes=s2(zZ,WB(o[0],o[1])),o=[0,100]);const u=c({...t,keyframes:o});a==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...o].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=xT(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=u}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:a,mirroredGenerator:i,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:f,repeatType:h,repeatDelay:g,type:p,onUpdate:y,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const C=this.currentTime-u*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?C<0:C>s;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let w=this.currentTime,T=n;if(f){const j=Math.min(this.currentTime,s)/o;let F=Math.floor(j),R=j%1;!R&&j>=1&&(R=1),R===1&&F--,F=Math.min(F,f+1),!!(F%2)&&(h==="reverse"?(R=1-R,g&&(R-=g/o)):h==="mirror"&&(T=i)),w=c0(0,1,R)*o}const N=S?{done:!1,value:d[0]}:T.next(w);a&&(N.value=a(N.value));let{done:A}=N;!S&&c!==null&&(A=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return P&&p!==Rk&&(N.value=yT(d,this.options,v,this.speed)),y&&y(N.value),P&&this.finish(),N}then(t,r){return this.finished.then(t,r)}get duration(){return Ju(this.calculatedDuration)}get time(){return Ju(this.currentTime)}set time(t){t=Xu(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(dl.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Ju(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=CZ,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(dl.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function WZ(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const sm=e=>e*180/Math.PI,Ik=e=>{const t=sm(Math.atan2(e[1],e[0]));return Lk(t)},HZ={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Ik,rotateZ:Ik,skewX:e=>sm(Math.atan(e[1])),skewY:e=>sm(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Lk=e=>(e=e%360,e<0&&(e+=360),e),dA=Ik,fA=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),hA=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),GZ={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:fA,scaleY:hA,scale:e=>(fA(e)+hA(e))/2,rotateX:e=>Lk(sm(Math.atan2(e[6],e[5]))),rotateY:e=>Lk(sm(Math.atan2(-e[2],e[0]))),rotateZ:dA,rotate:dA,skewX:e=>sm(Math.atan(e[4])),skewY:e=>sm(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Bk(e){return e.includes("scale")?1:0}function $k(e,t){if(!e||e==="none")return Bk(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=GZ,s=r;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=HZ,s=o}if(!s)return Bk(t);const a=n[t],i=s[1].split(",").map(qZ);return typeof a=="function"?a(i):i[a]}const VZ=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return $k(r,t)};function qZ(e){return parseFloat(e.trim())}const f1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],h1=new Set(f1),mA=e=>e===d1||e===nn,KZ=new Set(["x","y","z"]),YZ=f1.filter(e=>!KZ.has(e));function XZ(e){const t=[];return YZ.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const dm={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>$k(t,"x"),y:(e,{transform:t})=>$k(t,"y")};dm.translateX=dm.x;dm.translateY=dm.y;const fm=new Set;let Uk=!1,zk=!1,Wk=!1;function qB(){if(zk){const e=Array.from(fm).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=XZ(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([a,i])=>{n.getValue(a)?.set(i)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}zk=!1,Uk=!1,fm.forEach(e=>e.complete(Wk)),fm.clear()}function KB(){fm.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(zk=!0)})}function JZ(){Wk=!0,KB(),qB(),Wk=!1}class wT{constructor(t,r,n,s,a,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=a,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(fm.add(this),Uk||(Uk=!0,Ws.read(KB),Ws.resolveKeyframes(qB))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const a=s?.get(),i=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&r){const o=n.readValue(r,i);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=i),s&&a===void 0&&s.set(t[0])}WZ(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),fm.delete(this)}cancel(){this.state==="scheduled"&&(fm.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const QZ=e=>e.startsWith("--");function ZZ(e,t,r){QZ(t)?e.style.setProperty(t,r):e.style[t]=r}const eee=lT(()=>window.ScrollTimeline!==void 0),tee={};function ree(e,t){const r=lT(e);return()=>tee[t]??r()}const YB=ree(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Dy=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,gA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Dy([0,.65,.55,1]),circOut:Dy([.55,0,1,.45]),backIn:Dy([.31,.01,.66,-.59]),backOut:Dy([.33,1.53,.69,.99])};function XB(e,t){if(e)return typeof e=="function"?YB()?HB(e,t):"ease-out":OB(e)?Dy(e):Array.isArray(e)?e.map(r=>XB(r,t)||gA.easeOut):gA[e]}function nee(e,t,r,{delay:n=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:c}={},u=void 0){const d={[t]:r};c&&(d.offset=c);const f=XB(o,s);Array.isArray(f)&&(d.easing=f);const h={delay:n,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:i==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),e.animate(d,h)}function JB(e){return typeof e=="function"&&"applyToOptions"in e}function see({type:e,...t}){return JB(e)&&YB()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class aee extends vT{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:a,allowFlatten:i=!1,finalKeyframe:o,onComplete:c}=t;this.isPseudoElement=!!a,this.allowFlatten=i,this.options=t,oT(typeof t.type!="string");const u=see(t);this.animation=nee(r,n,s,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=yT(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):ZZ(r,n,d),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Ju(Number(t))}get time(){return Ju(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Xu(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&eee()?(this.animation.timeline=t,_c):r(this)}}const QB={anticipate:jB,backInOut:AB,circInOut:FB};function iee(e){return e in QB}function oee(e){typeof e.ease=="string"&&iee(e.ease)&&(e.ease=QB[e.ease])}const pA=10;class lee extends aee{constructor(t){oee(t),VB(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:a,...i}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const o=new bT({...i,autoplay:!1}),c=Xu(this.finishedTime??this.time);r.setWithVelocity(o.sample(c-pA).value,o.sample(c).value,pA),o.stop()}}const xA=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Wf.test(e)||e==="0")&&!e.startsWith("url("));function cee(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function uee(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],i=xA(s,t),o=xA(a,t);return!i||!o?!1:cee(e)||(r==="spring"||JB(r))&&n}function Hk(e){e.duration=0,e.type}const dee=new Set(["opacity","clipPath","filter","transform"]),fee=lT(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function hee(e){const{motionValue:t,name:r,repeatDelay:n,repeatType:s,damping:a,type:i}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return fee()&&r&&dee.has(r)&&(r!=="transform"||!u)&&!c&&!n&&s!=="mirror"&&a!==0&&i!=="inertia"}const mee=40;class gee extends vT{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:i="loop",keyframes:o,name:c,motionValue:u,element:d,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=dl.now();const h={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:a,repeatType:i,name:c,motionValue:u,element:d,...f},g=d?.KeyframeResolver||wT;this.keyframeResolver=new g(o,(p,y,v)=>this.onKeyframesResolved(p,y,h,!v),c,u,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:a,type:i,velocity:o,delay:c,isHandoff:u,onUpdate:d}=n;this.resolvedAt=dl.now(),uee(t,a,i,o)||((u0.instantAnimations||!c)&&d?.(yT(t,n,r)),t[0]=t[t.length-1],Hk(n),n.repeat=0);const h={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>mee?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},g=!u&&hee(h)?new lee({...h,element:h.motionValue.owner.current}):new bT(h);g.finished.then(()=>this.notifyFinished()).catch(_c),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),JZ()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const pee=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function xee(e){const t=pee.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function ZB(e,t,r=1){const[n,s]=xee(e);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const i=a.trim();return wB(i)?parseFloat(i):i}return hT(s)?ZB(s,t,r+1):s}function _T(e,t){return e?.[t]??e?.default??e}const e$=new Set(["width","height","top","left","right","bottom",...f1]),yee={test:e=>e==="auto",parse:e=>e},t$=e=>t=>t.test(e),r$=[d1,nn,Qu,Sf,cZ,lZ,yee],yA=e=>r$.find(t$(e));function vee(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||SB(e):!0}const bee=new Set(["brightness","contrast","saturate","opacity"]);function wee(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(mT)||[];if(!n)return e;const s=r.replace(n,"");let a=bee.has(t)?1:0;return n!==r&&(a*=100),t+"("+a+s+")"}const _ee=/\b([a-z-]*)\(.*?\)/gu,Gk={...Wf,getAnimatableNone:e=>{const t=e.match(_ee);return t?t.map(wee).join(" "):e}},vA={...d1,transform:Math.round},See={rotate:Sf,rotateX:Sf,rotateY:Sf,rotateZ:Sf,scale:Vb,scaleX:Vb,scaleY:Vb,scaleZ:Vb,skew:Sf,skewX:Sf,skewY:Sf,distance:nn,translateX:nn,translateY:nn,translateZ:nn,x:nn,y:nn,z:nn,perspective:nn,transformPerspective:nn,opacity:pv,originX:iA,originY:iA,originZ:nn},ST={borderWidth:nn,borderTopWidth:nn,borderRightWidth:nn,borderBottomWidth:nn,borderLeftWidth:nn,borderRadius:nn,radius:nn,borderTopLeftRadius:nn,borderTopRightRadius:nn,borderBottomRightRadius:nn,borderBottomLeftRadius:nn,width:nn,maxWidth:nn,height:nn,maxHeight:nn,top:nn,right:nn,bottom:nn,left:nn,padding:nn,paddingTop:nn,paddingRight:nn,paddingBottom:nn,paddingLeft:nn,margin:nn,marginTop:nn,marginRight:nn,marginBottom:nn,marginLeft:nn,backgroundPositionX:nn,backgroundPositionY:nn,...See,zIndex:vA,fillOpacity:pv,strokeOpacity:pv,numOctaves:vA},kee={...ST,color:Ha,backgroundColor:Ha,outlineColor:Ha,fill:Ha,stroke:Ha,borderColor:Ha,borderTopColor:Ha,borderRightColor:Ha,borderBottomColor:Ha,borderLeftColor:Ha,filter:Gk,WebkitFilter:Gk},n$=e=>kee[e];function s$(e,t){let r=n$(e);return r!==Gk&&(r=Wf),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const Cee=new Set(["auto","none","0"]);function Tee(e,t,r){let n=0,s;for(;n<e.length&&!s;){const a=e[n];typeof a=="string"&&!Cee.has(a)&&xv(a).values.length&&(s=e[n]),n++}if(s&&r)for(const a of t)e[a]=s$(r,s)}class Eee extends wT{constructor(t,r,n,s,a){super(t,r,n,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),hT(u))){const d=ZB(u,r.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!e$.has(n)||t.length!==2)return;const[s,a]=t,i=yA(s),o=yA(a);if(i!==o)if(mA(i)&&mA(o))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else dm[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||vee(t[s]))&&n.push(s);n.length&&Tee(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=dm[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=n.length-1,i=n[a];n[a]=dm[r](t.measureViewportBox(),window.getComputedStyle(t.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,c])=>{t.getValue(o).set(c)}),this.resolveNoneKeyframes()}}function Nee(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const s=r?.[e]??n.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const a$=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function i$(e){return _B(e)&&"offsetHeight"in e}const bA=30,Aee=e=>!isNaN(parseFloat(e));class jee{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const s=dl.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=dl.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Aee(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new cT);const n=this.events[t].add(r);return t==="change"?()=>{n(),Ws.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=dl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>bA)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,bA);return kB(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Wp(e,t){return new jee(e,t)}const{schedule:kT}=DB(queueMicrotask,!1),eu={x:!1,y:!1};function o$(){return eu.x||eu.y}function Pee(e){return e==="x"||e==="y"?eu[e]?null:(eu[e]=!0,()=>{eu[e]=!1}):eu.x||eu.y?null:(eu.x=eu.y=!0,()=>{eu.x=eu.y=!1})}function l$(e,t){const r=Nee(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function wA(e){return!(e.pointerType==="touch"||o$())}function Fee(e,t,r={}){const[n,s,a]=l$(e,r),i=o=>{if(!wA(o))return;const{target:c}=o,u=t(c,o);if(typeof u!="function"||!c)return;const d=f=>{wA(f)&&(u(f),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return n.forEach(o=>{o.addEventListener("pointerenter",i,s)}),a}const c$=(e,t)=>t?e===t?!0:c$(e,t.parentElement):!1,CT=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Mee=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Oee(e){return Mee.has(e.tagName)||e.tabIndex!==-1}const Gw=new WeakSet;function _A(e){return t=>{t.key==="Enter"&&e(t)}}function I3(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Dee=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=_A(()=>{if(Gw.has(r))return;I3(r,"down");const s=_A(()=>{I3(r,"up")}),a=()=>I3(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",a,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function SA(e){return CT(e)&&!o$()}function Ree(e,t,r={}){const[n,s,a]=l$(e,r),i=o=>{const c=o.currentTarget;if(!SA(o))return;Gw.add(c);const u=t(c,o),d=(g,p)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),Gw.has(c)&&Gw.delete(c),SA(g)&&typeof u=="function"&&u(g,{success:p})},f=g=>{d(g,c===window||c===document||r.useGlobalTarget||c$(c,g.target))},h=g=>{d(g,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",h,s)};return n.forEach(o=>{(r.useGlobalTarget?window:o).addEventListener("pointerdown",i,s),i$(o)&&(o.addEventListener("focus",u=>Dee(u,s)),!Oee(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function u$(e){return _B(e)&&"ownerSVGElement"in e}function Iee(e){return u$(e)&&e.tagName==="svg"}const yo=e=>!!(e&&e.getVelocity),Lee=[...r$,Ha,Wf],Bee=e=>Lee.find(t$(e)),TT=_.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class $ee extends _.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=i$(n)&&n.offsetWidth||0,a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Uee({children:e,isPresent:t,anchorX:r,root:n}){const s=_.useId(),a=_.useRef(null),i=_.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=_.useContext(TT);return _.useInsertionEffect(()=>{const{width:c,height:u,top:d,left:f,right:h}=i.current;if(t||!a.current||!c||!u)return;const g=r==="left"?`left: ${f}`:`right: ${h}`;a.current.dataset.motionPopId=s;const p=document.createElement("style");o&&(p.nonce=o);const y=n??document.head;return y.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${g}px !important;
            top: ${d}px !important;
          }
        `),()=>{y.contains(p)&&y.removeChild(p)}},[t]),l.jsx($ee,{isPresent:t,childRef:a,sizeRef:i,children:_.cloneElement(e,{ref:a})})}const zee=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:a,mode:i,anchorX:o,root:c})=>{const u=nT(Wee),d=_.useId();let f=!0,h=_.useMemo(()=>(f=!1,{id:d,initial:t,isPresent:r,custom:s,onExitComplete:g=>{u.set(g,!0);for(const p of u.values())if(!p)return;n&&n()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[r,u,n]);return a&&f&&(h={...h}),_.useMemo(()=>{u.forEach((g,p)=>u.set(p,!1))},[r]),_.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),i==="popLayout"&&(e=l.jsx(Uee,{isPresent:r,anchorX:o,root:c,children:e})),l.jsx(D_.Provider,{value:h,children:e})};function Wee(){return new Map}function d$(e=!0){const t=_.useContext(D_);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,a=_.useId();_.useEffect(()=>{if(e)return s(a)},[e]);const i=_.useCallback(()=>e&&n&&n(a),[a,n,e]);return!r&&n?[!1,i]:[!0]}const qb=e=>e.key||"";function kA(e){const t=[];return _.Children.forEach(e,r=>{_.isValidElement(r)&&t.push(r)}),t}const Uo=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1,anchorX:o="left",root:c})=>{const[u,d]=d$(i),f=_.useMemo(()=>kA(e),[e]),h=i&&!u?[]:f.map(qb),g=_.useRef(!0),p=_.useRef(f),y=nT(()=>new Map),[v,C]=_.useState(f),[S,w]=_.useState(f);bB(()=>{g.current=!1,p.current=f;for(let A=0;A<S.length;A++){const P=qb(S[A]);h.includes(P)?y.delete(P):y.get(P)!==!0&&y.set(P,!1)}},[S,h.length,h.join("-")]);const T=[];if(f!==v){let A=[...f];for(let P=0;P<S.length;P++){const j=S[P],F=qb(j);h.includes(F)||(A.splice(P,0,j),T.push(j))}return a==="wait"&&T.length&&(A=T),w(kA(A)),C(f),null}const{forceRender:N}=_.useContext(rT);return l.jsx(l.Fragment,{children:S.map(A=>{const P=qb(A),j=i&&!u?!1:f===S||h.includes(P),F=()=>{if(y.has(P))y.set(P,!0);else return;let R=!0;y.forEach(L=>{L||(R=!1)}),R&&(N?.(),w(p.current),i&&d?.(),n&&n())};return l.jsx(zee,{isPresent:j,initial:!g.current||r?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,root:c,onExitComplete:j?void 0:F,anchorX:o,children:A},P)})})},f$=_.createContext({strict:!1}),CA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Hp={};for(const e in CA)Hp[e]={isEnabled:t=>CA[e].some(r=>!!t[r])};function Hee(e){for(const t in e)Hp[t]={...Hp[t],...e[t]}}const Gee=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function d4(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Gee.has(e)}let h$=e=>!d4(e);function Vee(e){typeof e=="function"&&(h$=t=>t.startsWith("on")?!d4(t):e(t))}try{Vee(require("@emotion/is-prop-valid").default)}catch{}function qee(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(h$(s)||r===!0&&d4(s)||!t&&!d4(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const R_=_.createContext({});function I_(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function yv(e){return typeof e=="string"||Array.isArray(e)}const ET=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],NT=["initial",...ET];function L_(e){return I_(e.animate)||NT.some(t=>yv(e[t]))}function m$(e){return!!(L_(e)||e.variants)}function Kee(e,t){if(L_(e)){const{initial:r,animate:n}=e;return{initial:r===!1||yv(r)?r:void 0,animate:yv(n)?n:void 0}}return e.inherit!==!1?t:{}}function Yee(e){const{initial:t,animate:r}=Kee(e,_.useContext(R_));return _.useMemo(()=>({initial:t,animate:r}),[TA(t),TA(r)])}function TA(e){return Array.isArray(e)?e.join(" "):e}const vv={};function Xee(e){for(const t in e)vv[t]=e[t],fT(t)&&(vv[t].isCSSVariable=!0)}function g$(e,{layout:t,layoutId:r}){return h1.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!vv[e]||e==="opacity")}const Jee={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Qee=f1.length;function Zee(e,t,r){let n="",s=!0;for(let a=0;a<Qee;a++){const i=f1[a],o=e[i];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(i.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||r){const u=a$(o,ST[i]);if(!c){s=!1;const d=Jee[i]||i;n+=`${d}(${u}) `}r&&(t[i]=u)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function AT(e,t,r){const{style:n,vars:s,transformOrigin:a}=e;let i=!1,o=!1;for(const c in t){const u=t[c];if(h1.has(c)){i=!0;continue}else if(fT(c)){s[c]=u;continue}else{const d=a$(u,ST[c]);c.startsWith("origin")?(o=!0,a[c]=d):n[c]=d}}if(t.transform||(i||r?n.transform=Zee(t,e.transform,r):n.transform&&(n.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;n.transformOrigin=`${c} ${u} ${d}`}}const jT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function p$(e,t,r){for(const n in t)!yo(t[n])&&!g$(n,r)&&(e[n]=t[n])}function ete({transformTemplate:e},t){return _.useMemo(()=>{const r=jT();return AT(r,t,e),Object.assign({},r.vars,r.style)},[t])}function tte(e,t){const r=e.style||{},n={};return p$(n,r,e),Object.assign(n,ete(e,t)),n}function rte(e,t){const r={},n=tte(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const nte={offset:"stroke-dashoffset",array:"stroke-dasharray"},ste={offset:"strokeDashoffset",array:"strokeDasharray"};function ate(e,t,r=1,n=0,s=!0){e.pathLength=1;const a=s?nte:ste;e[a.offset]=nn.transform(-n);const i=nn.transform(t),o=nn.transform(r);e[a.array]=`${i} ${o}`}function x$(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:a=1,pathOffset:i=0,...o},c,u,d){if(AT(e,o,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:h}=e;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=d?.transformBox??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),s!==void 0&&ate(f,s,a,i,!1)}const y$=()=>({...jT(),attrs:{}}),v$=e=>typeof e=="string"&&e.toLowerCase()==="svg";function ite(e,t,r,n){const s=_.useMemo(()=>{const a=y$();return x$(a,t,v$(n),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};p$(a,e.style,e),s.style={...a,...s.style}}return s}const ote=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function PT(e){return typeof e!="string"||e.includes("-")?!1:!!(ote.indexOf(e)>-1||/[A-Z]/u.test(e))}function lte(e,t,r,{latestValues:n},s,a=!1){const o=(PT(e)?ite:rte)(t,n,s,e),c=qee(t,typeof e=="string",a),u=e!==_.Fragment?{...c,...o,ref:r}:{},{children:d}=t,f=_.useMemo(()=>yo(d)?d.get():d,[d]);return _.createElement(e,{...u,children:f})}function EA(e){const t=[{},{}];return e?.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function FT(e,t,r,n){if(typeof t=="function"){const[s,a]=EA(n);t=t(r!==void 0?r:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=EA(n);t=t(r!==void 0?r:e.custom,s,a)}return t}function Vw(e){return yo(e)?e.get():e}function cte({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:ute(r,n,s,e),renderState:t()}}function ute(e,t,r,n){const s={},a=n(e,{});for(const h in a)s[h]=Vw(a[h]);let{initial:i,animate:o}=e;const c=L_(e),u=m$(e);t&&u&&!c&&e.inherit!==!1&&(i===void 0&&(i=t.initial),o===void 0&&(o=t.animate));let d=r?r.initial===!1:!1;d=d||i===!1;const f=d?o:i;if(f&&typeof f!="boolean"&&!I_(f)){const h=Array.isArray(f)?f:[f];for(let g=0;g<h.length;g++){const p=FT(e,h[g]);if(p){const{transitionEnd:y,transition:v,...C}=p;for(const S in C){let w=C[S];if(Array.isArray(w)){const T=d?w.length-1:0;w=w[T]}w!==null&&(s[S]=w)}for(const S in y)s[S]=y[S]}}}return s}const b$=e=>(t,r)=>{const n=_.useContext(R_),s=_.useContext(D_),a=()=>cte(e,t,n,s);return r?a():nT(a)};function MT(e,t,r){const{style:n}=e,s={};for(const a in n)(yo(n[a])||t.style&&yo(t.style[a])||g$(a,e)||r?.getValue(a)?.liveStyle!==void 0)&&(s[a]=n[a]);return s}const dte=b$({scrapeMotionValuesFromProps:MT,createRenderState:jT});function w$(e,t,r){const n=MT(e,t,r);for(const s in e)if(yo(e[s])||yo(t[s])){const a=f1.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[a]=e[s]}return n}const fte=b$({scrapeMotionValuesFromProps:w$,createRenderState:y$}),hte=Symbol.for("motionComponentSymbol");function vp(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function mte(e,t,r){return _.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):vp(r)&&(r.current=n))},[t])}const OT=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),gte="framerAppearId",_$="data-"+OT(gte),S$=_.createContext({});function pte(e,t,r,n,s){const{visualElement:a}=_.useContext(R_),i=_.useContext(f$),o=_.useContext(D_),c=_.useContext(TT).reducedMotion,u=_.useRef(null);n=n||i.renderer,!u.current&&n&&(u.current=n(e,{visualState:t,parent:a,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,f=_.useContext(S$);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&xte(u.current,r,s,f);const h=_.useRef(!1);_.useInsertionEffect(()=>{d&&h.current&&d.update(r,o)});const g=r[_$],p=_.useRef(!!g&&!window.MotionHandoffIsComplete?.(g)&&window.MotionHasOptimisedAnimation?.(g));return bB(()=>{d&&(h.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),p.current&&d.animationState&&d.animationState.animateChanges())}),_.useEffect(()=>{d&&(!p.current&&d.animationState&&d.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(g)}),p.current=!1),d.enteringChildren=void 0)}),d}function xte(e,t,r,n){const{layoutId:s,layout:a,drag:i,dragConstraints:o,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:k$(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!i||o&&vp(o),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:c,layoutRoot:u})}function k$(e){if(e)return e.options.allowProjection!==!1?e.projection:k$(e.parent)}function L3(e,{forwardMotionProps:t=!1}={},r,n){r&&Hee(r);const s=PT(e)?fte:dte;function a(o,c){let u;const d={..._.useContext(TT),...o,layoutId:yte(o)},{isStatic:f}=d,h=Yee(o),g=s(o,f);if(!f&&sT){vte();const p=bte(d);u=p.MeasureLayout,h.visualElement=pte(e,g,d,n,p.ProjectionNode)}return l.jsxs(R_.Provider,{value:h,children:[u&&h.visualElement?l.jsx(u,{visualElement:h.visualElement,...d}):null,lte(e,o,mte(g,h.visualElement,c),g,f,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const i=_.forwardRef(a);return i[hte]=e,i}function yte({layoutId:e}){const t=_.useContext(rT).id;return t&&e!==void 0?t+"-"+e:e}function vte(e,t){_.useContext(f$).strict}function bte(e){const{drag:t,layout:r}=Hp;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function wte(e,t){if(typeof Proxy>"u")return L3;const r=new Map,n=(a,i)=>L3(a,i,e,t),s=(a,i)=>n(a,i);return new Proxy(s,{get:(a,i)=>i==="create"?n:(r.has(i)||r.set(i,L3(i,void 0,e,t)),r.get(i))})}function C$({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function _te({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Ste(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function B3(e){return e===void 0||e===1}function Vk({scale:e,scaleX:t,scaleY:r}){return!B3(e)||!B3(t)||!B3(r)}function Jh(e){return Vk(e)||T$(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function T$(e){return NA(e.x)||NA(e.y)}function NA(e){return e&&e!=="0%"}function f4(e,t,r){const n=e-r,s=t*n;return r+s}function AA(e,t,r,n,s){return s!==void 0&&(e=f4(e,s,n)),f4(e,r,n)+t}function qk(e,t=0,r=1,n,s){e.min=AA(e.min,t,r,n,s),e.max=AA(e.max,t,r,n,s)}function E$(e,{x:t,y:r}){qk(e.x,t.translate,t.scale,t.originPoint),qk(e.y,r.translate,r.scale,r.originPoint)}const jA=.999999999999,PA=1.0000000000001;function kte(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let a,i;for(let o=0;o<s;o++){a=r[o],i=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&wp(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,E$(e,i)),n&&Jh(a.latestValues)&&wp(e,a.latestValues))}t.x<PA&&t.x>jA&&(t.x=1),t.y<PA&&t.y>jA&&(t.y=1)}function bp(e,t){e.min=e.min+t,e.max=e.max+t}function FA(e,t,r,n,s=.5){const a=Zs(e.min,e.max,s);qk(e,t,r,a,n)}function wp(e,t){FA(e.x,t.x,t.scaleX,t.scale,t.originX),FA(e.y,t.y,t.scaleY,t.scale,t.originY)}function N$(e,t){return C$(Ste(e.getBoundingClientRect(),t))}function Cte(e,t,r){const n=N$(e,r),{scroll:s}=t;return s&&(bp(n.x,s.offset.x),bp(n.y,s.offset.y)),n}const MA=()=>({translate:0,scale:1,origin:0,originPoint:0}),_p=()=>({x:MA(),y:MA()}),OA=()=>({min:0,max:0}),Na=()=>({x:OA(),y:OA()}),Kk={current:null},A$={current:!1};function Tte(){if(A$.current=!0,!!sT)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Kk.current=e.matches;e.addEventListener("change",t),t()}else Kk.current=!1}const Ete=new WeakMap;function Nte(e,t,r){for(const n in t){const s=t[n],a=r[n];if(yo(s))e.addValue(n,s);else if(yo(a))e.addValue(n,Wp(s,{owner:e}));else if(a!==s)if(e.hasValue(n)){const i=e.getValue(n);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=e.getStaticValue(n);e.addValue(n,Wp(i!==void 0?i:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const DA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Ate{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=dl.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Ws.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=i;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=L_(r),this.isVariantNode=m$(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const h in f){const g=f[h];c[h]!==void 0&&yo(g)&&g.set(c[h])}}mount(t){this.current=t,Ete.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),A$.current||Tte(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Kk.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),zf(this.notifyUpdate),zf(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=h1.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&Ws.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Hp){const r=Hp[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Na()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<DA.length;n++){const s=DA[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,i=t[a];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=Nte(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Wp(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(wB(n)||SB(n))?n=parseFloat(n):!Bee(n)&&Wf.test(r)&&(n=s$(t,r)),this.setBaseTarget(t,yo(n)?n.get():n)),yo(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const a=FT(this.props,r,this.presenceContext?.custom);a&&(n=a[t])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!yo(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new cT),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){kT.render(this.render)}}class j$ extends Ate{constructor(){super(...arguments),this.KeyframeResolver=Eee}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;yo(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function P$(e,{style:t,vars:r},n,s){const a=e.style;let i;for(i in t)a[i]=t[i];s?.applyProjectionStyles(a,n);for(i in r)a.setProperty(i,r[i])}function jte(e){return window.getComputedStyle(e)}class Pte extends j${constructor(){super(...arguments),this.type="html",this.renderInstance=P$}readValueFromInstance(t,r){if(h1.has(r))return this.projection?.isProjecting?Bk(r):VZ(t,r);{const n=jte(t),s=(fT(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return N$(t,r)}build(t,r,n){AT(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return MT(t,r,n)}}const F$=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Fte(e,t,r,n){P$(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(F$.has(s)?s:OT(s),t.attrs[s])}class Mte extends j${constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Na}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(h1.has(r)){const n=n$(r);return n&&n.default||0}return r=F$.has(r)?r:OT(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return w$(t,r,n)}build(t,r,n){x$(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){Fte(t,r,n,s)}mount(t){this.isSVGTag=v$(t.tagName),super.mount(t)}}const Ote=(e,t)=>PT(e)?new Mte(t):new Pte(t,{allowProjection:e!==_.Fragment});function Np(e,t,r){const n=e.getProps();return FT(n,t,r!==void 0?r:n.custom,e)}const Yk=e=>Array.isArray(e);function Dte(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Wp(r))}function Rte(e){return Yk(e)?e[e.length-1]||0:e}function Ite(e,t){const r=Np(e,t);let{transitionEnd:n={},transition:s={},...a}=r||{};a={...a,...n};for(const i in a){const o=Rte(a[i]);Dte(e,i,o)}}function Lte(e){return!!(yo(e)&&e.add)}function Xk(e,t){const r=e.getValue("willChange");if(Lte(r))return r.add(t);if(!r&&u0.WillChange){const n=new u0.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function M$(e){return e.props[_$]}const Bte=e=>e!==null;function $te(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(Bte),a=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[a]}const Ute={type:"spring",stiffness:500,damping:25,restSpeed:10},zte=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Wte={type:"keyframes",duration:.8},Hte={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Gte=(e,{keyframes:t})=>t.length>2?Wte:h1.has(e)?e.startsWith("scale")?zte(t[1]):Ute:Hte;function Vte({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:o,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const DT=(e,t,r,n={},s,a)=>i=>{const o=_T(n,e)||{},c=o.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Xu(c);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:h=>{t.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:s};Vte(o)||Object.assign(d,Gte(e,d)),d.duration&&(d.duration=Xu(d.duration)),d.repeatDelay&&(d.repeatDelay=Xu(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Hk(d),d.delay===0&&(f=!0)),(u0.instantAnimations||u0.skipAnimations)&&(f=!0,Hk(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,f&&!a&&t.get()!==void 0){const h=$te(d.keyframes,o);if(h!==void 0){Ws.update(()=>{d.onUpdate(h),d.onComplete()});return}}return o.isSync?new bT(d):new gee(d)};function qte({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function O$(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:i,...o}=t;n&&(a=n);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in o){const f=e.getValue(d,e.latestValues[d]??null),h=o[d];if(h===void 0||u&&qte(u,d))continue;const g={delay:r,..._T(a||{},d)},p=f.get();if(p!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===p&&!g.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const C=M$(e);if(C){const S=window.MotionHandoffAnimation(C,d,Ws);S!==null&&(g.startTime=S,y=!0)}}Xk(e,d),f.start(DT(d,f,h,e.shouldReduceMotion&&e$.has(d)?{type:!1}:g,e,y));const v=f.animation;v&&c.push(v)}return i&&Promise.all(c).then(()=>{Ws.update(()=>{i&&Ite(e,i)})}),c}function D$(e,t,r,n=0,s=1){const a=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),i=e.size,o=(i-1)*n;return typeof r=="function"?r(a,i):s===1?a*n:o-a*n}function Jk(e,t,r={}){const n=Np(e,t,r.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const a=n?()=>Promise.all(O$(e,n,r)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=s;return Kte(e,t,c,u,d,f,r)}:()=>Promise.resolve(),{when:o}=s;if(o){const[c,u]=o==="beforeChildren"?[a,i]:[i,a];return c().then(()=>u())}else return Promise.all([a(),i(r.delay)])}function Kte(e,t,r=0,n=0,s=0,a=1,i){const o=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),o.push(Jk(c,t,{...i,delay:r+(typeof n=="function"?0:n)+D$(e.variantChildren,c,n,s,a)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(o)}function Yte(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(a=>Jk(e,a,r));n=Promise.all(s)}else if(typeof t=="string")n=Jk(e,t,r);else{const s=typeof t=="function"?Np(e,t,r.custom):t;n=Promise.all(O$(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function R$(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const Xte=NT.length;function I$(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?I$(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<Xte;r++){const n=NT[r],s=e.props[n];(yv(s)||s===!1)&&(t[n]=s)}return t}const Jte=[...ET].reverse(),Qte=ET.length;function Zte(e){return t=>Promise.all(t.map(({animation:r,options:n})=>Yte(e,r,n)))}function ere(e){let t=Zte(e),r=RA(),n=!0;const s=c=>(u,d)=>{const f=Np(e,d,c==="exit"?e.presenceContext?.custom:void 0);if(f){const{transition:h,transitionEnd:g,...p}=f;u={...u,...p,...g}}return u};function a(c){t=c(e)}function i(c){const{props:u}=e,d=I$(e.parent)||{},f=[],h=new Set;let g={},p=1/0;for(let v=0;v<Qte;v++){const C=Jte[v],S=r[C],w=u[C]!==void 0?u[C]:d[C],T=yv(w),N=C===c?S.isActive:null;N===!1&&(p=v);let A=w===d[C]&&w!==u[C]&&T;if(A&&n&&e.manuallyAnimateOnMount&&(A=!1),S.protectedKeys={...g},!S.isActive&&N===null||!w&&!S.prevProp||I_(w)||typeof w=="boolean")continue;const P=tre(S.prevProp,w);let j=P||C===c&&S.isActive&&!A&&T||v>p&&T,F=!1;const R=Array.isArray(w)?w:[w];let L=R.reduce(s(C),{});N===!1&&(L={});const{prevResolvedValues:V={}}=S,Z={...V,...L},Y=z=>{j=!0,h.has(z)&&(F=!0,h.delete(z)),S.needsAnimating[z]=!0;const X=e.getValue(z);X&&(X.liveStyle=!1)};for(const z in Z){const X=L[z],I=V[z];if(g.hasOwnProperty(z))continue;let B=!1;Yk(X)&&Yk(I)?B=!R$(X,I):B=X!==I,B?X!=null?Y(z):h.add(z):X!==void 0&&h.has(z)?Y(z):S.protectedKeys[z]=!0}S.prevProp=w,S.prevResolvedValues=L,S.isActive&&(g={...g,...L}),n&&e.blockInitialAnimation&&(j=!1);const re=A&&P;j&&(!re||F)&&f.push(...R.map(z=>{const X={type:C};if(typeof z=="string"&&n&&!re&&e.manuallyAnimateOnMount&&e.parent){const{parent:I}=e,B=Np(I,z);if(I.enteringChildren&&B){const{delayChildren:W}=B.transition||{};X.delay=D$(I.enteringChildren,e,W)}}return{animation:z,options:X}}))}if(h.size){const v={};if(typeof u.initial!="boolean"){const C=Np(e,Array.isArray(u.initial)?u.initial[0]:u.initial);C&&C.transition&&(v.transition=C.transition)}h.forEach(C=>{const S=e.getBaseTarget(C),w=e.getValue(C);w&&(w.liveStyle=!0),v[C]=S??null}),f.push({animation:v})}let y=!!f.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(y=!1),n=!1,y?t(f):Promise.resolve()}function o(c,u){if(r[c].isActive===u)return Promise.resolve();e.variantChildren?.forEach(f=>f.animationState?.setActive(c,u)),r[c].isActive=u;const d=i(c);for(const f in r)r[f].protectedKeys={};return d}return{animateChanges:i,setActive:o,setAnimateFunction:a,getState:()=>r,reset:()=>{r=RA(),n=!0}}}function tre(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!R$(t,e):!1}function Hh(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function RA(){return{animate:Hh(!0),whileInView:Hh(),whileHover:Hh(),whileTap:Hh(),whileDrag:Hh(),whileFocus:Hh(),exit:Hh()}}class th{constructor(t){this.isMounted=!1,this.node=t}update(){}}class rre extends th{constructor(t){super(t),t.animationState||(t.animationState=ere(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();I_(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let nre=0;class sre extends th{constructor(){super(...arguments),this.id=nre++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const are={animation:{Feature:rre},exit:{Feature:sre}};function bv(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function o2(e){return{point:{x:e.pageX,y:e.pageY}}}const ire=e=>t=>CT(t)&&e(t,o2(t));function qy(e,t,r,n){return bv(e,t,ire(r),n)}const L$=1e-4,ore=1-L$,lre=1+L$,B$=.01,cre=0-B$,ure=0+B$;function zo(e){return e.max-e.min}function dre(e,t,r){return Math.abs(e-t)<=r}function IA(e,t,r,n=.5){e.origin=n,e.originPoint=Zs(t.min,t.max,e.origin),e.scale=zo(r)/zo(t),e.translate=Zs(r.min,r.max,e.origin)-e.originPoint,(e.scale>=ore&&e.scale<=lre||isNaN(e.scale))&&(e.scale=1),(e.translate>=cre&&e.translate<=ure||isNaN(e.translate))&&(e.translate=0)}function Ky(e,t,r,n){IA(e.x,t.x,r.x,n?n.originX:void 0),IA(e.y,t.y,r.y,n?n.originY:void 0)}function LA(e,t,r){e.min=r.min+t.min,e.max=e.min+zo(t)}function fre(e,t,r){LA(e.x,t.x,r.x),LA(e.y,t.y,r.y)}function BA(e,t,r){e.min=t.min-r.min,e.max=e.min+zo(t)}function Yy(e,t,r){BA(e.x,t.x,r.x),BA(e.y,t.y,r.y)}function hc(e){return[e("x"),e("y")]}const $$=({current:e})=>e?e.ownerDocument.defaultView:null,$A=(e,t)=>Math.abs(e-t);function hre(e,t){const r=$A(e.x,t.x),n=$A(e.y,t.y);return Math.sqrt(r**2+n**2)}class U${constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=U3(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,p=hre(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!p)return;const{point:y}=h,{timestamp:v}=Gi;this.history.push({...y,timestamp:v});const{onStart:C,onMove:S}=this.handlers;g||(C&&C(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,h)},this.handlePointerMove=(h,g)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=$3(g,this.transformPagePoint),Ws.update(this.updatePoint,!0)},this.handlePointerUp=(h,g)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=U3(h.type==="pointercancel"?this.lastMoveEventInfo:$3(g,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,C),y&&y(h,C)},!CT(t))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=s||window;const o=o2(t),c=$3(o,this.transformPagePoint),{point:u}=c,{timestamp:d}=Gi;this.history=[{...u,timestamp:d}];const{onSessionStart:f}=r;f&&f(t,U3(c,this.history)),this.removeListeners=s2(qy(this.contextWindow,"pointermove",this.handlePointerMove),qy(this.contextWindow,"pointerup",this.handlePointerUp),qy(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),zf(this.updatePoint)}}function $3(e,t){return t?{point:t(e.point)}:e}function UA(e,t){return{x:e.x-t.x,y:e.y-t.y}}function U3({point:e},t){return{point:e,delta:UA(e,z$(t)),offset:UA(e,mre(t)),velocity:gre(t,.1)}}function mre(e){return e[0]}function z$(e){return e[e.length-1]}function gre(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=z$(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>Xu(t)));)r--;if(!n)return{x:0,y:0};const a=Ju(s.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const i={x:(s.x-n.x)/a,y:(s.y-n.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function pre(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Zs(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Zs(r,e,n.max):Math.min(e,r)),e}function zA(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function xre(e,{top:t,left:r,bottom:n,right:s}){return{x:zA(e.x,r,s),y:zA(e.y,t,n)}}function WA(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function yre(e,t){return{x:WA(e.x,t.x),y:WA(e.y,t.y)}}function vre(e,t){let r=.5;const n=zo(e),s=zo(t);return s>n?r=gv(t.min,t.max-n,e.min):n>s&&(r=gv(e.min,e.max-s,t.min)),c0(0,1,r)}function bre(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Qk=.35;function wre(e=Qk){return e===!1?e=0:e===!0&&(e=Qk),{x:HA(e,"left","right"),y:HA(e,"top","bottom")}}function HA(e,t,r){return{min:GA(e,t),max:GA(e,r)}}function GA(e,t){return typeof e=="number"?e:e[t]||0}const _re=new WeakMap;class Sre{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Na(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(o2(f).point)},i=(f,h)=>{const{drag:g,dragPropagation:p,onDragStart:y}=this.getProps();if(g&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Pee(g),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hc(C=>{let S=this.getAxisMotionValue(C).get()||0;if(Qu.test(S)){const{projection:w}=this.visualElement;if(w&&w.layout){const T=w.layout.layoutBox[C];T&&(S=zo(T)*(parseFloat(S)/100))}}this.originPoint[C]=S}),y&&Ws.postRender(()=>y(f,h)),Xk(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:g,dragDirectionLock:p,onDirectionLock:y,onDrag:v}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:C}=h;if(p&&this.currentDirection===null){this.currentDirection=kre(C),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,C),this.updateAxis("y",h.point,C),this.visualElement.render(),v&&v(f,h)},c=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>hc(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new U$(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:$$(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!n)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Ws.postRender(()=>o(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!Kb(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let i=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(i=pre(i,this.constraints[t],this.elastic[t])),a.set(i)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&vp(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=xre(n.layoutBox,t):this.constraints=!1,this.elastic=wre(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&hc(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=bre(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!vp(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=Cte(n,s.root,this.visualElement.getTransformPagePoint());let i=yre(s.layout.layoutBox,a);if(r){const o=r(_te(i));this.hasMutatedConstraints=!!o,o&&(i=C$(o))}return i}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=hc(d=>{if(!Kb(d,r,this.currentDirection))return;let f=c&&c[d]||{};i&&(f={min:0,max:0});const h=s?200:1e6,g=s?40:1e7,p={type:"inertia",velocity:n?t[d]:0,bounceStiffness:h,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(d,p)});return Promise.all(u).then(o)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return Xk(this.visualElement,t),n.start(DT(t,n,0,r,this.visualElement,!1))}stopAnimation(){hc(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){hc(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){hc(r=>{const{drag:n}=this.getProps();if(!Kb(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(r);if(s&&s.layout){const{min:i,max:o}=s.layout.layoutBox[r];a.set(t[r]-Zs(i,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!vp(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};hc(i=>{const o=this.getAxisMotionValue(i);if(o&&this.constraints!==!1){const c=o.get();s[i]=vre({min:c,max:c},this.constraints[i])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),hc(i=>{if(!Kb(i,t,null))return;const o=this.getAxisMotionValue(i),{min:c,max:u}=this.constraints[i];o.set(Zs(c,u,s[i]))})}addListeners(){if(!this.visualElement.current)return;_re.set(this.visualElement,this);const t=this.visualElement.current,r=qy(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();vp(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ws.read(n);const i=bv(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(hc(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())}));return()=>{i(),r(),a(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:i=Qk,dragMomentum:o=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:a,dragElastic:i,dragMomentum:o}}}function Kb(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function kre(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class Cre extends th{constructor(t){super(t),this.removeGroupControls=_c,this.removeListeners=_c,this.controls=new Sre(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_c}unmount(){this.removeGroupControls(),this.removeListeners()}}const VA=e=>(t,r)=>{e&&Ws.postRender(()=>e(t,r))};class Tre extends th{constructor(){super(...arguments),this.removePointerDownListener=_c}onPointerDown(t){this.session=new U$(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:$$(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:VA(t),onStart:VA(r),onMove:n,onEnd:(a,i)=>{delete this.session,s&&Ws.postRender(()=>s(a,i))}}}mount(){this.removePointerDownListener=qy(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const qw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function qA(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Mx={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(nn.test(e))e=parseFloat(e);else return e;const r=qA(e,t.target.x),n=qA(e,t.target.y);return`${r}% ${n}%`}},Ere={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Wf.parse(e);if(s.length>5)return n;const a=Wf.createTransformer(e),i=typeof s[0]!="number"?1:0,o=r.x.scale*t.x,c=r.y.scale*t.y;s[0+i]/=o,s[1+i]/=c;const u=Zs(o,c,.5);return typeof s[2+i]=="number"&&(s[2+i]/=u),typeof s[3+i]=="number"&&(s[3+i]/=u),a(s)}};let z3=!1;class Nre extends _.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:a}=t;Xee(Are),a&&(r.group&&r.group.add(a),n&&n.register&&s&&n.register(a),z3&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),qw.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:a}=this.props,{projection:i}=n;return i&&(i.isPresent=a,z3=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==a?i.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?i.promote():i.relegate()||Ws.postRender(()=>{const o=i.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),kT.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;z3=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function W$(e){const[t,r]=d$(),n=_.useContext(rT);return l.jsx(Nre,{...e,layoutGroup:n,switchLayoutGroup:_.useContext(S$),isPresent:t,safeToRemove:r})}const Are={borderRadius:{...Mx,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Mx,borderTopRightRadius:Mx,borderBottomLeftRadius:Mx,borderBottomRightRadius:Mx,boxShadow:Ere};function jre(e,t,r){const n=yo(e)?e:Wp(e);return n.start(DT("",n,t,r)),n.animation}const Pre=(e,t)=>e.depth-t.depth;class Fre{constructor(){this.children=[],this.isDirty=!1}add(t){aT(this.children,t),this.isDirty=!0}remove(t){iT(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Pre),this.isDirty=!1,this.children.forEach(t)}}function Mre(e,t){const r=dl.now(),n=({timestamp:s})=>{const a=s-r;a>=t&&(zf(n),e(a-t))};return Ws.setup(n,!0),()=>zf(n)}const H$=["TopLeft","TopRight","BottomLeft","BottomRight"],Ore=H$.length,KA=e=>typeof e=="string"?parseFloat(e):e,YA=e=>typeof e=="number"||nn.test(e);function Dre(e,t,r,n,s,a){s?(e.opacity=Zs(0,r.opacity??1,Rre(n)),e.opacityExit=Zs(t.opacity??1,0,Ire(n))):a&&(e.opacity=Zs(t.opacity??1,r.opacity??1,n));for(let i=0;i<Ore;i++){const o=`border${H$[i]}Radius`;let c=XA(t,o),u=XA(r,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||YA(c)===YA(u)?(e[o]=Math.max(Zs(KA(c),KA(u),n),0),(Qu.test(u)||Qu.test(c))&&(e[o]+="%")):e[o]=u}(t.rotate||r.rotate)&&(e.rotate=Zs(t.rotate||0,r.rotate||0,n))}function XA(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Rre=G$(0,.5,PB),Ire=G$(.5,.95,_c);function G$(e,t,r){return n=>n<e?0:n>t?1:r(gv(e,t,n))}function JA(e,t){e.min=t.min,e.max=t.max}function ic(e,t){JA(e.x,t.x),JA(e.y,t.y)}function QA(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function ZA(e,t,r,n,s){return e-=t,e=f4(e,1/r,n),s!==void 0&&(e=f4(e,1/s,n)),e}function Lre(e,t=0,r=1,n=.5,s,a=e,i=e){if(Qu.test(t)&&(t=parseFloat(t),t=Zs(i.min,i.max,t/100)-i.min),typeof t!="number")return;let o=Zs(a.min,a.max,n);e===a&&(o-=t),e.min=ZA(e.min,t,r,o,s),e.max=ZA(e.max,t,r,o,s)}function ej(e,t,[r,n,s],a,i){Lre(e,t[r],t[n],t[s],t.scale,a,i)}const Bre=["x","scaleX","originX"],$re=["y","scaleY","originY"];function tj(e,t,r,n){ej(e.x,t,Bre,r?r.x:void 0,n?n.x:void 0),ej(e.y,t,$re,r?r.y:void 0,n?n.y:void 0)}function rj(e){return e.translate===0&&e.scale===1}function V$(e){return rj(e.x)&&rj(e.y)}function nj(e,t){return e.min===t.min&&e.max===t.max}function Ure(e,t){return nj(e.x,t.x)&&nj(e.y,t.y)}function sj(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function q$(e,t){return sj(e.x,t.x)&&sj(e.y,t.y)}function aj(e){return zo(e.x)/zo(e.y)}function ij(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class zre{constructor(){this.members=[]}add(t){aT(this.members,t),t.scheduleRender()}remove(t){if(iT(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Wre(e,t,r){let n="";const s=e.x.translate/t.x,a=e.y.translate/t.y,i=r?.z||0;if((s||a||i)&&(n=`translate3d(${s}px, ${a}px, ${i}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:h,skewX:g,skewY:p}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),f&&(n+=`rotateX(${f}deg) `),h&&(n+=`rotateY(${h}deg) `),g&&(n+=`skewX(${g}deg) `),p&&(n+=`skewY(${p}deg) `)}const o=e.x.scale*t.x,c=e.y.scale*t.y;return(o!==1||c!==1)&&(n+=`scale(${o}, ${c})`),n||"none"}const W3=["","X","Y","Z"],Hre=1e3;let Gre=0;function H3(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function K$(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=M$(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Ws,!(s||a))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&K$(n)}function Y$({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(i={},o=t?.()){this.id=Gre++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Kre),this.nodes.forEach(Qre),this.nodes.forEach(Zre),this.nodes.forEach(Yre)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Fre)}addEventListener(i,o){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new cT),this.eventHandlers.get(i).add(o)}notifyListeners(i,...o){const c=this.eventHandlers.get(i);c&&c.notify(...o)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=u$(i)&&!Iee(i),this.instance=i;const{layoutId:o,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),e){let d,f=0;const h=()=>this.root.updateBlockedByResize=!1;Ws.read(()=>{f=window.innerWidth}),e(i,()=>{const g=window.innerWidth;g!==f&&(f=g,this.root.updateBlockedByResize=!0,d&&d(),d=Mre(h,250),qw.hasAnimatedSinceResize&&(qw.hasAnimatedSinceResize=!1,this.nodes.forEach(cj)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||u.getDefaultTransition()||sne,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=u.getProps(),C=!this.targetLayout||!q$(this.targetLayout,g),S=!f&&h;if(this.options.layoutRoot||this.resumeFrom||S||f&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={..._T(p,"layout"),onPlay:y,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(d,S)}else f||cj(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),zf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ene),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&K$(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(oj);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(lj);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Jre),this.nodes.forEach(Vre),this.nodes.forEach(qre)):this.nodes.forEach(lj),this.clearAllSnapshots();const o=dl.now();Gi.delta=c0(0,1e3/60,o-Gi.timestamp),Gi.timestamp=o,Gi.isProcessing=!0,F3.update.process(Gi),F3.preRender.process(Gi),F3.render.process(Gi),Gi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,kT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Xre),this.sharedNodes.forEach(tne)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ws.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ws.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!zo(this.snapshot.measuredBox.x)&&!zo(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Na(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(o=!1),o&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!V$(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;i&&this.instance&&(o||Jh(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return i&&(c=this.removeTransform(c)),ane(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return Na();const o=i.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(ine))){const{scroll:u}=this.root;u&&(bp(o.x,u.offset.x),bp(o.y,u.offset.y))}return o}removeElementScroll(i){const o=Na();if(ic(o,i),this.scroll?.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&ic(o,i),bp(o.x,d.offset.x),bp(o.y,d.offset.y))}return o}applyTransform(i,o=!1){const c=Na();ic(c,i);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&wp(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Jh(d.latestValues)&&wp(c,d.latestValues)}return Jh(this.latestValues)&&wp(c,this.latestValues),c}removeTransform(i){const o=Na();ic(o,i);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Jh(u.latestValues))continue;Vk(u.latestValues)&&u.updateSnapshot();const d=Na(),f=u.measurePageBox();ic(d,f),tj(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Jh(this.latestValues)&&tj(o,this.latestValues),o}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(i||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Gi.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Na(),this.relativeTargetOrigin=Na(),Yy(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),ic(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Na(),this.targetWithTransforms=Na()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),fre(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ic(this.target,this.layout.layoutBox),E$(this.target,this.targetDelta)):ic(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Na(),this.relativeTargetOrigin=Na(),Yy(this.relativeTargetOrigin,this.target,h.target),ic(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Vk(this.parent.latestValues)||T$(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const i=this.getLead(),o=!!this.resumingFrom||this!==i;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Gi.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;ic(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;kte(this.layoutCorrected,this.treeScale,this.path,o),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=Na());const{target:g}=i;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(QA(this.prevProjectionDelta.x,this.projectionDelta.x),QA(this.prevProjectionDelta.y,this.projectionDelta.y)),Ky(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!ij(this.projectionDelta.x,this.prevProjectionDelta.x)||!ij(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.visualElement?.scheduleRender(),i){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=_p(),this.projectionDelta=_p(),this.projectionDeltaWithTransform=_p()}setAnimationOrigin(i,o=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=_p();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Na(),g=c?c.source:void 0,p=this.layout?this.layout.source:void 0,y=g!==p,v=this.getStack(),C=!v||v.members.length<=1,S=!!(y&&!C&&this.options.crossfade===!0&&!this.path.some(nne));this.animationProgress=0;let w;this.mixTargetDelta=T=>{const N=T/1e3;uj(f.x,i.x,N),uj(f.y,i.y,N),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Yy(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),rne(this.relativeTarget,this.relativeTargetOrigin,h,N),w&&Ure(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Na()),ic(w,this.relativeTarget)),y&&(this.animationValues=d,Dre(d,u,this.latestValues,N,S,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(zf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ws.update(()=>{qw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Wp(0)),this.currentAnimation=jre(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),i.onUpdate&&i.onUpdate(o)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Hre),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:d}=i;if(!(!o||!c||!u)){if(this!==i&&this.layout&&u&&X$(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Na();const f=zo(this.layout.layoutBox.x);c.x.min=i.target.x.min,c.x.max=c.x.min+f;const h=zo(this.layout.layoutBox.y);c.y.min=i.target.y.min,c.y.max=c.y.min+h}ic(o,c),wp(o,d),Ky(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(i,o){this.sharedNodes.has(i)||this.sharedNodes.set(i,new zre),this.sharedNodes.get(i).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){const{layoutId:i}=this.options;return i?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:i}=this.options;return i?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),i&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let o=!1;const{latestValues:c}=i;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&H3("z",i,u,this.animationValues);for(let d=0;d<W3.length;d++)H3(`rotate${W3[d]}`,i,u,this.animationValues),H3(`skew${W3[d]}`,i,u,this.animationValues);i.render();for(const d in u)i.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);i.scheduleRender()}applyProjectionStyles(i,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=Vw(o?.pointerEvents)||"",i.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=Vw(o?.pointerEvents)||""),this.hasProjected&&!Jh(this.latestValues)&&(i.transform=c?c({},""):"none",this.hasProjected=!1);return}i.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=Wre(this.projectionDeltaWithTransform,this.treeScale,d);c&&(f=c(d,f)),i.transform=f;const{x:h,y:g}=this.projectionDelta;i.transformOrigin=`${h.origin*100}% ${g.origin*100}% 0`,u.animationValues?i.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:i.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const p in vv){if(d[p]===void 0)continue;const{correct:y,applyTo:v,isCSSVariable:C}=vv[p],S=f==="none"?d[p]:y(d[p],u);if(v){const w=v.length;for(let T=0;T<w;T++)i[v[T]]=S}else C?this.options.visualElement.renderState.vars[p]=S:i[p]=S}this.options.layoutId&&(i.pointerEvents=u===this?Vw(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>i.currentAnimation?.stop()),this.root.nodes.forEach(oj),this.root.sharedNodes.clear()}}}function Vre(e){e.updateLayout()}function qre(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;s==="size"?hc(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],h=zo(f);f.min=r[d].min,f.max=f.min+h}):X$(s,t.layoutBox,r)&&hc(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],h=zo(r[d]);f.max=f.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+h)});const i=_p();Ky(i,r,t.layoutBox);const o=_p();a?Ky(o,e.applyTransform(n,!0),t.measuredBox):Ky(o,r,t.layoutBox);const c=!V$(i);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const g=Na();Yy(g,t.layoutBox,f.layoutBox);const p=Na();Yy(p,r,h.layoutBox),q$(g,p)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=g,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:o,layoutDelta:i,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Kre(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Yre(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Xre(e){e.clearSnapshot()}function oj(e){e.clearMeasurements()}function lj(e){e.isLayoutDirty=!1}function Jre(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function cj(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Qre(e){e.resolveTargetDelta()}function Zre(e){e.calcProjection()}function ene(e){e.resetSkewAndRotation()}function tne(e){e.removeLeadSnapshot()}function uj(e,t,r){e.translate=Zs(t.translate,0,r),e.scale=Zs(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function dj(e,t,r,n){e.min=Zs(t.min,r.min,n),e.max=Zs(t.max,r.max,n)}function rne(e,t,r,n){dj(e.x,t.x,r.x,n),dj(e.y,t.y,r.y,n)}function nne(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const sne={duration:.45,ease:[.4,0,.1,1]},fj=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),hj=fj("applewebkit/")&&!fj("chrome/")?Math.round:_c;function mj(e){e.min=hj(e.min),e.max=hj(e.max)}function ane(e){mj(e.x),mj(e.y)}function X$(e,t,r){return e==="position"||e==="preserve-aspect"&&!dre(aj(t),aj(r),.2)}function ine(e){return e!==e.root&&e.scroll?.wasRoot}const one=Y$({attachResizeListener:(e,t)=>bv(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),G3={current:void 0},J$=Y$({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!G3.current){const e=new one({});e.mount(window),e.setOptions({layoutScroll:!0}),G3.current=e}return G3.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),lne={pan:{Feature:Tre},drag:{Feature:Cre,ProjectionNode:J$,MeasureLayout:W$}};function gj(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,a=n[s];a&&Ws.postRender(()=>a(t,o2(t)))}class cne extends th{mount(){const{current:t}=this.node;t&&(this.unmount=Fee(t,(r,n)=>(gj(this.node,n,"Start"),s=>gj(this.node,s,"End"))))}unmount(){}}class une extends th{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=s2(bv(this.node.current,"focus",()=>this.onFocus()),bv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function pj(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),a=n[s];a&&Ws.postRender(()=>a(t,o2(t)))}class dne extends th{mount(){const{current:t}=this.node;t&&(this.unmount=Ree(t,(r,n)=>(pj(this.node,n,"Start"),(s,{success:a})=>pj(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Zk=new WeakMap,V3=new WeakMap,fne=e=>{const t=Zk.get(e.target);t&&t(e)},hne=e=>{e.forEach(fne)};function mne({root:e,...t}){const r=e||document;V3.has(r)||V3.set(r,{});const n=V3.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(hne,{root:e,...t})),n[s]}function gne(e,t,r){const n=mne(t);return Zk.set(e,r),n.observe(e),()=>{Zk.delete(e),n.unobserve(e)}}const pne={some:0,all:1};class xne extends th{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:a}=t,i={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:pne[s]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(c)};return gne(this.node.current,i,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(yne(t,r))&&this.startObserver()}unmount(){}}function yne({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const vne={inView:{Feature:xne},tap:{Feature:dne},focus:{Feature:une},hover:{Feature:cne}},bne={layout:{ProjectionNode:J$,MeasureLayout:W$}},wne={...are,...vne,...lne,...bne},ht=wte(wne,Ote),ot=({children:e,variant:t="primary",size:r="md",onClick:n,disabled:s=!1,className:a="",...i})=>{const o="font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer",c={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",warning:"bg-yellow-600 hover:bg-yellow-700 text-white focus:ring-yellow-500",outline:"bg-transparent text-blue-600 border-2 border-blue-600 hover:bg-blue-600 hover:text-white focus:ring-blue-500",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-700 focus:ring-gray-500"},u={xs:"px-2 py-1 text-xs",sm:"px-2 py-1 text-xs sm:px-3 sm:py-1.5 sm:text-sm",md:"px-3 py-1.5 text-sm sm:px-4 sm:py-2 sm:text-base",lg:"px-4 py-2 text-base sm:px-6 sm:py-3 sm:text-lg",icon:"p-0 flex items-center justify-center"},d=s?"opacity-50 cursor-not-allowed":"";return l.jsx(ht.button,{className:`${o} ${c[t]} ${u[r]} ${d} ${a}`,onClick:n,disabled:s,whileHover:s?{}:{scale:1.05},whileTap:s?{}:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},...i,children:e})},un=({size:e="md",color:t="blue",className:r=""})=>{const n={sm:"w-4 h-4",small:"w-4 h-4",md:"w-6 h-6",medium:"w-6 h-6",lg:"w-8 h-8",large:"w-8 h-8",xl:"w-12 h-12"},s={blue:"border-blue-600",green:"border-green-600",red:"border-red-600",yellow:"border-yellow-600",gray:"border-gray-600"};return l.jsx(ht.div,{className:`
        inline-block border-2 border-gray-300 border-t-current rounded-full animate-spin
        ${n[e]} ${s[t]} ${r}
      `,animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})},du=({type:e="info",message:t="",duration:r=3e3,closable:n=!0,onClose:s,className:a="",...i})=>{const[o,c]=_.useState(!0),[u,d]=_.useState(!1),f=_.useRef(null),h=_.useRef(null);_.useEffect(()=>{if(r>0)return h.current=setTimeout(()=>{g()},r),()=>{h.current&&clearTimeout(h.current)}},[r]);const g=_.useCallback(()=>{u||(d(!0),h.current&&clearTimeout(h.current),setTimeout(()=>{c(!1),s&&s()},300))},[u,s]),p=_.useCallback(C=>{C.key==="Escape"&&g()},[g]);if(!o)return null;const y=["notification",`notification-${e}`,o?"notification-visible":"",u?"notification-exiting":"",a].filter(Boolean).join(" "),v=()=>{switch(e){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}};return l.jsx("div",{ref:f,className:y,role:"alert","aria-live":"polite",onKeyDown:p,tabIndex:-1,...i,children:l.jsxs("div",{className:"notification-content",children:[l.jsx("div",{className:"notification-icon","aria-hidden":"true",children:v()}),l.jsx("div",{className:"notification-body",children:l.jsx("div",{className:"notification-message",children:t})}),n&&l.jsx("button",{className:"notification-close",onClick:g,type:"button","aria-label":"Close notification",children:""})]})})},ci=()=>{const[e,t]=_.useState([]),r=_.useCallback((a,i="info",o={})=>{const c=Date.now()+Math.random(),u={id:c,message:a,type:i,...o};return t(d=>[...d,u]),o.duration!==0&&setTimeout(()=>{n(c)},o.duration||3e3),c},[]),n=_.useCallback(a=>{t(i=>i.filter(o=>o.id!==a))},[]),s=_.useCallback(()=>{t([])},[]);return{notifications:e,showNotification:r,removeNotification:n,clearAllNotifications:s}},Gl=()=>{const[e,t]=_.useState(!1),[r,n]=_.useState(null),[s,a]=_.useState(null),i=_.useRef(null);_.useRef(new Map);const o=_.useRef(0),c=3,u=1e3,d=_.useCallback(()=>{i.current&&(i.current.abort(),i.current=null)},[]);_.useEffect(()=>d,[d]);const f=_.useCallback(async(D,U={})=>{try{t(!0),n(null),i.current=new AbortController;const q=U.method||"POST",H={method:q,headers:{"Content-Type":"application/json",...U.headers},signal:i.current.signal,...U};q!=="GET"&&q!=="HEAD"&&(H.body=JSON.stringify(U.data||{})),console.log(`[API] Making request to: ${D}`,H);const te=await fetch(D,H);if(!te.ok)throw new Error(`HTTP error! status: ${te.status}`);const Q=await te.json();if(console.log("[API] Response received:",Q),Q.success)return a(Q),o.current=0,Q;throw new Error(Q.error||Q.message||"Request failed")}catch(q){if(q.name==="AbortError")return console.log("[API] Request was aborted"),null;if(console.error("[API] Request failed:",q),n(q.message||"Request failed"),o.current<c){o.current++;const H=u*Math.pow(2,o.current-1);return console.log(`[API] Retrying in ${H}ms (attempt ${o.current}/${c})`),await new Promise(te=>setTimeout(te,H)),f(D,U)}throw q}finally{t(!1),i.current=null}},[]),h=_.useCallback(async(D,U={})=>{try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())throw new Error("No valid authentication token found");return await window.tokenManager.makeAuthenticatedRequest(D,U)}catch(q){throw console.error("[API] Authenticated request failed:",q),q}},[]),g=_.useCallback(async(D,U)=>{try{const q=`/.netlify/functions/get-test-questions?test_type=${D}&test_id=${U}`;console.log(`[API] Getting test info for ${D}_${U}`);const te=await(await h(q)).json();if(te.success)return console.log("[API] Test info retrieved successfully:",te.test_info),te.test_info;throw new Error(te.error||"Failed to get test info")}catch(q){throw console.error("[API] Failed to get test info:",q),q}},[h]),p=_.useCallback(async(D,U)=>{try{const q=`/.netlify/functions/get-test-questions?test_type=${D}&test_id=${U}`;console.log(`[API] Getting test questions for ${D}_${U}`);const te=await(await h(q)).json();if(te.success)return console.log("[API] Test questions retrieved successfully:",te.questions),te.questions;throw new Error(te.error||"Failed to get test questions")}catch(q){throw console.error("[API] Failed to get test questions:",q),q}},[h]),y=_.useCallback(async()=>{try{const D="/.netlify/functions/get-student-active-tests";console.log("[API] Loading student active tests");const q=await(await h(D)).json();if(q.success)return console.log("[API] Student active tests loaded successfully:",q.tests),q.tests;throw new Error(q.error||"Failed to load student active tests")}catch(D){throw console.error("[API] Failed to load student active tests:",D),D}},[h]),v=_.useCallback(async(D,U,q)=>{try{let H;switch(D){case"true_false":H="/.netlify/functions/submit-true-false-test";break;case"multiple_choice":H="/.netlify/functions/submit-multiple-choice-test";break;case"input":H="/.netlify/functions/submit-input-test";break;case"matching_type":H="/.netlify/functions/submit-matching-type-test";break;case"speaking":H="/.netlify/functions/submit-speaking-test";break;default:throw new Error(`Unknown test type: ${D}`)}console.log(`[API] Submitting ${D} test:`,q);const Q=await(await h(H,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)})).json();if(Q.success)return console.log("[API] Test submitted successfully:",Q),Q;throw new Error(Q.error||"Failed to submit test")}catch(H){throw console.error("[API] Failed to submit test:",H),H}},[h]),C=_.useCallback(async D=>{try{const U="/.netlify/functions/save-multiple-choice-test";console.log("[API] Saving multiple choice test:",D);const H=await(await h(U,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)})).json();if(H.success)return console.log("[API] Multiple choice test saved successfully:",H),H;throw new Error(H.error||"Failed to save multiple choice test")}catch(U){throw console.error("[API] Failed to save multiple choice test:",U),U}},[h]),S=_.useCallback(async D=>{try{const U="/.netlify/functions/save-true-false-test";console.log("[API] Saving true/false test:",D);const H=await(await h(U,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)})).json();if(H.success)return console.log("[API] True/false test saved successfully:",H),H;throw new Error(H.error||"Failed to save true/false test")}catch(U){throw console.error("[API] Failed to save true/false test:",U),U}},[h]),w=_.useCallback(async D=>{try{const U="/.netlify/functions/save-input-test";console.log("[API] Saving input test:",D);const H=await(await h(U,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)})).json();if(H.success)return console.log("[API] Input test saved successfully:",H),H;throw new Error(H.error||"Failed to save input test")}catch(U){throw console.error("[API] Failed to save input test:",U),U}},[h]),T=_.useCallback(async D=>{try{const U="/.netlify/functions/assign-test";console.log("[API] Assigning test to classes:",D);const H=await(await h(U,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)})).json();if(H.success)return console.log("[API] Test assigned successfully:",H),H;throw new Error(H.error||"Failed to assign test")}catch(U){throw console.error("[API] Failed to assign test:",U),U}},[h]),N=_.useCallback(async()=>{try{const D="/.netlify/functions/get-teacher-active-tests";console.log("[API] Loading teacher active tests");const q=await(await h(D)).json();if(q.success)return console.log("[API] Teacher active tests loaded successfully:",q.tests),q.tests;throw new Error(q.error||"Failed to load teacher active tests")}catch(D){throw console.error("[API] Failed to load teacher active tests:",D),D}},[h]),A=_.useCallback(async()=>{try{const D="/.netlify/functions/get-all-users";console.log("[API] Getting all users");const q=await(await h(D)).json();if(q.success)return console.log("[API] All users loaded successfully:",q.users),q.users;throw new Error(q.error||"Failed to get all users")}catch(D){throw console.error("[API] Failed to get all users:",D),D}},[h]),P=_.useCallback(async()=>{try{const D="/.netlify/functions/get-all-teachers";console.log("[API] Getting all teachers");const q=await(await h(D)).json();if(q.success)return console.log("[API] All teachers loaded successfully:",q.teachers),q.teachers;throw new Error(q.error||"Failed to get all teachers")}catch(D){throw console.error("[API] Failed to get all teachers:",D),D}},[h]),j=_.useCallback(async()=>{try{const D="/.netlify/functions/get-all-subjects";console.log("[API] Getting all subjects");const q=await(await h(D)).json();if(q.success)return console.log("[API] All subjects loaded successfully:",q.subjects),q.subjects;throw new Error(q.error||"Failed to get all subjects")}catch(D){throw console.error("[API] Failed to get all subjects:",D),D}},[h]),F=_.useCallback(()=>{n(null)},[]),R=_.useCallback(()=>{a(null)},[]),L=_.useCallback(()=>{t(!1),n(null),a(null),o.current=0,d()},[d]),V=_.useCallback(async(D,U={})=>{const H=await(await h(D,{...U,method:"GET"})).json();if(H.success)return H;throw new Error(H.error||"Request failed")},[h]),Z=_.useCallback(async(D,U,q={})=>{const te=await(await h(D,{...q,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)})).json();if(te.success)return te;throw new Error(te.error||"Request failed")},[h]),Y=_.useCallback(async(D,U,q={})=>{const te=await(await h(D,{...q,method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)})).json();if(te.success)return te;throw new Error(te.error||"Request failed")},[h]),re=_.useCallback(async(D,U={})=>{const H=await(await h(D,{...U,method:"DELETE"})).json();if(H.success)return H;throw new Error(H.error||"Request failed")},[h]),ue=_.useCallback(async D=>{try{const U="/.netlify/functions/submit-speaking-test";console.log("[API] Submitting speaking test:",D);const H=await(await h(U,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)})).json();if(H.success)return console.log("[API] Speaking test submitted successfully:",H),H;throw new Error(H.error||"Failed to submit speaking test")}catch(U){throw console.error("[API] Failed to submit speaking test:",U),U}},[h]),z=_.useCallback(async D=>{try{const U=`/.netlify/functions/get-speaking-test-new?action=test&test_id=${D}`;console.log("[API] Getting speaking test:",D);const H=await(await h(U,{method:"GET"})).json();if(H.success)return console.log("[API] Speaking test loaded successfully:",H),H;throw new Error(H.error||"Failed to load speaking test")}catch(U){throw console.error("[API] Failed to load speaking test:",U),U}},[h]),X=_.useCallback(async D=>{try{const U=`/.netlify/functions/get-speaking-test-new?action=questions&test_id=${D}`;console.log("[API] Getting speaking test questions:",D);const H=await(await h(U,{method:"GET"})).json();if(H.success)return console.log("[API] Speaking test questions loaded successfully:",H),H;throw new Error(H.error||"Failed to load speaking test questions")}catch(U){throw console.error("[API] Failed to load speaking test questions:",U),U}},[h]),I=_.useCallback(async D=>{try{const U="/.netlify/functions/upload-speaking-audio";console.log("[API] Uploading speaking audio");const H=await(await h(U,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)})).json();if(H.success)return console.log("[API] Audio uploaded successfully:",H),H;throw new Error(H.error||"Failed to upload audio")}catch(U){throw console.error("[API] Failed to upload audio:",U),U}},[h]),B=_.useCallback(async D=>{try{const U=`/.netlify/functions/get-speaking-test-new?action=audio&file_path=${encodeURIComponent(D)}`;console.log("[API] Getting speaking audio:",D);const H=await(await h(U,{method:"GET"})).json();if(H.success)return console.log("[API] Audio URL retrieved successfully:",H),H;throw new Error(H.error||"Failed to get audio")}catch(U){throw console.error("[API] Failed to get audio:",U),U}},[h]),W=_.useCallback(async(D,U)=>{try{const q=`/.netlify/functions/check-test-completion?test_id=${D}&test_type=${U}`;console.log("[API] Checking test completion:",D,U);const te=await(await h(q,{method:"GET"})).json();if(te.success)return console.log("[API] Test completion status:",te),te;throw new Error(te.error||"Failed to check test completion")}catch(q){throw console.error("[API] Failed to check test completion:",q),q}},[h]);return{loading:e,error:r,data:s,sendRequest:f,makeAuthenticatedRequest:h,get:V,post:Z,put:Y,delete:re,getTestInfo:g,getTestQuestions:p,loadStudentActiveTests:y,submitTest:v,submitSpeakingTest:ue,getSpeakingTest:z,getSpeakingTestQuestions:X,uploadSpeakingAudio:I,getSpeakingAudio:B,checkTestCompletion:W,saveMultipleChoiceTest:C,saveTrueFalseTest:S,saveInputTest:w,assignTestToClasses:T,loadTeacherActiveTests:N,getAllUsers:A,getAllTeachers:P,getAllSubjects:j,clearError:F,clearData:R,reset:L,cleanup:d}},_ne="modulepreload",Sne=function(e){return"/"+e},xj={},ni=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let u=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};var i=u;document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");s=u(r.map(d=>{if(d=Sne(d),d in xj)return;xj[d]=!0;const f=d.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":_ne,f||(g.as="script"),g.crossOrigin="",g.href=d,c&&g.setAttribute("nonce",c),document.head.appendChild(g),f)return new Promise((p,y)=>{g.addEventListener("load",p),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})};var Kw={exports:{}},Ox={},q3={},K3={},yj;function En(){return yj||(yj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function r(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof a4<"u"?a4:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.22",isBrowser:r(),isUnminified:/param/.test((function(s){}).toString()),dblClickWindow:400,getAngle(s){return e.Konva.angleDeg?s*t:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isTransforming(){var s;return(s=e.Konva.Transformer)===null||s===void 0?void 0:s.isTransforming()},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(s){e.glob.Konva=s}};const n=s=>{e.Konva[s.prototype.getClassName()]=s};e._registerNode=n,e.Konva._injectGlobal(e.Konva)})(K3)),K3}var Y3={},vj;function xa(){return vj||(vj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=En();class r{constructor(T=[1,0,0,1,0,0]){this.dirty=!1,this.m=T&&T.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new r(this.m)}copyInto(T){T.m[0]=this.m[0],T.m[1]=this.m[1],T.m[2]=this.m[2],T.m[3]=this.m[3],T.m[4]=this.m[4],T.m[5]=this.m[5]}point(T){const N=this.m;return{x:N[0]*T.x+N[2]*T.y+N[4],y:N[1]*T.x+N[3]*T.y+N[5]}}translate(T,N){return this.m[4]+=this.m[0]*T+this.m[2]*N,this.m[5]+=this.m[1]*T+this.m[3]*N,this}scale(T,N){return this.m[0]*=T,this.m[1]*=T,this.m[2]*=N,this.m[3]*=N,this}rotate(T){const N=Math.cos(T),A=Math.sin(T),P=this.m[0]*N+this.m[2]*A,j=this.m[1]*N+this.m[3]*A,F=this.m[0]*-A+this.m[2]*N,R=this.m[1]*-A+this.m[3]*N;return this.m[0]=P,this.m[1]=j,this.m[2]=F,this.m[3]=R,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(T,N){const A=this.m[0]+this.m[2]*N,P=this.m[1]+this.m[3]*N,j=this.m[2]+this.m[0]*T,F=this.m[3]+this.m[1]*T;return this.m[0]=A,this.m[1]=P,this.m[2]=j,this.m[3]=F,this}multiply(T){const N=this.m[0]*T.m[0]+this.m[2]*T.m[1],A=this.m[1]*T.m[0]+this.m[3]*T.m[1],P=this.m[0]*T.m[2]+this.m[2]*T.m[3],j=this.m[1]*T.m[2]+this.m[3]*T.m[3],F=this.m[0]*T.m[4]+this.m[2]*T.m[5]+this.m[4],R=this.m[1]*T.m[4]+this.m[3]*T.m[5]+this.m[5];return this.m[0]=N,this.m[1]=A,this.m[2]=P,this.m[3]=j,this.m[4]=F,this.m[5]=R,this}invert(){const T=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),N=this.m[3]*T,A=-this.m[1]*T,P=-this.m[2]*T,j=this.m[0]*T,F=T*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),R=T*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=N,this.m[1]=A,this.m[2]=P,this.m[3]=j,this.m[4]=F,this.m[5]=R,this}getMatrix(){return this.m}decompose(){const T=this.m[0],N=this.m[1],A=this.m[2],P=this.m[3],j=this.m[4],F=this.m[5],R=T*P-N*A,L={x:j,y:F,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(T!=0||N!=0){const V=Math.sqrt(T*T+N*N);L.rotation=N>0?Math.acos(T/V):-Math.acos(T/V),L.scaleX=V,L.scaleY=R/V,L.skewX=(T*A+N*P)/R,L.skewY=0}else if(A!=0||P!=0){const V=Math.sqrt(A*A+P*P);L.rotation=Math.PI/2-(P>0?Math.acos(-A/V):-Math.acos(A/V)),L.scaleX=R/V,L.scaleY=V,L.skewX=0,L.skewY=(T*A+N*P)/R}return L.rotation=e.Util._getRotation(L.rotation),L}}e.Transform=r;const n="[object Array]",s="[object Number]",a="[object String]",i="[object Boolean]",o=Math.PI/180,c=180/Math.PI,u="#",d="",f="0",h="Konva warning: ",g="Konva error: ",p="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let C=[];const S=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(w){setTimeout(w,60)};e.Util={_isElement(w){return!!(w&&w.nodeType==1)},_isFunction(w){return!!(w&&w.constructor&&w.call&&w.apply)},_isPlainObject(w){return!!w&&w.constructor===Object},_isArray(w){return Object.prototype.toString.call(w)===n},_isNumber(w){return Object.prototype.toString.call(w)===s&&!isNaN(w)&&isFinite(w)},_isString(w){return Object.prototype.toString.call(w)===a},_isBoolean(w){return Object.prototype.toString.call(w)===i},isObject(w){return w instanceof Object},isValidSelector(w){if(typeof w!="string")return!1;const T=w[0];return T==="#"||T==="."||T===T.toUpperCase()},_sign(w){return w===0||w>0?1:-1},requestAnimFrame(w){C.push(w),C.length===1&&S(function(){const T=C;C=[],T.forEach(function(N){N()})})},createCanvasElement(){const w=document.createElement("canvas");try{w.style=w.style||{}}catch{}return w},createImageElement(){return document.createElement("img")},_isInDocument(w){for(;w=w.parentNode;)if(w==document)return!0;return!1},_urlToImage(w,T){const N=e.Util.createImageElement();N.onload=function(){T(N)},N.src=w},_rgbToHex(w,T,N){return((1<<24)+(w<<16)+(T<<8)+N).toString(16).slice(1)},_hexToRgb(w){w=w.replace(u,d);const T=parseInt(w,16);return{r:T>>16&255,g:T>>8&255,b:T&255}},getRandomColor(){let w=(Math.random()*16777215<<0).toString(16);for(;w.length<6;)w=f+w;return u+w},getRGB(w){let T;return w in y?(T=y[w],{r:T[0],g:T[1],b:T[2]}):w[0]===u?this._hexToRgb(w.substring(1)):w.substr(0,4)===p?(T=v.exec(w.replace(/ /g,"")),{r:parseInt(T[1],10),g:parseInt(T[2],10),b:parseInt(T[3],10)}):{r:0,g:0,b:0}},colorToRGBA(w){return w=w||"black",e.Util._namedColorToRBA(w)||e.Util._hex3ColorToRGBA(w)||e.Util._hex4ColorToRGBA(w)||e.Util._hex6ColorToRGBA(w)||e.Util._hex8ColorToRGBA(w)||e.Util._rgbColorToRGBA(w)||e.Util._rgbaColorToRGBA(w)||e.Util._hslColorToRGBA(w)},_namedColorToRBA(w){const T=y[w.toLowerCase()];return T?{r:T[0],g:T[1],b:T[2],a:1}:null},_rgbColorToRGBA(w){if(w.indexOf("rgb(")===0){w=w.match(/rgb\(([^)]+)\)/)[1];const T=w.split(/ *, */).map(Number);return{r:T[0],g:T[1],b:T[2],a:1}}},_rgbaColorToRGBA(w){if(w.indexOf("rgba(")===0){w=w.match(/rgba\(([^)]+)\)/)[1];const T=w.split(/ *, */).map((N,A)=>N.slice(-1)==="%"?A===3?parseInt(N)/100:parseInt(N)/100*255:Number(N));return{r:T[0],g:T[1],b:T[2],a:T[3]}}},_hex8ColorToRGBA(w){if(w[0]==="#"&&w.length===9)return{r:parseInt(w.slice(1,3),16),g:parseInt(w.slice(3,5),16),b:parseInt(w.slice(5,7),16),a:parseInt(w.slice(7,9),16)/255}},_hex6ColorToRGBA(w){if(w[0]==="#"&&w.length===7)return{r:parseInt(w.slice(1,3),16),g:parseInt(w.slice(3,5),16),b:parseInt(w.slice(5,7),16),a:1}},_hex4ColorToRGBA(w){if(w[0]==="#"&&w.length===5)return{r:parseInt(w[1]+w[1],16),g:parseInt(w[2]+w[2],16),b:parseInt(w[3]+w[3],16),a:parseInt(w[4]+w[4],16)/255}},_hex3ColorToRGBA(w){if(w[0]==="#"&&w.length===4)return{r:parseInt(w[1]+w[1],16),g:parseInt(w[2]+w[2],16),b:parseInt(w[3]+w[3],16),a:1}},_hslColorToRGBA(w){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(w)){const[T,...N]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(w),A=Number(N[0])/360,P=Number(N[1])/100,j=Number(N[2])/100;let F,R,L;if(P===0)return L=j*255,{r:Math.round(L),g:Math.round(L),b:Math.round(L),a:1};j<.5?F=j*(1+P):F=j+P-j*P;const V=2*j-F,Z=[0,0,0];for(let Y=0;Y<3;Y++)R=A+1/3*-(Y-1),R<0&&R++,R>1&&R--,6*R<1?L=V+(F-V)*6*R:2*R<1?L=F:3*R<2?L=V+(F-V)*(2/3-R)*6:L=V,Z[Y]=L*255;return{r:Math.round(Z[0]),g:Math.round(Z[1]),b:Math.round(Z[2]),a:1}}},haveIntersection(w,T){return!(T.x>w.x+w.width||T.x+T.width<w.x||T.y>w.y+w.height||T.y+T.height<w.y)},cloneObject(w){const T={};for(const N in w)this._isPlainObject(w[N])?T[N]=this.cloneObject(w[N]):this._isArray(w[N])?T[N]=this.cloneArray(w[N]):T[N]=w[N];return T},cloneArray(w){return w.slice(0)},degToRad(w){return w*o},radToDeg(w){return w*c},_degToRad(w){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(w)},_radToDeg(w){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(w)},_getRotation(w){return t.Konva.angleDeg?e.Util.radToDeg(w):w},_capitalize(w){return w.charAt(0).toUpperCase()+w.slice(1)},throw(w){throw new Error(g+w)},error(w){console.error(g+w)},warn(w){t.Konva.showWarnings&&console.warn(h+w)},each(w,T){for(const N in w)T(N,w[N])},_inRange(w,T,N){return T<=w&&w<N},_getProjectionToSegment(w,T,N,A,P,j){let F,R,L;const V=(w-N)*(w-N)+(T-A)*(T-A);if(V==0)F=w,R=T,L=(P-N)*(P-N)+(j-A)*(j-A);else{const Z=((P-w)*(N-w)+(j-T)*(A-T))/V;Z<0?(F=w,R=T,L=(w-P)*(w-P)+(T-j)*(T-j)):Z>1?(F=N,R=A,L=(N-P)*(N-P)+(A-j)*(A-j)):(F=w+Z*(N-w),R=T+Z*(A-T),L=(F-P)*(F-P)+(R-j)*(R-j))}return[F,R,L]},_getProjectionToLine(w,T,N){const A=e.Util.cloneObject(w);let P=Number.MAX_VALUE;return T.forEach(function(j,F){if(!N&&F===T.length-1)return;const R=T[(F+1)%T.length],L=e.Util._getProjectionToSegment(j.x,j.y,R.x,R.y,w.x,w.y),V=L[0],Z=L[1],Y=L[2];Y<P&&(A.x=V,A.y=Z,P=Y)}),A},_prepareArrayForTween(w,T,N){const A=[],P=[];if(w.length>T.length){const F=T;T=w,w=F}for(let F=0;F<w.length;F+=2)A.push({x:w[F],y:w[F+1]});for(let F=0;F<T.length;F+=2)P.push({x:T[F],y:T[F+1]});const j=[];return P.forEach(function(F){const R=e.Util._getProjectionToLine(F,A,N);j.push(R.x),j.push(R.y)}),j},_prepareToStringify(w){let T;w.visitedByCircularReferenceRemoval=!0;for(const N in w)if(w.hasOwnProperty(N)&&w[N]&&typeof w[N]=="object"){if(T=Object.getOwnPropertyDescriptor(w,N),w[N].visitedByCircularReferenceRemoval||e.Util._isElement(w[N]))if(T.configurable)delete w[N];else return null;else if(e.Util._prepareToStringify(w[N])===null)if(T.configurable)delete w[N];else return null}return delete w.visitedByCircularReferenceRemoval,w},_assign(w,T){for(const N in T)w[N]=T[N];return w},_getFirstPointerId(w){return w.touches?w.changedTouches[0].identifier:w.pointerId||999},releaseCanvas(...w){t.Konva.releaseCanvasOnDestroy&&w.forEach(T=>{T.width=0,T.height=0})},drawRoundedRectPath(w,T,N,A){let P=0,j=0,F=0,R=0;typeof A=="number"?P=j=F=R=Math.min(A,T/2,N/2):(P=Math.min(A[0]||0,T/2,N/2),j=Math.min(A[1]||0,T/2,N/2),R=Math.min(A[2]||0,T/2,N/2),F=Math.min(A[3]||0,T/2,N/2)),w.moveTo(P,0),w.lineTo(T-j,0),w.arc(T-j,j,j,Math.PI*3/2,0,!1),w.lineTo(T,N-R),w.arc(T-R,N-R,R,0,Math.PI/2,!1),w.lineTo(F,N),w.arc(F,N-F,F,Math.PI/2,Math.PI,!1),w.lineTo(0,P),w.arc(P,P,P,Math.PI,Math.PI*3/2,!1)}}})(Y3)),Y3}var Dx={},Id={},Ld={},bj;function Q$(){if(bj)return Ld;bj=1,Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.HitContext=Ld.SceneContext=Ld.Context=void 0;const e=xa(),t=En();function r(C){const S=[],w=C.length,T=e.Util;for(let N=0;N<w;N++){let A=C[N];T._isNumber(A)?A=Math.round(A*1e3)/1e3:T._isString(A)||(A=A+""),S.push(A)}return S}const n=",",s="(",a=")",i="([",o="])",c=";",u="()",d="=",f=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],h=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],g=100;let p=class{constructor(S){this.canvas=S,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(S){S.fillEnabled()&&this._fill(S)}_fill(S){}strokeShape(S){S.hasStroke()&&this._stroke(S)}_stroke(S){}fillStrokeShape(S){S.attrs.fillAfterStrokeEnabled?(this.strokeShape(S),this.fillShape(S)):(this.fillShape(S),this.strokeShape(S))}getTrace(S,w){let T=this.traceArr,N=T.length,A="",P,j,F,R;for(P=0;P<N;P++)j=T[P],F=j.method,F?(R=j.args,A+=F,S?A+=u:e.Util._isArray(R[0])?A+=i+R.join(n)+o:(w&&(R=R.map(L=>typeof L=="number"?Math.floor(L):L)),A+=s+R.join(n)+a)):(A+=j.property,S||(A+=d+j.val)),A+=c;return A}clearTrace(){this.traceArr=[]}_trace(S){let w=this.traceArr,T;w.push(S),T=w.length,T>=g&&w.shift()}reset(){const S=this.getCanvas().getPixelRatio();this.setTransform(1*S,0,0,1*S,0,0)}getCanvas(){return this.canvas}clear(S){const w=this.getCanvas();S?this.clearRect(S.x||0,S.y||0,S.width||0,S.height||0):this.clearRect(0,0,w.getWidth()/w.pixelRatio,w.getHeight()/w.pixelRatio)}_applyLineCap(S){const w=S.attrs.lineCap;w&&this.setAttr("lineCap",w)}_applyOpacity(S){const w=S.getAbsoluteOpacity();w!==1&&this.setAttr("globalAlpha",w)}_applyLineJoin(S){const w=S.attrs.lineJoin;w&&this.setAttr("lineJoin",w)}setAttr(S,w){this._context[S]=w}arc(S,w,T,N,A,P){this._context.arc(S,w,T,N,A,P)}arcTo(S,w,T,N,A){this._context.arcTo(S,w,T,N,A)}beginPath(){this._context.beginPath()}bezierCurveTo(S,w,T,N,A,P){this._context.bezierCurveTo(S,w,T,N,A,P)}clearRect(S,w,T,N){this._context.clearRect(S,w,T,N)}clip(...S){this._context.clip.apply(this._context,S)}closePath(){this._context.closePath()}createImageData(S,w){const T=arguments;if(T.length===2)return this._context.createImageData(S,w);if(T.length===1)return this._context.createImageData(S)}createLinearGradient(S,w,T,N){return this._context.createLinearGradient(S,w,T,N)}createPattern(S,w){return this._context.createPattern(S,w)}createRadialGradient(S,w,T,N,A,P){return this._context.createRadialGradient(S,w,T,N,A,P)}drawImage(S,w,T,N,A,P,j,F,R){const L=arguments,V=this._context;L.length===3?V.drawImage(S,w,T):L.length===5?V.drawImage(S,w,T,N,A):L.length===9&&V.drawImage(S,w,T,N,A,P,j,F,R)}ellipse(S,w,T,N,A,P,j,F){this._context.ellipse(S,w,T,N,A,P,j,F)}isPointInPath(S,w,T,N){return T?this._context.isPointInPath(T,S,w,N):this._context.isPointInPath(S,w,N)}fill(...S){this._context.fill.apply(this._context,S)}fillRect(S,w,T,N){this._context.fillRect(S,w,T,N)}strokeRect(S,w,T,N){this._context.strokeRect(S,w,T,N)}fillText(S,w,T,N){N?this._context.fillText(S,w,T,N):this._context.fillText(S,w,T)}measureText(S){return this._context.measureText(S)}getImageData(S,w,T,N){return this._context.getImageData(S,w,T,N)}lineTo(S,w){this._context.lineTo(S,w)}moveTo(S,w){this._context.moveTo(S,w)}rect(S,w,T,N){this._context.rect(S,w,T,N)}roundRect(S,w,T,N,A){this._context.roundRect(S,w,T,N,A)}putImageData(S,w,T){this._context.putImageData(S,w,T)}quadraticCurveTo(S,w,T,N){this._context.quadraticCurveTo(S,w,T,N)}restore(){this._context.restore()}rotate(S){this._context.rotate(S)}save(){this._context.save()}scale(S,w){this._context.scale(S,w)}setLineDash(S){this._context.setLineDash?this._context.setLineDash(S):"mozDash"in this._context?this._context.mozDash=S:"webkitLineDash"in this._context&&(this._context.webkitLineDash=S)}getLineDash(){return this._context.getLineDash()}setTransform(S,w,T,N,A,P){this._context.setTransform(S,w,T,N,A,P)}stroke(S){S?this._context.stroke(S):this._context.stroke()}strokeText(S,w,T,N){this._context.strokeText(S,w,T,N)}transform(S,w,T,N,A,P){this._context.transform(S,w,T,N,A,P)}translate(S,w){this._context.translate(S,w)}_enableTrace(){let S=this,w=f.length,T=this.setAttr,N,A;const P=function(j){let F=S[j],R;S[j]=function(){return A=r(Array.prototype.slice.call(arguments,0)),R=F.apply(S,arguments),S._trace({method:j,args:A}),R}};for(N=0;N<w;N++)P(f[N]);S.setAttr=function(){T.apply(S,arguments);const j=arguments[0];let F=arguments[1];(j==="shadowOffsetX"||j==="shadowOffsetY"||j==="shadowBlur")&&(F=F/this.canvas.getPixelRatio()),S._trace({property:j,val:F})}}_applyGlobalCompositeOperation(S){const w=S.attrs.globalCompositeOperation;!w||w==="source-over"||this.setAttr("globalCompositeOperation",w)}};Ld.Context=p,h.forEach(function(C){Object.defineProperty(p.prototype,C,{get(){return this._context[C]},set(S){this._context[C]=S}})});class y extends p{constructor(S,{willReadFrequently:w=!1}={}){super(S),this._context=S._canvas.getContext("2d",{willReadFrequently:w})}_fillColor(S){const w=S.fill();this.setAttr("fillStyle",w),S._fillFunc(this)}_fillPattern(S){this.setAttr("fillStyle",S._getFillPattern()),S._fillFunc(this)}_fillLinearGradient(S){const w=S._getLinearGradient();w&&(this.setAttr("fillStyle",w),S._fillFunc(this))}_fillRadialGradient(S){const w=S._getRadialGradient();w&&(this.setAttr("fillStyle",w),S._fillFunc(this))}_fill(S){const w=S.fill(),T=S.getFillPriority();if(w&&T==="color"){this._fillColor(S);return}const N=S.getFillPatternImage();if(N&&T==="pattern"){this._fillPattern(S);return}const A=S.getFillLinearGradientColorStops();if(A&&T==="linear-gradient"){this._fillLinearGradient(S);return}const P=S.getFillRadialGradientColorStops();if(P&&T==="radial-gradient"){this._fillRadialGradient(S);return}w?this._fillColor(S):N?this._fillPattern(S):A?this._fillLinearGradient(S):P&&this._fillRadialGradient(S)}_strokeLinearGradient(S){const w=S.getStrokeLinearGradientStartPoint(),T=S.getStrokeLinearGradientEndPoint(),N=S.getStrokeLinearGradientColorStops(),A=this.createLinearGradient(w.x,w.y,T.x,T.y);if(N){for(let P=0;P<N.length;P+=2)A.addColorStop(N[P],N[P+1]);this.setAttr("strokeStyle",A)}}_stroke(S){const w=S.dash(),T=S.getStrokeScaleEnabled();if(S.hasStroke()){if(!T){this.save();const A=this.getCanvas().getPixelRatio();this.setTransform(A,0,0,A,0,0)}this._applyLineCap(S),w&&S.dashEnabled()&&(this.setLineDash(w),this.setAttr("lineDashOffset",S.dashOffset())),this.setAttr("lineWidth",S.strokeWidth()),S.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),S.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(S):this.setAttr("strokeStyle",S.stroke()),S._strokeFunc(this),T||this.restore()}}_applyShadow(S){var w,T,N;const A=(w=S.getShadowRGBA())!==null&&w!==void 0?w:"black",P=(T=S.getShadowBlur())!==null&&T!==void 0?T:5,j=(N=S.getShadowOffset())!==null&&N!==void 0?N:{x:0,y:0},F=S.getAbsoluteScale(),R=this.canvas.getPixelRatio(),L=F.x*R,V=F.y*R;this.setAttr("shadowColor",A),this.setAttr("shadowBlur",P*Math.min(Math.abs(L),Math.abs(V))),this.setAttr("shadowOffsetX",j.x*L),this.setAttr("shadowOffsetY",j.y*V)}}Ld.SceneContext=y;class v extends p{constructor(S){super(S),this._context=S._canvas.getContext("2d",{willReadFrequently:!0})}_fill(S){this.save(),this.setAttr("fillStyle",S.colorKey),S._fillFuncHit(this),this.restore()}strokeShape(S){S.hasHitStroke()&&this._stroke(S)}_stroke(S){if(S.hasHitStroke()){const w=S.getStrokeScaleEnabled();if(!w){this.save();const A=this.getCanvas().getPixelRatio();this.setTransform(A,0,0,A,0,0)}this._applyLineCap(S);const T=S.hitStrokeWidth(),N=T==="auto"?S.strokeWidth():T;this.setAttr("lineWidth",N),this.setAttr("strokeStyle",S.colorKey),S._strokeFuncHit(this),w||this.restore()}}}return Ld.HitContext=v,Ld}var wj;function B_(){if(wj)return Id;wj=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.HitCanvas=Id.SceneCanvas=Id.Canvas=void 0;const e=xa(),t=Q$(),r=En();let n;function s(){if(n)return n;const c=e.Util.createCanvasElement(),u=c.getContext("2d");return n=(function(){const d=r.Konva._global.devicePixelRatio||1,f=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;return d/f})(),e.Util.releaseCanvas(c),n}let a=class{constructor(u){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const f=(u||{}).pixelRatio||r.Konva.pixelRatio||s();this.pixelRatio=f,this._canvas=e.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(u){const d=this.pixelRatio;this.pixelRatio=u,this.setSize(this.getWidth()/d,this.getHeight()/d)}setWidth(u){this.width=this._canvas.width=u*this.pixelRatio,this._canvas.style.width=u+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}setHeight(u){this.height=this._canvas.height=u*this.pixelRatio,this._canvas.style.height=u+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}getWidth(){return this.width}getHeight(){return this.height}setSize(u,d){this.setWidth(u||0),this.setHeight(d||0)}toDataURL(u,d){try{return this._canvas.toDataURL(u,d)}catch{try{return this._canvas.toDataURL()}catch(h){return e.Util.error("Unable to get data URL. "+h.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Id.Canvas=a;class i extends a{constructor(u={width:0,height:0,willReadFrequently:!1}){super(u),this.context=new t.SceneContext(this,{willReadFrequently:u.willReadFrequently}),this.setSize(u.width,u.height)}}Id.SceneCanvas=i;class o extends a{constructor(u={width:0,height:0}){super(u),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(u.width,u.height)}}return Id.HitCanvas=o,Id}var X3={},_j;function RT(){return _j||(_j=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=En(),r=xa();e.DD={get isDragging(){let n=!1;return e.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return e.DD._dragElements.forEach(s=>{n=s.node}),n},_dragElements:new Map,_drag(n){const s=[];e.DD._dragElements.forEach((a,i)=>{const{node:o}=a,c=o.getStage();c.setPointersPositions(n),a.pointerId===void 0&&(a.pointerId=r.Util._getFirstPointerId(n));const u=c._changedPointerPositions.find(d=>d.id===a.pointerId);if(u){if(a.dragStatus!=="dragging"){const d=o.dragDistance();if(Math.max(Math.abs(u.x-a.startPointerPos.x),Math.abs(u.y-a.startPointerPos.y))<d||(o.startDrag({evt:n}),!o.isDragging()))return}o._setDragPosition(n,a),s.push(o)}}),s.forEach(a=>{a.fire("dragmove",{type:"dragmove",target:a,evt:n},!0)})},_endDragBefore(n){const s=[];e.DD._dragElements.forEach(a=>{const{node:i}=a,o=i.getStage();if(n&&o.setPointersPositions(n),!o._changedPointerPositions.find(d=>d.id===a.pointerId))return;(a.dragStatus==="dragging"||a.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,a.dragStatus="stopped");const u=a.node.getLayer()||a.node instanceof t.Konva.Stage&&a.node;u&&s.indexOf(u)===-1&&s.push(u)}),s.forEach(a=>{a.draw()})},_endDragAfter(n){e.DD._dragElements.forEach((s,a)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:n},!0),s.dragStatus!=="dragging"&&e.DD._dragElements.delete(a)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))})(X3)),X3}var J3={},il={},Sj;function In(){if(Sj)return il;Sj=1,Object.defineProperty(il,"__esModule",{value:!0}),il.RGBComponent=n,il.alphaComponent=s,il.getNumberValidator=a,il.getNumberOrArrayOfNumbersValidator=i,il.getNumberOrAutoValidator=o,il.getStringValidator=c,il.getStringOrGradientValidator=u,il.getFunctionValidator=d,il.getNumberArrayValidator=f,il.getBooleanValidator=h,il.getComponentValidator=g;const e=En(),t=xa();function r(p){return t.Util._isString(p)?'"'+p+'"':Object.prototype.toString.call(p)==="[object Number]"||t.Util._isBoolean(p)?p:Object.prototype.toString.call(p)}function n(p){return p>255?255:p<0?0:Math.round(p)}function s(p){return p>1?1:p<1e-4?1e-4:p}function a(){if(e.Konva.isUnminified)return function(p,y){return t.Util._isNumber(p)||t.Util.warn(r(p)+' is a not valid value for "'+y+'" attribute. The value should be a number.'),p}}function i(p){if(e.Konva.isUnminified)return function(y,v){let C=t.Util._isNumber(y),S=t.Util._isArray(y)&&y.length==p;return!C&&!S&&t.Util.warn(r(y)+' is a not valid value for "'+v+'" attribute. The value should be a number or Array<number>('+p+")"),y}}function o(){if(e.Konva.isUnminified)return function(p,y){return t.Util._isNumber(p)||p==="auto"||t.Util.warn(r(p)+' is a not valid value for "'+y+'" attribute. The value should be a number or "auto".'),p}}function c(){if(e.Konva.isUnminified)return function(p,y){return t.Util._isString(p)||t.Util.warn(r(p)+' is a not valid value for "'+y+'" attribute. The value should be a string.'),p}}function u(){if(e.Konva.isUnminified)return function(p,y){const v=t.Util._isString(p),C=Object.prototype.toString.call(p)==="[object CanvasGradient]"||p&&p.addColorStop;return v||C||t.Util.warn(r(p)+' is a not valid value for "'+y+'" attribute. The value should be a string or a native gradient.'),p}}function d(){if(e.Konva.isUnminified)return function(p,y){return t.Util._isFunction(p)||t.Util.warn(r(p)+' is a not valid value for "'+y+'" attribute. The value should be a function.'),p}}function f(){if(e.Konva.isUnminified)return function(p,y){const v=Int8Array?Object.getPrototypeOf(Int8Array):null;return v&&p instanceof v||(t.Util._isArray(p)?p.forEach(function(C){t.Util._isNumber(C)||t.Util.warn('"'+y+'" attribute has non numeric element '+C+". Make sure that all elements are numbers.")}):t.Util.warn(r(p)+' is a not valid value for "'+y+'" attribute. The value should be a array of numbers.')),p}}function h(){if(e.Konva.isUnminified)return function(p,y){return p===!0||p===!1||t.Util.warn(r(p)+' is a not valid value for "'+y+'" attribute. The value should be a boolean.'),p}}function g(p){if(e.Konva.isUnminified)return function(y,v){return y==null||t.Util.isObject(y)||t.Util.warn(r(y)+' is a not valid value for "'+v+'" attribute. The value should be an object with properties '+p),y}}return il}var kj;function Mn(){return kj||(kj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=xa(),r=In(),n="get",s="set";e.Factory={addGetterSetter(a,i,o,c,u){e.Factory.addGetter(a,i,o),e.Factory.addSetter(a,i,c,u),e.Factory.addOverloadedGetterSetter(a,i)},addGetter(a,i,o){const c=n+t.Util._capitalize(i);a.prototype[c]=a.prototype[c]||function(){const u=this.attrs[i];return u===void 0?o:u}},addSetter(a,i,o,c){const u=s+t.Util._capitalize(i);a.prototype[u]||e.Factory.overWriteSetter(a,i,o,c)},overWriteSetter(a,i,o,c){const u=s+t.Util._capitalize(i);a.prototype[u]=function(d){return o&&d!==void 0&&d!==null&&(d=o.call(this,d,i)),this._setAttr(i,d),c&&c.call(this),this}},addComponentsGetterSetter(a,i,o,c,u){const d=o.length,f=t.Util._capitalize,h=n+f(i),g=s+f(i);a.prototype[h]=function(){const y={};for(let v=0;v<d;v++){const C=o[v];y[C]=this.getAttr(i+f(C))}return y};const p=(0,r.getComponentValidator)(o);a.prototype[g]=function(y){const v=this.attrs[i];c&&(y=c.call(this,y,i)),p&&p.call(this,y,i);for(const C in y)y.hasOwnProperty(C)&&this._setAttr(i+f(C),y[C]);return y||o.forEach(C=>{this._setAttr(i+f(C),void 0)}),this._fireChangeEvent(i,v,y),u&&u.call(this),this},e.Factory.addOverloadedGetterSetter(a,i)},addOverloadedGetterSetter(a,i){const o=t.Util._capitalize(i),c=s+o,u=n+o;a.prototype[i]=function(){return arguments.length?(this[c](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(a,i,o,c){t.Util.error("Adding deprecated "+i);const u=n+t.Util._capitalize(i),d=i+" property is deprecated and will be removed soon. Look at Konva change log for more information.";a.prototype[u]=function(){t.Util.error(d);const f=this.attrs[i];return f===void 0?o:f},e.Factory.addSetter(a,i,c,function(){t.Util.error(d)}),e.Factory.addOverloadedGetterSetter(a,i)},backCompat(a,i){t.Util.each(i,function(o,c){const u=a.prototype[c],d=n+t.Util._capitalize(o),f=s+t.Util._capitalize(o);function h(){u.apply(this,arguments),t.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+c+'" instead.')}a.prototype[o]=h,a.prototype[d]=h,a.prototype[f]=h})},afterSetFilter(){this._filterUpToDate=!1}}})(J3)),J3}var Cj;function Ma(){if(Cj)return Dx;Cj=1,Object.defineProperty(Dx,"__esModule",{value:!0}),Dx.Node=void 0;const e=B_(),t=RT(),r=Mn(),n=En(),s=xa(),a=In(),i="absoluteOpacity",o="allEventListeners",c="absoluteTransform",u="absoluteScale",d="canvas",f="Change",h="children",g="konva",p="listening",y="mouseenter",v="mouseleave",C="pointerenter",S="pointerleave",w="touchenter",T="touchleave",N="set",A="Shape",P=" ",j="stage",F="transform",R="Stage",L="visible",V=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(P);let Z=1,Y=class e8{constructor(z){this._id=Z++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(z),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(z){(z===F||z===c)&&this._cache.get(z)?this._cache.get(z).dirty=!0:z?this._cache.delete(z):this._cache.clear()}_getCache(z,X){let I=this._cache.get(z);return(I===void 0||(z===F||z===c)&&I.dirty===!0)&&(I=X.call(this),this._cache.set(z,I)),I}_calculate(z,X,I){if(!this._attachedDepsListeners.get(z)){const B=X.map(W=>W+"Change.konva").join(P);this.on(B,()=>{this._clearCache(z)}),this._attachedDepsListeners.set(z,!0)}return this._getCache(z,I)}_getCanvasCache(){return this._cache.get(d)}_clearSelfAndDescendantCache(z){this._clearCache(z),z===c&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(d)){const{scene:z,filter:X,hit:I,buffer:B}=this._cache.get(d);s.Util.releaseCanvas(z,X,I,B),this._cache.delete(d)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(z){const X=z||{};let I={};(X.x===void 0||X.y===void 0||X.width===void 0||X.height===void 0)&&(I=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let B=Math.ceil(X.width||I.width),W=Math.ceil(X.height||I.height),D=X.pixelRatio,U=X.x===void 0?Math.floor(I.x):X.x,q=X.y===void 0?Math.floor(I.y):X.y,H=X.offset||0,te=X.drawBorder||!1,Q=X.hitCanvasPixelRatio||1;if(!B||!W){s.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const ae=Math.abs(Math.round(I.x)-U)>.5?1:0,ce=Math.abs(Math.round(I.y)-q)>.5?1:0;B+=H*2+ae,W+=H*2+ce,U-=H,q-=H;const me=new e.SceneCanvas({pixelRatio:D,width:B,height:W}),xe=new e.SceneCanvas({pixelRatio:D,width:0,height:0,willReadFrequently:!0}),se=new e.HitCanvas({pixelRatio:Q,width:B,height:W}),De=me.getContext(),He=se.getContext(),rt=new e.SceneCanvas({width:me.width/me.pixelRatio+Math.abs(U),height:me.height/me.pixelRatio+Math.abs(q),pixelRatio:me.pixelRatio}),_t=rt.getContext();return se.isCache=!0,me.isCache=!0,this._cache.delete(d),this._filterUpToDate=!1,X.imageSmoothingEnabled===!1&&(me.getContext()._context.imageSmoothingEnabled=!1,xe.getContext()._context.imageSmoothingEnabled=!1),De.save(),He.save(),_t.save(),De.translate(-U,-q),He.translate(-U,-q),_t.translate(-U,-q),rt.x=U,rt.y=q,this._isUnderCache=!0,this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(u),this.drawScene(me,this,rt),this.drawHit(se,this),this._isUnderCache=!1,De.restore(),He.restore(),te&&(De.save(),De.beginPath(),De.rect(0,0,B,W),De.closePath(),De.setAttr("strokeStyle","red"),De.setAttr("lineWidth",5),De.stroke(),De.restore()),this._cache.set(d,{scene:me,filter:xe,hit:se,buffer:rt,x:U,y:q}),this._requestDraw(),this}isCached(){return this._cache.has(d)}getClientRect(z){throw new Error('abstract "getClientRect" method call')}_transformedRect(z,X){const I=[{x:z.x,y:z.y},{x:z.x+z.width,y:z.y},{x:z.x+z.width,y:z.y+z.height},{x:z.x,y:z.y+z.height}];let B=1/0,W=1/0,D=-1/0,U=-1/0;const q=this.getAbsoluteTransform(X);return I.forEach(function(H){const te=q.point(H);B===void 0&&(B=D=te.x,W=U=te.y),B=Math.min(B,te.x),W=Math.min(W,te.y),D=Math.max(D,te.x),U=Math.max(U,te.y)}),{x:B,y:W,width:D-B,height:U-W}}_drawCachedSceneCanvas(z){z.save(),z._applyOpacity(this),z._applyGlobalCompositeOperation(this);const X=this._getCanvasCache();z.translate(X.x,X.y);const I=this._getCachedSceneCanvas(),B=I.pixelRatio;z.drawImage(I._canvas,0,0,I.width/B,I.height/B),z.restore()}_drawCachedHitCanvas(z){const X=this._getCanvasCache(),I=X.hit;z.save(),z.translate(X.x,X.y),z.drawImage(I._canvas,0,0,I.width/I.pixelRatio,I.height/I.pixelRatio),z.restore()}_getCachedSceneCanvas(){let z=this.filters(),X=this._getCanvasCache(),I=X.scene,B=X.filter,W=B.getContext(),D,U,q,H;if(z){if(!this._filterUpToDate){const te=I.pixelRatio;B.setSize(I.width/I.pixelRatio,I.height/I.pixelRatio);try{for(D=z.length,W.clear(),W.drawImage(I._canvas,0,0,I.getWidth()/te,I.getHeight()/te),U=W.getImageData(0,0,B.getWidth(),B.getHeight()),q=0;q<D;q++){if(H=z[q],typeof H!="function"){s.Util.error("Filter should be type of function, but got "+typeof H+" instead. Please check correct filters");continue}H.call(this,U),W.putImageData(U,0,0)}}catch(Q){s.Util.error("Unable to apply filter. "+Q.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return B}return I}on(z,X){if(this._cache&&this._cache.delete(o),arguments.length===3)return this._delegate.apply(this,arguments);const I=z.split(P);for(let B=0;B<I.length;B++){const D=I[B].split("."),U=D[0],q=D[1]||"";this.eventListeners[U]||(this.eventListeners[U]=[]),this.eventListeners[U].push({name:q,handler:X})}return this}off(z,X){let I=(z||"").split(P),B=I.length,W,D,U,q,H,te;if(this._cache&&this._cache.delete(o),!z)for(D in this.eventListeners)this._off(D);for(W=0;W<B;W++)if(U=I[W],q=U.split("."),H=q[0],te=q[1],H)this.eventListeners[H]&&this._off(H,te,X);else for(D in this.eventListeners)this._off(D,te,X);return this}dispatchEvent(z){const X={target:this,type:z.type,evt:z};return this.fire(z.type,X),this}addEventListener(z,X){return this.on(z,function(I){X.call(this,I.evt)}),this}removeEventListener(z){return this.off(z),this}_delegate(z,X,I){const B=this;this.on(z,function(W){const D=W.target.findAncestors(X,!0,B);for(let U=0;U<D.length;U++)W=s.Util.cloneObject(W),W.currentTarget=D[U],I.call(D[U],W)})}remove(){return this.isDragging()&&this.stopDrag(),t.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(j),this._clearSelfAndDescendantCache(L),this._clearSelfAndDescendantCache(p)}_remove(){this._clearCaches();const z=this.getParent();z&&z.children&&(z.children.splice(this.index,1),z._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(z){const X="get"+s.Util._capitalize(z);return s.Util._isFunction(this[X])?this[X]():this.attrs[z]}getAncestors(){let z=this.getParent(),X=[];for(;z;)X.push(z),z=z.getParent();return X}getAttrs(){return this.attrs||{}}setAttrs(z){return this._batchTransformChanges(()=>{let X,I;if(!z)return this;for(X in z)X!==h&&(I=N+s.Util._capitalize(X),s.Util._isFunction(this[I])?this[I](z[X]):this._setAttr(X,z[X]))}),this}isListening(){return this._getCache(p,this._isListening)}_isListening(z){if(!this.listening())return!1;const I=this.getParent();return I&&I!==z&&this!==z?I._isListening(z):!0}isVisible(){return this._getCache(L,this._isVisible)}_isVisible(z){if(!this.visible())return!1;const I=this.getParent();return I&&I!==z&&this!==z?I._isVisible(z):!0}shouldDrawHit(z,X=!1){if(z)return this._isVisible(z)&&this._isListening(z);const I=this.getLayer();let B=!1;t.DD._dragElements.forEach(D=>{D.dragStatus==="dragging"&&(D.node.nodeType==="Stage"||D.node.getLayer()===I)&&(B=!0)});const W=!X&&!n.Konva.hitOnDragEnabled&&(B||n.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!W}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let z=this.getDepth(),X=this,I=0,B,W,D,U;function q(te){for(B=[],W=te.length,D=0;D<W;D++)U=te[D],I++,U.nodeType!==A&&(B=B.concat(U.getChildren().slice())),U._id===X._id&&(D=W);B.length>0&&B[0].getDepth()<=z&&q(B)}const H=this.getStage();return X.nodeType!==R&&H&&q(H.getChildren()),I}getDepth(){let z=0,X=this.parent;for(;X;)z++,X=X.parent;return z}_batchTransformChanges(z){this._batchingTransformChange=!0,z(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(F),this._clearSelfAndDescendantCache(c)),this._needClearTransformCache=!1}setPosition(z){return this._batchTransformChanges(()=>{this.x(z.x),this.y(z.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const z=this.getStage();if(!z)return null;const X=z.getPointerPosition();if(!X)return null;const I=this.getAbsoluteTransform().copy();return I.invert(),I.point(X)}getAbsolutePosition(z){let X=!1,I=this.parent;for(;I;){if(I.isCached()){X=!0;break}I=I.parent}X&&!z&&(z=!0);const B=this.getAbsoluteTransform(z).getMatrix(),W=new s.Transform,D=this.offset();return W.m=B.slice(),W.translate(D.x,D.y),W.getTranslation()}setAbsolutePosition(z){const{x:X,y:I,...B}=this._clearTransform();this.attrs.x=X,this.attrs.y=I,this._clearCache(F);const W=this._getAbsoluteTransform().copy();return W.invert(),W.translate(z.x,z.y),z={x:this.attrs.x+W.getTranslation().x,y:this.attrs.y+W.getTranslation().y},this._setTransform(B),this.setPosition({x:z.x,y:z.y}),this._clearCache(F),this._clearSelfAndDescendantCache(c),this}_setTransform(z){let X;for(X in z)this.attrs[X]=z[X]}_clearTransform(){const z={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,z}move(z){let X=z.x,I=z.y,B=this.x(),W=this.y();return X!==void 0&&(B+=X),I!==void 0&&(W+=I),this.setPosition({x:B,y:W}),this}_eachAncestorReverse(z,X){let I=[],B=this.getParent(),W,D;if(!(X&&X._id===this._id)){for(I.unshift(this);B&&(!X||B._id!==X._id);)I.unshift(B),B=B.parent;for(W=I.length,D=0;D<W;D++)z(I[D])}}rotate(z){return this.rotation(this.rotation()+z),this}moveToTop(){if(!this.parent)return s.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const z=this.index,X=this.parent.getChildren().length;return z<X-1?(this.parent.children.splice(z,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return s.Util.warn("Node has no parent. moveUp function is ignored."),!1;const z=this.index,X=this.parent.getChildren().length;return z<X-1?(this.parent.children.splice(z,1),this.parent.children.splice(z+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return s.Util.warn("Node has no parent. moveDown function is ignored."),!1;const z=this.index;return z>0?(this.parent.children.splice(z,1),this.parent.children.splice(z-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return s.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const z=this.index;return z>0?(this.parent.children.splice(z,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(z){if(!this.parent)return s.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(z<0||z>=this.parent.children.length)&&s.Util.warn("Unexpected value "+z+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const X=this.index;return this.parent.children.splice(X,1),this.parent.children.splice(z,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(i,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let z=this.opacity();const X=this.getParent();return X&&!X._isUnderCache&&(z*=X.getAbsoluteOpacity()),z}moveTo(z){return this.getParent()!==z&&(this._remove(),z.add(this)),this}toObject(){let z=this.getAttrs(),X,I,B,W,D;const U={attrs:{},className:this.getClassName()};for(X in z)I=z[X],D=s.Util.isObject(I)&&!s.Util._isPlainObject(I)&&!s.Util._isArray(I),!D&&(B=typeof this[X]=="function"&&this[X],delete z[X],W=B?B.call(this):null,z[X]=I,W!==I&&(U.attrs[X]=I));return s.Util._prepareToStringify(U)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(z,X,I){const B=[];X&&this._isMatch(z)&&B.push(this);let W=this.parent;for(;W;){if(W===I)return B;W._isMatch(z)&&B.push(W),W=W.parent}return B}isAncestorOf(z){return!1}findAncestor(z,X,I){return this.findAncestors(z,X,I)[0]}_isMatch(z){if(!z)return!1;if(typeof z=="function")return z(this);let X=z.replace(/ /g,"").split(","),I=X.length,B,W;for(B=0;B<I;B++)if(W=X[B],s.Util.isValidSelector(W)||(s.Util.warn('Selector "'+W+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),s.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),s.Util.warn("Konva is awesome, right?")),W.charAt(0)==="#"){if(this.id()===W.slice(1))return!0}else if(W.charAt(0)==="."){if(this.hasName(W.slice(1)))return!0}else if(this.className===W||this.nodeType===W)return!0;return!1}getLayer(){const z=this.getParent();return z?z.getLayer():null}getStage(){return this._getCache(j,this._getStage)}_getStage(){const z=this.getParent();return z?z.getStage():null}fire(z,X={},I){return X.target=X.target||this,I?this._fireAndBubble(z,X):this._fire(z,X),this}getAbsoluteTransform(z){return z?this._getAbsoluteTransform(z):this._getCache(c,this._getAbsoluteTransform)}_getAbsoluteTransform(z){let X;if(z)return X=new s.Transform,this._eachAncestorReverse(function(I){const B=I.transformsEnabled();B==="all"?X.multiply(I.getTransform()):B==="position"&&X.translate(I.x()-I.offsetX(),I.y()-I.offsetY())},z),X;{X=this._cache.get(c)||new s.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(X):X.reset();const I=this.transformsEnabled();if(I==="all")X.multiply(this.getTransform());else if(I==="position"){const B=this.attrs.x||0,W=this.attrs.y||0,D=this.attrs.offsetX||0,U=this.attrs.offsetY||0;X.translate(B-D,W-U)}return X.dirty=!1,X}}getAbsoluteScale(z){let X=this;for(;X;)X._isUnderCache&&(z=X),X=X.getParent();const B=this.getAbsoluteTransform(z).decompose();return{x:B.scaleX,y:B.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(F,this._getTransform)}_getTransform(){var z,X;const I=this._cache.get(F)||new s.Transform;I.reset();const B=this.x(),W=this.y(),D=n.Konva.getAngle(this.rotation()),U=(z=this.attrs.scaleX)!==null&&z!==void 0?z:1,q=(X=this.attrs.scaleY)!==null&&X!==void 0?X:1,H=this.attrs.skewX||0,te=this.attrs.skewY||0,Q=this.attrs.offsetX||0,ae=this.attrs.offsetY||0;return(B!==0||W!==0)&&I.translate(B,W),D!==0&&I.rotate(D),(H!==0||te!==0)&&I.skew(H,te),(U!==1||q!==1)&&I.scale(U,q),(Q!==0||ae!==0)&&I.translate(-1*Q,-1*ae),I.dirty=!1,I}clone(z){let X=s.Util.cloneObject(this.attrs),I,B,W,D,U;for(I in z)X[I]=z[I];const q=new this.constructor(X);for(I in this.eventListeners)for(B=this.eventListeners[I],W=B.length,D=0;D<W;D++)U=B[D],U.name.indexOf(g)<0&&(q.eventListeners[I]||(q.eventListeners[I]=[]),q.eventListeners[I].push(U));return q}_toKonvaCanvas(z){z=z||{};const X=this.getClientRect(),I=this.getStage(),B=z.x!==void 0?z.x:Math.floor(X.x),W=z.y!==void 0?z.y:Math.floor(X.y),D=z.pixelRatio||1,U=new e.SceneCanvas({width:z.width||Math.ceil(X.width)||(I?I.width():0),height:z.height||Math.ceil(X.height)||(I?I.height():0),pixelRatio:D}),q=U.getContext(),H=new e.SceneCanvas({width:U.width/U.pixelRatio+Math.abs(B),height:U.height/U.pixelRatio+Math.abs(W),pixelRatio:U.pixelRatio});return z.imageSmoothingEnabled===!1&&(q._context.imageSmoothingEnabled=!1),q.save(),(B||W)&&q.translate(-1*B,-1*W),this.drawScene(U,void 0,H),q.restore(),U}toCanvas(z){return this._toKonvaCanvas(z)._canvas}toDataURL(z){z=z||{};const X=z.mimeType||null,I=z.quality||null,B=this._toKonvaCanvas(z).toDataURL(X,I);return z.callback&&z.callback(B),B}toImage(z){return new Promise((X,I)=>{try{const B=z?.callback;B&&delete z.callback,s.Util._urlToImage(this.toDataURL(z),function(W){X(W),B?.(W)})}catch(B){I(B)}})}toBlob(z){return new Promise((X,I)=>{try{const B=z?.callback;B&&delete z.callback,this.toCanvas(z).toBlob(W=>{X(W),B?.(W)},z?.mimeType,z?.quality)}catch(B){I(B)}})}setSize(z){return this.width(z.width),this.height(z.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():n.Konva.dragDistance}_off(z,X,I){let B=this.eventListeners[z],W,D,U;for(W=0;W<B.length;W++)if(D=B[W].name,U=B[W].handler,(D!=="konva"||X==="konva")&&(!X||D===X)&&(!I||I===U)){if(B.splice(W,1),B.length===0){delete this.eventListeners[z];break}W--}}_fireChangeEvent(z,X,I){this._fire(z+f,{oldVal:X,newVal:I})}addName(z){if(!this.hasName(z)){const X=this.name(),I=X?X+" "+z:z;this.name(I)}return this}hasName(z){if(!z)return!1;const X=this.name();return X?(X||"").split(/\s/g).indexOf(z)!==-1:!1}removeName(z){const X=(this.name()||"").split(/\s/g),I=X.indexOf(z);return I!==-1&&(X.splice(I,1),this.name(X.join(" "))),this}setAttr(z,X){const I=this[N+s.Util._capitalize(z)];return s.Util._isFunction(I)?I.call(this,X):this._setAttr(z,X),this}_requestDraw(){if(n.Konva.autoDrawEnabled){const z=this.getLayer()||this.getStage();z?.batchDraw()}}_setAttr(z,X){const I=this.attrs[z];I===X&&!s.Util.isObject(X)||(X==null?delete this.attrs[z]:this.attrs[z]=X,this._shouldFireChangeEvents&&this._fireChangeEvent(z,I,X),this._requestDraw())}_setComponentAttr(z,X,I){let B;I!==void 0&&(B=this.attrs[z],B||(this.attrs[z]=this.getAttr(z)),this.attrs[z][X]=I,this._fireChangeEvent(z,B,I))}_fireAndBubble(z,X,I){X&&this.nodeType===A&&(X.target=this);const B=[y,v,C,S,w,T];if(!(B.indexOf(z)!==-1&&(I&&(this===I||this.isAncestorOf&&this.isAncestorOf(I))||this.nodeType==="Stage"&&!I))){this._fire(z,X);const D=B.indexOf(z)!==-1&&I&&I.isAncestorOf&&I.isAncestorOf(this)&&!I.isAncestorOf(this.parent);(X&&!X.cancelBubble||!X)&&this.parent&&this.parent.isListening()&&!D&&(I&&I.parent?this._fireAndBubble.call(this.parent,z,X,I):this._fireAndBubble.call(this.parent,z,X))}}_getProtoListeners(z){var X,I,B;const W=(X=this._cache.get(o))!==null&&X!==void 0?X:{};let D=W?.[z];if(D===void 0){D=[];let U=Object.getPrototypeOf(this);for(;U;){const q=(B=(I=U.eventListeners)===null||I===void 0?void 0:I[z])!==null&&B!==void 0?B:[];D.push(...q),U=Object.getPrototypeOf(U)}W[z]=D,this._cache.set(o,W)}return D}_fire(z,X){X=X||{},X.currentTarget=this,X.type=z;const I=this._getProtoListeners(z);if(I)for(let W=0;W<I.length;W++)I[W].handler.call(this,X);const B=this.eventListeners[z];if(B)for(let W=0;W<B.length;W++)B[W].handler.call(this,X)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(z){const X=z?z.pointerId:void 0,I=this.getStage(),B=this.getAbsolutePosition();if(!I)return;const W=I._getPointerById(X)||I._changedPointerPositions[0]||B;t.DD._dragElements.set(this._id,{node:this,startPointerPos:W,offset:{x:W.x-B.x,y:W.y-B.y},dragStatus:"ready",pointerId:X})}startDrag(z,X=!0){t.DD._dragElements.has(this._id)||this._createDragElement(z);const I=t.DD._dragElements.get(this._id);I.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:z&&z.evt},X)}_setDragPosition(z,X){const I=this.getStage()._getPointerById(X.pointerId);if(!I)return;let B={x:I.x-X.offset.x,y:I.y-X.offset.y};const W=this.dragBoundFunc();if(W!==void 0){const D=W.call(this,B,z);D?B=D:s.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==B.x||this._lastPos.y!==B.y)&&(this.setAbsolutePosition(B),this._requestDraw()),this._lastPos=B}stopDrag(z){const X=t.DD._dragElements.get(this._id);X&&(X.dragStatus="stopped"),t.DD._endDragBefore(z),t.DD._endDragAfter(z)}setDraggable(z){this._setAttr("draggable",z),this._dragChange()}isDragging(){const z=t.DD._dragElements.get(this._id);return z?z.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(z){if(!(!(z.evt.button!==void 0)||n.Konva.dragButtons.indexOf(z.evt.button)>=0)||this.isDragging())return;let B=!1;t.DD._dragElements.forEach(W=>{this.isAncestorOf(W.node)&&(B=!0)}),B||this._createDragElement(z)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const X=t.DD._dragElements.get(this._id),I=X&&X.dragStatus==="dragging",B=X&&X.dragStatus==="ready";I?this.stopDrag():B&&t.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(z={x:0,y:0}){const X=this.getStage();if(!X)return!1;const I={x:-z.x,y:-z.y,width:X.width()+2*z.x,height:X.height()+2*z.y};return s.Util.haveIntersection(I,this.getClientRect())}static create(z,X){return s.Util._isString(z)&&(z=JSON.parse(z)),this._createNode(z,X)}static _createNode(z,X){let I=e8.prototype.getClassName.call(z),B=z.children,W,D,U;X&&(z.attrs.container=X),n.Konva[I]||(s.Util.warn('Can not find a node with class name "'+I+'". Fallback to "Shape".'),I="Shape");const q=n.Konva[I];if(W=new q(z.attrs),B)for(D=B.length,U=0;U<D;U++)W.add(e8._createNode(B[U]));return W}};Dx.Node=Y,Y.prototype.nodeType="Node",Y.prototype._attrsAffectingSize=[],Y.prototype.eventListeners={},Y.prototype.on.call(Y.prototype,V,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(F),this._clearSelfAndDescendantCache(c)}),Y.prototype.on.call(Y.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(L)}),Y.prototype.on.call(Y.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(p)}),Y.prototype.on.call(Y.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(i)});const re=r.Factory.addGetterSetter;return re(Y,"zIndex"),re(Y,"absolutePosition"),re(Y,"position"),re(Y,"x",0,(0,a.getNumberValidator)()),re(Y,"y",0,(0,a.getNumberValidator)()),re(Y,"globalCompositeOperation","source-over",(0,a.getStringValidator)()),re(Y,"opacity",1,(0,a.getNumberValidator)()),re(Y,"name","",(0,a.getStringValidator)()),re(Y,"id","",(0,a.getStringValidator)()),re(Y,"rotation",0,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(Y,"scale",["x","y"]),re(Y,"scaleX",1,(0,a.getNumberValidator)()),re(Y,"scaleY",1,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(Y,"skew",["x","y"]),re(Y,"skewX",0,(0,a.getNumberValidator)()),re(Y,"skewY",0,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(Y,"offset",["x","y"]),re(Y,"offsetX",0,(0,a.getNumberValidator)()),re(Y,"offsetY",0,(0,a.getNumberValidator)()),re(Y,"dragDistance",void 0,(0,a.getNumberValidator)()),re(Y,"width",0,(0,a.getNumberValidator)()),re(Y,"height",0,(0,a.getNumberValidator)()),re(Y,"listening",!0,(0,a.getBooleanValidator)()),re(Y,"preventDefault",!0,(0,a.getBooleanValidator)()),re(Y,"filters",void 0,function(ue){return this._filterUpToDate=!1,ue}),re(Y,"visible",!0,(0,a.getBooleanValidator)()),re(Y,"transformsEnabled","all",(0,a.getStringValidator)()),re(Y,"size"),re(Y,"dragBoundFunc"),re(Y,"draggable",!1,(0,a.getBooleanValidator)()),r.Factory.backCompat(Y,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Dx}var Rx={},Tj;function $_(){if(Tj)return Rx;Tj=1,Object.defineProperty(Rx,"__esModule",{value:!0}),Rx.Container=void 0;const e=Mn(),t=Ma(),r=In();let n=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(a){const i=this.children||[];return a?i.filter(a):i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.destroy()}),this.children=[],this._requestDraw(),this}add(...a){if(a.length===0)return this;if(a.length>1){for(let o=0;o<a.length;o++)this.add(a[o]);return this}const i=a[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(a){return this._generalFind(a,!1)}findOne(a){const i=this._generalFind(a,!0);return i.length>0?i[0]:void 0}_generalFind(a,i){const o=[];return this._descendants(c=>{const u=c._isMatch(a);return u&&o.push(c),!!(u&&i)}),o}_descendants(a){let i=!1;const o=this.getChildren();for(const c of o){if(i=a(c),i)return!0;if(c.hasChildren()&&(i=c._descendants(a),i))return!0}return!1}toObject(){const a=t.Node.prototype.toObject.call(this);return a.children=[],this.getChildren().forEach(i=>{a.children.push(i.toObject())}),a}isAncestorOf(a){let i=a.getParent();for(;i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(a){const i=t.Node.prototype.clone.call(this,a);return this.getChildren().forEach(function(o){i.add(o.clone())}),i}getAllIntersections(a){const i=[];return this.find("Shape").forEach(o=>{o.isVisible()&&o.intersects(a)&&i.push(o)}),i}_clearSelfAndDescendantCache(a){var i;super._clearSelfAndDescendantCache(a),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(o){o._clearSelfAndDescendantCache(a)}))}_setChildrenIndices(){var a;(a=this.children)===null||a===void 0||a.forEach(function(i,o){i.index=o}),this._requestDraw()}drawScene(a,i,o){const c=this.getLayer(),u=a||c&&c.getCanvas(),d=u&&u.getContext(),f=this._getCanvasCache(),h=f&&f.scene,g=u&&u.isCache;if(!this.isVisible()&&!g)return this;if(h){d.save();const p=this.getAbsoluteTransform(i).getMatrix();d.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedSceneCanvas(d),d.restore()}else this._drawChildren("drawScene",u,i,o);return this}drawHit(a,i){if(!this.shouldDrawHit(i))return this;const o=this.getLayer(),c=a||o&&o.hitCanvas,u=c&&c.getContext(),d=this._getCanvasCache();if(d&&d.hit){u.save();const h=this.getAbsoluteTransform(i).getMatrix();u.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedHitCanvas(u),u.restore()}else this._drawChildren("drawHit",c,i);return this}_drawChildren(a,i,o,c){var u;const d=i&&i.getContext(),f=this.clipWidth(),h=this.clipHeight(),g=this.clipFunc(),p=typeof f=="number"&&typeof h=="number"||g,y=o===this;if(p){d.save();const C=this.getAbsoluteTransform(o);let S=C.getMatrix();d.transform(S[0],S[1],S[2],S[3],S[4],S[5]),d.beginPath();let w;if(g)w=g.call(this,d,this);else{const T=this.clipX(),N=this.clipY();d.rect(T||0,N||0,f,h)}d.clip.apply(d,w),S=C.copy().invert().getMatrix(),d.transform(S[0],S[1],S[2],S[3],S[4],S[5])}const v=!y&&this.globalCompositeOperation()!=="source-over"&&a==="drawScene";v&&(d.save(),d._applyGlobalCompositeOperation(this)),(u=this.children)===null||u===void 0||u.forEach(function(C){C[a](i,o,c)}),v&&d.restore(),p&&d.restore()}getClientRect(a={}){var i;const o=a.skipTransform,c=a.relativeTo;let u,d,f,h,g={x:1/0,y:1/0,width:0,height:0};const p=this;(i=this.children)===null||i===void 0||i.forEach(function(C){if(!C.visible())return;const S=C.getClientRect({relativeTo:p,skipShadow:a.skipShadow,skipStroke:a.skipStroke});S.width===0&&S.height===0||(u===void 0?(u=S.x,d=S.y,f=S.x+S.width,h=S.y+S.height):(u=Math.min(u,S.x),d=Math.min(d,S.y),f=Math.max(f,S.x+S.width),h=Math.max(h,S.y+S.height)))});const y=this.find("Shape");let v=!1;for(let C=0;C<y.length;C++)if(y[C]._isVisible(this)){v=!0;break}return v&&u!==void 0?g={x:u,y:d,width:f-u,height:h-d}:g={x:0,y:0,width:0,height:0},o?g:this._transformedRect(g,c)}};return Rx.Container=n,e.Factory.addComponentsGetterSetter(n,"clip",["x","y","width","height"]),e.Factory.addGetterSetter(n,"clipX",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipY",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipWidth",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipHeight",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipFunc"),Rx}var Q3={},yf={},Ej;function Z$(){if(Ej)return yf;Ej=1,Object.defineProperty(yf,"__esModule",{value:!0}),yf.getCapturedShape=n,yf.createEvent=s,yf.hasPointerCapture=a,yf.setPointerCapture=i,yf.releaseCapture=o;const e=En(),t=new Map,r=e.Konva._global.PointerEvent!==void 0;function n(c){return t.get(c)}function s(c){return{evt:c,pointerId:c.pointerId}}function a(c,u){return t.get(c)===u}function i(c,u){o(c),u.getStage()&&(t.set(c,u),r&&u._fire("gotpointercapture",s(new PointerEvent("gotpointercapture"))))}function o(c,u){const d=t.get(c);if(!d)return;const f=d.getStage();f&&f.content,t.delete(c),r&&d._fire("lostpointercapture",s(new PointerEvent("lostpointercapture")))}return yf}var Nj;function kne(){return Nj||(Nj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=xa(),r=Mn(),n=$_(),s=En(),a=B_(),i=RT(),o=En(),c=Z$(),u="Stage",d="string",f="px",h="mouseout",g="mouseleave",p="mouseover",y="mouseenter",v="mousemove",C="mousedown",S="mouseup",w="pointermove",T="pointerdown",N="pointerup",A="pointercancel",P="lostpointercapture",j="pointerout",F="pointerleave",R="pointerover",L="pointerenter",V="contextmenu",Z="touchstart",Y="touchend",re="touchmove",ue="touchcancel",z="wheel",X=5,I=[[y,"_pointerenter"],[C,"_pointerdown"],[v,"_pointermove"],[S,"_pointerup"],[g,"_pointerleave"],[Z,"_pointerdown"],[re,"_pointermove"],[Y,"_pointerup"],[ue,"_pointercancel"],[p,"_pointerover"],[z,"_wheel"],[V,"_contextmenu"],[T,"_pointerdown"],[w,"_pointermove"],[N,"_pointerup"],[A,"_pointercancel"],[F,"_pointerleave"],[P,"_lostpointercapture"]],B={mouse:{[j]:h,[F]:g,[R]:p,[L]:y,[w]:v,[T]:C,[N]:S,[A]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[j]:"touchout",[F]:"touchleave",[R]:"touchover",[L]:"touchenter",[w]:re,[T]:Z,[N]:Y,[A]:ue,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[j]:j,[F]:F,[R]:R,[L]:L,[w]:w,[T]:T,[N]:N,[A]:A,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},W=te=>te.indexOf("pointer")>=0?"pointer":te.indexOf("touch")>=0?"touch":"mouse",D=te=>{const Q=W(te);if(Q==="pointer")return s.Konva.pointerEventsEnabled&&B.pointer;if(Q==="touch")return B.touch;if(Q==="mouse")return B.mouse};function U(te={}){return(te.clipFunc||te.clipWidth||te.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),te}const q="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class H extends n.Container{constructor(Q){super(U(Q)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{U(this.attrs)}),this._checkVisibility()}_validateAdd(Q){const ae=Q.getType()==="Layer",ce=Q.getType()==="FastLayer";ae||ce||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const Q=this.visible()?"":"none";this.content.style.display=Q}setContainer(Q){if(typeof Q===d){let ae;if(Q.charAt(0)==="."){const ce=Q.slice(1);Q=document.getElementsByClassName(ce)[0]}else Q.charAt(0)!=="#"?ae=Q:ae=Q.slice(1),Q=document.getElementById(ae);if(!Q)throw"Can not find container in document with id "+ae}return this._setAttr("container",Q),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),Q.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const Q=this.children,ae=Q.length;for(let ce=0;ce<ae;ce++)Q[ce].clear();return this}clone(Q){return Q||(Q={}),Q.container=typeof document<"u"&&document.createElement("div"),n.Container.prototype.clone.call(this,Q)}destroy(){super.destroy();const Q=this.content;Q&&t.Util._isInDocument(Q)&&this.container().removeChild(Q);const ae=e.stages.indexOf(this);return ae>-1&&e.stages.splice(ae,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const Q=this._pointerPositions[0]||this._changedPointerPositions[0];return Q?{x:Q.x,y:Q.y}:(t.Util.warn(q),null)}_getPointerById(Q){return this._pointerPositions.find(ae=>ae.id===Q)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(Q){Q=Q||{},Q.x=Q.x||0,Q.y=Q.y||0,Q.width=Q.width||this.width(),Q.height=Q.height||this.height();const ae=new a.SceneCanvas({width:Q.width,height:Q.height,pixelRatio:Q.pixelRatio||1}),ce=ae.getContext()._context,me=this.children;return(Q.x||Q.y)&&ce.translate(-1*Q.x,-1*Q.y),me.forEach(function(xe){if(!xe.isVisible())return;const se=xe._toKonvaCanvas(Q);ce.drawImage(se._canvas,Q.x,Q.y,se.getWidth()/se.getPixelRatio(),se.getHeight()/se.getPixelRatio())}),ae}getIntersection(Q){if(!Q)return null;const ae=this.children,ce=ae.length,me=ce-1;for(let xe=me;xe>=0;xe--){const se=ae[xe].getIntersection(Q);if(se)return se}return null}_resizeDOM(){const Q=this.width(),ae=this.height();this.content&&(this.content.style.width=Q+f,this.content.style.height=ae+f),this.bufferCanvas.setSize(Q,ae),this.bufferHitCanvas.setSize(Q,ae),this.children.forEach(ce=>{ce.setSize({width:Q,height:ae}),ce.draw()})}add(Q,...ae){if(arguments.length>1){for(let me=0;me<arguments.length;me++)this.add(arguments[me]);return this}super.add(Q);const ce=this.children.length;return ce>X&&t.Util.warn("The stage has "+ce+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),Q.setSize({width:this.width(),height:this.height()}),Q.draw(),s.Konva.isBrowser&&this.content.appendChild(Q.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(Q){return c.hasPointerCapture(Q,this)}setPointerCapture(Q){c.setPointerCapture(Q,this)}releaseCapture(Q){c.releaseCapture(Q,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&I.forEach(([Q,ae])=>{this.content.addEventListener(Q,ce=>{this[ae](ce)},{passive:!1})})}_pointerenter(Q){this.setPointersPositions(Q);const ae=D(Q.type);ae&&this._fire(ae.pointerenter,{evt:Q,target:this,currentTarget:this})}_pointerover(Q){this.setPointersPositions(Q);const ae=D(Q.type);ae&&this._fire(ae.pointerover,{evt:Q,target:this,currentTarget:this})}_getTargetShape(Q){let ae=this[Q+"targetShape"];return ae&&!ae.getStage()&&(ae=null),ae}_pointerleave(Q){const ae=D(Q.type),ce=W(Q.type);if(!ae)return;this.setPointersPositions(Q);const me=this._getTargetShape(ce),xe=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;me&&xe?(me._fireAndBubble(ae.pointerout,{evt:Q}),me._fireAndBubble(ae.pointerleave,{evt:Q}),this._fire(ae.pointerleave,{evt:Q,target:this,currentTarget:this}),this[ce+"targetShape"]=null):xe&&(this._fire(ae.pointerleave,{evt:Q,target:this,currentTarget:this}),this._fire(ae.pointerout,{evt:Q,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(Q){const ae=D(Q.type),ce=W(Q.type);if(!ae)return;this.setPointersPositions(Q);let me=!1;this._changedPointerPositions.forEach(xe=>{const se=this.getIntersection(xe);if(i.DD.justDragged=!1,s.Konva["_"+ce+"ListenClick"]=!0,!se||!se.isListening()){this[ce+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&se.setPointerCapture(xe.id),this[ce+"ClickStartShape"]=se,se._fireAndBubble(ae.pointerdown,{evt:Q,pointerId:xe.id}),me=!0;const De=Q.type.indexOf("touch")>=0;se.preventDefault()&&Q.cancelable&&De&&Q.preventDefault()}),me||this._fire(ae.pointerdown,{evt:Q,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(Q){const ae=D(Q.type),ce=W(Q.type);if(!ae||(s.Konva.isDragging()&&i.DD.node.preventDefault()&&Q.cancelable&&Q.preventDefault(),this.setPointersPositions(Q),!(!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled)))return;const xe={};let se=!1;const De=this._getTargetShape(ce);this._changedPointerPositions.forEach(He=>{const rt=c.getCapturedShape(He.id)||this.getIntersection(He),_t=He.id,Ke={evt:Q,pointerId:_t},tt=De!==rt;if(tt&&De&&(De._fireAndBubble(ae.pointerout,{...Ke},rt),De._fireAndBubble(ae.pointerleave,{...Ke},rt)),rt){if(xe[rt._id])return;xe[rt._id]=!0}rt&&rt.isListening()?(se=!0,tt&&(rt._fireAndBubble(ae.pointerover,{...Ke},De),rt._fireAndBubble(ae.pointerenter,{...Ke},De),this[ce+"targetShape"]=rt),rt._fireAndBubble(ae.pointermove,{...Ke})):De&&(this._fire(ae.pointerover,{evt:Q,target:this,currentTarget:this,pointerId:_t}),this[ce+"targetShape"]=null)}),se||this._fire(ae.pointermove,{evt:Q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(Q){const ae=D(Q.type),ce=W(Q.type);if(!ae)return;this.setPointersPositions(Q);const me=this[ce+"ClickStartShape"],xe=this[ce+"ClickEndShape"],se={};let De=!1;this._changedPointerPositions.forEach(He=>{const rt=c.getCapturedShape(He.id)||this.getIntersection(He);if(rt){if(rt.releaseCapture(He.id),se[rt._id])return;se[rt._id]=!0}const _t=He.id,Ke={evt:Q,pointerId:_t};let tt=!1;s.Konva["_"+ce+"InDblClickWindow"]?(tt=!0,clearTimeout(this[ce+"DblTimeout"])):i.DD.justDragged||(s.Konva["_"+ce+"InDblClickWindow"]=!0,clearTimeout(this[ce+"DblTimeout"])),this[ce+"DblTimeout"]=setTimeout(function(){s.Konva["_"+ce+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),rt&&rt.isListening()?(De=!0,this[ce+"ClickEndShape"]=rt,rt._fireAndBubble(ae.pointerup,{...Ke}),s.Konva["_"+ce+"ListenClick"]&&me&&me===rt&&(rt._fireAndBubble(ae.pointerclick,{...Ke}),tt&&xe&&xe===rt&&rt._fireAndBubble(ae.pointerdblclick,{...Ke}))):(this[ce+"ClickEndShape"]=null,s.Konva["_"+ce+"ListenClick"]&&this._fire(ae.pointerclick,{evt:Q,target:this,currentTarget:this,pointerId:_t}),tt&&this._fire(ae.pointerdblclick,{evt:Q,target:this,currentTarget:this,pointerId:_t}))}),De||this._fire(ae.pointerup,{evt:Q,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+ce+"ListenClick"]=!1,Q.cancelable&&ce!=="touch"&&ce!=="pointer"&&Q.preventDefault()}_contextmenu(Q){this.setPointersPositions(Q);const ae=this.getIntersection(this.getPointerPosition());ae&&ae.isListening()?ae._fireAndBubble(V,{evt:Q}):this._fire(V,{evt:Q,target:this,currentTarget:this})}_wheel(Q){this.setPointersPositions(Q);const ae=this.getIntersection(this.getPointerPosition());ae&&ae.isListening()?ae._fireAndBubble(z,{evt:Q}):this._fire(z,{evt:Q,target:this,currentTarget:this})}_pointercancel(Q){this.setPointersPositions(Q);const ae=c.getCapturedShape(Q.pointerId)||this.getIntersection(this.getPointerPosition());ae&&ae._fireAndBubble(N,c.createEvent(Q)),c.releaseCapture(Q.pointerId)}_lostpointercapture(Q){c.releaseCapture(Q.pointerId)}setPointersPositions(Q){const ae=this._getContentPosition();let ce=null,me=null;Q=Q||window.event,Q.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(Q.touches,xe=>{this._pointerPositions.push({id:xe.identifier,x:(xe.clientX-ae.left)/ae.scaleX,y:(xe.clientY-ae.top)/ae.scaleY})}),Array.prototype.forEach.call(Q.changedTouches||Q.touches,xe=>{this._changedPointerPositions.push({id:xe.identifier,x:(xe.clientX-ae.left)/ae.scaleX,y:(xe.clientY-ae.top)/ae.scaleY})})):(ce=(Q.clientX-ae.left)/ae.scaleX,me=(Q.clientY-ae.top)/ae.scaleY,this.pointerPos={x:ce,y:me},this._pointerPositions=[{x:ce,y:me,id:t.Util._getFirstPointerId(Q)}],this._changedPointerPositions=[{x:ce,y:me,id:t.Util._getFirstPointerId(Q)}])}_setPointerPosition(Q){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(Q)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const Q=this.content.getBoundingClientRect();return{top:Q.top,left:Q.left,scaleX:Q.width/this.content.clientWidth||1,scaleY:Q.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new a.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new a.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!s.Konva.isBrowser)return;const Q=this.container();if(!Q)throw"Stage has no container. A container is required.";Q.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),Q.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(Q){Q.batchDraw()}),this}}e.Stage=H,H.prototype.nodeType=u,(0,o._registerNode)(H),r.Factory.addGetterSetter(H,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(te=>{te.batchDraw()})})})(Q3)),Q3}var Ix={},Z3={},Aj;function Ai(){return Aj||(Aj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=En(),r=xa(),n=Mn(),s=Ma(),a=In(),i=En(),o=Z$(),c="hasShadow",u="shadowRGBA",d="patternImage",f="linearGradient",h="radialGradient";let g;function p(){return g||(g=r.Util.createCanvasElement().getContext("2d"),g)}e.shapes={};function y(F){const R=this.attrs.fillRule;R?F.fill(R):F.fill()}function v(F){F.stroke()}function C(F){const R=this.attrs.fillRule;R?F.fill(R):F.fill()}function S(F){F.stroke()}function w(){this._clearCache(c)}function T(){this._clearCache(u)}function N(){this._clearCache(d)}function A(){this._clearCache(f)}function P(){this._clearCache(h)}class j extends s.Node{constructor(R){super(R);let L;for(;L=r.Util.getRandomColor(),!(L&&!(L in e.shapes)););this.colorKey=L,e.shapes[L]=this}getContext(){return r.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return r.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(c,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const L=p().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(L&&L.setTransform){const V=new r.Transform;V.translate(this.fillPatternX(),this.fillPatternY()),V.rotate(t.Konva.getAngle(this.fillPatternRotation())),V.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),V.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const Z=V.getMatrix(),Y=typeof DOMMatrix>"u"?{a:Z[0],b:Z[1],c:Z[2],d:Z[3],e:Z[4],f:Z[5]}:new DOMMatrix(Z);L.setTransform(Y)}return L}}_getLinearGradient(){return this._getCache(f,this.__getLinearGradient)}__getLinearGradient(){const R=this.fillLinearGradientColorStops();if(R){const L=p(),V=this.fillLinearGradientStartPoint(),Z=this.fillLinearGradientEndPoint(),Y=L.createLinearGradient(V.x,V.y,Z.x,Z.y);for(let re=0;re<R.length;re+=2)Y.addColorStop(R[re],R[re+1]);return Y}}_getRadialGradient(){return this._getCache(h,this.__getRadialGradient)}__getRadialGradient(){const R=this.fillRadialGradientColorStops();if(R){const L=p(),V=this.fillRadialGradientStartPoint(),Z=this.fillRadialGradientEndPoint(),Y=L.createRadialGradient(V.x,V.y,this.fillRadialGradientStartRadius(),Z.x,Z.y,this.fillRadialGradientEndRadius());for(let re=0;re<R.length;re+=2)Y.addColorStop(R[re],R[re+1]);return Y}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const R=r.Util.colorToRGBA(this.shadowColor());if(R)return"rgba("+R.r+","+R.g+","+R.b+","+R.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const R=this.hitStrokeWidth();return R==="auto"?this.hasStroke():this.strokeEnabled()&&!!R}intersects(R){const L=this.getStage();if(!L)return!1;const V=L.bufferHitCanvas;return V.getContext().clear(),this.drawHit(V,void 0,!0),V.context.getImageData(Math.round(R.x),Math.round(R.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(R){var L;if(!((L=this.attrs.perfectDrawEnabled)!==null&&L!==void 0?L:!0))return!1;const Z=R||this.hasFill(),Y=this.hasStroke(),re=this.getAbsoluteOpacity()!==1;if(Z&&Y&&re)return!0;const ue=this.hasShadow(),z=this.shadowForStrokeEnabled();return!!(Z&&Y&&ue&&z)}setStrokeHitEnabled(R){r.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),R?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const R=this.size();return{x:this._centroid?-R.width/2:0,y:this._centroid?-R.height/2:0,width:R.width,height:R.height}}getClientRect(R={}){let L=!1,V=this.getParent();for(;V;){if(V.isCached()){L=!0;break}V=V.getParent()}const Z=R.skipTransform,Y=R.relativeTo||L&&this.getStage()||void 0,re=this.getSelfRect(),z=!R.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,X=re.width+z,I=re.height+z,B=!R.skipShadow&&this.hasShadow(),W=B?this.shadowOffsetX():0,D=B?this.shadowOffsetY():0,U=X+Math.abs(W),q=I+Math.abs(D),H=B&&this.shadowBlur()||0,te=U+H*2,Q=q+H*2,ae={width:te,height:Q,x:-(z/2+H)+Math.min(W,0)+re.x,y:-(z/2+H)+Math.min(D,0)+re.y};return Z?ae:this._transformedRect(ae,Y)}drawScene(R,L,V){const Z=this.getLayer(),Y=R||Z.getCanvas(),re=Y.getContext(),ue=this._getCanvasCache(),z=this.getSceneFunc(),X=this.hasShadow();let I;const B=L===this;if(!this.isVisible()&&!B)return this;if(ue){re.save();const W=this.getAbsoluteTransform(L).getMatrix();return re.transform(W[0],W[1],W[2],W[3],W[4],W[5]),this._drawCachedSceneCanvas(re),re.restore(),this}if(!z)return this;if(re.save(),this._useBufferCanvas()){I=this.getStage();const W=V||I.bufferCanvas,D=W.getContext();D.clear(),D.save(),D._applyLineJoin(this);const U=this.getAbsoluteTransform(L).getMatrix();D.transform(U[0],U[1],U[2],U[3],U[4],U[5]),z.call(this,D,this),D.restore();const q=W.pixelRatio;X&&re._applyShadow(this),re._applyOpacity(this),re._applyGlobalCompositeOperation(this),re.drawImage(W._canvas,W.x||0,W.y||0,W.width/q,W.height/q)}else{if(re._applyLineJoin(this),!B){const W=this.getAbsoluteTransform(L).getMatrix();re.transform(W[0],W[1],W[2],W[3],W[4],W[5]),re._applyOpacity(this),re._applyGlobalCompositeOperation(this)}X&&re._applyShadow(this),z.call(this,re,this)}return re.restore(),this}drawHit(R,L,V=!1){if(!this.shouldDrawHit(L,V))return this;const Z=this.getLayer(),Y=R||Z.hitCanvas,re=Y&&Y.getContext(),ue=this.hitFunc()||this.sceneFunc(),z=this._getCanvasCache(),X=z&&z.hit;if(this.colorKey||r.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),X){re.save();const B=this.getAbsoluteTransform(L).getMatrix();return re.transform(B[0],B[1],B[2],B[3],B[4],B[5]),this._drawCachedHitCanvas(re),re.restore(),this}if(!ue)return this;if(re.save(),re._applyLineJoin(this),!(this===L)){const B=this.getAbsoluteTransform(L).getMatrix();re.transform(B[0],B[1],B[2],B[3],B[4],B[5])}return ue.call(this,re,this),re.restore(),this}drawHitFromCache(R=0){const L=this._getCanvasCache(),V=this._getCachedSceneCanvas(),Z=L.hit,Y=Z.getContext(),re=Z.getWidth(),ue=Z.getHeight();Y.clear(),Y.drawImage(V._canvas,0,0,re,ue);try{const z=Y.getImageData(0,0,re,ue),X=z.data,I=X.length,B=r.Util._hexToRgb(this.colorKey);for(let W=0;W<I;W+=4)X[W+3]>R?(X[W]=B.r,X[W+1]=B.g,X[W+2]=B.b,X[W+3]=255):X[W+3]=0;Y.putImageData(z,0,0)}catch(z){r.Util.error("Unable to draw hit graph from cached scene canvas. "+z.message)}return this}hasPointerCapture(R){return o.hasPointerCapture(R,this)}setPointerCapture(R){o.setPointerCapture(R,this)}releaseCapture(R){o.releaseCapture(R,this)}}e.Shape=j,j.prototype._fillFunc=y,j.prototype._strokeFunc=v,j.prototype._fillFuncHit=C,j.prototype._strokeFuncHit=S,j.prototype._centroid=!1,j.prototype.nodeType="Shape",(0,i._registerNode)(j),j.prototype.eventListeners={},j.prototype.on.call(j.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",w),j.prototype.on.call(j.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",T),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",N),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",A),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",P),n.Factory.addGetterSetter(j,"stroke",void 0,(0,a.getStringOrGradientValidator)()),n.Factory.addGetterSetter(j,"strokeWidth",2,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(j,"hitStrokeWidth","auto",(0,a.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(j,"strokeHitEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(j,"perfectDrawEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(j,"shadowForStrokeEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(j,"lineJoin"),n.Factory.addGetterSetter(j,"lineCap"),n.Factory.addGetterSetter(j,"sceneFunc"),n.Factory.addGetterSetter(j,"hitFunc"),n.Factory.addGetterSetter(j,"dash"),n.Factory.addGetterSetter(j,"dashOffset",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"shadowColor",void 0,(0,a.getStringValidator)()),n.Factory.addGetterSetter(j,"shadowBlur",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"shadowOpacity",1,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(j,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(j,"shadowOffsetX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"shadowOffsetY",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternImage"),n.Factory.addGetterSetter(j,"fill",void 0,(0,a.getStringOrGradientValidator)()),n.Factory.addGetterSetter(j,"fillPatternX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternY",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(j,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(j,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(j,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(j,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(j,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(j,"fillEnabled",!0),n.Factory.addGetterSetter(j,"strokeEnabled",!0),n.Factory.addGetterSetter(j,"shadowEnabled",!0),n.Factory.addGetterSetter(j,"dashEnabled",!0),n.Factory.addGetterSetter(j,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(j,"fillPriority","color"),n.Factory.addComponentsGetterSetter(j,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(j,"fillPatternOffsetX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternOffsetY",0,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(j,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(j,"fillPatternScaleX",1,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternScaleY",1,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(j,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(j,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(j,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(j,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(j,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(j,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(j,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(j,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(j,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(j,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(j,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(j,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(j,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(j,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(j,"fillPatternRotation",0),n.Factory.addGetterSetter(j,"fillRule",void 0,(0,a.getStringValidator)()),n.Factory.backCompat(j,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Z3)),Z3}var jj;function eU(){if(jj)return Ix;jj=1,Object.defineProperty(Ix,"__esModule",{value:!0}),Ix.Layer=void 0;const e=xa(),t=$_(),r=Ma(),n=Mn(),s=B_(),a=In(),i=Ai(),o=En(),c="#",u="beforeDraw",d="draw",f=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],h=f.length;class g extends t.Container{constructor(y){super(y),this.canvas=new s.SceneCanvas,this.hitCanvas=new s.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(y){return this.getContext().clear(y),this.getHitCanvas().getContext().clear(y),this}setZIndex(y){super.setZIndex(y);const v=this.getStage();return v&&v.content&&(v.content.removeChild(this.getNativeCanvasElement()),y<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[y+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){r.Node.prototype.moveToTop.call(this);const y=this.getStage();return y&&y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!r.Node.prototype.moveUp.call(this))return!1;const v=this.getStage();return!v||!v.content?!1:(v.content.removeChild(this.getNativeCanvasElement()),this.index<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[this.index+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(r.Node.prototype.moveDown.call(this)){const y=this.getStage();if(y){const v=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),v[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(r.Node.prototype.moveToBottom.call(this)){const y=this.getStage();if(y){const v=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),v[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const y=this.getNativeCanvasElement();return r.Node.prototype.remove.call(this),y&&y.parentNode&&e.Util._isInDocument(y)&&y.parentNode.removeChild(y),this}getStage(){return this.parent}setSize({width:y,height:v}){return this.canvas.setSize(y,v),this.hitCanvas.setSize(y,v),this._setSmoothEnabled(),this}_validateAdd(y){const v=y.getType();v!=="Group"&&v!=="Shape"&&e.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(y){return y=y||{},y.width=y.width||this.getWidth(),y.height=y.height||this.getHeight(),y.x=y.x!==void 0?y.x:this.x(),y.y=y.y!==void 0?y.y:this.y(),r.Node.prototype._toKonvaCanvas.call(this,y)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){e.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){e.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,e.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(y){if(!this.isListening()||!this.isVisible())return null;let v=1,C=!1;for(;;){for(let S=0;S<h;S++){const w=f[S],T=this._getIntersection({x:y.x+w.x*v,y:y.y+w.y*v}),N=T.shape;if(N)return N;if(C=!!T.antialiased,!T.antialiased)break}if(C)v+=1;else return null}}_getIntersection(y){const v=this.hitCanvas.pixelRatio,C=this.hitCanvas.context.getImageData(Math.round(y.x*v),Math.round(y.y*v),1,1).data,S=C[3];if(S===255){const w=e.Util._rgbToHex(C[0],C[1],C[2]),T=i.shapes[c+w];return T?{shape:T}:{antialiased:!0}}else if(S>0)return{antialiased:!0};return{}}drawScene(y,v,C){const S=this.getLayer(),w=y||S&&S.getCanvas();return this._fire(u,{node:this}),this.clearBeforeDraw()&&w.getContext().clear(),t.Container.prototype.drawScene.call(this,w,v,C),this._fire(d,{node:this}),this}drawHit(y,v){const C=this.getLayer(),S=y||C&&C.hitCanvas;return C&&C.clearBeforeDraw()&&C.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,S,v),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(y){e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(y)}getHitGraphEnabled(y){return e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const y=this.parent;!!this.hitCanvas._canvas.parentNode?y.content.removeChild(this.hitCanvas._canvas):y.content.appendChild(this.hitCanvas._canvas)}destroy(){return e.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return Ix.Layer=g,g.prototype.nodeType="Layer",(0,o._registerNode)(g),n.Factory.addGetterSetter(g,"imageSmoothingEnabled",!0),n.Factory.addGetterSetter(g,"clearBeforeDraw",!0),n.Factory.addGetterSetter(g,"hitGraphEnabled",!0,(0,a.getBooleanValidator)()),Ix}var Lx={},Pj;function Cne(){if(Pj)return Lx;Pj=1,Object.defineProperty(Lx,"__esModule",{value:!0}),Lx.FastLayer=void 0;const e=xa(),t=eU(),r=En();class n extends t.Layer{constructor(a){super(a),this.listening(!1),e.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}return Lx.FastLayer=n,n.prototype.nodeType="FastLayer",(0,r._registerNode)(n),Lx}var Bx={},Fj;function IT(){if(Fj)return Bx;Fj=1,Object.defineProperty(Bx,"__esModule",{value:!0}),Bx.Group=void 0;const e=xa(),t=$_(),r=En();class n extends t.Container{_validateAdd(a){const i=a.getType();i!=="Group"&&i!=="Shape"&&e.Util.throw("You may only add groups and shapes to groups.")}}return Bx.Group=n,n.prototype.nodeType="Group",(0,r._registerNode)(n),Bx}var $x={},Mj;function LT(){if(Mj)return $x;Mj=1,Object.defineProperty($x,"__esModule",{value:!0}),$x.Animation=void 0;const e=En(),t=xa(),r=(function(){return e.glob.performance&&e.glob.performance.now?function(){return e.glob.performance.now()}:function(){return new Date().getTime()}})();let n=class up{constructor(a,i){this.id=up.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:r(),frameRate:0},this.func=a,this.setLayers(i)}setLayers(a){let i=[];return a&&(i=Array.isArray(a)?a:[a]),this.layers=i,this}getLayers(){return this.layers}addLayer(a){const i=this.layers,o=i.length;for(let c=0;c<o;c++)if(i[c]._id===a._id)return!1;return this.layers.push(a),!0}isRunning(){const i=up.animations,o=i.length;for(let c=0;c<o;c++)if(i[c].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=r(),up._addAnimation(this),this}stop(){return up._removeAnimation(this),this}_updateFrameObject(a){this.frame.timeDiff=a-this.frame.lastTime,this.frame.lastTime=a,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(a){this.animations.push(a),this._handleAnimation()}static _removeAnimation(a){const i=a.id,o=this.animations,c=o.length;for(let u=0;u<c;u++)if(o[u].id===i){this.animations.splice(u,1);break}}static _runFrames(){const a={},i=this.animations;for(let o=0;o<i.length;o++){const c=i[o],u=c.layers,d=c.func;c._updateFrameObject(r());const f=u.length;let h;if(d?h=d.call(c,c.frame)!==!1:h=!0,!!h)for(let g=0;g<f;g++){const p=u[g];p._id!==void 0&&(a[p._id]=p)}}for(const o in a)a.hasOwnProperty(o)&&a[o].batchDraw()}static _animationLoop(){const a=up;a.animations.length?(a._runFrames(),t.Util.requestAnimFrame(a._animationLoop)):a.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return $x.Animation=n,n.animations=[],n.animIdCounter=0,n.animRunning=!1,$x}var e5={},Oj;function Tne(){return Oj||(Oj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=xa(),r=LT(),n=Ma(),s=En(),a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},i=1,o=2,c=3,u=["fill","stroke","shadowColor"];let d=0;class f{constructor(p,y,v,C,S,w,T){this.prop=p,this.propFunc=y,this.begin=C,this._pos=C,this.duration=w,this._change=0,this.prevPos=0,this.yoyo=T,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=S-this.begin,this.pause()}fire(p){const y=this[p];y&&y()}setTime(p){p>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():p<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=p,this.update())}getTime(){return this._time}setPosition(p){this.prevPos=this._pos,this.propFunc(p),this._pos=p}getPosition(p){return p===void 0&&(p=this._time),this.func(p,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=c,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(p){this.pause(),this._time=p,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const p=this.getTimer()-this._startTime;this.state===o?this.setTime(p):this.state===c&&this.setTime(this.duration-p)}pause(){this.state=i,this.fire("onPause")}getTimer(){return new Date().getTime()}}class h{constructor(p){const y=this,v=p.node,C=v._id,S=p.easing||e.Easings.Linear,w=!!p.yoyo;let T,N;typeof p.duration>"u"?T=.3:p.duration===0?T=.001:T=p.duration,this.node=v,this._id=d++;const A=v.getLayer()||(v instanceof s.Konva.Stage?v.getLayers():null);A||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new r.Animation(function(){y.tween.onEnterFrame()},A),this.tween=new f(N,function(P){y._tweenFunc(P)},S,0,1,T*1e3,w),this._addListeners(),h.attrs[C]||(h.attrs[C]={}),h.attrs[C][this._id]||(h.attrs[C][this._id]={}),h.tweens[C]||(h.tweens[C]={});for(N in p)a[N]===void 0&&this._addAttr(N,p[N]);this.reset(),this.onFinish=p.onFinish,this.onReset=p.onReset,this.onUpdate=p.onUpdate}_addAttr(p,y){const v=this.node,C=v._id;let S,w,T,N,A;const P=h.tweens[C][p];P&&delete h.attrs[C][P][p];let j=v.getAttr(p);if(t.Util._isArray(y))if(S=[],w=Math.max(y.length,j.length),p==="points"&&y.length!==j.length&&(y.length>j.length?(N=j,j=t.Util._prepareArrayForTween(j,y,v.closed())):(T=y,y=t.Util._prepareArrayForTween(y,j,v.closed()))),p.indexOf("fill")===0)for(let F=0;F<w;F++)if(F%2===0)S.push(y[F]-j[F]);else{const R=t.Util.colorToRGBA(j[F]);A=t.Util.colorToRGBA(y[F]),j[F]=R,S.push({r:A.r-R.r,g:A.g-R.g,b:A.b-R.b,a:A.a-R.a})}else for(let F=0;F<w;F++)S.push(y[F]-j[F]);else u.indexOf(p)!==-1?(j=t.Util.colorToRGBA(j),A=t.Util.colorToRGBA(y),S={r:A.r-j.r,g:A.g-j.g,b:A.b-j.b,a:A.a-j.a}):S=y-j;h.attrs[C][this._id][p]={start:j,diff:S,end:y,trueEnd:T,trueStart:N},h.tweens[C][p]=this._id}_tweenFunc(p){const y=this.node,v=h.attrs[y._id][this._id];let C,S,w,T,N,A,P,j;for(C in v){if(S=v[C],w=S.start,T=S.diff,j=S.end,t.Util._isArray(w))if(N=[],P=Math.max(w.length,j.length),C.indexOf("fill")===0)for(A=0;A<P;A++)A%2===0?N.push((w[A]||0)+T[A]*p):N.push("rgba("+Math.round(w[A].r+T[A].r*p)+","+Math.round(w[A].g+T[A].g*p)+","+Math.round(w[A].b+T[A].b*p)+","+(w[A].a+T[A].a*p)+")");else for(A=0;A<P;A++)N.push((w[A]||0)+T[A]*p);else u.indexOf(C)!==-1?N="rgba("+Math.round(w.r+T.r*p)+","+Math.round(w.g+T.g*p)+","+Math.round(w.b+T.b*p)+","+(w.a+T.a*p)+")":N=w+T*p;y.setAttr(C,N)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const p=this.node,y=h.attrs[p._id][this._id];y.points&&y.points.trueEnd&&p.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const p=this.node,y=h.attrs[p._id][this._id];y.points&&y.points.trueStart&&p.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(p){return this.tween.seek(p*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const p=this.node._id,y=this._id,v=h.tweens[p];this.pause(),this.anim&&this.anim.stop();for(const C in v)delete h.tweens[p][C];delete h.attrs[p][y],h.tweens[p]&&(Object.keys(h.tweens[p]).length===0&&delete h.tweens[p],Object.keys(h.attrs[p]).length===0&&delete h.attrs[p])}}e.Tween=h,h.attrs={},h.tweens={},n.Node.prototype.to=function(g){const p=g.onFinish;g.node=this,g.onFinish=function(){this.destroy(),p&&p()},new h(g).play()},e.Easings={BackEaseIn(g,p,y,v){return y*(g/=v)*g*((1.70158+1)*g-1.70158)+p},BackEaseOut(g,p,y,v){return y*((g=g/v-1)*g*((1.70158+1)*g+1.70158)+1)+p},BackEaseInOut(g,p,y,v){let C=1.70158;return(g/=v/2)<1?y/2*(g*g*(((C*=1.525)+1)*g-C))+p:y/2*((g-=2)*g*(((C*=1.525)+1)*g+C)+2)+p},ElasticEaseIn(g,p,y,v,C,S){let w=0;return g===0?p:(g/=v)===1?p+y:(S||(S=v*.3),!C||C<Math.abs(y)?(C=y,w=S/4):w=S/(2*Math.PI)*Math.asin(y/C),-(C*Math.pow(2,10*(g-=1))*Math.sin((g*v-w)*(2*Math.PI)/S))+p)},ElasticEaseOut(g,p,y,v,C,S){let w=0;return g===0?p:(g/=v)===1?p+y:(S||(S=v*.3),!C||C<Math.abs(y)?(C=y,w=S/4):w=S/(2*Math.PI)*Math.asin(y/C),C*Math.pow(2,-10*g)*Math.sin((g*v-w)*(2*Math.PI)/S)+y+p)},ElasticEaseInOut(g,p,y,v,C,S){let w=0;return g===0?p:(g/=v/2)===2?p+y:(S||(S=v*(.3*1.5)),!C||C<Math.abs(y)?(C=y,w=S/4):w=S/(2*Math.PI)*Math.asin(y/C),g<1?-.5*(C*Math.pow(2,10*(g-=1))*Math.sin((g*v-w)*(2*Math.PI)/S))+p:C*Math.pow(2,-10*(g-=1))*Math.sin((g*v-w)*(2*Math.PI)/S)*.5+y+p)},BounceEaseOut(g,p,y,v){return(g/=v)<1/2.75?y*(7.5625*g*g)+p:g<2/2.75?y*(7.5625*(g-=1.5/2.75)*g+.75)+p:g<2.5/2.75?y*(7.5625*(g-=2.25/2.75)*g+.9375)+p:y*(7.5625*(g-=2.625/2.75)*g+.984375)+p},BounceEaseIn(g,p,y,v){return y-e.Easings.BounceEaseOut(v-g,0,y,v)+p},BounceEaseInOut(g,p,y,v){return g<v/2?e.Easings.BounceEaseIn(g*2,0,y,v)*.5+p:e.Easings.BounceEaseOut(g*2-v,0,y,v)*.5+y*.5+p},EaseIn(g,p,y,v){return y*(g/=v)*g+p},EaseOut(g,p,y,v){return-y*(g/=v)*(g-2)+p},EaseInOut(g,p,y,v){return(g/=v/2)<1?y/2*g*g+p:-y/2*(--g*(g-2)-1)+p},StrongEaseIn(g,p,y,v){return y*(g/=v)*g*g*g*g+p},StrongEaseOut(g,p,y,v){return y*((g=g/v-1)*g*g*g*g+1)+p},StrongEaseInOut(g,p,y,v){return(g/=v/2)<1?y/2*g*g*g*g*g+p:y/2*((g-=2)*g*g*g*g+2)+p},Linear(g,p,y,v){return y*g/v+p}}})(e5)),e5}var Dj;function t8(){return Dj||(Dj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=En(),r=xa(),n=Ma(),s=$_(),a=kne(),i=eU(),o=Cne(),c=IT(),u=RT(),d=Ai(),f=LT(),h=Tne(),g=Q$(),p=B_();e.Konva=r.Util._assign(t.Konva,{Util:r.Util,Transform:r.Transform,Node:n.Node,Container:s.Container,Stage:a.Stage,stages:a.stages,Layer:i.Layer,FastLayer:o.FastLayer,Group:c.Group,DD:u.DD,Shape:d.Shape,shapes:d.shapes,Animation:f.Animation,Tween:h.Tween,Easings:h.Easings,Context:g.Context,Canvas:p.Canvas}),e.default=e.Konva})(q3)),q3}var Ux={},Rj;function Ene(){if(Rj)return Ux;Rj=1,Object.defineProperty(Ux,"__esModule",{value:!0}),Ux.Arc=void 0;const e=Mn(),t=Ai(),r=En(),n=In(),s=En();class a extends t.Shape{_sceneFunc(o){const c=r.Konva.getAngle(this.angle()),u=this.clockwise();o.beginPath(),o.arc(0,0,this.outerRadius(),0,c,u),o.arc(0,0,this.innerRadius(),c,0,!u),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}getSelfRect(){const o=this.innerRadius(),c=this.outerRadius(),u=this.clockwise(),d=r.Konva.getAngle(u?360-this.angle():this.angle()),f=Math.cos(Math.min(d,Math.PI)),h=1,g=Math.sin(Math.min(Math.max(Math.PI,d),3*Math.PI/2)),p=Math.sin(Math.min(d,Math.PI/2)),y=f*(f>0?o:c),v=h*c,C=g*(g>0?o:c),S=p*(p>0?c:o);return{x:y,y:u?-1*S:C,width:v-y,height:S-C}}}return Ux.Arc=a,a.prototype._centroid=!0,a.prototype.className="Arc",a.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"angle",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clockwise",!1,(0,n.getBooleanValidator)()),Ux}var zx={},Wx={},Ij;function tU(){if(Ij)return Wx;Ij=1,Object.defineProperty(Wx,"__esModule",{value:!0}),Wx.Line=void 0;const e=Mn(),t=En(),r=Ai(),n=In();function s(o,c,u,d,f,h,g){const p=Math.sqrt(Math.pow(u-o,2)+Math.pow(d-c,2)),y=Math.sqrt(Math.pow(f-u,2)+Math.pow(h-d,2)),v=g*p/(p+y),C=g*y/(p+y),S=u-v*(f-o),w=d-v*(h-c),T=u+C*(f-o),N=d+C*(h-c);return[S,w,T,N]}function a(o,c){const u=o.length,d=[];for(let f=2;f<u-2;f+=2){const h=s(o[f-2],o[f-1],o[f],o[f+1],o[f+2],o[f+3],c);isNaN(h[0])||(d.push(h[0]),d.push(h[1]),d.push(o[f]),d.push(o[f+1]),d.push(h[2]),d.push(h[3]))}return d}class i extends r.Shape{constructor(c){super(c),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(c){const u=this.points(),d=u.length,f=this.tension(),h=this.closed(),g=this.bezier();if(!d)return;let p=0;if(c.beginPath(),c.moveTo(u[0],u[1]),f!==0&&d>4){const y=this.getTensionPoints(),v=y.length;for(p=h?0:4,h||c.quadraticCurveTo(y[0],y[1],y[2],y[3]);p<v-2;)c.bezierCurveTo(y[p++],y[p++],y[p++],y[p++],y[p++],y[p++]);h||c.quadraticCurveTo(y[v-2],y[v-1],u[d-2],u[d-1])}else if(g)for(p=2;p<d;)c.bezierCurveTo(u[p++],u[p++],u[p++],u[p++],u[p++],u[p++]);else for(p=2;p<d;p+=2)c.lineTo(u[p],u[p+1]);h?(c.closePath(),c.fillStrokeShape(this)):c.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():a(this.points(),this.tension())}_getTensionPointsClosed(){const c=this.points(),u=c.length,d=this.tension(),f=s(c[u-2],c[u-1],c[0],c[1],c[2],c[3],d),h=s(c[u-4],c[u-3],c[u-2],c[u-1],c[0],c[1],d),g=a(c,d);return[f[2],f[3]].concat(g).concat([h[0],h[1],c[u-2],c[u-1],h[2],h[3],f[0],f[1],c[0],c[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let c=this.points();if(c.length<4)return{x:c[0]||0,y:c[1]||0,width:0,height:0};this.tension()!==0?c=[c[0],c[1],...this._getTensionPoints(),c[c.length-2],c[c.length-1]]:c=this.points();let u=c[0],d=c[0],f=c[1],h=c[1],g,p;for(let y=0;y<c.length/2;y++)g=c[y*2],p=c[y*2+1],u=Math.min(u,g),d=Math.max(d,g),f=Math.min(f,p),h=Math.max(h,p);return{x:u,y:f,width:d-u,height:h-f}}}return Wx.Line=i,i.prototype.className="Line",i.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(i),e.Factory.addGetterSetter(i,"closed",!1),e.Factory.addGetterSetter(i,"bezier",!1),e.Factory.addGetterSetter(i,"tension",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"points",[],(0,n.getNumberArrayValidator)()),Wx}var Hx={},t5={},Lj;function Nne(){return Lj||(Lj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(i,o,c)=>{let u,d;const h=c/2;u=0;for(let g=0;g<20;g++)d=h*e.tValues[20][g]+h,u+=e.cValues[20][g]*n(i,o,d);return h*u};e.getCubicArcLength=t;const r=(i,o,c)=>{c===void 0&&(c=1);const u=i[0]-2*i[1]+i[2],d=o[0]-2*o[1]+o[2],f=2*i[1]-2*i[0],h=2*o[1]-2*o[0],g=4*(u*u+d*d),p=4*(u*f+d*h),y=f*f+h*h;if(g===0)return c*Math.sqrt(Math.pow(i[2]-i[0],2)+Math.pow(o[2]-o[0],2));const v=p/(2*g),C=y/g,S=c+v,w=C-v*v,T=S*S+w>0?Math.sqrt(S*S+w):0,N=v*v+w>0?Math.sqrt(v*v+w):0,A=v+Math.sqrt(v*v+w)!==0?w*Math.log(Math.abs((S+T)/(v+N))):0;return Math.sqrt(g)/2*(S*T-v*N+A)};e.getQuadraticArcLength=r;function n(i,o,c){const u=s(1,c,i),d=s(1,c,o),f=u*u+d*d;return Math.sqrt(f)}const s=(i,o,c)=>{const u=c.length-1;let d,f;if(u===0)return 0;if(i===0){f=0;for(let h=0;h<=u;h++)f+=e.binomialCoefficients[u][h]*Math.pow(1-o,u-h)*Math.pow(o,h)*c[h];return f}else{d=new Array(u);for(let h=0;h<u;h++)d[h]=u*(c[h+1]-c[h]);return s(i-1,o,d)}},a=(i,o,c)=>{let u=1,d=i/o,f=(i-c(d))/o,h=0;for(;u>.001;){const g=c(d+f),p=Math.abs(i-g)/o;if(p<u)u=p,d+=f;else{const y=c(d-f),v=Math.abs(i-y)/o;v<u?(u=v,d-=f):f/=2}if(h++,h>500)break}return d};e.t2length=a})(t5)),t5}var Bj;function BT(){if(Bj)return Hx;Bj=1,Object.defineProperty(Hx,"__esModule",{value:!0}),Hx.Path=void 0;const e=Mn(),t=En(),r=Ai(),n=Nne();class s extends r.Shape{constructor(i){super(i),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=s.parsePathData(this.data()),this.pathLength=s.getPathLength(this.dataArray)}_sceneFunc(i){const o=this.dataArray;i.beginPath();let c=!1;for(let u=0;u<o.length;u++){const d=o[u].command,f=o[u].points;switch(d){case"L":i.lineTo(f[0],f[1]);break;case"M":i.moveTo(f[0],f[1]);break;case"C":i.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":i.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":const h=f[0],g=f[1],p=f[2],y=f[3],v=f[4],C=f[5],S=f[6],w=f[7],T=p>y?p:y,N=p>y?1:p/y,A=p>y?y/p:1;i.translate(h,g),i.rotate(S),i.scale(N,A),i.arc(0,0,T,v,v+C,1-w),i.scale(1/N,1/A),i.rotate(-S),i.translate(-h,-g);break;case"z":c=!0,i.closePath();break}}!c&&!this.hasFill()?i.strokeShape(this):i.fillStrokeShape(this)}getSelfRect(){let i=[];this.dataArray.forEach(function(g){if(g.command==="A"){const p=g.points[4],y=g.points[5],v=g.points[4]+y;let C=Math.PI/180;if(Math.abs(p-v)<C&&(C=Math.abs(p-v)),y<0)for(let S=p-C;S>v;S-=C){const w=s.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],S,0);i.push(w.x,w.y)}else for(let S=p+C;S<v;S+=C){const w=s.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],S,0);i.push(w.x,w.y)}}else if(g.command==="C")for(let p=0;p<=1;p+=.01){const y=s.getPointOnCubicBezier(p,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);i.push(y.x,y.y)}else i=i.concat(g.points)});let o=i[0],c=i[0],u=i[1],d=i[1],f,h;for(let g=0;g<i.length/2;g++)f=i[g*2],h=i[g*2+1],isNaN(f)||(o=Math.min(o,f),c=Math.max(c,f)),isNaN(h)||(u=Math.min(u,h),d=Math.max(d,h));return{x:o,y:u,width:c-o,height:d-u}}getLength(){return this.pathLength}getPointAtLength(i){return s.getPointAtLengthOfDataArray(i,this.dataArray)}static getLineLength(i,o,c,u){return Math.sqrt((c-i)*(c-i)+(u-o)*(u-o))}static getPathLength(i){let o=0;for(let c=0;c<i.length;++c)o+=i[c].pathLength;return o}static getPointAtLengthOfDataArray(i,o){let c,u=0,d=o.length;if(!d)return null;for(;u<d&&i>o[u].pathLength;)i-=o[u].pathLength,++u;if(u===d)return c=o[u-1].points.slice(-2),{x:c[0],y:c[1]};if(i<.01)return o[u].command==="M"?(c=o[u].points.slice(0,2),{x:c[0],y:c[1]}):{x:o[u].start.x,y:o[u].start.y};const f=o[u],h=f.points;switch(f.command){case"L":return s.getPointOnLine(i,f.start.x,f.start.y,h[0],h[1]);case"C":return s.getPointOnCubicBezier((0,n.t2length)(i,s.getPathLength(o),T=>(0,n.getCubicArcLength)([f.start.x,h[0],h[2],h[4]],[f.start.y,h[1],h[3],h[5]],T)),f.start.x,f.start.y,h[0],h[1],h[2],h[3],h[4],h[5]);case"Q":return s.getPointOnQuadraticBezier((0,n.t2length)(i,s.getPathLength(o),T=>(0,n.getQuadraticArcLength)([f.start.x,h[0],h[2]],[f.start.y,h[1],h[3]],T)),f.start.x,f.start.y,h[0],h[1],h[2],h[3]);case"A":const g=h[0],p=h[1],y=h[2],v=h[3],C=h[5],S=h[6];let w=h[4];return w+=C*i/f.pathLength,s.getPointOnEllipticalArc(g,p,y,v,w,S)}return null}static getPointOnLine(i,o,c,u,d,f,h){f=f??o,h=h??c;const g=this.getLineLength(o,c,u,d);if(g<1e-10)return{x:o,y:c};if(u===o)return{x:f,y:h+(d>c?i:-i)};const p=(d-c)/(u-o),y=Math.sqrt(i*i/(1+p*p))*(u<o?-1:1),v=p*y;if(Math.abs(h-c-p*(f-o))<1e-10)return{x:f+y,y:h+v};const C=((f-o)*(u-o)+(h-c)*(d-c))/(g*g),S=o+C*(u-o),w=c+C*(d-c),T=this.getLineLength(f,h,S,w),N=Math.sqrt(i*i-T*T),A=Math.sqrt(N*N/(1+p*p))*(u<o?-1:1),P=p*A;return{x:S+A,y:w+P}}static getPointOnCubicBezier(i,o,c,u,d,f,h,g,p){function y(N){return N*N*N}function v(N){return 3*N*N*(1-N)}function C(N){return 3*N*(1-N)*(1-N)}function S(N){return(1-N)*(1-N)*(1-N)}const w=g*y(i)+f*v(i)+u*C(i)+o*S(i),T=p*y(i)+h*v(i)+d*C(i)+c*S(i);return{x:w,y:T}}static getPointOnQuadraticBezier(i,o,c,u,d,f,h){function g(S){return S*S}function p(S){return 2*S*(1-S)}function y(S){return(1-S)*(1-S)}const v=f*g(i)+u*p(i)+o*y(i),C=h*g(i)+d*p(i)+c*y(i);return{x:v,y:C}}static getPointOnEllipticalArc(i,o,c,u,d,f){const h=Math.cos(f),g=Math.sin(f),p={x:c*Math.cos(d),y:u*Math.sin(d)};return{x:i+(p.x*h-p.y*g),y:o+(p.x*g+p.y*h)}}static parsePathData(i){if(!i)return[];let o=i;const c=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];o=o.replace(new RegExp(" ","g"),",");for(let v=0;v<c.length;v++)o=o.replace(new RegExp(c[v],"g"),"|"+c[v]);const u=o.split("|"),d=[],f=[];let h=0,g=0;const p=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let y;for(let v=1;v<u.length;v++){let C=u[v],S=C.charAt(0);for(C=C.slice(1),f.length=0;y=p.exec(C);)f.push(y[0]);const w=[];for(let T=0,N=f.length;T<N;T++){if(f[T]==="00"){w.push(0,0);continue}const A=parseFloat(f[T]);isNaN(A)?w.push(0):w.push(A)}for(;w.length>0&&!isNaN(w[0]);){let T="",N=[];const A=h,P=g;let j,F,R,L,V,Z,Y,re,ue,z;switch(S){case"l":h+=w.shift(),g+=w.shift(),T="L",N.push(h,g);break;case"L":h=w.shift(),g=w.shift(),N.push(h,g);break;case"m":const X=w.shift(),I=w.shift();if(h+=X,g+=I,T="M",d.length>2&&d[d.length-1].command==="z"){for(let B=d.length-2;B>=0;B--)if(d[B].command==="M"){h=d[B].points[0]+X,g=d[B].points[1]+I;break}}N.push(h,g),S="l";break;case"M":h=w.shift(),g=w.shift(),T="M",N.push(h,g),S="L";break;case"h":h+=w.shift(),T="L",N.push(h,g);break;case"H":h=w.shift(),T="L",N.push(h,g);break;case"v":g+=w.shift(),T="L",N.push(h,g);break;case"V":g=w.shift(),T="L",N.push(h,g);break;case"C":N.push(w.shift(),w.shift(),w.shift(),w.shift()),h=w.shift(),g=w.shift(),N.push(h,g);break;case"c":N.push(h+w.shift(),g+w.shift(),h+w.shift(),g+w.shift()),h+=w.shift(),g+=w.shift(),T="C",N.push(h,g);break;case"S":F=h,R=g,j=d[d.length-1],j.command==="C"&&(F=h+(h-j.points[2]),R=g+(g-j.points[3])),N.push(F,R,w.shift(),w.shift()),h=w.shift(),g=w.shift(),T="C",N.push(h,g);break;case"s":F=h,R=g,j=d[d.length-1],j.command==="C"&&(F=h+(h-j.points[2]),R=g+(g-j.points[3])),N.push(F,R,h+w.shift(),g+w.shift()),h+=w.shift(),g+=w.shift(),T="C",N.push(h,g);break;case"Q":N.push(w.shift(),w.shift()),h=w.shift(),g=w.shift(),N.push(h,g);break;case"q":N.push(h+w.shift(),g+w.shift()),h+=w.shift(),g+=w.shift(),T="Q",N.push(h,g);break;case"T":F=h,R=g,j=d[d.length-1],j.command==="Q"&&(F=h+(h-j.points[0]),R=g+(g-j.points[1])),h=w.shift(),g=w.shift(),T="Q",N.push(F,R,h,g);break;case"t":F=h,R=g,j=d[d.length-1],j.command==="Q"&&(F=h+(h-j.points[0]),R=g+(g-j.points[1])),h+=w.shift(),g+=w.shift(),T="Q",N.push(F,R,h,g);break;case"A":L=w.shift(),V=w.shift(),Z=w.shift(),Y=w.shift(),re=w.shift(),ue=h,z=g,h=w.shift(),g=w.shift(),T="A",N=this.convertEndpointToCenterParameterization(ue,z,h,g,Y,re,L,V,Z);break;case"a":L=w.shift(),V=w.shift(),Z=w.shift(),Y=w.shift(),re=w.shift(),ue=h,z=g,h+=w.shift(),g+=w.shift(),T="A",N=this.convertEndpointToCenterParameterization(ue,z,h,g,Y,re,L,V,Z);break}d.push({command:T||S,points:N,start:{x:A,y:P},pathLength:this.calcLength(A,P,T||S,N)})}(S==="z"||S==="Z")&&d.push({command:"z",points:[],start:void 0,pathLength:0})}return d}static calcLength(i,o,c,u){let d,f,h,g;const p=s;switch(c){case"L":return p.getLineLength(i,o,u[0],u[1]);case"C":return(0,n.getCubicArcLength)([i,u[0],u[2],u[4]],[o,u[1],u[3],u[5]],1);case"Q":return(0,n.getQuadraticArcLength)([i,u[0],u[2]],[o,u[1],u[3]],1);case"A":d=0;const y=u[4],v=u[5],C=u[4]+v;let S=Math.PI/180;if(Math.abs(y-C)<S&&(S=Math.abs(y-C)),f=p.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],y,0),v<0)for(g=y-S;g>C;g-=S)h=p.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],g,0),d+=p.getLineLength(f.x,f.y,h.x,h.y),f=h;else for(g=y+S;g<C;g+=S)h=p.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],g,0),d+=p.getLineLength(f.x,f.y,h.x,h.y),f=h;return h=p.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],C,0),d+=p.getLineLength(f.x,f.y,h.x,h.y),d}return 0}static convertEndpointToCenterParameterization(i,o,c,u,d,f,h,g,p){const y=p*(Math.PI/180),v=Math.cos(y)*(i-c)/2+Math.sin(y)*(o-u)/2,C=-1*Math.sin(y)*(i-c)/2+Math.cos(y)*(o-u)/2,S=v*v/(h*h)+C*C/(g*g);S>1&&(h*=Math.sqrt(S),g*=Math.sqrt(S));let w=Math.sqrt((h*h*(g*g)-h*h*(C*C)-g*g*(v*v))/(h*h*(C*C)+g*g*(v*v)));d===f&&(w*=-1),isNaN(w)&&(w=0);const T=w*h*C/g,N=w*-g*v/h,A=(i+c)/2+Math.cos(y)*T-Math.sin(y)*N,P=(o+u)/2+Math.sin(y)*T+Math.cos(y)*N,j=function(re){return Math.sqrt(re[0]*re[0]+re[1]*re[1])},F=function(re,ue){return(re[0]*ue[0]+re[1]*ue[1])/(j(re)*j(ue))},R=function(re,ue){return(re[0]*ue[1]<re[1]*ue[0]?-1:1)*Math.acos(F(re,ue))},L=R([1,0],[(v-T)/h,(C-N)/g]),V=[(v-T)/h,(C-N)/g],Z=[(-1*v-T)/h,(-1*C-N)/g];let Y=R(V,Z);return F(V,Z)<=-1&&(Y=Math.PI),F(V,Z)>=1&&(Y=0),f===0&&Y>0&&(Y=Y-2*Math.PI),f===1&&Y<0&&(Y=Y+2*Math.PI),[A,P,h,g,L,Y,y,f]}}return Hx.Path=s,s.prototype.className="Path",s.prototype._attrsAffectingSize=["data"],(0,t._registerNode)(s),e.Factory.addGetterSetter(s,"data"),Hx}var $j;function Ane(){if($j)return zx;$j=1,Object.defineProperty(zx,"__esModule",{value:!0}),zx.Arrow=void 0;const e=Mn(),t=tU(),r=In(),n=En(),s=BT();class a extends t.Line{_sceneFunc(o){super._sceneFunc(o);const c=Math.PI*2,u=this.points();let d=u;const f=this.tension()!==0&&u.length>4;f&&(d=this.getTensionPoints());const h=this.pointerLength(),g=u.length;let p,y;if(f){const S=[d[d.length-4],d[d.length-3],d[d.length-2],d[d.length-1],u[g-2],u[g-1]],w=s.Path.calcLength(d[d.length-4],d[d.length-3],"C",S),T=s.Path.getPointOnQuadraticBezier(Math.min(1,1-h/w),S[0],S[1],S[2],S[3],S[4],S[5]);p=u[g-2]-T.x,y=u[g-1]-T.y}else p=u[g-2]-u[g-4],y=u[g-1]-u[g-3];const v=(Math.atan2(y,p)+c)%c,C=this.pointerWidth();this.pointerAtEnding()&&(o.save(),o.beginPath(),o.translate(u[g-2],u[g-1]),o.rotate(v),o.moveTo(0,0),o.lineTo(-h,C/2),o.lineTo(-h,-C/2),o.closePath(),o.restore(),this.__fillStroke(o)),this.pointerAtBeginning()&&(o.save(),o.beginPath(),o.translate(u[0],u[1]),f?(p=(d[0]+d[2])/2-u[0],y=(d[1]+d[3])/2-u[1]):(p=u[2]-u[0],y=u[3]-u[1]),o.rotate((Math.atan2(-y,-p)+c)%c),o.moveTo(0,0),o.lineTo(-h,C/2),o.lineTo(-h,-C/2),o.closePath(),o.restore(),this.__fillStroke(o))}__fillStroke(o){const c=this.dashEnabled();c&&(this.attrs.dashEnabled=!1,o.setLineDash([])),o.fillStrokeShape(this),c&&(this.attrs.dashEnabled=!0)}getSelfRect(){const o=super.getSelfRect(),c=this.pointerWidth()/2;return{x:o.x,y:o.y-c,width:o.width,height:o.height+c*2}}}return zx.Arrow=a,a.prototype.className="Arrow",(0,n._registerNode)(a),e.Factory.addGetterSetter(a,"pointerLength",10,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"pointerWidth",10,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"pointerAtBeginning",!1),e.Factory.addGetterSetter(a,"pointerAtEnding",!0),zx}var Gx={},Uj;function jne(){if(Uj)return Gx;Uj=1,Object.defineProperty(Gx,"__esModule",{value:!0}),Gx.Circle=void 0;const e=Mn(),t=Ai(),r=In(),n=En();class s extends t.Shape{_sceneFunc(i){i.beginPath(),i.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(i){this.radius()!==i/2&&this.radius(i/2)}setHeight(i){this.radius()!==i/2&&this.radius(i/2)}}return Gx.Circle=s,s.prototype._centroid=!0,s.prototype.className="Circle",s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),Gx}var Vx={},zj;function Pne(){if(zj)return Vx;zj=1,Object.defineProperty(Vx,"__esModule",{value:!0}),Vx.Ellipse=void 0;const e=Mn(),t=Ai(),r=In(),n=En();class s extends t.Shape{_sceneFunc(i){const o=this.radiusX(),c=this.radiusY();i.beginPath(),i.save(),o!==c&&i.scale(1,c/o),i.arc(0,0,o,0,Math.PI*2,!1),i.restore(),i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(i){this.radiusX(i/2)}setHeight(i){this.radiusY(i/2)}}return Vx.Ellipse=s,s.prototype.className="Ellipse",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,n._registerNode)(s),e.Factory.addComponentsGetterSetter(s,"radius",["x","y"]),e.Factory.addGetterSetter(s,"radiusX",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"radiusY",0,(0,r.getNumberValidator)()),Vx}var qx={},Wj;function Fne(){if(Wj)return qx;Wj=1,Object.defineProperty(qx,"__esModule",{value:!0}),qx.Image=void 0;const e=xa(),t=Mn(),r=Ai(),n=En(),s=In();class a extends r.Shape{constructor(o){super(o),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",c=>{this._removeImageLoad(c.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const o=this.image();o&&o.complete||o&&o.readyState===4||o&&o.addEventListener&&o.addEventListener("load",this._loadListener)}_removeImageLoad(o){o&&o.removeEventListener&&o.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const o=!!this.cornerRadius(),c=this.hasShadow();return o&&c?!0:super._useBufferCanvas(!0)}_sceneFunc(o){const c=this.getWidth(),u=this.getHeight(),d=this.cornerRadius(),f=this.attrs.image;let h;if(f){const g=this.attrs.cropWidth,p=this.attrs.cropHeight;g&&p?h=[f,this.cropX(),this.cropY(),g,p,0,0,c,u]:h=[f,0,0,c,u]}(this.hasFill()||this.hasStroke()||d)&&(o.beginPath(),d?e.Util.drawRoundedRectPath(o,c,u,d):o.rect(0,0,c,u),o.closePath(),o.fillStrokeShape(this)),f&&(d&&o.clip(),o.drawImage.apply(o,h))}_hitFunc(o){const c=this.width(),u=this.height(),d=this.cornerRadius();o.beginPath(),d?e.Util.drawRoundedRectPath(o,c,u,d):o.rect(0,0,c,u),o.closePath(),o.fillStrokeShape(this)}getWidth(){var o,c;return(o=this.attrs.width)!==null&&o!==void 0?o:(c=this.image())===null||c===void 0?void 0:c.width}getHeight(){var o,c;return(o=this.attrs.height)!==null&&o!==void 0?o:(c=this.image())===null||c===void 0?void 0:c.height}static fromURL(o,c,u=null){const d=e.Util.createImageElement();d.onload=function(){const f=new a({image:d});c(f)},d.onerror=u,d.crossOrigin="Anonymous",d.src=o}}return qx.Image=a,a.prototype.className="Image",(0,n._registerNode)(a),t.Factory.addGetterSetter(a,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(a,"image"),t.Factory.addComponentsGetterSetter(a,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(a,"cropX",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropY",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropWidth",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropHeight",0,(0,s.getNumberValidator)()),qx}var Gh={},Hj;function Mne(){if(Hj)return Gh;Hj=1,Object.defineProperty(Gh,"__esModule",{value:!0}),Gh.Tag=Gh.Label=void 0;const e=Mn(),t=Ai(),r=IT(),n=In(),s=En(),a=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],i="Change.konva",o="none",c="up",u="right",d="down",f="left",h=a.length;class g extends r.Group{constructor(v){super(v),this.on("add.konva",function(C){this._addListeners(C.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(v){let C=this,S;const w=function(){C._sync()};for(S=0;S<h;S++)v.on(a[S]+i,w)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let v=this.getText(),C=this.getTag(),S,w,T,N,A,P,j;if(v&&C){switch(S=v.width(),w=v.height(),T=C.pointerDirection(),N=C.pointerWidth(),j=C.pointerHeight(),A=0,P=0,T){case c:A=S/2,P=-1*j;break;case u:A=S+N,P=w/2;break;case d:A=S/2,P=w+j;break;case f:A=-1*N,P=w/2;break}C.setAttrs({x:-1*A,y:-1*P,width:S,height:w}),v.setAttrs({x:-1*A,y:-1*P})}}}Gh.Label=g,g.prototype.className="Label",(0,s._registerNode)(g);class p extends t.Shape{_sceneFunc(v){const C=this.width(),S=this.height(),w=this.pointerDirection(),T=this.pointerWidth(),N=this.pointerHeight(),A=this.cornerRadius();let P=0,j=0,F=0,R=0;typeof A=="number"?P=j=F=R=Math.min(A,C/2,S/2):(P=Math.min(A[0]||0,C/2,S/2),j=Math.min(A[1]||0,C/2,S/2),R=Math.min(A[2]||0,C/2,S/2),F=Math.min(A[3]||0,C/2,S/2)),v.beginPath(),v.moveTo(P,0),w===c&&(v.lineTo((C-T)/2,0),v.lineTo(C/2,-1*N),v.lineTo((C+T)/2,0)),v.lineTo(C-j,0),v.arc(C-j,j,j,Math.PI*3/2,0,!1),w===u&&(v.lineTo(C,(S-N)/2),v.lineTo(C+T,S/2),v.lineTo(C,(S+N)/2)),v.lineTo(C,S-R),v.arc(C-R,S-R,R,0,Math.PI/2,!1),w===d&&(v.lineTo((C+T)/2,S),v.lineTo(C/2,S+N),v.lineTo((C-T)/2,S)),v.lineTo(F,S),v.arc(F,S-F,F,Math.PI/2,Math.PI,!1),w===f&&(v.lineTo(0,(S+N)/2),v.lineTo(-1*T,S/2),v.lineTo(0,(S-N)/2)),v.lineTo(0,P),v.arc(P,P,P,Math.PI,Math.PI*3/2,!1),v.closePath(),v.fillStrokeShape(this)}getSelfRect(){let v=0,C=0,S=this.pointerWidth(),w=this.pointerHeight(),T=this.pointerDirection(),N=this.width(),A=this.height();return T===c?(C-=w,A+=w):T===d?A+=w:T===f?(v-=S*1.5,N+=S):T===u&&(N+=S*1.5),{x:v,y:C,width:N,height:A}}}return Gh.Tag=p,p.prototype.className="Tag",(0,s._registerNode)(p),e.Factory.addGetterSetter(p,"pointerDirection",o),e.Factory.addGetterSetter(p,"pointerWidth",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(p,"pointerHeight",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(p,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),Gh}var Kx={},Gj;function rU(){if(Gj)return Kx;Gj=1,Object.defineProperty(Kx,"__esModule",{value:!0}),Kx.Rect=void 0;const e=Mn(),t=Ai(),r=En(),n=xa(),s=In();class a extends t.Shape{_sceneFunc(o){const c=this.cornerRadius(),u=this.width(),d=this.height();o.beginPath(),c?n.Util.drawRoundedRectPath(o,u,d,c):o.rect(0,0,u,d),o.closePath(),o.fillStrokeShape(this)}}return Kx.Rect=a,a.prototype.className="Rect",(0,r._registerNode)(a),e.Factory.addGetterSetter(a,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),Kx}var Yx={},Vj;function One(){if(Vj)return Yx;Vj=1,Object.defineProperty(Yx,"__esModule",{value:!0}),Yx.RegularPolygon=void 0;const e=Mn(),t=Ai(),r=In(),n=En();class s extends t.Shape{_sceneFunc(i){const o=this._getPoints();i.beginPath(),i.moveTo(o[0].x,o[0].y);for(let c=1;c<o.length;c++)i.lineTo(o[c].x,o[c].y);i.closePath(),i.fillStrokeShape(this)}_getPoints(){const i=this.attrs.sides,o=this.attrs.radius||0,c=[];for(let u=0;u<i;u++)c.push({x:o*Math.sin(u*2*Math.PI/i),y:-1*o*Math.cos(u*2*Math.PI/i)});return c}getSelfRect(){const i=this._getPoints();let o=i[0].x,c=i[0].y,u=i[0].x,d=i[0].y;return i.forEach(f=>{o=Math.min(o,f.x),c=Math.max(c,f.x),u=Math.min(u,f.y),d=Math.max(d,f.y)}),{x:o,y:u,width:c-o,height:d-u}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(i){this.radius(i/2)}setHeight(i){this.radius(i/2)}}return Yx.RegularPolygon=s,s.prototype.className="RegularPolygon",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"sides",0,(0,r.getNumberValidator)()),Yx}var Xx={},qj;function Dne(){if(qj)return Xx;qj=1,Object.defineProperty(Xx,"__esModule",{value:!0}),Xx.Ring=void 0;const e=Mn(),t=Ai(),r=In(),n=En(),s=Math.PI*2;class a extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.innerRadius(),0,s,!1),o.moveTo(this.outerRadius(),0),o.arc(0,0,this.outerRadius(),s,0,!0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}}return Xx.Ring=a,a.prototype.className="Ring",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(a),e.Factory.addGetterSetter(a,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,r.getNumberValidator)()),Xx}var Jx={},Kj;function Rne(){if(Kj)return Jx;Kj=1,Object.defineProperty(Jx,"__esModule",{value:!0}),Jx.Sprite=void 0;const e=Mn(),t=Ai(),r=LT(),n=In(),s=En();class a extends t.Shape{constructor(o){super(o),this._updated=!0,this.anim=new r.Animation(()=>{const c=this._updated;return this._updated=!1,c}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(o){const c=this.animation(),u=this.frameIndex(),d=u*4,f=this.animations()[c],h=this.frameOffsets(),g=f[d+0],p=f[d+1],y=f[d+2],v=f[d+3],C=this.image();if((this.hasFill()||this.hasStroke())&&(o.beginPath(),o.rect(0,0,y,v),o.closePath(),o.fillStrokeShape(this)),C)if(h){const S=h[c],w=u*2;o.drawImage(C,g,p,y,v,S[w+0],S[w+1],y,v)}else o.drawImage(C,g,p,y,v,0,0,y,v)}_hitFunc(o){const c=this.animation(),u=this.frameIndex(),d=u*4,f=this.animations()[c],h=this.frameOffsets(),g=f[d+2],p=f[d+3];if(o.beginPath(),h){const y=h[c],v=u*2;o.rect(y[v+0],y[v+1],g,p)}else o.rect(0,0,g,p);o.closePath(),o.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const o=this;this.interval=setInterval(function(){o._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const o=this.getLayer();this.anim.setLayers(o),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const o=this.frameIndex(),c=this.animation(),u=this.animations(),d=u[c],f=d.length/4;o<f-1?this.frameIndex(o+1):this.frameIndex(0)}}return Jx.Sprite=a,a.prototype.className="Sprite",(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"animation"),e.Factory.addGetterSetter(a,"animations"),e.Factory.addGetterSetter(a,"frameOffsets"),e.Factory.addGetterSetter(a,"image"),e.Factory.addGetterSetter(a,"frameIndex",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"frameRate",17,(0,n.getNumberValidator)()),e.Factory.backCompat(a,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Jx}var Qx={},Yj;function Ine(){if(Yj)return Qx;Yj=1,Object.defineProperty(Qx,"__esModule",{value:!0}),Qx.Star=void 0;const e=Mn(),t=Ai(),r=In(),n=En();class s extends t.Shape{_sceneFunc(i){const o=this.innerRadius(),c=this.outerRadius(),u=this.numPoints();i.beginPath(),i.moveTo(0,0-c);for(let d=1;d<u*2;d++){const f=d%2===0?c:o,h=f*Math.sin(d*Math.PI/u),g=-1*f*Math.cos(d*Math.PI/u);i.lineTo(h,g)}i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(i){this.outerRadius(i/2)}setHeight(i){this.outerRadius(i/2)}}return Qx.Star=s,s.prototype.className="Star",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"numPoints",5,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"outerRadius",0,(0,r.getNumberValidator)()),Qx}var rp={},Xj;function nU(){if(Xj)return rp;Xj=1,Object.defineProperty(rp,"__esModule",{value:!0}),rp.Text=void 0,rp.stringToArray=i;const e=xa(),t=Mn(),r=Ai(),n=En(),s=In(),a=En();function i(D){return[...D].reduce((U,q,H,te)=>{if(new RegExp("\\p{Emoji}","u").test(q)){const Q=te[H+1];Q&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(Q)?(U.push(q+Q),te[H+1]=""):U.push(q)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(q+(te[H+1]||""))?U.push(q+te[H+1]):H>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(q)?U[U.length-1]+=q:q&&U.push(q);return U},[])}const o="auto",c="center",u="inherit",d="justify",f="Change.konva",h="2d",g="-",p="left",y="text",v="Text",C="top",S="bottom",w="middle",T="normal",N="px ",A=" ",P="right",j="rtl",F="word",R="char",L="none",V="",Z=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Y=Z.length;function re(D){return D.split(",").map(U=>{U=U.trim();const q=U.indexOf(" ")>=0,H=U.indexOf('"')>=0||U.indexOf("'")>=0;return q&&!H&&(U=`"${U}"`),U}).join(", ")}let ue;function z(){return ue||(ue=e.Util.createCanvasElement().getContext(h),ue)}function X(D){D.fillText(this._partialText,this._partialTextX,this._partialTextY)}function I(D){D.setAttr("miterLimit",2),D.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function B(D){return D=D||{},!D.fillLinearGradientColorStops&&!D.fillRadialGradientColorStops&&!D.fillPatternImage&&(D.fill=D.fill||"black"),D}class W extends r.Shape{constructor(U){super(B(U)),this._partialTextX=0,this._partialTextY=0;for(let q=0;q<Y;q++)this.on(Z[q]+f,this._setTextData);this._setTextData()}_sceneFunc(U){const q=this.textArr,H=q.length;if(!this.text())return;let te=this.padding(),Q=this.fontSize(),ae=this.lineHeight()*Q,ce=this.verticalAlign(),me=this.direction(),xe=0,se=this.align(),De=this.getWidth(),He=this.letterSpacing(),rt=this.fill(),_t=this.textDecoration(),Ke=_t.indexOf("underline")!==-1,tt=_t.indexOf("line-through")!==-1,Pe;me=me===u?U.direction:me;let je=ae/2,Qe=w;if(n.Konva._fixTextRendering){const vt=this.measureSize("M");Qe="alphabetic",je=(vt.fontBoundingBoxAscent-vt.fontBoundingBoxDescent)/2+ae/2}for(me===j&&U.setAttr("direction",me),U.setAttr("font",this._getContextFont()),U.setAttr("textBaseline",Qe),U.setAttr("textAlign",p),ce===w?xe=(this.getHeight()-H*ae-te*2)/2:ce===S&&(xe=this.getHeight()-H*ae-te*2),U.translate(te,xe+te),Pe=0;Pe<H;Pe++){let vt=0,Ot=0;const $t=q[Pe],Gt=$t.text,ir=$t.width,dt=$t.lastInParagraph;if(U.save(),se===P?vt+=De-ir-te*2:se===c&&(vt+=(De-ir-te*2)/2),Ke){U.save(),U.beginPath();const gt=n.Konva._fixTextRendering?Math.round(Q/4):Math.round(Q/2),kt=vt,Ge=je+Ot+gt;U.moveTo(kt,Ge);const Xe=se===d&&!dt?De-te*2:ir;U.lineTo(kt+Math.round(Xe),Ge),U.lineWidth=Q/15;const Et=this._getLinearGradient();U.strokeStyle=Et||rt,U.stroke(),U.restore()}if(tt){U.save(),U.beginPath();const gt=n.Konva._fixTextRendering?-Math.round(Q/4):0;U.moveTo(vt,je+Ot+gt);const kt=se===d&&!dt?De-te*2:ir;U.lineTo(vt+Math.round(kt),je+Ot+gt),U.lineWidth=Q/15;const Ge=this._getLinearGradient();U.strokeStyle=Ge||rt,U.stroke(),U.restore()}if(me!==j&&(He!==0||se===d)){const gt=Gt.split(" ").length-1,kt=i(Gt);for(let Ge=0;Ge<kt.length;Ge++){const Xe=kt[Ge];Xe===" "&&!dt&&se===d&&(vt+=(De-te*2-ir)/gt),this._partialTextX=vt,this._partialTextY=je+Ot,this._partialText=Xe,U.fillStrokeShape(this),vt+=this.measureSize(Xe).width+He}}else He!==0&&U.setAttr("letterSpacing",`${He}px`),this._partialTextX=vt,this._partialTextY=je+Ot,this._partialText=Gt,U.fillStrokeShape(this);U.restore(),H>1&&(je+=ae)}}_hitFunc(U){const q=this.getWidth(),H=this.getHeight();U.beginPath(),U.rect(0,0,q,H),U.closePath(),U.fillStrokeShape(this)}setText(U){const q=e.Util._isString(U)?U:U==null?"":U+"";return this._setAttr(y,q),this}getWidth(){return this.attrs.width===o||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===o||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(U){var q,H,te,Q,ae,ce,me,xe,se,De,He;let rt=z(),_t=this.fontSize(),Ke;rt.save(),rt.font=this._getContextFont(),Ke=rt.measureText(U),rt.restore();const tt=_t/100;return{actualBoundingBoxAscent:(q=Ke.actualBoundingBoxAscent)!==null&&q!==void 0?q:71.58203125*tt,actualBoundingBoxDescent:(H=Ke.actualBoundingBoxDescent)!==null&&H!==void 0?H:0,actualBoundingBoxLeft:(te=Ke.actualBoundingBoxLeft)!==null&&te!==void 0?te:-7.421875*tt,actualBoundingBoxRight:(Q=Ke.actualBoundingBoxRight)!==null&&Q!==void 0?Q:75.732421875*tt,alphabeticBaseline:(ae=Ke.alphabeticBaseline)!==null&&ae!==void 0?ae:0,emHeightAscent:(ce=Ke.emHeightAscent)!==null&&ce!==void 0?ce:100*tt,emHeightDescent:(me=Ke.emHeightDescent)!==null&&me!==void 0?me:-20*tt,fontBoundingBoxAscent:(xe=Ke.fontBoundingBoxAscent)!==null&&xe!==void 0?xe:91*tt,fontBoundingBoxDescent:(se=Ke.fontBoundingBoxDescent)!==null&&se!==void 0?se:21*tt,hangingBaseline:(De=Ke.hangingBaseline)!==null&&De!==void 0?De:72.80000305175781*tt,ideographicBaseline:(He=Ke.ideographicBaseline)!==null&&He!==void 0?He:-21*tt,width:Ke.width,height:_t}}_getContextFont(){return this.fontStyle()+A+this.fontVariant()+A+(this.fontSize()+N)+re(this.fontFamily())}_addTextLine(U){this.align()===d&&(U=U.trim());const H=this._getTextWidth(U);return this.textArr.push({text:U,width:H,lastInParagraph:!1})}_getTextWidth(U){const q=this.letterSpacing(),H=U.length;return z().measureText(U).width+q*H}_setTextData(){let U=this.text().split(`
`),q=+this.fontSize(),H=0,te=this.lineHeight()*q,Q=this.attrs.width,ae=this.attrs.height,ce=Q!==o&&Q!==void 0,me=ae!==o&&ae!==void 0,xe=this.padding(),se=Q-xe*2,De=ae-xe*2,He=0,rt=this.wrap(),_t=rt!==L,Ke=rt!==R&&_t,tt=this.ellipsis();this.textArr=[],z().font=this._getContextFont();const Pe=tt?this._getTextWidth(V):0;for(let je=0,Qe=U.length;je<Qe;++je){let vt=U[je],Ot=this._getTextWidth(vt);if(ce&&Ot>se)for(;vt.length>0;){let $t=0,Gt=i(vt).length,ir="",dt=0;for(;$t<Gt;){const gt=$t+Gt>>>1,kt=i(vt),Ge=kt.slice(0,gt+1).join(""),Xe=this._getTextWidth(Ge);(tt&&me&&He+te>De?Xe+Pe:Xe)<=se?($t=gt+1,ir=Ge,dt=Xe):Gt=gt}if(ir){if(Ke){const Ge=i(vt),Xe=i(ir),Et=Ge[Xe.length],Ut=Et===A||Et===g;let Wt;if(Ut&&dt<=se)Wt=Xe.length;else{const pr=Xe.lastIndexOf(A),wr=Xe.lastIndexOf(g);Wt=Math.max(pr,wr)+1}Wt>0&&($t=Wt,ir=Ge.slice(0,$t).join(""),dt=this._getTextWidth(ir))}if(ir=ir.trimRight(),this._addTextLine(ir),H=Math.max(H,dt),He+=te,this._shouldHandleEllipsis(He)){this._tryToAddEllipsisToLastLine();break}if(vt=i(vt).slice($t).join("").trimLeft(),vt.length>0&&(Ot=this._getTextWidth(vt),Ot<=se)){this._addTextLine(vt),He+=te,H=Math.max(H,Ot);break}}else break}else this._addTextLine(vt),He+=te,H=Math.max(H,Ot),this._shouldHandleEllipsis(He)&&je<Qe-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),me&&He+te>De)break}this.textHeight=q,this.textWidth=H}_shouldHandleEllipsis(U){const q=+this.fontSize(),H=this.lineHeight()*q,te=this.attrs.height,Q=te!==o&&te!==void 0,ae=this.padding(),ce=te-ae*2;return!(this.wrap()!==L)||Q&&U+H>ce}_tryToAddEllipsisToLastLine(){const U=this.attrs.width,q=U!==o&&U!==void 0,H=this.padding(),te=U-H*2,Q=this.ellipsis(),ae=this.textArr[this.textArr.length-1];!ae||!Q||(q&&(this._getTextWidth(ae.text+V)<te||(ae.text=ae.text.slice(0,ae.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(ae.text+V))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const U=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,q=this.hasShadow();return U&&q?!0:super._useBufferCanvas()}}return rp.Text=W,W.prototype._fillFunc=X,W.prototype._strokeFunc=I,W.prototype.className=v,W.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,a._registerNode)(W),t.Factory.overWriteSetter(W,"width",(0,s.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(W,"height",(0,s.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(W,"direction",u),t.Factory.addGetterSetter(W,"fontFamily","Arial"),t.Factory.addGetterSetter(W,"fontSize",12,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(W,"fontStyle",T),t.Factory.addGetterSetter(W,"fontVariant",T),t.Factory.addGetterSetter(W,"padding",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(W,"align",p),t.Factory.addGetterSetter(W,"verticalAlign",C),t.Factory.addGetterSetter(W,"lineHeight",1,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(W,"wrap",F),t.Factory.addGetterSetter(W,"ellipsis",!1,(0,s.getBooleanValidator)()),t.Factory.addGetterSetter(W,"letterSpacing",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(W,"text","",(0,s.getStringValidator)()),t.Factory.addGetterSetter(W,"textDecoration",""),rp}var Zx={},Jj;function Lne(){if(Jj)return Zx;Jj=1,Object.defineProperty(Zx,"__esModule",{value:!0}),Zx.TextPath=void 0;const e=xa(),t=Mn(),r=Ai(),n=BT(),s=nU(),a=In(),i=En(),o="",c="normal";function u(h){h.fillText(this.partialText,0,0)}function d(h){h.strokeText(this.partialText,0,0)}class f extends r.Shape{constructor(g){super(g),this.dummyCanvas=e.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return n.Path.getPathLength(this.dataArray)}_getPointAtLength(g){if(!this.attrs.data)return null;const p=this.pathLength;return g-1>p?null:n.Path.getPointAtLengthOfDataArray(g,this.dataArray)}_readDataAttribute(){this.dataArray=n.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(g){g.setAttr("font",this._getContextFont()),g.setAttr("textBaseline",this.textBaseline()),g.setAttr("textAlign","left"),g.save();const p=this.textDecoration(),y=this.fill(),v=this.fontSize(),C=this.glyphInfo;p==="underline"&&g.beginPath();for(let S=0;S<C.length;S++){g.save();const w=C[S].p0;g.translate(w.x,w.y),g.rotate(C[S].rotation),this.partialText=C[S].text,g.fillStrokeShape(this),p==="underline"&&(S===0&&g.moveTo(0,v/2+1),g.lineTo(v,v/2+1)),g.restore()}p==="underline"&&(g.strokeStyle=y,g.lineWidth=v/20,g.stroke()),g.restore()}_hitFunc(g){g.beginPath();const p=this.glyphInfo;if(p.length>=1){const y=p[0].p0;g.moveTo(y.x,y.y)}for(let y=0;y<p.length;y++){const v=p[y].p1;g.lineTo(v.x,v.y)}g.setAttr("lineWidth",this.fontSize()),g.setAttr("strokeStyle",this.colorKey),g.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(g){return s.Text.prototype.setText.call(this,g)}_getContextFont(){return s.Text.prototype._getContextFont.call(this)}_getTextSize(g){const y=this.dummyCanvas.getContext("2d");y.save(),y.font=this._getContextFont();const v=y.measureText(g);return y.restore(),{width:v.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:g,height:p}=this._getTextSize(this.attrs.text);if(this.textWidth=g,this.textHeight=p,this.glyphInfo=[],!this.attrs.data)return null;const y=this.letterSpacing(),v=this.align(),C=this.kerningFunc(),S=Math.max(this.textWidth+((this.attrs.text||"").length-1)*y,0);let w=0;v==="center"&&(w=Math.max(0,this.pathLength/2-S/2)),v==="right"&&(w=Math.max(0,this.pathLength-S));const T=(0,s.stringToArray)(this.text());let N=w;for(let A=0;A<T.length;A++){const P=this._getPointAtLength(N);if(!P)return;let j=this._getTextSize(T[A]).width+y;if(T[A]===" "&&v==="justify"){const Y=this.text().split(" ").length-1;j+=(this.pathLength-S)/Y}const F=this._getPointAtLength(N+j);if(!F)return;const R=n.Path.getLineLength(P.x,P.y,F.x,F.y);let L=0;if(C)try{L=C(T[A-1],T[A])*this.fontSize()}catch{L=0}P.x+=L,F.x+=L,this.textWidth+=L;const V=n.Path.getPointOnLine(L+R/2,P.x,P.y,F.x,F.y),Z=Math.atan2(F.y-P.y,F.x-P.x);this.glyphInfo.push({transposeX:V.x,transposeY:V.y,text:T[A],rotation:Z,p0:P,p1:F}),N+=j}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const g=[];this.glyphInfo.forEach(function(N){g.push(N.p0.x),g.push(N.p0.y),g.push(N.p1.x),g.push(N.p1.y)});let p=g[0]||0,y=g[0]||0,v=g[1]||0,C=g[1]||0,S,w;for(let N=0;N<g.length/2;N++)S=g[N*2],w=g[N*2+1],p=Math.min(p,S),y=Math.max(y,S),v=Math.min(v,w),C=Math.max(C,w);const T=this.fontSize();return{x:p-T/2,y:v-T/2,width:y-p+T,height:C-v+T}}destroy(){return e.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}return Zx.TextPath=f,f.prototype._fillFunc=u,f.prototype._strokeFunc=d,f.prototype._fillFuncHit=u,f.prototype._strokeFuncHit=d,f.prototype.className="TextPath",f.prototype._attrsAffectingSize=["text","fontSize","data"],(0,i._registerNode)(f),t.Factory.addGetterSetter(f,"data"),t.Factory.addGetterSetter(f,"fontFamily","Arial"),t.Factory.addGetterSetter(f,"fontSize",12,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(f,"fontStyle",c),t.Factory.addGetterSetter(f,"align","left"),t.Factory.addGetterSetter(f,"letterSpacing",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(f,"textBaseline","middle"),t.Factory.addGetterSetter(f,"fontVariant",c),t.Factory.addGetterSetter(f,"text",o),t.Factory.addGetterSetter(f,"textDecoration",""),t.Factory.addGetterSetter(f,"kerningFunc",void 0),Zx}var ey={},Qj;function Bne(){if(Qj)return ey;Qj=1,Object.defineProperty(ey,"__esModule",{value:!0}),ey.Transformer=void 0;const e=xa(),t=Mn(),r=Ma(),n=Ai(),s=rU(),a=IT(),i=En(),o=In(),c=En(),u="tr-konva",d=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(j=>j+`.${u}`).join(" "),f="nodesRect",h=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],g={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},p="ontouchstart"in i.Konva._global;function y(j,F,R){if(j==="rotater")return R;F+=e.Util.degToRad(g[j]||0);const L=(e.Util.radToDeg(F)%360+360)%360;return e.Util._inRange(L,315+22.5,360)||e.Util._inRange(L,0,22.5)?"ns-resize":e.Util._inRange(L,45-22.5,45+22.5)?"nesw-resize":e.Util._inRange(L,90-22.5,90+22.5)?"ew-resize":e.Util._inRange(L,135-22.5,135+22.5)?"nwse-resize":e.Util._inRange(L,180-22.5,180+22.5)?"ns-resize":e.Util._inRange(L,225-22.5,225+22.5)?"nesw-resize":e.Util._inRange(L,270-22.5,270+22.5)?"ew-resize":e.Util._inRange(L,315-22.5,315+22.5)?"nwse-resize":(e.Util.error("Transformer has unknown angle for cursor detection: "+L),"pointer")}const v=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function C(j){return{x:j.x+j.width/2*Math.cos(j.rotation)+j.height/2*Math.sin(-j.rotation),y:j.y+j.height/2*Math.cos(j.rotation)+j.width/2*Math.sin(j.rotation)}}function S(j,F,R){const L=R.x+(j.x-R.x)*Math.cos(F)-(j.y-R.y)*Math.sin(F),V=R.y+(j.x-R.x)*Math.sin(F)+(j.y-R.y)*Math.cos(F);return{...j,rotation:j.rotation+F,x:L,y:V}}function w(j,F){const R=C(j);return S(j,F,R)}function T(j,F,R){let L=F;for(let V=0;V<j.length;V++){const Z=i.Konva.getAngle(j[V]),Y=Math.abs(Z-F)%(Math.PI*2);Math.min(Y,Math.PI*2-Y)<R&&(L=Z)}return L}let N=0;class A extends a.Group{constructor(F){super(F),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(d,this.update),this.getNode()&&this.update()}attachTo(F){return this.setNode(F),this}setNode(F){return e.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([F])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(F=[]){this._nodes&&this._nodes.length&&this.detach();const R=F.filter(V=>V.isAncestorOf(this)?(e.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=F=R,F.length===1&&this.useSingleNodeRotation()?this.rotation(F[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(V=>{const Z=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(V._attrsAffectingSize.length){const Y=V._attrsAffectingSize.map(re=>re+"Change."+this._getEventNamespace()).join(" ");V.on(Y,Z)}V.on(h.map(Y=>Y+`.${this._getEventNamespace()}`).join(" "),Z),V.on(`absoluteTransformChange.${this._getEventNamespace()}`,Z),this._proxyDrag(V)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(F){let R;F.on(`dragstart.${this._getEventNamespace()}`,L=>{R=F.getAbsolutePosition(),!this.isDragging()&&F!==this.findOne(".back")&&this.startDrag(L,!1)}),F.on(`dragmove.${this._getEventNamespace()}`,L=>{if(!R)return;const V=F.getAbsolutePosition(),Z=V.x-R.x,Y=V.y-R.y;this.nodes().forEach(re=>{if(re===F||re.isDragging())return;const ue=re.getAbsolutePosition();re.setAbsolutePosition({x:ue.x+Z,y:ue.y+Y}),re.startDrag(L)}),R=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(F=>{F.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(f),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(f,this.__getNodeRect)}__getNodeShape(F,R=this.rotation(),L){const V=F.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),Z=F.getAbsoluteScale(L),Y=F.getAbsolutePosition(L),re=V.x*Z.x-F.offsetX()*Z.x,ue=V.y*Z.y-F.offsetY()*Z.y,z=(i.Konva.getAngle(F.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),X={x:Y.x+re*Math.cos(z)+ue*Math.sin(-z),y:Y.y+ue*Math.cos(z)+re*Math.sin(z),width:V.width*Z.x,height:V.height*Z.y,rotation:z};return S(X,-i.Konva.getAngle(R),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const R=[];this.nodes().map(z=>{const X=z.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),I=[{x:X.x,y:X.y},{x:X.x+X.width,y:X.y},{x:X.x+X.width,y:X.y+X.height},{x:X.x,y:X.y+X.height}],B=z.getAbsoluteTransform();I.forEach(function(W){const D=B.point(W);R.push(D)})});const L=new e.Transform;L.rotate(-i.Konva.getAngle(this.rotation()));let V=1/0,Z=1/0,Y=-1/0,re=-1/0;R.forEach(function(z){const X=L.point(z);V===void 0&&(V=Y=X.x,Z=re=X.y),V=Math.min(V,X.x),Z=Math.min(Z,X.y),Y=Math.max(Y,X.x),re=Math.max(re,X.y)}),L.invert();const ue=L.point({x:V,y:Z});return{x:ue.x,y:ue.y,width:Y-V,height:re-Z,rotation:i.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),v.forEach(F=>{this._createAnchor(F)}),this._createAnchor("rotater")}_createAnchor(F){const R=new s.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:F+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:p?10:"auto"}),L=this;R.on("mousedown touchstart",function(V){L._handleMouseDown(V)}),R.on("dragstart",V=>{R.stopDrag(),V.cancelBubble=!0}),R.on("dragend",V=>{V.cancelBubble=!0}),R.on("mouseenter",()=>{const V=i.Konva.getAngle(this.rotation()),Z=this.rotateAnchorCursor(),Y=y(F,V,Z);R.getStage().content&&(R.getStage().content.style.cursor=Y),this._cursorChange=!0}),R.on("mouseout",()=>{R.getStage().content&&(R.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(R)}_createBack(){const F=new n.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(R,L){const V=L.getParent(),Z=V.padding();R.beginPath(),R.rect(-Z,-Z,L.width()+Z*2,L.height()+Z*2),R.moveTo(L.width()/2,-Z),V.rotateEnabled()&&V.rotateLineVisible()&&R.lineTo(L.width()/2,-V.rotateAnchorOffset()*e.Util._sign(L.height())-Z),R.fillStrokeShape(L)},hitFunc:(R,L)=>{if(!this.shouldOverdrawWholeArea())return;const V=this.padding();R.beginPath(),R.rect(-V,-V,L.width()+V*2,L.height()+V*2),R.fillStrokeShape(L)}});this.add(F),this._proxyDrag(F),F.on("dragstart",R=>{R.cancelBubble=!0}),F.on("dragmove",R=>{R.cancelBubble=!0}),F.on("dragend",R=>{R.cancelBubble=!0}),this.on("dragmove",R=>{this.update()})}_handleMouseDown(F){if(this._transforming)return;this._movingAnchorName=F.target.name().split(" ")[0];const R=this._getNodeRect(),L=R.width,V=R.height,Z=Math.sqrt(Math.pow(L,2)+Math.pow(V,2));this.sin=Math.abs(V/Z),this.cos=Math.abs(L/Z),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const Y=F.target.getAbsolutePosition(),re=F.target.getStage().getPointerPosition();this._anchorDragOffset={x:re.x-Y.x,y:re.y-Y.y},N++,this._fire("transformstart",{evt:F.evt,target:this.getNode()}),this._nodes.forEach(ue=>{ue._fire("transformstart",{evt:F.evt,target:ue})})}_handleMouseMove(F){let R,L,V;const Z=this.findOne("."+this._movingAnchorName),Y=Z.getStage();Y.setPointersPositions(F);const re=Y.getPointerPosition();let ue={x:re.x-this._anchorDragOffset.x,y:re.y-this._anchorDragOffset.y};const z=Z.getAbsolutePosition();this.anchorDragBoundFunc()&&(ue=this.anchorDragBoundFunc()(z,ue,F)),Z.setAbsolutePosition(ue);const X=Z.getAbsolutePosition();if(z.x===X.x&&z.y===X.y)return;if(this._movingAnchorName==="rotater"){const te=this._getNodeRect();R=Z.x()-te.width/2,L=-Z.y()+te.height/2;let Q=Math.atan2(-L,R)+Math.PI/2;te.height<0&&(Q-=Math.PI);const ce=i.Konva.getAngle(this.rotation())+Q,me=i.Konva.getAngle(this.rotationSnapTolerance()),se=T(this.rotationSnaps(),ce,me)-te.rotation,De=w(te,se);this._fitNodesInto(De,F);return}const I=this.shiftBehavior();let B;I==="inverted"?B=this.keepRatio()&&!F.shiftKey:I==="none"?B=this.keepRatio():B=this.keepRatio()||F.shiftKey;let W=this.centeredScaling()||F.altKey;if(this._movingAnchorName==="top-left"){if(B){const te=W?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};V=Math.sqrt(Math.pow(te.x-Z.x(),2)+Math.pow(te.y-Z.y(),2));const Q=this.findOne(".top-left").x()>te.x?-1:1,ae=this.findOne(".top-left").y()>te.y?-1:1;R=V*this.cos*Q,L=V*this.sin*ae,this.findOne(".top-left").x(te.x-R),this.findOne(".top-left").y(te.y-L)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(Z.y());else if(this._movingAnchorName==="top-right"){if(B){const te=W?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};V=Math.sqrt(Math.pow(Z.x()-te.x,2)+Math.pow(te.y-Z.y(),2));const Q=this.findOne(".top-right").x()<te.x?-1:1,ae=this.findOne(".top-right").y()>te.y?-1:1;R=V*this.cos*Q,L=V*this.sin*ae,this.findOne(".top-right").x(te.x+R),this.findOne(".top-right").y(te.y-L)}var D=Z.position();this.findOne(".top-left").y(D.y),this.findOne(".bottom-right").x(D.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(Z.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(Z.x());else if(this._movingAnchorName==="bottom-left"){if(B){const te=W?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};V=Math.sqrt(Math.pow(te.x-Z.x(),2)+Math.pow(Z.y()-te.y,2));const Q=te.x<Z.x()?-1:1,ae=Z.y()<te.y?-1:1;R=V*this.cos*Q,L=V*this.sin*ae,Z.x(te.x-R),Z.y(te.y+L)}D=Z.position(),this.findOne(".top-left").x(D.x),this.findOne(".bottom-right").y(D.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(Z.y());else if(this._movingAnchorName==="bottom-right"){if(B){const te=W?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};V=Math.sqrt(Math.pow(Z.x()-te.x,2)+Math.pow(Z.y()-te.y,2));const Q=this.findOne(".bottom-right").x()<te.x?-1:1,ae=this.findOne(".bottom-right").y()<te.y?-1:1;R=V*this.cos*Q,L=V*this.sin*ae,this.findOne(".bottom-right").x(te.x+R),this.findOne(".bottom-right").y(te.y+L)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(W=this.centeredScaling()||F.altKey,W){const te=this.findOne(".top-left"),Q=this.findOne(".bottom-right"),ae=te.x(),ce=te.y(),me=this.getWidth()-Q.x(),xe=this.getHeight()-Q.y();Q.move({x:-ae,y:-ce}),te.move({x:me,y:xe})}const U=this.findOne(".top-left").getAbsolutePosition();R=U.x,L=U.y;const q=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),H=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:R,y:L,width:q,height:H,rotation:i.Konva.getAngle(this.rotation())},F)}_handleMouseUp(F){this._removeEvents(F)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(F){var R;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const L=this.getNode();N--,this._fire("transformend",{evt:F,target:L}),(R=this.getLayer())===null||R===void 0||R.batchDraw(),L&&this._nodes.forEach(V=>{var Z;V._fire("transformend",{evt:F,target:V}),(Z=V.getLayer())===null||Z===void 0||Z.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(F,R){const L=this._getNodeRect(),V=1;if(e.Util._inRange(F.width,-this.padding()*2-V,V)){this.update();return}if(e.Util._inRange(F.height,-this.padding()*2-V,V)){this.update();return}const Z=new e.Transform;if(Z.rotate(i.Konva.getAngle(this.rotation())),this._movingAnchorName&&F.width<0&&this._movingAnchorName.indexOf("left")>=0){const B=Z.point({x:-this.padding()*2,y:0});F.x+=B.x,F.y+=B.y,F.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y}else if(this._movingAnchorName&&F.width<0&&this._movingAnchorName.indexOf("right")>=0){const B=Z.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y,F.width+=this.padding()*2}if(this._movingAnchorName&&F.height<0&&this._movingAnchorName.indexOf("top")>=0){const B=Z.point({x:0,y:-this.padding()*2});F.x+=B.x,F.y+=B.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y,F.height+=this.padding()*2}else if(this._movingAnchorName&&F.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const B=Z.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=B.x,this._anchorDragOffset.y-=B.y,F.height+=this.padding()*2}if(this.boundBoxFunc()){const B=this.boundBoxFunc()(L,F);B?F=B:e.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const Y=1e7,re=new e.Transform;re.translate(L.x,L.y),re.rotate(L.rotation),re.scale(L.width/Y,L.height/Y);const ue=new e.Transform,z=F.width/Y,X=F.height/Y;this.flipEnabled()===!1?(ue.translate(F.x,F.y),ue.rotate(F.rotation),ue.translate(F.width<0?F.width:0,F.height<0?F.height:0),ue.scale(Math.abs(z),Math.abs(X))):(ue.translate(F.x,F.y),ue.rotate(F.rotation),ue.scale(z,X));const I=ue.multiply(re.invert());this._nodes.forEach(B=>{var W;const D=B.getParent().getAbsoluteTransform(),U=B.getTransform().copy();U.translate(B.offsetX(),B.offsetY());const q=new e.Transform;q.multiply(D.copy().invert()).multiply(I).multiply(D).multiply(U);const H=q.decompose();B.setAttrs(H),(W=B.getLayer())===null||W===void 0||W.batchDraw()}),this.rotation(e.Util._getRotation(F.rotation)),this._nodes.forEach(B=>{this._fire("transform",{evt:R,target:B}),B._fire("transform",{evt:R,target:B})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(F,R){this.findOne(F).setAttrs(R)}update(){var F;const R=this._getNodeRect();this.rotation(e.Util._getRotation(R.rotation));const L=R.width,V=R.height,Z=this.enabledAnchors(),Y=this.resizeEnabled(),re=this.padding(),ue=this.anchorSize(),z=this.find("._anchor");z.forEach(I=>{I.setAttrs({width:ue,height:ue,offsetX:ue/2,offsetY:ue/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:ue/2+re,offsetY:ue/2+re,visible:Y&&Z.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:L/2,y:0,offsetY:ue/2+re,visible:Y&&Z.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:L,y:0,offsetX:ue/2-re,offsetY:ue/2+re,visible:Y&&Z.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:V/2,offsetX:ue/2+re,visible:Y&&Z.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:L,y:V/2,offsetX:ue/2-re,visible:Y&&Z.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:V,offsetX:ue/2+re,offsetY:ue/2-re,visible:Y&&Z.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:L/2,y:V,offsetY:ue/2-re,visible:Y&&Z.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:L,y:V,offsetX:ue/2-re,offsetY:ue/2-re,visible:Y&&Z.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:L/2,y:-this.rotateAnchorOffset()*e.Util._sign(V)-re,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:L,height:V,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const X=this.anchorStyleFunc();X&&z.forEach(I=>{X(I)}),(F=this.getLayer())===null||F===void 0||F.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const F=this.findOne("."+this._movingAnchorName);F&&F.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),a.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return r.Node.prototype.toObject.call(this)}clone(F){return r.Node.prototype.clone.call(this,F)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}ey.Transformer=A,A.isTransforming=()=>N>0;function P(j){return j instanceof Array||e.Util.warn("enabledAnchors value should be an array"),j instanceof Array&&j.forEach(function(F){v.indexOf(F)===-1&&e.Util.warn("Unknown anchor name: "+F+". Available names are: "+v.join(", "))}),j||[]}return A.prototype.className="Transformer",(0,c._registerNode)(A),t.Factory.addGetterSetter(A,"enabledAnchors",v,P),t.Factory.addGetterSetter(A,"flipEnabled",!0,(0,o.getBooleanValidator)()),t.Factory.addGetterSetter(A,"resizeEnabled",!0),t.Factory.addGetterSetter(A,"anchorSize",10,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"rotateEnabled",!0),t.Factory.addGetterSetter(A,"rotateLineVisible",!0),t.Factory.addGetterSetter(A,"rotationSnaps",[]),t.Factory.addGetterSetter(A,"rotateAnchorOffset",50,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(A,"rotationSnapTolerance",5,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"borderEnabled",!0),t.Factory.addGetterSetter(A,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(A,"anchorStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"anchorFill","white"),t.Factory.addGetterSetter(A,"anchorCornerRadius",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(A,"borderStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"borderDash"),t.Factory.addGetterSetter(A,"keepRatio",!0),t.Factory.addGetterSetter(A,"shiftBehavior","default"),t.Factory.addGetterSetter(A,"centeredScaling",!1),t.Factory.addGetterSetter(A,"ignoreStroke",!1),t.Factory.addGetterSetter(A,"padding",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"nodes"),t.Factory.addGetterSetter(A,"node"),t.Factory.addGetterSetter(A,"boundBoxFunc"),t.Factory.addGetterSetter(A,"anchorDragBoundFunc"),t.Factory.addGetterSetter(A,"anchorStyleFunc"),t.Factory.addGetterSetter(A,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(A,"useSingleNodeRotation",!0),t.Factory.backCompat(A,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),ey}var ty={},Zj;function $ne(){if(Zj)return ty;Zj=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.Wedge=void 0;const e=Mn(),t=Ai(),r=En(),n=In(),s=En();class a extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.radius(),0,r.Konva.getAngle(this.angle()),this.clockwise()),o.lineTo(0,0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}}return ty.Wedge=a,a.prototype.className="Wedge",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"radius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"angle",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clockwise",!1),e.Factory.backCompat(a,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),ty}var ry={},eP;function Une(){if(eP)return ry;eP=1,Object.defineProperty(ry,"__esModule",{value:!0}),ry.Blur=void 0;const e=Mn(),t=Ma(),r=In();function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function i(c,u){const d=c.data,f=c.width,h=c.height;let g,p,y,v,C,S,w,T,N,A,P,j,F,R,L,V,Z,Y,re,ue;const z=u+u+1,X=f-1,I=h-1,B=u+1,W=B*(B+1)/2,D=new n,U=s[u],q=a[u];let H=null,te=D,Q=null,ae=null;for(let ce=1;ce<z;ce++)te=te.next=new n,ce===B&&(H=te);te.next=D,y=p=0;for(let ce=0;ce<h;ce++){j=F=R=L=v=C=S=w=0,T=B*(V=d[p]),N=B*(Z=d[p+1]),A=B*(Y=d[p+2]),P=B*(re=d[p+3]),v+=W*V,C+=W*Z,S+=W*Y,w+=W*re,te=D;for(let me=0;me<B;me++)te.r=V,te.g=Z,te.b=Y,te.a=re,te=te.next;for(let me=1;me<B;me++)g=p+((X<me?X:me)<<2),v+=(te.r=V=d[g])*(ue=B-me),C+=(te.g=Z=d[g+1])*ue,S+=(te.b=Y=d[g+2])*ue,w+=(te.a=re=d[g+3])*ue,j+=V,F+=Z,R+=Y,L+=re,te=te.next;Q=D,ae=H;for(let me=0;me<f;me++)d[p+3]=re=w*U>>q,re!==0?(re=255/re,d[p]=(v*U>>q)*re,d[p+1]=(C*U>>q)*re,d[p+2]=(S*U>>q)*re):d[p]=d[p+1]=d[p+2]=0,v-=T,C-=N,S-=A,w-=P,T-=Q.r,N-=Q.g,A-=Q.b,P-=Q.a,g=y+((g=me+u+1)<X?g:X)<<2,j+=Q.r=d[g],F+=Q.g=d[g+1],R+=Q.b=d[g+2],L+=Q.a=d[g+3],v+=j,C+=F,S+=R,w+=L,Q=Q.next,T+=V=ae.r,N+=Z=ae.g,A+=Y=ae.b,P+=re=ae.a,j-=V,F-=Z,R-=Y,L-=re,ae=ae.next,p+=4;y+=f}for(let ce=0;ce<f;ce++){F=R=L=j=C=S=w=v=0,p=ce<<2,T=B*(V=d[p]),N=B*(Z=d[p+1]),A=B*(Y=d[p+2]),P=B*(re=d[p+3]),v+=W*V,C+=W*Z,S+=W*Y,w+=W*re,te=D;for(let xe=0;xe<B;xe++)te.r=V,te.g=Z,te.b=Y,te.a=re,te=te.next;let me=f;for(let xe=1;xe<=u;xe++)p=me+ce<<2,v+=(te.r=V=d[p])*(ue=B-xe),C+=(te.g=Z=d[p+1])*ue,S+=(te.b=Y=d[p+2])*ue,w+=(te.a=re=d[p+3])*ue,j+=V,F+=Z,R+=Y,L+=re,te=te.next,xe<I&&(me+=f);p=ce,Q=D,ae=H;for(let xe=0;xe<h;xe++)g=p<<2,d[g+3]=re=w*U>>q,re>0?(re=255/re,d[g]=(v*U>>q)*re,d[g+1]=(C*U>>q)*re,d[g+2]=(S*U>>q)*re):d[g]=d[g+1]=d[g+2]=0,v-=T,C-=N,S-=A,w-=P,T-=Q.r,N-=Q.g,A-=Q.b,P-=Q.a,g=ce+((g=xe+B)<I?g:I)*f<<2,v+=j+=Q.r=d[g],C+=F+=Q.g=d[g+1],S+=R+=Q.b=d[g+2],w+=L+=Q.a=d[g+3],Q=Q.next,T+=V=ae.r,N+=Z=ae.g,A+=Y=ae.b,P+=re=ae.a,j-=V,F-=Z,R-=Y,L-=re,ae=ae.next,p+=f}}const o=function(u){const d=Math.round(this.blurRadius());d>0&&i(u,d)};return ry.Blur=o,e.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),ry}var ny={},tP;function zne(){if(tP)return ny;tP=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.Brighten=void 0;const e=Mn(),t=Ma(),r=In(),n=function(s){const a=this.brightness()*255,i=s.data,o=i.length;for(let c=0;c<o;c+=4)i[c]+=a,i[c+1]+=a,i[c+2]+=a};return ny.Brighten=n,e.Factory.addGetterSetter(t.Node,"brightness",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),ny}var sy={},rP;function Wne(){if(rP)return sy;rP=1,Object.defineProperty(sy,"__esModule",{value:!0}),sy.Contrast=void 0;const e=Mn(),t=Ma(),r=In(),n=function(s){const a=Math.pow((this.contrast()+100)/100,2),i=s.data,o=i.length;let c=150,u=150,d=150;for(let f=0;f<o;f+=4)c=i[f],u=i[f+1],d=i[f+2],c/=255,c-=.5,c*=a,c+=.5,c*=255,u/=255,u-=.5,u*=a,u+=.5,u*=255,d/=255,d-=.5,d*=a,d+=.5,d*=255,c=c<0?0:c>255?255:c,u=u<0?0:u>255?255:u,d=d<0?0:d>255?255:d,i[f]=c,i[f+1]=u,i[f+2]=d};return sy.Contrast=n,e.Factory.addGetterSetter(t.Node,"contrast",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),sy}var ay={},nP;function Hne(){if(nP)return ay;nP=1,Object.defineProperty(ay,"__esModule",{value:!0}),ay.Emboss=void 0;const e=Mn(),t=Ma(),r=xa(),n=In(),s=function(a){const i=this.embossStrength()*10,o=this.embossWhiteLevel()*255,c=this.embossDirection(),u=this.embossBlend(),d=a.data,f=a.width,h=a.height,g=f*4;let p=0,y=0,v=h;switch(c){case"top-left":p=-1,y=-1;break;case"top":p=-1,y=0;break;case"top-right":p=-1,y=1;break;case"right":p=0,y=1;break;case"bottom-right":p=1,y=1;break;case"bottom":p=1,y=0;break;case"bottom-left":p=1,y=-1;break;case"left":p=0,y=-1;break;default:r.Util.error("Unknown emboss direction: "+c)}do{const C=(v-1)*g;let S=p;v+S<1&&(S=0),v+S>h&&(S=0);const w=(v-1+S)*f*4;let T=f;do{const N=C+(T-1)*4;let A=y;T+A<1&&(A=0),T+A>f&&(A=0);const P=w+(T-1+A)*4,j=d[N]-d[P],F=d[N+1]-d[P+1],R=d[N+2]-d[P+2];let L=j;const V=L>0?L:-L,Z=F>0?F:-F,Y=R>0?R:-R;if(Z>V&&(L=F),Y>V&&(L=R),L*=i,u){const re=d[N]+L,ue=d[N+1]+L,z=d[N+2]+L;d[N]=re>255?255:re<0?0:re,d[N+1]=ue>255?255:ue<0?0:ue,d[N+2]=z>255?255:z<0?0:z}else{let re=o-L;re<0?re=0:re>255&&(re=255),d[N]=d[N+1]=d[N+2]=re}}while(--T)}while(--v)};return ay.Emboss=s,e.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,e.Factory.afterSetFilter),ay}var iy={},sP;function Gne(){if(sP)return iy;sP=1,Object.defineProperty(iy,"__esModule",{value:!0}),iy.Enhance=void 0;const e=Mn(),t=Ma(),r=In();function n(a,i,o,c,u){const d=o-i,f=u-c;if(d===0)return c+f/2;if(f===0)return c;let h=(a-i)/d;return h=f*h+c,h}const s=function(a){const i=a.data,o=i.length;let c=i[0],u=c,d,f=i[1],h=f,g,p=i[2],y=p,v;const C=this.enhance();if(C===0)return;for(let j=0;j<o;j+=4)d=i[j+0],d<c?c=d:d>u&&(u=d),g=i[j+1],g<f?f=g:g>h&&(h=g),v=i[j+2],v<p?p=v:v>y&&(y=v);u===c&&(u=255,c=0),h===f&&(h=255,f=0),y===p&&(y=255,p=0);let S,w,T,N,A,P;if(C>0)S=u+C*(255-u),w=c-C*(c-0),T=h+C*(255-h),N=f-C*(f-0),A=y+C*(255-y),P=p-C*(p-0);else{const j=(u+c)*.5;S=u+C*(u-j),w=c+C*(c-j);const F=(h+f)*.5;T=h+C*(h-F),N=f+C*(f-F);const R=(y+p)*.5;A=y+C*(y-R),P=p+C*(p-R)}for(let j=0;j<o;j+=4)i[j+0]=n(i[j+0],c,u,w,S),i[j+1]=n(i[j+1],f,h,N,T),i[j+2]=n(i[j+2],p,y,P,A)};return iy.Enhance=s,e.Factory.addGetterSetter(t.Node,"enhance",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),iy}var oy={},aP;function Vne(){if(aP)return oy;aP=1,Object.defineProperty(oy,"__esModule",{value:!0}),oy.Grayscale=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4){const a=.34*r[s]+.5*r[s+1]+.16*r[s+2];r[s]=a,r[s+1]=a,r[s+2]=a}};return oy.Grayscale=e,oy}var ly={},iP;function qne(){if(iP)return ly;iP=1,Object.defineProperty(ly,"__esModule",{value:!0}),ly.HSL=void 0;const e=Mn(),t=Ma(),r=In();e.Factory.addGetterSetter(t.Node,"hue",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"luminance",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter);const n=function(s){const a=s.data,i=a.length,o=1,c=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=this.luminance()*127,f=o*c*Math.cos(u*Math.PI/180),h=o*c*Math.sin(u*Math.PI/180),g=.299*o+.701*f+.167*h,p=.587*o-.587*f+.33*h,y=.114*o-.114*f-.497*h,v=.299*o-.299*f-.328*h,C=.587*o+.413*f+.035*h,S=.114*o-.114*f+.293*h,w=.299*o-.3*f+1.25*h,T=.587*o-.586*f-1.05*h,N=.114*o+.886*f-.2*h;let A,P,j,F;for(let R=0;R<i;R+=4)A=a[R+0],P=a[R+1],j=a[R+2],F=a[R+3],a[R+0]=g*A+p*P+y*j+d,a[R+1]=v*A+C*P+S*j+d,a[R+2]=w*A+T*P+N*j+d,a[R+3]=F};return ly.HSL=n,ly}var cy={},oP;function Kne(){if(oP)return cy;oP=1,Object.defineProperty(cy,"__esModule",{value:!0}),cy.HSV=void 0;const e=Mn(),t=Ma(),r=In(),n=function(s){const a=s.data,i=a.length,o=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=o*c*Math.cos(u*Math.PI/180),f=o*c*Math.sin(u*Math.PI/180),h=.299*o+.701*d+.167*f,g=.587*o-.587*d+.33*f,p=.114*o-.114*d-.497*f,y=.299*o-.299*d-.328*f,v=.587*o+.413*d+.035*f,C=.114*o-.114*d+.293*f,S=.299*o-.3*d+1.25*f,w=.587*o-.586*d-1.05*f,T=.114*o+.886*d-.2*f;for(let N=0;N<i;N+=4){const A=a[N+0],P=a[N+1],j=a[N+2],F=a[N+3];a[N+0]=h*A+g*P+p*j,a[N+1]=y*A+v*P+C*j,a[N+2]=S*A+w*P+T*j,a[N+3]=F}};return cy.HSV=n,e.Factory.addGetterSetter(t.Node,"hue",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"value",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),cy}var uy={},lP;function Yne(){if(lP)return uy;lP=1,Object.defineProperty(uy,"__esModule",{value:!0}),uy.Invert=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4)r[s]=255-r[s],r[s+1]=255-r[s+1],r[s+2]=255-r[s+2]};return uy.Invert=e,uy}var dy={},cP;function Xne(){if(cP)return dy;cP=1,Object.defineProperty(dy,"__esModule",{value:!0}),dy.Kaleidoscope=void 0;const e=Mn(),t=Ma(),r=xa(),n=In(),s=function(o,c,u){const d=o.data,f=c.data,h=o.width,g=o.height,p=u.polarCenterX||h/2,y=u.polarCenterY||g/2;let v=Math.sqrt(p*p+y*y),C=h-p,S=g-y;const w=Math.sqrt(C*C+S*S);v=w>v?w:v;const T=g,N=h,A=360/N*Math.PI/180;for(let P=0;P<N;P+=1){const j=Math.sin(P*A),F=Math.cos(P*A);for(let R=0;R<T;R+=1){C=Math.floor(p+v*R/T*F),S=Math.floor(y+v*R/T*j);let L=(S*h+C)*4;const V=d[L+0],Z=d[L+1],Y=d[L+2],re=d[L+3];L=(P+R*h)*4,f[L+0]=V,f[L+1]=Z,f[L+2]=Y,f[L+3]=re}}},a=function(o,c,u){const d=o.data,f=c.data,h=o.width,g=o.height,p=u.polarCenterX||h/2,y=u.polarCenterY||g/2;let v=Math.sqrt(p*p+y*y),C=h-p,S=g-y;const w=Math.sqrt(C*C+S*S);v=w>v?w:v;const T=g,N=h,A=0;let P,j;for(C=0;C<h;C+=1)for(S=0;S<g;S+=1){const F=C-p,R=S-y,L=Math.sqrt(F*F+R*R)*T/v;let V=(Math.atan2(R,F)*180/Math.PI+360+A)%360;V=V*N/360,P=Math.floor(V),j=Math.floor(L);let Z=(j*h+P)*4;const Y=d[Z+0],re=d[Z+1],ue=d[Z+2],z=d[Z+3];Z=(S*h+C)*4,f[Z+0]=Y,f[Z+1]=re,f[Z+2]=ue,f[Z+3]=z}},i=function(o){const c=o.width,u=o.height;let d,f,h,g,p,y,v,C,S,w,T=Math.round(this.kaleidoscopePower());const N=Math.round(this.kaleidoscopeAngle()),A=Math.floor(c*(N%360)/360);if(T<1)return;const P=r.Util.createCanvasElement();P.width=c,P.height=u;const j=P.getContext("2d").getImageData(0,0,c,u);r.Util.releaseCanvas(P),s(o,j,{polarCenterX:c/2,polarCenterY:u/2});let F=c/Math.pow(2,T);for(;F<=8;)F=F*2,T-=1;F=Math.ceil(F);let R=F,L=0,V=R,Z=1;for(A+F>c&&(L=R,V=0,Z=-1),f=0;f<u;f+=1)for(d=L;d!==V;d+=Z)h=Math.round(d+A)%c,S=(c*f+h)*4,p=j.data[S+0],y=j.data[S+1],v=j.data[S+2],C=j.data[S+3],w=(c*f+d)*4,j.data[w+0]=p,j.data[w+1]=y,j.data[w+2]=v,j.data[w+3]=C;for(f=0;f<u;f+=1)for(R=Math.floor(F),g=0;g<T;g+=1){for(d=0;d<R+1;d+=1)S=(c*f+d)*4,p=j.data[S+0],y=j.data[S+1],v=j.data[S+2],C=j.data[S+3],w=(c*f+R*2-d-1)*4,j.data[w+0]=p,j.data[w+1]=y,j.data[w+2]=v,j.data[w+3]=C;R*=2}a(j,o,{})};return dy.Kaleidoscope=i,e.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),dy}var fy={},uP;function Jne(){if(uP)return fy;uP=1,Object.defineProperty(fy,"__esModule",{value:!0}),fy.Mask=void 0;const e=Mn(),t=Ma(),r=In();function n(h,g,p){let y=(p*h.width+g)*4;const v=[];return v.push(h.data[y++],h.data[y++],h.data[y++],h.data[y++]),v}function s(h,g){return Math.sqrt(Math.pow(h[0]-g[0],2)+Math.pow(h[1]-g[1],2)+Math.pow(h[2]-g[2],2))}function a(h){const g=[0,0,0];for(let p=0;p<h.length;p++)g[0]+=h[p][0],g[1]+=h[p][1],g[2]+=h[p][2];return g[0]/=h.length,g[1]/=h.length,g[2]/=h.length,g}function i(h,g){const p=n(h,0,0),y=n(h,h.width-1,0),v=n(h,0,h.height-1),C=n(h,h.width-1,h.height-1),S=g||10;if(s(p,y)<S&&s(y,C)<S&&s(C,v)<S&&s(v,p)<S){const w=a([y,p,C,v]),T=[];for(let N=0;N<h.width*h.height;N++){const A=s(w,[h.data[N*4],h.data[N*4+1],h.data[N*4+2]]);T[N]=A<S?0:255}return T}}function o(h,g){for(let p=0;p<h.width*h.height;p++)h.data[4*p+3]=g[p]}function c(h,g,p){const y=[1,1,1,1,0,1,1,1,1],v=Math.round(Math.sqrt(y.length)),C=Math.floor(v/2),S=[];for(let w=0;w<p;w++)for(let T=0;T<g;T++){const N=w*g+T;let A=0;for(let P=0;P<v;P++)for(let j=0;j<v;j++){const F=w+P-C,R=T+j-C;if(F>=0&&F<p&&R>=0&&R<g){const L=F*g+R,V=y[P*v+j];A+=h[L]*V}}S[N]=A===2040?255:0}return S}function u(h,g,p){const y=[1,1,1,1,1,1,1,1,1],v=Math.round(Math.sqrt(y.length)),C=Math.floor(v/2),S=[];for(let w=0;w<p;w++)for(let T=0;T<g;T++){const N=w*g+T;let A=0;for(let P=0;P<v;P++)for(let j=0;j<v;j++){const F=w+P-C,R=T+j-C;if(F>=0&&F<p&&R>=0&&R<g){const L=F*g+R,V=y[P*v+j];A+=h[L]*V}}S[N]=A>=1020?255:0}return S}function d(h,g,p){const y=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],v=Math.round(Math.sqrt(y.length)),C=Math.floor(v/2),S=[];for(let w=0;w<p;w++)for(let T=0;T<g;T++){const N=w*g+T;let A=0;for(let P=0;P<v;P++)for(let j=0;j<v;j++){const F=w+P-C,R=T+j-C;if(F>=0&&F<p&&R>=0&&R<g){const L=F*g+R,V=y[P*v+j];A+=h[L]*V}}S[N]=A}return S}const f=function(h){const g=this.threshold();let p=i(h,g);return p&&(p=c(p,h.width,h.height),p=u(p,h.width,h.height),p=d(p,h.width,h.height),o(h,p)),h};return fy.Mask=f,e.Factory.addGetterSetter(t.Node,"threshold",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),fy}var hy={},dP;function Qne(){if(dP)return hy;dP=1,Object.defineProperty(hy,"__esModule",{value:!0}),hy.Noise=void 0;const e=Mn(),t=Ma(),r=In(),n=function(s){const a=this.noise()*255,i=s.data,o=i.length,c=a/2;for(let u=0;u<o;u+=4)i[u+0]+=c-2*c*Math.random(),i[u+1]+=c-2*c*Math.random(),i[u+2]+=c-2*c*Math.random()};return hy.Noise=n,e.Factory.addGetterSetter(t.Node,"noise",.2,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),hy}var my={},fP;function Zne(){if(fP)return my;fP=1,Object.defineProperty(my,"__esModule",{value:!0}),my.Pixelate=void 0;const e=Mn(),t=xa(),r=Ma(),n=In(),s=function(a){let i=Math.ceil(this.pixelSize()),o=a.width,c=a.height,u=Math.ceil(o/i),d=Math.ceil(c/i),f=a.data;if(i<=0){t.Util.error("pixelSize value can not be <= 0");return}for(let h=0;h<u;h+=1)for(let g=0;g<d;g+=1){let p=0,y=0,v=0,C=0;const S=h*i,w=S+i,T=g*i,N=T+i;let A=0;for(let P=S;P<w;P+=1)if(!(P>=o))for(let j=T;j<N;j+=1){if(j>=c)continue;const F=(o*j+P)*4;p+=f[F+0],y+=f[F+1],v+=f[F+2],C+=f[F+3],A+=1}p=p/A,y=y/A,v=v/A,C=C/A;for(let P=S;P<w;P+=1)if(!(P>=o))for(let j=T;j<N;j+=1){if(j>=c)continue;const F=(o*j+P)*4;f[F+0]=p,f[F+1]=y,f[F+2]=v,f[F+3]=C}}};return my.Pixelate=s,e.Factory.addGetterSetter(r.Node,"pixelSize",8,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),my}var gy={},hP;function ese(){if(hP)return gy;hP=1,Object.defineProperty(gy,"__esModule",{value:!0}),gy.Posterize=void 0;const e=Mn(),t=Ma(),r=In(),n=function(s){const a=Math.round(this.levels()*254)+1,i=s.data,o=i.length,c=255/a;for(let u=0;u<o;u+=1)i[u]=Math.floor(i[u]/c)*c};return gy.Posterize=n,e.Factory.addGetterSetter(t.Node,"levels",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),gy}var py={},mP;function tse(){if(mP)return py;mP=1,Object.defineProperty(py,"__esModule",{value:!0}),py.RGB=void 0;const e=Mn(),t=Ma(),r=In(),n=function(s){const a=s.data,i=a.length,o=this.red(),c=this.green(),u=this.blue();for(let d=0;d<i;d+=4){const f=(.34*a[d]+.5*a[d+1]+.16*a[d+2])/255;a[d]=f*o,a[d+1]=f*c,a[d+2]=f*u,a[d+3]=a[d+3]}};return py.RGB=n,e.Factory.addGetterSetter(t.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"blue",0,r.RGBComponent,e.Factory.afterSetFilter),py}var xy={},gP;function rse(){if(gP)return xy;gP=1,Object.defineProperty(xy,"__esModule",{value:!0}),xy.RGBA=void 0;const e=Mn(),t=Ma(),r=In(),n=function(s){const a=s.data,i=a.length,o=this.red(),c=this.green(),u=this.blue(),d=this.alpha();for(let f=0;f<i;f+=4){const h=1-d;a[f]=o*d+a[f]*h,a[f+1]=c*d+a[f+1]*h,a[f+2]=u*d+a[f+2]*h}};return xy.RGBA=n,e.Factory.addGetterSetter(t.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"blue",0,r.RGBComponent,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"alpha",1,function(s){return this._filterUpToDate=!1,s>1?1:s<0?0:s}),xy}var yy={},pP;function nse(){if(pP)return yy;pP=1,Object.defineProperty(yy,"__esModule",{value:!0}),yy.Sepia=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4){const a=r[s+0],i=r[s+1],o=r[s+2];r[s+0]=Math.min(255,a*.393+i*.769+o*.189),r[s+1]=Math.min(255,a*.349+i*.686+o*.168),r[s+2]=Math.min(255,a*.272+i*.534+o*.131)}};return yy.Sepia=e,yy}var vy={},xP;function sse(){if(xP)return vy;xP=1,Object.defineProperty(vy,"__esModule",{value:!0}),vy.Solarize=void 0;const e=function(t){const r=t.data,n=t.width,s=t.height,a=n*4;let i=s;do{const o=(i-1)*a;let c=n;do{const u=o+(c-1)*4;let d=r[u],f=r[u+1],h=r[u+2];d>127&&(d=255-d),f>127&&(f=255-f),h>127&&(h=255-h),r[u]=d,r[u+1]=f,r[u+2]=h}while(--c)}while(--i)};return vy.Solarize=e,vy}var by={},yP;function ase(){if(yP)return by;yP=1,Object.defineProperty(by,"__esModule",{value:!0}),by.Threshold=void 0;const e=Mn(),t=Ma(),r=In(),n=function(s){const a=this.threshold()*255,i=s.data,o=i.length;for(let c=0;c<o;c+=1)i[c]=i[c]<a?0:255};return by.Threshold=n,e.Factory.addGetterSetter(t.Node,"threshold",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),by}var vP;function ise(){if(vP)return Ox;vP=1,Object.defineProperty(Ox,"__esModule",{value:!0}),Ox.Konva=void 0;const e=t8(),t=Ene(),r=Ane(),n=jne(),s=Pne(),a=Fne(),i=Mne(),o=tU(),c=BT(),u=rU(),d=One(),f=Dne(),h=Rne(),g=Ine(),p=nU(),y=Lne(),v=Bne(),C=$ne(),S=Une(),w=zne(),T=Wne(),N=Hne(),A=Gne(),P=Vne(),j=qne(),F=Kne(),R=Yne(),L=Xne(),V=Jne(),Z=Qne(),Y=Zne(),re=ese(),ue=tse(),z=rse(),X=nse(),I=sse(),B=ase();return Ox.Konva=e.Konva.Util._assign(e.Konva,{Arc:t.Arc,Arrow:r.Arrow,Circle:n.Circle,Ellipse:s.Ellipse,Image:a.Image,Label:i.Label,Tag:i.Tag,Line:o.Line,Path:c.Path,Rect:u.Rect,RegularPolygon:d.RegularPolygon,Ring:f.Ring,Sprite:h.Sprite,Star:g.Star,Text:p.Text,TextPath:y.TextPath,Transformer:v.Transformer,Wedge:C.Wedge,Filters:{Blur:S.Blur,Brighten:w.Brighten,Contrast:T.Contrast,Emboss:N.Emboss,Enhance:A.Enhance,Grayscale:P.Grayscale,HSL:j.HSL,HSV:F.HSV,Invert:R.Invert,Kaleidoscope:L.Kaleidoscope,Mask:V.Mask,Noise:Z.Noise,Pixelate:Y.Pixelate,Posterize:re.Posterize,RGB:ue.RGB,RGBA:z.RGBA,Sepia:X.Sepia,Solarize:I.Solarize,Threshold:B.Threshold}}),Ox}var ose=Kw.exports,bP;function lse(){if(bP)return Kw.exports;bP=1,Object.defineProperty(ose,"__esModule",{value:!0});const e=ise();return Kw.exports=e.Konva,Kw.exports}var sU=lse();const cse=Fc(sU),use=nB({__proto__:null,default:cse},[sU]);var Yb={exports:{}},wP;function dse(){return wP||(wP=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var r=t8();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return r.Konva}});const n=t8();e.exports=n.Konva})(Yb,Yb.exports)),Yb.exports}var fse=dse();const wv=Fc(fse);var r5={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n5,_P;function hse(){return _P||(_P=1,n5=function(t){var r={},n=Ym(),s=qC(),a=Object.assign;function i(b){for(var k="https://reactjs.org/docs/error-decoder.html?invariant="+b,M=1;M<arguments.length;M++)k+="&args[]="+encodeURIComponent(arguments[M]);return"Minified React error #"+b+"; visit "+k+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),p=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),N=Symbol.iterator;function A(b){return b===null||typeof b!="object"?null:(b=N&&b[N]||b["@@iterator"],typeof b=="function"?b:null)}function P(b){if(b==null)return null;if(typeof b=="function")return b.displayName||b.name||null;if(typeof b=="string")return b;switch(b){case d:return"Fragment";case u:return"Portal";case h:return"Profiler";case f:return"StrictMode";case v:return"Suspense";case C:return"SuspenseList"}if(typeof b=="object")switch(b.$$typeof){case p:return(b.displayName||"Context")+".Consumer";case g:return(b._context.displayName||"Context")+".Provider";case y:var k=b.render;return b=b.displayName,b||(b=k.displayName||k.name||"",b=b!==""?"ForwardRef("+b+")":"ForwardRef"),b;case S:return k=b.displayName||null,k!==null?k:P(b.type)||"Memo";case w:k=b._payload,b=b._init;try{return P(b(k))}catch{}}return null}function j(b){var k=b.type;switch(b.tag){case 24:return"Cache";case 9:return(k.displayName||"Context")+".Consumer";case 10:return(k._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return b=k.render,b=b.displayName||b.name||"",k.displayName||(b!==""?"ForwardRef("+b+")":"ForwardRef");case 7:return"Fragment";case 5:return k;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(k);case 8:return k===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof k=="function")return k.displayName||k.name||null;if(typeof k=="string")return k}return null}function F(b){var k=b,M=b;if(b.alternate)for(;k.return;)k=k.return;else{b=k;do k=b,(k.flags&4098)!==0&&(M=k.return),b=k.return;while(b)}return k.tag===3?M:null}function R(b){if(F(b)!==b)throw Error(i(188))}function L(b){var k=b.alternate;if(!k){if(k=F(b),k===null)throw Error(i(188));return k!==b?null:b}for(var M=b,G=k;;){var J=M.return;if(J===null)break;var oe=J.alternate;if(oe===null){if(G=J.return,G!==null){M=G;continue}break}if(J.child===oe.child){for(oe=J.child;oe;){if(oe===M)return R(J),b;if(oe===G)return R(J),k;oe=oe.sibling}throw Error(i(188))}if(M.return!==G.return)M=J,G=oe;else{for(var Ae=!1,st=J.child;st;){if(st===M){Ae=!0,M=J,G=oe;break}if(st===G){Ae=!0,G=J,M=oe;break}st=st.sibling}if(!Ae){for(st=oe.child;st;){if(st===M){Ae=!0,M=oe,G=J;break}if(st===G){Ae=!0,G=oe,M=J;break}st=st.sibling}if(!Ae)throw Error(i(189))}}if(M.alternate!==G)throw Error(i(190))}if(M.tag!==3)throw Error(i(188));return M.stateNode.current===M?b:k}function V(b){return b=L(b),b!==null?Z(b):null}function Z(b){if(b.tag===5||b.tag===6)return b;for(b=b.child;b!==null;){var k=Z(b);if(k!==null)return k;b=b.sibling}return null}function Y(b){if(b.tag===5||b.tag===6)return b;for(b=b.child;b!==null;){if(b.tag!==4){var k=Y(b);if(k!==null)return k}b=b.sibling}return null}var re=Array.isArray,ue=t.getPublicInstance,z=t.getRootHostContext,X=t.getChildHostContext,I=t.prepareForCommit,B=t.resetAfterCommit,W=t.createInstance,D=t.appendInitialChild,U=t.finalizeInitialChildren,q=t.prepareUpdate,H=t.shouldSetTextContent,te=t.createTextInstance,Q=t.scheduleTimeout,ae=t.cancelTimeout,ce=t.noTimeout,me=t.isPrimaryRenderer,xe=t.supportsMutation,se=t.supportsPersistence,De=t.supportsHydration,He=t.getInstanceFromNode,rt=t.preparePortalMount,_t=t.getCurrentEventPriority,Ke=t.detachDeletedInstance,tt=t.supportsMicrotasks,Pe=t.scheduleMicrotask,je=t.supportsTestSelectors,Qe=t.findFiberRoot,vt=t.getBoundingRect,Ot=t.getTextContent,$t=t.isHiddenSubtree,Gt=t.matchAccessibilityRole,ir=t.setFocusIfFocusable,dt=t.setupIntersectionObserver,gt=t.appendChild,kt=t.appendChildToContainer,Ge=t.commitTextUpdate,Xe=t.commitMount,Et=t.commitUpdate,Ut=t.insertBefore,Wt=t.insertInContainerBefore,pr=t.removeChild,wr=t.removeChildFromContainer,br=t.resetTextContent,lr=t.hideInstance,Er=t.hideTextInstance,we=t.unhideInstance,_e=t.unhideTextInstance,Ee=t.clearContainer,Fe=t.cloneInstance,at=t.createContainerChildSet,jt=t.appendChildToContainerChildSet,Mt=t.finalizeContainerChildren,Be=t.replaceContainerChildren,lt=t.cloneHiddenInstance,ct=t.cloneHiddenTextInstance,Qt=t.canHydrateInstance,rr=t.canHydrateTextInstance,_r=t.canHydrateSuspenseInstance,tn=t.isSuspenseInstancePending,Fr=t.isSuspenseInstanceFallback,an=t.getSuspenseInstanceFallbackErrorDetails,pe=t.registerSuspenseInstanceRetry,Ne=t.getNextHydratableSibling,le=t.getFirstHydratableChild,fe=t.getFirstHydratableChildWithinContainer,ge=t.getFirstHydratableChildWithinSuspenseInstance,Se=t.hydrateInstance,ze=t.hydrateTextInstance,it=t.hydrateSuspenseInstance,Ye=t.getNextHydratableInstanceAfterSuspenseInstance,de=t.commitHydratedContainer,ve=t.commitHydratedSuspenseInstance,Me=t.clearSuspenseBoundary,Oe=t.clearSuspenseBoundaryFromContainer,nt=t.shouldDeleteUnhydratedTailInstances,bt=t.didNotMatchHydratedContainerTextInstance,At=t.didNotMatchHydratedTextInstance,cr;function pt(b){if(cr===void 0)try{throw Error()}catch(M){var k=M.stack.trim().match(/\n( *(at )?)/);cr=k&&k[1]||""}return`
`+cr+b}var zt=!1;function xr(b,k){if(!b||zt)return"";zt=!0;var M=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(k)if(k=function(){throw Error()},Object.defineProperty(k.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(k,[])}catch(ar){var G=ar}Reflect.construct(b,[],k)}else{try{k.call()}catch(ar){G=ar}b.call(k.prototype)}else{try{throw Error()}catch(ar){G=ar}b()}}catch(ar){if(ar&&G&&typeof ar.stack=="string"){for(var J=ar.stack.split(`
`),oe=G.stack.split(`
`),Ae=J.length-1,st=oe.length-1;1<=Ae&&0<=st&&J[Ae]!==oe[st];)st--;for(;1<=Ae&&0<=st;Ae--,st--)if(J[Ae]!==oe[st]){if(Ae!==1||st!==1)do if(Ae--,st--,0>st||J[Ae]!==oe[st]){var Ct=`
`+J[Ae].replace(" at new "," at ");return b.displayName&&Ct.includes("<anonymous>")&&(Ct=Ct.replace("<anonymous>",b.displayName)),Ct}while(1<=Ae&&0<=st);break}}}finally{zt=!1,Error.prepareStackTrace=M}return(b=b?b.displayName||b.name:"")?pt(b):""}var Ir=Object.prototype.hasOwnProperty,$r=[],mn=-1;function Gr(b){return{current:b}}function zr(b){0>mn||(b.current=$r[mn],$r[mn]=null,mn--)}function Xt(b,k){mn++,$r[mn]=b.current,b.current=k}var xn={},Lr=Gr(xn),jn=Gr(!1),Ln=xn;function ya(b,k){var M=b.type.contextTypes;if(!M)return xn;var G=b.stateNode;if(G&&G.__reactInternalMemoizedUnmaskedChildContext===k)return G.__reactInternalMemoizedMaskedChildContext;var J={},oe;for(oe in M)J[oe]=k[oe];return G&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=k,b.__reactInternalMemoizedMaskedChildContext=J),J}function On(b){return b=b.childContextTypes,b!=null}function Te(){zr(jn),zr(Lr)}function Tt(b,k,M){if(Lr.current!==xn)throw Error(i(168));Xt(Lr,k),Xt(jn,M)}function Sr(b,k,M){var G=b.stateNode;if(k=k.childContextTypes,typeof G.getChildContext!="function")return M;G=G.getChildContext();for(var J in G)if(!(J in k))throw Error(i(108,j(b)||"Unknown",J));return a({},M,G)}function Dr(b){return b=(b=b.stateNode)&&b.__reactInternalMemoizedMergedChildContext||xn,Ln=Lr.current,Xt(Lr,b),Xt(jn,jn.current),!0}function Yn(b,k,M){var G=b.stateNode;if(!G)throw Error(i(169));M?(b=Sr(b,k,Ln),G.__reactInternalMemoizedMergedChildContext=b,zr(jn),zr(Lr),Xt(Lr,b)):zr(jn),Xt(jn,M)}var Pn=Math.clz32?Math.clz32:fi,us=Math.log,qs=Math.LN2;function fi(b){return b>>>=0,b===0?32:31-(us(b)/qs|0)|0}var dn=64,vl=4194304;function $e(b){switch(b&-b){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return b&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return b}}function Pt(b,k){var M=b.pendingLanes;if(M===0)return 0;var G=0,J=b.suspendedLanes,oe=b.pingedLanes,Ae=M&268435455;if(Ae!==0){var st=Ae&~J;st!==0?G=$e(st):(oe&=Ae,oe!==0&&(G=$e(oe)))}else Ae=M&~J,Ae!==0?G=$e(Ae):oe!==0&&(G=$e(oe));if(G===0)return 0;if(k!==0&&k!==G&&(k&J)===0&&(J=G&-G,oe=k&-k,J>=oe||J===16&&(oe&4194240)!==0))return k;if((G&4)!==0&&(G|=M&16),k=b.entangledLanes,k!==0)for(b=b.entanglements,k&=G;0<k;)M=31-Pn(k),J=1<<M,G|=b[M],k&=~J;return G}function Re(b,k){switch(b){case 1:case 2:case 4:return k+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return k+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qe(b,k){for(var M=b.suspendedLanes,G=b.pingedLanes,J=b.expirationTimes,oe=b.pendingLanes;0<oe;){var Ae=31-Pn(oe),st=1<<Ae,Ct=J[Ae];Ct===-1?((st&M)===0||(st&G)!==0)&&(J[Ae]=Re(st,k)):Ct<=k&&(b.expiredLanes|=st),oe&=~st}}function Lt(b){return b=b.pendingLanes&-1073741825,b!==0?b:b&1073741824?1073741824:0}function yt(){var b=dn;return dn<<=1,(dn&4194240)===0&&(dn=64),b}function yr(b){for(var k=[],M=0;31>M;M++)k.push(b);return k}function Nt(b,k,M){b.pendingLanes|=k,k!==536870912&&(b.suspendedLanes=0,b.pingedLanes=0),b=b.eventTimes,k=31-Pn(k),b[k]=M}function Vr(b,k){var M=b.pendingLanes&~k;b.pendingLanes=k,b.suspendedLanes=0,b.pingedLanes=0,b.expiredLanes&=k,b.mutableReadLanes&=k,b.entangledLanes&=k,k=b.entanglements;var G=b.eventTimes;for(b=b.expirationTimes;0<M;){var J=31-Pn(M),oe=1<<J;k[J]=0,G[J]=-1,b[J]=-1,M&=~oe}}function Dn(b,k){var M=b.entangledLanes|=k;for(b=b.entanglements;M;){var G=31-Pn(M),J=1<<G;J&k|b[G]&k&&(b[G]|=k),M&=~J}}var We=0;function fr(b){return b&=-b,1<b?4<b?(b&268435455)!==0?16:536870912:4:1}var sr=s.unstable_scheduleCallback,xs=s.unstable_cancelCallback,yn=s.unstable_shouldYield,on=s.unstable_requestPaint,vn=s.unstable_now,kn=s.unstable_ImmediatePriority,Kl=s.unstable_UserBlockingPriority,Fi=s.unstable_NormalPriority,gh=s.unstable_IdlePriority,pu=null,no=null;function D0(b){if(no&&typeof no.onCommitFiberRoot=="function")try{no.onCommitFiberRoot(pu,b,void 0,(b.current.flags&128)===128)}catch{}}function dg(b,k){return b===k&&(b!==0||1/b===1/k)||b!==b&&k!==k}var bl=typeof Object.is=="function"?Object.is:dg,Ic=null,R0=!1,I0=!1;function fg(b){Ic===null?Ic=[b]:Ic.push(b)}function K2(b){R0=!0,fg(b)}function Ya(){if(!I0&&Ic!==null){I0=!0;var b=0,k=We;try{var M=Ic;for(We=1;b<M.length;b++){var G=M[b];do G=G(!0);while(G!==null)}Ic=null,R0=!1}catch(J){throw Ic!==null&&(Ic=Ic.slice(b+1)),sr(kn,Ya),J}finally{We=k,I0=!1}}return null}var xu=[],Lc=0,ph=null,dd=0,Mi=[],Co=0,va=null,so=1,wl="";function _l(b,k){xu[Lc++]=dd,xu[Lc++]=ph,ph=b,dd=k}function Y2(b,k,M){Mi[Co++]=so,Mi[Co++]=wl,Mi[Co++]=va,va=b;var G=so;b=wl;var J=32-Pn(G)-1;G&=~(1<<J),M+=1;var oe=32-Pn(k)+J;if(30<oe){var Ae=J-J%5;oe=(G&(1<<Ae)-1).toString(32),G>>=Ae,J-=Ae,so=1<<32-Pn(k)+J|M<<J|G,wl=oe+b}else so=1<<oe|M<<J|G,wl=b}function xh(b){b.return!==null&&(_l(b,1),Y2(b,1,0))}function yh(b){for(;b===ph;)ph=xu[--Lc],xu[Lc]=null,dd=xu[--Lc],xu[Lc]=null;for(;b===va;)va=Mi[--Co],Mi[Co]=null,wl=Mi[--Co],Mi[Co]=null,so=Mi[--Co],Mi[Co]=null}var Xa=null,Oi=null,ys=!1,vh=!1,Sl=null;function X2(b,k){var M=Do(5,null,null,0);M.elementType="DELETED",M.stateNode=k,M.return=b,k=b.deletions,k===null?(b.deletions=[M],b.flags|=16):k.push(M)}function hg(b,k){switch(b.tag){case 5:return k=Qt(k,b.type,b.pendingProps),k!==null?(b.stateNode=k,Xa=b,Oi=le(k),!0):!1;case 6:return k=rr(k,b.pendingProps),k!==null?(b.stateNode=k,Xa=b,Oi=null,!0):!1;case 13:if(k=_r(k),k!==null){var M=va!==null?{id:so,overflow:wl}:null;return b.memoizedState={dehydrated:k,treeContext:M,retryLane:1073741824},M=Do(18,null,null,0),M.stateNode=k,M.return=b,b.child=M,Xa=b,Oi=null,!0}return!1;default:return!1}}function z1(b){return(b.mode&1)!==0&&(b.flags&128)===0}function W1(b){if(ys){var k=Oi;if(k){var M=k;if(!hg(b,k)){if(z1(b))throw Error(i(418));k=Ne(M);var G=Xa;k&&hg(b,k)?X2(G,M):(b.flags=b.flags&-4097|2,ys=!1,Xa=b)}}else{if(z1(b))throw Error(i(418));b.flags=b.flags&-4097|2,ys=!1,Xa=b}}}function J2(b){for(b=b.return;b!==null&&b.tag!==5&&b.tag!==3&&b.tag!==13;)b=b.return;Xa=b}function mg(b){if(!De||b!==Xa)return!1;if(!ys)return J2(b),ys=!0,!1;if(b.tag!==3&&(b.tag!==5||nt(b.type)&&!H(b.type,b.memoizedProps))){var k=Oi;if(k){if(z1(b))throw Q2(),Error(i(418));for(;k;)X2(b,k),k=Ne(k)}}if(J2(b),b.tag===13){if(!De)throw Error(i(316));if(b=b.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(i(317));Oi=Ye(b)}else Oi=Xa?Ne(b.stateNode):null;return!0}function Q2(){for(var b=Oi;b;)b=Ne(b)}function fd(){De&&(Oi=Xa=null,vh=ys=!1)}function H1(b){Sl===null?Sl=[b]:Sl.push(b)}var JS=o.ReactCurrentBatchConfig;function gg(b,k){if(bl(b,k))return!0;if(typeof b!="object"||b===null||typeof k!="object"||k===null)return!1;var M=Object.keys(b),G=Object.keys(k);if(M.length!==G.length)return!1;for(G=0;G<M.length;G++){var J=M[G];if(!Ir.call(k,J)||!bl(b[J],k[J]))return!1}return!0}function QS(b){switch(b.tag){case 5:return pt(b.type);case 16:return pt("Lazy");case 13:return pt("Suspense");case 19:return pt("SuspenseList");case 0:case 2:case 15:return b=xr(b.type,!1),b;case 11:return b=xr(b.type.render,!1),b;case 1:return b=xr(b.type,!0),b;default:return""}}function hd(b,k,M){if(b=M.ref,b!==null&&typeof b!="function"&&typeof b!="object"){if(M._owner){if(M=M._owner,M){if(M.tag!==1)throw Error(i(309));var G=M.stateNode}if(!G)throw Error(i(147,b));var J=G,oe=""+b;return k!==null&&k.ref!==null&&typeof k.ref=="function"&&k.ref._stringRef===oe?k.ref:(k=function(Ae){var st=J.refs;Ae===null?delete st[oe]:st[oe]=Ae},k._stringRef=oe,k)}if(typeof b!="string")throw Error(i(284));if(!M._owner)throw Error(i(290,b))}return b}function pg(b,k){throw b=Object.prototype.toString.call(k),Error(i(31,b==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":b))}function Z2(b){var k=b._init;return k(b._payload)}function eb(b){function k(wt,ut){if(b){var Ft=wt.deletions;Ft===null?(wt.deletions=[ut],wt.flags|=16):Ft.push(ut)}}function M(wt,ut){if(!b)return null;for(;ut!==null;)k(wt,ut),ut=ut.sibling;return null}function G(wt,ut){for(wt=new Map;ut!==null;)ut.key!==null?wt.set(ut.key,ut):wt.set(ut.index,ut),ut=ut.sibling;return wt}function J(wt,ut){return wt=Du(wt,ut),wt.index=0,wt.sibling=null,wt}function oe(wt,ut,Ft){return wt.index=Ft,b?(Ft=wt.alternate,Ft!==null?(Ft=Ft.index,Ft<ut?(wt.flags|=2,ut):Ft):(wt.flags|=2,ut)):(wt.flags|=1048576,ut)}function Ae(wt){return b&&wt.alternate===null&&(wt.flags|=2),wt}function st(wt,ut,Ft,Cr){return ut===null||ut.tag!==6?(ut=cf(Ft,wt.mode,Cr),ut.return=wt,ut):(ut=J(ut,Ft),ut.return=wt,ut)}function Ct(wt,ut,Ft,Cr){var Wr=Ft.type;return Wr===d?Pr(wt,ut,Ft.props.children,Cr,Ft.key):ut!==null&&(ut.elementType===Wr||typeof Wr=="object"&&Wr!==null&&Wr.$$typeof===w&&Z2(Wr)===ut.type)?(Cr=J(ut,Ft.props),Cr.ref=hd(wt,ut,Ft),Cr.return=wt,Cr):(Cr=Kg(Ft.type,Ft.key,Ft.props,null,wt.mode,Cr),Cr.ref=hd(wt,ut,Ft),Cr.return=wt,Cr)}function ar(wt,ut,Ft,Cr){return ut===null||ut.tag!==4||ut.stateNode.containerInfo!==Ft.containerInfo||ut.stateNode.implementation!==Ft.implementation?(ut=Yg(Ft,wt.mode,Cr),ut.return=wt,ut):(ut=J(ut,Ft.children||[]),ut.return=wt,ut)}function Pr(wt,ut,Ft,Cr,Wr){return ut===null||ut.tag!==7?(ut=Za(Ft,wt.mode,Cr,Wr),ut.return=wt,ut):(ut=J(ut,Ft),ut.return=wt,ut)}function fn(wt,ut,Ft){if(typeof ut=="string"&&ut!==""||typeof ut=="number")return ut=cf(""+ut,wt.mode,Ft),ut.return=wt,ut;if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case c:return Ft=Kg(ut.type,ut.key,ut.props,null,wt.mode,Ft),Ft.ref=hd(wt,null,ut),Ft.return=wt,Ft;case u:return ut=Yg(ut,wt.mode,Ft),ut.return=wt,ut;case w:var Cr=ut._init;return fn(wt,Cr(ut._payload),Ft)}if(re(ut)||A(ut))return ut=Za(ut,wt.mode,Ft,null),ut.return=wt,ut;pg(wt,ut)}return null}function kr(wt,ut,Ft,Cr){var Wr=ut!==null?ut.key:null;if(typeof Ft=="string"&&Ft!==""||typeof Ft=="number")return Wr!==null?null:st(wt,ut,""+Ft,Cr);if(typeof Ft=="object"&&Ft!==null){switch(Ft.$$typeof){case c:return Ft.key===Wr?Ct(wt,ut,Ft,Cr):null;case u:return Ft.key===Wr?ar(wt,ut,Ft,Cr):null;case w:return Wr=Ft._init,kr(wt,ut,Wr(Ft._payload),Cr)}if(re(Ft)||A(Ft))return Wr!==null?null:Pr(wt,ut,Ft,Cr,null);pg(wt,Ft)}return null}function ms(wt,ut,Ft,Cr,Wr){if(typeof Cr=="string"&&Cr!==""||typeof Cr=="number")return wt=wt.get(Ft)||null,st(ut,wt,""+Cr,Wr);if(typeof Cr=="object"&&Cr!==null){switch(Cr.$$typeof){case c:return wt=wt.get(Cr.key===null?Ft:Cr.key)||null,Ct(ut,wt,Cr,Wr);case u:return wt=wt.get(Cr.key===null?Ft:Cr.key)||null,ar(ut,wt,Cr,Wr);case w:var bn=Cr._init;return ms(wt,ut,Ft,bn(Cr._payload),Wr)}if(re(Cr)||A(Cr))return wt=wt.get(Ft)||null,Pr(ut,wt,Cr,Wr,null);pg(ut,Cr)}return null}function Jn(wt,ut,Ft,Cr){for(var Wr=null,bn=null,hn=ut,Rn=ut=0,ka=null;hn!==null&&Rn<Ft.length;Rn++){hn.index>Rn?(ka=hn,hn=null):ka=hn.sibling;var Fn=kr(wt,hn,Ft[Rn],Cr);if(Fn===null){hn===null&&(hn=ka);break}b&&hn&&Fn.alternate===null&&k(wt,hn),ut=oe(Fn,ut,Rn),bn===null?Wr=Fn:bn.sibling=Fn,bn=Fn,hn=ka}if(Rn===Ft.length)return M(wt,hn),ys&&_l(wt,Rn),Wr;if(hn===null){for(;Rn<Ft.length;Rn++)hn=fn(wt,Ft[Rn],Cr),hn!==null&&(ut=oe(hn,ut,Rn),bn===null?Wr=hn:bn.sibling=hn,bn=hn);return ys&&_l(wt,Rn),Wr}for(hn=G(wt,hn);Rn<Ft.length;Rn++)ka=ms(hn,wt,Rn,Ft[Rn],Cr),ka!==null&&(b&&ka.alternate!==null&&hn.delete(ka.key===null?Rn:ka.key),ut=oe(ka,ut,Rn),bn===null?Wr=ka:bn.sibling=ka,bn=ka);return b&&hn.forEach(function(yi){return k(wt,yi)}),ys&&_l(wt,Rn),Wr}function $i(wt,ut,Ft,Cr){var Wr=A(Ft);if(typeof Wr!="function")throw Error(i(150));if(Ft=Wr.call(Ft),Ft==null)throw Error(i(151));for(var bn=Wr=null,hn=ut,Rn=ut=0,ka=null,Fn=Ft.next();hn!==null&&!Fn.done;Rn++,Fn=Ft.next()){hn.index>Rn?(ka=hn,hn=null):ka=hn.sibling;var yi=kr(wt,hn,Fn.value,Cr);if(yi===null){hn===null&&(hn=ka);break}b&&hn&&yi.alternate===null&&k(wt,hn),ut=oe(yi,ut,Rn),bn===null?Wr=yi:bn.sibling=yi,bn=yi,hn=ka}if(Fn.done)return M(wt,hn),ys&&_l(wt,Rn),Wr;if(hn===null){for(;!Fn.done;Rn++,Fn=Ft.next())Fn=fn(wt,Fn.value,Cr),Fn!==null&&(ut=oe(Fn,ut,Rn),bn===null?Wr=Fn:bn.sibling=Fn,bn=Fn);return ys&&_l(wt,Rn),Wr}for(hn=G(wt,hn);!Fn.done;Rn++,Fn=Ft.next())Fn=ms(hn,wt,Rn,Fn.value,Cr),Fn!==null&&(b&&Fn.alternate!==null&&hn.delete(Fn.key===null?Rn:Fn.key),ut=oe(Fn,ut,Rn),bn===null?Wr=Fn:bn.sibling=Fn,bn=Fn);return b&&hn.forEach(function(n3){return k(wt,n3)}),ys&&_l(wt,Rn),Wr}function nc(wt,ut,Ft,Cr){if(typeof Ft=="object"&&Ft!==null&&Ft.type===d&&Ft.key===null&&(Ft=Ft.props.children),typeof Ft=="object"&&Ft!==null){switch(Ft.$$typeof){case c:e:{for(var Wr=Ft.key,bn=ut;bn!==null;){if(bn.key===Wr){if(Wr=Ft.type,Wr===d){if(bn.tag===7){M(wt,bn.sibling),ut=J(bn,Ft.props.children),ut.return=wt,wt=ut;break e}}else if(bn.elementType===Wr||typeof Wr=="object"&&Wr!==null&&Wr.$$typeof===w&&Z2(Wr)===bn.type){M(wt,bn.sibling),ut=J(bn,Ft.props),ut.ref=hd(wt,bn,Ft),ut.return=wt,wt=ut;break e}M(wt,bn);break}else k(wt,bn);bn=bn.sibling}Ft.type===d?(ut=Za(Ft.props.children,wt.mode,Cr,Ft.key),ut.return=wt,wt=ut):(Cr=Kg(Ft.type,Ft.key,Ft.props,null,wt.mode,Cr),Cr.ref=hd(wt,ut,Ft),Cr.return=wt,wt=Cr)}return Ae(wt);case u:e:{for(bn=Ft.key;ut!==null;){if(ut.key===bn)if(ut.tag===4&&ut.stateNode.containerInfo===Ft.containerInfo&&ut.stateNode.implementation===Ft.implementation){M(wt,ut.sibling),ut=J(ut,Ft.children||[]),ut.return=wt,wt=ut;break e}else{M(wt,ut);break}else k(wt,ut);ut=ut.sibling}ut=Yg(Ft,wt.mode,Cr),ut.return=wt,wt=ut}return Ae(wt);case w:return bn=Ft._init,nc(wt,ut,bn(Ft._payload),Cr)}if(re(Ft))return Jn(wt,ut,Ft,Cr);if(A(Ft))return $i(wt,ut,Ft,Cr);pg(wt,Ft)}return typeof Ft=="string"&&Ft!==""||typeof Ft=="number"?(Ft=""+Ft,ut!==null&&ut.tag===6?(M(wt,ut.sibling),ut=J(ut,Ft),ut.return=wt,wt=ut):(M(wt,ut),ut=cf(Ft,wt.mode,Cr),ut.return=wt,wt=ut),Ae(wt)):M(wt,ut)}return nc}var md=eb(!0),tb=eb(!1),xg=Gr(null),yg=null,L0=null,G1=null;function V1(){G1=L0=yg=null}function rb(b,k,M){me?(Xt(xg,k._currentValue),k._currentValue=M):(Xt(xg,k._currentValue2),k._currentValue2=M)}function bh(b){var k=xg.current;zr(xg),me?b._currentValue=k:b._currentValue2=k}function gd(b,k,M){for(;b!==null;){var G=b.alternate;if((b.childLanes&k)!==k?(b.childLanes|=k,G!==null&&(G.childLanes|=k)):G!==null&&(G.childLanes&k)!==k&&(G.childLanes|=k),b===M)break;b=b.return}}function B0(b,k){yg=b,G1=L0=null,b=b.dependencies,b!==null&&b.firstContext!==null&&((b.lanes&k)!==0&&(wa=!0),b.firstContext=null)}function To(b){var k=me?b._currentValue:b._currentValue2;if(G1!==b)if(b={context:b,memoizedValue:k,next:null},L0===null){if(yg===null)throw Error(i(308));L0=b,yg.dependencies={lanes:0,firstContext:b}}else L0=L0.next=b;return k}var yu=null;function vg(b){yu===null?yu=[b]:yu.push(b)}function q1(b,k,M,G){var J=k.interleaved;return J===null?(M.next=M,vg(k)):(M.next=J.next,J.next=M),k.interleaved=M,kl(b,G)}function kl(b,k){b.lanes|=k;var M=b.alternate;for(M!==null&&(M.lanes|=k),M=b,b=b.return;b!==null;)b.childLanes|=k,M=b.alternate,M!==null&&(M.childLanes|=k),M=b,b=b.return;return M.tag===3?M.stateNode:null}var Eo=!1;function K1(b){b.updateQueue={baseState:b.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nb(b,k){b=b.updateQueue,k.updateQueue===b&&(k.updateQueue={baseState:b.baseState,firstBaseUpdate:b.firstBaseUpdate,lastBaseUpdate:b.lastBaseUpdate,shared:b.shared,effects:b.effects})}function Bc(b,k){return{eventTime:b,lane:k,tag:0,payload:null,callback:null,next:null}}function $c(b,k,M){var G=b.updateQueue;if(G===null)return null;if(G=G.shared,(gn&2)!==0){var J=G.pending;return J===null?k.next=k:(k.next=J.next,J.next=k),G.pending=k,kl(b,M)}return J=G.interleaved,J===null?(k.next=k,vg(G)):(k.next=J.next,J.next=k),G.interleaved=k,kl(b,M)}function wh(b,k,M){if(k=k.updateQueue,k!==null&&(k=k.shared,(M&4194240)!==0)){var G=k.lanes;G&=b.pendingLanes,M|=G,k.lanes=M,Dn(b,M)}}function $0(b,k){var M=b.updateQueue,G=b.alternate;if(G!==null&&(G=G.updateQueue,M===G)){var J=null,oe=null;if(M=M.firstBaseUpdate,M!==null){do{var Ae={eventTime:M.eventTime,lane:M.lane,tag:M.tag,payload:M.payload,callback:M.callback,next:null};oe===null?J=oe=Ae:oe=oe.next=Ae,M=M.next}while(M!==null);oe===null?J=oe=k:oe=oe.next=k}else J=oe=k;M={baseState:G.baseState,firstBaseUpdate:J,lastBaseUpdate:oe,shared:G.shared,effects:G.effects},b.updateQueue=M;return}b=M.lastBaseUpdate,b===null?M.firstBaseUpdate=k:b.next=k,M.lastBaseUpdate=k}function vu(b,k,M,G){var J=b.updateQueue;Eo=!1;var oe=J.firstBaseUpdate,Ae=J.lastBaseUpdate,st=J.shared.pending;if(st!==null){J.shared.pending=null;var Ct=st,ar=Ct.next;Ct.next=null,Ae===null?oe=ar:Ae.next=ar,Ae=Ct;var Pr=b.alternate;Pr!==null&&(Pr=Pr.updateQueue,st=Pr.lastBaseUpdate,st!==Ae&&(st===null?Pr.firstBaseUpdate=ar:st.next=ar,Pr.lastBaseUpdate=Ct))}if(oe!==null){var fn=J.baseState;Ae=0,Pr=ar=Ct=null,st=oe;do{var kr=st.lane,ms=st.eventTime;if((G&kr)===kr){Pr!==null&&(Pr=Pr.next={eventTime:ms,lane:0,tag:st.tag,payload:st.payload,callback:st.callback,next:null});e:{var Jn=b,$i=st;switch(kr=k,ms=M,$i.tag){case 1:if(Jn=$i.payload,typeof Jn=="function"){fn=Jn.call(ms,fn,kr);break e}fn=Jn;break e;case 3:Jn.flags=Jn.flags&-65537|128;case 0:if(Jn=$i.payload,kr=typeof Jn=="function"?Jn.call(ms,fn,kr):Jn,kr==null)break e;fn=a({},fn,kr);break e;case 2:Eo=!0}}st.callback!==null&&st.lane!==0&&(b.flags|=64,kr=J.effects,kr===null?J.effects=[st]:kr.push(st))}else ms={eventTime:ms,lane:kr,tag:st.tag,payload:st.payload,callback:st.callback,next:null},Pr===null?(ar=Pr=ms,Ct=fn):Pr=Pr.next=ms,Ae|=kr;if(st=st.next,st===null){if(st=J.shared.pending,st===null)break;kr=st,st=kr.next,kr.next=null,J.lastBaseUpdate=kr,J.shared.pending=null}}while(!0);if(Pr===null&&(Ct=fn),J.baseState=Ct,J.firstBaseUpdate=ar,J.lastBaseUpdate=Pr,k=J.shared.interleaved,k!==null){J=k;do Ae|=J.lane,J=J.next;while(J!==k)}else oe===null&&(J.shared.lanes=0);Gc|=Ae,b.lanes=Ae,b.memoizedState=fn}}function sb(b,k,M){if(b=k.effects,k.effects=null,b!==null)for(k=0;k<b.length;k++){var G=b[k],J=G.callback;if(J!==null){if(G.callback=null,G=M,typeof J!="function")throw Error(i(191,J));J.call(G)}}}var bu={},Qo=Gr(bu),U0=Gr(bu),wu=Gr(bu);function Zo(b){if(b===bu)throw Error(i(174));return b}function bg(b,k){Xt(wu,k),Xt(U0,b),Xt(Qo,bu),b=z(k),zr(Qo),Xt(Qo,b)}function pd(){zr(Qo),zr(U0),zr(wu)}function Y1(b){var k=Zo(wu.current),M=Zo(Qo.current);k=X(M,b.type,k),M!==k&&(Xt(U0,b),Xt(Qo,k))}function X1(b){U0.current===b&&(zr(Qo),zr(U0))}var As=Gr(0);function wg(b){for(var k=b;k!==null;){if(k.tag===13){var M=k.memoizedState;if(M!==null&&(M=M.dehydrated,M===null||tn(M)||Fr(M)))return k}else if(k.tag===19&&k.memoizedProps.revealOrder!==void 0){if((k.flags&128)!==0)return k}else if(k.child!==null){k.child.return=k,k=k.child;continue}if(k===b)break;for(;k.sibling===null;){if(k.return===null||k.return===b)return null;k=k.return}k.sibling.return=k.return,k=k.sibling}return null}var J1=[];function Q1(){for(var b=0;b<J1.length;b++){var k=J1[b];me?k._workInProgressVersionPrimary=null:k._workInProgressVersionSecondary=null}J1.length=0}var ao=o.ReactCurrentDispatcher,xd=o.ReactCurrentBatchConfig,_u=0,Ss=null,na=null,ba=null,z0=!1,_h=!1,Sh=0,W0=0;function Ia(){throw Error(i(321))}function yd(b,k){if(k===null)return!1;for(var M=0;M<k.length&&M<b.length;M++)if(!bl(b[M],k[M]))return!1;return!0}function kh(b,k,M,G,J,oe){if(_u=oe,Ss=k,k.memoizedState=null,k.updateQueue=null,k.lanes=0,ao.current=b===null||b.memoizedState===null?lx:cx,b=M(G,J),_h){oe=0;do{if(_h=!1,Sh=0,25<=oe)throw Error(i(301));oe+=1,ba=na=null,k.updateQueue=null,ao.current=ux,b=M(G,J)}while(_h)}if(ao.current=Sd,k=na!==null&&na.next!==null,_u=0,ba=na=Ss=null,z0=!1,k)throw Error(i(300));return b}function _g(){var b=Sh!==0;return Sh=0,b}function No(){var b={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ba===null?Ss.memoizedState=ba=b:ba=ba.next=b,ba}function Ja(){if(na===null){var b=Ss.alternate;b=b!==null?b.memoizedState:null}else b=na.next;var k=ba===null?Ss.memoizedState:ba.next;if(k!==null)ba=k,na=b;else{if(b===null)throw Error(i(310));na=b,b={memoizedState:na.memoizedState,baseState:na.baseState,baseQueue:na.baseQueue,queue:na.queue,next:null},ba===null?Ss.memoizedState=ba=b:ba=ba.next=b}return ba}function vd(b,k){return typeof k=="function"?k(b):k}function Sg(b){var k=Ja(),M=k.queue;if(M===null)throw Error(i(311));M.lastRenderedReducer=b;var G=na,J=G.baseQueue,oe=M.pending;if(oe!==null){if(J!==null){var Ae=J.next;J.next=oe.next,oe.next=Ae}G.baseQueue=J=oe,M.pending=null}if(J!==null){oe=J.next,G=G.baseState;var st=Ae=null,Ct=null,ar=oe;do{var Pr=ar.lane;if((_u&Pr)===Pr)Ct!==null&&(Ct=Ct.next={lane:0,action:ar.action,hasEagerState:ar.hasEagerState,eagerState:ar.eagerState,next:null}),G=ar.hasEagerState?ar.eagerState:b(G,ar.action);else{var fn={lane:Pr,action:ar.action,hasEagerState:ar.hasEagerState,eagerState:ar.eagerState,next:null};Ct===null?(st=Ct=fn,Ae=G):Ct=Ct.next=fn,Ss.lanes|=Pr,Gc|=Pr}ar=ar.next}while(ar!==null&&ar!==oe);Ct===null?Ae=G:Ct.next=st,bl(G,k.memoizedState)||(wa=!0),k.memoizedState=G,k.baseState=Ae,k.baseQueue=Ct,M.lastRenderedState=G}if(b=M.interleaved,b!==null){J=b;do oe=J.lane,Ss.lanes|=oe,Gc|=oe,J=J.next;while(J!==b)}else J===null&&(M.lanes=0);return[k.memoizedState,M.dispatch]}function H0(b){var k=Ja(),M=k.queue;if(M===null)throw Error(i(311));M.lastRenderedReducer=b;var G=M.dispatch,J=M.pending,oe=k.memoizedState;if(J!==null){M.pending=null;var Ae=J=J.next;do oe=b(oe,Ae.action),Ae=Ae.next;while(Ae!==J);bl(oe,k.memoizedState)||(wa=!0),k.memoizedState=oe,k.baseQueue===null&&(k.baseState=oe),M.lastRenderedState=oe}return[oe,G]}function Z1(){}function ex(b,k){var M=Ss,G=Ja(),J=k(),oe=!bl(G.memoizedState,J);if(oe&&(G.memoizedState=J,wa=!0),G=G.queue,Tg(nx.bind(null,M,G,b),[b]),G.getSnapshot!==k||oe||ba!==null&&ba.memoizedState.tag&1){if(M.flags|=2048,bd(9,rx.bind(null,M,G,J,k),void 0,null),rs===null)throw Error(i(349));(_u&30)!==0||tx(M,k,J)}return J}function tx(b,k,M){b.flags|=16384,b={getSnapshot:k,value:M},k=Ss.updateQueue,k===null?(k={lastEffect:null,stores:null},Ss.updateQueue=k,k.stores=[b]):(M=k.stores,M===null?k.stores=[b]:M.push(b))}function rx(b,k,M,G){k.value=M,k.getSnapshot=G,sx(k)&&Uc(b)}function nx(b,k,M){return M(function(){sx(k)&&Uc(b)})}function sx(b){var k=b.getSnapshot;b=b.value;try{var M=k();return!bl(b,M)}catch{return!0}}function Uc(b){var k=kl(b,1);k!==null&&pi(k,b,1,-1)}function kg(b){var k=No();return typeof b=="function"&&(b=b()),k.memoizedState=k.baseState=b,b={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vd,lastRenderedState:b},k.queue=b,b=b.dispatch=ZS.bind(null,Ss,b),[k.memoizedState,b]}function bd(b,k,M,G){return b={tag:b,create:k,destroy:M,deps:G,next:null},k=Ss.updateQueue,k===null?(k={lastEffect:null,stores:null},Ss.updateQueue=k,k.lastEffect=b.next=b):(M=k.lastEffect,M===null?k.lastEffect=b.next=b:(G=M.next,M.next=b,b.next=G,k.lastEffect=b)),b}function ab(){return Ja().memoizedState}function Cg(b,k,M,G){var J=No();Ss.flags|=b,J.memoizedState=bd(1|k,M,void 0,G===void 0?null:G)}function Su(b,k,M,G){var J=Ja();G=G===void 0?null:G;var oe=void 0;if(na!==null){var Ae=na.memoizedState;if(oe=Ae.destroy,G!==null&&yd(G,Ae.deps)){J.memoizedState=bd(k,M,oe,G);return}}Ss.flags|=b,J.memoizedState=bd(1|k,M,oe,G)}function ib(b,k){return Cg(8390656,8,b,k)}function Tg(b,k){return Su(2048,8,b,k)}function ax(b,k){return Su(4,2,b,k)}function ds(b,k){return Su(4,4,b,k)}function Eg(b,k){if(typeof k=="function")return b=b(),k(b),function(){k(null)};if(k!=null)return b=b(),k.current=b,function(){k.current=null}}function Ch(b,k,M){return M=M!=null?M.concat([b]):null,Su(4,4,Eg.bind(null,k,b),M)}function wd(){}function ix(b,k){var M=Ja();k=k===void 0?null:k;var G=M.memoizedState;return G!==null&&k!==null&&yd(k,G[1])?G[0]:(M.memoizedState=[b,k],b)}function Ng(b,k){var M=Ja();k=k===void 0?null:k;var G=M.memoizedState;return G!==null&&k!==null&&yd(k,G[1])?G[0]:(b=b(),M.memoizedState=[b,k],b)}function G0(b,k,M){return(_u&21)===0?(b.baseState&&(b.baseState=!1,wa=!0),b.memoizedState=M):(bl(M,k)||(M=yt(),Ss.lanes|=M,Gc|=M,b.baseState=!0),k)}function Ag(b,k){var M=We;We=M!==0&&4>M?M:4,b(!0);var G=xd.transition;xd.transition={};try{b(!1),k()}finally{We=M,xd.transition=G}}function _d(){return Ja().memoizedState}function ob(b,k,M){var G=Sa(b);if(M={lane:G,action:M,hasEagerState:!1,eagerState:null,next:null},lb(b))ox(k,M);else if(M=q1(b,k,M,G),M!==null){var J=vs();pi(M,b,G,J),Th(M,k,G)}}function ZS(b,k,M){var G=Sa(b),J={lane:G,action:M,hasEagerState:!1,eagerState:null,next:null};if(lb(b))ox(k,J);else{var oe=b.alternate;if(b.lanes===0&&(oe===null||oe.lanes===0)&&(oe=k.lastRenderedReducer,oe!==null))try{var Ae=k.lastRenderedState,st=oe(Ae,M);if(J.hasEagerState=!0,J.eagerState=st,bl(st,Ae)){var Ct=k.interleaved;Ct===null?(J.next=J,vg(k)):(J.next=Ct.next,Ct.next=J),k.interleaved=J;return}}catch{}finally{}M=q1(b,k,J,G),M!==null&&(J=vs(),pi(M,b,G,J),Th(M,k,G))}}function lb(b){var k=b.alternate;return b===Ss||k!==null&&k===Ss}function ox(b,k){_h=z0=!0;var M=b.pending;M===null?k.next=k:(k.next=M.next,M.next=k),b.pending=k}function Th(b,k,M){if((M&4194240)!==0){var G=k.lanes;G&=b.pendingLanes,M|=G,k.lanes=M,Dn(b,M)}}var Sd={readContext:To,useCallback:Ia,useContext:Ia,useEffect:Ia,useImperativeHandle:Ia,useInsertionEffect:Ia,useLayoutEffect:Ia,useMemo:Ia,useReducer:Ia,useRef:Ia,useState:Ia,useDebugValue:Ia,useDeferredValue:Ia,useTransition:Ia,useMutableSource:Ia,useSyncExternalStore:Ia,useId:Ia,unstable_isNewReconciler:!1},lx={readContext:To,useCallback:function(b,k){return No().memoizedState=[b,k===void 0?null:k],b},useContext:To,useEffect:ib,useImperativeHandle:function(b,k,M){return M=M!=null?M.concat([b]):null,Cg(4194308,4,Eg.bind(null,k,b),M)},useLayoutEffect:function(b,k){return Cg(4194308,4,b,k)},useInsertionEffect:function(b,k){return Cg(4,2,b,k)},useMemo:function(b,k){var M=No();return k=k===void 0?null:k,b=b(),M.memoizedState=[b,k],b},useReducer:function(b,k,M){var G=No();return k=M!==void 0?M(k):k,G.memoizedState=G.baseState=k,b={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:b,lastRenderedState:k},G.queue=b,b=b.dispatch=ob.bind(null,Ss,b),[G.memoizedState,b]},useRef:function(b){var k=No();return b={current:b},k.memoizedState=b},useState:kg,useDebugValue:wd,useDeferredValue:function(b){return No().memoizedState=b},useTransition:function(){var b=kg(!1),k=b[0];return b=Ag.bind(null,b[1]),No().memoizedState=b,[k,b]},useMutableSource:function(){},useSyncExternalStore:function(b,k,M){var G=Ss,J=No();if(ys){if(M===void 0)throw Error(i(407));M=M()}else{if(M=k(),rs===null)throw Error(i(349));(_u&30)!==0||tx(G,k,M)}J.memoizedState=M;var oe={value:M,getSnapshot:k};return J.queue=oe,ib(nx.bind(null,G,oe,b),[b]),G.flags|=2048,bd(9,rx.bind(null,G,oe,M,k),void 0,null),M},useId:function(){var b=No(),k=rs.identifierPrefix;if(ys){var M=wl,G=so;M=(G&~(1<<32-Pn(G)-1)).toString(32)+M,k=":"+k+"R"+M,M=Sh++,0<M&&(k+="H"+M.toString(32)),k+=":"}else M=W0++,k=":"+k+"r"+M.toString(32)+":";return b.memoizedState=k},unstable_isNewReconciler:!1},cx={readContext:To,useCallback:ix,useContext:To,useEffect:Tg,useImperativeHandle:Ch,useInsertionEffect:ax,useLayoutEffect:ds,useMemo:Ng,useReducer:Sg,useRef:ab,useState:function(){return Sg(vd)},useDebugValue:wd,useDeferredValue:function(b){var k=Ja();return G0(k,na.memoizedState,b)},useTransition:function(){var b=Sg(vd)[0],k=Ja().memoizedState;return[b,k]},useMutableSource:Z1,useSyncExternalStore:ex,useId:_d,unstable_isNewReconciler:!1},ux={readContext:To,useCallback:ix,useContext:To,useEffect:Tg,useImperativeHandle:Ch,useInsertionEffect:ax,useLayoutEffect:ds,useMemo:Ng,useReducer:H0,useRef:ab,useState:function(){return H0(vd)},useDebugValue:wd,useDeferredValue:function(b){var k=Ja();return na===null?k.memoizedState=b:G0(k,na.memoizedState,b)},useTransition:function(){var b=H0(vd)[0],k=Ja().memoizedState;return[b,k]},useMutableSource:Z1,useSyncExternalStore:ex,useId:_d,unstable_isNewReconciler:!1};function Ao(b,k){if(b&&b.defaultProps){k=a({},k),b=b.defaultProps;for(var M in b)k[M]===void 0&&(k[M]=b[M]);return k}return k}function dx(b,k,M,G){k=b.memoizedState,M=M(G,k),M=M==null?k:a({},k,M),b.memoizedState=M,b.lanes===0&&(b.updateQueue.baseState=M)}var Eh={isMounted:function(b){return(b=b._reactInternals)?F(b)===b:!1},enqueueSetState:function(b,k,M){b=b._reactInternals;var G=vs(),J=Sa(b),oe=Bc(G,J);oe.payload=k,M!=null&&(oe.callback=M),k=$c(b,oe,J),k!==null&&(pi(k,b,J,G),wh(k,b,J))},enqueueReplaceState:function(b,k,M){b=b._reactInternals;var G=vs(),J=Sa(b),oe=Bc(G,J);oe.tag=1,oe.payload=k,M!=null&&(oe.callback=M),k=$c(b,oe,J),k!==null&&(pi(k,b,J,G),wh(k,b,J))},enqueueForceUpdate:function(b,k){b=b._reactInternals;var M=vs(),G=Sa(b),J=Bc(M,G);J.tag=2,k!=null&&(J.callback=k),k=$c(b,J,G),k!==null&&(pi(k,b,G,M),wh(k,b,G))}};function cb(b,k,M,G,J,oe,Ae){return b=b.stateNode,typeof b.shouldComponentUpdate=="function"?b.shouldComponentUpdate(G,oe,Ae):k.prototype&&k.prototype.isPureReactComponent?!gg(M,G)||!gg(J,oe):!0}function ub(b,k,M){var G=!1,J=xn,oe=k.contextType;return typeof oe=="object"&&oe!==null?oe=To(oe):(J=On(k)?Ln:Lr.current,G=k.contextTypes,oe=(G=G!=null)?ya(b,J):xn),k=new k(M,oe),b.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=Eh,b.stateNode=k,k._reactInternals=b,G&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=J,b.__reactInternalMemoizedMaskedChildContext=oe),k}function jg(b,k,M,G){b=k.state,typeof k.componentWillReceiveProps=="function"&&k.componentWillReceiveProps(M,G),typeof k.UNSAFE_componentWillReceiveProps=="function"&&k.UNSAFE_componentWillReceiveProps(M,G),k.state!==b&&Eh.enqueueReplaceState(k,k.state,null)}function Yl(b,k,M,G){var J=b.stateNode;J.props=M,J.state=b.memoizedState,J.refs={},K1(b);var oe=k.contextType;typeof oe=="object"&&oe!==null?J.context=To(oe):(oe=On(k)?Ln:Lr.current,J.context=ya(b,oe)),J.state=b.memoizedState,oe=k.getDerivedStateFromProps,typeof oe=="function"&&(dx(b,k,oe,M),J.state=b.memoizedState),typeof k.getDerivedStateFromProps=="function"||typeof J.getSnapshotBeforeUpdate=="function"||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(k=J.state,typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount(),k!==J.state&&Eh.enqueueReplaceState(J,J.state,null),vu(b,M,J,G),J.state=b.memoizedState),typeof J.componentDidMount=="function"&&(b.flags|=4194308)}function kd(b,k){try{var M="",G=k;do M+=QS(G),G=G.return;while(G);var J=M}catch(oe){J=`
Error generating stack: `+oe.message+`
`+oe.stack}return{value:b,source:k,stack:J,digest:null}}function ku(b,k,M){return{value:b,source:null,stack:M??null,digest:k??null}}function el(b,k){try{console.error(k.value)}catch(M){setTimeout(function(){throw M})}}var Nh=typeof WeakMap=="function"?WeakMap:Map;function Xl(b,k,M){M=Bc(-1,M),M.tag=3,M.payload={element:null};var G=k.value;return M.callback=function(){$s||($s=!0,sa=G),el(b,k)},M}function Pg(b,k,M){M=Bc(-1,M),M.tag=3;var G=b.type.getDerivedStateFromError;if(typeof G=="function"){var J=k.value;M.payload=function(){return G(J)},M.callback=function(){el(b,k)}}var oe=b.stateNode;return oe!==null&&typeof oe.componentDidCatch=="function"&&(M.callback=function(){el(b,k),typeof G!="function"&&(Tl===null?Tl=new Set([this]):Tl.add(this));var Ae=k.stack;this.componentDidCatch(k.value,{componentStack:Ae!==null?Ae:""})}),M}function db(b,k,M){var G=b.pingCache;if(G===null){G=b.pingCache=new Nh;var J=new Set;G.set(k,J)}else J=G.get(k),J===void 0&&(J=new Set,G.set(k,J));J.has(M)||(J.add(M),b=vb.bind(null,b,k,M),k.then(b,b))}function fb(b){do{var k;if((k=b.tag===13)&&(k=b.memoizedState,k=k!==null?k.dehydrated!==null:!0),k)return b;b=b.return}while(b!==null);return null}function Cu(b,k,M,G,J){return(b.mode&1)===0?(b===k?b.flags|=65536:(b.flags|=128,M.flags|=131072,M.flags&=-52805,M.tag===1&&(M.alternate===null?M.tag=17:(k=Bc(-1,1),k.tag=2,$c(M,k,1))),M.lanes|=1),b):(b.flags|=65536,b.lanes=J,b)}var Ah=o.ReactCurrentOwner,wa=!1;function La(b,k,M,G){k.child=b===null?tb(k,null,M,G):md(k,b.child,M,G)}function Fg(b,k,M,G,J){M=M.render;var oe=k.ref;return B0(k,J),G=kh(b,k,M,G,oe,J),M=_g(),b!==null&&!wa?(k.updateQueue=b.updateQueue,k.flags&=-2053,b.lanes&=~J,Wc(b,k,J)):(ys&&M&&xh(k),k.flags|=1,La(b,k,G,J),k.child)}function Cd(b,k,M,G,J){if(b===null){var oe=M.type;return typeof oe=="function"&&!of(oe)&&oe.defaultProps===void 0&&M.compare===null&&M.defaultProps===void 0?(k.tag=15,k.type=oe,zc(b,k,oe,G,J)):(b=Kg(M.type,null,G,k,k.mode,J),b.ref=k.ref,b.return=k,k.child=b)}if(oe=b.child,(b.lanes&J)===0){var Ae=oe.memoizedProps;if(M=M.compare,M=M!==null?M:gg,M(Ae,G)&&b.ref===k.ref)return Wc(b,k,J)}return k.flags|=1,b=Du(oe,G),b.ref=k.ref,b.return=k,k.child=b}function zc(b,k,M,G,J){if(b!==null){var oe=b.memoizedProps;if(gg(oe,G)&&b.ref===k.ref)if(wa=!1,k.pendingProps=G=oe,(b.lanes&J)!==0)(b.flags&131072)!==0&&(wa=!0);else return k.lanes=b.lanes,Wc(b,k,J)}return Jl(b,k,M,G,J)}function fs(b,k,M){var G=k.pendingProps,J=G.children,oe=b!==null?b.memoizedState:null;if(G.mode==="hidden")if((k.mode&1)===0)k.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xt(Pu,_a),_a|=M;else{if((M&1073741824)===0)return b=oe!==null?oe.baseLanes|M:M,k.lanes=k.childLanes=1073741824,k.memoizedState={baseLanes:b,cachePool:null,transitions:null},k.updateQueue=null,Xt(Pu,_a),_a|=b,null;k.memoizedState={baseLanes:0,cachePool:null,transitions:null},G=oe!==null?oe.baseLanes:M,Xt(Pu,_a),_a|=G}else oe!==null?(G=oe.baseLanes|M,k.memoizedState=null):G=M,Xt(Pu,_a),_a|=G;return La(b,k,J,M),k.child}function ts(b,k){var M=k.ref;(b===null&&M!==null||b!==null&&b.ref!==M)&&(k.flags|=512,k.flags|=2097152)}function Jl(b,k,M,G,J){var oe=On(M)?Ln:Lr.current;return oe=ya(k,oe),B0(k,J),M=kh(b,k,M,G,oe,J),G=_g(),b!==null&&!wa?(k.updateQueue=b.updateQueue,k.flags&=-2053,b.lanes&=~J,Wc(b,k,J)):(ys&&G&&xh(k),k.flags|=1,La(b,k,M,J),k.child)}function Qa(b,k,M,G,J){if(On(M)){var oe=!0;Dr(k)}else oe=!1;if(B0(k,J),k.stateNode===null)jh(b,k),ub(k,M,G),Yl(k,M,G,J),G=!0;else if(b===null){var Ae=k.stateNode,st=k.memoizedProps;Ae.props=st;var Ct=Ae.context,ar=M.contextType;typeof ar=="object"&&ar!==null?ar=To(ar):(ar=On(M)?Ln:Lr.current,ar=ya(k,ar));var Pr=M.getDerivedStateFromProps,fn=typeof Pr=="function"||typeof Ae.getSnapshotBeforeUpdate=="function";fn||typeof Ae.UNSAFE_componentWillReceiveProps!="function"&&typeof Ae.componentWillReceiveProps!="function"||(st!==G||Ct!==ar)&&jg(k,Ae,G,ar),Eo=!1;var kr=k.memoizedState;Ae.state=kr,vu(k,G,Ae,J),Ct=k.memoizedState,st!==G||kr!==Ct||jn.current||Eo?(typeof Pr=="function"&&(dx(k,M,Pr,G),Ct=k.memoizedState),(st=Eo||cb(k,M,st,G,kr,Ct,ar))?(fn||typeof Ae.UNSAFE_componentWillMount!="function"&&typeof Ae.componentWillMount!="function"||(typeof Ae.componentWillMount=="function"&&Ae.componentWillMount(),typeof Ae.UNSAFE_componentWillMount=="function"&&Ae.UNSAFE_componentWillMount()),typeof Ae.componentDidMount=="function"&&(k.flags|=4194308)):(typeof Ae.componentDidMount=="function"&&(k.flags|=4194308),k.memoizedProps=G,k.memoizedState=Ct),Ae.props=G,Ae.state=Ct,Ae.context=ar,G=st):(typeof Ae.componentDidMount=="function"&&(k.flags|=4194308),G=!1)}else{Ae=k.stateNode,nb(b,k),st=k.memoizedProps,ar=k.type===k.elementType?st:Ao(k.type,st),Ae.props=ar,fn=k.pendingProps,kr=Ae.context,Ct=M.contextType,typeof Ct=="object"&&Ct!==null?Ct=To(Ct):(Ct=On(M)?Ln:Lr.current,Ct=ya(k,Ct));var ms=M.getDerivedStateFromProps;(Pr=typeof ms=="function"||typeof Ae.getSnapshotBeforeUpdate=="function")||typeof Ae.UNSAFE_componentWillReceiveProps!="function"&&typeof Ae.componentWillReceiveProps!="function"||(st!==fn||kr!==Ct)&&jg(k,Ae,G,Ct),Eo=!1,kr=k.memoizedState,Ae.state=kr,vu(k,G,Ae,J);var Jn=k.memoizedState;st!==fn||kr!==Jn||jn.current||Eo?(typeof ms=="function"&&(dx(k,M,ms,G),Jn=k.memoizedState),(ar=Eo||cb(k,M,ar,G,kr,Jn,Ct)||!1)?(Pr||typeof Ae.UNSAFE_componentWillUpdate!="function"&&typeof Ae.componentWillUpdate!="function"||(typeof Ae.componentWillUpdate=="function"&&Ae.componentWillUpdate(G,Jn,Ct),typeof Ae.UNSAFE_componentWillUpdate=="function"&&Ae.UNSAFE_componentWillUpdate(G,Jn,Ct)),typeof Ae.componentDidUpdate=="function"&&(k.flags|=4),typeof Ae.getSnapshotBeforeUpdate=="function"&&(k.flags|=1024)):(typeof Ae.componentDidUpdate!="function"||st===b.memoizedProps&&kr===b.memoizedState||(k.flags|=4),typeof Ae.getSnapshotBeforeUpdate!="function"||st===b.memoizedProps&&kr===b.memoizedState||(k.flags|=1024),k.memoizedProps=G,k.memoizedState=Jn),Ae.props=G,Ae.state=Jn,Ae.context=Ct,G=ar):(typeof Ae.componentDidUpdate!="function"||st===b.memoizedProps&&kr===b.memoizedState||(k.flags|=4),typeof Ae.getSnapshotBeforeUpdate!="function"||st===b.memoizedProps&&kr===b.memoizedState||(k.flags|=1024),G=!1)}return hi(b,k,M,G,oe,J)}function hi(b,k,M,G,J,oe){ts(b,k);var Ae=(k.flags&128)!==0;if(!G&&!Ae)return J&&Yn(k,M,!1),Wc(b,k,oe);G=k.stateNode,Ah.current=k;var st=Ae&&typeof M.getDerivedStateFromError!="function"?null:G.render();return k.flags|=1,b!==null&&Ae?(k.child=md(k,b.child,null,oe),k.child=md(k,null,st,oe)):La(b,k,st,oe),k.memoizedState=G.state,J&&Yn(k,M,!0),k.child}function Tu(b){var k=b.stateNode;k.pendingContext?Tt(b,k.pendingContext,k.pendingContext!==k.context):k.context&&Tt(b,k.context,!1),bg(b,k.containerInfo)}function Td(b,k,M,G,J){return fd(),H1(J),k.flags|=256,La(b,k,M,G),k.child}var mi={dehydrated:null,treeContext:null,retryLane:0};function V0(b){return{baseLanes:b,cachePool:null,transitions:null}}function fx(b,k,M){var G=k.pendingProps,J=As.current,oe=!1,Ae=(k.flags&128)!==0,st;if((st=Ae)||(st=b!==null&&b.memoizedState===null?!1:(J&2)!==0),st?(oe=!0,k.flags&=-129):(b===null||b.memoizedState!==null)&&(J|=1),Xt(As,J&1),b===null)return W1(k),b=k.memoizedState,b!==null&&(b=b.dehydrated,b!==null)?((k.mode&1)===0?k.lanes=1:Fr(b)?k.lanes=8:k.lanes=1073741824,null):(Ae=G.children,b=G.fallback,oe?(G=k.mode,oe=k.child,Ae={mode:"hidden",children:Ae},(G&1)===0&&oe!==null?(oe.childLanes=0,oe.pendingProps=Ae):oe=lf(Ae,G,0,null),b=Za(b,G,M,null),oe.return=k,b.return=k,oe.sibling=b,k.child=oe,k.child.memoizedState=V0(M),k.memoizedState=mi,b):Mg(k,Ae));if(J=b.memoizedState,J!==null&&(st=J.dehydrated,st!==null))return hb(b,k,Ae,G,st,J,M);if(oe){oe=G.fallback,Ae=k.mode,J=b.child,st=J.sibling;var Ct={mode:"hidden",children:G.children};return(Ae&1)===0&&k.child!==J?(G=k.child,G.childLanes=0,G.pendingProps=Ct,k.deletions=null):(G=Du(J,Ct),G.subtreeFlags=J.subtreeFlags&14680064),st!==null?oe=Du(st,oe):(oe=Za(oe,Ae,M,null),oe.flags|=2),oe.return=k,G.return=k,G.sibling=oe,k.child=G,G=oe,oe=k.child,Ae=b.child.memoizedState,Ae=Ae===null?V0(M):{baseLanes:Ae.baseLanes|M,cachePool:null,transitions:Ae.transitions},oe.memoizedState=Ae,oe.childLanes=b.childLanes&~M,k.memoizedState=mi,G}return oe=b.child,b=oe.sibling,G=Du(oe,{mode:"visible",children:G.children}),(k.mode&1)===0&&(G.lanes=M),G.return=k,G.sibling=null,b!==null&&(M=k.deletions,M===null?(k.deletions=[b],k.flags|=16):M.push(b)),k.child=G,k.memoizedState=null,G}function Mg(b,k){return k=lf({mode:"visible",children:k},b.mode,0,null),k.return=b,b.child=k}function Ed(b,k,M,G){return G!==null&&H1(G),md(k,b.child,null,M),b=Mg(k,k.pendingProps.children),b.flags|=2,k.memoizedState=null,b}function hb(b,k,M,G,J,oe,Ae){if(M)return k.flags&256?(k.flags&=-257,G=ku(Error(i(422))),Ed(b,k,Ae,G)):k.memoizedState!==null?(k.child=b.child,k.flags|=128,null):(oe=G.fallback,J=k.mode,G=lf({mode:"visible",children:G.children},J,0,null),oe=Za(oe,J,Ae,null),oe.flags|=2,G.return=k,oe.return=k,G.sibling=oe,k.child=G,(k.mode&1)!==0&&md(k,b.child,null,Ae),k.child.memoizedState=V0(Ae),k.memoizedState=mi,oe);if((k.mode&1)===0)return Ed(b,k,Ae,null);if(Fr(J))return G=an(J).digest,oe=Error(i(419)),G=ku(oe,G,void 0),Ed(b,k,Ae,G);if(M=(Ae&b.childLanes)!==0,wa||M){if(G=rs,G!==null){switch(Ae&-Ae){case 4:J=2;break;case 16:J=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:J=32;break;case 536870912:J=268435456;break;default:J=0}J=(J&(G.suspendedLanes|Ae))!==0?0:J,J!==0&&J!==oe.retryLane&&(oe.retryLane=J,kl(b,J),pi(G,b,J,-1))}return af(),G=ku(Error(i(421))),Ed(b,k,Ae,G)}return tn(J)?(k.flags|=128,k.child=b.child,k=wb.bind(null,b),pe(J,k),null):(b=oe.treeContext,De&&(Oi=ge(J),Xa=k,ys=!0,Sl=null,vh=!1,b!==null&&(Mi[Co++]=so,Mi[Co++]=wl,Mi[Co++]=va,so=b.id,wl=b.overflow,va=k)),k=Mg(k,G.children),k.flags|=4096,k)}function Ql(b,k,M){b.lanes|=k;var G=b.alternate;G!==null&&(G.lanes|=k),gd(b.return,k,M)}function q0(b,k,M,G,J){var oe=b.memoizedState;oe===null?b.memoizedState={isBackwards:k,rendering:null,renderingStartTime:0,last:G,tail:M,tailMode:J}:(oe.isBackwards=k,oe.rendering=null,oe.renderingStartTime=0,oe.last=G,oe.tail=M,oe.tailMode=J)}function Og(b,k,M){var G=k.pendingProps,J=G.revealOrder,oe=G.tail;if(La(b,k,G.children,M),G=As.current,(G&2)!==0)G=G&1|2,k.flags|=128;else{if(b!==null&&(b.flags&128)!==0)e:for(b=k.child;b!==null;){if(b.tag===13)b.memoizedState!==null&&Ql(b,M,k);else if(b.tag===19)Ql(b,M,k);else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===k)break e;for(;b.sibling===null;){if(b.return===null||b.return===k)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}G&=1}if(Xt(As,G),(k.mode&1)===0)k.memoizedState=null;else switch(J){case"forwards":for(M=k.child,J=null;M!==null;)b=M.alternate,b!==null&&wg(b)===null&&(J=M),M=M.sibling;M=J,M===null?(J=k.child,k.child=null):(J=M.sibling,M.sibling=null),q0(k,!1,J,M,oe);break;case"backwards":for(M=null,J=k.child,k.child=null;J!==null;){if(b=J.alternate,b!==null&&wg(b)===null){k.child=J;break}b=J.sibling,J.sibling=M,M=J,J=b}q0(k,!0,M,null,oe);break;case"together":q0(k,!1,null,null,void 0);break;default:k.memoizedState=null}return k.child}function jh(b,k){(k.mode&1)===0&&b!==null&&(b.alternate=null,k.alternate=null,k.flags|=2)}function Wc(b,k,M){if(b!==null&&(k.dependencies=b.dependencies),Gc|=k.lanes,(M&k.childLanes)===0)return null;if(b!==null&&k.child!==b.child)throw Error(i(153));if(k.child!==null){for(b=k.child,M=Du(b,b.pendingProps),k.child=M,M.return=k;b.sibling!==null;)b=b.sibling,M=M.sibling=Du(b,b.pendingProps),M.return=k;M.sibling=null}return k.child}function Eu(b,k,M){switch(k.tag){case 3:Tu(k),fd();break;case 5:Y1(k);break;case 1:On(k.type)&&Dr(k);break;case 4:bg(k,k.stateNode.containerInfo);break;case 10:rb(k,k.type._context,k.memoizedProps.value);break;case 13:var G=k.memoizedState;if(G!==null)return G.dehydrated!==null?(Xt(As,As.current&1),k.flags|=128,null):(M&k.child.childLanes)!==0?fx(b,k,M):(Xt(As,As.current&1),b=Wc(b,k,M),b!==null?b.sibling:null);Xt(As,As.current&1);break;case 19:if(G=(M&k.childLanes)!==0,(b.flags&128)!==0){if(G)return Og(b,k,M);k.flags|=128}var J=k.memoizedState;if(J!==null&&(J.rendering=null,J.tail=null,J.lastEffect=null),Xt(As,As.current),G)break;return null;case 22:case 23:return k.lanes=0,fs(b,k,M)}return Wc(b,k,M)}function Di(b){b.flags|=4}function Nd(b,k){if(b!==null&&b.child===k.child)return!0;if((k.flags&16)!==0)return!1;for(b=k.child;b!==null;){if((b.flags&12854)!==0||(b.subtreeFlags&12854)!==0)return!1;b=b.sibling}return!0}var Nu,Au,Ri,Ii;if(xe)Nu=function(b,k){for(var M=k.child;M!==null;){if(M.tag===5||M.tag===6)D(b,M.stateNode);else if(M.tag!==4&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===k)break;for(;M.sibling===null;){if(M.return===null||M.return===k)return;M=M.return}M.sibling.return=M.return,M=M.sibling}},Au=function(){},Ri=function(b,k,M,G,J){if(b=b.memoizedProps,b!==G){var oe=k.stateNode,Ae=Zo(Qo.current);M=q(oe,M,b,G,J,Ae),(k.updateQueue=M)&&Di(k)}},Ii=function(b,k,M,G){M!==G&&Di(k)};else if(se){Nu=function(b,k,M,G){for(var J=k.child;J!==null;){if(J.tag===5){var oe=J.stateNode;M&&G&&(oe=lt(oe,J.type,J.memoizedProps,J)),D(b,oe)}else if(J.tag===6)oe=J.stateNode,M&&G&&(oe=ct(oe,J.memoizedProps,J)),D(b,oe);else if(J.tag!==4){if(J.tag===22&&J.memoizedState!==null)oe=J.child,oe!==null&&(oe.return=J),Nu(b,J,!0,!0);else if(J.child!==null){J.child.return=J,J=J.child;continue}}if(J===k)break;for(;J.sibling===null;){if(J.return===null||J.return===k)return;J=J.return}J.sibling.return=J.return,J=J.sibling}};var ju=function(b,k,M,G){for(var J=k.child;J!==null;){if(J.tag===5){var oe=J.stateNode;M&&G&&(oe=lt(oe,J.type,J.memoizedProps,J)),jt(b,oe)}else if(J.tag===6)oe=J.stateNode,M&&G&&(oe=ct(oe,J.memoizedProps,J)),jt(b,oe);else if(J.tag!==4){if(J.tag===22&&J.memoizedState!==null)oe=J.child,oe!==null&&(oe.return=J),ju(b,J,!0,!0);else if(J.child!==null){J.child.return=J,J=J.child;continue}}if(J===k)break;for(;J.sibling===null;){if(J.return===null||J.return===k)return;J=J.return}J.sibling.return=J.return,J=J.sibling}};Au=function(b,k){var M=k.stateNode;if(!Nd(b,k)){b=M.containerInfo;var G=at(b);ju(G,k,!1,!1),M.pendingChildren=G,Di(k),Mt(b,G)}},Ri=function(b,k,M,G,J){var oe=b.stateNode,Ae=b.memoizedProps;if((b=Nd(b,k))&&Ae===G)k.stateNode=oe;else{var st=k.stateNode,Ct=Zo(Qo.current),ar=null;Ae!==G&&(ar=q(st,M,Ae,G,J,Ct)),b&&ar===null?k.stateNode=oe:(oe=Fe(oe,ar,M,Ae,G,k,b,st),U(oe,M,G,J,Ct)&&Di(k),k.stateNode=oe,b?Di(k):Nu(oe,k,!1,!1))}},Ii=function(b,k,M,G){M!==G?(b=Zo(wu.current),M=Zo(Qo.current),k.stateNode=te(G,b,M,k),Di(k)):k.stateNode=b.stateNode}}else Au=function(){},Ri=function(){},Ii=function(){};function jo(b,k){if(!ys)switch(b.tailMode){case"hidden":k=b.tail;for(var M=null;k!==null;)k.alternate!==null&&(M=k),k=k.sibling;M===null?b.tail=null:M.sibling=null;break;case"collapsed":M=b.tail;for(var G=null;M!==null;)M.alternate!==null&&(G=M),M=M.sibling;G===null?k||b.tail===null?b.tail=null:b.tail.sibling=null:G.sibling=null}}function ks(b){var k=b.alternate!==null&&b.alternate.child===b.child,M=0,G=0;if(k)for(var J=b.child;J!==null;)M|=J.lanes|J.childLanes,G|=J.subtreeFlags&14680064,G|=J.flags&14680064,J.return=b,J=J.sibling;else for(J=b.child;J!==null;)M|=J.lanes|J.childLanes,G|=J.subtreeFlags,G|=J.flags,J.return=b,J=J.sibling;return b.subtreeFlags|=G,b.childLanes=M,k}function Ad(b,k,M){var G=k.pendingProps;switch(yh(k),k.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ks(k),null;case 1:return On(k.type)&&Te(),ks(k),null;case 3:return M=k.stateNode,pd(),zr(jn),zr(Lr),Q1(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(b===null||b.child===null)&&(mg(k)?Di(k):b===null||b.memoizedState.isDehydrated&&(k.flags&256)===0||(k.flags|=1024,Sl!==null&&(Vg(Sl),Sl=null))),Au(b,k),ks(k),null;case 5:X1(k),M=Zo(wu.current);var J=k.type;if(b!==null&&k.stateNode!=null)Ri(b,k,J,G,M),b.ref!==k.ref&&(k.flags|=512,k.flags|=2097152);else{if(!G){if(k.stateNode===null)throw Error(i(166));return ks(k),null}if(b=Zo(Qo.current),mg(k)){if(!De)throw Error(i(175));b=Se(k.stateNode,k.type,k.memoizedProps,M,b,k,!vh),k.updateQueue=b,b!==null&&Di(k)}else{var oe=W(J,G,M,b,k);Nu(oe,k,!1,!1),k.stateNode=oe,U(oe,J,G,M,b)&&Di(k)}k.ref!==null&&(k.flags|=512,k.flags|=2097152)}return ks(k),null;case 6:if(b&&k.stateNode!=null)Ii(b,k,b.memoizedProps,G);else{if(typeof G!="string"&&k.stateNode===null)throw Error(i(166));if(b=Zo(wu.current),M=Zo(Qo.current),mg(k)){if(!De)throw Error(i(176));if(b=k.stateNode,M=k.memoizedProps,(G=ze(b,M,k,!vh))&&(J=Xa,J!==null))switch(J.tag){case 3:bt(J.stateNode.containerInfo,b,M,(J.mode&1)!==0);break;case 5:At(J.type,J.memoizedProps,J.stateNode,b,M,(J.mode&1)!==0)}G&&Di(k)}else k.stateNode=te(G,b,M,k)}return ks(k),null;case 13:if(zr(As),G=k.memoizedState,b===null||b.memoizedState!==null&&b.memoizedState.dehydrated!==null){if(ys&&Oi!==null&&(k.mode&1)!==0&&(k.flags&128)===0)Q2(),fd(),k.flags|=98560,J=!1;else if(J=mg(k),G!==null&&G.dehydrated!==null){if(b===null){if(!J)throw Error(i(318));if(!De)throw Error(i(344));if(J=k.memoizedState,J=J!==null?J.dehydrated:null,!J)throw Error(i(317));it(J,k)}else fd(),(k.flags&128)===0&&(k.memoizedState=null),k.flags|=4;ks(k),J=!1}else Sl!==null&&(Vg(Sl),Sl=null),J=!0;if(!J)return k.flags&65536?k:null}return(k.flags&128)!==0?(k.lanes=M,k):(M=G!==null,M!==(b!==null&&b.memoizedState!==null)&&M&&(k.child.flags|=8192,(k.mode&1)!==0&&(b===null||(As.current&1)!==0?Ts===0&&(Ts=3):af())),k.updateQueue!==null&&(k.flags|=4),ks(k),null);case 4:return pd(),Au(b,k),b===null&&rt(k.stateNode.containerInfo),ks(k),null;case 10:return bh(k.type._context),ks(k),null;case 17:return On(k.type)&&Te(),ks(k),null;case 19:if(zr(As),J=k.memoizedState,J===null)return ks(k),null;if(G=(k.flags&128)!==0,oe=J.rendering,oe===null)if(G)jo(J,!1);else{if(Ts!==0||b!==null&&(b.flags&128)!==0)for(b=k.child;b!==null;){if(oe=wg(b),oe!==null){for(k.flags|=128,jo(J,!1),b=oe.updateQueue,b!==null&&(k.updateQueue=b,k.flags|=4),k.subtreeFlags=0,b=M,M=k.child;M!==null;)G=M,J=b,G.flags&=14680066,oe=G.alternate,oe===null?(G.childLanes=0,G.lanes=J,G.child=null,G.subtreeFlags=0,G.memoizedProps=null,G.memoizedState=null,G.updateQueue=null,G.dependencies=null,G.stateNode=null):(G.childLanes=oe.childLanes,G.lanes=oe.lanes,G.child=oe.child,G.subtreeFlags=0,G.deletions=null,G.memoizedProps=oe.memoizedProps,G.memoizedState=oe.memoizedState,G.updateQueue=oe.updateQueue,G.type=oe.type,J=oe.dependencies,G.dependencies=J===null?null:{lanes:J.lanes,firstContext:J.firstContext}),M=M.sibling;return Xt(As,As.current&1|2),k.child}b=b.sibling}J.tail!==null&&vn()>Ih&&(k.flags|=128,G=!0,jo(J,!1),k.lanes=4194304)}else{if(!G)if(b=wg(oe),b!==null){if(k.flags|=128,G=!0,b=b.updateQueue,b!==null&&(k.updateQueue=b,k.flags|=4),jo(J,!0),J.tail===null&&J.tailMode==="hidden"&&!oe.alternate&&!ys)return ks(k),null}else 2*vn()-J.renderingStartTime>Ih&&M!==1073741824&&(k.flags|=128,G=!0,jo(J,!1),k.lanes=4194304);J.isBackwards?(oe.sibling=k.child,k.child=oe):(b=J.last,b!==null?b.sibling=oe:k.child=oe,J.last=oe)}return J.tail!==null?(k=J.tail,J.rendering=k,J.tail=k.sibling,J.renderingStartTime=vn(),k.sibling=null,b=As.current,Xt(As,G?b&1|2:b&1),k):(ks(k),null);case 22:case 23:return qg(),M=k.memoizedState!==null,b!==null&&b.memoizedState!==null!==M&&(k.flags|=8192),M&&(k.mode&1)!==0?(_a&1073741824)!==0&&(ks(k),xe&&k.subtreeFlags&6&&(k.flags|=8192)):ks(k),null;case 24:return null;case 25:return null}throw Error(i(156,k.tag))}function mb(b,k){switch(yh(k),k.tag){case 1:return On(k.type)&&Te(),b=k.flags,b&65536?(k.flags=b&-65537|128,k):null;case 3:return pd(),zr(jn),zr(Lr),Q1(),b=k.flags,(b&65536)!==0&&(b&128)===0?(k.flags=b&-65537|128,k):null;case 5:return X1(k),null;case 13:if(zr(As),b=k.memoizedState,b!==null&&b.dehydrated!==null){if(k.alternate===null)throw Error(i(340));fd()}return b=k.flags,b&65536?(k.flags=b&-65537|128,k):null;case 19:return zr(As),null;case 4:return pd(),null;case 10:return bh(k.type._context),null;case 22:case 23:return qg(),null;case 24:return null;default:return null}}var K0=!1,Ba=!1,Po=typeof WeakSet=="function"?WeakSet:Set,vr=null;function Xn(b,k){var M=b.ref;if(M!==null)if(typeof M=="function")try{M(null)}catch(G){bs(b,k,G)}else M.current=null}function Fo(b,k,M){try{M()}catch(G){bs(b,k,G)}}var hx=!1;function gb(b,k){for(I(b.containerInfo),vr=k;vr!==null;)if(b=vr,k=b.child,(b.subtreeFlags&1028)!==0&&k!==null)k.return=b,vr=k;else for(;vr!==null;){b=vr;try{var M=b.alternate;if((b.flags&1024)!==0)switch(b.tag){case 0:case 11:case 15:break;case 1:if(M!==null){var G=M.memoizedProps,J=M.memoizedState,oe=b.stateNode,Ae=oe.getSnapshotBeforeUpdate(b.elementType===b.type?G:Ao(b.type,G),J);oe.__reactInternalSnapshotBeforeUpdate=Ae}break;case 3:xe&&Ee(b.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(st){bs(b,b.return,st)}if(k=b.sibling,k!==null){k.return=b.return,vr=k;break}vr=b.return}return M=hx,hx=!1,M}function jd(b,k,M){var G=k.updateQueue;if(G=G!==null?G.lastEffect:null,G!==null){var J=G=G.next;do{if((J.tag&b)===b){var oe=J.destroy;J.destroy=void 0,oe!==void 0&&Fo(k,M,oe)}J=J.next}while(J!==G)}}function Y0(b,k){if(k=k.updateQueue,k=k!==null?k.lastEffect:null,k!==null){var M=k=k.next;do{if((M.tag&b)===b){var G=M.create;M.destroy=G()}M=M.next}while(M!==k)}}function Dg(b){var k=b.ref;if(k!==null){var M=b.stateNode;switch(b.tag){case 5:b=ue(M);break;default:b=M}typeof k=="function"?k(b):k.current=b}}function Ph(b){var k=b.alternate;k!==null&&(b.alternate=null,Ph(k)),b.child=null,b.deletions=null,b.sibling=null,b.tag===5&&(k=b.stateNode,k!==null&&Ke(k)),b.stateNode=null,b.return=null,b.dependencies=null,b.memoizedProps=null,b.memoizedState=null,b.pendingProps=null,b.stateNode=null,b.updateQueue=null}function mx(b){return b.tag===5||b.tag===3||b.tag===4}function Pd(b){e:for(;;){for(;b.sibling===null;){if(b.return===null||mx(b.return))return null;b=b.return}for(b.sibling.return=b.return,b=b.sibling;b.tag!==5&&b.tag!==6&&b.tag!==18;){if(b.flags&2||b.child===null||b.tag===4)continue e;b.child.return=b,b=b.child}if(!(b.flags&2))return b.stateNode}}function Fh(b,k,M){var G=b.tag;if(G===5||G===6)b=b.stateNode,k?Wt(M,b,k):kt(M,b);else if(G!==4&&(b=b.child,b!==null))for(Fh(b,k,M),b=b.sibling;b!==null;)Fh(b,k,M),b=b.sibling}function gx(b,k,M){var G=b.tag;if(G===5||G===6)b=b.stateNode,k?Ut(M,b,k):gt(M,b);else if(G!==4&&(b=b.child,b!==null))for(gx(b,k,M),b=b.sibling;b!==null;)gx(b,k,M),b=b.sibling}var Ks=null,io=!1;function Cl(b,k,M){for(M=M.child;M!==null;)Rg(b,k,M),M=M.sibling}function Rg(b,k,M){if(no&&typeof no.onCommitFiberUnmount=="function")try{no.onCommitFiberUnmount(pu,M)}catch{}switch(M.tag){case 5:Ba||Xn(M,k);case 6:if(xe){var G=Ks,J=io;Ks=null,Cl(b,k,M),Ks=G,io=J,Ks!==null&&(io?wr(Ks,M.stateNode):pr(Ks,M.stateNode))}else Cl(b,k,M);break;case 18:xe&&Ks!==null&&(io?Oe(Ks,M.stateNode):Me(Ks,M.stateNode));break;case 4:xe?(G=Ks,J=io,Ks=M.stateNode.containerInfo,io=!0,Cl(b,k,M),Ks=G,io=J):(se&&(G=M.stateNode.containerInfo,J=at(G),Be(G,J)),Cl(b,k,M));break;case 0:case 11:case 14:case 15:if(!Ba&&(G=M.updateQueue,G!==null&&(G=G.lastEffect,G!==null))){J=G=G.next;do{var oe=J,Ae=oe.destroy;oe=oe.tag,Ae!==void 0&&((oe&2)!==0||(oe&4)!==0)&&Fo(M,k,Ae),J=J.next}while(J!==G)}Cl(b,k,M);break;case 1:if(!Ba&&(Xn(M,k),G=M.stateNode,typeof G.componentWillUnmount=="function"))try{G.props=M.memoizedProps,G.state=M.memoizedState,G.componentWillUnmount()}catch(st){bs(M,k,st)}Cl(b,k,M);break;case 21:Cl(b,k,M);break;case 22:M.mode&1?(Ba=(G=Ba)||M.memoizedState!==null,Cl(b,k,M),Ba=G):Cl(b,k,M);break;default:Cl(b,k,M)}}function Fd(b){var k=b.updateQueue;if(k!==null){b.updateQueue=null;var M=b.stateNode;M===null&&(M=b.stateNode=new Po),k.forEach(function(G){var J=e3.bind(null,b,G);M.has(G)||(M.add(G),G.then(J,J))})}}function tl(b,k){var M=k.deletions;if(M!==null)for(var G=0;G<M.length;G++){var J=M[G];try{var oe=b,Ae=k;if(xe){var st=Ae;e:for(;st!==null;){switch(st.tag){case 5:Ks=st.stateNode,io=!1;break e;case 3:Ks=st.stateNode.containerInfo,io=!0;break e;case 4:Ks=st.stateNode.containerInfo,io=!0;break e}st=st.return}if(Ks===null)throw Error(i(160));Rg(oe,Ae,J),Ks=null,io=!1}else Rg(oe,Ae,J);var Ct=J.alternate;Ct!==null&&(Ct.return=null),J.return=null}catch(ar){bs(J,k,ar)}}if(k.subtreeFlags&12854)for(k=k.child;k!==null;)Mh(k,b),k=k.sibling}function Mh(b,k){var M=b.alternate,G=b.flags;switch(b.tag){case 0:case 11:case 14:case 15:if(tl(k,b),Mo(b),G&4){try{jd(3,b,b.return),Y0(3,b)}catch(kr){bs(b,b.return,kr)}try{jd(5,b,b.return)}catch(kr){bs(b,b.return,kr)}}break;case 1:tl(k,b),Mo(b),G&512&&M!==null&&Xn(M,M.return);break;case 5:if(tl(k,b),Mo(b),G&512&&M!==null&&Xn(M,M.return),xe){if(b.flags&32){var J=b.stateNode;try{br(J)}catch(kr){bs(b,b.return,kr)}}if(G&4&&(J=b.stateNode,J!=null)){var oe=b.memoizedProps;if(M=M!==null?M.memoizedProps:oe,G=b.type,k=b.updateQueue,b.updateQueue=null,k!==null)try{Et(J,k,G,M,oe,b)}catch(kr){bs(b,b.return,kr)}}}break;case 6:if(tl(k,b),Mo(b),G&4&&xe){if(b.stateNode===null)throw Error(i(162));J=b.stateNode,oe=b.memoizedProps,M=M!==null?M.memoizedProps:oe;try{Ge(J,M,oe)}catch(kr){bs(b,b.return,kr)}}break;case 3:if(tl(k,b),Mo(b),G&4){if(xe&&De&&M!==null&&M.memoizedState.isDehydrated)try{de(k.containerInfo)}catch(kr){bs(b,b.return,kr)}if(se){J=k.containerInfo,oe=k.pendingChildren;try{Be(J,oe)}catch(kr){bs(b,b.return,kr)}}}break;case 4:if(tl(k,b),Mo(b),G&4&&se){oe=b.stateNode,J=oe.containerInfo,oe=oe.pendingChildren;try{Be(J,oe)}catch(kr){bs(b,b.return,kr)}}break;case 13:tl(k,b),Mo(b),J=b.child,J.flags&8192&&(oe=J.memoizedState!==null,J.stateNode.isHidden=oe,!oe||J.alternate!==null&&J.alternate.memoizedState!==null||(tf=vn())),G&4&&Fd(b);break;case 22:var Ae=M!==null&&M.memoizedState!==null;if(b.mode&1?(Ba=(M=Ba)||Ae,tl(k,b),Ba=M):tl(k,b),Mo(b),G&8192){if(M=b.memoizedState!==null,(b.stateNode.isHidden=M)&&!Ae&&(b.mode&1)!==0)for(vr=b,G=b.child;G!==null;){for(k=vr=G;vr!==null;){Ae=vr;var st=Ae.child;switch(Ae.tag){case 0:case 11:case 14:case 15:jd(4,Ae,Ae.return);break;case 1:Xn(Ae,Ae.return);var Ct=Ae.stateNode;if(typeof Ct.componentWillUnmount=="function"){var ar=Ae,Pr=Ae.return;try{var fn=ar;Ct.props=fn.memoizedProps,Ct.state=fn.memoizedState,Ct.componentWillUnmount()}catch(kr){bs(ar,Pr,kr)}}break;case 5:Xn(Ae,Ae.return);break;case 22:if(Ae.memoizedState!==null){Bg(k);continue}}st!==null?(st.return=Ae,vr=st):Bg(k)}G=G.sibling}if(xe){e:if(G=null,xe)for(k=b;;){if(k.tag===5){if(G===null){G=k;try{J=k.stateNode,M?lr(J):we(k.stateNode,k.memoizedProps)}catch(kr){bs(b,b.return,kr)}}}else if(k.tag===6){if(G===null)try{oe=k.stateNode,M?Er(oe):_e(oe,k.memoizedProps)}catch(kr){bs(b,b.return,kr)}}else if((k.tag!==22&&k.tag!==23||k.memoizedState===null||k===b)&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===b)break e;for(;k.sibling===null;){if(k.return===null||k.return===b)break e;G===k&&(G=null),k=k.return}G===k&&(G=null),k.sibling.return=k.return,k=k.sibling}}}break;case 19:tl(k,b),Mo(b),G&4&&Fd(b);break;case 21:break;default:tl(k,b),Mo(b)}}function Mo(b){var k=b.flags;if(k&2){try{if(xe){e:{for(var M=b.return;M!==null;){if(mx(M)){var G=M;break e}M=M.return}throw Error(i(160))}switch(G.tag){case 5:var J=G.stateNode;G.flags&32&&(br(J),G.flags&=-33);var oe=Pd(b);gx(b,oe,J);break;case 3:case 4:var Ae=G.stateNode.containerInfo,st=Pd(b);Fh(b,st,Ae);break;default:throw Error(i(161))}}}catch(Ct){bs(b,b.return,Ct)}b.flags&=-3}k&4096&&(b.flags&=-4097)}function X0(b,k,M){vr=b,Ig(b)}function Ig(b,k,M){for(var G=(b.mode&1)!==0;vr!==null;){var J=vr,oe=J.child;if(J.tag===22&&G){var Ae=J.memoizedState!==null||K0;if(!Ae){var st=J.alternate,Ct=st!==null&&st.memoizedState!==null||Ba;st=K0;var ar=Ba;if(K0=Ae,(Ba=Ct)&&!ar)for(vr=J;vr!==null;)Ae=vr,Ct=Ae.child,Ae.tag===22&&Ae.memoizedState!==null?$g(J):Ct!==null?(Ct.return=Ae,vr=Ct):$g(J);for(;oe!==null;)vr=oe,Ig(oe),oe=oe.sibling;vr=J,K0=st,Ba=ar}Lg(b)}else(J.subtreeFlags&8772)!==0&&oe!==null?(oe.return=J,vr=oe):Lg(b)}}function Lg(b){for(;vr!==null;){var k=vr;if((k.flags&8772)!==0){var M=k.alternate;try{if((k.flags&8772)!==0)switch(k.tag){case 0:case 11:case 15:Ba||Y0(5,k);break;case 1:var G=k.stateNode;if(k.flags&4&&!Ba)if(M===null)G.componentDidMount();else{var J=k.elementType===k.type?M.memoizedProps:Ao(k.type,M.memoizedProps);G.componentDidUpdate(J,M.memoizedState,G.__reactInternalSnapshotBeforeUpdate)}var oe=k.updateQueue;oe!==null&&sb(k,oe,G);break;case 3:var Ae=k.updateQueue;if(Ae!==null){if(M=null,k.child!==null)switch(k.child.tag){case 5:M=ue(k.child.stateNode);break;case 1:M=k.child.stateNode}sb(k,Ae,M)}break;case 5:var st=k.stateNode;M===null&&k.flags&4&&Xe(st,k.type,k.memoizedProps,k);break;case 6:break;case 4:break;case 12:break;case 13:if(De&&k.memoizedState===null){var Ct=k.alternate;if(Ct!==null){var ar=Ct.memoizedState;if(ar!==null){var Pr=ar.dehydrated;Pr!==null&&ve(Pr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Ba||k.flags&512&&Dg(k)}catch(fn){bs(k,k.return,fn)}}if(k===b){vr=null;break}if(M=k.sibling,M!==null){M.return=k.return,vr=M;break}vr=k.return}}function Bg(b){for(;vr!==null;){var k=vr;if(k===b){vr=null;break}var M=k.sibling;if(M!==null){M.return=k.return,vr=M;break}vr=k.return}}function $g(b){for(;vr!==null;){var k=vr;try{switch(k.tag){case 0:case 11:case 15:var M=k.return;try{Y0(4,k)}catch(Ct){bs(k,M,Ct)}break;case 1:var G=k.stateNode;if(typeof G.componentDidMount=="function"){var J=k.return;try{G.componentDidMount()}catch(Ct){bs(k,J,Ct)}}var oe=k.return;try{Dg(k)}catch(Ct){bs(k,oe,Ct)}break;case 5:var Ae=k.return;try{Dg(k)}catch(Ct){bs(k,Ae,Ct)}}}catch(Ct){bs(k,k.return,Ct)}if(k===b){vr=null;break}var st=k.sibling;if(st!==null){st.return=k.return,vr=st;break}vr=k.return}}var Hc=0,Li=1,Zl=2,J0=3,Oh=4;if(typeof Symbol=="function"&&Symbol.for){var Oo=Symbol.for;Hc=Oo("selector.component"),Li=Oo("selector.has_pseudo_class"),Zl=Oo("selector.role"),J0=Oo("selector.test_id"),Oh=Oo("selector.text")}function ec(b){var k=He(b);if(k!=null){if(typeof k.memoizedProps["data-testname"]!="string")throw Error(i(364));return k}if(b=Qe(b),b===null)throw Error(i(362));return b.stateNode.current}function Dh(b,k){switch(k.$$typeof){case Hc:if(b.type===k.value)return!0;break;case Li:e:{k=k.value,b=[b,0];for(var M=0;M<b.length;){var G=b[M++],J=b[M++],oe=k[J];if(G.tag!==5||!$t(G)){for(;oe!=null&&Dh(G,oe);)J++,oe=k[J];if(J===k.length){k=!0;break e}else for(G=G.child;G!==null;)b.push(G,J),G=G.sibling}}k=!1}return k;case Zl:if(b.tag===5&&Gt(b.stateNode,k.value))return!0;break;case Oh:if((b.tag===5||b.tag===6)&&(b=Ot(b),b!==null&&0<=b.indexOf(k.value)))return!0;break;case J0:if(b.tag===5&&(b=b.memoizedProps["data-testname"],typeof b=="string"&&b.toLowerCase()===k.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function Ug(b){switch(b.$$typeof){case Hc:return"<"+(P(b.value)||"Unknown")+">";case Li:return":has("+(Ug(b)||"")+")";case Zl:return'[role="'+b.value+'"]';case Oh:return'"'+b.value+'"';case J0:return'[data-testname="'+b.value+'"]';default:throw Error(i(365))}}function tc(b,k){var M=[];b=[b,0];for(var G=0;G<b.length;){var J=b[G++],oe=b[G++],Ae=k[oe];if(J.tag!==5||!$t(J)){for(;Ae!=null&&Dh(J,Ae);)oe++,Ae=k[oe];if(oe===k.length)M.push(J);else for(J=J.child;J!==null;)b.push(J,oe),J=J.sibling}}return M}function rc(b,k){if(!je)throw Error(i(363));b=ec(b),b=tc(b,k),k=[],b=Array.from(b);for(var M=0;M<b.length;){var G=b[M++];if(G.tag===5)$t(G)||k.push(G.stateNode);else for(G=G.child;G!==null;)b.push(G),G=G.sibling}return k}var zg=Math.ceil,Rh=o.ReactCurrentDispatcher,Q0=o.ReactCurrentOwner,Bs=o.ReactCurrentBatchConfig,gn=0,rs=null,Cs=null,Ys=0,_a=0,Pu=Gr(0),Ts=0,Z0=null,Gc=0,hs=0,ef=0,Md=null,gi=null,tf=0,Ih=1/0,Bi=null;function Zn(){Ih=vn()+500}var $s=!1,sa=null,Tl=null,Fu=!1,rl=null,Wg=0,aa=0,Lh=null,rf=-1,nf=0;function vs(){return(gn&6)!==0?vn():rf!==-1?rf:rf=vn()}function Sa(b){return(b.mode&1)===0?1:(gn&2)!==0&&Ys!==0?Ys&-Ys:JS.transition!==null?(nf===0&&(nf=yt()),nf):(b=We,b!==0?b:_t())}function pi(b,k,M,G){if(50<aa)throw aa=0,Lh=null,Error(i(185));Nt(b,M,G),((gn&2)===0||b!==rs)&&(b===rs&&((gn&2)===0&&(hs|=M),Ts===4&&Vc(b,Ys)),xi(b,G),M===1&&gn===0&&(k.mode&1)===0&&(Zn(),R0&&Ya()))}function xi(b,k){var M=b.callbackNode;qe(b,k);var G=Pt(b,b===rs?Ys:0);if(G===0)M!==null&&xs(M),b.callbackNode=null,b.callbackPriority=0;else if(k=G&-G,b.callbackPriority!==k){if(M!=null&&xs(M),k===1)b.tag===0?K2(px.bind(null,b)):fg(px.bind(null,b)),tt?Pe(function(){(gn&6)===0&&Ya()}):sr(kn,Ya),M=null;else{switch(fr(G)){case 1:M=kn;break;case 4:M=Kl;break;case 16:M=Fi;break;case 536870912:M=gh;break;default:M=Fi}M=Sx(M,Hg.bind(null,b))}b.callbackPriority=k,b.callbackNode=M}}function Hg(b,k){if(rf=-1,nf=0,(gn&6)!==0)throw Error(i(327));var M=b.callbackNode;if(qc()&&b.callbackNode!==M)return null;var G=Pt(b,b===rs?Ys:0);if(G===0)return null;if((G&30)!==0||(G&b.expiredLanes)!==0||k)k=Od(b,G);else{k=G;var J=gn;gn|=2;var oe=yx();(rs!==b||Ys!==k)&&(Bi=null,Zn(),Mu(b,k));do try{vx();break}catch(st){sf(b,st)}while(!0);V1(),Rh.current=oe,gn=J,Cs!==null?k=0:(rs=null,Ys=0,k=Ts)}if(k!==0){if(k===2&&(J=Lt(b),J!==0&&(G=J,k=Gg(b,J))),k===1)throw M=Z0,Mu(b,0),Vc(b,G),xi(b,vn()),M;if(k===6)Vc(b,G);else{if(J=b.current.alternate,(G&30)===0&&!pb(J)&&(k=Od(b,G),k===2&&(oe=Lt(b),oe!==0&&(G=oe,k=Gg(b,oe))),k===1))throw M=Z0,Mu(b,0),Vc(b,G),xi(b,vn()),M;switch(b.finishedWork=J,b.finishedLanes=G,k){case 0:case 1:throw Error(i(345));case 2:Ou(b,gi,Bi);break;case 3:if(Vc(b,G),(G&130023424)===G&&(k=tf+500-vn(),10<k)){if(Pt(b,0)!==0)break;if(J=b.suspendedLanes,(J&G)!==G){vs(),b.pingedLanes|=b.suspendedLanes&J;break}b.timeoutHandle=Q(Ou.bind(null,b,gi,Bi),k);break}Ou(b,gi,Bi);break;case 4:if(Vc(b,G),(G&4194240)===G)break;for(k=b.eventTimes,J=-1;0<G;){var Ae=31-Pn(G);oe=1<<Ae,Ae=k[Ae],Ae>J&&(J=Ae),G&=~oe}if(G=J,G=vn()-G,G=(120>G?120:480>G?480:1080>G?1080:1920>G?1920:3e3>G?3e3:4320>G?4320:1960*zg(G/1960))-G,10<G){b.timeoutHandle=Q(Ou.bind(null,b,gi,Bi),G);break}Ou(b,gi,Bi);break;case 5:Ou(b,gi,Bi);break;default:throw Error(i(329))}}}return xi(b,vn()),b.callbackNode===M?Hg.bind(null,b):null}function Gg(b,k){var M=Md;return b.current.memoizedState.isDehydrated&&(Mu(b,k).flags|=256),b=Od(b,k),b!==2&&(k=gi,gi=M,k!==null&&Vg(k)),b}function Vg(b){gi===null?gi=b:gi.push.apply(gi,b)}function pb(b){for(var k=b;;){if(k.flags&16384){var M=k.updateQueue;if(M!==null&&(M=M.stores,M!==null))for(var G=0;G<M.length;G++){var J=M[G],oe=J.getSnapshot;J=J.value;try{if(!bl(oe(),J))return!1}catch{return!1}}}if(M=k.child,k.subtreeFlags&16384&&M!==null)M.return=k,k=M;else{if(k===b)break;for(;k.sibling===null;){if(k.return===null||k.return===b)return!0;k=k.return}k.sibling.return=k.return,k=k.sibling}}return!0}function Vc(b,k){for(k&=~ef,k&=~hs,b.suspendedLanes|=k,b.pingedLanes&=~k,b=b.expirationTimes;0<k;){var M=31-Pn(k),G=1<<M;b[M]=-1,k&=~G}}function px(b){if((gn&6)!==0)throw Error(i(327));qc();var k=Pt(b,0);if((k&1)===0)return xi(b,vn()),null;var M=Od(b,k);if(b.tag!==0&&M===2){var G=Lt(b);G!==0&&(k=G,M=Gg(b,G))}if(M===1)throw M=Z0,Mu(b,0),Vc(b,k),xi(b,vn()),M;if(M===6)throw Error(i(345));return b.finishedWork=b.current.alternate,b.finishedLanes=k,Ou(b,gi,Bi),xi(b,vn()),null}function xx(b){rl!==null&&rl.tag===0&&(gn&6)===0&&qc();var k=gn;gn|=1;var M=Bs.transition,G=We;try{if(Bs.transition=null,We=1,b)return b()}finally{We=G,Bs.transition=M,gn=k,(gn&6)===0&&Ya()}}function qg(){_a=Pu.current,zr(Pu)}function Mu(b,k){b.finishedWork=null,b.finishedLanes=0;var M=b.timeoutHandle;if(M!==ce&&(b.timeoutHandle=ce,ae(M)),Cs!==null)for(M=Cs.return;M!==null;){var G=M;switch(yh(G),G.tag){case 1:G=G.type.childContextTypes,G!=null&&Te();break;case 3:pd(),zr(jn),zr(Lr),Q1();break;case 5:X1(G);break;case 4:pd();break;case 13:zr(As);break;case 19:zr(As);break;case 10:bh(G.type._context);break;case 22:case 23:qg()}M=M.return}if(rs=b,Cs=b=Du(b.current,null),Ys=_a=k,Ts=0,Z0=null,ef=hs=Gc=0,gi=Md=null,yu!==null){for(k=0;k<yu.length;k++)if(M=yu[k],G=M.interleaved,G!==null){M.interleaved=null;var J=G.next,oe=M.pending;if(oe!==null){var Ae=oe.next;oe.next=J,G.next=Ae}M.pending=G}yu=null}return b}function sf(b,k){do{var M=Cs;try{if(V1(),ao.current=Sd,z0){for(var G=Ss.memoizedState;G!==null;){var J=G.queue;J!==null&&(J.pending=null),G=G.next}z0=!1}if(_u=0,ba=na=Ss=null,_h=!1,Sh=0,Q0.current=null,M===null||M.return===null){Ts=1,Z0=k,Cs=null;break}e:{var oe=b,Ae=M.return,st=M,Ct=k;if(k=Ys,st.flags|=32768,Ct!==null&&typeof Ct=="object"&&typeof Ct.then=="function"){var ar=Ct,Pr=st,fn=Pr.tag;if((Pr.mode&1)===0&&(fn===0||fn===11||fn===15)){var kr=Pr.alternate;kr?(Pr.updateQueue=kr.updateQueue,Pr.memoizedState=kr.memoizedState,Pr.lanes=kr.lanes):(Pr.updateQueue=null,Pr.memoizedState=null)}var ms=fb(Ae);if(ms!==null){ms.flags&=-257,Cu(ms,Ae,st,oe,k),ms.mode&1&&db(oe,ar,k),k=ms,Ct=ar;var Jn=k.updateQueue;if(Jn===null){var $i=new Set;$i.add(Ct),k.updateQueue=$i}else Jn.add(Ct);break e}else{if((k&1)===0){db(oe,ar,k),af();break e}Ct=Error(i(426))}}else if(ys&&st.mode&1){var nc=fb(Ae);if(nc!==null){(nc.flags&65536)===0&&(nc.flags|=256),Cu(nc,Ae,st,oe,k),H1(kd(Ct,st));break e}}oe=Ct=kd(Ct,st),Ts!==4&&(Ts=2),Md===null?Md=[oe]:Md.push(oe),oe=Ae;do{switch(oe.tag){case 3:oe.flags|=65536,k&=-k,oe.lanes|=k;var wt=Xl(oe,Ct,k);$0(oe,wt);break e;case 1:st=Ct;var ut=oe.type,Ft=oe.stateNode;if((oe.flags&128)===0&&(typeof ut.getDerivedStateFromError=="function"||Ft!==null&&typeof Ft.componentDidCatch=="function"&&(Tl===null||!Tl.has(Ft)))){oe.flags|=65536,k&=-k,oe.lanes|=k;var Cr=Pg(oe,st,k);$0(oe,Cr);break e}}oe=oe.return}while(oe!==null)}wx(M)}catch(Wr){k=Wr,Cs===M&&M!==null&&(Cs=M=M.return);continue}break}while(!0)}function yx(){var b=Rh.current;return Rh.current=Sd,b===null?Sd:b}function af(){(Ts===0||Ts===3||Ts===2)&&(Ts=4),rs===null||(Gc&268435455)===0&&(hs&268435455)===0||Vc(rs,Ys)}function Od(b,k){var M=gn;gn|=2;var G=yx();(rs!==b||Ys!==k)&&(Bi=null,Mu(b,k));do try{xb();break}catch(J){sf(b,J)}while(!0);if(V1(),gn=M,Rh.current=G,Cs!==null)throw Error(i(261));return rs=null,Ys=0,Ts}function xb(){for(;Cs!==null;)bx(Cs)}function vx(){for(;Cs!==null&&!yn();)bx(Cs)}function bx(b){var k=_b(b.alternate,b,_a);b.memoizedProps=b.pendingProps,k===null?wx(b):Cs=k,Q0.current=null}function wx(b){var k=b;do{var M=k.alternate;if(b=k.return,(k.flags&32768)===0){if(M=Ad(M,k,_a),M!==null){Cs=M;return}}else{if(M=mb(M,k),M!==null){M.flags&=32767,Cs=M;return}if(b!==null)b.flags|=32768,b.subtreeFlags=0,b.deletions=null;else{Ts=6,Cs=null;return}}if(k=k.sibling,k!==null){Cs=k;return}Cs=k=b}while(k!==null);Ts===0&&(Ts=5)}function Ou(b,k,M){var G=We,J=Bs.transition;try{Bs.transition=null,We=1,yb(b,k,M,G)}finally{Bs.transition=J,We=G}return null}function yb(b,k,M,G){do qc();while(rl!==null);if((gn&6)!==0)throw Error(i(327));M=b.finishedWork;var J=b.finishedLanes;if(M===null)return null;if(b.finishedWork=null,b.finishedLanes=0,M===b.current)throw Error(i(177));b.callbackNode=null,b.callbackPriority=0;var oe=M.lanes|M.childLanes;if(Vr(b,oe),b===rs&&(Cs=rs=null,Ys=0),(M.subtreeFlags&2064)===0&&(M.flags&2064)===0||Fu||(Fu=!0,Sx(Fi,function(){return qc(),null})),oe=(M.flags&15990)!==0,(M.subtreeFlags&15990)!==0||oe){oe=Bs.transition,Bs.transition=null;var Ae=We;We=1;var st=gn;gn|=4,Q0.current=null,gb(b,M),Mh(M,b),B(b.containerInfo),b.current=M,X0(M),on(),gn=st,We=Ae,Bs.transition=oe}else b.current=M;if(Fu&&(Fu=!1,rl=b,Wg=J),oe=b.pendingLanes,oe===0&&(Tl=null),D0(M.stateNode),xi(b,vn()),k!==null)for(G=b.onRecoverableError,M=0;M<k.length;M++)J=k[M],G(J.value,{componentStack:J.stack,digest:J.digest});if($s)throw $s=!1,b=sa,sa=null,b;return(Wg&1)!==0&&b.tag!==0&&qc(),oe=b.pendingLanes,(oe&1)!==0?b===Lh?aa++:(aa=0,Lh=b):aa=0,Ya(),null}function qc(){if(rl!==null){var b=fr(Wg),k=Bs.transition,M=We;try{if(Bs.transition=null,We=16>b?16:b,rl===null)var G=!1;else{if(b=rl,rl=null,Wg=0,(gn&6)!==0)throw Error(i(331));var J=gn;for(gn|=4,vr=b.current;vr!==null;){var oe=vr,Ae=oe.child;if((vr.flags&16)!==0){var st=oe.deletions;if(st!==null){for(var Ct=0;Ct<st.length;Ct++){var ar=st[Ct];for(vr=ar;vr!==null;){var Pr=vr;switch(Pr.tag){case 0:case 11:case 15:jd(8,Pr,oe)}var fn=Pr.child;if(fn!==null)fn.return=Pr,vr=fn;else for(;vr!==null;){Pr=vr;var kr=Pr.sibling,ms=Pr.return;if(Ph(Pr),Pr===ar){vr=null;break}if(kr!==null){kr.return=ms,vr=kr;break}vr=ms}}}var Jn=oe.alternate;if(Jn!==null){var $i=Jn.child;if($i!==null){Jn.child=null;do{var nc=$i.sibling;$i.sibling=null,$i=nc}while($i!==null)}}vr=oe}}if((oe.subtreeFlags&2064)!==0&&Ae!==null)Ae.return=oe,vr=Ae;else e:for(;vr!==null;){if(oe=vr,(oe.flags&2048)!==0)switch(oe.tag){case 0:case 11:case 15:jd(9,oe,oe.return)}var wt=oe.sibling;if(wt!==null){wt.return=oe.return,vr=wt;break e}vr=oe.return}}var ut=b.current;for(vr=ut;vr!==null;){Ae=vr;var Ft=Ae.child;if((Ae.subtreeFlags&2064)!==0&&Ft!==null)Ft.return=Ae,vr=Ft;else e:for(Ae=ut;vr!==null;){if(st=vr,(st.flags&2048)!==0)try{switch(st.tag){case 0:case 11:case 15:Y0(9,st)}}catch(Wr){bs(st,st.return,Wr)}if(st===Ae){vr=null;break e}var Cr=st.sibling;if(Cr!==null){Cr.return=st.return,vr=Cr;break e}vr=st.return}}if(gn=J,Ya(),no&&typeof no.onPostCommitFiberRoot=="function")try{no.onPostCommitFiberRoot(pu,b)}catch{}G=!0}return G}finally{We=M,Bs.transition=k}}return!1}function _x(b,k,M){k=kd(M,k),k=Xl(b,k,1),b=$c(b,k,1),k=vs(),b!==null&&(Nt(b,1,k),xi(b,k))}function bs(b,k,M){if(b.tag===3)_x(b,b,M);else for(;k!==null;){if(k.tag===3){_x(k,b,M);break}else if(k.tag===1){var G=k.stateNode;if(typeof k.type.getDerivedStateFromError=="function"||typeof G.componentDidCatch=="function"&&(Tl===null||!Tl.has(G))){b=kd(M,b),b=Pg(k,b,1),k=$c(k,b,1),b=vs(),k!==null&&(Nt(k,1,b),xi(k,b));break}}k=k.return}}function vb(b,k,M){var G=b.pingCache;G!==null&&G.delete(k),k=vs(),b.pingedLanes|=b.suspendedLanes&M,rs===b&&(Ys&M)===M&&(Ts===4||Ts===3&&(Ys&130023424)===Ys&&500>vn()-tf?Mu(b,0):ef|=M),xi(b,k)}function bb(b,k){k===0&&((b.mode&1)===0?k=1:(k=vl,vl<<=1,(vl&130023424)===0&&(vl=4194304)));var M=vs();b=kl(b,k),b!==null&&(Nt(b,k,M),xi(b,M))}function wb(b){var k=b.memoizedState,M=0;k!==null&&(M=k.retryLane),bb(b,M)}function e3(b,k){var M=0;switch(b.tag){case 13:var G=b.stateNode,J=b.memoizedState;J!==null&&(M=J.retryLane);break;case 19:G=b.stateNode;break;default:throw Error(i(314))}G!==null&&G.delete(k),bb(b,M)}var _b;_b=function(b,k,M){if(b!==null)if(b.memoizedProps!==k.pendingProps||jn.current)wa=!0;else{if((b.lanes&M)===0&&(k.flags&128)===0)return wa=!1,Eu(b,k,M);wa=(b.flags&131072)!==0}else wa=!1,ys&&(k.flags&1048576)!==0&&Y2(k,dd,k.index);switch(k.lanes=0,k.tag){case 2:var G=k.type;jh(b,k),b=k.pendingProps;var J=ya(k,Lr.current);B0(k,M),J=kh(null,k,G,b,J,M);var oe=_g();return k.flags|=1,typeof J=="object"&&J!==null&&typeof J.render=="function"&&J.$$typeof===void 0?(k.tag=1,k.memoizedState=null,k.updateQueue=null,On(G)?(oe=!0,Dr(k)):oe=!1,k.memoizedState=J.state!==null&&J.state!==void 0?J.state:null,K1(k),J.updater=Eh,k.stateNode=J,J._reactInternals=k,Yl(k,G,b,M),k=hi(null,k,G,!0,oe,M)):(k.tag=0,ys&&oe&&xh(k),La(null,k,J,M),k=k.child),k;case 16:G=k.elementType;e:{switch(jh(b,k),b=k.pendingProps,J=G._init,G=J(G._payload),k.type=G,J=k.tag=t3(G),b=Ao(G,b),J){case 0:k=Jl(null,k,G,b,M);break e;case 1:k=Qa(null,k,G,b,M);break e;case 11:k=Fg(null,k,G,b,M);break e;case 14:k=Cd(null,k,G,Ao(G.type,b),M);break e}throw Error(i(306,G,""))}return k;case 0:return G=k.type,J=k.pendingProps,J=k.elementType===G?J:Ao(G,J),Jl(b,k,G,J,M);case 1:return G=k.type,J=k.pendingProps,J=k.elementType===G?J:Ao(G,J),Qa(b,k,G,J,M);case 3:e:{if(Tu(k),b===null)throw Error(i(387));G=k.pendingProps,oe=k.memoizedState,J=oe.element,nb(b,k),vu(k,G,null,M);var Ae=k.memoizedState;if(G=Ae.element,De&&oe.isDehydrated)if(oe={element:G,isDehydrated:!1,cache:Ae.cache,pendingSuspenseBoundaries:Ae.pendingSuspenseBoundaries,transitions:Ae.transitions},k.updateQueue.baseState=oe,k.memoizedState=oe,k.flags&256){J=kd(Error(i(423)),k),k=Td(b,k,G,M,J);break e}else if(G!==J){J=kd(Error(i(424)),k),k=Td(b,k,G,M,J);break e}else for(De&&(Oi=fe(k.stateNode.containerInfo),Xa=k,ys=!0,Sl=null,vh=!1),M=tb(k,null,G,M),k.child=M;M;)M.flags=M.flags&-3|4096,M=M.sibling;else{if(fd(),G===J){k=Wc(b,k,M);break e}La(b,k,G,M)}k=k.child}return k;case 5:return Y1(k),b===null&&W1(k),G=k.type,J=k.pendingProps,oe=b!==null?b.memoizedProps:null,Ae=J.children,H(G,J)?Ae=null:oe!==null&&H(G,oe)&&(k.flags|=32),ts(b,k),La(b,k,Ae,M),k.child;case 6:return b===null&&W1(k),null;case 13:return fx(b,k,M);case 4:return bg(k,k.stateNode.containerInfo),G=k.pendingProps,b===null?k.child=md(k,null,G,M):La(b,k,G,M),k.child;case 11:return G=k.type,J=k.pendingProps,J=k.elementType===G?J:Ao(G,J),Fg(b,k,G,J,M);case 7:return La(b,k,k.pendingProps,M),k.child;case 8:return La(b,k,k.pendingProps.children,M),k.child;case 12:return La(b,k,k.pendingProps.children,M),k.child;case 10:e:{if(G=k.type._context,J=k.pendingProps,oe=k.memoizedProps,Ae=J.value,rb(k,G,Ae),oe!==null)if(bl(oe.value,Ae)){if(oe.children===J.children&&!jn.current){k=Wc(b,k,M);break e}}else for(oe=k.child,oe!==null&&(oe.return=k);oe!==null;){var st=oe.dependencies;if(st!==null){Ae=oe.child;for(var Ct=st.firstContext;Ct!==null;){if(Ct.context===G){if(oe.tag===1){Ct=Bc(-1,M&-M),Ct.tag=2;var ar=oe.updateQueue;if(ar!==null){ar=ar.shared;var Pr=ar.pending;Pr===null?Ct.next=Ct:(Ct.next=Pr.next,Pr.next=Ct),ar.pending=Ct}}oe.lanes|=M,Ct=oe.alternate,Ct!==null&&(Ct.lanes|=M),gd(oe.return,M,k),st.lanes|=M;break}Ct=Ct.next}}else if(oe.tag===10)Ae=oe.type===k.type?null:oe.child;else if(oe.tag===18){if(Ae=oe.return,Ae===null)throw Error(i(341));Ae.lanes|=M,st=Ae.alternate,st!==null&&(st.lanes|=M),gd(Ae,M,k),Ae=oe.sibling}else Ae=oe.child;if(Ae!==null)Ae.return=oe;else for(Ae=oe;Ae!==null;){if(Ae===k){Ae=null;break}if(oe=Ae.sibling,oe!==null){oe.return=Ae.return,Ae=oe;break}Ae=Ae.return}oe=Ae}La(b,k,J.children,M),k=k.child}return k;case 9:return J=k.type,G=k.pendingProps.children,B0(k,M),J=To(J),G=G(J),k.flags|=1,La(b,k,G,M),k.child;case 14:return G=k.type,J=Ao(G,k.pendingProps),J=Ao(G.type,J),Cd(b,k,G,J,M);case 15:return zc(b,k,k.type,k.pendingProps,M);case 17:return G=k.type,J=k.pendingProps,J=k.elementType===G?J:Ao(G,J),jh(b,k),k.tag=1,On(G)?(b=!0,Dr(k)):b=!1,B0(k,M),ub(k,G,J),Yl(k,G,J,M),hi(null,k,G,!0,b,M);case 19:return Og(b,k,M);case 22:return fs(b,k,M)}throw Error(i(156,k.tag))};function Sx(b,k){return sr(b,k)}function Sb(b,k,M,G){this.tag=b,this.key=M,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=k,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=G,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Do(b,k,M,G){return new Sb(b,k,M,G)}function of(b){return b=b.prototype,!(!b||!b.isReactComponent)}function t3(b){if(typeof b=="function")return of(b)?1:0;if(b!=null){if(b=b.$$typeof,b===y)return 11;if(b===S)return 14}return 2}function Du(b,k){var M=b.alternate;return M===null?(M=Do(b.tag,k,b.key,b.mode),M.elementType=b.elementType,M.type=b.type,M.stateNode=b.stateNode,M.alternate=b,b.alternate=M):(M.pendingProps=k,M.type=b.type,M.flags=0,M.subtreeFlags=0,M.deletions=null),M.flags=b.flags&14680064,M.childLanes=b.childLanes,M.lanes=b.lanes,M.child=b.child,M.memoizedProps=b.memoizedProps,M.memoizedState=b.memoizedState,M.updateQueue=b.updateQueue,k=b.dependencies,M.dependencies=k===null?null:{lanes:k.lanes,firstContext:k.firstContext},M.sibling=b.sibling,M.index=b.index,M.ref=b.ref,M}function Kg(b,k,M,G,J,oe){var Ae=2;if(G=b,typeof b=="function")of(b)&&(Ae=1);else if(typeof b=="string")Ae=5;else e:switch(b){case d:return Za(M.children,J,oe,k);case f:Ae=8,J|=8;break;case h:return b=Do(12,M,k,J|2),b.elementType=h,b.lanes=oe,b;case v:return b=Do(13,M,k,J),b.elementType=v,b.lanes=oe,b;case C:return b=Do(19,M,k,J),b.elementType=C,b.lanes=oe,b;case T:return lf(M,J,oe,k);default:if(typeof b=="object"&&b!==null)switch(b.$$typeof){case g:Ae=10;break e;case p:Ae=9;break e;case y:Ae=11;break e;case S:Ae=14;break e;case w:Ae=16,G=null;break e}throw Error(i(130,b==null?b:typeof b,""))}return k=Do(Ae,M,k,J),k.elementType=b,k.type=G,k.lanes=oe,k}function Za(b,k,M,G){return b=Do(7,b,G,k),b.lanes=M,b}function lf(b,k,M,G){return b=Do(22,b,G,k),b.elementType=T,b.lanes=M,b.stateNode={isHidden:!1},b}function cf(b,k,M){return b=Do(6,b,null,k),b.lanes=M,b}function Yg(b,k,M){return k=Do(4,b.children!==null?b.children:[],b.key,k),k.lanes=M,k.stateNode={containerInfo:b.containerInfo,pendingChildren:null,implementation:b.implementation},k}function kb(b,k,M,G,J){this.tag=k,this.containerInfo=b,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ce,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yr(0),this.expirationTimes=yr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yr(0),this.identifierPrefix=G,this.onRecoverableError=J,De&&(this.mutableSourceEagerHydrationData=null)}function kx(b,k,M,G,J,oe,Ae,st,Ct){return b=new kb(b,k,M,st,Ct),k===1?(k=1,oe===!0&&(k|=8)):k=0,oe=Do(3,null,null,k),b.current=oe,oe.stateNode=b,oe.memoizedState={element:G,isDehydrated:M,cache:null,transitions:null,pendingSuspenseBoundaries:null},K1(oe),b}function Xg(b){if(!b)return xn;b=b._reactInternals;e:{if(F(b)!==b||b.tag!==1)throw Error(i(170));var k=b;do{switch(k.tag){case 3:k=k.stateNode.context;break e;case 1:if(On(k.type)){k=k.stateNode.__reactInternalMemoizedMergedChildContext;break e}}k=k.return}while(k!==null);throw Error(i(171))}if(b.tag===1){var M=b.type;if(On(M))return Sr(b,M,k)}return k}function Dd(b){var k=b._reactInternals;if(k===void 0)throw typeof b.render=="function"?Error(i(188)):(b=Object.keys(b).join(","),Error(i(268,b)));return b=V(k),b===null?null:b.stateNode}function Jg(b,k){if(b=b.memoizedState,b!==null&&b.dehydrated!==null){var M=b.retryLane;b.retryLane=M!==0&&M<k?M:k}}function uf(b,k){Jg(b,k),(b=b.alternate)&&Jg(b,k)}function r3(b){return b=V(b),b===null?null:b.stateNode}function Cb(){return null}return r.attemptContinuousHydration=function(b){if(b.tag===13){var k=kl(b,134217728);if(k!==null){var M=vs();pi(k,b,134217728,M)}uf(b,134217728)}},r.attemptDiscreteHydration=function(b){if(b.tag===13){var k=kl(b,1);if(k!==null){var M=vs();pi(k,b,1,M)}uf(b,1)}},r.attemptHydrationAtCurrentPriority=function(b){if(b.tag===13){var k=Sa(b),M=kl(b,k);if(M!==null){var G=vs();pi(M,b,k,G)}uf(b,k)}},r.attemptSynchronousHydration=function(b){switch(b.tag){case 3:var k=b.stateNode;if(k.current.memoizedState.isDehydrated){var M=$e(k.pendingLanes);M!==0&&(Dn(k,M|1),xi(k,vn()),(gn&6)===0&&(Zn(),Ya()))}break;case 13:xx(function(){var G=kl(b,1);if(G!==null){var J=vs();pi(G,b,1,J)}}),uf(b,1)}},r.batchedUpdates=function(b,k){var M=gn;gn|=1;try{return b(k)}finally{gn=M,gn===0&&(Zn(),R0&&Ya())}},r.createComponentSelector=function(b){return{$$typeof:Hc,value:b}},r.createContainer=function(b,k,M,G,J,oe,Ae){return kx(b,k,!1,null,M,G,J,oe,Ae)},r.createHasPseudoClassSelector=function(b){return{$$typeof:Li,value:b}},r.createHydrationContainer=function(b,k,M,G,J,oe,Ae,st,Ct){return b=kx(M,G,!0,b,J,oe,Ae,st,Ct),b.context=Xg(null),M=b.current,G=vs(),J=Sa(M),oe=Bc(G,J),oe.callback=k??null,$c(M,oe,J),b.current.lanes=J,Nt(b,J,G),xi(b,G),b},r.createPortal=function(b,k,M){var G=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:G==null?null:""+G,children:b,containerInfo:k,implementation:M}},r.createRoleSelector=function(b){return{$$typeof:Zl,value:b}},r.createTestNameSelector=function(b){return{$$typeof:J0,value:b}},r.createTextSelector=function(b){return{$$typeof:Oh,value:b}},r.deferredUpdates=function(b){var k=We,M=Bs.transition;try{return Bs.transition=null,We=16,b()}finally{We=k,Bs.transition=M}},r.discreteUpdates=function(b,k,M,G,J){var oe=We,Ae=Bs.transition;try{return Bs.transition=null,We=1,b(k,M,G,J)}finally{We=oe,Bs.transition=Ae,gn===0&&Zn()}},r.findAllNodes=rc,r.findBoundingRects=function(b,k){if(!je)throw Error(i(363));k=rc(b,k),b=[];for(var M=0;M<k.length;M++)b.push(vt(k[M]));for(k=b.length-1;0<k;k--){M=b[k];for(var G=M.x,J=G+M.width,oe=M.y,Ae=oe+M.height,st=k-1;0<=st;st--)if(k!==st){var Ct=b[st],ar=Ct.x,Pr=ar+Ct.width,fn=Ct.y,kr=fn+Ct.height;if(G>=ar&&oe>=fn&&J<=Pr&&Ae<=kr){b.splice(k,1);break}else if(G!==ar||M.width!==Ct.width||kr<oe||fn>Ae){if(!(oe!==fn||M.height!==Ct.height||Pr<G||ar>J)){ar>G&&(Ct.width+=ar-G,Ct.x=G),Pr<J&&(Ct.width=J-ar),b.splice(k,1);break}}else{fn>oe&&(Ct.height+=fn-oe,Ct.y=oe),kr<Ae&&(Ct.height=Ae-fn),b.splice(k,1);break}}}return b},r.findHostInstance=Dd,r.findHostInstanceWithNoPortals=function(b){return b=L(b),b=b!==null?Y(b):null,b===null?null:b.stateNode},r.findHostInstanceWithWarning=function(b){return Dd(b)},r.flushControlled=function(b){var k=gn;gn|=1;var M=Bs.transition,G=We;try{Bs.transition=null,We=1,b()}finally{We=G,Bs.transition=M,gn=k,gn===0&&(Zn(),Ya())}},r.flushPassiveEffects=qc,r.flushSync=xx,r.focusWithin=function(b,k){if(!je)throw Error(i(363));for(b=ec(b),k=tc(b,k),k=Array.from(k),b=0;b<k.length;){var M=k[b++];if(!$t(M)){if(M.tag===5&&ir(M.stateNode))return!0;for(M=M.child;M!==null;)k.push(M),M=M.sibling}}return!1},r.getCurrentUpdatePriority=function(){return We},r.getFindAllNodesFailureDescription=function(b,k){if(!je)throw Error(i(363));var M=0,G=[];b=[ec(b),0];for(var J=0;J<b.length;){var oe=b[J++],Ae=b[J++],st=k[Ae];if((oe.tag!==5||!$t(oe))&&(Dh(oe,st)&&(G.push(Ug(st)),Ae++,Ae>M&&(M=Ae)),Ae<k.length))for(oe=oe.child;oe!==null;)b.push(oe,Ae),oe=oe.sibling}if(M<k.length){for(b=[];M<k.length;M++)b.push(Ug(k[M]));return`findAllNodes was able to match part of the selector:
  `+(G.join(" > ")+`

No matching component was found for:
  `)+b.join(" > ")}return null},r.getPublicRootInstance=function(b){if(b=b.current,!b.child)return null;switch(b.child.tag){case 5:return ue(b.child.stateNode);default:return b.child.stateNode}},r.injectIntoDevTools=function(b){if(b={bundleType:b.bundleType,version:b.version,rendererPackageName:b.rendererPackageName,rendererConfig:b.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:r3,findFiberByHostInstance:b.findFiberByHostInstance||Cb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")b=!1;else{var k=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(k.isDisabled||!k.supportsFiber)b=!0;else{try{pu=k.inject(b),no=k}catch{}b=!!k.checkDCE}}return b},r.isAlreadyRendering=function(){return!1},r.observeVisibleRects=function(b,k,M,G){if(!je)throw Error(i(363));b=rc(b,k);var J=dt(b,M,G).disconnect;return{disconnect:function(){J()}}},r.registerMutableSourceForHydration=function(b,k){var M=k._getVersion;M=M(k._source),b.mutableSourceEagerHydrationData==null?b.mutableSourceEagerHydrationData=[k,M]:b.mutableSourceEagerHydrationData.push(k,M)},r.runWithPriority=function(b,k){var M=We;try{return We=b,k()}finally{We=M}},r.shouldError=function(){return null},r.shouldSuspend=function(){return!1},r.updateContainer=function(b,k,M,G){var J=k.current,oe=vs(),Ae=Sa(J);return M=Xg(M),k.context===null?k.context=M:k.pendingContext=M,k=Bc(oe,Ae),k.payload={element:b},G=G===void 0?null:G,G!==null&&(k.callback=G),b=$c(J,k,Ae),b!==null&&(pi(b,J,Ae,oe),wh(b,J,Ae)),Ae},r}),n5}var SP;function mse(){return SP||(SP=1,r5.exports=hse()),r5.exports}var gse=mse();const pse=Fc(gse);var s5={exports:{}},vf={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kP;function xse(){return kP||(kP=1,vf.ConcurrentRoot=1,vf.ContinuousEventPriority=4,vf.DefaultEventPriority=16,vf.DiscreteEventPriority=1,vf.IdleEventPriority=536870912,vf.LegacyRoot=0),vf}var CP;function yse(){return CP||(CP=1,s5.exports=xse()),s5.exports}var aU=yse(),vse=En();const TP={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let EP=!1,NP=!1;const $T=".react-konva-event";let iU=!1;function bse(e){iU=e}const wse=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,_se=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,Sse={};function U_(e,t,r=Sse){if(!EP&&"zIndex"in t&&(console.warn(_se),EP=!0),!NP&&t.draggable){var n=t.x!==void 0||t.y!==void 0,s=t.onDragEnd||t.onDragMove;n&&!s&&(console.warn(wse),NP=!0)}for(var a in r)if(!TP[a]){var i=a.slice(0,2)==="on",o=r[a]!==t[a];if(i&&o){var c=a.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),e.off(c,r[a])}var u=!t.hasOwnProperty(a);u&&e.setAttr(a,void 0)}var d=iU||t._useStrictMode,f={},h=!1;const g={};for(var a in t)if(!TP[a]){var i=a.slice(0,2)==="on",p=r[a]!==t[a];if(i&&p){var c=a.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),t[a]&&(g[c]=t[a])}!i&&(t[a]!==r[a]||d&&t[a]!==e.getAttr(a))&&(h=!0,f[a]=t[a])}h&&(e.setAttrs(f),rh(e));for(var c in g)e.on(c+$T,g[c])}function rh(e){if(!vse.Konva.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}var a5=qC();const oU={},kse={};wv.Node.prototype._applyProps=U_;function Cse(e,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}e.add(t),rh(e)}function Tse(e,t,r){let n=wv[e];n||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),n=wv.Group);const s={},a={};for(var i in t){var o=i.slice(0,2)==="on";o?a[i]=t[i]:s[i]=t[i]}const c=new n(s);return U_(c,a),c}function Ese(e,t,r){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)}function Nse(e,t,r){return!1}function Ase(e){return e}function jse(){return null}function Pse(){return null}function Fse(e,t,r,n){return kse}function Mse(){}function Ose(e){}function Dse(e,t){return!1}function Rse(){return oU}function Ise(){return oU}const Lse=setTimeout,Bse=clearTimeout,$se=-1;function Use(e,t){return!1}const zse=!1,Wse=!0,Hse=!0;function Gse(e,t){t.parent===e?t.moveToTop():e.add(t),rh(e)}function Vse(e,t){t.parent===e?t.moveToTop():e.add(t),rh(e)}function lU(e,t,r){t._remove(),e.add(t),t.setZIndex(r.getZIndex()),rh(e)}function qse(e,t,r){lU(e,t,r)}function Kse(e,t){t.destroy(),t.off($T),rh(e)}function Yse(e,t){t.destroy(),t.off($T),rh(e)}function Xse(e,t,r){console.error(`Text components are not yet supported in ReactKonva. You text is: "${r}"`)}function Jse(e,t,r){}function Qse(e,t,r,n,s){U_(e,s,n)}function Zse(e){e.hide(),rh(e)}function eae(e){}function tae(e,t){(t.visible==null||t.visible)&&e.show()}function rae(e,t){}function nae(e){}function sae(){}const aae=()=>aU.DefaultEventPriority,iae=Object.freeze(Object.defineProperty({__proto__:null,appendChild:Gse,appendChildToContainer:Vse,appendInitialChild:Cse,cancelTimeout:Bse,clearContainer:nae,commitMount:Jse,commitTextUpdate:Xse,commitUpdate:Qse,createInstance:Tse,createTextInstance:Ese,detachDeletedInstance:sae,finalizeInitialChildren:Nse,getChildHostContext:Ise,getCurrentEventPriority:aae,getPublicInstance:Ase,getRootHostContext:Rse,hideInstance:Zse,hideTextInstance:eae,idlePriority:a5.unstable_IdlePriority,insertBefore:lU,insertInContainerBefore:qse,isPrimaryRenderer:zse,noTimeout:$se,now:a5.unstable_now,prepareForCommit:jse,preparePortalMount:Pse,prepareUpdate:Fse,removeChild:Kse,removeChildFromContainer:Yse,resetAfterCommit:Mse,resetTextContent:Ose,run:a5.unstable_runWithPriority,scheduleTimeout:Lse,shouldDeprioritizeSubtree:Dse,shouldSetTextContent:Use,supportsMutation:Hse,unhideInstance:tae,unhideTextInstance:rae,warnsIfNotActing:Wse},Symbol.toStringTag,{value:"Module"}));var oae=Object.defineProperty,lae=Object.defineProperties,cae=Object.getOwnPropertyDescriptors,AP=Object.getOwnPropertySymbols,uae=Object.prototype.hasOwnProperty,dae=Object.prototype.propertyIsEnumerable,jP=(e,t,r)=>t in e?oae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,PP=(e,t)=>{for(var r in t||(t={}))uae.call(t,r)&&jP(e,r,t[r]);if(AP)for(var r of AP(t))dae.call(t,r)&&jP(e,r,t[r]);return e},fae=(e,t)=>lae(e,cae(t)),FP,MP;typeof window<"u"&&((FP=window.document)!=null&&FP.createElement||((MP=window.navigator)==null?void 0:MP.product)==="ReactNative")?_.useLayoutEffect:_.useEffect;function cU(e,t,r){if(!e)return;if(r(e)===!0)return e;let n=e.child;for(;n;){const s=cU(n,t,r);if(s)return s;n=n.sibling}}function uU(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const OP=console.error;console.error=function(){const e=[...arguments].join("");if(e?.startsWith("Warning:")&&e.includes("useContext")){console.error=OP;return}return OP.apply(this,arguments)};const UT=uU(_.createContext(null));class dU extends _.Component{render(){return _.createElement(UT.Provider,{value:this._reactInternals},this.props.children)}}function hae(){const e=_.useContext(UT);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=_.useId();return _.useMemo(()=>{for(const n of[e,e?.alternate]){if(!n)continue;const s=cU(n,!1,a=>{let i=a.memoizedState;for(;i;){if(i.memoizedState===t)return!0;i=i.next}});if(s)return s}},[e,t])}function mae(){const e=hae(),[t]=_.useState(()=>new Map);t.clear();let r=e;for(;r;){if(r.type&&typeof r.type=="object"){const s=r.type._context===void 0&&r.type.Provider===r.type?r.type:r.type._context;s&&s!==UT&&!t.has(s)&&t.set(s,_.useContext(uU(s)))}r=r.return}return t}function fU(){const e=mae();return _.useMemo(()=>Array.from(e.keys()).reduce((t,r)=>n=>_.createElement(t,null,_.createElement(r.Provider,fae(PP({},n),{value:e.get(r)}))),t=>_.createElement(dU,PP({},t))),[e])}function gae(e){const t=zs.useRef({});return zs.useLayoutEffect(()=>{t.current=e}),zs.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const pae=e=>{const t=zs.useRef(null),r=zs.useRef(null),n=zs.useRef(null),s=gae(e),a=fU(),i=o=>{const{forwardedRef:c}=e;c&&(typeof c=="function"?c(o):c.current=o)};return zs.useLayoutEffect(()=>(r.current=new wv.Stage({width:e.width,height:e.height,container:t.current}),i(r.current),n.current=Sp.createContainer(r.current,aU.LegacyRoot,!1,null),Sp.updateContainer(zs.createElement(a,{},e.children),n.current),()=>{wv.isBrowser&&(i(null),Sp.updateContainer(null,n.current,null),r.current.destroy())}),[]),zs.useLayoutEffect(()=>{i(r.current),U_(r.current,e,s),Sp.updateContainer(zs.createElement(a,{},e.children),n.current,null)}),zs.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},km="Layer",xae="FastLayer",au="Group",yae="Label",Ti="Rect",Rf="Circle",vae="Ellipse",bae="Wedge",Vi="Line",wae="Sprite",hU="Image",Hu="Text",_ae="TextPath",Sae="Star",kae="Ring",Cae="Arc",Tae="Tag",Eae="Path",Nae="RegularPolygon",r8="Arrow",Aae="Shape",mU="Transformer",jae="18.2.13",Sp=pse(iae);Sp.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:zs.version,rendererPackageName:"react-konva"});const Cm=zs.forwardRef((e,t)=>zs.createElement(dU,{},zs.createElement(pae,{...e,forwardedRef:t}))),Pae=bse,Fae=Object.freeze(Object.defineProperty({__proto__:null,Arc:Cae,Arrow:r8,Circle:Rf,Ellipse:vae,FastLayer:xae,Group:au,Image:hU,KonvaRenderer:Sp,Label:yae,Layer:km,Line:Vi,Path:Eae,Rect:Ti,RegularPolygon:Nae,Ring:kae,Shape:Aae,Sprite:wae,Stage:Cm,Star:Sae,Tag:Tae,Text:Hu,TextPath:_ae,Transformer:mU,Wedge:bae,useContextBridge:fU,useStrictMode:Pae,version:jae},Symbol.toStringTag,{value:"Module"})),Ht=({children:e,hover:t=!0,className:r="",paddingClass:n="p-6",...s})=>{const a=`
    bg-white rounded-xl shadow-md border border-gray-200 ${n}
    ${t?"hover:shadow-lg hover:-translate-y-1 transition-all duration-200":""}
    ${r}
  `;return l.jsx(ht.div,{className:a,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},...s,children:e})},Mae=({children:e,className:t=""})=>l.jsx("div",{className:`border-b border-gray-200 pb-4 mb-4 ${t}`,children:e}),Oae=({children:e,className:t="",style:r={}})=>{const s=r&&r.color?"":"text-gray-800";return l.jsx("h3",{className:`text-xl font-semibold ${s} ${t}`,style:r,children:e})},Dae=({children:e,className:t=""})=>l.jsx("div",{className:`py-4 ${t}`,children:e}),Rae=({children:e,className:t=""})=>l.jsx("div",{className:`border-t border-gray-200 pt-4 mt-4 ${t}`,children:e});Ht.Header=Mae;Ht.Title=Oae;Ht.Body=Dae;Ht.Footer=Rae;const Aa=({isOpen:e=!1,onClose:t,title:r="",children:n,size:s="medium",showCloseButton:a=!0,closeOnBackdropClick:i=!0,className:o="",...c})=>{const u=f=>{i&&f.target===f.currentTarget&&t()};zs.useEffect(()=>{const f=p=>{p.key==="Escape"&&t()},h=window;h.__modalOpenCount||(h.__modalOpenCount=0);let g;return e&&(document.addEventListener("keydown",f),g=document.body.style.overflow,h.__modalOpenCount===0&&(document.body.style.overflow="hidden"),h.__modalOpenCount+=1),()=>{document.removeEventListener("keydown",f),h.__modalOpenCount&&h.__modalOpenCount>0&&(h.__modalOpenCount-=1),h.__modalOpenCount===0&&(g!==void 0?document.body.style.overflow=g||"":document.body.style.overflow="")}},[e,t]);const d={small:"max-w-md",medium:"max-w-lg",large:"max-w-4xl"};return e?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:u,role:"dialog","aria-modal":"true","aria-label":r,...c,children:l.jsxs("div",{className:`
          bg-white rounded-xl shadow-md border border-gray-200 p-8
          hover:shadow-lg hover:-translate-y-1 transition-all duration-200
          w-full ${d[s]} mx-auto
          ${o}
        `,onClick:f=>f.stopPropagation(),children:[(r||a)&&l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r&&l.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:r}),a&&l.jsx("button",{onClick:t,className:"text-red-500 hover:text-red-700 hover:bg-red-50 transition-all duration-200 rounded-full p-2 text-2xl font-bold leading-none","aria-label":"Close modal",children:""})]}),l.jsx("div",{className:"space-y-6",children:n})]})}):null},Iae=e=>{const[t,r]=_.useState({width:800,height:600}),n=_.useRef(null),s=_.useCallback(()=>{if(e.current){e.current.getBoundingClientRect();const a=Math.min(1200,window.innerWidth*.8),i=Math.min(800,window.innerHeight*.6),o=4/3;let c=a,u=c/o;u>i&&(u=i,c=u*o),r({width:c,height:u})}},[e]);return _.useEffect(()=>(s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)),[s]),{canvasSize:t,stageRef:n,updateCanvasSize:s}},Lae=e=>{const[t,r]=_.useState({width:800,height:600}),[n,s]=_.useState({}),a=_.useCallback(()=>{if(e.current){const o=e.current.getBoundingClientRect();r({width:o.width,height:Math.max(400,o.height)})}},[e]),i=_.useCallback(o=>o<480?{stageHeight:300,blockMinSize:50,fontSize:12,padding:10,touchTargetSize:44,arrowThickness:4}:o<768?{stageHeight:400,blockMinSize:60,fontSize:14,padding:15,touchTargetSize:44,arrowThickness:4}:o<1024?{stageHeight:500,blockMinSize:70,fontSize:16,padding:20,touchTargetSize:40,arrowThickness:3}:{stageHeight:600,blockMinSize:80,fontSize:18,padding:25,touchTargetSize:32,arrowThickness:2},[]);return _.useEffect(()=>{const o=i(t.width);s(o)},[t.width,i]),_.useEffect(()=>{a();const o=()=>{a()};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[a]),{containerSize:t,responsiveSettings:n,updateSize:a}},DP={convertToOriginal:(e,t,r)=>r?{x:Number(((e-r.x)/r.scale).toFixed(4)),y:Number(((t-r.y)/r.scale).toFixed(4))}:{x:e,y:t},convertToCanvas:(e,t,r)=>r?{x:Number((r.x+e*r.scale).toFixed(4)),y:Number((r.y+t*r.scale).toFixed(4))}:{x:e,y:t},isPointInImage:(e,t)=>t?e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height:!1,calculateImageScale:(e,t)=>{if(!e||!t)return 1;const r=40,n=t.width-r,s=t.height-r;return Math.min(n/e.width,s/e.height)},calculateImageInfo:(e,t)=>{if(!e||!t)return null;const r=40,n=t.width-r,s=t.height-r,a=Math.min(n/e.width,s/e.height),i=e.width*a,o=e.height*a,c=(t.width-i)/2,u=(t.height-o)/2;return{x:c,y:u,width:i,height:o,scale:a,originalWidth:e.width,originalHeight:e.height}}},Bae=e=>{const t=_.useCallback((n,s)=>DP.convertToOriginal(n,s,e),[e]),r=_.useCallback((n,s)=>DP.convertToCanvas(n,s,e),[e]);return{convertToOriginal:t,convertToCanvas:r}},wy={create:(e,t,r,n,s)=>({id:s,x:e-r/2,y:t-n/2,width:Math.max(r,30),height:Math.max(n,10),fill:"rgba(0, 123, 255, 0.15)",stroke:"#007bff",strokeWidth:2,cornerRadius:6,shadowColor:"rgba(0, 123, 255, 0.3)",shadowBlur:10,shadowOffset:{x:0,y:2},shadowOpacity:.5}),validate:e=>e.width>0&&e.height>0,findAtPosition:(e,t,r)=>e.find(n=>t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height),generateId:()=>`block_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},dp={create:(e,t,r,n,s,a,i)=>({id:i,startX:e,startY:t,endX:r,endY:n,startBlock:s,endBlock:a,stroke:"#dc3545",fill:"#dc3545",strokeWidth:3,pointerLength:10,pointerWidth:10}),snapToNearestBlock:(e,t,r,n=60)=>{let s=null,a=1/0;for(const i of r){const o=i.x+i.width/2,c=i.y+i.height/2,u=Math.sqrt(Math.pow(e-o,2)+Math.pow(t-c,2));u<=n&&u<a&&(a=u,s=i)}return s?{x:s.x+s.width/2,y:s.y+s.height/2,blockId:s.id,block:s,distance:a}:null},validate:(e,t,r,n,s)=>dp.snapToNearestBlock(e,t,s)!==null,generateId:()=>`arrow_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},i5={create:(e,t,r)=>({id:r,blockId:e,word:t}),update:(e,t,r)=>e.map(n=>n.blockId===t?{...n,word:r}:n),delete:(e,t)=>e.filter(r=>r.blockId!==t),generateId:e=>`word_${e}`,validate:e=>e&&e.trim().length>0},$ae=async e=>{const t=[];if(e.size>512e3){const n=(e.size/1024).toFixed(1);t.push(`Image is too large (${n}KB). Maximum allowed size is 500KB. Please compress or resize your image.`)}return new Promise(n=>{const s=new Image;s.onload=()=>{(s.width>4e3||s.height>4e3)&&t.push(`Image is too large (${s.width}x${s.height} pixels). Maximum allowed dimensions are 4000x4000 pixels. Please resize your image.`),n({valid:t.length===0,errors:t,dimensions:{width:s.width,height:s.height}})},s.onerror=()=>{t.push("Invalid image file"),n({valid:!1,errors:t})},s.src=URL.createObjectURL(e)})},Uae=(e,t=500)=>new Promise(r=>{const n=document.createElement("canvas"),s=n.getContext("2d"),a=new Image;a.onload=()=>{let{width:i,height:o}=a;const c=2e3;if(i>c||o>c){const f=Math.min(c/i,c/o);i*=f,o*=f}n.width=i,n.height=o,s.drawImage(a,0,0,i,o);let u=.8;const d=()=>{n.toBlob(f=>{f.size<=t*1024||u<=.1?r(f):(u-=.1,d())},"image/jpeg",u)};d()},a.onerror=()=>{r(e)},a.src=URL.createObjectURL(e)}),zae=e=>new Promise((t,r)=>{const n=new FileReader;n.onload=s=>t(s.target.result),n.onerror=s=>r(s),n.readAsDataURL(e)}),Wae=()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return{blockMinSize:e?60:40,arrowThickness:e?4:2,touchTargetSize:e?44:32,doubleTapDelay:e?300:200,isMobile:e}},Hae={testData:{blocks:[],words:[],arrows:[],imageUrl:null},canvas:{size:{width:800,height:600},image:null,imageInfo:null,selectedTool:"edit"},creation:{isCreatingBlock:!1,isDrawingArrow:!1,blockCreationStart:null,arrowStart:null,previewBlock:null,previewArrow:null},ui:{selectedBlock:null,showWordPanel:!1,isLoading:!1,error:null,showImageSizeModal:!1,imageSizeError:null}},Gae=(e,t)=>{switch(t.type){case"SET_CANVAS_SIZE":return{...e,canvas:{...e.canvas,size:t.payload}};case"SET_IMAGE":return{...e,canvas:{...e.canvas,image:t.payload}};case"SET_IMAGE_INFO":return{...e,canvas:{...e.canvas,imageInfo:t.payload}};case"SET_SELECTED_TOOL":return{...e,canvas:{...e.canvas,selectedTool:t.payload}};case"ADD_BLOCK":return{...e,testData:{...e.testData,blocks:[...e.testData.blocks,t.payload]}};case"ADD_WORD":return{...e,testData:{...e.testData,words:[...e.testData.words,t.payload]}};case"ADD_ARROW":return{...e,testData:{...e.testData,arrows:[...e.testData.arrows,t.payload]}};case"UPDATE_BLOCK":return{...e,testData:{...e.testData,blocks:e.testData.blocks.map(r=>r.id===t.payload.id?{...r,...t.payload.updates}:r)}};case"DELETE_BLOCK":return{...e,testData:{...e.testData,blocks:e.testData.blocks.filter(r=>r.id!==t.payload),words:e.testData.words.filter(r=>r.blockId!==t.payload),arrows:e.testData.arrows.filter(r=>r.startBlock!==t.payload&&r.endBlock!==t.payload)}};case"UPDATE_WORDS":return{...e,testData:{...e.testData,words:t.payload}};case"SET_CREATION_STATE":return{...e,creation:{...e.creation,...t.payload}};case"SET_UI_STATE":return{...e,ui:{...e.ui,...t.payload}};case"SET_LOADING":return{...e,ui:{...e.ui,isLoading:t.payload}};case"SET_ERROR":return{...e,ui:{...e.ui,error:t.payload}};case"SHOW_IMAGE_SIZE_MODAL":return{...e,ui:{...e.ui,showImageSizeModal:!0,imageSizeError:t.payload}};case"HIDE_IMAGE_SIZE_MODAL":return{...e,ui:{...e.ui,showImageSizeModal:!1,imageSizeError:null}};case"RESET_TESTDATA":return{...e,testData:{blocks:[],words:[],arrows:[],imageUrl:e.testData.imageUrl}};default:return e}},Vae=({testName:e="",showQuestionCount:t=!0,onTestSaved:r,onCancel:n,onBackToCabinet:s,isSaving:a=!1,validationErrors:i={}})=>{const[o,c]=_.useReducer(Gae,Hae),{showNotification:u}=ci(),{makeAuthenticatedRequest:d}=Gl(),{user:f}=Is(),h=_.useRef(null),g=_.useRef(null),p=_.useRef(null),y=_.useRef({}),v=_.useRef({}),{canvasSize:C,stageRef:S}=Iae(h),{containerSize:w,responsiveSettings:T}=Lae(h),[N,A]=_.useState(null),P=T?.stageHeight??600,j=_.useMemo(()=>P+150,[P]),F=T?.padding??20;_.useEffect(()=>{if(!o.canvas.image||!h.current)return;const q=h.current?.clientWidth||800,H=h.current?.clientHeight||600,te=q/o.canvas.image.width,Q=H/o.canvas.image.height,ae=Math.min(te,Q,1),ce=o.canvas.image.width*ae,me=o.canvas.image.height*ae,xe=(q-ce)/2,se=(H-me)/2;A({x:xe,y:se,width:ce,height:me,scaleX:ae,scaleY:ae,scale:ae,image:o.canvas.image})},[o.canvas.image,h.current?.clientWidth,h.current?.clientHeight]);const{convertToOriginal:R}=Bae(N);_.useEffect(()=>{c({type:"SET_CANVAS_SIZE",payload:C})},[C]),_.useEffect(()=>{N&&c({type:"SET_IMAGE_INFO",payload:N})},[N]),_.useEffect(()=>{const q=p.current;if(!q)return;const H=o.ui.selectedBlock?.id?y.current[o.ui.selectedBlock.id]:null;H?(q.nodes([H]),q.getLayer()?.batchDraw()):(q.nodes([]),q.getLayer()?.batchDraw())},[o.ui.selectedBlock]);const L=_.useCallback(()=>{c({type:"SET_UI_STATE",payload:{selectedBlock:null}}),c({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!1,isDrawingArrow:!1,blockCreationStart:null,arrowStart:null,previewBlock:null,previewArrow:null}}),c({type:"RESET_TESTDATA"}),c({type:"SET_ERROR",payload:null})},[]),V=_.useCallback(async q=>{const H=q.target.files[0];if(!H){u("Please select a file","error");return}try{c({type:"SET_LOADING",payload:!0});const te=await $ae(H);if(!te.valid){c({type:"SHOW_IMAGE_SIZE_MODAL",payload:{errors:te.errors,fileSize:(H.size/1024).toFixed(1),dimensions:te.dimensions}});return}let Q=H;if(H.size>500*1024){u("Image is large, compressing to meet size requirements...","info");try{Q=await Uae(H,500);const me=(H.size/1024).toFixed(1),xe=(Q.size/1024).toFixed(1);u(`Image compressed from ${me}KB to ${xe}KB`,"success")}catch{u("Failed to compress image. Please try a smaller image.","error");return}}const ae=await zae(Q),ce=new Image;ce.crossOrigin="anonymous",ce.onload=()=>{c({type:"SET_IMAGE",payload:ce}),c({type:"SET_UI_STATE",payload:{imageUrl:ae}}),u("Image uploaded successfully!","success")},ce.onerror=()=>{u("Failed to load image","error")},ce.src=ae}catch(te){console.error("Image upload error:",te),u("Error processing image","error")}finally{c({type:"SET_LOADING",payload:!1})}},[u]),Z=_.useCallback(q=>{const H=S.current;if(!H)return;const te=H.getPointerPosition();if(te){if(o.canvas.selectedTool==="create"){const Q=wy.findAtPosition(o.testData.blocks,te.x,te.y);if(Q){c({type:"SET_UI_STATE",payload:{selectedBlock:Q}});return}c({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!0,blockCreationStart:{x:te.x,y:te.y}}})}else if(o.canvas.selectedTool==="edit"){const Q=wy.findAtPosition(o.testData.blocks,te.x,te.y);c(Q?{type:"SET_UI_STATE",payload:{selectedBlock:Q}}:{type:"SET_UI_STATE",payload:{selectedBlock:null}})}else if(o.canvas.selectedTool==="arrow"){const Q=q.target===H,ae=wy.findAtPosition(o.testData.blocks,te.x,te.y);(Q||!ae)&&c({type:"SET_CREATION_STATE",payload:{isDrawingArrow:!0,arrowStart:{x:te.x,y:te.y}}})}}},[o.canvas.selectedTool,N,o.testData.blocks]),Y=_.useCallback(q=>{if(o.creation.isCreatingBlock&&o.creation.blockCreationStart){const H=S.current;if(!H)return;const te=H.getPointerPosition();if(!te)return;const Q=Math.abs(te.x-o.creation.blockCreationStart.x),ae=Math.abs(te.y-o.creation.blockCreationStart.y),ce=10,me=Math.max(Q,ce),xe=Math.max(ae,ce);c({type:"SET_CREATION_STATE",payload:{previewBlock:{x:Math.min(te.x,o.creation.blockCreationStart.x),y:Math.min(te.y,o.creation.blockCreationStart.y),width:me,height:xe,fill:"rgba(0, 123, 255, 0.3)",stroke:"#007bff",strokeWidth:2,dash:[5,5],opacity:.7}}})}else if(o.creation.isDrawingArrow&&o.creation.arrowStart){const H=S.current;if(!H)return;const te=H.getPointerPosition();if(!te)return;c({type:"SET_CREATION_STATE",payload:{previewArrow:{startX:o.creation.arrowStart.x,startY:o.creation.arrowStart.y,endX:te.x,endY:te.y,stroke:"#dc3545",fill:"#dc3545",strokeWidth:3,dash:[5,5],opacity:.7}}})}},[o.creation]),re=_.useCallback(q=>{if(o.creation.isCreatingBlock&&o.creation.blockCreationStart){const H=S.current;if(!H)return;const te=H.getPointerPosition();if(!te)return;const Q=Math.abs(te.x-o.creation.blockCreationStart.x),ae=Math.abs(te.y-o.creation.blockCreationStart.y),ce=10,me=Math.max(Q,ce),xe=Math.max(ae,ce),se=Math.min(te.x,o.creation.blockCreationStart.x)+me/2,De=Math.min(te.y,o.creation.blockCreationStart.y)+xe/2,He=wy.generateId(),rt=wy.create(se,De,me,xe,He),_t=i5.create(He,`Word ${o.testData.blocks.length+1}`,i5.generateId(He));c({type:"ADD_BLOCK",payload:rt}),c({type:"ADD_WORD",payload:_t}),c({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!1,blockCreationStart:null,previewBlock:null}}),o.testData.blocks.length===0&&c({type:"SET_UI_STATE",payload:{showWordPanel:!0}})}else if(o.creation.isDrawingArrow&&o.creation.arrowStart){const H=S.current;if(!H)return;const te=H.getPointerPosition();if(!te)return;if(dp.validate(o.creation.arrowStart.x,o.creation.arrowStart.y,te.x,te.y,o.testData.blocks)){const Q=dp.snapToNearestBlock(o.creation.arrowStart.x,o.creation.arrowStart.y,o.testData.blocks),ae=dp.snapToNearestBlock(te.x,te.y,o.testData.blocks),ce=Q?Q.x:o.creation.arrowStart.x,me=Q?Q.y:o.creation.arrowStart.y,xe=ae?ae.x:te.x,se=ae?ae.y:te.y,De=dp.generateId(),He=Wae(),rt=dp.create(ce,me,xe,se,Q?Q.blockId:null,ae?ae.blockId:null,De,{strokeWidth:He.arrowThickness,isMobile:He.isMobile});c({type:"ADD_ARROW",payload:rt}),u("Arrow created successfully!","success")}else u("Arrow must start near a block!","error");c({type:"SET_CREATION_STATE",payload:{isDrawingArrow:!1,arrowStart:null,previewArrow:null}})}},[o.creation,o.testData.blocks,u]),ue=_.useCallback(q=>{q.evt.preventDefault(),Z(q)},[Z]),z=_.useCallback(q=>{q.evt.preventDefault(),Y(q)},[Y]),X=_.useCallback(q=>{q.evt.preventDefault(),re(q)},[re]),I=_.useCallback(async()=>{console.log(" [MatchingTestCreator] handleSaveTest clicked");const q=B();if(Object.keys(q).length>0){console.warn(" [MatchingTestCreator] Validation errors:",q),u("Please fix validation errors before saving","error");return}try{console.log(" [MatchingTestCreator] Preparing data to save...",{blocks:o.testData.blocks.length,words:o.testData.words.length,arrows:o.testData.arrows.length,imageUrl:o.ui.imageUrl?"present":"missing"}),c({type:"SET_LOADING",payload:!0});let H=o.ui.imageUrl;if(o.ui.imageUrl&&o.ui.imageUrl.startsWith("data:")){const Q=await d("/.netlify/functions/upload-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataUrl:o.ui.imageUrl,folder:"matching_tests"})}),ae=await Q.json();if(Q.ok&&ae.success&&ae.url)H=ae.url;else throw new Error(ae.message||"Upload failed")}const te=o.testData.blocks.map((Q,ae)=>{let ce;if(N){const se=R(Q.x,Q.y),De=R(Q.x+Q.width,Q.y+Q.height);ce={x:se.x,y:se.y,width:Number((De.x-se.x).toFixed(4)),height:Number((De.y-se.y).toFixed(4))}}else ce={x:Number(Q.x.toFixed(4)),y:Number(Q.y.toFixed(4)),width:Number(Q.width.toFixed(4)),height:Number(Q.height.toFixed(4))};const me=o.testData.words.find(se=>se.blockId===Q.id),xe=o.testData.arrows.find(se=>se.startBlock===Q.id);return{question_id:ae+1,word:me?.word||`Word ${ae+1}`,block_coordinates:ce,has_arrow:!!xe,arrow:xe&&N?(()=>{const se=R(xe.startX,xe.startY),De=R(xe.endX,xe.endY),He=se.x/N.originalWidth*100,rt=se.y/N.originalHeight*100,_t=De.x/N.originalWidth*100,Ke=De.y/N.originalHeight*100;return{start_x:Number(se.x.toFixed(4)),start_y:Number(se.y.toFixed(4)),end_x:Number(De.x.toFixed(4)),end_y:Number(De.y.toFixed(4)),rel_start_x:Number(He.toFixed(4)),rel_start_y:Number(rt.toFixed(4)),rel_end_x:Number(_t.toFixed(4)),rel_end_y:Number(Ke.toFixed(4)),image_width:N.originalWidth,image_height:N.originalHeight,style:xe.style||{color:"#dc3545",thickness:3}}})():null}});r&&(console.log(" [MatchingTestCreator] Calling onTestSaved with processed data"),r({success:!0,message:"Test data prepared for assignment",blocks:o.testData.blocks,words:o.testData.words,arrows:o.testData.arrows,imageUrl:H,processedQuestions:te}))}catch(H){console.error("Save error:",H),u(`Error saving test: ${H.message}`,"error")}finally{c({type:"SET_LOADING",payload:!1})}},[o.testData,o.ui.imageUrl,N,R,d,r,u,e,f]),B=_.useCallback(()=>{const q={};return e.trim()||(q.testName="Test name is required"),o.testData.blocks.length===0&&(q.blocks="At least one block is required"),q},[e,o.testData.blocks.length]),W=()=>l.jsxs("div",{className:"flex flex-wrap gap-2 p-4 bg-gray-50 border-b",children:[l.jsx(ot,{onClick:()=>c({type:"SET_SELECTED_TOOL",payload:"create"}),variant:o.canvas.selectedTool==="create"?"primary":"secondary",size:"sm",children:" Create Blocks"}),l.jsx(ot,{onClick:()=>c({type:"SET_SELECTED_TOOL",payload:"edit"}),variant:o.canvas.selectedTool==="edit"?"primary":"secondary",size:"sm",children:" Edit Blocks"}),l.jsx(ot,{onClick:()=>c({type:"SET_SELECTED_TOOL",payload:"arrow"}),variant:o.canvas.selectedTool==="arrow"?"primary":"secondary",size:"sm",children:" Draw Arrows"}),l.jsx(ot,{onClick:L,variant:"secondary",size:"sm",children:" Reset"}),l.jsx(ot,{onClick:()=>g.current?.click(),variant:"secondary",size:"sm",children:" Upload Image"}),l.jsx("div",{className:"text-xs text-gray-500 text-center col-span-full",children:"Max size: 500KB  Max dimensions: 4000x4000px"})]}),D=()=>l.jsx(Cm,{width:w.width,height:j,ref:S,onMouseDown:Z,onMouseMove:Y,onMouseUp:re,onTouchStart:ue,onTouchMove:z,onTouchEnd:X,className:o.canvas.selectedTool==="arrow"||o.canvas.selectedTool==="create"?"cursor-crosshair":"cursor-default",children:l.jsxs(km,{children:[o.canvas.image&&N&&l.jsx(hU,{image:o.canvas.image,x:N.x,y:N.y,width:N.width,height:N.height}),o.testData.blocks.map(q=>l.jsxs(au,{ref:H=>{H&&(v.current[q.id]=H)},draggable:o.canvas.selectedTool==="edit",x:q.x,y:q.y,onMouseEnter:H=>{const te=H.target.getStage()?.container();te&&(te.style.cursor=o.ui.selectedBlock?.id===q.id?"nwse-resize":"move")},onMouseLeave:H=>{const te=H.target.getStage()?.container();te&&(te.style.cursor=o.canvas.selectedTool==="arrow"?"crosshair":"default")},onDragStart:()=>{c({type:"SET_UI_STATE",payload:{selectedBlock:q}})},onDragEnd:H=>{const{x:te,y:Q}=H.target.position();c({type:"UPDATE_BLOCK",payload:{id:q.id,updates:{x:te,y:Q}}})},onClick:()=>{c({type:"SET_UI_STATE",payload:{selectedBlock:q}})},onTap:()=>{c({type:"SET_UI_STATE",payload:{selectedBlock:q}})},children:[l.jsx(Ti,{ref:H=>{H&&(y.current[q.id]=H)},width:q.width,height:q.height,fill:q.fill,stroke:q.stroke,strokeWidth:q.strokeWidth,cornerRadius:q.cornerRadius,shadowColor:q.shadowColor,shadowBlur:q.shadowBlur,shadowOffset:q.shadowOffset,shadowOpacity:q.shadowOpacity,draggable:o.canvas.selectedTool==="edit",onDragEnd:H=>{const{x:te,y:Q}=H.target.getParent().position();c({type:"UPDATE_BLOCK",payload:{id:q.id,updates:{x:te,y:Q}}})},onMouseEnter:H=>{const te=H.target.getStage()?.container();te&&(te.style.cursor=o.ui.selectedBlock?.id===q.id?"nwse-resize":"move")},onMouseLeave:H=>{const te=H.target.getStage()?.container();te&&(te.style.cursor=o.canvas.selectedTool==="arrow"?"crosshair":"default")},onTransformEnd:H=>{const te=y.current[q.id];if(!te)return;const Q=Math.max(10,te.width()*te.scaleX()),ae=Math.max(10,te.height()*te.scaleY());te.scaleX(1),te.scaleY(1),c({type:"UPDATE_BLOCK",payload:{id:q.id,updates:{width:Q,height:ae}}})}}),l.jsx(Hu,{x:2,y:2,text:`${o.testData.blocks.indexOf(q)+1}`,fontSize:Math.min(T.fontSize,Math.max(8,q.width/4)),fontFamily:"Arial",fill:"#333",fontStyle:"bold",listening:!1})]},q.id)),l.jsx(mU,{ref:p,rotateEnabled:!1,flipEnabled:!1,boundBoxFunc:(q,H)=>({...H,width:Math.max(H.width,10),height:Math.max(H.height,10)})}),o.testData.arrows.map(q=>l.jsx(r8,{points:[q.startX,q.startY,q.endX,q.endY],stroke:q.stroke,fill:q.fill,strokeWidth:q.strokeWidth||T.arrowThickness,pointerLength:q.pointerLength,pointerWidth:q.pointerWidth},q.id)),o.creation.previewBlock&&l.jsx(Ti,{x:o.creation.previewBlock.x,y:o.creation.previewBlock.y,width:o.creation.previewBlock.width,height:o.creation.previewBlock.height,fill:o.creation.previewBlock.fill,stroke:o.creation.previewBlock.stroke,strokeWidth:o.creation.previewBlock.strokeWidth,dash:o.creation.previewBlock.dash,opacity:o.creation.previewBlock.opacity}),o.creation.previewArrow&&l.jsx(r8,{points:[o.creation.previewArrow.startX,o.creation.previewArrow.startY,o.creation.previewArrow.endX,o.creation.previewArrow.endY],stroke:o.creation.previewArrow.stroke,fill:o.creation.previewArrow.fill,strokeWidth:o.creation.previewArrow.strokeWidth,dash:o.creation.previewArrow.dash,opacity:o.creation.previewArrow.opacity})]})}),U=_.useMemo(()=>o.testData.blocks.length===0?null:l.jsxs("div",{className:"word-panel bg-gray-50 border-t border-gray-200 p-4 w-full flex-shrink-0",style:{height:"clamp(420px, 55vh, 640px)",overflowY:"auto"},children:[l.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Words (Auto-created with blocks)"}),l.jsx("div",{className:"space-y-2",children:o.testData.words.map(q=>{const H=o.testData.blocks.find(te=>te.id===q.blockId);return l.jsxs("div",{className:"p-2 bg-white rounded border",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("span",{className:"text-xs text-gray-500",children:["Block ",o.testData.blocks.indexOf(H)+1]}),l.jsx("button",{onClick:()=>c({type:"DELETE_BLOCK",payload:H.id}),className:"text-red-500 hover:text-red-700 text-xs",children:""})]}),l.jsx("input",{type:"text",value:q.word,onChange:te=>{const Q=i5.update(o.testData.words,q.blockId,te.target.value);c({type:"UPDATE_WORDS",payload:Q})},className:"w-full text-sm px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter word text"})]},q.blockId)})})]}),[o.testData.words,o.testData.blocks]);return l.jsxs(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex flex-col h-screen bg-gray-100",children:[l.jsx("div",{className:"bg-white shadow-sm border-b p-4",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("div",{children:l.jsx("div",{className:"mt-2 text-sm text-gray-600",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("span",{children:[l.jsx("strong",{children:"Test Name:"})," ",e||"Untitled Test"]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Questions:"})," ",o.testData.blocks.length," (auto-generated from blocks)"]})]})})})})}),W(),l.jsxs("div",{className:"flex flex-col flex-1 overflow-y-auto gap-4",children:[l.jsx("div",{ref:h,className:"bg-white border overflow-hidden flex-none",style:{height:`${j}px`,minHeight:`${j}px`,maxHeight:`${j+60}px`,padding:`${F}px`},children:D()}),U]}),l.jsx("div",{className:"bg-white border-t p-4",children:l.jsx("div",{className:"flex justify-center",children:l.jsx(ot,{onClick:I,disabled:a||o.ui.isLoading,variant:"primary",size:"lg",children:a||o.ui.isLoading?l.jsx(un,{size:"sm"}):"Save Test"})})}),l.jsx("input",{ref:g,type:"file",accept:"image/*,application/pdf",onChange:V,className:"hidden"}),l.jsx(Aa,{isOpen:o.ui.showImageSizeModal,onClose:()=>c({type:"HIDE_IMAGE_SIZE_MODAL"}),title:" Image Too Large",size:"medium",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("span",{className:"text-red-600 text-2xl mr-2",children:""}),l.jsx("h4",{className:"text-lg font-semibold text-red-800",children:"Image Size Issues"})]}),l.jsx("div",{className:"text-red-700",children:o.ui.imageSizeError?.errors.map((q,H)=>l.jsxs("div",{className:"mb-2",children:[" ",q]},H))})]}),l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[l.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:" Current Image Details:"}),l.jsxs("div",{className:"text-blue-700 space-y-1",children:[l.jsxs("div",{children:[" File size: ",o.ui.imageSizeError?.fileSize,"KB"]}),o.ui.imageSizeError?.dimensions&&l.jsxs("div",{children:[" Dimensions: ",o.ui.imageSizeError.dimensions.width,"  ",o.ui.imageSizeError.dimensions.height," pixels"]})]})]}),l.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[l.jsx("h5",{className:"font-semibold text-green-800 mb-2",children:" Requirements:"}),l.jsxs("div",{className:"text-green-700 space-y-1",children:[l.jsx("div",{children:" Maximum file size: 500KB"}),l.jsx("div",{children:" Maximum dimensions: 4000  4000 pixels"}),l.jsx("div",{children:" Supported formats: All image formats (JPEG, PNG, WebP, etc.)"})]})]}),l.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[l.jsx("h5",{className:"font-semibold text-yellow-800 mb-2",children:" How to Fix:"}),l.jsxs("div",{className:"text-yellow-700 space-y-1",children:[l.jsx("div",{children:" Use an image editor to resize your image"}),l.jsx("div",{children:" Compress the image using online tools"}),l.jsx("div",{children:" Try a different image with smaller dimensions"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx(ot,{onClick:()=>c({type:"HIDE_IMAGE_SIZE_MODAL"}),variant:"secondary",children:"Close"}),l.jsx(ot,{onClick:()=>{c({type:"HIDE_IMAGE_SIZE_MODAL"}),g.current?.click()},variant:"primary",children:"Try Another Image"})]})]})})]})},m1=_.createContext(null);function qae(e,t){return{getTheme:function(){return t??null}}}function ad(){const e=_.useContext(m1);return e==null&&(function(t,...r){const n=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;s.append("code",t);for(const a of r)s.append("v",a);throw n.search=s.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(8),e}function Zt(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const gu=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Kae=gu&&"documentMode"in document?document.documentMode:null,zu=gu&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Tm=gu&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),h4=!(!gu||!("InputEvent"in window)||Kae)&&"getTargetRanges"in new window.InputEvent("input"),_v=gu&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Gp=gu&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Yae=gu&&/Android/.test(navigator.userAgent),gU=gu&&/^(?=.*Chrome).*/i.test(navigator.userAgent),RP=gu&&Yae&&gU,m4=gu&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!gU;function pU(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}const Xae=1,Jae=3,Qae=9,Zae=11,Em=0,xU=1,Vp=2,eie=0,tie=1,rie=2,g4=4,p4=8,zT=128,nie=1792|(112|(3|g4|p4)|zT),WT=1,HT=2,GT=3,VT=4,qT=5,KT=6,z_=_v||Gp||m4?"":"",d0=`

`,sie=Tm?"":z_,Nm={bold:1,capitalize:1024,code:16,highlight:zT,italic:2,lowercase:256,strikethrough:g4,subscript:32,superscript:64,underline:p4,uppercase:512},aie={directionless:1,unmergeable:2},IP={center:HT,end:KT,justify:VT,left:WT,right:GT,start:qT},iie={[HT]:"center",[KT]:"end",[VT]:"justify",[WT]:"left",[GT]:"right",[qT]:"start"},oie={normal:0,segmented:2,token:1},lie={[eie]:"normal",[rie]:"segmented",[tie]:"token"},LP="$config";function yU(e,t,r,n,s,a){let i=e.getFirstChild();for(;i!==null;){const o=i.__key;i.__parent===t&&(Dt(i)&&yU(i,o,r,n,s,a),r.has(o)||a.delete(o),s.push(o)),i=i.getNextSibling()}}const cie=100;let n8=!1,YT=0;function uie(e){YT=e.timeStamp}function o5(e,t,r){const n=e.nodeName==="BR",s=t.__lexicalLineBreak;return s&&(e===s||n&&e.previousSibling===s)||n&&Q_(e,r)!==void 0}function die(e,t,r){const n=fu(kc(r));let s=null,a=null;n!==null&&n.anchorNode===e&&(s=n.anchorOffset,a=n.focusOffset);const i=e.nodeValue;i!==null&&g7(t,i,s,a,!1)}function fie(e,t,r){if(qt(e)){const n=e.anchor.getNode();if(n.is(r)&&e.format!==n.getFormat())return!1}return S0(t)&&r.isAttached()}function hie(e,t,r,n){for(let s=e;s&&!hoe(s);s=m2(s)){const a=Q_(s,t);if(a!==void 0){const i=Ga(a,r);if(i)return Vn(i)||!Ms(s)?void 0:[s,i]}else if(s===n)return[n,mz(r)]}}function vU(e,t,r){n8=!0;const n=performance.now()-YT>cie;try{Pl(e,(()=>{const s=hr()||(function(h){return h.getEditorState().read((()=>{const g=hr();return g!==null?g.clone():null}))})(e),a=new Map,i=e.getRootElement(),o=e._editorState,c=e._blockCursorElement;let u=!1,d="";for(let h=0;h<t.length;h++){const g=t[h],p=g.type,y=g.target,v=hie(y,e,o,i);if(!v)continue;const[C,S]=v;if(p==="characterData")n&&mr(S)&&S0(y)&&fie(s,y,S)&&die(y,S,e);else if(p==="childList"){u=!0;const w=g.addedNodes;for(let A=0;A<w.length;A++){const P=w[A],j=fz(P),F=P.parentNode;if(F!=null&&P!==c&&j===null&&!o5(P,F,e)){if(Tm){const R=(Ms(P)?P.innerText:null)||P.nodeValue;R&&(d+=R)}F.removeChild(P)}}const T=g.removedNodes,N=T.length;if(N>0){let A=0;for(let P=0;P<N;P++){const j=T[P];(o5(j,y,e)||c===j)&&(y.appendChild(j),A++)}N!==A&&a.set(C,S)}}}if(a.size>0)for(const[h,g]of a)g.reconcileObservedMutation(h,e);const f=r.takeRecords();if(f.length>0){for(let h=0;h<f.length;h++){const g=f[h],p=g.addedNodes,y=g.target;for(let v=0;v<p.length;v++){const C=p[v],S=C.parentNode;S==null||C.nodeName!=="BR"||o5(C,y,e)||S.removeChild(C)}}r.takeRecords()}s!==null&&(u&&eo(s),Tm&&yz(e)&&s.insertRawText(d))}))}finally{n8=!1}}function bU(e){const t=e._observer;t!==null&&vU(e,t.takeRecords(),t)}function wU(e){(function(t){YT===0&&kc(t).addEventListener("textInput",uie,!0)})(e),e._observer=new MutationObserver(((t,r)=>{vU(e,t,r)}))}function mie(e){const t=new Map,r=new Set;for(let n=typeof e=="function"?e:e.replace;n.prototype&&n.prototype.getType!==void 0;n=Object.getPrototypeOf(n)){const{ownNodeConfig:s}=b7(n);if(s&&s.stateConfigs)for(const a of s.stateConfigs){let i;"stateConfig"in a?(i=a.stateConfig,a.flat&&r.add(i.key)):i=a,t.set(i.key,i)}}return{flatKeys:r,sharedConfigMap:t}}let gie=class _U{constructor(t,r,n=void 0,s=new Map,a=void 0){this.node=t,this.sharedNodeState=r,this.unknownState=n,this.knownState=s;const{sharedConfigMap:i}=this.sharedNodeState,o=a!==void 0?a:(function(c,u,d){let f=d.size;if(u)for(const h in u){const g=c.get(h);g&&d.has(g)||f++}return f})(i,n,s);this.size=o}getValue(t){const r=this.knownState.get(t);if(r!==void 0)return r;this.sharedNodeState.sharedConfigMap.set(t.key,t);let n=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){const s=this.unknownState[t.key];s!==void 0&&(n=t.parse(s)),this.updateFromKnown(t,n)}return n}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const t={...this.unknownState},r={};for(const[n,s]of this.knownState)n.isEqual(s,n.defaultValue)?delete t[n.key]:t[n.key]=n.unparse(s);for(const n of this.sharedNodeState.flatKeys)n in t&&(r[n]=t[n],delete t[n]);return BP(t)&&(r.$=t),r}getWritable(t){if(this.node===t)return this;const{sharedNodeState:r,unknownState:n}=this,s=new Map(this.knownState);return new _U(t,r,(function(a,i,o){let c;if(o)for(const[u,d]of Object.entries(o)){const f=a.get(u);f?i.has(f)||i.set(f,f.parse(d)):(c=c||{},c[u]=d)}return c})(r.sharedConfigMap,s,n),s,this.size)}updateFromKnown(t,r){const n=t.key;this.sharedNodeState.sharedConfigMap.set(n,t);const{knownState:s,unknownState:a}=this;s.has(t)||a&&n in a||(a&&(delete a[n],this.unknownState=BP(a)),this.size++),s.set(t,r)}updateFromUnknown(t,r){const n=this.sharedNodeState.sharedConfigMap.get(t);n?this.updateFromKnown(n,n.parse(r)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=r)}updateFromJSON(t){const{knownState:r}=this;for(const n of r.keys())r.set(n,n.defaultValue);if(this.size=r.size,this.unknownState=void 0,t)for(const[n,s]of Object.entries(t))this.updateFromUnknown(n,s)}};function pie(e){const t=e.getWritable(),r=t.__state?t.__state.getWritable(t):new gie(t,SU(t));return t.__state=r,r}function SU(e){return e.__state?e.__state.sharedNodeState:cz(g2(),e.getType()).sharedNodeState}function BP(e){if(e)for(const t in e)return e}function $P(e,t,r){for(const[n,s]of t.knownState){if(e.has(n.key))continue;e.add(n.key);const a=r?r.getValue(n):n.defaultValue;if(a!==s&&!n.isEqual(a,s))return!0}return!1}function UP(e,t,r){const{unknownState:n}=t,s=r?r.unknownState:void 0;if(n){for(const[a,i]of Object.entries(n))if(!e.has(a)&&(e.add(a),i!==(s?s[a]:void 0)))return!0}return!1}function zP(e,t){const r=e.__state;return r&&r.node===e?r.getWritable(t):r}function WP(e,t){const r=e.__mode,n=e.__format,s=e.__style,a=t.__mode,i=t.__format,o=t.__style,c=e.__state,u=t.__state;return(r===null||r===a)&&(n===null||n===i)&&(s===null||s===o)&&(e.__state===null||c===u||(function(d,f){if(d===f)return!0;if(d&&f&&d.size!==f.size)return!1;const h=new Set;return!(d&&$P(h,d,f)||f&&$P(h,f,d)||d&&UP(h,d,f)||f&&UP(h,f,d))})(c,u))}function HP(e,t){const r=e.mergeWithSibling(t),n=ra()._normalizedNodes;return n.add(e.__key),n.add(t.__key),r}function GP(e){let t,r,n=e;if(n.__text!==""||!n.isSimpleText()||n.isUnmergeable()){for(;(t=n.getPreviousSibling())!==null&&mr(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(WP(t,n)){n=HP(t,n);break}break}t.remove()}for(;(r=n.getNextSibling())!==null&&mr(r)&&r.isSimpleText()&&!r.isUnmergeable();){if(r.__text!==""){if(WP(n,r)){n=HP(n,r);break}break}r.remove()}}else n.remove()}function x4(e){return VP(e.anchor),VP(e.focus),e}function VP(e){for(;e.type==="element";){const t=e.getNode(),r=e.offset;let n,s;if(r===t.getChildrenSize()?(n=t.getChildAtIndex(r-1),s=!0):(n=t.getChildAtIndex(r),s=!1),mr(n)){e.set(n.__key,s?n.getTextContentSize():0,"text",!0);break}if(!Dt(n))break;e.set(n.__key,s?n.getChildrenSize():0,"element",!0)}}let Am,bo,Sv,W_,s8,a8,jm,lu,i8,kv,ri="",$u=null,Uu="",Hd="",fp=!1,y4=!1;function v4(e,t){const r=jm.get(e);if(t!==null){const n=u8(e);n.parentNode===t&&t.removeChild(n)}if(lu.has(e)||bo._keyToDOMMap.delete(e),Dt(r)){const n=w4(r,jm);o8(n,0,n.length-1,null)}r!==void 0&&p7(kv,Sv,W_,r,"destroyed")}function o8(e,t,r,n){let s=t;for(;s<=r;++s){const a=e[s];a!==void 0&&v4(a,n)}}function Vh(e,t){e.setProperty("text-align",t)}const xie="40px";function kU(e,t){const r=Am.theme.indent;if(typeof r=="string"){const s=e.classList.contains(r);t>0&&!s?e.classList.add(r):t<1&&s&&e.classList.remove(r)}const n=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||xie;e.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${n})`)}function CU(e,t){const r=e.style;t===0?Vh(r,""):t===WT?Vh(r,"left"):t===HT?Vh(r,"center"):t===GT?Vh(r,"right"):t===VT?Vh(r,"justify"):t===qT?Vh(r,"start"):t===KT&&Vh(r,"end")}function l8(e,t){const r=(function(n){const s=n.__dir;if(s!==null)return s;if(ii(n))return null;const a=n.getParentOrThrow();return ii(a)&&a.__dir===null?"auto":null})(t);r!==null?e.dir=r:e.removeAttribute("dir")}function b4(e,t){const r=lu.get(e);r===void 0&&Zt(60);const n=r.createDOM(Am,bo);if((function(s,a,i){const o=i._keyToDOMMap;(function(c,u,d){const f=`__lexicalKey_${u._key}`;c[f]=d})(a,i,s),o.set(s,a)})(e,n,bo),mr(r)?n.setAttribute("data-lexical-text","true"):Vn(r)&&n.setAttribute("data-lexical-decorator","true"),Dt(r)){const s=r.__indent,a=r.__size;if(l8(n,r),s!==0&&kU(n,s),a!==0){const o=a-1;c8(w4(r,lu),r,0,o,r.getDOMSlot(n))}const i=r.__format;i!==0&&CU(n,i),r.isInline()||TU(null,r,n),Z_(r)&&(ri+=d0,Hd+=d0)}else{const s=r.getTextContent();if(Vn(r)){const a=r.decorate(bo,Am);a!==null&&EU(e,a),n.contentEditable="false"}ri+=s,Hd+=s}return t!==null&&t.insertChild(n),p7(kv,Sv,W_,r,"created"),n}function c8(e,t,r,n,s){const a=ri;ri="";let i=r;for(;i<=n;++i){b4(e[i],s);const o=lu.get(e[i]);o!==null&&mr(o)&&($u===null&&($u=o.getFormat()),Uu===""&&(Uu=o.getStyle()))}Z_(t)&&(ri+=d0),s.element.__lexicalTextContent=ri,ri=a+ri}function qP(e,t){if(e){const r=e.__last;if(r){const n=t.get(r);if(n)return t0(n)?"line-break":Vn(n)&&n.isInline()?"decorator":null}return"empty"}return null}function TU(e,t,r){const n=qP(e,jm),s=qP(t,lu);n!==s&&t.getDOMSlot(r).setManagedLineBreak(s)}function yie(e,t,r){var n;$u=null,Uu="",(function(s,a,i){const o=ri,c=s.__size,u=a.__size;ri="";const d=i.element;if(c===1&&u===1){const f=s.__first,h=a.__first;if(f===h)Ry(f,d);else{const p=u8(f),y=b4(h,null);try{d.replaceChild(y,p)}catch(v){if(typeof v=="object"&&v!=null){const C=`${v.toString()} Parent: ${d.tagName}, new child: {tag: ${y.tagName} key: ${h}}, old child: {tag: ${p.tagName}, key: ${f}}.`;throw new Error(C)}throw v}v4(f,null)}const g=lu.get(h);mr(g)&&($u===null&&($u=g.getFormat()),Uu===""&&(Uu=g.getStyle()))}else{const f=w4(s,jm),h=w4(a,lu);if(f.length!==c&&Zt(227),h.length!==u&&Zt(228),c===0)u!==0&&c8(h,a,0,u-1,i);else if(u===0){if(c!==0){const g=i.after==null&&i.before==null&&i.element.__lexicalLineBreak==null;o8(f,0,c-1,g?null:d),g&&(d.textContent="")}}else(function(g,p,y,v,C,S){const w=v-1,T=C-1;let N,A,P=S.getFirstChild(),j=0,F=0;for(;j<=w&&F<=T;){const V=p[j],Z=y[F];if(V===Z)P=l5(Ry(Z,S.element)),j++,F++;else{N===void 0&&(N=new Set(p)),A===void 0&&(A=new Set(y));const re=A.has(V),ue=N.has(Z);if(re)if(ue){const z=Pm(bo,Z);z===P?P=l5(Ry(Z,S.element)):(S.withBefore(P).insertChild(z),Ry(Z,S.element)),j++,F++}else b4(Z,S.withBefore(P)),F++;else P=l5(u8(V)),v4(V,S.element),j++}const Y=lu.get(Z);Y!==null&&mr(Y)&&($u===null&&($u=Y.getFormat()),Uu===""&&(Uu=Y.getStyle()))}const R=j>w,L=F>T;if(R&&!L){const V=y[T+1],Z=V===void 0?null:bo.getElementByKey(V);c8(y,g,F,T,S.withBefore(Z))}else L&&!R&&o8(p,j,w,S.element)})(a,f,h,c,u,i)}Z_(a)&&(ri+=d0),d.__lexicalTextContent=ri,ri=o+ri})(e,t,t.getDOMSlot(r)),n=t,$u==null||$u===n.__textFormat||y4||n.setTextFormat($u),(function(s){Uu===""||Uu===s.__textStyle||y4||s.setTextStyle(Uu)})(t)}function w4(e,t){const r=[];let n=e.__first;for(;n!==null;){const s=t.get(n);s===void 0&&Zt(101),r.push(n),n=s.__next}return r}function Ry(e,t){const r=jm.get(e);let n=lu.get(e);r!==void 0&&n!==void 0||Zt(61);const s=fp||a8.has(e)||s8.has(e),a=Pm(bo,e);if(r===n&&!s){if(Dt(r)){const i=a.__lexicalTextContent;i!==void 0&&(ri+=i,Hd+=i)}else{const i=r.getTextContent();Hd+=i,ri+=i}return a}if(r!==n&&s&&p7(kv,Sv,W_,n,"updated"),n.updateDOM(r,a,Am)){const i=b4(e,null);return t===null&&Zt(62),t.replaceChild(i,a),v4(e,null),i}if(Dt(r)&&Dt(n)){const i=n.__indent;(fp||i!==r.__indent)&&kU(a,i);const o=n.__format;if((fp||o!==r.__format)&&CU(a,o),s&&(yie(r,n,a),ii(n)||n.isInline()||TU(r,n,a)),Z_(n)&&(ri+=d0,Hd+=d0),(fp||n.__dir!==r.__dir)&&(l8(a,n),ii(n)&&!fp))for(const c of n.getChildren())Dt(c)&&l8(Pm(bo,c.getKey()),c)}else{const i=n.getTextContent();if(Vn(n)){const o=n.decorate(bo,Am);o!==null&&EU(e,o)}ri+=i,Hd+=i}if(!y4&&ii(n)&&n.__cachedText!==Hd){const i=n.getWritable();i.__cachedText=Hd,n=i}return a}function EU(e,t){let r=bo._pendingDecorators;const n=bo._decorators;if(r===null){if(n[e]===t)return;r=hz(bo)}r[e]=t}function l5(e){let t=e.nextSibling;return t!==null&&t===bo._blockCursorElement&&(t=t.nextSibling),t}function vie(e,t,r,n,s,a){ri="",Hd="",fp=n===Vp,bo=r,Am=r._config,Sv=r._nodes,W_=bo._listeners.mutation,s8=s,a8=a,jm=e._nodeMap,lu=t._nodeMap,y4=t._readOnly,i8=new Map(r._keyToDOMMap);const i=new Map;return kv=i,Ry("root",null),bo=void 0,Sv=void 0,s8=void 0,a8=void 0,jm=void 0,lu=void 0,Am=void 0,i8=void 0,kv=void 0,i}function u8(e){const t=i8.get(e);return t===void 0&&Zt(75,e),t}function Zr(e){return{type:e}}const NU=Zr("SELECTION_CHANGE_COMMAND"),bie=Zr("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),XT=Zr("CLICK_COMMAND"),hm=Zr("DELETE_CHARACTER_COMMAND"),Ap=Zr("INSERT_LINE_BREAK_COMMAND"),Cv=Zr("INSERT_PARAGRAPH_COMMAND"),jp=Zr("CONTROLLED_TEXT_INSERTION_COMMAND"),JT=Zr("PASTE_COMMAND"),d8=Zr("REMOVE_TEXT_COMMAND"),Tv=Zr("DELETE_WORD_COMMAND"),Ev=Zr("DELETE_LINE_COMMAND"),vo=Zr("FORMAT_TEXT_COMMAND"),QT=Zr("UNDO_COMMAND"),ZT=Zr("REDO_COMMAND"),wie=Zr("KEYDOWN_COMMAND"),AU=Zr("KEY_ARROW_RIGHT_COMMAND"),_ie=Zr("MOVE_TO_END"),jU=Zr("KEY_ARROW_LEFT_COMMAND"),Sie=Zr("MOVE_TO_START"),PU=Zr("KEY_ARROW_UP_COMMAND"),FU=Zr("KEY_ARROW_DOWN_COMMAND"),_4=Zr("KEY_ENTER_COMMAND"),MU=Zr("KEY_SPACE_COMMAND"),OU=Zr("KEY_BACKSPACE_COMMAND"),DU=Zr("KEY_ESCAPE_COMMAND"),RU=Zr("KEY_DELETE_COMMAND"),IU=Zr("KEY_TAB_COMMAND"),kie=Zr("INSERT_TAB_COMMAND"),Cie=Zr("INDENT_CONTENT_COMMAND"),KP=Zr("OUTDENT_CONTENT_COMMAND"),LU=Zr("DROP_COMMAND"),BU=Zr("FORMAT_ELEMENT_COMMAND"),$U=Zr("DRAGSTART_COMMAND"),UU=Zr("DRAGOVER_COMMAND"),Tie=Zr("DRAGEND_COMMAND"),H_=Zr("COPY_COMMAND"),e7=Zr("CUT_COMMAND"),f8=Zr("SELECT_ALL_COMMAND"),Eie=Zr("CLEAR_EDITOR_COMMAND"),Nie=Zr("CLEAR_HISTORY_COMMAND"),Xb=Zr("CAN_REDO_COMMAND"),Jb=Zr("CAN_UNDO_COMMAND"),Aie=Zr("FOCUS_COMMAND"),jie=Zr("BLUR_COMMAND"),Pie=Zr("KEY_MODIFIER_COMMAND"),Bd=Object.freeze({}),h8=30,m8=[["keydown",function(e,t){if(Xy=e.timeStamp,zU=e.key,!t.isComposing()&&!Ar(t,wie,e)&&e.key!=null){if(c5&&_F(e))return Pl(t,(()=>{Qb(t,u5)})),c5=!1,void(u5="");if((function(r){return ns(r,"ArrowRight",{shiftKey:"any"})})(e))Ar(t,AU,e);else if((function(r){return ns(r,"ArrowRight",zd)})(e))Ar(t,_ie,e);else if((function(r){return ns(r,"ArrowLeft",{shiftKey:"any"})})(e))Ar(t,jU,e);else if((function(r){return ns(r,"ArrowLeft",zd)})(e))Ar(t,Sie,e);else if((function(r){return ns(r,"ArrowUp",{altKey:"any",shiftKey:"any"})})(e))Ar(t,PU,e);else if((function(r){return ns(r,"ArrowDown",{altKey:"any",shiftKey:"any"})})(e))Ar(t,FU,e);else if((function(r){return ns(r,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})})(e))Jy=!0,Ar(t,_4,e);else if((function(r){return r.key===" "})(e))Ar(t,MU,e);else if((function(r){return zu&&ns(r,"o",{ctrlKey:!0})})(e))e.preventDefault(),Jy=!0,Ar(t,Ap,!0);else if((function(r){return ns(r,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})})(e))Jy=!1,Ar(t,_4,e);else if((function(r){return ns(r,"Backspace",{shiftKey:"any"})||zu&&ns(r,"h",{ctrlKey:!0})})(e))_F(e)?Ar(t,OU,e):(e.preventDefault(),Ar(t,hm,!0));else if((function(r){return r.key==="Escape"})(e))Ar(t,DU,e);else if((function(r){return ns(r,"Delete",{})||zu&&ns(r,"d",{ctrlKey:!0})})(e))(function(r){return r.key==="Delete"})(e)?Ar(t,RU,e):(e.preventDefault(),Ar(t,hm,!1));else if((function(r){return ns(r,"Backspace",wF)})(e))e.preventDefault(),Ar(t,Tv,!0);else if((function(r){return ns(r,"Delete",wF)})(e))e.preventDefault(),Ar(t,Tv,!1);else if((function(r){return zu&&ns(r,"Backspace",{metaKey:!0})})(e))e.preventDefault(),Ar(t,Ev,!0);else if((function(r){return zu&&(ns(r,"Delete",{metaKey:!0})||ns(r,"k",{ctrlKey:!0}))})(e))e.preventDefault(),Ar(t,Ev,!1);else if((function(r){return ns(r,"b",zd)})(e))e.preventDefault(),Ar(t,vo,"bold");else if((function(r){return ns(r,"u",zd)})(e))e.preventDefault(),Ar(t,vo,"underline");else if((function(r){return ns(r,"i",zd)})(e))e.preventDefault(),Ar(t,vo,"italic");else if((function(r){return ns(r,"Tab",{shiftKey:"any"})})(e))Ar(t,IU,e);else if((function(r){return ns(r,"z",zd)})(e))e.preventDefault(),Ar(t,QT,void 0);else if((function(r){return zu?ns(r,"z",{metaKey:!0,shiftKey:!0}):ns(r,"y",{ctrlKey:!0})||ns(r,"z",{ctrlKey:!0,shiftKey:!0})})(e))e.preventDefault(),Ar(t,ZT,void 0);else{const r=t._editorState._selection;r===null||qt(r)?SF(e)&&(e.preventDefault(),Ar(t,f8,e)):(function(n){return ns(n,"c",zd)})(e)?(e.preventDefault(),Ar(t,H_,e)):(function(n){return ns(n,"x",zd)})(e)?(e.preventDefault(),Ar(t,e7,e)):SF(e)&&(e.preventDefault(),Ar(t,f8,e))}(function(r){return r.ctrlKey||r.shiftKey||r.altKey||r.metaKey})(e)&&Ar(t,Pie,e)}}],["pointerdown",function(e,t){const r=e.target,n=e.pointerType;y1(r)&&n!=="touch"&&n!=="pen"&&e.button===0&&Pl(t,(()=>{yF(r)||(p8=!0)}))}],["compositionstart",function(e,t){Pl(t,(()=>{const r=hr();if(qt(r)&&!t.isComposing()){const n=r.anchor,s=r.anchor.getNode();Xi(n.key),(e.timeStamp<Xy+h8||n.type==="element"||!r.isCollapsed()||s.getFormat()!==r.format||mr(s)&&s.getStyle()!==r.style)&&Ar(t,jp,sie)}}))}],["compositionend",function(e,t){Tm?_y=!0:Gp||!_v&&!m4?Pl(t,(()=>{Qb(t,e.data)})):(c5=!0,u5=e.data)}],["input",function(e,t){e.stopPropagation(),Pl(t,(()=>{if(Ms(e.target)&&yF(e.target))return;const r=hr(),n=e.data,s=qU(e);if(n!=null&&qt(r)&&GU(r,s,n,e.timeStamp,!1)){_y&&(Qb(t,n),_y=!1);const a=r.anchor.getNode(),i=fu(kc(t));if(i===null)return;const o=r.isBackward(),c=o?r.anchor.offset:r.focus.offset,u=o?r.focus.offset:r.anchor.offset;h4&&!r.isCollapsed()&&mr(a)&&i.anchorNode!==null&&a.getTextContent().slice(0,c)+n+a.getTextContent().slice(c+u)===xz(i.anchorNode)||Ar(t,jp,n);const d=n.length;Tm&&d>1&&e.inputType==="insertCompositionText"&&!t.isComposing()&&(r.anchor.offset-=d),_v||Gp||m4||!t.isComposing()||(Xy=0,Xi(null))}else m7(!1,t,n!==null?n:void 0),_y&&(Qb(t,n||void 0),_y=!1);(function(){Yi();const a=ra();bU(a)})()}),{event:e}),hp=null}],["click",function(e,t){Pl(t,(()=>{const r=hr(),n=fu(kc(t)),s=x1();if(n){if(qt(r)){const a=r.anchor,i=a.getNode();if(a.type==="element"&&a.offset===0&&r.isCollapsed()&&!ii(i)&&Gs().getChildrenSize()===1&&i.getTopLevelElementOrThrow().isEmpty()&&s!==null&&r.is(s))n.removeAllRanges(),r.dirty=!0;else if(e.detail===3&&!r.isCollapsed()&&i!==r.focus.getNode()){const o=(function(c,u){let d=c;for(;d!==Gs()&&d!=null;){if(u(d))return d;d=d.getParent()}return null})(i,(c=>Dt(c)&&!c.isInline()));Dt(o)&&o.select(0)}}else if(e.pointerType==="touch"||e.pointerType==="pen"){const a=n.anchorNode;(Ms(a)||S0(a))&&eo(n7(s,n,t,e))}}Ar(t,XT,e)}))}],["cut",Bd],["copy",Bd],["dragstart",Bd],["dragover",Bd],["dragend",Bd],["paste",Bd],["focus",Bd],["blur",Bd],["drop",Bd]];h4&&m8.push(["beforeinput",(e,t)=>(function(r,n){const s=r.inputType,a=qU(r);s==="deleteCompositionText"||Tm&&yz(n)||s!=="insertCompositionText"&&Pl(n,(()=>{const i=hr();if(s==="deleteContentBackward"){if(i===null){const g=x1();if(!qt(g))return;eo(g.clone())}if(qt(i)){const g=i.anchor.key===i.focus.key;if(o=r.timeStamp,zU==="MediaLast"&&o<Xy+h8&&n.isComposing()&&g){if(Xi(null),Xy=0,setTimeout((()=>{Pl(n,(()=>{Xi(null)}))}),h8),qt(i)){const p=i.anchor.getNode();p.markDirty(),mr(p)||Zt(142),VU(i,p)}}else{Xi(null),r.preventDefault();const p=i.anchor.getNode(),y=p.getTextContent(),v=p.canInsertTextAfter(),C=i.anchor.offset===0&&i.focus.offset===y.length;let S=RP&&g&&!C&&v;if(S&&i.isCollapsed()&&(S=!Vn(w8(i.anchor,!0))),!S){Ar(n,hm,!0);const w=hr();RP&&qt(w)&&w.isCollapsed()&&(tm=w,setTimeout((()=>tm=null)))}}return}}var o;if(!qt(i))return;const c=r.data;hp!==null&&m7(!1,n,hp),i.dirty&&hp===null||!i.isCollapsed()||ii(i.anchor.getNode())||a===null||i.applyDOMRange(a),hp=null;const u=i.anchor,d=i.focus,f=u.getNode(),h=d.getNode();if(s!=="insertText"&&s!=="insertTranspose")switch(r.preventDefault(),s){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":Ar(n,jp,r);break;case"insertFromComposition":Xi(null),Ar(n,jp,r);break;case"insertLineBreak":Xi(null),Ar(n,Ap,!1);break;case"insertParagraph":Xi(null),Jy&&!Gp?(Jy=!1,Ar(n,Ap,!1)):Ar(n,Cv,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":Ar(n,JT,r);break;case"deleteByComposition":(function(g,p){return g!==p||Dt(g)||Dt(p)||!mm(g)||!mm(p)})(f,h)&&Ar(n,d8,r);break;case"deleteByDrag":case"deleteByCut":Ar(n,d8,r);break;case"deleteContent":Ar(n,hm,!1);break;case"deleteWordBackward":Ar(n,Tv,!0);break;case"deleteWordForward":Ar(n,Tv,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":Ar(n,Ev,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":Ar(n,Ev,!1);break;case"formatStrikeThrough":Ar(n,vo,"strikethrough");break;case"formatBold":Ar(n,vo,"bold");break;case"formatItalic":Ar(n,vo,"italic");break;case"formatUnderline":Ar(n,vo,"underline");break;case"historyUndo":Ar(n,QT,void 0);break;case"historyRedo":Ar(n,ZT,void 0)}else{if(c===`
`)r.preventDefault(),Ar(n,Ap,!1);else if(c===d0)r.preventDefault(),Ar(n,Cv,void 0);else if(c==null&&r.dataTransfer){const g=r.dataTransfer.getData("text/plain");r.preventDefault(),i.insertRawText(g)}else c!=null&&GU(i,a,c,r.timeStamp,!0)?(r.preventDefault(),Ar(n,jp,c)):hp=c;WU=r.timeStamp}}))})(e,t)]);let Xy=0,zU=null,WU=0,hp=null;const S4=new WeakMap;let g8=!1,p8=!1,Jy=!1,_y=!1,c5=!1,u5="",tm=null,HU=[0,"",0,"root",0];function GU(e,t,r,n,s){const a=e.anchor,i=e.focus,o=a.getNode(),c=ra(),u=fu(kc(c)),d=u!==null?u.anchorNode:null,f=a.key,h=c.getElementByKey(f),g=r.length;return f!==i.key||!mr(o)||(!s&&(!h4||WU<n+50)||o.isDirty()&&g<2||gz(r))&&a.offset!==i.offset&&!o.isComposing()||Wd(o)||o.isDirty()&&g>1||(s||!h4)&&h!==null&&!o.isComposing()&&d!==qp(h)||u!==null&&t!==null&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||o.getFormat()!==e.format||o.getStyle()!==e.style||(function(p,y){if(y.isSegmented())return!0;if(!p.isCollapsed())return!1;const v=p.anchor.offset,C=y.getParentOrThrow(),S=mm(y);return v===0?!y.canInsertTextBefore()||!C.canInsertTextBefore()&&!y.isComposing()||S||(function(w){const T=w.getPreviousSibling();return(mr(T)||Dt(T)&&T.isInline())&&!T.canInsertTextAfter()})(y):v===y.getTextContentSize()&&(!y.canInsertTextAfter()||!C.canInsertTextAfter()&&!y.isComposing()||S)})(e,o)}function YP(e,t){return S0(e)&&e.nodeValue!==null&&t!==0&&t!==e.nodeValue.length}function XP(e,t,r){const{anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:i}=e;g8&&(g8=!1,YP(n,s)&&YP(a,i)&&!tm)||Pl(t,(()=>{if(!r)return void eo(null);if(!h2(t,n,a))return;let o=hr();if(tm&&qt(o)&&o.isCollapsed()){const c=o.anchor,u=tm.anchor;(c.key===u.key&&c.offset===u.offset+1||c.offset===1&&u.getNode().is(c.getNode().getPreviousSibling()))&&(o=tm.clone(),eo(o))}if(tm=null,qt(o)){const c=o.anchor,u=c.getNode();if(o.isCollapsed()){e.type==="Range"&&e.anchorNode===e.focusNode&&(o.dirty=!0);const d=kc(t).event,f=d?d.timeStamp:performance.now(),[h,g,p,y,v]=HU,C=Gs(),S=t.isComposing()===!1&&C.getTextContent()==="";if(f<v+200&&c.offset===p&&c.key===y)Yw(o,h,g);else if(c.type==="text")mr(u)||Zt(141),VU(o,u);else if(c.type==="element"&&!S){Dt(u)||Zt(259);const w=c.getNode();w.isEmpty()?(function(T,N){const A=N.getTextFormat(),P=N.getTextStyle();Yw(T,A,P)})(o,w):Yw(o,0,"")}}else{const d=c.key,f=o.focus.key,h=o.getNodes(),g=h.length,p=o.isBackward(),y=p?i:s,v=p?s:i,C=p?f:d,S=p?d:f;let w=nie,T=!1;for(let N=0;N<g;N++){const A=h[N],P=A.getTextContentSize();if(mr(A)&&P!==0&&!(N===0&&A.__key===C&&y===P||N===g-1&&A.__key===S&&v===0)&&(T=!0,w&=A.getFormat(),w===0))break}o.format=T?w:0}}Ar(t,NU,void 0)}))}function Yw(e,t,r){e.format===t&&e.style===r||(e.format=t,e.style=r,e.dirty=!0)}function VU(e,t){Yw(e,t.getFormat(),t.getStyle())}function qU(e){if(!e.getTargetRanges)return null;const t=e.getTargetRanges();return t.length===0?null:t[0]}function Qb(e,t){const r=e._compositionKey;if(Xi(null),r!==null&&t!=null){if(t===""){const n=Ga(r),s=qp(e.getElementByKey(r));return void(s!==null&&s.nodeValue!==null&&mr(n)&&g7(n,s.nodeValue,null,null,!0))}if(t[t.length-1]===`
`){const n=hr();if(qt(n)){const s=n.focus;return n.anchor.set(s.key,s.offset,s.type),void Ar(e,_4,null)}}}m7(!0,e,t)}function KU(e){let t=e.__lexicalEventHandles;return t===void 0&&(t=[],e.__lexicalEventHandles=t),t}const Pp=new Map;function YU(e){const t=uoe(e.target);if(t===null)return;const r=uz(t.anchorNode);if(r===null)return;p8&&(p8=!1,Pl(r,(()=>{const c=x1(),u=t.anchorNode;(Ms(u)||S0(u))&&eo(n7(c,t,r,e))})));const n=h7(r),s=n[n.length-1],a=s._key,i=Pp.get(a),o=i||s;o!==r&&XP(t,o,!1),XP(t,r,!0),r!==s?Pp.set(a,r):i&&Pp.delete(a)}function JP(e){e._lexicalHandled=!0}function QP(e){return e._lexicalHandled===!0}function Fie(e){const t=e.ownerDocument,r=S4.get(t);if(r===void 0)return;const n=r-1;n>=0||Zt(164),S4.set(t,n),n===0&&t.removeEventListener("selectionchange",YU);const s=J_(e);f7(s)?((function(i){if(i._parentEditor!==null){const o=h7(i),c=o[o.length-1]._key;Pp.get(c)===i&&Pp.delete(c)}else Pp.delete(i._key)})(s),e.__lexicalEditor=null):s&&Zt(198);const a=KU(e);for(let i=0;i<a.length;i++)a[i]();e.__lexicalEventHandles=[]}function x8(e,t,r){Yi();const n=e.__key,s=e.getParent();if(s===null)return;const a=(function(o){const c=hr();if(!qt(c)||!Dt(o))return c;const{anchor:u,focus:d}=c,f=u.getNode(),h=d.getNode();return _8(f,o)&&u.set(o.__key,0,"element"),_8(h,o)&&d.set(o.__key,0,"element"),c})(e);let i=!1;if(qt(a)&&t){const o=a.anchor,c=a.focus;o.key===n&&(C4(o,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0),c.key===n&&(C4(c,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0)}else uo(a)&&t&&e.isSelected()&&e.selectPrevious();if(qt(a)&&t&&!i){const o=e.getIndexWithinParent();gm(e),k4(a,s,o,-1)}else gm(e);r||Go(s)||s.canBeEmpty()||!s.isEmpty()||x8(s,t),t&&a&&ii(s)&&s.isEmpty()&&s.selectEnd()}class g1{static getType(){const{ownNodeType:t}=b7(this);return t===void 0&&Zt(64,this.name),t}static clone(t){Zt(65,this.name)}$config(){return{}}config(t,r){const n=r.extends||Object.getPrototypeOf(this.constructor);return Object.assign(r,{extends:n,type:t}),{[t]:r}}afterCloneFrom(t){this.__key===t.__key?(this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state):t.__state&&(this.__state=t.__state.getWritable(this))}constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),roe(this,t)}getType(){return this.__type}isInline(){Zt(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t==="root")return!0;const r=Ga(t);if(r===null)break;t=r.__parent}return!1}isSelected(t){const r=t||hr();if(r==null)return!1;const n=r.getNodes().some((s=>s.__key===this.__key));if(mr(this))return n;if(qt(r)&&r.anchor.type==="element"&&r.focus.type==="element"){if(r.isCollapsed())return!1;const s=this.getParent();if(Vn(this)&&this.isInline()&&s){const a=r.isBackward()?r.focus:r.anchor;if(s.is(a.getNode())&&a.offset===s.getChildrenSize()&&this.is(s.getLastChild()))return!1}}return n}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(t===null)return-1;let r=t.getFirstChild(),n=0;for(;r!==null;){if(this.is(r))return n;n++,r=r.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return t===null?null:Ga(t)}getParentOrThrow(){const t=this.getParent();return t===null&&Zt(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){const r=t.getParent();if(Go(r))return Dt(t)||t===this&&Vn(t)||Zt(194),t;t=r}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return t===null&&Zt(67,this.__key),t}getParents(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r),r=r.getParent();return t}getParentKeys(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r.__key),r=r.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return t===null?null:Ga(t)}getPreviousSiblings(){const t=[],r=this.getParent();if(r===null)return t;let n=r.getFirstChild();for(;n!==null&&!n.is(this);)t.push(n),n=n.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return t===null?null:Ga(t)}getNextSiblings(){const t=[];let r=this.getNextSibling();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getCommonAncestor(t){const r=Dt(this)?this:this.getParent(),n=Dt(t)?t:t.getParent(),s=r&&n?Jw(r,n):null;return s?s.commonAncestor:null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){const r=Jw(this,t);return r!==null&&(r.type==="descendant"||(r.type==="branch"?_z(r)===-1:(r.type!=="same"&&r.type!=="ancestor"&&Zt(279),!1)))}isParentOf(t){const r=Jw(this,t);return r!==null&&r.type==="ancestor"}getNodesBetween(t){const r=this.isBefore(t),n=[],s=new Set;let a=this;for(;a!==null;){const i=a.__key;if(s.has(i)||(s.add(i),n.push(a)),a===t)break;const o=Dt(a)?r?a.getFirstChild():a.getLastChild():null;if(o!==null){a=o;continue}const c=r?a.getNextSibling():a.getPreviousSibling();if(c!==null){a=c;continue}const u=a.getParentOrThrow();if(s.has(u.__key)||n.push(u),u===t)break;let d=null,f=u;do{if(f===null&&Zt(68),d=r?f.getNextSibling():f.getPreviousSibling(),f=f.getParent(),f===null)break;d!==null||s.has(f.__key)||n.push(f)}while(d===null);a=d}return r||n.reverse(),n}isDirty(){const t=ra()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){const t=Ga(this.__key);return t===null&&Zt(113),t}getWritable(){Yi();const t=sh(),r=ra(),n=t._nodeMap,s=this.__key,a=this.getLatest(),i=r._cloneNotNeeded,o=hr();if(o!==null&&o.setCachedNodes(null),i.has(s))return N4(a),a;const c=y7(a);return i.add(s),N4(c),n.set(s,c),c}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,r){Zt(70)}updateDOM(t,r,n){Zt(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){const t=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...t}}static importJSON(t){Zt(18,this.name)}updateFromJSON(t){return(function(r,n){const s=r.getWritable(),a=n.$;let i=a;for(const o of SU(s).flatKeys)o in n&&(i!==void 0&&i!==a||(i={...a}),i[o]=n[o]);return(s.__state||i)&&pie(r).updateFromJSON(i),s})(this,t)}static transform(){return null}remove(t){x8(this,!0,t)}replace(t,r){Yi();let n=hr();n!==null&&(n=n.clone()),p5(this,t);const s=this.getLatest(),a=this.__key,i=t.__key,o=t.getWritable(),c=this.getParentOrThrow().getWritable(),u=c.__size;gm(o);const d=s.getPreviousSibling(),f=s.getNextSibling(),h=s.__prev,g=s.__next,p=s.__parent;if(x8(s,!1,!0),d===null?c.__first=i:d.getWritable().__next=i,o.__prev=h,f===null?c.__last=i:f.getWritable().__prev=i,o.__next=g,o.__parent=p,c.__size=u,r&&(Dt(this)&&Dt(o)||Zt(139),this.getChildren().forEach((y=>{o.append(y)}))),qt(n)){eo(n);const y=n.anchor,v=n.focus;y.key===a&&rF(y,o),v.key===a&&rF(v,o)}return Af()===a&&Xi(i),o}insertAfter(t,r=!0){Yi(),p5(this,t);const n=this.getWritable(),s=t.getWritable(),a=s.getParent(),i=hr();let o=!1,c=!1;if(a!==null){const g=t.getIndexWithinParent();if(gm(s),qt(i)){const p=a.__key,y=i.anchor,v=i.focus;o=y.type==="element"&&y.key===p&&y.offset===g+1,c=v.type==="element"&&v.key===p&&v.offset===g+1}}const u=this.getNextSibling(),d=this.getParentOrThrow().getWritable(),f=s.__key,h=n.__next;if(u===null?d.__last=f:u.getWritable().__prev=f,d.__size++,n.__next=f,s.__next=h,s.__prev=n.__key,s.__parent=n.__parent,r&&qt(i)){const g=this.getIndexWithinParent();k4(i,d,g+1);const p=d.__key;o&&i.anchor.set(p,g+2,"element"),c&&i.focus.set(p,g+2,"element")}return t}insertBefore(t,r=!0){Yi(),p5(this,t);const n=this.getWritable(),s=t.getWritable(),a=s.__key;gm(s);const i=this.getPreviousSibling(),o=this.getParentOrThrow().getWritable(),c=n.__prev,u=this.getIndexWithinParent();i===null?o.__first=a:i.getWritable().__next=a,o.__size++,n.__prev=a,s.__prev=c,s.__next=n.__key,s.__parent=n.__parent;const d=hr();return r&&qt(d)&&k4(d,this.getParentOrThrow(),u),t}isParentRequired(){return!1}createParentElementNode(){return Fs()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,r){Yi();const n=this.getPreviousSibling(),s=this.getParentOrThrow();if(n===null)return s.select(0,0);if(Dt(n))return n.select();if(!mr(n)){const a=n.getIndexWithinParent()+1;return s.select(a,a)}return n.select(t,r)}selectNext(t,r){Yi();const n=this.getNextSibling(),s=this.getParentOrThrow();if(n===null)return s.select();if(Dt(n))return n.select(0,0);if(!mr(n)){const a=n.getIndexWithinParent();return s.select(a,a)}return n.select(t,r)}markDirty(){this.getWritable()}reconcileObservedMutation(t,r){this.markDirty()}}class l2 extends g1{static getType(){return"linebreak"}static clone(t){return new l2(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:t=>(function(r){const n=r.parentElement;if(n!==null&&A4(n)){const s=n.firstChild;if(s===r||s.nextSibling===r&&Zb(s)){const a=n.lastChild;if(a===r||a.previousSibling===r&&Zb(a))return!0}}return!1})(t)||(function(r){const n=r.parentElement;if(n!==null&&A4(n)){const s=n.firstChild;if(s===r||s.nextSibling===r&&Zb(s))return!1;const a=n.lastChild;if(a===r||a.previousSibling===r&&Zb(a))return!0}return!1})(t)?null:{conversion:Mie,priority:0}}}static importJSON(t){return td().updateFromJSON(t)}}function Mie(e){return{node:td()}}function td(){return Yo(new l2)}function t0(e){return e instanceof l2}function Zb(e){return S0(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function d5(e,t){return 16&t?"code":t&zT?"mark":32&t?"sub":64&t?"sup":null}function f5(e,t){return 1&t?"strong":2&t?"em":"span"}function XU(e,t,r,n,s){const a=n.classList;let i=Fp(s,"base");i!==void 0&&a.add(...i),i=Fp(s,"underlineStrikethrough");let o=!1;const c=t&p4&&t&g4;i!==void 0&&(r&p4&&r&g4?(o=!0,c||a.add(...i)):c&&a.remove(...i));for(const u in Nm){const d=Nm[u];if(i=Fp(s,u),i!==void 0)if(r&d){if(o&&(u==="underline"||u==="strikethrough")){t&d&&a.remove(...i);continue}t&d&&(!c||u!=="underline")&&u!=="strikethrough"||a.add(...i)}else t&d&&a.remove(...i)}}function JU(e,t,r){const n=t.firstChild,s=r.isComposing(),a=e+(s?z_:"");if(n==null)t.textContent=a;else{const i=n.nodeValue;if(i!==a)if(s||Tm){const[o,c,u]=(function(d,f){const h=d.length,g=f.length;let p=0,y=0;for(;p<h&&p<g&&d[p]===f[p];)p++;for(;y+p<h&&y+p<g&&d[h-y-1]===f[g-y-1];)y++;return[p,h-p-y,f.slice(p,g-y)]})(i,a);c!==0&&n.deleteData(o,c),n.insertData(o,u)}else n.nodeValue=a}}function ZP(e,t,r,n,s,a){JU(s,e,t);const i=a.theme.text;i!==void 0&&XU(0,0,n,e,i)}function ew(e,t){const r=document.createElement(t);return r.appendChild(e),r}class nh extends g1{static getType(){return"text"}static clone(t){return new nh(t.__text,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail}constructor(t="",r){super(r),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return lie[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===Af()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const r=Nm[t];return!!(this.getFormat()&r)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,r){return E4(this.getLatest().__format,t,r)}canHaveFormat(){return!0}isInline(){return!0}createDOM(t,r){const n=this.__format,s=d5(0,n),a=f5(0,n),i=s===null?a:s,o=document.createElement(i);let c=o;this.hasFormat("code")&&o.setAttribute("spellcheck","false"),s!==null&&(c=document.createElement(a),o.appendChild(c)),ZP(c,this,0,n,this.__text,t);const u=this.__style;return u!==""&&(o.style.cssText=u),o}updateDOM(t,r,n){const s=this.__text,a=t.__format,i=this.__format,o=d5(0,a),c=d5(0,i),u=f5(0,a),d=f5(0,i);if((o===null?u:o)!==(c===null?d:c))return!0;if(o===c&&u!==d){const y=r.firstChild;y==null&&Zt(48);const v=document.createElement(d);return ZP(v,this,0,i,s,n),r.replaceChild(v,y),!1}let f=r;c!==null&&o!==null&&(f=r.firstChild,f==null&&Zt(49)),JU(s,f,this);const h=n.theme.text;h!==void 0&&a!==i&&XU(0,a,i,f,h);const g=t.__style,p=this.__style;return g!==p&&(r.style.cssText=p),!1}static importDOM(){return{"#text":()=>({conversion:Iie,priority:0}),b:()=>({conversion:Die,priority:0}),code:()=>({conversion:$d,priority:0}),em:()=>({conversion:$d,priority:0}),i:()=>({conversion:$d,priority:0}),mark:()=>({conversion:$d,priority:0}),s:()=>({conversion:$d,priority:0}),span:()=>({conversion:Oie,priority:0}),strong:()=>({conversion:$d,priority:0}),sub:()=>({conversion:$d,priority:0}),sup:()=>({conversion:$d,priority:0}),u:()=>({conversion:$d,priority:0})}}static importJSON(t){return ha().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style)}exportDOM(t){let{element:r}=super.exportDOM(t);return Ms(r)||Zt(132),r.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?r.style.textTransform="lowercase":this.hasFormat("uppercase")?r.style.textTransform="uppercase":this.hasFormat("capitalize")&&(r.style.textTransform="capitalize"),this.hasFormat("bold")&&(r=ew(r,"b")),this.hasFormat("italic")&&(r=ew(r,"i")),this.hasFormat("strikethrough")&&(r=ew(r,"s")),this.hasFormat("underline")&&(r=ew(r,"u")),{element:r}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(t,r){}setFormat(t){const r=this.getWritable();return r.__format=typeof t=="string"?Nm[t]:t,r}setDetail(t){const r=this.getWritable();return r.__detail=typeof t=="string"?aie[t]:t,r}setStyle(t){const r=this.getWritable();return r.__style=t,r}toggleFormat(t){const r=E4(this.getFormat(),t,null);return this.setFormat(r)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const r=oie[t];if(this.__mode===r)return this;const n=this.getWritable();return n.__mode=r,n}setTextContent(t){if(this.__text===t)return this;const r=this.getWritable();return r.__text=t,r}select(t,r){Yi();let n=t,s=r;const a=hr(),i=this.getTextContent(),o=this.__key;if(typeof i=="string"){const c=i.length;n===void 0&&(n=c),s===void 0&&(s=c)}else n=0,s=0;if(!qt(a))return ez(o,n,o,s,"text","text");{const c=Af();c!==a.anchor.key&&c!==a.focus.key||Xi(o),a.setTextNodeRange(this,n,this,s)}return a}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,r,n,s){const a=this.getWritable(),i=a.__text,o=n.length;let c=t;c<0&&(c=o+c,c<0&&(c=0));const u=hr();if(s&&qt(u)){const f=t+o;u.setTextNodeRange(a,f,a,f)}const d=i.slice(0,c)+n+i.slice(c+r);return a.__text=d,a}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){Yi();const r=this.getLatest(),n=r.getTextContent();if(n==="")return[];const s=r.__key,a=Af(),i=n.length;t.sort(((j,F)=>j-F)),t.push(i);const o=[],c=t.length;for(let j=0,F=0;j<i&&F<=c;F++){const R=t[F];R>j&&(o.push(n.slice(j,R)),j=R)}const u=o.length;if(u===1)return[r];const d=o[0],f=r.getParent();let h;const g=r.getFormat(),p=r.getStyle(),y=r.__detail;let v=!1,C=null,S=null;const w=hr();if(qt(w)){const[j,F]=w.isBackward()?[w.focus,w.anchor]:[w.anchor,w.focus];j.type==="text"&&j.key===s&&(C=j),F.type==="text"&&F.key===s&&(S=F)}r.isSegmented()?(h=ha(d),h.__format=g,h.__style=p,h.__detail=y,h.__state=zP(r,h),v=!0):h=r.setTextContent(d);const T=[h];for(let j=1;j<u;j++){const F=ha(o[j]);F.__format=g,F.__style=p,F.__detail=y,F.__state=zP(r,F);const R=F.__key;a===s&&Xi(R),T.push(F)}const N=C?C.offset:null,A=S?S.offset:null;let P=0;for(const j of T){if(!C&&!S)break;const F=P+j.getTextContentSize();if(C!==null&&N!==null&&N<=F&&N>=P&&(C.set(j.getKey(),N-P,"text"),N<F&&(C=null)),S!==null&&A!==null&&A<=F&&A>=P){S.set(j.getKey(),A-P,"text");break}P=F}if(f!==null){(function(R){const L=R.getPreviousSibling(),V=R.getNextSibling();L!==null&&N4(L),V!==null&&N4(V)})(this);const j=f.getWritable(),F=this.getIndexWithinParent();v?(j.splice(F,0,T),this.remove()):j.splice(F,1,T),qt(w)&&k4(w,f,F,u-1)}return T}mergeWithSibling(t){const r=t===this.getPreviousSibling();r||t===this.getNextSibling()||Zt(50);const n=this.__key,s=t.__key,a=this.__text,i=a.length;Af()===s&&Xi(n);const o=hr();if(qt(o)){const f=o.anchor,h=o.focus;f!==null&&f.key===s&&cF(f,r,n,t,i),h!==null&&h.key===s&&cF(h,r,n,t,i)}const c=t.__text,u=r?c+a:a+c;this.setTextContent(u);const d=this.getWritable();return t.remove(),d}isTextEntity(){return!1}}function Oie(e){return{forChild:t7(e.style),node:null}}function Die(e){const t=e,r=t.style.fontWeight==="normal";return{forChild:t7(t.style,r?void 0:"bold"),node:null}}const eF=new WeakMap;function Rie(e){if(!Ms(e))return!1;if(e.nodeName==="PRE")return!0;const t=e.style.whiteSpace;return typeof t=="string"&&t.startsWith("pre")}function Iie(e){const t=e;e.parentElement===null&&Zt(129);let r=t.textContent||"";if((function(n){let s,a=n.parentNode;const i=[n];for(;a!==null&&(s=eF.get(a))===void 0&&!Rie(a);)i.push(a),a=a.parentNode;const o=s===void 0?a:s;for(let c=0;c<i.length;c++)eF.set(i[c],o);return o})(t)!==null){const n=r.split(/(\r?\n|\t)/),s=[],a=n.length;for(let i=0;i<a;i++){const o=n[i];o===`
`||o===`\r
`?s.push(td()):o==="	"?s.push(p1()):o!==""&&s.push(ha(o))}return{node:s}}if(r=r.replace(/\r/g,"").replace(/[ \t\n]+/g," "),r==="")return{node:null};if(r[0]===" "){let n=t,s=!0;for(;n!==null&&(n=tF(n,!1))!==null;){const a=n.textContent||"";if(a.length>0){/[ \t\n]$/.test(a)&&(r=r.slice(1)),s=!1;break}}s&&(r=r.slice(1))}if(r[r.length-1]===" "){let n=t,s=!0;for(;n!==null&&(n=tF(n,!0))!==null;)if((n.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){s=!1;break}s&&(r=r.slice(0,r.length-1))}return r===""?{node:null}:{node:ha(r)}}function tF(e,t){let r=e;for(;;){let n;for(;(n=t?r.nextSibling:r.previousSibling)===null;){const a=r.parentElement;if(a===null)return null;r=a}if(r=n,Ms(r)){const a=r.style.display;if(a===""&&!C8(r)||a!==""&&!a.startsWith("inline"))return null}let s=r;for(;(s=t?r.firstChild:r.lastChild)!==null;)r=s;if(S0(r))return r;if(r.nodeName==="BR")return null}}const Lie={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function $d(e){const t=Lie[e.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:t7(e.style,t),node:null}}function ha(e=""){return Yo(new nh(e))}function mr(e){return e instanceof nh}function t7(e,t){const r=e.fontWeight,n=e.textDecoration.split(" "),s=r==="700"||r==="bold",a=n.includes("line-through"),i=e.fontStyle==="italic",o=n.includes("underline"),c=e.verticalAlign;return u=>(mr(u)&&(s&&!u.hasFormat("bold")&&u.toggleFormat("bold"),a&&!u.hasFormat("strikethrough")&&u.toggleFormat("strikethrough"),i&&!u.hasFormat("italic")&&u.toggleFormat("italic"),o&&!u.hasFormat("underline")&&u.toggleFormat("underline"),c!=="sub"||u.hasFormat("subscript")||u.toggleFormat("subscript"),c!=="super"||u.hasFormat("superscript")||u.toggleFormat("superscript"),t&&!u.hasFormat(t)&&u.toggleFormat(t)),u)}class c2 extends nh{static getType(){return"tab"}static clone(t){return new c2(t.__key)}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}createDOM(t){const r=super.createDOM(t),n=Fp(t.theme,"tab");return n!==void 0&&r.classList.add(...n),r}static importJSON(t){return p1().updateFromJSON(t)}setTextContent(t){return t!=="	"&&t!==""&&Zt(126),super.setTextContent("	")}spliceText(t,r,n,s){return n===""&&r===0||n==="	"&&r===1||Zt(286),this}setDetail(t){return t!==2&&Zt(127),this}setMode(t){return t!=="normal"&&Zt(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function p1(){return Yo(new c2)}function G_(e){return e instanceof c2}class Bie{constructor(t,r,n){this._selection=null,this.key=t,this.offset=r,this.type=n}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){return this.key===t.key?this.offset<t.offset:wz(yc(f0(this,"next")),yc(f0(t,"next")))<0}getNode(){const t=Ga(this.key);return t===null&&Zt(20),t}set(t,r,n,s){const a=this._selection,i=this.key;s&&this.key===t&&this.offset===r&&this.type===n||(this.key=t,this.offset=r,this.type=n,u2()||(Af()===i&&Xi(t),a!==null&&(a.setCachedNodes(null),a.dirty=!0)))}}function rd(e,t,r){return new Bie(e,t,r)}function h5(e,t){let r=t.__key,n=e.offset,s="element";if(mr(t)){s="text";const a=t.getTextContentSize();n>a&&(n=a)}else if(!Dt(t)){const a=t.getNextSibling();if(mr(a))r=a.__key,n=0,s="text";else{const i=t.getParent();i&&(r=i.__key,n=t.getIndexWithinParent()+1)}}e.set(r,n,s)}function rF(e,t){if(Dt(t)){const r=t.getLastDescendant();Dt(r)||mr(r)?h5(e,r):h5(e,t)}else h5(e,t)}class V_{constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!uo(t))return!1;const r=this._nodes,n=t._nodes;return r.size===n.size&&Array.from(r).every((s=>n.has(s)))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new V_(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const r=this.getNodes(),n=r.length,s=r[n-1];let a;if(mr(s))a=s.select();else{const i=s.getIndexWithinParent()+1;a=s.getParentOrThrow().select(i,i)}a.insertNodes(t);for(let i=0;i<n;i++)r[i].remove()}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=this._nodes,n=[];for(const s of r){const a=Ga(s);a!==null&&n.push(a)}return u2()||(this._cachedNodes=n),n}getTextContent(){const t=this.getNodes();let r="";for(let n=0;n<t.length;n++)r+=t[n].getTextContent();return r}deleteNodes(){const t=this.getNodes();if((hr()||x1())===this&&t[0]){const r=Zi(t[0],"next");Soe(Gf(r,r))}for(const r of t)r.remove()}}function qt(e){return e instanceof Xm}class Xm{constructor(t,r,n,s){this.anchor=t,this.focus=r,t._selection=this,r._selection=this,this._cachedNodes=null,this.format=n,this.style=s,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!qt(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=(function(n){const s=[],[a,i]=n.getTextSlices();a&&s.push(a.caret.origin);const o=new Set,c=new Set;for(const u of n)if(Zu(u)){const{origin:d}=u;s.length===0?o.add(d):(c.add(d),s.push(d))}else{const{origin:d}=u;Dt(d)&&c.has(d)||s.push(d)}if(i&&s.push(i.caret.origin),Om(n.focus)&&Dt(n.focus.origin)&&n.focus.getNodeAtCaret()===null)for(let u=Cc(n.focus.origin,"previous");Zu(u)&&o.has(u.origin)&&!u.origin.isEmpty()&&u.origin.is(s[s.length-1]);u=S7(u))o.delete(u.origin),s.pop();for(;s.length>1;){const u=s[s.length-1];if(!Dt(u)||c.has(u)||u.isEmpty()||o.has(u))break;s.pop()}if(s.length===0&&n.isCollapsed()){const u=yc(n.anchor),d=yc(n.anchor.getFlipped()),f=g=>If(g)?g.origin:g.getNodeAtCaret(),h=f(u)||f(d)||(n.anchor.getNodeAtCaret()?u.origin:d.origin);s.push(h)}return s})(kz(AF(this),"next"));return u2()||(this._cachedNodes=r),r}setTextNodeRange(t,r,n,s){this.anchor.set(t.__key,r,"text"),this.focus.set(n.__key,s,"text")}getTextContent(){const t=this.getNodes();if(t.length===0)return"";const r=t[0],n=t[t.length-1],s=this.anchor,a=this.focus,i=s.isBefore(a),[o,c]=y8(this);let u="",d=!0;for(let f=0;f<t.length;f++){const h=t[f];if(Dt(h)&&!h.isInline())d||(u+=`
`),d=!h.isEmpty();else if(d=!1,mr(h)){let g=h.getTextContent();h===r?h===n?s.type==="element"&&a.type==="element"&&a.offset!==s.offset||(g=o<c?g.slice(o,c):g.slice(c,o)):g=i?g.slice(o):g.slice(c):h===n&&(g=i?g.slice(0,c):g.slice(0,o)),u+=g}else!Vn(h)&&!t0(h)||h===n&&this.isCollapsed()||(u+=h.getTextContent())}return u}applyDOMRange(t){const r=ra(),n=r.getEditorState()._selection,s=ZU(t.startContainer,t.startOffset,t.endContainer,t.endOffset,r,n);if(s===null)return;const[a,i]=s;this.anchor.set(a.key,a.offset,a.type,!0),this.focus.set(i.key,i.offset,i.type,!0),x4(this)}clone(){const t=this.anchor,r=this.focus;return new Xm(rd(t.key,t.offset,t.type),rd(r.key,r.offset,r.type),this.format,this.style)}toggleFormat(t){this.format=E4(this.format,t,null),this.dirty=!0}setFormat(t){this.format=t,this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const r=Nm[t];return!!(this.format&r)}insertRawText(t){const r=t.split(/(\r?\n|\t)/),n=[],s=r.length;for(let a=0;a<s;a++){const i=r[a];i===`
`||i===`\r
`?n.push(td()):i==="	"?n.push(p1()):n.push(ha(i))}this.insertNodes(n)}insertText(t){const r=this.anchor,n=this.focus,s=this.format,a=this.style;let i=r,o=n;!this.isCollapsed()&&n.isBefore(r)&&(i=n,o=r),i.type==="element"&&(function(v,C,S,w){const T=v.getNode(),N=T.getChildAtIndex(v.offset),A=ha();if(A.setFormat(S),A.setStyle(w),l7(N))N.splice(0,0,[A]);else{const P=ii(T)?Fs().append(A):A;N===null?T.append(P):N.insertBefore(P)}v.is(C)&&C.set(A.__key,0,"text"),v.set(A.__key,0,"text")})(i,o,s,a),o.type==="element"&&Rm(o,yc(f0(o,"next")));const c=i.offset;let u=o.offset;const d=this.getNodes(),f=d.length;let h=d[0];mr(h)||Zt(26);const g=h.getTextContent().length,p=h.getParentOrThrow();let y=d[f-1];if(f===1&&o.type==="element"&&(u=g,o.set(i.key,u,"text")),this.isCollapsed()&&c===g&&(Wd(h)||!h.canInsertTextAfter()||!p.canInsertTextAfter()&&h.getNextSibling()===null)){let v=h.getNextSibling();if(mr(v)&&v.canInsertTextBefore()&&!Wd(v)||(v=ha(),v.setFormat(s),v.setStyle(a),p.canInsertTextAfter()?h.insertAfter(v):p.insertAfter(v)),v.select(0,0),h=v,t!=="")return void this.insertText(t)}else if(this.isCollapsed()&&c===0&&(Wd(h)||!h.canInsertTextBefore()||!p.canInsertTextBefore()&&h.getPreviousSibling()===null)){let v=h.getPreviousSibling();if(mr(v)&&!Wd(v)||(v=ha(),v.setFormat(s),p.canInsertTextBefore()?h.insertBefore(v):p.insertBefore(v)),v.select(),h=v,t!=="")return void this.insertText(t)}else if(h.isSegmented()&&c!==g){const v=ha(h.getTextContent());v.setFormat(s),h.replace(v),h=v}else if(!this.isCollapsed()&&t!==""){const v=y.getParent();if(!p.canInsertTextBefore()||!p.canInsertTextAfter()||Dt(v)&&(!v.canInsertTextBefore()||!v.canInsertTextAfter()))return this.insertText(""),QU(this.anchor,this.focus,null),void this.insertText(t)}if(f===1){if(mm(h)){const w=ha(t);return w.select(),void h.replace(w)}const v=h.getFormat(),C=h.getStyle();if(c!==u||v===s&&C===a){if(G_(h)){const w=ha(t);return w.setFormat(s),w.setStyle(a),w.select(),void h.replace(w)}}else{if(h.getTextContent()!==""){const w=ha(t);if(w.setFormat(s),w.setStyle(a),w.select(),c===0)h.insertBefore(w,!1);else{const[T]=h.splitText(c);T.insertAfter(w,!1)}return void(w.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length))}h.setFormat(s),h.setStyle(a)}const S=u-c;h=h.spliceText(c,S,t,!0),h.getTextContent()===""?h.remove():this.anchor.type==="text"&&(h.isComposing()?this.anchor.offset-=t.length:(this.format=v,this.style=C))}else{const v=new Set([...h.getParentKeys(),...y.getParentKeys()]),C=Dt(h)?h:h.getParentOrThrow();let S=Dt(y)?y:y.getParentOrThrow(),w=y;if(!C.is(S)&&S.isInline())do w=S,S=S.getParentOrThrow();while(S.isInline());if(o.type==="text"&&(u!==0||y.getTextContent()==="")||o.type==="element"&&y.getIndexWithinParent()<u)if(mr(y)&&!mm(y)&&u!==y.getTextContentSize()){if(y.isSegmented()){const j=ha(y.getTextContent());y.replace(j),y=j}ii(o.getNode())||o.type!=="text"||(y=y.spliceText(0,u,"")),v.add(y.__key)}else{const j=y.getParentOrThrow();j.canBeEmpty()||j.getChildrenSize()!==1?y.remove():j.remove()}else v.add(y.__key);const T=S.getChildren(),N=new Set(d),A=C.is(S),P=C.isInline()&&h.getNextSibling()===null?C:h;for(let j=T.length-1;j>=0;j--){const F=T[j];if(F.is(h)||Dt(F)&&F.isParentOf(h))break;F.isAttached()&&(!N.has(F)||F.is(w)?A||P.insertAfter(F,!1):F.remove())}if(!A){let j=S,F=null;for(;j!==null;){const R=j.getChildren(),L=R.length;(L===0||R[L-1].is(F))&&(v.delete(j.__key),F=j),j=j.getParent()}}if(mm(h))if(c===g)h.select();else{const j=ha(t);j.select(),h.replace(j)}else h=h.spliceText(c,g-c,t,!0),h.getTextContent()===""?h.remove():h.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);for(let j=1;j<f;j++){const F=d[j],R=F.__key;v.has(R)||F.remove()}}}removeText(){const t=hr()===this;Qw(this,koe(AF(this))),t&&hr()!==this&&eo(this)}formatText(t,r=null){if(this.isCollapsed())return this.toggleFormat(t),void Xi(null);const n=this.getNodes(),s=[];for(const T of n)mr(T)&&s.push(T);const a=T=>{n.forEach((N=>{if(Dt(N)){const A=N.getFormatFlags(t,T);N.setTextFormat(A)}}))},i=s.length;if(i===0)return this.toggleFormat(t),Xi(null),void a(r);const o=this.anchor,c=this.focus,u=this.isBackward(),d=u?c:o,f=u?o:c;let h=0,g=s[0],p=d.type==="element"?0:d.offset;if(d.type==="text"&&p===g.getTextContentSize()&&(h=1,g=s[1],p=0),g==null)return;const y=g.getFormatFlags(t,r);a(y);const v=i-1;let C=s[v];const S=f.type==="text"?f.offset:C.getTextContentSize();if(g.is(C)){if(p===S)return;if(Wd(g)||p===0&&S===g.getTextContentSize())g.setFormat(y);else{const T=g.splitText(p,S),N=p===0?T[0]:T[1];N.setFormat(y),d.type==="text"&&d.set(N.__key,0,"text"),f.type==="text"&&f.set(N.__key,S-p,"text")}return void(this.format=y)}p===0||Wd(g)||([,g]=g.splitText(p),p=0),g.setFormat(y);const w=C.getFormatFlags(t,y);S>0&&(S===C.getTextContentSize()||Wd(C)||([C]=C.splitText(S)),C.setFormat(w));for(let T=h+1;T<v;T++){const N=s[T],A=N.getFormatFlags(t,w);N.setFormat(A)}d.type==="text"&&d.set(g.__key,p,"text"),f.type==="text"&&f.set(C.__key,S,"text"),this.format=y|w}insertNodes(t){if(t.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const p=hr();return qt(p)||Zt(134),p.insertNodes(t)}const r=(this.isBackward()?this.focus:this.anchor).getNode(),n=y5(r,xc),s=t[t.length-1];if(Dt(n)&&"__language"in n){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const p=m5(this);n.splice(p,0,t),s.selectEnd()}return}if(!t.some((p=>(Dt(p)||Vn(p))&&!p.isInline()))){Dt(n)||Zt(211,r.constructor.name,r.getType());const p=m5(this);return n.splice(p,0,t),void s.selectEnd()}const a=(function(p){const y=Fs();let v=null;for(let C=0;C<p.length;C++){const S=p[C],w=t0(S);if(w||Vn(S)&&S.isInline()||Dt(S)&&S.isInline()||mr(S)||S.isParentRequired()){if(v===null&&(v=S.createParentElementNode(),y.append(v),w))continue;v!==null&&v.append(S)}else y.append(S),v=null}return y})(t),i=a.getLastDescendant(),o=a.getChildren(),c=!Dt(n)||!n.isEmpty()?this.insertParagraph():null,u=o[o.length-1];let d=o[0];var f;Dt(f=d)&&xc(f)&&!f.isEmpty()&&Dt(n)&&(!n.isEmpty()||n.canMergeWhenEmpty())&&(Dt(n)||Zt(211,r.constructor.name,r.getType()),n.append(...d.getChildren()),d=o[1]),d&&(n===null&&Zt(212,r.constructor.name,r.getType()),(function(p,y,v){const C=y.getParentOrThrow().getLastChild();let S=y;const w=[y];for(;S!==C;)S.getNextSibling()||Zt(140),S=S.getNextSibling(),w.push(S);let T=p;for(const N of w)T=T.insertAfter(N)})(n,d));const h=y5(i,xc);c&&Dt(h)&&(c.canMergeWhenEmpty()||xc(u))&&(h.append(...c.getChildren()),c.remove()),Dt(n)&&n.isEmpty()&&n.remove(),i.selectEnd();const g=Dt(n)?n.getLastChild():null;t0(g)&&h!==n&&g.remove()}insertParagraph(){if(this.anchor.key==="root"){const i=Fs();return Gs().splice(this.anchor.offset,0,[i]),i.select(),i}const t=m5(this),r=y5(this.anchor.getNode(),xc);Dt(r)||Zt(213);const n=r.getChildAtIndex(t),s=n?[n,...n.getNextSiblings()]:[],a=r.insertNewAfter(this,!1);return a?(a.append(...s),a.selectStart(),a):null}insertLineBreak(t){const r=td();if(this.insertNodes([r]),t){const n=r.getParentOrThrow(),s=r.getIndexWithinParent();n.select(s,s)}}extract(){const t=this.getNodes(),r=t.length,n=r-1,s=this.anchor,a=this.focus;let i=t[0],o=t[n];const[c,u]=y8(this);if(r===0)return[];if(r===1){if(mr(i)&&!this.isCollapsed()){const f=c>u?u:c,h=c>u?c:u,g=i.splitText(f,h),p=f===0?g[0]:g[1];return p!=null?[p]:[]}return[i]}const d=s.isBefore(a);if(mr(i)){const f=d?c:u;f===i.getTextContentSize()?t.shift():f!==0&&([,i]=i.splitText(f),t[0]=i)}if(mr(o)){const f=o.getTextContent().length,h=d?u:c;h===0?t.pop():h!==f&&([o]=o.splitText(h),t[n]=o)}return t}modify(t,r,n){if(uF(this,t,r,n))return;const s=t==="move",a=ra(),i=fu(kc(a));if(!i)return;const o=a._blockCursorElement,c=a._rootElement,u=this.focus.getNode();if(c===null||o===null||!Dt(u)||u.isInline()||u.canBeEmpty()||S8(o,a,c),this.dirty){let d=Pm(a,this.anchor.key),f=Pm(a,this.focus.key);this.anchor.type==="text"&&(d=qp(d)),this.focus.type==="text"&&(f=qp(f)),d&&f&&tz(i,d,this.anchor.offset,f,this.focus.offset)}if((function(d,f,h,g){d.modify(f,h,g)})(i,t,r?"backward":"forward",n),i.rangeCount>0){const d=i.getRangeAt(0),f=this.anchor.getNode(),h=ii(f)?f:loe(f);if(this.applyDOMRange(d),this.dirty=!0,!s){const g=this.getNodes(),p=[];let y=!1;for(let v=0;v<g.length;v++){const C=g[v];_8(C,h)?p.push(C):y=!0}if(y&&p.length>0)if(r){const v=p[0];Dt(v)?v.selectStart():v.getParentOrThrow().selectStart()}else{const v=p[p.length-1];Dt(v)?v.selectEnd():v.getParentOrThrow().selectEnd()}i.anchorNode===d.startContainer&&i.anchorOffset===d.startOffset||(function(v){const C=v.focus,S=v.anchor,w=S.key,T=S.offset,N=S.type;S.set(C.key,C.offset,C.type,!0),C.set(w,T,N,!0)})(this)}}n==="lineboundary"&&uF(this,t,r,n,"decorators")}forwardDeletion(t,r,n){if(!n&&(t.type==="element"&&Dt(r)&&t.offset===r.getChildrenSize()||t.type==="text"&&t.offset===r.getTextContentSize())){const s=r.getParent(),a=r.getNextSibling()||(s===null?null:s.getNextSibling());if(Dt(a)&&a.isShadowRoot())return!0}return!1}deleteCharacter(t){const r=this.isCollapsed();if(this.isCollapsed()){const n=this.anchor;let s=n.getNode();if(this.forwardDeletion(n,s,t))return;const a=C7(f0(n,t?"previous":"next"));if(a.getTextSlices().every((o=>o===null||o.distance===0))){let o={type:"initial"};for(const c of a.iterNodeCarets("shadowRoot"))if(Zu(c)){if(!c.origin.isInline()){if(c.origin.isShadowRoot()){if(o.type==="merge-block")break;if(Dt(a.anchor.origin)&&a.anchor.origin.isEmpty()){const u=yc(c);Qw(this,Gf(u,u)),a.anchor.origin.remove()}return}o.type!=="merge-next-block"&&o.type!=="merge-block"||(o={block:o.block,caret:c,type:"merge-block"})}}else{if(o.type==="merge-block")break;if(Om(c)){if(Dt(c.origin)){if(c.origin.isInline()){if(!c.origin.isParentOf(a.anchor.origin))break}else o={block:c.origin,type:"merge-next-block"};continue}if(Vn(c.origin)){if(!c.origin.isIsolated())if(o.type==="merge-next-block"&&(c.origin.isKeyboardSelectable()||!c.origin.isInline())&&Dt(a.anchor.origin)&&a.anchor.origin.isEmpty()){a.anchor.origin.remove();const u=r7();u.add(c.origin.getKey()),eo(u)}else c.origin.remove();return}break}}if(o.type==="merge-block"){const{caret:c,block:u}=o;return Qw(this,Gf(!c.origin.isEmpty()&&u.isEmpty()?E7(Zi(u,c.direction)):a.anchor,c)),this.removeText()}}const i=this.focus;if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&n.offset===0&&sF(this,n.getNode()))return}else{const o=i.type==="text"?i.getNode():null;if(s=n.type==="text"?n.getNode():null,o!==null&&o.isSegmented()){const c=i.offset,u=o.getTextContentSize();if(o.is(s)||t&&c!==u||!t&&c!==0)return void aF(o,t,c)}else if(s!==null&&s.isSegmented()){const c=n.offset,u=s.getTextContentSize();if(s.is(o)||t&&c!==0||!t&&c!==u)return void aF(s,t,c)}(function(c,u){const d=c.anchor,f=c.focus,h=d.getNode(),g=f.getNode();if(h===g&&d.type==="text"&&f.type==="text"){const p=d.offset,y=f.offset,v=p<y,C=v?p:y,S=v?y:p,w=S-1;C!==w&&(function(T){return!(gz(T)||$ie(T))})(h.getTextContent().slice(C,S))&&(u?f.set(f.key,w,f.type):d.set(d.key,w,d.type))}})(this,t)}}if(this.removeText(),t&&!r&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const n=this.anchor.getNode();n.isEmpty()&&ii(n.getParent())&&n.getPreviousSibling()===null&&sF(this,n)}}deleteLine(t){this.isCollapsed()&&this.modify("extend",t,"lineboundary"),this.isCollapsed()?this.deleteCharacter(t):this.removeText()}deleteWord(t){if(this.isCollapsed()){const r=this.anchor,n=r.getNode();if(this.forwardDeletion(r,n,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function uo(e){return e instanceof V_}function nF(e){const t=e.offset;if(e.type==="text")return t;const r=e.getNode();return t===r.getChildrenSize()?r.getTextContent().length:0}function y8(e){const t=e.getStartEndPoints();if(t===null)return[0,0];const[r,n]=t;return r.type==="element"&&n.type==="element"&&r.key===n.key&&r.offset===n.offset?[0,0]:[nF(r),nF(n)]}function sF(e,t){for(let r=t;r;r=r.getParent()){if(Dt(r)){if(r.collapseAtStart(e))return!0;if(Go(r))break}if(r.getPreviousSibling())break}return!1}const $ie=(()=>{try{const e=new RegExp("\\p{Emoji}","u"),t=e.test.bind(e);if(t("")&&t("#")&&t(""))return t}catch{}return()=>!1})();function aF(e,t,r){const n=e,s=n.getTextContent().split(/(?=\s)/g),a=s.length;let i=0,o=0;for(let u=0;u<a;u++){const d=u===a-1;if(o=i,i+=s[u].length,t&&i===r||i>r||d){s.splice(u,1),d&&(o=void 0);break}}const c=s.join("").trim();c===""?n.remove():(n.setTextContent(c),n.select(o,o))}function iF(e,t,r,n){let s,a=t;if(Ms(e)){let i=!1;const o=e.childNodes,c=o.length,u=n._blockCursorElement;a===c&&(i=!0,a=c-1);let d=o[a],f=!1;if(d===u)d=o[a+1],f=!0;else if(u!==null){const h=u.parentNode;e===h&&t>Array.prototype.indexOf.call(h.children,u)&&a--}if(s=kp(d),mr(s))a=Lf(s,i?"next":"previous");else{let h=kp(e);if(h===null)return null;if(Dt(h)){const g=n.getElementByKey(h.getKey());g===null&&Zt(214),[h,a]=h.getDOMSlot(g).resolveChildIndex(h,g,e,t),Dt(h)||Zt(215),i&&a>=h.getChildrenSize()&&(a=Math.max(0,h.getChildrenSize()-1));let y=h.getChildAtIndex(a);if(Dt(y)&&(function(v,C,S){const w=v.getParent();return S===null||w===null||!w.canBeEmpty()||w!==S.getNode()})(y,0,r)){const v=i?y.getLastDescendant():y.getFirstDescendant();v===null?h=y:(y=v,h=Dt(y)?y:y.getParentOrThrow()),a=0}mr(y)?(s=y,h=null,a=Lf(y,i?"next":"previous")):y!==h&&i&&!f&&(Dt(h)||Zt(216),a=Math.min(h.getChildrenSize(),a+1))}else{const g=h.getIndexWithinParent();a=t===0&&Vn(h)&&kp(e)===h?g:g+1,h=h.getParentOrThrow()}if(Dt(h))return rd(h.__key,a,"element")}}else s=kp(e);return mr(s)?rd(s.__key,Lf(s,a,"clamp"),"text"):null}function oF(e,t,r){const n=e.offset,s=e.getNode();if(n===0){const a=s.getPreviousSibling(),i=s.getParent();if(t){if((r||!t)&&a===null&&Dt(i)&&i.isInline()){const o=i.getPreviousSibling();mr(o)&&e.set(o.__key,o.getTextContent().length,"text")}}else Dt(a)&&!r&&a.isInline()?e.set(a.__key,a.getChildrenSize(),"element"):mr(a)&&e.set(a.__key,a.getTextContent().length,"text")}else if(n===s.getTextContent().length){const a=s.getNextSibling(),i=s.getParent();if(t&&Dt(a)&&a.isInline())e.set(a.__key,0,"element");else if((r||t)&&a===null&&Dt(i)&&i.isInline()&&!i.canInsertTextAfter()){const o=i.getNextSibling();mr(o)&&e.set(o.__key,0,"text")}}}function QU(e,t,r){if(e.type==="text"&&t.type==="text"){const n=e.isBefore(t),s=e.is(t);oF(e,n,s),oF(t,!n,s),s&&t.set(e.key,e.offset,e.type);const a=ra();if(a.isComposing()&&a._compositionKey!==e.key&&qt(r)){const i=r.anchor,o=r.focus;e.set(i.key,i.offset,i.type,!0),t.set(o.key,o.offset,o.type,!0)}}}function ZU(e,t,r,n,s,a){if(e===null||r===null||!h2(s,e,r))return null;const i=iF(e,t,qt(a)?a.anchor:null,s);if(i===null)return null;const o=iF(r,n,qt(a)?a.focus:null,s);if(o===null)return null;if(i.type==="element"&&o.type==="element"){const c=kp(e),u=kp(r);if(Vn(c)&&Vn(u))return null}return QU(i,o,a),[i,o]}function v8(e){return Dt(e)&&!e.isInline()}function ez(e,t,r,n,s,a){const i=sh(),o=new Xm(rd(e,t,s),rd(r,n,a),0,"");return o.dirty=!0,i._selection=o,o}function q_(){const e=rd("root",0,"element"),t=rd("root",0,"element");return new Xm(e,t,0,"")}function r7(){return new V_(new Set)}function n7(e,t,r,n){const s=r._window;if(s===null)return null;const a=n||s.event,i=a?a.type:void 0,o=i==="selectionchange",c=!n8&&(o||i==="beforeinput"||i==="compositionstart"||i==="compositionend"||i==="click"&&a&&a.detail===3||i==="drop"||i===void 0);let u,d,f,h;if(qt(e)&&!c)return e.clone();if(t===null)return null;if(u=t.anchorNode,d=t.focusNode,f=t.anchorOffset,h=t.focusOffset,o&&qt(e)&&!h2(r,u,d))return e.clone();const g=ZU(u,f,d,h,r,e);if(g===null)return null;const[p,y]=g;return new Xm(p,y,qt(e)?e.format:0,qt(e)?e.style:"")}function hr(){return sh()._selection}function x1(){return ra()._editorState._selection}function k4(e,t,r,n=1){const s=e.anchor,a=e.focus,i=s.getNode(),o=a.getNode();if(!t.is(i)&&!t.is(o))return;const c=t.__key;if(e.isCollapsed()){const u=s.offset;if(r<=u&&n>0||r<u&&n<0){const d=Math.max(0,u+n);s.set(c,d,"element"),a.set(c,d,"element"),lF(e)}}else{const u=e.isBackward(),d=u?a:s,f=d.getNode(),h=u?s:a,g=h.getNode();if(t.is(f)){const p=d.offset;(r<=p&&n>0||r<p&&n<0)&&d.set(c,Math.max(0,p+n),"element")}if(t.is(g)){const p=h.offset;(r<=p&&n>0||r<p&&n<0)&&h.set(c,Math.max(0,p+n),"element")}}lF(e)}function lF(e){const t=e.anchor,r=t.offset,n=e.focus,s=n.offset,a=t.getNode(),i=n.getNode();if(e.isCollapsed()){if(!Dt(a))return;const o=a.getChildrenSize(),c=r>=o,u=c?a.getChildAtIndex(o-1):a.getChildAtIndex(r);if(mr(u)){let d=0;c&&(d=u.getTextContentSize()),t.set(u.__key,d,"text"),n.set(u.__key,d,"text")}}else{if(Dt(a)){const o=a.getChildrenSize(),c=r>=o,u=c?a.getChildAtIndex(o-1):a.getChildAtIndex(r);if(mr(u)){let d=0;c&&(d=u.getTextContentSize()),t.set(u.__key,d,"text")}}if(Dt(i)){const o=i.getChildrenSize(),c=s>=o,u=c?i.getChildAtIndex(o-1):i.getChildAtIndex(s);if(mr(u)){let d=0;c&&(d=u.getTextContentSize()),n.set(u.__key,d,"text")}}}}function C4(e,t,r,n,s){let a=null,i=0,o=null;n!==null?(a=n.__key,mr(n)?(i=n.getTextContentSize(),o="text"):Dt(n)&&(i=n.getChildrenSize(),o="element")):s!==null&&(a=s.__key,mr(s)?o="text":Dt(s)&&(o="element")),a!==null&&o!==null?e.set(a,i,o):(i=t.getIndexWithinParent(),i===-1&&(i=r.getChildrenSize()),e.set(r.__key,i,"element"))}function cF(e,t,r,n,s){e.type==="text"?e.set(r,e.offset+(t?0:s),"text"):e.offset>n.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function tz(e,t,r,n,s){try{e.setBaseAndExtent(t,r,n,s)}catch{}}function Uie(e,t,r,n,s,a,i){const o=n.anchorNode,c=n.focusNode,u=n.anchorOffset,d=n.focusOffset,f=document.activeElement;if(s.has(oz)&&f!==a||f!==null&&d7(f))return;if(!qt(t))return void(e!==null&&h2(r,o,c)&&n.removeAllRanges());const h=t.anchor,g=t.focus,p=h.key,y=g.key,v=Pm(r,p),C=Pm(r,y),S=h.offset,w=g.offset,T=t.format,N=t.style,A=t.isCollapsed();let P=v,j=C,F=!1;if(h.type==="text"){P=qp(v);const re=h.getNode();F=re.getFormat()!==T||re.getStyle()!==N}else qt(e)&&e.anchor.type==="text"&&(F=!0);var R,L,V,Z,Y;if(g.type==="text"&&(j=qp(C)),P!==null&&j!==null&&(A&&(e===null||F||qt(e)&&(e.format!==T||e.style!==N))&&(R=T,L=N,V=S,Z=p,Y=performance.now(),HU=[R,L,V,Z,Y]),u!==S||d!==w||o!==P||c!==j||n.type==="Range"&&A||(f!==null&&a.contains(f)||a.focus({preventScroll:!0}),h.type==="element"))){if(tz(n,P,S,j,w),!s.has(Kie)&&t.isCollapsed()&&a!==null&&a===document.activeElement){const re=qt(t)&&t.anchor.type==="element"?P.childNodes[S]||null:n.rangeCount>0?n.getRangeAt(0):null;if(re!==null){let ue;if(re instanceof Text){const z=document.createRange();z.selectNode(re),ue=z.getBoundingClientRect()}else ue=re.getBoundingClientRect();(function(z,X,I){const B=vz(I),W=x7(B);if(B===null||W===null)return;let{top:D,bottom:U}=X,q=0,H=0,te=I;for(;te!==null;){const Q=te===B.body;if(Q)q=0,H=kc(z).innerHeight;else{const ce=te.getBoundingClientRect();q=ce.top,H=ce.bottom}let ae=0;if(D<q?ae=-(q-D):U>H&&(ae=U-H),ae!==0)if(Q)W.scrollBy(0,ae);else{const ce=te.scrollTop;te.scrollTop+=ae;const me=te.scrollTop-ce;D-=me,U-=me}if(Q)break;te=m2(te)}})(r,ue,a)}}g8=!0}}function zie(e){let t=hr()||x1();t===null&&(t=Gs().selectEnd()),t.insertNodes(e)}function m5(e){let t=e;e.isCollapsed()||t.removeText();const r=hr();qt(r)&&(t=r),qt(t)||Zt(161);const n=t.anchor;let s=n.getNode(),a=n.offset;for(;!xc(s);){const i=s;if([s,a]=Wie(s,a),i.is(s))break}return a}function Wie(e,t){const r=e.getParent();if(!r){const s=Fs();return Gs().append(s),s.select(),[Gs(),0]}if(mr(e)){const s=e.splitText(t);if(s.length===0)return[r,e.getIndexWithinParent()];const a=t===0?0:1;return[r,s[0].getIndexWithinParent()+a]}if(!Dt(e)||t===0)return[r,e.getIndexWithinParent()];const n=e.getChildAtIndex(t);if(n){const s=new Xm(rd(e.__key,t,"element"),rd(e.__key,t,"element"),0,""),a=e.insertNewAfter(s);a&&a.append(n,...n.getNextSiblings())}return[r,e.getIndexWithinParent()+1]}function uF(e,t,r,n,s="decorators-and-blocks"){if(t==="move"&&n==="character"&&!e.isCollapsed()){const[d,f]=r===e.isBackward()?[e.focus,e.anchor]:[e.anchor,e.focus];return f.set(d.key,d.offset,d.type),!0}const a=f0(e.focus,r?"previous":"next"),i=n==="lineboundary",o=t==="move";let c=a,u=s==="decorators-and-blocks";if(!Sz(c)){for(const d of c){u=!1;const{origin:f}=d;if(!Vn(f)||f.isIsolated()||(c=d,!i||!f.isInline()))break}if(u)for(const d of C7(a).iterNodeCarets(t==="extend"?"shadowRoot":"root")){if(Zu(d))d.origin.isInline()||(c=d);else{if(Dt(d.origin))continue;Vn(d.origin)&&!d.origin.isInline()&&(c=d)}break}}if(c===a)return!1;if(o&&!i&&Vn(c.origin)&&c.origin.isKeyboardSelectable()){const d=r7();return d.add(c.origin.getKey()),eo(d),!0}return c=yc(c),o&&Rm(e.anchor,c),Rm(e.focus,c),u||!i}let Si=null,ki=null,hl=!1,g5=!1,Xw=0;const dF={characterData:!0,childList:!0,subtree:!0};function u2(){return hl||Si!==null&&Si._readOnly}function Yi(){hl&&Zt(13)}function rz(){Xw>99&&Zt(14)}function sh(){return Si===null&&Zt(195,nz()),Si}function ra(){return ki===null&&Zt(196,nz()),ki}function nz(){let e=0;const t=new Set,r=X_.version;if(typeof window<"u")for(const s of document.querySelectorAll("[contenteditable]")){const a=J_(s);if(f7(a))e++;else if(a){let i=String(a.constructor.version||"<0.17.1");i===r&&(i+=" (separately built, likely a bundler configuration issue)"),t.add(i)}}let n=` Detected on the page: ${e} compatible editor(s) with version ${r}`;return t.size&&(n+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),n}function Hie(){return ki}function fF(e,t,r){const n=t.__type,s=cz(e,n);let a=r.get(n);a===void 0&&(a=Array.from(s.transforms),r.set(n,a));const i=a.length;for(let o=0;o<i&&(a[o](t),t.isAttached());o++);}function hF(e,t){return e!==void 0&&e.__key!==t&&e.isAttached()}function sz(e,t){if(!t)return;const r=e._updateTags;let n=t;Array.isArray(t)||(n=[t]);for(const s of n)r.add(s)}function Gie(e){return s7(e,ra()._nodes)}function s7(e,t){const r=e.type,n=t.get(r);n===void 0&&Zt(17,r);const s=n.klass;e.type!==s.getType()&&Zt(18,s.name);const a=s.importJSON(e),i=e.children;if(Dt(a)&&Array.isArray(i))for(let o=0;o<i.length;o++){const c=s7(i[o],t);a.append(c)}return a}function mF(e,t,r){const n=Si,s=hl,a=ki;Si=t,hl=!0,ki=e;try{return r()}finally{Si=n,hl=s,ki=a}}function Vd(e,t){const r=e._pendingEditorState,n=e._rootElement,s=e._headless||n===null;if(r===null)return;const a=e._editorState,i=a._selection,o=r._selection,c=e._dirtyType!==Em,u=Si,d=hl,f=ki,h=e._updating,g=e._observer;let p=null;if(e._pendingEditorState=null,e._editorState=r,!s&&c&&g!==null){ki=e,Si=r,hl=!1,e._updating=!0;try{const A=e._dirtyType,P=e._dirtyElements,j=e._dirtyLeaves;g.disconnect(),p=vie(a,r,e,A,P,j)}catch(A){if(A instanceof Error&&e._onError(A),g5)throw A;return lz(e,null,n,r),wU(e),e._dirtyType=Vp,g5=!0,Vd(e,a),void(g5=!1)}finally{g.observe(n,dF),e._updating=h,Si=u,hl=d,ki=f}}r._readOnly||(r._readOnly=!0);const y=e._dirtyLeaves,v=e._dirtyElements,C=e._normalizedNodes,S=e._updateTags,w=e._deferred;c&&(e._dirtyType=Em,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),(function(A,P){const j=A._decorators;let F=A._pendingDecorators||j;const R=P._nodeMap;let L;for(L in F)R.has(L)||(F===j&&(F=hz(A)),delete F[L])})(e,r);const T=s?null:fu(kc(e));if(e._editable&&T!==null&&(c||o===null||o.dirty)&&n!==null&&!S.has(Yie)){ki=e,Si=r;try{if(g!==null&&g.disconnect(),c||o===null||o.dirty){const A=e._blockCursorElement;A!==null&&S8(A,e,n),Uie(i,o,e,T,S,n)}(function(A,P,j){let F=A._blockCursorElement;if(qt(j)&&j.isCollapsed()&&j.anchor.type==="element"&&P.contains(document.activeElement)){const R=j.anchor,L=R.getNode(),V=R.offset;let Z=!1,Y=null;if(V===L.getChildrenSize())x5(L.getChildAtIndex(V-1))&&(Z=!0);else{const re=L.getChildAtIndex(V);if(re!==null&&x5(re)){const ue=re.getPreviousSibling();(ue===null||x5(ue))&&(Z=!0,Y=A.getElementByKey(re.__key))}}if(Z){const re=A.getElementByKey(L.__key);return F===null&&(A._blockCursorElement=F=(function(ue){const z=ue.theme,X=document.createElement("div");X.contentEditable="false",X.setAttribute("data-lexical-cursor","true");let I=z.blockCursor;if(I!==void 0){if(typeof I=="string"){const B=pU(I);I=z.blockCursor=B}I!==void 0&&X.classList.add(...I)}return X})(A._config)),P.style.caretColor="transparent",void(Y===null?re.appendChild(F):re.insertBefore(F,Y))}}F!==null&&S8(F,A,P)})(e,n,o)}finally{g!==null&&g.observe(n,dF),ki=f,Si=u}}p!==null&&(function(A,P,j,F,R){const L=Array.from(A._listeners.mutation),V=L.length;for(let Z=0;Z<V;Z++){const[Y,re]=L[Z];for(const ue of re){const z=P.get(ue);z!==void 0&&Y(z,{dirtyLeaves:F,prevEditorState:R,updateTags:j})}}})(e,p,S,y,a),qt(o)||o===null||i!==null&&i.is(o)||e.dispatchCommand(NU,void 0);const N=e._pendingDecorators;N!==null&&(e._decorators=N,e._pendingDecorators=null,Qy("decorator",e,!0,N)),(function(A,P,j){const F=vF(P),R=vF(j);F!==R&&Qy("textcontent",A,!0,R)})(e,t||a,r),Qy("update",e,!0,{dirtyElements:v,dirtyLeaves:y,editorState:r,mutatedNodes:p,normalizedNodes:C,prevEditorState:t||a,tags:S}),(function(A,P){if(A._deferred=[],P.length!==0){const j=A._updating;A._updating=!0;try{for(let F=0;F<P.length;F++)P[F]()}finally{A._updating=j}}})(e,w),(function(A){const P=A._updates;if(P.length!==0){const j=P.shift();if(j){const[F,R]=j;K_(A,F,R)}}})(e)}function Qy(e,t,r,...n){const s=t._updating;t._updating=r;try{const a=Array.from(t._listeners[e]);for(let i=0;i<a.length;i++)a[i].apply(null,n)}finally{t._updating=s}}function gF(e,t){const r=e._updates;let n=t||!1;for(;r.length!==0;){const s=r.shift();if(s){const[a,i]=s,o=e._pendingEditorState;let c;i!==void 0&&(c=i.onUpdate,i.skipTransforms&&(n=!0),i.discrete&&(o===null&&Zt(191),o._flushSync=!0),c&&e._deferred.push(c),sz(e,i.tag)),o==null?K_(e,a,i):a()}}return n}function K_(e,t,r){const n=e._updateTags;let s,a=!1,i=!1;r!==void 0&&(s=r.onUpdate,sz(e,r.tag),a=r.skipTransforms||!1,i=r.discrete||!1),s&&e._deferred.push(s);const o=e._editorState;let c=e._pendingEditorState,u=!1;(c===null||c._readOnly)&&(c=e._pendingEditorState=az(c||o),u=!0),c._flushSync=i;const d=Si,f=hl,h=ki,g=e._updating;Si=c,hl=!1,e._updating=!0,ki=e;const p=e._headless||e.getRootElement()===null;c7(null);try{u&&(p?o._selection!==null&&(c._selection=o._selection.clone()):c._selection=(function(S,w){const T=S.getEditorState()._selection,N=fu(kc(S));return qt(T)||T==null?n7(T,N,S,w):T.clone()})(e,r&&r.event||null));const v=e._compositionKey;t(),a=gF(e,a),(function(S,w){const T=w.getEditorState()._selection,N=S._selection;if(qt(N)){const A=N.anchor,P=N.focus;let j;if(A.type==="text"&&(j=A.getNode(),j.selectionTransform(T,N)),P.type==="text"){const F=P.getNode();j!==F&&F.selectionTransform(T,N)}}})(c,e),e._dirtyType!==Em&&(a?(function(S,w){const T=w._dirtyLeaves,N=S._nodeMap;for(const A of T){const P=N.get(A);mr(P)&&P.isAttached()&&P.isSimpleText()&&!P.isUnmergeable()&&GP(P)}})(c,e):(function(S,w){const T=w._dirtyLeaves,N=w._dirtyElements,A=S._nodeMap,P=Af(),j=new Map;let F=T,R=F.size,L=N,V=L.size;for(;R>0||V>0;){if(R>0){w._dirtyLeaves=new Set;for(const Z of F){const Y=A.get(Z);mr(Y)&&Y.isAttached()&&Y.isSimpleText()&&!Y.isUnmergeable()&&GP(Y),Y!==void 0&&hF(Y,P)&&fF(w,Y,j),T.add(Z)}if(F=w._dirtyLeaves,R=F.size,R>0){Xw++;continue}}w._dirtyLeaves=new Set,w._dirtyElements=new Map,L.delete("root")&&L.set("root",!0);for(const Z of L){const Y=Z[0],re=Z[1];if(N.set(Y,re),!re)continue;const ue=A.get(Y);ue!==void 0&&hF(ue,P)&&fF(w,ue,j)}F=w._dirtyLeaves,R=F.size,L=w._dirtyElements,V=L.size,Xw++}w._dirtyLeaves=T,w._dirtyElements=N})(c,e),gF(e),(function(S,w,T,N){const A=S._nodeMap,P=w._nodeMap,j=[];for(const[F]of N){const R=P.get(F);R!==void 0&&(R.isAttached()||(Dt(R)&&yU(R,F,A,P,j,N),A.has(F)||N.delete(F),j.push(F)))}for(const F of j)P.delete(F);for(const F of T){const R=P.get(F);R===void 0||R.isAttached()||(A.has(F)||T.delete(F),P.delete(F))}})(o,c,e._dirtyLeaves,e._dirtyElements)),v!==e._compositionKey&&(c._flushSync=!0);const C=c._selection;if(qt(C)){const S=c._nodeMap,w=C.anchor.key,T=C.focus.key;S.get(w)!==void 0&&S.get(T)!==void 0||Zt(19)}else uo(C)&&C._nodes.size===0&&(c._selection=null)}catch(v){return v instanceof Error&&e._onError(v),e._pendingEditorState=o,e._dirtyType=Vp,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void Vd(e)}finally{Si=d,hl=f,ki=h,e._updating=g,Xw=0}e._dirtyType!==Em||e._deferred.length>0||(function(v,C){const S=C.getEditorState()._selection,w=v._selection;if(w!==null){if(w.dirty||!w.is(S))return!0}else if(S!==null)return!0;return!1})(c,e)?c._flushSync?(c._flushSync=!1,Vd(e)):u&&eoe((()=>{Vd(e)})):(c._flushSync=!1,u&&(n.clear(),e._deferred=[],e._pendingEditorState=null))}function Pl(e,t,r){ki===e&&r===void 0?t():K_(e,t,r)}class Zy{constructor(t,r,n){this.element=t,this.before=r||null,this.after=n||null}withBefore(t){return new Zy(this.element,t,this.after)}withAfter(t){return new Zy(this.element,this.before,t)}withElement(t){return this.element===t?this:new Zy(t,this.before,this.after)}insertChild(t){const r=this.before||this.getManagedLineBreak();return r!==null&&r.parentElement!==this.element&&Zt(222),this.element.insertBefore(t,r),this}removeChild(t){return t.parentElement!==this.element&&Zt(223),this.element.removeChild(t),this}replaceChild(t,r){return r.parentElement!==this.element&&Zt(224),this.element.replaceChild(t,r),this}getFirstChild(){const t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(t){if(t===null)this.removeManagedLineBreak();else{const r=t==="decorator"&&(Gp||_v);this.insertManagedLineBreak(r)}}removeManagedLineBreak(){const t=this.getManagedLineBreak();if(t){const r=this.element,n=t.nodeName==="IMG"?t.nextSibling:null;n&&r.removeChild(n),r.removeChild(t),r.__lexicalLineBreak=void 0}}insertManagedLineBreak(t){const r=this.getManagedLineBreak();if(r){if(t===(r.nodeName==="IMG"))return;this.removeManagedLineBreak()}const n=this.element,s=this.before,a=document.createElement("br");if(n.insertBefore(a,s),t){const i=document.createElement("img");i.setAttribute("data-lexical-linebreak","true"),i.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",i.alt="",n.insertBefore(i,a),n.__lexicalLineBreak=i}else n.__lexicalLineBreak=a}getFirstChildOffset(){let t=0;for(let r=this.after;r!==null;r=r.previousSibling)t++;return t}resolveChildIndex(t,r,n,s){if(n===this.element){const c=this.getFirstChildOffset();return[t,Math.min(c+t.getChildrenSize(),Math.max(c,s))]}const a=pF(r,n);a.push(s);const i=pF(r,this.element);let o=t.getIndexWithinParent();for(let c=0;c<i.length;c++){const u=a[c],d=i[c];if(u===void 0||u<d)break;if(u>d){o+=1;break}}return[t.getParentOrThrow(),o]}}function pF(e,t){const r=[];let n=t;for(;n!==e&&n!==null;n=n.parentNode){let s=0;for(let a=n.previousSibling;a!==null;a=a.previousSibling)s++;r.push(s)}return n!==e&&Zt(225),r.reverse()}class _o extends g1{constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(t){super.afterCloneFrom(t),this.__key===t.__key&&(this.__first=t.__first,this.__last=t.__last,this.__size=t.__size),this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return iie[t]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getChildrenKeys(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r.__key),r=r.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const t=ra()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),r=this.getParentOrThrow().getLastChild();return r!==null&&r.is(t)}getAllTextNodes(){const t=[];let r=this.getFirstChild();for(;r!==null;){if(mr(r)&&t.push(r),Dt(r)){const n=r.getAllTextNodes();t.push(...n)}r=r.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;Dt(t);){const r=t.getFirstChild();if(r===null)break;t=r}return t}getLastDescendant(){let t=this.getLastChild();for(;Dt(t);){const r=t.getLastChild();if(r===null)break;t=r}return t}getDescendantByIndex(t){const r=this.getChildren(),n=r.length;if(t>=n){const a=r[n-1];return Dt(a)&&a.getLastDescendant()||a||null}const s=r[t];return Dt(s)&&s.getFirstDescendant()||s||null}getFirstChild(){const t=this.getLatest().__first;return t===null?null:Ga(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return t===null&&Zt(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return t===null?null:Ga(t)}getLastChildOrThrow(){const t=this.getLastChild();return t===null&&Zt(96,this.__key),t}getChildAtIndex(t){const r=this.getChildrenSize();let n,s;if(t<r/2){for(n=this.getFirstChild(),s=0;n!==null&&s<=t;){if(s===t)return n;n=n.getNextSibling(),s++}return null}for(n=this.getLastChild(),s=r-1;n!==null&&s>=t;){if(s===t)return n;n=n.getPreviousSibling(),s--}return null}getTextContent(){let t="";const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const a=r[s];t+=a.getTextContent(),Dt(a)&&s!==n-1&&!a.isInline()&&(t+=d0)}return t}getTextContentSize(){let t=0;const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const a=r[s];t+=a.getTextContentSize(),Dt(a)&&s!==n-1&&!a.isInline()&&(t+=d0.length)}return t}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(t){if(t!==""){const r=IP[t];return!!(this.getFormat()&r)}return!1}hasTextFormat(t){const r=Nm[t];return!!(this.getTextFormat()&r)}getFormatFlags(t,r){return E4(this.getLatest().__textFormat,t,r)}getTextStyle(){return this.getLatest().__textStyle}select(t,r){Yi();const n=hr();let s=t,a=r;const i=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&r===0){const c=this.getFirstChild();if(mr(c)||Dt(c))return c.select(0,0)}else if(!(t!==void 0&&t!==i||r!==void 0&&r!==i)){const c=this.getLastChild();if(mr(c)||Dt(c))return c.select()}}s===void 0&&(s=i),a===void 0&&(a=i);const o=this.__key;return qt(n)?(n.anchor.set(o,s,"element"),n.focus.set(o,a,"element"),n.dirty=!0,n):ez(o,s,o,a,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach((r=>r.remove())),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const r=this.getWritable();return r.__dir=t,r}setFormat(t){return this.getWritable().__format=t!==""?IP[t]:0,this}setStyle(t){return this.getWritable().__style=t||"",this}setTextFormat(t){const r=this.getWritable();return r.__textFormat=t,r}setTextStyle(t){const r=this.getWritable();return r.__textStyle=t,r}setIndent(t){return this.getWritable().__indent=t,this}splice(t,r,n){const s=n.length,a=this.getChildrenSize(),i=this.getWritable();t+r<=a||Zt(226,String(t),String(r),String(a));const o=i.__key,c=[],u=[],d=this.getChildAtIndex(t+r);let f=null,h=a-r+s;if(t!==0)if(t===a)f=this.getLastChild();else{const p=this.getChildAtIndex(t);p!==null&&(f=p.getPreviousSibling())}if(r>0){let p=f===null?this.getFirstChild():f.getNextSibling();for(let y=0;y<r;y++){p===null&&Zt(100);const v=p.getNextSibling(),C=p.__key;gm(p.getWritable()),u.push(C),p=v}}let g=f;for(let p=0;p<s;p++){const y=n[p];g!==null&&y.is(g)&&(f=g=g.getPreviousSibling());const v=y.getWritable();v.__parent===o&&h--,gm(v);const C=y.__key;if(g===null)i.__first=C,v.__prev=null;else{const S=g.getWritable();S.__next=C,v.__prev=S.__key}y.__key===o&&Zt(76),v.__parent=o,c.push(C),g=y}if(t+r===a)g!==null&&(g.getWritable().__next=null,i.__last=g.__key);else if(d!==null){const p=d.getWritable();if(g!==null){const y=g.getWritable();p.__prev=g.__key,y.__next=d.__key}else p.__prev=null}if(i.__size=h,u.length){const p=hr();if(qt(p)){const y=new Set(u),v=new Set(c),{anchor:C,focus:S}=p;xF(C,y,v)&&C4(C,C.getNode(),this,f,d),xF(S,y,v)&&C4(S,S.getNode(),this,f,d),h!==0||this.canBeEmpty()||Go(this)||this.remove()}}return i}getDOMSlot(t){return new Zy(t)}exportDOM(t){const{element:r}=super.exportDOM(t);if(Ms(r)){const n=this.getIndent();n>0&&(r.style.paddingInlineStart=40*n+"px");const s=this.getDirection();s&&(r.dir=s)}return{element:r}}exportJSON(){const t={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},r=this.getTextFormat(),n=this.getTextStyle();return r!==0&&(t.textFormat=r),n!==""&&(t.textStyle=n),t}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"")}insertNewAfter(t,r){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,r,n){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(t,r){const n=this.getDOMSlot(t);let s=n.getFirstChild();for(let a=this.getFirstChild();a;a=a.getNextSibling()){const i=r.getElementByKey(a.getKey());i!==null&&(s==null?(n.insertChild(i),s=i):s!==i&&n.replaceChild(i,s),s=s.nextSibling)}}}function Dt(e){return e instanceof _o}function xF(e,t,r){let n=e.getNode();for(;n;){const s=n.__key;if(t.has(s)&&!r.has(s))return!0;n=n.getParent()}return!1}let a7=class extends g1{decorate(t,r){Zt(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}};function Vn(e){return e instanceof a7}class d2 extends _o{static getType(){return"root"}static clone(){return new d2}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){Zt(51)}getTextContent(){const t=this.__cachedText;return!u2()&&ra()._dirtyType!==Em||t===null?super.getTextContent():t}remove(){Zt(52)}replace(t){Zt(53)}insertBefore(t){Zt(54)}insertAfter(t){Zt(55)}updateDOM(t,r){return!1}splice(t,r,n){for(const s of n)Dt(s)||Vn(s)||Zt(282);return super.splice(t,r,n)}static importJSON(t){return Gs().updateFromJSON(t)}collapseAtStart(){return!0}}function ii(e){return e instanceof d2}function az(e){return new Y_(new Map(e._nodeMap))}function i7(){return new Y_(new Map([["root",new d2]]))}function iz(e){const t=e.exportJSON(),r=e.constructor;if(t.type!==r.getType()&&Zt(130,r.name),Dt(e)){const n=t.children;Array.isArray(n)||Zt(59,r.name);const s=e.getChildren();for(let a=0;a<s.length;a++){const i=iz(s[a]);n.push(i)}}return t}class Y_{constructor(t,r){this._nodeMap=t,this._selection=r||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t,r){return mF(r&&r.editor||null,this,t)}clone(t){const r=new Y_(this._nodeMap,t===void 0?this._selection:t);return r._readOnly=!0,r}toJSON(){return mF(null,this,(()=>({root:iz(Gs())})))}}const T4="historic",Vie="history-push",ev="history-merge",qie="paste",oz="collaboration",Kie="skip-scroll-into-view",Yie="skip-dom-selection";class o7 extends _o{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class f2 extends _o{static getType(){return"paragraph"}static clone(t){return new f2(t.__key)}createDOM(t){const r=document.createElement("p"),n=Fp(t.theme,"paragraph");return n!==void 0&&r.classList.add(...n),r}updateDOM(t,r,n){return!1}static importDOM(){return{p:t=>({conversion:Xie,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(Ms(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n)}return{element:r}}static importJSON(t){return Fs().updateFromJSON(t)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(t,r){const n=Fs();n.setTextFormat(t.format),n.setTextStyle(t.style);const s=this.getDirection();return n.setDirection(s),n.setFormat(this.getFormatType()),n.setStyle(this.getStyle()),this.insertAfter(n,r),n}collapseAtStart(){const t=this.getChildren();if(t.length===0||mr(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function Xie(e){const t=Fs();return e.style&&(t.setFormat(e.style.textAlign),v7(e,t)),{node:t}}function Fs(){return Yo(new f2)}function l7(e){return e instanceof f2}const Bn=0,mp=1,Jie=4;function lz(e,t,r,n){const s=e._keyToDOMMap;s.clear(),e._editorState=i7(),e._pendingEditorState=n,e._compositionKey=null,e._dirtyType=Em,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;const a=e._observer;a!==null&&(a.disconnect(),e._observer=null),t!==null&&(t.textContent=""),r!==null&&(r.textContent="",s.set("root",r))}function Qie(e){const t=e||{},r=Hie(),n=t.theme||{},s=e===void 0?r:t.parentEditor||null,a=t.disableEvents||!1,i=i7(),o=t.namespace||(s!==null?s._config.namespace:pz()),c=t.editorState,u=[d2,nh,l2,c2,f2,o7,...t.nodes||[]],{onError:d,html:f}=t,h=t.editable===void 0||t.editable;let g;if(e===void 0&&r!==null)g=r._nodes;else{g=new Map;for(let y=0;y<u.length;y++){let v=u[y],C=null,S=null;if(typeof v!="function"){const P=v;v=P.replace,C=P.with,S=P.withKlass||null}const{ownNodeConfig:w}=b7(v),T=v.getType(),N=v.transform(),A=new Set;w&&w.$transform&&A.add(w.$transform),N!==null&&A.add(N),g.set(T,{exportDOM:f&&f.export?f.export.get(v):void 0,klass:v,replace:C,replaceWithKlass:S,sharedNodeState:mie(u[y]),transforms:A})}}const p=new X_(i,s,g,{disableEvents:a,namespace:o,theme:n},d||console.error,(function(y,v){const C=new Map,S=new Set,w=T=>{Object.keys(T).forEach((N=>{let A=C.get(N);A===void 0&&(A=[],C.set(N,A)),A.push(T[N])}))};return y.forEach((T=>{const N=T.klass.importDOM;if(N==null||S.has(N))return;S.add(N);const A=N.call(T.klass);A!==null&&w(A)})),v&&w(v),C})(g,f?f.import:void 0),h,e);return c!==void 0&&(p._pendingEditorState=c,p._dirtyType=Vp),p}class X_{constructor(t,r,n,s,a,i,o,c){this._createEditorArgs=c,this._parentEditor=r,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=s,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=Em,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=pz(),this._onError=a,this._htmlConversions=i,this._editable=o,this._headless=r!==null&&r._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){const r=this._listeners.update;return r.add(t),()=>{r.delete(t)}}registerEditableListener(t){const r=this._listeners.editable;return r.add(t),()=>{r.delete(t)}}registerDecoratorListener(t){const r=this._listeners.decorator;return r.add(t),()=>{r.delete(t)}}registerTextContentListener(t){const r=this._listeners.textcontent;return r.add(t),()=>{r.delete(t)}}registerRootListener(t){const r=this._listeners.root;return t(this._rootElement,null),r.add(t),()=>{t(null,this._rootElement),r.delete(t)}}registerCommand(t,r,n){n===void 0&&Zt(35);const s=this._commands;s.has(t)||s.set(t,[new Set,new Set,new Set,new Set,new Set]);const a=s.get(t);a===void 0&&Zt(36,String(t));const i=a[n];return i.add(r),()=>{i.delete(r),a.every((o=>o.size===0))&&s.delete(t)}}registerMutationListener(t,r,n){const s=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,a=this._listeners.mutation;let i=a.get(r);i===void 0&&(i=new Set,a.set(r,i)),i.add(s);const o=n&&n.skipInitialization;return o!==void 0&&o||this.initializeMutationListener(r,s),()=>{i.delete(s),i.size===0&&a.delete(r)}}getRegisteredNode(t){const r=this._nodes.get(t.getType());return r===void 0&&Zt(37,t.name),r}resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t}initializeMutationListener(t,r){const n=this._editorState,s=TF(n).get(r.getType());if(!s)return;const a=new Map;for(const i of s.keys())a.set(i,"created");a.size>0&&t(a,{dirtyLeaves:new Set,prevEditorState:n,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(t,r){const n=this.getRegisteredNode(t);return n.transforms.add(r),n}registerNodeTransform(t,r){const n=this.registerNodeTransformToKlass(t,r),s=[n],a=n.replaceWithKlass;if(a!=null){const i=this.registerNodeTransformToKlass(a,r);s.push(i)}return(function(i,o){const c=TF(i.getEditorState()),u=[];for(const d of o){const f=c.get(d);f&&u.push(f)}u.length!==0&&i.update((()=>{for(const d of u)for(const f of d.keys()){const h=Ga(f);h&&h.markDirty()}}),i._pendingEditorState===null?{tag:ev}:void 0)})(this,s.map((i=>i.klass.getType()))),()=>{s.forEach((i=>i.transforms.delete(r)))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,r){return Ar(this,t,r)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const r=this._rootElement;if(t!==r){const n=Fp(this._config.theme,"root"),s=this._pendingEditorState||this._editorState;if(this._rootElement=t,lz(this,r,t,s),r!==null&&(this._config.disableEvents||Fie(r),n!=null&&r.classList.remove(...n)),t!==null){const a=x7(t),i=t.style;i.userSelect="text",i.whiteSpace="pre-wrap",i.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=a,this._dirtyType=Vp,wU(this),this._updateTags.add(ev),Vd(this),this._config.disableEvents||(function(o,c){const u=o.ownerDocument,d=S4.get(u);(d===void 0||d<1)&&u.addEventListener("selectionchange",YU),S4.set(u,(d||0)+1),o.__lexicalEditor=c;const f=KU(o);for(let h=0;h<m8.length;h++){const[g,p]=m8[h],y=typeof p=="function"?v=>{QP(v)||(JP(v),(c.isEditable()||g==="click")&&p(v,c))}:v=>{if(QP(v))return;JP(v);const C=c.isEditable();switch(g){case"cut":return C&&Ar(c,e7,v);case"copy":return Ar(c,H_,v);case"paste":return C&&Ar(c,JT,v);case"dragstart":return C&&Ar(c,$U,v);case"dragover":return C&&Ar(c,UU,v);case"dragend":return C&&Ar(c,Tie,v);case"focus":return C&&Ar(c,Aie,v);case"blur":return C&&Ar(c,jie,v);case"drop":return C&&Ar(c,LU,v)}};o.addEventListener(g,y),f.push((()=>{o.removeEventListener(g,y)}))}})(t,this),n!=null&&t.classList.add(...n)}else this._window=null,this._updateTags.add(ev),Vd(this);Qy("root",this,!1,t,r)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,r){t.isEmpty()&&Zt(38);let n=t;n._readOnly&&(n=az(t),n._selection=t._selection?t._selection.clone():null),bU(this);const s=this._pendingEditorState,a=this._updateTags,i=r!==void 0?r.tag:null;s===null||s.isEmpty()||(i!=null&&a.add(i),Vd(this)),this._pendingEditorState=n,this._dirtyType=Vp,this._dirtyElements.set("root",!1),this._compositionKey=null,i!=null&&a.add(i),this._updating||Vd(this)}parseEditorState(t,r){return(function(n,s,a){const i=i7(),o=Si,c=hl,u=ki,d=s._dirtyElements,f=s._dirtyLeaves,h=s._cloneNotNeeded,g=s._dirtyType;s._dirtyElements=new Map,s._dirtyLeaves=new Set,s._cloneNotNeeded=new Set,s._dirtyType=0,Si=i,hl=!1,ki=s,c7(null);try{const p=s._nodes;s7(n.root,p),a&&a(),i._readOnly=!0}catch(p){p instanceof Error&&s._onError(p)}finally{s._dirtyElements=d,s._dirtyLeaves=f,s._cloneNotNeeded=h,s._dirtyType=g,Si=o,hl=c,ki=u}return i})(typeof t=="string"?JSON.parse(t):t,this,r)}read(t){return Vd(this),this.getEditorState().read(t,{editor:this})}update(t,r){(function(n,s,a){n._updating?n._updates.push([s,a]):K_(n,s,a)})(this,t,r)}focus(t,r={}){const n=this._rootElement;n!==null&&(n.setAttribute("autocapitalize","off"),Pl(this,(()=>{const s=hr(),a=Gs();s!==null?s.dirty||eo(s.clone()):a.getChildrenSize()!==0&&(r.defaultSelection==="rootStart"?a.selectStart():a.selectEnd()),aoe("focus"),ioe((()=>{n.removeAttribute("autocapitalize"),t&&t()}))})),this._pendingEditorState===null&&n.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;t!==null&&t.blur();const r=fu(this._window);r!==null&&r.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,Qy("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}X_.version="0.35.0+prod.esm";let b8=null;function c7(e){b8=e}let Zie=1;function cz(e,t){const r=u7(e,t);return r===void 0&&Zt(30,t),r}function u7(e,t){return e._nodes.get(t)}const eoe=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)};function yF(e){return Vn(Hf(e))}function d7(e){const t=document.activeElement;if(!Ms(t))return!1;const r=t.nodeName;return Vn(Hf(e))&&(r==="INPUT"||r==="TEXTAREA"||t.contentEditable==="true"&&J_(t)==null)}function h2(e,t,r){const n=e.getRootElement();try{return n!==null&&n.contains(t)&&n.contains(r)&&t!==null&&!d7(t)&&uz(t)===e}catch{return!1}}function f7(e){return e instanceof X_}function uz(e){let t=e;for(;t!=null;){const r=J_(t);if(f7(r))return r;t=m2(t)}return null}function J_(e){return e?e.__lexicalEditor:null}function mm(e){return G_(e)||e.isToken()}function Wd(e){return mm(e)||e.isSegmented()}function S0(e){return y1(e)&&e.nodeType===Jae}function toe(e){return y1(e)&&e.nodeType===Qae}function qp(e){let t=e;for(;t!=null;){if(S0(t))return t;t=t.firstChild}return null}function E4(e,t,r){const n=Nm[t];if(r!==null&&(e&n)==(r&n))return e;let s=e^n;return t==="subscript"?s&=-65:t==="superscript"?s&=-33:t==="lowercase"?(s&=-513,s&=-1025):t==="uppercase"?(s&=-257,s&=-1025):t==="capitalize"&&(s&=-257,s&=-513),s}function dz(e){return mr(e)||t0(e)||Vn(e)}function roe(e,t){const r=(function(){const i=b8;return b8=null,i})();if((t=t||r&&r.__key)!=null)return void(e.__key=t);Yi(),rz();const n=ra(),s=sh(),a=""+Zie++;s._nodeMap.set(a,e),Dt(e)?n._dirtyElements.set(a,!0):n._dirtyLeaves.add(a),n._cloneNotNeeded.add(a),n._dirtyType=xU,e.__key=a}function gm(e){const t=e.getParent();if(t!==null){const r=e.getWritable(),n=t.getWritable(),s=e.getPreviousSibling(),a=e.getNextSibling(),i=a!==null?a.__key:null,o=s!==null?s.__key:null,c=s!==null?s.getWritable():null,u=a!==null?a.getWritable():null;s===null&&(n.__first=i),a===null&&(n.__last=o),c!==null&&(c.__next=i),u!==null&&(u.__prev=o),r.__prev=null,r.__next=null,r.__parent=null,n.__size--}}function N4(e){rz();const t=e.getLatest(),r=t.__parent,n=sh(),s=ra(),a=n._nodeMap,i=s._dirtyElements;r!==null&&(function(c,u,d){let f=c;for(;f!==null;){if(d.has(f))return;const h=u.get(f);if(h===void 0)break;d.set(f,!1),f=h.__parent}})(r,a,i);const o=t.__key;s._dirtyType=xU,Dt(e)?i.set(o,!0):s._dirtyLeaves.add(o)}function Xi(e){Yi();const t=ra(),r=t._compositionKey;if(e!==r){if(t._compositionKey=e,r!==null){const n=Ga(r);n!==null&&n.getWritable()}if(e!==null){const n=Ga(e);n!==null&&n.getWritable()}}}function Af(){return u2()?null:ra()._compositionKey}function Ga(e,t){const r=(t||sh())._nodeMap.get(e);return r===void 0?null:r}function fz(e,t){const r=Q_(e,ra());return r!==void 0?Ga(r,t):null}function Q_(e,t){return e[`__lexicalKey_${t._key}`]}function Hf(e,t){let r=e;for(;r!=null;){const n=fz(r,t);if(n!==null)return n;r=m2(r)}return null}function hz(e){const t=e._decorators,r=Object.assign({},t);return e._pendingDecorators=r,r}function vF(e){return e.read((()=>Gs().getTextContent()))}function Gs(){return mz(sh())}function mz(e){return e._nodeMap.get("root")}function eo(e){Yi();const t=sh();e!==null&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function kp(e){const t=ra(),r=(function(n,s){let a=n;for(;a!=null;){const i=Q_(a,s);if(i!==void 0)return i;a=m2(a)}return null})(e,t);return r===null?e===t.getRootElement()?Ga("root"):null:Ga(r)}function gz(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function h7(e){const t=[];let r=e;for(;r!==null;)t.push(r),r=r._parentEditor;return t}function pz(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function xz(e){return S0(e)?e.nodeValue:null}function m7(e,t,r){const n=fu(kc(t));if(n===null)return;const s=n.anchorNode;let{anchorOffset:a,focusOffset:i}=n;if(s!==null){let o=xz(s);const c=Hf(s);if(o!==null&&mr(c)){if(o===z_&&r){const u=r.length;o=r,a=u,i=u}o!==null&&g7(c,o,a,i,e)}}}function g7(e,t,r,n,s){let a=e;if(a.isAttached()&&(s||!a.isDirty())){const i=a.isComposing();let o=t;(i||s)&&t[t.length-1]===z_&&(o=t.slice(0,-1));const c=a.getTextContent();if(s||o!==c){if(o===""){if(Xi(null),_v||Gp||m4)a.remove();else{const y=ra();setTimeout((()=>{y.update((()=>{a.isAttached()&&a.remove()}))}),20)}return}const u=a.getParent(),d=x1(),f=a.getTextContentSize(),h=Af(),g=a.getKey();if(a.isToken()||h!==null&&g===h&&!i||qt(d)&&(u!==null&&!u.canInsertTextBefore()&&d.anchor.offset===0||d.anchor.key===e.__key&&d.anchor.offset===0&&!a.canInsertTextBefore()&&!i||d.focus.key===e.__key&&d.focus.offset===f&&!a.canInsertTextAfter()&&!i))return void a.markDirty();const p=hr();if(!qt(p)||r===null||n===null)return void bF(a,o,p);if(p.setTextNodeRange(a,r,a,n),a.isSegmented()){const y=ha(a.getTextContent());a.replace(y),a=y}bF(a,o,p)}}}function bF(e,t,r){if(e.setTextContent(t),qt(r)){const n=e.getKey();for(const s of["anchor","focus"]){const a=r[s];a.type==="text"&&a.key===n&&(a.offset=Lf(e,a.offset,"clamp"))}}}function tw(e,t,r){const n=t[r]||!1;return n==="any"||n===e[r]}function noe(e,t){return tw(e,t,"altKey")&&tw(e,t,"ctrlKey")&&tw(e,t,"shiftKey")&&tw(e,t,"metaKey")}function ns(e,t,r){return noe(e,r)&&e.key.toLowerCase()===t.toLowerCase()}const zd={ctrlKey:!zu,metaKey:zu},wF={altKey:zu,ctrlKey:!zu};function _F(e){return e.key==="Backspace"}function SF(e){return ns(e,"a",zd)}function soe(e){const t=Gs();if(qt(e)){const r=e.anchor,n=e.focus,s=r.getNode().getTopLevelElementOrThrow().getParentOrThrow();return r.set(s.getKey(),0,"element"),n.set(s.getKey(),s.getChildrenSize(),"element"),x4(e),e}{const r=t.select(0,t.getChildrenSize());return eo(x4(r)),r}}function Fp(e,t){e.__lexicalClassNameCache===void 0&&(e.__lexicalClassNameCache={});const r=e.__lexicalClassNameCache,n=r[t];if(n!==void 0)return n;const s=e[t];if(typeof s=="string"){const a=pU(s);return r[t]=a,a}return s}function p7(e,t,r,n,s){if(r.size===0)return;const a=n.__type,i=n.__key,o=t.get(a);o===void 0&&Zt(33,a);const c=o.klass;let u=e.get(c);u===void 0&&(u=new Map,e.set(c,u));const d=u.get(i),f=d==="destroyed"&&s==="created";(d===void 0||f)&&u.set(i,f?"updated":s)}function kF(e,t,r){const n=e.getParent();let s=r,a=e;return n!==null&&(t&&r===0?(s=a.getIndexWithinParent(),a=n):t||r!==a.getChildrenSize()||(s=a.getIndexWithinParent()+1,a=n)),a.getChildAtIndex(t?s-1:s)}function w8(e,t){const r=e.offset;if(e.type==="element")return kF(e.getNode(),t,r);{const n=e.getNode();if(t&&r===0||!t&&r===n.getTextContentSize()){const s=t?n.getPreviousSibling():n.getNextSibling();return s===null?kF(n.getParentOrThrow(),t,n.getIndexWithinParent()+(t?0:1)):s}}return null}function yz(e){const t=kc(e).event,r=t&&t.inputType;return r==="insertFromPaste"||r==="insertFromPasteAsQuotation"}function Ar(e,t,r){return(function(n,s,a){const i=h7(n);for(let o=4;o>=0;o--)for(let c=0;c<i.length;c++){const u=i[c],d=u._commands.get(s);if(d!==void 0){const f=d[o];if(f!==void 0){const h=Array.from(f),g=h.length;let p=!1;if(Pl(u,(()=>{for(let y=0;y<g;y++)if(h[y](a,n))return void(p=!0)})),p)return p}}}return!1})(e,t,r)}function Z_(e){return!ii(e)&&!e.isLastChild()&&!e.isInline()}function Pm(e,t){const r=e._keyToDOMMap.get(t);return r===void 0&&Zt(75,t),r}function m2(e){const t=e.assignedSlot||e.parentElement;return k8(t)?t.host:t}function vz(e){return toe(e)?e:Ms(e)?e.ownerDocument:null}function aoe(e){Yi(),ra()._updateTags.add(e)}function ioe(e){Yi(),ra()._deferred.push(e)}function _8(e,t){let r=e.getParent();for(;r!==null;){if(r.is(t))return!0;r=r.getParent()}return!1}function x7(e){const t=vz(e);return t?t.defaultView:null}function kc(e){const t=e._window;return t===null&&Zt(78),t}function ooe(e){return Dt(e)&&e.isInline()||Vn(e)&&e.isInline()}function loe(e){let t=e.getParentOrThrow();for(;t!==null;){if(Go(t))return t;t=t.getParentOrThrow()}return t}function Go(e){return ii(e)||Dt(e)&&e.isShadowRoot()}function Yo(e){const t=ra(),r=e.getType(),n=u7(t,r);n===void 0&&Zt(200,e.constructor.name,r);const{replace:s,replaceWithKlass:a}=n;if(s!==null){const i=s(e),o=i.constructor;return a!==null?i instanceof a||Zt(201,a.name,a.getType(),o.name,o.getType(),e.constructor.name,r):i instanceof e.constructor&&o!==e.constructor||Zt(202,o.name,o.getType(),e.constructor.name,r),i.__key===e.__key&&Zt(203,e.constructor.name,r,o.name,o.getType()),i}return e}function p5(e,t){!ii(e.getParent())||Dt(t)||Vn(t)||Zt(99)}function coe(e){const t=Ga(e);return t===null&&Zt(63,e),t}function x5(e){return(Vn(e)||Dt(e)&&!e.canBeEmpty())&&!e.isInline()}function S8(e,t,r){r.style.removeProperty("caret-color"),t._blockCursorElement=null;const n=e.parentElement;n!==null&&n.removeChild(e)}function fu(e){return gu?(e||window).getSelection():null}function uoe(e){const t=x7(e);return t?t.getSelection():null}function bz(e){return Ms(e)&&e.tagName==="A"}function Ms(e){return y1(e)&&e.nodeType===Xae}function y1(e){return typeof e=="object"&&e!==null&&"nodeType"in e&&typeof e.nodeType=="number"}function k8(e){return y1(e)&&e.nodeType===Zae}function C8(e){const t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return e.nodeName.match(t)!==null}function A4(e){const t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return e.nodeName.match(t)!==null}function xc(e){if(Vn(e)&&!e.isInline())return!0;if(!Dt(e)||Go(e))return!1;const t=e.getFirstChild(),r=t===null||t0(t)||mr(t)||t.isInline();return!e.isInline()&&e.canBeEmpty()!==!1&&r}function y5(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function g2(){return ra()}const CF=new WeakMap,doe=new Map;function TF(e){if(!e._readOnly&&e.isEmpty())return doe;e._readOnly||Zt(192);let t=CF.get(e);return t||(t=(function(r){const n=new Map;for(const[s,a]of r._nodeMap){const i=a.__type;let o=n.get(i);o||(o=new Map,n.set(i,o)),o.set(s,a)}return n})(e),CF.set(e,t)),t}function y7(e){const t=e.constructor.clone(e);return t.afterCloneFrom(e),t}function v7(e,t){const r=parseInt(e.style.paddingInlineStart,10)||0,n=Math.round(r/40);t.setIndent(n)}function foe(e){e.__lexicalUnmanaged=!0}function hoe(e){return e.__lexicalUnmanaged===!0}function Sy(e,t){return(function(r,n){return Object.prototype.hasOwnProperty.call(r,n)})(e,t)&&e[t]!==g1[t]}function b7(e){const t=LP in e.prototype?e.prototype[LP]():void 0,r=(function(i){return i===a7||i===_o||i===g1})(e),n=!r&&Sy(e,"getType")?e.getType():void 0;let s,a=n;if(t)if(n)s=t[n];else for(const[i,o]of Object.entries(t))a=i,s=o;if(!r&&a&&(Sy(e,"getType")||(e.getType=()=>a),Sy(e,"clone")||(e.clone=i=>(c7(i),new e)),Sy(e,"importJSON")||(e.importJSON=s&&s.$importJSON||(i=>new e().updateFromJSON(i))),!Sy(e,"importDOM")&&s)){const{importDOM:i}=s;i&&(e.importDOM=()=>i)}return{ownNodeConfig:s,ownNodeType:a}}function moe(e){const t=g2();return Yi(),new(t.resolveRegisteredNodeAfterReplacements(t.getRegisteredNode(e))).klass}const goe={next:"previous",previous:"next"};class w7{constructor(t){this.origin=t}[Symbol.iterator](){return T7({hasNext:Om,initial:this.getAdjacentCaret(),map:t=>t,step:t=>t.getAdjacentCaret()})}getAdjacentCaret(){return Zi(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return Zi(this.origin,this.direction)}remove(){const t=this.getNodeAtCaret();return t&&t.remove(),this}replaceOrInsert(t,r){const n=this.getNodeAtCaret();return t.is(this.origin)||t.is(n)||(n===null?this.insert(t):n.replace(t,r)),this}splice(t,r,n="next"){const s=n===this.direction?r:Array.from(r).reverse();let a=this;const i=this.getParentAtCaret(),o=new Map;for(let c=a.getAdjacentCaret();c!==null&&o.size<t;c=c.getAdjacentCaret()){const u=c.origin.getWritable();o.set(u.getKey(),u)}for(const c of s){if(o.size>0){const u=a.getNodeAtCaret();if(u){if(o.delete(u.getKey()),o.delete(c.getKey()),!(u.is(c)||a.origin.is(c))){const d=c.getParent();d&&d.is(i)&&c.remove(),u.replace(c)}}else u===null&&Zt(263,Array.from(o).join(" "))}else a.insert(c);a=Zi(c,this.direction)}for(const c of o.values())c.remove();return this}}class Nv extends w7{type="child";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Cc(t,this.direction)}getParentCaret(t="root"){return Zi(_7(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=v1(this.direction);return Zi(this.getNodeAtCaret(),t)||Cc(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof Nv&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const poe={root:ii,shadowRoot:Go};function v1(e){return goe[e]}function _7(e,t="root"){return poe[t](e)?null:e}class Fm extends w7{type="sibling";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Zi(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return Dt(this.origin)?Cc(this.origin,this.direction):null}getParentCaret(t="root"){return Zi(_7(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=v1(this.direction);return Zi(this.getNodeAtCaret(),t)||Cc(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof Fm&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof Fm||t instanceof Mm)&&this.direction===t.direction&&this.origin.is(t.origin)}}class Mm extends w7{type="text";constructor(t,r){super(t),this.offset=r}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Dm(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return Zi(_7(this.getParentAtCaret(),t),this.direction)}getFlipped(){return Dm(this.origin,v1(this.direction),this.offset)}isSamePointCaret(t){return t instanceof Mm&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof Fm||t instanceof Mm)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return Zi(this.origin,this.direction)}}function If(e){return e instanceof Mm}function Om(e){return e instanceof Fm}function Zu(e){return e instanceof Nv}const xoe={next:class extends Mm{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends Mm{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},yoe={next:class extends Fm{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends Fm{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},voe={next:class extends Nv{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends Nv{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function Zi(e,t){return e?new yoe[t](e):null}function Dm(e,t,r){return e?new xoe[t](e,Lf(e,r)):null}function Lf(e,t,r="error"){const n=e.getTextContentSize();let s=t==="next"?n:t==="previous"?0:t;return(s<0||s>n)&&(r!=="clamp"&&(function(a,...i){const o=new URL("https://lexical.dev/docs/error"),c=new URLSearchParams;c.append("code",a);for(const u of i)c.append("v",u);o.search=c.toString(),console.warn(`Minified Lexical warning #${a}; visit ${o.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(284,String(t),String(n),e.getKey()),s=s<0?0:n),s}function EF(e,t){return new woe(e,t)}function Cc(e,t){return Dt(e)?new voe[t](e):null}function boe(e){return e&&e.getChildCaret()||e}function S7(e){return e&&boe(e.getAdjacentCaret())}class k7{type="node-caret-range";constructor(t,r,n){this.anchor=t,this.focus=r,this.direction=n}getLatest(){const t=this.anchor.getLatest(),r=this.focus.getLatest();return t===this.anchor&&r===this.focus?this:new k7(t,r,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const t=s=>{const a=this[s].getLatest();return If(a)?(function(i,o){const{direction:c,origin:u}=i,d=Lf(u,o==="focus"?v1(c):c);return EF(i,d-i.offset)})(a,s):null},r=t("anchor"),n=t("focus");if(r&&n){const{caret:s}=r,{caret:a}=n;if(s.isSameNodeCaret(a))return[EF(s,a.offset-s.offset),null]}return[r,n]}iterNodeCarets(t="root"){const r=If(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),n=this.focus.getLatest(),s=If(n),a=i=>i.isSameNodeCaret(n)?null:S7(i)||i.getParentCaret(t);return T7({hasNext:i=>i!==null&&!(s&&n.isSameNodeCaret(i)),initial:r.isSameNodeCaret(n)?null:a(r),map:i=>i,step:a})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class woe{type="slice";constructor(t,r){this.caret=t,this.distance=r}getSliceIndices(){const{distance:t,caret:{offset:r}}=this,n=r+t;return n<r?[n,r]:[r,n]}getTextContent(){const[t,r]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(t,r)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:t,direction:r}}=this,[n,s]=this.getSliceIndices(),a=t.getTextContent();return Dm(t.setTextContent(a.slice(0,n)+a.slice(s)),r,n)}}function C7(e){return Gf(e,Zi(Gs(),e.direction))}function _oe(e){return Gf(e,e)}function Gf(e,t){return e.direction!==t.direction&&Zt(265),new k7(e,t,e.direction)}function T7(e){const{initial:t,hasNext:r,step:n,map:s}=e;let a=t;return{[Symbol.iterator](){return this},next(){if(!r(a))return{done:!0,value:void 0};const i={done:!1,value:s(a)};return a=n(a),i}}}function wz(e,t){const r=Jw(e.origin,t.origin);switch(r===null&&Zt(275,e.origin.getKey(),t.origin.getKey()),r.type){case"same":{const n=e.type==="text",s=t.type==="text";return n&&s?(function(a,i){return Math.sign(a-i)})(e.offset,t.offset):e.type===t.type?0:n?-1:s?1:e.type==="child"?-1:1}case"ancestor":return e.type==="child"?-1:1;case"descendant":return t.type==="child"?1:-1;case"branch":return _z(r)}}function _z(e){const{a:t,b:r}=e,n=t.__key,s=r.__key;let a=t,i=r;for(;a&&i;a=a.getNextSibling(),i=i.getNextSibling()){if(a.__key===s)return-1;if(i.__key===n)return 1}return a===null?1:-1}function rw(e,t){return t.is(e)}function NF(e){return Dt(e)?[e.getLatest(),null]:[e.getParent(),e.getLatest()]}function Jw(e,t){if(e.is(t))return{commonAncestor:e,type:"same"};const r=new Map;for(let[n,s]=NF(e);n;s=n,n=n.getParent())r.set(n,s);for(let[n,s]=NF(t);n;s=n,n=n.getParent()){const a=r.get(n);if(a!==void 0)return a===null?(rw(e,n)||Zt(276),{commonAncestor:n,type:"ancestor"}):s===null?(rw(t,n)||Zt(277),{commonAncestor:n,type:"descendant"}):((Dt(a)||rw(e,a))&&(Dt(s)||rw(t,s))&&n.is(a.getParent())&&n.is(s.getParent())||Zt(278),{a,b:s,commonAncestor:n,type:"branch"})}return null}function f0(e,t){const{type:r,key:n,offset:s}=e,a=coe(e.key);return r==="text"?(mr(a)||Zt(266,a.getType(),n),Dm(a,t,s)):(Dt(a)||Zt(267,a.getType(),n),Coe(a,e.offset,t))}function Rm(e,t){const{origin:r,direction:n}=t,s=n==="next";If(t)?e.set(r.getKey(),t.offset,"text"):Om(t)?mr(r)?e.set(r.getKey(),Lf(r,n),"text"):e.set(r.getParentOrThrow().getKey(),r.getIndexWithinParent()+(s?1:0),"element"):(Zu(t)&&Dt(r)||Zt(268),e.set(r.getKey(),s?0:r.getChildrenSize(),"element"))}function Soe(e){const t=hr(),r=qt(t)?t:q_();return Qw(r,e),eo(r),r}function Qw(e,t){Rm(e.anchor,t.anchor),Rm(e.focus,t.focus)}function AF(e){const{anchor:t,focus:r}=e,n=f0(t,"next"),s=f0(r,"next"),a=wz(n,s)<=0?"next":"previous";return Gf(Kp(n,a),Kp(s,a))}function E7(e){const{direction:t,origin:r}=e,n=Zi(r,v1(t)).getNodeAtCaret();return n?Zi(n,t):Cc(r.getParentOrThrow(),t)}function jF(e,t="root"){const r=[e];for(let n=Zu(e)?e.getParentCaret(t):e.getSiblingCaret();n!==null;n=n.getParentCaret(t))r.push(E7(n));return r}function v5(e){return!!e&&e.origin.isAttached()}function koe(e,t="removeEmptySlices"){if(e.isCollapsed())return e;const r="root",n="next";let s=t;const a=kz(e,n),i=jF(a.anchor,r),o=jF(a.focus.getFlipped(),r),c=new Set,u=[];for(const p of a.iterNodeCarets(r))if(Zu(p))c.add(p.origin.getKey());else if(Om(p)){const{origin:y}=p;Dt(y)&&!c.has(y.getKey())||u.push(y)}for(const p of u)p.remove();for(const p of a.getTextSlices()){if(!p)continue;const{origin:y}=p.caret,v=y.getTextContentSize(),C=E7(Zi(y,n)),S=y.getMode();if(Math.abs(p.distance)===v&&s==="removeEmptySlices"||S==="token"&&p.distance!==0)C.remove();else if(p.distance!==0){s="removeEmptySlices";let w=p.removeTextSlice();const T=p.caret.origin;if(S==="segmented"){const N=w.origin,A=ha(N.getTextContent()).setStyle(N.getStyle()).setFormat(N.getFormat());C.replaceOrInsert(A),w=Dm(A,n,w.offset)}T.is(i[0].origin)&&(i[0]=w),T.is(o[0].origin)&&(o[0]=w.getFlipped())}}let d,f;for(const p of i)if(v5(p)){d=yc(p);break}for(const p of o)if(v5(p)){f=yc(p);break}const h=(function(p,y,v){if(!p||!y)return null;const C=p.getParentAtCaret(),S=y.getParentAtCaret();if(!C||!S)return null;const w=C.getParents().reverse();w.push(C);const T=S.getParents().reverse();T.push(S);const N=Math.min(w.length,T.length);let A;for(A=0;A<N&&w[A]===T[A];A++);const P=(R,L)=>{let V;for(let Z=A;Z<R.length;Z++){const Y=R[Z];if(Go(Y))return;!V&&L(Y)&&(V=Y)}return V},j=P(w,xc),F=j&&P(T,(R=>v.has(R.getKey())&&xc(R)));return j&&F?[j,F]:null})(d,f,c);if(h){const[p,y]=h;Cc(p,"previous").splice(0,y.getChildren()),y.remove()}const g=[d,f,...i,...o].find(v5);if(g)return _oe(Kp(yc(g),e.direction));Zt(269,JSON.stringify(i.map((p=>p.origin.__key))))}function yc(e){const t=(function(s){let a=s;for(;Zu(a);){const i=S7(a);if(!Zu(i))break;a=i}return a})(e.getLatest()),{direction:r}=t;if(mr(t.origin))return If(t)?t:Dm(t.origin,r,r);const n=t.getAdjacentCaret();return Om(n)&&mr(n.origin)?Dm(n.origin,r,v1(r)):t}function Sz(e){return If(e)&&e.offset!==Lf(e.origin,e.direction)}function Kp(e,t){return e.direction===t?e:e.getFlipped()}function kz(e,t){return e.direction===t?e:Gf(Kp(e.focus,t),Kp(e.anchor,t))}function Coe(e,t,r){let n=Cc(e,"next");for(let s=0;s<t;s++){const a=n.getAdjacentCaret();if(a===null)break;n=a}return Kp(n,r)}const Cz=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Toe=Cz?_.useLayoutEffect:_.useEffect,nw={tag:ev};function Tz({initialConfig:e,children:t}){const r=_.useMemo((()=>{const{theme:n,namespace:s,nodes:a,onError:i,editorState:o,html:c}=e,u=qae(null,n),d=Qie({editable:e.editable,html:c,namespace:s,nodes:a,onError:f=>i(f,d),theme:n});return(function(f,h){if(h!==null){if(h===void 0)f.update((()=>{const g=Gs();if(g.isEmpty()){const p=Fs();g.append(p);const y=Cz?document.activeElement:null;(hr()!==null||y!==null&&y===f.getRootElement())&&p.select()}}),nw);else if(h!==null)switch(typeof h){case"string":{const g=f.parseEditorState(h);f.setEditorState(g,nw);break}case"object":f.setEditorState(h,nw);break;case"function":f.update((()=>{Gs().isEmpty()&&h(f)}),nw)}}})(d,o),[d,u]}),[]);return Toe((()=>{const n=e.editable,[s]=r;s.setEditable(n===void 0||n)}),[]),l.jsx(m1.Provider,{value:r,children:t})}const Eoe=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?_.useLayoutEffect:_.useEffect;function Noe(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function Aoe(){return(function(e){const[t]=ad(),r=_.useMemo((()=>e(t)),[t,e]),[n,s]=_.useState((()=>r.initialValueFn())),a=_.useRef(n);return Eoe((()=>{const{initialValueFn:i,subscribe:o}=r,c=i();return a.current!==c&&(a.current=c,s(c)),o((u=>{a.current=u,s(u)}))}),[r,e]),n})(Noe)}function joe(){return Gs().getTextContent()}function Poe(e,t=!0){if(e)return!1;let r=joe();return t&&(r=r.trim()),r===""}function Foe(e){if(!Poe(e,!1))return!1;const t=Gs().getChildren(),r=t.length;if(r>1)return!1;for(let n=0;n<r;n++){const s=t[n];if(Vn(s))return!1;if(Dt(s)){if(!l7(s)||s.__indent!==0)return!1;const a=s.getChildren(),i=a.length;for(let o=0;o<i;o++){const c=a[n];if(!mr(c))return!1}}}return!0}function Ez(e){return()=>Foe(e)}const T8=new Map;function Nz(e){const t={};if(!e)return t;const r=e.split(";");for(const n of r)if(n!==""){const[s,a]=n.split(/:([^]+)/);s&&a&&(t[s.trim()]=a.trim())}return t}function PF(e){let t=T8.get(e);return t===void 0&&(t=Nz(e),T8.set(e,t)),t}function Az(e){const t=g2().getElementByKey(e.getKey());if(t===null)return null;const r=t.ownerDocument.defaultView;return r===null?null:r.getComputedStyle(t)}function jz(e){return Az(ii(e)?e:e.getParentOrThrow())}function FF(e){const t=jz(e);return t!==null&&t.direction==="rtl"}function Pz(e,t){const r=e.getStartEndPoints();if(t.isSelected(e)&&!Wd(t)&&r!==null){const[n,s]=r,a=e.isBackward(),i=n.getNode(),o=s.getNode(),c=t.is(i),u=t.is(o);if(c||u){const[d,f]=y8(e),h=i.is(o),g=t.is(a?o:i),p=t.is(a?i:o);let y,v=0;h?(v=d>f?f:d,y=d>f?d:f):g?(v=a?f:d,y=void 0):p&&(v=0,y=a?d:f),t.__text=t.__text.slice(v,y)}}return t}function Moe(e){const t=e.getStyle(),r=Nz(t);T8.set(t,r)}function Ooe(e,t){const r=e.getFormatType(),n=e.getIndent();r!==t.getFormatType()&&t.setFormat(r),n!==t.getIndent()&&t.setIndent(n)}function Mp(e,t,r=Ooe){if(e===null)return;const n=e.getStartEndPoints(),s=new Map;let a=null;if(n){const[i,o]=n;a=q_(),a.anchor.set(i.key,i.offset,i.type),a.focus.set(o.key,o.offset,o.type);const c=b5(i.getNode(),xc),u=b5(o.getNode(),xc);Dt(c)&&s.set(c.getKey(),c),Dt(u)&&s.set(u.getKey(),u)}for(const i of e.getNodes())if(Dt(i)&&xc(i))s.set(i.getKey(),i);else if(n===null){const o=b5(i,xc);Dt(o)&&s.set(o.getKey(),o)}for(const[i,o]of s){const c=t();r(o,c),o.replace(c,!0),a&&(i===a.anchor.key&&a.anchor.set(c.getKey(),a.anchor.offset,a.anchor.type),i===a.focus.key&&a.focus.set(c.getKey(),a.focus.offset,a.focus.type))}a&&e.is(hr())&&eo(a)}function Fz(e){const t=Mz(e);return t!==null&&t.writingMode==="vertical-rl"}function Mz(e){const t=e.anchor.getNode();return Dt(t)?Az(t):jz(t)}function MF(e,t){let r=Fz(e)?!t:t;Oz(e)&&(r=!r);const n=f0(e.focus,r?"previous":"next");if(Sz(n))return!1;for(const s of C7(n)){if(Zu(s))return!s.origin.isInline();if(!Dt(s.origin)){if(Vn(s.origin))return!0;break}}return!1}function Doe(e,t,r,n){e.modify(t?"extend":"move",r,n)}function Oz(e){const t=Mz(e);return t!==null&&t.direction==="rtl"}function OF(e,t,r){const n=Oz(e);let s;s=Fz(e)||n?!r:r,Doe(e,t,s,"character")}function b5(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function Roe(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const Dz=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Ioe=Dz&&"documentMode"in document?document.documentMode:null;!(!Dz||!("InputEvent"in window)||Ioe)&&"getTargetRanges"in new window.InputEvent("input");function Rz(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}function Jm(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}function si(e,...t){const r=Rz(...t);r.length>0&&e.classList.add(...r)}function Bf(e,...t){const r=Rz(...t);r.length>0&&e.classList.remove(...r)}function Loe(e){return e?e.getAdjacentCaret():null}function Boe(e,t){let r=e;for(;r!=null;){if(r instanceof t)return r;r=r.getParent()}return null}function $oe(e){const t=eS(e,(r=>Dt(r)&&!r.isInline()));return Dt(t)||Roe(4,e.__key),t}const eS=(e,t)=>{let r=e;for(;r!==Gs()&&r!=null;){if(t(r))return r;r=r.getParent()}return null};function am(e,t){return e!==null&&Object.getPrototypeOf(e).constructor.name===t.name}function Iz(e,t){const r=[],n=Array.from(e).reverse();for(let s=n.pop();s!==void 0;s=n.pop())if(t(s))r.push(s);else if(Dt(s))for(const a of Uoe(s))n.push(a);return r}function Uoe(e){return zoe(Cc(e,"previous"))}function zoe(e){return T7({hasNext:Om,initial:e.getAdjacentCaret(),map:t=>t.origin.getLatest(),step:t=>t.getAdjacentCaret()})}function Woe(e){const t=window.location.origin,r=n=>{if(n.origin!==t)return;const s=e.getRootElement();if(document.activeElement!==s)return;const a=n.data;if(typeof a=="string"){let i;try{i=JSON.parse(a)}catch{return}if(i&&i.protocol==="nuanria_messaging"&&i.type==="request"){const o=i.payload;if(o&&o.functionId==="makeChanges"){const c=o.args;if(c){const[u,d,f,h,g,p]=c;e.update((()=>{const y=hr();if(qt(y)){const v=y.anchor;let C=v.getNode(),S=0,w=0;if(mr(C)&&u>=0&&d>=0&&(S=u,w=u+d,y.setTextNodeRange(C,S,C,w)),S===w&&f===""||(y.insertRawText(f),C=v.getNode()),mr(C)){S=h,w=h+g;const T=C.getTextContentSize();S=S>T?T:S,w=w>T?T:w,y.setTextNodeRange(C,S,C,w)}n.stopImmediatePropagation()}}))}}}}};return window.addEventListener("message",r,!0),()=>{window.removeEventListener("message",r,!0)}}function Hoe(e,t){const r=t.body?t.body.childNodes:[];let n=[];const s=[];for(let a=0;a<r.length;a++){const i=r[a];if(!Bz.has(i.nodeName)){const o=$z(i,e,s,!1);o!==null&&(n=n.concat(o))}}return(function(a){for(const i of a)i.getNextSibling()instanceof o7&&i.insertAfter(td());for(const i of a){const o=i.getChildren();for(const c of o)i.insertBefore(c);i.remove()}})(s),n}function Goe(e,t){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const r=document.createElement("div"),n=Gs().getChildren();for(let s=0;s<n.length;s++)Lz(e,n[s],r,t);return r.innerHTML}function Lz(e,t,r,n=null){let s=n===null||t.isSelected(n);const a=Dt(t)&&t.excludeFromCopy("html");let i=t;if(n!==null){let g=y7(t);g=mr(g)&&n!==null?Pz(n,g):g,i=g}const o=Dt(i)?i.getChildren():[],c=u7(e,i.getType());let u;u=c&&c.exportDOM!==void 0?c.exportDOM(e,i):i.exportDOM(e);const{element:d,after:f}=u;if(!d)return!1;const h=document.createDocumentFragment();for(let g=0;g<o.length;g++){const p=o[g],y=Lz(e,p,h,n);!s&&Dt(t)&&y&&t.extractWithChild(p,n,"html")&&(s=!0)}if(s&&!a){if((Ms(d)||k8(d))&&d.append(h),r.append(d),f){const g=f.call(i,d);g&&(k8(d)?d.replaceChildren(g):d.replaceWith(g))}}else r.append(h);return s}const Bz=new Set(["STYLE","SCRIPT"]);function $z(e,t,r,n,s=new Map,a){let i=[];if(Bz.has(e.nodeName))return i;let o=null;const c=(function(p,y){const{nodeName:v}=p,C=y._htmlConversions.get(v.toLowerCase());let S=null;if(C!==void 0)for(const w of C){const T=w(p);T!==null&&(S===null||(S.priority||0)<=(T.priority||0))&&(S=T)}return S!==null?S.conversion:null})(e,t),u=c?c(e):null;let d=null;if(u!==null){d=u.after;const p=u.node;if(o=Array.isArray(p)?p[p.length-1]:p,o!==null){for(const[,y]of s)if(o=y(o,a),!o)break;o&&i.push(...Array.isArray(p)?p:[o])}u.forChild!=null&&s.set(e.nodeName,u.forChild)}const f=e.childNodes;let h=[];const g=(o==null||!Go(o))&&(o!=null&&v8(o)||n);for(let p=0;p<f.length;p++)h.push(...$z(f[p],t,r,g,new Map(s),o));return d!=null&&(h=d(h)),A4(e)&&(h=Voe(e,h,g?()=>{const p=new o7;return r.push(p),p}:Fs)),o==null?h.length>0?i=i.concat(h):A4(e)&&(function(p){return p.nextSibling==null||p.previousSibling==null?!1:C8(p.nextSibling)&&C8(p.previousSibling)})(e)&&(i=i.concat(td())):Dt(o)&&o.append(...h),i}function Voe(e,t,r){const n=e.style.textAlign,s=[];let a=[];for(let i=0;i<t.length;i++){const o=t[i];if(v8(o))n&&!o.getFormat()&&o.setFormat(n),s.push(o);else if(a.push(o),i===t.length-1||i<t.length-1&&v8(t[i+1])){const c=r();c.setFormat(n),c.append(...a),s.push(c),a=[]}}return s}function j4(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function qoe(e,t=hr()){return t==null&&j4(166),qt(t)&&t.isCollapsed()||t.getNodes().length===0?"":Goe(e,t)}function Koe(e,t=hr()){return t==null&&j4(166),qt(t)&&t.isCollapsed()||t.getNodes().length===0?null:JSON.stringify(Yoe(e,t))}function DF(e,t,r){const n=e.getData("application/x-lexical-editor");if(n)try{const o=JSON.parse(n);if(o.namespace===r._config.namespace&&Array.isArray(o.nodes))return RF(r,Xoe(o.nodes),t)}catch{}const s=e.getData("text/html"),a=e.getData("text/plain");if(s&&a!==s)try{const o=new DOMParser().parseFromString((function(c){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:u=>u}).createHTML(c):c})(s),"text/html");return RF(r,Hoe(r,o),t)}catch{}const i=a||e.getData("text/uri-list");if(i!=null)if(qt(t)){const o=i.split(/(\r?\n|\t)/);o[o.length-1]===""&&o.pop();for(let c=0;c<o.length;c++){const u=hr();if(qt(u)){const d=o[c];d===`
`||d===`\r
`?u.insertParagraph():d==="	"?u.insertNodes([p1()]):u.insertText(d)}}}else t.insertRawText(i)}function RF(e,t,r){e.dispatchCommand(bie,{nodes:t,selection:r})||(r.insertNodes(t),(function(n){if(qt(n)&&n.isCollapsed()){const s=n.anchor;let a=null;const i=f0(s,"previous");if(i)if(If(i))a=i.origin;else{const o=Gf(i,Cc(Gs(),"next").getFlipped());for(const c of o){if(mr(c.origin)){a=c.origin;break}if(Dt(c.origin)&&!c.origin.isInline())break}}if(a&&mr(a)){const o=a.getFormat(),c=a.getStyle();n.format===o&&n.style===c||(n.format=o,n.style=c,n.dirty=!0)}}})(r))}function Uz(e,t,r,n=[]){let s=t===null||r.isSelected(t);const a=Dt(r)&&r.excludeFromCopy("html");let i=r;if(t!==null){let u=y7(r);u=mr(u)&&t!==null?Pz(t,u):u,i=u}const o=Dt(i)?i.getChildren():[],c=(function(u){const d=u.exportJSON(),f=u.constructor;if(d.type!==f.getType()&&j4(58,f.name),Dt(u)){const h=d.children;Array.isArray(h)||j4(59,f.name)}return d})(i);if(mr(i)){const u=i.__text;u.length>0?c.text=u:s=!1}for(let u=0;u<o.length;u++){const d=o[u],f=Uz(e,t,d,c.children);!s&&Dt(r)&&f&&r.extractWithChild(d,t,"clone")&&(s=!0)}if(s&&!a)n.push(c);else if(Array.isArray(c.children))for(let u=0;u<c.children.length;u++){const d=c.children[u];n.push(d)}return s}function Yoe(e,t){const r=[],n=Gs().getChildren();for(let s=0;s<n.length;s++)Uz(e,t,n[s],r);return{namespace:e._config.namespace,nodes:r}}function Xoe(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r],s=Gie(n);mr(s)&&Moe(s),t.push(s)}return t}let np=null;async function IF(e,t,r){if(np!==null)return!1;if(t!==null)return new Promise(((u,d)=>{e.update((()=>{u(LF(e,t,r))}))}));const n=e.getRootElement(),s=e._window||window,a=window.document,i=fu(s);if(n===null||i===null)return!1;const o=a.createElement("span");o.style.cssText="position: fixed; top: -1000px;",o.append(a.createTextNode("#")),n.append(o);const c=new Range;return c.setStart(o,0),c.setEnd(o,1),i.removeAllRanges(),i.addRange(c),new Promise(((u,d)=>{const f=e.registerCommand(H_,(h=>(am(h,ClipboardEvent)&&(f(),np!==null&&(window.clearTimeout(np),np=null),u(LF(e,h,r))),!0)),Jie);np=window.setTimeout((()=>{f(),np=null,u(!1)}),50),a.execCommand("copy"),o.remove()}))}function LF(e,t,r){if(r===void 0){const s=fu(e._window);if(!s)return!1;const a=s.anchorNode,i=s.focusNode;if(a!==null&&i!==null&&!h2(e,a,i))return!1;const o=hr();if(o===null)return!1;r=Qoe(o)}t.preventDefault();const n=t.clipboardData;return n!==null&&(Zoe(n,r),!0)}const Joe=[["text/html",qoe],["application/x-lexical-editor",Koe]];function Qoe(e=hr()){const t={"text/plain":e?e.getTextContent():""};if(e){const r=g2();for(const[n,s]of Joe){const a=s(r,e);a!==null&&(t[n]=a)}}return t}function Zoe(e,t){for(const r in t){const n=t[r];n!==void 0&&e.setData(r,n)}}function BF(e,t){if(document.caretRangeFromPoint!==void 0){const r=document.caretRangeFromPoint(e,t);return r===null?null:{node:r.startContainer,offset:r.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const r=document.caretPositionFromPoint(e,t);return r===null?null:{node:r.offsetNode,offset:r.offset}}return null}const b1=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,ele=b1&&"documentMode"in document?document.documentMode:null,tle=!(!b1||!("InputEvent"in window)||ele)&&"getTargetRanges"in new window.InputEvent("input"),rle=b1&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),$F=b1&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,nle=b1&&/^(?=.*Chrome).*/i.test(navigator.userAgent),sle=b1&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!nle,UF=Zr("DRAG_DROP_PASTE_FILE");let p2=class zz extends _o{static getType(){return"quote"}static clone(t){return new zz(t.__key)}createDOM(t){const r=document.createElement("blockquote");return si(r,t.theme.quote),r}updateDOM(t,r){return!1}static importDOM(){return{blockquote:t=>({conversion:ale,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(Ms(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();s&&(r.dir=s)}return{element:r}}static importJSON(t){return x2().updateFromJSON(t)}insertNewAfter(t,r){const n=Fs(),s=this.getDirection();return n.setDirection(s),this.insertAfter(n,r),n}collapseAtStart(){const t=Fs();return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}canMergeWhenEmpty(){return!0}};function x2(){return Yo(new p2)}function zF(e){return e instanceof p2}let y2=class Wz extends _o{static getType(){return"heading"}static clone(t){return new Wz(t.__tag,t.__key)}constructor(t,r){super(r),this.__tag=t}getTag(){return this.__tag}setTag(t){const r=this.getWritable();return this.__tag=t,r}createDOM(t){const r=this.__tag,n=document.createElement(r),s=t.theme.heading;if(s!==void 0){const a=s[r];si(n,a)}return n}updateDOM(t,r,n){return t.__tag!==this.__tag}static importDOM(){return{h1:t=>({conversion:sp,priority:0}),h2:t=>({conversion:sp,priority:0}),h3:t=>({conversion:sp,priority:0}),h4:t=>({conversion:sp,priority:0}),h5:t=>({conversion:sp,priority:0}),h6:t=>({conversion:sp,priority:0}),p:t=>{const r=t.firstChild;return r!==null&&WF(r)?{conversion:()=>({node:null}),priority:3}:null},span:t=>WF(t)?{conversion:r=>({node:jf("h1")}),priority:3}:null}}exportDOM(t){const{element:r}=super.exportDOM(t);if(Ms(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();s&&(r.dir=s)}return{element:r}}static importJSON(t){return jf(t.tag).updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTag(t.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(t,r=!0){const n=t?t.anchor.offset:0,s=this.getLastDescendant(),a=!s||t&&t.anchor.key===s.getKey()&&n===s.getTextContentSize()||!t?Fs():jf(this.getTag()),i=this.getDirection();if(a.setDirection(i),this.insertAfter(a,r),n===0&&!this.isEmpty()&&t){const o=Fs();o.select(),this.replace(o,!0)}return a}collapseAtStart(){const t=this.isEmpty()?Fs():jf(this.getTag());return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}extractWithChild(){return!0}};function WF(e){return e.nodeName.toLowerCase()==="span"&&e.style.fontSize==="26pt"}function sp(e){const t=e.nodeName.toLowerCase();let r=null;return t!=="h1"&&t!=="h2"&&t!=="h3"&&t!=="h4"&&t!=="h5"&&t!=="h6"||(r=jf(t),e.style!==null&&(v7(e,r),r.setFormat(e.style.textAlign))),{node:r}}function ale(e){const t=x2();return e.style!==null&&(t.setFormat(e.style.textAlign),v7(e,t)),{node:t}}function jf(e="h1"){return Yo(new y2(e))}function ile(e){return e instanceof y2}function sw(e){let t=null;if(am(e,DragEvent)?t=e.dataTransfer:am(e,ClipboardEvent)&&(t=e.clipboardData),t===null)return[!1,[],!1];const r=t.types,n=r.includes("Files"),s=r.includes("text/html")||r.includes("text/plain");return[n,Array.from(t.files),s]}function HF(e){const t=hr();if(!qt(t))return!1;const r=new Set,n=t.getNodes();for(let s=0;s<n.length;s++){const a=n[s],i=a.getKey();if(r.has(i))continue;const o=eS(a,(u=>Dt(u)&&!u.isInline()));if(o===null)continue;const c=o.getKey();o.canIndent()&&!r.has(c)&&(r.add(c),e(o))}return r.size>0}function GF(e){const t=Hf(e);return Vn(t)}function w5(e){for(const t of["lowercase","uppercase","capitalize"])e.hasFormat(t)&&e.toggleFormat(t)}function ole(e){return Jm(e.registerCommand(XT,(t=>{const r=hr();return!!uo(r)&&(r.clear(),!0)}),Bn),e.registerCommand(hm,(t=>{const r=hr();return qt(r)?(r.deleteCharacter(t),!0):!!uo(r)&&(r.deleteNodes(),!0)}),Bn),e.registerCommand(Tv,(t=>{const r=hr();return!!qt(r)&&(r.deleteWord(t),!0)}),Bn),e.registerCommand(Ev,(t=>{const r=hr();return!!qt(r)&&(r.deleteLine(t),!0)}),Bn),e.registerCommand(jp,(t=>{const r=hr();if(typeof t=="string")r!==null&&r.insertText(t);else{if(r===null)return!1;const n=t.dataTransfer;if(n!=null)DF(n,r,e);else if(qt(r)){const s=t.data;return s&&r.insertText(s),!0}}return!0}),Bn),e.registerCommand(d8,(()=>{const t=hr();return!!qt(t)&&(t.removeText(),!0)}),Bn),e.registerCommand(vo,(t=>{const r=hr();return!!qt(r)&&(r.formatText(t),!0)}),Bn),e.registerCommand(BU,(t=>{const r=hr();if(!qt(r)&&!uo(r))return!1;const n=r.getNodes();for(const s of n){const a=eS(s,(i=>Dt(i)&&!i.isInline()));a!==null&&a.setFormat(t)}return!0}),Bn),e.registerCommand(Ap,(t=>{const r=hr();return!!qt(r)&&(r.insertLineBreak(t),!0)}),Bn),e.registerCommand(Cv,(()=>{const t=hr();return!!qt(t)&&(t.insertParagraph(),!0)}),Bn),e.registerCommand(kie,(()=>(zie([p1()]),!0)),Bn),e.registerCommand(Cie,(()=>HF((t=>{const r=t.getIndent();t.setIndent(r+1)}))),Bn),e.registerCommand(KP,(()=>HF((t=>{const r=t.getIndent();r>0&&t.setIndent(Math.max(0,r-1))}))),Bn),e.registerCommand(PU,(t=>{const r=hr();if(uo(r)){const n=r.getNodes();if(n.length>0)return n[0].selectPrevious(),!0}else if(qt(r)){const n=w8(r.focus,!0);if(!t.shiftKey&&Vn(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),t.preventDefault(),!0}return!1}),Bn),e.registerCommand(FU,(t=>{const r=hr();if(uo(r)){const n=r.getNodes();if(n.length>0)return n[0].selectNext(0,0),!0}else if(qt(r)){if((function(s){const a=s.focus;return a.key==="root"&&a.offset===Gs().getChildrenSize()})(r))return t.preventDefault(),!0;const n=w8(r.focus,!1);if(!t.shiftKey&&Vn(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),t.preventDefault(),!0}return!1}),Bn),e.registerCommand(jU,(t=>{const r=hr();if(uo(r)){const n=r.getNodes();if(n.length>0)return t.preventDefault(),FF(n[0])?n[0].selectNext(0,0):n[0].selectPrevious(),!0}if(!qt(r))return!1;if(MF(r,!0)){const n=t.shiftKey;return t.preventDefault(),OF(r,n,!0),!0}return!1}),Bn),e.registerCommand(AU,(t=>{const r=hr();if(uo(r)){const s=r.getNodes();if(s.length>0)return t.preventDefault(),FF(s[0])?s[0].selectPrevious():s[0].selectNext(0,0),!0}if(!qt(r))return!1;const n=t.shiftKey;return!!MF(r,!1)&&(t.preventDefault(),OF(r,n,!1),!0)}),Bn),e.registerCommand(OU,(t=>{if(GF(t.target))return!1;const r=hr();if(qt(r)){if((function(n){if(!n.isCollapsed())return!1;const{anchor:s}=n;if(s.offset!==0)return!1;const a=s.getNode();if(ii(a))return!1;const i=$oe(a);return i.getIndent()>0&&(i.is(a)||a.is(i.getFirstDescendant()))})(r))return t.preventDefault(),e.dispatchCommand(KP,void 0);if($F&&navigator.language==="ko-KR")return!1}else if(!uo(r))return!1;return t.preventDefault(),e.dispatchCommand(hm,!0)}),Bn),e.registerCommand(RU,(t=>{if(GF(t.target))return!1;const r=hr();return!(!qt(r)&&!uo(r))&&(t.preventDefault(),e.dispatchCommand(hm,!1))}),Bn),e.registerCommand(_4,(t=>{const r=hr();if(!qt(r))return!1;if(w5(r),t!==null){if(($F||rle||sle)&&tle)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(Ap,!1)}return e.dispatchCommand(Cv,void 0)}),Bn),e.registerCommand(DU,(()=>{const t=hr();return!!qt(t)&&(e.blur(),!0)}),Bn),e.registerCommand(LU,(t=>{const[,r]=sw(t);if(r.length>0){const s=BF(t.clientX,t.clientY);if(s!==null){const{offset:a,node:i}=s,o=Hf(i);if(o!==null){const c=q_();if(mr(o))c.anchor.set(o.getKey(),a,"text"),c.focus.set(o.getKey(),a,"text");else{const d=o.getParentOrThrow().getKey(),f=o.getIndexWithinParent()+1;c.anchor.set(d,f,"element"),c.focus.set(d,f,"element")}const u=x4(c);eo(u)}e.dispatchCommand(UF,r)}return t.preventDefault(),!0}const n=hr();return!!qt(n)}),Bn),e.registerCommand($U,(t=>{const[r]=sw(t),n=hr();return!(r&&!qt(n))}),Bn),e.registerCommand(UU,(t=>{const[r]=sw(t),n=hr();if(r&&!qt(n))return!1;const s=BF(t.clientX,t.clientY);if(s!==null){const a=Hf(s.node);Vn(a)&&t.preventDefault()}return!0}),Bn),e.registerCommand(f8,(()=>(soe(),!0)),Bn),e.registerCommand(H_,(t=>(IF(e,am(t,ClipboardEvent)?t:null),!0)),Bn),e.registerCommand(e7,(t=>((async function(r,n){await IF(n,am(r,ClipboardEvent)?r:null),n.update((()=>{const s=hr();qt(s)?s.removeText():uo(s)&&s.getNodes().forEach((a=>a.remove()))}))})(t,e),!0)),Bn),e.registerCommand(JT,(t=>{const[,r,n]=sw(t);return r.length>0&&!n?(e.dispatchCommand(UF,r),!0):y1(t.target)&&d7(t.target)?!1:hr()!==null&&((function(s,a){s.preventDefault(),a.update((()=>{const i=hr(),o=am(s,InputEvent)||am(s,KeyboardEvent)?null:s.clipboardData;o!=null&&i!==null&&DF(o,i,a)}),{tag:qie})})(t,e),!0)}),Bn),e.registerCommand(MU,(t=>{const r=hr();return qt(r)&&w5(r),!1}),Bn),e.registerCommand(IU,(t=>{const r=hr();return qt(r)&&w5(r),!1}),Bn))}const E8=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?_.useLayoutEffect:_.useEffect;function VF(e){return e.getEditorState().read(Ez(e.isComposing()))}function Hz({contentEditable:e,placeholder:t=null,ErrorBoundary:r}){const[n]=ad(),s=(function(a,i){const[o,c]=_.useState((()=>a.getDecorators()));return E8((()=>a.registerDecoratorListener((u=>{Ak.flushSync((()=>{c(u)}))}))),[a]),_.useEffect((()=>{c(a.getDecorators())}),[a]),_.useMemo((()=>{const u=[],d=Object.keys(o);for(let f=0;f<d.length;f++){const h=d[f],g=l.jsx(i,{onError:y=>a._onError(y),children:l.jsx(_.Suspense,{fallback:null,children:o[h]})}),p=a.getElementByKey(h);p!==null&&u.push(Ak.createPortal(g,p,h))}return u}),[i,o,a])})(n,r);return(function(a){E8((()=>Jm(ole(a),Woe(a))),[a])})(n),l.jsxs(l.Fragment,{children:[e,l.jsx(lle,{content:t}),s]})}function lle({content:e}){const[t]=ad(),r=(function(s){const[a,i]=_.useState((()=>VF(s)));return E8((()=>{function o(){const c=VF(s);i(c)}return o(),Jm(s.registerUpdateListener((()=>{o()})),s.registerEditableListener((()=>{o()})))}),[s]),a})(t),n=Aoe();return r?typeof e=="function"?e(n):e:null}const Gz=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?_.useLayoutEffect:_.useEffect;function cle({editor:e,ariaActiveDescendant:t,ariaAutoComplete:r,ariaControls:n,ariaDescribedBy:s,ariaErrorMessage:a,ariaExpanded:i,ariaInvalid:o,ariaLabel:c,ariaLabelledBy:u,ariaMultiline:d,ariaOwns:f,ariaRequired:h,autoCapitalize:g,className:p,id:y,role:v="textbox",spellCheck:C=!0,style:S,tabIndex:w,"data-testid":T,...N},A){const[P,j]=_.useState(e.isEditable()),F=_.useCallback((L=>{L&&L.ownerDocument&&L.ownerDocument.defaultView?e.setRootElement(L):e.setRootElement(null)}),[e]),R=_.useMemo((()=>(function(...L){return V=>{L.forEach((Z=>{typeof Z=="function"?Z(V):Z!=null&&(Z.current=V)}))}})(A,F)),[F,A]);return Gz((()=>(j(e.isEditable()),e.registerEditableListener((L=>{j(L)})))),[e]),l.jsx("div",{"aria-activedescendant":P?t:void 0,"aria-autocomplete":P?r:"none","aria-controls":P?n:void 0,"aria-describedby":s,...a!=null?{"aria-errormessage":a}:{},"aria-expanded":P&&v==="combobox"?!!i:void 0,...o!=null?{"aria-invalid":o}:{},"aria-label":c,"aria-labelledby":u,"aria-multiline":d,"aria-owns":P?f:void 0,"aria-readonly":!P||void 0,"aria-required":h,autoCapitalize:g,className:p,contentEditable:P,"data-testid":T,id:y,ref:R,role:v,spellCheck:C,style:S,tabIndex:w,...N})}const ule=_.forwardRef(cle);function qF(e){return e.getEditorState().read(Ez(e.isComposing()))}const Vz=_.forwardRef(dle);function dle(e,t){const{placeholder:r,...n}=e,[s]=ad();return l.jsxs(l.Fragment,{children:[l.jsx(ule,{editor:s,...n,ref:t}),r!=null&&l.jsx(fle,{editor:s,content:r})]})}function fle({content:e,editor:t}){const r=(function(i){const[o,c]=_.useState((()=>qF(i)));return Gz((()=>{function u(){const d=qF(i);c(d)}return u(),Jm(i.registerUpdateListener((()=>{u()})),i.registerEditableListener((()=>{u()})))}),[i]),o})(t),[n,s]=_.useState(t.isEditable());if(_.useLayoutEffect((()=>(s(t.isEditable()),t.registerEditableListener((i=>{s(i)})))),[t]),!r)return null;let a=null;return typeof e=="function"?a=e(n):e!==null&&(a=e),a===null?null:l.jsx("div",{"aria-hidden":!0,children:a})}const aw=0,N8=1,A8=2,tu=0,hle=1,KF=2,mle=3,gle=4;function ple(e,t,r,n,s){if(e===null||r.size===0&&n.size===0&&!s)return tu;const a=t._selection,i=e._selection;if(s)return hle;if(!(qt(a)&&qt(i)&&i.isCollapsed()&&a.isCollapsed()))return tu;const o=(function(C,S,w){const T=C._nodeMap,N=[];for(const A of S){const P=T.get(A);P!==void 0&&N.push(P)}for(const[A,P]of w){if(!P)continue;const j=T.get(A);j===void 0||ii(j)||N.push(j)}return N})(t,r,n);if(o.length===0)return tu;if(o.length>1){const C=t._nodeMap,S=C.get(a.anchor.key),w=C.get(i.anchor.key);return S&&w&&!e._nodeMap.has(S.__key)&&mr(S)&&S.__text.length===1&&a.anchor.offset===1?KF:tu}const c=o[0],u=e._nodeMap.get(c.__key);if(!mr(u)||!mr(c)||u.__mode!==c.__mode)return tu;const d=u.__text,f=c.__text;if(d===f)return tu;const h=a.anchor,g=i.anchor;if(h.key!==g.key||h.type!=="text")return tu;const p=h.offset,y=g.offset,v=f.length-d.length;return v===1&&y===p-1?KF:v===-1&&y===p+1?mle:v===-1&&y===p?gle:tu}function xle(e,t){let r=Date.now(),n=tu;return(s,a,i,o,c,u)=>{const d=Date.now();if(u.has(T4))return n=tu,r=d,A8;const f=ple(s,a,o,c,e.isComposing()),h=(()=>{const g=i===null||i.editor===e,p=u.has(Vie);if(!p&&g&&u.has(ev))return aw;if(s===null)return N8;const y=a._selection;return o.size>0||c.size>0?p===!1&&f!==tu&&f===n&&d<r+t&&g||o.size===1&&(function(v,C,S){const w=C._nodeMap.get(v),T=S._nodeMap.get(v),N=C._selection,A=S._selection;return!(qt(N)&&qt(A)&&N.anchor.type==="element"&&N.focus.type==="element"&&A.anchor.type==="text"&&A.focus.type==="text"||!mr(w)||!mr(T)||w.__parent!==T.__parent)&&JSON.stringify(C.read((()=>w.exportJSON())))===JSON.stringify(S.read((()=>T.exportJSON())))})(Array.from(o)[0],s,a)?aw:N8:y!==null?aw:A8})();return r=d,n=f,h}}function YF(e){e.undoStack=[],e.redoStack=[],e.current=null}function yle(e,t,r){const n=xle(e,r);return Jm(e.registerCommand(QT,(()=>((function(a,i){const o=i.redoStack,c=i.undoStack;if(c.length!==0){const u=i.current,d=c.pop();u!==null&&(o.push(u),a.dispatchCommand(Xb,!0)),c.length===0&&a.dispatchCommand(Jb,!1),i.current=d||null,d&&d.editor.setEditorState(d.editorState,{tag:T4})}})(e,t),!0)),Bn),e.registerCommand(ZT,(()=>((function(a,i){const o=i.redoStack,c=i.undoStack;if(o.length!==0){const u=i.current;u!==null&&(c.push(u),a.dispatchCommand(Jb,!0));const d=o.pop();o.length===0&&a.dispatchCommand(Xb,!1),i.current=d||null,d&&d.editor.setEditorState(d.editorState,{tag:T4})}})(e,t),!0)),Bn),e.registerCommand(Eie,(()=>(YF(t),!1)),Bn),e.registerCommand(Nie,(()=>(YF(t),e.dispatchCommand(Xb,!1),e.dispatchCommand(Jb,!1),!0)),Bn),e.registerUpdateListener((({editorState:a,prevEditorState:i,dirtyLeaves:o,dirtyElements:c,tags:u})=>{const d=t.current,f=t.redoStack,h=t.undoStack,g=d===null?null:d.editorState;if(d!==null&&a===g)return;const p=n(i,a,d,o,c,u);if(p===N8)f.length!==0&&(t.redoStack=[],e.dispatchCommand(Xb,!1)),d!==null&&(h.push({...d}),e.dispatchCommand(Jb,!0));else if(p===A8)return;t.current={editor:e,editorState:a}})))}function vle(){return{current:null,redoStack:[],undoStack:[]}}function qz({delay:e,externalHistoryState:t}){const[r]=ad();return(function(n,s,a=1e3){const i=_.useMemo((()=>s||vle()),[s]);_.useEffect((()=>yle(n,i,a)),[a,n,i])})(r,t,e),null}function Kz({defaultSelection:e}){const[t]=ad();return _.useEffect((()=>{t.focus((()=>{const r=document.activeElement,n=t.getRootElement();n===null||r!==null&&n.contains(r)||n.focus({preventScroll:!0})}),{defaultSelection:e})}),[e,t]),null}function j8(e,t){return j8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},j8(e,t)}var XF={error:null},ble=(function(e){var t,r;function n(){for(var a,i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return(a=e.call.apply(e,[this].concat(o))||this).state=XF,a.resetErrorBoundary=function(){for(var u,d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];a.props.onReset==null||(u=a.props).onReset.apply(u,f),a.reset()},a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,j8(t,r),n.getDerivedStateFromError=function(a){return{error:a}};var s=n.prototype;return s.reset=function(){this.setState(XF)},s.componentDidCatch=function(a,i){var o,c;(o=(c=this.props).onError)==null||o.call(c,a,i)},s.componentDidUpdate=function(a,i){var o,c,u,d,f=this.state.error,h=this.props.resetKeys;f!==null&&i.error!==null&&((u=a.resetKeys)===void 0&&(u=[]),(d=h)===void 0&&(d=[]),u.length!==d.length||u.some((function(g,p){return!Object.is(g,d[p])})))&&((o=(c=this.props).onResetKeysChange)==null||o.call(c,a.resetKeys,h),this.reset())},s.render=function(){var a=this.state.error,i=this.props,o=i.fallbackRender,c=i.FallbackComponent,u=i.fallback;if(a!==null){var d={error:a,resetErrorBoundary:this.resetErrorBoundary};if(_.isValidElement(u))return u;if(typeof o=="function")return o(d);if(c)return _.createElement(c,d);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},n})(_.Component);function Yz({children:e,onError:t}){return l.jsx(ble,{fallback:l.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:t,children:e})}const N7=/^(\d+(?:\.\d+)?)px$/,Op={BOTH:3,NO_STATUS:0,ROW:1};class w1 extends _o{static getType(){return"tablecell"}static clone(t){return new w1(t.__headerState,t.__colSpan,t.__width,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__rowSpan=t.__rowSpan,this.__backgroundColor=t.__backgroundColor,this.__verticalAlign=t.__verticalAlign}static importDOM(){return{td:t=>({conversion:JF,priority:0}),th:t=>({conversion:JF,priority:0})}}static importJSON(t){return Xz().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeaderStyles(t.headerState).setColSpan(t.colSpan||1).setRowSpan(t.rowSpan||1).setWidth(t.width||void 0).setBackgroundColor(t.backgroundColor||null).setVerticalAlign(t.verticalAlign||void 0)}constructor(t=Op.NO_STATUS,r=1,n,s){super(s),this.__colSpan=r,this.__rowSpan=1,this.__headerState=t,this.__width=n,this.__backgroundColor=null,this.__verticalAlign=void 0}createDOM(t){const r=document.createElement(this.getTag());return this.__width&&(r.style.width=`${this.__width}px`),this.__colSpan>1&&(r.colSpan=this.__colSpan),this.__rowSpan>1&&(r.rowSpan=this.__rowSpan),this.__backgroundColor!==null&&(r.style.backgroundColor=this.__backgroundColor),P8(this.__verticalAlign)&&(r.style.verticalAlign=this.__verticalAlign),si(r,t.theme.tableCell,this.hasHeader()&&t.theme.tableCellHeader),r}exportDOM(t){const r=super.exportDOM(t);if(Ms(r.element)){const n=r.element;n.setAttribute("data-temporary-table-cell-lexical-key",this.getKey()),n.style.border="1px solid black",this.__colSpan>1&&(n.colSpan=this.__colSpan),this.__rowSpan>1&&(n.rowSpan=this.__rowSpan),n.style.width=`${this.getWidth()||75}px`,n.style.verticalAlign=this.getVerticalAlign()||"top",n.style.textAlign="start",this.__backgroundColor===null&&this.hasHeader()&&(n.style.backgroundColor="#f2f3f5")}return r}exportJSON(){return{...super.exportJSON(),...P8(this.__verticalAlign)&&{verticalAlign:this.__verticalAlign},backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,width:this.getWidth()}}getColSpan(){return this.getLatest().__colSpan}setColSpan(t){const r=this.getWritable();return r.__colSpan=t,r}getRowSpan(){return this.getLatest().__rowSpan}setRowSpan(t){const r=this.getWritable();return r.__rowSpan=t,r}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(t,r=Op.BOTH){const n=this.getWritable();return n.__headerState=t&r|n.__headerState&~r,n}getHeaderStyles(){return this.getLatest().__headerState}setWidth(t){const r=this.getWritable();return r.__width=t,r}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(t){const r=this.getWritable();return r.__backgroundColor=t,r}getVerticalAlign(){return this.getLatest().__verticalAlign}setVerticalAlign(t){const r=this.getWritable();return r.__verticalAlign=t||void 0,r}toggleHeaderStyle(t){const r=this.getWritable();return(r.__headerState&t)===t?r.__headerState-=t:r.__headerState+=t,r}hasHeaderState(t){return(this.getHeaderStyles()&t)===t}hasHeader(){return this.getLatest().__headerState!==Op.NO_STATUS}updateDOM(t){return t.__headerState!==this.__headerState||t.__width!==this.__width||t.__colSpan!==this.__colSpan||t.__rowSpan!==this.__rowSpan||t.__backgroundColor!==this.__backgroundColor||t.__verticalAlign!==this.__verticalAlign}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}}function P8(e){return e==="middle"||e==="bottom"}function JF(e){const t=e,r=e.nodeName.toLowerCase();let n;N7.test(t.style.width)&&(n=parseFloat(t.style.width));const s=Xz(r==="th"?Op.ROW:Op.NO_STATUS,t.colSpan,n);s.__rowSpan=t.rowSpan;const a=t.style.backgroundColor;a!==""&&(s.__backgroundColor=a);const i=t.style.verticalAlign;P8(i)&&(s.__verticalAlign=i);const o=t.style,c=(o&&o.textDecoration||"").split(" "),u=o.fontWeight==="700"||o.fontWeight==="bold",d=c.includes("line-through"),f=o.fontStyle==="italic",h=c.includes("underline");return{after:g=>{const p=[];let y=null;const v=()=>{if(y){const C=y.getFirstChild();t0(C)&&y.getChildrenSize()===1&&C.remove()}};for(const C of g)ooe(C)||mr(C)||t0(C)?(mr(C)&&(u&&C.toggleFormat("bold"),d&&C.toggleFormat("strikethrough"),f&&C.toggleFormat("italic"),h&&C.toggleFormat("underline")),y?y.append(C):(y=Fs().append(C),p.push(y))):(p.push(C),v(),y=null);return v(),p.length===0&&p.push(Fs()),p},node:s}}function Xz(e=Op.NO_STATUS,t=1,r){return Yo(new w1(e,t,r))}function Av(e){return e instanceof w1}function F8(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}class _1 extends _o{static getType(){return"tablerow"}static clone(t){return new _1(t.__height,t.__key)}static importDOM(){return{tr:t=>({conversion:wle,priority:0})}}static importJSON(t){return Jz().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeight(t.height)}constructor(t,r){super(r),this.__height=t}exportJSON(){const t=this.getHeight();return{...super.exportJSON(),...t===void 0?void 0:{height:t}}}createDOM(t){const r=document.createElement("tr");return this.__height&&(r.style.height=`${this.__height}px`),si(r,t.theme.tableRow),r}extractWithChild(t,r,n){return n==="html"}isShadowRoot(){return!0}setHeight(t){const r=this.getWritable();return r.__height=t,r}getHeight(){return this.getLatest().__height}updateDOM(t){return t.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function wle(e){const t=e;let r;return N7.test(t.style.height)&&(r=parseFloat(t.style.height)),{after:n=>Iz(n,Av),node:Jz(r)}}function Jz(e){return Yo(new _1(e))}function Qz(e){return e instanceof _1}const Zz=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,_le=Zz&&"documentMode"in document?document.documentMode:null;Zz&&"InputEvent"in window&&!_le&&new window.InputEvent("input");function Sle(e,t,r){const n=[];let s=null,a=null;function i(c){let u=n[c];return u===void 0&&(n[c]=u=[]),u}const o=e.getChildren();for(let c=0;c<o.length;c++){const u=o[c];Qz(u)||F8(209);const d=i(c);for(let f=u.getFirstChild(),h=0;f!=null;f=f.getNextSibling()){for(Av(f)||F8(147);d[h]!==void 0;)h++;const g={cell:f,startColumn:h,startRow:c},{__rowSpan:p,__colSpan:y}=f;for(let v=0;v<p&&!(c+v>=o.length);v++){const C=i(c+v);for(let S=0;S<y;S++)C[h+S]=g}}}return[n,s,a]}function ky(e){return Ms(e)&&e.nodeName==="TABLE"}function kle(e,t){for(let r=t,n=null;r!==null;r=r.getParent()){if(e.is(r))return n;Av(r)&&(n=r)}return null}function Cle(e,t,r){return kle(e,Hf(t,r))}function QF(e,t,r){if(!t.theme.tableAlignment)return;const n=[],s=[];for(const a of["center","right"]){const i=t.theme.tableAlignment[a];i&&(a===r?s:n).push(i)}Bf(e,...n),si(e,...s)}const Tle=new WeakSet;function ZF(e=g2()){return Tle.has(e)}class v2 extends _o{static getType(){return"table"}getColWidths(){return this.getLatest().__colWidths}setColWidths(t){const r=this.getWritable();return r.__colWidths=t,r}static clone(t){return new v2(t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__colWidths=t.__colWidths,this.__rowStriping=t.__rowStriping,this.__frozenColumnCount=t.__frozenColumnCount,this.__frozenRowCount=t.__frozenRowCount}static importDOM(){return{table:t=>({conversion:Ele,priority:1})}}static importJSON(t){return eW().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setRowStriping(t.rowStriping||!1).setFrozenColumns(t.frozenColumnCount||0).setFrozenRows(t.frozenRowCount||0).setColWidths(t.colWidths)}constructor(t){super(t),this.__rowStriping=!1,this.__frozenColumnCount=0,this.__frozenRowCount=0}exportJSON(){return{...super.exportJSON(),colWidths:this.getColWidths(),frozenColumnCount:this.__frozenColumnCount?this.__frozenColumnCount:void 0,frozenRowCount:this.__frozenRowCount?this.__frozenRowCount:void 0,rowStriping:this.__rowStriping?this.__rowStriping:void 0}}extractWithChild(t,r,n){return n==="html"}getDOMSlot(t){const r=ky(t)?t:t.querySelector("table");return ky(r)||F8(229),super.getDOMSlot(t).withElement(r).withAfter(r.querySelector("colgroup"))}createDOM(t,r){const n=document.createElement("table");this.__style&&(n.style.cssText=this.__style);const s=document.createElement("colgroup");if(n.appendChild(s),foe(s),si(n,t.theme.table),this.updateTableElement(null,n,t),ZF(r)){const a=document.createElement("div"),i=t.theme.tableScrollableWrapper;return i?si(a,i):a.style.cssText="overflow-x: auto;",a.appendChild(n),this.updateTableWrapper(null,a,n,t),a}return n}updateTableWrapper(t,r,n,s){this.__frozenColumnCount!==(t?t.__frozenColumnCount:0)&&(function(a,i,o,c){c>0?(si(a,o.theme.tableFrozenColumn),i.setAttribute("data-lexical-frozen-column","true")):(Bf(a,o.theme.tableFrozenColumn),i.removeAttribute("data-lexical-frozen-column"))})(r,n,s,this.__frozenColumnCount),this.__frozenRowCount!==(t?t.__frozenRowCount:0)&&(function(a,i,o,c){c>0?(si(a,o.theme.tableFrozenRow),i.setAttribute("data-lexical-frozen-row","true")):(Bf(a,o.theme.tableFrozenRow),i.removeAttribute("data-lexical-frozen-row"))})(r,n,s,this.__frozenRowCount)}updateTableElement(t,r,n){this.__style!==(t?t.__style:"")&&(r.style.cssText=this.__style),this.__rowStriping!==(!!t&&t.__rowStriping)&&(function(s,a,i){i?(si(s,a.theme.tableRowStriping),s.setAttribute("data-lexical-row-striping","true")):(Bf(s,a.theme.tableRowStriping),s.removeAttribute("data-lexical-row-striping"))})(r,n,this.__rowStriping),(function(s,a,i,o){const c=s.querySelector("colgroup");if(!c)return;const u=[];for(let d=0;d<i;d++){const f=document.createElement("col"),h=o&&o[d];h&&(f.style.width=`${h}px`),u.push(f)}c.replaceChildren(...u)})(r,0,this.getColumnCount(),this.getColWidths()),QF(r,n,this.getFormatType())}updateDOM(t,r,n){const s=this.getDOMSlot(r).element;return r===s===ZF()||(Ms(a=r)&&a.nodeName==="DIV"&&this.updateTableWrapper(t,r,s,n),this.updateTableElement(t,s,n),!1);var a}exportDOM(t){const r=super.exportDOM(t),{element:n}=r;return{after:s=>{if(r.after&&(s=r.after(s)),!ky(s)&&Ms(s)&&(s=s.querySelector("table")),!ky(s))return null;QF(s,t._config,this.getFormatType());const[a]=Sle(this),i=new Map;for(const d of a)for(const f of d){const h=f.cell.getKey();i.has(h)||i.set(h,{colSpan:f.cell.getColSpan(),startColumn:f.startColumn})}const o=new Set;for(const d of s.querySelectorAll(":scope > tr > [data-temporary-table-cell-lexical-key]")){const f=d.getAttribute("data-temporary-table-cell-lexical-key");if(f){const h=i.get(f);if(d.removeAttribute("data-temporary-table-cell-lexical-key"),h){i.delete(f);for(let g=0;g<h.colSpan;g++)o.add(g+h.startColumn)}}}const c=s.querySelector(":scope > colgroup");if(c){const d=Array.from(s.querySelectorAll(":scope > colgroup > col")).filter(((f,h)=>o.has(h)));c.replaceChildren(...d)}const u=s.querySelectorAll(":scope > tr");if(u.length>0){const d=document.createElement("tbody");for(const f of u)d.appendChild(f);s.append(d)}return s},element:!ky(n)&&Ms(n)?n.querySelector("table"):n}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(t,r){const{rows:n,domRows:s}=r;for(let a=0;a<n;a++){const i=s[a];if(i!=null)for(let o=0;o<i.length;o++){const c=i[o];if(c==null)continue;const{elem:u}=c,d=Cle(this,u);if(d!==null&&t.is(d))return{x:o,y:a}}}throw new Error("Cell not found in table.")}getDOMCellFromCords(t,r,n){const{domRows:s}=n,a=s[r];if(a==null)return null;const i=a[t<a.length?t:a.length-1];return i??null}getDOMCellFromCordsOrThrow(t,r,n){const s=this.getDOMCellFromCords(t,r,n);if(!s)throw new Error("Cell not found at cords.");return s}getCellNodeFromCords(t,r,n){const s=this.getDOMCellFromCords(t,r,n);if(s==null)return null;const a=Hf(s.elem);return Av(a)?a:null}getCellNodeFromCordsOrThrow(t,r,n){const s=this.getCellNodeFromCords(t,r,n);if(!s)throw new Error("Node at cords not TableCellNode.");return s}getRowStriping(){return!!this.getLatest().__rowStriping}setRowStriping(t){const r=this.getWritable();return r.__rowStriping=t,r}setFrozenColumns(t){const r=this.getWritable();return r.__frozenColumnCount=t,r}getFrozenColumns(){return this.getLatest().__frozenColumnCount}setFrozenRows(t){const r=this.getWritable();return r.__frozenRowCount=t,r}getFrozenRows(){return this.getLatest().__frozenRowCount}canSelectBefore(){return!0}canIndent(){return!1}getColumnCount(){const t=this.getFirstChild();if(!t)return 0;let r=0;return t.getChildren().forEach((n=>{Av(n)&&(r+=n.getColSpan())})),r}}function Ele(e){const t=eW();e.hasAttribute("data-lexical-row-striping")&&t.setRowStriping(!0),e.hasAttribute("data-lexical-frozen-column")&&t.setFrozenColumns(1),e.hasAttribute("data-lexical-frozen-row")&&t.setFrozenRows(1);const r=e.querySelector(":scope > colgroup");if(r){let n=[];for(const s of r.querySelectorAll(":scope > col")){let a=s.style.width||"";if(!N7.test(a)&&(a=s.getAttribute("width")||"",!/^\d+$/.test(a))){n=void 0;break}n.push(parseFloat(a))}n&&t.setColWidths(n)}return{after:n=>Iz(n,Qz),node:t}}function eW(){return Yo(new v2)}function Pf(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function M8(e){let t=1,r=e.getParent();for(;r!=null;){if(Qn(r)){const n=r.getParent();if(pn(n)){t++,r=n.getParent();continue}Pf(40)}return t}return t}function O8(e){let t=e.getParent();pn(t)||Pf(40);let r=t;for(;r!==null;)r=r.getParent(),pn(r)&&(t=r);return t}function tW(e){let t=[];const r=e.getChildren().filter(Qn);for(let n=0;n<r.length;n++){const s=r[n],a=s.getFirstChild();pn(a)?t=t.concat(tW(a)):t.push(s)}return t}function Gu(e){return Qn(e)&&pn(e.getFirstChild())}function eM(e){return zl().append(e)}function rW(e,t){return Qn(e)&&(t.length===0||t.length===1&&e.is(t[0])&&e.getChildrenSize()===0)}function tM(e){const t=hr();if(t!==null){let r=t.getNodes();if(qt(t)){const s=t.getStartEndPoints();s===null&&Pf(143);const[a]=s,i=a.getNode(),o=i.getParent();if(Go(i)){const c=i.getFirstChild();if(c)r=c.selectStart().getNodes();else{const u=Fs();i.append(u),r=u.select().getNodes()}}else if(rW(i,r)){const c=ml(e);if(Go(o)){i.replace(c);const u=zl();Dt(i)&&(u.setFormat(i.getFormatType()),u.setIndent(i.getIndent())),c.append(u)}else if(Qn(i)){const u=i.getParentOrThrow();Im(c,u.getChildren()),u.replace(c)}return}}const n=new Set;for(let s=0;s<r.length;s++){const a=r[s];if(Dt(a)&&a.isEmpty()&&!Qn(a)&&!n.has(a.getKey())){rM(a,e);continue}let i=dz(a)?a.getParent():Qn(a)&&a.isEmpty()?a:null;for(;i!=null;){const o=i.getKey();if(pn(i)){if(!n.has(o)){const c=ml(e);Im(c,i.getChildren()),i.replace(c),n.add(o)}break}{const c=i.getParent();if(Go(c)&&!n.has(o)){n.add(o),rM(i,e);break}i=c}}}}}function Im(e,t){e.splice(e.getChildrenSize(),0,t)}function rM(e,t){if(pn(e))return e;const r=e.getPreviousSibling(),n=e.getNextSibling(),s=zl();let a;if(Im(s,e.getChildren()),pn(r)&&t===r.getListType())r.append(s),pn(n)&&t===n.getListType()&&(Im(r,n.getChildren()),n.remove()),a=r;else if(pn(n)&&t===n.getListType())n.getFirstChildOrThrow().insertBefore(s),a=n;else{const i=ml(t);i.append(s),e.replace(i),a=i}return s.setFormat(e.getFormatType()),s.setIndent(e.getIndent()),e.remove(),a}function A7(e,t){const r=e.getLastChild(),n=t.getFirstChild();r&&n&&Gu(r)&&Gu(n)&&(A7(r.getFirstChild(),n.getFirstChild()),n.remove());const s=t.getChildren();s.length>0&&e.append(...s),t.remove()}function Nle(){const e=hr();if(qt(e)){const t=new Set,r=e.getNodes(),n=e.anchor.getNode();if(rW(n,r))t.add(O8(n));else for(let s=0;s<r.length;s++){const a=r[s];if(dz(a)){const i=Boe(a,k0);i!=null&&t.add(O8(i))}}for(const s of t){let a=s;const i=tW(s);for(const o of i){const c=Fs().setTextStyle(e.style).setTextFormat(e.format);Im(c,o.getChildren()),a.insertAfter(c),a=c,o.__key===e.anchor.key&&Rm(e.anchor,yc(Cc(c,"next"))),o.__key===e.focus.key&&Rm(e.focus,yc(Cc(c,"next"))),o.remove()}s.remove()}}}function nW(e){const t=e.getListType()!=="check";let r=e.getStart();for(const n of e.getChildren())Qn(n)&&(n.getValue()!==r&&n.setValue(r),t&&n.getLatest().__checked!=null&&n.setChecked(void 0),pn(n.getFirstChild())||r++)}function Ale(e){const t=new Set;if(Gu(e)||t.has(e.getKey()))return;const r=e.getParent(),n=e.getNextSibling(),s=e.getPreviousSibling();if(Gu(n)&&Gu(s)){const a=s.getFirstChild();if(pn(a)){a.append(e);const i=n.getFirstChild();pn(i)&&(Im(a,i.getChildren()),n.remove(),t.add(n.getKey()))}}else if(Gu(n)){const a=n.getFirstChild();if(pn(a)){const i=a.getFirstChild();i!==null&&i.insertBefore(e)}}else if(Gu(s)){const a=s.getFirstChild();pn(a)&&a.append(e)}else if(pn(r)){const a=zl().setTextFormat(e.getTextFormat()).setTextStyle(e.getTextStyle()),i=ml(r.getListType()).setTextFormat(r.getTextFormat()).setTextStyle(r.getTextStyle());a.append(i),i.append(e),s?s.insertAfter(a):n?n.insertBefore(a):r.append(a)}}function jle(e){if(Gu(e))return;const t=e.getParent(),r=t?t.getParent():void 0;if(pn(r?r.getParent():void 0)&&Qn(r)&&pn(t)){const n=t?t.getFirstChild():void 0,s=t?t.getLastChild():void 0;if(e.is(n))r.insertBefore(e),t.isEmpty()&&r.remove();else if(e.is(s))r.insertAfter(e),t.isEmpty()&&r.remove();else{const a=t.getListType(),i=zl(),o=ml(a);i.append(o),e.getPreviousSiblings().forEach((d=>o.append(d)));const c=zl(),u=ml(a);c.append(u),Im(u,e.getNextSiblings()),r.insertBefore(i),r.insertAfter(c),r.replace(e)}}}function Ple(){const e=hr();if(!qt(e)||!e.isCollapsed())return!1;const t=e.anchor.getNode();if(!Qn(t)||t.getChildrenSize()!==0)return!1;const r=O8(t),n=t.getParent();pn(n)||Pf(40);const s=n.getParent();let a;if(Go(s))a=Fs(),r.insertAfter(a);else{if(!Qn(s))return!1;a=zl(),s.insertAfter(a)}a.setTextStyle(e.style).setTextFormat(e.format).select();const i=t.getNextSiblings();if(i.length>0){const o=ml(n.getListType());if(Qn(a)){const c=zl();c.append(o),a.insertAfter(c)}else a.insertAfter(o);o.append(...i)}return(function(o){let c=o;for(;c.getNextSibling()==null&&c.getPreviousSibling()==null;){const u=c.getParent();if(u==null||!Qn(u)&&!pn(u))break;c=u}c.remove()})(t),!0}function P4(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}let k0=class extends _o{$config(){return this.config("listitem",{$transform:t=>{if(t.__checked==null)return;const r=t.getParent();pn(r)&&r.getListType()!=="check"&&t.getChecked()!=null&&t.setChecked(void 0)},extends:_o,importDOM:{li:()=>({conversion:Fle,priority:0})}})}constructor(t=1,r=void 0,n){super(n),this.__value=t===void 0?1:t,this.__checked=r}afterCloneFrom(t){super.afterCloneFrom(t),this.__value=t.__value,this.__checked=t.__checked}createDOM(t){const r=document.createElement("li");return this.updateListItemDOM(null,r,t),r}updateListItemDOM(t,r,n){const s=this.getParent();pn(s)&&s.getListType()==="check"&&(function(o,c,u,d){pn(c.getFirstChild())?(o.removeAttribute("role"),o.removeAttribute("tabIndex"),o.removeAttribute("aria-checked")):(o.setAttribute("role","checkbox"),o.setAttribute("tabIndex","-1"),u&&c.__checked===u.__checked||o.setAttribute("aria-checked",c.getChecked()?"true":"false"))})(r,this,t),r.value=this.__value,(function(o,c,u){const d=[],f=[],h=c.list,g=h?h.listitem:void 0;let p;if(h&&h.nested&&(p=h.nested.listitem),g!==void 0&&d.push(...P4(g)),h){const y=u.getParent(),v=pn(y)&&y.getListType()==="check",C=u.getChecked();v&&!C||f.push(h.listitemUnchecked),v&&C||f.push(h.listitemChecked),v&&d.push(C?h.listitemChecked:h.listitemUnchecked)}if(p!==void 0){const y=P4(p);u.getChildren().some((v=>pn(v)))?d.push(...y):f.push(...y)}f.length>0&&Bf(o,...f),d.length>0&&si(o,...d)})(r,n.theme,this);const a=t?t.__style:"",i=this.__style;a!==i&&(i===""?r.removeAttribute("style"):r.style.cssText=i),(function(o,c,u){const d=PF(c.__textStyle);for(const f in d)o.style.setProperty(`--listitem-marker-${f}`,d[f]);if(u)for(const f in PF(u.__textStyle))f in d||o.style.removeProperty(`--listitem-marker-${f}`)})(r,this,t)}updateDOM(t,r,n){const s=r;return this.updateListItemDOM(t,s,n),!1}updateFromJSON(t){return super.updateFromJSON(t).setValue(t.value).setChecked(t.checked)}exportDOM(t){const r=this.createDOM(t._config),n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();return s&&(r.dir=s),{element:r}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...t){for(let r=0;r<t.length;r++){const n=t[r];if(Dt(n)&&this.canMergeWith(n)){const s=n.getChildren();this.append(...s),n.remove()}else super.append(n)}return this}replace(t,r){if(Qn(t))return super.replace(t);this.setIndent(0);const n=this.getParentOrThrow();if(!pn(n))return t;if(n.__first===this.getKey())n.insertBefore(t);else if(n.__last===this.getKey())n.insertAfter(t);else{const s=ml(n.getListType());let a=this.getNextSibling();for(;a;){const i=a;a=a.getNextSibling(),s.append(i)}n.insertAfter(t),t.insertAfter(s)}return r&&(Dt(t)||Pf(139),this.getChildren().forEach((s=>{t.append(s)}))),this.remove(),n.getChildrenSize()===0&&n.remove(),t}insertAfter(t,r=!0){const n=this.getParentOrThrow();if(pn(n)||Pf(39),Qn(t))return super.insertAfter(t,r);const s=this.getNextSiblings();if(n.insertAfter(t,r),s.length!==0){const a=ml(n.getListType());s.forEach((i=>a.append(i))),t.insertAfter(a,r)}return t}remove(t){const r=this.getPreviousSibling(),n=this.getNextSibling();super.remove(t),r&&n&&Gu(r)&&Gu(n)&&(A7(r.getFirstChild(),n.getFirstChild()),n.remove())}insertNewAfter(t,r=!0){const n=zl().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(n,r),n}collapseAtStart(t){const r=Fs();this.getChildren().forEach((i=>r.append(i)));const n=this.getParentOrThrow(),s=n.getParentOrThrow(),a=Qn(s);if(n.getChildrenSize()===1)if(a)n.remove(),s.select();else{n.insertBefore(r),n.remove();const i=t.anchor,o=t.focus,c=r.getKey();i.type==="element"&&i.getNode().is(this)&&i.set(c,i.offset,"element"),o.type==="element"&&o.getNode().is(this)&&o.set(c,o.offset,"element")}else n.insertBefore(r),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(t){const r=this.getWritable();return r.__value=t,r}getChecked(){const t=this.getLatest();let r;const n=this.getParent();return pn(n)&&(r=n.getListType()),r==="check"?!!t.__checked:void 0}setChecked(t){const r=this.getWritable();return r.__checked=t,r}toggleChecked(){const t=this.getWritable();return t.setChecked(!t.__checked)}getIndent(){const t=this.getParent();if(t===null||!this.isAttached())return this.getLatest().__indent;let r=t.getParentOrThrow(),n=0;for(;Qn(r);)r=r.getParentOrThrow().getParentOrThrow(),n++;return n}setIndent(t){typeof t!="number"&&Pf(117),(t=Math.floor(t))>=0||Pf(199);let r=this.getIndent();for(;r!==t;)r<t?(Ale(this),r++):(jle(this),r--);return this}canInsertAfter(t){return Qn(t)}canReplaceWith(t){return Qn(t)}canMergeWith(t){return Qn(t)||l7(t)}extractWithChild(t,r){if(!qt(r))return!1;const n=r.anchor.getNode(),s=r.focus.getNode();return this.isParentOf(n)&&this.isParentOf(s)&&this.getTextContent().length===r.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return ml("bullet")}canMergeWhenEmpty(){return!0}};function Fle(e){if(e.classList.contains("task-list-item")){for(const r of e.children)if(r.tagName==="INPUT")return Mle(r)}const t=e.getAttribute("aria-checked");return{node:zl(t==="true"||t!=="false"&&void 0)}}function Mle(e){return e.getAttribute("type")!=="checkbox"?{node:null}:{node:zl(e.hasAttribute("checked"))}}function zl(e){return Yo(new k0(void 0,e))}function Qn(e){return e instanceof k0}let ah=class extends _o{$config(){return this.config("list",{$transform:t=>{(function(r){const n=r.getNextSibling();pn(n)&&r.getListType()===n.getListType()&&A7(r,n)})(t),nW(t)},extends:_o,importDOM:{ol:()=>({conversion:sM,priority:0}),ul:()=>({conversion:sM,priority:0})}})}constructor(t="number",r=1,n){super(n);const s=Dle[t]||t;this.__listType=s,this.__tag=s==="number"?"ol":"ul",this.__start=r}afterCloneFrom(t){super.afterCloneFrom(t),this.__listType=t.__listType,this.__tag=t.__tag,this.__start=t.__start}getTag(){return this.getLatest().__tag}setListType(t){const r=this.getWritable();return r.__listType=t,r.__tag=t==="number"?"ol":"ul",r}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(t){const r=this.getWritable();return r.__start=t,r}createDOM(t,r){const n=this.__tag,s=document.createElement(n);return this.__start!==1&&s.setAttribute("start",String(this.__start)),s.__lexicalListType=this.__listType,nM(s,t.theme,this),s}updateDOM(t,r,n){return t.__tag!==this.__tag||(nM(r,n.theme,this),!1)}updateFromJSON(t){return super.updateFromJSON(t).setListType(t.listType).setStart(t.start)}exportDOM(t){const r=this.createDOM(t._config,t);return Ms(r)&&(this.__start!==1&&r.setAttribute("start",String(this.__start)),this.__listType==="check"&&r.setAttribute("__lexicalListType","check")),{element:r}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(t,r,n){let s=n;for(let a=0;a<n.length;a++){const i=n[a];Qn(i)||(s===n&&(s=[...n]),s[a]=zl().append(!Dt(i)||pn(i)||i.isInline()?i:ha(i.getTextContent())))}return super.splice(t,r,s)}extractWithChild(t){return Qn(t)}};function nM(e,t,r){const n=[],s=[],a=t.list;if(a!==void 0){const i=a[`${r.__tag}Depth`]||[],o=M8(r)-1,c=o%i.length,u=i[c],d=a[r.__tag];let f;const h=a.nested,g=a.checklist;if(h!==void 0&&h.list&&(f=h.list),d!==void 0&&n.push(d),g!==void 0&&r.__listType==="check"&&n.push(g),u!==void 0){n.push(...P4(u));for(let p=0;p<i.length;p++)p!==c&&s.push(r.__tag+p)}if(f!==void 0){const p=P4(f);o>1?n.push(...p):s.push(...p)}}s.length>0&&Bf(e,...s),n.length>0&&si(e,...n)}function Ole(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r];if(Qn(n)){t.push(n);const s=n.getChildren();s.length>1&&s.forEach((a=>{pn(a)&&t.push(eM(a))}))}else t.push(eM(n))}return t}function sM(e){const t=e.nodeName.toLowerCase();let r=null;return t==="ol"?r=ml("number",e.start):t==="ul"&&(r=(function(n){if(n.getAttribute("__lexicallisttype")==="check"||n.classList.contains("contains-task-list"))return!0;for(const s of n.childNodes)if(Ms(s)&&s.hasAttribute("aria-checked"))return!0;return!1})(e)?ml("check"):ml("bullet")),{after:Ole,node:r}}const Dle={ol:"number",ul:"bullet"};function ml(e="number",t=1){return Yo(new ah(e,t))}function pn(e){return e instanceof ah}const Rle=Zr("UPDATE_LIST_START_COMMAND"),j7=Zr("INSERT_UNORDERED_LIST_COMMAND"),P7=Zr("INSERT_ORDERED_LIST_COMMAND"),F7=Zr("REMOVE_LIST_COMMAND");function Ile(e){return Jm(e.registerCommand(P7,(()=>(tM("number"),!0)),mp),e.registerCommand(Rle,(t=>{const{listNodeKey:r,newStart:n}=t,s=Ga(r);return!!pn(s)&&(s.getListType()==="number"&&(s.setStart(n),nW(s)),!0)}),mp),e.registerCommand(j7,(()=>(tM("bullet"),!0)),mp),e.registerCommand(F7,(()=>(Nle(),!0)),mp),e.registerCommand(Cv,(()=>Ple()),mp),e.registerNodeTransform(k0,(t=>{const r=t.getFirstChild();if(r){if(mr(r)){const n=r.getStyle(),s=r.getFormat();t.getTextStyle()!==n&&t.setTextStyle(n),t.getTextFormat()!==s&&t.setTextFormat(s)}}else{const n=hr();qt(n)&&(n.style!==t.getTextStyle()||n.format!==t.getTextFormat())&&n.isCollapsed()&&t.is(n.anchor.getNode())&&t.setTextStyle(n.style).setTextFormat(n.format)}})),e.registerNodeTransform(nh,(t=>{const r=t.getParent();if(Qn(r)&&t.is(r.getFirstChild())){const n=t.getStyle(),s=t.getFormat();n===r.getTextStyle()&&s===r.getTextFormat()||r.setTextStyle(n).setTextFormat(s)}})))}function Lle(e){const t=r=>{const n=r.getParent();if(pn(r.getFirstChild())||!pn(n))return;const s=eS(r,(a=>Qn(a)&&pn(a.getParent())&&Qn(a.getPreviousSibling())));if(s===null&&r.getIndent()>0)r.setIndent(0);else if(Qn(s)){const a=s.getPreviousSibling();if(Qn(a)){const i=(function(c){let u=c,d=u.getFirstChild();for(;pn(d);){const f=d.getLastChild();if(!Qn(f))break;u=f,d=u.getFirstChild()}return u})(a),o=i.getParent();if(pn(o)){const c=M8(o);c+1<M8(n)&&r.setIndent(c)}}}};return e.registerNodeTransform(ah,(r=>{const n=[r];for(;n.length>0;){const s=n.shift();if(pn(s)){for(const a of s.getChildren())if(Qn(a)){t(a);const i=a.getFirstChild();pn(i)&&n.push(i)}}}}))}var _5={exports:{}},aM;function Ble(){return aM||(aM=1,(function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var r=(function(n){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,i={},o={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function S(w){return w instanceof c?new c(w.type,S(w.content),w.alias):Array.isArray(w)?w.map(S):w.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(S){return Object.prototype.toString.call(S).slice(8,-1)},objId:function(S){return S.__id||Object.defineProperty(S,"__id",{value:++a}),S.__id},clone:function S(w,T){T=T||{};var N,A;switch(o.util.type(w)){case"Object":if(A=o.util.objId(w),T[A])return T[A];N={},T[A]=N;for(var P in w)w.hasOwnProperty(P)&&(N[P]=S(w[P],T));return N;case"Array":return A=o.util.objId(w),T[A]?T[A]:(N=[],T[A]=N,w.forEach(function(j,F){N[F]=S(j,T)}),N);default:return w}},getLanguage:function(S){for(;S;){var w=s.exec(S.className);if(w)return w[1].toLowerCase();S=S.parentElement}return"none"},setLanguage:function(S,w){S.className=S.className.replace(RegExp(s,"gi"),""),S.classList.add("language-"+w)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(N){var S=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(N.stack)||[])[1];if(S){var w=document.getElementsByTagName("script");for(var T in w)if(w[T].src==S)return w[T]}return null}},isActive:function(S,w,T){for(var N="no-"+w;S;){var A=S.classList;if(A.contains(w))return!0;if(A.contains(N))return!1;S=S.parentElement}return!!T}},languages:{plain:i,plaintext:i,text:i,txt:i,extend:function(S,w){var T=o.util.clone(o.languages[S]);for(var N in w)T[N]=w[N];return T},insertBefore:function(S,w,T,N){N=N||o.languages;var A=N[S],P={};for(var j in A)if(A.hasOwnProperty(j)){if(j==w)for(var F in T)T.hasOwnProperty(F)&&(P[F]=T[F]);T.hasOwnProperty(j)||(P[j]=A[j])}var R=N[S];return N[S]=P,o.languages.DFS(o.languages,function(L,V){V===R&&L!=S&&(this[L]=P)}),P},DFS:function S(w,T,N,A){A=A||{};var P=o.util.objId;for(var j in w)if(w.hasOwnProperty(j)){T.call(w,j,w[j],N||j);var F=w[j],R=o.util.type(F);R==="Object"&&!A[P(F)]?(A[P(F)]=!0,S(F,T,null,A)):R==="Array"&&!A[P(F)]&&(A[P(F)]=!0,S(F,T,j,A))}}},plugins:{},highlightAll:function(S,w){o.highlightAllUnder(document,S,w)},highlightAllUnder:function(S,w,T){var N={callback:T,container:S,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",N),N.elements=Array.prototype.slice.apply(N.container.querySelectorAll(N.selector)),o.hooks.run("before-all-elements-highlight",N);for(var A=0,P;P=N.elements[A++];)o.highlightElement(P,w===!0,N.callback)},highlightElement:function(S,w,T){var N=o.util.getLanguage(S),A=o.languages[N];o.util.setLanguage(S,N);var P=S.parentElement;P&&P.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(P,N);var j=S.textContent,F={element:S,language:N,grammar:A,code:j};function R(V){F.highlightedCode=V,o.hooks.run("before-insert",F),F.element.innerHTML=F.highlightedCode,o.hooks.run("after-highlight",F),o.hooks.run("complete",F),T&&T.call(F.element)}if(o.hooks.run("before-sanity-check",F),P=F.element.parentElement,P&&P.nodeName.toLowerCase()==="pre"&&!P.hasAttribute("tabindex")&&P.setAttribute("tabindex","0"),!F.code){o.hooks.run("complete",F),T&&T.call(F.element);return}if(o.hooks.run("before-highlight",F),!F.grammar){R(o.util.encode(F.code));return}if(w&&n.Worker){var L=new Worker(o.filename);L.onmessage=function(V){R(V.data)},L.postMessage(JSON.stringify({language:F.language,code:F.code,immediateClose:!0}))}else R(o.highlight(F.code,F.grammar,F.language))},highlight:function(S,w,T){var N={code:S,grammar:w,language:T};if(o.hooks.run("before-tokenize",N),!N.grammar)throw new Error('The language "'+N.language+'" has no grammar.');return N.tokens=o.tokenize(N.code,N.grammar),o.hooks.run("after-tokenize",N),c.stringify(o.util.encode(N.tokens),N.language)},tokenize:function(S,w){var T=w.rest;if(T){for(var N in T)w[N]=T[N];delete w.rest}var A=new f;return h(A,A.head,S),d(S,A,w,A.head,0),p(A)},hooks:{all:{},add:function(S,w){var T=o.hooks.all;T[S]=T[S]||[],T[S].push(w)},run:function(S,w){var T=o.hooks.all[S];if(!(!T||!T.length))for(var N=0,A;A=T[N++];)A(w)}},Token:c};n.Prism=o;function c(S,w,T,N){this.type=S,this.content=w,this.alias=T,this.length=(N||"").length|0}c.stringify=function S(w,T){if(typeof w=="string")return w;if(Array.isArray(w)){var N="";return w.forEach(function(R){N+=S(R,T)}),N}var A={type:w.type,content:S(w.content,T),tag:"span",classes:["token",w.type],attributes:{},language:T},P=w.alias;P&&(Array.isArray(P)?Array.prototype.push.apply(A.classes,P):A.classes.push(P)),o.hooks.run("wrap",A);var j="";for(var F in A.attributes)j+=" "+F+'="'+(A.attributes[F]||"").replace(/"/g,"&quot;")+'"';return"<"+A.tag+' class="'+A.classes.join(" ")+'"'+j+">"+A.content+"</"+A.tag+">"};function u(S,w,T,N){S.lastIndex=w;var A=S.exec(T);if(A&&N&&A[1]){var P=A[1].length;A.index+=P,A[0]=A[0].slice(P)}return A}function d(S,w,T,N,A,P){for(var j in T)if(!(!T.hasOwnProperty(j)||!T[j])){var F=T[j];F=Array.isArray(F)?F:[F];for(var R=0;R<F.length;++R){if(P&&P.cause==j+","+R)return;var L=F[R],V=L.inside,Z=!!L.lookbehind,Y=!!L.greedy,re=L.alias;if(Y&&!L.pattern.global){var ue=L.pattern.toString().match(/[imsuy]*$/)[0];L.pattern=RegExp(L.pattern.source,ue+"g")}for(var z=L.pattern||L,X=N.next,I=A;X!==w.tail&&!(P&&I>=P.reach);I+=X.value.length,X=X.next){var B=X.value;if(w.length>S.length)return;if(!(B instanceof c)){var W=1,D;if(Y){if(D=u(z,I,S,Z),!D||D.index>=S.length)break;var te=D.index,U=D.index+D[0].length,q=I;for(q+=X.value.length;te>=q;)X=X.next,q+=X.value.length;if(q-=X.value.length,I=q,X.value instanceof c)continue;for(var H=X;H!==w.tail&&(q<U||typeof H.value=="string");H=H.next)W++,q+=H.value.length;W--,B=S.slice(I,q),D.index-=I}else if(D=u(z,0,B,Z),!D)continue;var te=D.index,Q=D[0],ae=B.slice(0,te),ce=B.slice(te+Q.length),me=I+B.length;P&&me>P.reach&&(P.reach=me);var xe=X.prev;ae&&(xe=h(w,xe,ae),I+=ae.length),g(w,xe,W);var se=new c(j,V?o.tokenize(Q,V):Q,re,Q);if(X=h(w,xe,se),ce&&h(w,X,ce),W>1){var De={cause:j+","+R,reach:me};d(S,w,T,X.prev,I,De),P&&De.reach>P.reach&&(P.reach=De.reach)}}}}}}function f(){var S={value:null,prev:null,next:null},w={value:null,prev:S,next:null};S.next=w,this.head=S,this.tail=w,this.length=0}function h(S,w,T){var N=w.next,A={value:T,prev:w,next:N};return w.next=A,N.prev=A,S.length++,A}function g(S,w,T){for(var N=w.next,A=0;A<T&&N!==S.tail;A++)N=N.next;w.next=N,N.prev=w,S.length-=A}function p(S){for(var w=[],T=S.head.next;T!==S.tail;)w.push(T.value),T=T.next;return w}if(!n.document)return n.addEventListener&&(o.disableWorkerMessageHandler||n.addEventListener("message",function(S){var w=JSON.parse(S.data),T=w.language,N=w.code,A=w.immediateClose;n.postMessage(o.highlight(N,o.languages[T],T)),A&&n.close()},!1)),o;var y=o.util.currentScript();y&&(o.filename=y.src,y.hasAttribute("data-manual")&&(o.manual=!0));function v(){o.manual||o.highlightAll()}if(!o.manual){var C=document.readyState;C==="loading"||C==="interactive"&&y&&y.defer?document.addEventListener("DOMContentLoaded",v):window.requestAnimationFrame?window.requestAnimationFrame(v):window.setTimeout(v,16)}return o})(t);e.exports&&(e.exports=r),typeof a4<"u"&&(a4.Prism=r),r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(s,a){var i={};i["language-"+a]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[a]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};o["language-"+a]={pattern:/[\s\S]+/,inside:r.languages[a]};var c={};c[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:o},r.languages.insertBefore("markup","cdata",c)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(n,s){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:r.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,(function(n){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+s.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var a=n.languages.markup;a&&(a.tag.addInlined("style","css"),a.tag.addAttribute("style","css"))})(r),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),r.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),r.languages.markup&&(r.languages.markup.tag.addInlined("script","javascript"),r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),r.languages.js=r.languages.javascript,(function(){if(typeof r>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading",s=function(y,v){return" Error "+y+" while fetching file: "+v},a=" Error: File does not exist or is empty",i={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",c="loading",u="loaded",d="failed",f="pre[data-src]:not(["+o+'="'+u+'"]):not(['+o+'="'+c+'"])';function h(y,v,C){var S=new XMLHttpRequest;S.open("GET",y,!0),S.onreadystatechange=function(){S.readyState==4&&(S.status<400&&S.responseText?v(S.responseText):S.status>=400?C(s(S.status,S.statusText)):C(a))},S.send(null)}function g(y){var v=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(y||"");if(v){var C=Number(v[1]),S=v[2],w=v[3];return S?w?[C,Number(w)]:[C,void 0]:[C,C]}}r.hooks.add("before-highlightall",function(y){y.selector+=", "+f}),r.hooks.add("before-sanity-check",function(y){var v=y.element;if(v.matches(f)){y.code="",v.setAttribute(o,c);var C=v.appendChild(document.createElement("CODE"));C.textContent=n;var S=v.getAttribute("data-src"),w=y.language;if(w==="none"){var T=(/\.(\w+)$/.exec(S)||[,"none"])[1];w=i[T]||T}r.util.setLanguage(C,w),r.util.setLanguage(v,w);var N=r.plugins.autoloader;N&&N.loadLanguages(w),h(S,function(A){v.setAttribute(o,u);var P=g(v.getAttribute("data-range"));if(P){var j=A.split(/\r\n?|\n/g),F=P[0],R=P[1]==null?j.length:P[1];F<0&&(F+=j.length),F=Math.max(0,Math.min(F-1,j.length)),R<0&&(R+=j.length),R=Math.max(0,Math.min(R,j.length)),A=j.slice(F,R).join(`
`),v.hasAttribute("data-start")||v.setAttribute("data-start",String(F+1))}C.textContent=A,r.highlightElement(C)},function(A){v.setAttribute(o,d),C.textContent=A})}}),r.plugins.fileHighlight={highlight:function(v){for(var C=(v||document).querySelectorAll(f),S=0,w;w=C[S++];)r.highlightElement(w)}};var p=!1;r.fileHighlight=function(){p||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),p=!0),r.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(_5)),_5.exports}Ble();Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(t,r){var n={};n["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[r]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};s["language-"+r]={pattern:/[\s\S]+/,inside:Prism.languages[r]};var a={};a[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:s},Prism.languages.insertBefore("markup","cdata",a)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,t){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:Prism.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function r(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var n=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,s=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return n}),a=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+s+a+"(?:"+s+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+s+a+")(?:"+s+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(n),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+s+")"+a+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+s+"$"),inside:{"table-header":{pattern:RegExp(n),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:r(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:r(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:r(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:r(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(f){d!==f&&(e.languages.markdown[d].inside.content.inside[f]=e.languages.markdown[f])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function f(h){if(!(!h||typeof h=="string"))for(var g=0,p=h.length;g<p;g++){var y=h[g];if(y.type!=="code"){f(y.content);continue}var v=y.content[1],C=y.content[3];if(v&&C&&v.type==="code-language"&&C.type==="code-block"&&typeof v.content=="string"){var S=v.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");S=(/[a-z][\w-]*/i.exec(S)||[""])[0].toLowerCase();var w="language-"+S;C.alias?typeof C.alias=="string"?C.alias=[C.alias,w]:C.alias.push(w):C.alias=[w]}}}f(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var f="",h=0,g=d.classes.length;h<g;h++){var p=d.classes[h],y=/language-(.+)/.exec(p);if(y){f=y[1];break}}var v=e.languages[f];if(v)d.content=e.highlight(u(d.content),v,f);else if(f&&f!=="none"&&e.plugins.autoloader){var C="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=C,e.plugins.autoloader.loadLanguages(f,function(){var S=document.getElementById(C);S&&(S.innerHTML=e.highlight(S.textContent,e.languages[f],f))})}}});var i=RegExp(e.languages.markup.tag.pattern.source,"gi"),o={amp:"&",lt:"<",gt:">",quot:'"'},c=String.fromCodePoint||String.fromCharCode;function u(d){var f=d.replace(i,"");return f=f.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(h,g){if(g=g.toLowerCase(),g[0]==="#"){var p;return g[1]==="x"?p=parseInt(g.slice(2),16):p=Number(g.slice(1)),c(p)}else{var y=o[g];return y||h}}),f}e.languages.md=e.languages.markdown})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var r=e.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))})(Prism);Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/});delete Prism.languages.objectivec["class-name"];Prism.languages.objc=Prism.languages.objectivec;Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};(function(e){var t=e.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};t.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:t},boolean:t.boolean,variable:t.variable}})(Prism);var iM={},oM;function $le(){return oM||(oM=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),iM}$le();var lM={},cM;function Ule(){return cM||(cM=1,(function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,r=0;r<2;r++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string})(Prism)),lM}Ule();Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/};Prism.languages.swift["string-literal"].forEach(function(e){e.inside.interpolation.inside=Prism.languages.swift});var uM={},dM;function zle(){return dM||(dM=1,(function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript})(Prism)),uM}zle();var fM={},hM;function Wle(){return hM||(hM=1,(function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,r=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,n={pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[n,{pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:n.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+r+/[A-Z]\w*\b/.source),lookbehind:!0,inside:n.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":n,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+r+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:n.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+r+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:n.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism)),fM}Wle();var mM={},gM;function Hle(){return gM||(gM=1,(function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,r=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return t.source});e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return r})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])})(Prism)),mM}Hle();function sW(e,t){for(const r of e.childNodes){if(Ms(r)&&r.tagName===t)return!0;sW(r,t)}return!1}const Iy="data-language",Cy="data-highlight-language",iw="data-theme";class Qm extends _o{static getType(){return"code"}static clone(t){return new Qm(t.__language,t.__key)}constructor(t,r){super(r),this.__language=t||void 0,this.__isSyntaxHighlightSupported=!1,this.__theme=void 0}afterCloneFrom(t){super.afterCloneFrom(t),this.__language=t.__language,this.__theme=t.__theme,this.__isSyntaxHighlightSupported=t.__isSyntaxHighlightSupported}createDOM(t){const r=document.createElement("code");si(r,t.theme.code),r.setAttribute("spellcheck","false");const n=this.getLanguage();n&&(r.setAttribute(Iy,n),this.getIsSyntaxHighlightSupported()&&r.setAttribute(Cy,n));const s=this.getTheme();s&&r.setAttribute(iw,s);const a=this.getStyle();return a&&r.setAttribute("style",a),r}updateDOM(t,r,n){const s=this.__language,a=t.__language;s?s!==a&&r.setAttribute(Iy,s):a&&r.removeAttribute(Iy);const i=this.__isSyntaxHighlightSupported;t.__isSyntaxHighlightSupported&&a?i&&s?s!==a&&r.setAttribute(Cy,s):r.removeAttribute(Cy):i&&s&&r.setAttribute(Cy,s);const o=this.__theme,c=t.__theme;o?o!==c&&r.setAttribute(iw,o):c&&r.removeAttribute(iw);const u=this.__style,d=t.__style;return u?u!==d&&r.setAttribute("style",u):d&&r.removeAttribute("style"),!1}exportDOM(t){const r=document.createElement("pre");si(r,t._config.theme.code),r.setAttribute("spellcheck","false");const n=this.getLanguage();n&&(r.setAttribute(Iy,n),this.getIsSyntaxHighlightSupported()&&r.setAttribute(Cy,n));const s=this.getTheme();s&&r.setAttribute(iw,s);const a=this.getStyle();return a&&r.setAttribute("style",a),{element:r}}static importDOM(){return{code:t=>t.textContent!=null&&(/\r?\n/.test(t.textContent)||sW(t,"BR"))?{conversion:pM,priority:1}:null,div:()=>({conversion:Gle,priority:1}),pre:()=>({conversion:pM,priority:0}),table:t=>S5(t)?{conversion:Vle,priority:3}:null,td:t=>{const r=t,n=r.closest("table");return r.classList.contains("js-file-line")||n&&S5(n)?{conversion:xM,priority:3}:null},tr:t=>{const r=t.closest("table");return r&&S5(r)?{conversion:xM,priority:3}:null}}}static importJSON(t){return Jd().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setLanguage(t.language).setTheme(t.theme)}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),theme:this.getTheme()}}insertNewAfter(t,r=!0){const n=this.getChildren(),s=n.length;if(s>=2&&n[s-1].getTextContent()===`
`&&n[s-2].getTextContent()===`
`&&t.isCollapsed()&&t.anchor.key===this.__key&&t.anchor.offset===s){n[s-1].remove(),n[s-2].remove();const c=Fs();return this.insertAfter(c,r),c}const{anchor:a,focus:i}=t,o=(a.isBefore(i)?a:i).getNode();if(mr(o)){let c=Kle(o);const u=[];for(;;)if(G_(c))u.push(p1()),c=c.getNextSibling();else{if(!oW(c))break;{let v=0;const C=c.getTextContent(),S=c.getTextContentSize();for(;v<S&&C[v]===" ";)v++;if(v!==0&&u.push(iW(" ".repeat(v))),v!==S)break;c=c.getNextSibling()}}const d=o.splitText(a.offset)[0],f=a.offset===0?0:1,h=d.getIndexWithinParent()+f,g=o.getParentOrThrow(),p=[td(),...u];g.splice(h,0,p);const y=u[u.length-1];y?y.select():a.offset===0?d.selectPrevious():d.getNextSibling().selectNext(0,0)}if(M7(o)){const{offset:c}=t.anchor;o.splice(c,0,[td()]),o.select(c+1,c+1)}return null}canIndent(){return!1}collapseAtStart(){const t=Fs();return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}setLanguage(t){const r=this.getWritable();return r.__language=t||void 0,r}getLanguage(){return this.getLatest().__language}setIsSyntaxHighlightSupported(t){const r=this.getWritable();return r.__isSyntaxHighlightSupported=t,r}getIsSyntaxHighlightSupported(){return this.getLatest().__isSyntaxHighlightSupported}setTheme(t){const r=this.getWritable();return r.__theme=t||void 0,r}getTheme(){return this.getLatest().__theme}}function Jd(e,t){return moe(Qm).setLanguage(e).setTheme(t)}function M7(e){return e instanceof Qm}function pM(e){return{node:Jd(e.getAttribute(Iy))}}function Gle(e){const t=e,r=yM(t);return r||(function(n){let s=n.parentElement;for(;s!==null;){if(yM(s))return!0;s=s.parentElement}return!1})(t)?{node:r?Jd():null}:{node:null}}function Vle(){return{node:Jd()}}function xM(){return{node:null}}function yM(e){return e.style.fontFamily.match("monospace")!==null}function S5(e){return e.classList.contains("js-file-line-container")}let tS=class aW extends nh{constructor(t="",r,n){super(t,n),this.__highlightType=r}static getType(){return"code-highlight"}static clone(t){return new aW(t.__text,t.__highlightType||void 0,t.__key)}getHighlightType(){return this.getLatest().__highlightType}setHighlightType(t){const r=this.getWritable();return r.__highlightType=t||void 0,r}canHaveFormat(){return!1}createDOM(t){const r=super.createDOM(t),n=k5(t.theme,this.__highlightType);return si(r,n),r}updateDOM(t,r,n){const s=super.updateDOM(t,r,n),a=k5(n.theme,t.__highlightType),i=k5(n.theme,this.__highlightType);return a!==i&&(a&&Bf(r,a),i&&si(r,i)),s}static importJSON(t){return iW().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHighlightType(t.highlightType)}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType()}}setFormat(t){return this}isParentRequired(){return!0}createParentElementNode(){return Jd()}};function k5(e,t){return t&&e&&e.codeHighlight&&e.codeHighlight[t]}function iW(e="",t){return Yo(new tS(e,t))}function oW(e){return e instanceof tS}function qle(e,t){let r=e;for(let n=Zi(e,t);n&&(oW(n.origin)||G_(n.origin));n=Loe(n))r=n.origin;return r}function Kle(e){return qle(e,"previous")}(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach((function(r){var n=t[r],s=[];/^\w+$/.test(r)||s.push(/\w+/.exec(r)[0]),r==="diff"&&s.push("bold"),e.languages.diff[r]={pattern:RegExp("^(?:["+n+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:s,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(r)[0]}}}})),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);const Yle=new Set(["http:","https:","mailto:","sms:","tel:"]);class ih extends _o{static getType(){return"link"}static clone(t){return new ih(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}constructor(t="",r={},n){super(n);const{target:s=null,rel:a=null,title:i=null}=r;this.__url=t,this.__target=s,this.__rel=a,this.__title=i}createDOM(t){const r=document.createElement("a");return this.updateLinkDOM(null,r,t),si(r,t.theme.link),r}updateLinkDOM(t,r,n){if(bz(r)){t&&t.__url===this.__url||(r.href=this.sanitizeUrl(this.__url));for(const s of["target","rel","title"]){const a=`__${s}`,i=this[a];t&&t[a]===i||(i?r[s]=i:r.removeAttribute(s))}}}updateDOM(t,r,n){return this.updateLinkDOM(t,r,n),!1}static importDOM(){return{a:t=>({conversion:Xle,priority:1})}}static importJSON(t){return F4().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setURL(t.url).setRel(t.rel||null).setTarget(t.target||null).setTitle(t.title||null)}sanitizeUrl(t){t=bM(t);try{const r=new URL(bM(t));if(!Yle.has(r.protocol))return"about:blank"}catch{return t}return t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(t){const r=this.getWritable();return r.__url=t,r}getTarget(){return this.getLatest().__target}setTarget(t){const r=this.getWritable();return r.__target=t,r}getRel(){return this.getLatest().__rel}setRel(t){const r=this.getWritable();return r.__rel=t,r}getTitle(){return this.getLatest().__title}setTitle(t){const r=this.getWritable();return r.__title=t,r}insertNewAfter(t,r=!0){const n=F4(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,r),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,r,n){if(!qt(r))return!1;const s=r.anchor.getNode(),a=r.focus.getNode();return this.isParentOf(s)&&this.isParentOf(a)&&r.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function Xle(e){let t=null;if(bz(e)){const r=e.textContent;(r!==null&&r!==""||e.children.length>0)&&(t=F4(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function F4(e="",t){return Yo(new ih(e,t))}function Jle(e){return e instanceof ih}class S1 extends ih{constructor(t="",r={},n){super(t,r,n),this.__isUnlinked=r.isUnlinked!==void 0&&r.isUnlinked!==null&&r.isUnlinked}static getType(){return"autolink"}static clone(t){return new S1(t.__url,{isUnlinked:t.__isUnlinked,rel:t.__rel,target:t.__target,title:t.__title},t.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(t){const r=this.getWritable();return r.__isUnlinked=t,r}createDOM(t){return this.__isUnlinked?document.createElement("span"):super.createDOM(t)}updateDOM(t,r,n){return super.updateDOM(t,r,n)||t.__isUnlinked!==this.__isUnlinked}static importJSON(t){return vM().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIsUnlinked(t.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(t,r=!0){const n=this.getParentOrThrow().insertNewAfter(t,r);if(Dt(n)){const s=vM(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return n.append(s),s}return null}}function vM(e="",t){return Yo(new S1(e,t))}function Qle(e){return e instanceof S1}const Zle=/^\+?[0-9\s()-]{5,}$/;function bM(e){return e.match(/^[a-z][a-z0-9+.-]*:/i)||e.match(/^[/#.]/)?e:e.includes("@")?`mailto:${e}`:Zle.test(e)?`tel:${e}`:`https://${e}`}function D8(e,t){const r={};for(const n of e){const s=t(n);s&&(r[s]?r[s].push(n):r[s]=[n])}return r}function ece(e){const t=D8(e,(r=>r.type));return{element:t.element||[],multilineElement:t["multiline-element"]||[],textFormat:t["text-format"]||[],textMatch:t["text-match"]||[]}}const wM=/[!-/:-@[-`{-~\s]/;function tce(e){return mr(e)&&!e.hasFormat("code")}function rce(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function _M(e,t,r){const n=r.length;for(let s=t;s>=n;s--){const a=s-n;if(lW(e,a,r,0,n)&&e[a+n]!==" ")return a}return-1}function lW(e,t,r,n,s){for(let a=0;a<s;a++)if(e[t+a]!==r[n+a])return!1;return!0}function nce(e,t=rS){const r=ece(t),n=D8(r.textFormat,(({tag:i})=>i[i.length-1])),s=D8(r.textMatch,(({trigger:i})=>i));for(const i of t){const o=i.type;if(o==="element"||o==="text-match"||o==="multiline-element"){const c=i.dependencies;for(const u of c)e.hasNode(u)||rce(173,u.getType())}}const a=(i,o,c)=>{(function(u,d,f,h){const g=u.getParent();if(!Go(g)||u.getFirstChild()!==d)return!1;const p=d.getTextContent();if(p[f-1]!==" ")return!1;for(const{regExp:y,replace:v}of h){const C=p.match(y);if(C&&C[0].length===(C[0].endsWith(" ")?f:f-1)){const S=d.getNextSiblings(),[w,T]=d.splitText(f);if(v(u,T?[T,...S]:S,C,!1)!==!1)return w.remove(),!0}}return!1})(i,o,c,r.element)||(function(u,d,f,h){const g=u.getParent();if(!Go(g)||u.getFirstChild()!==d)return!1;const p=d.getTextContent();if(p[f-1]!==" ")return!1;for(const{regExpStart:y,replace:v,regExpEnd:C}of h){if(C&&!("optional"in C)||C&&"optional"in C&&!C.optional)continue;const S=p.match(y);if(S&&S[0].length===(S[0].endsWith(" ")?f:f-1)){const w=d.getNextSiblings(),[T,N]=d.splitText(f);if(v(u,N?[N,...w]:w,S,null,null,!1)!==!1)return T.remove(),!0}}return!1})(i,o,c,r.multilineElement)||(function(u,d,f){let h=u.getTextContent();const g=f[h[d-1]];if(g==null)return!1;d<h.length&&(h=h.slice(0,d));for(const p of g){if(!p.replace||!p.regExp)continue;const y=h.match(p.regExp);if(y===null)continue;const v=y.index||0,C=v+y[0].length;let S;return v===0?[S]=u.splitText(C):[,S]=u.splitText(v,C),S.selectNext(0,0),p.replace(S,y),!0}return!1})(o,c,s)||(function(u,d,f){const h=u.getTextContent(),g=d-1,p=h[g],y=f[p];if(!y)return!1;for(const v of y){const{tag:C}=v,S=C.length,w=g-S+1;if(S>1&&!lW(h,w,C,0,S)||h[w-1]===" ")continue;const T=h[g+1];if(v.intraword===!1&&T&&!wM.test(T))continue;const N=u;let A=N,P=_M(h,w,C),j=A;for(;P<0&&(j=j.getPreviousSibling())&&!t0(j);)if(mr(j)){if(j.hasFormat("code"))continue;const z=j.getTextContent();A=j,P=_M(z,z.length,C)}if(P<0||A===N&&P+S===w)continue;const F=A.getTextContent();if(P>0&&F[P-1]===p)continue;const R=F[P-1];if(v.intraword===!1&&R&&!wM.test(R))continue;const L=N.getTextContent(),V=L.slice(0,w)+L.slice(g+1);N.setTextContent(V);const Z=A===N?V:F;A.setTextContent(Z.slice(0,P)+Z.slice(P+S));const Y=hr(),re=q_();eo(re);const ue=g-S*(A===N?2:1)+1;re.anchor.set(A.__key,P,"text"),re.focus.set(N.__key,ue,"text");for(const z of v.format)re.hasFormat(z)||re.formatText(z);re.anchor.set(re.focus.key,re.focus.offset,re.focus.type);for(const z of v.format)re.hasFormat(z)&&re.toggleFormat(z);return qt(Y)&&(re.format=Y.format),!0}})(o,c,n)};return e.registerUpdateListener((({tags:i,dirtyLeaves:o,editorState:c,prevEditorState:u})=>{if(i.has(oz)||i.has(T4)||e.isComposing())return;const d=c.read(hr),f=u.read(hr);if(!qt(f)||!qt(d)||!d.isCollapsed()||d.is(f))return;const h=d.anchor.key,g=d.anchor.offset,p=c._nodeMap.get(h);!mr(p)||!o.has(h)||g!==1&&g>f.anchor.offset+1||e.update((()=>{if(!tce(p))return;const y=p.getParent();y===null||M7(y)||a(y,p,d.anchor.offset)}))}))}const sce=/^(\s*)(\d{1,})\.\s/,ace=/^(\s*)[-*+]\s/,ice=/^(#{1,6})\s/,oce=/^>\s/,lce=/^[ \t]*```([\w-]+)?/,cce=/[ \t]*```$/,cW=e=>(t,r,n,s)=>{const a=e(n);a.append(...r),t.replace(a),s||a.select(0,0)},uW=e=>(t,r,n,s)=>{const a=t.getPreviousSibling(),i=t.getNextSibling(),o=zl(e==="check"?n[3]==="x":void 0);if(pn(i)&&i.getListType()===e){const u=i.getFirstChild();u!==null?u.insertBefore(o):i.append(o),t.remove()}else if(pn(a)&&a.getListType()===e)a.append(o),t.remove();else{const u=ml(e,e==="number"?Number(n[2]):void 0);u.append(o),t.replace(u)}o.append(...r),s||o.select(0,0);const c=(function(u){const d=u.match(/\t/g),f=u.match(/ /g);let h=0;return d&&(h+=d.length),f&&(h+=Math.floor(f.length/4)),h})(n[1]);c&&o.setIndent(c)},O7=(e,t,r)=>{const n=[],s=e.getChildren();let a=0;for(const i of s)if(Qn(i)){if(i.getChildrenSize()===1){const d=i.getFirstChild();if(pn(d)){n.push(O7(d,t,r+1));continue}}const o=" ".repeat(4*r),c=e.getListType(),u=c==="number"?`${e.getStart()+a}. `:c==="check"?`- [${i.getChecked()?"x":" "}] `:"- ";n.push(o+u+t(i)),a++}return n.join(`
`)},uce={dependencies:[y2],export:(e,t)=>{if(!ile(e))return null;const r=Number(e.getTag().slice(1));return"#".repeat(r)+" "+t(e)},regExp:ice,replace:cW((e=>{const t="h"+e[1].length;return jf(t)})),type:"element"},dce={dependencies:[p2],export:(e,t)=>{if(!zF(e))return null;const r=t(e).split(`
`),n=[];for(const s of r)n.push("> "+s);return n.join(`
`)},regExp:oce,replace:(e,t,r,n)=>{if(n){const a=e.getPreviousSibling();if(zF(a))return a.splice(a.getChildrenSize(),0,[td(),...t]),void e.remove()}const s=x2();s.append(...t),e.replace(s),n||s.select(0,0)},type:"element"},fce={dependencies:[Qm],export:e=>{if(!M7(e))return null;const t=e.getTextContent();return"```"+(e.getLanguage()||"")+(t?`
`+t:"")+"\n```"},regExpEnd:{optional:!0,regExp:cce},regExpStart:lce,replace:(e,t,r,n,s,a)=>{let i,o;if(!t&&s){if(s.length===1)n?(i=Jd(),o=r[1]+s[0]):(i=Jd(r[1]),o=s[0].startsWith(" ")?s[0].slice(1):s[0]);else{if(i=Jd(r[1]),s[0].trim().length===0)for(;s.length>0&&!s[0].length;)s.shift();else s[0]=s[0].startsWith(" ")?s[0].slice(1):s[0];for(;s.length>0&&!s[s.length-1].length;)s.pop();o=s.join(`
`)}const c=ha(o);i.append(c),e.append(i)}else t&&cW((c=>Jd(c?c[1]:void 0)))(e,t,r,a)},type:"multiline-element"},hce={dependencies:[ah,k0],export:(e,t)=>pn(e)?O7(e,t,0):null,regExp:ace,replace:uW("bullet"),type:"element"},mce={dependencies:[ah,k0],export:(e,t)=>pn(e)?O7(e,t,0):null,regExp:sce,replace:uW("number"),type:"element"},gce={format:["code"],tag:"`",type:"text-format"},pce={format:["highlight"],tag:"==",type:"text-format"},xce={format:["bold","italic"],tag:"***",type:"text-format"},yce={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},vce={format:["bold"],tag:"**",type:"text-format"},bce={format:["bold"],intraword:!1,tag:"__",type:"text-format"},wce={format:["strikethrough"],tag:"~~",type:"text-format"},_ce={format:["italic"],tag:"*",type:"text-format"},Sce={format:["italic"],intraword:!1,tag:"_",type:"text-format"},kce={dependencies:[ih],export:(e,t,r)=>{if(!Jle(e)||Qle(e))return null;const n=e.getTitle(),s=t(e);return n?`[${s}](${e.getURL()} "${n}")`:`[${s}](${e.getURL()})`},importRegExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))/,regExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))$/,replace:(e,t)=>{const[,r,n,s]=t,a=F4(n,{title:s}),i=r.split("[").length-1,o=r.split("]").length-1;let c=r,u="";if(i<o)return;if(i>o){const f=r.split("[");u="["+f[0],c=f.slice(1).join("[")}const d=ha(c);return d.setFormat(e.getFormat()),a.append(d),e.replace(a),u&&a.insertBefore(ha(u)),d},trigger:")",type:"text-match"},Cce=[uce,dce,hce,mce],Tce=[fce],Ece=[gce,xce,yce,vce,bce,pce,_ce,Sce,wce],Nce=[kce],rS=[...Cce,...Tce,...Ece,...Nce];function SM(e,t){return e.getEditorState().read((()=>{const r=Ga(t);return r!==null&&r.isSelected()}))}function Ace(e){const[t]=ad(),[r,n]=_.useState((()=>SM(t,e)));return _.useEffect((()=>{let s=!0;const a=t.registerUpdateListener((()=>{s&&n(SM(t,e))}));return()=>{s=!1,a()}}),[t,e]),[r,_.useCallback((s=>{t.update((()=>{let a=hr();uo(a)||(a=r7(),eo(a)),uo(a)&&(s?a.add(e):a.delete(e))}))}),[t,e]),_.useCallback((()=>{t.update((()=>{const s=hr();uo(s)&&s.clear()}))}),[t])]}function jce({nodeKey:e}){const[t]=ad(),[r,n,s]=Ace(e);return _.useEffect((()=>Jm(t.registerCommand(XT,(a=>{const i=t.getElementByKey(e);return a.target===i&&(a.shiftKey||s(),n(!r),!0)}),mp))),[s,t,r,e,n]),_.useEffect((()=>{const a=t.getElementByKey(e),i=t._config.theme.hrSelected??"selected";a!==null&&(r?si(a,i):Bf(a,i))}),[t,r,e]),null}class b2 extends a7{static getType(){return"horizontalrule"}static clone(t){return new b2(t.__key)}static importJSON(t){return D7().updateFromJSON(t)}static importDOM(){return{hr:()=>({conversion:Pce,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(t){const r=document.createElement("hr");return si(r,t.theme.hr),r}getTextContent(){return`
`}isInline(){return!1}updateDOM(){return!1}decorate(){return l.jsx(jce,{nodeKey:this.__key})}}function Pce(){return{node:D7()}}function D7(){return Yo(new b2)}function Fce(e){return e instanceof b2}const Mce=[{dependencies:[b2],export:e=>Fce(e)?"***":null,regExp:/^(---|\*\*\*|___)\s?$/,replace:(e,t,r,n)=>{const s=D7();n||e.getNextSibling()!=null?e.replace(s):e.insertBefore(s),s.selectNext()},type:"element"},...rS];function dW({transformers:e=Mce}){const[t]=ad();return _.useEffect((()=>nce(t,e)),[t,e]),null}function fW({hasStrictIndent:e=!1}){const[t]=ad();return _.useEffect((()=>{if(!t.hasNodes([ah,k0]))throw new Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")}),[t]),_.useEffect((()=>{if(e)return Lle(t)}),[t,e]),(function(r){_.useEffect((()=>Ile(r)),[r])})(t),null}const Oce=({onChange:e})=>{const[t]=_.useContext(m1)||[];return _.useEffect(()=>{if(e&&t)return t.registerUpdateListener(({editorState:r})=>{r.read(()=>{Gs().getTextContent();const s=r.toJSON();e(JSON.stringify(s))})})},[t,e]),null},Dce=()=>{const[e]=_.useContext(m1)||[],t=_.useCallback(()=>{e&&e.dispatchCommand(vo,"bold")},[e]),r=_.useCallback(()=>{e&&e.dispatchCommand(vo,"italic")},[e]),n=_.useCallback(()=>{e&&e.dispatchCommand(vo,"underline")},[e]),s=_.useCallback(()=>{e&&e.dispatchCommand(vo,"strikethrough")},[e]),a=_.useCallback(g=>{e&&e.update(()=>{const p=hr();qt(p)&&Mp(p,()=>jf(g))})},[e]),i=_.useCallback(()=>{e&&e.update(()=>{const g=hr();qt(g)&&Mp(g,()=>Fs())})},[e]);_.useCallback(()=>{e&&e.update(()=>{const g=hr();qt(g)&&Mp(g,()=>x2())})},[e]);const o=_.useCallback(()=>{e&&e.dispatchCommand(j7)},[e]),c=_.useCallback(()=>{e&&e.dispatchCommand(P7)},[e]),u=_.useCallback(()=>{e&&e.dispatchCommand(F7)},[e]),d=_.useCallback(g=>{e&&e.update(()=>{const p=hr();qt(p)&&p.getNodes().forEach(y=>{mr(y)&&y.setStyle(`color: ${g}`)})})},[e]),f=_.useCallback(g=>{e&&e.update(()=>{const p=hr();qt(p)&&p.getNodes().forEach(v=>{if(mr(v)){const C=v.getStyle(),S=C?C.replace(/font-size:\s*\d+px;?\s*/g,"").trim():"",w=S?`${S}; font-size: ${g}px;`:`font-size: ${g}px;`;v.setStyle(w)}})})},[e]),h=_.useCallback(g=>{e&&e.dispatchCommand(BU,g)},[e]);return l.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-300 bg-gray-50",children:[l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:t,className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Bold",children:"B"}),l.jsx("button",{type:"button",onClick:r,className:"px-2 py-1 text-sm italic border border-gray-300 rounded hover:bg-gray-200",title:"Italic",children:"I"}),l.jsx("button",{type:"button",onClick:n,className:"px-2 py-1 text-sm underline border border-gray-300 rounded hover:bg-gray-200",title:"Underline",children:"U"}),l.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 text-sm line-through border border-gray-300 rounded hover:bg-gray-200",title:"Strikethrough",children:"S"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:()=>a("h1"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 1",children:"H1"}),l.jsx("button",{type:"button",onClick:()=>a("h2"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 2",children:"H2"}),l.jsx("button",{type:"button",onClick:()=>a("h3"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 3",children:"H3"}),l.jsx("button",{type:"button",onClick:i,className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Paragraph",children:"P"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:o,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Bullet List",children:" List"}),l.jsx("button",{type:"button",onClick:c,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Numbered List",children:"1. List"}),l.jsx("button",{type:"button",onClick:u,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Remove List",children:"No List"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("span",{className:"text-xs text-gray-600",children:"Color:"}),l.jsx("button",{type:"button",onClick:()=>d("#000000"),className:"w-6 h-6 bg-black border border-gray-300 rounded hover:bg-gray-800",title:"Black"}),l.jsx("button",{type:"button",onClick:()=>d("#ff0000"),className:"w-6 h-6 bg-red-500 border border-gray-300 rounded hover:bg-red-600",title:"Red"}),l.jsx("button",{type:"button",onClick:()=>d("#0000ff"),className:"w-6 h-6 bg-blue-500 border border-gray-300 rounded hover:bg-blue-600",title:"Blue"}),l.jsx("button",{type:"button",onClick:()=>d("#008000"),className:"w-6 h-6 bg-green-500 border border-gray-300 rounded hover:bg-green-600",title:"Green"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("span",{className:"text-xs text-gray-600",children:"Size:"}),l.jsx("button",{type:"button",onClick:()=>f(12),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Small",children:"12px"}),l.jsx("button",{type:"button",onClick:()=>f(16),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Normal",children:"16px"}),l.jsx("button",{type:"button",onClick:()=>f(20),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Large",children:"20px"}),l.jsx("button",{type:"button",onClick:()=>f(24),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Extra Large",children:"24px"})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-xs text-gray-600",children:"Align:"}),l.jsx("button",{type:"button",onClick:()=>h("left"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Left",children:""}),l.jsx("button",{type:"button",onClick:()=>h("center"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Center",children:""}),l.jsx("button",{type:"button",onClick:()=>h("right"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Right",children:""})]})]})},Rce=({value:e,onChange:t,placeholder:r})=>{const n={namespace:"LexicalEditor",theme:{root:"p-4 min-h-32 focus:outline-none",paragraph:"mb-2",heading:{h1:"text-3xl font-bold mb-4",h2:"text-2xl font-bold mb-3",h3:"text-xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic text-gray-600 mb-2",list:{nested:{listitem:"list-none"},ol:"list-decimal list-inside mb-2",ul:"list-disc list-inside mb-2",listitem:"mb-1"},text:{bold:"font-bold",italic:"italic",underline:"underline",strikethrough:"line-through"}},nodes:[y2,ah,k0,p2,Qm,tS,v2,w1,_1,S1,ih],onError:s=>{console.error("Lexical error:",s)},editorState:e?(()=>{try{const s=JSON.parse(e);return JSON.stringify(s)}catch{return JSON.stringify({root:{children:[{children:[{detail:0,format:0,mode:"normal",style:"",text:e,type:"text",version:1}],direction:"ltr",format:"",indent:0,type:"paragraph",version:1}],direction:"ltr",format:"",indent:0,type:"root",version:1}})}})():void 0};return l.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:l.jsxs(Tz,{initialConfig:n,children:[l.jsx(Dce,{}),l.jsx(Oce,{onChange:t}),l.jsxs("div",{className:"relative",children:[l.jsx(Hz,{contentEditable:l.jsx(Vz,{className:"p-4 min-h-32 focus:outline-none",placeholder:r}),placeholder:l.jsx("div",{className:"absolute top-4 left-4 text-gray-400 pointer-events-none",children:r}),ErrorBoundary:Yz}),l.jsx(qz,{}),l.jsx(Kz,{}),l.jsx(fW,{}),l.jsx(dW,{transformers:rS})]})]})})},Ice=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{user:i}=Is(),{post:o}=Gl(),{showNotification:c}=ci(),[u,d]=_.useState({test_name:e,num_questions:1,passing_score:100,questions:[{id:1,question_json:"",canvas_width:600,canvas_height:800,max_canvas_width:1536,max_canvas_height:2048}]}),[f,h]=_.useState({isLoading:!1,error:null,showPreview:!0});_.useEffect(()=>{d(C=>({...C,test_name:e||""}))},[e]);const g=()=>{if(u.num_questions>=3){h(w=>({...w,error:"Maximum 3 questions allowed for performance reasons"}));return}const S={id:Math.max(...u.questions.map(w=>w.id))+1,question_json:"",canvas_width:600,canvas_height:800,max_canvas_width:1536,max_canvas_height:2048};d(w=>({...w,num_questions:w.num_questions+1,questions:[...w.questions,S]}))},p=C=>{u.questions.length<=1||d(S=>({...S,num_questions:S.num_questions-1,questions:S.questions.filter(w=>w.id!==C)}))},y=(C,S)=>{d(w=>({...w,questions:w.questions.map(T=>T.id===C?{...T,question_json:S}:T)}))},v=async()=>{if(!u.test_name.trim()){h(C=>({...C,error:"Test name is required"}));return}if(u.questions.some(C=>!C.question_json.trim())){h(C=>({...C,error:"All questions must have content"}));return}h(C=>({...C,isLoading:!0,error:null}));try{const C={test_name:u.test_name,num_questions:u.num_questions,passing_score:u.passing_score,questions:u.questions.map((S,w)=>({question_id:w+1,question_json:S.question_json,canvas_width:S.canvas_width,canvas_height:S.canvas_height,max_canvas_width:S.max_canvas_width,max_canvas_height:S.max_canvas_height}))};t&&t(C)}catch(C){console.error("Error preparing drawing test:",C),h(S=>({...S,error:"Failed to prepare drawing test. Please try again."})),c("Failed to prepare drawing test","error")}finally{h(C=>({...C,isLoading:!1}))}};return l.jsxs("div",{className:"drawing-test-creator max-w-4xl mx-auto",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Drawing Test"}),l.jsx("p",{className:"text-gray-600",children:"Create a test where students draw based on your instructions"})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Drawing Questions (",u.num_questions,"/3)"]}),l.jsx("p",{className:"text-sm text-gray-500",children:"Maximum 3 questions for optimal performance"})]}),l.jsxs(ot,{onClick:g,disabled:u.num_questions>=3,variant:"primary",size:"sm",className:"flex items-center gap-2",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add Question"]})]}),l.jsx("div",{className:"space-y-4",children:u.questions.map((C,S)=>l.jsxs(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"text-md font-medium text-gray-800",children:["Text ",S+1]}),u.questions.length>1&&l.jsx(ot,{onClick:()=>p(C.id),variant:"secondary",size:"sm",className:"text-red-600 hover:text-red-700",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Content *"}),l.jsx(Rce,{value:C.question_json,onChange:w=>y(C.id,w),placeholder:""})]})]},C.id))})]}),f.error&&l.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 rounded-lg text-red-700",children:f.error}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx(ot,{onClick:r,variant:"secondary",disabled:f.isLoading,children:"Cancel"}),l.jsx(ot,{onClick:v,variant:"primary",disabled:f.isLoading||!u.test_name.trim(),className:"flex items-center gap-2",children:f.isLoading?l.jsxs(l.Fragment,{children:[l.jsx(un,{size:"sm",color:"white"}),"Saving..."]}):"Save Test"})]})]})},Lce=({onChange:e})=>{const[t]=_.useContext(m1)||[];return _.useEffect(()=>{if(e&&t)return t.registerUpdateListener(({editorState:r})=>{r.read(()=>{Gs().getTextContent();const s=r.toJSON();e(JSON.stringify(s))})})},[t,e]),null},Bce=({onAddBlank:e,blankCount:t})=>{const[r]=_.useContext(m1)||[],n=_.useCallback(()=>{r&&r.dispatchCommand(vo,"bold")},[r]),s=_.useCallback(()=>{r&&r.dispatchCommand(vo,"italic")},[r]),a=_.useCallback(()=>{r&&r.dispatchCommand(vo,"underline")},[r]),i=_.useCallback(()=>{r&&r.dispatchCommand(vo,"strikethrough")},[r]),o=_.useCallback(p=>{r&&r.update(()=>{const y=hr();qt(y)&&Mp(y,()=>jf(p))})},[r]),c=_.useCallback(()=>{r&&r.update(()=>{const p=hr();qt(p)&&Mp(p,()=>Fs())})},[r]),u=_.useCallback(()=>{r&&r.update(()=>{const p=hr();qt(p)&&Mp(p,()=>x2())})},[r]),d=_.useCallback(()=>{r&&r.dispatchCommand(j7)},[r]),f=_.useCallback(()=>{r&&r.dispatchCommand(P7)},[r]),h=_.useCallback(()=>{r&&r.dispatchCommand(F7)},[r]),g=_.useCallback(()=>{!r||!e||(r.update(()=>{const p=hr();if(qt(p)){const v=`${t+1}_________`,C=ha(v);C.setStyle("background-color: #f0f9ff; border: 1px dashed #3b82f6; padding: 2px 4px; border-radius: 4px; font-family: monospace;"),p.insertNodes([C])}}),e())},[r,e,t]);return l.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-300 bg-gray-50",children:[l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:n,className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Bold",children:"B"}),l.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 text-sm italic border border-gray-300 rounded hover:bg-gray-200",title:"Italic",children:"I"}),l.jsx("button",{type:"button",onClick:a,className:"px-2 py-1 text-sm underline border border-gray-300 rounded hover:bg-gray-200",title:"Underline",children:"U"}),l.jsx("button",{type:"button",onClick:i,className:"px-2 py-1 text-sm line-through border border-gray-300 rounded hover:bg-gray-200",title:"Strikethrough",children:"S"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:()=>o("h1"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 1",children:"H1"}),l.jsx("button",{type:"button",onClick:()=>o("h2"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 2",children:"H2"}),l.jsx("button",{type:"button",onClick:()=>o("h3"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 3",children:"H3"}),l.jsx("button",{type:"button",onClick:c,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Paragraph",children:"P"}),l.jsx("button",{type:"button",onClick:u,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Quote",children:'"'})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:d,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Bullet List",children:""}),l.jsx("button",{type:"button",onClick:f,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Numbered List",children:"1."}),l.jsx("button",{type:"button",onClick:h,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Remove List",children:""})]}),e&&l.jsx("div",{className:"flex items-center gap-1 border-l border-gray-300 pl-2",children:l.jsxs("button",{type:"button",onClick:g,className:"px-3 py-1 text-sm font-medium bg-blue-500 text-white border border-blue-600 rounded hover:bg-blue-600 transition-colors",title:"Add Blank",children:[l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",className:"inline mr-1",children:l.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add Blank"]})})]})},$ce=({value:e,onChange:t,placeholder:r,onAddBlank:n,blankCount:s=0})=>{const a={namespace:"FillBlanksLexicalEditor",theme:{root:"p-4 min-h-32 focus:outline-none",paragraph:"mb-2",heading:{h1:"text-3xl font-bold mb-4",h2:"text-2xl font-bold mb-3",h3:"text-xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic text-gray-600 mb-2",list:{nested:{listitem:"list-none"},ol:"list-decimal list-inside mb-2",ul:"list-disc list-inside mb-2",listitem:"mb-1"},text:{bold:"font-bold",italic:"italic",underline:"underline",strikethrough:"line-through"}},nodes:[y2,ah,k0,p2,Qm,tS,v2,w1,_1,S1,ih],onError:i=>{console.error("Lexical error:",i)},editorState:e?(()=>{try{const i=JSON.parse(e);return JSON.stringify(i)}catch{return JSON.stringify({root:{children:[{children:[{detail:0,format:0,mode:"normal",style:"",text:e,type:"text",version:1}],direction:"ltr",format:"",indent:0,type:"paragraph",version:1}],direction:"ltr",format:"",indent:0,type:"root",version:1}})}})():void 0};return l.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:l.jsxs(Tz,{initialConfig:a,children:[l.jsx(Bce,{onAddBlank:n,blankCount:s}),l.jsx(Lce,{onChange:t}),l.jsxs("div",{className:"relative",children:[l.jsx(Hz,{contentEditable:l.jsx(Vz,{className:"p-4 min-h-32 focus:outline-none"}),placeholder:l.jsx("div",{className:"absolute top-4 left-4 text-gray-400 pointer-events-none",children:r}),ErrorBoundary:Yz}),l.jsx(qz,{}),l.jsx(Kz,{}),l.jsx(fW,{}),l.jsx(dW,{transformers:rS})]})]})})},Uce=({testName:e="",allowedTime:t=null,onTestSaved:r,onCancel:n,onBackToCabinet:s,isSaving:a=!1,validationErrors:i={}})=>{const{user:o}=Is(),{post:c}=Gl(),{showNotification:u}=ci(),[d,f]=_.useState({test_name:e,test_text:"",num_questions:1,num_blanks:0,passing_score:100,separate_type:!0,allowed_time:t,blanks:[]}),[h,g]=_.useState({isLoading:!1,error:null,showPreview:!0});_.useEffect(()=>{f(P=>({...P,test_name:e||"",allowed_time:t}))},[e,t]);const p=P=>{f(j=>({...j,test_text:P}))},y=()=>{const j={id:d.blanks.length+1,position:0,question:"",options:["","","",""],correct_answer:""};f(F=>({...F,blanks:[...F.blanks,j],num_blanks:F.num_blanks+1}))},v=P=>{f(j=>({...j,blanks:j.blanks.filter(F=>F.id!==P),num_blanks:j.num_blanks-1}))},C=P=>{f(j=>({...j,blanks:j.blanks.map(F=>F.id===P?{...F,options:[...F.options,""]}:F)}))},S=(P,j)=>{f(F=>({...F,blanks:F.blanks.map(R=>R.id===P?{...R,options:R.options.filter((L,V)=>V!==j),correct_answer:R.correct_answer===String.fromCharCode(65+j)?"":R.correct_answer}:R)}))},w=(P,j,F)=>{f(R=>({...R,blanks:R.blanks.map(L=>L.id===P?{...L,options:L.options.map((V,Z)=>Z===j?F:V)}:L)}))},T=(P,j)=>{console.log(" [DEBUG] updateBlankQuestion called:",{blankId:P,question:j}),f(F=>({...F,blanks:F.blanks.map(R=>R.id===P?{...R,question:j}:R)})),console.log(" [DEBUG] updateBlankQuestion completed")},N=(P,j)=>{f(F=>({...F,blanks:F.blanks.map(R=>R.id===P?{...R,correct_answer:j}:R)}))},A=async()=>{if(!d.test_name.trim()){g(P=>({...P,error:"Test name is required"}));return}if(!d.test_text.trim()){g(P=>({...P,error:"Test text is required"}));return}if(d.blanks.length===0){g(P=>({...P,error:"At least one blank is required"}));return}if(console.log(" [DEBUG] Validating blanks:",d.blanks),d.blanks.forEach((P,j)=>{console.log(` [DEBUG] Blank ${j+1}:`,{question:P.question,questionTrimmed:P.question?.trim(),correct_answer:P.correct_answer,options:P.options})}),d.separate_type===!1){if(d.blanks.some(P=>!P.correct_answer)){console.log(" [DEBUG] Validation failed - some blanks missing correct answer"),g(P=>({...P,error:"All blanks must have correct answers"}));return}}else if(d.blanks.some(P=>!P.question.trim()||!P.correct_answer)){console.log(" [DEBUG] Validation failed - some blanks missing question or correct answer"),g(P=>({...P,error:"All blanks must have question text and correct answer"}));return}console.log(" [DEBUG] Validation passed - all blanks have question and correct answer"),g(P=>({...P,isLoading:!0,error:null}));try{const P={test_name:d.test_name,test_text:d.test_text,num_questions:d.blanks.length,num_blanks:d.blanks.length,separate_type:d.separate_type,passing_score:d.passing_score,allowed_time:d.allowed_time,blanks:d.blanks.map((j,F)=>({question_id:F+1,question_json:j.question,question:j.question,options:j.options,correct_answer:j.correct_answer,blank_positions:{},blank_options:j.options||[],correct_answers:[j.correct_answer]}))};console.log(" [DEBUG] Calling onTestSaved with data:",P),r?(console.log(" [DEBUG] onTestSaved function exists, calling it..."),r(P),console.log(" [DEBUG] onTestSaved called successfully")):console.log(" [DEBUG] onTestSaved function is null/undefined")}catch(P){console.error("Error preparing fill blanks test:",P),g(j=>({...j,error:"Failed to prepare fill blanks test. Please try again."})),u("Failed to prepare fill blanks test","error")}finally{g(P=>({...P,isLoading:!1}))}};return l.jsxs("div",{className:"fill-blanks-test-creator max-w-4xl mx-auto",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Fill Blanks Test"}),l.jsx("p",{className:"text-gray-600",children:"Create a test with text content and multiple choice blanks"}),h.error&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("p",{className:"text-red-600 text-sm",children:h.error})})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${d.separate_type===!0?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>f(P=>({...P,separate_type:!0})),children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{type:"radio",checked:d.separate_type===!0,onChange:()=>f(P=>({...P,separate_type:!0})),className:"mr-3"}),l.jsx("h4",{className:"font-medium",children:"Separate Mode"})]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Multiple choice questions below the text"})]}),l.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${d.separate_type===!1?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>f(P=>({...P,separate_type:!1})),children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{type:"radio",checked:d.separate_type===!1,onChange:()=>f(P=>({...P,separate_type:!1})),className:"mr-3"}),l.jsx("h4",{className:"font-medium",children:"Inline Mode"})]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Dropdown for option inside the text"})]})]}),l.jsx($ce,{value:d.test_text,onChange:p,placeholder:"Type your text here. Use the 'Add Blank' button in the toolbar to insert blanks.",onAddBlank:y,blankCount:d.blanks.length})]}),d.separate_type===!0&&l.jsx("div",{className:"space-y-4",children:d.blanks.map((P,j)=>l.jsxs(Ht,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h4",{className:"text-md font-medium",children:["Blank ",P.id," Configuration"]}),l.jsx(ot,{variant:"danger",size:"small",onClick:()=>v(P.id),className:"px-2 py-1 text-sm",children:"Remove Blank"})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Question Text for Blank ",P.id," *"]}),l.jsx("input",{type:"text",placeholder:"Enter question text for this blank",value:P.question,onChange:F=>T(P.id,F.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Answer Options:"}),P.options.map((F,R)=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+R)}),l.jsx("input",{type:"text",placeholder:`Option ${String.fromCharCode(65+R)}`,value:F||"",onChange:L=>w(P.id,R,L.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"}),P.options.length>2&&l.jsx(ot,{variant:"danger",size:"small",onClick:()=>S(P.id,R),className:"px-2 py-1 text-sm",children:""})]},R)),P.options.length<6&&l.jsx(ot,{variant:"secondary",size:"small",onClick:()=>C(P.id),className:"w-full",children:"+ Add Option"})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),l.jsxs("select",{value:P.correct_answer||"",onChange:F=>N(P.id,F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"",children:"Select correct answer"}),P.options.filter(F=>F.trim().length>0).map((F,R)=>l.jsxs("option",{value:String.fromCharCode(65+R),children:[String.fromCharCode(65+R),") ",F]},R))]})]})]},P.id))}),d.separate_type===!1&&l.jsx("div",{className:"space-y-4",children:d.blanks.map((P,j)=>l.jsxs(Ht,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h4",{className:"text-md font-medium",children:["Blank ",P.id," Options"]}),l.jsx(ot,{variant:"danger",size:"small",onClick:()=>v(P.id),className:"px-2 py-1 text-sm",children:"Remove Blank"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Answer Options:"}),P.options.map((F,R)=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+R)}),l.jsx("input",{type:"text",placeholder:`Option ${String.fromCharCode(65+R)}`,value:F||"",onChange:L=>w(P.id,R,L.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"}),P.options.length>2&&l.jsx(ot,{variant:"danger",size:"small",onClick:()=>S(P.id,R),className:"px-2 py-1 text-sm",children:""})]},R)),P.options.length<6&&l.jsx(ot,{variant:"secondary",size:"small",onClick:()=>C(P.id),className:"w-full",children:"+ Add Option"})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),l.jsxs("select",{value:P.correct_answer||"",onChange:F=>N(P.id,F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"",children:"Select correct answer"}),P.options.filter(F=>F.trim().length>0).map((F,R)=>l.jsxs("option",{value:String.fromCharCode(65+R),children:[String.fromCharCode(65+R),") ",F]},R))]})]})]},P.id))}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx(ot,{onClick:n,variant:"secondary",disabled:a,children:"Cancel"}),l.jsx(ot,{onClick:A,variant:"primary",disabled:a||d.blanks.length===0,children:a?l.jsx(un,{size:"sm"}):"Save Test"})]})]})},zce=[{value:"A1",label:"A1 (Beginner)",description:"Basic vocabulary, simple sentences"},{value:"A2",label:"A2 (Elementary)",description:"Everyday vocabulary, present/past tenses"},{value:"B1",label:"B1 (Intermediate)",description:"Varied vocabulary, complex sentences"},{value:"B2",label:"B2 (Upper-Intermediate)",description:"Advanced vocabulary, sophisticated structures"},{value:"C1",label:"C1 (Advanced)",description:"Nuanced vocabulary, complex discourse"},{value:"C2",label:"C2 (Proficiency)",description:"Native-like fluency and accuracy"}],Wce=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{showNotification:i}=ci(),[o,c]=_.useState({min_words:50,questions:[{question_id:1,prompt:"",expected_duration:null,difficulty_level:"B1"}]}),[u,d]=_.useState(!1),f=_.useCallback((C,S)=>{c(w=>({...w,[C]:S}))},[]),h=_.useCallback((C,S,w)=>{c(T=>({...T,questions:T.questions.map((N,A)=>A===C?{...N,[S]:w}:N)}))},[]),g=_.useCallback(()=>{c(C=>({...C,questions:[...C.questions,{question_id:C.questions.length+1,prompt:"",expected_duration:null,difficulty_level:"B1"}]}))},[]),p=_.useCallback(C=>{o.questions.length>1&&c(S=>({...S,questions:S.questions.filter((w,T)=>T!==C)}))},[o.questions.length]),y=_.useCallback(()=>{const C={};return o.min_words<10&&(C.min_words="Minimum word count must be at least 10 words"),o.questions.forEach((S,w)=>{S.prompt.trim()||(C[`question_${w}_prompt`]="Question prompt is required")}),C},[o]),v=_.useCallback(async C=>{C.preventDefault();const S=y();if(Object.keys(S).length>0){i("Please fix the validation errors","error");return}d(!0);try{const w={test_name:e,time_limit:300,min_duration:30,max_duration:600,max_attempts:3,min_words:o.min_words,passing_score:50,allowed_time:null,questions:o.questions.map((T,N)=>({question_id:N+1,prompt:T.prompt,expected_duration:T.expected_duration,difficulty_level:T.difficulty_level}))};console.log(" [DEBUG] Calling onTestSaved with data:",w),t?(console.log(" [DEBUG] onTestSaved function exists, calling it..."),t(w),console.log(" [DEBUG] onTestSaved called successfully")):console.log(" [DEBUG] onTestSaved function is null/undefined")}catch(w){console.error("Error preparing speaking test:",w),i("Failed to prepare speaking test","error")}finally{d(!1)}},[o,y,i,t,e]);return u||s?l.jsxs("div",{className:"flex items-center justify-center p-8",children:[l.jsx(un,{}),l.jsx("span",{className:"ml-2",children:"Creating speaking test..."})]}):l.jsxs("div",{className:"speaking-test-creator max-w-4xl mx-auto",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Speaking Test"}),l.jsx("p",{className:"text-gray-600",children:"Create a speaking test where students record audio responses with AI-powered feedback"})]}),l.jsxs("form",{onSubmit:v,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Scoring Settings"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Word Count *"}),l.jsx("input",{type:"number",min:"10",max:"1000",value:o.min_words,onChange:C=>f("min_words",parseInt(C.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.min_words&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.min_words})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Questions"}),l.jsx(ot,{type:"button",variant:"outline",onClick:g,children:"Add Question"})]}),o.questions.length>1&&l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Multiple Questions Detected"}),l.jsx("div",{className:"mt-1 text-sm text-blue-700",children:l.jsxs("p",{children:["You have ",o.questions.length," questions in this test.",l.jsx("strong",{children:" Only one question will be randomly selected"})," and shown to each student. This ensures fair distribution across your question pool."]})})]})]})}),o.questions.map((C,S)=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"font-medium",children:["Question ",S+1]}),o.questions.length>1&&l.jsx(ot,{type:"button",variant:"outline",size:"sm",onClick:()=>p(S),className:"text-red-600 hover:text-red-700",children:"Remove"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Prompt *"}),l.jsx("textarea",{value:C.prompt,onChange:w=>h(S,"prompt",w.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter the question prompt for students"}),a[`question_${S}_prompt`]&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:a[`question_${S}_prompt`]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Duration (seconds)"}),l.jsx("input",{type:"number",min:"10",max:"600",value:C.expected_duration||"",onChange:w=>h(S,"expected_duration",w.target.value?parseInt(w.target.value):null),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEFR Level"}),l.jsx("select",{value:C.difficulty_level,onChange:w=>h(S,"difficulty_level",w.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:zce.map(w=>l.jsxs("option",{value:w.value,children:[w.label," - ",w.description]},w.value))}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select the appropriate CEFR level for this question. This will be used by AI to evaluate students appropriately."})]})]})]})]},S))]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[l.jsx(ot,{type:"button",variant:"secondary",onClick:r,children:"Cancel"}),l.jsx(ot,{type:"submit",variant:"primary",disabled:u||s,children:u||s?"Creating...":"Create Speaking Test"})]})]})]})},hW=(e,t)=>{const[r,n]=_.useState(()=>{try{const i=window.localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error(`Error reading localStorage key "${e}":`,i),t}}),s=_.useCallback(i=>{try{const o=i instanceof Function?i(r):i;n(o),window.localStorage.setItem(e,JSON.stringify(o))}catch(o){console.error(`Error setting localStorage key "${e}":`,o)}},[e,r]),a=_.useCallback(()=>{try{window.localStorage.removeItem(e),n(t)}catch(i){console.error(`Error removing localStorage key "${e}":`,i)}},[e,t]);return[r,s,a]},nS=()=>{const e=_.useCallback((c,u=null)=>{try{const d=window.localStorage.getItem(c);return d?JSON.parse(d):u}catch(d){return console.error(`Error reading localStorage key "${c}":`,d),u}},[]),t=_.useCallback((c,u)=>{try{window.localStorage.setItem(c,JSON.stringify(u))}catch(d){console.error(`Error setting localStorage key "${c}":`,d)}},[]),r=_.useCallback(c=>{try{window.localStorage.removeItem(c)}catch(u){console.error(`Error removing localStorage key "${c}":`,u)}},[]),n=_.useCallback(()=>{if(confirm("Are you sure you want to clear all local storage? This cannot be undone."))try{window.localStorage.clear(),window.showNotification?window.showNotification("All local storage cleared!","success"):console.log("All local storage cleared!")}catch(c){console.error("Error clearing localStorage:",c)}},[]),s=_.useCallback(()=>{try{const c={};for(let h=0;h<window.localStorage.length;h++){const g=window.localStorage.key(h);g&&(c[g]=window.localStorage.getItem(g))}const u=new Blob([JSON.stringify(c,null,2)],{type:"application/json"}),d=URL.createObjectURL(u),f=document.createElement("a");f.href=d,f.download="localStorage_backup.json",f.click(),URL.revokeObjectURL(d),window.showNotification?window.showNotification("Local storage exported!","success"):console.log("Local storage exported!")}catch(c){console.error("Error exporting localStorage data:",c)}},[]),a=_.useCallback(()=>{try{window.localStorage.clear()}catch(c){console.error("Error clearing localStorage:",c)}},[]),i=_.useCallback(()=>{try{const c={};for(let u=0;u<window.localStorage.length;u++){const d=window.localStorage.key(u);d&&(c[d]=window.localStorage.getItem(d))}return c}catch(c){return console.error("Error exporting localStorage data:",c),{}}},[]),o=_.useCallback(c=>{try{Object.entries(c).forEach(([u,d])=>{window.localStorage.setItem(u,d)})}catch(u){console.error("Error importing localStorage data:",u)}},[]);return{getItem:e,setItem:t,removeItem:r,clearAll:a,clearAllLocalStorage:n,exportLocalStorage:s,exportData:i,importData:o}},he={yellow:"#f8ef02",cyan:"#00ffd2",red:"#ff003c",blue:"#136377",green:"#446d44",purple:"purple",black:"#000",white:"#fff",dark:"#333"},Hce=(e,t=1)=>{if(e.startsWith("#")){const r=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),s=parseInt(e.slice(5,7),16);return`rgba(${r}, ${n}, ${s}, ${t})`}return e},mW=(e,t=1)=>e==="purple"?`rgba(128, 0, 128, ${t})`:Hce(e,t),Bt=(e=null)=>{const t=[{bg:he.red,border:he.red},{bg:he.yellow,border:he.yellow},{bg:he.purple,border:he.purple},{bg:he.cyan,border:he.cyan},{bg:he.red,border:he.red},{bg:he.yellow,border:he.yellow},{bg:he.purple,border:he.purple}],r=e!==null?t[e%t.length]:t[Math.floor(Math.random()*t.length)];return{className:"border-2",style:{backgroundColor:he.black,borderColor:r.border,borderWidth:"2px"}}},Gce=e=>{const t={light:{background:"bg-white",backgroundSecondary:"bg-gray-50",text:"text-gray-900",textSecondary:"text-gray-600",border:"border-gray-300",headerBg:"bg-blue-600",headerText:"text-white",headerBorder:"border-blue-700",buttonPrimary:"bg-blue-500 text-white hover:bg-blue-600",buttonSecondary:"bg-gray-200 text-gray-700 hover:bg-gray-300",buttonOutline:"border-gray-300 text-gray-700 hover:bg-gray-50",cardBg:"bg-white",cardBorder:"border-gray-200",inputBg:"bg-white",inputBorder:"border-gray-300",inputText:"text-gray-900",progressBg:"bg-gray-200",progressFill:"bg-blue-500"},cyberpunk:{background:"bg-black",backgroundSecondary:"bg-gray-900",text:"",textSecondary:"",border:"",headerBg:"bg-black",headerText:"",headerBorder:"",buttonPrimary:"",buttonSecondary:"bg-gray-800",buttonOutline:"",cardBg:"",cardBorder:"",inputBg:"bg-black",inputBorder:"",inputText:"",progressBg:"bg-gray-800",progressFill:"",buttonRed:"",buttonYellow:"",buttonPurple:""}};return t[e]||t.cyberpunk},Oa=e=>e==="cyberpunk"?{background:{backgroundColor:he.black},glow:{boxShadow:`0 0 8px ${he.cyan}, 0 0 12px ${he.cyan}`},glowRed:{boxShadow:`0 0 8px ${he.red}, 0 0 12px ${he.red}`},glowYellow:{boxShadow:`0 0 6px ${he.yellow}, 0 0 10px ${he.yellow}`},glowPurple:{boxShadow:`0 0 8px ${he.purple}, 0 0 12px ${he.purple}`},glowGreen:{boxShadow:`0 0 8px ${he.green}, 0 0 12px ${he.green}`},textShadow:{textShadow:`0 0 10px ${he.cyan}, 0 0 20px ${he.cyan}, 0 0 30px ${he.cyan}`},textShadowYellow:{textShadow:`0 0 8px ${he.yellow}, 0 0 16px ${he.yellow}`},textShadowRed:{textShadow:`0 0 8px ${he.red}, 0 0 16px ${he.red}`},textShadowPurple:{textShadow:`0 0 8px ${he.purple}, 0 0 16px ${he.purple}`},textShadowGreen:{textShadow:`0 0 8px ${he.green}, 0 0 16px ${he.green}`},textCyan:{color:he.cyan,textShadow:`0 0 10px ${he.cyan}, 0 0 20px ${he.cyan}, 0 0 30px ${he.cyan}`},textYellow:{color:he.yellow,textShadow:`0 0 8px ${he.yellow}, 0 0 16px ${he.yellow}`},textRed:{color:he.red,textShadow:`0 0 8px ${he.red}, 0 0 16px ${he.red}`},textPurple:{color:he.purple,textShadow:`0 0 8px ${he.purple}, 0 0 16px ${he.purple}`},textGreen:{color:he.green,textShadow:`0 0 8px ${he.green}, 0 0 16px ${he.green}`}}:{},kM=e=>{typeof document>"u"||(e==="cyberpunk"?document.documentElement.setAttribute("data-theme","cyberpunk"):document.documentElement.setAttribute("data-theme","light"))},gW=_.createContext({theme:"cyberpunk",setTheme:e=>{},isCyberpunk:!0,isLight:!1,themeClasses:{}}),Vce=({children:e})=>{const[t,r]=_.useState(()=>typeof window<"u"&&localStorage.getItem("student_theme_preference")==="light"?"light":"cyberpunk");_.useEffect(()=>{kM(t)},[t]);const s={theme:t,setTheme:a=>{a!=="light"&&a!=="cyberpunk"&&(console.warn(`Invalid theme: ${a}. Defaulting to cyberpunk.`),a="cyberpunk"),r(a),typeof window<"u"&&localStorage.setItem("student_theme_preference",a),kM(a)},isCyberpunk:t==="cyberpunk",isLight:t==="light",themeClasses:Gce(t)};return l.jsx(gW.Provider,{value:s,children:e})},Da=()=>{const e=_.useContext(gW);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e};class ul{constructor(t,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=r,this.end=n}static range(t,r){return r?!t||!t.loc||!r.loc||t.loc.lexer!==r.loc.lexer?null:new ul(t.loc.lexer,t.loc.start,r.loc.end):t&&t.loc}}class $l{constructor(t,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=r}range(t,r){return new $l(r,ul.range(this,t))}}class nr{constructor(t,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+t,s,a,i=r&&r.loc;if(i&&i.start<=i.end){var o=i.lexer.input;s=i.start,a=i.end,s===o.length?n+=" at end of input: ":n+=" at position "+(s+1)+": ";var c=o.slice(s,a).replace(/[^]/g,"$&"),u;s>15?u=""+o.slice(s-15,s):u=o.slice(0,s);var d;a+15<o.length?d=o.slice(a,a+15)+"":d=o.slice(a),n+=u+c+d}var f=new Error(n);return f.name="ParseError",f.__proto__=nr.prototype,f.position=s,s!=null&&a!=null&&(f.length=a-s),f.rawMessage=t,f}}nr.prototype.__proto__=Error.prototype;var qce=function(t,r){return t===void 0?r:t},Kce=/([A-Z])/g,Yce=function(t){return t.replace(Kce,"-$1").toLowerCase()},Xce={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Jce=/[&><"']/g;function Qce(e){return String(e).replace(Jce,t=>Xce[t])}var pW=function e(t){return t.type==="ordgroup"||t.type==="color"?t.body.length===1?e(t.body[0]):t:t.type==="font"?e(t.body):t},Zce=function(t){var r=pW(t);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},eue=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t},tue=function(t){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},qn={deflt:qce,escape:Qce,hyphenate:Yce,getBaseElem:pW,isCharacterBox:Zce,protocolFromUrl:tue},Zw={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>e==="Infinity"?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};function rue(e){if(e.default)return e.default;var t=e.type,r=Array.isArray(t)?t[0]:t;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class R7{constructor(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{};for(var r in Zw)if(Zw.hasOwnProperty(r)){var n=Zw[r];this[r]=t[r]!==void 0?n.processor?n.processor(t[r]):t[r]:rue(n)}}reportNonstrict(t,r,n){var s=this.strict;if(typeof s=="function"&&(s=s(t,r,n)),!(!s||s==="ignore")){if(s===!0||s==="error")throw new nr("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+t+"]"),n);s==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+r+" ["+t+"]"))}}useStrictBehavior(t,r,n){var s=this.strict;if(typeof s=="function")try{s=s(t,r,n)}catch{s="error"}return!s||s==="ignore"?!1:s===!0||s==="error"?!0:s==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+r+" ["+t+"]")),!1)}isTrusted(t){if(t.url&&!t.protocol){var r=qn.protocolFromUrl(t.url);if(r==null)return!1;t.protocol=r}var n=typeof this.trust=="function"?this.trust(t):this.trust;return!!n}}class bf{constructor(t,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=r,this.cramped=n}sup(){return Wu[nue[this.id]]}sub(){return Wu[sue[this.id]]}fracNum(){return Wu[aue[this.id]]}fracDen(){return Wu[iue[this.id]]}cramp(){return Wu[oue[this.id]]}text(){return Wu[lue[this.id]]}isTight(){return this.size>=2}}var I7=0,M4=1,Dp=2,r0=3,jv=4,vc=5,Yp=6,Wo=7,Wu=[new bf(I7,0,!1),new bf(M4,0,!0),new bf(Dp,1,!1),new bf(r0,1,!0),new bf(jv,2,!1),new bf(vc,2,!0),new bf(Yp,3,!1),new bf(Wo,3,!0)],nue=[jv,vc,jv,vc,Yp,Wo,Yp,Wo],sue=[vc,vc,vc,vc,Wo,Wo,Wo,Wo],aue=[Dp,r0,jv,vc,Yp,Wo,Yp,Wo],iue=[r0,r0,vc,vc,Wo,Wo,Wo,Wo],oue=[M4,M4,r0,r0,vc,vc,Wo,Wo],lue=[I7,M4,Dp,r0,Dp,r0,Dp,r0],Xr={DISPLAY:Wu[I7],TEXT:Wu[Dp],SCRIPT:Wu[jv],SCRIPTSCRIPT:Wu[Yp]},R8=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function cue(e){for(var t=0;t<R8.length;t++)for(var r=R8[t],n=0;n<r.blocks.length;n++){var s=r.blocks[n];if(e>=s[0]&&e<=s[1])return r.name}return null}var e4=[];R8.forEach(e=>e.blocks.forEach(t=>e4.push(...t)));function xW(e){for(var t=0;t<e4.length;t+=2)if(e>=e4[t]&&e<=e4[t+1])return!0;return!1}var ap=80,uue=function(t,r){return"M95,"+(622+t+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+t/2.075+" -"+t+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+t)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},due=function(t,r){return"M263,"+(601+t+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+t/2.084+" -"+t+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+t)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},fue=function(t,r){return"M983 "+(10+t+r)+`
l`+t/3.13+" -"+t+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+t)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},hue=function(t,r){return"M424,"+(2398+t+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+t/4.223+" -"+t+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+t)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+t)+" "+r+`
h400000v`+(40+t)+"h-400000z"},mue=function(t,r){return"M473,"+(2713+t+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+t/5.298+" -"+t+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+t)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+t)+" "+r+"h400000v"+(40+t)+"H1017.7z"},gue=function(t){var r=t/2;return"M400000 "+t+" H0 L"+r+" 0 l65 45 L145 "+(t-80)+" H400000z"},pue=function(t,r,n){var s=n-54-r-t;return"M702 "+(t+r)+"H400000"+(40+t)+`
H742v`+s+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+t)+"H742z"},xue=function(t,r,n){r=1e3*r;var s="";switch(t){case"sqrtMain":s=uue(r,ap);break;case"sqrtSize1":s=due(r,ap);break;case"sqrtSize2":s=fue(r,ap);break;case"sqrtSize3":s=hue(r,ap);break;case"sqrtSize4":s=mue(r,ap);break;case"sqrtTall":s=pue(r,ap,n)}return s},yue=function(t,r){switch(t){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},CM={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},vue=function(t,r){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class w2{constructor(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(t){return this.classes.includes(t)}toNode(){for(var t=document.createDocumentFragment(),r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t}toMarkup(){for(var t="",r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t}toText(){var t=r=>r.toText();return this.children.map(t).join("")}}var Vu={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},ow={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},TM={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function bue(e,t){Vu[e]=t}function L7(e,t,r){if(!Vu[t])throw new Error("Font metrics not found for font: "+t+".");var n=e.charCodeAt(0),s=Vu[t][n];if(!s&&e[0]in TM&&(n=TM[e[0]].charCodeAt(0),s=Vu[t][n]),!s&&r==="text"&&xW(n)&&(s=Vu[t][77]),s)return{depth:s[0],height:s[1],italic:s[2],skew:s[3],width:s[4]}}var C5={};function wue(e){var t;if(e>=5?t=0:e>=3?t=1:t=2,!C5[t]){var r=C5[t]={cssEmPerMu:ow.quad[t]/18};for(var n in ow)ow.hasOwnProperty(n)&&(r[n]=ow[n][t])}return C5[t]}var _ue=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],EM=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],NM=function(t,r){return r.size<2?t:_ue[t-1][r.size-1]};class Gd{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||Gd.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=EM[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return new Gd(r)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:NM(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:EM[t-1]})}havingBaseStyle(t){t=t||this.style.text();var r=NM(Gd.BASESIZE,t);return this.size===r&&this.textSize===Gd.BASESIZE&&this.style===t?this:this.extend({style:t,size:r})}havingBaseSizing(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Gd.BASESIZE?["sizing","reset-size"+this.size,"size"+Gd.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=wue(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Gd.BASESIZE=6;var I8={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Sue={ex:!0,em:!0,mu:!0},yW=function(t){return typeof t!="string"&&(t=t.unit),t in I8||t in Sue||t==="ex"},Qs=function(t,r){var n;if(t.unit in I8)n=I8[t.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(t.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var s;if(r.style.isTight()?s=r.havingStyle(r.style.text()):s=r,t.unit==="ex")n=s.fontMetrics().xHeight;else if(t.unit==="em")n=s.fontMetrics().quad;else throw new nr("Invalid unit: '"+t.unit+"'");s!==r&&(n*=s.sizeMultiplier/r.sizeMultiplier)}return Math.min(t.number*n,r.maxSize)},gr=function(t){return+t.toFixed(4)+"em"},Vf=function(t){return t.filter(r=>r).join(" ")},vW=function(t,r,n){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var s=r.getColor();s&&(this.style.color=s)}},bW=function(t){var r=document.createElement(t);r.className=Vf(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&r.setAttribute(s,this.attributes[s]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r},kue=/[\s"'>/=\x00-\x1f]/,wW=function(t){var r="<"+t;this.classes.length&&(r+=' class="'+qn.escape(Vf(this.classes))+'"');var n="";for(var s in this.style)this.style.hasOwnProperty(s)&&(n+=qn.hyphenate(s)+":"+this.style[s]+";");n&&(r+=' style="'+qn.escape(n)+'"');for(var a in this.attributes)if(this.attributes.hasOwnProperty(a)){if(kue.test(a))throw new nr("Invalid attribute name '"+a+"'");r+=" "+a+'="'+qn.escape(this.attributes[a])+'"'}r+=">";for(var i=0;i<this.children.length;i++)r+=this.children[i].toMarkup();return r+="</"+t+">",r};class _2{constructor(t,r,n,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,vW.call(this,t,n,s),this.children=r||[]}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return this.classes.includes(t)}toNode(){return bW.call(this,"span")}toMarkup(){return wW.call(this,"span")}}class B7{constructor(t,r,n,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,vW.call(this,r,s),this.children=n||[],this.setAttribute("href",t)}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return this.classes.includes(t)}toNode(){return bW.call(this,"a")}toMarkup(){return wW.call(this,"a")}}class Cue{constructor(t,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=t,this.classes=["mord"],this.style=n}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);return t}toMarkup(){var t='<img src="'+qn.escape(this.src)+'"'+(' alt="'+qn.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=qn.hyphenate(n)+":"+this.style[n]+";");return r&&(t+=' style="'+qn.escape(r)+'"'),t+="'/>",t}}var Tue={:"",:"",:"",:""};class Tc{constructor(t,r,n,s,a,i,o,c){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=r||0,this.depth=n||0,this.italic=s||0,this.skew=a||0,this.width=i||0,this.classes=o||[],this.style=c||{},this.maxFontSize=0;var u=cue(this.text.charCodeAt(0));u&&this.classes.push(u+"_fallback"),/[]/.test(this.text)&&(this.text=Tue[this.text])}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=gr(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=Vf(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(t),r):t}toMarkup(){var t=!1,r="<span";this.classes.length&&(t=!0,r+=' class="',r+=qn.escape(Vf(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var s in this.style)this.style.hasOwnProperty(s)&&(n+=qn.hyphenate(s)+":"+this.style[s]+";");n&&(t=!0,r+=' style="'+qn.escape(n)+'"');var a=qn.escape(this.text);return t?(r+=">",r+=a,r+="</span>",r):a}}class h0{constructor(t,r){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=r||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var s=0;s<this.children.length;s++)r.appendChild(this.children[s].toNode());return r}toMarkup(){var t='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+qn.escape(this.attributes[r])+'"');t+=">";for(var n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t+="</svg>",t}}class qf{constructor(t,r){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=r}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",CM[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+qn.escape(this.alternate)+'"/>':'<path d="'+qn.escape(CM[this.pathName])+'"/>'}}class L8{constructor(t){this.attributes=void 0,this.attributes=t||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var t="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+qn.escape(this.attributes[r])+'"');return t+="/>",t}}function AM(e){if(e instanceof Tc)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}function Eue(e){if(e instanceof _2)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}var Nue={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Aue={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Ns={math:{},text:{}};function ee(e,t,r,n,s,a){Ns[e][s]={font:t,group:r,replace:n},a&&n&&(Ns[e][n]=Ns[e][s])}var ie="math",Yt="text",ye="main",Le="ams",Vs="accent-token",jr="bin",Xo="close",k1="inner",Yr="mathord",qa="op-token",Vl="open",sS="punct",Ue="rel",C0="spacing",Je="textord";ee(ie,ye,Ue,"","\\equiv",!0);ee(ie,ye,Ue,"","\\prec",!0);ee(ie,ye,Ue,"","\\succ",!0);ee(ie,ye,Ue,"","\\sim",!0);ee(ie,ye,Ue,"","\\perp");ee(ie,ye,Ue,"","\\preceq",!0);ee(ie,ye,Ue,"","\\succeq",!0);ee(ie,ye,Ue,"","\\simeq",!0);ee(ie,ye,Ue,"","\\mid",!0);ee(ie,ye,Ue,"","\\ll",!0);ee(ie,ye,Ue,"","\\gg",!0);ee(ie,ye,Ue,"","\\asymp",!0);ee(ie,ye,Ue,"","\\parallel");ee(ie,ye,Ue,"","\\bowtie",!0);ee(ie,ye,Ue,"","\\smile",!0);ee(ie,ye,Ue,"","\\sqsubseteq",!0);ee(ie,ye,Ue,"","\\sqsupseteq",!0);ee(ie,ye,Ue,"","\\doteq",!0);ee(ie,ye,Ue,"","\\frown",!0);ee(ie,ye,Ue,"","\\ni",!0);ee(ie,ye,Ue,"","\\propto",!0);ee(ie,ye,Ue,"","\\vdash",!0);ee(ie,ye,Ue,"","\\dashv",!0);ee(ie,ye,Ue,"","\\owns");ee(ie,ye,sS,".","\\ldotp");ee(ie,ye,sS,"","\\cdotp");ee(ie,ye,Je,"#","\\#");ee(Yt,ye,Je,"#","\\#");ee(ie,ye,Je,"&","\\&");ee(Yt,ye,Je,"&","\\&");ee(ie,ye,Je,"","\\aleph",!0);ee(ie,ye,Je,"","\\forall",!0);ee(ie,ye,Je,"","\\hbar",!0);ee(ie,ye,Je,"","\\exists",!0);ee(ie,ye,Je,"","\\nabla",!0);ee(ie,ye,Je,"","\\flat",!0);ee(ie,ye,Je,"","\\ell",!0);ee(ie,ye,Je,"","\\natural",!0);ee(ie,ye,Je,"","\\clubsuit",!0);ee(ie,ye,Je,"","\\wp",!0);ee(ie,ye,Je,"","\\sharp",!0);ee(ie,ye,Je,"","\\diamondsuit",!0);ee(ie,ye,Je,"","\\Re",!0);ee(ie,ye,Je,"","\\heartsuit",!0);ee(ie,ye,Je,"","\\Im",!0);ee(ie,ye,Je,"","\\spadesuit",!0);ee(ie,ye,Je,"","\\S",!0);ee(Yt,ye,Je,"","\\S");ee(ie,ye,Je,"","\\P",!0);ee(Yt,ye,Je,"","\\P");ee(ie,ye,Je,"","\\dag");ee(Yt,ye,Je,"","\\dag");ee(Yt,ye,Je,"","\\textdagger");ee(ie,ye,Je,"","\\ddag");ee(Yt,ye,Je,"","\\ddag");ee(Yt,ye,Je,"","\\textdaggerdbl");ee(ie,ye,Xo,"","\\rmoustache",!0);ee(ie,ye,Vl,"","\\lmoustache",!0);ee(ie,ye,Xo,"","\\rgroup",!0);ee(ie,ye,Vl,"","\\lgroup",!0);ee(ie,ye,jr,"","\\mp",!0);ee(ie,ye,jr,"","\\ominus",!0);ee(ie,ye,jr,"","\\uplus",!0);ee(ie,ye,jr,"","\\sqcap",!0);ee(ie,ye,jr,"","\\ast");ee(ie,ye,jr,"","\\sqcup",!0);ee(ie,ye,jr,"","\\bigcirc",!0);ee(ie,ye,jr,"","\\bullet",!0);ee(ie,ye,jr,"","\\ddagger");ee(ie,ye,jr,"","\\wr",!0);ee(ie,ye,jr,"","\\amalg");ee(ie,ye,jr,"&","\\And");ee(ie,ye,Ue,"","\\longleftarrow",!0);ee(ie,ye,Ue,"","\\Leftarrow",!0);ee(ie,ye,Ue,"","\\Longleftarrow",!0);ee(ie,ye,Ue,"","\\longrightarrow",!0);ee(ie,ye,Ue,"","\\Rightarrow",!0);ee(ie,ye,Ue,"","\\Longrightarrow",!0);ee(ie,ye,Ue,"","\\leftrightarrow",!0);ee(ie,ye,Ue,"","\\longleftrightarrow",!0);ee(ie,ye,Ue,"","\\Leftrightarrow",!0);ee(ie,ye,Ue,"","\\Longleftrightarrow",!0);ee(ie,ye,Ue,"","\\mapsto",!0);ee(ie,ye,Ue,"","\\longmapsto",!0);ee(ie,ye,Ue,"","\\nearrow",!0);ee(ie,ye,Ue,"","\\hookleftarrow",!0);ee(ie,ye,Ue,"","\\hookrightarrow",!0);ee(ie,ye,Ue,"","\\searrow",!0);ee(ie,ye,Ue,"","\\leftharpoonup",!0);ee(ie,ye,Ue,"","\\rightharpoonup",!0);ee(ie,ye,Ue,"","\\swarrow",!0);ee(ie,ye,Ue,"","\\leftharpoondown",!0);ee(ie,ye,Ue,"","\\rightharpoondown",!0);ee(ie,ye,Ue,"","\\nwarrow",!0);ee(ie,ye,Ue,"","\\rightleftharpoons",!0);ee(ie,Le,Ue,"","\\nless",!0);ee(ie,Le,Ue,"","\\@nleqslant");ee(ie,Le,Ue,"","\\@nleqq");ee(ie,Le,Ue,"","\\lneq",!0);ee(ie,Le,Ue,"","\\lneqq",!0);ee(ie,Le,Ue,"","\\@lvertneqq");ee(ie,Le,Ue,"","\\lnsim",!0);ee(ie,Le,Ue,"","\\lnapprox",!0);ee(ie,Le,Ue,"","\\nprec",!0);ee(ie,Le,Ue,"","\\npreceq",!0);ee(ie,Le,Ue,"","\\precnsim",!0);ee(ie,Le,Ue,"","\\precnapprox",!0);ee(ie,Le,Ue,"","\\nsim",!0);ee(ie,Le,Ue,"","\\@nshortmid");ee(ie,Le,Ue,"","\\nmid",!0);ee(ie,Le,Ue,"","\\nvdash",!0);ee(ie,Le,Ue,"","\\nvDash",!0);ee(ie,Le,Ue,"","\\ntriangleleft");ee(ie,Le,Ue,"","\\ntrianglelefteq",!0);ee(ie,Le,Ue,"","\\subsetneq",!0);ee(ie,Le,Ue,"","\\@varsubsetneq");ee(ie,Le,Ue,"","\\subsetneqq",!0);ee(ie,Le,Ue,"","\\@varsubsetneqq");ee(ie,Le,Ue,"","\\ngtr",!0);ee(ie,Le,Ue,"","\\@ngeqslant");ee(ie,Le,Ue,"","\\@ngeqq");ee(ie,Le,Ue,"","\\gneq",!0);ee(ie,Le,Ue,"","\\gneqq",!0);ee(ie,Le,Ue,"","\\@gvertneqq");ee(ie,Le,Ue,"","\\gnsim",!0);ee(ie,Le,Ue,"","\\gnapprox",!0);ee(ie,Le,Ue,"","\\nsucc",!0);ee(ie,Le,Ue,"","\\nsucceq",!0);ee(ie,Le,Ue,"","\\succnsim",!0);ee(ie,Le,Ue,"","\\succnapprox",!0);ee(ie,Le,Ue,"","\\ncong",!0);ee(ie,Le,Ue,"","\\@nshortparallel");ee(ie,Le,Ue,"","\\nparallel",!0);ee(ie,Le,Ue,"","\\nVDash",!0);ee(ie,Le,Ue,"","\\ntriangleright");ee(ie,Le,Ue,"","\\ntrianglerighteq",!0);ee(ie,Le,Ue,"","\\@nsupseteqq");ee(ie,Le,Ue,"","\\supsetneq",!0);ee(ie,Le,Ue,"","\\@varsupsetneq");ee(ie,Le,Ue,"","\\supsetneqq",!0);ee(ie,Le,Ue,"","\\@varsupsetneqq");ee(ie,Le,Ue,"","\\nVdash",!0);ee(ie,Le,Ue,"","\\precneqq",!0);ee(ie,Le,Ue,"","\\succneqq",!0);ee(ie,Le,Ue,"","\\@nsubseteqq");ee(ie,Le,jr,"","\\unlhd");ee(ie,Le,jr,"","\\unrhd");ee(ie,Le,Ue,"","\\nleftarrow",!0);ee(ie,Le,Ue,"","\\nrightarrow",!0);ee(ie,Le,Ue,"","\\nLeftarrow",!0);ee(ie,Le,Ue,"","\\nRightarrow",!0);ee(ie,Le,Ue,"","\\nleftrightarrow",!0);ee(ie,Le,Ue,"","\\nLeftrightarrow",!0);ee(ie,Le,Ue,"","\\vartriangle");ee(ie,Le,Je,"","\\hslash");ee(ie,Le,Je,"","\\triangledown");ee(ie,Le,Je,"","\\lozenge");ee(ie,Le,Je,"","\\circledS");ee(ie,Le,Je,"","\\circledR");ee(Yt,Le,Je,"","\\circledR");ee(ie,Le,Je,"","\\measuredangle",!0);ee(ie,Le,Je,"","\\nexists");ee(ie,Le,Je,"","\\mho");ee(ie,Le,Je,"","\\Finv",!0);ee(ie,Le,Je,"","\\Game",!0);ee(ie,Le,Je,"","\\backprime");ee(ie,Le,Je,"","\\blacktriangle");ee(ie,Le,Je,"","\\blacktriangledown");ee(ie,Le,Je,"","\\blacksquare");ee(ie,Le,Je,"","\\blacklozenge");ee(ie,Le,Je,"","\\bigstar");ee(ie,Le,Je,"","\\sphericalangle",!0);ee(ie,Le,Je,"","\\complement",!0);ee(ie,Le,Je,"","\\eth",!0);ee(Yt,ye,Je,"","");ee(ie,Le,Je,"","\\diagup");ee(ie,Le,Je,"","\\diagdown");ee(ie,Le,Je,"","\\square");ee(ie,Le,Je,"","\\Box");ee(ie,Le,Je,"","\\Diamond");ee(ie,Le,Je,"","\\yen",!0);ee(Yt,Le,Je,"","\\yen",!0);ee(ie,Le,Je,"","\\checkmark",!0);ee(Yt,Le,Je,"","\\checkmark");ee(ie,Le,Je,"","\\beth",!0);ee(ie,Le,Je,"","\\daleth",!0);ee(ie,Le,Je,"","\\gimel",!0);ee(ie,Le,Je,"","\\digamma",!0);ee(ie,Le,Je,"","\\varkappa");ee(ie,Le,Vl,"","\\@ulcorner",!0);ee(ie,Le,Xo,"","\\@urcorner",!0);ee(ie,Le,Vl,"","\\@llcorner",!0);ee(ie,Le,Xo,"","\\@lrcorner",!0);ee(ie,Le,Ue,"","\\leqq",!0);ee(ie,Le,Ue,"","\\leqslant",!0);ee(ie,Le,Ue,"","\\eqslantless",!0);ee(ie,Le,Ue,"","\\lesssim",!0);ee(ie,Le,Ue,"","\\lessapprox",!0);ee(ie,Le,Ue,"","\\approxeq",!0);ee(ie,Le,jr,"","\\lessdot");ee(ie,Le,Ue,"","\\lll",!0);ee(ie,Le,Ue,"","\\lessgtr",!0);ee(ie,Le,Ue,"","\\lesseqgtr",!0);ee(ie,Le,Ue,"","\\lesseqqgtr",!0);ee(ie,Le,Ue,"","\\doteqdot");ee(ie,Le,Ue,"","\\risingdotseq",!0);ee(ie,Le,Ue,"","\\fallingdotseq",!0);ee(ie,Le,Ue,"","\\backsim",!0);ee(ie,Le,Ue,"","\\backsimeq",!0);ee(ie,Le,Ue,"","\\subseteqq",!0);ee(ie,Le,Ue,"","\\Subset",!0);ee(ie,Le,Ue,"","\\sqsubset",!0);ee(ie,Le,Ue,"","\\preccurlyeq",!0);ee(ie,Le,Ue,"","\\curlyeqprec",!0);ee(ie,Le,Ue,"","\\precsim",!0);ee(ie,Le,Ue,"","\\precapprox",!0);ee(ie,Le,Ue,"","\\vartriangleleft");ee(ie,Le,Ue,"","\\trianglelefteq");ee(ie,Le,Ue,"","\\vDash",!0);ee(ie,Le,Ue,"","\\Vvdash",!0);ee(ie,Le,Ue,"","\\smallsmile");ee(ie,Le,Ue,"","\\smallfrown");ee(ie,Le,Ue,"","\\bumpeq",!0);ee(ie,Le,Ue,"","\\Bumpeq",!0);ee(ie,Le,Ue,"","\\geqq",!0);ee(ie,Le,Ue,"","\\geqslant",!0);ee(ie,Le,Ue,"","\\eqslantgtr",!0);ee(ie,Le,Ue,"","\\gtrsim",!0);ee(ie,Le,Ue,"","\\gtrapprox",!0);ee(ie,Le,jr,"","\\gtrdot");ee(ie,Le,Ue,"","\\ggg",!0);ee(ie,Le,Ue,"","\\gtrless",!0);ee(ie,Le,Ue,"","\\gtreqless",!0);ee(ie,Le,Ue,"","\\gtreqqless",!0);ee(ie,Le,Ue,"","\\eqcirc",!0);ee(ie,Le,Ue,"","\\circeq",!0);ee(ie,Le,Ue,"","\\triangleq",!0);ee(ie,Le,Ue,"","\\thicksim");ee(ie,Le,Ue,"","\\thickapprox");ee(ie,Le,Ue,"","\\supseteqq",!0);ee(ie,Le,Ue,"","\\Supset",!0);ee(ie,Le,Ue,"","\\sqsupset",!0);ee(ie,Le,Ue,"","\\succcurlyeq",!0);ee(ie,Le,Ue,"","\\curlyeqsucc",!0);ee(ie,Le,Ue,"","\\succsim",!0);ee(ie,Le,Ue,"","\\succapprox",!0);ee(ie,Le,Ue,"","\\vartriangleright");ee(ie,Le,Ue,"","\\trianglerighteq");ee(ie,Le,Ue,"","\\Vdash",!0);ee(ie,Le,Ue,"","\\shortmid");ee(ie,Le,Ue,"","\\shortparallel");ee(ie,Le,Ue,"","\\between",!0);ee(ie,Le,Ue,"","\\pitchfork",!0);ee(ie,Le,Ue,"","\\varpropto");ee(ie,Le,Ue,"","\\blacktriangleleft");ee(ie,Le,Ue,"","\\therefore",!0);ee(ie,Le,Ue,"","\\backepsilon");ee(ie,Le,Ue,"","\\blacktriangleright");ee(ie,Le,Ue,"","\\because",!0);ee(ie,Le,Ue,"","\\llless");ee(ie,Le,Ue,"","\\gggtr");ee(ie,Le,jr,"","\\lhd");ee(ie,Le,jr,"","\\rhd");ee(ie,Le,Ue,"","\\eqsim",!0);ee(ie,ye,Ue,"","\\Join");ee(ie,Le,Ue,"","\\Doteq",!0);ee(ie,Le,jr,"","\\dotplus",!0);ee(ie,Le,jr,"","\\smallsetminus");ee(ie,Le,jr,"","\\Cap",!0);ee(ie,Le,jr,"","\\Cup",!0);ee(ie,Le,jr,"","\\doublebarwedge",!0);ee(ie,Le,jr,"","\\boxminus",!0);ee(ie,Le,jr,"","\\boxplus",!0);ee(ie,Le,jr,"","\\divideontimes",!0);ee(ie,Le,jr,"","\\ltimes",!0);ee(ie,Le,jr,"","\\rtimes",!0);ee(ie,Le,jr,"","\\leftthreetimes",!0);ee(ie,Le,jr,"","\\rightthreetimes",!0);ee(ie,Le,jr,"","\\curlywedge",!0);ee(ie,Le,jr,"","\\curlyvee",!0);ee(ie,Le,jr,"","\\circleddash",!0);ee(ie,Le,jr,"","\\circledast",!0);ee(ie,Le,jr,"","\\centerdot");ee(ie,Le,jr,"","\\intercal",!0);ee(ie,Le,jr,"","\\doublecap");ee(ie,Le,jr,"","\\doublecup");ee(ie,Le,jr,"","\\boxtimes",!0);ee(ie,Le,Ue,"","\\dashrightarrow",!0);ee(ie,Le,Ue,"","\\dashleftarrow",!0);ee(ie,Le,Ue,"","\\leftleftarrows",!0);ee(ie,Le,Ue,"","\\leftrightarrows",!0);ee(ie,Le,Ue,"","\\Lleftarrow",!0);ee(ie,Le,Ue,"","\\twoheadleftarrow",!0);ee(ie,Le,Ue,"","\\leftarrowtail",!0);ee(ie,Le,Ue,"","\\looparrowleft",!0);ee(ie,Le,Ue,"","\\leftrightharpoons",!0);ee(ie,Le,Ue,"","\\curvearrowleft",!0);ee(ie,Le,Ue,"","\\circlearrowleft",!0);ee(ie,Le,Ue,"","\\Lsh",!0);ee(ie,Le,Ue,"","\\upuparrows",!0);ee(ie,Le,Ue,"","\\upharpoonleft",!0);ee(ie,Le,Ue,"","\\downharpoonleft",!0);ee(ie,ye,Ue,"","\\origof",!0);ee(ie,ye,Ue,"","\\imageof",!0);ee(ie,Le,Ue,"","\\multimap",!0);ee(ie,Le,Ue,"","\\leftrightsquigarrow",!0);ee(ie,Le,Ue,"","\\rightrightarrows",!0);ee(ie,Le,Ue,"","\\rightleftarrows",!0);ee(ie,Le,Ue,"","\\twoheadrightarrow",!0);ee(ie,Le,Ue,"","\\rightarrowtail",!0);ee(ie,Le,Ue,"","\\looparrowright",!0);ee(ie,Le,Ue,"","\\curvearrowright",!0);ee(ie,Le,Ue,"","\\circlearrowright",!0);ee(ie,Le,Ue,"","\\Rsh",!0);ee(ie,Le,Ue,"","\\downdownarrows",!0);ee(ie,Le,Ue,"","\\upharpoonright",!0);ee(ie,Le,Ue,"","\\downharpoonright",!0);ee(ie,Le,Ue,"","\\rightsquigarrow",!0);ee(ie,Le,Ue,"","\\leadsto");ee(ie,Le,Ue,"","\\Rrightarrow",!0);ee(ie,Le,Ue,"","\\restriction");ee(ie,ye,Je,"","`");ee(ie,ye,Je,"$","\\$");ee(Yt,ye,Je,"$","\\$");ee(Yt,ye,Je,"$","\\textdollar");ee(ie,ye,Je,"%","\\%");ee(Yt,ye,Je,"%","\\%");ee(ie,ye,Je,"_","\\_");ee(Yt,ye,Je,"_","\\_");ee(Yt,ye,Je,"_","\\textunderscore");ee(ie,ye,Je,"","\\angle",!0);ee(ie,ye,Je,"","\\infty",!0);ee(ie,ye,Je,"","\\prime");ee(ie,ye,Je,"","\\triangle");ee(ie,ye,Je,"","\\Gamma",!0);ee(ie,ye,Je,"","\\Delta",!0);ee(ie,ye,Je,"","\\Theta",!0);ee(ie,ye,Je,"","\\Lambda",!0);ee(ie,ye,Je,"","\\Xi",!0);ee(ie,ye,Je,"","\\Pi",!0);ee(ie,ye,Je,"","\\Sigma",!0);ee(ie,ye,Je,"","\\Upsilon",!0);ee(ie,ye,Je,"","\\Phi",!0);ee(ie,ye,Je,"","\\Psi",!0);ee(ie,ye,Je,"","\\Omega",!0);ee(ie,ye,Je,"A","");ee(ie,ye,Je,"B","");ee(ie,ye,Je,"E","");ee(ie,ye,Je,"Z","");ee(ie,ye,Je,"H","");ee(ie,ye,Je,"I","");ee(ie,ye,Je,"K","");ee(ie,ye,Je,"M","");ee(ie,ye,Je,"N","");ee(ie,ye,Je,"O","");ee(ie,ye,Je,"P","");ee(ie,ye,Je,"T","");ee(ie,ye,Je,"X","");ee(ie,ye,Je,"","\\neg",!0);ee(ie,ye,Je,"","\\lnot");ee(ie,ye,Je,"","\\top");ee(ie,ye,Je,"","\\bot");ee(ie,ye,Je,"","\\emptyset");ee(ie,Le,Je,"","\\varnothing");ee(ie,ye,Yr,"","\\alpha",!0);ee(ie,ye,Yr,"","\\beta",!0);ee(ie,ye,Yr,"","\\gamma",!0);ee(ie,ye,Yr,"","\\delta",!0);ee(ie,ye,Yr,"","\\epsilon",!0);ee(ie,ye,Yr,"","\\zeta",!0);ee(ie,ye,Yr,"","\\eta",!0);ee(ie,ye,Yr,"","\\theta",!0);ee(ie,ye,Yr,"","\\iota",!0);ee(ie,ye,Yr,"","\\kappa",!0);ee(ie,ye,Yr,"","\\lambda",!0);ee(ie,ye,Yr,"","\\mu",!0);ee(ie,ye,Yr,"","\\nu",!0);ee(ie,ye,Yr,"","\\xi",!0);ee(ie,ye,Yr,"","\\omicron",!0);ee(ie,ye,Yr,"","\\pi",!0);ee(ie,ye,Yr,"","\\rho",!0);ee(ie,ye,Yr,"","\\sigma",!0);ee(ie,ye,Yr,"","\\tau",!0);ee(ie,ye,Yr,"","\\upsilon",!0);ee(ie,ye,Yr,"","\\phi",!0);ee(ie,ye,Yr,"","\\chi",!0);ee(ie,ye,Yr,"","\\psi",!0);ee(ie,ye,Yr,"","\\omega",!0);ee(ie,ye,Yr,"","\\varepsilon",!0);ee(ie,ye,Yr,"","\\vartheta",!0);ee(ie,ye,Yr,"","\\varpi",!0);ee(ie,ye,Yr,"","\\varrho",!0);ee(ie,ye,Yr,"","\\varsigma",!0);ee(ie,ye,Yr,"","\\varphi",!0);ee(ie,ye,jr,"","*",!0);ee(ie,ye,jr,"+","+");ee(ie,ye,jr,"","-",!0);ee(ie,ye,jr,"","\\cdot",!0);ee(ie,ye,jr,"","\\circ",!0);ee(ie,ye,jr,"","\\div",!0);ee(ie,ye,jr,"","\\pm",!0);ee(ie,ye,jr,"","\\times",!0);ee(ie,ye,jr,"","\\cap",!0);ee(ie,ye,jr,"","\\cup",!0);ee(ie,ye,jr,"","\\setminus",!0);ee(ie,ye,jr,"","\\land");ee(ie,ye,jr,"","\\lor");ee(ie,ye,jr,"","\\wedge",!0);ee(ie,ye,jr,"","\\vee",!0);ee(ie,ye,Je,"","\\surd");ee(ie,ye,Vl,"","\\langle",!0);ee(ie,ye,Vl,"","\\lvert");ee(ie,ye,Vl,"","\\lVert");ee(ie,ye,Xo,"?","?");ee(ie,ye,Xo,"!","!");ee(ie,ye,Xo,"","\\rangle",!0);ee(ie,ye,Xo,"","\\rvert");ee(ie,ye,Xo,"","\\rVert");ee(ie,ye,Ue,"=","=");ee(ie,ye,Ue,":",":");ee(ie,ye,Ue,"","\\approx",!0);ee(ie,ye,Ue,"","\\cong",!0);ee(ie,ye,Ue,"","\\ge");ee(ie,ye,Ue,"","\\geq",!0);ee(ie,ye,Ue,"","\\gets");ee(ie,ye,Ue,">","\\gt",!0);ee(ie,ye,Ue,"","\\in",!0);ee(ie,ye,Ue,"","\\@not");ee(ie,ye,Ue,"","\\subset",!0);ee(ie,ye,Ue,"","\\supset",!0);ee(ie,ye,Ue,"","\\subseteq",!0);ee(ie,ye,Ue,"","\\supseteq",!0);ee(ie,Le,Ue,"","\\nsubseteq",!0);ee(ie,Le,Ue,"","\\nsupseteq",!0);ee(ie,ye,Ue,"","\\models");ee(ie,ye,Ue,"","\\leftarrow",!0);ee(ie,ye,Ue,"","\\le");ee(ie,ye,Ue,"","\\leq",!0);ee(ie,ye,Ue,"<","\\lt",!0);ee(ie,ye,Ue,"","\\rightarrow",!0);ee(ie,ye,Ue,"","\\to");ee(ie,Le,Ue,"","\\ngeq",!0);ee(ie,Le,Ue,"","\\nleq",!0);ee(ie,ye,C0,"","\\ ");ee(ie,ye,C0,"","\\space");ee(ie,ye,C0,"","\\nobreakspace");ee(Yt,ye,C0,"","\\ ");ee(Yt,ye,C0,""," ");ee(Yt,ye,C0,"","\\space");ee(Yt,ye,C0,"","\\nobreakspace");ee(ie,ye,C0,null,"\\nobreak");ee(ie,ye,C0,null,"\\allowbreak");ee(ie,ye,sS,",",",");ee(ie,ye,sS,";",";");ee(ie,Le,jr,"","\\barwedge",!0);ee(ie,Le,jr,"","\\veebar",!0);ee(ie,ye,jr,"","\\odot",!0);ee(ie,ye,jr,"","\\oplus",!0);ee(ie,ye,jr,"","\\otimes",!0);ee(ie,ye,Je,"","\\partial",!0);ee(ie,ye,jr,"","\\oslash",!0);ee(ie,Le,jr,"","\\circledcirc",!0);ee(ie,Le,jr,"","\\boxdot",!0);ee(ie,ye,jr,"","\\bigtriangleup");ee(ie,ye,jr,"","\\bigtriangledown");ee(ie,ye,jr,"","\\dagger");ee(ie,ye,jr,"","\\diamond");ee(ie,ye,jr,"","\\star");ee(ie,ye,jr,"","\\triangleleft");ee(ie,ye,jr,"","\\triangleright");ee(ie,ye,Vl,"{","\\{");ee(Yt,ye,Je,"{","\\{");ee(Yt,ye,Je,"{","\\textbraceleft");ee(ie,ye,Xo,"}","\\}");ee(Yt,ye,Je,"}","\\}");ee(Yt,ye,Je,"}","\\textbraceright");ee(ie,ye,Vl,"{","\\lbrace");ee(ie,ye,Xo,"}","\\rbrace");ee(ie,ye,Vl,"[","\\lbrack",!0);ee(Yt,ye,Je,"[","\\lbrack",!0);ee(ie,ye,Xo,"]","\\rbrack",!0);ee(Yt,ye,Je,"]","\\rbrack",!0);ee(ie,ye,Vl,"(","\\lparen",!0);ee(ie,ye,Xo,")","\\rparen",!0);ee(Yt,ye,Je,"<","\\textless",!0);ee(Yt,ye,Je,">","\\textgreater",!0);ee(ie,ye,Vl,"","\\lfloor",!0);ee(ie,ye,Xo,"","\\rfloor",!0);ee(ie,ye,Vl,"","\\lceil",!0);ee(ie,ye,Xo,"","\\rceil",!0);ee(ie,ye,Je,"\\","\\backslash");ee(ie,ye,Je,"","|");ee(ie,ye,Je,"","\\vert");ee(Yt,ye,Je,"|","\\textbar",!0);ee(ie,ye,Je,"","\\|");ee(ie,ye,Je,"","\\Vert");ee(Yt,ye,Je,"","\\textbardbl");ee(Yt,ye,Je,"~","\\textasciitilde");ee(Yt,ye,Je,"\\","\\textbackslash");ee(Yt,ye,Je,"^","\\textasciicircum");ee(ie,ye,Ue,"","\\uparrow",!0);ee(ie,ye,Ue,"","\\Uparrow",!0);ee(ie,ye,Ue,"","\\downarrow",!0);ee(ie,ye,Ue,"","\\Downarrow",!0);ee(ie,ye,Ue,"","\\updownarrow",!0);ee(ie,ye,Ue,"","\\Updownarrow",!0);ee(ie,ye,qa,"","\\coprod");ee(ie,ye,qa,"","\\bigvee");ee(ie,ye,qa,"","\\bigwedge");ee(ie,ye,qa,"","\\biguplus");ee(ie,ye,qa,"","\\bigcap");ee(ie,ye,qa,"","\\bigcup");ee(ie,ye,qa,"","\\int");ee(ie,ye,qa,"","\\intop");ee(ie,ye,qa,"","\\iint");ee(ie,ye,qa,"","\\iiint");ee(ie,ye,qa,"","\\prod");ee(ie,ye,qa,"","\\sum");ee(ie,ye,qa,"","\\bigotimes");ee(ie,ye,qa,"","\\bigoplus");ee(ie,ye,qa,"","\\bigodot");ee(ie,ye,qa,"","\\oint");ee(ie,ye,qa,"","\\oiint");ee(ie,ye,qa,"","\\oiiint");ee(ie,ye,qa,"","\\bigsqcup");ee(ie,ye,qa,"","\\smallint");ee(Yt,ye,k1,"","\\textellipsis");ee(ie,ye,k1,"","\\mathellipsis");ee(Yt,ye,k1,"","\\ldots",!0);ee(ie,ye,k1,"","\\ldots",!0);ee(ie,ye,k1,"","\\@cdots",!0);ee(ie,ye,k1,"","\\ddots",!0);ee(ie,ye,Je,"","\\varvdots");ee(Yt,ye,Je,"","\\varvdots");ee(ie,ye,Vs,"","\\acute");ee(ie,ye,Vs,"","\\grave");ee(ie,ye,Vs,"","\\ddot");ee(ie,ye,Vs,"~","\\tilde");ee(ie,ye,Vs,"","\\bar");ee(ie,ye,Vs,"","\\breve");ee(ie,ye,Vs,"","\\check");ee(ie,ye,Vs,"^","\\hat");ee(ie,ye,Vs,"","\\vec");ee(ie,ye,Vs,"","\\dot");ee(ie,ye,Vs,"","\\mathring");ee(ie,ye,Yr,"","\\@imath");ee(ie,ye,Yr,"","\\@jmath");ee(ie,ye,Je,"","");ee(ie,ye,Je,"","");ee(Yt,ye,Je,"","\\i",!0);ee(Yt,ye,Je,"","\\j",!0);ee(Yt,ye,Je,"","\\ss",!0);ee(Yt,ye,Je,"","\\ae",!0);ee(Yt,ye,Je,"","\\oe",!0);ee(Yt,ye,Je,"","\\o",!0);ee(Yt,ye,Je,"","\\AE",!0);ee(Yt,ye,Je,"","\\OE",!0);ee(Yt,ye,Je,"","\\O",!0);ee(Yt,ye,Vs,"","\\'");ee(Yt,ye,Vs,"","\\`");ee(Yt,ye,Vs,"","\\^");ee(Yt,ye,Vs,"","\\~");ee(Yt,ye,Vs,"","\\=");ee(Yt,ye,Vs,"","\\u");ee(Yt,ye,Vs,"","\\.");ee(Yt,ye,Vs,"","\\c");ee(Yt,ye,Vs,"","\\r");ee(Yt,ye,Vs,"","\\v");ee(Yt,ye,Vs,"",'\\"');ee(Yt,ye,Vs,"","\\H");ee(Yt,ye,Vs,"","\\textcircled");var _W={"--":!0,"---":!0,"``":!0,"''":!0};ee(Yt,ye,Je,"","--",!0);ee(Yt,ye,Je,"","\\textendash");ee(Yt,ye,Je,"","---",!0);ee(Yt,ye,Je,"","\\textemdash");ee(Yt,ye,Je,"","`",!0);ee(Yt,ye,Je,"","\\textquoteleft");ee(Yt,ye,Je,"","'",!0);ee(Yt,ye,Je,"","\\textquoteright");ee(Yt,ye,Je,"","``",!0);ee(Yt,ye,Je,"","\\textquotedblleft");ee(Yt,ye,Je,"","''",!0);ee(Yt,ye,Je,"","\\textquotedblright");ee(ie,ye,Je,"","\\degree",!0);ee(Yt,ye,Je,"","\\degree");ee(Yt,ye,Je,"","\\textdegree",!0);ee(ie,ye,Je,"","\\pounds");ee(ie,ye,Je,"","\\mathsterling",!0);ee(Yt,ye,Je,"","\\pounds");ee(Yt,ye,Je,"","\\textsterling",!0);ee(ie,Le,Je,"","\\maltese");ee(Yt,Le,Je,"","\\maltese");var jM='0123456789/@."';for(var T5=0;T5<jM.length;T5++){var PM=jM.charAt(T5);ee(ie,ye,Je,PM,PM)}var FM='0123456789!@*()-=+";:?/.,';for(var E5=0;E5<FM.length;E5++){var MM=FM.charAt(E5);ee(Yt,ye,Je,MM,MM)}var O4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var N5=0;N5<O4.length;N5++){var lw=O4.charAt(N5);ee(ie,ye,Yr,lw,lw),ee(Yt,ye,Je,lw,lw)}ee(ie,Le,Je,"C","");ee(Yt,Le,Je,"C","");ee(ie,Le,Je,"H","");ee(Yt,Le,Je,"H","");ee(ie,Le,Je,"N","");ee(Yt,Le,Je,"N","");ee(ie,Le,Je,"P","");ee(Yt,Le,Je,"P","");ee(ie,Le,Je,"Q","");ee(Yt,Le,Je,"Q","");ee(ie,Le,Je,"R","");ee(Yt,Le,Je,"R","");ee(ie,Le,Je,"Z","");ee(Yt,Le,Je,"Z","");ee(ie,ye,Yr,"h","");ee(Yt,ye,Yr,"h","");var rn="";for(var Io=0;Io<O4.length;Io++){var oa=O4.charAt(Io);rn=String.fromCharCode(55349,56320+Io),ee(ie,ye,Yr,oa,rn),ee(Yt,ye,Je,oa,rn),rn=String.fromCharCode(55349,56372+Io),ee(ie,ye,Yr,oa,rn),ee(Yt,ye,Je,oa,rn),rn=String.fromCharCode(55349,56424+Io),ee(ie,ye,Yr,oa,rn),ee(Yt,ye,Je,oa,rn),rn=String.fromCharCode(55349,56580+Io),ee(ie,ye,Yr,oa,rn),ee(Yt,ye,Je,oa,rn),rn=String.fromCharCode(55349,56684+Io),ee(ie,ye,Yr,oa,rn),ee(Yt,ye,Je,oa,rn),rn=String.fromCharCode(55349,56736+Io),ee(ie,ye,Yr,oa,rn),ee(Yt,ye,Je,oa,rn),rn=String.fromCharCode(55349,56788+Io),ee(ie,ye,Yr,oa,rn),ee(Yt,ye,Je,oa,rn),rn=String.fromCharCode(55349,56840+Io),ee(ie,ye,Yr,oa,rn),ee(Yt,ye,Je,oa,rn),rn=String.fromCharCode(55349,56944+Io),ee(ie,ye,Yr,oa,rn),ee(Yt,ye,Je,oa,rn),Io<26&&(rn=String.fromCharCode(55349,56632+Io),ee(ie,ye,Yr,oa,rn),ee(Yt,ye,Je,oa,rn),rn=String.fromCharCode(55349,56476+Io),ee(ie,ye,Yr,oa,rn),ee(Yt,ye,Je,oa,rn))}rn="";ee(ie,ye,Yr,"k",rn);ee(Yt,ye,Je,"k",rn);for(var qh=0;qh<10;qh++){var wf=qh.toString();rn=String.fromCharCode(55349,57294+qh),ee(ie,ye,Yr,wf,rn),ee(Yt,ye,Je,wf,rn),rn=String.fromCharCode(55349,57314+qh),ee(ie,ye,Yr,wf,rn),ee(Yt,ye,Je,wf,rn),rn=String.fromCharCode(55349,57324+qh),ee(ie,ye,Yr,wf,rn),ee(Yt,ye,Je,wf,rn),rn=String.fromCharCode(55349,57334+qh),ee(ie,ye,Yr,wf,rn),ee(Yt,ye,Je,wf,rn)}var B8="";for(var A5=0;A5<B8.length;A5++){var cw=B8.charAt(A5);ee(ie,ye,Yr,cw,cw),ee(Yt,ye,Je,cw,cw)}var uw=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],OM=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],jue=function(t,r){var n=t.charCodeAt(0),s=t.charCodeAt(1),a=(n-55296)*1024+(s-56320)+65536,i=r==="math"?0:1;if(119808<=a&&a<120484){var o=Math.floor((a-119808)/26);return[uw[o][2],uw[o][i]]}else if(120782<=a&&a<=120831){var c=Math.floor((a-120782)/10);return[OM[c][2],OM[c][i]]}else{if(a===120485||a===120486)return[uw[0][2],uw[0][i]];if(120486<a&&a<120782)return["",""];throw new nr("Unsupported character: "+t)}},aS=function(t,r,n){return Ns[n][t]&&Ns[n][t].replace&&(t=Ns[n][t].replace),{value:t,metrics:L7(t,r,n)}},ru=function(t,r,n,s,a){var i=aS(t,r,n),o=i.metrics;t=i.value;var c;if(o){var u=o.italic;(n==="text"||s&&s.font==="mathit")&&(u=0),c=new Tc(t,o.height,o.depth,u,o.skew,o.width,a)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+t+"' in style '"+r+"' and mode '"+n+"'")),c=new Tc(t,0,0,0,0,0,a);if(s){c.maxFontSize=s.sizeMultiplier,s.style.isTight()&&c.classes.push("mtight");var d=s.getColor();d&&(c.style.color=d)}return c},Pue=function(t,r,n,s){return s===void 0&&(s=[]),n.font==="boldsymbol"&&aS(t,"Main-Bold",r).metrics?ru(t,"Main-Bold",r,n,s.concat(["mathbf"])):t==="\\"||Ns[r][t].font==="main"?ru(t,"Main-Regular",r,n,s):ru(t,"AMS-Regular",r,n,s.concat(["amsrm"]))},Fue=function(t,r,n,s,a){return a!=="textord"&&aS(t,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},Mue=function(t,r,n){var s=t.mode,a=t.text,i=["mord"],o=s==="math"||s==="text"&&r.font,c=o?r.font:r.fontFamily,u="",d="";if(a.charCodeAt(0)===55349&&([u,d]=jue(a,s)),u.length>0)return ru(a,u,s,r,i.concat(d));if(c){var f,h;if(c==="boldsymbol"){var g=Fue(a,s,r,i,n);f=g.fontName,h=[g.fontClass]}else o?(f=CW[c].fontName,h=[c]):(f=dw(c,r.fontWeight,r.fontShape),h=[c,r.fontWeight,r.fontShape]);if(aS(a,f,s).metrics)return ru(a,f,s,r,i.concat(h));if(_W.hasOwnProperty(a)&&f.slice(0,10)==="Typewriter"){for(var p=[],y=0;y<a.length;y++)p.push(ru(a[y],f,s,r,i.concat(h)));return kW(p)}}if(n==="mathord")return ru(a,"Math-Italic",s,r,i.concat(["mathnormal"]));if(n==="textord"){var v=Ns[s][a]&&Ns[s][a].font;if(v==="ams"){var C=dw("amsrm",r.fontWeight,r.fontShape);return ru(a,C,s,r,i.concat("amsrm",r.fontWeight,r.fontShape))}else if(v==="main"||!v){var S=dw("textrm",r.fontWeight,r.fontShape);return ru(a,S,s,r,i.concat(r.fontWeight,r.fontShape))}else{var w=dw(v,r.fontWeight,r.fontShape);return ru(a,w,s,r,i.concat(w,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},Oue=(e,t)=>{if(Vf(e.classes)!==Vf(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(e.classes.length===1){var r=e.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in e.style)if(e.style.hasOwnProperty(n)&&e.style[n]!==t.style[n])return!1;for(var s in t.style)if(t.style.hasOwnProperty(s)&&e.style[s]!==t.style[s])return!1;return!0},Due=e=>{for(var t=0;t<e.length-1;t++){var r=e[t],n=e[t+1];r instanceof Tc&&n instanceof Tc&&Oue(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,e.splice(t+1,1),t--)}return e},$7=function(t){for(var r=0,n=0,s=0,a=0;a<t.children.length;a++){var i=t.children[a];i.height>r&&(r=i.height),i.depth>n&&(n=i.depth),i.maxFontSize>s&&(s=i.maxFontSize)}t.height=r,t.depth=n,t.maxFontSize=s},ol=function(t,r,n,s){var a=new _2(t,r,n,s);return $7(a),a},SW=(e,t,r,n)=>new _2(e,t,r,n),Rue=function(t,r,n){var s=ol([t],[],r);return s.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),s.style.borderBottomWidth=gr(s.height),s.maxFontSize=1,s},Iue=function(t,r,n,s){var a=new B7(t,r,n,s);return $7(a),a},kW=function(t){var r=new w2(t);return $7(r),r},Lue=function(t,r){return t instanceof w2?ol([],[t],r):t},Bue=function(t){if(t.positionType==="individualShift"){for(var r=t.children,n=[r[0]],s=-r[0].shift-r[0].elem.depth,a=s,i=1;i<r.length;i++){var o=-r[i].shift-a-r[i].elem.depth,c=o-(r[i-1].elem.height+r[i-1].elem.depth);a=a+o,n.push({type:"kern",size:c}),n.push(r[i])}return{children:n,depth:s}}var u;if(t.positionType==="top"){for(var d=t.positionData,f=0;f<t.children.length;f++){var h=t.children[f];d-=h.type==="kern"?h.size:h.elem.height+h.elem.depth}u=d}else if(t.positionType==="bottom")u=-t.positionData;else{var g=t.children[0];if(g.type!=="elem")throw new Error('First child must have type "elem".');if(t.positionType==="shift")u=-g.elem.depth-t.positionData;else if(t.positionType==="firstBaseline")u=-g.elem.depth;else throw new Error("Invalid positionType "+t.positionType+".")}return{children:t.children,depth:u}},$ue=function(t,r){for(var{children:n,depth:s}=Bue(t),a=0,i=0;i<n.length;i++){var o=n[i];if(o.type==="elem"){var c=o.elem;a=Math.max(a,c.maxFontSize,c.height)}}a+=2;var u=ol(["pstrut"],[]);u.style.height=gr(a);for(var d=[],f=s,h=s,g=s,p=0;p<n.length;p++){var y=n[p];if(y.type==="kern")g+=y.size;else{var v=y.elem,C=y.wrapperClasses||[],S=y.wrapperStyle||{},w=ol(C,[u,v],void 0,S);w.style.top=gr(-a-g-v.depth),y.marginLeft&&(w.style.marginLeft=y.marginLeft),y.marginRight&&(w.style.marginRight=y.marginRight),d.push(w),g+=v.height+v.depth}f=Math.min(f,g),h=Math.max(h,g)}var T=ol(["vlist"],d);T.style.height=gr(h);var N;if(f<0){var A=ol([],[]),P=ol(["vlist"],[A]);P.style.height=gr(-f);var j=ol(["vlist-s"],[new Tc("")]);N=[ol(["vlist-r"],[T,j]),ol(["vlist-r"],[P])]}else N=[ol(["vlist-r"],[T])];var F=ol(["vlist-t"],N);return N.length===2&&F.classes.push("vlist-t2"),F.height=h,F.depth=-f,F},Uue=(e,t)=>{var r=ol(["mspace"],[],t),n=Qs(e,t);return r.style.marginRight=gr(n),r},dw=function(t,r,n){var s="";switch(t){case"amsrm":s="AMS";break;case"textrm":s="Main";break;case"textsf":s="SansSerif";break;case"texttt":s="Typewriter";break;default:s=t}var a;return r==="textbf"&&n==="textit"?a="BoldItalic":r==="textbf"?a="Bold":r==="textit"?a="Italic":a="Regular",s+"-"+a},CW={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},TW={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},zue=function(t,r){var[n,s,a]=TW[t],i=new qf(n),o=new h0([i],{width:gr(s),height:gr(a),style:"width:"+gr(s),viewBox:"0 0 "+1e3*s+" "+1e3*a,preserveAspectRatio:"xMinYMin"}),c=SW(["overlay"],[o],r);return c.height=a,c.style.height=gr(a),c.style.width=gr(s),c},mt={fontMap:CW,makeSymbol:ru,mathsym:Pue,makeSpan:ol,makeSvgSpan:SW,makeLineSpan:Rue,makeAnchor:Iue,makeFragment:kW,wrapFragment:Lue,makeVList:$ue,makeOrd:Mue,makeGlue:Uue,staticSvg:zue,svgData:TW,tryCombineChars:Due},Xs={number:3,unit:"mu"},Kh={number:4,unit:"mu"},Ud={number:5,unit:"mu"},Wue={mord:{mop:Xs,mbin:Kh,mrel:Ud,minner:Xs},mop:{mord:Xs,mop:Xs,mrel:Ud,minner:Xs},mbin:{mord:Kh,mop:Kh,mopen:Kh,minner:Kh},mrel:{mord:Ud,mop:Ud,mopen:Ud,minner:Ud},mopen:{},mclose:{mop:Xs,mbin:Kh,mrel:Ud,minner:Xs},mpunct:{mord:Xs,mop:Xs,mrel:Ud,mopen:Xs,mclose:Xs,mpunct:Xs,minner:Xs},minner:{mord:Xs,mop:Xs,mbin:Kh,mrel:Ud,mopen:Xs,mpunct:Xs,minner:Xs}},Hue={mord:{mop:Xs},mop:{mord:Xs,mop:Xs},mbin:{},mrel:{},mopen:{},mclose:{mop:Xs},mpunct:{},minner:{mop:Xs}},EW={},D4={},R4={};function Tr(e){for(var{type:t,names:r,props:n,handler:s,htmlBuilder:a,mathmlBuilder:i}=e,o={type:t,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:s},c=0;c<r.length;++c)EW[r[c]]=o;t&&(a&&(D4[t]=a),i&&(R4[t]=i))}function Zm(e){var{type:t,htmlBuilder:r,mathmlBuilder:n}=e;Tr({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var I4=function(t){return t.type==="ordgroup"&&t.body.length===1?t.body[0]:t},ja=function(t){return t.type==="ordgroup"?t.body:[t]},m0=mt.makeSpan,Gue=["leftmost","mbin","mopen","mrel","mop","mpunct"],Vue=["rightmost","mrel","mclose","mpunct"],que={display:Xr.DISPLAY,text:Xr.TEXT,script:Xr.SCRIPT,scriptscript:Xr.SCRIPTSCRIPT},Kue={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},oi=function(t,r,n,s){s===void 0&&(s=[null,null]);for(var a=[],i=0;i<t.length;i++){var o=zn(t[i],r);if(o instanceof w2){var c=o.children;a.push(...c)}else a.push(o)}if(mt.tryCombineChars(a),!n)return a;var u=r;if(t.length===1){var d=t[0];d.type==="sizing"?u=r.havingSize(d.size):d.type==="styling"&&(u=r.havingStyle(que[d.style]))}var f=m0([s[0]||"leftmost"],[],r),h=m0([s[1]||"rightmost"],[],r),g=n==="root";return DM(a,(p,y)=>{var v=y.classes[0],C=p.classes[0];v==="mbin"&&Vue.includes(C)?y.classes[0]="mord":C==="mbin"&&Gue.includes(v)&&(p.classes[0]="mord")},{node:f},h,g),DM(a,(p,y)=>{var v=$8(y),C=$8(p),S=v&&C?p.hasClass("mtight")?Hue[v][C]:Wue[v][C]:null;if(S)return mt.makeGlue(S,u)},{node:f},h,g),a},DM=function e(t,r,n,s,a){s&&t.push(s);for(var i=0;i<t.length;i++){var o=t[i],c=NW(o);if(c){e(c.children,r,n,null,a);continue}var u=!o.hasClass("mspace");if(u){var d=r(o,n.node);d&&(n.insertAfter?n.insertAfter(d):(t.unshift(d),i++))}u?n.node=o:a&&o.hasClass("newline")&&(n.node=m0(["leftmost"])),n.insertAfter=(f=>h=>{t.splice(f+1,0,h),i++})(i)}s&&t.pop()},NW=function(t){return t instanceof w2||t instanceof B7||t instanceof _2&&t.hasClass("enclosing")?t:null},Yue=function e(t,r){var n=NW(t);if(n){var s=n.children;if(s.length){if(r==="right")return e(s[s.length-1],"right");if(r==="left")return e(s[0],"left")}}return t},$8=function(t,r){return t?(r&&(t=Yue(t,r)),Kue[t.classes[0]]||null):null},Pv=function(t,r){var n=["nulldelimiter"].concat(t.baseSizingClasses());return m0(r.concat(n))},zn=function(t,r,n){if(!t)return m0();if(D4[t.type]){var s=D4[t.type](t,r);if(n&&r.size!==n.size){s=m0(r.sizingClasses(n),[s],r);var a=r.sizeMultiplier/n.sizeMultiplier;s.height*=a,s.depth*=a}return s}else throw new nr("Got group of unknown type: '"+t.type+"'")};function fw(e,t){var r=m0(["base"],e,t),n=m0(["strut"]);return n.style.height=gr(r.height+r.depth),r.depth&&(n.style.verticalAlign=gr(-r.depth)),r.children.unshift(n),r}function U8(e,t){var r=null;e.length===1&&e[0].type==="tag"&&(r=e[0].tag,e=e[0].body);var n=oi(e,t,"root"),s;n.length===2&&n[1].hasClass("tag")&&(s=n.pop());for(var a=[],i=[],o=0;o<n.length;o++)if(i.push(n[o]),n[o].hasClass("mbin")||n[o].hasClass("mrel")||n[o].hasClass("allowbreak")){for(var c=!1;o<n.length-1&&n[o+1].hasClass("mspace")&&!n[o+1].hasClass("newline");)o++,i.push(n[o]),n[o].hasClass("nobreak")&&(c=!0);c||(a.push(fw(i,t)),i=[])}else n[o].hasClass("newline")&&(i.pop(),i.length>0&&(a.push(fw(i,t)),i=[]),a.push(n[o]));i.length>0&&a.push(fw(i,t));var u;r?(u=fw(oi(r,t,!0)),u.classes=["tag"],a.push(u)):s&&a.push(s);var d=m0(["katex-html"],a);if(d.setAttribute("aria-hidden","true"),u){var f=u.children[0];f.style.height=gr(d.height+d.depth),d.depth&&(f.style.verticalAlign=gr(-d.depth))}return d}function AW(e){return new w2(e)}class Rl{constructor(t,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(t,r){this.attributes[t]=r}getAttribute(t){return this.attributes[t]}toNode(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);this.classes.length>0&&(t.className=Vf(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof qu&&this.children[n+1]instanceof qu){for(var s=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof qu;)s+=this.children[++n].toText();t.appendChild(new qu(s).toNode())}else t.appendChild(this.children[n].toNode());return t}toMarkup(){var t="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="',t+=qn.escape(this.attributes[r]),t+='"');this.classes.length>0&&(t+=' class ="'+qn.escape(Vf(this.classes))+'"'),t+=">";for(var n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map(t=>t.toText()).join("")}}class qu{constructor(t){this.text=void 0,this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return qn.escape(this.toText())}toText(){return this.text}}class Xue{constructor(t){this.width=void 0,this.character=void 0,this.width=t,t>=.05555&&t<=.05556?this.character="":t>=.1666&&t<=.1667?this.character="":t>=.2222&&t<=.2223?this.character="":t>=.2777&&t<=.2778?this.character="":t>=-.05556&&t<=-.05555?this.character="":t>=-.1667&&t<=-.1666?this.character="":t>=-.2223&&t<=-.2222?this.character="":t>=-.2778&&t<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",gr(this.width)),t}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+gr(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var tr={MathNode:Rl,TextNode:qu,SpaceNode:Xue,newDocumentFragment:AW},Ec=function(t,r,n){return Ns[r][t]&&Ns[r][t].replace&&t.charCodeAt(0)!==55349&&!(_W.hasOwnProperty(t)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(t=Ns[r][t].replace),new tr.TextNode(t)},U7=function(t){return t.length===1?t[0]:new tr.MathNode("mrow",t)},z7=function(t,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var s=t.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return t.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var a=t.text;if(["\\imath","\\jmath"].includes(a))return null;Ns[s][a]&&Ns[s][a].replace&&(a=Ns[s][a].replace);var i=mt.fontMap[n].fontName;return L7(a,i,s)?mt.fontMap[n].variant:null};function j5(e){if(!e)return!1;if(e.type==="mi"&&e.children.length===1){var t=e.children[0];return t instanceof qu&&t.text==="."}else if(e.type==="mo"&&e.children.length===1&&e.getAttribute("separator")==="true"&&e.getAttribute("lspace")==="0em"&&e.getAttribute("rspace")==="0em"){var r=e.children[0];return r instanceof qu&&r.text===","}else return!1}var xl=function(t,r,n){if(t.length===1){var s=_s(t[0],r);return n&&s instanceof Rl&&s.type==="mo"&&(s.setAttribute("lspace","0em"),s.setAttribute("rspace","0em")),[s]}for(var a=[],i,o=0;o<t.length;o++){var c=_s(t[o],r);if(c instanceof Rl&&i instanceof Rl){if(c.type==="mtext"&&i.type==="mtext"&&c.getAttribute("mathvariant")===i.getAttribute("mathvariant")){i.children.push(...c.children);continue}else if(c.type==="mn"&&i.type==="mn"){i.children.push(...c.children);continue}else if(j5(c)&&i.type==="mn"){i.children.push(...c.children);continue}else if(c.type==="mn"&&j5(i))c.children=[...i.children,...c.children],a.pop();else if((c.type==="msup"||c.type==="msub")&&c.children.length>=1&&(i.type==="mn"||j5(i))){var u=c.children[0];u instanceof Rl&&u.type==="mn"&&(u.children=[...i.children,...u.children],a.pop())}else if(i.type==="mi"&&i.children.length===1){var d=i.children[0];if(d instanceof qu&&d.text===""&&(c.type==="mo"||c.type==="mi"||c.type==="mn")){var f=c.children[0];f instanceof qu&&f.text.length>0&&(f.text=f.text.slice(0,1)+""+f.text.slice(1),a.pop())}}}a.push(c),i=c}return a},Kf=function(t,r,n){return U7(xl(t,r,n))},_s=function(t,r){if(!t)return new tr.MathNode("mrow");if(R4[t.type]){var n=R4[t.type](t,r);return n}else throw new nr("Got group of unknown type: '"+t.type+"'")};function RM(e,t,r,n,s){var a=xl(e,r),i;a.length===1&&a[0]instanceof Rl&&["mrow","mtable"].includes(a[0].type)?i=a[0]:i=new tr.MathNode("mrow",a);var o=new tr.MathNode("annotation",[new tr.TextNode(t)]);o.setAttribute("encoding","application/x-tex");var c=new tr.MathNode("semantics",[i,o]),u=new tr.MathNode("math",[c]);u.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&u.setAttribute("display","block");var d=s?"katex":"katex-mathml";return mt.makeSpan([d],[u])}var jW=function(t){return new Gd({style:t.displayMode?Xr.DISPLAY:Xr.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},PW=function(t,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),t=mt.makeSpan(n,[t])}return t},Jue=function(t,r,n){var s=jW(n),a;if(n.output==="mathml")return RM(t,r,s,n.displayMode,!0);if(n.output==="html"){var i=U8(t,s);a=mt.makeSpan(["katex"],[i])}else{var o=RM(t,r,s,n.displayMode,!1),c=U8(t,s);a=mt.makeSpan(["katex"],[o,c])}return PW(a,n)},Que=function(t,r,n){var s=jW(n),a=U8(t,s),i=mt.makeSpan(["katex"],[a]);return PW(i,n)},Zue={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},ede=function(t){var r=new tr.MathNode("mo",[new tr.TextNode(Zue[t.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},tde={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},rde=function(t){return t.type==="ordgroup"?t.body.length:1},nde=function(t,r){function n(){var o=4e5,c=t.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(c)){var u=t,d=rde(u.base),f,h,g;if(d>5)c==="widehat"||c==="widecheck"?(f=420,o=2364,g=.42,h=c+"4"):(f=312,o=2340,g=.34,h="tilde4");else{var p=[1,1,2,2,3,3][d];c==="widehat"||c==="widecheck"?(o=[0,1062,2364,2364,2364][p],f=[0,239,300,360,420][p],g=[0,.24,.3,.3,.36,.42][p],h=c+p):(o=[0,600,1033,2339,2340][p],f=[0,260,286,306,312][p],g=[0,.26,.286,.3,.306,.34][p],h="tilde"+p)}var y=new qf(h),v=new h0([y],{width:"100%",height:gr(g),viewBox:"0 0 "+o+" "+f,preserveAspectRatio:"none"});return{span:mt.makeSvgSpan([],[v],r),minWidth:0,height:g}}else{var C=[],S=tde[c],[w,T,N]=S,A=N/1e3,P=w.length,j,F;if(P===1){var R=S[3];j=["hide-tail"],F=[R]}else if(P===2)j=["halfarrow-left","halfarrow-right"],F=["xMinYMin","xMaxYMin"];else if(P===3)j=["brace-left","brace-center","brace-right"],F=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+P+" children.");for(var L=0;L<P;L++){var V=new qf(w[L]),Z=new h0([V],{width:"400em",height:gr(A),viewBox:"0 0 "+o+" "+N,preserveAspectRatio:F[L]+" slice"}),Y=mt.makeSvgSpan([j[L]],[Z],r);if(P===1)return{span:Y,minWidth:T,height:A};Y.style.height=gr(A),C.push(Y)}return{span:mt.makeSpan(["stretchy"],C,r),minWidth:T,height:A}}}var{span:s,minWidth:a,height:i}=n();return s.height=i,s.style.height=gr(i),a>0&&(s.style.minWidth=gr(a)),s},sde=function(t,r,n,s,a){var i,o=t.height+t.depth+n+s;if(/fbox|color|angl/.test(r)){if(i=mt.makeSpan(["stretchy",r],[],a),r==="fbox"){var c=a.color&&a.getColor();c&&(i.style.borderColor=c)}}else{var u=[];/^[bx]cancel$/.test(r)&&u.push(new L8({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&u.push(new L8({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var d=new h0(u,{width:"100%",height:gr(o)});i=mt.makeSvgSpan([],[d],a)}return i.height=o,i.style.height=gr(o),i},g0={encloseSpan:sde,mathMLnode:ede,svgSpan:nde};function Sn(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function W7(e){var t=iS(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function iS(e){return e&&(e.type==="atom"||Aue.hasOwnProperty(e.type))?e:null}var H7=(e,t)=>{var r,n,s;e&&e.type==="supsub"?(n=Sn(e.base,"accent"),r=n.base,e.base=r,s=Eue(zn(e,t)),e.base=n):(n=Sn(e,"accent"),r=n.base);var a=zn(r,t.havingCrampedStyle()),i=n.isShifty&&qn.isCharacterBox(r),o=0;if(i){var c=qn.getBaseElem(r),u=zn(c,t.havingCrampedStyle());o=AM(u).skew}var d=n.label==="\\c",f=d?a.height+a.depth:Math.min(a.height,t.fontMetrics().xHeight),h;if(n.isStretchy)h=g0.svgSpan(n,t),h=mt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:h,wrapperClasses:["svg-align"],wrapperStyle:o>0?{width:"calc(100% - "+gr(2*o)+")",marginLeft:gr(2*o)}:void 0}]},t);else{var g,p;n.label==="\\vec"?(g=mt.staticSvg("vec",t),p=mt.svgData.vec[1]):(g=mt.makeOrd({mode:n.mode,text:n.label},t,"textord"),g=AM(g),g.italic=0,p=g.width,d&&(f+=g.depth)),h=mt.makeSpan(["accent-body"],[g]);var y=n.label==="\\textcircled";y&&(h.classes.push("accent-full"),f=a.height);var v=o;y||(v-=p/2),h.style.left=gr(v),n.label==="\\textcircled"&&(h.style.top=".2em"),h=mt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-f},{type:"elem",elem:h}]},t)}var C=mt.makeSpan(["mord","accent"],[h],t);return s?(s.children[0]=C,s.height=Math.max(C.height,s.height),s.classes[0]="mord",s):C},FW=(e,t)=>{var r=e.isStretchy?g0.mathMLnode(e.label):new tr.MathNode("mo",[Ec(e.label,e.mode)]),n=new tr.MathNode("mover",[_s(e.base,t),r]);return n.setAttribute("accent","true"),n},ade=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(e=>"\\"+e).join("|"));Tr({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var r=I4(t[0]),n=!ade.test(e.funcName),s=!n||e.funcName==="\\widehat"||e.funcName==="\\widetilde"||e.funcName==="\\widecheck";return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:n,isShifty:s,base:r}},htmlBuilder:H7,mathmlBuilder:FW});Tr({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var r=t[0],n=e.parser.mode;return n==="math"&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:e.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:H7,mathmlBuilder:FW});Tr({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0];return{type:"accentUnder",mode:r.mode,label:n,base:s}},htmlBuilder:(e,t)=>{var r=zn(e.base,t),n=g0.svgSpan(e,t),s=e.label==="\\utilde"?.12:0,a=mt.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:s},{type:"elem",elem:r}]},t);return mt.makeSpan(["mord","accentunder"],[a],t)},mathmlBuilder:(e,t)=>{var r=g0.mathMLnode(e.label),n=new tr.MathNode("munder",[_s(e.base,t),r]);return n.setAttribute("accentunder","true"),n}});var hw=e=>{var t=new tr.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};Tr({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n,funcName:s}=e;return{type:"xArrow",mode:n.mode,label:s,body:t[0],below:r[0]}},htmlBuilder(e,t){var r=t.style,n=t.havingStyle(r.sup()),s=mt.wrapFragment(zn(e.body,n,t),t),a=e.label.slice(0,2)==="\\x"?"x":"cd";s.classes.push(a+"-arrow-pad");var i;e.below&&(n=t.havingStyle(r.sub()),i=mt.wrapFragment(zn(e.below,n,t),t),i.classes.push(a+"-arrow-pad"));var o=g0.svgSpan(e,t),c=-t.fontMetrics().axisHeight+.5*o.height,u=-t.fontMetrics().axisHeight-.5*o.height-.111;(s.depth>.25||e.label==="\\xleftequilibrium")&&(u-=s.depth);var d;if(i){var f=-t.fontMetrics().axisHeight+i.height+.5*o.height+.111;d=mt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:o,shift:c},{type:"elem",elem:i,shift:f}]},t)}else d=mt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:o,shift:c}]},t);return d.children[0].children[0].children[1].classes.push("svg-align"),mt.makeSpan(["mrel","x-arrow"],[d],t)},mathmlBuilder(e,t){var r=g0.mathMLnode(e.label);r.setAttribute("minsize",e.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(e.body){var s=hw(_s(e.body,t));if(e.below){var a=hw(_s(e.below,t));n=new tr.MathNode("munderover",[r,a,s])}else n=new tr.MathNode("mover",[r,s])}else if(e.below){var i=hw(_s(e.below,t));n=new tr.MathNode("munder",[r,i])}else n=hw(),n=new tr.MathNode("mover",[r,n]);return n}});var ide=mt.makeSpan;function MW(e,t){var r=oi(e.body,t,!0);return ide([e.mclass],r,t)}function OW(e,t){var r,n=xl(e.body,t);return e.mclass==="minner"?r=new tr.MathNode("mpadded",n):e.mclass==="mord"?e.isCharacterBox?(r=n[0],r.type="mi"):r=new tr.MathNode("mi",n):(e.isCharacterBox?(r=n[0],r.type="mo"):r=new tr.MathNode("mo",n),e.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):e.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):e.mclass==="mopen"||e.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):e.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}Tr({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:ja(s),isCharacterBox:qn.isCharacterBox(s)}},htmlBuilder:MW,mathmlBuilder:OW});var oS=e=>{var t=e.type==="ordgroup"&&e.body.length?e.body[0]:e;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"};Tr({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:r}=e;return{type:"mclass",mode:r.mode,mclass:oS(t[0]),body:ja(t[1]),isCharacterBox:qn.isCharacterBox(t[1])}}});Tr({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var{parser:r,funcName:n}=e,s=t[1],a=t[0],i;n!=="\\stackrel"?i=oS(s):i="mrel";var o={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:ja(s)},c={type:"supsub",mode:a.mode,base:o,sup:n==="\\underset"?null:a,sub:n==="\\underset"?a:null};return{type:"mclass",mode:r.mode,mclass:i,body:[c],isCharacterBox:qn.isCharacterBox(c)}},htmlBuilder:MW,mathmlBuilder:OW});Tr({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"pmb",mode:r.mode,mclass:oS(t[0]),body:ja(t[0])}},htmlBuilder(e,t){var r=oi(e.body,t,!0),n=mt.makeSpan([e.mclass],r,t);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(e,t){var r=xl(e.body,t),n=new tr.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var ode={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},IM=()=>({type:"styling",body:[],mode:"math",style:"display"}),LM=e=>e.type==="textord"&&e.text==="@",lde=(e,t)=>(e.type==="mathord"||e.type==="atom")&&e.text===t;function cde(e,t,r){var n=ode[e];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{var s=r.callFunction("\\\\cdleft",[t[0]],[]),a={type:"atom",text:n,mode:"math",family:"rel"},i=r.callFunction("\\Big",[a],[]),o=r.callFunction("\\\\cdright",[t[1]],[]),c={type:"ordgroup",mode:"math",body:[s,i,o]};return r.callFunction("\\\\cdparent",[c],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var u={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[u],[])}default:return{type:"textord",text:" ",mode:"math"}}}function ude(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var r=e.fetch().text;if(r==="&"||r==="\\\\")e.consume();else if(r==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new nr("Expected \\\\ or \\cr or \\end",e.nextToken)}for(var n=[],s=[n],a=0;a<t.length;a++){for(var i=t[a],o=IM(),c=0;c<i.length;c++)if(!LM(i[c]))o.body.push(i[c]);else{n.push(o),c+=1;var u=W7(i[c]).text,d=new Array(2);if(d[0]={type:"ordgroup",mode:"math",body:[]},d[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(u)>-1))if("<>AV".indexOf(u)>-1)for(var f=0;f<2;f++){for(var h=!0,g=c+1;g<i.length;g++){if(lde(i[g],u)){h=!1,c=g;break}if(LM(i[g]))throw new nr("Missing a "+u+" character to complete a CD arrow.",i[g]);d[f].body.push(i[g])}if(h)throw new nr("Missing a "+u+" character to complete a CD arrow.",i[c])}else throw new nr('Expected one of "<>AV=|." after @',i[c]);var p=cde(u,d,e),y={type:"styling",body:[p],mode:"math",style:"display"};n.push(y),o=IM()}a%2===0?n.push(o):n.shift(),n=[],s.push(n)}e.gullet.endGroup(),e.gullet.endGroup();var v=new Array(s[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:s,arraystretch:1,addJot:!0,rowGaps:[null],cols:v,colSeparationType:"CD",hLinesBeforeRow:new Array(s.length+1).fill([])}}Tr({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:t[0]}},htmlBuilder(e,t){var r=t.havingStyle(t.style.sup()),n=mt.wrapFragment(zn(e.label,r,t),t);return n.classes.push("cd-label-"+e.side),n.style.bottom=gr(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(e,t){var r=new tr.MathNode("mrow",[_s(e.label,t)]);return r=new tr.MathNode("mpadded",[r]),r.setAttribute("width","0"),e.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new tr.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});Tr({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:r}=e;return{type:"cdlabelparent",mode:r.mode,fragment:t[0]}},htmlBuilder(e,t){var r=mt.wrapFragment(zn(e.fragment,t),t);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(e,t){return new tr.MathNode("mrow",[_s(e.fragment,t)])}});Tr({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:r}=e,n=Sn(t[0],"ordgroup"),s=n.body,a="",i=0;i<s.length;i++){var o=Sn(s[i],"textord");a+=o.text}var c=parseInt(a),u;if(isNaN(c))throw new nr("\\@char has non-numeric argument "+a);if(c<0||c>=1114111)throw new nr("\\@char with invalid code point "+a);return c<=65535?u=String.fromCharCode(c):(c-=65536,u=String.fromCharCode((c>>10)+55296,(c&1023)+56320)),{type:"textord",mode:r.mode,text:u}}});var DW=(e,t)=>{var r=oi(e.body,t.withColor(e.color),!1);return mt.makeFragment(r)},RW=(e,t)=>{var r=xl(e.body,t.withColor(e.color)),n=new tr.MathNode("mstyle",r);return n.setAttribute("mathcolor",e.color),n};Tr({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:r}=e,n=Sn(t[0],"color-token").color,s=t[1];return{type:"color",mode:r.mode,color:n,body:ja(s)}},htmlBuilder:DW,mathmlBuilder:RW});Tr({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:r,breakOnTokenText:n}=e,s=Sn(t[0],"color-token").color;r.gullet.macros.set("\\current@color",s);var a=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:s,body:a}},htmlBuilder:DW,mathmlBuilder:RW});Tr({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,r){var{parser:n}=e,s=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,a=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:a,size:s&&Sn(s,"size").value}},htmlBuilder(e,t){var r=mt.makeSpan(["mspace"],[],t);return e.newLine&&(r.classes.push("newline"),e.size&&(r.style.marginTop=gr(Qs(e.size,t)))),r},mathmlBuilder(e,t){var r=new tr.MathNode("mspace");return e.newLine&&(r.setAttribute("linebreak","newline"),e.size&&r.setAttribute("height",gr(Qs(e.size,t)))),r}});var z8={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},IW=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new nr("Expected a control sequence",e);return t},dde=e=>{var t=e.gullet.popToken();return t.text==="="&&(t=e.gullet.popToken(),t.text===" "&&(t=e.gullet.popToken())),t},LW=(e,t,r,n)=>{var s=e.gullet.macros.get(r.text);s==null&&(r.noexpand=!0,s={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,s,n)};Tr({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:r}=e;t.consumeSpaces();var n=t.fetch();if(z8[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=z8[n.text]),Sn(t.parseFunction(),"internal");throw new nr("Invalid token after macro prefix",n)}});Tr({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=t.gullet.popToken(),s=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new nr("Expected a control sequence",n);for(var a=0,i,o=[[]];t.gullet.future().text!=="{";)if(n=t.gullet.popToken(),n.text==="#"){if(t.gullet.future().text==="{"){i=t.gullet.future(),o[a].push("{");break}if(n=t.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new nr('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==a+1)throw new nr('Argument number "'+n.text+'" out of order');a++,o.push([])}else{if(n.text==="EOF")throw new nr("Expected a macro definition");o[a].push(n.text)}var{tokens:c}=t.gullet.consumeArg();return i&&c.unshift(i),(r==="\\edef"||r==="\\xdef")&&(c=t.gullet.expandTokens(c),c.reverse()),t.gullet.macros.set(s,{tokens:c,numArgs:a,delimiters:o},r===z8[r]),{type:"internal",mode:t.mode}}});Tr({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=IW(t.gullet.popToken());t.gullet.consumeSpaces();var s=dde(t);return LW(t,n,s,r==="\\\\globallet"),{type:"internal",mode:t.mode}}});Tr({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=IW(t.gullet.popToken()),s=t.gullet.popToken(),a=t.gullet.popToken();return LW(t,n,a,r==="\\\\globalfuture"),t.gullet.pushToken(a),t.gullet.pushToken(s),{type:"internal",mode:t.mode}}});var Ly=function(t,r,n){var s=Ns.math[t]&&Ns.math[t].replace,a=L7(s||t,r,n);if(!a)throw new Error("Unsupported symbol "+t+" and font size "+r+".");return a},G7=function(t,r,n,s){var a=n.havingBaseStyle(r),i=mt.makeSpan(s.concat(a.sizingClasses(n)),[t],n),o=a.sizeMultiplier/n.sizeMultiplier;return i.height*=o,i.depth*=o,i.maxFontSize=a.sizeMultiplier,i},BW=function(t,r,n){var s=r.havingBaseStyle(n),a=(1-r.sizeMultiplier/s.sizeMultiplier)*r.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=gr(a),t.height-=a,t.depth+=a},fde=function(t,r,n,s,a,i){var o=mt.makeSymbol(t,"Main-Regular",a,s),c=G7(o,r,s,i);return n&&BW(c,s,r),c},hde=function(t,r,n,s){return mt.makeSymbol(t,"Size"+r+"-Regular",n,s)},$W=function(t,r,n,s,a,i){var o=hde(t,r,a,s),c=G7(mt.makeSpan(["delimsizing","size"+r],[o],s),Xr.TEXT,s,i);return n&&BW(c,s,Xr.TEXT),c},P5=function(t,r,n){var s;r==="Size1-Regular"?s="delim-size1":s="delim-size4";var a=mt.makeSpan(["delimsizinginner",s],[mt.makeSpan([],[mt.makeSymbol(t,r,n)])]);return{type:"elem",elem:a}},F5=function(t,r,n){var s=Vu["Size4-Regular"][t.charCodeAt(0)]?Vu["Size4-Regular"][t.charCodeAt(0)][4]:Vu["Size1-Regular"][t.charCodeAt(0)][4],a=new qf("inner",yue(t,Math.round(1e3*r))),i=new h0([a],{width:gr(s),height:gr(r),style:"width:"+gr(s),viewBox:"0 0 "+1e3*s+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),o=mt.makeSvgSpan([],[i],n);return o.height=r,o.style.height=gr(r),o.style.width=gr(s),{type:"elem",elem:o}},W8=.008,mw={type:"kern",size:-1*W8},mde=["|","\\lvert","\\rvert","\\vert"],gde=["\\|","\\lVert","\\rVert","\\Vert"],UW=function(t,r,n,s,a,i){var o,c,u,d,f="",h=0;o=u=d=t,c=null;var g="Size1-Regular";t==="\\uparrow"?u=d="":t==="\\Uparrow"?u=d="":t==="\\downarrow"?o=u="":t==="\\Downarrow"?o=u="":t==="\\updownarrow"?(o="\\uparrow",u="",d="\\downarrow"):t==="\\Updownarrow"?(o="\\Uparrow",u="",d="\\Downarrow"):mde.includes(t)?(u="",f="vert",h=333):gde.includes(t)?(u="",f="doublevert",h=556):t==="["||t==="\\lbrack"?(o="",u="",d="",g="Size4-Regular",f="lbrack",h=667):t==="]"||t==="\\rbrack"?(o="",u="",d="",g="Size4-Regular",f="rbrack",h=667):t==="\\lfloor"||t===""?(u=o="",d="",g="Size4-Regular",f="lfloor",h=667):t==="\\lceil"||t===""?(o="",u=d="",g="Size4-Regular",f="lceil",h=667):t==="\\rfloor"||t===""?(u=o="",d="",g="Size4-Regular",f="rfloor",h=667):t==="\\rceil"||t===""?(o="",u=d="",g="Size4-Regular",f="rceil",h=667):t==="("||t==="\\lparen"?(o="",u="",d="",g="Size4-Regular",f="lparen",h=875):t===")"||t==="\\rparen"?(o="",u="",d="",g="Size4-Regular",f="rparen",h=875):t==="\\{"||t==="\\lbrace"?(o="",c="",d="",u="",g="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(o="",c="",d="",u="",g="Size4-Regular"):t==="\\lgroup"||t===""?(o="",d="",u="",g="Size4-Regular"):t==="\\rgroup"||t===""?(o="",d="",u="",g="Size4-Regular"):t==="\\lmoustache"||t===""?(o="",d="",u="",g="Size4-Regular"):(t==="\\rmoustache"||t==="")&&(o="",d="",u="",g="Size4-Regular");var p=Ly(o,g,a),y=p.height+p.depth,v=Ly(u,g,a),C=v.height+v.depth,S=Ly(d,g,a),w=S.height+S.depth,T=0,N=1;if(c!==null){var A=Ly(c,g,a);T=A.height+A.depth,N=2}var P=y+w+T,j=Math.max(0,Math.ceil((r-P)/(N*C))),F=P+j*N*C,R=s.fontMetrics().axisHeight;n&&(R*=s.sizeMultiplier);var L=F/2-R,V=[];if(f.length>0){var Z=F-y-w,Y=Math.round(F*1e3),re=vue(f,Math.round(Z*1e3)),ue=new qf(f,re),z=(h/1e3).toFixed(3)+"em",X=(Y/1e3).toFixed(3)+"em",I=new h0([ue],{width:z,height:X,viewBox:"0 0 "+h+" "+Y}),B=mt.makeSvgSpan([],[I],s);B.height=Y/1e3,B.style.width=z,B.style.height=X,V.push({type:"elem",elem:B})}else{if(V.push(P5(d,g,a)),V.push(mw),c===null){var W=F-y-w+2*W8;V.push(F5(u,W,s))}else{var D=(F-y-w-T)/2+2*W8;V.push(F5(u,D,s)),V.push(mw),V.push(P5(c,g,a)),V.push(mw),V.push(F5(u,D,s))}V.push(mw),V.push(P5(o,g,a))}var U=s.havingBaseStyle(Xr.TEXT),q=mt.makeVList({positionType:"bottom",positionData:L,children:V},U);return G7(mt.makeSpan(["delimsizing","mult"],[q],U),Xr.TEXT,s,i)},M5=80,O5=.08,D5=function(t,r,n,s,a){var i=xue(t,s,n),o=new qf(t,i),c=new h0([o],{width:"400em",height:gr(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return mt.makeSvgSpan(["hide-tail"],[c],a)},pde=function(t,r){var n=r.havingBaseSizing(),s=GW("\\surd",t*n.sizeMultiplier,HW,n),a=n.sizeMultiplier,i=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),o,c=0,u=0,d=0,f;return s.type==="small"?(d=1e3+1e3*i+M5,t<1?a=1:t<1.4&&(a=.7),c=(1+i+O5)/a,u=(1+i)/a,o=D5("sqrtMain",c,d,i,r),o.style.minWidth="0.853em",f=.833/a):s.type==="large"?(d=(1e3+M5)*tv[s.size],u=(tv[s.size]+i)/a,c=(tv[s.size]+i+O5)/a,o=D5("sqrtSize"+s.size,c,d,i,r),o.style.minWidth="1.02em",f=1/a):(c=t+i+O5,u=t+i,d=Math.floor(1e3*t+i)+M5,o=D5("sqrtTall",c,d,i,r),o.style.minWidth="0.742em",f=1.056),o.height=u,o.style.height=gr(c),{span:o,advanceWidth:f,ruleWidth:(r.fontMetrics().sqrtRuleThickness+i)*a}},zW=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],xde=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],WW=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],tv=[0,1.2,1.8,2.4,3],yde=function(t,r,n,s,a){if(t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle"),zW.includes(t)||WW.includes(t))return $W(t,r,!1,n,s,a);if(xde.includes(t))return UW(t,tv[r],!1,n,s,a);throw new nr("Illegal delimiter: '"+t+"'")},vde=[{type:"small",style:Xr.SCRIPTSCRIPT},{type:"small",style:Xr.SCRIPT},{type:"small",style:Xr.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],bde=[{type:"small",style:Xr.SCRIPTSCRIPT},{type:"small",style:Xr.SCRIPT},{type:"small",style:Xr.TEXT},{type:"stack"}],HW=[{type:"small",style:Xr.SCRIPTSCRIPT},{type:"small",style:Xr.SCRIPT},{type:"small",style:Xr.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],wde=function(t){if(t.type==="small")return"Main-Regular";if(t.type==="large")return"Size"+t.size+"-Regular";if(t.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},GW=function(t,r,n,s){for(var a=Math.min(2,3-s.style.size),i=a;i<n.length&&n[i].type!=="stack";i++){var o=Ly(t,wde(n[i]),"math"),c=o.height+o.depth;if(n[i].type==="small"){var u=s.havingBaseStyle(n[i].style);c*=u.sizeMultiplier}if(c>r)return n[i]}return n[n.length-1]},VW=function(t,r,n,s,a,i){t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle");var o;WW.includes(t)?o=vde:zW.includes(t)?o=HW:o=bde;var c=GW(t,r,o,s);return c.type==="small"?fde(t,c.style,n,s,a,i):c.type==="large"?$W(t,c.size,n,s,a,i):UW(t,r,n,s,a,i)},_de=function(t,r,n,s,a,i){var o=s.fontMetrics().axisHeight*s.sizeMultiplier,c=901,u=5/s.fontMetrics().ptPerEm,d=Math.max(r-o,n+o),f=Math.max(d/500*c,2*d-u);return VW(t,f,!0,s,a,i)},n0={sqrtImage:pde,sizedDelim:yde,sizeToMaxHeight:tv,customSizedDelim:VW,leftRightDelim:_de},BM={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Sde=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function lS(e,t){var r=iS(e);if(r&&Sde.includes(r.text))return r;throw r?new nr("Invalid delimiter '"+r.text+"' after '"+t.funcName+"'",e):new nr("Invalid delimiter type '"+e.type+"'",e)}Tr({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var r=lS(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:BM[e.funcName].size,mclass:BM[e.funcName].mclass,delim:r.text}},htmlBuilder:(e,t)=>e.delim==="."?mt.makeSpan([e.mclass]):n0.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];e.delim!=="."&&t.push(Ec(e.delim,e.mode));var r=new tr.MathNode("mo",t);e.mclass==="mopen"||e.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=gr(n0.sizeToMaxHeight[e.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function $M(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Tr({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=e.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new nr("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:lS(t[0],e).text,color:r}}});Tr({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=lS(t[0],e),n=e.parser;++n.leftrightDepth;var s=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var a=Sn(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:s,left:r.text,right:a.delim,rightColor:a.color}},htmlBuilder:(e,t)=>{$M(e);for(var r=oi(e.body,t,!0,["mopen","mclose"]),n=0,s=0,a=!1,i=0;i<r.length;i++)r[i].isMiddle?a=!0:(n=Math.max(r[i].height,n),s=Math.max(r[i].depth,s));n*=t.sizeMultiplier,s*=t.sizeMultiplier;var o;if(e.left==="."?o=Pv(t,["mopen"]):o=n0.leftRightDelim(e.left,n,s,t,e.mode,["mopen"]),r.unshift(o),a)for(var c=1;c<r.length;c++){var u=r[c],d=u.isMiddle;d&&(r[c]=n0.leftRightDelim(d.delim,n,s,d.options,e.mode,[]))}var f;if(e.right===".")f=Pv(t,["mclose"]);else{var h=e.rightColor?t.withColor(e.rightColor):t;f=n0.leftRightDelim(e.right,n,s,h,e.mode,["mclose"])}return r.push(f),mt.makeSpan(["minner"],r,t)},mathmlBuilder:(e,t)=>{$M(e);var r=xl(e.body,t);if(e.left!=="."){var n=new tr.MathNode("mo",[Ec(e.left,e.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(e.right!=="."){var s=new tr.MathNode("mo",[Ec(e.right,e.mode)]);s.setAttribute("fence","true"),e.rightColor&&s.setAttribute("mathcolor",e.rightColor),r.push(s)}return U7(r)}});Tr({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=lS(t[0],e);if(!e.parser.leftrightDepth)throw new nr("\\middle without preceding \\left",r);return{type:"middle",mode:e.parser.mode,delim:r.text}},htmlBuilder:(e,t)=>{var r;if(e.delim===".")r=Pv(t,[]);else{r=n0.sizedDelim(e.delim,1,t,e.mode,[]);var n={delim:e.delim,options:t};r.isMiddle=n}return r},mathmlBuilder:(e,t)=>{var r=e.delim==="\\vert"||e.delim==="|"?Ec("|","text"):Ec(e.delim,e.mode),n=new tr.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var V7=(e,t)=>{var r=mt.wrapFragment(zn(e.body,t),t),n=e.label.slice(1),s=t.sizeMultiplier,a,i=0,o=qn.isCharacterBox(e.body);if(n==="sout")a=mt.makeSpan(["stretchy","sout"]),a.height=t.fontMetrics().defaultRuleThickness/s,i=-.5*t.fontMetrics().xHeight;else if(n==="phase"){var c=Qs({number:.6,unit:"pt"},t),u=Qs({number:.35,unit:"ex"},t),d=t.havingBaseSizing();s=s/d.sizeMultiplier;var f=r.height+r.depth+c+u;r.style.paddingLeft=gr(f/2+c);var h=Math.floor(1e3*f*s),g=gue(h),p=new h0([new qf("phase",g)],{width:"400em",height:gr(h/1e3),viewBox:"0 0 400000 "+h,preserveAspectRatio:"xMinYMin slice"});a=mt.makeSvgSpan(["hide-tail"],[p],t),a.style.height=gr(f),i=r.depth+c+u}else{/cancel/.test(n)?o||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var y=0,v=0,C=0;/box/.test(n)?(C=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),y=t.fontMetrics().fboxsep+(n==="colorbox"?0:C),v=y):n==="angl"?(C=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness),y=4*C,v=Math.max(0,.25-r.depth)):(y=o?.2:0,v=y),a=g0.encloseSpan(r,n,y,v,t),/fbox|boxed|fcolorbox/.test(n)?(a.style.borderStyle="solid",a.style.borderWidth=gr(C)):n==="angl"&&C!==.049&&(a.style.borderTopWidth=gr(C),a.style.borderRightWidth=gr(C)),i=r.depth+v,e.backgroundColor&&(a.style.backgroundColor=e.backgroundColor,e.borderColor&&(a.style.borderColor=e.borderColor))}var S;if(e.backgroundColor)S=mt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:i},{type:"elem",elem:r,shift:0}]},t);else{var w=/cancel|phase/.test(n)?["svg-align"]:[];S=mt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:a,shift:i,wrapperClasses:w}]},t)}return/cancel/.test(n)&&(S.height=r.height,S.depth=r.depth),/cancel/.test(n)&&!o?mt.makeSpan(["mord","cancel-lap"],[S],t):mt.makeSpan(["mord"],[S],t)},q7=(e,t)=>{var r=0,n=new tr.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[_s(e.body,t)]);switch(e.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),e.label==="\\fcolorbox"){var s=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);n.setAttribute("style","border: "+s+"em solid "+String(e.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return e.backgroundColor&&n.setAttribute("mathbackground",e.backgroundColor),n};Tr({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,r){var{parser:n,funcName:s}=e,a=Sn(t[0],"color-token").color,i=t[1];return{type:"enclose",mode:n.mode,label:s,backgroundColor:a,body:i}},htmlBuilder:V7,mathmlBuilder:q7});Tr({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,r){var{parser:n,funcName:s}=e,a=Sn(t[0],"color-token").color,i=Sn(t[1],"color-token").color,o=t[2];return{type:"enclose",mode:n.mode,label:s,backgroundColor:i,borderColor:a,body:o}},htmlBuilder:V7,mathmlBuilder:q7});Tr({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\fbox",body:t[0]}}});Tr({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];return{type:"enclose",mode:r.mode,label:n,body:s}},htmlBuilder:V7,mathmlBuilder:q7});Tr({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\angl",body:t[0]}}});var qW={};function id(e){for(var{type:t,names:r,props:n,handler:s,htmlBuilder:a,mathmlBuilder:i}=e,o={type:t,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:s},c=0;c<r.length;++c)qW[r[c]]=o;a&&(D4[t]=a),i&&(R4[t]=i)}var KW={};function Ce(e,t){KW[e]=t}function UM(e){var t=[];e.consumeSpaces();var r=e.fetch().text;for(r==="\\relax"&&(e.consume(),e.consumeSpaces(),r=e.fetch().text);r==="\\hline"||r==="\\hdashline";)e.consume(),t.push(r==="\\hdashline"),e.consumeSpaces(),r=e.fetch().text;return t}var cS=e=>{var t=e.parser.settings;if(!t.displayMode)throw new nr("{"+e.envName+"} can be used only in display mode.")};function K7(e){if(e.indexOf("ed")===-1)return e.indexOf("*")===-1}function oh(e,t,r){var{hskipBeforeAndAfter:n,addJot:s,cols:a,arraystretch:i,colSeparationType:o,autoTag:c,singleRow:u,emptySingleRow:d,maxNumCols:f,leqno:h}=t;if(e.gullet.beginGroup(),u||e.gullet.macros.set("\\cr","\\\\\\relax"),!i){var g=e.gullet.expandMacroAsText("\\arraystretch");if(g==null)i=1;else if(i=parseFloat(g),!i||i<0)throw new nr("Invalid \\arraystretch: "+g)}e.gullet.beginGroup();var p=[],y=[p],v=[],C=[],S=c!=null?[]:void 0;function w(){c&&e.gullet.macros.set("\\@eqnsw","1",!0)}function T(){S&&(e.gullet.macros.get("\\df@tag")?(S.push(e.subparse([new $l("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):S.push(!!c&&e.gullet.macros.get("\\@eqnsw")==="1"))}for(w(),C.push(UM(e));;){var N=e.parseExpression(!1,u?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),N={type:"ordgroup",mode:e.mode,body:N},r&&(N={type:"styling",mode:e.mode,style:r,body:[N]}),p.push(N);var A=e.fetch().text;if(A==="&"){if(f&&p.length===f){if(u||o)throw new nr("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else if(A==="\\end"){T(),p.length===1&&N.type==="styling"&&N.body[0].body.length===0&&(y.length>1||!d)&&y.pop(),C.length<y.length+1&&C.push([]);break}else if(A==="\\\\"){e.consume();var P=void 0;e.gullet.future().text!==" "&&(P=e.parseSizeGroup(!0)),v.push(P?P.value:null),T(),C.push(UM(e)),p=[],y.push(p),w()}else throw new nr("Expected & or \\\\ or \\cr or \\end",e.nextToken)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:s,arraystretch:i,body:y,cols:a,rowGaps:v,hskipBeforeAndAfter:n,hLinesBeforeRow:C,colSeparationType:o,tags:S,leqno:h}}function Y7(e){return e.slice(0,1)==="d"?"display":"text"}var od=function(t,r){var n,s,a=t.body.length,i=t.hLinesBeforeRow,o=0,c=new Array(a),u=[],d=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),f=1/r.fontMetrics().ptPerEm,h=5*f;if(t.colSeparationType&&t.colSeparationType==="small"){var g=r.havingStyle(Xr.SCRIPT).sizeMultiplier;h=.2778*(g/r.sizeMultiplier)}var p=t.colSeparationType==="CD"?Qs({number:3,unit:"ex"},r):12*f,y=3*f,v=t.arraystretch*p,C=.7*v,S=.3*v,w=0;function T(tt){for(var Pe=0;Pe<tt.length;++Pe)Pe>0&&(w+=.25),u.push({pos:w,isDashed:tt[Pe]})}for(T(i[0]),n=0;n<t.body.length;++n){var N=t.body[n],A=C,P=S;o<N.length&&(o=N.length);var j=new Array(N.length);for(s=0;s<N.length;++s){var F=zn(N[s],r);P<F.depth&&(P=F.depth),A<F.height&&(A=F.height),j[s]=F}var R=t.rowGaps[n],L=0;R&&(L=Qs(R,r),L>0&&(L+=S,P<L&&(P=L),L=0)),t.addJot&&(P+=y),j.height=A,j.depth=P,w+=A,j.pos=w,w+=P+L,c[n]=j,T(i[n+1])}var V=w/2+r.fontMetrics().axisHeight,Z=t.cols||[],Y=[],re,ue,z=[];if(t.tags&&t.tags.some(tt=>tt))for(n=0;n<a;++n){var X=c[n],I=X.pos-V,B=t.tags[n],W=void 0;B===!0?W=mt.makeSpan(["eqn-num"],[],r):B===!1?W=mt.makeSpan([],[],r):W=mt.makeSpan([],oi(B,r,!0),r),W.depth=X.depth,W.height=X.height,z.push({type:"elem",elem:W,shift:I})}for(s=0,ue=0;s<o||ue<Z.length;++s,++ue){for(var D=Z[ue]||{},U=!0;D.type==="separator";){if(U||(re=mt.makeSpan(["arraycolsep"],[]),re.style.width=gr(r.fontMetrics().doubleRuleSep),Y.push(re)),D.separator==="|"||D.separator===":"){var q=D.separator==="|"?"solid":"dashed",H=mt.makeSpan(["vertical-separator"],[],r);H.style.height=gr(w),H.style.borderRightWidth=gr(d),H.style.borderRightStyle=q,H.style.margin="0 "+gr(-d/2);var te=w-V;te&&(H.style.verticalAlign=gr(-te)),Y.push(H)}else throw new nr("Invalid separator type: "+D.separator);ue++,D=Z[ue]||{},U=!1}if(!(s>=o)){var Q=void 0;(s>0||t.hskipBeforeAndAfter)&&(Q=qn.deflt(D.pregap,h),Q!==0&&(re=mt.makeSpan(["arraycolsep"],[]),re.style.width=gr(Q),Y.push(re)));var ae=[];for(n=0;n<a;++n){var ce=c[n],me=ce[s];if(me){var xe=ce.pos-V;me.depth=ce.depth,me.height=ce.height,ae.push({type:"elem",elem:me,shift:xe})}}ae=mt.makeVList({positionType:"individualShift",children:ae},r),ae=mt.makeSpan(["col-align-"+(D.align||"c")],[ae]),Y.push(ae),(s<o-1||t.hskipBeforeAndAfter)&&(Q=qn.deflt(D.postgap,h),Q!==0&&(re=mt.makeSpan(["arraycolsep"],[]),re.style.width=gr(Q),Y.push(re)))}}if(c=mt.makeSpan(["mtable"],Y),u.length>0){for(var se=mt.makeLineSpan("hline",r,d),De=mt.makeLineSpan("hdashline",r,d),He=[{type:"elem",elem:c,shift:0}];u.length>0;){var rt=u.pop(),_t=rt.pos-V;rt.isDashed?He.push({type:"elem",elem:De,shift:_t}):He.push({type:"elem",elem:se,shift:_t})}c=mt.makeVList({positionType:"individualShift",children:He},r)}if(z.length===0)return mt.makeSpan(["mord"],[c],r);var Ke=mt.makeVList({positionType:"individualShift",children:z},r);return Ke=mt.makeSpan(["tag"],[Ke],r),mt.makeFragment([c,Ke])},kde={c:"center ",l:"left ",r:"right "},ld=function(t,r){for(var n=[],s=new tr.MathNode("mtd",[],["mtr-glue"]),a=new tr.MathNode("mtd",[],["mml-eqn-num"]),i=0;i<t.body.length;i++){for(var o=t.body[i],c=[],u=0;u<o.length;u++)c.push(new tr.MathNode("mtd",[_s(o[u],r)]));t.tags&&t.tags[i]&&(c.unshift(s),c.push(s),t.leqno?c.unshift(a):c.push(a)),n.push(new tr.MathNode("mtr",c))}var d=new tr.MathNode("mtable",n),f=t.arraystretch===.5?.1:.16+t.arraystretch-1+(t.addJot?.09:0);d.setAttribute("rowspacing",gr(f));var h="",g="";if(t.cols&&t.cols.length>0){var p=t.cols,y="",v=!1,C=0,S=p.length;p[0].type==="separator"&&(h+="top ",C=1),p[p.length-1].type==="separator"&&(h+="bottom ",S-=1);for(var w=C;w<S;w++)p[w].type==="align"?(g+=kde[p[w].align],v&&(y+="none "),v=!0):p[w].type==="separator"&&v&&(y+=p[w].separator==="|"?"solid ":"dashed ",v=!1);d.setAttribute("columnalign",g.trim()),/[sd]/.test(y)&&d.setAttribute("columnlines",y.trim())}if(t.colSeparationType==="align"){for(var T=t.cols||[],N="",A=1;A<T.length;A++)N+=A%2?"0em ":"1em ";d.setAttribute("columnspacing",N.trim())}else t.colSeparationType==="alignat"||t.colSeparationType==="gather"?d.setAttribute("columnspacing","0em"):t.colSeparationType==="small"?d.setAttribute("columnspacing","0.2778em"):t.colSeparationType==="CD"?d.setAttribute("columnspacing","0.5em"):d.setAttribute("columnspacing","1em");var P="",j=t.hLinesBeforeRow;h+=j[0].length>0?"left ":"",h+=j[j.length-1].length>0?"right ":"";for(var F=1;F<j.length-1;F++)P+=j[F].length===0?"none ":j[F][0]?"dashed ":"solid ";return/[sd]/.test(P)&&d.setAttribute("rowlines",P.trim()),h!==""&&(d=new tr.MathNode("menclose",[d]),d.setAttribute("notation",h.trim())),t.arraystretch&&t.arraystretch<1&&(d=new tr.MathNode("mstyle",[d]),d.setAttribute("scriptlevel","1")),d},YW=function(t,r){t.envName.indexOf("ed")===-1&&cS(t);var n=[],s=t.envName.indexOf("at")>-1?"alignat":"align",a=t.envName==="split",i=oh(t.parser,{cols:n,addJot:!0,autoTag:a?void 0:K7(t.envName),emptySingleRow:!0,colSeparationType:s,maxNumCols:a?2:void 0,leqno:t.parser.settings.leqno},"display"),o,c=0,u={type:"ordgroup",mode:t.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var d="",f=0;f<r[0].body.length;f++){var h=Sn(r[0].body[f],"textord");d+=h.text}o=Number(d),c=o*2}var g=!c;i.body.forEach(function(C){for(var S=1;S<C.length;S+=2){var w=Sn(C[S],"styling"),T=Sn(w.body[0],"ordgroup");T.body.unshift(u)}if(g)c<C.length&&(c=C.length);else{var N=C.length/2;if(o<N)throw new nr("Too many math in a row: "+("expected "+o+", but got "+N),C[0])}});for(var p=0;p<c;++p){var y="r",v=0;p%2===1?y="l":p>0&&g&&(v=1),n[p]={type:"align",align:y,pregap:v,postgap:0}}return i.colSeparationType=g?"align":"alignat",i};id({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var r=iS(t[0]),n=r?[t[0]]:Sn(t[0],"ordgroup").body,s=n.map(function(i){var o=W7(i),c=o.text;if("lcr".indexOf(c)!==-1)return{type:"align",align:c};if(c==="|")return{type:"separator",separator:"|"};if(c===":")return{type:"separator",separator:":"};throw new nr("Unknown column alignment: "+c,i)}),a={cols:s,hskipBeforeAndAfter:!0,maxNumCols:s.length};return oh(e.parser,a,Y7(e.envName))},htmlBuilder:od,mathmlBuilder:ld});id({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(e.envName.charAt(e.envName.length-1)==="*"){var s=e.parser;if(s.consumeSpaces(),s.fetch().text==="["){if(s.consume(),s.consumeSpaces(),r=s.fetch().text,"lcr".indexOf(r)===-1)throw new nr("Expected l or c or r",s.nextToken);s.consume(),s.consumeSpaces(),s.expect("]"),s.consume(),n.cols=[{type:"align",align:r}]}}var a=oh(e.parser,n,Y7(e.envName)),i=Math.max(0,...a.body.map(o=>o.length));return a.cols=new Array(i).fill({type:"align",align:r}),t?{type:"leftright",mode:e.mode,body:[a],left:t[0],right:t[1],rightColor:void 0}:a},htmlBuilder:od,mathmlBuilder:ld});id({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t={arraystretch:.5},r=oh(e.parser,t,"script");return r.colSeparationType="small",r},htmlBuilder:od,mathmlBuilder:ld});id({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var r=iS(t[0]),n=r?[t[0]]:Sn(t[0],"ordgroup").body,s=n.map(function(i){var o=W7(i),c=o.text;if("lc".indexOf(c)!==-1)return{type:"align",align:c};throw new nr("Unknown column alignment: "+c,i)});if(s.length>1)throw new nr("{subarray} can contain only one column");var a={cols:s,hskipBeforeAndAfter:!1,arraystretch:.5};if(a=oh(e.parser,a,"script"),a.body.length>0&&a.body[0].length>1)throw new nr("{subarray} can contain only one column");return a},htmlBuilder:od,mathmlBuilder:ld});id({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=oh(e.parser,t,Y7(e.envName));return{type:"leftright",mode:e.mode,body:[r],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:od,mathmlBuilder:ld});id({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:YW,htmlBuilder:od,mathmlBuilder:ld});id({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){["gather","gather*"].includes(e.envName)&&cS(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:K7(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return oh(e.parser,t,"display")},htmlBuilder:od,mathmlBuilder:ld});id({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:YW,htmlBuilder:od,mathmlBuilder:ld});id({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){cS(e);var t={autoTag:K7(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return oh(e.parser,t,"display")},htmlBuilder:od,mathmlBuilder:ld});id({type:"array",names:["CD"],props:{numArgs:0},handler(e){return cS(e),ude(e.parser)},htmlBuilder:od,mathmlBuilder:ld});Ce("\\nonumber","\\gdef\\@eqnsw{0}");Ce("\\notag","\\nonumber");Tr({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new nr(e.funcName+" valid only within array environment")}});var zM=qW;Tr({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];if(s.type!=="ordgroup")throw new nr("Invalid environment name",s);for(var a="",i=0;i<s.body.length;++i)a+=Sn(s.body[i],"textord").text;if(n==="\\begin"){if(!zM.hasOwnProperty(a))throw new nr("No such environment: "+a,s);var o=zM[a],{args:c,optArgs:u}=r.parseArguments("\\begin{"+a+"}",o),d={mode:r.mode,envName:a,parser:r},f=o.handler(d,c,u);r.expect("\\end",!1);var h=r.nextToken,g=Sn(r.parseFunction(),"environment");if(g.name!==a)throw new nr("Mismatch: \\begin{"+a+"} matched by \\end{"+g.name+"}",h);return f}return{type:"environment",mode:r.mode,name:a,nameGroup:s}}});var XW=(e,t)=>{var r=e.font,n=t.withFont(r);return zn(e.body,n)},JW=(e,t)=>{var r=e.font,n=t.withFont(r);return _s(e.body,n)},WM={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Tr({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=I4(t[0]),a=n;return a in WM&&(a=WM[a]),{type:"font",mode:r.mode,font:a.slice(1),body:s}},htmlBuilder:XW,mathmlBuilder:JW});Tr({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:r}=e,n=t[0],s=qn.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:oS(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:s}}});Tr({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n,breakOnTokenText:s}=e,{mode:a}=r,i=r.parseExpression(!0,s),o="math"+n.slice(1);return{type:"font",mode:a,font:o,body:{type:"ordgroup",mode:r.mode,body:i}}},htmlBuilder:XW,mathmlBuilder:JW});var QW=(e,t)=>{var r=t;return e==="display"?r=r.id>=Xr.SCRIPT.id?r.text():Xr.DISPLAY:e==="text"&&r.size===Xr.DISPLAY.size?r=Xr.TEXT:e==="script"?r=Xr.SCRIPT:e==="scriptscript"&&(r=Xr.SCRIPTSCRIPT),r},X7=(e,t)=>{var r=QW(e.size,t.style),n=r.fracNum(),s=r.fracDen(),a;a=t.havingStyle(n);var i=zn(e.numer,a,t);if(e.continued){var o=8.5/t.fontMetrics().ptPerEm,c=3.5/t.fontMetrics().ptPerEm;i.height=i.height<o?o:i.height,i.depth=i.depth<c?c:i.depth}a=t.havingStyle(s);var u=zn(e.denom,a,t),d,f,h;e.hasBarLine?(e.barSize?(f=Qs(e.barSize,t),d=mt.makeLineSpan("frac-line",t,f)):d=mt.makeLineSpan("frac-line",t),f=d.height,h=d.height):(d=null,f=0,h=t.fontMetrics().defaultRuleThickness);var g,p,y;r.size===Xr.DISPLAY.size||e.size==="display"?(g=t.fontMetrics().num1,f>0?p=3*h:p=7*h,y=t.fontMetrics().denom1):(f>0?(g=t.fontMetrics().num2,p=h):(g=t.fontMetrics().num3,p=3*h),y=t.fontMetrics().denom2);var v;if(d){var S=t.fontMetrics().axisHeight;g-i.depth-(S+.5*f)<p&&(g+=p-(g-i.depth-(S+.5*f))),S-.5*f-(u.height-y)<p&&(y+=p-(S-.5*f-(u.height-y)));var w=-(S-.5*f);v=mt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:y},{type:"elem",elem:d,shift:w},{type:"elem",elem:i,shift:-g}]},t)}else{var C=g-i.depth-(u.height-y);C<p&&(g+=.5*(p-C),y+=.5*(p-C)),v=mt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:y},{type:"elem",elem:i,shift:-g}]},t)}a=t.havingStyle(r),v.height*=a.sizeMultiplier/t.sizeMultiplier,v.depth*=a.sizeMultiplier/t.sizeMultiplier;var T;r.size===Xr.DISPLAY.size?T=t.fontMetrics().delim1:r.size===Xr.SCRIPTSCRIPT.size?T=t.havingStyle(Xr.SCRIPT).fontMetrics().delim2:T=t.fontMetrics().delim2;var N,A;return e.leftDelim==null?N=Pv(t,["mopen"]):N=n0.customSizedDelim(e.leftDelim,T,!0,t.havingStyle(r),e.mode,["mopen"]),e.continued?A=mt.makeSpan([]):e.rightDelim==null?A=Pv(t,["mclose"]):A=n0.customSizedDelim(e.rightDelim,T,!0,t.havingStyle(r),e.mode,["mclose"]),mt.makeSpan(["mord"].concat(a.sizingClasses(t)),[N,mt.makeSpan(["mfrac"],[v]),A],t)},J7=(e,t)=>{var r=new tr.MathNode("mfrac",[_s(e.numer,t),_s(e.denom,t)]);if(!e.hasBarLine)r.setAttribute("linethickness","0px");else if(e.barSize){var n=Qs(e.barSize,t);r.setAttribute("linethickness",gr(n))}var s=QW(e.size,t.style);if(s.size!==t.style.size){r=new tr.MathNode("mstyle",[r]);var a=s.size===Xr.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",a),r.setAttribute("scriptlevel","0")}if(e.leftDelim!=null||e.rightDelim!=null){var i=[];if(e.leftDelim!=null){var o=new tr.MathNode("mo",[new tr.TextNode(e.leftDelim.replace("\\",""))]);o.setAttribute("fence","true"),i.push(o)}if(i.push(r),e.rightDelim!=null){var c=new tr.MathNode("mo",[new tr.TextNode(e.rightDelim.replace("\\",""))]);c.setAttribute("fence","true"),i.push(c)}return U7(i)}return r};Tr({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0],a=t[1],i,o=null,c=null,u="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":i=!0;break;case"\\\\atopfrac":i=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":i=!1,o="(",c=")";break;case"\\\\bracefrac":i=!1,o="\\{",c="\\}";break;case"\\\\brackfrac":i=!1,o="[",c="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":u="display";break;case"\\tfrac":case"\\tbinom":u="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:s,denom:a,hasBarLine:i,leftDelim:o,rightDelim:c,size:u,barSize:null}},htmlBuilder:X7,mathmlBuilder:J7});Tr({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0],a=t[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:s,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Tr({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var{parser:t,funcName:r,token:n}=e,s;switch(r){case"\\over":s="\\frac";break;case"\\choose":s="\\binom";break;case"\\atop":s="\\\\atopfrac";break;case"\\brace":s="\\\\bracefrac";break;case"\\brack":s="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:t.mode,replaceWith:s,token:n}}});var HM=["display","text","script","scriptscript"],GM=function(t){var r=null;return t.length>0&&(r=t,r=r==="."?null:r),r};Tr({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var{parser:r}=e,n=t[4],s=t[5],a=I4(t[0]),i=a.type==="atom"&&a.family==="open"?GM(a.text):null,o=I4(t[1]),c=o.type==="atom"&&o.family==="close"?GM(o.text):null,u=Sn(t[2],"size"),d,f=null;u.isBlank?d=!0:(f=u.value,d=f.number>0);var h="auto",g=t[3];if(g.type==="ordgroup"){if(g.body.length>0){var p=Sn(g.body[0],"textord");h=HM[Number(p.text)]}}else g=Sn(g,"textord"),h=HM[Number(g.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:s,continued:!1,hasBarLine:d,barSize:f,leftDelim:i,rightDelim:c,size:h}},htmlBuilder:X7,mathmlBuilder:J7});Tr({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:r,funcName:n,token:s}=e;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:Sn(t[0],"size").value,token:s}}});Tr({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0],a=eue(Sn(t[1],"infix").size),i=t[2],o=a.number>0;return{type:"genfrac",mode:r.mode,numer:s,denom:i,continued:!1,hasBarLine:o,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:X7,mathmlBuilder:J7});var ZW=(e,t)=>{var r=t.style,n,s;e.type==="supsub"?(n=e.sup?zn(e.sup,t.havingStyle(r.sup()),t):zn(e.sub,t.havingStyle(r.sub()),t),s=Sn(e.base,"horizBrace")):s=Sn(e,"horizBrace");var a=zn(s.base,t.havingBaseStyle(Xr.DISPLAY)),i=g0.svgSpan(s,t),o;if(s.isOver?(o=mt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:i}]},t),o.children[0].children[0].children[1].classes.push("svg-align")):(o=mt.makeVList({positionType:"bottom",positionData:a.depth+.1+i.height,children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:a}]},t),o.children[0].children[0].children[0].classes.push("svg-align")),n){var c=mt.makeSpan(["mord",s.isOver?"mover":"munder"],[o],t);s.isOver?o=mt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c},{type:"kern",size:.2},{type:"elem",elem:n}]},t):o=mt.makeVList({positionType:"bottom",positionData:c.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:c}]},t)}return mt.makeSpan(["mord",s.isOver?"mover":"munder"],[o],t)},Cde=(e,t)=>{var r=g0.mathMLnode(e.label);return new tr.MathNode(e.isOver?"mover":"munder",[_s(e.base,t),r])};Tr({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:t[0]}},htmlBuilder:ZW,mathmlBuilder:Cde});Tr({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[1],s=Sn(t[0],"url").url;return r.settings.isTrusted({command:"\\href",url:s})?{type:"href",mode:r.mode,href:s,body:ja(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var r=oi(e.body,t,!1);return mt.makeAnchor(e.href,[],r,t)},mathmlBuilder:(e,t)=>{var r=Kf(e.body,t);return r instanceof Rl||(r=new Rl("mrow",[r])),r.setAttribute("href",e.href),r}});Tr({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=Sn(t[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var s=[],a=0;a<n.length;a++){var i=n[a];i==="~"&&(i="\\textasciitilde"),s.push({type:"textord",mode:"text",text:i})}var o={type:"text",mode:r.mode,font:"\\texttt",body:s};return{type:"href",mode:r.mode,href:n,body:ja(o)}}});Tr({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:r}=e;return{type:"hbox",mode:r.mode,body:ja(t[0])}},htmlBuilder(e,t){var r=oi(e.body,t,!1);return mt.makeFragment(r)},mathmlBuilder(e,t){return new tr.MathNode("mrow",xl(e.body,t))}});Tr({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n,token:s}=e,a=Sn(t[0],"raw").string,i=t[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var o,c={};switch(n){case"\\htmlClass":c.class=a,o={command:"\\htmlClass",class:a};break;case"\\htmlId":c.id=a,o={command:"\\htmlId",id:a};break;case"\\htmlStyle":c.style=a,o={command:"\\htmlStyle",style:a};break;case"\\htmlData":{for(var u=a.split(","),d=0;d<u.length;d++){var f=u[d].split("=");if(f.length!==2)throw new nr("Error parsing key-value for \\htmlData");c["data-"+f[0].trim()]=f[1].trim()}o={command:"\\htmlData",attributes:c};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(o)?{type:"html",mode:r.mode,attributes:c,body:ja(i)}:r.formatUnsupportedCmd(n)},htmlBuilder:(e,t)=>{var r=oi(e.body,t,!1),n=["enclosing"];e.attributes.class&&n.push(...e.attributes.class.trim().split(/\s+/));var s=mt.makeSpan(n,r,t);for(var a in e.attributes)a!=="class"&&e.attributes.hasOwnProperty(a)&&s.setAttribute(a,e.attributes[a]);return s},mathmlBuilder:(e,t)=>Kf(e.body,t)});Tr({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"htmlmathml",mode:r.mode,html:ja(t[0]),mathml:ja(t[1])}},htmlBuilder:(e,t)=>{var r=oi(e.html,t,!1);return mt.makeFragment(r)},mathmlBuilder:(e,t)=>Kf(e.mathml,t)});var R5=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!r)throw new nr("Invalid size: '"+t+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!yW(n))throw new nr("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};Tr({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,r)=>{var{parser:n}=e,s={number:0,unit:"em"},a={number:.9,unit:"em"},i={number:0,unit:"em"},o="";if(r[0])for(var c=Sn(r[0],"raw").string,u=c.split(","),d=0;d<u.length;d++){var f=u[d].split("=");if(f.length===2){var h=f[1].trim();switch(f[0].trim()){case"alt":o=h;break;case"width":s=R5(h);break;case"height":a=R5(h);break;case"totalheight":i=R5(h);break;default:throw new nr("Invalid key: '"+f[0]+"' in \\includegraphics.")}}}var g=Sn(t[0],"url").url;return o===""&&(o=g,o=o.replace(/^.*[\\/]/,""),o=o.substring(0,o.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:g})?{type:"includegraphics",mode:n.mode,alt:o,width:s,height:a,totalheight:i,src:g}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var r=Qs(e.height,t),n=0;e.totalheight.number>0&&(n=Qs(e.totalheight,t)-r);var s=0;e.width.number>0&&(s=Qs(e.width,t));var a={height:gr(r+n)};s>0&&(a.width=gr(s)),n>0&&(a.verticalAlign=gr(-n));var i=new Cue(e.src,e.alt,a);return i.height=r,i.depth=n,i},mathmlBuilder:(e,t)=>{var r=new tr.MathNode("mglyph",[]);r.setAttribute("alt",e.alt);var n=Qs(e.height,t),s=0;if(e.totalheight.number>0&&(s=Qs(e.totalheight,t)-n,r.setAttribute("valign",gr(-s))),r.setAttribute("height",gr(n+s)),e.width.number>0){var a=Qs(e.width,t);r.setAttribute("width",gr(a))}return r.setAttribute("src",e.src),r}});Tr({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,s=Sn(t[0],"size");if(r.settings.strict){var a=n[1]==="m",i=s.value.unit==="mu";a?(i||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+s.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):i&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:s.value}},htmlBuilder(e,t){return mt.makeGlue(e.dimension,t)},mathmlBuilder(e,t){var r=Qs(e.dimension,t);return new tr.SpaceNode(r)}});Tr({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:s}},htmlBuilder:(e,t)=>{var r;e.alignment==="clap"?(r=mt.makeSpan([],[zn(e.body,t)]),r=mt.makeSpan(["inner"],[r],t)):r=mt.makeSpan(["inner"],[zn(e.body,t)]);var n=mt.makeSpan(["fix"],[]),s=mt.makeSpan([e.alignment],[r,n],t),a=mt.makeSpan(["strut"]);return a.style.height=gr(s.height+s.depth),s.depth&&(a.style.verticalAlign=gr(-s.depth)),s.children.unshift(a),s=mt.makeSpan(["thinbox"],[s],t),mt.makeSpan(["mord","vbox"],[s],t)},mathmlBuilder:(e,t)=>{var r=new tr.MathNode("mpadded",[_s(e.body,t)]);if(e.alignment!=="rlap"){var n=e.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});Tr({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:r,parser:n}=e,s=n.mode;n.switchMode("math");var a=r==="\\("?"\\)":"$",i=n.parseExpression(!1,a);return n.expect(a),n.switchMode(s),{type:"styling",mode:n.mode,style:"text",body:i}}});Tr({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new nr("Mismatched "+e.funcName)}});var VM=(e,t)=>{switch(t.style.size){case Xr.DISPLAY.size:return e.display;case Xr.TEXT.size:return e.text;case Xr.SCRIPT.size:return e.script;case Xr.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};Tr({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"mathchoice",mode:r.mode,display:ja(t[0]),text:ja(t[1]),script:ja(t[2]),scriptscript:ja(t[3])}},htmlBuilder:(e,t)=>{var r=VM(e,t),n=oi(r,t,!1);return mt.makeFragment(n)},mathmlBuilder:(e,t)=>{var r=VM(e,t);return Kf(r,t)}});var eH=(e,t,r,n,s,a,i)=>{e=mt.makeSpan([],[e]);var o=r&&qn.isCharacterBox(r),c,u;if(t){var d=zn(t,n.havingStyle(s.sup()),n);u={elem:d,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-d.depth)}}if(r){var f=zn(r,n.havingStyle(s.sub()),n);c={elem:f,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-f.height)}}var h;if(u&&c){var g=n.fontMetrics().bigOpSpacing5+c.elem.height+c.elem.depth+c.kern+e.depth+i;h=mt.makeVList({positionType:"bottom",positionData:g,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:c.elem,marginLeft:gr(-a)},{type:"kern",size:c.kern},{type:"elem",elem:e},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:gr(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(c){var p=e.height-i;h=mt.makeVList({positionType:"top",positionData:p,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:c.elem,marginLeft:gr(-a)},{type:"kern",size:c.kern},{type:"elem",elem:e}]},n)}else if(u){var y=e.depth+i;h=mt.makeVList({positionType:"bottom",positionData:y,children:[{type:"elem",elem:e},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:gr(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return e;var v=[h];if(c&&a!==0&&!o){var C=mt.makeSpan(["mspace"],[],n);C.style.marginRight=gr(a),v.unshift(C)}return mt.makeSpan(["mop","op-limits"],v,n)},tH=["\\smallint"],C1=(e,t)=>{var r,n,s=!1,a;e.type==="supsub"?(r=e.sup,n=e.sub,a=Sn(e.base,"op"),s=!0):a=Sn(e,"op");var i=t.style,o=!1;i.size===Xr.DISPLAY.size&&a.symbol&&!tH.includes(a.name)&&(o=!0);var c;if(a.symbol){var u=o?"Size2-Regular":"Size1-Regular",d="";if((a.name==="\\oiint"||a.name==="\\oiiint")&&(d=a.name.slice(1),a.name=d==="oiint"?"\\iint":"\\iiint"),c=mt.makeSymbol(a.name,u,"math",t,["mop","op-symbol",o?"large-op":"small-op"]),d.length>0){var f=c.italic,h=mt.staticSvg(d+"Size"+(o?"2":"1"),t);c=mt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:0},{type:"elem",elem:h,shift:o?.08:0}]},t),a.name="\\"+d,c.classes.unshift("mop"),c.italic=f}}else if(a.body){var g=oi(a.body,t,!0);g.length===1&&g[0]instanceof Tc?(c=g[0],c.classes[0]="mop"):c=mt.makeSpan(["mop"],g,t)}else{for(var p=[],y=1;y<a.name.length;y++)p.push(mt.mathsym(a.name[y],a.mode,t));c=mt.makeSpan(["mop"],p,t)}var v=0,C=0;return(c instanceof Tc||a.name==="\\oiint"||a.name==="\\oiiint")&&!a.suppressBaseShift&&(v=(c.height-c.depth)/2-t.fontMetrics().axisHeight,C=c.italic),s?eH(c,r,n,t,i,C,v):(v&&(c.style.position="relative",c.style.top=gr(v)),c)},S2=(e,t)=>{var r;if(e.symbol)r=new Rl("mo",[Ec(e.name,e.mode)]),tH.includes(e.name)&&r.setAttribute("largeop","false");else if(e.body)r=new Rl("mo",xl(e.body,t));else{r=new Rl("mi",[new qu(e.name.slice(1))]);var n=new Rl("mo",[Ec("","text")]);e.parentIsSupSub?r=new Rl("mrow",[r,n]):r=AW([r,n])}return r},Tde={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};Tr({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=n;return s.length===1&&(s=Tde[s]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:s}},htmlBuilder:C1,mathmlBuilder:S2});Tr({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ja(n)}},htmlBuilder:C1,mathmlBuilder:S2});var Ede={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};Tr({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:C1,mathmlBuilder:S2});Tr({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:C1,mathmlBuilder:S2});Tr({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e,n=r;return n.length===1&&(n=Ede[n]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:C1,mathmlBuilder:S2});var rH=(e,t)=>{var r,n,s=!1,a;e.type==="supsub"?(r=e.sup,n=e.sub,a=Sn(e.base,"operatorname"),s=!0):a=Sn(e,"operatorname");var i;if(a.body.length>0){for(var o=a.body.map(f=>{var h=f.text;return typeof h=="string"?{type:"textord",mode:f.mode,text:h}:f}),c=oi(o,t.withFont("mathrm"),!0),u=0;u<c.length;u++){var d=c[u];d instanceof Tc&&(d.text=d.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}i=mt.makeSpan(["mop"],c,t)}else i=mt.makeSpan(["mop"],[],t);return s?eH(i,r,n,t,t.style,0,0):i},Nde=(e,t)=>{for(var r=xl(e.body,t.withFont("mathrm")),n=!0,s=0;s<r.length;s++){var a=r[s];if(!(a instanceof tr.SpaceNode))if(a instanceof tr.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var i=a.children[0];a.children.length===1&&i instanceof tr.TextNode?i.text=i.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var o=r.map(d=>d.toText()).join("");r=[new tr.TextNode(o)]}var c=new tr.MathNode("mi",r);c.setAttribute("mathvariant","normal");var u=new tr.MathNode("mo",[Ec("","text")]);return e.parentIsSupSub?new tr.MathNode("mrow",[c,u]):tr.newDocumentFragment([c,u])};Tr({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0];return{type:"operatorname",mode:r.mode,body:ja(s),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:rH,mathmlBuilder:Nde});Ce("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");Zm({type:"ordgroup",htmlBuilder(e,t){return e.semisimple?mt.makeFragment(oi(e.body,t,!1)):mt.makeSpan(["mord"],oi(e.body,t,!0),t)},mathmlBuilder(e,t){return Kf(e.body,t,!0)}});Tr({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:r}=e,n=t[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(e,t){var r=zn(e.body,t.havingCrampedStyle()),n=mt.makeLineSpan("overline-line",t),s=t.fontMetrics().defaultRuleThickness,a=mt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*s},{type:"elem",elem:n},{type:"kern",size:s}]},t);return mt.makeSpan(["mord","overline"],[a],t)},mathmlBuilder(e,t){var r=new tr.MathNode("mo",[new tr.TextNode("")]);r.setAttribute("stretchy","true");var n=new tr.MathNode("mover",[_s(e.body,t),r]);return n.setAttribute("accent","true"),n}});Tr({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"phantom",mode:r.mode,body:ja(n)}},htmlBuilder:(e,t)=>{var r=oi(e.body,t.withPhantom(),!1);return mt.makeFragment(r)},mathmlBuilder:(e,t)=>{var r=xl(e.body,t);return new tr.MathNode("mphantom",r)}});Tr({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=mt.makeSpan([],[zn(e.body,t.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=mt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t),mt.makeSpan(["mord"],[r],t)},mathmlBuilder:(e,t)=>{var r=xl(ja(e.body),t),n=new tr.MathNode("mphantom",r),s=new tr.MathNode("mpadded",[n]);return s.setAttribute("height","0px"),s.setAttribute("depth","0px"),s}});Tr({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=mt.makeSpan(["inner"],[zn(e.body,t.withPhantom())]),n=mt.makeSpan(["fix"],[]);return mt.makeSpan(["mord","rlap"],[r,n],t)},mathmlBuilder:(e,t)=>{var r=xl(ja(e.body),t),n=new tr.MathNode("mphantom",r),s=new tr.MathNode("mpadded",[n]);return s.setAttribute("width","0px"),s}});Tr({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e,n=Sn(t[0],"size").value,s=t[1];return{type:"raisebox",mode:r.mode,dy:n,body:s}},htmlBuilder(e,t){var r=zn(e.body,t),n=Qs(e.dy,t);return mt.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){var r=new tr.MathNode("mpadded",[_s(e.body,t)]),n=e.dy.number+e.dy.unit;return r.setAttribute("voffset",n),r}});Tr({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}});Tr({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(e,t,r){var{parser:n}=e,s=r[0],a=Sn(t[0],"size"),i=Sn(t[1],"size");return{type:"rule",mode:n.mode,shift:s&&Sn(s,"size").value,width:a.value,height:i.value}},htmlBuilder(e,t){var r=mt.makeSpan(["mord","rule"],[],t),n=Qs(e.width,t),s=Qs(e.height,t),a=e.shift?Qs(e.shift,t):0;return r.style.borderRightWidth=gr(n),r.style.borderTopWidth=gr(s),r.style.bottom=gr(a),r.width=n,r.height=s+a,r.depth=-a,r.maxFontSize=s*1.125*t.sizeMultiplier,r},mathmlBuilder(e,t){var r=Qs(e.width,t),n=Qs(e.height,t),s=e.shift?Qs(e.shift,t):0,a=t.color&&t.getColor()||"black",i=new tr.MathNode("mspace");i.setAttribute("mathbackground",a),i.setAttribute("width",gr(r)),i.setAttribute("height",gr(n));var o=new tr.MathNode("mpadded",[i]);return s>=0?o.setAttribute("height",gr(s)):(o.setAttribute("height",gr(s)),o.setAttribute("depth",gr(-s))),o.setAttribute("voffset",gr(s)),o}});function nH(e,t,r){for(var n=oi(e,t,!1),s=t.sizeMultiplier/r.sizeMultiplier,a=0;a<n.length;a++){var i=n[a].classes.indexOf("sizing");i<0?Array.prototype.push.apply(n[a].classes,t.sizingClasses(r)):n[a].classes[i+1]==="reset-size"+t.size&&(n[a].classes[i+1]="reset-size"+r.size),n[a].height*=s,n[a].depth*=s}return mt.makeFragment(n)}var qM=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Ade=(e,t)=>{var r=t.havingSize(e.size);return nH(e.body,r,t)};Tr({type:"sizing",names:qM,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:r,funcName:n,parser:s}=e,a=s.parseExpression(!1,r);return{type:"sizing",mode:s.mode,size:qM.indexOf(n)+1,body:a}},htmlBuilder:Ade,mathmlBuilder:(e,t)=>{var r=t.havingSize(e.size),n=xl(e.body,r),s=new tr.MathNode("mstyle",n);return s.setAttribute("mathsize",gr(r.sizeMultiplier)),s}});Tr({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,r)=>{var{parser:n}=e,s=!1,a=!1,i=r[0]&&Sn(r[0],"ordgroup");if(i)for(var o="",c=0;c<i.body.length;++c){var u=i.body[c];if(o=u.text,o==="t")s=!0;else if(o==="b")a=!0;else{s=!1,a=!1;break}}else s=!0,a=!0;var d=t[0];return{type:"smash",mode:n.mode,body:d,smashHeight:s,smashDepth:a}},htmlBuilder:(e,t)=>{var r=mt.makeSpan([],[zn(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return r;if(e.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(e.smashDepth&&(r.depth=0,r.children))for(var s=0;s<r.children.length;s++)r.children[s].depth=0;var a=mt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t);return mt.makeSpan(["mord"],[a],t)},mathmlBuilder:(e,t)=>{var r=new tr.MathNode("mpadded",[_s(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}});Tr({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n}=e,s=r[0],a=t[0];return{type:"sqrt",mode:n.mode,body:a,index:s}},htmlBuilder(e,t){var r=zn(e.body,t.havingCrampedStyle());r.height===0&&(r.height=t.fontMetrics().xHeight),r=mt.wrapFragment(r,t);var n=t.fontMetrics(),s=n.defaultRuleThickness,a=s;t.style.id<Xr.TEXT.id&&(a=t.fontMetrics().xHeight);var i=s+a/4,o=r.height+r.depth+i+s,{span:c,ruleWidth:u,advanceWidth:d}=n0.sqrtImage(o,t),f=c.height-u;f>r.height+r.depth+i&&(i=(i+f-r.height-r.depth)/2);var h=c.height-r.height-i-u;r.style.paddingLeft=gr(d);var g=mt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+h)},{type:"elem",elem:c},{type:"kern",size:u}]},t);if(e.index){var p=t.havingStyle(Xr.SCRIPTSCRIPT),y=zn(e.index,p,t),v=.6*(g.height-g.depth),C=mt.makeVList({positionType:"shift",positionData:-v,children:[{type:"elem",elem:y}]},t),S=mt.makeSpan(["root"],[C]);return mt.makeSpan(["mord","sqrt"],[S,g],t)}else return mt.makeSpan(["mord","sqrt"],[g],t)},mathmlBuilder(e,t){var{body:r,index:n}=e;return n?new tr.MathNode("mroot",[_s(r,t),_s(n,t)]):new tr.MathNode("msqrt",[_s(r,t)])}});var KM={display:Xr.DISPLAY,text:Xr.TEXT,script:Xr.SCRIPT,scriptscript:Xr.SCRIPTSCRIPT};Tr({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:r,funcName:n,parser:s}=e,a=s.parseExpression(!0,r),i=n.slice(1,n.length-5);return{type:"styling",mode:s.mode,style:i,body:a}},htmlBuilder(e,t){var r=KM[e.style],n=t.havingStyle(r).withFont("");return nH(e.body,n,t)},mathmlBuilder(e,t){var r=KM[e.style],n=t.havingStyle(r),s=xl(e.body,n),a=new tr.MathNode("mstyle",s),i={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},o=i[e.style];return a.setAttribute("scriptlevel",o[0]),a.setAttribute("displaystyle",o[1]),a}});var jde=function(t,r){var n=t.base;if(n)if(n.type==="op"){var s=n.limits&&(r.style.size===Xr.DISPLAY.size||n.alwaysHandleSupSub);return s?C1:null}else if(n.type==="operatorname"){var a=n.alwaysHandleSupSub&&(r.style.size===Xr.DISPLAY.size||n.limits);return a?rH:null}else{if(n.type==="accent")return qn.isCharacterBox(n.base)?H7:null;if(n.type==="horizBrace"){var i=!t.sub;return i===n.isOver?ZW:null}else return null}else return null};Zm({type:"supsub",htmlBuilder(e,t){var r=jde(e,t);if(r)return r(e,t);var{base:n,sup:s,sub:a}=e,i=zn(n,t),o,c,u=t.fontMetrics(),d=0,f=0,h=n&&qn.isCharacterBox(n);if(s){var g=t.havingStyle(t.style.sup());o=zn(s,g,t),h||(d=i.height-g.fontMetrics().supDrop*g.sizeMultiplier/t.sizeMultiplier)}if(a){var p=t.havingStyle(t.style.sub());c=zn(a,p,t),h||(f=i.depth+p.fontMetrics().subDrop*p.sizeMultiplier/t.sizeMultiplier)}var y;t.style===Xr.DISPLAY?y=u.sup1:t.style.cramped?y=u.sup3:y=u.sup2;var v=t.sizeMultiplier,C=gr(.5/u.ptPerEm/v),S=null;if(c){var w=e.base&&e.base.type==="op"&&e.base.name&&(e.base.name==="\\oiint"||e.base.name==="\\oiiint");(i instanceof Tc||w)&&(S=gr(-i.italic))}var T;if(o&&c){d=Math.max(d,y,o.depth+.25*u.xHeight),f=Math.max(f,u.sub2);var N=u.defaultRuleThickness,A=4*N;if(d-o.depth-(c.height-f)<A){f=A-(d-o.depth)+c.height;var P=.8*u.xHeight-(d-o.depth);P>0&&(d+=P,f-=P)}var j=[{type:"elem",elem:c,shift:f,marginRight:C,marginLeft:S},{type:"elem",elem:o,shift:-d,marginRight:C}];T=mt.makeVList({positionType:"individualShift",children:j},t)}else if(c){f=Math.max(f,u.sub1,c.height-.8*u.xHeight);var F=[{type:"elem",elem:c,marginLeft:S,marginRight:C}];T=mt.makeVList({positionType:"shift",positionData:f,children:F},t)}else if(o)d=Math.max(d,y,o.depth+.25*u.xHeight),T=mt.makeVList({positionType:"shift",positionData:-d,children:[{type:"elem",elem:o,marginRight:C}]},t);else throw new Error("supsub must have either sup or sub.");var R=$8(i,"right")||"mord";return mt.makeSpan([R],[i,mt.makeSpan(["msupsub"],[T])],t)},mathmlBuilder(e,t){var r=!1,n,s;e.base&&e.base.type==="horizBrace"&&(s=!!e.sup,s===e.base.isOver&&(r=!0,n=e.base.isOver)),e.base&&(e.base.type==="op"||e.base.type==="operatorname")&&(e.base.parentIsSupSub=!0);var a=[_s(e.base,t)];e.sub&&a.push(_s(e.sub,t)),e.sup&&a.push(_s(e.sup,t));var i;if(r)i=n?"mover":"munder";else if(e.sub)if(e.sup){var u=e.base;u&&u.type==="op"&&u.limits&&t.style===Xr.DISPLAY||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(t.style===Xr.DISPLAY||u.limits)?i="munderover":i="msubsup"}else{var c=e.base;c&&c.type==="op"&&c.limits&&(t.style===Xr.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||t.style===Xr.DISPLAY)?i="munder":i="msub"}else{var o=e.base;o&&o.type==="op"&&o.limits&&(t.style===Xr.DISPLAY||o.alwaysHandleSupSub)||o&&o.type==="operatorname"&&o.alwaysHandleSupSub&&(o.limits||t.style===Xr.DISPLAY)?i="mover":i="msup"}return new tr.MathNode(i,a)}});Zm({type:"atom",htmlBuilder(e,t){return mt.mathsym(e.text,e.mode,t,["m"+e.family])},mathmlBuilder(e,t){var r=new tr.MathNode("mo",[Ec(e.text,e.mode)]);if(e.family==="bin"){var n=z7(e,t);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else e.family==="punct"?r.setAttribute("separator","true"):(e.family==="open"||e.family==="close")&&r.setAttribute("stretchy","false");return r}});var sH={mi:"italic",mn:"normal",mtext:"normal"};Zm({type:"mathord",htmlBuilder(e,t){return mt.makeOrd(e,t,"mathord")},mathmlBuilder(e,t){var r=new tr.MathNode("mi",[Ec(e.text,e.mode,t)]),n=z7(e,t)||"italic";return n!==sH[r.type]&&r.setAttribute("mathvariant",n),r}});Zm({type:"textord",htmlBuilder(e,t){return mt.makeOrd(e,t,"textord")},mathmlBuilder(e,t){var r=Ec(e.text,e.mode,t),n=z7(e,t)||"normal",s;return e.mode==="text"?s=new tr.MathNode("mtext",[r]):/[0-9]/.test(e.text)?s=new tr.MathNode("mn",[r]):e.text==="\\prime"?s=new tr.MathNode("mo",[r]):s=new tr.MathNode("mi",[r]),n!==sH[s.type]&&s.setAttribute("mathvariant",n),s}});var I5={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},L5={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Zm({type:"spacing",htmlBuilder(e,t){if(L5.hasOwnProperty(e.text)){var r=L5[e.text].className||"";if(e.mode==="text"){var n=mt.makeOrd(e,t,"textord");return n.classes.push(r),n}else return mt.makeSpan(["mspace",r],[mt.mathsym(e.text,e.mode,t)],t)}else{if(I5.hasOwnProperty(e.text))return mt.makeSpan(["mspace",I5[e.text]],[],t);throw new nr('Unknown type of space "'+e.text+'"')}},mathmlBuilder(e,t){var r;if(L5.hasOwnProperty(e.text))r=new tr.MathNode("mtext",[new tr.TextNode("")]);else{if(I5.hasOwnProperty(e.text))return new tr.MathNode("mspace");throw new nr('Unknown type of space "'+e.text+'"')}return r}});var YM=()=>{var e=new tr.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};Zm({type:"tag",mathmlBuilder(e,t){var r=new tr.MathNode("mtable",[new tr.MathNode("mtr",[YM(),new tr.MathNode("mtd",[Kf(e.body,t)]),YM(),new tr.MathNode("mtd",[Kf(e.tag,t)])])]);return r.setAttribute("width","100%"),r}});var XM={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},JM={"\\textbf":"textbf","\\textmd":"textmd"},Pde={"\\textit":"textit","\\textup":"textup"},QM=(e,t)=>{var r=e.font;if(r){if(XM[r])return t.withTextFontFamily(XM[r]);if(JM[r])return t.withTextFontWeight(JM[r]);if(r==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape(Pde[r])};Tr({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];return{type:"text",mode:r.mode,body:ja(s),font:n}},htmlBuilder(e,t){var r=QM(e,t),n=oi(e.body,r,!0);return mt.makeSpan(["mord","text"],n,r)},mathmlBuilder(e,t){var r=QM(e,t);return Kf(e.body,r)}});Tr({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"underline",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=zn(e.body,t),n=mt.makeLineSpan("underline-line",t),s=t.fontMetrics().defaultRuleThickness,a=mt.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:s},{type:"elem",elem:n},{type:"kern",size:3*s},{type:"elem",elem:r}]},t);return mt.makeSpan(["mord","underline"],[a],t)},mathmlBuilder(e,t){var r=new tr.MathNode("mo",[new tr.TextNode("")]);r.setAttribute("stretchy","true");var n=new tr.MathNode("munder",[_s(e.body,t),r]);return n.setAttribute("accentunder","true"),n}});Tr({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"vcenter",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=zn(e.body,t),n=t.fontMetrics().axisHeight,s=.5*(r.height-n-(r.depth+n));return mt.makeVList({positionType:"shift",positionData:s,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){return new tr.MathNode("mpadded",[_s(e.body,t)],["vcenter"])}});Tr({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,r){throw new nr("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var r=ZM(e),n=[],s=t.havingStyle(t.style.text()),a=0;a<r.length;a++){var i=r[a];i==="~"&&(i="\\textasciitilde"),n.push(mt.makeSymbol(i,"Typewriter-Regular",e.mode,s,["mord","texttt"]))}return mt.makeSpan(["mord","text"].concat(s.sizingClasses(t)),mt.tryCombineChars(n),s)},mathmlBuilder(e,t){var r=new tr.TextNode(ZM(e)),n=new tr.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var ZM=e=>e.body.replace(/ /g,e.star?"":""),Ff=EW,aH=`[ \r
	]`,Fde="\\\\[a-zA-Z@]+",Mde="\\\\[^\uD800-\uDFFF]",Ode="("+Fde+")"+aH+"*",Dde=`\\\\(
|[ \r	]+
?)[ \r	]*`,H8="[-]",Rde=new RegExp(H8+"+$"),Ide="("+aH+"+)|"+(Dde+"|")+"([!-\\[\\]---]"+(H8+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(H8+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Ode)+("|"+Mde+")");class eO{constructor(t,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=r,this.tokenRegex=new RegExp(Ide,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,r){this.catcodes[t]=r}lex(){var t=this.input,r=this.tokenRegex.lastIndex;if(r===t.length)return new $l("EOF",new ul(this,r,r));var n=this.tokenRegex.exec(t);if(n===null||n.index!==r)throw new nr("Unexpected character: '"+t[r]+"'",new $l(t[r],new ul(this,r,r+1)));var s=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[s]===14){var a=t.indexOf(`
`,this.tokenRegex.lastIndex);return a===-1?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}return new $l(s,new ul(this,r,this.tokenRegex.lastIndex))}}class Lde{constructor(t,r){t===void 0&&(t={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new nr("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var r in t)t.hasOwnProperty(r)&&(t[r]==null?delete this.current[r]:this.current[r]=t[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)}get(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]}set(t,r,n){if(n===void 0&&(n=!1),n){for(var s=0;s<this.undefStack.length;s++)delete this.undefStack[s][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=r)}else{var a=this.undefStack[this.undefStack.length-1];a&&!a.hasOwnProperty(t)&&(a[t]=this.current[t])}r==null?delete this.current[t]:this.current[t]=r}}var Bde=KW;Ce("\\noexpand",function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}});Ce("\\expandafter",function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}});Ce("\\@firstoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[0],numArgs:0}});Ce("\\@secondoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[1],numArgs:0}});Ce("\\@ifnextchar",function(e){var t=e.consumeArgs(3);e.consumeSpaces();var r=e.future();return t[0].length===1&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}});Ce("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");Ce("\\TextOrMath",function(e){var t=e.consumeArgs(2);return e.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var tO={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Ce("\\char",function(e){var t=e.popToken(),r,n="";if(t.text==="'")r=8,t=e.popToken();else if(t.text==='"')r=16,t=e.popToken();else if(t.text==="`")if(t=e.popToken(),t.text[0]==="\\")n=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new nr("\\char` missing argument");n=t.text.charCodeAt(0)}else r=10;if(r){if(n=tO[t.text],n==null||n>=r)throw new nr("Invalid base-"+r+" digit "+t.text);for(var s;(s=tO[e.future().text])!=null&&s<r;)n*=r,n+=s,e.popToken()}return"\\@char{"+n+"}"});var Q7=(e,t,r,n)=>{var s=e.consumeArg().tokens;if(s.length!==1)throw new nr("\\newcommand's first argument must be a macro name");var a=s[0].text,i=e.isDefined(a);if(i&&!t)throw new nr("\\newcommand{"+a+"} attempting to redefine "+(a+"; use \\renewcommand"));if(!i&&!r)throw new nr("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");var o=0;if(s=e.consumeArg().tokens,s.length===1&&s[0].text==="["){for(var c="",u=e.expandNextToken();u.text!=="]"&&u.text!=="EOF";)c+=u.text,u=e.expandNextToken();if(!c.match(/^\s*[0-9]+\s*$/))throw new nr("Invalid number of arguments: "+c);o=parseInt(c),s=e.consumeArg().tokens}return i&&n||e.macros.set(a,{tokens:s,numArgs:o}),""};Ce("\\newcommand",e=>Q7(e,!1,!0,!1));Ce("\\renewcommand",e=>Q7(e,!0,!1,!1));Ce("\\providecommand",e=>Q7(e,!0,!0,!0));Ce("\\message",e=>{var t=e.consumeArgs(1)[0];return console.log(t.reverse().map(r=>r.text).join("")),""});Ce("\\errmessage",e=>{var t=e.consumeArgs(1)[0];return console.error(t.reverse().map(r=>r.text).join("")),""});Ce("\\show",e=>{var t=e.popToken(),r=t.text;return console.log(t,e.macros.get(r),Ff[r],Ns.math[r],Ns.text[r]),""});Ce("\\bgroup","{");Ce("\\egroup","}");Ce("~","\\nobreakspace");Ce("\\lq","`");Ce("\\rq","'");Ce("\\aa","\\r a");Ce("\\AA","\\r A");Ce("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");Ce("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");Ce("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");Ce("","\\mathscr{B}");Ce("","\\mathscr{E}");Ce("","\\mathscr{F}");Ce("","\\mathscr{H}");Ce("","\\mathscr{I}");Ce("","\\mathscr{L}");Ce("","\\mathscr{M}");Ce("","\\mathscr{R}");Ce("","\\mathfrak{C}");Ce("","\\mathfrak{H}");Ce("","\\mathfrak{Z}");Ce("\\Bbbk","\\Bbb{k}");Ce("","\\cdotp");Ce("\\llap","\\mathllap{\\textrm{#1}}");Ce("\\rlap","\\mathrlap{\\textrm{#1}}");Ce("\\clap","\\mathclap{\\textrm{#1}}");Ce("\\mathstrut","\\vphantom{(}");Ce("\\underbar","\\underline{\\text{#1}}");Ce("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');Ce("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");Ce("\\ne","\\neq");Ce("","\\neq");Ce("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");Ce("","\\notin");Ce("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");Ce("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");Ce("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");Ce("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");Ce("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");Ce("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");Ce("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");Ce("","\\perp");Ce("","\\mathclose{!\\mkern-0.8mu!}");Ce("","\\notni");Ce("","\\ulcorner");Ce("","\\urcorner");Ce("","\\llcorner");Ce("","\\lrcorner");Ce("","\\copyright");Ce("","\\textregistered");Ce("","\\textregistered");Ce("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');Ce("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');Ce("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');Ce("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');Ce("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");Ce("","\\vdots");Ce("\\varGamma","\\mathit{\\Gamma}");Ce("\\varDelta","\\mathit{\\Delta}");Ce("\\varTheta","\\mathit{\\Theta}");Ce("\\varLambda","\\mathit{\\Lambda}");Ce("\\varXi","\\mathit{\\Xi}");Ce("\\varPi","\\mathit{\\Pi}");Ce("\\varSigma","\\mathit{\\Sigma}");Ce("\\varUpsilon","\\mathit{\\Upsilon}");Ce("\\varPhi","\\mathit{\\Phi}");Ce("\\varPsi","\\mathit{\\Psi}");Ce("\\varOmega","\\mathit{\\Omega}");Ce("\\substack","\\begin{subarray}{c}#1\\end{subarray}");Ce("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");Ce("\\boxed","\\fbox{$\\displaystyle{#1}$}");Ce("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");Ce("\\implies","\\DOTSB\\;\\Longrightarrow\\;");Ce("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");Ce("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");Ce("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var rO={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Ce("\\dots",function(e){var t="\\dotso",r=e.expandAfterFuture().text;return r in rO?t=rO[r]:(r.slice(0,4)==="\\not"||r in Ns.math&&["bin","rel"].includes(Ns.math[r].group))&&(t="\\dotsb"),t});var Z7={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Ce("\\dotso",function(e){var t=e.future().text;return t in Z7?"\\ldots\\,":"\\ldots"});Ce("\\dotsc",function(e){var t=e.future().text;return t in Z7&&t!==","?"\\ldots\\,":"\\ldots"});Ce("\\cdots",function(e){var t=e.future().text;return t in Z7?"\\@cdots\\,":"\\@cdots"});Ce("\\dotsb","\\cdots");Ce("\\dotsm","\\cdots");Ce("\\dotsi","\\!\\cdots");Ce("\\dotsx","\\ldots\\,");Ce("\\DOTSI","\\relax");Ce("\\DOTSB","\\relax");Ce("\\DOTSX","\\relax");Ce("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");Ce("\\,","\\tmspace+{3mu}{.1667em}");Ce("\\thinspace","\\,");Ce("\\>","\\mskip{4mu}");Ce("\\:","\\tmspace+{4mu}{.2222em}");Ce("\\medspace","\\:");Ce("\\;","\\tmspace+{5mu}{.2777em}");Ce("\\thickspace","\\;");Ce("\\!","\\tmspace-{3mu}{.1667em}");Ce("\\negthinspace","\\!");Ce("\\negmedspace","\\tmspace-{4mu}{.2222em}");Ce("\\negthickspace","\\tmspace-{5mu}{.277em}");Ce("\\enspace","\\kern.5em ");Ce("\\enskip","\\hskip.5em\\relax");Ce("\\quad","\\hskip1em\\relax");Ce("\\qquad","\\hskip2em\\relax");Ce("\\tag","\\@ifstar\\tag@literal\\tag@paren");Ce("\\tag@paren","\\tag@literal{({#1})}");Ce("\\tag@literal",e=>{if(e.macros.get("\\df@tag"))throw new nr("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});Ce("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");Ce("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");Ce("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");Ce("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");Ce("\\newline","\\\\\\relax");Ce("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var iH=gr(Vu["Main-Regular"][84][1]-.7*Vu["Main-Regular"][65][1]);Ce("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+iH+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");Ce("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+iH+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");Ce("\\hspace","\\@ifstar\\@hspacer\\@hspace");Ce("\\@hspace","\\hskip #1\\relax");Ce("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");Ce("\\ordinarycolon",":");Ce("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");Ce("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');Ce("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');Ce("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');Ce("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');Ce("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');Ce("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');Ce("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');Ce("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');Ce("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');Ce("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');Ce("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');Ce("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');Ce("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');Ce("","\\dblcolon");Ce("","\\eqcolon");Ce("","\\coloneqq");Ce("","\\eqqcolon");Ce("","\\Coloneqq");Ce("\\ratio","\\vcentcolon");Ce("\\coloncolon","\\dblcolon");Ce("\\colonequals","\\coloneqq");Ce("\\coloncolonequals","\\Coloneqq");Ce("\\equalscolon","\\eqqcolon");Ce("\\equalscoloncolon","\\Eqqcolon");Ce("\\colonminus","\\coloneq");Ce("\\coloncolonminus","\\Coloneq");Ce("\\minuscolon","\\eqcolon");Ce("\\minuscoloncolon","\\Eqcolon");Ce("\\coloncolonapprox","\\Colonapprox");Ce("\\coloncolonsim","\\Colonsim");Ce("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Ce("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");Ce("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Ce("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");Ce("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");Ce("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");Ce("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");Ce("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");Ce("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");Ce("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");Ce("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");Ce("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");Ce("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");Ce("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");Ce("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");Ce("\\ngeqq","\\html@mathml{\\@ngeqq}{}");Ce("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");Ce("\\nleqq","\\html@mathml{\\@nleqq}{}");Ce("\\nleqslant","\\html@mathml{\\@nleqslant}{}");Ce("\\nshortmid","\\html@mathml{\\@nshortmid}{}");Ce("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");Ce("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");Ce("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");Ce("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");Ce("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");Ce("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");Ce("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");Ce("\\imath","\\html@mathml{\\@imath}{}");Ce("\\jmath","\\html@mathml{\\@jmath}{}");Ce("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");Ce("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");Ce("","\\llbracket");Ce("","\\rrbracket");Ce("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");Ce("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");Ce("","\\lBrace");Ce("","\\rBrace");Ce("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");Ce("","\\minuso");Ce("\\darr","\\downarrow");Ce("\\dArr","\\Downarrow");Ce("\\Darr","\\Downarrow");Ce("\\lang","\\langle");Ce("\\rang","\\rangle");Ce("\\uarr","\\uparrow");Ce("\\uArr","\\Uparrow");Ce("\\Uarr","\\Uparrow");Ce("\\N","\\mathbb{N}");Ce("\\R","\\mathbb{R}");Ce("\\Z","\\mathbb{Z}");Ce("\\alef","\\aleph");Ce("\\alefsym","\\aleph");Ce("\\Alpha","\\mathrm{A}");Ce("\\Beta","\\mathrm{B}");Ce("\\bull","\\bullet");Ce("\\Chi","\\mathrm{X}");Ce("\\clubs","\\clubsuit");Ce("\\cnums","\\mathbb{C}");Ce("\\Complex","\\mathbb{C}");Ce("\\Dagger","\\ddagger");Ce("\\diamonds","\\diamondsuit");Ce("\\empty","\\emptyset");Ce("\\Epsilon","\\mathrm{E}");Ce("\\Eta","\\mathrm{H}");Ce("\\exist","\\exists");Ce("\\harr","\\leftrightarrow");Ce("\\hArr","\\Leftrightarrow");Ce("\\Harr","\\Leftrightarrow");Ce("\\hearts","\\heartsuit");Ce("\\image","\\Im");Ce("\\infin","\\infty");Ce("\\Iota","\\mathrm{I}");Ce("\\isin","\\in");Ce("\\Kappa","\\mathrm{K}");Ce("\\larr","\\leftarrow");Ce("\\lArr","\\Leftarrow");Ce("\\Larr","\\Leftarrow");Ce("\\lrarr","\\leftrightarrow");Ce("\\lrArr","\\Leftrightarrow");Ce("\\Lrarr","\\Leftrightarrow");Ce("\\Mu","\\mathrm{M}");Ce("\\natnums","\\mathbb{N}");Ce("\\Nu","\\mathrm{N}");Ce("\\Omicron","\\mathrm{O}");Ce("\\plusmn","\\pm");Ce("\\rarr","\\rightarrow");Ce("\\rArr","\\Rightarrow");Ce("\\Rarr","\\Rightarrow");Ce("\\real","\\Re");Ce("\\reals","\\mathbb{R}");Ce("\\Reals","\\mathbb{R}");Ce("\\Rho","\\mathrm{P}");Ce("\\sdot","\\cdot");Ce("\\sect","\\S");Ce("\\spades","\\spadesuit");Ce("\\sub","\\subset");Ce("\\sube","\\subseteq");Ce("\\supe","\\supseteq");Ce("\\Tau","\\mathrm{T}");Ce("\\thetasym","\\vartheta");Ce("\\weierp","\\wp");Ce("\\Zeta","\\mathrm{Z}");Ce("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");Ce("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");Ce("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");Ce("\\bra","\\mathinner{\\langle{#1}|}");Ce("\\ket","\\mathinner{|{#1}\\rangle}");Ce("\\braket","\\mathinner{\\langle{#1}\\rangle}");Ce("\\Bra","\\left\\langle#1\\right|");Ce("\\Ket","\\left|#1\\right\\rangle");var oH=e=>t=>{var r=t.consumeArg().tokens,n=t.consumeArg().tokens,s=t.consumeArg().tokens,a=t.consumeArg().tokens,i=t.macros.get("|"),o=t.macros.get("\\|");t.macros.beginGroup();var c=f=>h=>{e&&(h.macros.set("|",i),s.length&&h.macros.set("\\|",o));var g=f;if(!f&&s.length){var p=h.future();p.text==="|"&&(h.popToken(),g=!0)}return{tokens:g?s:n,numArgs:0}};t.macros.set("|",c(!1)),s.length&&t.macros.set("\\|",c(!0));var u=t.consumeArg().tokens,d=t.expandTokens([...a,...u,...r]);return t.macros.endGroup(),{tokens:d.reverse(),numArgs:0}};Ce("\\bra@ket",oH(!1));Ce("\\bra@set",oH(!0));Ce("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");Ce("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");Ce("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");Ce("\\angln","{\\angl n}");Ce("\\blue","\\textcolor{##6495ed}{#1}");Ce("\\orange","\\textcolor{##ffa500}{#1}");Ce("\\pink","\\textcolor{##ff00af}{#1}");Ce("\\red","\\textcolor{##df0030}{#1}");Ce("\\green","\\textcolor{##28ae7b}{#1}");Ce("\\gray","\\textcolor{gray}{#1}");Ce("\\purple","\\textcolor{##9d38bd}{#1}");Ce("\\blueA","\\textcolor{##ccfaff}{#1}");Ce("\\blueB","\\textcolor{##80f6ff}{#1}");Ce("\\blueC","\\textcolor{##63d9ea}{#1}");Ce("\\blueD","\\textcolor{##11accd}{#1}");Ce("\\blueE","\\textcolor{##0c7f99}{#1}");Ce("\\tealA","\\textcolor{##94fff5}{#1}");Ce("\\tealB","\\textcolor{##26edd5}{#1}");Ce("\\tealC","\\textcolor{##01d1c1}{#1}");Ce("\\tealD","\\textcolor{##01a995}{#1}");Ce("\\tealE","\\textcolor{##208170}{#1}");Ce("\\greenA","\\textcolor{##b6ffb0}{#1}");Ce("\\greenB","\\textcolor{##8af281}{#1}");Ce("\\greenC","\\textcolor{##74cf70}{#1}");Ce("\\greenD","\\textcolor{##1fab54}{#1}");Ce("\\greenE","\\textcolor{##0d923f}{#1}");Ce("\\goldA","\\textcolor{##ffd0a9}{#1}");Ce("\\goldB","\\textcolor{##ffbb71}{#1}");Ce("\\goldC","\\textcolor{##ff9c39}{#1}");Ce("\\goldD","\\textcolor{##e07d10}{#1}");Ce("\\goldE","\\textcolor{##a75a05}{#1}");Ce("\\redA","\\textcolor{##fca9a9}{#1}");Ce("\\redB","\\textcolor{##ff8482}{#1}");Ce("\\redC","\\textcolor{##f9685d}{#1}");Ce("\\redD","\\textcolor{##e84d39}{#1}");Ce("\\redE","\\textcolor{##bc2612}{#1}");Ce("\\maroonA","\\textcolor{##ffbde0}{#1}");Ce("\\maroonB","\\textcolor{##ff92c6}{#1}");Ce("\\maroonC","\\textcolor{##ed5fa6}{#1}");Ce("\\maroonD","\\textcolor{##ca337c}{#1}");Ce("\\maroonE","\\textcolor{##9e034e}{#1}");Ce("\\purpleA","\\textcolor{##ddd7ff}{#1}");Ce("\\purpleB","\\textcolor{##c6b9fc}{#1}");Ce("\\purpleC","\\textcolor{##aa87ff}{#1}");Ce("\\purpleD","\\textcolor{##7854ab}{#1}");Ce("\\purpleE","\\textcolor{##543b78}{#1}");Ce("\\mintA","\\textcolor{##f5f9e8}{#1}");Ce("\\mintB","\\textcolor{##edf2df}{#1}");Ce("\\mintC","\\textcolor{##e0e5cc}{#1}");Ce("\\grayA","\\textcolor{##f6f7f7}{#1}");Ce("\\grayB","\\textcolor{##f0f1f2}{#1}");Ce("\\grayC","\\textcolor{##e3e5e6}{#1}");Ce("\\grayD","\\textcolor{##d6d8da}{#1}");Ce("\\grayE","\\textcolor{##babec2}{#1}");Ce("\\grayF","\\textcolor{##888d93}{#1}");Ce("\\grayG","\\textcolor{##626569}{#1}");Ce("\\grayH","\\textcolor{##3b3e40}{#1}");Ce("\\grayI","\\textcolor{##21242c}{#1}");Ce("\\kaBlue","\\textcolor{##314453}{#1}");Ce("\\kaGreen","\\textcolor{##71B307}{#1}");var lH={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class $de{constructor(t,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(t),this.macros=new Lde(Bde,r.macros),this.mode=n,this.stack=[]}feed(t){this.lexer=new eO(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){var r,n,s;if(t){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:s,end:n}=this.consumeArg(["]"])}else({tokens:s,start:r,end:n}=this.consumeArg());return this.pushToken(new $l("EOF",n.loc)),this.pushTokens(s),new $l("",ul.range(r,n))}consumeSpaces(){for(;;){var t=this.future();if(t.text===" ")this.stack.pop();else break}}consumeArg(t){var r=[],n=t&&t.length>0;n||this.consumeSpaces();var s=this.future(),a,i=0,o=0;do{if(a=this.popToken(),r.push(a),a.text==="{")++i;else if(a.text==="}"){if(--i,i===-1)throw new nr("Extra }",a)}else if(a.text==="EOF")throw new nr("Unexpected end of input in a macro argument, expected '"+(t&&n?t[o]:"}")+"'",a);if(t&&n)if((i===0||i===1&&t[o]==="{")&&a.text===t[o]){if(++o,o===t.length){r.splice(-o,o);break}}else o=0}while(i!==0||n);return s.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:s,end:a}}consumeArgs(t,r){if(r){if(r.length!==t+1)throw new nr("The length of delimiters doesn't match the number of args!");for(var n=r[0],s=0;s<n.length;s++){var a=this.popToken();if(n[s]!==a.text)throw new nr("Use of the macro doesn't match its definition",a)}}for(var i=[],o=0;o<t;o++)i.push(this.consumeArg(r&&r[o+1]).tokens);return i}countExpansion(t){if(this.expansionCount+=t,this.expansionCount>this.settings.maxExpand)throw new nr("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(t){var r=this.popToken(),n=r.text,s=r.noexpand?null:this._getExpansion(n);if(s==null||t&&s.unexpandable){if(t&&s==null&&n[0]==="\\"&&!this.isDefined(n))throw new nr("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var a=s.tokens,i=this.consumeArgs(s.numArgs,s.delimiters);if(s.numArgs){a=a.slice();for(var o=a.length-1;o>=0;--o){var c=a[o];if(c.text==="#"){if(o===0)throw new nr("Incomplete placeholder at end of macro body",c);if(c=a[--o],c.text==="#")a.splice(o+1,1);else if(/^[1-9]$/.test(c.text))a.splice(o,2,...i[+c.text-1]);else throw new nr("Not a valid argument number",c)}}}return this.pushTokens(a),a.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new $l(t)]):void 0}expandTokens(t){var r=[],n=this.stack.length;for(this.pushTokens(t);this.stack.length>n;)if(this.expandOnce(!0)===!1){var s=this.stack.pop();s.treatAsRelax&&(s.noexpand=!1,s.treatAsRelax=!1),r.push(s)}return this.countExpansion(r.length),r}expandMacroAsText(t){var r=this.expandMacro(t);return r&&r.map(n=>n.text).join("")}_getExpansion(t){var r=this.macros.get(t);if(r==null)return r;if(t.length===1){var n=this.lexer.catcodes[t];if(n!=null&&n!==13)return}var s=typeof r=="function"?r(this):r;if(typeof s=="string"){var a=0;if(s.indexOf("#")!==-1)for(var i=s.replace(/##/g,"");i.indexOf("#"+(a+1))!==-1;)++a;for(var o=new eO(s,this.settings),c=[],u=o.lex();u.text!=="EOF";)c.push(u),u=o.lex();c.reverse();var d={tokens:c,numArgs:a};return d}return s}isDefined(t){return this.macros.has(t)||Ff.hasOwnProperty(t)||Ns.math.hasOwnProperty(t)||Ns.text.hasOwnProperty(t)||lH.hasOwnProperty(t)}isExpandable(t){var r=this.macros.get(t);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:Ff.hasOwnProperty(t)&&!Ff[t].primitive}}var nO=/^[]/,gw=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),B5={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},sO={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class uS{constructor(t,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new $de(t,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(t,r){if(r===void 0&&(r=!0),this.fetch().text!==t)throw new nr("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){var r=this.nextToken;this.consume(),this.gullet.pushToken(new $l("}")),this.gullet.pushTokens(t);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(t,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var s=this.fetch();if(uS.endOfExpression.indexOf(s.text)!==-1||r&&s.text===r||t&&Ff[s.text]&&Ff[s.text].infix)break;var a=this.parseAtom(r);if(a){if(a.type==="internal")continue}else break;n.push(a)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(t){for(var r=-1,n,s=0;s<t.length;s++)if(t[s].type==="infix"){if(r!==-1)throw new nr("only one infix operator per group",t[s].token);r=s,n=t[s].replaceWith}if(r!==-1&&n){var a,i,o=t.slice(0,r),c=t.slice(r+1);o.length===1&&o[0].type==="ordgroup"?a=o[0]:a={type:"ordgroup",mode:this.mode,body:o},c.length===1&&c[0].type==="ordgroup"?i=c[0]:i={type:"ordgroup",mode:this.mode,body:c};var u;return n==="\\\\abovefrac"?u=this.callFunction(n,[a,t[r],i],[]):u=this.callFunction(n,[a,i],[]),[u]}else return t}handleSupSubscript(t){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var s;do{var a;s=this.parseGroup(t)}while(((a=s)==null?void 0:a.type)==="internal");if(!s)throw new nr("Expected group after '"+n+"'",r);return s}formatUnsupportedCmd(t){for(var r=[],n=0;n<t.length;n++)r.push({type:"textord",mode:"text",text:t[n]});var s={type:"text",mode:this.mode,body:r},a={type:"color",mode:this.mode,color:this.settings.errorColor,body:[s]};return a}parseAtom(t){var r=this.parseGroup("atom",t);if(r?.type==="internal"||this.mode==="text")return r;for(var n,s;;){this.consumeSpaces();var a=this.fetch();if(a.text==="\\limits"||a.text==="\\nolimits"){if(r&&r.type==="op"){var i=a.text==="\\limits";r.limits=i,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=a.text==="\\limits");else throw new nr("Limit controls must follow a math operator",a);this.consume()}else if(a.text==="^"){if(n)throw new nr("Double superscript",a);n=this.handleSupSubscript("superscript")}else if(a.text==="_"){if(s)throw new nr("Double subscript",a);s=this.handleSupSubscript("subscript")}else if(a.text==="'"){if(n)throw new nr("Double superscript",a);var o={type:"textord",mode:this.mode,text:"\\prime"},c=[o];for(this.consume();this.fetch().text==="'";)c.push(o),this.consume();this.fetch().text==="^"&&c.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:c}}else if(gw[a.text]){var u=nO.test(a.text),d=[];for(d.push(new $l(gw[a.text])),this.consume();;){var f=this.fetch().text;if(!gw[f]||nO.test(f)!==u)break;d.unshift(new $l(gw[f])),this.consume()}var h=this.subparse(d);u?s={type:"ordgroup",mode:"math",body:h}:n={type:"ordgroup",mode:"math",body:h}}else break}return n||s?{type:"supsub",mode:this.mode,base:r,sup:n,sub:s}:r}parseFunction(t,r){var n=this.fetch(),s=n.text,a=Ff[s];if(!a)return null;if(this.consume(),r&&r!=="atom"&&!a.allowedInArgument)throw new nr("Got function '"+s+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!a.allowedInText)throw new nr("Can't use function '"+s+"' in text mode",n);if(this.mode==="math"&&a.allowedInMath===!1)throw new nr("Can't use function '"+s+"' in math mode",n);var{args:i,optArgs:o}=this.parseArguments(s,a);return this.callFunction(s,i,o,n,t)}callFunction(t,r,n,s,a){var i={funcName:t,parser:this,token:s,breakOnTokenText:a},o=Ff[t];if(o&&o.handler)return o.handler(i,r,n);throw new nr("No function handler for "+t)}parseArguments(t,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var s=[],a=[],i=0;i<n;i++){var o=r.argTypes&&r.argTypes[i],c=i<r.numOptionalArgs;(r.primitive&&o==null||r.type==="sqrt"&&i===1&&a[0]==null)&&(o="primitive");var u=this.parseGroupOfType("argument to '"+t+"'",o,c);if(c)a.push(u);else if(u!=null)s.push(u);else throw new nr("Null argument, please report this as a bug")}return{args:s,optArgs:a}}parseGroupOfType(t,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var s=this.parseArgumentGroup(n,"text");return s!=null?{type:"styling",mode:s.mode,body:[s],style:"text"}:null}case"raw":{var a=this.parseStringGroup("raw",n);return a!=null?{type:"raw",mode:"text",string:a.text}:null}case"primitive":{if(n)throw new nr("A primitive argument cannot be optional");var i=this.parseGroup(t);if(i==null)throw new nr("Expected group as "+t,this.fetch());return i}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new nr("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(t,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var s="",a;(a=this.fetch()).text!=="EOF";)s+=a.text,this.consume();return this.consume(),n.text=s,n}parseRegexGroup(t,r){for(var n=this.fetch(),s=n,a="",i;(i=this.fetch()).text!=="EOF"&&t.test(a+i.text);)s=i,a+=s.text,this.consume();if(a==="")throw new nr("Invalid "+r+": '"+n.text+"'",n);return n.range(s,a)}parseColorGroup(t){var r=this.parseStringGroup("color",t);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new nr("Invalid color: '"+r.text+"'",r);var s=n[0];return/^[0-9a-f]{6}$/i.test(s)&&(s="#"+s),{type:"color-token",mode:this.mode,color:s}}parseSizeGroup(t){var r,n=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",t),!r)return null;!t&&r.text.length===0&&(r.text="0pt",n=!0);var s=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!s)throw new nr("Invalid size: '"+r.text+"'",r);var a={number:+(s[1]+s[2]),unit:s[3]};if(!yW(a))throw new nr("Invalid unit: '"+a.unit+"'",r);return{type:"size",mode:this.mode,value:a,isBlank:n}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(t,r){var n=this.gullet.scanArgument(t);if(n==null)return null;var s=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var i={type:"ordgroup",mode:this.mode,loc:n.loc,body:a};return r&&this.switchMode(s),i}parseGroup(t,r){var n=this.fetch(),s=n.text,a;if(s==="{"||s==="\\begingroup"){this.consume();var i=s==="{"?"}":"\\endgroup";this.gullet.beginGroup();var o=this.parseExpression(!1,i),c=this.fetch();this.expect(i),this.gullet.endGroup(),a={type:"ordgroup",mode:this.mode,loc:ul.range(n,c),body:o,semisimple:s==="\\begingroup"||void 0}}else if(a=this.parseFunction(r,t)||this.parseSymbol(),a==null&&s[0]==="\\"&&!lH.hasOwnProperty(s)){if(this.settings.throwOnError)throw new nr("Undefined control sequence: "+s,n);a=this.formatUnsupportedCmd(s),this.consume()}return a}formLigatures(t){for(var r=t.length-1,n=0;n<r;++n){var s=t[n],a=s.text;a==="-"&&t[n+1].text==="-"&&(n+1<r&&t[n+2].text==="-"?(t.splice(n,3,{type:"textord",mode:"text",loc:ul.range(s,t[n+2]),text:"---"}),r-=2):(t.splice(n,2,{type:"textord",mode:"text",loc:ul.range(s,t[n+1]),text:"--"}),r-=1)),(a==="'"||a==="`")&&t[n+1].text===a&&(t.splice(n,2,{type:"textord",mode:"text",loc:ul.range(s,t[n+1]),text:a+a}),r-=1)}}parseSymbol(){var t=this.fetch(),r=t.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),s=n.charAt(0)==="*";if(s&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new nr(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:s}}sO.hasOwnProperty(r[0])&&!Ns[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',t),r=sO[r[0]]+r.slice(1));var a=Rde.exec(r);a&&(r=r.substring(0,a.index),r==="i"?r="":r==="j"&&(r=""));var i;if(Ns[this.mode][r]){this.settings.strict&&this.mode==="math"&&B8.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',t);var o=Ns[this.mode][r].group,c=ul.range(t),u;if(Nue.hasOwnProperty(o)){var d=o;u={type:"atom",mode:this.mode,family:d,loc:c,text:r}}else u={type:o,mode:this.mode,loc:c,text:r};i=u}else if(r.charCodeAt(0)>=128)this.settings.strict&&(xW(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),t)),i={type:"textord",mode:"text",loc:ul.range(t),text:r};else return null;if(this.consume(),a)for(var f=0;f<a[0].length;f++){var h=a[0][f];if(!B5[h])throw new nr("Unknown accent ' "+h+"'",t);var g=B5[h][this.mode]||B5[h].text;if(!g)throw new nr("Accent "+h+" unsupported in "+this.mode+" mode",t);i={type:"accent",mode:this.mode,loc:ul.range(t),label:g,isStretchy:!1,isShifty:!0,base:i}}return i}}uS.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var eE=function(t,r){if(!(typeof t=="string"||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new uS(t,r);delete n.gullet.macros.current["\\df@tag"];var s=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new nr("\\tag works only in display equations");s=[{type:"tag",mode:"text",body:s,tag:n.subparse([new $l("\\df@tag")])}]}return s},cH=function(t,r,n){r.textContent="";var s=tE(t,n).toNode();r.appendChild(s)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),cH=function(){throw new nr("KaTeX doesn't work in quirks mode.")});var Ude=function(t,r){var n=tE(t,r).toMarkup();return n},zde=function(t,r){var n=new R7(r);return eE(t,n)},uH=function(t,r,n){if(n.throwOnError||!(t instanceof nr))throw t;var s=mt.makeSpan(["katex-error"],[new Tc(r)]);return s.setAttribute("title",t.toString()),s.setAttribute("style","color:"+n.errorColor),s},tE=function(t,r){var n=new R7(r);try{var s=eE(t,n);return Jue(s,t,n)}catch(a){return uH(a,t,n)}},Wde=function(t,r){var n=new R7(r);try{var s=eE(t,n);return Que(s,t,n)}catch(a){return uH(a,t,n)}},Hde="0.16.25",Gde={Span:_2,Anchor:B7,SymbolNode:Tc,SvgNode:h0,PathNode:qf,LineNode:L8},G8={version:Hde,render:cH,renderToString:Ude,ParseError:nr,SETTINGS_SCHEMA:Zw,__parse:zde,__renderToDomTree:tE,__renderToHTMLTree:Wde,__setFontMetrics:bue,__defineSymbol:ee,__defineFunction:Tr,__defineMacro:Ce,__domTree:Gde};const V8=(e,t=!1)=>{if(!e||typeof e!="string")return"";try{return G8.renderToString(e,{throwOnError:!1,displayMode:t,strict:!1})}catch(r){return console.error("Math rendering error:",r),`<span class="math-error" title="Math rendering error">${q8(e)}</span>`}},ua=(e,t=!1)=>{if(!e||typeof e!="string")return"";let r=e;const n=/\$\$(.*?)\$\$/g;let s;const a=[];for(;(s=n.exec(e))!==null;)a.push({fullMatch:s[0],expression:s[1],index:s.index});for(let c=a.length-1;c>=0;c--){const{fullMatch:u,expression:d}=a[c];try{const f=G8.renderToString(d,{throwOnError:!1,displayMode:!0,strict:!1});r=r.replace(u,f)}catch(f){console.error("Math rendering error:",f),r=r.replace(u,q8(u))}}const i=/\$(.*?)\$/g,o=[];for(;(s=i.exec(r))!==null;)s[0].startsWith("$$")||o.push({fullMatch:s[0],expression:s[1],index:s.index});for(let c=o.length-1;c>=0;c--){const{fullMatch:u,expression:d}=o[c];try{const f=G8.renderToString(d,{throwOnError:!1,displayMode:!1,strict:!1});r=r.replace(u,f)}catch(f){console.error("Math rendering error:",f),r=r.replace(u,q8(u))}}return r},Vde=e=>{if(!e||typeof e!="string")return"";if(e.includes("$"))return e;const t=["\\sqrt","\\frac","\\times","\\div","\\cdot","\\pm","\\mp","\\leq","\\geq","\\neq","\\approx","\\equiv","\\sum","\\prod","\\int","\\lim","\\sin","\\cos","\\tan","\\log","\\ln","\\exp"],r=[];let n="",s=!1,a=0;for(let o=0;o<e.length;o++){const c=e[o],u=e[o+1]||"",d=e[o-1]||"",f=c+u;if(e.substring(o,o+3),c==="\\"){const h=e.substring(o).match(/^\\([a-zA-Z]+)/);if(h){const g="\\"+h[1];if(t.some(p=>g.startsWith(p))||g.length>1){!s&&n.trim()&&(r.push({type:"text",content:n}),n=""),s=!0,n+=c;continue}}}if(f==="^{"||f==="_{"||c==="^"||c==="_"){!s&&n.trim()&&(r.push({type:"text",content:n}),n=""),s=!0,n+=c;continue}if(c==="{"){if(s){a++,n+=c;continue}else if(d==="^"||d==="_"||d==="\\"){s=!0,n+=c,a++;continue}}if(c==="}"&&s){if(n+=c,a--,a===0){const h=e.substring(o+1).trim();(!h||h.match(/^[\s,.!?;:]/))&&(r.push({type:"math",content:n}),n="",s=!1)}continue}if(s){if(n+=c,c===" "&&a===0){const h=e.substring(o+1).trim();h&&!h.match(/^[\\^_{]/)&&(r.push({type:"math",content:n.trim()}),n="",s=!1,n+=c)}}else n+=c}n&&r.push({type:s?"math":"text",content:n});let i="";for(const o of r)o.type==="math"?i+=`$${o.content}$`:i+=o.content;return i},q8=e=>{const t=document.createElement("div");return t.textContent=e,t.innerHTML},qde=({isOpen:e=!1,onClose:t,onSave:r,initialValue:n="",cursorPosition:s=null,inputRef:a=null})=>{const[i,o]=_.useState(n),[c,u]=_.useState({start:0,end:0}),[d,f]=_.useState(null),[h,g]=_.useState(null),[p,y]=_.useState(!1),v=_.useRef(null);_.useRef(null),_.useEffect(()=>{e&&(o(n),f(null),g(null),setTimeout(()=>{v.current?.focus(),i&&v.current?.setSelectionRange(i.length,i.length)},100))},[e,n]);const C=()=>{const{start:F,end:R}=c,L=F>0?i.substring(F-1,F):"",V=L&&L.trim()&&!L.match(/[{}()]/);let Z="",Y=0;V?(Z="^{}",Y=-1):(Z="x^{2}",Y=-3);const re=i.substring(0,F)+Z+i.substring(R);o(re),setTimeout(()=>{v.current?.focus();const ue=F+Z.length+Y;v.current?.setSelectionRange(ue,ue)},0)},S=()=>{const{start:F,end:R}=c,L=i.substring(F,R);if(L){const V=i.substring(0,F)+`\\sqrt{${L}}`+i.substring(R);o(V),setTimeout(()=>{v.current?.focus();const Z=F+L.length+8;v.current?.setSelectionRange(Z,Z)},0)}else{const V=i.substring(0,F)+"\\sqrt{}"+i.substring(R);o(V),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(F+6,F+6)},0)}},w=()=>{const{start:F}=c,R=i;if(d==="numerator"&&h!==null){const L=h;let V=0,Z=-1;const Y=L+6;for(let re=Y;re<R.length;re++)if(R[re]==="{")V++;else if(R[re]==="}"){if(V===0){Z=re+1;break}V--}if(Z>0){const re=Z+2;setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(re,re)},0),f(null),g(null)}else{const re=i.substring(0,F)+"\\frac{}{}"+i.substring(c.end);o(re),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(F+6,F+6)},0),f("numerator"),g(F)}}else{const L=i.substring(0,F)+"\\frac{}{}"+i.substring(c.end);o(L),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(F+6,F+6)},0),f("numerator"),g(F)}},T=()=>{const{start:F,end:R}=c,L=i.substring(0,F)+"x^{}"+i.substring(R);o(L),y(!0),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(F+3,F+3)},0)},N=F=>{const{start:R,end:L}=c,V=i.substring(0,R)+F+i.substring(L);o(V),setTimeout(()=>{v.current?.focus();const Z=R+F.length;v.current?.setSelectionRange(Z,Z)},0)},A=F=>{u({start:F.target.selectionStart,end:F.target.selectionEnd})},P=()=>{let F=i;i&&!i.includes("$")&&i.trim()&&/\\[a-zA-Z]+|[\^_]\{|\\times|\\div|\\sqrt|\\frac/.test(i)&&(F=`$${i}$`),r?.(F),t()};if(_.useEffect(()=>{const F=R=>{R.key==="Escape"&&e&&t()};return e&&document.addEventListener("keydown",F),()=>{document.removeEventListener("keydown",F)}},[e,t]),!e)return null;let j="";if(i&&i.trim())try{j=V8(i,!1),(!j||j.trim()==="")&&(j=`<span class="text-gray-500 font-mono">${$5(i)}</span>`)}catch(F){console.error("Preview rendering error:",F),j=`<span class="text-red-500 font-mono">Error: ${$5(i)}</span>`}return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:F=>{F.target===F.currentTarget&&t()},role:"dialog","aria-modal":"true","aria-label":"Math Visual Editor",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 w-full max-w-2xl mx-auto",onClick:F=>F.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Math Visual Editor"}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Math Expression"}),l.jsx("textarea",{ref:v,value:i,onChange:F=>{const R=F.target.value,L=F.target.selectionStart,V=i;if(R.length>V.length){const Z=R.substring(0,L),Y=R.substring(L),re=Z.match(/\^{([^}]*)$/);if(re)if(Y.startsWith("}")){const ue=re[1];p&&ue.length>0&&(setTimeout(()=>{if(v.current&&v.current.value===R){const z=L+1;v.current.setSelectionRange(z,z)}},10),y(!1))}else y(!1);else y(!1);Z.match(/\\sqrt\{([^}]*)$/),Z.match(/\\frac\{([^}]*)$/),Z.match(/\\frac\{[^}]*\}\{([^}]*)$/)}o(R)},onSelect:A,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",placeholder:"Type LaTeX code or use buttons below...",rows:4}),i&&i.trim()&&l.jsxs("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[l.jsx("div",{className:"text-xs text-gray-600 mb-2 font-medium",children:"Preview:"}),l.jsx("div",{className:"text-gray-700",style:{minHeight:"1.5em",fontSize:"16px"},dangerouslySetInnerHTML:{__html:j||$5(i)}})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Math Symbols"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:C,className:"px-3 py-2 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-sm font-medium text-blue-700 transition-colors",title:"Exponent (x)",children:"x"}),l.jsx("button",{onClick:T,className:"px-3 py-2 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-sm font-medium text-blue-700 transition-colors",title:"Exponent (x) - Type letter, click this, type number",children:"x"}),l.jsx("button",{onClick:S,className:"px-3 py-2 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-sm font-medium text-blue-700 transition-colors",title:"Square Root (x)",children:"x"}),l.jsx("button",{onClick:w,className:`px-3 py-2 border rounded-lg text-sm font-medium transition-colors ${d==="numerator"?"bg-green-50 hover:bg-green-100 border-green-300 text-green-700":"bg-blue-50 hover:bg-blue-100 border-blue-200 text-blue-700"}`,title:d==="numerator"?"Move to denominator (click again)":"Fraction (a/b) - Click for numerator, click again for denominator",children:"a/b"}),l.jsx("button",{onClick:()=>N("\\times"),className:"px-3 py-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors",title:"Times",children:""}),l.jsx("button",{onClick:()=>N("\\div"),className:"px-3 py-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors",title:"Divide",children:""})]})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx(ot,{variant:"secondary",onClick:t,children:"Cancel"}),l.jsx(ot,{variant:"primary",onClick:P,children:"Insert"})]})]})})},$5=e=>{const t=document.createElement("div");return t.textContent=e,t.innerHTML},Fl=({inputRef:e,onChange:t,position:r="right",size:n="small",showPreview:s=!1,className:a=""})=>{const[i,o]=_.useState(!1),[c,u]=_.useState(!1),[d,f]=_.useState(0),[h,g]=_.useState(null),[p,y]=_.useState(""),v=w=>{w.preventDefault(),w.stopPropagation();let T=null;if(typeof e=="function"?T=e():T=e?.current||e,!T){console.warn("MathEditorButton: No input reference provided");return}T.focus();const N=T.selectionStart!==null&&T.selectionStart!==void 0?T.selectionStart:T.selectionEnd!==null&&T.selectionEnd!==void 0?T.selectionEnd:T.value?.length||0;console.log(" Captured cursor position:",N,"from input value length:",T.value?.length),f(N),g(T),o(!0)},C=w=>{let T=h;if(T||(typeof e=="function"?T=e():T=e?.current||e),!T){console.warn("MathEditorButton: No input reference available for insert"),o(!1);return}const N=T.value||"",A=Math.max(0,Math.min(d,N.length));console.log(" Inserting formula at position:",A,"Value length:",N.length,"Formula:",w);const P=N.substring(0,A),j=N.substring(A),F=P+w+j;console.log(" New value:",F.substring(0,A)+"["+w+"]"+F.substring(A+w.length)),T.value=F,t&&t({target:{value:F,name:T.name}});const R=new Event("input",{bubbles:!0});if(T.dispatchEvent(R),T._valueTracker){const V=T._valueTracker;V.setValue(""),T.value=F,V.setValue(F)}const L=A+w.length;setTimeout(()=>{T.focus(),T.setSelectionRange(L,L),console.log(" Cursor moved to position:",L)},0),o(!1)};_.useEffect(()=>{console.log(" MathEditorButton rendered",{hasInputRef:!!e,inputRefType:typeof e,position:r,size:n})},[e,r,n]);const S=w=>{w.preventDefault(),w.stopPropagation();let T=null;typeof e=="function"?T=e():T=e?.current||e,y(T?.value||""),u(!0)};return _.useEffect(()=>{if(c){const w=setInterval(()=>{let T=null;typeof e=="function"?T=e():T=e?.current||e,T&&y(T.value||"")},300);return()=>clearInterval(w)}},[c,e]),l.jsxs(l.Fragment,{children:[s&&l.jsx("button",{type:"button",onClick:S,style:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:r==="right"?"48px":"auto",left:r==="left"?"48px":"auto",width:n==="small"?"32px":"40px",height:n==="small"?"32px":"40px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#10b981",color:"white",border:"2px solid #059669",borderRadius:"6px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",zIndex:10,boxShadow:"0 2px 4px rgba(0,0,0,0.2)",minWidth:"32px",minHeight:"32px"},onMouseEnter:w=>{w.target.style.backgroundColor="#059669"},onMouseLeave:w=>{w.target.style.backgroundColor="#10b981"},title:"Preview Math (p)","aria-label":"Preview math rendering",children:l.jsx("span",{style:{fontSize:"11px",fontWeight:"bold"},children:"p"})}),l.jsx("button",{type:"button",onClick:v,style:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:r==="right"?"8px":"auto",left:r==="left"?"8px":"auto",width:n==="small"?"32px":"40px",height:n==="small"?"32px":"40px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#3b82f6",color:"white",border:"2px solid #2563eb",borderRadius:"6px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",zIndex:10,boxShadow:"0 2px 4px rgba(0,0,0,0.2)",minWidth:"32px",minHeight:"32px"},onMouseEnter:w=>{w.target.style.backgroundColor="#2563eb"},onMouseLeave:w=>{w.target.style.backgroundColor="#3b82f6"},title:"Math Editor (fx)","aria-label":"Open math editor",children:l.jsx("span",{style:{fontSize:"11px",fontWeight:"bold"},children:"fx"})}),c&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:w=>{w.target===w.currentTarget&&u(!1)},role:"dialog","aria-modal":"true","aria-label":"Math Preview",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 w-full max-w-3xl mx-auto max-h-[90vh] overflow-auto",onClick:w=>w.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Math Preview"}),l.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview"}),l.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-gray-600 font-mono",children:["LaTeX: ",p||"(empty)"]}),l.jsx("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg min-h-[200px] text-lg",dangerouslySetInnerHTML:{__html:p?p.includes("$")?ua(p,!1):ua(Vde(p),!1):'<span class="text-gray-400">No content to preview</span>'}})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Close"})})]})}),l.jsx(qde,{isOpen:i,onClose:()=>o(!1),onSave:C,initialValue:"",cursorPosition:d,inputRef:h||e?.current||e})]})},Kde=({question:e,testId:t,testType:r="true_false",mode:n="student",displayNumber:s,studentAnswer:a,onAnswerChange:i,onQuestionChange:o,onSave:c,isEditing:u=!1,isSaving:d=!1,validationErrors:f={},showCorrectAnswers:h=!1,studentId:g=null})=>{const{getItem:p,setItem:y}=nS();ci();const{theme:v,isCyberpunk:C,themeClasses:S}=Da(),w=Oa(v);_.useRef(null);const[T,N]=_.useState(""),[A,P]=_.useState(""),[j,F]=_.useState(""),[R,L]=_.useState(!1),[V,Z]=_.useState(!0),[Y,re]=_.useState(""),[ue,z]=_.useState(!1),[X,I]=_.useState(null);_.useEffect(()=>{if(e&&(F(e.question||""),P(e.correct_answer||""),n==="student"&&g)){const me=p(`test_progress_${g}_${r}_${t}_${e.question_id}`);me&&N(me)}},[e,t,r,n,p]),_.useEffect(()=>{n==="student"&&a!==void 0&&a!==null&&(console.log(" TrueFalseQuestion syncing with parent studentAnswer:",a),N(a))},[a,n]),_.useEffect(()=>{if(n==="student"&&T&&t&&e?.question_id&&g){const me=setTimeout(()=>{z(!0),y(`test_progress_${g}_${r}_${t}_${e.question_id}`,T),I(new Date().toLocaleTimeString()),setTimeout(()=>z(!1),1e3)},1e3);return()=>clearTimeout(me)}},[T,t,r,e?.question_id,n,g,y]),_.useEffect(()=>{if(n==="teacher"&&(j||A)){const me=setTimeout(()=>{z(!0);const xe={question:j,correct_answer:A,timestamp:Date.now()};y(`teacher_form_${r}_${t}`,xe),I(new Date().toLocaleTimeString()),setTimeout(()=>z(!1),1e3)},2e3);return()=>clearTimeout(me)}},[j,A,t,r,n,y]);const B=_.useCallback(me=>{n==="student"&&(N(me),i&&i(e.question_id,me),U(me))},[n,e?.question_id,i]),W=_.useCallback(me=>{F(me),o&&o(e.question_id,me),q(me)},[e?.question_id,o]),D=_.useCallback(me=>{P(me),o&&o(e.question_id,{...e,correct_answer:me}),H(me)},[e,o]),U=_.useCallback(me=>{if(n==="student"){if(!me){Z(!1),re("Please select an answer");return}Z(!0),re("")}},[n]),q=_.useCallback(me=>{if(n==="teacher"){if(!me||me.trim().length<10){Z(!1),re("Question must be at least 10 characters long");return}Z(!0),re("")}},[n]),H=_.useCallback(me=>{if(n==="teacher"){if(!me){Z(!1),re("Please select a correct answer");return}Z(!0),re("")}},[n]),te=_.useCallback(()=>{if(n!=="teacher"||!c)return;const me={question_id:e.question_id,question:j,correct_answer:A,type:"true_false"};c(me)},[n,c,e?.question_id,j,A]),Q=_.useCallback(me=>me?ua(me,!1):"",[]),ae=()=>l.jsxs("div",{className:`rounded-xl border-2 p-6 shadow-sm hover:shadow-md transition-shadow duration-200 ${C?Bt(0).className:"bg-white border-gray-200"}`,style:C?{...Bt(0).style,...w.glowRed}:{},children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h4",{className:`text-lg font-semibold ${C?"":"text-gray-800"}`,style:C?{...w.textCyan,fontFamily:"monospace"}:{},children:C?`QUESTION ${typeof s=="number"?s:e?.question_id}`:`Question ${typeof s=="number"?s:e?.question_id}`}),l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[ue&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(un,{size:"small"}),l.jsx("span",{children:"Saving..."})]}),X&&!ue&&l.jsxs("div",{className:"text-green-600",children:[" Saved at ",X]})]})]}),l.jsx("div",{className:`question-text mb-6 leading-relaxed ${C?"":"text-gray-700"}`,style:C?{color:he.cyan,fontFamily:"monospace",...w.textShadow}:{},dangerouslySetInnerHTML:{__html:Q(j)}}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 ${C?"border":T==="true"?"border-blue-500 bg-blue-50 hover:bg-gray-50":"border-gray-200 hover:bg-gray-50"} ${h&&A==="true"?"ring-2 ring-green-400":""}`,style:C?{backgroundColor:he.black,borderColor:he.cyan,...T==="true"?w.glow:{}}:{},children:[l.jsx("input",{type:"radio",name:`question_${e?.question_id}`,value:"true",checked:T==="true",onChange:()=>B("true"),className:"sr-only","aria-label":"True"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${C?"border":T==="true"?"border-blue-500 bg-blue-500":"border-gray-300"}`,style:C?{borderColor:he.cyan,backgroundColor:T==="true"?he.cyan:"transparent"}:{},children:T==="true"&&l.jsx("div",{className:`w-2 h-2 rounded-full ${C?"":"bg-white"}`,style:C?{backgroundColor:he.black}:{}})}),l.jsx("span",{className:`font-medium ${C?"":"text-gray-800"}`,style:C?{...w.textCyan,fontFamily:"monospace"}:{},children:C?"TRUE":"True"})]}),l.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 ${C?"border":T==="false"?"border-blue-500 bg-blue-50 hover:bg-gray-50":"border-gray-200 hover:bg-gray-50"} ${h&&A==="false"?"ring-2 ring-green-400":""}`,style:C?{backgroundColor:he.black,borderColor:he.cyan,...T==="false"?w.glow:{}}:{},children:[l.jsx("input",{type:"radio",name:`question_${e?.question_id}`,value:"false",checked:T==="false",onChange:()=>B("false"),className:"sr-only","aria-label":"False"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${C?"border":T==="false"?"border-blue-500 bg-blue-500":"border-gray-300"}`,style:C?{borderColor:he.cyan,backgroundColor:T==="false"?he.cyan:"transparent"}:{},children:T==="false"&&l.jsx("div",{className:`w-2 h-2 rounded-full ${C?"":"bg-white"}`,style:C?{backgroundColor:he.black}:{}})}),l.jsx("span",{className:`font-medium ${C?"":"text-gray-800"}`,style:C?{...w.textCyan,fontFamily:"monospace"}:{},children:C?"FALSE":"False"})]})]}),!V&&Y&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:Y})]}),ce=()=>l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e?.question_id||"New Question"]}),l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[ue&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(un,{size:"small"}),l.jsx("span",{children:"Saving..."})]}),X&&!ue&&l.jsxs("div",{className:"text-green-600",children:[" Saved at ",X]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`question_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{id:`question_${e?.question_id}`,value:j,onChange:me=>W(me.target.value),placeholder:"Enter your question here...",className:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",rows:3,required:!0}),l.jsx(Fl,{inputRef:()=>document.getElementById(`question_${e?.question_id}`),onChange:me=>W(me.target.value)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Correct Answer *"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${A==="true"?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[l.jsx("input",{type:"radio",name:`correct_${e?.question_id}`,value:"true",checked:A==="true",onChange:()=>D("true"),className:"sr-only","aria-label":"True"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${A==="true"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:A==="true"&&l.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),l.jsx("span",{className:"text-gray-800 font-medium",children:"True"})]}),l.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${A==="false"?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[l.jsx("input",{type:"radio",name:`correct_${e?.question_id}`,value:"false",checked:A==="false",onChange:()=>D("false"),className:"sr-only","aria-label":"False"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${A==="false"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:A==="false"&&l.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),l.jsx("span",{className:"text-gray-800 font-medium",children:"False"})]})]})]})]}),!V&&Y&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:Y}),l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:l.jsx(ot,{variant:"success",onClick:te,disabled:!V||d,className:"w-full sm:w-auto",children:d?l.jsx(un,{size:"small"}):"Save Question"})})]});return l.jsx("div",{className:"true-false-question-container",children:n==="student"?ae():ce()})},Yde=({question:e,testId:t,testType:r="multiple_choice",mode:n="student",studentAnswer:s,onAnswerChange:a,onQuestionChange:i,onOptionAdd:o,onOptionRemove:c,onSave:u,isEditing:d=!1,isSaving:f=!1,validationErrors:h={},showCorrectAnswers:g=!1,studentId:p=null,displayNumber:y})=>{const{getItem:v,setItem:C}=nS(),{showNotification:S}=ci(),{theme:w,isCyberpunk:T,themeClasses:N}=Da(),A=Oa(w);_.useRef(null);const[P,j]=_.useState(""),[F,R]=_.useState(["","","",""]),[L,V]=_.useState(""),[Z,Y]=_.useState(""),[re,ue]=_.useState(!1),[z,X]=_.useState(!0),[I,B]=_.useState(""),[W,D]=_.useState(!1),[U,q]=_.useState(null);_.useEffect(()=>{if(e&&(Y(e.question||""),R(e.options||["","","",""]),V(e.correct_answer||""),n==="student"&&p)){const tt=v(`test_progress_${p}_${r}_${t}_${e.question_id}`);tt&&j(tt)}},[e,t,r,n,v]),_.useEffect(()=>{n==="student"&&s!==void 0&&s!==null&&(console.log(" MultipleChoiceQuestion syncing with parent studentAnswer:",s),j(s))},[s,n]),_.useEffect(()=>{if(n==="student"&&P&&t&&e?.question_id&&p){const tt=setTimeout(()=>{D(!0),C(`test_progress_${p}_${r}_${t}_${e.question_id}`,P),q(new Date().toLocaleTimeString()),setTimeout(()=>D(!1),1e3)},1e3);return()=>clearTimeout(tt)}},[P,t,r,e?.question_id,n,p,C]),_.useEffect(()=>{if(n==="teacher"&&(Z||F.some(tt=>tt.trim()))){const tt=setTimeout(()=>{D(!0);const Pe={question:Z,options:F,correct_answer:L,timestamp:Date.now()};C(`teacher_form_${r}_${t}`,Pe),q(new Date().toLocaleTimeString()),setTimeout(()=>D(!1),1e3)},2e3);return()=>clearTimeout(tt)}},[Z,F,L,t,r,n,C]),_.useCallback(tt=>{if(n!=="student")return;const Pe=String(tt);j(Pe),a&&a(e.question_id,Pe),me(Pe)},[n,e?.question_id,a]);const H=_.useCallback(tt=>{Y(tt),i&&i(e.question_id,tt),xe(tt)},[e?.question_id,i]),te=_.useCallback((tt,Pe)=>{const je=[...F];je[tt]=Pe,R(je),i&&i(e.question_id,{...e,options:je}),se(je)},[F,e,i]),Q=_.useCallback(tt=>{V(tt),i&&i(e.question_id,{...e,correct_answer:tt}),De(tt)},[e,i]),ae=_.useCallback(()=>{if(F.length<6){const tt=[...F,""];R(tt),o&&o(e.question_id,tt)}else S("Maximum 6 options allowed","warning")},[F,e?.question_id,o,S]),ce=_.useCallback(tt=>{if(F.length>2){const Pe=F.filter((je,Qe)=>Qe!==tt);if(R(Pe),L===String.fromCharCode(65+tt))V("");else if(L&&String.fromCharCode(65+tt)<L){const je=String.fromCharCode(65+tt-1);V(je)}c&&c(e.question_id,Pe)}else S("Minimum 2 options required","warning")},[F,L,e?.question_id,c,S]),me=_.useCallback(tt=>{if(n==="student"){if(!tt){X(!1),B("Please select an answer");return}X(!0),e?.correct_answer&&tt===e.correct_answer?B(" Correct answer!"):e?.correct_answer?B(" Incorrect answer"):B("Answer selected")}},[n,e?.correct_answer]),xe=_.useCallback(tt=>!tt||tt.trim().length<10?(X(!1),B("Question must be at least 10 characters long"),!1):(X(!0),B(""),!0),[]),se=_.useCallback(tt=>{if(n!=="teacher")return;if(tt.filter(je=>je.trim().length>0).length<2){X(!1),B("At least 2 options must be filled");return}if(tt.some(je=>je.trim().length>0&&je.trim().length<3)){X(!1),B("Each option must be at least 3 characters long");return}X(!0),B("")},[n]),De=_.useCallback(tt=>{if(n==="teacher"){if(!tt){X(!1),B("Please select a correct answer");return}X(!0),B("")}},[n]),He=_.useCallback(()=>{if(n!=="teacher"||!u)return;const tt={question_id:e.question_id,question:Z,options:F.filter(Pe=>Pe.trim().length>0),correct_answer:L,type:"multiple_choice"};u(tt)},[n,u,e?.question_id,Z,F,L]),rt=_.useCallback(tt=>tt?ua(tt,!1):"",[]);return n==="teacher"?l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e?.question_id||"New Question"]}),l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[W&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(un,{size:"small"}),l.jsx("span",{children:"Saving..."})]}),U&&!W&&l.jsxs("div",{className:"text-green-600",children:[" Saved at ",U]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`question_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{id:`question_${e?.question_id}`,value:Z,onChange:tt=>H(tt.target.value),placeholder:"Enter your question here...",className:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",rows:3,required:!0}),l.jsx(Fl,{inputRef:()=>document.getElementById(`question_${e?.question_id}`),onChange:tt=>H(tt.target.value)})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Answer Options *"}),l.jsx(ot,{variant:"secondary",size:"small",onClick:ae,disabled:F.length>=6,className:"px-3 py-1 text-sm",children:"+ Add Option"})]}),l.jsx("div",{className:"space-y-3",children:F.map((tt,Pe)=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+Pe)}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",value:tt,onChange:je=>te(Pe,je.target.value),placeholder:`Option ${String.fromCharCode(65+Pe)}`,className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200","data-question-id":e?.question_id,"data-option-index":Pe,required:!0}),l.jsx(Fl,{inputRef:()=>document.querySelector(`[data-question-id="${e?.question_id}"][data-option-index="${Pe}"]`),onChange:je=>te(Pe,je.target.value)})]}),F.length>2&&l.jsx(ot,{variant:"danger",size:"small",onClick:()=>ce(Pe),className:"px-2 py-1 text-sm",children:""})]},Pe))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`correct_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),l.jsxs("select",{id:`correct_${e?.question_id}`,value:L,onChange:tt=>Q(tt.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",required:!0,children:[l.jsx("option",{value:"",children:"Select correct answer"}),F.map((tt,Pe)=>{if(!tt.trim())return null;const je=String.fromCharCode(65+Pe);return l.jsxs("option",{value:je,children:[je,") ",tt]},Pe)})]})]})]}),!z&&I&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:I}),l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:l.jsx(ot,{variant:"success",onClick:He,disabled:!z||f,className:"w-full sm:w-auto",children:f?l.jsx(un,{size:"small"}):"Save Question"})})]}):l.jsxs("div",{className:`rounded-xl border-2 p-6 shadow-sm hover:shadow-md transition-shadow duration-200 ${T?Bt(0).className:"bg-white border-gray-200"}`,style:T?{...Bt(0).style,...A.glowRed}:{},children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h4",{className:`text-lg font-semibold ${T?"":"text-gray-800"}`,style:T?{...A.textCyan,fontFamily:"monospace"}:{},children:T?`QUESTION ${typeof y=="number"?y:e?.question_id}`:`Question ${typeof y=="number"?y:e?.question_id}`}),l.jsxs("div",{className:`flex items-center space-x-2 text-sm ${T?"":"text-gray-500"}`,style:T?{color:he.cyan,fontFamily:"monospace"}:{},children:[W&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(un,{size:"small"}),l.jsx("span",{children:"Saving..."})]}),U&&!W&&l.jsxs("div",{className:"text-green-600",children:[" Saved at ",U]})]})]}),l.jsx("div",{className:`question-text mb-6 leading-relaxed ${T?"":"text-gray-700"}`,style:T?{color:he.cyan,fontFamily:"monospace",...A.textShadow}:{},dangerouslySetInnerHTML:{__html:rt(Z)}}),l.jsx("div",{className:"space-y-3",children:F.map((tt,Pe)=>l.jsxs("label",{className:`flex items-center p-3 rounded-lg border-2 cursor-pointer transition-all duration-200 ${T?"border":P===String.fromCharCode(65+Pe)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,style:T?{backgroundColor:he.black,borderColor:(P===String.fromCharCode(65+Pe),he.cyan),...P===String.fromCharCode(65+Pe)?A.glow:{}}:{},children:[l.jsx("input",{type:"radio",name:`mcq_${t}_${e?.question_id}`,value:String.fromCharCode(65+Pe),checked:P===String.fromCharCode(65+Pe),onChange:je=>{j(je.target.value),a&&a(e?.question_id,je.target.value)},className:"mr-3"}),l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold mr-3 ${T?"":"bg-gray-100 text-gray-600"}`,style:T?{backgroundColor:P===String.fromCharCode(65+Pe)?he.cyan:he.black,border:`2px solid ${he.cyan}`,color:P===String.fromCharCode(65+Pe)?he.black:he.cyan,fontFamily:"monospace"}:{},children:String.fromCharCode(65+Pe)}),l.jsx("span",{className:"flex-1 ",style:T?{color:he.cyan,fontFamily:"monospace"}:{},dangerouslySetInnerHTML:{__html:tt?ua(tt):`Option ${String.fromCharCode(65+Pe)}`}})]},Pe))}),!z&&I&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:I})]})},Xde=({question:e,testId:t,testType:r="input",mode:n="student",displayNumber:s,studentAnswer:a,onAnswerChange:i,onQuestionChange:o,onAnswerAdd:c,onAnswerRemove:u,onSave:d,isEditing:f=!1,isSaving:h=!1,validationErrors:g={},showCorrectAnswers:p=!1,studentId:y=null})=>{const{getItem:v,setItem:C}=nS(),{showNotification:S}=ci(),{theme:w,isCyberpunk:T,themeClasses:N}=Da(),A=Oa(w),P=_.useRef(null),[j,F]=_.useState(""),[R,L]=_.useState([""]),[V,Z]=_.useState(!1),[Y,re]=_.useState(!0),[ue,z]=_.useState(""),[X,I]=_.useState(!1);_.useEffect(()=>{if(n==="student"&&e?.question_id&&t&&r&&y){const xe=`test_progress_${y}_${r}_${t}_${e.question_id}`,se=v(xe);se&&F(se)}},[e?.question_id,r,t,n,y,v]),_.useEffect(()=>{n==="student"&&a!==void 0&&a!==null&&(console.log(" InputQuestion syncing with parent studentAnswer:",a),F(a))},[a,n]),_.useEffect(()=>{n==="teacher"&&e?.answers&&L(e.answers.length>0?e.answers:[""])},[e?.answers,n]),_.useEffect(()=>{if(n==="student"&&j&&e?.question_id&&t&&r&&y){const xe=setTimeout(()=>{I(!0),C(`test_progress_${y}_${r}_${t}_${e.question_id}`,j),setTimeout(()=>I(!1),1e3)},1e3);return()=>clearTimeout(xe)}},[j,e?.question_id,r,t,n,y,C]),_.useEffect(()=>{if(n==="teacher"&&R&&o){const xe=setTimeout(()=>{o({...e,answers:R.filter(se=>se.trim())})},500);return()=>clearTimeout(xe)}},[R,e,n,o]);const B=_.useCallback(xe=>{F(xe);const se=xe.trim().length>0;re(se),z(se?"":"Please enter an answer"),i&&i(e.question_id,xe)},[e?.question_id,i]),W=_.useCallback((xe,se)=>{const De=[...R];De[xe]=se,L(De),i&&i(e.question_id,De)},[R,e?.question_id,i]),D=_.useCallback(()=>{if(n==="teacher"){const xe=[...R,""];L(xe),c&&c(e.question_id,xe)}},[R,e?.question_id,n,c]),U=_.useCallback(xe=>{if(n==="teacher"&&R.length>1){const se=R.filter((De,He)=>He!==xe);L(se),u&&u(e.question_id,se)}},[R,e?.question_id,n,u]),q=_.useCallback(()=>{if(n==="student"){const xe=j.trim().length>0;return re(xe),z(xe?"":"Please enter an answer"),xe}else if(n==="teacher"){const xe=R.some(se=>se.trim().length>0);return re(xe),z(xe?"":"Please enter at least one correct answer"),xe}return!0},[j,R,n]),H=_.useCallback(xe=>xe?ua(xe,!1):"",[]),te=_.useCallback(()=>{Z(!0)},[]),Q=_.useCallback(()=>{Z(!1),q()},[q]),ae=_.useCallback(xe=>{xe.key==="Enter"&&n==="student"&&j.trim()&&(C(`test_progress_${r}_${t}_${e.question_id}`,j),S("Answer saved","success"))},[j,r,t,e?.question_id,n,C,S]),ce=()=>l.jsxs("div",{className:`rounded-xl border-2 p-6 shadow-sm hover:shadow-md transition-shadow duration-200 ${T?Bt(0).className:"bg-white border-gray-200"}`,style:T?{...Bt(0).style,...A.glowRed}:{},children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h4",{className:`text-lg font-semibold ${T?"":"text-gray-800"}`,style:T?{...A.textCyan,fontFamily:"monospace"}:{},children:T?`QUESTION ${typeof s=="number"?s:e.question_id}`:`Question ${typeof s=="number"?s:e.question_id}`}),X&&l.jsxs("div",{className:`flex items-center space-x-1 text-sm ${T?"":"text-gray-500"}`,style:T?{color:he.cyan,fontFamily:"monospace"}:{},children:[l.jsx(un,{size:"small"}),l.jsx("span",{children:"Saving..."})]})]}),l.jsx("div",{className:`question-text mb-6 leading-relaxed ${T?"":"text-gray-700"}`,style:T?{color:he.cyan,fontFamily:"monospace",...A.textShadow}:{},dangerouslySetInnerHTML:{__html:H(e.question)}}),l.jsx("div",{className:"space-y-3",children:l.jsx("div",{className:"relative",children:l.jsx("input",{ref:P,type:"text",id:`input_${e.question_id}`,placeholder:T?"ENTER YOUR ANSWER HERE...":"Enter your answer here...",value:j,onChange:xe=>B(xe.target.value),onFocus:te,onBlur:Q,onKeyPress:ae,className:`w-full px-4 py-3 pr-10 border-2 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 ${T?"border":Y?V?"border-blue-500 text-gray-800 placeholder-gray-400 focus:ring-blue-500":"border-gray-300 hover:border-gray-400 text-gray-800 placeholder-gray-400":"border-red-300 focus:border-red-500 focus:ring-red-500 text-gray-800 placeholder-gray-400"}`,style:T?{backgroundColor:he.black,borderColor:Y?he.cyan:he.red,color:he.cyan,fontFamily:"monospace",...V?A.glow:{},...V?{}:{}}:{},"data-question-id":e.question_id,"aria-label":`Answer for question ${e.question_id}`,"aria-invalid":!Y,"aria-describedby":Y?void 0:`error-${e.question_id}`})})}),p&&e.correct_answers&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[l.jsx("h5",{className:"text-sm font-semibold text-green-800 mb-2",children:"Correct Answers:"}),l.jsx("ul",{className:"space-y-1",children:e.correct_answers.map((xe,se)=>l.jsx("li",{className:"text-green-700 text-sm",dangerouslySetInnerHTML:{__html:` ${ua(xe,!1)}`}},se))})]})]}),me=()=>l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e.question_id||"New"]}),h&&l.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[l.jsx(un,{size:"small"}),l.jsx("span",{children:"Saving..."})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`question_${e.question_id||"new"}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",id:`question_${e.question_id||"new"}`,value:e.question||"",onChange:xe=>o&&o({...e,question:xe.target.value}),placeholder:"Enter question text",className:`w-full px-4 py-3 pr-10 border-2 rounded-lg text-gray-800 placeholder-gray-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 ${g.question?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:border-blue-500"}`}),l.jsx(MathEditorButton,{inputRef:()=>document.getElementById(`question_${e.question_id||"new"}`),onChange:xe=>o&&o({...e,question:xe.target.value})})]}),g.question&&l.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:g.question})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Correct Answers *"}),l.jsx(ot,{type:"button",variant:"secondary",size:"small",onClick:D,className:"px-3 py-1 text-sm",children:"+ Add Answer"})]}),l.jsx("div",{className:"space-y-3",children:R.map((xe,se)=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:se+1}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",value:xe,onChange:De=>W(se,De.target.value),placeholder:`Correct answer ${se+1}`,className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200","data-question-id":e.question_id,"data-answer-index":se}),l.jsx(MathEditorButton,{inputRef:()=>document.querySelector(`[data-question-id="${e.question_id}"][data-answer-index="${se}"]`),onChange:De=>W(se,De.target.value)})]}),R.length>1&&l.jsx(ot,{type:"button",variant:"danger",size:"small",onClick:()=>U(se),className:"px-2 py-1 text-sm",children:" Remove"})]},se))}),g.answers&&l.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:g.answers})]})]}),d&&l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:l.jsx(ot,{type:"button",variant:"success",onClick:d,disabled:h,className:"w-full sm:w-auto",children:h?l.jsx(un,{size:"small"}):"Save Question"})})]});return l.jsx("div",{className:`input-question-container ${n} ${V?"focused":""}`,children:n==="student"?ce():me()})},T1=(e,t,r)=>{const[n,s]=_.useState(!1),[a,i]=_.useState(0),[o,c]=_.useState(!1),u=_.useRef(!1);_.useEffect(()=>{if(!e||!t||!r)return;const v=`anti_cheating_${r}_${e}_${t}`,C=Es(v);C&&(i(C.tabSwitches||0),c(C.isCheating||!1))},[e,t,r]);const d=_.useCallback(()=>{if(console.log(" handleTabSwitch called - isTracking:",u.current),!u.current){console.log(" Not tracking, returning early");return}console.log(" Tab switch detected - starting 7 second timer...");const v=Date.now();setTimeout(()=>{const C=Date.now()-v;console.log(" Timer completed - time hidden:",C,"ms"),C>=6500?(console.log(" Tab was hidden for sufficient time - counting as tab switch"),i(S=>{const w=S+1,T=w>=2;console.log(" Tab switch count updated:",{newCount:w,cheating:T}),c(T);const N=`anti_cheating_${r}_${e}_${t}`;return gs(N,{tabSwitches:w,isCheating:T},120*1e3),w})):console.log(" Tab was not hidden long enough - not counting as switch")},7e3)},[e,t,r]),f=_.useCallback(()=>{u.current&&(console.log(" Visibility change detected:",{hidden:document.hidden,isTracking:u.current}),document.hidden?d():console.log(" Tab became visible"))},[d]),h=_.useCallback(()=>{console.log(" startTracking called - setting up anti-cheating detection"),console.log(" Current document.hidden state:",document.hidden),console.log(" Current document.visibilityState:",document.visibilityState),s(!0),u.current=!0,document.addEventListener("visibilitychange",f),console.log(" Anti-cheating event listeners added (visibilitychange only)")},[f]),g=_.useCallback(()=>{console.log(" stopTracking called - removing anti-cheating detection"),s(!1),u.current=!1,document.removeEventListener("visibilitychange",f),console.log(" Anti-cheating event listeners removed")},[f]),p=_.useCallback(()=>{const v={caught_cheating:o,visibility_change_times:a};return console.log(" getCheatingData called:",v),v},[o,a]),y=_.useCallback(()=>{r&&e&&t&&u1(r,e,t),i(0),c(!1),console.log(" Anti-cheating data deleted from localStorage")},[r,e,t]);return{startTracking:h,stopTracking:g,clearData:y,getCheatingData:p,tabSwitches:a,isCheating:o,isTracking:n}},k2=(e,t)=>{const r=_.useRef(e),n=_.useRef(t),s=_.useRef(!1);return _.useEffect(()=>{n.current=t},[t]),_.useEffect(()=>{r.current=e},[e]),_.useEffect(()=>{if(typeof window>"u"||!e)return()=>{};const a=f=>{try{window.history.pushState({__intercept:!0,prevState:f??null,ts:Date.now()},document.title,window.location.href),s.current=!0}catch(h){console.warn("Failed to push intercept state",h)}},i=()=>{try{const f=window.history.state;if(f&&f.__intercept){const h=f.prevState??null;window.history.replaceState(h,document.title,window.location.href)}}catch(f){console.warn("Failed to restore previous state",f)}s.current=!1},o=()=>{s.current&&(r.current=!1,i(),window.history.go(-1))},c=()=>{},u=f=>{if(!r.current){s.current=!1;return}const h=f.state;a(h),n.current?.({source:"browser",confirm:o,cancel:c})},d=window.history.state;return a(d),window.addEventListener("popstate",u),()=>{window.removeEventListener("popstate",u),i()}},[e]),null},Jde=({testData:e,onTestComplete:t,onBackToCabinet:r,isTestComplete:n=!1,testScore:s=null})=>{const[a,i]=_.useState(null),[o,c]=_.useState(null);_.useEffect(()=>{(async()=>{try{const[Xe,Et]=await Promise.all([ni(()=>Promise.resolve().then(()=>Fae),void 0),ni(()=>Promise.resolve().then(()=>use),void 0)]);i(Xe),c(Et.default)}catch(Xe){console.error("Failed to load Konva:",Xe)}})()},[]);const u=()=>a?{Stage:a.Stage,Layer:a.Layer,Rect:a.Rect,Arrow:a.Arrow,KonvaImage:a.Image,KonvaText:a.Text,Group:a.Group}:null,[d,f]=_.useState({}),[h,g]=_.useState({}),[p,y]=_.useState(0),[v,C]=_.useState(!1),[S,w]=_.useState(null),[T,N]=_.useState(0),[A,P]=_.useState(0),[j,F]=_.useState(null),[R,L]=_.useState(null),[V,Z]=_.useState(!1),[Y,re]=_.useState(!1),[ue,z]=_.useState(!1),[X,I]=_.useState(!0),B=_.useRef(null);k2(X,_.useCallback(({confirm:Ge,cancel:Xe})=>{console.log(" MatchingTestStudent: Browser back button intercepted during test!"),console.log(" MatchingTestStudent: isBackInterceptEnabled:",X),console.log(" MatchingTestStudent: Setting pending navigation and showing modal"),B.current={confirm:Ge,cancel:Xe},re(!0)},[X]));const{showNotification:W}=ci(),{makeAuthenticatedRequest:D}=Gl(),{user:U}=Is(),{startTracking:q,stopTracking:H,getCheatingData:te,clearData:Q}=T1("matching_type",e?.id,U?.student_id||U?.id),ae=_.useRef(null),ce=_.useRef(null),me=_.useRef(null),xe=_.useRef(0),[se,De]=_.useState(400);_.useRef({});const He=_.useCallback(()=>{Z(!0)},[]),rt=_.useCallback(()=>{g({}),f({}),Z(!1)},[]),_t=_.useCallback(()=>{B.current=null,re(!0)},[]),Ke=_.useCallback(()=>{console.log(" MatchingTestStudent: confirmBackToCabinet called"),console.log(" MatchingTestStudent: Current location:",window.location.href),console.log(" MatchingTestStudent: Current history state:",window.history.state),re(!1);const Ge=B.current;if(console.log(" MatchingTestStudent: Pending navigation:",Ge),B.current=null,e?.id&&U?.student_id){const Et=`anti_cheating_${U?.student_id||U?.id||"unknown"}_matching_type_${e.id}`,Wt=(Es(Et)||{tabSwitches:0}).tabSwitches||0,pr=Wt+1,wr=pr>=2;console.log(" MatchingTestStudent: Tab switch count:",Wt,"->",pr),gs(Et,{tabSwitches:pr,isCheating:wr},ls.anti_cheating)}if(console.log(" MatchingTestStudent: Disabling intercept"),I(!1),Ge){console.log(" MatchingTestStudent: Cleaning up intercept history state");try{const Xe=window.history.state;if(console.log(" MatchingTestStudent: Current history state before cleanup:",Xe),Xe&&Xe.__intercept){const Et=Xe.prevState??null;console.log(" MatchingTestStudent: Restoring previous state:",Et),window.history.replaceState(Et,document.title,window.location.href),console.log(" MatchingTestStudent: History state after cleanup:",window.history.state)}}catch(Xe){console.warn(" MatchingTestStudent: Failed to restore history state:",Xe)}}console.log(" MatchingTestStudent: Scheduling navigation in 100ms"),setTimeout(()=>{console.log(" MatchingTestStudent: Executing navigation to /student"),console.log(" MatchingTestStudent: Current location before navigation:",window.location.href),window.location.href="/student",console.log(" MatchingTestStudent: window.location.href set to /student")},100)},[r,e,U?.student_id,U?.id]),tt=_.useCallback(()=>{const Ge=B.current;B.current=null,Ge?.cancel&&Ge.cancel(),re(!1)},[]),Pe=_.useMemo(()=>{if(!e)return null;const Ge=e.blocks.map(Ut=>{let Wt=Ut.coordinates;if(typeof Wt=="string")try{Wt=JSON.parse(Wt)}catch(pr){console.error(" Failed to parse coordinates:",pr),Wt={x:0,y:0,width:100,height:100}}return Wt={x:(typeof Wt.x=="number"?Wt.x:Number(Wt.x))||0,y:(typeof Wt.y=="number"?Wt.y:Number(Wt.y))||0,width:(typeof Wt.width=="number"?Wt.width:Number(Wt.width))||30,height:(typeof Wt.height=="number"?Wt.height:Number(Wt.height))||10},{id:Ut.id,word:Ut.word,coordinates:Wt,hasArrow:Ut.hasArrow,arrow:Ut.arrow}}),Xe=Array.isArray(e.arrows)?e.arrows:[],Et=e.words.map(Ut=>({id:Ut.id,word:Ut.word,blockId:null,isPlaced:!1,isCorrect:!1}));return{blocks:Ge,arrows:Xe,words:Et}},[e]);_.useEffect(()=>{if(!e?.image_url)return;const Ge=new Image;Ge.crossOrigin="anonymous",Ge.onload=()=>{console.log(" Image loaded successfully"),N(Ge.width),P(Ge.height);const Xe=ae.current?.clientWidth||800,Et=ae.current?.clientHeight||600,Ut=Xe/Ge.width,Wt=Et/Ge.height,pr=Math.min(Ut,Wt,1),wr=Ge.width*pr,br=Ge.height*pr,lr=(Xe-wr)/2,Er=(Et-br)/2;w({x:lr,y:Er,width:wr,height:br,scaleX:pr,scaleY:pr,scale:pr,image:Ge}),xe.current=ae.current?.clientWidth||800,console.log(" Image info calculated:",{x:lr,y:Er,width:wr,height:br,scaleX:pr,scaleY:pr})},Ge.onerror=()=>{console.error(" Failed to load image"),W("Failed to load test image","error")},Ge.src=e.image_url},[e?.image_url,W]),_.useEffect(()=>{if(!Pe||!S)return;const Ge=xe.current||ae.current?.clientWidth||800,Xe=12,Et=38;let Ut=S.x,Wt=S.y+S.height+Xe;const pr=S.x+S.width,wr={};Pe.words.forEach(Er=>{if(!Object.prototype.hasOwnProperty.call(h,Er.id)){const we=typeof Er.word=="string"?Er.word:"",_e=Math.max(60,we.length*8+20);Ut+_e>Math.min(Ge-Xe,pr)&&(Ut=S.x,Wt+=Et),d[Er.id]||(wr[Er.id]={x:Ut,y:Wt}),Ut+=_e+Xe}}),Object.keys(wr).length&&f(Er=>({...Er,...wr}));const br=Object.values(wr).reduce((Er,we)=>Math.max(Er,we.y),Wt),lr=Math.max(S.y+S.height+Xe,br+Et+Xe);De(Math.max(400,Math.ceil(lr)))},[Pe,S,h,d]);const je=_.useCallback(()=>{if(!S||!Pe)return[];const Ge=u();return Ge?Pe.blocks.map(Xe=>{const Et=Xe.coordinates;let Ut,Wt,pr,wr;Ut=S.x+Et.x*(S.scale??S.scaleX),Wt=S.y+Et.y*(S.scale??S.scaleY),pr=Et.width*(S.scale??S.scaleX),wr=Et.height*(S.scale??S.scaleY);const br=h[Xe.id];return l.jsxs(Ge.Group,{children:[l.jsx(Ge.Rect,{x:Ut,y:Wt,width:pr,height:wr,fill:br?"rgba(40, 167, 69, 0.4)":j===Xe.id?"rgba(0, 123, 255, 0.25)":"rgba(0, 123, 255, 0.15)",stroke:br?"#28a745":j===Xe.id?"#0056b3":"#007bff",strokeWidth:2,cornerRadius:6,shadowColor:br?"rgba(40, 167, 69, 0.3)":"rgba(0, 123, 255, 0.3)",shadowBlur:10,shadowOffset:{x:0,y:2},shadowOpacity:.5}),br&&l.jsx(Ge.KonvaText,{x:Ut+5,y:Wt+wr/2-10,width:pr-10,height:20,text:Pe.words.find(lr=>lr.id===br)?.word||"",fontSize:Math.min(12,pr/8),fontFamily:"Arial",fill:"#2c3e50",align:"center",verticalAlign:"middle",listening:!1})]},Xe.id)}):[]},[S,Pe,h,a]),Qe=_.useCallback(()=>{if(!S||!Pe)return[];const Ge=u();return Ge?(console.log(" Processing arrows:",Pe.arrows),Pe.arrows.map(Xe=>{if(console.log(" Arrow data:",Xe),!Xe.start||!Xe.end)return console.warn(" Arrow missing start/end coordinates:",Xe),null;let Et,Ut,Wt,pr;if(Xe.rel_start_x!==null&&Xe.rel_start_y!==null&&Xe.rel_end_x!==null&&Xe.rel_end_y!==null&&Xe.image_width&&Xe.image_height&&Xe.image_width>0&&Xe.image_height>0){const wr=Xe.image_width,br=Xe.image_height,lr=S.width/wr,Er=S.height/br;Et=S.x+Number(Xe.rel_start_x)/100*wr*lr,Ut=S.y+Number(Xe.rel_start_y)/100*br*Er,Wt=S.x+Number(Xe.rel_end_x)/100*wr*lr,pr=S.y+Number(Xe.rel_end_y)/100*br*Er}else{const wr=S.scale??S.scaleX??1,br=Number(Xe.start.x),lr=Number(Xe.start.y),Er=Number(Xe.end.x),we=Number(Xe.end.y);br<=S.width+1&&Er<=S.width+1&&lr<=S.height+1&&we<=S.height+1?(Et=S.x+(isNaN(br)?0:br),Ut=S.y+(isNaN(lr)?0:lr),Wt=S.x+(isNaN(Er)?0:Er),pr=S.y+(isNaN(we)?0:we)):(Et=S.x+(isNaN(br)?0:br)*wr,Ut=S.y+(isNaN(lr)?0:lr)*wr,Wt=S.x+(isNaN(Er)?0:Er)*wr,pr=S.y+(isNaN(we)?0:we)*wr)}return l.jsx(Ge.Arrow,{points:[Et,Ut,Wt,pr],stroke:Xe.style?.color||"#dc3545",fill:Xe.style?.color||"#dc3545",strokeWidth:Xe.style?.thickness||3,pointerLength:10,pointerWidth:10},Xe.id)}).filter(Boolean)):[]},[S,Pe,a]),vt=_.useCallback(()=>{if(!Pe)return[];const Ge=u();return Ge?Pe.words.map(Xe=>{const Et=d[Xe.id]||{x:0,y:0},Ut=typeof Xe.word=="string"?Xe.word:"",Wt=Math.max(60,Ut.length*8+20);return Object.values(h).includes(Xe.id)?null:l.jsxs(Ge.Group,{x:Et.x,y:Et.y,draggable:!0,onDragEnd:wr=>Ot(wr,Xe.id),children:[l.jsx(Ge.Rect,{width:Wt,height:34,fill:"#ffffff",stroke:"#ced4da",strokeWidth:1,cornerRadius:4,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:5,shadowOffset:{x:0,y:2},shadowOpacity:.3,listening:!0}),l.jsx(Ge.KonvaText,{text:Ut,fontSize:14,fontFamily:"Arial",fill:"#343a40",padding:8,align:"center",verticalAlign:"middle",width:Wt,height:34,listening:!1})]},Xe.id)}):[]},[Pe,d,h,S,a]),Ot=_.useCallback((Ge,Xe)=>{const Et=Ge.target.x(),Ut=Ge.target.y();if(f(_e=>({..._e,[Xe]:{x:Et,y:Ut}})),!S||!Pe)return;const Wt=Pe.words.find(_e=>_e.id===Xe);if(!Wt)return;const pr=typeof Wt.word=="string"?Wt.word:"",wr=Math.max(60,pr.length*8+20),br={x:Et,y:Ut,width:wr,height:34},lr=S.scale??S.scaleX??1,Er=(_e,Ee)=>!(Ee.x>_e.x+_e.width||Ee.x+Ee.width<_e.x||Ee.y>_e.y+_e.height||Ee.y+Ee.height<_e.y),we=Pe.blocks.find(_e=>{const Ee=_e.coordinates,Fe={x:S.x+Ee.x*lr,y:S.y+Ee.y*lr,width:Ee.width*lr,height:Ee.height*lr};return Er(br,Fe)});if(we){g(Mt=>({...Mt,[we.id]:Xe}));const _e=we.coordinates,Ee=S.x+_e.x*lr,Fe=S.y+_e.y*lr,at=_e.width*lr,jt=_e.height*lr;f(Mt=>({...Mt,[Xe]:{x:Ee+(at-wr)/2,y:Fe+(jt-34)/2}})),W(`Word "${Wt.word}" placed in block`,"success")}},[S,Pe,W]),$t=_.useCallback(()=>{if(!Pe)return 0;const Ge=Pe.words.length,Xe=Object.keys(h).length;return Ge>0?Xe/Ge*100:0},[Pe,h]);_.useEffect(()=>{const Ge=$t();y(Ge)},[$t]),_.useEffect(()=>{if(e&&!R){const Ge=new Date;L(Ge),console.log(" Test timer started at:",Ge.toISOString()),q(),console.log(" Anti-cheating tracking started")}},[e,R,q]);const Gt=_.useCallback(async()=>{if(Pe){C(!0);try{const Ge=Pe.words.length;let Xe=0;console.log(" Scoring check - placedWords:",h),console.log(" Scoring check - blocks:",Pe.blocks.map(Be=>({id:Be.id,word:Be.word}))),console.log(" Scoring check - words:",Pe.words.map(Be=>({id:Be.id,word:Be.word}))),Pe.blocks.forEach(Be=>{const lt=h[Be.id];if(console.log(` Block ${Be.id} (expects "${Be.word}") has placed word ID: ${lt}`),lt){const ct=Pe.words.find(Qt=>Qt.id===lt);console.log(" Placed word:",ct),ct&&ct.word===Be.word?(Xe++,console.log(` Correct! Block ${Be.id} has correct word "${ct.word}"`)):console.log(` Incorrect! Block ${Be.id} expected "${Be.word}" but got "${ct?.word||"nothing"}"`)}else console.log(` Block ${Be.id} has no word placed`)});const Et=Xe,Ut=Ge;console.log(` Final Score: ${Et}/${Ut} (${Math.round(Et/Ut*100)}%)`);const Wt=new Date,pr=R?Math.round((Wt-R)/1e3):0,wr=R?R.toISOString():Wt.toISOString();console.log(" Test timing:",{startedAt:wr,endTime:Wt.toISOString(),timeTaken:`${pr} seconds`});const br=te();console.log(" Anti-cheating data for submission:",br);const lr=U.student_id,Er=`retest_assignment_id_${lr}_matching_type_${e.id}`,we=localStorage.getItem(Er),{academicCalendarService:_e}=await ni(async()=>{const{academicCalendarService:Be}=await Promise.resolve().then(()=>fS);return{academicCalendarService:Be}},void 0);await _e.loadAcademicCalendar();const Fe=_e.getCurrentTerm()?.id;if(!Fe)throw new Error("No current academic period found");const at={test_id:e.id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:lr,academic_period_id:Fe,answers:h,score:Et,maxScore:Ut,time_taken:pr,started_at:wr,submitted_at:Wt.toISOString(),caught_cheating:br.caught_cheating,visibility_change_times:br.visibility_change_times,retest_assignment_id:we?Number(we):null,parent_test_id:e.id};console.log(" Submitting test data:",at);const Mt=await(await D("/.netlify/functions/submit-matching-type-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(at)})).json();if(console.log(" Submission response:",Mt),Mt.success){if(W("Test submitted successfully!","success"),H(),Q(),U?.student_id&&u1(U.student_id,"matching_type",e.id),!!we&&U?.student_id){let ct=3;try{const _r=localStorage.getItem(`student_active_tests_${U.student_id}`);if(_r){const Fr=JSON.parse(_r)?.tests?.find(an=>an.test_id===e.id&&an.test_type==="matching_type");Fr&&(ct=Fr.retest_attempts_left||Fr.max_attempts||3)}}catch(_r){console.error("Error checking active tests cache:",_r)}const rr=(Et>0&&Ut>0?Et/Ut*100:0)>=50;if(rr){const _r=`retest_attempt${ct}_${U.student_id}_matching_type_${e.id}`;localStorage.setItem(_r,"true"),console.log(" Passed retest, marking last-slot key:",_r);let tn=0;for(let pe=1;pe<=10;pe++){const Ne=`retest_attempt${pe}_${U.student_id}_matching_type_${e.id}`;localStorage.getItem(Ne)==="true"&&tn++}const Fr=`test_completed_${U.student_id}_matching_type_${e.id}`;localStorage.setItem(Fr,"true"),console.log(" Marked retest as completed (student passed):",Fr);const an=`retest_attempts_${U.student_id}_matching_type_${e.id}`;localStorage.setItem(an,JSON.stringify({used:tn,max:ct})),console.log(" Set retest attempts metadata (student passed):",an,{used:tn,max:ct})}else{let _r=1;for(let Ne=1;Ne<=10;Ne++){const le=`retest_attempt${Ne}_${U.student_id}_matching_type_${e.id}`;if(localStorage.getItem(le)!=="true"){_r=Ne;break}}const tn=`retest_attempt${_r}_${U.student_id}_matching_type_${e.id}`;localStorage.setItem(tn,"true"),console.log(" Marked retest attempt as completed:",tn);let Fr=0;for(let Ne=1;Ne<=10;Ne++){const le=`retest_attempt${Ne}_${U.student_id}_matching_type_${e.id}`;localStorage.getItem(le)==="true"&&Fr++}const an=ct-Fr,pe=an<=0||rr;if(console.log(" Retest completion check:",{usedAttempts:Fr,maxAttempts:ct,attemptsLeft:an,passed:rr,shouldComplete:pe}),pe){const Ne=`test_completed_${U.student_id}_matching_type_${e.id}`;localStorage.setItem(Ne,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",Ne);const le=`retest_attempts_${U.student_id}_matching_type_${e.id}`;localStorage.setItem(le,JSON.stringify({used:Fr,max:ct})),console.log(" Set retest attempts metadata (attempts exhausted):",le,{used:Fr,max:ct})}}}else if(U?.student_id){const ct=`test_completed_${U.student_id}_matching_type_${e.id}`;localStorage.setItem(ct,"true"),console.log(" Test marked as completed in localStorage:",ct)}if(U?.student_id){const{setCachedData:ct,CACHE_TTL:Qt}=await ni(async()=>{const{setCachedData:_r,CACHE_TTL:tn}=await Promise.resolve().then(()=>xp);return{setCachedData:_r,CACHE_TTL:tn}},void 0),rr=`student_results_table_${U.student_id}`;ct(rr,Mt,Qt.student_results_table),console.log(" Test results cached with key:",rr)}const lt=`retest1_${lr}_matching_type_${e.id}`;localStorage.removeItem(lt),localStorage.removeItem(Er),t&&(I(!1),t(Et))}else throw new Error(Mt.message||"Failed to submit test")}catch(Ge){console.error(" Error submitting test:",Ge),W(`Error submitting test: ${Ge.message}`,"error")}finally{C(!1)}}},[Pe,h,e,U,R,D,W,t]);if(!e||!Pe)return l.jsx(un,{});const{theme:ir,isCyberpunk:dt,themeClasses:gt}=Da(),kt=Oa(ir);return l.jsx("div",{className:`min-h-screen p-4 ${dt?"bg-gradient-to-br from-black via-gray-900 to-purple-900":"bg-white"}`,style:dt?kt.background:{},children:l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("div",{className:"flex justify-end mb-2",children:l.jsx(ot,{onClick:_t,variant:"outline",size:"sm",children:"Back to Cabinet"})}),l.jsxs("div",{className:`rounded-lg shadow-sm p-6 mb-6 border ${dt?Bt(2).className:`${gt.cardBg} ${gt.cardBorder}`}`,style:dt?{...Bt(2).style,...kt.glow}:{},children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("div",{children:l.jsx("h1",{className:`text-2xl font-bold ${dt?"":gt.text}`,style:dt?{...kt.textCyan,fontFamily:"monospace"}:{},children:e.test_name})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:`text-sm ${dt?"":gt.textSecondary}`,style:dt?{...kt.textYellow,fontFamily:"monospace"}:{},children:"Progress"}),l.jsxs("div",{className:`text-2xl font-bold ${dt?"":"text-blue-600"}`,style:dt?{...kt.textCyan,fontFamily:"monospace"}:{},children:[Math.round(p),"%"]})]})]}),l.jsx("div",{className:`mt-4 w-full ${gt.progressBg} rounded-full h-2 border ${dt?"border-cyan-400/50":gt.border}`,children:l.jsx("div",{className:`${gt.progressFill} h-2 rounded-full transition-all duration-300`,style:dt?{width:`${p}%`,boxShadow:"0 0 10px rgba(255, 215, 0, 0.5), 0 0 20px rgba(0, 255, 255, 0.3)"}:{width:`${p}%`}})})]}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:l.jsx("div",{className:"lg:col-span-3",children:l.jsxs(Ht,{className:`p-4 ${dt?Bt(3).className:""}`,style:dt?{...Bt(3).style,...kt.glow}:{},children:[l.jsx("div",{className:"mb-4 text-center",children:l.jsx(ot,{onClick:He,variant:"secondary",children:"Reset"})}),l.jsx("div",{ref:ae,className:"w-full bg-gray-100 rounded-lg overflow-hidden",style:{height:`${se}px`},children:S&&a?(()=>{const{Stage:Ge,Layer:Xe,KonvaImage:Et}=u();return l.jsxs(Ge,{ref:ce,width:ae.current?.clientWidth||800,height:se,children:[l.jsxs(Xe,{children:[l.jsx(Et,{ref:me,image:S.image,x:S.x,y:S.y,width:S.width,height:S.height,listening:!1}),je(),Qe()]}),l.jsx(Xe,{listening:!0,children:vt()})]})})():S?l.jsxs("div",{className:"flex items-center justify-center h-full",children:[l.jsx(un,{size:"lg"}),l.jsx("span",{className:"ml-2 text-gray-600",children:"Loading Konva canvas..."})]}):null}),l.jsx("div",{className:"mt-4 text-center",children:l.jsx(ot,{onClick:()=>z(!0),disabled:v||p<100,className:"",style:dt?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",borderWidth:"2px",...kt.glow}:{},children:dt?v?"SUBMITTING...":"SUBMIT TEST":v?"Submitting...":"Submit Test"})})]})})}),l.jsx(Aa,{isOpen:V,onClose:()=>Z(!1),title:"Reset Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to reset? This will clear all your progress and placed words."}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ot,{onClick:()=>Z(!1),variant:"secondary",children:"Cancel"}),l.jsx(ot,{onClick:rt,variant:"primary",children:"Reset"})]})]})}),l.jsx(Aa,{isOpen:Y,onClose:tt,title:"Exit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet? Your progress will be saved but you will exit the test."}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ot,{onClick:tt,variant:"secondary",children:"Cancel"}),l.jsx(ot,{onClick:Ge=>{console.log(" MatchingTestStudent: Go Back button clicked in modal"),console.log(" MatchingTestStudent: Button click event:",Ge),Ke()},variant:"primary",children:"Go Back"})]})]})}),l.jsx(Aa,{isOpen:ue,onClose:()=>z(!1),title:"Submit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ot,{onClick:()=>z(!1),variant:"secondary",children:"Cancel"}),l.jsx(ot,{onClick:()=>{z(!1),Gt()},variant:"primary",className:"",style:dt?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",borderWidth:"2px",...kt.glow}:{},children:dt?"SUBMIT":"Submit"})]})]})})]})})},Qde=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{user:i}=Is(),{makeAuthenticatedRequest:o}=Gl(),{showNotification:c}=ci(),[u,d]=_.useState([{leftWord:"",rightWord:""},{leftWord:"",rightWord:""},{leftWord:"",rightWord:""}]),[f,h]=_.useState("drag"),[g,p]=_.useState(!1),[y,v]=_.useState(null),C=_.useCallback(()=>{d(P=>[...P,{leftWord:"",rightWord:""}])},[]),S=_.useCallback(P=>{u.length>1&&d(j=>j.filter((F,R)=>R!==P))},[u.length]),w=_.useCallback((P,j)=>{d(F=>F.map((R,L)=>L===P?{...R,leftWord:j}:R))},[]),T=_.useCallback((P,j)=>{d(F=>F.map((R,L)=>L===P?{...R,rightWord:j}:R))},[]),N=_.useCallback(()=>u.every(P=>P.leftWord.trim()&&P.rightWord.trim()),[u]),A=_.useCallback(async()=>{if(!N()){c("Please fill in all word pairs","error");return}p(!0),v(null);try{const P=u.map((F,R)=>({question_id:R+1,left_word:F.leftWord.trim(),right_word:F.rightWord.trim()})),j={test_name:e,num_questions:P.length,interaction_type:f,questions:P};console.log(" Saving word matching test:",j),t({testName:e,numQuestions:P.length,interactionType:f,wordPairs:u,questions:P})}catch(P){console.error("Error saving word matching test:",P),v(P.message),c("Failed to save test: "+P.message,"error")}finally{p(!1)}},[e,u,f,N,o,c,t]);return l.jsxs(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-6xl mx-auto p-0",children:[l.jsx(Ht,{className:"mb-6",children:l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Choose Interaction Type"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:` p-4 border-2 rounded-lg cursor-pointer transition-all ${f==="drag"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>h("drag"),children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{type:"radio",checked:f==="drag",onChange:()=>h("drag"),className:"mr-3"}),l.jsx("h4",{className:"font-medium",children:"Drag & Drop"})]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Students drag words from left list to right list"}),l.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" Easier for younger students",l.jsx("br",{})," Visual feedback on placement",l.jsx("br",{})," Mobile-friendly"]})]}),l.jsxs("div",{className:` p-4 border-2 rounded-lg cursor-pointer transition-all ${f==="arrow"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>h("arrow"),children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{type:"radio",checked:f==="arrow",onChange:()=>h("arrow"),className:"mr-3"}),l.jsx("h4",{className:"font-medium",children:"Draw Arrows"})]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Students draw arrows connecting matching words"}),l.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" More challenging",l.jsx("br",{})," Better for visual learners",l.jsx("br",{})," Requires precision"]})]})]})]})}),l.jsx(Ht,{className:"mb-6",children:l.jsxs("div",{className:"word-pairs-section",children:[l.jsxs("div",{className:"pairs-header flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Word Pairs"}),l.jsx(ot,{onClick:C,size:"sm",children:"+ Add Pair"})]}),l.jsx("div",{className:"pairs-list space-y-3 p-0 md:p-4",children:u.map((P,j)=>l.jsxs("div",{className:"word-pair-row flex items-center space-x-2 md:space-x-4 p-2 md:p-4 bg-gray-50 rounded-lg border",children:[l.jsx("div",{className:"pair-number flex-shrink-0",children:l.jsx("span",{className:"number-badge w-6 h-6 md:w-8 md:h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs md:text-sm font-semibold",children:j+1})}),l.jsx("div",{className:"left-word flex-1",children:l.jsx("input",{type:"text",value:P.leftWord,onChange:F=>w(j,F.target.value),placeholder:"Left word...",className:"word-input w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),l.jsx("div",{className:"pair-arrow flex-shrink-0 text-gray-500 text-lg md:text-xl",children:""}),l.jsx("div",{className:"right-word flex-1",children:l.jsx("input",{type:"text",value:P.rightWord,onChange:F=>T(j,F.target.value),placeholder:"Right word...",className:"word-input w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),l.jsx("div",{className:"pair-actions flex-shrink-0",children:l.jsx(ot,{onClick:()=>S(j),variant:"outline",size:"sm",className:"remove-btn w-6 h-6 md:w-8 md:h-8 p-0 text-red-500 hover:bg-red-50",disabled:u.length<=1,children:""})})]},j))})]})}),l.jsx(Ht,{className:"mb-6",children:l.jsxs("div",{className:"preview-section",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),l.jsx("div",{className:"preview-pairs space-y-2",children:u.map((P,j)=>l.jsxs("div",{className:"preview-pair flex items-center space-x-2 text-sm",children:[l.jsxs("span",{className:"preview-number font-semibold text-blue-600",children:[j+1,"."]}),l.jsx("span",{className:"preview-left px-2 py-1 bg-white rounded border",children:P.leftWord||"Left word"}),l.jsx("span",{className:"preview-arrow text-gray-500",children:""}),l.jsx("span",{className:"preview-right px-2 py-1 bg-white rounded border",children:P.rightWord||"Right word"})]},j))})]})}),l.jsxs("div",{className:"flex justify-center space-x-4",children:[l.jsx(ot,{onClick:A,disabled:!N()||g,className:"px-8",children:g?l.jsxs(l.Fragment,{children:[l.jsx(un,{size:"sm",color:"white",className:"mr-2"}),"Saving Test..."]}):"Save Test"}),l.jsx(ot,{onClick:r,variant:"secondary",children:"Cancel"})]}),y&&l.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("p",{className:"text-red-600",children:y})})]})},dH=({answeredCount:e=0,totalQuestions:t=0,timeElapsed:r=0,onSubmitTest:n,isSubmitting:s=!1,canSubmit:a=!1,className:i="",themeClasses:o,isCyberpunk:c})=>{const{theme:u}=Da(),d=Oa(u),f=c!==void 0?c:u==="cyberpunk",h=t>0?Math.round(e/t*100):0,g=t-e,p=C=>{const S=Math.floor(C/3600),w=Math.floor(C%3600/60),T=C%60;return S>0?`${S}:${w.toString().padStart(2,"0")}:${T.toString().padStart(2,"0")}`:`${w}:${T.toString().padStart(2,"0")}`},y=C=>C>=100?"bg-green-500":C>=80?"bg-blue-500":C>=60?"bg-yellow-500":C>=40?"bg-orange-500":"bg-red-500",v=C=>C>=100?"text-green-600":C>=80?"text-blue-600":C>=60?"text-yellow-600":C>=40?"text-orange-600":"text-red-600";return l.jsxs("div",{className:`rounded-lg shadow-lg p-6 border-2 ${f?Bt(1).className:"bg-white"} ${i}`,style:f?{...Bt(1).style,...d.glow}:{},children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:`text-lg font-semibold ${f?"":"text-gray-900"}`,style:f?{...d.textCyan,fontFamily:"monospace"}:{},children:f?"TEST PROGRESS":"Test Progress"}),l.jsx("div",{className:"flex items-center space-x-4",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{className:`text-sm font-mono ${f?"":"text-gray-600"}`,style:f?{...d.textYellow,fontFamily:"monospace"}:{},children:p(r)})]})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:`text-sm font-medium ${f?"":"text-gray-700"}`,style:f?{color:he.yellow,fontFamily:"monospace"}:{},children:"Progress"}),l.jsxs("span",{className:`text-sm font-semibold ${f?"":v(h)}`,style:f?{...d.textCyan,fontFamily:"monospace"}:{},children:[h,"%"]})]}),l.jsx("div",{className:`w-full rounded-full h-3 overflow-hidden border ${f?"bg-gray-800 border-cyan-400/50":"bg-gray-200"}`,style:f?d.glow:{},children:l.jsx(ht.div,{className:`h-full transition-colors duration-300 ${f?"":y(h)}`,style:f?{background:`linear-gradient(to right, ${he.yellow}, ${he.cyan})`,boxShadow:`0 0 10px ${he.cyan}`}:{},initial:{width:0},animate:{width:`${h}%`},transition:{duration:.5,ease:"easeOut"}})})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 mb-4",children:[l.jsxs("div",{className:`text-center p-2 sm:p-3 rounded-lg border ${f?Bt(3).className:"bg-blue-50"}`,style:f?{...Bt(3).style,...d.glow}:{},children:[l.jsx("div",{className:`text-lg sm:text-2xl font-bold ${f?"":"text-blue-600"}`,style:f?{...d.textCyan,fontFamily:"monospace"}:{},children:e}),l.jsx("div",{className:`text-xs ${f?"":"text-blue-600"}`,style:f?{color:he.yellow,fontFamily:"monospace"}:{},children:"Answered"})]}),l.jsxs("div",{className:`text-center p-2 sm:p-3 rounded-lg border ${f?Bt(1).className:"bg-gray-50"}`,style:f?{...Bt(1).style,...d.glow}:{},children:[l.jsx("div",{className:`text-lg sm:text-2xl font-bold ${f?"":"text-gray-600"}`,style:f?{...d.textYellow,fontFamily:"monospace"}:{},children:g}),l.jsx("div",{className:`text-xs ${f?"":"text-gray-600"}`,style:f?{color:he.yellow,fontFamily:"monospace"}:{},children:"Remaining"})]}),l.jsxs("div",{className:`text-center p-2 sm:p-3 rounded-lg border ${f?Bt(2).className:"bg-purple-50"}`,style:f?{...Bt(2).style,...d.glow}:{},children:[l.jsx("div",{className:`text-lg sm:text-2xl font-bold ${f?"":"text-purple-600"}`,style:f?{...d.textPurple,fontFamily:"monospace"}:{},children:t}),l.jsx("div",{className:`text-xs ${f?"":"text-purple-600"}`,style:f?{color:he.yellow,fontFamily:"monospace"}:{},children:"Total"})]})]}),l.jsx("div",{className:"mb-4",children:e===t?l.jsx(ht.div,{className:`flex items-center justify-center p-3 border rounded-lg ${f?"border":"bg-green-50 border-green-200"}`,style:f?{backgroundColor:he.black,borderColor:he.green,...d.glow}:{},initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:l.jsx("span",{className:`font-medium ${f?"":"text-green-600"}`,style:f?{...d.textGreen,fontFamily:"monospace"}:{},children:" All questions answered! Ready to submit."})}):g===1?l.jsx(ht.div,{className:`flex items-center justify-center p-3 border rounded-lg ${f?"border":"bg-yellow-50 border-yellow-200"}`,style:f?{backgroundColor:he.black,borderColor:he.yellow,...d.glow}:{},initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:l.jsx("span",{className:`font-medium ${f?"":"text-yellow-600"}`,style:f?{...d.textYellow,fontFamily:"monospace"}:{},children:"Almost there! 1 question remaining."})}):l.jsx("div",{className:`flex items-center justify-center p-3 border rounded-lg ${f?"border":"bg-gray-50 border-gray-200"}`,style:f?{backgroundColor:he.black,borderColor:he.cyan}:{},children:l.jsxs("span",{className:`font-medium ${f?"":"text-gray-600"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:[g," questions remaining"]})})}),a&&l.jsx("div",{className:"flex justify-center",children:l.jsx(ht.button,{onClick:n,disabled:s,className:`px-8 py-3 rounded-lg font-semibold transition-all duration-300 border-2 ${c?"border":s?"bg-gray-400 cursor-not-allowed text-white":"bg-green-600 hover:bg-green-700 shadow-lg hover:shadow-xl text-white"}`,style:c?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",...s?{}:d.glow}:{},whileHover:s?{}:{scale:1.05},whileTap:s?{}:{scale:.95},children:s?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:`animate-spin rounded-full h-4 w-4 border-b-2 ${c?"":"border-white"}`,style:c?{borderColor:he.cyan}:{}}),l.jsx("span",{children:c?"SUBMITTING...":"Submitting..."})]}):l.jsxs("div",{className:"flex items-center space-x-2",children:[!c&&l.jsx("span",{children:""}),l.jsx("span",{children:c?"SUBMIT TEST":"Submit Test"})]})})})]})},Zde=(e,t)=>{const[r,n,s]=hW(`test_progress_${e}_${t}`,{}),[a,i]=_.useState(!1),[o,c]=_.useState(0),[u,d]=_.useState(0),[f,h]=_.useState(!1),[g,p]=_.useState(null),y=_.useRef(null),v=_.useRef(null),C=_.useCallback((I,B)=>{if(!window.tokenManager||!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot save progress: No valid JWT token");return}n(W=>({...W,[I]:B})),console.log(`Saved progress for question ${I}:`,B)},[n]),S=_.useCallback(I=>!window.tokenManager||!window.tokenManager.isAuthenticated()?(console.warn("[WARN] Cannot get progress: No valid JWT token"),null):r[I]||null,[r]),w=_.useCallback(()=>{if(console.log(`[DEBUG] clearTestProgress called with testType: ${e}, testId: ${t}`),!window.tokenManager||!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot clear progress: No valid JWT token");return}const I=`test_progress_${e}_${t}`;console.log(`[DEBUG] Removing localStorage key: ${I}`);const B=Object.keys(r).length>0;s(),console.log(B?`[DEBUG] Progress cleared for test ${e}_${t}`:`[DEBUG] No progress found to clear for test ${e}_${t}`)},[s,e,t,r]),T=_.useCallback(()=>{y.current&&(T(y.current),y.current=null),v.current&&(T(v.current),v.current=null)},[]),N=_.useCallback(()=>{console.log(`[DEBUG] setupProgressTrackingForPage called with testType: ${e}, testId: ${t}`),v.current=setInterval(()=>{console.log("[DEBUG] Auto-saving progress..."),R()},3e4),console.log("[DEBUG] Progress tracking interval set up (30 seconds)")},[e,t]),A=_.useCallback(()=>{console.log(`[DEBUG] updateProgressDisplayForPage called with testType: ${e}, testId: ${t}`);const I=F(),B=u>0?Math.round(I/u*100):0;return console.log(`[DEBUG] Progress: ${I}/${u} questions answered`),console.log(`[DEBUG] Progress bar updated: ${B}%`),{answeredQuestions:I,totalQuestions:u,percentage:B}},[e,t,u]),P=_.useCallback(()=>{console.log("[DEBUG] updateSubmitButtonStateForPage called");const I=F();console.log(`[DEBUG] Submit button state check: ${I}/${u} questions answered`);const B=I===u&&u>0;return console.log(B?"[DEBUG] Submit button enabled - all questions answered":"[DEBUG] Submit button disabled - not all questions answered"),B},[u]),j=_.useCallback(()=>{console.log(`[DEBUG] loadSavedProgressForPage called with testType: ${e}, testId: ${t}`);try{if(console.log("[DEBUG] Loaded progress from localStorage:",r),Object.keys(r).length===0){console.log("[DEBUG] No saved progress found");return}const I=Object.keys(r).length;c(I),console.log(`[DEBUG] Restored ${I} answered questions`)}catch(I){console.error("[ERROR] Failed to load saved progress:",I),p(I.message)}},[e,t,r]),F=_.useCallback(()=>{console.log(`[DEBUG] getAnsweredQuestionsCountForPage called with testType: ${e}`);const I=Object.keys(r).length;return c(I),console.log(`[DEBUG] Found ${I} answered questions`),I},[e,r]),R=_.useCallback(()=>{console.log(`[DEBUG] saveProgressForPage called with testType: ${e}, testId: ${t}`);try{console.log("[DEBUG] Progress saved:",r)}catch(I){console.error("[ERROR] Failed to save progress:",I),p(I.message)}},[e,t,r]),L=_.useCallback(()=>{try{const I=`test_completed_${e}_${t}`,B=localStorage.getItem(I)==="true";return i(B),B}catch(I){return console.error("Error checking test completion:",I),!1}},[e,t]),V=_.useCallback(()=>{try{const I=`test_completed_${e}_${t}`;localStorage.setItem(I,"true"),i(!0),console.log(`Test ${e}_${t} marked as completed`)}catch(I){console.error("Error marking test completed:",I)}},[e,t]),Z=_.useCallback(()=>{console.log("Marking test completed in UI:",{testType:e,testId:t}),V()},[e,t,V]),Y=_.useCallback(I=>{try{const B=`test_creation_state_${e}_${t}`;localStorage.setItem(B,JSON.stringify(I)),console.log("Test creation state saved:",I)}catch(B){console.error("Error saving test creation state:",B)}},[e,t]),re=_.useCallback(()=>{try{const I=`test_creation_state_${e}_${t}`;localStorage.removeItem(I),console.log("Test creation state cleared")}catch(I){console.error("Error clearing test creation state:",I)}},[e,t]),ue=_.useCallback((I,B)=>{try{const W=`test_step_${e}_${t}_${I}`;localStorage.setItem(W,JSON.stringify(B)),console.log(`Step ${I} data saved:`,B)}catch(W){console.error(`Error saving step ${I} data:`,W)}},[e,t]),z=_.useCallback(I=>{try{const B=`test_step_${e}_${t}_${I}`,W=localStorage.getItem(B);return W?JSON.parse(W):null}catch(B){return console.error(`Error restoring step ${I} data:`,B),null}},[e,t]),X=_.useCallback(()=>{try{const I=`test_creation_state_${e}_${t}`,B=localStorage.getItem(I);return B?JSON.parse(B):null}catch(I){return console.error("Error restoring test creation state:",I),null}},[e,t]);return _.useEffect(()=>()=>{T()},[e,t,N,j,T]),_.useEffect(()=>{F()},[r,F]),{progress:r,isCompleted:a,answeredCount:o,totalQuestions:u,isLoading:f,error:g,saveProgress:C,getProgress:S,clearProgress:w,clearInterval:T,setupProgressTracking:N,updateProgress:A,updateSubmitButton:P,loadProgress:j,getAnsweredCount:F,saveProgressForPage:R,checkCompleted:L,markCompleted:V,markCompletedUI:Z,saveState:Y,clearState:re,saveStepData:ue,restoreStepData:z,restoreState:X,setTotalQuestions:d,setError:p}},e0e=({testData:e,onTestComplete:t,onBackToCabinet:r})=>{const{user:n}=Is(),{makeAuthenticatedRequest:s}=Gl(),{showNotification:a}=ci(),{theme:i,isCyberpunk:o,themeClasses:c}=Da(),u=Oa(i),[d,f]=_.useState({width:window.innerWidth,height:window.innerHeight});_.useEffect(()=>{const _e=()=>{f({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",_e),()=>window.removeEventListener("resize",_e)},[]);const{startTracking:h,stopTracking:g,getCheatingData:p,clearData:y}=T1("word_matching",e?.id,n?.student_id||n?.id),[v,C]=_.useState(null),[S,w]=_.useState({}),[T,N]=_.useState(null),[A,P]=_.useState(0),j=_.useRef(null),F=_.useRef(null),R=_.useRef(!1),L=_.useRef(null),[V,Z]=_.useState(800),Y={VERY_SMALL:400,MOBILE:600,TABLET:900},re={VERY_SMALL:.6,MOBILE:.8,TABLET:.9,DESKTOP:1},ue={CANVAS_HEIGHT:400,BLOCK_WIDTH:140,BLOCK_HEIGHT:50,BLOCK_SPACING:80,MARGIN:50},z=d.width<Y.VERY_SMALL,X=d.width>=Y.VERY_SMALL&&d.width<Y.MOBILE,I=d.width>=Y.MOBILE&&d.width<Y.TABLET;d.width>=Y.TABLET;const B=z?re.VERY_SMALL:X?re.MOBILE:I?re.TABLET:re.DESKTOP;_.useEffect(()=>{const _e=()=>{if(L.current){const Fe=L.current.clientWidth;console.log(" Container width detected:",Fe),Fe>0&&Z(Fe)}};_e();const Ee=[setTimeout(_e,50),setTimeout(_e,100),setTimeout(_e,200),setTimeout(_e,500)];return window.addEventListener("resize",_e),()=>{Ee.forEach(Fe=>clearTimeout(Fe)),window.removeEventListener("resize",_e)}},[v]);const W=ue.BLOCK_WIDTH*B,D=ue.BLOCK_HEIGHT*B,U=ue.BLOCK_SPACING*B,q=ue.MARGIN*B,H=q;console.log(" Mobile Debug:",{screenWidth:d.width,containerWidth:L.current?.clientWidth,canvasWidth:V,scale:B,blockWidth:W,margin:q,leftBlockX:H,displayDataLoaded:!!v});const te=H+W+20+W+q,Q=te<=V;let ae,ce=W,me=D;if(Q)ae=Math.min(Math.max(H+W+20,V-W-q),V-W-q);else{const _e=V-q*2,Ee=Math.floor((_e-20)/2);ce=Math.max(60,Ee),me=Math.max(30,me*(ce/W)),ae=H+ce+20,console.log(" Very small screen - adjusted block size:",{availableWidth:_e,maxBlockWidth:Ee,actualBlockWidth:ce,actualBlockHeight:me})}console.log(" Right Block Position:",{rightBlockX:ae,rightBlockRightEdge:ae+ce,canvasWidth:V,fits:ae+ce<=V,canFitSideBySide:Q,minRequiredWidth:te});const xe=q,se={DRAGGED_WORD:Math.max(8,14*B),ORIGINAL_WORD:Math.max(10,16*B),LEFT_WORD:Math.max(10,14*B)},De=Math.max(1,3*B),He=_.useCallback((_e,Ee,Fe)=>{if(!_e)return me;const at=Ee*.55,jt=Math.floor(Fe/at),Mt=Math.ceil(_e.length/jt),Be=Ee*1.1,lt=12*B,ct=Mt*Be+lt,Qt=Math.max(me*.8,30*B);return Math.max(Qt,ct)},[me,B]),_t=_.useCallback(()=>{if(!v?.leftWords||!v?.rightWords)return ue.CANVAS_HEIGHT*B;let _e=q*2;for(let Fe=0;Fe<v.leftWords.length;Fe++){const at=v.leftWords[Fe],jt=v.rightWords[Fe],Mt=He(at,se.LEFT_WORD,ce),Be=He(jt,se.ORIGINAL_WORD,ce),lt=Math.max(Mt,Be);_e+=lt,Fe<v.leftWords.length-1&&(_e+=20*B)}const Ee=ue.CANVAS_HEIGHT*B;return Math.max(Ee,_e)},[v,He,se,ce,q,B])();_.useCallback((_e,Ee)=>{if(!_e||!Ee)return U;const Fe=_e.map((Mt,Be)=>{const lt=Ee[Be],ct=He(Mt,se.LEFT_WORD,ce),Qt=He(lt,se.ORIGINAL_WORD,ce);return Math.max(ct,Qt)}),at=Math.max(...Fe),jt=20*B;return at+jt},[U,He,se,ce,B]);const tt=_.useCallback(()=>{if(!v?.leftWords||!v?.rightWords)return[];const _e=[];let Ee=q;for(let Fe=0;Fe<v.leftWords.length;Fe++){const at=v.leftWords[Fe],jt=v.rightWords[Fe],Mt=He(at,se.LEFT_WORD,ce),Be=He(jt,se.ORIGINAL_WORD,ce),lt=Math.max(Mt,Be);_e.push({y:Ee,leftHeight:Mt,rightHeight:Be,rowHeight:lt}),Ee+=lt+20*B}return _e},[v,He,se,ce,q,B])(),[Pe,je]=_.useState([]),[Qe,vt]=_.useState(!1),[Ot,$t]=_.useState(!1),[Gt,ir]=_.useState(null),[dt,gt]=_.useState(!1),[kt,Ge]=_.useState(!1),[Xe,Et]=_.useState(!0),Ut=_.useRef(null);k2(Xe,_.useCallback(({confirm:_e,cancel:Ee})=>{console.log(" WordMatchingStudent: Browser back button intercepted during test!"),console.log(" WordMatchingStudent: isBackInterceptEnabled:",Xe),console.log(" WordMatchingStudent: Setting pending navigation and showing modal"),Ut.current={confirm:_e,cancel:Ee},Ge(!0)},[Xe])),_.useEffect(()=>{if(e){if(console.log(" WordMatchingStudent: Initializing test data:",e),console.log(" Interaction type:",e.interaction_type),console.log(" Left words:",e.leftWords),console.log(" Right words:",e.rightWords),console.log(" Correct pairs:",e.correctPairs),!Array.isArray(e.leftWords)||!Array.isArray(e.rightWords)){console.error(" Invalid data structure - leftWords or rightWords not arrays:",{leftWords:e.leftWords,rightWords:e.rightWords});return}if(C(e),n?.student_id){const Fe=`test_progress_${n.student_id}_word_matching_${e.id}`,at=Es(Fe);at?(w(at.answers||{}),je(at.arrows||[]),ir(new Date(at.startTime)),console.log(" Test progress restored:",at)):ir(new Date)}else ir(new Date);e?.id&&(n?.student_id||n?.id)&&h();const _e=Number(e?.allowed_time||0),Ee=n?.student_id||n?.id||"unknown";if(j.current=`test_timer_${Ee}_word_matching_${e.id}`,R.current=!1,_e>0)try{const Fe=localStorage.getItem(j.current),at=Date.now();if(Fe){const jt=JSON.parse(Fe),Mt=Math.floor((at-new Date(jt.lastTickAt).getTime())/1e3),Be=Math.max(0,Number(jt.remainingSeconds||_e)-Math.max(0,Mt));P(Be),F.current=at,console.log(" Timer initialized from cache:",{remaining:Be,allowedSeconds:_e})}else P(_e),F.current=at,localStorage.setItem(j.current,JSON.stringify({remainingSeconds:_e,lastTickAt:new Date(at).toISOString(),startedAt:new Date(at).toISOString()})),console.log(" Timer initialized fresh:",{allowedSeconds:_e});R.current=!0}catch(Fe){console.error("Timer cache init error:",Fe),P(_e),R.current=!0}else P(0),R.current=!0}},[e,n?.student_id,n?.id,h]),_.useEffect(()=>{if(v&&Gt&&n?.student_id){const _e=setInterval(()=>{const Ee={answers:S,arrows:Pe,startTime:Gt.toISOString()},Fe=`test_progress_${n.student_id}_word_matching_${e.id}`;gs(Fe,Ee,ls.test_progress),console.log(" Progress auto-saved")},3e4);return()=>clearInterval(_e)}},[v,S,Pe,Gt,n?.student_id,e?.id]);const Wt=_.useCallback((_e,Ee)=>{if(console.log(" handleWordClick called:",{side:_e,index:Ee,interactionType:e?.interaction_type,selectedWord:T}),e?.interaction_type!=="arrow"){console.log(" Not arrow mode, ignoring click");return}if(T){if(T.side===_e&&T.index===Ee)console.log(" Deselecting word"),N(null);else if(T.side!==_e){console.log(" Creating arrow connection:",{startWord:T,endWord:{side:_e,index:Ee}});const Fe={id:Date.now().toString(),startWord:T,endWord:{side:_e,index:Ee},color:"#3B82F6"};je(at=>{const jt=[...at,Fe];return console.log(" Updated arrows:",jt),jt}),w(at=>{const jt={...at,[T.index]:Ee};return console.log(" Updated answers:",jt),jt}),N(null)}}else console.log(" Selecting word:",{side:_e,index:Ee}),N({side:_e,index:Ee})},[T,e?.interaction_type]);_.useCallback((_e,Ee)=>{e.interaction_type==="drag"&&w(Fe=>({...Fe,[_e]:Ee}))},[e?.interaction_type]);const pr=_.useCallback(()=>{gt(!0)},[]),wr=_.useCallback(()=>{w({}),je([]),N(null),gt(!1)},[]),br=_.useCallback(()=>{Ut.current=null,Ge(!0)},[]),lr=_.useCallback(()=>{console.log(" WordMatchingStudent: confirmBackToCabinet called"),console.log(" WordMatchingStudent: Current location:",window.location.href),console.log(" WordMatchingStudent: Current history state:",window.history.state),Ge(!1);const _e=Ut.current;if(console.log(" WordMatchingStudent: Pending navigation:",_e),Ut.current=null,e?.id&&n?.student_id){const Fe=`anti_cheating_${n?.student_id||n?.id||"unknown"}_word_matching_${e.id}`,jt=(Es(Fe)||{tabSwitches:0}).tabSwitches||0,Mt=jt+1,Be=Mt>=2;console.log(" WordMatchingStudent: Tab switch count:",jt,"->",Mt),gs(Fe,{tabSwitches:Mt,isCheating:Be},ls.anti_cheating)}if(console.log(" WordMatchingStudent: Disabling intercept"),Et(!1),_e){console.log(" WordMatchingStudent: Cleaning up intercept history state");try{const Ee=window.history.state;if(console.log(" WordMatchingStudent: Current history state before cleanup:",Ee),Ee&&Ee.__intercept){const Fe=Ee.prevState??null;console.log(" WordMatchingStudent: Restoring previous state:",Fe),window.history.replaceState(Fe,document.title,window.location.href),console.log(" WordMatchingStudent: History state after cleanup:",window.history.state)}}catch(Ee){console.warn(" WordMatchingStudent: Failed to restore history state:",Ee)}}console.log(" WordMatchingStudent: Scheduling navigation in 100ms"),setTimeout(()=>{console.log(" WordMatchingStudent: Executing navigation to /student"),console.log(" WordMatchingStudent: Current location before navigation:",window.location.href),window.location.href="/student",console.log(" WordMatchingStudent: window.location.href set to /student")},100)},[r,e,n?.student_id,n?.id]),Er=_.useCallback(()=>{const _e=Ut.current;Ut.current=null,_e?.cancel&&_e.cancel(),Ge(!1)},[]),we=_.useCallback(async()=>{if(v){vt(!0);try{const _e=v?.leftWords?.length||0;let Ee=0,Fe={};e.interaction_type==="drag"?Object.entries(S).forEach(([fe,ge])=>{const Se=v?.correctPairs?.[fe];ge===Se&&Ee++,Fe[fe]=ge}):Pe.forEach(fe=>{const ge=fe.startWord.side==="left"?fe.startWord.index:fe.endWord.index,Se=fe.startWord.side==="right"?fe.startWord.index:fe.endWord.index;v?.correctPairs?.[ge]===Se&&Ee++,Fe[ge]=Se});const at=Ee,jt=_e;console.log(` Final Score: ${at}/${jt} (${Math.round(at/jt*100)}%)`);const Mt=new Date,Be=Gt?Math.round((Mt-Gt)/1e3):0,lt=Gt?Gt.toISOString():Mt.toISOString(),ct=p(),Qt=n.student_id,rr=`retest_assignment_id_${Qt}_word_matching_${e.id}`,_r=localStorage.getItem(rr),{academicCalendarService:tn}=await ni(async()=>{const{academicCalendarService:fe}=await Promise.resolve().then(()=>fS);return{academicCalendarService:fe}},void 0);await tn.loadAcademicCalendar();const an=tn.getCurrentTerm()?.id;if(!an)throw new Error("No current academic period found");const pe={test_id:e.id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:Qt,academic_period_id:an,parent_test_id:e.id,retest_assignment_id:_r?Number(_r):null,interaction_type:e.interaction_type,answers:Fe,score:at,maxScore:jt,time_taken:Be,started_at:lt,submitted_at:Mt.toISOString(),caught_cheating:ct.caught_cheating,visibility_change_times:ct.visibility_change_times};console.log(" Submission data being sent:",pe),console.log(" TestData structure:",e),console.log(" Submitting test results...");const Ne=await s("/.netlify/functions/submit-word-matching-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(pe)});console.log(" Submission response received:",Ne.status);const le=await Ne.json();if(le.success){if(a("Test submitted successfully!","success"),g(),y(),n?.student_id&&u1(n.student_id,"word_matching",e.id),!!_r&&n?.student_id){let ge=3;try{const it=localStorage.getItem(`student_active_tests_${n.student_id}`);if(it){const de=JSON.parse(it)?.tests?.find(ve=>ve.test_id===e.id&&ve.test_type==="word_matching");de&&(ge=de.retest_attempts_left||de.max_attempts||3)}}catch(it){console.error("Error checking active tests cache:",it)}const ze=(at>0&&jt>0?at/jt*100:0)>=50;if(ze){const it=`retest_attempt${ge}_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(it,"true"),console.log(" Passed retest, marking last-slot key:",it);let Ye=0;for(let Me=1;Me<=10;Me++){const Oe=`retest_attempt${Me}_${n.student_id}_word_matching_${e.id}`;localStorage.getItem(Oe)==="true"&&Ye++}const de=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(de,"true"),console.log(" Marked retest as completed (student passed):",de);const ve=`retest_attempts_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(ve,JSON.stringify({used:Ye,max:ge})),console.log(" Set retest attempts metadata (student passed):",ve,{used:Ye,max:ge})}else{let it=1;for(let Oe=1;Oe<=10;Oe++){const nt=`retest_attempt${Oe}_${n.student_id}_word_matching_${e.id}`;if(localStorage.getItem(nt)!=="true"){it=Oe;break}}const Ye=`retest_attempt${it}_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(Ye,"true"),console.log(" Marked retest attempt as completed:",Ye);let de=0;for(let Oe=1;Oe<=10;Oe++){const nt=`retest_attempt${Oe}_${n.student_id}_word_matching_${e.id}`;localStorage.getItem(nt)==="true"&&de++}const ve=ge-de,Me=ve<=0||ze;if(console.log(" Retest completion check:",{usedAttempts:de,maxAttempts:ge,attemptsLeft:ve,passed:ze,shouldComplete:Me}),Me){const Oe=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(Oe,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",Oe);const nt=`retest_attempts_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(nt,JSON.stringify({used:de,max:ge})),console.log(" Set retest attempts metadata (attempts exhausted):",nt,{used:de,max:ge})}}}else if(n?.student_id){const ge=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(ge,"true"),console.log(" Test marked as completed in localStorage:",ge)}if(n?.student_id){const ge=`student_results_table_${n.student_id}`;gs(ge,le,ls.student_results_table),console.log(" Test results cached with key:",ge)}if(n?.student_id){const ge=`retest1_${Qt}_word_matching_${e.id}`;localStorage.removeItem(ge),localStorage.removeItem(rr)}j.current&&localStorage.removeItem(j.current),t&&(Et(!1),t({score:at,caught_cheating:ct.caught_cheating,visibility_change_times:ct.visibility_change_times})),vt(!1)}else throw new Error(le.message||"Failed to submit test")}catch(_e){console.error("Error submitting test:",_e),vt(!1)}}},[v,S,Pe,e,n,Gt,p,g,y,s,t]);return _.useEffect(()=>{if(!v||!e||!Gt)return;const _e=Number(e?.allowed_time||0);if(!_e)return;console.log(" Timer effect triggered:",{allowedSeconds:_e,timeRemaining:A,initialized:R.current,testData:e?.id});const Ee=setInterval(()=>{P(Fe=>{const at=Fe>0?Fe:_e;if(at<=0)return 0;const jt=Math.max(0,at-1);try{const Mt=Date.now();F.current||(F.current=Mt),j.current&&localStorage.setItem(j.current,JSON.stringify({remainingSeconds:jt,lastTickAt:new Date(Mt).toISOString(),startedAt:Gt?Gt.toISOString():new Date(Mt-(_e-jt)*1e3).toISOString()}))}catch{}return jt===0&&we(),jt})},1e3);return()=>clearInterval(Ee)},[v,e?.allowed_time,Gt,we]),v?l.jsxs(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-4xl mx-auto p-6",children:[l.jsx(Aa,{isOpen:Qe,onClose:()=>{},title:"Submitting",size:"small",children:l.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[l.jsx(un,{size:"lg",className:"mb-3"}),l.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Submitting test..."}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we process your results"})]})}),l.jsx("div",{className:"flex justify-end mb-2",children:l.jsx(ot,{onClick:br,variant:"outline",size:"sm",disabled:Qe,children:"Back to Cabinet"})}),l.jsxs("div",{className:`rounded-lg border-2 p-6 mb-6 ${o?Bt(1).className:`${c.cardBg} ${c.cardBorder}`}`,style:o?{...Bt(1).style,...u.glow,boxShadow:`${u.glow.boxShadow}, inset 0 0 20px ${mW(he.cyan,.1)}`}:{},children:[l.jsxs("div",{className:"text-left mb-4",children:[l.jsx("h2",{className:`text-2xl font-bold ${o?"tracking-wider":c.text} mb-2`,style:o?{...u.textCyan,fontFamily:"monospace"}:{},children:o?e.test_name.toUpperCase():e.test_name}),l.jsx("p",{className:`${o?"text-yellow-400 tracking-wider":c.textSecondary}`,style:o?{fontFamily:"monospace",textShadow:"0 0 5px rgba(255, 215, 0, 0.5)"}:{},children:o?e.interaction_type==="drag"?"DRAG WORDS FROM LEFT TO RIGHT TO MATCH THEM":"CLICK ON THE WORD OR PHRASE ON THE LEFT, THEN CLICK ON THE MATCHING WORD OR PHRASE ON THE RIGHT TO CONNECT THEM":e.interaction_type==="drag"?"Drag words from left to right to match them":"Click on the word or phrase on the left, then click on the matching word or phrase on the right to connect them"})]}),e&&l.jsx("div",{className:"mb-4",children:l.jsx(dH,{answeredCount:Object.keys(S).length+(e.interaction_type==="arrow"?Pe.length:0),totalQuestions:v?.leftWords?.length||0,timeElapsed:(()=>{const _e=Number(e?.allowed_time||0);return _e<=0?0:A>0?A:_e})(),themeClasses:c,isCyberpunk:o})})]}),e.interaction_type==="drag"?l.jsx(Ht,{className:`mb-6 ${o?Bt(0).className:""}`,style:o?{...Bt(0).style,...u.glow}:{},children:l.jsx("div",{ref:L,className:"relative w-full",children:l.jsx(Cm,{width:V,height:_t,className:`border-2 rounded-lg ${Qe?"pointer-events-none opacity-50":""} ${o?"border-cyan-400":"border-gray-200"}`,style:o?{borderColor:he.cyan,backgroundColor:he.black}:{},children:l.jsxs(km,{children:[v.leftWords.map((_e,Ee)=>{const Fe=S[Ee]!==void 0,at=He(_e,se.LEFT_WORD,ce),jt=tt[Ee],Mt=jt?jt.y:xe+Ee*U;return l.jsxs(au,{x:H,y:Mt,draggable:!Fe,onDragStart:Be=>{Be.target.moveToTop()},onDragEnd:Be=>{Be.target.getStage();const lt=v.rightWords,ct=ce+60,Qt=ae-30;console.log(" Drop detection - Word dropped at:",Be.target.x(),Be.target.y());for(let rr=0;rr<lt.length;rr++){const _r=lt[rr],tn=tt[rr],Fr=tn?tn.y:xe+rr*U,an=He(_r,se.ORIGINAL_WORD,ce),pe=Qt,Ne=Qt+ct,le=Fr,fe=Fr+an;if(console.log(` Checking drop zone ${rr}:`,{left:pe,right:Ne,top:le,bottom:fe,word:lt[rr]}),Be.target.x()>=pe&&Be.target.x()<=Ne&&Be.target.y()>=le&&Be.target.y()<=fe){if(Object.entries(S).some(([Se,ze])=>ze===rr&&parseInt(Se)!==Ee)){console.log(` Dropzone ${rr} is already occupied, resetting position`),Be.target.position({x:H,y:Mt});return}console.log(` Match found! Word "${v.leftWords[Ee]}" matched with "${lt[rr]}"`),w(Se=>({...Se,[Ee]:rr}));break}}console.log(" No match found, resetting position"),Be.target.position({x:H,y:Mt})},children:[l.jsx(Ti,{width:ce,height:at,fill:Fe?"#e5e7eb":"#3b82f6",stroke:Fe?"#9ca3af":"#1d4ed8",strokeWidth:2,cornerRadius:8,opacity:Fe?.5:1}),l.jsx(Hu,{text:_e,x:ce/2,y:at/2,fontSize:se.LEFT_WORD,fontFamily:"Arial",fill:Fe?"#dc2626":"white",align:"center",verticalAlign:"middle",width:ce,offsetX:ce/2,offsetY:at/2,wrap:"word",ellipsis:!0,listening:!1})]},`left-${Ee}`)}),v.rightWords.map((_e,Ee)=>{const Fe=He(_e,se.ORIGINAL_WORD,ce),at=tt[Ee],jt=at?at.y:xe+Ee*U,Mt=Object.keys(S).find(Be=>S[Be]===Ee);return l.jsxs(au,{x:ae,y:jt,children:[l.jsx(Ti,{width:ce,height:Fe,fill:Mt?"#10b981":"#f3f4f6",stroke:Mt?"#059669":"#d1d5db",strokeWidth:2,cornerRadius:8}),l.jsx(Hu,{text:_e,x:ce/2,y:Fe/2,fontSize:se.ORIGINAL_WORD,fontFamily:"Arial",fill:"#000000",align:"center",verticalAlign:"middle",width:ce,offsetX:ce/2,offsetY:Fe/2,wrap:"word",ellipsis:!0,listening:!1}),Mt&&l.jsx(Hu,{text:v.leftWords[Mt],x:ce/2,y:Fe-5,fontSize:se.DRAGGED_WORD,fontFamily:"Arial",fill:"#dc2626",align:"center",verticalAlign:"middle",width:ce,offsetX:ce/2,offsetY:se.DRAGGED_WORD/2,wrap:"word",ellipsis:!0})]},`right-${Ee}`)})]})})})}):l.jsx(Ht,{className:`mb-6 ${o?Bt(0).className:""}`,style:o?{...Bt(0).style,...u.glow}:{},children:l.jsx("div",{ref:L,className:"relative w-full",children:l.jsx(Cm,{width:V,height:_t,className:`border-2 rounded-lg ${Qe?"pointer-events-none opacity-50":""} ${o?"border-cyan-400":"border-gray-200"}`,style:o?{borderColor:he.cyan,backgroundColor:he.black}:{},children:l.jsxs(km,{children:[v?.leftWords?.map((_e,Ee)=>{const Fe=He(_e,se.LEFT_WORD,ce),at=tt[Ee],jt=at?at.y:xe+Ee*U,Mt=T?.side==="left"&&T?.index===Ee;return l.jsxs(au,{x:H,y:jt,onClick:()=>Wt("left",Ee),children:[l.jsx(Ti,{width:ce,height:Fe,fill:Mt?"#3b82f6":"#f3f4f6",stroke:Mt?"#1d4ed8":"#d1d5db",strokeWidth:Mt?3:2,cornerRadius:8}),l.jsx(Hu,{text:_e,x:ce/2,y:Fe/2,fontSize:se.LEFT_WORD,fontFamily:"Arial",fill:Mt?"white":"#374151",align:"center",verticalAlign:"middle",width:ce,offsetX:ce/2,offsetY:Fe/2,wrap:"word",ellipsis:!0,listening:!1})]},`left-${Ee}`)}),v?.rightWords?.map((_e,Ee)=>{const Fe=He(_e,se.ORIGINAL_WORD,ce),at=tt[Ee],jt=at?at.y:xe+Ee*U,Mt=T?.side==="right"&&T?.index===Ee;return l.jsxs(au,{x:ae,y:jt,onClick:()=>Wt("right",Ee),children:[l.jsx(Ti,{width:ce,height:Fe,fill:Mt?"#3b82f6":"#f3f4f6",stroke:Mt?"#1d4ed8":"#d1d5db",strokeWidth:Mt?3:2,cornerRadius:8}),l.jsx(Hu,{text:_e,x:ce/2,y:Fe/2,fontSize:se.ORIGINAL_WORD,fontFamily:"Arial",fill:"#000000",align:"center",verticalAlign:"middle",width:ce,offsetX:ce/2,offsetY:Fe/2,wrap:"word",ellipsis:!0,listening:!1})]},`right-${Ee}`)}),Pe.map((_e,Ee)=>{const Fe=v?.leftWords?.[_e.startWord.index],at=v?.rightWords?.[_e.endWord.index],jt=He(Fe,se.LEFT_WORD,ce),Mt=He(at,se.ORIGINAL_WORD,ce),Be=tt[_e.startWord.index],lt=tt[_e.endWord.index],ct=Be?Be.y+jt/2:xe+_e.startWord.index*U+jt/2,Qt=lt?lt.y+Mt/2:xe+_e.endWord.index*U+Mt/2;return l.jsx(Vi,{points:[H+ce+20,ct,ae-20,Qt],stroke:_e.color||"#3b82f6",strokeWidth:De,lineCap:"round",lineJoin:"round"},Ee)})]})})})}),l.jsx(Ht,{className:o?Bt(1).className:"",style:o?{...Bt(1).style,...u.glow}:{},children:l.jsxs("div",{className:`submit-section flex justify-center space-x-4 ${Qe?"pointer-events-none opacity-50":""}`,children:[l.jsx(ot,{onClick:pr,variant:"outline",disabled:Qe,children:"Reset"}),l.jsx(ot,{onClick:()=>$t(!0),disabled:Qe,className:"px-8 ",style:o?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",borderWidth:"2px",...u.glow}:{},children:Qe?l.jsxs(l.Fragment,{children:[l.jsx(un,{size:"sm",color:o?he.cyan:"white",className:"mr-2"}),o?"SUBMITTING...":"Submitting..."]}):o?"SUBMIT TEST":"Submit Test"})]})}),l.jsx(Aa,{isOpen:dt&&!Qe,onClose:()=>gt(!1),title:"Reset Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to reset? This will clear all your progress and answers."}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ot,{onClick:()=>gt(!1),variant:"secondary",children:"Cancel"}),l.jsx(ot,{onClick:wr,variant:"primary",children:"Reset"})]})]})}),l.jsx(Aa,{isOpen:kt,onClose:Er,title:"Exit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to leave the test? Your progress will be saved."}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ot,{onClick:Er,variant:"secondary",children:"Cancel"}),l.jsx(ot,{onClick:_e=>{console.log(" WordMatchingStudent: Leave button clicked in modal"),console.log(" WordMatchingStudent: Button click event:",_e),lr()},variant:"primary",children:"Leave"})]})]})}),l.jsx(Aa,{isOpen:Ot,onClose:()=>$t(!1),title:"Submit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ot,{onClick:()=>$t(!1),variant:"secondary",children:"Cancel"}),l.jsx(ot,{onClick:()=>{$t(!1),we()},variant:"primary",className:"",style:o?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",borderWidth:"2px",...u.glow}:{},children:o?"SUBMIT":"Submit"})]})]})})]}):l.jsx("div",{className:"flex justify-center items-center min-h-screen",children:l.jsx(un,{size:"lg"})})},t0e=({id:e,x:t,y:r,width:n,height:s,text:a,fontSize:i,color:o,isSelected:c,onSelect:u,onUpdate:d,onDelete:f})=>{const[h,g]=_.useState(!1),p=_.useRef(!1),y=_.useRef(null),v=_.useRef({x:0,y:0}),C=_.useRef(null),S=5,w=()=>{p.current=!0,g(!0)},T=()=>{if(p.current=!1,g(!1),C.current)try{C.current.draggable(!1)}catch{}},N=()=>{y.current&&(clearTimeout(y.current),y.current=null)};_.useEffect(()=>()=>{N()},[]),_.useEffect(()=>{if(C.current)try{C.current.draggable(p.current)}catch{}},[h]);const A=j=>{j.cancelBubble=!0,d(e,{isEditing:!0})},P=j=>{d(e,{x:j.target.x(),y:j.target.y()})};return l.jsxs(au,{ref:C,x:t,y:r,draggable:h,dragBoundFunc:j=>p.current?j:{x:t,y:r},name:"textbox-group",onClick:j=>{j.cancelBubble=!0,u(e)},onTap:j=>{j.cancelBubble=!0,u(e),N()},onDblClick:A,onDblTap:A,onPointerDown:j=>{j.cancelBubble=!0;const F=j.evt||{};v.current={x:F.clientX??0,y:F.clientY??0},N(),y.current=setTimeout(()=>{w()},400)},onPointerMove:j=>{if(!y.current)return;const F=j.evt||{},R=Math.abs((F.clientX??0)-v.current.x),L=Math.abs((F.clientY??0)-v.current.y);(R>S||L>S)&&N()},onPointerUp:j=>{j.cancelBubble=!0,N(),T()},onPointerLeave:()=>{N(),T()},onDragEnd:j=>{P(j),T()},children:[l.jsx(Ti,{width:n,height:s,fill:c?"#fef3c7":"#ffffff",stroke:c?"#f59e0b":"#d1d5db",strokeWidth:c?2:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1},name:"textbox-rect",onTap:j=>{j.cancelBubble=!0,u(e),N()},onDblTap:j=>{j.cancelBubble=!0,A(j)}}),l.jsx(Hu,{text:a,width:n,height:s,padding:8,align:"left",verticalAlign:"top",fontSize:i,fill:o,wrap:"word",name:"textbox-text",onTap:j=>{j.cancelBubble=!0,u(e),N()},onDblTap:j=>{j.cancelBubble=!0,A(j)}})]})},r0e=({x:e,y:t,width:r,height:n,initialText:s,onSave:a,onCancel:i})=>{const o=_.useRef(null);_.useEffect(()=>{o.current&&(o.current.focus(),o.current.select())},[]);const c=u=>{u.key==="Enter"&&!u.shiftKey?(u.preventDefault(),a(o.current.value)):u.key==="Escape"&&i()};return l.jsx("textarea",{ref:o,defaultValue:s,style:{position:"absolute",top:t,left:e,width:r,height:n,fontSize:"14px",border:"2px solid #f59e0b",borderRadius:"6px",padding:"8px",background:"white",resize:"none",outline:"none",fontFamily:"inherit",lineHeight:"1.4",zIndex:1e3},onKeyDown:c,onBlur:()=>a(o.current.value)})},n0e=({width:e,height:t,lines:r,onDrawingChange:n,currentTool:s,currentColor:a,currentThickness:i,zoom:o,onZoomChange:c,isPanning:u,isFullscreen:d,constrainPanPosition:f,handleWheel:h,stageRef:g,setIsPanning:p,responsiveDimensions:y,canvasSize:v,question:C,textBoxes:S,setTextBoxes:w,selectedTextBox:T,setSelectedTextBox:N,handleTextBoxSelect:A,handleTextBoxUpdate:P,handleTextBoxDelete:j,isEditingText:F,editingTextBox:R,setIsEditingText:L,setEditingTextBox:V,setCurrentTool:Z})=>{const[Y,re]=_.useState(!1),[ue,z]=_.useState([]),[X,I]=_.useState(null),[B,W]=_.useState(null),D=_.useRef(null),[U,q]=_.useState(.25),[H,te]=_.useState({x:0,y:0}),Q=_.useRef(null),ae=_.useRef(null),ce=_.useRef(!1),me=6;_.useEffect(()=>{const Be=()=>{const lt=D.current;if(!lt)return;const ct=lt.clientWidth||1,Qt=lt.clientHeight||1,rr=Math.min(ct/(v.width||1),Qt/(v.height||1));q(Math.min(rr,1))};return Be(),window.addEventListener("resize",Be),()=>window.removeEventListener("resize",Be)},[v.width,v.height,d]);const xe=Be=>{const lt=g.current,ct=lt.getPointerPosition();if(s==="pan"){if(Fe(Be.target))try{lt.draggable(!1),ce.current=!0}catch{}return}if(s==="text"){const rr={x:(ct.x-lt.x())/lt.scaleX(),y:(ct.y-lt.y())/lt.scaleY()};Q.current={...rr},ae.current={x:ct.x,y:ct.y};return}re(!0);const Qt={x:(ct.x-lt.x())/lt.scaleX(),y:(ct.y-lt.y())/lt.scaleY()};W(Qt),s==="pencil"?z([{x:Qt.x,y:Qt.y,color:a,thickness:i}]):s==="eraser"?z([{x:Qt.x,y:Qt.y,color:a,thickness:i,tool:"eraser"}]):["line","rectangle","circle"].includes(s)&&I({type:s,startX:Qt.x,startY:Qt.y,endX:Qt.x,endY:Qt.y,color:a,thickness:i})},se=Be=>{const lt=g.current,ct=lt.getPointerPosition(),Qt={x:(ct.x-lt.x())/lt.scaleX(),y:(ct.y-lt.y())/lt.scaleY()};if(te(Qt),s!=="pan"){if(s==="text"&&Q.current&&ae.current){const rr=Math.abs(ct.x-ae.current.x),_r=Math.abs(ct.y-ae.current.y);(rr>me||_r>me)&&(Q.current=null)}if(Y)if(s==="pencil"){const rr=[...ue,{x:Qt.x,y:Qt.y,color:a,thickness:i}];z(rr)}else if(s==="eraser"){const rr=[...ue,{x:Qt.x,y:Qt.y,color:a,thickness:i,tool:"eraser"}];z(rr)}else["line","rectangle","circle"].includes(s)&&X&&I({...X,endX:Qt.x,endY:Qt.y})}},De=Be=>{const lt=g.current;if(s==="pan"){if(ce.current){try{lt.draggable(!0)}catch{}ce.current=!1}return}if(s==="text"&&Q.current){const ct=Be&&Be.target;if(ct&&typeof ct.name=="function"&&ct.name()==="canvas-bg"){const rr={id:Date.now(),x:Q.current.x,y:Q.current.y,width:150,height:60,text:"Double-click to edit",fontSize:14,color:"#000000"};w(_r=>[..._r,rr]),N(rr.id)}Q.current=null,ae.current=null}if(Y){if(s==="pencil"){const ct=[...r,ue];n(ct),z([])}else if(s==="eraser"){const ct=[...r,ue];n(ct),z([])}else if(["line","rectangle","circle"].includes(s)&&X){const ct=[...r,X];n(ct),I(null)}re(!1),W(null)}},[He,rt]=_.useState(null),[_t,Ke]=_.useState(null),[tt,Pe]=_.useState(!1),[je,Qe]=_.useState(null),[vt,Ot]=_.useState(!1),[$t,Gt]=_.useState(!1),[ir,dt]=_.useState([]),[gt,kt]=_.useState(null),[Ge,Xe]=_.useState({totalGestures:0,zoomGestures:0,panGestures:0,combinedGestures:0,averageResponseTime:0});let Et=null;const Wt=(window.devicePixelRatio||1)>1.5,pr={scaleDelta:Wt?.03:.04,centerDelta:Wt?4:6,minTouchDistance:8,gestureHysteresis:.02},wr=()=>{Ot(!1),Qe(null),rt(null),Ke(null),re(!1),W(null),Gt(!1),kt(null),Et&&(cancelAnimationFrame(Et),Et=null),g.current&&g.current.stop()},br=Be=>{if(Be.length<2)return 0;const lt=Be[0],ct=Be[1];return Math.sqrt(Math.pow(ct.clientX-lt.clientX,2)+Math.pow(ct.clientY-lt.clientY,2))},lr=Be=>{if(Be.length<2)return null;const lt=Be[0],ct=Be[1];return{x:(lt.clientX+ct.clientX)/2,y:(lt.clientY+ct.clientY)/2}},Er=Be=>{dt(lt=>[...lt,{type:Be,timestamp:Date.now()}].slice(-5))},we=()=>{const Be=Date.now(),lt=ir.filter(rr=>Be-rr.timestamp<500);if(lt.length<2)return 0;const ct=lt[lt.length-1],Qt=lt[lt.length-2];return ct.type===Qt.type?pr.gestureHysteresis:0},_e=(Be,lt)=>{Xe(ct=>({totalGestures:ct.totalGestures+1,zoomGestures:Be.includes("zoom")?ct.zoomGestures+1:ct.zoomGestures,panGestures:Be.includes("pan")?ct.panGestures+1:ct.panGestures,combinedGestures:Be==="zoom+pan"?ct.combinedGestures+1:ct.combinedGestures,averageResponseTime:(ct.averageResponseTime+lt)/2}))},Ee=(Be,lt,ct,Qt)=>{const rr=g.current,_r=rr.scaleX(),tn=rr.position();let Fr=_r,an=tn;if(Be){const le=ct/He,fe=_r*le,ge=C?.max_canvas_width||1536,Se=C?.max_canvas_height||2048,ze=ge/v.width,it=Se/v.height,Ye=Math.min(ze,it,1);Fr=Math.max(.25,Math.min(Ye,fe));const de=Qt,ve={x:(de.x-rr.x())/_r,y:(de.y-rr.y())/_r};an={x:de.x-ve.x*Fr,y:de.y-ve.y*Fr}}if(lt){const le=Qt.x-_t.x,fe=Qt.y-_t.y;Be?an={x:an.x+le,y:an.y+fe}:an={x:tn.x+le,y:tn.y+fe}}Et||(Et=requestAnimationFrame(()=>{rr.scale({x:Fr,y:Fr}),rr.position(an),rr.batchDraw(),Et=null})),Be&&lt?(Qe("zoom+pan"),Gt(!0)):Be?(Qe("zoom"),Gt(!0)):lt&&Qe("pan");const Ne=Date.now()-(gt||Date.now());_e(Be&&lt?"zoom+pan":Be?"zoom":"pan",Ne),console.log(" Combined gesture",{doZoom:Be,doPan:lt,scale:Fr.toFixed(2),pos:an})},Fe=Be=>{if(!Be||typeof Be.name!="function")return!1;if((Be.name()||"").includes("textbox-"))return!0;const ct=Be.getParent&&Be.getParent();return ct&&typeof ct.name=="function"&&(ct.name()||"").includes("textbox-")},at=Be=>{const lt=Be.evt.touches,ct=Be.target;if(Fe(ct)){if(s==="pan"&&g.current)try{g.current.draggable(!1),ce.current=!0}catch{}return}lt.length===2?(Be.evt.preventDefault(),Ot(!0),Qe(null),rt(br(lt)),Ke(lr(lt)),re(!1),kt(Date.now())):lt.length===1&&(Ot(!1),Qe(null),xe(Be))},jt=Be=>{const lt=Be.evt.touches,ct=Be.target;if(!Fe(ct))if(lt.length===2&&vt){Be.evt.preventDefault();const Qt=g.current,rr=br(lt),_r=lr(lt);if(He&&_t&&Qt&&rr>pr.minTouchDistance){const tn=Math.abs(rr/He-1),Fr=Math.sqrt(Math.pow(_r.x-_t.x,2)+Math.pow(_r.y-_t.y,2)),an=we(),pe=pr.scaleDelta-an,Ne=pr.centerDelta-an*10,le=tn>pe,fe=Fr>Ne;(le||fe)&&(Ee(le,fe,rr,_r),le&&fe?Er("zoom+pan"):le?Er("zoom"):fe&&Er("pan")),console.log(" Gesture Debug",{scaleDelta:tn.toFixed(3),centerDelta:Fr.toFixed(1),doZoom:le,doPan:fe,hysteresis:an.toFixed(3),adjustedScaleDelta:pe.toFixed(3),adjustedCenterDelta:Ne.toFixed(1),gestureHistory:ir.slice(-3)})}rt(rr),Ke(_r)}else lt.length===1&&!vt&&(Be.evt.preventDefault(),se())},Mt=Be=>{const lt=Be.evt.touches,ct=Be.target;Fe(ct)||(lt.length===0?(De(Be),wr(),Gt(!1)):lt.length===1&&(Ot(!1),Qe(null),rt(null),Ke(null),Gt(!1)))};return l.jsx("div",{className:"relative w-full block sm:flex sm:justify-center",children:l.jsx("div",{className:"w-full max-w-full block sm:flex sm:justify-center",children:l.jsxs("div",{className:"relative",style:{border:d&&(y.width<window.innerWidth-40||y.height<window.innerHeight-40)?"2px solid #000000":"none",borderRadius:"8px",overflow:"hidden"},children:[l.jsx("div",{ref:D,className:"w-full h-full",style:{touchAction:"manipulation"},children:l.jsx(Cm,{ref:g,width:y.width,height:y.height,scaleX:d?y.zoom:o,scaleY:d?y.zoom:o,onMouseDown:xe,onMousemove:se,onMouseup:De,onTouchStart:at,onTouchMove:jt,onTouchEnd:Mt,onWheel:h||(()=>{}),onDragStart:()=>{console.log(" Drag started"),s==="pan"&&p(!0)},onDragEnd:()=>{if(console.log(" Drag ended"),s==="pan"&&(p(!1),f)){const Be=g.current,lt=D.current,ct=lt?.clientWidth||y.width,Qt=lt?.clientHeight||y.height,rr=v.width*Be.scaleX(),_r=v.height*Be.scaleY(),tn=Be.x(),Fr=Be.y();(tn>ct||tn<-rr||Fr>Qt||Fr<-_r)&&f(Be)}},draggable:s==="pan"&&o>.25,className:`border-0 rounded-none shadow-none sm:border sm:rounded-lg sm:shadow-sm ${s==="pan"?"cursor-grab":u?"cursor-grabbing":"cursor-crosshair"}`,style:{width:"100%",height:"auto"},onLoad:()=>{console.log(" DrawingTestStudent - Stage loaded with dimensions:",y.width,"x",y.height),console.log(" DrawingTestStudent - Canvas size:",v.width,"x",v.height),console.log(" DrawingTestStudent - Current zoom level:",o),console.log(" DrawingTestStudent - Effective display size:",Math.round(v.width*o),"x",Math.round(v.height*o)),console.log(" DrawingTestStudent - Total pixels displayed:",Math.round(v.width*o*v.height*o))},children:l.jsxs(km,{children:[l.jsx(Ti,{x:0,y:0,width:v.width,height:v.height,fill:"white",name:"canvas-bg"}),r.map((Be,lt)=>{if(Array.isArray(Be)){const ct=Be[0]?.tool==="eraser";return l.jsx(Vi,{points:Be.flatMap(Qt=>[Qt.x,Qt.y]),stroke:ct?"black":Be[0]?.color||"#000000",strokeWidth:ct?(Be[0]?.thickness||2)*7:Be[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:ct?"destination-out":"source-over"},lt)}else{if(Be.type==="line")return l.jsx(Vi,{points:[Be.startX,Be.startY,Be.endX,Be.endY],stroke:Be.color,strokeWidth:Be.thickness,lineCap:"round"},lt);if(Be.type==="rectangle"){const ct=Math.abs(Be.endX-Be.startX),Qt=Math.abs(Be.endY-Be.startY),rr=Math.min(Be.startX,Be.endX),_r=Math.min(Be.startY,Be.endY);return l.jsx(Ti,{x:rr,y:_r,width:ct,height:Qt,stroke:Be.color,strokeWidth:Be.thickness,fill:"transparent"},lt)}else if(Be.type==="circle"){const ct=Math.sqrt(Math.pow(Be.endX-Be.startX,2)+Math.pow(Be.endY-Be.startY,2))/2,Qt=(Be.startX+Be.endX)/2,rr=(Be.startY+Be.endY)/2;return l.jsx(Rf,{x:Qt,y:rr,radius:ct,stroke:Be.color,strokeWidth:Be.thickness,fill:"transparent"},lt)}}return null}),S.map(Be=>l.jsx(t0e,{...Be,isSelected:T===Be.id,onSelect:A,onUpdate:P,onDelete:j},Be.id)),s==="pencil"&&l.jsx(Vi,{points:ue.flatMap(Be=>[Be.x,Be.y]),stroke:a,strokeWidth:i,tension:.5,lineCap:"round",lineJoin:"round"}),s==="eraser"&&l.jsx(Vi,{points:ue.flatMap(Be=>[Be.x,Be.y]),stroke:"black",strokeWidth:i*7,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:"destination-out"}),X&&X.type==="line"&&l.jsx(Vi,{points:[X.startX,X.startY,X.endX,X.endY],stroke:X.color,strokeWidth:X.thickness,lineCap:"round"}),X&&X.type==="rectangle"&&l.jsx(Ti,{x:Math.min(X.startX,X.endX),y:Math.min(X.startY,X.endY),width:Math.abs(X.endX-X.startX),height:Math.abs(X.endY-X.startY),stroke:X.color,strokeWidth:X.thickness,fill:"transparent"}),X&&X.type==="circle"&&l.jsx(Rf,{x:(X.startX+X.endX)/2,y:(X.startY+X.endY)/2,radius:Math.sqrt(Math.pow(X.endX-X.startX,2)+Math.pow(X.endY-X.startY,2))/2,stroke:X.color,strokeWidth:X.thickness,fill:"transparent"}),s==="eraser"&&l.jsx(Rf,{x:H.x,y:H.y,radius:i*7/2,stroke:"#666666",strokeWidth:2,fill:"rgba(102, 102, 102, 0.2)",dash:[5,5],listening:!1}),s==="pencil"&&l.jsx(Vi,{points:[H.x-10,H.y,H.x+10,H.y,H.x,H.y-10,H.x,H.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="line"&&l.jsx(Vi,{points:[H.x-10,H.y,H.x+10,H.y,H.x,H.y-10,H.x,H.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="rectangle"&&l.jsx(Vi,{points:[H.x-10,H.y,H.x+10,H.y,H.x,H.y-10,H.x,H.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="circle"&&l.jsx(Vi,{points:[H.x-10,H.y,H.x+10,H.y,H.x,H.y-10,H.x,H.y+10],stroke:"#666666",strokeWidth:1,listening:!1})]})})}),F&&R&&l.jsx(r0e,{x:R.x,y:R.y,width:R.width,height:R.height,initialText:R.text,onSave:Be=>{P(R.id,{text:Be}),L(!1),V(null)},onCancel:()=>{L(!1),V(null)}}),l.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1",children:[l.jsx("button",{onClick:()=>{const Be=g.current,lt=Be.scaleX(),ct=C?.max_canvas_width||1536,Qt=C?.max_canvas_height||2048,rr=ct/v.width,_r=Qt/v.height,tn=Math.min(rr,_r,5),Fr=Math.min(tn,Be.scaleX()*1.2);Be.scale({x:Fr,y:Fr}),Be.batchDraw(),console.log(" DrawingTestStudent - Zoom In button:",lt.toFixed(2),"->",Fr.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(v.width*Fr),"x",Math.round(v.height*Fr)),console.log(" DrawingTestStudent - New resolution:",Math.round(v.width*Fr*v.height*Fr),"pixels"),c(Fr)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 font-bold",title:"Zoom In",children:"+"}),l.jsx("button",{onClick:()=>{const Be=g.current,lt=Be.scaleX(),ct=Math.max(.25,Be.scaleX()*.8);Be.scale({x:ct,y:ct}),Be.batchDraw(),console.log(" DrawingTestStudent - Zoom Out button:",lt.toFixed(2),"->",ct.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(v.width*ct),"x",Math.round(v.height*ct)),console.log(" DrawingTestStudent - New resolution:",Math.round(v.width*ct*v.height*ct),"pixels"),c(ct)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 font-bold",title:"Zoom Out",children:""}),l.jsx("button",{onClick:()=>{const Be=g.current,lt=Be.scaleX();Be.scale({x:1,y:1}),Be.position({x:0,y:0}),Be.batchDraw(),console.log(" DrawingTestStudent - Reset zoom:",lt.toFixed(2),"-> 1.00"),console.log(" DrawingTestStudent - Reset effective size:",v.width,"x",v.height),console.log(" DrawingTestStudent - Reset resolution:",v.width*v.height,"pixels"),c(1)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 text-xs",title:"Reset Zoom",children:"1:1"})]}),l.jsxs("div",{className:"absolute bottom-2 left-2 bg-white border border-gray-300 rounded px-2 py-1 text-xs text-gray-600 shadow-sm",children:[Math.round(o*100),"%"]})]})})})},s0e=({content:e})=>{if(!e)return l.jsx("div",{className:"text-gray-500 italic",children:"No instructions provided"});const t=n=>{if(!n)return"";if(n.type==="text"){let s=n.text||"";if(n.format&&(n.format&1&&(s=`<strong>${s}</strong>`),n.format&2&&(s=`<em>${s}</em>`),n.format&8&&(s=`<u>${s}</u>`),n.format&16&&(s=`<s>${s}</s>`)),n.style){const a=n.style.match(/color:\s*([^;]+)/);a&&(s=`<span style="color: ${a[1].trim()}">${s}</span>`)}if(n.textStyle){const a=n.textStyle.match(/color:\s*([^;]+)/);a&&(s=`<span style="color: ${a[1].trim()}">${s}</span>`)}return s}if(n.type==="paragraph"){const s=n.children?n.children.map(t).join(""):"";let a="text-left";return n.format&&(n.format==="center"?a="text-center":n.format==="right"?a="text-right":n.format==="left"&&(a="text-left")),`<p class="${a}">${s}</p>`}if(n.type==="heading"){const s=n.tag||"h1",a=n.children?n.children.map(t).join(""):"";return`<${s}>${a}</${s}>`}if(n.type==="list"){const s=n.listType==="bullet"?"ul":"ol",a=n.children?n.children.map(i=>{if(i.type==="listitem"){const o=i.children?i.children.map(t).join(""):"";let c="margin: 4px 0; display: list-item;";return i.format&&(i.format==="center"?c+=" text-align: center;":i.format==="right"?c+=" text-align: right;":i.format==="left"&&(c+=" text-align: left;")),`<li style="${c}">${o}</li>`}return""}).join(""):"";return`<${s} style="margin: 8px 0; padding-left: 20px; list-style-type: ${n.listType==="bullet"?"disc":"decimal"}; display: block;">${a}</${s}>`}return n.children?n.children.map(t).join(""):""};let r=e;if(typeof e=="string"&&e.startsWith("{"))try{const n=JSON.parse(e);n.text?r=n.text:n.content?r=n.content:n.root&&n.root.children&&(r=n.root.children.map(t).join(""))}catch(n){console.log("Failed to parse Lexical content:",n)}return l.jsx("div",{className:"max-w-none rich-text-content",style:{lineHeight:"1.6",fontSize:"14px"},dangerouslySetInnerHTML:{__html:r}})},a0e=({question:e,questionIndex:t,studentAnswer:r,onAnswerChange:n,mode:s,testId:a,testType:i})=>{ci();const[o,c]=_.useState([]),[u,d]=_.useState(!0),[f,h]=_.useState("pencil"),[g,p]=_.useState("#000000"),[y,v]=_.useState(2),[C,S]=_.useState([]),[w,T]=_.useState(-1),[N,A]=_.useState({width:600,height:800}),[P,j]=_.useState(1),[F,R]=_.useState(!1),[L,V]=_.useState(!1),[Z,Y]=_.useState(!1),[re,ue]=_.useState([]),[z,X]=_.useState(null),[I,B]=_.useState(!1),[W,D]=_.useState(null),U=w>0,q=w<C.length-1,[H,te]=_.useState(!1),Q=_.useRef(null),ae=_.useRef(null),[ce,me]=_.useState({width:600,height:800}),xe=_.useRef(!1),[se,De]=_.useState(.25),He=["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#008000","#808080","#FFC0CB","#A52A2A","#000080"];_.useEffect(()=>{const dt=()=>{Y(window.innerWidth>=1024)};return dt(),window.addEventListener("resize",dt),()=>window.removeEventListener("resize",dt)},[]),_.useEffect(()=>{if(e){const dt=e.max_canvas_width||1536,gt=e.max_canvas_height||2048,kt=e.canvas_width||600,Ge=e.canvas_height||800;if(A({width:dt,height:gt}),xe.current)console.log(" DrawingTestStudent - Preserving user zoom:",P.toFixed(2));else{j(1),xe.current=!0;const Et=(kt-dt*1)/2,Ut=(Ge-gt*1)/2;if(!isNaN(Et)&&!isNaN(Ut)&&Q.current){const Wt={x:Et,y:Ut};Q.current.position(Wt),Q.current.batchDraw()}console.log(" DrawingTestStudent - Canvas size set:",dt,"x",gt),console.log(" DrawingTestStudent - Viewport size:",kt,"x",Ge),console.log(" DrawingTestStudent - Initial zoom:",1 .toFixed(2)),console.log(" DrawingTestStudent - Image resolution:",dt*gt,"pixels"),console.log(" DrawingTestStudent - Aspect ratio:",(dt/gt).toFixed(2))}if(r&&typeof r=="string")try{const Xe=JSON.parse(r);Xe.lines?c(Xe.lines):c(Xe),Xe.textBoxes&&ue(Xe.textBoxes)}catch{console.log("No valid drawing data found")}d(!1)}},[e,r]),_.useEffect(()=>{const dt=()=>{const gt=ae.current;if(!gt)return;const kt=gt.clientWidth||1,Ge=gt.clientHeight||1,Xe=Math.min(kt/(N.width||1),Ge/(N.height||1));De(Math.min(Xe,1))};return dt(),window.addEventListener("resize",dt),()=>window.removeEventListener("resize",dt)},[N.width,N.height,H]);const rt=dt=>{c(dt);const gt={lines:dt,textBoxes:re};n(e.question_id,JSON.stringify(gt)),_t(dt,re)},_t=(dt,gt=re)=>{const kt=C.slice(0,w+1);kt.push({lines:[...dt],textBoxes:[...gt]}),S(kt),T(kt.length-1)},Ke=()=>{if(U){const dt=w-1,gt=C[dt];if(gt&&typeof gt=="object"&&gt.lines){c([...gt.lines]),ue([...gt.textBoxes]);const kt={lines:gt.lines,textBoxes:gt.textBoxes};n(e.question_id,JSON.stringify(kt))}else{const kt=gt||[];c([...kt]),n(e.question_id,JSON.stringify(kt))}T(dt)}},tt=()=>{if(q){const dt=w+1,gt=C[dt];if(gt&&typeof gt=="object"&&gt.lines){c([...gt.lines]),ue([...gt.textBoxes]);const kt={lines:gt.lines,textBoxes:gt.textBoxes};n(e.question_id,JSON.stringify(kt))}else{const kt=gt||[];c([...kt]),n(e.question_id,JSON.stringify(kt))}T(dt)}},Pe=()=>{c([]),ue([]),X(null),n(e.question_id,"")},je=dt=>{X(dt)},Qe=(dt,gt)=>{const kt=re.map(Xe=>Xe.id===dt?{...Xe,...gt}:Xe);ue(kt),_t(o,kt);const Ge={lines:o,textBoxes:kt};if(n(e.question_id,JSON.stringify(Ge)),gt.isEditing){const Xe=re.find(Et=>Et.id===dt);D(Xe),B(!0)}},vt=dt=>{const gt=re.filter(Ge=>Ge.id!==dt);ue(gt),z===dt&&X(null),_t(o,gt);const kt={lines:o,textBoxes:gt};n(e.question_id,JSON.stringify(kt))},Ot=()=>{if(H){const kt=e?.canvas_width||600,Ge=e?.canvas_height||800,Xe=window.innerWidth-40,Et=window.innerHeight-40,Ut=Xe/kt,Wt=Et/Ge,pr=Math.min(Ut,Wt,1);return{width:kt,height:Ge,zoom:pr}}const dt=e?.canvas_width||600,gt=e?.canvas_height||800;return{width:dt,height:gt,zoom:1}};_.useEffect(()=>{const dt=()=>{me(Ot())};return dt(),window.addEventListener("resize",dt),()=>window.removeEventListener("resize",dt)},[H,N]);const $t=dt=>{dt.evt.preventDefault();const gt=Q.current,kt=gt.scaleX(),Ge=gt.getPointerPosition(),Xe={x:(Ge.x-gt.x())/kt,y:(Ge.y-gt.y())/kt},Et=dt.evt.deltaY>0?kt*.9:kt*1.1,Ut=e?.max_canvas_width||1536,Wt=e?.max_canvas_height||2048,pr=Ut/N.width,wr=Wt/N.height,br=Math.min(pr,wr,1),lr=Math.max(se,Math.min(br,Et)),Er={x:Ge.x-Xe.x*lr,y:Ge.y-Xe.y*lr};if(lr<=se&&ae.current){const we=ae.current.clientWidth||1,_e=ae.current.clientHeight||1;Er.x=(we-N.width*lr)/2,Er.y=(_e-N.height*lr)/2}gt.scale({x:lr,y:lr}),gt.position(Er),gt.batchDraw(),console.log(" DrawingTestStudent - Wheel zoom:",kt.toFixed(2),"->",lr.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(N.width*lr),"x",Math.round(N.height*lr)),console.log(" DrawingTestStudent - New resolution:",Math.round(N.width*lr*N.height*lr),"pixels"),j(lr),xe.current=!0},Gt=dt=>{const gt=dt.scaleX(),kt=ae.current,Ge=kt?.clientWidth||ce.width,Xe=kt?.clientHeight||ce.height,Et=N.width*gt,Ut=N.height*gt;if(gt<=se){const Ee=(Ge-Et)/2,Fe=(Xe-Ut)/2;dt.position({x:Ee,y:Fe}),dt.batchDraw();return}if(Et<=Ge&&Ut<=Xe){const Ee=(Ge-Et)/2,Fe=(Xe-Ut)/2;dt.position({x:Ee,y:Fe}),dt.batchDraw();return}const Wt=Math.max(0,Et-Ge),pr=Math.max(0,Ut-Xe),wr=-Wt,br=-pr,lr=dt.x(),Er=dt.y(),we=Math.max(wr,Math.min(Wt,lr)),_e=Math.max(br,Math.min(pr,Er));(we!==lr||_e!==Er)&&(dt.position({x:we,y:_e}),dt.batchDraw())},ir=()=>{if(H)document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen();else{const dt=ae.current;dt&&(dt.requestFullscreen?dt.requestFullscreen():dt.webkitRequestFullscreen?dt.webkitRequestFullscreen():dt.msRequestFullscreen&&dt.msRequestFullscreen())}};return _.useEffect(()=>{const dt=()=>{te(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",dt),document.addEventListener("webkitfullscreenchange",dt),document.addEventListener("msfullscreenchange",dt),()=>{document.removeEventListener("fullscreenchange",dt),document.removeEventListener("webkitfullscreenchange",dt),document.removeEventListener("msfullscreenchange",dt)}},[]),_.useEffect(()=>()=>{Q.current&&Q.current.stop()},[]),u?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx(un,{})}):e?l.jsxs("div",{className:`drawing-question w-full max-w-full mx-0 p-0 sm:p-2 ${H?"fixed inset-0 z-50 bg-white overflow-y-auto":""}`,children:[!H&&l.jsx("div",{className:"mb-4",children:l.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Question ",t+1]})}),!H&&e.question_json&&e.question_json.trim()&&l.jsxs("div",{className:"mb-2 p-2 bg-gray-50 border border-gray-200 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Task:"}),l.jsx("div",{className:"text-gray-700",children:l.jsx(s0e,{content:e.question_json})})]}),!H&&l.jsx(Ht,{className:"p-1 sm:p-2 mb-2",children:l.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"hidden sm:block text-sm text-gray-700",children:"Tool:"}),l.jsxs("div",{className:"flex flex-nowrap sm:flex-wrap gap-1 overflow-x-auto",children:[l.jsx("button",{onClick:()=>h("pencil"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="pencil"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Pencil (Freehand drawing)",children:""}),l.jsx("button",{onClick:()=>h("line"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="line"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Line",children:""}),l.jsx("button",{onClick:()=>h("rectangle"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="rectangle"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Rectangle",children:""}),l.jsx("button",{onClick:()=>h("circle"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="circle"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Circle",children:""}),l.jsx("button",{onClick:()=>h("eraser"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="eraser"?"bg-red-500 text-white border-red-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Eraser",children:""}),l.jsx("button",{onClick:()=>h("text"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="text"?"bg-green-500 text-white border-green-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Text Box",children:""}),l.jsx("button",{onClick:()=>h("pan"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="pan"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Pan (Move canvas)",children:""})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm text-gray-700",children:"History:"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:Ke,disabled:!U,className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${U?"bg-white text-gray-700 border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed"}`,title:"Undo (Ctrl+Z)",children:""}),l.jsx("button",{onClick:tt,disabled:!q,className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${q?"bg-white text-gray-700 border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed"}`,title:"Redo (Ctrl+Y)",children:""})]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>R(!F),className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[l.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:g}}),l.jsx("span",{className:"text-xs sm:text-sm text-gray-700",children:"Color"})]}),F&&l.jsx("div",{className:"absolute top-full left-0 mt-2 p-4 bg-white border border-gray-300 rounded-lg shadow-lg z-30 min-w-max",children:l.jsx("div",{className:"flex flex-wrap gap-2 max-w-xs",children:He.map(dt=>l.jsx("button",{onClick:()=>{p(dt),R(!1)},className:`w-10 h-10 rounded border-2 hover:scale-110 transition-transform flex-shrink-0 ${g===dt?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:dt},title:dt},dt))})})]}),l.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[l.jsx("label",{className:"text-xs sm:text-sm text-gray-700",children:"Thickness:"}),l.jsx("input",{type:"range",min:"1",max:"10",value:y,onChange:dt=>v(parseInt(dt.target.value)),className:"w-16 sm:w-20"}),l.jsxs("span",{className:"text-xs text-gray-500 w-6 sm:w-8",children:[y,"px"]})]}),l.jsx(ot,{onClick:Pe,variant:"secondary",size:"sm",children:"Clear"})]})}),l.jsx(Ht,{paddingClass:"p-0 sm:p-2",children:l.jsxs("div",{ref:ae,className:"w-full drawing-canvas-container relative p-0 m-0",children:[l.jsx(n0e,{width:N.width,height:N.height,lines:o,onDrawingChange:rt,currentTool:f,currentColor:g,currentThickness:y,zoom:P,onZoomChange:j,isPanning:L,isFullscreen:H,constrainPanPosition:Gt,handleWheel:$t,stageRef:Q,setIsPanning:V,responsiveDimensions:ce,canvasSize:N,question:e,textBoxes:re,setTextBoxes:ue,selectedTextBox:z,setSelectedTextBox:X,handleTextBoxSelect:je,handleTextBoxUpdate:Qe,handleTextBoxDelete:vt,isEditingText:I,editingTextBox:W,setIsEditingText:B,setEditingTextBox:D,setCurrentTool:h}),l.jsx("button",{onClick:ir,className:"absolute top-2 left-2 bg-black bg-opacity-50 hover:bg-opacity-70 text-white p-2 rounded-lg transition-all duration-200 z-10",title:H?"Exit Fullscreen":"Enter Fullscreen",children:H?l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})}):l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})})]})})]}):l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-gray-500",children:"No drawing question data available"})})})},U5={enhanceUserData(e,t){const r={id:e.id||e.student_id||e.teacher_id,username:e.username||e.student_id,name:e.name||e.first_name,surname:e.surname||e.last_name,nickname:e.nickname,role:t,is_active:e.is_active!==void 0?e.is_active:!0,created_at:e.created_at,updated_at:e.updated_at};switch(t){case"student":return{...r,student_id:e.student_id,grade:e.grade,class:e.class,number:e.number,subjects:e.subjects||[]};case"teacher":return{...r,teacher_id:e.teacher_id,first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,subjects:e.subjects||[]};case"admin":return{...r,admin_id:e.admin_id,permissions:e.permissions||["all"]};default:return r}},async studentLogin(e){console.log("Trying student login...");try{const t=await fetch("/.netlify/functions/student-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:e.username,password:e.password})}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.student,role:"student",response:t};throw new Error(r.message||"Student login failed")}catch(t){throw console.error("Student login error:",t),new Error(t.message||"Student login failed")}},async teacherLogin(e){console.log("Trying teacher login...");try{const t=await fetch("/.netlify/functions/teacher-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.teacher,role:"teacher",response:t};throw new Error(r.message||"Teacher login failed")}catch(t){throw console.error("Teacher login error:",t),new Error(t.message||"Teacher login failed")}},async adminLogin(e){console.log("Trying admin login...");try{const t=await fetch("/.netlify/functions/admin-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.admin,role:"admin",response:t};throw new Error(r.message||"Admin login failed")}catch(t){throw console.error("Admin login error:",t),new Error(t.message||"Admin login failed")}},async login(e){const{username:t,password:r}=e;console.log("Attempting login with:",t,r);try{if(t==="admin"){const o=await this.adminLogin(e),c=await o.json();return await this.handleLoginResponse(o,"admin",c)}const n=await this.teacherLogin(e),s=await n.json();if(n.ok&&s.success)return await this.handleLoginResponse(n,"teacher",s);const a=await this.studentLogin(e),i=await a.json();return a.ok&&i.success?await this.handleLoginResponse(a,"student",i):(this.handleLoginFailure(),{success:!1,message:"Login failed. Please check your credentials and try again."})}catch(n){return console.error("Login error:",n),this.handleLoginFailure(),{success:!1,message:n.message||"Login failed"}}},async handleLoginResponse(e,t,r){if(e.ok&&r.success){if(!window.tokenManager||!window.roleBasedLoader)return console.error("[ERROR] JWT system not available during login response handling"),this.handleLoginFailure(),{success:!1,message:"JWT system not available"};if(r.accessToken&&r.role)try{window.tokenManager.setTokens(r.accessToken,r.role),window.roleBasedLoader.setupAccessAfterLogin()}catch(n){return console.error("[ERROR] Failed to initialize JWT system:",n),this.handleLoginFailure(),{success:!1,message:"Failed to initialize JWT system"}}return this.resetLoginForm(),await this.handlePostLoginActions(r,t),{success:!0,data:r,role:t}}return{success:!1,message:"Login failed"}},async handlePostLoginActions(e,t){console.log(`Handling post-login actions for role: ${t}`);try{switch(t){case"student":e.student&&(this.populateStudentInfo(e.student),window.loadStudentData&&await window.loadStudentData());break;case"teacher":e.teacher&&(this.populateTeacherInfo(e.teacher),window.loadTeacherData&&await window.loadTeacherData());break;case"admin":e.admin&&window.loadAdminData&&await window.loadAdminData();break;default:console.warn(`Unknown role for post-login actions: ${t}`)}}catch(r){console.error("Error in post-login actions:",r)}},handleLoginFailure(){console.log("All login attempts failed"),this.resetLoginForm(),window.showNotification&&window.showNotification("Login failed. Please check your credentials and try again.","error")},resetLoginForm(){const e=document.getElementById("unifiedLoginForm");if(e){e.querySelectorAll("input").forEach(n=>{n.disabled=!1,n.style.opacity="1",n.style.cursor="text",n.removeAttribute("readonly"),n.style.pointerEvents="auto"});const r=e.querySelector('button[type="submit"]');r&&(r.disabled=!1,r.style.opacity="1",r.style.cursor="pointer",r.style.pointerEvents="auto",r.innerHTML="Login"),e.classList.remove("test-submitting","disabled"),e.style.pointerEvents="auto",console.log("Login form reset successfully - all inputs re-enabled")}},async logout(){console.log(" Logout initiated...");try{return window.tokenManager&&window.tokenManager.logout(),window.roleBasedLoader&&window.roleBasedLoader.reloadRoleAccess(),window.clearTestLocalStorage&&window.clearTestLocalStorage(),this.resetInterfaceAfterSessionClear(),console.log(" Logout completed - user session cleared, test data cleared, and interface reset"),{success:!0}}catch(e){return console.error("Logout error:",e),this.resetInterfaceAfterSessionClear(),{success:!0}}},resetInterfaceAfterSessionClear(){try{window.forceLogout=!0,window.preventAutoLogin=!0,window.isClearingSession=!0,window.forceLogoutComplete=!0,document.querySelectorAll(".section").forEach(s=>{s.classList.remove("active"),s.style.display="none",s.style.visibility="hidden",s.style.opacity="0"}),document.querySelectorAll('[id$="-cabinet"], [id$="-container"], [id*="cabinet"], [id*="container"]').forEach(s=>{s.id&&s.id!=="login-section"&&(s.classList.remove("active"),s.style.display="none",s.style.visibility="hidden",s.style.opacity="0")}),document.body.classList.remove("student-logged-in","teacher-logged-in","admin-logged-in"),document.body.classList.add("force-logout");const r=document.getElementById("login-section");r&&(r.classList.add("active"),r.style.display="block",r.style.visibility="visible",r.style.opacity="1"),document.querySelectorAll("input, select, textarea").forEach(s=>{s.type!=="hidden"&&(s.value="",s.checked=!1)}),console.log(" Interface reset to login state")}catch(e){console.error("Error resetting interface:",e),localStorage.clear(),sessionStorage.clear(),window.location.reload()}},async changePassword(e){try{return{success:!0,message:(await la.post("/auth/change-password",{currentPassword:e.currentPassword,newPassword:e.newPassword,confirmPassword:e.confirmPassword})).data.message}}catch(t){throw new Error(t.response?.data?.message||"Password change failed")}},async verifyToken(e){try{const t=await la.get("/auth/verify",{headers:{Authorization:`Bearer ${e}`}});return{success:!0,valid:t.data.valid,user:t.data.user}}catch(t){return{success:!1,valid:!1,error:t.message}}},async refreshToken(e){try{const t=await la.post("/auth/refresh",{refreshToken:e});return{success:!0,token:t.data.token,refreshToken:t.data.refreshToken}}catch(t){throw new Error(t.response?.data?.message||"Token refresh failed")}},async getUserProfile(){try{return{success:!0,user:(await la.get("/auth/profile")).data.user}}catch(e){throw new Error(e.response?.data?.message||"Failed to get user profile")}},async updateUserProfile(e){try{return{success:!0,user:(await la.put("/auth/profile",e)).data.user}}catch(t){throw new Error(t.response?.data?.message||"Failed to update user profile")}},populateStudentInfo(e){console.log("=== populateStudentInfo called ==="),console.log("Student object:",e);const t=document.getElementById("studentName");if(t){const s=`${e?.name||""} ${e?.surname||""}`.trim();t.textContent=s,console.log("Set student name to:",s)}const r=document.getElementById("studentGrade");r&&(r.textContent=e?.grade||"",console.log("Set student grade to:",e?.grade));const n=document.getElementById("studentClass");n&&(n.textContent=e?.class||"",console.log("Set student class to:",e?.class)),console.log("Student info populated successfully")},populateTeacherInfo(e){console.log("=== populateTeacherInfo called ==="),console.log("Teacher object:",e);const t=document.getElementById("teacherName");if(t){const n=`${e?.name||""} ${e?.surname||""}`.trim();t.textContent=n,console.log("Set teacher name to:",n)}const r=document.getElementById("teacherUsername");r&&(r.textContent=e?.username||"",console.log("Set teacher username to:",e?.username)),console.log("Teacher info populated successfully")},getCurrentTeacherId(){try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())return console.warn("[WARN] No valid JWT token found for teacher"),null;const e=window.tokenManager.decodeToken(window.tokenManager.getAccessToken());return e&&e.sub?e.role==="teacher"?(console.log(`[DEBUG] Found teacher ID from JWT: ${e.sub}`),e.sub):(console.warn(`[WARN] Unsupported role for teacher function: ${e.role}`),null):(console.warn("[WARN] No teacher ID found in JWT token"),null)}catch(e){return console.error("[ERROR] Error getting current teacher ID from JWT:",e),null}},getCurrentAdmin(){const e=window.tokenManager?.getToken();if(!e)return null;const t=window.tokenManager.decodeToken(e);if(!t||t.role!=="admin")throw new Error("getCurrentAdmin() called by non-admin user");return{id:t.sub,username:t.username,role:t.role}},getCurrentTeacherUsername(){try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())return console.warn("[WARN] No valid JWT token found for teacher"),null;const e=window.tokenManager.decodeToken(window.tokenManager.getAccessToken());return e&&e.username?(console.log(`[DEBUG] Found teacher username from JWT: ${e.username}`),e.username):(console.warn("[WARN] No teacher username found in JWT token"),null)}catch(e){return console.error("[ERROR] Error getting current teacher username from JWT:",e),null}},isAdmin(){try{const e=window.tokenManager?.getToken();if(!e)return!1;const t=window.tokenManager.decodeToken(e);return t&&t.role==="admin"}catch(e){return console.error("[ERROR] Error checking admin status:",e),!1}},getCurrentAdminId(){try{const e=this.getCurrentAdmin();return e?e.id:null}catch(e){return console.error("[ERROR] Error getting admin ID:",e),null}}},i0e=()=>{const e=Ko(),{login:t,setUserData:r,isAuthenticated:n,user:s}=Is(),[a,i]=_.useState({username:"",password:""}),[o,c]=_.useState(!1),[u,d]=_.useState(""),[f,h]=_.useState([]),[g,p]=_.useState(!1);_.useEffect(()=>{y()},[]);const y=_.useCallback(async()=>{console.log("Checking for existing JWT session...");try{(window.forceLogout||window.preventAutoLogin)&&(window.forceLogout=!1,window.preventAutoLogin=!1)}catch{}if(window.tokenManager)if(await window.tokenManager.isAuthenticated()){console.log("JWT session valid, checking user role...");try{const V=await window.tokenManager.getAccessToken(),Z=window.tokenManager.decodeToken(V);Z&&Z.role?console.log("User role from JWT:",Z.role):console.log("No valid role found in JWT, showing login")}catch(V){console.error("Error decoding JWT token:",V)}}else console.log("No valid JWT session found, showing login");else console.log("No tokenManager found, showing login")},[]),v=_.useCallback(async L=>{if(L.preventDefault(),window.forceLogout||window.preventAutoLogin){console.log(" Login blocked - force logout in progress"),j("Please wait for the logout process to complete.","warning");return}const{username:V,password:Z}=a;if(!V||!Z){d("Please enter both username and password");return}c(!0),d("");try{let Y,re;V==="admin"?(Y=await U5.adminLogin({username:V,password:Z}),re=$o.ADMIN):/^\d+$/.test(V)?(Y=await U5.studentLogin({username:V,password:Z}),re=$o.STUDENT):(Y=await U5.teacherLogin({username:V,password:Z}),re=$o.TEACHER);let ue,z;if(Y.response?(ue=Y,z=Y.response):(ue=await Y.json(),z=Y),await C(z,re,ue)){j("Login successful!","success");try{if("credentials"in navigator&&window.PasswordCredential&&a?.username&&a?.password){const X=new window.PasswordCredential({id:String(a.username),password:String(a.password)});await navigator.credentials.store(X)}}catch{}try{window.forceLogout=!1,window.preventAutoLogin=!1}catch{}}}catch(Y){console.error("Login error:",Y),d("Invalid username or password")}finally{c(!1)}},[a]),C=_.useCallback(async(L,V,Z)=>{if(L.ok&&Z.success){if(!window.tokenManager||!window.roleBasedLoader)return console.error("[ERROR] JWT system not available during login response handling"),A(),!1;try{Z.token&&(window.tokenManager.setTokens(Z.token,V),Z.refreshToken&&window.tokenManager.setRefreshToken(Z.refreshToken),console.log("JWT token stored successfully"));const Y={...Z.data,...Z,role:V};return r(Y),await S(Y),!0}catch(Y){return console.error("Error handling login response:",Y),A(Y),!1}}else return console.error("Login failed:",Z.error||"Unknown error"),d(Z.error||"Login failed. Please check your credentials."),!1},[t]),S=_.useCallback(async L=>{if(console.log("Handling post-login actions for role:",L.role),g){console.log(" Post-login already handled, skipping");return}p(!0);try{switch(L.role){case $o.STUDENT:await w(L),e("/student");break;case $o.TEACHER:await T(L),e("/teacher");break;case $o.ADMIN:await N(L),e("/admin");break;default:console.error("Unknown user role:",L.role),A()}}catch(V){console.error("Error in post-login actions:",V),A(V)}},[e,g]);_.useEffect(()=>{n||p(!1)},[n]);const w=_.useCallback(async L=>{console.log("Populating student info:",L)},[]),T=_.useCallback(async L=>{console.log("Populating teacher info:",L)},[]),N=_.useCallback(async L=>{console.log("Populating admin info:",L)},[]),A=_.useCallback((L=null)=>{console.error("Login failure:",L),d("Login failed. Please check your credentials and try again."),P()},[]),P=_.useCallback(()=>{i({username:"",password:""}),d(""),c(!1)},[]),j=_.useCallback((L,V)=>{const Z={id:Date.now(),message:L,type:V,timestamp:new Date};h(Y=>[...Y,Z]),setTimeout(()=>{h(Y=>Y.filter(re=>re.id!==Z.id))},eg.NOTIFICATION_DURATION)},[]),F=_.useCallback(L=>{const{name:V,value:Z}=L.target;i(Y=>({...Y,[V]:Z})),u&&d("")},[u]),R=_.useCallback(L=>{L.key==="Enter"&&!o&&v(L)},[v,o]);return l.jsxs(ht.div,{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900 flex items-center justify-center p-4",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[l.jsxs(ht.div,{className:"w-full max-w-md",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsxs(ht.div,{className:"text-center mb-8",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.5},children:[l.jsx(ht.div,{className:"flex justify-center mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.5,type:"spring"},children:l.jsx("img",{src:"/pics/logo_mws.png",alt:"MWS Logo",className:"h-64 w-64 object-contain"})}),l.jsx(ht.h1,{className:"text-2xl font-bold mb-2 text-cyan-400 tracking-wider",style:{fontFamily:"monospace",textShadow:"0 0 10px rgba(0, 255, 255, 0.5), 0 0 20px rgba(0, 255, 255, 0.3), 2px 2px 0px #000, -2px -2px 0px #000, 2px -2px 0px #000, -2px 2px 0px #000, 0px 2px 0px #000, 0px -2px 0px #000, 2px 0px 0px #000, -2px 0px 0px #000"},initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.3},children:"TEST MANAGEMENT SYSTEM"}),l.jsx(ht.div,{className:"text-lg text-cyan-400 tracking-wider",style:{fontFamily:"monospace",textShadow:"0 0 5px rgba(0, 255, 255, 0.5)"},initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.3},children:l.jsx("div",{children:"FOR MATHAYOMWATSING SCHOOL STUDENTS"})})]}),l.jsxs(ht.div,{className:"bg-black rounded-xl shadow-2xl p-8 border-2 border-cyan-400",style:{boxShadow:"0 0 20px rgba(0, 255, 255, 0.5), 0 0 40px rgba(0, 255, 255, 0.3), inset 0 0 20px rgba(0, 255, 255, 0.1)"},initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.7,duration:.5,type:"spring"},children:[l.jsx(ht.h2,{className:"text-2xl font-semibold text-center mb-6 text-yellow-400 tracking-wider",style:{fontFamily:"monospace",textShadow:"0 0 10px rgba(255, 215, 0, 0.5)"},initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.8,duration:.3},children:"LOGIN"}),l.jsxs("form",{onSubmit:v,className:"space-y-6",children:[l.jsxs(ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9,duration:.3},children:[l.jsx("label",{htmlFor:"username",className:"block text-sm font-medium mb-2 text-cyan-400 tracking-wider",style:{fontFamily:"monospace"},children:"USERNAME"}),l.jsx(ht.input,{type:"text",id:"username",name:"username",value:a.username,onChange:F,onKeyDown:R,placeholder:"ENTER YOUR USERNAME",required:!0,autoComplete:"username",autoCapitalize:"none",spellCheck:!1,disabled:o,className:"w-full px-4 py-3 bg-gray-800 border-2 border-yellow-400 rounded-lg text-yellow-400 placeholder-purple-400 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all duration-200 disabled:bg-gray-900 disabled:border-gray-600 disabled:cursor-not-allowed disabled:text-gray-500",style:{fontFamily:"monospace",boxShadow:"0 0 10px rgba(255, 215, 0, 0.2)",textShadow:"0 0 5px rgba(255, 215, 0, 0.3)"},"aria-describedby":u?"error-message":void 0,whileFocus:{scale:1.02,boxShadow:"0 0 15px rgba(0, 255, 255, 0.4)"},transition:{duration:.2}})]}),l.jsxs(ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:1,duration:.3},children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-2 text-cyan-400 tracking-wider",style:{fontFamily:"monospace"},children:"PASSWORD"}),l.jsx(ht.input,{type:"password",id:"password",name:"password",value:a.password,onChange:F,onKeyDown:R,placeholder:"ENTER YOUR PASSWORD",required:!0,autoComplete:"current-password",disabled:o,className:"w-full px-4 py-3 bg-gray-800 border-2 border-yellow-400 rounded-lg text-yellow-400 placeholder-purple-400 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all duration-200 disabled:bg-gray-900 disabled:border-gray-600 disabled:cursor-not-allowed disabled:text-gray-500",style:{fontFamily:"monospace",boxShadow:"0 0 10px rgba(255, 215, 0, 0.2)",textShadow:"0 0 5px rgba(255, 215, 0, 0.3)"},"aria-describedby":u?"error-message":void 0,whileFocus:{scale:1.02,boxShadow:"0 0 15px rgba(0, 255, 255, 0.4)"},transition:{duration:.2}})]}),l.jsx(Uo,{children:u&&l.jsx(ht.div,{id:"error-message",className:"bg-gray-800 border-2 border-red-500 rounded-lg p-3",style:{boxShadow:"0 0 15px rgba(239, 68, 68, 0.5), inset 0 0 10px rgba(239, 68, 68, 0.1)"},role:"alert","aria-live":"polite",initial:{opacity:0,height:0,y:-10},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-10},transition:{duration:.3},children:l.jsx("p",{className:"text-sm text-red-400 tracking-wider",style:{fontFamily:"monospace"},children:u.toUpperCase()})})}),l.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.1,duration:.3},children:l.jsx(ht.button,{type:"submit",disabled:o,className:"w-full px-6 py-4 bg-yellow-400 text-black font-bold rounded-lg border-2 border-cyan-400 tracking-wider disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden",style:{fontFamily:"monospace",boxShadow:"0 0 20px rgba(255, 215, 0, 0.5), 0 0 40px rgba(0, 255, 255, 0.3)",textShadow:"0 0 5px rgba(0, 0, 0, 0.5)"},whileHover:{scale:1.05,boxShadow:"0 0 30px rgba(255, 215, 0, 0.7), 0 0 60px rgba(0, 255, 255, 0.5)"},whileTap:{scale:.95},transition:{duration:.2},children:o?l.jsxs(l.Fragment,{children:[l.jsx(un,{size:"sm",className:"mr-2"}),"LOGGING IN..."]}):"LOG IN"})})]}),l.jsx(ht.div,{className:"mt-6 text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2,duration:.3},children:l.jsx(pB,{to:"/privacy",className:"text-xs text-purple-400 hover:text-cyan-400 underline tracking-wider transition-colors duration-200",style:{fontFamily:"monospace",textShadow:"0 0 5px rgba(147, 51, 234, 0.5)"},children:"PRIVACY POLICY"})})]})]}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:l.jsx(Uo,{children:f.map(L=>l.jsx(ht.div,{initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{duration:.3,type:"spring"},children:l.jsx(du,{type:L.type,message:L.message,onClose:()=>h(V=>V.filter(Z=>Z.id!==L.id))})},L.id))})})]})},Us={async getStudentData(){console.log("getStudentData called - loading student subjects");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-student-subjects")).json();if(t.success)return console.log("Student data loaded successfully:",t.subjects),t.subjects;throw new Error(t.error||"Failed to load student data")}catch(e){throw console.error("Error loading student data:",e),e}},getStudentSubjects(e){return console.log("getStudentSubjects called with subjects:",e),e.map(t=>({id:t.id||t.subject_id,name:t.subject,grade:t.grade,class:t.class,testResults:t.test_results||[]}))},async getTeacherData(){console.log("getTeacherData called - loading teacher subjects");try{const e=await this.getCurrentTeacherId();if(!e)throw new Error("No valid teacher session found");const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-teacher-subjects")).json();if(r.success)return console.log("Teacher data loaded successfully:",r.subjects),{teacher_id:e,subjects:r.subjects,hasSubjects:r.subjects.length>0};throw new Error(r.error||"Failed to load teacher data")}catch(e){throw console.error("Error loading teacher data:",e),e}},getTeacherSubjects(e){return console.log("getTeacherSubjects called with subjects:",e),e.map(t=>{let r=[];return t.classes&&Array.isArray(t.classes)&&(r=t.classes.map(n=>({grade:n.grade,class:n.class,className:n.class}))),{id:t.subject_id,name:t.subject,classes:r,assignments:t.assignments||[],description:t.description||""}})},getGradeButtons(){return console.log("getGradeButtons called"),["M1","M2","M3","M4","M5","M6"].map(t=>({id:t,name:t,classes:this.generateClassButtons(t)}))},generateClassButtons(e){const t=[];for(let r=1;r<=10;r++)t.push({id:`${e}_${r}`,name:`${e}/${r}`,grade:e,class:r});return t},async getAdminData(){console.log("getAdminData called - loading admin data");try{if(!await this.getCurrentAdminId())throw new Error("No valid admin session found");const[t,r,n]=await Promise.allSettled([this.getAllTeachers(),this.getAllSubjects(),this.getAllUsers()]);return{teachers:t.status==="fulfilled"?t.value:[],subjects:r.status==="fulfilled"?r.value:[],users:n.status==="fulfilled"?n.value:[],loadedAt:new Date().toISOString()}}catch(e){throw console.error("Error loading admin data:",e),e}},async saveTeacherSubjects(e){console.log("saveTeacherSubjects called with subjects:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-teacher-subjects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subjects:e})})).json();if(r.success)return console.log("Teacher subjects saved successfully"),r;throw new Error(r.error||"Failed to save teacher subjects")}catch(t){throw console.error("Error saving teacher subjects:",t),t}},async deleteTeacherSubject(e){console.log("deleteTeacherSubject called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/delete-teacher-subject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Teacher subject assignment deleted successfully"),r;throw new Error(r.error||"Failed to delete teacher subject assignment")}catch(t){throw console.error("Error deleting teacher subject assignment:",t),t}},async getSubjectsDropdown(){console.log("getSubjectsDropdown called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-subjects")).json();if(t.success)return console.log("Subjects dropdown data loaded successfully"),t.subjects.map(r=>({id:r.id,name:r.subject_name,value:r.subject_name}));throw new Error(t.error||"Failed to load subjects dropdown")}catch(e){throw console.error("Error loading subjects dropdown:",e),e}},async getGradesAndClasses(){console.log("getGradesAndClasses called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-teacher-grades-classes")).json();if(t.success)return console.log("Grades and classes loaded successfully"),t.data;throw new Error(t.message||"Failed to load grades and classes")}catch(e){throw console.error("Error loading grades and classes:",e),e}},async saveSubjectClasses(e,t){console.log("saveSubjectClasses called with subjectId:",e,"classes:",t);try{const r=await this.getCurrentTeacherId();if(!r)throw new Error("No valid teacher session found");const s=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-subject-classes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teacher_id:r,subject_id:e,classes:t})})).json();if(s.success)return console.log("Subject classes saved successfully"),s;throw new Error(s.error||"Failed to save subject classes")}catch(r){throw console.error("Error saving subject classes:",r),r}},async getAllSubjects(){console.log("getAllSubjects called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-subjects")).json();if(t.success)return console.log("All subjects loaded successfully"),t.subjects.map(r=>({id:r.id,name:r.subject_name,description:r.description||"",created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all subjects")}catch(e){throw console.error("Error loading all subjects:",e),e}},async getSubjectsForSelection(){console.log("getSubjectsForSelection called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-subjects")).json();if(t.success)return console.log("Subjects for selection loaded successfully"),t.subjects;throw new Error(t.message||"Failed to load subjects for selection")}catch(e){throw console.error("Error loading subjects for selection:",e),e}},async addAcademicYear(e){console.log("addAcademicYear called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/add-academic-year",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Academic year added successfully"),r;throw new Error(r.error||"Failed to add academic year")}catch(t){throw console.error("Error adding academic year:",t),t}},async getAllUsers(){console.log("getAllUsers called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-users")).json();if(t.success)return console.log("All users loaded successfully"),t.users.map(r=>({id:r.id,student_id:r.student_id,grade:r.grade,class:r.class,number:r.number,name:r.name,surname:r.surname,nickname:r.nickname,created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all users")}catch(e){throw console.error("Error loading all users:",e),e}},async getAllTeachers(){console.log("getAllTeachers called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-teachers")).json();if(t.success)return console.log("All teachers loaded successfully"),t.teachers.map(r=>({id:r.id,teacher_id:r.teacher_id,username:r.username,name:r.name,surname:r.surname,email:r.email,created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all teachers")}catch(e){throw console.error("Error loading all teachers:",e),e}},async createUser(e){console.log("createUser called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/create-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("User created successfully"),r;throw new Error(r.error||"Failed to create user")}catch(t){throw console.error("Error creating user:",t),t}},async updateUser(e,t){console.log("updateUser called with userId:",e,"data:",t);try{const n=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/update-user/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(n.success)return console.log("User updated successfully"),n;throw new Error(n.error||"Failed to update user")}catch(r){throw console.error("Error updating user:",r),r}},async createTeacher(e){console.log("createTeacher called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/create-teacher",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Teacher created successfully"),r;throw new Error(r.error||"Failed to create teacher")}catch(t){throw console.error("Error creating teacher:",t),t}},async updateTeacher(e,t){console.log("updateTeacher called with teacherId:",e,"data:",t);try{const n=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/update-teacher/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(n.success)return console.log("Teacher updated successfully"),n;throw new Error(n.error||"Failed to update teacher")}catch(r){throw console.error("Error updating teacher:",r),r}},async updateStudentInfo(e){console.log("updateStudentInfo called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-student-info",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Student info updated successfully"),r;throw new Error(r.error||"Failed to update student info")}catch(t){throw console.error("Error updating student info:",t),t}},async changePassword(e){console.log("changePassword called");let t;if(e.studentId)t="/.netlify/functions/change-student-password";else if(e.username)t="/.netlify/functions/change-teacher-password";else throw new Error("Invalid password data: missing studentId or username");try{const n=await(await window.tokenManager.makeAuthenticatedRequest(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(n.success)return console.log("Password changed successfully"),n;throw new Error(n.error||"Failed to change password")}catch(r){throw console.error("Error changing password:",r),r}},async getCurrentTeacherId(){try{const{SecureToken:e}=await ni(async()=>{const{SecureToken:n}=await Promise.resolve().then(()=>o4);return{SecureToken:n}},void 0),t=await(window.tokenManager?.getToken()||e.get())||localStorage.getItem("accessToken");if(!t)return null;const r=JSON.parse(atob(t.split(".")[1]));return r.teacher_id||r.sub||null}catch(e){return console.error("Error getting current teacher ID:",e),null}},async getCurrentAdminId(){try{const{SecureToken:e}=await ni(async()=>{const{SecureToken:n}=await Promise.resolve().then(()=>o4);return{SecureToken:n}},void 0),t=await(window.tokenManager?.getToken()||e.get())||localStorage.getItem("accessToken");if(!t)return null;const r=JSON.parse(atob(t.split(".")[1]));return r.admin_id||r.sub||null}catch(e){return console.error("Error getting current admin ID:",e),null}}},fH=_.createContext(),hH=({children:e})=>{const[t,r]=_.useState(null),[n,s]=_.useState([]),[a,i]=_.useState([]),[o,c]=_.useState([]),[u,d]=_.useState([]),[f,h]=_.useState([]),[g,p]=_.useState([]),[y,v]=_.useState([]),[C,S]=_.useState(!1),[w,T]=_.useState(null),[N,A]=_.useState(!1),[P,j]=_.useState(!1),[F,R]=_.useState(!1),[L,V]=_.useState(null),[Z,Y]=_.useState(null),[re,ue]=_.useState(null),z=_.useCallback(async()=>{try{S(!0),T(null);const _e=`student_subjects_${t?.student_id||t?.id||""}`;console.log(" UserContext: Checking cache for key:",_e);const Ee=Es(_e);if(Ee){console.log(" UserContext: Cache HIT! Using cached student data"),s(Ee),X(Ee);return}console.log(" UserContext: Cache MISS! Fetching from API");const Fe=await Us.getStudentData();if(Fe)s(Fe),X(Fe),console.log(" UserContext: Caching student data with key:",_e),gs(_e,Fe,ls.student_subjects);else throw new Error("No subjects data received")}catch(we){T(we.message||"Failed to load student data"),console.error("Error loading student data:",we)}finally{S(!1)}},[t?.student_id,t?.id]),X=we=>{console.log("Displaying student subjects:",we),s(we)},I=_.useCallback(async()=>{try{if(S(!0),T(null),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.error("No valid teacher session found in loadTeacherData, redirecting to login"),T("No valid teacher session found");return}const _e=`teacher_subjects_${t?.teacher_id||t?.id||""}`,Ee=Es(_e);if(Ee){s(Ee),Ee.length===0?Wt():B(Ee);return}const Fe=await Us.getTeacherSubjects();if(Fe.success)s(Fe.subjects),gs(_e,Fe.subjects,ls.teacher_subjects),Fe.subjects.length===0?Wt():B(Fe.subjects);else throw new Error(Fe.message||"Failed to load teacher data")}catch(we){T(we.message||"Failed to load teacher data"),console.error("Error loading teacher data:",we)}finally{S(!1)}},[t?.teacher_id,t?.id]),B=we=>{console.log("Showing main cabinet with subjects:",we),s(we)},W=we=>{console.log("Displaying grade buttons:",we),c(we)},D=async()=>{try{if(S(!0),T(null),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.error("No valid admin session found in loadAdminData, redirecting to login"),T("No valid admin session found");return}await Promise.all([De(),Qe(),te()])}catch(we){T(we.message||"Failed to load admin data"),console.error("Error loading admin data:",we)}finally{S(!1)}},U=we=>{console.log(" populateStudentInfoDirectly called with:",we);try{r(we),console.log(" Set student profile:",we)}catch(_e){console.error("Error populating student info:",_e)}},q=we=>{console.log("=== populateStudentInfo called ==="),r(we)},H=we=>{console.log("=== populateTeacherInfo called ==="),r(we)},te=_.useCallback(async()=>{try{S(!0);const we="admin_users_",_e=Es(we);if(_e){d(_e),Q(_e);return}const Ee=await Us.getAllUsers();if(Ee.success)d(Ee.users),Q(Ee.users),gs(we,Ee.users,ls.admin_users);else throw new Error(Ee.message||"Failed to load users")}catch(we){T(we.message||"Failed to load users"),console.error("Error loading users:",we)}finally{S(!1)}},[]),Q=we=>{console.log("Displaying all users:",we),d(we)},ae=(we,_e)=>{console.log("Displaying users table:",we,_e),d(we)},ce=()=>{console.log("Toggling users content")},me=()=>{console.log("Showing add user form"),A(!0)},xe=()=>{console.log("Hiding add user form"),A(!1)},se=we=>{console.log("Editing user row:",we);const _e=u.find(Ee=>Ee.id===we);V(_e)},De=_.useCallback(async()=>{try{const we="admin_teachers_",_e=Es(we);if(_e){h(_e),He(_e);return}const Ee=await Us.getAllTeachers();if(Ee.success)h(Ee.teachers),He(Ee.teachers),gs(we,Ee.teachers,ls.admin_teachers);else throw new Error(Ee.message||"Failed to load teachers")}catch(we){T(we.message||"Failed to load teachers"),console.error("Error loading teachers:",we)}},[]),He=we=>{console.log("Displaying all teachers:",we),h(we)},rt=(we,_e)=>{console.log("Displaying teachers table:",we,_e),h(we)},_t=()=>{console.log("Toggling teachers content")},Ke=()=>{console.log("Showing add teacher form"),j(!0)},tt=()=>{console.log("Hiding add teacher form"),j(!1)},Pe=we=>{console.log("Editing teacher:",we);const _e=f.find(Ee=>Ee.id===we);Y(_e)},je=we=>{console.log("Editing teacher row:",we);const _e=f.find(Ee=>Ee.id===we);Y(_e)},Qe=_.useCallback(async()=>{try{const we="admin_subjects_",_e=Es(we);if(_e){p(_e),vt(_e);return}const Ee=await Us.getAllSubjects();if(Ee.success)p(Ee.subjects),vt(Ee.subjects),gs(we,Ee.subjects,ls.admin_subjects);else throw new Error(Ee.message||"Failed to load subjects")}catch(we){T(we.message||"Failed to load subjects"),console.error("Error loading subjects:",we)}},[]),vt=we=>{console.log("Displaying all subjects:",we),p(we)},Ot=(we,_e)=>{console.log("Displaying subjects table:",we,_e),p(we)},$t=()=>{console.log("Toggling subjects content")},Gt=()=>{console.log("Showing add subject form"),R(!0)},ir=()=>{console.log("Hiding add subject form"),R(!1)},dt=we=>{console.log("Editing subject row:",we);const _e=g.find(Ee=>Ee.id===we);ue(_e)},gt=we=>{console.log("Displaying academic year:",we),v(we)},kt=()=>{console.log("Showing add academic year form")},Ge=()=>{console.log("Hiding add academic year form")},Xe=we=>{console.log("Handling add academic year:",we)},Et=()=>{console.log("Toggling academic year content")},Ut=()=>{console.log("Showing academic year editor")},Wt=()=>{console.log("Showing subject selection")},pr=()=>{console.log("Showing main cabinet")},wr=we=>{r(_e=>({..._e,...we}))},br=()=>{r(null),s([]),i([]),c([]),d([]),h([]),p([]),v([]),T(null)},lr=_.useCallback(we=>{br(),we&&eT(we)},[]),Er={userProfile:t,userSubjects:n,userClasses:a,userGrades:o,allUsers:u,allTeachers:f,allSubjects:g,academicYears:y,isLoading:C,error:w,showUserForm:N,showTeacherForm:P,showSubjectForm:F,editingUser:L,editingTeacher:Z,editingSubject:re,loadStudentData:z,displayStudentSubjects:X,populateStudentInfoDirectly:U,populateStudentInfo:q,loadTeacherData:I,showMainCabinetWithSubjects:B,displayGradeButtons:W,populateTeacherInfo:H,showSubjectSelection:Wt,showMainCabinet:pr,loadAdminData:D,getAllUsers:te,displayAllUsers:Q,displayUsersTable:ae,toggleUsersContent:ce,showAddUserForm:me,hideAddUserForm:xe,editUserRow:se,loadAllTeachers:De,displayAllTeachers:He,displayTeachersTable:rt,toggleTeachersContent:_t,showAddTeacherForm:Ke,hideAddTeacherForm:tt,editTeacher:Pe,editTeacherRow:je,loadAllSubjects:Qe,displayAllSubjects:vt,displaySubjectsTable:Ot,toggleSubjectsContent:$t,showAddSubjectForm:Gt,hideAddSubjectForm:ir,editSubjectRow:dt,displayAcademicYear:gt,showAddAcademicYearForm:kt,hideAddAcademicYearForm:Ge,handleAddAcademicYear:Xe,toggleAcademicYearContent:Et,showAcademicYearEditor:Ut,updateUserProfile:wr,clearUserData:br,clearUserDataWithCache:lr,setUserProfile:r,setUserSubjects:s,setUserClasses:i,setUserGrades:c,setAllUsers:d,setAllTeachers:h,setAllSubjects:p,setAcademicYears:v,setError:T};return l.jsx(fH.Provider,{value:Er,children:e})},dS=()=>{const e=_.useContext(fH);if(!e)throw new Error("useUser must be used within a UserProvider");return e},qd={STUDENT_LOGIN:"/.netlify/functions/student-login",TEACHER_LOGIN:"/.netlify/functions/teacher-login",ADMIN_LOGIN:"/.netlify/functions/admin-login",CHANGE_PASSWORD:"/.netlify/functions/change-password",GET_TEST_QUESTIONS:"/.netlify/functions/get-test-questions",SUBMIT_MULTIPLE_CHOICE_TEST:"/.netlify/functions/submit-multiple-choice-test",SUBMIT_TRUE_FALSE_TEST:"/.netlify/functions/submit-true-false-test",SUBMIT_INPUT_TEST:"/.netlify/functions/submit-input-test",SUBMIT_MATCHING_TEST:"/.netlify/functions/submit-matching-test",SUBMIT_DRAWING_TEST:"/.netlify/functions/submit-drawing-test",GET_STUDENT_SUBJECTS:"/.netlify/functions/get-student-subjects",GET_TEACHER_SUBJECTS:"/.netlify/functions/get-teacher-subjects",GET_ALL_USERS:"/.netlify/functions/get-all-users",GET_ALL_TEACHERS:"/.netlify/functions/get-all-teachers",GET_ALL_SUBJECTS:"/.netlify/functions/get-all-subjects",GET_ACADEMIC_YEAR:"/.netlify/functions/get-academic-year",SAVE_MULTIPLE_CHOICE_TEST:"/.netlify/functions/save-multiple-choice-test",SAVE_TRUE_FALSE_TEST:"/.netlify/functions/save-true-false-test",SAVE_INPUT_TEST:"/.netlify/functions/save-input-test",SAVE_MATCHING_TEST:"/.netlify/functions/save-matching-test",SAVE_DRAWING_TEST:"/.netlify/functions/save-drawing-test",UPDATE_DRAWING_TEST_SCORE:"/.netlify/functions/update-drawing-test-score",UPDATE_SPEAKING_TEST_SCORE:"/.netlify/functions/update-speaking-test-score",UPDATE_TEST_SCORE:"/.netlify/functions/update-test-score",ASSIGN_TEST_TO_CLASSES:"/.netlify/functions/assign-test-to-classes",GET_TEACHER_ACTIVE_TESTS:"/.netlify/functions/get-teacher-active-tests",GET_STUDENT_ACTIVE_TESTS:"/.netlify/functions/get-student-active-tests"},as={MULTIPLE_CHOICE:"multiple_choice",TRUE_FALSE:"true_false",INPUT:"input",MATCHING:"matching_type",WORD_MATCHING:"word_matching",DRAWING:"drawing",FILL_BLANKS:"fill_blanks"},$o={STUDENT:"student",TEACHER:"teacher",ADMIN:"admin"};Array.from({length:10},(e,t)=>t+1);const eg={NOTIFICATION_DURATION:3e3},$f=(e,t,r)=>{if(!e||!Array.isArray(e)||e.length===0)return{score:0,total:0,percentage:0};let n=0;return e.forEach((s,a)=>{const i=Array.isArray(t)?t[a]:t[String(s.question_id||s.id||a)];i!=null&&Xp(s,i,r)&&n++}),{score:n,total:e.length,percentage:Math.round(n/e.length*100)}},Fv=(e,t)=>{console.log(" Getting correct answer for question:",e,"testType:",t);let r="";switch(t){case as.TRUE_FALSE:r=e.correct_answer?"true":"false",console.log(" TRUE_FALSE correct_answer from question:",r,typeof r);break;case as.MULTIPLE_CHOICE:const n=e.correct_answer.charCodeAt(0)-65,s=`option_${String.fromCharCode(97+n)}`,a=e[s];a?r=a:r=`Option ${e.correct_answer}`;break;case as.INPUT:e.correct_answers&&Array.isArray(e.correct_answers)?r=e.correct_answers.join(", "):r=e.correct_answer||"Unknown";break;case as.MATCHING:r=e.correct_answer||e.answer;break;case as.WORD_MATCHING:r=e.correct_answer||e.answer;break;case as.DRAWING:r="Drawing required";break;case as.FILL_BLANKS:e.correct_answers&&Array.isArray(e.correct_answers)&&e.correct_answers.length>0?r=e.correct_answers[0]:r=e.correct_answer||"Unknown";break;default:r="Unknown"}return console.log(" Correct answer:",r),r},Xp=(e,t,r)=>{if(console.log("[DEBUG] checkAnswerCorrectness called for question:",e,"studentAnswer:",t,"testType:",r),!t||t==="")return console.log("[DEBUG] No student answer provided"),!1;let n=!1;switch(r){case as.TRUE_FALSE:n=t.toLowerCase()==="true"===e.correct_answer;break;case as.MULTIPLE_CHOICE:let a="";if(typeof t=="string"){const o=t.trim();if(/^[a-z]$/i.test(o))a=o.toUpperCase();else if(/^\d+$/.test(o)){const c=parseInt(o,10),u=c>=0?c:NaN;Number.isNaN(u)||(a=String.fromCharCode(65+u))}}else if(typeof t=="number"){const o=t;Number.isNaN(o)||(a=String.fromCharCode(65+o))}n=a!==""&&a===String(e.correct_answer||"").toUpperCase();break;case as.INPUT:if(e.correct_answers&&Array.isArray(e.correct_answers)){const o=t.replace(/[.,/*';:!@#$%^&*()_+=\[\]{}|\\:";'<>?,.\s-]+/g,"").toLowerCase().trim();n=e.correct_answers.some(c=>{const u=c.replace(/[.,/*';:!@#$%^&*()_+=\[\]{}|\\:";'<>?,.\s-]+/g,"").toLowerCase().trim();return o===u?!0:u&&o.includes(u)?u.length===1?o.startsWith(u)||o.endsWith(u):!0:!1})}else{const o=t.toLowerCase().trim(),c=e.correct_answer.toLowerCase().trim();o===c?n=!0:c&&o.includes(c)?c.length===1?n=o.startsWith(c)||o.endsWith(c):n=!0:n=!1}break;case as.MATCHING:if(e.correct_answer&&typeof e.correct_answer=="object"){const o=typeof t=="string"?JSON.parse(t||"{}"):t;n=JSON.stringify(o)===JSON.stringify(e.correct_answer)}break;case as.WORD_MATCHING:if(e.correct_answer&&typeof e.correct_answer=="object"){const o=typeof t=="string"?JSON.parse(t||"{}"):t;n=JSON.stringify(o)===JSON.stringify(e.correct_answer)}break;case as.DRAWING:console.warn("Drawing tests should not be auto-scored!"),n=!1;break;case as.FILL_BLANKS:const i=e.correct_answers&&Array.isArray(e.correct_answers)&&e.correct_answers.length>0?e.correct_answers[0]:e.correct_answer;if(i&&t){let o="";if(typeof t=="string"){const c=t.trim();if(/^[a-z]$/i.test(c))o=c.toUpperCase();else if(/^\d+$/.test(c)){const u=parseInt(c,10),d=u>=0?u:NaN;Number.isNaN(d)||(o=String.fromCharCode(65+d))}}else if(typeof t=="number"){const c=t;Number.isNaN(c)||(o=String.fromCharCode(65+c))}n=o!==""&&o===String(i||"").toUpperCase()}break;default:console.warn(`[WARN] Unknown test type for answer checking: ${r}`),n=!1}return console.log(`[DEBUG] Answer correctness: ${n}`),n};class o0e{constructor(){this.academicCalendar=null,this.loaded=!1}async loadAcademicCalendar(){if(this.loaded)return this.academicCalendar;try{const t=async n=>{const s=await fetch(n,{headers:{Accept:"application/json"},credentials:"include"}),a=s.headers&&s.headers.get&&s.headers.get("content-type")||"";if(!s.ok)throw new Error(`HTTP ${s.status}`);if(!a.includes("application/json"))throw new Error("Non-JSON response");return await s.json()};let r=null;if(r=await t("/academic_year.json"),!Array.isArray(r))throw new Error("Invalid academic calendar format");return this.academicCalendar=r,this.loaded=!0,console.log(" Academic calendar loaded:",this.academicCalendar.length,"terms"),this.academicCalendar}catch(t){return console.error(" Error loading academic calendar:",t),null}}getCurrentTerm(){if(!this.academicCalendar)return null;const t=new Date;return this.academicCalendar.find(n=>{const s=new Date(n.start_date),a=new Date(n.end_date);return t>=s&&t<=a})}getCurrentSemester(){const t=this.getCurrentTerm();if(!t)return null;const r=t.semester,n=this.academicCalendar.filter(s=>s.semester===r&&s.academic_year===t.academic_year);return{semester:r,currentTerm:t,allTerms:n}}getCurrentAcademicPeriodId(){return this.getCurrentTerm()?.id||null}getSemesterTerms(t){return this.academicCalendar?this.academicCalendar.filter(r=>r.semester===t):[]}getAcademicYearTerms(t){return this.academicCalendar?this.academicCalendar.filter(r=>r.academic_year===t):[]}getCurrentSemesterWithTerms(){const t=this.getCurrentSemester();if(!t)return null;const{semester:r,currentTerm:n,allTerms:s}=t;return{semester:r,currentTerm:n,allTerms:s,terms:s.map(a=>({id:a.id,term:a.term,start_date:a.start_date,end_date:a.end_date,isCurrent:a.id===n.id,label:`Term ${a.term}${a.id===n.id?" (Current)":""}`}))}}getCurrentSemesterTerms(){const t=this.getCurrentSemester();if(!t)return null;const{semester:r,currentTerm:n,allTerms:s}=t;return{semester:r,currentTerm:n,terms:s.map(a=>({id:a.id,term:a.term,start_date:a.start_date,end_date:a.end_date,isCurrent:a.id===n.id,label:`Term ${a.term}${a.id===n.id?" (Current)":""}`}))}}getTermById(t){return this.academicCalendar?this.academicCalendar.find(r=>r.id===t):null}isCurrentTerm(t){return this.getCurrentTerm()?.id===t}getAcademicYears(){return this.academicCalendar?[...new Set(this.academicCalendar.map(r=>r.academic_year))].sort():[]}getAcademicYearSemesterTerms(t,r){return this.academicCalendar?this.academicCalendar.filter(n=>n.academic_year===t&&n.semester===r):[]}}const hu=new o0e,fS=Object.freeze(Object.defineProperty({__proto__:null,academicCalendarService:hu},Symbol.toStringTag,{value:"Module"})),Cn={async getTestInfo(e,t){console.log(`[DEBUG] getTestInfo called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test info from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test info data received:",s),s.success)return console.log("[DEBUG] Test info retrieved successfully"),s.test_info;throw new Error(s.error||"Failed to get test info")}catch(r){throw console.error("[ERROR] Failed to get test info:",r),r}},async getTestQuestions(e,t){console.log(`[DEBUG] getTestQuestions called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test questions from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test questions data received:",s),s.success)return console.log("[DEBUG] Test questions retrieved successfully"),s.questions;throw new Error(s.error||"Failed to get test questions")}catch(r){throw console.error("[ERROR] Failed to get test questions:",r),r}},async getTestQuestionsWithInfo(e,t){console.log(`[DEBUG] getTestQuestionsWithInfo called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test questions with info from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test questions with info data received:",s),s.success)return console.log("[DEBUG] Test questions with info retrieved successfully"),{questions:s.questions,testInfo:s.test_info};throw new Error(s.error||"Failed to get test questions")}catch(r){throw console.error("[ERROR] Failed to get test questions with info:",r),r}},async getActiveTests(){console.log("getActiveTests called - extracting studentId from JWT token");try{const e="/.netlify/functions/get-student-active-tests";console.log("[DEBUG] Fetching active tests from:",e);const t=await window.tokenManager.makeAuthenticatedRequest(e);if(console.log("[DEBUG] Response status:",t.status),!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(console.log("[DEBUG] Active tests data received:",r),r.success)return console.log("[DEBUG] Active tests retrieved successfully"),r.tests;throw new Error(r.error||"Failed to get active tests")}catch(e){throw console.error("[ERROR] Failed to get active tests:",e),e}},async getTeacherTests(e=!1){console.log("getTeacherTests called - extracting teacherId from JWT token");try{const t="/.netlify/functions/get-teacher-active-tests",r=e?`${t}?ts=${Date.now()}`:t;console.log("[DEBUG] Fetching teacher tests from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Teacher tests data received:",s),s.success)return console.log("[DEBUG] Teacher tests retrieved successfully"),s.tests;throw new Error(s.error||"Failed to get teacher tests")}catch(t){throw console.error("[ERROR] Failed to get teacher tests:",t),t}},async submitTest(e,t,r,n={},s=null){console.log("Submitting test:",{testType:e,testId:t});try{if(Object.keys(r).length===0)throw new Error("Please answer at least one question before submitting.");let a;try{const T=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`)).json();if(T.success)a=T.test_info;else throw new Error("Failed to get test information")}catch(w){console.error("Error getting test info:",w);const T=await this.getTestQuestions(e,t);a={test_name:`Test ${t}`,num_questions:T.length}}const i=await this.getTestQuestions(e,t);let o,c;if(e==="drawing")o=null,c=null;else{const w=n?.answers_by_id?n.answers_by_id:r;o=$f(i,w,e).score,c=a.num_questions}const u=this.transformAnswersForSubmission(r,e),d=a.teacher_id||null,f=a.subject_id||null,h=s?.student_id||s?.id||(window.tokenManager?.getCurrentUser?window.tokenManager.getCurrentUser()?.student_id||window.tokenManager.getCurrentUser()?.id:null);await hu.loadAcademicCalendar();const p=hu.getCurrentTerm()?.id;if(!p)throw new Error("No current academic period found");const y={test_id:t,test_name:a.test_name,test_type:e,teacher_id:d,subject_id:f,student_id:h,academic_period_id:p,answers:u,score:o,maxScore:c,time_taken:n.time_taken||null,started_at:n.started_at||null,submitted_at:n.submitted_at||new Date().toISOString(),caught_cheating:n.caught_cheating||!1,visibility_change_times:n.visibility_change_times||0,answers_by_id:n.answers_by_id||null,question_order:n.question_order||null,retest_assignment_id:n.retest_assignment_id||null,parent_test_id:n.parent_test_id||t};console.log(" testService retest_assignment_id:",n.retest_assignment_id),console.log(" testService timingData:",n),console.log(" testService commonData.retest_assignment_id:",y.retest_assignment_id);let v;switch(e){case"multiple_choice":v="/.netlify/functions/submit-multiple-choice-test";break;case"true_false":v="/.netlify/functions/submit-true-false-test";break;case"input":v="/.netlify/functions/submit-input-test";break;case"matching_type":v="/.netlify/functions/submit-matching-type-test";break;case"word_matching":v="/.netlify/functions/submit-word-matching-test";break;case"drawing":v="/.netlify/functions/submit-drawing-test";break;case"fill_blanks":v="/.netlify/functions/submit-fill-blanks-test";break;default:throw new Error(`Unsupported test type: ${e}`)}console.log("Submitting to:",v),console.log("Submission data:",y),console.log("Submission data JSON:",JSON.stringify(y,null,2)),console.log(" Final submission retest_assignment_id:",y.retest_assignment_id);const C=await window.tokenManager.makeAuthenticatedRequest(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!C.ok)throw new Error(`HTTP error! status: ${C.status}`);const S=await C.json();if(console.log("Test submission result:",S),S.success)return this.clearTestProgress(e,t),{success:!0,score:o,maxScore:c,result:S};throw new Error(S.error||"Failed to submit test")}catch(a){throw console.error("Error submitting test:",a),a}},async createTest(e){try{return(await la.post("/tests/create",e)).data}catch(t){throw new Error(t.message||"Failed to create test")}},async updateTest(e,t,r){try{return(await la.put(`/tests/${e}/${t}`,r)).data}catch(n){throw new Error(n.message||"Failed to update test")}},async deleteTest(e,t){try{return(await la.delete(`/tests/${e}/${t}`)).data}catch(r){throw new Error(r.message||"Failed to delete test")}},async duplicateTest(e,t){try{return(await la.post(`/tests/${e}/${t}/duplicate`)).data}catch(r){throw new Error(r.message||"Failed to duplicate test")}},async publishTest(e,t){try{return(await la.post(`/tests/${e}/${t}/publish`)).data}catch(r){throw new Error(r.message||"Failed to publish test")}},async unpublishTest(e,t){try{return(await la.post(`/tests/${e}/${t}/unpublish`)).data}catch(r){throw new Error(r.message||"Failed to unpublish test")}},async removeClassAssignment(e,t,r){try{return(await la.delete(`/tests/${e}/${t}/assignments/${r}`)).data}catch(n){throw new Error(n.message||"Failed to remove class assignment")}},async getTestStatistics(e,t){try{return(await la.get(`/tests/${e}/${t}/statistics`)).data}catch(r){throw new Error(r.message||"Failed to get test statistics")}},async exportTest(e,t,r="json"){try{return(await la.get(`/tests/${e}/${t}/export?format=${r}`)).data}catch(n){throw new Error(n.message||"Failed to export test")}},async importTest(e,t){try{return(await la.uploadFile(`/tests/import?type=${t}`,e)).data}catch(r){throw new Error(r.message||"Failed to import test")}},async getTestResults(e,t){try{return(await la.get(`/tests/${e}/${t}/results`)).data}catch(r){throw new Error(r.message||"Failed to get test results")}},async getStudentTestResults(){try{console.log("[DEBUG] Fetching student test results from: /.netlify/functions/get-student-test-results");const e=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-student-test-results");if(console.log("[DEBUG] Response status:",e.status),!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();if(console.log("[DEBUG] Student test results data received:",t),t.success)return console.log("[DEBUG] Student test results retrieved successfully"),t;throw new Error(t.error||"Failed to get student test results")}catch(e){throw console.error("[ERROR] Failed to get student test results:",e),new Error(e.message||"Failed to get student test results")}},async getClassResults(e,t,r){try{return(await la.get(`/tests/class-results/${e}/${t}/${r}`)).data}catch(n){throw new Error(n.message||"Failed to get class results")}},async saveTestProgress(e,t,r){try{return(await la.post(`/tests/${e}/${t}/progress`,{progress:r})).data}catch(n){throw new Error(n.message||"Failed to save test progress")}},async getTestProgress(e,t){try{return(await la.get(`/tests/${e}/${t}/progress`)).data}catch(r){throw new Error(r.message||"Failed to get test progress")}},async clearTestProgress(e,t){try{return(await la.delete(`/tests/${e}/${t}/progress`)).data}catch(r){throw new Error(r.message||"Failed to clear test progress")}},async validateTestData(e){try{return(await la.post("/tests/validate",e)).data}catch(t){throw new Error(t.message||"Failed to validate test data")}},async getTestPreview(e,t){try{return(await la.get(`/tests/${e}/${t}/preview`)).data}catch(r){throw new Error(r.message||"Failed to get test preview")}},isAnswerCorrect(e,t,r,n){switch(n){case"multiple_choice":return String.fromCharCode(65+parseInt(t))===r.correct_answer;case"true_false":return t.toLowerCase()==="true"===r.correct_answer;case"input":const i=r.correct_answers||[],o=t.toLowerCase().trim();return i.some(c=>{const u=c.toLowerCase().trim();return o===u?!0:u&&o.includes(u)?u.length===1?o.startsWith(u)||o.endsWith(u):!0:!1});case"matching_type":return JSON.stringify(t)===JSON.stringify(r.correct_answer);case"word_matching":return JSON.stringify(t)===JSON.stringify(r.correct_answer);case"drawing":return t&&t!=="No answer";default:return!1}},transformAnswersForSubmission(e,t){switch(t){case"multiple_choice":return e;case"true_false":return e;case"input":return e;case"matching_type":return e;case"word_matching":return e;case"drawing":if(Array.isArray(e)&&e.length>0)try{const r=e[0];return typeof r=="string"&&r.startsWith("[")?JSON.parse(r):e}catch(r){return console.warn("Failed to parse drawing answers:",r),e}return e;default:return e}},async markAssignmentCompleted(e){try{console.log(`[DEBUG] markAssignmentCompleted called with assignmentId: ${e}`);const t=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/mark-test-completed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignment_id:e})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(console.log("[DEBUG] Mark assignment completed response:",r),r.success)return console.log(`Assignment ${e} marked as completed successfully`),{success:!0,message:r.message};throw new Error(r.error||"Failed to mark assignment as completed")}catch(t){throw console.error("Error marking assignment completed:",t),t}},async activateAssignment(e){try{console.log(`[DEBUG] activateAssignment called with assignmentId: ${e}`);const t=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/activate-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignment_id:e})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(console.log("[DEBUG] Activate assignment response:",r),r.success)return console.log(`Assignment ${e} activated successfully`),{success:!0,message:r.message};throw new Error(r.error||"Failed to activate assignment")}catch(t){throw console.error("Error activating assignment:",t),t}},clearTestProgress(e,t){try{const r=`test_progress_${e}_${t}`;localStorage.removeItem(r),console.log(`Test progress cleared for ${e}_${t}`)}catch(r){console.error("Error clearing test progress:",r)}},async saveMultipleChoiceTest(e){console.log("[DEBUG] saveMultipleChoiceTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-multiple-choice-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save multiple choice test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving multiple choice test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveTrueFalseTest(e){console.log("[DEBUG] saveTrueFalseTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-true-false-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save true/false test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving true/false test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveInputTest(e){console.log("[DEBUG] saveInputTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-input-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save input test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving input test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveMatchingTest(e){console.log("[DEBUG] saveMatchingTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,test_type:"matching_type",num_questions:e.num_blocks})})).json();return console.log("[DEBUG] Save matching test response:",r),r.success?{success:!0,test_id:r.test_id,message:r.message,assignments_count:r.assignments_count}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving matching test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveWordMatchingTest(e){console.log("[DEBUG] saveWordMatchingTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,test_type:"word_matching"})})).json();return console.log("[DEBUG] Save word matching test response:",r),r.success?{success:!0,test_id:r.test_id,message:r.message,assignments_count:r.assignments_count}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving word matching test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveDrawingTest(e){console.log("[DEBUG] saveDrawingTest called with:",e);try{const t={...e,test_type:"drawing"},n=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();return console.log("[DEBUG] Save drawing test response:",n),n.success?{success:!0,data:{test_id:n.test_id}}:{success:!1,message:n.message||"Failed to save test"}}catch(t){return console.error("Error saving drawing test:",t),{success:!1,message:"Error saving test: "+t.message}}},async getDrawingTest(e){console.log("[DEBUG] getDrawingTest called with testId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-drawing-test?test_id=${e}`,{method:"GET"})).json();return console.log("[DEBUG] Get drawing test response:",r),r.success?{success:!0,data:r.data}:{success:!1,message:r.message||"Failed to get test"}}catch(t){return console.error("Error getting drawing test:",t),{success:!1,message:"Error getting test: "+t.message}}},async submitDrawingTest(e,t,r,n){console.log("[DEBUG] submitDrawingTest called with:",{testId:e,answers:t,timeTaken:r,antiCheatingData:n});try{const a=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/submit-drawing-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e,answers:t,time_taken:r,caught_cheating:n?.caught_cheating||!1,visibility_change_times:n?.visibility_change_times||0})})).json();return console.log("[DEBUG] Submit drawing test response:",a),a.success?{success:!0,data:a.data}:{success:!1,message:a.message||"Failed to submit test"}}catch(s){return console.error("Error submitting drawing test:",s),{success:!1,message:"Error submitting test: "+s.message}}},async updateDrawingTestScore(e,t,r){console.log("[DEBUG] updateDrawingTestScore called with:",{resultId:e,score:t,maxScore:r});try{const s=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-drawing-test-score",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({result_id:e,score:t,max_score:r})})).json();return console.log("[DEBUG] Update drawing test score response:",s),s.success?{success:!0,data:s.data}:{success:!1,message:s.message||"Failed to update score"}}catch(n){return console.error("Error updating drawing test score:",n),{success:!1,message:"Error updating score: "+n.message}}},async getWordMatchingTest(e){console.log("[DEBUG] getWordMatchingTest called with testId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-word-matching-test?test_id=${e}`,{method:"GET"})).json();return console.log("[DEBUG] Get word matching test response:",r),r.success?{success:!0,data:r.data}:{success:!1,message:r.message||"Failed to get test"}}catch(t){return console.error("Error getting word matching test:",t),{success:!1,message:"Error getting test: "+t.message}}},async submitWordMatchingTest(e,t,r,n){console.log("[DEBUG] submitWordMatchingTest called with:",{testId:e,answers:t,timeTaken:r,antiCheatingData:n});try{const a=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/submit-word-matching-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e,answers:t,time_taken:r,caught_cheating:n?.caught_cheating||!1,visibility_change_times:n?.visibility_change_times||0})})).json();return console.log("[DEBUG] Submit word matching test response:",a),a.success?{success:!0,result:a.result}:{success:!1,message:a.message||"Failed to submit test"}}catch(s){return console.error("Error submitting word matching test:",s),{success:!1,message:"Error submitting test: "+s.message}}},async assignTestToClasses(e){console.log("[DEBUG] assignTestToClasses called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save test with assignments response:",r),r.success?{success:!0,message:"Test assigned successfully"}:{success:!1,message:r.message||"Failed to assign test"}}catch(t){return console.error("Error assigning test to classes:",t),{success:!1,message:"Error assigning test: "+t.message}}},async removeClassAssignment(e){console.log("[DEBUG] removeClassAssignment called with assignmentId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/remove-class-assignment?assignment_id=${e}`,{method:"DELETE"})).json();return console.log("[DEBUG] Remove class assignment response:",r),r.success?{success:!0,message:"Assignment removed successfully"}:{success:!1,message:r.message||"Failed to remove assignment"}}catch(t){return console.error("Error removing class assignment:",t),{success:!1,message:"Error removing assignment: "+t.message}}},async updateTestQuestions(e,t,r){try{console.log(`[DEBUG] updateTestQuestions called with testType: ${e}, testId: ${t}`);const n=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-test-questions",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_type:e,test_id:t,questions:r})});if(!n.ok){let a=`HTTP error! status: ${n.status}`;try{const i=await n.json();a=i.details||i.error||a,console.error("[DEBUG] Update questions error response:",i)}catch{}throw new Error(a)}const s=await n.json();if(console.log("[DEBUG] Update questions response:",s),s.success)return console.log(`Questions for ${e}_${t} updated successfully`),{success:!0,message:s.message};{const a=s.error||s.details||"Failed to update questions";throw console.error("[DEBUG] Update questions error:",a,s),new Error(a)}}catch(n){throw console.error("Error updating questions:",n),n}},async updateTestSettings(e,t,r){try{console.log(`[DEBUG] updateTestSettings called with testType: ${e}, testId: ${t}`);const n=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-test-settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_type:e,test_id:t,...r})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Update settings response:",s),s.success)return console.log(`Settings for ${e}_${t} updated successfully`),{success:!0,message:s.message};throw new Error(s.error||"Failed to update settings")}catch(n){throw console.error("Error updating settings:",n),n}}},mH=_.createContext(),gH=({children:e})=>{const[t,r]=_.useState(null),[n,s]=_.useState([]),[a,i]=_.useState({}),[o,c]=_.useState({}),[u,d]=_.useState(!1),[f,h]=_.useState(null),[g,p]=_.useState([]),[y,v]=_.useState(!1),[C,S]=_.useState(null),[w,T]=_.useState({isOpen:!1,testType:null,testId:null,testName:null,questions:[]}),[N,A]=_.useState(null),[P,j]=_.useState(0),{getItem:F,setItem:R,removeItem:L}=hW();_.useEffect(()=>{let we;return u&&N&&(we=setInterval(()=>{const _e=Math.floor((Date.now()-N)/1e3);j(_e)},1e3)),()=>{we&&clearInterval(we)}},[u,N]);const V=async(we,_e)=>{try{v(!0),S(null),console.log(`[DEBUG] loadTestForPage called with testType: ${we}, testId: ${_e}`);const Ee=await Cn.getTestInfo(we,_e);console.log("[DEBUG] Test info retrieved:",Ee);const Fe=await Cn.getTestQuestions(we,_e);console.log("[DEBUG] Test questions retrieved:",Fe),r({...Ee,testType:we,testId:_e}),s(Fe),d(!0),A(Date.now()),j(0),Z(we,_e),console.log("[DEBUG] Test loaded successfully")}catch(Ee){S(Ee.message||"Failed to load test"),console.error("Error loading test:",Ee)}finally{v(!1)}},Z=(we,_e)=>{try{const Ee=`test_progress_${we}_${_e}`,Fe=F(Ee);Fe&&(i(Fe.answers||{}),c(Fe.progress||{}))}catch(Ee){console.error("Error loading saved progress:",Ee)}},Y=(we,_e,Ee,Fe)=>{try{if(window.tokenManager&&!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot save progress: No valid JWT token");return}const jt=`test_progress_${window.tokenManager?.getDecodedToken()?.sub||"unknown"}_${we}_${_e}`,Mt={...a,[Ee]:Fe},Be={...o,[Ee]:{answered:!0,timestamp:Date.now()}};i(Mt),c(Be),R(jt,{answers:Mt,progress:Be,lastSaved:Date.now()}),console.log(`Saved progress for question ${Ee}:`,Fe)}catch(at){console.error("Error saving test progress:",at)}},re=(we,_e,Ee)=>{try{if(window.tokenManager&&!window.tokenManager.isAuthenticated())return console.warn("[WARN] Cannot get progress: No valid JWT token"),null;const at=`test_progress_${window.tokenManager?.getDecodedToken()?.sub||"unknown"}_${we}_${_e}`;return F(at)?.answers?.[Ee]||null}catch(Fe){return console.error("Error getting test progress:",Fe),null}},ue=(we,_e)=>{try{if(console.log(`[DEBUG] clearTestProgress called with testType: ${we}, testId: ${_e}`),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot clear progress: No valid JWT token");return}const Ee=window.tokenManager?.getDecodedToken()?.sub||"unknown",Fe=`test_progress_${Ee}_${we}_${_e}`;console.log(`[DEBUG] Removing localStorage key: ${Fe}`);const at=F(Fe)!==null;L(Fe),i({}),c({});for(let jt=0;jt<localStorage.length;jt++){const Mt=localStorage.key(jt);Mt&&Mt.startsWith(`test_progress_${Ee}_${we}_${_e}_`)&&(localStorage.removeItem(Mt),console.log(`[DEBUG] Cleared individual question key: ${Mt}`))}console.log(at?`[DEBUG] Progress cleared for test ${we}_${_e}`:`[DEBUG] No progress found to clear for test ${we}_${_e}`)}catch(Ee){console.error("Error clearing test progress:",Ee)}},z=async(we,_e,Ee="")=>{try{v(!0),S(null),console.log("Submitting test:",{testType:we,testId:_e});const Fe=te(we,_e);if(Object.keys(Fe).length===0){S("Please answer at least one question before submitting.");return}let at;try{at=await Cn.getTestInfo(we,_e)}catch(rr){console.error("Error getting test info:",rr);const _r=await Cn.getTestQuestions(we,_e);at={test_name:`Test ${_e}`,num_questions:_r.length}}const jt=await Cn.getTestQuestions(we,_e),Mt=$f(jt,Fe,we),Be=at.num_questions,lt=ae(Fe,we),ct={test_id:_e,test_name:at.test_name,score:Mt,maxScore:Be,answers:lt},Qt=await Cn.submitTest(we,_e,ct);if(Qt.success){if(h(Qt.result),W(we,_e,Ee),ue(we,_e),Ee){const rr=`student_results_table_${Ee}`;we!=="drawing"?(console.log(" TestContext: Caching test results after submission with key:",rr),gs(rr,Qt.result,ls.student_results_table)):console.log(" TestContext: Skipping cache for drawing test submission (teacher-scored).")}return Ee&&u1(Ee,we,_e),d(!1),Qt.results}else throw new Error(Qt.message||"Test submission failed")}catch(Fe){throw S(Fe.message||"Failed to submit test"),Fe}finally{v(!1)}},X=(we,_e,Ee)=>{h({testType:we,testId:_e,answers:Ee}),d(!1)},I=()=>{r(null),s([]),i({}),c({}),d(!1),h(null),S(null),A(null),j(0)},B=(we,_e,Ee="")=>{try{const Fe=`test_completed_${Ee}_${we}_${_e}`;return F(Fe)===!0}catch(Fe){return console.error("Error checking test completion:",Fe),!1}},W=(we,_e,Ee="")=>{try{const Fe=`test_completed_${Ee}_${we}_${_e}`;R(Fe,!0)}catch(Fe){console.error("Error marking test completed:",Fe)}},D=we=>Object.keys(a).length,U=()=>{const we=D(t?.testType),_e=n.length;return{canSubmit:we===_e,answeredCount:we,totalQuestions:_e}},q=()=>{t&&ue(t.testType,t.testId),I()},H=(we="")=>{try{const _e=`student_results_table_${we}`;console.log(" TestContext: Clearing test results cache:",_e),localStorage.removeItem(_e),console.log(" TestContext: Test results cache cleared")}catch(_e){console.error("Error clearing test results cache:",_e)}},te=(we,_e)=>({...a}),Q=(we,_e,Ee=null)=>{try{if(!we)return"No answer";switch(_e){case"true_false":return we?"True":"False";case"multiple_choice":if(Ee&&typeof we=="string"&&!isNaN(parseInt(we))){const Fe=parseInt(we),at=`option_${String.fromCharCode(97+Fe)}`,jt=Ee[at];if(jt)return jt}return String(we).toUpperCase();case"input":return String(we);case"matching_type":return typeof we=="object"?Object.entries(we).map(([Fe,at])=>`${Fe}  ${at}`).join(", "):String(we);case"word_matching":return typeof we=="object"?Object.entries(we).map(([Fe,at])=>`${Fe}  ${at}`).join(", "):String(we);case"drawing":return"Drawing submitted";default:return String(we)}}catch(Fe){return console.error("Error formatting student answer:",Fe),"Error displaying answer"}},ae=(we,_e)=>{try{if(!we||typeof we!="object")return{};const Ee={};return Object.entries(we).forEach(([Fe,at])=>{if(at!=null)switch(_e){case"true_false":Ee[Fe]=!!at;break;case"multiple_choice":Ee[Fe]=String(at).toUpperCase();break;case"input":Ee[Fe]=String(at).trim();break;case"matching_type":typeof at=="object"?Ee[Fe]=at:Ee[Fe]=String(at);break;case"word_matching":typeof at=="object"?Ee[Fe]=at:Ee[Fe]=String(at);break;case"drawing":Ee[Fe]=at;break;default:Ee[Fe]=at}}),Ee}catch(Ee){return console.error("Error transforming answers for submission:",Ee),we||{}}},ce=_.useCallback(async(we="")=>{const _e=`student_active_tests_${we}`,Ee=ZC(_e,{includeExpired:!0}),Fe=Ee?.data,at=Array.isArray(Fe)?!0:!!Fe,jt=ls.student_active_tests?ls.student_active_tests*.5:0,Mt=!at||Ee?.isExpired||jt>0&&Ee?.age>jt,Be=!at||Ee?.isExpired===!0;if(at&&p(Fe),!Mt)return v(!1),Fe;if(!Be&&at)return v(!1),(async()=>{try{const lt=await Cn.getActiveTests();if(p(lt),gs(_e,lt,ls.student_active_tests),we)try{localStorage.setItem(`last_cabinet_refresh_${we}`,Date.now().toString())}catch(ct){console.warn("Unable to persist last cabinet refresh timestamp:",ct)}}catch(lt){console.warn("Background refresh of active tests failed:",lt)}})(),Fe;v(!0);try{const lt=await Cn.getActiveTests();if(p(lt),gs(_e,lt,ls.student_active_tests),we)try{localStorage.setItem(`last_cabinet_refresh_${we}`,Date.now().toString())}catch(ct){console.warn("Unable to persist last cabinet refresh timestamp:",ct)}return lt}catch(lt){return S(lt.message||"Failed to load active tests"),p([]),[]}finally{v(!1)}},[]),me=async()=>{try{return v(!0),await Cn.getTeacherTests()}catch(we){return S(we.message||"Failed to load teacher tests"),[]}finally{v(!1)}},xe=async we=>{try{return v(!0),await Cn.createTest(we)}catch(_e){throw S(_e.message||"Failed to create test"),_e}finally{v(!1)}},se=async(we,_e)=>{try{return v(!0),await Cn.deleteTest(we,_e)}catch(Ee){throw S(Ee.message||"Failed to delete test"),Ee}finally{v(!1)}},De=async(we,_e)=>{try{return await Cn.getTestInfo(we,_e)}catch(Ee){throw console.error("Error getting test info:",Ee),Ee}},He=async(we,_e)=>{try{return await Cn.getTestQuestions(we,_e)}catch(Ee){throw console.error("Error getting test questions:",Ee),Ee}},rt=async(we,_e,Ee)=>{try{console.log("Showing test results:",{testType:we,testId:_e,studentAnswers:Ee});const Fe=await De(we,_e),at=await He(we,_e);tt(Fe,at,we,Ee),d(!1),console.log("Test results displayed successfully")}catch(Fe){console.error("Error showing test results:",Fe),S("Failed to display test results"),h({testType:we,testId:_e,answers:Ee,showResults:!0,error:"Could not load detailed results"}),d(!1)}},_t=async(we,_e,Ee)=>{try{v(!0);const Fe=await De(we,_e),at=await He(we,_e);tt(Fe,at,we,Ee)}catch(Fe){S(Fe.message||"Failed to load test results")}finally{v(!1)}},Ke=_.useCallback(async(we="")=>{try{v(!0);const _e=`student_results_table_${we}`;console.log(" TestContext: Checking cache for key:",_e);const Ee=Es(_e);if(Ee)return console.log(" TestContext: Cache HIT! Using cached test results"),h(Ee),Ee;console.log(" TestContext: Cache MISS! Fetching from API");const Fe=await Cn.getStudentTestResults();return console.log(" TestContext: Test results loaded:",Fe),console.log(" TestContext: Results data:",Fe?.results||Fe),console.log(" TestContext: Results length:",Fe?.results?.length||0),h(Fe),console.log(" TestContext: Caching test results with key:",_e),console.log(" TestContext: Results being cached:",Fe),console.log(" TestContext: Results.results being cached:",Fe.results),gs(_e,Fe,ls.student_results_table),Fe}catch(_e){throw console.error("Error loading test results:",_e),S(_e.message||"Failed to load test results"),_e}finally{v(!1)}},[]),tt=(we,_e,Ee,Fe)=>{try{console.log("Displaying test results:",{testInfo:we,questions:_e,testType:Ee,studentAnswers:Fe});const at=$f(_e,Fe,Ee),jt=we?.num_questions||_e?.length||0,Mt=jt>0?Math.round(at/jt*100):0,Be=Mt>=60,lt=_e.map((ct,Qt)=>{const rr=ct.question_id||ct.id,_r=Fe[rr],tn=Xp(ct,_r,Ee);return{questionNumber:Qt+1,question:ct.question||ct.question_text,userAnswer:Q(_r,Ee),correctAnswer:Fv(ct,Ee),isCorrect:tn,questionType:Ee}});h({testInfo:we,questions:_e,testType:Ee,studentAnswers:Fe,showResults:!0,score:at,totalQuestions:jt,percentage:Mt,passed:Be,questionAnalysis:lt,timestamp:new Date().toISOString()}),c(ct=>({...ct,score:at,totalQuestions:jt,percentage:Mt,passed:Be,lastUpdated:Date.now()})),Pe(),console.log(`Test results displayed: ${at}/${jt} (${Mt}%) - ${Be?"PASSED":"FAILED"}`)}catch(at){console.error("Error displaying test results:",at),S("Failed to display test results")}},Pe=_.useCallback(()=>{try{console.log("Setting up test results page event listeners");const we=jt=>{if(jt.key==="Escape"&&q(),jt.ctrlKey&&jt.key==="p"&&(jt.preventDefault(),window.print()),jt.key==="Enter"&&f&&!f.passed){const Mt=document.getElementById("retake-test-button");Mt&&Mt.click()}},_e=()=>{window.print()},Ee=()=>{if(f){const jt=`Test: ${f.testInfo?.test_name||"Test"}
Score: ${f.score}/${f.totalQuestions} (${f.percentage}%)
Status: ${f.passed?"PASSED":"FAILED"}
Completed: ${new Date(f.timestamp).toLocaleString()}`;navigator.clipboard.writeText(jt).then(()=>{console.log("Results copied to clipboard")}).catch(Mt=>{console.error("Failed to copy results:",Mt)})}};document.addEventListener("keydown",we);const Fe=document.getElementById("print-results");Fe&&Fe.addEventListener("click",_e);const at=document.getElementById("copy-results");return at&&at.addEventListener("click",Ee),()=>{document.removeEventListener("keydown",we),Fe&&Fe.removeEventListener("click",_e),at&&at.removeEventListener("click",Ee)}}catch(we){console.error("Error setting up test results page event listeners:",we)}},[q,f]),je=async(we,_e,Ee)=>{try{v(!0),S(null),console.log("Viewing test details:",{testType:we,testId:_e,testName:Ee}),T({isOpen:!0,testType:we,testId:_e,testName:Ee,questions:[],isLoading:!0});const Fe=await Cn.getTestQuestions(we,_e);Fe&&Fe.length>0?(T({isOpen:!0,testType:we,testId:_e,testName:Ee,questions:Fe,isLoading:!1}),console.log(`Test details loaded: ${Fe.length} questions`)):(S("Could not load test questions. Please try again."),T({isOpen:!0,testType:we,testId:_e,testName:Ee,questions:[],isLoading:!1,error:"No questions available for this test"}))}catch(Fe){console.error("Error loading test details:",Fe),S("Error loading test details. Please try again."),T({isOpen:!0,testType:we,testId:_e,testName:Ee,questions:[],isLoading:!1,error:Fe.message||"Failed to load test details"})}finally{v(!1)}},Qe=(we,_e,Ee,Fe)=>{try{console.log("Showing test details modal:",{testType:we,testId:_e,testName:Ee,questions:Fe}),T({isOpen:!0,testType:we,testId:_e,testName:Ee,questions:Fe||[],isLoading:!1,error:null})}catch(at){console.error("Error showing test details modal:",at),S("Failed to show test details modal")}},vt=()=>{try{console.log("Closing test details modal"),T({isOpen:!1,testType:null,testId:null,testName:null,questions:[],isLoading:!1,error:null})}catch(we){console.error("Error closing test details modal:",we)}},Ot=(we,_e)=>{try{switch(_e){case"multiple_choice":return l.jsxs("div",{className:"answer-options",children:[l.jsx("p",{children:l.jsx("strong",{children:"Options:"})}),l.jsxs("p",{children:["A) ",we.option_a||"No text"]}),l.jsxs("p",{children:["B) ",we.option_b||"No text"]}),we.option_c&&l.jsxs("p",{children:["C) ",we.option_c]}),we.option_d&&l.jsxs("p",{children:["D) ",we.option_d]}),we.option_e&&l.jsxs("p",{children:["E) ",we.option_e]}),we.option_f&&l.jsxs("p",{children:["F) ",we.option_f]}),l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",we.correct_answer||"Not specified"]})})]});case"true_false":return l.jsx("div",{className:"answer-options",children:l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",we.correct_answer?"True":"False"]})})});case"input":return l.jsx("div",{className:"answer-options",children:l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",we.correct_answer||"Not specified"]})})});case"matching_type":return l.jsx("div",{className:"answer-options",children:l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",we.correct_answer?JSON.stringify(we.correct_answer):"Not specified"]})})});case"word_matching":return l.jsx("div",{className:"answer-options",children:l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",we.correct_answer?JSON.stringify(we.correct_answer):"Not specified"]})})});default:return l.jsx("p",{children:"Unknown question type"})}}catch(Ee){return console.error("Error formatting question answer display:",Ee),l.jsx("p",{children:"Error displaying question"})}},$t=(we,_e)=>{try{console.log("Navigating to test:",{testType:we,testId:_e}),r({testType:we,testId:_e}),d(!0),V(we,_e)}catch(Ee){console.error("Error navigating to test:",Ee),S("Failed to navigate to test")}},Gt=()=>{try{console.log("Hiding test sections"),r(null),s([]),i({}),c({}),d(!1),h(null),S(null)}catch(we){console.error("Error hiding test sections:",we)}},ir=(we,_e,Ee,Fe)=>{try{console.log("Displaying test on page:",{testInfo:we,questions:_e,testType:Ee,testId:Fe}),r({...we,testType:Ee,testId:Fe}),s(_e),d(!0),Z(Ee,Fe),Ut(Ee,Fe),Xe(Ee,Fe)}catch(at){console.error("Error displaying test on page:",at),S("Failed to display test on page")}},dt=(we,_e,Ee)=>{try{return console.log("Rendering questions for page:",{questions:we,testType:_e,testId:Ee}),!we||!Array.isArray(we)?(console.warn("Invalid questions array for rendering"),[]):we.map((Fe,at)=>{const jt=Mt=>{const Be={...a,[Fe.question_id]:Mt};i(Be),Y(_e,Ee,Fe.question_id,Mt)};return{question:Fe,index:at,testType:_e,testId:Ee,studentAnswer:a[Fe.question_id]||"",onAnswerChange:jt}})}catch(Fe){return console.error("Error rendering questions for page:",Fe),[]}},gt=_.useCallback((we,_e)=>{try{if(!we||!_e){console.warn("Cannot save progress: missing testType or testId");return}const Ee=`test_progress_${we}_${_e}`,Fe={answers:a,progress:o,lastSaved:Date.now(),testType:we,testId:_e};R(Ee,Fe),console.log(`Progress saved for test ${we}_${_e}:`,Fe)}catch(Ee){console.error("Error saving progress for page:",Ee)}},[a,o,R]),kt=_.useCallback(we=>{try{return!a||Object.keys(a).length===0?0:Object.values(a).filter(Ee=>Ee==null?!1:typeof Ee=="string"?Ee.trim()!=="":typeof Ee=="object"?Object.keys(Ee).length>0:!0).length}catch(_e){return console.error("Error getting answered questions count for page:",_e),0}},[a]),Ge=_.useCallback((we,_e)=>{try{console.log("Updating progress display for page:",{testType:we,testId:_e});const Ee=kt(we),Fe=n.length,at=Fe>0?Math.round(Ee/Fe*100):0,jt=Ee===Fe&&Fe>0;c(ct=>({...ct,answeredCount:Ee,totalQuestions:Fe,percentage:at,canSubmit:jt,remainingQuestions:Fe-Ee,lastUpdated:Date.now()}));const Mt=document.getElementById("progress-bar"),Be=document.getElementById("progress-text"),lt=document.getElementById("submit-test-button");return Mt&&(Mt.style.width=`${at}%`,Mt.className=Mt.className.replace(/bg-\w+-\d+/,""),at>=100?Mt.classList.add("bg-green-500"):at>=80?Mt.classList.add("bg-blue-500"):at>=60?Mt.classList.add("bg-yellow-500"):at>=40?Mt.classList.add("bg-orange-500"):Mt.classList.add("bg-red-500")),Be&&(Be.textContent=`${Ee}/${Fe} questions answered (${at}%)`),lt&&(lt.disabled=!jt,jt?(lt.textContent=" Submit Test",lt.classList.remove("bg-gray-400"),lt.classList.add("bg-green-600","hover:bg-green-700")):(lt.textContent=` Complete ${Fe-Ee} more question${Fe-Ee!==1?"s":""}`,lt.classList.remove("bg-green-600","hover:bg-green-700"),lt.classList.add("bg-gray-400"))),{answeredCount:Ee,totalQuestions:Fe,percentage:at,canSubmit:jt}}catch(Ee){return console.error("Error updating progress display for page:",Ee),{answeredCount:0,totalQuestions:0,percentage:0,canSubmit:!1}}},[n.length,kt]),Xe=_.useCallback((we,_e)=>{try{console.log("Setting up test page event listeners:",{testType:we,testId:_e});const Ee=setInterval(()=>{Object.keys(a).length>0&&(gt(we,_e),console.log("Auto-saved progress for test:",we,_e))},3e4),Fe=setInterval(()=>{Ge(we,_e)},2e3),at=ct=>{ct.key==="Escape"&&window.confirm("Are you sure you want to exit the test? Your progress will be saved.")&&q(),ct.ctrlKey&&ct.key==="s"&&(ct.preventDefault(),gt(we,_e),console.log("Manual save triggered")),ct.key},jt=ct=>{Object.keys(a).length>0&&(ct.preventDefault(),ct.returnValue="Your test progress will be saved. Are you sure you want to leave?")},Mt=()=>{document.hidden&&(console.log("Tab became hidden - saving progress"),gt(we,_e))},Be=()=>{console.log("Window focused - updating progress"),Ge(we,_e)},lt=()=>{console.log("Window blurred - saving progress"),gt(we,_e)};return document.addEventListener("keydown",at),window.addEventListener("beforeunload",jt),document.addEventListener("visibilitychange",Mt),window.addEventListener("focus",Be),window.addEventListener("blur",lt),window.testIntervals||(window.testIntervals={}),window.testIntervals[`autosave_${we}_${_e}`]=Ee,window.testIntervals[`progress_${we}_${_e}`]=Fe,()=>{clearInterval(Ee),clearInterval(Fe),document.removeEventListener("keydown",at),window.removeEventListener("beforeunload",jt),document.removeEventListener("visibilitychange",Mt),window.removeEventListener("focus",Be),window.removeEventListener("blur",lt),window.testIntervals&&(delete window.testIntervals[`autosave_${we}_${_e}`],delete window.testIntervals[`progress_${we}_${_e}`])}}catch(Ee){console.error("Error setting up test page event listeners:",Ee)}},[a,gt,Ge,q]),Et=_.useCallback(()=>{try{const we=kt(t?.testType),_e=n.length,Ee=we===_e&&_e>0,Fe=document.getElementById("submit-test-button");return Fe&&(Fe.disabled=!Ee,Fe.textContent=Ee?"Submit Test":`Complete ${_e-we} more questions`),{canSubmit:Ee,answeredCount:we,totalQuestions:_e}}catch(we){return console.error("Error updating submit button state for page:",we),{canSubmit:!1,answeredCount:0,totalQuestions:0}}},[t,n.length,kt]),Ut=_.useCallback((we,_e)=>{try{console.log("Setting up progress tracking for page:",{testType:we,testId:_e});const Ee=setInterval(()=>{Ge(we,_e),Et()},1e3),Fe=setInterval(()=>{Object.keys(a).length>0&&gt(we,_e)},3e4);return window.testIntervals||(window.testIntervals={}),window.testIntervals[`progress_${we}_${_e}`]=Ee,window.testIntervals[`autosave_${we}_${_e}`]=Fe,()=>{clearInterval(Ee),clearInterval(Fe),window.testIntervals&&(delete window.testIntervals[`progress_${we}_${_e}`],delete window.testIntervals[`autosave_${we}_${_e}`])}}catch(Ee){console.error("Error setting up progress tracking for page:",Ee)}},[a,Ge,Et,gt]),Wt=_.useCallback(async(we,_e)=>{const Ee=document.getElementById("submit-test-button");try{const Fe=kt(we),at=n.length;if(Fe<at){S(`Please answer all ${at} questions before submitting.`);return}if(!window.confirm("Are you sure you want to submit your test? This action cannot be undone."))return;Ee&&(Ee.disabled=!0,Ee.innerHTML=`
          <div class="flex items-center justify-center space-x-2">
            <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>
            <span>Submitting...</span>
          </div>
        `),await z(we,_e)&&(ue(we,_e),X(we,_e,a),console.log("Test submitted successfully!"))}catch(Fe){console.error("Error submitting test from page:",Fe),S("Failed to submit test. Please try again."),Ee&&(Ee.disabled=!1,Ee.textContent="Submit Test")}},[kt,n.length,z,ue,X,a]),pr=_.useCallback(()=>{try{if(!t)return null;const we=["true_false","multiple_choice","input","matching_type","word_matching"];return we.includes(t.testType)?t.testType:we.includes(t.test_type)?t.test_type:null}catch(we){return console.error("Error getting current test type:",we),null}},[t]),wr=_.useCallback((we,_e)=>{try{console.log("Clearing progress tracking interval:",{testType:we,testId:_e});const Ee=`progress_interval_${we}_${_e}`,Fe=`autosave_interval_${we}_${_e}`;window.testIntervals&&(window.testIntervals[Ee]&&(clearInterval(window.testIntervals[Ee]),delete window.testIntervals[Ee]),window.testIntervals[Fe]&&(clearInterval(window.testIntervals[Fe]),delete window.testIntervals[Fe])),console.log(`Cleared progress tracking intervals for test ${we}_${_e}`)}catch(Ee){console.error("Error clearing progress tracking interval:",Ee)}},[]),Er={currentTest:t,testQuestions:n,studentAnswers:a,testProgress:o,isTestActive:u,testResults:f,activeTests:g,isLoading:y,error:C,testDetailsModal:w,testStartTime:N,timeElapsed:P,loadTestForPage:V,submitTest:z,navigateToTestResults:X,navigateBackToCabinet:I,clearTestDataAndReturnToCabinet:q,saveTestProgress:Y,getTestProgress:re,clearTestProgress:ue,loadSavedProgressForPage:Z,isTestCompleted:B,markTestCompleted:W,markTestCompletedInUI:(we,_e)=>{console.log("Marking test completed in UI:",{testType:we,testId:_e}),W(we,_e)},getAnsweredQuestionsCount:D,updateSubmitButtonState:U,updateSubmitButtonStateForPage:Et,loadStudentActiveTests:ce,loadActiveTests:ce,loadTeacherActiveTests:me,getTestInfo:De,getTestQuestions:He,createTest:xe,deleteTest:se,showTestResults:rt,loadTestResults:Ke,loadTestResultsForPage:_t,displayTestResultsOnPage:tt,setupTestResultsPageEventListeners:Pe,clearTestResultsCache:H,viewTestDetails:je,showTestDetailsModal:Qe,closeTestDetailsModal:vt,getQuestionAnswerDisplay:Ot,navigateToTest:$t,hideTestSections:Gt,displayTestOnPage:ir,renderQuestionsForPage:dt,setupTestPageEventListeners:Xe,setupProgressTrackingForPage:Ut,updateProgressDisplayForPage:Ge,submitTestFromPage:Wt,getAnsweredQuestionsCountForPage:kt,getCurrentTestType:pr,saveProgressForPage:gt,clearProgressTrackingInterval:wr,collectTestAnswers:te,calculateTestScore:$f,checkAnswerCorrectness:Xp,formatStudentAnswerForDisplay:Q,getCorrectAnswer:Fv,transformAnswersForSubmission:ae,clearAllTestData:()=>{try{console.log("Clearing old test data from localStorage (older than 15 days)...");const _e=Date.now()-360*60*60*1e3,Ee=[];for(let Fe=0;Fe<localStorage.length;Fe++){const at=localStorage.key(Fe);if(!(!at||!((at.startsWith("test_")||at.startsWith("student_")||at.startsWith("teacher_")||at.startsWith("admin_")||at.includes("progress")||at.includes("answers"))&&!at.includes("test_completed_"))))try{const Mt=localStorage.getItem(at);if(!Mt){Ee.push(at);continue}let Be=null;if(Mt.startsWith("{")||Mt.startsWith("[")){const lt=JSON.parse(Mt),ct=lt.timestamp||lt.lastSaved||lt.lastTickAt||lt.createdAt||lt.updatedAt||lt.startedAt||lt.started_at||lt.created_at;ct&&(Be=new Date(ct).getTime())}if(!Be){const lt=`${at}__ts`,ct=localStorage.getItem(lt);ct&&(Be=parseInt(ct)||null)}if(!Be)continue;Be<_e&&Ee.push(at)}catch{continue}}return Ee.forEach(Fe=>{console.log(`Removing old localStorage key: ${Fe}`),L(Fe)}),console.log(`Cleared ${Ee.length} old test-related items from localStorage`),{success:!0,clearedCount:Ee.length}}catch(we){return console.error("Error clearing old test data:",we),{success:!1,error:we.message}}},setCurrentTest:r,setTestQuestions:s,setStudentAnswers:i,setTestProgress:c,setIsTestActive:d,setTestResults:h,setError:S};return l.jsx(mH.Provider,{value:Er,children:e})},C2=()=>{const e=_.useContext(mH);if(!e)throw new Error("useTest must be used within a TestProvider");return e},l0e=()=>{const[e,t]=_.useState("en"),n={en:{title:"Privacy Policy",subtitle:"App: MWS Student App",website:"Website: mathayomwatsing.netlify.app",lastUpdated:"Last updated:",introduction:{title:"Introduction",text1:"The MWS Student App is an independent educational project created by Aleksandr Petrov to provide learning tools for students. This app is not officially affiliated with or endorsed by Mathayomwatsing School.",text2:"This Privacy Policy explains how we collect, use, store, and protect personal information. By using this app, you agree to this policy.",dataController:"Independent Developer:",dataControllerText:"Aleksandr Petrov is responsible for managing and protecting personal data collected through the MWS Student App and Website: mathayomwatsing.netlify.app",pdpaTitle:"PDPA Compliance",pdpaText:"This app complies with Thailand's Personal Data Protection Act, B.E. 2562 (PDPA). We are committed to protecting your personal data in accordance with PDPA requirements, including lawful collection, purpose limitation, data minimization, accuracy, security, and your rights as a data subject."},consent:{title:"User Consent",text1:"Users (or their parents/legal guardians if under 18) consent to data collection and usage as described in this policy.",text2:"If you do not agree, please do not use the app. Continued use after updates to this policy constitutes acceptance."},appPurpose:{title:"App Purpose",text:"The MWS Student App (Independent Project) enables students to:",items:["Take online tests and assessments","View test results and academic progress","Track learning achievements and performance","Access educational content and resources"]},childrenPrivacy:{title:"Children's Privacy",text1:"The MWS Student App is designed for students. We do not knowingly collect more data than necessary to provide educational functionality.",text2:"Parents or guardians may contact the app developer to review, delete, or request updates to a student's information. We comply with COPPA (Children's Online Privacy Protection Act), Thailand's PDPA (Personal Data Protection Act, B.E. 2562), and equivalent child-data protection laws applicable in your jurisdiction."},dataCollection:{title:"Data Collection",text:"We collect only the data necessary to provide educational functionality:",accountInfo:{title:"Account Information",text:"Student name, ID, grade, and class (for authentication and personalization)."},testData:{title:"Test Data",text:"Answers, scores, progress, and completion status."},usageData:{title:"Usage Data",text:"App interactions, feature usage, and error logs (to improve functionality and stability)."},important:"Important:",importantText:"This app does not use or share personal data for advertising or commercial purposes. All data collection is strictly for educational and assessment use. We comply with COPPA (Children's Online Privacy Protection Act), Thailand's PDPA (Personal Data Protection Act, B.E. 2562), and equivalent child-data protection laws. This app does not display advertisements or use tracking SDKs."},dataUsage:{title:"How We Use Your Data",text:"Your data is used exclusively for educational purposes:",items:["Deliver and maintain educational services","Track learning progress and achievements","Provide feedback on academic performance","Improve app functionality and user experience","Provide technical support"]},dataStorage:{title:"Data Storage & Security",text1:"Data is stored securely, locally on devices, or on encrypted cloud servers (Supabase). All transmissions are encrypted.",text2:"Technical and organizational measures are applied to prevent unauthorized access, alteration, disclosure, or destruction."},dataHosting:{title:"Data Hosting",text1:"The app's data is securely stored using trusted cloud infrastructure (Supabase). These services comply with global security standards including GDPR and ISO 27001.",text2:"All data hosting providers are contractually obligated to maintain the same level of data protection and security as outlined in this Privacy Policy. Data is stored in secure, encrypted databases with regular backups and monitoring."},dataSharing:{title:"Data Sharing and Disclosure",text:"We do not sell, rent, or trade user data. Data may be shared only:",schoolAdmin:{title:"Parents/Guardians:",text:"With parents/guardians for their childs data review."},legal:{title:"Legal Requirements:",text:"For legal obligations, if required by law or in response to valid legal requests."},serviceProviders:{title:"Service Providers:",text:"With trusted service providers (bound by contracts to protect data and use it only for specified purposes)."}},academicIntegrity:{title:"Academic Integrity",text:"The app includes anti-cheating measures to ensure fair assessment. This includes monitoring app state changes, preventing unauthorized actions during tests, and detecting suspicious behavior. By using this app, you agree to maintain academic honesty and integrity."},userRights:{title:"Your Rights",text:"Users have the right to:",items:["Access, correct, or delete personal data","Object to processing of personal data","Request data portability"],contact:"To exercise these rights, please contact app developer at aleksandr.p@mws.ac.th",pdpaTitle:"Under Thailand's PDPA, you have the right to:",pdpaItems:["Access and obtain a copy of your personal data","Request correction of any incomplete or inaccurate information","Request deletion or suspension of use of your personal data","Withdraw consent at any time (where applicable)","Lodge a complaint with the Personal Data Protection Committee (PDPC) if you believe your data has been mishandled"]},dataRetention:{title:"Data Retention",text:"We retain personal data only as long as necessary to provide educational services and comply with legal obligations. Academic records may be retained according to educational data retention requirements."},changes:{title:"Changes to This Privacy Policy",text:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last updated" date. You are advised to review this Privacy Policy periodically for any changes.'},contact:{title:"Contact",text:"For privacy inquiries, contact:",school:"Aleksandr Petrov",email:"aleksandr.p@mws.ac.th"},backToLogin:" Back to Login"},th:{title:"",subtitle:": MWS Student App",website:": mathayomwatsing.netlify.app",lastUpdated:":",introduction:{title:"",text1:"MWS Student App  Aleksandr Petrov  ",text2:"    ",dataController:":",dataControllerText:"Aleksandr Petrov  MWS Student App : mathayomwatsing.netlify.app",pdpaTitle:" PDPA",pdpaText:" .. 2562 (PDPA)  PDPA      "},consent:{title:"",text1:" (/ 18 ) ",text2:"  "},appPurpose:{title:"",text:"MWS Student App () :",items:["","","",""]},childrenPrivacy:{title:"",text1:" ",text2:"    COPPA ()  .. 2562 (PDPA) "},dataCollection:{title:"",text:":",accountInfo:{title:"",text:"    ()"},testData:{title:"",text:"   "},usageData:{title:"",text:"   ()"},important:":",importantText:"   COPPA ()  .. 2562 (PDPA)   SDK "},dataUsage:{title:"",text:":",items:["","","","",""]},dataStorage:{title:"",text1:"  (Supabase) ",text2:"   "},dataHosting:{title:"",text1:" (Supabase)  GDPR  ISO 27001",text2:" "},dataSharing:{title:"",text:"   :",schoolAdmin:{title:"/:",text:"/"},legal:{title:":",text:" "},serviceProviders:{title:":",text:" ()"}},academicIntegrity:{title:"",text:"     "},userRights:{title:"",text:":",items:["  ","",""],contact:"  aleksandr.p@mws.ac.th",pdpaTitle:" .. 2562 (PDPA)  :",pdpaItems:["","",""," ()"," (PDPC) "]},dataRetention:{title:"",text:" "},changes:{title:"",text:'   "" '},contact:{title:"",text:" :",school:"Aleksandr Petrov",email:"aleksandr.p@mws.ac.th"},backToLogin:" "}}[e],s=new Date().toLocaleDateString(e==="th"?"th-TH":"en-US",{year:"numeric",month:"long",day:"numeric"});return l.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 mb-8",children:l.jsx("div",{className:"px-6 py-6 border-b border-gray-200",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:n.title}),l.jsx("p",{className:"text-sm text-gray-600",children:n.subtitle}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n.website}),l.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[n.lastUpdated," ",s]})]}),l.jsxs("div",{className:"flex gap-2 ml-4",children:[l.jsx("button",{onClick:()=>t("en"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="en"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"English"}),l.jsx("button",{onClick:()=>t("th"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="th"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""})]})]})})}),l.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 p-6 sm:p-8 space-y-8",children:[l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.introduction.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.introduction.text1}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mt-4",children:n.introduction.text2}),l.jsx("div",{className:"mt-4 bg-gray-50 border border-gray-200 rounded-lg p-4",children:l.jsxs("p",{className:"text-sm leading-6 text-gray-700",children:[l.jsx("span",{className:"font-semibold",children:n.introduction.dataController})," ",n.introduction.dataControllerText]})}),l.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:l.jsxs("p",{className:"text-sm leading-6 text-blue-800",children:[l.jsxs("span",{className:"font-semibold",children:[n.introduction.pdpaTitle,":"]})," ",n.introduction.pdpaText]})})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.consent.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.consent.text1}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mt-4",children:n.consent.text2})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.appPurpose.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.appPurpose.text}),l.jsx("ul",{className:"list-disc list-inside mt-3 space-y-2 text-base leading-7 text-gray-700 ml-4",children:n.appPurpose.items.map((a,i)=>l.jsx("li",{children:a},i))})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.childrenPrivacy.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.childrenPrivacy.text1}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mt-4",children:n.childrenPrivacy.text2})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.dataCollection.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mb-4",children:n.dataCollection.text}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:n.dataCollection.accountInfo.title}),l.jsx("p",{className:"text-sm text-gray-700",children:n.dataCollection.accountInfo.text})]}),l.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:n.dataCollection.testData.title}),l.jsx("p",{className:"text-sm text-gray-700",children:n.dataCollection.testData.text})]}),l.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:n.dataCollection.usageData.title}),l.jsx("p",{className:"text-sm text-gray-700",children:n.dataCollection.usageData.text})]})]}),l.jsx("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:l.jsxs("p",{className:"text-sm leading-6 text-yellow-800",children:[l.jsx("span",{className:"font-semibold",children:n.dataCollection.important})," ",n.dataCollection.importantText]})})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.dataUsage.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mb-4",children:n.dataUsage.text}),l.jsx("ul",{className:"list-disc list-inside space-y-2 text-base leading-7 text-gray-700 ml-4",children:n.dataUsage.items.map((a,i)=>l.jsx("li",{children:a},i))})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.dataStorage.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.dataStorage.text1}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mt-4",children:n.dataStorage.text2})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.dataHosting.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.dataHosting.text1}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mt-4",children:n.dataHosting.text2})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.dataSharing.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.dataSharing.text}),l.jsxs("ul",{className:"list-disc list-inside space-y-2 text-base leading-7 text-gray-700 ml-4 mt-4",children:[l.jsxs("li",{children:[l.jsx("strong",{children:n.dataSharing.schoolAdmin.title})," ",n.dataSharing.schoolAdmin.text]}),l.jsxs("li",{children:[l.jsx("strong",{children:n.dataSharing.legal.title})," ",n.dataSharing.legal.text]}),l.jsxs("li",{children:[l.jsx("strong",{children:n.dataSharing.serviceProviders.title})," ",n.dataSharing.serviceProviders.text]})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.academicIntegrity.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.academicIntegrity.text})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.userRights.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mb-4",children:n.userRights.text}),l.jsx("ul",{className:"list-disc list-inside space-y-2 text-base leading-7 text-gray-700 ml-4",children:n.userRights.items.map((a,i)=>l.jsx("li",{children:a},i))}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mt-4",children:e==="en"?l.jsxs(l.Fragment,{children:["To exercise these rights, please contact app developer at"," ",l.jsx("a",{href:"mailto:aleksandr.p@mws.ac.th",className:"text-blue-600 hover:text-blue-800 underline font-medium",children:"aleksandr.p@mws.ac.th"})]}):l.jsxs(l.Fragment,{children:[" "," ",l.jsx("a",{href:"mailto:aleksandr.p@mws.ac.th",className:"text-blue-600 hover:text-blue-800 underline font-medium",children:"aleksandr.p@mws.ac.th"})]})}),l.jsxs("div",{className:"mt-6 bg-blue-50 border-l-4 border-blue-400 rounded-lg p-5",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:n.userRights.pdpaTitle}),l.jsx("ul",{className:"list-disc list-inside space-y-2 text-sm leading-6 text-gray-700 ml-2",children:n.userRights.pdpaItems.map((a,i)=>l.jsx("li",{children:a},i))})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.dataRetention.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.dataRetention.text})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.changes.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.changes.text})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.contact.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.contact.text}),l.jsxs("div",{className:"mt-4 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[l.jsx("p",{className:"text-base text-gray-700",children:l.jsx("strong",{children:n.contact.school})}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:l.jsx("a",{href:`mailto:${n.contact.email}`,className:"text-blue-600 hover:text-blue-800 underline font-medium",children:n.contact.email})})]})]}),l.jsx("div",{className:"pt-6 border-t border-gray-200 mt-8",children:l.jsx(pB,{to:"/login",className:"inline-flex items-center text-blue-600 hover:text-blue-800 font-medium",children:n.backToLogin})})]})]})})},c0e=({children:e,className:t="",asBackground:r=!1})=>{const{theme:n,isCyberpunk:s}=Da(),a=s?"bg-gradient-to-br from-black via-gray-900 to-purple-900":"bg-white",i=s?Oa("cyberpunk").background:{},o=r?`${a} min-h-screen ${t}`:t;return l.jsx("div",{className:o,style:i,children:e})},By=window.location.hostname==="mathayomwatsing.netlify.app";By&&(console.log=()=>{},console.debug=()=>{},console.info=()=>{},console.warn=()=>{});const ke={debug:(e,...t)=>{By||console.log(e,...t)},warn:(e,...t)=>{By||console.warn(e,...t)},error:(e,...t)=>{console.error(e,...t)},info:(e,...t)=>{By||console.info(e,...t)},isEnabled:()=>!By},u0e=({visible:e,onClose:t})=>{const{theme:r,setTheme:n,isCyberpunk:s,isLight:a,themeClasses:i}=Da(),o=Oa(r),c=u=>{u!==r&&n(u)};return e?l.jsx(Uo,{children:e&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[l.jsx(ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black bg-opacity-50"}),l.jsxs(ht.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:`relative w-full max-w-md mx-4 rounded-lg shadow-xl ${s?Bt(0).className:"bg-white border border-gray-200"}`,style:s?{...Bt(0).style,...o.glow}:{},children:[l.jsx("div",{className:`px-6 py-4 border-b ${s?"border-cyan-400":"border-gray-200"}`,style:s?{borderColor:he.cyan,borderBottomWidth:"2px"}:{},children:l.jsx("h2",{className:`text-2xl font-bold ${s?`${i.headerText} tracking-wider`:"text-gray-900"}`,style:s?o.textShadow:{},children:s?"SETTINGS":"Settings"})}),l.jsx("div",{className:"px-6 py-6",children:l.jsxs("div",{children:[l.jsx("h3",{className:`text-lg font-semibold mb-4 ${s?i.text:"text-gray-900"}`,children:s?"THEME":"Theme"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("button",{onClick:()=>c("light"),className:`w-full p-4 rounded-lg border-2 transition-all ${a?s?"border-cyan-400":"bg-blue-50 border-blue-500":s?"border-gray-700 hover:border-cyan-400":"bg-white border-gray-300 hover:border-gray-400"}`,style:a&&s?{backgroundColor:he.black,borderColor:he.cyan,borderWidth:"2px"}:s?{backgroundColor:he.black,borderColor:he.cyan,borderWidth:"2px"}:{},children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:`w-5 h-5 rounded-full border-2 ${a?s?"bg-cyan-400 border-cyan-400":"bg-blue-500 border-blue-500":s?"border-gray-600":"border-gray-400"}`,children:a&&l.jsx("div",{className:`w-full h-full rounded-full ${s?"bg-cyan-400":"bg-blue-500"}`})}),l.jsx("span",{className:`font-medium ${a?s?"text-cyan-400":"text-blue-600":s?"text-gray-400":"text-gray-600"}`,children:s?"LIGHT THEME":"Light Theme"})]}),a&&l.jsx("span",{className:`text-sm ${s?"text-cyan-400":"text-blue-600"}`,children:s?"ACTIVE":"Active"})]})}),l.jsx("button",{onClick:()=>c("cyberpunk"),className:`w-full p-4 rounded-lg border-2 transition-all ${s?"border-cyan-400":a?"bg-gray-50 border-gray-300 hover:border-gray-400":"bg-white border-gray-300 hover:border-gray-400"}`,style:s?{backgroundColor:he.black,borderColor:he.cyan,borderWidth:"2px",...o.glow}:{},children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:`w-5 h-5 rounded-full border-2 ${s?"bg-cyan-400 border-cyan-400":"border-gray-400"}`,children:s&&l.jsx("div",{className:"w-full h-full rounded-full bg-cyan-400"})}),l.jsx("span",{className:`font-medium ${s?"text-cyan-400":"text-gray-600"}`,style:s?o.textShadow:{},children:s?"CYBERPUNK THEME":"Cyberpunk Theme"})]}),s&&l.jsx("span",{className:"text-sm text-cyan-400",children:"ACTIVE"})]})})]})]})}),l.jsx("div",{className:`px-6 py-4 border-t ${s?"border-cyan-400":"border-gray-200"}`,style:s?{borderColor:he.cyan,borderTopWidth:"2px"}:{},children:l.jsx("button",{onClick:t,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors ${s?"bg-cyan-400 text-black hover:bg-cyan-300":"bg-blue-500 text-white hover:bg-blue-600"}`,children:s?"CLOSE":"Close"})})]})]})}):null},T2=({testResults:e,onBackToCabinet:t,onRetakeTest:r,isLoading:n=!1,caught_cheating:s=!1,visibility_change_times:a=0,themeClasses:i,isCyberpunk:o})=>{const[c,u]=_.useState(!1),{theme:d}=Da(),f=Oa(d),h=o!==void 0?o:d==="cyberpunk",g=()=>{u(!0),t&&t()};if(!e||!e.showResults)return l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-gray-500",children:"No test results to display"})})});const{testInfo:p,testType:y,score:v,totalQuestions:C,percentage:S,passed:w,questionAnalysis:T,timestamp:N}=e,A=F=>({multiple_choice:"Multiple Choice",true_false:"True/False",input:"Input",matching_type:"Matching"})[F]||F,P=F=>F>=80?"text-green-600 bg-green-50":F>=60?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",j=F=>F?"text-green-600 bg-green-100 border-green-200":"text-red-600 bg-red-100 border-red-200";return n?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading test results..."})]})}):l.jsxs("div",{className:`${h?"bg-black":"bg-gray-50"} py-8 overflow-y-auto`,style:h?f.background:{},children:[l.jsx(Aa,{isOpen:c,onClose:()=>{},title:"Navigating",size:"small",children:l.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[l.jsx(un,{size:"lg",className:"mb-3"}),l.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Returning to cabinet..."}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait"})]})}),l.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs(ht.div,{className:`rounded-lg shadow-lg p-6 mb-6 border-2 ${h?Bt(0).className:"bg-white"}`,style:h?{...Bt(0).style,...f.glowRed}:{},initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(e?.caught_cheating||s)&&l.jsx("div",{className:`mb-6 border-2 rounded-lg ${h?"border":"border-red-500 bg-red-50"}`,style:h?{backgroundColor:he.black,borderColor:he.red,...f.glowRed}:{},children:l.jsxs("div",{className:"flex items-start space-x-3 p-4",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:`h-6 w-6 ${h?"":"text-red-600"}`,style:h?{color:he.red}:{},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),l.jsx("div",{className:"flex-1",children:l.jsx("p",{className:h?"":"text-red-700",style:h?{...f.textRed,fontFamily:"monospace"}:{},children:"Suspicious activity was detected during this test. Your teacher has been notified."})})]})}),l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:`text-3xl font-bold mb-2 ${h?"":"text-gray-900"}`,style:h?{...f.textCyan,fontFamily:"monospace"}:{},children:h?"TEST RESULTS":"Test Results"}),l.jsx("h2",{className:`text-xl mb-1 ${h?"":"text-gray-700"}`,style:h?{...f.textYellow,fontFamily:"monospace"}:{},children:p?.test_name||"Test"}),l.jsxs("p",{className:`text-sm ${h?"":"text-gray-500"}`,style:h?{color:he.cyan,fontFamily:"monospace"}:{},children:[A(y),"  Completed on ",new Date(N).toLocaleDateString()]})]}),l.jsx("div",{className:"text-right",children:l.jsx("div",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium border ${h?"border":j(w)}`,style:h?{backgroundColor:he.black,borderColor:w?he.green:he.red,color:w?he.green:he.red,fontFamily:"monospace",...w?f.textShadowGreen:f.textShadowRed}:{},children:w?" PASSED":" FAILED"})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:`text-center p-4 rounded-lg border ${h?Bt(1).className:"bg-gray-50"}`,style:h?{...Bt(1).style,...f.glow}:{},children:[l.jsx("div",{className:`text-3xl font-bold ${h?"":"text-gray-900"}`,style:h?{...f.textCyan,fontFamily:"monospace"}:{},children:v}),l.jsx("div",{className:`text-sm ${h?"":"text-gray-600"}`,style:h?{color:he.yellow,fontFamily:"monospace"}:{},children:"Correct Answers"})]}),l.jsxs("div",{className:`text-center p-4 rounded-lg border ${h?Bt(2).className:"bg-gray-50"}`,style:h?{...Bt(2).style,...f.glow}:{},children:[l.jsx("div",{className:`text-3xl font-bold ${h?"":"text-gray-900"}`,style:h?{...f.textCyan,fontFamily:"monospace"}:{},children:C}),l.jsx("div",{className:`text-sm ${h?"":"text-gray-600"}`,style:h?{color:he.yellow,fontFamily:"monospace"}:{},children:"Total Questions"})]}),l.jsxs("div",{className:`text-center p-4 rounded-lg border ${h?Bt(3).className:"bg-gray-50"}`,style:h?{...Bt(3).style,...f.glow}:{},children:[l.jsxs("div",{className:`text-3xl font-bold ${h?"":P(S).split(" ")[0]}`,style:h?{...f.textCyan,fontFamily:"monospace"}:{},children:[S,"%"]}),l.jsx("div",{className:`text-sm ${h?"":"text-gray-600"}`,style:h?{color:he.yellow,fontFamily:"monospace"}:{},children:"Score"})]})]}),l.jsx("div",{className:`w-full rounded-full h-3 mb-6 border ${h?"bg-gray-800 border-cyan-400/50":"bg-gray-200"}`,style:h?f.glow:{},children:l.jsx(ht.div,{className:`h-3 rounded-full ${h?"":P(S).split(" ")[1]}`,style:h?{background:`linear-gradient(to right, ${he.yellow}, ${he.cyan})`,boxShadow:`0 0 10px ${he.cyan}`}:{},initial:{width:0},animate:{width:`${S}%`},transition:{duration:1,ease:"easeOut"}})})]}),y!=="matching_type"&&y!=="word_matching"&&l.jsxs(ht.div,{className:`rounded-lg shadow-lg p-6 border-2 ${h?Bt(1).className:"bg-white"}`,style:h?{...Bt(1).style,...f.glow}:{},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[l.jsx("h3",{className:`text-2xl font-bold mb-6 ${h?"":"text-gray-900"}`,style:h?{...f.textCyan,fontFamily:"monospace"}:{},children:h?"QUESTION REVIEW":"Question Review"}),l.jsx("div",{className:"space-y-4",children:T.map((F,R)=>l.jsxs(ht.div,{className:`p-4 rounded-lg border-2 ${h?"border":F.isCorrect?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,style:h?{backgroundColor:he.black,borderColor:F.isCorrect?he.green:he.red,boxShadow:F.isCorrect?f.glow.boxShadow:f.glowRed.boxShadow}:{},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:R*.1},children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("h4",{className:`text-lg font-semibold ${h?"":"text-gray-900"}`,style:h?{...f.textCyan,fontFamily:"monospace"}:{},children:["Question ",F.questionNumber]}),l.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium border ${h?"border":F.isCorrect?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,style:h?{backgroundColor:he.black,borderColor:F.isCorrect?he.green:he.red,color:F.isCorrect?he.green:he.red,fontFamily:"monospace",...F.isCorrect?f.textShadowGreen:f.textShadowRed}:{},children:F.isCorrect?" Correct":" Incorrect"})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:`font-medium mb-2 ${h?"":"text-gray-800"}`,style:h?{...f.textYellow,fontFamily:"monospace"}:{},children:"Question:"}),l.jsx("p",{className:`p-3 rounded border ${h?"border":"text-gray-700 bg-gray-100"}`,style:h?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",...f.textShadow}:{},children:F.question})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:`font-medium mb-2 ${h?"":"text-gray-800"}`,style:h?{...f.textYellow,fontFamily:"monospace"}:{},children:"Your Answer:"}),l.jsx("p",{className:`p-3 rounded border ${h?"border":F.isCorrect?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,style:h?{backgroundColor:he.black,borderColor:F.isCorrect?he.green:he.red,color:F.isCorrect?he.green:he.red,fontFamily:"monospace",...F.isCorrect?f.textShadowGreen:f.textShadowRed}:{},children:F.userAnswer||"No answer provided"})]}),l.jsxs("div",{children:[l.jsx("p",{className:`font-medium mb-2 ${h?"":"text-gray-800"}`,style:h?{...f.textYellow,fontFamily:"monospace"}:{},children:"Correct Answer:"}),l.jsx("p",{className:`p-3 rounded border ${h?"border":"bg-blue-100 text-blue-800"}`,style:h?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",...f.textShadow}:{},children:F.correctAnswer})]})]})]},R))})]}),l.jsxs(ht.div,{className:`rounded-lg shadow-lg p-6 mt-6 border-2 ${h?Bt(0).className:"bg-white"}`,style:h?{...Bt(0).style,...f.glow}:{},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[l.jsx("h3",{className:`text-2xl font-bold mb-4 ${h?"":"text-gray-900"}`,style:h?{color:he.cyan,fontFamily:"monospace",...f.textShadow}:{},children:h?"SUMMARY STATISTICS":"Summary Statistics"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:`text-center p-4 rounded-lg border-2 ${h?Bt(2).className:"bg-blue-50"}`,style:h?{...Bt(2).style,...f.glow}:{},children:[l.jsx("div",{className:`text-2xl font-bold ${h?"":"text-blue-600"}`,style:h?{color:he.cyan,fontFamily:"monospace",...f.textShadow}:{},children:T.filter(F=>F.isCorrect).length}),l.jsx("div",{className:`text-sm ${h?"":"text-blue-600"}`,style:h?{color:he.cyan,fontFamily:"monospace"}:{},children:h?"CORRECT":"Correct"})]}),l.jsxs("div",{className:`text-center p-4 rounded-lg border-2 ${h?Bt(0).className:"bg-red-50"}`,style:h?{...Bt(0).style,...f.glowRed}:{},children:[l.jsx("div",{className:`text-2xl font-bold ${h?"":"text-red-600"}`,style:h?{color:he.red,fontFamily:"monospace",...f.textShadowRed}:{},children:T.filter(F=>!F.isCorrect).length}),l.jsx("div",{className:`text-sm ${h?"":"text-red-600"}`,style:h?{color:he.red,fontFamily:"monospace"}:{},children:h?"INCORRECT":"Incorrect"})]}),l.jsxs("div",{className:`text-center p-4 rounded-lg border-2 ${h?Bt(1).className:"bg-gray-50"}`,style:h?{...Bt(1).style,...f.glow}:{},children:[l.jsxs("div",{className:`text-2xl font-bold ${h?"":"text-gray-600"}`,style:h?{color:he.cyan,fontFamily:"monospace",...f.textShadow}:{},children:[Math.round(T.filter(F=>F.isCorrect).length/C*100),"%"]}),l.jsx("div",{className:`text-sm ${h?"":"text-gray-600"}`,style:h?{color:he.cyan,fontFamily:"monospace"}:{},children:h?"ACCURACY":"Accuracy"})]}),l.jsxs("div",{className:`text-center p-4 rounded-lg border-2 ${h?Bt(2).className:"bg-purple-50"}`,style:h?{...Bt(2).style,...f.glow}:{},children:[l.jsx("div",{className:`text-2xl font-bold ${h?"":"text-purple-600"}`,style:h?{color:he.cyan,fontFamily:"monospace",...f.textShadow}:{},children:C}),l.jsx("div",{className:`text-sm ${h?"":"text-purple-600"}`,style:h?{color:he.cyan,fontFamily:"monospace"}:{},children:h?"TOTAL":"Total"})]})]})]}),l.jsx(ht.div,{className:`rounded-lg shadow-lg p-6 mt-6 border-2 ${h?Bt(0).className:"bg-white"}`,style:h?{...Bt(0).style,...f.glowRed}:{},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},children:l.jsx("div",{className:"flex justify-center",children:l.jsx(ot,{onClick:g,variant:"primary",className:"flex items-center gap-2",disabled:c,children:c?l.jsxs(l.Fragment,{children:[l.jsx(un,{size:"sm",color:"white",className:"mr-2"}),"Navigating..."]}):" Back to Cabinet"})})})]})]})};let d0e=class{constructor(){this.tokenKey="auth_token",this.refreshTokenKey="refresh_token",this.userKey="user_data"}getToken(){return localStorage.getItem(this.tokenKey)}getRefreshToken(){return localStorage.getItem(this.refreshTokenKey)}getUserData(){const t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}setToken(t){localStorage.setItem(this.tokenKey,t)}setRefreshToken(t){localStorage.setItem(this.refreshTokenKey,t)}setUserData(t){localStorage.setItem(this.userKey,JSON.stringify(t))}setTokens(t,r){this.setToken(t),this.setUserData({role:r}),localStorage.setItem("accessToken",t)}isAuthenticated(){const t=this.getToken();if(!t)return!1;try{const r=JSON.parse(atob(t.split(".")[1])),n=Date.now()/1e3;return r.exp>n}catch(r){return console.error("Error decoding token:",r),!1}}getUserRole(){const t=this.getUserData();return t?t.role:null}isAdmin(){return this.getUserRole()==="admin"}isTeacher(){return this.getUserRole()==="teacher"}isStudent(){return this.getUserRole()==="student"}clearAuth(){localStorage.removeItem(this.tokenKey),localStorage.removeItem(this.refreshTokenKey),localStorage.removeItem(this.userKey)}logout(){this.clearAuth(),window.location.href="/login"}getAuthHeader(){const t=this.getToken();return t?`Bearer ${t}`:null}async makeAuthenticatedRequest(t,r={}){const n=this.getToken();if(!n)throw new Error("No authentication token found");const s={"Content-Type":"application/json",Authorization:`Bearer ${n}`,...r.headers},a=await fetch(t,{...r,headers:s});if(a.status===401){if(await this.refreshToken())return s.Authorization=`Bearer ${this.getToken()}`,fetch(t,{...r,headers:s});throw this.logout(),new Error("Authentication failed")}return a}async refreshToken(){const t=this.getRefreshToken();if(!t)return!1;try{const r=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(r.ok){const n=await r.json();return this.setToken(n.accessToken),n.refreshToken&&this.setRefreshToken(n.refreshToken),!0}}catch(r){console.error("Error refreshing token:",r)}return!1}getAccessToken(){return this.getToken()}decodeToken(t){try{return JSON.parse(atob(t.split(".")[1]))}catch(r){return console.error("Error decoding token:",r),null}}init(){return this.isAuthenticated()?(this.setupTokenRefresh(),!0):(window.location.pathname!=="/login"&&(window.location.href="/login"),!1)}setupTokenRefresh(){setInterval(async()=>{this.isAuthenticated()&&await this.refreshToken()},3e3*1e3)}};const Jp=new d0e;window.tokenManager=Jp;typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{Jp.init()}):Jp.init());const pH=async(e,t,r,n,s=!1)=>{try{console.log(" Fetching teacher student results:",{teacherId:e,grade:t,className:r,termId:n,forceRefresh:s});const a=s?`&_t=${Date.now()}`:"",o=await(await Jp.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-student-results?teacher_id=${e}&grade=${t}&class=${r}&academic_period_id=${n}${a}`,{cache:s?"no-cache":"default",headers:s?{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}:{}})).json();if(o.success)return console.log(" Teacher student results loaded:",o.results.length,"results"),console.log(" Students loaded:",o.students?.length||0,"students"),{success:!0,results:o.results,students:o.students||[],count:o.results.length,student_count:o.student_count||0};throw new Error(o.error||"Failed to load teacher student results")}catch(a){return console.error("Error fetching teacher student results:",a),{success:!1,error:a.message,results:[]}}},xH=async(e,t)=>{try{console.log(" Fetching student results view:",{studentId:e,academicPeriodId:t});const r=t?`&academic_period_id=${t}`:"",s=await(await Jp.makeAuthenticatedRequest(`/.netlify/functions/get-student-results-view?student_id=${e}${r}`)).json();if(s.success)return console.log(" Student results view loaded:",s.results.length,"results"),{success:!0,results:s.results,count:s.results.length};throw new Error(s.error||"Failed to load student results view")}catch(r){return console.error("Error fetching student results view:",r),{success:!1,error:r.message,results:[]}}},f0e=async(e,t,r,n)=>{try{console.log(" Fetching class summary:",{teacherId:e,grade:t,className:r,academicPeriodId:n});const a=await(await Jp.makeAuthenticatedRequest(`/.netlify/functions/get-class-summary?teacher_id=${e}&grade=${t}&class=${r}&academic_period_id=${n}`)).json();if(a.success)return console.log(" Class summary loaded:",a.summary),{success:!0,summary:a.summary,hasData:!!a.summary};throw new Error(a.error||"Failed to load class summary")}catch(s){return console.error("Error fetching class summary:",s),{success:!1,error:s.message,summary:null}}},h0e=async(e,t,r,n,s={})=>{try{const a=await pH(e,t,r,n);if(!a.success)return a;let i=a.results;return s.subject&&(i=i.filter(o=>o.subject&&o.subject.toLowerCase().includes(s.subject.toLowerCase()))),s.testType&&(i=i.filter(o=>o.test_type===s.testType)),s.minScore!==void 0&&(i=i.filter(o=>o.score/o.max_score*100>=s.minScore)),s.maxScore!==void 0&&(i=i.filter(o=>o.score/o.max_score*100<=s.maxScore)),s.passed!==void 0&&(i=i.filter(o=>o.score>=o.passing_score===s.passed)),{success:!0,results:i,count:i.length,originalCount:a.results.length}}catch(a){return console.error("Error filtering teacher student results:",a),{success:!1,error:a.message,results:[]}}},m0e=async(e,t,r={})=>{try{const n=await xH(e,t);if(!n.success)return n;let s=n.results;return r.subject&&(s=s.filter(a=>a.subject&&a.subject.toLowerCase().includes(r.subject.toLowerCase()))),r.testType&&(s=s.filter(a=>a.test_type===r.testType)),r.semester&&(s=s.filter(a=>a.semester===r.semester)),r.passed!==void 0&&(s=s.filter(a=>a.score>=a.passing_score===r.passed)),{success:!0,results:s,count:s.length,originalCount:n.results.length}}catch(n){return console.error("Error filtering student results view:",n),{success:!1,error:n.message,results:[]}}},g0e={getTeacherStudentResults:pH,getStudentResultsView:xH,getClassSummary:f0e,getTeacherStudentResultsFiltered:h0e,getStudentResultsViewFiltered:m0e},p0e=({testType:e,testId:t,isShuffled:r,allowedTime:n,onSave:s,onCancel:a,canEdit:i=!0})=>{const[o,c]=_.useState(!1),[u,d]=_.useState(r||!1),[f,h]=_.useState(!!n),[g,p]=_.useState(n?Math.floor(n/60):""),[y,v]=_.useState(!1);_.useEffect(()=>{d(r||!1)},[r]),_.useEffect(()=>{h(!!n),p(n?Math.floor(n/60):"")},[n]),_.useEffect(()=>{!i&&o&&c(!1)},[i,o]);const C=async()=>{v(!0);try{const w=f&&g?Math.floor(parseFloat(g)*60):null,T={};["input","true_false","multiple_choice"].includes(e)&&(T.is_shuffled=u),T.allowed_time=w,await s(T),c(!1)}catch(w){console.error("Error saving settings:",w),alert("Failed to save settings. Please try again.")}finally{v(!1)}},S=()=>{d(r||!1),h(!!n),p(n?Math.floor(n/60):""),c(!1)};return o?l.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[["input","true_false","multiple_choice"].includes(e)&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:"is_shuffled",checked:u,onChange:w=>d(w.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),l.jsx("label",{htmlFor:"is_shuffled",className:"text-sm font-medium text-gray-700",children:"Shuffle questions"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:"enable_timer",checked:f,onChange:w=>{h(w.target.checked),w.target.checked||p("")},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),l.jsx("label",{htmlFor:"enable_timer",className:"text-sm font-medium text-gray-700",children:"Enable timer"})]}),f&&l.jsxs("div",{className:"ml-6 flex items-center space-x-2",children:[l.jsx("input",{type:"number",min:"1",step:"1",value:g,onChange:w=>p(w.target.value.replace(/[^0-9]/g,"")),placeholder:"Minutes",className:"w-24 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-gray-600",children:"minutes"})]})]}),l.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[l.jsx(ot,{onClick:C,variant:"primary",size:"sm",disabled:y||f&&!g,children:y?"Saving...":"Save"}),l.jsx(ot,{onClick:S,variant:"outline",size:"sm",children:"Cancel"})]})]}):l.jsxs("div",{className:"flex items-center space-x-4",children:[["input","true_false","multiple_choice"].includes(e)&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Shuffled:"}),l.jsx("span",{className:`text-sm font-semibold ${u?"text-green-600":"text-gray-400"}`,children:u?" Yes":" No"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Timer:"}),f&&g?l.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[" ",g," minutes"]}):l.jsx("span",{className:"text-sm font-semibold text-gray-400",children:" Not set"})]}),i&&l.jsx(ot,{onClick:()=>c(!0),variant:"outline",size:"sm",children:" Edit"})]})},rE=({isOpen:e,onClose:t,testType:r,testId:n,testName:s,questions:a=[],isLoading:i=!1,onSave:o,canEdit:c=!0,canEditSettings:u=!0,subject:d,createdAt:f,assignments:h=[],testInfo:g=null,onSettingsSave:p})=>{const[y,v]=_.useState(!1),[C,S]=_.useState([]),[w,T]=_.useState(!1),[N,A]=_.useState(!1),P=Array.isArray(a)?a:[],j=!!c,F=u!==void 0?!!u:!!c;if(_.useEffect(()=>{P.length>0?S(JSON.parse(JSON.stringify(P))):S([]),A(!1)},[P]),_.useEffect(()=>{e||(v(!1),A(!1),T(!1))},[e]),_.useEffect(()=>{!j&&y&&(v(!1),A(!1))},[j,y]),!e)return null;const R=D=>({multiple_choice:"Multiple Choice",true_false:"True/False",input:"Input",matching_type:"Matching",word_matching:"Word Matching",fill_blanks:"Fill in the Blanks"})[D]||D,L=(D,U)=>{switch(U){case"multiple_choice":return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Options:"}),l.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[D.option_a&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"A"}),l.jsx("span",{className:"text-gray-700",children:D.option_a})]}),D.option_b&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"B"}),l.jsx("span",{className:"text-gray-700",children:D.option_b})]}),D.option_c&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"C"}),l.jsx("span",{className:"text-gray-700",children:D.option_c})]}),D.option_d&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"D"}),l.jsx("span",{className:"text-gray-700",children:D.option_d})]}),D.option_e&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"E"}),l.jsx("span",{className:"text-gray-700",children:D.option_e})]}),D.option_f&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"F"}),l.jsx("span",{className:"text-gray-700",children:D.option_f})]})]})]});case"true_false":return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Options:"}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"T"}),l.jsx("span",{className:"text-gray-700",children:"True"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"F"}),l.jsx("span",{className:"text-gray-700",children:"False"})]})]})]});case"input":return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Answer Format:"}),l.jsx("div",{className:"bg-gray-100 p-3 rounded",children:l.jsx("span",{className:"text-gray-600 italic",children:"Type your answer in the text input field"})})]});case"matching_type":return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Instructions:"}),l.jsx("div",{className:"bg-gray-100 p-3 rounded",children:l.jsx("span",{className:"text-gray-600 italic",children:"Match the items by connecting them with lines or selecting pairs"})})]});default:return null}},V=(D,U)=>{if(!D.correct_answer&&!D.correct_answers)return null;let q="";switch(U){case"multiple_choice":q=D.correct_answer?.toUpperCase()||"";break;case"true_false":q=D.correct_answer?"True":"False";break;case"input":Array.isArray(D.correct_answers)?q=D.correct_answers.join(", "):q=D.correct_answer||D.correct_answers||"";break;case"matching_type":q=typeof D.correct_answer=="object"?JSON.stringify(D.correct_answer):D.correct_answer;break;default:q=String(D.correct_answer||D.correct_answers||"")}return l.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded",children:[l.jsx("p",{className:"font-medium text-green-800 mb-1",children:"Correct Answer:"}),l.jsx("p",{className:"text-green-700 font-mono",children:q})]})},Z=async()=>{if(!N){console.log("No changes to save");return}console.log("Saving questions...",{testType:r,testId:n,questionsCount:C.length}),T(!0);try{o?await o(r,n,C):await Cn.updateTestQuestions(r,n,C),A(!1),v(!1)}catch(D){console.error("Error saving questions:",D),alert("Failed to save questions. Please try again.")}finally{T(!1)}};_.useEffect(()=>{y&&console.log("Edit mode is ON",{hasChanges:N,questionsCount:C.length})},[y,N,C.length]);const Y=(D,U)=>{if(!y)return l.jsxs(l.Fragment,{children:[L(D,"multiple_choice"),V(D,"multiple_choice")]});const q=`mc_question_${n}_${U}`,H=Q=>{const ae=[...C];ae[U].question=Q,S(ae),A(!0)},te=(Q,ae)=>{const ce=[...C];ce[U][Q]=ae,S(ce),A(!0)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text:"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{id:q,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",rows:3,value:C[U]?.question||"",onChange:Q=>{H(Q.target.value)}}),l.jsx(Fl,{showPreview:!0,inputRef:()=>document.getElementById(q),onChange:Q=>H(Q.target.value)})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Options:"}),l.jsx("button",{type:"button",onClick:()=>{const Q=[...C],ae=Q[U],ce=["A","B","C","D","E","F"];if(ce.filter(xe=>{const se=`option_${xe.toLowerCase()}`;return ae[se]&&ae[se].trim()!==""}).length<6){const xe=ce.find(se=>{const De=`option_${se.toLowerCase()}`;return!ae[De]||ae[De].trim()===""});if(xe){const se=`option_${xe.toLowerCase()}`;ae[se]="",S(Q),A(!0)}}},className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",disabled:["A","B","C","D","E","F"].filter(Q=>{const ae=`option_${Q.toLowerCase()}`;return C[U]?.[ae]&&C[U][ae].trim()!==""}).length>=6,children:"+ Add Option"})]}),["A","B","C","D","E","F"].map(Q=>{const ae=`option_${Q.toLowerCase()}`,ce=C[U]?.[ae],me=ce??"",xe=typeof ce=="string"&&ce.trim()!=="";return!xe&&!(ce==="")&&Q!=="A"&&Q!=="B"?null:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded w-8 text-center",children:Q}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",id:`mc_option_${n}_${U}_${Q}`,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:me,onChange:De=>{te(ae,De.target.value)},placeholder:`Option ${Q}`}),l.jsx(Fl,{showPreview:!0,inputRef:()=>document.getElementById(`mc_option_${n}_${U}_${Q}`),onChange:De=>te(ae,De.target.value)})]}),xe&&l.jsx("button",{type:"button",onClick:()=>{const De=[...C];De[U][ae]=null,S(De),A(!0)},className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200",title:"Remove option",children:""})]},Q)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer:"}),l.jsxs("select",{className:"p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:C[U]?.correct_answer||"",onChange:Q=>{const ae=[...C];ae[U].correct_answer=Q.target.value,S(ae),A(!0)},children:[l.jsx("option",{value:"",children:"Select correct answer"}),["A","B","C","D","E","F"].map(Q=>{const ae=`option_${Q.toLowerCase()}`,ce=C[U]?.[ae]||"";return!ce||ce.trim()===""?null:l.jsxs("option",{value:Q.toLowerCase(),children:["Option ",Q]},Q)})]})]})]})},re=(D,U)=>{if(!y)return l.jsxs(l.Fragment,{children:[L(D,"true_false"),V(D,"true_false")]});const q=`tf_question_${n}_${U}`,H=te=>{const Q=[...C];Q[U].question=te,S(Q),A(!0)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text:"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{id:q,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",rows:3,value:C[U]?.question||"",onChange:te=>{H(te.target.value)}}),l.jsx(Fl,{showPreview:!0,inputRef:()=>document.getElementById(q),onChange:te=>H(te.target.value)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer:"}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"radio",name:`correct_answer_${U}`,value:"true",checked:C[U]?.correct_answer===!0||C[U]?.correct_answer==="true",onChange:()=>{const te=[...C];te[U].correct_answer=!0,S(te),A(!0)}}),l.jsx("span",{children:"True"})]}),l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"radio",name:`correct_answer_${U}`,value:"false",checked:C[U]?.correct_answer===!1||C[U]?.correct_answer==="false",onChange:()=>{const te=[...C];te[U].correct_answer=!1,S(te),A(!0)}}),l.jsx("span",{children:"False"})]})]})]})]})},ue=(D,U)=>{if(!y)return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Question:"}),l.jsx("div",{className:"bg-gray-100 p-3 rounded",dangerouslySetInnerHTML:{__html:ua(D.question||D.question_text||"")}}),l.jsx("p",{className:"font-medium text-gray-700 mb-2 mt-4",children:"Correct Answer(s):"}),l.jsx("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:Array.isArray(D.correct_answers)?l.jsx("ul",{className:"list-disc list-inside space-y-1",children:D.correct_answers.map((ce,me)=>l.jsx("li",{dangerouslySetInnerHTML:{__html:ua(String(ce))}},me))}):l.jsx("span",{dangerouslySetInnerHTML:{__html:ua(String(D.correct_answer||D.correct_answers||""))}})})]});const q=`input_question_${n}_${U}`,H=C[U]?.question??C[U]?.question_text??"",te=ce=>{const me=[...C];me[U].question_text!==void 0?me[U].question_text=ce:me[U].question=ce,S(me),A(!0)},Q=(ce,me)=>{const xe=[...C];Array.isArray(xe[U].correct_answers)||(xe[U].correct_answers=[]),xe[U].correct_answers[ce]=me,S(xe),A(!0)},ae=ce=>{const me=[...C];me[U].correct_answers!==void 0&&!Array.isArray(me[U].correct_answers)?me[U].correct_answers=ce:(me[U].correct_answer,me[U].correct_answer=ce),S(me),A(!0)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text (supports math: $...$ for inline, $$...$$ for display):"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{id:q,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 font-mono text-sm",rows:4,value:H,onChange:ce=>{te(ce.target.value)},placeholder:"Enter question text. Use $x^2$ for math expressions."}),l.jsx(Fl,{showPreview:!0,inputRef:()=>document.getElementById(q),onChange:ce=>te(ce.target.value)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer(s) (supports math: $...$ for inline, $$...$$ for display):"}),Array.isArray(C[U]?.correct_answers)?l.jsxs("div",{className:"space-y-2",children:[C[U].correct_answers.map((ce,me)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",id:`input_answer_${n}_${U}_${me}`,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 font-mono text-sm",value:String(ce),onChange:xe=>{Q(me,xe.target.value)},placeholder:"Enter answer (supports math: $x^2$)"}),l.jsx(Fl,{showPreview:!0,inputRef:()=>document.getElementById(`input_answer_${n}_${U}_${me}`),onChange:xe=>Q(me,xe.target.value)})]}),l.jsx("button",{type:"button",onClick:()=>{const xe=[...C];xe[U].correct_answers.splice(me,1),S(xe),A(!0)},className:"px-3 py-2 bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Remove"})]},me)),l.jsx("button",{type:"button",onClick:()=>{const ce=[...C];ce[U].correct_answers||(ce[U].correct_answers=[]),ce[U].correct_answers.push(""),S(ce),A(!0)},className:"px-3 py-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 text-sm",children:"+ Add Answer"})]}):l.jsx("div",{children:l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",id:`input_answer_${n}_${U}_single`,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 font-mono text-sm",value:String(C[U]?.correct_answer||C[U]?.correct_answers||""),onChange:ce=>{ae(ce.target.value)},placeholder:"Enter answer (supports math: $x^2$)"}),l.jsx(Fl,{showPreview:!0,inputRef:()=>document.getElementById(`input_answer_${n}_${U}_single`),onChange:ce=>ae(ce.target.value)})]})})]})]})},z=zs.useCallback(()=>{S(D=>{const U=D.map(H=>{const te=H?.question_id??H?.id,Q=Number(te);return Number.isFinite(Q)?Q:null}).filter(H=>H!==null),q=U.length>0?Math.max(...U)+1:1;return[...D,{id:null,question_id:q,left_word:"",right_word:"",__isNew:!0}]}),A(!0)},[S,A]),X=(D,U)=>{if(!y)return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Word Pair:"}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex-1 bg-gray-100 p-3 rounded",children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"Left:"})," ",D.left_word]}),l.jsx("span",{className:"text-gray-400",children:""}),l.jsxs("div",{className:"flex-1 bg-gray-100 p-3 rounded",children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"Right:"})," ",D.right_word]})]})]});const q=(Q,ae,ce)=>C.filter((xe,se)=>se===ce?!1:ae==="left"?xe.left_word?.toLowerCase()===Q?.toLowerCase():xe.right_word?.toLowerCase()===Q?.toLowerCase()).length>0,H=q(C[U]?.left_word,"left",U),te=q(C[U]?.right_word,"right",U);return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Left Word:"}),l.jsx("input",{type:"text",className:`w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 ${H?"border-red-300 bg-red-50":"border-gray-300"}`,value:C[U]?.left_word||"",onChange:Q=>{const ae=[...C];ae[U].left_word=Q.target.value,S(ae),A(!0)},placeholder:"Enter left word"}),H&&l.jsx("p",{className:"text-xs text-red-600 mt-1",children:" Duplicate left word detected"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Right Word:"}),l.jsx("input",{type:"text",className:`w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 ${te?"border-red-300 bg-red-50":"border-gray-300"}`,value:C[U]?.right_word||"",onChange:Q=>{const ae=[...C];ae[U].right_word=Q.target.value,S(ae),A(!0)},placeholder:"Enter right word"}),te&&l.jsx("p",{className:"text-xs text-red-600 mt-1",children:" Duplicate right word detected"})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{type:"button",onClick:()=>{if(U>0){const Q=[...C];[Q[U-1],Q[U]]=[Q[U],Q[U-1]],S(Q),A(!0)}},disabled:U===0,className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:" Move Up"}),l.jsx("button",{type:"button",onClick:()=>{if(U<C.length-1){const Q=[...C];[Q[U],Q[U+1]]=[Q[U+1],Q[U]],S(Q),A(!0)}},disabled:U===C.length-1,className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:" Move Down"}),l.jsx("button",{type:"button",onClick:()=>{if(window.confirm("Are you sure you want to remove this word pair?")){const Q=C.filter((ae,ce)=>ce!==U);S(Q),A(!0)}},className:"px-3 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 text-sm",children:"Remove"})]})]})},I=(D,U)=>{if(!y)return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Question:"}),l.jsx("div",{className:"bg-gray-100 p-3 rounded",children:l.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:JSON.stringify(D.question_json,null,2)})}),l.jsx("p",{className:"font-medium text-gray-700 mb-2 mt-4",children:"Correct Answers:"}),l.jsx("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:Array.isArray(D.correct_answers)?l.jsx("ul",{className:"list-disc list-inside space-y-1",children:D.correct_answers.map((te,Q)=>l.jsx("li",{children:String(te)},Q))}):l.jsx("span",{children:String(D.correct_answers)})})]});const q=JSON.stringify(D.question_json||{},null,2),H=Array.isArray(D.correct_answers)?D.correct_answers:[D.correct_answers||""];return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question JSON (structured text):"}),l.jsx("textarea",{className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 font-mono text-sm",rows:6,value:q,onChange:te=>{try{const Q=JSON.parse(te.target.value),ae=[...C];ae[U].question_json=Q,S(ae),A(!0)}catch(Q){console.error("Invalid JSON:",Q)}},placeholder:'{"type": "paragraph", "children": [...]}'}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Edit the JSON structure for the question text"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer(s):"}),l.jsxs("div",{className:"space-y-2",children:[H.map((te,Q)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"text",className:"flex-1 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:String(te),onChange:ae=>{const ce=[...C];ce[U].correct_answers[Q]=ae.target.value,S(ce),A(!0)},placeholder:"Enter answer"}),l.jsx("button",{type:"button",onClick:()=>{const ae=[...C];ae[U].correct_answers.splice(Q,1),S(ae),A(!0)},className:"px-3 py-2 bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Remove"})]},Q)),l.jsx("button",{type:"button",onClick:()=>{const te=[...C];te[U].correct_answers||(te[U].correct_answers=[]),te[U].correct_answers.push(""),S(te),A(!0)},className:"px-3 py-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 text-sm",children:"+ Add Answer"})]})]})]})},B=y?C:P,W=B.length;return l.jsx(Uo,{children:l.jsxs(ht.div,{className:"fixed inset-0 z-50 overflow-y-auto",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[l.jsx(ht.div,{className:"fixed inset-0 bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t}),l.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:l.jsxs(ht.div,{className:"relative bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3},children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 flex-shrink-0",children:[l.jsx("div",{className:"flex items-center space-x-3",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s||"Test Details"}),l.jsxs("p",{className:"text-sm text-gray-600",children:[R(r),"  ",W," Question",W!==1?"s":""]})]})}),l.jsxs("div",{className:"flex items-center space-x-2",children:[j&&["input","multiple_choice","true_false","word_matching"].includes(r)&&l.jsx(ot,{onClick:()=>{y&&N?window.confirm("You have unsaved changes. Are you sure you want to cancel?")&&(v(!1),S(JSON.parse(JSON.stringify(a))),A(!1)):v(!y)},variant:y?"outline":"primary",size:"sm",className:"flex items-center space-x-1",children:y?" Cancel Edit":" Edit Questions"}),l.jsx(ot,{onClick:t,variant:"outline",size:"sm",className:"flex items-center space-x-1",children:" Close"})]})]}),l.jsx("div",{className:"p-6 overflow-y-auto flex-1 min-h-0",children:i?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading test details..."})]})}):l.jsxs("div",{className:"space-y-6",children:[!j&&l.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-800",children:"Editing is disabled because this test has an active assignment."}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Test Information"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d&&l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Subject:"}),l.jsx("p",{className:"text-sm text-gray-900",children:d})]}),f&&l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Created:"}),l.jsx("p",{className:"text-sm text-gray-900",children:new Date(f).toLocaleDateString()})]})]}),h&&h.length>0&&l.jsxs("div",{className:"mt-4",children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Classes:"}),l.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:h.map((D,U)=>l.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs font-medium",children:[D.grade,"/",D.class]},U))})]}),g&&p&&l.jsx("div",{className:"mt-4 pt-4 border-t border-blue-200",children:l.jsx(p0e,{testType:r,testId:n,isShuffled:g?.is_shuffled,allowedTime:g?.allowed_time,onSave:p,canEdit:F})})]}),W===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Questions Available"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"This test doesn't have any questions yet."}),y&&r==="word_matching"&&l.jsx("button",{type:"button",onClick:z,className:"px-4 py-2 text-sm font-medium text-blue-600 border border-dashed border-blue-300 rounded hover:bg-blue-50",children:"+ Add Word Pair"})]}):l.jsxs("div",{className:"space-y-6",children:[B.map((D,U)=>l.jsxs(ht.div,{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:U*.1,duration:.3},children:[l.jsx("div",{className:"flex items-start justify-between mb-4",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full",children:["Question ",U+1]}),l.jsx("span",{className:"text-gray-500 text-sm",children:R(r)})]})}),l.jsx("div",{className:"mb-4",children:y?l.jsxs("div",{className:"text-gray-800 font-medium text-lg leading-relaxed",children:[r==="multiple_choice"&&Y(D,U),r==="true_false"&&re(D,U),r==="input"&&ue(D,U),r==="word_matching"&&X(D,U),r==="fill_blanks"&&I(D,U)]}):l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-gray-800 font-medium text-lg leading-relaxed",children:r==="input"?l.jsx("span",{dangerouslySetInnerHTML:{__html:ua(D.question||D.question_text||"")}}):r==="word_matching"?l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("span",{className:"bg-blue-100 px-3 py-1 rounded",children:D.left_word}),l.jsx("span",{className:"text-gray-400",children:""}),l.jsx("span",{className:"bg-green-100 px-3 py-1 rounded",children:D.right_word})]}):r==="fill_blanks"?l.jsx("div",{className:"bg-gray-100 p-3 rounded",children:l.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:JSON.stringify(D.question_json,null,2)})}):D.question||D.question_text}),L(D,r),V(D,r)]})})]},D.id||D.question_id||U)),y&&r==="word_matching"&&l.jsx("div",{className:"flex justify-center pt-2",children:l.jsx("button",{type:"button",onClick:z,className:"px-4 py-2 text-sm font-medium text-blue-600 border border-dashed border-blue-300 rounded hover:bg-blue-50",children:"+ Add Word Pair"})})]})]})}),l.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50 flex-shrink-0",children:[l.jsx("div",{className:"text-sm text-gray-600",children:W>0&&l.jsx("span",{children:y?N?l.jsx("span",{className:"text-orange-600 font-semibold",children:" Unsaved changes"}):l.jsxs("span",{children:["Showing ",W," question",W!==1?"s":""]}):l.jsxs("span",{children:["Showing ",W," question",W!==1?"s":""]})})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[y&&l.jsx("button",{onClick:Z,disabled:w||!N,className:`px-4 py-2 rounded-md font-medium flex items-center space-x-2 min-w-[140px] justify-center transition-all ${w||!N?"bg-gray-400 text-gray-700 cursor-not-allowed opacity-60":"bg-blue-600 text-white hover:bg-blue-700 cursor-pointer"}`,children:w?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),l.jsx("span",{children:"Saving..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Save Changes"})]})}),l.jsx(ot,{onClick:t,variant:y?"outline":"primary",className:"flex items-center space-x-2",children:"Close"})]})]})]})})]})})},x0e=({testText:e,blanks:t,separateType:r=!0,testId:n,testName:s="Unknown Test",teacherId:a="Unknown Teacher",subjectId:i,onTestComplete:o,onAnswerChange:c})=>{console.log(" FillBlanksTestStudent Props Debug:"),console.log("- testText:",e),console.log("- blanks:",t),console.log("- separateType:",r),console.log("- testId:",n),console.log("- testName:",s),console.log("- teacherId:",a),console.log("- subjectId:",i);const{theme:u,isCyberpunk:d,themeClasses:f}=Da(),h=Oa(u);if(!e||!t||!Array.isArray(t))return console.log(" FillBlanksTestStudent: Missing test data"),l.jsx("div",{className:`min-h-screen flex items-center justify-center ${d?"":"bg-gray-50"}`,style:d?{backgroundColor:he.black}:{},children:l.jsx(Ht,{className:`max-w-md w-full ${d?Bt(0).className:""}`,style:d?{...Bt(0).style,...h.glow}:{},children:l.jsxs(Ht.Body,{className:"text-center",children:[l.jsx("div",{className:`text-6xl mb-4 ${d?"":"text-gray-500"}`,style:d?{color:he.cyan,fontFamily:"monospace"}:{},children:""}),l.jsx("h2",{className:`text-xl font-semibold mb-2 ${d?"":"text-gray-900"}`,style:d?{color:he.cyan,fontFamily:"monospace",...h.textShadow}:{},children:d?"NO TEST DATA":"No Test Data"}),l.jsx("p",{className:`mb-4 ${d?"":"text-gray-600"}`,style:d?{color:he.cyan,fontFamily:"monospace"}:{},children:d?"UNABLE TO LOAD FILL BLANKS TEST DATA":"Unable to load fill blanks test data"}),l.jsx(ot,{onClick:()=>window.history.back(),variant:"primary",children:"Back to Dashboard"})]})})});const[g,p]=_.useState({}),[y,v]=_.useState(!1),[C,S]=_.useState(null),[w,T]=_.useState(null),[N,A]=_.useState(!1),[P,j]=_.useState(null),{showNotification:F}=ci(),{makeAuthenticatedRequest:R}=Gl(),{user:L}=Is(),{startTracking:V,stopTracking:Z,getCheatingData:Y,clearData:re}=T1("fill_blanks",n,L?.student_id||L?.id);nS();const ue=_.useCallback((B,W)=>{try{let D=B;if(typeof B=="string"&&B.startsWith("{"))try{const te=JSON.parse(B);te.root&&te.root.children&&(D=te.root.children.map(Q=>Q.children?Q.children.map(ae=>ae.style&&ae.style.includes("background-color: #f0f9ff")?"[BLANK_PLACEHOLDER]":ae.text||"").join(""):"").join(" "))}catch(te){console.error("Error parsing Lexical JSON:",te)}let U=D;W.forEach((te,Q)=>{const ae=`[${Q+1}_________]`;U=U.replace("[BLANK_PLACEHOLDER]",ae)});const H=U.split(/(\[\d+_________\])/).map((te,Q)=>te.match(/\[\d+_________\]/)?l.jsx("span",{className:`inline-block px-3 py-1 mx-1 border-2 rounded-lg font-mono font-bold shadow-sm ${d?"border":"bg-purple-100 text-purple-800 border-purple-400"}`,style:d?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",...h.glow}:{},children:te},Q):l.jsx("span",{style:d?{color:he.cyan,fontFamily:"monospace"}:{},children:te},Q));return l.jsx("div",{className:"prose max-w-none mb-6",children:l.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-wrap ",style:d?{color:he.cyan,fontFamily:"monospace"}:{},children:H})})}catch(D){return console.error("Error rendering text with blanks:",D),l.jsx("div",{className:d?"":"text-red-500",style:d?{color:he.red,fontFamily:"monospace",...h.textShadowRed}:{},children:d?"ERROR LOADING TEST CONTENT":"Error loading test content"})}},[d,h]),z=_.useCallback((B,W)=>{try{let D=B;if(typeof B=="string"&&B.startsWith("{"))try{const te=JSON.parse(B);te.root&&te.root.children&&(D=te.root.children.map(Q=>Q.children?Q.children.map(ae=>ae.style&&ae.style.includes("background-color: #f0f9ff")?"[BLANK_PLACEHOLDER]":ae.text||"").join(""):"").join(" "))}catch(te){console.error("Error parsing Lexical JSON:",te)}const U=[];W.forEach((te,Q)=>{const ae=g[te.id],ce=ae?te.options[ae.charCodeAt(0)-65]:null,me=ce?l.jsx("span",{className:`inline-block px-3 py-2 rounded-lg border-2 cursor-pointer transition-all duration-200 font-bold shadow-sm ${d?"border":"bg-green-100 text-green-800 border-green-400 hover:bg-green-200 hover:border-green-500"}`,onClick:()=>T(te.id),style:d?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",...h.glow}:{},children:ce},Q):l.jsxs("span",{className:`inline-block px-3 py-2 rounded-lg border-2 cursor-pointer transition-all duration-200 font-bold shadow-sm ${d?"border":"bg-purple-100 text-purple-800 border-purple-400 hover:bg-purple-200 hover:border-purple-500"}`,onClick:()=>T(te.id),style:d?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",...h.glow}:{},children:[Q+1,"_________"]},Q);U.push(me),D=D.replace("[BLANK_PLACEHOLDER]",`__BLANK_${te.id}__`)});const q=D.split(/__BLANK_\d+__/),H=[];for(let te=0;te<q.length;te++)q[te]&&H.push(l.jsx("span",{style:d?{color:he.cyan,fontFamily:"monospace"}:{},children:q[te]},`text-${te}`)),te<U.length&&H.push(U[te]);return l.jsx("div",{className:"prose max-w-none mb-6",children:l.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-wrap ",style:d?{color:he.cyan,fontFamily:"monospace"}:{},children:H})})}catch(D){return console.error("Error rendering text with inline blanks:",D),l.jsx("div",{className:d?"":"text-red-500",style:d?{color:he.red,fontFamily:"monospace",...h.textShadowRed}:{},children:d?"ERROR LOADING TEST CONTENT":"Error loading test content"})}},[g,d,h]),X=_.useCallback((B,W)=>{const D={...g,[B]:W};p(D),c&&c(B,W)},[g,c]),I=_.useCallback(B=>l.jsx("div",{className:"space-y-6",children:B.map((W,D)=>{const U=W.blank_options||W.options||[];W.correct_answers;const q=W.question_json||W.question||`Blank ${D+1}`;return console.log(` Blank ${D+1} question text:`,q),l.jsxs(Ht,{className:`p-4 ${d?Bt(D%4).className:""}`,style:d?{...Bt(D%4).style,...h.glow}:{},children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:`text-lg font-semibold mb-2 ${d?"":"text-gray-800"}`,style:d?{color:he.cyan,fontFamily:"monospace",...h.textShadow}:{},children:d?`QUESTION ${D+1}`:`Question ${D+1}`}),l.jsx("p",{className:`mb-4 ${d?"":"text-gray-600"}`,style:d?{color:he.cyan,fontFamily:"monospace"}:{},children:q})]}),l.jsx("div",{className:"space-y-3",children:U.filter(H=>H&&H.trim().length>0).map((H,te)=>l.jsxs("label",{className:`flex items-center space-x-3 cursor-pointer p-2 rounded-lg transition-colors border-2 ${d?"border":"hover:bg-gray-50"}`,style:d?{backgroundColor:he.black,borderColor:he.cyan,...g[W.question_id||W.id||D]===String.fromCharCode(65+te)?h.glow:{}}:{},children:[l.jsx("input",{type:"radio",name:`blank_${W.question_id||W.id||D}`,value:String.fromCharCode(65+te),checked:g[W.question_id||W.id||D]===String.fromCharCode(65+te),onChange:Q=>X(W.question_id||W.id||D,Q.target.value),className:`w-4 h-4 ${d?"":"text-blue-600 border-gray-300 focus:ring-blue-500"}`,style:d?{accentColor:he.cyan}:{}}),l.jsxs("span",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-sm font-semibold border-2 ${d?"border":"bg-gray-100 text-gray-600"}`,style:d?{backgroundColor:g[W.question_id||W.id||D]===String.fromCharCode(65+te)?he.cyan:he.black,borderColor:he.cyan,color:g[W.question_id||W.id||D]===String.fromCharCode(65+te)?he.black:he.cyan,fontFamily:"monospace"}:{},children:String.fromCharCode(65+te)}),l.jsx("span",{className:d?"":"text-gray-700",style:d?{color:he.cyan,fontFamily:"monospace"}:{},children:H})]})]},te))})]},W.question_id||W.id||D)})}),[g,X,d,h]);return _.useEffect(()=>{if(n&&L?.student_id){S(new Date),V(),console.log(" Anti-cheating tracking started for fill blanks test");const W=`test_progress_${L.student_id}_fill_blanks_${n}`,D=Es(W);D&&(p(D.answers||{}),S(new Date(D.startTime)),console.log(" Fill blanks test progress restored:",D))}},[n,L?.student_id,t,V]),_.useEffect(()=>{if(C&&L?.student_id&&n){const B=setInterval(()=>{const W={answers:g,startTime:C.toISOString()},D=`test_progress_${L.student_id}_fill_blanks_${n}`;gs(D,W,ls.test_progress),console.log(" Fill blanks progress auto-saved")},3e4);return()=>clearInterval(B)}},[C,g,L?.student_id,n]),_.useEffect(()=>()=>{Z(),re(),console.log(" Fill blanks test component unmounted - anti-cheating cleanup")},[Z,re]),_.useCallback(async()=>{v(!0);try{const B=t.length;let W=0;t.forEach((Ke,tt)=>{const Pe=g[Ke.id];Pe&&Pe===Ke.correct_answer&&W++});const D=W,U=B;console.log(` Fill Blanks Score: ${D}/${U} (${Math.round(D/U*100)}%)`);const q=new Date,H=C?Math.round((q-C)/1e3):0,te=C?C.toISOString():q.toISOString(),Q=Y();console.log(" Anti-cheating data for fill blanks submission:",Q);const ae=L.student_id,ce=`retest_assignment_id_${ae}_fill_blanks_${n}`,me=localStorage.getItem(ce),{academicCalendarService:xe}=await ni(async()=>{const{academicCalendarService:Ke}=await Promise.resolve().then(()=>fS);return{academicCalendarService:Ke}},void 0);await xe.loadAcademicCalendar();const De=xe.getCurrentTerm()?.id;if(!De)throw new Error("No current academic period found");const He={test_id:n,test_name:s,teacher_id:a||null,subject_id:i||null,student_id:ae,academic_period_id:De,parent_test_id:n,retest_assignment_id:me?Number(me):null,answers:g,score:D,maxScore:U,time_taken:H,started_at:te,submitted_at:q.toISOString(),caught_cheating:Q.caught_cheating,visibility_change_times:Q.visibility_change_times};console.log(" Submitting fill blanks test:",He);const _t=await(await R("/.netlify/functions/submit-fill-blanks-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(He)})).json();if(_t.success){if(F("Test submitted successfully!","success"),Z(),re(),console.log(" Anti-cheating tracking stopped and data cleared for fill blanks test"),L?.student_id&&(u1(L.student_id,"fill_blanks",n),console.log(" Fill blanks test data cleared from cache")),!!me&&L?.student_id){let tt=3;try{const Qe=localStorage.getItem(`student_active_tests_${L.student_id}`);if(Qe){const Ot=JSON.parse(Qe)?.tests?.find($t=>$t.test_id===n&&$t.test_type==="fill_blanks");Ot&&(tt=Ot.retest_attempts_left||Ot.max_attempts||3)}}catch(Qe){console.error("Error checking active tests cache:",Qe)}const je=(D>0&&U>0?D/U*100:0)>=50;if(je){const Qe=`retest_attempt${tt}_${L.student_id}_fill_blanks_${n}`;localStorage.setItem(Qe,"true"),console.log(" Passed retest, marking last-slot key:",Qe);let vt=0;for(let Gt=1;Gt<=10;Gt++){const ir=`retest_attempt${Gt}_${L.student_id}_fill_blanks_${n}`;localStorage.getItem(ir)==="true"&&vt++}const Ot=`test_completed_${L.student_id}_fill_blanks_${n}`;localStorage.setItem(Ot,"true"),console.log(" Marked retest as completed (student passed):",Ot);const $t=`retest_attempts_${L.student_id}_fill_blanks_${n}`;localStorage.setItem($t,JSON.stringify({used:vt,max:tt})),console.log(" Set retest attempts metadata (student passed):",$t,{used:vt,max:tt})}else{let Qe=1;for(let ir=1;ir<=10;ir++){const dt=`retest_attempt${ir}_${L.student_id}_fill_blanks_${n}`;if(localStorage.getItem(dt)!=="true"){Qe=ir;break}}const vt=`retest_attempt${Qe}_${L.student_id}_fill_blanks_${n}`;localStorage.setItem(vt,"true"),console.log(" Marked retest attempt as completed:",vt);let Ot=0;for(let ir=1;ir<=10;ir++){const dt=`retest_attempt${ir}_${L.student_id}_fill_blanks_${n}`;localStorage.getItem(dt)==="true"&&Ot++}const $t=tt-Ot,Gt=$t<=0||je;if(console.log(" Retest completion check:",{usedAttempts:Ot,maxAttempts:tt,attemptsLeft:$t,passed:je,shouldComplete:Gt}),Gt){const ir=`test_completed_${L.student_id}_fill_blanks_${n}`;localStorage.setItem(ir,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",ir);const dt=`retest_attempts_${L.student_id}_fill_blanks_${n}`;localStorage.setItem(dt,JSON.stringify({used:Ot,max:tt})),console.log(" Set retest attempts metadata (attempts exhausted):",dt,{used:Ot,max:tt})}}}else if(L?.student_id){const tt=`test_completed_${L.student_id}_fill_blanks_${n}`;localStorage.setItem(tt,"true"),console.log(" Fill blanks test marked as completed in localStorage:",tt)}if(L?.student_id){const tt=`retest1_${ae}_fill_blanks_${n}`;localStorage.removeItem(tt),localStorage.removeItem(ce)}if(L?.student_id){const tt=`student_results_table_${L.student_id}`;gs(tt,_t,ls.student_results_table),console.log(" Fill blanks test results cached with key:",tt)}setShowSubmitModal(!1),setTimeout(()=>{o&&o(D)},2e3)}else throw new Error(_t.message||"Failed to submit test")}catch(B){console.error("Error submitting test:",B),F("Error submitting test. Please try again.","error")}finally{v(!1)}},[g,t,n,s,a,i,C,Y,Z,re,R,F,o,L]),l.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:l.jsxs(Ht,{className:d?Bt(0).className:"",style:d?{...Bt(0).style,...h.glow}:{},children:[y&&l.jsx(Ht.Header,{children:l.jsx("div",{className:"flex items-center justify-center",children:l.jsxs("div",{className:`flex items-center space-x-2 text-sm ${d?"":"text-gray-500"}`,style:d?{color:he.cyan,fontFamily:"monospace"}:{},children:[l.jsx(un,{size:"small"}),l.jsx("span",{children:d?"SUBMITTING...":"Submitting..."})]})})}),l.jsx(Ht.Body,{style:d?{backgroundColor:he.black}:{},children:r===!0?l.jsxs(l.Fragment,{children:[ue(e,t),I(t)]}):l.jsx(l.Fragment,{children:z(e,t)})}),r===!1&&w&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:l.jsxs("div",{className:`rounded-lg p-6 max-w-md w-full mx-4 border-2 ${d?Bt(0).className:"bg-white"}`,style:d?{...Bt(0).style,...h.glow}:{},children:[l.jsx("h3",{className:"text-lg font-semibold mb-4 ",style:d?{color:he.cyan,fontFamily:"monospace",...h.textShadow}:{},children:d?"SELECT ANSWER":"Select Answer"}),l.jsx("div",{className:"space-y-2",children:t.find(B=>B.id===w)?.options.filter(B=>B.trim().length>0).map((B,W)=>l.jsxs("button",{onClick:()=>{X(w,String.fromCharCode(65+W)),T(null)},className:`w-full text-left px-4 py-2 rounded-lg border-2 ${d?"border":"hover:bg-gray-100 border-gray-200"}`,style:d?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace"}:{},children:[l.jsxs("span",{className:`font-semibold mr-2 ${d?"":"text-blue-600"}`,style:d?{color:he.cyan,fontFamily:"monospace"}:{},children:[String.fromCharCode(65+W),")"]}),B]},W))}),l.jsx("div",{className:"mt-4 flex justify-end",children:l.jsx(ot,{onClick:()=>T(null),variant:"secondary",size:"sm",children:"Cancel"})})]})}),l.jsx(Ht.Footer,{children:l.jsx("div",{className:"flex gap-3"})})]})})};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),v0e=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),aO=e=>{const t=v0e(e);return t.charAt(0).toUpperCase()+t.slice(1)},yH=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),b0e=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var w0e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0e=_.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:i,...o},c)=>_.createElement("svg",{ref:c,...w0e,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:yH("lucide",s),...!a&&!b0e(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,d])=>_.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=(e,t)=>{const r=_.forwardRef(({className:n,...s},a)=>_.createElement(_0e,{ref:a,iconNode:t,className:yH(`lucide-${y0e(aO(e))}`,`lucide-${e}`,n),...s}));return r.displayName=aO(e),r};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0e=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],k0e=E1("download",S0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0e=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],T0e=E1("maximize-2",C0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0e=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],N0e=E1("rotate-cw",E0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],vH=E1("x",A0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0e=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],P0e=E1("zoom-in",j0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0e=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],M0e=E1("zoom-out",F0e),Qc={WIDTH:1536,HEIGHT:2048,ASPECT_RATIO:1536/2048},bH={MIN:.25,MAX:1,INITIAL:.25,STEP:.1},Yh={PENCIL:"pencil",LINE:"line",RECTANGLE:"rectangle",CIRCLE:"circle",ERASER:"eraser"},iO={CURSOR_COLOR:"#ff0000",CURSOR_OPACITY:.3},oO={ERASER_TO_THICKNESS_RATIO:2.5,THICKNESS_TO_ERASER_RATIO:.4},L4={MAX_ENTRIES:10,MAX_MEMORY_KB:500,COMPRESSION_THRESHOLD:200},wH=e=>{try{const t=JSON.stringify(e);return new Blob([t]).size/1024}catch(t){return console.warn("Error calculating memory usage:",t),0}},O0e=e=>Array.isArray(e)?e.map(t=>Array.isArray(t)?D0e(t):t):e,D0e=e=>{if(e.length<=2)return e;const t=[e[0]],r=2;for(let n=1;n<e.length-1;n++){const s=e[n-1],a=e[n];e[n+1],Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2))>r&&t.push(a)}return t.push(e[e.length-1]),t},R0e=(e,t=Date.now())=>{const r=wH(e);return{data:[...e],timestamp:t,memoryUsage:r,compressed:r>L4.COMPRESSION_THRESHOLD}},lO=(e,t,r)=>{const n=R0e(t),s=wH(t),a=e.slice(0,r+1);a.push(n);let i=a;return s>L4.MAX_MEMORY_KB&&(i=I0e(a)),i.length>L4.MAX_ENTRIES&&(i=i.slice(-10)),{history:i,index:i.length-1}},I0e=e=>e.map(t=>t.memoryUsage>L4.COMPRESSION_THRESHOLD?{...t,data:O0e(t.data),compressed:!0}:t),cO=(e,t)=>{if(t<0||t>=e.length)return[];const r=e[t];return r?r.compressed?L0e(r.data):[...r.data]:[]},L0e=e=>[...e],uO=e=>e>0,dO=(e,t)=>e<t-1,B0e=()=>({history:[],index:-1}),$0e=()=>{const[e,t]=_.useState({zoom:1,position:{x:0,y:0},rotation:0,currentTool:"pencil",currentColor:"#000000",currentThickness:2,eraserSize:10,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:[],historyIndex:-1,isFullscreen:!1,preFullscreenState:null}),[r,n]=_.useState([]),[s,a]=_.useState([]),i=_.useCallback(N=>{t(A=>({...A,...N}))},[]),o=_.useCallback(()=>{t({zoom:1,position:{x:0,y:0},rotation:0,currentTool:"pencil",currentColor:"#000000",currentThickness:2,eraserSize:10,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:[],historyIndex:-1,isFullscreen:!1,preFullscreenState:null})},[]),c=_.useCallback(N=>{const A={x:N.x,y:N.y,color:e.currentColor,thickness:e.currentThickness};e.currentTool==="pencil"?t(P=>({...P,isDrawing:!0,currentLine:[A]})):["line","rectangle","circle"].includes(e.currentTool)&&t(P=>({...P,isDrawing:!0,currentShape:{type:e.currentTool,startX:N.x,startY:N.y,endX:N.x,endY:N.y,color:e.currentColor,thickness:e.currentThickness}}))},[e.currentTool,e.currentColor,e.currentThickness]),u=_.useCallback(N=>{if(!e.isDrawing)return;const A={x:N.x,y:N.y,color:e.currentColor,thickness:e.currentThickness};e.currentTool==="pencil"?t(P=>({...P,currentLine:[...P.currentLine,A]})):e.currentShape&&t(P=>({...P,currentShape:{...P.currentShape,endX:N.x,endY:N.y}}))},[e.isDrawing,e.currentTool,e.currentColor,e.currentThickness,e.currentShape]),d=_.useCallback(()=>{if(!e.isDrawing)return;let N=r;if(e.currentTool==="pencil"&&e.currentLine.length>0?(N=[...r,e.currentLine],n(N)):e.currentShape&&(N=[...r,e.currentShape],n(N)),N!==r){const A=lO(e.drawingHistory,N,e.historyIndex);t(P=>({...P,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:A.history,historyIndex:A.index}))}else t(A=>({...A,isDrawing:!1,currentLine:[],currentShape:null}))},[e.isDrawing,e.currentTool,e.currentLine,e.currentShape,r,e.drawingHistory,e.historyIndex]),f=_.useCallback(N=>Math.round(N*oO.ERASER_TO_THICKNESS_RATIO),[]),h=_.useCallback(N=>Math.round(N*oO.THICKNESS_TO_ERASER_RATIO),[]),g=_.useCallback(N=>{t(A=>({...A,currentThickness:N,eraserSize:f(N)}))},[f]),p=_.useCallback(N=>{t(A=>({...A,eraserSize:N,currentThickness:h(N)}))},[h]),y=_.useCallback(N=>{const A=lO(e.drawingHistory,N,e.historyIndex);t(P=>({...P,drawingHistory:A.history,historyIndex:A.index}))},[e.drawingHistory,e.historyIndex]),v=_.useCallback(()=>{if(uO(e.historyIndex)){const N=e.historyIndex-1,A=cO(e.drawingHistory,N);n([...A]),t(P=>({...P,historyIndex:N}))}},[e.historyIndex,e.drawingHistory]),C=_.useCallback(()=>{if(dO(e.historyIndex,e.drawingHistory.length)){const N=e.historyIndex+1,A=cO(e.drawingHistory,N);n([...A]),t(P=>({...P,historyIndex:N}))}},[e.historyIndex,e.drawingHistory]),S=_.useCallback(()=>{const N=B0e();t(A=>({...A,drawingHistory:N.history,historyIndex:N.index}))},[]),w=uO(e.historyIndex),T=dO(e.historyIndex,e.drawingHistory.length);return{drawingState:e,setDrawingState:t,drawingData:r,setDrawingData:n,textBoxes:s,setTextBoxes:a,updateDrawingState:i,resetDrawingState:o,startDrawing:c,continueDrawing:u,finishDrawing:d,handleThicknessChange:g,handleEraserSizeChange:p,saveToHistoryState:y,undo:v,redo:C,clearHistoryState:S,canUndoState:w,canRedoState:T}},fO={SCALE_DELTA:.05,CENTER_DELTA:20},Cp=e=>{if(e.length<2)return 0;const t=e[0],r=e[1];return Math.sqrt(Math.pow(r.clientX-t.clientX,2)+Math.pow(r.clientY-t.clientY,2))},kf=e=>{if(e.length<2)return null;const t=e[0],r=e[1];return{x:(t.clientX+r.clientX)/2,y:(t.clientY+r.clientY)/2}},U0e=(e,t)=>{if(e.length!==2||!t)return null;const r=Cp(e),n=Cp(t),s=kf(e),a=kf(t);if(n===0)return null;const i=Math.abs(r/n-1),o=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2));return i>fO.SCALE_DELTA?"zoom":o>fO.CENTER_DELTA?"pan":null},z0e=e=>{let t;return function(){const r=arguments,n=this;t&&cancelAnimationFrame(t),t=requestAnimationFrame(()=>{e.apply(n,r),t=null})}},gp=(e,t)=>{const r=t.getPointerPosition();return{x:(r.x-t.x())/t.scaleX(),y:(r.y-t.y())/t.scaleY()}},oc={PENCIL:"pencil",LINE:"line",RECTANGLE:"rectangle",CIRCLE:"circle",PAN:"pan"},B4={color:"#000000",thickness:2},hO=(e,t,r)=>({x:e.x,y:e.y,color:t||B4.color,thickness:r||B4.thickness}),W0e=(e,t,r,n,s)=>({type:e,startX:t.x,startY:t.y,endX:r.x,endY:r.y,color:n||B4.color,thickness:s||B4.thickness}),_H=(e,t,r,n,s,a)=>{const i=e-r,o=t-n,c=s-r,u=a-n,d=i*c+o*u,f=c*c+u*u;let h=-1;f!==0&&(h=d/f);let g,p;h<0?(g=r,p=n):h>1?(g=s,p=a):(g=r+h*c,p=n+h*u);const y=e-g,v=t-p;return Math.sqrt(y*y+v*v)},H0e=(e,t)=>{if(t.length===0)return[e];const r=t.sort((a,i)=>a.index-i.index),n=[];let s=0;for(const a of r)a.index>s&&n.push(e.slice(s,a.index+1)),s=a.index+1;return s<e.length&&n.push(e.slice(s)),n.filter(a=>a.length>0)},G0e=(e,t,r,n)=>{const s=[],a=r/2;for(let i=0;i<n.length-1;i++){const o=n[i],c=n[i+1],u=_H(e,t,o.x,o.y,c.x,c.y);u<=a&&s.push({index:i,point:{x:o.x,y:o.y},distance:u})}return s},V0e=(e,t,r,n)=>{const s=G0e(t,r,n,e);return s.length===0?[e]:H0e(e,s)},q0e=(e,t,r,n)=>{if(n.type==="rectangle"){const s=Math.min(n.startX,n.endX),a=Math.min(n.startY,n.endY),i=Math.abs(n.endX-n.startX),o=Math.abs(n.endY-n.startY);return e>=s&&e<=s+i&&t>=a&&t<=a+o}else if(n.type==="circle"){const s=(n.startX+n.endX)/2,a=(n.startY+n.endY)/2,i=Math.sqrt(Math.pow(n.endX-n.startX,2)+Math.pow(n.endY-n.startY,2))/2;return Math.sqrt(Math.pow(e-s,2)+Math.pow(t-a,2))<=i}return!1},mO=(e,t,r,n)=>{const s=[];for(const a of n)if(Array.isArray(a)){const i=V0e(a,e,t,r);s.push(...i)}else a.type==="line"?_H(e,t,a.startX,a.startY,a.endX,a.endY)>r/2&&s.push(a):(a.type==="rectangle"||a.type==="circle")&&(q0e(e,t,r,a)||s.push(a));return s},K0e=(e,t,r,n,s,a,i,o,c)=>{const[u,d]=_.useState({isActive:!1,type:null,lastDistance:null,lastCenter:null}),f=_.useCallback(A=>{if(A.evt.preventDefault(),A.evt.stopPropagation(),e.currentTool===oc.PAN)return;const P=A.target.getStage(),j=gp(A,P),F=hO(j,e.currentColor,e.currentThickness);e.currentTool===oc.PENCIL?t(R=>({...R,isDrawing:!0,currentLine:[F]})):[oc.LINE,oc.RECTANGLE,oc.CIRCLE].includes(e.currentTool)&&t(R=>({...R,isDrawing:!0,currentShape:W0e(e.currentTool,j,j,e.currentColor,e.currentThickness)}))},[e.currentTool,e.currentColor,e.currentThickness,t]),h=_.useCallback(A=>{const P=mO(A.x,A.y,e.eraserSize,r);n(P),s(P)},[e.eraserSize,r,n,s]),g=_.useCallback(A=>{o&&(a(),y("Undo",A))},[o,a]),p=_.useCallback(A=>{c&&(i(),y("Redo",A))},[c,i]),y=_.useCallback((A,P)=>{const j=P.target.getStage(),F=gp(P,j),R=new Konva.Circle({x:F.x,y:F.y,radius:20,stroke:"#4CAF50",strokeWidth:3,opacity:.8,listening:!1});j.add(R),R.to({scaleX:2,scaleY:2,opacity:0,duration:.3,onFinish:()=>{R.destroy()}})},[]),v=_.useCallback(A=>{if(A.evt.preventDefault(),A.evt.stopPropagation(),!e.isDrawing)return;const P=A.target.getStage(),j=gp(A,P),F=hO(j,e.currentColor,e.currentThickness);e.currentTool===oc.PENCIL?t(R=>({...R,currentLine:[...R.currentLine,F]})):e.currentShape&&t(R=>({...R,currentShape:{...R.currentShape,endX:j.x,endY:j.y}}))},[e.isDrawing,e.currentTool,e.currentColor,e.currentThickness,e.currentShape,t]),C=_.useCallback(A=>{A&&A.evt&&(A.evt.preventDefault(),A.evt.stopPropagation()),e.isDrawing&&(e.currentTool===oc.PENCIL&&e.currentLine.length>0?n(P=>[...P,e.currentLine]):e.currentShape&&n(P=>[...P,e.currentShape]),t(P=>({...P,isDrawing:!1,currentLine:[],currentShape:null})))},[e.isDrawing,e.currentTool,e.currentLine,e.currentShape,n,t]),S=_.useCallback(A=>{A.evt.preventDefault(),A.evt.stopPropagation();const P=A.evt.touches;if(P.length===2)d({isActive:!0,type:"pan",lastDistance:Cp(P),lastCenter:kf(P)});else if(P.length===1)if(e.currentTool===oc.ERASER){const j=A.target.getStage(),F=gp(A,j);h(F)}else e.currentTool===oc.UNDO?g(A):e.currentTool===oc.REDO?p(A):f(A)},[Cp,kf,f,e.currentTool,h,g,p]),w=_.useCallback(z0e(A=>{A.evt.preventDefault(),A.evt.stopPropagation();const P=A.evt.touches;if(P.length===2&&u.isActive){const j=U0e(P,u);if(j==="zoom"){const F=Cp(P),R=kf(P),L=F/u.lastDistance,V=Math.max(.25,Math.min(1,e.zoom*L));t(Z=>({...Z,zoom:V,position:{x:R.x-(R.x-Z.position.x)*(V/Z.zoom),y:R.y-(R.y-Z.position.y)*(V/Z.zoom)}}))}else if(j==="pan"){const F=kf(P),R=F.x-u.lastCenter.x,L=F.y-u.lastCenter.y;t(V=>({...V,position:{x:V.position.x+R,y:V.position.y+L}}))}d(F=>({...F,lastDistance:Cp(P),lastCenter:kf(P)}))}else if(P.length===1)if(e.currentTool===oc.ERASER){const j=A.target.getStage(),F=gp(A,j),R=mO(F.x,F.y,e.eraserSize,r);n(R)}else if(e.currentTool===oc.PAN){const j=kf(P),F=j.x-u.lastCenter.x,R=j.y-u.lastCenter.y;t(L=>({...L,position:{x:L.position.x+F,y:L.position.y+R}})),d(L=>({...L,lastCenter:j}))}else v(A)}),[u,e.zoom,t,v]),T=_.useCallback(A=>{w(A)},[w]),N=_.useCallback(A=>{A.evt.preventDefault(),A.evt.stopPropagation();const P=A.evt.touches;P.length===0?(C(A),d({isActive:!1,type:null,lastDistance:null,lastCenter:null})):P.length===1&&d(j=>({...j,isActive:!1}))},[C]);return{handleTouchStart:S,handleTouchMove:T,handleTouchEnd:N,handleEraserStart:h,handleUndoTouch:g,handleRedoTouch:p,showTouchFeedback:y}},Y0e=(e,t)=>{const[r,n]=_.useState(e.MIN),[s,a]=_.useState({x:0,y:0}),i=_.useCallback((h,g,p)=>{const y=Math.max(e.MIN,Math.min(e.MAX,h));if(g){const v=y/r,C={x:g.x-(g.x-s.x)*v,y:g.y-(g.y-s.y)*v};return{zoom:y,position:C}}else{const v=t.width*y,C=t.height*y,S={x:(p.width-v)/2,y:(p.height-C)/2};return{zoom:y,position:S}}},[r,s,e,t]),o=_.useCallback(()=>{const h=Math.min(r*(1+e.STEP),e.MAX);n(h)},[r,e]),c=_.useCallback(()=>{const h=Math.max(r/(1+e.STEP),e.MIN);n(h)},[r,e]),u=_.useCallback((h,g,p)=>{const y=i(h,g,p);n(y.zoom),a(y.position)},[i]),d=_.useCallback((h,g)=>{a(p=>({x:p.x+h,y:p.y+g}))},[]),f=_.useCallback(()=>{n(e.INITIAL),a({x:0,y:0})},[e.INITIAL]);return{zoom:r,setZoom:n,position:s,setPosition:a,handleZoomIn:o,handleZoomOut:c,handleZoomToPoint:u,handlePan:d,resetZoom:f}},X0e=e=>{const[t,r]=_.useState([]),[n,s]=_.useState(0),a=_.useCallback(f=>{if(console.log("parseDrawingData - input drawing:",f),console.log("parseDrawingData - drawing.answers:",f?.answers),!f?.answers)return console.log("parseDrawingData - no answers found, returning empty array"),[];try{if(typeof f.answers=="string"){console.log("parseDrawingData - parsing string answers");const h=JSON.parse(f.answers);return console.log("parseDrawingData - parsed string result:",h),h&&typeof h=="object"&&h.lines&&console.log("parseDrawingData - new format detected with lines and textBoxes"),h}if(f.answers&&typeof f.answers=="object"&&f.answers.lines)return console.log("parseDrawingData - answers is new format object"),f.answers;if(Array.isArray(f.answers)){if(console.log("parseDrawingData - answers is array"),f.answers.every(g=>typeof g=="string"))try{const g=f.answers.map(p=>{try{return JSON.parse(p)}catch{return p}});return console.log("parseDrawingData - parsed array elements"),g}catch{return console.log("parseDrawingData - failed to parse array elements, returning raw"),f.answers}return f.answers}return console.log("parseDrawingData - answers is neither string nor array, returning empty array"),[]}catch(h){return console.error("Error parsing drawing data:",h),[]}},[]),i=_.useCallback(f=>{if(console.log("processQuestions - input answers:",f),console.log("processQuestions - answers type:",typeof f),console.log("processQuestions - answers isArray:",Array.isArray(f)),f&&typeof f=="object"&&f.lines){console.log("processQuestions - new format detected with lines and textBoxes"),console.log("processQuestions - lines count:",f.lines?.length),console.log("processQuestions - textBoxes count:",f.textBoxes?.length);const g=o(f.lines);return console.log("processQuestions - canvas groups:",g),console.log("processQuestions - number of canvas groups:",g.length),g.map((p,y)=>(console.log(`processQuestions - canvas ${y} strokes:`,p),console.log(`processQuestions - canvas ${y} stroke count:`,p.length),{questionNumber:y+1,drawingData:p,textBoxes:f.textBoxes||[]}))}if(Array.isArray(f)&&f.every(g=>g&&typeof g=="object"&&g.lines))return console.log("processQuestions - array of {lines,textBoxes} detected"),f.map((g,p)=>({questionNumber:p+1,drawingData:g.lines||[],textBoxes:g.textBoxes||[]}));if(!Array.isArray(f))return console.log("processQuestions - answers is not array or object, returning empty array"),[];console.log("processQuestions - processing",f.length,"answers (old format)");const h=o(f);return console.log("processQuestions - canvas groups:",h),console.log("processQuestions - number of canvas groups:",h.length),h.map((g,p)=>(console.log(`processQuestions - canvas ${p} strokes:`,g),console.log(`processQuestions - canvas ${p} stroke count:`,g.length),{questionNumber:p+1,drawingData:g,textBoxes:[]}))},[]),o=_.useCallback(f=>{console.log("groupStrokesByCanvas - input answers:",f);const h=c(f);return console.log("groupStrokesByCanvas - using strategy:",h),h==="by_question_boundary"?u(f):h==="by_stroke_type"?d(f):[f]},[]),c=_.useCallback(f=>{console.log("determineGroupingStrategy - analyzing answers:",f);let h=0,g=0;return f.forEach(p=>{Array.isArray(p)?h++:typeof p=="object"&&g++}),console.log("determineGroupingStrategy - arrayCount:",h,"objectCount:",g),h>0&&g>0?"by_stroke_type":f.length>3?"by_question_boundary":"single_canvas"},[]),u=_.useCallback(f=>{console.log("groupByQuestionBoundary - grouping answers:",f);const h=[];let g=[];const p=Math.ceil(f.length/2);for(let y=0;y<f.length;y++)g.push(f[y]),(y+1)%p===0&&y<f.length-1&&(h.push([...g]),g=[]);return g.length>0&&h.push(g),console.log("groupByQuestionBoundary - result:",h),h},[]),d=_.useCallback(f=>{console.log("groupByStrokeType - grouping answers:",f);const h=[],g=[];f.forEach(y=>{Array.isArray(y)?h.push(y):typeof y=="object"&&g.push(y)});const p=[];return h.length>0&&p.push(h),g.length>0&&p.push(g),console.log("groupByStrokeType - result:",p),p},[]);return _.useEffect(()=>{if(e){console.log("useDataParsing - drawing object:",e),console.log("useDataParsing - drawing.answers:",e.answers),console.log("useDataParsing - drawing.answers type:",typeof e.answers),console.log("useDataParsing - drawing.answers length:",e.answers?.length);const f=a(e);console.log("useDataParsing - parsed answers:",f),console.log("useDataParsing - parsed answers type:",typeof f),console.log("useDataParsing - parsed answers length:",f?.length);const h=i(f);console.log("useDataParsing - processed questions:",h),console.log("useDataParsing - processed questions length:",h?.length),h.length>0&&(console.log("useDataParsing - first question drawingData:",h[0]?.drawingData),console.log("useDataParsing - first question drawingData length:",h[0]?.drawingData?.length)),r(h),s(0)}},[e,a,i]),{questionsData:t,setQuestionsData:r,currentQuestionIndex:n,setCurrentQuestionIndex:s,parseDrawingData:a,processQuestions:i}},gO={MIN:.25,INITIAL:1},J0e=(e,t)=>{const[r,n]=_.useState(!1),[s,a]=_.useState(null),i=_.useCallback(()=>{document.fullscreenElement||(a({zoom:e.zoom,position:{...e.position}}),document.documentElement.requestFullscreen().then(()=>{n(!0),t(c=>({...c,zoom:gO.MIN,position:{x:0,y:0},isFullscreen:!0}))}).catch(c=>{console.error("Error entering fullscreen:",c)}))},[e.zoom,e.position,t]),o=_.useCallback(()=>{document.fullscreenElement&&document.exitFullscreen().then(()=>{n(!1),s?(t(c=>({...c,zoom:s.zoom,position:s.position,isFullscreen:!1})),a(null)):t(c=>({...c,zoom:gO.INITIAL,position:{x:0,y:0},isFullscreen:!1}))}).catch(c=>{console.error("Error exiting fullscreen:",c)})},[s,t]);return{isFullscreen:r,enterFullscreen:i,exitFullscreen:o}},SH=_.forwardRef(({drawingData:e,textBoxes:t=[],drawingState:r,canvasSize:n,zoom:s,position:a,onTouchStart:i,onTouchMove:o,onTouchEnd:c,mousePosition:u,isMouseOverCanvas:d,isEraserDrawing:f},h)=>{const g=_.useRef(null),[p,y]=_.useState(.25),[v,C]=_.useState(null),[S,w]=_.useState({x:0,y:0}),[T,N]=_.useState(!1),A=_.useCallback(({x:B,y:W,size:D,visible:U,isDrawing:q})=>!U||!B||!W?null:l.jsx(Rf,{x:B,y:W,radius:D/2,stroke:iO.CURSOR_COLOR,strokeWidth:2,dash:[5,5],opacity:q?.8:iO.CURSOR_OPACITY,listening:!1,zIndex:1e3}),[]),P=_.useCallback(B=>{if(r.currentTool===Yh.ERASER){const W=B.target.getStage(),D=gp(B,W);w(D)}},[r.currentTool]),j=_.useCallback(()=>{r.currentTool===Yh.ERASER&&N(!0)},[r.currentTool]),F=_.useCallback(()=>{N(!1)},[]);_.useEffect(()=>{const B=h.current;if(B)return B.on("mousemove",P),B.on("mouseenter",j),B.on("mouseleave",F),()=>{B.off("mousemove",P),B.off("mouseenter",j),B.off("mouseleave",F)}},[P,j,F,h]),_.useEffect(()=>{const B=n.width??n.WIDTH,W=n.height??n.HEIGHT,D=()=>{const U=g.current;if(!U)return;const q=U.clientWidth||1,H=U.clientHeight||1,te=Math.abs(r.rotation%180)===90,Q=te?W:B,ae=te?B:W,ce=Math.min(q/(Q||1),H/(ae||1));y(Math.min(ce,1))};return D(),window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[n.width,n.height,n.WIDTH,n.HEIGHT,r.rotation]);const R=_.useMemo(()=>{const B=g.current;if(!B||!v)return 0;const W=B.clientWidth||1,D=B.clientHeight||1,U=Math.min(W/Math.max(v.width,1),D/Math.max(v.height,1));return Math.min(U,bH.MAX)},[v]),L=_.useMemo(()=>Math.max(s,p||1),[s,p]),V=_.useMemo(()=>{const B=n.width??n.WIDTH,W=n.height??n.HEIGHT;if(!g.current)return{x:0,y:0};const D=g.current.clientWidth||1,U=g.current.clientHeight||1,q=(D-B*L)/2,H=(U-W*L)/2;return s<=p?{x:q,y:H}:{x:a.x!==void 0?a.x:q,y:a.y!==void 0?a.y:H}},[a,s,p,L,n.width,n.height,v,R]);_.useEffect(()=>{if(!Array.isArray(e)||e.length===0){C(null);return}let B=1/0,W=1/0,D=-1/0,U=-1/0;const q=(ae,ce)=>{Number.isFinite(ae)&&Number.isFinite(ce)&&(ae<B&&(B=ae),ce<W&&(W=ce),ae>D&&(D=ae),ce>U&&(U=ce))};if(e.forEach(ae=>{if(Array.isArray(ae))ae.forEach(ce=>q(ce.x,ce.y));else if(ae&&typeof ae=="object"){if(ae.type==="line")q(ae.startX,ae.startY),q(ae.endX,ae.endY);else if(ae.type==="rectangle")q(ae.startX,ae.startY),q(ae.endX,ae.endY);else if(ae.type==="circle"){const ce=Math.sqrt(Math.pow(ae.endX-ae.startX,2)+Math.pow(ae.endY-ae.startY,2))/2,me=(ae.startX+ae.endX)/2,xe=(ae.startY+ae.endY)/2;q(me-ce,xe-ce),q(me+ce,xe+ce)}}}),!Number.isFinite(B)||!Number.isFinite(W)||!Number.isFinite(D)||!Number.isFinite(U)){C(null);return}const H=16,te=Math.max(1,D-B+H*2),Q=Math.max(1,U-W+H*2);C({minX:B-H,minY:W-H,width:te,height:Q})},[e]),_.useEffect(()=>{console.log("CanvasViewer - drawingData:",e),console.log("CanvasViewer - drawingData length:",e?.length),console.log("CanvasViewer - textBoxes:",t),console.log("CanvasViewer - textBoxes length:",t?.length),e&&e.length>0&&console.log("CanvasViewer - first item:",e[0]),t&&t.length>0&&console.log("CanvasViewer - first textBox:",t[0])},[e,t]),_.useEffect(()=>{const B=n.width??n.WIDTH,W=n.height??n.HEIGHT;console.log("CanvasViewer - canvas dimensions:",{width:B,height:W}),console.log("CanvasViewer - zoom:",s,"fitZoom:",p,"displayScale:",L),console.log("CanvasViewer - stagePosition:",V)},[n,s,p,L,V]);const Z=(B,W)=>{if(console.log(`CanvasViewer - rendering element ${W}:`,B),Array.isArray(B))return console.log(`CanvasViewer - rendering line with ${B.length} points`),l.jsx(Vi,{points:B.flatMap(D=>[D.x,D.y]),stroke:B[0]?.color||"#000000",strokeWidth:B[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round"},W);if(B.type==="line")return l.jsx(Vi,{points:[B.startX,B.startY,B.endX,B.endY],stroke:B.color,strokeWidth:B.thickness,lineCap:"round"},W);if(B.type==="rectangle"){const D=Math.abs(B.endX-B.startX),U=Math.abs(B.endY-B.startY),q=Math.min(B.startX,B.endX),H=Math.min(B.startY,B.endY);return l.jsx(Ti,{x:q,y:H,width:D,height:U,stroke:B.color,strokeWidth:B.thickness,fill:"transparent"},W)}else if(B.type==="circle"){const D=Math.sqrt(Math.pow(B.endX-B.startX,2)+Math.pow(B.endY-B.startY,2))/2,U=(B.startX+B.endX)/2,q=(B.startY+B.endY)/2;return l.jsx(Rf,{x:U,y:q,radius:D,stroke:B.color,strokeWidth:B.thickness,fill:"transparent"},W)}return null},Y=()=>{if(!r.isDrawing)return null;if(r.currentTool===Yh.PENCIL&&r.currentLine.length>0)return l.jsx(Vi,{points:r.currentLine.flatMap(B=>[B.x,B.y]),stroke:r.currentColor,strokeWidth:r.currentThickness,tension:.5,lineCap:"round",lineJoin:"round"});if(r.currentShape){const{type:B,startX:W,startY:D,endX:U,endY:q,color:H,thickness:te}=r.currentShape;if(B===Yh.LINE)return l.jsx(Vi,{points:[W,D,U,q],stroke:H,strokeWidth:te,lineCap:"round"});if(B===Yh.RECTANGLE){const Q=Math.abs(U-W),ae=Math.abs(q-D),ce=Math.min(W,U),me=Math.min(D,q);return l.jsx(Ti,{x:ce,y:me,width:Q,height:ae,stroke:H,strokeWidth:te,fill:"transparent"})}else if(B===Yh.CIRCLE){const Q=Math.sqrt(Math.pow(U-W,2)+Math.pow(q-D,2))/2,ae=(W+U)/2,ce=(D+q)/2;return l.jsx(Rf,{x:ae,y:ce,radius:Q,stroke:H,strokeWidth:te,fill:"transparent"})}}return null},re=r.isFullscreen?{position:"fixed",inset:0,width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",zIndex:60}:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"},ue={transform:`rotate(${r.rotation}deg)`,transformOrigin:"center center"},z=_.useCallback(B=>{B.preventDefault(),B.stopPropagation()},[]),X=_.useCallback(B=>{B.preventDefault(),B.stopPropagation()},[]),I=_.useCallback(B=>{B.preventDefault(),B.stopPropagation()},[]);return l.jsx("div",{style:{...re,touchAction:"none",WebkitTouchCallout:"none"},ref:g,className:"select-none",onTouchStart:z,onTouchMove:X,onTouchEnd:I,children:l.jsx("div",{style:{...ue,touchAction:"none",WebkitTouchCallout:"none"},className:"select-none",onTouchStart:z,onTouchMove:X,onTouchEnd:I,children:l.jsx(Cm,{ref:h,width:Math.max((n.width??n.WIDTH)||0,1536),height:Math.max((n.height??n.HEIGHT)||0,2048),scaleX:L,scaleY:L,x:V.x,y:V.y,onTouchStart:i,onTouchMove:o,onTouchEnd:c,children:l.jsxs(km,{children:[l.jsx(Ti,{x:0,y:0,width:Math.max((n.width??n.WIDTH)||0,1536),height:Math.max((n.height??n.HEIGHT)||0,2048),fill:"white"}),e.map((B,W)=>(console.log(`CanvasViewer - mapping item ${W}:`,B),Z(B,W))),t&&t.map((B,W)=>l.jsx(Ti,{x:B.x,y:B.y,width:B.width,height:B.height,fill:"#ffffff",stroke:"#d1d5db",strokeWidth:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1}},`textbox-${W}`)),t&&t.map((B,W)=>l.jsx(Hu,{x:B.x+8,y:B.y+8,width:B.width-16,height:B.height-16,text:B.text,fontSize:B.fontSize||14,fill:B.color||"#000000",wrap:"word",align:"left",verticalAlign:"top"},`text-${W}`)),Y(),r.currentTool===Yh.ERASER&&l.jsx(A,{x:S.x,y:S.y,size:r.eraserSize,visible:T,isDrawing:f})]})})})})});SH.displayName="CanvasViewer";function Q0e({containerRef:e,canvasSize:t,rotation:r=0}){const[n,s]=_.useState(1),[a,i]=_.useState({x:0,y:0}),o=_.useRef({width:1,height:1}),c=_.useRef(.01),u=_.useRef(0),d=_.useRef(!1),f=_.useCallback(()=>{const T=t?.width??t?.WIDTH??0,N=t?.height??t?.HEIGHT??0,A=Math.abs(r%180)===90;return{width:A?N:T,height:A?T:N}},[t,r]),h=_.useCallback(()=>{const T=e?.current;if(!T)return{width:1,height:1};const N=T.clientWidth||1,A=T.clientHeight||1;return o.current={width:N,height:A},{width:N,height:A}},[e]),g=_.useCallback(()=>{const{width:T,height:N}=o.current,{width:A,height:P}=f(),j=T/Math.max(A,1),F=N/Math.max(P,1);return Math.min(j,F,1)*.98},[f]),p=_.useCallback(T=>{const{width:N,height:A}=o.current,{width:P,height:j}=f(),F=Math.max(c.current,Math.min(T,1.5));let R=(N-P*F)/2,L=(A-j*F)/2;const V=N-P*F,Z=A-j*F;R=Math.min(Math.max(0,R),Math.max(0,V)),L=Math.min(Math.max(0,L),Math.max(0,Z));try{console.log("[Camera] centerAtScale",{targetScale:T,clampedScale:F,container:{containerW:N,containerH:A},canvas:{canvasW:P,canvasH:j},translate:{x:R,y:L},rotation:r})}catch{}i({x:R,y:L}),s(F)},[f]),y=_.useCallback(()=>{const{width:T,height:N}=h(),{width:A,height:P}=f(),j=g();let F=(T-A*j)/2,R=(N-P*j)/2;const L=T-A*j,V=N-P*j;F=Math.min(Math.max(0,F),Math.max(0,L)),R=Math.min(Math.max(0,R),Math.max(0,V));try{console.log("[Camera] fitCanvas",{scale:j,container:{containerW:T,containerH:N},canvas:{canvasW:A,canvasH:P},translate:{x:F,y:R},rotation:r})}catch{}s(j),i({x:F,y:R}),c.current=j,d.current=!1},[f,h,g]),v=_.useCallback(()=>{const{width:T,height:N}=h(),{width:A,height:P}=f(),j=(T-A)/2,F=(N-P)/2;s(1),i({x:j,y:F})},[f,h]),C=_.useCallback((T,N)=>{const{width:A,height:P}=o.current,{width:j,height:F}=f(),R=Math.max(c.current,Math.min(T,1.5));if(N&&Number.isFinite(N.x)&&Number.isFinite(N.y)){const L={x:(N.x-a.x)/n,y:(N.y-a.y)/n},V=N.x-L.x*R,Z=N.y-L.y*R;try{console.log("[Camera] zoomTo(pointer) ->",{from:n,to:R})}catch{}s(R),i({x:V,y:Z}),u.current=Date.now()+400,d.current=!0}else{let L=(A-j*R)/2,V=(P-F*R)/2;const Z=A-j*R,Y=P-F*R;L=Math.min(Math.max(0,L),Math.max(0,Z)),V=Math.min(Math.max(0,V),Math.max(0,Y));try{console.log("[Camera] zoomTo(center) ->",{from:n,to:R})}catch{}s(R),i({x:L,y:V}),u.current=Date.now()+400,d.current=!0}},[f,n,a]),S=_.useCallback((T,N)=>{const A=n*T,{width:P,height:j}=o.current,F={x:P/2,y:j/2};C(A,N||F)},[n,C]),w=_.useCallback((T,N)=>{i(A=>({x:A.x+T,y:A.y+N})),u.current=Date.now()+200,d.current=!0},[]);return _.useEffect(()=>{const T=e?.current;if(!T)return;const N=new ResizeObserver(()=>{h();const A=g();if(c.current=A,!(Date.now()<u.current)&&!d.current){try{console.log("[Camera] resize centerAtScale",{scale:n})}catch{}p(n)}});return N.observe(T),h(),()=>N.disconnect()},[e,h,g,p,n]),_.useEffect(()=>{d.current=!1,c.current=g(),p(n)},[r,t?.width,t?.height,t?.WIDTH,t?.HEIGHT,g,p,n]),_.useMemo(()=>({scale:n,translate:a,setScale:s,setTranslate:i,centerAtScale:p,fitCanvas:y,oneToOne:v,zoomTo:C,zoomByFactor:S,panBy:w}),[n,a,p,y,v,C,S,w])}const Ty=new Map,kH=_.forwardRef(({drawingData:e,textBoxes:t=[],canvasSize:r,rotation:n=0,onScaleChange:s,persistKey:a="viewer",onTextBoxEdit:i},o)=>{const c=_.useRef(null),u=_.useRef(null),d=Q0e({containerRef:c,canvasSize:r,rotation:n}),[f,h]=_.useState({width:1,height:1}),g=_.useRef(null),p=_.useRef(null),[y,v]=_.useState(null);_.useEffect(()=>{console.log("[ViewerCanvas] drawingData received:",e),console.log("[ViewerCanvas] drawingData length:",e?.length),e&&e.length>0&&console.log("[ViewerCanvas] First drawing element:",e[0]),console.log("[ViewerCanvas] textBoxes:",t),console.log("[ViewerCanvas] textBoxes length:",t?.length)},[e]),_.useEffect(()=>{typeof s=="function"&&s(d.scale);try{console.log("[ViewerCanvas] scale changed",{scale:d.scale})}catch{}if(a){const I=Ty.get(a)||{};Ty.set(a,{...I,scale:d.scale})}},[d.scale,s]),_.useEffect(()=>{if(a){const I=Ty.get(a)||{};Ty.set(a,{...I,translate:{x:d.translate.x,y:d.translate.y}})}},[a,d.translate.x,d.translate.y]),_.useImperativeHandle(o,()=>({zoomIn:I=>d.zoomByFactor(1.1,I),zoomOut:I=>d.zoomByFactor(1/1.1,I),fitCanvas:()=>d.fitCanvas(),oneToOne:()=>d.oneToOne(),getScale:()=>d.scale,getStage:()=>u.current,getPointerPosition:()=>u.current?.getPointerPosition?.(),exportPNGFullCanvas:()=>{const I=u.current;if(!I)return null;const B=r?.width??r?.WIDTH??1536,W=r?.height??r?.HEIGHT??2048,D={scaleX:I.scaleX(),scaleY:I.scaleY(),x:I.x(),y:I.y(),width:I.width(),height:I.height()},U=g.current,q=p.current,H=U?{x:U.x(),y:U.y(),scaleX:U.scaleX(),scaleY:U.scaleY()}:null,te=q?{x:q.x(),y:q.y(),rotation:q.rotation()}:null;try{return I.scale({x:1,y:1}),I.position({x:0,y:0}),I.size({width:B,height:W}),U&&(U.position({x:0,y:0}),U.scale({x:1,y:1})),q&&(q.position({x:0,y:0}),q.rotation(0)),I.batchDraw(),I.toDataURL({mimeType:"image/png",quality:1,pixelRatio:1,x:0,y:0,width:B,height:W})}finally{q&&te&&(q.position({x:te.x,y:te.y}),q.rotation(te.rotation)),U&&H&&(U.position({x:H.x,y:H.y}),U.scale({x:H.scaleX,y:H.scaleY})),I.scale({x:D.scaleX,y:D.scaleY}),I.position({x:D.x,y:D.y}),I.size({width:D.width,height:D.height}),I.batchDraw()}}}),[d]),_.useEffect(()=>{const I=c.current;if(!I)return;const B=()=>{h({width:I.clientWidth||1,height:I.clientHeight||1})};B();const W=new ResizeObserver(B);return W.observe(I),()=>W.disconnect()},[]),_.useEffect(()=>{if(!Array.isArray(e)||e.length===0){v(null);return}let I=1/0,B=1/0,W=-1/0,D=-1/0;const U=(Q,ae)=>{Number.isFinite(Q)&&Number.isFinite(ae)&&(Q<I&&(I=Q),ae<B&&(B=ae),Q>W&&(W=Q),ae>D&&(D=ae))};if(e.forEach(Q=>{if(Array.isArray(Q))Q.forEach(ae=>U(ae.x,ae.y));else if(Q&&typeof Q=="object"){if(Q.type==="line")U(Q.startX,Q.startY),U(Q.endX,Q.endY);else if(Q.type==="rectangle")U(Q.startX,Q.startY),U(Q.endX,Q.endY);else if(Q.type==="circle"){const ae=Math.hypot(Q.endX-Q.startX,Q.endY-Q.startY)/2,ce=(Q.startX+Q.endX)/2,me=(Q.startY+Q.endY)/2;U(ce-ae,me-ae),U(ce+ae,me+ae)}}}),!Number.isFinite(I)||!Number.isFinite(B)||!Number.isFinite(W)||!Number.isFinite(D)){v(null);return}const q=16,H=Math.max(1,W-I+q*2),te=Math.max(1,D-B+q*2);v({minX:I-q,minY:B-q,width:H,height:te,centerX:I-q+H/2,centerY:B-q+te/2})},[e]);const C=_.useMemo(()=>{if(!y)return{scale:1,x:0,y:0};const I=r?.width??r?.WIDTH??1536,B=r?.height??r?.HEIGHT??2048,W=Math.min(I/Math.max(1,y.width),B/Math.max(1,y.height),1),D=y.width*W,U=y.height*W,q=(I-D)/2,H=(B-U)/2,te=q-y.minX*W,Q=H-y.minY*W;return{scale:W,x:te,y:Q}},[y,r?.width,r?.height,r?.WIDTH,r?.HEIGHT]),S=_.useRef(!1);_.useEffect(()=>{if(S.current)return;const I=a?Ty.get(a):null;I&&Number.isFinite(I.scale)&&I.translate&&Number.isFinite(I.translate.x)&&Number.isFinite(I.translate.y)?(d.setScale(I.scale),d.setTranslate(I.translate)):d.fitCanvas(),S.current=!0},[a,d]),_.useEffect(()=>{try{console.log("[ViewerCanvas] rotation changed",{rotation:n,scale:d.scale,translate:d.translate})}catch{}d.fitCanvas()},[n]),_.useEffect(()=>{d.centerAtScale(d.scale)},[n]);const w=I=>{I.evt.preventDefault();const B=u.current;if(!B)return;const W=B.getPointerPosition(),D=Math.pow(1.0015,-I.evt.deltaY);d.zoomByFactor(D,W)},T=_.useRef(!1),N=_.useRef({x:0,y:0}),A=()=>{const I=c.current;if(!I)return 1;const B=I.clientWidth||1,W=I.clientHeight||1,D=r?.width??r?.WIDTH??1,U=r?.height??r?.HEIGHT??1,q=Math.abs(n%180)===90,H=q?U:D,te=q?D:U,Q=Math.min(B/H,W/te);return Math.min(Q,1)},P=I=>{const B=A();d.scale<=B||(T.current=!0,N.current={x:I.evt.clientX,y:I.evt.clientY})},j=I=>{if(!T.current)return;const B=I.evt.clientX-N.current.x,W=I.evt.clientY-N.current.y;N.current={x:I.evt.clientX,y:I.evt.clientY},d.panBy(B,W)},F=()=>{T.current=!1},R=1536,L=2048,V=(I,B)=>{if(console.log(`[ViewerCanvas] Rendering drawing element ${B}:`,I),Array.isArray(I))return console.log(`[ViewerCanvas] Array item with ${I.length} points:`,I.slice(0,3)),l.jsx(Vi,{points:I.flatMap(W=>[W.x,W.y]),stroke:I[0]?.color||"#000000",strokeWidth:I[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round"},B);if(I?.type==="line")return l.jsx(Vi,{points:[I.startX,I.startY,I.endX,I.endY],stroke:I.color,strokeWidth:I.thickness,lineCap:"round"},B);if(I?.type==="rectangle"){const W=Math.abs(I.endX-I.startX),D=Math.abs(I.endY-I.startY),U=Math.min(I.startX,I.endX),q=Math.min(I.startY,I.endY);return l.jsx(Ti,{x:U,y:q,width:W,height:D,stroke:I.color,strokeWidth:I.thickness,fill:"transparent"},B)}else if(I?.type==="circle"){const W=Math.sqrt(Math.pow(I.endX-I.startX,2)+Math.pow(I.endY-I.startY,2))/2,D=(I.startX+I.endX)/2,U=(I.startY+I.endY)/2;return l.jsx(Rf,{x:D,y:U,radius:W,stroke:I.color,strokeWidth:I.thickness,fill:"transparent"},B)}return null},Z=_.useRef(new Map),Y=_.useRef(null),re=_.useRef({x:0,y:0}),ue=_.useCallback(I=>{const B=c.current;B&&(B.setPointerCapture?.(I.pointerId),Z.current.set(I.pointerId,{x:I.clientX,y:I.clientY}),N.current={x:I.clientX,y:I.clientY})},[]),z=_.useCallback(I=>{const B=Z.current;if(B.has(I.pointerId)){if(B.set(I.pointerId,{x:I.clientX,y:I.clientY}),B.size===2){const W=Array.from(B.values()),D=W[1].x-W[0].x,U=W[1].y-W[0].y,q=Math.hypot(D,U),H={x:(W[0].x+W[1].x)/2,y:(W[0].y+W[1].y)/2},te=u.current,Q=te&&te.getPointerPosition()||H;if(Y.current!=null){const ae=q/Math.max(1,Y.current);d.zoomByFactor(ae,Q)}Y.current=q,re.current=Q}else if(B.size===1){const W=A();if(d.scale<=W)return;const D=I.clientX-N.current.x,U=I.clientY-N.current.y;N.current={x:I.clientX,y:I.clientY},d.panBy(D,U)}}},[]),X=_.useCallback(I=>{const B=c.current;B&&(B.releasePointerCapture?.(I.pointerId),Z.current.delete(I.pointerId),Z.current.size<2&&(Y.current=null),T.current=!1)},[]);return l.jsx("div",{ref:c,style:{width:"100%",height:"100%",display:"block",backgroundColor:"transparent",touchAction:"none",WebkitTouchCallout:"none"},className:"select-none",onPointerDown:ue,onPointerMove:z,onPointerUp:X,children:l.jsx(Cm,{ref:u,width:f.width,height:f.height,onWheel:w,onMouseDown:P,onMouseMove:j,onMouseUp:F,onMouseLeave:F,children:l.jsx(km,{children:l.jsx(au,{ref:g,x:d.translate.x,y:d.translate.y,scaleX:d.scale,scaleY:d.scale,children:(()=>{const I=(n%360+360)%360;let B=0,W=0;I===90?B=L:I===180?(B=R,W=L):I===270&&(W=R);try{console.log("[ViewerCanvas] rotatedGroup offset",{rotation:n,norm:I,tx:B,ty:W,canvasW:R,canvasH:L})}catch{}return l.jsxs(au,{ref:p,x:B,y:W,rotation:n,children:[l.jsx(Ti,{x:0,y:0,width:R,height:L,fill:"white"}),l.jsxs(au,{x:C.x,y:C.y,scaleX:C.scale,scaleY:C.scale,children:[Array.isArray(e)?(console.log("[ViewerCanvas] Rendering",e.length,"drawing elements"),e.map((D,U)=>V(D,U))):null,Array.isArray(t)&&t.map((D,U)=>l.jsxs(au,{x:D.x,y:D.y,children:[l.jsx(Ti,{width:D.width,height:D.height,fill:"#ffffff",stroke:"#d1d5db",strokeWidth:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1}}),l.jsx(Hu,{text:D.text,x:8,y:8,width:Math.max(0,(D.width||0)-16),height:Math.max(0,(D.height||0)-16),fontSize:D.fontSize||14,fill:D.color||"#000000",wrap:"word",align:"left",verticalAlign:"top"})]},`tb-${U}`))]})]})})()})})})})});kH.displayName="ViewerCanvas";const Z0e=({zoom:e,onZoomIn:t,onZoomOut:r,onRotate:n,onDownload:s,onFullscreen:a,isFullscreen:i})=>l.jsxs("div",{className:"absolute top-4 right-4 flex flex-col space-y-2 items-center justify-center",children:[l.jsx(ot,{onClick:t,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Zoom In",children:l.jsx(P0e,{className:"w-4 h-4 mx-auto my-auto"})}),l.jsx(ot,{onClick:r,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Zoom Out",children:l.jsx(M0e,{className:"w-4 h-4 mx-auto my-auto"})}),l.jsx(ot,{onClick:n,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Rotate",children:l.jsx(N0e,{className:"w-4 h-4 mx-auto my-auto"})}),l.jsx(ot,{onClick:s,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Download",children:l.jsx(k0e,{className:"w-4 h-4 mx-auto my-auto"})}),l.jsx(ot,{onClick:a,variant:"secondary",size:"icon",className:"w-10 h-10",title:i?"Exit Fullscreen":"Enter Fullscreen",children:i?l.jsx(vH,{className:"w-4 h-4 mx-auto my-auto"}):l.jsx(T0e,{className:"w-4 h-4 mx-auto my-auto"})})]}),efe=({currentQuestion:e,totalQuestions:t,onPrevious:r,onNext:n,drawingDataLength:s})=>t<=1?null:l.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(ot,{onClick:r,disabled:e===0,variant:"outline",size:"sm",children:"Previous"}),l.jsxs("span",{className:"text-sm text-gray-600",children:["Question ",e+1," of ",t]}),l.jsx(ot,{onClick:n,disabled:e===t-1,variant:"outline",size:"sm",children:"Next"})]}),l.jsxs("div",{className:"text-sm text-gray-500",children:[s," lines"]})]})}),CH=({drawing:e,isOpen:t,onClose:r,onScoreChange:n,onMaxScoreChange:s,isTeacherView:a=!1,onSaveScore:i})=>{const{drawingState:o,setDrawingState:c,drawingData:u,setDrawingData:d,textBoxes:f,setTextBoxes:h,saveToHistoryState:g,undo:p,redo:y,canUndoState:v,canRedoState:C}=$0e(),{questionsData:S,currentQuestionIndex:w,setCurrentQuestionIndex:T}=X0e(e),{zoom:N,position:A,handleZoomIn:P,handleZoomOut:j}=Y0e(bH,Qc),{isFullscreen:F,enterFullscreen:R,exitFullscreen:L}=J0e(o,c),{handleTouchStart:V,handleTouchMove:Z,handleTouchEnd:Y}=K0e(o,c,u,d,g,p,y,v,C),re=_.useRef(null),ue=_.useRef(null),[z,X]=_.useState(1),[I,B]=_.useState(""),[W,D]=_.useState("");_.useEffect(()=>{if(console.log("DrawingModal - questionsData:",S),console.log("DrawingModal - currentQuestionIndex:",w),S.length>0){const me=S[w]?.drawingData||[],xe=S[w]?.textBoxes||[];console.log("DrawingModal - setting drawingData:",me),console.log("DrawingModal - setting textBoxes:",xe),d(me),h(xe)}},[S,w,d,h]),_.useEffect(()=>{t&&e&&(B((Number.isFinite(e.score)?e.score:0).toString()),D("10"))},[t,e]);const U=()=>{w>0&&T(w-1)},q=()=>{w<S.length-1&&T(w+1)},H=()=>{v&&p()},te=()=>{C&&y()};_.useEffect(()=>{const me=xe=>{(xe.ctrlKey||xe.metaKey)&&(xe.key==="z"&&!xe.shiftKey?(xe.preventDefault(),H()):(xe.key==="y"||xe.key==="z"&&xe.shiftKey)&&(xe.preventDefault(),te()))};return document.addEventListener("keydown",me),()=>document.removeEventListener("keydown",me)},[H,te]);const Q=()=>{c(me=>({...me,rotation:(me.rotation+90)%360}))},ae=()=>{if(a&&ue.current){const De=ue.current.exportPNGFullCanvas();if(!De)return;const He=document.createElement("a");He.href=De,He.download=`drawing-${e?.name||"student"}-${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(He),He.click(),document.body.removeChild(He);return}const me=re.current;if(!me)return;const xe=me.toDataURL({mimeType:"image/png",quality:1,pixelRatio:1,x:0,y:0,width:Qc.WIDTH,height:Qc.HEIGHT}),se=document.createElement("a");se.href=xe,se.download=`drawing-${e?.name||"student"}-${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(se),se.click(),document.body.removeChild(se)},ce=async()=>{if(!a)return r();const me=parseInt(I,10),xe=10;Number.isFinite(me)&&(typeof i=="function"?await i({resultId:e.id,score:Math.max(0,Math.min(10,me)),maxScore:xe}):(n&&n(e.id,me),s&&s(e.id,xe))),r()};return!t||!e?null:l.jsx(Uo,{children:l.jsx(ht.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:l.jsxs(ht.div,{className:"bg-white rounded-lg shadow-xl max-w-4xl h-[90vh] w-full mx-4 flex flex-col select-none",style:{touchAction:"none",WebkitTouchCallout:"none"},initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:me=>me.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Drawing Submission"}),l.jsxs("p",{className:"text-sm text-gray-600",children:[e.name," ",e.surname," - ",e.test_name]})]}),l.jsx(ot,{onClick:r,variant:"ghost",size:"icon",className:"text-gray-400 hover:text-gray-600",children:l.jsx(vH,{className:"w-5 h-5"})})]}),S.length>1&&l.jsx(efe,{currentQuestion:w,totalQuestions:S.length,onPrevious:U,onNext:q,drawingDataLength:S[w]?.drawingData?.length||0}),l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[l.jsxs("div",{className:"flex-1 min-h-0 relative overflow-hidden bg-gray-100 p-0 sm:p-4 select-none",style:{touchAction:"none",WebkitTouchCallout:"none"},children:[a?l.jsx(kH,{ref:ue,drawingData:u,textBoxes:f,canvasSize:{width:Qc.WIDTH,height:Qc.HEIGHT,WIDTH:Qc.WIDTH,HEIGHT:Qc.HEIGHT},rotation:o.rotation,onScaleChange:X}):l.jsx(SH,{ref:re,drawingData:u,textBoxes:f,drawingState:o,canvasSize:{width:Qc.WIDTH,height:Qc.HEIGHT,WIDTH:Qc.WIDTH,HEIGHT:Qc.HEIGHT},zoom:N,position:A,onTouchStart:V,onTouchMove:Z,onTouchEnd:Y,mousePosition:{x:0,y:0},isMouseOverCanvas:!1,isEraserDrawing:!1}),l.jsx(Z0e,{zoom:a?z:N,onZoomIn:()=>{if(a&&ue.current){try{console.log("[ZoomButton] ZoomIn click (teacher)",{before:ue.current.getScale?.()})}catch{}ue.current.zoomIn(void 0),setTimeout(()=>{try{console.log("[ZoomButton] ZoomIn after",{after:ue.current.getScale?.()})}catch{}},0)}else P()},onZoomOut:()=>{if(a&&ue.current){try{console.log("[ZoomButton] ZoomOut click (teacher)",{before:ue.current.getScale?.()})}catch{}ue.current.zoomOut(void 0),setTimeout(()=>{try{console.log("[ZoomButton] ZoomOut after",{after:ue.current.getScale?.()})}catch{}},0)}else j()},onRotate:Q,onDownload:ae,onFullscreen:F?L:R,isFullscreen:F}),l.jsxs("div",{className:"absolute bottom-4 left-4 bg-gray-800 bg-opacity-70 text-white px-3 py-1 rounded-full text-sm",children:[Math.round((a?z:N)*100),"%"]})]}),a&&l.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Score:"}),l.jsx("input",{type:"number",min:"0",max:10,value:I,onChange:me=>B(me.target.value),className:"w-20 px-3 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max:"}),l.jsx("input",{type:"number",value:10,disabled:!0,className:"w-20 px-3 py-1 text-sm border border-gray-300 rounded bg-gray-100"})]}),l.jsx(ot,{onClick:ce,variant:"primary",size:"sm",children:"Save"})]})})]})]})})})},TH=({testType:e,testId:t,studentAnswers:r,onBackToCabinet:n,compact:s=!1,showAll:a=!1,onToggleShowAll:i,maxInitial:o=3})=>{const c=Ko(),{user:u,isAuthenticated:d}=Is(),{testResults:f,loadTestResults:h}=C2(),{theme:g,isCyberpunk:p,themeClasses:y}=Da(),v=Oa(g);_.useEffect(()=>{},[g,p]);const[C,S]=_.useState(!0),[w,T]=_.useState(""),[N,A]=_.useState([]),[P,j]=_.useState([]),[F,R]=_.useState(null),[L,V]=_.useState([]),[Z,Y]=_.useState(0),[re,ue]=_.useState(0),[z,X]=_.useState(!1),[I,B]=_.useState(null),W=_.useCallback(xe=>{const se=xe.best_retest_score||xe.score,De=xe.best_retest_max_score||xe.max_score,He=Math.round(se/De*100);return{score:se,maxScore:De,percentage:He}},[]);_.useEffect(()=>{D()},[e,t]),_.useEffect(()=>{!e&&!t&&(f&&f.results?(ke.debug(" Using cached test results from TestContext"),j(f.results),S(!1)):q())},[e,t,f]);const D=_.useCallback(async()=>{ke.debug(" Initializing Student Results...");try{if(S(!0),T(""),!d||!u){ke.debug(" User not authenticated"),T("User not authenticated");return}if(u.role!==$o.STUDENT){ke.error(" Invalid user role for student results:",u.role),T("Access denied. Student role required.");return}ke.debug(" Loading test results..."),await h(u?.student_id||u?.id||""),e&&t&&r&&(ke.debug(" Loading specific test results..."),await U(e,t,r)),ke.debug(" Student Results initialization complete!")}catch(xe){ke.error(" Error initializing student results:",xe),T("Failed to initialize student results")}finally{S(!1)}},[d,u,e,t,r,h]),U=_.useCallback(async(xe,se,De)=>{ke.debug(" Loading specific test results:",xe,se);try{const He=await Cn.getTestInfo(xe,se);ke.debug(" Test info loaded:",He),R(He);const rt=await Cn.getTestQuestions(xe,se);ke.debug(" Test questions loaded:",rt),V(rt);const _t=$f(rt,De,xe).score,Ke=rt.length>0?Math.round(_t/rt.length*100):0;Y(_t),ue(Ke),ke.debug(" Test results calculated:",{score:_t,percentage:Ke})}catch(He){throw ke.error(" Error loading specific test results:",He),He}},[]),q=_.useCallback(async(xe=0)=>{ke.debug(" Loading all student results using existing test results API...",xe>0?`(retry ${xe})`:"");try{if(!(u?.student_id||u?.sub))throw new Error("Student ID not found");const De=await Cn.getStudentTestResults();if(De.success){ke.debug(" All student results loaded:",De.results.length,"results");const He=De.results.map(rt=>({...rt,caught_cheating:rt.caught_cheating||!1,visibility_change_times:rt.visibility_change_times||0}));j(He),B(new Date),De.results.length===0&&xe===0&&(ke.debug(" No results found, retrying in 2 seconds..."),setTimeout(()=>{q(1)},2e3))}else throw new Error(De.error||"Failed to load student results")}catch(se){ke.error(" Error loading all student results:",se),T(se.message)}},[u]),H=_.useCallback(xe=>({"Listening and Speaking":"L&S","Reading and Writing":"R&W","English for Career":"Eng for Career","Science Fundamental":"Science F","Science Supplementary":"Science S","Math Fundamental":"Math F","Math Supplementary":"Math S","English for Communication":"Eng for Comm"})[xe]||xe,[]),te=_.useCallback(xe=>{if(!xe||xe.length===0)return l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:p?"":"text-gray-500",style:p?{...v.textCyan,fontFamily:"monospace"}:{},children:p?"NO RESULTS AVAILABLE":"No results available"})});const se=a?xe:xe.slice(0,o);return l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:`w-full divide-y border-2 ${p?"divide-cyan-400 border-cyan-400":"divide-gray-200"}`,style:p?{backgroundColor:he.black,borderColor:he.cyan}:{},children:[l.jsx("thead",{className:p?"":"bg-gray-50",style:p?{backgroundColor:he.black,borderBottom:`2px solid ${he.cyan}`}:{},children:l.jsxs("tr",{children:[l.jsx("th",{className:`px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium uppercase tracking-wider ${p?"":"text-gray-500"}`,style:p?{...v.textCyan,fontFamily:"monospace"}:{},children:p?"SUBJECT":"Subject"}),l.jsx("th",{className:`px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium uppercase tracking-wider ${p?"":"text-gray-500"}`,style:p?{...v.textCyan,fontFamily:"monospace"}:{},children:p?"TEACHER":"Teacher"}),l.jsx("th",{className:`px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium uppercase tracking-wider ${p?"":"text-gray-500"}`,style:p?{...v.textCyan,fontFamily:"monospace"}:{},children:p?"TEST NAME":"Test Name"}),l.jsx("th",{className:`px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium uppercase tracking-wider ${p?"":"text-gray-500"}`,style:p?{...v.textCyan,fontFamily:"monospace"}:{},children:p?"RESULT":"Result"}),l.jsx("th",{className:`hidden sm:table-cell px-2 sm:px-4 lg:px-6 py-2 sm:py-3 text-left text-xs font-medium uppercase tracking-wider ${p?"":"text-gray-500"}`,style:p?{...v.textCyan,fontFamily:"monospace"}:{},children:p?"DATE":"Date"})]})}),l.jsx("tbody",{className:`divide-y ${p?"divide-cyan-400":"bg-white divide-gray-200"}`,style:p?{backgroundColor:he.black}:{},children:se.map((De,He)=>l.jsxs("tr",{className:p?"border-b border-cyan-400":"hover:bg-gray-50",style:p?{backgroundColor:he.black,borderBottomColor:he.cyan}:{},children:[l.jsx("td",{className:`px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs font-medium ${p?"":"text-gray-900"}`,style:p?{...v.textCyan,fontFamily:"monospace"}:{},children:l.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs border ${p?"border":"bg-blue-100 text-blue-800"}`,style:p?{backgroundColor:he.black,borderColor:he.yellow,color:he.yellow,fontFamily:"monospace",...v.textShadowYellow}:{},children:H(De.subject)})}),l.jsx("td",{className:`px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs truncate max-w-12 sm:max-w-none ${p?"":"text-gray-500"}`,style:p?{color:he.cyan,fontFamily:"monospace"}:{},children:De.teacher_name}),l.jsx("td",{className:`px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs truncate max-w-16 sm:max-w-none ${p?"":"text-gray-500"}`,style:p?{...v.textCyan,fontFamily:"monospace"}:{},children:p?De.test_name.toUpperCase():De.test_name}),l.jsx("td",{className:`px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-left ${p?"":"text-gray-500"}`,style:p?{color:he.cyan,fontFamily:"monospace"}:{},children:l.jsx("div",{className:"flex flex-col items-start space-y-1",children:De.test_type==="drawing"?De.score!==null?l.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold border ${p?"border":""}`,style:(()=>{const{score:rt,maxScore:_t,percentage:Ke}=W(De);if(p){const tt=Ke>=80?he.green:Ke>=60?he.yellow:he.red;return{backgroundColor:he.black,borderColor:tt,color:tt,fontFamily:"monospace",...Ke>=80?v.textShadowGreen:Ke>=60?v.textShadowYellow:v.textShadowRed}}return Ke>=80?{}:Ke>=60?{}:{}})(),children:(()=>{const{score:rt,maxScore:_t,percentage:Ke}=W(De);return`${rt}/${_t} (${Ke}%)`})()}):l.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold border ${p?"border":"bg-gray-100 text-gray-800"}`,style:p?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",...v.textShadow}:{},children:p?"PENDING REVIEW":"Pending Review"}):De.test_type==="speaking"?De.score!==null?l.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold border ${p?"border":""}`,style:(()=>{const{score:rt,maxScore:_t,percentage:Ke}=W(De);if(p){const tt=Ke>=80?he.cyan:he.red;return{backgroundColor:he.black,borderColor:tt,color:tt,fontFamily:"monospace",...Ke>=80?v.textShadow:v.textShadowRed}}return{}})(),children:(()=>{const{score:rt,maxScore:_t,percentage:Ke}=W(De);return`${rt}/${_t} (${Ke}%)`})()}):l.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold border ${p?"border":"bg-gray-100 text-gray-800"}`,style:p?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",...v.textShadow}:{},children:p?"PENDING REVIEW":"Pending Review"}):l.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold border ${p?"border":""}`,style:(()=>{const{score:rt,maxScore:_t,percentage:Ke}=W(De);if(p){const tt=Ke>=80?he.cyan:he.red;return{backgroundColor:he.black,borderColor:tt,color:tt,fontFamily:"monospace",...Ke>=80?v.textShadow:v.textShadowRed}}return Ke>=80?{}:Ke>=60?{}:{}})(),children:(()=>{const{score:rt,maxScore:_t,percentage:Ke}=W(De);return`${rt}/${_t} (${Ke}%)`})()})})}),l.jsx("td",{className:`hidden sm:table-cell px-2 sm:px-4 lg:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm ${p?"":"text-gray-500"}`,style:p?{color:he.cyan,fontFamily:"monospace"}:{},children:new Date(De.submitted_at).toLocaleDateString()})]},He))})]}),xe.length>o&&i&&l.jsx("div",{className:"text-center pt-4",children:l.jsx("button",{onClick:i,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:a?"Show Less":`Show ${xe.length-o} More`})})]})},[H,a,o,i,p,v,g]),Q=_.useCallback((xe,se)=>{if(ke.debug(" formatAnswer called with:",{answer:xe,testType:se,answerType:typeof xe}),!xe)return"No answer";switch(se){case"true_false":const De=typeof xe=="boolean"?xe:xe==="true";return ke.debug(" Boolean answer processed:",De),De?"True":"False";case"multiple_choice":return xe.toUpperCase();case"input":return xe;case"word_matching":return typeof xe=="object"?Object.entries(xe).map(([He,rt])=>`${He}  ${rt}`).join(", "):xe;case"drawing":return"Drawing submitted";default:return xe}},[]),ae=_.useCallback(()=>!F||!L||!r?null:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:`rounded-lg shadow p-6 border ${p?Bt(0).className:"bg-white"}`,style:p?{...Bt(0).style,...v.glowRed}:{},children:[l.jsx("h2",{className:`text-2xl font-bold mb-4 ${p?"":"text-gray-900"}`,style:p?{...v.textCyan,fontFamily:"monospace"}:{},children:p?`TEST RESULTS: ${(F.test_name||F.title||"TEST").toUpperCase()}`:`Test Results: ${F.test_name||F.title||"Test"}`}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`text-3xl font-bold ${p?"text-cyan-400":"text-blue-600"}`,style:p?v.textShadow:{},children:Z}),l.jsx("p",{className:`text-sm ${p?y.textSecondary:"text-gray-500"}`,children:"Correct Answers"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`text-3xl font-bold ${p?y.text:"text-gray-900"}`,style:p?v.textShadow:{},children:L.length}),l.jsx("p",{className:`text-sm ${p?y.textSecondary:"text-gray-500"}`,children:"Total Questions"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:`text-3xl font-bold ${p?re>=80?"text-green-400":re>=60?"text-yellow-400":"text-red-400":re>=80?"text-green-600":re>=60?"text-yellow-600":"text-red-600"}`,style:p?v.textShadow:{},children:[re,"%"]}),l.jsx("p",{className:`text-sm ${p?y.textSecondary:"text-gray-500"}`,children:"Score"})]})]})]}),l.jsxs("div",{className:`rounded-lg shadow p-6 border ${p?Bt(1).className:"bg-white"}`,style:p?{...Bt(1).style,...v.glowYellow}:{},children:[l.jsx("h3",{className:`text-lg font-semibold mb-4 ${p?"":"text-gray-900"}`,style:p?{...v.textCyan,fontFamily:"monospace"}:{},children:p?"QUESTIONS REVIEW":"Questions Review"}),l.jsx("div",{className:"space-y-4",children:L.map((xe,se)=>{const De=r[se],He=Fv(xe,e),rt=Xp(xe,De,e);return l.jsxs("div",{className:`border rounded-lg p-4 ${p?"border":rt?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,style:p?{backgroundColor:he.black,borderColor:rt?he.green:he.red,boxShadow:rt?v.glowGreen.boxShadow:v.glowRed.boxShadow}:{},children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("h4",{className:`font-medium ${p?"":"text-gray-900"}`,style:p?{...v.textCyan,fontFamily:"monospace"}:{},children:p?`QUESTION ${se+1}`:`Question ${se+1}`}),l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium border ${p?"border":""}`,style:p?{backgroundColor:he.black,borderColor:rt?he.green:he.red,color:rt?he.green:he.red,fontFamily:"monospace",...rt?v.textShadowGreen:v.textShadowRed}:{},children:p?rt?"CORRECT":"INCORRECT":rt?"Correct":"Incorrect"})]}),l.jsx("p",{className:`mb-3 ${p?y.text:"text-gray-700"}`,children:xe.question}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("span",{className:`text-sm font-medium ${p?y.textSecondary:"text-gray-500"}`,children:p?"YOUR ANSWER:":"Your Answer:"}),l.jsx("p",{className:`text-sm ${p?y.text:"text-gray-900"}`,children:Q(De,e)})]}),l.jsxs("div",{children:[l.jsx("span",{className:`text-sm font-medium ${p?y.textSecondary:"text-gray-500"}`,children:p?"CORRECT ANSWER:":"Correct Answer:"}),l.jsx("p",{className:`text-sm ${p?y.text:"text-gray-900"}`,children:Q(He,e)})]})]})]},se)})})]})]}),[F,L,r,e,Z,re,Fv,Xp,Q]),ce=_.useCallback(()=>{if(!P||P.length===0)return l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:p?y.textSecondary:"text-gray-500",children:p?"NO TEST RESULTS AVAILABLE YET.":"No test results available yet."})});const xe={};return P.forEach(se=>{const De=se.subject||"Unknown Subject";xe[De]||(xe[De]=[]),xe[De].push(se)}),l.jsx("div",{className:"space-y-6",children:Object.entries(xe).map(([se,De],He)=>l.jsxs("div",{className:`rounded-lg shadow border ${p?Bt(He).className:"bg-white"}`,style:p?{...Bt(He).style,boxShadow:He%4===0?v.glowRed.boxShadow:He%4===1?v.glowYellow.boxShadow:He%4===2?v.glowPurple.boxShadow:v.glow.boxShadow}:{},children:[l.jsx("div",{className:`px-6 py-4 border-b ${p?"border":"border-gray-200"}`,style:p?{borderBottomColor:he.cyan}:{},children:l.jsx("h3",{className:`text-lg font-semibold ${p?y.text:"text-gray-900"}`,style:p?v.textShadow:{},children:p?se.toUpperCase():se})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:`min-w-full divide-y border-2 ${p?"divide-cyan-400 border-cyan-400":"divide-gray-200"}`,style:p?{backgroundColor:he.black,borderColor:he.cyan}:{},children:[l.jsx("thead",{className:p?"":"bg-gray-50",style:p?{backgroundColor:he.black,borderBottom:`2px solid ${he.cyan}`}:{},children:l.jsxs("tr",{children:[l.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${p?"":"text-gray-500"}`,style:p?{...v.textCyan,fontFamily:"monospace"}:{},children:p?"TEST NAME":"Test Name"}),l.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${p?"":"text-gray-500"}`,style:p?{...v.textCyan,fontFamily:"monospace"}:{},children:p?"TEACHER":"Teacher"}),l.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${p?"":"text-gray-500"}`,style:p?{...v.textCyan,fontFamily:"monospace"}:{},children:p?"SCORE":"Score"}),l.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${p?"":"text-gray-500"}`,style:p?{...v.textCyan,fontFamily:"monospace"}:{},children:p?"DATE":"Date"})]})}),l.jsx("tbody",{className:`divide-y ${p?"divide-cyan-400":"bg-white divide-gray-200"}`,style:p?{backgroundColor:he.black}:{},children:De.map((rt,_t)=>{const{score:Ke,maxScore:tt,percentage:Pe}=W(rt),je=p?Pe>=80?"text-green-400":Pe>=60?"text-yellow-400":"text-red-400":Pe>=80?"text-green-600":Pe>=60?"text-yellow-600":"text-red-600";return l.jsxs("tr",{className:p?"border-b border-cyan-400":"hover:bg-gray-50",style:p?{backgroundColor:he.black,borderBottomColor:he.cyan}:{},children:[l.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${p?"":"text-gray-900"}`,style:p?{...v.textCyan,fontFamily:"monospace"}:{},children:p?rt.test_name.toUpperCase():rt.test_name}),l.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${p?"":"text-gray-500"}`,style:p?{color:he.cyan,fontFamily:"monospace"}:{},children:rt.teacher_name||(p?"UNKNOWN":"Unknown")}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:l.jsxs("span",{className:p?"":je,style:p?{color:Pe>=80?he.green:Pe>=60?he.yellow:he.red,fontFamily:"monospace",...Pe>=80?v.textShadowGreen:Pe>=60?v.textShadowYellow:v.textShadowRed}:{},children:[Ke,"/",tt," (",Pe,"%)"]})}),l.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${p?"":"text-gray-500"}`,style:p?{color:he.cyan,fontFamily:"monospace"}:{},children:new Date(rt.submitted_at).toLocaleDateString()})]},_t)})})]})})]},se))})},[P]);_.useCallback(()=>{ke.debug(" Clearing test data and returning to cabinet..."),R(null),V([]),setStudentAnswers(null),Y(0),ue(0),X(!1),n?n():c("/student")},[n,c]);const me=_.useCallback(()=>{ke.debug(" Navigating back to cabinet..."),n?n():c("/student")},[n,c]);return _.useCallback((xe,se)=>{const De={id:Date.now(),message:xe,type:se,timestamp:new Date};A(He=>[...He,De]),setTimeout(()=>{A(He=>He.filter(rt=>rt.id!==De.id))},eg.NOTIFICATION_DURATION)},[]),C?l.jsx("div",{className:`min-h-screen flex items-center justify-center ${p?"":"bg-white"}`,style:p?v.background:{},children:l.jsxs("div",{className:"text-center",children:[l.jsx(un,{size:"lg"}),l.jsx("p",{className:`mt-4 ${p?"":"text-gray-600"}`,style:p?{...v.textCyan,fontFamily:"monospace"}:{},children:p?"LOADING STUDENT RESULTS...":"Loading Student Results..."})]})}):w?l.jsx("div",{className:`min-h-screen flex items-center justify-center ${p?"":"bg-white"}`,style:p?v.background:{},children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:`border-2 rounded-lg p-6 max-w-md ${p?"border":"bg-red-50 border-red-200"}`,style:p?{backgroundColor:he.black,borderColor:he.red,...v.glowRed}:{},children:[l.jsx("h2",{className:`text-lg font-semibold mb-2 ${p?"":"text-red-800"}`,style:p?{...v.textRed,fontFamily:"monospace"}:{},children:p?"RESULTS ERROR":"Results Error"}),l.jsx("p",{className:`mb-4 ${p?"":"text-red-600"}`,style:p?{color:he.red,fontFamily:"monospace"}:{},children:w}),l.jsx(ot,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):s?l.jsxs("div",{children:[C?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(un,{size:"md"}),l.jsx("p",{className:`mt-2 ${p?"":"text-gray-600"}`,style:p?{...v.textCyan,fontFamily:"monospace"}:{},children:p?"LOADING RESULTS...":"Loading results..."})]}):w?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:`text-4xl mb-2 ${p?"":"text-red-500"}`,style:p?{color:he.red}:{},children:""}),l.jsx("p",{className:p?"":"text-red-600",style:p?{color:he.red,fontFamily:"monospace"}:{},children:w})]}):te(P),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:N.map(xe=>l.jsx(du,{type:xe.type,message:xe.message,onClose:()=>A(se=>se.filter(De=>De.id!==xe.id))},xe.id))})]}):l.jsxs("div",{className:`min-h-screen ${p?"bg-gradient-to-br from-black via-gray-900 to-purple-900":"bg-white"}`,style:p?v.background:{},children:[l.jsx("div",{className:`shadow-sm border-b ${p?"border":`${y.headerBg} ${y.headerBorder}`}`,style:p?{backgroundColor:he.black,borderBottomColor:he.cyan,borderBottomWidth:"2px"}:{},children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:`text-2xl font-bold ${p?"":y.headerText}`,style:p?{...v.textCyan,fontFamily:"monospace"}:{},children:p?"STUDENT RESULTS":"Student Results"}),l.jsxs("p",{className:`text-sm mt-1 ${p?"":y.textSecondary}`,style:p?{color:he.cyan,fontFamily:"monospace"}:{},children:["Last updated: ",I?I.toLocaleString():"Never"]})]}),l.jsxs("div",{className:"flex space-x-3",children:[F&&l.jsx(ot,{variant:"outline",onClick:()=>X(!z),children:z?"Hide Details":"Show Details"}),l.jsx(ot,{variant:"outline",onClick:me,children:"Back to Cabinet"})]})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:z&&F?ae():ce()}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:N.map(xe=>l.jsx(du,{type:xe.type,message:xe.message,onClose:()=>A(se=>se.filter(De=>De.id!==xe.id))},xe.id))}),selectedDrawing&&l.jsx(CH,{drawing:selectedDrawing,isOpen:isDrawingModalOpen,onClose:()=>setIsDrawingModalOpen(!1)})]})},tfe=({isMenuOpen:e,onToggleMenu:t,onShowPasswordChange:r})=>{const n=Ko(),s=_0(),{user:a,isAuthenticated:i,logout:o}=Is(),{studentData:c,loadStudentData:u}=dS(),{activeTests:d,testResults:f,loadActiveTests:h,loadTestResults:g,viewTestDetails:p,testDetailsModal:y,closeTestDetailsModal:v}=C2(),{theme:C,isCyberpunk:S,themeClasses:w}=Da(),T=Oa(C);_.useEffect(()=>{ke.debug(" [DEBUG] StudentCabinet mounted/rendered, location:",s.pathname)},[s.pathname]);const[N,A]=_.useState(!0),[P,j]=_.useState(""),[F,R]=_.useState([]),[L,V]=_.useState(null),[Z,Y]=_.useState(!1),[re,ue]=_.useState(null),[z,X]=_.useState(null),[I,B]=_.useState(new Set),[W,D]=_.useState(!1),[U,q]=_.useState(!1),[H,te]=_.useState(!1),[Q,ae]=_.useState(!1),[ce,me]=_.useState(!1);_.useEffect(()=>{xe()},[]),_.useEffect(()=>()=>{te(!1)},[]),_.useEffect(()=>{if(H){const je=setTimeout(()=>{te(!1)},1e3);return()=>clearTimeout(je)}},[H]);const xe=_.useCallback(async()=>{ke.debug(" Initializing Student Cabinet...");try{if(A(!0),j(""),!i||!a){ke.debug(" User not authenticated, redirecting to login"),n("/login");return}if(a.role!==$o.STUDENT){ke.error(" Invalid user role for student cabinet:",a.role),j("Access denied. Student role required.");return}ke.debug(" Loading active tests (single API call)...");const je=a?.student_id||a?.id||"";if(se(je)){ke.debug(" Cache refresh triggered - clearing cache");try{const vt=`student_active_tests_${je}`,Ot=`student_results_table_${je}`;localStorage.removeItem(vt),localStorage.removeItem(Ot)}catch{}}else ke.debug(" Using cached active tests (background revalidation will keep data fresh)");await h(je),ke.debug(" Student Cabinet initialization complete!")}catch(je){ke.error(" Error initializing student cabinet:",je),j("Failed to initialize student cabinet")}finally{A(!1)}},[i,a,n]),se=_.useCallback(je=>{if(window.studentCabinetRefreshRequested)return window.studentCabinetRefreshRequested=!1,ke.debug(" Manual refresh requested"),!0;if(window.recentTestCompleted)return window.recentTestCompleted=!1,ke.debug(" Test completed - cache refresh triggered"),!0;const Qe=localStorage.getItem(`last_cabinet_refresh_${je}`);if(Qe&&Date.now()-parseInt(Qe)>300*1e3)return ke.debug(" Time-based refresh triggered"),!0;try{for(let vt=0;vt<localStorage.length;vt++){const Ot=localStorage.key(vt);if(Ot&&Ot.startsWith(`retest_assignment_id_${je}_`))return ke.debug(" Retest assignment key detected, forcing cache refresh:",Ot),!0}}catch{}return ke.debug(" No refresh triggers - using existing cache"),!1},[]);_.useCallback(async()=>{ke.debug(" Calculating average score...");try{if(f&&f.length>0){const je=f.reduce((vt,Ot)=>{const $t=Ot.best_retest_score||Ot.score,Gt=Ot.best_retest_max_score||Ot.max_score;return typeof $t=="number"&&typeof Gt=="number"&&Gt>0?vt+Math.round($t/Gt*100):vt},0),Qe=Math.round(je/f.length);X(Qe),ke.debug(" Average score calculated:",Qe)}}catch(je){ke.error(" Error calculating average score:",je)}},[f]),_.useEffect(()=>{if(H){ke.debug(" Skipping completed tests initialization during navigation");return}const je=a?.student_id||a?.id;if(!je){ke.debug(" Student ID not available yet, skipping localStorage initialization");return}const Qe=new Set;for(let vt=0;vt<localStorage.length;vt++){const Ot=localStorage.key(vt);if(Ot&&Ot.startsWith(`test_completed_${je}_`)&&localStorage.getItem(Ot)==="true"){const Gt=Ot.replace(`test_completed_${je}_`,"").split("_");if(Gt.length>=2){const ir=Gt[0],dt=Gt.slice(1).join("_"),gt=`${ir}_${dt}`;Qe.add(gt),ke.debug(" Found completed test in localStorage:",gt)}}}B(Qe),ae(!0),ke.debug(" Initialized completed tests from localStorage:",Array.from(Qe))},[a?.student_id,a?.id,H]),_.useEffect(()=>{ke.debug(" testResults structure:",f);const je=f?.results||f;if(ke.debug(" resultsArray:",je),je&&je.length>0){const Qe=a?.student_id||a?.id||"",vt=new Set;je.forEach(Ot=>{const $t=`${Ot.test_type}_${Ot.test_id}`;vt.add($t),localStorage.setItem(`test_completed_${Qe}_${Ot.test_type}_${Ot.test_id}`,"true")}),B(Ot=>{const $t=new Set([...Ot,...vt]);return ke.debug(" Updated completed tests (merged):",Array.from($t)),$t})}},[f,a?.student_id,a?.id]);const De=_.useCallback(async(je,Qe,vt=!1,Ot=null)=>{ke.debug(" Checking test completion:",je,Qe,"retestAvailable:",vt);try{const $t=a?.student_id||a?.id||"";if(vt){ke.debug(" Retest available from backend, checking attempt limits.");const gt=`retest_attempts_${$t}_${je}_${Qe}`;let kt;try{const br=localStorage.getItem(gt);kt=br?JSON.parse(br):void 0}catch(br){ke.warn(" Failed to parse attempts metadata:",br)}const Ge=[];for(let br=1;br<=10;br++){const lr=`retest_attempt${br}_${$t}_${je}_${Qe}`;localStorage.getItem(lr)==="true"&&Ge.push(lr)}const Xe=Ge.length,Et=typeof Ot?.retest_attempts_left=="number"?Ot.retest_attempts_left:void 0,Ut=typeof Ot?.retest_attempt_number=="number"?Ot.retest_attempt_number:void 0,Wt=typeof Ot?.retest_max_attempts=="number"?Ot.retest_max_attempts:void 0;if(Et===0)return ke.debug(" API reports no attempts left. Retest considered completed."),!0;const pr=Wt??(Et!=null&&Ut!=null?Et+Ut:kt?.max??3),wr=kt?.used??Xe;return ke.debug(" Retest check:",{attemptsMeta:kt,attemptKeys:Ge,usedAttempts:wr,totalAttempts:pr,attemptsLeftFromApi:Et,retriesRemaining:Et??pr-wr}),wr>=pr?(ke.debug(" Maximum retest attempts reached (meta/localStorage)."),!0):(ke.debug(" Retest attempts available, allowing start."),!1)}const Gt=`test_completed_${$t}_${je}_${Qe}`,ir=localStorage.getItem(Gt);if(ke.debug(" localStorage key:",Gt),ke.debug(" localStorage value:",ir),je==="word_matching"){ke.debug(" Debug: All localStorage keys for student",$t);for(let gt=0;gt<localStorage.length;gt++){const kt=localStorage.key(gt);kt&&kt.includes($t)&&kt.includes("word_matching")&&ke.debug(" Found word_matching key:",kt,"=",localStorage.getItem(kt))}}if(ir==="true")return ke.debug(" Found completion status in local storage:",ir),!0;const dt=f?.results||f;return dt&&dt.length>0&&(ke.debug(" Checking database results:",dt.length,"results"),dt.some(kt=>(ke.debug(" Checking result:",kt.test_type,kt.test_id,"vs",je,Qe),kt.test_type===je&&kt.test_id===Qe)))?(ke.debug(" Found completion status in database results"),localStorage.setItem(Gt,"true"),!0):(ke.debug(" Test not completed according to local storage or database"),!1)}catch($t){return ke.error(" Error checking test completion:",$t),!1}},[f,a?.student_id,a?.id]),He=_.useCallback((je,Qe)=>{const vt={id:Date.now(),message:je,type:Qe,timestamp:new Date};R(Ot=>[...Ot,vt]),setTimeout(()=>{R(Ot=>Ot.filter($t=>$t.id!==vt.id))},eg.NOTIFICATION_DURATION)},[]),rt=_.useCallback(async je=>{ke.debug(" Showing test details:",je);try{await p(je.test_type,je.test_id,je.test_name)}catch(Qe){ke.error("Error loading test details:",Qe),He("Failed to load test details","error")}},[p,He]),_t=_.useCallback(je=>{ke.debug(" Starting test:",je);const Qe=`${je.test_type}_${je.test_id}`;if(I.has(Qe)&&!je?.retest_available){He("This test has already been completed","warning");return}if(ke.debug(" Checking retest conditions:"),ke.debug(" test.retest_available:",je?.retest_available),ke.debug(" testKey:",Qe),ke.debug(" completedTests.has(testKey):",I.has(Qe)),ke.debug(" completedTests:",Array.from(I)),je?.retest_available&&!je?.retest_is_completed){const vt=a?.student_id||a?.id||"",Ot=`retest1_${vt}_${je.test_type}_${je.test_id}`;localStorage.setItem(Ot,"true"),ke.debug(" Set retest key:",Ot);const $t=`retest_in_progress_${vt}_${je.test_type}_${je.test_id}`;localStorage.setItem($t,"1"),ke.debug(" Set in-progress retest lock:",$t);try{const Gt=`anti_cheating_${vt}_${je.test_type}_${je.test_id}`;localStorage.removeItem(Gt);const ir=`speaking_test_data_${vt}_${je.test_id}`;localStorage.removeItem(ir);const dt=`speaking_progress_${je.test_id}`;localStorage.removeItem(dt);const gt=`_${vt}_${je.test_type}_${je.test_id}`,kt=[];for(let Xe=0;Xe<localStorage.length;Xe++){const Et=localStorage.key(Xe);Et&&(Et.startsWith("retest_attempt")||(Et.endsWith(gt)||Et.includes(`answers_${vt}_${je.test_type}_${je.test_id}`)||Et.includes(`progress_${vt}_${je.test_type}_${je.test_id}`)||Et.includes(`state_${vt}_${je.test_type}_${je.test_id}`)||Et.includes(`selected_${vt}_${je.test_type}_${je.test_id}`))&&kt.push(Et))}kt.forEach(Xe=>localStorage.removeItem(Xe)),ke.debug(" Cleared generic cached keys for retest start:",kt);const Ge=`retest_attempts_${vt}_${je.test_type}_${je.test_id}`;ke.debug(" Cleared per-test cached keys for retest start:",{antiCheatKey:Gt,speakingCacheKey:ir,speakingProgressKey:dt})}catch{}if(ke.debug(" Test retest_assignment_id:",je.retest_assignment_id),ke.debug(" Test retest_assignment_id type:",typeof je.retest_assignment_id),je?.retest_assignment_id){const Gt=`retest_assignment_id_${vt}_${je.test_type}_${je.test_id}`;localStorage.setItem(Gt,String(je.retest_assignment_id)),ke.debug(" Set retest assignment ID:",Gt,"=",je.retest_assignment_id)}else ke.debug(" No retest assignment ID found in test data")}else ke.debug(" Retest assignment ID storage skipped - retest not available");if(te(!0),ke.debug(" Set isStartingTest to true for test:",je.test_type),je.test_type==="matching_type"){ke.debug(" Redirecting to matching test page for testId:",je.test_id),n(`/student/matching-test/${je.test_id}`);return}if(je.test_type==="word_matching"){ke.debug(" Redirecting to word matching test page for testId:",je.test_id),n(`/student/word-matching-test/${je.test_id}`);return}if(je.test_type==="speaking"){ke.debug(" Redirecting to speaking test page for testId:",je.test_id),n(`/student/speaking-test/${je.test_id}`);return}n(`/student/test/${je.test_type}/${je.test_id}`)},[n,I,He,a?.student_id,a?.id]),Ke=_.useCallback(()=>{D(je=>!je)},[]),tt=_.useCallback(()=>{q(je=>!je)},[]),Pe=_.useCallback(async je=>{if(ke.debug(" Starting test:",je),H){ke.debug(" Test already starting, ignoring click");return}try{if(await De(je.test_type,je.test_id,je?.retest_available,je)){He("This test has already been completed","warning");return}_t(je)}catch(Qe){ke.error(" Error starting test:",Qe),He("Failed to start test. Please try again.","error")}},[De,_t,He,H]);return _.useCallback(je=>{ke.debug(" Viewing test details:",je),rt(je)},[rt]),N?l.jsx(ht.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:l.jsxs(ht.div,{className:"text-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsx(un,{size:"lg"}),l.jsx(ht.p,{className:"mt-4 text-gray-600",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.3},children:"Loading Student Cabinet..."})]})}):P?l.jsx(ht.div,{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-100 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:l.jsx(ht.div,{className:"text-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:l.jsxs(ht.div,{className:"bg-white border border-red-200 rounded-xl p-8 max-w-md shadow-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,duration:.3},children:[l.jsx(ht.div,{className:"text-4xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.3,type:"spring"},children:""}),l.jsx("h2",{className:"text-xl font-semibold text-red-800 mb-2",children:"Cabinet Error"}),l.jsx("p",{className:"text-red-600 mb-6",children:P}),l.jsx(ot,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):(ke.debug(" [DEBUG] StudentCabinet rendering, location:",s.pathname,"isLoading:",N),l.jsxs(ht.div,{className:`min-h-screen ${S?"bg-gradient-to-br from-black via-gray-900 to-purple-900":"bg-white"}`,style:S?T.background:{},initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[l.jsx(ht.div,{className:`${w.headerBg} border-b-2 ${w.headerBorder}`,style:S?{boxShadow:"0 0 20px rgba(0, 255, 255, 0.5), 0 0 40px rgba(0, 255, 255, 0.3), inset 0 0 20px rgba(0, 255, 255, 0.1)"}:{},initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-6",children:[l.jsxs(ht.div,{className:"flex items-center space-x-4",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(ht.div,{className:`h-12 w-12 rounded-full flex items-center justify-center border-2 ${S?"bg-cyan-400/20 border-cyan-400":"bg-white/20 border-white"}`,style:S?{boxShadow:"0 0 10px rgba(0, 255, 255, 0.5)"}:{},initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.3,type:"spring"},whileHover:{scale:1.1},children:l.jsx("span",{className:`font-semibold text-xl ${S?"text-cyan-400 tracking-wider":"text-white"}`,style:S?{fontFamily:"monospace",textShadow:"0 0 5px rgba(0, 255, 255, 0.5)"}:{},children:a?.name?.charAt(0)||"S"})})}),l.jsxs("div",{children:[l.jsx("h1",{className:`text-lg sm:text-xl md:text-2xl font-bold ${S?"tracking-wider":w.headerText}`,style:S?{...T.textCyan,fontFamily:"monospace"}:{},children:S?`${a?.name?.toUpperCase()} ${a?.surname?.toUpperCase()}`:`${a?.name} ${a?.surname}`}),l.jsx("p",{className:`text-sm sm:text-base md:text-lg ${S?"tracking-wider":"text-white"}`,style:S?{...T.textYellow,fontFamily:"monospace"}:{},children:S?`GRADE ${a?.grade} - CLASS ${a?.class}`:`Grade ${a?.grade} - Class ${a?.class}`})]})]}),l.jsxs(ht.div,{className:"relative",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[l.jsxs("button",{onClick:t,className:`flex items-center space-x-1 sm:space-x-2 border-2 font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 cursor-pointer px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm ${S?"bg-cyan-400/10 border-cyan-400 text-cyan-400 hover:bg-cyan-400/20 focus:ring-cyan-400 tracking-wider":"bg-white/10 border-white text-white hover:bg-white/20 focus:ring-white"}`,style:S?{zIndex:1e3,fontFamily:"monospace",boxShadow:"0 0 10px rgba(0, 255, 255, 0.3)",textShadow:"0 0 5px rgba(0, 255, 255, 0.5)"}:{zIndex:1e3},children:[l.jsx("span",{className:"hidden sm:inline",children:"Menu"}),l.jsx(ht.svg,{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:e?180:0},transition:{duration:.2},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),l.jsx(Uo,{children:e&&l.jsx(ht.div,{className:`absolute right-0 mt-2 w-48 rounded-xl shadow-lg z-50 overflow-hidden border-2 ${S?Bt(0).className:"bg-white"}`,style:S?{...Bt(0).style,...T.glow}:{},initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:l.jsxs("div",{className:"py-2",children:[l.jsx(ht.button,{onClick:r,className:`block w-full text-left px-4 py-3 text-sm transition-colors ${S?"hover:bg-cyan-400/30":"text-gray-700 hover:bg-blue-50"}`,style:S?{color:he.cyan,fontFamily:"monospace",...T.textShadow}:{},whileHover:{x:4},transition:{duration:.2},children:S?"CHANGE PASSWORD":"Change Password"}),l.jsx(ht.button,{onClick:()=>{t(),me(!0)},className:`block w-full text-left px-4 py-3 text-sm transition-colors ${S?"hover:bg-cyan-400/30":"text-gray-700 hover:bg-gray-50"}`,style:S?{color:he.cyan,fontFamily:"monospace",...T.textShadow}:{},whileHover:{x:4},transition:{duration:.2},children:S?"SETTINGS":"Settings"}),l.jsx(ht.button,{onClick:()=>{t(),o()},className:`block w-full text-left px-4 py-3 text-sm transition-colors ${S?"hover:bg-red-400/30":"text-gray-700 hover:bg-red-50"}`,style:S?{color:he.red,fontFamily:"monospace",...T.textShadowRed}:{},whileHover:{x:4},transition:{duration:.2},children:S?"LOGOUT":"Logout"})]})})})]})]})})}),l.jsxs(ht.div,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:[l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:l.jsx("div",{className:"lg:col-span-1 space-y-6",children:z!==null&&l.jsx(ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7,duration:.5},children:l.jsxs(Ht,{children:[l.jsx(Ht.Header,{children:l.jsx(Ht.Title,{children:"Average Score"})}),l.jsx(Ht.Body,{children:l.jsxs(ht.div,{className:"text-center",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.8,duration:.3},children:[l.jsxs(ht.div,{className:"text-4xl font-bold text-blue-600 mb-2",initial:{scale:0},animate:{scale:1},transition:{delay:.9,duration:.5,type:"spring"},children:[z,"%"]}),l.jsx("p",{className:"text-sm text-gray-500",children:"Overall Performance"})]})})]})})})}),l.jsxs("div",{className:"space-y-6",children:[l.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:l.jsxs(Ht,{className:S?Bt(0).className:"",style:S?{...Bt(0).style,boxShadow:"0 0 20px rgba(255, 0, 60, 0.3), 0 0 40px rgba(255, 0, 60, 0.2)"}:{},children:[l.jsx(Ht.Header,{children:l.jsx(Ht.Title,{className:"text-center ",style:S?{...T.textCyan,fontFamily:"monospace",color:he.cyan}:{},children:S?"ACTIVE TESTS":"Active Tests"})}),l.jsx(Ht.Body,{children:d&&d.length>0?l.jsxs("div",{className:"relative",children:[ke.debug(" Rendering overlay, isStartingTest:",H),H&&l.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50 rounded-lg border-2 border-blue-200",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Starting test..."}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait..."})]})}),l.jsxs("div",{className:"space-y-4",children:[(W?d:d.slice(0,3)).map((je,Qe)=>l.jsx(ht.div,{className:`rounded-lg p-4 transition-shadow ${S?Bt(Qe+1).className:"border border-gray-200 hover:shadow-md"}`,style:S?{...Bt(Qe+1).style,boxShadow:(Qe+1)%4===0?T.glowRed.boxShadow:(Qe+1)%4===1?T.glowYellow.boxShadow:(Qe+1)%4===2?T.glowPurple.boxShadow:T.glow.boxShadow}:{},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:W?0:.7+Qe*.1,duration:.3},whileHover:{scale:1.02},children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"sm:hidden",children:[l.jsx("h3",{className:`text-sm font-medium mb-1 break-words leading-tight ${S?"":"text-gray-900"}`,style:S?{...T.textCyan,fontFamily:"monospace"}:{},children:S?je.test_name.toUpperCase():je.test_name}),l.jsxs("div",{className:`flex items-center space-x-2 text-xs ${S?"":"text-gray-500"}`,style:S?{color:he.cyan,fontFamily:"monospace"}:{},children:[l.jsx("span",{children:je.teacher_name}),l.jsx("span",{children:""}),l.jsx("span",{children:new Date(je.assigned_at).toLocaleDateString("en-US",{year:"2-digit",month:"numeric",day:"numeric"})})]})]}),l.jsxs("div",{className:"hidden sm:flex items-center space-x-3 text-sm",children:[l.jsx("h3",{className:`text-lg font-medium break-words leading-tight ${S?"":"text-gray-900"}`,style:S?{...T.textCyan,fontFamily:"monospace"}:{},children:S?je.test_name.toUpperCase():je.test_name}),l.jsx("span",{className:`px-2 py-1 rounded text-xs ${S?"bg-yellow-400/20 text-yellow-400 border border-yellow-400/50":"bg-blue-100 text-blue-800"}`,children:je.subject}),l.jsx("span",{className:S?"":"text-gray-500",style:S?{color:he.cyan,fontFamily:"monospace"}:{},children:je.teacher_name}),l.jsx("span",{className:S?"":"text-gray-500",style:S?{color:he.cyan,fontFamily:"monospace"}:{},children:new Date(je.assigned_at).toLocaleDateString()})]})]}),l.jsx("div",{className:"flex space-x-2 ml-4",children:(()=>{const vt=`${je.test_type}_${je.test_id}`,Ot=I.has(vt);let $t=!1;if(typeof window<"u"&&je?.retest_available){const Gt=a?.student_id||a?.id||"";if(Gt)try{const ir=`test_completed_${Gt}_${je.test_type}_${je.test_id}`,dt=localStorage.getItem(ir)==="true",gt=`retest_attempts_${Gt}_${je.test_type}_${je.test_id}`;let kt;const Ge=localStorage.getItem(gt);if(Ge)try{kt=JSON.parse(Ge)}catch(pr){ke.warn(" Failed to parse retest attempts metadata in render:",pr)}let Xe=typeof kt?.used=="number"?kt.used:void 0;if(Xe==null){let pr=0;for(let wr=1;wr<=10;wr++){const br=`retest_attempt${wr}_${Gt}_${je.test_type}_${je.test_id}`;localStorage.getItem(br)==="true"&&pr++}Xe=pr}const Et=typeof je?.retest_attempts_left=="number"?je.retest_attempts_left:void 0,Wt=(typeof je?.retest_max_attempts=="number"?je.retest_max_attempts:void 0)??(kt?.max!=null?kt.max:Et!=null&&typeof je?.retest_attempt_number=="number"?Et+je.retest_attempt_number:void 0);(Et===0||Wt!=null&&Xe!=null&&Xe>=Wt||dt&&Et==null&&Wt==null)&&($t=!0)}catch(ir){ke.warn(" Failed to evaluate local retest completion:",ir)}}return Q?je?.retest_is_completed||$t?l.jsx(ot,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):je?.retest_available&&!je?.retest_is_completed&&!$t?(je.retest_attempts_left||0)>0?l.jsx(ot,{variant:"primary",size:"sm",onClick:()=>Pe(je),disabled:H,className:"",style:S?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",borderWidth:"2px",...T.glow}:{},children:S?"START RETEST":"Start Retest"}):l.jsx(ot,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):Ot?l.jsx(ot,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):(ke.debug(" Button render, isStartingTest:",H,"test:",je.test_type),l.jsx(ot,{variant:"primary",size:"sm",onClick:()=>Pe(je),disabled:H,className:"",style:S?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",borderWidth:"2px",...T.glow}:{},children:S?"START TEST":"Start Test"})):l.jsx(ot,{variant:"secondary",size:"sm",disabled:!0,className:"bg-gray-100 text-gray-500 border-gray-200",children:"Loading..."})})()})]})},`${je.test_type}_${je.test_id}`)),d.length>3&&l.jsx("div",{className:"text-center pt-2",children:l.jsx("button",{onClick:Ke,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:W?"Show Less":`Show ${d.length-3} More`})})]})]}):l.jsxs(ht.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},transition:{delay:.7,duration:.3},children:[l.jsx(ht.img,{src:"/pics/no-tests.png",alt:"No active tests",className:"w-24 h-24 mx-auto mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.8,duration:.5,type:"spring"}}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Active Tests"})]})})]})}),l.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:l.jsxs(Ht,{className:S?Bt(2).className:"",style:S?{...Bt(2).style,...T.glowPurple}:{},children:[l.jsx(Ht.Header,{children:l.jsx(Ht.Title,{className:"",style:S?{...T.textCyan,fontFamily:"monospace"}:{},children:S?"TEST RESULTS":"Test Results"})}),l.jsx(Ht.Body,{children:f&&f.showResults?l.jsx(T2,{testResults:f,onBackToCabinet:()=>{setTestResults(null)},onRetakeTest:(je,Qe)=>{h(),setTestResults(null)},isLoading:N}):l.jsx(TH,{compact:!0,showAll:U,onToggleShowAll:tt,maxInitial:3})})]})})]})]}),l.jsx(rE,{isOpen:y.isOpen,onClose:v,testType:y.testType,testId:y.testId,testName:y.testName,questions:y.questions||[],isLoading:y.isLoading||!1}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:F.map(je=>l.jsx(du,{type:je.type,message:je.message,onClose:()=>R(Qe=>Qe.filter(vt=>vt.id!==je.id))},je.id))}),l.jsx(u0e,{visible:ce,onClose:()=>me(!1)})]},s.pathname))},rfe=({testInfo:e,questions:t,testType:r,studentAnswers:n,onBackToCabinet:s,checkAnswerCorrectness:a,formatStudentAnswerForDisplay:i,getCorrectAnswer:o,caughtCheating:c=!1})=>{const{theme:u}=Da(),d=Oa(u),f=u==="cyberpunk",[h,g]=_.useState(0),[p,y]=_.useState(0),[v,C]=_.useState(!0);if(_.useEffect(()=>{const T=()=>{try{const N=$f(t,n,r).score,A=e?.num_questions||t?.length||0,P=A>0?Math.round(N/A*100):0;g(N),y(P),C(!1)}catch(N){console.error("Error calculating test results:",N),g(0),y(0),C(!1)}};t&&t.length>0?T():C(!1)},[t,n,r,e,$f]),v)return l.jsx("div",{className:"flex justify-center items-center min-h-64",children:l.jsx("div",{className:"text-lg",children:"Calculating results..."})});const S=e?.num_questions||t?.length||0,w=e?.test_name||e?.title||"Test";return l.jsxs("div",{className:`test-results-page max-w-4xl mx-auto p-6 overflow-y-auto min-h-screen ${f?"bg-black":""}`,style:f?d.background:{},children:[l.jsx(Ht,{className:`mb-6 border-2 ${f?Bt(0).className:""}`,style:f?{...Bt(0).style,...d.glowRed}:{},children:l.jsxs("div",{className:"results-header text-center",children:[l.jsx("h2",{className:`text-2xl font-bold mb-2 ${f?"":"text-gray-800"}`,style:f?{...d.textCyan,fontFamily:"monospace"}:{},children:f?`TEST RESULTS: ${w.toUpperCase()}`:`Test Results: ${w}`}),l.jsx("p",{className:f?"":"text-gray-600",style:f?{color:he.yellow,fontFamily:"monospace"}:{},children:r==="matching_type"?"Matching Test":r==="multiple_choice"?"Multiple Choice Test":r==="true_false"?"True/False Test":r==="input"?"Input Test":r==="drawing"?"Drawing Test":"Test"})]})}),c&&l.jsx(Ht,{className:`mb-6 border-2 ${f?"border":"border-red-500 bg-red-50"}`,style:f?{backgroundColor:he.black,borderColor:he.red,...d.glowRed}:{},children:l.jsxs("div",{className:"flex items-start space-x-3 p-4",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:`h-6 w-6 ${f?"":"text-red-600"}`,style:f?{color:he.red}:{},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),l.jsx("div",{className:"flex-1",children:l.jsx("p",{className:f?"":"text-red-700",style:f?{...d.textRed,fontFamily:"monospace"}:{},children:"Suspicious activity was detected during this test. Your teacher has been notified."})})]})}),l.jsx(Ht,{className:`mb-6 border-2 ${f?Bt(1).className:""}`,style:f?{...Bt(1).style,...d.glow}:{},children:l.jsxs("div",{className:"results-summary",children:[l.jsx("h3",{className:`text-xl font-semibold mb-4 text-center ${f?"":"text-gray-800"}`,style:f?{...d.textCyan,fontFamily:"monospace"}:{},children:f?`YOUR SCORE: ${h} / ${S} (${p}%)`:`Your Score: ${h} / ${S} (${p}%)`}),l.jsx("div",{className:`w-full rounded-full h-4 mb-4 border ${f?"bg-gray-800 border-cyan-400/50":"bg-gray-200"}`,style:f?d.glow:{},children:l.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${f?"":p>=80?"bg-green-500":p>=60?"bg-yellow-500":"bg-red-500"}`,style:f?{background:`linear-gradient(to right, ${he.yellow}, ${he.cyan})`,boxShadow:`0 0 10px ${he.cyan}`,width:`${p}%`}:{width:`${p}%`}})}),l.jsx("div",{className:"text-center",children:l.jsx("p",{className:`text-lg font-medium ${f?"":p>=80?"text-green-600":p>=60?"text-yellow-600":"text-red-600"}`,style:f?{color:p>=80?he.green:p>=60?he.yellow:he.red,fontFamily:"monospace",...p>=80?d.textShadowGreen:p>=60?d.textShadowYellow:d.textShadowRed}:{},children:p>=80?"Excellent!":p>=60?"Good job!":"Keep practicing!"})})]})}),t&&t.length>0&&l.jsx(Ht,{className:`mb-6 border-2 ${f?Bt(2).className:""}`,style:f?{...Bt(2).style,...d.glow}:{},children:l.jsxs("div",{className:"questions-review",children:[l.jsx("h3",{className:`text-xl font-semibold mb-4 ${f?"":"text-gray-800"}`,style:f?{...d.textCyan,fontFamily:"monospace"}:{},children:f?"QUESTION REVIEW":"Question Review"}),l.jsx("div",{className:"space-y-4",children:t.map((T,N)=>{const A=n[String(T.question_id)]||"No answer",P=a(T,A,r);return l.jsxs("div",{className:`question-review p-4 rounded-lg border-2 ${f?"border":P?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,style:f?{backgroundColor:he.black,borderColor:P?he.green:he.red,boxShadow:P?d.glow.boxShadow:d.glowRed.boxShadow}:{},children:[l.jsxs("div",{className:"question-review-header flex justify-between items-start mb-3",children:[l.jsxs("h4",{className:`text-lg font-medium ${f?"":"text-gray-800"}`,style:f?{...d.textCyan,fontFamily:"monospace"}:{},children:["Question ",N+1]}),l.jsx("span",{className:`text-2xl font-bold ${f?"":P?"text-green-600":"text-red-600"}`,style:f?{color:P?he.green:he.red,fontFamily:"monospace",...P?d.textShadowGreen:d.textShadowRed}:{},children:P?"":""})]}),l.jsx("div",{className:"question-text mb-3",children:l.jsx("p",{className:`p-3 rounded border ${f?"border":"text-gray-700 bg-gray-100"}`,style:f?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",...d.textShadow}:{},children:T.question})}),l.jsxs("div",{className:"answer-section space-y-2",children:[l.jsxs("p",{className:"student-answer",children:[l.jsx("strong",{className:f?"":"text-gray-600",style:f?{color:he.yellow,fontFamily:"monospace"}:{},children:"Your Answer:"})," ",l.jsx("span",{className:`p-3 rounded border font-medium ${f?"border":P?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,style:f?{backgroundColor:he.black,borderColor:P?he.green:he.red,color:P?he.green:he.red,fontFamily:"monospace",...P?d.textShadowGreen:d.textShadowRed}:{},children:i(A,r,T)})]}),!P&&l.jsxs("p",{className:"correct-answer",children:[l.jsx("strong",{className:f?"":"text-gray-600",style:f?{color:he.yellow,fontFamily:"monospace"}:{},children:"Correct Answer:"})," ",l.jsx("span",{className:`p-3 rounded border font-medium ${f?"border":"bg-blue-100 text-blue-800"}`,style:f?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",...d.textShadow}:{},children:r==="multiple_choice"?String(T.correct_answer||"").toUpperCase():i(o(T,r),r,T)})]})]})]},T.question_id||N)})})]})}),l.jsx(Ht,{className:`border-2 ${f?Bt(0).className:""}`,style:f?{...Bt(0).style,...d.glowRed}:{},children:l.jsx("div",{className:"results-actions text-center",children:l.jsx(ot,{onClick:s,className:`px-8 py-3 text-lg font-medium ${f?"":"bg-blue-600 hover:bg-blue-700 text-white"}`,style:f?{backgroundColor:he.cyan,color:he.black,fontFamily:"monospace",...d.glow}:{},children:f?"BACK TO CABINET":"Back to Cabinet"})})})]})};class nfe{constructor(){this.activeRequests=new Map,this.completedRequests=new Map,this.maxCacheSize=100,this.cacheTimeout=3e4}generateKey(t,r,n={}){const s=Object.keys(n).sort().reduce((a,i)=>(a[i]=n[i],a),{});return`${t}_${r}_${JSON.stringify(s)}`}isRequestInProgress(t){return this.activeRequests.has(t)}getCachedResult(t){const r=this.completedRequests.get(t);return r&&Date.now()-r.timestamp<this.cacheTimeout?r.result:null}startRequest(t,r){return this.activeRequests.set(t,r),r.finally(()=>{this.activeRequests.delete(t)}),r}cacheResult(t,r){if(this.completedRequests.size>=this.maxCacheSize){const n=this.completedRequests.keys().next().value;this.completedRequests.delete(n)}this.completedRequests.set(t,{result:r,timestamp:Date.now()})}async deduplicateApiCall(t,r,n,s){const a=this.generateKey(t,r,n);if(this.isRequestInProgress(a))return console.log(" API deduplication: Request already in progress, waiting...",a),this.activeRequests.get(a);const i=this.getCachedResult(a);if(i)return console.log(" API deduplication: Using cached result",a),i;console.log(" API deduplication: Making new request",a);const o=this.startRequest(a,s());try{const c=await o;return this.cacheResult(a,c),c}catch(c){throw c}}clearCache(){this.activeRequests.clear(),this.completedRequests.clear(),console.log(" API deduplication: Cache cleared")}}const pO=new nfe,sfe=(e,t)=>{let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>e.apply(null,n),t)}},afe=({onBackToCabinet:e,currentTest:t})=>{const r=Ko(),n=_0(),{user:s,isAuthenticated:a}=Is(),{activeTests:i,loadActiveTests:o}=C2(),{theme:c,isCyberpunk:u,themeClasses:d}=Da(),f=Oa(c),h=_.useCallback(sfe((le,fe,ge)=>{try{if(window.skipInitialProgressSave&&ge.answers&&ge.answers.length===0){ke.debug(" Skipping empty progress save during restoration"),window.skipInitialProgressSave=!1;return}const ze=`test_progress_${s?.student_id||s?.id||"unknown"}_${le}_${fe}`,it=localStorage.getItem(ze);if(it&&ge.answers&&ge.answers.length===0)try{const Ye=JSON.parse(it);if(Ye.answers&&Ye.answers.length>0){ke.debug(" Skipping empty progress save - existing progress is better:",Ye.answers);return}}catch{}localStorage.setItem(ze,JSON.stringify(ge)),ke.debug(`Saved test progress for ${le}_${fe}:`,ge)}catch(Se){ke.error("Error saving test progress:",Se)}},1e3),[s?.student_id,s?.id]),g=_.useCallback((le,fe,ge)=>{h(le,fe,ge)},[h]),p=_.useCallback((le,fe)=>{try{const Se=`test_progress_${s?.student_id||s?.id||"unknown"}_${le}_${fe}`,ze=localStorage.getItem(Se);return ze?JSON.parse(ze):null}catch(ge){return ke.error("Error getting test progress:",ge),null}},[s?.student_id,s?.id]),y=_.useCallback((le,fe)=>{try{const ge=s?.student_id||s?.id||"unknown",Se=`test_progress_${ge}_${le}_${fe}`;localStorage.removeItem(Se);for(let ze=0;ze<localStorage.length;ze++){const it=localStorage.key(ze);it&&it.startsWith(`test_progress_${ge}_${le}_${fe}_`)&&(localStorage.removeItem(it),ke.debug(` Cleared individual question key: ${it}`))}ke.debug(`Cleared test progress for ${le}_${fe}`)}catch(ge){ke.error("Error clearing test progress:",ge)}},[s?.student_id,s?.id]),[v,C]=_.useState(!0),[S,w]=_.useState(!1),[T,N]=_.useState(""),[A,P]=_.useState(!1),[j,F]=_.useState(""),[R,L]=_.useState([]),[V,Z]=_.useState(t?"test":"list"),[Y,re]=_.useState(null),[ue,z]=_.useState(null),[X,I]=_.useState(null),[B,W]=_.useState([]),[D,U]=_.useState([]),[q,H]=_.useState(0),[te,Q]=_.useState(0),[ae,ce]=_.useState(null),me=zs.useRef(null),xe=zs.useRef(null),[se,De]=_.useState(!1),[He,rt]=_.useState(!1),[_t,Ke]=_.useState(null),[tt,Pe]=_.useState(null),[je,Qe]=_.useState(!1),[vt,Ot]=_.useState(!1),[$t,Gt]=_.useState(!1),[ir,dt]=_.useState(!1),gt=_.useRef(null);k2(ir,_.useCallback(({confirm:le,cancel:fe})=>{gt.current={confirm:le,cancel:fe},Ot(!0)},[])),_.useEffect(()=>{(V==="test"||V==="results")&&Y?dt(!0):(dt(!1),gt.current=null)},[V,Y]);const[kt,Ge]=_.useState({isInitialized:!1,initializationId:null,lastTestId:null,initializationCount:0}),[Xe,Et]=_.useState({isRestored:!1,restoredTestId:null,restorationCount:0}),{startTracking:Ut,stopTracking:Wt,getCheatingData:pr,clearData:wr,isCheating:br,tabSwitches:lr}=T1(Y?.test_type,Y?.test_id,s?.student_id||s?.id);_.useEffect(()=>{(()=>{const fe=[];for(let ge=0;ge<localStorage.length;ge++){const Se=localStorage.key(ge);if(Se&&Se.startsWith("test_progress_")&&!Se.includes("_51712_")&&!Se.includes("_51736_")){const ze=Se.split("_");ze.length===4&&ze[0]==="test"&&ze[1]==="progress"&&fe.push(Se)}}fe.forEach(ge=>{localStorage.removeItem(ge),ke.debug(" Cleared old cache key:",ge)})})()},[]);const Er=_.useCallback(()=>{const le=Y?.test_id,fe=s?.student_id||s?.id;if(!fe||!le)return ke.debug(" Skipping initialization - missing required data:",{studentId:fe,currentTestId:le}),!1;const ge=`${fe}_${le}_${Date.now()}`;return kt.isInitialized&&kt.lastTestId===le?(ke.debug(" Already initialized for this test - skipping"),!1):kt.initializationId?(ke.debug(" Initialization in progress - skipping duplicate"),!1):(ke.debug(" Starting initialization:",ge),Ge({isInitialized:!1,initializationId:ge,lastTestId:le}),!0)},[kt,Y,s?.student_id,s?.id]),we=_.useCallback(()=>{Ge(le=>({...le,isInitialized:!0,initializationId:null})),ke.debug(" Initialization completed")},[]),_e=_.useCallback(async()=>{ke.debug(" Initializing Student Tests...");try{if(C(!0),F(""),!a||!s){ke.debug(" User not authenticated"),F("User not authenticated");return}if(s.role!==$o.STUDENT){ke.error(" Invalid user role for student tests:",s.role),F("Access denied. Student role required.");return}ke.debug(" Loading active tests..."),await o(),we(),ke.debug(" Student Tests initialization complete!")}catch(le){ke.error(" Error initializing student tests:",le),F("Failed to initialize student tests")}finally{C(!1)}},[a,s,o,we]);_.useEffect(()=>{Er()&&_e()},[Er,_e]),_.useEffect(()=>{t&&(ke.debug(" Auto-starting test from prop:",t),P(!0),at(t))},[t]),_.useCallback(async()=>{ke.debug(" Loading student active tests...");try{const le=await Cn.getActiveTests();ke.debug(" Active tests loaded:",le);const fe=le.map(ge=>({...ge,subject_id:ge.subject_id||ge.subjectId,teacher_id:ge.teacher_id||ge.teacherId,is_active:ge.is_active!==void 0?ge.is_active:!0,created_at:ge.created_at||ge.createdAt,updated_at:ge.updated_at||ge.updatedAt}));return Pe(new Date),fe}catch(le){throw ke.error(" Error loading active tests:",le),le}},[]),_.useCallback(async(le,fe)=>{ke.debug(" Checking test completion:",le,fe);try{const ge=p(le,fe);return ge&&ge.completed}catch(ge){return ke.error(" Error checking test completion:",ge),!1}},[p]),_.useEffect(()=>{if(B.length>0&&Y?.test_id){const le=setTimeout(()=>{let fe=!1;const ge=new Array(B.length).fill("");if(B.forEach((Se,ze)=>{const Ye=`test_progress_${s?.student_id||s?.id||"unknown"}_${ue}_${Y?.test_id}_${Se.question_id}`,de=localStorage.getItem(Ye);if(de){const ve=de.replace(/^"(.*)"$/,"$1");ge[ze]=ve,fe=!0}}),fe){U(ge);const Se=ge.filter(it=>it&&typeof it=="string"&&it.trim()!=="").length,ze=B.length>0?Se/B.length*100:0;H(ze)}},100);return()=>clearTimeout(le)}},[B,ue,Y?.test_id]);const Ee=_.useCallback(async(le,fe)=>{ke.debug(" Marking test as completed:",le,fe);try{const ge=p(le,fe)||{};ge.completed=!0,ge.completedAt=new Date().toISOString(),g(le,fe,ge);const ze=`test_completed_${s?.student_id||s?.id||""}_${le}_${fe}`;localStorage.setItem(ze,"true"),ke.debug(" Test completion marked in localStorage:",ze),ke.debug(" localStorage value after setting:",localStorage.getItem(ze)),_r("Test marked as completed","success")}catch(ge){ke.error(" Error marking test as completed:",ge),_r("Failed to mark test as completed","error")}},[p,g]),Fe=_.useCallback(le=>{ke.debug(" Showing test details:",le),Ke(le),rt(!0)},[]),at=_.useCallback(async le=>{ke.debug(" Starting test:",le);let fe=Date.now(),ge;try{N(""),w(!0),fe=Date.now();const Se=()=>{const Xt=Date.now()-fe,Lr=Math.max(0,250-Xt);setTimeout(()=>{C(!1),w(!1)},Lr)};let ze=!1;ge=setTimeout(()=>{ze=!0,N("Loading is taking longer than expected...")},15e3);const Ye=`test_completed_${s?.student_id||s?.id||""}_${le.test_type}_${le.test_id}`,de=localStorage.getItem(Ye)==="true";if(de&&!le?.retest_available){ke.debug(" Test already completed, redirecting to main cabinet"),_r("This test has already been completed","info"),r("/student");return}if(de&&le?.retest_available&&ke.debug(" Test completed but retest available, allowing retest"),le.test_type===as.MATCHING){ke.debug(" Redirecting to matching test page for testId:",le.test_id),r(`/student/matching-test/${le.test_id}`);return}if(le.test_type===as.WORD_MATCHING){ke.debug(" Redirecting to word matching test page for testId:",le.test_id),r(`/student/word-matching-test/${le.test_id}`);return}re(le),z(le.test_type),Et({isRestored:!1,restoredTestId:null,restorationCount:0});const[ve,Me]=await Promise.all([pO.deduplicateApiCall("GET",`test-info-${le.test_type}-${le.test_id}`,{testType:le.test_type,testId:le.test_id},()=>Cn.getTestInfo(le.test_type,le.test_id)),pO.deduplicateApiCall("GET",`test-questions-${le.test_type}-${le.test_id}`,{testType:le.test_type,testId:le.test_id},()=>Cn.getTestQuestions(le.test_type,le.test_id))]);I(ve);let Oe=Me;try{if(!!ve?.is_shuffled){const xn=s?.student_id||s?.id||"unknown",Lr=`${xn}:${le.test_type}:${le.test_id}`,jn=Array.from(Lr).reduce((On,Te)=>(On<<5)-On+Te.charCodeAt(0),0)>>>0,Ln=`test_shuffle_order_${xn}_${le.test_type}_${le.test_id}`,ya=localStorage.getItem(Ln);if(ya){const On=JSON.parse(ya),Te=new Map(Me.map(Tt=>[Tt.question_id,Tt]));Oe=On.map(Tt=>Te.get(Tt)).filter(Boolean)}else{const Te=function(Sr){return function(){var Dr=Sr+=1831565813;return Dr=Math.imul(Dr^Dr>>>15,Dr|1),Dr^=Dr+Math.imul(Dr^Dr>>>7,Dr|61),((Dr^Dr>>>14)>>>0)/4294967296}}(jn);Oe=[...Me];for(let Sr=Oe.length-1;Sr>0;Sr--){const Dr=Math.floor(Te()*(Sr+1));[Oe[Sr],Oe[Dr]]=[Oe[Dr],Oe[Sr]]}const Tt=Oe.map(Sr=>Sr.question_id);localStorage.setItem(Ln,JSON.stringify(Tt))}}}catch(Xt){ke.error("Shuffle error (ignored):",Xt)}W(Oe),Se();const nt=le.test_id;if(Xe.isRestored&&Xe.restoredTestId===nt){ke.debug(" Progress already restored for this test - skipping");return}Et(Xt=>({...Xt,restorationCount:Xt.restorationCount+1}));const bt=s?.student_id||s?.id||"unknown",At=`test_progress_${bt}_${le.test_type}_${le.test_id}`,cr=localStorage.getItem(At);let pt=new Array(Me.length).fill("");if(cr)try{const Xt=JSON.parse(cr);Xt.answers&&Array.isArray(Xt.answers)&&(pt=Xt.answers)}catch(Xt){ke.error("Error parsing main progress:",Xt)}Me.forEach((Xt,xn)=>{const Lr=`test_progress_${bt}_${le.test_type}_${le.test_id}_${Xt.question_id}`,jn=localStorage.getItem(Lr);if(jn){const Ln=jn.replace(/^"(.*)"$/,"$1");pt[xn]=Ln}});const zt=pt.filter(Xt=>Xt&&typeof Xt=="string"&&Xt.trim()!=="").length;if(zt>0){U(pt);const Xt=Me.length>0?zt/Me.length*100:0;H(Xt)}else U(pt),H(0);Et(Xt=>({...Xt,isRestored:!0,restoredTestId:nt})),zt>0&&(ke.debug(" Existing progress found - preventing overwrite during initialization"),window.skipInitialProgressSave=!0);const xr=Number(ve?.allowed_time||0),Ir=s?.student_id||s?.id||"unknown";if(me.current=`test_timer_${Ir}_${le.test_type}_${le.test_id}`,xr>0)try{const Xt=localStorage.getItem(me.current),xn=Date.now();if(Xt){const Lr=JSON.parse(Xt),jn=Math.floor((xn-new Date(Lr.lastTickAt).getTime())/1e3),Ln=Math.max(0,Number(Lr.remainingSeconds||xr)-Math.max(0,jn));Q(Ln),xe.current=xn}else Q(xr),xe.current=xn,localStorage.setItem(me.current,JSON.stringify({remainingSeconds:xr,lastTickAt:new Date(xn).toISOString(),startedAt:new Date(xn).toISOString()}))}catch(Xt){ke.error("Timer cache init error:",Xt),Q(xr)}else Q(0);const $r=new Date;ce($r),ke.debug(" Test timer started at:",$r.toISOString());const Gr=`anti_cheating_${s?.student_id||s?.id||"unknown"}_${le.test_type}_${le.test_id}`,zr=Es(Gr);zr?zr.isCheating&&(ke.debug(" WARNING: Student has been flagged for cheating in THIS test!"),ke.debug(" Tab switches detected in this test:",zr.tabSwitches),_r(` Warning: Suspicious activity detected in this test (${zr.tabSwitches} tab switches). Continued violations may result in test disqualification.`,"warning")):ke.debug(" No existing anti-cheating data found for this test - starting fresh"),Ut(),ke.debug(" Anti-cheating tracking started"),Z("test"),ke.debug(" Test started successfully")}catch(Se){ke.error(" Error starting test:",Se),_r("Failed to start test","error"),N("Failed to load test data. Please try again.")}finally{const Se=Date.now()-fe,it=Math.max(0,250-Se);setTimeout(()=>{C(!1),w(!1)},it),P(!1);try{ge&&clearTimeout(ge)}catch{}}},[p]),jt=_.useCallback(async()=>{if(!Y||!X||!B||!D){_r("No test data to submit","error");return}ke.debug(" Submitting test:",Y);try{De(!0);const le=$f(B,D,Y.test_type),fe=new Date,ge=ae?Math.round((fe-ae)/1e3):0,Se=ae?ae.toISOString():fe.toISOString();ke.debug(" Test timing:",{startedAt:Se,endTime:fe.toISOString(),timeTaken:`${ge} seconds`});const ze=pr();ke.debug(" Anti-cheating data for submission:",ze),Gt(ze.caught_cheating||!1);const it={};B.forEach((de,ve)=>{it[de.question_id]=D[ve]??""}),Y.test_type==="drawing"&&(ke.debug(" Drawing test answers being submitted:",D),ke.debug(" Drawing test answers type:",typeof D[0]),ke.debug(" Drawing test answers content:",D[0]));const Ye=await Cn.submitTest(Y.test_type,Y.test_id,D,{time_taken:(()=>{const de=Number(X?.allowed_time||0);return de>0?Math.min(ge,de):ge})(),started_at:Se,submitted_at:fe.toISOString(),answers_by_id:it,question_order:B.map(de=>de.question_id),caught_cheating:ze.caught_cheating,visibility_change_times:ze.visibility_change_times,retest_assignment_id:(()=>{const ve=`retest_assignment_id_${s?.student_id||s?.id||""}_${Y.test_type}_${Y.test_id}`,Me=localStorage.getItem(ve);return ke.debug(" Frontend retest key:",ve),ke.debug(" Frontend retest assignment ID from localStorage:",Me),ke.debug(" Frontend retest assignment ID converted:",Me?Number(Me):null),ke.debug(" Frontend current test data:",Y),ke.debug(" Frontend current test retest_assignment_id:",Y.retest_assignment_id),Me?Number(Me):null})(),parent_test_id:Y.test_id},s);if(ke.debug(" Test submission result:",Ye),Ye.success){window.recentTestCompleted=!0,ke.debug(" Test completed - cache refresh triggered");const de=s?.student_id||s?.id||"",ve=`retest_assignment_id_${de}_${Y.test_type}_${Y.test_id}`,Me=!!localStorage.getItem(ve);let Oe=!1;if(Me){const pt=typeof Y?.retest_max_attempts=="number"?Y.retest_max_attempts:void 0,zt=typeof Y?.retest_attempts_left=="number"?Y.retest_attempts_left:void 0,xr=typeof Y?.retest_attempt_number=="number"?Y.retest_attempt_number:void 0,Ir=pt??(zt!=null&&xr!=null?zt+xr:1),$r=(Ye?.percentage_score??Ye?.percentage??0)>=50;if($r){const mn=`retest_attempt${Ir}_${de}_${Y.test_type}_${Y.test_id}`;localStorage.setItem(mn,"true"),ke.debug(" Passed retest, marking last-slot key:",mn);let Gr=0;for(let Xt=1;Xt<=10;Xt++){const xn=`retest_attempt${Xt}_${de}_${Y.test_type}_${Y.test_id}`;localStorage.getItem(xn)==="true"&&Gr++}if(de&&Y.test_type&&Y.test_id){const Xt=`test_completed_${de}_${Y.test_type}_${Y.test_id}`;localStorage.setItem(Xt,"true"),ke.debug(" Marked retest as completed (student passed):",Xt);const xn=`retest_attempts_${de}_${Y.test_type}_${Y.test_id}`;localStorage.setItem(xn,JSON.stringify({used:Gr,max:Ir})),ke.debug(" Set retest attempts metadata (student passed):",xn,{used:Gr,max:Ir})}const zr=`retest1_${de}_${Y.test_type}_${Y.test_id}`;localStorage.removeItem(zr),Oe=!0}else{let mn=1;for(let Lr=1;Lr<=10;Lr++){const jn=`retest_attempt${Lr}_${de}_${Y.test_type}_${Y.test_id}`;if(localStorage.getItem(jn)!=="true"){mn=Lr;break}}const Gr=`retest_attempt${mn}_${de}_${Y.test_type}_${Y.test_id}`;localStorage.setItem(Gr,"true"),ke.debug(" Marked retest attempt as completed:",Gr);let zr=0;for(let Lr=1;Lr<=10;Lr++){const jn=`retest_attempt${Lr}_${de}_${Y.test_type}_${Y.test_id}`;localStorage.getItem(jn)==="true"&&zr++}const Xt=Ir>0&&zr>=Ir,xn=Xt||$r;if(ke.debug(" Retest completion check:",{usedAttempts:zr,maxAttempts:Ir,attemptsExhausted:Xt,passed:$r,shouldComplete:xn,studentId:!!de,test_type:!!Y?.test_type,test_id:!!Y?.test_id}),xn)if(!de||!Y?.test_type||!Y?.test_id)ke.error(" Cannot set completion key - missing required fields:",{studentId:de,test_type:Y?.test_type,test_id:Y?.test_id});else{const Lr=`test_completed_${de}_${Y.test_type}_${Y.test_id}`;localStorage.setItem(Lr,"true"),ke.debug(" Marked retest as completed (attempts exhausted or passed):",Lr),ke.debug(" Verification - completion key value:",localStorage.getItem(Lr));const jn=`retest_attempts_${de}_${Y.test_type}_${Y.test_id}`;localStorage.setItem(jn,JSON.stringify({used:zr,max:Ir})),ke.debug(" Set retest attempts metadata (attempts exhausted):",jn,{used:zr,max:Ir});const Ln=`retest1_${de}_${Y.test_type}_${Y.test_id}`;localStorage.removeItem(Ln),ke.debug(" Removed retest key after completion:",Ln),Oe=!0}else ke.debug(" Retest NOT completed - conditions not met:",{attemptsExhausted:Xt,passed:$r,shouldComplete:xn})}}if(ke.debug(" Marking test as completed..."),await Ee(Y.test_type,Y.test_id),Y.test_type!=="drawing"){ke.debug(" Caching test results after submission...");const zt=`student_results_table_${s?.student_id||s?.id||"unknown"}`,{setCachedData:xr,CACHE_TTL:Ir}=await ni(async()=>{const{setCachedData:$r,CACHE_TTL:mn}=await Promise.resolve().then(()=>xp);return{setCachedData:$r,CACHE_TTL:mn}},void 0);xr(zt,Ye,Ir.student_results_table),ke.debug(" Test results cached with key:",zt)}else ke.debug(" Drawing test submitted - not caching results (will appear after teacher grades)");ke.debug(" Clearing test progress..."),y(Y.test_type,Y.test_id);try{const pt=s?.student_id||s?.id||"unknown",zt=`test_timer_${pt}_${Y.test_type}_${Y.test_id}`;localStorage.removeItem(zt);const xr=`test_shuffle_order_${pt}_${Y.test_type}_${Y.test_id}`;localStorage.removeItem(xr)}catch{}if(s?.student_id){const pt=`test_completed_${s.student_id}_${Y.test_type}_${Y.test_id}`;localStorage.setItem(pt,"true"),ke.debug(" Test marked as completed in localStorage:",pt)}try{const pt=s?.student_id||s?.id||"",zt=`retest1_${pt}_${Y.test_type}_${Y.test_id}`,xr=`retest_assignment_id_${pt}_${Y.test_type}_${Y.test_id}`;Oe?(localStorage.removeItem(zt),localStorage.removeItem(xr),ke.debug(" Cleared retest keys (completion):",zt,xr)):ke.debug(" Retest still pending - keeping keys:",zt,xr)}catch(pt){ke.warn(" Failed to manage retest keys:",pt)}ke.debug(" Clearing test progress and anti-cheating data for THIS test only...");const nt=s?.student_id||s?.id||"unknown",bt=[],At=`test_progress_${nt}_${Y.test_type}_${Y.test_id}`,cr=`anti_cheating_${nt}_${Y.test_type}_${Y.test_id}`;for(let pt=0;pt<localStorage.length;pt++){const zt=localStorage.key(pt);zt&&(zt===At||zt===cr)&&bt.push(zt)}if(bt.forEach(pt=>{localStorage.removeItem(pt),ke.debug(` Cleared for THIS test only: ${pt}`)}),ke.debug(" Clearing anti-cheating data..."),Wt(),wr(),Y.test_type!=="drawing")Z("results");else{dt(!1),gt.current=null;try{const pt=window.history.state;if(pt&&pt.__intercept){const zt=pt.prevState??null;window.history.replaceState(zt,document.title,window.location.href)}}catch(pt){ke.warn("Failed to restore history state for drawing test:",pt)}setTimeout(()=>{window.location.href="/student"},100)}_r("Test submitted successfully!","success"),ke.debug(" Test submitted successfully")}else throw ke.error(" Test submission failed:",Ye.error),new Error(Ye.error||"Failed to submit test")}catch(le){ke.error(" Error submitting test:",le),_r("Failed to submit test","error")}finally{De(!1)}},[Y,X,B,D,Ee,y]);_.useCallback(()=>(ke.debug(" Collecting test answers..."),D),[D]);const Mt=_.useCallback(()=>{if(!B||!D)return;const le=D.filter(ge=>ge&&typeof ge=="string"&&ge.trim()!=="").length,fe=B.length>0?le/B.length*100:0;if(H(fe),ke.debug(` Progress updated: ${le}/${B.length} questions answered (${Math.round(fe)}%)`),Y){const ge={answers:D,progress:fe,lastSaved:new Date().toISOString()};g(Y.test_type,Y.test_id,ge)}},[B,D,Y,g]);_.useEffect(()=>{Mt()},[Mt]);const Be=_.useCallback(()=>D?D.filter(fe=>fe&&typeof fe=="string"&&fe.trim()!=="").length:0,[D,B]),lt=_.useCallback(()=>{if(Y&&s?.student_id){const fe=`anti_cheating_${s?.student_id||s?.id||"unknown"}_${Y.test_type}_${Y.test_id}`,ze=((Es(fe)||{tabSwitches:0}).tabSwitches||0)+1,it=ze>=2;gs(fe,{tabSwitches:ze,isCheating:it},ls.anti_cheating)}dt(!1),gt.current=null;try{const le=window.history.state;if(le&&le.__intercept){const fe=le.prevState??null;window.history.replaceState(fe,document.title,window.location.href)}}catch(le){ke.warn("Failed to restore history state in goBack:",le)}setTimeout(()=>{window.location.href="/student"},100)},[e,r,Y,s?.student_id,ir,n]),ct=_.useCallback(()=>{Ot(!1);const le=gt.current;if(gt.current=null,dt(!1),le)try{const fe=window.history.state;if(fe&&fe.__intercept){const ge=fe.prevState??null;window.history.replaceState(ge,document.title,window.location.href)}}catch(fe){ke.warn("Failed to restore history state:",fe)}setTimeout(()=>{lt()},10)},[lt]),Qt=_.useCallback(()=>{const le=gt.current;gt.current=null,le?.cancel&&le.cancel(),Ot(!1)},[]);_.useCallback(()=>{ke.debug(" Showing test results..."),Z("results")},[]);const rr=_.useCallback((le,fe,ge=null)=>{switch(ke.debug(" Formatting student answer for display:",le,"testType:",fe,"question:",ge),fe){case as.MULTIPLE_CHOICE:if(le.toString().startsWith("Option "))return le;if(ge&&typeof le=="string"&&!isNaN(parseInt(le))){const Se=parseInt(le),ze=`option_${String.fromCharCode(97+Se)}`,it=ge[ze];if(it)return ke.debug(" Converted",le,"to option text:",it),it;{const Ye=String.fromCharCode(65+Se);return ke.debug(" Converted",le,"to",Ye),Ye}}else{if(typeof le=="string"&&isNaN(parseInt(le)))return ke.debug(" Already formatted text:",le),le;{const Se=String.fromCharCode(65+parseInt(le));return ke.debug(" Converted",le,"to",Se),Se}}case as.TRUE_FALSE:return le==="true"?"True":"False";case as.INPUT:return le;case as.MATCHING:return typeof le=="object"?JSON.stringify(le):le;case as.WORD_MATCHING:return typeof le=="object"?JSON.stringify(le):le;case as.DRAWING:return le&&le.trim()!==""?"Drawing submitted":"No drawing";case as.FILL_BLANKS:return le;default:return ke.warn(" Unknown test type for answer formatting:",fe),le}},[]),_r=_.useCallback((le,fe)=>{const ge={id:Date.now(),message:le,type:fe,timestamp:new Date};L(Se=>[...Se,ge]),setTimeout(()=>{L(Se=>Se.filter(ze=>ze.id!==ge.id))},eg.NOTIFICATION_DURATION)},[]);_.useEffect(()=>{Mt()},[Mt]),_.useEffect(()=>{if(V!=="test")return;const le=Number(X?.allowed_time||0);if(!le)return;const fe=setInterval(()=>{Q(ge=>{const Se=Math.max(0,ge-1);try{const ze=Date.now();xe.current||(xe.current=ze),me.current&&localStorage.setItem(me.current,JSON.stringify({remainingSeconds:Se,lastTickAt:new Date(ze).toISOString(),startedAt:ae?ae.toISOString():new Date(ze-(le-Se)*1e3).toISOString()}))}catch{}return Se===0&&jt(),Se})},1e3);return()=>clearInterval(fe)},[V,X?.allowed_time,jt,ae]);const tn=_.useCallback((le,fe)=>{if(!le)return null;const ge=(Se,ze)=>{const it=[...D];it[fe]=ze,U(it),ke.debug(` Answer changed: question ${Se} = ${ze}`),ke.debug(" Updated studentAnswers:",it)};switch(Y.test_type){case as.TRUE_FALSE:return l.jsx(Kde,{question:le,questionIndex:fe,studentAnswer:D[fe]||"",onAnswerChange:ge,mode:"student",testId:Y?.test_id,testType:ue,displayNumber:fe+1});case as.MULTIPLE_CHOICE:return l.jsx(Yde,{question:le,questionIndex:fe,studentAnswer:D[fe]||"",onAnswerChange:ge,mode:"student",testId:Y?.test_id,testType:ue,displayNumber:fe+1});case as.INPUT:return l.jsx(Xde,{question:le,questionIndex:fe,studentAnswer:D[fe]||"",onAnswerChange:ge,mode:"student",testId:Y?.test_id,testType:ue,displayNumber:fe+1});case as.MATCHING:return ke.error("Matching test reached renderQuestion - this should not happen"),l.jsxs("div",{className:"text-center p-8",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-600 mb-4",children:"Matching Test"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"Redirecting to matching test page..."}),l.jsx(ot,{onClick:()=>r("/student"),variant:"primary",children:"Back to Dashboard"})]});case as.DRAWING:return l.jsx(a0e,{question:le,questionIndex:fe,studentAnswer:D[fe]||"",onAnswerChange:ge,mode:"student",testId:Y?.test_id,testType:ue});case as.FILL_BLANKS:return fe===0?l.jsx(x0e,{testText:X?.test_text,blanks:(B||[]).map((Se,ze)=>({id:Se.question_id||ze+1,options:Se.blank_options||[],correct_answer:Se.correct_answers?.[0]||Se.correct_answer,question:Se.question_json||""})),separateType:X?.separate_type,testId:Y?.test_id,testName:X?.test_name||Y?.test_name,teacherId:X?.teacher_id||Y?.teacher_id,subjectId:X?.subject_id||Y?.subject_id,onTestComplete:jt,onAnswerChange:(Se,ze)=>{const it=B.findIndex(Ye=>Ye.question_id===Se);if(it!==-1){const Ye=[...D];Ye[it]=ze,U(Ye),ke.debug(` Fill Blanks answer changed: question ${Se} = ${ze}`)}}},`fill-blanks-${Y?.test_id}-${X?.test_name}`):null;default:return l.jsx("div",{children:"Unsupported question type"})}},[Y,D,ue]);function Fr(){return!Y||!X||!B?null:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:`rounded-lg border-2 p-6 ${u?Bt(0).className:`${d.cardBg} ${d.cardBorder}`}`,style:u?{...Bt(0).style,...f.glowRed,boxShadow:`${f.glowRed.boxShadow}, inset 0 0 20px ${mW(he.red,.1)}`}:{},children:[l.jsx("div",{className:"flex justify-between items-center mb-4",children:l.jsx("h2",{className:`text-2xl font-bold ${u?"tracking-wider":d.text}`,style:u?{...f.textCyan,fontFamily:"monospace"}:{},children:u?(X.test_name||X.title||"Test").toUpperCase():X.test_name||X.title||"Test"})}),l.jsx("div",{className:"mb-4",children:l.jsx(dH,{answeredCount:Be(),totalQuestions:B.length,percentage:Math.round(q),timeElapsed:Number(X?.allowed_time||0)>0?te:0,showDetails:!0,themeClasses:d,isCyberpunk:u})})]}),l.jsxs("div",{className:`rounded-lg shadow p-6 border ${u?Bt(1).className:`${d.cardBg} ${d.cardBorder}`}`,style:u?{...Bt(1).style,...f.glow}:{},children:[l.jsx("h3",{className:`text-lg font-semibold ${u?"":d.text} mb-6`,style:u?{...f.textCyan,fontFamily:"monospace"}:{},children:"Answer all questions below:"}),l.jsx("div",{className:"space-y-8",children:B.map((le,fe)=>l.jsx("div",{className:"question-container",children:tn(le,fe)},le.question_id||fe))})]}),l.jsx("div",{className:"flex justify-center",children:l.jsx(ot,{variant:"primary",size:"lg",onClick:()=>Qe(!0),disabled:se||Be()<B.length,loading:se,className:"",style:u?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",borderWidth:"2px",...f.glow}:{},children:u?se?"SUBMITTING...":`SUBMIT TEST (${Be()}/${B.length})`:se?"Submitting...":`Submit Test (${Be()}/${B.length})`})})]})}if(v)return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900 flex items-center justify-center",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},children:l.jsxs("div",{className:"text-center",children:[l.jsx(un,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:t?"Starting Test...":"Loading Student Tests..."})]})});if(j)return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900 flex items-center justify-center",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Tests Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:j}),l.jsx(ot,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})});const an=n.pathname.startsWith("/student/test/");if(ke.debug(" [DEBUG] StudentTests render check - isTestRoute:",an,"pathname:",n.pathname,"propCurrentTest:",!!t),!an&&t)return ke.debug(" [DEBUG] Not on test route anymore, hiding component. Current path:",n.pathname),null;return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900 overflow-y-auto",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},children:[l.jsx(Aa,{isOpen:vt,onClose:Qt,title:"Exit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ot,{onClick:Qt,variant:"secondary",children:"Cancel"}),l.jsx(ot,{onClick:ct,variant:"primary",children:"Go Back"})]})]})}),l.jsx(Aa,{isOpen:je,onClose:()=>Qe(!1),title:"Submit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ot,{onClick:()=>Qe(!1),variant:"secondary",children:"Cancel"}),l.jsx(ot,{onClick:()=>{Qe(!1),jt()},variant:"primary",className:"",style:u?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",borderWidth:"2px",...f.glow}:{},children:u?"SUBMIT":"Submit"})]})]})}),V!=="results"&&l.jsx("div",{className:`${d.headerBg} border-b-2 ${d.headerBorder}`,style:u?{boxShadow:"0 0 20px rgba(0, 255, 255, 0.5), 0 0 40px rgba(0, 255, 255, 0.3), inset 0 0 20px rgba(0, 255, 255, 0.1)"}:{},children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:`text-2xl font-bold ${d.headerText} ${u?"tracking-wider":""}`,style:u?f.textShadow:{},children:u?"STUDENT TEST":"Student Test"})}),l.jsx(ot,{variant:"outline",onClick:()=>{gt.current=null,Ot(!0)},className:`border-2 ${d.buttonOutline} ${u?"tracking-wider":""}`,style:u?{fontFamily:"monospace",boxShadow:"0 0 10px rgba(0, 255, 255, 0.3)",textShadow:"0 0 5px rgba(0, 255, 255, 0.5)"}:{},children:u?"BACK TO CABINET":"Back to Cabinet"})]})})}),br&&V==="results"&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mx-4 sm:mx-6 lg:mx-8 mt-4",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),l.jsx("div",{className:"ml-3",children:l.jsxs("p",{className:"text-sm text-red-700",children:[l.jsx("strong",{children:"Academic Integrity Warning:"}),"This test has been flagged for suspicious behavior. You have switched tabs ",lr," times during the test."]})})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 overflow-y-auto",children:[!t&&V==="list"&&pe(),V==="test"&&Fr(),V==="results"&&Ne()]}),V==="test"&&S&&l.jsxs("div",{className:"fixed inset-0 bg-white/80 backdrop-blur-[1px] flex flex-col items-center justify-center z-50",children:[l.jsx(un,{size:"lg"}),l.jsx("p",{className:"mt-3 text-gray-700",children:"Preparing your test"}),T&&l.jsx("div",{className:"mt-3 text-sm text-gray-500",children:T})]}),l.jsx(rE,{isOpen:He,onClose:()=>rt(!1),testType:_t?.test_type,testId:_t?.test_id,testName:_t?.test_name,questions:_t?.questions,isLoading:v}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:R.map(le=>l.jsx(du,{type:le.type,message:le.message,onClose:()=>L(fe=>fe.filter(ge=>ge.id!==le.id))},le.id))})]});function pe(){return!i||i.length===0?l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:d.textSecondary,children:"No active tests available for your class."})}):l.jsx("div",{className:"space-y-6",children:i.map((le,fe)=>l.jsx("div",{className:`rounded-lg shadow p-6 border ${u?Bt(fe).className:`${d.cardBg} ${d.cardBorder}`}`,style:u?{...Bt(fe).style,boxShadow:fe%2===0?f.glowRed.boxShadow:f.glow.boxShadow}:{},children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:`text-lg font-semibold mb-2 ${u?"":d.text}`,style:u?{...f.textCyan,fontFamily:"monospace"}:{},children:u?le.test_name.toUpperCase():le.test_name}),l.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-3 gap-4 text-sm ${d.textSecondary}`,children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Subject:"})," ",le.subject]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Teacher:"})," ",le.teacher_name]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Type:"})," ",le.test_type]})]}),l.jsxs("div",{className:`mt-2 text-sm ${d.textSecondary}`,children:["Assigned: ",new Date(le.assigned_at).toLocaleDateString()]})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx(ot,{variant:"outline",onClick:()=>Fe(le),disabled:A||v,children:"View Details"}),l.jsx(ot,{variant:"primary",onClick:()=>at(le),disabled:A||v,children:A?"Starting...":"Start Test"})]})]})},fe))})}function Ne(){if(!Y||!X||!B||!D)return null;const le={};return D.forEach((fe,ge)=>{if(B[ge]){const Se=B[ge].question_id||B[ge].id||ge;le[String(Se)]=fe,ke.debug(" Converting answer:",{index:ge,questionId:Se,answer:fe,question:B[ge]})}}),ke.debug(" Final answersObject:",le),ke.debug(" Questions structure:",B.map(fe=>({id:fe.question_id,correct_answer:fe.correct_answer}))),l.jsx(rfe,{testInfo:X,questions:B,testType:Y.test_type,studentAnswers:le,onBackToCabinet:lt,checkAnswerCorrectness:Xp,formatStudentAnswerForDisplay:rr,getCorrectAnswer:Fv,caughtCheating:$t})}},ife=()=>{const{testId:e}=O_(),t=Ko(),{user:r}=Is(),{makeAuthenticatedRequest:n}=Gl(),{showNotification:s}=ci(),{theme:a,isCyberpunk:i,themeClasses:o}=Da(),c=Oa(a),[u,d]=_.useState(null),[f,h]=_.useState(!0),[g,p]=_.useState(null),[y,v]=_.useState(null),[C,S]=_.useState(!1),[w,T]=_.useState(!1),N=_.useRef(null),[A,P]=_.useState(!1);T1("matching_type",u?.id);const j=_.useCallback(()=>{if(!r?.student_id||!e)return!1;const Z=`test_completed_${r.student_id}_matching_type_${e}`,Y=localStorage.getItem(Z)==="true",re=`retest1_${r.student_id}_matching_type_${e}`,ue=localStorage.getItem(re)==="true";return Y&&!ue?(ke.debug(" Test already completed, redirecting to cabinet"),s("This test has already been completed","info"),t("/student"),!0):!1},[r?.student_id,e,t,s]),F=_.useCallback(async()=>{if(!e){p("Test ID is required"),h(!1);return}if(!j())try{h(!0),p(null);const Z=await n(`/.netlify/functions/get-matching-type-test?test_id=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!Z.ok)throw new Error("Failed to load test data");const Y=await Z.json();if(!Y.success)throw new Error(Y.message||"Failed to load test");const re=Y.data;ke.debug(" Test data from get-matching-type-test:",re);const ue=await n(`/.netlify/functions/get-test-questions?test_id=${e}&test_type=matching_type`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!ue.ok)throw new Error("Failed to load test questions");const z=await ue.json();if(!z.success)throw new Error(z.message||"Failed to load test questions");ke.debug(" Questions data from get-test-questions:",z);const X={id:re.test_id,test_name:re.test_name,teacher_id:re.teacher_id,subject_id:re.subject_id,image_url:re.image_url,image:null,blocks:(()=>{if(Array.isArray(z.questions)&&z.questions.length>0){const I=z.questions[0];return Array.isArray(I.blocks)?I.blocks.map((B,W)=>{let D=B.block_coordinates||B.coordinates||(typeof B.x=="number"?{x:B.x,y:B.y,width:B.width,height:B.height}:null);if(typeof D=="string")try{D=JSON.parse(D)}catch{D=null}return(!D||typeof D!="object")&&(D={x:0,y:0,width:30,height:10}),D={x:(typeof D.x=="number"?D.x:Number(D.x))||0,y:(typeof D.y=="number"?D.y:Number(D.y))||0,width:(typeof D.width=="number"?D.width:Number(D.width))||30,height:(typeof D.height=="number"?D.height:Number(D.height))||10},{id:B.block_id||B.question_id||B.id||W+1,word:B.word||`Word ${W+1}`,coordinates:D,hasArrow:!!B.has_arrow,arrow:B.arrow||null}}):z.questions.map(B=>{ke.debug(" Processing question:",B);let W;try{W=typeof B.block_coordinates=="string"?JSON.parse(B.block_coordinates):B.block_coordinates}catch{W={x:0,y:0,width:100,height:100}}return(!W||typeof W!="object")&&(W={x:0,y:0,width:100,height:100}),W={x:(typeof W.x=="number"?W.x:Number(W.x))||0,y:(typeof W.y=="number"?W.y:Number(W.y))||0,width:(typeof W.width=="number"?W.width:Number(W.width))||100,height:(typeof W.height=="number"?W.height:Number(W.height))||100},{id:B.question_id,word:B.word,coordinates:W,hasArrow:B.has_arrow,arrow:B.arrow}})}return[]})(),words:(()=>{if(Array.isArray(z.questions)&&z.questions.length>0){const I=z.questions[0];if(Array.isArray(I.words)){const B=I.words,W=Array.isArray(I.blocks)?I.blocks:[];return typeof B[0]=="string"?B.map((U,q)=>({id:`w_${W[q]?.question_id||W[q]?.block_id||z.questions[q]?.question_id||q+1}_${q}`,word:String(U),blockId:null,isPlaced:!1,isCorrect:!1})):B.map((U,q)=>({id:`w_${U.question_id||U.id||q+1}_${q}`,word:U.word||String(U.text||""),blockId:null,isPlaced:!1,isCorrect:!1}))}return z.questions.map(B=>({id:`w_${B.question_id}`,word:B.word,blockId:null,isPlaced:!1,isCorrect:!1}))}return[]})(),arrows:re.arrows?re.arrows.map(I=>(ke.debug(" Processing arrow:",I),{id:I.id,questionId:I.question_id,blockId:I.block_id||I.question_id,start:{x:Number(I.start_x)||0,y:Number(I.start_y)||0},end:{x:Number(I.end_x)||0,y:Number(I.end_y)||0},rel_start_x:I.rel_start_x!==null?Number(I.rel_start_x):null,rel_start_y:I.rel_start_y!==null?Number(I.rel_start_y):null,rel_end_x:I.rel_end_x!==null?Number(I.rel_end_x):null,rel_end_y:I.rel_end_y!==null?Number(I.rel_end_y):null,image_width:I.image_width?Number(I.image_width):null,image_height:I.image_height?Number(I.image_height):null,style:(typeof I.style=="string"?JSON.parse(I.style):I.style)||{color:"#dc3545",thickness:3}})):[]};if(re.image_url){const I=new Image;I.crossOrigin="anonymous",I.onload=()=>{X.image=I,d(X),h(!1)},I.onerror=()=>{ke.warn("Failed to load test image"),d(X),h(!1)},I.src=re.image_url}else d(X),h(!1)}catch(Z){ke.error("Error loading test data:",Z),p(Z.message||"Failed to load test"),h(!1)}},[e,n]);_.useEffect(()=>{r?.student_id&&F()},[F,r?.student_id]);const R=_.useCallback(async Z=>{ke.debug("Test completed:",Z),s("Test completed successfully!","success");const Y=parseInt(Z)||0,re=u?.blocks?.length||u?.words?.length||0,ue=re>0?Math.round(Y/re*100):0,z={showResults:!0,testInfo:{test_name:u?.test_name||"Test",id:u?.id,test_id:u?.id},testType:"matching_type",score:Y,totalQuestions:re,percentage:ue,passed:ue>=60,questionAnalysis:u?.questions?.map((X,I)=>({questionNumber:I+1,isCorrect:I<Y,userAnswer:I<Y?`Matched: ${X.word}`:"Not answered",correctAnswer:`Match: ${X.word}`}))||Array.from({length:re},(X,I)=>({questionNumber:I+1,isCorrect:I<Y,userAnswer:I<Y?"Matched":"Not answered",correctAnswer:"Match required"})),timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};ke.debug(" Using test results data:",z),v(z),S(!0)},[u,s]),L=_.useCallback(()=>{T(!1),N.current=null,t("/student")},[t]);k2(w&&C,_.useCallback(({confirm:Z,cancel:Y})=>{N.current={confirm:Z,cancel:Y},P(!0)},[])),_.useEffect(()=>{C?T(!0):(T(!1),N.current=null)},[C]),_.useCallback(()=>{P(!1);const Z=N.current;if(N.current=null,T(!1),Z)try{const Y=window.history.state;if(Y&&Y.__intercept){const re=Y.prevState??null;window.history.replaceState(re,document.title,window.location.href)}}catch(Y){ke.warn("Failed to restore history state:",Y)}setTimeout(()=>{v(null),S(!1),t("/student")},10)},[t]),_.useCallback(()=>{const Z=N.current;N.current=null,Z?.cancel&&Z.cancel(),P(!1)},[]);const V=_.useCallback(()=>{S(!1),v(null),F()},[F]);return f?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900 flex items-center justify-center",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},children:l.jsx(Ht,{className:"max-w-md w-full",children:l.jsxs(Ht.Body,{className:"text-center",children:[l.jsx(un,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading test..."})]})})}):g?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900 flex items-center justify-center",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},children:l.jsx(Ht,{className:"max-w-md w-full",children:l.jsxs(Ht.Body,{className:"text-center",children:[l.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Test"}),l.jsx("p",{className:"text-gray-600 mb-4",children:g}),l.jsx("button",{onClick:L,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Dashboard"})]})})}):u?C&&y?l.jsx("div",{className:"bg-gradient-to-br from-black via-gray-900 to-purple-900 overflow-y-auto min-h-screen",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},children:l.jsx(T2,{testResults:y,onBackToCabinet:()=>{T(!1),N.current=null,v(null),S(!1),t("/student")},onRetakeTest:V,isLoading:!1})}):l.jsx("div",{className:`min-h-screen ${i?"bg-gradient-to-br from-black via-gray-900 to-purple-900":"bg-white"}`,style:i?c.background:{},children:l.jsx(Jde,{testData:u,onTestComplete:R,onBackToCabinet:L})}):l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900 flex items-center justify-center",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},children:l.jsx(Ht,{className:"max-w-md w-full",children:l.jsxs(Ht.Body,{className:"text-center",children:[l.jsx("div",{className:"text-gray-500 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Test Data"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load test data"}),l.jsx("button",{onClick:L,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Dashboard"})]})})})},ofe=()=>{const{testId:e}=O_(),t=Ko(),{user:r}=Is(),{makeAuthenticatedRequest:n}=Gl(),{showNotification:s}=ci(),{theme:a,isCyberpunk:i,themeClasses:o}=Da(),c=Oa(a),[u,d]=_.useState(null),[f,h]=_.useState(!0),[g,p]=_.useState(null),[y,v]=_.useState(null),[C,S]=_.useState(!1),w=_.useCallback(()=>{if(!r?.student_id||!e)return!1;const P=`test_completed_${r.student_id}_word_matching_${e}`,j=`retest1_${r.student_id}_word_matching_${e}`;return localStorage.getItem(j)==="true"?!1:localStorage.getItem(P)==="true"},[r?.student_id,e]),T=_.useCallback(async()=>{if(!e){p("Test ID is required"),h(!1);return}if(w()){s("This test has already been completed","warning"),t("/student");return}h(!0),p(null);try{const P=`word_matching_test_${e}`,j=Es(P);if(j){if(ke.debug(" Word matching test loaded from cache:",j),j.id){let L=j,V=Array.isArray(L.correctPairs)?L.correctPairs:L.correctPairs&&typeof L.correctPairs=="object"?Object.keys(L.correctPairs).map(Z=>[Number(Z),L.correctPairs[Z]]).sort((Z,Y)=>Z[0]-Y[0]).map(([,Z])=>Z):null;if(Array.isArray(L.leftWords)&&Array.isArray(L.rightWords)&&Array.isArray(V)){const Z=L.rightWords.map((I,B)=>B),Y=L.leftWords.map((I,B)=>B);for(let I=Z.length-1;I>0;I--){const B=Math.floor(Math.random()*(I+1));[Z[I],Z[B]]=[Z[B],Z[I]]}for(let I=Y.length-1;I>0;I--){const B=Math.floor(Math.random()*(I+1));[Y[I],Y[B]]=[Y[B],Y[I]]}const re=Z.map(I=>L.rightWords[I]),ue=Y.map(I=>L.leftWords[I]),z=new Map(Z.map((I,B)=>[I,B])),X=Y.map(I=>{const B=V[I];return z.get(B)});L={...L,leftWords:ue,rightWords:re,correctPairs:X}}d(L)}else{let V={id:j.test_id,test_id:j.test_id,test_name:j.test_name,teacher_id:j.teacher_id,subject_id:j.subject_id,num_questions:j.num_questions,interaction_type:j.interaction_type,passing_score:j.passing_score,allowed_time:j.allowed_time,created_at:j.created_at,updated_at:j.updated_at,leftWords:j.leftWords,rightWords:j.rightWords,correctPairs:j.correctPairs,originalPairs:j.originalPairs},Z=Array.isArray(V.correctPairs)?V.correctPairs:V.correctPairs&&typeof V.correctPairs=="object"?Object.keys(V.correctPairs).map(Y=>[Number(Y),V.correctPairs[Y]]).sort((Y,re)=>Y[0]-re[0]).map(([,Y])=>Y):null;if(Array.isArray(V.leftWords)&&Array.isArray(V.rightWords)&&Array.isArray(Z)){const Y=V.rightWords.map((B,W)=>W),re=V.leftWords.map((B,W)=>W);for(let B=Y.length-1;B>0;B--){const W=Math.floor(Math.random()*(B+1));[Y[B],Y[W]]=[Y[W],Y[B]]}for(let B=re.length-1;B>0;B--){const W=Math.floor(Math.random()*(B+1));[re[B],re[W]]=[re[W],re[B]]}const ue=Y.map(B=>V.rightWords[B]),z=re.map(B=>V.leftWords[B]),X=new Map(Y.map((B,W)=>[B,W])),I=re.map(B=>{const W=Z[B];return X.get(W)});V={...V,leftWords:z,rightWords:ue,correctPairs:I}}d(V)}h(!1);return}const R=await(await n(`/.netlify/functions/get-word-matching-test?test_id=${e}`)).json();if(R.success){const L={id:R.data.test_id,test_id:R.data.test_id,test_name:R.data.test_name,teacher_id:R.data.teacher_id,subject_id:R.data.subject_id,num_questions:R.data.num_questions,interaction_type:R.data.interaction_type,passing_score:R.data.passing_score,allowed_time:R.data.allowed_time,created_at:R.data.created_at,updated_at:R.data.updated_at,leftWords:R.data.leftWords,rightWords:R.data.rightWords,correctPairs:R.data.correctPairs,originalPairs:R.data.originalPairs};let V=L,Z=Array.isArray(V.correctPairs)?V.correctPairs:V.correctPairs&&typeof V.correctPairs=="object"?Object.keys(V.correctPairs).map(Y=>[Number(Y),V.correctPairs[Y]]).sort((Y,re)=>Y[0]-re[0]).map(([,Y])=>Y):null;if(Array.isArray(V.leftWords)&&Array.isArray(V.rightWords)&&Array.isArray(Z)){const Y=V.rightWords.map((B,W)=>W),re=V.leftWords.map((B,W)=>W);for(let B=Y.length-1;B>0;B--){const W=Math.floor(Math.random()*(B+1));[Y[B],Y[W]]=[Y[W],Y[B]]}for(let B=re.length-1;B>0;B--){const W=Math.floor(Math.random()*(B+1));[re[B],re[W]]=[re[W],re[B]]}const ue=Y.map(B=>V.rightWords[B]),z=re.map(B=>V.leftWords[B]),X=new Map(Y.map((B,W)=>[B,W])),I=re.map(B=>{const W=Z[B];return X.get(W)});V={...V,leftWords:z,rightWords:ue,correctPairs:I}}d(V),gs(P,V,ls.word_matching_test),ke.debug(" Word matching test loaded from API and cached:",L)}else throw new Error(R.message||"Failed to load test")}catch(P){ke.error("Error loading word matching test:",P),p(P.message),s("Failed to load test: "+P.message,"error")}finally{h(!1)}},[e,w,n,s,t]),N=_.useCallback(async P=>{ke.debug("Test completed:",P),s("Test completed successfully!","success");const j=typeof P=="object"?parseInt(P.score)||0:parseInt(P)||0,F=typeof P=="object"&&P.caught_cheating||!1,R=typeof P=="object"&&P.visibility_change_times||0,L=u?.num_questions||0,V=L>0?Math.round(j/L*100):0,Z={showResults:!0,testInfo:{test_name:u?.test_name||"Test",id:u?.id,test_id:u?.id},testType:"word_matching",score:j,totalQuestions:L,percentage:V,passed:V>=60,questionAnalysis:Array.isArray(u?.correctPairs)?u.correctPairs.map((Y,re)=>({questionNumber:re+1,isCorrect:re<j,userAnswer:re<j?`${Y.left}  ${Y.right}`:"Not answered",correctAnswer:`${Y.left}  ${Y.right}`})):Array.from({length:L},(Y,re)=>({questionNumber:re+1,isCorrect:re<j,userAnswer:re<j?"Matched":"Not answered",correctAnswer:"Match required"})),timestamp:new Date().toISOString(),caught_cheating:F,visibility_change_times:R};ke.debug(" Using test results data:",Z),v(Z),S(!0)},[u,s]),A=_.useCallback(()=>{t("/student")},[t]);return _.useEffect(()=>{T()},[T]),f?l.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},children:l.jsxs(Ht,{className:"p-8 text-center",children:[l.jsx(un,{size:"lg",className:"mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading word matching test..."})]})}):g?l.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},children:l.jsx(Ht,{className:"p-8 text-center",children:l.jsxs("div",{className:"text-red-600 mb-4",children:[l.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error Loading Test"}),l.jsx("p",{className:"text-gray-600 mb-4",children:g}),l.jsx("button",{onClick:()=>t("/student"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Cabinet"})]})})}):u?C&&y?l.jsx("div",{className:"bg-gradient-to-br from-black via-gray-900 to-purple-900 overflow-y-auto min-h-screen",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},children:l.jsx(T2,{testResults:y,onBackToCabinet:()=>{v(null),S(!1),t("/student")},onRetakeTest:(P,j)=>{v(null),S(!1),T()},isLoading:!1,caught_cheating:y.caught_cheating||!1,visibility_change_times:y.visibility_change_times||0})}):l.jsx(ht.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:`min-h-screen py-8 ${i?"bg-gradient-to-br from-black via-gray-900 to-purple-900":"bg-white"}`,style:i?c.background:{},children:l.jsx(e0e,{testData:u,onTestComplete:N,onBackToCabinet:A})}):l.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},children:l.jsx(Ht,{className:"p-8 text-center",children:l.jsxs("div",{className:"text-gray-600 mb-4",children:[l.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Not Found"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"The requested test could not be found."}),l.jsx("button",{onClick:()=>t("/student"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Cabinet"})]})})})},lfe=_.forwardRef(({onRecordingComplete:e,minDuration:t=0,maxDuration:r=600,minWords:n=50,maxAttempts:s=3,currentAttempt:a=1},i)=>{const{theme:o,isCyberpunk:c,themeClasses:u}=Da(),d=Oa(o),[f,h]=_.useState(!1),[g,p]=_.useState(!1),[y,v]=_.useState(0),[C,S]=_.useState(null),[w,T]=_.useState(null),[N,A]=_.useState("good"),P=_.useRef(null),j=_.useRef([]),F=_.useRef(null),R=_.useRef(null),L=_.useRef(null),V=_.useRef(null),Z=_.useRef(null);_.useImperativeHandle(i,()=>({startRecording:()=>Y(),stopRecording:()=>re(),pauseRecording:()=>ue(),resumeRecording:()=>z()}));const Y=_.useCallback(async()=>{try{if(T(null),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox.");if(!window.isSecureContext&&!window.location.hostname.includes("localhost"))throw new Error("Microphone access requires HTTPS. Please use a secure connection.");const D=window.AudioContext||window.webkitAudioContext;L.current||(L.current=new D),L.current.state!=="running"&&await L.current.resume().catch(()=>{}),console.log(" Requesting microphone permission...");const U=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,channelCount:1}});console.log(" Microphone permission granted"),F.current=U;try{let ae=document.getElementById("ios-audio-sink");ae||(ae=document.createElement("audio"),ae.id="ios-audio-sink",ae.muted=!0,ae.playsInline=!0,ae.style.display="none",document.body.appendChild(ae)),ae.srcObject=U,await ae.play().catch(()=>{})}catch{}const q=L.current.createAnalyser();L.current.createMediaStreamSource(U).connect(q),q.fftSize=256,V.current=q,X();let te="audio/webm;codecs=opus";typeof MediaRecorder<"u"&&MediaRecorder.isTypeSupported&&!MediaRecorder.isTypeSupported(te)&&(MediaRecorder.isTypeSupported("audio/mp4")?te="audio/mp4":MediaRecorder.isTypeSupported("audio/aac")?te="audio/aac":te="");const Q=new MediaRecorder(U,te?{mimeType:te}:void 0);P.current=Q,j.current=[],Q.ondataavailable=ae=>{ae.data.size>0&&j.current.push(ae.data)},Q.onstop=()=>{const ae=te&&te.startsWith("audio/")?te:"audio/webm",ce=new Blob(j.current,{type:ae});S(ce),e(ce,y),F.current&&F.current.getTracks().forEach(me=>me.stop()),Z.current&&cancelAnimationFrame(Z.current)},Q.start(1e3),h(!0),v(0),R.current=setInterval(()=>{v(ae=>{const ce=ae+1;return ce>=r&&re(),ce})},1e3)}catch(D){console.error("Error starting recording:",D);const U=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;D.name==="NotAllowedError"?T(U?"Microphone access denied. Please go to Settings > Safari > Microphone and allow access, then refresh the page.":"Microphone access denied. Please allow microphone access in your browser settings and try again."):D.name==="NotFoundError"?T("No microphone found. Please connect a microphone and try again."):D.name==="NotSupportedError"?T("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox."):D.message.includes("HTTPS")?T("Microphone access requires HTTPS. Please use a secure connection."):T(`Failed to access microphone: ${D.message}`)}},[r]),re=_.useCallback(()=>{if(P.current&&f&&(P.current.stop(),h(!1),p(!1),R.current&&clearInterval(R.current),y<t)){T(`Recording must be at least ${t} seconds long.`);return}},[f,y,t,C,e]),ue=_.useCallback(()=>{P.current&&f&&!g&&(P.current.pause(),p(!0),R.current&&clearInterval(R.current))},[f,g]),z=_.useCallback(()=>{P.current&&f&&g&&(P.current.resume(),p(!1),R.current=setInterval(()=>{v(D=>{const U=D+1;return U>=r&&re(),U})},1e3))},[f,g,r,re]),X=_.useCallback(()=>{if(!V.current)return;const D=V.current,U=new Uint8Array(D.frequencyBinCount),q=()=>{D.getByteFrequencyData(U);const H=U.reduce((te,Q)=>te+Q,0)/U.length;H<10?A("poor"):H<30?A("fair"):A("good"),f&&(Z.current=requestAnimationFrame(q))};q()},[f]),I=D=>{const U=Math.floor(D/60),q=D%60;return`${U}:${q.toString().padStart(2,"0")}`},B=()=>{switch(N){case"poor":return"text-red-600";case"fair":return"text-yellow-600";case"good":return"text-green-600";default:return"text-gray-600"}},W=()=>{switch(N){case"poor":return"Poor audio quality - speak closer to microphone";case"fair":return"Fair audio quality - good for recording";case"good":return"Excellent audio quality";default:return"Monitoring audio quality..."}};return l.jsxs("div",{className:`audio-recorder rounded-lg shadow-lg p-3 sm:p-6 ${c?Bt(1).className:"bg-white"}`,style:c?{...Bt(1).style,...d.glow}:{},children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h3",{className:"text-xl font-semibold mb-2 ",style:c?{...d.textCyan,fontFamily:"monospace"}:{},children:c?"RECORD YOUR RESPONSE":"Record Your Response"}),l.jsx("p",{className:c?"":"text-gray-600",style:c?{color:he.cyan,fontFamily:"monospace"}:{},children:c?"SPEAK CLEARLY AND AT A NORMAL PACE. YOU CAN PAUSE AND RESUME IF NEEDED.":"Speak clearly and at a normal pace. You can pause and resume if needed."})]}),l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:`text-4xl font-bold mb-2 ${c?"":"text-blue-600"}`,style:c?{...d.textCyan,fontFamily:"monospace"}:{},children:I(y)}),l.jsx("div",{className:`text-sm ${B()}`,style:c?{color:he.cyan,fontFamily:"monospace"}:{},children:W()}),g&&l.jsx("div",{className:`font-semibold mt-2 ${c?"":"text-yellow-600"}`,style:c?{color:he.yellow,fontFamily:"monospace",...d.textShadowYellow}:{},children:c?" RECORDING PAUSED":" Recording Paused"})]}),f&&l.jsx("div",{className:"mb-6",children:l.jsx("div",{className:"flex justify-center items-center space-x-1 h-8",children:Array.from({length:20},(D,U)=>l.jsx("div",{className:"bg-blue-400 rounded-sm",style:{width:"4px",height:`${Math.random()*20+4}px`,animation:"pulse 0.5s ease-in-out infinite"}},U))})}),l.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-center mb-6",children:f?l.jsxs(l.Fragment,{children:[g?l.jsxs("button",{onClick:z,className:"w-full sm:w-auto bg-green-600 text-white px-6 py-4 rounded-full hover:bg-green-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Resume"})]}):l.jsxs("button",{onClick:ue,className:"w-full sm:w-auto bg-yellow-600 text-white px-6 py-4 rounded-full hover:bg-yellow-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Pause"})]}),l.jsxs("button",{onClick:re,className:"w-full sm:w-auto bg-gray-600 text-white px-6 py-4 rounded-full hover:bg-gray-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Stop & Submit"})]})]}):l.jsxs("button",{onClick:Y,className:"w-full sm:w-auto bg-red-600 text-white px-6 py-4 rounded-full hover:bg-red-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Start Recording"})]})}),w&&l.jsx("div",{className:"mt-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("p",{className:"text-red-800",children:w})}),l.jsxs("div",{className:`mt-4 text-center text-sm ${c?"":"text-gray-600"}`,style:c?{color:he.cyan,fontFamily:"monospace"}:{},children:[c?`ATTEMPT ${a} OF ${s}`:`Attempt ${a} of ${s}`,a<s&&l.jsx("span",{className:`ml-2 ${c?"":"text-blue-600"}`,style:c?{color:he.cyan,fontFamily:"monospace"}:{},children:c?"(YOU CAN RE-RECORD IF NEEDED)":"(You can re-record if needed)"})]})]})}),EH=({audioBlob:e,audioUrl:t,recordingTime:r,className:n=""})=>{const{theme:s,isCyberpunk:a,themeClasses:i}=Da(),o=Oa(s),c=typeof window<"u"&&window.location.pathname.includes("/student"),u=a&&c,[d,f]=_.useState(!1),[h,g]=_.useState(0),[p,y]=_.useState(0),[v,C]=_.useState(1),[S,w]=_.useState(1),[T,N]=_.useState(!0),[A,P]=_.useState(""),[j,F]=_.useState(!1),[R,L]=_.useState(null),[V,Z]=_.useState(!1),Y=_.useRef(null),re=_.useRef(null),ue=_.useRef(!1);_.useEffect(()=>()=>{ue.current=!0},[]),_.useEffect(()=>{let H=!1;if(t)H||P(t);else if(e){if(!e||e.size===0){H||N(!1);return}if(!(e instanceof Blob)){console.error("audioBlob is not a Blob:",typeof e,e),H||N(!1);return}const te=URL.createObjectURL(e);return H||P(te),()=>{H=!0,URL.revokeObjectURL(te)}}return()=>{H=!0}},[e,t]),_.useEffect(()=>{let H=!1;const te=ae=>{try{const ce=new URL(ae);return/\/storage\/v1\/object\/public\//.test(ce.pathname)}catch{return!1}};async function Q(ae){if(!ae||V||/\/object\/sign\//.test(ae)||!te(ae))return ae;try{const me=new URL(ae).pathname.replace(/^\/storage\/v1\/object\/public\//,""),xe=me.split("/")[0],se=me.substring(xe.length+1),De=await fetch(`/.netlify/functions/get-speaking-test-new?action=sign-audio&bucket=${encodeURIComponent(xe)}&file_path=${encodeURIComponent(se)}`);if(De.ok){const{url:He}=await De.json();if(!H&&!ue.current){Z(!0);try{await fetch(He,{headers:{Range:"bytes=0-1"},mode:"cors"})}catch{}P(He)}return He}}catch{}return ae}return(async()=>{if(t){const ae=await Q(t);try{await fetch(ae,{headers:{Range:"bytes=0-1"},mode:"cors"})}catch{}!H&&!ue.current&&!V&&P(ae)}})(),()=>{H=!0}},[t,V]),_.useEffect(()=>{let H=!1;return A&&(H||(F(!1),L(null),N(!0))),()=>{H=!0}},[A]),_.useEffect(()=>{if(Y.current&&A){const H=Y.current;let te=!1;try{H.src=A}catch{}H.load();const Q=()=>{if(te||ue.current)return;let tt=H.duration;if(tt===1/0)try{H.currentTime=1e101,H.ontimeupdate=()=>{if(te||ue.current)return;H.ontimeupdate=null;const Pe=H.duration;te||(y(isFinite(Pe)&&Pe>0?Pe:0),H.currentTime=0,N(!1))};return}catch(Pe){console.warn("Seek trick failed:",Pe)}if(isNaN(tt)||!isFinite(tt)||tt<=0){const Pe=H.seekable&&H.seekable.length>0&&isFinite(H.seekable.end(0)),je=!Pe&&H.buffered&&H.buffered.length>0&&isFinite(H.buffered.end(H.buffered.length-1));Pe?tt=H.seekable.end(0):je&&(tt=H.buffered.end(H.buffered.length-1))}isNaN(tt)||!isFinite(tt)||tt<=0?(console.warn("Invalid audio duration after fallbacks:",tt),r&&r>0?te||y(r):te||y(0)):te||y(tt),te||N(!1)},ae=()=>{te||ue.current||Q()},ce=()=>{te||ue.current||Q()},me=()=>{te||ue.current||Q()},xe=()=>{te||ue.current||Q()},se=()=>{te||ue.current||g(H.currentTime)},De=()=>{te||ue.current||(f(!1),g(0))},He=()=>{te||ue.current||f(!0)},rt=()=>{te||ue.current||f(!1)},_t=tt=>{if(te||ue.current)return;console.error("Audio loading error:",tt),console.error("Audio error details:",{error:H.error,networkState:H.networkState,readyState:H.readyState,src:H.src,currentSrc:H.currentSrc});const Pe=H.error?.code;Pe===4&&F(!0),L(H.error||{code:Pe}),N(!1)},Ke=setTimeout(()=>{te||ue.current||H.readyState===0&&N(!1)},6e3);return H.addEventListener("loadedmetadata",ae),H.addEventListener("durationchange",ce),H.addEventListener("canplay",me),H.addEventListener("canplaythrough",xe),H.addEventListener("timeupdate",se),H.addEventListener("ended",De),H.addEventListener("play",He),H.addEventListener("pause",rt),H.addEventListener("error",_t),()=>{te=!0,clearTimeout(Ke),H.removeEventListener("loadedmetadata",ae),H.removeEventListener("durationchange",ce),H.removeEventListener("canplay",me),H.removeEventListener("canplaythrough",xe),H.removeEventListener("timeupdate",se),H.removeEventListener("ended",De),H.removeEventListener("play",He),H.removeEventListener("pause",rt),H.removeEventListener("error",_t),H.pause(),H.src="",H.load()}}},[A,r]),_.useEffect(()=>{let H=!1;return r&&r>0&&(isNaN(p)||!isFinite(p)||p<=0)&&(H||y(r)),()=>{H=!0}},[r,p]);const z=()=>{Y.current&&(d?Y.current.pause():Y.current.play().catch(H=>{console.error("Play failed:",H)}))},X=H=>{if(Y.current&&re.current&&p>0){const te=re.current.getBoundingClientRect(),Q=H.clientX-te.left,ae=te.width,ce=Math.max(0,Math.min(p,Q/ae*p));isFinite(ce)&&ce>=0&&(Y.current.currentTime=ce,g(ce))}},I=H=>{const te=parseFloat(H.target.value);C(te),Y.current&&(Y.current.volume=te)},B=H=>{const te=parseFloat(H.target.value);w(te),Y.current&&(Y.current.playbackRate=te)},W=H=>{if(isNaN(H))return"0:00";const te=Math.floor(H/60),Q=Math.floor(H%60);return`${te}:${Q.toString().padStart(2,"0")}`};if(!e&&!t)return l.jsx("div",{className:`audio-player ${n} ${u?Bt(0).className:""}`,style:u?{...Bt(0).style,...o.glow}:{},children:l.jsx("div",{className:`text-center py-8 ${u?"":"text-gray-500"}`,style:u?{color:he.cyan,fontFamily:"monospace"}:{},children:u?"NO AUDIO AVAILABLE":"No audio available"})});const U=(H=>{try{const Q=(H||"").toLowerCase().split("?")[0].split("#")[0];return Q.endsWith(".webm")?"audio/webm":Q.endsWith(".mp3")?"audio/mpeg":Q.endsWith(".m4a")?"audio/mp4":Q.endsWith(".aac")?"audio/aac":Q.endsWith(".wav")?"audio/wav":void 0}catch{return}})(A||t),q=zs.useMemo(()=>typeof window>"u"?!0:document.createElement("audio").canPlayType("audio/webm")!=="",[]);return l.jsxs("div",{className:`audio-player rounded-lg p-4 ${n} ${u?Bt(0).className:"bg-gray-50"}`,style:u?{...Bt(0).style,...o.glow}:{},children:[l.jsx("audio",{ref:Y,preload:"metadata",controls:!1,style:{display:"none"},crossOrigin:"anonymous",children:l.jsx("source",{src:A,type:U})}),T?l.jsxs("div",{className:"text-center py-4",children:[l.jsx("div",{className:`inline-block animate-spin rounded-full h-6 w-6 border-b-2 ${u?"":"border-blue-600"}`,style:u?{borderColor:he.cyan}:{}}),l.jsx("p",{className:`text-sm mt-2 ${u?"":"text-gray-600"}`,style:u?{color:he.cyan,fontFamily:"monospace"}:{},children:u?"LOADING AUDIO...":"Loading audio..."})]}):j?l.jsxs("div",{className:"text-center py-4",children:[l.jsx("p",{className:`text-sm ${u?"":"text-red-600"}`,style:u?{color:he.red,fontFamily:"monospace",...o.textShadowRed}:{},children:u?"THIS AUDIO FORMAT ISN'T SUPPORTED BY YOUR BROWSER.":"This audio format isn't supported by your browser."}),A?l.jsx("a",{href:A,target:"_blank",rel:"noopener noreferrer",className:`underline text-sm ${u?"":"text-blue-600"}`,style:u?{color:he.cyan,fontFamily:"monospace",...o.textShadow}:{},children:u?"OPEN IN NEW TAB":"Open in new tab"}):null,U?l.jsx("p",{className:`text-xs mt-1 ${u?"":"text-gray-500"}`,style:u?{color:he.cyan,fontFamily:"monospace"}:{},children:u?`DETECTED TYPE: ${U}`:`Detected type: ${U}`}):null,l.jsx("p",{className:`text-xs mt-1 ${u?"":"text-gray-500"}`,style:u?{color:he.cyan,fontFamily:"monospace"}:{},children:u?`BROWSER WEBM SUPPORT: ${q?"YES":"NO"}${q?"":" - TRY USING CHROME, FIREFOX, OR EDGE"}`:`Browser WebM support: ${q?"Yes":"No"}${q?"":" - Try using Chrome, Firefox, or Edge"}`}),l.jsx("p",{className:`text-xs mt-1 ${u?"":"text-gray-500"}`,style:u?{color:he.cyan,fontFamily:"monospace"}:{},children:u?"PREFERRED FORMAT: WEBM":"Preferred format: WebM"})]}):R?l.jsxs("div",{className:"text-center py-4",children:[l.jsx("p",{className:`text-sm ${u?"":"text-red-600"}`,style:u?{color:he.red,fontFamily:"monospace",...o.textShadowRed}:{},children:u?"PLAYBACK FAILED. PLEASE TRY OPENING THE AUDIO DIRECTLY.":"Playback failed. Please try opening the audio directly."}),A?l.jsx("a",{href:A,target:"_blank",rel:"noopener noreferrer",className:`underline text-sm ${u?"":"text-blue-600"}`,style:u?{color:he.cyan,fontFamily:"monospace",...o.textShadow}:{},children:u?"OPEN IN NEW TAB":"Open in new tab"}):null,U?l.jsx("p",{className:`text-xs mt-1 ${u?"":"text-gray-500"}`,style:u?{color:he.cyan,fontFamily:"monospace"}:{},children:u?`DETECTED TYPE: ${U}`:`Detected type: ${U}`}):null]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{ref:re,className:`w-full rounded-full h-3 cursor-pointer hover:h-4 transition-all min-h-[24px] ${u?"bg-gray-800":"bg-gray-200"}`,onClick:X,style:u?{...o.glow}:{},children:l.jsx("div",{className:`h-3 rounded-full transition-all ${u?"":"bg-blue-600"}`,style:u?{backgroundColor:he.cyan,width:`${h/p*100}%`,boxShadow:`0 0 8px ${he.cyan}`}:{width:`${h/p*100}%`}})}),l.jsxs("div",{className:`flex justify-between text-sm mt-2 font-medium ${u?"":"text-gray-600"}`,style:u?{color:he.cyan,fontFamily:"monospace"}:{},children:[l.jsx("span",{children:W(h)}),l.jsx("span",{children:W(p)})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("button",{onClick:z,className:`p-3 rounded-full transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center border-2 ${u?"border":"bg-blue-600 text-white hover:bg-blue-700"}`,style:u?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",...o.glow}:{},children:d?l.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):l.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("svg",{className:`w-5 h-5 ${u?"":"text-gray-600"}`,style:u?{color:he.cyan,fontFamily:"monospace"}:{},fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.617 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.617l3.766-3.793a1 1 0 011.617.793zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})}),l.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:v,onChange:I,className:`w-24 h-3 rounded-lg appearance-none cursor-pointer min-h-[20px] ${u?"bg-gray-800":"bg-gray-200"}`,style:u?{accentColor:he.cyan}:{}}),l.jsxs("span",{className:`text-sm w-10 font-medium ${u?"":"text-gray-600"}`,style:u?{color:he.cyan,fontFamily:"monospace"}:{},children:[Math.round(v*100),"%"]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:`text-sm ${u?"":"text-gray-600"}`,style:u?{color:he.cyan,fontFamily:"monospace"}:{},children:u?"SPEED:":"Speed:"}),l.jsxs("select",{value:S,onChange:B,className:`text-sm border rounded px-2 py-1 ${u?"border":"border-gray-300"}`,style:u?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace"}:{},children:[l.jsx("option",{value:"0.5",children:"0.5x"}),l.jsx("option",{value:"0.75",children:"0.75x"}),l.jsx("option",{value:"1",children:"1x"}),l.jsx("option",{value:"1.25",children:"1.25x"}),l.jsx("option",{value:"1.5",children:"1.5x"}),l.jsx("option",{value:"2",children:"2x"})]})]})]})]})]})},cfe=({transcript:e,scores:t,audioBlob:r,recordingTime:n,onReRecord:s,onFinalSubmit:a,canReRecord:i,attemptNumber:o,maxAttempts:c,isSubmitting:u=!1})=>{const{theme:d,isCyberpunk:f,themeClasses:h}=Da(),g=Oa(d),[p,y]=_.useState(!1);console.log(" FeedbackDisplay received recordingTime:",n);const v=(N,A)=>{const P=N/A*100;return f?P>=80?he.cyan:he.red:P>=80?"text-green-600":P>=60?"text-yellow-600":"text-red-600"},C=(N,A)=>{if(f)return"";const P=N/A*100;return P>=80?"text-green-600":P>=60?"text-yellow-600":"text-red-600"},S=(N,A)=>{const P=N/A*100;return P>=90?"A+":P>=80?"A":P>=70?"B":P>=60?"C":P>=50?"D":"F"},w=()=>S(t?.overall_score||0,100),T=()=>v(t?.overall_score||0,100);return console.log(" FeedbackDisplay received scores:",t),console.log(" Individual score values:",{grammar_score:t?.grammar_score,vocabulary_score:t?.vocabulary_score,pronunciation_score:t?.pronunciation_score,fluency_score:t?.fluency_score,content_score:t?.content_score}),l.jsxs("div",{className:`feedback-display rounded-lg shadow-lg p-3 sm:p-6 ${f?Bt(0).className:"bg-white"}`,style:f?{...Bt(0).style,...g.glow}:{},children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold mb-2 ",style:f?{...g.textCyan,fontFamily:"monospace"}:{},children:f?"SPEAKING TEST RESULTS":"Speaking Test Results"}),l.jsx("p",{className:f?"":"text-gray-600",style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?"REVIEW YOUR PERFORMANCE AND DECIDE WHETHER TO SUBMIT OR RE-RECORD.":"Review your performance and decide whether to submit or re-record."})]}),l.jsx("div",{className:`p-3 sm:p-6 rounded-lg mb-6 border-2 ${f?Bt(1).className:"bg-gradient-to-r from-blue-50 to-green-50"}`,style:f?{...Bt(1).style,...g.glow}:{},children:l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:`text-4xl font-bold ${f?"":T()}`,style:f?{color:v(t?.overall_score||0,100),fontFamily:"monospace",...t?.overall_score>=80?g.textShadow:g.textShadowRed}:{},children:[t?.overall_score||0,"/100"]}),l.jsx("div",{className:`text-2xl font-semibold mt-2 ${f?"":T()}`,style:f?{color:v(t?.overall_score||0,100),fontFamily:"monospace",...t?.overall_score>=80?g.textShadow:g.textShadowRed}:{},children:f?`GRADE: ${w()}`:`Grade: ${w()}`}),l.jsx("div",{className:`mt-2 ${f?"":"text-gray-600"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:t?.overall_score>=80?f?"EXCELLENT WORK!":"Excellent work!":t?.overall_score>=60?f?"GOOD JOB!":"Good job!":t?.overall_score>=50?f?"NOT BAD, BUT COULD BE BETTER.":"Not bad, but could be better.":f?"KEEP PRACTICING!":"Keep practicing!"})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:`border rounded-lg p-3 sm:p-4 ${f?Bt(2).className:"bg-white"}`,style:f?{...Bt(2).style}:{},children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:`font-semibold ${f?"":"text-gray-700"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?"GRAMMAR":"Grammar"}),l.jsxs("span",{className:`font-bold ${f?"":C(t?.grammar_score||0,25)}`,style:f?{color:v(t?.grammar_score||0,25),fontFamily:"monospace"}:{},children:[t?.grammar_score||0,"/25"]})]}),l.jsx("div",{className:`text-sm ${f?"":"text-gray-600"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?`${t?.grammar_mistakes||0} MISTAKES FOUND`:`${t?.grammar_mistakes||0} mistakes found`}),l.jsx("div",{className:`w-full rounded-full h-2 mt-2 ${f?"bg-gray-800":"bg-gray-200"}`,children:l.jsx("div",{className:`h-2 rounded-full ${f?"":"bg-green-600"}`,style:f?{backgroundColor:v(t?.grammar_score||0,25),width:`${Math.min((t?.grammar_score||0)/25*100,100)}%`}:{width:`${Math.min((t?.grammar_score||0)/25*100,100)}%`}})})]}),l.jsxs("div",{className:`border rounded-lg p-3 sm:p-4 ${f?Bt(0).className:"bg-white"}`,style:f?{...Bt(0).style}:{},children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:`font-semibold ${f?"":"text-gray-700"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?"VOCABULARY":"Vocabulary"}),l.jsxs("span",{className:`font-bold ${f?"":C(t?.vocabulary_score||0,20)}`,style:f?{color:v(t?.vocabulary_score||0,20),fontFamily:"monospace"}:{},children:[t?.vocabulary_score||0,"/20"]})]}),l.jsx("div",{className:`text-sm ${f?"":"text-gray-600"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?`${t?.vocabulary_mistakes||0} VOCABULARY ISSUES`:`${t?.vocabulary_mistakes||0} vocabulary issues`}),l.jsx("div",{className:`w-full rounded-full h-2 mt-2 ${f?"bg-gray-800":"bg-gray-200"}`,children:l.jsx("div",{className:`h-2 rounded-full ${f?"":"bg-purple-600"}`,style:f?{backgroundColor:v(t?.vocabulary_score||0,20),width:`${Math.min((t?.vocabulary_score||0)/20*100,100)}%`}:{width:`${Math.min((t?.vocabulary_score||0)/20*100,100)}%`}})})]}),l.jsxs("div",{className:`border rounded-lg p-3 sm:p-4 ${f?Bt(1).className:"bg-white"}`,style:f?{...Bt(1).style}:{},children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:`font-semibold ${f?"":"text-gray-700"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?"PRONUNCIATION":"Pronunciation"}),l.jsxs("span",{className:`font-bold ${f?"":C(t?.pronunciation_score||0,15)}`,style:f?{color:v(t?.pronunciation_score||0,15),fontFamily:"monospace"}:{},children:[t?.pronunciation_score||0,"/15"]})]}),l.jsx("div",{className:`text-sm ${f?"":"text-gray-600"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?"CLARITY AND ACCURACY":"Clarity and accuracy"}),l.jsx("div",{className:`w-full rounded-full h-2 mt-2 ${f?"bg-gray-800":"bg-gray-200"}`,children:l.jsx("div",{className:`h-2 rounded-full ${f?"":"bg-orange-600"}`,style:f?{backgroundColor:v(t?.pronunciation_score||0,15),width:`${Math.min((t?.pronunciation_score||0)/15*100,100)}%`}:{width:`${Math.min((t?.pronunciation_score||0)/15*100,100)}%`}})})]}),l.jsxs("div",{className:`border rounded-lg p-3 sm:p-4 ${f?Bt(2).className:"bg-white"}`,style:f?{...Bt(2).style}:{},children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:`font-semibold ${f?"":"text-gray-700"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?"FLUENCY":"Fluency"}),l.jsxs("span",{className:`font-bold ${f?"":C(t?.fluency_score||0,20)}`,style:f?{color:v(t?.fluency_score||0,20),fontFamily:"monospace"}:{},children:[t?.fluency_score||0,"/20"]})]}),l.jsx("div",{className:`text-sm ${f?"":"text-gray-600"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?"PACE, PAUSES, AND FLOW":"Pace, pauses, and flow"}),l.jsx("div",{className:`w-full rounded-full h-2 mt-2 ${f?"bg-gray-800":"bg-gray-200"}`,children:l.jsx("div",{className:`h-2 rounded-full ${f?"":"bg-blue-600"}`,style:f?{backgroundColor:v(t?.fluency_score||0,20),width:`${Math.min((t?.fluency_score||0)/20*100,100)}%`}:{width:`${Math.min((t?.fluency_score||0)/20*100,100)}%`}})})]}),l.jsxs("div",{className:`border rounded-lg p-3 sm:p-4 ${f?Bt(0).className:"bg-white"}`,style:f?{...Bt(0).style}:{},children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:`font-semibold ${f?"":"text-gray-700"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?"CONTENT":"Content"}),l.jsxs("span",{className:`font-bold ${f?"":C(t?.content_score||0,20)}`,style:f?{color:v(t?.content_score||0,20),fontFamily:"monospace"}:{},children:[t?.content_score||0,"/20"]})]}),l.jsx("div",{className:`text-sm ${f?"":"text-gray-600"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?"HOW WELL ADDRESSED THE PROMPT":"How well addressed the prompt"}),l.jsx("div",{className:`w-full rounded-full h-2 mt-2 ${f?"bg-gray-800":"bg-gray-200"}`,children:l.jsx("div",{className:`h-2 rounded-full ${f?"":"bg-indigo-600"}`,style:f?{backgroundColor:v(t?.content_score||0,20),width:`${Math.min((t?.content_score||0)/20*100,100)}%`}:{width:`${Math.min((t?.content_score||0)/20*100,100)}%`}})})]}),l.jsxs("div",{className:`border rounded-lg p-3 sm:p-4 ${f?Bt(1).className:"bg-white"}`,style:f?{...Bt(1).style}:{},children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:`font-semibold ${f?"":"text-gray-700"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?"WORD COUNT":"Word Count"}),l.jsxs("span",{className:`font-bold ${f?"":"text-gray-700"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:[t?.word_count||0," ",f?"WORDS":"words"]})]}),l.jsx("div",{className:`text-sm ${f?"":"text-gray-600"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?"TOTAL WORDS SPOKEN":"Total words spoken"}),l.jsx("div",{className:`w-full rounded-full h-2 mt-2 ${f?"bg-gray-800":"bg-gray-200"}`,children:l.jsx("div",{className:`h-2 rounded-full ${f?"":"bg-gray-600"}`,style:f?{backgroundColor:he.cyan,width:`${Math.min((t?.word_count||0)/100*100,100)}%`}:{width:`${Math.min((t?.word_count||0)/100*100,100)}%`}})})]})]}),r&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold mb-3 ",style:f?{...g.textCyan,fontFamily:"monospace"}:{},children:f?"YOUR RECORDING":"Your Recording"}),l.jsx(EH,{audioBlob:r,recordingTime:n})]}),t?.feedback&&l.jsx("div",{className:`mb-6 p-3 sm:p-6 rounded-lg border-2 ${f?Bt(2).className:"bg-gradient-to-r from-green-50 to-blue-50 border-green-200"}`,style:f?{...Bt(2).style,...g.glow}:{},children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:`font-semibold mb-3 text-lg ${f?"":"text-green-800"}`,style:f?{...g.textCyan,fontFamily:"monospace"}:{},children:f?"AI FEEDBACK":"AI Feedback"}),l.jsx("p",{className:`leading-relaxed ${f?"":"text-gray-700"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:t.feedback})]})]})}),t?.improved_transcript&&l.jsxs("div",{className:`mb-6 rounded-lg p-3 sm:p-4 border-2 ${f?Bt(0).className:"bg-green-50 border-green-200"}`,style:f?{...Bt(0).style,...g.glow}:{},children:[l.jsxs("div",{className:"flex items-start space-x-2 mb-3",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsxs("div",{children:[l.jsx("h4",{className:`font-semibold mb-2 ${f?"":"text-green-800"}`,style:f?{...g.textCyan,fontFamily:"monospace"}:{},children:f?"IMPROVED VERSION":"Improved Version"}),l.jsx("p",{className:`text-sm mb-3 ${f?"":"text-gray-600"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?"HERE'S HOW YOUR RESPONSE COULD BE IMPROVED WITH BETTER GRAMMAR AND VOCABULARY:":"Here's how your response could be improved with better grammar and vocabulary:"})]})]}),l.jsx("div",{className:`border rounded p-3 ${f?"border-cyan-400":"bg-white border-green-200"}`,style:f?{backgroundColor:he.black,borderColor:he.cyan}:{},children:l.jsx("p",{className:`leading-relaxed ${f?"":"text-gray-800"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:t.improved_transcript})})]}),l.jsx("div",{className:"mb-6",children:l.jsx("button",{onClick:()=>y(!p),className:`text-sm ${f?"":"text-blue-600 hover:text-blue-800"}`,style:f?{color:he.cyan,fontFamily:"monospace",...g.textShadow}:{},children:f?p?"HIDE DETAILS":"SHOW DETAILS":p?"Hide Details":"Show Details"})}),p&&l.jsxs("div",{className:`mb-6 p-3 sm:p-4 rounded-lg border-2 ${f?Bt(2).className:"bg-blue-50"}`,style:f?{...Bt(2).style,...g.glow}:{},children:[l.jsx("h4",{className:"font-semibold mb-3 ",style:f?{...g.textCyan,fontFamily:"monospace"}:{},children:f?"DETAILED ANALYSIS":"Detailed Analysis"}),l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium ",style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?"WORD COUNT ANALYSIS:":"Word Count Analysis:"}),l.jsx("span",{className:`ml-2 ${f?"":"text-gray-700"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?`YOU SPOKE ${t?.word_count||0} WORDS. ${t?.word_count>=50?"GREAT JOB MEETING THE MINIMUM REQUIREMENT!":"CONSIDER SPEAKING MORE TO MEET THE MINIMUM WORD REQUIREMENT."}`:`You spoke ${t?.word_count||0} words. ${t?.word_count>=50?"Great job meeting the minimum requirement!":"Consider speaking more to meet the minimum word requirement."}`})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium ",style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?"GRAMMAR ANALYSIS:":"Grammar Analysis:"}),l.jsx("span",{className:`ml-2 ${f?"":"text-gray-700"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:t?.grammar_mistakes===0?f?"PERFECT GRAMMAR!":"Perfect grammar!":f?`FOUND ${t?.grammar_mistakes||0} GRAMMAR ${t?.grammar_mistakes===1?"MISTAKE":"MISTAKES"}.`:`Found ${t?.grammar_mistakes||0} grammar ${t?.grammar_mistakes===1?"mistake":"mistakes"}.`}),t?.grammar_corrections&&t.grammar_corrections.length>0&&l.jsx("div",{className:"mt-2 space-y-2",children:t.grammar_corrections.map((N,A)=>l.jsx("div",{className:`border rounded p-2 sm:p-3 ${f?Bt(1).className:"bg-yellow-50 border-yellow-200"}`,style:f?{...Bt(1).style}:{},children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:`font-mono text-sm ${f?"":"text-red-600"}`,style:f?{color:he.red,fontFamily:"monospace"}:{},children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:`font-medium ${f?"":"text-red-600"}`,style:f?{color:he.red,fontFamily:"monospace"}:{},children:N.mistake}),l.jsx("span",{className:"mx-2 ",style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:""}),l.jsx("span",{className:`font-medium ${f?"":"text-green-600"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:N.correction})]}),l.jsxs("div",{className:`text-xs mt-1 ${f?"":"text-blue-600"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:[l.jsx("strong",{children:f?"EXPLANATION:":"Explanation:"})," ",N.explanation]})]})]})},A))})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium ",style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?"VOCABULARY ANALYSIS:":"Vocabulary Analysis:"}),l.jsx("span",{className:`ml-2 ${f?"":"text-gray-700"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:t?.vocabulary_mistakes===0?f?"EXCELLENT VOCABULARY USAGE!":"Excellent vocabulary usage!":f?`FOUND ${t?.vocabulary_mistakes||0} VOCABULARY ${t?.vocabulary_mistakes===1?"ISSUE":"ISSUES"}.`:`Found ${t?.vocabulary_mistakes||0} vocabulary ${t?.vocabulary_mistakes===1?"issue":"issues"}.`}),t?.vocabulary_corrections&&t.vocabulary_corrections.length>0&&l.jsx("div",{className:"mt-2 space-y-2",children:t.vocabulary_corrections.map((N,A)=>l.jsx("div",{className:`border rounded p-2 sm:p-3 ${f?Bt(0).className:"bg-purple-50 border-purple-200"}`,style:f?{...Bt(0).style}:{},children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:`font-mono text-sm ${f?"":"text-purple-600"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:`font-medium ${f?"":"text-purple-600"}`,style:f?{color:he.red,fontFamily:"monospace"}:{},children:N.mistake}),l.jsx("span",{className:"mx-2 ",style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:""}),l.jsx("span",{className:`font-medium ${f?"":"text-green-600"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:N.correction})]}),l.jsxs("div",{className:`text-xs mt-1 ${f?"":"text-blue-600"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:[l.jsx("strong",{children:f?"EXPLANATION:":"Explanation:"})," ",N.explanation]})]})]})},A))})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium ",style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?"PRONUNCIATION ANALYSIS:":"Pronunciation Analysis:"}),l.jsx("span",{className:`ml-2 ${f?"":"text-gray-700"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:t?.pronunciation_corrections&&t.pronunciation_corrections.length>0?f?`FOUND ${t.pronunciation_corrections.length} PRONUNCIATION ${t.pronunciation_corrections.length===1?"TIP":"TIPS"} TO HELP IMPROVE CLARITY.`:`Found ${t.pronunciation_corrections.length} pronunciation ${t.pronunciation_corrections.length===1?"tip":"tips"} to help improve clarity.`:f?"GREAT PRONUNCIATION! YOUR SPEECH WAS CLEAR AND EASY TO UNDERSTAND.":"Great pronunciation! Your speech was clear and easy to understand."})]}),t?.pronunciation_corrections&&t.pronunciation_corrections.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium ",style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?"PRONUNCIATION TIPS:":"Pronunciation Tips:"}),l.jsx("div",{className:"mt-2 space-y-2",children:t.pronunciation_corrections.map((N,A)=>l.jsx("div",{className:`border rounded p-2 sm:p-3 ${f?Bt(1).className:"bg-orange-50 border-orange-200"}`,style:f?{...Bt(1).style}:{},children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:`font-mono text-sm ${f?"":"text-orange-600"}`,style:f?{color:he.yellow,fontFamily:"monospace"}:{},children:""}),l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:`font-medium ${f?"":"text-orange-700"}`,style:f?{color:he.red,fontFamily:"monospace"}:{},children:N.word}),l.jsx("span",{className:"mx-2 ",style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:""}),l.jsx("span",{className:`font-medium ${f?"":"text-green-700"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:N.correction})]})})]})},A))})]}),t?.language_use_corrections&&t.language_use_corrections.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium ",style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?"LANGUAGE USE SUGGESTIONS:":"Language Use Suggestions:"}),l.jsx("div",{className:"mt-2 space-y-2",children:t.language_use_corrections.map((N,A)=>l.jsx("div",{className:`border rounded p-2 sm:p-3 ${f?Bt(2).className:"bg-blue-50 border-blue-200"}`,style:f?{...Bt(2).style}:{},children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:`font-mono text-sm ${f?"":"text-blue-600"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:`font-medium ${f?"":"text-blue-700"}`,style:f?{color:he.red,fontFamily:"monospace"}:{},children:N.mistake}),l.jsx("span",{className:"mx-2 ",style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:""}),l.jsx("span",{className:`font-medium ${f?"":"text-green-700"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:N.suggestion})]}),N.explanation&&l.jsxs("div",{className:`text-xs mt-1 ${f?"":"text-blue-700"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:[l.jsx("strong",{children:f?"WHY:":"Why:"})," ",N.explanation]})]})]})},A))})]})]})]}),l.jsx("div",{className:`text-sm mb-3 ${f?"":"text-gray-600"}`,style:f?{color:he.cyan,fontFamily:"monospace"}:{},children:f?`ATTEMPT ${o} OF ${c}`:`Attempt ${o} of ${c}`}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center justify-center",children:[i&&l.jsxs("button",{onClick:s,className:`w-full sm:w-auto px-4 py-2.5 rounded-lg flex items-center justify-center space-x-2 min-h-[40px] text-base font-medium border-2 ${f?"border":"bg-yellow-600 text-white hover:bg-yellow-700"}`,style:f?{backgroundColor:he.black,borderColor:he.yellow,color:he.yellow,fontFamily:"monospace",...g.glowYellow}:{},children:[l.jsx("span",{children:""}),l.jsx("span",{children:f?"RE-RECORD":"Re-record"})]}),l.jsx("button",{onClick:a,disabled:u,className:`w-full sm:w-auto px-4 py-2.5 rounded-lg flex items-center justify-center space-x-2 min-h-[40px] text-base font-medium border-2 ${f?"border":u?"bg-gray-400 cursor-not-allowed text-white":"bg-green-600 hover:bg-green-700 text-white"}`,style:f?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",...u?{}:g.glow}:{},children:u?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`w-4 h-4 border-2 border-t-transparent rounded-full animate-spin ${f?"":"border-white"}`,style:f?{borderColor:he.cyan}:{}}),l.jsx("span",{children:f?"SUBMITTING...":"Submitting..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),l.jsx("span",{children:f?"SUBMIT FINAL":"Submit Final"})]})})]}),!i&&l.jsx("div",{className:`mt-4 p-2 sm:p-3 rounded-lg border-2 ${f?Bt(1).className:"bg-yellow-50 border-yellow-200"}`,style:f?{...Bt(1).style}:{},children:l.jsxs("p",{className:`text-sm ${f?"":"text-yellow-800"}`,style:f?{color:he.yellow,fontFamily:"monospace",...g.textShadowYellow}:{},children:[l.jsx("strong",{children:f?"MAXIMUM ATTEMPTS REACHED.":"Maximum attempts reached."})," ",f?'THIS IS YOUR FINAL ATTEMPT. CLICK "SUBMIT FINAL" TO COMPLETE THE TEST.':'This is your final attempt. Click "Submit Final" to complete the test.']})})]})},ufe=({testData:e,onComplete:t,onExit:r,onTestComplete:n})=>{const[s,a]=_.useState("recording"),[i,o]=_.useState(null),[c,u]=_.useState(""),[d,f]=_.useState(null),[h,g]=_.useState(!1),[p,y]=_.useState(!1),[v,C]=_.useState(!1),[S,w]=_.useState(null),[T,N]=_.useState(1),[A]=_.useState(e.max_attempts||3),[P,j]=_.useState(!1),[F,R]=_.useState(0),[L,V]=_.useState(!1),[Z,Y]=_.useState(!0),re=_.useRef(null),{theme:ue,isCyberpunk:z,themeClasses:X}=Da(),I=Oa(ue),[B,W]=_.useState(0),[D,U]=_.useState(null),q=Gl(),{user:H}=Is(),{makeAuthenticatedRequest:te}=q,Q=_.useRef(null);k2(Z,_.useCallback(({confirm:Pe,cancel:je})=>{console.log(" SpeakingTestStudent: Browser back button intercepted during test!"),console.log(" SpeakingTestStudent: isBackInterceptEnabled:",Z),console.log(" SpeakingTestStudent: Setting pending navigation and showing modal"),re.current={confirm:Pe,cancel:je},C(!0)},[Z])),_.useEffect(()=>{s!=="completed"?Y(!0):(Y(!1),re.current=null)},[s]),_.useEffect(()=>{if(e?.test_id&&H?.student_id){const Pe=`speaking_attempts_${H.student_id}_${e.test_id}`,je=localStorage.getItem(Pe);if(je){const Qe=parseInt(je,10);Qe>0&&Qe<=A&&(N(Qe),console.log(" Loaded attempts from localStorage:",Qe))}}},[e,H,A]),_.useEffect(()=>{if(e&&!D){const Pe=new Date;U(Pe),console.log(" Speaking test timer started at:",Pe.toISOString())}},[e,D]),_.useEffect(()=>{let Pe=0;s==="recording"?Pe=25:s==="processing"?Pe=50:s==="feedback"?Pe=75:s==="completed"&&(Pe=100),W(Pe)},[s]),_.useEffect(()=>{(async()=>{try{if(!window.isSecureContext&&!window.location.hostname.includes("localhost")){w("Microphone access requires HTTPS. Please use a secure connection.");return}if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){w("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox.");return}if(navigator.permissions)try{(await navigator.permissions.query({name:"microphone"})).state==="granted"?(j(!0),console.log(" Microphone permission already granted")):console.log(" Microphone permission not yet granted - user will need to click record button")}catch(je){console.log(" Could not check microphone permission status:",je)}}catch(je){console.error(" Error checking microphone permission:",je)}})()},[]),_.useEffect(()=>{const Pe=setInterval(()=>{i&&s==="recording"&&ae()},3e4);return()=>clearInterval(Pe)},[i,s]);const ae=_.useCallback(async()=>{try{const Pe={test_id:e.test_id,audio_blob:i?await ce(i):null,attempt_number:T,step:s,timestamp:new Date().toISOString()};localStorage.setItem(`speaking_progress_${e.test_id}`,JSON.stringify(Pe))}catch(Pe){console.error("Failed to save progress:",Pe)}},[e.test_id,i,T,s]),ce=Pe=>new Promise((je,Qe)=>{const vt=new FileReader;vt.onloadend=()=>{const $t=vt.result.split(",")[1];je($t)},vt.onerror=Qe,vt.readAsDataURL(Pe)}),me=_.useCallback(Pe=>{if(e?.test_id&&H?.student_id){const je=`speaking_attempts_${H.student_id}_${e.test_id}`;localStorage.setItem(je,Pe.toString()),console.log(" Saved attempts to localStorage:",Pe)}},[e,H]),xe=_.useCallback(async(Pe,je,Qe,vt,Ot)=>{if(e?.test_id&&H?.student_id)try{const{setCachedData:$t,CACHE_TTL:Gt}=await ni(async()=>{const{setCachedData:kt,CACHE_TTL:Ge}=await Promise.resolve().then(()=>xp);return{setCachedData:kt,CACHE_TTL:Ge}},void 0),ir=`speaking_test_data_${H.student_id}_${e.test_id}`,gt={audioBlob:Pe?await ce(Pe):null,transcript:je,scores:Qe,recordingTime:vt,currentStep:Ot,timestamp:Date.now()};$t(ir,gt,Gt.speaking_test_data),console.log(" Saved speaking test data to cache:",ir)}catch($t){console.error("Failed to save speaking test data to cache:",$t)}},[e,H]),se=_.useCallback(async()=>{if(e?.test_id&&H?.student_id)try{const{getCachedData:Pe}=await ni(async()=>{const{getCachedData:vt}=await Promise.resolve().then(()=>xp);return{getCachedData:vt}},void 0),je=`speaking_test_data_${H.student_id}_${e.test_id}`,Qe=Pe(je);if(Qe){if(console.log(" Loaded speaking test data from cache:",Qe),Qe.audioBlob){const vt=new Blob([Uint8Array.from(atob(Qe.audioBlob),Ot=>Ot.charCodeAt(0))],{type:"audio/webm"});o(vt)}return Qe.transcript&&u(Qe.transcript),Qe.scores&&f(Qe.scores),Qe.recordingTime&&R(Qe.recordingTime),Qe.currentStep&&a(Qe.currentStep),!0}}catch(Pe){console.error("Failed to load speaking test data from cache:",Pe)}return!1},[e,H]);_.useEffect(()=>{if(e?.test_id&&H?.student_id){try{const Pe=H.student_id,je=`retest_assignment_id_${Pe}_speaking_${e.test_id}`,Qe=`retest_in_progress_${Pe}_speaking_${e.test_id}`;if(!!localStorage.getItem(je)||!!localStorage.getItem(Qe)){const Ot=`speaking_test_data_${Pe}_${e.test_id}`,$t=`anti_cheating_${Pe}_speaking_${e.test_id}`,Gt=`speaking_progress_${e.test_id}`;localStorage.removeItem(Ot),localStorage.removeItem($t),localStorage.removeItem(Gt),console.log(" Cleared speaking per-test cache for retest start:",{cacheKey:Ot,antiCheatKey:$t,progressKey:Gt})}}catch{}se()}},[e,H,se]),_.useEffect(()=>{e?.test_id&&H?.student_id&&(i||c||d)&&xe(i,c,d,F,s)},[i,c,d,F,s,e,H,xe]);const De=_.useCallback(async(Pe,je)=>{if(L){console.log(" Already processing, skipping duplicate call");return}console.log(" Recording completed, duration:",je),V(!0),o(Pe),R(je),a("processing"),w(null);try{const Qe=await ce(Pe),vt=new Date,Ot=e.start_time?Math.round((vt-e.start_time)/1e3):0,$t=e.start_time?new Date(e.start_time).toISOString():vt.toISOString(),Gt=H.student_id,ir=`retest_assignment_id_${Gt}_speaking_${e.test_id}`,dt=localStorage.getItem(ir),gt={test_id:e.test_id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:Gt,question_id:e.question_id||1,audio_blob:Qe,audio_duration:je,time_taken:Ot,started_at:$t,submitted_at:vt.toISOString(),caught_cheating:!1,visibility_change_times:0,is_completed:!0,retest_assignment_id:dt?Number(dt):null,parent_test_id:e.test_id};console.log(" Submitting speaking test:",gt),console.log(" Processing audio with AI...");try{const Ge=await(await te("/.netlify/functions/process-speaking-audio-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e.test_id,question_id:e.question_id||1,audio_blob:Qe})})).json();if(Ge.success){console.log(" AI Analysis Result:",Ge),u(Ge.transcript);const Xe=Ge.transcript?Ge.transcript.split(/\s+/).filter(Wt=>Wt.length>0).length:0;console.log(" Word Count Verification:",{aiCount:Ge.word_count,actualCount:Xe,transcript:Ge.transcript});const Et=Xe,Ut={overall_score:Ge.overall_score,word_count:Et,grammar_score:Ge.grammar_score,vocabulary_score:Ge.vocabulary_score,pronunciation_score:Ge.pronunciation_score,fluency_score:Ge.fluency_score,content_score:Ge.content_score,grammar_mistakes:Ge.grammar_mistakes,vocabulary_mistakes:Ge.vocabulary_mistakes,feedback:Ge.feedback,improved_transcript:Ge.improved_transcript,grammar_corrections:Ge.grammar_corrections||[],vocabulary_corrections:Ge.vocabulary_corrections||[],language_use_corrections:Ge.language_use_corrections||[],pronunciation_corrections:Ge.pronunciation_corrections||[],ai_feedback:Ge.ai_feedback||null};console.log(" Mapped Scores:",Ut),console.log(" Individual scores check:",{grammar_score:Ge.grammar_score,vocabulary_score:Ge.vocabulary_score,pronunciation_score:Ge.pronunciation_score,fluency_score:Ge.fluency_score,content_score:Ge.content_score}),f(Ut),a("feedback")}else throw new Error(Ge.message||Ge.error||"Failed to process audio with AI");localStorage.removeItem(`speaking_progress_${e.test_id}`)}catch(kt){console.error("Speaking test submission error:",kt),kt.message.includes("No valid authentication token found")?(w("Your session has expired. Please refresh the page and try again."),setTimeout(()=>{window.location.reload()},3e3)):w(kt.message),a("recording")}}catch(Qe){console.error("Speaking test submission error:",Qe),w(Qe.message),a("recording")}finally{V(!1)}},[e,H,te,T,me,L]);_.useEffect(()=>{s==="processing"&&!c&&!d&&(console.log(' Detected stuck "processing" state on reload. Attempting recovery...'),i?(console.log(" Resuming processing from cached audio blob..."),De(i,F)):(console.log(" No cached audio blob found. Resetting to recording step."),a("recording")))},[s,c,d,i,F,De]);const He=_.useCallback(()=>{if(T<A){o(null),u(""),f(null),w(null),V(!1);const Pe=T+1;N(Pe),me(Pe),a("recording")}else w("Maximum attempts reached")},[T,A,me]),rt=_.useCallback(async()=>{if(!(!c||!d)){g(!0);try{const Pe=new Date,je=e.start_time?Math.round((Pe-e.start_time)/1e3):0,Qe=e.start_time?new Date(e.start_time).toISOString():Pe.toISOString(),vt=H.student_id,Ot=`retest_assignment_id_${vt}_speaking_${e.test_id}`,$t=localStorage.getItem(Ot),{academicCalendarService:Gt}=await ni(async()=>{const{academicCalendarService:Xe}=await Promise.resolve().then(()=>fS);return{academicCalendarService:Xe}},void 0);await Gt.loadAcademicCalendar();const dt=Gt.getCurrentTerm()?.id;if(!dt)throw new Error("No current academic period found");const gt={test_id:e.test_id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:vt,academic_period_id:dt,question_id:e.question_id||1,audio_blob:i?await ce(i):null,audio_duration:i?.duration||0,time_taken:je,started_at:Qe,submitted_at:Pe.toISOString(),caught_cheating:!1,visibility_change_times:0,is_completed:!0,retest_assignment_id:$t?Number($t):null,parent_test_id:e.test_id,transcript:c,scores:d,final_submission:!0};console.log(" Final submission:",gt),console.log(" Making final submission request...");const kt=await te("/.netlify/functions/submit-speaking-test-final",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(gt)});console.log(" Final submission response status:",kt.status);const Ge=await kt.json();if(console.log(" Final submission result:",Ge),Ge.success){if(H?.student_id){const we=`test_completed_${H.student_id}_speaking_${e.test_id}`;localStorage.setItem(we,"true"),console.log(" Speaking test marked as completed in localStorage:",we);const _e=`retest_in_progress_${H.student_id}_speaking_${e.test_id}`;localStorage.removeItem(_e),console.log(" Cleared in-progress retest lock:",_e);const Ee=`speaking_attempts_${H.student_id}_${e.test_id}`;localStorage.removeItem(Ee),console.log(" Cleared attempts from localStorage upon submission");const{clearTestData:Fe}=await ni(async()=>{const{clearTestData:at}=await Promise.resolve().then(()=>xp);return{clearTestData:at}},void 0);Fe(H.student_id,"speaking_test_data",e.test_id),console.log(" Cleared speaking test data from cache upon submission");try{const at=`anti_cheating_${H.student_id}_speaking_${e.test_id}`;localStorage.removeItem(at),console.log(" Cleared anti-cheating key:",at)}catch{}}console.log(" Caching speaking test results after submission...");const Et=`student_results_table_${H?.student_id||H?.id||"unknown"}`,{setCachedData:Ut,getCachedData:Wt,CACHE_TTL:pr,clearTestData:wr}=await ni(async()=>{const{setCachedData:we,getCachedData:_e,CACHE_TTL:Ee,clearTestData:Fe}=await Promise.resolve().then(()=>xp);return{setCachedData:we,getCachedData:_e,CACHE_TTL:Ee,clearTestData:Fe}},void 0),br={id:Date.now(),test_id:e.test_id,test_type:"speaking",test_name:e.test_name,score:Math.round(d.overall_score/10),max_score:10,percentage:d.overall_score,caught_cheating:!1,visibility_change_times:0,is_completed:!0,submitted_at:new Date().toISOString(),subject:"Listening and Speaking",teacher_name:e.teacher_name||"Unknown"};let lr={success:!0,results:[],count:0};try{const we=Wt(Et);we&&Array.isArray(we.results)&&(lr.results=we.results.slice())}catch{}if(lr.results.unshift(br),lr.count=lr.results.length,Ut(Et,lr,pr.student_results_table),console.log(" Speaking test results cached (merged) with key:",Et),H?.student_id&&wr(H.student_id,"speaking",e.test_id),!!$t&&H?.student_id){let we=3;try{const Fe=localStorage.getItem(`student_active_tests_${H.student_id}`);if(Fe){const jt=JSON.parse(Fe)?.tests?.find(Mt=>Mt.test_id===e.test_id&&Mt.test_type==="speaking");jt&&(we=jt.retest_attempts_left||jt.max_attempts||3)}}catch(Fe){console.error("Error checking active tests cache:",Fe)}const Ee=(d?.overall_score??0)>=50;if(Ee){const Fe=`retest_attempt${we}_${H.student_id}_speaking_${e.test_id}`;localStorage.setItem(Fe,"true"),console.log(" Passed retest, marking last-slot key:",Fe);let at=0;for(let Be=1;Be<=10;Be++){const lt=`retest_attempt${Be}_${H.student_id}_speaking_${e.test_id}`;localStorage.getItem(lt)==="true"&&at++}const jt=`test_completed_${H.student_id}_speaking_${e.test_id}`;localStorage.setItem(jt,"true"),console.log(" Marked retest as completed (student passed):",jt);const Mt=`retest_attempts_${H.student_id}_speaking_${e.test_id}`;localStorage.setItem(Mt,JSON.stringify({used:at,max:we})),console.log(" Set retest attempts metadata (student passed):",Mt,{used:at,max:we})}else{let Fe=1;for(let lt=1;lt<=10;lt++){const ct=`retest_attempt${lt}_${H.student_id}_speaking_${e.test_id}`;if(localStorage.getItem(ct)!=="true"){Fe=lt;break}}const at=`retest_attempt${Fe}_${H.student_id}_speaking_${e.test_id}`;localStorage.setItem(at,"true"),console.log(" Marked retest attempt as completed:",at);let jt=0;for(let lt=1;lt<=10;lt++){const ct=`retest_attempt${lt}_${H.student_id}_speaking_${e.test_id}`;localStorage.getItem(ct)==="true"&&jt++}const Mt=we-jt,Be=Mt<=0||Ee;if(console.log(" Retest completion check:",{usedAttempts:jt,maxAttempts:we,attemptsLeft:Mt,passed:Ee,shouldComplete:Be}),Be){const lt=`test_completed_${H.student_id}_speaking_${e.test_id}`;localStorage.setItem(lt,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",lt);const ct=`retest_attempts_${H.student_id}_speaking_${e.test_id}`;localStorage.setItem(ct,JSON.stringify({used:jt,max:we})),console.log(" Set retest attempts metadata (attempts exhausted):",ct,{used:jt,max:we})}}}if(H?.student_id){const we=`retest1_${H.student_id}_speaking_${e.test_id}`,_e=`retest_assignment_id_${H.student_id}_speaking_${e.test_id}`;localStorage.removeItem(we),localStorage.removeItem(_e)}try{n&&n(d.overall_score),typeof r=="function"&&r()}catch{}return}else throw new Error(Ge.message||"Failed to submit speaking test")}catch(Pe){console.error("Speaking test submission error:",Pe),w(Pe.message)}finally{g(!1)}}},[e,H,te,c,d,i,T,t]);_.useCallback(()=>{a("completed"),t({test_id:e.test_id,transcript:c,scores:d,attempt_number:T})},[e.test_id,c,d,T,t]);const _t=_.useCallback(()=>{console.log(" SpeakingTestStudent: handleExitConfirm called"),console.log(" SpeakingTestStudent: Current location:",window.location.href),console.log(" SpeakingTestStudent: Current history state:",window.history.state),C(!1);const Pe=re.current;if(console.log(" SpeakingTestStudent: Pending navigation:",Pe),re.current=null,e?.test_id&&H?.student_id){const Qe=`anti_cheating_${H?.student_id||H?.id||"unknown"}_speaking_${e.test_id}`,Ot=(Es(Qe)||{tabSwitches:0}).tabSwitches||0,$t=Ot+1,Gt=$t>=2;console.log(" SpeakingTestStudent: Tab switch count:",Ot,"->",$t),gs(Qe,{tabSwitches:$t,isCheating:Gt},ls.anti_cheating)}if(console.log(" SpeakingTestStudent: Disabling intercept"),Y(!1),Pe){console.log(" SpeakingTestStudent: Cleaning up intercept history state");try{const je=window.history.state;if(console.log(" SpeakingTestStudent: Current history state before cleanup:",je),je&&je.__intercept){const Qe=je.prevState??null;console.log(" SpeakingTestStudent: Restoring previous state:",Qe),window.history.replaceState(Qe,document.title,window.location.href),console.log(" SpeakingTestStudent: History state after cleanup:",window.history.state)}}catch(je){console.warn(" SpeakingTestStudent: Failed to restore history state:",je)}}console.log(" SpeakingTestStudent: Scheduling navigation in 100ms"),setTimeout(()=>{console.log(" SpeakingTestStudent: Executing navigation to /student"),console.log(" SpeakingTestStudent: Current location before navigation:",window.location.href),window.location.href="/student",console.log(" SpeakingTestStudent: window.location.href set to /student")},100)},[r,e,H?.student_id,H?.id]),Ke=_.useCallback(()=>{const Pe=re.current;re.current=null,Pe?.cancel&&Pe.cancel(),C(!1),s!=="completed"&&Y(!0)},[s]),tt=()=>{switch(s){case"recording":return l.jsxs("div",{className:"speaking-test-recording",children:[l.jsx("h2",{className:`text-2xl font-bold mb-4 text-center ${X.text} ${z?"tracking-wider":""}`,style:z?{fontFamily:"monospace",textShadow:"0 0 10px rgba(0, 255, 255, 0.5), 0 0 20px rgba(0, 255, 255, 0.3)"}:{},children:z?e.test_name.toUpperCase():e.test_name}),l.jsxs("div",{className:"mb-6 text-center",children:[l.jsx("h3",{className:`text-lg font-semibold mb-2 ${z?"":X.text}`,style:z?{...I.textCyan,fontFamily:"monospace"}:{},children:z?"INSTRUCTIONS:":"Instructions:"}),l.jsx("p",{className:`mb-4 ${z?"":X.textSecondary}`,style:z?{color:he.cyan,fontFamily:"monospace",...I.textShadow}:{},children:e.prompt}),l.jsx("div",{className:`${z?"bg-cyan-400/10 border border-cyan-400/30":"bg-blue-50 border border-blue-200"} p-3 sm:p-4 rounded-lg`,children:l.jsxs("p",{className:`text-sm ${z?"text-cyan-300":"text-blue-800"}`,children:[l.jsx("strong",{children:"Requirements:"})," Minimum ",e.min_words||50," words, 0-",e.max_duration||600," seconds duration"]})})]}),l.jsx(lfe,{ref:Q,onRecordingComplete:De,minDuration:0,maxDuration:e.max_duration||600,minWords:e.min_words||50,maxAttempts:A,currentAttempt:T}),S&&l.jsx("div",{className:"mt-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("p",{className:"text-red-800",children:S})})]});case"processing":return l.jsxs("div",{className:`transcription-status ${X.cardBg} rounded-lg shadow-lg p-4 sm:p-8 text-center ${X.cardBorder} border`,children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("div",{className:`text-6xl mb-4 ${X.textSecondary}`,children:""}),l.jsx("h3",{className:`text-2xl font-semibold mb-2 ${X.text}`,children:"Processing Your Speech"}),l.jsx("p",{className:`text-lg ${z?"text-cyan-400":"text-blue-600"}`,children:"Please wait while we process your audio..."})]}),l.jsxs("div",{className:"inline-flex space-x-1",children:[l.jsx("div",{className:`w-2 h-2 rounded-full animate-bounce ${z?"bg-cyan-400":"bg-blue-600"}`}),l.jsx("div",{className:`w-2 h-2 rounded-full animate-bounce ${z?"bg-cyan-400":"bg-blue-600"}`,style:{animationDelay:"0.1s"}}),l.jsx("div",{className:`w-2 h-2 rounded-full animate-bounce ${z?"bg-cyan-400":"bg-blue-600"}`,style:{animationDelay:"0.2s"}})]})]});case"feedback":return console.log(" Rendering feedback step with Submit Final button"),l.jsx(cfe,{transcript:c,scores:d,audioBlob:i,recordingTime:F,onReRecord:He,onFinalSubmit:()=>y(!0),canReRecord:T<A,attemptNumber:T,maxAttempts:A,isSubmitting:h});case"completed":const Pe={showResults:!0,testInfo:{test_name:e?.test_name||"Speaking Test",id:e?.test_id,test_id:e?.test_id},testType:"speaking",score:d?.overall_score||0,totalQuestions:1,percentage:d?.overall_score||0,passed:(d?.overall_score||0)>=50,questionAnalysis:[{questionNumber:1,userAnswer:c,correctAnswer:"Speaking test completed",isCorrect:!0,score:d?.overall_score||0,maxScore:100,feedback:`Word Count: ${d?.word_count||0}, Grammar: ${d?.grammar_score||0}/40, Vocabulary: ${d?.vocab_score||0}/30`}],timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};return l.jsx("div",{className:"speaking-test-completed",children:l.jsx(T2,{testResults:Pe,onBackToCabinet:()=>{re.current=null,C(!0)},onRetakeTest:()=>{a("recording"),u(""),f(null),o(null),N(1)},isLoading:!1})});default:return null}};return l.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[l.jsx(Aa,{isOpen:p&&!h,onClose:()=>y(!1),title:"Submit Speaking Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:`${X.textSecondary} mb-6`,children:"Are you sure you want to submit?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ot,{onClick:()=>y(!1),variant:"secondary",children:"Cancel"}),l.jsx(ot,{onClick:()=>{y(!1),rt()},variant:"primary",className:"",style:z?{backgroundColor:he.black,borderColor:he.cyan,color:he.cyan,fontFamily:"monospace",borderWidth:"2px",...I.glow}:{},children:z?"SUBMIT":"Submit"})]})]})}),l.jsx(Aa,{isOpen:v,onClose:Ke,title:"Exit Speaking Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:`${X.textSecondary} mb-6`,children:"Are you sure you want to go back to cabinet?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ot,{onClick:Ke,variant:"secondary",children:"Cancel"}),l.jsx(ot,{onClick:Pe=>{console.log(" SpeakingTestStudent: Go Back button clicked in modal"),console.log(" SpeakingTestStudent: Button click event:",Pe),_t()},variant:"primary",children:"Go Back"})]})]})}),l.jsxs("div",{className:`${X.cardBg} rounded-lg shadow-sm p-3 sm:p-6 ${X.cardBorder} border`,children:[S&&l.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("p",{className:"text-red-800",children:S})}),tt()]})]})},dfe=e=>function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296},ffe=(e,t,r)=>{if(e.length===1)return e[0];const n=`${r}:speaking:${t}`,s=Array.from(n).reduce((o,c)=>(o<<5)-o+c.charCodeAt(0),0)>>>0,a=dfe(s),i=Math.floor(a()*e.length);return e[i]},hfe=()=>{const{testId:e}=O_(),t=Ko(),{user:r}=Is(),n=Gl(),{showNotification:s}=ci(),[a,i]=_.useState(null),[o,c]=_.useState([]),[u,d]=_.useState(null),[f,h]=_.useState(!0),[g,p]=_.useState(null),[y,v]=_.useState(!1),[C,S]=_.useState(null),[w,T]=_.useState(!1),{startTracking:N,stopTracking:A}=T1("speaking",e,r?.student_id||r?.id);_.useEffect(()=>{P(),j()},[e]),_.useEffect(()=>{if(a&&!y){ke.debug(" Speaking test - initializing anti-cheating tracking");const ue=r?.student_id||r?.id||"unknown",z=`anti_cheating_${ue}_speaking_${e}`,X=localStorage.getItem(z);if(ke.debug(" Checking for anti-cheating data with key:",z),ke.debug(" Key format: anti_cheating_{studentId}_{testType}_{testId}"),ke.debug(" Current test details:",{testType:"speaking",testId:e,studentId:ue}),X)try{const I=JSON.parse(X);ke.debug(" Found existing anti-cheating data for THIS speaking test:",I),ke.debug(" Visibility change times for this test:",I.tabSwitches||0),ke.debug(" Cheating status for this test:",I.isCheating||!1),I.isCheating&&(ke.debug(" WARNING: Student has been flagged for cheating in THIS speaking test!"),ke.debug(" Tab switches detected in this test:",I.tabSwitches),s(` Warning: Suspicious activity detected in this speaking test (${I.tabSwitches} tab switches). Continued violations may result in test disqualification.`,"warning"))}catch(I){ke.error(" Error parsing existing anti-cheating data:",I)}else ke.debug(" No existing anti-cheating data found for this speaking test - starting fresh");N(),ke.debug(" Anti-cheating tracking started for speaking test")}return()=>{a&&(ke.debug(" Cleaning up anti-cheating tracking for speaking test"),A())}},[a,y,e,r?.student_id,r?.id,N,A,s]);const P=async()=>{try{h(!0);const ue=await n.getSpeakingTest(e);if(ue.success)i(ue.test);else throw new Error(ue.message||"Failed to load test");const z=await n.getSpeakingTestQuestions(e);if(z.success){const X=z.questions;c(X);const I=r?.student_id||r?.id,B=ffe(X,e,I);d(B),ke.debug(" Selected question for student:",{studentId:I,testId:e,totalQuestions:X.length,selectedQuestion:B?.id,selectedPrompt:B?.prompt?.substring(0,50)+"..."})}}catch(ue){ke.error("Error loading test data:",ue),p(ue.message)}finally{h(!1)}},j=()=>{const z=`test_completed_${r?.student_id||r?.id}_speaking_${e}`;if(localStorage.getItem(z)==="true"){v(!0);const I=localStorage.getItem(`speaking_test_result_${e}`);I&&S(JSON.parse(I))}},F=async ue=>{try{v(!0),S(ue),localStorage.setItem(`speaking_test_result_${e}`,JSON.stringify(ue)),window.dispatchEvent(new CustomEvent("testCompleted",{detail:{testId:e,testType:"speaking"}})),setTimeout(()=>{t("/student")},2e3)}catch(z){ke.error("Error handling test completion:",z)}},R=()=>{if(ke.debug(" Navigating back to cabinet from speaking test..."),a&&r?.student_id){ke.debug(" Cabinet navigation detected - counting as cheating attempt");const z=`anti_cheating_${r?.student_id||r?.id||"unknown"}_speaking_${e}`,X=localStorage.getItem(z);let I=0,B=!1;if(X)try{const q=JSON.parse(X);I=q.tabSwitches||0,B=q.isCheating||!1}catch(q){ke.error(" Error parsing existing anti-cheating data:",q)}const W=I+1,D=W>=2;ke.debug(` Tab switch count: ${I}  ${W} (cheating: ${D})`);const U={tabSwitches:W,isCheating:D,lastUpdated:new Date().toISOString()};localStorage.setItem(z,JSON.stringify(U)),ke.debug(" Anti-cheating data updated for cabinet navigation:",U)}t("/student")},{theme:L,isCyberpunk:V,themeClasses:Z}=Da(),Y=Oa(L);if(f)return l.jsxs("div",{className:`min-h-screen overflow-y-auto ${V?"bg-gradient-to-br from-black via-gray-900 to-purple-900":"bg-white"}`,style:V?Y.background:{},children:[l.jsx("div",{className:`${Z.headerBg} shadow-sm border-b ${Z.headerBorder}`,children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:`text-2xl font-bold ${Z.headerText}`,children:"Speaking Test"})}),l.jsx(ot,{variant:"outline",onClick:()=>T(!0),children:"Back to Cabinet"})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`inline-block animate-spin rounded-full h-8 w-8 border-b-2 ${V?"border-cyan-400":"border-blue-600"}`}),l.jsx("p",{className:`${Z.textSecondary} mt-4`,children:"Loading speaking test..."})]})})})]});if(g)return l.jsxs("div",{className:`min-h-screen overflow-y-auto ${V?"bg-gradient-to-br from-black via-gray-900 to-purple-900":"bg-white"}`,style:V?Y.background:{},children:[l.jsx("div",{className:`${Z.headerBg} shadow-sm border-b ${Z.headerBorder}`,children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:`text-2xl font-bold ${Z.headerText}`,children:"Speaking Test"})}),l.jsx(ot,{variant:"outline",onClick:()=>T(!0),children:"Back to Cabinet"})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`text-6xl mb-4 ${V?"text-red-400":"text-red-600"}`,children:""}),l.jsx("h2",{className:`text-2xl font-bold ${Z.text} mb-2`,children:"Error Loading Test"}),l.jsx("p",{className:`${Z.textSecondary} mb-6`,children:g})]})})})]});if(y&&C)return l.jsxs("div",{className:`min-h-screen overflow-y-auto ${V?"bg-gradient-to-br from-black via-gray-900 to-purple-900":"bg-white"}`,style:V?Y.background:{},children:[l.jsx("div",{className:`${Z.headerBg} shadow-sm border-b ${Z.headerBorder}`,children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:`text-2xl font-bold ${Z.headerText}`,children:"Speaking Test Results"})}),l.jsx(ot,{variant:"outline",onClick:()=>T(!0),children:"Back to Cabinet"})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx(T2,{testType:"speaking",testData:a,result:C,onRetake:()=>{v(!1),S(null);const ue=JSON.parse(localStorage.getItem("userData")||"{}").student_id;localStorage.removeItem(`test_completed_${ue}_speaking_${e}`)}})})]});if(!a||o.length===0)return l.jsxs("div",{className:`min-h-screen overflow-y-auto ${V?"bg-gradient-to-br from-black via-gray-900 to-purple-900":"bg-white"}`,style:V?Y.background:{},children:[l.jsx("div",{className:`${Z.headerBg} shadow-sm border-b ${Z.headerBorder}`,children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:`text-2xl font-bold ${Z.headerText}`,children:"Speaking Test"})}),l.jsx(ot,{variant:"outline",onClick:()=>T(!0),children:"Back to Cabinet"})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`text-6xl mb-4 ${Z.textSecondary}`,children:""}),l.jsx("h2",{className:`text-2xl font-bold ${Z.text} mb-2`,children:"No Test Data"}),l.jsx("p",{className:`${Z.textSecondary} mb-6`,children:"Unable to load test information"})]})})})]});const re=u;return l.jsxs("div",{className:`min-h-screen overflow-y-auto ${V?"bg-gradient-to-br from-black via-gray-900 to-purple-900":"bg-gray-50"}`,style:V?Y.background:{},children:[l.jsx(Aa,{isOpen:w,onClose:()=>T(!1),title:"Exit Speaking Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ot,{onClick:()=>T(!1),variant:"secondary",children:"Cancel"}),l.jsx(ot,{onClick:()=>{T(!1),R()},variant:"primary",children:"Go Back"})]})]})}),l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),l.jsx(ot,{variant:"outline",onClick:()=>T(!0),children:"Back to Cabinet"})]})})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.length>1&&u&&l.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-white text-xs font-bold",children:"i"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Question Selection"}),l.jsx("div",{className:"mt-1 text-sm text-blue-700",children:l.jsxs("p",{children:["This test has ",o.length," questions. You have been assigned ",l.jsxs("strong",{children:["Question ",u.question_number]}),"."]})})]})]})}),l.jsx(ufe,{testData:{...a,test_id:parseInt(e),question_id:re?.id,prompt:re?.prompt,start_time:Date.now()},onComplete:F,onExit:R,onTestComplete:F})]})]})},mfe=()=>{const{testType:e,testId:t}=O_(),r=Ko(),{activeTests:n}=C2(),s=()=>{ke.debug(" [DEBUG] handleBackToCabinet called in TestPage"),ke.debug(" [DEBUG] Current location before navigate:",window.location.pathname),ke.debug(' [DEBUG] Calling navigate("/student")'),r("/student"),ke.debug(" [DEBUG] Navigate called, checking result..."),setTimeout(()=>{ke.debug(" [DEBUG] Location after navigate:",window.location.pathname),window.location.pathname!=="/student"&&(ke.debug(" [DEBUG] Navigation failed, forcing window.location.href"),window.location.href="/student")},50)},a=n.find(o=>o.test_type===e&&o.test_id===parseInt(t)),i=_0();return ke.debug(" [DEBUG] TestPage rendering, location:",i.pathname,"testType:",e,"testId:",t),l.jsx(afe,{onBackToCabinet:s,currentTest:a||{test_type:e,test_id:parseInt(t)}},`test-${e}-${t}`)},gfe=()=>{const e=Ko(),{user:t,isAuthenticated:r,isLoading:n}=Is(),[s,a]=_.useState(!1),[i,o]=_.useState(!0),[c,u]=_.useState(""),[d,f]=_.useState([]),[h,g]=_.useState(!1),[p,y]=_.useState(!1),[v,C]=_.useState({currentPassword:"",newPassword:"",confirmPassword:""}),S=_.useCallback(async()=>{ke.debug(" Initializing Student Application...");try{if(o(!0),u(""),!r||!t){ke.debug(" User not authenticated, redirecting to login"),e("/login");return}if(t.role!==$o.STUDENT){ke.error(" Invalid user role for student app:",t.role),u("Access denied. Student role required.");return}ke.debug(" Initializing event listeners..."),w(),ke.debug(" Setting up back to cabinet button listeners..."),T(),ke.debug(" Setting up password change form listener..."),N(),ke.debug(" Loading student data..."),await A(),ke.debug(" Exposing student functions globally..."),P(),ke.debug(" Populating student info from user data..."),Z(t),a(!0),ke.debug(" Student Application initialization complete!")}catch(ue){ke.error(" Error initializing student app:",ue),u("Failed to initialize student application")}finally{o(!1)}},[r,t,e]);_.useEffect(()=>{n||S()},[n,r,t,S]);const w=_.useCallback(()=>{ke.debug(" Setting up student event listeners...");const ue=X=>{h&&!X.target.closest(".student-menu")&&g(!1)},z=X=>{X.key==="Escape"&&h&&g(!1)};return document.addEventListener("click",ue),document.addEventListener("keydown",z),()=>{document.removeEventListener("click",ue),document.removeEventListener("keydown",z)}},[h]),T=_.useCallback(()=>{ke.debug(" Setting up back to cabinet listeners...")},[]),N=_.useCallback(()=>{ke.debug(" Setting up password change form...")},[]),A=_.useCallback(async()=>{ke.debug(" Loading student data...");try{ke.debug(" Student data loaded successfully")}catch(ue){throw ke.error(" Error loading student data:",ue),ue}},[]),P=_.useCallback(()=>{ke.debug(" Exposing student functions globally..."),window.toggleStudentMenu=j,window.showChangePasswordTab=F,window.hideChangePasswordTab=R,window.navigateBackToCabinet=V,window.handlePasswordChange=L,window.populateStudentInfoDirectly=Z,ke.debug(" All student functions exposed globally")},[]),j=_.useCallback(()=>{ke.debug(" toggleStudentMenu called"),g(ue=>{const z=!ue;return ke.debug(" Menu state changed from",ue,"to",z),z}),ke.debug(" Toggled dropdown menu")},[]),F=_.useCallback(()=>{ke.debug(" showChangePasswordTab called"),y(!0),g(!1)},[]),R=_.useCallback(()=>{ke.debug(" hideChangePasswordTab called"),y(!1),C({currentPassword:"",newPassword:"",confirmPassword:""})},[]),L=_.useCallback(async ue=>{ue.preventDefault(),ke.debug(" handlePasswordChange called");const{currentPassword:z,newPassword:X,confirmPassword:I}=v;if(!z||!X||!I){Y("Please fill in all fields","error");return}if(X!==I){Y("New passwords do not match","error");return}if(X.length<6){Y("New password must be at least 6 characters long","error");return}const B=/[a-zA-Z]/.test(X),W=/[0-9]/.test(X);if(!B||!W){Y("New password must contain both letters and numbers","error");return}if(!t||!t.student_id){Y("Session expired. Please login again.","error");return}const D=t.student_id;if(window.confirm("Are you sure you want to change your password?"))try{o(!0);const U=await Us.changePassword({studentId:D,currentPassword:z,newPassword:X});U.success?(Y("Password changed successfully!","success"),R()):Y(U.message||"Failed to change password","error")}catch(U){ke.error("Password change error:",U),Y("Failed to change password. Please try again.","error")}finally{o(!1)}},[v,t]),V=_.useCallback(()=>{if(ke.debug("[DEBUG] navigateBackToCabinet called"),!r||!t){ke.warn("[WARN] No valid user found, redirecting to login"),e("/login");return}t.role===$o.STUDENT?(ke.debug("[DEBUG] Navigating to student cabinet"),e("/student")):(ke.warn("[WARN] Unknown user role, redirecting to login"),e("/login"))},[r,t,e]),Z=_.useCallback(ue=>{ke.debug(" populateStudentInfoDirectly called with:",ue);try{ke.debug(" Student info populated successfully")}catch(z){ke.error(" Error populating student info:",z)}},[]),Y=_.useCallback((ue,z)=>{const X={id:Date.now(),message:ue,type:z,timestamp:new Date};f(I=>[...I,X]),setTimeout(()=>{f(I=>I.filter(B=>B.id!==X.id))},eg.NOTIFICATION_DURATION)},[]),re=_.useCallback(ue=>{const{name:z,value:X}=ue.target;C(I=>({...I,[z]:X}))},[]);return i?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(un,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Initializing Student Application..."})]})}):c?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Initialization Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:c}),l.jsx(ot,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):s?l.jsxs(c0e,{asBackground:!0,children:[l.jsxs(QC,{children:[l.jsx(Js,{path:"/",element:l.jsxs("div",{className:"student-app",children:[l.jsx(tfe,{isMenuOpen:h,onToggleMenu:j,onShowPasswordChange:F}),p&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Change Password"}),l.jsxs("form",{onSubmit:L,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),l.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",value:v.currentPassword,onChange:re,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),l.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:v.newPassword,onChange:re,required:!0,minLength:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),l.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:v.confirmPassword,onChange:re,required:!0,minLength:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{className:"flex space-x-3 pt-4",children:[l.jsx(ot,{type:"button",variant:"secondary",onClick:R,className:"flex-1",children:"Cancel"}),l.jsx(ot,{type:"submit",variant:"primary",disabled:i,className:"flex-1",children:i?l.jsxs(l.Fragment,{children:[l.jsx(un,{size:"sm",className:"mr-2"}),"Changing..."]}):"Change Password"})]})]})]})})]})}),l.jsx(Js,{path:"/test/:testType/:testId",element:l.jsx(mfe,{})}),l.jsx(Js,{path:"matching-test/:testId",element:l.jsx(ife,{})}),l.jsx(Js,{path:"word-matching-test/:testId",element:l.jsx(ofe,{})}),l.jsx(Js,{path:"speaking-test/:testId",element:l.jsx(hfe,{})}),l.jsx(Js,{path:"/results",element:l.jsx(TH,{})})]}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:d.map(ue=>l.jsx(du,{type:ue.type,message:ue.message,onClose:()=>f(z=>z.filter(X=>X.id!==ue.id))},ue.id))})]}):l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(un,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Setting up Student Application..."})]})})},pfe=()=>l.jsx(vB,{children:l.jsx(gH,{children:l.jsx(hH,{children:l.jsx(Vce,{children:l.jsx(gfe,{})})})})}),xfe=({result:e,isOpen:t,onClose:r,initialTab:n="overview",editingSpeakingScore:s,tempSpeakingScore:a,isSavingSpeakingScore:i,onStartSpeakingScoreEdit:o,onSaveSpeakingScore:c,onCancelSpeakingScoreEdit:u,onTempSpeakingScoreChange:d})=>{const[f,h]=_.useState(n),g=_.useRef(!1);if(_.useEffect(()=>()=>{g.current=!0},[]),_.useEffect(()=>{t&&h(n)},[t,n]),!t||!e)return null;const p={test_id:e.test_id,test_name:e.test_name,subject_id:e.subject_id};let y=e?.__audioUrl||void 0;const v=y?void 0:e?.answers;typeof v=="string"?y=v:v&&typeof v=="object"&&(y=v.audio_url),_.useEffect(()=>{console.log("[SpeakingReview] Transcript sources",{fromResult:e?.transcript,fromAnswersObject:typeof v=="object"&&v?.transcript?v.transcript:void 0,hasAnswers:!!v,test_id:e?.test_id,student_id:e?.student_id})},[e?.test_id,e?.student_id]);const[C,S]=_.useState("");_.useEffect(()=>{const T=new AbortController;let N=!1;const A=e?.__studentId||e?.student_id;return!e?.transcript&&!(typeof v=="object"&&v?.transcript)&&e?.test_id&&A&&(async()=>{try{const P=`/.netlify/functions/get-speaking-test-new?action=transcript&test_id=${encodeURIComponent(e.test_id)}&student_id=${encodeURIComponent(A)}`;console.log("[SpeakingReview] Fetching transcript from API:",{url:P});const j=await(window.tokenManager?.getToken()||da.get())||localStorage.getItem("accessToken")||localStorage.getItem("token"),F=await fetch(P,{headers:{Authorization:j?`Bearer ${j}`:""},signal:T.signal});console.log("[SpeakingReview] Transcript API response:",{ok:F.ok,status:F.status});const R=await F.json().catch(()=>({}));console.log("[SpeakingReview] Transcript API body:",R),!N&&!g.current&&(F.ok?S(R.transcript||""):console.warn("[SpeakingReview] Transcript API failed:",R?.error||"unknown error"))}catch(P){P.name!=="AbortError"&&!g.current&&console.error("[SpeakingReview] Transcript fetch error:",P)}})(),()=>{N=!0;try{T.abort()}catch{}}},[e]);const w={score:e.score,max_score:e.max_score,percentage:e.percentage,audio_url:y,transcript:e.transcript||C||(typeof v=="object"&&v?.transcript?v.transcript:void 0),time_taken:e.time_taken,started_at:e.started_at,submitted_at:e.submitted_at};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[l.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 flex justify-between items-center",children:[l.jsxs("h2",{className:"text-xl font-semibold",children:["Speaking Test Review - ",p.test_name]}),l.jsx("button",{onClick:r,className:"text-white hover:text-gray-200 text-2xl font-bold",children:""})]}),l.jsx("div",{className:"border-b border-gray-200",children:l.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"audio",label:"Audio"},{id:"transcript",label:"Transcript"},{id:"analysis",label:"AI Analysis"},{id:"scoring",label:"Scoring"}].map(T=>l.jsx("button",{onClick:()=>h(T.id),className:`py-4 px-1 border-b-2 font-medium text-sm ${f===T.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:T.label},T.id))})}),l.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[f==="overview"&&l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Test Name"}),l.jsx("p",{className:"mt-1 text-sm text-gray-900",children:p.test_name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Score"}),l.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[w.score," / ",w.max_score]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Time Taken"}),l.jsx("p",{className:"mt-1 text-sm text-gray-900",children:w.time_taken?`${Math.floor(w.time_taken/60)}:${(w.time_taken%60).toString().padStart(2,"0")}`:"N/A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Submitted At"}),l.jsx("p",{className:"mt-1 text-sm text-gray-900",children:w.submitted_at?new Date(w.submitted_at).toLocaleString():"N/A"})]})]})}),f==="audio"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Audio Recording"}),w.audio_url?l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Click the play button to listen to the student's recording:"}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:l.jsx(EH,{audioUrl:w.audio_url,className:"w-full"})})]}):l.jsx("div",{className:"text-center py-8 text-gray-500",children:l.jsx("p",{children:"No audio recording available"})})]}),f==="transcript"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transcript"}),w.transcript?l.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:l.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:w.transcript})}):l.jsx("div",{className:"text-center py-8 text-gray-500",children:l.jsx("p",{children:"No transcript available"})})]}),f==="analysis"&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI Analysis Results"}),(()=>{let T=e.ai_feedback;if(T&&typeof T=="string")try{T=JSON.parse(T)}catch{T=null}return T?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"Overall Performance"}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-gray-800",children:T.overall_score||0}),l.jsx("div",{className:"text-sm text-gray-600",children:"Overall Score (0-100)"})]})]}),l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"Category Breakdown"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[T.grammar_score||0,"/25"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Grammar"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-green-600",children:[T.vocabulary_score||0,"/20"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Vocabulary"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[T.pronunciation_score||0,"/15"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Pronunciation"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-orange-600",children:[T.fluency_score||0,"/20"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Fluency"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-red-600",children:[T.content_score||0,"/20"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Content"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Performance Metrics"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Word Count:"}),l.jsx("span",{className:"text-sm font-medium",children:T.word_count||0})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Grammar Mistakes:"}),l.jsx("span",{className:"text-sm font-medium text-red-600",children:T.grammar_mistakes||0})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Vocabulary Issues:"}),l.jsx("span",{className:"text-sm font-medium text-red-600",children:T.vocabulary_mistakes||0})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Difficulty Level:"}),l.jsx("span",{className:"text-sm font-medium",children:T.difficulty_level||"N/A"})]})]})]}),l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"AI Feedback"}),T.feedback?l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:l.jsx("p",{className:"text-sm text-gray-700",children:T.feedback})}):l.jsx("div",{className:"text-center py-4 text-gray-500",children:l.jsx("p",{className:"text-sm",children:"No AI feedback available"})})]})]}),T.improved_transcript&&l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Improved Transcript"}),l.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:l.jsx("p",{className:"text-sm text-gray-700",children:T.improved_transcript})})]}),T.grammar_corrections&&T.grammar_corrections.length>0&&l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Grammar Corrections"}),l.jsx("div",{className:"space-y-3",children:T.grammar_corrections.map((N,A)=>l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-red-800",children:"Mistake:"})," ",N.mistake]}),l.jsxs("div",{className:"text-sm mt-1",children:[l.jsx("span",{className:"font-medium text-green-800",children:"Correction:"})," ",N.correction]}),N.explanation&&l.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[l.jsx("span",{className:"font-medium",children:"Explanation:"})," ",N.explanation]})]},A))})]}),T.vocabulary_corrections&&T.vocabulary_corrections.length>0&&l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Vocabulary Improvements"}),l.jsx("div",{className:"space-y-3",children:T.vocabulary_corrections.map((N,A)=>l.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-yellow-800",children:"Original:"})," ",N.mistake]}),l.jsxs("div",{className:"text-sm mt-1",children:[l.jsx("span",{className:"font-medium text-green-800",children:"Better:"})," ",N.correction]}),N.explanation&&l.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[l.jsx("span",{className:"font-medium",children:"Explanation:"})," ",N.explanation]})]},A))})]}),T.language_use_corrections&&T.language_use_corrections.length>0&&l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Language Use Suggestions"}),l.jsx("div",{className:"space-y-3",children:T.language_use_corrections.map((N,A)=>l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-blue-800",children:"Original:"})," ",N.mistake]}),l.jsxs("div",{className:"text-sm mt-1",children:[l.jsx("span",{className:"font-medium text-blue-800",children:"Suggestion:"})," ",N.suggestion]}),N.explanation&&l.jsx("div",{className:"text-xs text-blue-700 mt-1",children:N.explanation})]},A))})]})]}):l.jsx("div",{className:"text-center py-8 text-gray-500",children:l.jsx("p",{children:"No AI analysis available for this result"})})})()]}),f==="scoring"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center",children:"Score Details"}),s?l.jsxs("div",{className:"space-y-4 text-center",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 place-items-center",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Score"}),l.jsx("input",{type:"number",min:"0",max:w.max_score,value:a,onChange:T=>d(T.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Max Score"}),l.jsxs("p",{className:"mt-1 text-sm text-gray-900 text-center",children:[w.max_score," (Fixed)"]})]})]}),l.jsxs("div",{className:"flex justify-center space-x-3",children:[l.jsx("button",{onClick:c,disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:i?"Saving...":"Save Score"}),l.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"})]})]}):l.jsxs("div",{className:"space-y-4 text-center",children:[l.jsx("div",{className:"grid grid-cols-1 place-items-center gap-2",children:l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Current Score"}),l.jsxs("p",{className:"mt-1 text-sm text-gray-900 text-center",children:[w.score," / ",w.max_score]})]})}),l.jsx("button",{onClick:()=>o(e.id,w.score),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 mx-auto",children:"Edit Score"})]})]})]}),l.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:l.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"})})]})})},yfe=({isOpen:e,onClose:t,testResult:r,questions:n,isLoadingQuestions:s,onScoreUpdate:a})=>{const[i,o]=_.useState(!1),[c,u]=_.useState(""),[d,f]=_.useState(!1),h=R=>{if(!R)return{};if(typeof R=="string")try{return JSON.parse(R)}catch{return{}}return R||{}},g=()=>{const R=r.best_retest_score!==null&&r.best_retest_score!==void 0?r.best_retest_score:r.score||0;u(R.toString()),o(!0)},p=()=>{o(!1),u("")},y=async R=>{R&&(R.preventDefault(),R.stopPropagation());const L=r?.id||r?.result_id;if(!L){console.error("TestAnswerModal: No id/result_id found",r),alert("Error: Test result ID not found");return}console.log("TestAnswerModal: Saving score",{resultId:L,score:c,testType:r.test_type}),f(!0);try{const V=r.test_type||r.testType,Z={resultId:L,score:parseInt(c)||0,testType:V};console.log("TestAnswerModal: Sending payload",Z);let Y;if(window.tokenManager?.makeAuthenticatedRequest)Y=await window.tokenManager.makeAuthenticatedRequest(qd.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)});else{const{SecureToken:re}=await ni(async()=>{const{SecureToken:z}=await Promise.resolve().then(()=>o4);return{SecureToken:z}},void 0),ue=await(window.tokenManager?.getToken()||re.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");Y=await fetch(qd.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:ue?`Bearer ${ue}`:""},body:JSON.stringify(Z)})}if(console.log("TestAnswerModal: Response status",Y.status),Y.ok){const re=await Y.json();console.log("TestAnswerModal: Score updated successfully",re),a&&a(re),o(!1),u("")}else{const re=await Y.json().catch(()=>({error:"Unknown error"}));console.error("TestAnswerModal: Error response",re),alert(re.error||`Failed to update score. Status: ${Y.status}`)}}catch(V){console.error("TestAnswerModal: Exception updating score:",V),alert(`Failed to update score: ${V.message||V}`)}finally{f(!1)}},v=_.useMemo(()=>{const R=r?.answers;if(console.log(" [TestAnswerModal] Raw testResult.answers:",R),console.log(" [TestAnswerModal] Raw testResult.answers type:",typeof R),console.log(" [TestAnswerModal] testResult.retest_offered:",r?.retest_offered),R&&typeof R=="object"&&R.answers_by_id)return console.log(" [TestAnswerModal] Found answers_by_id format"),console.log(" [TestAnswerModal] answers_by_id:",R.answers_by_id),console.log(" [TestAnswerModal] question_order:",R.question_order),R.answers_by_id||{};const L=h(R);return console.log(" [TestAnswerModal] Parsed student answers:",L),console.log(" [TestAnswerModal] Full testResult:",r),L},[r?.answers]),C=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((R,L)=>{const V=R.question_id||R.id||L+1,Z=String(V),Y=Number(V),re=v[Z]!==void 0?v[Z]:v[Y]!==void 0?v[Y]:v[V]!==void 0?v[V]:void 0,ue=R.correct_answer,z=re===ue,X=I=>{if(R.options&&Array.isArray(R.options)){const W=I.charCodeAt(0)-65;return R.options[W]||I}const B=`option_${I.toLowerCase()}`;return R[B]||I};return l.jsxs("tr",{className:z?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:L+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",dangerouslySetInnerHTML:{__html:ua(R.question)}}),l.jsx("td",{className:"px-4 py-3 text-sm",children:re?l.jsxs("span",{className:`font-medium ${z?"text-green-700":"text-red-700"}`,children:[re," - ",l.jsx("span",{dangerouslySetInnerHTML:{__html:ua(String(X(re)))}})]}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[ue," - ",l.jsx("span",{dangerouslySetInnerHTML:{__html:ua(String(X(ue)))}})]}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:z?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},Z)})})]})}),S=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((R,L)=>{const V=R.question_id||R.id||L+1,Z=String(V),Y=Number(V),re=v[Z]!==void 0?v[Z]:v[Y]!==void 0?v[Y]:v[V]!==void 0?v[V]:void 0,ue=R.correct_answer;let z;typeof re=="boolean"?z=re:typeof re=="string"?z=re.toLowerCase().trim()==="true":re===1||re==="1"?z=!0:re===0||re==="0"?z=!1:z=!!re;let X;typeof ue=="boolean"?X=ue:typeof ue=="string"?X=ue.toLowerCase().trim()==="true":X=!!ue;const I=z===X;L===0&&console.log(" [TestAnswerModal] True/False First Question Debug:",{questionIdStr:Z,studentAnswer:re,studentAnswerType:typeof re,normalizedStudentAnswer:z,correctAnswer:ue,correctAnswerType:typeof ue,normalizedCorrectAnswer:X,isCorrect:I});const B=re!=null?z:null,W=X;return l.jsxs("tr",{className:I?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:L+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",dangerouslySetInnerHTML:{__html:ua(R.question)}}),l.jsx("td",{className:"px-4 py-3 text-sm",children:B!==null?l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${B?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:B?"True":"False"}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsx("td",{className:"px-4 py-3 text-sm",children:l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${W?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:W?"True":"False"})}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:I?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},Z)})})]})}),w=()=>{if(!n||n.length===0)return l.jsx("p",{className:"text-gray-500",children:"No questions available"});const R=(L,V)=>{if(!L||!V||V.length===0)return!1;const Z=String(L).toLowerCase().trim();return V.some(Y=>{const re=String(Y).toLowerCase().trim();return Z===re||re.length>=2&&Z.includes(re)?!0:re.length===1?Z.startsWith(re)||Z.endsWith(re):!1})};return l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer(s)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((L,V)=>{const Z=L.question_id||L.id||V+1,Y=String(Z),re=Number(Z),ue=v[Y]!==void 0?v[Y]:v[re]!==void 0?v[re]:v[Z]!==void 0?v[Z]:void 0,z=Array.isArray(L.correct_answers)?L.correct_answers:L.correct_answer?[L.correct_answer]:[],X=R(ue,z);return V===0&&console.log(" [TestAnswerModal] First question debug:",{questionIdNum:Z,questionIdStr:Y,questionIdNumKey:re,studentAnswer:ue,studentAnswers:v,studentAnswersKeys:Object.keys(v),correctAnswers:z,question:L}),l.jsxs("tr",{className:X?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:V+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",dangerouslySetInnerHTML:{__html:ua(L.question)}}),l.jsx("td",{className:"px-4 py-3 text-sm",children:ue?l.jsx("span",{className:`font-medium ${X?"text-green-700":"text-red-700"}`,dangerouslySetInnerHTML:{__html:(()=>{const I=String(ue);if(I.includes("$"))return ua(I);if(/\\[a-zA-Z]+|[\^_]\{|\\times|\\div|\\sqrt|\\frac/.test(I))try{return V8(I)}catch{return ua(I)}return ua(I)})()}}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:z.length>0?l.jsx("div",{className:"space-y-1",children:z.map((I,B)=>{const W=String(I);return l.jsx("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded",dangerouslySetInnerHTML:{__html:(()=>{if(W.includes("$"))return ua(W);if(/\\[a-zA-Z]+|[\^_]\{|\\times|\\div|\\sqrt|\\frac/.test(W))try{return V8(W)}catch{return ua(W)}return ua(W)})()}},B)})}):l.jsx("span",{className:"text-gray-400",children:"No correct answer defined"})}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:X?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},Y)})})]})})},T=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Left Word"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Match"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Match"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((R,L)=>{const V=R.question_id||R.id||L+1,Z=String(V),Y=Number(V),re=v[Z]!==void 0?v[Z]:v[Y]!==void 0?v[Y]:v[V]!==void 0?v[V]:void 0,ue=R.left_word,z=R.right_word;let X=null,I=!1;if(re){if(typeof re=="object")X=re.definition||re.right||re.word,I=re.word===ue&&(re.definition||re.right)===z;else if(typeof re=="string")try{const B=JSON.parse(re);X=B.definition||B.right||B.word,I=B.word===ue&&(B.definition||B.right)===z}catch{X=re}}return l.jsxs("tr",{className:I?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:L+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:ue}),l.jsx("td",{className:"px-4 py-3 text-sm",children:X?l.jsx("span",{className:I?"text-green-700 font-medium":"text-red-700 font-medium",children:X}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:z}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:I?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},Z)})})]})}),N=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsx("div",{className:"space-y-6",children:n.map((R,L)=>{const V=R.question_id||R.id||L+1,Z=String(V),Y=Number(V);L===0&&console.log(" [TestAnswerModal] Fill Blanks First Question Debug:",{questionIdNum:V,questionIdStr:Z,questionIdNumKey:Y,question:R,studentAnswers:v,studentAnswersKeys:Object.keys(v),correctAnswers:R.correct_answers});const re=v[Z]!==void 0?v[Z]:v[Y]!==void 0?v[Y]:v[V]!==void 0?v[V]:void 0,ue=Array.isArray(R.correct_answers)?R.correct_answers:[];let z=[];return Array.isArray(re)?z=re:re!=null?z=[re]:z=[],l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("h4",{className:"font-semibold text-gray-900 mb-3",children:["Question ",L+1]}),l.jsxs("div",{className:"space-y-3",children:[R.question_json&&l.jsx("div",{className:"text-sm text-gray-700 mb-4",children:typeof R.question_json=="string"?R.question_json:R.question_json.text||R.question_json.question||"Question text not available"}),l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Blank #"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Student Answer"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Correct Answer"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ue.map((X,I)=>{let B=z[I];const W=I+1,D=String(W),U=Number(W);(B==null||B==="")&&(B=v[D]!==void 0?v[D]:v[U]!==void 0?v[U]:B),L===0&&I===0&&console.log(" [TestAnswerModal] Fill Blanks First Blank Debug:",{blankIndex:I,potentialBlankId:W,potentialBlankIdStr:D,potentialBlankIdNum:U,studentAns:B,studentAnswersForQ:z,correctAns:X,studentAnswersKeys:Object.keys(v)});const q=String(B||"").trim().toLowerCase()===String(X||"").trim().toLowerCase();return l.jsxs("tr",{className:q?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:I+1}),l.jsx("td",{className:"px-4 py-2 text-sm",children:B?l.jsx("span",{className:q?"text-green-700 font-medium":"text-red-700 font-medium",children:String(B)}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:String(X)}),l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:q?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:""}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:""})})]},I)})})]})]})]},Z)})}),A=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Matching type tests require visual comparison. Answers stored as connection pairs."}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Word"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student Connection"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((R,L)=>{const V=R.question_id||R.id||L+1,Z=String(V),Y=Number(V),re=v[Z]!==void 0?v[Z]:v[Y]!==void 0?v[Y]:v[V]!==void 0?v[V]:void 0;return l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:R.word}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:re?typeof re=="object"?JSON.stringify(re):re:l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})})]},Z)})})]})})]}),P=()=>{if(!r)return null;const R=r.test_type||r.testType;if(s)return l.jsxs("div",{className:"flex items-center justify-center py-12",children:[l.jsx(un,{size:"lg"}),l.jsx("span",{className:"ml-4 text-gray-600",children:"Loading questions..."})]});if(!n||n.length===0)return l.jsxs("div",{className:"text-center py-8",children:[l.jsx("p",{className:"text-gray-500",children:"Unable to load questions for this test."}),l.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Test ID: ",r.test_id,", Type: ",R]})]});switch(R){case"multiple_choice":return C();case"true_false":return S();case"input":return w();case"word_matching":return T();case"fill_blanks":return N();case"matching_type":return A();default:return l.jsxs("div",{className:"text-center py-8",children:[l.jsxs("p",{className:"text-gray-500",children:['Test type "',R,'" is not supported for answer viewing.']}),l.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Drawing and Speaking tests have their own dedicated modals."})]})}};if(!r)return null;r.test_type||r.testType;const j=`${r.name||""} ${r.surname||""}`.trim(),F=`${r.test_name||"Test"} - ${j||r.student_id}`;return l.jsxs(Aa,{isOpen:e,onClose:t,title:F,size:"large",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[l.jsxs("div",{className:"flex space-x-6",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Score"}),(()=>{const R=r.test_type||r.testType,L=["multiple_choice","true_false","input"].includes(R),V=r.best_retest_score!==null&&r.best_retest_score!==void 0?r.best_retest_score:r.score||0,Z=r.best_retest_max_score||r.max_score||0;return L&&i?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",min:"0",max:Z,value:c,onChange:Y=>u(Y.target.value),className:"w-16 px-2 py-1 text-sm border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),l.jsxs("span",{className:"text-lg font-semibold text-gray-500",children:["/ ",Z]}),l.jsx("button",{type:"button",onClick:y,disabled:d,className:"px-2 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700 disabled:opacity-50",children:d?"Saving...":"Save"}),l.jsx("button",{type:"button",onClick:p,disabled:d,className:"px-2 py-1 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 disabled:opacity-50",children:"Cancel"})]}):l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:[V," / ",Z,r.best_retest_score!==null&&r.best_retest_score!==void 0&&l.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Retest Best)"})]}),L&&l.jsx("button",{onClick:g,className:"ml-2 px-2 py-1 text-xs text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded",title:"Click to edit score",children:"Edit"})]})})()]}),r.best_retest_percentage!==null&&r.best_retest_percentage!==void 0&&r.best_retest_percentage>0||r.percentage&&r.percentage>0?l.jsxs("div",{children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Percentage"}),l.jsx("div",{className:"text-lg font-semibold text-gray-900",children:r.best_retest_percentage!==null&&r.best_retest_percentage!==void 0?`${r.best_retest_percentage.toFixed(1)}%`:`${r.percentage?.toFixed(1)||"0.0"}%`})]}):null,r.subject&&r.subject!=="N/A"?l.jsxs("div",{children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Subject"}),l.jsx("div",{className:"text-sm font-medium text-gray-700",children:r.subject})]}):null]}),r.submitted_at&&l.jsxs("div",{className:"text-right",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Submitted"}),l.jsx("div",{className:"text-sm text-gray-700",children:new Date(r.submitted_at).toLocaleString()})]})]}),l.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:P()}),r.caught_cheating&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:l.jsxs("p",{className:"text-sm text-red-800",children:[" This test was flagged for suspicious activity (visibility changes: ",r.visibility_change_times||0,")"]})})]})},vfe=({isOpen:e,onClose:t,testResult:r,onScoreUpdate:n})=>{const[s,a]=_.useState(""),[i,o]=_.useState(!1);zs.useEffect(()=>{if(console.log("EditScoreModal: useEffect triggered",{isOpen:e,testResult:r}),e&&r){const h=r.best_retest_score!==null&&r.best_retest_score!==void 0?r.best_retest_score:r.score||0;a(h.toString()),console.log("EditScoreModal: Initialized with score",h)}},[e,r]);const c=async h=>{h.preventDefault(),h.stopPropagation();const g=r?.id||r?.result_id;if(!g){console.error("EditScoreModal: No id/result_id found",r),alert("Error: Test result ID not found");return}console.log("EditScoreModal: Saving score",{resultId:g,score:s,testType:r.test_type}),o(!0);try{const p=r.test_type||r.testType,y={resultId:g,score:parseInt(s)||0,testType:p};console.log("EditScoreModal: Sending payload",y);let v;if(window.tokenManager?.makeAuthenticatedRequest)v=await window.tokenManager.makeAuthenticatedRequest(qd.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});else{const{SecureToken:C}=await ni(async()=>{const{SecureToken:w}=await Promise.resolve().then(()=>o4);return{SecureToken:w}},void 0),S=await(window.tokenManager?.getToken()||C.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");v=await fetch(qd.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:S?`Bearer ${S}`:""},body:JSON.stringify(y)})}if(console.log("EditScoreModal: Response status",v.status),v.ok){const C=await v.json();console.log("EditScoreModal: Score updated successfully",C),n&&n(C),t()}else{const C=await v.json().catch(()=>({error:"Unknown error"}));console.error("EditScoreModal: Error response",C),alert(C.error||`Failed to update score. Status: ${v.status}`)}}catch(p){console.error("EditScoreModal: Exception updating score:",p),alert(`Failed to update score: ${p.message||p}`)}finally{o(!1)}};if(console.log("EditScoreModal: Rendering",{isOpen:e,testResult:r,hasTestResult:!!r}),!r)return console.log("EditScoreModal: No testResult, returning null"),null;const u=r.best_retest_max_score||r.max_score||0,d=`${r.name||""} ${r.surname||""}`.trim()||r.student_id,f=`Edit Score - ${r.test_name||"Test"} - ${d}`;return l.jsx(Aa,{isOpen:e,onClose:t,title:f,size:"small",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Score"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",min:"0",max:u,value:s,onChange:h=>a(h.target.value),className:"w-24 px-3 py-2 text-base border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),l.jsxs("span",{className:"text-lg font-semibold text-gray-600",children:["/ ",u]})]}),l.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Enter a score between 0 and ",u]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[l.jsx("button",{onClick:t,disabled:i,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),l.jsx("button",{type:"button",onClick:c,disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:opacity-50",children:i?"Saving...":"Save"})]})]})})};class pw extends zs.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){if(console.error("ErrorBoundary caught an error:",t,r),t.message&&t.message.includes("Minified React error #300")){console.warn("React error #300 caught and handled by ErrorBoundary");return}}render(){return this.state.hasError?l.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:[l.jsx("h3",{className:"text-red-800 font-medium",children:"Something went wrong"}),l.jsx("p",{className:"text-red-600 text-sm mt-1",children:"An error occurred while rendering this component."})]}):this.props.children}}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var $4={};$4.version="0.18.5";var NH=1252,bfe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],nE={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},sE=function(e){bfe.indexOf(e)!=-1&&(NH=nE[0]=e)};function wfe(){sE(1252)}var iu=function(e){sE(e)};function aE(){iu(1200),wfe()}function xO(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function _fe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function AH(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var $y=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?_fe(e.slice(2)):t==254&&r==255?AH(e.slice(2)):t==65279?e.slice(1):e},xw=function(t){return String.fromCharCode(t)},yO=function(t){return String.fromCharCode(t)},Mv,Mf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Ov(e){for(var t="",r=0,n=0,s=0,a=0,i=0,o=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),a=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,s=e.charCodeAt(u++),o=(n&15)<<2|s>>6,c=s&63,isNaN(n)?o=c=64:isNaN(s)&&(c=64),t+=Mf.charAt(a)+Mf.charAt(i)+Mf.charAt(o)+Mf.charAt(c);return t}function Wl(e){var t="",r=0,n=0,s=0,a=0,i=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)a=Mf.indexOf(e.charAt(u++)),i=Mf.indexOf(e.charAt(u++)),r=a<<2|i>>4,t+=String.fromCharCode(r),o=Mf.indexOf(e.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),c=Mf.indexOf(e.charAt(u++)),s=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var Tn=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),T0=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function Yf(e){return Tn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function vO(e){return Tn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Il=function(t){return Tn?T0(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function hS(e){if(typeof ArrayBuffer>"u")return Il(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function lh(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Sfe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function iE(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return iE(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Ci=Tn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:T0(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function kfe(e){for(var t=[],r=0,n=e.length+250,s=Yf(e.length+255),a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i<128)s[r++]=i;else if(i<2048)s[r++]=192|i>>6&31,s[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++a)&1023;s[r++]=240|i>>8&7,s[r++]=128|i>>2&63,s[r++]=128|o>>6&15|(i&3)<<4,s[r++]=128|o&63}else s[r++]=224|i>>12&15,s[r++]=128|i>>6&63,s[r++]=128|i&63;r>n&&(t.push(s.slice(0,r)),r=0,s=Yf(65535),n=65530)}return t.push(s.slice(0,r)),Ci(t)}var Vo=/\u0000/g,Uy=/[\u0001-\u0006]/g;function Rp(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function ou(e,t){var r=""+e;return r.length>=t?r:ma("0",t-r.length)+r}function oE(e,t){var r=""+e;return r.length>=t?r:ma(" ",t-r.length)+r}function U4(e,t){var r=""+e;return r.length>=t?r:r+ma(" ",t-r.length)}function Cfe(e,t){var r=""+Math.round(e);return r.length>=t?r:ma("0",t-r.length)+r}function Tfe(e,t){var r=""+e;return r.length>=t?r:ma("0",t-r.length)+r}var bO=Math.pow(2,32);function ip(e,t){if(e>bO||e<-bO)return Cfe(e,t);var r=Math.round(e);return Tfe(r,t)}function z4(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var wO=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],z5=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Efe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Qr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},_O={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Nfe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function W4(e,t,r){for(var n=e<0?-1:1,s=e*n,a=0,i=1,o=0,c=1,u=0,d=0,f=Math.floor(s);u<t&&(f=Math.floor(s),o=f*i+a,d=f*u+c,!(s-f<5e-8));)s=1/(s-f),a=i,i=o,c=u,u=d;if(d>t&&(u>t?(d=c,o=a):(d=u,o=i)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function im(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),a=0,i=[],o={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],a=c.getDay(),n<60&&(a=(a+6)%7),r&&(a=Ofe(c,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var jH=new Date(1899,11,31,0,0,0),Afe=jH.getTime(),jfe=new Date(1900,2,1,0,0,0);function PH(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=jfe&&(r+=1440*60*1e3),(r-(Afe+(e.getTimezoneOffset()-jH.getTimezoneOffset())*6e4))/(1440*60*1e3)}function lE(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Pfe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Ffe(e){var t=e<0?12:11,r=lE(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Mfe(e){var t=lE(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Dv(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Ffe(e):t===10?r=e.toFixed(10).substr(0,12):r=Mfe(e),lE(Pfe(r.toUpperCase()))}function Lm(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Dv(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Nc(14,PH(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Ofe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Dfe(e,t,r,n){var s="",a=0,i=0,o=r.y,c,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return z5[r.m-1][1];case 5:return z5[r.m-1][0];default:return z5[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return wO[r.q][0];default:return wO[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?ou(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,a=Math.round(i*(r.S+r.u)),a>=60*i&&(a=0),t==="s"?a===0?"0":""+a/i:(s=ou(a,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=o,u=1;break}var d=u>0?ou(c,u):"";return d}function Of(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var FH=/%/g;function Rfe(e,t,r){var n=t.replace(FH,""),s=t.length-n.length;return s0(e,n,r*Math.pow(10,2*s))+ma("%",s)}function Ife(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return s0(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function MH(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+MH(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var OH=/# (\?+)( ?)\/( ?)(\d+)/;function Lfe(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),a=Math.floor(s/n),i=s-a*n,o=n;return r+(a===0?"":""+a)+" "+(i===0?ma(" ",e[1].length+1+e[4].length):oE(i,e[1].length)+e[2]+"/"+e[3]+ou(o,e[4].length))}function Bfe(e,t,r){return r+(t===0?"":""+t)+ma(" ",e[1].length+2+e[4].length)}var DH=/^#*0*\.([0#]+)/,RH=/\).*[0#]/,IH=/\(###\) ###\\?-####/;function Lo(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function SO(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function kO(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function $fe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Ufe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function cc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(RH)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?cc("n",n,r):"("+cc("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Ife(e,t,r);if(t.indexOf("%")!==-1)return Rfe(e,t,r);if(t.indexOf("E")!==-1)return MH(t,r);if(t.charCodeAt(0)===36)return"$"+cc(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+ip(c,t.length);if(t.match(/^[#?]+$/))return s=ip(r,0),s==="0"&&(s=""),s.length>t.length?s:Lo(t.substr(0,t.length-s.length))+s;if(a=t.match(OH))return Lfe(a,c,u);if(t.match(/^#+0+$/))return u+ip(c,t.length-t.indexOf("0"));if(a=t.match(DH))return s=SO(r,a[1].length).replace(/^([^\.]+)$/,"$1."+Lo(a[1])).replace(/\.$/,"."+Lo(a[1])).replace(/\.(\d*)$/,function(p,y){return"."+y+ma("0",Lo(a[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return u+SO(c,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return u+Of(ip(c,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+cc(e,t,-r):Of(""+(Math.floor(r)+$fe(r,a[1].length)))+"."+ou(kO(r,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return cc(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Rp(cc(e,t.replace(/[\\-]/g,""),r)),i=0,Rp(Rp(t.replace(/\\/g,"")).replace(/[0#]/g,function(p){return i<s.length?s.charAt(i++):p==="0"?"0":""}));if(t.match(IH))return s=cc(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=W4(c,Math.pow(10,i)-1,!1),s=""+u,d=s0("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=U4(o[2],i),d.length<a[4].length&&(d=Lo(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=W4(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?oE(o[1],i)+a[2]+"/"+a[3]+U4(o[2],i):ma(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=ip(r,0),t.length<=s.length?s:Lo(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var f=t.indexOf(".")-i,h=t.length-s.length-f;return Lo(t.substr(0,f)+s+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return i=kO(r,a[1].length),r<0?"-"+cc(e,t,-r):Of(Ufe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?ou(0,3-p.length):"")+p})+"."+ou(i,a[1].length);switch(t){case"###,##0.00":return cc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=Of(ip(c,0));return g!=="0"?u+g:"";case"###,###.00":return cc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return cc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function zfe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return s0(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Wfe(e,t,r){var n=t.replace(FH,""),s=t.length-n.length;return s0(e,n,r*Math.pow(10,2*s))+ma("%",s)}function LH(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+LH(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Lu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(RH)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Lu("n",n,r):"("+Lu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return zfe(e,t,r);if(t.indexOf("%")!==-1)return Wfe(e,t,r);if(t.indexOf("E")!==-1)return LH(t,r);if(t.charCodeAt(0)===36)return"$"+Lu(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+ou(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:Lo(t.substr(0,t.length-s.length))+s;if(a=t.match(OH))return Bfe(a,c,u);if(t.match(/^#+0+$/))return u+ou(c,t.length-t.indexOf("0"));if(a=t.match(DH))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Lo(a[1])).replace(/\.$/,"."+Lo(a[1])),s=s.replace(/\.(\d*)$/,function(p,y){return"."+y+ma("0",Lo(a[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return u+Of(""+c);if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Lu(e,t,-r):Of(""+r)+"."+ma("0",a[1].length);if(a=t.match(/^#,#*,#0/))return Lu(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Rp(Lu(e,t.replace(/[\\-]/g,""),r)),i=0,Rp(Rp(t.replace(/\\/g,"")).replace(/[0#]/g,function(p){return i<s.length?s.charAt(i++):p==="0"?"0":""}));if(t.match(IH))return s=Lu(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=W4(c,Math.pow(10,i)-1,!1),s=""+u,d=s0("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=U4(o[2],i),d.length<a[4].length&&(d=Lo(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=W4(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?oE(o[1],i)+a[2]+"/"+a[3]+U4(o[2],i):ma(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:Lo(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var f=t.indexOf(".")-i,h=t.length-s.length-f;return Lo(t.substr(0,f)+s+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Lu(e,t,-r):Of(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?ou(0,3-p.length):"")+p})+"."+ou(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var g=Of(""+c);return g!=="0"?u+g:"";default:if(t.match(/\.[0#?]*$/))return Lu(e,t.slice(0,t.lastIndexOf(".")),r)+Lo(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function s0(e,t,r){return(r|0)===r?Lu(e,t,r):cc(e,t,r)}function Hfe(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var BH=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function N1(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":z4(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(BH))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Gfe(e,t,r,n){for(var s=[],a="",i=0,o="",c="t",u,d,f,h="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!z4(e,i))throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(f=e.charCodeAt(++i))!==34&&i<e.length;)a+=String.fromCharCode(f);s[s.length]={t:"t",v:a},++i;break;case"\\":var g=e.charAt(++i),p=g==="("||g===")"?g:"t";s[s.length]={t:p,v:g},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=im(t,r,e.charAt(i+1)==="2"),u==null))return"";s[s.length]={t:"X",v:e.substr(i,2)},c=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=im(t,r),u==null))return"";for(a=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)a+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),s[s.length]={t:o,v:a},c=o;break;case"A":case"a":case"":var y={t:o,v:o};if(u==null&&(u=im(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",h="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",i+=5,h="h"):e.substr(i,5).toUpperCase()==="/"?(u!=null&&(y.v=u.H>=12?"":""),y.t="T",i+=5,h="h"):(y.t="t",++i),u==null&&y.t==="T")return"";s[s.length]=y,c=o;break;case"[":for(a=o;e.charAt(i++)!=="]"&&i<e.length;)a+=e.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(BH)){if(u==null&&(u=im(t,r),u==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},c=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",N1(e)||(s[s.length]={t:"t",v:a}));break;case".":if(u!=null){for(a=o;++i<e.length&&(o=e.charAt(i))==="0";)a+=o;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)a+=o;s[s.length]={t:"n",v:a};break;case"?":for(a=o;e.charAt(++i)===o;)a+=o;s[s.length]={t:o,v:a},c=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)a+=e.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:o,v:o},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"t",v:o},++i;break}var v=0,C=0,S;for(i=s.length-1,c="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=h,c="h",v<1&&(v=1);break;case"s":(S=s[i].v.match(/\.0+$/))&&(C=Math.max(C,S[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":c=s[i].t;break;case"m":c==="s"&&(s[i].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[i].v.match(/[Hh]/)&&(v=1),v<2&&s[i].v.match(/[Mm]/)&&(v=2),v<3&&s[i].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var w="",T;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=Dfe(s[i].t.charCodeAt(0),s[i].v,u,C),s[i].t="t";break;case"n":case"?":for(T=i+1;s[T]!=null&&((o=s[T].t)==="?"||o==="D"||(o===" "||o==="t")&&s[T+1]!=null&&(s[T+1].t==="?"||s[T+1].t==="t"&&s[T+1].v==="/")||s[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[T].v==="/"||s[T].v===" "&&s[T+1]!=null&&s[T+1].t=="?"));)s[i].v+=s[T].v,s[T]={v:"",t:";"},++T;w+=s[i].v,i=T-1;break;case"G":s[i].t="t",s[i].v=Lm(t,r);break}var N="",A,P;if(w.length>0){w.charCodeAt(0)==40?(A=t<0&&w.charCodeAt(0)===45?-t:t,P=s0("n",w,A)):(A=t<0&&n>1?-t:t,P=s0("n",w,A),A<0&&s[0]&&s[0].t=="t"&&(P=P.substr(1),s[0].v="-"+s[0].v)),T=P.length-1;var j=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){j=i;break}var F=s.length;if(j===s.length&&P.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(T>=s[i].v.length-1?(T-=s[i].v.length,s[i].v=P.substr(T+1,s[i].v.length)):T<0?s[i].v="":(s[i].v=P.substr(0,T+1),T=-1),s[i].t="t",F=i);T>=0&&F<s.length&&(s[F].v=P.substr(0,T+1)+s[F].v)}else if(j!==s.length&&P.indexOf("E")===-1){for(T=P.indexOf(".")-1,i=j;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(d=s[i].v.indexOf(".")>-1&&i===j?s[i].v.indexOf(".")-1:s[i].v.length-1,N=s[i].v.substr(d+1);d>=0;--d)T>=0&&(s[i].v.charAt(d)==="0"||s[i].v.charAt(d)==="#")&&(N=P.charAt(T--)+N);s[i].v=N,s[i].t="t",F=i}for(T>=0&&F<s.length&&(s[F].v=P.substr(0,T+1)+s[F].v),T=P.indexOf(".")+1,i=j;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==j)){for(d=s[i].v.indexOf(".")>-1&&i===j?s[i].v.indexOf(".")+1:0,N=s[i].v.substr(0,d);d<s[i].v.length;++d)T<P.length&&(N+=P.charAt(T++));s[i].v=N,s[i].t="t",F=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(A=n>1&&t<0&&i>0&&s[i-1].v==="-"?-t:t,s[i].v=s0(s[i].t,s[i].v,A),s[i].t="t");var R="";for(i=0;i!==s.length;++i)s[i]!=null&&(R+=s[i].v);return R}var CO=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function TO(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function Vfe(e,t){var r=Hfe(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(CO),o=r[1].match(CO);return TO(t,i)?[n,r[0]]:TO(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,a]}function Nc(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Qr)[e],n==null&&(n=r.table&&r.table[_O[e]]||Qr[_O[e]]),n==null&&(n=Nfe[e]||"General");break}if(z4(n,0))return Lm(t,r);t instanceof Date&&(t=PH(t,r.date1904));var s=Vfe(n,t);if(z4(s[1]))return Lm(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Gfe(s[1],t,r,s[0])}function a0(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Qr[r]==null){t<0&&(t=r);continue}if(Qr[r]==e){t=r;break}}t<0&&(t=391)}return Qr[t]=e,t}function mS(e){for(var t=0;t!=392;++t)e[t]!==void 0&&a0(e[t],t)}function A1(){Qr=Efe()}var qfe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},$H=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Kfe(e){var t=typeof e=="number"?Qr[e]:e;return t=t.replace($H,"(\\d+)"),new RegExp("^"+t+"$")}function Yfe(e,t,r){var n=-1,s=-1,a=-1,i=-1,o=-1,c=-1;(t.match($H)||[]).forEach(function(f,h){var g=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=g;break;case"d":a=g;break;case"h":i=g;break;case"s":c=g;break;case"m":i>=0?o=g:s=g;break}}),c>=0&&o==-1&&s>=0&&(o=s,s=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&o==-1&&c==-1?u:n==-1&&s==-1&&a==-1?d:u+"T"+d}var Xfe=(function(){var e={};e.version="1.2.0";function t(){for(var P=0,j=new Array(256),F=0;F!=256;++F)P=F,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,j[F]=P;return typeof Int32Array<"u"?new Int32Array(j):j}var r=t();function n(P){var j=0,F=0,R=0,L=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(R=0;R!=256;++R)L[R]=P[R];for(R=0;R!=256;++R)for(F=P[R],j=256+R;j<4096;j+=256)F=L[j]=F>>>8^P[F&255];var V=[];for(R=1;R!=16;++R)V[R-1]=typeof Int32Array<"u"?L.subarray(R*256,R*256+256):L.slice(R*256,R*256+256);return V}var s=n(r),a=s[0],i=s[1],o=s[2],c=s[3],u=s[4],d=s[5],f=s[6],h=s[7],g=s[8],p=s[9],y=s[10],v=s[11],C=s[12],S=s[13],w=s[14];function T(P,j){for(var F=j^-1,R=0,L=P.length;R<L;)F=F>>>8^r[(F^P.charCodeAt(R++))&255];return~F}function N(P,j){for(var F=j^-1,R=P.length-15,L=0;L<R;)F=w[P[L++]^F&255]^S[P[L++]^F>>8&255]^C[P[L++]^F>>16&255]^v[P[L++]^F>>>24]^y[P[L++]]^p[P[L++]]^g[P[L++]]^h[P[L++]]^f[P[L++]]^d[P[L++]]^u[P[L++]]^c[P[L++]]^o[P[L++]]^i[P[L++]]^a[P[L++]]^r[P[L++]];for(R+=15;L<R;)F=F>>>8^r[(F^P[L++])&255];return~F}function A(P,j){for(var F=j^-1,R=0,L=P.length,V=0,Z=0;R<L;)V=P.charCodeAt(R++),V<128?F=F>>>8^r[(F^V)&255]:V<2048?(F=F>>>8^r[(F^(192|V>>6&31))&255],F=F>>>8^r[(F^(128|V&63))&255]):V>=55296&&V<57344?(V=(V&1023)+64,Z=P.charCodeAt(R++)&1023,F=F>>>8^r[(F^(240|V>>8&7))&255],F=F>>>8^r[(F^(128|V>>2&63))&255],F=F>>>8^r[(F^(128|Z>>6&15|(V&3)<<4))&255],F=F>>>8^r[(F^(128|Z&63))&255]):(F=F>>>8^r[(F^(224|V>>12&15))&255],F=F>>>8^r[(F^(128|V>>6&63))&255],F=F>>>8^r[(F^(128|V&63))&255]);return~F}return e.table=r,e.bstr=T,e.buf=N,e.str=A,e})(),Hr=(function(){var t={};t.version="1.2.1";function r(pe,Ne){for(var le=pe.split("/"),fe=Ne.split("/"),ge=0,Se=0,ze=Math.min(le.length,fe.length);ge<ze;++ge){if(Se=le[ge].length-fe[ge].length)return Se;if(le[ge]!=fe[ge])return le[ge]<fe[ge]?-1:1}return le.length-fe.length}function n(pe){if(pe.charAt(pe.length-1)=="/")return pe.slice(0,-1).indexOf("/")===-1?pe:n(pe.slice(0,-1));var Ne=pe.lastIndexOf("/");return Ne===-1?pe:pe.slice(0,Ne+1)}function s(pe){if(pe.charAt(pe.length-1)=="/")return s(pe.slice(0,-1));var Ne=pe.lastIndexOf("/");return Ne===-1?pe:pe.slice(Ne+1)}function a(pe,Ne){typeof Ne=="string"&&(Ne=new Date(Ne));var le=Ne.getHours();le=le<<6|Ne.getMinutes(),le=le<<5|Ne.getSeconds()>>>1,pe.write_shift(2,le);var fe=Ne.getFullYear()-1980;fe=fe<<4|Ne.getMonth()+1,fe=fe<<5|Ne.getDate(),pe.write_shift(2,fe)}function i(pe){var Ne=pe.read_shift(2)&65535,le=pe.read_shift(2)&65535,fe=new Date,ge=le&31;le>>>=5;var Se=le&15;le>>>=4,fe.setMilliseconds(0),fe.setFullYear(le+1980),fe.setMonth(Se-1),fe.setDate(ge);var ze=Ne&31;Ne>>>=5;var it=Ne&63;return Ne>>>=6,fe.setHours(Ne),fe.setMinutes(it),fe.setSeconds(ze<<1),fe}function o(pe){Ki(pe,0);for(var Ne={},le=0;pe.l<=pe.length-4;){var fe=pe.read_shift(2),ge=pe.read_shift(2),Se=pe.l+ge,ze={};switch(fe){case 21589:le=pe.read_shift(1),le&1&&(ze.mtime=pe.read_shift(4)),ge>5&&(le&2&&(ze.atime=pe.read_shift(4)),le&4&&(ze.ctime=pe.read_shift(4))),ze.mtime&&(ze.mt=new Date(ze.mtime*1e3));break}pe.l=Se,Ne[fe]=ze}return Ne}var c;function u(){return c||(c={})}function d(pe,Ne){if(pe[0]==80&&pe[1]==75)return we(pe,Ne);if((pe[0]|32)==109&&(pe[1]|32)==105)return ct(pe,Ne);if(pe.length<512)throw new Error("CFB file size "+pe.length+" < 512");var le=3,fe=512,ge=0,Se=0,ze=0,it=0,Ye=0,de=[],ve=pe.slice(0,512);Ki(ve,0);var Me=f(ve);switch(le=Me[0],le){case 3:fe=512;break;case 4:fe=4096;break;case 0:if(Me[1]==0)return we(pe,Ne);default:throw new Error("Major Version: Expected 3 or 4 saw "+le)}fe!==512&&(ve=pe.slice(0,fe),Ki(ve,28));var Oe=pe.slice(0,fe);h(ve,le);var nt=ve.read_shift(4,"i");if(le===3&&nt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+nt);ve.l+=4,ze=ve.read_shift(4,"i"),ve.l+=4,ve.chk("00100000","Mini Stream Cutoff Size: "),it=ve.read_shift(4,"i"),ge=ve.read_shift(4,"i"),Ye=ve.read_shift(4,"i"),Se=ve.read_shift(4,"i");for(var bt=-1,At=0;At<109&&(bt=ve.read_shift(4,"i"),!(bt<0));++At)de[At]=bt;var cr=g(pe,fe);v(Ye,Se,cr,fe,de);var pt=S(cr,ze,de,fe);pt[ze].name="!Directory",ge>0&&it!==Z&&(pt[it].name="!MiniFAT"),pt[de[0]].name="!FAT",pt.fat_addrs=de,pt.ssz=fe;var zt={},xr=[],Ir=[],$r=[];w(ze,pt,cr,xr,ge,zt,Ir,it),p(Ir,$r,xr),xr.shift();var mn={FileIndex:Ir,FullPaths:$r};return Ne&&Ne.raw&&(mn.raw={header:Oe,sectors:cr}),mn}function f(pe){if(pe[pe.l]==80&&pe[pe.l+1]==75)return[0,0];pe.chk(Y,"Header Signature: "),pe.l+=16;var Ne=pe.read_shift(2,"u");return[pe.read_shift(2,"u"),Ne]}function h(pe,Ne){var le=9;switch(pe.l+=2,le=pe.read_shift(2)){case 9:if(Ne!=3)throw new Error("Sector Shift: Expected 9 saw "+le);break;case 12:if(Ne!=4)throw new Error("Sector Shift: Expected 12 saw "+le);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+le)}pe.chk("0600","Mini Sector Shift: "),pe.chk("000000000000","Reserved: ")}function g(pe,Ne){for(var le=Math.ceil(pe.length/Ne)-1,fe=[],ge=1;ge<le;++ge)fe[ge-1]=pe.slice(ge*Ne,(ge+1)*Ne);return fe[le-1]=pe.slice(le*Ne),fe}function p(pe,Ne,le){for(var fe=0,ge=0,Se=0,ze=0,it=0,Ye=le.length,de=[],ve=[];fe<Ye;++fe)de[fe]=ve[fe]=fe,Ne[fe]=le[fe];for(;it<ve.length;++it)fe=ve[it],ge=pe[fe].L,Se=pe[fe].R,ze=pe[fe].C,de[fe]===fe&&(ge!==-1&&de[ge]!==ge&&(de[fe]=de[ge]),Se!==-1&&de[Se]!==Se&&(de[fe]=de[Se])),ze!==-1&&(de[ze]=fe),ge!==-1&&fe!=de[fe]&&(de[ge]=de[fe],ve.lastIndexOf(ge)<it&&ve.push(ge)),Se!==-1&&fe!=de[fe]&&(de[Se]=de[fe],ve.lastIndexOf(Se)<it&&ve.push(Se));for(fe=1;fe<Ye;++fe)de[fe]===fe&&(Se!==-1&&de[Se]!==Se?de[fe]=de[Se]:ge!==-1&&de[ge]!==ge&&(de[fe]=de[ge]));for(fe=1;fe<Ye;++fe)if(pe[fe].type!==0){if(it=fe,it!=de[it])do it=de[it],Ne[fe]=Ne[it]+"/"+Ne[fe];while(it!==0&&de[it]!==-1&&it!=de[it]);de[fe]=-1}for(Ne[0]+="/",fe=1;fe<Ye;++fe)pe[fe].type!==2&&(Ne[fe]+="/")}function y(pe,Ne,le){for(var fe=pe.start,ge=pe.size,Se=[],ze=fe;le&&ge>0&&ze>=0;)Se.push(Ne.slice(ze*V,ze*V+V)),ge-=V,ze=rm(le,ze*4);return Se.length===0?Rt(0):Ci(Se).slice(0,pe.size)}function v(pe,Ne,le,fe,ge){var Se=Z;if(pe===Z){if(Ne!==0)throw new Error("DIFAT chain shorter than expected")}else if(pe!==-1){var ze=le[pe],it=(fe>>>2)-1;if(!ze)return;for(var Ye=0;Ye<it&&(Se=rm(ze,Ye*4))!==Z;++Ye)ge.push(Se);v(rm(ze,fe-4),Ne-1,le,fe,ge)}}function C(pe,Ne,le,fe,ge){var Se=[],ze=[];ge||(ge=[]);var it=fe-1,Ye=0,de=0;for(Ye=Ne;Ye>=0;){ge[Ye]=!0,Se[Se.length]=Ye,ze.push(pe[Ye]);var ve=le[Math.floor(Ye*4/fe)];if(de=Ye*4&it,fe<4+de)throw new Error("FAT boundary crossed: "+Ye+" 4 "+fe);if(!pe[ve])break;Ye=rm(pe[ve],de)}return{nodes:Se,data:LO([ze])}}function S(pe,Ne,le,fe){var ge=pe.length,Se=[],ze=[],it=[],Ye=[],de=fe-1,ve=0,Me=0,Oe=0,nt=0;for(ve=0;ve<ge;++ve)if(it=[],Oe=ve+Ne,Oe>=ge&&(Oe-=ge),!ze[Oe]){Ye=[];var bt=[];for(Me=Oe;Me>=0;){bt[Me]=!0,ze[Me]=!0,it[it.length]=Me,Ye.push(pe[Me]);var At=le[Math.floor(Me*4/fe)];if(nt=Me*4&de,fe<4+nt)throw new Error("FAT boundary crossed: "+Me+" 4 "+fe);if(!pe[At]||(Me=rm(pe[At],nt),bt[Me]))break}Se[Oe]={nodes:it,data:LO([Ye])}}return Se}function w(pe,Ne,le,fe,ge,Se,ze,it){for(var Ye=0,de=fe.length?2:0,ve=Ne[pe].data,Me=0,Oe=0,nt;Me<ve.length;Me+=128){var bt=ve.slice(Me,Me+128);Ki(bt,64),Oe=bt.read_shift(2),nt=gE(bt,0,Oe-de),fe.push(nt);var At={name:nt,type:bt.read_shift(1),color:bt.read_shift(1),L:bt.read_shift(4,"i"),R:bt.read_shift(4,"i"),C:bt.read_shift(4,"i"),clsid:bt.read_shift(16),state:bt.read_shift(4,"i"),start:0,size:0},cr=bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2);cr!==0&&(At.ct=T(bt,bt.l-8));var pt=bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2);pt!==0&&(At.mt=T(bt,bt.l-8)),At.start=bt.read_shift(4,"i"),At.size=bt.read_shift(4,"i"),At.size<0&&At.start<0&&(At.size=At.type=0,At.start=Z,At.name=""),At.type===5?(Ye=At.start,ge>0&&Ye!==Z&&(Ne[Ye].name="!StreamData")):At.size>=4096?(At.storage="fat",Ne[At.start]===void 0&&(Ne[At.start]=C(le,At.start,Ne.fat_addrs,Ne.ssz)),Ne[At.start].name=At.name,At.content=Ne[At.start].data.slice(0,At.size)):(At.storage="minifat",At.size<0?At.size=0:Ye!==Z&&At.start!==Z&&Ne[Ye]&&(At.content=y(At,Ne[Ye].data,(Ne[it]||{}).data))),At.content&&Ki(At.content,0),Se[nt]=At,ze.push(At)}}function T(pe,Ne){return new Date((Ol(pe,Ne+4)/1e7*Math.pow(2,32)+Ol(pe,Ne)/1e7-11644473600)*1e3)}function N(pe,Ne){return u(),d(c.readFileSync(pe),Ne)}function A(pe,Ne){var le=Ne&&Ne.type;switch(le||Tn&&Buffer.isBuffer(pe)&&(le="buffer"),le||"base64"){case"file":return N(pe,Ne);case"base64":return d(Il(Wl(pe)),Ne);case"binary":return d(Il(pe),Ne)}return d(pe,Ne)}function P(pe,Ne){var le=Ne||{},fe=le.root||"Root Entry";if(pe.FullPaths||(pe.FullPaths=[]),pe.FileIndex||(pe.FileIndex=[]),pe.FullPaths.length!==pe.FileIndex.length)throw new Error("inconsistent CFB structure");pe.FullPaths.length===0&&(pe.FullPaths[0]=fe+"/",pe.FileIndex[0]={name:fe,type:5}),le.CLSID&&(pe.FileIndex[0].clsid=le.CLSID),j(pe)}function j(pe){var Ne="Sh33tJ5";if(!Hr.find(pe,"/"+Ne)){var le=Rt(4);le[0]=55,le[1]=le[3]=50,le[2]=54,pe.FileIndex.push({name:Ne,type:2,content:le,size:4,L:69,R:69,C:69}),pe.FullPaths.push(pe.FullPaths[0]+Ne),F(pe)}}function F(pe,Ne){P(pe);for(var le=!1,fe=!1,ge=pe.FullPaths.length-1;ge>=0;--ge){var Se=pe.FileIndex[ge];switch(Se.type){case 0:fe?le=!0:(pe.FileIndex.pop(),pe.FullPaths.pop());break;case 1:case 2:case 5:fe=!0,isNaN(Se.R*Se.L*Se.C)&&(le=!0),Se.R>-1&&Se.L>-1&&Se.R==Se.L&&(le=!0);break;default:le=!0;break}}if(!(!le&&!Ne)){var ze=new Date(1987,1,19),it=0,Ye=Object.create?Object.create(null):{},de=[];for(ge=0;ge<pe.FullPaths.length;++ge)Ye[pe.FullPaths[ge]]=!0,pe.FileIndex[ge].type!==0&&de.push([pe.FullPaths[ge],pe.FileIndex[ge]]);for(ge=0;ge<de.length;++ge){var ve=n(de[ge][0]);fe=Ye[ve],fe||(de.push([ve,{name:s(ve).replace("/",""),type:1,clsid:ue,ct:ze,mt:ze,content:null}]),Ye[ve]=!0)}for(de.sort(function(nt,bt){return r(nt[0],bt[0])}),pe.FullPaths=[],pe.FileIndex=[],ge=0;ge<de.length;++ge)pe.FullPaths[ge]=de[ge][0],pe.FileIndex[ge]=de[ge][1];for(ge=0;ge<de.length;++ge){var Me=pe.FileIndex[ge],Oe=pe.FullPaths[ge];if(Me.name=s(Oe).replace("/",""),Me.L=Me.R=Me.C=-(Me.color=1),Me.size=Me.content?Me.content.length:0,Me.start=0,Me.clsid=Me.clsid||ue,ge===0)Me.C=de.length>1?1:-1,Me.size=0,Me.type=5;else if(Oe.slice(-1)=="/"){for(it=ge+1;it<de.length&&n(pe.FullPaths[it])!=Oe;++it);for(Me.C=it>=de.length?-1:it,it=ge+1;it<de.length&&n(pe.FullPaths[it])!=n(Oe);++it);Me.R=it>=de.length?-1:it,Me.type=1}else n(pe.FullPaths[ge+1]||"")==n(Oe)&&(Me.R=ge+1),Me.type=2}}}function R(pe,Ne){var le=Ne||{};if(le.fileType=="mad")return Qt(pe,le);switch(F(pe),le.fileType){case"zip":return Ee(pe,le)}var fe=(function(nt){for(var bt=0,At=0,cr=0;cr<nt.FileIndex.length;++cr){var pt=nt.FileIndex[cr];if(pt.content){var zt=pt.content.length;zt>0&&(zt<4096?bt+=zt+63>>6:At+=zt+511>>9)}}for(var xr=nt.FullPaths.length+3>>2,Ir=bt+7>>3,$r=bt+127>>7,mn=Ir+At+xr+$r,Gr=mn+127>>7,zr=Gr<=109?0:Math.ceil((Gr-109)/127);mn+Gr+zr+127>>7>Gr;)zr=++Gr<=109?0:Math.ceil((Gr-109)/127);var Xt=[1,zr,Gr,$r,xr,At,bt,0];return nt.FileIndex[0].size=bt<<6,Xt[7]=(nt.FileIndex[0].start=Xt[0]+Xt[1]+Xt[2]+Xt[3]+Xt[4]+Xt[5])+(Xt[6]+7>>3),Xt})(pe),ge=Rt(fe[7]<<9),Se=0,ze=0;{for(Se=0;Se<8;++Se)ge.write_shift(1,re[Se]);for(Se=0;Se<8;++Se)ge.write_shift(2,0);for(ge.write_shift(2,62),ge.write_shift(2,3),ge.write_shift(2,65534),ge.write_shift(2,9),ge.write_shift(2,6),Se=0;Se<3;++Se)ge.write_shift(2,0);for(ge.write_shift(4,0),ge.write_shift(4,fe[2]),ge.write_shift(4,fe[0]+fe[1]+fe[2]+fe[3]-1),ge.write_shift(4,0),ge.write_shift(4,4096),ge.write_shift(4,fe[3]?fe[0]+fe[1]+fe[2]-1:Z),ge.write_shift(4,fe[3]),ge.write_shift(-4,fe[1]?fe[0]-1:Z),ge.write_shift(4,fe[1]),Se=0;Se<109;++Se)ge.write_shift(-4,Se<fe[2]?fe[1]+Se:-1)}if(fe[1])for(ze=0;ze<fe[1];++ze){for(;Se<236+ze*127;++Se)ge.write_shift(-4,Se<fe[2]?fe[1]+Se:-1);ge.write_shift(-4,ze===fe[1]-1?Z:ze+1)}var it=function(nt){for(ze+=nt;Se<ze-1;++Se)ge.write_shift(-4,Se+1);nt&&(++Se,ge.write_shift(-4,Z))};for(ze=Se=0,ze+=fe[1];Se<ze;++Se)ge.write_shift(-4,z.DIFSECT);for(ze+=fe[2];Se<ze;++Se)ge.write_shift(-4,z.FATSECT);it(fe[3]),it(fe[4]);for(var Ye=0,de=0,ve=pe.FileIndex[0];Ye<pe.FileIndex.length;++Ye)ve=pe.FileIndex[Ye],ve.content&&(de=ve.content.length,!(de<4096)&&(ve.start=ze,it(de+511>>9)));for(it(fe[6]+7>>3);ge.l&511;)ge.write_shift(-4,z.ENDOFCHAIN);for(ze=Se=0,Ye=0;Ye<pe.FileIndex.length;++Ye)ve=pe.FileIndex[Ye],ve.content&&(de=ve.content.length,!(!de||de>=4096)&&(ve.start=ze,it(de+63>>6)));for(;ge.l&511;)ge.write_shift(-4,z.ENDOFCHAIN);for(Se=0;Se<fe[4]<<2;++Se){var Me=pe.FullPaths[Se];if(!Me||Me.length===0){for(Ye=0;Ye<17;++Ye)ge.write_shift(4,0);for(Ye=0;Ye<3;++Ye)ge.write_shift(4,-1);for(Ye=0;Ye<12;++Ye)ge.write_shift(4,0);continue}ve=pe.FileIndex[Se],Se===0&&(ve.start=ve.size?ve.start-1:Z);var Oe=Se===0&&le.root||ve.name;if(de=2*(Oe.length+1),ge.write_shift(64,Oe,"utf16le"),ge.write_shift(2,de),ge.write_shift(1,ve.type),ge.write_shift(1,ve.color),ge.write_shift(-4,ve.L),ge.write_shift(-4,ve.R),ge.write_shift(-4,ve.C),ve.clsid)ge.write_shift(16,ve.clsid,"hex");else for(Ye=0;Ye<4;++Ye)ge.write_shift(4,0);ge.write_shift(4,ve.state||0),ge.write_shift(4,0),ge.write_shift(4,0),ge.write_shift(4,0),ge.write_shift(4,0),ge.write_shift(4,ve.start),ge.write_shift(4,ve.size),ge.write_shift(4,0)}for(Se=1;Se<pe.FileIndex.length;++Se)if(ve=pe.FileIndex[Se],ve.size>=4096)if(ge.l=ve.start+1<<9,Tn&&Buffer.isBuffer(ve.content))ve.content.copy(ge,ge.l,0,ve.size),ge.l+=ve.size+511&-512;else{for(Ye=0;Ye<ve.size;++Ye)ge.write_shift(1,ve.content[Ye]);for(;Ye&511;++Ye)ge.write_shift(1,0)}for(Se=1;Se<pe.FileIndex.length;++Se)if(ve=pe.FileIndex[Se],ve.size>0&&ve.size<4096)if(Tn&&Buffer.isBuffer(ve.content))ve.content.copy(ge,ge.l,0,ve.size),ge.l+=ve.size+63&-64;else{for(Ye=0;Ye<ve.size;++Ye)ge.write_shift(1,ve.content[Ye]);for(;Ye&63;++Ye)ge.write_shift(1,0)}if(Tn)ge.l=ge.length;else for(;ge.l<ge.length;)ge.write_shift(1,0);return ge}function L(pe,Ne){var le=pe.FullPaths.map(function(Ye){return Ye.toUpperCase()}),fe=le.map(function(Ye){var de=Ye.split("/");return de[de.length-(Ye.slice(-1)=="/"?2:1)]}),ge=!1;Ne.charCodeAt(0)===47?(ge=!0,Ne=le[0].slice(0,-1)+Ne):ge=Ne.indexOf("/")!==-1;var Se=Ne.toUpperCase(),ze=ge===!0?le.indexOf(Se):fe.indexOf(Se);if(ze!==-1)return pe.FileIndex[ze];var it=!Se.match(Uy);for(Se=Se.replace(Vo,""),it&&(Se=Se.replace(Uy,"!")),ze=0;ze<le.length;++ze)if((it?le[ze].replace(Uy,"!"):le[ze]).replace(Vo,"")==Se||(it?fe[ze].replace(Uy,"!"):fe[ze]).replace(Vo,"")==Se)return pe.FileIndex[ze];return null}var V=64,Z=-2,Y="d0cf11e0a1b11ae1",re=[208,207,17,224,161,177,26,225],ue="00000000000000000000000000000000",z={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Z,FREESECT:-1,HEADER_SIGNATURE:Y,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ue,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function X(pe,Ne,le){u();var fe=R(pe,le);c.writeFileSync(Ne,fe)}function I(pe){for(var Ne=new Array(pe.length),le=0;le<pe.length;++le)Ne[le]=String.fromCharCode(pe[le]);return Ne.join("")}function B(pe,Ne){var le=R(pe,Ne);switch(Ne&&Ne.type||"buffer"){case"file":return u(),c.writeFileSync(Ne.filename,le),le;case"binary":return typeof le=="string"?le:I(le);case"base64":return Ov(typeof le=="string"?le:I(le));case"buffer":if(Tn)return Buffer.isBuffer(le)?le:T0(le);case"array":return typeof le=="string"?Il(le):le}return le}var W;function D(pe){try{var Ne=pe.InflateRaw,le=new Ne;if(le._processChunk(new Uint8Array([3,0]),le._finishFlushFlag),le.bytesRead)W=pe;else throw new Error("zlib does not expose bytesRead")}catch(fe){console.error("cannot use native zlib: "+(fe.message||fe))}}function U(pe,Ne){if(!W)return lr(pe,Ne);var le=W.InflateRaw,fe=new le,ge=fe._processChunk(pe.slice(pe.l),fe._finishFlushFlag);return pe.l+=fe.bytesRead,ge}function q(pe){return W?W.deflateRawSync(pe):Ge(pe)}var H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],te=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Q=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ae(pe){var Ne=(pe<<1|pe<<11)&139536|(pe<<5|pe<<15)&558144;return(Ne>>16|Ne>>8|Ne)&255}for(var ce=typeof Uint8Array<"u",me=ce?new Uint8Array(256):[],xe=0;xe<256;++xe)me[xe]=ae(xe);function se(pe,Ne){var le=me[pe&255];return Ne<=8?le>>>8-Ne:(le=le<<8|me[pe>>8&255],Ne<=16?le>>>16-Ne:(le=le<<8|me[pe>>16&255],le>>>24-Ne))}function De(pe,Ne){var le=Ne&7,fe=Ne>>>3;return(pe[fe]|(le<=6?0:pe[fe+1]<<8))>>>le&3}function He(pe,Ne){var le=Ne&7,fe=Ne>>>3;return(pe[fe]|(le<=5?0:pe[fe+1]<<8))>>>le&7}function rt(pe,Ne){var le=Ne&7,fe=Ne>>>3;return(pe[fe]|(le<=4?0:pe[fe+1]<<8))>>>le&15}function _t(pe,Ne){var le=Ne&7,fe=Ne>>>3;return(pe[fe]|(le<=3?0:pe[fe+1]<<8))>>>le&31}function Ke(pe,Ne){var le=Ne&7,fe=Ne>>>3;return(pe[fe]|(le<=1?0:pe[fe+1]<<8))>>>le&127}function tt(pe,Ne,le){var fe=Ne&7,ge=Ne>>>3,Se=(1<<le)-1,ze=pe[ge]>>>fe;return le<8-fe||(ze|=pe[ge+1]<<8-fe,le<16-fe)||(ze|=pe[ge+2]<<16-fe,le<24-fe)||(ze|=pe[ge+3]<<24-fe),ze&Se}function Pe(pe,Ne,le){var fe=Ne&7,ge=Ne>>>3;return fe<=5?pe[ge]|=(le&7)<<fe:(pe[ge]|=le<<fe&255,pe[ge+1]=(le&7)>>8-fe),Ne+3}function je(pe,Ne,le){var fe=Ne&7,ge=Ne>>>3;return le=(le&1)<<fe,pe[ge]|=le,Ne+1}function Qe(pe,Ne,le){var fe=Ne&7,ge=Ne>>>3;return le<<=fe,pe[ge]|=le&255,le>>>=8,pe[ge+1]=le,Ne+8}function vt(pe,Ne,le){var fe=Ne&7,ge=Ne>>>3;return le<<=fe,pe[ge]|=le&255,le>>>=8,pe[ge+1]=le&255,pe[ge+2]=le>>>8,Ne+16}function Ot(pe,Ne){var le=pe.length,fe=2*le>Ne?2*le:Ne+5,ge=0;if(le>=Ne)return pe;if(Tn){var Se=vO(fe);if(pe.copy)pe.copy(Se);else for(;ge<pe.length;++ge)Se[ge]=pe[ge];return Se}else if(ce){var ze=new Uint8Array(fe);if(ze.set)ze.set(pe);else for(;ge<le;++ge)ze[ge]=pe[ge];return ze}return pe.length=fe,pe}function $t(pe){for(var Ne=new Array(pe),le=0;le<pe;++le)Ne[le]=0;return Ne}function Gt(pe,Ne,le){var fe=1,ge=0,Se=0,ze=0,it=0,Ye=pe.length,de=ce?new Uint16Array(32):$t(32);for(Se=0;Se<32;++Se)de[Se]=0;for(Se=Ye;Se<le;++Se)pe[Se]=0;Ye=pe.length;var ve=ce?new Uint16Array(Ye):$t(Ye);for(Se=0;Se<Ye;++Se)de[ge=pe[Se]]++,fe<ge&&(fe=ge),ve[Se]=0;for(de[0]=0,Se=1;Se<=fe;++Se)de[Se+16]=it=it+de[Se-1]<<1;for(Se=0;Se<Ye;++Se)it=pe[Se],it!=0&&(ve[Se]=de[it+16]++);var Me=0;for(Se=0;Se<Ye;++Se)if(Me=pe[Se],Me!=0)for(it=se(ve[Se],fe)>>fe-Me,ze=(1<<fe+4-Me)-1;ze>=0;--ze)Ne[it|ze<<Me]=Me&15|Se<<4;return fe}var ir=ce?new Uint16Array(512):$t(512),dt=ce?new Uint16Array(32):$t(32);if(!ce){for(var gt=0;gt<512;++gt)ir[gt]=0;for(gt=0;gt<32;++gt)dt[gt]=0}(function(){for(var pe=[],Ne=0;Ne<32;Ne++)pe.push(5);Gt(pe,dt,32);var le=[];for(Ne=0;Ne<=143;Ne++)le.push(8);for(;Ne<=255;Ne++)le.push(9);for(;Ne<=279;Ne++)le.push(7);for(;Ne<=287;Ne++)le.push(8);Gt(le,ir,288)})();var kt=(function(){for(var Ne=ce?new Uint8Array(32768):[],le=0,fe=0;le<Q.length-1;++le)for(;fe<Q[le+1];++fe)Ne[fe]=le;for(;fe<32768;++fe)Ne[fe]=29;var ge=ce?new Uint8Array(259):[];for(le=0,fe=0;le<te.length-1;++le)for(;fe<te[le+1];++fe)ge[fe]=le;function Se(it,Ye){for(var de=0;de<it.length;){var ve=Math.min(65535,it.length-de),Me=de+ve==it.length;for(Ye.write_shift(1,+Me),Ye.write_shift(2,ve),Ye.write_shift(2,~ve&65535);ve-- >0;)Ye[Ye.l++]=it[de++]}return Ye.l}function ze(it,Ye){for(var de=0,ve=0,Me=ce?new Uint16Array(32768):[];ve<it.length;){var Oe=Math.min(65535,it.length-ve);if(Oe<10){for(de=Pe(Ye,de,+(ve+Oe==it.length)),de&7&&(de+=8-(de&7)),Ye.l=de/8|0,Ye.write_shift(2,Oe),Ye.write_shift(2,~Oe&65535);Oe-- >0;)Ye[Ye.l++]=it[ve++];de=Ye.l*8;continue}de=Pe(Ye,de,+(ve+Oe==it.length)+2);for(var nt=0;Oe-- >0;){var bt=it[ve];nt=(nt<<5^bt)&32767;var At=-1,cr=0;if((At=Me[nt])&&(At|=ve&-32768,At>ve&&(At-=32768),At<ve))for(;it[At+cr]==it[ve+cr]&&cr<250;)++cr;if(cr>2){bt=ge[cr],bt<=22?de=Qe(Ye,de,me[bt+1]>>1)-1:(Qe(Ye,de,3),de+=5,Qe(Ye,de,me[bt-23]>>5),de+=3);var pt=bt<8?0:bt-4>>2;pt>0&&(vt(Ye,de,cr-te[bt]),de+=pt),bt=Ne[ve-At],de=Qe(Ye,de,me[bt]>>3),de-=3;var zt=bt<4?0:bt-2>>1;zt>0&&(vt(Ye,de,ve-At-Q[bt]),de+=zt);for(var xr=0;xr<cr;++xr)Me[nt]=ve&32767,nt=(nt<<5^it[ve])&32767,++ve;Oe-=cr-1}else bt<=143?bt=bt+48:de=je(Ye,de,1),de=Qe(Ye,de,me[bt]),Me[nt]=ve&32767,++ve}de=Qe(Ye,de,0)-1}return Ye.l=(de+7)/8|0,Ye.l}return function(Ye,de){return Ye.length<8?Se(Ye,de):ze(Ye,de)}})();function Ge(pe){var Ne=Rt(50+Math.floor(pe.length*1.1)),le=kt(pe,Ne);return Ne.slice(0,le)}var Xe=ce?new Uint16Array(32768):$t(32768),Et=ce?new Uint16Array(32768):$t(32768),Ut=ce?new Uint16Array(128):$t(128),Wt=1,pr=1;function wr(pe,Ne){var le=_t(pe,Ne)+257;Ne+=5;var fe=_t(pe,Ne)+1;Ne+=5;var ge=rt(pe,Ne)+4;Ne+=4;for(var Se=0,ze=ce?new Uint8Array(19):$t(19),it=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ye=1,de=ce?new Uint8Array(8):$t(8),ve=ce?new Uint8Array(8):$t(8),Me=ze.length,Oe=0;Oe<ge;++Oe)ze[H[Oe]]=Se=He(pe,Ne),Ye<Se&&(Ye=Se),de[Se]++,Ne+=3;var nt=0;for(de[0]=0,Oe=1;Oe<=Ye;++Oe)ve[Oe]=nt=nt+de[Oe-1]<<1;for(Oe=0;Oe<Me;++Oe)(nt=ze[Oe])!=0&&(it[Oe]=ve[nt]++);var bt=0;for(Oe=0;Oe<Me;++Oe)if(bt=ze[Oe],bt!=0){nt=me[it[Oe]]>>8-bt;for(var At=(1<<7-bt)-1;At>=0;--At)Ut[nt|At<<bt]=bt&7|Oe<<3}var cr=[];for(Ye=1;cr.length<le+fe;)switch(nt=Ut[Ke(pe,Ne)],Ne+=nt&7,nt>>>=3){case 16:for(Se=3+De(pe,Ne),Ne+=2,nt=cr[cr.length-1];Se-- >0;)cr.push(nt);break;case 17:for(Se=3+He(pe,Ne),Ne+=3;Se-- >0;)cr.push(0);break;case 18:for(Se=11+Ke(pe,Ne),Ne+=7;Se-- >0;)cr.push(0);break;default:cr.push(nt),Ye<nt&&(Ye=nt);break}var pt=cr.slice(0,le),zt=cr.slice(le);for(Oe=le;Oe<286;++Oe)pt[Oe]=0;for(Oe=fe;Oe<30;++Oe)zt[Oe]=0;return Wt=Gt(pt,Xe,286),pr=Gt(zt,Et,30),Ne}function br(pe,Ne){if(pe[0]==3&&!(pe[1]&3))return[Yf(Ne),2];for(var le=0,fe=0,ge=vO(Ne||1<<18),Se=0,ze=ge.length>>>0,it=0,Ye=0;(fe&1)==0;){if(fe=He(pe,le),le+=3,fe>>>1)fe>>1==1?(it=9,Ye=5):(le=wr(pe,le),it=Wt,Ye=pr);else{le&7&&(le+=8-(le&7));var de=pe[le>>>3]|pe[(le>>>3)+1]<<8;if(le+=32,de>0)for(!Ne&&ze<Se+de&&(ge=Ot(ge,Se+de),ze=ge.length);de-- >0;)ge[Se++]=pe[le>>>3],le+=8;continue}for(;;){!Ne&&ze<Se+32767&&(ge=Ot(ge,Se+32767),ze=ge.length);var ve=tt(pe,le,it),Me=fe>>>1==1?ir[ve]:Xe[ve];if(le+=Me&15,Me>>>=4,(Me>>>8&255)===0)ge[Se++]=Me;else{if(Me==256)break;Me-=257;var Oe=Me<8?0:Me-4>>2;Oe>5&&(Oe=0);var nt=Se+te[Me];Oe>0&&(nt+=tt(pe,le,Oe),le+=Oe),ve=tt(pe,le,Ye),Me=fe>>>1==1?dt[ve]:Et[ve],le+=Me&15,Me>>>=4;var bt=Me<4?0:Me-2>>1,At=Q[Me];for(bt>0&&(At+=tt(pe,le,bt),le+=bt),!Ne&&ze<nt&&(ge=Ot(ge,nt+100),ze=ge.length);Se<nt;)ge[Se]=ge[Se-At],++Se}}}return Ne?[ge,le+7>>>3]:[ge.slice(0,Se),le+7>>>3]}function lr(pe,Ne){var le=pe.slice(pe.l||0),fe=br(le,Ne);return pe.l+=fe[1],fe[0]}function Er(pe,Ne){if(pe)typeof console<"u"&&console.error(Ne);else throw new Error(Ne)}function we(pe,Ne){var le=pe;Ki(le,0);var fe=[],ge=[],Se={FileIndex:fe,FullPaths:ge};P(Se,{root:Ne.root});for(var ze=le.length-4;(le[ze]!=80||le[ze+1]!=75||le[ze+2]!=5||le[ze+3]!=6)&&ze>=0;)--ze;le.l=ze+4,le.l+=4;var it=le.read_shift(2);le.l+=6;var Ye=le.read_shift(4);for(le.l=Ye,ze=0;ze<it;++ze){le.l+=20;var de=le.read_shift(4),ve=le.read_shift(4),Me=le.read_shift(2),Oe=le.read_shift(2),nt=le.read_shift(2);le.l+=8;var bt=le.read_shift(4),At=o(le.slice(le.l+Me,le.l+Me+Oe));le.l+=Me+Oe+nt;var cr=le.l;le.l=bt+4,_e(le,de,ve,Se,At),le.l=cr}return Se}function _e(pe,Ne,le,fe,ge){pe.l+=2;var Se=pe.read_shift(2),ze=pe.read_shift(2),it=i(pe);if(Se&8257)throw new Error("Unsupported ZIP encryption");for(var Ye=pe.read_shift(4),de=pe.read_shift(4),ve=pe.read_shift(4),Me=pe.read_shift(2),Oe=pe.read_shift(2),nt="",bt=0;bt<Me;++bt)nt+=String.fromCharCode(pe[pe.l++]);if(Oe){var At=o(pe.slice(pe.l,pe.l+Oe));(At[21589]||{}).mt&&(it=At[21589].mt),((ge||{})[21589]||{}).mt&&(it=ge[21589].mt)}pe.l+=Oe;var cr=pe.slice(pe.l,pe.l+de);switch(ze){case 8:cr=U(pe,ve);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ze)}var pt=!1;Se&8&&(Ye=pe.read_shift(4),Ye==134695760&&(Ye=pe.read_shift(4),pt=!0),de=pe.read_shift(4),ve=pe.read_shift(4)),de!=Ne&&Er(pt,"Bad compressed size: "+Ne+" != "+de),ve!=le&&Er(pt,"Bad uncompressed size: "+le+" != "+ve),_r(fe,nt,cr,{unsafe:!0,mt:it})}function Ee(pe,Ne){var le=Ne||{},fe=[],ge=[],Se=Rt(1),ze=le.compression?8:0,it=0,Ye=0,de=0,ve=0,Me=0,Oe=pe.FullPaths[0],nt=Oe,bt=pe.FileIndex[0],At=[],cr=0;for(Ye=1;Ye<pe.FullPaths.length;++Ye)if(nt=pe.FullPaths[Ye].slice(Oe.length),bt=pe.FileIndex[Ye],!(!bt.size||!bt.content||nt=="Sh33tJ5")){var pt=ve,zt=Rt(nt.length);for(de=0;de<nt.length;++de)zt.write_shift(1,nt.charCodeAt(de)&127);zt=zt.slice(0,zt.l),At[Me]=Xfe.buf(bt.content,0);var xr=bt.content;ze==8&&(xr=q(xr)),Se=Rt(30),Se.write_shift(4,67324752),Se.write_shift(2,20),Se.write_shift(2,it),Se.write_shift(2,ze),bt.mt?a(Se,bt.mt):Se.write_shift(4,0),Se.write_shift(-4,At[Me]),Se.write_shift(4,xr.length),Se.write_shift(4,bt.content.length),Se.write_shift(2,zt.length),Se.write_shift(2,0),ve+=Se.length,fe.push(Se),ve+=zt.length,fe.push(zt),ve+=xr.length,fe.push(xr),Se=Rt(46),Se.write_shift(4,33639248),Se.write_shift(2,0),Se.write_shift(2,20),Se.write_shift(2,it),Se.write_shift(2,ze),Se.write_shift(4,0),Se.write_shift(-4,At[Me]),Se.write_shift(4,xr.length),Se.write_shift(4,bt.content.length),Se.write_shift(2,zt.length),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(4,0),Se.write_shift(4,pt),cr+=Se.l,ge.push(Se),cr+=zt.length,ge.push(zt),++Me}return Se=Rt(22),Se.write_shift(4,101010256),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,Me),Se.write_shift(2,Me),Se.write_shift(4,cr),Se.write_shift(4,ve),Se.write_shift(2,0),Ci([Ci(fe),Ci(ge),Se])}var Fe={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function at(pe,Ne){if(pe.ctype)return pe.ctype;var le=pe.name||"",fe=le.match(/\.([^\.]+)$/);return fe&&Fe[fe[1]]||Ne&&(fe=(le=Ne).match(/[\.\\]([^\.\\])+$/),fe&&Fe[fe[1]])?Fe[fe[1]]:"application/octet-stream"}function jt(pe){for(var Ne=Ov(pe),le=[],fe=0;fe<Ne.length;fe+=76)le.push(Ne.slice(fe,fe+76));return le.join(`\r
`)+`\r
`}function Mt(pe){var Ne=pe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(de){var ve=de.charCodeAt(0).toString(16).toUpperCase();return"="+(ve.length==1?"0"+ve:ve)});Ne=Ne.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ne.charAt(0)==`
`&&(Ne="=0D"+Ne.slice(1)),Ne=Ne.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var le=[],fe=Ne.split(`\r
`),ge=0;ge<fe.length;++ge){var Se=fe[ge];if(Se.length==0){le.push("");continue}for(var ze=0;ze<Se.length;){var it=76,Ye=Se.slice(ze,ze+it);Ye.charAt(it-1)=="="?it--:Ye.charAt(it-2)=="="?it-=2:Ye.charAt(it-3)=="="&&(it-=3),Ye=Se.slice(ze,ze+it),ze+=it,ze<Se.length&&(Ye+="="),le.push(Ye)}}return le.join(`\r
`)}function Be(pe){for(var Ne=[],le=0;le<pe.length;++le){for(var fe=pe[le];le<=pe.length&&fe.charAt(fe.length-1)=="=";)fe=fe.slice(0,fe.length-1)+pe[++le];Ne.push(fe)}for(var ge=0;ge<Ne.length;++ge)Ne[ge]=Ne[ge].replace(/[=][0-9A-Fa-f]{2}/g,function(Se){return String.fromCharCode(parseInt(Se.slice(1),16))});return Il(Ne.join(`\r
`))}function lt(pe,Ne,le){for(var fe="",ge="",Se="",ze,it=0;it<10;++it){var Ye=Ne[it];if(!Ye||Ye.match(/^\s*$/))break;var de=Ye.match(/^(.*?):\s*([^\s].*)$/);if(de)switch(de[1].toLowerCase()){case"content-location":fe=de[2].trim();break;case"content-type":Se=de[2].trim();break;case"content-transfer-encoding":ge=de[2].trim();break}}switch(++it,ge.toLowerCase()){case"base64":ze=Il(Wl(Ne.slice(it).join("")));break;case"quoted-printable":ze=Be(Ne.slice(it));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ge)}var ve=_r(pe,fe.slice(le.length),ze,{unsafe:!0});Se&&(ve.ctype=Se)}function ct(pe,Ne){if(I(pe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var le=Ne&&Ne.root||"",fe=(Tn&&Buffer.isBuffer(pe)?pe.toString("binary"):I(pe)).split(`\r
`),ge=0,Se="";for(ge=0;ge<fe.length;++ge)if(Se=fe[ge],!!/^Content-Location:/i.test(Se)&&(Se=Se.slice(Se.indexOf("file")),le||(le=Se.slice(0,Se.lastIndexOf("/")+1)),Se.slice(0,le.length)!=le))for(;le.length>0&&(le=le.slice(0,le.length-1),le=le.slice(0,le.lastIndexOf("/")+1),Se.slice(0,le.length)!=le););var ze=(fe[1]||"").match(/boundary="(.*?)"/);if(!ze)throw new Error("MAD cannot find boundary");var it="--"+(ze[1]||""),Ye=[],de=[],ve={FileIndex:Ye,FullPaths:de};P(ve);var Me,Oe=0;for(ge=0;ge<fe.length;++ge){var nt=fe[ge];nt!==it&&nt!==it+"--"||(Oe++&&lt(ve,fe.slice(Me,ge),le),Me=ge)}return ve}function Qt(pe,Ne){var le=Ne||{},fe=le.boundary||"SheetJS";fe="------="+fe;for(var ge=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+fe.slice(2)+'"',"","",""],Se=pe.FullPaths[0],ze=Se,it=pe.FileIndex[0],Ye=1;Ye<pe.FullPaths.length;++Ye)if(ze=pe.FullPaths[Ye].slice(Se.length),it=pe.FileIndex[Ye],!(!it.size||!it.content||ze=="Sh33tJ5")){ze=ze.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(cr){return"_x"+cr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(cr){return"_u"+cr.charCodeAt(0).toString(16)+"_"});for(var de=it.content,ve=Tn&&Buffer.isBuffer(de)?de.toString("binary"):I(de),Me=0,Oe=Math.min(1024,ve.length),nt=0,bt=0;bt<=Oe;++bt)(nt=ve.charCodeAt(bt))>=32&&nt<128&&++Me;var At=Me>=Oe*4/5;ge.push(fe),ge.push("Content-Location: "+(le.root||"file:///C:/SheetJS/")+ze),ge.push("Content-Transfer-Encoding: "+(At?"quoted-printable":"base64")),ge.push("Content-Type: "+at(it,ze)),ge.push(""),ge.push(At?Mt(ve):jt(ve))}return ge.push(fe+`--\r
`),ge.join(`\r
`)}function rr(pe){var Ne={};return P(Ne,pe),Ne}function _r(pe,Ne,le,fe){var ge=fe&&fe.unsafe;ge||P(pe);var Se=!ge&&Hr.find(pe,Ne);if(!Se){var ze=pe.FullPaths[0];Ne.slice(0,ze.length)==ze?ze=Ne:(ze.slice(-1)!="/"&&(ze+="/"),ze=(ze+Ne).replace("//","/")),Se={name:s(Ne),type:2},pe.FileIndex.push(Se),pe.FullPaths.push(ze),ge||Hr.utils.cfb_gc(pe)}return Se.content=le,Se.size=le?le.length:0,fe&&(fe.CLSID&&(Se.clsid=fe.CLSID),fe.mt&&(Se.mt=fe.mt),fe.ct&&(Se.ct=fe.ct)),Se}function tn(pe,Ne){P(pe);var le=Hr.find(pe,Ne);if(le){for(var fe=0;fe<pe.FileIndex.length;++fe)if(pe.FileIndex[fe]==le)return pe.FileIndex.splice(fe,1),pe.FullPaths.splice(fe,1),!0}return!1}function Fr(pe,Ne,le){P(pe);var fe=Hr.find(pe,Ne);if(fe){for(var ge=0;ge<pe.FileIndex.length;++ge)if(pe.FileIndex[ge]==fe)return pe.FileIndex[ge].name=s(le),pe.FullPaths[ge]=le,!0}return!1}function an(pe){F(pe,!0)}return t.find=L,t.read=A,t.parse=d,t.write=B,t.writeFile=X,t.utils={cfb_new:rr,cfb_add:_r,cfb_del:tn,cfb_mov:Fr,cfb_gc:an,ReadShift:rv,CheckField:lG,prep_blob:Ki,bconcat:Ci,use_zlib:D,_deflateRaw:Ge,_inflateRaw:lr,consts:z},t})();function Jfe(e){return typeof e=="string"?hS(e):Array.isArray(e)?Sfe(e):e}function E2(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=hS(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Ku(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var s=new Blob([Jfe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=lh(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function Qfe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function pa(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function EO(e,t){for(var r=[],n=pa(e),s=0;s!==n.length;++s)r[e[n[s]][t]]==null&&(r[e[n[s]][t]]=n[s]);return r}function gS(e){for(var t=[],r=pa(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function pS(e){for(var t=[],r=pa(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function Zfe(e){for(var t=[],r=pa(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var H4=new Date(1899,11,30,0,0,0);function li(e,t){var r=e.getTime(),n=H4.getTime()+(e.getTimezoneOffset()-H4.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var UH=new Date,ehe=H4.getTime()+(UH.getTimezoneOffset()-H4.getTimezoneOffset())*6e4,NO=UH.getTimezoneOffset();function xS(e){var t=new Date;return t.setTime(e*24*60*60*1e3+ehe),t.getTimezoneOffset()!==NO&&t.setTime(t.getTime()+(t.getTimezoneOffset()-NO)*6e4),t}function the(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(r=1,a>3&&(n=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[a],10)}return t}var AO=new Date("2017-02-19T19:06:09.000Z"),zH=isNaN(AO.getFullYear())?new Date("2/19/17"):AO,rhe=zH.getFullYear()==2017;function Os(e,t){var r=new Date(e);if(rhe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(zH.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function Bm(e,t){if(Tn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Ku(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Ku(AH(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Ku(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Ku(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(a){return r[a]||a})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function Ds(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Ds(e[r]));return t}function ma(e,t){for(var r="";r.length<t;)r+=e;return r}function cu(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,a){return r=-r,a}),!isNaN(t=Number(n)))?t/r:t}var nhe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Qp(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),a=t.getDate();if(isNaN(a))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&nhe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||a>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var she=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var a=r.split(n),i=[a[0]],o=1;o<a.length;++o)i.push(s),i.push(a[o]);return i}})();function WH(e){return e?e.content&&e.type?Bm(e.content,!0):e.data?$y(e.data):e.asNodeBuffer&&Tn?$y(e.asNodeBuffer().toString("binary")):e.asBinary?$y(e.asBinary()):e._data&&e._data.getContent?$y(Bm(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function HH(e){if(!e)return null;if(e.data)return xO(e.data);if(e.asNodeBuffer&&Tn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?xO(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function ahe(e){return e&&e.name.slice(-4)===".bin"?HH(e):WH(e)}function mc(e,t){for(var r=e.FullPaths||pa(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),a=0;a<r.length;++a){var i=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||s==i)return e.files?e.files[r[a]]:e.FileIndex[a]}return null}function cE(e,t){var r=mc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function za(e,t,r){if(!r)return ahe(cE(e,t));if(!t)return null;try{return za(e,t)}catch{return null}}function Ll(e,t,r){if(!r)return WH(cE(e,t));if(!t)return null;try{return Ll(e,t)}catch{return null}}function ihe(e,t,r){return HH(cE(e,t))}function jO(e){for(var t=e.FullPaths||pa(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function _n(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return Tn?n=T0(r):n=kfe(r),Hr.utils.cfb_add(e,t,n)}Hr.utils.cfb_add(e,t,r)}else e.file(t,r)}function uE(){return Hr.utils.cfb_new()}function GH(e,t){switch(t.type){case"base64":return Hr.read(e,{type:"base64"});case"binary":return Hr.read(e,{type:"binary"});case"buffer":case"array":return Hr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function zy(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var Ra=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,ohe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,PO=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,lhe=/<[^>]*>/g,ko=Ra.match(PO)?PO:lhe,che=/<\w*:/,uhe=/<(\/?)\w+:/;function sn(e,t,r){for(var n={},s=0,a=0;s!==e.length&&!((a=e.charCodeAt(s))===32||a===10||a===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var i=e.match(ohe),o=0,c="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],a=0;a!=f.length&&f.charCodeAt(a)!==61;++a);for(d=f.slice(0,a).trim();f.charCodeAt(a+1)==32;)++a;for(h=(s=f.charCodeAt(a+1))==34||s==39?1:0,c=f.slice(a+1+h,f.length-h),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var g=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[g]&&d.slice(o-3,o)=="ext")continue;n[g]=c,n[g.toLowerCase()]=c}}return n}function cd(e){return e.replace(uhe,"<$1")}var VH={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},dE=gS(VH),Un=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",a=s.indexOf("<![CDATA[");if(a==-1)return s.replace(e,function(o,c){return VH[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,c){return String.fromCharCode(parseInt(c,16))});var i=s.indexOf("]]>");return r(s.slice(0,a))+s.slice(a+9,i)+r(s.slice(i+3))}})(),fE=/[&<>'"]/g,dhe=/[\u0000-\u0008\u000b-\u001f]/g;function cs(e){var t=e+"";return t.replace(fE,function(r){return dE[r]}).replace(dhe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function FO(e){return cs(e).replace(/ /g,"_x0020_")}var qH=/[\u0000-\u001f]/g;function hE(e){var t=e+"";return t.replace(fE,function(r){return dE[r]}).replace(/\n/g,"<br/>").replace(qH,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function fhe(e){var t=e+"";return t.replace(fE,function(r){return dE[r]}).replace(qH,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var MO=(function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}})();function hhe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ps(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function W5(e){for(var t="",r=0,n=0,s=0,a=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=s&63,t+=String.fromCharCode(i);continue}if(a=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|a&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function OO(e){var t=Yf(2*e.length),r,n,s=1,a=0,i=0,o;for(n=0;n<e.length;n+=s)s=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[a++]=i&255,t[a++]=i>>>8,i=0),t[a++]=r%256,t[a++]=r>>>8;return t.slice(0,a).toString("ucs2")}function DO(e){return T0(e,"binary").toString("utf8")}var yw="foo bar baz",ps=Tn&&(DO(yw)==W5(yw)&&DO||OO(yw)==W5(yw)&&OO)||W5,Ku=Tn?function(e){return T0(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Rv=(function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),KH=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}})(),mhe=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),ghe=/<\/?(?:vt:)?variant>/g,phe=/<(?:vt:)([^>]*)>([\s\S]*)</;function RO(e,t){var r=sn(e),n=e.match(mhe(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(a){var i=a.replace(ghe,"").match(phe);i&&s.push({v:ps(i[2]),t:i[1]})}),s}var YH=/(^\s|\s$|\n)/;function Ji(e,t){return"<"+e+(t.match(YH)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Iv(e){return pa(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function ur(e,t,r){return"<"+e+(r!=null?Iv(r):"")+(t!=null?(t.match(YH)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function K8(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function xhe(e,t){switch(typeof e){case"string":var r=ur("vt:lpwstr",cs(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return ur((e|0)==e?"vt:i4":"vt:r8",cs(String(e)));case"boolean":return ur("vt:bool",e?"true":"false")}if(e instanceof Date)return ur("vt:filetime",K8(e));throw new Error("Unable to serialize "+e)}function mE(e){if(Tn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return ps(lh(iE(e)));throw new Error("Bad input format: expected Buffer or string")}var Lv=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,ai={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},tg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Ml={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function yhe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,a=5;a>=0;--a)s=s*256+e[t+a];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function vhe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,a=0,i=n?-t:t;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(t)?26985:0);for(var o=0;o<=5;++o,a/=256)e[r+o]=a&255;e[r+6]=(s&15)<<4|a&15,e[r+7]=s>>4|n}var IO=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,a=e[0][n].length;s<a;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},LO=Tn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:T0(t)})):IO(e)}:IO,BO=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(Qd(e,s)));return n.join("").replace(Vo,"")},gE=Tn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Vo,""):BO(e,t,r)}:BO,$O=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},XH=Tn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):$O(e,t,r)}:$O,UO=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(pp(e,s)));return n.join("")},N2=Tn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):UO(t,r,n)}:UO,JH=function(e,t){var r=Ol(e,t);return r>0?N2(e,t+4,t+4+r-1):""},QH=JH,ZH=function(e,t){var r=Ol(e,t);return r>0?N2(e,t+4,t+4+r-1):""},eG=ZH,tG=function(e,t){var r=2*Ol(e,t);return r>0?N2(e,t+4,t+4+r-1):""},rG=tG,nG=function(t,r){var n=Ol(t,r);return n>0?gE(t,r+4,r+4+n):""},sG=nG,aG=function(e,t){var r=Ol(e,t);return r>0?N2(e,t+4,t+4+r):""},iG=aG,oG=function(e,t){return yhe(e,t)},G4=oG,pE=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Tn&&(QH=function(t,r){if(!Buffer.isBuffer(t))return JH(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},eG=function(t,r){if(!Buffer.isBuffer(t))return ZH(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},rG=function(t,r){if(!Buffer.isBuffer(t))return tG(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},sG=function(t,r){if(!Buffer.isBuffer(t))return nG(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},iG=function(t,r){if(!Buffer.isBuffer(t))return aG(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},G4=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):oG(t,r)},pE=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var pp=function(e,t){return e[t]},Qd=function(e,t){return e[t+1]*256+e[t]},bhe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Ol=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},rm=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},whe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function rv(e,t){var r="",n,s,a=[],i,o,c,u;switch(t){case"dbcs":if(u=this.l,Tn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(Qd(this,u)),u+=2;e*=2;break;case"utf8":r=N2(this,this.l,this.l+e);break;case"utf16le":e*=2,r=gE(this,this.l,this.l+e);break;case"wstr":return rv.call(this,e,"dbcs");case"lpstr-ansi":r=QH(this,this.l),e=4+Ol(this,this.l);break;case"lpstr-cp":r=eG(this,this.l),e=4+Ol(this,this.l);break;case"lpwstr":r=rG(this,this.l),e=4+2*Ol(this,this.l);break;case"lpp4":e=4+Ol(this,this.l),r=sG(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Ol(this,this.l),r=iG(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=pp(this,this.l+e++))!==0;)a.push(xw(i));r=a.join("");break;case"_wstr":for(e=0,r="";(i=Qd(this,this.l+e))!==0;)a.push(xw(i)),e+=2;e+=2,r=a.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=pp(this,u),this.l=u+1,o=rv.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(xw(Qd(this,u))),u+=2}r=a.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=pp(this,u),this.l=u+1,o=rv.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(xw(pp(this,u))),u+=1}r=a.join("");break;default:switch(e){case 1:return n=pp(this,this.l),this.l++,n;case 2:return n=(t==="i"?bhe:Qd)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?rm:whe)(this,this.l),this.l+=4,n):(s=Ol(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=G4(this,this.l):s=G4([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=XH(this,this.l,e);break}}return this.l+=e,r}var _he=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},She=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},khe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Che(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)khe(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var i=t.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,_he(this,t,this.l);break;case 8:if(n=8,r==="f"){vhe(this,t,this.l);break}case 16:break;case-4:n=4,She(this,t,this.l);break}return this.l+=n,this}function lG(e,t){var r=XH(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Ki(e,t){e.l=t,e.read_shift=rv,e.chk=lG,e.write_shift=Che}function So(e,t){e.l+=t}function Rt(e){var t=Yf(e);return Ki(t,0),t}function E0(e,t,r){if(e){var n,s,a;Ki(e,e.l||0);for(var i=e.length,o=0,c=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=Hv[o]||Hv[65535];for(n=e.read_shift(1),a=n&127,s=1;s<4&&n&128;++s)a+=((n=e.read_shift(1))&127)<<7*s;c=e.l+a;var d=u.f&&u.f(e,a,r);if(e.l=c,t(d,u,o))return}}}function gl(){var e=[],t=Tn?256:2048,r=function(u){var d=Rt(u);return Ki(d,0),d},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},a=function(u){return n&&u<n.length-n.l?n:(s(),n=r(Math.max(u+1,t)))},i=function(){return s(),Ci(e)},o=function(u){s(),n=u,n.l==null&&(n.l=n.length),a(t)};return{next:a,push:o,end:i,_bufs:e}}function Vt(e,t,r,n){var s=+t,a;if(!isNaN(s)){n||(n=Hv[s].p||(r||[]).length||0),a=1+(s>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var i=e.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,(s&127)+128),i.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&pE(r)&&e.push(r)}}function nv(e,t,r){var n=Ds(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function zO(e,t,r){var n=Ds(e);return n.s=nv(n.s,t.s,r),n.e=nv(n.e,t.s,r),n}function sv(e,t){if(e.cRel&&e.c<0)for(e=Ds(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Ds(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=en(e);return!e.cRel&&e.cRel!=null&&(r=Nhe(r)),!e.rRel&&e.rRel!=null&&(r=The(r)),r}function H5(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+ea(e.s.c)+":"+(e.e.cRel?"":"$")+ea(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Fa(e.s.r)+":"+(e.e.rRel?"":"$")+Fa(e.e.r):sv(e.s,t.biff)+":"+sv(e.e,t.biff)}function xE(e){return parseInt(Ehe(e),10)-1}function Fa(e){return""+(e+1)}function The(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Ehe(e){return e.replace(/\$(\d+)$/,"$1")}function yE(e){for(var t=Ahe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function ea(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Nhe(e){return e.replace(/^([A-Z])/,"$$$1")}function Ahe(e){return e.replace(/^\$([A-Z])/,"$1")}function jhe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ta(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function en(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function pl(e){var t=e.indexOf(":");return t==-1?{s:ta(e),e:ta(e)}:{s:ta(e.slice(0,t)),e:ta(e.slice(t+1))}}function wn(e,t){return typeof t>"u"||typeof t=="number"?wn(e.s,e.e):(typeof e!="string"&&(e=en(e)),typeof t!="string"&&(t=en(t)),e==t?e:e+":"+t)}function Wn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,a=e.length;for(r=0;n<a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===a||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function WO(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Nc(e.z,r?li(t):t)}catch{}try{return e.w=Nc((e.XF||{}).numFmtId||(r?14:0),r?li(t):t)}catch{return""+t}}function p0(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?N0[e.v]||e.v:t==null?WO(e,e.v):WO(e,t))}function ch(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function cG(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,a=e||(s?[]:{}),i=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?ta(n.origin):n.origin;i=c.r,o=c.c}a["!ref"]||(a["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=Wn(a["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var g={v:t[f][h]},p=i+f,y=o+h;if(u.s.r>p&&(u.s.r=p),u.s.c>y&&(u.s.c=y),u.e.r<p&&(u.e.r=p),u.e.c<y&&(u.e.c=y),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))g=t[f][h];else if(Array.isArray(g.v)&&(g.f=t[f][h][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||Qr[14],n.cellDates?(g.t="d",g.w=Nc(g.z,li(g.v))):(g.t="n",g.v=li(g.v),g.w=Nc(g.z,g.v))):g.t="s";if(s)a[p]||(a[p]=[]),a[p][y]&&a[p][y].z&&(g.z=a[p][y].z),a[p][y]=g;else{var v=en({c:y,r:p});a[v]&&a[v].z&&(g.z=a[v].z),a[v]=g}}}return u.s.c<1e7&&(a["!ref"]=wn(u)),a}function j1(e,t){return cG(null,e,t)}function Phe(e){return e.read_shift(4,"i")}function uu(e,t){return t||(t=Rt(4)),t.write_shift(4,e),t}function wo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Ei(e,t){var r=!1;return t==null&&(r=!0,t=Rt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Fhe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Mhe(e,t){return t||(t=Rt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function vE(e,t){var r=e.l,n=e.read_shift(1),s=wo(e),a=[],i={t:s,h:s};if((n&1)!==0){for(var o=e.read_shift(4),c=0;c!=o;++c)a.push(Fhe(e));i.r=a}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function Ohe(e,t){var r=!1;return t==null&&(r=!0,t=Rt(15+4*e.t.length)),t.write_shift(1,0),Ei(e.t,t),r?t.slice(0,t.l):t}var Dhe=vE;function Rhe(e,t){var r=!1;return t==null&&(r=!0,t=Rt(23+4*e.t.length)),t.write_shift(1,1),Ei(e.t,t),t.write_shift(4,1),Mhe({},t),r?t.slice(0,t.l):t}function Mc(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function rg(e,t){return t==null&&(t=Rt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function ng(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function sg(e,t){return t==null&&(t=Rt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Ihe=wo,uG=Ei;function bE(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function V4(e,t){var r=!1;return t==null&&(r=!0,t=Rt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Lhe=wo,Y8=bE,wE=V4;function _E(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?G4([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):rm(t,0)>>2;return r?s/100:s}function dG(e,t){t==null&&(t=Rt(4));var r=0,n=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function fG(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function Bhe(e,t){return t||(t=Rt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var ag=fG,P1=Bhe;function xo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function $m(e,t){return(t||Rt(8)).write_shift(8,e,"f")}function $he(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),a=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var u=pm[s];u&&(t.rgb=$v(u));break;case 2:t.rgb=$v([i,o,c]);break;case 3:t.theme=s;break}return a!=0&&(t.tint=a>0?a/32767:a/32768),t}function q4(e,t){if(t||(t=Rt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function Uhe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function zhe(e,t){t||(t=Rt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function hG(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function Whe(e){return hG(e,1)}function Hhe(e){return hG(e,2)}var SE=2,ll=3,vw=11,HO=12,K4=19,bw=64,Ghe=65,Vhe=71,qhe=4108,Khe=4126,wi=80,mG=81,Yhe=[wi,mG],X8={1:{n:"CodePage",t:SE},2:{n:"Category",t:wi},3:{n:"PresentationFormat",t:wi},4:{n:"ByteCount",t:ll},5:{n:"LineCount",t:ll},6:{n:"ParagraphCount",t:ll},7:{n:"SlideCount",t:ll},8:{n:"NoteCount",t:ll},9:{n:"HiddenCount",t:ll},10:{n:"MultimediaClipCount",t:ll},11:{n:"ScaleCrop",t:vw},12:{n:"HeadingPairs",t:qhe},13:{n:"TitlesOfParts",t:Khe},14:{n:"Manager",t:wi},15:{n:"Company",t:wi},16:{n:"LinksUpToDate",t:vw},17:{n:"CharacterCount",t:ll},19:{n:"SharedDoc",t:vw},22:{n:"HyperlinksChanged",t:vw},23:{n:"AppVersion",t:ll,p:"version"},24:{n:"DigSig",t:Ghe},26:{n:"ContentType",t:wi},27:{n:"ContentStatus",t:wi},28:{n:"Language",t:wi},29:{n:"Version",t:wi},255:{},2147483648:{n:"Locale",t:K4},2147483651:{n:"Behavior",t:K4},1919054434:{}},J8={1:{n:"CodePage",t:SE},2:{n:"Title",t:wi},3:{n:"Subject",t:wi},4:{n:"Author",t:wi},5:{n:"Keywords",t:wi},6:{n:"Comments",t:wi},7:{n:"Template",t:wi},8:{n:"LastAuthor",t:wi},9:{n:"RevNumber",t:wi},10:{n:"EditTime",t:bw},11:{n:"LastPrinted",t:bw},12:{n:"CreatedDate",t:bw},13:{n:"ModifiedDate",t:bw},14:{n:"PageCount",t:ll},15:{n:"WordCount",t:ll},16:{n:"CharCount",t:ll},17:{n:"Thumbnail",t:Vhe},18:{n:"Application",t:wi},19:{n:"DocSecurity",t:ll},255:{},2147483648:{n:"Locale",t:K4},2147483651:{n:"Behavior",t:K4},1919054434:{}},GO={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Xhe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Jhe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Qhe=Jhe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),pm=Ds(Qhe),N0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},gG={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Q8={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},ww={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function kE(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Zhe(e){var t=kE();if(!e||!e.match)return t;var r={};if((e.match(ko)||[]).forEach(function(n){var s=sn(n);switch(s[0].replace(che,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[Q8[s.ContentType]]!==void 0&&t[Q8[s.ContentType]].push(s.PartName);break}}),t.xmlns!==ai.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function pG(e,t){var r=Zfe(Q8),n=[],s;n[n.length]=Ra,n[n.length]=ur("Types",null,{xmlns:ai.CT,"xmlns:xsd":ai.xsd,"xmlns:xsi":ai.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return ur("Default",null,{Extension:c[0],ContentType:c[1]})}));var a=function(c){e[c]&&e[c].length>0&&(s=e[c][0],n[n.length]=ur("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:ww[c][t.bookType]||ww[c].xlsx}))},i=function(c){(e[c]||[]).forEach(function(u){n[n.length]=ur("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:ww[c][t.bookType]||ww[c].xlsx})})},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=ur("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var An={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Bv(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function av(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(ko)||[]).forEach(function(s){var a=sn(s);if(a[0]==="<Relationship"){var i={};i.Type=a.Type,i.Target=a.Target,i.Id=a.Id,a.TargetMode&&(i.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:zy(a.Target,t);r[o]=i,n[a.Id]=i}}),r["!id"]=n,r}function Ip(e){var t=[Ra,ur("Relationships",null,{xmlns:ai.RELS})];return pa(e["!id"]).forEach(function(r){t[t.length]=ur("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function is(e,t,r,n,s,a){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=n,s.Target=r,[An.HLINK,An.XPATH,An.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var eme="application/vnd.oasis.opendocument.spreadsheet";function tme(e,t){for(var r=mE(e),n,s;n=Lv.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=sn(n[0],!1),s.path=="/"&&s.type!==eme)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function rme(e){var t=[Ra];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function VO(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function nme(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function sme(e){var t=[Ra];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(VO(e[r][0],e[r][1])),t.push(nme("",e[r][0]));return t.push(VO("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function xG(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+$4.version+"</meta:generator></office:meta></office:document-meta>"}var Sc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],ame=(function(){for(var e=new Array(Sc.length),t=0;t<Sc.length;++t){var r=Sc[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e})();function yG(e){var t={};e=ps(e);for(var r=0;r<Sc.length;++r){var n=Sc[r],s=e.match(ame[r]);s!=null&&s.length>0&&(t[n[1]]=Un(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Os(t[n[1]]))}return t}function G5(e,t,r,n,s){s[e]!=null||t==null||t===""||(s[e]=t,t=cs(t),n[n.length]=r?ur(e,t,r):Ji(e,t))}function vG(e,t){var r=t||{},n=[Ra,ur("cp:coreProperties",null,{"xmlns:cp":ai.CORE_PROPS,"xmlns:dc":ai.dc,"xmlns:dcterms":ai.dcterms,"xmlns:dcmitype":ai.dcmitype,"xmlns:xsi":ai.xsi})],s={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&G5("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:K8(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),e.ModifiedDate!=null&&G5("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:K8(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var a=0;a!=Sc.length;++a){var i=Sc[a],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&G5(i[0],o,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var xm=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],bG=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function wG(e,t,r,n){var s=[];if(typeof e=="string")s=RO(e,n);else for(var a=0;a<e.length;++a)s=s.concat(e[a].map(function(d){return{v:d}}));var i=typeof t=="string"?RO(t,n).map(function(d){return d.v}):t,o=0,c=0;if(i.length>0)for(var u=0;u!==s.length;u+=2){switch(c=+s[u+1].v,s[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=i.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(o,o+c);break}o+=c}}function ime(e,t,r){var n={};return t||(t={}),e=ps(e),xm.forEach(function(s){var a=(e.match(Rv(s[0]))||[])[1];switch(s[2]){case"string":a&&(t[s[1]]=Un(a));break;case"bool":t[s[1]]=a==="true";break;case"raw":var i=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));i&&i.length>0&&(n[s[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&wG(n.HeadingPairs,n.TitlesOfParts,t,r),t}function _G(e){var t=[],r=ur;return e||(e={}),e.Application="SheetJS",t[t.length]=Ra,t[t.length]=ur("Properties",null,{xmlns:ai.EXT_PROPS,"xmlns:vt":ai.vt}),xm.forEach(function(n){if(e[n[1]]!==void 0){var s;switch(n[2]){case"string":s=cs(String(e[n[1]]));break;case"bool":s=e[n[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(n[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+cs(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var ome=/<[^>]+>[^<]*/g;function lme(e,t){var r={},n="",s=e.match(ome);if(s)for(var a=0;a!=s.length;++a){var i=s[a],o=sn(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Un(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Un(d);break;case"bool":r[n]=Ps(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Os(d);break;case"cy":case"error":r[n]=Un(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,c)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function SG(e){var t=[Ra,ur("Properties",null,{xmlns:ai.CUST_PROPS,"xmlns:vt":ai.vt})];if(!e)return t.join("");var r=1;return pa(e).forEach(function(s){++r,t[t.length]=ur("property",xhe(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:cs(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Z8={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},V5;function cme(e,t,r){V5||(V5=gS(Z8)),t=V5[t]||t,e[t]=r}function ume(e,t){var r=[];return pa(Z8).map(function(n){for(var s=0;s<Sc.length;++s)if(Sc[s][1]==n)return Sc[s];for(s=0;s<xm.length;++s)if(xm[s][1]==n)return xm[s];throw n}).forEach(function(n){if(e[n[1]]!=null){var s=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(Ji(Z8[n[1]]||n[1],s))}}),ur("DocumentProperties",r.join(""),{xmlns:Ml.o})}function dme(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return e&&pa(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)){for(var i=0;i<Sc.length;++i)if(a==Sc[i][1])return;for(i=0;i<xm.length;++i)if(a==xm[i][1])return;for(i=0;i<r.length;++i)if(a==r[i])return;var o=e[a],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),s.push(ur(FO(a),o,{"dt:dt":c}))}}),t&&pa(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)&&!(e&&Object.prototype.hasOwnProperty.call(e,a))){var i=t[a],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),s.push(ur(FO(a),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Ml.o+'">'+s.join("")+"</"+n+">"}function CE(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function fme(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),s+=a);var i=Rt(8);return i.write_shift(4,n),i.write_shift(4,s),i}function kG(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function CG(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function TG(e,t,r){return t===31?CG(e):kG(e,t,r)}function eC(e,t,r){return TG(e,t,r===!1?0:4)}function hme(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return TG(e,t,0)}function mme(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Vo,""),e.l-s&2&&(e.l+=2)}return r}function gme(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Vo,"");return r}function pme(e){var t=e.l,r=Y4(e,mG);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=Y4(e,ll);return[r,n]}function xme(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(pme(e));return r}function qO(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var a=e.read_shift(4),i=e.read_shift(4);n[a]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(Vo,"").replace(Uy,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function EG(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function yme(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function Y4(e,t,r){var n=e.read_shift(2),s,a=r||{};if(e.l+=2,t!==HO&&n!==t&&Yhe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===HO?n:t){case 2:return s=e.read_shift(2,"i"),a.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return kG(e,n,4).replace(Vo,"");case 31:return CG(e);case 64:return CE(e);case 65:return EG(e);case 71:return yme(e);case 80:return eC(e,n,!a.raw).replace(Vo,"");case 81:return hme(e,n).replace(Vo,"");case 4108:return xme(e);case 4126:case 4127:return n==4127?mme(e):gme(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function KO(e,t){var r=Rt(4),n=Rt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Rt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=fme(t);break;case 31:case 80:for(n=Rt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Ci([r,n])}function YO(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),a=[],i=0,o=0,c=-1,u={};for(i=0;i!=s;++i){var d=e.read_shift(4),f=e.read_shift(4);a[i]=[d,f+r]}a.sort(function(S,w){return S[1]-w[1]});var h={};for(i=0;i!=s;++i){if(e.l!==a[i][1]){var g=!0;if(i>0&&t)switch(t[a[i-1][0]].t){case 2:e.l+2===a[i][1]&&(e.l+=2,g=!1);break;case 80:e.l<=a[i][1]&&(e.l=a[i][1],g=!1);break;case 4108:e.l<=a[i][1]&&(e.l=a[i][1],g=!1);break}if((!t||i==0)&&e.l<=a[i][1]&&(g=!1,e.l=a[i][1]),g)throw new Error("Read Error: Expected address "+a[i][1]+" at "+e.l+" :"+i)}if(t){var p=t[a[i][0]];if(h[p.n]=Y4(e,p.t,{raw:!0}),p.p==="version"&&(h[p.n]=String(h[p.n]>>16)+"."+("0000"+String(h[p.n]&65535)).slice(-4)),p.n=="CodePage")switch(h[p.n]){case 0:h[p.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:iu(o=h[p.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[p.n])}}else if(a[i][0]===1){if(o=h.CodePage=Y4(e,SE),iu(o),c!==-1){var y=e.l;e.l=a[c][1],u=qO(e,o),e.l=y}}else if(a[i][0]===0){if(o===0){c=i,e.l=a[i+1][1];continue}u=qO(e,o)}else{var v=u[a[i][0]],C;switch(e[e.l]){case 65:e.l+=4,C=EG(e);break;case 30:e.l+=4,C=eC(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,C=eC(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,C=e.read_shift(4,"i");break;case 19:e.l+=4,C=e.read_shift(4);break;case 5:e.l+=4,C=e.read_shift(8,"f");break;case 11:e.l+=4,C=Ta(e,4);break;case 64:e.l+=4,C=Os(CE(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[v]=C}}return e.l=r+n,h}var NG=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function vme(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function XO(e,t,r){var n=Rt(8),s=[],a=[],i=8,o=0,c=Rt(8),u=Rt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),a.push(c),s.push(u),i+=8+c.length,!t){u=Rt(8),u.write_shift(4,0),s.unshift(u);var d=[Rt(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(c=Rt(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Ci(d),a.unshift(c),i+=8+c.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(NG.indexOf(e[o][0])>-1||bG.indexOf(e[o][0])>-1)&&e[o][1]!=null){var h=e[o][1],g=0;if(t){g=+t[e[o][0]];var p=r[g];if(p.p=="version"&&typeof h=="string"){var y=h.split(".");h=(+y[0]<<16)+(+y[1]||0)}c=KO(p.t,h)}else{var v=vme(h);v==-1&&(v=31,h=String(h)),c=KO(v,h)}a.push(c),u=Rt(8),u.write_shift(4,t?g:2+o),s.push(u),i+=8+c.length}var C=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,C),C+=a[o].length;return n.write_shift(4,i),n.write_shift(4,a.length),Ci([n].concat(s).concat(a))}function JO(e,t,r){var n=e.content;if(!n)return{};Ki(n,0);var s,a,i,o,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Hr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(a=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(i=n.read_shift(16),c=n.read_shift(4));var f=YO(n,t),h={SystemIdentifier:u};for(var g in f)h[g]=f[g];if(h.FMTID=a,s===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var p;try{p=YO(n,null)}catch{}for(g in p)h[g]=p[g];return h.FMTID=[a,i],h}function QO(e,t,r,n,s,a){var i=Rt(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Hr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,s?68:48);var c=XO(e,r,n);if(o.push(c),s){var u=XO(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+c.length),o.push(u)}return Ci(o)}function _f(e,t){return e.read_shift(t),null}function bme(e,t){t||(t=Rt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function wme(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function Ta(e,t){return e.read_shift(t)===1}function Bo(e,t){return t||(t=Rt(2)),t.write_shift(2,+!!e),t}function Wa(e){return e.read_shift(2,"u")}function gc(e,t){return t||(t=Rt(2)),t.write_shift(2,e),t}function AG(e,t){return wme(e,t,Wa)}function _me(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function jG(e,t,r){return r||(r=Rt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function A2(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=e.read_shift(1);a&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var i=n?e.read_shift(n,s):"";return i}function Sme(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,a=1+(r&1),i=0,o,c={};s&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var u=a==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return s&&(e.l+=4*i),n&&(e.l+=o),c.t=d,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function kme(e){var t=e.t||"",r=Rt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Rt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var s=[r,n];return Ci(s)}function Um(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function j2(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Um(e,n,r)}function ig(e,t,r){if(r.biff>5)return j2(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function PG(e,t,r){return r||(r=Rt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function Cme(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Tme(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Vo,"");return n&&(e.l+=24),s}function Eme(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var a=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(a>>1,"utf16le").replace(Vo,"");return r+i}function Nme(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Tme(e);case"0303000000000000c000000000000046":return Eme(e);default:throw new Error("Unsupported Moniker "+r)}}function _w(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Vo,""):"";return r}function ZO(e,t){t||(t=Rt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function Ame(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var a,i,o,c,u="",d,f;s&16&&(a=_w(e,r-e.l)),s&128&&(i=_w(e,r-e.l)),(s&257)===257&&(o=_w(e,r-e.l)),(s&257)===1&&(c=Nme(e,r-e.l)),s&8&&(u=_w(e,r-e.l)),s&32&&(d=e.read_shift(16)),s&64&&(f=CE(e)),e.l=r;var h=i||o||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),s&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var g={Target:h};return d&&(g.guid=d),f&&(g.time=f),a&&(g.Tooltip=a),g}function jme(e){var t=Rt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),a=s>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}t.write_shift(4,2),t.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(a==28)n=n.slice(1),ZO(n,t);else if(a&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=s>-1?n.slice(0,s):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),a&8&&ZO(s>-1?n.slice(s+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function FG(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function MG(e,t){var r=FG(e);return r[3]=0,r}function ud(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function zm(e,t,r,n){return n||(n=Rt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function Pme(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Fme(e,t,r){return t===0?"":ig(e,t,r)}function Mme(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),a=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[s,a,i]}function OG(e){var t=e.read_shift(2),r=_E(e);return[t,r]}function Ome(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=A2(e,t,r),a=e.read_shift(2);if(n-=e.l,a!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return e.l+=a,s}function yS(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function DG(e,t){return t||(t=Rt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function RG(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var Dme=RG;function IG(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function Rme(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Ime(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function co(e){e.l+=2,e.l+=e.read_shift(2)}var Lme={0:co,4:co,5:co,6:co,7:Ime,8:co,9:co,10:co,11:co,12:co,13:Rme,14:co,15:co,16:co,17:co,18:co,19:co,20:co,21:IG};function Bme(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(Lme[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function Sw(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function TE(e,t,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=Rt(s);return a.write_shift(2,n),a.write_shift(2,t),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function $me(e,t){return t===0||e.read_shift(2),1200}function Ume(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=ig(e,0,r);return e.read_shift(t+n-e.l),s}function zme(e,t){var r=!t||t.biff==8,n=Rt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function Wme(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Hme(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,a=e.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var i=A2(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:s,dt:a,name:i}}function Gme(e,t){var r=!t||t.biff>=8?2:1,n=Rt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function Vme(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),a=[],i=0;i!=s&&e.l<r;++i)a.push(Sme(e));return a.Count=n,a.Unique=s,a}function qme(e,t){var r=Rt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],s=0;s<e.length;++s)n[s]=kme(e[s]);var a=Ci([r].concat(n));return a.parts=[r.length].concat(n.map(function(i){return i.length})),a}function Kme(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function Yme(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function Xme(e){var t=Pme(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function Jme(e){return e.read_shift(2),e.read_shift(4)}function eD(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var a={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[a,s]}function Qme(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:a,CurTab:i,FirstTab:o,Selected:c,TabRatio:u}}function Zme(){var e=Rt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function ege(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function tge(e){var t=Rt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function rge(){}function nge(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=A2(e,0,r),n}function sge(e,t){var r=e.name||"Arial",n=t&&t.biff==5,s=n?15+r.length:16+2*r.length,a=Rt(s);return a.write_shift(2,e.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}function age(e){var t=ud(e);return t.isst=e.read_shift(4),t}function ige(e,t,r,n){var s=Rt(10);return zm(e,t,n,s),s.write_shift(4,r),s}function oge(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=ud(e);r.biff==2&&e.l++;var a=j2(e,n-e.l,r);return s.val=a,s}function lge(e,t,r,n,s){var a=!s||s.biff==8,i=Rt(8+ +a+(1+a)*r.length);return zm(e,t,n,i),i.write_shift(2,r.length),a&&i.write_shift(1,1),i.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),i}function cge(e,t,r){var n=e.read_shift(2),s=ig(e,0,r);return[n,s]}function uge(e,t,r,n){var s=r&&r.biff==5;n||(n=Rt(s?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(s?1:2,t.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}var dge=ig;function tD(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,a=e.read_shift(s),i=e.read_shift(s),o=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:a,c:o},e:{r:i,c}}}function fge(e,t){var r=t.biff==8||!t.biff?4:2,n=Rt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function hge(e){var t=e.read_shift(2),r=e.read_shift(2),n=OG(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function mge(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),a=[];e.l<r;)a.push(OG(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:i,rkrec:a}}function gge(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),a=[];e.l<r;)a.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:i,ixfe:a}}function pge(e,t,r,n){var s={},a=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),c=e.read_shift(2);return s.patternType=Xhe[o>>26],n.cellStyles&&(s.alc=a&7,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=i&15,s.dgRight=i>>4&15,s.dgTop=i>>8&15,s.dgBottom=i>>12&15,s.icvLeft=i>>16&127,s.icvRight=i>>23&127,s.grbitDiag=i>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function xge(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=pge(e,t,n.fStyle,r),n}function rD(e,t,r,n){var s=r&&r.biff==5;n||(n=Rt(s?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var a=0;return e.numFmtId>0&&s&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function yge(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function vge(e){var t=Rt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function nD(e,t,r){var n=ud(e);(r.biff==2||t==9)&&++e.l;var s=_me(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function bge(e,t,r,n,s,a){var i=Rt(8);return zm(e,t,n,i),jG(r,a,i),i}function wge(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=ud(e),s=xo(e);return n.val=s,n}function _ge(e,t,r,n){var s=Rt(14);return zm(e,t,n,s),$m(r,s),s}var sD=Fme;function Sge(e,t,r){var n=e.l+t,s=e.read_shift(2),a=e.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var i=Um(e,a),o=[];n>e.l;)o.push(j2(e));return[a,s,i,o]}function aD(e,t,r){var n=e.read_shift(2),s,a={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=Ome(e,t-2,r)),a.body=s||e.read_shift(t-2),typeof s=="string"&&(a.Name=s),a}var kge=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function iD(e,t,r){var n=e.l+t,s=e.read_shift(2),a=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Um(e,i,r);s&32&&(u=kge[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:Bye(e,d,r,o);return{chKey:a,Name:u,itab:c,rgce:f}}function LG(e,t,r){if(r.biff<8)return Cge(e,t,r);for(var n=[],s=e.l+t,a=e.read_shift(r.biff>8?4:2);a--!==0;)n.push(Mme(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function Cge(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=A2(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function Tge(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),a=Um(e,n,r),i=Um(e,s,r);return[a,i]}function Ege(e,t,r){var n=RG(e);e.l++;var s=e.read_shift(1);return t-=8,[$ye(e,t,r),s,n]}function oD(e,t,r){var n=Dme(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,Iye(e,t,r)]}function Nge(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function Age(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=ig(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},o,i,a]}}function jge(e,t,r){return Age(e,t,r)}function Pge(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(yS(e));return r}function Fge(e){var t=Rt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)DG(e[r],t);return t}function Mge(e,t,r){if(r&&r.biff<8)return Dge(e,t,r);var n=IG(e),s=Bme(e,t-22,n[1]);return{cmo:n,ft:s}}var Oge={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function Dge(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((Oge[n]||So)(e,t,r)),{cmo:[s,n,a],ft:i}}function Rge(e,t,r){var n=e.l,s="";try{e.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(a)==-1?e.l+=6:i=Cme(e,6,r);var o=e.read_shift(2);e.read_shift(2),Wa(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=Um(e,e.lens[u+1]-e.lens[u]-1);if(s+=f,s.length>=(d?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function Ige(e,t){var r=yS(e);e.l+=16;var n=Ame(e,t-24);return[r,n]}function Lge(e){var t=Rt(24),r=ta(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(n[s],16));return Ci([t,jme(e[1])])}function Bge(e,t){e.read_shift(2);var r=yS(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Vo,""),[r,n]}function $ge(e){var t=e[1].Tooltip,r=Rt(10+2*(t.length+1));r.write_shift(2,2048);var n=ta(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function Uge(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=GO[r]||r,r=e.read_shift(2),t[1]=GO[r]||r,t}function zge(e){return e||(e=Rt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Wge(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(MG(e));return r}function Hge(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(MG(e));return r}function Gge(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function BG(e,t,r){if(!r.cellStyles)return So(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),a=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s,e:a,w:i,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function Vge(e,t){var r=Rt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function qge(e,t){var r={};return t<32||(e.l+=16,r.header=xo(e),r.footer=xo(e),e.l+=2),r}function Kge(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}function Yge(e){for(var t=Rt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var Xge=ud,Jge=AG,Qge=j2;function Zge(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function epe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=ud(e);++e.l;var s=ig(e,t-7,r);return n.t="str",n.val=s,n}function tpe(e){var t=ud(e);++e.l;var r=xo(e);return t.t="n",t.val=r,t}function rpe(e,t,r){var n=Rt(15);return O2(n,e,t),n.write_shift(8,r,"f"),n}function npe(e){var t=ud(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function spe(e,t,r){var n=Rt(9);return O2(n,e,t),n.write_shift(2,r),n}function ape(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function ipe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function ope(e,t,r){var n=e.l+t,s=ud(e),a=e.read_shift(2),i=Um(e,a,r);return e.l=n,s.t="str",s.val=i,s}var lpe=[2,3,48,49,131,139,140,245],tC=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=gS({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var u=[],d=Yf(1);switch(c.type){case"base64":d=Il(Wl(o));break;case"binary":d=Il(o);break;case"buffer":case"array":d=o;break}Ki(d,0);var f=d.read_shift(1),h=!!(f&136),g=!1,p=!1;switch(f){case 2:break;case 3:break;case 48:g=!0,h=!0;break;case 49:g=!0,h=!0;break;case 131:break;case 139:break;case 140:p=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var y=0,v=521;f==2&&(y=d.read_shift(2)),d.l+=3,f!=2&&(y=d.read_shift(4)),y>1048576&&(y=1e6),f!=2&&(v=d.read_shift(2));var C=d.read_shift(2),S=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(S=e[d[d.l]]),d.l+=1,d.l+=2),p&&(d.l+=36);for(var w=[],T={},N=Math.min(d.length,f==2?521:v-10-(g?264:0)),A=p?32:11;d.l<N&&d[d.l]!=13;)switch(T={},T.name=Mv.utils.decode(S,d.slice(d.l,d.l+A)).replace(/[\u0000\r\n].*$/g,""),d.l+=A,T.type=String.fromCharCode(d.read_shift(1)),f!=2&&!p&&(T.offset=d.read_shift(4)),T.len=d.read_shift(1),f==2&&(T.offset=d.read_shift(2)),T.dec=d.read_shift(1),T.name.length&&w.push(T),f!=2&&(d.l+=p?13:14),T.type){case"B":(!g||T.len!=8)&&c.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+T.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var P=0,j=0;for(u[0]=[],j=0;j!=w.length;++j)u[0][j]=w[j].name;for(;y-- >0;){if(d[d.l]===42){d.l+=C;continue}for(++d.l,u[++P]=[],j=0,j=0;j!=w.length;++j){var F=d.slice(d.l,d.l+w[j].len);d.l+=w[j].len,Ki(F,0);var R=Mv.utils.decode(S,F);switch(w[j].type){case"C":R.trim().length&&(u[P][j]=R.replace(/\s+$/,""));break;case"D":R.length===8?u[P][j]=new Date(+R.slice(0,4),+R.slice(4,6)-1,+R.slice(6,8)):u[P][j]=R;break;case"F":u[P][j]=parseFloat(R.trim());break;case"+":case"I":u[P][j]=p?F.read_shift(-4,"i")^2147483648:F.read_shift(4,"i");break;case"L":switch(R.trim().toUpperCase()){case"Y":case"T":u[P][j]=!0;break;case"N":case"F":u[P][j]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+R+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[P][j]="##MEMO##"+(p?parseInt(R.trim(),10):F.read_shift(4));break;case"N":R=R.replace(/\u0000/g,"").trim(),R&&R!="."&&(u[P][j]=+R||0);break;case"@":u[P][j]=new Date(F.read_shift(-8,"f")-621356832e5);break;case"T":u[P][j]=new Date((F.read_shift(4)-2440588)*864e5+F.read_shift(4));break;case"Y":u[P][j]=F.read_shift(4,"i")/1e4+F.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[P][j]=-F.read_shift(-8,"f");break;case"B":if(g&&w[j].len==8){u[P][j]=F.read_shift(8,"f");break}case"G":case"P":F.l+=w[j].len;break;case"0":if(w[j].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+w[j].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=w,u}function n(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=j1(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function s(o,c){try{return ch(n(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,c){var u=c||{};if(+u.codepage>=0&&iu(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=gl(),f=Q4(o,{header:1,raw:!0,cellDates:!0}),h=f[0],g=f.slice(1),p=o["!cols"]||[],y=0,v=0,C=0,S=1;for(y=0;y<h.length;++y){if(((p[y]||{}).DBF||{}).name){h[y]=p[y].DBF.name,++C;continue}if(h[y]!=null){if(++C,typeof h[y]=="number"&&(h[y]=h[y].toString(10)),typeof h[y]!="string")throw new Error("DBF Invalid column name "+h[y]+" |"+typeof h[y]+"|");if(h.indexOf(h[y])!==y){for(v=0;v<1024;++v)if(h.indexOf(h[y]+"_"+v)==-1){h[y]+="_"+v;break}}}}var w=Wn(o["!ref"]),T=[],N=[],A=[];for(y=0;y<=w.e.c-w.s.c;++y){var P="",j="",F=0,R=[];for(v=0;v<g.length;++v)g[v][y]!=null&&R.push(g[v][y]);if(R.length==0||h[y]==null){T[y]="?";continue}for(v=0;v<R.length;++v){switch(typeof R[v]){case"number":j="B";break;case"string":j="C";break;case"boolean":j="L";break;case"object":j=R[v]instanceof Date?"D":"C";break;default:j="C"}F=Math.max(F,String(R[v]).length),P=P&&P!=j?"C":j}F>250&&(F=250),j=((p[y]||{}).DBF||{}).type,j=="C"&&p[y].DBF.len>F&&(F=p[y].DBF.len),P=="B"&&j=="N"&&(P="N",A[y]=p[y].DBF.dec,F=p[y].DBF.len),N[y]=P=="C"||j=="N"?F:a[P]||0,S+=N[y],T[y]=P}var L=d.next(32);for(L.write_shift(4,318902576),L.write_shift(4,g.length),L.write_shift(2,296+32*C),L.write_shift(2,S),y=0;y<4;++y)L.write_shift(4,0);for(L.write_shift(4,0|(+t[NH]||3)<<8),y=0,v=0;y<h.length;++y)if(h[y]!=null){var V=d.next(32),Z=(h[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);V.write_shift(1,Z,"sbcs"),V.write_shift(1,T[y]=="?"?"C":T[y],"sbcs"),V.write_shift(4,v),V.write_shift(1,N[y]||a[T[y]]||0),V.write_shift(1,A[y]||0),V.write_shift(1,2),V.write_shift(4,0),V.write_shift(1,0),V.write_shift(4,0),V.write_shift(4,0),v+=N[y]||a[T[y]]||0}var Y=d.next(264);for(Y.write_shift(4,13),y=0;y<65;++y)Y.write_shift(4,0);for(y=0;y<g.length;++y){var re=d.next(S);for(re.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(T[v]){case"L":re.write_shift(1,g[y][v]==null?63:g[y][v]?84:70);break;case"B":re.write_shift(8,g[y][v]||0,"f");break;case"N":var ue="0";for(typeof g[y][v]=="number"&&(ue=g[y][v].toFixed(A[v]||0)),C=0;C<N[v]-ue.length;++C)re.write_shift(1,32);re.write_shift(1,ue,"sbcs");break;case"D":g[y][v]?(re.write_shift(4,("0000"+g[y][v].getFullYear()).slice(-4),"sbcs"),re.write_shift(2,("00"+(g[y][v].getMonth()+1)).slice(-2),"sbcs"),re.write_shift(2,("00"+g[y][v].getDate()).slice(-2),"sbcs")):re.write_shift(8,"00000000","sbcs");break;case"C":var z=String(g[y][v]!=null?g[y][v]:"").slice(0,N[v]);for(re.write_shift(1,z,"sbcs"),C=0;C<N[v]-z.length;++C)re.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:n,from_sheet:i}})(),$G=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+pa(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,g){var p=e[g];return typeof p=="number"?yO(p):p},n=function(h,g,p){var y=g.charCodeAt(0)-32<<4|p.charCodeAt(0)-48;return y==59?h:yO(y)};e["|"]=254;function s(h,g){switch(g.type){case"base64":return a(Wl(h),g);case"binary":return a(h,g);case"buffer":return a(Tn&&Buffer.isBuffer(h)?h.toString("binary"):lh(h),g);case"array":return a(Bm(h),g)}throw new Error("Unrecognized type "+g.type)}function a(h,g){var p=h.split(/[\n\r]+/),y=-1,v=-1,C=0,S=0,w=[],T=[],N=null,A={},P=[],j=[],F=[],R=0,L;for(+g.codepage>=0&&iu(+g.codepage);C!==p.length;++C){R=0;var V=p[C].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),Z=V.replace(/;;/g,"\0").split(";").map(function(H){return H.replace(/\u0000/g,";")}),Y=Z[0],re;if(V.length>0)switch(Y){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Z[1].charAt(0)=="P"&&T.push(V.slice(3).replace(/;;/g,";"));break;case"C":var ue=!1,z=!1,X=!1,I=!1,B=-1,W=-1;for(S=1;S<Z.length;++S)switch(Z[S].charAt(0)){case"A":break;case"X":v=parseInt(Z[S].slice(1))-1,z=!0;break;case"Y":for(y=parseInt(Z[S].slice(1))-1,z||(v=0),L=w.length;L<=y;++L)w[L]=[];break;case"K":re=Z[S].slice(1),re.charAt(0)==='"'?re=re.slice(1,re.length-1):re==="TRUE"?re=!0:re==="FALSE"?re=!1:isNaN(cu(re))?isNaN(Qp(re).getDate())||(re=Os(re)):(re=cu(re),N!==null&&N1(N)&&(re=xS(re))),ue=!0;break;case"E":I=!0;var D=Lp(Z[S].slice(1),{r:y,c:v});w[y][v]=[w[y][v],D];break;case"S":X=!0,w[y][v]=[w[y][v],"S5S"];break;case"G":break;case"R":B=parseInt(Z[S].slice(1))-1;break;case"C":W=parseInt(Z[S].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+V)}if(ue&&(w[y][v]&&w[y][v].length==2?w[y][v][0]=re:w[y][v]=re,N=null),X){if(I)throw new Error("SYLK shared formula cannot have own formula");var U=B>-1&&w[B][W];if(!U||!U[1])throw new Error("SYLK shared formula cannot find base");w[y][v][1]=sV(U[1],{r:y-B,c:v-W})}break;case"F":var q=0;for(S=1;S<Z.length;++S)switch(Z[S].charAt(0)){case"X":v=parseInt(Z[S].slice(1))-1,++q;break;case"Y":for(y=parseInt(Z[S].slice(1))-1,L=w.length;L<=y;++L)w[L]=[];break;case"M":R=parseInt(Z[S].slice(1))/20;break;case"F":break;case"G":break;case"P":N=T[parseInt(Z[S].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(F=Z[S].slice(1).split(" "),L=parseInt(F[0],10);L<=parseInt(F[1],10);++L)R=parseInt(F[2],10),j[L-1]=R===0?{hidden:!0}:{wch:R},Xf(j[L-1]);break;case"C":v=parseInt(Z[S].slice(1))-1,j[v]||(j[v]={});break;case"R":y=parseInt(Z[S].slice(1))-1,P[y]||(P[y]={}),R>0?(P[y].hpt=R,P[y].hpx=e1(R)):R===0&&(P[y].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+V)}q<1&&(N=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+V)}}return P.length>0&&(A["!rows"]=P),j.length>0&&(A["!cols"]=j),g&&g.sheetRows&&(w=w.slice(0,g.sheetRows)),[w,A]}function i(h,g){var p=s(h,g),y=p[0],v=p[1],C=j1(y,g);return pa(v).forEach(function(S){C[S]=v[S]}),C}function o(h,g){return ch(i(h,g),g)}function c(h,g,p,y){var v="C;Y"+(p+1)+";X"+(y+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+FE(h.f,{r:p,c:y}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(h,g){g.forEach(function(p,y){var v="F;W"+(y+1)+" "+(y+1)+" ";p.hidden?v+="0":(typeof p.width=="number"&&!p.wpx&&(p.wpx=Uv(p.width)),typeof p.wpx=="number"&&!p.wch&&(p.wch=zv(p.wpx)),typeof p.wch=="number"&&(v+=Math.round(p.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function d(h,g){g.forEach(function(p,y){var v="F;";p.hidden?v+="M0;":p.hpt?v+="M"+20*p.hpt+";":p.hpx&&(v+="M"+20*Wv(p.hpx)+";"),v.length>2&&h.push(v+"R"+(y+1))})}function f(h,g){var p=["ID;PWXL;N;E"],y=[],v=Wn(h["!ref"]),C,S=Array.isArray(h),w=`\r
`;p.push("P;PGeneral"),p.push("F;P0;DG0G8;M255"),h["!cols"]&&u(p,h["!cols"]),h["!rows"]&&d(p,h["!rows"]),p.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var T=v.s.r;T<=v.e.r;++T)for(var N=v.s.c;N<=v.e.c;++N){var A=en({r:T,c:N});C=S?(h[T]||[])[N]:h[A],!(!C||C.v==null&&(!C.f||C.F))&&y.push(c(C,h,T,N))}return p.join(w)+w+y.join(w)+w+"E"+w}return{to_workbook:o,to_sheet:i,from_sheet:f}})(),UG=(function(){function e(a,i){switch(i.type){case"base64":return t(Wl(a),i);case"binary":return t(a,i);case"buffer":return t(Tn&&Buffer.isBuffer(a)?a.toString("binary"):lh(a),i);case"array":return t(Bm(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){for(var o=a.split(`
`),c=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=o[d].trim().split(","),g=h[0],p=h[1];++d;for(var y=o[d]||"";(y.match(/["]/g)||[]).length&1&&d<o.length-1;)y+=`
`+o[++d];switch(y=y.trim(),+g){case-1:if(y==="BOT"){f[++c]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?f[c][u]=!0:y==="FALSE"?f[c][u]=!1:isNaN(cu(p))?isNaN(Qp(p).getDate())?f[c][u]=p:f[c][u]=Os(p):f[c][u]=cu(p),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),f[c][u++]=y!==""?y:null;break}if(y==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(a,i){return j1(e(a,i),i)}function n(a,i){return ch(r(a,i),i)}var s=(function(){var a=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},i=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Wn(c["!ref"]),f,h=Array.isArray(c);a(u,"TABLE",0,1,"sheetjs"),a(u,"VECTORS",0,d.e.r-d.s.r+1,""),a(u,"TUPLES",0,d.e.c-d.s.c+1,""),a(u,"DATA",0,0,"");for(var g=d.s.r;g<=d.e.r;++g){i(u,-1,0,"BOT");for(var p=d.s.c;p<=d.e.c;++p){var y=en({r:g,c:p});if(f=h?(c[g]||[])[p]:c[y],!f){i(u,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,v,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Nc(f.z||Qr[14],li(Os(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var C=`\r
`,S=u.join(C);return S}})();return{to_workbook:n,to_sheet:r,from_sheet:s}})(),zG=(function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var g=f.split(`
`),p=-1,y=-1,v=0,C=[];v!==g.length;++v){var S=g[v].trim().split(":");if(S[0]==="cell"){var w=ta(S[1]);if(C.length<=w.r)for(p=C.length;p<=w.r;++p)C[p]||(C[p]=[]);switch(p=w.r,y=w.c,S[2]){case"t":C[p][y]=e(S[3]);break;case"v":C[p][y]=+S[3];break;case"vtf":var T=S[S.length-1];case"vtc":switch(S[3]){case"nl":C[p][y]=!!+S[4];break;default:C[p][y]=+S[4];break}S[2]=="vtf"&&(C[p][y]=[C[p][y],T])}}}return h&&h.sheetRows&&(C=C.slice(0,h.sheetRows)),C}function n(f,h){return j1(r(f,h),h)}function s(f,h){return ch(n(f,h),h)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],g=[],p,y="",v=pl(f["!ref"]),C=Array.isArray(f),S=v.s.r;S<=v.e.r;++S)for(var w=v.s.c;w<=v.e.c;++w)if(y=en({r:S,c:w}),p=C?(f[S]||[])[w]:f[y],!(!p||p.v==null||p.t==="z")){switch(g=["cell",y,"t"],p.t){case"s":case"str":g.push(t(p.v));break;case"n":p.f?(g[2]="vtf",g[3]="n",g[4]=p.v,g[5]=t(p.f)):(g[2]="v",g[3]=p.v);break;case"b":g[2]="vt"+(p.f?"f":"c"),g[3]="nl",g[4]=p.v?"1":"0",g[5]=t(p.f||(p.v?"TRUE":"FALSE"));break;case"d":var T=li(Os(p.v));g[2]="vtc",g[3]="nd",g[4]=""+T,g[5]=p.w||Nc(p.z||Qr[14],T);break;case"e":continue}h.push(g.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[a,i,o,i,u(f),c].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:d}})(),Zp=(function(){function e(d,f,h,g,p){p.raw?f[h][g]=d:d===""||(d==="TRUE"?f[h][g]=!0:d==="FALSE"?f[h][g]=!1:isNaN(cu(d))?isNaN(Qp(d).getDate())?f[h][g]=d:f[h][g]=Os(d):f[h][g]=cu(d))}function t(d,f){var h=f||{},g=[];if(!d||d.length===0)return g;for(var p=d.split(/[\r\n]/),y=p.length-1;y>=0&&p[y].length===0;)--y;for(var v=10,C=0,S=0;S<=y;++S)C=p[S].indexOf(" "),C==-1?C=p[S].length:C++,v=Math.max(v,C);for(S=0;S<=y;++S){g[S]=[];var w=0;for(e(p[S].slice(0,v).trim(),g,S,w,h),w=1;w<=(p[S].length-v)/10+1;++w)e(p[S].slice(v+(w-1)*10,v+w*10).trim(),g,S,w,h)}return h.sheetRows&&(g=g.slice(0,h.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(d){for(var f={},h=!1,g=0,p=0;g<d.length;++g)(p=d.charCodeAt(g))==34?h=!h:!h&&p in r&&(f[p]=(f[p]||0)+1);p=[];for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&p.push([f[g],g]);if(!p.length){f=n;for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&p.push([f[g],g])}return p.sort(function(y,v){return y[0]-v[0]||n[y[1]]-n[v[1]]}),r[p.pop()[1]]||44}function a(d,f){var h=f||{},g="",p=h.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(g=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(g=d.charAt(4),d=d.slice(6)):g=s(d.slice(0,1024)):h&&h.FS?g=h.FS:g=s(d.slice(0,1024));var v=0,C=0,S=0,w=0,T=0,N=g.charCodeAt(0),A=!1,P=0,j=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var F=h.dateNF!=null?Kfe(h.dateNF):null;function R(){var L=d.slice(w,T),V={};if(L.charAt(0)=='"'&&L.charAt(L.length-1)=='"'&&(L=L.slice(1,-1).replace(/""/g,'"')),L.length===0)V.t="z";else if(h.raw)V.t="s",V.v=L;else if(L.trim().length===0)V.t="s",V.v=L;else if(L.charCodeAt(0)==61)L.charCodeAt(1)==34&&L.charCodeAt(L.length-1)==34?(V.t="s",V.v=L.slice(2,-1).replace(/""/g,'"')):Sxe(L)?(V.t="n",V.f=L.slice(1)):(V.t="s",V.v=L);else if(L=="TRUE")V.t="b",V.v=!0;else if(L=="FALSE")V.t="b",V.v=!1;else if(!isNaN(S=cu(L)))V.t="n",h.cellText!==!1&&(V.w=L),V.v=S;else if(!isNaN(Qp(L).getDate())||F&&L.match(F)){V.z=h.dateNF||Qr[14];var Z=0;F&&L.match(F)&&(L=Yfe(L,h.dateNF,L.match(F)||[]),Z=1),h.cellDates?(V.t="d",V.v=Os(L,Z)):(V.t="n",V.v=li(Os(L,Z))),h.cellText!==!1&&(V.w=Nc(V.z,V.v instanceof Date?li(V.v):V.v)),h.cellNF||delete V.z}else V.t="s",V.v=L;if(V.t=="z"||(h.dense?(p[v]||(p[v]=[]),p[v][C]=V):p[en({c:C,r:v})]=V),w=T+1,j=d.charCodeAt(w),y.e.c<C&&(y.e.c=C),y.e.r<v&&(y.e.r=v),P==N)++C;else if(C=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;T<d.length;++T)switch(P=d.charCodeAt(T)){case 34:j===34&&(A=!A);break;case N:case 10:case 13:if(!A&&R())break e;break}return T-w>0&&R(),p["!ref"]=wn(y),p}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,f):j1(t(d,f),f)}function o(d,f){var h="",g=f.type=="string"?[0,0,0,0]:$E(d,f);switch(f.type){case"base64":h=Wl(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof Mv<"u"||(h=Tn&&Buffer.isBuffer(d)?d.toString("binary"):lh(d));break;case"array":h=Bm(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return g[0]==239&&g[1]==187&&g[2]==191?h=ps(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=ps(h):f.type=="binary"&&typeof Mv<"u",h.slice(0,19)=="socialcalc:version:"?zG.to_sheet(f.type=="string"?h:ps(h),f):i(h,f)}function c(d,f){return ch(o(d,f),f)}function u(d){for(var f=[],h=Wn(d["!ref"]),g,p=Array.isArray(d),y=h.s.r;y<=h.e.r;++y){for(var v=[],C=h.s.c;C<=h.e.c;++C){var S=en({r:y,c:C});if(g=p?(d[y]||[])[C]:d[S],!g||g.v==null){v.push("          ");continue}for(var w=(g.w||(p0(g),g.w)||"").slice(0,10);w.length<10;)w+=" ";v.push(w+(C===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}})();function cpe(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=$G.to_workbook(e,r);return r.WTF=n,s}catch(a){if(r.WTF=n,!a.message.match(/SYLK bad record ID/)&&n)throw a;return Zp.to_workbook(e,t)}}var ym=(function(){function e(D,U,q){if(D){Ki(D,D.l||0);for(var H=q.Enum||B;D.l<D.length;){var te=D.read_shift(2),Q=H[te]||H[65535],ae=D.read_shift(2),ce=D.l+ae,me=Q.f&&Q.f(D,ae,q);if(D.l=ce,U(me,Q,te))return}}}function t(D,U){switch(U.type){case"base64":return r(Il(Wl(D)),U);case"binary":return r(Il(D),U);case"buffer":case"array":return r(D,U)}throw"Unsupported type "+U.type}function r(D,U){if(!D)return D;var q=U||{},H=q.dense?[]:{},te="Sheet1",Q="",ae=0,ce={},me=[],xe=[],se={s:{r:0,c:0},e:{r:0,c:0}},De=q.sheetRows||0;if(D[2]==0&&(D[3]==8||D[3]==9)&&D.length>=16&&D[14]==5&&D[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(D[2]==2)q.Enum=B,e(D,function(Ke,tt,Pe){switch(Pe){case 0:q.vers=Ke,Ke>=4096&&(q.qpro=!0);break;case 6:se=Ke;break;case 204:Ke&&(Q=Ke);break;case 222:Q=Ke;break;case 15:case 51:q.qpro||(Ke[1].v=Ke[1].v.slice(1));case 13:case 14:case 16:Pe==14&&(Ke[2]&112)==112&&(Ke[2]&15)>1&&(Ke[2]&15)<15&&(Ke[1].z=q.dateNF||Qr[14],q.cellDates&&(Ke[1].t="d",Ke[1].v=xS(Ke[1].v))),q.qpro&&Ke[3]>ae&&(H["!ref"]=wn(se),ce[te]=H,me.push(te),H=q.dense?[]:{},se={s:{r:0,c:0},e:{r:0,c:0}},ae=Ke[3],te=Q||"Sheet"+(ae+1),Q="");var je=q.dense?(H[Ke[0].r]||[])[Ke[0].c]:H[en(Ke[0])];if(je){je.t=Ke[1].t,je.v=Ke[1].v,Ke[1].z!=null&&(je.z=Ke[1].z),Ke[1].f!=null&&(je.f=Ke[1].f);break}q.dense?(H[Ke[0].r]||(H[Ke[0].r]=[]),H[Ke[0].r][Ke[0].c]=Ke[1]):H[en(Ke[0])]=Ke[1];break}},q);else if(D[2]==26||D[2]==14)q.Enum=W,D[2]==14&&(q.qpro=!0,D.l=0),e(D,function(Ke,tt,Pe){switch(Pe){case 204:te=Ke;break;case 22:Ke[1].v=Ke[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ke[3]>ae&&(H["!ref"]=wn(se),ce[te]=H,me.push(te),H=q.dense?[]:{},se={s:{r:0,c:0},e:{r:0,c:0}},ae=Ke[3],te="Sheet"+(ae+1)),De>0&&Ke[0].r>=De)break;q.dense?(H[Ke[0].r]||(H[Ke[0].r]=[]),H[Ke[0].r][Ke[0].c]=Ke[1]):H[en(Ke[0])]=Ke[1],se.e.c<Ke[0].c&&(se.e.c=Ke[0].c),se.e.r<Ke[0].r&&(se.e.r=Ke[0].r);break;case 27:Ke[14e3]&&(xe[Ke[14e3][0]]=Ke[14e3][1]);break;case 1537:xe[Ke[0]]=Ke[1],Ke[0]==ae&&(te=Ke[1]);break}},q);else throw new Error("Unrecognized LOTUS BOF "+D[2]);if(H["!ref"]=wn(se),ce[Q||te]=H,me.push(Q||te),!xe.length)return{SheetNames:me,Sheets:ce};for(var He={},rt=[],_t=0;_t<xe.length;++_t)ce[me[_t]]?(rt.push(xe[_t]||me[_t]),He[xe[_t]]=ce[xe[_t]]||ce[me[_t]]):(rt.push(xe[_t]),He[xe[_t]]={"!ref":"A1"});return{SheetNames:rt,Sheets:He}}function n(D,U){var q=U||{};if(+q.codepage>=0&&iu(+q.codepage),q.type=="string")throw new Error("Cannot write WK1 to JS string");var H=gl(),te=Wn(D["!ref"]),Q=Array.isArray(D),ae=[];dr(H,0,a(1030)),dr(H,6,c(te));for(var ce=Math.min(te.e.r,8191),me=te.s.r;me<=ce;++me)for(var xe=Fa(me),se=te.s.c;se<=te.e.c;++se){me===te.s.r&&(ae[se]=ea(se));var De=ae[se]+xe,He=Q?(D[me]||[])[se]:D[De];if(!(!He||He.t=="z"))if(He.t=="n")(He.v|0)==He.v&&He.v>=-32768&&He.v<=32767?dr(H,13,g(me,se,He.v)):dr(H,14,y(me,se,He.v));else{var rt=p0(He);dr(H,15,f(me,se,rt.slice(0,239)))}}return dr(H,1),H.end()}function s(D,U){var q=U||{};if(+q.codepage>=0&&iu(+q.codepage),q.type=="string")throw new Error("Cannot write WK3 to JS string");var H=gl();dr(H,0,i(D));for(var te=0,Q=0;te<D.SheetNames.length;++te)(D.Sheets[D.SheetNames[te]]||{})["!ref"]&&dr(H,27,I(D.SheetNames[te],Q++));var ae=0;for(te=0;te<D.SheetNames.length;++te){var ce=D.Sheets[D.SheetNames[te]];if(!(!ce||!ce["!ref"])){for(var me=Wn(ce["!ref"]),xe=Array.isArray(ce),se=[],De=Math.min(me.e.r,8191),He=me.s.r;He<=De;++He)for(var rt=Fa(He),_t=me.s.c;_t<=me.e.c;++_t){He===me.s.r&&(se[_t]=ea(_t));var Ke=se[_t]+rt,tt=xe?(ce[He]||[])[_t]:ce[Ke];if(!(!tt||tt.t=="z"))if(tt.t=="n")dr(H,23,R(He,_t,ae,tt.v));else{var Pe=p0(tt);dr(H,22,P(He,_t,ae,Pe.slice(0,239)))}}++ae}}return dr(H,1),H.end()}function a(D){var U=Rt(2);return U.write_shift(2,D),U}function i(D){var U=Rt(26);U.write_shift(2,4096),U.write_shift(2,4),U.write_shift(4,0);for(var q=0,H=0,te=0,Q=0;Q<D.SheetNames.length;++Q){var ae=D.SheetNames[Q],ce=D.Sheets[ae];if(!(!ce||!ce["!ref"])){++te;var me=pl(ce["!ref"]);q<me.e.r&&(q=me.e.r),H<me.e.c&&(H=me.e.c)}}return q>8191&&(q=8191),U.write_shift(2,q),U.write_shift(1,te),U.write_shift(1,H),U.write_shift(2,0),U.write_shift(2,0),U.write_shift(1,1),U.write_shift(1,2),U.write_shift(4,0),U.write_shift(4,0),U}function o(D,U,q){var H={s:{c:0,r:0},e:{c:0,r:0}};return U==8&&q.qpro?(H.s.c=D.read_shift(1),D.l++,H.s.r=D.read_shift(2),H.e.c=D.read_shift(1),D.l++,H.e.r=D.read_shift(2),H):(H.s.c=D.read_shift(2),H.s.r=D.read_shift(2),U==12&&q.qpro&&(D.l+=2),H.e.c=D.read_shift(2),H.e.r=D.read_shift(2),U==12&&q.qpro&&(D.l+=2),H.s.c==65535&&(H.s.c=H.e.c=H.s.r=H.e.r=0),H)}function c(D){var U=Rt(8);return U.write_shift(2,D.s.c),U.write_shift(2,D.s.r),U.write_shift(2,D.e.c),U.write_shift(2,D.e.r),U}function u(D,U,q){var H=[{c:0,r:0},{t:"n",v:0},0,0];return q.qpro&&q.vers!=20768?(H[0].c=D.read_shift(1),H[3]=D.read_shift(1),H[0].r=D.read_shift(2),D.l+=2):(H[2]=D.read_shift(1),H[0].c=D.read_shift(2),H[0].r=D.read_shift(2)),H}function d(D,U,q){var H=D.l+U,te=u(D,U,q);if(te[1].t="s",q.vers==20768){D.l++;var Q=D.read_shift(1);return te[1].v=D.read_shift(Q,"utf8"),te}return q.qpro&&D.l++,te[1].v=D.read_shift(H-D.l,"cstr"),te}function f(D,U,q){var H=Rt(7+q.length);H.write_shift(1,255),H.write_shift(2,U),H.write_shift(2,D),H.write_shift(1,39);for(var te=0;te<H.length;++te){var Q=q.charCodeAt(te);H.write_shift(1,Q>=128?95:Q)}return H.write_shift(1,0),H}function h(D,U,q){var H=u(D,U,q);return H[1].v=D.read_shift(2,"i"),H}function g(D,U,q){var H=Rt(7);return H.write_shift(1,255),H.write_shift(2,U),H.write_shift(2,D),H.write_shift(2,q,"i"),H}function p(D,U,q){var H=u(D,U,q);return H[1].v=D.read_shift(8,"f"),H}function y(D,U,q){var H=Rt(13);return H.write_shift(1,255),H.write_shift(2,U),H.write_shift(2,D),H.write_shift(8,q,"f"),H}function v(D,U,q){var H=D.l+U,te=u(D,U,q);if(te[1].v=D.read_shift(8,"f"),q.qpro)D.l=H;else{var Q=D.read_shift(2);T(D.slice(D.l,D.l+Q),te),D.l+=Q}return te}function C(D,U,q){var H=U&32768;return U&=-32769,U=(H?D:0)+(U>=8192?U-16384:U),(H?"":"$")+(q?ea(U):Fa(U))}var S={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function T(D,U){Ki(D,0);for(var q=[],H=0,te="",Q="",ae="",ce="";D.l<D.length;){var me=D[D.l++];switch(me){case 0:q.push(D.read_shift(8,"f"));break;case 1:Q=C(U[0].c,D.read_shift(2),!0),te=C(U[0].r,D.read_shift(2),!1),q.push(Q+te);break;case 2:{var xe=C(U[0].c,D.read_shift(2),!0),se=C(U[0].r,D.read_shift(2),!1);Q=C(U[0].c,D.read_shift(2),!0),te=C(U[0].r,D.read_shift(2),!1),q.push(xe+se+":"+Q+te)}break;case 3:if(D.l<D.length){console.error("WK1 premature formula end");return}break;case 4:q.push("("+q.pop()+")");break;case 5:q.push(D.read_shift(2));break;case 6:{for(var De="";me=D[D.l++];)De+=String.fromCharCode(me);q.push('"'+De.replace(/"/g,'""')+'"')}break;case 8:q.push("-"+q.pop());break;case 23:q.push("+"+q.pop());break;case 22:q.push("NOT("+q.pop()+")");break;case 20:case 21:ce=q.pop(),ae=q.pop(),q.push(["AND","OR"][me-20]+"("+ae+","+ce+")");break;default:if(me<32&&w[me])ce=q.pop(),ae=q.pop(),q.push(ae+w[me]+ce);else if(S[me]){if(H=S[me][1],H==69&&(H=D[D.l++]),H>q.length){console.error("WK1 bad formula parse 0x"+me.toString(16)+":|"+q.join("|")+"|");return}var He=q.slice(-H);q.length-=H,q.push(S[me][0]+"("+He.join(",")+")")}else return me<=7?console.error("WK1 invalid opcode "+me.toString(16)):me<=24?console.error("WK1 unsupported op "+me.toString(16)):me<=30?console.error("WK1 invalid opcode "+me.toString(16)):me<=115?console.error("WK1 unsupported function opcode "+me.toString(16)):console.error("WK1 unrecognized opcode "+me.toString(16))}}q.length==1?U[1].f=""+q[0]:console.error("WK1 bad formula parse |"+q.join("|")+"|")}function N(D){var U=[{c:0,r:0},{t:"n",v:0},0];return U[0].r=D.read_shift(2),U[3]=D[D.l++],U[0].c=D[D.l++],U}function A(D,U){var q=N(D);return q[1].t="s",q[1].v=D.read_shift(U-4,"cstr"),q}function P(D,U,q,H){var te=Rt(6+H.length);te.write_shift(2,D),te.write_shift(1,q),te.write_shift(1,U),te.write_shift(1,39);for(var Q=0;Q<H.length;++Q){var ae=H.charCodeAt(Q);te.write_shift(1,ae>=128?95:ae)}return te.write_shift(1,0),te}function j(D,U){var q=N(D);q[1].v=D.read_shift(2);var H=q[1].v>>1;if(q[1].v&1)switch(H&7){case 0:H=(H>>3)*5e3;break;case 1:H=(H>>3)*500;break;case 2:H=(H>>3)/20;break;case 3:H=(H>>3)/200;break;case 4:H=(H>>3)/2e3;break;case 5:H=(H>>3)/2e4;break;case 6:H=(H>>3)/16;break;case 7:H=(H>>3)/64;break}return q[1].v=H,q}function F(D,U){var q=N(D),H=D.read_shift(4),te=D.read_shift(4),Q=D.read_shift(2);if(Q==65535)return H===0&&te===3221225472?(q[1].t="e",q[1].v=15):H===0&&te===3489660928?(q[1].t="e",q[1].v=42):q[1].v=0,q;var ae=Q&32768;return Q=(Q&32767)-16446,q[1].v=(1-ae*2)*(te*Math.pow(2,Q+32)+H*Math.pow(2,Q)),q}function R(D,U,q,H){var te=Rt(14);if(te.write_shift(2,D),te.write_shift(1,q),te.write_shift(1,U),H==0)return te.write_shift(4,0),te.write_shift(4,0),te.write_shift(2,65535),te;var Q=0,ae=0,ce=0,me=0;return H<0&&(Q=1,H=-H),ae=Math.log2(H)|0,H/=Math.pow(2,ae-31),me=H>>>0,(me&2147483648)==0&&(H/=2,++ae,me=H>>>0),H-=me,me|=2147483648,me>>>=0,H*=Math.pow(2,32),ce=H>>>0,te.write_shift(4,ce),te.write_shift(4,me),ae+=16383+(Q?32768:0),te.write_shift(2,ae),te}function L(D,U){var q=F(D);return D.l+=U-14,q}function V(D,U){var q=N(D),H=D.read_shift(4);return q[1].v=H>>6,q}function Z(D,U){var q=N(D),H=D.read_shift(8,"f");return q[1].v=H,q}function Y(D,U){var q=Z(D);return D.l+=U-10,q}function re(D,U){return D[D.l+U-1]==0?D.read_shift(U,"cstr"):""}function ue(D,U){var q=D[D.l++];q>U-1&&(q=U-1);for(var H="";H.length<q;)H+=String.fromCharCode(D[D.l++]);return H}function z(D,U,q){if(!(!q.qpro||U<21)){var H=D.read_shift(1);D.l+=17,D.l+=1,D.l+=2;var te=D.read_shift(U-21,"cstr");return[H,te]}}function X(D,U){for(var q={},H=D.l+U;D.l<H;){var te=D.read_shift(2);if(te==14e3){for(q[te]=[0,""],q[te][0]=D.read_shift(2);D[D.l];)q[te][1]+=String.fromCharCode(D[D.l]),D.l++;D.l++}}return q}function I(D,U){var q=Rt(5+D.length);q.write_shift(2,14e3),q.write_shift(2,U);for(var H=0;H<D.length;++H){var te=D.charCodeAt(H);q[q.l++]=te>127?95:te}return q[q.l++]=0,q}var B={0:{n:"BOF",f:Wa},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:p},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:re},222:{n:"SHEETNAMELP",f:ue},65535:{n:""}},W={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:A},23:{n:"NUMBER17",f:F},24:{n:"NUMBER18",f:j},25:{n:"FORMULA19",f:L},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:X},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:V},38:{n:"??"},39:{n:"NUMBER27",f:Z},40:{n:"FORMULA28",f:Y},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:re},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:z},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}})();function upe(e){var t={},r=e.match(ko),n=0,s=!1;if(r)for(;n!=r.length;++n){var a=sn(r[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;t.cp=nE[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=a.val;break;case"<sz":t.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":a.rgb&&(t.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+a[0])}}return t}var dpe=(function(){var e=Rv("t"),t=Rv("rPr");function r(a){var i=a.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:Un(i[1])},c=a.match(t);return c&&(o.s=upe(c[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(s).map(r).filter(function(o){return o.v})}})(),fpe=(function(){var t=/(\r\n|\n)/g;function r(s,a,i){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),s.b&&(a.push("<b>"),i.push("</b>")),s.i&&(a.push("<i>"),i.push("</i>")),s.strike&&(a.push("<s>"),i.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(a.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),s}function n(s){var a=[[],s.v,[]];return s.v?(s.s&&r(s.s,a[0],a[2]),a[0].join("")+a[1].replace(t,"<br/>")+a[2].join("")):""}return function(a){return a.map(n).join("")}})(),hpe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,mpe=/<(?:\w+:)?r>/,gpe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function EE(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Un(ps(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=ps(e),r&&(n.h=hE(n.t))):e.match(mpe)&&(n.r=ps(e),n.t=Un(ps((e.replace(gpe,"").match(hpe)||[]).join("").replace(ko,""))),r&&(n.h=fpe(dpe(n.r)))),n):{t:""}}var ppe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,xpe=/<(?:\w+:)?(?:si|sstItem)>/g,ype=/<\/(?:\w+:)?(?:si|sstItem)>/;function vpe(e,t){var r=[],n="";if(!e)return r;var s=e.match(ppe);if(s){n=s[2].replace(xpe,"").split(ype);for(var a=0;a!=n.length;++a){var i=EE(n[a].trim(),t);i!=null&&(r[r.length]=i)}s=sn(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var bpe=/^\s|\s$|[\t\n\r]/;function WG(e,t){if(!t.bookSST)return"";var r=[Ra];r[r.length]=ur("sst",null,{xmlns:tg[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var s=e[n],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(bpe)&&(a+=' xml:space="preserve"'),a+=">"+cs(s.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function wpe(e){return[e.read_shift(4),e.read_shift(4)]}function _pe(e,t){var r=[],n=!1;return E0(e,function(a,i,o){switch(o){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Spe(e,t){return t||(t=Rt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var kpe=Ohe;function Cpe(e){var t=gl();Vt(t,159,Spe(e));for(var r=0;r<e.length;++r)Vt(t,19,kpe(e[r]));return Vt(t,160),t.end()}function HG(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function i0(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function Tpe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=i0(e,4),t.U=i0(e,4),t.W=i0(e,4),t}function Epe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),a=[];s-- >0;)a.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=a,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function Npe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(Epe(e));return t}function Ape(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function jpe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=i0(e,4),t.U=i0(e,4),t.W=i0(e,4),t}function Ppe(e){var t=jpe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function GG(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function VG(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function Fpe(e){var t=i0(e);switch(t.Minor){case 2:return[t.Minor,Mpe(e)];case 3:return[t.Minor,Ope()];case 4:return[t.Minor,Dpe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Mpe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=GG(e,r),s=VG(e,e.length-e.l);return{t:"Std",h:n,v:s}}function Ope(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Dpe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(ko,function(a){var i=sn(a);switch(cd(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function Rpe(e,t){var r={},n=r.EncryptionVersionInfo=i0(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=GG(e,s),t-=s,r.EncryptionVerifier=VG(e,t),r}function Ipe(e){var t={},r=t.EncryptionVersionInfo=i0(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function NE(e){var t=0,r,n=HG(e),s=n.length+1,a,i,o,c,u;for(r=Yf(s),r[0]=n.length,a=1;a!=s;++a)r[a]=n[a-1];for(a=s-1;a>=0;--a)i=r[a],o=(t&16384)===0?0:1,c=t<<1&32767,u=o|c,t=u^i;return t^52811}var qG=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},s=function(i,o){return n(i^o)},a=function(i){for(var o=t[i.length-1],c=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(o^=r[c]),d*=2,--c;return o};return function(i){for(var o=HG(i),c=a(o),u=o.length,d=Yf(16),f=0;f!=16;++f)d[f]=0;var h,g,p;for((u&1)===1&&(h=c>>8,d[u]=s(e[0],h),--u,h=c&255,g=o[o.length-1],d[u]=s(g,h));u>0;)--u,h=c>>8,d[u]=s(o[u],h),--u,h=c&255,d[u]=s(o[u],h);for(u=15,p=15-o.length;p>0;)h=c>>8,d[u]=s(e[p],h),--u,--p,h=c&255,d[u]=s(o[u],h),--u,--p;return d}})(),Lpe=function(e,t,r,n,s){s||(s=t),n||(n=qG(e));var a,i;for(a=0;a!=t.length;++a)i=t[a],i^=n[r],i=(i>>5|i<<3)&255,s[a]=i,++r;return[s,r,n]},Bpe=function(e){var t=0,r=qG(e);return function(n){var s=Lpe("",n,t,r);return t=s[1],s[0]}};function $pe(e,t,r,n){var s={key:Wa(e),verificationBytes:Wa(e)};return r.password&&(s.verifier=NE(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=Bpe(r.password)),s}function Upe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=Ipe(e):n.Data=Rpe(e,t),n}function zpe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?Upe(e,t-2,n):$pe(e,r.biff>=8?t:t-2,r,n),n}var KG=(function(){function e(s,a){switch(a.type){case"base64":return t(Wl(s),a);case"binary":return t(s,a);case"buffer":return t(Tn&&Buffer.isBuffer(s)?s.toString("binary"):lh(s),a);case"array":return t(Bm(s),a)}throw new Error("Unrecognized type "+a.type)}function t(s,a){var i=a||{},o=i.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,g=0,p,y=-1;p=h.exec(d);){switch(p[0]){case"\\cell":var v=d.slice(g,h.lastIndex-p[0].length);if(v[0]==" "&&(v=v.slice(1)),++y,v.length){var C={v,t:"s"};Array.isArray(o)?o[f][y]=C:o[en({r:f,c:y})]=C}break}g=h.lastIndex}y>u.e.c&&(u.e.c=y)}),o["!ref"]=wn(u),o}function r(s,a){return ch(e(s,a),a)}function n(s){for(var a=["{\\rtf1\\ansi"],i=Wn(s["!ref"]),o,c=Array.isArray(s),u=i.s.r;u<=i.e.r;++u){a.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=en({r:u,c:d});o=c?(s[u]||[])[d]:s[f],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(p0(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}})();function Wpe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function $v(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function Hpe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),a=Math.min(t,r,n),i=s-a;if(i===0)return[0,0,t];var o=0,c=0,u=s+a;switch(c=i/(u>1?2-u:u),s){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,c,u/2]}function Gpe(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),a=n-s/2,i=[a,a,a],o=6*t,c;if(r!==0)switch(o|0){case 0:case 6:c=s*o,i[0]+=s,i[1]+=c;break;case 1:c=s*(2-o),i[0]+=c,i[1]+=s;break;case 2:c=s*(o-2),i[1]+=s,i[2]+=c;break;case 3:c=s*(4-o),i[1]+=c,i[2]+=s;break;case 4:c=s*(o-4),i[2]+=s,i[0]+=c;break;case 5:c=s*(6-o),i[2]+=c,i[0]+=s;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function X4(e,t){if(t===0)return e;var r=Hpe(Wpe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),$v(Gpe(r))}var YG=6,Vpe=15,qpe=1,go=YG;function Uv(e){return Math.floor((e+Math.round(128/go)/256)*go)}function zv(e){return Math.floor((e-5)/go*100+.5)/100}function J4(e){return Math.round((e*go+5)/go*256)/256}function q5(e){return J4(zv(Uv(e)))}function AE(e){var t=Math.abs(e-q5(e)),r=go;if(t>.005)for(go=qpe;go<Vpe;++go)Math.abs(e-q5(e))<=t&&(t=Math.abs(e-q5(e)),r=go);go=r}function Xf(e){e.width?(e.wpx=Uv(e.width),e.wch=zv(e.wpx),e.MDW=go):e.wpx?(e.wch=zv(e.wpx),e.width=J4(e.wch),e.MDW=go):typeof e.wch=="number"&&(e.width=J4(e.wch),e.wpx=Uv(e.width),e.MDW=go),e.customWidth&&delete e.customWidth}var Kpe=96,XG=Kpe;function Wv(e){return e*96/XG}function e1(e){return e*XG/96}var Ype={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Xpe(e,t,r,n){t.Borders=[];var s={},a=!1;(e[0].match(ko)||[]).forEach(function(i){var o=sn(i);switch(cd(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=Ps(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=Ps(o.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function Jpe(e,t,r,n){t.Fills=[];var s={},a=!1;(e[0].match(ko)||[]).forEach(function(i){var o=sn(i);switch(cd(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function Qpe(e,t,r,n){t.Fonts=[];var s={},a=!1;(e[0].match(ko)||[]).forEach(function(i){var o=sn(i);switch(cd(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=ps(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?Ps(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?Ps(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?Ps(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?Ps(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?Ps(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?Ps(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?Ps(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=nE[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=Ps(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var c=pm[s.color.index];s.color.index==81&&(c=pm[1]),c||(c=pm[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=X4(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function Zpe(e,t,r){t.NumberFmt=[];for(var n=pa(Qr),s=0;s<n.length;++s)t.NumberFmt[n[s]]=Qr[n[s]];var a=e[0].match(ko);if(a)for(s=0;s<a.length;++s){var i=sn(a[s]);switch(cd(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Un(ps(i.formatCode)),c=parseInt(i.numFmtId,10);if(t.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=o}a0(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function e1e(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=ur("numFmt",null,{numFmtId:n,formatCode:cs(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=ur("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var kw=["numFmtId","fillId","fontId","borderId","xfId"],Cw=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function t1e(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(ko)||[]).forEach(function(a){var i=sn(a),o=0;switch(cd(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<kw.length;++o)n[kw[o]]&&(n[kw[o]]=parseInt(n[kw[o]],10));for(o=0;o<Cw.length;++o)n[Cw[o]]&&(n[Cw[o]]=Ps(n[Cw[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=Ps(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function r1e(e){var t=[];return t[t.length]=ur("cellXfs",null),e.forEach(function(r){t[t.length]=ur("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=ur("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var n1e=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&Zpe(f,d,u),(f=o.match(s))&&Qpe(f,d,c,u),(f=o.match(n))&&Jpe(f,d,c,u),(f=o.match(a))&&Xpe(f,d,c,u),(f=o.match(r))&&t1e(f,d,u),d}})();function JG(e,t){var r=[Ra,ur("styleSheet",null,{xmlns:tg[0],"xmlns:vt":ai.vt})],n;return e.SSF&&(n=e1e(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=r1e(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function s1e(e,t){var r=e.read_shift(2),n=wo(e);return[r,n]}function a1e(e,t,r){r||(r=Rt(6+4*t.length)),r.write_shift(2,e),Ei(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function i1e(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=Uhe(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var a=e.read_shift(2);switch(a===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=$he(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=wo(e),n}function o1e(e,t){t||(t=Rt(153)),t.write_shift(2,e.sz*20),zhe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),q4(e.color,t);var n=0;return n=2,t.write_shift(1,n),Ei(e.name,t),t.length>t.l?t.slice(0,t.l):t}var l1e=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],K5,c1e=So;function lD(e,t){t||(t=Rt(84)),K5||(K5=gS(l1e));var r=K5[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(q4({auto:1},t),q4({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function u1e(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}function QG(e,t,r){r||(r=Rt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Ey(e,t){return t||(t=Rt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var d1e=So;function f1e(e,t){return t||(t=Rt(51)),t.write_shift(1,0),Ey(null,t),Ey(null,t),Ey(null,t),Ey(null,t),Ey(null,t),t.length>t.l?t.slice(0,t.l):t}function h1e(e,t){return t||(t=Rt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),V4(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function m1e(e,t,r){var n=Rt(2052);return n.write_shift(4,e),V4(t,n),V4(r,n),n.length>n.l?n.slice(0,n.l):n}function g1e(e,t,r){var n={};n.NumberFmt=[];for(var s in Qr)n.NumberFmt[s]=Qr[s];n.CellXf=[],n.Fonts=[];var a=[],i=!1;return E0(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],a0(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=X4(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:a.push(d),i=!0;break;case 38:a.pop(),i=!1;break;default:if(u.T>0)a.push(d);else if(u.T<0)a.pop();else if(!i||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function p1e(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&++r}),r!=0&&(Vt(e,615,uu(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&Vt(e,44,a1e(s,t[s]))}),Vt(e,616))}}function x1e(e){var t=1;Vt(e,611,uu(t)),Vt(e,43,o1e({sz:12,color:{theme:1},name:"Calibri",family:2})),Vt(e,612)}function y1e(e){var t=2;Vt(e,603,uu(t)),Vt(e,45,lD({patternType:"none"})),Vt(e,45,lD({patternType:"gray125"})),Vt(e,604)}function v1e(e){var t=1;Vt(e,613,uu(t)),Vt(e,46,f1e()),Vt(e,614)}function b1e(e){var t=1;Vt(e,626,uu(t)),Vt(e,47,QG({numFmtId:0},65535)),Vt(e,627)}function w1e(e,t){Vt(e,617,uu(t.length)),t.forEach(function(r){Vt(e,47,QG(r,0))}),Vt(e,618)}function _1e(e){var t=1;Vt(e,619,uu(t)),Vt(e,48,h1e({xfId:0,name:"Normal"})),Vt(e,620)}function S1e(e){var t=0;Vt(e,505,uu(t)),Vt(e,506)}function k1e(e){var t=0;Vt(e,508,m1e(t,"TableStyleMedium9","PivotStyleMedium4")),Vt(e,509)}function C1e(e,t){var r=gl();return Vt(r,278),p1e(r,e.SSF),x1e(r),y1e(r),v1e(r),b1e(r),w1e(r,t.cellXfs),_1e(r),S1e(r),k1e(r),Vt(r,279),r.end()}var T1e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function E1e(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(ko)||[]).forEach(function(s){var a=sn(s);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(t.themeElements.clrScheme[T1e.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function N1e(){}function A1e(){}var j1e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,P1e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,F1e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function M1e(e,t,r){t.themeElements={};var n;[["clrScheme",j1e,E1e],["fontScheme",P1e,N1e],["fmtScheme",F1e,A1e]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var O1e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function ZG(e,t){(!e||e.length===0)&&(e=jE());var r,n={};if(!(r=e.match(O1e)))throw new Error("themeElements not found in theme");return M1e(r[0],n,t),n.raw=e,n}function jE(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Ra];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function D1e(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var a=e.slice(e.l);e.l=n;var i;try{i=GH(a,{type:"array"})}catch{return}var o=Ll(i,"theme/theme/theme1.xml",!0);if(o)return ZG(o,r)}}function R1e(e){return e.read_shift(4)}function I1e(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=L1e(e,4);break;case 2:t.xclrValue=FG(e);break;case 3:t.xclrValue=R1e(e);break;case 4:e.l+=4;break}return e.l+=8,t}function L1e(e,t){return So(e,t)}function B1e(e,t){return So(e,t)}function $1e(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=I1e(e);break;case 6:n[1]=B1e(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function U1e(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),a=[];s-- >0;)a.push($1e(e,r-e.l));return{ixfe:n,ext:a}}function z1e(e,t){t.forEach(function(r){r[0]})}function W1e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:wo(e)}}function H1e(e){var t=Rt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Ei(e.name,t),t.slice(0,t.l)}function G1e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function V1e(e){var t=Rt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function q1e(e,t){var r=Rt(8+2*t.length);return r.write_shift(4,e),Ei(t,r),r.slice(0,r.l)}function K1e(e){return e.l+=4,e.read_shift(4)!=0}function Y1e(e,t){var r=Rt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function X1e(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},a=[],i=!1,o=2;return E0(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:a.push(d),i=!0;break;case 36:a.pop(),i=!1;break;default:if(!u.T){if(!i||s.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function J1e(){var e=gl();return Vt(e,332),Vt(e,334,uu(1)),Vt(e,335,H1e({name:"XLDAPR",version:12e4,flags:3496657072})),Vt(e,336),Vt(e,339,q1e(1,"XLDAPR")),Vt(e,52),Vt(e,35,uu(514)),Vt(e,4096,uu(0)),Vt(e,4097,gc(1)),Vt(e,36),Vt(e,53),Vt(e,340),Vt(e,337,Y1e(1)),Vt(e,51,V1e([[1,0]])),Vt(e,338),Vt(e,333),e.end()}function Q1e(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,a=2,i;return e.replace(ko,function(o){var c=sn(o);switch(cd(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):a==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),n}function eV(){var e=[Ra];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function Z1e(e){var t=[];if(!e)return t;var r=1;return(e.match(ko)||[]).forEach(function(n){var s=sn(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function exe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=en(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function txe(e,t,r){var n=[];return E0(e,function(a,i,o){switch(o){case 63:n.push(a);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function rxe(e,t,r,n){if(!e)return e;var s=n||{},a=!1;E0(e,function(o,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!c.T){if(!a||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function nxe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Tp=1024;function tV(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[ur("xml",null,{"xmlns:v":Ml.v,"xmlns:o":Ml.o,"xmlns:x":Ml.x,"xmlns:mv":Ml.mv}).replace(/\/>/,">"),ur("o:shapelayout",ur("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),ur("v:shapetype",[ur("v:stroke",null,{joinstyle:"miter"}),ur("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Tp<e*1e3;)Tp+=1e3;return t.forEach(function(a){var i=ta(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?ur("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=ur("v:fill",c,o),d={on:"t",obscured:"t"};++Tp,s=s.concat(["<v:shape"+Iv({id:"_x0000_s"+Tp,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,ur("v:shadow",null,d),ur("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ji("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),Ji("x:AutoFill","False"),Ji("x:Row",String(i.r)),Ji("x:Column",String(i.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function cD(e,t,r,n){var s=Array.isArray(e),a;t.forEach(function(i){var o=ta(i.ref);if(s?(e[o.r]||(e[o.r]=[]),a=e[o.r][o.c]):a=e[i.ref],!a){a={t:"z"},s?e[o.r][o.c]=a:e[i.ref]=a;var c=Wn(e["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var u=wn(c);u!==e["!ref"]&&(e["!ref"]=u)}a.c||(a.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=a.c.length-1;f>=0;--f){if(!r&&a.c[f].T)return;r&&!a.c[f].T&&a.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}a.c.push(d)})}function sxe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var a=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=sn(o[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=ta(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&EE(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function rV(e){var t=[Ra,ur("comments",null,{xmlns:tg[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(s){var a=cs(s.a);r.indexOf(a)==-1&&(r.push(a),t.push("<author>"+a+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var s=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(s=r.indexOf(cs(c.a))),a.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),a.length<=1)t.push(Ji("t",cs(a[0]||"")));else{for(var i=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)i+=`Reply:
    `+a[o]+`
`;t.push(Ji("t",cs(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function axe(e,t){var r=[],n=!1,s={},a=0;return e.replace(ko,function(o,c){var u=sn(o);switch(cd(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":a=c+o.length;break;case"</text>":s.t=e.slice(a,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function ixe(e,t,r){var n=[Ra,ur("ThreadedComments",null,{xmlns:ai.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var a="";(s[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?a=c.id:c.parentId=a,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(ur("threadedComment",Ji("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function oxe(e,t){var r=[],n=!1;return e.replace(ko,function(a){var i=sn(a);switch(cd(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return a}),r}function lxe(e){var t=[Ra,ur("personList",null,{xmlns:ai.TCMNT,"xmlns:x":tg[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(ur("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function cxe(e){var t={};t.iauthor=e.read_shift(4);var r=ag(e);return t.rfx=r.s,t.ref=en(r.s),e.l+=16,t}function uxe(e,t){return t==null&&(t=Rt(36)),t.write_shift(4,e[1].iauthor),P1(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var dxe=wo;function fxe(e){return Ei(e.slice(0,54))}function hxe(e,t){var r=[],n=[],s={},a=!1;return E0(e,function(o,c,u){switch(u){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!a||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function mxe(e){var t=gl(),r=[];return Vt(t,628),Vt(t,630),e.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Vt(t,632,fxe(s.a)))})}),Vt(t,631),Vt(t,633),e.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var a={s:ta(n[0]),e:ta(n[0])};Vt(t,635,uxe([a,s])),s.t&&s.t.length>0&&Vt(t,637,Rhe(s)),Vt(t,636),delete s.iauthor})}),Vt(t,634),Vt(t,629),t.end()}var gxe="application/vnd.ms-office.vbaProject";function pxe(e){var t=Hr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Hr.utils.cfb_add(t,s,e.FileIndex[n].content)}}),Hr.write(t)}function xxe(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Hr.utils.cfb_add(e,s,t.FileIndex[n].content)}})}var nV=["xlsb","xlsm","xlam","biff8","xla"];function yxe(){return{"!type":"dialog"}}function vxe(){return{"!type":"dialog"}}function bxe(){return{"!type":"macro"}}function wxe(){return{"!type":"macro"}}var Lp=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,a,i){var o=!1,c=!1;a.length==0?c=!0:a.charAt(0)=="["&&(c=!0,a=a.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=a.length>0?parseInt(a,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=t.c:--d,c?u+=t.r:--u,s+(o?"":"$")+ea(d)+(c?"":"$")+Fa(u)}return function(s,a){return t=a,s.replace(e,r)}})(),PE=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,FE=(function(){return function(t,r){return t.replace(PE,function(n,s,a,i,o,c){var u=yE(i)-(a?0:r.c),d=xE(c)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",h=u==0?"":a?u+1:"["+u+"]";return s+"R"+f+"C"+h})}})();function sV(e,t){return e.replace(PE,function(r,n,s,a,i,o){return n+(s=="$"?s+a:ea(yE(a)+t.c))+(i=="$"?i+o:Fa(xE(o)+t.r))})}function _xe(e,t,r){var n=pl(t),s=n.s,a=ta(r),i={r:a.r-s.r,c:a.c-s.c};return sV(e,i)}function Sxe(e){return e.length!=1}function uD(e){return e.replace(/_xlfn\./g,"")}function Ua(e){e.l+=1}function Jf(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function aV(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return iV(e);r.biff==12&&(n=4)}var s=e.read_shift(n),a=e.read_shift(n),i=Jf(e),o=Jf(e);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function iV(e){var t=Jf(e),r=Jf(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function kxe(e,t,r){if(r.biff<8)return iV(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),a=Jf(e),i=Jf(e);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function oV(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Cxe(e);var n=e.read_shift(r&&r.biff==12?4:2),s=Jf(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function Cxe(e){var t=Jf(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Txe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Exe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Nxe(e);var s=e.read_shift(n>=12?4:2),a=e.read_shift(2),i=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:o}}function Nxe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function Axe(e,t,r){var n=(e[e.l++]&96)>>5,s=aV(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function jxe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}var i=aV(e,a,r);return[n,s,i]}function Pxe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Fxe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}return e.l+=a,[n,s]}function Mxe(e,t,r){var n=(e[e.l++]&96)>>5,s=kxe(e,t-1,r);return[n,s]}function Oxe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function dD(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Dxe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],a=0;a<=n;++a)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function Rxe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Ixe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Lxe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Bxe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function lV(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function $xe(e){return e.read_shift(2),lV(e)}function Uxe(e){return e.read_shift(2),lV(e)}function zxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=oV(e,0,r);return[n,s]}function Wxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=Exe(e,0,r);return[n,s]}function Hxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var a=oV(e,0,r);return[n,s,a]}function Gxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[Kye[s],dV[s],n]}function Vxe(e,t,r){var n=e[e.l++],s=e.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:qxe(e);return[s,(a[0]===0?dV:qye)[a[1]]]}function qxe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Kxe(e,t,r){e.l+=r&&r.biff==2?3:4}function Yxe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Xxe(e){return e.l++,N0[e.read_shift(1)]}function Jxe(e){return e.l++,e.read_shift(2)}function Qxe(e){return e.l++,e.read_shift(1)!==0}function Zxe(e){return e.l++,xo(e)}function eye(e,t,r){return e.l++,A2(e,t-1,r)}function tye(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Ta(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=N0[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=xo(e);break;case 2:r[1]=ig(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function rye(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],a=0;a!=n;++a)s.push((r.biff==12?ag:yS)(e));return s}function nye(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var a=0,i=[];a!=n&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=tye(e,r.biff);return i}function sye(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,a=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,a]}function aye(e,t,r){if(r.biff==5)return iye(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),a=e.read_shift(4);return[n,s,a]}function iye(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function oye(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function lye(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function cye(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function uye(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return e.l+=a,[n,s]}var dye=So,fye=So,hye=So;function P2(e,t,r){return e.l+=2,[Txe(e)]}function ME(e){return e.l+=6,[]}var mye=P2,gye=ME,pye=ME,xye=P2;function cV(e){return e.l+=2,[Wa(e),e.read_shift(2)&1]}var yye=P2,vye=cV,bye=ME,wye=P2,_ye=P2,Sye=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function kye(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),a=e.read_shift(2),i=Sye[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:s,C:a}}function Cye(e){return e.l+=2,[e.read_shift(4)]}function Tye(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Eye(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Nye(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Aye(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function jye(e){return e.l+=4,[0,0]}var fD={1:{n:"PtgExp",f:Yxe},2:{n:"PtgTbl",f:hye},3:{n:"PtgAdd",f:Ua},4:{n:"PtgSub",f:Ua},5:{n:"PtgMul",f:Ua},6:{n:"PtgDiv",f:Ua},7:{n:"PtgPower",f:Ua},8:{n:"PtgConcat",f:Ua},9:{n:"PtgLt",f:Ua},10:{n:"PtgLe",f:Ua},11:{n:"PtgEq",f:Ua},12:{n:"PtgGe",f:Ua},13:{n:"PtgGt",f:Ua},14:{n:"PtgNe",f:Ua},15:{n:"PtgIsect",f:Ua},16:{n:"PtgUnion",f:Ua},17:{n:"PtgRange",f:Ua},18:{n:"PtgUplus",f:Ua},19:{n:"PtgUminus",f:Ua},20:{n:"PtgPercent",f:Ua},21:{n:"PtgParen",f:Ua},22:{n:"PtgMissArg",f:Ua},23:{n:"PtgStr",f:eye},26:{n:"PtgSheet",f:Tye},27:{n:"PtgEndSheet",f:Eye},28:{n:"PtgErr",f:Xxe},29:{n:"PtgBool",f:Qxe},30:{n:"PtgInt",f:Jxe},31:{n:"PtgNum",f:Zxe},32:{n:"PtgArray",f:Oxe},33:{n:"PtgFunc",f:Gxe},34:{n:"PtgFuncVar",f:Vxe},35:{n:"PtgName",f:sye},36:{n:"PtgRef",f:zxe},37:{n:"PtgArea",f:Axe},38:{n:"PtgMemArea",f:oye},39:{n:"PtgMemErr",f:dye},40:{n:"PtgMemNoMem",f:fye},41:{n:"PtgMemFunc",f:lye},42:{n:"PtgRefErr",f:cye},43:{n:"PtgAreaErr",f:Pxe},44:{n:"PtgRefN",f:Wxe},45:{n:"PtgAreaN",f:Mxe},46:{n:"PtgMemAreaN",f:Nye},47:{n:"PtgMemNoMemN",f:Aye},57:{n:"PtgNameX",f:aye},58:{n:"PtgRef3d",f:Hxe},59:{n:"PtgArea3d",f:jxe},60:{n:"PtgRefErr3d",f:uye},61:{n:"PtgAreaErr3d",f:Fxe},255:{}},Pye={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Fye={1:{n:"PtgElfLel",f:cV},2:{n:"PtgElfRw",f:wye},3:{n:"PtgElfCol",f:mye},6:{n:"PtgElfRwV",f:_ye},7:{n:"PtgElfColV",f:xye},10:{n:"PtgElfRadical",f:yye},11:{n:"PtgElfRadicalS",f:bye},13:{n:"PtgElfColS",f:gye},15:{n:"PtgElfColSV",f:pye},16:{n:"PtgElfRadicalLel",f:vye},25:{n:"PtgList",f:kye},29:{n:"PtgSxName",f:Cye},255:{}},Mye={0:{n:"PtgAttrNoop",f:jye},1:{n:"PtgAttrSemi",f:Bxe},2:{n:"PtgAttrIf",f:Ixe},4:{n:"PtgAttrChoose",f:Dxe},8:{n:"PtgAttrGoto",f:Rxe},16:{n:"PtgAttrSum",f:Kxe},32:{n:"PtgAttrBaxcel",f:dD},33:{n:"PtgAttrBaxcel",f:dD},64:{n:"PtgAttrSpace",f:$xe},65:{n:"PtgAttrSpaceSemi",f:Uxe},128:{n:"PtgAttrIfError",f:Lxe},255:{}};function F2(e,t,r,n){if(n.biff<8)return So(e,t);for(var s=e.l+t,a=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=nye(e,0,n),a.push(r[i][1]);break;case"PtgMemArea":r[i][2]=rye(e,r[i][1],n),a.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),a.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=s-e.l,t!==0&&a.push(So(e,t)),a}function M2(e,t,r){for(var n=e.l+t,s,a,i=[];n!=e.l;)t=n-e.l,a=e[e.l],s=fD[a]||fD[Pye[a]],(a===24||a===25)&&(s=(a===24?Fye:Mye)[e[e.l+1]]),!s||!s.f?So(e,t):i.push([s.n,s.f(e,t,r)]);return i}function Oye(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],a=0;a<n.length;++a){var i=n[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var Dye={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Rye(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function uV(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function hD(e,t,r){var n=uV(e,t,r);return n=="#REF"?n:Rye(n,r)}function mo(e,t,r,n,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},o=[],c,u,d,f=0,h=0,g,p="";if(!e[0]||!e[0][0])return"";for(var y=-1,v="",C=0,S=e[0].length;C<S;++C){var w=e[0][C];switch(w[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),y>=0){switch(e[0][y][1][0]){case 0:v=ma(" ",e[0][y][1][1]);break;case 1:v=ma("\r",e[0][y][1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}u=u+v,y=-1}o.push(u+Dye[w[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=nv(w[1][1],i,s),o.push(sv(d,a));break;case"PtgRefN":d=r?nv(w[1][1],r,s):w[1][1],o.push(sv(d,a));break;case"PtgRef3d":f=w[1][1],d=nv(w[1][2],i,s),p=hD(n,f,s),o.push(p+"!"+sv(d,a));break;case"PtgFunc":case"PtgFuncVar":var T=w[1][0],N=w[1][1];T||(T=0),T&=127;var A=T==0?[]:o.slice(-T);o.length-=T,N==="User"&&(N=A.shift()),o.push(N+"("+A.join(",")+")");break;case"PtgBool":o.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(w[1]);break;case"PtgNum":o.push(String(w[1]));break;case"PtgStr":o.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(w[1]);break;case"PtgAreaN":g=zO(w[1][1],r?{s:r}:i,s),o.push(H5(g,s));break;case"PtgArea":g=zO(w[1][1],i,s),o.push(H5(g,s));break;case"PtgArea3d":f=w[1][1],g=w[1][2],p=hD(n,f,s),o.push(p+"!"+H5(g,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=w[1][2];var P=(n.names||[])[h-1]||(n[0]||[])[h],j=P?P.Name:"SH33TJSNAME"+String(h);j&&j.slice(0,6)=="_xlfn."&&!s.xlfn&&(j=j.slice(6)),o.push(j);break;case"PtgNameX":var F=w[1][1];h=w[1][2];var R;if(s.biff<=5)F<0&&(F=-F),n[F]&&(R=n[F][h]);else{var L="";if(((n[F]||[])[0]||[])[0]==14849||(((n[F]||[])[0]||[])[0]==1025?n[F][h]&&n[F][h].itab>0&&(L=n.SheetNames[n[F][h].itab-1]+"!"):L=n.SheetNames[h-1]+"!"),n[F]&&n[F][h])L+=n[F][h].Name;else if(n[0]&&n[0][h])L+=n[0][h].Name;else{var V=(uV(n,F,s)||"").split(";;");V[h-1]?L=V[h-1]:L+="SH33TJSERRX"}o.push(L);break}R||(R={Name:"SH33TJSERRY"}),o.push(R.Name);break;case"PtgParen":var Z="(",Y=")";if(y>=0){switch(v="",e[0][y][1][0]){case 2:Z=ma(" ",e[0][y][1][1])+Z;break;case 3:Z=ma("\r",e[0][y][1][1])+Z;break;case 4:Y=ma(" ",e[0][y][1][1])+Y;break;case 5:Y=ma("\r",e[0][y][1][1])+Y;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}y=-1}o.push(Z+o.pop()+Y);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:w[1][1],r:w[1][0]};var re={c:r.c,r:r.r};if(n.sharedf[en(d)]){var ue=n.sharedf[en(d)];o.push(mo(ue,i,re,n,s))}else{var z=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(mo(u[1],i,re,n,s)),z=!0;break}z||o.push(w[1])}break;case"PtgArray":o.push("{"+Oye(w[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=C;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(w));default:throw new Error("Unrecognized Formula Token: "+String(w))}var X=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&X.indexOf(e[0][C][0])==-1){w=e[0][y];var I=!0;switch(w[1][0]){case 4:I=!1;case 0:v=ma(" ",w[1][1]);break;case 5:I=!1;case 1:v=ma("\r",w[1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}o.push((I?v:"")+o.pop()+(I?"":v)),y=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function Iye(e,t,r){var n=e.l+t,s=r.biff==2?1:2,a,i=e.read_shift(s);if(i==65535)return[[],So(e,t-2)];var o=M2(e,i,r);return t!==i+s&&(a=F2(e,t-i-s,o,r)),e.l=n,[o,a]}function Lye(e,t,r){var n=e.l+t,s=r.biff==2?1:2,a,i=e.read_shift(s);if(i==65535)return[[],So(e,t-2)];var o=M2(e,i,r);return t!==i+s&&(a=F2(e,t-i-s,o,r)),e.l=n,[o,a]}function Bye(e,t,r,n){var s=e.l+t,a=M2(e,n,r),i;return s!==e.l&&(i=F2(e,s-e.l,a,r)),[a,i]}function $ye(e,t,r){var n=e.l+t,s,a=e.read_shift(2),i=M2(e,a,r);return a==65535?[[],So(e,t-2)]:(t!==a+2&&(s=F2(e,n-a-2,i,r)),[i,s])}function Uye(e){var t;if(Qd(e,e.l+6)!==65535)return[xo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function zye(e){if(e==null){var t=Rt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return $m(e);return $m(0)}function Y5(e,t,r){var n=e.l+t,s=ud(e);r.biff==2&&++e.l;var a=Uye(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=Lye(e,n-e.l,r);return{cell:s,val:a[0],formula:o,shared:i>>3&1,tt:a[1]}}function Wye(e,t,r,n,s){var a=zm(t,r,s),i=zye(e.v),o=Rt(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=Rt(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Ci([a,i,o,u]);return f}function vS(e,t,r){var n=e.read_shift(4),s=M2(e,n,r),a=e.read_shift(4),i=a>0?F2(e,a,s,r):null;return[s,i]}var Hye=vS,bS=vS,Gye=vS,Vye=vS,qye={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},dV={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Kye={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function mD(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function Yye(e){var t="of:="+e.replace(PE,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function X5(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function Xye(e){return e.replace(/\./,"!")}var iv={},Bp={},ov=typeof Map<"u";function OE(e,t,r){var n=0,s=e.length;if(r){if(ov?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var a=ov?r.get(t):r[t];n<a.length;++n)if(e[a[n]].t===t)return e.Count++,a[n]}}else for(;n<s;++n)if(e[n].t===t)return e.Count++,n;return e[s]={t},e.Count++,e.Unique++,r&&(ov?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function wS(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(go=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=zv(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=J4(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function vm(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function uh(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],s=60,a=e.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){a0(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=n=s;break}}for(s=0;s!=a;++s)if(e[s].numFmtId===n)return s;return e[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function fV(e,t,r,n,s,a){try{n.cellNF&&(e.z=Qr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Os(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Qr[t]==null&&a0(qfe[t]||"General",t),e.t==="e")e.w=e.w||N0[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Dv(e.v);else if(e.t==="d"){var i=li(e.v);(i|0)===i?e.w=i.toString(10):e.w=Dv(i)}else{if(e.v===void 0)return"";e.w=Lm(e.v,Bp)}else e.t==="d"?e.w=Nc(t,li(e.v),Bp):e.w=Nc(t,e.v,Bp)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=a.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=X4(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=X4(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&a.Fills)throw o}}}function Jye(e,t,r){if(e&&e["!ref"]){var n=Wn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Qye(e,t){var r=Wn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=wn(r))}var Zye=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,eve=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,tve=/<(?:\w:)?hyperlink [^>]*>/mg,rve=/"(\w*:\w*)"/,nve=/<(?:\w:)?col\b[^>]*[\/]?>/g,sve=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,ave=/<(?:\w:)?pageMargins[^>]*\/>/g,hV=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,ive=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,ove=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function lve(e,t,r,n,s,a,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(eve);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(hV);h?DE(h[0],o,s,r):(h=u.match(ive))&&uve(h[0],h[1]||"",o,s,r);var g=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var p=u.slice(g,g+50).match(rve);p&&Qye(o,p[1])}var y=u.match(ove);y&&y[1]&&Sve(y[1],s);var v=[];if(t.cellStyles){var C=u.match(nve);C&&yve(v,C)}f&&Tve(f[1],o,t,c,a,i);var S=d.match(sve);S&&(o["!autofilter"]=bve(S[0]));var w=[],T=d.match(Zye);if(T)for(g=0;g!=T.length;++g)w[g]=Wn(T[g].slice(T[g].indexOf('"')+1));var N=d.match(tve);N&&gve(o,N,n);var A=d.match(ave);if(A&&(o["!margins"]=pve(sn(A[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=wn(c)),t.sheetRows>0&&o["!ref"]){var P=Wn(o["!ref"]);t.sheetRows<=+P.e.r&&(P.e.r=t.sheetRows-1,P.e.r>c.e.r&&(P.e.r=c.e.r),P.e.r<P.s.r&&(P.s.r=P.e.r),P.e.c>c.e.c&&(P.e.c=c.e.c),P.e.c<P.s.c&&(P.s.c=P.e.c),o["!fullref"]=o["!ref"],o["!ref"]=wn(P))}return v.length>0&&(o["!cols"]=v),w.length>0&&(o["!merges"]=w),o}function cve(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+wn(e[r])+'"/>';return t+"</mergeCells>"}function DE(e,t,r,n){var s=sn(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=Un(ps(s.codeName)))}function uve(e,t,r,n,s){DE(e.slice(0,e.indexOf(">")),r,n,s)}function dve(e,t,r,n,s){var a=!1,i={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}a=!0,i.codeName=Ku(cs(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+ur("outlinePr",null,u)}!a&&!o||(s[s.length]=ur("sheetPr",o,i))}var fve=["objects","scenarios","selectLockedCells","selectUnlockedCells"],hve=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function mve(e){var t={sheet:1};return fve.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),hve.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=NE(e.password).toString(16).toUpperCase()),ur("sheetProtection",null,t)}function gve(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var a=sn(ps(t[s]),!0);if(!a.ref)return;var i=((r||{})["!id"]||[])[a.id];i?(a.Target=i.Target,a.location&&(a.Target+="#"+Un(a.location))):(a.Target="#"+Un(a.location),i={Target:a.Target,TargetMode:"Internal"}),a.Rel=i,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=Wn(a.ref),c=o.s.r;c<=o.e.r;++c)for(var u=o.s.c;u<=o.e.c;++u){var d=en({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=a):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=a)}}}function pve(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function xve(e){return vm(e),ur("pageMargins",null,e)}function yve(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=sn(t[n],!0);s.hidden&&(s.hidden=Ps(s.hidden));var a=parseInt(s.min,10)-1,i=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,AE(s.width)),Xf(s);a<=i;)e[a++]=Ds(s)}}function vve(e,t){for(var r=["<cols>"],n,s=0;s!=t.length;++s)(n=t[s])&&(r[r.length]=ur("col",null,wS(s,n)));return r[r.length]="</cols>",r.join("")}function bve(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function wve(e,t,r,n){var s=typeof e.ref=="string"?e.ref:wn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,i=pl(s);i.s.r==i.e.r&&(i.e.r=pl(t["!ref"]).e.r,s=wn(i));for(var o=0;o<a.length;++o){var c=a[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),ur("autoFilter",null,{ref:s})}var _ve=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Sve(e,t){t.Views||(t.Views=[{}]),(e.match(_ve)||[]).forEach(function(r,n){var s=sn(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),Ps(s.rightToLeft)&&(t.Views[n].RTL=!0)})}function kve(e,t,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),ur("sheetViews",ur("sheetView",null,s),{})}function Cve(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",a=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=N0[e.v];break;case"d":n&&n.cellDates?s=Os(e.v,-1).toISOString():(e=Ds(e),e.t="n",s=""+(e.v=li(Os(e.v)))),typeof e.z>"u"&&(e.z=Qr[14]);break;default:s=e.v;break}var o=Ji("v",cs(s)),c={r:t},u=uh(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=Ji("v",""+OE(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=a&&(e.t=a,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=ur("f",cs(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),ur("c",o,c)}var Tve=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=Rv("v"),i=Rv("f");return function(c,u,d,f,h,g){for(var p=0,y="",v=[],C=[],S=0,w=0,T=0,N="",A,P,j=0,F=0,R,L,V=0,Z=0,Y=Array.isArray(g.CellXf),re,ue=[],z=[],X=Array.isArray(u),I=[],B={},W=!1,D=!!d.sheetStubs,U=c.split(t),q=0,H=U.length;q!=H;++q){y=U[q].trim();var te=y.length;if(te!==0){var Q=0;e:for(p=0;p<te;++p)switch(y[p]){case">":if(y[p-1]!="/"){++p;break e}if(d&&d.cellStyles){if(P=sn(y.slice(Q,p),!0),j=P.r!=null?parseInt(P.r,10):j+1,F=-1,d.sheetRows&&d.sheetRows<j)continue;B={},W=!1,P.ht&&(W=!0,B.hpt=parseFloat(P.ht),B.hpx=e1(B.hpt)),P.hidden=="1"&&(W=!0,B.hidden=!0),P.outlineLevel!=null&&(W=!0,B.level=+P.outlineLevel),W&&(I[j-1]=B)}break;case"<":Q=p;break}if(Q>=p)break;if(P=sn(y.slice(Q,p),!0),j=P.r!=null?parseInt(P.r,10):j+1,F=-1,!(d.sheetRows&&d.sheetRows<j)){f.s.r>j-1&&(f.s.r=j-1),f.e.r<j-1&&(f.e.r=j-1),d&&d.cellStyles&&(B={},W=!1,P.ht&&(W=!0,B.hpt=parseFloat(P.ht),B.hpx=e1(B.hpt)),P.hidden=="1"&&(W=!0,B.hidden=!0),P.outlineLevel!=null&&(W=!0,B.level=+P.outlineLevel),W&&(I[j-1]=B)),v=y.slice(p).split(e);for(var ae=0;ae!=v.length&&v[ae].trim().charAt(0)=="<";++ae);for(v=v.slice(ae),p=0;p!=v.length;++p)if(y=v[p].trim(),y.length!==0){if(C=y.match(r),S=p,w=0,T=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,C!=null&&C.length===2){for(S=0,N=C[1],w=0;w!=N.length&&!((T=N.charCodeAt(w)-64)<1||T>26);++w)S=26*S+T;--S,F=S}else++F;for(w=0;w!=y.length&&y.charCodeAt(w)!==62;++w);if(++w,P=sn(y.slice(0,w),!0),P.r||(P.r=en({r:j-1,c:F})),N=y.slice(w),A={t:""},(C=N.match(a))!=null&&C[1]!==""&&(A.v=Un(C[1])),d.cellFormula){if((C=N.match(i))!=null&&C[1]!==""){if(A.f=Un(ps(C[1])).replace(/\r\n/g,`
`),d.xlfn||(A.f=uD(A.f)),C[0].indexOf('t="array"')>-1)A.F=(N.match(s)||[])[1],A.F.indexOf(":")>-1&&ue.push([Wn(A.F),A.F]);else if(C[0].indexOf('t="shared"')>-1){L=sn(C[0]);var ce=Un(ps(C[1]));d.xlfn||(ce=uD(ce)),z[parseInt(L.si,10)]=[L,ce,P.r]}}else(C=N.match(/<f[^>]*\/>/))&&(L=sn(C[0]),z[L.si]&&(A.f=_xe(z[L.si][1],z[L.si][2],P.r)));var me=ta(P.r);for(w=0;w<ue.length;++w)me.r>=ue[w][0].s.r&&me.r<=ue[w][0].e.r&&me.c>=ue[w][0].s.c&&me.c<=ue[w][0].e.c&&(A.F=ue[w][1])}if(P.t==null&&A.v===void 0)if(A.f||A.F)A.v=0,A.t="n";else if(D)A.t="z";else continue;else A.t=P.t||"n";switch(f.s.c>F&&(f.s.c=F),f.e.c<F&&(f.e.c=F),A.t){case"n":if(A.v==""||A.v==null){if(!D)continue;A.t="z"}else A.v=parseFloat(A.v);break;case"s":if(typeof A.v>"u"){if(!D)continue;A.t="z"}else R=iv[parseInt(A.v,10)],A.v=R.t,A.r=R.r,d.cellHTML&&(A.h=R.h);break;case"str":A.t="s",A.v=A.v!=null?ps(A.v):"",d.cellHTML&&(A.h=hE(A.v));break;case"inlineStr":C=N.match(n),A.t="s",C!=null&&(R=EE(C[1]))?(A.v=R.t,d.cellHTML&&(A.h=R.h)):A.v="";break;case"b":A.v=Ps(A.v);break;case"d":d.cellDates?A.v=Os(A.v,1):(A.v=li(Os(A.v,1)),A.t="n");break;case"e":(!d||d.cellText!==!1)&&(A.w=A.v),A.v=gG[A.v];break}if(V=Z=0,re=null,Y&&P.s!==void 0&&(re=g.CellXf[P.s],re!=null&&(re.numFmtId!=null&&(V=re.numFmtId),d.cellStyles&&re.fillId!=null&&(Z=re.fillId))),fV(A,V,Z,d,h,g),d.cellDates&&Y&&A.t=="n"&&N1(Qr[V])&&(A.t="d",A.v=xS(A.v)),P.cm&&d.xlmeta){var xe=(d.xlmeta.Cell||[])[+P.cm-1];xe&&xe.type=="XLDAPR"&&(A.D=!0)}if(X){var se=ta(P.r);u[se.r]||(u[se.r]=[]),u[se.r][se.c]=A}else u[P.r]=A}}}}I.length>0&&(u["!rows"]=I)}})();function Eve(e,t,r,n){var s=[],a=[],i=Wn(e["!ref"]),o="",c,u="",d=[],f=0,h=0,g=e["!rows"],p=Array.isArray(e),y={r:u},v,C=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=ea(h);for(f=i.s.r;f<=i.e.r;++f){for(a=[],u=Fa(f),h=i.s.c;h<=i.e.c;++h){c=d[h]+u;var S=p?(e[f]||[])[h]:e[c];S!==void 0&&(o=Cve(S,c,e,t))!=null&&a.push(o)}(a.length>0||g&&g[f])&&(y={r:u},g&&g[f]&&(v=g[f],v.hidden&&(y.hidden=1),C=-1,v.hpx?C=Wv(v.hpx):v.hpt&&(C=v.hpt),C>-1&&(y.ht=C,y.customHeight=1),v.level&&(y.outlineLevel=v.level)),s[s.length]=ur("row",a.join(""),y))}if(g)for(;f<g.length;++f)g&&g[f]&&(y={r:f+1},v=g[f],v.hidden&&(y.hidden=1),C=-1,v.hpx?C=Wv(v.hpx):v.hpt&&(C=v.hpt),C>-1&&(y.ht=C,y.customHeight=1),v.level&&(y.outlineLevel=v.level),s[s.length]=ur("row","",y));return s.join("")}function mV(e,t,r,n){var s=[Ra,ur("worksheet",null,{xmlns:tg[0],"xmlns:r":ai.r})],a=r.SheetNames[e],i=0,o="",c=r.Sheets[a];c==null&&(c={});var u=c["!ref"]||"A1",d=Wn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=wn(d)}n||(n={}),c["!comments"]=[];var f=[];dve(c,r,e,t,s),s[s.length]=ur("dimension",null,{ref:u}),s[s.length]=kve(c,t,e,r),t.sheetFormat&&(s[s.length]=ur("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=vve(c,c["!cols"])),s[i=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=Eve(c,t),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),c["!protect"]&&(s[s.length]=mve(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=wve(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=cve(c["!merges"]));var h=-1,g,p=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(y){y[1].Target&&(g={ref:y[0]},y[1].Target.charAt(0)!="#"&&(p=is(n,-1,cs(y[1].Target).replace(/#.*$/,""),An.HLINK),g["r:id"]="rId"+p),(h=y[1].Target.indexOf("#"))>-1&&(g.location=cs(y[1].Target.slice(h+1))),y[1].Tooltip&&(g.tooltip=cs(y[1].Tooltip)),s[s.length]=ur("hyperlink",null,g))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=xve(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=Ji("ignoredErrors",ur("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(p=is(n,-1,"../drawings/drawing"+(e+1)+".xml",An.DRAW),s[s.length]=ur("drawing",null,{"r:id":"rId"+p}),c["!drawing"]=f),c["!comments"].length>0&&(p=is(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",An.VML),s[s.length]=ur("legacyDrawing",null,{"r:id":"rId"+p}),c["!legacy"]=p),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Nve(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=s/20),r}function Ave(e,t,r){var n=Rt(145),s=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var a=320;s.hpx?a=Wv(s.hpx)*20:s.hpt&&(a=s.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,g=d<<10;g<d+1<<10;++g){u.c=g;var p=Array.isArray(r)?(r[u.r]||[])[u.c]:r[en(u)];p&&(f<0&&(f=g),h=g)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,h))}var y=n.l;return n.l=c,n.write_shift(4,o),n.l=y,n.length>n.l?n.slice(0,n.l):n}function jve(e,t,r,n){var s=Ave(n,r,t);(s.length>17||(t["!rows"]||[])[n])&&Vt(e,0,s)}var Pve=ag,Fve=P1;function Mve(){}function Ove(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Ihe(e),r}function Dve(e,t,r){r==null&&(r=Rt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return q4({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),uG(e,r),r.slice(0,r.l)}function Rve(e){var t=Mc(e);return[t]}function Ive(e,t,r){return r==null&&(r=Rt(8)),rg(t,r)}function Lve(e){var t=ng(e);return[t]}function Bve(e,t,r){return r==null&&(r=Rt(4)),sg(t,r)}function $ve(e){var t=Mc(e),r=e.read_shift(1);return[t,r,"b"]}function Uve(e,t,r){return r==null&&(r=Rt(9)),rg(t,r),r.write_shift(1,e.v?1:0),r}function zve(e){var t=ng(e),r=e.read_shift(1);return[t,r,"b"]}function Wve(e,t,r){return r==null&&(r=Rt(5)),sg(t,r),r.write_shift(1,e.v?1:0),r}function Hve(e){var t=Mc(e),r=e.read_shift(1);return[t,r,"e"]}function Gve(e,t,r){return r==null&&(r=Rt(9)),rg(t,r),r.write_shift(1,e.v),r}function Vve(e){var t=ng(e),r=e.read_shift(1);return[t,r,"e"]}function qve(e,t,r){return r==null&&(r=Rt(8)),sg(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function Kve(e){var t=Mc(e),r=e.read_shift(4);return[t,r,"s"]}function Yve(e,t,r){return r==null&&(r=Rt(12)),rg(t,r),r.write_shift(4,t.v),r}function Xve(e){var t=ng(e),r=e.read_shift(4);return[t,r,"s"]}function Jve(e,t,r){return r==null&&(r=Rt(8)),sg(t,r),r.write_shift(4,t.v),r}function Qve(e){var t=Mc(e),r=xo(e);return[t,r,"n"]}function Zve(e,t,r){return r==null&&(r=Rt(16)),rg(t,r),$m(e.v,r),r}function gV(e){var t=ng(e),r=xo(e);return[t,r,"n"]}function e2e(e,t,r){return r==null&&(r=Rt(12)),sg(t,r),$m(e.v,r),r}function t2e(e){var t=Mc(e),r=_E(e);return[t,r,"n"]}function r2e(e,t,r){return r==null&&(r=Rt(12)),rg(t,r),dG(e.v,r),r}function n2e(e){var t=ng(e),r=_E(e);return[t,r,"n"]}function s2e(e,t,r){return r==null&&(r=Rt(8)),sg(t,r),dG(e.v,r),r}function a2e(e){var t=Mc(e),r=vE(e);return[t,r,"is"]}function i2e(e){var t=Mc(e),r=wo(e);return[t,r,"str"]}function o2e(e,t,r){return r==null&&(r=Rt(12+4*e.v.length)),rg(t,r),Ei(e.v,r),r.length>r.l?r.slice(0,r.l):r}function l2e(e){var t=ng(e),r=wo(e);return[t,r,"str"]}function c2e(e,t,r){return r==null&&(r=Rt(8+4*e.v.length)),sg(t,r),Ei(e.v,r),r.length>r.l?r.slice(0,r.l):r}function u2e(e,t,r){var n=e.l+t,s=Mc(e);s.r=r["!row"];var a=e.read_shift(1),i=[s,a,"b"];if(r.cellFormula){e.l+=2;var o=bS(e,n-e.l,r);i[3]=mo(o,null,s,r.supbooks,r)}else e.l=n;return i}function d2e(e,t,r){var n=e.l+t,s=Mc(e);s.r=r["!row"];var a=e.read_shift(1),i=[s,a,"e"];if(r.cellFormula){e.l+=2;var o=bS(e,n-e.l,r);i[3]=mo(o,null,s,r.supbooks,r)}else e.l=n;return i}function f2e(e,t,r){var n=e.l+t,s=Mc(e);s.r=r["!row"];var a=xo(e),i=[s,a,"n"];if(r.cellFormula){e.l+=2;var o=bS(e,n-e.l,r);i[3]=mo(o,null,s,r.supbooks,r)}else e.l=n;return i}function h2e(e,t,r){var n=e.l+t,s=Mc(e);s.r=r["!row"];var a=wo(e),i=[s,a,"str"];if(r.cellFormula){e.l+=2;var o=bS(e,n-e.l,r);i[3]=mo(o,null,s,r.supbooks,r)}else e.l=n;return i}var m2e=ag,g2e=P1;function p2e(e,t){return t==null&&(t=Rt(4)),t.write_shift(4,e),t}function x2e(e,t){var r=e.l+t,n=ag(e),s=bE(e),a=wo(e),i=wo(e),o=wo(e);e.l=r;var c={rfx:n,relId:s,loc:a,display:o};return i&&(c.Tooltip=i),c}function y2e(e,t){var r=Rt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));P1({s:ta(e[0]),e:ta(e[0])},r),wE("rId"+t,r);var n=e[1].Target.indexOf("#"),s=n==-1?"":e[1].Target.slice(n+1);return Ei(s||"",r),Ei(e[1].Tooltip||"",r),Ei("",r),r.slice(0,r.l)}function v2e(){}function b2e(e,t,r){var n=e.l+t,s=fG(e),a=e.read_shift(1),i=[s];if(i[2]=a,r.cellFormula){var o=Hye(e,n-e.l,r);i[1]=o}else e.l=n;return i}function w2e(e,t,r){var n=e.l+t,s=ag(e),a=[s];if(r.cellFormula){var i=Vye(e,n-e.l,r);a[1]=i,e.l=n}else e.l=n;return a}function _2e(e,t,r){r==null&&(r=Rt(18));var n=wS(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var pV=["left","right","top","bottom","header","footer"];function S2e(e){var t={};return pV.forEach(function(r){t[r]=xo(e)}),t}function k2e(e,t){return t==null&&(t=Rt(48)),vm(e),pV.forEach(function(r){$m(e[r],t)}),t}function C2e(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function T2e(e,t,r){r==null&&(r=Rt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function E2e(e){var t=Rt(24);return t.write_shift(4,4),t.write_shift(4,1),P1(e,t),t}function N2e(e,t){return t==null&&(t=Rt(66)),t.write_shift(2,e.password?NE(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function A2e(){}function j2e(){}function P2e(e,t,r,n,s,a,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var c=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,g,p,y,v,C,S,w,T,N,A=[];o.biff=12,o["!row"]=0;var P=0,j=!1,F=[],R={},L=o.supbooks||s.supbooks||[[]];if(L.sharedf=R,L.arrayf=F,L.SheetNames=s.SheetNames||s.Sheets.map(function(X){return X.name}),!o.supbooks&&(o.supbooks=L,s.Names))for(var V=0;V<s.Names.length;++V)L[0][V+1]=s.Names[V];var Z=[],Y=[],re=!1;Hv[16]={n:"BrtShortReal",f:gV};var ue;if(E0(e,function(I,B,W){if(!h)switch(W){case 148:u=I;break;case 0:g=I,o.sheetRows&&o.sheetRows<=g.r&&(h=!0),T=Fa(v=g.r),o["!row"]=g.r,(I.hidden||I.hpt||I.level!=null)&&(I.hpt&&(I.hpx=e1(I.hpt)),Y[I.r]=I);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(p={t:I[2]},I[2]){case"n":p.v=I[1];break;case"s":w=iv[I[1]],p.v=w.t,p.r=w.r;break;case"b":p.v=!!I[1];break;case"e":p.v=I[1],o.cellText!==!1&&(p.w=N0[p.v]);break;case"str":p.t="s",p.v=I[1];break;case"is":p.t="s",p.v=I[1].t;break}if((y=i.CellXf[I[0].iStyleRef])&&fV(p,y.numFmtId,null,o,a,i),C=I[0].c==-1?C+1:I[0].c,o.dense?(c[v]||(c[v]=[]),c[v][C]=p):c[ea(C)+T]=p,o.cellFormula){for(j=!1,P=0;P<F.length;++P){var D=F[P];g.r>=D[0].s.r&&g.r<=D[0].e.r&&C>=D[0].s.c&&C<=D[0].e.c&&(p.F=wn(D[0]),j=!0)}!j&&I.length>3&&(p.f=I[3])}if(d.s.r>g.r&&(d.s.r=g.r),d.s.c>C&&(d.s.c=C),d.e.r<g.r&&(d.e.r=g.r),d.e.c<C&&(d.e.c=C),o.cellDates&&y&&p.t=="n"&&N1(Qr[y.numFmtId])){var U=im(p.v);U&&(p.t="d",p.v=new Date(U.y,U.m-1,U.d,U.H,U.M,U.S,U.u))}ue&&(ue.type=="XLDAPR"&&(p.D=!0),ue=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;p={t:"z",v:void 0},C=I[0].c==-1?C+1:I[0].c,o.dense?(c[v]||(c[v]=[]),c[v][C]=p):c[ea(C)+T]=p,d.s.r>g.r&&(d.s.r=g.r),d.s.c>C&&(d.s.c=C),d.e.r<g.r&&(d.e.r=g.r),d.e.c<C&&(d.e.c=C),ue&&(ue.type=="XLDAPR"&&(p.D=!0),ue=void 0);break;case 176:A.push(I);break;case 49:ue=((o.xlmeta||{}).Cell||[])[I-1];break;case 494:var q=n["!id"][I.relId];for(q?(I.Target=q.Target,I.loc&&(I.Target+="#"+I.loc),I.Rel=q):I.relId==""&&(I.Target="#"+I.loc),v=I.rfx.s.r;v<=I.rfx.e.r;++v)for(C=I.rfx.s.c;C<=I.rfx.e.c;++C)o.dense?(c[v]||(c[v]=[]),c[v][C]||(c[v][C]={t:"z",v:void 0}),c[v][C].l=I):(S=en({c:C,r:v}),c[S]||(c[S]={t:"z",v:void 0}),c[S].l=I);break;case 426:if(!o.cellFormula)break;F.push(I),N=o.dense?c[v][C]:c[ea(C)+T],N.f=mo(I[1],d,{r:g.r,c:C},L,o),N.F=wn(I[0]);break;case 427:if(!o.cellFormula)break;R[en(I[0].s)]=I[1],N=o.dense?c[v][C]:c[ea(C)+T],N.f=mo(I[1],d,{r:g.r,c:C},L,o);break;case 60:if(!o.cellStyles)break;for(;I.e>=I.s;)Z[I.e--]={width:I.w/256,hidden:!!(I.flags&1),level:I.level},re||(re=!0,AE(I.w/256)),Xf(Z[I.e+1]);break;case 161:c["!autofilter"]={ref:wn(I)};break;case 476:c["!margins"]=I;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),I.name&&(s.Sheets[r].CodeName=I.name),(I.above||I.left)&&(c["!outline"]={above:I.above,left:I.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),I.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!B.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+W.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=wn(u||d)),o.sheetRows&&c["!ref"]){var z=Wn(c["!ref"]);o.sheetRows<=+z.e.r&&(z.e.r=o.sheetRows-1,z.e.r>d.e.r&&(z.e.r=d.e.r),z.e.r<z.s.r&&(z.s.r=z.e.r),z.e.c>d.e.c&&(z.e.c=d.e.c),z.e.c<z.s.c&&(z.s.c=z.e.c),c["!fullref"]=c["!ref"],c["!ref"]=wn(z))}return A.length>0&&(c["!merges"]=A),Z.length>0&&(c["!cols"]=Z),Y.length>0&&(c["!rows"]=Y),c}function F2e(e,t,r,n,s,a,i){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Ds(t),t.z=t.z||Qr[14],t.v=li(Os(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var c={r,c:n};switch(c.s=uh(s.cellXfs,t,s),t.l&&a["!links"].push([en(c),t.l]),t.c&&a["!comments"].push([en(c),t.c]),t.t){case"s":case"str":return s.bookSST?(o=OE(s.Strings,t.v,s.revStrings),c.t="s",c.v=o,i?Vt(e,18,Jve(t,c)):Vt(e,7,Yve(t,c))):(c.t="str",i?Vt(e,17,c2e(t,c)):Vt(e,6,o2e(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?Vt(e,13,s2e(t,c)):Vt(e,2,r2e(t,c)):i?Vt(e,16,e2e(t,c)):Vt(e,5,Zve(t,c)),!0;case"b":return c.t="b",i?Vt(e,15,Wve(t,c)):Vt(e,4,Uve(t,c)),!0;case"e":return c.t="e",i?Vt(e,14,qve(t,c)):Vt(e,3,Gve(t,c)),!0}return i?Vt(e,12,Bve(t,c)):Vt(e,1,Ive(t,c)),!0}function M2e(e,t,r,n){var s=Wn(t["!ref"]||"A1"),a,i="",o=[];Vt(e,145);var c=Array.isArray(t),u=s.e.r;t["!rows"]&&(u=Math.max(s.e.r,t["!rows"].length-1));for(var d=s.s.r;d<=u;++d){i=Fa(d),jve(e,t,s,d);var f=!1;if(d<=s.e.r)for(var h=s.s.c;h<=s.e.c;++h){d===s.s.r&&(o[h]=ea(h)),a=o[h]+i;var g=c?(t[d]||[])[h]:t[a];if(!g){f=!1;continue}f=F2e(e,g,d,h,n,t,f)}}Vt(e,146)}function O2e(e,t){!t||!t["!merges"]||(Vt(e,177,p2e(t["!merges"].length)),t["!merges"].forEach(function(r){Vt(e,176,g2e(r))}),Vt(e,178))}function D2e(e,t){!t||!t["!cols"]||(Vt(e,390),t["!cols"].forEach(function(r,n){r&&Vt(e,60,_2e(n,r))}),Vt(e,391))}function R2e(e,t){!t||!t["!ref"]||(Vt(e,648),Vt(e,649,E2e(Wn(t["!ref"]))),Vt(e,650))}function I2e(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var s=is(r,-1,n[1].Target.replace(/#.*$/,""),An.HLINK);Vt(e,494,y2e(n,s))}}),delete t["!links"]}function L2e(e,t,r,n){if(t["!comments"].length>0){var s=is(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",An.VML);Vt(e,551,wE("rId"+s)),t["!legacy"]=s}}function B2e(e,t,r,n){if(t["!autofilter"]){var s=t["!autofilter"],a=typeof s.ref=="string"?s.ref:wn(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=pl(a);o.s.r==o.e.r&&(o.e.r=pl(t["!ref"]).e.r,a=wn(o));for(var c=0;c<i.length;++c){var u=i[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+a;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Vt(e,161,P1(Wn(a))),Vt(e,162)}}function $2e(e,t,r){Vt(e,133),Vt(e,137,T2e(t,r)),Vt(e,138),Vt(e,134)}function U2e(e,t){t["!protect"]&&Vt(e,535,N2e(t["!protect"]))}function z2e(e,t,r,n){var s=gl(),a=r.SheetNames[e],i=r.Sheets[a]||{},o=a;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var c=Wn(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Vt(s,129),(r.vbaraw||i["!outline"])&&Vt(s,147,Dve(o,i["!outline"])),Vt(s,148,Fve(c)),$2e(s,i,r.Workbook),D2e(s,i),M2e(s,i,e,t),U2e(s,i),B2e(s,i,r,e),O2e(s,i),I2e(s,i,n),i["!margins"]&&Vt(s,476,k2e(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&R2e(s,i),L2e(s,i,e,n),Vt(s,130),s.end()}function W2e(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var i=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var s=Un((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){n=a.replace(/<.*?>/g,"")}),[t,s,n]}function H2e(e,t,r,n,s,a){var i=a||{"!type":"chart"};if(!e)return a;var o=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=W2e(f);d.s.r=d.s.c=0,d.e.c=o,u=ea(o),h[0].forEach(function(g,p){i[u+Fa(p)]={t:"n",v:g,z:h[1]},c=p}),d.e.r<c&&(d.e.r=c),++o}),o>0&&(i["!ref"]=wn(d)),i}function G2e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(hV);return o&&DE(o[0],a,s,r),(i=e.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=i[1]),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}function V2e(e,t){e.l+=10;var r=wo(e);return{name:r}}function q2e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i=!1;return E0(e,function(c,u,d){switch(d){case 550:a["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}var RE=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],K2e=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Y2e=[],X2e=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function gD(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var a=t[s];if(n[a[0]]==null)n[a[0]]=a[1];else switch(a[2]){case"bool":typeof n[a[0]]=="string"&&(n[a[0]]=Ps(n[a[0]]));break;case"int":typeof n[a[0]]=="string"&&(n[a[0]]=parseInt(n[a[0]],10));break}}}function pD(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ps(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function xV(e){pD(e.WBProps,RE),pD(e.CalcPr,X2e),gD(e.WBView,K2e),gD(e.Sheets,Y2e),Bp.date1904=Ps(e.WBProps.date1904)}function J2e(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ps(e.Workbook.WBProps.date1904)?"true":"false"}var Q2e="][*?/\\".split("");function yV(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Q2e.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Z2e(e,t,r){e.forEach(function(n,s){yV(n);for(var a=0;a<s;++a)if(n==e[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[s]&&t[s].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function ebe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];Z2e(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Jye(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var tbe=/<\w+:workbook/;function rbe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",a={},i=0;if(e.replace(ko,function(c,u){var d=sn(c);switch(cd(d[0])){case"<?xml":break;case"<workbook":c.match(tbe)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":RE.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Ps(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=ps(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Un(ps(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":a={},a.Name=ps(d.name),d.comment&&(a.Comment=d.comment),d.localSheetId&&(a.Sheet=+d.localSheetId),Ps(d.hidden||"0")&&(a.Hidden=!0),i=u+c.length;break;case"</definedName>":a.Ref=Un(ps(e.slice(i,u))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),tg.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return xV(r),r}function vV(e){var t=[Ra];t[t.length]=ur("workbook",null,{xmlns:tg[0],"xmlns:r":ai.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(RE.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=ur("workbookPr",null,n);var s=e.Workbook&&e.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",a=0;a!=e.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==e.SheetNames.length&&(a=0),t[t.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",a=0;a!=e.SheetNames.length;++a){var i={name:cs(e.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=ur("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(t[t.length]=ur("definedName",cs(o.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function nbe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=Y8(e),r.name=wo(e),r}function sbe(e,t){return t||(t=Rt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),wE(e.strRelID,t),Ei(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function abe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?wo(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function ibe(e,t){t||(t=Rt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),uG(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function obe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function lbe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),a=Lhe(e),i=Gye(e,0,r),o=bE(e);e.l=n;var c={Name:a,Ptg:i};return s<268435455&&(c.Sheet=s),o&&(c.Comment=o),c}function cbe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var a=[],i=[[]];return i.SheetNames=[],i.XTI=[],Hv[16]={n:"BrtFRTArchID$",f:obe},E0(e,function(c,u,d){switch(d){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=mo(c.Ptg,null,null,i,t),delete t.SID,delete c.Ptg,a.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,c]):i[0]=[d,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(d),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),xV(r),r.Names=a,r.supbooks=i,r}function ube(e,t){Vt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Vt(e,156,sbe(s))}Vt(e,144)}function dbe(e,t){t||(t=Rt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Ei("SheetJS",t),Ei($4.version,t),Ei($4.version,t),Ei("7262",t),t.length>t.l?t.slice(0,t.l):t}function fbe(e,t){t||(t=Rt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function hbe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,s=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&a==-1&&(a=n);a>s||(Vt(e,135),Vt(e,158,fbe(s)),Vt(e,136))}}function mbe(e,t){var r=gl();return Vt(r,131),Vt(r,128,dbe()),Vt(r,153,ibe(e.Workbook&&e.Workbook.WBProps||null)),hbe(r,e),ube(r,e),Vt(r,132),r.end()}function gbe(e,t,r){return t.slice(-4)===".bin"?cbe(e,r):rbe(e,r)}function pbe(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?P2e(e,n,r,s,a,i,o):lve(e,n,r,s,a,i,o)}function xbe(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?q2e(e,n,r,s,a):G2e(e,n,r,s,a)}function ybe(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?bxe():wxe()}function vbe(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?yxe():vxe()}function bbe(e,t,r,n){return t.slice(-4)===".bin"?g1e(e,r,n):n1e(e,r,n)}function wbe(e,t,r){return ZG(e,r)}function _be(e,t,r){return t.slice(-4)===".bin"?_pe(e,r):vpe(e,r)}function Sbe(e,t,r){return t.slice(-4)===".bin"?hxe(e,r):sxe(e,r)}function kbe(e,t,r){return t.slice(-4)===".bin"?txe(e):Z1e(e)}function Cbe(e,t,r,n){return r.slice(-4)===".bin"?rxe(e,t,r,n):void 0}function Tbe(e,t,r){return t.slice(-4)===".bin"?X1e(e,t,r):Q1e(e,t,r)}function Ebe(e,t,r){return(t.slice(-4)===".bin"?mbe:vV)(e)}function Nbe(e,t,r,n,s){return(t.slice(-4)===".bin"?z2e:mV)(e,r,n,s)}function Abe(e,t,r){return(t.slice(-4)===".bin"?C1e:JG)(e,r)}function jbe(e,t,r){return(t.slice(-4)===".bin"?Cpe:WG)(e,r)}function Pbe(e,t,r){return(t.slice(-4)===".bin"?mxe:rV)(e)}function Fbe(e){return(e.slice(-4)===".bin"?J1e:eV)()}var bV=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,wV=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Zc(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match(bV),a,i,o,c;if(s)for(c=0;c!=s.length;++c)a=s[c].match(wV),(i=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),n[o]=a[2].slice(1,a[2].length-1));return n}function Mbe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(bV),s,a,i,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(wV),(a=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(a+1),r[i]=s[2].slice(1,s[2].length-1));return r}var lv;function Obe(e,t){var r=lv[e]||Un(e);return r==="General"?Lm(t):Nc(r,t)}function Dbe(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Ps(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=Os(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Un(t)]=s}function Rbe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||N0[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Dv(e.v):e.w=Lm(e.v):e.w=Obe(t||"General",e.v)}catch(a){if(r.WTF)throw a}try{var n=lv[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&N1(n)){var s=im(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(a){if(r.WTF)throw a}}}function Ibe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=Ype[n.Pattern]||n.Pattern)}e[t.ID]=t}function Lbe(e,t,r,n,s,a,i,o,c,u){var d="General",f=n.StyleID,h={};u=u||{};var g=[],p=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&i&&(f=i.StyleID);a[f]!==void 0&&(a[f].nf&&(d=a[f].nf),a[f].Interior&&g.push(a[f].Interior),!!a[f].Parent);)f=a[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ps(e);break;case"String":n.t="s",n.r=MO(Un(e)),n.v=e.indexOf("<")>-1?Un(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Os(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Un(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=gG[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=MO(t||e));break}if(Rbe(n,d,u),u.cellFormula!==!1)if(n.Formula){var y=Un(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=Lp(y,s),delete n.Formula,n.ArrayRange=="RC"?n.F=Lp("RC:RC",s):n.ArrayRange&&(n.F=Lp(n.ArrayRange,s),c.push([Wn(n.F),n.F]))}else for(p=0;p<c.length;++p)s.r>=c[p][0].s.r&&s.r<=c[p][0].e.r&&s.c>=c[p][0].s.c&&s.c<=c[p][0].e.c&&(n.F=c[p][1]);u.cellStyles&&(g.forEach(function(v){!h.patternType&&v.patternType&&(h.patternType=v.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function Bbe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function J5(e,t){var r=t||{};A1();var n=$y(mE(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=ps(n));var s=n.slice(0,1024).toLowerCase(),a=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var i=Ds(r);return i.type="string",Zp.to_workbook(n,i)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(tt){s.indexOf("<"+tt)>=0&&(a=!0)}),a)return kwe(n,r);lv={"General Number":"General","General Date":Qr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Qr[15],"Short Date":Qr[14],"Long Time":Qr[19],"Medium Time":Qr[18],"Short Time":Qr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Qr[2],Standard:Qr[4],Percent:Qr[10],Scientific:Qr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],u,d={},f=[],h=r.dense?[]:{},g="",p={},y={},v=Zc('<Data ss:Type="String">'),C=0,S=0,w=0,T={s:{r:2e6,c:2e6},e:{r:0,c:0}},N={},A={},P="",j=0,F=[],R={},L={},V=0,Z=[],Y=[],re={},ue=[],z,X=!1,I=[],B=[],W={},D=0,U=0,q={Sheets:[],WBProps:{date1904:!1}},H={};Lv.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var te="";o=Lv.exec(n);)switch(o[3]=(te=o[3]).toLowerCase()){case"data":if(te=="data"){if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?Lbe(n.slice(C,o.index),P,v,c[c.length-1][0]=="comment"?re:p,{c:S,r:w},N,ue[S],y,I,r):(P="",v=Zc(o[0]),C=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(Y.length>0&&(p.c=Y),(!r.sheetRows||r.sheetRows>w)&&p.v!==void 0&&(r.dense?(h[w]||(h[w]=[]),h[w][S]=p):h[ea(S)+Fa(w)]=p),p.HRef&&(p.l={Target:Un(p.HRef)},p.HRefScreenTip&&(p.l.Tooltip=p.HRefScreenTip),delete p.HRef,delete p.HRefScreenTip),(p.MergeAcross||p.MergeDown)&&(D=S+(parseInt(p.MergeAcross,10)|0),U=w+(parseInt(p.MergeDown,10)|0),F.push({s:{c:S,r:w},e:{c:D,r:U}})),!r.sheetStubs)p.MergeAcross?S=D+1:++S;else if(p.MergeAcross||p.MergeDown){for(var Q=S;Q<=D;++Q)for(var ae=w;ae<=U;++ae)(Q>S||ae>w)&&(r.dense?(h[ae]||(h[ae]=[]),h[ae][Q]={t:"z"}):h[ea(Q)+Fa(ae)]={t:"z"});S=D+1}else++S;else p=Mbe(o[0]),p.Index&&(S=+p.Index-1),S<T.s.c&&(T.s.c=S),S>T.e.c&&(T.e.c=S),o[0].slice(-2)==="/>"&&++S,Y=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(w<T.s.r&&(T.s.r=w),w>T.e.r&&(T.e.r=w),o[0].slice(-2)==="/>"&&(y=Zc(o[0]),y.Index&&(w=+y.Index-1)),S=0,++w):(y=Zc(o[0]),y.Index&&(w=+y.Index-1),W={},(y.AutoFitHeight=="0"||y.Height)&&(W.hpx=parseInt(y.Height,10),W.hpt=Wv(W.hpx),B[w]=W),y.Hidden=="1"&&(W.hidden=!0,B[w]=W));break;case"worksheet":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(g),T.s.r<=T.e.r&&T.s.c<=T.e.c&&(h["!ref"]=wn(T),r.sheetRows&&r.sheetRows<=T.e.r&&(h["!fullref"]=h["!ref"],T.e.r=r.sheetRows-1,h["!ref"]=wn(T))),F.length&&(h["!merges"]=F),ue.length>0&&(h["!cols"]=ue),B.length>0&&(h["!rows"]=B),d[g]=h}else T={s:{r:2e6,c:2e6},e:{r:0,c:0}},w=S=0,c.push([o[3],!1]),u=Zc(o[0]),g=Un(u.Name),h=r.dense?[]:{},F=[],I=[],B=[],H={name:g,Hidden:0},q.Sheets.push(H);break;case"table":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),ue=[],X=!1}break;case"style":o[1]==="/"?Ibe(N,A,r):A=Zc(o[0]);break;case"numberformat":A.nf=Un(Zc(o[0]).Format||"General"),lv[A.nf]&&(A.nf=lv[A.nf]);for(var ce=0;ce!=392&&Qr[ce]!=A.nf;++ce);if(ce==392){for(ce=57;ce!=392;++ce)if(Qr[ce]==null){a0(A.nf,ce);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(z=Zc(o[0]),z.Hidden&&(z.hidden=!0,delete z.Hidden),z.Width&&(z.wpx=parseInt(z.Width,10)),!X&&z.wpx>10){X=!0,go=YG;for(var me=0;me<ue.length;++me)ue[me]&&Xf(ue[me])}X&&Xf(z),ue[z.Index-1||ue.length]=z;for(var xe=0;xe<+z.Span;++xe)ue[ue.length]=Ds(z);break;case"namedrange":if(o[1]==="/")break;q.Names||(q.Names=[]);var se=sn(o[0]),De={Name:se.Name,Ref:Lp(se.RefersTo.slice(1),{r:0,c:0})};q.Sheets.length>0&&(De.Sheet=q.Sheets.length-1),q.Names.push(De);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?P+=n.slice(j,o.index):j=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;A.Interior=Zc(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?cme(R,te,n.slice(V,o.index)):V=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));Bbe(re),Y.push(re)}else c.push([o[3],!1]),u=Zc(o[0]),re={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var He=Zc(o[0]);h["!autofilter"]={ref:Lp(He.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return wD(n,r);var rt=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:rt=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:rt=!1}break;case"excelworkbook":switch(o[3]){case"date1904":q.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:rt=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:rt=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(V,o.index)){case"SheetHidden":H.Hidden=1;break;case"SheetVeryHidden":H.Hidden=2;break}else V=o.index+o[0].length;break;case"header":h["!margins"]||vm(h["!margins"]={},"xlml"),isNaN(+sn(o[0]).Margin)||(h["!margins"].header=+sn(o[0]).Margin);break;case"footer":h["!margins"]||vm(h["!margins"]={},"xlml"),isNaN(+sn(o[0]).Margin)||(h["!margins"].footer=+sn(o[0]).Margin);break;case"pagemargins":var _t=sn(o[0]);h["!margins"]||vm(h["!margins"]={},"xlml"),isNaN(+_t.Top)||(h["!margins"].top=+_t.Top),isNaN(+_t.Left)||(h["!margins"].left=+_t.Left),isNaN(+_t.Right)||(h["!margins"].right=+_t.Right),isNaN(+_t.Bottom)||(h["!margins"].bottom=+_t.Bottom);break;case"displayrighttoleft":q.Views||(q.Views=[]),q.Views[0]||(q.Views[0]={}),q.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:rt=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:rt=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:rt=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:rt=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:rt=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:rt=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:rt=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:rt=!1}break;case"smarttags":break;default:rt=!1;break}if(rt||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Dbe(L,te,Z,n.slice(V,o.index)):(Z=o,V=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var Ke={};return!r.bookSheets&&!r.bookProps&&(Ke.Sheets=d),Ke.SheetNames=f,Ke.Workbook=q,Ke.SSF=Ds(Qr),Ke.Props=R,Ke.Custprops=L,Ke}function rC(e,t){switch(LE(t=t||{}),t.type||"base64"){case"base64":return J5(Wl(e),t);case"binary":case"buffer":case"file":return J5(e,t);case"array":return J5(lh(e),t)}}function $be(e,t){var r=[];return e.Props&&r.push(ume(e.Props,t)),e.Custprops&&r.push(dme(e.Props,e.Custprops)),r.join("")}function Ube(){return""}function zbe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,s){var a=[];a.push(ur("NumberFormat",null,{"ss:Format":cs(Qr[n.numFmtId])}));var i={"ss:ID":"s"+(21+s)};r.push(ur("Style",a.join(""),i))}),ur("Styles",r.join(""))}function _V(e){return ur("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+FE(e.Ref,{r:0,c:0})})}function Wbe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var s=t[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(_V(s)))}return ur("Names",r.join(""))}function Hbe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||a.push(_V(o)))}return a.join("")}function Gbe(e,t,r,n){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(ur("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(ur("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(ur("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(ur("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(Ji("ProtectContents","True")),e["!protect"].objects&&s.push(Ji("ProtectObjects","True")),e["!protect"].scenarios&&s.push(Ji("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(Ji("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(Ji("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&s.push("<"+i[1]+"/>")})),s.length==0?"":ur("WorksheetOptions",s.join(""),{xmlns:Ml.x})}function Vbe(e){return e.map(function(t){var r=hhe(t.t||""),n=ur("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return ur("Comment",n,{"ss:Author":t.a})}).join("")}function qbe(e,t,r,n,s,a,i){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+cs(FE(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var c=ta(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=cs(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=cs(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=N0[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Qr[14]);break;case"s":f="String",h=fhe(e.v||"");break}var g=uh(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=i.c+1;var p=e.v!=null?h:"",y=e.t=="z"?"":'<Data ss:Type="'+f+'">'+p+"</Data>";return(e.c||[]).length>0&&(y+=Vbe(e.c)),ur("Cell",y,o)}function Kbe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=e1(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Ybe(e,t,r,n){if(!e["!ref"])return"";var s=Wn(e["!ref"]),a=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(v,C){Xf(v);var S=!!v.width,w=wS(C,v),T={"ss:Index":C+1};S&&(T["ss:Width"]=Uv(w.width)),v.hidden&&(T["ss:Hidden"]="1"),o.push(ur("Column",null,T))});for(var c=Array.isArray(e),u=s.s.r;u<=s.e.r;++u){for(var d=[Kbe(u,(e["!rows"]||[])[u])],f=s.s.c;f<=s.e.c;++f){var h=!1;for(i=0;i!=a.length;++i)if(!(a[i].s.c>f)&&!(a[i].s.r>u)&&!(a[i].e.c<f)&&!(a[i].e.r<u)){(a[i].s.c!=f||a[i].s.r!=u)&&(h=!0);break}if(!h){var g={r:u,c:f},p=en(g),y=c?(e[u]||[])[f]:e[p];d.push(qbe(y,p,e,t,r,n,g))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function Xbe(e,t,r){var n=[],s=r.SheetNames[e],a=r.Sheets[s],i=a?Hbe(a,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=a?Ybe(a,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(Gbe(a,t,e,r)),n.join("")}function Jbe(e,t){t||(t={}),e.SSF||(e.SSF=Ds(Qr)),e.SSF&&(A1(),mS(e.SSF),t.revssf=pS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],uh(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push($be(e,t)),r.push(Ube()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(ur("Worksheet",Xbe(n,t,e),{"ss:Name":cs(e.SheetNames[n])}));return r[2]=zbe(e,t),r[3]=Wbe(e),Ra+ur("Workbook",r.join(""),{xmlns:Ml.ss,"xmlns:o":Ml.o,"xmlns:x":Ml.x,"xmlns:ss":Ml.ss,"xmlns:dt":Ml.dt,"xmlns:html":Ml.html})}function Qbe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=Whe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=Hhe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var Zbe=[60,1084,2066,2165,2175];function ewe(e,t,r,n,s){var a=n,i=[],o=r.slice(r.l,r.l+a);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}i.push(o),r.l+=a;for(var c=Qd(r,r.l),u=nC[c],d=0;u!=null&&Zbe.indexOf(c)>-1;)a=Qd(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),o=r.slice(d,r.l+4+a),i.push(o),r.l+=4+a,u=nC[c=Qd(r,r.l)];var f=Ci(i);Ki(f,0);var h=0;f.lens=[];for(var g=0;g<i.length;++g)f.lens.push(h),h+=i[g].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,s)}function Iu(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Qr[n])}catch(a){if(t.WTF)throw a}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||N0[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Dv(e.v):e.w=Lm(e.v):e.w=Nc(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(a){if(t.WTF)throw a}if(t.cellDates&&n&&e.t=="n"&&N1(Qr[n]||String(n))){var s=im(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Tw(e,t,r){return{v:e,ixfe:t,t:r}}function twe(e,t){var r={opts:{}},n={},s=t.dense?[]:{},a={},i={},o=null,c=[],u="",d={},f,h="",g,p,y,v,C={},S=[],w,T,N=[],A=[],P={Sheets:[],WBProps:{date1904:!1},Views:[{}]},j={},F=function(Ge){return Ge<8?pm[Ge]:Ge<64&&A[Ge-8]||pm[Ge]},R=function(Ge,Xe,Et){var Ut=Xe.XF.data;if(!(!Ut||!Ut.patternType||!Et||!Et.cellStyles)){Xe.s={},Xe.s.patternType=Ut.patternType;var Wt;(Wt=$v(F(Ut.icvFore)))&&(Xe.s.fgColor={rgb:Wt}),(Wt=$v(F(Ut.icvBack)))&&(Xe.s.bgColor={rgb:Wt})}},L=function(Ge,Xe,Et){if(!(W>1)&&!(Et.sheetRows&&Ge.r>=Et.sheetRows)){if(Et.cellStyles&&Xe.XF&&Xe.XF.data&&R(Ge,Xe,Et),delete Xe.ixfe,delete Xe.XF,f=Ge,h=en(Ge),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Ge.r<i.s.r&&(i.s.r=Ge.r),Ge.c<i.s.c&&(i.s.c=Ge.c),Ge.r+1>i.e.r&&(i.e.r=Ge.r+1),Ge.c+1>i.e.c&&(i.e.c=Ge.c+1),Et.cellFormula&&Xe.f){for(var Ut=0;Ut<S.length;++Ut)if(!(S[Ut][0].s.c>Ge.c||S[Ut][0].s.r>Ge.r)&&!(S[Ut][0].e.c<Ge.c||S[Ut][0].e.r<Ge.r)){Xe.F=wn(S[Ut][0]),(S[Ut][0].s.c!=Ge.c||S[Ut][0].s.r!=Ge.r)&&delete Xe.f,Xe.f&&(Xe.f=""+mo(S[Ut][1],i,Ge,I,V));break}}Et.dense?(s[Ge.r]||(s[Ge.r]=[]),s[Ge.r][Ge.c]=Xe):s[h]=Xe}},V={enc:!1,sbcch:0,snames:[],sharedf:C,arrayf:S,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(V.password=t.password);var Z,Y=[],re=[],ue=[],z=[],X=!1,I=[];I.SheetNames=V.snames,I.sharedf=V.sharedf,I.arrayf=V.arrayf,I.names=[],I.XTI=[];var B=0,W=0,D=0,U=[],q=[],H;V.codepage=1200,iu(1200);for(var te=!1;e.l<e.length-1;){var Q=e.l,ae=e.read_shift(2);if(ae===0&&B===10)break;var ce=e.l===e.length?0:e.read_shift(2),me=nC[ae];if(me&&me.f){if(t.bookSheets&&B===133&&ae!==133)break;if(B=ae,me.r===2||me.r==12){var xe=e.read_shift(2);if(ce-=2,!V.enc&&xe!==ae&&((xe&255)<<8|xe>>8)!==ae)throw new Error("rt mismatch: "+xe+"!="+ae);me.r==12&&(e.l+=10,ce-=10)}var se={};if(ae===10?se=me.f(e,ce,V):se=ewe(ae,me,e,ce,V),W==0&&[9,521,1033,2057].indexOf(B)===-1)continue;switch(ae){case 34:r.opts.Date1904=P.WBProps.date1904=se;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(V.enc||(e.l=0),V.enc=se,!t.password)throw new Error("File is password-protected");if(se.valid==null)throw new Error("Encryption scheme unsupported");if(!se.valid)throw new Error("Password is incorrect");break;case 92:V.lastuser=se;break;case 66:var De=Number(se);switch(De){case 21010:De=1200;break;case 32768:De=1e4;break;case 32769:De=1252;break}iu(V.codepage=De),te=!0;break;case 317:V.rrtabid=se;break;case 25:V.winlocked=se;break;case 439:r.opts.RefreshAll=se;break;case 12:r.opts.CalcCount=se;break;case 16:r.opts.CalcDelta=se;break;case 17:r.opts.CalcIter=se;break;case 13:r.opts.CalcMode=se;break;case 14:r.opts.CalcPrecision=se;break;case 95:r.opts.CalcSaveRecalc=se;break;case 15:V.CalcRefMode=se;break;case 2211:r.opts.FullCalc=se;break;case 129:se.fDialog&&(s["!type"]="dialog"),se.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),se.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:N.push(se);break;case 430:I.push([se]),I[I.length-1].XTI=[];break;case 35:case 547:I[I.length-1].push(se);break;case 24:case 536:H={Name:se.Name,Ref:mo(se.rgce,i,null,I,V)},se.itab>0&&(H.Sheet=se.itab-1),I.names.push(H),I[0]||(I[0]=[],I[0].XTI=[]),I[I.length-1].push(se),se.Name=="_xlnm._FilterDatabase"&&se.itab>0&&se.rgce&&se.rgce[0]&&se.rgce[0][0]&&se.rgce[0][0][0]=="PtgArea3d"&&(q[se.itab-1]={ref:wn(se.rgce[0][0][1][2])});break;case 22:V.ExternCount=se;break;case 23:I.length==0&&(I[0]=[],I[0].XTI=[]),I[I.length-1].XTI=I[I.length-1].XTI.concat(se),I.XTI=I.XTI.concat(se);break;case 2196:if(V.biff<8)break;H!=null&&(H.Comment=se[1]);break;case 18:s["!protect"]=se;break;case 19:se!==0&&V.WTF&&console.error("Password verifier: "+se);break;case 133:a[se.pos]=se,V.snames.push(se.name);break;case 10:{if(--W)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,s["!ref"]=wn(i),t.sheetRows&&t.sheetRows<=i.e.r){var He=i.e.r;i.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=wn(i),i.e.r=He}i.e.r++,i.e.c++}Y.length>0&&(s["!merges"]=Y),re.length>0&&(s["!objects"]=re),ue.length>0&&(s["!cols"]=ue),z.length>0&&(s["!rows"]=z),P.Sheets.push(j)}u===""?d=s:n[u]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(V.biff===8&&(V.biff={9:2,521:3,1033:4}[ae]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[se.BIFFVer]||8),V.biffguess=se.BIFFVer==0,se.BIFFVer==0&&se.dt==4096&&(V.biff=5,te=!0,iu(V.codepage=28591)),V.biff==8&&se.BIFFVer==0&&se.dt==16&&(V.biff=2),W++)break;if(s=t.dense?[]:{},V.biff<8&&!te&&(te=!0,iu(V.codepage=t.codepage||1252)),V.biff<5||se.BIFFVer==0&&se.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var rt={pos:e.l-ce,name:u};a[rt.pos]=rt,V.snames.push(u)}else u=(a[Q]||{name:""}).name;se.dt==32&&(s["!type"]="chart"),se.dt==64&&(s["!type"]="macro"),Y=[],re=[],V.arrayf=S=[],ue=[],z=[],X=!1,j={Hidden:(a[Q]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[se.r]||[])[se.c]:s[en({c:se.c,r:se.r})])&&++se.c,w={ixfe:se.ixfe,XF:N[se.ixfe]||{},v:se.val,t:"n"},D>0&&(w.z=U[w.ixfe>>8&63]),Iu(w,t,r.opts.Date1904),L({c:se.c,r:se.r},w,t);break;case 5:case 517:w={ixfe:se.ixfe,XF:N[se.ixfe],v:se.val,t:se.t},D>0&&(w.z=U[w.ixfe>>8&63]),Iu(w,t,r.opts.Date1904),L({c:se.c,r:se.r},w,t);break;case 638:w={ixfe:se.ixfe,XF:N[se.ixfe],v:se.rknum,t:"n"},D>0&&(w.z=U[w.ixfe>>8&63]),Iu(w,t,r.opts.Date1904),L({c:se.c,r:se.r},w,t);break;case 189:for(var _t=se.c;_t<=se.C;++_t){var Ke=se.rkrec[_t-se.c][0];w={ixfe:Ke,XF:N[Ke],v:se.rkrec[_t-se.c][1],t:"n"},D>0&&(w.z=U[w.ixfe>>8&63]),Iu(w,t,r.opts.Date1904),L({c:_t,r:se.r},w,t)}break;case 6:case 518:case 1030:{if(se.val=="String"){o=se;break}if(w=Tw(se.val,se.cell.ixfe,se.tt),w.XF=N[w.ixfe],t.cellFormula){var tt=se.formula;if(tt&&tt[0]&&tt[0][0]&&tt[0][0][0]=="PtgExp"){var Pe=tt[0][0][1][0],je=tt[0][0][1][1],Qe=en({r:Pe,c:je});C[Qe]?w.f=""+mo(se.formula,i,se.cell,I,V):w.F=((t.dense?(s[Pe]||[])[je]:s[Qe])||{}).F}else w.f=""+mo(se.formula,i,se.cell,I,V)}D>0&&(w.z=U[w.ixfe>>8&63]),Iu(w,t,r.opts.Date1904),L(se.cell,w,t),o=se}break;case 7:case 519:if(o)o.val=se,w=Tw(se,o.cell.ixfe,"s"),w.XF=N[w.ixfe],t.cellFormula&&(w.f=""+mo(o.formula,i,o.cell,I,V)),D>0&&(w.z=U[w.ixfe>>8&63]),Iu(w,t,r.opts.Date1904),L(o.cell,w,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{S.push(se);var vt=en(se[0].s);if(g=t.dense?(s[se[0].s.r]||[])[se[0].s.c]:s[vt],t.cellFormula&&g){if(!o||!vt||!g)break;g.f=""+mo(se[1],i,se[0],I,V),g.F=wn(se[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!o)break;C[en(o.cell)]=se[0],g=t.dense?(s[o.cell.r]||[])[o.cell.c]:s[en(o.cell)],(g||{}).f=""+mo(se[0],i,f,I,V)}}break;case 253:w=Tw(c[se.isst].t,se.ixfe,"s"),c[se.isst].h&&(w.h=c[se.isst].h),w.XF=N[w.ixfe],D>0&&(w.z=U[w.ixfe>>8&63]),Iu(w,t,r.opts.Date1904),L({c:se.c,r:se.r},w,t);break;case 513:t.sheetStubs&&(w={ixfe:se.ixfe,XF:N[se.ixfe],t:"z"},D>0&&(w.z=U[w.ixfe>>8&63]),Iu(w,t,r.opts.Date1904),L({c:se.c,r:se.r},w,t));break;case 190:if(t.sheetStubs)for(var Ot=se.c;Ot<=se.C;++Ot){var $t=se.ixfe[Ot-se.c];w={ixfe:$t,XF:N[$t],t:"z"},D>0&&(w.z=U[w.ixfe>>8&63]),Iu(w,t,r.opts.Date1904),L({c:Ot,r:se.r},w,t)}break;case 214:case 516:case 4:w=Tw(se.val,se.ixfe,"s"),w.XF=N[w.ixfe],D>0&&(w.z=U[w.ixfe>>8&63]),Iu(w,t,r.opts.Date1904),L({c:se.c,r:se.r},w,t);break;case 0:case 512:W===1&&(i=se);break;case 252:c=se;break;case 1054:if(V.biff==4){U[D++]=se[1];for(var Gt=0;Gt<D+163&&Qr[Gt]!=se[1];++Gt);Gt>=163&&a0(se[1],D+163)}else a0(se[1],se[0]);break;case 30:{U[D++]=se;for(var ir=0;ir<D+163&&Qr[ir]!=se;++ir);ir>=163&&a0(se,D+163)}break;case 229:Y=Y.concat(se);break;case 93:re[se.cmo[0]]=V.lastobj=se;break;case 438:V.lastobj.TxO=se;break;case 127:V.lastobj.ImData=se;break;case 440:for(v=se[0].s.r;v<=se[0].e.r;++v)for(y=se[0].s.c;y<=se[0].e.c;++y)g=t.dense?(s[v]||[])[y]:s[en({c:y,r:v})],g&&(g.l=se[1]);break;case 2048:for(v=se[0].s.r;v<=se[0].e.r;++v)for(y=se[0].s.c;y<=se[0].e.c;++y)g=t.dense?(s[v]||[])[y]:s[en({c:y,r:v})],g&&g.l&&(g.l.Tooltip=se[1]);break;case 28:{if(V.biff<=5&&V.biff>=2)break;g=t.dense?(s[se[0].r]||[])[se[0].c]:s[en(se[0])];var dt=re[se[2]];g||(t.dense?(s[se[0].r]||(s[se[0].r]=[]),g=s[se[0].r][se[0].c]={t:"z"}):g=s[en(se[0])]={t:"z"},i.e.r=Math.max(i.e.r,se[0].r),i.s.r=Math.min(i.s.r,se[0].r),i.e.c=Math.max(i.e.c,se[0].c),i.s.c=Math.min(i.s.c,se[0].c)),g.c||(g.c=[]),p={a:se[1],t:dt.TxO.t},g.c.push(p)}break;case 2173:z1e(N[se.ixfe],se.ext);break;case 125:{if(!V.cellStyles)break;for(;se.e>=se.s;)ue[se.e--]={width:se.w/256,level:se.level||0,hidden:!!(se.flags&1)},X||(X=!0,AE(se.w/256)),Xf(ue[se.e+1])}break;case 520:{var gt={};se.level!=null&&(z[se.r]=gt,gt.level=se.level),se.hidden&&(z[se.r]=gt,gt.hidden=!0),se.hpt&&(z[se.r]=gt,gt.hpt=se.hpt,gt.hpx=e1(se.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||vm(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ae]]=se;break;case 161:s["!margins"]||vm(s["!margins"]={}),s["!margins"].header=se.header,s["!margins"].footer=se.footer;break;case 574:se.RTL&&(P.Views[0].RTL=!0);break;case 146:A=se;break;case 2198:Z=se;break;case 140:T=se;break;case 442:u?j.CodeName=se||j.name:P.WBProps.CodeName=se||"ThisWorkbook";break}}else me||console.error("Missing Info for XLS Record 0x"+ae.toString(16)),e.l+=ce}return r.SheetNames=pa(a).sort(function(kt,Ge){return Number(kt)-Number(Ge)}).map(function(kt){return a[kt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&q.forEach(function(kt,Ge){r.Sheets[r.SheetNames[Ge]]["!autofilter"]=kt}),r.Strings=c,r.SSF=Ds(Qr),V.enc&&(r.Encryption=V.enc),Z&&(r.Themes=Z),r.Metadata={},T!==void 0&&(r.Metadata.Country=T),I.names.length>0&&(P.Names=I.names),r.Workbook=P,r}var cv={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function rwe(e,t,r){var n=Hr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=JO(n,X8,cv.DSI);for(var a in s)t[a]=s[a]}catch(u){if(r.WTF)throw u}var i=Hr.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=JO(i,J8,cv.SI);for(var c in o)t[c]==null&&(t[c]=o[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(wG(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function nwe(e,t){var r=[],n=[],s=[],a=0,i,o=EO(X8,"n"),c=EO(J8,"n");if(e.Props)for(i=pa(e.Props),a=0;a<i.length;++a)(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(c,i[a])?n:s).push([i[a],e.Props[i[a]]]);if(e.Custprops)for(i=pa(e.Custprops),a=0;a<i.length;++a)Object.prototype.hasOwnProperty.call(e.Props||{},i[a])||(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(c,i[a])?n:s).push([i[a],e.Custprops[i[a]]]);var u=[];for(a=0;a<s.length;++a)NG.indexOf(s[a][0])>-1||bG.indexOf(s[a][0])>-1||s[a][1]!=null&&u.push(s[a]);n.length&&Hr.utils.cfb_add(t,"/SummaryInformation",QO(n,cv.SI,c,J8)),(r.length||u.length)&&Hr.utils.cfb_add(t,"/DocumentSummaryInformation",QO(r,cv.DSI,o,X8,u.length?u:null,cv.UDI))}function SV(e,t){t||(t={}),LE(t),aE(),t.codepage&&sE(t.codepage);var r,n;if(e.FullPaths){if(Hr.find(e,"/encryption"))throw new Error("File is password-protected");r=Hr.find(e,"!CompObj"),n=Hr.find(e,"/Workbook")||Hr.find(e,"/Book")}else{switch(t.type){case"base64":e=Il(Wl(e));break;case"binary":e=Il(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Ki(e,0),n={content:e}}var s,a;if(r&&Qbe(r),t.bookProps&&!t.bookSheets)s={};else{var i=Tn?"buffer":"array";if(n&&n.content)s=twe(n.content,t);else if((a=Hr.find(e,"PerfectOffice_MAIN"))&&a.content)s=ym.to_workbook(a.content,(t.type=i,t));else if((a=Hr.find(e,"NativeContent_MAIN"))&&a.content)s=ym.to_workbook(a.content,(t.type=i,t));else throw(a=Hr.find(e,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Hr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=pxe(e))}var o={};return e.FullPaths&&rwe(e,o,t),s.Props=s.Custprops=o,t.bookFiles&&(s.cfb=e),s}function swe(e,t){var r=t||{},n=Hr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Hr.utils.cfb_add(n,s,kV(e,r)),r.biff==8&&(e.Props||e.Custprops)&&nwe(e,n),r.biff==8&&e.vbaraw&&xxe(n,Hr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var Hv={0:{f:Nve},1:{f:Rve},2:{f:t2e},3:{f:Hve},4:{f:$ve},5:{f:Qve},6:{f:i2e},7:{f:Kve},8:{f:h2e},9:{f:f2e},10:{f:u2e},11:{f:d2e},12:{f:Lve},13:{f:n2e},14:{f:Vve},15:{f:zve},16:{f:gV},17:{f:l2e},18:{f:Xve},19:{f:vE},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:lbe},40:{},42:{},43:{f:i1e},44:{f:s1e},45:{f:c1e},46:{f:d1e},47:{f:u1e},48:{},49:{f:Phe},50:{},51:{f:G1e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:BG},62:{f:a2e},63:{f:exe},64:{f:A2e},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:So,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:C2e},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Ove},148:{f:Pve,p:16},151:{f:v2e},152:{},153:{f:abe},154:{},155:{},156:{f:nbe},157:{},158:{},159:{T:1,f:wpe},160:{T:-1},161:{T:1,f:ag},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:m2e},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:W1e},336:{T:-1},337:{f:K1e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Y8},357:{},358:{},359:{},360:{T:1},361:{},362:{f:LG},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:b2e},427:{f:w2e},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:S2e},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Mve},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:x2e},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Y8},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:dxe},633:{T:1},634:{T:-1},635:{T:1,f:cxe},636:{T:-1},637:{f:Dhe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:V2e},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:j2e},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},nC={6:{f:Y5},10:{f:_f},12:{f:Wa},13:{f:Wa},14:{f:Ta},15:{f:Ta},16:{f:xo},17:{f:Ta},18:{f:Ta},19:{f:Wa},20:{f:sD},21:{f:sD},23:{f:LG},24:{f:iD},25:{f:Ta},26:{},27:{},28:{f:jge},29:{},34:{f:Ta},35:{f:aD},38:{f:xo},39:{f:xo},40:{f:xo},41:{f:xo},42:{f:Ta},43:{f:Ta},47:{f:zpe},49:{f:nge},51:{f:Wa},60:{},61:{f:Qme},64:{f:Ta},65:{f:rge},66:{f:Wa},77:{},80:{},81:{},82:{},85:{f:Wa},89:{},90:{},91:{},92:{f:Ume},93:{f:Mge},94:{},95:{f:Ta},96:{},97:{},99:{f:Ta},125:{f:BG},128:{f:yge},129:{f:Wme},130:{f:Wa},131:{f:Ta},132:{f:Ta},133:{f:Hme},134:{},140:{f:Uge},141:{f:Wa},144:{},146:{f:Hge},151:{},152:{},153:{},154:{},155:{},156:{f:Wa},157:{},158:{},160:{f:Jge},161:{f:qge},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:mge},190:{f:gge},193:{f:_f},197:{},198:{},199:{},200:{},201:{},202:{f:Ta},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Wa},220:{},221:{f:Ta},222:{},224:{f:xge},225:{f:$me},226:{f:_f},227:{},229:{f:Pge},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Vme},253:{f:age},255:{f:Kme},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:AG},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ta},353:{f:_f},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Sge},431:{f:Ta},432:{},433:{},434:{},437:{},438:{f:Rge},439:{f:Ta},440:{f:Ige},441:{},442:{f:j2},443:{},444:{f:Wa},445:{},446:{},448:{f:_f},449:{f:Jme,r:2},450:{f:_f},512:{f:tD},513:{f:Xge},515:{f:wge},516:{f:oge},517:{f:nD},519:{f:Qge},520:{f:Yme},523:{},545:{f:oD},549:{f:eD},566:{},574:{f:ege},638:{f:hge},659:{},1048:{},1054:{f:cge},1084:{},1212:{f:Ege},2048:{f:Bge},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Sw},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:_f},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Gge,r:12},2173:{f:U1e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ta,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Tge,r:12},2197:{},2198:{f:D1e,r:12},2199:{},2200:{},2201:{},2202:{f:Nge,r:12},2203:{f:_f},2204:{},2205:{},2206:{},2207:{},2211:{f:Xme},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Wa},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Kge},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Wge},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:tD},1:{},2:{f:npe},3:{f:tpe},4:{f:epe},5:{f:nD},7:{f:ape},8:{},9:{f:Sw},11:{},22:{f:Wa},30:{f:dge},31:{},32:{},33:{f:oD},36:{},37:{f:eD},50:{f:ipe},62:{},52:{},67:{},68:{f:Wa},69:{},86:{},126:{},127:{f:Zge},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:ope},223:{},234:{},354:{},421:{},518:{f:Y5},521:{f:Sw},536:{f:iD},547:{f:aD},561:{},579:{},1030:{f:Y5},1033:{f:Sw},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function dr(e,t,r,n){var s=t;if(!isNaN(s)){var a=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&pE(r)&&e.push(r)}}function awe(e,t,r,n){var s=(r||[]).length||0;if(s<=8224)return dr(e,t,r,s);var a=t;if(!isNaN(a)){for(var i=r.parts||[],o=0,c=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,a),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<s;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function O2(e,t,r){return e||(e=Rt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function iwe(e,t,r,n){var s=Rt(9);return O2(s,e,t),jG(r,n||"b",s),s}function owe(e,t,r){var n=Rt(8+2*r.length);return O2(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function lwe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?li(Os(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?dr(e,2,spe(r,n,s)):dr(e,3,rpe(r,n,s));return;case"b":case"e":dr(e,5,iwe(r,n,t.v,t.t));return;case"s":case"str":dr(e,4,owe(r,n,(t.v||"").slice(0,255)));return}dr(e,1,O2(null,r,n))}function cwe(e,t,r,n){var s=Array.isArray(t),a=Wn(t["!ref"]||"A1"),i,o="",c=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=wn(a)}for(var u=a.s.r;u<=a.e.r;++u){o=Fa(u);for(var d=a.s.c;d<=a.e.c;++d){u===a.s.r&&(c[d]=ea(d)),i=c[d]+o;var f=s?(t[u]||[])[d]:t[i];f&&lwe(e,f,u,d)}}}function uwe(e,t){for(var r=t||{},n=gl(),s=0,a=0;a<e.SheetNames.length;++a)e.SheetNames[a]==r.sheet&&(s=a);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return dr(n,r.biff==4?1033:r.biff==3?521:9,TE(e,16,r)),cwe(n,e.Sheets[e.SheetNames[s]],s,r),dr(n,10),n.end()}function dwe(e,t,r){dr(e,49,sge({sz:12,name:"Arial"},r))}function fwe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&dr(e,1054,uge(s,t[s],r))})}function hwe(e,t){var r=Rt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),dr(e,2151,r),r=Rt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),DG(Wn(t["!ref"]||"A1"),r),r.write_shift(4,4),dr(e,2152,r)}function mwe(e,t){for(var r=0;r<16;++r)dr(e,224,rD({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){dr(e,224,rD(n,0,t))})}function gwe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];dr(e,440,Lge(n)),n[1].Tooltip&&dr(e,2048,$ge(n))}delete t["!links"]}function pwe(e,t){if(t){var r=0;t.forEach(function(n,s){++r<=256&&n&&dr(e,125,Vge(wS(s,n),s))})}}function xwe(e,t,r,n,s){var a=16+uh(s.cellXfs,t,s);if(t.v==null&&!t.bf){dr(e,513,zm(r,n,a));return}if(t.bf)dr(e,6,Wye(t,r,n,s,a));else switch(t.t){case"d":case"n":var i=t.t=="d"?li(Os(t.v)):t.v;dr(e,515,_ge(r,n,i,a));break;case"b":case"e":dr(e,517,bge(r,n,t.v,a,s,t.t));break;case"s":case"str":if(s.bookSST){var o=OE(s.Strings,t.v,s.revStrings);dr(e,253,ige(r,n,o,a))}else dr(e,516,lge(r,n,(t.v||"").slice(0,255),a,s));break;default:dr(e,513,zm(r,n,a))}}function ywe(e,t,r){var n=gl(),s=r.SheetNames[e],a=r.Sheets[s]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[e]||{},c=Array.isArray(a),u=t.biff==8,d,f="",h=[],g=Wn(a["!ref"]||"A1"),p=u?65536:16384;if(g.e.c>255||g.e.r>=p){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,p-1)}dr(n,2057,TE(r,16,t)),dr(n,13,gc(1)),dr(n,12,gc(100)),dr(n,15,Bo(!0)),dr(n,17,Bo(!1)),dr(n,16,$m(.001)),dr(n,95,Bo(!0)),dr(n,42,Bo(!1)),dr(n,43,Bo(!1)),dr(n,130,gc(1)),dr(n,128,vge()),dr(n,131,Bo(!1)),dr(n,132,Bo(!1)),u&&pwe(n,a["!cols"]),dr(n,512,fge(g,t)),u&&(a["!links"]=[]);for(var y=g.s.r;y<=g.e.r;++y){f=Fa(y);for(var v=g.s.c;v<=g.e.c;++v){y===g.s.r&&(h[v]=ea(v)),d=h[v]+f;var C=c?(a[y]||[])[v]:a[d];C&&(xwe(n,C,y,v,t),u&&C.l&&a["!links"].push([d,C.l]))}}var S=o.CodeName||o.name||s;return u&&dr(n,574,tge((i.Views||[])[0])),u&&(a["!merges"]||[]).length&&dr(n,229,Fge(a["!merges"])),u&&gwe(n,a),dr(n,442,PG(S)),u&&hwe(n,a),dr(n,10),n.end()}function vwe(e,t,r){var n=gl(),s=(e||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=r.biff==8,c=r.biff==5;if(dr(n,2057,TE(e,5,r)),r.bookType=="xla"&&dr(n,135),dr(n,225,o?gc(1200):null),dr(n,193,bme(2)),c&&dr(n,191),c&&dr(n,192),dr(n,226),dr(n,92,zme("SheetJS",r)),dr(n,66,gc(o?1200:1252)),o&&dr(n,353,gc(0)),o&&dr(n,448),dr(n,317,Yge(e.SheetNames.length)),o&&e.vbaraw&&dr(n,211),o&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";dr(n,442,PG(u))}dr(n,156,gc(17)),dr(n,25,Bo(!1)),dr(n,18,Bo(!1)),dr(n,19,gc(0)),o&&dr(n,431,Bo(!1)),o&&dr(n,444,gc(0)),dr(n,61,Zme()),dr(n,64,Bo(!1)),dr(n,141,gc(0)),dr(n,34,Bo(J2e(e)=="true")),dr(n,14,Bo(!0)),o&&dr(n,439,Bo(!1)),dr(n,218,gc(0)),dwe(n,e,r),fwe(n,e.SSF,r),mwe(n,r),o&&dr(n,352,Bo(!1));var d=n.end(),f=gl();o&&dr(f,140,zge()),o&&r.Strings&&awe(f,252,qme(r.Strings)),dr(f,10);var h=f.end(),g=gl(),p=0,y=0;for(y=0;y<e.SheetNames.length;++y)p+=(o?12:11)+(o?2:1)*e.SheetNames[y].length;var v=d.length+p+h.length;for(y=0;y<e.SheetNames.length;++y){var C=a[y]||{};dr(g,133,Gme({pos:v,hs:C.Hidden||0,dt:0,name:e.SheetNames[y]},r)),v+=t[y].length}var S=g.end();if(p!=S.length)throw new Error("BS8 "+p+" != "+S.length);var w=[];return d.length&&w.push(d),S.length&&w.push(S),h.length&&w.push(h),Ci(w)}function bwe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Ds(Qr)),e&&e.SSF&&(A1(),mS(e.SSF),r.revssf=pS(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,BE(r),r.cellXfs=[],uh(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)n[n.length]=ywe(s,r,e);return n.unshift(vwe(e,n,r)),Ci(n)}function kV(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var s=pl(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var a=t||{};switch(a.biff||2){case 8:case 5:return bwe(e,t);case 4:case 3:case 2:return uwe(e,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function xD(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=e.match(/<\/table/i),i=s.index,o=a&&a.index||e.length,c=she(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},p=[];for(i=0;i<c.length;++i){var y=c[i].trim(),v=y.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(v!="<td"&&v!="<th")){var C=y.split(/<\/t[dh]>/i);for(o=0;o<C.length;++o){var S=C[o].trim();if(S.match(/<t[dh]/i)){for(var w=S,T=0;w.charAt(0)=="<"&&(T=w.indexOf(">"))>-1;)w=w.slice(T+1);for(var N=0;N<p.length;++N){var A=p[N];A.s.c==d&&A.s.r<u&&u<=A.e.r&&(d=A.e.c+1,N=-1)}var P=sn(S.slice(0,S.indexOf(">")));h=P.colspan?+P.colspan:1,((f=+P.rowspan)>1||h>1)&&p.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var j=P.t||P["data-t"]||"";if(!w.length){d+=h;continue}if(w=KH(w),g.s.r>u&&(g.s.r=u),g.e.r<u&&(g.e.r=u),g.s.c>d&&(g.s.c=d),g.e.c<d&&(g.e.c=d),!w.length){d+=h;continue}var F={t:"s",v:w};r.raw||!w.trim().length||j=="s"||(w==="TRUE"?F={t:"b",v:!0}:w==="FALSE"?F={t:"b",v:!1}:isNaN(cu(w))?isNaN(Qp(w).getDate())||(F={t:"d",v:Os(w)},r.cellDates||(F={t:"n",v:li(F.v)}),F.z=r.dateNF||Qr[14]):F={t:"n",v:cu(w)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=F):n[en({r:u,c:d})]=F,d+=h}}}}return n["!ref"]=wn(g),p.length&&(n["!merges"]=p),n}function wwe(e,t,r,n){for(var s=e["!merges"]||[],a=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,c=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>i)&&!(s[u].e.r<r||s[u].e.c<i)){if(s[u].s.r<r||s[u].s.c<i){o=-1;break}o=s[u].e.r-s[u].s.r+1,c=s[u].e.c-s[u].s.c+1;break}if(!(o<0)){var d=en({r,c:i}),f=n.dense?(e[r]||[])[i]:e[d],h=f&&f.v!=null&&(f.h||hE(f.w||(p0(f),f.w)||""))||"",g={};o>1&&(g.rowspan=o),c>1&&(g.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(g["data-t"]=f&&f.t||"z",f.v!=null&&(g["data-v"]=f.v),f.z!=null&&(g["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),g.id=(n.id||"sjs")+"-"+d,a.push(ur("td",h,g))}}var p="<tr>";return p+a.join("")+"</tr>"}var _we='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Swe="</body></html>";function kwe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return ch(xD(r[0],t),t);var n=zE();return r.forEach(function(s,a){WE(n,xD(s,t),"Sheet"+(a+1))}),n}function Cwe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function CV(e,t){var r=t||{},n=r.header!=null?r.header:_we,s=r.footer!=null?r.footer:Swe,a=[n],i=pl(e["!ref"]);r.dense=Array.isArray(e),a.push(Cwe(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)a.push(wwe(e,i,o,r));return a.push("</table>"+s),a.join("")}function TV(e,t,r){var n=r||{},s=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var i=typeof n.origin=="string"?ta(n.origin):n.origin;s=i.r,a=i.c}var o=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:s,c:a}};if(e["!ref"]){var d=pl(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),s==-1&&(u.e.r=s=d.e.r+1)}var f=[],h=0,g=e["!rows"]||(e["!rows"]=[]),p=0,y=0,v=0,C=0,S=0,w=0;for(e["!cols"]||(e["!cols"]=[]);p<o.length&&y<c;++p){var T=o[p];if(yD(T)){if(n.display)continue;g[y]={hidden:!0}}var N=T.children;for(v=C=0;v<N.length;++v){var A=N[v];if(!(n.display&&yD(A))){var P=A.hasAttribute("data-v")?A.getAttribute("data-v"):A.hasAttribute("v")?A.getAttribute("v"):KH(A.innerHTML),j=A.getAttribute("data-z")||A.getAttribute("z");for(h=0;h<f.length;++h){var F=f[h];F.s.c==C+a&&F.s.r<y+s&&y+s<=F.e.r&&(C=F.e.c+1-a,h=-1)}w=+A.getAttribute("colspan")||1,((S=+A.getAttribute("rowspan")||1)>1||w>1)&&f.push({s:{r:y+s,c:C+a},e:{r:y+s+(S||1)-1,c:C+a+(w||1)-1}});var R={t:"s",v:P},L=A.getAttribute("data-t")||A.getAttribute("t")||"";P!=null&&(P.length==0?R.t=L||"z":n.raw||P.trim().length==0||L=="s"||(P==="TRUE"?R={t:"b",v:!0}:P==="FALSE"?R={t:"b",v:!1}:isNaN(cu(P))?isNaN(Qp(P).getDate())||(R={t:"d",v:Os(P)},n.cellDates||(R={t:"n",v:li(R.v)}),R.z=n.dateNF||Qr[14]):R={t:"n",v:cu(P)})),R.z===void 0&&j!=null&&(R.z=j);var V="",Z=A.getElementsByTagName("A");if(Z&&Z.length)for(var Y=0;Y<Z.length&&!(Z[Y].hasAttribute("href")&&(V=Z[Y].getAttribute("href"),V.charAt(0)!="#"));++Y);V&&V.charAt(0)!="#"&&(R.l={Target:V}),n.dense?(e[y+s]||(e[y+s]=[]),e[y+s][C+a]=R):e[en({c:C+a,r:y+s})]=R,u.e.c<C+a&&(u.e.c=C+a),C+=w}}++y}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,y-1+s),e["!ref"]=wn(u),y>=c&&(e["!fullref"]=wn((u.e.r=o.length-p+y-1+s,u))),e}function EV(e,t){var r=t||{},n=r.dense?[]:{};return TV(n,e,t)}function Twe(e,t){return ch(EV(e,t),t)}function yD(e){var t="",r=Ewe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Ewe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Nwe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Un(t.replace(/<[^>]*>/g,""));return[r]}var vD={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function NV(e,t){var r=t||{},n=mE(e),s=[],a,i,o={name:""},c="",u=0,d,f,h={},g=[],p=r.dense?[]:{},y,v,C={value:""},S="",w=0,T=[],N=-1,A=-1,P={s:{r:1e6,c:1e7},e:{r:0,c:0}},j=0,F={},R=[],L={},V=0,Z=0,Y=[],re=1,ue=1,z=[],X={Names:[]},I={},B=["",""],W=[],D={},U="",q=0,H=!1,te=!1,Q=0;for(Lv.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=Lv.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(P.e.c>=P.s.c&&P.e.r>=P.s.r?p["!ref"]=wn(P):p["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=P.e.r&&(p["!fullref"]=p["!ref"],P.e.r=r.sheetRows-1,p["!ref"]=wn(P)),R.length&&(p["!merges"]=R),Y.length&&(p["!rows"]=Y),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),g.push(d.name),h[d.name]=p,te=!1):y[0].charAt(y[0].length-2)!=="/"&&(d=sn(y[0],!1),N=A=-1,P.s.r=P.s.c=1e7,P.e.r=P.e.c=0,p=r.dense?[]:{},R=[],Y=[],te=!0);break;case"table-row-group":y[1]==="/"?--j:++j;break;case"table-row":case"":if(y[1]==="/"){N+=re,re=1;break}if(f=sn(y[0],!1),f.?N=f.-1:N==-1&&(N=0),re=+f["number-rows-repeated"]||1,re<10)for(Q=0;Q<re;++Q)j>0&&(Y[N+Q]={level:j});A=-1;break;case"covered-table-cell":y[1]!=="/"&&++A,r.sheetStubs&&(r.dense?(p[N]||(p[N]=[]),p[N][A]={t:"z"}):p[en({r:N,c:A})]={t:"z"}),S="",T=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++A,C=sn(y[0],!1),ue=parseInt(C["number-columns-repeated"]||"1",10),v={t:"z",v:null},C.formula&&r.cellFormula!=!1&&(v.f=mD(Un(C.formula))),(C.||C["value-type"])=="string"&&(v.t="s",v.v=Un(C["string-value"]||""),r.dense?(p[N]||(p[N]=[]),p[N][A]=v):p[en({r:N,c:A})]=v),A+=ue-1;else if(y[1]!=="/"){++A,S="",w=0,T=[],ue=1;var ae=re?N+re-1:N;if(A>P.e.c&&(P.e.c=A),A<P.s.c&&(P.s.c=A),N<P.s.r&&(P.s.r=N),ae>P.e.r&&(P.e.r=ae),C=sn(y[0],!1),W=[],D={},v={t:C.||C["value-type"],v:null},r.cellFormula)if(C.formula&&(C.formula=Un(C.formula)),C["number-matrix-columns-spanned"]&&C["number-matrix-rows-spanned"]&&(V=parseInt(C["number-matrix-rows-spanned"],10)||0,Z=parseInt(C["number-matrix-columns-spanned"],10)||0,L={s:{r:N,c:A},e:{r:N+V-1,c:A+Z-1}},v.F=wn(L),z.push([L,v.F])),C.formula)v.f=mD(C.formula);else for(Q=0;Q<z.length;++Q)N>=z[Q][0].s.r&&N<=z[Q][0].e.r&&A>=z[Q][0].s.c&&A<=z[Q][0].e.c&&(v.F=z[Q][1]);switch((C["number-columns-spanned"]||C["number-rows-spanned"])&&(V=parseInt(C["number-rows-spanned"],10)||0,Z=parseInt(C["number-columns-spanned"],10)||0,L={s:{r:N,c:A},e:{r:N+V-1,c:A+Z-1}},R.push(L)),C["number-columns-repeated"]&&(ue=parseInt(C["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Ps(C["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(C.value);break;case"percentage":v.t="n",v.v=parseFloat(C.value);break;case"currency":v.t="n",v.v=parseFloat(C.value);break;case"date":v.t="d",v.v=Os(C["date-value"]),r.cellDates||(v.t="n",v.v=li(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=the(C["time-value"])/86400,r.cellDates&&(v.t="d",v.v=xS(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(C.);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",C["string-value"]!=null&&(S=Un(C["string-value"]),T=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(H=!1,v.t==="s"&&(v.v=S||"",T.length&&(v.R=T),H=w==0),I.Target&&(v.l=I),W.length>0&&(v.c=W,W=[]),S&&r.cellText!==!1&&(v.w=S),H&&(v.t="z",delete v.v),(!H||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=N))for(var ce=0;ce<re;++ce){if(ue=parseInt(C["number-columns-repeated"]||"1",10),r.dense)for(p[N+ce]||(p[N+ce]=[]),p[N+ce][A]=ce==0?v:Ds(v);--ue>0;)p[N+ce][A+ue]=Ds(v);else for(p[en({r:N+ce,c:A})]=v;--ue>0;)p[en({r:N+ce,c:A+ue})]=Ds(v);P.e.c<=A&&(P.e.c=A)}ue=parseInt(C["number-columns-repeated"]||"1",10),A+=ue-1,ue=0,v={},S="",T=[]}I={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a;D.t=S,T.length&&(D.R=T),D.a=U,W.push(D)}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);U="",q=0,S="",w=0,T=[];break;case"creator":y[1]==="/"?U=n.slice(q,y.index):q=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);S="",w=0,T=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(F[o.name]=c,(a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&(c="",o=sn(y[0],!1),s.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":i=sn(y[0],!1),c+=vD[y[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":i=sn(y[0],!1),c+=vD[y[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,y.index);break}else u=y.index+y[0].length;break;case"named-range":i=sn(y[0],!1),B=X5(i["cell-range-address"]);var me={Name:i.name,Ref:B[0]+"!"+B[1]};te&&(me.Sheet=g.length),X.Names.push(me);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(y[1]==="/"&&(!C||!C["string-value"])){var xe=Nwe(n.slice(w,y.index));S=(S.length>0?S+`
`:"")+xe[0]}else sn(y[0],!1),w=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{B=X5(sn(y[0])["target-range-address"]),h[B[0]]["!autofilter"]={ref:B[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(I=sn(y[0],!1),!I.href)break;I.Target=Un(I.href),delete I.href,I.Target.charAt(0)=="#"&&I.Target.indexOf(".")>-1?(B=X5(I.Target.slice(1)),I.Target="#"+B[0]+"!"+B[1]):I.Target.match(/^\.\.[\\\/]/)&&(I.Target=I.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(y)}}var se={Sheets:h,SheetNames:g,Workbook:X};return r.bookSheets&&delete se.Sheets,se}function bD(e,t){t=t||{},mc(e,"META-INF/manifest.xml")&&tme(za(e,"META-INF/manifest.xml"),t);var r=Ll(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=NV(ps(r),t);return mc(e,"meta.xml")&&(n.Props=yG(za(e,"meta.xml"))),n}function wD(e,t){return NV(e,t)}var Awe=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Iv({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Ra+t}})(),_D=(function(){var e=function(a){return cs(a).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(a,i,o){var c=[];c.push('      <table:table table:name="'+cs(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=pl(a["!ref"]||"A1"),h=a["!merges"]||[],g=0,p=Array.isArray(a);if(a["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var y="",v=a["!rows"]||[];for(u=0;u<f.s.r;++u)y=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+y+`></table:table-row>
`);for(;u<=f.e.r;++u){for(y=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+y+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var C=!1,S={},w="";for(g=0;g!=h.length;++g)if(!(h[g].s.c>d)&&!(h[g].s.r>u)&&!(h[g].e.c<d)&&!(h[g].e.r<u)){(h[g].s.c!=d||h[g].s.r!=u)&&(C=!0),S["table:number-columns-spanned"]=h[g].e.c-h[g].s.c+1,S["table:number-rows-spanned"]=h[g].e.r-h[g].s.r+1;break}if(C){c.push(r);continue}var T=en({r:u,c:d}),N=p?(a[u]||[])[d]:a[T];if(N&&N.f&&(S["table:formula"]=cs(Yye(N.f)),N.F&&N.F.slice(0,T.length)==T)){var A=pl(N.F);S["table:number-matrix-columns-spanned"]=A.e.c-A.s.c+1,S["table:number-matrix-rows-spanned"]=A.e.r-A.s.r+1}if(!N){c.push(t);continue}switch(N.t){case"b":w=N.v?"TRUE":"FALSE",S["office:value-type"]="boolean",S["office:boolean-value"]=N.v?"true":"false";break;case"n":w=N.w||String(N.v||0),S["office:value-type"]="float",S["office:value"]=N.v||0;break;case"s":case"str":w=N.v==null?"":N.v,S["office:value-type"]="string";break;case"d":w=N.w||Os(N.v).toISOString(),S["office:value-type"]="date",S["office:date-value"]=Os(N.v).toISOString(),S["table:style-name"]="ce1";break;default:c.push(t);continue}var P=e(w);if(N.l&&N.l.Target){var j=N.l.Target;j=j.charAt(0)=="#"?"#"+Xye(j.slice(1)):j,j.charAt(0)!="#"&&!j.match(/^\w+:/)&&(j="../"+j),P=ur("text:a",P,{"xlink:href":j.replace(/&/g,"&amp;")})}c.push("          "+ur("table:table-cell",ur("text:p",P,{}),S)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(a,i){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Xf(f),f.ods=o;var h=u["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),a.push(`  </style:style>
`),++o}}});var c=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),a.push(`  </style:style>
`),++c}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(i,o){var c=[Ra],u=Iv({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Iv({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(xG().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),s(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)c.push(n(i.Sheets[i.SheetNames[f]],i,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}})();function AV(e,t){if(t.bookType=="fods")return _D(e,t);var r=uE(),n="",s=[],a=[];return n="mimetype",_n(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",_n(r,n,_D(e,t)),s.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",_n(r,n,Awe(e,t)),s.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",_n(r,n,Ra+xG()),s.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",_n(r,n,sme(a)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",_n(r,n,rme(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Wm(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function sC(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):ps(lh(e))}function jwe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Il(Ku(e))}function Pwe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Qf(e){var t=e.reduce(function(s,a){return s+a.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function SD(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function Fwe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function Mwe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var a=0;s>=1;++a,s/=256)e[t+a]=s&255;e[t+15]|=r>=0?0:128}function Gv(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function ss(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function ga(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Gn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=Gv(e,r),a=s&7;s=Math.floor(s/8);var i=0,o;if(s==0)break;switch(a){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=Gv(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(n))}var u={data:o,type:a};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function Wi(e){var t=[];return e.forEach(function(r,n){r.forEach(function(s){s.data&&(t.push(ss(n*8+s.type)),s.type==2&&t.push(ss(s.data.length)),t.push(s.data))})}),Qf(t)}function IE(e,t){return e?.map(function(r){return t(r.data)})||[]}function uc(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=Gv(e,n),a=Gn(e.slice(n[0],n[0]+s));n[0]+=s;var i={id:ga(a[1][0].data),messages:[]};a[2].forEach(function(o){var c=Gn(o.data),u=ga(c[3][0].data);i.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=a[3])!=null&&t[0]&&(i.merge=ga(a[3][0].data)>>>0>0),r.push(i)}return r}function op(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:ss(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ss(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(i){s.push(i.data),i.meta[3]=[{type:0,data:ss(i.data.length)}],n[2].push({data:Wi(i.meta),type:2})});var a=Wi(n);t.push(ss(a.length)),t.push(a),s.forEach(function(i){return t.push(i)})}),Qf(t)}function Owe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Gv(t,r),s=[];r[0]<t.length;){var a=t[r[0]]&3;if(a==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}s.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,u=0;if(a==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,a==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Qf(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(s.push(s[0].slice(-c)),u-=c;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-c,-c+u))}}var d=Qf(s);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function dc(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Owe(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Qf(t)}function lp(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var a=ss(n),i=a.length;t.push(a),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,s[0]=0,s[1]=i&255,s[2]=i>>8&255,s[3]=i>>16&255,r+=n}return Qf(t)}function Dwe(e,t,r,n){var s=Wm(e),a=s.getUint32(4,!0),i=(n>1?12:8)+SD(a&(n>1?3470:398))*4,o=-1,c=-1,u=NaN,d=new Date(2001,0,1);a&512&&(o=s.getUint32(i,!0),i+=4),i+=SD(a&(n>1?12288:4096))*4,a&16&&(c=s.getUint32(i,!0),i+=4),a&32&&(u=s.getFloat64(i,!0),i+=8),a&64&&(d.setTime(d.getTime()+s.getFloat64(i,!0)*1e3),i+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function Rwe(e,t,r){var n=Wm(e),s=n.getUint32(8,!0),a=12,i=-1,o=-1,c=NaN,u=NaN,d=new Date(2001,0,1);s&1&&(c=Fwe(e,a),a+=16),s&2&&(u=n.getFloat64(a,!0),a+=8),s&4&&(d.setTime(d.getTime()+n.getFloat64(a,!0)*1e3),a+=8),s&8&&(o=n.getUint32(a,!0),a+=4),s&16&&(i=n.getUint32(a,!0),a+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return f}function Q5(e,t){var r=new Uint8Array(32),n=Wm(r),s=12,a=0;switch(r[0]=5,e.t){case"n":r[1]=2,Mwe(r,s,e.v),a|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,e.v?1:0,!0),a|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,a,!0),r.slice(0,s)}function Z5(e,t){var r=new Uint8Array(32),n=Wm(r),s=12,a=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(s,e.v,!0),a|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,e.v?1:0,!0),a|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,a,!0),r.slice(0,s)}function Iwe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return Dwe(e,t,r,e[0]);case 5:return Rwe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function ho(e){var t=Gn(e);return Gv(t[1][0].data)}function kD(e,t){var r=Gn(t.data),n=ga(r[1][0].data),s=r[3],a=[];return(s||[]).forEach(function(i){var o=Gn(i.data),c=ga(o[1][0].data)>>>0;switch(n){case 1:a[c]=sC(o[3][0].data);break;case 8:{var u=e[ho(o[9][0].data)][0],d=Gn(u.data),f=e[ho(d[1][0].data)][0],h=ga(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var g=Gn(f.data);a[c]=g[3].map(function(p){return sC(p.data)}).join("")}break}}),a}function Lwe(e,t){var r,n,s,a,i,o,c,u,d,f,h,g,p,y,v=Gn(e),C=ga(v[1][0].data)>>>0,S=ga(v[2][0].data)>>>0,w=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&ga(v[8][0].data)>0||!1,T,N;if((a=(s=v[7])==null?void 0:s[0])!=null&&a.data&&t!=0)T=(o=(i=v[7])==null?void 0:i[0])==null?void 0:o.data,N=(u=(c=v[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=v[4])==null?void 0:d[0])!=null&&f.data&&t!=1)T=(g=(h=v[4])==null?void 0:h[0])==null?void 0:g.data,N=(y=(p=v[3])==null?void 0:p[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var A=w?4:1,P=Wm(T),j=[],F=0;F<T.length/2;++F){var R=P.getUint16(F*2,!0);R<65535&&j.push([F,R])}if(j.length!=S)throw"Expected ".concat(S," cells, found ").concat(j.length);var L=[];for(F=0;F<j.length-1;++F)L[j[F][0]]=N.subarray(j[F][1]*A,j[F+1][1]*A);return j.length>=1&&(L[j[j.length-1][0]]=N.subarray(j[j.length-1][1]*A)),{R:C,cells:L}}function Bwe(e,t){var r,n=Gn(t.data),s=(r=n?.[7])!=null&&r[0]?ga(n[7][0].data)>>>0>0?1:0:-1,a=IE(n[5],function(i){return Lwe(i,s)});return{nrows:ga(n[4][0].data)>>>0,data:a.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(c,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=c}),i},[])}}function $we(e,t,r){var n,s=Gn(t.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(ga(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(ga(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=wn(a);var i=Gn(s[4][0].data),o=kD(e,e[ho(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?kD(e,e[ho(i[17][0].data)][0]):[],u=Gn(i[3][0].data),d=0;u[1].forEach(function(f){var h=Gn(f.data),g=e[ho(h[2][0].data)][0],p=ga(g.meta[1][0].data);if(p!=6002)throw new Error("6001 unexpected reference to ".concat(p));var y=Bwe(e,g);y.data.forEach(function(v,C){v.forEach(function(S,w){var T=en({r:d+C,c:w}),N=Iwe(S,o,c);N&&(r[T]=N)})}),d+=y.nrows})}function Uwe(e,t){var r=Gn(t.data),n={"!ref":"A1"},s=e[ho(r[2][0].data)],a=ga(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return $we(e,s[0],n),n}function zwe(e,t){var r,n=Gn(t.data),s={name:(r=n[1])!=null&&r[0]?sC(n[1][0].data):"",sheets:[]},a=IE(n[2],ho);return a.forEach(function(i){e[i].forEach(function(o){var c=ga(o.meta[1][0].data);c==6e3&&s.sheets.push(Uwe(e,o))})}),s}function Wwe(e,t){var r=zE(),n=Gn(t.data),s=IE(n[1],ho);if(s.forEach(function(a){e[a].forEach(function(i){var o=ga(i.meta[1][0].data);if(o==2){var c=zwe(e,i);c.sheets.forEach(function(u,d){WE(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function e6(e){var t,r,n,s,a={},i=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=dc(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=uc(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){a[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var o=((s=(n=(r=(t=a?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&ga(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||i.forEach(function(c){a[c].forEach(function(u){var d=ga(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Wwe(a,o)}function Hwe(e,t,r){var n,s,a,i;if(!((n=e[6])!=null&&n[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(a=e[8])==null?void 0:a[0])==null?void 0:i.data)&&ga(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=Wm(e[7][0].data),d=0,f=[],h=Wm(e[4][0].data),g=0,p=[],y=0;y<t.length;++y){if(t[y]==null){u.setUint16(y*2,65535,!0),h.setUint16(y*2,65535);continue}u.setUint16(y*2,d,!0),h.setUint16(y*2,g,!0);var v,C;switch(typeof t[y]){case"string":v=Q5({t:"s",v:t[y]},r),C=Z5({t:"s",v:t[y]},r);break;case"number":v=Q5({t:"n",v:t[y]},r),C=Z5({t:"n",v:t[y]},r);break;case"boolean":v=Q5({t:"b",v:t[y]},r),C=Z5({t:"b",v:t[y]},r);break;default:throw new Error("Unsupported value "+t[y])}f.push(v),d+=v.length,p.push(C),g+=C.length,++c}for(e[2][0].data=ss(c);y<e[7][0].data.length/2;++y)u.setUint16(y*2,65535,!0),h.setUint16(y*2,65535,!0);return e[6][0].data=Qf(f),e[3][0].data=Qf(p),c}function Gwe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=pl(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(wn(n)));var a=Q4(r,{range:n,header:1}),i=["~Sh33tJ5~"];a.forEach(function(U){return U.forEach(function(q){typeof q=="string"&&i.push(q)})});var o={},c=[],u=Hr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(U,q){return[U,u.FullPaths[q]]}).forEach(function(U){var q=U[0],H=U[1];if(q.type==2&&q.name.match(/\.iwa/)){var te=q.content,Q=dc(te),ae=uc(Q);ae.forEach(function(ce){c.push(ce.id),o[ce.id]={deps:[],location:H,type:ga(ce.messages[0].meta[1][0].data)}})}}),c.sort(function(U,q){return U-q});var d=c.filter(function(U){return U>1}).map(function(U){return[U,ss(U)]});u.FileIndex.map(function(U,q){return[U,u.FullPaths[q]]}).forEach(function(U){var q=U[0];if(U[1],!!q.name.match(/\.iwa/)){var H=uc(dc(q.content));H.forEach(function(te){te.messages.forEach(function(Q){d.forEach(function(ae){te.messages.some(function(ce){return ga(ce.meta[1][0].data)!=11006&&Pwe(ce.data,ae[1])})&&o[ae[0]].deps.push(te.id)})})})}});for(var f=Hr.find(u,o[1].location),h=uc(dc(f.content)),g,p=0;p<h.length;++p){var y=h[p];y.id==1&&(g=y)}var v=ho(Gn(g.messages[0].data)[1][0].data);for(f=Hr.find(u,o[v].location),h=uc(dc(f.content)),p=0;p<h.length;++p)y=h[p],y.id==v&&(g=y);for(v=ho(Gn(g.messages[0].data)[2][0].data),f=Hr.find(u,o[v].location),h=uc(dc(f.content)),p=0;p<h.length;++p)y=h[p],y.id==v&&(g=y);for(v=ho(Gn(g.messages[0].data)[2][0].data),f=Hr.find(u,o[v].location),h=uc(dc(f.content)),p=0;p<h.length;++p)y=h[p],y.id==v&&(g=y);var C=Gn(g.messages[0].data);{C[6][0].data=ss(n.e.r+1),C[7][0].data=ss(n.e.c+1);var S=ho(C[46][0].data),w=Hr.find(u,o[S].location),T=uc(dc(w.content));{for(var N=0;N<T.length&&T[N].id!=S;++N);if(T[N].id!=S)throw"Bad ColumnRowUIDMapArchive";var A=Gn(T[N].messages[0].data);A[1]=[],A[2]=[],A[3]=[];for(var P=0;P<=n.e.c;++P){var j=[];j[1]=j[2]=[{type:0,data:ss(P+420690)}],A[1].push({type:2,data:Wi(j)}),A[2].push({type:0,data:ss(P)}),A[3].push({type:0,data:ss(P)})}A[4]=[],A[5]=[],A[6]=[];for(var F=0;F<=n.e.r;++F)j=[],j[1]=j[2]=[{type:0,data:ss(F+726270)}],A[4].push({type:2,data:Wi(j)}),A[5].push({type:0,data:ss(F)}),A[6].push({type:0,data:ss(F)});T[N].messages[0].data=Wi(A)}w.content=lp(op(T)),w.size=w.content.length,delete C[46];var R=Gn(C[4][0].data);{R[7][0].data=ss(n.e.r+1);var L=Gn(R[1][0].data),V=ho(L[2][0].data);w=Hr.find(u,o[V].location),T=uc(dc(w.content));{if(T[0].id!=V)throw"Bad HeaderStorageBucket";var Z=Gn(T[0].messages[0].data);for(F=0;F<a.length;++F){var Y=Gn(Z[2][0].data);Y[1][0].data=ss(F),Y[4][0].data=ss(a[F].length),Z[2][F]={type:Z[2][0].type,data:Wi(Y)}}T[0].messages[0].data=Wi(Z)}w.content=lp(op(T)),w.size=w.content.length;var re=ho(R[2][0].data);w=Hr.find(u,o[re].location),T=uc(dc(w.content));{if(T[0].id!=re)throw"Bad HeaderStorageBucket";for(Z=Gn(T[0].messages[0].data),P=0;P<=n.e.c;++P)Y=Gn(Z[2][0].data),Y[1][0].data=ss(P),Y[4][0].data=ss(n.e.r+1),Z[2][P]={type:Z[2][0].type,data:Wi(Y)};T[0].messages[0].data=Wi(Z)}w.content=lp(op(T)),w.size=w.content.length;var ue=ho(R[4][0].data);(function(){for(var U=Hr.find(u,o[ue].location),q=uc(dc(U.content)),H,te=0;te<q.length;++te){var Q=q[te];Q.id==ue&&(H=Q)}var ae=Gn(H.messages[0].data);{ae[3]=[];var ce=[];i.forEach(function(se,De){ce[1]=[{type:0,data:ss(De)}],ce[2]=[{type:0,data:ss(1)}],ce[3]=[{type:2,data:jwe(se)}],ae[3].push({type:2,data:Wi(ce)})})}H.messages[0].data=Wi(ae);var me=op(q),xe=lp(me);U.content=xe,U.size=U.content.length})();var z=Gn(R[3][0].data);{var X=z[1][0];delete z[2];var I=Gn(X.data);{var B=ho(I[2][0].data);(function(){for(var U=Hr.find(u,o[B].location),q=uc(dc(U.content)),H,te=0;te<q.length;++te){var Q=q[te];Q.id==B&&(H=Q)}var ae=Gn(H.messages[0].data);{delete ae[6],delete z[7];var ce=new Uint8Array(ae[5][0].data);ae[5]=[];for(var me=0,xe=0;xe<=n.e.r;++xe){var se=Gn(ce);me+=Hwe(se,a[xe],i),se[1][0].data=ss(xe),ae[5].push({data:Wi(se),type:2})}ae[1]=[{type:0,data:ss(n.e.c+1)}],ae[2]=[{type:0,data:ss(n.e.r+1)}],ae[3]=[{type:0,data:ss(me)}],ae[4]=[{type:0,data:ss(n.e.r+1)}]}H.messages[0].data=Wi(ae);var De=op(q),He=lp(De);U.content=He,U.size=U.content.length})()}X.data=Wi(I)}R[3][0].data=Wi(z)}C[4][0].data=Wi(R)}g.messages[0].data=Wi(C);var W=op(h),D=lp(W);return f.content=D,f.size=f.content.length,u}function jV(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function LE(e){jV([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function BE(e){jV([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Vwe(e){return An.WS.indexOf(e)>-1?"sheet":e==An.CS?"chart":e==An.DS?"dialog":e==An.MS?"macro":e&&e.length?e:"sheet"}function qwe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,Vwe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function Kwe(e,t,r,n,s,a,i,o,c,u,d,f){try{a[n]=av(Ll(e,r,!0),t);var h=za(e,t),g;switch(o){case"sheet":g=pbe(h,t,s,c,a[n],u,d,f);break;case"chart":if(g=xbe(h,t,s,c,a[n],u,d,f),!g||!g["!drawel"])break;var p=zy(g["!drawel"].Target,t),y=Bv(p),v=nxe(Ll(e,p,!0),av(Ll(e,y,!0),p)),C=zy(v,p),S=Bv(C);g=H2e(Ll(e,C,!0),C,c,av(Ll(e,S,!0),C),u,g);break;case"macro":g=ybe(h,t,s,c,a[n],u,d,f);break;case"dialog":g=vbe(h,t,s,c,a[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=g;var w=[];a&&a[n]&&pa(a[n]).forEach(function(T){var N="";if(a[n][T].Type==An.CMNT){N=zy(a[n][T].Target,t);var A=Sbe(za(e,N,!0),N,c);if(!A||!A.length)return;cD(g,A,!1)}a[n][T].Type==An.TCMNT&&(N=zy(a[n][T].Target,t),w=w.concat(axe(za(e,N,!0),c)))}),w&&w.length&&cD(g,w,!0,c.people||[])}catch(T){if(c.WTF)throw T}}function lc(e){return e.charAt(0)=="/"?e.slice(1):e}function Ywe(e,t){if(A1(),t=t||{},LE(t),mc(e,"META-INF/manifest.xml")||mc(e,"objectdata.xml"))return bD(e,t);if(mc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof e6<"u"){if(e.FileIndex)return e6(e);var r=Hr.utils.cfb_new();return jO(e).forEach(function(Y){_n(r,Y,ihe(e,Y))}),e6(r)}throw new Error("Unsupported NUMBERS file")}if(!mc(e,"[Content_Types].xml"))throw mc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):mc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=jO(e),s=Zhe(Ll(e,"[Content_Types].xml")),a=!1,i,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",za(e,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!za(e,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(iv=[],s.sst)try{iv=_be(za(e,lc(s.sst)),s.sst,t)}catch(Y){if(t.WTF)throw Y}t.cellStyles&&s.themes.length&&(c=wbe(Ll(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(u=bbe(za(e,lc(s.style)),s.style,c,t))}s.links.map(function(Y){try{var re=av(Ll(e,Bv(lc(Y))),Y);return Cbe(za(e,lc(Y)),re,Y,t)}catch{}});var d=gbe(za(e,lc(s.workbooks[0])),s.workbooks[0],t),f={},h="";s.coreprops.length&&(h=za(e,lc(s.coreprops[0]),!0),h&&(f=yG(h)),s.extprops.length!==0&&(h=za(e,lc(s.extprops[0]),!0),h&&ime(h,f,t)));var g={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(h=Ll(e,lc(s.custprops[0]),!0),h&&(g=lme(h,t)));var p={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(re){return re.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),t.bookProps&&(p.Props=f,p.Custprops=g),t.bookSheets&&typeof i<"u"&&(p.SheetNames=i),t.bookSheets?p.SheetNames:t.bookProps))return p;i={};var y={};t.bookDeps&&s.calcchain&&(y=kbe(za(e,lc(s.calcchain)),s.calcchain));var v=0,C={},S,w;{var T=d.Sheets;f.Worksheets=T.length,f.SheetNames=[];for(var N=0;N!=T.length;++N)f.SheetNames[N]=T[N].name}var A=a?"bin":"xml",P=s.workbooks[0].lastIndexOf("/"),j=(s.workbooks[0].slice(0,P+1)+"_rels/"+s.workbooks[0].slice(P+1)+".rels").replace(/^\//,"");mc(e,j)||(j="xl/_rels/workbook."+A+".rels");var F=av(Ll(e,j,!0),j.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=Tbe(za(e,lc(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=oxe(za(e,lc(s.people[0])),t)),F&&(F=qwe(F,d.Sheets));var R=za(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var L="sheet";if(F&&F[v]?(S="xl/"+F[v][1].replace(/[\/]?xl\//,""),mc(e,S)||(S=F[v][1]),mc(e,S)||(S=j.replace(/_rels\/.*$/,"")+F[v][1]),L=F[v][2]):(S="xl/worksheets/sheet"+(v+1-R)+"."+A,S=S.replace(/sheet0\./,"sheet.")),w=S.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var V=!1,Z=0;Z!=t.sheets.length;++Z)typeof t.sheets[Z]=="number"&&t.sheets[Z]==v&&(V=1),typeof t.sheets[Z]=="string"&&t.sheets[Z].toLowerCase()==f.SheetNames[v].toLowerCase()&&(V=1);if(!V)continue e}}Kwe(e,S,w,f.SheetNames[v],v,C,i,L,t,d,c,u)}return p={Directory:s,Workbook:d,Props:f,Custprops:g,Deps:y,Sheets:i,SheetNames:f.SheetNames,Strings:iv,Styles:u,Themes:c,SSF:Ds(Qr)},t&&t.bookFiles&&(e.files?(p.keys=n,p.files=e.files):(p.keys=[],p.files={},e.FullPaths.forEach(function(Y,re){Y=Y.replace(/^Root Entry[\/]/,""),p.keys.push(Y),p.files[Y]=e.FileIndex[re]}))),t&&t.bookVBA&&(s.vba.length>0?p.vbaraw=za(e,lc(s.vba[0]),!0):s.defaults&&s.defaults.bin===gxe&&(p.vbaraw=za(e,"xl/vbaProject.bin",!0))),p}function Xwe(e,t){var r=t||{},n="Workbook",s=Hr.find(e,n);try{if(n="/!DataSpaces/Version",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Tpe(s.content),n="/!DataSpaces/DataSpaceMap",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=Npe(s.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=Ape(s.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);Ppe(s.content)}catch{}if(n="/EncryptionInfo",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=Fpe(s.content);if(n="/EncryptedPackage",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Jwe(e,t){return t.bookType=="ods"?AV(e,t):t.bookType=="numbers"?Gwe(e,t):t.bookType=="xlsb"?Qwe(e,t):Zwe(e,t)}function Qwe(e,t){Tp=1024,e&&!e.SSF&&(e.SSF=Ds(Qr)),e&&e.SSF&&(A1(),mS(e.SSF),t.revssf=pS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ov?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=nV.indexOf(t.bookType)>-1,s=kE();BE(t=t||{});var a=uE(),i="",o=0;if(t.cellXfs=[],uh(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",_n(a,i,vG(e.Props,t)),s.coreprops.push(i),is(t.rels,2,i,An.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,_n(a,i,_G(e.Props)),s.extprops.push(i),is(t.rels,3,i,An.EXT_PROPS),e.Custprops!==e.Props&&pa(e.Custprops||{}).length>0&&(i="docProps/custom.xml",_n(a,i,SG(e.Custprops)),s.custprops.push(i),is(t.rels,4,i,An.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,_n(a,i,Nbe(o-1,i,t,e,d)),s.sheets.push(i),is(t.wbrels,-1,"worksheets/sheet"+o+"."+r,An.WS[0])}if(f){var g=f["!comments"],p=!1,y="";g&&g.length>0&&(y="xl/comments"+o+"."+r,_n(a,y,Pbe(g,y)),s.comments.push(y),is(d,-1,"../comments"+o+"."+r,An.CMNT),p=!0),f["!legacy"]&&p&&_n(a,"xl/drawings/vmlDrawing"+o+".vml",tV(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&_n(a,Bv(i),Ip(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,_n(a,i,jbe(t.Strings,i,t)),s.strs.push(i),is(t.wbrels,-1,"sharedStrings."+r,An.SST)),i="xl/workbook."+r,_n(a,i,Ebe(e,i)),s.workbooks.push(i),is(t.rels,1,i,An.WB),i="xl/theme/theme1.xml",_n(a,i,jE(e.Themes,t)),s.themes.push(i),is(t.wbrels,-1,"theme/theme1.xml",An.THEME),i="xl/styles."+r,_n(a,i,Abe(e,i,t)),s.styles.push(i),is(t.wbrels,-1,"styles."+r,An.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",_n(a,i,e.vbaraw),s.vba.push(i),is(t.wbrels,-1,"vbaProject.bin",An.VBA)),i="xl/metadata."+r,_n(a,i,Fbe(i)),s.metadata.push(i),is(t.wbrels,-1,"metadata."+r,An.XLMETA),_n(a,"[Content_Types].xml",pG(s,t)),_n(a,"_rels/.rels",Ip(t.rels)),_n(a,"xl/_rels/workbook."+r+".rels",Ip(t.wbrels)),delete t.revssf,delete t.ssf,a}function Zwe(e,t){Tp=1024,e&&!e.SSF&&(e.SSF=Ds(Qr)),e&&e.SSF&&(A1(),mS(e.SSF),t.revssf=pS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ov?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=nV.indexOf(t.bookType)>-1,s=kE();BE(t=t||{});var a=uE(),i="",o=0;if(t.cellXfs=[],uh(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",_n(a,i,vG(e.Props,t)),s.coreprops.push(i),is(t.rels,2,i,An.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,_n(a,i,_G(e.Props)),s.extprops.push(i),is(t.rels,3,i,An.EXT_PROPS),e.Custprops!==e.Props&&pa(e.Custprops||{}).length>0&&(i="docProps/custom.xml",_n(a,i,SG(e.Custprops)),s.custprops.push(i),is(t.rels,4,i,An.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},h=e.Sheets[e.SheetNames[o-1]],g=(h||{})["!type"]||"sheet";switch(g){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,_n(a,i,mV(o-1,t,e,f)),s.sheets.push(i),is(t.wbrels,-1,"worksheets/sheet"+o+"."+r,An.WS[0])}if(h){var p=h["!comments"],y=!1,v="";if(p&&p.length>0){var C=!1;p.forEach(function(S){S[1].forEach(function(w){w.T==!0&&(C=!0)})}),C&&(v="xl/threadedComments/threadedComment"+o+"."+r,_n(a,v,ixe(p,d,t)),s.threadedcomments.push(v),is(f,-1,"../threadedComments/threadedComment"+o+"."+r,An.TCMNT)),v="xl/comments"+o+"."+r,_n(a,v,rV(p)),s.comments.push(v),is(f,-1,"../comments"+o+"."+r,An.CMNT),y=!0}h["!legacy"]&&y&&_n(a,"xl/drawings/vmlDrawing"+o+".vml",tV(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&_n(a,Bv(i),Ip(f))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,_n(a,i,WG(t.Strings,t)),s.strs.push(i),is(t.wbrels,-1,"sharedStrings."+r,An.SST)),i="xl/workbook."+r,_n(a,i,vV(e)),s.workbooks.push(i),is(t.rels,1,i,An.WB),i="xl/theme/theme1.xml",_n(a,i,jE(e.Themes,t)),s.themes.push(i),is(t.wbrels,-1,"theme/theme1.xml",An.THEME),i="xl/styles."+r,_n(a,i,JG(e,t)),s.styles.push(i),is(t.wbrels,-1,"styles."+r,An.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",_n(a,i,e.vbaraw),s.vba.push(i),is(t.wbrels,-1,"vbaProject.bin",An.VBA)),i="xl/metadata."+r,_n(a,i,eV()),s.metadata.push(i),is(t.wbrels,-1,"metadata."+r,An.XLMETA),d.length>1&&(i="xl/persons/person.xml",_n(a,i,lxe(d)),s.people.push(i),is(t.wbrels,-1,"persons/person.xml",An.PEOPLE)),_n(a,"[Content_Types].xml",pG(s,t)),_n(a,"_rels/.rels",Ip(t.rels)),_n(a,"xl/_rels/workbook."+r+".rels",Ip(t.wbrels)),delete t.revssf,delete t.ssf,a}function $E(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Wl(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function e4e(e,t){return Hr.find(e,"EncryptedPackage")?Xwe(e,t):SV(e,t)}function t4e(e,t){var r,n=e,s=t||{};return s.type||(s.type=Tn&&Buffer.isBuffer(e)?"buffer":"base64"),r=GH(n,s),Ywe(r,s)}function PV(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return rC(e.slice(r),t);default:break e}return Zp.to_workbook(e,t)}function r4e(e,t){var r="",n=$E(e,t);switch(t.type){case"base64":r=Wl(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Bm(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=ps(r)),t.type="binary",PV(r,t)}function n4e(e,t){var r=e;return t.type=="base64"&&(r=Wl(r)),r=Mv.utils.decode(1200,r.slice(2),"str"),t.type="binary",PV(r,t)}function s4e(e){return e.match(/[^\x00-\x7F]/)?Ku(e):e}function t6(e,t,r,n){return n?(r.type="string",Zp.to_workbook(e,r)):Zp.to_workbook(t,r)}function aC(e,t){aE();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return aC(new Uint8Array(e),(r=Ds(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Bp={},r.dateNF&&(Bp.dateNF=r.dateNF),r.type||(r.type=Tn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=Tn?"buffer":"binary",n=Qfe(e),typeof Uint8Array<"u"&&!Tn&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,n=s4e(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=Ds(r),r.type="array",aC(iE(n),r)}switch((s=$E(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return e4e(Hr.read(n,r),r);break;case 9:if(s[1]<=8)return SV(n,r);break;case 60:return rC(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return cpe(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return UG.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?t4e(n,r):t6(e,n,r,a);case 239:return s[3]===60?rC(n,r):t6(e,n,r,a);case 255:if(s[1]===254)return n4e(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return ym.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return ym.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return tC.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return KG.to_workbook(n,r);break;case 10:case 13:case 32:return r4e(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return lpe.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?tC.to_workbook(n,r):t6(e,n,r,a)}function FV(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return E2(t.file,Hr.write(e,{type:Tn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Hr.write(e,t)}function a4e(e,t){var r=Ds(t||{}),n=Jwe(e,r);return i4e(n,r)}function i4e(e,t){var r={},n=Tn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Hr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(hS(s))}return t.password&&typeof encrypt_agile<"u"?FV(encrypt_agile(s,t.password),t):t.type==="file"?E2(t.file,s):t.type=="string"?ps(s):s}function o4e(e,t){var r=t||{},n=swe(e,r);return FV(n,r)}function Bu(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Ov(Ku(n));case"binary":return Ku(n);case"string":return e;case"file":return E2(t.file,n,"utf8");case"buffer":return Tn?T0(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Bu(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function l4e(e,t){switch(t.type){case"base64":return Ov(e);case"binary":return e;case"string":return e;case"file":return E2(t.file,e,"binary");case"buffer":return Tn?T0(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Ew(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Ov(r):t.type=="string"?ps(r):r;case"file":return E2(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function MV(e,t){aE(),ebe(e);var r=Ds(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=MV(e,r);return r.type="array",hS(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Bu(Jbe(e,r),r);case"slk":case"sylk":return Bu($G.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return Bu(CV(e.Sheets[e.SheetNames[s]],r),r);case"txt":return l4e(OV(e.Sheets[e.SheetNames[s]],r),r);case"csv":return Bu(UE(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return Bu(UG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return Ew(tC.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return Bu(Zp.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return Bu(KG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return Bu(zG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return Bu(AV(e,r),r);case"wk1":return Ew(ym.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return Ew(ym.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Ew(kV(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),o4e(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return a4e(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function c4e(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function u4e(e,t,r){var n={};return n.type="file",n.file=t,c4e(n),MV(e,n)}function d4e(e,t,r,n,s,a,i,o){var c=Fa(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var g=t.s.c;g<=t.e.c;++g){var p=i?e[r][g]:e[n[g]+c];if(p===void 0||p.t===void 0){if(u===void 0)continue;a[g]!=null&&(h[a[g]]=u);continue}var y=p.v;switch(p.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(a[g]!=null){if(y==null)if(p.t=="e"&&y===null)h[a[g]]=null;else if(u!==void 0)h[a[g]]=u;else if(d&&y===null)h[a[g]]=null;else continue;else h[a[g]]=d&&(p.t!=="n"||p.t==="n"&&o.rawNumbers!==!1)?y:p0(p,y,o);y!=null&&(f=!1)}}return{row:h,isempty:f}}function Q4(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,a=[],i=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Wn(d);break;case"number":c=Wn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(s=0);var f=Fa(c.s.r),h=[],g=[],p=0,y=0,v=Array.isArray(e),C=c.s.r,S=0,w={};v&&!e[C]&&(e[C]=[]);var T=u.skipHidden&&e["!cols"]||[],N=u.skipHidden&&e["!rows"]||[];for(S=c.s.c;S<=c.e.c;++S)if(!(T[S]||{}).hidden)switch(h[S]=ea(S),r=v?e[C][S]:e[h[S]+f],n){case 1:a[S]=S-c.s.c;break;case 2:a[S]=h[S];break;case 3:a[S]=u.header[S-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=p0(r,null,u),y=w[i]||0,!y)w[i]=1;else{do o=i+"_"+y++;while(w[o]);w[i]=y,w[o]=1}a[S]=o}for(C=c.s.r+s;C<=c.e.r;++C)if(!(N[C]||{}).hidden){var A=d4e(e,c,C,h,n,a,v,u);(A.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(g[p++]=A.row)}return g.length=p,g}var CD=/"/g;function f4e(e,t,r,n,s,a,i,o){for(var c=!0,u=[],d="",f=Fa(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var g=o.dense?(e[r]||[])[h]:e[n[h]+f];if(g==null)d="";else if(g.v!=null){c=!1,d=""+(o.rawNumbers&&g.t=="n"?g.v:p0(g,null,o));for(var p=0,y=0;p!==d.length;++p)if((y=d.charCodeAt(p))===s||y===a||y===34||o.forceQuotes){d='"'+d.replace(CD,'""')+'"';break}d=="ID"&&(d='"ID"')}else g.f!=null&&!g.F?(c=!1,d="="+g.f,d.indexOf(",")>=0&&(d='"'+d.replace(CD,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&c?null:u.join(i)}function UE(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=Wn(e["!ref"]),a=n.FS!==void 0?n.FS:",",i=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),u=new RegExp((a=="|"?"\\|":a)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],g=n.skipHidden&&e["!rows"]||[],p=s.s.c;p<=s.e.c;++p)(h[p]||{}).hidden||(f[p]=ea(p));for(var y=0,v=s.s.r;v<=s.e.r;++v)(g[v]||{}).hidden||(d=f4e(e,s,v,f,i,c,a,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((y++?o:"")+d)));return delete n.dense,r.join("")}function OV(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=UE(e,t);return r}function h4e(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=Wn(e["!ref"]),a="",i=[],o,c=[],u=Array.isArray(e);for(o=s.s.c;o<=s.e.c;++o)i[o]=ea(o);for(var d=s.s.r;d<=s.e.r;++d)for(a=Fa(d),o=s.s.c;o<=s.e.c;++o)if(t=i[o]+a,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function DV(e,t,r){var n=r||{},s=+!n.skipHeader,a=e||{},i=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?ta(n.origin):n.origin;i=c.r,o=c.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+s}};if(a["!ref"]){var f=Wn(a["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+t.length-1+s)}else i==-1&&(i=0,d.e.r=t.length-1+s);var h=n.header||[],g=0;t.forEach(function(y,v){pa(y).forEach(function(C){(g=h.indexOf(C))==-1&&(h[g=h.length]=C);var S=y[C],w="z",T="",N=en({c:o+g,r:i+v+s});u=Vv(a,N),S&&typeof S=="object"&&!(S instanceof Date)?a[N]=S:(typeof S=="number"?w="n":typeof S=="boolean"?w="b":typeof S=="string"?w="s":S instanceof Date?(w="d",n.cellDates||(w="n",S=li(S)),T=n.dateNF||Qr[14]):S===null&&n.nullError&&(w="e",S=0),u?(u.t=w,u.v=S,delete u.w,delete u.R,T&&(u.z=T)):a[N]=u={t:w,v:S},T&&(u.z=T))})}),d.e.c=Math.max(d.e.c,o+h.length-1);var p=Fa(i);if(s)for(g=0;g<h.length;++g)a[ea(g+o)+p]={t:"s",v:h[g]};return a["!ref"]=wn(d),a}function m4e(e,t){return DV(null,e,t)}function Vv(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=ta(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Vv(e,en(t)):Vv(e,en({r:t,c:r||0}))}function g4e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function zE(){return{SheetNames:[],Sheets:{}}}function WE(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=i+s)!=-1;++s);}if(yV(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function p4e(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=g4e(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function x4e(e,t){return e.z=t,e}function RV(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function y4e(e,t,r){return RV(e,"#"+t,r)}function v4e(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function b4e(e,t,r,n){for(var s=typeof t!="string"?t:Wn(t),a=typeof t=="string"?t:wn(t),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var c=Vv(e,i,o);c.t="n",c.F=a,delete c.v,i==s.s.r&&o==s.s.c&&(c.f=r,n&&(c.D=!0))}return e}var t4={encode_col:ea,encode_row:Fa,encode_cell:en,encode_range:wn,decode_col:yE,decode_row:xE,split_cell:jhe,decode_cell:ta,decode_range:pl,format_cell:p0,sheet_add_aoa:cG,sheet_add_json:DV,sheet_add_dom:TV,aoa_to_sheet:j1,json_to_sheet:m4e,table_to_sheet:EV,table_to_book:Twe,sheet_to_csv:UE,sheet_to_txt:OV,sheet_to_json:Q4,sheet_to_html:CV,sheet_to_formulae:h4e,sheet_to_row_object_array:Q4,sheet_get_cell:Vv,book_new:zE,book_append_sheet:WE,book_set_sheet_visibility:p4e,cell_set_number_format:x4e,cell_set_hyperlink:RV,cell_set_internal_link:y4e,cell_add_comment:v4e,sheet_set_array_formula:b4e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const IV=({onBackToCabinet:e,selectedGrade:t,selectedClass:r,openRetestModal:n,forceRefreshOnMount:s=!1})=>{Ko(),_0();const{user:a,isAuthenticated:i}=Is(),{showNotification:o}=ci(),c=_.useCallback(Re=>{let qe=null;if(typeof Re?.percentage=="number"&&!Number.isNaN(Re.percentage))return qe=Math.round(Re.percentage),console.debug("[TeacherResults] Using provided percentage",{percentage:Re.percentage,rounded:qe,result:Re}),qe;const Lt=Re?.retest_best_score??Re?.score,yt=Re?.retest_best_max_score??Re?.max_score,yr=Number(Lt??0),Nt=Number(yt??0);return Nt>0&&(qe=Math.round(yr/Nt*100)),qe},[]);_.useCallback(Re=>{const qe=c(Re);return qe===null?"text-gray-600":qe<50?"text-red-600 font-semibold":qe<70?"text-yellow-600":"text-green-600"},[c]),_.useCallback(Re=>{const qe=c(Re);return qe!==null&&qe<50},[c]);const[u,d]=_.useState(null),[f,h]=_.useState(!0),[g,p]=_.useState(""),[y,v]=_.useState([]),[C,S]=_.useState(null),[w,T]=_.useState(!1),[N,A]=_.useState([]),[P,j]=_.useState([]),[F,R]=_.useState([1,2]),[L,V]=_.useState(null),[Z,Y]=_.useState(null),[re,ue]=_.useState(null),[z,X]=_.useState("main"),[I,B]=_.useState(null),[W,D]=_.useState(null),U=I||t,q=W||r,[H,te]=_.useState(null),[Q,ae]=_.useState({}),[ce,me]=_.useState(!1),[xe,se]=_.useState(new Set),[De,He]=_.useState(!0),[rt,_t]=_.useState(null),[Ke,tt]=_.useState(null),[Pe,je]=_.useState(!1),[Qe,vt]=_.useState(!1),[Ot,$t]=_.useState(!1),Gt=_.useRef(null),[ir,dt]=_.useState(null),[gt,kt]=_.useState(!1),[Ge,Xe]=_.useState(null),[Et,Ut]=_.useState(!1),[Wt,pr]=_.useState(null),[wr,br]=_.useState(""),[lr,Er]=_.useState(""),[we,_e]=_.useState(!1),[Ee,Fe]=_.useState(!1),[at,jt]=_.useState(null),[Mt,Be]=_.useState(""),[lt,ct]=_.useState(!1),[Qt,rr]=_.useState(new Set),[_r,tn]=_.useState({}),[Fr,an]=_.useState(!1),[pe,Ne]=_.useState(null),[le,fe]=_.useState(""),[ge,Se]=_.useState(!1),[ze,it]=_.useState(null),[Ye,de]=_.useState(null),[ve,Me]=_.useState(!1),[Oe,nt]=_.useState(!1),[bt,At]=_.useState({isOpen:!1,testResult:null}),[cr,pt]=_.useState({}),zt=_.useRef(new Set),xr=_.useRef({}),Ir=_.useRef(null);_.useEffect(()=>{console.log(" editingColumns state changed:",Array.from(Qt)),zt.current=Qt},[Qt]),_.useEffect(()=>{console.log(" columnScores state changed:",_r),xr.current=_r},[_r]);const $r=_.useCallback(Re=>{console.log(" Toggling test collapse for:",Re),se(qe=>{const Lt=new Set(qe);return Lt.has(Re)?(Lt.delete(Re),console.log(" Expanding test:",Re)):(Lt.add(Re),console.log(" Collapsing test:",Re)),console.log(" New collapsed tests:",Array.from(Lt)),Lt})},[]),mn=_.useCallback(()=>{if(Gt.current){const{scrollLeft:Re,scrollWidth:qe,clientWidth:Lt}=Gt.current;vt(Re>0),$t(Re<qe-Lt-1)}},[]);_.useEffect(()=>{zr()},[]),_.useEffect(()=>{if(L&&Gt.current){const Re=setTimeout(mn,100);return()=>clearTimeout(Re)}},[L,mn]),_.useEffect(()=>{console.log(" Current collapsed tests state:",Array.from(xe))},[xe]);const Gr=_.useCallback(async(Re,qe=!1)=>{try{me(!0);const Lt=a?.teacher_id,yt=`${U}/${q}`,yr=await g0e.getTeacherStudentResults(Lt,U,yt,Re,qe);if(yr.success){console.log(" Results loaded for term:",Re,yr.results?.length||0,"results"),console.log(" Students loaded:",yr.students?.length||0,"students");const Nt=[],Vr=new Set,Dn=new Set;yr.results&&yr.results.length>0&&yr.results.forEach(sr=>{sr.test_name&&!Vr.has(sr.test_name)&&(Vr.add(sr.test_name),Nt.push({test_name:sr.test_name,test_type:sr.test_type,subject:sr.subject})),sr.subject&&Dn.add(sr.subject)});const We=(yr.students||[]).map(sr=>{const xs={};return(yr.results||[]).filter(on=>on.student_id===sr.student_id).forEach(on=>{on.test_name&&(xs[on.test_name]={id:on.id,test_type:on.test_type,test_id:on.test_id,subject_id:on.subject_id,score:on.score,max_score:on.max_score,retest_offered:on.retest_offered,caught_cheating:on.caught_cheating,visibility_change_times:on.visibility_change_times,answers:on.answers,ai_feedback:on.ai_feedback,name:on.name,surname:on.surname,test_name:on.test_name})}),{...sr,...xs}}),fr={results:yr.results||[],students:We,class:We,unique_tests:Nt,subjects:Array.from(Dn),count:yr.count||0,student_count:yr.student_count||0};console.log(" Processed results data:",{uniqueTests:Nt.length,subjects:Array.from(Dn),resultsCount:yr.results?.length||0,studentsWithScores:We.length,sampleStudent:We[0]}),V(fr),ae(fr),ue(new Date)}}catch(Lt){console.error(" Error loading results for term:",Lt),V(null),ae(null)}finally{me(!1)}},[a,U,q]);_.useEffect(()=>{(async()=>{try{je(!0),await hu.loadAcademicCalendar();const qe=hu.getCurrentSemesterTerms();tt(qe),qe?.currentTerm&&(_t(qe.currentTerm.id),U&&q&&Gr(qe.currentTerm.id,s))}catch(qe){console.error(" Error initializing academic calendar:",qe)}finally{je(!1)}})()},[U,q,Gr,s]),_.useEffect(()=>{t&&r&&(console.log(" Props detected:",{grade:t,class:r}),Ke?.currentTerm&&(_t(Ke.currentTerm.id),Gr(Ke.currentTerm.id,s)))},[t,r,Ke,Gr,s]);const zr=_.useCallback(async()=>{console.log(" Initializing teacher results...");try{if(h(!0),p(""),!i||!a){console.log(" User not authenticated"),p("User not authenticated");return}if(a.role!==$o.TEACHER){console.error(" Invalid user role for teacher results:",a.role),p("Access denied. Teacher role required.");return}console.log(" Loading teacher assignments..."),await Xt(),console.log(" TODO: Load academic calendar service"),console.log(" Teacher results initialization complete!")}catch(Re){console.error(" Error initializing teacher results:",Re),p("Failed to initialize teacher results")}finally{h(!1)}},[i,a]),Xt=_.useCallback(async()=>{console.log(" Loading teacher assignments...");try{const Re=`teacher_data_${a?.teacher_id||a?.id||""}`;let qe=Es(Re);qe&&qe.subjects&&qe.subjects.length>0&&(qe.subjects.some(We=>We.subject&&We.classes&&We.classes.length>0)||(console.log(" Cached data has invalid subject structure, forcing refresh"),localStorage.removeItem(Re),qe=null)),qe?console.log(" Cache HIT! Using cached teacher data"):(console.log(" Cache MISS! Fetching teacher data from API"),qe=await Us.getTeacherData(),console.log(" Teacher data loaded:",qe),gs(Re,qe,ls.teacher_subjects)),d(qe);const Lt=[];qe&&qe.subjects&&(console.log(" Teacher subjects structure:",qe.subjects),qe.subjects.forEach(Dn=>{console.log(" Processing subject:",Dn),Dn.classes&&Dn.classes.forEach(We=>{We.grade&&We.class&&Lt.push({grade:We.grade,class:We.class,subject:Dn.subject||Dn.name||"Unknown Subject"})})})),j(Lt),console.log(" Available classes from teacher data:",Lt);const yt=`teacher_tests_${a?.teacher_id||a?.id||""}`,yr=Es(yt);yr&&yr.some(Dn=>Dn.test_type==="drawing")&&(console.log(" Drawing test detected - forcing cache refresh"),localStorage.removeItem(yt));let Nt=Es(yt);Nt?console.log(" Cache HIT! Using cached teacher tests"):(console.log(" Cache MISS! Fetching teacher tests from API"),Nt=await Cn.getTeacherTests(),console.log(" Teacher tests loaded:",Nt),gs(yt,Nt,ls.teacher_tests));const Vr=Nt.flatMap(Dn=>Dn.assignments||[]);v(Vr),console.log(" Raw assignments data:",Vr),console.log(" Teacher assignments loaded:",Vr.length)}catch(Re){console.error(" Error loading teacher assignments:",Re),o("Failed to load teacher assignments","error")}},[o]),xn=_.useCallback(async(Re,qe)=>{console.log(" Showing classes for grade:",Re,"class:",qe),B(Re),D(qe),S(null),V(null),Re&&qe&&console.log(" TODO: Implement academic calendar service for term selection")},[]);_.useCallback((Re,qe)=>{console.log(" Showing semesters for class:",Re,qe),S(null),V(null),console.log(" TODO: Implement academic calendar service for term selection")},[]),_.useCallback((Re,qe)=>{console.log(" Class clicked:",Re,qe),T(!0),console.log(" TODO: Implement academic calendar service for term selection")},[]);const Lr=_.useCallback(async(Re,qe=!1)=>{!U||!q||(console.log(" Loading results for semester:",Re,"forceRefresh:",qe),S(Re),Ke?.currentTerm&&await Gr(Ke.currentTerm.id,qe))},[U,q,Ke,Gr]),jn=_.useCallback(()=>Ke?l.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Current Semester: ",Ke?.semester===1?"Semester 1":"Semester 2"]}),l.jsx("div",{className:"flex space-x-4",children:Ke?.terms.map(Re=>l.jsx(ht.button,{className:`px-6 py-3 rounded-lg font-semibold transition-all duration-300 ${Re.isCurrent?"bg-blue-600 text-white shadow-lg":rt===Re.id?"bg-green-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,onClick:()=>{_t(Re.id),Gr(Re.id)},whileHover:{scale:1.05},whileTap:{scale:.95},children:Re.label},Re.id))})]}):l.jsx("div",{className:"flex space-x-4 mb-6",children:l.jsx("div",{className:"px-6 py-3 rounded-lg bg-gray-200 text-gray-500",children:"Loading terms..."})}),[Ke,rt,Gr]);_.useCallback(Re=>Re.reduce((qe,Lt)=>(qe[Lt.student_id]||(qe[Lt.student_id]=[]),qe[Lt.student_id].push(Lt),qe),{}),[]),_.useCallback(Re=>{if(Re.length===0)return 0;const qe=Re.reduce((Lt,yt)=>Lt+(yt.percentage||0),0);return Math.round(qe/Re.length)},[]),_.useCallback(Re=>{Re.score<Re.passing_score&&window.confirm("Give another try?")&&Ln(Re.student_id,Re.test_id)},[]);const Ln=_.useCallback(async(Re,qe)=>{try{(await fetch("/.netlify/functions/reset-test-attempt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:Re,testId:qe})})).ok&&(q&&Lr(C,!0),o("Test made accessible to student","success"))}catch(Lt){console.error("Error resetting test attempt:",Lt),o("Failed to reset test attempt","error")}},[q,C,Lr,o]),ya=_.useCallback((Re,qe)=>{if(Re===null||qe===null)return"";const Lt=Math.round(Re/qe*100);return Lt>=80?"text-green-600 bg-green-50":Lt>=60?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50"},[]),On=_.useCallback(Re=>{dt(Re),kt(!0)},[]),Te=_.useCallback((Re,qe="overview",Lt)=>{try{const yr=!!Re?.ai_feedback,Nt=typeof Re?.ai_feedback;let Vr=[];if(yr)if(Nt==="string")try{Vr=Object.keys(JSON.parse(Re.ai_feedback))}catch{Vr=["<invalid json>"]}else Nt==="object"&&(Vr=Object.keys(Re.ai_feedback||{}));console.log("[AI DEBUG] Opening speaking result",{hasAi:yr,aiType:Nt,aiKeys:Vr})}catch{}const yt={...Re,__initialTab:qe};Lt&&(yt.__audioUrl=Lt),Xe(yt),Ut(!0)},[]),Tt=_.useCallback(async(Re,qe)=>{if(!Re||!qe)return console.error("fetchTestQuestions: Missing testType or testId",{testType:Re,testId:qe}),null;const Lt=`${Re}_${qe}`;if(cr[Lt])return console.log(" Using cached questions for",Lt),cr[Lt];nt(!0);try{console.log(" Fetching questions for",{testType:Re,testId:qe});const yt=await Cn.getTestQuestions(Re,qe);return console.log(" Questions fetched:",yt?.length||0,"questions"),pt(yr=>({...yr,[Lt]:yt})),yt}catch(yt){return console.error(" Error fetching test questions:",yt),o("Failed to load test questions","error"),null}finally{nt(!1)}},[cr,o]),Sr=_.useCallback(async(Re,qe)=>{if(console.log(" Opening answer modal for:",{testResult:Re,test:qe}),console.log(" [handleViewAnswers] testResult.answers:",Re?.answers),console.log(" [handleViewAnswers] testResult.answers type:",typeof Re?.answers),console.log(" [handleViewAnswers] testResult.retest_offered:",Re?.retest_offered),console.log(" [handleViewAnswers] Full testResult keys:",Re?Object.keys(Re):"null"),Re.test_type==="drawing"||qe?.test_type==="drawing"){On(Re);return}if(Re.test_type==="speaking"||qe?.test_type==="speaking"){Te(Re);return}const Lt=Re.test_type||qe?.test_type;if(Lt==="word_matching"||Lt==="matching_type"){o("Word matching and picture matching tests have separate view mechanisms","info");return}it(Re),de(null),Me(!0),nt(!0);const yt=Re.test_id||qe?.test_id;if(!Lt||!yt){o("Unable to load test questions: Missing test type or ID","error"),nt(!1);return}try{const yr=await Tt(Lt,yt);yr?de(yr):o("Failed to load test questions","error")}finally{nt(!1)}},[Tt,On,Te,o]);_.useCallback((Re,qe,Lt)=>{pr({resultId:Re,score:qe,maxScore:Lt}),br(qe?.toString()||""),Er(Lt?.toString()||""),Fe(!0)},[]),_.useCallback(Re=>{br(Re)},[]),_.useCallback(Re=>{Er(Re)},[]),_.useCallback(async()=>{if(Wt){_e(!0);try{const Re={resultId:Wt.resultId,score:parseInt(wr)||0,maxScore:parseInt(lr)||1};(await fetch(qd.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Re)})).ok?(o("Score updated successfully","success"),q&&Lr(C,!0),pr(null),br(""),Er(""),Fe(!1)):o("Failed to update score","error")}catch(Re){console.error("Error updating score:",Re),o("Failed to update score","error")}finally{_e(!1)}}},[Wt,wr,lr,q,C,Lr,o]),_.useCallback(()=>{pr(null),br(""),Er(""),Fe(!1)},[]);const Dr=_.useCallback((Re,qe)=>{jt({resultId:Re,score:qe}),Be(qe.toString())},[]),Yn=_.useCallback(async()=>{if(at){ct(!0);try{const Re={resultId:at.resultId,score:parseInt(Mt)||0},qe=await fetch(qd.UPDATE_SPEAKING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Re)});if(qe.ok){const Lt=await qe.json();o("Speaking test score updated successfully","success"),Ge&&Xe(yt=>({...yt,score:Lt.score,percentage:Lt.percentage})),q&&Lr(C,!0),jt(null),Be("")}else{const Lt=await qe.json();o(Lt.error||"Failed to update speaking test score","error")}}catch(Re){console.error("Error updating speaking test score:",Re),o("Failed to update speaking test score","error")}finally{ct(!1)}}},[at,Mt,q,C,Lr,o]),Pn=_.useCallback(()=>{jt(null),Be("")},[]),us=(Re,qe)=>{console.log(" Starting column editing for drawing test:",Re),console.log(" Current editingColumns before update:",Array.from(Qt)),console.log(" Results data passed to function:",qe),rr(Lt=>{const yt=new Set(Lt).add(Re);return console.log(" Updated editingColumns:",Array.from(yt)),yt}),console.log(" Initializing column scores for test:",Re),console.log(" Results data:",qe),console.log(" Results.class:","null"),console.log(" No results or class data available")},qs=_.useCallback(Re=>{rr(qe=>{const Lt=new Set(qe);return Lt.delete(Re),Lt}),tn(qe=>{const Lt={...qe};return delete Lt[Re],Lt})},[]),fi=_.useCallback((Re,qe,Lt,yt)=>{const yr=yt.toString();xr.current[Re]||(xr.current[Re]={}),xr.current[Re][qe]||(xr.current[Re][qe]={}),xr.current[Re][qe][Lt]=yr;const Nt=parseInt(yt)||0;tn(Vr=>({...Vr,[Re]:{...Vr[Re],[qe]:{...Vr[Re]?.[qe],[Lt]:Nt}}}))},[]);_.useCallback(async Re=>{if(xr.current[Re]){an(!0);try{const qe=Object.entries(xr.current[Re]).map(([Nt,Vr])=>({resultId:Vr.resultId,score:parseInt(Vr.score)||0,maxScore:parseInt(Vr.maxScore)||100}));console.log(" Saving column scores for",Re,":",qe);const Lt=qe.map(Nt=>(console.log(" Sending update:",Nt),fetch(qd.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Nt)})));(await Promise.all(Lt)).every(Nt=>Nt.ok)?(o(`Scores updated successfully for ${Re}`,"success"),q&&Lr(C,!0),qs(Re)):o("Failed to update some scores","error")}catch(qe){console.error("Error updating column scores:",qe),o("Failed to update scores","error")}finally{an(!1)}}},[_r,q,C,Lr,o,qs]);const dn=_.useCallback((Re,qe,Lt)=>!qe||qe.length===0?l.jsx(ht.div,{className:"text-center py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:l.jsx("p",{className:"text-gray-500",children:"No students found for this subject"})}):l.jsx(ht.div,{className:"relative",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:l.jsxs(ht.div,{className:"bg-white rounded-lg shadow-lg overflow-hidden",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.1},children:[l.jsx("div",{className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",onScroll:yt=>{Gt.current&&(Gt.current.scrollLeft=yt.target.scrollLeft)},children:l.jsx("div",{className:"min-w-full h-1",children:l.jsx("div",{className:"h-1",style:{width:`${(Lt.length+5)*120}px`}})})}),l.jsx("div",{ref:Gt,className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",onScroll:yt=>{mn(yt);const yr=yt.target.previousElementSibling;yr&&(yr.scrollLeft=yt.target.scrollLeft)},children:l.jsxs("table",{className:"min-w-full border-collapse text-sm min-w-max",children:[l.jsx("thead",{children:l.jsxs(ht.tr,{className:"bg-gradient-to-r from-blue-50 to-indigo-50",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[l.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 w-20 text-center",children:"Student ID"}),l.jsx("th",{className:`border-b border-gray-200 px-2 py-4 text-left font-semibold text-gray-700 ${De?"w-8 min-w-[32px] max-w-[32px] bg-gray-100 cursor-pointer select-none":"min-w-[180px] bg-blue-50 cursor-pointer select-none"}`,onClick:yt=>{yt.preventDefault(),yt.stopPropagation(),He(!De)},title:"Toggle student name columns",children:De?l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"truncate",title:"Student Name",children:"Student Name"}),l.jsx("svg",{className:"w-4 h-4 ml-1 flex-shrink-0 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),l.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 w-16 text-center",children:"No."}),l.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 min-w-[100px]",children:"Nickname"}),Lt.map((yt,yr)=>{const Nt=xe.has(yt.test_name),Vr=yt.test_type==="drawing",Dn=zt.current.has(yt.test_name);return console.log(` Rendering test ${yt.test_name}:`,{isDrawingTest:Vr,isEditingColumn:Dn,editingColumns:Array.from(zt.current),test_type:yt.test_type}),l.jsx("th",{className:`border-b border-gray-200 px-2 py-4 text-left font-semibold text-gray-700 cursor-pointer hover:bg-blue-200 transition-colors select-none ${Nt?"w-8 min-w-[32px] max-w-[32px] bg-gray-100":"min-w-[100px] bg-blue-50"}`,onClick:We=>{We.preventDefault(),We.stopPropagation(),$r(yt.test_name)},children:Nt?l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"truncate",title:yt.test_name,children:yt.test_name.length>8?yt.test_name.substring(0,8)+"...":yt.test_name}),l.jsx("svg",{className:"w-4 h-4 ml-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})},yr)})]})}),l.jsx("tbody",{children:l.jsx(Uo,{children:qe.map((yt,yr)=>l.jsxs(ht.tr,{className:`border-b border-gray-100 hover:bg-blue-50 transition-colors duration-200 ${yr%2===0?"bg-white":"bg-gray-50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1+yr*.05,ease:"easeOut"},whileHover:{scale:1.01,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.99},children:[l.jsx(ht.td,{className:"border-b border-gray-100 px-4 py-4 text-center font-semibold text-gray-900",whileHover:{scale:1.05},transition:{duration:.2},children:yt.student_id}),De?l.jsx("td",{className:"border-b border-gray-100 px-1 py-4 text-sm w-8 min-w-[32px] max-w-[32px]",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:Nt=>{Nt.preventDefault(),Nt.stopPropagation(),He(!1)},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}):l.jsxs(l.Fragment,{children:[l.jsx(ht.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:yt.name}),l.jsx(ht.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:yt.surname})]}),l.jsx(ht.td,{className:"border-b border-gray-100 px-4 py-4 text-center text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:yt.number??yr+1}),l.jsx(ht.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-600",whileHover:{scale:1.02},transition:{duration:.2},children:yt.nickname||"-"}),Lt.map((Nt,Vr)=>{const Dn=xe.has(Nt.test_name),We=yt[Nt.test_name];return Dn?(console.log(" Rendering collapsed column for test:",Nt.test_name),l.jsx("td",{className:"border-b border-gray-100 px-1 py-4 text-sm w-8 min-w-[32px] max-w-[32px]",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:fr=>{fr.preventDefault(),fr.stopPropagation(),console.log(" Clicked on collapsed arrow for:",Nt.test_name),$r(Nt.test_name)},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})},Vr)):l.jsx(ht.td,{className:"border-b border-gray-100 px-2 py-4 text-sm min-w-[100px]",initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},transition:{duration:.3},whileHover:{scale:1.02},onClick:fr=>{console.debug("[TeacherResults] Main table TD clicked",{testResult:We,student:yt.student_id});const sr=We?.test_type||Nt?.test_type;if(sr==="drawing"||sr==="speaking")return;const xs=c(We),yn=xs!==null&&xs<50;if(We?.retest_offered===!0&&(sr==="multiple_choice"||sr==="true_false"||sr==="input")){Sr(We,Nt);return}if(sr==="fill_blanks"||sr==="matching_type"||sr==="word_matching")if(console.debug("[TeacherResults] Fill Blanks/Matching/Word Matching clicked",{testType:sr,isRed:yn,testResult:We}),yn){if(We?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] Main table TD -> opening retest modal",{studentId:yt.student_id,test:Nt}),n({failedStudentIds:[yt.student_id],test_type:Nt.test_type,original_test_id:We?.test_id||Nt.test_id,subject_id:We?.subject_id||Nt.subject_id,grade:t,class:r})}else console.debug("[TeacherResults] Opening edit score modal",{testResult:We}),At({isOpen:!0,testResult:We});else if(yn){if(We?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] Main table TD -> opening retest modal",{studentId:yt.student_id,test:Nt}),n({failedStudentIds:[yt.student_id],test_type:Nt.test_type,original_test_id:We?.test_id||Nt.test_id,subject_id:We?.subject_id||Nt.subject_id,grade:t,class:r})}else Sr(We,Nt)},children:We&&We.test_type==="drawing"?l.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[l.jsx("button",{onClick:()=>On(We),className:"text-blue-600 hover:text-blue-800 underline text-sm font-medium px-2 py-1 rounded hover:bg-blue-50",children:"View Drawing"}),(()=>{const fr=`${Nt.test_name}|${yt.student_id}`,sr=pe===fr,xs=Number.isFinite(We?.score)?We.score:0;if(!sr){const yn=c(We),on=yn!==null&&yn<50,vn=yn!==null&&yn>=50&&yn<70,kn=We?.retest_offered===!0,Kl=yn===null?"text-gray-600":on?"text-red-600 font-semibold":vn?"text-yellow-600":"text-green-600";return l.jsxs(ht.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${Kl} cursor-pointer hover:opacity-90 ${kn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:on?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:Fi=>{Fi.preventDefault(),Fi.stopPropagation(),on&&!kn?n({failedStudentIds:[yt.student_id],test_type:Nt.test_type,original_test_id:We?.test_id||Nt.test_id,subject_id:We?.subject_id||Nt.subject_id,grade:t,class:r}):(Ne(fr),fe(String(xs)))},title:kn?"Retest offered":on?"Offer retest":"Double-click to edit score",children:[(()=>{const Fi=We.retest_best_score??We.score,gh=We.retest_best_max_score??We.max_score;return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:on?"text-red-700":"",children:Fi}),"/",l.jsx("span",{children:gh})]})})(),We.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})}return l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"number",min:"0",max:10,value:le,onChange:yn=>fe(yn.target.value),onBlur:async()=>{const yn=Math.max(0,Math.min(10,parseFloat(le||"0")));Se(!0);try{const on={resultId:We?.id,score:yn,maxScore:10},vn=await(window.tokenManager?.getToken()||da.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");if(!(await fetch(qd.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:vn?`Bearer ${vn}`:""},body:JSON.stringify(on)})).ok)throw new Error("Failed to save")}catch{}finally{Se(!1),Ne(null),Lr(C,!0)}},onKeyDown:async yn=>{yn.key==="Enter"?yn.currentTarget.blur():yn.key==="Escape"&&Ne(null)},className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0",disabled:ge}),l.jsx("span",{className:"text-xs text-gray-500",children:"/"}),l.jsx("input",{type:"number",value:10,className:"w-12 px-2 py-1 text-xs border border-gray-300 bg-gray-100 rounded",disabled:!0})]})})(),We.caught_cheating&&We.visibility_change_times&&l.jsxs("span",{className:"text-xs text-red-600",children:["(",We.visibility_change_times,")"]})]}):We&&(We.test_type==="speaking"||Nt.test_type==="speaking")?l.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[(()=>{const fr=We?.answers;let sr;if(typeof fr=="string")if(/^https?:\/\//i.test(fr))sr=fr;else try{sr=JSON.parse(fr)?.audio_url}catch{}else fr&&typeof fr=="object"&&(sr=fr.audio_url);return!sr&&We?.audio_url&&(sr=We.audio_url),l.jsx(l.Fragment,{children:l.jsx("button",{onClick:()=>Te({...We,__studentId:yt.student_id},"audio",sr),className:"text-blue-600 hover:text-blue-800 underline text-sm font-medium px-2 py-1 rounded hover:bg-blue-50",children:"Results"})})})(),(()=>{const fr=zt.current.has(Nt.test_name);return console.log(` Score cell for ${Nt.test_name}:`,{isEditing:fr,editingColumns:Array.from(zt.current),test_name:Nt.test_name}),fr})()?l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"number",min:"0",max:We.max_score||100,value:xr.current[Nt.test_name]?.[yt.student_id]?.score||We.score||"",onChange:fr=>fi(Nt.test_name,yt.student_id,"score",fr.target.value),className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),l.jsx("span",{className:"text-xs text-gray-500",children:"/"}),l.jsx("input",{type:"number",min:"1",value:xr.current[Nt.test_name]?.[yt.student_id]?.maxScore||We.max_score||100,onChange:fr=>fi(Nt.test_name,yt.student_id,"maxScore",fr.target.value),className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Max"})]}):l.jsxs("div",{className:"px-2 py-1 rounded-full text-xs font-medium",onDoubleClick:()=>{console.log(" Double-clicked on speaking test score:",Nt.test_name),console.log(" Results state at double-click:",L),console.log(" Test result:",We),console.log(" Student:",yt),console.log(" Test:",Nt),We&&We.id?(console.log(" Starting column editing for speaking test:",Nt.test_name),us(Nt.test_name)):console.log(" No test result ID found, cannot edit")},title:"Double-click to edit scores",children:[(()=>{const fr=c(We),sr=fr!==null&&fr<50,xs=fr!==null&&fr>=50&&fr<70,yn=We.retest_offered,on=fr===null?"text-gray-600":sr?"text-red-600 font-semibold":xs?"text-yellow-600":"text-green-600";return l.jsxs(ht.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${on} cursor-pointer hover:opacity-90 ${yn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:sr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:vn=>{vn.preventDefault(),vn.stopPropagation(),sr&&!yn&&(console.log(" Offering retest for speaking test:",Nt.test_name),n({failedStudentIds:[yt.student_id],test_type:Nt.test_type,original_test_id:We?.test_id||Nt.test_id,subject_id:We?.subject_id||Nt.subject_id,grade:t,class:r}))},title:yn?"Retest offered":sr?"Offer retest":'Use "View Results" button to review',children:[(()=>{const vn=We.retest_best_score??We.score,kn=We.retest_best_max_score??We.max_score;return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:sr?"text-red-700":"",children:vn}),"/",l.jsx("span",{children:kn})]})})(),We.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})(),We.caught_cheating&&We.visibility_change_times&&l.jsxs("span",{className:"text-xs text-red-600",children:["(",We.visibility_change_times,")"]})]})]}):We&&We.score!==null&&We.score!==void 0?l.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[(()=>{const fr=c(We),sr=fr!==null&&fr<50,xs=fr!==null&&fr>=50&&fr<70,yn=fr===null?"text-gray-600":sr?"text-red-600 font-semibold":xs?"text-yellow-600":"text-green-600",on=We?.retest_offered===!0;return l.jsxs(ht.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${yn} cursor-pointer hover:opacity-90 ${on?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:sr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:vn=>{vn.preventDefault(),vn.stopPropagation();const kn=We?.test_type||Nt?.test_type;if(!(kn==="drawing"||kn==="speaking")){if(We?.retest_offered===!0&&(kn==="multiple_choice"||kn==="true_false"||kn==="input")){Sr(We,Nt);return}if(kn==="fill_blanks"||kn==="matching_type"||kn==="word_matching"){if(console.debug("[TeacherResults] Score pill clicked (Fill Blanks/Matching/Word Matching)",{testType:kn,isRed:sr,testResult:We}),sr){if(We?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[yt.student_id],test_type:Nt.test_type,original_test_id:We?.test_id||Nt.test_id,subject_id:We?.subject_id||Nt.subject_id,grade:t,class:r})}else console.debug("[TeacherResults] Opening edit score modal from score pill",{testResult:We}),At({isOpen:!0,testResult:We});return}if(sr){if(We?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[yt.student_id],test_type:Nt.test_type,original_test_id:We?.test_id||Nt.test_id,subject_id:We?.subject_id||Nt.subject_id,grade:t,class:r})}else Sr(We,Nt)}},title:on?"Click to view retest answers":sr?"Offer retest":"",children:[(()=>{const vn=We.retest_best_score??We.score,kn=We.retest_best_max_score??We.max_score;return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:sr?"text-red-700":"",children:vn}),"/",l.jsx("span",{children:kn})]})})(),We.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})(),We.caught_cheating&&We.visibility_change_times&&l.jsxs("span",{className:"text-xs text-red-600",children:["(",We.visibility_change_times,")"]})]}):l.jsx("span",{className:"text-gray-400",children:"-"})},Vr)})]},yr))})})]})})]})}),[ya,xe,$r,De]),vl=_.useCallback((Re,qe,Lt)=>!qe||qe.length===0?l.jsx(ht.div,{className:"text-center py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:l.jsx("p",{className:"text-gray-500",children:"No students found for this subject"})}):l.jsx(ht.div,{className:"w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},children:l.jsx(ht.div,{className:"overflow-x-auto -mx-4 px-4",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1},children:l.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden min-w-max",children:l.jsxs("table",{className:"w-full border-collapse text-xs min-w-max",children:[l.jsx("thead",{children:l.jsxs(ht.tr,{className:"bg-gradient-to-r from-blue-50 to-indigo-50",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2,delay:.2},children:[l.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 w-16 text-center",children:"ID"}),l.jsx("th",{className:`border-b border-gray-200 px-2 py-3 text-left font-semibold text-gray-700 ${De?"w-8 min-w-[32px] max-w-[32px] bg-gray-100 cursor-pointer select-none":"min-w-[160px] bg-blue-50 cursor-pointer select-none"}`,onClick:yt=>{yt.preventDefault(),yt.stopPropagation(),He(!De)},title:"Toggle student name columns",children:De?l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"truncate",title:"Student Name",children:"Student Name"}),l.jsx("svg",{className:"w-3 h-3 ml-1 flex-shrink-0 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),l.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 w-12 text-center",children:"No."}),l.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 min-w-[80px]",children:"Nickname"}),Lt.map((yt,yr)=>(yt.test_type,zt.current.has(yt.test_name),l.jsx(ht.th,{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 min-w-[100px]",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.3+yr*.05},children:l.jsx("div",{className:"flex flex-col space-y-1",children:l.jsx("span",{className:"text-xs",children:yt.test_name.length>10?yt.test_name.substring(0,10)+"...":yt.test_name})})},yr)))]})}),l.jsx("tbody",{children:l.jsx(Uo,{children:qe.map((yt,yr)=>l.jsxs(ht.tr,{className:`border-b border-gray-100 hover:bg-blue-50 transition-colors duration-200 ${yr%2===0?"bg-white":"bg-gray-50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.1+yr*.03,ease:"easeOut"},whileHover:{scale:1.005,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.995},children:[l.jsx(ht.td,{className:"border-b border-gray-100 px-3 py-3 text-center font-semibold text-gray-900",whileHover:{scale:1.03},transition:{duration:.15},children:yt.student_id}),De?l.jsx("td",{className:"border-b border-gray-100 px-1 py-3 text-xs w-8 min-w-[32px] max-w-[32px]",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-3 h-3 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:Nt=>{Nt.preventDefault(),Nt.stopPropagation(),He(!1)},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}):l.jsxs(l.Fragment,{children:[l.jsx(ht.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:yt.name}),l.jsx(ht.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:yt.surname})]}),l.jsx(ht.td,{className:"border-b border-gray-100 px-3 py-3 text-center text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:yt.number??yr+1}),l.jsx(ht.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-600 whitespace-normal break-words",whileHover:{scale:1.01},transition:{duration:.15},children:yt.nickname||"-"}),Lt.map((Nt,Vr)=>{const Dn=xe.has(Nt.test_name),We=yt[Nt.test_name];return Dn?l.jsx("td",{className:"border-b border-gray-100 px-1 py-3 text-sm w-8 min-w-[32px] max-w-[32px]",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:fr=>{fr.preventDefault(),fr.stopPropagation(),$r(Nt.test_name)},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})},Vr):l.jsx(ht.td,{className:"border-b border-gray-100 px-3 py-3 text-sm",whileHover:{scale:1.01},transition:{duration:.15},onClick:fr=>{console.debug("[TeacherResults] TD clicked",{testResult:We,student:yt.student_id});const sr=We?.test_type||Nt?.test_type;if(sr==="drawing"||sr==="speaking")return;const xs=c(We),yn=xs!==null&&xs<50;if(We?.retest_offered===!0&&(sr==="multiple_choice"||sr==="true_false"||sr==="input")){Sr(We,Nt);return}if(sr==="fill_blanks"||sr==="matching_type"||sr==="word_matching")if(console.debug("[TeacherResults] Fill Blanks/Matching/Word Matching clicked (nested table)",{testType:sr,isRed:yn,testResult:We}),yn){if(We?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] TD -> opening retest modal",{studentId:yt.student_id}),n({failedStudentIds:[yt.student_id],test_type:We.test_type,original_test_id:We.test_id,subject_id:We.subject_id,grade:t,class:r})}else console.debug("[TeacherResults] Opening edit score modal (nested table)",{testResult:We}),At({isOpen:!0,testResult:We});else if(yn){if(We?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] TD -> opening retest modal",{studentId:yt.student_id}),n({failedStudentIds:[yt.student_id],test_type:We.test_type,original_test_id:We.test_id,subject_id:We.subject_id,grade:t,class:r})}else Sr(We,Nt)},children:We&&(We.test_type==="drawing"||Nt.test_type==="drawing"||We.test_type==="speaking"||Nt.test_type==="speaking"||We.score!==null&&We.score!==void 0)?l.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[We.test_type==="drawing"?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>On(We),className:"text-blue-600 hover:text-blue-800 underline text-xs font-medium px-1 py-0.5 rounded hover:bg-blue-50",children:"View"}),zt.current.has(Nt.test_name)?l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"number",min:"0",max:We.max_score||100,value:xr.current[Nt.test_name]?.[yt.student_id]?.score||We.score||"",onChange:fr=>fi(Nt.test_name,yt.student_id,"score",fr.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),l.jsx("span",{className:"text-xs text-gray-500",children:"/"}),l.jsx("input",{type:"number",min:"1",value:xr.current[Nt.test_name]?.[yt.student_id]?.maxScore||We.max_score||100,onChange:fr=>fi(Nt.test_name,yt.student_id,"maxScore",fr.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Max"})]}):(()=>{const fr=c(We),sr=fr!==null&&fr<50,xs=fr!==null&&fr>=50&&fr<70,yn=We.retest_offered,on=fr===null?"text-gray-600":sr?"text-red-600 font-semibold":xs?"text-yellow-600":"text-green-600";return l.jsxs(ht.div,{className:`px-1 py-0.5 rounded text-xs font-medium ${on} cursor-pointer hover:opacity-90 ${yn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:sr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onDoubleClick:()=>us(Nt.test_name),onClick:vn=>{vn.preventDefault(),vn.stopPropagation();const kn=We?.test_type||Nt?.test_type;if(!(kn==="drawing"||kn==="speaking")){if(We?.retest_offered===!0&&(kn==="multiple_choice"||kn==="true_false"||kn==="input")){Sr(We,Nt);return}if(sr){if(We?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[yt.student_id],test_type:Nt.test_type,original_test_id:We?.test_id||Nt.test_id,subject_id:We?.subject_id||Nt.subject_id,grade:t,class:r})}else Sr(We,Nt)}},title:yn?"Click to view retest answers":sr?"Offer retest":"Click to view answers",children:[l.jsx("span",{className:sr?"text-red-700":"",children:We.score}),"/",l.jsx("span",{children:We.max_score}),We.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})()]}):We.test_type==="speaking"||Nt.test_type==="speaking"?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>Te({...We,__studentId:yt.student_id},"audio"),className:"text-blue-600 hover:text-blue-800 underline text-xs font-medium px-1 py-0.5 rounded hover:bg-blue-50",children:"View Audio"}),at&&at.resultId===We.result_id?l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"number",min:"0",max:We.max_score||100,value:Mt,onChange:fr=>Be(fr.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),l.jsx("button",{onClick:()=>Yn(),disabled:lt,className:"px-1 py-0.5 bg-green-600 text-white text-xs rounded hover:bg-green-700 disabled:opacity-50",children:lt?"Saving...":"Save"}),l.jsx("button",{onClick:()=>Pn(),disabled:lt,className:"px-1 py-0.5 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 disabled:opacity-50",children:"Cancel"})]}):(()=>{const fr=c(We),sr=fr!==null&&fr<50,xs=fr!==null&&fr>=50&&fr<70,yn=We.retest_offered,on=fr===null?"text-gray-600":sr?"text-red-600 font-semibold":xs?"text-yellow-600":"text-green-600";return l.jsxs(ht.div,{className:`px-1 py-0.5 rounded text-xs font-medium ${on} cursor-pointer hover:opacity-90 ${yn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:sr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onDoubleClick:()=>{jt({resultId:We.result_id,score:We.score}),Be(We.score?.toString()||"")},onClick:vn=>{vn.preventDefault(),vn.stopPropagation();const kn=We?.test_type||Nt?.test_type;if(!(kn==="drawing"||kn==="speaking")){if(We?.retest_offered===!0&&(kn==="multiple_choice"||kn==="true_false"||kn==="input")){Sr(We,Nt);return}if(sr){if(We?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[yt.student_id],test_type:Nt.test_type,original_test_id:We?.test_id||Nt.test_id,subject_id:We?.subject_id||Nt.subject_id,grade:t,class:r})}else Sr(We,Nt)}},title:yn?"Click to view retest answers":sr?"Offer retest":"Click to view answers, double-click to edit score",children:[l.jsx("span",{className:sr?"text-red-700":"",children:We.score||0}),"/",l.jsx("span",{children:We.max_score||100}),We.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})()]}):(()=>{const fr=c(We),sr=fr!==null&&fr<50,xs=fr!==null&&fr>=50&&fr<70,yn=fr!==null&&fr>=70,on=We?.retest_offered===!0;console.debug("[TeacherResults] Render pill",{studentId:yt.student_id,pct:fr,isRed:sr,isYellow:xs,isGreen:yn,score:We.score,max:We.max_score,percentageField:We.percentage});const kn=`px-1 py-0.5 rounded text-xs font-medium ${fr===null?"text-gray-600":sr?"text-red-600 font-semibold":xs?"text-yellow-600":"text-green-600"} cursor-pointer hover:opacity-90 pointer-events-auto ${on?"bg-blue-50 text-blue-700 border border-blue-200":""}`;return l.jsxs(ht.div,{className:kn,style:sr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onClick:Kl=>{Kl.preventDefault(),Kl.stopPropagation();const Fi=We?.test_type||Nt?.test_type;if(!(Fi==="drawing"||Fi==="speaking")){if(We?.retest_offered===!0&&(Fi==="multiple_choice"||Fi==="true_false"||Fi==="input")){Sr(We,Nt);return}if(sr){if(We?.retest_offered){o("Retest is already offered","info");return}const gh=window.getComputedStyle(Kl.currentTarget).color;console.debug("[TeacherResults] Red pill clicked -> opening retest modal",{studentId:yt.student_id,className:kn,computedColor:gh}),n({failedStudentIds:[yt.student_id],test_type:Nt.test_type,original_test_id:We?.test_id||Nt.test_id,subject_id:We?.subject_id||Nt.subject_id,grade:t,class:r})}else Sr(We,Nt)}},title:on?"Click to view retest answers":sr?"Offer retest":"Click to view answers",children:[l.jsx("span",{className:sr?"text-red-700":"",children:We.score}),"/",l.jsx("span",{children:We.max_score}),We.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})(),We.caught_cheating&&We.visibility_change_times&&l.jsxs("span",{className:"text-xs text-red-600",children:["(",We.visibility_change_times,")"]})]}):l.jsx("span",{className:"text-gray-400",children:"-"})},Vr)})]},yr))})})]})})})}),[ya,xe,$r,De]),$e=_.useCallback(()=>{if(!L)return null;console.log(" renderResults - results:",L),console.log(" renderResults - results.class:",L.class),console.log(" renderResults - results.unique_tests:",L.unique_tests);const Re=L.class&&Array.isArray(L.class)&&L.class.length>0;if(console.log(" renderResults - hasStudentData:",Re),!Re)return console.log(" renderResults - No student data, showing no students message"),l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-gray-500",children:"No students found for this class and semester."})});const qe=L.unique_tests||[];return console.log(" renderResults - uniqueTests:",qe),Ir.current=L,l.jsxs("div",{className:"space-y-6",children:[l.jsxs(ht.div,{className:"bg-gradient-to-r from-red-500 to-pink-500 rounded-lg p-6 text-white",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:[l.jsxs(ht.h2,{className:"text-2xl font-bold mb-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.1},children:["Test Results - Grade M",U,", Class ",U,"/",q,", Semester ",C]}),l.jsxs(ht.p,{className:"text-cyan-100",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.2},children:["Viewing results for ",L.subjects?.length||0," subject(s)"]}),l.jsxs(ht.div,{className:"mt-4 flex gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:[l.jsx("button",{onClick:()=>{const Lt=L.unique_tests?.map(yt=>yt.test_name)||[];se(new Set(Lt))},className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-colors",children:"Collapse All Tests"}),l.jsx("button",{onClick:()=>se(new Set),className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-colors",children:"Expand All Tests"})]})]}),l.jsxs(ht.div,{className:"bg-white rounded-lg shadow p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},children:[l.jsx(ht.h3,{className:"text-lg font-semibold text-gray-900 mb-4",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.2},children:"Class Results"}),l.jsx("div",{className:"hidden md:block",children:dn("All Subjects",L.class,qe)}),l.jsx("div",{className:"md:hidden",children:vl("All Subjects",L.class,qe)})]})]})},[L,dn,U,q,C]),Pt=_.useCallback(()=>{if(!L||!L.class||!L.unique_tests)return;const Re=["Student ID","Name","Surname","No.","Nickname",...L.unique_tests.map(Vr=>Vr.test_name)],qe=L.class.map((Vr,Dn)=>{const We=[];return We.push(Vr.student_id),We.push(Vr.name),We.push(Vr.surname),We.push(Vr.number??Dn+1),We.push(Vr.nickname||"-"),L.unique_tests.forEach(fr=>{const sr=Vr[fr.test_name];sr&&sr.score!==null&&sr.score!==void 0?We.push(`${sr.score}/${sr.max_score}`):We.push("-")}),We}),Lt=t4.aoa_to_sheet([Re,...qe]),yt=t4.book_new(),yr=[{wch:10},{wch:15},{wch:15},{wch:6},{wch:12},...L.unique_tests.map(()=>({wch:15}))];Lt["!cols"]=yr,t4.book_append_sheet(yt,Lt,"Class Results");const Nt=`class-results-${U}-${q}-semester-${C}.xlsx`;u4e(yt,Nt),o("Excel file exported successfully!","success")},[L,U,q,C,o]);return f?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(un,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Results..."})]})}):g?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Results Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:g}),l.jsx(ot,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsx("div",{className:"flex justify-between items-center py-4",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Class Results"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",re?re.toLocaleString():"Never"]})]})})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Class"}),P.length>0?(()=>{const Re=P.reduce((qe,Lt)=>{const yt=Lt.subject||"Unknown Subject";return qe[yt]||(qe[yt]=[]),qe[yt].push(Lt),qe},{});return l.jsx("div",{className:"space-y-6",children:Object.entries(Re).map(([qe,Lt])=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("h3",{className:"text-md font-semibold text-gray-800 mb-3 flex flex-col sm:flex-row sm:items-center items-center",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),qe]}),l.jsxs("span",{className:"ml-0 sm:ml-2 text-sm text-gray-500 mt-1 sm:mt-0",children:["(",Lt.length," classes)"]})]}),l.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:Lt.map((yt,yr)=>l.jsxs(ot,{variant:U===yt.grade&&q===yt.class?"primary":"outline",onClick:()=>xn(yt.grade,yt.class),className:"px-3 py-1 text-xs font-medium min-w-[60px]",children:[yt.grade,"/",yt.class]},`${yt.grade}-${yt.class}-${yr}`))})]},qe))})})():l.jsx("p",{className:"text-gray-500",children:"No classes available"})]}),q&&jn(),q&&L&&l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[U," ",q," - Test Results ",rt?`(Term ${Ke?.terms.find(Re=>Re.id===rt)?.term})`:""]}),l.jsx("div",{className:"flex space-x-3",children:l.jsxs("button",{type:"button",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-2",onClick:Pt,children:[l.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-4 h-4 object-contain"}),l.jsx("span",{className:"font-medium text-sm",children:"Export Excel"})]})})]}),$e()]}),q&&!L&&l.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-gray-200 border-t-blue-500"}),l.jsx("span",{className:"text-gray-600",children:"Loading results"})]})})})]})}),ir&&gt&&l.jsx(pw,{children:l.jsx(CH,{drawing:ir,isOpen:gt,onClose:()=>kt(!1),isTeacherView:!0,onSaveScore:async({resultId:Re,score:qe,maxScore:Lt})=>{try{const yt=await(window.tokenManager?.getToken()||da.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");if(!(await fetch(qd.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:yt?`Bearer ${yt}`:""},body:JSON.stringify({resultId:Re,score:qe,maxScore:Lt})})).ok)throw new Error("Failed to save");await Lr(C,!0)}catch{o("Failed to save drawing score","error")}}})}),l.jsx(pw,{children:l.jsx(yfe,{onScoreUpdate:Re=>{q&&Lr(C,!0),ze&&it(qe=>({...qe,score:Re.score,max_score:Re.maxScore,percentage:Re.percentage}))},isOpen:ve,onClose:()=>{Me(!1),it(null),de(null)},testResult:ze,questions:Ye,isLoadingQuestions:Oe})}),l.jsx(pw,{children:l.jsx(vfe,{isOpen:bt.isOpen,onClose:()=>At({isOpen:!1,testResult:null}),testResult:bt.testResult,onScoreUpdate:Re=>{q&&Lr(C,!0)}})}),Ge&&Et&&l.jsx(pw,{children:l.jsx(xfe,{result:Ge,isOpen:Et,onClose:()=>Ut(!1),initialTab:Ge.__initialTab||"overview",editingSpeakingScore:at,tempSpeakingScore:Mt,isSavingSpeakingScore:lt,onStartSpeakingScoreEdit:Dr,onSaveSpeakingScore:Yn,onCancelSpeakingScoreEdit:Pn,onTempSpeakingScoreChange:Be})})]})},w4e={getTestPerformance:async(e,t=null)=>{try{await hu.loadAcademicCalendar();const n=hu.getCurrentTerm()?.id;if(!n)throw new Error("No current academic period found");console.log(` Fetching test performance for teacher ${e}, period ${n}, class: ${t||"all"}`);let s=`/.netlify/functions/get-test-performance?teacher_id=${e}&academic_period_id=${n}`;if(t){const[o,c]=t.split("/"),u=o.startsWith("M")?o:`M${o}`;s+=`&grade=${u}&class=${c}`}const a=await fetch(s,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const i=await a.json();if(!i.success)throw new Error(i.error||"Failed to fetch performance data");return console.log(` Performance data loaded: ${i.count} tests`),i.data}catch(r){throw console.error(" Error fetching test performance:",r),r}}};function LV(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=LV(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Rs(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=LV(e))&&(n&&(n+=" "),n+=t);return n}var r6={},n6={},TD;function _4e(){return TD||(TD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(n6)),n6}var s6={},ED;function BV(){return ED||(ED=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(s6)),s6}var a6={},ND;function $V(){return ND||(ND=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(a6)),a6}var i6={},AD;function HE(){return AD||(AD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],s=r.length;if(s===0)return n;let a=0,i="",o="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),a++);a<s;){const u=r[a];o?u==="\\"&&a+1<s?(a++,i+=r[a]):u===o?o="":i+=u:c?u==='"'||u==="'"?o=u:u==="]"?(c=!1,n.push(i),i=""):i+=u:u==="["?(c=!0,i&&(n.push(i),i="")):u==="."?i&&(n.push(i),i=""):i+=u,a++}return i&&n.push(i),n}e.toPath=t})(i6)),i6}var jD;function GE(){return jD||(jD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_4e(),r=BV(),n=$V(),s=HE();function a(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?r.isDeepKey(c)?a(o,s.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=o[c];return d===void 0?u:d}default:{if(Array.isArray(c))return i(o,c,u);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?u:d}}}function i(o,c,u){if(c.length===0)return u;let d=o;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=a})(r6)),r6}var o6,PD;function S4e(){return PD||(PD=1,o6=GE().get),o6}var k4e=S4e();const _S=Fc(k4e);var l6={exports:{}},es={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FD;function C4e(){if(FD)return es;FD=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,g=e?Symbol.for("react.memo"):60115,p=e?Symbol.for("react.lazy"):60116,y=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,C=e?Symbol.for("react.responder"):60118,S=e?Symbol.for("react.scope"):60119;function w(N){if(typeof N=="object"&&N!==null){var A=N.$$typeof;switch(A){case t:switch(N=N.type,N){case c:case u:case n:case a:case s:case f:return N;default:switch(N=N&&N.$$typeof,N){case o:case d:case p:case g:case i:return N;default:return A}}case r:return A}}}function T(N){return w(N)===u}return es.AsyncMode=c,es.ConcurrentMode=u,es.ContextConsumer=o,es.ContextProvider=i,es.Element=t,es.ForwardRef=d,es.Fragment=n,es.Lazy=p,es.Memo=g,es.Portal=r,es.Profiler=a,es.StrictMode=s,es.Suspense=f,es.isAsyncMode=function(N){return T(N)||w(N)===c},es.isConcurrentMode=T,es.isContextConsumer=function(N){return w(N)===o},es.isContextProvider=function(N){return w(N)===i},es.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===t},es.isForwardRef=function(N){return w(N)===d},es.isFragment=function(N){return w(N)===n},es.isLazy=function(N){return w(N)===p},es.isMemo=function(N){return w(N)===g},es.isPortal=function(N){return w(N)===r},es.isProfiler=function(N){return w(N)===a},es.isStrictMode=function(N){return w(N)===s},es.isSuspense=function(N){return w(N)===f},es.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===n||N===u||N===a||N===s||N===f||N===h||typeof N=="object"&&N!==null&&(N.$$typeof===p||N.$$typeof===g||N.$$typeof===i||N.$$typeof===o||N.$$typeof===d||N.$$typeof===v||N.$$typeof===C||N.$$typeof===S||N.$$typeof===y)},es.typeOf=w,es}var MD;function T4e(){return MD||(MD=1,l6.exports=C4e()),l6.exports}T4e();var bc=e=>e===0?0:e>0?1:-1,Ac=e=>typeof e=="number"&&e!=+e,om=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,cn=e=>(typeof e=="number"||e instanceof Number)&&!Ac(e),nd=e=>cn(e)||typeof e=="string",E4e=0,qv=e=>{var t=++E4e;return"".concat(e||"").concat(t)},Zf=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!cn(t)&&typeof t!="string")return n;var a;if(om(t)){if(r==null)return n;var i=t.indexOf("%");a=r*parseFloat(t.slice(0,i))/100}else a=+t;return Ac(a)&&(a=n),s&&r!=null&&a>r&&(a=r),a},UV=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Kd(e,t,r){return cn(e)&&cn(t)?e+r*(t-e):t}function zV(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):_S(n,t))===r)}var Ni=e=>e===null||typeof e>"u",VE=e=>Ni(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),N4e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function qE(e){if(typeof e!="string")return!1;var t=N4e;return t.includes(e)}var A4e=["viewBox","children"],OD=["points","pathLength"],c6={svg:A4e,polygon:OD,polyline:OD},KE=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(_.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{qE(s)&&(n[s]=(a=>r[s](r,a)))}),n},j4e=(e,t,r)=>n=>(e(t,r,n),null),P4e=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var a=e[s];qE(s)&&typeof a=="function"&&(n||(n={}),n[s]=j4e(a,t,r))}),n},F4e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function WV(e){if(typeof e!="string")return!1;var t=F4e;return t.includes(e)}function og(e){var t=Object.entries(e).filter(r=>{var[n]=r;return WV(n)});return Object.fromEntries(t)}var HV=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,M4e=(e,t,r,n)=>{var s;if(typeof t=="symbol"||typeof t=="number")return!0;var a=(s=n&&c6?.[n])!==null&&s!==void 0?s:[],i=t.startsWith("data-"),o=typeof e!="function"&&(!!n&&a.includes(t)||WV(t)),c=!!r&&qE(t);return i||o||c},to=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(_.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(a=>{var i;M4e((i=n)===null||i===void 0?void 0:i[a],a,t,r)&&(s[a]=n[a])}),s},O4e=["children","width","height","viewBox","className","style","title","desc"];function iC(){return iC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iC.apply(null,arguments)}function D4e(e,t){if(e==null)return{};var r,n,s=R4e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function R4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var GV=_.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:a,className:i,style:o,title:c,desc:u}=e,d=D4e(e,O4e),f=a||{width:n,height:s,x:0,y:0},h=Rs("recharts-surface",i);return _.createElement("svg",iC({},to(d,!0,"svg"),{className:h,width:n,height:s,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),_.createElement("title",null,c),_.createElement("desc",null,u),r)}),I4e=["children","className"];function oC(){return oC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oC.apply(null,arguments)}function L4e(e,t){if(e==null)return{};var r,n,s=B4e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function B4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var F1=_.forwardRef((e,t)=>{var{children:r,className:n}=e,s=L4e(e,I4e),a=Rs("recharts-layer",n);return _.createElement("g",oC({className:a},to(s,!0),{ref:t}),r)}),$4e=_.createContext(null);function ca(e){return function(){return e}}const lC=Math.PI,cC=2*lC,Qh=1e-6,U4e=cC-Qh;function VV(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function z4e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return VV;const r=10**t;return function(n){this._+=n[0];for(let s=1,a=n.length;s<a;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class W4e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?VV:z4e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,a,i){this._append`C${+t},${+r},${+n},${+s},${this._x1=+a},${this._y1=+i}`}arcTo(t,r,n,s,a){if(t=+t,r=+r,n=+n,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let i=this._x1,o=this._y1,c=n-t,u=s-r,d=i-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Qh)if(!(Math.abs(f*c-u*d)>Qh)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let g=n-i,p=s-o,y=c*c+u*u,v=g*g+p*p,C=Math.sqrt(y),S=Math.sqrt(h),w=a*Math.tan((lC-Math.acos((y+h-v)/(2*C*S)))/2),T=w/S,N=w/C;Math.abs(T-1)>Qh&&this._append`L${t+T*d},${r+T*f}`,this._append`A${a},${a},0,0,${+(f*g>d*p)},${this._x1=t+N*c},${this._y1=r+N*u}`}}arc(t,r,n,s,a,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(s),c=n*Math.sin(s),u=t+o,d=r+c,f=1^i,h=i?s-a:a-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Qh||Math.abs(this._y1-d)>Qh)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%cC+cC),h>U4e?this._append`A${n},${n},0,1,${f},${t-o},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Qh&&this._append`A${n},${n},0,${+(h>=lC)},${f},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function qV(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new W4e(t)}function YE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function KV(e){this._context=e}KV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function SS(e){return new KV(e)}function YV(e){return e[0]}function XV(e){return e[1]}function JV(e,t){var r=ca(!0),n=null,s=SS,a=null,i=qV(o);e=typeof e=="function"?e:e===void 0?YV:ca(e),t=typeof t=="function"?t:t===void 0?XV:ca(t);function o(c){var u,d=(c=YE(c)).length,f,h=!1,g;for(n==null&&(a=s(g=i())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(f,u,c),+t(f,u,c));if(g)return a=null,g+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:ca(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:ca(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:ca(!!c),o):r},o.curve=function(c){return arguments.length?(s=c,n!=null&&(a=s(n)),o):s},o.context=function(c){return arguments.length?(c==null?n=a=null:a=s(n=c),o):n},o}function Nw(e,t,r){var n=null,s=ca(!0),a=null,i=SS,o=null,c=qV(u);e=typeof e=="function"?e:e===void 0?YV:ca(+e),t=typeof t=="function"?t:ca(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?XV:ca(+r);function u(f){var h,g,p,y=(f=YE(f)).length,v,C=!1,S,w=new Array(y),T=new Array(y);for(a==null&&(o=i(S=c())),h=0;h<=y;++h){if(!(h<y&&s(v=f[h],h,f))===C)if(C=!C)g=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),p=h-1;p>=g;--p)o.point(w[p],T[p]);o.lineEnd(),o.areaEnd()}C&&(w[h]=+e(v,h,f),T[h]=+t(v,h,f),o.point(n?+n(v,h,f):w[h],r?+r(v,h,f):T[h]))}if(S)return o=null,S+""||null}function d(){return JV().defined(s).curve(i).context(a)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:ca(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ca(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ca(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:ca(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ca(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ca(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:ca(!!f),u):s},u.curve=function(f){return arguments.length?(i=f,a!=null&&(o=i(a)),u):i},u.context=function(f){return arguments.length?(f==null?a=o=null:o=i(a=f),u):a},u}class QV{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function H4e(e){return new QV(e,!0)}function G4e(e){return new QV(e,!1)}function Z4(){}function e_(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function ZV(e){this._context=e}ZV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:e_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:e_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function V4e(e){return new ZV(e)}function eq(e){this._context=e}eq.prototype={areaStart:Z4,areaEnd:Z4,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:e_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function q4e(e){return new eq(e)}function tq(e){this._context=e}tq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:e_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function K4e(e){return new tq(e)}function rq(e){this._context=e}rq.prototype={areaStart:Z4,areaEnd:Z4,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Y4e(e){return new rq(e)}function DD(e){return e<0?-1:1}function RD(e,t,r){var n=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(n||s<0&&-0),i=(r-e._y1)/(s||n<0&&-0),o=(a*s+i*n)/(n+s);return(DD(a)+DD(i))*Math.min(Math.abs(a),Math.abs(i),.5*Math.abs(o))||0}function ID(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function u6(e,t,r){var n=e._x0,s=e._y0,a=e._x1,i=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,s+o*t,a-o,i-o*r,a,i)}function t_(e){this._context=e}t_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:u6(this,this._t0,ID(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,u6(this,ID(this,r=RD(this,e,t)),r);break;default:u6(this,this._t0,r=RD(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function nq(e){this._context=new sq(e)}(nq.prototype=Object.create(t_.prototype)).point=function(e,t){t_.prototype.point.call(this,t,e)};function sq(e){this._context=e}sq.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,a){this._context.bezierCurveTo(t,e,n,r,a,s)}};function X4e(e){return new t_(e)}function J4e(e){return new nq(e)}function aq(e){this._context=e}aq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=LD(e),s=LD(t),a=0,i=1;i<r;++a,++i)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function LD(e){var t,r=e.length-1,n,s=new Array(r),a=new Array(r),i=new Array(r);for(s[0]=0,a[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,a[t]=4,i[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,a[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/a[t-1],a[t]-=n,i[t]-=n*i[t-1];for(s[r-1]=i[r-1]/a[r-1],t=r-2;t>=0;--t)s[t]=(i[t]-s[t+1])/a[t];for(a[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function Q4e(e){return new aq(e)}function kS(e,t){this._context=e,this._t=t}kS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Z4e(e){return new kS(e,.5)}function e_e(e){return new kS(e,0)}function t_e(e){return new kS(e,1)}function t1(e,t){if((i=e.length)>1)for(var r=1,n,s,a=e[t[0]],i,o=a.length;r<i;++r)for(s=a,a=e[t[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function uC(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function r_e(e,t){return e[t]}function n_e(e){const t=[];return t.key=e,t}function s_e(){var e=ca([]),t=uC,r=t1,n=r_e;function s(a){var i=Array.from(e.apply(this,arguments),n_e),o,c=i.length,u=-1,d;for(const f of a)for(o=0,++u;o<c;++o)(i[o][u]=[0,+n(f,i[o].key,u,a)]).data=f;for(o=0,d=YE(t(i));o<c;++o)i[d[o]].index=o;return r(i,d),i}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:ca(Array.from(a)),s):e},s.value=function(a){return arguments.length?(n=typeof a=="function"?a:ca(+a),s):n},s.order=function(a){return arguments.length?(t=a==null?uC:typeof a=="function"?a:ca(Array.from(a)),s):t},s.offset=function(a){return arguments.length?(r=a??t1,s):r},s}function a_e(e,t){if((n=e.length)>0){for(var r,n,s=0,a=e[0].length,i;s<a;++s){for(i=r=0;r<n;++r)i+=e[r][s][1]||0;if(i)for(r=0;r<n;++r)e[r][s][1]/=i}t1(e,t)}}function i_e(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,a=n.length;r<a;++r){for(var i=0,o=0;i<s;++i)o+=e[i][r][1]||0;n[r][1]+=n[r][0]=-o/2}t1(e,t)}}function o_e(e,t){if(!(!((i=e.length)>0)||!((a=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,a,i;n<a;++n){for(var o=0,c=0,u=0;o<i;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,g=(f-h)/2,p=0;p<o;++p){var y=e[t[p]],v=y[n][1]||0,C=y[n-1][1]||0;g+=v-C}c+=f,u+=g*f}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,t1(e,t)}}var d6={},f6={},BD;function l_e(){return BD||(BD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let a=0;a<r.length;a++){const i=r[a],o=n(i);s.has(o)||s.set(o,i)}return Array.from(s.values())}e.uniqBy=t})(f6)),f6}var h6={},$D;function iq(){return $D||($D=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(h6)),h6}var m6={},g6={},p6={},UD;function c_e(){return UD||(UD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(p6)),p6}var zD;function XE(){return zD||(zD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=c_e();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(g6)),g6}var x6={},WD;function u_e(){return WD||(WD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(x6)),x6}var HD;function d_e(){return HD||(HD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XE(),r=u_e();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(m6)),m6}var y6={},v6={},GD;function f_e(){return GD||(GD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GE();function r(n){return function(s){return t.get(s,n)}}e.property=r})(v6)),v6}var b6={},w6={},_6={},S6={},VD;function oq(){return VD||(VD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(S6)),S6}var k6={},qD;function lq(){return qD||(qD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(k6)),k6}var C6={},KD;function cq(){return KD||(KD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(C6)),C6}var YD;function h_e(){return YD||(YD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JE(),r=oq(),n=lq(),s=cq();function a(f,h,g){return typeof g!="function"?t.isMatch(f,h):i(f,h,function p(y,v,C,S,w,T){const N=g(y,v,C,S,w,T);return N!==void 0?!!N:i(y,v,p,T)},new Map)}function i(f,h,g,p){if(h===f)return!0;switch(typeof h){case"object":return o(f,h,g,p);case"function":return Object.keys(h).length>0?i(f,{...h},g,p):s.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:s.eq(f,h)}}function o(f,h,g,p){if(h==null)return!0;if(Array.isArray(h))return u(f,h,g,p);if(h instanceof Map)return c(f,h,g,p);if(h instanceof Set)return d(f,h,g,p);const y=Object.keys(h);if(f==null)return y.length===0;if(y.length===0)return!0;if(p&&p.has(h))return p.get(h)===f;p&&p.set(h,f);try{for(let v=0;v<y.length;v++){const C=y[v];if(!n.isPrimitive(f)&&!(C in f)||h[C]===void 0&&f[C]!==void 0||h[C]===null&&f[C]!==null||!g(f[C],h[C],C,f,h,p))return!1}return!0}finally{p&&p.delete(h)}}function c(f,h,g,p){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[y,v]of h.entries()){const C=f.get(y);if(g(C,v,y,f,h,p)===!1)return!1}return!0}function u(f,h,g,p){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const y=new Set;for(let v=0;v<h.length;v++){const C=h[v];let S=!1;for(let w=0;w<f.length;w++){if(y.has(w))continue;const T=f[w];let N=!1;if(g(T,C,v,f,h,p)&&(N=!0),N){y.add(w),S=!0;break}}if(!S)return!1}return!0}function d(f,h,g,p){return h.size===0?!0:f instanceof Set?u([...f],[...h],g,p):!1}e.isMatchWith=a,e.isSetMatch=d})(_6)),_6}var XD;function JE(){return XD||(XD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=h_e();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(w6)),w6}var T6={},E6={},N6={},JD;function m_e(){return JD||(JD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(N6)),N6}var A6={},QD;function uq(){return QD||(QD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(A6)),A6}var j6={},ZD;function dq(){return ZD||(ZD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",a="[object Arguments]",i="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",g="[object Object]",p="[object Error]",y="[object DataView]",v="[object Uint8Array]",C="[object Uint8ClampedArray]",S="[object Uint16Array]",w="[object Uint32Array]",T="[object BigUint64Array]",N="[object Int8Array]",A="[object Int16Array]",P="[object Int32Array]",j="[object BigInt64Array]",F="[object Float32Array]",R="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=j,e.bigUint64ArrayTag=T,e.booleanTag=s,e.dataViewTag=y,e.dateTag=o,e.errorTag=p,e.float32ArrayTag=F,e.float64ArrayTag=R,e.functionTag=f,e.int16ArrayTag=A,e.int32ArrayTag=P,e.int8ArrayTag=N,e.mapTag=c,e.numberTag=n,e.objectTag=g,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=i,e.uint16ArrayTag=S,e.uint32ArrayTag=w,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=C})(j6)),j6}var P6={},eR;function g_e(){return eR||(eR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(P6)),P6}var tR;function fq(){return tR||(tR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=m_e(),r=uq(),n=dq(),s=lq(),a=g_e();function i(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,g=new Map,p=void 0){const y=p?.(d,f,h,g);if(y!==void 0)return y;if(s.isPrimitive(d))return d;if(g.has(d))return g.get(d);if(Array.isArray(d)){const v=new Array(d.length);g.set(d,v);for(let C=0;C<d.length;C++)v[C]=o(d[C],C,h,g,p);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;g.set(d,v);for(const[C,S]of d)v.set(C,o(S,C,h,g,p));return v}if(d instanceof Set){const v=new Set;g.set(d,v);for(const C of d)v.add(o(C,void 0,h,g,p));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);g.set(d,v);for(let C=0;C<d.length;C++)v[C]=o(d[C],C,h,g,p);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return g.set(d,v),c(v,d,h,g,p),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return g.set(d,v),c(v,d,h,g,p),v}if(d instanceof Blob){const v=new Blob([d],{type:d.type});return g.set(d,v),c(v,d,h,g,p),v}if(d instanceof Error){const v=new d.constructor;return g.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,c(v,d,h,g,p),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return g.set(d,v),c(v,d,h,g,p),v}return d}function c(d,f,h=d,g,p){const y=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<y.length;v++){const C=y[v],S=Object.getOwnPropertyDescriptor(d,C);(S==null||S.writable)&&(d[C]=o(f[C],C,h,g,p))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=i,e.cloneDeepWithImpl=o,e.copyProperties=c})(E6)),E6}var rR;function p_e(){return rR||(rR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fq();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(T6)),T6}var nR;function x_e(){return nR||(nR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JE(),r=p_e();function n(s){return s=r.cloneDeep(s),a=>t.isMatch(a,s)}e.matches=n})(b6)),b6}var F6={},M6={},O6={},sR;function y_e(){return sR||(sR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fq(),r=dq();function n(s,a){return t.cloneDeepWith(s,(i,o,c,u)=>{const d=a?.(i,o,c,u);if(d!==void 0)return d;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new s.constructor(s?.valueOf());return t.copyProperties(f,s),f}case r.argumentsTag:{const f={};return t.copyProperties(f,s),f.length=s.length,f[Symbol.iterator]=s[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(O6)),O6}var aR;function v_e(){return aR||(aR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=y_e();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(M6)),M6}var D6={},R6={},iR;function hq(){return iR||(iR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(R6)),R6}var I6={},oR;function b_e(){return oR||(oR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uq();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(I6)),I6}var lR;function w_e(){return lR||(lR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BV(),r=hq(),n=b_e(),s=HE();function a(i,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&i?.[o]==null?c=s.toPath(o):c=[o],c.length===0)return!1;let u=i;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=a})(D6)),D6}var cR;function __e(){return cR||(cR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JE(),r=$V(),n=v_e(),s=GE(),a=w_e();function i(o,c){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return c=n.cloneDeep(c),function(u){const d=s.get(u,o);return d===void 0?a.has(u,o):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=i})(F6)),F6}var uR;function S_e(){return uR||(uR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iq(),r=f_e(),n=x_e(),s=__e();function a(i){if(i==null)return t.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?s.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}e.iteratee=a})(y6)),y6}var dR;function k_e(){return dR||(dR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=l_e(),r=iq(),n=d_e(),s=S_e();function a(i,o=r.identity){return n.isArrayLikeObject(i)?t.uniqBy(Array.from(i),s.iteratee(o)):[]}e.uniqBy=a})(d6)),d6}var L6,fR;function C_e(){return fR||(fR=1,L6=k_e().uniqBy),L6}var T_e=C_e();const hR=Fc(T_e);function E_e(e,t,r){return t===!0?hR(e,r):typeof t=="function"?hR(e,t):e}var B6={exports:{}},$6={},U6={exports:{}},z6={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mR;function N_e(){if(mR)return z6;mR=1;var e=Ym();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,a=e.useLayoutEffect,i=e.useDebugValue;function o(f,h){var g=h(),p=n({inst:{value:g,getSnapshot:h}}),y=p[0].inst,v=p[1];return a(function(){y.value=g,y.getSnapshot=h,c(y)&&v({inst:y})},[f,g,h]),s(function(){return c(y)&&v({inst:y}),f(function(){c(y)&&v({inst:y})})},[f]),i(g),g}function c(f){var h=f.getSnapshot;f=f.value;try{var g=h();return!r(f,g)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return z6.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,z6}var gR;function A_e(){return gR||(gR=1,U6.exports=N_e()),U6.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pR;function j_e(){if(pR)return $6;pR=1;var e=Ym(),t=A_e();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,a=e.useRef,i=e.useEffect,o=e.useMemo,c=e.useDebugValue;return $6.useSyncExternalStoreWithSelector=function(u,d,f,h,g){var p=a(null);if(p.current===null){var y={hasValue:!1,value:null};p.current=y}else y=p.current;p=o(function(){function C(A){if(!S){if(S=!0,w=A,A=h(A),g!==void 0&&y.hasValue){var P=y.value;if(g(P,A))return T=P}return T=A}if(P=T,n(w,A))return P;var j=h(A);return g!==void 0&&g(P,j)?(w=A,P):(w=A,T=j)}var S=!1,w,T,N=f===void 0?null:f;return[function(){return C(d())},N===null?void 0:function(){return C(N())}]},[d,f,h,g]);var v=s(u,p[0],p[1]);return i(function(){y.hasValue=!0,y.value=v},[v]),c(v),v},$6}var xR;function P_e(){return xR||(xR=1,B6.exports=j_e()),B6.exports}var F_e=P_e(),QE=_.createContext(null),M_e=e=>e,Jo=()=>{var e=_.useContext(QE);return e?e.store.dispatch:M_e},r4=()=>{},O_e=()=>r4,D_e=(e,t)=>e===t;function Jr(e){var t=_.useContext(QE);return F_e.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:O_e,t?t.store.getState:r4,t?t.store.getState:r4,t?e:r4,D_e)}function R_e(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function I_e(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function L_e(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var yR=e=>Array.isArray(e)?e:[e];function B_e(e){const t=Array.isArray(e[0])?e[0]:e;return L_e(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function $_e(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var U_e=class{constructor(e){this.value=e}deref(){return this.value}},z_e=typeof WeakRef<"u"?WeakRef:U_e,W_e=0,vR=1;function Aw(){return{s:W_e,v:void 0,o:null,p:null}}function mq(e,t={}){let r=Aw();const{resultEqualityCheck:n}=t;let s,a=0;function i(){let o=r;const{length:c}=arguments;for(let f=0,h=c;f<h;f++){const g=arguments[f];if(typeof g=="function"||typeof g=="object"&&g!==null){let p=o.o;p===null&&(o.o=p=new WeakMap);const y=p.get(g);y===void 0?(o=Aw(),p.set(g,o)):o=y}else{let p=o.p;p===null&&(o.p=p=new Map);const y=p.get(g);y===void 0?(o=Aw(),p.set(g,o)):o=y}}const u=o;let d;if(o.s===vR)d=o.v;else if(d=e.apply(null,arguments),a++,n){const f=s?.deref?.()??s;f!=null&&n(f,d)&&(d=f,a!==0&&a--),s=typeof d=="object"&&d!==null||typeof d=="function"?new z_e(d):d}return u.s=vR,u.v=d,d}return i.clearCache=()=>{r=Aw(),i.resetResultsCount()},i.resultsCount=()=>a,i.resetResultsCount=()=>{a=0},i}function H_e(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let a=0,i=0,o,c={},u=s.pop();typeof u=="object"&&(c=u,u=s.pop()),R_e(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:g=mq,argsMemoizeOptions:p=[]}=d,y=yR(h),v=yR(p),C=B_e(s),S=f(function(){return a++,u.apply(null,arguments)},...y),w=g(function(){i++;const N=$_e(C,arguments);return o=S.apply(null,N),o},...v);return Object.assign(w,{resultFunc:u,memoizedResultFunc:S,dependencies:C,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:g})};return Object.assign(n,{withTypes:()=>n}),n}var It=H_e(mq),G_e=Object.assign((e,t=It)=>{I_e(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((i,o,c)=>(i[r[c]]=o,i),{}))},{withTypes:()=>G_e}),W6={},H6={},G6={},bR;function V_e(){return bR||(bR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,a)=>{if(n!==s){const i=t(n),o=t(s);if(i===o&&i===0){if(n<s)return a==="desc"?1:-1;if(n>s)return a==="desc"?-1:1}return a==="desc"?o-i:i-o}return 0};e.compareValues=r})(G6)),G6}var V6={},q6={},wR;function gq(){return wR||(wR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(q6)),q6}var _R;function q_e(){return _R||(_R=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gq(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(a,i){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||i!=null&&Object.hasOwn(i,a)}e.isKey=s})(V6)),V6}var SR;function K_e(){return SR||(SR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=V_e(),r=q_e(),n=HE();function s(a,i,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(g=>String(g));const u=(g,p)=>{let y=g;for(let v=0;v<p.length&&y!=null;++v)y=y[p[v]];return y},d=(g,p)=>p==null||g==null?p:typeof g=="object"&&"key"in g?Object.hasOwn(p,g.key)?p[g.key]:u(p,g.path):typeof g=="function"?g(p):Array.isArray(g)?u(p,g):typeof p=="object"?p[g]:p,f=i.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||r.isKey(g)?g:{key:g,path:n.toPath(g)}));return a.map(g=>({original:g,criteria:f.map(p=>d(p,g))})).slice().sort((g,p)=>{for(let y=0;y<f.length;y++){const v=t.compareValues(g.criteria[y],p.criteria[y],o[y]);if(v!==0)return v}return 0}).map(g=>g.original)}e.orderBy=s})(H6)),H6}var K6={},kR;function Y_e(){return kR||(kR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],a=Math.floor(n),i=(o,c)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&c<a?i(d,c+1):s.push(d)}};return i(r,0),s}e.flatten=t})(K6)),K6}var Y6={},CR;function pq(){return CR||(CR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hq(),r=XE(),n=oq(),s=cq();function a(i,o,c){return n.isObject(c)&&(typeof o=="number"&&r.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?s.eq(c[o],i):!1}e.isIterateeCall=a})(Y6)),Y6}var TR;function X_e(){return TR||(TR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=K_e(),r=Y_e(),n=pq();function s(a,...i){const o=i.length;return o>1&&n.isIterateeCall(a,i[0],i[1])?i=[]:o>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(a,r.flatten(i),["asc"])}e.sortBy=s})(W6)),W6}var X6,ER;function J_e(){return ER||(ER=1,X6=X_e().sortBy),X6}var Q_e=J_e();const CS=Fc(Q_e);var xq=e=>e.legend.settings,Z_e=e=>e.legend.size,eSe=e=>e.legend.payload;It([eSe,xq],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?CS(n,r):n});var jw=1;function tSe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=_.useState({height:0,left:0,top:0,width:0}),n=_.useCallback(s=>{if(s!=null){var a=s.getBoundingClientRect(),i={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(i.height-t.height)>jw||Math.abs(i.left-t.left)>jw||Math.abs(i.top-t.top)>jw||Math.abs(i.width-t.width)>jw)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Hi(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var rSe=typeof Symbol=="function"&&Symbol.observable||"@@observable",NR=rSe,J6=()=>Math.random().toString(36).substring(7).split("").join("."),nSe={INIT:`@@redux/INIT${J6()}`,REPLACE:`@@redux/REPLACE${J6()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${J6()}`},r_=nSe;function ZE(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function yq(e,t,r){if(typeof e!="function")throw new Error(Hi(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Hi(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Hi(1));return r(yq)(e,t)}let n=e,s=t,a=new Map,i=a,o=0,c=!1;function u(){i===a&&(i=new Map,a.forEach((v,C)=>{i.set(C,v)}))}function d(){if(c)throw new Error(Hi(3));return s}function f(v){if(typeof v!="function")throw new Error(Hi(4));if(c)throw new Error(Hi(5));let C=!0;u();const S=o++;return i.set(S,v),function(){if(C){if(c)throw new Error(Hi(6));C=!1,u(),i.delete(S),a=null}}}function h(v){if(!ZE(v))throw new Error(Hi(7));if(typeof v.type>"u")throw new Error(Hi(8));if(typeof v.type!="string")throw new Error(Hi(17));if(c)throw new Error(Hi(9));try{c=!0,s=n(s,v)}finally{c=!1}return(a=i).forEach(S=>{S()}),v}function g(v){if(typeof v!="function")throw new Error(Hi(10));n=v,h({type:r_.REPLACE})}function p(){const v=f;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(Hi(11));function S(){const T=C;T.next&&T.next(d())}return S(),{unsubscribe:v(S)}},[NR](){return this}}}return h({type:r_.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:g,[NR]:p}}function sSe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:r_.INIT})>"u")throw new Error(Hi(12));if(typeof r(void 0,{type:r_.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Hi(13))})}function vq(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const i=t[a];typeof e[i]=="function"&&(r[i]=e[i])}const n=Object.keys(r);let s;try{sSe(r)}catch(a){s=a}return function(i={},o){if(s)throw s;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],g=i[f],p=h(g,o);if(typeof p>"u")throw o&&o.type,new Error(Hi(14));u[f]=p,c=c||p!==g}return c=c||n.length!==Object.keys(i).length,c?u:i}}function n_(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function aSe(...e){return t=>(r,n)=>{const s=t(r,n);let a=()=>{throw new Error(Hi(15))};const i={getState:s.getState,dispatch:(c,...u)=>a(c,...u)},o=e.map(c=>c(i));return a=n_(...o)(s.dispatch),{...s,dispatch:a}}}function bq(e){return ZE(e)&&"type"in e&&typeof e.type=="string"}var wq=Symbol.for("immer-nothing"),AR=Symbol.for("immer-draftable"),Hl=Symbol.for("immer-state");function nu(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var r1=Object.getPrototypeOf;function Hm(e){return!!e&&!!e[Hl]}function x0(e){return e?_q(e)||Array.isArray(e)||!!e[AR]||!!e.constructor?.[AR]||D2(e)||ES(e):!1}var iSe=Object.prototype.constructor.toString();function _q(e){if(!e||typeof e!="object")return!1;const t=r1(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===iSe}function s_(e,t){TS(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function TS(e){const t=e[Hl];return t?t.type_:Array.isArray(e)?1:D2(e)?2:ES(e)?3:0}function dC(e,t){return TS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Sq(e,t,r){const n=TS(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function oSe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function D2(e){return e instanceof Map}function ES(e){return e instanceof Set}function Zh(e){return e.copy_||e.base_}function fC(e,t){if(D2(e))return new Map(e);if(ES(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=_q(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Hl];let s=Reflect.ownKeys(n);for(let a=0;a<s.length;a++){const i=s[a],o=n[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(r1(e),n)}else{const n=r1(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function eN(e,t=!1){return NS(e)||Hm(e)||!x0(e)||(TS(e)>1&&Object.defineProperties(e,{set:{value:Pw},add:{value:Pw},clear:{value:Pw},delete:{value:Pw}}),Object.freeze(e),t&&Object.values(e).forEach(r=>eN(r,!0))),e}function Pw(){nu(2)}function NS(e){return Object.isFrozen(e)}var lSe={};function Gm(e){const t=lSe[e];return t||nu(0,e),t}var Kv;function kq(){return Kv}function cSe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function jR(e,t){t&&(Gm("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function hC(e){mC(e),e.drafts_.forEach(uSe),e.drafts_=null}function mC(e){e===Kv&&(Kv=e.parent_)}function PR(e){return Kv=cSe(Kv,e)}function uSe(e){const t=e[Hl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function FR(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Hl].modified_&&(hC(t),nu(4)),x0(e)&&(e=a_(t,e),t.parent_||i_(t,e)),t.patches_&&Gm("Patches").generateReplacementPatches_(r[Hl].base_,e,t.patches_,t.inversePatches_)):e=a_(t,r,[]),hC(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==wq?e:void 0}function a_(e,t,r){if(NS(t))return t;const n=t[Hl];if(!n)return s_(t,(s,a)=>MR(e,n,t,s,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return i_(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let a=s,i=!1;n.type_===3&&(a=new Set(s),s.clear(),i=!0),s_(a,(o,c)=>MR(e,n,s,o,c,r,i)),i_(e,s,!1),r&&e.patches_&&Gm("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function MR(e,t,r,n,s,a,i){if(Hm(s)){const o=a&&t&&t.type_!==3&&!dC(t.assigned_,n)?a.concat(n):void 0,c=a_(e,s,o);if(Sq(r,n,c),Hm(c))e.canAutoFreeze_=!1;else return}else i&&r.add(s);if(x0(s)&&!NS(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;a_(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(D2(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&i_(e,s)}}function i_(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&eN(t,r)}function dSe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:kq(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,a=tN;r&&(s=[n],a=Yv);const{revoke:i,proxy:o}=Proxy.revocable(s,a);return n.draft_=o,n.revoke_=i,o}var tN={get(e,t){if(t===Hl)return e;const r=Zh(e);if(!dC(r,t))return fSe(e,r,t);const n=r[t];return e.finalized_||!x0(n)?n:n===Q6(e.base_,t)?(Z6(e),e.copy_[t]=pC(n,e)):n},has(e,t){return t in Zh(e)},ownKeys(e){return Reflect.ownKeys(Zh(e))},set(e,t,r){const n=Cq(Zh(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=Q6(Zh(e),t),a=s?.[Hl];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(oSe(r,s)&&(r!==void 0||dC(e.base_,t)))return!0;Z6(e),gC(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Q6(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Z6(e),gC(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Zh(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){nu(11)},getPrototypeOf(e){return r1(e.base_)},setPrototypeOf(){nu(12)}},Yv={};s_(tN,(e,t)=>{Yv[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Yv.deleteProperty=function(e,t){return Yv.set.call(this,e,t,void 0)};Yv.set=function(e,t,r){return tN.set.call(this,e[0],t,r,e[0])};function Q6(e,t){const r=e[Hl];return(r?Zh(r):e)[t]}function fSe(e,t,r){const n=Cq(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function Cq(e,t){if(!(t in e))return;let r=r1(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=r1(r)}}function gC(e){e.modified_||(e.modified_=!0,e.parent_&&gC(e.parent_))}function Z6(e){e.copy_||(e.copy_=fC(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var hSe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const i=this;return function(c=a,...u){return i.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&nu(6),n!==void 0&&typeof n!="function"&&nu(7);let s;if(x0(t)){const a=PR(this),i=pC(t,void 0);let o=!0;try{s=r(i),o=!1}finally{o?hC(a):mC(a)}return jR(a,n),FR(s,a)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===wq&&(s=void 0),this.autoFreeze_&&eN(s,!0),n){const a=[],i=[];Gm("Patches").generateReplacementPatches_(t,s,a,i),n(a,i)}return s}else nu(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,c=>t(c,...o));let n,s;return[this.produce(t,r,(i,o)=>{n=i,s=o}),n,s]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){x0(e)||nu(8),Hm(e)&&(e=o0(e));const t=PR(this),r=pC(e,void 0);return r[Hl].isManual_=!0,mC(t),r}finishDraft(e,t){const r=e&&e[Hl];(!r||!r.isManual_)&&nu(9);const{scope_:n}=r;return jR(n,t),FR(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Gm("Patches").applyPatches_;return Hm(e)?n(e,t):this.produce(e,s=>n(s,t))}};function pC(e,t){const r=D2(e)?Gm("MapSet").proxyMap_(e,t):ES(e)?Gm("MapSet").proxySet_(e,t):dSe(e,t);return(t?t.scope_:kq()).drafts_.push(r),r}function o0(e){return Hm(e)||nu(10,e),Tq(e)}function Tq(e){if(!x0(e)||NS(e))return e;const t=e[Hl];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=fC(e,t.scope_.immer_.useStrictShallowCopy_)}else r=fC(e,!0);return s_(r,(n,s)=>{Sq(r,n,Tq(s))}),t&&(t.finalized_=!1),r}var mSe=new hSe,Eq=mSe.produce;function Nq(e){return({dispatch:r,getState:n})=>s=>a=>typeof a=="function"?a(r,n,e):s(a)}var gSe=Nq(),pSe=Nq,xSe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?n_:n_.apply(null,arguments)};function jc(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Ul(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>bq(n)&&n.type===e,r}var Aq=class Wy extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Wy.prototype)}static get[Symbol.species](){return Wy}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Wy(...t[0].concat(this)):new Wy(...t.concat(this))}};function OR(e){return x0(e)?Eq(e,()=>{}):e}function Fw(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function ySe(e){return typeof e=="boolean"}var vSe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=t??{};let i=new Aq;return r&&(ySe(r)?i.push(gSe):i.push(pSe(r.extraArgument))),i},bSe="RTK_autoBatch",DR=e=>t=>{setTimeout(t,e)},wSe=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,a=!1,i=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:DR(10):e.type==="callback"?e.queueNotification:DR(e.timeout),u=()=>{i=!1,a&&(a=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>s&&d(),h=n.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){try{return s=!d?.meta?.[bSe],a=!s,a&&(i||(i=!0,c(u))),n.dispatch(d)}finally{s=!0}}})},_Se=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new Aq(e);return n&&s.push(wSe(typeof n=="object"?n:void 0)),s};function SSe(e){const t=vSe(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:a=void 0,enhancers:i=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(ZE(r))o=vq(r);else throw new Error(Ul(1));let c;typeof n=="function"?c=n(t):c=t();let u=n_;s&&(u=xSe({trace:!1,...typeof s=="object"&&s}));const d=aSe(...c),f=_Se(d);let h=typeof i=="function"?i(f):f();const g=u(...h);return yq(o,a,g)}function jq(e){const t={},r=[];let n;const s={addCase(a,i){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(Ul(28));if(o in t)throw new Error(Ul(29));return t[o]=i,s},addAsyncThunk(a,i){return i.pending&&(t[a.pending.type]=i.pending),i.rejected&&(t[a.rejected.type]=i.rejected),i.fulfilled&&(t[a.fulfilled.type]=i.fulfilled),i.settled&&r.push({matcher:a.settled,reducer:i.settled}),s},addMatcher(a,i){return r.push({matcher:a,reducer:i}),s},addDefaultCase(a){return n=a,s}};return e(s),[t,r,n]}function kSe(e){return typeof e=="function"}function CSe(e,t){let[r,n,s]=jq(t),a;if(kSe(e))a=()=>OR(e());else{const o=OR(e);a=()=>o}function i(o=a(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,f)=>{if(f)if(Hm(d)){const g=f(d,c);return g===void 0?d:g}else{if(x0(d))return Eq(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return i.getInitialState=a,i}var TSe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ESe=(e=21)=>{let t="",r=e;for(;r--;)t+=TSe[Math.random()*64|0];return t},NSe=Symbol.for("rtk-slice-createasyncthunk");function ASe(e,t){return`${e}/${t}`}function jSe({creators:e}={}){const t=e?.asyncThunk?.[NSe];return function(n){const{name:s,reducerPath:a=s}=n;if(!s)throw new Error(Ul(11));const i=(typeof n.reducers=="function"?n.reducers(FSe()):n.reducers)||{},o=Object.keys(i),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(w,T){const N=typeof w=="string"?w:w.type;if(!N)throw new Error(Ul(12));if(N in c.sliceCaseReducersByType)throw new Error(Ul(13));return c.sliceCaseReducersByType[N]=T,u},addMatcher(w,T){return c.sliceMatchers.push({matcher:w,reducer:T}),u},exposeAction(w,T){return c.actionCreators[w]=T,u},exposeCaseReducer(w,T){return c.sliceCaseReducersByName[w]=T,u}};o.forEach(w=>{const T=i[w],N={reducerName:w,type:ASe(s,w),createNotation:typeof n.reducers=="function"};OSe(T)?RSe(N,T,u,t):MSe(N,T,u)});function d(){const[w={},T=[],N=void 0]=typeof n.extraReducers=="function"?jq(n.extraReducers):[n.extraReducers],A={...w,...c.sliceCaseReducersByType};return CSe(n.initialState,P=>{for(let j in A)P.addCase(j,A[j]);for(let j of c.sliceMatchers)P.addMatcher(j.matcher,j.reducer);for(let j of T)P.addMatcher(j.matcher,j.reducer);N&&P.addDefaultCase(N)})}const f=w=>w,h=new Map,g=new WeakMap;let p;function y(w,T){return p||(p=d()),p(w,T)}function v(){return p||(p=d()),p.getInitialState()}function C(w,T=!1){function N(P){let j=P[w];return typeof j>"u"&&T&&(j=Fw(g,N,v)),j}function A(P=f){const j=Fw(h,T,()=>new WeakMap);return Fw(j,P,()=>{const F={};for(const[R,L]of Object.entries(n.selectors??{}))F[R]=PSe(L,P,()=>Fw(g,P,v),T);return F})}return{reducerPath:w,getSelectors:A,get selectors(){return A(N)},selectSlice:N}}const S={name:s,reducer:y,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:v,...C(a),injectInto(w,{reducerPath:T,...N}={}){const A=T??a;return w.inject({reducerPath:A,reducer:y},N),{...S,...C(A,!0)}}};return S}}function PSe(e,t,r,n){function s(a,...i){let o=t(a);return typeof o>"u"&&n&&(o=r()),e(o,...i)}return s.unwrapped=e,s}var ql=jSe();function FSe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function MSe({type:e,reducerName:t,createNotation:r},n,s){let a,i;if("reducer"in n){if(r&&!DSe(n))throw new Error(Ul(17));a=n.reducer,i=n.prepare}else a=n;s.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,i?jc(e,i):jc(e))}function OSe(e){return e._reducerDefinitionType==="asyncThunk"}function DSe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function RSe({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Ul(18));const{payloadCreator:a,fulfilled:i,pending:o,rejected:c,settled:u,options:d}=r,f=s(e,a,d);n.exposeAction(t,f),i&&n.addCase(f.fulfilled,i),o&&n.addCase(f.pending,o),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:i||Mw,pending:o||Mw,rejected:c||Mw,settled:u||Mw})}function Mw(){}var ISe="task",Pq="listener",Fq="completed",rN="cancelled",LSe=`task-${rN}`,BSe=`task-${Fq}`,xC=`${Pq}-${rN}`,$Se=`${Pq}-${Fq}`,AS=class{constructor(e){this.code=e,this.message=`${ISe} ${rN} (reason: ${e})`}name="TaskAbortError";message},nN=(e,t)=>{if(typeof e!="function")throw new TypeError(Ul(32))},o_=()=>{},Mq=(e,t=o_)=>(e.catch(t),e),Oq=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),bm=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},wm=e=>{if(e.aborted){const{reason:t}=e;throw new AS(t)}};function Dq(e,t){let r=o_;return new Promise((n,s)=>{const a=()=>s(new AS(e.reason));if(e.aborted){a();return}r=Oq(e,a),t.finally(()=>r()).then(n,s)}).finally(()=>{r=o_})}var USe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof AS?"cancelled":"rejected",error:r}}finally{t?.()}},l_=e=>t=>Mq(Dq(e,t).then(r=>(wm(e),r))),Rq=e=>{const t=l_(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:$p}=Object,RR={},jS="listenerMiddleware",zSe=(e,t)=>{const r=n=>Oq(e,()=>bm(n,e.reason));return(n,s)=>{nN(n);const a=new AbortController;r(a);const i=USe(async()=>{wm(e),wm(a.signal);const o=await n({pause:l_(a.signal),delay:Rq(a.signal),signal:a.signal});return wm(a.signal),o},()=>bm(a,BSe));return s?.autoJoin&&t.push(i.catch(o_)),{result:l_(e)(i),cancel(){bm(a,LSe)}}}},WSe=(e,t)=>{const r=async(n,s)=>{wm(t);let a=()=>{};const o=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});a=()=>{d(),u()}})];s!=null&&o.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await Dq(t,Promise.race(o));return wm(t),c}finally{a()}};return(n,s)=>Mq(r(n,s))},Iq=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:a}=e;if(t)s=jc(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Ul(21));return nN(a),{predicate:s,type:t,effect:a}},Lq=$p(e=>{const{type:t,predicate:r,effect:n}=Iq(e);return{id:ESe(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Ul(22))}}},{withTypes:()=>Lq}),IR=(e,t)=>{const{type:r,effect:n,predicate:s}=Iq(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===s)&&a.effect===n)},yC=e=>{e.pending.forEach(t=>{bm(t,xC)})},HSe=e=>()=>{e.forEach(yC),e.clear()},LR=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Bq=$p(jc(`${jS}/add`),{withTypes:()=>Bq}),GSe=jc(`${jS}/removeAll`),$q=$p(jc(`${jS}/remove`),{withTypes:()=>$q}),VSe=(...e)=>{console.error(`${jS}/error`,...e)},R2=(e={})=>{const t=new Map,{extra:r,onError:n=VSe}=e;nN(n);const s=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f?.cancelActive&&yC(d)}),a=d=>{const f=IR(t,d)??Lq(d);return s(f)};$p(a,{withTypes:()=>a});const i=d=>{const f=IR(t,d);return f&&(f.unsubscribe(),d.cancelActive&&yC(f)),!!f};$p(i,{withTypes:()=>i});const o=async(d,f,h,g)=>{const p=new AbortController,y=WSe(a,p.signal),v=[];try{d.pending.add(p),await Promise.resolve(d.effect(f,$p({},h,{getOriginalState:g,condition:(C,S)=>y(C,S).then(Boolean),take:y,delay:Rq(p.signal),pause:l_(p.signal),extra:r,signal:p.signal,fork:zSe(p.signal,v),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((C,S,w)=>{C!==p&&(bm(C,xC),w.delete(C))})},cancel:()=>{bm(p,xC),d.pending.delete(p)},throwIfCancelled:()=>{wm(p.signal)}})))}catch(C){C instanceof AS||LR(n,C,{raisedBy:"effect"})}finally{await Promise.all(v),bm(p,$Se),d.pending.delete(p)}},c=HSe(t);return{middleware:d=>f=>h=>{if(!bq(h))return f(h);if(Bq.match(h))return a(h.payload);if(GSe.match(h)){c();return}if($q.match(h))return i(h.payload);let g=d.getState();const p=()=>{if(g===RR)throw new Error(Ul(23));return g};let y;try{if(y=f(h),t.size>0){const v=d.getState(),C=Array.from(t.values());for(const S of C){let w=!1;try{w=S.predicate(h,v,g)}catch(T){w=!1,LR(n,T,{raisedBy:"predicate"})}w&&o(S,h,d,p)}}}finally{g=RR}return y},startListening:a,stopListening:i,clearListeners:c}};function Ul(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var qSe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Uq=ql({name:"chartLayout",initialState:qSe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:KSe,setLayout:YSe,setChartSize:XSe,setScale:JSe}=Uq.actions,QSe=Uq.reducer;function BR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $R(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BR(Object(r),!0).forEach(function(n){ZSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZSe(e,t,r){return(t=e3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e3e(e){var t=t3e(e,"string");return typeof t=="symbol"?t:t+""}function t3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var c_=Math.PI/180,r3e=e=>e*180/Math.PI,Qi=(e,t,r,n)=>({x:e+Math.cos(-c_*n)*r,y:t+Math.sin(-c_*n)*r}),n3e=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},s3e=(e,t)=>{var{x:r,y:n}=e,{x:s,y:a}=t;return Math.sqrt((r-s)**2+(n-a)**2)},a3e=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:a}=t,i=s3e({x:r,y:n},{x:s,y:a});if(i<=0)return{radius:i,angle:0};var o=(r-s)/i,c=Math.acos(o);return n>a&&(c=2*Math.PI-c),{radius:i,angle:r3e(c),angleInRadian:c}},i3e=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),a=Math.min(n,s);return{startAngle:t-a*360,endAngle:r-a*360}},o3e=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),a=Math.floor(n/360),i=Math.min(s,a);return e+i*360},l3e=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:a}=a3e({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(s<i||s>o||s===0)return null;var{startAngle:c,endAngle:u}=i3e(t),d=a,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?$R($R({},t),{},{radius:s,angle:o3e(d,t)}):null};function zq(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function UR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UR(Object(r),!0).forEach(function(n){c3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c3e(e,t,r){return(t=u3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u3e(e){var t=d3e(e,"string");return typeof t=="symbol"?t:t+""}function d3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qo(e,t,r){return Ni(e)||Ni(t)?r:nd(t)?_S(e,t,r):typeof t=="function"?t(e):r}var f3e=(e,t,r,n,s)=>{var a,i=-1,o=(a=t?.length)!==null&&a!==void 0?a:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var c=0;c<o;c++){var u=c>0?r[c-1].coordinate:r[o-1].coordinate,d=r[c].coordinate,f=c>=o-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(bc(d-u)!==bc(f-d)){var g=[];if(bc(f-d)===bc(s[1]-s[0])){h=f;var p=d+s[1]-s[0];g[0]=Math.min(p,(p+u)/2),g[1]=Math.max(p,(p+u)/2)}else{h=u;var y=f+s[1]-s[0];g[0]=Math.min(d,(y+d)/2),g[1]=Math.max(d,(y+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=g[0]&&e<=g[1]){({index:i}=r[c]);break}}else{var C=Math.min(u,f),S=Math.max(u,f);if(e>(C+d)/2&&e<=(S+d)/2){({index:i}=r[c]);break}}}else if(t){for(var w=0;w<o;w++)if(w===0&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w>0&&w<o-1&&e>(t[w].coordinate+t[w-1].coordinate)/2&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w===o-1&&e>(t[w].coordinate+t[w-1].coordinate)/2){({index:i}=t[w]);break}}return i},h3e=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:a,verticalAlign:i,layout:o}=t;if((o==="vertical"||o==="horizontal"&&i==="middle")&&a!=="center"&&cn(e[a]))return pc(pc({},e),{},{[a]:e[a]+(n||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&i!=="middle"&&cn(e[i]))return pc(pc({},e),{},{[i]:e[i]+(s||0)})}return e},dh=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Wq=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var s,a,i=e.map(o=>(o.coordinate===t&&(s=!0),o.coordinate===r&&(a=!0),o.coordinate));return s||i.push(t),a||i.push(r),i},Hq=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:a,scale:i,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:g}=e;if(!i)return null;var p=o==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,y=s==="category"&&i.bandwidth?i.bandwidth()/p:0;if(y=g==="angleAxis"&&a&&a.length>=2?bc(a[0]-a[1])*2*y:y,f||h){var v=(f||h||[]).map((C,S)=>{var w=n?n.indexOf(C):C;return{coordinate:i(w)+y,value:C,offset:y,index:S}});return v.filter(C=>!Ac(C.coordinate))}return c&&u?u.map((C,S)=>({coordinate:i(C)+y,value:C,index:S,offset:y})):i.ticks&&d!=null?i.ticks(d).map((C,S)=>({coordinate:i(C)+y,value:C,offset:y,index:S})):i.domain().map((C,S)=>({coordinate:i(C)+y,value:n?n[C]:C,index:S,offset:y}))},zR=1e-4,m3e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-zR,a=Math.max(n[0],n[1])+zR,i=e(t[0]),o=e(t[r-1]);(i<s||i>a||o<s||o>a)&&e.domain([t[0],t[r-1]])}},g3e=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0,i=0;i<t;++i){var o=Ac(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1])}},p3e=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0;a<t;++a){var i=Ac(e[a][r][1])?e[a][r][0]:e[a][r][1];i>=0?(e[a][r][0]=s,e[a][r][1]=s+i,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},x3e={sign:g3e,expand:a_e,none:t1,silhouette:i_e,wiggle:o_e,positive:p3e},y3e=(e,t,r)=>{var n=x3e[r],s=s_e().keys(t).value((a,i)=>+qo(a,i,0)).order(uC).offset(n);return s(e)};function WR(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:a,dataKey:i}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ni(s[t.dataKey])){var o=zV(r,"value",s[t.dataKey]);if(o)return o.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var c=qo(s,Ni(i)?t.dataKey:i);return Ni(c)?null:t.scale(c)}var v3e=e=>{var t=e.flat(2).filter(cn);return[Math.min(...t),Math.max(...t)]},b3e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],w3e=(e,t,r)=>{if(e!=null)return b3e(Object.keys(e).reduce((n,s)=>{var a=e[s],{stackedData:i}=a,o=i.reduce((c,u)=>{var d=zq(u,t,r),f=v3e(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},HR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,GR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,vC=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=CS(t,d=>d.coordinate),a=1/0,i=1,o=s.length;i<o;i++){var c=s[i],u=s[i-1];a=Math.min((c.coordinate||0)-(u.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function VR(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:a}=e;return pc(pc({},t),{},{dataKey:r,payload:n,value:s,name:a})}function Gq(e,t){if(e)return String(e);if(typeof t=="string")return t}function _3e(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var a=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return a?{x:e,y:t}:null}return n?l3e({x:e,y:t},n):null}var S3e=(e,t,r,n)=>{var s=t.find(u=>u&&u.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var a=s.coordinate,{radius:i}=n;return pc(pc(pc({},n),Qi(n.cx,n.cy,i,a)),{},{angle:a,radius:i})}var o=s.coordinate,{angle:c}=n;return pc(pc(pc({},n),Qi(n.cx,n.cy,o,c)),{},{angle:c,radius:o})}return{x:0,y:0}},k3e=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,A0=e=>e.layout.width,j0=e=>e.layout.height,C3e=e=>e.layout.scale,Vq=e=>e.layout.margin,PS=It(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),FS=It(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),T3e="data-recharts-item-index",E3e="data-recharts-item-data-key",I2=60;function qR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ow(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qR(Object(r),!0).forEach(function(n){N3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N3e(e,t,r){return(t=A3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A3e(e){var t=j3e(e,"string");return typeof t=="symbol"?t:t+""}function j3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var P3e=e=>e.brush.height;function F3e(e){var t=FS(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:I2;return r+s}return r},0)}function M3e(e){var t=FS(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:I2;return r+s}return r},0)}function O3e(e){var t=PS(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function D3e(e){var t=PS(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var ro=It([A0,j0,Vq,P3e,F3e,M3e,O3e,D3e,xq,Z_e],(e,t,r,n,s,a,i,o,c,u)=>{var d={left:(r.left||0)+s,right:(r.right||0)+a},f={top:(r.top||0)+i,bottom:(r.bottom||0)+o},h=Ow(Ow({},f),d),g=h.bottom;h.bottom+=n,h=h3e(h,c,u);var p=e-h.left-h.right,y=t-h.top-h.bottom;return Ow(Ow({brushBottom:g},h),{},{width:Math.max(p,0),height:Math.max(y,0)})}),R3e=It(ro,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),qq=It(A0,j0,(e,t)=>({x:0,y:0,width:e,height:t})),I3e=_.createContext(null),Oc=()=>_.useContext(I3e)!=null,MS=e=>e.brush,OS=It([MS,ro,Vq],(e,t,r)=>({height:e.height,x:cn(e.x)?e.x:t.left,y:cn(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:cn(e.width)?e.width:t.width})),sN=()=>{var e,t=Oc(),r=Jr(R3e),n=Jr(OS),s=(e=Jr(MS))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},L3e={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Kq=()=>{var e;return(e=Jr(ro))!==null&&e!==void 0?e:L3e},Yq=()=>Jr(A0),Xq=()=>Jr(j0),Ls=e=>e.layout.layoutType,aN=()=>Jr(Ls),B3e={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Jq=ql({name:"legend",initialState:B3e,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=o0(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:Gje,setLegendSettings:Vje,addLegendPayload:$3e,removeLegendPayload:U3e}=Jq.actions,z3e=Jq.reducer;function bC(){return bC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bC.apply(null,arguments)}function KR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ek(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KR(Object(r),!0).forEach(function(n){W3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W3e(e,t,r){return(t=H3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H3e(e){var t=G3e(e,"string");return typeof t=="symbol"?t:t+""}function G3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V3e(e){return Array.isArray(e)&&nd(e[0])&&nd(e[1])?e.join(" ~ "):e}var q3e=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:a,formatter:i,itemSorter:o,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,g=()=>{if(a&&a.length){var N={padding:0,margin:0},A=(o?CS(a,o):a).map((P,j)=>{if(P.type==="none")return null;var F=P.formatter||i||V3e,{value:R,name:L}=P,V=R,Z=L;if(F){var Y=F(R,L,P,j,a);if(Array.isArray(Y))[V,Z]=Y;else if(Y!=null)V=Y;else return null}var re=ek({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},n);return _.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(j),style:re},nd(Z)?_.createElement("span",{className:"recharts-tooltip-item-name"},Z):null,nd(Z)?_.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,_.createElement("span",{className:"recharts-tooltip-item-value"},V),_.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return _.createElement("ul",{className:"recharts-tooltip-item-list",style:N},A)}return null},p=ek({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),y=ek({margin:0},s),v=!Ni(d),C=v?d:"",S=Rs("recharts-default-tooltip",c),w=Rs("recharts-tooltip-label",u);v&&f&&a!==void 0&&a!==null&&(C=f(d,a));var T=h?{role:"status","aria-live":"assertive"}:{};return _.createElement("div",bC({className:S,style:p},T),_.createElement("p",{className:w,style:y},_.isValidElement(C)?C:"".concat(C)),g())},Ny="recharts-tooltip-wrapper",K3e={visibility:"hidden"};function Y3e(e){var{coordinate:t,translateX:r,translateY:n}=e;return Rs(Ny,{["".concat(Ny,"-right")]:cn(r)&&t&&cn(t.x)&&r>=t.x,["".concat(Ny,"-left")]:cn(r)&&t&&cn(t.x)&&r<t.x,["".concat(Ny,"-bottom")]:cn(n)&&t&&cn(t.y)&&n>=t.y,["".concat(Ny,"-top")]:cn(n)&&t&&cn(t.y)&&n<t.y})}function YR(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=e;if(a&&cn(a[n]))return a[n];var d=r[n]-o-(s>0?s:0),f=r[n]+s;if(t[n])return i[n]?d:f;var h=c[n];if(h==null)return 0;if(i[n]){var g=d,p=h;return g<p?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var y=f+o,v=h+u;return y>v?Math.max(d,h):Math.max(f,h)}function X3e(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function J3e(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:a,tooltipBox:i,useTranslate3d:o,viewBox:c}=e,u,d,f;return i.height>0&&i.width>0&&r?(d=YR({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),f=YR({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),u=X3e({translateX:d,translateY:f,useTranslate3d:o})):u=K3e,{cssProperties:u,cssClasses:Y3e({translateX:d,translateY:f,coordinate:r})}}function XR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Dw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XR(Object(r),!0).forEach(function(n){wC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wC(e,t,r){return(t=Q3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q3e(e){var t=Z3e(e,"string");return typeof t=="symbol"?t:t+""}function Z3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class e5e extends _.PureComponent{constructor(){super(...arguments),wC(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),wC(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:a,coordinate:i,hasPayload:o,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:g,wrapperStyle:p,lastBoundingBox:y,innerRef:v,hasPortalFromProps:C}=this.props,{cssClasses:S,cssProperties:w}=J3e({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:y.height,width:y.width},useTranslate3d:h,viewBox:g}),T=C?{}:Dw(Dw({transition:c&&t?"transform ".concat(n,"ms ").concat(s):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),N=Dw(Dw({},T),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},p);return _.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:S,style:N,ref:v},a)}}var t5e=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),M1={devToolsEnabled:!1,isSsr:t5e()},Qq=()=>Jr(e=>e.rootProps.accessibilityLayer);function mu(e){return Number.isFinite(e)}function u_(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function _C(){return _C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_C.apply(null,arguments)}function JR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function QR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JR(Object(r),!0).forEach(function(n){r5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r5e(e,t,r){return(t=n5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n5e(e){var t=s5e(e,"string");return typeof t=="symbol"?t:t+""}function s5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZR={curveBasisClosed:q4e,curveBasisOpen:K4e,curveBasis:V4e,curveBumpX:H4e,curveBumpY:G4e,curveLinearClosed:Y4e,curveLinear:SS,curveMonotoneX:X4e,curveMonotoneY:J4e,curveNatural:Q4e,curveStep:Z4e,curveStepAfter:t_e,curveStepBefore:e_e},Rw=e=>mu(e.x)&&mu(e.y),Ay=e=>e.x,jy=e=>e.y,a5e=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(VE(e));return(r==="curveMonotone"||r==="curveBump")&&t?ZR["".concat(r).concat(t==="vertical"?"Y":"X")]:ZR[r]||SS},i5e=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:a=!1}=e,i=a5e(t,s),o=a?r.filter(Rw):r,c;if(Array.isArray(n)){var u=a?n.filter(f=>Rw(f)):n,d=o.map((f,h)=>QR(QR({},f),{},{base:u[h]}));return s==="vertical"?c=Nw().y(jy).x1(Ay).x0(f=>f.base.x):c=Nw().x(Ay).y1(jy).y0(f=>f.base.y),c.defined(Rw).curve(i),c(d)}return s==="vertical"&&cn(n)?c=Nw().y(jy).x1(Ay).x0(n):cn(n)?c=Nw().x(Ay).y1(jy).y0(n):c=JV().x(Ay).y(jy),c.defined(Rw).curve(i),c(o)},Zq=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var a=r&&r.length?i5e(e):n;return _.createElement("path",_C({},og(e),KE(e),{className:Rs("recharts-curve",t),d:a===null?void 0:a,ref:s}))},o5e=["x","y","top","left","width","height","className"];function SC(){return SC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SC.apply(null,arguments)}function eI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function l5e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eI(Object(r),!0).forEach(function(n){c5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c5e(e,t,r){return(t=u5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u5e(e){var t=d5e(e,"string");return typeof t=="symbol"?t:t+""}function d5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f5e(e,t){if(e==null)return{};var r,n,s=h5e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function h5e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var m5e=(e,t,r,n,s,a)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),g5e=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:a=0,height:i=0,className:o}=e,c=f5e(e,o5e),u=l5e({x:t,y:r,top:n,left:s,width:a,height:i},c);return!cn(t)||!cn(r)||!cn(a)||!cn(i)||!cn(n)||!cn(s)?null:_.createElement("path",SC({},to(u,!0),{className:Rs("recharts-cross",o),d:m5e(t,r,a,i,n,s)}))};function p5e(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function tI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function x5e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tI(Object(r),!0).forEach(function(n){y5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y5e(e,t,r){return(t=v5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v5e(e){var t=b5e(e,"string");return typeof t=="symbol"?t:t+""}function b5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dc(e,t){var r=x5e({},e),n=t,s=Object.keys(t),a=s.reduce((i,o)=>(i[o]===void 0&&n[o]!==void 0&&(i[o]=n[o]),i),r);return a}function w5e(){}function rI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rI(Object(r),!0).forEach(function(n){_5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _5e(e,t,r){return(t=S5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S5e(e){var t=k5e(e,"string");return typeof t=="symbol"?t:t+""}function k5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var C5e=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),T5e=(e,t,r)=>e.map(n=>"".concat(C5e(n)," ").concat(t,"ms ").concat(r)).join(","),E5e=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Xv=(e,t)=>Object.keys(t).reduce((r,n)=>nI(nI({},r),{},{[n]:e(n,t[n])}),{});function sI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sI(Object(r),!0).forEach(function(n){N5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N5e(e,t,r){return(t=A5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A5e(e){var t=j5e(e,"string");return typeof t=="symbol"?t:t+""}function j5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var d_=(e,t,r)=>e+(t-e)*r,kC=e=>{var{from:t,to:r}=e;return t!==r},eK=(e,t,r)=>{var n=Xv((s,a)=>{if(kC(a)){var[i,o]=e(a.from,a.to,a.velocity);return qi(qi({},a),{},{from:i,velocity:o})}return a},t);return r<1?Xv((s,a)=>kC(a)?qi(qi({},a),{},{velocity:d_(a.velocity,n[s].velocity,r),from:d_(a.from,n[s].from,r)}):a,t):eK(e,n,r-1)};function P5e(e,t,r,n,s,a){var i,o=n.reduce((h,g)=>qi(qi({},h),{},{[g]:{from:e[g],velocity:0,to:t[g]}}),{}),c=()=>Xv((h,g)=>g.from,o),u=()=>!Object.values(o).filter(kC).length,d=null,f=h=>{i||(i=h);var g=h-i,p=g/r.dt;o=eK(r,o,p),s(qi(qi(qi({},e),t),c())),i=h,u()||(d=a.setTimeout(f))};return()=>(d=a.setTimeout(f),()=>{d()})}function F5e(e,t,r,n,s,a,i){var o=null,c=s.reduce((f,h)=>qi(qi({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,g=Xv((y,v)=>d_(...v,r(h)),c);if(a(qi(qi(qi({},e),t),g)),h<1)o=i.setTimeout(d);else{var p=Xv((y,v)=>d_(...v,r(1)),c);a(qi(qi(qi({},e),t),p))}};return()=>(o=i.setTimeout(d),()=>{o()})}const M5e=(e,t,r,n,s,a)=>{var i=E5e(e,t);return r.isStepper===!0?P5e(e,t,r,i,s,a):F5e(e,t,r,n,i,s,a)};var f_=1e-4,tK=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],rK=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),aI=(e,t)=>r=>{var n=tK(e,t);return rK(n,r)},O5e=(e,t)=>r=>{var n=tK(e,t),s=[...n.map((a,i)=>a*i).slice(1),0];return rK(s,r)},iI=function(){for(var t,r,n,s,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[t,n,r,s]=[0,0,1,1];break;case"ease":[t,n,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,s]=[.42,0,1,1];break;case"ease-out":[t,n,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,s]=[0,0,.58,1];break;default:{var c=i[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,s]=c[1].split(")")[0].split(",").map(p=>parseFloat(p)))}}else i.length===4&&([t,n,r,s]=i);var u=aI(t,r),d=aI(n,s),f=O5e(t,r),h=p=>p>1?1:p<0?0:p,g=p=>{for(var y=p>1?1:p,v=y,C=0;C<8;++C){var S=u(v)-y,w=f(v);if(Math.abs(S-y)<f_||w<f_)return d(v);v=h(v-S/w)}return d(v)};return g.isStepper=!1,g},D5e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,a=(i,o,c)=>{var u=-(i-o)*r,d=c*n,f=c+(u-d)*s/1e3,h=c*s/1e3+i;return Math.abs(h-o)<f_&&Math.abs(f)<f_?[o,0]:[h,f]};return a.isStepper=!0,a.dt=s,a},R5e=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return iI(e);case"spring":return D5e();default:if(e.split("(")[0]==="cubic-bezier")return iI(e)}return typeof e=="function"?e:null};function I5e(e){var t,r=()=>null,n=!1,s=null,a=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,[c,...u]=o;if(typeof c=="number"){s=e.setTimeout(a.bind(null,u),c);return}a(c),s=e.setTimeout(a.bind(null,u));return}typeof i=="string"&&(t=i,r(t)),typeof i=="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,s&&(s(),s=null),a(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>e}}class L5e{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,a=i=>{i-n>=r?t(i):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(a))};return s=requestAnimationFrame(a),()=>{cancelAnimationFrame(s)}}}function B5e(){return I5e(new L5e)}var $5e=_.createContext(B5e);function U5e(e,t){var r=_.useContext($5e);return _.useMemo(()=>t??r(e),[e,t,r])}var z5e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},oI={t:0},tk={t:1};function nK(e){var t=Dc(e,z5e),{isActive:r,canBegin:n,duration:s,easing:a,begin:i,onAnimationEnd:o,onAnimationStart:c,children:u}=t,d=U5e(t.animationId,t.animationManager),[f,h]=_.useState(r?oI:tk),g=_.useRef(null);return _.useEffect(()=>{r||h(tk)},[r]),_.useEffect(()=>{if(!r||!n)return w5e;var p=M5e(oI,tk,R5e(a),s,h,d.getTimeoutController()),y=()=>{g.current=p()};return d.start([c,i,y,s,o]),()=>{d.stop(),g.current&&g.current(),o()}},[r,n,s,a,i,c,o,d]),u(f.t)}function sK(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=_.useRef(qv(t)),n=_.useRef(e);return n.current!==e&&(r.current=qv(t),n.current=e),r.current}function lI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function cI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lI(Object(r),!0).forEach(function(n){W5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W5e(e,t,r){return(t=H5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H5e(e){var t=G5e(e,"string");return typeof t=="symbol"?t:t+""}function G5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function h_(){return h_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h_.apply(null,arguments)}var uI=(e,t,r,n,s)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,o=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(a>0&&s instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=s[f]>a?a:s[f];u="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+i*d[1])),u+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-i*d[3])),u+="Z"}else if(a>0&&s===+s&&s>0){var g=Math.min(a,s);u="M ".concat(e,",").concat(t+i*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+o*g,",").concat(t,`
            L `).concat(e+r-o*g,",").concat(t,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+r,",").concat(t+i*g,`
            L `).concat(e+r,",").concat(t+n-i*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+r-o*g,",").concat(t+n,`
            L `).concat(e+o*g,",").concat(t+n,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e,",").concat(t+n-i*g," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},V5e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},q5e=e=>{var t=Dc(e,V5e),r=_.useRef(null),[n,s]=_.useState(-1);_.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var Y=r.current.getTotalLength();Y&&s(Y)}catch{}},[]);var{x:a,y:i,width:o,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:g,isAnimationActive:p,isUpdateAnimationActive:y}=t,v=_.useRef(o),C=_.useRef(c),S=_.useRef(a),w=_.useRef(i),T=_.useMemo(()=>({x:a,y:i,width:o,height:c,radius:u}),[a,i,o,c,u]),N=sK(T,"rectangle-");if(a!==+a||i!==+i||o!==+o||c!==+c||o===0||c===0)return null;var A=Rs("recharts-rectangle",d);if(!y)return _.createElement("path",h_({},to(t,!0),{className:A,d:uI(a,i,o,c,u)}));var P=v.current,j=C.current,F=S.current,R=w.current,L="0px ".concat(n===-1?1:n,"px"),V="".concat(n,"px 0px"),Z=T5e(["strokeDasharray"],h,typeof f=="string"?f:void 0);return _.createElement(nK,{animationId:N,key:N,canBegin:n>0,duration:h,easing:f,isActive:y,begin:g},Y=>{var re=Kd(P,o,Y),ue=Kd(j,c,Y),z=Kd(F,a,Y),X=Kd(R,i,Y);r.current&&(v.current=re,C.current=ue,S.current=z,w.current=X);var I;return p?Y>0?I={transition:Z,strokeDasharray:V}:I={strokeDasharray:L}:I={strokeDasharray:V},_.createElement("path",h_({},to(t,!0),{className:A,d:uI(z,X,re,ue,u),ref:r,style:cI(cI({},I),t.style)}))})};function aK(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:a}=e,i=Qi(t,r,n,s),o=Qi(t,r,n,a);return{points:[i,o],cx:t,cy:r,radius:n,startAngle:s,endAngle:a}}function CC(){return CC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CC.apply(null,arguments)}var K5e=(e,t)=>{var r=bc(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Iw=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:a,isExternal:i,cornerRadius:o,cornerIsExternal:c}=e,u=o*(i?1:-1)+n,d=Math.asin(o/u)/c_,f=c?s:s+a*d,h=Qi(t,r,u,f),g=Qi(t,r,n,f),p=c?s-a*d:s,y=Qi(t,r,u*Math.cos(d*c_),p);return{center:h,circleTangency:g,lineTangency:y,theta:d}},iK=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:a,endAngle:i}=e,o=K5e(a,i),c=a+o,u=Qi(t,r,s,a),d=Qi(t,r,s,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(a>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=Qi(t,r,n,a),g=Qi(t,r,n,c);f+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(a<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},Y5e=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:a,forceCornerRadius:i,cornerIsExternal:o,startAngle:c,endAngle:u}=e,d=bc(u-c),{circleTangency:f,lineTangency:h,theta:g}=Iw({cx:t,cy:r,radius:s,angle:c,sign:d,cornerRadius:a,cornerIsExternal:o}),{circleTangency:p,lineTangency:y,theta:v}=Iw({cx:t,cy:r,radius:s,angle:u,sign:-d,cornerRadius:a,cornerIsExternal:o}),C=o?Math.abs(c-u):Math.abs(c-u)-g-v;if(C<0)return i?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):iK({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:c,endAngle:u});var S="M ".concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(C>180),",").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(n>0){var{circleTangency:w,lineTangency:T,theta:N}=Iw({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:A,lineTangency:P,theta:j}=Iw({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),F=o?Math.abs(c-u):Math.abs(c-u)-N-j;if(F<0&&a===0)return"".concat(S,"L").concat(t,",").concat(r,"Z");S+="L".concat(P.x,",").concat(P.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(F>180),",").concat(+(d>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,"Z")}else S+="L".concat(t,",").concat(r,"Z");return S},X5e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},J5e=e=>{var t=Dc(e,X5e),{cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(a<s||u===d)return null;var h=Rs("recharts-sector",f),g=a-s,p=Zf(i,g,0,!0),y;return p>0&&Math.abs(u-d)<360?y=Y5e({cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:Math.min(p,g/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}):y=iK({cx:r,cy:n,innerRadius:s,outerRadius:a,startAngle:u,endAngle:d}),_.createElement("path",CC({},to(t,!0),{className:h,d:y}))};function Q5e(e,t,r){var n,s,a,i;if(e==="horizontal")n=t.x,a=n,s=r.top,i=r.top+r.height;else if(e==="vertical")s=t.y,i=s,n=r.left,a=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,h=Qi(o,c,u,f),g=Qi(o,c,d,f);n=h.x,s=h.y,a=g.x,i=g.y}else return aK(t);return[{x:n,y:s},{x:a,y:i}]}var rk={},nk={},sk={},dI;function Z5e(){return dI||(dI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gq();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(sk)),sk}var fI;function e6e(){return fI||(fI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z5e();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(nk)),nk}var hI;function t6e(){return hI||(hI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pq(),r=e6e();function n(s,a,i){i&&typeof i!="number"&&t.isIterateeCall(s,a,i)&&(a=i=void 0),s=r.toFinite(s),a===void 0?(a=s,s=0):a=r.toFinite(a),i=i===void 0?s<a?1:-1:r.toFinite(i);const o=Math.max(Math.ceil((a-s)/(i||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=s,s+=i;return c}e.range=n})(rk)),rk}var ak,mI;function r6e(){return mI||(mI=1,ak=t6e().range),ak}var n6e=r6e();const oK=Fc(n6e);function Uf(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function s6e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function iN(e){let t,r,n;e.length!==2?(t=Uf,r=(o,c)=>Uf(e(o),c),n=(o,c)=>e(o)-c):(t=e===Uf||e===s6e?e:a6e,r=e,n=e);function s(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function a(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function i(o,c,u=0,d=o.length){const f=s(o,c,u,d-1);return f>u&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:s,center:i,right:a}}function a6e(){return 0}function lK(e){return e===null?NaN:+e}function*i6e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const o6e=iN(Uf),L2=o6e.right;iN(lK).center;class gI extends Map{constructor(t,r=u6e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(pI(this,t))}has(t){return super.has(pI(this,t))}set(t,r){return super.set(l6e(this,t),r)}delete(t){return super.delete(c6e(this,t))}}function pI({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function l6e({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function c6e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function u6e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function d6e(e=Uf){if(e===Uf)return cK;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function cK(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const f6e=Math.sqrt(50),h6e=Math.sqrt(10),m6e=Math.sqrt(2);function m_(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),i=a>=f6e?10:a>=h6e?5:a>=m6e?2:1;let o,c,u;return s<0?(u=Math.pow(10,-s)/i,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*i,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=r&&r<2?m_(e,t,r*2):[o,c,u]}function TC(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,a,i]=n?m_(t,e,r):m_(e,t,r);if(!(a>=s))return[];const o=a-s+1,c=new Array(o);if(n)if(i<0)for(let u=0;u<o;++u)c[u]=(a-u)/-i;else for(let u=0;u<o;++u)c[u]=(a-u)*i;else if(i<0)for(let u=0;u<o;++u)c[u]=(s+u)/-i;else for(let u=0;u<o;++u)c[u]=(s+u)*i;return c}function EC(e,t,r){return t=+t,e=+e,r=+r,m_(e,t,r)[2]}function NC(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?EC(t,e,r):EC(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function xI(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function yI(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function uK(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?cK:d6e(s);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),g=Math.max(r,Math.floor(t-u*f/c+h)),p=Math.min(n,Math.floor(t+(c-u)*f/c+h));uK(e,t,g,p,s)}const a=e[t];let i=r,o=n;for(Py(e,r,t),s(e[n],a)>0&&Py(e,r,n);i<o;){for(Py(e,i,o),++i,--o;s(e[i],a)<0;)++i;for(;s(e[o],a)>0;)--o}s(e[r],a)===0?Py(e,r,o):(++o,Py(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function Py(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function g6e(e,t,r){if(e=Float64Array.from(i6e(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return yI(e);if(t>=1)return xI(e);var n,s=(n-1)*t,a=Math.floor(s),i=xI(uK(e,a).subarray(0,a+1)),o=yI(e.subarray(a+1));return i+(o-i)*(s-a)}}function p6e(e,t,r=lK){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,a=Math.floor(s),i=+r(e[a],a,e),o=+r(e[a+1],a+1,e);return i+(o-i)*(s-a)}}function x6e(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(s);++n<s;)a[n]=e+n*r;return a}function Rc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function P0(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const AC=Symbol("implicit");function oN(){var e=new gI,t=[],r=[],n=AC;function s(a){let i=e.get(a);if(i===void 0){if(n!==AC)return n;e.set(a,i=t.push(a)-1)}return r[i%r.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new gI;for(const i of a)e.has(i)||e.set(i,t.push(i)-1);return s},s.range=function(a){return arguments.length?(r=Array.from(a),s):r.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return oN(t,r).unknown(n)},Rc.apply(s,arguments),s}function lN(){var e=oN().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,a,i,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,g=s<n,p=g?s:n,y=g?n:s;a=(y-p)/Math.max(1,h-c+u*2),o&&(a=Math.floor(a)),p+=(y-p-a*(h-c))*d,i=a*(1-c),o&&(p=Math.round(p),i=Math.round(i));var v=x6e(h).map(function(C){return p+a*C});return r(g?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,s]=h,n=+n,s=+s,f()):[n,s]},e.rangeRound=function(h){return[n,s]=h,n=+n,s=+s,o=!0,f()},e.bandwidth=function(){return i},e.step=function(){return a},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return lN(t(),[n,s]).round(o).paddingInner(c).paddingOuter(u).align(d)},Rc.apply(f(),arguments)}function dK(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return dK(t())},e}function y6e(){return dK(lN.apply(null,arguments).paddingInner(1))}function cN(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function fK(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function B2(){}var Jv=.7,g_=1/Jv,Up="\\s*([+-]?\\d+)\\s*",Qv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ed="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",v6e=/^#([0-9a-f]{3,8})$/,b6e=new RegExp(`^rgb\\(${Up},${Up},${Up}\\)$`),w6e=new RegExp(`^rgb\\(${ed},${ed},${ed}\\)$`),_6e=new RegExp(`^rgba\\(${Up},${Up},${Up},${Qv}\\)$`),S6e=new RegExp(`^rgba\\(${ed},${ed},${ed},${Qv}\\)$`),k6e=new RegExp(`^hsl\\(${Qv},${ed},${ed}\\)$`),C6e=new RegExp(`^hsla\\(${Qv},${ed},${ed},${Qv}\\)$`),vI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cN(B2,Zv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:bI,formatHex:bI,formatHex8:T6e,formatHsl:E6e,formatRgb:wI,toString:wI});function bI(){return this.rgb().formatHex()}function T6e(){return this.rgb().formatHex8()}function E6e(){return hK(this).formatHsl()}function wI(){return this.rgb().formatRgb()}function Zv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=v6e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?_I(t):r===3?new fl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Lw(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Lw(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=b6e.exec(e))?new fl(t[1],t[2],t[3],1):(t=w6e.exec(e))?new fl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_6e.exec(e))?Lw(t[1],t[2],t[3],t[4]):(t=S6e.exec(e))?Lw(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=k6e.exec(e))?CI(t[1],t[2]/100,t[3]/100,1):(t=C6e.exec(e))?CI(t[1],t[2]/100,t[3]/100,t[4]):vI.hasOwnProperty(e)?_I(vI[e]):e==="transparent"?new fl(NaN,NaN,NaN,0):null}function _I(e){return new fl(e>>16&255,e>>8&255,e&255,1)}function Lw(e,t,r,n){return n<=0&&(e=t=r=NaN),new fl(e,t,r,n)}function N6e(e){return e instanceof B2||(e=Zv(e)),e?(e=e.rgb(),new fl(e.r,e.g,e.b,e.opacity)):new fl}function jC(e,t,r,n){return arguments.length===1?N6e(e):new fl(e,t,r,n??1)}function fl(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}cN(fl,jC,fK(B2,{brighter(e){return e=e==null?g_:Math.pow(g_,e),new fl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jv:Math.pow(Jv,e),new fl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fl(_m(this.r),_m(this.g),_m(this.b),p_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:SI,formatHex:SI,formatHex8:A6e,formatRgb:kI,toString:kI}));function SI(){return`#${lm(this.r)}${lm(this.g)}${lm(this.b)}`}function A6e(){return`#${lm(this.r)}${lm(this.g)}${lm(this.b)}${lm((isNaN(this.opacity)?1:this.opacity)*255)}`}function kI(){const e=p_(this.opacity);return`${e===1?"rgb(":"rgba("}${_m(this.r)}, ${_m(this.g)}, ${_m(this.b)}${e===1?")":`, ${e})`}`}function p_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function _m(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function lm(e){return e=_m(e),(e<16?"0":"")+e.toString(16)}function CI(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new su(e,t,r,n)}function hK(e){if(e instanceof su)return new su(e.h,e.s,e.l,e.opacity);if(e instanceof B2||(e=Zv(e)),!e)return new su;if(e instanceof su)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),a=Math.max(t,r,n),i=NaN,o=a-s,c=(a+s)/2;return o?(t===a?i=(r-n)/o+(r<n)*6:r===a?i=(n-t)/o+2:i=(t-r)/o+4,o/=c<.5?a+s:2-a-s,i*=60):o=c>0&&c<1?0:i,new su(i,o,c,e.opacity)}function j6e(e,t,r,n){return arguments.length===1?hK(e):new su(e,t,r,n??1)}function su(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}cN(su,j6e,fK(B2,{brighter(e){return e=e==null?g_:Math.pow(g_,e),new su(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jv:Math.pow(Jv,e),new su(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new fl(ik(e>=240?e-240:e+120,s,n),ik(e,s,n),ik(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new su(TI(this.h),Bw(this.s),Bw(this.l),p_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=p_(this.opacity);return`${e===1?"hsl(":"hsla("}${TI(this.h)}, ${Bw(this.s)*100}%, ${Bw(this.l)*100}%${e===1?")":`, ${e})`}`}}));function TI(e){return e=(e||0)%360,e<0?e+360:e}function Bw(e){return Math.max(0,Math.min(1,e||0))}function ik(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const uN=e=>()=>e;function P6e(e,t){return function(r){return e+r*t}}function F6e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function M6e(e){return(e=+e)==1?mK:function(t,r){return r-t?F6e(t,r,e):uN(isNaN(t)?r:t)}}function mK(e,t){var r=t-e;return r?P6e(e,r):uN(isNaN(e)?t:e)}const EI=(function e(t){var r=M6e(t);function n(s,a){var i=r((s=jC(s)).r,(a=jC(a)).r),o=r(s.g,a.g),c=r(s.b,a.b),u=mK(s.opacity,a.opacity);return function(d){return s.r=i(d),s.g=o(d),s.b=c(d),s.opacity=u(d),s+""}}return n.gamma=e,n})(1);function O6e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(a){for(s=0;s<r;++s)n[s]=e[s]*(1-a)+t[s]*a;return n}}function D6e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function R6e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),a=new Array(r),i;for(i=0;i<n;++i)s[i]=O1(e[i],t[i]);for(;i<r;++i)a[i]=t[i];return function(o){for(i=0;i<n;++i)a[i]=s[i](o);return a}}function I6e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function x_(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function L6e(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=O1(e[s],t[s]):n[s]=t[s];return function(a){for(s in r)n[s]=r[s](a);return n}}var PC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ok=new RegExp(PC.source,"g");function B6e(e){return function(){return e}}function $6e(e){return function(t){return e(t)+""}}function U6e(e,t){var r=PC.lastIndex=ok.lastIndex=0,n,s,a,i=-1,o=[],c=[];for(e=e+"",t=t+"";(n=PC.exec(e))&&(s=ok.exec(t));)(a=s.index)>r&&(a=t.slice(r,a),o[i]?o[i]+=a:o[++i]=a),(n=n[0])===(s=s[0])?o[i]?o[i]+=s:o[++i]=s:(o[++i]=null,c.push({i,x:x_(n,s)})),r=ok.lastIndex;return r<t.length&&(a=t.slice(r),o[i]?o[i]+=a:o[++i]=a),o.length<2?c[0]?$6e(c[0].x):B6e(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function O1(e,t){var r=typeof t,n;return t==null||r==="boolean"?uN(t):(r==="number"?x_:r==="string"?(n=Zv(t))?(t=n,EI):U6e:t instanceof Zv?EI:t instanceof Date?I6e:D6e(t)?O6e:Array.isArray(t)?R6e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?L6e:x_)(e,t)}function dN(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function z6e(e,t){t===void 0&&(t=e,e=O1);for(var r=0,n=t.length-1,s=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(s,s=t[++r]);return function(i){var o=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return a[o](i-o)}}function W6e(e){return function(){return e}}function y_(e){return+e}var NI=[0,1];function Ho(e){return e}function FC(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:W6e(isNaN(t)?NaN:.5)}function H6e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function G6e(e,t,r){var n=e[0],s=e[1],a=t[0],i=t[1];return s<n?(n=FC(s,n),a=r(i,a)):(n=FC(n,s),a=r(a,i)),function(o){return a(n(o))}}function V6e(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),a=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)s[i]=FC(e[i],e[i+1]),a[i]=r(t[i],t[i+1]);return function(o){var c=L2(e,o,1,n)-1;return a[c](s[c](o))}}function $2(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function DS(){var e=NI,t=NI,r=O1,n,s,a,i=Ho,o,c,u;function d(){var h=Math.min(e.length,t.length);return i!==Ho&&(i=H6e(e[0],e[h-1])),o=h>2?V6e:G6e,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(c||(c=o(e.map(n),t,r)))(n(i(h)))}return f.invert=function(h){return i(s((u||(u=o(t,e.map(n),x_)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,y_),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=dN,d()},f.clamp=function(h){return arguments.length?(i=h?!0:Ho,d()):i!==Ho},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,g){return n=h,s=g,d()}}function fN(){return DS()(Ho,Ho)}function q6e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function v_(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function n1(e){return e=v_(Math.abs(e)),e?e[1]:NaN}function K6e(e,t){return function(r,n){for(var s=r.length,a=[],i=0,o=e[0],c=0;s>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),a.push(r.substring(s-=o,s+o)),!((c+=o+1)>n));)o=e[i=(i+1)%e.length];return a.reverse().join(t)}}function Y6e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var X6e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function e2(e){if(!(t=X6e.exec(e)))throw new Error("invalid format: "+e);var t;return new hN({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}e2.prototype=hN.prototype;function hN(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}hN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function J6e(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var gK;function Q6e(e,t){var r=v_(e,t);if(!r)return e+"";var n=r[0],s=r[1],a=s-(gK=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,i=n.length;return a===i?n:a>i?n+new Array(a-i+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+v_(e,Math.max(0,t+a-1))[0]}function AI(e,t){var r=v_(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const jI={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:q6e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>AI(e*100,t),r:AI,s:Q6e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function PI(e){return e}var FI=Array.prototype.map,MI=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Z6e(e){var t=e.grouping===void 0||e.thousands===void 0?PI:K6e(FI.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?PI:Y6e(FI.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=e2(f);var h=f.fill,g=f.align,p=f.sign,y=f.symbol,v=f.zero,C=f.width,S=f.comma,w=f.precision,T=f.trim,N=f.type;N==="n"?(S=!0,N="g"):jI[N]||(w===void 0&&(w=12),T=!0,N="g"),(v||h==="0"&&g==="=")&&(v=!0,h="0",g="=");var A=y==="$"?r:y==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",P=y==="$"?n:/[%p]/.test(N)?i:"",j=jI[N],F=/[defgprs%]/.test(N);w=w===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function R(L){var V=A,Z=P,Y,re,ue;if(N==="c")Z=j(L)+Z,L="";else{L=+L;var z=L<0||1/L<0;if(L=isNaN(L)?c:j(Math.abs(L),w),T&&(L=J6e(L)),z&&+L==0&&p!=="+"&&(z=!1),V=(z?p==="("?p:o:p==="-"||p==="("?"":p)+V,Z=(N==="s"?MI[8+gK/3]:"")+Z+(z&&p==="("?")":""),F){for(Y=-1,re=L.length;++Y<re;)if(ue=L.charCodeAt(Y),48>ue||ue>57){Z=(ue===46?s+L.slice(Y+1):L.slice(Y))+Z,L=L.slice(0,Y);break}}}S&&!v&&(L=t(L,1/0));var X=V.length+L.length+Z.length,I=X<C?new Array(C-X+1).join(h):"";switch(S&&v&&(L=t(I+L,I.length?C-Z.length:1/0),I=""),g){case"<":L=V+L+Z+I;break;case"=":L=V+I+L+Z;break;case"^":L=I.slice(0,X=I.length>>1)+V+L+Z+I.slice(X);break;default:L=I+V+L+Z;break}return a(L)}return R.toString=function(){return f+""},R}function d(f,h){var g=u((f=e2(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(n1(h)/3)))*3,y=Math.pow(10,-p),v=MI[8+p/3];return function(C){return g(y*C)+v}}return{format:u,formatPrefix:d}}var $w,mN,pK;eke({thousands:",",grouping:[3],currency:["$",""]});function eke(e){return $w=Z6e(e),mN=$w.format,pK=$w.formatPrefix,$w}function tke(e){return Math.max(0,-n1(Math.abs(e)))}function rke(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(n1(t)/3)))*3-n1(Math.abs(e)))}function nke(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,n1(t)-n1(e))+1}function xK(e,t,r,n){var s=NC(e,t,r),a;switch(n=e2(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=rke(s,i))&&(n.precision=a),pK(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=nke(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=tke(s))&&(n.precision=a-(n.type==="%")*2);break}}return mN(n)}function fh(e){var t=e.domain;return e.ticks=function(r){var n=t();return TC(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return xK(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,a=n.length-1,i=n[s],o=n[a],c,u,d=10;for(o<i&&(u=i,i=o,o=u,u=s,s=a,a=u);d-- >0;){if(u=EC(i,o,r),u===c)return n[s]=i,n[a]=o,t(n);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function yK(){var e=fN();return e.copy=function(){return $2(e,yK())},Rc.apply(e,arguments),fh(e)}function vK(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,y_),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return vK(e).unknown(t)},e=arguments.length?Array.from(e,y_):[0,1],fh(r)}function bK(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],a=e[n],i;return a<s&&(i=r,r=n,n=i,i=s,s=a,a=i),e[r]=t.floor(s),e[n]=t.ceil(a),e}function OI(e){return Math.log(e)}function DI(e){return Math.exp(e)}function ske(e){return-Math.log(-e)}function ake(e){return-Math.exp(-e)}function ike(e){return isFinite(e)?+("1e"+e):e<0?0:e}function oke(e){return e===10?ike:e===Math.E?Math.exp:t=>Math.pow(e,t)}function lke(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function RI(e){return(t,r)=>-e(-t,r)}function gN(e){const t=e(OI,DI),r=t.domain;let n=10,s,a;function i(){return s=lke(n),a=oke(n),r()[0]<0?(s=RI(s),a=RI(a),e(ske,ake)):e(OI,DI),t}return t.base=function(o){return arguments.length?(n=+o,i()):n},t.domain=function(o){return arguments.length?(r(o),i()):r()},t.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=s(u),g=s(d),p,y;const v=o==null?10:+o;let C=[];if(!(n%1)&&g-h<v){if(h=Math.floor(h),g=Math.ceil(g),u>0){for(;h<=g;++h)for(p=1;p<n;++p)if(y=h<0?p/a(-h):p*a(h),!(y<u)){if(y>d)break;C.push(y)}}else for(;h<=g;++h)for(p=n-1;p>=1;--p)if(y=h>0?p/a(-h):p*a(h),!(y<u)){if(y>d)break;C.push(y)}C.length*2<v&&(C=TC(u,d,v))}else C=TC(h,g,Math.min(g-h,v)).map(a);return f?C.reverse():C},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=e2(c)).precision==null&&(c.trim=!0),c=mN(c)),o===1/0)return c;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/a(Math.round(s(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(bK(r(),{floor:o=>a(Math.floor(s(o))),ceil:o=>a(Math.ceil(s(o)))})),t}function wK(){const e=gN(DS()).domain([1,10]);return e.copy=()=>$2(e,wK()).base(e.base()),Rc.apply(e,arguments),e}function II(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function LI(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function pN(e){var t=1,r=e(II(t),LI(t));return r.constant=function(n){return arguments.length?e(II(t=+n),LI(t)):t},fh(r)}function _K(){var e=pN(DS());return e.copy=function(){return $2(e,_K()).constant(e.constant())},Rc.apply(e,arguments)}function BI(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function cke(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function uke(e){return e<0?-e*e:e*e}function xN(e){var t=e(Ho,Ho),r=1;function n(){return r===1?e(Ho,Ho):r===.5?e(cke,uke):e(BI(r),BI(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},fh(t)}function yN(){var e=xN(DS());return e.copy=function(){return $2(e,yN()).exponent(e.exponent())},Rc.apply(e,arguments),e}function dke(){return yN.apply(null,arguments).exponent(.5)}function $I(e){return Math.sign(e)*e*e}function fke(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function SK(){var e=fN(),t=[0,1],r=!1,n;function s(a){var i=fke(e(a));return isNaN(i)?n:r?Math.round(i):i}return s.invert=function(a){return e.invert($I(a))},s.domain=function(a){return arguments.length?(e.domain(a),s):e.domain()},s.range=function(a){return arguments.length?(e.range((t=Array.from(a,y_)).map($I)),s):t.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(r=!!a,s):r},s.clamp=function(a){return arguments.length?(e.clamp(a),s):e.clamp()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return SK(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Rc.apply(s,arguments),fh(s)}function kK(){var e=[],t=[],r=[],n;function s(){var i=0,o=Math.max(1,t.length);for(r=new Array(o-1);++i<o;)r[i-1]=p6e(e,i/o);return a}function a(i){return i==null||isNaN(i=+i)?n:t[L2(r,i)]}return a.invertExtent=function(i){var o=t.indexOf(i);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},a.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let o of i)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Uf),s()},a.range=function(i){return arguments.length?(t=Array.from(i),s()):t.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return kK().domain(e).range(t).unknown(n)},Rc.apply(a,arguments)}function CK(){var e=0,t=1,r=1,n=[.5],s=[0,1],a;function i(c){return c!=null&&c<=c?s[L2(n,c,0,r)]:a}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},i.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,o()):s.slice()},i.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(c){return arguments.length&&(a=c),i},i.thresholds=function(){return n.slice()},i.copy=function(){return CK().domain([e,t]).range(s).unknown(a)},Rc.apply(fh(i),arguments)}function TK(){var e=[.5],t=[0,1],r,n=1;function s(a){return a!=null&&a<=a?t[L2(e,a,0,n)]:r}return s.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var i=t.indexOf(a);return[e[i-1],e[i]]},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return TK().domain(e).range(t).unknown(r)},Rc.apply(s,arguments)}const lk=new Date,ck=new Date;function ui(e,t,r,n){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const i=s(a),o=s.ceil(a);return a-i<o-a?i:o},s.offset=(a,i)=>(t(a=new Date(+a),i==null?1:Math.floor(i)),a),s.range=(a,i,o)=>{const c=[];if(a=s.ceil(a),o=o==null?1:Math.floor(o),!(a<i)||!(o>0))return c;let u;do c.push(u=new Date(+a)),t(a,o),e(a);while(u<a&&a<i);return c},s.filter=a=>ui(i=>{if(i>=i)for(;e(i),!a(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;t(i,-1),!a(i););else for(;--o>=0;)for(;t(i,1),!a(i););}),r&&(s.count=(a,i)=>(lk.setTime(+a),ck.setTime(+i),e(lk),e(ck),Math.floor(r(lk,ck))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(n?i=>n(i)%a===0:i=>s.count(0,i)%a===0):s)),s}const b_=ui(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);b_.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ui(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):b_);b_.range;const Zd=1e3,wc=Zd*60,e0=wc*60,y0=e0*24,vN=y0*7,UI=y0*30,uk=y0*365,cm=ui(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Zd)},(e,t)=>(t-e)/Zd,e=>e.getUTCSeconds());cm.range;const bN=ui(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zd)},(e,t)=>{e.setTime(+e+t*wc)},(e,t)=>(t-e)/wc,e=>e.getMinutes());bN.range;const wN=ui(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*wc)},(e,t)=>(t-e)/wc,e=>e.getUTCMinutes());wN.range;const _N=ui(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zd-e.getMinutes()*wc)},(e,t)=>{e.setTime(+e+t*e0)},(e,t)=>(t-e)/e0,e=>e.getHours());_N.range;const SN=ui(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*e0)},(e,t)=>(t-e)/e0,e=>e.getUTCHours());SN.range;const U2=ui(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wc)/y0,e=>e.getDate()-1);U2.range;const RS=ui(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/y0,e=>e.getUTCDate()-1);RS.range;const EK=ui(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/y0,e=>Math.floor(e/y0));EK.range;function lg(e){return ui(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*wc)/vN)}const IS=lg(0),w_=lg(1),hke=lg(2),mke=lg(3),s1=lg(4),gke=lg(5),pke=lg(6);IS.range;w_.range;hke.range;mke.range;s1.range;gke.range;pke.range;function cg(e){return ui(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/vN)}const LS=cg(0),__=cg(1),xke=cg(2),yke=cg(3),a1=cg(4),vke=cg(5),bke=cg(6);LS.range;__.range;xke.range;yke.range;a1.range;vke.range;bke.range;const kN=ui(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());kN.range;const CN=ui(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());CN.range;const v0=ui(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());v0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ui(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});v0.range;const b0=ui(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());b0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ui(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});b0.range;function NK(e,t,r,n,s,a){const i=[[cm,1,Zd],[cm,5,5*Zd],[cm,15,15*Zd],[cm,30,30*Zd],[a,1,wc],[a,5,5*wc],[a,15,15*wc],[a,30,30*wc],[s,1,e0],[s,3,3*e0],[s,6,6*e0],[s,12,12*e0],[n,1,y0],[n,2,2*y0],[r,1,vN],[t,1,UI],[t,3,3*UI],[e,1,uk]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const g=f&&typeof f.range=="function"?f:c(u,d,f),p=g?g.range(u,+d+1):[];return h?p.reverse():p}function c(u,d,f){const h=Math.abs(d-u)/f,g=iN(([,,v])=>v).right(i,h);if(g===i.length)return e.every(NC(u/uk,d/uk,f));if(g===0)return b_.every(Math.max(NC(u,d,f),1));const[p,y]=i[h/i[g-1][2]<i[g][2]/h?g-1:g];return p.every(y)}return[o,c]}const[wke,_ke]=NK(b0,CN,LS,EK,SN,wN),[Ske,kke]=NK(v0,kN,IS,U2,_N,bN);function dk(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function fk(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Fy(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Cke(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,a=e.days,i=e.shortDays,o=e.months,c=e.shortMonths,u=My(s),d=Oy(s),f=My(a),h=Oy(a),g=My(i),p=Oy(i),y=My(o),v=Oy(o),C=My(c),S=Oy(c),w={a:z,A:X,b:I,B,c:null,d:qI,e:qI,f:Kke,g:s8e,G:i8e,H:Gke,I:Vke,j:qke,L:AK,m:Yke,M:Xke,p:W,q:D,Q:XI,s:JI,S:Jke,u:Qke,U:Zke,V:e8e,w:t8e,W:r8e,x:null,X:null,y:n8e,Y:a8e,Z:o8e,"%":YI},T={a:U,A:q,b:H,B:te,c:null,d:KI,e:KI,f:d8e,g:w8e,G:S8e,H:l8e,I:c8e,j:u8e,L:PK,m:f8e,M:h8e,p:Q,q:ae,Q:XI,s:JI,S:m8e,u:g8e,U:p8e,V:x8e,w:y8e,W:v8e,x:null,X:null,y:b8e,Y:_8e,Z:k8e,"%":YI},N={a:R,A:L,b:V,B:Z,c:Y,d:GI,e:GI,f:Uke,g:HI,G:WI,H:VI,I:VI,j:Ike,L:$ke,m:Rke,M:Lke,p:F,q:Dke,Q:Wke,s:Hke,S:Bke,u:jke,U:Pke,V:Fke,w:Ake,W:Mke,x:re,X:ue,y:HI,Y:WI,Z:Oke,"%":zke};w.x=A(r,w),w.X=A(n,w),w.c=A(t,w),T.x=A(r,T),T.X=A(n,T),T.c=A(t,T);function A(ce,me){return function(xe){var se=[],De=-1,He=0,rt=ce.length,_t,Ke,tt;for(xe instanceof Date||(xe=new Date(+xe));++De<rt;)ce.charCodeAt(De)===37&&(se.push(ce.slice(He,De)),(Ke=zI[_t=ce.charAt(++De)])!=null?_t=ce.charAt(++De):Ke=_t==="e"?" ":"0",(tt=me[_t])&&(_t=tt(xe,Ke)),se.push(_t),He=De+1);return se.push(ce.slice(He,De)),se.join("")}}function P(ce,me){return function(xe){var se=Fy(1900,void 0,1),De=j(se,ce,xe+="",0),He,rt;if(De!=xe.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(me&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(He=fk(Fy(se.y,0,1)),rt=He.getUTCDay(),He=rt>4||rt===0?__.ceil(He):__(He),He=RS.offset(He,(se.V-1)*7),se.y=He.getUTCFullYear(),se.m=He.getUTCMonth(),se.d=He.getUTCDate()+(se.w+6)%7):(He=dk(Fy(se.y,0,1)),rt=He.getDay(),He=rt>4||rt===0?w_.ceil(He):w_(He),He=U2.offset(He,(se.V-1)*7),se.y=He.getFullYear(),se.m=He.getMonth(),se.d=He.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),rt="Z"in se?fk(Fy(se.y,0,1)).getUTCDay():dk(Fy(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(rt+5)%7:se.w+se.U*7-(rt+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,fk(se)):dk(se)}}function j(ce,me,xe,se){for(var De=0,He=me.length,rt=xe.length,_t,Ke;De<He;){if(se>=rt)return-1;if(_t=me.charCodeAt(De++),_t===37){if(_t=me.charAt(De++),Ke=N[_t in zI?me.charAt(De++):_t],!Ke||(se=Ke(ce,xe,se))<0)return-1}else if(_t!=xe.charCodeAt(se++))return-1}return se}function F(ce,me,xe){var se=u.exec(me.slice(xe));return se?(ce.p=d.get(se[0].toLowerCase()),xe+se[0].length):-1}function R(ce,me,xe){var se=g.exec(me.slice(xe));return se?(ce.w=p.get(se[0].toLowerCase()),xe+se[0].length):-1}function L(ce,me,xe){var se=f.exec(me.slice(xe));return se?(ce.w=h.get(se[0].toLowerCase()),xe+se[0].length):-1}function V(ce,me,xe){var se=C.exec(me.slice(xe));return se?(ce.m=S.get(se[0].toLowerCase()),xe+se[0].length):-1}function Z(ce,me,xe){var se=y.exec(me.slice(xe));return se?(ce.m=v.get(se[0].toLowerCase()),xe+se[0].length):-1}function Y(ce,me,xe){return j(ce,t,me,xe)}function re(ce,me,xe){return j(ce,r,me,xe)}function ue(ce,me,xe){return j(ce,n,me,xe)}function z(ce){return i[ce.getDay()]}function X(ce){return a[ce.getDay()]}function I(ce){return c[ce.getMonth()]}function B(ce){return o[ce.getMonth()]}function W(ce){return s[+(ce.getHours()>=12)]}function D(ce){return 1+~~(ce.getMonth()/3)}function U(ce){return i[ce.getUTCDay()]}function q(ce){return a[ce.getUTCDay()]}function H(ce){return c[ce.getUTCMonth()]}function te(ce){return o[ce.getUTCMonth()]}function Q(ce){return s[+(ce.getUTCHours()>=12)]}function ae(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var me=A(ce+="",w);return me.toString=function(){return ce},me},parse:function(ce){var me=P(ce+="",!1);return me.toString=function(){return ce},me},utcFormat:function(ce){var me=A(ce+="",T);return me.toString=function(){return ce},me},utcParse:function(ce){var me=P(ce+="",!0);return me.toString=function(){return ce},me}}}var zI={"-":"",_:" ",0:"0"},ji=/^\s*\d+/,Tke=/^%/,Eke=/[\\^$*+?|[\]().{}]/g;function Kn(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",a=s.length;return n+(a<r?new Array(r-a+1).join(t)+s:s)}function Nke(e){return e.replace(Eke,"\\$&")}function My(e){return new RegExp("^(?:"+e.map(Nke).join("|")+")","i")}function Oy(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Ake(e,t,r){var n=ji.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function jke(e,t,r){var n=ji.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Pke(e,t,r){var n=ji.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Fke(e,t,r){var n=ji.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Mke(e,t,r){var n=ji.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function WI(e,t,r){var n=ji.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function HI(e,t,r){var n=ji.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Oke(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Dke(e,t,r){var n=ji.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function Rke(e,t,r){var n=ji.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function GI(e,t,r){var n=ji.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Ike(e,t,r){var n=ji.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function VI(e,t,r){var n=ji.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Lke(e,t,r){var n=ji.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Bke(e,t,r){var n=ji.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function $ke(e,t,r){var n=ji.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Uke(e,t,r){var n=ji.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function zke(e,t,r){var n=Tke.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Wke(e,t,r){var n=ji.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Hke(e,t,r){var n=ji.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function qI(e,t){return Kn(e.getDate(),t,2)}function Gke(e,t){return Kn(e.getHours(),t,2)}function Vke(e,t){return Kn(e.getHours()%12||12,t,2)}function qke(e,t){return Kn(1+U2.count(v0(e),e),t,3)}function AK(e,t){return Kn(e.getMilliseconds(),t,3)}function Kke(e,t){return AK(e,t)+"000"}function Yke(e,t){return Kn(e.getMonth()+1,t,2)}function Xke(e,t){return Kn(e.getMinutes(),t,2)}function Jke(e,t){return Kn(e.getSeconds(),t,2)}function Qke(e){var t=e.getDay();return t===0?7:t}function Zke(e,t){return Kn(IS.count(v0(e)-1,e),t,2)}function jK(e){var t=e.getDay();return t>=4||t===0?s1(e):s1.ceil(e)}function e8e(e,t){return e=jK(e),Kn(s1.count(v0(e),e)+(v0(e).getDay()===4),t,2)}function t8e(e){return e.getDay()}function r8e(e,t){return Kn(w_.count(v0(e)-1,e),t,2)}function n8e(e,t){return Kn(e.getFullYear()%100,t,2)}function s8e(e,t){return e=jK(e),Kn(e.getFullYear()%100,t,2)}function a8e(e,t){return Kn(e.getFullYear()%1e4,t,4)}function i8e(e,t){var r=e.getDay();return e=r>=4||r===0?s1(e):s1.ceil(e),Kn(e.getFullYear()%1e4,t,4)}function o8e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Kn(t/60|0,"0",2)+Kn(t%60,"0",2)}function KI(e,t){return Kn(e.getUTCDate(),t,2)}function l8e(e,t){return Kn(e.getUTCHours(),t,2)}function c8e(e,t){return Kn(e.getUTCHours()%12||12,t,2)}function u8e(e,t){return Kn(1+RS.count(b0(e),e),t,3)}function PK(e,t){return Kn(e.getUTCMilliseconds(),t,3)}function d8e(e,t){return PK(e,t)+"000"}function f8e(e,t){return Kn(e.getUTCMonth()+1,t,2)}function h8e(e,t){return Kn(e.getUTCMinutes(),t,2)}function m8e(e,t){return Kn(e.getUTCSeconds(),t,2)}function g8e(e){var t=e.getUTCDay();return t===0?7:t}function p8e(e,t){return Kn(LS.count(b0(e)-1,e),t,2)}function FK(e){var t=e.getUTCDay();return t>=4||t===0?a1(e):a1.ceil(e)}function x8e(e,t){return e=FK(e),Kn(a1.count(b0(e),e)+(b0(e).getUTCDay()===4),t,2)}function y8e(e){return e.getUTCDay()}function v8e(e,t){return Kn(__.count(b0(e)-1,e),t,2)}function b8e(e,t){return Kn(e.getUTCFullYear()%100,t,2)}function w8e(e,t){return e=FK(e),Kn(e.getUTCFullYear()%100,t,2)}function _8e(e,t){return Kn(e.getUTCFullYear()%1e4,t,4)}function S8e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?a1(e):a1.ceil(e),Kn(e.getUTCFullYear()%1e4,t,4)}function k8e(){return"+0000"}function YI(){return"%"}function XI(e){return+e}function JI(e){return Math.floor(+e/1e3)}var cp,MK,OK;C8e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function C8e(e){return cp=Cke(e),MK=cp.format,cp.parse,OK=cp.utcFormat,cp.utcParse,cp}function T8e(e){return new Date(e)}function E8e(e){return e instanceof Date?+e:+new Date(+e)}function TN(e,t,r,n,s,a,i,o,c,u){var d=fN(),f=d.invert,h=d.domain,g=u(".%L"),p=u(":%S"),y=u("%I:%M"),v=u("%I %p"),C=u("%a %d"),S=u("%b %d"),w=u("%B"),T=u("%Y");function N(A){return(c(A)<A?g:o(A)<A?p:i(A)<A?y:a(A)<A?v:n(A)<A?s(A)<A?C:S:r(A)<A?w:T)(A)}return d.invert=function(A){return new Date(f(A))},d.domain=function(A){return arguments.length?h(Array.from(A,E8e)):h().map(T8e)},d.ticks=function(A){var P=h();return e(P[0],P[P.length-1],A??10)},d.tickFormat=function(A,P){return P==null?N:u(P)},d.nice=function(A){var P=h();return(!A||typeof A.range!="function")&&(A=t(P[0],P[P.length-1],A??10)),A?h(bK(P,A)):d},d.copy=function(){return $2(d,TN(e,t,r,n,s,a,i,o,c,u))},d}function N8e(){return Rc.apply(TN(Ske,kke,v0,kN,IS,U2,_N,bN,cm,MK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function A8e(){return Rc.apply(TN(wke,_ke,b0,CN,LS,RS,SN,wN,cm,OK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function BS(){var e=0,t=1,r,n,s,a,i=Ho,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:i(s===0?.5:(f=(a(f)-r)*s,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=a(e=+e),n=a(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var g,p;return arguments.length?([g,p]=h,i=f(g,p),u):[i(0),i(1)]}}return u.range=d(O1),u.rangeRound=d(dN),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return a=f,r=f(e),n=f(t),s=r===n?0:1/(n-r),u}}function hh(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function DK(){var e=fh(BS()(Ho));return e.copy=function(){return hh(e,DK())},P0.apply(e,arguments)}function RK(){var e=gN(BS()).domain([1,10]);return e.copy=function(){return hh(e,RK()).base(e.base())},P0.apply(e,arguments)}function IK(){var e=pN(BS());return e.copy=function(){return hh(e,IK()).constant(e.constant())},P0.apply(e,arguments)}function EN(){var e=xN(BS());return e.copy=function(){return hh(e,EN()).exponent(e.exponent())},P0.apply(e,arguments)}function j8e(){return EN.apply(null,arguments).exponent(.5)}function LK(){var e=[],t=Ho;function r(n){if(n!=null&&!isNaN(n=+n))return t((L2(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Uf),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,a)=>g6e(e,a/n))},r.copy=function(){return LK(t).domain(e)},P0.apply(r,arguments)}function $S(){var e=0,t=.5,r=1,n=1,s,a,i,o,c,u=Ho,d,f=!1,h;function g(y){return isNaN(y=+y)?h:(y=.5+((y=+d(y))-a)*(n*y<n*a?o:c),u(f?Math.max(0,Math.min(1,y)):y))}g.domain=function(y){return arguments.length?([e,t,r]=y,s=d(e=+e),a=d(t=+t),i=d(r=+r),o=s===a?0:.5/(a-s),c=a===i?0:.5/(i-a),n=a<s?-1:1,g):[e,t,r]},g.clamp=function(y){return arguments.length?(f=!!y,g):f},g.interpolator=function(y){return arguments.length?(u=y,g):u};function p(y){return function(v){var C,S,w;return arguments.length?([C,S,w]=v,u=z6e(y,[C,S,w]),g):[u(0),u(.5),u(1)]}}return g.range=p(O1),g.rangeRound=p(dN),g.unknown=function(y){return arguments.length?(h=y,g):h},function(y){return d=y,s=y(e),a=y(t),i=y(r),o=s===a?0:.5/(a-s),c=a===i?0:.5/(i-a),n=a<s?-1:1,g}}function BK(){var e=fh($S()(Ho));return e.copy=function(){return hh(e,BK())},P0.apply(e,arguments)}function $K(){var e=gN($S()).domain([.1,1,10]);return e.copy=function(){return hh(e,$K()).base(e.base())},P0.apply(e,arguments)}function UK(){var e=pN($S());return e.copy=function(){return hh(e,UK()).constant(e.constant())},P0.apply(e,arguments)}function NN(){var e=xN($S());return e.copy=function(){return hh(e,NN()).exponent(e.exponent())},P0.apply(e,arguments)}function P8e(){return NN.apply(null,arguments).exponent(.5)}const Hy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:lN,scaleDiverging:BK,scaleDivergingLog:$K,scaleDivergingPow:NN,scaleDivergingSqrt:P8e,scaleDivergingSymlog:UK,scaleIdentity:vK,scaleImplicit:AC,scaleLinear:yK,scaleLog:wK,scaleOrdinal:oN,scalePoint:y6e,scalePow:yN,scaleQuantile:kK,scaleQuantize:CK,scaleRadial:SK,scaleSequential:DK,scaleSequentialLog:RK,scaleSequentialPow:EN,scaleSequentialQuantile:LK,scaleSequentialSqrt:j8e,scaleSequentialSymlog:IK,scaleSqrt:dke,scaleSymlog:_K,scaleThreshold:TK,scaleTime:N8e,scaleUtc:A8e,tickFormat:xK},Symbol.toStringTag,{value:"Module"}));var mh=e=>e.chartData,F8e=It([mh],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),AN=(e,t,r,n)=>n?F8e(e):mh(e);function i1(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(mu(t)&&mu(r))return!0}return!1}function QI(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function M8e(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,a;if(mu(r))s=r;else if(typeof r=="function")return;if(mu(n))a=n;else if(typeof n=="function")return;var i=[s,a];if(i1(i))return i}}function O8e(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(i1(n))return QI(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,a]=e,i,o;if(s==="auto")t!=null&&(i=Math.min(...t));else if(cn(s))i=s;else if(typeof s=="function")try{t!=null&&(i=s(t?.[0]))}catch{}else if(typeof s=="string"&&HR.test(s)){var c=HR.exec(s);if(c==null||t==null)i=void 0;else{var u=+c[1];i=t[0]-u}}else i=t?.[0];if(a==="auto")t!=null&&(o=Math.max(...t));else if(cn(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t?.[1]))}catch{}else if(typeof a=="string"&&GR.test(a)){var d=GR.exec(a);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t?.[1];var h=[i,o];if(i1(h))return t==null?h:QI(h,t,r)}}}var D1=1e9,D8e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},PN,Hs=!0,Pc="[DecimalError] ",Sm=Pc+"Invalid argument: ",jN=Pc+"Exponent out of range: ",R1=Math.floor,em=Math.pow,R8e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Bl,_i=1e7,js=7,zK=9007199254740991,S_=R1(zK/js),Or={};Or.absoluteValue=Or.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Or.comparedTo=Or.cmp=function(e){var t,r,n,s,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===s?0:n>s^a.s<0?1:-1};Or.decimalPlaces=Or.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*js;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Or.dividedBy=Or.div=function(e){return l0(this,new this.constructor(e))};Or.dividedToIntegerBy=Or.idiv=function(e){var t=this,r=t.constructor;return ws(l0(t,new r(e),0,1),r.precision)};Or.equals=Or.eq=function(e){return!this.cmp(e)};Or.exponent=function(){return Va(this)};Or.greaterThan=Or.gt=function(e){return this.cmp(e)>0};Or.greaterThanOrEqualTo=Or.gte=function(e){return this.cmp(e)>=0};Or.isInteger=Or.isint=function(){return this.e>this.d.length-2};Or.isNegative=Or.isneg=function(){return this.s<0};Or.isPositive=Or.ispos=function(){return this.s>0};Or.isZero=function(){return this.s===0};Or.lessThan=Or.lt=function(e){return this.cmp(e)<0};Or.lessThanOrEqualTo=Or.lte=function(e){return this.cmp(e)<1};Or.logarithm=Or.log=function(e){var t,r=this,n=r.constructor,s=n.precision,a=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Bl))throw Error(Pc+"NaN");if(r.s<1)throw Error(Pc+(r.s?"NaN":"-Infinity"));return r.eq(Bl)?new n(0):(Hs=!1,t=l0(t2(r,a),t2(e,a),a),Hs=!0,ws(t,s))};Or.minus=Or.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?GK(t,e):WK(t,(e.s=-e.s,e))};Or.modulo=Or.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Pc+"NaN");return r.s?(Hs=!1,t=l0(r,e,0,1).times(e),Hs=!0,r.minus(t)):ws(new n(r),s)};Or.naturalExponential=Or.exp=function(){return HK(this)};Or.naturalLogarithm=Or.ln=function(){return t2(this)};Or.negated=Or.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Or.plus=Or.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?WK(t,e):GK(t,(e.s=-e.s,e))};Or.precision=Or.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Sm+e);if(t=Va(s)+1,n=s.d.length-1,r=n*js+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Or.squareRoot=Or.sqrt=function(){var e,t,r,n,s,a,i,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Pc+"NaN")}for(e=Va(o),Hs=!1,s=Math.sqrt(+o),s==0||s==1/0?(t=Yu(o.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=R1((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=i=r+3;;)if(a=n,n=a.plus(l0(o,a,i+2)).times(.5),Yu(a.d).slice(0,i)===(t=Yu(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),s==i&&t=="4999"){if(ws(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if(t!="9999")break;i+=4}return Hs=!0,ws(n,r)};Or.times=Or.mul=function(e){var t,r,n,s,a,i,o,c,u,d=this,f=d.constructor,h=d.d,g=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=g.length,c<u&&(a=h,h=g,g=a,i=c,c=u,u=i),a=[],i=c+u,n=i;n--;)a.push(0);for(n=u;--n>=0;){for(t=0,s=c+n;s>n;)o=a[s]+g[n]*h[s-n-1]+t,a[s--]=o%_i|0,t=o/_i|0;a[s]=(a[s]+t)%_i|0}for(;!a[--i];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,Hs?ws(e,f.precision):e};Or.toDecimalPlaces=Or.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(sd(e,0,D1),t===void 0?t=n.rounding:sd(t,0,8),ws(r,e+Va(r)+1,t))};Or.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Vm(n,!0):(sd(e,0,D1),t===void 0?t=s.rounding:sd(t,0,8),n=ws(new s(n),e+1,t),r=Vm(n,!0,e+1)),r};Or.toFixed=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?Vm(s):(sd(e,0,D1),t===void 0?t=a.rounding:sd(t,0,8),n=ws(new a(s),e+Va(s)+1,t),r=Vm(n.abs(),!1,e+Va(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Or.toInteger=Or.toint=function(){var e=this,t=e.constructor;return ws(new t(e),Va(e)+1,t.rounding)};Or.toNumber=function(){return+this};Or.toPower=Or.pow=function(e){var t,r,n,s,a,i,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Bl);if(o=new c(o),!o.s){if(e.s<1)throw Error(Pc+"Infinity");return o}if(o.eq(Bl))return o;if(n=c.precision,e.eq(Bl))return ws(o,n);if(t=e.e,r=e.d.length-1,i=t>=r,a=o.s,i){if((r=d<0?-d:d)<=zK){for(s=new c(Bl),t=Math.ceil(n/js+4),Hs=!1;r%2&&(s=s.times(o),eL(s.d,t)),r=R1(r/2),r!==0;)o=o.times(o),eL(o.d,t);return Hs=!0,e.s<0?new c(Bl).div(s):ws(s,n)}}else if(a<0)throw Error(Pc+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Hs=!1,s=e.times(t2(o,n+u)),Hs=!0,s=HK(s),s.s=a,s};Or.toPrecision=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?(r=Va(s),n=Vm(s,r<=a.toExpNeg||r>=a.toExpPos)):(sd(e,1,D1),t===void 0?t=a.rounding:sd(t,0,8),s=ws(new a(s),e,t),r=Va(s),n=Vm(s,e<=r||r<=a.toExpNeg,e)),n};Or.toSignificantDigits=Or.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(sd(e,1,D1),t===void 0?t=n.rounding:sd(t,0,8)),ws(new n(r),e,t)};Or.toString=Or.valueOf=Or.val=Or.toJSON=Or[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Va(e),r=e.constructor;return Vm(e,t<=r.toExpNeg||t>=r.toExpPos)};function WK(e,t){var r,n,s,a,i,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Hs?ws(t,f):t;if(c=e.d,u=t.d,i=e.e,s=t.e,c=c.slice(),a=i-s,a){for(a<0?(n=c,a=-a,o=u.length):(n=u,s=i,o=c.length),i=Math.ceil(f/js),o=i>o?i+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,n=u,u=c,c=n),r=0;a;)r=(c[--a]=c[a]+u[a]+r)/_i|0,c[a]%=_i;for(r&&(c.unshift(r),++s),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=s,Hs?ws(t,f):t}function sd(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Sm+e)}function Yu(e){var t,r,n,s=e.length-1,a="",i=e[0];if(s>0){for(a+=i,t=1;t<s;t++)n=e[t]+"",r=js-n.length,r&&(a+=Cf(r)),a+=n;i=e[t],n=i+"",r=js-n.length,r&&(a+=Cf(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return a+i}var l0=(function(){function e(n,s){var a,i=0,o=n.length;for(n=n.slice();o--;)a=n[o]*s+i,n[o]=a%_i|0,i=a/_i|0;return i&&n.unshift(i),n}function t(n,s,a,i){var o,c;if(a!=i)c=a>i?1:-1;else for(o=c=0;o<a;o++)if(n[o]!=s[o]){c=n[o]>s[o]?1:-1;break}return c}function r(n,s,a){for(var i=0;a--;)n[a]-=i,i=n[a]<s[a]?1:0,n[a]=i*_i+n[a]-s[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,a,i){var o,c,u,d,f,h,g,p,y,v,C,S,w,T,N,A,P,j,F=n.constructor,R=n.s==s.s?1:-1,L=n.d,V=s.d;if(!n.s)return new F(n);if(!s.s)throw Error(Pc+"Division by zero");for(c=n.e-s.e,P=V.length,N=L.length,g=new F(R),p=g.d=[],u=0;V[u]==(L[u]||0);)++u;if(V[u]>(L[u]||0)&&--c,a==null?S=a=F.precision:i?S=a+(Va(n)-Va(s))+1:S=a,S<0)return new F(0);if(S=S/js+2|0,u=0,P==1)for(d=0,V=V[0],S++;(u<N||d)&&S--;u++)w=d*_i+(L[u]||0),p[u]=w/V|0,d=w%V|0;else{for(d=_i/(V[0]+1)|0,d>1&&(V=e(V,d),L=e(L,d),P=V.length,N=L.length),T=P,y=L.slice(0,P),v=y.length;v<P;)y[v++]=0;j=V.slice(),j.unshift(0),A=V[0],V[1]>=_i/2&&++A;do d=0,o=t(V,y,P,v),o<0?(C=y[0],P!=v&&(C=C*_i+(y[1]||0)),d=C/A|0,d>1?(d>=_i&&(d=_i-1),f=e(V,d),h=f.length,v=y.length,o=t(f,y,h,v),o==1&&(d--,r(f,P<h?j:V,h))):(d==0&&(o=d=1),f=V.slice()),h=f.length,h<v&&f.unshift(0),r(y,f,v),o==-1&&(v=y.length,o=t(V,y,P,v),o<1&&(d++,r(y,P<v?j:V,v))),v=y.length):o===0&&(d++,y=[0]),p[u++]=d,o&&y[0]?y[v++]=L[T]||0:(y=[L[T]],v=1);while((T++<N||y[0]!==void 0)&&S--)}return p[0]||p.shift(),g.e=c,ws(g,i?a+Va(g)+1:a)}})();function HK(e,t){var r,n,s,a,i,o,c=0,u=0,d=e.constructor,f=d.precision;if(Va(e)>16)throw Error(jN+Va(e));if(!e.s)return new d(Bl);for(Hs=!1,o=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(em(2,u))/Math.LN10*2+5|0,o+=n,r=s=a=new d(Bl),d.precision=o;;){if(s=ws(s.times(e),o),r=r.times(++c),i=a.plus(l0(s,r,o)),Yu(i.d).slice(0,o)===Yu(a.d).slice(0,o)){for(;u--;)a=ws(a.times(a),o);return d.precision=f,t==null?(Hs=!0,ws(a,f)):a}a=i}}function Va(e){for(var t=e.e*js,r=e.d[0];r>=10;r/=10)t++;return t}function hk(e,t,r){if(t>e.LN10.sd())throw Hs=!0,r&&(e.precision=r),Error(Pc+"LN10 precision limit exceeded");return ws(new e(e.LN10),t)}function Cf(e){for(var t="";e--;)t+="0";return t}function t2(e,t){var r,n,s,a,i,o,c,u,d,f=1,h=10,g=e,p=g.d,y=g.constructor,v=y.precision;if(g.s<1)throw Error(Pc+(g.s?"NaN":"-Infinity"));if(g.eq(Bl))return new y(0);if(t==null?(Hs=!1,u=v):u=t,g.eq(10))return t==null&&(Hs=!0),hk(y,u);if(u+=h,y.precision=u,r=Yu(p),n=r.charAt(0),a=Va(g),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(e),r=Yu(g.d),n=r.charAt(0),f++;a=Va(g),n>1?(g=new y("0."+r),a++):g=new y(n+"."+r.slice(1))}else return c=hk(y,u+2,v).times(a+""),g=t2(new y(n+"."+r.slice(1)),u-h).plus(c),y.precision=v,t==null?(Hs=!0,ws(g,v)):g;for(o=i=g=l0(g.minus(Bl),g.plus(Bl),u),d=ws(g.times(g),u),s=3;;){if(i=ws(i.times(d),u),c=o.plus(l0(i,new y(s),u)),Yu(c.d).slice(0,u)===Yu(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(hk(y,u+2,v).times(a+""))),o=l0(o,new y(f),u),y.precision=v,t==null?(Hs=!0,ws(o,v)):o;o=c,s+=2}}function ZI(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=R1(r/js),e.d=[],n=(r+1)%js,r<0&&(n+=js),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=js;n<s;)e.d.push(+t.slice(n,n+=js));t=t.slice(n),n=js-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Hs&&(e.e>S_||e.e<-S_))throw Error(jN+r)}else e.s=0,e.e=0,e.d=[0];return e}function ws(e,t,r){var n,s,a,i,o,c,u,d,f=e.d;for(i=1,a=f[0];a>=10;a/=10)i++;if(n=t-i,n<0)n+=js,s=t,u=f[d=0];else{if(d=Math.ceil((n+1)/js),a=f.length,d>=a)return e;for(u=a=f[d],i=1;a>=10;a/=10)i++;n%=js,s=n-js+i}if(r!==void 0&&(a=em(10,i-s-1),o=u/a%10|0,c=t<0||f[d+1]!==void 0||u%a,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?s>0?u/em(10,i-s):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(a=Va(e),f.length=1,t=t-a-1,f[0]=em(10,(js-t%js)%js),e.e=R1(-t/js)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,a=1,d--):(f.length=d+1,a=em(10,js-n),f[d]=s>0?(u/em(10,i-s)%em(10,s)|0)*a:0),c)for(;;)if(d==0){(f[0]+=a)==_i&&(f[0]=1,++e.e);break}else{if(f[d]+=a,f[d]!=_i)break;f[d--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(Hs&&(e.e>S_||e.e<-S_))throw Error(jN+Va(e));return e}function GK(e,t){var r,n,s,a,i,o,c,u,d,f,h=e.constructor,g=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Hs?ws(t,g):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),i=u-n,i){for(d=i<0,d?(r=c,i=-i,o=f.length):(r=f,n=u,o=c.length),s=Math.max(Math.ceil(g/js),o)+2,i>s&&(i=s,r.length=1),r.reverse(),s=i;s--;)r.push(0);r.reverse()}else{for(s=c.length,o=f.length,d=s<o,d&&(o=s),s=0;s<o;s++)if(c[s]!=f[s]){d=c[s]<f[s];break}i=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,s=f.length-o;s>0;--s)c[o++]=0;for(s=f.length;s>i;){if(c[--s]<f[s]){for(a=s;a&&c[--a]===0;)c[a]=_i-1;--c[a],c[s]+=_i}c[s]-=f[s]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Hs?ws(t,g):t):new h(0)}function Vm(e,t,r){var n,s=Va(e),a=Yu(e.d),i=a.length;return t?(r&&(n=r-i)>0?a=a.charAt(0)+"."+a.slice(1)+Cf(n):i>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+Cf(-s-1)+a,r&&(n=r-i)>0&&(a+=Cf(n))):s>=i?(a+=Cf(s+1-i),r&&(n=r-s-1)>0&&(a=a+"."+Cf(n))):((n=s+1)<i&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-i)>0&&(s+1===i&&(a+="."),a+=Cf(n))),e.s<0?"-"+a:a}function eL(e,t){if(e.length>t)return e.length=t,!0}function VK(e){var t,r,n;function s(a){var i=this;if(!(i instanceof s))return new s(a);if(i.constructor=s,a instanceof s){i.s=a.s,i.e=a.e,i.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Sm+a);if(a>0)i.s=1;else if(a<0)a=-a,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(a===~~a&&a<1e7){i.e=0,i.d=[a];return}return ZI(i,a.toString())}else if(typeof a!="string")throw Error(Sm+a);if(a.charCodeAt(0)===45?(a=a.slice(1),i.s=-1):i.s=1,R8e.test(a))ZI(i,a);else throw Error(Sm+a)}if(s.prototype=Or,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=VK,s.config=s.set=I8e,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function I8e(e){if(!e||typeof e!="object")throw Error(Pc+"Object expected");var t,r,n,s=["precision",1,D1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(R1(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Sm+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Sm+r+": "+n);return this}var PN=VK(D8e);Bl=new PN(1);const os=PN;var L8e=e=>e,qK={},KK=e=>e===qK,tL=e=>function t(){return arguments.length===0||arguments.length===1&&KK(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},YK=(e,t)=>e===1?t:tL(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var a=n.filter(i=>i!==qK).length;return a>=e?t(...n):YK(e-a,tL(function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var u=n.map(d=>KK(d)?o.shift():d);return t(...u,...o)}))}),US=e=>YK(e.length,e),MC=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},B8e=US((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),$8e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return L8e;var s=r.reverse(),a=s[0],i=s.slice(1);return function(){return i.reduce((o,c)=>c(o),a(...arguments))}},OC=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),XK=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t&&s.every((i,o)=>{var c;return i===((c=t)===null||c===void 0?void 0:c[o])})||(t=s,r=e(...s)),r}};function JK(e){var t;return e===0?t=1:t=Math.floor(new os(e).abs().log(10).toNumber())+1,t}function QK(e,t,r){for(var n=new os(e),s=0,a=[];n.lt(t)&&s<1e5;)a.push(n.toNumber()),n=n.add(r),s++;return a}US((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});US((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});US((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var ZK=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},eY=(e,t,r)=>{if(e.lte(0))return new os(0);var n=JK(e.toNumber()),s=new os(10).pow(n),a=e.div(s),i=n!==1?.05:.1,o=new os(Math.ceil(a.div(i).toNumber())).add(r).mul(i),c=o.mul(s);return t?new os(c.toNumber()):new os(Math.ceil(c.toNumber()))},U8e=(e,t,r)=>{var n=new os(1),s=new os(e);if(!s.isint()&&r){var a=Math.abs(e);a<1?(n=new os(10).pow(JK(e)-1),s=new os(Math.floor(s.div(n).toNumber())).mul(n)):a>1&&(s=new os(Math.floor(e)))}else e===0?s=new os(Math.floor((t-1)/2)):r||(s=new os(Math.floor(e)));var i=Math.floor((t-1)/2),o=$8e(B8e(c=>s.add(new os(c-i).mul(n)).toNumber()),MC);return o(0,t)},tY=function(t,r,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new os(0),tickMin:new os(0),tickMax:new os(0)};var i=eY(new os(r).sub(t).div(n-1),s,a),o;t<=0&&r>=0?o=new os(0):(o=new os(t).add(r).div(2),o=o.sub(new os(o).mod(i)));var c=Math.ceil(o.sub(t).div(i).toNumber()),u=Math.ceil(new os(r).sub(o).div(i).toNumber()),d=c+u+1;return d>n?tY(t,r,n,s,a+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:i,tickMin:o.sub(new os(c).mul(i)),tickMax:o.add(new os(u).mul(i))})};function z8e(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[i,o]=ZK([t,r]);if(i===-1/0||o===1/0){var c=o===1/0?[i,...MC(0,n-1).map(()=>1/0)]:[...MC(0,n-1).map(()=>-1/0),o];return t>r?OC(c):c}if(i===o)return U8e(i,n,s);var{step:u,tickMin:d,tickMax:f}=tY(i,o,a,s,0),h=QK(d,f.add(new os(.1).mul(u)),u);return t>r?OC(h):h}function W8e(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,i]=ZK([r,n]);if(a===-1/0||i===1/0)return[r,n];if(a===i)return[a];var o=Math.max(t,2),c=eY(new os(i).sub(a).div(o-1),s,0),u=[...QK(new os(a),new os(i),c),i];return s===!1&&(u=u.map(d=>Math.round(d))),r>n?OC(u):u}var H8e=XK(z8e),G8e=XK(W8e),V8e=e=>e.rootProps.barCategoryGap,zS=e=>e.rootProps.stackOffset,FN=e=>e.options.chartName,MN=e=>e.rootProps.syncId,rY=e=>e.rootProps.syncMethod,ON=e=>e.options.eventEmitter,Yd={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},jl={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},WS=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},q8e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Yd.angleAxisId,includeHidden:!1,name:void 0,reversed:Yd.reversed,scale:Yd.scale,tick:Yd.tick,tickCount:void 0,ticks:void 0,type:Yd.type,unit:void 0},K8e={allowDataOverflow:jl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:jl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:jl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:jl.scale,tick:jl.tick,tickCount:jl.tickCount,ticks:void 0,type:jl.type,unit:void 0},Y8e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Yd.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Yd.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Yd.scale,tick:Yd.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},X8e={allowDataOverflow:jl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:jl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:jl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:jl.scale,tick:jl.tick,tickCount:jl.tickCount,ticks:void 0,type:"category",unit:void 0},DN=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Y8e:q8e,RN=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?X8e:K8e,HS=e=>e.polarOptions,IN=It([A0,j0,ro],n3e),nY=It([HS,IN],(e,t)=>{if(e!=null)return Zf(e.innerRadius,t,0)}),sY=It([HS,IN],(e,t)=>{if(e!=null)return Zf(e.outerRadius,t,t*.8)}),J8e=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},aY=It([HS],J8e);It([DN,aY],WS);var iY=It([IN,nY,sY],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});It([RN,iY],WS);var oY=It([Ls,HS,nY,sY,A0,j0],(e,t,r,n,s,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:i,cy:o,startAngle:c,endAngle:u}=t;return{cx:Zf(i,s,s/2),cy:Zf(o,a,a/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Ka=(e,t)=>t,GS=(e,t,r)=>r;function lY(e){return e?.id}var di=e=>{var t=Ls(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},I1=e=>e.tooltip.settings.axisId,Pi=e=>{var t=di(e),r=I1(e);return z2(e,t,r)},cY=It([Pi],e=>e?.dataKey);function uY(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:a}=r,i=new Map;return e.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=lY(o);u.forEach((f,h)=>{var g=a==null||s?h:String(qo(f,a,null)),p=qo(f,o.dataKey,0),y;i.has(g)?y=i.get(g):y={},Object.assign(y,{[d]:p}),i.set(g,y)})}}),Array.from(i.values())}function LN(e){return e.stackId!=null&&e.dataKey!=null}function rL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function k_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rL(Object(r),!0).forEach(function(n){Q8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Q8e(e,t,r){return(t=Z8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z8e(e){var t=eCe(e,"string");return typeof t=="symbol"?t:t+""}function eCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DC=[0,"auto"],Nl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},dY=(e,t)=>e.cartesianAxis.xAxis[t],F0=(e,t)=>{var r=dY(e,t);return r??Nl},Al={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:DC,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:I2},fY=(e,t)=>e.cartesianAxis.yAxis[t],M0=(e,t)=>{var r=fY(e,t);return r??Al},tCe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},BN=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??tCe},yl=(e,t,r)=>{switch(t){case"xAxis":return F0(e,r);case"yAxis":return M0(e,r);case"zAxis":return BN(e,r);case"angleAxis":return DN(e,r);case"radiusAxis":return RN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},rCe=(e,t,r)=>{switch(t){case"xAxis":return F0(e,r);case"yAxis":return M0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},z2=(e,t,r)=>{switch(t){case"xAxis":return F0(e,r);case"yAxis":return M0(e,r);case"angleAxis":return DN(e,r);case"radiusAxis":return RN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},hY=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function mY(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var gY=e=>e.graphicalItems.cartesianItems,nCe=It([Ka,GS],mY),pY=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),W2=It([gY,yl,nCe],pY),xY=It([W2],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(LN)),yY=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),vY=It([W2],yY),bY=e=>e.map(t=>t.data).filter(Boolean).flat(1),sCe=It([W2],bY),wY=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},$N=It([sCe,AN],wY),_Y=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:qo(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:qo(s,n)}))):e.map(n=>({value:n})),VS=It([$N,yl,W2],_Y);function SY(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function ug(e){return e.filter(t=>nd(t)||t instanceof Date).map(Number).filter(t=>Ac(t)===!1)}function aCe(e,t,r){return!r||typeof t!="number"||Ac(t)?[]:r.length?ug(r.flatMap(n=>{var s=qo(e,n.dataKey),a,i;if(Array.isArray(s)?[a,i]=s:a=i=s,!(!mu(a)||!mu(i)))return[t-a,t+i]})):[]}var iCe=It([xY,AN,Pi],uY),kY=(e,t,r)=>{var n={},s=t.reduce((a,i)=>(i.stackId==null||(a[i.stackId]==null&&(a[i.stackId]=[]),a[i.stackId].push(i)),a),n);return Object.fromEntries(Object.entries(s).map(a=>{var[i,o]=a,c=o.map(lY);return[i,{stackedData:y3e(e,c,r),graphicalItems:o}]}))},oCe=It([iCe,xY,zS],kY),CY=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(r!=="zAxis"){var a=w3e(e,n,s);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},lCe=It([oCe,mh,Ka],CY),TY=(e,t,r,n,s)=>r.length>0?e.flatMap(a=>r.flatMap(i=>{var o,c,u=(o=n[i.id])===null||o===void 0?void 0:o.filter(f=>SY(s,f)),d=qo(a,(c=t.dataKey)!==null&&c!==void 0?c:i.dataKey);return{value:d,errorDomain:aCe(a,d,u)}})).filter(Boolean):t?.dataKey!=null?e.map(a=>({value:qo(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})),qS=e=>e.errorBars,EY=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>SY(r,n));It([vY,qS,Ka],EY);var cCe=It([$N,yl,vY,qS,Ka],TY);function uCe(e){var{value:t}=e;if(nd(t)||t instanceof Date)return t}var nL=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=ug(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},dCe=(e,t,r)=>{var n=e.map(uCe).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&UV(n))?oK(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},UN=e=>{var t;if(e==null||!("domain"in e))return DC;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=ug(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:DC},C_=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var a=s.flat(),i=Math.min(...a),o=Math.max(...a);return[i,o]}},NY=e=>e.referenceElements.dots,L1=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),fCe=It([NY,Ka,GS],L1),AY=e=>e.referenceElements.areas,hCe=It([AY,Ka,GS],L1),jY=e=>e.referenceElements.lines,mCe=It([jY,Ka,GS],L1),PY=(e,t)=>{var r=ug(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},gCe=It(fCe,Ka,PY),FY=(e,t)=>{var r=ug(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},pCe=It([hCe,Ka],FY),MY=(e,t)=>{var r=ug(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},xCe=It(mCe,Ka,MY),yCe=It(gCe,xCe,pCe,(e,t,r)=>C_(e,r,t)),vCe=It([yl],UN),OY=(e,t,r,n,s,a,i)=>{var o=M8e(t,e.allowDataOverflow);if(o!=null)return o;var c=a==="vertical"&&i==="xAxis"||a==="horizontal"&&i==="yAxis",u=c?C_(r,s,nL(n)):C_(s,nL(n));return O8e(t,u,e.allowDataOverflow)},bCe=It([yl,vCe,lCe,cCe,yCe,Ls,Ka],OY),wCe=[0,1],DY=(e,t,r,n,s,a,i)=>{if(!((e==null||r==null||r.length===0)&&i===void 0)){var{dataKey:o,type:c}=e,u=dh(t,a);return u&&o==null?oK(0,r.length):c==="category"?dCe(n,e,u):s==="expand"?wCe:i}},zN=It([yl,Ls,$N,VS,zS,Ka,bCe],DY),RY=(e,t,r,n,s)=>{if(e!=null){var{scale:a,type:i}=e;if(a==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(VE(a));return o in Hy?o:"point"}}},H2=It([yl,Ls,hY,FN,Ka],RY);function _Ce(e){if(e!=null){if(e in Hy)return Hy[e]();var t="scale".concat(VE(e));if(t in Hy)return Hy[t]()}}function WN(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=_Ce(t);if(s!=null){var a=s.domain(r).range(n);return m3e(a),a}}}var IY=(e,t,r)=>{var n=UN(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&i1(e))return H8e(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&i1(e))return G8e(e,t.tickCount,t.allowDecimals)}},HN=It([zN,z2,H2],IY),LY=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&i1(t)&&Array.isArray(r)&&r.length>0){var s=t[0],a=r[0],i=t[1],o=r[r.length-1];return[Math.min(s,a),Math.max(i,o)]}return t},SCe=It([yl,zN,HN,Ka],LY),kCe=It(VS,yl,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(ug(e.map(o=>o.value))).sort((o,c)=>o-c);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var a=0;a<n.length-1;a++){var i=n[a+1]-n[a];r=Math.min(r,i)}return r/s}}),BY=It(kCe,Ls,V8e,ro,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!mu(e))return 0;var a=t==="vertical"?n.height:n.width;if(s==="gap")return e*a/2;if(s==="no-gap"){var i=Zf(r,e*a),o=e*a/2;return o-i-(o-i)/a*i}return 0}),CCe=(e,t)=>{var r=F0(e,t);return r==null||typeof r.padding!="string"?0:BY(e,"xAxis",t,r.padding)},TCe=(e,t)=>{var r=M0(e,t);return r==null||typeof r.padding!="string"?0:BY(e,"yAxis",t,r.padding)},ECe=It(F0,CCe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),NCe=It(M0,TCe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),ACe=It([ro,ECe,OS,MS,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:a}=n;return s?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),jCe=It([ro,Ls,NCe,OS,MS,(e,t,r)=>r],(e,t,r,n,s,a)=>{var{padding:i}=s;return a?[n.height-i.bottom,i.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),G2=(e,t,r,n)=>{var s;switch(t){case"xAxis":return ACe(e,r,n);case"yAxis":return jCe(e,r,n);case"zAxis":return(s=BN(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return aY(e);case"radiusAxis":return iY(e,r);default:return}},$Y=It([yl,G2],WS),B1=It([yl,H2,SCe,$Y],WN);It([W2,qS,Ka],EY);function UY(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var KS=(e,t)=>t,YS=(e,t,r)=>r,PCe=It(PS,KS,YS,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(UY)),FCe=It(FS,KS,YS,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(UY)),zY=(e,t)=>({width:e.width,height:t.height}),MCe=(e,t)=>{var r=typeof t.width=="number"?t.width:I2;return{width:r,height:e.height}},OCe=It(ro,F0,zY),DCe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},RCe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},ICe=It(j0,ro,PCe,KS,YS,(e,t,r,n,s)=>{var a={},i;return r.forEach(o=>{var c=zY(t,o);i==null&&(i=DCe(t,n,e));var u=n==="top"&&!s||n==="bottom"&&s;a[o.id]=i-Number(u)*c.height,i+=(u?-1:1)*c.height}),a}),LCe=It(A0,ro,FCe,KS,YS,(e,t,r,n,s)=>{var a={},i;return r.forEach(o=>{var c=MCe(t,o);i==null&&(i=RCe(t,n,e));var u=n==="left"&&!s||n==="right"&&s;a[o.id]=i-Number(u)*c.width,i+=(u?-1:1)*c.width}),a}),BCe=(e,t)=>{var r=F0(e,t);if(r!=null)return ICe(e,r.orientation,r.mirror)},$Ce=It([ro,F0,BCe,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r?.[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),UCe=(e,t)=>{var r=M0(e,t);if(r!=null)return LCe(e,r.orientation,r.mirror)},zCe=It([ro,M0,UCe,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r?.[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),WCe=It(ro,M0,(e,t)=>{var r=typeof t.width=="number"?t.width:I2;return{width:r,height:e.height}}),WY=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:a,dataKey:i}=r,o=dh(e,n),c=t.map(u=>u.value);if(i&&o&&a==="category"&&s&&UV(c))return c}},GN=It([Ls,VS,yl,Ka],WY),HY=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:a}=r,i=dh(e,n);if(i&&(s==="number"||a!=="auto"))return t.map(o=>o.value)}},VN=It([Ls,VS,z2,Ka],HY),sL=It([Ls,rCe,H2,B1,GN,VN,G2,HN,Ka],(e,t,r,n,s,a,i,o,c)=>{if(t==null)return null;var u=dh(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:a,duplicateDomain:s,isCategorical:u,niceTicks:o,range:i,realScaleType:r,scale:n}}),HCe=(e,t,r,n,s,a,i,o,c)=>{if(!(t==null||n==null)){var u=dh(e,c),{type:d,ticks:f,tickCount:h}=t,g=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/g:0;p=c==="angleAxis"&&a!=null&&a.length>=2?bc(a[0]-a[1])*2*p:p;var y=f||s;if(y){var v=y.map((C,S)=>{var w=i?i.indexOf(C):C;return{index:S,coordinate:n(w)+p,value:C,offset:p}});return v.filter(C=>!Ac(C.coordinate))}return u&&o?o.map((C,S)=>({coordinate:n(C)+p,value:C,index:S,offset:p})):n.ticks?n.ticks(h).map(C=>({coordinate:n(C)+p,value:C,offset:p})):n.domain().map((C,S)=>({coordinate:n(C)+p,value:i?i[C]:C,index:S,offset:p}))}},GY=It([Ls,z2,H2,B1,HN,G2,GN,VN,Ka],HCe),GCe=(e,t,r,n,s,a,i)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=dh(e,i),{tickCount:c}=t,u=0;return u=i==="angleAxis"&&n?.length>=2?bc(n[0]-n[1])*2*u:u,o&&a?a.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:s?s[d]:d,index:f,offset:u}))}},VY=It([Ls,z2,B1,G2,GN,VN,Ka],GCe),qY=It(yl,B1,(e,t)=>{if(!(e==null||t==null))return k_(k_({},e),{},{scale:t})}),VCe=It([yl,H2,zN,$Y],WN);It((e,t,r)=>BN(e,r),VCe,(e,t)=>{if(!(e==null||t==null))return k_(k_({},e),{},{scale:t})});var qCe=It([Ls,PS,FS],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),KY=e=>e.options.defaultTooltipEventType,YY=e=>e.options.validateTooltipEventTypes;function XY(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function qN(e,t){var r=KY(e),n=YY(e);return XY(t,r,n)}function KCe(e){return Jr(t=>qN(t,e))}var JY=(e,t)=>{var r,n=Number(t);if(!(Ac(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},YCe=e=>e.tooltip.settings,Ef={active:!1,index:null,dataKey:void 0,coordinate:void 0},XCe={itemInteraction:{click:Ef,hover:Ef},axisInteraction:{click:Ef,hover:Ef},keyboardInteraction:Ef,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},QY=ql({name:"tooltip",initialState:XCe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=o0(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:JCe,removeTooltipEntrySettings:QCe,setTooltipSettingsState:ZCe,setActiveMouseOverItemIndex:eTe,mouseLeaveItem:qje,mouseLeaveChart:ZY,setActiveClickItemIndex:Kje,setMouseOverAxisIndex:eX,setMouseClickAxisIndex:tTe,setSyncInteraction:RC,setKeyboardInteraction:IC}=QY.actions,rTe=QY.reducer;function aL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Uw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aL(Object(r),!0).forEach(function(n){nTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nTe(e,t,r){return(t=sTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sTe(e){var t=aTe(e,"string");return typeof t=="symbol"?t:t+""}function aTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iTe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function oTe(e){return e.index!=null}var tX=(e,t,r,n)=>{if(t==null)return Ef;var s=iTe(e,t,r);if(s==null)return Ef;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(oTe(s)){if(a)return Uw(Uw({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Uw(Uw({},Ef),{},{coordinate:s.coordinate})},KN=(e,t)=>{var r=e?.index;if(r==null)return null;var n=Number(r);if(!mu(n))return r;var s=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(s,Math.min(n,a)))},rX=(e,t,r,n,s,a,i,o)=>{if(!(a==null||o==null)){var c=i[0],u=c==null?void 0:o(c.positions,a);if(u!=null)return u;var d=s?.[Number(a)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},nX=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var i;return((i=a.settings)===null||i===void 0?void 0:i.dataKey)===s})},V2=e=>e.options.tooltipPayloadSearcher,$1=e=>e.tooltip;function iL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iL(Object(r),!0).forEach(function(n){lTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lTe(e,t,r){return(t=cTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cTe(e){var t=uTe(e,"string");return typeof t=="symbol"?t:t+""}function uTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dTe(e,t){return e??t}var sX=(e,t,r,n,s,a,i)=>{if(!(t==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,g)=>{var p,{dataDefinedOnItem:y,settings:v}=g,C=dTe(y,o),S=Array.isArray(C)?zq(C,u,d):C,w=(p=v?.dataKey)!==null&&p!==void 0?p:n,T=v?.nameKey,N;if(n&&Array.isArray(S)&&!Array.isArray(S[0])&&i==="axis"?N=zV(S,n,s):N=a(S,t,c,T),Array.isArray(N))N.forEach(P=>{var j=oL(oL({},v),{},{name:P.name,unit:P.unit,color:void 0,fill:void 0});h.push(VR({tooltipEntrySettings:j,dataKey:P.dataKey,payload:P.payload,value:qo(P.payload,P.dataKey),name:P.name}))});else{var A;h.push(VR({tooltipEntrySettings:v,dataKey:w,payload:N,value:qo(N,w),name:(A=qo(N,T))!==null&&A!==void 0?A:v?.name}))}return h},f)}},YN=It([Pi,Ls,hY,FN,di],RY),fTe=It([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),hTe=It([di,I1],mY),q2=It([fTe,Pi,hTe],pY),mTe=It([q2],e=>e.filter(LN)),gTe=It([q2],bY),U1=It([gTe,mh],wY),pTe=It([mTe,mh,Pi],uY),XN=It([U1,Pi,q2],_Y),xTe=It([Pi],UN),yTe=It([q2],e=>e.filter(LN)),vTe=It([pTe,yTe,zS],kY),bTe=It([vTe,mh,di],CY),wTe=It([q2],yY),_Te=It([U1,Pi,wTe,qS,di],TY),STe=It([NY,di,I1],L1),kTe=It([STe,di],PY),CTe=It([AY,di,I1],L1),TTe=It([CTe,di],FY),ETe=It([jY,di,I1],L1),NTe=It([ETe,di],MY),ATe=It([kTe,NTe,TTe],C_),jTe=It([Pi,xTe,bTe,_Te,ATe,Ls,di],OY),aX=It([Pi,Ls,U1,XN,zS,di,jTe],DY),PTe=It([aX,Pi,YN],IY),FTe=It([Pi,aX,PTe,di],LY),iX=e=>{var t=di(e),r=I1(e),n=!1;return G2(e,t,r,n)},oX=It([Pi,iX],WS),lX=It([Pi,YN,FTe,oX],WN),MTe=It([Ls,XN,Pi,di],WY),OTe=It([Ls,XN,Pi,di],HY),DTe=(e,t,r,n,s,a,i,o)=>{if(t){var{type:c}=t,u=dh(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&s!=null&&s?.length>=2?bc(s[0]-s[1])*2*f:f,u&&i?i.map((h,g)=>({coordinate:n(h)+f,value:h,index:g,offset:f})):n.domain().map((h,g)=>({coordinate:n(h)+f,value:a?a[h]:h,index:g,offset:f}))}}},O0=It([Ls,Pi,YN,lX,iX,MTe,OTe,di],DTe),JN=It([KY,YY,YCe],(e,t,r)=>XY(r.shared,e,t)),cX=e=>e.tooltip.settings.trigger,QN=e=>e.tooltip.settings.defaultIndex,XS=It([$1,JN,cX,QN],tX),r2=It([XS,U1],KN),uX=It([O0,r2],JY),RTe=It([XS],e=>{if(e)return e.dataKey}),dX=It([$1,JN,cX,QN],nX),ITe=It([A0,j0,Ls,ro,O0,QN,dX,V2],rX),LTe=It([XS,ITe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),BTe=It([XS],e=>e.active),$Te=It([dX,r2,mh,cY,uX,V2,JN],sX),UTe=It([$Te],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function lL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function cL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lL(Object(r),!0).forEach(function(n){zTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zTe(e,t,r){return(t=WTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WTe(e){var t=HTe(e,"string");return typeof t=="symbol"?t:t+""}function HTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GTe=()=>Jr(Pi),VTe=()=>{var e=GTe(),t=Jr(O0),r=Jr(lX);return vC(cL(cL({},e),{},{scale:r}),t)},qTe=()=>Jr(FN),ZN=(e,t)=>t,fX=(e,t,r)=>r,e9=(e,t,r,n)=>n,KTe=It(O0,e=>CS(e,t=>t.coordinate)),t9=It([$1,ZN,fX,e9],tX),hX=It([t9,U1],KN),YTe=(e,t,r)=>{if(t!=null){var n=$1(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},mX=It([$1,ZN,fX,e9],nX),T_=It([A0,j0,Ls,ro,O0,e9,mX,V2],rX),XTe=It([t9,T_],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),gX=It(O0,hX,JY),JTe=It([mX,hX,mh,cY,gX,V2,ZN],sX),QTe=It([t9],e=>({isActive:e.active,activeIndex:e.index})),ZTe=(e,t,r,n,s,a,i,o)=>{if(!(!e||!t||!n||!s||!a)){var c=_3e(e.chartX,e.chartY,t,r,o);if(c){var u=k3e(c,t),d=f3e(u,i,a,n,s),f=S3e(t,a,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function LC(){return LC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LC.apply(null,arguments)}function uL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uL(Object(r),!0).forEach(function(n){e7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function e7e(e,t,r){return(t=t7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t7e(e){var t=r7e(e,"string");return typeof t=="symbol"?t:t+""}function r7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n7e(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:a,layout:i,cursor:o,tooltipEventType:c,chartName:u}=e,d=t,f=r,h=n;if(!o||!d||u!=="ScatterChart"&&c!=="axis")return null;var g,p;if(u==="ScatterChart")g=d,p=g5e;else if(u==="BarChart")g=p5e(i,d,s,a),p=q5e;else if(i==="radial"){var{cx:y,cy:v,radius:C,startAngle:S,endAngle:w}=aK(d);g={cx:y,cy:v,startAngle:S,endAngle:w,innerRadius:C,outerRadius:C},p=J5e}else g={points:Q5e(i,d,s)},p=Zq;var T=typeof o=="object"&&"className"in o?o.className:void 0,N=zw(zw(zw(zw({stroke:"#ccc",pointerEvents:"none"},s),g),to(o,!1)),{},{payload:f,payloadIndex:h,className:Rs("recharts-tooltip-cursor",T)});return _.isValidElement(o)?_.cloneElement(o,N):_.createElement(p,N)}function s7e(e){var t=VTe(),r=Kq(),n=aN(),s=qTe();return _.createElement(n7e,LC({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var pX=_.createContext(null),a7e=()=>_.useContext(pX),mk={exports:{}},dL;function i7e(){return dL||(dL=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new s(d,f||c,h),p=r?r+u:u;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],g]:c._events[p].push(g):(c._events[p]=g,c._eventsCount++),c}function i(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,g=f.length,p=new Array(g);h<g;h++)p[h]=f[h].fn;return p},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,g,p){var y=r?r+u:u;if(!this._events[y])return!1;var v=this._events[y],C=arguments.length,S,w;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),C){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,g),!0;case 6:return v.fn.call(v.context,d,f,h,g,p),!0}for(w=1,S=new Array(C-1);w<C;w++)S[w-1]=arguments[w];v.fn.apply(v.context,S)}else{var T=v.length,N;for(w=0;w<T;w++)switch(v[w].once&&this.removeListener(u,v[w].fn,void 0,!0),C){case 1:v[w].fn.call(v[w].context);break;case 2:v[w].fn.call(v[w].context,d);break;case 3:v[w].fn.call(v[w].context,d,f);break;case 4:v[w].fn.call(v[w].context,d,f,h);break;default:if(!S)for(N=1,S=new Array(C-1);N<C;N++)S[N-1]=arguments[N];v[w].fn.apply(v[w].context,S)}}return!0},o.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var g=r?r+u:u;if(!this._events[g])return this;if(!d)return i(this,g),this;var p=this._events[g];if(p.fn)p.fn===d&&(!h||p.once)&&(!f||p.context===f)&&i(this,g);else{for(var y=0,v=[],C=p.length;y<C;y++)(p[y].fn!==d||h&&!p[y].once||f&&p[y].context!==f)&&v.push(p[y]);v.length?this._events[g]=v.length===1?v[0]:v:i(this,g)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(mk)),mk.exports}var o7e=i7e();const l7e=Fc(o7e);var n2=new l7e,BC="recharts.syncEvent.tooltip",fL="recharts.syncEvent.brush";function c7e(e,t){if(t){var r=Number.parseInt(t,10);if(!Ac(r))return e?.[r]}}var u7e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},xX=ql({name:"options",initialState:u7e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),d7e=xX.reducer,{createEventEmitter:f7e}=xX.actions;function h7e(e){return e.tooltip.syncInteraction}var m7e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},yX=ql({name:"chartData",initialState:m7e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:hL,setDataStartEndIndexes:g7e,setComputedData:Yje}=yX.actions,p7e=yX.reducer,x7e=["x","y"];function mL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mL(Object(r),!0).forEach(function(n){y7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y7e(e,t,r){return(t=v7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v7e(e){var t=b7e(e,"string");return typeof t=="symbol"?t:t+""}function b7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w7e(e,t){if(e==null)return{};var r,n,s=_7e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _7e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var vX=()=>{};function S7e(){var e=Jr(MN),t=Jr(ON),r=Jo(),n=Jr(rY),s=Jr(O0),a=aN(),i=sN(),o=Jr(c=>c.rootProps.className);_.useEffect(()=>{if(e==null)return vX;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){var h;if(i&&d!==null&&d!==void 0&&(h=d.payload)!==null&&h!==void 0&&h.coordinate){var g=d.payload.coordinate,{x:p,y}=g,v=w7e(g,x7e),C=Xh(Xh(Xh({},v),typeof p=="number"&&{x:Math.max(i.x,Math.min(p,i.x+i.width))}),typeof y=="number"&&{y:Math.max(i.y,Math.min(y,i.y+i.height))}),S=Xh(Xh({},d),{},{payload:Xh(Xh({},d.payload),{},{coordinate:C})});r(S)}else r(d);return}if(s!=null){var w;if(typeof n=="function"){var T={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},N=n(s,T);w=s[N]}else n==="value"&&(w=s.find(Z=>String(Z.value)===d.payload.label));var{coordinate:A}=d.payload;if(w==null||d.payload.active===!1||A==null||i==null){r(RC({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:P,y:j}=A,F=Math.min(P,i.x+i.width),R=Math.min(j,i.y+i.height),L={x:a==="horizontal"?w.coordinate:F,y:a==="horizontal"?R:w.coordinate},V=RC({active:d.payload.active,coordinate:L,dataKey:d.payload.dataKey,index:String(w.index),label:d.payload.label});r(V)}}};return n2.on(BC,c),()=>{n2.off(BC,c)}},[o,r,t,e,n,s,a,i])}function k7e(){var e=Jr(MN),t=Jr(ON),r=Jo();_.useEffect(()=>{if(e==null)return vX;var n=(s,a,i)=>{t!==i&&e===s&&r(g7e(a))};return n2.on(fL,n),()=>{n2.off(fL,n)}},[r,t,e])}function C7e(){var e=Jo();_.useEffect(()=>{e(f7e())},[e]),S7e(),k7e()}function T7e(e,t,r,n,s,a){var i=Jr(h=>YTe(h,e,t)),o=Jr(ON),c=Jr(MN),u=Jr(rY),d=Jr(h7e),f=d?.active;_.useEffect(()=>{if(!f&&c!=null&&o!=null){var h=RC({active:a,coordinate:r,dataKey:i,index:s,label:typeof n=="number"?String(n):n});n2.emit(BC,c,h,o)}},[f,r,i,s,n,o,c,u,a])}function gL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gL(Object(r),!0).forEach(function(n){E7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function E7e(e,t,r){return(t=N7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N7e(e){var t=A7e(e,"string");return typeof t=="symbol"?t:t+""}function A7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j7e(e){return e.dataKey}function P7e(e,t){return _.isValidElement(e)?_.cloneElement(e,t):typeof e=="function"?_.createElement(e,t):_.createElement(q3e,t)}var xL=[],F7e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!M1.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function M7e(e){var t=Dc(e,F7e),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:a,content:i,filterNull:o,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:g,wrapperStyle:p,cursor:y,shared:v,trigger:C,defaultIndex:S,portal:w,axisId:T}=t,N=Jo(),A=typeof S=="number"?String(S):S;_.useEffect(()=>{N(ZCe({shared:v,trigger:C,axisId:T,active:r,defaultIndex:A}))},[N,v,C,T,r,A]);var P=sN(),j=Qq(),F=KCe(v),{activeIndex:R,isActive:L}=Jr(H=>QTe(H,F,C,A)),V=Jr(H=>JTe(H,F,C,A)),Z=Jr(H=>gX(H,F,C,A)),Y=Jr(H=>XTe(H,F,C,A)),re=V,ue=a7e(),z=r??L,[X,I]=tSe([re,z]),B=F==="axis"?Z:void 0;T7e(F,C,Y,B,R,z);var W=w??ue;if(W==null)return null;var D=re??xL;z||(D=xL),o&&D.length&&(D=E_e(re.filter(H=>H.value!=null&&(H.hide!==!0||t.includeHidden)),d,j7e));var U=D.length>0,q=_.createElement(e5e,{allowEscapeViewBox:n,animationDuration:s,animationEasing:a,isAnimationActive:c,active:z,coordinate:Y,hasPayload:U,offset:u,position:f,reverseDirection:h,useTranslate3d:g,viewBox:P,wrapperStyle:p,lastBoundingBox:X,innerRef:I,hasPortalFromProps:!!w},P7e(i,pL(pL({},t),{},{payload:D,label:B,active:z,coordinate:Y,accessibilityLayer:j})));return _.createElement(_.Fragment,null,Ak.createPortal(q,W),z&&_.createElement(s7e,{cursor:y,tooltipEventType:F,coordinate:Y,payload:re,index:R}))}var gk={},pk={},xk={},yL;function O7e(){return yL||(yL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:a}={}){let i,o=null;const c=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),d=()=>{o!==null&&(r.apply(i,o),i=void 0,o=null)},f=()=>{u&&d(),y()};let h=null;const g=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},p=()=>{h!==null&&(clearTimeout(h),h=null)},y=()=>{p(),i=void 0,o=null},v=()=>{d()},C=function(...S){if(s?.aborted)return;i=this,o=S;const w=h==null;g(),c&&w&&d()};return C.schedule=g,C.cancel=y,C.flush=v,s?.addEventListener("abort",y,{once:!0}),C}e.debounce=t})(xk)),xk}var vL;function D7e(){return vL||(vL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O7e();function r(n,s=0,a={}){typeof a!="object"&&(a={});const{leading:i=!1,trailing:o=!0,maxWait:c}=a,u=Array(2);i&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...y){d=n.apply(this,y),f=null},s,{edges:u}),g=function(...y){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,y),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,y),d)},p=()=>(h.flush(),d);return g.cancel=h.cancel,g.flush=p,g}e.debounce=r})(pk)),pk}var bL;function R7e(){return bL||(bL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D7e();function r(n,s=0,a={}){const{leading:i=!0,trailing:o=!0}=a;return t.debounce(n,s,{leading:i,maxWait:s,trailing:o})}e.throttle=r})(gk)),gk}var yk,wL;function I7e(){return wL||(wL=1,yk=R7e().throttle),yk}var L7e=I7e();const B7e=Fc(L7e);var uv=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a]};function _L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_L(Object(r),!0).forEach(function(n){$7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_L(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $7e(e,t,r){return(t=U7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U7e(e){var t=z7e(e,"string");return typeof t=="symbol"?t:t+""}function z7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var W7e=_.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:a="100%",minWidth:i=0,minHeight:o,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:g,style:p={}}=e,y=_.useRef(null),v=_.useRef();v.current=g,_.useImperativeHandle(t,()=>y.current);var[C,S]=_.useState({containerWidth:n.width,containerHeight:n.height}),w=_.useCallback((N,A)=>{S(P=>{var j=Math.round(N),F=Math.round(A);return P.containerWidth===j&&P.containerHeight===F?P:{containerWidth:j,containerHeight:F}})},[]);_.useEffect(()=>{var N=F=>{var R,{width:L,height:V}=F[0].contentRect;w(L,V),(R=v.current)===null||R===void 0||R.call(v,L,V)};d>0&&(N=B7e(N,d,{trailing:!0,leading:!1}));var A=new ResizeObserver(N),{width:P,height:j}=y.current.getBoundingClientRect();return w(P,j),A.observe(y.current),()=>{A.disconnect()}},[w,d]);var T=_.useMemo(()=>{var{containerWidth:N,containerHeight:A}=C;if(N<0||A<0)return null;uv(om(s)||om(a),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,a),uv(!r||r>0,"The aspect(%s) must be greater than zero.",r);var P=om(s)?N:s,j=om(a)?A:a;return r&&r>0&&(P?j=P/r:j&&(P=j*r),c&&j>c&&(j=c)),uv(P>0||j>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,j,s,a,i,o,r),_.Children.map(u,F=>_.cloneElement(F,{width:P,height:j,style:vk({width:P,height:j},F.props.style)}))},[r,u,a,c,o,i,C,s]);return _.createElement("div",{id:f?"".concat(f):void 0,className:Rs("recharts-responsive-container",h),style:vk(vk({},p),{},{width:s,height:a,minWidth:i,minHeight:o,maxHeight:c}),ref:y},_.createElement("div",{style:{width:0,height:0,overflow:"visible"}},T))});function H7e(e,t,r){return(t=G7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G7e(e){var t=V7e(e,"string");return typeof t=="symbol"?t:t+""}function V7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class q7e{constructor(t){H7e(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function SL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function K7e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SL(Object(r),!0).forEach(function(n){Y7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Y7e(e,t,r){return(t=X7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X7e(e){var t=J7e(e,"string");return typeof t=="symbol"?t:t+""}function J7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q7e={cacheSize:2e3,enableCache:!0},bX=K7e({},Q7e),kL=new q7e(bX.cacheSize),Z7e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},CL="recharts_measurement_span";function eEe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",a=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(a,"|").concat(i,"|").concat(o)}var TL=(e,t)=>{try{var r=document.getElementById(CL);r||(r=document.createElement("span"),r.setAttribute("id",CL),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Z7e,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},dv=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||M1.isSsr)return{width:0,height:0};if(!bX.enableCache)return TL(t,r);var n=eEe(t,r),s=kL.get(n);if(s)return s;var a=TL(t,r);return kL.set(n,a),a},EL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,NL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,tEe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,rEe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,wX={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},nEe=Object.keys(wX),Ep="NaN";function sEe(e,t){return e*wX[t]}class cl{static parse(t){var r,[,n,s]=(r=rEe.exec(t))!==null&&r!==void 0?r:[];return new cl(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Ac(t)&&(this.unit=""),r!==""&&!tEe.test(r)&&(this.num=NaN,this.unit=""),nEe.includes(r)&&(this.num=sEe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new cl(NaN,""):new cl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new cl(NaN,""):new cl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new cl(NaN,""):new cl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new cl(NaN,""):new cl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ac(this.num)}}function _X(e){if(e.includes(Ep))return Ep;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,a]=(r=EL.exec(t))!==null&&r!==void 0?r:[],i=cl.parse(n??""),o=cl.parse(a??""),c=s==="*"?i.multiply(o):i.divide(o);if(c.isNaN())return Ep;t=t.replace(EL,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=NL.exec(t))!==null&&u!==void 0?u:[],g=cl.parse(d??""),p=cl.parse(h??""),y=f==="+"?g.add(p):g.subtract(p);if(y.isNaN())return Ep;t=t.replace(NL,y.toString())}return t}var AL=/\(([^()]*)\)/;function aEe(e){for(var t=e,r;(r=AL.exec(t))!=null;){var[,n]=r;t=t.replace(AL,_X(n))}return t}function iEe(e){var t=e.replace(/\s+/g,"");return t=aEe(t),t=_X(t),t}function oEe(e){try{return iEe(e)}catch{return Ep}}function bk(e){var t=oEe(e.slice(5,-1));return t===Ep?"":t}var lEe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],cEe=["dx","dy","angle","className","breakAll"];function $C(){return $C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$C.apply(null,arguments)}function jL(e,t){if(e==null)return{};var r,n,s=uEe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function uEe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var SX=/[ \f\n\r\t\v\u2028\u2029]+/,kX=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Ni(t)||(r?s=t.toString().split(""):s=t.toString().split(SX));var a=s.map(o=>({word:o,width:dv(o,n).width})),i=r?0:dv("",n).width;return{wordsWithComputedWidth:a,spaceWidth:i}}catch{return null}},dEe=(e,t,r,n,s)=>{var{maxLines:a,children:i,style:o,breakAll:c}=e,u=cn(a),d=i,f=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce((V,Z)=>{var{word:Y,width:re}=Z,ue=V[V.length-1];if(ue&&(n==null||s||ue.width+re+r<Number(n)))ue.words.push(Y),ue.width+=re+r;else{var z={words:[Y],width:re};V.push(z)}return V},[])},h=f(t),g=R=>R.reduce((L,V)=>L.width>V.width?L:V);if(!u||s)return h;var p=h.length>a||g(h).width>Number(n);if(!p)return h;for(var y="",v=R=>{var L=d.slice(0,R),V=kX({breakAll:c,style:o,children:L+y}).wordsWithComputedWidth,Z=f(V),Y=Z.length>a||g(Z).width>Number(n);return[Y,Z]},C=0,S=d.length-1,w=0,T;C<=S&&w<=d.length-1;){var N=Math.floor((C+S)/2),A=N-1,[P,j]=v(A),[F]=v(N);if(!P&&!F&&(C=N+1),P&&F&&(S=N-1),!P&&F){T=j;break}w++}return T||h},PL=e=>{var t=Ni(e)?[]:e.toString().split(SX);return[{words:t}]},fEe=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:a,maxLines:i}=e;if((t||r)&&!M1.isSsr){var o,c,u=kX({breakAll:a,children:n,style:s});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,c=f}else return PL(n);return dEe({breakAll:a,children:n,maxLines:i,style:s},o,c,t,r)}return PL(n)},FL="#808080",r9=_.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:a="0.71em",scaleToFit:i=!1,textAnchor:o="start",verticalAnchor:c="end",fill:u=FL}=e,d=jL(e,lEe),f=_.useMemo(()=>fEe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:h,dy:g,angle:p,className:y,breakAll:v}=d,C=jL(d,cEe);if(!nd(r)||!nd(n)||f.length===0)return null;var S=r+(cn(h)?h:0),w=n+(cn(g)?g:0),T;switch(c){case"start":T=bk("calc(".concat(a,")"));break;case"middle":T=bk("calc(".concat((f.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:T=bk("calc(".concat(f.length-1," * -").concat(s,")"));break}var N=[];if(i){var A=f[0].width,{width:P}=d;N.push("scale(".concat(cn(P)?P/A:1,")"))}return p&&N.push("rotate(".concat(p,", ").concat(S,", ").concat(w,")")),N.length&&(C.transform=N.join(" ")),_.createElement("text",$C({},to(C,!0),{ref:t,x:S,y:w,className:Rs("recharts-text",y),textAnchor:o,fill:u.includes("url")?FL:u}),f.map((j,F)=>{var R=j.words.join(v?"":" ");return _.createElement("tspan",{x:S,dy:F===0?T:s,key:"".concat(R,"-").concat(F)},R)}))});r9.displayName="Text";var hEe=["labelRef"];function mEe(e,t){if(e==null)return{};var r,n,s=gEe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function gEe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ML(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ea(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ML(Object(r),!0).forEach(function(n){pEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ML(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pEe(e,t,r){return(t=xEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xEe(e){var t=yEe(e,"string");return typeof t=="symbol"?t:t+""}function yEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xd(){return Xd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xd.apply(null,arguments)}var CX=_.createContext(null),vEe=e=>{var{x:t,y:r,width:n,height:s,children:a}=e,i=_.useMemo(()=>({x:t,y:r,width:n,height:s}),[t,r,n,s]);return _.createElement(CX.Provider,{value:i},a)},TX=()=>{var e=_.useContext(CX),t=sN();return e||t},bEe=_.createContext(null),wEe=()=>{var e=_.useContext(bEe),t=Jr(oY);return e||t},_Ee=e=>{var{value:t,formatter:r}=e,n=Ni(e.children)?t:e.children;return typeof r=="function"?r(n):n},n9=e=>e!=null&&typeof e=="function",SEe=(e,t)=>{var r=bc(t-e),n=Math.min(Math.abs(t-e),360);return r*n},kEe=(e,t,r,n,s)=>{var{offset:a,className:i}=e,{cx:o,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:g}=s,p=(u+d)/2,y=SEe(f,h),v=y>=0?1:-1,C,S;switch(t){case"insideStart":C=f+v*a,S=g;break;case"insideEnd":C=h-v*a,S=!g;break;case"end":C=h+v*a,S=g;break;default:throw new Error("Unsupported position ".concat(t))}S=y<=0?S:!S;var w=Qi(o,c,p,C),T=Qi(o,c,p,C+(S?1:-1)*359),N="M".concat(w.x,",").concat(w.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(S?0:1,`,
    `).concat(T.x,",").concat(T.y),A=Ni(e.id)?qv("recharts-radial-line-"):e.id;return _.createElement("text",Xd({},n,{dominantBaseline:"central",className:Rs("recharts-radial-bar-label",i)}),_.createElement("defs",null,_.createElement("path",{id:A,d:N})),_.createElement("textPath",{xlinkHref:"#".concat(A)},r))},CEe=(e,t,r)=>{var{cx:n,cy:s,innerRadius:a,outerRadius:i,startAngle:o,endAngle:c}=e,u=(o+c)/2;if(r==="outside"){var{x:d,y:f}=Qi(n,s,i+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var h=(a+i)/2,{x:g,y:p}=Qi(n,s,h,u);return{x:g,y:p,textAnchor:"middle",verticalAnchor:"middle"}},EX=e=>"cx"in e&&cn(e.cx),TEe=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,a;r!=null&&!EX(r)&&(a=r);var{x:i,y:o,width:c,height:u}=t,d=u>=0?1:-1,f=d*n,h=d>0?"end":"start",g=d>0?"start":"end",p=c>=0?1:-1,y=p*n,v=p>0?"end":"start",C=p>0?"start":"end";if(s==="top"){var S={x:i+c/2,y:o-d*n,textAnchor:"middle",verticalAnchor:h};return Ea(Ea({},S),a?{height:Math.max(o-a.y,0),width:c}:{})}if(s==="bottom"){var w={x:i+c/2,y:o+u+f,textAnchor:"middle",verticalAnchor:g};return Ea(Ea({},w),a?{height:Math.max(a.y+a.height-(o+u),0),width:c}:{})}if(s==="left"){var T={x:i-y,y:o+u/2,textAnchor:v,verticalAnchor:"middle"};return Ea(Ea({},T),a?{width:Math.max(T.x-a.x,0),height:u}:{})}if(s==="right"){var N={x:i+c+y,y:o+u/2,textAnchor:C,verticalAnchor:"middle"};return Ea(Ea({},N),a?{width:Math.max(a.x+a.width-N.x,0),height:u}:{})}var A=a?{width:c,height:u}:{};return s==="insideLeft"?Ea({x:i+y,y:o+u/2,textAnchor:C,verticalAnchor:"middle"},A):s==="insideRight"?Ea({x:i+c-y,y:o+u/2,textAnchor:v,verticalAnchor:"middle"},A):s==="insideTop"?Ea({x:i+c/2,y:o+f,textAnchor:"middle",verticalAnchor:g},A):s==="insideBottom"?Ea({x:i+c/2,y:o+u-f,textAnchor:"middle",verticalAnchor:h},A):s==="insideTopLeft"?Ea({x:i+y,y:o+f,textAnchor:C,verticalAnchor:g},A):s==="insideTopRight"?Ea({x:i+c-y,y:o+f,textAnchor:v,verticalAnchor:g},A):s==="insideBottomLeft"?Ea({x:i+y,y:o+u-f,textAnchor:C,verticalAnchor:h},A):s==="insideBottomRight"?Ea({x:i+c-y,y:o+u-f,textAnchor:v,verticalAnchor:h},A):s&&typeof s=="object"&&(cn(s.x)||om(s.x))&&(cn(s.y)||om(s.y))?Ea({x:i+Zf(s.x,c),y:o+Zf(s.y,u),textAnchor:"end",verticalAnchor:"end"},A):Ea({x:i+c/2,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},A)},EEe={offset:5};function Tf(e){var t=Dc(e,EEe),{viewBox:r,position:n,value:s,children:a,content:i,className:o="",textBreakAll:c,labelRef:u}=t,d=wEe(),f=TX(),h=n==="center"?f:d??f,g=r||h;if(!g||Ni(s)&&Ni(a)&&!_.isValidElement(i)&&typeof i!="function")return null;var p=Ea(Ea({},t),{},{viewBox:g});if(_.isValidElement(i)){var{labelRef:y}=p,v=mEe(p,hEe);return _.cloneElement(i,v)}var C;if(typeof i=="function"){if(C=_.createElement(i,p),_.isValidElement(C))return C}else C=_Ee(t);var S=EX(g),w=to(t,!0);if(S&&(n==="insideStart"||n==="insideEnd"||n==="end"))return kEe(t,n,C,w,g);var T=S?CEe(g,t.offset,t.position):TEe(t,g);return _.createElement(r9,Xd({ref:u,className:Rs("recharts-label",o)},w,T,{breakAll:c}),C)}Tf.displayName="Label";var NEe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?_.createElement(Tf,Xd({key:"label-implicit"},n)):nd(e)?_.createElement(Tf,Xd({key:"label-implicit",value:e},n)):_.isValidElement(e)?e.type===Tf?_.cloneElement(e,Ea({key:"label-implicit"},n)):_.createElement(Tf,Xd({key:"label-implicit",content:e},n)):n9(e)?_.createElement(Tf,Xd({key:"label-implicit",content:e},n)):e&&typeof e=="object"?_.createElement(Tf,Xd({},e,{key:"label-implicit"},n)):null};function AEe(e){var{label:t}=e,r=TX();return NEe(t,r)||null}var wk={},_k={},OL;function jEe(){return OL||(OL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(_k)),_k}var Sk={},DL;function PEe(){return DL||(DL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Sk)),Sk}var RL;function FEe(){return RL||(RL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jEe(),r=PEe(),n=XE();function s(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=s})(wk)),wk}var kk,IL;function MEe(){return IL||(IL=1,kk=FEe().last),kk}var OEe=MEe();const DEe=Fc(OEe);var REe=["valueAccessor"],IEe=["dataKey","clockWise","id","textBreakAll"];function E_(){return E_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E_.apply(null,arguments)}function LL(e,t){if(e==null)return{};var r,n,s=LEe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function LEe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var BEe=e=>Array.isArray(e.value)?DEe(e.value):e.value,NX=_.createContext(void 0),$Ee=NX.Provider,AX=_.createContext(void 0);AX.Provider;function UEe(){return _.useContext(NX)}function zEe(){return _.useContext(AX)}function n4(e){var{valueAccessor:t=BEe}=e,r=LL(e,REe),{dataKey:n,clockWise:s,id:a,textBreakAll:i}=r,o=LL(r,IEe),c=UEe(),u=zEe(),d=c||u;return!d||!d.length?null:_.createElement(F1,{className:"recharts-label-list"},d.map((f,h)=>{var g,p=Ni(n)?t(f,h):qo(f&&f.payload,n),y=Ni(a)?{}:{id:"".concat(a,"-").concat(h)};return _.createElement(Tf,E_({},to(f,!0),o,y,{fill:(g=r.fill)!==null&&g!==void 0?g:f.fill,parentViewBox:f.parentViewBox,value:p,textBreakAll:i,viewBox:f.viewBox,key:"label-".concat(h),index:h}))}))}n4.displayName="LabelList";function WEe(e){var{label:t}=e;return t?t===!0?_.createElement(n4,{key:"labelList-implicit"}):_.isValidElement(t)||n9(t)?_.createElement(n4,{key:"labelList-implicit",content:t}):typeof t=="object"?_.createElement(n4,E_({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function UC(){return UC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UC.apply(null,arguments)}var jX=e=>{var{cx:t,cy:r,r:n,className:s}=e,a=Rs("recharts-dot",s);return t===+t&&r===+r&&n===+n?_.createElement("circle",UC({},og(e),KE(e),{className:a,cx:t,cy:r,r:n})):null},HEe={radiusAxis:{},angleAxis:{}},PX=ql({name:"polarAxis",initialState:HEe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Xje,removeRadiusAxis:Jje,addAngleAxis:Qje,removeAngleAxis:Zje}=PX.actions,GEe=PX.reducer;function VEe(e){var{fn:t,args:r}=e,n=Jo(),s=Oc();return _.useEffect(()=>{if(!s){var a=t(r);return n(JCe(a)),()=>{n(QCe(a))}}},[t,r,n,s]),null}var qEe=()=>{};function KEe(e){var{legendPayload:t}=e,r=Jo(),n=Oc();return _.useEffect(()=>n?qEe:(r($3e(t)),()=>{r(U3e(t))}),[r,n,t]),null}var Ck,YEe=()=>{var[e]=_.useState(()=>qv("uid-"));return e},XEe=(Ck=sB.useId)!==null&&Ck!==void 0?Ck:YEe;function JEe(e,t){var r=XEe();return t||(e?"".concat(e,"-").concat(r):r)}var QEe=_.createContext(void 0),ZEe=e=>{var{id:t,type:r,children:n}=e,s=JEe("recharts-".concat(r),t);return _.createElement(QEe.Provider,{value:s},n(s))},eNe={cartesianItems:[],polarItems:[]},FX=ql({name:"graphicalItems",initialState:eNe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,s=o0(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},removeCartesianGraphicalItem(e,t){var r=o0(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=o0(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:tNe,replaceCartesianGraphicalItem:rNe,removeCartesianGraphicalItem:nNe,addPolarGraphicalItem:ePe,removePolarGraphicalItem:tPe}=FX.actions,sNe=FX.reducer;function aNe(e){var t=Jo(),r=_.useRef(null);return _.useEffect(()=>{r.current===null?t(tNe(e)):r.current!==e&&t(rNe({prev:r.current,next:e})),r.current=e},[t,e]),_.useEffect(()=>()=>{r.current&&(t(nNe(r.current)),r.current=null)},[t]),null}function BL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $L(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BL(Object(r),!0).forEach(function(n){iNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iNe(e,t,r){return(t=oNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oNe(e){var t=lNe(e,"string");return typeof t=="symbol"?t:t+""}function lNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cNe={xAxis:{},yAxis:{},zAxis:{}},MX=ql({name:"cartesianAxis",initialState:cNe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=$L($L({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:uNe,removeXAxis:dNe,addYAxis:fNe,removeYAxis:hNe,addZAxis:rPe,removeZAxis:nPe,updateYAxisWidth:mNe}=MX.actions,gNe=MX.reducer,pNe=It([ro],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),xNe=It([pNe,A0,j0],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),s9=()=>Jr(xNe),yNe=()=>Jr(UTe);function UL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UL(Object(r),!0).forEach(function(n){vNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vNe(e,t,r){return(t=bNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bNe(e){var t=wNe(e,"string");return typeof t=="symbol"?t:t+""}function wNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _Ne=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:a}=e;if(s===!1||t.x==null||t.y==null)return null;var i=zL(zL({index:r,dataKey:a,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},to(s,!1)),KE(s)),o;return _.isValidElement(s)?o=_.cloneElement(s,i):typeof s=="function"?o=s(i):o=_.createElement(jX,i),_.createElement(F1,{className:"recharts-active-dot"},o)};function SNe(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,a=Jr(r2),i=yNe();if(t==null||i==null)return null;var o=t.find(c=>i.includes(c.payload));return Ni(o)?null:_Ne({point:o,childIndex:Number(a),mainColor:r,dataKey:s,activeDot:n})}var kNe={},OX=ql({name:"errorBars",initialState:kNe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?s:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:sPe,replaceErrorBar:aPe,removeErrorBar:iPe}=OX.actions,CNe=OX.reducer,TNe=["children"];function ENe(e,t){if(e==null)return{};var r,n,s=NNe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function NNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ANe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},jNe=_.createContext(ANe);function PNe(e){var{children:t}=e,r=ENe(e,TNe);return _.createElement(jNe.Provider,{value:r},t)}function DX(e,t){var r,n,s=Jr(u=>F0(u,e)),a=Jr(u=>M0(u,t)),i=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:Nl.allowDataOverflow,o=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:Al.allowDataOverflow,c=i||o;return{needClip:c,needClipX:i,needClipY:o}}function FNe(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=s9(),{needClipX:a,needClipY:i,needClip:o}=DX(t,r);if(!o)return null;var{x:c,y:u,width:d,height:f}=s;return _.createElement("clipPath",{id:"clipPath-".concat(n)},_.createElement("rect",{x:a?c:c-d/2,y:i?u:u-f/2,width:a?d:d*2,height:i?f:f*2}))}var MNe=e=>{var{chartData:t}=e,r=Jo(),n=Oc();return _.useEffect(()=>n?()=>{}:(r(hL(t)),()=>{r(hL(void 0))}),[t,r,n]),null},WL={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},RX=ql({name:"brush",initialState:WL,reducers:{setBrushSettings(e,t){return t.payload==null?WL:t.payload}}}),{setBrushSettings:oPe}=RX.actions,ONe=RX.reducer;function DNe(e,t,r){return(t=RNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RNe(e){var t=INe(e,"string");return typeof t=="symbol"?t:t+""}function INe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class a9{static create(t){return new a9(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}DNe(a9,"EPS",1e-4);function LNe(e){return(e%180+180)%180}var BNe=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=LNe(s),i=a*Math.PI/180,o=Math.atan(n/r),c=i>o&&i<Math.PI-o?n/Math.sin(i):r/Math.cos(i);return Math.abs(c)},$Ne={dots:[],areas:[],lines:[]},IX=ql({name:"referenceElements",initialState:$Ne,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=o0(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=o0(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=o0(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:lPe,removeDot:cPe,addArea:uPe,removeArea:dPe,addLine:fPe,removeLine:hPe}=IX.actions,UNe=IX.reducer,zNe=_.createContext(void 0),WNe=e=>{var{children:t}=e,[r]=_.useState("".concat(qv("recharts"),"-clip")),n=s9();if(n==null)return null;var{x:s,y:a,width:i,height:o}=n;return _.createElement(zNe.Provider,{value:r},_.createElement("defs",null,_.createElement("clipPath",{id:r},_.createElement("rect",{x:s,y:a,height:o,width:i}))),t)};function o1(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function LX(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function HNe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return BNe(n,r)}function GNe(e,t,r){var n=r==="width",{x:s,y:a,width:i,height:o}=e;return t===1?{start:n?s:a,end:n?s+i:a+o}:{start:n?s+i:a+o,end:n?s:a}}function N_(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-s)<=0}function VNe(e,t){return LX(e,t+1)}function qNe(e,t,r,n,s){for(var a=(n||[]).slice(),{start:i,end:o}=t,c=0,u=1,d=i,f=function(){var p=n?.[c];if(p===void 0)return{v:LX(n,u)};var y=c,v,C=()=>(v===void 0&&(v=r(p,y)),v),S=p.coordinate,w=c===0||N_(e,S,C,d,o);w||(c=0,d=i,u+=1),w&&(d=S+e*(C()/2+s),c+=u)},h;u<=a.length;)if(h=f(),h)return h.v;return[]}function HL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HL(Object(r),!0).forEach(function(n){KNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KNe(e,t,r){return(t=YNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YNe(e){var t=XNe(e,"string");return typeof t=="symbol"?t:t+""}function XNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JNe(e,t,r,n,s){for(var a=(n||[]).slice(),i=a.length,{start:o}=t,{end:c}=t,u=function(h){var g=a[h],p,y=()=>(p===void 0&&(p=r(g,h)),p);if(h===i-1){var v=e*(g.coordinate+e*y()/2-c);a[h]=g=fo(fo({},g),{},{tickCoord:v>0?g.coordinate-v*e:g.coordinate})}else a[h]=g=fo(fo({},g),{},{tickCoord:g.coordinate});var C=N_(e,g.tickCoord,y,o,c);C&&(c=g.tickCoord-e*(y()/2+s),a[h]=fo(fo({},g),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return a}function QNe(e,t,r,n,s,a){var i=(n||[]).slice(),o=i.length,{start:c,end:u}=t;if(a){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);i[o-1]=d=fo(fo({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var g=N_(e,d.tickCoord,()=>f,c,u);g&&(u=d.tickCoord-e*(f/2+s),i[o-1]=fo(fo({},d),{},{isShow:!0}))}for(var p=a?o-1:o,y=function(S){var w=i[S],T,N=()=>(T===void 0&&(T=r(w,S)),T);if(S===0){var A=e*(w.coordinate-e*N()/2-c);i[S]=w=fo(fo({},w),{},{tickCoord:A<0?w.coordinate-A*e:w.coordinate})}else i[S]=w=fo(fo({},w),{},{tickCoord:w.coordinate});var P=N_(e,w.tickCoord,N,c,u);P&&(c=w.tickCoord+e*(N()/2+s),i[S]=fo(fo({},w),{},{isShow:!0}))},v=0;v<p;v++)y(v);return i}function i9(e,t,r){var{tick:n,ticks:s,viewBox:a,minTickGap:i,orientation:o,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!s||!s.length||!n)return[];if(cn(c)||M1.isSsr){var h;return(h=VNe(s,cn(c)?c:0))!==null&&h!==void 0?h:[]}var g=[],p=o==="top"||o==="bottom"?"width":"height",y=d&&p==="width"?dv(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(w,T)=>{var N=typeof u=="function"?u(w.value,T):w.value;return p==="width"?HNe(dv(N,{fontSize:t,letterSpacing:r}),y,f):dv(N,{fontSize:t,letterSpacing:r})[p]},C=s.length>=2?bc(s[1].coordinate-s[0].coordinate):1,S=GNe(a,C,p);return c==="equidistantPreserveStart"?qNe(C,S,v,s,i):(c==="preserveStart"||c==="preserveStartEnd"?g=QNe(C,S,v,s,i,c==="preserveStartEnd"):g=JNe(C,S,v,s,i),g.filter(w=>w.isShow))}var ZNe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:a=0}=e,i=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var o=r?r.getBoundingClientRect().width:0,c=s+a,u=i+c+o+(r?n:0);return Math.round(u)}return 0},e9e=["axisLine","width","height","className","hide","ticks"],t9e=["viewBox"],r9e=["viewBox"];function zC(e,t){if(e==null)return{};var r,n,s=n9e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function n9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function qm(){return qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qm.apply(null,arguments)}function GL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ti(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GL(Object(r),!0).forEach(function(n){s9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s9e(e,t,r){return(t=a9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a9e(e){var t=i9e(e,"string");return typeof t=="symbol"?t:t+""}function i9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o9={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function o9e(e){var{x:t,y:r,width:n,height:s,orientation:a,mirror:i,axisLine:o,otherSvgProps:c}=e;if(!o)return null;var u=ti(ti(ti({},c),to(o,!1)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!i||a==="bottom"&&i);u=ti(ti({},u),{},{x1:t,y1:r+d*s,x2:t+n,y2:r+d*s})}else{var f=+(a==="left"&&!i||a==="right"&&i);u=ti(ti({},u),{},{x1:t+f*n,y1:r,x2:t+f*n,y2:r+s})}return _.createElement("line",qm({},u,{className:Rs("recharts-cartesian-axis-line",_S(o,"className"))}))}function l9e(e,t,r,n,s,a,i,o,c){var u,d,f,h,g,p,y=o?-1:1,v=e.tickSize||i,C=cn(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":u=d=e.coordinate,h=r+ +!o*s,f=h-y*v,p=f-y*c,g=C;break;case"left":f=h=e.coordinate,d=t+ +!o*n,u=d-y*v,g=u-y*c,p=C;break;case"right":f=h=e.coordinate,d=t+ +o*n,u=d+y*v,g=u+y*c,p=C;break;default:u=d=e.coordinate,h=r+ +o*s,f=h+y*v,p=f+y*c,g=C;break}return{line:{x1:u,y1:f,x2:d,y2:h},tick:{x:g,y:p}}}function c9e(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function u9e(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function d9e(e){var{option:t,tickProps:r,value:n}=e,s,a=Rs(r.className,"recharts-cartesian-axis-tick-value");if(_.isValidElement(t))s=_.cloneElement(t,ti(ti({},r),{},{className:a}));else if(typeof t=="function")s=t(ti(ti({},r),{},{className:a}));else{var i="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(i=Rs(i,t?.className)),s=_.createElement(r9,qm({},r,{className:i}),n)}return s}function f9e(e){var{ticks:t=[],tick:r,tickLine:n,stroke:s,tickFormatter:a,unit:i,padding:o,tickTextProps:c,orientation:u,mirror:d,x:f,y:h,width:g,height:p,tickSize:y,tickMargin:v,fontSize:C,letterSpacing:S,getTicksConfig:w,events:T}=e,N=i9(ti(ti({},w),{},{ticks:t}),C,S),A=c9e(u,d),P=u9e(u,d),j=og(w),F=to(r,!1),R=ti(ti({},j),{},{fill:"none"},to(n,!1)),L=N.map((V,Z)=>{var{line:Y,tick:re}=l9e(V,f,h,g,p,u,y,d,v),ue=ti(ti(ti(ti({textAnchor:A,verticalAnchor:P},j),{},{stroke:"none",fill:s},F),re),{},{index:Z,payload:V,visibleTicksCount:N.length,tickFormatter:a,padding:o},c);return _.createElement(F1,qm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(V.value,"-").concat(V.coordinate,"-").concat(V.tickCoord)},P4e(T,V,Z)),n&&_.createElement("line",qm({},R,Y,{className:Rs("recharts-cartesian-axis-tick-line",_S(n,"className"))})),r&&_.createElement(d9e,{option:r,tickProps:ue,value:"".concat(typeof a=="function"?a(V.value,Z):V.value).concat(i||"")}))});return L.length>0?_.createElement("g",{className:"recharts-cartesian-axis-ticks"},L):null}var h9e=_.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:a,hide:i,ticks:o}=e,c=zC(e,e9e),[u,d]=_.useState(""),[f,h]=_.useState(""),g=_.useRef([]);_.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var y;return ZNe({ticks:g.current,label:(y=e.labelRef)===null||y===void 0?void 0:y.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var p=_.useCallback(y=>{if(y){var v=y.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=Array.from(v);var C=v[0];if(C){var S=window.getComputedStyle(C),w=S.fontSize,T=S.letterSpacing;(w!==u||T!==f)&&(d(w),h(T))}}},[u,f]);return i||n!=null&&n<=0||s!=null&&s<=0?null:_.createElement(F1,{className:Rs("recharts-cartesian-axis",a),ref:p},_.createElement(o9e,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:og(e)}),_.createElement(f9e,{ticks:o,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:u,letterSpacing:f,getTicksConfig:e,events:c}),_.createElement(vEe,{x:e.x,y:e.y,width:e.width,height:e.height},_.createElement(AEe,{label:e.label}),e.children))}),m9e=_.memo(h9e,(e,t)=>{var{viewBox:r}=e,n=zC(e,t9e),{viewBox:s}=t,a=zC(t,r9e);return o1(r,s)&&o1(n,a)}),l9=_.forwardRef((e,t)=>{var r=Dc(e,o9);return _.createElement(m9e,qm({},r,{ref:t}))});l9.displayName="CartesianAxis";var g9e=["x1","y1","x2","y2","key"],p9e=["offset"],x9e=["xAxisId","yAxisId"],y9e=["xAxisId","yAxisId"];function VL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function po(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VL(Object(r),!0).forEach(function(n){v9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function v9e(e,t,r){return(t=b9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b9e(e){var t=w9e(e,"string");return typeof t=="symbol"?t:t+""}function w9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function um(){return um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},um.apply(null,arguments)}function A_(e,t){if(e==null)return{};var r,n,s=_9e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var S9e=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:a,height:i,ry:o}=e;return _.createElement("rect",{x:n,y:s,ry:o,width:a,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function BX(e,t){var r;if(_.isValidElement(e))r=_.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:a,y2:i,key:o}=t,c=A_(t,g9e),u=og(c),{offset:d}=u,f=A_(u,p9e);r=_.createElement("line",um({},f,{x1:n,y1:s,x2:a,y2:i,fill:"none",key:o}))}return r}function k9e(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:a,yAxisId:i}=e,o=A_(e,x9e),c=s.map((u,d)=>{var f=po(po({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return BX(n,f)});return _.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function C9e(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:a,yAxisId:i}=e,o=A_(e,y9e),c=s.map((u,d)=>{var f=po(po({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return BX(n,f)});return _.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function T9e(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:a,height:i,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=o.map(f=>Math.round(f+s-s)).sort((f,h)=>f-h);s!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var g=!u[h+1],p=g?s+i-f:u[h+1]-f;if(p<=0)return null;var y=h%t.length;return _.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:p,width:a,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function E9e(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:a,width:i,height:o,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+s-s)).sort((f,h)=>f-h);s!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var g=!u[h+1],p=g?s+i-f:u[h+1]-f;if(p<=0)return null;var y=h%r.length;return _.createElement("rect",{key:"react-".concat(h),x:f,y:a,width:p,height:o,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var N9e=(e,t)=>{var{xAxis:r,width:n,height:s,offset:a}=e;return Wq(i9(po(po(po({},o9),r),{},{ticks:Hq(r),viewBox:{x:0,y:0,width:n,height:s}})),a.left,a.left+a.width,t)},A9e=(e,t)=>{var{yAxis:r,width:n,height:s,offset:a}=e;return Wq(i9(po(po(po({},o9),r),{},{ticks:Hq(r),viewBox:{x:0,y:0,width:n,height:s}})),a.top,a.top+a.height,t)},j9e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function $X(e){var t=Yq(),r=Xq(),n=Kq(),s=po(po({},Dc(e,j9e)),{},{x:cn(e.x)?e.x:n.left,y:cn(e.y)?e.y:n.top,width:cn(e.width)?e.width:n.width,height:cn(e.height)?e.height:n.height}),{xAxisId:a,yAxisId:i,x:o,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:g}=s,p=Oc(),y=Jr(F=>sL(F,"xAxis",a,p)),v=Jr(F=>sL(F,"yAxis",i,p));if(!cn(u)||u<=0||!cn(d)||d<=0||!cn(o)||o!==+o||!cn(c)||c!==+c)return null;var C=s.verticalCoordinatesGenerator||N9e,S=s.horizontalCoordinatesGenerator||A9e,{horizontalPoints:w,verticalPoints:T}=s;if((!w||!w.length)&&typeof S=="function"){var N=h&&h.length,A=S({yAxis:v?po(po({},v),{},{ticks:N?h:v.ticks}):void 0,width:t,height:r,offset:n},N?!0:f);uv(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(w=A)}if((!T||!T.length)&&typeof C=="function"){var P=g&&g.length,j=C({xAxis:y?po(po({},y),{},{ticks:P?g:y.ticks}):void 0,width:t,height:r,offset:n},P?!0:f);uv(Array.isArray(j),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof j,"]")),Array.isArray(j)&&(T=j)}return _.createElement("g",{className:"recharts-cartesian-grid"},_.createElement(S9e,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),_.createElement(T9e,um({},s,{horizontalPoints:w})),_.createElement(E9e,um({},s,{verticalPoints:T})),_.createElement(k9e,um({},s,{offset:n,horizontalPoints:w,xAxis:y,yAxis:v})),_.createElement(C9e,um({},s,{offset:n,verticalPoints:T,xAxis:y,yAxis:v})))}$X.displayName="CartesianGrid";var UX=(e,t,r,n)=>qY(e,"xAxis",t,n),zX=(e,t,r,n)=>VY(e,"xAxis",t,n),WX=(e,t,r,n)=>qY(e,"yAxis",r,n),HX=(e,t,r,n)=>VY(e,"yAxis",r,n),P9e=It([Ls,UX,WX,zX,HX],(e,t,r,n,s)=>dh(e,"xAxis")?vC(t,n,!1):vC(r,s,!1)),F9e=(e,t,r,n,s)=>s;function M9e(e){return e.type==="line"}var O9e=It([gY,F9e],(e,t)=>e.filter(M9e).find(r=>r.id===t)),D9e=It([Ls,UX,WX,zX,HX,O9e,P9e,AN],(e,t,r,n,s,a,i,o)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=o;if(!(a==null||t==null||r==null||n==null||s==null||n.length===0||s.length===0||i==null)){var{dataKey:f,data:h}=a,g;if(h!=null&&h.length>0?g=h:g=c?.slice(u,d+1),g!=null)return nAe({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:f,bandSize:i,displayedData:g})}}),R9e=["id"],I9e=["type","layout","connectNulls","needClip"],L9e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function qL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Dl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qL(Object(r),!0).forEach(function(n){B9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function B9e(e,t,r){return(t=$9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $9e(e){var t=U9e(e,"string");return typeof t=="symbol"?t:t+""}function U9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c9(e,t){if(e==null)return{};var r,n,s=z9e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function z9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Km(){return Km=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Km.apply(null,arguments)}var W9e=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:a}=e;return[{inactive:a,dataKey:t,type:s,color:n,value:Gq(r,t),payload:e}]};function H9e(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:a,name:i,hide:o,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:a,dataKey:t,nameKey:void 0,name:Gq(i,t),hide:o,type:e.tooltipType,color:e.stroke,unit:c}}}var GX=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function G9e(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}var V9e=(e,t,r)=>{var n=r.reduce((f,h)=>f+h);if(!n)return GX(t,e);for(var s=Math.floor(e/n),a=e%n,i=t-e,o=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>a){o=[...r.slice(0,c),a-u];break}var d=o.length%2===0?[0,i]:[i];return[...G9e(r,s),...o,...d].map(f=>"".concat(f,"px")).join(", ")};function q9e(e,t){var r;if(_.isValidElement(e))r=_.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=Rs("recharts-line-dot",typeof e!="boolean"?e.className:"");r=_.createElement(jX,Km({},t,{className:n}))}return r}function K9e(e,t){return e==null?!1:t?!0:e.length===1}function Y9e(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:a,needClip:i}=n;if(!K9e(r,s))return null;var{id:o}=n,c=c9(n,R9e),u=HV(s),d=og(c),f=to(s,!0),h=r.map((p,y)=>{var v=Dl(Dl(Dl({key:"dot-".concat(y),r:3},d),f),{},{index:y,cx:p.x,cy:p.y,dataKey:a,value:p.value,payload:p.payload,points:r});return q9e(s,v)}),g={clipPath:i?"url(#clipPath-".concat(u?"":"dots-").concat(t,")"):void 0};return _.createElement(F1,Km({className:"recharts-line-dots",key:"dots"},g),h)}function X9e(e){var{showLabels:t,children:r,points:n}=e,s=_.useMemo(()=>n?.map(a=>{var i={x:a.x,y:a.y,width:0,height:0};return Dl(Dl({},i),{},{value:a.value,payload:a.payload,viewBox:i,parentViewBox:void 0,fill:void 0})}),[n]);return _.createElement($Ee,{value:t?s:null},r)}function KL(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:a}=e,{type:i,layout:o,connectNulls:c,needClip:u}=a,d=c9(a,I9e),f=Dl(Dl({},to(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:i,layout:o,connectNulls:c,strokeDasharray:s??a.strokeDasharray});return _.createElement(_.Fragment,null,n?.length>1&&_.createElement(Zq,Km({},f,{pathRef:r})),_.createElement(Y9e,{points:n,clipPathId:t,props:a}))}function J9e(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function Q9e(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:a}=e,{points:i,strokeDasharray:o,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:h,width:g,height:p,onAnimationEnd:y,onAnimationStart:v}=r,C=s.current,S=sK(r,"recharts-line-"),[w,T]=_.useState(!1),N=!w,A=_.useCallback(()=>{typeof y=="function"&&y(),T(!1)},[y]),P=_.useCallback(()=>{typeof v=="function"&&v(),T(!0)},[v]),j=J9e(n.current),F=a.current;return _.createElement(X9e,{points:i,showLabels:N},r.children,_.createElement(nK,{animationId:S,begin:u,duration:d,isActive:c,easing:f,onAnimationEnd:A,onAnimationStart:P,key:S},R=>{var L=Kd(F,j+F,R),V=Math.min(L,j),Z;if(c)if(o){var Y="".concat(o).split(/[,\s]+/gim).map(z=>parseFloat(z));Z=V9e(V,j,Y)}else Z=GX(j,V);else Z=o==null?void 0:String(o);if(C){var re=C.length/i.length,ue=R===1?i:i.map((z,X)=>{var I=Math.floor(X*re);if(C[I]){var B=C[I];return Dl(Dl({},z),{},{x:Kd(B.x,z.x,R),y:Kd(B.y,z.y,R)})}return h?Dl(Dl({},z),{},{x:Kd(g*2,z.x,R),y:Kd(p/2,z.y,R)}):Dl(Dl({},z),{},{x:z.x,y:z.y})});return s.current=ue,_.createElement(KL,{props:r,points:ue,clipPathId:t,pathRef:n,strokeDasharray:Z})}return R>0&&j>0&&(s.current=i,a.current=V),_.createElement(KL,{props:r,points:i,clipPathId:t,pathRef:n,strokeDasharray:Z})}),_.createElement(WEe,{label:r.label}))}function Z9e(e){var{clipPathId:t,props:r}=e,n=_.useRef(null),s=_.useRef(0),a=_.useRef(null);return _.createElement(Q9e,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:s,pathRef:a})}var eAe=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:qo(e.payload,t)});class tAe extends _.Component{render(){var t,{hide:r,dot:n,points:s,className:a,xAxisId:i,yAxisId:o,top:c,left:u,width:d,height:f,id:h,needClip:g}=this.props;if(r)return null;var p=Rs("recharts-line",a),y=h,{r:v=3,strokeWidth:C=2}=(t=to(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},S=HV(n),w=v*2+C;return _.createElement(_.Fragment,null,_.createElement(F1,{className:p},g&&_.createElement("defs",null,_.createElement(FNe,{clipPathId:y,xAxisId:i,yAxisId:o}),!S&&_.createElement("clipPath",{id:"clipPath-dots-".concat(y)},_.createElement("rect",{x:u-w/2,y:c-w/2,width:d+w,height:f+w}))),_.createElement(PNe,{xAxisId:i,yAxisId:o,data:s,dataPointFormatter:eAe,errorBarOffset:0},_.createElement(Z9e,{props:this.props,clipPathId:y}))),_.createElement(SNe,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var VX={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!M1.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function rAe(e){var t=Dc(e,VX),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:a,animationEasing:i,connectNulls:o,dot:c,hide:u,isAnimationActive:d,label:f,legendType:h,xAxisId:g,yAxisId:p,id:y}=t,v=c9(t,L9e),{needClip:C}=DX(g,p),S=s9(),w=aN(),T=Oc(),N=Jr(R=>D9e(R,g,p,T,y));if(w!=="horizontal"&&w!=="vertical"||N==null||S==null)return null;var{height:A,width:P,x:j,y:F}=S;return _.createElement(tAe,Km({},v,{id:y,connectNulls:o,dot:c,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:a,animationEasing:i,isAnimationActive:d,hide:u,label:f,legendType:h,xAxisId:g,yAxisId:p,points:N,layout:w,height:A,width:P,left:j,top:F,needClip:C}))}function nAe(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:a,dataKey:i,bandSize:o,displayedData:c}=e;return c.map((u,d)=>{var f=qo(u,i);if(t==="horizontal"){var h=WR({axis:r,ticks:s,bandSize:o,entry:u,index:d}),g=Ni(f)?null:n.scale(f);return{x:h,y:g,value:f,payload:u}}var p=Ni(f)?null:r.scale(f),y=WR({axis:n,ticks:a,bandSize:o,entry:u,index:d});return p==null||y==null?null:{x:p,y,value:f,payload:u}}).filter(Boolean)}function sAe(e){var t=Dc(e,VX),r=Oc();return _.createElement(ZEe,{id:t.id,type:"line"},n=>_.createElement(_.Fragment,null,_.createElement(KEe,{legendPayload:W9e(t)}),_.createElement(VEe,{fn:H9e,args:t}),_.createElement(aNe,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),_.createElement(rAe,Km({},t,{id:n}))))}var qX=_.memo(sAe);qX.displayName="Line";var aAe=["dangerouslySetInnerHTML","ticks"],iAe=["id"],oAe=["domain"],lAe=["domain"];function WC(){return WC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},WC.apply(null,arguments)}function j_(e,t){if(e==null)return{};var r,n,s=cAe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function cAe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function uAe(e){var t=Jo();return _.useEffect(()=>(t(uNe(e)),()=>{t(dNe(e))}),[e,t]),null}var dAe=e=>{var{xAxisId:t,className:r}=e,n=Jr(qq),s=Oc(),a="xAxis",i=Jr(v=>B1(v,a,t,s)),o=Jr(v=>GY(v,a,t,s)),c=Jr(v=>OCe(v,t)),u=Jr(v=>$Ce(v,t)),d=Jr(v=>dY(v,t));if(c==null||u==null||d==null)return null;var{dangerouslySetInnerHTML:f,ticks:h}=e,g=j_(e,aAe),{id:p}=d,y=j_(d,iAe);return _.createElement(l9,WC({},g,y,{scale:i,x:u.x,y:u.y,width:c.width,height:c.height,className:Rs("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:o}))},fAe={allowDataOverflow:Nl.allowDataOverflow,allowDecimals:Nl.allowDecimals,allowDuplicatedCategory:Nl.allowDuplicatedCategory,height:Nl.height,hide:!1,mirror:Nl.mirror,orientation:Nl.orientation,padding:Nl.padding,reversed:Nl.reversed,scale:Nl.scale,tickCount:Nl.tickCount,type:Nl.type,xAxisId:0},hAe=e=>{var t,r,n,s,a,i=Dc(e,fAe);return _.createElement(_.Fragment,null,_.createElement(uAe,{interval:(t=i.interval)!==null&&t!==void 0?t:"preserveEnd",id:i.xAxisId,scale:i.scale,type:i.type,padding:i.padding,allowDataOverflow:i.allowDataOverflow,domain:i.domain,dataKey:i.dataKey,allowDuplicatedCategory:i.allowDuplicatedCategory,allowDecimals:i.allowDecimals,tickCount:i.tickCount,includeHidden:(r=i.includeHidden)!==null&&r!==void 0?r:!1,reversed:i.reversed,ticks:i.ticks,height:i.height,orientation:i.orientation,mirror:i.mirror,hide:i.hide,unit:i.unit,name:i.name,angle:(n=i.angle)!==null&&n!==void 0?n:0,minTickGap:(s=i.minTickGap)!==null&&s!==void 0?s:5,tick:(a=i.tick)!==null&&a!==void 0?a:!0,tickFormatter:i.tickFormatter}),_.createElement(dAe,i))},mAe=(e,t)=>{var{domain:r}=e,n=j_(e,oAe),{domain:s}=t,a=j_(t,lAe);return o1(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:o1({domain:r},{domain:s}):!1},KX=_.memo(hAe,mAe);KX.displayName="XAxis";var gAe=["dangerouslySetInnerHTML","ticks"],pAe=["id"],xAe=["domain"],yAe=["domain"];function HC(){return HC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},HC.apply(null,arguments)}function P_(e,t){if(e==null)return{};var r,n,s=vAe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function vAe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function bAe(e){var t=Jo();return _.useEffect(()=>(t(fNe(e)),()=>{t(hNe(e))}),[e,t]),null}var wAe=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,a=_.useRef(null),i=_.useRef(null),o=Jr(qq),c=Oc(),u=Jo(),d="yAxis",f=Jr(N=>B1(N,d,t,c)),h=Jr(N=>WCe(N,t)),g=Jr(N=>zCe(N,t)),p=Jr(N=>GY(N,d,t,c)),y=Jr(N=>fY(N,t));if(_.useLayoutEffect(()=>{if(!(n!=="auto"||!h||n9(s)||_.isValidElement(s)||y==null)){var N=a.current;if(N){var A=N.getCalculatedWidth();Math.round(h.width)!==Math.round(A)&&u(mNe({id:t,width:A}))}}},[p,h,u,s,t,n,y]),h==null||g==null||y==null)return null;var{dangerouslySetInnerHTML:v,ticks:C}=e,S=P_(e,gAe),{id:w}=y,T=P_(y,pAe);return _.createElement(l9,HC({},S,T,{ref:a,labelRef:i,scale:f,x:g.x,y:g.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:h.width,height:h.height,className:Rs("recharts-".concat(d," ").concat(d),r),viewBox:o,ticks:p}))},_Ae={allowDataOverflow:Al.allowDataOverflow,allowDecimals:Al.allowDecimals,allowDuplicatedCategory:Al.allowDuplicatedCategory,hide:!1,mirror:Al.mirror,orientation:Al.orientation,padding:Al.padding,reversed:Al.reversed,scale:Al.scale,tickCount:Al.tickCount,type:Al.type,width:Al.width,yAxisId:0},SAe=e=>{var t,r,n,s,a,i=Dc(e,_Ae);return _.createElement(_.Fragment,null,_.createElement(bAe,{interval:(t=i.interval)!==null&&t!==void 0?t:"preserveEnd",id:i.yAxisId,scale:i.scale,type:i.type,domain:i.domain,allowDataOverflow:i.allowDataOverflow,dataKey:i.dataKey,allowDuplicatedCategory:i.allowDuplicatedCategory,allowDecimals:i.allowDecimals,tickCount:i.tickCount,padding:i.padding,includeHidden:(r=i.includeHidden)!==null&&r!==void 0?r:!1,reversed:i.reversed,ticks:i.ticks,width:i.width,orientation:i.orientation,mirror:i.mirror,hide:i.hide,unit:i.unit,name:i.name,angle:(n=i.angle)!==null&&n!==void 0?n:0,minTickGap:(s=i.minTickGap)!==null&&s!==void 0?s:5,tick:(a=i.tick)!==null&&a!==void 0?a:!0,tickFormatter:i.tickFormatter}),_.createElement(wAe,i))},kAe=(e,t)=>{var{domain:r}=e,n=P_(e,xAe),{domain:s}=t,a=P_(t,yAe);return o1(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:o1({domain:r},{domain:s}):!1},YX=_.memo(SAe,kAe);YX.displayName="YAxis";var Tk={exports:{}},Ek={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YL;function CAe(){if(YL)return Ek;YL=1;var e=Ym();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,a=e.useEffect,i=e.useMemo,o=e.useDebugValue;return Ek.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var g=s(null);if(g.current===null){var p={hasValue:!1,value:null};g.current=p}else p=g.current;g=i(function(){function v(N){if(!C){if(C=!0,S=N,N=f(N),h!==void 0&&p.hasValue){var A=p.value;if(h(A,N))return w=A}return w=N}if(A=w,r(S,N))return A;var P=f(N);return h!==void 0&&h(A,P)?(S=N,A):(S=N,w=P)}var C=!1,S,w,T=d===void 0?null:d;return[function(){return v(u())},T===null?void 0:function(){return v(T())}]},[u,d,f,h]);var y=n(c,g[0],g[1]);return a(function(){p.hasValue=!0,p.value=y},[y]),o(y),y},Ek}var XL;function TAe(){return XL||(XL=1,Tk.exports=CAe()),Tk.exports}TAe();function EAe(e){e()}function NAe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){EAe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var JL={notify(){},get:()=>[]};function AAe(e,t){let r,n=JL,s=0,a=!1;function i(y){d();const v=n.subscribe(y);let C=!1;return()=>{C||(C=!0,v(),f())}}function o(){n.notify()}function c(){p.onStateChange&&p.onStateChange()}function u(){return a}function d(){s++,r||(r=e.subscribe(c),n=NAe())}function f(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=JL)}function h(){a||(a=!0,d())}function g(){a&&(a=!1,f())}const p={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:g,getListeners:()=>n};return p}var jAe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PAe=jAe(),FAe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",MAe=FAe(),OAe=()=>PAe||MAe?_.useLayoutEffect:_.useEffect,DAe=OAe(),RAe=Symbol.for("react-redux-context"),IAe=typeof globalThis<"u"?globalThis:{};function LAe(){if(!_.createContext)return{};const e=IAe[RAe]??=new Map;let t=e.get(_.createContext);return t||(t=_.createContext(null),e.set(_.createContext,t)),t}var BAe=LAe();function $Ae(e){const{children:t,context:r,serverState:n,store:s}=e,a=_.useMemo(()=>{const c=AAe(s);return{store:s,subscription:c,getServerState:n?()=>n:void 0}},[s,n]),i=_.useMemo(()=>s.getState(),[s]);DAe(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,i]);const o=r||BAe;return _.createElement(o.Provider,{value:a},t)}var UAe=$Ae,zAe=(e,t)=>t,u9=It([zAe,Ls,oY,di,oX,O0,KTe,ro],ZTe),d9=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},XX=jc("mouseClick"),JX=R2();JX.startListening({actionCreator:XX,effect:(e,t)=>{var r=e.payload,n=u9(t.getState(),d9(r));n?.activeIndex!=null&&t.dispatch(tTe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var GC=jc("mouseMove"),QX=R2();QX.startListening({actionCreator:GC,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=qN(n,n.tooltip.settings.shared),a=u9(n,d9(r));s==="axis"&&(a?.activeIndex!=null?t.dispatch(eX({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(ZY()))}});var QL={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},ZX=ql({name:"rootProps",initialState:QL,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:QL.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),WAe=ZX.reducer,{updateOptions:HAe}=ZX.actions,eJ=ql({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:mPe}=eJ.actions,GAe=eJ.reducer,tJ=jc("keyDown"),rJ=jc("focus"),f9=R2();f9.startListening({actionCreator:tJ,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var i=Number(KN(s,U1(r))),o=O0(r);if(a==="Enter"){var c=T_(r,"axis","hover",String(s.index));t.dispatch(IC({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:c}));return}var u=qCe(r),d=u==="left-to-right"?1:-1,f=a==="ArrowRight"?1:-1,h=i+f*d;if(!(o==null||h>=o.length||h<0)){var g=T_(r,"axis","hover",String(h));t.dispatch(IC({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:g}))}}}}});f9.startListening({actionCreator:rJ,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var a="0",i=T_(r,"axis","hover",String(a));t.dispatch(IC({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:i}))}}}});var fc=jc("externalEvent"),nJ=R2();nJ.startListening({actionCreator:fc,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:LTe(r),activeDataKey:RTe(r),activeIndex:r2(r),activeLabel:uX(r),activeTooltipIndex:r2(r),isTooltipActive:BTe(r)};e.payload.handler(n,e.payload.reactEvent)}}});var VAe=It([$1],e=>e.tooltipItemPayloads),qAe=It([VAe,V2,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(o=>o.settings.dataKey===n);if(s!=null){var{positions:a}=s;if(a!=null){var i=t(a,r);return i}}}),sJ=jc("touchMove"),aJ=R2();aJ.startListening({actionCreator:sJ,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=qN(n,n.tooltip.settings.shared);if(s==="axis"){var a=u9(n,d9({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));a?.activeIndex!=null&&t.dispatch(eX({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(s==="item"){var i,o=r.touches[0],c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(T3e),d=(i=c.getAttribute(E3e))!==null&&i!==void 0?i:void 0,f=qAe(t.getState(),u,d);t.dispatch(eTe({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var KAe=vq({brush:ONe,cartesianAxis:gNe,chartData:p7e,errorBars:CNe,graphicalItems:sNe,layout:QSe,legend:z3e,options:d7e,polarAxis:GEe,polarOptions:GAe,referenceElements:UNe,rootProps:WAe,tooltip:rTe}),YAe=function(t){return SSe({reducer:KAe,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([JX.middleware,QX.middleware,f9.middleware,nJ.middleware,aJ.middleware]),devTools:M1.devToolsEnabled})};function XAe(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=Oc(),a=_.useRef(null);if(s)return r;a.current==null&&(a.current=YAe(t));var i=QE;return _.createElement(UAe,{context:i,store:a.current},r)}function JAe(e){var{layout:t,width:r,height:n,margin:s}=e,a=Jo(),i=Oc();return _.useEffect(()=>{i||(a(YSe(t)),a(XSe({width:r,height:n})),a(KSe(s)))},[a,i,t,r,n,s]),null}function QAe(e){var t=Jo();return _.useEffect(()=>{t(HAe(e))},[t,e]),null}var ZAe=["children"];function eje(e,t){if(e==null)return{};var r,n,s=tje(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function tje(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function F_(){return F_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F_.apply(null,arguments)}var rje={width:"100%",height:"100%"},nje=_.forwardRef((e,t)=>{var r=Yq(),n=Xq(),s=Qq();if(!u_(r)||!u_(n))return null;var{children:a,otherAttributes:i,title:o,desc:c}=e,u,d;return typeof i.tabIndex=="number"?u=i.tabIndex:u=s?0:void 0,typeof i.role=="string"?d=i.role:d=s?"application":void 0,_.createElement(GV,F_({},i,{title:o,desc:c,role:d,tabIndex:u,width:r,height:n,style:rje,ref:t}),a)}),sje=e=>{var{children:t}=e,r=Jr(OS);if(!r)return null;var{width:n,height:s,y:a,x:i}=r;return _.createElement(GV,{width:n,height:s,x:i,y:a},t)},ZL=_.forwardRef((e,t)=>{var{children:r}=e,n=eje(e,ZAe),s=Oc();return s?_.createElement(sje,null,r):_.createElement(nje,F_({ref:t},n),r)});function aje(){var e=Jo(),[t,r]=_.useState(null),n=Jr(C3e);return _.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),a=s.width/t.offsetWidth;mu(a)&&a!==n&&e(JSe(a))}},[t,e,n]),r}function eB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ije(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eB(Object(r),!0).forEach(function(n){oje(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oje(e,t,r){return(t=lje(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lje(e){var t=cje(e,"string");return typeof t=="symbol"?t:t+""}function cje(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uje=_.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:a,onContextMenu:i,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:g,onTouchMove:p,onTouchStart:y,style:v,width:C}=e,S=Jo(),[w,T]=_.useState(null),[N,A]=_.useState(null);C7e();var P=aje(),j=_.useCallback(D=>{P(D),typeof t=="function"&&t(D),T(D),A(D)},[P,t,T,A]),F=_.useCallback(D=>{S(XX(D)),S(fc({handler:a,reactEvent:D}))},[S,a]),R=_.useCallback(D=>{S(GC(D)),S(fc({handler:u,reactEvent:D}))},[S,u]),L=_.useCallback(D=>{S(ZY()),S(fc({handler:d,reactEvent:D}))},[S,d]),V=_.useCallback(D=>{S(GC(D)),S(fc({handler:f,reactEvent:D}))},[S,f]),Z=_.useCallback(()=>{S(rJ())},[S]),Y=_.useCallback(D=>{S(tJ(D.key))},[S]),re=_.useCallback(D=>{S(fc({handler:i,reactEvent:D}))},[S,i]),ue=_.useCallback(D=>{S(fc({handler:o,reactEvent:D}))},[S,o]),z=_.useCallback(D=>{S(fc({handler:c,reactEvent:D}))},[S,c]),X=_.useCallback(D=>{S(fc({handler:h,reactEvent:D}))},[S,h]),I=_.useCallback(D=>{S(fc({handler:y,reactEvent:D}))},[S,y]),B=_.useCallback(D=>{S(sJ(D)),S(fc({handler:p,reactEvent:D}))},[S,p]),W=_.useCallback(D=>{S(fc({handler:g,reactEvent:D}))},[S,g]);return _.createElement(pX.Provider,{value:w},_.createElement($4e.Provider,{value:N},_.createElement("div",{className:Rs("recharts-wrapper",n),style:ije({position:"relative",cursor:"default",width:C,height:s},v),onClick:F,onContextMenu:re,onDoubleClick:ue,onFocus:Z,onKeyDown:Y,onMouseDown:z,onMouseEnter:R,onMouseLeave:L,onMouseMove:V,onMouseUp:X,onTouchEnd:W,onTouchMove:B,onTouchStart:I,ref:j},r)))}),dje=["children","className","width","height","style","compact","title","desc"];function fje(e,t){if(e==null)return{};var r,n,s=hje(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function hje(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mje=_.forwardRef((e,t)=>{var{children:r,className:n,width:s,height:a,style:i,compact:o,title:c,desc:u}=e,d=fje(e,dje),f=og(d);return o?_.createElement(ZL,{otherAttributes:f,title:c,desc:u},r):_.createElement(uje,{className:n,style:i,width:s,height:a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},_.createElement(ZL,{otherAttributes:f,title:c,desc:u,ref:t},_.createElement(WNe,null,r)))}),gje=["width","height"];function VC(){return VC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},VC.apply(null,arguments)}function pje(e,t){if(e==null)return{};var r,n,s=xje(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function xje(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var yje={top:5,right:5,bottom:5,left:5},vje={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:yje,reverseStackOrder:!1,syncMethod:"index"},bje=_.forwardRef(function(t,r){var n,s=Dc(t.categoricalChartProps,vje),{width:a,height:i}=s,o=pje(s,gje);if(!u_(a)||!u_(i))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,g={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return _.createElement(XAe,{preloadedState:{options:g},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:c},_.createElement(MNe,{chartData:h.data}),_.createElement(JAe,{width:a,height:i,layout:s.layout,margin:s.margin}),_.createElement(QAe,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),_.createElement(mje,VC({},o,{width:a,height:i,ref:r})))}),wje=["axis"],_je=_.forwardRef((e,t)=>_.createElement(bje,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:wje,tooltipPayloadSearcher:c7e,categoricalChartProps:e,ref:t}));const Sje=({data:e=[],loading:t=!1,error:r=null})=>{if(t)return l.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:l.jsx("div",{className:"spinner-border text-primary",role:"status",children:l.jsx("span",{className:"visually-hidden",children:"Loading..."})})});if(r)return l.jsxs("div",{className:"alert alert-danger",role:"alert",children:[l.jsx("h5",{className:"alert-heading",children:"Error Loading Performance Data"}),l.jsx("p",{children:r})]});if(!e||e.length===0)return l.jsx("div",{className:"text-center text-muted",style:{height:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsxs("div",{children:[l.jsx("h5",{children:"No Test Data Available"}),l.jsx("p",{children:"No tests have been completed yet for the current term."})]})});const n=e.map(s=>({testName:s.test_name,testDate:s.submitted_at,averageScore:parseFloat(s.average_score),totalStudents:s.total_students,testId:s.test_id}));return l.jsxs("div",{className:"test-performance-graph",children:[l.jsx("div",{style:{width:"100%",height:"400px"},children:l.jsx(W7e,{children:l.jsxs(_je,{data:n,margin:{top:20,right:30,left:20,bottom:20},children:[l.jsx($X,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),l.jsx(KX,{dataKey:"testDate",tickFormatter:s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"}),stroke:"#666",fontSize:12}),l.jsx(YX,{domain:[0,100],tickFormatter:s=>`${s}%`,stroke:"#666",fontSize:12}),l.jsx(M7e,{formatter:(s,a)=>[`${parseFloat(s).toFixed(1)}%`,"Average Score"],labelFormatter:s=>{const a=n.find(i=>i.testDate===s);if(a){const i=new Date(s);return`${a.testName} (${i.toLocaleDateString("en-US",{month:"long",day:"numeric"})})`}return s},contentStyle:{backgroundColor:"#fff",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),l.jsx(qX,{type:"monotone",dataKey:"averageScore",stroke:"#007bff",strokeWidth:3,connectNulls:!0,dot:{r:6,fill:"#007bff",stroke:"#fff",strokeWidth:2},activeDot:{r:8,fill:"#ff6b35",stroke:"#fff",strokeWidth:2}})]})})}),l.jsx("div",{className:"mt-3",children:l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-3",children:l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"text-muted",children:"Total Tests: "}),l.jsx("strong",{children:n.length})]})}),l.jsx("div",{className:"col-md-3",children:l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"text-muted",children:"Average Score: "}),l.jsx("strong",{children:n.length>0?(()=>{const s=n.filter(i=>i.averageScore!==null&&i.averageScore!==void 0&&!isNaN(i.averageScore));return s.length===0?"N/A":`${(s.reduce((i,o)=>i+o.averageScore,0)/s.length).toFixed(1)}%`})():"N/A"})]})}),l.jsx("div",{className:"col-md-3",children:l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"text-muted",children:"Best Test: "}),l.jsx("strong",{children:n.length>0?(()=>{const s=n.filter(a=>a.averageScore!==null&&a.averageScore!==void 0&&!isNaN(a.averageScore));return s.length===0?"N/A":s.reduce((a,i)=>i.averageScore>a.averageScore?i:a).testName})():"N/A"})]})}),l.jsx("div",{className:"col-md-3",children:l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"text-muted",children:"Latest Test: "}),l.jsx("strong",{children:n.length>0?n[n.length-1].testName:"N/A"})]})})]})})]})},tB=({onBackToLogin:e})=>{const t=Ko(),{user:r,isAuthenticated:n,logout:s,getCurrentTeacherUsername:a}=Is(),{teacherData:i,loadTeacherData:o}=dS(),{activeTests:c,loadActiveTests:u}=C2(),{showNotification:d,notifications:f,removeNotification:h}=ci(),[g,p]=_.useState(!0),[y,v]=_.useState(""),[C,S]=_.useState("main"),[w,T]=_.useState([]),[N,A]=_.useState([]),[P,j]=_.useState(null),[F,R]=_.useState(null),[L,V]=_.useState(null),[Z,Y]=_.useState(!1),[re,ue]=_.useState(!1),[z,X]=_.useState(null),[I,B]=_.useState([]),[W,D]=_.useState(null),[U,q]=_.useState(!1),[H,te]=_.useState(!1),[Q,ae]=_.useState(null),[ce,me]=_.useState(!1),[xe,se]=_.useState(null),[De,He]=_.useState(null),[rt,_t]=_.useState([]),[Ke,tt]=_.useState(!1),[Pe,je]=_.useState(null),[Qe,vt]=_.useState([]),[Ot,$t]=_.useState(!1),[Gt,ir]=_.useState(null),[dt,gt]=_.useState(null),[kt,Ge]=_.useState(!1),[Xe,Et]=_.useState(!1),[Ut,Wt]=_.useState(0),[pr,wr]=_.useState(!1),[br,lr]=_.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[Er,we]=_.useState([]),[_e,Ee]=_.useState([]),[Fe,at]=_.useState(!1),[jt,Mt]=_.useState(!1),[Be,lt]=_.useState(null),[ct,Qt]=_.useState([]),[rr,_r]=_.useState(!1),[tn,Fr]=_.useState("subject");_.useEffect(()=>{ze()},[]),_.useEffect(()=>{const $e=Pt=>{kt&&!Pt.target.closest(".relative")&&Ge(!1),Xe&&!Pt.target.closest(".relative")&&Et(!1)};return document.addEventListener("mousedown",$e),()=>{document.removeEventListener("mousedown",$e)}},[kt,Xe]);const an=_.useCallback(()=>{ke.debug(" showChangePasswordTab called"),wr(!0),Ge(!1),Et(!1)},[]),pe=_.useCallback(()=>{ke.debug(" hideChangePasswordTab called"),wr(!1),lr({currentPassword:"",newPassword:"",confirmPassword:""})},[]),Ne=_.useCallback(async()=>{if(!r)return;const{currentPassword:$e,newPassword:Pt,confirmPassword:Re}=br;if(!$e||!Pt||!Re){d("Please fill in all fields","error");return}if(Pt!==Re){d("New passwords do not match","error");return}if(Pt.length<6){d("New password must be at least 6 characters long","error");return}const qe=/[a-zA-Z]/.test(Pt),Lt=/[0-9]/.test(Pt);if(!qe||!Lt){d("New password must contain both letters and numbers","error");return}try{const yt=await Us.changePassword({username:r.username,currentPassword:$e,newPassword:Pt});yt.success?(d("Password changed successfully!","success"),pe()):d(yt.message||"Failed to change password","error")}catch(yt){ke.error("Password change error:",yt),d("Failed to change password. Please try again.","error")}},[r,br,d]),le=_.useCallback($e=>{const{name:Pt,value:Re}=$e.target;lr(qe=>({...qe,[Pt]:Re}))},[]),fe=_.useCallback(async()=>{ke.debug(" Loading teacher data...");try{const $e=await Us.getTeacherData();return ke.debug(" Teacher data loaded:",$e),He(new Date),$e}catch($e){throw ke.error(" Error loading teacher data:",$e),$e}},[]),ge=_.useCallback(async($e=null)=>{ke.debug(" Loading teacher subjects...");try{if(!$e){const qe=`teacher_subjects_${r?.teacher_id||r?.id||""}`,Lt=Es(qe);if(Lt)return ke.debug(" Using cached teacher subjects"),T(Lt),Lt}let Pt=$e,Re;if($e?(ke.debug(" Using passed teacher data for subjects"),Re=Us.getTeacherSubjects($e.subjects)):(ke.debug(" No teacher data passed, fetching from API"),Pt=await Us.getTeacherData(),ke.debug(" Raw teacher data:",Pt),Re=Us.getTeacherSubjects(Pt.subjects)),ke.debug(" Teacher subjects loaded:",Re),T(Re),!$e){const qe=`teacher_subjects_${r?.teacher_id||r?.id||""}`;gs(qe,Re,ls.teacher_subjects)}return ke.debug(" Available classes for performance chart:",Re[0]?.classes||[]),ke.debug(" Performance chart will load when user clicks on a class"),Re}catch(Pt){throw ke.error(" Error loading teacher subjects:",Pt),Pt}},[r?.teacher_id,r?.id]),Se=_.useCallback(async()=>{ke.debug(" Loading teacher active tests...");try{const $e=`teacher_tests_${r?.teacher_id||r?.id||""}`,Pt=Es($e);Pt&&Pt.some(Lt=>Lt.test_type==="drawing")&&(ke.debug(" Drawing test detected - forcing cache refresh"),localStorage.removeItem($e));const Re=Es($e);if(Re)return ke.debug(" Using cached teacher tests"),A(Re),Re;const qe=await Cn.getTeacherTests();return ke.debug(" Teacher tests loaded:",qe),A(qe),gs($e,qe,ls.teacher_tests),qe}catch($e){throw ke.error(" Error loading teacher tests:",$e),$e}},[r?.teacher_id,r?.id]),ze=_.useCallback(async()=>{ke.debug(" Initializing Teacher Cabinet...");try{if(p(!0),v(""),!n||!r){ke.debug(" User not authenticated"),v("User not authenticated");return}if(r.role!==$o.TEACHER){ke.error(" Invalid user role for teacher cabinet:",r.role),v("Access denied. Teacher role required.");return}ke.debug(" Loading teacher data...");const $e=await fe();ke.debug(" Loading subjects and tests in parallel...");const[Pt,Re]=await Promise.allSettled([ge($e),Se()]);let qe=!1;Pt.status==="rejected"&&(ke.warn(" Subjects loading failed:",Pt.reason),qe=!0),Re.status==="rejected"&&(ke.warn(" Tests loading failed:",Re.reason),qe=!0),qe&&d("Some data failed to load, but you can continue","warning"),ke.debug(" Teacher Cabinet initialization complete!")}catch($e){ke.error(" Error initializing teacher cabinet:",$e),v("Failed to initialize teacher cabinet")}finally{p(!1)}},[n,r,fe,ge,Se,d]),it=_.useCallback(()=>{ke.debug(" Showing subject selection prompt..."),Y(!0),Ye(),Fr("subject")},[]),Ye=_.useCallback(async()=>{ke.debug(" Loading available subjects..."),at(!0);try{const $e=await Us.getSubjectsForSelection();we($e),ke.debug(" Available subjects loaded:",$e)}catch($e){ke.error(" Error loading available subjects:",$e),d("Failed to load subjects","error")}finally{at(!1)}},[]),de=_.useCallback($e=>{if(!$e){lt(null);return}const Pt=Er.find(Re=>Re.subject_id==$e);Pt&&(lt(Pt),Qt([]),Fr("classes"))},[Er]),ve=_.useCallback(($e,Pt)=>{Qt(Re=>Re.some(qe=>qe.grade===$e&&qe.class===Pt)?Re.filter(qe=>!(qe.grade===$e&&qe.class===Pt)):[...Re,{grade:$e,class:Pt}])},[]),Me=_.useCallback(()=>{if(!Be||ct.length===0){d("Please select at least one class","warning");return}const $e={subject_id:parseInt(Be.subject_id),subject_name:Be.subject,classes:ct};Ee(Pt=>[...Pt,$e]),lt(null),Qt([]),Fr("subject"),d(`Added ${Be.subject} with ${ct.length} classes`,"success")},[Be,ct]),Oe=_.useCallback($e=>{Ee(Pt=>Pt.filter((Re,qe)=>qe!==$e))},[]),nt=_.useCallback(async($e,Pt,Re)=>{ke.debug(" Deleting teacher subject:",{subjectId:$e,grade:Pt,classNumber:Re});try{const qe={subjectId:$e,grade:Pt,class:Re};ke.debug(" Sending delete request with data:",qe);const Lt=await Us.deleteTeacherSubject(qe);if(Lt.success)d("Subject assignment deleted successfully!","success"),await ge();else throw new Error(Lt.error||"Failed to delete subject assignment")}catch(qe){ke.error(" Error deleting subject assignment:",qe),d("Error deleting subject assignment. Please try again.","error")}},[ge,d]),bt=_.useCallback(($e,Pt,Re,qe)=>{se({subjectId:$e,subjectName:Pt,grade:Re,classNumber:qe}),me(!0)},[]),At=_.useCallback(async()=>{xe&&(await nt(xe.subjectId,xe.grade,xe.classNumber),me(!1),se(null))},[xe,nt]),cr=_.useCallback(()=>{me(!1),se(null)},[]),pt=_.useCallback(async()=>{if(_e.length===0){d("Please select at least one subject","warning");return}Mt(!0);try{const $e=await Us.saveTeacherSubjects(_e);if($e.success)d("Subjects saved successfully!","success"),Y(!1),Ee([]),Fr("subject"),await ge();else throw new Error($e.error||"Failed to save subjects")}catch($e){ke.error(" Error saving teacher subjects:",$e),d("Failed to save subjects","error")}finally{Mt(!1)}},[_e,ge]);_.useCallback(async $e=>{ke.debug(" Saving teacher subjects:",$e);try{const Pt=await Us.saveTeacherSubjects($e);if(Pt.success)d("Subjects saved successfully!","success"),await ge(),Y(!1);else throw new Error(Pt.error||"Failed to save subjects")}catch(Pt){ke.error(" Error saving teacher subjects:",Pt),d("Failed to save subjects","error")}},[ge]);const zt=_.useCallback(()=>{ke.debug(" Showing active tests..."),S("tests")},[]),xr=_.useCallback(async $e=>{ke.debug(" Showing test details:",$e);const Pt=N?.find(yr=>yr.test_type===$e.test_type&&yr.test_id===$e.test_id)||{},Re=Pt.assignments||$e.assignments||[],qe=Re.some(yr=>yr.is_active),Lt=$e.selectedAssignmentId||$e.assignment_id||null,yt={...Pt,...$e,assignments:Re,selectedAssignmentId:Lt,hasActiveAssignment:qe};X(yt),ue(!0),B([]),D(null),q(!0);try{if(["input","true_false","multiple_choice","word_matching","fill_blanks"].includes($e.test_type)){const yr=await Cn.getTestQuestionsWithInfo($e.test_type,$e.test_id);B(yr.questions||[]),D(yr.testInfo||null),ke.debug(" Test questions and info loaded:",{questionsCount:yr.questions?.length||0,testInfo:yr.testInfo})}}catch(yr){console.error("Error loading test questions:",yr),d("Error loading test questions. Please try again.","error")}finally{q(!1)}},[N,d]);_.useCallback(async($e,Pt,Re)=>{ke.debug(" Removing class assignment:",$e,Pt,Re);try{const qe=await Cn.removeClassAssignment($e,Pt,Re);if(qe.success)d("Assignment removed successfully!","success"),await Se();else throw new Error(qe.error||"Failed to remove assignment")}catch(qe){ke.error(" Error removing class assignment:",qe),d("Failed to remove assignment","error")}},[Se]);const Ir=_.useCallback(async $e=>{ke.debug(" Marking assignment as completed:",$e),je($e);try{const Pt=await Cn.markAssignmentCompleted($e);if(Pt.success){A(qe=>qe.map(Lt=>({...Lt,assignments:Lt.assignments?.map(yt=>yt.assignment_id===$e?{...yt,is_active:!1}:yt)||[]}))),d("Test assignment marked as completed!","success");const Re=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(Re),ke.debug(" Cleared teacher tests cache"),Se().catch(qe=>{ke.error(" Error refreshing tests after completion:",qe)})}else throw new Error(Pt.error||"Failed to mark assignment as completed")}catch(Pt){ke.error(" Error marking assignment as completed:",Pt),d("Failed to mark assignment as completed","error")}finally{je(null)}},[Se,d,r?.teacher_id,r?.id]),$r=_.useCallback(async()=>{ke.debug(" Refreshing active tests data...");try{const $e=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem($e),ke.debug(" Cache cleared, forcing fresh API call"),ke.debug(" Making direct API call to get-teacher-active-tests with noCache");const Pt=await Cn.getTeacherTests(!0);ke.debug(" Direct API call returned:",Pt),A(Pt),ke.debug(" activeTestsData state updated:",Pt),d(`Tests refreshed successfully! Found ${Pt?.length||0} tests.`,"success")}catch($e){ke.error(" Error refreshing tests:",$e),d("Failed to refresh tests","error")}},[d,r?.teacher_id,r?.id]),[mn,Gr]=_.useState(null),zr=_.useCallback(async $e=>{ke.debug(" Activating assignment:",$e),Gr($e);try{const Pt=await Cn.activateAssignment($e);if(!Pt.success)throw new Error(Pt.error||"Failed to activate assignment");let Re=null;A(Lt=>{const yt=Lt.map(yr=>({...yr,assignments:yr.assignments?.map(Nt=>Nt.assignment_id===$e?{...Nt,is_active:!0}:Nt)||[]}));return Re=yt,yt}),Re&&X(Lt=>{if(!Lt)return Lt;const yt=Re.find(Vr=>Vr.test_id===Lt.test_id&&Vr.test_type===Lt.test_type);if(!yt)return Lt;const yr=yt.assignments||Lt.assignments||[],Nt=yr.some(Vr=>Vr.is_active);return{...Lt,...yt,assignments:yr,hasActiveAssignment:Nt}}),d("Test assignment activated! Students can now see this test.","success");const qe=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(qe),ke.debug(" Cleared teacher tests cache"),$r().catch(Lt=>{ke.error(" Error performing hard refresh after activation:",Lt)})}catch(Pt){ke.error(" Error activating assignment:",Pt),d("Failed to activate assignment","error")}finally{Gr(null)}},[$r,d,r?.teacher_id,r?.id]),Xt=_.useMemo(()=>!N||N.length===0?[]:N.flatMap($e=>{if(!$e.assignments||$e.assignments.length===0)return[];const Pt=$e.assignments.some(Re=>Re.is_active);return $e.assignments.map(Re=>({test_id:$e.test_id,test_type:$e.test_type,test_name:$e.test_name,num_questions:$e.num_questions,created_at:$e.created_at,subject_id:$e.subject_id,subject:$e.subject,teacher_id:$e.teacher_id,assignments:$e.assignments,has_active_assignment:Pt,assignment_id:Re.assignment_id,grade:Re.grade,class:Re.class,is_active:Re.is_active,assigned_at:Re.assigned_at,days_remaining:Re.days_remaining}))}),[N]),xn=_.useCallback(async($e=null)=>{if(r?.teacher_id){$t(!0),ir(null);try{ke.debug(" Loading test performance data for class:",$e);const Pt=await w4e.getTestPerformance(r.teacher_id,$e);vt(Pt),ke.debug(" Test performance data loaded:",Pt.length,"tests")}catch(Pt){ke.error(" Error loading test performance data:",Pt),ir(Pt.message)}finally{$t(!1)}}},[r?.teacher_id]);_.useCallback(($e,Pt)=>{ke.debug(" Showing class results:",$e,Pt),ke.debug(" Class click - grade:",$e,"className:",Pt),R($e),V(Pt),S("results");const Re=`${$e}/${Pt}`;ke.debug(" Loading performance data for clicked class:",Re),gt(Re),xn(Re)},[xn]);const[Lr,jn]=_.useState([]),[Ln,ya]=_.useState([]),On=_.useCallback(async()=>{try{const Pt=await(await ni(()=>import("./retestService-C6b0YDiD.js"),[])).retestService.getRetestAssignments(r.teacher_id);jn(Pt)}catch($e){ke.warn("Failed to load retests",$e)}},[r]);_.useCallback(async $e=>{try{const Re=await(await ni(()=>import("./retestService-C6b0YDiD.js"),[])).retestService.getRetestTargets($e);ya(Re)}catch(Pt){ke.warn("Failed to load retest targets",Pt)}},[]);const[Te,Tt]=_.useState(!1),[Sr,Dr]=_.useState(!1);_.useEffect(()=>{ke.debug("[TeacherCabinet] showRetestModal state changed:",Te)},[Te]);const[Yn,Pn]=_.useState({test_type:"",original_test_id:"",subject_id:"",passing_threshold:50,scoring_policy:"BEST",max_attempts:1,window_days:2,student_ids:[]}),us=_.useCallback(async $e=>{ke.debug("[TeacherCabinet] openRetestModal called with:",$e);const{test_type:Pt,original_test_id:Re,subject_id:qe,failedStudentIds:Lt=[],grade:yt,class:yr}=$e||{};Pn({test_type:Pt||"multiple_choice",original_test_id:Re||"",subject_id:qe||"",passing_threshold:50,scoring_policy:"BEST",max_attempts:1,window_days:2,student_ids:Lt}),yt!==void 0&&R(yt),yr!==void 0&&V(yr),ke.debug("[TeacherCabinet] Setting showRetestModal to true"),Tt(!0)},[]),qs=_.useCallback(async()=>{Dr(!0);try{const $e=await ni(()=>import("./retestService-C6b0YDiD.js"),[]),Pt=new Date,Re=new Date(Pt.getTime()+Yn.window_days*24*60*60*1e3),qe={...Yn,teacher_id:r.teacher_id,grade:F,class:L,window_start:Pt.toISOString(),window_end:Re.toISOString()};ke.debug("[Retest][TeacherCabinet] Prepared payload:",JSON.stringify(qe)),ke.debug("[Retest][TeacherCabinet] Selected students count:",(qe.student_ids||[]).length,"IDs:",qe.student_ids),await $e.retestService.createRetestAssignment(qe),d("Retest created","success"),Tt(!1),On(),Wt(Lt=>Lt+1)}catch($e){ke.error("Create retest error",$e),d($e.message||"Failed to create retest","error")}finally{Dr(!1)}},[Yn,F,L,On]);if(g)return l.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[l.jsxs("div",{className:"text-center",children:[l.jsx(un,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Cabinet..."})]}),l.jsx("div",{className:"flex flex-wrap gap-2"})]});if(y)return l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Cabinet Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:y}),l.jsx(ot,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})});return l.jsxs(ht.div,{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[l.jsx(ht.div,{className:"bg-gradient-to-r from-sky-400 to-sky-600 text-white shadow-lg",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-6",children:[l.jsxs(ht.div,{className:"flex-1 text-center",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-white mb-2",children:"Teacher Cabinet"}),l.jsxs("p",{className:"text-sky-100 text-sm sm:text-base md:text-lg",children:["Welcome, Teacher ",a()||""]})]}),l.jsxs(ht.div,{className:"relative",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[l.jsx("div",{className:"hidden md:block",children:l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>Ge(!kt),className:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border border-white/20 text-white hover:bg-white/20 px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50",children:[l.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm font-medium",children:"Menu"}),l.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 transition-transform duration-200",style:{transform:kt?"rotate(180deg)":"rotate(0deg)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),kt&&l.jsxs(ht.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[l.jsxs("button",{onClick:()=>{Ge(!1),an()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),l.jsx("span",{children:"Change Password"})]}),l.jsxs("button",{onClick:()=>{Ge(!1),e?e():s()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),l.jsx("span",{children:"Logout"})]})]})]})}),l.jsxs("div",{className:"md:hidden",children:[l.jsx("button",{onClick:()=>Et(!Xe),className:"flex items-center justify-center w-10 h-10 bg-white/10 border border-white/20 text-white hover:bg-white/20 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),Xe&&l.jsxs(ht.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[l.jsxs("div",{className:"px-4 py-2 border-b border-gray-200",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:a()||"Teacher"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Teacher Account"})]}),l.jsxs("button",{onClick:()=>{Et(!1),an()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),l.jsx("span",{children:"Change Password"})]}),l.jsxs("button",{onClick:()=>{Et(!1),e?e():s()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),l.jsx("span",{children:"Logout"})]})]})]})]})]})})}),l.jsx(ht.div,{className:"bg-white border-b shadow-sm",initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.5},children:l.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:l.jsx("nav",{className:"flex space-x-1 sm:space-x-8 overflow-x-auto",children:[{key:"main",label:"Main Dashboard",shortLabel:"Dashboard"},{key:"tests",label:"Test Management",shortLabel:"Tests"},{key:"results",label:"Class Results",shortLabel:"Results"},{key:"subjects",label:"Subject Management",shortLabel:"Subjects"}].map(($e,Pt)=>l.jsxs(ht.button,{onClick:()=>$e.key==="tests"?zt():S($e.key),className:`py-2 sm:py-4 px-2 sm:px-1 border-b-2 font-medium text-xs sm:text-sm transition-colors duration-200 whitespace-nowrap flex-shrink-0 flex-1 sm:flex-none ${C===$e.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5+Pt*.1,duration:.3},whileHover:{scale:1.05},whileTap:{scale:.95},children:[l.jsx("span",{className:"sm:hidden",children:$e.shortLabel}),l.jsx("span",{className:"hidden sm:inline",children:$e.label})]},$e.key))})})}),l.jsx(ht.div,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.5},children:l.jsxs(Uo,{mode:"wait",children:[C==="main"&&l.jsx(ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:fi()},"main"),C==="subjects"&&l.jsx(ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:dn()},"subjects"),C==="tests"&&l.jsx(ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:vl()},"tests"),C==="results"&&l.jsx(ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:l.jsx(IV,{selectedGrade:F,selectedClass:L,onBackToCabinet:()=>S("main"),openRetestModal:us,forceRefreshOnMount:Ut>0},Ut)},"results")]})}),Z&&l.jsx(Aa,{isOpen:Z,onClose:()=>{Y(!1),Fr("subject"),Ee([]),lt(null),Qt([])},title:"Select Subjects and Classes",size:"large",children:l.jsxs("div",{className:"space-y-6 px-4 max-h-[80vh] overflow-y-auto",children:[tn==="subject"&&l.jsxs(ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Step 1: Select Subject"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Choose the subject you want to teach:"}),Fe?l.jsxs("div",{className:"flex items-center justify-center py-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),l.jsx("span",{className:"ml-2 text-gray-600",children:"Loading subjects..."})]}):l.jsxs("select",{value:Be?.subject_id||"",onChange:$e=>de($e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"Select a subject"}),Er.map($e=>l.jsx("option",{value:$e.subject_id,children:$e.subject},$e.subject_id))]})]}),l.jsxs("div",{className:"flex justify-end space-x-3",children:[l.jsx(ot,{variant:"outline",onClick:()=>Y(!1),children:"Cancel"}),l.jsx(ot,{variant:"primary",onClick:()=>Fr("classes"),disabled:!Be,children:"Next: Select Classes"})]})]}),tn==="classes"&&Be&&l.jsxs(ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Step 2: Select Classes for ",Be.subject]}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Choose the classes you teach for this subject:"}),l.jsx("div",{className:"max-h-80 overflow-y-auto border border-gray-200 rounded-lg p-4",children:l.jsx("div",{className:"grid grid-cols-3 gap-3",children:[1,2,3,4,5,6,7].map($e=>{let Pt;return $e===1||$e===2||$e===3?Pt=[15,16]:$e===4||$e===5||$e===6?Pt=[13,14]:$e===7?Pt=[69,70]:Pt=[],l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h4",{className:"font-medium text-gray-700 text-sm",children:["Grade ",$e]}),l.jsx("div",{className:"space-y-1",children:Pt.map(Re=>l.jsxs("label",{className:"flex items-center space-x-2 py-1",children:[l.jsx("input",{type:"checkbox",checked:ct.some(qe=>qe.grade===$e.toString()&&qe.class===Re.toString()),onChange:()=>ve($e.toString(),Re.toString()),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),l.jsxs("span",{className:"text-xs text-gray-700",children:["Class ",Re]})]},Re))})]},$e)})})})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx(ot,{variant:"outline",onClick:()=>Fr("subject"),children:"Back to Subjects"}),l.jsxs("div",{className:"space-x-3",children:[l.jsx(ot,{variant:"outline",onClick:()=>Y(!1),children:"Cancel"}),l.jsx(ot,{variant:"primary",onClick:Me,disabled:ct.length===0,children:"Add Subject"})]})]})]}),_e.length>0&&l.jsxs(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Selected Subjects"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Review your selected subjects and classes:"}),l.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:_e.map(($e,Pt)=>l.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-900",children:$e.subject_name}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Classes: ",$e.classes.map(Re=>`Grade ${Re.grade} Class ${Re.class}`).join(", ")]})]}),l.jsx("button",{onClick:()=>Oe(Pt),className:"text-red-600 hover:text-red-800 p-1",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},Pt))})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx(ot,{variant:"outline",onClick:()=>Fr("subject"),children:"Add More Subjects"}),l.jsxs("div",{className:"space-x-3",children:[l.jsx(ot,{variant:"outline",onClick:()=>Y(!1),children:"Cancel"}),l.jsx(ot,{variant:"primary",onClick:pt,disabled:jt,className:"relative",children:jt?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save All Subjects"})]})]})]})]})}),Te&&l.jsxs(Aa,{isOpen:Te,onClose:()=>Tt(!1),title:"Create Retest",size:"medium",children:[l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Retest Window"}),l.jsxs("select",{className:"w-full border rounded px-3 py-2 text-sm",value:Yn.window_days,onChange:$e=>Pn(Pt=>({...Pt,window_days:Number($e.target.value)})),children:[l.jsx("option",{value:1,children:"1 day"}),l.jsx("option",{value:2,children:"2 days"}),l.jsx("option",{value:3,children:"3 days"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Attempts"}),l.jsxs("select",{className:"w-full border rounded px-3 py-2 text-sm",value:Yn.max_attempts,onChange:$e=>Pn(Pt=>({...Pt,max_attempts:Number($e.target.value)})),children:[l.jsx("option",{value:1,children:"1 attempt"}),l.jsx("option",{value:2,children:"2 attempts"}),l.jsx("option",{value:3,children:"3 attempts"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Students can retry immediately if they fail"})]})]})}),l.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[l.jsx("button",{onClick:()=>Tt(!1),disabled:Sr,className:"px-4 py-2 text-sm rounded border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),l.jsx("button",{onClick:qs,disabled:Sr,className:"px-4 py-2 text-sm rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Sr?l.jsxs(l.Fragment,{children:[l.jsx(un,{size:"sm"}),"Creating Retest..."]}):"Create Retest"})]})]}),re&&z&&l.jsx(rE,{isOpen:re,onClose:()=>ue(!1),testType:z.test_type,testId:z.test_id,testName:z.test_name,questions:I,isLoading:U,canEdit:!z.hasActiveAssignment,canEditSettings:!z.hasActiveAssignment,subject:z.subject,createdAt:z.created_at,assignments:z.assignments||[],testInfo:W,onSave:async($e,Pt,Re)=>{try{await Cn.updateTestQuestions($e,Pt,Re),d("Questions updated successfully!","success");const qe=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(qe),await xr(z)}catch(qe){throw console.error("Error saving questions:",qe),d("Failed to update questions","error"),qe}},onSettingsSave:async $e=>{try{await Cn.updateTestSettings(z.test_type,z.test_id,$e),d("Settings updated successfully!","success"),await xr(z)}catch(Pt){throw d("Failed to update settings","error"),Pt}}}),ce&&xe&&l.jsx(Aa,{isOpen:ce,onClose:cr,title:"Delete Subject Assignment",size:"small",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:l.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Delete Subject Assignment"}),l.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Are you sure you want to delete the assignment for"," ",l.jsx("span",{className:"font-semibold text-gray-900",children:xe.subjectName})," ","in Grade ",xe.grade,", Class ",xe.classNumber,"?"]}),l.jsx("p",{className:"text-xs text-red-600",children:"This action cannot be undone."})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx(ot,{variant:"outline",onClick:cr,children:"Cancel"}),l.jsx(ot,{variant:"danger",onClick:At,children:"Delete Assignment"})]})]})}),l.jsx(ht.div,{className:"fixed top-4 right-4 space-y-2 z-50",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.8,duration:.5},children:f.map($e=>l.jsx(ht.div,{initial:{opacity:0,y:-20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9},transition:{duration:.3},children:l.jsx("div",{className:`p-4 rounded-lg shadow-lg ${$e.type==="success"?"bg-green-600 text-white":$e.type==="error"?"bg-red-600 text-white":$e.type==="warning"?"bg-yellow-600 text-white":"bg-blue-600 text-white"}`,children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{children:$e.message}),l.jsx("button",{onClick:()=>h($e.id),className:"ml-4 text-white hover:text-gray-200",children:""})]})})},$e.id))}),pr&&l.jsx(Aa,{isOpen:pr,onClose:pe,title:"Change Password",size:"small",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),l.jsx("input",{type:"password",name:"currentPassword",value:br.currentPassword,onChange:le,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Enter current password"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),l.jsx("input",{type:"password",name:"newPassword",value:br.newPassword,onChange:le,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Enter new password"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),l.jsx("input",{type:"password",name:"confirmPassword",value:br.confirmPassword,onChange:le,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Confirm new password"})]}),l.jsxs("div",{className:"flex space-x-3 pt-4",children:[l.jsx(ot,{type:"button",variant:"secondary",onClick:pe,className:"flex-1",children:"Cancel"}),l.jsx(ot,{type:"button",onClick:Ne,className:"flex-1",children:"Change Password"})]})]})})]});function fi(){return l.jsxs("div",{className:"space-y-8",children:[l.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:l.jsxs(Ht,{children:[l.jsx(Ht.Header,{children:l.jsx(Ht.Title,{children:"My Subjects & Classes"})}),l.jsx(Ht.Body,{children:w.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No subjects assigned"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"You don't have any subjects assigned yet."}),l.jsx(ot,{variant:"outline",onClick:()=>S("subjects"),children:"Manage Subjects"})]}):l.jsx("div",{className:"space-y-6",children:w.map(($e,Pt)=>l.jsxs(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+Pt*.1,duration:.3},className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:$e.name}),l.jsxs("span",{className:"text-sm text-gray-500",children:[$e.classes?.length||0," classes"]})]}),$e.classes&&$e.classes.length>0?l.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:$e.classes.map((Re,qe)=>l.jsx(ht.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3+Pt*.1+qe*.05,duration:.2},whileHover:{scale:1.05},whileTap:{scale:.95},children:l.jsxs(ot,{variant:"outline",size:"sm",onClick:()=>{R(Re.grade),V(Re.class),S("results")},className:"font-medium",children:[Re.grade,"/",Re.class]})},qe))}):l.jsx("div",{className:"text-center py-4 text-gray-500",children:l.jsx("span",{className:"text-sm",children:"No classes assigned to this subject"})})]},$e.id))})})]})}),l.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:l.jsxs(Ht,{children:[l.jsxs(Ht.Header,{children:[l.jsx(Ht.Title,{children:"Test Performance Overview"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Test performance over time with average scores"})]}),l.jsx(Ht.Body,{children:w.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"mb-2",children:l.jsx("img",{src:"/pics/Graph.png",alt:"Performance Graph",className:"w-16 h-16 object-contain mx-auto"})}),l.jsx("p",{className:"text-gray-500",children:"No subjects assigned - no performance data available"})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"flex flex-wrap gap-2 border-b border-gray-200",children:(()=>{const $e=[];return w.forEach(Pt=>{Pt.classes&&Pt.classes.forEach(Re=>{const qe=`${Re.grade}/${Re.class}`;$e.find(Lt=>Lt.key===qe)||$e.push({key:qe,grade:Re.grade,class:Re.class,subject:Pt.name})})}),$e})().map(($e,Pt)=>l.jsxs("button",{onClick:()=>{ke.debug(" Class button clicked:",$e.key),gt($e.key),xn($e.key)},className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors ${dt===$e.key?"bg-blue-100 text-blue-700 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[$e.grade,"/",$e.class]},$e.key))}),dt?l.jsx("div",{className:"mt-4",children:l.jsx(Sje,{data:Qe,loading:Ot,error:Gt})}):l.jsxs("div",{className:"mt-4 text-center text-muted py-4",children:[l.jsx("div",{className:"mb-2",children:l.jsx("img",{src:"/pics/Graph.png",alt:"Performance Graph",className:"w-16 h-16 object-contain mx-auto"})}),l.jsx("p",{className:"text-gray-500",children:"Select a class above to view test performance data"})]})]})})]})})]})}function dn(){return l.jsxs("div",{className:"space-y-8",children:[l.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:l.jsx(Ht,{children:l.jsx(Ht.Header,{children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(Ht.Title,{children:"Subject Management"}),l.jsx(ot,{variant:"primary",onClick:it,children:"Add Subject"})]})})})}),w.length===0?l.jsx(ht.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},children:l.jsx(Ht,{children:l.jsx(Ht.Body,{children:l.jsxs("div",{className:"text-center p-12",children:[l.jsx(ht.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"},children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No subjects assigned yet"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Add your first subject to get started with creating tests and managing classes."}),l.jsx(ot,{variant:"primary",onClick:it,size:"lg",children:"Add Your First Subject"})]})})})}):l.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},children:l.jsxs(Ht,{children:[l.jsx(Ht.Header,{children:l.jsx(Ht.Title,{children:"Your Subjects"})}),l.jsx(Ht.Body,{children:l.jsx("div",{className:"space-y-4",children:w.map(($e,Pt)=>l.jsx(ht.div,{className:"p-4 bg-gray-50 rounded-lg border-l-4 border-green-500",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+Pt*.1,duration:.3},whileHover:{scale:1.02,backgroundColor:"#f9fafb"},children:l.jsx("div",{className:"flex justify-between items-start",children:l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:$e.name}),l.jsx("div",{className:"flex flex-wrap gap-2",children:$e.classes?.map((Re,qe)=>l.jsxs(ht.div,{className:"inline-flex items-center gap-2 bg-blue-100 text-blue-800 text-xs rounded-full px-3 py-1",initial:{scale:0},animate:{scale:1},transition:{delay:.4+Pt*.1+qe*.05,duration:.2},whileHover:{scale:1.1},children:[l.jsxs("span",{children:[Re.grade," - ",Re.className]}),l.jsx("button",{onClick:()=>bt($e.id,$e.name,Re.grade,Re.class),className:"ml-1 text-red-600 hover:text-red-800 transition-colors",title:"Delete this subject assignment",children:l.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},qe))||l.jsx("span",{className:"text-gray-500 text-sm",children:"No classes assigned"})})]})})},Pt))})})]})})]})}function vl(){return l.jsxs("div",{className:"space-y-8",children:[l.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:l.jsx(Ht,{children:l.jsx(Ht.Header,{children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(Ht.Title,{children:"Active Tests"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(ot,{variant:"outline",onClick:$r,children:"Refresh"}),l.jsx(ot,{variant:"primary",onClick:()=>t("/teacher/tests/create"),children:"Create New Test"})]})]})})})}),Xt.length===0?l.jsx(ht.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},children:l.jsx(Ht,{children:l.jsx(Ht.Body,{children:l.jsxs("div",{className:"text-center p-12",children:[l.jsx(ht.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"},children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No active tests found"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first test to get started with assessments."}),l.jsx(ot,{variant:"primary",onClick:()=>t("/teacher/tests/create"),size:"lg",children:"Create Your First Test"})]})})})}):l.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},className:"space-y-4",children:Xt.map(($e,Pt)=>l.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+Pt*.1,duration:.3},whileHover:{scale:1.01},children:l.jsx(Ht,{children:l.jsxs(Ht.Body,{children:[l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"flex-1 flex flex-col sm:flex-row sm:items-center sm:space-x-4 gap-2",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 min-w-0 flex-shrink-0 max-w-xs truncate",title:$e.test_name,children:$e.test_name}),l.jsx("span",{className:"hidden sm:inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-medium flex-shrink-0",children:$e.test_type}),l.jsxs("span",{className:"hidden sm:inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-semibold flex-shrink-0",children:[$e.grade,"/",$e.class]})]}),l.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${$e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:$e.is_active?"Active":"Inactive"}),l.jsx("div",{className:"text-sm text-gray-500 flex-shrink-0",children:new Date($e.created_at).toLocaleDateString()})]})]}),l.jsxs("div",{className:"hidden sm:flex gap-2 ml-4 flex-shrink-0",children:[l.jsx(ot,{variant:"outline",onClick:()=>xr({...$e,selectedAssignmentId:$e.assignment_id,assignments:$e.assignments}),size:"sm",children:"Details"}),!$e.is_active&&l.jsx(ot,{variant:"primary",onClick:()=>zr($e.assignment_id),size:"sm",disabled:mn===$e.assignment_id,children:mn===$e.assignment_id?l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Activating..."]}):"Activate"}),l.jsx(ot,{variant:"success",onClick:()=>Ir($e.assignment_id),size:"sm",disabled:Pe===$e.assignment_id,children:Pe===$e.assignment_id?l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing..."]}):"Complete"})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 sm:hidden",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsxs("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-semibold",children:[$e.grade,"/",$e.class]}),l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${$e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:$e.is_active?"Active":"Inactive"}),l.jsx("span",{className:"text-xs text-gray-500",children:new Date($e.created_at).toLocaleDateString()})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx(ot,{variant:"outline",onClick:()=>xr({...$e,assignments:[{assignment_id:$e.assignment_id,grade:$e.grade,class:$e.class,is_active:$e.is_active}]}),size:"sm",className:"text-xs",children:"Details"}),!$e.is_active&&l.jsx(ot,{variant:"primary",onClick:()=>zr($e.assignment_id),size:"sm",disabled:mn===$e.assignment_id,children:mn===$e.assignment_id?l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Activating..."]}):"Activate"}),l.jsx(ot,{variant:"success",onClick:()=>Ir($e.assignment_id),size:"sm",disabled:Pe===$e.assignment_id,children:Pe===$e.assignment_id?l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing..."]}):"Complete"})]})]})]})})},`${$e.test_id}-${$e.assignment_id}-${Pt}`))})]})}},kje={multipleChoice:"multiple_choice",trueFalse:"true_false",input:"input",matching:"matching_type",wordMatching:"word_matching",drawing:"drawing",fillBlanks:"fill_blanks",speaking:"speaking"},rB=()=>{const{user:e}=Is();Zde();const{notifications:t,showNotification:r,removeNotification:n}=ci(),[s,a]=_.useState(!1),[i,o]=_.useState(!1),[c,u]=_.useState("typeSelection"),[d,f]=_.useState(!1),[h,g]=_.useState(null),[p,y]=_.useState([]),[v,C]=_.useState(!1),[S,w]=_.useState(!1),[T,N]=_.useState(!1),[A,P]=_.useState(!1),[j,F]=_.useState({testName:"",numQuestions:0,numOptions:0,questions:{},enableTimer:!1,timerMinutes:"",isShuffled:!1}),[R,L]=_.useState([]),[V,Z]=_.useState(null);_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null);const Y=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in initializeTestCreation, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}console.log(" Setting up test creation event listeners..."),W(),console.log(" Test creation initialization complete")},[e,r]),re=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in showTestTypeSelection, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}console.log(" showTestTypeSelection called - starting new test creation"),o(!1),console.log(" Reset testAssignmentCompleted flag to false"),a(!0),console.log(" Set isInTestCreation flag to true"),ue(),u("typeSelection"),X("testTypeSelection")},[e,r]),ue=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in disableNavigationButtons, redirecting to login");return}console.log(" Disabling navigation buttons..."),f(!0)},[e]),z=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in enableNavigationButtons, redirecting to login");return}console.log(" Enabling navigation buttons..."),f(!1)},[e]),X=_.useCallback(async de=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in saveTestCreationState, redirecting to login");return}console.log("  saveTestCreationState called with step:",de),console.log("  Call stack:",new Error().stack);const ve={multipleChoice:{buttonVisible:!0,hintVisible:!1},trueFalse:{buttonVisible:!0,hintVisible:!1},input:{buttonVisible:!0,hintVisible:!1}},Me={isInTestCreation:!0,currentStep:de,timestamp:Date.now(),excelState:ve};localStorage.setItem("test_creation_state",JSON.stringify(Me)),console.log(" Saved test creation state:",Me);const Oe={};switch(de){case"testTypeSelection":break;case"multipleChoiceForm":Oe.testName=j.testName||"",Oe.numQuestions=j.numQuestions||"",Oe.numOptions=j.numOptions||"",Oe.questions=j.questions||{};break;case"trueFalseForm":Oe.testName=j.testName||"",Oe.numQuestions=j.numQuestions||"",Oe.questions=j.questions||{};break;case"inputForm":Oe.testName=j.testName||"",Oe.numQuestions=j.numQuestions||"",Oe.questions=j.questions||{};break;case"formCreation":Oe.testName=j.testName||"",Oe.numQuestions=j.numQuestions||"",Oe.numOptions=j.numOptions||"",Oe.questions=j.questions||{},Oe.enableTimer=!!j.enableTimer,Oe.timerMinutes=j.timerMinutes||"",Oe.isShuffled=!!j.isShuffled;break;case"assignment":case"testAssignment":Oe.testName=j.testName||"",Oe.numQuestions=j.numQuestions||"",Oe.numOptions=j.numOptions||"",Oe.questions=j.questions||{};break;default:console.log(" Unknown step in saveTestCreationState:",de);break}Object.keys(Oe).length>0&&(localStorage.setItem(`form_data_${de}`,JSON.stringify(Oe)),console.log(" Saved form data for step:",de,Oe))},[e,j]),I=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in clearTestCreationState, redirecting to login");return}localStorage.removeItem("test_creation_state"),localStorage.removeItem("test_creation_form_data");const de=[];for(let ve=0;ve<localStorage.length;ve++){const Me=localStorage.key(ve);Me&&(Me.includes("test")||Me.includes("form")||Me.includes("question"))&&de.push(Me)}de.forEach(ve=>{localStorage.removeItem(ve),console.log(" Removed localStorage key:",ve)}),console.log(" Cleared test creation state from localStorage")},[e]);_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in clearAllTestFields, redirecting to login");return}console.log(" Clearing all test form fields..."),F({testName:"",numQuestions:0,numOptions:0,questions:{}}),g(null),L([]),Z(null),console.log(" Cleared all test form fields")},[e]);const B=_.useCallback(()=>{console.log(" Resetting Excel upload state..."),Xe({multipleChoice:{buttonVisible:!1,hintVisible:!1},trueFalse:{buttonVisible:!1,hintVisible:!1},input:{buttonVisible:!1,hintVisible:!1}}),["multiple-choice","true-false","input","word-matching"].forEach(ve=>{const Me=document.querySelector(`.excel-upload-btn[data-test-type="${ve}"]`);Me&&(Me.style.display="none",console.log(" Excel button hidden for:",ve));const Oe=document.querySelector(`.excel-hint[data-test-type="${ve}"]`);Oe&&(Oe.style.display="none",console.log(" Excel hint hidden for:",ve));const nt=document.querySelector(`.excel-file-input[data-test-type="${ve}"]`);nt&&(nt.value="",console.log(" File input cleared for:",ve))}),console.log(" Excel upload state reset complete")},[]),W=_.useCallback(()=>{console.log(" Setting up auto-save listeners for initial form fields..."),["testName","numQuestions","numOptions","enableTimer","timerMinutes","isShuffled"].forEach(ve=>{const Me=document.getElementById(ve);Me&&Me.addEventListener("input",()=>{console.log(` Auto-save triggered for field: ${ve}`)})}),console.log(" Form auto-save setup complete")},[]);_.useCallback(async de=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in saveFormDataForStep, redirecting to login");return}console.log("  saveFormDataForStep called with step:",de),console.log("  Call stack:",new Error().stack);const ve={};switch(de){case"testTypeSelection":break;case"multipleChoiceForm":ve.testName=j.testName||"",ve.numQuestions=j.numQuestions||"",ve.numOptions=j.numOptions||"",ve.questions=j.questions||{};break;case"trueFalseForm":ve.testName=j.testName||"",ve.numQuestions=j.numQuestions||"",ve.questions=j.questions||{};break;case"inputForm":ve.testName=j.testName||"",ve.numQuestions=j.numQuestions||"",ve.questions=j.questions||{};break;case"formCreation":ve.testName=j.testName||"",ve.numQuestions=j.numQuestions||"",ve.numOptions=j.numOptions||"",ve.questions=j.questions||{};break;default:console.log(" Unknown step for form data save:",de);return}localStorage.setItem("test_creation_form_data",JSON.stringify({step:de,data:ve,timestamp:Date.now()})),console.log(" Saved form data for step:",de,ve)},[e,j]);const D=_.useCallback(async de=>{console.log(" Restoring form data for step:",de);try{const ve=localStorage.getItem(`form_data_${de}`);if(ve){const Me=JSON.parse(ve);console.log(" Restored form data:",Me),F(Oe=>{const nt={...Oe,...Me};return console.log(" Updated formData with restored data:",nt),console.log(" Matching test data in restored data:",nt.matchingTestData),nt}),Object.keys(Me).forEach(Oe=>{const nt=document.getElementById(Oe);nt&&Me[Oe]!==void 0&&(nt.value=Me[Oe])}),console.log(" Form data restored for step:",de)}else console.log(" No saved data found for step:",de)}catch(ve){console.error(" Error restoring form data:",ve)}},[e]),U=_.useCallback(()=>{console.log(" Setting up multiple choice form auto-save..."),["mcNumOptions"].forEach(Me=>{const Oe=document.getElementById(Me);Oe&&Oe.addEventListener("input",()=>{console.log(` Auto-save triggered for MC field: ${Me}`)})}),document.querySelectorAll("#mcQuestionsContainer input, #mcQuestionsContainer textarea, #mcQuestionsContainer select").forEach(Me=>{Me.addEventListener("input",()=>{console.log(" Auto-save triggered for MC question field")})}),console.log(" Multiple choice form auto-save setup complete")},[]),q=_.useCallback(()=>{console.log(" Setting up true/false form auto-save..."),document.querySelectorAll("#tfQuestionsContainer input, #tfQuestionsContainer textarea, #tfQuestionsContainer select").forEach(ve=>{ve.addEventListener("input",()=>{console.log(" Auto-save triggered for TF question field")})}),console.log(" True/false form auto-save setup complete")},[]),H=_.useCallback(()=>{console.log(" Setting up input form auto-save..."),document.querySelectorAll("#inputQuestionsContainer input, #inputQuestionsContainer textarea, #inputQuestionsContainer select").forEach(ve=>{ve.addEventListener("input",()=>{console.log(" Auto-save triggered for Input question field")})}),console.log(" Input form auto-save setup complete")},[]),te=_.useCallback(de=>{console.log(" showExcelUploadButton called with testType:",de);const ve=de==="multiple-choice"?"multipleChoice":de==="true-false"?"trueFalse":de==="input"?"input":de;Xe(Me=>({...Me,[ve]:{...Me[ve],buttonVisible:!0}}))},[]),Q=_.useCallback(de=>{console.log(" showExcelHint called with testType:",de);const ve=de==="multiple-choice"?"multipleChoice":de==="true-false"?"trueFalse":de==="input"?"input":de;Xe(Me=>({...Me,[ve]:{...Me[ve],hintVisible:!0}}))},[]),ae=_.useCallback(async(de,ve,Me)=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayTestAssignmentOptions, redirecting to login");return}console.log("displayTestAssignmentOptions called with:",{classes:de,testType:ve,testId:Me}),y(de),console.log(" Test assignment options displayed for:",{testType:ve,testId:Me,classesCount:de.length})},[e]),ce=_.useCallback(async(de,ve)=>{try{if(console.log("Loading teacher grades and classes for test assignment"),!e||!e.teacher_id){console.error("No valid teacher session found, redirecting to login");return}console.log("Teacher ID:",e.teacher_id);const Oe=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-subjects?teacher_id=${e.teacher_id}`)).json();console.log("Teacher subjects response:",Oe),Oe.success&&Oe.subjects&&Oe.subjects.length>0?(console.log("Teacher subjects loaded:",Oe.subjects),y(Oe.subjects),ae(Oe.subjects,de,ve)):(console.log("No teacher subjects found"),r("No subjects found. Please assign subjects to grades and classes first.","warning"))}catch(Me){console.error("Error loading teacher grades and classes:",Me),r("Error loading teacher grades and classes","error")}},[e,r,ae]),me=_.useCallback(async()=>{if(console.log(" Loading available classes..."),!e||!e.teacher_id){console.error("No valid teacher session found, redirecting to login");return}try{const ve=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-subjects?teacher_id=${e.teacher_id}`)).json();console.log(" Teacher subjects response:",ve),ve.success&&ve.subjects&&ve.subjects.length>0?(console.log(" Teacher subjects loaded:",ve.subjects),y(ve.subjects)):(console.log("No teacher subjects found"),y([]),r("No subjects found. Please assign subjects to grades and classes first.","warning"))}catch(de){console.error(" Error loading available classes:",de),r("Failed to load available classes","error")}},[e,r]);_.useCallback(async(de,ve)=>{if(i){o(!1);return}if(!e||!e.teacher_id){console.error("No valid teacher session found in showTestAssignment, redirecting to login");return}ue(),X("testAssignment"),Z(ve),g(de),u("testAssignment"),ce(de,ve),console.log(" Test assignment interface shown for:",{testType:de,testId:ve})},[i,e,ue,X,ce]);const xe=_.useCallback(async de=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayTeacherActiveTests, redirecting to login");return}if(console.log(" Displaying teacher active tests:",de),de.length===0){Ke([]);return}Ke(de),console.log(" Active tests displayed:",de.length,"tests")},[e]);_.useCallback(async(de,ve)=>{try{console.log(" Loading test questions for:",{testType:de,testId:ve});const Me=await Cn.getTestQuestions(ve,de);return console.log(" Test questions loaded:",Me),Me}catch(Me){throw console.error("Error loading test questions:",Me),Me}},[]),_.useCallback((de,ve,Me,Oe)=>{console.log(" Showing teacher test details modal:",{testType:de,testId:ve,testName:Me,questionsCount:Oe.length}),console.log("Test Details:",{testType:de,testId:ve,testName:Me,questions:Oe.map(nt=>({id:nt.question_id,question:nt.question,correctAnswer:nt.correct_answer}))}),r(`Test details for "${Me}" loaded successfully.`,"success")},[r]);const se=_.useCallback(async()=>{console.log(" DEBUG: loadTeacherActiveTests called");try{console.log(" DEBUG: Fetching teacher active tests using JWT authentication...");const de=await Cn.getTeacherTests();console.log(" DEBUG: Tests loaded:",de),de&&de.length>0?(console.log(" DEBUG: Success! Displaying",de.length,"tests"),xe(de)):(console.log(" DEBUG: No tests found"),Ke([]))}catch(de){console.error(" DEBUG: Error loading active tests:",de),r("Error loading active tests.","error")}},[r,xe]),De=_.useCallback(()=>{console.log("showTestCreationSuccessMessage called"),r("Test created and assigned successfully!","success"),u("typeSelection"),F({testName:"",numQuestions:0,numOptions:0,questions:{}}),L([]),o(!1),a(!1),I()},[r,I]),He=_.useCallback(async(de,ve)=>{if(console.log(" === ASSIGN TEST TO CLASSES DEBUG START ==="),console.log(" Test Type:",de),console.log(" Test ID:",ve),console.log(" Current formData:",j),console.log(" Selected Classes:",R),console.log(" User:",e),!e||!e.teacher_id){console.error(" No valid teacher session found in assignTestToClasses, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}if(console.log(" Teacher ID:",e.teacher_id),R.length===0){console.warn(" No classes selected"),r("Please select at least one class.","warning");return}try{console.log(" Preparing test + assignment request..."),await hu.loadAcademicCalendar();const Oe=hu.getCurrentTerm()?.id;if(!Oe)throw new Error("No current academic period found");const nt=R.map(pt=>{const zt={grade:parseInt(pt.grade),class:parseInt(pt.class),subject_id:parseInt(pt.subject_id),academic_period_id:Oe,due_date:null};return console.log(" Created assignment:",zt),zt});if(console.log(" Final assignments array:",nt),de==="matching"){console.log(" Processing matching test..."),console.log(" Setting isAssigningTest to true for matching test..."),P(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise($r=>setTimeout($r,100));const pt=j.matchingTestData;if(console.log(" Matching test data from formData:",pt),!pt){console.error(" Matching test data not found in formData"),r("Matching test data not found. Please recreate the test.","error");return}console.log(" Matching test data found, processing...");let zt;pt.processedQuestions?(console.log(" Using pre-processed questions from MatchingTestCreator"),zt=pt.processedQuestions):(console.log(" Converting blocks to questions (fallback)..."),console.log(" Blocks:",pt.blocks),console.log(" Words:",pt.words),console.log(" Arrows:",pt.arrows),zt=pt.blocks.map(($r,mn)=>{const Gr=pt.words.find(Lr=>Lr.blockId===$r.id)?.word||`Word ${mn+1}`,zr=pt.arrows.some(Lr=>Lr.startBlock===$r.id),Xt=pt.arrows.find(Lr=>Lr.startBlock===$r.id)||null,xn={question_id:mn+1,word:Gr,block_coordinates:{x:$r.x,y:$r.y,width:$r.width,height:$r.height},has_arrow:zr,arrow:Xt?{startX:Xt.startX,startY:Xt.startY,endX:Xt.endX,endY:Xt.endY,style:Xt.style||{}}:null};return console.log(` Question ${mn+1}:`,xn),xn})),console.log(" Final questions array:",zt);const xr={teacher_id:e.teacher_id,test_name:j.testName,image_url:pt.imageUrl,num_blocks:pt.blocks.length,questions:zt,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,assignments:nt};console.log(" Final matching test data payload:",xr),console.log(" Calling testService.saveMatchingTest...");const Ir=await Cn.saveMatchingTest(xr);console.log(" API Response:",Ir),Ir.success?(console.log(" Matching test created and assigned successfully!"),r("Matching test created and assigned successfully!","success"),console.log("Matching test created and assigned successfully"),o(!0),rt()):(console.error(" Failed to create matching test:",Ir.message),r("Error creating and assigning matching test: "+Ir.message,"error")),P(!1);return}if(de==="wordMatching"){console.log(" Processing word matching test..."),console.log(" Setting isAssigningTest to true for word matching test..."),P(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise($r=>setTimeout($r,100));const pt=j.wordMatchingData;if(console.log(" Word matching test data from formData:",pt),!pt){console.error(" Word matching test data not found in formData"),r("Word matching test data not found. Please recreate the test.","error");return}console.log(" Word matching test data found, processing...");const zt=pt.wordPairs.map(($r,mn)=>({question_id:mn+1,left_word:$r.leftWord,right_word:$r.rightWord}));console.log(" Final word matching questions array:",zt);const xr={teacher_id:e.teacher_id,test_type:"word_matching",test_name:j.testName,num_questions:pt.wordPairs.length,interaction_type:pt.interactionType||"drag",questions:zt,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,assignments:nt};console.log(" Final word matching test data payload:",xr),console.log(" Calling testService.assignTestToClasses for word matching...");const Ir=await Cn.assignTestToClasses(xr);console.log(" API Response:",Ir),Ir.success?(console.log(" Word matching test created and assigned successfully!"),r("Word matching test created and assigned successfully!","success"),console.log("Word matching test created and assigned successfully"),o(!0),rt()):(console.error(" Failed to create word matching test:",Ir.message),r("Error creating and assigning word matching test: "+Ir.message,"error")),P(!1);return}if(de==="drawing"){console.log(" Processing drawing test..."),console.log(" Setting isAssigningTest to true for drawing test..."),P(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise($r=>setTimeout($r,100));const pt=j.drawingData;if(console.log(" Drawing test data from formData:",pt),!pt){console.error(" Drawing test data not found in formData"),r("Drawing test data not found. Please recreate the test.","error");return}console.log(" Drawing test data found, processing...");const zt=pt.questions||[];console.log(" Drawing questions array:",zt);const xr={teacher_id:e.teacher_id,test_type:"drawing",test_name:j.testName,num_questions:pt.num_questions,passing_score:pt.passing_score,questions:zt,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,assignments:nt};console.log(" Final drawing test data payload:",xr),console.log(" Calling testService.assignTestToClasses...");const Ir=await Cn.assignTestToClasses(xr);console.log(" API Response:",Ir),Ir.success?(console.log(" Drawing test created and assigned successfully!"),r("Drawing test created and assigned successfully!","success"),o(!0),rt()):(console.error(" Failed to create drawing test:",Ir.message),r("Error creating and assigning drawing test: "+Ir.message,"error")),P(!1);return}if(de==="fillBlanks"){console.log(" Processing fill blanks test..."),console.log(" Setting isAssigningTest to true for fill blanks test..."),P(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise($r=>setTimeout($r,100));const pt=j.fillBlanksData;if(console.log(" Fill blanks test data from formData:",pt),!pt){console.error(" Fill blanks test data not found in formData"),r("Fill blanks test data not found. Please recreate the test.","error");return}console.log(" Fill blanks test data found, processing...");const zt=pt.blanks||[];console.log(" Fill blanks questions array:",zt);const xr={teacher_id:e.teacher_id,test_type:"fill_blanks",test_name:j.testName,test_text:pt.test_text,num_questions:pt.num_questions,num_blanks:pt.num_blanks,separate_type:pt.separate_type,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,questions:zt,assignments:nt};console.log(" Final fill blanks test data payload:",xr),console.log(" Calling testService.assignTestToClasses...");const Ir=await Cn.assignTestToClasses(xr);console.log(" API Response:",Ir),Ir.success?(console.log(" Fill blanks test created and assigned successfully!"),r("Fill blanks test created and assigned successfully!","success"),o(!0),rt()):(console.error(" Failed to create fill blanks test:",Ir.message),r("Error creating and assigning fill blanks test: "+Ir.message,"error")),P(!1);return}if(de==="speaking"){console.log(" Processing speaking test..."),console.log(" Setting isAssigningTest to true for speaking test..."),P(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise($r=>setTimeout($r,100));const pt=j.speakingData;if(console.log(" Speaking test data from formData:",pt),!pt){console.error(" Speaking test data not found in formData"),r("Speaking test data not found. Please recreate the test.","error");return}console.log(" Speaking test data found, processing...");const zt={teacher_id:e.teacher_id,test_type:"speaking",test_name:j.testName,time_limit:pt.time_limit,min_duration:pt.min_duration,max_duration:pt.max_duration,max_attempts:pt.max_attempts,min_words:pt.min_words,passing_score:pt.passing_score,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,questions:pt.questions,assignments:nt};console.log(" Final speaking test data payload:",zt),console.log(" Calling save-speaking-test-with-assignments for speaking test...");const Ir=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-speaking-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(zt)})).json();console.log(" API Response:",Ir),Ir.success?(console.log(" Speaking test created and assigned successfully!"),r("Speaking test created and assigned successfully!","success"),o(!0),rt()):(console.error(" Failed to create speaking test:",Ir.message),r("Error creating and assigning speaking test: "+Ir.message,"error")),P(!1);return}console.log(" Processing non-matching test..."),console.log(" Form data questions:",j.questions);const bt=Object.keys(j.questions).map(pt=>{const zt=j.questions[pt];console.log(` Processing question ${pt}:`,zt);let xr;if(de==="input")xr={correct_answers:zt.correct_answers||[zt.correctAnswer||""]};else if(de==="trueFalse"){const $r=zt.correct_answer||zt.correctAnswer||zt.correct_answers?.[0]||"";xr={correct_answer:$r==="true"}}else xr={correct_answer:zt.correctAnswer||zt.correct_answer||zt.correct_answers?.[0]||""};const Ir={question_id:parseInt(pt),question:zt.question,...xr,options:zt.options||[]};return console.log(` Question ${pt} correct_answers:`,zt.correct_answers),console.log(` Question ${pt} correctAnswer:`,zt.correctAnswer),console.log(` Converted question ${pt}:`,Ir),Ir});console.log(" Final questions array:",bt);const At={teacher_id:e.teacher_id,test_type:kje[de],test_name:j.testName,num_questions:j.numQuestions,num_options:j.numOptions,questions:bt,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,is_shuffled:!!j.isShuffled,assignments:nt};console.log(" Final test data payload:",At),console.log(" Setting isAssigningTest to true..."),P(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(pt=>setTimeout(pt,100)),console.log(" Calling testService.assignTestToClasses...");const cr=await Cn.assignTestToClasses(At);console.log(" API Response:",cr),cr.success?(console.log(" Test created and assigned successfully!"),r("Test created and assigned successfully!","success"),console.log("Test created and assigned successfully"),o(!0),rt()):(console.error(" Failed to create and assign test:",cr.message),r("Error creating and assigning test: "+cr.message,"error"))}catch(Me){console.error(" Exception in assignTestToClasses:",Me),console.error("Error creating and assigning test:",Me),r("Error creating and assigning test. Please try again.","error")}finally{P(!1)}console.log(" === ASSIGN TEST TO CLASSES DEBUG END ===")},[e,R,j,r,De]),rt=_.useCallback(async()=>{console.log("returnToMainCabinet called - restoring main cabinet view");try{a(!1),o(!1),u("typeSelection"),g(null),Z(null),L([]),z(),I(),De(),console.log(" Returned to main cabinet")}catch(de){console.error("Error returning to main cabinet:",de)}},[z,I,De]),[_t,Ke]=_.useState([]),[tt,Pe]=_.useState(!1);_.useCallback(async()=>{console.log(" Refreshing active tests data...");try{await se(),r("Active tests data refreshed.","success")}catch(de){console.error("Error refreshing active tests data:",de),r("Error refreshing data.","error")}},[se,r]);const[je,Qe]=_.useState([]),[vt,Ot]=_.useState([]),[$t,Gt]=_.useState(!1),[ir,dt]=_.useState(!1),gt=_.useCallback(async de=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayExistingSubjectsInSelection, redirecting to login");return}console.log("Displaying existing subjects in selection interface:",de),Qe(de),console.log(" Existing subjects displayed in selection:",de.length,"subjects")},[e]);_.useCallback(async()=>{try{console.log("Loading existing subjects...");const de=await Us.getTeacherSubjects();console.log("Existing subjects loaded:",de),de&&de.length>0?gt(de):(console.log("No existing subjects found"),Qe([]))}catch(de){console.error("Error loading existing subjects:",de),r("Error loading subjects.","error")}},[r,gt]);const kt=_.useCallback(de=>{console.log("Checking for outside click...");const ve=document.getElementById("dropdownMenu"),Me=document.querySelector("[data-menu-button]");ve&&!ve.contains(de.target)&&!Me?.contains(de.target)&&(console.log("Outside click detected, closing menu"),ve.classList.remove("show"),document.removeEventListener("click",kt))},[]),[Ge,Xe]=_.useState({multipleChoice:{buttonVisible:!1,hintVisible:!1},trueFalse:{buttonVisible:!1,hintVisible:!1},input:{buttonVisible:!1,hintVisible:!1}}),Et=_.useCallback((de,ve)=>{const Me=de.target.files[0];if(!Me)return;if(!Me.name.match(/\.(xlsx|xls)$/i)){r("Please select a valid Excel file (.xlsx or .xls)","error"),de.target.value="";return}if(Me.size>5*1024*1024){r("File is too large. Please select a file smaller than 5MB.","error"),de.target.value="";return}N(!0);const Oe=new FileReader;Oe.onload=function(nt){try{console.log(" File loaded, processing data...");const bt=new Uint8Array(nt.target.result),At=aC(bt,{type:"array"}),cr=At.SheetNames[0],pt=At.Sheets[cr],zt=t4.sheet_to_json(pt,{header:1});console.log(" Parsed Excel data:",zt),Wt(zt,ve),N(!1)}catch(bt){console.error("Error processing Excel file:",bt),r("Error reading Excel file: "+bt.message,"error"),de.target.value="",N(!1)}},Oe.onerror=function(){r("Failed to read file","error"),de.target.value="",N(!1)},Oe.readAsArrayBuffer(Me)},[r]),Ut=_.useCallback(()=>{console.log(" Initializing Excel upload for all test types...");const de=document.querySelectorAll(".excel-upload-btn");console.log(` Found ${de.length} Excel upload buttons`),de.forEach((ve,Me)=>{const Oe=ve.dataset.testType,nt=document.querySelector(`.excel-file-input[data-test-type="${Oe}"]`);console.log(` Processing button ${Me+1}: testType=${Oe}, fileInput=${nt?"found":"not found"}`),nt?(ve._excelClickHandler&&ve.removeEventListener("click",ve._excelClickHandler),nt._excelChangeHandler&&nt.removeEventListener("change",nt._excelChangeHandler),ve._excelClickHandler=()=>{console.log(` Excel upload button clicked for test type: ${Oe}`),nt.click()},nt._excelChangeHandler=bt=>{console.log(` File input changed for test type: ${Oe}`),Et(bt,Oe)},ve.addEventListener("click",ve._excelClickHandler),nt.addEventListener("change",nt._excelChangeHandler),console.log(` Excel upload initialized for test type: ${Oe}`)):console.warn(` File input not found for test type: ${Oe}`)}),console.log(" Excel upload initialization complete")},[Et]),Wt=_.useCallback((de,ve)=>{const Me=de.filter(pt=>Array.isArray(pt)&&pt.length>0&&pt.some(zt=>zt&&zt.toString().trim()!==""));console.log(" Original Excel data rows:",de.length),console.log(" Filtered Excel data rows:",Me.length);const nt=pr(Me,ve).dataRows;if(nt.length===0){const pt="No data rows found after header processing. Please check your Excel file.";r(pt,"error"),alert(pt),Ee(ve);return}console.log(` Processing Excel data for test type: ${ve}`),console.log(" Data rows after header processing:",nt);const bt=lr(nt,ve);if(console.log(" Recognition result:",bt),!bt.recognized){console.log(` Excel data recognition failed for test type: ${ve}`);const pt="Excel data recognition failed. Please check your file format.";r(pt,"error"),alert(pt),Ee(ve);return}console.log(` Excel data recognition successful for test type: ${ve}`);const At=nt.length,cr=_e(ve);if(cr===0)console.log(` No question count specified, using CSV count: ${At}`),F(pt=>({...pt,numQuestions:At}));else if(At!==cr){const pt=`Your CSV file has ${At} data rows, but you specified ${cr} questions.

Please either:
1. Change your question count to ${At}, or
2. Fix your CSV file to have exactly ${cr} data rows

Then try uploading again.`;r(pt,"error"),Ee(ve);return}Fe(nt,ve)},[r]),pr=_.useCallback((de,ve)=>{if(de.length===0)return{hasHeaders:!1,headerRow:null,dataRows:de};const Me=de[0],Oe=wr(ve);if(br(Me,Oe).isLikelyHeader){const bt=`The first row of your Excel file looks like it contains headers:

"${Me.join(" | ")}"

Does the first row contain column headers?

Click "OK" if YES (headers will be removed)
Click "Cancel" if NO (first row will be treated as data)`;if(window.confirm(bt))return{hasHeaders:!0,headerRow:Me,dataRows:de.slice(1)}}return{hasHeaders:!1,headerRow:null,dataRows:de}},[]),wr=_.useCallback(de=>{switch(de){case"multipleChoice":return{keywords:["question","answer","correct","option","a","b","c","d","e","f"],expectedColumns:4};case"trueFalse":return{keywords:["question","answer","correct","true","false"],expectedColumns:2};case"input":return{keywords:["question","answer","correct"],expectedColumns:2};default:return{keywords:[],expectedColumns:0}}},[]),br=_.useCallback((de,ve)=>{if(!de||de.length===0)return{isLikelyHeader:!1};if(de.length<ve.expectedColumns)return{isLikelyHeader:!1};const Me=de.join(" ").toLowerCase(),Oe=ve.keywords.filter(bt=>Me.includes(bt.toLowerCase()));return{isLikelyHeader:Oe.length>ve.keywords.length/2,keywordMatches:Oe}},[]),lr=_.useCallback((de,ve)=>{if(de.length===0)return r("No data rows found. Please check your Excel file.","error"),{recognized:!1,data:[]};console.log(` Checking data pattern for test type: ${ve}`),console.log(" Excel data to validate:",de);const Me=Er(de,ve);if(console.log(" Recognition result:",Me),!Me.matches){const Oe=`Your Excel file doesn't match the expected format.

Required format:
${we(ve)}

Please review your Excel file and make sure it follows this format exactly.

Then try uploading again.`;return console.log(" Data pattern validation failed:",Oe),console.log(" Calling showNotification with message:",Oe),r(Oe,"error"),console.log(" showNotification called"),alert(Oe),{recognized:!1,data:[]}}return console.log(` Data pattern validation passed for test type: ${ve}`),{recognized:!0,data:de}},[r]),Er=_.useCallback((de,ve)=>{if(ve==="multipleChoice")for(let Me=0;Me<de.length;Me++){const Oe=de[Me];if(Oe.length<4)return{matches:!1,issue:`Row ${Me+1} has ${Oe.length} columns but needs at least 4`};if(!Oe[0]||Oe[0].toString().trim()==="")return{matches:!1,issue:`Row ${Me+1} has no question in column 1`};if(!Oe[1]||Oe[1].toString().trim()==="")return{matches:!1,issue:`Row ${Me+1} has no correct answer in column 2`}}else if(ve==="trueFalse")for(let Me=0;Me<de.length;Me++){const Oe=de[Me];if(Oe.length<2)return{matches:!1,issue:`Row ${Me+1} has ${Oe.length} columns but needs at least 2`};if(!Oe[0]||Oe[0].toString().trim()==="")return{matches:!1,issue:`Row ${Me+1} has no question in column 1`};const nt=Oe[1]?.toString().trim().toLowerCase();if(!nt||!["true","false","t","f"].includes(nt))return{matches:!1,issue:`Row ${Me+1} has invalid correct answer in column 2 (must be True/False)`}}else if(ve==="input")for(let Me=0;Me<de.length;Me++){const Oe=de[Me];if(Oe.length<2)return{matches:!1,issue:`Row ${Me+1} has ${Oe.length} columns but needs at least 2`};if(!Oe[0]||Oe[0].toString().trim()==="")return{matches:!1,issue:`Row ${Me+1} has no question in column 1`};if(!Oe[1]||Oe[1].toString().trim()==="")return{matches:!1,issue:`Row ${Me+1} has no correct answer in column 2`}}return{matches:!0}},[]),we=_.useCallback(de=>{switch(de){case"multipleChoice":return`Column 1: Question
Column 2: Correct Answer (A, B, C, D, E, or F)
Column 3: Option A
Column 4: Option B
Column 5: Option C (optional)
Column 6: Option D (optional)
Column 7: Option E (optional)
Column 8: Option F (optional)`;case"trueFalse":return`Column 1: Question
Column 2: Correct Answer (True or False)`;case"input":return`Column 1: Question
Column 2: Correct Answer`;default:return"Unknown test type"}},[]),_e=_.useCallback(de=>j.numQuestions||0,[j.numQuestions]),Ee=_.useCallback(de=>{console.log(` Clearing file input for test type: ${de}`)},[]),Fe=_.useCallback((de,ve)=>{switch(console.log(` populateFromExcelForTestType called with testType: ${ve}`),ve){case"multipleChoice":case"multiple-choice":at(de);break;case"trueFalse":case"true-false":jt(de);break;case"input":Mt(de);break;default:console.log(` Unknown test type: ${ve}`)}},[]),at=_.useCallback(de=>{console.log(" populateMultipleChoiceFromExcel called with:",de);const ve=Math.max(...de.map(nt=>nt.length-2)),Me=Math.min(ve,6);console.log(` Excel data has ${ve} option columns, using ${Me} options`),F(nt=>({...nt,numOptions:Me}));const Oe={};de.forEach((nt,bt)=>{const At=bt+1;console.log(` Row ${bt+1} data:`,nt);const cr={question:(nt[0]||"").toString().trim(),options:[],correctAnswer:(nt[1]||"").toString().trim().toUpperCase()};console.log(` Question ${At} correctAnswer:`,cr.correctAnswer),["A","B","C","D","E","F"].slice(0,Me).forEach((xr,Ir)=>{const $r=(nt[Ir+2]||"").toString().trim();console.log(` Option ${Ir} (${xr}):`,$r),cr.options.push($r)}),Oe[At]=cr}),F(nt=>{const bt={...nt,questions:Oe};return console.log(" Updating form data with:",bt),bt}),console.log(" Populated multiple choice questions from Excel:",Oe),r(`Successfully loaded ${de.length} questions from CSV file!`,"success"),U(),Be("multiple-choice")},[j.numOptions,U,r]),jt=_.useCallback(de=>{console.log(" populateTrueFalseFromExcel called with:",de);const ve={};de.forEach((Me,Oe)=>{const nt=Oe+1,bt={question:(Me[0]||"").toString().trim(),correctAnswer:Me[1]?.toString().trim().toLowerCase()==="true"?"true":"false"};ve[nt]=bt}),F(Me=>({...Me,questions:ve})),console.log(" Populated true/false questions from Excel:",ve),r(`Successfully loaded ${de.length} questions from CSV file!`,"success"),q(),Be("true-false")},[q,r]),Mt=_.useCallback(de=>{console.log(" populateInputFromExcel called with:",de);const ve={};de.forEach((Me,Oe)=>{const nt=Oe+1,bt=[];for(let cr=1;cr<Me.length;cr++){const pt=(Me[cr]||"").toString().trim();pt&&bt.push(pt)}const At={question:(Me[0]||"").toString().trim(),correctAnswer:bt[0]||"",correct_answers:bt};console.log(` Excel question ${nt} data:`,At),ve[nt]=At}),F(Me=>({...Me,questions:ve})),console.log(" Populated input questions from Excel:",ve),r(`Successfully loaded ${de.length} questions from Excel file!`,"success"),H(),Be("input")},[H,r]),Be=_.useCallback(de=>{switch(console.log(` Reattaching form event listeners for test type: ${de}`),document.querySelectorAll('[data-listener-attached="true"]').forEach(Me=>{Me.removeEventListener("input",()=>{}),Me.removeAttribute("data-listener-attached")}),de){case"multiple-choice":U();break;case"true-false":q();break;case"input":H();break;default:console.warn("Unknown test type for event listener reattachment:",de)}console.log(` Form event listeners reattached for test type: ${de}`)},[U,q,H]),lt=_.useCallback(()=>{const de=localStorage.getItem("test_creation_state");if(!de)return console.log(" No test creation state found in localStorage"),!1;try{const ve=JSON.parse(de);console.log(" Found test creation state:",ve);const Me=Date.now()-ve.timestamp,Oe=1800*1e3;if(Me>Oe)return console.log(" Test creation state is too old, clearing it"),I(),!1;switch(a(!0),console.log(" Restored isInTestCreation flag to true"),ue(),ve.excelState&&B(),ve.currentStep){case"testTypeSelection":console.log(" Restoring test type selection step"),u("typeSelection");break;case"multipleChoiceForm":console.log(" Restoring multiple choice form step"),g("multipleChoice"),u("formCreation");break;case"trueFalseForm":console.log(" Restoring true/false form step"),g("trueFalse"),u("formCreation");break;case"inputForm":console.log(" Restoring input form step"),g("input"),u("formCreation");break;case"testAssignment":case"assignment":console.log(" Restoring test assignment step"),console.log(" Cannot restore test assignment step without test data, going back to type selection"),u("typeSelection");break;default:console.log(" Unknown step in state, defaulting to type selection"),u("typeSelection")}return D(ve.currentStep),!0}catch(ve){return console.error(" Error restoring test creation state:",ve),I(),!1}},[I,ue,B,D]);_.useEffect(()=>{console.log(" Initializing Teacher Tests..."),Y(),lt(),me(),Ut()},[Y,lt,me,Ut]),_.useEffect(()=>{j.numQuestions>0&&h&&h!=="matching"&&h!=="drawing"&&h!=="fillBlanks"&&(console.log(" Excel upload buttons rendered, initializing event listeners..."),setTimeout(()=>{Ut()},100))},[j.numQuestions,h,Ut]);const ct=de=>{console.log(" Test type selected:",de),console.log(" Setting testType to:",de),g(de),u("formCreation"),F({testName:"",numQuestions:0,numOptions:0,questions:{},enableTimer:!1,timerMinutes:""}),X("formCreation"),setTimeout(()=>{Ut()},100)},Qt=(de,ve)=>{F(Me=>({...Me,[de]:ve}))},rr=(de,ve,Me)=>{F(Oe=>({...Oe,questions:{...Oe.questions,[de]:{...Oe.questions[de],[ve]:Me}}}))},_r=(de,ve,Me,Oe=0)=>{const nt={};for(let bt=1;bt<=Me;bt++)de==="multipleChoice"?nt[bt]={question:"",options:Array.from({length:Oe},()=>""),correctAnswer:""}:de==="trueFalse"?nt[bt]={question:"",correctAnswer:""}:de==="input"&&(nt[bt]={question:"",correct_answers:[""]});F(bt=>({...bt,questions:nt})),de==="multipleChoice"?(te("multiple-choice"),Q("multiple-choice")):de==="trueFalse"?(te("true-false"),Q("true-false")):de==="input"&&(te("input"),Q("input"))},tn=async()=>{if(!h||!j.testName||!j.numQuestions){r("Please fill in all required fields","error");return}console.log(" Test form completed, proceeding to assignment step"),X("testAssignment",j),u("testAssignment"),r("Test form completed! Now select classes and subjects.","success")},Fr=(de,ve,Me,Oe,nt)=>{L(Me?bt=>[...bt,{grade:de,class:ve,subject_id:Oe,subject:nt}]:bt=>bt.filter(At=>!(At.grade===de&&At.class===ve&&At.subject_id===Oe)))},an=_.useCallback(async de=>{console.log(" [DEBUG] handleMatchingTestSave called"),console.log(" [DEBUG] Received testData:",de),console.log(" [DEBUG] Current formData:",j),console.log(" [DEBUG] Current testType:",h),console.log(" [DEBUG] Current user:",e),console.log(" [DEBUG] Current currentStep:",c),w(!0);try{const ve=de.blocks.map((nt,bt)=>{const At=de.words.find(zt=>zt.blockId===nt.id)?.word||`Word ${bt+1}`,cr=de.arrows.some(zt=>zt.startBlock===nt.id),pt=de.arrows.find(zt=>zt.startBlock===nt.id)||null;return{question_id:bt+1,word:At,block_coordinates:{x:nt.x,y:nt.y,width:nt.width,height:nt.height},has_arrow:cr,arrow:pt?{startX:pt.startX,startY:pt.startY,endX:pt.endX,endY:pt.endY,style:pt.style||{}}:null}}),Me={teacher_id:e.teacher_id,test_name:j.testName||`Matching Test - ${new Date().toLocaleString()}`,image_url:de.imageUrl,num_blocks:de.blocks.length,questions:ve,assignments:[]};console.log(" Sending matching test payload:",Me);const Oe={...j,testName:Me.test_name,numQuestions:Me.num_blocks,numOptions:0,questions:ve.reduce((nt,bt,At)=>(nt[At+1]={question:bt.word,correctAnswer:bt.word,options:[]},nt),{}),matchingTestData:de};console.log(" Assignment form data:",Oe),F(Oe),X("testAssignment",Oe),console.log(" Setting current step to testAssignment"),u("testAssignment"),r("Matching test data saved! Now select classes and subjects.","success")}catch(ve){console.error(" Error saving matching test:",ve),r("Failed to save matching test: "+ve.message,"error")}finally{w(!1)}},[e,j,h,r,X]),pe=_.useCallback(()=>{console.log(" Cancelling matching test creation"),u("typeSelection"),F({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),Ne=_.useCallback(async de=>{console.log(" [DEBUG] handleWordMatchingTestSave called"),console.log(" [DEBUG] Received testData:",de),w(!0);try{F(ve=>({...ve,wordMatchingData:de,numQuestions:de.numQuestions||de.wordPairs?.length||0})),u("testAssignment"),r("Word matching test created! Now assign it to classes.","success")}catch(ve){console.error("Error saving word matching test:",ve),r("Failed to save word matching test: "+ve.message,"error")}finally{w(!1)}},[r]),le=_.useCallback(()=>{console.log(" Cancelling word matching test creation"),u("typeSelection"),F({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),fe=_.useCallback(async de=>{console.log(" [DEBUG] handleDrawingTestSave called"),console.log(" [DEBUG] Received testData:",de),w(!0);try{F(ve=>({...ve,drawingData:de,numQuestions:de.num_questions||de.questions?.length||0})),u("testAssignment"),r("Drawing test created! Now assign it to classes.","success")}catch(ve){console.error(" Error saving drawing test:",ve),r("Error saving drawing test","error")}finally{w(!1)}},[r]),ge=_.useCallback(()=>{console.log(" Cancelling drawing test creation"),u("typeSelection"),F({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),Se=_.useCallback(()=>{console.log(" Cancelling fill blanks test creation"),u("typeSelection"),F({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),ze=_.useCallback(async de=>{console.log(" [DEBUG] handleFillBlanksTestSave called"),console.log(" [DEBUG] Received testData:",de),w(!0);try{F(ve=>({...ve,fillBlanksData:de,numQuestions:de.num_questions||de.blanks?.length||0})),u("testAssignment"),r("Fill blanks test created! Now assign it to classes.","success")}catch(ve){console.error(" Error saving fill blanks test:",ve),r("Error saving fill blanks test","error")}finally{w(!1)}},[r]),it=_.useCallback(()=>{console.log(" Cancelling speaking test creation"),u("typeSelection"),F({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),Ye=_.useCallback(async de=>{console.log(" [DEBUG] handleSpeakingTestSave called"),console.log(" [DEBUG] Received testData:",de),w(!0);try{F(ve=>({...ve,speakingData:de,numQuestions:de.questions?.length||0})),u("testAssignment"),r("Speaking test created! Now assign it to classes.","success")}catch(ve){console.error(" Error saving speaking test:",ve),r("Error saving speaking test","error")}finally{w(!1)}},[r]);return l.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[l.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs(Uo,{mode:"wait",children:[c==="typeSelection"&&l.jsxs(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs(ot,{variant:"outline",onClick:()=>window.history.back(),className:"flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),l.jsx("span",{children:"Back to Main"})]}),l.jsx("div",{className:"flex-1"})]}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Create New Test"}),l.jsx("p",{className:"text-gray-600",children:"Choose the type of test you want to create"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{type:"multipleChoice",title:"Multiple Choice",description:"Questions with multiple answer options",icon:"/pics/multiple-choice.png"},{type:"trueFalse",title:"True/False",description:"Questions with true or false answers",icon:"/pics/true-false.png"},{type:"input",title:"Input",description:"Questions requiring text input",icon:"/pics/input.png"},{type:"matching",title:"Picture Matching",description:"Labeling pictures",icon:"/pics/matching.png"},{type:"wordMatching",title:"Word Matching",description:"Matching word pairs by dragging or drawing arrows",icon:"/pics/matching-words.png"},{type:"drawing",title:"Drawing Test",description:"Interactive drawing tests with canvas for students",icon:"/pics/drawing.png"},{type:"fillBlanks",title:"Fill Blanks",description:"Text with multiple choice blanks",icon:"/pics/fill-blanks.png"},{type:"speaking",title:"Speaking Test",description:"Audio recording with AI-powered feedback",icon:"/pics/speaking.png"}].map(({type:de,title:ve,description:Me,icon:Oe})=>l.jsx(ht.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"cursor-pointer",onClick:()=>ct(de),children:l.jsxs(Ht,{className:"h-full text-center hover:shadow-lg transition-shadow",children:[l.jsx("div",{className:"mb-3 flex justify-center",children:l.jsx("img",{src:Oe,alt:ve,className:"w-12 h-12 object-contain"})}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:ve}),l.jsx("p",{className:"text-sm text-gray-600",children:Me})]})},de))})]}),c==="formCreation"&&l.jsxs(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"flex space-x-2",children:l.jsx(ot,{variant:"outline",onClick:re,children:" Back to Test Types"})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Create ",h==="multipleChoice"?"Multiple Choice":h==="trueFalse"?"True/False":h==="input"?"Input":h==="drawing"?"Drawing":h==="fillBlanks"?"Fill Blanks":h==="wordMatching"?"Word Matching":h==="speaking"?"Speaking":"Picture Matching"," Test"]}),l.jsx("p",{className:"text-gray-600",children:"Fill in the test details and questions"})]})]})}),l.jsx(Ht,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Information"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Test Name"}),l.jsx("input",{type:"text",value:j.testName,onChange:de=>Qt("testName",de.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter test name"})]}),h!=="matching"&&h!=="wordMatching"&&h!=="drawing"&&h!=="fillBlanks"&&h!=="speaking"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Questions"}),l.jsx("input",{type:"number",min:"1",max:"50",value:j.numQuestions,onChange:de=>{const ve=parseInt(de.target.value)||0;Qt("numQuestions",ve),ve>0&&_r(h,j.testName,ve,j.numOptions)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter number of questions"})]}),h==="multipleChoice"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Options per Question"}),l.jsx("input",{type:"number",min:"2",max:"6",value:j.numOptions,onChange:de=>{const ve=parseInt(de.target.value)||0;Qt("numOptions",ve),ve>0&&ve<2&&r("Multiple choice tests require at least 2 options per question. Please enter 2 or more.","warning"),j.numQuestions>0&&_r(h,j.testName,j.numQuestions,ve)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter number of options (2-6)"})]}),h!=="speaking"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("label",{className:"inline-flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:!!j.enableTimer,onChange:de=>Qt("enableTimer",de.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),l.jsx("span",{className:"text-sm text-gray-700",children:"Enable timer for this test"})]}),j.enableTimer&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm text-gray-700",children:"Time (minutes):"}),l.jsx("input",{type:"number",min:"1",max:"1440",value:j.timerMinutes,onChange:de=>Qt("timerMinutes",de.target.value.replace(/[^0-9]/g,"")),className:"w-28 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g. 30"})]})]}),h!=="drawing"&&h!=="matching"&&h!=="wordMatching"&&h!=="fillBlanks"&&h!=="speaking"&&l.jsx("div",{className:"flex items-center space-x-2",children:l.jsxs("label",{className:"inline-flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:!!j.isShuffled,onChange:de=>Qt("isShuffled",de.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),l.jsx("span",{className:"text-sm text-gray-700",children:"Shuffle questions during test"})]})})]})]})}),h==="matching"&&l.jsx(Ht,{children:l.jsxs("div",{className:"space-y-4 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Picture Matching Test"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Upload an image and create interactive matching blocks with words."}),l.jsx(Vae,{testName:j.testName,onTestSaved:an,onCancel:pe,onBackToCabinet:rt,isSaving:S,validationErrors:{}})]})}),h==="wordMatching"&&l.jsx(Ht,{children:l.jsxs("div",{className:"space-y-4 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Word Matching Test"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Create word pairs for students to match by dragging or drawing arrows."}),l.jsx(Qde,{testName:j.testName,onTestSaved:Ne,onCancel:le,onBackToCabinet:rt,isSaving:S,validationErrors:{}})]})}),h==="drawing"&&l.jsxs(Ht,{children:[console.log(" Rendering DrawingTestCreator, testType:",h),l.jsx(Ice,{testName:j.testName,onTestSaved:fe,onCancel:ge,onBackToCabinet:rt,isSaving:S,validationErrors:{}})]}),h==="fillBlanks"&&l.jsxs(Ht,{children:[console.log(" Rendering FillBlanksTestCreator, testType:",h),l.jsx(Uce,{testName:j.testName,allowedTime:j.enableTimer&&parseInt(j.timerMinutes)||null,onTestSaved:ze,onCancel:Se,onBackToCabinet:rt,isSaving:S,validationErrors:{}})]}),h==="speaking"&&l.jsxs(Ht,{children:[console.log(" Rendering SpeakingTestCreator, testType:",h),l.jsx(Wce,{testName:j.testName,onTestSaved:Ye,onCancel:it,onBackToCabinet:rt,isSaving:S,validationErrors:{}})]}),h!=="matching"&&h!=="drawing"&&h!=="fillBlanks"&&h!=="speaking"&&j.numQuestions>0&&l.jsx(Ht,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Excel Upload"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Upload an Excel file to automatically populate questions, or fill them in manually below."}),l.jsxs("div",{className:"space-y-6",children:[h==="multipleChoice"&&Ge.multipleChoice?.buttonVisible&&l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"multiple-choice",disabled:T,children:T?l.jsxs(l.Fragment,{children:[l.jsx(un,{size:"sm",color:"white"}),l.jsx("span",{className:"font-medium",children:"Processing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),l.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),l.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"multiple-choice"})]}),l.jsx("div",{className:"w-fit",children:l.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:l.jsxs("div",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Multiple Choice Format:"}),l.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[l.jsx("div",{children:"Column 1: Question"}),l.jsx("div",{children:"Column 2: Correct Answer (A-F)"}),l.jsx("div",{children:"Column 3: Option A text"}),l.jsx("div",{children:"Column 4: Option B text"}),l.jsx("div",{children:"Column 5: Option C text"}),l.jsx("div",{children:"Column 6: Option D text"})]})]})})})]}),h==="trueFalse"&&Ge.trueFalse?.buttonVisible&&l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"true-false",disabled:T,children:T?l.jsxs(l.Fragment,{children:[l.jsx(un,{size:"sm",color:"white"}),l.jsx("span",{className:"font-medium",children:"Processing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),l.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),l.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"true-false"})]}),l.jsx("div",{className:"w-fit",children:l.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:l.jsxs("div",{className:"text-xs text-blue-800",children:[l.jsxs("div",{children:[l.jsx("strong",{children:"Format:"})," Question | Answer (true/false)"]}),l.jsxs("div",{className:"mt-1",children:[l.jsx("strong",{children:"Example:"})," The Earth is round | true"]}),l.jsxs("div",{className:"mt-1",children:[l.jsx("strong",{children:"Note:"})," Headers are optional"]})]})})})]}),h==="input"&&Ge.input?.buttonVisible&&l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"input",disabled:T,children:T?l.jsxs(l.Fragment,{children:[l.jsx(un,{size:"sm",color:"white"}),l.jsx("span",{className:"font-medium",children:"Processing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),l.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),l.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"input"})]}),l.jsx("div",{className:"w-fit",children:l.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:l.jsxs("div",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Input Test Format:"}),l.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[l.jsx("div",{children:"Column 1: Question"}),l.jsx("div",{children:"Column 2: Answer 1"}),l.jsx("div",{children:"Column 3: Answer 2 (optional)"})]})]})})})]})]})]})}),h!=="matching"&&h!=="drawing"&&h!=="fillBlanks"&&j.numQuestions>0&&l.jsx(Ht,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Manual Question Entry"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Fill in the questions manually using the form below."})]})}),j.numQuestions>0&&l.jsx(Ht,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Questions"}),l.jsx("div",{className:"space-y-6",children:Object.keys(j.questions).map(de=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Question ",de]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{value:j.questions[de]?.question||"",onChange:ve=>rr(de,"question",ve.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"Enter the question text",id:`question_${de}`}),l.jsx(Fl,{showPreview:!0,inputRef:()=>document.getElementById(`question_${de}`),onChange:ve=>rr(de,"question",ve.target.value)})]})]}),h==="multipleChoice"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answer Options"}),l.jsx("div",{className:"space-y-2",children:j.questions[de]?.options?.map((ve,Me)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("span",{className:"w-6 text-sm font-medium text-gray-700",children:[String.fromCharCode(65+Me),":"]}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",value:ve,onChange:Oe=>{const nt=[...j.questions[de].options];nt[Me]=Oe.target.value,rr(de,"options",nt)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Option ${String.fromCharCode(65+Me)}`,id:`option_${de}_${Me}`}),l.jsx(Fl,{showPreview:!0,inputRef:()=>document.getElementById(`option_${de}_${Me}`),onChange:Oe=>{const nt=[...j.questions[de].options];nt[Me]=Oe.target.value,rr(de,"options",nt)}})]})]},Me))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer"}),h==="multipleChoice"?l.jsx("div",{children:l.jsxs("select",{value:j.questions[de]?.correctAnswer||"",onChange:ve=>rr(de,"correctAnswer",ve.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"",children:"Select correct answer"}),j.questions[de]?.options?.map((ve,Me)=>l.jsx("option",{value:String.fromCharCode(65+Me),children:String.fromCharCode(65+Me)},Me))]})}):h==="trueFalse"?l.jsxs("select",{value:j.questions[de]?.correctAnswer||"",onChange:ve=>rr(de,"correctAnswer",ve.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"",children:"Select correct answer"}),l.jsx("option",{value:"true",children:"True"}),l.jsx("option",{value:"false",children:"False"})]}):l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer(s)"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",value:j.questions[de]?.correct_answers?.[0]||"",onChange:ve=>{const Oe=[...j.questions[de]?.correct_answers||[""]];Oe[0]=ve.target.value,rr(de,"correct_answers",Oe)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter the primary correct answer",id:`answer_${de}_0`}),l.jsx(Fl,{showPreview:!0,inputRef:()=>document.getElementById(`answer_${de}_0`),onChange:ve=>{const Oe=[...j.questions[de]?.correct_answers||[""]];Oe[0]=ve.target.value,rr(de,"correct_answers",Oe)}})]}),j.questions[de]?.correct_answers?.slice(1).map((ve,Me)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",value:ve,onChange:Oe=>{const nt=[...j.questions[de]?.correct_answers||[]];nt[Me+1]=Oe.target.value,rr(de,"correct_answers",nt)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Alternative answer ${Me+2}`,id:`answer_${de}_${Me+1}`}),l.jsx(Fl,{showPreview:!0,inputRef:()=>document.getElementById(`answer_${de}_${Me+1}`),onChange:Oe=>{const nt=[...j.questions[de]?.correct_answers||[]];nt[Me+1]=Oe.target.value,rr(de,"correct_answers",nt)}})]}),l.jsx("button",{type:"button",onClick:()=>{const Oe=[...j.questions[de]?.correct_answers||[]];Oe.splice(Me+1,1),rr(de,"correct_answers",Oe)},className:"px-2 py-1 text-red-600 hover:text-red-800 text-sm",children:"Remove"})]},Me))||[],l.jsx("button",{type:"button",onClick:()=>{const Me=[...j.questions[de]?.correct_answers||[""],""];rr(de,"correct_answers",Me)},className:"px-3 py-1 text-blue-600 hover:text-blue-800 text-sm border border-blue-300 rounded-md hover:bg-blue-50",children:"+ Add Alternative Answer"})]}),l.jsx("p",{className:"text-xs text-gray-500",children:"You can add multiple correct answers for the same question. Students will get credit for any of them."})]})]})]})]},de))})]})}),j.testName&&j.numQuestions>0&&l.jsx("div",{className:"flex justify-end",children:l.jsx(ot,{onClick:tn,disabled:S,className:"px-8",children:S?l.jsxs(l.Fragment,{children:[l.jsx(un,{size:"sm",color:"white",className:"mr-2"}),"Saving Test..."]}):"Save Test & Continue to Assignment"})})]}),c==="testAssignment"&&l.jsxs(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs(ot,{variant:"outline",onClick:()=>window.history.back(),className:"flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),l.jsx("span",{children:"Back to Main"})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Assign Test to Classes"}),l.jsx("p",{className:"text-gray-600",children:"Select which classes should take this test"})]})]}),l.jsx(ot,{variant:"outline",onClick:()=>u("formCreation"),children:" Back to Test Form"})]}),l.jsx(Ht,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Available Classes"}),p.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("p",{className:"text-gray-500 text-lg",children:"No subjects available for assignment."}),l.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"You need to assign subjects to grades and classes first."}),l.jsx("div",{className:"mt-4",children:l.jsx(ot,{onClick:()=>window.location.href="/teacher/subjects",className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Go to Subjects Page"})})]}):l.jsx("div",{className:"space-y-6",children:p.map(de=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:de.subject}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2",children:de.classes.map(ve=>l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:R.some(Me=>Me.grade===ve.grade&&Me.class===ve.class&&Me.subject_id===de.subject_id),onChange:Me=>Fr(ve.grade,ve.class,Me.target.checked,de.subject_id,de.subject),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsxs("span",{className:"text-sm text-gray-700",children:[ve.grade,"/",ve.class]})]},`${ve.grade}-${ve.class}-${de.subject_id}`))})]},de.subject_id))})]})}),R.length>0&&l.jsx("div",{className:"flex justify-end",children:l.jsx(ot,{onClick:()=>He(h,null),disabled:v,className:"px-8",children:v?l.jsxs(l.Fragment,{children:[l.jsx(un,{size:"sm",color:"white",className:"mr-2"}),"Assigning Test..."]}):`Assign Test to ${R.length} Class${R.length>1?"es":""}`})})]})]})}),console.log(" Checking isAssigningTest:",A),A&&l.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Assigning test to classes..."}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we process your assignment"})]})}),S&&l.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Saving test..."}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we save your test"})]})}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:t.map(de=>l.jsx(du,{type:de.type,message:de.message,duration:de.duration,onClose:()=>n(de.id)},de.id))})]})},Cje=({onDataLoaded:e,onError:t})=>{const r=Ko(),{user:n,isAuthenticated:s}=Is(),{teacherData:a,loadTeacherData:i}=dS(),[o,c]=_.useState(!0),[u,d]=_.useState(""),[f,h]=_.useState([]),[g,p]=_.useState(null),[y,v]=_.useState([]),[C,S]=_.useState([]),[w,T]=_.useState([]),[N,A]=_.useState(null),[P,j]=_.useState(0);_.useEffect(()=>{Y()},[]),_.useCallback(async ue=>{console.log(" Teacher login attempt...");try{const z=await Us.teacherLogin(ue);if(z.success)return Z("Login successful!","success"),await F(),z;throw new Error(z.error||"Login failed")}catch(z){throw console.error(" Teacher login error:",z),Z("Login failed. Please check your credentials.","error"),z}},[]);const F=_.useCallback(async()=>{console.log(" Loading teacher data...");try{if(c(!0),d(""),!s||!n){console.log(" User not authenticated"),d("User not authenticated");return}if(n.role!==$o.TEACHER){console.error(" Invalid user role for teacher data:",n.role),d("Access denied. Teacher role required.");return}console.log(" Fetching teacher data from service...");const ue=await Us.getTeacherData();if(ue&&ue.success)console.log(" Teacher data loaded successfully:",ue),p(ue.teacher||n),ue.subjects&&(v(ue.subjects),console.log(" Teacher subjects loaded:",ue.subjects.length)),ue.grades&&S(ue.grades),ue.classes&&T(ue.classes),A(new Date),j(z=>z+1),e&&e(ue),Z("Teacher data loaded successfully!","success");else throw new Error(ue?.error||"Failed to load teacher data")}catch(ue){console.error(" Error loading teacher data:",ue);const z=ue.message||"Failed to load teacher data";d(z),t&&t(ue),Z(z,"error")}finally{c(!1)}},[s,n,e,t]),R=_.useCallback(()=>{console.log(" Returning to main cabinet..."),r("/teacher/cabinet")},[r]);_.useCallback(ue=>{console.log(" Showing main cabinet with subjects:",ue),ue&&v(ue),r("/teacher/cabinet")},[r]);const L=_.useCallback(()=>(console.log(" Rendering grade buttons..."),["M1","M2","M3","M4","M5","M6"].map(z=>({id:z,name:`Grade ${z}`,classes:V(z)}))),[]),V=_.useCallback(ue=>Array.from({length:10},(X,I)=>I+1).map(X=>({id:`${ue}-${X}`,name:`Class ${X}`,grade:ue,classNumber:X})),[]),Z=_.useCallback((ue,z)=>{const X={id:Date.now(),message:ue,type:z,timestamp:new Date};h(I=>[...I,X]),setTimeout(()=>{h(I=>I.filter(B=>B.id!==X.id))},eg.NOTIFICATION_DURATION)},[]),Y=_.useCallback(async()=>{console.log(" Initializing teacher data..."),await F()},[F]),re=_.useCallback(async()=>{console.log(" Refreshing teacher data..."),await F()},[F]);return _.useCallback(async ue=>{console.log(" Updating teacher profile:",ue);try{const z=await Us.updateUserProfile(ue);if(z.success)return p(X=>({...X,...ue})),Z("Profile updated successfully!","success"),z;throw new Error(z.error||"Failed to update profile")}catch(z){throw console.error(" Error updating teacher profile:",z),Z("Failed to update profile","error"),z}},[]),_.useCallback(async ue=>{console.log(" Changing teacher password...");try{const z=await Us.changePassword(ue);if(z.success)return Z("Password changed successfully!","success"),z;throw new Error(z.error||"Failed to change password")}catch(z){throw console.error(" Error changing teacher password:",z),Z("Failed to change password","error"),z}},[]),o?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(un,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Data..."})]})}):u?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Data Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:u}),l.jsxs("div",{className:"flex space-x-3 justify-center",children:[l.jsx(ot,{variant:"primary",onClick:re,children:"Retry"}),l.jsx(ot,{variant:"outline",onClick:R,children:"Go Back"})]})]})})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Teacher Data"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",N?N.toLocaleString():"Never"," | Version: ",P]})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx(ot,{variant:"outline",onClick:re,children:"Refresh Data"}),l.jsx(ot,{variant:"outline",onClick:R,children:"Back to Cabinet"})]})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Teacher Information"}),g?l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Name:"}),l.jsx("p",{className:"text-sm text-gray-900",children:g.name||"N/A"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Username:"}),l.jsx("p",{className:"text-sm text-gray-900",children:g.username||"N/A"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Email:"}),l.jsx("p",{className:"text-sm text-gray-900",children:g.email||"N/A"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Role:"}),l.jsx("p",{className:"text-sm text-gray-900",children:g.role||"N/A"})]})]}):l.jsx("p",{className:"text-gray-500",children:"No teacher information available"})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Subjects (",y.length,")"]}),y.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map((ue,z)=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h3",{className:"font-medium text-gray-900",children:ue.name}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ue.description||"No description"}),ue.classes&&ue.classes.length>0&&l.jsxs("div",{className:"mt-2",children:[l.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Classes:"}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:ue.classes.map((X,I)=>l.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:[X.grade," - ",X.className]},I))})]})]},z))}):l.jsx("p",{className:"text-gray-500",children:"No subjects assigned"})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grade Levels"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:L().map(ue=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:ue.name}),l.jsx("div",{className:"grid grid-cols-5 gap-1",children:ue.classes.map(z=>l.jsx("button",{className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",onClick:()=>console.log("Class clicked:",z),children:z.classNumber},z.id))})]},ue.id))})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Statistics"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-semibold text-blue-600",children:y.length}),l.jsx("p",{className:"text-sm text-gray-500",children:"Subjects"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-semibold text-green-600",children:C.length}),l.jsx("p",{className:"text-sm text-gray-500",children:"Grades"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-semibold text-yellow-600",children:w.length}),l.jsx("p",{className:"text-sm text-gray-500",children:"Classes"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-semibold text-purple-600",children:P}),l.jsx("p",{className:"text-sm text-gray-500",children:"Data Version"})]})]})]})]})}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:f.map(ue=>l.jsx(du,{type:ue.type,message:ue.message,onClose:()=>h(z=>z.filter(X=>X.id!==ue.id))},ue.id))})]})},Tje=({onBackToCabinet:e})=>{const t=Ko(),{user:r,isAuthenticated:n}=Is(),{teacherData:s}=dS(),[a,i]=_.useState(!0),[o,c]=_.useState(""),[u,d]=_.useState([]),[f,h]=_.useState([]),[g,p]=_.useState([]),[y,v]=_.useState([]),[C,S]=_.useState(null),[w,T]=_.useState([]),[N,A]=_.useState(!1),[P,j]=_.useState(!1),[F,R]=_.useState(!1),[L,V]=_.useState(!1),[Z,Y]=_.useState(null),[re,ue]=_.useState(!0),[z,X]=_.useState(null);_.useEffect(()=>{Ke()},[]),_.useCallback(Pe=>{console.log(" Rendering existing subjects:",Pe),h(Pe)},[]);const I=_.useCallback(()=>{console.log(" Showing subject selection prompt..."),A(!0),ue(!1),B()},[]),B=_.useCallback(async()=>{console.log(" Loading existing subjects...");try{const Pe=await Us.getTeacherSubjects();Pe.success&&Pe.subjects&&Pe.subjects.length>0?(console.log(" Existing subjects found:",Pe.subjects),W(Pe.subjects)):(console.log(" No existing subjects found"),v([]))}catch(Pe){console.error(" Error loading existing subjects:",Pe),_t("Failed to load existing subjects","error")}},[]),W=_.useCallback(Pe=>{console.log(" Rendering subject selection:",Pe);const je=[];Pe.forEach(Qe=>{Qe.classes&&Array.isArray(Qe.classes)&&Qe.classes.forEach(vt=>{je.push({id:`${Qe.subject_id}-${vt.grade}-${vt.class}`,subjectId:Qe.subject_id,subjectName:Qe.subject,grade:vt.grade,class:vt.class,displayText:`${Qe.subject} - ${vt.grade}/${vt.class}`})})}),v(je),console.log(" Processed subjects for selection:",je)},[]),D=_.useCallback(async Pe=>{if(console.log(" Saving teacher subjects:",Pe),!Pe||Pe.length===0){_t("Please select at least one subject and class combination.","warning");return}try{const je=Pe.reduce((vt,Ot)=>{const $t=vt.find(Gt=>Gt.subject_id===Ot.subjectId);return $t?$t.classes.push({grade:Ot.grade,class:Ot.class}):vt.push({subject_id:Ot.subjectId,classes:[{grade:Ot.grade,class:Ot.class}]}),vt},[]);console.log(" Transformed data for backend:",je);const Qe=await Us.saveTeacherSubjects(je);if(Qe.success)_t("Subjects saved successfully!","success"),A(!1),ue(!0),X(new Date),await B();else throw new Error(Qe.error||"Failed to save subjects")}catch(je){console.error(" Error saving subjects:",je),_t("Error saving subjects. Please try again.","error")}},[]),U=_.useCallback(()=>{console.log(" Toggling subject dropdown..."),j(Pe=>!Pe),R(!1)},[]),q=_.useCallback(async()=>{console.log(" Loading subjects for dropdown...");try{const Pe=await Us.getAllSubjects();if(Pe.success)p(Pe.subjects||[]),console.log(" Available subjects loaded:",Pe.subjects?.length||0);else throw new Error(Pe.error||"Failed to load subjects")}catch(Pe){console.error(" Error loading subjects for dropdown:",Pe),_t("Failed to load subjects","error")}},[]),H=_.useCallback(Pe=>{console.log(" Subject selected:",Pe);const je=g.find(Qe=>Qe.subject_id===parseInt(Pe));je&&(S(je),R(!0),j(!1),te())},[g]),te=_.useCallback(()=>{console.log(" Loading grades and classes...")},[]),Q=_.useCallback((Pe,je)=>{console.log(" Saving classes for subject:",Pe,je);const Qe={id:`${Pe.subject_id}-${Date.now()}`,subjectId:Pe.subject_id,subjectName:Pe.subject,grade:je.grade,class:je.class,displayText:`${Pe.subject} - ${je.grade}/${je.class}`};v(vt=>[...vt,Qe]),S(null),T([]),R(!1),ce(`Added ${Pe.subject} for ${je.grade}/${je.class}`)},[]),ae=_.useCallback(()=>{console.log(" Resetting subject selection..."),S(null),T([]),j(!1),R(!1)},[]),ce=_.useCallback(Pe=>{console.log(" Showing message:",Pe),_t(Pe,"success")},[]),me=_.useCallback(Pe=>{console.log(" Showing confirmation modal:",Pe),Y(Pe),V(!0)},[]),xe=_.useCallback(()=>{console.log(" Hiding confirmation modal..."),V(!1),Y(null)},[]),se=_.useCallback(()=>{console.log(" Confirming save subjects..."),xe(),D(y)},[y,D,xe]),De=_.useCallback(()=>{console.log(" Cancelling save subjects..."),xe()},[xe]),He=_.useCallback(Pe=>{console.log(" Removing subject:",Pe),v(je=>je.filter(Qe=>Qe.id!==Pe)),_t("Subject removed","info")},[]);_.useCallback(()=>{console.log(" Showing edit subjects button..."),ue(!0)},[]),_.useCallback(()=>{console.log(" Hiding edit subjects button..."),ue(!1)},[]);const rt=_.useCallback(Pe=>{console.log(" Generating class buttons for grade:",Pe);let je;return Pe===1||Pe===2?je=["15","16"]:Pe===3?je=["15","16"]:Pe===4?je=["13","14"]:Pe===5||Pe===6?je=["13","14"]:je=[],je.map(Qe=>({id:`${Pe}-${Qe}`,grade:Pe,class:Qe,displayText:`${Pe}/${Qe}`}))},[]);_.useCallback((Pe,je)=>{console.log(" Showing class results:",Pe,je),t("/teacher/results")},[t]);const _t=_.useCallback((Pe,je)=>{const Qe={id:Date.now(),message:Pe,type:je,timestamp:new Date};d(vt=>[...vt,Qe]),setTimeout(()=>{d(vt=>vt.filter(Ot=>Ot.id!==Qe.id))},eg.NOTIFICATION_DURATION)},[]),Ke=_.useCallback(async()=>{console.log(" Initializing teacher subjects...");try{if(i(!0),c(""),!n||!r){console.log(" User not authenticated"),c("User not authenticated");return}if(r.role!==$o.TEACHER){console.error(" Invalid user role for teacher subjects:",r.role),c("Access denied. Teacher role required.");return}await B(),await q(),console.log(" Teacher subjects initialization complete!")}catch(Pe){console.error(" Error initializing teacher subjects:",Pe),c("Failed to initialize teacher subjects")}finally{i(!1)}},[n,r,B,q]),tt=_.useCallback(()=>{e?e():t("/teacher/cabinet")},[e,t]);return a?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(un,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Subjects..."})]})}):o?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Subjects Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:o}),l.jsx(ot,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Subject Management"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",z?z.toLocaleString():"Never"]})]}),l.jsxs("div",{className:"flex space-x-3",children:[re&&l.jsx(ot,{variant:"primary",onClick:I,children:"Edit Subjects"}),l.jsx(ot,{variant:"outline",onClick:tt,children:"Back to Cabinet"})]})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"space-y-6",children:[!N&&l.jsxs("div",{className:`\r
              bg-white rounded-xl shadow-md border border-gray-200 p-6\r
              hover:shadow-lg hover:-translate-y-1 transition-all duration-200\r
            `,children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Assigned Subjects"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your teaching subjects and class assignments"})]}),l.jsx("div",{className:"flex space-x-3",children:l.jsxs(ot,{variant:"primary",onClick:I,className:"px-6 py-2",children:[l.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Subjects"]})})]}),f.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map((Pe,je)=>l.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6 hover:shadow-md transition-shadow duration-200",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:Pe.subject}),Pe.classes&&Pe.classes.length>0&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Assigned Classes:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:Pe.classes.map((Qe,vt)=>l.jsxs("span",{className:"px-3 py-1 bg-blue-500 text-white text-sm font-medium rounded-full",children:["Grade ",Qe.grade," - Class ",Qe.class]},vt))})]})]}),l.jsx("div",{className:"ml-4",children:l.jsx(ot,{variant:"outline",size:"sm",onClick:()=>He(Pe.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-300",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})},je))}):l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:l.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No subjects assigned yet"}),l.jsx("p",{className:"text-gray-500 mb-6",children:"Get started by adding your teaching subjects and class assignments"}),l.jsxs(ot,{variant:"primary",onClick:I,className:"px-6 py-3",children:[l.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Your First Subject"]})]})]}),N&&l.jsxs("div",{className:`\r
              bg-white rounded-xl shadow-md border border-gray-200 p-6\r
              hover:shadow-lg hover:-translate-y-1 transition-all duration-200\r
            `,children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Select Subjects and Classes"}),l.jsx("p",{className:"text-gray-600",children:"Choose the subjects you want to teach and assign them to specific classes"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:l.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:"1"})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-lg font-semibold text-gray-900",children:"Select Subject"}),l.jsx("p",{className:"text-gray-600",children:"Choose the subject you want to teach"})]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs(ot,{variant:"outline",onClick:U,className:"w-full justify-between p-4 h-auto text-left border-2 border-gray-200 hover:border-blue-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white rounded-xl shadow-sm",children:[l.jsx("span",{className:"text-gray-900 font-medium",children:C?C.subject:"Select a subject"}),l.jsx("svg",{className:"w-5 h-5 ml-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),P&&l.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border-2 border-gray-200 rounded-xl shadow-xl max-h-60 overflow-y-auto",children:g.map(Pe=>l.jsx("button",{onClick:()=>H(Pe.subject_id),className:"w-full px-4 py-4 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 border-b border-gray-100 last:border-b-0",children:l.jsx("span",{className:"text-gray-900 font-medium",children:Pe.subject})},Pe.subject_id))})]})]}),F&&C&&l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3",children:l.jsx("span",{className:"text-green-600 font-semibold text-sm",children:"2"})}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Select Classes for ",C.subject]}),l.jsx("p",{className:"text-gray-600",children:"Choose which classes you want to teach this subject to"})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(Pe=>l.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-6 hover:shadow-md transition-shadow duration-200",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-2",children:l.jsx("span",{className:"text-white font-bold text-xs",children:Pe})}),l.jsxs("h4",{className:"font-semibold text-gray-900",children:["Grade ",Pe]})]}),l.jsx("div",{className:"space-y-3",children:rt(Pe).map(je=>l.jsx(ot,{variant:"outline",size:"sm",onClick:()=>Q(C,je),className:"w-full text-sm py-2 px-4 border-green-300 hover:border-green-400 hover:bg-green-100 focus:ring-2 focus:ring-green-500 rounded-lg font-medium",children:je.displayText},je.id))})]},Pe))})]}),y.length>0&&l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3",children:l.jsx("span",{className:"text-purple-600 font-semibold text-sm",children:"3"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Selected Subjects"}),l.jsx("p",{className:"text-gray-600",children:"Review your subject and class selections"})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map(Pe=>l.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4 hover:shadow-md transition-shadow duration-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"flex-1",children:l.jsx("span",{className:"text-sm font-semibold text-purple-900",children:Pe.displayText})}),l.jsx(ot,{variant:"outline",size:"sm",onClick:()=>He(Pe.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-300 focus:ring-2 focus:ring-red-500 rounded-lg",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},Pe.id))})]}),l.jsxs("div",{className:"flex justify-between items-center pt-6 border-t-2 border-gray-100",children:[l.jsx("div",{className:"text-sm text-gray-500",children:y.length>0?`${y.length} subject${y.length>1?"s":""} selected`:"No subjects selected"}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs(ot,{variant:"outline",onClick:()=>{A(!1),ue(!0),ae()},className:"px-6 py-3 text-sm font-medium text-gray-700 bg-white border-2 border-gray-300 hover:bg-gray-50 focus:ring-2 focus:ring-gray-500 rounded-xl",children:[l.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]}),l.jsxs(ot,{variant:"primary",onClick:()=>me({type:"save",data:y}),disabled:y.length===0,className:"px-8 py-3 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-indigo-600 border border-transparent rounded-xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[l.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),F?"Next: Select Classes":"Save Subjects"]})]})]})]})]})]})}),L&&l.jsx(Aa,{isOpen:L,onClose:xe,title:"Confirm Save",variant:"confirmation",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to save ",Z?.data?.length||0," subject assignments?"]}),l.jsxs("div",{className:"flex justify-end space-x-3",children:[l.jsx(ot,{variant:"outline",onClick:De,children:"Cancel"}),l.jsx(ot,{variant:"primary",onClick:se,children:"Save"})]})]})}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:u.map(Pe=>l.jsx(du,{type:Pe.type,message:Pe.message,onClose:()=>d(je=>je.filter(Qe=>Qe.id!==Pe.id))},Pe.id))})]})},Eje=()=>{const{user:e,role:t,isAuthenticated:r,isLoading:n}=Is(),[s,a]=_.useState("cabinet");return!r||t!=="teacher"?l.jsx(zp,{to:"/login",replace:!0}):n?l.jsxs("div",{className:"teacher-app-loading",children:[l.jsx(un,{}),l.jsx("p",{children:"Loading teacher interface..."})]}):l.jsx("div",{className:"teacher-app",children:l.jsxs(QC,{children:[l.jsx(Js,{path:"/",element:l.jsx(tB,{})}),l.jsx(Js,{path:"/cabinet",element:l.jsx(tB,{})}),l.jsx(Js,{path:"/tests",element:l.jsx(rB,{})}),l.jsx(Js,{path:"/tests/create",element:l.jsx(rB,{})}),l.jsx(Js,{path:"/data",element:l.jsx(Cje,{})}),l.jsx(Js,{path:"/subjects",element:l.jsx(Tje,{})}),l.jsx(Js,{path:"/results",element:l.jsx(IV,{})}),l.jsx(Js,{path:"*",element:l.jsx(zp,{to:"/teacher",replace:!0})})]})})},Ze={container:"min-h-screen bg-gradient-to-br from-purple-50 to-indigo-100",mainContainer:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",header:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg",headerContent:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",headerFlex:"flex justify-between items-center",adminInfo:"flex items-center space-x-4",adminAvatar:"h-12 w-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",adminText:"text-lg sm:text-xl md:text-2xl font-bold text-white",adminSubtext:"text-purple-100 text-sm sm:text-base md:text-lg",menuContainer:"relative admin-menu",menuButton:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border-white/20 text-white hover:bg-white/20 font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm border-2",menuDropdown:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg z-50 overflow-hidden",menuItem:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-purple-50 transition-colors",menuItemLogout:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-red-50 transition-colors",cardContainer:"bg-white rounded-xl shadow-lg border border-gray-200 hover:shadow-xl transition-shadow duration-300",cardHeader:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-indigo-50",cardTitle:"text-xl font-bold text-gray-800",cardBody:"p-6",buttonGroup:"flex flex-wrap gap-3 mb-6",buttonPrimary:"bg-purple-600 hover:bg-purple-700 text-white font-medium px-4 py-2 rounded-lg transition-colors duration-200",buttonSecondary:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium px-4 py-2 rounded-lg transition-colors duration-200",formContainer:"bg-gray-50 rounded-lg p-6 border border-gray-200",formGrid:"grid grid-cols-1 md:grid-cols-2 gap-4",formGroup:"space-y-2",formLabel:"block text-sm font-medium text-gray-700",formInput:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors duration-200",formCheckbox:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded",formActions:"flex space-x-3 pt-4",table:"min-w-full divide-y divide-gray-200",tableHeader:"bg-gray-50",tableHeaderCell:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",tableBody:"bg-white divide-y divide-gray-200",tableRow:"hover:bg-gray-50 transition-colors duration-150",tableCell:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",statusActive:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",statusInactive:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",modalOverlay:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",modalContent:"bg-white rounded-lg p-6 w-full max-w-md mx-4 shadow-xl",modalTitle:"text-xl font-semibold text-gray-900 mb-4",modalActions:"flex space-x-3 pt-4"},Nje=()=>{const{user:e,isAdmin:t,logout:r}=Is(),{get:n,post:s,delete:a}=Gl(),i=_.useCallback(async()=>{try{h({type:"info",message:"Checking for overdue assignments..."});const Te=await s("/.netlify/functions/check-overdue-assignments",{});if(Te&&Te.success){const Tt=Te.overdue_count||0;Tt>0?h({type:"success",message:`Found and marked ${Tt} overdue assignments as inactive.`}):h({type:"info",message:"No overdue assignments found."})}else h({type:"error",message:Te?.error||"Failed to check assignments"})}catch(Te){h({type:"error",message:"Failed to check assignments"}),console.error("Check overdue assignments error:",Te)}},[s]),[o,c]=_.useState(!1),[u,d]=_.useState(null),[f,h]=_.useState(null),[g,p]=_.useState(!1),[y,v]=_.useState(!1),[C,S]=_.useState(!1),[w,T]=_.useState(!1),[N,A]=_.useState(""),[P,j]=_.useState(null),[F,R]=_.useState({}),[L,V]=_.useState(null),[Z,Y]=_.useState({}),[re,ue]=_.useState(null),[z,X]=_.useState({}),[I,B]=_.useState([]),[W,D]=_.useState(""),[U,q]=_.useState(""),[H,te]=_.useState(""),[Q,ae]=_.useState("all"),[ce,me]=_.useState(!0),[xe,se]=_.useState(!1),[De,He]=_.useState([]),[rt,_t]=_.useState(""),[Ke,tt]=_.useState(""),[Pe,je]=_.useState(""),[Qe,vt]=_.useState(new Set),[Ot,$t]=_.useState(!1),[Gt,ir]=_.useState(!1),[dt,gt]=_.useState([]),[kt,Ge]=_.useState([]),[Xe,Et]=_.useState([]),[Ut,Wt]=_.useState([]),[pr,wr]=_.useState(!1),[br,lr]=_.useState(!1),[Er,we]=_.useState(!1),[_e,Ee]=_.useState(!1),[Fe,at]=_.useState({grade:"",class:"",number:"",student_id:"",name:"",surname:"",nickname:"",password:"",is_active:!0}),[jt,Mt]=_.useState({teacher_id:"",username:"",password:"",first_name:"",last_name:"",is_active:!0}),[Be,lt]=_.useState({subject_id:"",subject:"",description:"",is_active:!0}),[ct,Qt]=_.useState({startDate:"",endDate:"",teacherId:"",grades:[],classes:[],subjectId:""});_.useEffect(()=>{console.log(" AdminCabinet component mounted - initializing..."),rr()},[]),_.useEffect(()=>{const Te=Tt=>{Ot&&!Tt.target.closest(".admin-menu")&&$t(!1)};return document.addEventListener("mousedown",Te),()=>{document.removeEventListener("mousedown",Te)}},[Ot]);const rr=_.useCallback(async()=>{try{c(!0),await an(),console.log("Admin app initialized")}catch(Te){d("Failed to initialize admin app"),console.error("Admin app initialization error:",Te)}finally{c(!1)}},[]),_r=_.useCallback(()=>{$t(Te=>!Te)},[]),tn=_.useCallback(()=>{ir(!0),$t(!1)},[]),Fr=_.useCallback(()=>{ir(!1)},[]),an=_.useCallback(async()=>{try{await Promise.all([pe(),Ne(),le(),fe()])}catch(Te){console.error("Error loading admin data:",Te),d("Failed to load admin data")}},[]),pe=_.useCallback(async()=>{try{const Te="admin_users_",Tt=Es(Te);if(Tt){console.log(" Using cached users data"),gt(Tt);return}const Sr=await n("/.netlify/functions/get-all-users");console.log(" Users response:",Sr);const Dr=Sr.users||[];gt(Dr),gs(Te,Dr,ls.admin_users),console.log(" Users set to state:",Dr)}catch(Te){console.error("Error loading users:",Te)}},[n]),Ne=_.useCallback(async()=>{try{const Te="admin_teachers_",Tt=Es(Te);if(Tt){console.log(" Using cached teachers data"),Ge(Tt);return}const Sr=await n("/.netlify/functions/get-all-teachers");console.log(" Teachers response:",Sr);const Dr=Sr.teachers||[];Ge(Dr),gs(Te,Dr,ls.admin_teachers),console.log(" Teachers set to state:",Dr)}catch(Te){console.error("Error loading teachers:",Te)}},[n]),le=_.useCallback(async()=>{try{const Te="admin_subjects_",Tt=Es(Te);if(Tt){console.log(" Using cached subjects data"),Et(Tt);return}const Sr=await n("/.netlify/functions/get-all-subjects");console.log(" Subjects response:",Sr);const Dr=Sr.subjects||[];Et(Dr),gs(Te,Dr,ls.admin_subjects),console.log(" Subjects set to state:",Dr)}catch(Te){console.error("Error loading subjects:",Te)}},[n]),fe=_.useCallback(async()=>{try{const Te="admin_academic_years_",Tt=Es(Te);if(Tt){console.log(" Using cached academic years data"),Wt(Tt);return}const Sr=await hu.loadAcademicCalendar();Sr&&Array.isArray(Sr)?(Wt(Sr),gs(Te,Sr,ls.admin_academic_years)):console.error("Failed to load academic calendar")}catch(Te){console.error("Error loading academic year:",Te)}},[]),ge=_.useCallback(async()=>{try{if(T(!w),!w){const Te=Date.now(),[Tt,Sr]=await Promise.all([n(`/.netlify/functions/get-all-tests?t=${Te}`),n(`/.netlify/functions/get-test-assignments?t=${Te}`)]);console.log(" Active tests response:",Tt),console.log(" Assignments response:",Sr);const Dr=Tt.tests||[],Pn=(Sr.assignments||[]).reduce((qs,fi)=>{const dn=`${fi.test_type}-${fi.test_id}`;return qs[dn]||(qs[dn]=[]),qs[dn].push(fi),qs},{}),us=Dr.map(qs=>{const fi=`${qs.test_type}-${qs.test_id}`,dn=Pn[fi]||[],vl=dn.some($e=>$e.is_active);return{...qs,is_active:vl,assignments:dn}});B(us),console.log(" All tests with status set to state:",us)}}catch(Te){console.error("Error loading tests:",Te),h({type:"error",message:"Failed to load tests"})}},[n,w]),Se=_.useCallback((Te,Tt)=>{at(Sr=>({...Sr,[Te]:Tt}))},[]),ze=_.useCallback((Te,Tt)=>{Mt(Sr=>({...Sr,[Te]:Tt}))},[]),it=_.useCallback((Te,Tt)=>{lt(Sr=>({...Sr,[Te]:Tt}))},[]);_.useCallback(()=>{console.log(" Testing local storage...");try{const Te={test:"data",timestamp:Date.now()};localStorage.setItem("test",JSON.stringify(Te));const Tt=JSON.parse(localStorage.getItem("test"));console.log(" Local storage test successful:",Tt),h({type:"success",message:"Local storage test successful"})}catch(Te){console.error(" Local storage test failed:",Te),h({type:"error",message:"Local storage test failed"})}},[]),_.useCallback(()=>{console.log(" Clearing local storage...");try{localStorage.clear(),console.log(" Local storage cleared"),h({type:"success",message:"Local storage cleared"})}catch(Te){console.error(" Error clearing local storage:",Te),h({type:"error",message:"Error clearing local storage"})}},[]),_.useCallback(async()=>{console.log(" Checking teacher subjects...");try{const Tt=(await n("/.netlify/functions/get-all-teachers")).data||[];console.log(" Teachers data:",Tt),h({type:"success",message:`Found ${Tt.length} teachers`})}catch(Te){console.error(" Error checking teacher subjects:",Te),h({type:"error",message:"Error checking teacher subjects"})}},[n]);const Ye=_.useCallback(async Te=>{Te.preventDefault();try{console.log(" Submitting user:",Fe);const Tt=await s("/.netlify/functions/add-user",Fe);Tt.success?(h({type:"success",message:"User added successfully"}),wr(!1),at({grade:"",class:"",number:"",student_id:"",name:"",surname:"",nickname:"",password:"",is_active:!0}),pe()):h({type:"error",message:Tt.message||"Failed to add user"})}catch(Tt){console.error(" Error adding user:",Tt),h({type:"error",message:"Error adding user"})}},[Fe,s,pe]),de=_.useCallback(async Te=>{Te.preventDefault();try{console.log(" Submitting teacher:",jt);const Tt=await s("/.netlify/functions/add-teacher",jt);Tt.success?(h({type:"success",message:"Teacher added successfully"}),lr(!1),Mt({teacher_id:"",username:"",password:"",first_name:"",last_name:"",is_active:!0}),Ne()):h({type:"error",message:Tt.message||"Failed to add teacher"})}catch(Tt){console.error(" Error adding teacher:",Tt),h({type:"error",message:"Error adding teacher"})}},[jt,s,Ne]),ve=_.useCallback(async Te=>{Te.preventDefault();try{console.log(" Submitting subject:",Be);const Tt=await s("/.netlify/functions/add-subject",Be);Tt.success?(h({type:"success",message:"Subject added successfully"}),we(!1),lt({subject_id:"",subject:"",description:"",is_active:!0}),le()):h({type:"error",message:Tt.message||"Failed to add subject"})}catch(Tt){console.error(" Error adding subject:",Tt),h({type:"error",message:"Error adding subject"})}},[Be,s,le]),Me=_.useCallback(Te=>{j(Te),R({name:Te.name||"",surname:Te.surname||"",grade:Te.grade||"",class:Te.class||"",student_id:Te.student_id||"",nickname:Te.nickname||"",password:Te.password||"",is_active:Te.is_active!==void 0?Te.is_active:!0})},[]),Oe=_.useCallback(async()=>{try{const Te=[];Object.keys(F).forEach(Tt=>{Tt!=="student_id"&&F[Tt]!==P[Tt]&&Te.push({fieldName:Tt,newValue:F[Tt]})});for(const Tt of Te)await s("/.netlify/functions/update-user",{userId:P.student_id,fieldName:Tt.fieldName,newValue:Tt.newValue});h({type:"success",message:"User updated successfully!"}),j(null),R({}),pe()}catch{h({type:"error",message:"Failed to update user"})}},[F,P,s,pe]),nt=_.useCallback(async Te=>{if(window.confirm("Are you sure you want to delete this user?"))try{(await s("/.netlify/functions/delete-user",{userId:Te})).success&&(h({type:"success",message:"User deleted successfully!"}),pe())}catch{h({type:"error",message:"Failed to delete user"})}},[s,pe]),bt=_.useCallback(Te=>{V(Te),Y({teacher_id:Te.teacher_id||"",username:Te.username||"",password:Te.password||"",first_name:Te.first_name||"",last_name:Te.last_name||"",is_active:Te.is_active!==void 0?Te.is_active:!0})},[]),At=_.useCallback(async()=>{try{const Te=[];Object.keys(Z).forEach(Tt=>{Tt!=="teacher_id"&&Z[Tt]!==L[Tt]&&Te.push({fieldName:Tt,newValue:Z[Tt]})});for(const Tt of Te)await s("/.netlify/functions/update-teacher",{teacherId:L.teacher_id,fieldName:Tt.fieldName,newValue:Tt.newValue});h({type:"success",message:"Teacher updated successfully!"}),V(null),Y({}),Ne()}catch{h({type:"error",message:"Failed to update teacher"})}},[Z,L,s,Ne]),cr=_.useCallback(async Te=>{if(window.confirm("Are you sure you want to delete this teacher?"))try{(await s("/.netlify/functions/delete-teacher",{teacherId:Te})).success&&(h({type:"success",message:"Teacher deleted successfully!"}),Ne())}catch{h({type:"error",message:"Failed to delete teacher"})}},[s,Ne]),pt=_.useCallback(Te=>{ue(Te),X({subject_id:Te.subject_id||"",subject:Te.subject||""})},[]),zt=_.useCallback(async()=>{try{const Te=[];Object.keys(z).forEach(Tt=>{Tt!=="subject_id"&&z[Tt]!==re[Tt]&&Te.push({fieldName:Tt,newValue:z[Tt]})});for(const Tt of Te)await s("/.netlify/functions/update-subject",{subjectId:re.subject_id,fieldName:Tt.fieldName,newValue:Tt.newValue});h({type:"success",message:"Subject updated successfully!"}),ue(null),X({}),le()}catch{h({type:"error",message:"Failed to update subject"})}},[z,re,s,le]),xr=_.useCallback(async Te=>{if(window.confirm("Are you sure you want to delete this subject?"))try{const Tt=await s("/.netlify/functions/delete-subject",{subjectId:Te});Tt.success?(h({type:"success",message:"Subject deleted successfully!"}),le()):h({type:"error",message:Tt.message||"Failed to delete subject"})}catch{h({type:"error",message:"Failed to delete subject"})}},[s,le]),Ir=_.useCallback((Te,Tt)=>{Qt(Sr=>({...Sr,[Te]:Tt}))},[]),$r=_.useCallback(async Te=>{if(Te.preventDefault(),!ct.startDate||!ct.endDate||!ct.teacherId){h({type:"error",message:"Please fill in all required fields (Start Date, End Date, Teacher ID)"});return}if(window.confirm("Are you sure you want to delete all test data for the selected criteria? This action cannot be undone."))try{const Tt=await s("/.netlify/functions/delete-test-data",ct);Tt.success?(h({type:"success",message:`Successfully deleted ${Tt.deletedCount} test records!`}),Ee(!1),Qt({startDate:"",endDate:"",teacherId:"",grades:[],classes:[],subjectId:""})):h({type:"error",message:Tt.message||"Failed to delete test data"})}catch{h({type:"error",message:"Failed to delete test data"})}},[ct,s]),mn=_.useCallback(async(Te,Tt,Sr)=>{try{const Dr=Date.now(),Yn=await n(`/.netlify/functions/get-test-assignments?t=${Dr}`);if(Yn.success&&Yn.assignments){const Pn=Yn.assignments.filter(us=>us.test_id===parseInt(Te)&&us.test_type===Tt);if(Pn.length===0){h({type:"error",message:"No assignments found for this test"});return}for(const us of Pn){const qs=await s("/.netlify/functions/remove-assignment",{teacher_id:Sr,assignment_id:us.assignment_id,test_type:Tt,test_id:Te});if(!qs.success){h({type:"error",message:`Failed to complete test: ${qs.message}`});return}}h({type:"success",message:"Test marked as complete successfully!"}),await ge()}else h({type:"error",message:"Failed to get test assignments"})}catch(Dr){console.error("Error completing test:",Dr),h({type:"error",message:"Failed to complete test"})}},[s,n,ge]),Gr=_.useCallback(async(Te,Tt,Sr)=>{try{const Dr=Date.now(),Yn=await n(`/.netlify/functions/get-test-assignments?t=${Dr}`);if(Yn.success&&Yn.assignments){const Pn=Yn.assignments.filter(us=>us.test_id===parseInt(Te)&&us.test_type===Tt);if(Pn.length===0){h({type:"error",message:"No assignments found for this test"});return}for(const us of Pn){const qs=await s("/.netlify/functions/remove-assignment",{teacher_id:Sr,assignment_id:us.assignment_id,test_type:Tt,test_id:Te,mark_active:!0});if(!qs.success){h({type:"error",message:`Failed to reactivate test: ${qs.message}`});return}}h({type:"success",message:"Test marked as active successfully!"}),await ge()}else h({type:"error",message:"Failed to get test assignments"})}catch(Dr){console.error("Error reactivating test:",Dr),h({type:"error",message:"Failed to reactivate test"})}},[s,n,ge]),zr=_.useCallback(async(Te=!1)=>{try{const Tt=Date.now(),Sr=await n(`/.netlify/functions/get-all-tests?t=${Tt}`);console.log(" Actual tests response:",Sr),He(Sr.tests||[]),console.log(" Actual tests set to state:",Sr.tests||[])}catch(Tt){console.error("Error loading actual tests:",Tt),h({type:"error",message:"Failed to load tests"})}},[n]),Xt=_.useCallback(async(Te,Tt,Sr)=>{try{const Dr=await s("/.netlify/functions/delete-test",{test_id:Te,test_type:Tt,teacher_id:Sr});if(Dr.success){h({type:"success",message:"Test deleted successfully!"});const Yn=`${Tt}-${Te}-${Sr}`;vt(Pn=>{const us=new Set(Pn);return us.delete(Yn),us}),await zr(!0)}else h({type:"error",message:`Failed to delete test: ${Dr.message}`})}catch(Dr){console.error("Error deleting test:",Dr),h({type:"error",message:"Failed to delete test"})}},[s,zr]),xn=_.useCallback((Te,Tt,Sr)=>{const Dr=`${Tt}-${Te}-${Sr}`;vt(Yn=>{const Pn=new Set(Yn);return Pn.has(Dr)?Pn.delete(Dr):Pn.add(Dr),Pn})},[]),Lr=N?dt.filter(Te=>Te.grade.toString()===N):dt,jn=I.filter(Te=>{const Tt=Q==="all"?!0:Q==="active"?Te.is_active:!Te.is_active,Sr=!W||Te.teacher_id===W,Dr=!U||new Date(Te.created_at)>=new Date(U),Yn=!H||new Date(Te.created_at)<=new Date(H+"T23:59:59");return Tt&&Sr&&Dr&&Yn}),Ln=De.filter(Te=>{const Tt=!rt||Te.teacher_id===rt,Sr=!Ke||new Date(Te.created_at)>=new Date(Ke),Dr=!Pe||new Date(Te.created_at)<=new Date(Pe+"T23:59:59");return Tt&&Sr&&Dr}),ya=_.useCallback(()=>{if(Qe.size===Ln.length&&Ln.length>0)vt(new Set);else{const Te=Ln.map(Tt=>`${Tt.test_type}-${Tt.test_id}-${Tt.teacher_id}`);vt(new Set(Te))}},[Qe.size,Ln]),On=_.useCallback(async()=>{if(Qe.size!==0&&window.confirm(`Are you sure you want to delete ${Qe.size} test(s)?`))try{const Te=Array.from(Qe).map(Tt=>{const[Sr,Dr,Yn]=Tt.split("-");return s("/.netlify/functions/delete-test",{test_id:parseInt(Dr),test_type:Sr,teacher_id:Yn})});await Promise.all(Te),h({type:"success",message:`Successfully deleted ${Qe.size} test(s)!`}),vt(new Set),await zr(!0)}catch(Te){console.error("Error deleting marked tests:",Te),h({type:"error",message:"Failed to delete some tests. Please try again."})}},[Qe,s,zr]);return l.jsxs(ht.div,{id:"admin-cabinet-main",className:Ze.container,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[l.jsx(ht.div,{className:Ze.header,initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:l.jsx("div",{className:Ze.headerContent,children:l.jsxs("div",{className:Ze.headerFlex,children:[l.jsxs(ht.div,{className:Ze.adminInfo,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(ht.div,{className:Ze.adminAvatar,initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.3,type:"spring"},whileHover:{scale:1.1},children:l.jsx("span",{className:"text-white font-semibold text-xl",children:e?.username?.charAt(0)||"A"})})}),l.jsxs("div",{children:[l.jsx("h1",{className:Ze.adminText,children:e?.username||"Administrator"}),l.jsx("p",{className:Ze.adminSubtext,children:"Administrator Dashboard"})]})]}),l.jsxs(ht.div,{className:Ze.menuContainer,initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[l.jsxs("button",{onClick:_r,className:Ze.menuButton,style:{zIndex:1e3},children:[l.jsx("span",{className:"hidden sm:inline",children:"Menu"}),l.jsx(ht.svg,{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:Ot?180:0},transition:{duration:.2},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),l.jsx(Uo,{children:Ot&&l.jsx(ht.div,{className:Ze.menuDropdown,initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:l.jsxs("div",{className:"py-2",children:[l.jsx(ht.button,{onClick:tn,className:Ze.menuItem,whileHover:{x:4},transition:{duration:.2},children:"Change Password"}),l.jsx(ht.button,{onClick:()=>{_r(),r()},className:Ze.menuItemLogout,whileHover:{x:4},transition:{duration:.2},children:"Logout"})]})})})]})]})})}),o&&l.jsx(un,{text:"Loading..."}),u&&l.jsx(du,{type:"error",message:u,onClose:()=>d(null)}),f&&l.jsx(du,{type:f.type,message:f.message,onClose:()=>h(null)}),Gt&&l.jsx("div",{className:Ze.modalOverlay,children:l.jsxs("div",{className:Ze.modalContent,children:[l.jsx("h2",{className:Ze.modalTitle,children:"Change Password"}),l.jsxs("form",{className:"space-y-4",children:[l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{htmlFor:"currentPassword",className:Ze.formLabel,children:"Current Password"}),l.jsx("input",{type:"password",id:"currentPassword",className:Ze.formInput})]}),l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{htmlFor:"newPassword",className:Ze.formLabel,children:"New Password"}),l.jsx("input",{type:"password",id:"newPassword",className:Ze.formInput})]}),l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{htmlFor:"confirmPassword",className:Ze.formLabel,children:"Confirm New Password"}),l.jsx("input",{type:"password",id:"confirmPassword",className:Ze.formInput})]}),l.jsxs("div",{className:Ze.modalActions,children:[l.jsx(ot,{type:"button",variant:"secondary",onClick:Fr,className:"flex-1",children:"Cancel"}),l.jsx(ot,{type:"submit",variant:"primary",className:"flex-1 bg-purple-600 hover:bg-purple-700",children:"Change Password"})]})]})]})}),l.jsx(ht.div,{className:Ze.mainContainer,initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:l.jsxs("div",{className:"space-y-6",children:[l.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},children:l.jsxs(Ht,{className:Ze.cardContainer,children:[l.jsx(Ht.Header,{className:Ze.cardHeader,children:l.jsx(Ht.Title,{className:Ze.cardTitle,children:"User Management"})}),l.jsxs(Ht.Body,{className:Ze.cardBody,children:[l.jsxs("div",{className:Ze.buttonGroup,children:[l.jsx(ot,{variant:"primary",onClick:()=>wr(!0),className:Ze.buttonPrimary,children:"Add User"}),l.jsx(ot,{variant:"secondary",onClick:()=>{pe(),p(!g)},className:Ze.buttonSecondary,children:g?"Hide Users Table":"Get All Users "})]}),l.jsx(Uo,{children:pr&&l.jsxs(ht.div,{className:Ze.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New User"}),l.jsxs("form",{onSubmit:Ye,className:"space-y-4",children:[l.jsxs("div",{className:Ze.formGrid,children:[l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{className:Ze.formLabel,children:"Grade"}),l.jsx("input",{type:"text",value:Fe.grade,onChange:Te=>Se("grade",Te.target.value),className:Ze.formInput,placeholder:"Enter grade"})]}),l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{className:Ze.formLabel,children:"Class"}),l.jsx("input",{type:"text",value:Fe.class,onChange:Te=>Se("class",Te.target.value),className:Ze.formInput,placeholder:"Enter class"})]}),l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{className:Ze.formLabel,children:"Number"}),l.jsx("input",{type:"text",value:Fe.number,onChange:Te=>Se("number",Te.target.value),className:Ze.formInput,placeholder:"Enter number"})]}),l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{className:Ze.formLabel,children:"Student ID"}),l.jsx("input",{type:"text",value:Fe.student_id,onChange:Te=>Se("student_id",Te.target.value),className:Ze.formInput,placeholder:"Enter student ID"})]}),l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{className:Ze.formLabel,children:"Name"}),l.jsx("input",{type:"text",value:Fe.name,onChange:Te=>Se("name",Te.target.value),className:Ze.formInput,placeholder:"Enter name"})]}),l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{className:Ze.formLabel,children:"Surname"}),l.jsx("input",{type:"text",value:Fe.surname,onChange:Te=>Se("surname",Te.target.value),className:Ze.formInput,placeholder:"Enter surname"})]}),l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{className:Ze.formLabel,children:"Nickname"}),l.jsx("input",{type:"text",value:Fe.nickname,onChange:Te=>Se("nickname",Te.target.value),className:Ze.formInput,placeholder:"Enter nickname"})]}),l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{className:Ze.formLabel,children:"Password"}),l.jsx("input",{type:"password",value:Fe.password,onChange:Te=>Se("password",Te.target.value),className:Ze.formInput,placeholder:"Enter password"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"userActive",checked:Fe.is_active,onChange:Te=>Se("is_active",Te.target.checked),className:Ze.formCheckbox}),l.jsx("label",{htmlFor:"userActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),l.jsxs("div",{className:Ze.formActions,children:[l.jsx(ot,{type:"button",variant:"secondary",onClick:()=>wr(!1),className:Ze.buttonSecondary,children:"Cancel"}),l.jsx(ot,{type:"submit",variant:"primary",className:Ze.buttonPrimary,children:"Add User"})]})]})]})}),g&&l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Users (",Lr.length," of ",dt.length,")"]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Filter by Grade:"}),l.jsxs("select",{value:N,onChange:Te=>A(Te.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"All Grades"}),[...new Set(dt.map(Te=>Te.grade))].sort().map(Te=>l.jsxs("option",{value:Te,children:["Grade ",Te]},Te))]})]})]}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto max-h-[600px]",children:l.jsxs("table",{className:Ze.table,children:[l.jsx("thead",{className:Ze.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:Ze.tableHeaderCell,children:"Name"}),l.jsx("th",{className:Ze.tableHeaderCell,children:"Grade"}),l.jsx("th",{className:Ze.tableHeaderCell,children:"Class"}),l.jsx("th",{className:Ze.tableHeaderCell,children:"Student ID"}),l.jsx("th",{className:Ze.tableHeaderCell,children:"Number"}),l.jsx("th",{className:Ze.tableHeaderCell,children:"Nickname"}),l.jsx("th",{className:Ze.tableHeaderCell,children:"Actions"})]})}),l.jsx("tbody",{className:Ze.tableBody,children:Lr.map((Te,Tt)=>l.jsxs("tr",{className:Ze.tableRow,children:[l.jsxs("td",{className:Ze.tableCell,children:[Te.name," ",Te.surname]}),l.jsx("td",{className:Ze.tableCell,children:Te.grade}),l.jsx("td",{className:Ze.tableCell,children:Te.class}),l.jsx("td",{className:Ze.tableCell,children:Te.student_id}),l.jsx("td",{className:Ze.tableCell,children:Te.number}),l.jsx("td",{className:Ze.tableCell,children:Te.nickname}),l.jsx("td",{className:Ze.tableCell,children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>Me(Te),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),l.jsx("button",{onClick:()=>nt(Te.student_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},Te.id||Tt))})]})})})]})]})]})}),l.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:l.jsxs(Ht,{className:Ze.cardContainer,children:[l.jsxs(Ht.Header,{className:Ze.cardHeader,children:[l.jsx(Ht.Title,{className:Ze.cardTitle,children:"Teacher Management"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:i,className:"px-3 py-1.5 bg-orange-600 text-white rounded hover:bg-orange-700 transition-colors text-xs whitespace-nowrap",title:"Check and mark overdue assignments (7+ days old) as inactive",children:"Check Overdue Assignments"}),l.jsx(ot,{variant:"primary",onClick:()=>lr(!0),className:"text-xs whitespace-nowrap",children:"Add Teacher"}),l.jsx(ot,{variant:"secondary",onClick:()=>{Ne(),v(!y)},className:"text-xs whitespace-nowrap",children:y?"Hide Teachers Table":"Get All Teachers "})]})]}),l.jsxs(Ht.Body,{className:Ze.cardBody,children:[l.jsx(Uo,{children:br&&l.jsxs(ht.div,{className:Ze.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New Teacher"}),l.jsxs("form",{onSubmit:de,className:"space-y-4",children:[l.jsxs("div",{className:Ze.formGrid,children:[l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{className:Ze.formLabel,children:"Teacher ID"}),l.jsx("input",{type:"text",value:jt.teacher_id,onChange:Te=>ze("teacher_id",Te.target.value),className:Ze.formInput,placeholder:"Enter teacher ID"})]}),l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{className:Ze.formLabel,children:"Username"}),l.jsx("input",{type:"text",value:jt.username,onChange:Te=>ze("username",Te.target.value),className:Ze.formInput,placeholder:"Enter username"})]}),l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{className:Ze.formLabel,children:"Password"}),l.jsx("input",{type:"password",value:jt.password,onChange:Te=>ze("password",Te.target.value),className:Ze.formInput,placeholder:"Enter password"})]}),l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{className:Ze.formLabel,children:"First Name"}),l.jsx("input",{type:"text",value:jt.first_name,onChange:Te=>ze("first_name",Te.target.value),className:Ze.formInput,placeholder:"Enter first name"})]}),l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{className:Ze.formLabel,children:"Last Name"}),l.jsx("input",{type:"text",value:jt.last_name,onChange:Te=>ze("last_name",Te.target.value),className:Ze.formInput,placeholder:"Enter last name"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"teacherActive",checked:jt.is_active,onChange:Te=>ze("is_active",Te.target.checked),className:Ze.formCheckbox}),l.jsx("label",{htmlFor:"teacherActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),l.jsxs("div",{className:Ze.formActions,children:[l.jsx(ot,{type:"button",variant:"secondary",onClick:()=>lr(!1),className:Ze.buttonSecondary,children:"Cancel"}),l.jsx(ot,{type:"submit",variant:"primary",className:Ze.buttonPrimary,children:"Add Teacher"})]})]})]})}),P&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit User"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),l.jsx("input",{type:"text",value:F.name,onChange:Te=>R({...F,name:Te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Surname"}),l.jsx("input",{type:"text",value:F.surname,onChange:Te=>R({...F,surname:Te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade"}),l.jsx("input",{type:"number",value:F.grade,onChange:Te=>R({...F,grade:Te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),l.jsx("input",{type:"number",value:F.class,onChange:Te=>R({...F,class:Te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student ID"}),l.jsx("input",{type:"text",value:F.student_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Student ID cannot be changed"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nickname"}),l.jsx("input",{type:"text",value:F.nickname,onChange:Te=>R({...F,nickname:Te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),l.jsx("input",{type:"text",value:F.password,onChange:Te=>R({...F,password:Te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"is_active",checked:F.is_active,onChange:Te=>R({...F,is_active:Te.target.checked}),className:"h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),l.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Active"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[l.jsx("button",{onClick:()=>{j(null),R({})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),l.jsx("button",{onClick:Oe,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700",children:"Update User"})]})]})}),y&&l.jsxs("div",{className:"mt-6",children:[l.jsx("div",{className:"mb-4",children:l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Teachers (",kt.length,")"]})}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:Ze.table,children:[l.jsx("thead",{className:Ze.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:Ze.tableHeaderCell,children:"Teacher ID"}),l.jsx("th",{className:Ze.tableHeaderCell,children:"Name"}),l.jsx("th",{className:Ze.tableHeaderCell,children:"Username"}),l.jsx("th",{className:Ze.tableHeaderCell,children:"Password"}),l.jsx("th",{className:Ze.tableHeaderCell,children:"Status"}),l.jsx("th",{className:Ze.tableHeaderCell,children:"Created"}),l.jsx("th",{className:Ze.tableHeaderCell,children:"Actions"})]})}),l.jsx("tbody",{className:Ze.tableBody,children:kt.map((Te,Tt)=>l.jsxs("tr",{className:Ze.tableRow,children:[l.jsx("td",{className:Ze.tableCell,children:Te.teacher_id}),l.jsxs("td",{className:Ze.tableCell,children:[Te.first_name," ",Te.last_name]}),l.jsx("td",{className:Ze.tableCell,children:Te.username}),l.jsx("td",{className:Ze.tableCell,children:Te.password}),l.jsx("td",{className:Ze.tableCell,children:l.jsx("span",{className:Te.is_active?Ze.statusActive:Ze.statusInactive,children:Te.is_active?"Active":"Inactive"})}),l.jsx("td",{className:Ze.tableCell,children:new Date(Te.created_at).toLocaleDateString()}),l.jsx("td",{className:Ze.tableCell,children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>bt(Te),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),l.jsx("button",{onClick:()=>cr(Te.teacher_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},Te.teacher_id||Tt))})]})})})]})]})]})}),l.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,duration:.5},children:l.jsxs(Ht,{className:Ze.cardContainer,children:[l.jsx(Ht.Header,{className:Ze.cardHeader,children:l.jsx(Ht.Title,{className:Ze.cardTitle,children:"Subject Management"})}),l.jsxs(Ht.Body,{className:Ze.cardBody,children:[l.jsxs("div",{className:Ze.buttonGroup,children:[l.jsx(ot,{variant:"primary",onClick:()=>we(!0),className:Ze.buttonPrimary,children:"Add Subject"}),l.jsx(ot,{variant:"secondary",onClick:()=>{le(),S(!C)},className:Ze.buttonSecondary,children:C?"Hide Subjects Table":"Get All Subjects "})]}),l.jsx(Uo,{children:Er&&l.jsxs(ht.div,{className:Ze.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New Subject"}),l.jsxs("form",{onSubmit:ve,className:"space-y-4",children:[l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{className:Ze.formLabel,children:"Subject Name"}),l.jsx("input",{type:"text",value:Be.subject,onChange:Te=>it("subject",Te.target.value),className:Ze.formInput,placeholder:"Enter subject name",required:!0}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Subject ID will be automatically generated"})]}),l.jsxs("div",{className:Ze.formActions,children:[l.jsx(ot,{type:"button",variant:"secondary",onClick:()=>we(!1),className:Ze.buttonSecondary,children:"Cancel"}),l.jsx(ot,{type:"submit",variant:"primary",className:Ze.buttonPrimary,children:"Add Subject"})]})]})]})}),L&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Teacher"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher ID"}),l.jsx("input",{type:"text",value:Z.teacher_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Teacher ID cannot be changed"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),l.jsx("input",{type:"text",value:Z.username,onChange:Te=>Y({...Z,username:Te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),l.jsx("input",{type:"text",value:Z.password,onChange:Te=>Y({...Z,password:Te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),l.jsx("input",{type:"text",value:Z.first_name,onChange:Te=>Y({...Z,first_name:Te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),l.jsx("input",{type:"text",value:Z.last_name,onChange:Te=>Y({...Z,last_name:Te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"teacher_is_active",checked:Z.is_active,onChange:Te=>Y({...Z,is_active:Te.target.checked}),className:"h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),l.jsx("label",{htmlFor:"teacher_is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Active"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[l.jsx("button",{onClick:()=>{V(null),Y({})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),l.jsx("button",{onClick:At,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700",children:"Update Teacher"})]})]})}),re&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Subject"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject ID"}),l.jsx("input",{type:"text",value:z.subject_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Subject ID cannot be changed"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject Name"}),l.jsx("input",{type:"text",value:z.subject,onChange:Te=>X({...z,subject:Te.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[l.jsx("button",{onClick:()=>ue(null),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:zt,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Update Subject"})]})]})}),C&&l.jsxs("div",{className:"mt-6",children:[l.jsx("div",{className:"mb-4",children:l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Subjects (",Xe.length,")"]})}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:Ze.table,children:[l.jsx("thead",{className:Ze.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:Ze.tableHeaderCell,children:"Subject ID"}),l.jsx("th",{className:Ze.tableHeaderCell,children:"Subject Name"}),l.jsx("th",{className:Ze.tableHeaderCell,children:"Actions"})]})}),l.jsx("tbody",{className:Ze.tableBody,children:Xe.map((Te,Tt)=>l.jsxs("tr",{className:Ze.tableRow,children:[l.jsx("td",{className:Ze.tableCell,children:Te.subject_id}),l.jsx("td",{className:Ze.tableCell,children:Te.subject}),l.jsx("td",{className:Ze.tableCell,children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>pt(Te),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),l.jsx("button",{onClick:()=>xr(Te.subject_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},Te.subject_id||Tt))})]})})})]})]})]})}),l.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:l.jsxs(Ht,{className:Ze.cardContainer,children:[l.jsx(Ht.Header,{className:Ze.cardHeader,children:l.jsx(Ht.Title,{className:Ze.cardTitle,children:"Test Data Deletion"})}),l.jsxs(Ht.Body,{className:Ze.cardBody,children:[l.jsx("div",{className:Ze.buttonGroup,children:l.jsx(ot,{variant:"danger",onClick:()=>Ee(!0),className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 shadow-md",children:"Delete Test Data"})}),l.jsx(Uo,{children:_e&&l.jsxs(ht.div,{className:Ze.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Delete Test Data by Date Range"}),l.jsxs("form",{onSubmit:$r,className:"space-y-4",children:[l.jsxs("div",{className:Ze.formGrid,children:[l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{className:Ze.formLabel,children:"Start Date *"}),l.jsx("input",{type:"date",value:ct.startDate,onChange:Te=>Ir("startDate",Te.target.value),className:Ze.formInput,required:!0})]}),l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{className:Ze.formLabel,children:"End Date *"}),l.jsx("input",{type:"date",value:ct.endDate,onChange:Te=>Ir("endDate",Te.target.value),className:Ze.formInput,required:!0})]})]}),l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{className:Ze.formLabel,children:"Teacher ID *"}),l.jsxs("select",{value:ct.teacherId,onChange:Te=>Ir("teacherId",Te.target.value),className:Ze.formInput,required:!0,children:[l.jsx("option",{value:"",children:"Select a teacher"}),kt.map(Te=>l.jsxs("option",{value:Te.teacher_id,children:[Te.teacher_id," - ",Te.first_name," ",Te.last_name]},Te.teacher_id))]})]}),l.jsxs("div",{className:Ze.formGroup,children:[l.jsx("label",{className:Ze.formLabel,children:"Subject (Optional)"}),l.jsxs("select",{value:ct.subjectId,onChange:Te=>Ir("subjectId",Te.target.value),className:Ze.formInput,children:[l.jsx("option",{value:"",children:"All subjects"}),Xe.map(Te=>l.jsx("option",{value:Te.subject_id,children:Te.subject},Te.subject_id))]})]}),l.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning: This action cannot be undone"}),l.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[l.jsx("p",{children:"This will permanently delete:"}),l.jsxs("ul",{className:"list-disc list-inside mt-1",children:[l.jsx("li",{children:"All test records within the date range"}),l.jsx("li",{children:"All test questions and answers"}),l.jsx("li",{children:"All test results and submissions"}),l.jsx("li",{children:"All test assignments"}),l.jsx("li",{children:"Associated Cloudinary images (for matching tests)"})]})]})]})]})}),l.jsxs("div",{className:Ze.formActions,children:[l.jsx(ot,{type:"button",variant:"secondary",onClick:()=>Ee(!1),className:Ze.buttonSecondary,children:"Cancel"}),l.jsx(ot,{type:"submit",variant:"danger",className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 shadow-md",children:"Delete Test Data"})]})]})]})})]})]})}),l.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.85,duration:.5},children:l.jsxs(Ht,{className:Ze.cardContainer,children:[l.jsx(Ht.Header,{className:Ze.cardHeader,children:l.jsx(Ht.Title,{className:Ze.cardTitle,children:"Assignments Management"})}),l.jsxs(Ht.Body,{className:Ze.cardBody,children:[l.jsx("div",{className:"mb-4",children:l.jsx(ot,{variant:"primary",onClick:ge,className:Ze.buttonPrimary,children:w?"Hide Assignments Table":"Get All Assignments "})}),w&&l.jsx("div",{className:"mb-4",children:l.jsx("p",{className:"text-sm text-gray-600",children:"Showing all tests (Active and Completed)"})}),w&&l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Assignments (",jn.length," of ",I.length,")"]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("select",{value:Q,onChange:Te=>ae(Te.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[l.jsx("option",{value:"all",children:"All"}),l.jsx("option",{value:"active",children:"Active"}),l.jsx("option",{value:"completed",children:"Completed"})]}),l.jsxs("select",{value:W,onChange:Te=>D(Te.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"All Teachers"}),kt.map(Te=>l.jsxs("option",{value:Te.teacher_id,children:[Te.first_name," ",Te.last_name]},Te.teacher_id))]}),l.jsx("input",{type:"date",value:U,onChange:Te=>q(Te.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Start Date"}),l.jsx("input",{type:"date",value:H,onChange:Te=>te(Te.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"End Date"})]})]}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:Ze.table,children:[l.jsx("thead",{className:Ze.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Test Name"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Teacher"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider text-center",children:"Questions"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),l.jsx("tbody",{className:Ze.tableBody,children:jn.map((Te,Tt)=>l.jsxs("tr",{className:Ze.tableRow,children:[l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 max-w-xs truncate",title:Te.test_name,children:Te.test_name}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:l.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:Te.test_type.replace("_"," ").toUpperCase()})}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:Te.teacher_name}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 text-center",children:Te.num_questions}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:new Date(Te.created_at).toLocaleDateString()}),l.jsx("td",{className:"px-4 py-3 text-xs",children:l.jsx("div",{className:"flex space-x-2",children:Te.is_active?l.jsx("button",{onClick:()=>mn(Te.test_id,Te.test_type,Te.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-orange-100 text-orange-700 hover:bg-orange-200",children:"Mark Complete"}):l.jsx("button",{onClick:()=>Gr(Te.test_id,Te.test_type,Te.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200",children:"Mark Active"})})})]},`${Te.test_type}-${Te.test_id}-${Tt}`))})]})})})]})]})]})}),l.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.5},children:l.jsxs(Ht,{className:Ze.cardContainer,children:[l.jsx(Ht.Header,{className:Ze.cardHeader,children:l.jsx(Ht.Title,{className:Ze.cardTitle,children:"Test Management"})}),l.jsxs(Ht.Body,{className:Ze.cardBody,children:[l.jsx("div",{className:"mb-4",children:l.jsx(ot,{variant:"primary",onClick:()=>{xe||zr(),se(!xe)},className:Ze.buttonPrimary,children:xe?"Hide Tests Table":"Get All Tests "})}),xe&&l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Tests (",Ln.length," of ",De.length,")"]}),Qe.size>0&&l.jsxs(ot,{variant:"danger",onClick:On,className:"text-sm px-4 py-2",children:["Delete Marked (",Qe.size,")"]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("select",{value:rt,onChange:Te=>_t(Te.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"All Teachers"}),kt.map(Te=>l.jsxs("option",{value:Te.teacher_id,children:[Te.first_name," ",Te.last_name]},Te.teacher_id))]}),l.jsx("input",{type:"date",value:Ke,onChange:Te=>tt(Te.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Start Date"}),l.jsx("input",{type:"date",value:Pe,onChange:Te=>je(Te.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"End Date"})]})]}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:Ze.table,children:[l.jsx("thead",{className:Ze.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:l.jsx("input",{type:"checkbox",checked:Qe.size===Ln.length&&Ln.length>0,onChange:ya,className:"cursor-pointer"})}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Test Name"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Teacher"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider text-center",children:"Questions"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),l.jsx("tbody",{className:Ze.tableBody,children:Ln.map((Te,Tt)=>l.jsxs("tr",{className:Ze.tableRow,children:[l.jsx("td",{className:Ze.tableCell,children:l.jsx("input",{type:"checkbox",checked:Qe.has(`${Te.test_type}-${Te.test_id}-${Te.teacher_id}`),onChange:()=>xn(Te.test_id,Te.test_type,Te.teacher_id),className:"cursor-pointer"})}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 max-w-xs truncate",title:Te.test_name,children:Te.test_name}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:l.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:Te.test_type.replace("_"," ").toUpperCase()})}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:Te.teacher_name}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 text-center",children:Te.num_questions}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:new Date(Te.created_at).toLocaleDateString()}),l.jsx("td",{className:"px-4 py-3 text-xs",children:l.jsx("div",{className:"flex space-x-2",children:l.jsx("button",{onClick:()=>Xt(Te.test_id,Te.test_type,Te.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200",children:"Delete"})})})]},`${Te.test_type}-${Te.test_id}-${Tt}`))})]})})})]})]})]})}),l.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.5},children:l.jsxs(Ht,{className:Ze.cardContainer,children:[l.jsx(Ht.Header,{className:Ze.cardHeader,children:l.jsx(Ht.Title,{className:Ze.cardTitle,children:"Debug & Testing"})}),l.jsx(Ht.Body,{className:Ze.cardBody})]})})]})})]})},Aje=()=>{const{isAdmin:e,getCurrentAdminId:t,logout:r}=Is(),{get:n}=Gl(),{showNotification:s}=ci();_.useEffect(()=>{a()},[]);const a=_.useCallback(async()=>{if(console.log(" Initializing Admin Application..."),!e()){console.error(" User is not an admin, redirecting to login"),s("Access Denied: You are not an administrator.","error"),r();return}try{i(),await o(),c(),u(),console.log(" Admin Application initialized successfully"),s("Admin dashboard loaded successfully","success")}catch(d){console.error(" Error initializing admin app:",d),s("Failed to initialize admin dashboard","error")}},[e,t,r,s,n]),i=_.useCallback(()=>{console.log(" Initializing global event listeners...");const d=f=>{f.ctrlKey&&f.key==="k"&&(f.preventDefault(),console.log("Admin search shortcut triggered"))};return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[]),o=_.useCallback(async()=>{try{console.log(" Loading admin data...");const[d,f,h,g]=await Promise.allSettled([n("/.netlify/functions/get-all-users"),n("/.netlify/functions/get-all-teachers"),n("/.netlify/functions/get-all-subjects"),hu.loadAcademicCalendar()]);d.status==="fulfilled"&&d.value?.success&&console.log(" Users loaded:",d.value.users?.length||0),f.status==="fulfilled"&&f.value?.success&&console.log(" Teachers loaded:",f.value.teachers?.length||0),h.status==="fulfilled"&&h.value?.success&&console.log(" Subjects loaded:",h.value.subjects?.length||0),g.status==="fulfilled"&&Array.isArray(g.value)&&console.log(" Academic years loaded:",g.value.length||0),console.log(" Admin data loading completed")}catch(d){throw console.error(" Error loading admin data:",d),d}},[n]),c=_.useCallback(()=>{console.log(" Initializing test deletion functionality..."),console.log(" Test deletion functionality initialized")},[]),u=_.useCallback(()=>{console.log(" Exposing admin functions globally..."),window.toggleSubjectsContent=()=>{const f=document.getElementById("allSubjectsContainer"),h=document.querySelector('button[onclick="toggleSubjectsContent()"]');if(!f){console.error(" allSubjectsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Subjects":"Hide Subjects"},window.showAddSubjectForm=()=>{const f=document.getElementById("addSubjectForm");f&&(f.style.display="block")},window.hideAddSubjectForm=()=>{const f=document.getElementById("addSubjectForm"),h=document.getElementById("newSubjectForm");f&&(f.style.display="none"),h&&h.reset()},window.showAddAcademicYearForm=()=>{const f=document.getElementById("addAcademicYearForm");f&&(f.style.display="block")},window.hideAddAcademicYearForm=()=>{const f=document.getElementById("addAcademicYearForm"),h=document.getElementById("newAcademicYearForm");f&&(f.style.display="none"),h&&h.reset()},window.toggleUsersContent=()=>{const f=document.getElementById("allUsersContainer"),h=document.querySelector('button[onclick="toggleUsersContent()"]');if(!f){console.error(" allUsersContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Users":"Hide Users"},window.showAddUserForm=()=>{const f=document.getElementById("addUserForm");f&&(f.style.display="block")},window.hideAddUserForm=()=>{const f=document.getElementById("addUserForm"),h=document.getElementById("newUserForm");f&&(f.style.display="none"),h&&h.reset()},window.showAddTeacherForm=()=>{const f=document.getElementById("addTeacherForm");f&&(f.style.display="block")},window.hideAddTeacherForm=()=>{const f=document.getElementById("addTeacherForm"),h=document.getElementById("newTeacherForm");f&&(f.style.display="none"),h&&h.reset()},window.toggleTeachersContent=()=>{const f=document.getElementById("allTeachersContainer"),h=document.querySelector('button[onclick="toggleTeachersContent()"]');if(!f){console.error(" allTeachersContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Teachers":"Hide Teachers"},window.toggleTestsContent=()=>{const f=document.getElementById("allTestsContainer"),h=document.querySelector('button[onclick="toggleTestsContent()"]');if(!f){console.error(" allTestsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Tests":"Hide Tests"},window.toggleAssignmentsContent=()=>{const f=document.getElementById("allAssignmentsContainer"),h=document.querySelector('button[onclick="toggleAssignmentsContent()"]');if(!f){console.error(" allAssignmentsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Assignments":"Hide Assignments"},window.toggleResultsContent=()=>{const f=document.getElementById("allResultsContainer"),h=document.querySelector('button[onclick="toggleResultsContent()"]');if(!f){console.error(" allResultsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Results":"Hide Results"};const d={};window.toggleSection=f=>{console.log(` toggleSection called with sectionId: ${f}`);const h=Date.now();if(d[f]&&h-d[f]<300){console.log(` Ignoring rapid successive call for ${f}`);return}d[f]=h;const g=document.getElementById(f);if(!g){console.error(` Section with id '${f}' not found!`);return}const p=g.style.display!=="none";g.style.display=p?"none":"block";const y=document.querySelector(`button[onclick="toggleSection('${f}')"]`);y&&(y.textContent=p?"Show":"Hide")},window.addClickListeners=()=>{console.log(" Adding click listeners to section headers...");const f=document.querySelectorAll(".section-header");console.log(` Found ${f.length} section headers`),f.forEach((h,g)=>{const p=h.textContent.trim();if(console.log(` Processing header ${g+1}:`,p),h.dataset.listenerAdded==="true"){console.log(` Skipping header ${p} - listener already added`);return}h.addEventListener("click",()=>{const y=h.dataset.sectionId;y&&window.toggleSection(y)}),h.dataset.listenerAdded="true",console.log(` Added click listener to header: ${p}`)})},window.makeFieldEditable=f=>{const h=f.textContent;f.dataset.field;const g=document.createElement("input");g.type="text",g.value=h,g.className="editable-input";const p=document.createElement("button");p.textContent="Save",p.className="btn-save",p.onclick=()=>window.saveField(f,g,p,y);const y=document.createElement("button");y.textContent="Cancel",y.className="btn-cancel",y.onclick=()=>{f.textContent=h,f.style.display="block",g.remove(),p.remove(),y.remove()},f.style.display="none",f.parentNode.insertBefore(g,f),f.parentNode.insertBefore(p,f),f.parentNode.insertBefore(y,f)},window.saveField=(f,h,g,p)=>{const y=h.value.trim(),v=f.dataset.field,C=f.dataset.recordId;if(!y){alert("Field cannot be empty");return}console.log(`Saving field ${v} for record ${C} with value: ${y}`),f.textContent=y,f.style.display="block",h.remove(),g.remove(),p.remove()},window.showTestDataDeletion=()=>console.log("showTestDataDeletion called"),window.hideTestDataDeletionForm=()=>console.log("hideTestDataDeletionForm called"),window.loadTeacherGradesClasses=()=>console.log("loadTeacherGradesClasses called"),window.checkTeacherSubjects=()=>console.log("checkTeacherSubjects called"),window.initializeTestDeletion=()=>console.log("initializeTestDeletion called"),window.handleAssignmentDeletion=()=>console.log("handleAssignmentDeletion called"),window.handleTestDataDeletion=()=>console.log("handleTestDataDeletion called"),window.getSelectedGradesClasses=()=>console.log("getSelectedGradesClasses called"),window.hideAssignmentDeletionForm=()=>console.log("hideAssignmentDeletionForm called"),window.addKeyboardAccessibility=()=>console.log("addKeyboardAccessibility called"),window.testToggleSection=()=>console.log("testToggleSection called"),window.testAllToggles=()=>console.log("testAllToggles called"),window.manualToggleTest=()=>console.log("manualToggleTest called"),window.addEditableFieldListeners=()=>console.log("addEditableFieldListeners called"),window.deleteTest=()=>console.log("deleteTest called"),window.testLocalStorage=()=>{console.log("Testing localStorage...");try{localStorage.setItem("test","value");const f=localStorage.getItem("test");return localStorage.removeItem("test"),console.log(" localStorage is working"),!0}catch(f){return console.error(" localStorage error:",f),!1}},window.clearAllLocalStorage=()=>{console.log("Clearing all localStorage..."),localStorage.clear(),console.log(" localStorage cleared")},window.exportLocalStorage=()=>{console.log("Exporting localStorage...");const f={};for(let y=0;y<localStorage.length;y++){const v=localStorage.key(y);f[v]=localStorage.getItem(v)}const h=new Blob([JSON.stringify(f,null,2)],{type:"application/json"}),g=URL.createObjectURL(h),p=document.createElement("a");p.href=g,p.download="localStorage-backup.json",p.click(),URL.revokeObjectURL(g)},console.log(" Admin functions exposed globally")},[]);return e()?l.jsx(Nje,{}):l.jsxs("div",{className:"admin-error",children:[l.jsx("h2",{children:"Access Denied"}),l.jsx("p",{children:"You don't have permission to access the admin dashboard."}),l.jsx("button",{onClick:r,children:"Return to Login"})]})},Nk=({children:e,allowedRoles:t})=>{const{isAuthenticated:r,role:n,isLoading:s}=Is();return s?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):r?t&&!t.includes(n)?l.jsx(zp,{to:"/unauthorized",replace:!0}):e:l.jsx(zp,{to:"/login",replace:!0})},jje=()=>l.jsxs("div",{className:"unauthorized-page",children:[l.jsx("h1",{children:"Access Denied"}),l.jsx("p",{children:"You don't have permission to access this page."})]}),Pje=()=>l.jsx(vB,{children:l.jsx(gH,{children:l.jsx(hH,{children:l.jsx(DQ,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:l.jsx("div",{className:"app",children:l.jsxs(QC,{children:[l.jsx(Js,{path:"/privacy",element:l.jsx(l0e,{})}),l.jsx(Js,{path:"/login",element:l.jsx(i0e,{})}),l.jsx(Js,{path:"/unauthorized",element:l.jsx(jje,{})}),l.jsx(Js,{path:"/student/*",element:l.jsx(Nk,{allowedRoles:["student"],children:l.jsx(pfe,{})})}),l.jsx(Js,{path:"/teacher/*",element:l.jsx(Nk,{allowedRoles:["teacher"],children:l.jsx(Eje,{})})}),l.jsx(Js,{path:"/admin/*",element:l.jsx(Nk,{allowedRoles:["admin"],children:l.jsx(Aje,{})})}),l.jsx(Js,{path:"/",element:l.jsx(zp,{to:"/login",replace:!0})}),l.jsx(Js,{path:"*",element:l.jsx(zp,{to:"/login",replace:!0})})]})})})})})});class Fje{constructor(){this.tokenKey="auth_token",this.refreshTokenKey="refresh_token",this.userKey="user_data",this.startIntegrityMonitoring()}startIntegrityMonitoring(){setInterval(()=>{this.performIntegrityCheck().catch(t=>{console.error("Integrity check failed:",t)})},3e4)}async performIntegrityCheck(){try{const t=await da.get();t&&!this.validateTokenFormat(t)&&(console.warn("Integrity check failed - corrupted token detected"),await this.restoreFromBackup()||(console.warn("No valid backup available - clearing authentication"),await this.clearAuth()))}catch(t){console.error("Error during integrity check:",t)}}async getToken(){const t=await da.get();return t&&!this.validateTokenFormat(t)?(console.warn("Corrupted token detected in storage - clearing it"),this.clearAuth(),null):t}getTokenSync(){return null}getRefreshToken(){return localStorage.getItem(this.refreshTokenKey)}getUserData(){const t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}async setToken(t){if(!this.validateTokenFormat(t))return console.error("Invalid token format - refusing to store corrupted token"),!1;try{this.decodeToken(t);const r=await da.get();if(r)try{localStorage.setItem(`${this.tokenKey}_backup`,r)}catch{}const n=await da.set(t);return n?console.log("Token stored successfully with secure storage (hash verification, retry, write verification)"):console.error("Failed to store token - secure storage failed"),n}catch(r){return console.error("Failed to store token - token is corrupted:",r),!1}}async restoreFromBackup(){try{const t=localStorage.getItem(`${this.tokenKey}_backup`);if(t&&this.validateTokenFormat(t))return console.log("Restoring token from backup"),await da.set(t)}catch(t){console.warn("Failed to restore from backup",t)}return!1}validateTokenFormat(t){if(!t||typeof t!="string")return console.warn("Token validation failed: not a string"),!1;if(!t.includes("."))return console.warn("Token validation failed: not a JWT format"),!1;const r=t.split(".");if(r.length!==3)return console.warn("Token validation failed: not 3 parts"),!1;for(let n=0;n<r.length;n++)try{atob(r[n].replace(/-/g,"+").replace(/_/g,"/"))}catch{return console.warn(`Token validation failed: part ${n} is not valid base64`),!1}return!0}setRefreshToken(t){localStorage.setItem(this.refreshTokenKey,t)}setUserData(t){localStorage.setItem(this.userKey,JSON.stringify(t))}setTokens(t,r){return this.setToken(t)?(this.setUserData({role:r}),localStorage.setItem("accessToken",t),!0):(console.error("Failed to set token - token validation failed"),!1)}async isAuthenticated(){const t=await this.getToken();if(!t)return!1;try{if(typeof t!="string"||!t.includes("."))return console.warn("Invalid token format - not a JWT"),this.clearAuth(),!1;const r=t.split(".");if(r.length!==3)return console.warn("Invalid token format - not 3 parts"),this.clearAuth(),!1;const n=JSON.parse(atob(r[1])),s=Date.now()/1e3;return n.exp>s}catch(r){return console.error("Error decoding token:",r),console.warn("Token appears to be corrupted - clearing authentication"),this.clearAuth(),!1}}getUserRole(){const t=this.getUserData();return t?t.role:null}isAdmin(){return this.getUserRole()==="admin"}isTeacher(){return this.getUserRole()==="teacher"}isStudent(){return this.getUserRole()==="student"}async clearAuth(){try{await da.clear(),localStorage.removeItem(this.refreshTokenKey),localStorage.removeItem(this.userKey),localStorage.removeItem(`${this.tokenKey}_backup`)}catch(t){console.error("Failed to clear localStorage - possible corruption:",t),this.forceClearAllAuthData()}}forceClearAllAuthData(){["auth_token","accessToken","userRole","userData","refresh_token","auth_token_backup"].forEach(r=>{try{localStorage.removeItem(r)}catch(n){console.warn(`Failed to remove ${r}:`,n)}})}logout(){this.clearAuth(),window.location.href="/login"}async getAuthHeader(){const t=await this.getToken();return t?`Bearer ${t}`:null}async makeAuthenticatedRequest(t,r={}){const n=await this.getToken();if(!n)throw new Error("No authentication token found");const s={"Content-Type":"application/json",Authorization:`Bearer ${n}`,...r.headers},a=await fetch(t,{...r,headers:s});if(a.status===401)if(await this.refreshToken()){const o=await this.getToken();return s.Authorization=`Bearer ${o}`,fetch(t,{...r,headers:s})}else throw this.logout(),new Error("Authentication failed");return a}async refreshToken(){const t=this.getRefreshToken();if(!t)return!1;try{const r=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(r.ok){const n=await r.json(),s=n.accessToken||n.token;return s?await this.setToken(s)?(n.refreshToken&&this.setRefreshToken(n.refreshToken),!0):(console.error("Failed to store refreshed token"),!1):(console.error("Refresh token response missing accessToken"),!1)}else{const n=await r.json().catch(()=>({}));return console.error("Token refresh failed:",r.status,n.message||"Unknown error"),!1}}catch(r){console.error("Error refreshing token:",r)}return!1}async getAccessToken(){return await this.getToken()}decodeToken(t){try{if(typeof t!="string"||!t.includes("."))return console.warn("Invalid token format - not a JWT"),this.clearAuth(),null;const r=t.split(".");return r.length!==3?(console.warn("Invalid token format - not 3 parts"),this.clearAuth(),null):JSON.parse(atob(r[1]))}catch(r){return console.error("Error decoding token:",r),console.warn("Token appears to be corrupted - clearing authentication"),this.clearAuth(),null}}async init(){return await this.isAuthenticated()?(this.setupTokenRefresh(),!0):(window.location.pathname!=="/login"&&(window.location.href="/login"),!1)}setupTokenRefresh(){setInterval(async()=>{await this.isAuthenticated()&&await this.refreshToken()},3e3*1e3)}}const iJ=new Fje;window.tokenManager=iJ;if(typeof document<"u"){const e=async()=>{await iJ.init()};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}class oJ{constructor(){this.currentRole=null,this.loadedFunctions=new Set,this.blockedFunctions=new Set,this.initialized=!1,this.retryCount=0,this.maxRetries=20}initialize(){if(this.initialized){console.log("[DEBUG] Role-based loader already initialized, skipping...");return}if(this.retryCount>=this.maxRetries){console.warn("[DEBUG] Max retries reached, stopping role-based loader initialization");return}if(this.retryCount++,(this.retryCount%5===1||this.retryCount===this.maxRetries)&&console.log(`[DEBUG] Role-based loader initializing... (attempt ${this.retryCount}/${this.maxRetries})`),console.log("[DEBUG] Token manager available:",!!window.tokenManager),window.tokenManager&&window.tokenManager.isAuthenticated()){const t=window.tokenManager.getUserRole();console.log("[DEBUG] Role from token manager:",t),console.log("[DEBUG] Access token exists:",!!window.tokenManager.getAccessToken()),t?(this.currentRole=t,this.initialized=!0,this.retryCount=0,this.setupRoleBasedAccess()):(console.log("[DEBUG] No role found, waiting for role to be set..."),setTimeout(()=>this.initialize(),500))}else console.log("[DEBUG] Token manager not available or not authenticated, waiting..."),setTimeout(()=>this.initialize(),500)}setupRoleBasedAccess(){this.currentRole||(console.warn("No role detected, defaulting to student access"),this.currentRole="student");let t=!1;try{const r=window.tokenManager.getAccessToken();r&&(t=window.tokenManager.decodeToken(r).role==="admin")}catch(r){console.warn("Could not decode token for admin check:",r),t=!1}console.log(`Role-based loader initialized for: ${this.currentRole}${t?" (admin)":""}`),this.loadRoleSpecificFunctions(),this.setupRoleBasedUI(),this.replaceBlockedFunctions()}loadRoleSpecificFunctions(){this.currentRole==="teacher"?this.loadTeacherFunctions():this.currentRole==="student"&&this.loadStudentFunctions()}loadTeacherFunctions(){console.log("Teacher functions already available in main script")}loadStudentFunctions(){console.log("Student functions already available in main script")}loadFunction(t,r){console.log(`Function ${t} already available in main script for ${r}`),this.loadedFunctions.add(t)}setupRoleBasedUI(){let t=!1;try{const r=window.tokenManager.getAccessToken();r&&(t=window.tokenManager.decodeToken(r).role==="admin")}catch(r){console.warn("Could not decode token for admin check in UI:",r),t=!1}this.currentRole==="student"&&this.hideTeacherElements(),this.currentRole==="teacher"&&!t&&this.hideStudentElements()}hideTeacherElements(){[".teacher-cabinet",".test-creation-panel",".grade-management-panel",".class-management-panel",'[data-role="teacher"]'].forEach(r=>{document.querySelectorAll(r).forEach(s=>{s.style.display="none",s.classList.add("role-hidden")})})}hideStudentElements(){[".student-cabinet",".test-taking-panel",".results-viewing-panel",'[data-role="student"]'].forEach(r=>{document.querySelectorAll(r).forEach(s=>{s.style.display="none",s.classList.add("role-hidden")})})}replaceBlockedFunctions(){this.currentRole==="student"?this.blockTeacherFunctions():this.currentRole==="teacher"&&this.blockStudentFunctions()}blockTeacherFunctions(){Object.entries({createTest:()=>this.showAccessDenied("teacher"),assignTest:()=>this.showAccessDenied("teacher"),gradeTest:()=>this.showAccessDenied("teacher"),manageClasses:()=>this.showAccessDenied("teacher"),viewAllResults:()=>this.showAccessDenied("teacher")}).forEach(([r,n])=>{window[r]&&(this.blockedFunctions.add(r),window[r]=n)})}blockStudentFunctions(){Object.entries({takeTest:()=>this.showAccessDenied("student"),submitTest:()=>this.showAccessDenied("student"),viewMyResults:()=>this.showAccessDenied("student")}).forEach(([r,n])=>{window[r]&&(this.blockedFunctions.add(r),window[r]=n)})}showAccessDenied(t){const r=`Access denied. This function requires ${t} role.`;console.warn(r),typeof showNotification=="function"?showNotification(r,"warning"):alert(r)}isFunctionBlocked(t){return this.blockedFunctions.has(t)}isFunctionLoaded(t){return this.loadedFunctions.has(t)}getCurrentRole(){return this.currentRole}hasRole(t){return this.currentRole===t}reloadRoleAccess(){this.initialize()}setupAccessAfterLogin(){if(console.log("[DEBUG] Setting up role-based access after login..."),console.log("[DEBUG] Role-based loader will now initialize (no more retry loop before login)"),!window.tokenManager)return console.error("[ERROR] Token manager not available during setupAccessAfterLogin"),!1;if(!window.tokenManager.isAuthenticated())return console.error("[ERROR] User not authenticated during setupAccessAfterLogin"),!1;const t=window.tokenManager.getUserRole();return t?(console.log("[DEBUG] Setting role after login:",t),this.currentRole=t,this.initialized=!0,this.retryCount=0,this.setupRoleBasedAccess(),console.log("[DEBUG] Role-based access setup completed successfully for role:",t),!0):(console.error("[ERROR] No role found in token during setupAccessAfterLogin"),!1)}}window.roleBasedLoader=new oJ;typeof s4<"u"&&s4.exports&&(s4.exports=oJ);const Mje=()=>{const e={schemaVersion:"2.0",enhancedFeatures:!0,newUserStructure:!0,newTestStructure:!0};localStorage.setItem("app_init_data",JSON.stringify(e))},Oje=()=>{Mje(),LJ.createRoot(document.getElementById("root")).render(l.jsx(zs.StrictMode,{children:l.jsx(Pje,{})}))};Oje()});export default Dje();
