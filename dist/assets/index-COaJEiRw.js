var xJ=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var oje=xJ((zje,Xb)=>{function HL(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var Jb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var y5={exports:{}},_x={},v5={exports:{}},_n={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A9;function yJ(){if(A9)return _n;A9=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(U){return U===null||typeof U!="object"?null:(U=f&&U[f]||U["@@iterator"],typeof U=="function"?U:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,y={};function v(U,I,W){this.props=U,this.context=I,this.refs=y,this.updater=W||g}v.prototype.isReactComponent={},v.prototype.setState=function(U,I){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,I,"setState")},v.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function T(){}T.prototype=v.prototype;function k(U,I,W){this.props=U,this.context=I,this.refs=y,this.updater=W||g}var b=k.prototype=new T;b.constructor=k,x(b,v.prototype),b.isPureReactComponent=!0;var N=Array.isArray,E=Object.prototype.hasOwnProperty,P={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function j(U,I,W){var K,Z={},oe=null,J=null;if(I!=null)for(K in I.ref!==void 0&&(J=I.ref),I.key!==void 0&&(oe=""+I.key),I)E.call(I,K)&&!M.hasOwnProperty(K)&&(Z[K]=I[K]);var le=arguments.length-2;if(le===1)Z.children=W;else if(1<le){for(var ue=Array(le),de=0;de<le;de++)ue[de]=arguments[de+2];Z.children=ue}if(U&&U.defaultProps)for(K in le=U.defaultProps,le)Z[K]===void 0&&(Z[K]=le[K]);return{$$typeof:e,type:U,key:oe,ref:J,props:Z,_owner:P.current}}function A(U,I){return{$$typeof:e,type:U.type,key:I,ref:U.ref,props:U.props,_owner:U._owner}}function O(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function L(U){var I={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(W){return I[W]})}var q=/\/+/g;function Q(U,I){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):I.toString(36)}function ae(U,I,W,K,Z){var oe=typeof U;(oe==="undefined"||oe==="boolean")&&(U=null);var J=!1;if(U===null)J=!0;else switch(oe){case"string":case"number":J=!0;break;case"object":switch(U.$$typeof){case e:case t:J=!0}}if(J)return J=U,Z=Z(J),U=K===""?"."+Q(J,0):K,N(Z)?(W="",U!=null&&(W=U.replace(q,"$&/")+"/"),ae(Z,I,W,"",function(de){return de})):Z!=null&&(O(Z)&&(Z=A(Z,W+(!Z.key||J&&J.key===Z.key?"":(""+Z.key).replace(q,"$&/")+"/")+U)),I.push(Z)),1;if(J=0,K=K===""?".":K+":",N(U))for(var le=0;le<U.length;le++){oe=U[le];var ue=K+Q(oe,le);J+=ae(oe,I,W,ue,Z)}else if(ue=h(U),typeof ue=="function")for(U=ue.call(U),le=0;!(oe=U.next()).done;)oe=oe.value,ue=K+Q(oe,le++),J+=ae(oe,I,W,ue,Z);else if(oe==="object")throw I=String(U),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return J}function te(U,I,W){if(U==null)return U;var K=[],Z=0;return ae(U,K,"","",function(oe){return I.call(W,oe,Z++)}),K}function ne(U){if(U._status===-1){var I=U._result;I=I(),I.then(function(W){(U._status===0||U._status===-1)&&(U._status=1,U._result=W)},function(W){(U._status===0||U._status===-1)&&(U._status=2,U._result=W)}),U._status===-1&&(U._status=0,U._result=I)}if(U._status===1)return U._result.default;throw U._result}var B={current:null},V={transition:null},R={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:V,ReactCurrentOwner:P};function H(){throw Error("act(...) is not supported in production builds of React.")}return _n.Children={map:te,forEach:function(U,I,W){te(U,function(){I.apply(this,arguments)},W)},count:function(U){var I=0;return te(U,function(){I++}),I},toArray:function(U){return te(U,function(I){return I})||[]},only:function(U){if(!O(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},_n.Component=v,_n.Fragment=r,_n.Profiler=s,_n.PureComponent=k,_n.StrictMode=n,_n.Suspense=l,_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,_n.act=H,_n.cloneElement=function(U,I,W){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var K=x({},U.props),Z=U.key,oe=U.ref,J=U._owner;if(I!=null){if(I.ref!==void 0&&(oe=I.ref,J=P.current),I.key!==void 0&&(Z=""+I.key),U.type&&U.type.defaultProps)var le=U.type.defaultProps;for(ue in I)E.call(I,ue)&&!M.hasOwnProperty(ue)&&(K[ue]=I[ue]===void 0&&le!==void 0?le[ue]:I[ue])}var ue=arguments.length-2;if(ue===1)K.children=W;else if(1<ue){le=Array(ue);for(var de=0;de<ue;de++)le[de]=arguments[de+2];K.children=le}return{$$typeof:e,type:U.type,key:Z,ref:oe,props:K,_owner:J}},_n.createContext=function(U){return U={$$typeof:i,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},_n.createElement=j,_n.createFactory=function(U){var I=j.bind(null,U);return I.type=U,I},_n.createRef=function(){return{current:null}},_n.forwardRef=function(U){return{$$typeof:o,render:U}},_n.isValidElement=O,_n.lazy=function(U){return{$$typeof:d,_payload:{_status:-1,_result:U},_init:ne}},_n.memo=function(U,I){return{$$typeof:u,type:U,compare:I===void 0?null:I}},_n.startTransition=function(U){var I=V.transition;V.transition={};try{U()}finally{V.transition=I}},_n.unstable_act=H,_n.useCallback=function(U,I){return B.current.useCallback(U,I)},_n.useContext=function(U){return B.current.useContext(U)},_n.useDebugValue=function(){},_n.useDeferredValue=function(U){return B.current.useDeferredValue(U)},_n.useEffect=function(U,I){return B.current.useEffect(U,I)},_n.useId=function(){return B.current.useId()},_n.useImperativeHandle=function(U,I,W){return B.current.useImperativeHandle(U,I,W)},_n.useInsertionEffect=function(U,I){return B.current.useInsertionEffect(U,I)},_n.useLayoutEffect=function(U,I){return B.current.useLayoutEffect(U,I)},_n.useMemo=function(U,I){return B.current.useMemo(U,I)},_n.useReducer=function(U,I,W){return B.current.useReducer(U,I,W)},_n.useRef=function(U){return B.current.useRef(U)},_n.useState=function(U){return B.current.useState(U)},_n.useSyncExternalStore=function(U,I,W){return B.current.useSyncExternalStore(U,I,W)},_n.useTransition=function(){return B.current.useTransition()},_n.version="18.3.1",_n}var j9;function $m(){return j9||(j9=1,v5.exports=yJ()),v5.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P9;function vJ(){if(P9)return _x;P9=1;var e=$m(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function i(o,l,u){var d,f={},h=null,g=null;u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(g=l.ref);for(d in l)n.call(l,d)&&!a.hasOwnProperty(d)&&(f[d]=l[d]);if(o&&o.defaultProps)for(d in l=o.defaultProps,l)f[d]===void 0&&(f[d]=l[d]);return{$$typeof:t,type:o,key:h,ref:g,props:f,_owner:s.current}}return _x.Fragment=r,_x.jsx=i,_x.jsxs=i,_x}var M9;function wJ(){return M9||(M9=1,y5.exports=vJ()),y5.exports}var c=wJ(),S=$m();const la=Tc(S),GL=HL({__proto__:null,default:la},[S]);var Rw={},w5={exports:{}},Zo={},b5={exports:{}},_5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F9;function bJ(){return F9||(F9=1,(function(e){function t(V,R){var H=V.length;V.push(R);e:for(;0<H;){var U=H-1>>>1,I=V[U];if(0<s(I,R))V[U]=R,V[H]=I,H=U;else break e}}function r(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var R=V[0],H=V.pop();if(H!==R){V[0]=H;e:for(var U=0,I=V.length,W=I>>>1;U<W;){var K=2*(U+1)-1,Z=V[K],oe=K+1,J=V[oe];if(0>s(Z,H))oe<I&&0>s(J,Z)?(V[U]=J,V[oe]=H,U=oe):(V[U]=Z,V[K]=H,U=K);else if(oe<I&&0>s(J,H))V[U]=J,V[oe]=H,U=oe;else break e}}return R}function s(V,R){var H=V.sortIndex-R.sortIndex;return H!==0?H:V.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],u=[],d=1,f=null,h=3,g=!1,x=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var R=r(u);R!==null;){if(R.callback===null)n(u);else if(R.startTime<=V)n(u),R.sortIndex=R.expirationTime,t(l,R);else break;R=r(u)}}function N(V){if(y=!1,b(V),!x)if(r(l)!==null)x=!0,ne(E);else{var R=r(u);R!==null&&B(N,R.startTime-V)}}function E(V,R){x=!1,y&&(y=!1,T(j),j=-1),g=!0;var H=h;try{for(b(R),f=r(l);f!==null&&(!(f.expirationTime>R)||V&&!L());){var U=f.callback;if(typeof U=="function"){f.callback=null,h=f.priorityLevel;var I=U(f.expirationTime<=R);R=e.unstable_now(),typeof I=="function"?f.callback=I:f===r(l)&&n(l),b(R)}else n(l);f=r(l)}if(f!==null)var W=!0;else{var K=r(u);K!==null&&B(N,K.startTime-R),W=!1}return W}finally{f=null,h=H,g=!1}}var P=!1,M=null,j=-1,A=5,O=-1;function L(){return!(e.unstable_now()-O<A)}function q(){if(M!==null){var V=e.unstable_now();O=V;var R=!0;try{R=M(!0,V)}finally{R?Q():(P=!1,M=null)}}else P=!1}var Q;if(typeof k=="function")Q=function(){k(q)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,te=ae.port2;ae.port1.onmessage=q,Q=function(){te.postMessage(null)}}else Q=function(){v(q,0)};function ne(V){M=V,P||(P=!0,Q())}function B(V,R){j=v(function(){V(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){x||g||(x=!0,ne(E))},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(V){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var H=h;h=R;try{return V()}finally{h=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,R){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var H=h;h=V;try{return R()}finally{h=H}},e.unstable_scheduleCallback=function(V,R,H){var U=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?U+H:U):H=U,V){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=H+I,V={id:d++,callback:R,priorityLevel:V,startTime:H,expirationTime:I,sortIndex:-1},H>U?(V.sortIndex=H,t(u,V),r(l)===null&&V===r(u)&&(y?(T(j),j=-1):y=!0,B(N,H-U))):(V.sortIndex=I,t(l,V),x||g||(x=!0,ne(E))),V},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(V){var R=h;return function(){var H=h;h=R;try{return V.apply(this,arguments)}finally{h=H}}}})(_5)),_5}var D9;function B7(){return D9||(D9=1,b5.exports=bJ()),b5.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O9;function _J(){if(O9)return Zo;O9=1;var e=$m(),t=B7();function r(m){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+m,C=1;C<arguments.length;C++)p+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(m,p){i(m,p),i(m+"Capture",p)}function i(m,p){for(s[m]=p,m=0;m<p.length;m++)n.add(p[m])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function h(m){return l.call(f,m)?!0:l.call(d,m)?!1:u.test(m)?f[m]=!0:(d[m]=!0,!1)}function g(m,p,C,D){if(C!==null&&C.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return D?!1:C!==null?!C.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function x(m,p,C,D){if(p===null||typeof p>"u"||g(m,p,C,D))return!0;if(D)return!1;if(C!==null)switch(C.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function y(m,p,C,D,G,ee,ge){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=D,this.attributeNamespace=G,this.mustUseProperty=C,this.propertyName=m,this.type=p,this.sanitizeURL=ee,this.removeEmptyString=ge}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){v[m]=new y(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var p=m[0];v[p]=new y(p,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){v[m]=new y(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){v[m]=new y(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){v[m]=new y(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){v[m]=new y(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){v[m]=new y(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){v[m]=new y(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){v[m]=new y(m,5,!1,m.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function k(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var p=m.replace(T,k);v[p]=new y(p,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var p=m.replace(T,k);v[p]=new y(p,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var p=m.replace(T,k);v[p]=new y(p,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){v[m]=new y(m,1,!1,m.toLowerCase(),null,!1,!1)}),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){v[m]=new y(m,1,!1,m.toLowerCase(),null,!0,!0)});function b(m,p,C,D){var G=v.hasOwnProperty(p)?v[p]:null;(G!==null?G.type!==0:D||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(x(p,C,G,D)&&(C=null),D||G===null?h(p)&&(C===null?m.removeAttribute(p):m.setAttribute(p,""+C)):G.mustUseProperty?m[G.propertyName]=C===null?G.type===3?!1:"":C:(p=G.attributeName,D=G.attributeNamespace,C===null?m.removeAttribute(p):(G=G.type,C=G===3||G===4&&C===!0?"":""+C,D?m.setAttributeNS(D,p,C):m.setAttribute(p,C))))}var N=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),P=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),L=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),V=Symbol.iterator;function R(m){return m===null||typeof m!="object"?null:(m=V&&m[V]||m["@@iterator"],typeof m=="function"?m:null)}var H=Object.assign,U;function I(m){if(U===void 0)try{throw Error()}catch(C){var p=C.stack.trim().match(/\n( *(at )?)/);U=p&&p[1]||""}return`
`+U+m}var W=!1;function K(m,p){if(!m||W)return"";W=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(bt){var D=bt}Reflect.construct(m,[],p)}else{try{p.call()}catch(bt){D=bt}m.call(p.prototype)}else{try{throw Error()}catch(bt){D=bt}m()}}catch(bt){if(bt&&D&&typeof bt.stack=="string"){for(var G=bt.stack.split(`
`),ee=D.stack.split(`
`),ge=G.length-1,De=ee.length-1;1<=ge&&0<=De&&G[ge]!==ee[De];)De--;for(;1<=ge&&0<=De;ge--,De--)if(G[ge]!==ee[De]){if(ge!==1||De!==1)do if(ge--,De--,0>De||G[ge]!==ee[De]){var We=`
`+G[ge].replace(" at new "," at ");return m.displayName&&We.includes("<anonymous>")&&(We=We.replace("<anonymous>",m.displayName)),We}while(1<=ge&&0<=De);break}}}finally{W=!1,Error.prepareStackTrace=C}return(m=m?m.displayName||m.name:"")?I(m):""}function Z(m){switch(m.tag){case 5:return I(m.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return m=K(m.type,!1),m;case 11:return m=K(m.type.render,!1),m;case 1:return m=K(m.type,!0),m;default:return""}}function oe(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case M:return"Fragment";case P:return"Portal";case A:return"Profiler";case j:return"StrictMode";case Q:return"Suspense";case ae:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case L:return(m.displayName||"Context")+".Consumer";case O:return(m._context.displayName||"Context")+".Provider";case q:var p=m.render;return m=m.displayName,m||(m=p.displayName||p.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case te:return p=m.displayName||null,p!==null?p:oe(m.type)||"Memo";case ne:p=m._payload,m=m._init;try{return oe(m(p))}catch{}}return null}function J(m){var p=m.type;switch(m.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=p.render,m=m.displayName||m.name||"",p.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(p);case 8:return p===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function le(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function ue(m){var p=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function de(m){var p=ue(m)?"checked":"value",C=Object.getOwnPropertyDescriptor(m.constructor.prototype,p),D=""+m[p];if(!m.hasOwnProperty(p)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var G=C.get,ee=C.set;return Object.defineProperty(m,p,{configurable:!0,get:function(){return G.call(this)},set:function(ge){D=""+ge,ee.call(this,ge)}}),Object.defineProperty(m,p,{enumerable:C.enumerable}),{getValue:function(){return D},setValue:function(ge){D=""+ge},stopTracking:function(){m._valueTracker=null,delete m[p]}}}}function Te(m){m._valueTracker||(m._valueTracker=de(m))}function ie(m){if(!m)return!1;var p=m._valueTracker;if(!p)return!0;var C=p.getValue(),D="";return m&&(D=ue(m)?m.checked?"true":"false":m.value),m=D,m!==C?(p.setValue(m),!0):!1}function xe(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function Ae(m,p){var C=p.checked;return H({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:C??m._wrapperState.initialChecked})}function Me(m,p){var C=p.defaultValue==null?"":p.defaultValue,D=p.checked!=null?p.checked:p.defaultChecked;C=le(p.value!=null?p.value:C),m._wrapperState={initialChecked:D,initialValue:C,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function Je(m,p){p=p.checked,p!=null&&b(m,"checked",p,!1)}function He(m,p){Je(m,p);var C=le(p.value),D=p.type;if(C!=null)D==="number"?(C===0&&m.value===""||m.value!=C)&&(m.value=""+C):m.value!==""+C&&(m.value=""+C);else if(D==="submit"||D==="reset"){m.removeAttribute("value");return}p.hasOwnProperty("value")?it(m,p.type,C):p.hasOwnProperty("defaultValue")&&it(m,p.type,le(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(m.defaultChecked=!!p.defaultChecked)}function It(m,p,C){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var D=p.type;if(!(D!=="submit"&&D!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+m._wrapperState.initialValue,C||p===m.value||(m.value=p),m.defaultValue=p}C=m.name,C!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,C!==""&&(m.name=C)}function it(m,p,C){(p!=="number"||xe(m.ownerDocument)!==m)&&(C==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+C&&(m.defaultValue=""+C))}var kt=Array.isArray;function pt(m,p,C,D){if(m=m.options,p){p={};for(var G=0;G<C.length;G++)p["$"+C[G]]=!0;for(C=0;C<m.length;C++)G=p.hasOwnProperty("$"+m[C].value),m[C].selected!==G&&(m[C].selected=G),G&&D&&(m[C].defaultSelected=!0)}else{for(C=""+le(C),p=null,G=0;G<m.length;G++){if(m[G].value===C){m[G].selected=!0,D&&(m[G].defaultSelected=!0);return}p!==null||m[G].disabled||(p=m[G])}p!==null&&(p.selected=!0)}}function ut(m,p){if(p.dangerouslySetInnerHTML!=null)throw Error(r(91));return H({},p,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function _t(m,p){var C=p.value;if(C==null){if(C=p.children,p=p.defaultValue,C!=null){if(p!=null)throw Error(r(92));if(kt(C)){if(1<C.length)throw Error(r(93));C=C[0]}p=C}p==null&&(p=""),C=p}m._wrapperState={initialValue:le(C)}}function qt(m,p){var C=le(p.value),D=le(p.defaultValue);C!=null&&(C=""+C,C!==m.value&&(m.value=C),p.defaultValue==null&&m.defaultValue!==C&&(m.defaultValue=C)),D!=null&&(m.defaultValue=""+D)}function Jt(m){var p=m.textContent;p===m._wrapperState.initialValue&&p!==""&&p!==null&&(m.value=p)}function Ht(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $e(m,p){return m==null||m==="http://www.w3.org/1999/xhtml"?Ht(p):m==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var ze,tt=(function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,C,D,G){MSApp.execUnsafeLocalFunction(function(){return m(p,C,D,G)})}:m})(function(m,p){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=p;else{for(ze=ze||document.createElement("div"),ze.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=ze.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;p.firstChild;)m.appendChild(p.firstChild)}});function ot(m,p){if(p){var C=m.firstChild;if(C&&C===m.lastChild&&C.nodeType===3){C.nodeValue=p;return}}m.textContent=p}var nt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dt=["Webkit","ms","Moz","O"];Object.keys(nt).forEach(function(m){Dt.forEach(function(p){p=p+m.charAt(0).toUpperCase()+m.substring(1),nt[p]=nt[m]})});function Rt(m,p,C){return p==null||typeof p=="boolean"||p===""?"":C||typeof p!="number"||p===0||nt.hasOwnProperty(m)&&nt[m]?(""+p).trim():p+"px"}function Qt(m,p){m=m.style;for(var C in p)if(p.hasOwnProperty(C)){var D=C.indexOf("--")===0,G=Rt(C,p[C],D);C==="float"&&(C="cssFloat"),D?m.setProperty(C,G):m[C]=G}}var wr=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kr(m,p){if(p){if(wr[m]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(r(137,m));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(r(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(r(61))}if(p.style!=null&&typeof p.style!="object")throw Error(r(62))}}function zr(m,p){if(m.indexOf("-")===-1)return typeof p.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tr=null;function gr(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var ve=null,Fe=null,Le=null;function Ue(m){if(m=yh(m)){if(typeof ve!="function")throw Error(r(280));var p=m.stateNode;p&&(p=Fa(p),ve(m.stateNode,m.type,p))}}function Pt(m){Fe?Le?Le.push(m):Le=[m]:Fe=m}function Ie(){if(Fe){var m=Fe,p=Le;if(Le=Fe=null,Ue(m),p)for(m=0;m<p.length;m++)Ue(p[m])}}function Ye(m,p){return m(p)}function Ne(){}var Ve=!1;function Ge(m,p,C){if(Ve)return m(p,C);Ve=!0;try{return Ye(m,p,C)}finally{Ve=!1,(Fe!==null||Le!==null)&&(Ne(),Ie())}}function Ot(m,p){var C=m.stateNode;if(C===null)return null;var D=Fa(C);if(D===null)return null;C=D[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(D=!D.disabled)||(m=m.type,D=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!D;break e;default:m=!1}if(m)return null;if(C&&typeof C!="function")throw Error(r(231,p,typeof C));return C}var Ut=!1;if(o)try{var ar={};Object.defineProperty(ar,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",ar,ar),window.removeEventListener("test",ar,ar)}catch{Ut=!1}function Dr(m,p,C,D,G,ee,ge,De,We){var bt=Array.prototype.slice.call(arguments,3);try{p.apply(C,bt)}catch(Xt){this.onError(Xt)}}var br=!1,Kr=null,he=!1,Ce=null,be={onError:function(m){br=!0,Kr=m}};function pe(m,p,C,D,G,ee,ge,De,We){br=!1,Kr=null,Dr.apply(be,arguments)}function ke(m,p,C,D,G,ee,ge,De,We){if(pe.apply(this,arguments),br){if(br){var bt=Kr;br=!1,Kr=null}else throw Error(r(198));he||(he=!0,Ce=bt)}}function Ee(m){var p=m,C=m;if(m.alternate)for(;p.return;)p=p.return;else{m=p;do p=m,(p.flags&4098)!==0&&(C=p.return),m=p.return;while(m)}return p.tag===3?C:null}function Qe(m){if(m.tag===13){var p=m.memoizedState;if(p===null&&(m=m.alternate,m!==null&&(p=m.memoizedState)),p!==null)return p.dehydrated}return null}function xt(m){if(Ee(m)!==m)throw Error(r(188))}function rt(m){var p=m.alternate;if(!p){if(p=Ee(m),p===null)throw Error(r(188));return p!==m?null:m}for(var C=m,D=p;;){var G=C.return;if(G===null)break;var ee=G.alternate;if(ee===null){if(D=G.return,D!==null){C=D;continue}break}if(G.child===ee.child){for(ee=G.child;ee;){if(ee===C)return xt(G),m;if(ee===D)return xt(G),p;ee=ee.sibling}throw Error(r(188))}if(C.return!==D.return)C=G,D=ee;else{for(var ge=!1,De=G.child;De;){if(De===C){ge=!0,C=G,D=ee;break}if(De===D){ge=!0,D=G,C=ee;break}De=De.sibling}if(!ge){for(De=ee.child;De;){if(De===C){ge=!0,C=ee,D=G;break}if(De===D){ge=!0,D=ee,C=G;break}De=De.sibling}if(!ge)throw Error(r(189))}}if(C.alternate!==D)throw Error(r(190))}if(C.tag!==3)throw Error(r(188));return C.stateNode.current===C?m:p}function ce(m){return m=rt(m),m!==null?me(m):null}function me(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var p=me(m);if(p!==null)return p;m=m.sibling}return null}var je=t.unstable_scheduleCallback,Pe=t.unstable_cancelCallback,Ze=t.unstable_shouldYield,gt=t.unstable_requestPaint,Tt=t.unstable_now,ir=t.unstable_getCurrentPriorityLevel,Ct=t.unstable_ImmediatePriority,or=t.unstable_UserBlockingPriority,Or=t.unstable_NormalPriority,Lr=t.unstable_LowPriority,Pr=t.unstable_IdlePriority,un=null,An=null;function mn(m){if(An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(un,m,void 0,(m.current.flags&128)===128)}catch{}}var _r=Math.clz32?Math.clz32:ds,Pa=Math.log,Mn=Math.LN2;function ds(m){return m>>>=0,m===0?32:31-(Pa(m)/Mn|0)|0}var Yn=64,pa=4194304;function Hn(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function _e(m,p){var C=m.pendingLanes;if(C===0)return 0;var D=0,G=m.suspendedLanes,ee=m.pingedLanes,ge=C&268435455;if(ge!==0){var De=ge&~G;De!==0?D=Hn(De):(ee&=ge,ee!==0&&(D=Hn(ee)))}else ge=C&~G,ge!==0?D=Hn(ge):ee!==0&&(D=Hn(ee));if(D===0)return 0;if(p!==0&&p!==D&&(p&G)===0&&(G=D&-D,ee=p&-p,G>=ee||G===16&&(ee&4194240)!==0))return p;if((D&4)!==0&&(D|=C&16),p=m.entangledLanes,p!==0)for(m=m.entanglements,p&=D;0<p;)C=31-_r(p),G=1<<C,D|=m[C],p&=~G;return D}function Nt(m,p){switch(m){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ur(m,p){for(var C=m.suspendedLanes,D=m.pingedLanes,G=m.expirationTimes,ee=m.pendingLanes;0<ee;){var ge=31-_r(ee),De=1<<ge,We=G[ge];We===-1?((De&C)===0||(De&D)!==0)&&(G[ge]=Nt(De,p)):We<=p&&(m.expiredLanes|=De),ee&=~De}}function Yr(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function fs(){var m=Yn;return Yn<<=1,(Yn&4194240)===0&&(Yn=64),m}function jn(m){for(var p=[],C=0;31>C;C++)p.push(m);return p}function Be(m,p,C){m.pendingLanes|=p,p!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,p=31-_r(p),m[p]=C}function wt(m,p){var C=m.pendingLanes&~p;m.pendingLanes=p,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=p,m.mutableReadLanes&=p,m.entangledLanes&=p,p=m.entanglements;var D=m.eventTimes;for(m=m.expirationTimes;0<C;){var G=31-_r(C),ee=1<<G;p[G]=0,D[G]=-1,m[G]=-1,C&=~ee}}function Gt(m,p){var C=m.entangledLanes|=p;for(m=m.entanglements;C;){var D=31-_r(C),G=1<<D;G&p|m[D]&p&&(m[D]|=p),C&=~G}}var Bt=0;function Ln(m){return m&=-m,1<m?4<m?(m&268435455)!==0?16:536870912:4:1}var ct,yt,nr,At,Rr,Lt=!1,cn=[],bn=null,st=null,cr=null,zt=new Map,Gn=new Map,sn=[],dn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ys(m,p){switch(m){case"focusin":case"focusout":bn=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":zt.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gn.delete(p.pointerId)}}function kn(m,p,C,D,G,ee){return m===null||m.nativeEvent!==ee?(m={blockedOn:p,domEventName:C,eventSystemFlags:D,nativeEvent:ee,targetContainers:[G]},p!==null&&(p=yh(p),p!==null&&yt(p)),m):(m.eventSystemFlags|=D,p=m.targetContainers,G!==null&&p.indexOf(G)===-1&&p.push(G),m)}function vs(m,p,C,D,G){switch(p){case"focusin":return bn=kn(bn,m,p,C,D,G),!0;case"dragenter":return st=kn(st,m,p,C,D,G),!0;case"mouseover":return cr=kn(cr,m,p,C,D,G),!0;case"pointerover":var ee=G.pointerId;return zt.set(ee,kn(zt.get(ee)||null,m,p,C,D,G)),!0;case"gotpointercapture":return ee=G.pointerId,Gn.set(ee,kn(Gn.get(ee)||null,m,p,C,D,G)),!0}return!1}function Ei(m){var p=vu(m.target);if(p!==null){var C=Ee(p);if(C!==null){if(p=C.tag,p===13){if(p=Qe(C),p!==null){m.blockedOn=p,Rr(m.priority,function(){nr(C)});return}}else if(p===3&&C.stateNode.current.memoizedState.isDehydrated){m.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}m.blockedOn=null}function cu(m){if(m.blockedOn!==null)return!1;for(var p=m.targetContainers;0<p.length;){var C=sg(m.domEventName,m.eventSystemFlags,p[0],m.nativeEvent);if(C===null){C=m.nativeEvent;var D=new C.constructor(C.type,C);Tr=D,C.target.dispatchEvent(D),Tr=null}else return p=yh(C),p!==null&&yt(p),m.blockedOn=C,!1;p.shift()}return!0}function rg(m,p,C){cu(m)&&C.delete(p)}function U3(){Lt=!1,bn!==null&&cu(bn)&&(bn=null),st!==null&&cu(st)&&(st=null),cr!==null&&cu(cr)&&(cr=null),zt.forEach(rg),Gn.forEach(rg)}function uu(m,p){m.blockedOn===p&&(m.blockedOn=null,Lt||(Lt=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,U3)))}function Zi(m){function p(G){return uu(G,m)}if(0<cn.length){uu(cn[0],m);for(var C=1;C<cn.length;C++){var D=cn[C];D.blockedOn===m&&(D.blockedOn=null)}}for(bn!==null&&uu(bn,m),st!==null&&uu(st,m),cr!==null&&uu(cr,m),zt.forEach(p),Gn.forEach(p),C=0;C<sn.length;C++)D=sn[C],D.blockedOn===m&&(D.blockedOn=null);for(;0<sn.length&&(C=sn[0],C.blockedOn===null);)Ei(C),C.blockedOn===null&&sn.shift()}var C0=N.ReactCurrentBatchConfig,ng=!0;function gl(m,p,C,D){var G=Bt,ee=C0.transition;C0.transition=null;try{Bt=1,E0(m,p,C,D)}finally{Bt=G,C0.transition=ee}}function jc(m,p,C,D){var G=Bt,ee=C0.transition;C0.transition=null;try{Bt=4,E0(m,p,C,D)}finally{Bt=G,C0.transition=ee}}function E0(m,p,C,D){if(ng){var G=sg(m,p,C,D);if(G===null)wg(m,p,D,N0,C),ys(m,D);else if(vs(G,m,p,C,D))D.stopPropagation();else if(ys(m,D),p&4&&-1<dn.indexOf(m)){for(;G!==null;){var ee=yh(G);if(ee!==null&&ct(ee),ee=sg(m,p,C,D),ee===null&&wg(m,p,D,N0,C),ee===G)break;G=ee}G!==null&&D.stopPropagation()}else wg(m,p,D,null,C)}}var N0=null;function sg(m,p,C,D){if(N0=null,m=gr(D),m=vu(m),m!==null)if(p=Ee(m),p===null)m=null;else if(C=p.tag,C===13){if(m=Qe(p),m!==null)return m;m=null}else if(C===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;m=null}else p!==m&&(m=null);return N0=m,null}function z2(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ir()){case Ct:return 1;case or:return 4;case Or:case Lr:return 16;case Pr:return 536870912;default:return 16}default:return 16}}var Va=null,du=null,Pc=null;function ah(){if(Pc)return Pc;var m,p=du,C=p.length,D,G="value"in Va?Va.value:Va.textContent,ee=G.length;for(m=0;m<C&&p[m]===G[m];m++);var ge=C-m;for(D=1;D<=ge&&p[C-D]===G[ee-D];D++);return Pc=G.slice(m,1<D?1-D:void 0)}function ad(m){var p=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&p===13&&(m=13)):m=p,m===10&&(m=13),32<=m||m===13?m:0}function Ni(){return!0}function bo(){return!1}function xa(m){function p(C,D,G,ee,ge){this._reactName=C,this._targetInst=G,this.type=D,this.nativeEvent=ee,this.target=ge,this.currentTarget=null;for(var De in m)m.hasOwnProperty(De)&&(C=m[De],this[De]=C?C(ee):ee[De]);return this.isDefaultPrevented=(ee.defaultPrevented!=null?ee.defaultPrevented:ee.returnValue===!1)?Ni:bo,this.isPropagationStopped=bo,this}return H(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=Ni)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=Ni)},persist:function(){},isPersistent:Ni}),p}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pl=xa(eo),xl=H({},eo,{view:0,detail:0}),U2=xa(xl),ih,oh,qa,Ai=H({},xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:od,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==qa&&(qa&&m.type==="mousemove"?(ih=m.screenX-qa.screenX,oh=m.screenY-qa.screenY):oh=ih=0,qa=m),ih)},movementY:function(m){return"movementY"in m?m.movementY:oh}}),hs=xa(Ai),lh=H({},Ai,{dataTransfer:0}),yl=xa(lh),W2=H({},xl,{relatedTarget:0}),ag=xa(W2),F1=H({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),D1=xa(F1),H2=H({},eo,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),ig=xa(H2),G2=H({},eo,{data:0}),id=xa(G2),O1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},og={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function H3(m){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(m):(m=og[m])?!!p[m]:!1}function od(){return H3}var lg=H({},xl,{key:function(m){if(m.key){var p=O1[m.key]||m.key;if(p!=="Unidentified")return p}return m.type==="keypress"?(m=ad(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?W3[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:od,charCode:function(m){return m.type==="keypress"?ad(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?ad(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),V2=xa(lg),q2=H({},Ai,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ld=xa(q2),K2=H({},xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:od}),cg=xa(K2),ug=H({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),A0=xa(ug),I1=H({},Ai,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),R1=xa(I1),Y2=[9,13,27,32],ch=o&&"CompositionEvent"in window,cd=null;o&&"documentMode"in document&&(cd=document.documentMode);var j0=o&&"TextEvent"in window&&!cd,_o=o&&(!ch||cd&&8<cd&&11>=cd),fu=" ",dg=!1;function L1(m,p){switch(m){case"keyup":return Y2.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vl(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var So=!1;function B1(m,p){switch(m){case"compositionend":return vl(p);case"keypress":return p.which!==32?null:(dg=!0,fu);case"textInput":return m=p.data,m===fu&&dg?null:m;default:return null}}function X2(m,p){if(So)return m==="compositionend"||!ch&&L1(m,p)?(m=ah(),Pc=du=Va=null,So=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return _o&&p.locale!=="ko"?null:p.data;default:return null}}var Mc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fc(m){var p=m&&m.nodeName&&m.nodeName.toLowerCase();return p==="input"?!!Mc[m.type]:p==="textarea"}function uh(m,p,C,D){Pt(D),p=bg(p,"onChange"),0<p.length&&(C=new pl("onChange","change",null,C,D),m.push({event:C,listeners:p}))}var P0=null,hu=null;function J2(m){X1(m,0)}function mu(m){var p=va(m);if(ie(p))return m}function Vo(m,p){if(m==="change")return p}var M0=!1;if(o){var gu;if(o){var qo="oninput"in document;if(!qo){var fg=document.createElement("div");fg.setAttribute("oninput","return;"),qo=typeof fg.oninput=="function"}gu=qo}else gu=!1;M0=gu&&(!document.documentMode||9<document.documentMode)}function ud(){P0&&(P0.detachEvent("onpropertychange",$1),hu=P0=null)}function $1(m){if(m.propertyName==="value"&&mu(hu)){var p=[];uh(p,hu,m,gr(m)),Ge(J2,p)}}function z1(m,p,C){m==="focusin"?(ud(),P0=p,hu=C,P0.attachEvent("onpropertychange",$1)):m==="focusout"&&ud()}function Ts(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return mu(hu)}function hg(m,p){if(m==="click")return mu(p)}function U1(m,p){if(m==="input"||m==="change")return mu(p)}function W1(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var to=typeof Object.is=="function"?Object.is:W1;function dd(m,p){if(to(m,p))return!0;if(typeof m!="object"||m===null||typeof p!="object"||p===null)return!1;var C=Object.keys(m),D=Object.keys(p);if(C.length!==D.length)return!1;for(D=0;D<C.length;D++){var G=C[D];if(!l.call(p,G)||!to(m[G],p[G]))return!1}return!0}function pu(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function ws(m,p){var C=pu(m);m=0;for(var D;C;){if(C.nodeType===3){if(D=m+C.textContent.length,m<=p&&D>=p)return{node:C,offset:p-m};m=D}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=pu(C)}}function Qs(m,p){return m&&p?m===p?!0:m&&m.nodeType===3?!1:p&&p.nodeType===3?Qs(m,p.parentNode):"contains"in m?m.contains(p):m.compareDocumentPosition?!!(m.compareDocumentPosition(p)&16):!1:!1}function ya(){for(var m=window,p=xe();p instanceof m.HTMLIFrameElement;){try{var C=typeof p.contentWindow.location.href=="string"}catch{C=!1}if(C)m=p.contentWindow;else break;p=xe(m.document)}return p}function F0(m){var p=m&&m.nodeName&&m.nodeName.toLowerCase();return p&&(p==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||p==="textarea"||m.contentEditable==="true")}function dh(m){var p=ya(),C=m.focusedElem,D=m.selectionRange;if(p!==C&&C&&C.ownerDocument&&Qs(C.ownerDocument.documentElement,C)){if(D!==null&&F0(C)){if(p=D.start,m=D.end,m===void 0&&(m=p),"selectionStart"in C)C.selectionStart=p,C.selectionEnd=Math.min(m,C.value.length);else if(m=(p=C.ownerDocument||document)&&p.defaultView||window,m.getSelection){m=m.getSelection();var G=C.textContent.length,ee=Math.min(D.start,G);D=D.end===void 0?ee:Math.min(D.end,G),!m.extend&&ee>D&&(G=D,D=ee,ee=G),G=ws(C,ee);var ge=ws(C,D);G&&ge&&(m.rangeCount!==1||m.anchorNode!==G.node||m.anchorOffset!==G.offset||m.focusNode!==ge.node||m.focusOffset!==ge.offset)&&(p=p.createRange(),p.setStart(G.node,G.offset),m.removeAllRanges(),ee>D?(m.addRange(p),m.extend(ge.node,ge.offset)):(p.setEnd(ge.node,ge.offset),m.addRange(p)))}}for(p=[],m=C;m=m.parentNode;)m.nodeType===1&&p.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<p.length;C++)m=p[C],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var fh=o&&"documentMode"in document&&11>=document.documentMode,D0=null,Ma=null,fd=null,hh=!1;function mg(m,p,C){var D=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;hh||D0==null||D0!==xe(D)||(D=D0,"selectionStart"in D&&F0(D)?D={start:D.selectionStart,end:D.selectionEnd}:(D=(D.ownerDocument&&D.ownerDocument.defaultView||window).getSelection(),D={anchorNode:D.anchorNode,anchorOffset:D.anchorOffset,focusNode:D.focusNode,focusOffset:D.focusOffset}),fd&&dd(fd,D)||(fd=D,D=bg(Ma,"onSelect"),0<D.length&&(p=new pl("onSelect","select",null,p,C),m.push({event:p,listeners:D}),p.target=D0)))}function ko(m,p){var C={};return C[m.toLowerCase()]=p.toLowerCase(),C["Webkit"+m]="webkit"+p,C["Moz"+m]="moz"+p,C}var Ka={animationend:ko("Animation","AnimationEnd"),animationiteration:ko("Animation","AnimationIteration"),animationstart:ko("Animation","AnimationStart"),transitionend:ko("Transition","TransitionEnd")},hd={},gg={};o&&(gg=document.createElement("div").style,"AnimationEvent"in window||(delete Ka.animationend.animation,delete Ka.animationiteration.animation,delete Ka.animationstart.animation),"TransitionEvent"in window||delete Ka.transitionend.transition);function O0(m){if(hd[m])return hd[m];if(!Ka[m])return m;var p=Ka[m],C;for(C in p)if(p.hasOwnProperty(C)&&C in gg)return hd[m]=p[C];return m}var H1=O0("animationend"),G1=O0("animationiteration"),V1=O0("animationstart"),q1=O0("transitionend"),K1=new Map,Y1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dc(m,p){K1.set(m,p),a(p,[m])}for(var pg=0;pg<Y1.length;pg++){var md=Y1[pg],Q2=md.toLowerCase(),xg=md[0].toUpperCase()+md.slice(1);Dc(Q2,"on"+xg)}Dc(H1,"onAnimationEnd"),Dc(G1,"onAnimationIteration"),Dc(V1,"onAnimationStart"),Dc("dblclick","onDoubleClick"),Dc("focusin","onFocus"),Dc("focusout","onBlur"),Dc(q1,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z2=new Set("cancel close invalid load scroll toggle".split(" ").concat(xu));function yg(m,p,C){var D=m.type||"unknown-event";m.currentTarget=C,ke(D,p,void 0,m),m.currentTarget=null}function X1(m,p){p=(p&4)!==0;for(var C=0;C<m.length;C++){var D=m[C],G=D.event;D=D.listeners;e:{var ee=void 0;if(p)for(var ge=D.length-1;0<=ge;ge--){var De=D[ge],We=De.instance,bt=De.currentTarget;if(De=De.listener,We!==ee&&G.isPropagationStopped())break e;yg(G,De,bt),ee=We}else for(ge=0;ge<D.length;ge++){if(De=D[ge],We=De.instance,bt=De.currentTarget,De=De.listener,We!==ee&&G.isPropagationStopped())break e;yg(G,De,bt),ee=We}}}if(he)throw m=Ce,he=!1,Ce=null,m}function is(m,p){var C=p[Sg];C===void 0&&(C=p[Sg]=new Set);var D=m+"__bubble";C.has(D)||(J1(p,m,2,!1),C.add(D))}function vg(m,p,C){var D=0;p&&(D|=4),J1(C,m,D,p)}var mh="_reactListening"+Math.random().toString(36).slice(2);function gd(m){if(!m[mh]){m[mh]=!0,n.forEach(function(C){C!=="selectionchange"&&(Z2.has(C)||vg(C,!1,m),vg(C,!0,m))});var p=m.nodeType===9?m:m.ownerDocument;p===null||p[mh]||(p[mh]=!0,vg("selectionchange",!1,p))}}function J1(m,p,C,D){switch(z2(p)){case 1:var G=gl;break;case 4:G=jc;break;default:G=E0}C=G.bind(null,p,C,m),G=void 0,!Ut||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(G=!0),D?G!==void 0?m.addEventListener(p,C,{capture:!0,passive:G}):m.addEventListener(p,C,!0):G!==void 0?m.addEventListener(p,C,{passive:G}):m.addEventListener(p,C,!1)}function wg(m,p,C,D,G){var ee=D;if((p&1)===0&&(p&2)===0&&D!==null)e:for(;;){if(D===null)return;var ge=D.tag;if(ge===3||ge===4){var De=D.stateNode.containerInfo;if(De===G||De.nodeType===8&&De.parentNode===G)break;if(ge===4)for(ge=D.return;ge!==null;){var We=ge.tag;if((We===3||We===4)&&(We=ge.stateNode.containerInfo,We===G||We.nodeType===8&&We.parentNode===G))return;ge=ge.return}for(;De!==null;){if(ge=vu(De),ge===null)return;if(We=ge.tag,We===5||We===6){D=ee=ge;continue e}De=De.parentNode}}D=D.return}Ge(function(){var bt=ee,Xt=gr(C),er=[];e:{var Kt=K1.get(m);if(Kt!==void 0){var Sr=pl,Mr=m;switch(m){case"keypress":if(ad(C)===0)break e;case"keydown":case"keyup":Sr=V2;break;case"focusin":Mr="focus",Sr=ag;break;case"focusout":Mr="blur",Sr=ag;break;case"beforeblur":case"afterblur":Sr=ag;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Sr=hs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Sr=yl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Sr=cg;break;case H1:case G1:case V1:Sr=D1;break;case q1:Sr=A0;break;case"scroll":Sr=U2;break;case"wheel":Sr=R1;break;case"copy":case"cut":case"paste":Sr=ig;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Sr=ld}var Fr=(p&4)!==0,Sa=!Fr&&m==="scroll",dt=Fr?Kt!==null?Kt+"Capture":null:Kt;Fr=[];for(var Xe=bt,mt;Xe!==null;){mt=Xe;var lr=mt.stateNode;if(mt.tag===5&&lr!==null&&(mt=lr,dt!==null&&(lr=Ot(Xe,dt),lr!=null&&Fr.push(I0(Xe,lr,mt)))),Sa)break;Xe=Xe.return}0<Fr.length&&(Kt=new Sr(Kt,Mr,null,C,Xt),er.push({event:Kt,listeners:Fr}))}}if((p&7)===0){e:{if(Kt=m==="mouseover"||m==="pointerover",Sr=m==="mouseout"||m==="pointerout",Kt&&C!==Tr&&(Mr=C.relatedTarget||C.fromElement)&&(vu(Mr)||Mr[Wl]))break e;if((Sr||Kt)&&(Kt=Xt.window===Xt?Xt:(Kt=Xt.ownerDocument)?Kt.defaultView||Kt.parentWindow:window,Sr?(Mr=C.relatedTarget||C.toElement,Sr=bt,Mr=Mr?vu(Mr):null,Mr!==null&&(Sa=Ee(Mr),Mr!==Sa||Mr.tag!==5&&Mr.tag!==6)&&(Mr=null)):(Sr=null,Mr=bt),Sr!==Mr)){if(Fr=hs,lr="onMouseLeave",dt="onMouseEnter",Xe="mouse",(m==="pointerout"||m==="pointerover")&&(Fr=ld,lr="onPointerLeave",dt="onPointerEnter",Xe="pointer"),Sa=Sr==null?Kt:va(Sr),mt=Mr==null?Kt:va(Mr),Kt=new Fr(lr,Xe+"leave",Sr,C,Xt),Kt.target=Sa,Kt.relatedTarget=mt,lr=null,vu(Xt)===bt&&(Fr=new Fr(dt,Xe+"enter",Mr,C,Xt),Fr.target=mt,Fr.relatedTarget=Sa,lr=Fr),Sa=lr,Sr&&Mr)t:{for(Fr=Sr,dt=Mr,Xe=0,mt=Fr;mt;mt=pd(mt))Xe++;for(mt=0,lr=dt;lr;lr=pd(lr))mt++;for(;0<Xe-mt;)Fr=pd(Fr),Xe--;for(;0<mt-Xe;)dt=pd(dt),mt--;for(;Xe--;){if(Fr===dt||dt!==null&&Fr===dt.alternate)break t;Fr=pd(Fr),dt=pd(dt)}Fr=null}else Fr=null;Sr!==null&&ew(er,Kt,Sr,Fr,!1),Mr!==null&&Sa!==null&&ew(er,Sa,Mr,Fr,!0)}}e:{if(Kt=bt?va(bt):window,Sr=Kt.nodeName&&Kt.nodeName.toLowerCase(),Sr==="select"||Sr==="input"&&Kt.type==="file")var Ir=Vo;else if(Fc(Kt))if(M0)Ir=U1;else{Ir=Ts;var Wr=z1}else(Sr=Kt.nodeName)&&Sr.toLowerCase()==="input"&&(Kt.type==="checkbox"||Kt.type==="radio")&&(Ir=hg);if(Ir&&(Ir=Ir(m,bt))){uh(er,Ir,C,Xt);break e}Wr&&Wr(m,Kt,bt),m==="focusout"&&(Wr=Kt._wrapperState)&&Wr.controlled&&Kt.type==="number"&&it(Kt,"number",Kt.value)}switch(Wr=bt?va(bt):window,m){case"focusin":(Fc(Wr)||Wr.contentEditable==="true")&&(D0=Wr,Ma=bt,fd=null);break;case"focusout":fd=Ma=D0=null;break;case"mousedown":hh=!0;break;case"contextmenu":case"mouseup":case"dragend":hh=!1,mg(er,C,Xt);break;case"selectionchange":if(fh)break;case"keydown":case"keyup":mg(er,C,Xt)}var Hr;if(ch)e:{switch(m){case"compositionstart":var rn="onCompositionStart";break e;case"compositionend":rn="onCompositionEnd";break e;case"compositionupdate":rn="onCompositionUpdate";break e}rn=void 0}else So?L1(m,C)&&(rn="onCompositionEnd"):m==="keydown"&&C.keyCode===229&&(rn="onCompositionStart");rn&&(_o&&C.locale!=="ko"&&(So||rn!=="onCompositionStart"?rn==="onCompositionEnd"&&So&&(Hr=ah()):(Va=Xt,du="value"in Va?Va.value:Va.textContent,So=!0)),Wr=bg(bt,rn),0<Wr.length&&(rn=new id(rn,m,null,C,Xt),er.push({event:rn,listeners:Wr}),Hr?rn.data=Hr:(Hr=vl(C),Hr!==null&&(rn.data=Hr)))),(Hr=j0?B1(m,C):X2(m,C))&&(bt=bg(bt,"onBeforeInput"),0<bt.length&&(Xt=new id("onBeforeInput","beforeinput",null,C,Xt),er.push({event:Xt,listeners:bt}),Xt.data=Hr))}X1(er,p)})}function I0(m,p,C){return{instance:m,listener:p,currentTarget:C}}function bg(m,p){for(var C=p+"Capture",D=[];m!==null;){var G=m,ee=G.stateNode;G.tag===5&&ee!==null&&(G=ee,ee=Ot(m,C),ee!=null&&D.unshift(I0(m,ee,G)),ee=Ot(m,p),ee!=null&&D.push(I0(m,ee,G))),m=m.return}return D}function pd(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function ew(m,p,C,D,G){for(var ee=p._reactName,ge=[];C!==null&&C!==D;){var De=C,We=De.alternate,bt=De.stateNode;if(We!==null&&We===D)break;De.tag===5&&bt!==null&&(De=bt,G?(We=Ot(C,ee),We!=null&&ge.unshift(I0(C,We,De))):G||(We=Ot(C,ee),We!=null&&ge.push(I0(C,We,De)))),C=C.return}ge.length!==0&&m.push({event:p,listeners:ge})}var G3=/\r\n?/g,tw=/\u0000|\uFFFD/g;function Q1(m){return(typeof m=="string"?m:""+m).replace(G3,`
`).replace(tw,"")}function gh(m,p,C){if(p=Q1(p),Q1(m)!==p&&C)throw Error(r(425))}function xd(){}var Z1=null,ex=null;function tx(m,p){return m==="textarea"||m==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var To=typeof setTimeout=="function"?setTimeout:void 0,rx=typeof clearTimeout=="function"?clearTimeout:void 0,ph=typeof Promise=="function"?Promise:void 0,rw=typeof queueMicrotask=="function"?queueMicrotask:typeof ph<"u"?function(m){return ph.resolve(null).then(m).catch(nw)}:To;function nw(m){setTimeout(function(){throw m})}function _g(m,p){var C=p,D=0;do{var G=C.nextSibling;if(m.removeChild(C),G&&G.nodeType===8)if(C=G.data,C==="/$"){if(D===0){m.removeChild(G),Zi(p);return}D--}else C!=="$"&&C!=="$?"&&C!=="$!"||D++;C=G}while(C);Zi(p)}function Ul(m){for(;m!=null;m=m.nextSibling){var p=m.nodeType;if(p===1||p===3)break;if(p===8){if(p=m.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return m}function yd(m){m=m.previousSibling;for(var p=0;m;){if(m.nodeType===8){var C=m.data;if(C==="$"||C==="$!"||C==="$?"){if(p===0)return m;p--}else C==="/$"&&p++}m=m.previousSibling}return null}var yu=Math.random().toString(36).slice(2),Ko="__reactFiber$"+yu,xh="__reactProps$"+yu,Wl="__reactContainer$"+yu,Sg="__reactEvents$"+yu,sw="__reactListeners$"+yu,aw="__reactHandles$"+yu;function vu(m){var p=m[Ko];if(p)return p;for(var C=m.parentNode;C;){if(p=C[Wl]||C[Ko]){if(C=p.alternate,p.child!==null||C!==null&&C.child!==null)for(m=yd(m);m!==null;){if(C=m[Ko])return C;m=yd(m)}return p}m=C,C=m.parentNode}return null}function yh(m){return m=m[Ko]||m[Wl],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function va(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(r(33))}function Fa(m){return m[xh]||null}var kg=[],vd=-1;function Oc(m){return{current:m}}function os(m){0>vd||(m.current=kg[vd],kg[vd]=null,vd--)}function Qn(m,p){vd++,kg[vd]=m.current,m.current=p}var Hl={},Ya=Oc(Hl),li=Oc(!1),wu=Hl;function wd(m,p){var C=m.type.contextTypes;if(!C)return Hl;var D=m.stateNode;if(D&&D.__reactInternalMemoizedUnmaskedChildContext===p)return D.__reactInternalMemoizedMaskedChildContext;var G={},ee;for(ee in C)G[ee]=p[ee];return D&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=p,m.__reactInternalMemoizedMaskedChildContext=G),G}function ci(m){return m=m.childContextTypes,m!=null}function R0(){os(li),os(Ya)}function nx(m,p,C){if(Ya.current!==Hl)throw Error(r(168));Qn(Ya,p),Qn(li,C)}function Tg(m,p,C){var D=m.stateNode;if(p=p.childContextTypes,typeof D.getChildContext!="function")return C;D=D.getChildContext();for(var G in D)if(!(G in p))throw Error(r(108,J(m)||"Unknown",G));return H({},C,D)}function bd(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||Hl,wu=Ya.current,Qn(Ya,m),Qn(li,li.current),!0}function iw(m,p,C){var D=m.stateNode;if(!D)throw Error(r(169));C?(m=Tg(m,p,wu),D.__reactInternalMemoizedMergedChildContext=m,os(li),os(Ya),Qn(Ya,m)):os(li),Qn(li,C)}var Gl=null,L0=!1,Cg=!1;function vh(m){Gl===null?Gl=[m]:Gl.push(m)}function Ic(m){L0=!0,vh(m)}function bu(){if(!Cg&&Gl!==null){Cg=!0;var m=0,p=Bt;try{var C=Gl;for(Bt=1;m<C.length;m++){var D=C[m];do D=D(!0);while(D!==null)}Gl=null,L0=!1}catch(G){throw Gl!==null&&(Gl=Gl.slice(m+1)),je(Ct,bu),G}finally{Bt=p,Cg=!1}}return null}var ji=[],_d=0,_u=null,Su=0,Pi=[],Mi=0,ku=null,Co=1,bs="";function Sd(m,p){ji[_d++]=Su,ji[_d++]=_u,_u=m,Su=p}function ow(m,p,C){Pi[Mi++]=Co,Pi[Mi++]=bs,Pi[Mi++]=ku,ku=m;var D=Co;m=bs;var G=32-_r(D)-1;D&=~(1<<G),C+=1;var ee=32-_r(p)+G;if(30<ee){var ge=G-G%5;ee=(D&(1<<ge)-1).toString(32),D>>=ge,G-=ge,Co=1<<32-_r(p)+G|C<<G|D,bs=ee+m}else Co=1<<ee|C<<G|D,bs=m}function B0(m){m.return!==null&&(Sd(m,1),ow(m,1,0))}function Da(m){for(;m===_u;)_u=ji[--_d],ji[_d]=null,Su=ji[--_d],ji[_d]=null;for(;m===ku;)ku=Pi[--Mi],Pi[Mi]=null,bs=Pi[--Mi],Pi[Mi]=null,Co=Pi[--Mi],Pi[Mi]=null}var Eo=null,pr=null,Vn=!1,No=null;function sx(m,p){var C=Ql(5,null,null,0);C.elementType="DELETED",C.stateNode=p,C.return=m,p=m.deletions,p===null?(m.deletions=[C],m.flags|=16):p.push(C)}function lw(m,p){switch(m.tag){case 5:var C=m.type;return p=p.nodeType!==1||C.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(m.stateNode=p,Eo=m,pr=Ul(p.firstChild),!0):!1;case 6:return p=m.pendingProps===""||p.nodeType!==3?null:p,p!==null?(m.stateNode=p,Eo=m,pr=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(C=ku!==null?{id:Co,overflow:bs}:null,m.memoizedState={dehydrated:p,treeContext:C,retryLane:1073741824},C=Ql(18,null,null,0),C.stateNode=p,C.return=m,m.child=C,Eo=m,pr=null,!0):!1;default:return!1}}function kd(m){return(m.mode&1)!==0&&(m.flags&128)===0}function $0(m){if(Vn){var p=pr;if(p){var C=p;if(!lw(m,p)){if(kd(m))throw Error(r(418));p=Ul(C.nextSibling);var D=Eo;p&&lw(m,p)?sx(D,C):(m.flags=m.flags&-4097|2,Vn=!1,Eo=m)}}else{if(kd(m))throw Error(r(418));m.flags=m.flags&-4097|2,Vn=!1,Eo=m}}}function Eg(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;Eo=m}function wh(m){if(m!==Eo)return!1;if(!Vn)return Eg(m),Vn=!0,!1;var p;if((p=m.tag!==3)&&!(p=m.tag!==5)&&(p=m.type,p=p!=="head"&&p!=="body"&&!tx(m.type,m.memoizedProps)),p&&(p=pr)){if(kd(m))throw ax(),Error(r(418));for(;p;)sx(m,p),p=Ul(p.nextSibling)}if(Eg(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));e:{for(m=m.nextSibling,p=0;m;){if(m.nodeType===8){var C=m.data;if(C==="/$"){if(p===0){pr=Ul(m.nextSibling);break e}p--}else C!=="$"&&C!=="$!"&&C!=="$?"||p++}m=m.nextSibling}pr=null}}else pr=Eo?Ul(m.stateNode.nextSibling):null;return!0}function ax(){for(var m=pr;m;)m=Ul(m.nextSibling)}function Td(){pr=Eo=null,Vn=!1}function bh(m){No===null?No=[m]:No.push(m)}var ix=N.ReactCurrentBatchConfig;function Us(m,p,C){if(m=C.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(r(309));var D=C.stateNode}if(!D)throw Error(r(147,m));var G=D,ee=""+m;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===ee?p.ref:(p=function(ge){var De=G.refs;ge===null?delete De[ee]:De[ee]=ge},p._stringRef=ee,p)}if(typeof m!="string")throw Error(r(284));if(!C._owner)throw Error(r(290,m))}return m}function ro(m,p){throw m=Object.prototype.toString.call(p),Error(r(31,m==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":m))}function wl(m){var p=m._init;return p(m._payload)}function Ng(m){function p(dt,Xe){if(m){var mt=dt.deletions;mt===null?(dt.deletions=[Xe],dt.flags|=16):mt.push(Xe)}}function C(dt,Xe){if(!m)return null;for(;Xe!==null;)p(dt,Xe),Xe=Xe.sibling;return null}function D(dt,Xe){for(dt=new Map;Xe!==null;)Xe.key!==null?dt.set(Xe.key,Xe):dt.set(Xe.index,Xe),Xe=Xe.sibling;return dt}function G(dt,Xe){return dt=of(dt,Xe),dt.index=0,dt.sibling=null,dt}function ee(dt,Xe,mt){return dt.index=mt,m?(mt=dt.alternate,mt!==null?(mt=mt.index,mt<Xe?(dt.flags|=2,Xe):mt):(dt.flags|=2,Xe)):(dt.flags|=1048576,Xe)}function ge(dt){return m&&dt.alternate===null&&(dt.flags|=2),dt}function De(dt,Xe,mt,lr){return Xe===null||Xe.tag!==6?(Xe=f5(mt,dt.mode,lr),Xe.return=dt,Xe):(Xe=G(Xe,mt),Xe.return=dt,Xe)}function We(dt,Xe,mt,lr){var Ir=mt.type;return Ir===M?Xt(dt,Xe,mt.props.children,lr,mt.key):Xe!==null&&(Xe.elementType===Ir||typeof Ir=="object"&&Ir!==null&&Ir.$$typeof===ne&&wl(Ir)===Xe.type)?(lr=G(Xe,mt.props),lr.ref=Us(dt,Xe,mt),lr.return=dt,lr):(lr=Aw(mt.type,mt.key,mt.props,null,dt.mode,lr),lr.ref=Us(dt,Xe,mt),lr.return=dt,lr)}function bt(dt,Xe,mt,lr){return Xe===null||Xe.tag!==4||Xe.stateNode.containerInfo!==mt.containerInfo||Xe.stateNode.implementation!==mt.implementation?(Xe=h5(mt,dt.mode,lr),Xe.return=dt,Xe):(Xe=G(Xe,mt.children||[]),Xe.return=dt,Xe)}function Xt(dt,Xe,mt,lr,Ir){return Xe===null||Xe.tag!==7?(Xe=Mh(mt,dt.mode,lr,Ir),Xe.return=dt,Xe):(Xe=G(Xe,mt),Xe.return=dt,Xe)}function er(dt,Xe,mt){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return Xe=f5(""+Xe,dt.mode,mt),Xe.return=dt,Xe;if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case E:return mt=Aw(Xe.type,Xe.key,Xe.props,null,dt.mode,mt),mt.ref=Us(dt,null,Xe),mt.return=dt,mt;case P:return Xe=h5(Xe,dt.mode,mt),Xe.return=dt,Xe;case ne:var lr=Xe._init;return er(dt,lr(Xe._payload),mt)}if(kt(Xe)||R(Xe))return Xe=Mh(Xe,dt.mode,mt,null),Xe.return=dt,Xe;ro(dt,Xe)}return null}function Kt(dt,Xe,mt,lr){var Ir=Xe!==null?Xe.key:null;if(typeof mt=="string"&&mt!==""||typeof mt=="number")return Ir!==null?null:De(dt,Xe,""+mt,lr);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case E:return mt.key===Ir?We(dt,Xe,mt,lr):null;case P:return mt.key===Ir?bt(dt,Xe,mt,lr):null;case ne:return Ir=mt._init,Kt(dt,Xe,Ir(mt._payload),lr)}if(kt(mt)||R(mt))return Ir!==null?null:Xt(dt,Xe,mt,lr,null);ro(dt,mt)}return null}function Sr(dt,Xe,mt,lr,Ir){if(typeof lr=="string"&&lr!==""||typeof lr=="number")return dt=dt.get(mt)||null,De(Xe,dt,""+lr,Ir);if(typeof lr=="object"&&lr!==null){switch(lr.$$typeof){case E:return dt=dt.get(lr.key===null?mt:lr.key)||null,We(Xe,dt,lr,Ir);case P:return dt=dt.get(lr.key===null?mt:lr.key)||null,bt(Xe,dt,lr,Ir);case ne:var Wr=lr._init;return Sr(dt,Xe,mt,Wr(lr._payload),Ir)}if(kt(lr)||R(lr))return dt=dt.get(mt)||null,Xt(Xe,dt,lr,Ir,null);ro(Xe,lr)}return null}function Mr(dt,Xe,mt,lr){for(var Ir=null,Wr=null,Hr=Xe,rn=Xe=0,gi=null;Hr!==null&&rn<mt.length;rn++){Hr.index>rn?(gi=Hr,Hr=null):gi=Hr.sibling;var Bn=Kt(dt,Hr,mt[rn],lr);if(Bn===null){Hr===null&&(Hr=gi);break}m&&Hr&&Bn.alternate===null&&p(dt,Hr),Xe=ee(Bn,Xe,rn),Wr===null?Ir=Bn:Wr.sibling=Bn,Wr=Bn,Hr=gi}if(rn===mt.length)return C(dt,Hr),Vn&&Sd(dt,rn),Ir;if(Hr===null){for(;rn<mt.length;rn++)Hr=er(dt,mt[rn],lr),Hr!==null&&(Xe=ee(Hr,Xe,rn),Wr===null?Ir=Hr:Wr.sibling=Hr,Wr=Hr);return Vn&&Sd(dt,rn),Ir}for(Hr=D(dt,Hr);rn<mt.length;rn++)gi=Sr(Hr,dt,rn,mt[rn],lr),gi!==null&&(m&&gi.alternate!==null&&Hr.delete(gi.key===null?rn:gi.key),Xe=ee(gi,Xe,rn),Wr===null?Ir=gi:Wr.sibling=gi,Wr=gi);return m&&Hr.forEach(function(lf){return p(dt,lf)}),Vn&&Sd(dt,rn),Ir}function Fr(dt,Xe,mt,lr){var Ir=R(mt);if(typeof Ir!="function")throw Error(r(150));if(mt=Ir.call(mt),mt==null)throw Error(r(151));for(var Wr=Ir=null,Hr=Xe,rn=Xe=0,gi=null,Bn=mt.next();Hr!==null&&!Bn.done;rn++,Bn=mt.next()){Hr.index>rn?(gi=Hr,Hr=null):gi=Hr.sibling;var lf=Kt(dt,Hr,Bn.value,lr);if(lf===null){Hr===null&&(Hr=gi);break}m&&Hr&&lf.alternate===null&&p(dt,Hr),Xe=ee(lf,Xe,rn),Wr===null?Ir=lf:Wr.sibling=lf,Wr=lf,Hr=gi}if(Bn.done)return C(dt,Hr),Vn&&Sd(dt,rn),Ir;if(Hr===null){for(;!Bn.done;rn++,Bn=mt.next())Bn=er(dt,Bn.value,lr),Bn!==null&&(Xe=ee(Bn,Xe,rn),Wr===null?Ir=Bn:Wr.sibling=Bn,Wr=Bn);return Vn&&Sd(dt,rn),Ir}for(Hr=D(dt,Hr);!Bn.done;rn++,Bn=mt.next())Bn=Sr(Hr,dt,rn,Bn.value,lr),Bn!==null&&(m&&Bn.alternate!==null&&Hr.delete(Bn.key===null?rn:Bn.key),Xe=ee(Bn,Xe,rn),Wr===null?Ir=Bn:Wr.sibling=Bn,Wr=Bn);return m&&Hr.forEach(function(pJ){return p(dt,pJ)}),Vn&&Sd(dt,rn),Ir}function Sa(dt,Xe,mt,lr){if(typeof mt=="object"&&mt!==null&&mt.type===M&&mt.key===null&&(mt=mt.props.children),typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case E:e:{for(var Ir=mt.key,Wr=Xe;Wr!==null;){if(Wr.key===Ir){if(Ir=mt.type,Ir===M){if(Wr.tag===7){C(dt,Wr.sibling),Xe=G(Wr,mt.props.children),Xe.return=dt,dt=Xe;break e}}else if(Wr.elementType===Ir||typeof Ir=="object"&&Ir!==null&&Ir.$$typeof===ne&&wl(Ir)===Wr.type){C(dt,Wr.sibling),Xe=G(Wr,mt.props),Xe.ref=Us(dt,Wr,mt),Xe.return=dt,dt=Xe;break e}C(dt,Wr);break}else p(dt,Wr);Wr=Wr.sibling}mt.type===M?(Xe=Mh(mt.props.children,dt.mode,lr,mt.key),Xe.return=dt,dt=Xe):(lr=Aw(mt.type,mt.key,mt.props,null,dt.mode,lr),lr.ref=Us(dt,Xe,mt),lr.return=dt,dt=lr)}return ge(dt);case P:e:{for(Wr=mt.key;Xe!==null;){if(Xe.key===Wr)if(Xe.tag===4&&Xe.stateNode.containerInfo===mt.containerInfo&&Xe.stateNode.implementation===mt.implementation){C(dt,Xe.sibling),Xe=G(Xe,mt.children||[]),Xe.return=dt,dt=Xe;break e}else{C(dt,Xe);break}else p(dt,Xe);Xe=Xe.sibling}Xe=h5(mt,dt.mode,lr),Xe.return=dt,dt=Xe}return ge(dt);case ne:return Wr=mt._init,Sa(dt,Xe,Wr(mt._payload),lr)}if(kt(mt))return Mr(dt,Xe,mt,lr);if(R(mt))return Fr(dt,Xe,mt,lr);ro(dt,mt)}return typeof mt=="string"&&mt!==""||typeof mt=="number"?(mt=""+mt,Xe!==null&&Xe.tag===6?(C(dt,Xe.sibling),Xe=G(Xe,mt),Xe.return=dt,dt=Xe):(C(dt,Xe),Xe=f5(mt,dt.mode,lr),Xe.return=dt,dt=Xe),ge(dt)):C(dt,Xe)}return Sa}var Cd=Ng(!0),Yo=Ng(!1),_h=Oc(null),Ao=null,z0=null,Ag=null;function jg(){Ag=z0=Ao=null}function Pg(m){var p=_h.current;os(_h),m._currentValue=p}function Mg(m,p,C){for(;m!==null;){var D=m.alternate;if((m.childLanes&p)!==p?(m.childLanes|=p,D!==null&&(D.childLanes|=p)):D!==null&&(D.childLanes&p)!==p&&(D.childLanes|=p),m===C)break;m=m.return}}function Rc(m,p){Ao=m,Ag=z0=null,m=m.dependencies,m!==null&&m.firstContext!==null&&((m.lanes&p)!==0&&(se=!0),m.firstContext=null)}function Fi(m){var p=m._currentValue;if(Ag!==m)if(m={context:m,memoizedValue:p,next:null},z0===null){if(Ao===null)throw Error(r(308));z0=m,Ao.dependencies={lanes:0,firstContext:m}}else z0=z0.next=m;return p}var Vl=null;function U0(m){Vl===null?Vl=[m]:Vl.push(m)}function Sh(m,p,C,D){var G=p.interleaved;return G===null?(C.next=C,U0(p)):(C.next=G.next,G.next=C),p.interleaved=C,jo(m,D)}function jo(m,p){m.lanes|=p;var C=m.alternate;for(C!==null&&(C.lanes|=p),C=m,m=m.return;m!==null;)m.childLanes|=p,C=m.alternate,C!==null&&(C.childLanes|=p),C=m,m=m.return;return C.tag===3?C.stateNode:null}var ql=!1;function kh(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fg(m,p){m=m.updateQueue,p.updateQueue===m&&(p.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function Kl(m,p){return{eventTime:m,lane:p,tag:0,payload:null,callback:null,next:null}}function Yl(m,p,C){var D=m.updateQueue;if(D===null)return null;if(D=D.shared,(Dn&2)!==0){var G=D.pending;return G===null?p.next=p:(p.next=G.next,G.next=p),D.pending=p,jo(m,C)}return G=D.interleaved,G===null?(p.next=p,U0(D)):(p.next=G.next,G.next=p),D.interleaved=p,jo(m,C)}function Dg(m,p,C){if(p=p.updateQueue,p!==null&&(p=p.shared,(C&4194240)!==0)){var D=p.lanes;D&=m.pendingLanes,C|=D,p.lanes=C,Gt(m,C)}}function Th(m,p){var C=m.updateQueue,D=m.alternate;if(D!==null&&(D=D.updateQueue,C===D)){var G=null,ee=null;if(C=C.firstBaseUpdate,C!==null){do{var ge={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};ee===null?G=ee=ge:ee=ee.next=ge,C=C.next}while(C!==null);ee===null?G=ee=p:ee=ee.next=p}else G=ee=p;C={baseState:D.baseState,firstBaseUpdate:G,lastBaseUpdate:ee,shared:D.shared,effects:D.effects},m.updateQueue=C;return}m=C.lastBaseUpdate,m===null?C.firstBaseUpdate=p:m.next=p,C.lastBaseUpdate=p}function W0(m,p,C,D){var G=m.updateQueue;ql=!1;var ee=G.firstBaseUpdate,ge=G.lastBaseUpdate,De=G.shared.pending;if(De!==null){G.shared.pending=null;var We=De,bt=We.next;We.next=null,ge===null?ee=bt:ge.next=bt,ge=We;var Xt=m.alternate;Xt!==null&&(Xt=Xt.updateQueue,De=Xt.lastBaseUpdate,De!==ge&&(De===null?Xt.firstBaseUpdate=bt:De.next=bt,Xt.lastBaseUpdate=We))}if(ee!==null){var er=G.baseState;ge=0,Xt=bt=We=null,De=ee;do{var Kt=De.lane,Sr=De.eventTime;if((D&Kt)===Kt){Xt!==null&&(Xt=Xt.next={eventTime:Sr,lane:0,tag:De.tag,payload:De.payload,callback:De.callback,next:null});e:{var Mr=m,Fr=De;switch(Kt=p,Sr=C,Fr.tag){case 1:if(Mr=Fr.payload,typeof Mr=="function"){er=Mr.call(Sr,er,Kt);break e}er=Mr;break e;case 3:Mr.flags=Mr.flags&-65537|128;case 0:if(Mr=Fr.payload,Kt=typeof Mr=="function"?Mr.call(Sr,er,Kt):Mr,Kt==null)break e;er=H({},er,Kt);break e;case 2:ql=!0}}De.callback!==null&&De.lane!==0&&(m.flags|=64,Kt=G.effects,Kt===null?G.effects=[De]:Kt.push(De))}else Sr={eventTime:Sr,lane:Kt,tag:De.tag,payload:De.payload,callback:De.callback,next:null},Xt===null?(bt=Xt=Sr,We=er):Xt=Xt.next=Sr,ge|=Kt;if(De=De.next,De===null){if(De=G.shared.pending,De===null)break;Kt=De,De=Kt.next,Kt.next=null,G.lastBaseUpdate=Kt,G.shared.pending=null}}while(!0);if(Xt===null&&(We=er),G.baseState=We,G.firstBaseUpdate=bt,G.lastBaseUpdate=Xt,p=G.shared.interleaved,p!==null){G=p;do ge|=G.lane,G=G.next;while(G!==p)}else ee===null&&(G.shared.lanes=0);Nh|=ge,m.lanes=ge,m.memoizedState=er}}function Os(m,p,C){if(m=p.effects,p.effects=null,m!==null)for(p=0;p<m.length;p++){var D=m[p],G=D.callback;if(G!==null){if(D.callback=null,D=C,typeof G!="function")throw Error(r(191,G));G.call(D)}}}var fn={},Zn=Oc(fn),_s=Oc(fn),Ws=Oc(fn);function wa(m){if(m===fn)throw Error(r(174));return m}function Tu(m,p){switch(Qn(Ws,p),Qn(_s,m),Qn(Zn,fn),m=p.nodeType,m){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:$e(null,"");break;default:m=m===8?p.parentNode:p,p=m.namespaceURI||null,m=m.tagName,p=$e(p,m)}os(Zn),Qn(Zn,p)}function Ss(){os(Zn),os(_s),os(Ws)}function H0(m){wa(Ws.current);var p=wa(Zn.current),C=$e(p,m.type);p!==C&&(Qn(_s,m),Qn(Zn,C))}function Lc(m){_s.current===m&&(os(Zn),os(_s))}var ls=Oc(0);function G0(m){for(var p=m;p!==null;){if(p.tag===13){var C=p.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||C.data==="$?"||C.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===m)break;for(;p.sibling===null;){if(p.return===null||p.return===m)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Ed=[];function ui(){for(var m=0;m<Ed.length;m++)Ed[m]._workInProgressVersionPrimary=null;Ed.length=0}var V0=N.ReactCurrentDispatcher,Ch=N.ReactCurrentBatchConfig,Di=0,Xn=null,Is=null,Zs=null,bl=!1,Cu=!1,Xo=0,Og=0;function ea(){throw Error(r(321))}function Eh(m,p){if(p===null)return!1;for(var C=0;C<p.length&&C<m.length;C++)if(!to(m[C],p[C]))return!1;return!0}function q0(m,p,C,D,G,ee){if(Di=ee,Xn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,V0.current=m===null||m.memoizedState===null?q3:Au,m=C(D,G),Cu){ee=0;do{if(Cu=!1,Xo=0,25<=ee)throw Error(r(301));ee+=1,Zs=Is=null,p.updateQueue=null,V0.current=$g,m=C(D,G)}while(Cu)}if(V0.current=J0,p=Is!==null&&Is.next!==null,Di=0,Zs=Is=Xn=null,bl=!1,p)throw Error(r(300));return m}function K0(){var m=Xo!==0;return Xo=0,m}function ms(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zs===null?Xn.memoizedState=Zs=m:Zs=Zs.next=m,Zs}function ba(){if(Is===null){var m=Xn.alternate;m=m!==null?m.memoizedState:null}else m=Is.next;var p=Zs===null?Xn.memoizedState:Zs.next;if(p!==null)Zs=p,Is=m;else{if(m===null)throw Error(r(310));Is=m,m={memoizedState:Is.memoizedState,baseState:Is.baseState,baseQueue:Is.baseQueue,queue:Is.queue,next:null},Zs===null?Xn.memoizedState=Zs=m:Zs=Zs.next=m}return Zs}function di(m,p){return typeof p=="function"?p(m):p}function fi(m){var p=ba(),C=p.queue;if(C===null)throw Error(r(311));C.lastRenderedReducer=m;var D=Is,G=D.baseQueue,ee=C.pending;if(ee!==null){if(G!==null){var ge=G.next;G.next=ee.next,ee.next=ge}D.baseQueue=G=ee,C.pending=null}if(G!==null){ee=G.next,D=D.baseState;var De=ge=null,We=null,bt=ee;do{var Xt=bt.lane;if((Di&Xt)===Xt)We!==null&&(We=We.next={lane:0,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null}),D=bt.hasEagerState?bt.eagerState:m(D,bt.action);else{var er={lane:Xt,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null};We===null?(De=We=er,ge=D):We=We.next=er,Xn.lanes|=Xt,Nh|=Xt}bt=bt.next}while(bt!==null&&bt!==ee);We===null?ge=D:We.next=De,to(D,p.memoizedState)||(se=!0),p.memoizedState=D,p.baseState=ge,p.baseQueue=We,C.lastRenderedState=D}if(m=C.interleaved,m!==null){G=m;do ee=G.lane,Xn.lanes|=ee,Nh|=ee,G=G.next;while(G!==m)}else G===null&&(C.lanes=0);return[p.memoizedState,C.dispatch]}function Ig(m){var p=ba(),C=p.queue;if(C===null)throw Error(r(311));C.lastRenderedReducer=m;var D=C.dispatch,G=C.pending,ee=p.memoizedState;if(G!==null){C.pending=null;var ge=G=G.next;do ee=m(ee,ge.action),ge=ge.next;while(ge!==G);to(ee,p.memoizedState)||(se=!0),p.memoizedState=ee,p.baseQueue===null&&(p.baseState=ee),C.lastRenderedState=ee}return[ee,D]}function Rg(){}function Lg(m,p){var C=Xn,D=ba(),G=p(),ee=!to(D.memoizedState,G);if(ee&&(D.memoizedState=G,se=!0),D=D.queue,ux(ox.bind(null,C,D,m),[m]),D.getSnapshot!==p||ee||Zs!==null&&Zs.memoizedState.tag&1){if(C.flags|=2048,Y0(9,Bc.bind(null,C,D,G,p),void 0,null),mi===null)throw Error(r(349));(Di&30)!==0||cw(C,p,G)}return G}function cw(m,p,C){m.flags|=16384,m={getSnapshot:p,value:C},p=Xn.updateQueue,p===null?(p={lastEffect:null,stores:null},Xn.updateQueue=p,p.stores=[m]):(C=p.stores,C===null?p.stores=[m]:C.push(m))}function Bc(m,p,C,D){p.value=C,p.getSnapshot=D,lx(p)&&Bg(m)}function ox(m,p,C){return C(function(){lx(p)&&Bg(m)})}function lx(m){var p=m.getSnapshot;m=m.value;try{var C=p();return!to(m,C)}catch{return!0}}function Bg(m){var p=jo(m,1);p!==null&&Wc(p,m,1,-1)}function Eu(m){var p=ms();return typeof m=="function"&&(m=m()),p.memoizedState=p.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:m},p.queue=m,m=m.dispatch=gw.bind(null,Xn,m),[p.memoizedState,m]}function Y0(m,p,C,D){return m={tag:m,create:p,destroy:C,deps:D,next:null},p=Xn.updateQueue,p===null?(p={lastEffect:null,stores:null},Xn.updateQueue=p,p.lastEffect=m.next=m):(C=p.lastEffect,C===null?p.lastEffect=m.next=m:(D=C.next,C.next=m,m.next=D,p.lastEffect=m)),m}function cx(){return ba().memoizedState}function X0(m,p,C,D){var G=ms();Xn.flags|=m,G.memoizedState=Y0(1|p,C,void 0,D===void 0?null:D)}function Nd(m,p,C,D){var G=ba();D=D===void 0?null:D;var ee=void 0;if(Is!==null){var ge=Is.memoizedState;if(ee=ge.destroy,D!==null&&Eh(D,ge.deps)){G.memoizedState=Y0(p,C,ee,D);return}}Xn.flags|=m,G.memoizedState=Y0(1|p,C,ee,D)}function uw(m,p){return X0(8390656,8,m,p)}function ux(m,p){return Nd(2048,8,m,p)}function dx(m,p){return Nd(4,2,m,p)}function fx(m,p){return Nd(4,4,m,p)}function Nu(m,p){if(typeof p=="function")return m=m(),p(m),function(){p(null)};if(p!=null)return m=m(),p.current=m,function(){p.current=null}}function dw(m,p,C){return C=C!=null?C.concat([m]):null,Nd(4,4,Nu.bind(null,p,m),C)}function $c(){}function hx(m,p){var C=ba();p=p===void 0?null:p;var D=C.memoizedState;return D!==null&&p!==null&&Eh(p,D[1])?D[0]:(C.memoizedState=[m,p],m)}function gs(m,p){var C=ba();p=p===void 0?null:p;var D=C.memoizedState;return D!==null&&p!==null&&Eh(p,D[1])?D[0]:(m=m(),C.memoizedState=[m,p],m)}function fw(m,p,C){return(Di&21)===0?(m.baseState&&(m.baseState=!1,se=!0),m.memoizedState=C):(to(C,p)||(C=fs(),Xn.lanes|=C,Nh|=C,m.baseState=!0),p)}function hw(m,p){var C=Bt;Bt=C!==0&&4>C?C:4,m(!0);var D=Ch.transition;Ch.transition={};try{m(!1),p()}finally{Bt=C,Ch.transition=D}}function mw(){return ba().memoizedState}function V3(m,p,C){var D=sf(m);if(C={lane:D,action:C,hasEagerState:!1,eagerState:null,next:null},mx(m))pw(p,C);else if(C=Sh(m,p,C,D),C!==null){var G=Mo();Wc(C,m,D,G),Po(C,p,D)}}function gw(m,p,C){var D=sf(m),G={lane:D,action:C,hasEagerState:!1,eagerState:null,next:null};if(mx(m))pw(p,G);else{var ee=m.alternate;if(m.lanes===0&&(ee===null||ee.lanes===0)&&(ee=p.lastRenderedReducer,ee!==null))try{var ge=p.lastRenderedState,De=ee(ge,C);if(G.hasEagerState=!0,G.eagerState=De,to(De,ge)){var We=p.interleaved;We===null?(G.next=G,U0(p)):(G.next=We.next,We.next=G),p.interleaved=G;return}}catch{}finally{}C=Sh(m,p,G,D),C!==null&&(G=Mo(),Wc(C,m,D,G),Po(C,p,D))}}function mx(m){var p=m.alternate;return m===Xn||p!==null&&p===Xn}function pw(m,p){Cu=bl=!0;var C=m.pending;C===null?p.next=p:(p.next=C.next,C.next=p),m.pending=p}function Po(m,p,C){if((C&4194240)!==0){var D=p.lanes;D&=m.pendingLanes,C|=D,p.lanes=C,Gt(m,C)}}var J0={readContext:Fi,useCallback:ea,useContext:ea,useEffect:ea,useImperativeHandle:ea,useInsertionEffect:ea,useLayoutEffect:ea,useMemo:ea,useReducer:ea,useRef:ea,useState:ea,useDebugValue:ea,useDeferredValue:ea,useTransition:ea,useMutableSource:ea,useSyncExternalStore:ea,useId:ea,unstable_isNewReconciler:!1},q3={readContext:Fi,useCallback:function(m,p){return ms().memoizedState=[m,p===void 0?null:p],m},useContext:Fi,useEffect:uw,useImperativeHandle:function(m,p,C){return C=C!=null?C.concat([m]):null,X0(4194308,4,Nu.bind(null,p,m),C)},useLayoutEffect:function(m,p){return X0(4194308,4,m,p)},useInsertionEffect:function(m,p){return X0(4,2,m,p)},useMemo:function(m,p){var C=ms();return p=p===void 0?null:p,m=m(),C.memoizedState=[m,p],m},useReducer:function(m,p,C){var D=ms();return p=C!==void 0?C(p):p,D.memoizedState=D.baseState=p,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:p},D.queue=m,m=m.dispatch=V3.bind(null,Xn,m),[D.memoizedState,m]},useRef:function(m){var p=ms();return m={current:m},p.memoizedState=m},useState:Eu,useDebugValue:$c,useDeferredValue:function(m){return ms().memoizedState=m},useTransition:function(){var m=Eu(!1),p=m[0];return m=hw.bind(null,m[1]),ms().memoizedState=m,[p,m]},useMutableSource:function(){},useSyncExternalStore:function(m,p,C){var D=Xn,G=ms();if(Vn){if(C===void 0)throw Error(r(407));C=C()}else{if(C=p(),mi===null)throw Error(r(349));(Di&30)!==0||cw(D,p,C)}G.memoizedState=C;var ee={value:C,getSnapshot:p};return G.queue=ee,uw(ox.bind(null,D,ee,m),[m]),D.flags|=2048,Y0(9,Bc.bind(null,D,ee,C,p),void 0,null),C},useId:function(){var m=ms(),p=mi.identifierPrefix;if(Vn){var C=bs,D=Co;C=(D&~(1<<32-_r(D)-1)).toString(32)+C,p=":"+p+"R"+C,C=Xo++,0<C&&(p+="H"+C.toString(32)),p+=":"}else C=Og++,p=":"+p+"r"+C.toString(32)+":";return m.memoizedState=p},unstable_isNewReconciler:!1},Au={readContext:Fi,useCallback:hx,useContext:Fi,useEffect:ux,useImperativeHandle:dw,useInsertionEffect:dx,useLayoutEffect:fx,useMemo:gs,useReducer:fi,useRef:cx,useState:function(){return fi(di)},useDebugValue:$c,useDeferredValue:function(m){var p=ba();return fw(p,Is.memoizedState,m)},useTransition:function(){var m=fi(di)[0],p=ba().memoizedState;return[m,p]},useMutableSource:Rg,useSyncExternalStore:Lg,useId:mw,unstable_isNewReconciler:!1},$g={readContext:Fi,useCallback:hx,useContext:Fi,useEffect:ux,useImperativeHandle:dw,useInsertionEffect:dx,useLayoutEffect:fx,useMemo:gs,useReducer:Ig,useRef:cx,useState:function(){return Ig(di)},useDebugValue:$c,useDeferredValue:function(m){var p=ba();return Is===null?p.memoizedState=m:fw(p,Is.memoizedState,m)},useTransition:function(){var m=Ig(di)[0],p=ba().memoizedState;return[m,p]},useMutableSource:Rg,useSyncExternalStore:Lg,useId:mw,unstable_isNewReconciler:!1};function Xa(m,p){if(m&&m.defaultProps){p=H({},p),m=m.defaultProps;for(var C in m)p[C]===void 0&&(p[C]=m[C]);return p}return p}function Q0(m,p,C,D){p=m.memoizedState,C=C(D,p),C=C==null?p:H({},p,C),m.memoizedState=C,m.lanes===0&&(m.updateQueue.baseState=C)}var Z0={isMounted:function(m){return(m=m._reactInternals)?Ee(m)===m:!1},enqueueSetState:function(m,p,C){m=m._reactInternals;var D=Mo(),G=sf(m),ee=Kl(D,G);ee.payload=p,C!=null&&(ee.callback=C),p=Yl(m,ee,G),p!==null&&(Wc(p,m,G,D),Dg(p,m,G))},enqueueReplaceState:function(m,p,C){m=m._reactInternals;var D=Mo(),G=sf(m),ee=Kl(D,G);ee.tag=1,ee.payload=p,C!=null&&(ee.callback=C),p=Yl(m,ee,G),p!==null&&(Wc(p,m,G,D),Dg(p,m,G))},enqueueForceUpdate:function(m,p){m=m._reactInternals;var C=Mo(),D=sf(m),G=Kl(C,D);G.tag=2,p!=null&&(G.callback=p),p=Yl(m,G,D),p!==null&&(Wc(p,m,D,C),Dg(p,m,D))}};function zg(m,p,C,D,G,ee,ge){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(D,ee,ge):p.prototype&&p.prototype.isPureReactComponent?!dd(C,D)||!dd(G,ee):!0}function xw(m,p,C){var D=!1,G=Hl,ee=p.contextType;return typeof ee=="object"&&ee!==null?ee=Fi(ee):(G=ci(p)?wu:Ya.current,D=p.contextTypes,ee=(D=D!=null)?wd(m,G):Hl),p=new p(C,ee),m.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Z0,m.stateNode=p,p._reactInternals=m,D&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=G,m.__reactInternalMemoizedMaskedChildContext=ee),p}function gx(m,p,C,D){m=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(C,D),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(C,D),p.state!==m&&Z0.enqueueReplaceState(p,p.state,null)}function Ug(m,p,C,D){var G=m.stateNode;G.props=C,G.state=m.memoizedState,G.refs={},kh(m);var ee=p.contextType;typeof ee=="object"&&ee!==null?G.context=Fi(ee):(ee=ci(p)?wu:Ya.current,G.context=wd(m,ee)),G.state=m.memoizedState,ee=p.getDerivedStateFromProps,typeof ee=="function"&&(Q0(m,p,ee,C),G.state=m.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof G.getSnapshotBeforeUpdate=="function"||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(p=G.state,typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount(),p!==G.state&&Z0.enqueueReplaceState(G,G.state,null),W0(m,C,G,D),G.state=m.memoizedState),typeof G.componentDidMount=="function"&&(m.flags|=4194308)}function Ad(m,p){try{var C="",D=p;do C+=Z(D),D=D.return;while(D);var G=C}catch(ee){G=`
Error generating stack: `+ee.message+`
`+ee.stack}return{value:m,source:p,stack:G,digest:null}}function Wg(m,p,C){return{value:m,source:null,stack:C??null,digest:p??null}}function ef(m,p){try{console.error(p.value)}catch(C){setTimeout(function(){throw C})}}var K3=typeof WeakMap=="function"?WeakMap:Map;function yw(m,p,C){C=Kl(-1,C),C.tag=3,C.payload={element:null};var D=p.value;return C.callback=function(){Sw||(Sw=!0,s5=D),ef(m,p)},C}function w(m,p,C){C=Kl(-1,C),C.tag=3;var D=m.type.getDerivedStateFromError;if(typeof D=="function"){var G=p.value;C.payload=function(){return D(G)},C.callback=function(){ef(m,p)}}var ee=m.stateNode;return ee!==null&&typeof ee.componentDidCatch=="function"&&(C.callback=function(){ef(m,p),typeof D!="function"&&(rf===null?rf=new Set([this]):rf.add(this));var ge=p.stack;this.componentDidCatch(p.value,{componentStack:ge!==null?ge:""})}),C}function _(m,p,C){var D=m.pingCache;if(D===null){D=m.pingCache=new K3;var G=new Set;D.set(p,G)}else G=D.get(p),G===void 0&&(G=new Set,D.set(p,G));G.has(C)||(G.add(C),m=aJ.bind(null,m,p,C),p.then(m,m))}function F(m){do{var p;if((p=m.tag===13)&&(p=m.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return m;m=m.return}while(m!==null);return null}function z(m,p,C,D,G){return(m.mode&1)===0?(m===p?m.flags|=65536:(m.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(p=Kl(-1,1),p.tag=2,Yl(C,p,1))),C.lanes|=1),m):(m.flags|=65536,m.lanes=G,m)}var Y=N.ReactCurrentOwner,se=!1;function Se(m,p,C,D){p.child=m===null?Yo(p,null,C,D):Cd(p,m.child,C,D)}function et(m,p,C,D,G){C=C.render;var ee=p.ref;return Rc(p,G),D=q0(m,p,C,D,ee,G),C=K0(),m!==null&&!se?(p.updateQueue=m.updateQueue,p.flags&=-2053,m.lanes&=~G,hi(m,p,G)):(Vn&&C&&B0(p),p.flags|=1,Se(m,p,D,G),p.child)}function St(m,p,C,D,G){if(m===null){var ee=C.type;return typeof ee=="function"&&!d5(ee)&&ee.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(p.tag=15,p.type=ee,sr(m,p,ee,D,G)):(m=Aw(C.type,null,D,p,p.mode,G),m.ref=p.ref,m.return=p,p.child=m)}if(ee=m.child,(m.lanes&G)===0){var ge=ee.memoizedProps;if(C=C.compare,C=C!==null?C:dd,C(ge,D)&&m.ref===p.ref)return hi(m,p,G)}return p.flags|=1,m=of(ee,D),m.ref=p.ref,m.return=p,p.child=m}function sr(m,p,C,D,G){if(m!==null){var ee=m.memoizedProps;if(dd(ee,D)&&m.ref===p.ref)if(se=!1,p.pendingProps=D=ee,(m.lanes&G)!==0)(m.flags&131072)!==0&&(se=!0);else return p.lanes=m.lanes,hi(m,p,G)}return xr(m,p,C,D,G)}function Nr(m,p,C){var D=p.pendingProps,G=D.children,ee=m!==null?m.memoizedState:null;if(D.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qn(Gg,_l),_l|=C;else{if((C&1073741824)===0)return m=ee!==null?ee.baseLanes|C:C,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:m,cachePool:null,transitions:null},p.updateQueue=null,Qn(Gg,_l),_l|=m,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},D=ee!==null?ee.baseLanes:C,Qn(Gg,_l),_l|=D}else ee!==null?(D=ee.baseLanes|C,p.memoizedState=null):D=C,Qn(Gg,_l),_l|=D;return Se(m,p,G,C),p.child}function an(m,p){var C=p.ref;(m===null&&C!==null||m!==null&&m.ref!==C)&&(p.flags|=512,p.flags|=2097152)}function xr(m,p,C,D,G){var ee=ci(C)?wu:Ya.current;return ee=wd(p,ee),Rc(p,G),C=q0(m,p,C,D,ee,G),D=K0(),m!==null&&!se?(p.updateQueue=m.updateQueue,p.flags&=-2053,m.lanes&=~G,hi(m,p,G)):(Vn&&D&&B0(p),p.flags|=1,Se(m,p,C,G),p.child)}function cs(m,p,C,D,G){if(ci(C)){var ee=!0;bd(p)}else ee=!1;if(Rc(p,G),p.stateNode===null)Tn(m,p),xw(p,C,D),Ug(p,C,D,G),D=!0;else if(m===null){var ge=p.stateNode,De=p.memoizedProps;ge.props=De;var We=ge.context,bt=C.contextType;typeof bt=="object"&&bt!==null?bt=Fi(bt):(bt=ci(C)?wu:Ya.current,bt=wd(p,bt));var Xt=C.getDerivedStateFromProps,er=typeof Xt=="function"||typeof ge.getSnapshotBeforeUpdate=="function";er||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(De!==D||We!==bt)&&gx(p,ge,D,bt),ql=!1;var Kt=p.memoizedState;ge.state=Kt,W0(p,D,ge,G),We=p.memoizedState,De!==D||Kt!==We||li.current||ql?(typeof Xt=="function"&&(Q0(p,C,Xt,D),We=p.memoizedState),(De=ql||zg(p,C,De,D,Kt,We,bt))?(er||typeof ge.UNSAFE_componentWillMount!="function"&&typeof ge.componentWillMount!="function"||(typeof ge.componentWillMount=="function"&&ge.componentWillMount(),typeof ge.UNSAFE_componentWillMount=="function"&&ge.UNSAFE_componentWillMount()),typeof ge.componentDidMount=="function"&&(p.flags|=4194308)):(typeof ge.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=D,p.memoizedState=We),ge.props=D,ge.state=We,ge.context=bt,D=De):(typeof ge.componentDidMount=="function"&&(p.flags|=4194308),D=!1)}else{ge=p.stateNode,Fg(m,p),De=p.memoizedProps,bt=p.type===p.elementType?De:Xa(p.type,De),ge.props=bt,er=p.pendingProps,Kt=ge.context,We=C.contextType,typeof We=="object"&&We!==null?We=Fi(We):(We=ci(C)?wu:Ya.current,We=wd(p,We));var Sr=C.getDerivedStateFromProps;(Xt=typeof Sr=="function"||typeof ge.getSnapshotBeforeUpdate=="function")||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(De!==er||Kt!==We)&&gx(p,ge,D,We),ql=!1,Kt=p.memoizedState,ge.state=Kt,W0(p,D,ge,G);var Mr=p.memoizedState;De!==er||Kt!==Mr||li.current||ql?(typeof Sr=="function"&&(Q0(p,C,Sr,D),Mr=p.memoizedState),(bt=ql||zg(p,C,bt,D,Kt,Mr,We)||!1)?(Xt||typeof ge.UNSAFE_componentWillUpdate!="function"&&typeof ge.componentWillUpdate!="function"||(typeof ge.componentWillUpdate=="function"&&ge.componentWillUpdate(D,Mr,We),typeof ge.UNSAFE_componentWillUpdate=="function"&&ge.UNSAFE_componentWillUpdate(D,Mr,We)),typeof ge.componentDidUpdate=="function"&&(p.flags|=4),typeof ge.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof ge.componentDidUpdate!="function"||De===m.memoizedProps&&Kt===m.memoizedState||(p.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||De===m.memoizedProps&&Kt===m.memoizedState||(p.flags|=1024),p.memoizedProps=D,p.memoizedState=Mr),ge.props=D,ge.state=Mr,ge.context=We,D=bt):(typeof ge.componentDidUpdate!="function"||De===m.memoizedProps&&Kt===m.memoizedState||(p.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||De===m.memoizedProps&&Kt===m.memoizedState||(p.flags|=1024),D=!1)}return qn(m,p,C,D,ee,G)}function qn(m,p,C,D,G,ee){an(m,p);var ge=(p.flags&128)!==0;if(!D&&!ge)return G&&iw(p,C,!1),hi(m,p,ee);D=p.stateNode,Y.current=p;var De=ge&&typeof C.getDerivedStateFromError!="function"?null:D.render();return p.flags|=1,m!==null&&ge?(p.child=Cd(p,m.child,null,ee),p.child=Cd(p,null,De,ee)):Se(m,p,De,ee),p.memoizedState=D.state,G&&iw(p,C,!0),p.child}function Oi(m){var p=m.stateNode;p.pendingContext?nx(m,p.pendingContext,p.pendingContext!==p.context):p.context&&nx(m,p.context,!1),Tu(m,p.containerInfo)}function Xl(m,p,C,D,G){return Td(),bh(G),p.flags|=256,Se(m,p,C,D),p.child}var vt={dehydrated:null,treeContext:null,retryLane:0};function at(m){return{baseLanes:m,cachePool:null,transitions:null}}function Et(m,p,C){var D=p.pendingProps,G=ls.current,ee=!1,ge=(p.flags&128)!==0,De;if((De=ge)||(De=m!==null&&m.memoizedState===null?!1:(G&2)!==0),De?(ee=!0,p.flags&=-129):(m===null||m.memoizedState!==null)&&(G|=1),Qn(ls,G&1),m===null)return $0(p),m=p.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?((p.mode&1)===0?p.lanes=1:m.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(ge=D.children,m=D.fallback,ee?(D=p.mode,ee=p.child,ge={mode:"hidden",children:ge},(D&1)===0&&ee!==null?(ee.childLanes=0,ee.pendingProps=ge):ee=jw(ge,D,0,null),m=Mh(m,D,C,null),ee.return=p,m.return=p,ee.sibling=m,p.child=ee,p.child.memoizedState=at(C),p.memoizedState=vt,m):yr(p,ge));if(G=m.memoizedState,G!==null&&(De=G.dehydrated,De!==null))return gn(m,p,ge,D,De,G,C);if(ee){ee=D.fallback,ge=p.mode,G=m.child,De=G.sibling;var We={mode:"hidden",children:D.children};return(ge&1)===0&&p.child!==G?(D=p.child,D.childLanes=0,D.pendingProps=We,p.deletions=null):(D=of(G,We),D.subtreeFlags=G.subtreeFlags&14680064),De!==null?ee=of(De,ee):(ee=Mh(ee,ge,C,null),ee.flags|=2),ee.return=p,D.return=p,D.sibling=ee,p.child=D,D=ee,ee=p.child,ge=m.child.memoizedState,ge=ge===null?at(C):{baseLanes:ge.baseLanes|C,cachePool:null,transitions:ge.transitions},ee.memoizedState=ge,ee.childLanes=m.childLanes&~C,p.memoizedState=vt,D}return ee=m.child,m=ee.sibling,D=of(ee,{mode:"visible",children:D.children}),(p.mode&1)===0&&(D.lanes=C),D.return=p,D.sibling=null,m!==null&&(C=p.deletions,C===null?(p.deletions=[m],p.flags|=16):C.push(m)),p.child=D,p.memoizedState=null,D}function yr(m,p){return p=jw({mode:"visible",children:p},m.mode,0,null),p.return=m,m.child=p}function Br(m,p,C,D){return D!==null&&bh(D),Cd(p,m.child,null,C),m=yr(p,p.pendingProps.children),m.flags|=2,p.memoizedState=null,m}function gn(m,p,C,D,G,ee,ge){if(C)return p.flags&256?(p.flags&=-257,D=Wg(Error(r(422))),Br(m,p,ge,D)):p.memoizedState!==null?(p.child=m.child,p.flags|=128,null):(ee=D.fallback,G=p.mode,D=jw({mode:"visible",children:D.children},G,0,null),ee=Mh(ee,G,ge,null),ee.flags|=2,D.return=p,ee.return=p,D.sibling=ee,p.child=D,(p.mode&1)!==0&&Cd(p,m.child,null,ge),p.child.memoizedState=at(ge),p.memoizedState=vt,ee);if((p.mode&1)===0)return Br(m,p,ge,null);if(G.data==="$!"){if(D=G.nextSibling&&G.nextSibling.dataset,D)var De=D.dgst;return D=De,ee=Error(r(419)),D=Wg(ee,D,void 0),Br(m,p,ge,D)}if(De=(ge&m.childLanes)!==0,se||De){if(D=mi,D!==null){switch(ge&-ge){case 4:G=2;break;case 16:G=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:G=32;break;case 536870912:G=268435456;break;default:G=0}G=(G&(D.suspendedLanes|ge))!==0?0:G,G!==0&&G!==ee.retryLane&&(ee.retryLane=G,jo(m,G),Wc(D,m,G,-1))}return u5(),D=Wg(Error(r(421))),Br(m,p,ge,D)}return G.data==="$?"?(p.flags|=128,p.child=m.child,p=iJ.bind(null,m),G._reactRetry=p,null):(m=ee.treeContext,pr=Ul(G.nextSibling),Eo=p,Vn=!0,No=null,m!==null&&(Pi[Mi++]=Co,Pi[Mi++]=bs,Pi[Mi++]=ku,Co=m.id,bs=m.overflow,ku=p),p=yr(p,D.children),p.flags|=4096,p)}function on(m,p,C){m.lanes|=p;var D=m.alternate;D!==null&&(D.lanes|=p),Mg(m.return,p,C)}function En(m,p,C,D,G){var ee=m.memoizedState;ee===null?m.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:D,tail:C,tailMode:G}:(ee.isBackwards=p,ee.rendering=null,ee.renderingStartTime=0,ee.last=D,ee.tail=C,ee.tailMode=G)}function _a(m,p,C){var D=p.pendingProps,G=D.revealOrder,ee=D.tail;if(Se(m,p,D.children,C),D=ls.current,(D&2)!==0)D=D&1|2,p.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=p.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&on(m,C,p);else if(m.tag===19)on(m,C,p);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===p)break e;for(;m.sibling===null;){if(m.return===null||m.return===p)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}D&=1}if(Qn(ls,D),(p.mode&1)===0)p.memoizedState=null;else switch(G){case"forwards":for(C=p.child,G=null;C!==null;)m=C.alternate,m!==null&&G0(m)===null&&(G=C),C=C.sibling;C=G,C===null?(G=p.child,p.child=null):(G=C.sibling,C.sibling=null),En(p,!1,G,C,ee);break;case"backwards":for(C=null,G=p.child,p.child=null;G!==null;){if(m=G.alternate,m!==null&&G0(m)===null){p.child=G;break}m=G.sibling,G.sibling=C,C=G,G=m}En(p,!0,C,null,ee);break;case"together":En(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Tn(m,p){(p.mode&1)===0&&m!==null&&(m.alternate=null,p.alternate=null,p.flags|=2)}function hi(m,p,C){if(m!==null&&(p.dependencies=m.dependencies),Nh|=p.lanes,(C&p.childLanes)===0)return null;if(m!==null&&p.child!==m.child)throw Error(r(153));if(p.child!==null){for(m=p.child,C=of(m,m.pendingProps),p.child=C,C.return=p;m.sibling!==null;)m=m.sibling,C=C.sibling=of(m,m.pendingProps),C.return=p;C.sibling=null}return p.child}function Y3(m,p,C){switch(p.tag){case 3:Oi(p),Td();break;case 5:H0(p);break;case 1:ci(p.type)&&bd(p);break;case 4:Tu(p,p.stateNode.containerInfo);break;case 10:var D=p.type._context,G=p.memoizedProps.value;Qn(_h,D._currentValue),D._currentValue=G;break;case 13:if(D=p.memoizedState,D!==null)return D.dehydrated!==null?(Qn(ls,ls.current&1),p.flags|=128,null):(C&p.child.childLanes)!==0?Et(m,p,C):(Qn(ls,ls.current&1),m=hi(m,p,C),m!==null?m.sibling:null);Qn(ls,ls.current&1);break;case 19:if(D=(C&p.childLanes)!==0,(m.flags&128)!==0){if(D)return _a(m,p,C);p.flags|=128}if(G=p.memoizedState,G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),Qn(ls,ls.current),D)break;return null;case 22:case 23:return p.lanes=0,Nr(m,p,C)}return hi(m,p,C)}var e9,X3,t9,r9;e9=function(m,p){for(var C=p.child;C!==null;){if(C.tag===5||C.tag===6)m.appendChild(C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===p)break;for(;C.sibling===null;){if(C.return===null||C.return===p)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},X3=function(){},t9=function(m,p,C,D){var G=m.memoizedProps;if(G!==D){m=p.stateNode,wa(Zn.current);var ee=null;switch(C){case"input":G=Ae(m,G),D=Ae(m,D),ee=[];break;case"select":G=H({},G,{value:void 0}),D=H({},D,{value:void 0}),ee=[];break;case"textarea":G=ut(m,G),D=ut(m,D),ee=[];break;default:typeof G.onClick!="function"&&typeof D.onClick=="function"&&(m.onclick=xd)}kr(C,D);var ge;C=null;for(bt in G)if(!D.hasOwnProperty(bt)&&G.hasOwnProperty(bt)&&G[bt]!=null)if(bt==="style"){var De=G[bt];for(ge in De)De.hasOwnProperty(ge)&&(C||(C={}),C[ge]="")}else bt!=="dangerouslySetInnerHTML"&&bt!=="children"&&bt!=="suppressContentEditableWarning"&&bt!=="suppressHydrationWarning"&&bt!=="autoFocus"&&(s.hasOwnProperty(bt)?ee||(ee=[]):(ee=ee||[]).push(bt,null));for(bt in D){var We=D[bt];if(De=G?.[bt],D.hasOwnProperty(bt)&&We!==De&&(We!=null||De!=null))if(bt==="style")if(De){for(ge in De)!De.hasOwnProperty(ge)||We&&We.hasOwnProperty(ge)||(C||(C={}),C[ge]="");for(ge in We)We.hasOwnProperty(ge)&&De[ge]!==We[ge]&&(C||(C={}),C[ge]=We[ge])}else C||(ee||(ee=[]),ee.push(bt,C)),C=We;else bt==="dangerouslySetInnerHTML"?(We=We?We.__html:void 0,De=De?De.__html:void 0,We!=null&&De!==We&&(ee=ee||[]).push(bt,We)):bt==="children"?typeof We!="string"&&typeof We!="number"||(ee=ee||[]).push(bt,""+We):bt!=="suppressContentEditableWarning"&&bt!=="suppressHydrationWarning"&&(s.hasOwnProperty(bt)?(We!=null&&bt==="onScroll"&&is("scroll",m),ee||De===We||(ee=[])):(ee=ee||[]).push(bt,We))}C&&(ee=ee||[]).push("style",C);var bt=ee;(p.updateQueue=bt)&&(p.flags|=4)}},r9=function(m,p,C,D){C!==D&&(p.flags|=4)};function px(m,p){if(!Vn)switch(m.tailMode){case"hidden":p=m.tail;for(var C=null;p!==null;)p.alternate!==null&&(C=p),p=p.sibling;C===null?m.tail=null:C.sibling=null;break;case"collapsed":C=m.tail;for(var D=null;C!==null;)C.alternate!==null&&(D=C),C=C.sibling;D===null?p||m.tail===null?m.tail=null:m.tail.sibling=null:D.sibling=null}}function no(m){var p=m.alternate!==null&&m.alternate.child===m.child,C=0,D=0;if(p)for(var G=m.child;G!==null;)C|=G.lanes|G.childLanes,D|=G.subtreeFlags&14680064,D|=G.flags&14680064,G.return=m,G=G.sibling;else for(G=m.child;G!==null;)C|=G.lanes|G.childLanes,D|=G.subtreeFlags,D|=G.flags,G.return=m,G=G.sibling;return m.subtreeFlags|=D,m.childLanes=C,p}function YX(m,p,C){var D=p.pendingProps;switch(Da(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return no(p),null;case 1:return ci(p.type)&&R0(),no(p),null;case 3:return D=p.stateNode,Ss(),os(li),os(Ya),ui(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),(m===null||m.child===null)&&(wh(p)?p.flags|=4:m===null||m.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,No!==null&&(o5(No),No=null))),X3(m,p),no(p),null;case 5:Lc(p);var G=wa(Ws.current);if(C=p.type,m!==null&&p.stateNode!=null)t9(m,p,C,D,G),m.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!D){if(p.stateNode===null)throw Error(r(166));return no(p),null}if(m=wa(Zn.current),wh(p)){D=p.stateNode,C=p.type;var ee=p.memoizedProps;switch(D[Ko]=p,D[xh]=ee,m=(p.mode&1)!==0,C){case"dialog":is("cancel",D),is("close",D);break;case"iframe":case"object":case"embed":is("load",D);break;case"video":case"audio":for(G=0;G<xu.length;G++)is(xu[G],D);break;case"source":is("error",D);break;case"img":case"image":case"link":is("error",D),is("load",D);break;case"details":is("toggle",D);break;case"input":Me(D,ee),is("invalid",D);break;case"select":D._wrapperState={wasMultiple:!!ee.multiple},is("invalid",D);break;case"textarea":_t(D,ee),is("invalid",D)}kr(C,ee),G=null;for(var ge in ee)if(ee.hasOwnProperty(ge)){var De=ee[ge];ge==="children"?typeof De=="string"?D.textContent!==De&&(ee.suppressHydrationWarning!==!0&&gh(D.textContent,De,m),G=["children",De]):typeof De=="number"&&D.textContent!==""+De&&(ee.suppressHydrationWarning!==!0&&gh(D.textContent,De,m),G=["children",""+De]):s.hasOwnProperty(ge)&&De!=null&&ge==="onScroll"&&is("scroll",D)}switch(C){case"input":Te(D),It(D,ee,!0);break;case"textarea":Te(D),Jt(D);break;case"select":case"option":break;default:typeof ee.onClick=="function"&&(D.onclick=xd)}D=G,p.updateQueue=D,D!==null&&(p.flags|=4)}else{ge=G.nodeType===9?G:G.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=Ht(C)),m==="http://www.w3.org/1999/xhtml"?C==="script"?(m=ge.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof D.is=="string"?m=ge.createElement(C,{is:D.is}):(m=ge.createElement(C),C==="select"&&(ge=m,D.multiple?ge.multiple=!0:D.size&&(ge.size=D.size))):m=ge.createElementNS(m,C),m[Ko]=p,m[xh]=D,e9(m,p,!1,!1),p.stateNode=m;e:{switch(ge=zr(C,D),C){case"dialog":is("cancel",m),is("close",m),G=D;break;case"iframe":case"object":case"embed":is("load",m),G=D;break;case"video":case"audio":for(G=0;G<xu.length;G++)is(xu[G],m);G=D;break;case"source":is("error",m),G=D;break;case"img":case"image":case"link":is("error",m),is("load",m),G=D;break;case"details":is("toggle",m),G=D;break;case"input":Me(m,D),G=Ae(m,D),is("invalid",m);break;case"option":G=D;break;case"select":m._wrapperState={wasMultiple:!!D.multiple},G=H({},D,{value:void 0}),is("invalid",m);break;case"textarea":_t(m,D),G=ut(m,D),is("invalid",m);break;default:G=D}kr(C,G),De=G;for(ee in De)if(De.hasOwnProperty(ee)){var We=De[ee];ee==="style"?Qt(m,We):ee==="dangerouslySetInnerHTML"?(We=We?We.__html:void 0,We!=null&&tt(m,We)):ee==="children"?typeof We=="string"?(C!=="textarea"||We!=="")&&ot(m,We):typeof We=="number"&&ot(m,""+We):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(s.hasOwnProperty(ee)?We!=null&&ee==="onScroll"&&is("scroll",m):We!=null&&b(m,ee,We,ge))}switch(C){case"input":Te(m),It(m,D,!1);break;case"textarea":Te(m),Jt(m);break;case"option":D.value!=null&&m.setAttribute("value",""+le(D.value));break;case"select":m.multiple=!!D.multiple,ee=D.value,ee!=null?pt(m,!!D.multiple,ee,!1):D.defaultValue!=null&&pt(m,!!D.multiple,D.defaultValue,!0);break;default:typeof G.onClick=="function"&&(m.onclick=xd)}switch(C){case"button":case"input":case"select":case"textarea":D=!!D.autoFocus;break e;case"img":D=!0;break e;default:D=!1}}D&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return no(p),null;case 6:if(m&&p.stateNode!=null)r9(m,p,m.memoizedProps,D);else{if(typeof D!="string"&&p.stateNode===null)throw Error(r(166));if(C=wa(Ws.current),wa(Zn.current),wh(p)){if(D=p.stateNode,C=p.memoizedProps,D[Ko]=p,(ee=D.nodeValue!==C)&&(m=Eo,m!==null))switch(m.tag){case 3:gh(D.nodeValue,C,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&gh(D.nodeValue,C,(m.mode&1)!==0)}ee&&(p.flags|=4)}else D=(C.nodeType===9?C:C.ownerDocument).createTextNode(D),D[Ko]=p,p.stateNode=D}return no(p),null;case 13:if(os(ls),D=p.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(Vn&&pr!==null&&(p.mode&1)!==0&&(p.flags&128)===0)ax(),Td(),p.flags|=98560,ee=!1;else if(ee=wh(p),D!==null&&D.dehydrated!==null){if(m===null){if(!ee)throw Error(r(318));if(ee=p.memoizedState,ee=ee!==null?ee.dehydrated:null,!ee)throw Error(r(317));ee[Ko]=p}else Td(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;no(p),ee=!1}else No!==null&&(o5(No),No=null),ee=!0;if(!ee)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=C,p):(D=D!==null,D!==(m!==null&&m.memoizedState!==null)&&D&&(p.child.flags|=8192,(p.mode&1)!==0&&(m===null||(ls.current&1)!==0?Ja===0&&(Ja=3):u5())),p.updateQueue!==null&&(p.flags|=4),no(p),null);case 4:return Ss(),X3(m,p),m===null&&gd(p.stateNode.containerInfo),no(p),null;case 10:return Pg(p.type._context),no(p),null;case 17:return ci(p.type)&&R0(),no(p),null;case 19:if(os(ls),ee=p.memoizedState,ee===null)return no(p),null;if(D=(p.flags&128)!==0,ge=ee.rendering,ge===null)if(D)px(ee,!1);else{if(Ja!==0||m!==null&&(m.flags&128)!==0)for(m=p.child;m!==null;){if(ge=G0(m),ge!==null){for(p.flags|=128,px(ee,!1),D=ge.updateQueue,D!==null&&(p.updateQueue=D,p.flags|=4),p.subtreeFlags=0,D=C,C=p.child;C!==null;)ee=C,m=D,ee.flags&=14680066,ge=ee.alternate,ge===null?(ee.childLanes=0,ee.lanes=m,ee.child=null,ee.subtreeFlags=0,ee.memoizedProps=null,ee.memoizedState=null,ee.updateQueue=null,ee.dependencies=null,ee.stateNode=null):(ee.childLanes=ge.childLanes,ee.lanes=ge.lanes,ee.child=ge.child,ee.subtreeFlags=0,ee.deletions=null,ee.memoizedProps=ge.memoizedProps,ee.memoizedState=ge.memoizedState,ee.updateQueue=ge.updateQueue,ee.type=ge.type,m=ge.dependencies,ee.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),C=C.sibling;return Qn(ls,ls.current&1|2),p.child}m=m.sibling}ee.tail!==null&&Tt()>Vg&&(p.flags|=128,D=!0,px(ee,!1),p.lanes=4194304)}else{if(!D)if(m=G0(ge),m!==null){if(p.flags|=128,D=!0,C=m.updateQueue,C!==null&&(p.updateQueue=C,p.flags|=4),px(ee,!0),ee.tail===null&&ee.tailMode==="hidden"&&!ge.alternate&&!Vn)return no(p),null}else 2*Tt()-ee.renderingStartTime>Vg&&C!==1073741824&&(p.flags|=128,D=!0,px(ee,!1),p.lanes=4194304);ee.isBackwards?(ge.sibling=p.child,p.child=ge):(C=ee.last,C!==null?C.sibling=ge:p.child=ge,ee.last=ge)}return ee.tail!==null?(p=ee.tail,ee.rendering=p,ee.tail=p.sibling,ee.renderingStartTime=Tt(),p.sibling=null,C=ls.current,Qn(ls,D?C&1|2:C&1),p):(no(p),null);case 22:case 23:return c5(),D=p.memoizedState!==null,m!==null&&m.memoizedState!==null!==D&&(p.flags|=8192),D&&(p.mode&1)!==0?(_l&1073741824)!==0&&(no(p),p.subtreeFlags&6&&(p.flags|=8192)):no(p),null;case 24:return null;case 25:return null}throw Error(r(156,p.tag))}function XX(m,p){switch(Da(p),p.tag){case 1:return ci(p.type)&&R0(),m=p.flags,m&65536?(p.flags=m&-65537|128,p):null;case 3:return Ss(),os(li),os(Ya),ui(),m=p.flags,(m&65536)!==0&&(m&128)===0?(p.flags=m&-65537|128,p):null;case 5:return Lc(p),null;case 13:if(os(ls),m=p.memoizedState,m!==null&&m.dehydrated!==null){if(p.alternate===null)throw Error(r(340));Td()}return m=p.flags,m&65536?(p.flags=m&-65537|128,p):null;case 19:return os(ls),null;case 4:return Ss(),null;case 10:return Pg(p.type._context),null;case 22:case 23:return c5(),null;case 24:return null;default:return null}}var vw=!1,so=!1,JX=typeof WeakSet=="function"?WeakSet:Set,Ar=null;function Hg(m,p){var C=m.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(D){ta(m,p,D)}else C.current=null}function J3(m,p,C){try{C()}catch(D){ta(m,p,D)}}var n9=!1;function QX(m,p){if(Z1=ng,m=ya(),F0(m)){if("selectionStart"in m)var C={start:m.selectionStart,end:m.selectionEnd};else e:{C=(C=m.ownerDocument)&&C.defaultView||window;var D=C.getSelection&&C.getSelection();if(D&&D.rangeCount!==0){C=D.anchorNode;var G=D.anchorOffset,ee=D.focusNode;D=D.focusOffset;try{C.nodeType,ee.nodeType}catch{C=null;break e}var ge=0,De=-1,We=-1,bt=0,Xt=0,er=m,Kt=null;t:for(;;){for(var Sr;er!==C||G!==0&&er.nodeType!==3||(De=ge+G),er!==ee||D!==0&&er.nodeType!==3||(We=ge+D),er.nodeType===3&&(ge+=er.nodeValue.length),(Sr=er.firstChild)!==null;)Kt=er,er=Sr;for(;;){if(er===m)break t;if(Kt===C&&++bt===G&&(De=ge),Kt===ee&&++Xt===D&&(We=ge),(Sr=er.nextSibling)!==null)break;er=Kt,Kt=er.parentNode}er=Sr}C=De===-1||We===-1?null:{start:De,end:We}}else C=null}C=C||{start:0,end:0}}else C=null;for(ex={focusedElem:m,selectionRange:C},ng=!1,Ar=p;Ar!==null;)if(p=Ar,m=p.child,(p.subtreeFlags&1028)!==0&&m!==null)m.return=p,Ar=m;else for(;Ar!==null;){p=Ar;try{var Mr=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(Mr!==null){var Fr=Mr.memoizedProps,Sa=Mr.memoizedState,dt=p.stateNode,Xe=dt.getSnapshotBeforeUpdate(p.elementType===p.type?Fr:Xa(p.type,Fr),Sa);dt.__reactInternalSnapshotBeforeUpdate=Xe}break;case 3:var mt=p.stateNode.containerInfo;mt.nodeType===1?mt.textContent="":mt.nodeType===9&&mt.documentElement&&mt.removeChild(mt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(lr){ta(p,p.return,lr)}if(m=p.sibling,m!==null){m.return=p.return,Ar=m;break}Ar=p.return}return Mr=n9,n9=!1,Mr}function xx(m,p,C){var D=p.updateQueue;if(D=D!==null?D.lastEffect:null,D!==null){var G=D=D.next;do{if((G.tag&m)===m){var ee=G.destroy;G.destroy=void 0,ee!==void 0&&J3(p,C,ee)}G=G.next}while(G!==D)}}function ww(m,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var C=p=p.next;do{if((C.tag&m)===m){var D=C.create;C.destroy=D()}C=C.next}while(C!==p)}}function Q3(m){var p=m.ref;if(p!==null){var C=m.stateNode;switch(m.tag){case 5:m=C;break;default:m=C}typeof p=="function"?p(m):p.current=m}}function s9(m){var p=m.alternate;p!==null&&(m.alternate=null,s9(p)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(p=m.stateNode,p!==null&&(delete p[Ko],delete p[xh],delete p[Sg],delete p[sw],delete p[aw])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function a9(m){return m.tag===5||m.tag===3||m.tag===4}function i9(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||a9(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function Z3(m,p,C){var D=m.tag;if(D===5||D===6)m=m.stateNode,p?C.nodeType===8?C.parentNode.insertBefore(m,p):C.insertBefore(m,p):(C.nodeType===8?(p=C.parentNode,p.insertBefore(m,C)):(p=C,p.appendChild(m)),C=C._reactRootContainer,C!=null||p.onclick!==null||(p.onclick=xd));else if(D!==4&&(m=m.child,m!==null))for(Z3(m,p,C),m=m.sibling;m!==null;)Z3(m,p,C),m=m.sibling}function e5(m,p,C){var D=m.tag;if(D===5||D===6)m=m.stateNode,p?C.insertBefore(m,p):C.appendChild(m);else if(D!==4&&(m=m.child,m!==null))for(e5(m,p,C),m=m.sibling;m!==null;)e5(m,p,C),m=m.sibling}var Ii=null,zc=!1;function tf(m,p,C){for(C=C.child;C!==null;)o9(m,p,C),C=C.sibling}function o9(m,p,C){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(un,C)}catch{}switch(C.tag){case 5:so||Hg(C,p);case 6:var D=Ii,G=zc;Ii=null,tf(m,p,C),Ii=D,zc=G,Ii!==null&&(zc?(m=Ii,C=C.stateNode,m.nodeType===8?m.parentNode.removeChild(C):m.removeChild(C)):Ii.removeChild(C.stateNode));break;case 18:Ii!==null&&(zc?(m=Ii,C=C.stateNode,m.nodeType===8?_g(m.parentNode,C):m.nodeType===1&&_g(m,C),Zi(m)):_g(Ii,C.stateNode));break;case 4:D=Ii,G=zc,Ii=C.stateNode.containerInfo,zc=!0,tf(m,p,C),Ii=D,zc=G;break;case 0:case 11:case 14:case 15:if(!so&&(D=C.updateQueue,D!==null&&(D=D.lastEffect,D!==null))){G=D=D.next;do{var ee=G,ge=ee.destroy;ee=ee.tag,ge!==void 0&&((ee&2)!==0||(ee&4)!==0)&&J3(C,p,ge),G=G.next}while(G!==D)}tf(m,p,C);break;case 1:if(!so&&(Hg(C,p),D=C.stateNode,typeof D.componentWillUnmount=="function"))try{D.props=C.memoizedProps,D.state=C.memoizedState,D.componentWillUnmount()}catch(De){ta(C,p,De)}tf(m,p,C);break;case 21:tf(m,p,C);break;case 22:C.mode&1?(so=(D=so)||C.memoizedState!==null,tf(m,p,C),so=D):tf(m,p,C);break;default:tf(m,p,C)}}function l9(m){var p=m.updateQueue;if(p!==null){m.updateQueue=null;var C=m.stateNode;C===null&&(C=m.stateNode=new JX),p.forEach(function(D){var G=oJ.bind(null,m,D);C.has(D)||(C.add(D),D.then(G,G))})}}function Uc(m,p){var C=p.deletions;if(C!==null)for(var D=0;D<C.length;D++){var G=C[D];try{var ee=m,ge=p,De=ge;e:for(;De!==null;){switch(De.tag){case 5:Ii=De.stateNode,zc=!1;break e;case 3:Ii=De.stateNode.containerInfo,zc=!0;break e;case 4:Ii=De.stateNode.containerInfo,zc=!0;break e}De=De.return}if(Ii===null)throw Error(r(160));o9(ee,ge,G),Ii=null,zc=!1;var We=G.alternate;We!==null&&(We.return=null),G.return=null}catch(bt){ta(G,p,bt)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)c9(p,m),p=p.sibling}function c9(m,p){var C=m.alternate,D=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(Uc(p,m),ju(m),D&4){try{xx(3,m,m.return),ww(3,m)}catch(Fr){ta(m,m.return,Fr)}try{xx(5,m,m.return)}catch(Fr){ta(m,m.return,Fr)}}break;case 1:Uc(p,m),ju(m),D&512&&C!==null&&Hg(C,C.return);break;case 5:if(Uc(p,m),ju(m),D&512&&C!==null&&Hg(C,C.return),m.flags&32){var G=m.stateNode;try{ot(G,"")}catch(Fr){ta(m,m.return,Fr)}}if(D&4&&(G=m.stateNode,G!=null)){var ee=m.memoizedProps,ge=C!==null?C.memoizedProps:ee,De=m.type,We=m.updateQueue;if(m.updateQueue=null,We!==null)try{De==="input"&&ee.type==="radio"&&ee.name!=null&&Je(G,ee),zr(De,ge);var bt=zr(De,ee);for(ge=0;ge<We.length;ge+=2){var Xt=We[ge],er=We[ge+1];Xt==="style"?Qt(G,er):Xt==="dangerouslySetInnerHTML"?tt(G,er):Xt==="children"?ot(G,er):b(G,Xt,er,bt)}switch(De){case"input":He(G,ee);break;case"textarea":qt(G,ee);break;case"select":var Kt=G._wrapperState.wasMultiple;G._wrapperState.wasMultiple=!!ee.multiple;var Sr=ee.value;Sr!=null?pt(G,!!ee.multiple,Sr,!1):Kt!==!!ee.multiple&&(ee.defaultValue!=null?pt(G,!!ee.multiple,ee.defaultValue,!0):pt(G,!!ee.multiple,ee.multiple?[]:"",!1))}G[xh]=ee}catch(Fr){ta(m,m.return,Fr)}}break;case 6:if(Uc(p,m),ju(m),D&4){if(m.stateNode===null)throw Error(r(162));G=m.stateNode,ee=m.memoizedProps;try{G.nodeValue=ee}catch(Fr){ta(m,m.return,Fr)}}break;case 3:if(Uc(p,m),ju(m),D&4&&C!==null&&C.memoizedState.isDehydrated)try{Zi(p.containerInfo)}catch(Fr){ta(m,m.return,Fr)}break;case 4:Uc(p,m),ju(m);break;case 13:Uc(p,m),ju(m),G=m.child,G.flags&8192&&(ee=G.memoizedState!==null,G.stateNode.isHidden=ee,!ee||G.alternate!==null&&G.alternate.memoizedState!==null||(n5=Tt())),D&4&&l9(m);break;case 22:if(Xt=C!==null&&C.memoizedState!==null,m.mode&1?(so=(bt=so)||Xt,Uc(p,m),so=bt):Uc(p,m),ju(m),D&8192){if(bt=m.memoizedState!==null,(m.stateNode.isHidden=bt)&&!Xt&&(m.mode&1)!==0)for(Ar=m,Xt=m.child;Xt!==null;){for(er=Ar=Xt;Ar!==null;){switch(Kt=Ar,Sr=Kt.child,Kt.tag){case 0:case 11:case 14:case 15:xx(4,Kt,Kt.return);break;case 1:Hg(Kt,Kt.return);var Mr=Kt.stateNode;if(typeof Mr.componentWillUnmount=="function"){D=Kt,C=Kt.return;try{p=D,Mr.props=p.memoizedProps,Mr.state=p.memoizedState,Mr.componentWillUnmount()}catch(Fr){ta(D,C,Fr)}}break;case 5:Hg(Kt,Kt.return);break;case 22:if(Kt.memoizedState!==null){f9(er);continue}}Sr!==null?(Sr.return=Kt,Ar=Sr):f9(er)}Xt=Xt.sibling}e:for(Xt=null,er=m;;){if(er.tag===5){if(Xt===null){Xt=er;try{G=er.stateNode,bt?(ee=G.style,typeof ee.setProperty=="function"?ee.setProperty("display","none","important"):ee.display="none"):(De=er.stateNode,We=er.memoizedProps.style,ge=We!=null&&We.hasOwnProperty("display")?We.display:null,De.style.display=Rt("display",ge))}catch(Fr){ta(m,m.return,Fr)}}}else if(er.tag===6){if(Xt===null)try{er.stateNode.nodeValue=bt?"":er.memoizedProps}catch(Fr){ta(m,m.return,Fr)}}else if((er.tag!==22&&er.tag!==23||er.memoizedState===null||er===m)&&er.child!==null){er.child.return=er,er=er.child;continue}if(er===m)break e;for(;er.sibling===null;){if(er.return===null||er.return===m)break e;Xt===er&&(Xt=null),er=er.return}Xt===er&&(Xt=null),er.sibling.return=er.return,er=er.sibling}}break;case 19:Uc(p,m),ju(m),D&4&&l9(m);break;case 21:break;default:Uc(p,m),ju(m)}}function ju(m){var p=m.flags;if(p&2){try{e:{for(var C=m.return;C!==null;){if(a9(C)){var D=C;break e}C=C.return}throw Error(r(160))}switch(D.tag){case 5:var G=D.stateNode;D.flags&32&&(ot(G,""),D.flags&=-33);var ee=i9(m);e5(m,ee,G);break;case 3:case 4:var ge=D.stateNode.containerInfo,De=i9(m);Z3(m,De,ge);break;default:throw Error(r(161))}}catch(We){ta(m,m.return,We)}m.flags&=-3}p&4096&&(m.flags&=-4097)}function ZX(m,p,C){Ar=m,u9(m)}function u9(m,p,C){for(var D=(m.mode&1)!==0;Ar!==null;){var G=Ar,ee=G.child;if(G.tag===22&&D){var ge=G.memoizedState!==null||vw;if(!ge){var De=G.alternate,We=De!==null&&De.memoizedState!==null||so;De=vw;var bt=so;if(vw=ge,(so=We)&&!bt)for(Ar=G;Ar!==null;)ge=Ar,We=ge.child,ge.tag===22&&ge.memoizedState!==null?h9(G):We!==null?(We.return=ge,Ar=We):h9(G);for(;ee!==null;)Ar=ee,u9(ee),ee=ee.sibling;Ar=G,vw=De,so=bt}d9(m)}else(G.subtreeFlags&8772)!==0&&ee!==null?(ee.return=G,Ar=ee):d9(m)}}function d9(m){for(;Ar!==null;){var p=Ar;if((p.flags&8772)!==0){var C=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:so||ww(5,p);break;case 1:var D=p.stateNode;if(p.flags&4&&!so)if(C===null)D.componentDidMount();else{var G=p.elementType===p.type?C.memoizedProps:Xa(p.type,C.memoizedProps);D.componentDidUpdate(G,C.memoizedState,D.__reactInternalSnapshotBeforeUpdate)}var ee=p.updateQueue;ee!==null&&Os(p,ee,D);break;case 3:var ge=p.updateQueue;if(ge!==null){if(C=null,p.child!==null)switch(p.child.tag){case 5:C=p.child.stateNode;break;case 1:C=p.child.stateNode}Os(p,ge,C)}break;case 5:var De=p.stateNode;if(C===null&&p.flags&4){C=De;var We=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":We.autoFocus&&C.focus();break;case"img":We.src&&(C.src=We.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var bt=p.alternate;if(bt!==null){var Xt=bt.memoizedState;if(Xt!==null){var er=Xt.dehydrated;er!==null&&Zi(er)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}so||p.flags&512&&Q3(p)}catch(Kt){ta(p,p.return,Kt)}}if(p===m){Ar=null;break}if(C=p.sibling,C!==null){C.return=p.return,Ar=C;break}Ar=p.return}}function f9(m){for(;Ar!==null;){var p=Ar;if(p===m){Ar=null;break}var C=p.sibling;if(C!==null){C.return=p.return,Ar=C;break}Ar=p.return}}function h9(m){for(;Ar!==null;){var p=Ar;try{switch(p.tag){case 0:case 11:case 15:var C=p.return;try{ww(4,p)}catch(We){ta(p,C,We)}break;case 1:var D=p.stateNode;if(typeof D.componentDidMount=="function"){var G=p.return;try{D.componentDidMount()}catch(We){ta(p,G,We)}}var ee=p.return;try{Q3(p)}catch(We){ta(p,ee,We)}break;case 5:var ge=p.return;try{Q3(p)}catch(We){ta(p,ge,We)}}}catch(We){ta(p,p.return,We)}if(p===m){Ar=null;break}var De=p.sibling;if(De!==null){De.return=p.return,Ar=De;break}Ar=p.return}}var eJ=Math.ceil,bw=N.ReactCurrentDispatcher,t5=N.ReactCurrentOwner,Jl=N.ReactCurrentBatchConfig,Dn=0,mi=null,Oa=null,Ri=0,_l=0,Gg=Oc(0),Ja=0,yx=null,Nh=0,_w=0,r5=0,vx=null,Jo=null,n5=0,Vg=1/0,jd=null,Sw=!1,s5=null,rf=null,kw=!1,nf=null,Tw=0,wx=0,a5=null,Cw=-1,Ew=0;function Mo(){return(Dn&6)!==0?Tt():Cw!==-1?Cw:Cw=Tt()}function sf(m){return(m.mode&1)===0?1:(Dn&2)!==0&&Ri!==0?Ri&-Ri:ix.transition!==null?(Ew===0&&(Ew=fs()),Ew):(m=Bt,m!==0||(m=window.event,m=m===void 0?16:z2(m.type)),m)}function Wc(m,p,C,D){if(50<wx)throw wx=0,a5=null,Error(r(185));Be(m,C,D),((Dn&2)===0||m!==mi)&&(m===mi&&((Dn&2)===0&&(_w|=C),Ja===4&&af(m,Ri)),Qo(m,D),C===1&&Dn===0&&(p.mode&1)===0&&(Vg=Tt()+500,L0&&bu()))}function Qo(m,p){var C=m.callbackNode;Ur(m,p);var D=_e(m,m===mi?Ri:0);if(D===0)C!==null&&Pe(C),m.callbackNode=null,m.callbackPriority=0;else if(p=D&-D,m.callbackPriority!==p){if(C!=null&&Pe(C),p===1)m.tag===0?Ic(g9.bind(null,m)):vh(g9.bind(null,m)),rw(function(){(Dn&6)===0&&bu()}),C=null;else{switch(Ln(D)){case 1:C=Ct;break;case 4:C=or;break;case 16:C=Or;break;case 536870912:C=Pr;break;default:C=Or}C=S9(C,m9.bind(null,m))}m.callbackPriority=p,m.callbackNode=C}}function m9(m,p){if(Cw=-1,Ew=0,(Dn&6)!==0)throw Error(r(327));var C=m.callbackNode;if(qg()&&m.callbackNode!==C)return null;var D=_e(m,m===mi?Ri:0);if(D===0)return null;if((D&30)!==0||(D&m.expiredLanes)!==0||p)p=Nw(m,D);else{p=D;var G=Dn;Dn|=2;var ee=x9();(mi!==m||Ri!==p)&&(jd=null,Vg=Tt()+500,jh(m,p));do try{nJ();break}catch(De){p9(m,De)}while(!0);jg(),bw.current=ee,Dn=G,Oa!==null?p=0:(mi=null,Ri=0,p=Ja)}if(p!==0){if(p===2&&(G=Yr(m),G!==0&&(D=G,p=i5(m,G))),p===1)throw C=yx,jh(m,0),af(m,D),Qo(m,Tt()),C;if(p===6)af(m,D);else{if(G=m.current.alternate,(D&30)===0&&!tJ(G)&&(p=Nw(m,D),p===2&&(ee=Yr(m),ee!==0&&(D=ee,p=i5(m,ee))),p===1))throw C=yx,jh(m,0),af(m,D),Qo(m,Tt()),C;switch(m.finishedWork=G,m.finishedLanes=D,p){case 0:case 1:throw Error(r(345));case 2:Ph(m,Jo,jd);break;case 3:if(af(m,D),(D&130023424)===D&&(p=n5+500-Tt(),10<p)){if(_e(m,0)!==0)break;if(G=m.suspendedLanes,(G&D)!==D){Mo(),m.pingedLanes|=m.suspendedLanes&G;break}m.timeoutHandle=To(Ph.bind(null,m,Jo,jd),p);break}Ph(m,Jo,jd);break;case 4:if(af(m,D),(D&4194240)===D)break;for(p=m.eventTimes,G=-1;0<D;){var ge=31-_r(D);ee=1<<ge,ge=p[ge],ge>G&&(G=ge),D&=~ee}if(D=G,D=Tt()-D,D=(120>D?120:480>D?480:1080>D?1080:1920>D?1920:3e3>D?3e3:4320>D?4320:1960*eJ(D/1960))-D,10<D){m.timeoutHandle=To(Ph.bind(null,m,Jo,jd),D);break}Ph(m,Jo,jd);break;case 5:Ph(m,Jo,jd);break;default:throw Error(r(329))}}}return Qo(m,Tt()),m.callbackNode===C?m9.bind(null,m):null}function i5(m,p){var C=vx;return m.current.memoizedState.isDehydrated&&(jh(m,p).flags|=256),m=Nw(m,p),m!==2&&(p=Jo,Jo=C,p!==null&&o5(p)),m}function o5(m){Jo===null?Jo=m:Jo.push.apply(Jo,m)}function tJ(m){for(var p=m;;){if(p.flags&16384){var C=p.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var D=0;D<C.length;D++){var G=C[D],ee=G.getSnapshot;G=G.value;try{if(!to(ee(),G))return!1}catch{return!1}}}if(C=p.child,p.subtreeFlags&16384&&C!==null)C.return=p,p=C;else{if(p===m)break;for(;p.sibling===null;){if(p.return===null||p.return===m)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function af(m,p){for(p&=~r5,p&=~_w,m.suspendedLanes|=p,m.pingedLanes&=~p,m=m.expirationTimes;0<p;){var C=31-_r(p),D=1<<C;m[C]=-1,p&=~D}}function g9(m){if((Dn&6)!==0)throw Error(r(327));qg();var p=_e(m,0);if((p&1)===0)return Qo(m,Tt()),null;var C=Nw(m,p);if(m.tag!==0&&C===2){var D=Yr(m);D!==0&&(p=D,C=i5(m,D))}if(C===1)throw C=yx,jh(m,0),af(m,p),Qo(m,Tt()),C;if(C===6)throw Error(r(345));return m.finishedWork=m.current.alternate,m.finishedLanes=p,Ph(m,Jo,jd),Qo(m,Tt()),null}function l5(m,p){var C=Dn;Dn|=1;try{return m(p)}finally{Dn=C,Dn===0&&(Vg=Tt()+500,L0&&bu())}}function Ah(m){nf!==null&&nf.tag===0&&(Dn&6)===0&&qg();var p=Dn;Dn|=1;var C=Jl.transition,D=Bt;try{if(Jl.transition=null,Bt=1,m)return m()}finally{Bt=D,Jl.transition=C,Dn=p,(Dn&6)===0&&bu()}}function c5(){_l=Gg.current,os(Gg)}function jh(m,p){m.finishedWork=null,m.finishedLanes=0;var C=m.timeoutHandle;if(C!==-1&&(m.timeoutHandle=-1,rx(C)),Oa!==null)for(C=Oa.return;C!==null;){var D=C;switch(Da(D),D.tag){case 1:D=D.type.childContextTypes,D!=null&&R0();break;case 3:Ss(),os(li),os(Ya),ui();break;case 5:Lc(D);break;case 4:Ss();break;case 13:os(ls);break;case 19:os(ls);break;case 10:Pg(D.type._context);break;case 22:case 23:c5()}C=C.return}if(mi=m,Oa=m=of(m.current,null),Ri=_l=p,Ja=0,yx=null,r5=_w=Nh=0,Jo=vx=null,Vl!==null){for(p=0;p<Vl.length;p++)if(C=Vl[p],D=C.interleaved,D!==null){C.interleaved=null;var G=D.next,ee=C.pending;if(ee!==null){var ge=ee.next;ee.next=G,D.next=ge}C.pending=D}Vl=null}return m}function p9(m,p){do{var C=Oa;try{if(jg(),V0.current=J0,bl){for(var D=Xn.memoizedState;D!==null;){var G=D.queue;G!==null&&(G.pending=null),D=D.next}bl=!1}if(Di=0,Zs=Is=Xn=null,Cu=!1,Xo=0,t5.current=null,C===null||C.return===null){Ja=1,yx=p,Oa=null;break}e:{var ee=m,ge=C.return,De=C,We=p;if(p=Ri,De.flags|=32768,We!==null&&typeof We=="object"&&typeof We.then=="function"){var bt=We,Xt=De,er=Xt.tag;if((Xt.mode&1)===0&&(er===0||er===11||er===15)){var Kt=Xt.alternate;Kt?(Xt.updateQueue=Kt.updateQueue,Xt.memoizedState=Kt.memoizedState,Xt.lanes=Kt.lanes):(Xt.updateQueue=null,Xt.memoizedState=null)}var Sr=F(ge);if(Sr!==null){Sr.flags&=-257,z(Sr,ge,De,ee,p),Sr.mode&1&&_(ee,bt,p),p=Sr,We=bt;var Mr=p.updateQueue;if(Mr===null){var Fr=new Set;Fr.add(We),p.updateQueue=Fr}else Mr.add(We);break e}else{if((p&1)===0){_(ee,bt,p),u5();break e}We=Error(r(426))}}else if(Vn&&De.mode&1){var Sa=F(ge);if(Sa!==null){(Sa.flags&65536)===0&&(Sa.flags|=256),z(Sa,ge,De,ee,p),bh(Ad(We,De));break e}}ee=We=Ad(We,De),Ja!==4&&(Ja=2),vx===null?vx=[ee]:vx.push(ee),ee=ge;do{switch(ee.tag){case 3:ee.flags|=65536,p&=-p,ee.lanes|=p;var dt=yw(ee,We,p);Th(ee,dt);break e;case 1:De=We;var Xe=ee.type,mt=ee.stateNode;if((ee.flags&128)===0&&(typeof Xe.getDerivedStateFromError=="function"||mt!==null&&typeof mt.componentDidCatch=="function"&&(rf===null||!rf.has(mt)))){ee.flags|=65536,p&=-p,ee.lanes|=p;var lr=w(ee,De,p);Th(ee,lr);break e}}ee=ee.return}while(ee!==null)}v9(C)}catch(Ir){p=Ir,Oa===C&&C!==null&&(Oa=C=C.return);continue}break}while(!0)}function x9(){var m=bw.current;return bw.current=J0,m===null?J0:m}function u5(){(Ja===0||Ja===3||Ja===2)&&(Ja=4),mi===null||(Nh&268435455)===0&&(_w&268435455)===0||af(mi,Ri)}function Nw(m,p){var C=Dn;Dn|=2;var D=x9();(mi!==m||Ri!==p)&&(jd=null,jh(m,p));do try{rJ();break}catch(G){p9(m,G)}while(!0);if(jg(),Dn=C,bw.current=D,Oa!==null)throw Error(r(261));return mi=null,Ri=0,Ja}function rJ(){for(;Oa!==null;)y9(Oa)}function nJ(){for(;Oa!==null&&!Ze();)y9(Oa)}function y9(m){var p=_9(m.alternate,m,_l);m.memoizedProps=m.pendingProps,p===null?v9(m):Oa=p,t5.current=null}function v9(m){var p=m;do{var C=p.alternate;if(m=p.return,(p.flags&32768)===0){if(C=YX(C,p,_l),C!==null){Oa=C;return}}else{if(C=XX(C,p),C!==null){C.flags&=32767,Oa=C;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{Ja=6,Oa=null;return}}if(p=p.sibling,p!==null){Oa=p;return}Oa=p=m}while(p!==null);Ja===0&&(Ja=5)}function Ph(m,p,C){var D=Bt,G=Jl.transition;try{Jl.transition=null,Bt=1,sJ(m,p,C,D)}finally{Jl.transition=G,Bt=D}return null}function sJ(m,p,C,D){do qg();while(nf!==null);if((Dn&6)!==0)throw Error(r(327));C=m.finishedWork;var G=m.finishedLanes;if(C===null)return null;if(m.finishedWork=null,m.finishedLanes=0,C===m.current)throw Error(r(177));m.callbackNode=null,m.callbackPriority=0;var ee=C.lanes|C.childLanes;if(wt(m,ee),m===mi&&(Oa=mi=null,Ri=0),(C.subtreeFlags&2064)===0&&(C.flags&2064)===0||kw||(kw=!0,S9(Or,function(){return qg(),null})),ee=(C.flags&15990)!==0,(C.subtreeFlags&15990)!==0||ee){ee=Jl.transition,Jl.transition=null;var ge=Bt;Bt=1;var De=Dn;Dn|=4,t5.current=null,QX(m,C),c9(C,m),dh(ex),ng=!!Z1,ex=Z1=null,m.current=C,ZX(C),gt(),Dn=De,Bt=ge,Jl.transition=ee}else m.current=C;if(kw&&(kw=!1,nf=m,Tw=G),ee=m.pendingLanes,ee===0&&(rf=null),mn(C.stateNode),Qo(m,Tt()),p!==null)for(D=m.onRecoverableError,C=0;C<p.length;C++)G=p[C],D(G.value,{componentStack:G.stack,digest:G.digest});if(Sw)throw Sw=!1,m=s5,s5=null,m;return(Tw&1)!==0&&m.tag!==0&&qg(),ee=m.pendingLanes,(ee&1)!==0?m===a5?wx++:(wx=0,a5=m):wx=0,bu(),null}function qg(){if(nf!==null){var m=Ln(Tw),p=Jl.transition,C=Bt;try{if(Jl.transition=null,Bt=16>m?16:m,nf===null)var D=!1;else{if(m=nf,nf=null,Tw=0,(Dn&6)!==0)throw Error(r(331));var G=Dn;for(Dn|=4,Ar=m.current;Ar!==null;){var ee=Ar,ge=ee.child;if((Ar.flags&16)!==0){var De=ee.deletions;if(De!==null){for(var We=0;We<De.length;We++){var bt=De[We];for(Ar=bt;Ar!==null;){var Xt=Ar;switch(Xt.tag){case 0:case 11:case 15:xx(8,Xt,ee)}var er=Xt.child;if(er!==null)er.return=Xt,Ar=er;else for(;Ar!==null;){Xt=Ar;var Kt=Xt.sibling,Sr=Xt.return;if(s9(Xt),Xt===bt){Ar=null;break}if(Kt!==null){Kt.return=Sr,Ar=Kt;break}Ar=Sr}}}var Mr=ee.alternate;if(Mr!==null){var Fr=Mr.child;if(Fr!==null){Mr.child=null;do{var Sa=Fr.sibling;Fr.sibling=null,Fr=Sa}while(Fr!==null)}}Ar=ee}}if((ee.subtreeFlags&2064)!==0&&ge!==null)ge.return=ee,Ar=ge;else e:for(;Ar!==null;){if(ee=Ar,(ee.flags&2048)!==0)switch(ee.tag){case 0:case 11:case 15:xx(9,ee,ee.return)}var dt=ee.sibling;if(dt!==null){dt.return=ee.return,Ar=dt;break e}Ar=ee.return}}var Xe=m.current;for(Ar=Xe;Ar!==null;){ge=Ar;var mt=ge.child;if((ge.subtreeFlags&2064)!==0&&mt!==null)mt.return=ge,Ar=mt;else e:for(ge=Xe;Ar!==null;){if(De=Ar,(De.flags&2048)!==0)try{switch(De.tag){case 0:case 11:case 15:ww(9,De)}}catch(Ir){ta(De,De.return,Ir)}if(De===ge){Ar=null;break e}var lr=De.sibling;if(lr!==null){lr.return=De.return,Ar=lr;break e}Ar=De.return}}if(Dn=G,bu(),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(un,m)}catch{}D=!0}return D}finally{Bt=C,Jl.transition=p}}return!1}function w9(m,p,C){p=Ad(C,p),p=yw(m,p,1),m=Yl(m,p,1),p=Mo(),m!==null&&(Be(m,1,p),Qo(m,p))}function ta(m,p,C){if(m.tag===3)w9(m,m,C);else for(;p!==null;){if(p.tag===3){w9(p,m,C);break}else if(p.tag===1){var D=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof D.componentDidCatch=="function"&&(rf===null||!rf.has(D))){m=Ad(C,m),m=w(p,m,1),p=Yl(p,m,1),m=Mo(),p!==null&&(Be(p,1,m),Qo(p,m));break}}p=p.return}}function aJ(m,p,C){var D=m.pingCache;D!==null&&D.delete(p),p=Mo(),m.pingedLanes|=m.suspendedLanes&C,mi===m&&(Ri&C)===C&&(Ja===4||Ja===3&&(Ri&130023424)===Ri&&500>Tt()-n5?jh(m,0):r5|=C),Qo(m,p)}function b9(m,p){p===0&&((m.mode&1)===0?p=1:(p=pa,pa<<=1,(pa&130023424)===0&&(pa=4194304)));var C=Mo();m=jo(m,p),m!==null&&(Be(m,p,C),Qo(m,C))}function iJ(m){var p=m.memoizedState,C=0;p!==null&&(C=p.retryLane),b9(m,C)}function oJ(m,p){var C=0;switch(m.tag){case 13:var D=m.stateNode,G=m.memoizedState;G!==null&&(C=G.retryLane);break;case 19:D=m.stateNode;break;default:throw Error(r(314))}D!==null&&D.delete(p),b9(m,C)}var _9;_9=function(m,p,C){if(m!==null)if(m.memoizedProps!==p.pendingProps||li.current)se=!0;else{if((m.lanes&C)===0&&(p.flags&128)===0)return se=!1,Y3(m,p,C);se=(m.flags&131072)!==0}else se=!1,Vn&&(p.flags&1048576)!==0&&ow(p,Su,p.index);switch(p.lanes=0,p.tag){case 2:var D=p.type;Tn(m,p),m=p.pendingProps;var G=wd(p,Ya.current);Rc(p,C),G=q0(null,p,D,m,G,C);var ee=K0();return p.flags|=1,typeof G=="object"&&G!==null&&typeof G.render=="function"&&G.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,ci(D)?(ee=!0,bd(p)):ee=!1,p.memoizedState=G.state!==null&&G.state!==void 0?G.state:null,kh(p),G.updater=Z0,p.stateNode=G,G._reactInternals=p,Ug(p,D,m,C),p=qn(null,p,D,!0,ee,C)):(p.tag=0,Vn&&ee&&B0(p),Se(null,p,G,C),p=p.child),p;case 16:D=p.elementType;e:{switch(Tn(m,p),m=p.pendingProps,G=D._init,D=G(D._payload),p.type=D,G=p.tag=cJ(D),m=Xa(D,m),G){case 0:p=xr(null,p,D,m,C);break e;case 1:p=cs(null,p,D,m,C);break e;case 11:p=et(null,p,D,m,C);break e;case 14:p=St(null,p,D,Xa(D.type,m),C);break e}throw Error(r(306,D,""))}return p;case 0:return D=p.type,G=p.pendingProps,G=p.elementType===D?G:Xa(D,G),xr(m,p,D,G,C);case 1:return D=p.type,G=p.pendingProps,G=p.elementType===D?G:Xa(D,G),cs(m,p,D,G,C);case 3:e:{if(Oi(p),m===null)throw Error(r(387));D=p.pendingProps,ee=p.memoizedState,G=ee.element,Fg(m,p),W0(p,D,null,C);var ge=p.memoizedState;if(D=ge.element,ee.isDehydrated)if(ee={element:D,isDehydrated:!1,cache:ge.cache,pendingSuspenseBoundaries:ge.pendingSuspenseBoundaries,transitions:ge.transitions},p.updateQueue.baseState=ee,p.memoizedState=ee,p.flags&256){G=Ad(Error(r(423)),p),p=Xl(m,p,D,C,G);break e}else if(D!==G){G=Ad(Error(r(424)),p),p=Xl(m,p,D,C,G);break e}else for(pr=Ul(p.stateNode.containerInfo.firstChild),Eo=p,Vn=!0,No=null,C=Yo(p,null,D,C),p.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(Td(),D===G){p=hi(m,p,C);break e}Se(m,p,D,C)}p=p.child}return p;case 5:return H0(p),m===null&&$0(p),D=p.type,G=p.pendingProps,ee=m!==null?m.memoizedProps:null,ge=G.children,tx(D,G)?ge=null:ee!==null&&tx(D,ee)&&(p.flags|=32),an(m,p),Se(m,p,ge,C),p.child;case 6:return m===null&&$0(p),null;case 13:return Et(m,p,C);case 4:return Tu(p,p.stateNode.containerInfo),D=p.pendingProps,m===null?p.child=Cd(p,null,D,C):Se(m,p,D,C),p.child;case 11:return D=p.type,G=p.pendingProps,G=p.elementType===D?G:Xa(D,G),et(m,p,D,G,C);case 7:return Se(m,p,p.pendingProps,C),p.child;case 8:return Se(m,p,p.pendingProps.children,C),p.child;case 12:return Se(m,p,p.pendingProps.children,C),p.child;case 10:e:{if(D=p.type._context,G=p.pendingProps,ee=p.memoizedProps,ge=G.value,Qn(_h,D._currentValue),D._currentValue=ge,ee!==null)if(to(ee.value,ge)){if(ee.children===G.children&&!li.current){p=hi(m,p,C);break e}}else for(ee=p.child,ee!==null&&(ee.return=p);ee!==null;){var De=ee.dependencies;if(De!==null){ge=ee.child;for(var We=De.firstContext;We!==null;){if(We.context===D){if(ee.tag===1){We=Kl(-1,C&-C),We.tag=2;var bt=ee.updateQueue;if(bt!==null){bt=bt.shared;var Xt=bt.pending;Xt===null?We.next=We:(We.next=Xt.next,Xt.next=We),bt.pending=We}}ee.lanes|=C,We=ee.alternate,We!==null&&(We.lanes|=C),Mg(ee.return,C,p),De.lanes|=C;break}We=We.next}}else if(ee.tag===10)ge=ee.type===p.type?null:ee.child;else if(ee.tag===18){if(ge=ee.return,ge===null)throw Error(r(341));ge.lanes|=C,De=ge.alternate,De!==null&&(De.lanes|=C),Mg(ge,C,p),ge=ee.sibling}else ge=ee.child;if(ge!==null)ge.return=ee;else for(ge=ee;ge!==null;){if(ge===p){ge=null;break}if(ee=ge.sibling,ee!==null){ee.return=ge.return,ge=ee;break}ge=ge.return}ee=ge}Se(m,p,G.children,C),p=p.child}return p;case 9:return G=p.type,D=p.pendingProps.children,Rc(p,C),G=Fi(G),D=D(G),p.flags|=1,Se(m,p,D,C),p.child;case 14:return D=p.type,G=Xa(D,p.pendingProps),G=Xa(D.type,G),St(m,p,D,G,C);case 15:return sr(m,p,p.type,p.pendingProps,C);case 17:return D=p.type,G=p.pendingProps,G=p.elementType===D?G:Xa(D,G),Tn(m,p),p.tag=1,ci(D)?(m=!0,bd(p)):m=!1,Rc(p,C),xw(p,D,G),Ug(p,D,G,C),qn(null,p,D,!0,m,C);case 19:return _a(m,p,C);case 22:return Nr(m,p,C)}throw Error(r(156,p.tag))};function S9(m,p){return je(m,p)}function lJ(m,p,C,D){this.tag=m,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=D,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ql(m,p,C,D){return new lJ(m,p,C,D)}function d5(m){return m=m.prototype,!(!m||!m.isReactComponent)}function cJ(m){if(typeof m=="function")return d5(m)?1:0;if(m!=null){if(m=m.$$typeof,m===q)return 11;if(m===te)return 14}return 2}function of(m,p){var C=m.alternate;return C===null?(C=Ql(m.tag,p,m.key,m.mode),C.elementType=m.elementType,C.type=m.type,C.stateNode=m.stateNode,C.alternate=m,m.alternate=C):(C.pendingProps=p,C.type=m.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=m.flags&14680064,C.childLanes=m.childLanes,C.lanes=m.lanes,C.child=m.child,C.memoizedProps=m.memoizedProps,C.memoizedState=m.memoizedState,C.updateQueue=m.updateQueue,p=m.dependencies,C.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},C.sibling=m.sibling,C.index=m.index,C.ref=m.ref,C}function Aw(m,p,C,D,G,ee){var ge=2;if(D=m,typeof m=="function")d5(m)&&(ge=1);else if(typeof m=="string")ge=5;else e:switch(m){case M:return Mh(C.children,G,ee,p);case j:ge=8,G|=8;break;case A:return m=Ql(12,C,p,G|2),m.elementType=A,m.lanes=ee,m;case Q:return m=Ql(13,C,p,G),m.elementType=Q,m.lanes=ee,m;case ae:return m=Ql(19,C,p,G),m.elementType=ae,m.lanes=ee,m;case B:return jw(C,G,ee,p);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case O:ge=10;break e;case L:ge=9;break e;case q:ge=11;break e;case te:ge=14;break e;case ne:ge=16,D=null;break e}throw Error(r(130,m==null?m:typeof m,""))}return p=Ql(ge,C,p,G),p.elementType=m,p.type=D,p.lanes=ee,p}function Mh(m,p,C,D){return m=Ql(7,m,D,p),m.lanes=C,m}function jw(m,p,C,D){return m=Ql(22,m,D,p),m.elementType=B,m.lanes=C,m.stateNode={isHidden:!1},m}function f5(m,p,C){return m=Ql(6,m,null,p),m.lanes=C,m}function h5(m,p,C){return p=Ql(4,m.children!==null?m.children:[],m.key,p),p.lanes=C,p.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},p}function uJ(m,p,C,D,G){this.tag=p,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jn(0),this.expirationTimes=jn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jn(0),this.identifierPrefix=D,this.onRecoverableError=G,this.mutableSourceEagerHydrationData=null}function m5(m,p,C,D,G,ee,ge,De,We){return m=new uJ(m,p,C,De,We),p===1?(p=1,ee===!0&&(p|=8)):p=0,ee=Ql(3,null,null,p),m.current=ee,ee.stateNode=m,ee.memoizedState={element:D,isDehydrated:C,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(ee),m}function dJ(m,p,C){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:D==null?null:""+D,children:m,containerInfo:p,implementation:C}}function k9(m){if(!m)return Hl;m=m._reactInternals;e:{if(Ee(m)!==m||m.tag!==1)throw Error(r(170));var p=m;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(ci(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(r(171))}if(m.tag===1){var C=m.type;if(ci(C))return Tg(m,C,p)}return p}function T9(m,p,C,D,G,ee,ge,De,We){return m=m5(C,D,!0,m,G,ee,ge,De,We),m.context=k9(null),C=m.current,D=Mo(),G=sf(C),ee=Kl(D,G),ee.callback=p??null,Yl(C,ee,G),m.current.lanes=G,Be(m,G,D),Qo(m,D),m}function Pw(m,p,C,D){var G=p.current,ee=Mo(),ge=sf(G);return C=k9(C),p.context===null?p.context=C:p.pendingContext=C,p=Kl(ee,ge),p.payload={element:m},D=D===void 0?null:D,D!==null&&(p.callback=D),m=Yl(G,p,ge),m!==null&&(Wc(m,G,ge,ee),Dg(m,G,ge)),ge}function Mw(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function C9(m,p){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var C=m.retryLane;m.retryLane=C!==0&&C<p?C:p}}function g5(m,p){C9(m,p),(m=m.alternate)&&C9(m,p)}function fJ(){return null}var E9=typeof reportError=="function"?reportError:function(m){console.error(m)};function p5(m){this._internalRoot=m}Fw.prototype.render=p5.prototype.render=function(m){var p=this._internalRoot;if(p===null)throw Error(r(409));Pw(m,p,null,null)},Fw.prototype.unmount=p5.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var p=m.containerInfo;Ah(function(){Pw(null,m,null,null)}),p[Wl]=null}};function Fw(m){this._internalRoot=m}Fw.prototype.unstable_scheduleHydration=function(m){if(m){var p=At();m={blockedOn:null,target:m,priority:p};for(var C=0;C<sn.length&&p!==0&&p<sn[C].priority;C++);sn.splice(C,0,m),C===0&&Ei(m)}};function x5(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function Dw(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function N9(){}function hJ(m,p,C,D,G){if(G){if(typeof D=="function"){var ee=D;D=function(){var bt=Mw(ge);ee.call(bt)}}var ge=T9(p,D,m,0,null,!1,!1,"",N9);return m._reactRootContainer=ge,m[Wl]=ge.current,gd(m.nodeType===8?m.parentNode:m),Ah(),ge}for(;G=m.lastChild;)m.removeChild(G);if(typeof D=="function"){var De=D;D=function(){var bt=Mw(We);De.call(bt)}}var We=m5(m,0,!1,null,null,!1,!1,"",N9);return m._reactRootContainer=We,m[Wl]=We.current,gd(m.nodeType===8?m.parentNode:m),Ah(function(){Pw(p,We,C,D)}),We}function Ow(m,p,C,D,G){var ee=C._reactRootContainer;if(ee){var ge=ee;if(typeof G=="function"){var De=G;G=function(){var We=Mw(ge);De.call(We)}}Pw(p,ge,m,G)}else ge=hJ(C,p,m,G,D);return Mw(ge)}ct=function(m){switch(m.tag){case 3:var p=m.stateNode;if(p.current.memoizedState.isDehydrated){var C=Hn(p.pendingLanes);C!==0&&(Gt(p,C|1),Qo(p,Tt()),(Dn&6)===0&&(Vg=Tt()+500,bu()))}break;case 13:Ah(function(){var D=jo(m,1);if(D!==null){var G=Mo();Wc(D,m,1,G)}}),g5(m,1)}},yt=function(m){if(m.tag===13){var p=jo(m,134217728);if(p!==null){var C=Mo();Wc(p,m,134217728,C)}g5(m,134217728)}},nr=function(m){if(m.tag===13){var p=sf(m),C=jo(m,p);if(C!==null){var D=Mo();Wc(C,m,p,D)}g5(m,p)}},At=function(){return Bt},Rr=function(m,p){var C=Bt;try{return Bt=m,p()}finally{Bt=C}},ve=function(m,p,C){switch(p){case"input":if(He(m,C),p=C.name,C.type==="radio"&&p!=null){for(C=m;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<C.length;p++){var D=C[p];if(D!==m&&D.form===m.form){var G=Fa(D);if(!G)throw Error(r(90));ie(D),He(D,G)}}}break;case"textarea":qt(m,C);break;case"select":p=C.value,p!=null&&pt(m,!!C.multiple,p,!1)}},Ye=l5,Ne=Ah;var mJ={usingClientEntryPoint:!1,Events:[yh,va,Fa,Pt,Ie,l5]},bx={findFiberByHostInstance:vu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gJ={bundleType:bx.bundleType,version:bx.version,rendererPackageName:bx.rendererPackageName,rendererConfig:bx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=ce(m),m===null?null:m.stateNode},findFiberByHostInstance:bx.findFiberByHostInstance||fJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Iw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Iw.isDisabled&&Iw.supportsFiber)try{un=Iw.inject(gJ),An=Iw}catch{}}return Zo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mJ,Zo.createPortal=function(m,p){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x5(p))throw Error(r(200));return dJ(m,p,null,C)},Zo.createRoot=function(m,p){if(!x5(m))throw Error(r(299));var C=!1,D="",G=E9;return p!=null&&(p.unstable_strictMode===!0&&(C=!0),p.identifierPrefix!==void 0&&(D=p.identifierPrefix),p.onRecoverableError!==void 0&&(G=p.onRecoverableError)),p=m5(m,1,!1,null,null,C,!1,D,G),m[Wl]=p.current,gd(m.nodeType===8?m.parentNode:m),new p5(p)},Zo.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var p=m._reactInternals;if(p===void 0)throw typeof m.render=="function"?Error(r(188)):(m=Object.keys(m).join(","),Error(r(268,m)));return m=ce(p),m=m===null?null:m.stateNode,m},Zo.flushSync=function(m){return Ah(m)},Zo.hydrate=function(m,p,C){if(!Dw(p))throw Error(r(200));return Ow(null,m,p,!0,C)},Zo.hydrateRoot=function(m,p,C){if(!x5(m))throw Error(r(405));var D=C!=null&&C.hydratedSources||null,G=!1,ee="",ge=E9;if(C!=null&&(C.unstable_strictMode===!0&&(G=!0),C.identifierPrefix!==void 0&&(ee=C.identifierPrefix),C.onRecoverableError!==void 0&&(ge=C.onRecoverableError)),p=T9(p,null,m,1,C??null,G,!1,ee,ge),m[Wl]=p.current,gd(m),D)for(m=0;m<D.length;m++)C=D[m],G=C._getVersion,G=G(C._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[C,G]:p.mutableSourceEagerHydrationData.push(C,G);return new Fw(p)},Zo.render=function(m,p,C){if(!Dw(p))throw Error(r(200));return Ow(null,m,p,!1,C)},Zo.unmountComponentAtNode=function(m){if(!Dw(m))throw Error(r(40));return m._reactRootContainer?(Ah(function(){Ow(null,null,m,!1,function(){m._reactRootContainer=null,m[Wl]=null})}),!0):!1},Zo.unstable_batchedUpdates=l5,Zo.unstable_renderSubtreeIntoContainer=function(m,p,C,D){if(!Dw(C))throw Error(r(200));if(m==null||m._reactInternals===void 0)throw Error(r(38));return Ow(m,p,C,!1,D)},Zo.version="18.3.1-next-f1338f8080-20240426",Zo}var I9;function VL(){if(I9)return w5.exports;I9=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),w5.exports=_J(),w5.exports}var R9;function SJ(){if(R9)return Rw;R9=1;var e=VL();return Rw.createRoot=e.createRoot,Rw.hydrateRoot=e.hydrateRoot,Rw}var kJ=SJ();const TJ=Tc(kJ);var _k=VL();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sv(){return sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sv.apply(this,arguments)}var vf;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(vf||(vf={}));const L9="popstate";function CJ(e){e===void 0&&(e={});function t(n,s){let{pathname:a,search:i,hash:o}=n.location;return Sk("",{pathname:a,search:i,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:KL(s)}return NJ(t,r,null,e)}function Ua(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qL(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function EJ(){return Math.random().toString(36).substr(2,8)}function B9(e,t){return{usr:e.state,key:e.key,idx:t}}function Sk(e,t,r,n){return r===void 0&&(r=null),sv({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?e1(t):t,{state:r,key:t&&t.key||n||EJ()})}function KL(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function e1(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function NJ(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,i=s.history,o=vf.Pop,l=null,u=d();u==null&&(u=0,i.replaceState(sv({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function f(){o=vf.Pop;let v=d(),T=v==null?null:v-u;u=v,l&&l({action:o,location:y.location,delta:T})}function h(v,T){o=vf.Push;let k=Sk(y.location,v,T);u=d()+1;let b=B9(k,u),N=y.createHref(k);try{i.pushState(b,"",N)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(N)}a&&l&&l({action:o,location:y.location,delta:1})}function g(v,T){o=vf.Replace;let k=Sk(y.location,v,T);u=d();let b=B9(k,u),N=y.createHref(k);i.replaceState(b,"",N),a&&l&&l({action:o,location:y.location,delta:0})}function x(v){let T=s.location.origin!=="null"?s.location.origin:s.location.href,k=typeof v=="string"?v:KL(v);return k=k.replace(/ $/,"%20"),Ua(T,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,T)}let y={get action(){return o},get location(){return e(s,i)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(L9,f),l=v,()=>{s.removeEventListener(L9,f),l=null}},createHref(v){return t(s,v)},createURL:x,encodeLocation(v){let T=x(v);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:h,replace:g,go(v){return i.go(v)}};return y}var $9;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})($9||($9={}));function AJ(e,t,r){return r===void 0&&(r="/"),jJ(e,t,r)}function jJ(e,t,r,n){let s=typeof t=="string"?e1(t):t,a=JL(s.pathname||"/",r);if(a==null)return null;let i=YL(e);PJ(i);let o=null;for(let l=0;o==null&&l<i.length;++l){let u=WJ(a);o=$J(i[l],u)}return o}function YL(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,i,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};l.relativePath.startsWith("/")&&(Ua(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=tm([n,l.relativePath]),d=r.concat(l);a.children&&a.children.length>0&&(Ua(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),YL(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:LJ(u,a.index),routesMeta:d})};return e.forEach((a,i)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))s(a,i);else for(let l of XL(a.path))s(a,i,l)}),t}function XL(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let i=XL(n.join("/")),o=[];return o.push(...i.map(l=>l===""?a:[a,l].join("/"))),s&&o.push(...i),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function PJ(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:BJ(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const MJ=/^:[\w-]+$/,FJ=3,DJ=2,OJ=1,IJ=10,RJ=-2,z9=e=>e==="*";function LJ(e,t){let r=e.split("/"),n=r.length;return r.some(z9)&&(n+=RJ),t&&(n+=DJ),r.filter(s=>!z9(s)).reduce((s,a)=>s+(MJ.test(a)?FJ:a===""?OJ:IJ),n)}function BJ(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function $J(e,t,r){let{routesMeta:n}=e,s={},a="/",i=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,d=a==="/"?t:t.slice(a.length)||"/",f=zJ({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),h=l.route;if(!f)return null;Object.assign(s,f.params),i.push({params:s,pathname:tm([a,f.pathname]),pathnameBase:qJ(tm([a,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(a=tm([a,f.pathnameBase]))}return i}function zJ(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=UJ(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:g}=d;if(h==="*"){let y=o[f]||"";i=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const x=o[f];return g&&!x?u[h]=void 0:u[h]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:e}}function UJ(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),qL(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function WJ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qL(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function JL(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function HJ(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?e1(e):e;return{pathname:r?r.startsWith("/")?r:GJ(r,t):t,search:KJ(n),hash:YJ(s)}}function GJ(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function S5(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VJ(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function QL(e,t){let r=VJ(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function ZL(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=e1(e):(s=sv({},e),Ua(!s.pathname||!s.pathname.includes("?"),S5("?","pathname","search",s)),Ua(!s.pathname||!s.pathname.includes("#"),S5("#","pathname","hash",s)),Ua(!s.search||!s.search.includes("#"),S5("#","search","hash",s)));let a=e===""||s.pathname==="",i=a?"/":s.pathname,o;if(i==null)o=r;else{let f=t.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}o=f>=0?t[f]:"/"}let l=HJ(s,o),u=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const tm=e=>e.join("/").replace(/\/\/+/g,"/"),qJ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),KJ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,YJ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function XJ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const eB=["post","put","patch","delete"];new Set(eB);const JJ=["get",...eB];new Set(JJ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function av(){return av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},av.apply(this,arguments)}const $7=S.createContext(null),QJ=S.createContext(null),Xv=S.createContext(null),S_=S.createContext(null),Hf=S.createContext({outlet:null,matches:[],isDataRoute:!1}),tB=S.createContext(null);function Jv(){return S.useContext(S_)!=null}function k_(){return Jv()||Ua(!1),S.useContext(S_).location}function rB(e){S.useContext(Xv).static||S.useLayoutEffect(e)}function fl(){let{isDataRoute:e}=S.useContext(Hf);return e?dQ():ZJ()}function ZJ(){Jv()||Ua(!1);let e=S.useContext($7),{basename:t,future:r,navigator:n}=S.useContext(Xv),{matches:s}=S.useContext(Hf),{pathname:a}=k_(),i=JSON.stringify(QL(s,r.v7_relativeSplatPath)),o=S.useRef(!1);return rB(()=>{o.current=!0}),S.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=ZL(u,JSON.parse(i),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:tm([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,i,a,e])}function T_(){let{matches:e}=S.useContext(Hf),t=e[e.length-1];return t?t.params:{}}function eQ(e,t){return tQ(e,t)}function tQ(e,t,r,n){Jv()||Ua(!1);let{navigator:s}=S.useContext(Xv),{matches:a}=S.useContext(Hf),i=a[a.length-1],o=i?i.params:{};i&&i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let u=k_(),d;if(t){var f;let v=typeof t=="string"?e1(t):t;l==="/"||(f=v.pathname)!=null&&f.startsWith(l)||Ua(!1),d=v}else d=u;let h=d.pathname||"/",g=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=AJ(e,{pathname:g}),y=iQ(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:tm([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:tm([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,r,n);return t&&y?S.createElement(S_.Provider,{value:{location:av({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:vf.Pop}},y):y}function rQ(){let e=uQ(),t=XJ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),r?S.createElement("pre",{style:s},r):null,null)}const nQ=S.createElement(rQ,null);class sQ extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?S.createElement(Hf.Provider,{value:this.props.routeContext},S.createElement(tB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function aQ(e){let{routeContext:t,match:r,children:n}=e,s=S.useContext($7);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),S.createElement(Hf.Provider,{value:t},n)}function iQ(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=(s=r)==null?void 0:s.errors;if(o!=null){let d=i.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);d>=0||Ua(!1),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:g}=r,x=f.route.loader&&h[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||x){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,f,h)=>{let g,x=!1,y=null,v=null;r&&(g=o&&f.route.id?o[f.route.id]:void 0,y=f.route.errorElement||nQ,l&&(u<0&&h===0?(fQ("route-fallback"),x=!0,v=null):u===h&&(x=!0,v=f.route.hydrateFallbackElement||null)));let T=t.concat(i.slice(0,h+1)),k=()=>{let b;return g?b=y:x?b=v:f.route.Component?b=S.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,S.createElement(aQ,{match:f,routeContext:{outlet:d,matches:T,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?S.createElement(sQ,{location:r.location,revalidation:r.revalidation,component:y,error:g,children:k(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):k()},null)}var nB=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(nB||{}),sB=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(sB||{});function oQ(e){let t=S.useContext($7);return t||Ua(!1),t}function lQ(e){let t=S.useContext(QJ);return t||Ua(!1),t}function cQ(e){let t=S.useContext(Hf);return t||Ua(!1),t}function aB(e){let t=cQ(),r=t.matches[t.matches.length-1];return r.route.id||Ua(!1),r.route.id}function uQ(){var e;let t=S.useContext(tB),r=lQ(),n=aB();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function dQ(){let{router:e}=oQ(nB.UseNavigateStable),t=aB(sB.UseNavigateStable),r=S.useRef(!1);return rB(()=>{r.current=!0}),S.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,av({fromRouteId:t},a)))},[e,t])}const U9={};function fQ(e,t,r){U9[e]||(U9[e]=!0)}function hQ(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function Dp(e){let{to:t,replace:r,state:n,relative:s}=e;Jv()||Ua(!1);let{future:a,static:i}=S.useContext(Xv),{matches:o}=S.useContext(Hf),{pathname:l}=k_(),u=fl(),d=ZL(t,QL(o,a.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(d);return S.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function ca(e){Ua(!1)}function mQ(e){let{basename:t="/",children:r=null,location:n,navigationType:s=vf.Pop,navigator:a,static:i=!1,future:o}=e;Jv()&&Ua(!1);let l=t.replace(/^\/*/,"/"),u=S.useMemo(()=>({basename:l,navigator:a,static:i,future:av({v7_relativeSplatPath:!1},o)}),[l,o,a,i]);typeof n=="string"&&(n=e1(n));let{pathname:d="/",search:f="",hash:h="",state:g=null,key:x="default"}=n,y=S.useMemo(()=>{let v=JL(d,l);return v==null?null:{location:{pathname:v,search:f,hash:h,state:g,key:x},navigationType:s}},[l,d,f,h,g,x,s]);return y==null?null:S.createElement(Xv.Provider,{value:u},S.createElement(S_.Provider,{children:r,value:y}))}function z7(e){let{children:t,location:r}=e;return eQ(kk(t),r)}new Promise(()=>{});function kk(e,t){t===void 0&&(t=[]);let r=[];return S.Children.forEach(e,(n,s)=>{if(!S.isValidElement(n))return;let a=[...t,s];if(n.type===S.Fragment){r.push.apply(r,kk(n.props.children,a));return}n.type!==ca&&Ua(!1),!n.props.index||!n.props.children||Ua(!1);let i={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=kk(n.props.children,a)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const gQ="6";try{window.__reactRouterVersion=gQ}catch{}const pQ="startTransition",W9=GL[pQ];function xQ(e){let{basename:t,children:r,future:n,window:s}=e,a=S.useRef();a.current==null&&(a.current=CJ({window:s,v5Compat:!0}));let i=a.current,[o,l]=S.useState({action:i.action,location:i.location}),{v7_startTransition:u}=n||{},d=S.useCallback(f=>{u&&W9?W9(()=>l(f)):l(f)},[l,u]);return S.useLayoutEffect(()=>i.listen(d),[i,d]),S.useEffect(()=>hQ(n),[n]),S.createElement(mQ,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}var H9;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(H9||(H9={}));var G9;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(G9||(G9={}));const da={student_subjects:1800*1e3,student_active_tests:600*1e3,student_results_table:600*1e3,teacher_subjects:900*1e3,teacher_classes:900*1e3,teacher_tests:600*1e3,teacher_results_table:600*1e3,admin_users:1200*1e3,admin_teachers:1200*1e3,admin_subjects:1800*1e3,admin_academic_years:3600*1e3,admin_tests:900*1e3,admin_results_table:null,admin_teacher_id:3600*1e3,all_tests:1200*1e3,subjects_dropdown:1800*1e3,grades_classes:3600*1e3,test_progress:120*1e3,anti_cheating:120*1e3,word_matching_test:600*1e3,speaking_test_data:3600*1e3},fa=e=>{try{const t=localStorage.getItem(e);if(!t)return console.log(" Cache: No data found for key:",e),null;const{data:r,timestamp:n,ttl:s}=JSON.parse(t),a=Date.now()-n;return a>s?(console.log(" Cache: Data expired for key:",e,"age:",a,"ttl:",s),localStorage.removeItem(e),null):(console.log(" Cache: Data found for key:",e,"age:",a,"ttl:",s),r)}catch(t){return console.log(" Cache: Corrupted data for key:",e,t),localStorage.removeItem(e),null}},qs=(e,t,r)=>{try{console.log(" Cache: Setting data for key:",e,"ttl:",r),localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now(),ttl:r})),console.log(" Cache: Data cached successfully for key:",e)}catch{console.log(" Cache: Storage full, cleaning old data for key:",e),iB();try{localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now(),ttl:r})),console.log(" Cache: Data cached after cleanup for key:",e)}catch{console.warn("Storage full, cannot cache data")}}},iB=()=>{const e=Date.now(),t=Object.keys(localStorage);t.forEach(s=>{try{const a=localStorage.getItem(s);if(a){const{timestamp:i,ttl:o}=JSON.parse(a);e-i>o&&localStorage.removeItem(s)}}catch{localStorage.removeItem(s)}});const r=e-10080*60*1e3;t.forEach(s=>{try{const a=localStorage.getItem(s);if(a){const{timestamp:i}=JSON.parse(a);i<r&&localStorage.removeItem(s)}}catch{localStorage.removeItem(s)}});const n=Object.keys(localStorage);if(n.length>0){const s=n.map(i=>{try{const o=localStorage.getItem(i);if(o){const{timestamp:l}=JSON.parse(o);return{key:i,timestamp:l}}}catch{return{key:i,timestamp:0}}return{key:i,timestamp:0}}),a=Math.ceil(s.length*.25);s.sort((i,o)=>i.timestamp-o.timestamp).slice(0,a).forEach(({key:i})=>localStorage.removeItem(i))}},U7=e=>{Object.keys(localStorage).forEach(r=>{r.includes(e)&&localStorage.removeItem(r)})},t1=(e,t,r)=>{const n=`test_progress_${e}_${t}_${r}`,s=`anti_cheating_${e}_${t}_${r}`;if(localStorage.removeItem(n),localStorage.removeItem(s),t==="speaking_test_data"){const a=`speaking_test_data_${e}_${r}`;localStorage.removeItem(a),console.log(`Cleared speaking test data cache for ${r}`)}console.log(`Cleared test data for ${t}_${r}`)},cp=Object.freeze(Object.defineProperty({__proto__:null,CACHE_TTL:da,cleanupOldData:iB,clearTestData:t1,clearUserData:U7,getCachedData:fa,setCachedData:qs},Symbol.toStringTag,{value:"Module"}));let Hc=null,Sx=null;function Ob(){if(Sx!==null)return Sx;try{const e="_test";localStorage.setItem(e,"test");const t=localStorage.getItem(e);localStorage.removeItem(e),Sx=t==="test"}catch(e){console.warn("localStorage unavailable, falling back to sessionStorage",e),Sx=!1}return Sx}function iv(){return Ob()?localStorage:sessionStorage}async function W7(e){try{const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}catch(t){return console.warn("Hash computation failed",t),btoa(e).replace(/[^a-zA-Z0-9]/g,"").substring(0,64)}}async function yQ(e,t){try{const r=iv();return r.setItem(e,t),r.getItem(e)===t}catch(r){return console.warn("Storage write failed",r),!1}}async function vQ(e,t){try{const r=iv(),n=await W7(t);return r.setItem(`${e}_hash`,n),await yQ(e,t)}catch(r){return console.warn("Failed to store with hash",r),!1}}async function wQ(e){try{const t=iv(),r=t.getItem(e),n=t.getItem(`${e}_hash`);return!r||!n?!1:await W7(r)===n}catch(t){return console.warn("Hash verification failed",t),!1}}async function bQ(e,t=3,r=200){for(let n=0;n<t;n++){if(await e())return!0;await new Promise(a=>setTimeout(a,r))}return!1}const aa={async set(e){const t=Ob(),r=iv();if(!t){console.warn(" localStorage unavailable - using sessionStorage (less persistent)");try{r.setItem("auth_token",e);const a=r.getItem("auth_token")===e;return a&&(Hc=e),a}catch(s){return console.error("sessionStorage fallback failed",s),!1}}const n=await bQ(()=>vQ("auth_token",e));return n&&(Hc=e),n},async get(){if(Hc)return Hc;const e=iv();if(!Ob())try{const t=e.getItem("auth_token");return Hc=t,t}catch(t){return console.error("sessionStorage fallback read failed",t),null}try{const t=e.getItem("auth_token");if(!t)return Hc=null,null;if(e.getItem("auth_token_hash")){if(!await wQ("auth_token"))return Hc=null,null}else{console.log("Migrating legacy token to secure storage format...");try{const n=await W7(t);if(e.setItem("auth_token_hash",n),e.getItem("auth_token_hash")!==n)return console.warn("Failed to store hash during migration"),t}catch(n){console.warn("Failed to migrate token hash:",n)}}return Hc=t,t}catch(t){return console.warn("Failed to get token",t),Hc=null,null}},async clear(){try{Ob()&&(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_token_hash"))}catch{}try{sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("auth_token_hash")}catch{}Hc=null},clearCache(){Hc=null}},V9=Object.freeze(Object.defineProperty({__proto__:null,SecureToken:aa},Symbol.toStringTag,{value:"Module"})),oB=S.createContext(),lB=({children:e})=>{const[t,r]=S.useState(null),[n,s]=S.useState(null),[a,i]=S.useState(null),[o,l]=S.useState(!1),[u,d]=S.useState(!0),[f,h]=S.useState(null);S.useEffect(()=>{console.log("[AUTH] Initializing application session..."),v()},[]),S.useEffect(()=>{if(o&&a){console.log("[AUTH] Setting up proactive token refresh...");let U=!1;const I=setInterval(async()=>{if(o&&a&&!U){U=!0;try{const W=a||await(window.tokenManager?.getToken()||aa.get());if(W&&g(W))console.log("[AUTH] Token expired, attempting refresh..."),await x()||console.log("[AUTH] Proactive refresh failed, but user remains logged in");else if(W)try{const Z=JSON.parse(atob(W.split(".")[1])).exp*1e3,oe=Date.now(),J=Z-oe;J<300*1e3&&J>0&&(console.log(`[AUTH] Token expires in ${Math.round(J/1e3)} seconds, refreshing...`),await x()||console.log("[AUTH] Proactive refresh failed, but user remains logged in"))}catch(K){console.error("[AUTH] Error parsing token for expiration check:",K)}}catch(W){console.error("[AUTH] Error in proactive refresh:",W)}finally{U=!1}}},300*1e3);return()=>{console.log("[AUTH] Clearing proactive token refresh interval"),clearInterval(I)}}},[o,a]);const g=U=>{if(!U)return!0;try{if(typeof U!="string"||!U.includes("."))return console.warn("[AUTH] Invalid token format - not a JWT"),!0;const I=U.split(".");if(I.length!==3)return console.warn("[AUTH] Invalid token format - not 3 parts"),!0;const W=JSON.parse(atob(I[1])),K=Date.now()/1e3;return W.exp<=K}catch(I){if(console.error("[AUTH] Error decoding token:",I),console.warn("[AUTH] Token appears to be corrupted - clearing authentication"),aa.clear().catch(()=>{}),localStorage.removeItem("accessToken"),localStorage.removeItem("refresh_token"),localStorage.removeItem("userData"),window.tokenManager)try{window.tokenManager.clearAuth()}catch(W){console.warn("[AUTH] Error clearing token manager:",W)}return!0}},x=async()=>{const U=localStorage.getItem("refresh_token");if(!U)return console.log("[AUTH] No refresh token found"),!1;try{const I=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:U})});if(I.ok){const W=await I.json();console.log("[AUTH] Token refresh successful"),await aa.set(W.accessToken),localStorage.setItem("refresh_token",W.refreshToken),localStorage.setItem("accessToken",W.accessToken);try{window.tokenManager&&(await window.tokenManager.setToken(W.accessToken),W.refreshToken&&window.tokenManager.setRefreshToken(W.refreshToken))}catch{}return i(W.accessToken),!0}else return console.error("[AUTH] Token refresh failed:",I.status),!1}catch(I){return console.error("[AUTH] Token refresh error:",I),!1}},y=async(U,I={})=>{const W=a||await(window.tokenManager?.getToken()||aa.get());if(!W)throw new Error("No authentication token found");const K={"Content-Type":"application/json",Authorization:`Bearer ${W}`,...I.headers},Z=await fetch(U,{...I,headers:K});if(Z.status===401)if(console.log("[AUTH] 401 error, attempting token refresh..."),await x()){const J=await(window.tokenManager?.getToken()||aa.get());return K.Authorization=`Bearer ${J}`,fetch(U,{...I,headers:K})}else throw console.log("[AUTH] Token refresh failed, returning 401 response"),new Error("Authentication failed - please login again");return Z},v=async()=>{try{console.log("[AUTH] Starting session initialization..."),d(!0);const U=await(window.tokenManager?.getToken()||aa.get())||localStorage.getItem("accessToken")||localStorage.getItem("token"),I=localStorage.getItem("user_data")||localStorage.getItem("userData"),W=I?JSON.parse(I).role:null;if(console.log("[AUTH] Found stored data:",{hasToken:!!U,hasUser:!!I,role:W}),U&&W&&I)try{const K=JSON.parse(I);if(g(U))if(console.log("[AUTH] Token expired, attempting refresh..."),await x()){console.log("[AUTH] Token refreshed successfully");const oe=await(window.tokenManager?.getToken()||aa.get());i(oe)}else console.log("[AUTH] Token refresh failed, but continuing with existing token..."),i(U);else i(U);s(W),r(K);try{if(window.tokenManager&&U){await window.tokenManager.setToken(U);const Z=localStorage.getItem("refresh_token");Z&&window.tokenManager.setRefreshToken(Z)}}catch{}l(!0),await b(K,W)}catch(K){console.error("[AUTH] Error parsing stored user data:",K),console.log("[AUTH] Invalid user data, but not forcing logout - continuing with empty state"),l(!1)}}catch(U){console.error("[AUTH] Session initialization error:",U),console.log("[AUTH] Initialization error, but not forcing logout - continuing with empty state"),l(!1)}finally{console.log("[AUTH] Session initialization complete"),d(!1)}},T=async U=>{try{if(d(!0),h(null),window.forceLogout||window.preventAutoLogin){console.log(" Login blocked - force logout in progress"),h("Please wait for the logout process to complete.");return}console.log("Attempting login with:",U.username);let I,W;U.username==="admin"?(I={ok:!0,json:()=>({success:!0,token:"test-token"})},W="admin"):(I=await authService.teacherLogin(U),W="teacher");const K=await I.json();await k(I,W,K)}catch(I){j(I)}finally{d(!1)}},k=async(U,I,W)=>{try{if(U.ok&&W.success&&W.token){i(W.token),s(I),r(W),l(!0);const K=W.accessToken||W.token;await aa.set(K),localStorage.setItem("refresh_token",W.refreshToken),localStorage.setItem("user_data",JSON.stringify(W)),localStorage.setItem("accessToken",K);try{window.tokenManager&&(await window.tokenManager.setToken(K),W.refreshToken&&window.tokenManager.setRefreshToken(W.refreshToken))}catch{}try{const Z=Date.now(),oe=10080*60*1e3,J=[];for(let le=0;le<localStorage.length;le++){const ue=localStorage.key(le);if(!(!ue||!(ue.startsWith("test_progress_")||ue.startsWith("test_timer_")||ue.startsWith("test_shuffle_order_")||ue.startsWith("student_results_table_")||ue.startsWith("anti_cheating_"))))try{const Te=localStorage.getItem(ue);if(!Te){J.push(ue);continue}let ie=null;if(Te.startsWith("{")||Te.startsWith("[")){const xe=JSON.parse(Te),Ae=xe.timestamp||xe.lastSaved||xe.lastTickAt||xe.createdAt||xe.updatedAt||xe.startedAt||xe.started_at;Ae&&(ie=new Date(Ae).getTime())}if(!ie){const xe=`${ue}__ts`,Ae=localStorage.getItem(xe);Ae&&(ie=parseInt(Ae)||null)}if(!ie)continue;Z-ie>oe&&J.push(ue)}catch{}}J.forEach(le=>{try{localStorage.removeItem(le)}catch{}})}catch(Z){console.warn("LocalStorage cleanup skipped:",Z)}return await b(W,I),!0}else{const K=W.message||U.statusText||"Login failed";return j(new Error(K)),!1}}catch(K){return j(K),!1}},b=async(U,I)=>{try{switch(I){case"admin":console.log("Admin login successful, role:",U.role),console.log("Admin logged in:",U);break;case"teacher":console.log("Teacher login successful, role:",U.role),console.log("Teacher data:",U.teacher),await E(U),await M();break;case"student":console.log("Student login successful"),N(U);break;default:console.warn("Unknown user role:",I)}}catch(W){console.error("Post-login actions error:",W)}},N=U=>{r(U),console.log("Student info populated:",U)},E=async U=>{r(U),console.log("Teacher info populated:",U)},P=async()=>{try{console.log("Initializing teacher cabinet...")}catch(U){console.error("Error initializing teacher cabinet:",U)}},M=async()=>{try{console.log("Checking teacher subjects...")}catch(U){console.error("Error checking teacher subjects:",U)}},j=U=>{h(U.message||"Login failed"),A()},A=()=>{h(null),d(!1)},O=S.useCallback(()=>{L()},[]),L=async()=>{r(null),s(null),i(null),l(!1),h(null);const U=t?.student_id||t?.teacher_id||t?.admin_id||t?.id;U&&U7(U),await aa.clear(),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),localStorage.removeItem("user_data"),localStorage.removeItem("user_role"),localStorage.removeItem("accessToken"),localStorage.removeItem("refresh_token"),localStorage.removeItem("testProgress"),localStorage.removeItem("formData"),window.tokenManager&&await window.tokenManager.clearAuth(),setTimeout(()=>{q()},100)},q=()=>{console.log("Interface reset after session clear - redirecting to login"),window.location.replace("/login")},Q=()=>t?.id||null,ae=()=>n==="admin"?t:null,te=()=>n==="admin",ne=()=>te()?t?.admin_id:null,B=()=>n==="teacher"?t?.username:null,V=()=>{console.log("Auth functions available:",{handleUnifiedLogin:typeof T,logout:typeof O,getCurrentTeacherId:typeof Q,isAdmin:typeof te,getCurrentAdmin:typeof ae,getCurrentAdminId:typeof ne,getCurrentTeacherUsername:typeof B})};S.useEffect(()=>(window.logout=O,window.getCurrentTeacherId=Q,window.getCurrentAdmin=ae,window.isAdmin=te,window.getCurrentAdminId=ne,window.getCurrentTeacherUsername=B,window.checkFunctionAvailability=V,()=>{delete window.logout,delete window.getCurrentTeacherId,delete window.getCurrentAdmin,delete window.isAdmin,delete window.getCurrentAdminId,delete window.getCurrentTeacherUsername,delete window.checkFunctionAvailability}),[O]);const R=S.useCallback(U=>{console.log("Setting user data from external auth:",U),r(U),s(U.role),i(U.token),l(!0),d(!1),h(null),aa.set(U.token).catch(I=>{console.error("[AUTH] Failed to store token securely:",I)}),localStorage.setItem("user_data",JSON.stringify(U)),localStorage.setItem("accessToken",U.token),window.tokenManager&&window.tokenManager.setToken(U.token).catch(()=>{})},[]),H={user:t,role:n,token:a,isAuthenticated:o,isLoading:u,error:f,login:T,setUserData:R,logout:O,resetLoginForm:A,forceCompleteLogout:L,initializeApplicationSession:v,makeAuthenticatedRequest:y,populateStudentInfo:N,populateTeacherInfo:E,initializeTeacherCabinet:P,checkTeacherSubjects:M,getCurrentTeacherId:Q,getCurrentAdmin:ae,isAdmin:te,getCurrentAdminId:ne,getCurrentTeacherUsername:B,handleLoginResponse:k,handlePostLoginActions:b,handleLoginFailure:j,resetInterfaceAfterSessionClear:q,checkFunctionAvailability:V};return c.jsx(oB.Provider,{value:H,children:e})},Fs=()=>{const e=S.useContext(oB);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};class _Q{constructor(){this.baseURL="http://localhost:8888/.netlify/functions",this.timeout=1e4,this.retryCount=3,this.retryDelay=1e3}async getHeaders(){const t=await(window.tokenManager?.getToken()||aa.get())||localStorage.getItem("token");return{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}}async sendRequest(t,r){try{return await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}catch(n){throw console.error(" Network error:",n),n}}async request(t,r={}){const n=`${this.baseURL}${t}`,a={method:"GET",headers:await this.getHeaders(),timeout:this.timeout,...r};let i;for(let o=0;o<this.retryCount;o++)try{const l=new AbortController,u=setTimeout(()=>l.abort(),this.timeout),d=await fetch(n,{...a,signal:l.signal});if(clearTimeout(u),!d.ok)throw new Error(`HTTP error! status: ${d.status}`);return await d.json()}catch(l){if(i=l,l.name==="AbortError")throw new Error("Request timeout");o<this.retryCount-1&&(console.warn(`Request failed, retrying in ${this.retryDelay}ms... (attempt ${o+1}/${this.retryCount})`),await new Promise(u=>setTimeout(u,this.retryDelay*Math.pow(2,o))))}throw i}async get(t,r={}){return this.request(t,{...r,method:"GET"})}async post(t,r,n={}){return this.request(t,{...n,method:"POST",body:JSON.stringify(r)})}async put(t,r,n={}){return this.request(t,{...n,method:"PUT",body:JSON.stringify(r)})}async delete(t,r={}){return this.request(t,{...r,method:"DELETE"})}async patch(t,r,n={}){return this.request(t,{...n,method:"PATCH",body:JSON.stringify(r)})}async uploadFile(t,r,n={}){const s=new FormData;s.append("file",r);const a=`${this.baseURL}${t}`,i=await(window.tokenManager?.getToken()||aa.get())||localStorage.getItem("token"),o={method:"POST",headers:{...i&&{Authorization:`Bearer ${i}`}},body:s,...n};try{const l=await fetch(a,o);if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);return await l.json()}catch(l){throw l}}async downloadFile(t,r,n={}){const s=`${this.baseURL}${t}`,i={method:"GET",headers:await this.getHeaders(),...n};try{const o=await fetch(s,i);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const l=await o.blob(),u=window.URL.createObjectURL(l),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(u)}catch(o){throw o}}ensureDebugOutput(){let t=document.getElementById("debug-output");return t||(t=document.createElement("div"),t.id="debug-output",t.className="fixed top-4 right-4 w-96 max-h-96 bg-white border border-gray-300 rounded-lg shadow-lg p-4 z-50 overflow-auto",t.innerHTML='<div class="text-sm font-mono text-gray-800">Debug Output</div>',document.body.appendChild(t)),t}async testDbConnection(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/test-db-connection")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Database Connection Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,message:"Database connection successful",data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Database Connection Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,message:"Database connection failed",error:t.message}}}async testStudentLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/student-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:"51706",password:"1"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Student Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Student Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testTeacherLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/teacher-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"Aleksandr_Petrov",password:"465"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Teacher Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Teacher Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testAdminLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/admin-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"admin",password:"admin123"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Admin Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Admin Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetTeacherSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-teacher-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Teacher Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Teacher Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetClassResults(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-class-results")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Class Results Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Class Results Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetStudentSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-student-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Student Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Student Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetStudentTestResults(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-student-test-results")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Student Test Results Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Student Test Results Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testEndpoints(){const t=["/debug/test-student-login","/debug/test-teacher-login","/debug/test-admin-login","/debug/test-get-subjects","/debug/test-get-teacher-subjects","/debug/test-get-class-results","/debug/test-get-student-subjects","/debug/test-get-student-test-results"],r={};for(const n of t)try{const s=await this.get(n);r[n]={success:!0,data:s}}catch(s){r[n]={success:!1,error:s.message}}return r}async debugFunction(t){const r=this.ensureDebugOutput();try{let n;switch(t){case"testDbConnection":n=await this.testDbConnection();break;case"testStudentLogin":n=await this.testStudentLogin();break;case"testTeacherLogin":n=await this.testTeacherLogin();break;case"testAdminLogin":n=await this.testAdminLogin();break;case"testGetSubjects":n=await this.testGetSubjects();break;case"testGetTeacherSubjects":n=await this.testGetTeacherSubjects();break;case"testGetClassResults":n=await this.testGetClassResults();break;case"testGetStudentSubjects":n=await this.testGetStudentSubjects();break;case"testGetStudentTestResults":n=await this.testGetStudentTestResults();break;default:throw new Error(`Unknown debug function: ${t}`)}return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Debug Function: ${t}</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),n}catch(n){throw r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Debug Function Error: ${t}</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${n.message}</pre>
        `),n}}showDebugFunctions(){const t=this.ensureDebugOutput(),r=`
      <div class="text-sm font-mono text-gray-800 mb-4">Debug Functions</div>
      <div class="grid grid-cols-2 gap-2 mb-4">
        <button onclick="apiClient.testDbConnection()" class="px-3 py-2 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 transition-colors">
          Test DB Connection
        </button>
        <button onclick="apiClient.testStudentLogin()" class="px-3 py-2 bg-green-500 text-white text-xs rounded hover:bg-green-600 transition-colors">
          Test Student Login
        </button>
        <button onclick="apiClient.testTeacherLogin()" class="px-3 py-2 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600 transition-colors">
          Test Teacher Login
        </button>
        <button onclick="apiClient.testAdminLogin()" class="px-3 py-2 bg-red-500 text-white text-xs rounded hover:bg-red-600 transition-colors">
          Test Admin Login
        </button>
        <button onclick="apiClient.testGetSubjects()" class="px-3 py-2 bg-purple-500 text-white text-xs rounded hover:bg-purple-600 transition-colors">
          Test Get Subjects
        </button>
        <button onclick="apiClient.testGetTeacherSubjects()" class="px-3 py-2 bg-indigo-500 text-white text-xs rounded hover:bg-indigo-600 transition-colors">
          Test Get Teacher Subjects
        </button>
        <button onclick="apiClient.testGetClassResults()" class="px-3 py-2 bg-pink-500 text-white text-xs rounded hover:bg-pink-600 transition-colors">
          Test Get Class Results
        </button>
        <button onclick="apiClient.testGetStudentSubjects()" class="px-3 py-2 bg-teal-500 text-white text-xs rounded hover:bg-teal-600 transition-colors">
          Test Get Student Subjects
        </button>
        <button onclick="apiClient.testGetStudentTestResults()" class="px-3 py-2 bg-orange-500 text-white text-xs rounded hover:bg-orange-600 transition-colors">
          Test Get Student Test Results
        </button>
        <button onclick="apiClient.testEndpoints()" class="px-3 py-2 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 transition-colors">
          Test All Endpoints
        </button>
      </div>
    `;t.innerHTML=r}}const na=new _Q,H7=S.createContext({});function G7(e){const t=S.useRef(null);return t.current===null&&(t.current=e()),t.current}const V7=typeof window<"u",cB=V7?S.useLayoutEffect:S.useEffect,C_=S.createContext(null);function q7(e,t){e.indexOf(t)===-1&&e.push(t)}function K7(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const r0=(e,t,r)=>r>t?t:r<e?e:r;let Y7=()=>{};const n0={},uB=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function dB(e){return typeof e=="object"&&e!==null}const fB=e=>/^0[^.\s]+$/u.test(e);function X7(e){let t;return()=>(t===void 0&&(t=e()),t)}const gc=e=>e,SQ=(e,t)=>r=>t(e(r)),Qv=(...e)=>e.reduce(SQ),ov=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class J7{constructor(){this.subscriptions=[]}add(t){return q7(this.subscriptions,t),()=>K7(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let a=0;a<s;a++){const i=this.subscriptions[a];i&&i(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Hu=e=>e*1e3,Gu=e=>e/1e3;function hB(e,t){return t?e*(1e3/t):0}const mB=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,kQ=1e-7,TQ=12;function CQ(e,t,r,n,s){let a,i,o=0;do i=t+(r-t)/2,a=mB(i,n,s)-e,a>0?r=i:t=i;while(Math.abs(a)>kQ&&++o<TQ);return i}function Zv(e,t,r,n){if(e===t&&r===n)return gc;const s=a=>CQ(a,0,1,e,r);return a=>a===0||a===1?a:mB(s(a),t,n)}const gB=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,pB=e=>t=>1-e(1-t),xB=Zv(.33,1.53,.69,.99),Q7=pB(xB),yB=gB(Q7),vB=e=>(e*=2)<1?.5*Q7(e):.5*(2-Math.pow(2,-10*(e-1))),Z7=e=>1-Math.sin(Math.acos(e)),wB=pB(Z7),bB=gB(Z7),EQ=Zv(.42,0,1,1),NQ=Zv(0,0,.58,1),_B=Zv(.42,0,.58,1),AQ=e=>Array.isArray(e)&&typeof e[0]!="number",SB=e=>Array.isArray(e)&&typeof e[0]=="number",jQ={linear:gc,easeIn:EQ,easeInOut:_B,easeOut:NQ,circIn:Z7,circInOut:bB,circOut:wB,backIn:Q7,backInOut:yB,backOut:xB,anticipate:vB},PQ=e=>typeof e=="string",q9=e=>{if(SB(e)){Y7(e.length===4);const[t,r,n,s]=e;return Zv(t,r,n,s)}else if(PQ(e))return jQ[e];return e},Lw=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function MQ(e,t){let r=new Set,n=new Set,s=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){i.has(d)&&(u.schedule(d),e()),d(o)}const u={schedule:(d,f=!1,h=!1)=>{const x=h&&s?r:n;return f&&i.add(d),x.has(d)||x.add(d),d},cancel:d=>{n.delete(d),i.delete(d)},process:d=>{if(o=d,s){a=!0;return}s=!0,[r,n]=[n,r],r.forEach(l),r.clear(),s=!1,a&&(a=!1,u.process(d))}};return u}const FQ=40;function kB(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,i=Lw.reduce((b,N)=>(b[N]=MQ(a),b),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:d,update:f,preRender:h,render:g,postRender:x}=i,y=()=>{const b=n0.useManualTiming?s.timestamp:performance.now();r=!1,n0.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(b-s.timestamp,FQ),1)),s.timestamp=b,s.isProcessing=!0,o.process(s),l.process(s),u.process(s),d.process(s),f.process(s),h.process(s),g.process(s),x.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(y))},v=()=>{r=!0,n=!0,s.isProcessing||e(y)};return{schedule:Lw.reduce((b,N)=>{const E=i[N];return b[N]=(P,M=!1,j=!1)=>(r||v(),E.schedule(P,M,j)),b},{}),cancel:b=>{for(let N=0;N<Lw.length;N++)i[Lw[N]].cancel(b)},state:s,steps:i}}const{schedule:Ls,cancel:Mf,state:$i,steps:k5}=kB(typeof requestAnimationFrame<"u"?requestAnimationFrame:gc,!0);let Ib;function DQ(){Ib=void 0}const il={now:()=>(Ib===void 0&&il.set($i.isProcessing||n0.useManualTiming?$i.timestamp:performance.now()),Ib),set:e=>{Ib=e,queueMicrotask(DQ)}},TB=e=>t=>typeof t=="string"&&t.startsWith(e),eT=TB("--"),OQ=TB("var(--"),tT=e=>OQ(e)?IQ.test(e.split("/*")[0].trim()):!1,IQ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,r1={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},lv={...r1,transform:e=>r0(0,1,e)},Bw={...r1,default:1},Ry=e=>Math.round(e*1e5)/1e5,rT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function RQ(e){return e==null}const LQ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,nT=(e,t)=>r=>!!(typeof r=="string"&&LQ.test(r)&&r.startsWith(e)||t&&!RQ(r)&&Object.prototype.hasOwnProperty.call(r,t)),CB=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,a,i,o]=n.match(rT);return{[e]:parseFloat(s),[t]:parseFloat(a),[r]:parseFloat(i),alpha:o!==void 0?parseFloat(o):1}},BQ=e=>r0(0,255,e),T5={...r1,transform:e=>Math.round(BQ(e))},Vh={test:nT("rgb","red"),parse:CB("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+T5.transform(e)+", "+T5.transform(t)+", "+T5.transform(r)+", "+Ry(lv.transform(n))+")"};function $Q(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Tk={test:nT("#"),parse:$Q,transform:Vh.transform},e2=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),mf=e2("deg"),Vu=e2("%"),en=e2("px"),zQ=e2("vh"),UQ=e2("vw"),K9={...Vu,parse:e=>Vu.parse(e)/100,transform:e=>Vu.transform(e*100)},up={test:nT("hsl","hue"),parse:CB("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Vu.transform(Ry(t))+", "+Vu.transform(Ry(r))+", "+Ry(lv.transform(n))+")"},Ba={test:e=>Vh.test(e)||Tk.test(e)||up.test(e),parse:e=>Vh.test(e)?Vh.parse(e):up.test(e)?up.parse(e):Tk.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Vh.transform(e):up.transform(e),getAnimatableNone:e=>{const t=Ba.parse(e);return t.alpha=0,Ba.transform(t)}},WQ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function HQ(e){return isNaN(e)&&typeof e=="string"&&(e.match(rT)?.length||0)+(e.match(WQ)?.length||0)>0}const EB="number",NB="color",GQ="var",VQ="var(",Y9="${}",qQ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function cv(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let a=0;const o=t.replace(qQ,l=>(Ba.test(l)?(n.color.push(a),s.push(NB),r.push(Ba.parse(l))):l.startsWith(VQ)?(n.var.push(a),s.push(GQ),r.push(l)):(n.number.push(a),s.push(EB),r.push(parseFloat(l))),++a,Y9)).split(Y9);return{values:r,split:o,indexes:n,types:s}}function AB(e){return cv(e).values}function jB(e){const{split:t,types:r}=cv(e),n=t.length;return s=>{let a="";for(let i=0;i<n;i++)if(a+=t[i],s[i]!==void 0){const o=r[i];o===EB?a+=Ry(s[i]):o===NB?a+=Ba.transform(s[i]):a+=s[i]}return a}}const KQ=e=>typeof e=="number"?0:Ba.test(e)?Ba.getAnimatableNone(e):e;function YQ(e){const t=AB(e);return jB(e)(t.map(KQ))}const Ff={test:HQ,parse:AB,createTransformer:jB,getAnimatableNone:YQ};function C5(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function XQ({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,a=0,i=0;if(!t)s=a=i=r;else{const o=r<.5?r*(1+t):r+t-r*t,l=2*r-o;s=C5(l,o,e+1/3),a=C5(l,o,e),i=C5(l,o,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(i*255),alpha:n}}function Qb(e,t){return r=>r>0?t:e}const Ks=(e,t,r)=>e+(t-e)*r,E5=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},JQ=[Tk,Vh,up],QQ=e=>JQ.find(t=>t.test(e));function X9(e){const t=QQ(e);if(!t)return!1;let r=t.parse(e);return t===up&&(r=XQ(r)),r}const J9=(e,t)=>{const r=X9(e),n=X9(t);if(!r||!n)return Qb(e,t);const s={...r};return a=>(s.red=E5(r.red,n.red,a),s.green=E5(r.green,n.green,a),s.blue=E5(r.blue,n.blue,a),s.alpha=Ks(r.alpha,n.alpha,a),Vh.transform(s))},Ck=new Set(["none","hidden"]);function ZQ(e,t){return Ck.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function eZ(e,t){return r=>Ks(e,t,r)}function sT(e){return typeof e=="number"?eZ:typeof e=="string"?tT(e)?Qb:Ba.test(e)?J9:nZ:Array.isArray(e)?PB:typeof e=="object"?Ba.test(e)?J9:tZ:Qb}function PB(e,t){const r=[...e],n=r.length,s=e.map((a,i)=>sT(a)(a,t[i]));return a=>{for(let i=0;i<n;i++)r[i]=s[i](a);return r}}function tZ(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=sT(e[s])(e[s],t[s]));return s=>{for(const a in n)r[a]=n[a](s);return r}}function rZ(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],i=e.indexes[a][n[a]],o=e.values[i]??0;r[s]=o,n[a]++}return r}const nZ=(e,t)=>{const r=Ff.createTransformer(t),n=cv(e),s=cv(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?Ck.has(e)&&!s.values.length||Ck.has(t)&&!n.values.length?ZQ(e,t):Qv(PB(rZ(n,s),s.values),r):Qb(e,t)};function MB(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Ks(e,t,r):sT(e)(e,t)}const sZ=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Ls.update(t,r),stop:()=>Mf(t),now:()=>$i.isProcessing?$i.timestamp:il.now()}},FB=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let a=0;a<s;a++)n+=Math.round(e(a/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Zb=2e4;function aT(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<Zb;)t+=r,n=e.next(t);return t>=Zb?1/0:t}function aZ(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(aT(n),Zb);return{type:"keyframes",ease:a=>n.next(s*a).value/t,duration:Gu(s)}}const iZ=5;function DB(e,t,r){const n=Math.max(t-iZ,0);return hB(r-e(n),t-n)}const ia={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},N5=.001;function oZ({duration:e=ia.duration,bounce:t=ia.bounce,velocity:r=ia.velocity,mass:n=ia.mass}){let s,a,i=1-t;i=r0(ia.minDamping,ia.maxDamping,i),e=r0(ia.minDuration,ia.maxDuration,Gu(e)),i<1?(s=u=>{const d=u*i,f=d*e,h=d-r,g=Ek(u,i),x=Math.exp(-f);return N5-h/g*x},a=u=>{const f=u*i*e,h=f*r+r,g=Math.pow(i,2)*Math.pow(u,2)*e,x=Math.exp(-f),y=Ek(Math.pow(u,2),i);return(-s(u)+N5>0?-1:1)*((h-g)*x)/y}):(s=u=>{const d=Math.exp(-u*e),f=(u-r)*e+1;return-N5+d*f},a=u=>{const d=Math.exp(-u*e),f=(r-u)*(e*e);return d*f});const o=5/e,l=cZ(s,a,o);if(e=Hu(e),isNaN(l))return{stiffness:ia.stiffness,damping:ia.damping,duration:e};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:i*2*Math.sqrt(n*u),duration:e}}}const lZ=12;function cZ(e,t,r){let n=r;for(let s=1;s<lZ;s++)n=n-e(n)/t(n);return n}function Ek(e,t){return e*Math.sqrt(1-t*t)}const uZ=["duration","bounce"],dZ=["stiffness","damping","mass"];function Q9(e,t){return t.some(r=>e[r]!==void 0)}function fZ(e){let t={velocity:ia.velocity,stiffness:ia.stiffness,damping:ia.damping,mass:ia.mass,isResolvedFromDuration:!1,...e};if(!Q9(e,dZ)&&Q9(e,uZ))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,a=2*r0(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:ia.mass,stiffness:s,damping:a}}else{const r=oZ(e);t={...t,...r,mass:ia.mass},t.isResolvedFromDuration=!0}return t}function e4(e=ia.visualDuration,t=ia.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const a=r.keyframes[0],i=r.keyframes[r.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:d,duration:f,velocity:h,isResolvedFromDuration:g}=fZ({...r,velocity:-Gu(r.velocity||0)}),x=h||0,y=u/(2*Math.sqrt(l*d)),v=i-a,T=Gu(Math.sqrt(l/d)),k=Math.abs(v)<5;n||(n=k?ia.restSpeed.granular:ia.restSpeed.default),s||(s=k?ia.restDelta.granular:ia.restDelta.default);let b;if(y<1){const E=Ek(T,y);b=P=>{const M=Math.exp(-y*T*P);return i-M*((x+y*T*v)/E*Math.sin(E*P)+v*Math.cos(E*P))}}else if(y===1)b=E=>i-Math.exp(-T*E)*(v+(x+T*v)*E);else{const E=T*Math.sqrt(y*y-1);b=P=>{const M=Math.exp(-y*T*P),j=Math.min(E*P,300);return i-M*((x+y*T*v)*Math.sinh(j)+E*v*Math.cosh(j))/E}}const N={calculatedDuration:g&&f||null,next:E=>{const P=b(E);if(g)o.done=E>=f;else{let M=E===0?x:0;y<1&&(M=E===0?Hu(x):DB(b,E,P));const j=Math.abs(M)<=n,A=Math.abs(i-P)<=s;o.done=j&&A}return o.value=o.done?i:P,o},toString:()=>{const E=Math.min(aT(N),Zb),P=FB(M=>N.next(E*M).value,E,30);return E+"ms "+P},toTransition:()=>{}};return N}e4.applyToOptions=e=>{const t=aZ(e,100,e4);return e.ease=t.ease,e.duration=Hu(t.duration),e.type="keyframes",e};function Nk({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:o,max:l,restDelta:u=.5,restSpeed:d}){const f=e[0],h={done:!1,value:f},g=j=>o!==void 0&&j<o||l!==void 0&&j>l,x=j=>o===void 0?l:l===void 0||Math.abs(o-j)<Math.abs(l-j)?o:l;let y=r*t;const v=f+y,T=i===void 0?v:i(v);T!==v&&(y=T-f);const k=j=>-y*Math.exp(-j/n),b=j=>T+k(j),N=j=>{const A=k(j),O=b(j);h.done=Math.abs(A)<=u,h.value=h.done?T:O};let E,P;const M=j=>{g(h.value)&&(E=j,P=e4({keyframes:[h.value,x(h.value)],velocity:DB(b,j,h.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return M(0),{calculatedDuration:null,next:j=>{let A=!1;return!P&&E===void 0&&(A=!0,N(j),M(j)),E!==void 0&&j>=E?P.next(j-E):(!A&&N(j),h)}}}function hZ(e,t,r){const n=[],s=r||n0.mix||MB,a=e.length-1;for(let i=0;i<a;i++){let o=s(e[i],e[i+1]);if(t){const l=Array.isArray(t)?t[i]||gc:t;o=Qv(l,o)}n.push(o)}return n}function mZ(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const a=e.length;if(Y7(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=hZ(t,n,s),l=o.length,u=d=>{if(i&&d<e[0])return t[0];let f=0;if(l>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const h=ov(e[f],e[f+1],d);return o[f](h)};return r?d=>u(r0(e[0],e[a-1],d)):u}function gZ(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=ov(0,t,n);e.push(Ks(r,1,s))}}function pZ(e){const t=[0];return gZ(t,e.length-1),t}function xZ(e,t){return e.map(r=>r*t)}function yZ(e,t){return e.map(()=>t||_B).splice(0,e.length-1)}function Ly({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=AQ(n)?n.map(q9):q9(n),a={done:!1,value:t[0]},i=xZ(r&&r.length===t.length?r:pZ(t),e),o=mZ(i,t,{ease:Array.isArray(s)?s:yZ(t,s)});return{calculatedDuration:e,next:l=>(a.value=o(l),a.done=l>=e,a)}}const vZ=e=>e!==null;function iT(e,{repeat:t,repeatType:r="loop"},n,s=1){const a=e.filter(vZ),o=s<0||t&&r!=="loop"&&t%2===1?0:a.length-1;return!o||n===void 0?a[o]:n}const wZ={decay:Nk,inertia:Nk,tween:Ly,keyframes:Ly,spring:e4};function OB(e){typeof e.type=="string"&&(e.type=wZ[e.type])}class oT{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const bZ=e=>e/100;class lT extends oT{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==il.now()&&this.tick(il.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;OB(t);const{type:r=Ly,repeat:n=0,repeatDelay:s=0,repeatType:a,velocity:i=0}=t;let{keyframes:o}=t;const l=r||Ly;l!==Ly&&typeof o[0]!="number"&&(this.mixKeyframes=Qv(bZ,MB(o[0],o[1])),o=[0,100]);const u=l({...t,keyframes:o});a==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=aT(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=u}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:a,mirroredGenerator:i,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:f,repeatType:h,repeatDelay:g,type:x,onUpdate:y,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const T=this.currentTime-u*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?T<0:T>s;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let b=this.currentTime,N=n;if(f){const j=Math.min(this.currentTime,s)/o;let A=Math.floor(j),O=j%1;!O&&j>=1&&(O=1),O===1&&A--,A=Math.min(A,f+1),!!(A%2)&&(h==="reverse"?(O=1-O,g&&(O-=g/o)):h==="mirror"&&(N=i)),b=r0(0,1,O)*o}const E=k?{done:!1,value:d[0]}:N.next(b);a&&(E.value=a(E.value));let{done:P}=E;!k&&l!==null&&(P=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return M&&x!==Nk&&(E.value=iT(d,this.options,v,this.speed)),y&&y(E.value),M&&this.finish(),E}then(t,r){return this.finished.then(t,r)}get duration(){return Gu(this.calculatedDuration)}get time(){return Gu(this.currentTime)}set time(t){t=Hu(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(il.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Gu(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=sZ,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(il.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function _Z(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const qh=e=>e*180/Math.PI,Ak=e=>{const t=qh(Math.atan2(e[1],e[0]));return jk(t)},SZ={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Ak,rotateZ:Ak,skewX:e=>qh(Math.atan(e[1])),skewY:e=>qh(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},jk=e=>(e=e%360,e<0&&(e+=360),e),Z9=Ak,eA=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),tA=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),kZ={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:eA,scaleY:tA,scale:e=>(eA(e)+tA(e))/2,rotateX:e=>jk(qh(Math.atan2(e[6],e[5]))),rotateY:e=>jk(qh(Math.atan2(-e[2],e[0]))),rotateZ:Z9,rotate:Z9,skewX:e=>qh(Math.atan(e[4])),skewY:e=>qh(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Pk(e){return e.includes("scale")?1:0}function Mk(e,t){if(!e||e==="none")return Pk(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=kZ,s=r;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=SZ,s=o}if(!s)return Pk(t);const a=n[t],i=s[1].split(",").map(CZ);return typeof a=="function"?a(i):i[a]}const TZ=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return Mk(r,t)};function CZ(e){return parseFloat(e.trim())}const n1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],s1=new Set(n1),rA=e=>e===r1||e===en,EZ=new Set(["x","y","z"]),NZ=n1.filter(e=>!EZ.has(e));function AZ(e){const t=[];return NZ.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const rm={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Mk(t,"x"),y:(e,{transform:t})=>Mk(t,"y")};rm.translateX=rm.x;rm.translateY=rm.y;const nm=new Set;let Fk=!1,Dk=!1,Ok=!1;function IB(){if(Dk){const e=Array.from(nm).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=AZ(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([a,i])=>{n.getValue(a)?.set(i)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Dk=!1,Fk=!1,nm.forEach(e=>e.complete(Ok)),nm.clear()}function RB(){nm.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Dk=!0)})}function jZ(){Ok=!0,RB(),IB(),Ok=!1}class cT{constructor(t,r,n,s,a,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=a,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(nm.add(this),Fk||(Fk=!0,Ls.read(RB),Ls.resolveKeyframes(IB))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const a=s?.get(),i=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&r){const o=n.readValue(r,i);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=i),s&&a===void 0&&s.set(t[0])}_Z(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),nm.delete(this)}cancel(){this.state==="scheduled"&&(nm.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const PZ=e=>e.startsWith("--");function MZ(e,t,r){PZ(t)?e.style.setProperty(t,r):e.style[t]=r}const FZ=X7(()=>window.ScrollTimeline!==void 0),DZ={};function OZ(e,t){const r=X7(e);return()=>DZ[t]??r()}const LB=OZ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ey=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,nA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ey([0,.65,.55,1]),circOut:Ey([.55,0,1,.45]),backIn:Ey([.31,.01,.66,-.59]),backOut:Ey([.33,1.53,.69,.99])};function BB(e,t){if(e)return typeof e=="function"?LB()?FB(e,t):"ease-out":SB(e)?Ey(e):Array.isArray(e)?e.map(r=>BB(r,t)||nA.easeOut):nA[e]}function IZ(e,t,r,{delay:n=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:l}={},u=void 0){const d={[t]:r};l&&(d.offset=l);const f=BB(o,s);Array.isArray(f)&&(d.easing=f);const h={delay:n,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:i==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),e.animate(d,h)}function $B(e){return typeof e=="function"&&"applyToOptions"in e}function RZ({type:e,...t}){return $B(e)&&LB()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class LZ extends oT{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:a,allowFlatten:i=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!a,this.allowFlatten=i,this.options=t,Y7(typeof t.type!="string");const u=RZ(t);this.animation=IZ(r,n,s,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=iT(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):MZ(r,n,d),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Gu(Number(t))}get time(){return Gu(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Hu(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&FZ()?(this.animation.timeline=t,gc):r(this)}}const zB={anticipate:vB,backInOut:yB,circInOut:bB};function BZ(e){return e in zB}function $Z(e){typeof e.ease=="string"&&BZ(e.ease)&&(e.ease=zB[e.ease])}const sA=10;class zZ extends LZ{constructor(t){$Z(t),OB(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:a,...i}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const o=new lT({...i,autoplay:!1}),l=Hu(this.finishedTime??this.time);r.setWithVelocity(o.sample(l-sA).value,o.sample(l).value,sA),o.stop()}}const aA=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ff.test(e)||e==="0")&&!e.startsWith("url("));function UZ(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function WZ(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],i=aA(s,t),o=aA(a,t);return!i||!o?!1:UZ(e)||(r==="spring"||$B(r))&&n}function Ik(e){e.duration=0,e.type}const HZ=new Set(["opacity","clipPath","filter","transform"]),GZ=X7(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function VZ(e){const{motionValue:t,name:r,repeatDelay:n,repeatType:s,damping:a,type:i}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return GZ()&&r&&HZ.has(r)&&(r!=="transform"||!u)&&!l&&!n&&s!=="mirror"&&a!==0&&i!=="inertia"}const qZ=40;class KZ extends oT{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:i="loop",keyframes:o,name:l,motionValue:u,element:d,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=il.now();const h={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:a,repeatType:i,name:l,motionValue:u,element:d,...f},g=d?.KeyframeResolver||cT;this.keyframeResolver=new g(o,(x,y,v)=>this.onKeyframesResolved(x,y,h,!v),l,u,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:a,type:i,velocity:o,delay:l,isHandoff:u,onUpdate:d}=n;this.resolvedAt=il.now(),WZ(t,a,i,o)||((n0.instantAnimations||!l)&&d?.(iT(t,n,r)),t[0]=t[t.length-1],Ik(n),n.repeat=0);const h={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>qZ?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},g=!u&&VZ(h)?new zZ({...h,element:h.motionValue.owner.current}):new lT(h);g.finished.then(()=>this.notifyFinished()).catch(gc),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),jZ()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const YZ=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function XZ(e){const t=YZ.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function UB(e,t,r=1){const[n,s]=XZ(e);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const i=a.trim();return uB(i)?parseFloat(i):i}return tT(s)?UB(s,t,r+1):s}function uT(e,t){return e?.[t]??e?.default??e}const WB=new Set(["width","height","top","left","right","bottom",...n1]),JZ={test:e=>e==="auto",parse:e=>e},HB=e=>t=>t.test(e),GB=[r1,en,Vu,mf,UQ,zQ,JZ],iA=e=>GB.find(HB(e));function QZ(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||fB(e):!0}const ZZ=new Set(["brightness","contrast","saturate","opacity"]);function eee(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(rT)||[];if(!n)return e;const s=r.replace(n,"");let a=ZZ.has(t)?1:0;return n!==r&&(a*=100),t+"("+a+s+")"}const tee=/\b([a-z-]*)\(.*?\)/gu,Rk={...Ff,getAnimatableNone:e=>{const t=e.match(tee);return t?t.map(eee).join(" "):e}},oA={...r1,transform:Math.round},ree={rotate:mf,rotateX:mf,rotateY:mf,rotateZ:mf,scale:Bw,scaleX:Bw,scaleY:Bw,scaleZ:Bw,skew:mf,skewX:mf,skewY:mf,distance:en,translateX:en,translateY:en,translateZ:en,x:en,y:en,z:en,perspective:en,transformPerspective:en,opacity:lv,originX:K9,originY:K9,originZ:en},dT={borderWidth:en,borderTopWidth:en,borderRightWidth:en,borderBottomWidth:en,borderLeftWidth:en,borderRadius:en,radius:en,borderTopLeftRadius:en,borderTopRightRadius:en,borderBottomRightRadius:en,borderBottomLeftRadius:en,width:en,maxWidth:en,height:en,maxHeight:en,top:en,right:en,bottom:en,left:en,padding:en,paddingTop:en,paddingRight:en,paddingBottom:en,paddingLeft:en,margin:en,marginTop:en,marginRight:en,marginBottom:en,marginLeft:en,backgroundPositionX:en,backgroundPositionY:en,...ree,zIndex:oA,fillOpacity:lv,strokeOpacity:lv,numOctaves:oA},nee={...dT,color:Ba,backgroundColor:Ba,outlineColor:Ba,fill:Ba,stroke:Ba,borderColor:Ba,borderTopColor:Ba,borderRightColor:Ba,borderBottomColor:Ba,borderLeftColor:Ba,filter:Rk,WebkitFilter:Rk},VB=e=>nee[e];function qB(e,t){let r=VB(e);return r!==Rk&&(r=Ff),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const see=new Set(["auto","none","0"]);function aee(e,t,r){let n=0,s;for(;n<e.length&&!s;){const a=e[n];typeof a=="string"&&!see.has(a)&&cv(a).values.length&&(s=e[n]),n++}if(s&&r)for(const a of t)e[a]=qB(r,s)}class iee extends cT{constructor(t,r,n,s,a){super(t,r,n,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),tT(u))){const d=UB(u,r.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!WB.has(n)||t.length!==2)return;const[s,a]=t,i=iA(s),o=iA(a);if(i!==o)if(rA(i)&&rA(o))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else rm[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||QZ(t[s]))&&n.push(s);n.length&&aee(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=rm[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=n.length-1,i=n[a];n[a]=rm[r](t.measureViewportBox(),window.getComputedStyle(t.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,l])=>{t.getValue(o).set(l)}),this.resolveNoneKeyframes()}}function oee(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const s=r?.[e]??n.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const KB=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function YB(e){return dB(e)&&"offsetHeight"in e}const lA=30,lee=e=>!isNaN(parseFloat(e));class cee{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const s=il.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=il.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=lee(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new J7);const n=this.events[t].add(r);return t==="change"?()=>{n(),Ls.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=il.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>lA)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,lA);return hB(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Op(e,t){return new cee(e,t)}const{schedule:fT}=kB(queueMicrotask,!1),qc={x:!1,y:!1};function XB(){return qc.x||qc.y}function uee(e){return e==="x"||e==="y"?qc[e]?null:(qc[e]=!0,()=>{qc[e]=!1}):qc.x||qc.y?null:(qc.x=qc.y=!0,()=>{qc.x=qc.y=!1})}function JB(e,t){const r=oee(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function cA(e){return!(e.pointerType==="touch"||XB())}function dee(e,t,r={}){const[n,s,a]=JB(e,r),i=o=>{if(!cA(o))return;const{target:l}=o,u=t(l,o);if(typeof u!="function"||!l)return;const d=f=>{cA(f)&&(u(f),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,s)};return n.forEach(o=>{o.addEventListener("pointerenter",i,s)}),a}const QB=(e,t)=>t?e===t?!0:QB(e,t.parentElement):!1,hT=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,fee=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function hee(e){return fee.has(e.tagName)||e.tabIndex!==-1}const Rb=new WeakSet;function uA(e){return t=>{t.key==="Enter"&&e(t)}}function A5(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const mee=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=uA(()=>{if(Rb.has(r))return;A5(r,"down");const s=uA(()=>{A5(r,"up")}),a=()=>A5(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",a,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function dA(e){return hT(e)&&!XB()}function gee(e,t,r={}){const[n,s,a]=JB(e,r),i=o=>{const l=o.currentTarget;if(!dA(o))return;Rb.add(l);const u=t(l,o),d=(g,x)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),Rb.has(l)&&Rb.delete(l),dA(g)&&typeof u=="function"&&u(g,{success:x})},f=g=>{d(g,l===window||l===document||r.useGlobalTarget||QB(l,g.target))},h=g=>{d(g,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",h,s)};return n.forEach(o=>{(r.useGlobalTarget?window:o).addEventListener("pointerdown",i,s),YB(o)&&(o.addEventListener("focus",u=>mee(u,s)),!hee(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function ZB(e){return dB(e)&&"ownerSVGElement"in e}function pee(e){return ZB(e)&&e.tagName==="svg"}const mo=e=>!!(e&&e.getVelocity),xee=[...GB,Ba,Ff],yee=e=>xee.find(HB(e)),mT=S.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class vee extends S.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=YB(n)&&n.offsetWidth||0,a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function wee({children:e,isPresent:t,anchorX:r,root:n}){const s=S.useId(),a=S.useRef(null),i=S.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=S.useContext(mT);return S.useInsertionEffect(()=>{const{width:l,height:u,top:d,left:f,right:h}=i.current;if(t||!a.current||!l||!u)return;const g=r==="left"?`left: ${f}`:`right: ${h}`;a.current.dataset.motionPopId=s;const x=document.createElement("style");o&&(x.nonce=o);const y=n??document.head;return y.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            ${g}px !important;
            top: ${d}px !important;
          }
        `),()=>{y.contains(x)&&y.removeChild(x)}},[t]),c.jsx(vee,{isPresent:t,childRef:a,sizeRef:i,children:S.cloneElement(e,{ref:a})})}const bee=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:a,mode:i,anchorX:o,root:l})=>{const u=G7(_ee),d=S.useId();let f=!0,h=S.useMemo(()=>(f=!1,{id:d,initial:t,isPresent:r,custom:s,onExitComplete:g=>{u.set(g,!0);for(const x of u.values())if(!x)return;n&&n()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[r,u,n]);return a&&f&&(h={...h}),S.useMemo(()=>{u.forEach((g,x)=>u.set(x,!1))},[r]),S.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),i==="popLayout"&&(e=c.jsx(wee,{isPresent:r,anchorX:o,root:l,children:e})),c.jsx(C_.Provider,{value:h,children:e})};function _ee(){return new Map}function e$(e=!0){const t=S.useContext(C_);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,a=S.useId();S.useEffect(()=>{if(e)return s(a)},[e]);const i=S.useCallback(()=>e&&n&&n(a),[a,n,e]);return!r&&n?[!1,i]:[!0]}const $w=e=>e.key||"";function fA(e){const t=[];return S.Children.forEach(e,r=>{S.isValidElement(r)&&t.push(r)}),t}const al=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1,anchorX:o="left",root:l})=>{const[u,d]=e$(i),f=S.useMemo(()=>fA(e),[e]),h=i&&!u?[]:f.map($w),g=S.useRef(!0),x=S.useRef(f),y=G7(()=>new Map),[v,T]=S.useState(f),[k,b]=S.useState(f);cB(()=>{g.current=!1,x.current=f;for(let P=0;P<k.length;P++){const M=$w(k[P]);h.includes(M)?y.delete(M):y.get(M)!==!0&&y.set(M,!1)}},[k,h.length,h.join("-")]);const N=[];if(f!==v){let P=[...f];for(let M=0;M<k.length;M++){const j=k[M],A=$w(j);h.includes(A)||(P.splice(M,0,j),N.push(j))}return a==="wait"&&N.length&&(P=N),b(fA(P)),T(f),null}const{forceRender:E}=S.useContext(H7);return c.jsx(c.Fragment,{children:k.map(P=>{const M=$w(P),j=i&&!u?!1:f===k||h.includes(M),A=()=>{if(y.has(M))y.set(M,!0);else return;let O=!0;y.forEach(L=>{L||(O=!1)}),O&&(E?.(),b(x.current),i&&d?.(),n&&n())};return c.jsx(bee,{isPresent:j,initial:!g.current||r?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,root:l,onExitComplete:j?void 0:A,anchorX:o,children:P},M)})})},t$=S.createContext({strict:!1}),hA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ip={};for(const e in hA)Ip[e]={isEnabled:t=>hA[e].some(r=>!!t[r])};function See(e){for(const t in e)Ip[t]={...Ip[t],...e[t]}}const kee=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function t4(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||kee.has(e)}let r$=e=>!t4(e);function Tee(e){typeof e=="function"&&(r$=t=>t.startsWith("on")?!t4(t):e(t))}try{Tee(require("@emotion/is-prop-valid").default)}catch{}function Cee(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(r$(s)||r===!0&&t4(s)||!t&&!t4(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const E_=S.createContext({});function N_(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function uv(e){return typeof e=="string"||Array.isArray(e)}const gT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pT=["initial",...gT];function A_(e){return N_(e.animate)||pT.some(t=>uv(e[t]))}function n$(e){return!!(A_(e)||e.variants)}function Eee(e,t){if(A_(e)){const{initial:r,animate:n}=e;return{initial:r===!1||uv(r)?r:void 0,animate:uv(n)?n:void 0}}return e.inherit!==!1?t:{}}function Nee(e){const{initial:t,animate:r}=Eee(e,S.useContext(E_));return S.useMemo(()=>({initial:t,animate:r}),[mA(t),mA(r)])}function mA(e){return Array.isArray(e)?e.join(" "):e}const dv={};function Aee(e){for(const t in e)dv[t]=e[t],eT(t)&&(dv[t].isCSSVariable=!0)}function s$(e,{layout:t,layoutId:r}){return s1.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!dv[e]||e==="opacity")}const jee={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Pee=n1.length;function Mee(e,t,r){let n="",s=!0;for(let a=0;a<Pee;a++){const i=n1[a],o=e[i];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(i.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||r){const u=KB(o,dT[i]);if(!l){s=!1;const d=jee[i]||i;n+=`${d}(${u}) `}r&&(t[i]=u)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function xT(e,t,r){const{style:n,vars:s,transformOrigin:a}=e;let i=!1,o=!1;for(const l in t){const u=t[l];if(s1.has(l)){i=!0;continue}else if(eT(l)){s[l]=u;continue}else{const d=KB(u,dT[l]);l.startsWith("origin")?(o=!0,a[l]=d):n[l]=d}}if(t.transform||(i||r?n.transform=Mee(t,e.transform,r):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:d=0}=a;n.transformOrigin=`${l} ${u} ${d}`}}const yT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function a$(e,t,r){for(const n in t)!mo(t[n])&&!s$(n,r)&&(e[n]=t[n])}function Fee({transformTemplate:e},t){return S.useMemo(()=>{const r=yT();return xT(r,t,e),Object.assign({},r.vars,r.style)},[t])}function Dee(e,t){const r=e.style||{},n={};return a$(n,r,e),Object.assign(n,Fee(e,t)),n}function Oee(e,t){const r={},n=Dee(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const Iee={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ree={offset:"strokeDashoffset",array:"strokeDasharray"};function Lee(e,t,r=1,n=0,s=!0){e.pathLength=1;const a=s?Iee:Ree;e[a.offset]=en.transform(-n);const i=en.transform(t),o=en.transform(r);e[a.array]=`${i} ${o}`}function i$(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:a=1,pathOffset:i=0,...o},l,u,d){if(xT(e,o,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:h}=e;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=d?.transformBox??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),s!==void 0&&Lee(f,s,a,i,!1)}const o$=()=>({...yT(),attrs:{}}),l$=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Bee(e,t,r,n){const s=S.useMemo(()=>{const a=o$();return i$(a,t,l$(n),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};a$(a,e.style,e),s.style={...a,...s.style}}return s}const $ee=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function vT(e){return typeof e!="string"||e.includes("-")?!1:!!($ee.indexOf(e)>-1||/[A-Z]/u.test(e))}function zee(e,t,r,{latestValues:n},s,a=!1){const o=(vT(e)?Bee:Oee)(t,n,s,e),l=Cee(t,typeof e=="string",a),u=e!==S.Fragment?{...l,...o,ref:r}:{},{children:d}=t,f=S.useMemo(()=>mo(d)?d.get():d,[d]);return S.createElement(e,{...u,children:f})}function gA(e){const t=[{},{}];return e?.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function wT(e,t,r,n){if(typeof t=="function"){const[s,a]=gA(n);t=t(r!==void 0?r:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=gA(n);t=t(r!==void 0?r:e.custom,s,a)}return t}function Lb(e){return mo(e)?e.get():e}function Uee({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:Wee(r,n,s,e),renderState:t()}}function Wee(e,t,r,n){const s={},a=n(e,{});for(const h in a)s[h]=Lb(a[h]);let{initial:i,animate:o}=e;const l=A_(e),u=n$(e);t&&u&&!l&&e.inherit!==!1&&(i===void 0&&(i=t.initial),o===void 0&&(o=t.animate));let d=r?r.initial===!1:!1;d=d||i===!1;const f=d?o:i;if(f&&typeof f!="boolean"&&!N_(f)){const h=Array.isArray(f)?f:[f];for(let g=0;g<h.length;g++){const x=wT(e,h[g]);if(x){const{transitionEnd:y,transition:v,...T}=x;for(const k in T){let b=T[k];if(Array.isArray(b)){const N=d?b.length-1:0;b=b[N]}b!==null&&(s[k]=b)}for(const k in y)s[k]=y[k]}}}return s}const c$=e=>(t,r)=>{const n=S.useContext(E_),s=S.useContext(C_),a=()=>Uee(e,t,n,s);return r?a():G7(a)};function bT(e,t,r){const{style:n}=e,s={};for(const a in n)(mo(n[a])||t.style&&mo(t.style[a])||s$(a,e)||r?.getValue(a)?.liveStyle!==void 0)&&(s[a]=n[a]);return s}const Hee=c$({scrapeMotionValuesFromProps:bT,createRenderState:yT});function u$(e,t,r){const n=bT(e,t,r);for(const s in e)if(mo(e[s])||mo(t[s])){const a=n1.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[a]=e[s]}return n}const Gee=c$({scrapeMotionValuesFromProps:u$,createRenderState:o$}),Vee=Symbol.for("motionComponentSymbol");function dp(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function qee(e,t,r){return S.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):dp(r)&&(r.current=n))},[t])}const _T=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Kee="framerAppearId",d$="data-"+_T(Kee),f$=S.createContext({});function Yee(e,t,r,n,s){const{visualElement:a}=S.useContext(E_),i=S.useContext(t$),o=S.useContext(C_),l=S.useContext(mT).reducedMotion,u=S.useRef(null);n=n||i.renderer,!u.current&&n&&(u.current=n(e,{visualState:t,parent:a,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=u.current,f=S.useContext(f$);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&Xee(u.current,r,s,f);const h=S.useRef(!1);S.useInsertionEffect(()=>{d&&h.current&&d.update(r,o)});const g=r[d$],x=S.useRef(!!g&&!window.MotionHandoffIsComplete?.(g)&&window.MotionHasOptimisedAnimation?.(g));return cB(()=>{d&&(h.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),x.current&&d.animationState&&d.animationState.animateChanges())}),S.useEffect(()=>{d&&(!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(g)}),x.current=!1),d.enteringChildren=void 0)}),d}function Xee(e,t,r,n){const{layoutId:s,layout:a,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:h$(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!i||o&&dp(o),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:l,layoutRoot:u})}function h$(e){if(e)return e.options.allowProjection!==!1?e.projection:h$(e.parent)}function j5(e,{forwardMotionProps:t=!1}={},r,n){r&&See(r);const s=vT(e)?Gee:Hee;function a(o,l){let u;const d={...S.useContext(mT),...o,layoutId:Jee(o)},{isStatic:f}=d,h=Nee(o),g=s(o,f);if(!f&&V7){Qee();const x=Zee(d);u=x.MeasureLayout,h.visualElement=Yee(e,g,d,n,x.ProjectionNode)}return c.jsxs(E_.Provider,{value:h,children:[u&&h.visualElement?c.jsx(u,{visualElement:h.visualElement,...d}):null,zee(e,o,qee(g,h.visualElement,l),g,f,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const i=S.forwardRef(a);return i[Vee]=e,i}function Jee({layoutId:e}){const t=S.useContext(H7).id;return t&&e!==void 0?t+"-"+e:e}function Qee(e,t){S.useContext(t$).strict}function Zee(e){const{drag:t,layout:r}=Ip;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function ete(e,t){if(typeof Proxy>"u")return j5;const r=new Map,n=(a,i)=>j5(a,i,e,t),s=(a,i)=>n(a,i);return new Proxy(s,{get:(a,i)=>i==="create"?n:(r.has(i)||r.set(i,j5(i,void 0,e,t)),r.get(i))})}function m$({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function tte({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function rte(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function P5(e){return e===void 0||e===1}function Lk({scale:e,scaleX:t,scaleY:r}){return!P5(e)||!P5(t)||!P5(r)}function $h(e){return Lk(e)||g$(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function g$(e){return pA(e.x)||pA(e.y)}function pA(e){return e&&e!=="0%"}function r4(e,t,r){const n=e-r,s=t*n;return r+s}function xA(e,t,r,n,s){return s!==void 0&&(e=r4(e,s,n)),r4(e,r,n)+t}function Bk(e,t=0,r=1,n,s){e.min=xA(e.min,t,r,n,s),e.max=xA(e.max,t,r,n,s)}function p$(e,{x:t,y:r}){Bk(e.x,t.translate,t.scale,t.originPoint),Bk(e.y,r.translate,r.scale,r.originPoint)}const yA=.999999999999,vA=1.0000000000001;function nte(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let a,i;for(let o=0;o<s;o++){a=r[o],i=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&hp(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,p$(e,i)),n&&$h(a.latestValues)&&hp(e,a.latestValues))}t.x<vA&&t.x>yA&&(t.x=1),t.y<vA&&t.y>yA&&(t.y=1)}function fp(e,t){e.min=e.min+t,e.max=e.max+t}function wA(e,t,r,n,s=.5){const a=Ks(e.min,e.max,s);Bk(e,t,r,a,n)}function hp(e,t){wA(e.x,t.x,t.scaleX,t.scale,t.originX),wA(e.y,t.y,t.scaleY,t.scale,t.originY)}function x$(e,t){return m$(rte(e.getBoundingClientRect(),t))}function ste(e,t,r){const n=x$(e,r),{scroll:s}=t;return s&&(fp(n.x,s.offset.x),fp(n.y,s.offset.y)),n}const bA=()=>({translate:0,scale:1,origin:0,originPoint:0}),mp=()=>({x:bA(),y:bA()}),_A=()=>({min:0,max:0}),Ca=()=>({x:_A(),y:_A()}),$k={current:null},y$={current:!1};function ate(){if(y$.current=!0,!!V7)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>$k.current=e.matches;e.addEventListener("change",t),t()}else $k.current=!1}const ite=new WeakMap;function ote(e,t,r){for(const n in t){const s=t[n],a=r[n];if(mo(s))e.addValue(n,s);else if(mo(a))e.addValue(n,Op(s,{owner:e}));else if(a!==s)if(e.hasValue(n)){const i=e.getValue(n);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=e.getStaticValue(n);e.addValue(n,Op(i!==void 0?i:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const SA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class lte{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=cT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=il.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Ls.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=A_(r),this.isVariantNode=n$(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const h in f){const g=f[h];l[h]!==void 0&&mo(g)&&g.set(l[h])}}mount(t){this.current=t,ite.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),y$.current||ate(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:$k.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Mf(this.notifyUpdate),Mf(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=s1.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&Ls.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ip){const r=Ip[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ca()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<SA.length;n++){const s=SA[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,i=t[a];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=ote(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Op(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(uB(n)||fB(n))?n=parseFloat(n):!yee(n)&&Ff.test(r)&&(n=qB(t,r)),this.setBaseTarget(t,mo(n)?n.get():n)),mo(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const a=wT(this.props,r,this.presenceContext?.custom);a&&(n=a[t])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!mo(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new J7),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){fT.render(this.render)}}class v$ extends lte{constructor(){super(...arguments),this.KeyframeResolver=iee}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;mo(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function w$(e,{style:t,vars:r},n,s){const a=e.style;let i;for(i in t)a[i]=t[i];s?.applyProjectionStyles(a,n);for(i in r)a.setProperty(i,r[i])}function cte(e){return window.getComputedStyle(e)}class ute extends v${constructor(){super(...arguments),this.type="html",this.renderInstance=w$}readValueFromInstance(t,r){if(s1.has(r))return this.projection?.isProjecting?Pk(r):TZ(t,r);{const n=cte(t),s=(eT(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return x$(t,r)}build(t,r,n){xT(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return bT(t,r,n)}}const b$=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function dte(e,t,r,n){w$(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(b$.has(s)?s:_T(s),t.attrs[s])}class fte extends v${constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ca}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(s1.has(r)){const n=VB(r);return n&&n.default||0}return r=b$.has(r)?r:_T(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return u$(t,r,n)}build(t,r,n){i$(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){dte(t,r,n,s)}mount(t){this.isSVGTag=l$(t.tagName),super.mount(t)}}const hte=(e,t)=>vT(e)?new fte(t):new ute(t,{allowProjection:e!==S.Fragment});function wp(e,t,r){const n=e.getProps();return wT(n,t,r!==void 0?r:n.custom,e)}const zk=e=>Array.isArray(e);function mte(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Op(r))}function gte(e){return zk(e)?e[e.length-1]||0:e}function pte(e,t){const r=wp(e,t);let{transitionEnd:n={},transition:s={},...a}=r||{};a={...a,...n};for(const i in a){const o=gte(a[i]);mte(e,i,o)}}function xte(e){return!!(mo(e)&&e.add)}function Uk(e,t){const r=e.getValue("willChange");if(xte(r))return r.add(t);if(!r&&n0.WillChange){const n=new n0.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function _$(e){return e.props[d$]}const yte=e=>e!==null;function vte(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(yte),a=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[a]}const wte={type:"spring",stiffness:500,damping:25,restSpeed:10},bte=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),_te={type:"keyframes",duration:.8},Ste={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kte=(e,{keyframes:t})=>t.length>2?_te:s1.has(e)?e.startsWith("scale")?bte(t[1]):wte:Ste;function Tte({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:o,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const ST=(e,t,r,n={},s,a)=>i=>{const o=uT(n,e)||{},l=o.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Hu(l);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:h=>{t.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:s};Tte(o)||Object.assign(d,kte(e,d)),d.duration&&(d.duration=Hu(d.duration)),d.repeatDelay&&(d.repeatDelay=Hu(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Ik(d),d.delay===0&&(f=!0)),(n0.instantAnimations||n0.skipAnimations)&&(f=!0,Ik(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,f&&!a&&t.get()!==void 0){const h=vte(d.keyframes,o);if(h!==void 0){Ls.update(()=>{d.onUpdate(h),d.onComplete()});return}}return o.isSync?new lT(d):new KZ(d)};function Cte({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function S$(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:i,...o}=t;n&&(a=n);const l=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in o){const f=e.getValue(d,e.latestValues[d]??null),h=o[d];if(h===void 0||u&&Cte(u,d))continue;const g={delay:r,...uT(a||{},d)},x=f.get();if(x!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===x&&!g.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const T=_$(e);if(T){const k=window.MotionHandoffAnimation(T,d,Ls);k!==null&&(g.startTime=k,y=!0)}}Uk(e,d),f.start(ST(d,f,h,e.shouldReduceMotion&&WB.has(d)?{type:!1}:g,e,y));const v=f.animation;v&&l.push(v)}return i&&Promise.all(l).then(()=>{Ls.update(()=>{i&&pte(e,i)})}),l}function k$(e,t,r,n=0,s=1){const a=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),i=e.size,o=(i-1)*n;return typeof r=="function"?r(a,i):s===1?a*n:o-a*n}function Wk(e,t,r={}){const n=wp(e,t,r.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const a=n?()=>Promise.all(S$(e,n,r)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=s;return Ete(e,t,l,u,d,f,r)}:()=>Promise.resolve(),{when:o}=s;if(o){const[l,u]=o==="beforeChildren"?[a,i]:[i,a];return l().then(()=>u())}else return Promise.all([a(),i(r.delay)])}function Ete(e,t,r=0,n=0,s=0,a=1,i){const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(Wk(l,t,{...i,delay:r+(typeof n=="function"?0:n)+k$(e.variantChildren,l,n,s,a)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}function Nte(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(a=>Wk(e,a,r));n=Promise.all(s)}else if(typeof t=="string")n=Wk(e,t,r);else{const s=typeof t=="function"?wp(e,t,r.custom):t;n=Promise.all(S$(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function T$(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const Ate=pT.length;function C$(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?C$(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<Ate;r++){const n=pT[r],s=e.props[n];(uv(s)||s===!1)&&(t[n]=s)}return t}const jte=[...gT].reverse(),Pte=gT.length;function Mte(e){return t=>Promise.all(t.map(({animation:r,options:n})=>Nte(e,r,n)))}function Fte(e){let t=Mte(e),r=kA(),n=!0;const s=l=>(u,d)=>{const f=wp(e,d,l==="exit"?e.presenceContext?.custom:void 0);if(f){const{transition:h,transitionEnd:g,...x}=f;u={...u,...x,...g}}return u};function a(l){t=l(e)}function i(l){const{props:u}=e,d=C$(e.parent)||{},f=[],h=new Set;let g={},x=1/0;for(let v=0;v<Pte;v++){const T=jte[v],k=r[T],b=u[T]!==void 0?u[T]:d[T],N=uv(b),E=T===l?k.isActive:null;E===!1&&(x=v);let P=b===d[T]&&b!==u[T]&&N;if(P&&n&&e.manuallyAnimateOnMount&&(P=!1),k.protectedKeys={...g},!k.isActive&&E===null||!b&&!k.prevProp||N_(b)||typeof b=="boolean")continue;const M=Dte(k.prevProp,b);let j=M||T===l&&k.isActive&&!P&&N||v>x&&N,A=!1;const O=Array.isArray(b)?b:[b];let L=O.reduce(s(T),{});E===!1&&(L={});const{prevResolvedValues:q={}}=k,Q={...q,...L},ae=B=>{j=!0,h.has(B)&&(A=!0,h.delete(B)),k.needsAnimating[B]=!0;const V=e.getValue(B);V&&(V.liveStyle=!1)};for(const B in Q){const V=L[B],R=q[B];if(g.hasOwnProperty(B))continue;let H=!1;zk(V)&&zk(R)?H=!T$(V,R):H=V!==R,H?V!=null?ae(B):h.add(B):V!==void 0&&h.has(B)?ae(B):k.protectedKeys[B]=!0}k.prevProp=b,k.prevResolvedValues=L,k.isActive&&(g={...g,...L}),n&&e.blockInitialAnimation&&(j=!1);const te=P&&M;j&&(!te||A)&&f.push(...O.map(B=>{const V={type:T};if(typeof B=="string"&&n&&!te&&e.manuallyAnimateOnMount&&e.parent){const{parent:R}=e,H=wp(R,B);if(R.enteringChildren&&H){const{delayChildren:U}=H.transition||{};V.delay=k$(R.enteringChildren,e,U)}}return{animation:B,options:V}}))}if(h.size){const v={};if(typeof u.initial!="boolean"){const T=wp(e,Array.isArray(u.initial)?u.initial[0]:u.initial);T&&T.transition&&(v.transition=T.transition)}h.forEach(T=>{const k=e.getBaseTarget(T),b=e.getValue(T);b&&(b.liveStyle=!0),v[T]=k??null}),f.push({animation:v})}let y=!!f.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(y=!1),n=!1,y?t(f):Promise.resolve()}function o(l,u){if(r[l].isActive===u)return Promise.resolve();e.variantChildren?.forEach(f=>f.animationState?.setActive(l,u)),r[l].isActive=u;const d=i(l);for(const f in r)r[f].protectedKeys={};return d}return{animateChanges:i,setActive:o,setAnimateFunction:a,getState:()=>r,reset:()=>{r=kA(),n=!0}}}function Dte(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!T$(t,e):!1}function Fh(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function kA(){return{animate:Fh(!0),whileInView:Fh(),whileHover:Fh(),whileTap:Fh(),whileDrag:Fh(),whileFocus:Fh(),exit:Fh()}}class Gf{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Ote extends Gf{constructor(t){super(t),t.animationState||(t.animationState=Fte(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();N_(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Ite=0;class Rte extends Gf{constructor(){super(...arguments),this.id=Ite++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Lte={animation:{Feature:Ote},exit:{Feature:Rte}};function fv(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function t2(e){return{point:{x:e.pageX,y:e.pageY}}}const Bte=e=>t=>hT(t)&&e(t,t2(t));function By(e,t,r,n){return fv(e,t,Bte(r),n)}const E$=1e-4,$te=1-E$,zte=1+E$,N$=.01,Ute=0-N$,Wte=0+N$;function Ro(e){return e.max-e.min}function Hte(e,t,r){return Math.abs(e-t)<=r}function TA(e,t,r,n=.5){e.origin=n,e.originPoint=Ks(t.min,t.max,e.origin),e.scale=Ro(r)/Ro(t),e.translate=Ks(r.min,r.max,e.origin)-e.originPoint,(e.scale>=$te&&e.scale<=zte||isNaN(e.scale))&&(e.scale=1),(e.translate>=Ute&&e.translate<=Wte||isNaN(e.translate))&&(e.translate=0)}function $y(e,t,r,n){TA(e.x,t.x,r.x,n?n.originX:void 0),TA(e.y,t.y,r.y,n?n.originY:void 0)}function CA(e,t,r){e.min=r.min+t.min,e.max=e.min+Ro(t)}function Gte(e,t,r){CA(e.x,t.x,r.x),CA(e.y,t.y,r.y)}function EA(e,t,r){e.min=t.min-r.min,e.max=e.min+Ro(t)}function zy(e,t,r){EA(e.x,t.x,r.x),EA(e.y,t.y,r.y)}function ic(e){return[e("x"),e("y")]}const A$=({current:e})=>e?e.ownerDocument.defaultView:null,NA=(e,t)=>Math.abs(e-t);function Vte(e,t){const r=NA(e.x,t.x),n=NA(e.y,t.y);return Math.sqrt(r**2+n**2)}class j${constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=F5(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,x=Vte(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!x)return;const{point:y}=h,{timestamp:v}=$i;this.history.push({...y,timestamp:v});const{onStart:T,onMove:k}=this.handlers;g||(T&&T(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,h)},this.handlePointerMove=(h,g)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=M5(g,this.transformPagePoint),Ls.update(this.updatePoint,!0)},this.handlePointerUp=(h,g)=>{this.end();const{onEnd:x,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=F5(h.type==="pointercancel"?this.lastMoveEventInfo:M5(g,this.transformPagePoint),this.history);this.startEvent&&x&&x(h,T),y&&y(h,T)},!hT(t))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=s||window;const o=t2(t),l=M5(o,this.transformPagePoint),{point:u}=l,{timestamp:d}=$i;this.history=[{...u,timestamp:d}];const{onSessionStart:f}=r;f&&f(t,F5(l,this.history)),this.removeListeners=Qv(By(this.contextWindow,"pointermove",this.handlePointerMove),By(this.contextWindow,"pointerup",this.handlePointerUp),By(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Mf(this.updatePoint)}}function M5(e,t){return t?{point:t(e.point)}:e}function AA(e,t){return{x:e.x-t.x,y:e.y-t.y}}function F5({point:e},t){return{point:e,delta:AA(e,P$(t)),offset:AA(e,qte(t)),velocity:Kte(t,.1)}}function qte(e){return e[0]}function P$(e){return e[e.length-1]}function Kte(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=P$(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>Hu(t)));)r--;if(!n)return{x:0,y:0};const a=Gu(s.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const i={x:(s.x-n.x)/a,y:(s.y-n.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Yte(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Ks(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Ks(r,e,n.max):Math.min(e,r)),e}function jA(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function Xte(e,{top:t,left:r,bottom:n,right:s}){return{x:jA(e.x,r,s),y:jA(e.y,t,n)}}function PA(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function Jte(e,t){return{x:PA(e.x,t.x),y:PA(e.y,t.y)}}function Qte(e,t){let r=.5;const n=Ro(e),s=Ro(t);return s>n?r=ov(t.min,t.max-n,e.min):n>s&&(r=ov(e.min,e.max-s,t.min)),r0(0,1,r)}function Zte(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Hk=.35;function ere(e=Hk){return e===!1?e=0:e===!0&&(e=Hk),{x:MA(e,"left","right"),y:MA(e,"top","bottom")}}function MA(e,t,r){return{min:FA(e,t),max:FA(e,r)}}function FA(e,t){return typeof e=="number"?e:e[t]||0}const tre=new WeakMap;class rre{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ca(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(t2(f).point)},i=(f,h)=>{const{drag:g,dragPropagation:x,onDragStart:y}=this.getProps();if(g&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=uee(g),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ic(T=>{let k=this.getAxisMotionValue(T).get()||0;if(Vu.test(k)){const{projection:b}=this.visualElement;if(b&&b.layout){const N=b.layout.layoutBox[T];N&&(k=Ro(N)*(parseFloat(k)/100))}}this.originPoint[T]=k}),y&&Ls.postRender(()=>y(f,h)),Uk(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:g,dragDirectionLock:x,onDirectionLock:y,onDrag:v}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:T}=h;if(x&&this.currentDirection===null){this.currentDirection=nre(T),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,T),this.updateAxis("y",h.point,T),this.visualElement.render(),v&&v(f,h)},l=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>ic(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new j$(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:A$(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!n)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Ls.postRender(()=>o(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!zw(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let i=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(i=Yte(i,this.constraints[t],this.elastic[t])),a.set(i)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&dp(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=Xte(n.layoutBox,t):this.constraints=!1,this.elastic=ere(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&ic(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Zte(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!dp(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=ste(n,s.root,this.visualElement.getTransformPagePoint());let i=Jte(s.layout.layoutBox,a);if(r){const o=r(tte(i));this.hasMutatedConstraints=!!o,o&&(i=m$(o))}return i}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=ic(d=>{if(!zw(d,r,this.currentDirection))return;let f=l&&l[d]||{};i&&(f={min:0,max:0});const h=s?200:1e6,g=s?40:1e7,x={type:"inertia",velocity:n?t[d]:0,bounceStiffness:h,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(d,x)});return Promise.all(u).then(o)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return Uk(this.visualElement,t),n.start(ST(t,n,0,r,this.visualElement,!1))}stopAnimation(){ic(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ic(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){ic(r=>{const{drag:n}=this.getProps();if(!zw(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(r);if(s&&s.layout){const{min:i,max:o}=s.layout.layoutBox[r];a.set(t[r]-Ks(i,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!dp(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};ic(i=>{const o=this.getAxisMotionValue(i);if(o&&this.constraints!==!1){const l=o.get();s[i]=Qte({min:l,max:l},this.constraints[i])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ic(i=>{if(!zw(i,t,null))return;const o=this.getAxisMotionValue(i),{min:l,max:u}=this.constraints[i];o.set(Ks(l,u,s[i]))})}addListeners(){if(!this.visualElement.current)return;tre.set(this.visualElement,this);const t=this.visualElement.current,r=By(t,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();dp(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ls.read(n);const i=fv(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(ic(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=l[d].translate,f.set(f.get()+l[d].translate))}),this.visualElement.render())}));return()=>{i(),r(),a(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:i=Hk,dragMomentum:o=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:a,dragElastic:i,dragMomentum:o}}}function zw(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function nre(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class sre extends Gf{constructor(t){super(t),this.removeGroupControls=gc,this.removeListeners=gc,this.controls=new rre(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||gc}unmount(){this.removeGroupControls(),this.removeListeners()}}const DA=e=>(t,r)=>{e&&Ls.postRender(()=>e(t,r))};class are extends Gf{constructor(){super(...arguments),this.removePointerDownListener=gc}onPointerDown(t){this.session=new j$(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:A$(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:DA(t),onStart:DA(r),onMove:n,onEnd:(a,i)=>{delete this.session,s&&Ls.postRender(()=>s(a,i))}}}mount(){this.removePointerDownListener=By(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Bb={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function OA(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const kx={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(en.test(e))e=parseFloat(e);else return e;const r=OA(e,t.target.x),n=OA(e,t.target.y);return`${r}% ${n}%`}},ire={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Ff.parse(e);if(s.length>5)return n;const a=Ff.createTransformer(e),i=typeof s[0]!="number"?1:0,o=r.x.scale*t.x,l=r.y.scale*t.y;s[0+i]/=o,s[1+i]/=l;const u=Ks(o,l,.5);return typeof s[2+i]=="number"&&(s[2+i]/=u),typeof s[3+i]=="number"&&(s[3+i]/=u),a(s)}};let D5=!1;class ore extends S.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:a}=t;Aee(lre),a&&(r.group&&r.group.add(a),n&&n.register&&s&&n.register(a),D5&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Bb.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:a}=this.props,{projection:i}=n;return i&&(i.isPresent=a,D5=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==a?i.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?i.promote():i.relegate()||Ls.postRender(()=>{const o=i.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),fT.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;D5=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function M$(e){const[t,r]=e$(),n=S.useContext(H7);return c.jsx(ore,{...e,layoutGroup:n,switchLayoutGroup:S.useContext(f$),isPresent:t,safeToRemove:r})}const lre={borderRadius:{...kx,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:kx,borderTopRightRadius:kx,borderBottomLeftRadius:kx,borderBottomRightRadius:kx,boxShadow:ire};function cre(e,t,r){const n=mo(e)?e:Op(e);return n.start(ST("",n,t,r)),n.animation}const ure=(e,t)=>e.depth-t.depth;class dre{constructor(){this.children=[],this.isDirty=!1}add(t){q7(this.children,t),this.isDirty=!0}remove(t){K7(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(ure),this.isDirty=!1,this.children.forEach(t)}}function fre(e,t){const r=il.now(),n=({timestamp:s})=>{const a=s-r;a>=t&&(Mf(n),e(a-t))};return Ls.setup(n,!0),()=>Mf(n)}const F$=["TopLeft","TopRight","BottomLeft","BottomRight"],hre=F$.length,IA=e=>typeof e=="string"?parseFloat(e):e,RA=e=>typeof e=="number"||en.test(e);function mre(e,t,r,n,s,a){s?(e.opacity=Ks(0,r.opacity??1,gre(n)),e.opacityExit=Ks(t.opacity??1,0,pre(n))):a&&(e.opacity=Ks(t.opacity??1,r.opacity??1,n));for(let i=0;i<hre;i++){const o=`border${F$[i]}Radius`;let l=LA(t,o),u=LA(r,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||RA(l)===RA(u)?(e[o]=Math.max(Ks(IA(l),IA(u),n),0),(Vu.test(u)||Vu.test(l))&&(e[o]+="%")):e[o]=u}(t.rotate||r.rotate)&&(e.rotate=Ks(t.rotate||0,r.rotate||0,n))}function LA(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const gre=D$(0,.5,wB),pre=D$(.5,.95,gc);function D$(e,t,r){return n=>n<e?0:n>t?1:r(ov(e,t,n))}function BA(e,t){e.min=t.min,e.max=t.max}function Zl(e,t){BA(e.x,t.x),BA(e.y,t.y)}function $A(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function zA(e,t,r,n,s){return e-=t,e=r4(e,1/r,n),s!==void 0&&(e=r4(e,1/s,n)),e}function xre(e,t=0,r=1,n=.5,s,a=e,i=e){if(Vu.test(t)&&(t=parseFloat(t),t=Ks(i.min,i.max,t/100)-i.min),typeof t!="number")return;let o=Ks(a.min,a.max,n);e===a&&(o-=t),e.min=zA(e.min,t,r,o,s),e.max=zA(e.max,t,r,o,s)}function UA(e,t,[r,n,s],a,i){xre(e,t[r],t[n],t[s],t.scale,a,i)}const yre=["x","scaleX","originX"],vre=["y","scaleY","originY"];function WA(e,t,r,n){UA(e.x,t,yre,r?r.x:void 0,n?n.x:void 0),UA(e.y,t,vre,r?r.y:void 0,n?n.y:void 0)}function HA(e){return e.translate===0&&e.scale===1}function O$(e){return HA(e.x)&&HA(e.y)}function GA(e,t){return e.min===t.min&&e.max===t.max}function wre(e,t){return GA(e.x,t.x)&&GA(e.y,t.y)}function VA(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function I$(e,t){return VA(e.x,t.x)&&VA(e.y,t.y)}function qA(e){return Ro(e.x)/Ro(e.y)}function KA(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class bre{constructor(){this.members=[]}add(t){q7(this.members,t),t.scheduleRender()}remove(t){if(K7(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _re(e,t,r){let n="";const s=e.x.translate/t.x,a=e.y.translate/t.y,i=r?.z||0;if((s||a||i)&&(n=`translate3d(${s}px, ${a}px, ${i}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:h,skewX:g,skewY:x}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),f&&(n+=`rotateX(${f}deg) `),h&&(n+=`rotateY(${h}deg) `),g&&(n+=`skewX(${g}deg) `),x&&(n+=`skewY(${x}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const O5=["","X","Y","Z"],Sre=1e3;let kre=0;function I5(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function R$(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=_$(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Ls,!(s||a))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&R$(n)}function L$({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(i={},o=t?.()){this.id=kre++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Ere),this.nodes.forEach(Pre),this.nodes.forEach(Mre),this.nodes.forEach(Nre)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new dre)}addEventListener(i,o){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new J7),this.eventHandlers.get(i).add(o)}notifyListeners(i,...o){const l=this.eventHandlers.get(i);l&&l.notify(...o)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=ZB(i)&&!pee(i),this.instance=i;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),e){let d,f=0;const h=()=>this.root.updateBlockedByResize=!1;Ls.read(()=>{f=window.innerWidth}),e(i,()=>{const g=window.innerWidth;g!==f&&(f=g,this.root.updateBlockedByResize=!0,d&&d(),d=fre(h,250),Bb.hasAnimatedSinceResize&&(Bb.hasAnimatedSinceResize=!1,this.nodes.forEach(JA)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||Rre,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=u.getProps(),T=!this.targetLayout||!I$(this.targetLayout,g),k=!f&&h;if(this.options.layoutRoot||this.resumeFrom||k||f&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...uT(x,"layout"),onPlay:y,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(d,k)}else f||JA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Mf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Fre),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&R$(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(YA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(XA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(jre),this.nodes.forEach(Tre),this.nodes.forEach(Cre)):this.nodes.forEach(XA),this.clearAllSnapshots();const o=il.now();$i.delta=r0(0,1e3/60,o-$i.timestamp),$i.timestamp=o,$i.isProcessing=!0,k5.update.process($i),k5.preRender.process($i),k5.render.process($i),$i.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Are),this.sharedNodes.forEach(Dre)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ls.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ls.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ro(this.snapshot.measuredBox.x)&&!Ro(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ca(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(o=!1),o&&this.instance){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!O$(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;i&&this.instance&&(o||$h(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return i&&(l=this.removeTransform(l)),Lre(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return Ca();const o=i.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Bre))){const{scroll:u}=this.root;u&&(fp(o.x,u.offset.x),fp(o.y,u.offset.y))}return o}removeElementScroll(i){const o=Ca();if(Zl(o,i),this.scroll?.wasRoot)return o;for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Zl(o,i),fp(o.x,d.offset.x),fp(o.y,d.offset.y))}return o}applyTransform(i,o=!1){const l=Ca();Zl(l,i);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&hp(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),$h(d.latestValues)&&hp(l,d.latestValues)}return $h(this.latestValues)&&hp(l,this.latestValues),l}removeTransform(i){const o=Ca();Zl(o,i);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!$h(u.latestValues))continue;Lk(u.latestValues)&&u.updateSnapshot();const d=Ca(),f=u.measurePageBox();Zl(d,f),WA(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return $h(this.latestValues)&&WA(o,this.latestValues),o}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$i.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(i||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=$i.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ca(),this.relativeTargetOrigin=Ca(),zy(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),Zl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ca(),this.targetWithTransforms=Ca()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Gte(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Zl(this.target,this.layout.layoutBox),p$(this.target,this.targetDelta)):Zl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ca(),this.relativeTargetOrigin=Ca(),zy(this.relativeTargetOrigin,this.target,h.target),Zl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Lk(this.parent.latestValues)||g$(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const i=this.getLead(),o=!!this.resumingFrom||this!==i;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===$i.timestamp&&(l=!1),l)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Zl(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;nte(this.layoutCorrected,this.treeScale,this.path,o),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=Ca());const{target:g}=i;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():($A(this.prevProjectionDelta.x,this.projectionDelta.x),$A(this.prevProjectionDelta.y,this.projectionDelta.y)),$y(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!KA(this.projectionDelta.x,this.prevProjectionDelta.x)||!KA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.visualElement?.scheduleRender(),i){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=mp(),this.projectionDelta=mp(),this.projectionDeltaWithTransform=mp()}setAnimationOrigin(i,o=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},f=mp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Ca(),g=l?l.source:void 0,x=this.layout?this.layout.source:void 0,y=g!==x,v=this.getStack(),T=!v||v.members.length<=1,k=!!(y&&!T&&this.options.crossfade===!0&&!this.path.some(Ire));this.animationProgress=0;let b;this.mixTargetDelta=N=>{const E=N/1e3;QA(f.x,i.x,E),QA(f.y,i.y,E),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zy(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Ore(this.relativeTarget,this.relativeTargetOrigin,h,E),b&&wre(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Ca()),Zl(b,this.relativeTarget)),y&&(this.animationValues=d,mre(d,u,this.latestValues,E,k,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Mf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ls.update(()=>{Bb.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Op(0)),this.currentAnimation=cre(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),i.onUpdate&&i.onUpdate(o)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Sre),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:d}=i;if(!(!o||!l||!u)){if(this!==i&&this.layout&&u&&B$(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Ca();const f=Ro(this.layout.layoutBox.x);l.x.min=i.target.x.min,l.x.max=l.x.min+f;const h=Ro(this.layout.layoutBox.y);l.y.min=i.target.y.min,l.y.max=l.y.min+h}Zl(o,l),hp(o,d),$y(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(i,o){this.sharedNodes.has(i)||this.sharedNodes.set(i,new bre),this.sharedNodes.get(i).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){const{layoutId:i}=this.options;return i?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:i}=this.options;return i?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),i&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let o=!1;const{latestValues:l}=i;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&I5("z",i,u,this.animationValues);for(let d=0;d<O5.length;d++)I5(`rotate${O5[d]}`,i,u,this.animationValues),I5(`skew${O5[d]}`,i,u,this.animationValues);i.render();for(const d in u)i.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);i.scheduleRender()}applyProjectionStyles(i,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=Lb(o?.pointerEvents)||"",i.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=Lb(o?.pointerEvents)||""),this.hasProjected&&!$h(this.latestValues)&&(i.transform=l?l({},""):"none",this.hasProjected=!1);return}i.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=_re(this.projectionDeltaWithTransform,this.treeScale,d);l&&(f=l(d,f)),i.transform=f;const{x:h,y:g}=this.projectionDelta;i.transformOrigin=`${h.origin*100}% ${g.origin*100}% 0`,u.animationValues?i.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:i.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const x in dv){if(d[x]===void 0)continue;const{correct:y,applyTo:v,isCSSVariable:T}=dv[x],k=f==="none"?d[x]:y(d[x],u);if(v){const b=v.length;for(let N=0;N<b;N++)i[v[N]]=k}else T?this.options.visualElement.renderState.vars[x]=k:i[x]=k}this.options.layoutId&&(i.pointerEvents=u===this?Lb(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>i.currentAnimation?.stop()),this.root.nodes.forEach(YA),this.root.sharedNodes.clear()}}}function Tre(e){e.updateLayout()}function Cre(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;s==="size"?ic(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],h=Ro(f);f.min=r[d].min,f.max=f.min+h}):B$(s,t.layoutBox,r)&&ic(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],h=Ro(r[d]);f.max=f.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+h)});const i=mp();$y(i,r,t.layoutBox);const o=mp();a?$y(o,e.applyTransform(n,!0),t.measuredBox):$y(o,r,t.layoutBox);const l=!O$(i);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const g=Ca();zy(g,t.layoutBox,f.layoutBox);const x=Ca();zy(x,r,h.layoutBox),I$(g,x)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=g,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Ere(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Nre(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Are(e){e.clearSnapshot()}function YA(e){e.clearMeasurements()}function XA(e){e.isLayoutDirty=!1}function jre(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function JA(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Pre(e){e.resolveTargetDelta()}function Mre(e){e.calcProjection()}function Fre(e){e.resetSkewAndRotation()}function Dre(e){e.removeLeadSnapshot()}function QA(e,t,r){e.translate=Ks(t.translate,0,r),e.scale=Ks(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function ZA(e,t,r,n){e.min=Ks(t.min,r.min,n),e.max=Ks(t.max,r.max,n)}function Ore(e,t,r,n){ZA(e.x,t.x,r.x,n),ZA(e.y,t.y,r.y,n)}function Ire(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Rre={duration:.45,ease:[.4,0,.1,1]},ej=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),tj=ej("applewebkit/")&&!ej("chrome/")?Math.round:gc;function rj(e){e.min=tj(e.min),e.max=tj(e.max)}function Lre(e){rj(e.x),rj(e.y)}function B$(e,t,r){return e==="position"||e==="preserve-aspect"&&!Hte(qA(t),qA(r),.2)}function Bre(e){return e!==e.root&&e.scroll?.wasRoot}const $re=L$({attachResizeListener:(e,t)=>fv(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),R5={current:void 0},$$=L$({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!R5.current){const e=new $re({});e.mount(window),e.setOptions({layoutScroll:!0}),R5.current=e}return R5.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),zre={pan:{Feature:are},drag:{Feature:sre,ProjectionNode:$$,MeasureLayout:M$}};function nj(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,a=n[s];a&&Ls.postRender(()=>a(t,t2(t)))}class Ure extends Gf{mount(){const{current:t}=this.node;t&&(this.unmount=dee(t,(r,n)=>(nj(this.node,n,"Start"),s=>nj(this.node,s,"End"))))}unmount(){}}class Wre extends Gf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qv(fv(this.node.current,"focus",()=>this.onFocus()),fv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function sj(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),a=n[s];a&&Ls.postRender(()=>a(t,t2(t)))}class Hre extends Gf{mount(){const{current:t}=this.node;t&&(this.unmount=gee(t,(r,n)=>(sj(this.node,n,"Start"),(s,{success:a})=>sj(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Gk=new WeakMap,L5=new WeakMap,Gre=e=>{const t=Gk.get(e.target);t&&t(e)},Vre=e=>{e.forEach(Gre)};function qre({root:e,...t}){const r=e||document;L5.has(r)||L5.set(r,{});const n=L5.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(Vre,{root:e,...t})),n[s]}function Kre(e,t,r){const n=qre(t);return Gk.set(e,r),n.observe(e),()=>{Gk.delete(e),n.unobserve(e)}}const Yre={some:0,all:1};class Xre extends Gf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:a}=t,i={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:Yre[s]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(l)};return Kre(this.node.current,i,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(Jre(t,r))&&this.startObserver()}unmount(){}}function Jre({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const Qre={inView:{Feature:Xre},tap:{Feature:Hre},focus:{Feature:Wre},hover:{Feature:Ure}},Zre={layout:{ProjectionNode:$$,MeasureLayout:M$}},ene={...Lte,...Qre,...zre,...Zre},ht=ete(ene,hte),lt=({children:e,variant:t="primary",size:r="md",onClick:n,disabled:s=!1,className:a="",...i})=>{const o="font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer",l={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",warning:"bg-yellow-600 hover:bg-yellow-700 text-white focus:ring-yellow-500",outline:"bg-transparent text-blue-600 border-2 border-blue-600 hover:bg-blue-600 hover:text-white focus:ring-blue-500",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-700 focus:ring-gray-500"},u={xs:"px-2 py-1 text-xs",sm:"px-2 py-1 text-xs sm:px-3 sm:py-1.5 sm:text-sm",md:"px-3 py-1.5 text-sm sm:px-4 sm:py-2 sm:text-base",lg:"px-4 py-2 text-base sm:px-6 sm:py-3 sm:text-lg",icon:"p-0 flex items-center justify-center"},d=s?"opacity-50 cursor-not-allowed":"";return c.jsx(ht.button,{className:`${o} ${l[t]} ${u[r]} ${d} ${a}`,onClick:n,disabled:s,whileHover:s?{}:{scale:1.05},whileTap:s?{}:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},...i,children:e})},ln=({size:e="md",color:t="blue",className:r=""})=>{const n={sm:"w-4 h-4",small:"w-4 h-4",md:"w-6 h-6",medium:"w-6 h-6",lg:"w-8 h-8",large:"w-8 h-8",xl:"w-12 h-12"},s={blue:"border-blue-600",green:"border-green-600",red:"border-red-600",yellow:"border-yellow-600",gray:"border-gray-600"};return c.jsx(ht.div,{className:`
        inline-block border-2 border-gray-300 border-t-current rounded-full animate-spin
        ${n[e]} ${s[t]} ${r}
      `,animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})},su=({type:e="info",message:t="",duration:r=3e3,closable:n=!0,onClose:s,className:a="",...i})=>{const[o,l]=S.useState(!0),[u,d]=S.useState(!1),f=S.useRef(null),h=S.useRef(null);S.useEffect(()=>{if(r>0)return h.current=setTimeout(()=>{g()},r),()=>{h.current&&clearTimeout(h.current)}},[r]);const g=S.useCallback(()=>{u||(d(!0),h.current&&clearTimeout(h.current),setTimeout(()=>{l(!1),s&&s()},300))},[u,s]),x=S.useCallback(T=>{T.key==="Escape"&&g()},[g]);if(!o)return null;const y=["notification",`notification-${e}`,o?"notification-visible":"",u?"notification-exiting":"",a].filter(Boolean).join(" "),v=()=>{switch(e){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}};return c.jsx("div",{ref:f,className:y,role:"alert","aria-live":"polite",onKeyDown:x,tabIndex:-1,...i,children:c.jsxs("div",{className:"notification-content",children:[c.jsx("div",{className:"notification-icon","aria-hidden":"true",children:v()}),c.jsx("div",{className:"notification-body",children:c.jsx("div",{className:"notification-message",children:t})}),n&&c.jsx("button",{className:"notification-close",onClick:g,type:"button","aria-label":"Close notification",children:""})]})})},ai=()=>{const[e,t]=S.useState([]),r=S.useCallback((a,i="info",o={})=>{const l=Date.now()+Math.random(),u={id:l,message:a,type:i,...o};return t(d=>[...d,u]),o.duration!==0&&setTimeout(()=>{n(l)},o.duration||3e3),l},[]),n=S.useCallback(a=>{t(i=>i.filter(o=>o.id!==a))},[]),s=S.useCallback(()=>{t([])},[]);return{notifications:e,showNotification:r,removeNotification:n,clearAllNotifications:s}},Bl=()=>{const[e,t]=S.useState(!1),[r,n]=S.useState(null),[s,a]=S.useState(null),i=S.useRef(null);S.useRef(new Map);const o=S.useRef(0),l=3,u=1e3,d=S.useCallback(()=>{i.current&&(i.current.abort(),i.current=null)},[]);S.useEffect(()=>d,[d]);const f=S.useCallback(async(I,W={})=>{try{t(!0),n(null),i.current=new AbortController;const K=W.method||"POST",Z={method:K,headers:{"Content-Type":"application/json",...W.headers},signal:i.current.signal,...W};K!=="GET"&&K!=="HEAD"&&(Z.body=JSON.stringify(W.data||{})),console.log(`[API] Making request to: ${I}`,Z);const oe=await fetch(I,Z);if(!oe.ok)throw new Error(`HTTP error! status: ${oe.status}`);const J=await oe.json();if(console.log("[API] Response received:",J),J.success)return a(J),o.current=0,J;throw new Error(J.error||J.message||"Request failed")}catch(K){if(K.name==="AbortError")return console.log("[API] Request was aborted"),null;if(console.error("[API] Request failed:",K),n(K.message||"Request failed"),o.current<l){o.current++;const Z=u*Math.pow(2,o.current-1);return console.log(`[API] Retrying in ${Z}ms (attempt ${o.current}/${l})`),await new Promise(oe=>setTimeout(oe,Z)),f(I,W)}throw K}finally{t(!1),i.current=null}},[]),h=S.useCallback(async(I,W={})=>{try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())throw new Error("No valid authentication token found");return await window.tokenManager.makeAuthenticatedRequest(I,W)}catch(K){throw console.error("[API] Authenticated request failed:",K),K}},[]),g=S.useCallback(async(I,W)=>{try{const K=`/.netlify/functions/get-test-questions?test_type=${I}&test_id=${W}`;console.log(`[API] Getting test info for ${I}_${W}`);const oe=await(await h(K)).json();if(oe.success)return console.log("[API] Test info retrieved successfully:",oe.test_info),oe.test_info;throw new Error(oe.error||"Failed to get test info")}catch(K){throw console.error("[API] Failed to get test info:",K),K}},[h]),x=S.useCallback(async(I,W)=>{try{const K=`/.netlify/functions/get-test-questions?test_type=${I}&test_id=${W}`;console.log(`[API] Getting test questions for ${I}_${W}`);const oe=await(await h(K)).json();if(oe.success)return console.log("[API] Test questions retrieved successfully:",oe.questions),oe.questions;throw new Error(oe.error||"Failed to get test questions")}catch(K){throw console.error("[API] Failed to get test questions:",K),K}},[h]),y=S.useCallback(async()=>{try{const I="/.netlify/functions/get-student-active-tests";console.log("[API] Loading student active tests");const K=await(await h(I)).json();if(K.success)return console.log("[API] Student active tests loaded successfully:",K.tests),K.tests;throw new Error(K.error||"Failed to load student active tests")}catch(I){throw console.error("[API] Failed to load student active tests:",I),I}},[h]),v=S.useCallback(async(I,W,K)=>{try{let Z;switch(I){case"true_false":Z="/.netlify/functions/submit-true-false-test";break;case"multiple_choice":Z="/.netlify/functions/submit-multiple-choice-test";break;case"input":Z="/.netlify/functions/submit-input-test";break;case"matching_type":Z="/.netlify/functions/submit-matching-type-test";break;case"speaking":Z="/.netlify/functions/submit-speaking-test";break;default:throw new Error(`Unknown test type: ${I}`)}console.log(`[API] Submitting ${I} test:`,K);const J=await(await h(Z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)})).json();if(J.success)return console.log("[API] Test submitted successfully:",J),J;throw new Error(J.error||"Failed to submit test")}catch(Z){throw console.error("[API] Failed to submit test:",Z),Z}},[h]),T=S.useCallback(async I=>{try{const W="/.netlify/functions/save-multiple-choice-test";console.log("[API] Saving multiple choice test:",I);const Z=await(await h(W,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).json();if(Z.success)return console.log("[API] Multiple choice test saved successfully:",Z),Z;throw new Error(Z.error||"Failed to save multiple choice test")}catch(W){throw console.error("[API] Failed to save multiple choice test:",W),W}},[h]),k=S.useCallback(async I=>{try{const W="/.netlify/functions/save-true-false-test";console.log("[API] Saving true/false test:",I);const Z=await(await h(W,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).json();if(Z.success)return console.log("[API] True/false test saved successfully:",Z),Z;throw new Error(Z.error||"Failed to save true/false test")}catch(W){throw console.error("[API] Failed to save true/false test:",W),W}},[h]),b=S.useCallback(async I=>{try{const W="/.netlify/functions/save-input-test";console.log("[API] Saving input test:",I);const Z=await(await h(W,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).json();if(Z.success)return console.log("[API] Input test saved successfully:",Z),Z;throw new Error(Z.error||"Failed to save input test")}catch(W){throw console.error("[API] Failed to save input test:",W),W}},[h]),N=S.useCallback(async I=>{try{const W="/.netlify/functions/assign-test";console.log("[API] Assigning test to classes:",I);const Z=await(await h(W,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).json();if(Z.success)return console.log("[API] Test assigned successfully:",Z),Z;throw new Error(Z.error||"Failed to assign test")}catch(W){throw console.error("[API] Failed to assign test:",W),W}},[h]),E=S.useCallback(async()=>{try{const I="/.netlify/functions/get-teacher-active-tests";console.log("[API] Loading teacher active tests");const K=await(await h(I)).json();if(K.success)return console.log("[API] Teacher active tests loaded successfully:",K.tests),K.tests;throw new Error(K.error||"Failed to load teacher active tests")}catch(I){throw console.error("[API] Failed to load teacher active tests:",I),I}},[h]),P=S.useCallback(async()=>{try{const I="/.netlify/functions/get-all-users";console.log("[API] Getting all users");const K=await(await h(I)).json();if(K.success)return console.log("[API] All users loaded successfully:",K.users),K.users;throw new Error(K.error||"Failed to get all users")}catch(I){throw console.error("[API] Failed to get all users:",I),I}},[h]),M=S.useCallback(async()=>{try{const I="/.netlify/functions/get-all-teachers";console.log("[API] Getting all teachers");const K=await(await h(I)).json();if(K.success)return console.log("[API] All teachers loaded successfully:",K.teachers),K.teachers;throw new Error(K.error||"Failed to get all teachers")}catch(I){throw console.error("[API] Failed to get all teachers:",I),I}},[h]),j=S.useCallback(async()=>{try{const I="/.netlify/functions/get-all-subjects";console.log("[API] Getting all subjects");const K=await(await h(I)).json();if(K.success)return console.log("[API] All subjects loaded successfully:",K.subjects),K.subjects;throw new Error(K.error||"Failed to get all subjects")}catch(I){throw console.error("[API] Failed to get all subjects:",I),I}},[h]),A=S.useCallback(()=>{n(null)},[]),O=S.useCallback(()=>{a(null)},[]),L=S.useCallback(()=>{t(!1),n(null),a(null),o.current=0,d()},[d]),q=S.useCallback(async(I,W={})=>{const Z=await(await h(I,{...W,method:"GET"})).json();if(Z.success)return Z;throw new Error(Z.error||"Request failed")},[h]),Q=S.useCallback(async(I,W,K={})=>{const oe=await(await h(I,{...K,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)})).json();if(oe.success)return oe;throw new Error(oe.error||"Request failed")},[h]),ae=S.useCallback(async(I,W,K={})=>{const oe=await(await h(I,{...K,method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)})).json();if(oe.success)return oe;throw new Error(oe.error||"Request failed")},[h]),te=S.useCallback(async(I,W={})=>{const Z=await(await h(I,{...W,method:"DELETE"})).json();if(Z.success)return Z;throw new Error(Z.error||"Request failed")},[h]),ne=S.useCallback(async I=>{try{const W="/.netlify/functions/submit-speaking-test";console.log("[API] Submitting speaking test:",I);const Z=await(await h(W,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).json();if(Z.success)return console.log("[API] Speaking test submitted successfully:",Z),Z;throw new Error(Z.error||"Failed to submit speaking test")}catch(W){throw console.error("[API] Failed to submit speaking test:",W),W}},[h]),B=S.useCallback(async I=>{try{const W=`/.netlify/functions/get-speaking-test-new?action=test&test_id=${I}`;console.log("[API] Getting speaking test:",I);const Z=await(await h(W,{method:"GET"})).json();if(Z.success)return console.log("[API] Speaking test loaded successfully:",Z),Z;throw new Error(Z.error||"Failed to load speaking test")}catch(W){throw console.error("[API] Failed to load speaking test:",W),W}},[h]),V=S.useCallback(async I=>{try{const W=`/.netlify/functions/get-speaking-test-new?action=questions&test_id=${I}`;console.log("[API] Getting speaking test questions:",I);const Z=await(await h(W,{method:"GET"})).json();if(Z.success)return console.log("[API] Speaking test questions loaded successfully:",Z),Z;throw new Error(Z.error||"Failed to load speaking test questions")}catch(W){throw console.error("[API] Failed to load speaking test questions:",W),W}},[h]),R=S.useCallback(async I=>{try{const W="/.netlify/functions/upload-speaking-audio";console.log("[API] Uploading speaking audio");const Z=await(await h(W,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).json();if(Z.success)return console.log("[API] Audio uploaded successfully:",Z),Z;throw new Error(Z.error||"Failed to upload audio")}catch(W){throw console.error("[API] Failed to upload audio:",W),W}},[h]),H=S.useCallback(async I=>{try{const W=`/.netlify/functions/get-speaking-test-new?action=audio&file_path=${encodeURIComponent(I)}`;console.log("[API] Getting speaking audio:",I);const Z=await(await h(W,{method:"GET"})).json();if(Z.success)return console.log("[API] Audio URL retrieved successfully:",Z),Z;throw new Error(Z.error||"Failed to get audio")}catch(W){throw console.error("[API] Failed to get audio:",W),W}},[h]),U=S.useCallback(async(I,W)=>{try{const K=`/.netlify/functions/check-test-completion?test_id=${I}&test_type=${W}`;console.log("[API] Checking test completion:",I,W);const oe=await(await h(K,{method:"GET"})).json();if(oe.success)return console.log("[API] Test completion status:",oe),oe;throw new Error(oe.error||"Failed to check test completion")}catch(K){throw console.error("[API] Failed to check test completion:",K),K}},[h]);return{loading:e,error:r,data:s,sendRequest:f,makeAuthenticatedRequest:h,get:q,post:Q,put:ae,delete:te,getTestInfo:g,getTestQuestions:x,loadStudentActiveTests:y,submitTest:v,submitSpeakingTest:ne,getSpeakingTest:B,getSpeakingTestQuestions:V,uploadSpeakingAudio:R,getSpeakingAudio:H,checkTestCompletion:U,saveMultipleChoiceTest:T,saveTrueFalseTest:k,saveInputTest:b,assignTestToClasses:N,loadTeacherActiveTests:E,getAllUsers:P,getAllTeachers:M,getAllSubjects:j,clearError:A,clearData:O,reset:L,cleanup:d}},tne="modulepreload",rne=function(e){return"/"+e},aj={},Vi=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let u=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};var i=u;document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=u(r.map(d=>{if(d=rne(d),d in aj)return;aj[d]=!0;const f=d.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":tne,f||(g.as="script"),g.crossOrigin="",g.href=d,l&&g.setAttribute("nonce",l),document.head.appendChild(g),f)return new Promise((x,y)=>{g.addEventListener("load",x),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};var $b={exports:{}},Tx={},B5={},$5={},ij;function wn(){return ij||(ij=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function r(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof Jb<"u"?Jb:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.22",isBrowser:r(),isUnminified:/param/.test((function(s){}).toString()),dblClickWindow:400,getAngle(s){return e.Konva.angleDeg?s*t:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isTransforming(){var s;return(s=e.Konva.Transformer)===null||s===void 0?void 0:s.isTransforming()},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(s){e.glob.Konva=s}};const n=s=>{e.Konva[s.prototype.getClassName()]=s};e._registerNode=n,e.Konva._injectGlobal(e.Konva)})($5)),$5}var z5={},oj;function ga(){return oj||(oj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=wn();class r{constructor(N=[1,0,0,1,0,0]){this.dirty=!1,this.m=N&&N.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new r(this.m)}copyInto(N){N.m[0]=this.m[0],N.m[1]=this.m[1],N.m[2]=this.m[2],N.m[3]=this.m[3],N.m[4]=this.m[4],N.m[5]=this.m[5]}point(N){const E=this.m;return{x:E[0]*N.x+E[2]*N.y+E[4],y:E[1]*N.x+E[3]*N.y+E[5]}}translate(N,E){return this.m[4]+=this.m[0]*N+this.m[2]*E,this.m[5]+=this.m[1]*N+this.m[3]*E,this}scale(N,E){return this.m[0]*=N,this.m[1]*=N,this.m[2]*=E,this.m[3]*=E,this}rotate(N){const E=Math.cos(N),P=Math.sin(N),M=this.m[0]*E+this.m[2]*P,j=this.m[1]*E+this.m[3]*P,A=this.m[0]*-P+this.m[2]*E,O=this.m[1]*-P+this.m[3]*E;return this.m[0]=M,this.m[1]=j,this.m[2]=A,this.m[3]=O,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(N,E){const P=this.m[0]+this.m[2]*E,M=this.m[1]+this.m[3]*E,j=this.m[2]+this.m[0]*N,A=this.m[3]+this.m[1]*N;return this.m[0]=P,this.m[1]=M,this.m[2]=j,this.m[3]=A,this}multiply(N){const E=this.m[0]*N.m[0]+this.m[2]*N.m[1],P=this.m[1]*N.m[0]+this.m[3]*N.m[1],M=this.m[0]*N.m[2]+this.m[2]*N.m[3],j=this.m[1]*N.m[2]+this.m[3]*N.m[3],A=this.m[0]*N.m[4]+this.m[2]*N.m[5]+this.m[4],O=this.m[1]*N.m[4]+this.m[3]*N.m[5]+this.m[5];return this.m[0]=E,this.m[1]=P,this.m[2]=M,this.m[3]=j,this.m[4]=A,this.m[5]=O,this}invert(){const N=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),E=this.m[3]*N,P=-this.m[1]*N,M=-this.m[2]*N,j=this.m[0]*N,A=N*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),O=N*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=E,this.m[1]=P,this.m[2]=M,this.m[3]=j,this.m[4]=A,this.m[5]=O,this}getMatrix(){return this.m}decompose(){const N=this.m[0],E=this.m[1],P=this.m[2],M=this.m[3],j=this.m[4],A=this.m[5],O=N*M-E*P,L={x:j,y:A,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(N!=0||E!=0){const q=Math.sqrt(N*N+E*E);L.rotation=E>0?Math.acos(N/q):-Math.acos(N/q),L.scaleX=q,L.scaleY=O/q,L.skewX=(N*P+E*M)/O,L.skewY=0}else if(P!=0||M!=0){const q=Math.sqrt(P*P+M*M);L.rotation=Math.PI/2-(M>0?Math.acos(-P/q):-Math.acos(P/q)),L.scaleX=O/q,L.scaleY=q,L.skewX=0,L.skewY=(N*P+E*M)/O}return L.rotation=e.Util._getRotation(L.rotation),L}}e.Transform=r;const n="[object Array]",s="[object Number]",a="[object String]",i="[object Boolean]",o=Math.PI/180,l=180/Math.PI,u="#",d="",f="0",h="Konva warning: ",g="Konva error: ",x="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let T=[];const k=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(b){setTimeout(b,60)};e.Util={_isElement(b){return!!(b&&b.nodeType==1)},_isFunction(b){return!!(b&&b.constructor&&b.call&&b.apply)},_isPlainObject(b){return!!b&&b.constructor===Object},_isArray(b){return Object.prototype.toString.call(b)===n},_isNumber(b){return Object.prototype.toString.call(b)===s&&!isNaN(b)&&isFinite(b)},_isString(b){return Object.prototype.toString.call(b)===a},_isBoolean(b){return Object.prototype.toString.call(b)===i},isObject(b){return b instanceof Object},isValidSelector(b){if(typeof b!="string")return!1;const N=b[0];return N==="#"||N==="."||N===N.toUpperCase()},_sign(b){return b===0||b>0?1:-1},requestAnimFrame(b){T.push(b),T.length===1&&k(function(){const N=T;T=[],N.forEach(function(E){E()})})},createCanvasElement(){const b=document.createElement("canvas");try{b.style=b.style||{}}catch{}return b},createImageElement(){return document.createElement("img")},_isInDocument(b){for(;b=b.parentNode;)if(b==document)return!0;return!1},_urlToImage(b,N){const E=e.Util.createImageElement();E.onload=function(){N(E)},E.src=b},_rgbToHex(b,N,E){return((1<<24)+(b<<16)+(N<<8)+E).toString(16).slice(1)},_hexToRgb(b){b=b.replace(u,d);const N=parseInt(b,16);return{r:N>>16&255,g:N>>8&255,b:N&255}},getRandomColor(){let b=(Math.random()*16777215<<0).toString(16);for(;b.length<6;)b=f+b;return u+b},getRGB(b){let N;return b in y?(N=y[b],{r:N[0],g:N[1],b:N[2]}):b[0]===u?this._hexToRgb(b.substring(1)):b.substr(0,4)===x?(N=v.exec(b.replace(/ /g,"")),{r:parseInt(N[1],10),g:parseInt(N[2],10),b:parseInt(N[3],10)}):{r:0,g:0,b:0}},colorToRGBA(b){return b=b||"black",e.Util._namedColorToRBA(b)||e.Util._hex3ColorToRGBA(b)||e.Util._hex4ColorToRGBA(b)||e.Util._hex6ColorToRGBA(b)||e.Util._hex8ColorToRGBA(b)||e.Util._rgbColorToRGBA(b)||e.Util._rgbaColorToRGBA(b)||e.Util._hslColorToRGBA(b)},_namedColorToRBA(b){const N=y[b.toLowerCase()];return N?{r:N[0],g:N[1],b:N[2],a:1}:null},_rgbColorToRGBA(b){if(b.indexOf("rgb(")===0){b=b.match(/rgb\(([^)]+)\)/)[1];const N=b.split(/ *, */).map(Number);return{r:N[0],g:N[1],b:N[2],a:1}}},_rgbaColorToRGBA(b){if(b.indexOf("rgba(")===0){b=b.match(/rgba\(([^)]+)\)/)[1];const N=b.split(/ *, */).map((E,P)=>E.slice(-1)==="%"?P===3?parseInt(E)/100:parseInt(E)/100*255:Number(E));return{r:N[0],g:N[1],b:N[2],a:N[3]}}},_hex8ColorToRGBA(b){if(b[0]==="#"&&b.length===9)return{r:parseInt(b.slice(1,3),16),g:parseInt(b.slice(3,5),16),b:parseInt(b.slice(5,7),16),a:parseInt(b.slice(7,9),16)/255}},_hex6ColorToRGBA(b){if(b[0]==="#"&&b.length===7)return{r:parseInt(b.slice(1,3),16),g:parseInt(b.slice(3,5),16),b:parseInt(b.slice(5,7),16),a:1}},_hex4ColorToRGBA(b){if(b[0]==="#"&&b.length===5)return{r:parseInt(b[1]+b[1],16),g:parseInt(b[2]+b[2],16),b:parseInt(b[3]+b[3],16),a:parseInt(b[4]+b[4],16)/255}},_hex3ColorToRGBA(b){if(b[0]==="#"&&b.length===4)return{r:parseInt(b[1]+b[1],16),g:parseInt(b[2]+b[2],16),b:parseInt(b[3]+b[3],16),a:1}},_hslColorToRGBA(b){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(b)){const[N,...E]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(b),P=Number(E[0])/360,M=Number(E[1])/100,j=Number(E[2])/100;let A,O,L;if(M===0)return L=j*255,{r:Math.round(L),g:Math.round(L),b:Math.round(L),a:1};j<.5?A=j*(1+M):A=j+M-j*M;const q=2*j-A,Q=[0,0,0];for(let ae=0;ae<3;ae++)O=P+1/3*-(ae-1),O<0&&O++,O>1&&O--,6*O<1?L=q+(A-q)*6*O:2*O<1?L=A:3*O<2?L=q+(A-q)*(2/3-O)*6:L=q,Q[ae]=L*255;return{r:Math.round(Q[0]),g:Math.round(Q[1]),b:Math.round(Q[2]),a:1}}},haveIntersection(b,N){return!(N.x>b.x+b.width||N.x+N.width<b.x||N.y>b.y+b.height||N.y+N.height<b.y)},cloneObject(b){const N={};for(const E in b)this._isPlainObject(b[E])?N[E]=this.cloneObject(b[E]):this._isArray(b[E])?N[E]=this.cloneArray(b[E]):N[E]=b[E];return N},cloneArray(b){return b.slice(0)},degToRad(b){return b*o},radToDeg(b){return b*l},_degToRad(b){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(b)},_radToDeg(b){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(b)},_getRotation(b){return t.Konva.angleDeg?e.Util.radToDeg(b):b},_capitalize(b){return b.charAt(0).toUpperCase()+b.slice(1)},throw(b){throw new Error(g+b)},error(b){console.error(g+b)},warn(b){t.Konva.showWarnings&&console.warn(h+b)},each(b,N){for(const E in b)N(E,b[E])},_inRange(b,N,E){return N<=b&&b<E},_getProjectionToSegment(b,N,E,P,M,j){let A,O,L;const q=(b-E)*(b-E)+(N-P)*(N-P);if(q==0)A=b,O=N,L=(M-E)*(M-E)+(j-P)*(j-P);else{const Q=((M-b)*(E-b)+(j-N)*(P-N))/q;Q<0?(A=b,O=N,L=(b-M)*(b-M)+(N-j)*(N-j)):Q>1?(A=E,O=P,L=(E-M)*(E-M)+(P-j)*(P-j)):(A=b+Q*(E-b),O=N+Q*(P-N),L=(A-M)*(A-M)+(O-j)*(O-j))}return[A,O,L]},_getProjectionToLine(b,N,E){const P=e.Util.cloneObject(b);let M=Number.MAX_VALUE;return N.forEach(function(j,A){if(!E&&A===N.length-1)return;const O=N[(A+1)%N.length],L=e.Util._getProjectionToSegment(j.x,j.y,O.x,O.y,b.x,b.y),q=L[0],Q=L[1],ae=L[2];ae<M&&(P.x=q,P.y=Q,M=ae)}),P},_prepareArrayForTween(b,N,E){const P=[],M=[];if(b.length>N.length){const A=N;N=b,b=A}for(let A=0;A<b.length;A+=2)P.push({x:b[A],y:b[A+1]});for(let A=0;A<N.length;A+=2)M.push({x:N[A],y:N[A+1]});const j=[];return M.forEach(function(A){const O=e.Util._getProjectionToLine(A,P,E);j.push(O.x),j.push(O.y)}),j},_prepareToStringify(b){let N;b.visitedByCircularReferenceRemoval=!0;for(const E in b)if(b.hasOwnProperty(E)&&b[E]&&typeof b[E]=="object"){if(N=Object.getOwnPropertyDescriptor(b,E),b[E].visitedByCircularReferenceRemoval||e.Util._isElement(b[E]))if(N.configurable)delete b[E];else return null;else if(e.Util._prepareToStringify(b[E])===null)if(N.configurable)delete b[E];else return null}return delete b.visitedByCircularReferenceRemoval,b},_assign(b,N){for(const E in N)b[E]=N[E];return b},_getFirstPointerId(b){return b.touches?b.changedTouches[0].identifier:b.pointerId||999},releaseCanvas(...b){t.Konva.releaseCanvasOnDestroy&&b.forEach(N=>{N.width=0,N.height=0})},drawRoundedRectPath(b,N,E,P){let M=0,j=0,A=0,O=0;typeof P=="number"?M=j=A=O=Math.min(P,N/2,E/2):(M=Math.min(P[0]||0,N/2,E/2),j=Math.min(P[1]||0,N/2,E/2),O=Math.min(P[2]||0,N/2,E/2),A=Math.min(P[3]||0,N/2,E/2)),b.moveTo(M,0),b.lineTo(N-j,0),b.arc(N-j,j,j,Math.PI*3/2,0,!1),b.lineTo(N,E-O),b.arc(N-O,E-O,O,0,Math.PI/2,!1),b.lineTo(A,E),b.arc(A,E-A,A,Math.PI/2,Math.PI,!1),b.lineTo(0,M),b.arc(M,M,M,Math.PI,Math.PI*3/2,!1)}}})(z5)),z5}var Cx={},Pd={},Md={},lj;function z$(){if(lj)return Md;lj=1,Object.defineProperty(Md,"__esModule",{value:!0}),Md.HitContext=Md.SceneContext=Md.Context=void 0;const e=ga(),t=wn();function r(T){const k=[],b=T.length,N=e.Util;for(let E=0;E<b;E++){let P=T[E];N._isNumber(P)?P=Math.round(P*1e3)/1e3:N._isString(P)||(P=P+""),k.push(P)}return k}const n=",",s="(",a=")",i="([",o="])",l=";",u="()",d="=",f=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],h=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],g=100;let x=class{constructor(k){this.canvas=k,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(k){k.fillEnabled()&&this._fill(k)}_fill(k){}strokeShape(k){k.hasStroke()&&this._stroke(k)}_stroke(k){}fillStrokeShape(k){k.attrs.fillAfterStrokeEnabled?(this.strokeShape(k),this.fillShape(k)):(this.fillShape(k),this.strokeShape(k))}getTrace(k,b){let N=this.traceArr,E=N.length,P="",M,j,A,O;for(M=0;M<E;M++)j=N[M],A=j.method,A?(O=j.args,P+=A,k?P+=u:e.Util._isArray(O[0])?P+=i+O.join(n)+o:(b&&(O=O.map(L=>typeof L=="number"?Math.floor(L):L)),P+=s+O.join(n)+a)):(P+=j.property,k||(P+=d+j.val)),P+=l;return P}clearTrace(){this.traceArr=[]}_trace(k){let b=this.traceArr,N;b.push(k),N=b.length,N>=g&&b.shift()}reset(){const k=this.getCanvas().getPixelRatio();this.setTransform(1*k,0,0,1*k,0,0)}getCanvas(){return this.canvas}clear(k){const b=this.getCanvas();k?this.clearRect(k.x||0,k.y||0,k.width||0,k.height||0):this.clearRect(0,0,b.getWidth()/b.pixelRatio,b.getHeight()/b.pixelRatio)}_applyLineCap(k){const b=k.attrs.lineCap;b&&this.setAttr("lineCap",b)}_applyOpacity(k){const b=k.getAbsoluteOpacity();b!==1&&this.setAttr("globalAlpha",b)}_applyLineJoin(k){const b=k.attrs.lineJoin;b&&this.setAttr("lineJoin",b)}setAttr(k,b){this._context[k]=b}arc(k,b,N,E,P,M){this._context.arc(k,b,N,E,P,M)}arcTo(k,b,N,E,P){this._context.arcTo(k,b,N,E,P)}beginPath(){this._context.beginPath()}bezierCurveTo(k,b,N,E,P,M){this._context.bezierCurveTo(k,b,N,E,P,M)}clearRect(k,b,N,E){this._context.clearRect(k,b,N,E)}clip(...k){this._context.clip.apply(this._context,k)}closePath(){this._context.closePath()}createImageData(k,b){const N=arguments;if(N.length===2)return this._context.createImageData(k,b);if(N.length===1)return this._context.createImageData(k)}createLinearGradient(k,b,N,E){return this._context.createLinearGradient(k,b,N,E)}createPattern(k,b){return this._context.createPattern(k,b)}createRadialGradient(k,b,N,E,P,M){return this._context.createRadialGradient(k,b,N,E,P,M)}drawImage(k,b,N,E,P,M,j,A,O){const L=arguments,q=this._context;L.length===3?q.drawImage(k,b,N):L.length===5?q.drawImage(k,b,N,E,P):L.length===9&&q.drawImage(k,b,N,E,P,M,j,A,O)}ellipse(k,b,N,E,P,M,j,A){this._context.ellipse(k,b,N,E,P,M,j,A)}isPointInPath(k,b,N,E){return N?this._context.isPointInPath(N,k,b,E):this._context.isPointInPath(k,b,E)}fill(...k){this._context.fill.apply(this._context,k)}fillRect(k,b,N,E){this._context.fillRect(k,b,N,E)}strokeRect(k,b,N,E){this._context.strokeRect(k,b,N,E)}fillText(k,b,N,E){E?this._context.fillText(k,b,N,E):this._context.fillText(k,b,N)}measureText(k){return this._context.measureText(k)}getImageData(k,b,N,E){return this._context.getImageData(k,b,N,E)}lineTo(k,b){this._context.lineTo(k,b)}moveTo(k,b){this._context.moveTo(k,b)}rect(k,b,N,E){this._context.rect(k,b,N,E)}roundRect(k,b,N,E,P){this._context.roundRect(k,b,N,E,P)}putImageData(k,b,N){this._context.putImageData(k,b,N)}quadraticCurveTo(k,b,N,E){this._context.quadraticCurveTo(k,b,N,E)}restore(){this._context.restore()}rotate(k){this._context.rotate(k)}save(){this._context.save()}scale(k,b){this._context.scale(k,b)}setLineDash(k){this._context.setLineDash?this._context.setLineDash(k):"mozDash"in this._context?this._context.mozDash=k:"webkitLineDash"in this._context&&(this._context.webkitLineDash=k)}getLineDash(){return this._context.getLineDash()}setTransform(k,b,N,E,P,M){this._context.setTransform(k,b,N,E,P,M)}stroke(k){k?this._context.stroke(k):this._context.stroke()}strokeText(k,b,N,E){this._context.strokeText(k,b,N,E)}transform(k,b,N,E,P,M){this._context.transform(k,b,N,E,P,M)}translate(k,b){this._context.translate(k,b)}_enableTrace(){let k=this,b=f.length,N=this.setAttr,E,P;const M=function(j){let A=k[j],O;k[j]=function(){return P=r(Array.prototype.slice.call(arguments,0)),O=A.apply(k,arguments),k._trace({method:j,args:P}),O}};for(E=0;E<b;E++)M(f[E]);k.setAttr=function(){N.apply(k,arguments);const j=arguments[0];let A=arguments[1];(j==="shadowOffsetX"||j==="shadowOffsetY"||j==="shadowBlur")&&(A=A/this.canvas.getPixelRatio()),k._trace({property:j,val:A})}}_applyGlobalCompositeOperation(k){const b=k.attrs.globalCompositeOperation;!b||b==="source-over"||this.setAttr("globalCompositeOperation",b)}};Md.Context=x,h.forEach(function(T){Object.defineProperty(x.prototype,T,{get(){return this._context[T]},set(k){this._context[T]=k}})});class y extends x{constructor(k,{willReadFrequently:b=!1}={}){super(k),this._context=k._canvas.getContext("2d",{willReadFrequently:b})}_fillColor(k){const b=k.fill();this.setAttr("fillStyle",b),k._fillFunc(this)}_fillPattern(k){this.setAttr("fillStyle",k._getFillPattern()),k._fillFunc(this)}_fillLinearGradient(k){const b=k._getLinearGradient();b&&(this.setAttr("fillStyle",b),k._fillFunc(this))}_fillRadialGradient(k){const b=k._getRadialGradient();b&&(this.setAttr("fillStyle",b),k._fillFunc(this))}_fill(k){const b=k.fill(),N=k.getFillPriority();if(b&&N==="color"){this._fillColor(k);return}const E=k.getFillPatternImage();if(E&&N==="pattern"){this._fillPattern(k);return}const P=k.getFillLinearGradientColorStops();if(P&&N==="linear-gradient"){this._fillLinearGradient(k);return}const M=k.getFillRadialGradientColorStops();if(M&&N==="radial-gradient"){this._fillRadialGradient(k);return}b?this._fillColor(k):E?this._fillPattern(k):P?this._fillLinearGradient(k):M&&this._fillRadialGradient(k)}_strokeLinearGradient(k){const b=k.getStrokeLinearGradientStartPoint(),N=k.getStrokeLinearGradientEndPoint(),E=k.getStrokeLinearGradientColorStops(),P=this.createLinearGradient(b.x,b.y,N.x,N.y);if(E){for(let M=0;M<E.length;M+=2)P.addColorStop(E[M],E[M+1]);this.setAttr("strokeStyle",P)}}_stroke(k){const b=k.dash(),N=k.getStrokeScaleEnabled();if(k.hasStroke()){if(!N){this.save();const P=this.getCanvas().getPixelRatio();this.setTransform(P,0,0,P,0,0)}this._applyLineCap(k),b&&k.dashEnabled()&&(this.setLineDash(b),this.setAttr("lineDashOffset",k.dashOffset())),this.setAttr("lineWidth",k.strokeWidth()),k.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),k.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(k):this.setAttr("strokeStyle",k.stroke()),k._strokeFunc(this),N||this.restore()}}_applyShadow(k){var b,N,E;const P=(b=k.getShadowRGBA())!==null&&b!==void 0?b:"black",M=(N=k.getShadowBlur())!==null&&N!==void 0?N:5,j=(E=k.getShadowOffset())!==null&&E!==void 0?E:{x:0,y:0},A=k.getAbsoluteScale(),O=this.canvas.getPixelRatio(),L=A.x*O,q=A.y*O;this.setAttr("shadowColor",P),this.setAttr("shadowBlur",M*Math.min(Math.abs(L),Math.abs(q))),this.setAttr("shadowOffsetX",j.x*L),this.setAttr("shadowOffsetY",j.y*q)}}Md.SceneContext=y;class v extends x{constructor(k){super(k),this._context=k._canvas.getContext("2d",{willReadFrequently:!0})}_fill(k){this.save(),this.setAttr("fillStyle",k.colorKey),k._fillFuncHit(this),this.restore()}strokeShape(k){k.hasHitStroke()&&this._stroke(k)}_stroke(k){if(k.hasHitStroke()){const b=k.getStrokeScaleEnabled();if(!b){this.save();const P=this.getCanvas().getPixelRatio();this.setTransform(P,0,0,P,0,0)}this._applyLineCap(k);const N=k.hitStrokeWidth(),E=N==="auto"?k.strokeWidth():N;this.setAttr("lineWidth",E),this.setAttr("strokeStyle",k.colorKey),k._strokeFuncHit(this),b||this.restore()}}}return Md.HitContext=v,Md}var cj;function j_(){if(cj)return Pd;cj=1,Object.defineProperty(Pd,"__esModule",{value:!0}),Pd.HitCanvas=Pd.SceneCanvas=Pd.Canvas=void 0;const e=ga(),t=z$(),r=wn();let n;function s(){if(n)return n;const l=e.Util.createCanvasElement(),u=l.getContext("2d");return n=(function(){const d=r.Konva._global.devicePixelRatio||1,f=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;return d/f})(),e.Util.releaseCanvas(l),n}let a=class{constructor(u){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const f=(u||{}).pixelRatio||r.Konva.pixelRatio||s();this.pixelRatio=f,this._canvas=e.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(u){const d=this.pixelRatio;this.pixelRatio=u,this.setSize(this.getWidth()/d,this.getHeight()/d)}setWidth(u){this.width=this._canvas.width=u*this.pixelRatio,this._canvas.style.width=u+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}setHeight(u){this.height=this._canvas.height=u*this.pixelRatio,this._canvas.style.height=u+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}getWidth(){return this.width}getHeight(){return this.height}setSize(u,d){this.setWidth(u||0),this.setHeight(d||0)}toDataURL(u,d){try{return this._canvas.toDataURL(u,d)}catch{try{return this._canvas.toDataURL()}catch(h){return e.Util.error("Unable to get data URL. "+h.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Pd.Canvas=a;class i extends a{constructor(u={width:0,height:0,willReadFrequently:!1}){super(u),this.context=new t.SceneContext(this,{willReadFrequently:u.willReadFrequently}),this.setSize(u.width,u.height)}}Pd.SceneCanvas=i;class o extends a{constructor(u={width:0,height:0}){super(u),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(u.width,u.height)}}return Pd.HitCanvas=o,Pd}var U5={},uj;function kT(){return uj||(uj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=wn(),r=ga();e.DD={get isDragging(){let n=!1;return e.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return e.DD._dragElements.forEach(s=>{n=s.node}),n},_dragElements:new Map,_drag(n){const s=[];e.DD._dragElements.forEach((a,i)=>{const{node:o}=a,l=o.getStage();l.setPointersPositions(n),a.pointerId===void 0&&(a.pointerId=r.Util._getFirstPointerId(n));const u=l._changedPointerPositions.find(d=>d.id===a.pointerId);if(u){if(a.dragStatus!=="dragging"){const d=o.dragDistance();if(Math.max(Math.abs(u.x-a.startPointerPos.x),Math.abs(u.y-a.startPointerPos.y))<d||(o.startDrag({evt:n}),!o.isDragging()))return}o._setDragPosition(n,a),s.push(o)}}),s.forEach(a=>{a.fire("dragmove",{type:"dragmove",target:a,evt:n},!0)})},_endDragBefore(n){const s=[];e.DD._dragElements.forEach(a=>{const{node:i}=a,o=i.getStage();if(n&&o.setPointersPositions(n),!o._changedPointerPositions.find(d=>d.id===a.pointerId))return;(a.dragStatus==="dragging"||a.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,a.dragStatus="stopped");const u=a.node.getLayer()||a.node instanceof t.Konva.Stage&&a.node;u&&s.indexOf(u)===-1&&s.push(u)}),s.forEach(a=>{a.draw()})},_endDragAfter(n){e.DD._dragElements.forEach((s,a)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:n},!0),s.dragStatus!=="dragging"&&e.DD._dragElements.delete(a)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))})(U5)),U5}var W5={},el={},dj;function Nn(){if(dj)return el;dj=1,Object.defineProperty(el,"__esModule",{value:!0}),el.RGBComponent=n,el.alphaComponent=s,el.getNumberValidator=a,el.getNumberOrArrayOfNumbersValidator=i,el.getNumberOrAutoValidator=o,el.getStringValidator=l,el.getStringOrGradientValidator=u,el.getFunctionValidator=d,el.getNumberArrayValidator=f,el.getBooleanValidator=h,el.getComponentValidator=g;const e=wn(),t=ga();function r(x){return t.Util._isString(x)?'"'+x+'"':Object.prototype.toString.call(x)==="[object Number]"||t.Util._isBoolean(x)?x:Object.prototype.toString.call(x)}function n(x){return x>255?255:x<0?0:Math.round(x)}function s(x){return x>1?1:x<1e-4?1e-4:x}function a(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isNumber(x)||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a number.'),x}}function i(x){if(e.Konva.isUnminified)return function(y,v){let T=t.Util._isNumber(y),k=t.Util._isArray(y)&&y.length==x;return!T&&!k&&t.Util.warn(r(y)+' is a not valid value for "'+v+'" attribute. The value should be a number or Array<number>('+x+")"),y}}function o(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isNumber(x)||x==="auto"||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a number or "auto".'),x}}function l(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isString(x)||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a string.'),x}}function u(){if(e.Konva.isUnminified)return function(x,y){const v=t.Util._isString(x),T=Object.prototype.toString.call(x)==="[object CanvasGradient]"||x&&x.addColorStop;return v||T||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a string or a native gradient.'),x}}function d(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isFunction(x)||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a function.'),x}}function f(){if(e.Konva.isUnminified)return function(x,y){const v=Int8Array?Object.getPrototypeOf(Int8Array):null;return v&&x instanceof v||(t.Util._isArray(x)?x.forEach(function(T){t.Util._isNumber(T)||t.Util.warn('"'+y+'" attribute has non numeric element '+T+". Make sure that all elements are numbers.")}):t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a array of numbers.')),x}}function h(){if(e.Konva.isUnminified)return function(x,y){return x===!0||x===!1||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a boolean.'),x}}function g(x){if(e.Konva.isUnminified)return function(y,v){return y==null||t.Util.isObject(y)||t.Util.warn(r(y)+' is a not valid value for "'+v+'" attribute. The value should be an object with properties '+x),y}}return el}var fj;function Cn(){return fj||(fj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=ga(),r=Nn(),n="get",s="set";e.Factory={addGetterSetter(a,i,o,l,u){e.Factory.addGetter(a,i,o),e.Factory.addSetter(a,i,l,u),e.Factory.addOverloadedGetterSetter(a,i)},addGetter(a,i,o){const l=n+t.Util._capitalize(i);a.prototype[l]=a.prototype[l]||function(){const u=this.attrs[i];return u===void 0?o:u}},addSetter(a,i,o,l){const u=s+t.Util._capitalize(i);a.prototype[u]||e.Factory.overWriteSetter(a,i,o,l)},overWriteSetter(a,i,o,l){const u=s+t.Util._capitalize(i);a.prototype[u]=function(d){return o&&d!==void 0&&d!==null&&(d=o.call(this,d,i)),this._setAttr(i,d),l&&l.call(this),this}},addComponentsGetterSetter(a,i,o,l,u){const d=o.length,f=t.Util._capitalize,h=n+f(i),g=s+f(i);a.prototype[h]=function(){const y={};for(let v=0;v<d;v++){const T=o[v];y[T]=this.getAttr(i+f(T))}return y};const x=(0,r.getComponentValidator)(o);a.prototype[g]=function(y){const v=this.attrs[i];l&&(y=l.call(this,y,i)),x&&x.call(this,y,i);for(const T in y)y.hasOwnProperty(T)&&this._setAttr(i+f(T),y[T]);return y||o.forEach(T=>{this._setAttr(i+f(T),void 0)}),this._fireChangeEvent(i,v,y),u&&u.call(this),this},e.Factory.addOverloadedGetterSetter(a,i)},addOverloadedGetterSetter(a,i){const o=t.Util._capitalize(i),l=s+o,u=n+o;a.prototype[i]=function(){return arguments.length?(this[l](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(a,i,o,l){t.Util.error("Adding deprecated "+i);const u=n+t.Util._capitalize(i),d=i+" property is deprecated and will be removed soon. Look at Konva change log for more information.";a.prototype[u]=function(){t.Util.error(d);const f=this.attrs[i];return f===void 0?o:f},e.Factory.addSetter(a,i,l,function(){t.Util.error(d)}),e.Factory.addOverloadedGetterSetter(a,i)},backCompat(a,i){t.Util.each(i,function(o,l){const u=a.prototype[l],d=n+t.Util._capitalize(o),f=s+t.Util._capitalize(o);function h(){u.apply(this,arguments),t.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}a.prototype[o]=h,a.prototype[d]=h,a.prototype[f]=h})},afterSetFilter(){this._filterUpToDate=!1}}})(W5)),W5}var hj;function Aa(){if(hj)return Cx;hj=1,Object.defineProperty(Cx,"__esModule",{value:!0}),Cx.Node=void 0;const e=j_(),t=kT(),r=Cn(),n=wn(),s=ga(),a=Nn(),i="absoluteOpacity",o="allEventListeners",l="absoluteTransform",u="absoluteScale",d="canvas",f="Change",h="children",g="konva",x="listening",y="mouseenter",v="mouseleave",T="pointerenter",k="pointerleave",b="touchenter",N="touchleave",E="set",P="Shape",M=" ",j="stage",A="transform",O="Stage",L="visible",q=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(M);let Q=1,ae=class Vk{constructor(B){this._id=Q++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(B),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(B){(B===A||B===l)&&this._cache.get(B)?this._cache.get(B).dirty=!0:B?this._cache.delete(B):this._cache.clear()}_getCache(B,V){let R=this._cache.get(B);return(R===void 0||(B===A||B===l)&&R.dirty===!0)&&(R=V.call(this),this._cache.set(B,R)),R}_calculate(B,V,R){if(!this._attachedDepsListeners.get(B)){const H=V.map(U=>U+"Change.konva").join(M);this.on(H,()=>{this._clearCache(B)}),this._attachedDepsListeners.set(B,!0)}return this._getCache(B,R)}_getCanvasCache(){return this._cache.get(d)}_clearSelfAndDescendantCache(B){this._clearCache(B),B===l&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(d)){const{scene:B,filter:V,hit:R,buffer:H}=this._cache.get(d);s.Util.releaseCanvas(B,V,R,H),this._cache.delete(d)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(B){const V=B||{};let R={};(V.x===void 0||V.y===void 0||V.width===void 0||V.height===void 0)&&(R=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let H=Math.ceil(V.width||R.width),U=Math.ceil(V.height||R.height),I=V.pixelRatio,W=V.x===void 0?Math.floor(R.x):V.x,K=V.y===void 0?Math.floor(R.y):V.y,Z=V.offset||0,oe=V.drawBorder||!1,J=V.hitCanvasPixelRatio||1;if(!H||!U){s.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const le=Math.abs(Math.round(R.x)-W)>.5?1:0,ue=Math.abs(Math.round(R.y)-K)>.5?1:0;H+=Z*2+le,U+=Z*2+ue,W-=Z,K-=Z;const de=new e.SceneCanvas({pixelRatio:I,width:H,height:U}),Te=new e.SceneCanvas({pixelRatio:I,width:0,height:0,willReadFrequently:!0}),ie=new e.HitCanvas({pixelRatio:J,width:H,height:U}),xe=de.getContext(),Ae=ie.getContext(),Me=new e.SceneCanvas({width:de.width/de.pixelRatio+Math.abs(W),height:de.height/de.pixelRatio+Math.abs(K),pixelRatio:de.pixelRatio}),Je=Me.getContext();return ie.isCache=!0,de.isCache=!0,this._cache.delete(d),this._filterUpToDate=!1,V.imageSmoothingEnabled===!1&&(de.getContext()._context.imageSmoothingEnabled=!1,Te.getContext()._context.imageSmoothingEnabled=!1),xe.save(),Ae.save(),Je.save(),xe.translate(-W,-K),Ae.translate(-W,-K),Je.translate(-W,-K),Me.x=W,Me.y=K,this._isUnderCache=!0,this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(u),this.drawScene(de,this,Me),this.drawHit(ie,this),this._isUnderCache=!1,xe.restore(),Ae.restore(),oe&&(xe.save(),xe.beginPath(),xe.rect(0,0,H,U),xe.closePath(),xe.setAttr("strokeStyle","red"),xe.setAttr("lineWidth",5),xe.stroke(),xe.restore()),this._cache.set(d,{scene:de,filter:Te,hit:ie,buffer:Me,x:W,y:K}),this._requestDraw(),this}isCached(){return this._cache.has(d)}getClientRect(B){throw new Error('abstract "getClientRect" method call')}_transformedRect(B,V){const R=[{x:B.x,y:B.y},{x:B.x+B.width,y:B.y},{x:B.x+B.width,y:B.y+B.height},{x:B.x,y:B.y+B.height}];let H=1/0,U=1/0,I=-1/0,W=-1/0;const K=this.getAbsoluteTransform(V);return R.forEach(function(Z){const oe=K.point(Z);H===void 0&&(H=I=oe.x,U=W=oe.y),H=Math.min(H,oe.x),U=Math.min(U,oe.y),I=Math.max(I,oe.x),W=Math.max(W,oe.y)}),{x:H,y:U,width:I-H,height:W-U}}_drawCachedSceneCanvas(B){B.save(),B._applyOpacity(this),B._applyGlobalCompositeOperation(this);const V=this._getCanvasCache();B.translate(V.x,V.y);const R=this._getCachedSceneCanvas(),H=R.pixelRatio;B.drawImage(R._canvas,0,0,R.width/H,R.height/H),B.restore()}_drawCachedHitCanvas(B){const V=this._getCanvasCache(),R=V.hit;B.save(),B.translate(V.x,V.y),B.drawImage(R._canvas,0,0,R.width/R.pixelRatio,R.height/R.pixelRatio),B.restore()}_getCachedSceneCanvas(){let B=this.filters(),V=this._getCanvasCache(),R=V.scene,H=V.filter,U=H.getContext(),I,W,K,Z;if(B){if(!this._filterUpToDate){const oe=R.pixelRatio;H.setSize(R.width/R.pixelRatio,R.height/R.pixelRatio);try{for(I=B.length,U.clear(),U.drawImage(R._canvas,0,0,R.getWidth()/oe,R.getHeight()/oe),W=U.getImageData(0,0,H.getWidth(),H.getHeight()),K=0;K<I;K++){if(Z=B[K],typeof Z!="function"){s.Util.error("Filter should be type of function, but got "+typeof Z+" instead. Please check correct filters");continue}Z.call(this,W),U.putImageData(W,0,0)}}catch(J){s.Util.error("Unable to apply filter. "+J.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return H}return R}on(B,V){if(this._cache&&this._cache.delete(o),arguments.length===3)return this._delegate.apply(this,arguments);const R=B.split(M);for(let H=0;H<R.length;H++){const I=R[H].split("."),W=I[0],K=I[1]||"";this.eventListeners[W]||(this.eventListeners[W]=[]),this.eventListeners[W].push({name:K,handler:V})}return this}off(B,V){let R=(B||"").split(M),H=R.length,U,I,W,K,Z,oe;if(this._cache&&this._cache.delete(o),!B)for(I in this.eventListeners)this._off(I);for(U=0;U<H;U++)if(W=R[U],K=W.split("."),Z=K[0],oe=K[1],Z)this.eventListeners[Z]&&this._off(Z,oe,V);else for(I in this.eventListeners)this._off(I,oe,V);return this}dispatchEvent(B){const V={target:this,type:B.type,evt:B};return this.fire(B.type,V),this}addEventListener(B,V){return this.on(B,function(R){V.call(this,R.evt)}),this}removeEventListener(B){return this.off(B),this}_delegate(B,V,R){const H=this;this.on(B,function(U){const I=U.target.findAncestors(V,!0,H);for(let W=0;W<I.length;W++)U=s.Util.cloneObject(U),U.currentTarget=I[W],R.call(I[W],U)})}remove(){return this.isDragging()&&this.stopDrag(),t.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(j),this._clearSelfAndDescendantCache(L),this._clearSelfAndDescendantCache(x)}_remove(){this._clearCaches();const B=this.getParent();B&&B.children&&(B.children.splice(this.index,1),B._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(B){const V="get"+s.Util._capitalize(B);return s.Util._isFunction(this[V])?this[V]():this.attrs[B]}getAncestors(){let B=this.getParent(),V=[];for(;B;)V.push(B),B=B.getParent();return V}getAttrs(){return this.attrs||{}}setAttrs(B){return this._batchTransformChanges(()=>{let V,R;if(!B)return this;for(V in B)V!==h&&(R=E+s.Util._capitalize(V),s.Util._isFunction(this[R])?this[R](B[V]):this._setAttr(V,B[V]))}),this}isListening(){return this._getCache(x,this._isListening)}_isListening(B){if(!this.listening())return!1;const R=this.getParent();return R&&R!==B&&this!==B?R._isListening(B):!0}isVisible(){return this._getCache(L,this._isVisible)}_isVisible(B){if(!this.visible())return!1;const R=this.getParent();return R&&R!==B&&this!==B?R._isVisible(B):!0}shouldDrawHit(B,V=!1){if(B)return this._isVisible(B)&&this._isListening(B);const R=this.getLayer();let H=!1;t.DD._dragElements.forEach(I=>{I.dragStatus==="dragging"&&(I.node.nodeType==="Stage"||I.node.getLayer()===R)&&(H=!0)});const U=!V&&!n.Konva.hitOnDragEnabled&&(H||n.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!U}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let B=this.getDepth(),V=this,R=0,H,U,I,W;function K(oe){for(H=[],U=oe.length,I=0;I<U;I++)W=oe[I],R++,W.nodeType!==P&&(H=H.concat(W.getChildren().slice())),W._id===V._id&&(I=U);H.length>0&&H[0].getDepth()<=B&&K(H)}const Z=this.getStage();return V.nodeType!==O&&Z&&K(Z.getChildren()),R}getDepth(){let B=0,V=this.parent;for(;V;)B++,V=V.parent;return B}_batchTransformChanges(B){this._batchingTransformChange=!0,B(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(A),this._clearSelfAndDescendantCache(l)),this._needClearTransformCache=!1}setPosition(B){return this._batchTransformChanges(()=>{this.x(B.x),this.y(B.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const B=this.getStage();if(!B)return null;const V=B.getPointerPosition();if(!V)return null;const R=this.getAbsoluteTransform().copy();return R.invert(),R.point(V)}getAbsolutePosition(B){let V=!1,R=this.parent;for(;R;){if(R.isCached()){V=!0;break}R=R.parent}V&&!B&&(B=!0);const H=this.getAbsoluteTransform(B).getMatrix(),U=new s.Transform,I=this.offset();return U.m=H.slice(),U.translate(I.x,I.y),U.getTranslation()}setAbsolutePosition(B){const{x:V,y:R,...H}=this._clearTransform();this.attrs.x=V,this.attrs.y=R,this._clearCache(A);const U=this._getAbsoluteTransform().copy();return U.invert(),U.translate(B.x,B.y),B={x:this.attrs.x+U.getTranslation().x,y:this.attrs.y+U.getTranslation().y},this._setTransform(H),this.setPosition({x:B.x,y:B.y}),this._clearCache(A),this._clearSelfAndDescendantCache(l),this}_setTransform(B){let V;for(V in B)this.attrs[V]=B[V]}_clearTransform(){const B={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,B}move(B){let V=B.x,R=B.y,H=this.x(),U=this.y();return V!==void 0&&(H+=V),R!==void 0&&(U+=R),this.setPosition({x:H,y:U}),this}_eachAncestorReverse(B,V){let R=[],H=this.getParent(),U,I;if(!(V&&V._id===this._id)){for(R.unshift(this);H&&(!V||H._id!==V._id);)R.unshift(H),H=H.parent;for(U=R.length,I=0;I<U;I++)B(R[I])}}rotate(B){return this.rotation(this.rotation()+B),this}moveToTop(){if(!this.parent)return s.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const B=this.index,V=this.parent.getChildren().length;return B<V-1?(this.parent.children.splice(B,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return s.Util.warn("Node has no parent. moveUp function is ignored."),!1;const B=this.index,V=this.parent.getChildren().length;return B<V-1?(this.parent.children.splice(B,1),this.parent.children.splice(B+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return s.Util.warn("Node has no parent. moveDown function is ignored."),!1;const B=this.index;return B>0?(this.parent.children.splice(B,1),this.parent.children.splice(B-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return s.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const B=this.index;return B>0?(this.parent.children.splice(B,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(B){if(!this.parent)return s.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(B<0||B>=this.parent.children.length)&&s.Util.warn("Unexpected value "+B+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const V=this.index;return this.parent.children.splice(V,1),this.parent.children.splice(B,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(i,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let B=this.opacity();const V=this.getParent();return V&&!V._isUnderCache&&(B*=V.getAbsoluteOpacity()),B}moveTo(B){return this.getParent()!==B&&(this._remove(),B.add(this)),this}toObject(){let B=this.getAttrs(),V,R,H,U,I;const W={attrs:{},className:this.getClassName()};for(V in B)R=B[V],I=s.Util.isObject(R)&&!s.Util._isPlainObject(R)&&!s.Util._isArray(R),!I&&(H=typeof this[V]=="function"&&this[V],delete B[V],U=H?H.call(this):null,B[V]=R,U!==R&&(W.attrs[V]=R));return s.Util._prepareToStringify(W)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(B,V,R){const H=[];V&&this._isMatch(B)&&H.push(this);let U=this.parent;for(;U;){if(U===R)return H;U._isMatch(B)&&H.push(U),U=U.parent}return H}isAncestorOf(B){return!1}findAncestor(B,V,R){return this.findAncestors(B,V,R)[0]}_isMatch(B){if(!B)return!1;if(typeof B=="function")return B(this);let V=B.replace(/ /g,"").split(","),R=V.length,H,U;for(H=0;H<R;H++)if(U=V[H],s.Util.isValidSelector(U)||(s.Util.warn('Selector "'+U+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),s.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),s.Util.warn("Konva is awesome, right?")),U.charAt(0)==="#"){if(this.id()===U.slice(1))return!0}else if(U.charAt(0)==="."){if(this.hasName(U.slice(1)))return!0}else if(this.className===U||this.nodeType===U)return!0;return!1}getLayer(){const B=this.getParent();return B?B.getLayer():null}getStage(){return this._getCache(j,this._getStage)}_getStage(){const B=this.getParent();return B?B.getStage():null}fire(B,V={},R){return V.target=V.target||this,R?this._fireAndBubble(B,V):this._fire(B,V),this}getAbsoluteTransform(B){return B?this._getAbsoluteTransform(B):this._getCache(l,this._getAbsoluteTransform)}_getAbsoluteTransform(B){let V;if(B)return V=new s.Transform,this._eachAncestorReverse(function(R){const H=R.transformsEnabled();H==="all"?V.multiply(R.getTransform()):H==="position"&&V.translate(R.x()-R.offsetX(),R.y()-R.offsetY())},B),V;{V=this._cache.get(l)||new s.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(V):V.reset();const R=this.transformsEnabled();if(R==="all")V.multiply(this.getTransform());else if(R==="position"){const H=this.attrs.x||0,U=this.attrs.y||0,I=this.attrs.offsetX||0,W=this.attrs.offsetY||0;V.translate(H-I,U-W)}return V.dirty=!1,V}}getAbsoluteScale(B){let V=this;for(;V;)V._isUnderCache&&(B=V),V=V.getParent();const H=this.getAbsoluteTransform(B).decompose();return{x:H.scaleX,y:H.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(A,this._getTransform)}_getTransform(){var B,V;const R=this._cache.get(A)||new s.Transform;R.reset();const H=this.x(),U=this.y(),I=n.Konva.getAngle(this.rotation()),W=(B=this.attrs.scaleX)!==null&&B!==void 0?B:1,K=(V=this.attrs.scaleY)!==null&&V!==void 0?V:1,Z=this.attrs.skewX||0,oe=this.attrs.skewY||0,J=this.attrs.offsetX||0,le=this.attrs.offsetY||0;return(H!==0||U!==0)&&R.translate(H,U),I!==0&&R.rotate(I),(Z!==0||oe!==0)&&R.skew(Z,oe),(W!==1||K!==1)&&R.scale(W,K),(J!==0||le!==0)&&R.translate(-1*J,-1*le),R.dirty=!1,R}clone(B){let V=s.Util.cloneObject(this.attrs),R,H,U,I,W;for(R in B)V[R]=B[R];const K=new this.constructor(V);for(R in this.eventListeners)for(H=this.eventListeners[R],U=H.length,I=0;I<U;I++)W=H[I],W.name.indexOf(g)<0&&(K.eventListeners[R]||(K.eventListeners[R]=[]),K.eventListeners[R].push(W));return K}_toKonvaCanvas(B){B=B||{};const V=this.getClientRect(),R=this.getStage(),H=B.x!==void 0?B.x:Math.floor(V.x),U=B.y!==void 0?B.y:Math.floor(V.y),I=B.pixelRatio||1,W=new e.SceneCanvas({width:B.width||Math.ceil(V.width)||(R?R.width():0),height:B.height||Math.ceil(V.height)||(R?R.height():0),pixelRatio:I}),K=W.getContext(),Z=new e.SceneCanvas({width:W.width/W.pixelRatio+Math.abs(H),height:W.height/W.pixelRatio+Math.abs(U),pixelRatio:W.pixelRatio});return B.imageSmoothingEnabled===!1&&(K._context.imageSmoothingEnabled=!1),K.save(),(H||U)&&K.translate(-1*H,-1*U),this.drawScene(W,void 0,Z),K.restore(),W}toCanvas(B){return this._toKonvaCanvas(B)._canvas}toDataURL(B){B=B||{};const V=B.mimeType||null,R=B.quality||null,H=this._toKonvaCanvas(B).toDataURL(V,R);return B.callback&&B.callback(H),H}toImage(B){return new Promise((V,R)=>{try{const H=B?.callback;H&&delete B.callback,s.Util._urlToImage(this.toDataURL(B),function(U){V(U),H?.(U)})}catch(H){R(H)}})}toBlob(B){return new Promise((V,R)=>{try{const H=B?.callback;H&&delete B.callback,this.toCanvas(B).toBlob(U=>{V(U),H?.(U)},B?.mimeType,B?.quality)}catch(H){R(H)}})}setSize(B){return this.width(B.width),this.height(B.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():n.Konva.dragDistance}_off(B,V,R){let H=this.eventListeners[B],U,I,W;for(U=0;U<H.length;U++)if(I=H[U].name,W=H[U].handler,(I!=="konva"||V==="konva")&&(!V||I===V)&&(!R||R===W)){if(H.splice(U,1),H.length===0){delete this.eventListeners[B];break}U--}}_fireChangeEvent(B,V,R){this._fire(B+f,{oldVal:V,newVal:R})}addName(B){if(!this.hasName(B)){const V=this.name(),R=V?V+" "+B:B;this.name(R)}return this}hasName(B){if(!B)return!1;const V=this.name();return V?(V||"").split(/\s/g).indexOf(B)!==-1:!1}removeName(B){const V=(this.name()||"").split(/\s/g),R=V.indexOf(B);return R!==-1&&(V.splice(R,1),this.name(V.join(" "))),this}setAttr(B,V){const R=this[E+s.Util._capitalize(B)];return s.Util._isFunction(R)?R.call(this,V):this._setAttr(B,V),this}_requestDraw(){if(n.Konva.autoDrawEnabled){const B=this.getLayer()||this.getStage();B?.batchDraw()}}_setAttr(B,V){const R=this.attrs[B];R===V&&!s.Util.isObject(V)||(V==null?delete this.attrs[B]:this.attrs[B]=V,this._shouldFireChangeEvents&&this._fireChangeEvent(B,R,V),this._requestDraw())}_setComponentAttr(B,V,R){let H;R!==void 0&&(H=this.attrs[B],H||(this.attrs[B]=this.getAttr(B)),this.attrs[B][V]=R,this._fireChangeEvent(B,H,R))}_fireAndBubble(B,V,R){V&&this.nodeType===P&&(V.target=this);const H=[y,v,T,k,b,N];if(!(H.indexOf(B)!==-1&&(R&&(this===R||this.isAncestorOf&&this.isAncestorOf(R))||this.nodeType==="Stage"&&!R))){this._fire(B,V);const I=H.indexOf(B)!==-1&&R&&R.isAncestorOf&&R.isAncestorOf(this)&&!R.isAncestorOf(this.parent);(V&&!V.cancelBubble||!V)&&this.parent&&this.parent.isListening()&&!I&&(R&&R.parent?this._fireAndBubble.call(this.parent,B,V,R):this._fireAndBubble.call(this.parent,B,V))}}_getProtoListeners(B){var V,R,H;const U=(V=this._cache.get(o))!==null&&V!==void 0?V:{};let I=U?.[B];if(I===void 0){I=[];let W=Object.getPrototypeOf(this);for(;W;){const K=(H=(R=W.eventListeners)===null||R===void 0?void 0:R[B])!==null&&H!==void 0?H:[];I.push(...K),W=Object.getPrototypeOf(W)}U[B]=I,this._cache.set(o,U)}return I}_fire(B,V){V=V||{},V.currentTarget=this,V.type=B;const R=this._getProtoListeners(B);if(R)for(let U=0;U<R.length;U++)R[U].handler.call(this,V);const H=this.eventListeners[B];if(H)for(let U=0;U<H.length;U++)H[U].handler.call(this,V)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(B){const V=B?B.pointerId:void 0,R=this.getStage(),H=this.getAbsolutePosition();if(!R)return;const U=R._getPointerById(V)||R._changedPointerPositions[0]||H;t.DD._dragElements.set(this._id,{node:this,startPointerPos:U,offset:{x:U.x-H.x,y:U.y-H.y},dragStatus:"ready",pointerId:V})}startDrag(B,V=!0){t.DD._dragElements.has(this._id)||this._createDragElement(B);const R=t.DD._dragElements.get(this._id);R.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:B&&B.evt},V)}_setDragPosition(B,V){const R=this.getStage()._getPointerById(V.pointerId);if(!R)return;let H={x:R.x-V.offset.x,y:R.y-V.offset.y};const U=this.dragBoundFunc();if(U!==void 0){const I=U.call(this,H,B);I?H=I:s.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==H.x||this._lastPos.y!==H.y)&&(this.setAbsolutePosition(H),this._requestDraw()),this._lastPos=H}stopDrag(B){const V=t.DD._dragElements.get(this._id);V&&(V.dragStatus="stopped"),t.DD._endDragBefore(B),t.DD._endDragAfter(B)}setDraggable(B){this._setAttr("draggable",B),this._dragChange()}isDragging(){const B=t.DD._dragElements.get(this._id);return B?B.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(B){if(!(!(B.evt.button!==void 0)||n.Konva.dragButtons.indexOf(B.evt.button)>=0)||this.isDragging())return;let H=!1;t.DD._dragElements.forEach(U=>{this.isAncestorOf(U.node)&&(H=!0)}),H||this._createDragElement(B)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const V=t.DD._dragElements.get(this._id),R=V&&V.dragStatus==="dragging",H=V&&V.dragStatus==="ready";R?this.stopDrag():H&&t.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(B={x:0,y:0}){const V=this.getStage();if(!V)return!1;const R={x:-B.x,y:-B.y,width:V.width()+2*B.x,height:V.height()+2*B.y};return s.Util.haveIntersection(R,this.getClientRect())}static create(B,V){return s.Util._isString(B)&&(B=JSON.parse(B)),this._createNode(B,V)}static _createNode(B,V){let R=Vk.prototype.getClassName.call(B),H=B.children,U,I,W;V&&(B.attrs.container=V),n.Konva[R]||(s.Util.warn('Can not find a node with class name "'+R+'". Fallback to "Shape".'),R="Shape");const K=n.Konva[R];if(U=new K(B.attrs),H)for(I=H.length,W=0;W<I;W++)U.add(Vk._createNode(H[W]));return U}};Cx.Node=ae,ae.prototype.nodeType="Node",ae.prototype._attrsAffectingSize=[],ae.prototype.eventListeners={},ae.prototype.on.call(ae.prototype,q,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(A),this._clearSelfAndDescendantCache(l)}),ae.prototype.on.call(ae.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(L)}),ae.prototype.on.call(ae.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(x)}),ae.prototype.on.call(ae.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(i)});const te=r.Factory.addGetterSetter;return te(ae,"zIndex"),te(ae,"absolutePosition"),te(ae,"position"),te(ae,"x",0,(0,a.getNumberValidator)()),te(ae,"y",0,(0,a.getNumberValidator)()),te(ae,"globalCompositeOperation","source-over",(0,a.getStringValidator)()),te(ae,"opacity",1,(0,a.getNumberValidator)()),te(ae,"name","",(0,a.getStringValidator)()),te(ae,"id","",(0,a.getStringValidator)()),te(ae,"rotation",0,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(ae,"scale",["x","y"]),te(ae,"scaleX",1,(0,a.getNumberValidator)()),te(ae,"scaleY",1,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(ae,"skew",["x","y"]),te(ae,"skewX",0,(0,a.getNumberValidator)()),te(ae,"skewY",0,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(ae,"offset",["x","y"]),te(ae,"offsetX",0,(0,a.getNumberValidator)()),te(ae,"offsetY",0,(0,a.getNumberValidator)()),te(ae,"dragDistance",void 0,(0,a.getNumberValidator)()),te(ae,"width",0,(0,a.getNumberValidator)()),te(ae,"height",0,(0,a.getNumberValidator)()),te(ae,"listening",!0,(0,a.getBooleanValidator)()),te(ae,"preventDefault",!0,(0,a.getBooleanValidator)()),te(ae,"filters",void 0,function(ne){return this._filterUpToDate=!1,ne}),te(ae,"visible",!0,(0,a.getBooleanValidator)()),te(ae,"transformsEnabled","all",(0,a.getStringValidator)()),te(ae,"size"),te(ae,"dragBoundFunc"),te(ae,"draggable",!1,(0,a.getBooleanValidator)()),r.Factory.backCompat(ae,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Cx}var Ex={},mj;function P_(){if(mj)return Ex;mj=1,Object.defineProperty(Ex,"__esModule",{value:!0}),Ex.Container=void 0;const e=Cn(),t=Aa(),r=Nn();let n=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(a){const i=this.children||[];return a?i.filter(a):i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.destroy()}),this.children=[],this._requestDraw(),this}add(...a){if(a.length===0)return this;if(a.length>1){for(let o=0;o<a.length;o++)this.add(a[o]);return this}const i=a[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(a){return this._generalFind(a,!1)}findOne(a){const i=this._generalFind(a,!0);return i.length>0?i[0]:void 0}_generalFind(a,i){const o=[];return this._descendants(l=>{const u=l._isMatch(a);return u&&o.push(l),!!(u&&i)}),o}_descendants(a){let i=!1;const o=this.getChildren();for(const l of o){if(i=a(l),i)return!0;if(l.hasChildren()&&(i=l._descendants(a),i))return!0}return!1}toObject(){const a=t.Node.prototype.toObject.call(this);return a.children=[],this.getChildren().forEach(i=>{a.children.push(i.toObject())}),a}isAncestorOf(a){let i=a.getParent();for(;i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(a){const i=t.Node.prototype.clone.call(this,a);return this.getChildren().forEach(function(o){i.add(o.clone())}),i}getAllIntersections(a){const i=[];return this.find("Shape").forEach(o=>{o.isVisible()&&o.intersects(a)&&i.push(o)}),i}_clearSelfAndDescendantCache(a){var i;super._clearSelfAndDescendantCache(a),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(o){o._clearSelfAndDescendantCache(a)}))}_setChildrenIndices(){var a;(a=this.children)===null||a===void 0||a.forEach(function(i,o){i.index=o}),this._requestDraw()}drawScene(a,i,o){const l=this.getLayer(),u=a||l&&l.getCanvas(),d=u&&u.getContext(),f=this._getCanvasCache(),h=f&&f.scene,g=u&&u.isCache;if(!this.isVisible()&&!g)return this;if(h){d.save();const x=this.getAbsoluteTransform(i).getMatrix();d.transform(x[0],x[1],x[2],x[3],x[4],x[5]),this._drawCachedSceneCanvas(d),d.restore()}else this._drawChildren("drawScene",u,i,o);return this}drawHit(a,i){if(!this.shouldDrawHit(i))return this;const o=this.getLayer(),l=a||o&&o.hitCanvas,u=l&&l.getContext(),d=this._getCanvasCache();if(d&&d.hit){u.save();const h=this.getAbsoluteTransform(i).getMatrix();u.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedHitCanvas(u),u.restore()}else this._drawChildren("drawHit",l,i);return this}_drawChildren(a,i,o,l){var u;const d=i&&i.getContext(),f=this.clipWidth(),h=this.clipHeight(),g=this.clipFunc(),x=typeof f=="number"&&typeof h=="number"||g,y=o===this;if(x){d.save();const T=this.getAbsoluteTransform(o);let k=T.getMatrix();d.transform(k[0],k[1],k[2],k[3],k[4],k[5]),d.beginPath();let b;if(g)b=g.call(this,d,this);else{const N=this.clipX(),E=this.clipY();d.rect(N||0,E||0,f,h)}d.clip.apply(d,b),k=T.copy().invert().getMatrix(),d.transform(k[0],k[1],k[2],k[3],k[4],k[5])}const v=!y&&this.globalCompositeOperation()!=="source-over"&&a==="drawScene";v&&(d.save(),d._applyGlobalCompositeOperation(this)),(u=this.children)===null||u===void 0||u.forEach(function(T){T[a](i,o,l)}),v&&d.restore(),x&&d.restore()}getClientRect(a={}){var i;const o=a.skipTransform,l=a.relativeTo;let u,d,f,h,g={x:1/0,y:1/0,width:0,height:0};const x=this;(i=this.children)===null||i===void 0||i.forEach(function(T){if(!T.visible())return;const k=T.getClientRect({relativeTo:x,skipShadow:a.skipShadow,skipStroke:a.skipStroke});k.width===0&&k.height===0||(u===void 0?(u=k.x,d=k.y,f=k.x+k.width,h=k.y+k.height):(u=Math.min(u,k.x),d=Math.min(d,k.y),f=Math.max(f,k.x+k.width),h=Math.max(h,k.y+k.height)))});const y=this.find("Shape");let v=!1;for(let T=0;T<y.length;T++)if(y[T]._isVisible(this)){v=!0;break}return v&&u!==void 0?g={x:u,y:d,width:f-u,height:h-d}:g={x:0,y:0,width:0,height:0},o?g:this._transformedRect(g,l)}};return Ex.Container=n,e.Factory.addComponentsGetterSetter(n,"clip",["x","y","width","height"]),e.Factory.addGetterSetter(n,"clipX",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipY",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipWidth",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipHeight",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipFunc"),Ex}var H5={},cf={},gj;function U$(){if(gj)return cf;gj=1,Object.defineProperty(cf,"__esModule",{value:!0}),cf.getCapturedShape=n,cf.createEvent=s,cf.hasPointerCapture=a,cf.setPointerCapture=i,cf.releaseCapture=o;const e=wn(),t=new Map,r=e.Konva._global.PointerEvent!==void 0;function n(l){return t.get(l)}function s(l){return{evt:l,pointerId:l.pointerId}}function a(l,u){return t.get(l)===u}function i(l,u){o(l),u.getStage()&&(t.set(l,u),r&&u._fire("gotpointercapture",s(new PointerEvent("gotpointercapture"))))}function o(l,u){const d=t.get(l);if(!d)return;const f=d.getStage();f&&f.content,t.delete(l),r&&d._fire("lostpointercapture",s(new PointerEvent("lostpointercapture")))}return cf}var pj;function nne(){return pj||(pj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=ga(),r=Cn(),n=P_(),s=wn(),a=j_(),i=kT(),o=wn(),l=U$(),u="Stage",d="string",f="px",h="mouseout",g="mouseleave",x="mouseover",y="mouseenter",v="mousemove",T="mousedown",k="mouseup",b="pointermove",N="pointerdown",E="pointerup",P="pointercancel",M="lostpointercapture",j="pointerout",A="pointerleave",O="pointerover",L="pointerenter",q="contextmenu",Q="touchstart",ae="touchend",te="touchmove",ne="touchcancel",B="wheel",V=5,R=[[y,"_pointerenter"],[T,"_pointerdown"],[v,"_pointermove"],[k,"_pointerup"],[g,"_pointerleave"],[Q,"_pointerdown"],[te,"_pointermove"],[ae,"_pointerup"],[ne,"_pointercancel"],[x,"_pointerover"],[B,"_wheel"],[q,"_contextmenu"],[N,"_pointerdown"],[b,"_pointermove"],[E,"_pointerup"],[P,"_pointercancel"],[A,"_pointerleave"],[M,"_lostpointercapture"]],H={mouse:{[j]:h,[A]:g,[O]:x,[L]:y,[b]:v,[N]:T,[E]:k,[P]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[j]:"touchout",[A]:"touchleave",[O]:"touchover",[L]:"touchenter",[b]:te,[N]:Q,[E]:ae,[P]:ne,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[j]:j,[A]:A,[O]:O,[L]:L,[b]:b,[N]:N,[E]:E,[P]:P,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},U=oe=>oe.indexOf("pointer")>=0?"pointer":oe.indexOf("touch")>=0?"touch":"mouse",I=oe=>{const J=U(oe);if(J==="pointer")return s.Konva.pointerEventsEnabled&&H.pointer;if(J==="touch")return H.touch;if(J==="mouse")return H.mouse};function W(oe={}){return(oe.clipFunc||oe.clipWidth||oe.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),oe}const K="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class Z extends n.Container{constructor(J){super(W(J)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{W(this.attrs)}),this._checkVisibility()}_validateAdd(J){const le=J.getType()==="Layer",ue=J.getType()==="FastLayer";le||ue||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const J=this.visible()?"":"none";this.content.style.display=J}setContainer(J){if(typeof J===d){let le;if(J.charAt(0)==="."){const ue=J.slice(1);J=document.getElementsByClassName(ue)[0]}else J.charAt(0)!=="#"?le=J:le=J.slice(1),J=document.getElementById(le);if(!J)throw"Can not find container in document with id "+le}return this._setAttr("container",J),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),J.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const J=this.children,le=J.length;for(let ue=0;ue<le;ue++)J[ue].clear();return this}clone(J){return J||(J={}),J.container=typeof document<"u"&&document.createElement("div"),n.Container.prototype.clone.call(this,J)}destroy(){super.destroy();const J=this.content;J&&t.Util._isInDocument(J)&&this.container().removeChild(J);const le=e.stages.indexOf(this);return le>-1&&e.stages.splice(le,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const J=this._pointerPositions[0]||this._changedPointerPositions[0];return J?{x:J.x,y:J.y}:(t.Util.warn(K),null)}_getPointerById(J){return this._pointerPositions.find(le=>le.id===J)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(J){J=J||{},J.x=J.x||0,J.y=J.y||0,J.width=J.width||this.width(),J.height=J.height||this.height();const le=new a.SceneCanvas({width:J.width,height:J.height,pixelRatio:J.pixelRatio||1}),ue=le.getContext()._context,de=this.children;return(J.x||J.y)&&ue.translate(-1*J.x,-1*J.y),de.forEach(function(Te){if(!Te.isVisible())return;const ie=Te._toKonvaCanvas(J);ue.drawImage(ie._canvas,J.x,J.y,ie.getWidth()/ie.getPixelRatio(),ie.getHeight()/ie.getPixelRatio())}),le}getIntersection(J){if(!J)return null;const le=this.children,ue=le.length,de=ue-1;for(let Te=de;Te>=0;Te--){const ie=le[Te].getIntersection(J);if(ie)return ie}return null}_resizeDOM(){const J=this.width(),le=this.height();this.content&&(this.content.style.width=J+f,this.content.style.height=le+f),this.bufferCanvas.setSize(J,le),this.bufferHitCanvas.setSize(J,le),this.children.forEach(ue=>{ue.setSize({width:J,height:le}),ue.draw()})}add(J,...le){if(arguments.length>1){for(let de=0;de<arguments.length;de++)this.add(arguments[de]);return this}super.add(J);const ue=this.children.length;return ue>V&&t.Util.warn("The stage has "+ue+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),J.setSize({width:this.width(),height:this.height()}),J.draw(),s.Konva.isBrowser&&this.content.appendChild(J.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(J){return l.hasPointerCapture(J,this)}setPointerCapture(J){l.setPointerCapture(J,this)}releaseCapture(J){l.releaseCapture(J,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&R.forEach(([J,le])=>{this.content.addEventListener(J,ue=>{this[le](ue)},{passive:!1})})}_pointerenter(J){this.setPointersPositions(J);const le=I(J.type);le&&this._fire(le.pointerenter,{evt:J,target:this,currentTarget:this})}_pointerover(J){this.setPointersPositions(J);const le=I(J.type);le&&this._fire(le.pointerover,{evt:J,target:this,currentTarget:this})}_getTargetShape(J){let le=this[J+"targetShape"];return le&&!le.getStage()&&(le=null),le}_pointerleave(J){const le=I(J.type),ue=U(J.type);if(!le)return;this.setPointersPositions(J);const de=this._getTargetShape(ue),Te=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;de&&Te?(de._fireAndBubble(le.pointerout,{evt:J}),de._fireAndBubble(le.pointerleave,{evt:J}),this._fire(le.pointerleave,{evt:J,target:this,currentTarget:this}),this[ue+"targetShape"]=null):Te&&(this._fire(le.pointerleave,{evt:J,target:this,currentTarget:this}),this._fire(le.pointerout,{evt:J,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(J){const le=I(J.type),ue=U(J.type);if(!le)return;this.setPointersPositions(J);let de=!1;this._changedPointerPositions.forEach(Te=>{const ie=this.getIntersection(Te);if(i.DD.justDragged=!1,s.Konva["_"+ue+"ListenClick"]=!0,!ie||!ie.isListening()){this[ue+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&ie.setPointerCapture(Te.id),this[ue+"ClickStartShape"]=ie,ie._fireAndBubble(le.pointerdown,{evt:J,pointerId:Te.id}),de=!0;const xe=J.type.indexOf("touch")>=0;ie.preventDefault()&&J.cancelable&&xe&&J.preventDefault()}),de||this._fire(le.pointerdown,{evt:J,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(J){const le=I(J.type),ue=U(J.type);if(!le||(s.Konva.isDragging()&&i.DD.node.preventDefault()&&J.cancelable&&J.preventDefault(),this.setPointersPositions(J),!(!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled)))return;const Te={};let ie=!1;const xe=this._getTargetShape(ue);this._changedPointerPositions.forEach(Ae=>{const Me=l.getCapturedShape(Ae.id)||this.getIntersection(Ae),Je=Ae.id,He={evt:J,pointerId:Je},It=xe!==Me;if(It&&xe&&(xe._fireAndBubble(le.pointerout,{...He},Me),xe._fireAndBubble(le.pointerleave,{...He},Me)),Me){if(Te[Me._id])return;Te[Me._id]=!0}Me&&Me.isListening()?(ie=!0,It&&(Me._fireAndBubble(le.pointerover,{...He},xe),Me._fireAndBubble(le.pointerenter,{...He},xe),this[ue+"targetShape"]=Me),Me._fireAndBubble(le.pointermove,{...He})):xe&&(this._fire(le.pointerover,{evt:J,target:this,currentTarget:this,pointerId:Je}),this[ue+"targetShape"]=null)}),ie||this._fire(le.pointermove,{evt:J,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(J){const le=I(J.type),ue=U(J.type);if(!le)return;this.setPointersPositions(J);const de=this[ue+"ClickStartShape"],Te=this[ue+"ClickEndShape"],ie={};let xe=!1;this._changedPointerPositions.forEach(Ae=>{const Me=l.getCapturedShape(Ae.id)||this.getIntersection(Ae);if(Me){if(Me.releaseCapture(Ae.id),ie[Me._id])return;ie[Me._id]=!0}const Je=Ae.id,He={evt:J,pointerId:Je};let It=!1;s.Konva["_"+ue+"InDblClickWindow"]?(It=!0,clearTimeout(this[ue+"DblTimeout"])):i.DD.justDragged||(s.Konva["_"+ue+"InDblClickWindow"]=!0,clearTimeout(this[ue+"DblTimeout"])),this[ue+"DblTimeout"]=setTimeout(function(){s.Konva["_"+ue+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),Me&&Me.isListening()?(xe=!0,this[ue+"ClickEndShape"]=Me,Me._fireAndBubble(le.pointerup,{...He}),s.Konva["_"+ue+"ListenClick"]&&de&&de===Me&&(Me._fireAndBubble(le.pointerclick,{...He}),It&&Te&&Te===Me&&Me._fireAndBubble(le.pointerdblclick,{...He}))):(this[ue+"ClickEndShape"]=null,s.Konva["_"+ue+"ListenClick"]&&this._fire(le.pointerclick,{evt:J,target:this,currentTarget:this,pointerId:Je}),It&&this._fire(le.pointerdblclick,{evt:J,target:this,currentTarget:this,pointerId:Je}))}),xe||this._fire(le.pointerup,{evt:J,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+ue+"ListenClick"]=!1,J.cancelable&&ue!=="touch"&&ue!=="pointer"&&J.preventDefault()}_contextmenu(J){this.setPointersPositions(J);const le=this.getIntersection(this.getPointerPosition());le&&le.isListening()?le._fireAndBubble(q,{evt:J}):this._fire(q,{evt:J,target:this,currentTarget:this})}_wheel(J){this.setPointersPositions(J);const le=this.getIntersection(this.getPointerPosition());le&&le.isListening()?le._fireAndBubble(B,{evt:J}):this._fire(B,{evt:J,target:this,currentTarget:this})}_pointercancel(J){this.setPointersPositions(J);const le=l.getCapturedShape(J.pointerId)||this.getIntersection(this.getPointerPosition());le&&le._fireAndBubble(E,l.createEvent(J)),l.releaseCapture(J.pointerId)}_lostpointercapture(J){l.releaseCapture(J.pointerId)}setPointersPositions(J){const le=this._getContentPosition();let ue=null,de=null;J=J||window.event,J.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(J.touches,Te=>{this._pointerPositions.push({id:Te.identifier,x:(Te.clientX-le.left)/le.scaleX,y:(Te.clientY-le.top)/le.scaleY})}),Array.prototype.forEach.call(J.changedTouches||J.touches,Te=>{this._changedPointerPositions.push({id:Te.identifier,x:(Te.clientX-le.left)/le.scaleX,y:(Te.clientY-le.top)/le.scaleY})})):(ue=(J.clientX-le.left)/le.scaleX,de=(J.clientY-le.top)/le.scaleY,this.pointerPos={x:ue,y:de},this._pointerPositions=[{x:ue,y:de,id:t.Util._getFirstPointerId(J)}],this._changedPointerPositions=[{x:ue,y:de,id:t.Util._getFirstPointerId(J)}])}_setPointerPosition(J){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(J)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const J=this.content.getBoundingClientRect();return{top:J.top,left:J.left,scaleX:J.width/this.content.clientWidth||1,scaleY:J.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new a.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new a.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!s.Konva.isBrowser)return;const J=this.container();if(!J)throw"Stage has no container. A container is required.";J.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),J.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(J){J.batchDraw()}),this}}e.Stage=Z,Z.prototype.nodeType=u,(0,o._registerNode)(Z),r.Factory.addGetterSetter(Z,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(oe=>{oe.batchDraw()})})})(H5)),H5}var Nx={},G5={},xj;function ki(){return xj||(xj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=wn(),r=ga(),n=Cn(),s=Aa(),a=Nn(),i=wn(),o=U$(),l="hasShadow",u="shadowRGBA",d="patternImage",f="linearGradient",h="radialGradient";let g;function x(){return g||(g=r.Util.createCanvasElement().getContext("2d"),g)}e.shapes={};function y(A){const O=this.attrs.fillRule;O?A.fill(O):A.fill()}function v(A){A.stroke()}function T(A){const O=this.attrs.fillRule;O?A.fill(O):A.fill()}function k(A){A.stroke()}function b(){this._clearCache(l)}function N(){this._clearCache(u)}function E(){this._clearCache(d)}function P(){this._clearCache(f)}function M(){this._clearCache(h)}class j extends s.Node{constructor(O){super(O);let L;for(;L=r.Util.getRandomColor(),!(L&&!(L in e.shapes)););this.colorKey=L,e.shapes[L]=this}getContext(){return r.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return r.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const L=x().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(L&&L.setTransform){const q=new r.Transform;q.translate(this.fillPatternX(),this.fillPatternY()),q.rotate(t.Konva.getAngle(this.fillPatternRotation())),q.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),q.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const Q=q.getMatrix(),ae=typeof DOMMatrix>"u"?{a:Q[0],b:Q[1],c:Q[2],d:Q[3],e:Q[4],f:Q[5]}:new DOMMatrix(Q);L.setTransform(ae)}return L}}_getLinearGradient(){return this._getCache(f,this.__getLinearGradient)}__getLinearGradient(){const O=this.fillLinearGradientColorStops();if(O){const L=x(),q=this.fillLinearGradientStartPoint(),Q=this.fillLinearGradientEndPoint(),ae=L.createLinearGradient(q.x,q.y,Q.x,Q.y);for(let te=0;te<O.length;te+=2)ae.addColorStop(O[te],O[te+1]);return ae}}_getRadialGradient(){return this._getCache(h,this.__getRadialGradient)}__getRadialGradient(){const O=this.fillRadialGradientColorStops();if(O){const L=x(),q=this.fillRadialGradientStartPoint(),Q=this.fillRadialGradientEndPoint(),ae=L.createRadialGradient(q.x,q.y,this.fillRadialGradientStartRadius(),Q.x,Q.y,this.fillRadialGradientEndRadius());for(let te=0;te<O.length;te+=2)ae.addColorStop(O[te],O[te+1]);return ae}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const O=r.Util.colorToRGBA(this.shadowColor());if(O)return"rgba("+O.r+","+O.g+","+O.b+","+O.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const O=this.hitStrokeWidth();return O==="auto"?this.hasStroke():this.strokeEnabled()&&!!O}intersects(O){const L=this.getStage();if(!L)return!1;const q=L.bufferHitCanvas;return q.getContext().clear(),this.drawHit(q,void 0,!0),q.context.getImageData(Math.round(O.x),Math.round(O.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(O){var L;if(!((L=this.attrs.perfectDrawEnabled)!==null&&L!==void 0?L:!0))return!1;const Q=O||this.hasFill(),ae=this.hasStroke(),te=this.getAbsoluteOpacity()!==1;if(Q&&ae&&te)return!0;const ne=this.hasShadow(),B=this.shadowForStrokeEnabled();return!!(Q&&ae&&ne&&B)}setStrokeHitEnabled(O){r.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),O?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const O=this.size();return{x:this._centroid?-O.width/2:0,y:this._centroid?-O.height/2:0,width:O.width,height:O.height}}getClientRect(O={}){let L=!1,q=this.getParent();for(;q;){if(q.isCached()){L=!0;break}q=q.getParent()}const Q=O.skipTransform,ae=O.relativeTo||L&&this.getStage()||void 0,te=this.getSelfRect(),B=!O.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,V=te.width+B,R=te.height+B,H=!O.skipShadow&&this.hasShadow(),U=H?this.shadowOffsetX():0,I=H?this.shadowOffsetY():0,W=V+Math.abs(U),K=R+Math.abs(I),Z=H&&this.shadowBlur()||0,oe=W+Z*2,J=K+Z*2,le={width:oe,height:J,x:-(B/2+Z)+Math.min(U,0)+te.x,y:-(B/2+Z)+Math.min(I,0)+te.y};return Q?le:this._transformedRect(le,ae)}drawScene(O,L,q){const Q=this.getLayer(),ae=O||Q.getCanvas(),te=ae.getContext(),ne=this._getCanvasCache(),B=this.getSceneFunc(),V=this.hasShadow();let R;const H=L===this;if(!this.isVisible()&&!H)return this;if(ne){te.save();const U=this.getAbsoluteTransform(L).getMatrix();return te.transform(U[0],U[1],U[2],U[3],U[4],U[5]),this._drawCachedSceneCanvas(te),te.restore(),this}if(!B)return this;if(te.save(),this._useBufferCanvas()){R=this.getStage();const U=q||R.bufferCanvas,I=U.getContext();I.clear(),I.save(),I._applyLineJoin(this);const W=this.getAbsoluteTransform(L).getMatrix();I.transform(W[0],W[1],W[2],W[3],W[4],W[5]),B.call(this,I,this),I.restore();const K=U.pixelRatio;V&&te._applyShadow(this),te._applyOpacity(this),te._applyGlobalCompositeOperation(this),te.drawImage(U._canvas,U.x||0,U.y||0,U.width/K,U.height/K)}else{if(te._applyLineJoin(this),!H){const U=this.getAbsoluteTransform(L).getMatrix();te.transform(U[0],U[1],U[2],U[3],U[4],U[5]),te._applyOpacity(this),te._applyGlobalCompositeOperation(this)}V&&te._applyShadow(this),B.call(this,te,this)}return te.restore(),this}drawHit(O,L,q=!1){if(!this.shouldDrawHit(L,q))return this;const Q=this.getLayer(),ae=O||Q.hitCanvas,te=ae&&ae.getContext(),ne=this.hitFunc()||this.sceneFunc(),B=this._getCanvasCache(),V=B&&B.hit;if(this.colorKey||r.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),V){te.save();const H=this.getAbsoluteTransform(L).getMatrix();return te.transform(H[0],H[1],H[2],H[3],H[4],H[5]),this._drawCachedHitCanvas(te),te.restore(),this}if(!ne)return this;if(te.save(),te._applyLineJoin(this),!(this===L)){const H=this.getAbsoluteTransform(L).getMatrix();te.transform(H[0],H[1],H[2],H[3],H[4],H[5])}return ne.call(this,te,this),te.restore(),this}drawHitFromCache(O=0){const L=this._getCanvasCache(),q=this._getCachedSceneCanvas(),Q=L.hit,ae=Q.getContext(),te=Q.getWidth(),ne=Q.getHeight();ae.clear(),ae.drawImage(q._canvas,0,0,te,ne);try{const B=ae.getImageData(0,0,te,ne),V=B.data,R=V.length,H=r.Util._hexToRgb(this.colorKey);for(let U=0;U<R;U+=4)V[U+3]>O?(V[U]=H.r,V[U+1]=H.g,V[U+2]=H.b,V[U+3]=255):V[U+3]=0;ae.putImageData(B,0,0)}catch(B){r.Util.error("Unable to draw hit graph from cached scene canvas. "+B.message)}return this}hasPointerCapture(O){return o.hasPointerCapture(O,this)}setPointerCapture(O){o.setPointerCapture(O,this)}releaseCapture(O){o.releaseCapture(O,this)}}e.Shape=j,j.prototype._fillFunc=y,j.prototype._strokeFunc=v,j.prototype._fillFuncHit=T,j.prototype._strokeFuncHit=k,j.prototype._centroid=!1,j.prototype.nodeType="Shape",(0,i._registerNode)(j),j.prototype.eventListeners={},j.prototype.on.call(j.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",b),j.prototype.on.call(j.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",N),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",E),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",P),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",M),n.Factory.addGetterSetter(j,"stroke",void 0,(0,a.getStringOrGradientValidator)()),n.Factory.addGetterSetter(j,"strokeWidth",2,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(j,"hitStrokeWidth","auto",(0,a.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(j,"strokeHitEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(j,"perfectDrawEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(j,"shadowForStrokeEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(j,"lineJoin"),n.Factory.addGetterSetter(j,"lineCap"),n.Factory.addGetterSetter(j,"sceneFunc"),n.Factory.addGetterSetter(j,"hitFunc"),n.Factory.addGetterSetter(j,"dash"),n.Factory.addGetterSetter(j,"dashOffset",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"shadowColor",void 0,(0,a.getStringValidator)()),n.Factory.addGetterSetter(j,"shadowBlur",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"shadowOpacity",1,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(j,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(j,"shadowOffsetX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"shadowOffsetY",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternImage"),n.Factory.addGetterSetter(j,"fill",void 0,(0,a.getStringOrGradientValidator)()),n.Factory.addGetterSetter(j,"fillPatternX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternY",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(j,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(j,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(j,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(j,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(j,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(j,"fillEnabled",!0),n.Factory.addGetterSetter(j,"strokeEnabled",!0),n.Factory.addGetterSetter(j,"shadowEnabled",!0),n.Factory.addGetterSetter(j,"dashEnabled",!0),n.Factory.addGetterSetter(j,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(j,"fillPriority","color"),n.Factory.addComponentsGetterSetter(j,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(j,"fillPatternOffsetX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternOffsetY",0,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(j,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(j,"fillPatternScaleX",1,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternScaleY",1,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(j,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(j,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(j,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(j,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(j,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(j,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(j,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(j,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(j,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(j,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(j,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(j,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(j,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(j,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(j,"fillPatternRotation",0),n.Factory.addGetterSetter(j,"fillRule",void 0,(0,a.getStringValidator)()),n.Factory.backCompat(j,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(G5)),G5}var yj;function W$(){if(yj)return Nx;yj=1,Object.defineProperty(Nx,"__esModule",{value:!0}),Nx.Layer=void 0;const e=ga(),t=P_(),r=Aa(),n=Cn(),s=j_(),a=Nn(),i=ki(),o=wn(),l="#",u="beforeDraw",d="draw",f=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],h=f.length;class g extends t.Container{constructor(y){super(y),this.canvas=new s.SceneCanvas,this.hitCanvas=new s.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(y){return this.getContext().clear(y),this.getHitCanvas().getContext().clear(y),this}setZIndex(y){super.setZIndex(y);const v=this.getStage();return v&&v.content&&(v.content.removeChild(this.getNativeCanvasElement()),y<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[y+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){r.Node.prototype.moveToTop.call(this);const y=this.getStage();return y&&y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!r.Node.prototype.moveUp.call(this))return!1;const v=this.getStage();return!v||!v.content?!1:(v.content.removeChild(this.getNativeCanvasElement()),this.index<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[this.index+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(r.Node.prototype.moveDown.call(this)){const y=this.getStage();if(y){const v=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),v[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(r.Node.prototype.moveToBottom.call(this)){const y=this.getStage();if(y){const v=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),v[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const y=this.getNativeCanvasElement();return r.Node.prototype.remove.call(this),y&&y.parentNode&&e.Util._isInDocument(y)&&y.parentNode.removeChild(y),this}getStage(){return this.parent}setSize({width:y,height:v}){return this.canvas.setSize(y,v),this.hitCanvas.setSize(y,v),this._setSmoothEnabled(),this}_validateAdd(y){const v=y.getType();v!=="Group"&&v!=="Shape"&&e.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(y){return y=y||{},y.width=y.width||this.getWidth(),y.height=y.height||this.getHeight(),y.x=y.x!==void 0?y.x:this.x(),y.y=y.y!==void 0?y.y:this.y(),r.Node.prototype._toKonvaCanvas.call(this,y)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){e.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){e.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,e.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(y){if(!this.isListening()||!this.isVisible())return null;let v=1,T=!1;for(;;){for(let k=0;k<h;k++){const b=f[k],N=this._getIntersection({x:y.x+b.x*v,y:y.y+b.y*v}),E=N.shape;if(E)return E;if(T=!!N.antialiased,!N.antialiased)break}if(T)v+=1;else return null}}_getIntersection(y){const v=this.hitCanvas.pixelRatio,T=this.hitCanvas.context.getImageData(Math.round(y.x*v),Math.round(y.y*v),1,1).data,k=T[3];if(k===255){const b=e.Util._rgbToHex(T[0],T[1],T[2]),N=i.shapes[l+b];return N?{shape:N}:{antialiased:!0}}else if(k>0)return{antialiased:!0};return{}}drawScene(y,v,T){const k=this.getLayer(),b=y||k&&k.getCanvas();return this._fire(u,{node:this}),this.clearBeforeDraw()&&b.getContext().clear(),t.Container.prototype.drawScene.call(this,b,v,T),this._fire(d,{node:this}),this}drawHit(y,v){const T=this.getLayer(),k=y||T&&T.hitCanvas;return T&&T.clearBeforeDraw()&&T.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,k,v),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(y){e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(y)}getHitGraphEnabled(y){return e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const y=this.parent;!!this.hitCanvas._canvas.parentNode?y.content.removeChild(this.hitCanvas._canvas):y.content.appendChild(this.hitCanvas._canvas)}destroy(){return e.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return Nx.Layer=g,g.prototype.nodeType="Layer",(0,o._registerNode)(g),n.Factory.addGetterSetter(g,"imageSmoothingEnabled",!0),n.Factory.addGetterSetter(g,"clearBeforeDraw",!0),n.Factory.addGetterSetter(g,"hitGraphEnabled",!0,(0,a.getBooleanValidator)()),Nx}var Ax={},vj;function sne(){if(vj)return Ax;vj=1,Object.defineProperty(Ax,"__esModule",{value:!0}),Ax.FastLayer=void 0;const e=ga(),t=W$(),r=wn();class n extends t.Layer{constructor(a){super(a),this.listening(!1),e.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}return Ax.FastLayer=n,n.prototype.nodeType="FastLayer",(0,r._registerNode)(n),Ax}var jx={},wj;function TT(){if(wj)return jx;wj=1,Object.defineProperty(jx,"__esModule",{value:!0}),jx.Group=void 0;const e=ga(),t=P_(),r=wn();class n extends t.Container{_validateAdd(a){const i=a.getType();i!=="Group"&&i!=="Shape"&&e.Util.throw("You may only add groups and shapes to groups.")}}return jx.Group=n,n.prototype.nodeType="Group",(0,r._registerNode)(n),jx}var Px={},bj;function CT(){if(bj)return Px;bj=1,Object.defineProperty(Px,"__esModule",{value:!0}),Px.Animation=void 0;const e=wn(),t=ga(),r=(function(){return e.glob.performance&&e.glob.performance.now?function(){return e.glob.performance.now()}:function(){return new Date().getTime()}})();let n=class rp{constructor(a,i){this.id=rp.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:r(),frameRate:0},this.func=a,this.setLayers(i)}setLayers(a){let i=[];return a&&(i=Array.isArray(a)?a:[a]),this.layers=i,this}getLayers(){return this.layers}addLayer(a){const i=this.layers,o=i.length;for(let l=0;l<o;l++)if(i[l]._id===a._id)return!1;return this.layers.push(a),!0}isRunning(){const i=rp.animations,o=i.length;for(let l=0;l<o;l++)if(i[l].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=r(),rp._addAnimation(this),this}stop(){return rp._removeAnimation(this),this}_updateFrameObject(a){this.frame.timeDiff=a-this.frame.lastTime,this.frame.lastTime=a,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(a){this.animations.push(a),this._handleAnimation()}static _removeAnimation(a){const i=a.id,o=this.animations,l=o.length;for(let u=0;u<l;u++)if(o[u].id===i){this.animations.splice(u,1);break}}static _runFrames(){const a={},i=this.animations;for(let o=0;o<i.length;o++){const l=i[o],u=l.layers,d=l.func;l._updateFrameObject(r());const f=u.length;let h;if(d?h=d.call(l,l.frame)!==!1:h=!0,!!h)for(let g=0;g<f;g++){const x=u[g];x._id!==void 0&&(a[x._id]=x)}}for(const o in a)a.hasOwnProperty(o)&&a[o].batchDraw()}static _animationLoop(){const a=rp;a.animations.length?(a._runFrames(),t.Util.requestAnimFrame(a._animationLoop)):a.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return Px.Animation=n,n.animations=[],n.animIdCounter=0,n.animRunning=!1,Px}var V5={},_j;function ane(){return _j||(_j=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=ga(),r=CT(),n=Aa(),s=wn(),a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},i=1,o=2,l=3,u=["fill","stroke","shadowColor"];let d=0;class f{constructor(x,y,v,T,k,b,N){this.prop=x,this.propFunc=y,this.begin=T,this._pos=T,this.duration=b,this._change=0,this.prevPos=0,this.yoyo=N,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=k-this.begin,this.pause()}fire(x){const y=this[x];y&&y()}setTime(x){x>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():x<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=x,this.update())}getTime(){return this._time}setPosition(x){this.prevPos=this._pos,this.propFunc(x),this._pos=x}getPosition(x){return x===void 0&&(x=this._time),this.func(x,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(x){this.pause(),this._time=x,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const x=this.getTimer()-this._startTime;this.state===o?this.setTime(x):this.state===l&&this.setTime(this.duration-x)}pause(){this.state=i,this.fire("onPause")}getTimer(){return new Date().getTime()}}class h{constructor(x){const y=this,v=x.node,T=v._id,k=x.easing||e.Easings.Linear,b=!!x.yoyo;let N,E;typeof x.duration>"u"?N=.3:x.duration===0?N=.001:N=x.duration,this.node=v,this._id=d++;const P=v.getLayer()||(v instanceof s.Konva.Stage?v.getLayers():null);P||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new r.Animation(function(){y.tween.onEnterFrame()},P),this.tween=new f(E,function(M){y._tweenFunc(M)},k,0,1,N*1e3,b),this._addListeners(),h.attrs[T]||(h.attrs[T]={}),h.attrs[T][this._id]||(h.attrs[T][this._id]={}),h.tweens[T]||(h.tweens[T]={});for(E in x)a[E]===void 0&&this._addAttr(E,x[E]);this.reset(),this.onFinish=x.onFinish,this.onReset=x.onReset,this.onUpdate=x.onUpdate}_addAttr(x,y){const v=this.node,T=v._id;let k,b,N,E,P;const M=h.tweens[T][x];M&&delete h.attrs[T][M][x];let j=v.getAttr(x);if(t.Util._isArray(y))if(k=[],b=Math.max(y.length,j.length),x==="points"&&y.length!==j.length&&(y.length>j.length?(E=j,j=t.Util._prepareArrayForTween(j,y,v.closed())):(N=y,y=t.Util._prepareArrayForTween(y,j,v.closed()))),x.indexOf("fill")===0)for(let A=0;A<b;A++)if(A%2===0)k.push(y[A]-j[A]);else{const O=t.Util.colorToRGBA(j[A]);P=t.Util.colorToRGBA(y[A]),j[A]=O,k.push({r:P.r-O.r,g:P.g-O.g,b:P.b-O.b,a:P.a-O.a})}else for(let A=0;A<b;A++)k.push(y[A]-j[A]);else u.indexOf(x)!==-1?(j=t.Util.colorToRGBA(j),P=t.Util.colorToRGBA(y),k={r:P.r-j.r,g:P.g-j.g,b:P.b-j.b,a:P.a-j.a}):k=y-j;h.attrs[T][this._id][x]={start:j,diff:k,end:y,trueEnd:N,trueStart:E},h.tweens[T][x]=this._id}_tweenFunc(x){const y=this.node,v=h.attrs[y._id][this._id];let T,k,b,N,E,P,M,j;for(T in v){if(k=v[T],b=k.start,N=k.diff,j=k.end,t.Util._isArray(b))if(E=[],M=Math.max(b.length,j.length),T.indexOf("fill")===0)for(P=0;P<M;P++)P%2===0?E.push((b[P]||0)+N[P]*x):E.push("rgba("+Math.round(b[P].r+N[P].r*x)+","+Math.round(b[P].g+N[P].g*x)+","+Math.round(b[P].b+N[P].b*x)+","+(b[P].a+N[P].a*x)+")");else for(P=0;P<M;P++)E.push((b[P]||0)+N[P]*x);else u.indexOf(T)!==-1?E="rgba("+Math.round(b.r+N.r*x)+","+Math.round(b.g+N.g*x)+","+Math.round(b.b+N.b*x)+","+(b.a+N.a*x)+")":E=b+N*x;y.setAttr(T,E)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const x=this.node,y=h.attrs[x._id][this._id];y.points&&y.points.trueEnd&&x.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const x=this.node,y=h.attrs[x._id][this._id];y.points&&y.points.trueStart&&x.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(x){return this.tween.seek(x*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const x=this.node._id,y=this._id,v=h.tweens[x];this.pause(),this.anim&&this.anim.stop();for(const T in v)delete h.tweens[x][T];delete h.attrs[x][y],h.tweens[x]&&(Object.keys(h.tweens[x]).length===0&&delete h.tweens[x],Object.keys(h.attrs[x]).length===0&&delete h.attrs[x])}}e.Tween=h,h.attrs={},h.tweens={},n.Node.prototype.to=function(g){const x=g.onFinish;g.node=this,g.onFinish=function(){this.destroy(),x&&x()},new h(g).play()},e.Easings={BackEaseIn(g,x,y,v){return y*(g/=v)*g*((1.70158+1)*g-1.70158)+x},BackEaseOut(g,x,y,v){return y*((g=g/v-1)*g*((1.70158+1)*g+1.70158)+1)+x},BackEaseInOut(g,x,y,v){let T=1.70158;return(g/=v/2)<1?y/2*(g*g*(((T*=1.525)+1)*g-T))+x:y/2*((g-=2)*g*(((T*=1.525)+1)*g+T)+2)+x},ElasticEaseIn(g,x,y,v,T,k){let b=0;return g===0?x:(g/=v)===1?x+y:(k||(k=v*.3),!T||T<Math.abs(y)?(T=y,b=k/4):b=k/(2*Math.PI)*Math.asin(y/T),-(T*Math.pow(2,10*(g-=1))*Math.sin((g*v-b)*(2*Math.PI)/k))+x)},ElasticEaseOut(g,x,y,v,T,k){let b=0;return g===0?x:(g/=v)===1?x+y:(k||(k=v*.3),!T||T<Math.abs(y)?(T=y,b=k/4):b=k/(2*Math.PI)*Math.asin(y/T),T*Math.pow(2,-10*g)*Math.sin((g*v-b)*(2*Math.PI)/k)+y+x)},ElasticEaseInOut(g,x,y,v,T,k){let b=0;return g===0?x:(g/=v/2)===2?x+y:(k||(k=v*(.3*1.5)),!T||T<Math.abs(y)?(T=y,b=k/4):b=k/(2*Math.PI)*Math.asin(y/T),g<1?-.5*(T*Math.pow(2,10*(g-=1))*Math.sin((g*v-b)*(2*Math.PI)/k))+x:T*Math.pow(2,-10*(g-=1))*Math.sin((g*v-b)*(2*Math.PI)/k)*.5+y+x)},BounceEaseOut(g,x,y,v){return(g/=v)<1/2.75?y*(7.5625*g*g)+x:g<2/2.75?y*(7.5625*(g-=1.5/2.75)*g+.75)+x:g<2.5/2.75?y*(7.5625*(g-=2.25/2.75)*g+.9375)+x:y*(7.5625*(g-=2.625/2.75)*g+.984375)+x},BounceEaseIn(g,x,y,v){return y-e.Easings.BounceEaseOut(v-g,0,y,v)+x},BounceEaseInOut(g,x,y,v){return g<v/2?e.Easings.BounceEaseIn(g*2,0,y,v)*.5+x:e.Easings.BounceEaseOut(g*2-v,0,y,v)*.5+y*.5+x},EaseIn(g,x,y,v){return y*(g/=v)*g+x},EaseOut(g,x,y,v){return-y*(g/=v)*(g-2)+x},EaseInOut(g,x,y,v){return(g/=v/2)<1?y/2*g*g+x:-y/2*(--g*(g-2)-1)+x},StrongEaseIn(g,x,y,v){return y*(g/=v)*g*g*g*g+x},StrongEaseOut(g,x,y,v){return y*((g=g/v-1)*g*g*g*g+1)+x},StrongEaseInOut(g,x,y,v){return(g/=v/2)<1?y/2*g*g*g*g*g+x:y/2*((g-=2)*g*g*g*g+2)+x},Linear(g,x,y,v){return y*g/v+x}}})(V5)),V5}var Sj;function qk(){return Sj||(Sj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=wn(),r=ga(),n=Aa(),s=P_(),a=nne(),i=W$(),o=sne(),l=TT(),u=kT(),d=ki(),f=CT(),h=ane(),g=z$(),x=j_();e.Konva=r.Util._assign(t.Konva,{Util:r.Util,Transform:r.Transform,Node:n.Node,Container:s.Container,Stage:a.Stage,stages:a.stages,Layer:i.Layer,FastLayer:o.FastLayer,Group:l.Group,DD:u.DD,Shape:d.Shape,shapes:d.shapes,Animation:f.Animation,Tween:h.Tween,Easings:h.Easings,Context:g.Context,Canvas:x.Canvas}),e.default=e.Konva})(B5)),B5}var Mx={},kj;function ine(){if(kj)return Mx;kj=1,Object.defineProperty(Mx,"__esModule",{value:!0}),Mx.Arc=void 0;const e=Cn(),t=ki(),r=wn(),n=Nn(),s=wn();class a extends t.Shape{_sceneFunc(o){const l=r.Konva.getAngle(this.angle()),u=this.clockwise();o.beginPath(),o.arc(0,0,this.outerRadius(),0,l,u),o.arc(0,0,this.innerRadius(),l,0,!u),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}getSelfRect(){const o=this.innerRadius(),l=this.outerRadius(),u=this.clockwise(),d=r.Konva.getAngle(u?360-this.angle():this.angle()),f=Math.cos(Math.min(d,Math.PI)),h=1,g=Math.sin(Math.min(Math.max(Math.PI,d),3*Math.PI/2)),x=Math.sin(Math.min(d,Math.PI/2)),y=f*(f>0?o:l),v=h*l,T=g*(g>0?o:l),k=x*(x>0?l:o);return{x:y,y:u?-1*k:T,width:v-y,height:k-T}}}return Mx.Arc=a,a.prototype._centroid=!0,a.prototype.className="Arc",a.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"angle",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clockwise",!1,(0,n.getBooleanValidator)()),Mx}var Fx={},Dx={},Tj;function H$(){if(Tj)return Dx;Tj=1,Object.defineProperty(Dx,"__esModule",{value:!0}),Dx.Line=void 0;const e=Cn(),t=wn(),r=ki(),n=Nn();function s(o,l,u,d,f,h,g){const x=Math.sqrt(Math.pow(u-o,2)+Math.pow(d-l,2)),y=Math.sqrt(Math.pow(f-u,2)+Math.pow(h-d,2)),v=g*x/(x+y),T=g*y/(x+y),k=u-v*(f-o),b=d-v*(h-l),N=u+T*(f-o),E=d+T*(h-l);return[k,b,N,E]}function a(o,l){const u=o.length,d=[];for(let f=2;f<u-2;f+=2){const h=s(o[f-2],o[f-1],o[f],o[f+1],o[f+2],o[f+3],l);isNaN(h[0])||(d.push(h[0]),d.push(h[1]),d.push(o[f]),d.push(o[f+1]),d.push(h[2]),d.push(h[3]))}return d}class i extends r.Shape{constructor(l){super(l),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(l){const u=this.points(),d=u.length,f=this.tension(),h=this.closed(),g=this.bezier();if(!d)return;let x=0;if(l.beginPath(),l.moveTo(u[0],u[1]),f!==0&&d>4){const y=this.getTensionPoints(),v=y.length;for(x=h?0:4,h||l.quadraticCurveTo(y[0],y[1],y[2],y[3]);x<v-2;)l.bezierCurveTo(y[x++],y[x++],y[x++],y[x++],y[x++],y[x++]);h||l.quadraticCurveTo(y[v-2],y[v-1],u[d-2],u[d-1])}else if(g)for(x=2;x<d;)l.bezierCurveTo(u[x++],u[x++],u[x++],u[x++],u[x++],u[x++]);else for(x=2;x<d;x+=2)l.lineTo(u[x],u[x+1]);h?(l.closePath(),l.fillStrokeShape(this)):l.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():a(this.points(),this.tension())}_getTensionPointsClosed(){const l=this.points(),u=l.length,d=this.tension(),f=s(l[u-2],l[u-1],l[0],l[1],l[2],l[3],d),h=s(l[u-4],l[u-3],l[u-2],l[u-1],l[0],l[1],d),g=a(l,d);return[f[2],f[3]].concat(g).concat([h[0],h[1],l[u-2],l[u-1],h[2],h[3],f[0],f[1],l[0],l[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let l=this.points();if(l.length<4)return{x:l[0]||0,y:l[1]||0,width:0,height:0};this.tension()!==0?l=[l[0],l[1],...this._getTensionPoints(),l[l.length-2],l[l.length-1]]:l=this.points();let u=l[0],d=l[0],f=l[1],h=l[1],g,x;for(let y=0;y<l.length/2;y++)g=l[y*2],x=l[y*2+1],u=Math.min(u,g),d=Math.max(d,g),f=Math.min(f,x),h=Math.max(h,x);return{x:u,y:f,width:d-u,height:h-f}}}return Dx.Line=i,i.prototype.className="Line",i.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(i),e.Factory.addGetterSetter(i,"closed",!1),e.Factory.addGetterSetter(i,"bezier",!1),e.Factory.addGetterSetter(i,"tension",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"points",[],(0,n.getNumberArrayValidator)()),Dx}var Ox={},q5={},Cj;function one(){return Cj||(Cj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(i,o,l)=>{let u,d;const h=l/2;u=0;for(let g=0;g<20;g++)d=h*e.tValues[20][g]+h,u+=e.cValues[20][g]*n(i,o,d);return h*u};e.getCubicArcLength=t;const r=(i,o,l)=>{l===void 0&&(l=1);const u=i[0]-2*i[1]+i[2],d=o[0]-2*o[1]+o[2],f=2*i[1]-2*i[0],h=2*o[1]-2*o[0],g=4*(u*u+d*d),x=4*(u*f+d*h),y=f*f+h*h;if(g===0)return l*Math.sqrt(Math.pow(i[2]-i[0],2)+Math.pow(o[2]-o[0],2));const v=x/(2*g),T=y/g,k=l+v,b=T-v*v,N=k*k+b>0?Math.sqrt(k*k+b):0,E=v*v+b>0?Math.sqrt(v*v+b):0,P=v+Math.sqrt(v*v+b)!==0?b*Math.log(Math.abs((k+N)/(v+E))):0;return Math.sqrt(g)/2*(k*N-v*E+P)};e.getQuadraticArcLength=r;function n(i,o,l){const u=s(1,l,i),d=s(1,l,o),f=u*u+d*d;return Math.sqrt(f)}const s=(i,o,l)=>{const u=l.length-1;let d,f;if(u===0)return 0;if(i===0){f=0;for(let h=0;h<=u;h++)f+=e.binomialCoefficients[u][h]*Math.pow(1-o,u-h)*Math.pow(o,h)*l[h];return f}else{d=new Array(u);for(let h=0;h<u;h++)d[h]=u*(l[h+1]-l[h]);return s(i-1,o,d)}},a=(i,o,l)=>{let u=1,d=i/o,f=(i-l(d))/o,h=0;for(;u>.001;){const g=l(d+f),x=Math.abs(i-g)/o;if(x<u)u=x,d+=f;else{const y=l(d-f),v=Math.abs(i-y)/o;v<u?(u=v,d-=f):f/=2}if(h++,h>500)break}return d};e.t2length=a})(q5)),q5}var Ej;function ET(){if(Ej)return Ox;Ej=1,Object.defineProperty(Ox,"__esModule",{value:!0}),Ox.Path=void 0;const e=Cn(),t=wn(),r=ki(),n=one();class s extends r.Shape{constructor(i){super(i),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=s.parsePathData(this.data()),this.pathLength=s.getPathLength(this.dataArray)}_sceneFunc(i){const o=this.dataArray;i.beginPath();let l=!1;for(let u=0;u<o.length;u++){const d=o[u].command,f=o[u].points;switch(d){case"L":i.lineTo(f[0],f[1]);break;case"M":i.moveTo(f[0],f[1]);break;case"C":i.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":i.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":const h=f[0],g=f[1],x=f[2],y=f[3],v=f[4],T=f[5],k=f[6],b=f[7],N=x>y?x:y,E=x>y?1:x/y,P=x>y?y/x:1;i.translate(h,g),i.rotate(k),i.scale(E,P),i.arc(0,0,N,v,v+T,1-b),i.scale(1/E,1/P),i.rotate(-k),i.translate(-h,-g);break;case"z":l=!0,i.closePath();break}}!l&&!this.hasFill()?i.strokeShape(this):i.fillStrokeShape(this)}getSelfRect(){let i=[];this.dataArray.forEach(function(g){if(g.command==="A"){const x=g.points[4],y=g.points[5],v=g.points[4]+y;let T=Math.PI/180;if(Math.abs(x-v)<T&&(T=Math.abs(x-v)),y<0)for(let k=x-T;k>v;k-=T){const b=s.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],k,0);i.push(b.x,b.y)}else for(let k=x+T;k<v;k+=T){const b=s.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],k,0);i.push(b.x,b.y)}}else if(g.command==="C")for(let x=0;x<=1;x+=.01){const y=s.getPointOnCubicBezier(x,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);i.push(y.x,y.y)}else i=i.concat(g.points)});let o=i[0],l=i[0],u=i[1],d=i[1],f,h;for(let g=0;g<i.length/2;g++)f=i[g*2],h=i[g*2+1],isNaN(f)||(o=Math.min(o,f),l=Math.max(l,f)),isNaN(h)||(u=Math.min(u,h),d=Math.max(d,h));return{x:o,y:u,width:l-o,height:d-u}}getLength(){return this.pathLength}getPointAtLength(i){return s.getPointAtLengthOfDataArray(i,this.dataArray)}static getLineLength(i,o,l,u){return Math.sqrt((l-i)*(l-i)+(u-o)*(u-o))}static getPathLength(i){let o=0;for(let l=0;l<i.length;++l)o+=i[l].pathLength;return o}static getPointAtLengthOfDataArray(i,o){let l,u=0,d=o.length;if(!d)return null;for(;u<d&&i>o[u].pathLength;)i-=o[u].pathLength,++u;if(u===d)return l=o[u-1].points.slice(-2),{x:l[0],y:l[1]};if(i<.01)return o[u].command==="M"?(l=o[u].points.slice(0,2),{x:l[0],y:l[1]}):{x:o[u].start.x,y:o[u].start.y};const f=o[u],h=f.points;switch(f.command){case"L":return s.getPointOnLine(i,f.start.x,f.start.y,h[0],h[1]);case"C":return s.getPointOnCubicBezier((0,n.t2length)(i,s.getPathLength(o),N=>(0,n.getCubicArcLength)([f.start.x,h[0],h[2],h[4]],[f.start.y,h[1],h[3],h[5]],N)),f.start.x,f.start.y,h[0],h[1],h[2],h[3],h[4],h[5]);case"Q":return s.getPointOnQuadraticBezier((0,n.t2length)(i,s.getPathLength(o),N=>(0,n.getQuadraticArcLength)([f.start.x,h[0],h[2]],[f.start.y,h[1],h[3]],N)),f.start.x,f.start.y,h[0],h[1],h[2],h[3]);case"A":const g=h[0],x=h[1],y=h[2],v=h[3],T=h[5],k=h[6];let b=h[4];return b+=T*i/f.pathLength,s.getPointOnEllipticalArc(g,x,y,v,b,k)}return null}static getPointOnLine(i,o,l,u,d,f,h){f=f??o,h=h??l;const g=this.getLineLength(o,l,u,d);if(g<1e-10)return{x:o,y:l};if(u===o)return{x:f,y:h+(d>l?i:-i)};const x=(d-l)/(u-o),y=Math.sqrt(i*i/(1+x*x))*(u<o?-1:1),v=x*y;if(Math.abs(h-l-x*(f-o))<1e-10)return{x:f+y,y:h+v};const T=((f-o)*(u-o)+(h-l)*(d-l))/(g*g),k=o+T*(u-o),b=l+T*(d-l),N=this.getLineLength(f,h,k,b),E=Math.sqrt(i*i-N*N),P=Math.sqrt(E*E/(1+x*x))*(u<o?-1:1),M=x*P;return{x:k+P,y:b+M}}static getPointOnCubicBezier(i,o,l,u,d,f,h,g,x){function y(E){return E*E*E}function v(E){return 3*E*E*(1-E)}function T(E){return 3*E*(1-E)*(1-E)}function k(E){return(1-E)*(1-E)*(1-E)}const b=g*y(i)+f*v(i)+u*T(i)+o*k(i),N=x*y(i)+h*v(i)+d*T(i)+l*k(i);return{x:b,y:N}}static getPointOnQuadraticBezier(i,o,l,u,d,f,h){function g(k){return k*k}function x(k){return 2*k*(1-k)}function y(k){return(1-k)*(1-k)}const v=f*g(i)+u*x(i)+o*y(i),T=h*g(i)+d*x(i)+l*y(i);return{x:v,y:T}}static getPointOnEllipticalArc(i,o,l,u,d,f){const h=Math.cos(f),g=Math.sin(f),x={x:l*Math.cos(d),y:u*Math.sin(d)};return{x:i+(x.x*h-x.y*g),y:o+(x.x*g+x.y*h)}}static parsePathData(i){if(!i)return[];let o=i;const l=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];o=o.replace(new RegExp(" ","g"),",");for(let v=0;v<l.length;v++)o=o.replace(new RegExp(l[v],"g"),"|"+l[v]);const u=o.split("|"),d=[],f=[];let h=0,g=0;const x=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let y;for(let v=1;v<u.length;v++){let T=u[v],k=T.charAt(0);for(T=T.slice(1),f.length=0;y=x.exec(T);)f.push(y[0]);const b=[];for(let N=0,E=f.length;N<E;N++){if(f[N]==="00"){b.push(0,0);continue}const P=parseFloat(f[N]);isNaN(P)?b.push(0):b.push(P)}for(;b.length>0&&!isNaN(b[0]);){let N="",E=[];const P=h,M=g;let j,A,O,L,q,Q,ae,te,ne,B;switch(k){case"l":h+=b.shift(),g+=b.shift(),N="L",E.push(h,g);break;case"L":h=b.shift(),g=b.shift(),E.push(h,g);break;case"m":const V=b.shift(),R=b.shift();if(h+=V,g+=R,N="M",d.length>2&&d[d.length-1].command==="z"){for(let H=d.length-2;H>=0;H--)if(d[H].command==="M"){h=d[H].points[0]+V,g=d[H].points[1]+R;break}}E.push(h,g),k="l";break;case"M":h=b.shift(),g=b.shift(),N="M",E.push(h,g),k="L";break;case"h":h+=b.shift(),N="L",E.push(h,g);break;case"H":h=b.shift(),N="L",E.push(h,g);break;case"v":g+=b.shift(),N="L",E.push(h,g);break;case"V":g=b.shift(),N="L",E.push(h,g);break;case"C":E.push(b.shift(),b.shift(),b.shift(),b.shift()),h=b.shift(),g=b.shift(),E.push(h,g);break;case"c":E.push(h+b.shift(),g+b.shift(),h+b.shift(),g+b.shift()),h+=b.shift(),g+=b.shift(),N="C",E.push(h,g);break;case"S":A=h,O=g,j=d[d.length-1],j.command==="C"&&(A=h+(h-j.points[2]),O=g+(g-j.points[3])),E.push(A,O,b.shift(),b.shift()),h=b.shift(),g=b.shift(),N="C",E.push(h,g);break;case"s":A=h,O=g,j=d[d.length-1],j.command==="C"&&(A=h+(h-j.points[2]),O=g+(g-j.points[3])),E.push(A,O,h+b.shift(),g+b.shift()),h+=b.shift(),g+=b.shift(),N="C",E.push(h,g);break;case"Q":E.push(b.shift(),b.shift()),h=b.shift(),g=b.shift(),E.push(h,g);break;case"q":E.push(h+b.shift(),g+b.shift()),h+=b.shift(),g+=b.shift(),N="Q",E.push(h,g);break;case"T":A=h,O=g,j=d[d.length-1],j.command==="Q"&&(A=h+(h-j.points[0]),O=g+(g-j.points[1])),h=b.shift(),g=b.shift(),N="Q",E.push(A,O,h,g);break;case"t":A=h,O=g,j=d[d.length-1],j.command==="Q"&&(A=h+(h-j.points[0]),O=g+(g-j.points[1])),h+=b.shift(),g+=b.shift(),N="Q",E.push(A,O,h,g);break;case"A":L=b.shift(),q=b.shift(),Q=b.shift(),ae=b.shift(),te=b.shift(),ne=h,B=g,h=b.shift(),g=b.shift(),N="A",E=this.convertEndpointToCenterParameterization(ne,B,h,g,ae,te,L,q,Q);break;case"a":L=b.shift(),q=b.shift(),Q=b.shift(),ae=b.shift(),te=b.shift(),ne=h,B=g,h+=b.shift(),g+=b.shift(),N="A",E=this.convertEndpointToCenterParameterization(ne,B,h,g,ae,te,L,q,Q);break}d.push({command:N||k,points:E,start:{x:P,y:M},pathLength:this.calcLength(P,M,N||k,E)})}(k==="z"||k==="Z")&&d.push({command:"z",points:[],start:void 0,pathLength:0})}return d}static calcLength(i,o,l,u){let d,f,h,g;const x=s;switch(l){case"L":return x.getLineLength(i,o,u[0],u[1]);case"C":return(0,n.getCubicArcLength)([i,u[0],u[2],u[4]],[o,u[1],u[3],u[5]],1);case"Q":return(0,n.getQuadraticArcLength)([i,u[0],u[2]],[o,u[1],u[3]],1);case"A":d=0;const y=u[4],v=u[5],T=u[4]+v;let k=Math.PI/180;if(Math.abs(y-T)<k&&(k=Math.abs(y-T)),f=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],y,0),v<0)for(g=y-k;g>T;g-=k)h=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],g,0),d+=x.getLineLength(f.x,f.y,h.x,h.y),f=h;else for(g=y+k;g<T;g+=k)h=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],g,0),d+=x.getLineLength(f.x,f.y,h.x,h.y),f=h;return h=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],T,0),d+=x.getLineLength(f.x,f.y,h.x,h.y),d}return 0}static convertEndpointToCenterParameterization(i,o,l,u,d,f,h,g,x){const y=x*(Math.PI/180),v=Math.cos(y)*(i-l)/2+Math.sin(y)*(o-u)/2,T=-1*Math.sin(y)*(i-l)/2+Math.cos(y)*(o-u)/2,k=v*v/(h*h)+T*T/(g*g);k>1&&(h*=Math.sqrt(k),g*=Math.sqrt(k));let b=Math.sqrt((h*h*(g*g)-h*h*(T*T)-g*g*(v*v))/(h*h*(T*T)+g*g*(v*v)));d===f&&(b*=-1),isNaN(b)&&(b=0);const N=b*h*T/g,E=b*-g*v/h,P=(i+l)/2+Math.cos(y)*N-Math.sin(y)*E,M=(o+u)/2+Math.sin(y)*N+Math.cos(y)*E,j=function(te){return Math.sqrt(te[0]*te[0]+te[1]*te[1])},A=function(te,ne){return(te[0]*ne[0]+te[1]*ne[1])/(j(te)*j(ne))},O=function(te,ne){return(te[0]*ne[1]<te[1]*ne[0]?-1:1)*Math.acos(A(te,ne))},L=O([1,0],[(v-N)/h,(T-E)/g]),q=[(v-N)/h,(T-E)/g],Q=[(-1*v-N)/h,(-1*T-E)/g];let ae=O(q,Q);return A(q,Q)<=-1&&(ae=Math.PI),A(q,Q)>=1&&(ae=0),f===0&&ae>0&&(ae=ae-2*Math.PI),f===1&&ae<0&&(ae=ae+2*Math.PI),[P,M,h,g,L,ae,y,f]}}return Ox.Path=s,s.prototype.className="Path",s.prototype._attrsAffectingSize=["data"],(0,t._registerNode)(s),e.Factory.addGetterSetter(s,"data"),Ox}var Nj;function lne(){if(Nj)return Fx;Nj=1,Object.defineProperty(Fx,"__esModule",{value:!0}),Fx.Arrow=void 0;const e=Cn(),t=H$(),r=Nn(),n=wn(),s=ET();class a extends t.Line{_sceneFunc(o){super._sceneFunc(o);const l=Math.PI*2,u=this.points();let d=u;const f=this.tension()!==0&&u.length>4;f&&(d=this.getTensionPoints());const h=this.pointerLength(),g=u.length;let x,y;if(f){const k=[d[d.length-4],d[d.length-3],d[d.length-2],d[d.length-1],u[g-2],u[g-1]],b=s.Path.calcLength(d[d.length-4],d[d.length-3],"C",k),N=s.Path.getPointOnQuadraticBezier(Math.min(1,1-h/b),k[0],k[1],k[2],k[3],k[4],k[5]);x=u[g-2]-N.x,y=u[g-1]-N.y}else x=u[g-2]-u[g-4],y=u[g-1]-u[g-3];const v=(Math.atan2(y,x)+l)%l,T=this.pointerWidth();this.pointerAtEnding()&&(o.save(),o.beginPath(),o.translate(u[g-2],u[g-1]),o.rotate(v),o.moveTo(0,0),o.lineTo(-h,T/2),o.lineTo(-h,-T/2),o.closePath(),o.restore(),this.__fillStroke(o)),this.pointerAtBeginning()&&(o.save(),o.beginPath(),o.translate(u[0],u[1]),f?(x=(d[0]+d[2])/2-u[0],y=(d[1]+d[3])/2-u[1]):(x=u[2]-u[0],y=u[3]-u[1]),o.rotate((Math.atan2(-y,-x)+l)%l),o.moveTo(0,0),o.lineTo(-h,T/2),o.lineTo(-h,-T/2),o.closePath(),o.restore(),this.__fillStroke(o))}__fillStroke(o){const l=this.dashEnabled();l&&(this.attrs.dashEnabled=!1,o.setLineDash([])),o.fillStrokeShape(this),l&&(this.attrs.dashEnabled=!0)}getSelfRect(){const o=super.getSelfRect(),l=this.pointerWidth()/2;return{x:o.x,y:o.y-l,width:o.width,height:o.height+l*2}}}return Fx.Arrow=a,a.prototype.className="Arrow",(0,n._registerNode)(a),e.Factory.addGetterSetter(a,"pointerLength",10,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"pointerWidth",10,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"pointerAtBeginning",!1),e.Factory.addGetterSetter(a,"pointerAtEnding",!0),Fx}var Ix={},Aj;function cne(){if(Aj)return Ix;Aj=1,Object.defineProperty(Ix,"__esModule",{value:!0}),Ix.Circle=void 0;const e=Cn(),t=ki(),r=Nn(),n=wn();class s extends t.Shape{_sceneFunc(i){i.beginPath(),i.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(i){this.radius()!==i/2&&this.radius(i/2)}setHeight(i){this.radius()!==i/2&&this.radius(i/2)}}return Ix.Circle=s,s.prototype._centroid=!0,s.prototype.className="Circle",s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),Ix}var Rx={},jj;function une(){if(jj)return Rx;jj=1,Object.defineProperty(Rx,"__esModule",{value:!0}),Rx.Ellipse=void 0;const e=Cn(),t=ki(),r=Nn(),n=wn();class s extends t.Shape{_sceneFunc(i){const o=this.radiusX(),l=this.radiusY();i.beginPath(),i.save(),o!==l&&i.scale(1,l/o),i.arc(0,0,o,0,Math.PI*2,!1),i.restore(),i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(i){this.radiusX(i/2)}setHeight(i){this.radiusY(i/2)}}return Rx.Ellipse=s,s.prototype.className="Ellipse",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,n._registerNode)(s),e.Factory.addComponentsGetterSetter(s,"radius",["x","y"]),e.Factory.addGetterSetter(s,"radiusX",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"radiusY",0,(0,r.getNumberValidator)()),Rx}var Lx={},Pj;function dne(){if(Pj)return Lx;Pj=1,Object.defineProperty(Lx,"__esModule",{value:!0}),Lx.Image=void 0;const e=ga(),t=Cn(),r=ki(),n=wn(),s=Nn();class a extends r.Shape{constructor(o){super(o),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",l=>{this._removeImageLoad(l.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const o=this.image();o&&o.complete||o&&o.readyState===4||o&&o.addEventListener&&o.addEventListener("load",this._loadListener)}_removeImageLoad(o){o&&o.removeEventListener&&o.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const o=!!this.cornerRadius(),l=this.hasShadow();return o&&l?!0:super._useBufferCanvas(!0)}_sceneFunc(o){const l=this.getWidth(),u=this.getHeight(),d=this.cornerRadius(),f=this.attrs.image;let h;if(f){const g=this.attrs.cropWidth,x=this.attrs.cropHeight;g&&x?h=[f,this.cropX(),this.cropY(),g,x,0,0,l,u]:h=[f,0,0,l,u]}(this.hasFill()||this.hasStroke()||d)&&(o.beginPath(),d?e.Util.drawRoundedRectPath(o,l,u,d):o.rect(0,0,l,u),o.closePath(),o.fillStrokeShape(this)),f&&(d&&o.clip(),o.drawImage.apply(o,h))}_hitFunc(o){const l=this.width(),u=this.height(),d=this.cornerRadius();o.beginPath(),d?e.Util.drawRoundedRectPath(o,l,u,d):o.rect(0,0,l,u),o.closePath(),o.fillStrokeShape(this)}getWidth(){var o,l;return(o=this.attrs.width)!==null&&o!==void 0?o:(l=this.image())===null||l===void 0?void 0:l.width}getHeight(){var o,l;return(o=this.attrs.height)!==null&&o!==void 0?o:(l=this.image())===null||l===void 0?void 0:l.height}static fromURL(o,l,u=null){const d=e.Util.createImageElement();d.onload=function(){const f=new a({image:d});l(f)},d.onerror=u,d.crossOrigin="Anonymous",d.src=o}}return Lx.Image=a,a.prototype.className="Image",(0,n._registerNode)(a),t.Factory.addGetterSetter(a,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(a,"image"),t.Factory.addComponentsGetterSetter(a,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(a,"cropX",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropY",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropWidth",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropHeight",0,(0,s.getNumberValidator)()),Lx}var Dh={},Mj;function fne(){if(Mj)return Dh;Mj=1,Object.defineProperty(Dh,"__esModule",{value:!0}),Dh.Tag=Dh.Label=void 0;const e=Cn(),t=ki(),r=TT(),n=Nn(),s=wn(),a=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],i="Change.konva",o="none",l="up",u="right",d="down",f="left",h=a.length;class g extends r.Group{constructor(v){super(v),this.on("add.konva",function(T){this._addListeners(T.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(v){let T=this,k;const b=function(){T._sync()};for(k=0;k<h;k++)v.on(a[k]+i,b)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let v=this.getText(),T=this.getTag(),k,b,N,E,P,M,j;if(v&&T){switch(k=v.width(),b=v.height(),N=T.pointerDirection(),E=T.pointerWidth(),j=T.pointerHeight(),P=0,M=0,N){case l:P=k/2,M=-1*j;break;case u:P=k+E,M=b/2;break;case d:P=k/2,M=b+j;break;case f:P=-1*E,M=b/2;break}T.setAttrs({x:-1*P,y:-1*M,width:k,height:b}),v.setAttrs({x:-1*P,y:-1*M})}}}Dh.Label=g,g.prototype.className="Label",(0,s._registerNode)(g);class x extends t.Shape{_sceneFunc(v){const T=this.width(),k=this.height(),b=this.pointerDirection(),N=this.pointerWidth(),E=this.pointerHeight(),P=this.cornerRadius();let M=0,j=0,A=0,O=0;typeof P=="number"?M=j=A=O=Math.min(P,T/2,k/2):(M=Math.min(P[0]||0,T/2,k/2),j=Math.min(P[1]||0,T/2,k/2),O=Math.min(P[2]||0,T/2,k/2),A=Math.min(P[3]||0,T/2,k/2)),v.beginPath(),v.moveTo(M,0),b===l&&(v.lineTo((T-N)/2,0),v.lineTo(T/2,-1*E),v.lineTo((T+N)/2,0)),v.lineTo(T-j,0),v.arc(T-j,j,j,Math.PI*3/2,0,!1),b===u&&(v.lineTo(T,(k-E)/2),v.lineTo(T+N,k/2),v.lineTo(T,(k+E)/2)),v.lineTo(T,k-O),v.arc(T-O,k-O,O,0,Math.PI/2,!1),b===d&&(v.lineTo((T+N)/2,k),v.lineTo(T/2,k+E),v.lineTo((T-N)/2,k)),v.lineTo(A,k),v.arc(A,k-A,A,Math.PI/2,Math.PI,!1),b===f&&(v.lineTo(0,(k+E)/2),v.lineTo(-1*N,k/2),v.lineTo(0,(k-E)/2)),v.lineTo(0,M),v.arc(M,M,M,Math.PI,Math.PI*3/2,!1),v.closePath(),v.fillStrokeShape(this)}getSelfRect(){let v=0,T=0,k=this.pointerWidth(),b=this.pointerHeight(),N=this.pointerDirection(),E=this.width(),P=this.height();return N===l?(T-=b,P+=b):N===d?P+=b:N===f?(v-=k*1.5,E+=k):N===u&&(E+=k*1.5),{x:v,y:T,width:E,height:P}}}return Dh.Tag=x,x.prototype.className="Tag",(0,s._registerNode)(x),e.Factory.addGetterSetter(x,"pointerDirection",o),e.Factory.addGetterSetter(x,"pointerWidth",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(x,"pointerHeight",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(x,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),Dh}var Bx={},Fj;function G$(){if(Fj)return Bx;Fj=1,Object.defineProperty(Bx,"__esModule",{value:!0}),Bx.Rect=void 0;const e=Cn(),t=ki(),r=wn(),n=ga(),s=Nn();class a extends t.Shape{_sceneFunc(o){const l=this.cornerRadius(),u=this.width(),d=this.height();o.beginPath(),l?n.Util.drawRoundedRectPath(o,u,d,l):o.rect(0,0,u,d),o.closePath(),o.fillStrokeShape(this)}}return Bx.Rect=a,a.prototype.className="Rect",(0,r._registerNode)(a),e.Factory.addGetterSetter(a,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),Bx}var $x={},Dj;function hne(){if(Dj)return $x;Dj=1,Object.defineProperty($x,"__esModule",{value:!0}),$x.RegularPolygon=void 0;const e=Cn(),t=ki(),r=Nn(),n=wn();class s extends t.Shape{_sceneFunc(i){const o=this._getPoints();i.beginPath(),i.moveTo(o[0].x,o[0].y);for(let l=1;l<o.length;l++)i.lineTo(o[l].x,o[l].y);i.closePath(),i.fillStrokeShape(this)}_getPoints(){const i=this.attrs.sides,o=this.attrs.radius||0,l=[];for(let u=0;u<i;u++)l.push({x:o*Math.sin(u*2*Math.PI/i),y:-1*o*Math.cos(u*2*Math.PI/i)});return l}getSelfRect(){const i=this._getPoints();let o=i[0].x,l=i[0].y,u=i[0].x,d=i[0].y;return i.forEach(f=>{o=Math.min(o,f.x),l=Math.max(l,f.x),u=Math.min(u,f.y),d=Math.max(d,f.y)}),{x:o,y:u,width:l-o,height:d-u}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(i){this.radius(i/2)}setHeight(i){this.radius(i/2)}}return $x.RegularPolygon=s,s.prototype.className="RegularPolygon",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"sides",0,(0,r.getNumberValidator)()),$x}var zx={},Oj;function mne(){if(Oj)return zx;Oj=1,Object.defineProperty(zx,"__esModule",{value:!0}),zx.Ring=void 0;const e=Cn(),t=ki(),r=Nn(),n=wn(),s=Math.PI*2;class a extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.innerRadius(),0,s,!1),o.moveTo(this.outerRadius(),0),o.arc(0,0,this.outerRadius(),s,0,!0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}}return zx.Ring=a,a.prototype.className="Ring",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(a),e.Factory.addGetterSetter(a,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,r.getNumberValidator)()),zx}var Ux={},Ij;function gne(){if(Ij)return Ux;Ij=1,Object.defineProperty(Ux,"__esModule",{value:!0}),Ux.Sprite=void 0;const e=Cn(),t=ki(),r=CT(),n=Nn(),s=wn();class a extends t.Shape{constructor(o){super(o),this._updated=!0,this.anim=new r.Animation(()=>{const l=this._updated;return this._updated=!1,l}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(o){const l=this.animation(),u=this.frameIndex(),d=u*4,f=this.animations()[l],h=this.frameOffsets(),g=f[d+0],x=f[d+1],y=f[d+2],v=f[d+3],T=this.image();if((this.hasFill()||this.hasStroke())&&(o.beginPath(),o.rect(0,0,y,v),o.closePath(),o.fillStrokeShape(this)),T)if(h){const k=h[l],b=u*2;o.drawImage(T,g,x,y,v,k[b+0],k[b+1],y,v)}else o.drawImage(T,g,x,y,v,0,0,y,v)}_hitFunc(o){const l=this.animation(),u=this.frameIndex(),d=u*4,f=this.animations()[l],h=this.frameOffsets(),g=f[d+2],x=f[d+3];if(o.beginPath(),h){const y=h[l],v=u*2;o.rect(y[v+0],y[v+1],g,x)}else o.rect(0,0,g,x);o.closePath(),o.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const o=this;this.interval=setInterval(function(){o._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const o=this.getLayer();this.anim.setLayers(o),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const o=this.frameIndex(),l=this.animation(),u=this.animations(),d=u[l],f=d.length/4;o<f-1?this.frameIndex(o+1):this.frameIndex(0)}}return Ux.Sprite=a,a.prototype.className="Sprite",(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"animation"),e.Factory.addGetterSetter(a,"animations"),e.Factory.addGetterSetter(a,"frameOffsets"),e.Factory.addGetterSetter(a,"image"),e.Factory.addGetterSetter(a,"frameIndex",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"frameRate",17,(0,n.getNumberValidator)()),e.Factory.backCompat(a,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Ux}var Wx={},Rj;function pne(){if(Rj)return Wx;Rj=1,Object.defineProperty(Wx,"__esModule",{value:!0}),Wx.Star=void 0;const e=Cn(),t=ki(),r=Nn(),n=wn();class s extends t.Shape{_sceneFunc(i){const o=this.innerRadius(),l=this.outerRadius(),u=this.numPoints();i.beginPath(),i.moveTo(0,0-l);for(let d=1;d<u*2;d++){const f=d%2===0?l:o,h=f*Math.sin(d*Math.PI/u),g=-1*f*Math.cos(d*Math.PI/u);i.lineTo(h,g)}i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(i){this.outerRadius(i/2)}setHeight(i){this.outerRadius(i/2)}}return Wx.Star=s,s.prototype.className="Star",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"numPoints",5,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"outerRadius",0,(0,r.getNumberValidator)()),Wx}var Kg={},Lj;function V$(){if(Lj)return Kg;Lj=1,Object.defineProperty(Kg,"__esModule",{value:!0}),Kg.Text=void 0,Kg.stringToArray=i;const e=ga(),t=Cn(),r=ki(),n=wn(),s=Nn(),a=wn();function i(I){return[...I].reduce((W,K,Z,oe)=>{if(new RegExp("\\p{Emoji}","u").test(K)){const J=oe[Z+1];J&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(J)?(W.push(K+J),oe[Z+1]=""):W.push(K)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(K+(oe[Z+1]||""))?W.push(K+oe[Z+1]):Z>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(K)?W[W.length-1]+=K:K&&W.push(K);return W},[])}const o="auto",l="center",u="inherit",d="justify",f="Change.konva",h="2d",g="-",x="left",y="text",v="Text",T="top",k="bottom",b="middle",N="normal",E="px ",P=" ",M="right",j="rtl",A="word",O="char",L="none",q="",Q=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],ae=Q.length;function te(I){return I.split(",").map(W=>{W=W.trim();const K=W.indexOf(" ")>=0,Z=W.indexOf('"')>=0||W.indexOf("'")>=0;return K&&!Z&&(W=`"${W}"`),W}).join(", ")}let ne;function B(){return ne||(ne=e.Util.createCanvasElement().getContext(h),ne)}function V(I){I.fillText(this._partialText,this._partialTextX,this._partialTextY)}function R(I){I.setAttr("miterLimit",2),I.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function H(I){return I=I||{},!I.fillLinearGradientColorStops&&!I.fillRadialGradientColorStops&&!I.fillPatternImage&&(I.fill=I.fill||"black"),I}class U extends r.Shape{constructor(W){super(H(W)),this._partialTextX=0,this._partialTextY=0;for(let K=0;K<ae;K++)this.on(Q[K]+f,this._setTextData);this._setTextData()}_sceneFunc(W){const K=this.textArr,Z=K.length;if(!this.text())return;let oe=this.padding(),J=this.fontSize(),le=this.lineHeight()*J,ue=this.verticalAlign(),de=this.direction(),Te=0,ie=this.align(),xe=this.getWidth(),Ae=this.letterSpacing(),Me=this.fill(),Je=this.textDecoration(),He=Je.indexOf("underline")!==-1,It=Je.indexOf("line-through")!==-1,it;de=de===u?W.direction:de;let kt=le/2,pt=b;if(n.Konva._fixTextRendering){const ut=this.measureSize("M");pt="alphabetic",kt=(ut.fontBoundingBoxAscent-ut.fontBoundingBoxDescent)/2+le/2}for(de===j&&W.setAttr("direction",de),W.setAttr("font",this._getContextFont()),W.setAttr("textBaseline",pt),W.setAttr("textAlign",x),ue===b?Te=(this.getHeight()-Z*le-oe*2)/2:ue===k&&(Te=this.getHeight()-Z*le-oe*2),W.translate(oe,Te+oe),it=0;it<Z;it++){let ut=0,_t=0;const qt=K[it],Jt=qt.text,Ht=qt.width,$e=qt.lastInParagraph;if(W.save(),ie===M?ut+=xe-Ht-oe*2:ie===l&&(ut+=(xe-Ht-oe*2)/2),He){W.save(),W.beginPath();const ze=n.Konva._fixTextRendering?Math.round(J/4):Math.round(J/2),tt=ut,ot=kt+_t+ze;W.moveTo(tt,ot);const nt=ie===d&&!$e?xe-oe*2:Ht;W.lineTo(tt+Math.round(nt),ot),W.lineWidth=J/15;const Dt=this._getLinearGradient();W.strokeStyle=Dt||Me,W.stroke(),W.restore()}if(It){W.save(),W.beginPath();const ze=n.Konva._fixTextRendering?-Math.round(J/4):0;W.moveTo(ut,kt+_t+ze);const tt=ie===d&&!$e?xe-oe*2:Ht;W.lineTo(ut+Math.round(tt),kt+_t+ze),W.lineWidth=J/15;const ot=this._getLinearGradient();W.strokeStyle=ot||Me,W.stroke(),W.restore()}if(de!==j&&(Ae!==0||ie===d)){const ze=Jt.split(" ").length-1,tt=i(Jt);for(let ot=0;ot<tt.length;ot++){const nt=tt[ot];nt===" "&&!$e&&ie===d&&(ut+=(xe-oe*2-Ht)/ze),this._partialTextX=ut,this._partialTextY=kt+_t,this._partialText=nt,W.fillStrokeShape(this),ut+=this.measureSize(nt).width+Ae}}else Ae!==0&&W.setAttr("letterSpacing",`${Ae}px`),this._partialTextX=ut,this._partialTextY=kt+_t,this._partialText=Jt,W.fillStrokeShape(this);W.restore(),Z>1&&(kt+=le)}}_hitFunc(W){const K=this.getWidth(),Z=this.getHeight();W.beginPath(),W.rect(0,0,K,Z),W.closePath(),W.fillStrokeShape(this)}setText(W){const K=e.Util._isString(W)?W:W==null?"":W+"";return this._setAttr(y,K),this}getWidth(){return this.attrs.width===o||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===o||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(W){var K,Z,oe,J,le,ue,de,Te,ie,xe,Ae;let Me=B(),Je=this.fontSize(),He;Me.save(),Me.font=this._getContextFont(),He=Me.measureText(W),Me.restore();const It=Je/100;return{actualBoundingBoxAscent:(K=He.actualBoundingBoxAscent)!==null&&K!==void 0?K:71.58203125*It,actualBoundingBoxDescent:(Z=He.actualBoundingBoxDescent)!==null&&Z!==void 0?Z:0,actualBoundingBoxLeft:(oe=He.actualBoundingBoxLeft)!==null&&oe!==void 0?oe:-7.421875*It,actualBoundingBoxRight:(J=He.actualBoundingBoxRight)!==null&&J!==void 0?J:75.732421875*It,alphabeticBaseline:(le=He.alphabeticBaseline)!==null&&le!==void 0?le:0,emHeightAscent:(ue=He.emHeightAscent)!==null&&ue!==void 0?ue:100*It,emHeightDescent:(de=He.emHeightDescent)!==null&&de!==void 0?de:-20*It,fontBoundingBoxAscent:(Te=He.fontBoundingBoxAscent)!==null&&Te!==void 0?Te:91*It,fontBoundingBoxDescent:(ie=He.fontBoundingBoxDescent)!==null&&ie!==void 0?ie:21*It,hangingBaseline:(xe=He.hangingBaseline)!==null&&xe!==void 0?xe:72.80000305175781*It,ideographicBaseline:(Ae=He.ideographicBaseline)!==null&&Ae!==void 0?Ae:-21*It,width:He.width,height:Je}}_getContextFont(){return this.fontStyle()+P+this.fontVariant()+P+(this.fontSize()+E)+te(this.fontFamily())}_addTextLine(W){this.align()===d&&(W=W.trim());const Z=this._getTextWidth(W);return this.textArr.push({text:W,width:Z,lastInParagraph:!1})}_getTextWidth(W){const K=this.letterSpacing(),Z=W.length;return B().measureText(W).width+K*Z}_setTextData(){let W=this.text().split(`
`),K=+this.fontSize(),Z=0,oe=this.lineHeight()*K,J=this.attrs.width,le=this.attrs.height,ue=J!==o&&J!==void 0,de=le!==o&&le!==void 0,Te=this.padding(),ie=J-Te*2,xe=le-Te*2,Ae=0,Me=this.wrap(),Je=Me!==L,He=Me!==O&&Je,It=this.ellipsis();this.textArr=[],B().font=this._getContextFont();const it=It?this._getTextWidth(q):0;for(let kt=0,pt=W.length;kt<pt;++kt){let ut=W[kt],_t=this._getTextWidth(ut);if(ue&&_t>ie)for(;ut.length>0;){let qt=0,Jt=i(ut).length,Ht="",$e=0;for(;qt<Jt;){const ze=qt+Jt>>>1,tt=i(ut),ot=tt.slice(0,ze+1).join(""),nt=this._getTextWidth(ot);(It&&de&&Ae+oe>xe?nt+it:nt)<=ie?(qt=ze+1,Ht=ot,$e=nt):Jt=ze}if(Ht){if(He){const ot=i(ut),nt=i(Ht),Dt=ot[nt.length],Rt=Dt===P||Dt===g;let Qt;if(Rt&&$e<=ie)Qt=nt.length;else{const wr=nt.lastIndexOf(P),kr=nt.lastIndexOf(g);Qt=Math.max(wr,kr)+1}Qt>0&&(qt=Qt,Ht=ot.slice(0,qt).join(""),$e=this._getTextWidth(Ht))}if(Ht=Ht.trimRight(),this._addTextLine(Ht),Z=Math.max(Z,$e),Ae+=oe,this._shouldHandleEllipsis(Ae)){this._tryToAddEllipsisToLastLine();break}if(ut=i(ut).slice(qt).join("").trimLeft(),ut.length>0&&(_t=this._getTextWidth(ut),_t<=ie)){this._addTextLine(ut),Ae+=oe,Z=Math.max(Z,_t);break}}else break}else this._addTextLine(ut),Ae+=oe,Z=Math.max(Z,_t),this._shouldHandleEllipsis(Ae)&&kt<pt-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),de&&Ae+oe>xe)break}this.textHeight=K,this.textWidth=Z}_shouldHandleEllipsis(W){const K=+this.fontSize(),Z=this.lineHeight()*K,oe=this.attrs.height,J=oe!==o&&oe!==void 0,le=this.padding(),ue=oe-le*2;return!(this.wrap()!==L)||J&&W+Z>ue}_tryToAddEllipsisToLastLine(){const W=this.attrs.width,K=W!==o&&W!==void 0,Z=this.padding(),oe=W-Z*2,J=this.ellipsis(),le=this.textArr[this.textArr.length-1];!le||!J||(K&&(this._getTextWidth(le.text+q)<oe||(le.text=le.text.slice(0,le.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(le.text+q))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const W=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,K=this.hasShadow();return W&&K?!0:super._useBufferCanvas()}}return Kg.Text=U,U.prototype._fillFunc=V,U.prototype._strokeFunc=R,U.prototype.className=v,U.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,a._registerNode)(U),t.Factory.overWriteSetter(U,"width",(0,s.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(U,"height",(0,s.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(U,"direction",u),t.Factory.addGetterSetter(U,"fontFamily","Arial"),t.Factory.addGetterSetter(U,"fontSize",12,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(U,"fontStyle",N),t.Factory.addGetterSetter(U,"fontVariant",N),t.Factory.addGetterSetter(U,"padding",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(U,"align",x),t.Factory.addGetterSetter(U,"verticalAlign",T),t.Factory.addGetterSetter(U,"lineHeight",1,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(U,"wrap",A),t.Factory.addGetterSetter(U,"ellipsis",!1,(0,s.getBooleanValidator)()),t.Factory.addGetterSetter(U,"letterSpacing",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(U,"text","",(0,s.getStringValidator)()),t.Factory.addGetterSetter(U,"textDecoration",""),Kg}var Hx={},Bj;function xne(){if(Bj)return Hx;Bj=1,Object.defineProperty(Hx,"__esModule",{value:!0}),Hx.TextPath=void 0;const e=ga(),t=Cn(),r=ki(),n=ET(),s=V$(),a=Nn(),i=wn(),o="",l="normal";function u(h){h.fillText(this.partialText,0,0)}function d(h){h.strokeText(this.partialText,0,0)}class f extends r.Shape{constructor(g){super(g),this.dummyCanvas=e.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return n.Path.getPathLength(this.dataArray)}_getPointAtLength(g){if(!this.attrs.data)return null;const x=this.pathLength;return g-1>x?null:n.Path.getPointAtLengthOfDataArray(g,this.dataArray)}_readDataAttribute(){this.dataArray=n.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(g){g.setAttr("font",this._getContextFont()),g.setAttr("textBaseline",this.textBaseline()),g.setAttr("textAlign","left"),g.save();const x=this.textDecoration(),y=this.fill(),v=this.fontSize(),T=this.glyphInfo;x==="underline"&&g.beginPath();for(let k=0;k<T.length;k++){g.save();const b=T[k].p0;g.translate(b.x,b.y),g.rotate(T[k].rotation),this.partialText=T[k].text,g.fillStrokeShape(this),x==="underline"&&(k===0&&g.moveTo(0,v/2+1),g.lineTo(v,v/2+1)),g.restore()}x==="underline"&&(g.strokeStyle=y,g.lineWidth=v/20,g.stroke()),g.restore()}_hitFunc(g){g.beginPath();const x=this.glyphInfo;if(x.length>=1){const y=x[0].p0;g.moveTo(y.x,y.y)}for(let y=0;y<x.length;y++){const v=x[y].p1;g.lineTo(v.x,v.y)}g.setAttr("lineWidth",this.fontSize()),g.setAttr("strokeStyle",this.colorKey),g.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(g){return s.Text.prototype.setText.call(this,g)}_getContextFont(){return s.Text.prototype._getContextFont.call(this)}_getTextSize(g){const y=this.dummyCanvas.getContext("2d");y.save(),y.font=this._getContextFont();const v=y.measureText(g);return y.restore(),{width:v.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:g,height:x}=this._getTextSize(this.attrs.text);if(this.textWidth=g,this.textHeight=x,this.glyphInfo=[],!this.attrs.data)return null;const y=this.letterSpacing(),v=this.align(),T=this.kerningFunc(),k=Math.max(this.textWidth+((this.attrs.text||"").length-1)*y,0);let b=0;v==="center"&&(b=Math.max(0,this.pathLength/2-k/2)),v==="right"&&(b=Math.max(0,this.pathLength-k));const N=(0,s.stringToArray)(this.text());let E=b;for(let P=0;P<N.length;P++){const M=this._getPointAtLength(E);if(!M)return;let j=this._getTextSize(N[P]).width+y;if(N[P]===" "&&v==="justify"){const ae=this.text().split(" ").length-1;j+=(this.pathLength-k)/ae}const A=this._getPointAtLength(E+j);if(!A)return;const O=n.Path.getLineLength(M.x,M.y,A.x,A.y);let L=0;if(T)try{L=T(N[P-1],N[P])*this.fontSize()}catch{L=0}M.x+=L,A.x+=L,this.textWidth+=L;const q=n.Path.getPointOnLine(L+O/2,M.x,M.y,A.x,A.y),Q=Math.atan2(A.y-M.y,A.x-M.x);this.glyphInfo.push({transposeX:q.x,transposeY:q.y,text:N[P],rotation:Q,p0:M,p1:A}),E+=j}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const g=[];this.glyphInfo.forEach(function(E){g.push(E.p0.x),g.push(E.p0.y),g.push(E.p1.x),g.push(E.p1.y)});let x=g[0]||0,y=g[0]||0,v=g[1]||0,T=g[1]||0,k,b;for(let E=0;E<g.length/2;E++)k=g[E*2],b=g[E*2+1],x=Math.min(x,k),y=Math.max(y,k),v=Math.min(v,b),T=Math.max(T,b);const N=this.fontSize();return{x:x-N/2,y:v-N/2,width:y-x+N,height:T-v+N}}destroy(){return e.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}return Hx.TextPath=f,f.prototype._fillFunc=u,f.prototype._strokeFunc=d,f.prototype._fillFuncHit=u,f.prototype._strokeFuncHit=d,f.prototype.className="TextPath",f.prototype._attrsAffectingSize=["text","fontSize","data"],(0,i._registerNode)(f),t.Factory.addGetterSetter(f,"data"),t.Factory.addGetterSetter(f,"fontFamily","Arial"),t.Factory.addGetterSetter(f,"fontSize",12,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(f,"fontStyle",l),t.Factory.addGetterSetter(f,"align","left"),t.Factory.addGetterSetter(f,"letterSpacing",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(f,"textBaseline","middle"),t.Factory.addGetterSetter(f,"fontVariant",l),t.Factory.addGetterSetter(f,"text",o),t.Factory.addGetterSetter(f,"textDecoration",""),t.Factory.addGetterSetter(f,"kerningFunc",void 0),Hx}var Gx={},$j;function yne(){if($j)return Gx;$j=1,Object.defineProperty(Gx,"__esModule",{value:!0}),Gx.Transformer=void 0;const e=ga(),t=Cn(),r=Aa(),n=ki(),s=G$(),a=TT(),i=wn(),o=Nn(),l=wn(),u="tr-konva",d=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(j=>j+`.${u}`).join(" "),f="nodesRect",h=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],g={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},x="ontouchstart"in i.Konva._global;function y(j,A,O){if(j==="rotater")return O;A+=e.Util.degToRad(g[j]||0);const L=(e.Util.radToDeg(A)%360+360)%360;return e.Util._inRange(L,315+22.5,360)||e.Util._inRange(L,0,22.5)?"ns-resize":e.Util._inRange(L,45-22.5,45+22.5)?"nesw-resize":e.Util._inRange(L,90-22.5,90+22.5)?"ew-resize":e.Util._inRange(L,135-22.5,135+22.5)?"nwse-resize":e.Util._inRange(L,180-22.5,180+22.5)?"ns-resize":e.Util._inRange(L,225-22.5,225+22.5)?"nesw-resize":e.Util._inRange(L,270-22.5,270+22.5)?"ew-resize":e.Util._inRange(L,315-22.5,315+22.5)?"nwse-resize":(e.Util.error("Transformer has unknown angle for cursor detection: "+L),"pointer")}const v=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function T(j){return{x:j.x+j.width/2*Math.cos(j.rotation)+j.height/2*Math.sin(-j.rotation),y:j.y+j.height/2*Math.cos(j.rotation)+j.width/2*Math.sin(j.rotation)}}function k(j,A,O){const L=O.x+(j.x-O.x)*Math.cos(A)-(j.y-O.y)*Math.sin(A),q=O.y+(j.x-O.x)*Math.sin(A)+(j.y-O.y)*Math.cos(A);return{...j,rotation:j.rotation+A,x:L,y:q}}function b(j,A){const O=T(j);return k(j,A,O)}function N(j,A,O){let L=A;for(let q=0;q<j.length;q++){const Q=i.Konva.getAngle(j[q]),ae=Math.abs(Q-A)%(Math.PI*2);Math.min(ae,Math.PI*2-ae)<O&&(L=Q)}return L}let E=0;class P extends a.Group{constructor(A){super(A),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(d,this.update),this.getNode()&&this.update()}attachTo(A){return this.setNode(A),this}setNode(A){return e.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([A])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(A=[]){this._nodes&&this._nodes.length&&this.detach();const O=A.filter(q=>q.isAncestorOf(this)?(e.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=A=O,A.length===1&&this.useSingleNodeRotation()?this.rotation(A[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(q=>{const Q=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(q._attrsAffectingSize.length){const ae=q._attrsAffectingSize.map(te=>te+"Change."+this._getEventNamespace()).join(" ");q.on(ae,Q)}q.on(h.map(ae=>ae+`.${this._getEventNamespace()}`).join(" "),Q),q.on(`absoluteTransformChange.${this._getEventNamespace()}`,Q),this._proxyDrag(q)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(A){let O;A.on(`dragstart.${this._getEventNamespace()}`,L=>{O=A.getAbsolutePosition(),!this.isDragging()&&A!==this.findOne(".back")&&this.startDrag(L,!1)}),A.on(`dragmove.${this._getEventNamespace()}`,L=>{if(!O)return;const q=A.getAbsolutePosition(),Q=q.x-O.x,ae=q.y-O.y;this.nodes().forEach(te=>{if(te===A||te.isDragging())return;const ne=te.getAbsolutePosition();te.setAbsolutePosition({x:ne.x+Q,y:ne.y+ae}),te.startDrag(L)}),O=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(A=>{A.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(f),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(f,this.__getNodeRect)}__getNodeShape(A,O=this.rotation(),L){const q=A.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),Q=A.getAbsoluteScale(L),ae=A.getAbsolutePosition(L),te=q.x*Q.x-A.offsetX()*Q.x,ne=q.y*Q.y-A.offsetY()*Q.y,B=(i.Konva.getAngle(A.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),V={x:ae.x+te*Math.cos(B)+ne*Math.sin(-B),y:ae.y+ne*Math.cos(B)+te*Math.sin(B),width:q.width*Q.x,height:q.height*Q.y,rotation:B};return k(V,-i.Konva.getAngle(O),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const O=[];this.nodes().map(B=>{const V=B.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),R=[{x:V.x,y:V.y},{x:V.x+V.width,y:V.y},{x:V.x+V.width,y:V.y+V.height},{x:V.x,y:V.y+V.height}],H=B.getAbsoluteTransform();R.forEach(function(U){const I=H.point(U);O.push(I)})});const L=new e.Transform;L.rotate(-i.Konva.getAngle(this.rotation()));let q=1/0,Q=1/0,ae=-1/0,te=-1/0;O.forEach(function(B){const V=L.point(B);q===void 0&&(q=ae=V.x,Q=te=V.y),q=Math.min(q,V.x),Q=Math.min(Q,V.y),ae=Math.max(ae,V.x),te=Math.max(te,V.y)}),L.invert();const ne=L.point({x:q,y:Q});return{x:ne.x,y:ne.y,width:ae-q,height:te-Q,rotation:i.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),v.forEach(A=>{this._createAnchor(A)}),this._createAnchor("rotater")}_createAnchor(A){const O=new s.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:A+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:x?10:"auto"}),L=this;O.on("mousedown touchstart",function(q){L._handleMouseDown(q)}),O.on("dragstart",q=>{O.stopDrag(),q.cancelBubble=!0}),O.on("dragend",q=>{q.cancelBubble=!0}),O.on("mouseenter",()=>{const q=i.Konva.getAngle(this.rotation()),Q=this.rotateAnchorCursor(),ae=y(A,q,Q);O.getStage().content&&(O.getStage().content.style.cursor=ae),this._cursorChange=!0}),O.on("mouseout",()=>{O.getStage().content&&(O.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(O)}_createBack(){const A=new n.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(O,L){const q=L.getParent(),Q=q.padding();O.beginPath(),O.rect(-Q,-Q,L.width()+Q*2,L.height()+Q*2),O.moveTo(L.width()/2,-Q),q.rotateEnabled()&&q.rotateLineVisible()&&O.lineTo(L.width()/2,-q.rotateAnchorOffset()*e.Util._sign(L.height())-Q),O.fillStrokeShape(L)},hitFunc:(O,L)=>{if(!this.shouldOverdrawWholeArea())return;const q=this.padding();O.beginPath(),O.rect(-q,-q,L.width()+q*2,L.height()+q*2),O.fillStrokeShape(L)}});this.add(A),this._proxyDrag(A),A.on("dragstart",O=>{O.cancelBubble=!0}),A.on("dragmove",O=>{O.cancelBubble=!0}),A.on("dragend",O=>{O.cancelBubble=!0}),this.on("dragmove",O=>{this.update()})}_handleMouseDown(A){if(this._transforming)return;this._movingAnchorName=A.target.name().split(" ")[0];const O=this._getNodeRect(),L=O.width,q=O.height,Q=Math.sqrt(Math.pow(L,2)+Math.pow(q,2));this.sin=Math.abs(q/Q),this.cos=Math.abs(L/Q),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const ae=A.target.getAbsolutePosition(),te=A.target.getStage().getPointerPosition();this._anchorDragOffset={x:te.x-ae.x,y:te.y-ae.y},E++,this._fire("transformstart",{evt:A.evt,target:this.getNode()}),this._nodes.forEach(ne=>{ne._fire("transformstart",{evt:A.evt,target:ne})})}_handleMouseMove(A){let O,L,q;const Q=this.findOne("."+this._movingAnchorName),ae=Q.getStage();ae.setPointersPositions(A);const te=ae.getPointerPosition();let ne={x:te.x-this._anchorDragOffset.x,y:te.y-this._anchorDragOffset.y};const B=Q.getAbsolutePosition();this.anchorDragBoundFunc()&&(ne=this.anchorDragBoundFunc()(B,ne,A)),Q.setAbsolutePosition(ne);const V=Q.getAbsolutePosition();if(B.x===V.x&&B.y===V.y)return;if(this._movingAnchorName==="rotater"){const oe=this._getNodeRect();O=Q.x()-oe.width/2,L=-Q.y()+oe.height/2;let J=Math.atan2(-L,O)+Math.PI/2;oe.height<0&&(J-=Math.PI);const ue=i.Konva.getAngle(this.rotation())+J,de=i.Konva.getAngle(this.rotationSnapTolerance()),ie=N(this.rotationSnaps(),ue,de)-oe.rotation,xe=b(oe,ie);this._fitNodesInto(xe,A);return}const R=this.shiftBehavior();let H;R==="inverted"?H=this.keepRatio()&&!A.shiftKey:R==="none"?H=this.keepRatio():H=this.keepRatio()||A.shiftKey;let U=this.centeredScaling()||A.altKey;if(this._movingAnchorName==="top-left"){if(H){const oe=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};q=Math.sqrt(Math.pow(oe.x-Q.x(),2)+Math.pow(oe.y-Q.y(),2));const J=this.findOne(".top-left").x()>oe.x?-1:1,le=this.findOne(".top-left").y()>oe.y?-1:1;O=q*this.cos*J,L=q*this.sin*le,this.findOne(".top-left").x(oe.x-O),this.findOne(".top-left").y(oe.y-L)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(Q.y());else if(this._movingAnchorName==="top-right"){if(H){const oe=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};q=Math.sqrt(Math.pow(Q.x()-oe.x,2)+Math.pow(oe.y-Q.y(),2));const J=this.findOne(".top-right").x()<oe.x?-1:1,le=this.findOne(".top-right").y()>oe.y?-1:1;O=q*this.cos*J,L=q*this.sin*le,this.findOne(".top-right").x(oe.x+O),this.findOne(".top-right").y(oe.y-L)}var I=Q.position();this.findOne(".top-left").y(I.y),this.findOne(".bottom-right").x(I.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(Q.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(Q.x());else if(this._movingAnchorName==="bottom-left"){if(H){const oe=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};q=Math.sqrt(Math.pow(oe.x-Q.x(),2)+Math.pow(Q.y()-oe.y,2));const J=oe.x<Q.x()?-1:1,le=Q.y()<oe.y?-1:1;O=q*this.cos*J,L=q*this.sin*le,Q.x(oe.x-O),Q.y(oe.y+L)}I=Q.position(),this.findOne(".top-left").x(I.x),this.findOne(".bottom-right").y(I.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(Q.y());else if(this._movingAnchorName==="bottom-right"){if(H){const oe=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};q=Math.sqrt(Math.pow(Q.x()-oe.x,2)+Math.pow(Q.y()-oe.y,2));const J=this.findOne(".bottom-right").x()<oe.x?-1:1,le=this.findOne(".bottom-right").y()<oe.y?-1:1;O=q*this.cos*J,L=q*this.sin*le,this.findOne(".bottom-right").x(oe.x+O),this.findOne(".bottom-right").y(oe.y+L)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(U=this.centeredScaling()||A.altKey,U){const oe=this.findOne(".top-left"),J=this.findOne(".bottom-right"),le=oe.x(),ue=oe.y(),de=this.getWidth()-J.x(),Te=this.getHeight()-J.y();J.move({x:-le,y:-ue}),oe.move({x:de,y:Te})}const W=this.findOne(".top-left").getAbsolutePosition();O=W.x,L=W.y;const K=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),Z=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:O,y:L,width:K,height:Z,rotation:i.Konva.getAngle(this.rotation())},A)}_handleMouseUp(A){this._removeEvents(A)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(A){var O;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const L=this.getNode();E--,this._fire("transformend",{evt:A,target:L}),(O=this.getLayer())===null||O===void 0||O.batchDraw(),L&&this._nodes.forEach(q=>{var Q;q._fire("transformend",{evt:A,target:q}),(Q=q.getLayer())===null||Q===void 0||Q.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(A,O){const L=this._getNodeRect(),q=1;if(e.Util._inRange(A.width,-this.padding()*2-q,q)){this.update();return}if(e.Util._inRange(A.height,-this.padding()*2-q,q)){this.update();return}const Q=new e.Transform;if(Q.rotate(i.Konva.getAngle(this.rotation())),this._movingAnchorName&&A.width<0&&this._movingAnchorName.indexOf("left")>=0){const H=Q.point({x:-this.padding()*2,y:0});A.x+=H.x,A.y+=H.y,A.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y}else if(this._movingAnchorName&&A.width<0&&this._movingAnchorName.indexOf("right")>=0){const H=Q.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y,A.width+=this.padding()*2}if(this._movingAnchorName&&A.height<0&&this._movingAnchorName.indexOf("top")>=0){const H=Q.point({x:0,y:-this.padding()*2});A.x+=H.x,A.y+=H.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y,A.height+=this.padding()*2}else if(this._movingAnchorName&&A.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const H=Q.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y,A.height+=this.padding()*2}if(this.boundBoxFunc()){const H=this.boundBoxFunc()(L,A);H?A=H:e.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const ae=1e7,te=new e.Transform;te.translate(L.x,L.y),te.rotate(L.rotation),te.scale(L.width/ae,L.height/ae);const ne=new e.Transform,B=A.width/ae,V=A.height/ae;this.flipEnabled()===!1?(ne.translate(A.x,A.y),ne.rotate(A.rotation),ne.translate(A.width<0?A.width:0,A.height<0?A.height:0),ne.scale(Math.abs(B),Math.abs(V))):(ne.translate(A.x,A.y),ne.rotate(A.rotation),ne.scale(B,V));const R=ne.multiply(te.invert());this._nodes.forEach(H=>{var U;const I=H.getParent().getAbsoluteTransform(),W=H.getTransform().copy();W.translate(H.offsetX(),H.offsetY());const K=new e.Transform;K.multiply(I.copy().invert()).multiply(R).multiply(I).multiply(W);const Z=K.decompose();H.setAttrs(Z),(U=H.getLayer())===null||U===void 0||U.batchDraw()}),this.rotation(e.Util._getRotation(A.rotation)),this._nodes.forEach(H=>{this._fire("transform",{evt:O,target:H}),H._fire("transform",{evt:O,target:H})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(A,O){this.findOne(A).setAttrs(O)}update(){var A;const O=this._getNodeRect();this.rotation(e.Util._getRotation(O.rotation));const L=O.width,q=O.height,Q=this.enabledAnchors(),ae=this.resizeEnabled(),te=this.padding(),ne=this.anchorSize(),B=this.find("._anchor");B.forEach(R=>{R.setAttrs({width:ne,height:ne,offsetX:ne/2,offsetY:ne/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:ne/2+te,offsetY:ne/2+te,visible:ae&&Q.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:L/2,y:0,offsetY:ne/2+te,visible:ae&&Q.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:L,y:0,offsetX:ne/2-te,offsetY:ne/2+te,visible:ae&&Q.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:q/2,offsetX:ne/2+te,visible:ae&&Q.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:L,y:q/2,offsetX:ne/2-te,visible:ae&&Q.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:q,offsetX:ne/2+te,offsetY:ne/2-te,visible:ae&&Q.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:L/2,y:q,offsetY:ne/2-te,visible:ae&&Q.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:L,y:q,offsetX:ne/2-te,offsetY:ne/2-te,visible:ae&&Q.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:L/2,y:-this.rotateAnchorOffset()*e.Util._sign(q)-te,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:L,height:q,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const V=this.anchorStyleFunc();V&&B.forEach(R=>{V(R)}),(A=this.getLayer())===null||A===void 0||A.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const A=this.findOne("."+this._movingAnchorName);A&&A.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),a.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return r.Node.prototype.toObject.call(this)}clone(A){return r.Node.prototype.clone.call(this,A)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Gx.Transformer=P,P.isTransforming=()=>E>0;function M(j){return j instanceof Array||e.Util.warn("enabledAnchors value should be an array"),j instanceof Array&&j.forEach(function(A){v.indexOf(A)===-1&&e.Util.warn("Unknown anchor name: "+A+". Available names are: "+v.join(", "))}),j||[]}return P.prototype.className="Transformer",(0,l._registerNode)(P),t.Factory.addGetterSetter(P,"enabledAnchors",v,M),t.Factory.addGetterSetter(P,"flipEnabled",!0,(0,o.getBooleanValidator)()),t.Factory.addGetterSetter(P,"resizeEnabled",!0),t.Factory.addGetterSetter(P,"anchorSize",10,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"rotateEnabled",!0),t.Factory.addGetterSetter(P,"rotateLineVisible",!0),t.Factory.addGetterSetter(P,"rotationSnaps",[]),t.Factory.addGetterSetter(P,"rotateAnchorOffset",50,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(P,"rotationSnapTolerance",5,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"borderEnabled",!0),t.Factory.addGetterSetter(P,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(P,"anchorStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"anchorFill","white"),t.Factory.addGetterSetter(P,"anchorCornerRadius",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(P,"borderStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"borderDash"),t.Factory.addGetterSetter(P,"keepRatio",!0),t.Factory.addGetterSetter(P,"shiftBehavior","default"),t.Factory.addGetterSetter(P,"centeredScaling",!1),t.Factory.addGetterSetter(P,"ignoreStroke",!1),t.Factory.addGetterSetter(P,"padding",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"nodes"),t.Factory.addGetterSetter(P,"node"),t.Factory.addGetterSetter(P,"boundBoxFunc"),t.Factory.addGetterSetter(P,"anchorDragBoundFunc"),t.Factory.addGetterSetter(P,"anchorStyleFunc"),t.Factory.addGetterSetter(P,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(P,"useSingleNodeRotation",!0),t.Factory.backCompat(P,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Gx}var Vx={},zj;function vne(){if(zj)return Vx;zj=1,Object.defineProperty(Vx,"__esModule",{value:!0}),Vx.Wedge=void 0;const e=Cn(),t=ki(),r=wn(),n=Nn(),s=wn();class a extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.radius(),0,r.Konva.getAngle(this.angle()),this.clockwise()),o.lineTo(0,0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}}return Vx.Wedge=a,a.prototype.className="Wedge",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"radius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"angle",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clockwise",!1),e.Factory.backCompat(a,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Vx}var qx={},Uj;function wne(){if(Uj)return qx;Uj=1,Object.defineProperty(qx,"__esModule",{value:!0}),qx.Blur=void 0;const e=Cn(),t=Aa(),r=Nn();function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function i(l,u){const d=l.data,f=l.width,h=l.height;let g,x,y,v,T,k,b,N,E,P,M,j,A,O,L,q,Q,ae,te,ne;const B=u+u+1,V=f-1,R=h-1,H=u+1,U=H*(H+1)/2,I=new n,W=s[u],K=a[u];let Z=null,oe=I,J=null,le=null;for(let ue=1;ue<B;ue++)oe=oe.next=new n,ue===H&&(Z=oe);oe.next=I,y=x=0;for(let ue=0;ue<h;ue++){j=A=O=L=v=T=k=b=0,N=H*(q=d[x]),E=H*(Q=d[x+1]),P=H*(ae=d[x+2]),M=H*(te=d[x+3]),v+=U*q,T+=U*Q,k+=U*ae,b+=U*te,oe=I;for(let de=0;de<H;de++)oe.r=q,oe.g=Q,oe.b=ae,oe.a=te,oe=oe.next;for(let de=1;de<H;de++)g=x+((V<de?V:de)<<2),v+=(oe.r=q=d[g])*(ne=H-de),T+=(oe.g=Q=d[g+1])*ne,k+=(oe.b=ae=d[g+2])*ne,b+=(oe.a=te=d[g+3])*ne,j+=q,A+=Q,O+=ae,L+=te,oe=oe.next;J=I,le=Z;for(let de=0;de<f;de++)d[x+3]=te=b*W>>K,te!==0?(te=255/te,d[x]=(v*W>>K)*te,d[x+1]=(T*W>>K)*te,d[x+2]=(k*W>>K)*te):d[x]=d[x+1]=d[x+2]=0,v-=N,T-=E,k-=P,b-=M,N-=J.r,E-=J.g,P-=J.b,M-=J.a,g=y+((g=de+u+1)<V?g:V)<<2,j+=J.r=d[g],A+=J.g=d[g+1],O+=J.b=d[g+2],L+=J.a=d[g+3],v+=j,T+=A,k+=O,b+=L,J=J.next,N+=q=le.r,E+=Q=le.g,P+=ae=le.b,M+=te=le.a,j-=q,A-=Q,O-=ae,L-=te,le=le.next,x+=4;y+=f}for(let ue=0;ue<f;ue++){A=O=L=j=T=k=b=v=0,x=ue<<2,N=H*(q=d[x]),E=H*(Q=d[x+1]),P=H*(ae=d[x+2]),M=H*(te=d[x+3]),v+=U*q,T+=U*Q,k+=U*ae,b+=U*te,oe=I;for(let Te=0;Te<H;Te++)oe.r=q,oe.g=Q,oe.b=ae,oe.a=te,oe=oe.next;let de=f;for(let Te=1;Te<=u;Te++)x=de+ue<<2,v+=(oe.r=q=d[x])*(ne=H-Te),T+=(oe.g=Q=d[x+1])*ne,k+=(oe.b=ae=d[x+2])*ne,b+=(oe.a=te=d[x+3])*ne,j+=q,A+=Q,O+=ae,L+=te,oe=oe.next,Te<R&&(de+=f);x=ue,J=I,le=Z;for(let Te=0;Te<h;Te++)g=x<<2,d[g+3]=te=b*W>>K,te>0?(te=255/te,d[g]=(v*W>>K)*te,d[g+1]=(T*W>>K)*te,d[g+2]=(k*W>>K)*te):d[g]=d[g+1]=d[g+2]=0,v-=N,T-=E,k-=P,b-=M,N-=J.r,E-=J.g,P-=J.b,M-=J.a,g=ue+((g=Te+H)<R?g:R)*f<<2,v+=j+=J.r=d[g],T+=A+=J.g=d[g+1],k+=O+=J.b=d[g+2],b+=L+=J.a=d[g+3],J=J.next,N+=q=le.r,E+=Q=le.g,P+=ae=le.b,M+=te=le.a,j-=q,A-=Q,O-=ae,L-=te,le=le.next,x+=f}}const o=function(u){const d=Math.round(this.blurRadius());d>0&&i(u,d)};return qx.Blur=o,e.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),qx}var Kx={},Wj;function bne(){if(Wj)return Kx;Wj=1,Object.defineProperty(Kx,"__esModule",{value:!0}),Kx.Brighten=void 0;const e=Cn(),t=Aa(),r=Nn(),n=function(s){const a=this.brightness()*255,i=s.data,o=i.length;for(let l=0;l<o;l+=4)i[l]+=a,i[l+1]+=a,i[l+2]+=a};return Kx.Brighten=n,e.Factory.addGetterSetter(t.Node,"brightness",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),Kx}var Yx={},Hj;function _ne(){if(Hj)return Yx;Hj=1,Object.defineProperty(Yx,"__esModule",{value:!0}),Yx.Contrast=void 0;const e=Cn(),t=Aa(),r=Nn(),n=function(s){const a=Math.pow((this.contrast()+100)/100,2),i=s.data,o=i.length;let l=150,u=150,d=150;for(let f=0;f<o;f+=4)l=i[f],u=i[f+1],d=i[f+2],l/=255,l-=.5,l*=a,l+=.5,l*=255,u/=255,u-=.5,u*=a,u+=.5,u*=255,d/=255,d-=.5,d*=a,d+=.5,d*=255,l=l<0?0:l>255?255:l,u=u<0?0:u>255?255:u,d=d<0?0:d>255?255:d,i[f]=l,i[f+1]=u,i[f+2]=d};return Yx.Contrast=n,e.Factory.addGetterSetter(t.Node,"contrast",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),Yx}var Xx={},Gj;function Sne(){if(Gj)return Xx;Gj=1,Object.defineProperty(Xx,"__esModule",{value:!0}),Xx.Emboss=void 0;const e=Cn(),t=Aa(),r=ga(),n=Nn(),s=function(a){const i=this.embossStrength()*10,o=this.embossWhiteLevel()*255,l=this.embossDirection(),u=this.embossBlend(),d=a.data,f=a.width,h=a.height,g=f*4;let x=0,y=0,v=h;switch(l){case"top-left":x=-1,y=-1;break;case"top":x=-1,y=0;break;case"top-right":x=-1,y=1;break;case"right":x=0,y=1;break;case"bottom-right":x=1,y=1;break;case"bottom":x=1,y=0;break;case"bottom-left":x=1,y=-1;break;case"left":x=0,y=-1;break;default:r.Util.error("Unknown emboss direction: "+l)}do{const T=(v-1)*g;let k=x;v+k<1&&(k=0),v+k>h&&(k=0);const b=(v-1+k)*f*4;let N=f;do{const E=T+(N-1)*4;let P=y;N+P<1&&(P=0),N+P>f&&(P=0);const M=b+(N-1+P)*4,j=d[E]-d[M],A=d[E+1]-d[M+1],O=d[E+2]-d[M+2];let L=j;const q=L>0?L:-L,Q=A>0?A:-A,ae=O>0?O:-O;if(Q>q&&(L=A),ae>q&&(L=O),L*=i,u){const te=d[E]+L,ne=d[E+1]+L,B=d[E+2]+L;d[E]=te>255?255:te<0?0:te,d[E+1]=ne>255?255:ne<0?0:ne,d[E+2]=B>255?255:B<0?0:B}else{let te=o-L;te<0?te=0:te>255&&(te=255),d[E]=d[E+1]=d[E+2]=te}}while(--N)}while(--v)};return Xx.Emboss=s,e.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,e.Factory.afterSetFilter),Xx}var Jx={},Vj;function kne(){if(Vj)return Jx;Vj=1,Object.defineProperty(Jx,"__esModule",{value:!0}),Jx.Enhance=void 0;const e=Cn(),t=Aa(),r=Nn();function n(a,i,o,l,u){const d=o-i,f=u-l;if(d===0)return l+f/2;if(f===0)return l;let h=(a-i)/d;return h=f*h+l,h}const s=function(a){const i=a.data,o=i.length;let l=i[0],u=l,d,f=i[1],h=f,g,x=i[2],y=x,v;const T=this.enhance();if(T===0)return;for(let j=0;j<o;j+=4)d=i[j+0],d<l?l=d:d>u&&(u=d),g=i[j+1],g<f?f=g:g>h&&(h=g),v=i[j+2],v<x?x=v:v>y&&(y=v);u===l&&(u=255,l=0),h===f&&(h=255,f=0),y===x&&(y=255,x=0);let k,b,N,E,P,M;if(T>0)k=u+T*(255-u),b=l-T*(l-0),N=h+T*(255-h),E=f-T*(f-0),P=y+T*(255-y),M=x-T*(x-0);else{const j=(u+l)*.5;k=u+T*(u-j),b=l+T*(l-j);const A=(h+f)*.5;N=h+T*(h-A),E=f+T*(f-A);const O=(y+x)*.5;P=y+T*(y-O),M=x+T*(x-O)}for(let j=0;j<o;j+=4)i[j+0]=n(i[j+0],l,u,b,k),i[j+1]=n(i[j+1],f,h,E,N),i[j+2]=n(i[j+2],x,y,M,P)};return Jx.Enhance=s,e.Factory.addGetterSetter(t.Node,"enhance",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),Jx}var Qx={},qj;function Tne(){if(qj)return Qx;qj=1,Object.defineProperty(Qx,"__esModule",{value:!0}),Qx.Grayscale=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4){const a=.34*r[s]+.5*r[s+1]+.16*r[s+2];r[s]=a,r[s+1]=a,r[s+2]=a}};return Qx.Grayscale=e,Qx}var Zx={},Kj;function Cne(){if(Kj)return Zx;Kj=1,Object.defineProperty(Zx,"__esModule",{value:!0}),Zx.HSL=void 0;const e=Cn(),t=Aa(),r=Nn();e.Factory.addGetterSetter(t.Node,"hue",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"luminance",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter);const n=function(s){const a=s.data,i=a.length,o=1,l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=this.luminance()*127,f=o*l*Math.cos(u*Math.PI/180),h=o*l*Math.sin(u*Math.PI/180),g=.299*o+.701*f+.167*h,x=.587*o-.587*f+.33*h,y=.114*o-.114*f-.497*h,v=.299*o-.299*f-.328*h,T=.587*o+.413*f+.035*h,k=.114*o-.114*f+.293*h,b=.299*o-.3*f+1.25*h,N=.587*o-.586*f-1.05*h,E=.114*o+.886*f-.2*h;let P,M,j,A;for(let O=0;O<i;O+=4)P=a[O+0],M=a[O+1],j=a[O+2],A=a[O+3],a[O+0]=g*P+x*M+y*j+d,a[O+1]=v*P+T*M+k*j+d,a[O+2]=b*P+N*M+E*j+d,a[O+3]=A};return Zx.HSL=n,Zx}var ey={},Yj;function Ene(){if(Yj)return ey;Yj=1,Object.defineProperty(ey,"__esModule",{value:!0}),ey.HSV=void 0;const e=Cn(),t=Aa(),r=Nn(),n=function(s){const a=s.data,i=a.length,o=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=o*l*Math.cos(u*Math.PI/180),f=o*l*Math.sin(u*Math.PI/180),h=.299*o+.701*d+.167*f,g=.587*o-.587*d+.33*f,x=.114*o-.114*d-.497*f,y=.299*o-.299*d-.328*f,v=.587*o+.413*d+.035*f,T=.114*o-.114*d+.293*f,k=.299*o-.3*d+1.25*f,b=.587*o-.586*d-1.05*f,N=.114*o+.886*d-.2*f;for(let E=0;E<i;E+=4){const P=a[E+0],M=a[E+1],j=a[E+2],A=a[E+3];a[E+0]=h*P+g*M+x*j,a[E+1]=y*P+v*M+T*j,a[E+2]=k*P+b*M+N*j,a[E+3]=A}};return ey.HSV=n,e.Factory.addGetterSetter(t.Node,"hue",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"value",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),ey}var ty={},Xj;function Nne(){if(Xj)return ty;Xj=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.Invert=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4)r[s]=255-r[s],r[s+1]=255-r[s+1],r[s+2]=255-r[s+2]};return ty.Invert=e,ty}var ry={},Jj;function Ane(){if(Jj)return ry;Jj=1,Object.defineProperty(ry,"__esModule",{value:!0}),ry.Kaleidoscope=void 0;const e=Cn(),t=Aa(),r=ga(),n=Nn(),s=function(o,l,u){const d=o.data,f=l.data,h=o.width,g=o.height,x=u.polarCenterX||h/2,y=u.polarCenterY||g/2;let v=Math.sqrt(x*x+y*y),T=h-x,k=g-y;const b=Math.sqrt(T*T+k*k);v=b>v?b:v;const N=g,E=h,P=360/E*Math.PI/180;for(let M=0;M<E;M+=1){const j=Math.sin(M*P),A=Math.cos(M*P);for(let O=0;O<N;O+=1){T=Math.floor(x+v*O/N*A),k=Math.floor(y+v*O/N*j);let L=(k*h+T)*4;const q=d[L+0],Q=d[L+1],ae=d[L+2],te=d[L+3];L=(M+O*h)*4,f[L+0]=q,f[L+1]=Q,f[L+2]=ae,f[L+3]=te}}},a=function(o,l,u){const d=o.data,f=l.data,h=o.width,g=o.height,x=u.polarCenterX||h/2,y=u.polarCenterY||g/2;let v=Math.sqrt(x*x+y*y),T=h-x,k=g-y;const b=Math.sqrt(T*T+k*k);v=b>v?b:v;const N=g,E=h,P=0;let M,j;for(T=0;T<h;T+=1)for(k=0;k<g;k+=1){const A=T-x,O=k-y,L=Math.sqrt(A*A+O*O)*N/v;let q=(Math.atan2(O,A)*180/Math.PI+360+P)%360;q=q*E/360,M=Math.floor(q),j=Math.floor(L);let Q=(j*h+M)*4;const ae=d[Q+0],te=d[Q+1],ne=d[Q+2],B=d[Q+3];Q=(k*h+T)*4,f[Q+0]=ae,f[Q+1]=te,f[Q+2]=ne,f[Q+3]=B}},i=function(o){const l=o.width,u=o.height;let d,f,h,g,x,y,v,T,k,b,N=Math.round(this.kaleidoscopePower());const E=Math.round(this.kaleidoscopeAngle()),P=Math.floor(l*(E%360)/360);if(N<1)return;const M=r.Util.createCanvasElement();M.width=l,M.height=u;const j=M.getContext("2d").getImageData(0,0,l,u);r.Util.releaseCanvas(M),s(o,j,{polarCenterX:l/2,polarCenterY:u/2});let A=l/Math.pow(2,N);for(;A<=8;)A=A*2,N-=1;A=Math.ceil(A);let O=A,L=0,q=O,Q=1;for(P+A>l&&(L=O,q=0,Q=-1),f=0;f<u;f+=1)for(d=L;d!==q;d+=Q)h=Math.round(d+P)%l,k=(l*f+h)*4,x=j.data[k+0],y=j.data[k+1],v=j.data[k+2],T=j.data[k+3],b=(l*f+d)*4,j.data[b+0]=x,j.data[b+1]=y,j.data[b+2]=v,j.data[b+3]=T;for(f=0;f<u;f+=1)for(O=Math.floor(A),g=0;g<N;g+=1){for(d=0;d<O+1;d+=1)k=(l*f+d)*4,x=j.data[k+0],y=j.data[k+1],v=j.data[k+2],T=j.data[k+3],b=(l*f+O*2-d-1)*4,j.data[b+0]=x,j.data[b+1]=y,j.data[b+2]=v,j.data[b+3]=T;O*=2}a(j,o,{})};return ry.Kaleidoscope=i,e.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),ry}var ny={},Qj;function jne(){if(Qj)return ny;Qj=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.Mask=void 0;const e=Cn(),t=Aa(),r=Nn();function n(h,g,x){let y=(x*h.width+g)*4;const v=[];return v.push(h.data[y++],h.data[y++],h.data[y++],h.data[y++]),v}function s(h,g){return Math.sqrt(Math.pow(h[0]-g[0],2)+Math.pow(h[1]-g[1],2)+Math.pow(h[2]-g[2],2))}function a(h){const g=[0,0,0];for(let x=0;x<h.length;x++)g[0]+=h[x][0],g[1]+=h[x][1],g[2]+=h[x][2];return g[0]/=h.length,g[1]/=h.length,g[2]/=h.length,g}function i(h,g){const x=n(h,0,0),y=n(h,h.width-1,0),v=n(h,0,h.height-1),T=n(h,h.width-1,h.height-1),k=g||10;if(s(x,y)<k&&s(y,T)<k&&s(T,v)<k&&s(v,x)<k){const b=a([y,x,T,v]),N=[];for(let E=0;E<h.width*h.height;E++){const P=s(b,[h.data[E*4],h.data[E*4+1],h.data[E*4+2]]);N[E]=P<k?0:255}return N}}function o(h,g){for(let x=0;x<h.width*h.height;x++)h.data[4*x+3]=g[x]}function l(h,g,x){const y=[1,1,1,1,0,1,1,1,1],v=Math.round(Math.sqrt(y.length)),T=Math.floor(v/2),k=[];for(let b=0;b<x;b++)for(let N=0;N<g;N++){const E=b*g+N;let P=0;for(let M=0;M<v;M++)for(let j=0;j<v;j++){const A=b+M-T,O=N+j-T;if(A>=0&&A<x&&O>=0&&O<g){const L=A*g+O,q=y[M*v+j];P+=h[L]*q}}k[E]=P===2040?255:0}return k}function u(h,g,x){const y=[1,1,1,1,1,1,1,1,1],v=Math.round(Math.sqrt(y.length)),T=Math.floor(v/2),k=[];for(let b=0;b<x;b++)for(let N=0;N<g;N++){const E=b*g+N;let P=0;for(let M=0;M<v;M++)for(let j=0;j<v;j++){const A=b+M-T,O=N+j-T;if(A>=0&&A<x&&O>=0&&O<g){const L=A*g+O,q=y[M*v+j];P+=h[L]*q}}k[E]=P>=1020?255:0}return k}function d(h,g,x){const y=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],v=Math.round(Math.sqrt(y.length)),T=Math.floor(v/2),k=[];for(let b=0;b<x;b++)for(let N=0;N<g;N++){const E=b*g+N;let P=0;for(let M=0;M<v;M++)for(let j=0;j<v;j++){const A=b+M-T,O=N+j-T;if(A>=0&&A<x&&O>=0&&O<g){const L=A*g+O,q=y[M*v+j];P+=h[L]*q}}k[E]=P}return k}const f=function(h){const g=this.threshold();let x=i(h,g);return x&&(x=l(x,h.width,h.height),x=u(x,h.width,h.height),x=d(x,h.width,h.height),o(h,x)),h};return ny.Mask=f,e.Factory.addGetterSetter(t.Node,"threshold",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),ny}var sy={},Zj;function Pne(){if(Zj)return sy;Zj=1,Object.defineProperty(sy,"__esModule",{value:!0}),sy.Noise=void 0;const e=Cn(),t=Aa(),r=Nn(),n=function(s){const a=this.noise()*255,i=s.data,o=i.length,l=a/2;for(let u=0;u<o;u+=4)i[u+0]+=l-2*l*Math.random(),i[u+1]+=l-2*l*Math.random(),i[u+2]+=l-2*l*Math.random()};return sy.Noise=n,e.Factory.addGetterSetter(t.Node,"noise",.2,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),sy}var ay={},eP;function Mne(){if(eP)return ay;eP=1,Object.defineProperty(ay,"__esModule",{value:!0}),ay.Pixelate=void 0;const e=Cn(),t=ga(),r=Aa(),n=Nn(),s=function(a){let i=Math.ceil(this.pixelSize()),o=a.width,l=a.height,u=Math.ceil(o/i),d=Math.ceil(l/i),f=a.data;if(i<=0){t.Util.error("pixelSize value can not be <= 0");return}for(let h=0;h<u;h+=1)for(let g=0;g<d;g+=1){let x=0,y=0,v=0,T=0;const k=h*i,b=k+i,N=g*i,E=N+i;let P=0;for(let M=k;M<b;M+=1)if(!(M>=o))for(let j=N;j<E;j+=1){if(j>=l)continue;const A=(o*j+M)*4;x+=f[A+0],y+=f[A+1],v+=f[A+2],T+=f[A+3],P+=1}x=x/P,y=y/P,v=v/P,T=T/P;for(let M=k;M<b;M+=1)if(!(M>=o))for(let j=N;j<E;j+=1){if(j>=l)continue;const A=(o*j+M)*4;f[A+0]=x,f[A+1]=y,f[A+2]=v,f[A+3]=T}}};return ay.Pixelate=s,e.Factory.addGetterSetter(r.Node,"pixelSize",8,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),ay}var iy={},tP;function Fne(){if(tP)return iy;tP=1,Object.defineProperty(iy,"__esModule",{value:!0}),iy.Posterize=void 0;const e=Cn(),t=Aa(),r=Nn(),n=function(s){const a=Math.round(this.levels()*254)+1,i=s.data,o=i.length,l=255/a;for(let u=0;u<o;u+=1)i[u]=Math.floor(i[u]/l)*l};return iy.Posterize=n,e.Factory.addGetterSetter(t.Node,"levels",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),iy}var oy={},rP;function Dne(){if(rP)return oy;rP=1,Object.defineProperty(oy,"__esModule",{value:!0}),oy.RGB=void 0;const e=Cn(),t=Aa(),r=Nn(),n=function(s){const a=s.data,i=a.length,o=this.red(),l=this.green(),u=this.blue();for(let d=0;d<i;d+=4){const f=(.34*a[d]+.5*a[d+1]+.16*a[d+2])/255;a[d]=f*o,a[d+1]=f*l,a[d+2]=f*u,a[d+3]=a[d+3]}};return oy.RGB=n,e.Factory.addGetterSetter(t.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"blue",0,r.RGBComponent,e.Factory.afterSetFilter),oy}var ly={},nP;function One(){if(nP)return ly;nP=1,Object.defineProperty(ly,"__esModule",{value:!0}),ly.RGBA=void 0;const e=Cn(),t=Aa(),r=Nn(),n=function(s){const a=s.data,i=a.length,o=this.red(),l=this.green(),u=this.blue(),d=this.alpha();for(let f=0;f<i;f+=4){const h=1-d;a[f]=o*d+a[f]*h,a[f+1]=l*d+a[f+1]*h,a[f+2]=u*d+a[f+2]*h}};return ly.RGBA=n,e.Factory.addGetterSetter(t.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"blue",0,r.RGBComponent,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"alpha",1,function(s){return this._filterUpToDate=!1,s>1?1:s<0?0:s}),ly}var cy={},sP;function Ine(){if(sP)return cy;sP=1,Object.defineProperty(cy,"__esModule",{value:!0}),cy.Sepia=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4){const a=r[s+0],i=r[s+1],o=r[s+2];r[s+0]=Math.min(255,a*.393+i*.769+o*.189),r[s+1]=Math.min(255,a*.349+i*.686+o*.168),r[s+2]=Math.min(255,a*.272+i*.534+o*.131)}};return cy.Sepia=e,cy}var uy={},aP;function Rne(){if(aP)return uy;aP=1,Object.defineProperty(uy,"__esModule",{value:!0}),uy.Solarize=void 0;const e=function(t){const r=t.data,n=t.width,s=t.height,a=n*4;let i=s;do{const o=(i-1)*a;let l=n;do{const u=o+(l-1)*4;let d=r[u],f=r[u+1],h=r[u+2];d>127&&(d=255-d),f>127&&(f=255-f),h>127&&(h=255-h),r[u]=d,r[u+1]=f,r[u+2]=h}while(--l)}while(--i)};return uy.Solarize=e,uy}var dy={},iP;function Lne(){if(iP)return dy;iP=1,Object.defineProperty(dy,"__esModule",{value:!0}),dy.Threshold=void 0;const e=Cn(),t=Aa(),r=Nn(),n=function(s){const a=this.threshold()*255,i=s.data,o=i.length;for(let l=0;l<o;l+=1)i[l]=i[l]<a?0:255};return dy.Threshold=n,e.Factory.addGetterSetter(t.Node,"threshold",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),dy}var oP;function Bne(){if(oP)return Tx;oP=1,Object.defineProperty(Tx,"__esModule",{value:!0}),Tx.Konva=void 0;const e=qk(),t=ine(),r=lne(),n=cne(),s=une(),a=dne(),i=fne(),o=H$(),l=ET(),u=G$(),d=hne(),f=mne(),h=gne(),g=pne(),x=V$(),y=xne(),v=yne(),T=vne(),k=wne(),b=bne(),N=_ne(),E=Sne(),P=kne(),M=Tne(),j=Cne(),A=Ene(),O=Nne(),L=Ane(),q=jne(),Q=Pne(),ae=Mne(),te=Fne(),ne=Dne(),B=One(),V=Ine(),R=Rne(),H=Lne();return Tx.Konva=e.Konva.Util._assign(e.Konva,{Arc:t.Arc,Arrow:r.Arrow,Circle:n.Circle,Ellipse:s.Ellipse,Image:a.Image,Label:i.Label,Tag:i.Tag,Line:o.Line,Path:l.Path,Rect:u.Rect,RegularPolygon:d.RegularPolygon,Ring:f.Ring,Sprite:h.Sprite,Star:g.Star,Text:x.Text,TextPath:y.TextPath,Transformer:v.Transformer,Wedge:T.Wedge,Filters:{Blur:k.Blur,Brighten:b.Brighten,Contrast:N.Contrast,Emboss:E.Emboss,Enhance:P.Enhance,Grayscale:M.Grayscale,HSL:j.HSL,HSV:A.HSV,Invert:O.Invert,Kaleidoscope:L.Kaleidoscope,Mask:q.Mask,Noise:Q.Noise,Pixelate:ae.Pixelate,Posterize:te.Posterize,RGB:ne.RGB,RGBA:B.RGBA,Sepia:V.Sepia,Solarize:R.Solarize,Threshold:H.Threshold}}),Tx}var $ne=$b.exports,lP;function zne(){if(lP)return $b.exports;lP=1,Object.defineProperty($ne,"__esModule",{value:!0});const e=Bne();return $b.exports=e.Konva,$b.exports}var q$=zne();const Une=Tc(q$),Wne=HL({__proto__:null,default:Une},[q$]);var Uw={exports:{}},cP;function Hne(){return cP||(cP=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var r=qk();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return r.Konva}});const n=qk();e.exports=n.Konva})(Uw,Uw.exports)),Uw.exports}var Gne=Hne();const hv=Tc(Gne);var K5={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y5,uP;function Vne(){return uP||(uP=1,Y5=function(t){var r={},n=$m(),s=B7(),a=Object.assign;function i(w){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+w,F=1;F<arguments.length;F++)_+="&args[]="+encodeURIComponent(arguments[F]);return"Minified React error #"+w+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),x=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),N=Symbol.for("react.offscreen"),E=Symbol.iterator;function P(w){return w===null||typeof w!="object"?null:(w=E&&w[E]||w["@@iterator"],typeof w=="function"?w:null)}function M(w){if(w==null)return null;if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w;switch(w){case d:return"Fragment";case u:return"Portal";case h:return"Profiler";case f:return"StrictMode";case v:return"Suspense";case T:return"SuspenseList"}if(typeof w=="object")switch(w.$$typeof){case x:return(w.displayName||"Context")+".Consumer";case g:return(w._context.displayName||"Context")+".Provider";case y:var _=w.render;return w=w.displayName,w||(w=_.displayName||_.name||"",w=w!==""?"ForwardRef("+w+")":"ForwardRef"),w;case k:return _=w.displayName||null,_!==null?_:M(w.type)||"Memo";case b:_=w._payload,w=w._init;try{return M(w(_))}catch{}}return null}function j(w){var _=w.type;switch(w.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return w=_.render,w=w.displayName||w.name||"",_.displayName||(w!==""?"ForwardRef("+w+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(_);case 8:return _===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function A(w){var _=w,F=w;if(w.alternate)for(;_.return;)_=_.return;else{w=_;do _=w,(_.flags&4098)!==0&&(F=_.return),w=_.return;while(w)}return _.tag===3?F:null}function O(w){if(A(w)!==w)throw Error(i(188))}function L(w){var _=w.alternate;if(!_){if(_=A(w),_===null)throw Error(i(188));return _!==w?null:w}for(var F=w,z=_;;){var Y=F.return;if(Y===null)break;var se=Y.alternate;if(se===null){if(z=Y.return,z!==null){F=z;continue}break}if(Y.child===se.child){for(se=Y.child;se;){if(se===F)return O(Y),w;if(se===z)return O(Y),_;se=se.sibling}throw Error(i(188))}if(F.return!==z.return)F=Y,z=se;else{for(var Se=!1,et=Y.child;et;){if(et===F){Se=!0,F=Y,z=se;break}if(et===z){Se=!0,z=Y,F=se;break}et=et.sibling}if(!Se){for(et=se.child;et;){if(et===F){Se=!0,F=se,z=Y;break}if(et===z){Se=!0,z=se,F=Y;break}et=et.sibling}if(!Se)throw Error(i(189))}}if(F.alternate!==z)throw Error(i(190))}if(F.tag!==3)throw Error(i(188));return F.stateNode.current===F?w:_}function q(w){return w=L(w),w!==null?Q(w):null}function Q(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){var _=Q(w);if(_!==null)return _;w=w.sibling}return null}function ae(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){if(w.tag!==4){var _=ae(w);if(_!==null)return _}w=w.sibling}return null}var te=Array.isArray,ne=t.getPublicInstance,B=t.getRootHostContext,V=t.getChildHostContext,R=t.prepareForCommit,H=t.resetAfterCommit,U=t.createInstance,I=t.appendInitialChild,W=t.finalizeInitialChildren,K=t.prepareUpdate,Z=t.shouldSetTextContent,oe=t.createTextInstance,J=t.scheduleTimeout,le=t.cancelTimeout,ue=t.noTimeout,de=t.isPrimaryRenderer,Te=t.supportsMutation,ie=t.supportsPersistence,xe=t.supportsHydration,Ae=t.getInstanceFromNode,Me=t.preparePortalMount,Je=t.getCurrentEventPriority,He=t.detachDeletedInstance,It=t.supportsMicrotasks,it=t.scheduleMicrotask,kt=t.supportsTestSelectors,pt=t.findFiberRoot,ut=t.getBoundingRect,_t=t.getTextContent,qt=t.isHiddenSubtree,Jt=t.matchAccessibilityRole,Ht=t.setFocusIfFocusable,$e=t.setupIntersectionObserver,ze=t.appendChild,tt=t.appendChildToContainer,ot=t.commitTextUpdate,nt=t.commitMount,Dt=t.commitUpdate,Rt=t.insertBefore,Qt=t.insertInContainerBefore,wr=t.removeChild,kr=t.removeChildFromContainer,zr=t.resetTextContent,Tr=t.hideInstance,gr=t.hideTextInstance,ve=t.unhideInstance,Fe=t.unhideTextInstance,Le=t.clearContainer,Ue=t.cloneInstance,Pt=t.createContainerChildSet,Ie=t.appendChildToContainerChildSet,Ye=t.finalizeContainerChildren,Ne=t.replaceContainerChildren,Ve=t.cloneHiddenInstance,Ge=t.cloneHiddenTextInstance,Ot=t.canHydrateInstance,Ut=t.canHydrateTextInstance,ar=t.canHydrateSuspenseInstance,Dr=t.isSuspenseInstancePending,br=t.isSuspenseInstanceFallback,Kr=t.getSuspenseInstanceFallbackErrorDetails,he=t.registerSuspenseInstanceRetry,Ce=t.getNextHydratableSibling,be=t.getFirstHydratableChild,pe=t.getFirstHydratableChildWithinContainer,ke=t.getFirstHydratableChildWithinSuspenseInstance,Ee=t.hydrateInstance,Qe=t.hydrateTextInstance,xt=t.hydrateSuspenseInstance,rt=t.getNextHydratableInstanceAfterSuspenseInstance,ce=t.commitHydratedContainer,me=t.commitHydratedSuspenseInstance,je=t.clearSuspenseBoundary,Pe=t.clearSuspenseBoundaryFromContainer,Ze=t.shouldDeleteUnhydratedTailInstances,gt=t.didNotMatchHydratedContainerTextInstance,Tt=t.didNotMatchHydratedTextInstance,ir;function Ct(w){if(ir===void 0)try{throw Error()}catch(F){var _=F.stack.trim().match(/\n( *(at )?)/);ir=_&&_[1]||""}return`
`+ir+w}var or=!1;function Or(w,_){if(!w||or)return"";or=!0;var F=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(sr){var z=sr}Reflect.construct(w,[],_)}else{try{_.call()}catch(sr){z=sr}w.call(_.prototype)}else{try{throw Error()}catch(sr){z=sr}w()}}catch(sr){if(sr&&z&&typeof sr.stack=="string"){for(var Y=sr.stack.split(`
`),se=z.stack.split(`
`),Se=Y.length-1,et=se.length-1;1<=Se&&0<=et&&Y[Se]!==se[et];)et--;for(;1<=Se&&0<=et;Se--,et--)if(Y[Se]!==se[et]){if(Se!==1||et!==1)do if(Se--,et--,0>et||Y[Se]!==se[et]){var St=`
`+Y[Se].replace(" at new "," at ");return w.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",w.displayName)),St}while(1<=Se&&0<=et);break}}}finally{or=!1,Error.prepareStackTrace=F}return(w=w?w.displayName||w.name:"")?Ct(w):""}var Lr=Object.prototype.hasOwnProperty,Pr=[],un=-1;function An(w){return{current:w}}function mn(w){0>un||(w.current=Pr[un],Pr[un]=null,un--)}function _r(w,_){un++,Pr[un]=w.current,w.current=_}var Pa={},Mn=An(Pa),ds=An(!1),Yn=Pa;function pa(w,_){var F=w.type.contextTypes;if(!F)return Pa;var z=w.stateNode;if(z&&z.__reactInternalMemoizedUnmaskedChildContext===_)return z.__reactInternalMemoizedMaskedChildContext;var Y={},se;for(se in F)Y[se]=_[se];return z&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=_,w.__reactInternalMemoizedMaskedChildContext=Y),Y}function Hn(w){return w=w.childContextTypes,w!=null}function _e(){mn(ds),mn(Mn)}function Nt(w,_,F){if(Mn.current!==Pa)throw Error(i(168));_r(Mn,_),_r(ds,F)}function Ur(w,_,F){var z=w.stateNode;if(_=_.childContextTypes,typeof z.getChildContext!="function")return F;z=z.getChildContext();for(var Y in z)if(!(Y in _))throw Error(i(108,j(w)||"Unknown",Y));return a({},F,z)}function Yr(w){return w=(w=w.stateNode)&&w.__reactInternalMemoizedMergedChildContext||Pa,Yn=Mn.current,_r(Mn,w),_r(ds,ds.current),!0}function fs(w,_,F){var z=w.stateNode;if(!z)throw Error(i(169));F?(w=Ur(w,_,Yn),z.__reactInternalMemoizedMergedChildContext=w,mn(ds),mn(Mn),_r(Mn,w)):mn(ds),_r(ds,F)}var jn=Math.clz32?Math.clz32:Gt,Be=Math.log,wt=Math.LN2;function Gt(w){return w>>>=0,w===0?32:31-(Be(w)/wt|0)|0}var Bt=64,Ln=4194304;function ct(w){switch(w&-w){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return w&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return w}}function yt(w,_){var F=w.pendingLanes;if(F===0)return 0;var z=0,Y=w.suspendedLanes,se=w.pingedLanes,Se=F&268435455;if(Se!==0){var et=Se&~Y;et!==0?z=ct(et):(se&=Se,se!==0&&(z=ct(se)))}else Se=F&~Y,Se!==0?z=ct(Se):se!==0&&(z=ct(se));if(z===0)return 0;if(_!==0&&_!==z&&(_&Y)===0&&(Y=z&-z,se=_&-_,Y>=se||Y===16&&(se&4194240)!==0))return _;if((z&4)!==0&&(z|=F&16),_=w.entangledLanes,_!==0)for(w=w.entanglements,_&=z;0<_;)F=31-jn(_),Y=1<<F,z|=w[F],_&=~Y;return z}function nr(w,_){switch(w){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function At(w,_){for(var F=w.suspendedLanes,z=w.pingedLanes,Y=w.expirationTimes,se=w.pendingLanes;0<se;){var Se=31-jn(se),et=1<<Se,St=Y[Se];St===-1?((et&F)===0||(et&z)!==0)&&(Y[Se]=nr(et,_)):St<=_&&(w.expiredLanes|=et),se&=~et}}function Rr(w){return w=w.pendingLanes&-1073741825,w!==0?w:w&1073741824?1073741824:0}function Lt(){var w=Bt;return Bt<<=1,(Bt&4194240)===0&&(Bt=64),w}function cn(w){for(var _=[],F=0;31>F;F++)_.push(w);return _}function bn(w,_,F){w.pendingLanes|=_,_!==536870912&&(w.suspendedLanes=0,w.pingedLanes=0),w=w.eventTimes,_=31-jn(_),w[_]=F}function st(w,_){var F=w.pendingLanes&~_;w.pendingLanes=_,w.suspendedLanes=0,w.pingedLanes=0,w.expiredLanes&=_,w.mutableReadLanes&=_,w.entangledLanes&=_,_=w.entanglements;var z=w.eventTimes;for(w=w.expirationTimes;0<F;){var Y=31-jn(F),se=1<<Y;_[Y]=0,z[Y]=-1,w[Y]=-1,F&=~se}}function cr(w,_){var F=w.entangledLanes|=_;for(w=w.entanglements;F;){var z=31-jn(F),Y=1<<z;Y&_|w[z]&_&&(w[z]|=_),F&=~Y}}var zt=0;function Gn(w){return w&=-w,1<w?4<w?(w&268435455)!==0?16:536870912:4:1}var sn=s.unstable_scheduleCallback,dn=s.unstable_cancelCallback,ys=s.unstable_shouldYield,kn=s.unstable_requestPaint,vs=s.unstable_now,Ei=s.unstable_ImmediatePriority,cu=s.unstable_UserBlockingPriority,rg=s.unstable_NormalPriority,U3=s.unstable_IdlePriority,uu=null,Zi=null;function C0(w){if(Zi&&typeof Zi.onCommitFiberRoot=="function")try{Zi.onCommitFiberRoot(uu,w,void 0,(w.current.flags&128)===128)}catch{}}function ng(w,_){return w===_&&(w!==0||1/w===1/_)||w!==w&&_!==_}var gl=typeof Object.is=="function"?Object.is:ng,jc=null,E0=!1,N0=!1;function sg(w){jc===null?jc=[w]:jc.push(w)}function z2(w){E0=!0,sg(w)}function Va(){if(!N0&&jc!==null){N0=!0;var w=0,_=zt;try{var F=jc;for(zt=1;w<F.length;w++){var z=F[w];do z=z(!0);while(z!==null)}jc=null,E0=!1}catch(Y){throw jc!==null&&(jc=jc.slice(w+1)),sn(Ei,Va),Y}finally{zt=_,N0=!1}}return null}var du=[],Pc=0,ah=null,ad=0,Ni=[],bo=0,xa=null,eo=1,pl="";function xl(w,_){du[Pc++]=ad,du[Pc++]=ah,ah=w,ad=_}function U2(w,_,F){Ni[bo++]=eo,Ni[bo++]=pl,Ni[bo++]=xa,xa=w;var z=eo;w=pl;var Y=32-jn(z)-1;z&=~(1<<Y),F+=1;var se=32-jn(_)+Y;if(30<se){var Se=Y-Y%5;se=(z&(1<<Se)-1).toString(32),z>>=Se,Y-=Se,eo=1<<32-jn(_)+Y|F<<Y|z,pl=se+w}else eo=1<<se|F<<Y|z,pl=w}function ih(w){w.return!==null&&(xl(w,1),U2(w,1,0))}function oh(w){for(;w===ah;)ah=du[--Pc],du[Pc]=null,ad=du[--Pc],du[Pc]=null;for(;w===xa;)xa=Ni[--bo],Ni[bo]=null,pl=Ni[--bo],Ni[bo]=null,eo=Ni[--bo],Ni[bo]=null}var qa=null,Ai=null,hs=!1,lh=!1,yl=null;function W2(w,_){var F=Po(5,null,null,0);F.elementType="DELETED",F.stateNode=_,F.return=w,_=w.deletions,_===null?(w.deletions=[F],w.flags|=16):_.push(F)}function ag(w,_){switch(w.tag){case 5:return _=Ot(_,w.type,w.pendingProps),_!==null?(w.stateNode=_,qa=w,Ai=be(_),!0):!1;case 6:return _=Ut(_,w.pendingProps),_!==null?(w.stateNode=_,qa=w,Ai=null,!0):!1;case 13:if(_=ar(_),_!==null){var F=xa!==null?{id:eo,overflow:pl}:null;return w.memoizedState={dehydrated:_,treeContext:F,retryLane:1073741824},F=Po(18,null,null,0),F.stateNode=_,F.return=w,w.child=F,qa=w,Ai=null,!0}return!1;default:return!1}}function F1(w){return(w.mode&1)!==0&&(w.flags&128)===0}function D1(w){if(hs){var _=Ai;if(_){var F=_;if(!ag(w,_)){if(F1(w))throw Error(i(418));_=Ce(F);var z=qa;_&&ag(w,_)?W2(z,F):(w.flags=w.flags&-4097|2,hs=!1,qa=w)}}else{if(F1(w))throw Error(i(418));w.flags=w.flags&-4097|2,hs=!1,qa=w}}}function H2(w){for(w=w.return;w!==null&&w.tag!==5&&w.tag!==3&&w.tag!==13;)w=w.return;qa=w}function ig(w){if(!xe||w!==qa)return!1;if(!hs)return H2(w),hs=!0,!1;if(w.tag!==3&&(w.tag!==5||Ze(w.type)&&!Z(w.type,w.memoizedProps))){var _=Ai;if(_){if(F1(w))throw G2(),Error(i(418));for(;_;)W2(w,_),_=Ce(_)}}if(H2(w),w.tag===13){if(!xe)throw Error(i(316));if(w=w.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(i(317));Ai=rt(w)}else Ai=qa?Ce(w.stateNode):null;return!0}function G2(){for(var w=Ai;w;)w=Ce(w)}function id(){xe&&(Ai=qa=null,lh=hs=!1)}function O1(w){yl===null?yl=[w]:yl.push(w)}var W3=o.ReactCurrentBatchConfig;function og(w,_){if(gl(w,_))return!0;if(typeof w!="object"||w===null||typeof _!="object"||_===null)return!1;var F=Object.keys(w),z=Object.keys(_);if(F.length!==z.length)return!1;for(z=0;z<F.length;z++){var Y=F[z];if(!Lr.call(_,Y)||!gl(w[Y],_[Y]))return!1}return!0}function H3(w){switch(w.tag){case 5:return Ct(w.type);case 16:return Ct("Lazy");case 13:return Ct("Suspense");case 19:return Ct("SuspenseList");case 0:case 2:case 15:return w=Or(w.type,!1),w;case 11:return w=Or(w.type.render,!1),w;case 1:return w=Or(w.type,!0),w;default:return""}}function od(w,_,F){if(w=F.ref,w!==null&&typeof w!="function"&&typeof w!="object"){if(F._owner){if(F=F._owner,F){if(F.tag!==1)throw Error(i(309));var z=F.stateNode}if(!z)throw Error(i(147,w));var Y=z,se=""+w;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===se?_.ref:(_=function(Se){var et=Y.refs;Se===null?delete et[se]:et[se]=Se},_._stringRef=se,_)}if(typeof w!="string")throw Error(i(284));if(!F._owner)throw Error(i(290,w))}return w}function lg(w,_){throw w=Object.prototype.toString.call(_),Error(i(31,w==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":w))}function V2(w){var _=w._init;return _(w._payload)}function q2(w){function _(vt,at){if(w){var Et=vt.deletions;Et===null?(vt.deletions=[at],vt.flags|=16):Et.push(at)}}function F(vt,at){if(!w)return null;for(;at!==null;)_(vt,at),at=at.sibling;return null}function z(vt,at){for(vt=new Map;at!==null;)at.key!==null?vt.set(at.key,at):vt.set(at.index,at),at=at.sibling;return vt}function Y(vt,at){return vt=Au(vt,at),vt.index=0,vt.sibling=null,vt}function se(vt,at,Et){return vt.index=Et,w?(Et=vt.alternate,Et!==null?(Et=Et.index,Et<at?(vt.flags|=2,at):Et):(vt.flags|=2,at)):(vt.flags|=1048576,at)}function Se(vt){return w&&vt.alternate===null&&(vt.flags|=2),vt}function et(vt,at,Et,yr){return at===null||at.tag!==6?(at=Z0(Et,vt.mode,yr),at.return=vt,at):(at=Y(at,Et),at.return=vt,at)}function St(vt,at,Et,yr){var Br=Et.type;return Br===d?Nr(vt,at,Et.props.children,yr,Et.key):at!==null&&(at.elementType===Br||typeof Br=="object"&&Br!==null&&Br.$$typeof===b&&V2(Br)===at.type)?(yr=Y(at,Et.props),yr.ref=od(vt,at,Et),yr.return=vt,yr):(yr=$g(Et.type,Et.key,Et.props,null,vt.mode,yr),yr.ref=od(vt,at,Et),yr.return=vt,yr)}function sr(vt,at,Et,yr){return at===null||at.tag!==4||at.stateNode.containerInfo!==Et.containerInfo||at.stateNode.implementation!==Et.implementation?(at=zg(Et,vt.mode,yr),at.return=vt,at):(at=Y(at,Et.children||[]),at.return=vt,at)}function Nr(vt,at,Et,yr,Br){return at===null||at.tag!==7?(at=Xa(Et,vt.mode,yr,Br),at.return=vt,at):(at=Y(at,Et),at.return=vt,at)}function an(vt,at,Et){if(typeof at=="string"&&at!==""||typeof at=="number")return at=Z0(""+at,vt.mode,Et),at.return=vt,at;if(typeof at=="object"&&at!==null){switch(at.$$typeof){case l:return Et=$g(at.type,at.key,at.props,null,vt.mode,Et),Et.ref=od(vt,null,at),Et.return=vt,Et;case u:return at=zg(at,vt.mode,Et),at.return=vt,at;case b:var yr=at._init;return an(vt,yr(at._payload),Et)}if(te(at)||P(at))return at=Xa(at,vt.mode,Et,null),at.return=vt,at;lg(vt,at)}return null}function xr(vt,at,Et,yr){var Br=at!==null?at.key:null;if(typeof Et=="string"&&Et!==""||typeof Et=="number")return Br!==null?null:et(vt,at,""+Et,yr);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case l:return Et.key===Br?St(vt,at,Et,yr):null;case u:return Et.key===Br?sr(vt,at,Et,yr):null;case b:return Br=Et._init,xr(vt,at,Br(Et._payload),yr)}if(te(Et)||P(Et))return Br!==null?null:Nr(vt,at,Et,yr,null);lg(vt,Et)}return null}function cs(vt,at,Et,yr,Br){if(typeof yr=="string"&&yr!==""||typeof yr=="number")return vt=vt.get(Et)||null,et(at,vt,""+yr,Br);if(typeof yr=="object"&&yr!==null){switch(yr.$$typeof){case l:return vt=vt.get(yr.key===null?Et:yr.key)||null,St(at,vt,yr,Br);case u:return vt=vt.get(yr.key===null?Et:yr.key)||null,sr(at,vt,yr,Br);case b:var gn=yr._init;return cs(vt,at,Et,gn(yr._payload),Br)}if(te(yr)||P(yr))return vt=vt.get(Et)||null,Nr(at,vt,yr,Br,null);lg(at,yr)}return null}function qn(vt,at,Et,yr){for(var Br=null,gn=null,on=at,En=at=0,_a=null;on!==null&&En<Et.length;En++){on.index>En?(_a=on,on=null):_a=on.sibling;var Tn=xr(vt,on,Et[En],yr);if(Tn===null){on===null&&(on=_a);break}w&&on&&Tn.alternate===null&&_(vt,on),at=se(Tn,at,En),gn===null?Br=Tn:gn.sibling=Tn,gn=Tn,on=_a}if(En===Et.length)return F(vt,on),hs&&xl(vt,En),Br;if(on===null){for(;En<Et.length;En++)on=an(vt,Et[En],yr),on!==null&&(at=se(on,at,En),gn===null?Br=on:gn.sibling=on,gn=on);return hs&&xl(vt,En),Br}for(on=z(vt,on);En<Et.length;En++)_a=cs(on,vt,En,Et[En],yr),_a!==null&&(w&&_a.alternate!==null&&on.delete(_a.key===null?En:_a.key),at=se(_a,at,En),gn===null?Br=_a:gn.sibling=_a,gn=_a);return w&&on.forEach(function(hi){return _(vt,hi)}),hs&&xl(vt,En),Br}function Oi(vt,at,Et,yr){var Br=P(Et);if(typeof Br!="function")throw Error(i(150));if(Et=Br.call(Et),Et==null)throw Error(i(151));for(var gn=Br=null,on=at,En=at=0,_a=null,Tn=Et.next();on!==null&&!Tn.done;En++,Tn=Et.next()){on.index>En?(_a=on,on=null):_a=on.sibling;var hi=xr(vt,on,Tn.value,yr);if(hi===null){on===null&&(on=_a);break}w&&on&&hi.alternate===null&&_(vt,on),at=se(hi,at,En),gn===null?Br=hi:gn.sibling=hi,gn=hi,on=_a}if(Tn.done)return F(vt,on),hs&&xl(vt,En),Br;if(on===null){for(;!Tn.done;En++,Tn=Et.next())Tn=an(vt,Tn.value,yr),Tn!==null&&(at=se(Tn,at,En),gn===null?Br=Tn:gn.sibling=Tn,gn=Tn);return hs&&xl(vt,En),Br}for(on=z(vt,on);!Tn.done;En++,Tn=Et.next())Tn=cs(on,vt,En,Tn.value,yr),Tn!==null&&(w&&Tn.alternate!==null&&on.delete(Tn.key===null?En:Tn.key),at=se(Tn,at,En),gn===null?Br=Tn:gn.sibling=Tn,gn=Tn);return w&&on.forEach(function(Y3){return _(vt,Y3)}),hs&&xl(vt,En),Br}function Xl(vt,at,Et,yr){if(typeof Et=="object"&&Et!==null&&Et.type===d&&Et.key===null&&(Et=Et.props.children),typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case l:e:{for(var Br=Et.key,gn=at;gn!==null;){if(gn.key===Br){if(Br=Et.type,Br===d){if(gn.tag===7){F(vt,gn.sibling),at=Y(gn,Et.props.children),at.return=vt,vt=at;break e}}else if(gn.elementType===Br||typeof Br=="object"&&Br!==null&&Br.$$typeof===b&&V2(Br)===gn.type){F(vt,gn.sibling),at=Y(gn,Et.props),at.ref=od(vt,gn,Et),at.return=vt,vt=at;break e}F(vt,gn);break}else _(vt,gn);gn=gn.sibling}Et.type===d?(at=Xa(Et.props.children,vt.mode,yr,Et.key),at.return=vt,vt=at):(yr=$g(Et.type,Et.key,Et.props,null,vt.mode,yr),yr.ref=od(vt,at,Et),yr.return=vt,vt=yr)}return Se(vt);case u:e:{for(gn=Et.key;at!==null;){if(at.key===gn)if(at.tag===4&&at.stateNode.containerInfo===Et.containerInfo&&at.stateNode.implementation===Et.implementation){F(vt,at.sibling),at=Y(at,Et.children||[]),at.return=vt,vt=at;break e}else{F(vt,at);break}else _(vt,at);at=at.sibling}at=zg(Et,vt.mode,yr),at.return=vt,vt=at}return Se(vt);case b:return gn=Et._init,Xl(vt,at,gn(Et._payload),yr)}if(te(Et))return qn(vt,at,Et,yr);if(P(Et))return Oi(vt,at,Et,yr);lg(vt,Et)}return typeof Et=="string"&&Et!==""||typeof Et=="number"?(Et=""+Et,at!==null&&at.tag===6?(F(vt,at.sibling),at=Y(at,Et),at.return=vt,vt=at):(F(vt,at),at=Z0(Et,vt.mode,yr),at.return=vt,vt=at),Se(vt)):F(vt,at)}return Xl}var ld=q2(!0),K2=q2(!1),cg=An(null),ug=null,A0=null,I1=null;function R1(){I1=A0=ug=null}function Y2(w,_,F){de?(_r(cg,_._currentValue),_._currentValue=F):(_r(cg,_._currentValue2),_._currentValue2=F)}function ch(w){var _=cg.current;mn(cg),de?w._currentValue=_:w._currentValue2=_}function cd(w,_,F){for(;w!==null;){var z=w.alternate;if((w.childLanes&_)!==_?(w.childLanes|=_,z!==null&&(z.childLanes|=_)):z!==null&&(z.childLanes&_)!==_&&(z.childLanes|=_),w===F)break;w=w.return}}function j0(w,_){ug=w,I1=A0=null,w=w.dependencies,w!==null&&w.firstContext!==null&&((w.lanes&_)!==0&&(va=!0),w.firstContext=null)}function _o(w){var _=de?w._currentValue:w._currentValue2;if(I1!==w)if(w={context:w,memoizedValue:_,next:null},A0===null){if(ug===null)throw Error(i(308));A0=w,ug.dependencies={lanes:0,firstContext:w}}else A0=A0.next=w;return _}var fu=null;function dg(w){fu===null?fu=[w]:fu.push(w)}function L1(w,_,F,z){var Y=_.interleaved;return Y===null?(F.next=F,dg(_)):(F.next=Y.next,Y.next=F),_.interleaved=F,vl(w,z)}function vl(w,_){w.lanes|=_;var F=w.alternate;for(F!==null&&(F.lanes|=_),F=w,w=w.return;w!==null;)w.childLanes|=_,F=w.alternate,F!==null&&(F.childLanes|=_),F=w,w=w.return;return F.tag===3?F.stateNode:null}var So=!1;function B1(w){w.updateQueue={baseState:w.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X2(w,_){w=w.updateQueue,_.updateQueue===w&&(_.updateQueue={baseState:w.baseState,firstBaseUpdate:w.firstBaseUpdate,lastBaseUpdate:w.lastBaseUpdate,shared:w.shared,effects:w.effects})}function Mc(w,_){return{eventTime:w,lane:_,tag:0,payload:null,callback:null,next:null}}function Fc(w,_,F){var z=w.updateQueue;if(z===null)return null;if(z=z.shared,(fn&2)!==0){var Y=z.pending;return Y===null?_.next=_:(_.next=Y.next,Y.next=_),z.pending=_,vl(w,F)}return Y=z.interleaved,Y===null?(_.next=_,dg(z)):(_.next=Y.next,Y.next=_),z.interleaved=_,vl(w,F)}function uh(w,_,F){if(_=_.updateQueue,_!==null&&(_=_.shared,(F&4194240)!==0)){var z=_.lanes;z&=w.pendingLanes,F|=z,_.lanes=F,cr(w,F)}}function P0(w,_){var F=w.updateQueue,z=w.alternate;if(z!==null&&(z=z.updateQueue,F===z)){var Y=null,se=null;if(F=F.firstBaseUpdate,F!==null){do{var Se={eventTime:F.eventTime,lane:F.lane,tag:F.tag,payload:F.payload,callback:F.callback,next:null};se===null?Y=se=Se:se=se.next=Se,F=F.next}while(F!==null);se===null?Y=se=_:se=se.next=_}else Y=se=_;F={baseState:z.baseState,firstBaseUpdate:Y,lastBaseUpdate:se,shared:z.shared,effects:z.effects},w.updateQueue=F;return}w=F.lastBaseUpdate,w===null?F.firstBaseUpdate=_:w.next=_,F.lastBaseUpdate=_}function hu(w,_,F,z){var Y=w.updateQueue;So=!1;var se=Y.firstBaseUpdate,Se=Y.lastBaseUpdate,et=Y.shared.pending;if(et!==null){Y.shared.pending=null;var St=et,sr=St.next;St.next=null,Se===null?se=sr:Se.next=sr,Se=St;var Nr=w.alternate;Nr!==null&&(Nr=Nr.updateQueue,et=Nr.lastBaseUpdate,et!==Se&&(et===null?Nr.firstBaseUpdate=sr:et.next=sr,Nr.lastBaseUpdate=St))}if(se!==null){var an=Y.baseState;Se=0,Nr=sr=St=null,et=se;do{var xr=et.lane,cs=et.eventTime;if((z&xr)===xr){Nr!==null&&(Nr=Nr.next={eventTime:cs,lane:0,tag:et.tag,payload:et.payload,callback:et.callback,next:null});e:{var qn=w,Oi=et;switch(xr=_,cs=F,Oi.tag){case 1:if(qn=Oi.payload,typeof qn=="function"){an=qn.call(cs,an,xr);break e}an=qn;break e;case 3:qn.flags=qn.flags&-65537|128;case 0:if(qn=Oi.payload,xr=typeof qn=="function"?qn.call(cs,an,xr):qn,xr==null)break e;an=a({},an,xr);break e;case 2:So=!0}}et.callback!==null&&et.lane!==0&&(w.flags|=64,xr=Y.effects,xr===null?Y.effects=[et]:xr.push(et))}else cs={eventTime:cs,lane:xr,tag:et.tag,payload:et.payload,callback:et.callback,next:null},Nr===null?(sr=Nr=cs,St=an):Nr=Nr.next=cs,Se|=xr;if(et=et.next,et===null){if(et=Y.shared.pending,et===null)break;xr=et,et=xr.next,xr.next=null,Y.lastBaseUpdate=xr,Y.shared.pending=null}}while(!0);if(Nr===null&&(St=an),Y.baseState=St,Y.firstBaseUpdate=sr,Y.lastBaseUpdate=Nr,_=Y.shared.interleaved,_!==null){Y=_;do Se|=Y.lane,Y=Y.next;while(Y!==_)}else se===null&&(Y.shared.lanes=0);Lc|=Se,w.lanes=Se,w.memoizedState=an}}function J2(w,_,F){if(w=_.effects,_.effects=null,w!==null)for(_=0;_<w.length;_++){var z=w[_],Y=z.callback;if(Y!==null){if(z.callback=null,z=F,typeof Y!="function")throw Error(i(191,Y));Y.call(z)}}}var mu={},Vo=An(mu),M0=An(mu),gu=An(mu);function qo(w){if(w===mu)throw Error(i(174));return w}function fg(w,_){_r(gu,_),_r(M0,w),_r(Vo,mu),w=B(_),mn(Vo),_r(Vo,w)}function ud(){mn(Vo),mn(M0),mn(gu)}function $1(w){var _=qo(gu.current),F=qo(Vo.current);_=V(F,w.type,_),F!==_&&(_r(M0,w),_r(Vo,_))}function z1(w){M0.current===w&&(mn(Vo),mn(M0))}var Ts=An(0);function hg(w){for(var _=w;_!==null;){if(_.tag===13){var F=_.memoizedState;if(F!==null&&(F=F.dehydrated,F===null||Dr(F)||br(F)))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if((_.flags&128)!==0)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===w)break;for(;_.sibling===null;){if(_.return===null||_.return===w)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var U1=[];function W1(){for(var w=0;w<U1.length;w++){var _=U1[w];de?_._workInProgressVersionPrimary=null:_._workInProgressVersionSecondary=null}U1.length=0}var to=o.ReactCurrentDispatcher,dd=o.ReactCurrentBatchConfig,pu=0,ws=null,Qs=null,ya=null,F0=!1,dh=!1,fh=0,D0=0;function Ma(){throw Error(i(321))}function fd(w,_){if(_===null)return!1;for(var F=0;F<_.length&&F<w.length;F++)if(!gl(w[F],_[F]))return!1;return!0}function hh(w,_,F,z,Y,se){if(pu=se,ws=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,to.current=w===null||w.memoizedState===null?Z1:ex,w=F(z,Y),dh){se=0;do{if(dh=!1,fh=0,25<=se)throw Error(i(301));se+=1,ya=Qs=null,_.updateQueue=null,to.current=tx,w=F(z,Y)}while(dh)}if(to.current=xd,_=Qs!==null&&Qs.next!==null,pu=0,ya=Qs=ws=null,F0=!1,_)throw Error(i(300));return w}function mg(){var w=fh!==0;return fh=0,w}function ko(){var w={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ya===null?ws.memoizedState=ya=w:ya=ya.next=w,ya}function Ka(){if(Qs===null){var w=ws.alternate;w=w!==null?w.memoizedState:null}else w=Qs.next;var _=ya===null?ws.memoizedState:ya.next;if(_!==null)ya=_,Qs=w;else{if(w===null)throw Error(i(310));Qs=w,w={memoizedState:Qs.memoizedState,baseState:Qs.baseState,baseQueue:Qs.baseQueue,queue:Qs.queue,next:null},ya===null?ws.memoizedState=ya=w:ya=ya.next=w}return ya}function hd(w,_){return typeof _=="function"?_(w):_}function gg(w){var _=Ka(),F=_.queue;if(F===null)throw Error(i(311));F.lastRenderedReducer=w;var z=Qs,Y=z.baseQueue,se=F.pending;if(se!==null){if(Y!==null){var Se=Y.next;Y.next=se.next,se.next=Se}z.baseQueue=Y=se,F.pending=null}if(Y!==null){se=Y.next,z=z.baseState;var et=Se=null,St=null,sr=se;do{var Nr=sr.lane;if((pu&Nr)===Nr)St!==null&&(St=St.next={lane:0,action:sr.action,hasEagerState:sr.hasEagerState,eagerState:sr.eagerState,next:null}),z=sr.hasEagerState?sr.eagerState:w(z,sr.action);else{var an={lane:Nr,action:sr.action,hasEagerState:sr.hasEagerState,eagerState:sr.eagerState,next:null};St===null?(et=St=an,Se=z):St=St.next=an,ws.lanes|=Nr,Lc|=Nr}sr=sr.next}while(sr!==null&&sr!==se);St===null?Se=z:St.next=et,gl(z,_.memoizedState)||(va=!0),_.memoizedState=z,_.baseState=Se,_.baseQueue=St,F.lastRenderedState=z}if(w=F.interleaved,w!==null){Y=w;do se=Y.lane,ws.lanes|=se,Lc|=se,Y=Y.next;while(Y!==w)}else Y===null&&(F.lanes=0);return[_.memoizedState,F.dispatch]}function O0(w){var _=Ka(),F=_.queue;if(F===null)throw Error(i(311));F.lastRenderedReducer=w;var z=F.dispatch,Y=F.pending,se=_.memoizedState;if(Y!==null){F.pending=null;var Se=Y=Y.next;do se=w(se,Se.action),Se=Se.next;while(Se!==Y);gl(se,_.memoizedState)||(va=!0),_.memoizedState=se,_.baseQueue===null&&(_.baseState=se),F.lastRenderedState=se}return[se,z]}function H1(){}function G1(w,_){var F=ws,z=Ka(),Y=_(),se=!gl(z.memoizedState,Y);if(se&&(z.memoizedState=Y,va=!0),z=z.queue,yg(K1.bind(null,F,z,w),[w]),z.getSnapshot!==_||se||ya!==null&&ya.memoizedState.tag&1){if(F.flags|=2048,md(9,q1.bind(null,F,z,Y,_),void 0,null),Zn===null)throw Error(i(349));(pu&30)!==0||V1(F,_,Y)}return Y}function V1(w,_,F){w.flags|=16384,w={getSnapshot:_,value:F},_=ws.updateQueue,_===null?(_={lastEffect:null,stores:null},ws.updateQueue=_,_.stores=[w]):(F=_.stores,F===null?_.stores=[w]:F.push(w))}function q1(w,_,F,z){_.value=F,_.getSnapshot=z,Y1(_)&&Dc(w)}function K1(w,_,F){return F(function(){Y1(_)&&Dc(w)})}function Y1(w){var _=w.getSnapshot;w=w.value;try{var F=_();return!gl(w,F)}catch{return!0}}function Dc(w){var _=vl(w,1);_!==null&&di(_,w,1,-1)}function pg(w){var _=ko();return typeof w=="function"&&(w=w()),_.memoizedState=_.baseState=w,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hd,lastRenderedState:w},_.queue=w,w=w.dispatch=G3.bind(null,ws,w),[_.memoizedState,w]}function md(w,_,F,z){return w={tag:w,create:_,destroy:F,deps:z,next:null},_=ws.updateQueue,_===null?(_={lastEffect:null,stores:null},ws.updateQueue=_,_.lastEffect=w.next=w):(F=_.lastEffect,F===null?_.lastEffect=w.next=w:(z=F.next,F.next=w,w.next=z,_.lastEffect=w)),w}function Q2(){return Ka().memoizedState}function xg(w,_,F,z){var Y=ko();ws.flags|=w,Y.memoizedState=md(1|_,F,void 0,z===void 0?null:z)}function xu(w,_,F,z){var Y=Ka();z=z===void 0?null:z;var se=void 0;if(Qs!==null){var Se=Qs.memoizedState;if(se=Se.destroy,z!==null&&fd(z,Se.deps)){Y.memoizedState=md(_,F,se,z);return}}ws.flags|=w,Y.memoizedState=md(1|_,F,se,z)}function Z2(w,_){return xg(8390656,8,w,_)}function yg(w,_){return xu(2048,8,w,_)}function X1(w,_){return xu(4,2,w,_)}function is(w,_){return xu(4,4,w,_)}function vg(w,_){if(typeof _=="function")return w=w(),_(w),function(){_(null)};if(_!=null)return w=w(),_.current=w,function(){_.current=null}}function mh(w,_,F){return F=F!=null?F.concat([w]):null,xu(4,4,vg.bind(null,_,w),F)}function gd(){}function J1(w,_){var F=Ka();_=_===void 0?null:_;var z=F.memoizedState;return z!==null&&_!==null&&fd(_,z[1])?z[0]:(F.memoizedState=[w,_],w)}function wg(w,_){var F=Ka();_=_===void 0?null:_;var z=F.memoizedState;return z!==null&&_!==null&&fd(_,z[1])?z[0]:(w=w(),F.memoizedState=[w,_],w)}function I0(w,_,F){return(pu&21)===0?(w.baseState&&(w.baseState=!1,va=!0),w.memoizedState=F):(gl(F,_)||(F=Lt(),ws.lanes|=F,Lc|=F,w.baseState=!0),_)}function bg(w,_){var F=zt;zt=F!==0&&4>F?F:4,w(!0);var z=dd.transition;dd.transition={};try{w(!1),_()}finally{zt=F,dd.transition=z}}function pd(){return Ka().memoizedState}function ew(w,_,F){var z=ba(w);if(F={lane:z,action:F,hasEagerState:!1,eagerState:null,next:null},tw(w))Q1(_,F);else if(F=L1(w,_,F,z),F!==null){var Y=ms();di(F,w,z,Y),gh(F,_,z)}}function G3(w,_,F){var z=ba(w),Y={lane:z,action:F,hasEagerState:!1,eagerState:null,next:null};if(tw(w))Q1(_,Y);else{var se=w.alternate;if(w.lanes===0&&(se===null||se.lanes===0)&&(se=_.lastRenderedReducer,se!==null))try{var Se=_.lastRenderedState,et=se(Se,F);if(Y.hasEagerState=!0,Y.eagerState=et,gl(et,Se)){var St=_.interleaved;St===null?(Y.next=Y,dg(_)):(Y.next=St.next,St.next=Y),_.interleaved=Y;return}}catch{}finally{}F=L1(w,_,Y,z),F!==null&&(Y=ms(),di(F,w,z,Y),gh(F,_,z))}}function tw(w){var _=w.alternate;return w===ws||_!==null&&_===ws}function Q1(w,_){dh=F0=!0;var F=w.pending;F===null?_.next=_:(_.next=F.next,F.next=_),w.pending=_}function gh(w,_,F){if((F&4194240)!==0){var z=_.lanes;z&=w.pendingLanes,F|=z,_.lanes=F,cr(w,F)}}var xd={readContext:_o,useCallback:Ma,useContext:Ma,useEffect:Ma,useImperativeHandle:Ma,useInsertionEffect:Ma,useLayoutEffect:Ma,useMemo:Ma,useReducer:Ma,useRef:Ma,useState:Ma,useDebugValue:Ma,useDeferredValue:Ma,useTransition:Ma,useMutableSource:Ma,useSyncExternalStore:Ma,useId:Ma,unstable_isNewReconciler:!1},Z1={readContext:_o,useCallback:function(w,_){return ko().memoizedState=[w,_===void 0?null:_],w},useContext:_o,useEffect:Z2,useImperativeHandle:function(w,_,F){return F=F!=null?F.concat([w]):null,xg(4194308,4,vg.bind(null,_,w),F)},useLayoutEffect:function(w,_){return xg(4194308,4,w,_)},useInsertionEffect:function(w,_){return xg(4,2,w,_)},useMemo:function(w,_){var F=ko();return _=_===void 0?null:_,w=w(),F.memoizedState=[w,_],w},useReducer:function(w,_,F){var z=ko();return _=F!==void 0?F(_):_,z.memoizedState=z.baseState=_,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:w,lastRenderedState:_},z.queue=w,w=w.dispatch=ew.bind(null,ws,w),[z.memoizedState,w]},useRef:function(w){var _=ko();return w={current:w},_.memoizedState=w},useState:pg,useDebugValue:gd,useDeferredValue:function(w){return ko().memoizedState=w},useTransition:function(){var w=pg(!1),_=w[0];return w=bg.bind(null,w[1]),ko().memoizedState=w,[_,w]},useMutableSource:function(){},useSyncExternalStore:function(w,_,F){var z=ws,Y=ko();if(hs){if(F===void 0)throw Error(i(407));F=F()}else{if(F=_(),Zn===null)throw Error(i(349));(pu&30)!==0||V1(z,_,F)}Y.memoizedState=F;var se={value:F,getSnapshot:_};return Y.queue=se,Z2(K1.bind(null,z,se,w),[w]),z.flags|=2048,md(9,q1.bind(null,z,se,F,_),void 0,null),F},useId:function(){var w=ko(),_=Zn.identifierPrefix;if(hs){var F=pl,z=eo;F=(z&~(1<<32-jn(z)-1)).toString(32)+F,_=":"+_+"R"+F,F=fh++,0<F&&(_+="H"+F.toString(32)),_+=":"}else F=D0++,_=":"+_+"r"+F.toString(32)+":";return w.memoizedState=_},unstable_isNewReconciler:!1},ex={readContext:_o,useCallback:J1,useContext:_o,useEffect:yg,useImperativeHandle:mh,useInsertionEffect:X1,useLayoutEffect:is,useMemo:wg,useReducer:gg,useRef:Q2,useState:function(){return gg(hd)},useDebugValue:gd,useDeferredValue:function(w){var _=Ka();return I0(_,Qs.memoizedState,w)},useTransition:function(){var w=gg(hd)[0],_=Ka().memoizedState;return[w,_]},useMutableSource:H1,useSyncExternalStore:G1,useId:pd,unstable_isNewReconciler:!1},tx={readContext:_o,useCallback:J1,useContext:_o,useEffect:yg,useImperativeHandle:mh,useInsertionEffect:X1,useLayoutEffect:is,useMemo:wg,useReducer:O0,useRef:Q2,useState:function(){return O0(hd)},useDebugValue:gd,useDeferredValue:function(w){var _=Ka();return Qs===null?_.memoizedState=w:I0(_,Qs.memoizedState,w)},useTransition:function(){var w=O0(hd)[0],_=Ka().memoizedState;return[w,_]},useMutableSource:H1,useSyncExternalStore:G1,useId:pd,unstable_isNewReconciler:!1};function To(w,_){if(w&&w.defaultProps){_=a({},_),w=w.defaultProps;for(var F in w)_[F]===void 0&&(_[F]=w[F]);return _}return _}function rx(w,_,F,z){_=w.memoizedState,F=F(z,_),F=F==null?_:a({},_,F),w.memoizedState=F,w.lanes===0&&(w.updateQueue.baseState=F)}var ph={isMounted:function(w){return(w=w._reactInternals)?A(w)===w:!1},enqueueSetState:function(w,_,F){w=w._reactInternals;var z=ms(),Y=ba(w),se=Mc(z,Y);se.payload=_,F!=null&&(se.callback=F),_=Fc(w,se,Y),_!==null&&(di(_,w,Y,z),uh(_,w,Y))},enqueueReplaceState:function(w,_,F){w=w._reactInternals;var z=ms(),Y=ba(w),se=Mc(z,Y);se.tag=1,se.payload=_,F!=null&&(se.callback=F),_=Fc(w,se,Y),_!==null&&(di(_,w,Y,z),uh(_,w,Y))},enqueueForceUpdate:function(w,_){w=w._reactInternals;var F=ms(),z=ba(w),Y=Mc(F,z);Y.tag=2,_!=null&&(Y.callback=_),_=Fc(w,Y,z),_!==null&&(di(_,w,z,F),uh(_,w,z))}};function rw(w,_,F,z,Y,se,Se){return w=w.stateNode,typeof w.shouldComponentUpdate=="function"?w.shouldComponentUpdate(z,se,Se):_.prototype&&_.prototype.isPureReactComponent?!og(F,z)||!og(Y,se):!0}function nw(w,_,F){var z=!1,Y=Pa,se=_.contextType;return typeof se=="object"&&se!==null?se=_o(se):(Y=Hn(_)?Yn:Mn.current,z=_.contextTypes,se=(z=z!=null)?pa(w,Y):Pa),_=new _(F,se),w.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=ph,w.stateNode=_,_._reactInternals=w,z&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=Y,w.__reactInternalMemoizedMaskedChildContext=se),_}function _g(w,_,F,z){w=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(F,z),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(F,z),_.state!==w&&ph.enqueueReplaceState(_,_.state,null)}function Ul(w,_,F,z){var Y=w.stateNode;Y.props=F,Y.state=w.memoizedState,Y.refs={},B1(w);var se=_.contextType;typeof se=="object"&&se!==null?Y.context=_o(se):(se=Hn(_)?Yn:Mn.current,Y.context=pa(w,se)),Y.state=w.memoizedState,se=_.getDerivedStateFromProps,typeof se=="function"&&(rx(w,_,se,F),Y.state=w.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(_=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),_!==Y.state&&ph.enqueueReplaceState(Y,Y.state,null),hu(w,F,Y,z),Y.state=w.memoizedState),typeof Y.componentDidMount=="function"&&(w.flags|=4194308)}function yd(w,_){try{var F="",z=_;do F+=H3(z),z=z.return;while(z);var Y=F}catch(se){Y=`
Error generating stack: `+se.message+`
`+se.stack}return{value:w,source:_,stack:Y,digest:null}}function yu(w,_,F){return{value:w,source:null,stack:F??null,digest:_??null}}function Ko(w,_){try{console.error(_.value)}catch(F){setTimeout(function(){throw F})}}var xh=typeof WeakMap=="function"?WeakMap:Map;function Wl(w,_,F){F=Mc(-1,F),F.tag=3,F.payload={element:null};var z=_.value;return F.callback=function(){Is||(Is=!0,Zs=z),Ko(w,_)},F}function Sg(w,_,F){F=Mc(-1,F),F.tag=3;var z=w.type.getDerivedStateFromError;if(typeof z=="function"){var Y=_.value;F.payload=function(){return z(Y)},F.callback=function(){Ko(w,_)}}var se=w.stateNode;return se!==null&&typeof se.componentDidCatch=="function"&&(F.callback=function(){Ko(w,_),typeof z!="function"&&(bl===null?bl=new Set([this]):bl.add(this));var Se=_.stack;this.componentDidCatch(_.value,{componentStack:Se!==null?Se:""})}),F}function sw(w,_,F){var z=w.pingCache;if(z===null){z=w.pingCache=new xh;var Y=new Set;z.set(_,Y)}else Y=z.get(_),Y===void 0&&(Y=new Set,z.set(_,Y));Y.has(F)||(Y.add(F),w=fw.bind(null,w,_,F),_.then(w,w))}function aw(w){do{var _;if((_=w.tag===13)&&(_=w.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return w;w=w.return}while(w!==null);return null}function vu(w,_,F,z,Y){return(w.mode&1)===0?(w===_?w.flags|=65536:(w.flags|=128,F.flags|=131072,F.flags&=-52805,F.tag===1&&(F.alternate===null?F.tag=17:(_=Mc(-1,1),_.tag=2,Fc(F,_,1))),F.lanes|=1),w):(w.flags|=65536,w.lanes=Y,w)}var yh=o.ReactCurrentOwner,va=!1;function Fa(w,_,F,z){_.child=w===null?K2(_,null,F,z):ld(_,w.child,F,z)}function kg(w,_,F,z,Y){F=F.render;var se=_.ref;return j0(_,Y),z=hh(w,_,F,z,se,Y),F=mg(),w!==null&&!va?(_.updateQueue=w.updateQueue,_.flags&=-2053,w.lanes&=~Y,Ic(w,_,Y)):(hs&&F&&ih(_),_.flags|=1,Fa(w,_,z,Y),_.child)}function vd(w,_,F,z,Y){if(w===null){var se=F.type;return typeof se=="function"&&!J0(se)&&se.defaultProps===void 0&&F.compare===null&&F.defaultProps===void 0?(_.tag=15,_.type=se,Oc(w,_,se,z,Y)):(w=$g(F.type,null,z,_,_.mode,Y),w.ref=_.ref,w.return=_,_.child=w)}if(se=w.child,(w.lanes&Y)===0){var Se=se.memoizedProps;if(F=F.compare,F=F!==null?F:og,F(Se,z)&&w.ref===_.ref)return Ic(w,_,Y)}return _.flags|=1,w=Au(se,z),w.ref=_.ref,w.return=_,_.child=w}function Oc(w,_,F,z,Y){if(w!==null){var se=w.memoizedProps;if(og(se,z)&&w.ref===_.ref)if(va=!1,_.pendingProps=z=se,(w.lanes&Y)!==0)(w.flags&131072)!==0&&(va=!0);else return _.lanes=w.lanes,Ic(w,_,Y)}return Hl(w,_,F,z,Y)}function os(w,_,F){var z=_.pendingProps,Y=z.children,se=w!==null?w.memoizedState:null;if(z.mode==="hidden")if((_.mode&1)===0)_.memoizedState={baseLanes:0,cachePool:null,transitions:null},_r(Tu,wa),wa|=F;else{if((F&1073741824)===0)return w=se!==null?se.baseLanes|F:F,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:w,cachePool:null,transitions:null},_.updateQueue=null,_r(Tu,wa),wa|=w,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},z=se!==null?se.baseLanes:F,_r(Tu,wa),wa|=z}else se!==null?(z=se.baseLanes|F,_.memoizedState=null):z=F,_r(Tu,wa),wa|=z;return Fa(w,_,Y,F),_.child}function Qn(w,_){var F=_.ref;(w===null&&F!==null||w!==null&&w.ref!==F)&&(_.flags|=512,_.flags|=2097152)}function Hl(w,_,F,z,Y){var se=Hn(F)?Yn:Mn.current;return se=pa(_,se),j0(_,Y),F=hh(w,_,F,z,se,Y),z=mg(),w!==null&&!va?(_.updateQueue=w.updateQueue,_.flags&=-2053,w.lanes&=~Y,Ic(w,_,Y)):(hs&&z&&ih(_),_.flags|=1,Fa(w,_,F,Y),_.child)}function Ya(w,_,F,z,Y){if(Hn(F)){var se=!0;Yr(_)}else se=!1;if(j0(_,Y),_.stateNode===null)vh(w,_),nw(_,F,z),Ul(_,F,z,Y),z=!0;else if(w===null){var Se=_.stateNode,et=_.memoizedProps;Se.props=et;var St=Se.context,sr=F.contextType;typeof sr=="object"&&sr!==null?sr=_o(sr):(sr=Hn(F)?Yn:Mn.current,sr=pa(_,sr));var Nr=F.getDerivedStateFromProps,an=typeof Nr=="function"||typeof Se.getSnapshotBeforeUpdate=="function";an||typeof Se.UNSAFE_componentWillReceiveProps!="function"&&typeof Se.componentWillReceiveProps!="function"||(et!==z||St!==sr)&&_g(_,Se,z,sr),So=!1;var xr=_.memoizedState;Se.state=xr,hu(_,z,Se,Y),St=_.memoizedState,et!==z||xr!==St||ds.current||So?(typeof Nr=="function"&&(rx(_,F,Nr,z),St=_.memoizedState),(et=So||rw(_,F,et,z,xr,St,sr))?(an||typeof Se.UNSAFE_componentWillMount!="function"&&typeof Se.componentWillMount!="function"||(typeof Se.componentWillMount=="function"&&Se.componentWillMount(),typeof Se.UNSAFE_componentWillMount=="function"&&Se.UNSAFE_componentWillMount()),typeof Se.componentDidMount=="function"&&(_.flags|=4194308)):(typeof Se.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=z,_.memoizedState=St),Se.props=z,Se.state=St,Se.context=sr,z=et):(typeof Se.componentDidMount=="function"&&(_.flags|=4194308),z=!1)}else{Se=_.stateNode,X2(w,_),et=_.memoizedProps,sr=_.type===_.elementType?et:To(_.type,et),Se.props=sr,an=_.pendingProps,xr=Se.context,St=F.contextType,typeof St=="object"&&St!==null?St=_o(St):(St=Hn(F)?Yn:Mn.current,St=pa(_,St));var cs=F.getDerivedStateFromProps;(Nr=typeof cs=="function"||typeof Se.getSnapshotBeforeUpdate=="function")||typeof Se.UNSAFE_componentWillReceiveProps!="function"&&typeof Se.componentWillReceiveProps!="function"||(et!==an||xr!==St)&&_g(_,Se,z,St),So=!1,xr=_.memoizedState,Se.state=xr,hu(_,z,Se,Y);var qn=_.memoizedState;et!==an||xr!==qn||ds.current||So?(typeof cs=="function"&&(rx(_,F,cs,z),qn=_.memoizedState),(sr=So||rw(_,F,sr,z,xr,qn,St)||!1)?(Nr||typeof Se.UNSAFE_componentWillUpdate!="function"&&typeof Se.componentWillUpdate!="function"||(typeof Se.componentWillUpdate=="function"&&Se.componentWillUpdate(z,qn,St),typeof Se.UNSAFE_componentWillUpdate=="function"&&Se.UNSAFE_componentWillUpdate(z,qn,St)),typeof Se.componentDidUpdate=="function"&&(_.flags|=4),typeof Se.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof Se.componentDidUpdate!="function"||et===w.memoizedProps&&xr===w.memoizedState||(_.flags|=4),typeof Se.getSnapshotBeforeUpdate!="function"||et===w.memoizedProps&&xr===w.memoizedState||(_.flags|=1024),_.memoizedProps=z,_.memoizedState=qn),Se.props=z,Se.state=qn,Se.context=St,z=sr):(typeof Se.componentDidUpdate!="function"||et===w.memoizedProps&&xr===w.memoizedState||(_.flags|=4),typeof Se.getSnapshotBeforeUpdate!="function"||et===w.memoizedProps&&xr===w.memoizedState||(_.flags|=1024),z=!1)}return li(w,_,F,z,se,Y)}function li(w,_,F,z,Y,se){Qn(w,_);var Se=(_.flags&128)!==0;if(!z&&!Se)return Y&&fs(_,F,!1),Ic(w,_,se);z=_.stateNode,yh.current=_;var et=Se&&typeof F.getDerivedStateFromError!="function"?null:z.render();return _.flags|=1,w!==null&&Se?(_.child=ld(_,w.child,null,se),_.child=ld(_,null,et,se)):Fa(w,_,et,se),_.memoizedState=z.state,Y&&fs(_,F,!0),_.child}function wu(w){var _=w.stateNode;_.pendingContext?Nt(w,_.pendingContext,_.pendingContext!==_.context):_.context&&Nt(w,_.context,!1),fg(w,_.containerInfo)}function wd(w,_,F,z,Y){return id(),O1(Y),_.flags|=256,Fa(w,_,F,z),_.child}var ci={dehydrated:null,treeContext:null,retryLane:0};function R0(w){return{baseLanes:w,cachePool:null,transitions:null}}function nx(w,_,F){var z=_.pendingProps,Y=Ts.current,se=!1,Se=(_.flags&128)!==0,et;if((et=Se)||(et=w!==null&&w.memoizedState===null?!1:(Y&2)!==0),et?(se=!0,_.flags&=-129):(w===null||w.memoizedState!==null)&&(Y|=1),_r(Ts,Y&1),w===null)return D1(_),w=_.memoizedState,w!==null&&(w=w.dehydrated,w!==null)?((_.mode&1)===0?_.lanes=1:br(w)?_.lanes=8:_.lanes=1073741824,null):(Se=z.children,w=z.fallback,se?(z=_.mode,se=_.child,Se={mode:"hidden",children:Se},(z&1)===0&&se!==null?(se.childLanes=0,se.pendingProps=Se):se=Q0(Se,z,0,null),w=Xa(w,z,F,null),se.return=_,w.return=_,se.sibling=w,_.child=se,_.child.memoizedState=R0(F),_.memoizedState=ci,w):Tg(_,Se));if(Y=w.memoizedState,Y!==null&&(et=Y.dehydrated,et!==null))return iw(w,_,Se,z,et,Y,F);if(se){se=z.fallback,Se=_.mode,Y=w.child,et=Y.sibling;var St={mode:"hidden",children:z.children};return(Se&1)===0&&_.child!==Y?(z=_.child,z.childLanes=0,z.pendingProps=St,_.deletions=null):(z=Au(Y,St),z.subtreeFlags=Y.subtreeFlags&14680064),et!==null?se=Au(et,se):(se=Xa(se,Se,F,null),se.flags|=2),se.return=_,z.return=_,z.sibling=se,_.child=z,z=se,se=_.child,Se=w.child.memoizedState,Se=Se===null?R0(F):{baseLanes:Se.baseLanes|F,cachePool:null,transitions:Se.transitions},se.memoizedState=Se,se.childLanes=w.childLanes&~F,_.memoizedState=ci,z}return se=w.child,w=se.sibling,z=Au(se,{mode:"visible",children:z.children}),(_.mode&1)===0&&(z.lanes=F),z.return=_,z.sibling=null,w!==null&&(F=_.deletions,F===null?(_.deletions=[w],_.flags|=16):F.push(w)),_.child=z,_.memoizedState=null,z}function Tg(w,_){return _=Q0({mode:"visible",children:_},w.mode,0,null),_.return=w,w.child=_}function bd(w,_,F,z){return z!==null&&O1(z),ld(_,w.child,null,F),w=Tg(_,_.pendingProps.children),w.flags|=2,_.memoizedState=null,w}function iw(w,_,F,z,Y,se,Se){if(F)return _.flags&256?(_.flags&=-257,z=yu(Error(i(422))),bd(w,_,Se,z)):_.memoizedState!==null?(_.child=w.child,_.flags|=128,null):(se=z.fallback,Y=_.mode,z=Q0({mode:"visible",children:z.children},Y,0,null),se=Xa(se,Y,Se,null),se.flags|=2,z.return=_,se.return=_,z.sibling=se,_.child=z,(_.mode&1)!==0&&ld(_,w.child,null,Se),_.child.memoizedState=R0(Se),_.memoizedState=ci,se);if((_.mode&1)===0)return bd(w,_,Se,null);if(br(Y))return z=Kr(Y).digest,se=Error(i(419)),z=yu(se,z,void 0),bd(w,_,Se,z);if(F=(Se&w.childLanes)!==0,va||F){if(z=Zn,z!==null){switch(Se&-Se){case 4:Y=2;break;case 16:Y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Y=32;break;case 536870912:Y=268435456;break;default:Y=0}Y=(Y&(z.suspendedLanes|Se))!==0?0:Y,Y!==0&&Y!==se.retryLane&&(se.retryLane=Y,vl(w,Y),di(z,w,Y,-1))}return X0(),z=yu(Error(i(421))),bd(w,_,Se,z)}return Dr(Y)?(_.flags|=128,_.child=w.child,_=mw.bind(null,w),he(Y,_),null):(w=se.treeContext,xe&&(Ai=ke(Y),qa=_,hs=!0,yl=null,lh=!1,w!==null&&(Ni[bo++]=eo,Ni[bo++]=pl,Ni[bo++]=xa,eo=w.id,pl=w.overflow,xa=_)),_=Tg(_,z.children),_.flags|=4096,_)}function Gl(w,_,F){w.lanes|=_;var z=w.alternate;z!==null&&(z.lanes|=_),cd(w.return,_,F)}function L0(w,_,F,z,Y){var se=w.memoizedState;se===null?w.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:z,tail:F,tailMode:Y}:(se.isBackwards=_,se.rendering=null,se.renderingStartTime=0,se.last=z,se.tail=F,se.tailMode=Y)}function Cg(w,_,F){var z=_.pendingProps,Y=z.revealOrder,se=z.tail;if(Fa(w,_,z.children,F),z=Ts.current,(z&2)!==0)z=z&1|2,_.flags|=128;else{if(w!==null&&(w.flags&128)!==0)e:for(w=_.child;w!==null;){if(w.tag===13)w.memoizedState!==null&&Gl(w,F,_);else if(w.tag===19)Gl(w,F,_);else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===_)break e;for(;w.sibling===null;){if(w.return===null||w.return===_)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}z&=1}if(_r(Ts,z),(_.mode&1)===0)_.memoizedState=null;else switch(Y){case"forwards":for(F=_.child,Y=null;F!==null;)w=F.alternate,w!==null&&hg(w)===null&&(Y=F),F=F.sibling;F=Y,F===null?(Y=_.child,_.child=null):(Y=F.sibling,F.sibling=null),L0(_,!1,Y,F,se);break;case"backwards":for(F=null,Y=_.child,_.child=null;Y!==null;){if(w=Y.alternate,w!==null&&hg(w)===null){_.child=Y;break}w=Y.sibling,Y.sibling=F,F=Y,Y=w}L0(_,!0,F,null,se);break;case"together":L0(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function vh(w,_){(_.mode&1)===0&&w!==null&&(w.alternate=null,_.alternate=null,_.flags|=2)}function Ic(w,_,F){if(w!==null&&(_.dependencies=w.dependencies),Lc|=_.lanes,(F&_.childLanes)===0)return null;if(w!==null&&_.child!==w.child)throw Error(i(153));if(_.child!==null){for(w=_.child,F=Au(w,w.pendingProps),_.child=F,F.return=_;w.sibling!==null;)w=w.sibling,F=F.sibling=Au(w,w.pendingProps),F.return=_;F.sibling=null}return _.child}function bu(w,_,F){switch(_.tag){case 3:wu(_),id();break;case 5:$1(_);break;case 1:Hn(_.type)&&Yr(_);break;case 4:fg(_,_.stateNode.containerInfo);break;case 10:Y2(_,_.type._context,_.memoizedProps.value);break;case 13:var z=_.memoizedState;if(z!==null)return z.dehydrated!==null?(_r(Ts,Ts.current&1),_.flags|=128,null):(F&_.child.childLanes)!==0?nx(w,_,F):(_r(Ts,Ts.current&1),w=Ic(w,_,F),w!==null?w.sibling:null);_r(Ts,Ts.current&1);break;case 19:if(z=(F&_.childLanes)!==0,(w.flags&128)!==0){if(z)return Cg(w,_,F);_.flags|=128}var Y=_.memoizedState;if(Y!==null&&(Y.rendering=null,Y.tail=null,Y.lastEffect=null),_r(Ts,Ts.current),z)break;return null;case 22:case 23:return _.lanes=0,os(w,_,F)}return Ic(w,_,F)}function ji(w){w.flags|=4}function _d(w,_){if(w!==null&&w.child===_.child)return!0;if((_.flags&16)!==0)return!1;for(w=_.child;w!==null;){if((w.flags&12854)!==0||(w.subtreeFlags&12854)!==0)return!1;w=w.sibling}return!0}var _u,Su,Pi,Mi;if(Te)_u=function(w,_){for(var F=_.child;F!==null;){if(F.tag===5||F.tag===6)I(w,F.stateNode);else if(F.tag!==4&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===_)break;for(;F.sibling===null;){if(F.return===null||F.return===_)return;F=F.return}F.sibling.return=F.return,F=F.sibling}},Su=function(){},Pi=function(w,_,F,z,Y){if(w=w.memoizedProps,w!==z){var se=_.stateNode,Se=qo(Vo.current);F=K(se,F,w,z,Y,Se),(_.updateQueue=F)&&ji(_)}},Mi=function(w,_,F,z){F!==z&&ji(_)};else if(ie){_u=function(w,_,F,z){for(var Y=_.child;Y!==null;){if(Y.tag===5){var se=Y.stateNode;F&&z&&(se=Ve(se,Y.type,Y.memoizedProps,Y)),I(w,se)}else if(Y.tag===6)se=Y.stateNode,F&&z&&(se=Ge(se,Y.memoizedProps,Y)),I(w,se);else if(Y.tag!==4){if(Y.tag===22&&Y.memoizedState!==null)se=Y.child,se!==null&&(se.return=Y),_u(w,Y,!0,!0);else if(Y.child!==null){Y.child.return=Y,Y=Y.child;continue}}if(Y===_)break;for(;Y.sibling===null;){if(Y.return===null||Y.return===_)return;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}};var ku=function(w,_,F,z){for(var Y=_.child;Y!==null;){if(Y.tag===5){var se=Y.stateNode;F&&z&&(se=Ve(se,Y.type,Y.memoizedProps,Y)),Ie(w,se)}else if(Y.tag===6)se=Y.stateNode,F&&z&&(se=Ge(se,Y.memoizedProps,Y)),Ie(w,se);else if(Y.tag!==4){if(Y.tag===22&&Y.memoizedState!==null)se=Y.child,se!==null&&(se.return=Y),ku(w,Y,!0,!0);else if(Y.child!==null){Y.child.return=Y,Y=Y.child;continue}}if(Y===_)break;for(;Y.sibling===null;){if(Y.return===null||Y.return===_)return;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}};Su=function(w,_){var F=_.stateNode;if(!_d(w,_)){w=F.containerInfo;var z=Pt(w);ku(z,_,!1,!1),F.pendingChildren=z,ji(_),Ye(w,z)}},Pi=function(w,_,F,z,Y){var se=w.stateNode,Se=w.memoizedProps;if((w=_d(w,_))&&Se===z)_.stateNode=se;else{var et=_.stateNode,St=qo(Vo.current),sr=null;Se!==z&&(sr=K(et,F,Se,z,Y,St)),w&&sr===null?_.stateNode=se:(se=Ue(se,sr,F,Se,z,_,w,et),W(se,F,z,Y,St)&&ji(_),_.stateNode=se,w?ji(_):_u(se,_,!1,!1))}},Mi=function(w,_,F,z){F!==z?(w=qo(gu.current),F=qo(Vo.current),_.stateNode=oe(z,w,F,_),ji(_)):_.stateNode=w.stateNode}}else Su=function(){},Pi=function(){},Mi=function(){};function Co(w,_){if(!hs)switch(w.tailMode){case"hidden":_=w.tail;for(var F=null;_!==null;)_.alternate!==null&&(F=_),_=_.sibling;F===null?w.tail=null:F.sibling=null;break;case"collapsed":F=w.tail;for(var z=null;F!==null;)F.alternate!==null&&(z=F),F=F.sibling;z===null?_||w.tail===null?w.tail=null:w.tail.sibling=null:z.sibling=null}}function bs(w){var _=w.alternate!==null&&w.alternate.child===w.child,F=0,z=0;if(_)for(var Y=w.child;Y!==null;)F|=Y.lanes|Y.childLanes,z|=Y.subtreeFlags&14680064,z|=Y.flags&14680064,Y.return=w,Y=Y.sibling;else for(Y=w.child;Y!==null;)F|=Y.lanes|Y.childLanes,z|=Y.subtreeFlags,z|=Y.flags,Y.return=w,Y=Y.sibling;return w.subtreeFlags|=z,w.childLanes=F,_}function Sd(w,_,F){var z=_.pendingProps;switch(oh(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bs(_),null;case 1:return Hn(_.type)&&_e(),bs(_),null;case 3:return F=_.stateNode,ud(),mn(ds),mn(Mn),W1(),F.pendingContext&&(F.context=F.pendingContext,F.pendingContext=null),(w===null||w.child===null)&&(ig(_)?ji(_):w===null||w.memoizedState.isDehydrated&&(_.flags&256)===0||(_.flags|=1024,yl!==null&&(Lg(yl),yl=null))),Su(w,_),bs(_),null;case 5:z1(_),F=qo(gu.current);var Y=_.type;if(w!==null&&_.stateNode!=null)Pi(w,_,Y,z,F),w.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!z){if(_.stateNode===null)throw Error(i(166));return bs(_),null}if(w=qo(Vo.current),ig(_)){if(!xe)throw Error(i(175));w=Ee(_.stateNode,_.type,_.memoizedProps,F,w,_,!lh),_.updateQueue=w,w!==null&&ji(_)}else{var se=U(Y,z,F,w,_);_u(se,_,!1,!1),_.stateNode=se,W(se,Y,z,F,w)&&ji(_)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return bs(_),null;case 6:if(w&&_.stateNode!=null)Mi(w,_,w.memoizedProps,z);else{if(typeof z!="string"&&_.stateNode===null)throw Error(i(166));if(w=qo(gu.current),F=qo(Vo.current),ig(_)){if(!xe)throw Error(i(176));if(w=_.stateNode,F=_.memoizedProps,(z=Qe(w,F,_,!lh))&&(Y=qa,Y!==null))switch(Y.tag){case 3:gt(Y.stateNode.containerInfo,w,F,(Y.mode&1)!==0);break;case 5:Tt(Y.type,Y.memoizedProps,Y.stateNode,w,F,(Y.mode&1)!==0)}z&&ji(_)}else _.stateNode=oe(z,w,F,_)}return bs(_),null;case 13:if(mn(Ts),z=_.memoizedState,w===null||w.memoizedState!==null&&w.memoizedState.dehydrated!==null){if(hs&&Ai!==null&&(_.mode&1)!==0&&(_.flags&128)===0)G2(),id(),_.flags|=98560,Y=!1;else if(Y=ig(_),z!==null&&z.dehydrated!==null){if(w===null){if(!Y)throw Error(i(318));if(!xe)throw Error(i(344));if(Y=_.memoizedState,Y=Y!==null?Y.dehydrated:null,!Y)throw Error(i(317));xt(Y,_)}else id(),(_.flags&128)===0&&(_.memoizedState=null),_.flags|=4;bs(_),Y=!1}else yl!==null&&(Lg(yl),yl=null),Y=!0;if(!Y)return _.flags&65536?_:null}return(_.flags&128)!==0?(_.lanes=F,_):(F=z!==null,F!==(w!==null&&w.memoizedState!==null)&&F&&(_.child.flags|=8192,(_.mode&1)!==0&&(w===null||(Ts.current&1)!==0?Ss===0&&(Ss=3):X0())),_.updateQueue!==null&&(_.flags|=4),bs(_),null);case 4:return ud(),Su(w,_),w===null&&Me(_.stateNode.containerInfo),bs(_),null;case 10:return ch(_.type._context),bs(_),null;case 17:return Hn(_.type)&&_e(),bs(_),null;case 19:if(mn(Ts),Y=_.memoizedState,Y===null)return bs(_),null;if(z=(_.flags&128)!==0,se=Y.rendering,se===null)if(z)Co(Y,!1);else{if(Ss!==0||w!==null&&(w.flags&128)!==0)for(w=_.child;w!==null;){if(se=hg(w),se!==null){for(_.flags|=128,Co(Y,!1),w=se.updateQueue,w!==null&&(_.updateQueue=w,_.flags|=4),_.subtreeFlags=0,w=F,F=_.child;F!==null;)z=F,Y=w,z.flags&=14680066,se=z.alternate,se===null?(z.childLanes=0,z.lanes=Y,z.child=null,z.subtreeFlags=0,z.memoizedProps=null,z.memoizedState=null,z.updateQueue=null,z.dependencies=null,z.stateNode=null):(z.childLanes=se.childLanes,z.lanes=se.lanes,z.child=se.child,z.subtreeFlags=0,z.deletions=null,z.memoizedProps=se.memoizedProps,z.memoizedState=se.memoizedState,z.updateQueue=se.updateQueue,z.type=se.type,Y=se.dependencies,z.dependencies=Y===null?null:{lanes:Y.lanes,firstContext:Y.firstContext}),F=F.sibling;return _r(Ts,Ts.current&1|2),_.child}w=w.sibling}Y.tail!==null&&vs()>Ch&&(_.flags|=128,z=!0,Co(Y,!1),_.lanes=4194304)}else{if(!z)if(w=hg(se),w!==null){if(_.flags|=128,z=!0,w=w.updateQueue,w!==null&&(_.updateQueue=w,_.flags|=4),Co(Y,!0),Y.tail===null&&Y.tailMode==="hidden"&&!se.alternate&&!hs)return bs(_),null}else 2*vs()-Y.renderingStartTime>Ch&&F!==1073741824&&(_.flags|=128,z=!0,Co(Y,!1),_.lanes=4194304);Y.isBackwards?(se.sibling=_.child,_.child=se):(w=Y.last,w!==null?w.sibling=se:_.child=se,Y.last=se)}return Y.tail!==null?(_=Y.tail,Y.rendering=_,Y.tail=_.sibling,Y.renderingStartTime=vs(),_.sibling=null,w=Ts.current,_r(Ts,z?w&1|2:w&1),_):(bs(_),null);case 22:case 23:return Bg(),F=_.memoizedState!==null,w!==null&&w.memoizedState!==null!==F&&(_.flags|=8192),F&&(_.mode&1)!==0?(wa&1073741824)!==0&&(bs(_),Te&&_.subtreeFlags&6&&(_.flags|=8192)):bs(_),null;case 24:return null;case 25:return null}throw Error(i(156,_.tag))}function ow(w,_){switch(oh(_),_.tag){case 1:return Hn(_.type)&&_e(),w=_.flags,w&65536?(_.flags=w&-65537|128,_):null;case 3:return ud(),mn(ds),mn(Mn),W1(),w=_.flags,(w&65536)!==0&&(w&128)===0?(_.flags=w&-65537|128,_):null;case 5:return z1(_),null;case 13:if(mn(Ts),w=_.memoizedState,w!==null&&w.dehydrated!==null){if(_.alternate===null)throw Error(i(340));id()}return w=_.flags,w&65536?(_.flags=w&-65537|128,_):null;case 19:return mn(Ts),null;case 4:return ud(),null;case 10:return ch(_.type._context),null;case 22:case 23:return Bg(),null;case 24:return null;default:return null}}var B0=!1,Da=!1,Eo=typeof WeakSet=="function"?WeakSet:Set,pr=null;function Vn(w,_){var F=w.ref;if(F!==null)if(typeof F=="function")try{F(null)}catch(z){gs(w,_,z)}else F.current=null}function No(w,_,F){try{F()}catch(z){gs(w,_,z)}}var sx=!1;function lw(w,_){for(R(w.containerInfo),pr=_;pr!==null;)if(w=pr,_=w.child,(w.subtreeFlags&1028)!==0&&_!==null)_.return=w,pr=_;else for(;pr!==null;){w=pr;try{var F=w.alternate;if((w.flags&1024)!==0)switch(w.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var z=F.memoizedProps,Y=F.memoizedState,se=w.stateNode,Se=se.getSnapshotBeforeUpdate(w.elementType===w.type?z:To(w.type,z),Y);se.__reactInternalSnapshotBeforeUpdate=Se}break;case 3:Te&&Le(w.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(et){gs(w,w.return,et)}if(_=w.sibling,_!==null){_.return=w.return,pr=_;break}pr=w.return}return F=sx,sx=!1,F}function kd(w,_,F){var z=_.updateQueue;if(z=z!==null?z.lastEffect:null,z!==null){var Y=z=z.next;do{if((Y.tag&w)===w){var se=Y.destroy;Y.destroy=void 0,se!==void 0&&No(_,F,se)}Y=Y.next}while(Y!==z)}}function $0(w,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var F=_=_.next;do{if((F.tag&w)===w){var z=F.create;F.destroy=z()}F=F.next}while(F!==_)}}function Eg(w){var _=w.ref;if(_!==null){var F=w.stateNode;switch(w.tag){case 5:w=ne(F);break;default:w=F}typeof _=="function"?_(w):_.current=w}}function wh(w){var _=w.alternate;_!==null&&(w.alternate=null,wh(_)),w.child=null,w.deletions=null,w.sibling=null,w.tag===5&&(_=w.stateNode,_!==null&&He(_)),w.stateNode=null,w.return=null,w.dependencies=null,w.memoizedProps=null,w.memoizedState=null,w.pendingProps=null,w.stateNode=null,w.updateQueue=null}function ax(w){return w.tag===5||w.tag===3||w.tag===4}function Td(w){e:for(;;){for(;w.sibling===null;){if(w.return===null||ax(w.return))return null;w=w.return}for(w.sibling.return=w.return,w=w.sibling;w.tag!==5&&w.tag!==6&&w.tag!==18;){if(w.flags&2||w.child===null||w.tag===4)continue e;w.child.return=w,w=w.child}if(!(w.flags&2))return w.stateNode}}function bh(w,_,F){var z=w.tag;if(z===5||z===6)w=w.stateNode,_?Qt(F,w,_):tt(F,w);else if(z!==4&&(w=w.child,w!==null))for(bh(w,_,F),w=w.sibling;w!==null;)bh(w,_,F),w=w.sibling}function ix(w,_,F){var z=w.tag;if(z===5||z===6)w=w.stateNode,_?Rt(F,w,_):ze(F,w);else if(z!==4&&(w=w.child,w!==null))for(ix(w,_,F),w=w.sibling;w!==null;)ix(w,_,F),w=w.sibling}var Us=null,ro=!1;function wl(w,_,F){for(F=F.child;F!==null;)Ng(w,_,F),F=F.sibling}function Ng(w,_,F){if(Zi&&typeof Zi.onCommitFiberUnmount=="function")try{Zi.onCommitFiberUnmount(uu,F)}catch{}switch(F.tag){case 5:Da||Vn(F,_);case 6:if(Te){var z=Us,Y=ro;Us=null,wl(w,_,F),Us=z,ro=Y,Us!==null&&(ro?kr(Us,F.stateNode):wr(Us,F.stateNode))}else wl(w,_,F);break;case 18:Te&&Us!==null&&(ro?Pe(Us,F.stateNode):je(Us,F.stateNode));break;case 4:Te?(z=Us,Y=ro,Us=F.stateNode.containerInfo,ro=!0,wl(w,_,F),Us=z,ro=Y):(ie&&(z=F.stateNode.containerInfo,Y=Pt(z),Ne(z,Y)),wl(w,_,F));break;case 0:case 11:case 14:case 15:if(!Da&&(z=F.updateQueue,z!==null&&(z=z.lastEffect,z!==null))){Y=z=z.next;do{var se=Y,Se=se.destroy;se=se.tag,Se!==void 0&&((se&2)!==0||(se&4)!==0)&&No(F,_,Se),Y=Y.next}while(Y!==z)}wl(w,_,F);break;case 1:if(!Da&&(Vn(F,_),z=F.stateNode,typeof z.componentWillUnmount=="function"))try{z.props=F.memoizedProps,z.state=F.memoizedState,z.componentWillUnmount()}catch(et){gs(F,_,et)}wl(w,_,F);break;case 21:wl(w,_,F);break;case 22:F.mode&1?(Da=(z=Da)||F.memoizedState!==null,wl(w,_,F),Da=z):wl(w,_,F);break;default:wl(w,_,F)}}function Cd(w){var _=w.updateQueue;if(_!==null){w.updateQueue=null;var F=w.stateNode;F===null&&(F=w.stateNode=new Eo),_.forEach(function(z){var Y=V3.bind(null,w,z);F.has(z)||(F.add(z),z.then(Y,Y))})}}function Yo(w,_){var F=_.deletions;if(F!==null)for(var z=0;z<F.length;z++){var Y=F[z];try{var se=w,Se=_;if(Te){var et=Se;e:for(;et!==null;){switch(et.tag){case 5:Us=et.stateNode,ro=!1;break e;case 3:Us=et.stateNode.containerInfo,ro=!0;break e;case 4:Us=et.stateNode.containerInfo,ro=!0;break e}et=et.return}if(Us===null)throw Error(i(160));Ng(se,Se,Y),Us=null,ro=!1}else Ng(se,Se,Y);var St=Y.alternate;St!==null&&(St.return=null),Y.return=null}catch(sr){gs(Y,_,sr)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)_h(_,w),_=_.sibling}function _h(w,_){var F=w.alternate,z=w.flags;switch(w.tag){case 0:case 11:case 14:case 15:if(Yo(_,w),Ao(w),z&4){try{kd(3,w,w.return),$0(3,w)}catch(xr){gs(w,w.return,xr)}try{kd(5,w,w.return)}catch(xr){gs(w,w.return,xr)}}break;case 1:Yo(_,w),Ao(w),z&512&&F!==null&&Vn(F,F.return);break;case 5:if(Yo(_,w),Ao(w),z&512&&F!==null&&Vn(F,F.return),Te){if(w.flags&32){var Y=w.stateNode;try{zr(Y)}catch(xr){gs(w,w.return,xr)}}if(z&4&&(Y=w.stateNode,Y!=null)){var se=w.memoizedProps;if(F=F!==null?F.memoizedProps:se,z=w.type,_=w.updateQueue,w.updateQueue=null,_!==null)try{Dt(Y,_,z,F,se,w)}catch(xr){gs(w,w.return,xr)}}}break;case 6:if(Yo(_,w),Ao(w),z&4&&Te){if(w.stateNode===null)throw Error(i(162));Y=w.stateNode,se=w.memoizedProps,F=F!==null?F.memoizedProps:se;try{ot(Y,F,se)}catch(xr){gs(w,w.return,xr)}}break;case 3:if(Yo(_,w),Ao(w),z&4){if(Te&&xe&&F!==null&&F.memoizedState.isDehydrated)try{ce(_.containerInfo)}catch(xr){gs(w,w.return,xr)}if(ie){Y=_.containerInfo,se=_.pendingChildren;try{Ne(Y,se)}catch(xr){gs(w,w.return,xr)}}}break;case 4:if(Yo(_,w),Ao(w),z&4&&ie){se=w.stateNode,Y=se.containerInfo,se=se.pendingChildren;try{Ne(Y,se)}catch(xr){gs(w,w.return,xr)}}break;case 13:Yo(_,w),Ao(w),Y=w.child,Y.flags&8192&&(se=Y.memoizedState!==null,Y.stateNode.isHidden=se,!se||Y.alternate!==null&&Y.alternate.memoizedState!==null||(V0=vs())),z&4&&Cd(w);break;case 22:var Se=F!==null&&F.memoizedState!==null;if(w.mode&1?(Da=(F=Da)||Se,Yo(_,w),Da=F):Yo(_,w),Ao(w),z&8192){if(F=w.memoizedState!==null,(w.stateNode.isHidden=F)&&!Se&&(w.mode&1)!==0)for(pr=w,z=w.child;z!==null;){for(_=pr=z;pr!==null;){Se=pr;var et=Se.child;switch(Se.tag){case 0:case 11:case 14:case 15:kd(4,Se,Se.return);break;case 1:Vn(Se,Se.return);var St=Se.stateNode;if(typeof St.componentWillUnmount=="function"){var sr=Se,Nr=Se.return;try{var an=sr;St.props=an.memoizedProps,St.state=an.memoizedState,St.componentWillUnmount()}catch(xr){gs(sr,Nr,xr)}}break;case 5:Vn(Se,Se.return);break;case 22:if(Se.memoizedState!==null){Pg(_);continue}}et!==null?(et.return=Se,pr=et):Pg(_)}z=z.sibling}if(Te){e:if(z=null,Te)for(_=w;;){if(_.tag===5){if(z===null){z=_;try{Y=_.stateNode,F?Tr(Y):ve(_.stateNode,_.memoizedProps)}catch(xr){gs(w,w.return,xr)}}}else if(_.tag===6){if(z===null)try{se=_.stateNode,F?gr(se):Fe(se,_.memoizedProps)}catch(xr){gs(w,w.return,xr)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===w)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===w)break e;for(;_.sibling===null;){if(_.return===null||_.return===w)break e;z===_&&(z=null),_=_.return}z===_&&(z=null),_.sibling.return=_.return,_=_.sibling}}}break;case 19:Yo(_,w),Ao(w),z&4&&Cd(w);break;case 21:break;default:Yo(_,w),Ao(w)}}function Ao(w){var _=w.flags;if(_&2){try{if(Te){e:{for(var F=w.return;F!==null;){if(ax(F)){var z=F;break e}F=F.return}throw Error(i(160))}switch(z.tag){case 5:var Y=z.stateNode;z.flags&32&&(zr(Y),z.flags&=-33);var se=Td(w);ix(w,se,Y);break;case 3:case 4:var Se=z.stateNode.containerInfo,et=Td(w);bh(w,et,Se);break;default:throw Error(i(161))}}}catch(St){gs(w,w.return,St)}w.flags&=-3}_&4096&&(w.flags&=-4097)}function z0(w,_,F){pr=w,Ag(w)}function Ag(w,_,F){for(var z=(w.mode&1)!==0;pr!==null;){var Y=pr,se=Y.child;if(Y.tag===22&&z){var Se=Y.memoizedState!==null||B0;if(!Se){var et=Y.alternate,St=et!==null&&et.memoizedState!==null||Da;et=B0;var sr=Da;if(B0=Se,(Da=St)&&!sr)for(pr=Y;pr!==null;)Se=pr,St=Se.child,Se.tag===22&&Se.memoizedState!==null?Mg(Y):St!==null?(St.return=Se,pr=St):Mg(Y);for(;se!==null;)pr=se,Ag(se),se=se.sibling;pr=Y,B0=et,Da=sr}jg(w)}else(Y.subtreeFlags&8772)!==0&&se!==null?(se.return=Y,pr=se):jg(w)}}function jg(w){for(;pr!==null;){var _=pr;if((_.flags&8772)!==0){var F=_.alternate;try{if((_.flags&8772)!==0)switch(_.tag){case 0:case 11:case 15:Da||$0(5,_);break;case 1:var z=_.stateNode;if(_.flags&4&&!Da)if(F===null)z.componentDidMount();else{var Y=_.elementType===_.type?F.memoizedProps:To(_.type,F.memoizedProps);z.componentDidUpdate(Y,F.memoizedState,z.__reactInternalSnapshotBeforeUpdate)}var se=_.updateQueue;se!==null&&J2(_,se,z);break;case 3:var Se=_.updateQueue;if(Se!==null){if(F=null,_.child!==null)switch(_.child.tag){case 5:F=ne(_.child.stateNode);break;case 1:F=_.child.stateNode}J2(_,Se,F)}break;case 5:var et=_.stateNode;F===null&&_.flags&4&&nt(et,_.type,_.memoizedProps,_);break;case 6:break;case 4:break;case 12:break;case 13:if(xe&&_.memoizedState===null){var St=_.alternate;if(St!==null){var sr=St.memoizedState;if(sr!==null){var Nr=sr.dehydrated;Nr!==null&&me(Nr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Da||_.flags&512&&Eg(_)}catch(an){gs(_,_.return,an)}}if(_===w){pr=null;break}if(F=_.sibling,F!==null){F.return=_.return,pr=F;break}pr=_.return}}function Pg(w){for(;pr!==null;){var _=pr;if(_===w){pr=null;break}var F=_.sibling;if(F!==null){F.return=_.return,pr=F;break}pr=_.return}}function Mg(w){for(;pr!==null;){var _=pr;try{switch(_.tag){case 0:case 11:case 15:var F=_.return;try{$0(4,_)}catch(St){gs(_,F,St)}break;case 1:var z=_.stateNode;if(typeof z.componentDidMount=="function"){var Y=_.return;try{z.componentDidMount()}catch(St){gs(_,Y,St)}}var se=_.return;try{Eg(_)}catch(St){gs(_,se,St)}break;case 5:var Se=_.return;try{Eg(_)}catch(St){gs(_,Se,St)}}}catch(St){gs(_,_.return,St)}if(_===w){pr=null;break}var et=_.sibling;if(et!==null){et.return=_.return,pr=et;break}pr=_.return}}var Rc=0,Fi=1,Vl=2,U0=3,Sh=4;if(typeof Symbol=="function"&&Symbol.for){var jo=Symbol.for;Rc=jo("selector.component"),Fi=jo("selector.has_pseudo_class"),Vl=jo("selector.role"),U0=jo("selector.test_id"),Sh=jo("selector.text")}function ql(w){var _=Ae(w);if(_!=null){if(typeof _.memoizedProps["data-testname"]!="string")throw Error(i(364));return _}if(w=pt(w),w===null)throw Error(i(362));return w.stateNode.current}function kh(w,_){switch(_.$$typeof){case Rc:if(w.type===_.value)return!0;break;case Fi:e:{_=_.value,w=[w,0];for(var F=0;F<w.length;){var z=w[F++],Y=w[F++],se=_[Y];if(z.tag!==5||!qt(z)){for(;se!=null&&kh(z,se);)Y++,se=_[Y];if(Y===_.length){_=!0;break e}else for(z=z.child;z!==null;)w.push(z,Y),z=z.sibling}}_=!1}return _;case Vl:if(w.tag===5&&Jt(w.stateNode,_.value))return!0;break;case Sh:if((w.tag===5||w.tag===6)&&(w=_t(w),w!==null&&0<=w.indexOf(_.value)))return!0;break;case U0:if(w.tag===5&&(w=w.memoizedProps["data-testname"],typeof w=="string"&&w.toLowerCase()===_.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function Fg(w){switch(w.$$typeof){case Rc:return"<"+(M(w.value)||"Unknown")+">";case Fi:return":has("+(Fg(w)||"")+")";case Vl:return'[role="'+w.value+'"]';case Sh:return'"'+w.value+'"';case U0:return'[data-testname="'+w.value+'"]';default:throw Error(i(365))}}function Kl(w,_){var F=[];w=[w,0];for(var z=0;z<w.length;){var Y=w[z++],se=w[z++],Se=_[se];if(Y.tag!==5||!qt(Y)){for(;Se!=null&&kh(Y,Se);)se++,Se=_[se];if(se===_.length)F.push(Y);else for(Y=Y.child;Y!==null;)w.push(Y,se),Y=Y.sibling}}return F}function Yl(w,_){if(!kt)throw Error(i(363));w=ql(w),w=Kl(w,_),_=[],w=Array.from(w);for(var F=0;F<w.length;){var z=w[F++];if(z.tag===5)qt(z)||_.push(z.stateNode);else for(z=z.child;z!==null;)w.push(z),z=z.sibling}return _}var Dg=Math.ceil,Th=o.ReactCurrentDispatcher,W0=o.ReactCurrentOwner,Os=o.ReactCurrentBatchConfig,fn=0,Zn=null,_s=null,Ws=0,wa=0,Tu=An(0),Ss=0,H0=null,Lc=0,ls=0,G0=0,Ed=null,ui=null,V0=0,Ch=1/0,Di=null;function Xn(){Ch=vs()+500}var Is=!1,Zs=null,bl=null,Cu=!1,Xo=null,Og=0,ea=0,Eh=null,q0=-1,K0=0;function ms(){return(fn&6)!==0?vs():q0!==-1?q0:q0=vs()}function ba(w){return(w.mode&1)===0?1:(fn&2)!==0&&Ws!==0?Ws&-Ws:W3.transition!==null?(K0===0&&(K0=Lt()),K0):(w=zt,w!==0?w:Je())}function di(w,_,F,z){if(50<ea)throw ea=0,Eh=null,Error(i(185));bn(w,F,z),((fn&2)===0||w!==Zn)&&(w===Zn&&((fn&2)===0&&(ls|=F),Ss===4&&Bc(w,Ws)),fi(w,z),F===1&&fn===0&&(_.mode&1)===0&&(Xn(),E0&&Va()))}function fi(w,_){var F=w.callbackNode;At(w,_);var z=yt(w,w===Zn?Ws:0);if(z===0)F!==null&&dn(F),w.callbackNode=null,w.callbackPriority=0;else if(_=z&-z,w.callbackPriority!==_){if(F!=null&&dn(F),_===1)w.tag===0?z2(ox.bind(null,w)):sg(ox.bind(null,w)),It?it(function(){(fn&6)===0&&Va()}):sn(Ei,Va),F=null;else{switch(Gn(z)){case 1:F=Ei;break;case 4:F=cu;break;case 16:F=rg;break;case 536870912:F=U3;break;default:F=rg}F=mx(F,Ig.bind(null,w))}w.callbackPriority=_,w.callbackNode=F}}function Ig(w,_){if(q0=-1,K0=0,(fn&6)!==0)throw Error(i(327));var F=w.callbackNode;if($c()&&w.callbackNode!==F)return null;var z=yt(w,w===Zn?Ws:0);if(z===0)return null;if((z&30)!==0||(z&w.expiredLanes)!==0||_)_=Nd(w,z);else{_=z;var Y=fn;fn|=2;var se=cx();(Zn!==w||Ws!==_)&&(Di=null,Xn(),Eu(w,_));do try{ux();break}catch(et){Y0(w,et)}while(!0);R1(),Th.current=se,fn=Y,_s!==null?_=0:(Zn=null,Ws=0,_=Ss)}if(_!==0){if(_===2&&(Y=Rr(w),Y!==0&&(z=Y,_=Rg(w,Y))),_===1)throw F=H0,Eu(w,0),Bc(w,z),fi(w,vs()),F;if(_===6)Bc(w,z);else{if(Y=w.current.alternate,(z&30)===0&&!cw(Y)&&(_=Nd(w,z),_===2&&(se=Rr(w),se!==0&&(z=se,_=Rg(w,se))),_===1))throw F=H0,Eu(w,0),Bc(w,z),fi(w,vs()),F;switch(w.finishedWork=Y,w.finishedLanes=z,_){case 0:case 1:throw Error(i(345));case 2:Nu(w,ui,Di);break;case 3:if(Bc(w,z),(z&130023424)===z&&(_=V0+500-vs(),10<_)){if(yt(w,0)!==0)break;if(Y=w.suspendedLanes,(Y&z)!==z){ms(),w.pingedLanes|=w.suspendedLanes&Y;break}w.timeoutHandle=J(Nu.bind(null,w,ui,Di),_);break}Nu(w,ui,Di);break;case 4:if(Bc(w,z),(z&4194240)===z)break;for(_=w.eventTimes,Y=-1;0<z;){var Se=31-jn(z);se=1<<Se,Se=_[Se],Se>Y&&(Y=Se),z&=~se}if(z=Y,z=vs()-z,z=(120>z?120:480>z?480:1080>z?1080:1920>z?1920:3e3>z?3e3:4320>z?4320:1960*Dg(z/1960))-z,10<z){w.timeoutHandle=J(Nu.bind(null,w,ui,Di),z);break}Nu(w,ui,Di);break;case 5:Nu(w,ui,Di);break;default:throw Error(i(329))}}}return fi(w,vs()),w.callbackNode===F?Ig.bind(null,w):null}function Rg(w,_){var F=Ed;return w.current.memoizedState.isDehydrated&&(Eu(w,_).flags|=256),w=Nd(w,_),w!==2&&(_=ui,ui=F,_!==null&&Lg(_)),w}function Lg(w){ui===null?ui=w:ui.push.apply(ui,w)}function cw(w){for(var _=w;;){if(_.flags&16384){var F=_.updateQueue;if(F!==null&&(F=F.stores,F!==null))for(var z=0;z<F.length;z++){var Y=F[z],se=Y.getSnapshot;Y=Y.value;try{if(!gl(se(),Y))return!1}catch{return!1}}}if(F=_.child,_.subtreeFlags&16384&&F!==null)F.return=_,_=F;else{if(_===w)break;for(;_.sibling===null;){if(_.return===null||_.return===w)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function Bc(w,_){for(_&=~G0,_&=~ls,w.suspendedLanes|=_,w.pingedLanes&=~_,w=w.expirationTimes;0<_;){var F=31-jn(_),z=1<<F;w[F]=-1,_&=~z}}function ox(w){if((fn&6)!==0)throw Error(i(327));$c();var _=yt(w,0);if((_&1)===0)return fi(w,vs()),null;var F=Nd(w,_);if(w.tag!==0&&F===2){var z=Rr(w);z!==0&&(_=z,F=Rg(w,z))}if(F===1)throw F=H0,Eu(w,0),Bc(w,_),fi(w,vs()),F;if(F===6)throw Error(i(345));return w.finishedWork=w.current.alternate,w.finishedLanes=_,Nu(w,ui,Di),fi(w,vs()),null}function lx(w){Xo!==null&&Xo.tag===0&&(fn&6)===0&&$c();var _=fn;fn|=1;var F=Os.transition,z=zt;try{if(Os.transition=null,zt=1,w)return w()}finally{zt=z,Os.transition=F,fn=_,(fn&6)===0&&Va()}}function Bg(){wa=Tu.current,mn(Tu)}function Eu(w,_){w.finishedWork=null,w.finishedLanes=0;var F=w.timeoutHandle;if(F!==ue&&(w.timeoutHandle=ue,le(F)),_s!==null)for(F=_s.return;F!==null;){var z=F;switch(oh(z),z.tag){case 1:z=z.type.childContextTypes,z!=null&&_e();break;case 3:ud(),mn(ds),mn(Mn),W1();break;case 5:z1(z);break;case 4:ud();break;case 13:mn(Ts);break;case 19:mn(Ts);break;case 10:ch(z.type._context);break;case 22:case 23:Bg()}F=F.return}if(Zn=w,_s=w=Au(w.current,null),Ws=wa=_,Ss=0,H0=null,G0=ls=Lc=0,ui=Ed=null,fu!==null){for(_=0;_<fu.length;_++)if(F=fu[_],z=F.interleaved,z!==null){F.interleaved=null;var Y=z.next,se=F.pending;if(se!==null){var Se=se.next;se.next=Y,z.next=Se}F.pending=z}fu=null}return w}function Y0(w,_){do{var F=_s;try{if(R1(),to.current=xd,F0){for(var z=ws.memoizedState;z!==null;){var Y=z.queue;Y!==null&&(Y.pending=null),z=z.next}F0=!1}if(pu=0,ya=Qs=ws=null,dh=!1,fh=0,W0.current=null,F===null||F.return===null){Ss=1,H0=_,_s=null;break}e:{var se=w,Se=F.return,et=F,St=_;if(_=Ws,et.flags|=32768,St!==null&&typeof St=="object"&&typeof St.then=="function"){var sr=St,Nr=et,an=Nr.tag;if((Nr.mode&1)===0&&(an===0||an===11||an===15)){var xr=Nr.alternate;xr?(Nr.updateQueue=xr.updateQueue,Nr.memoizedState=xr.memoizedState,Nr.lanes=xr.lanes):(Nr.updateQueue=null,Nr.memoizedState=null)}var cs=aw(Se);if(cs!==null){cs.flags&=-257,vu(cs,Se,et,se,_),cs.mode&1&&sw(se,sr,_),_=cs,St=sr;var qn=_.updateQueue;if(qn===null){var Oi=new Set;Oi.add(St),_.updateQueue=Oi}else qn.add(St);break e}else{if((_&1)===0){sw(se,sr,_),X0();break e}St=Error(i(426))}}else if(hs&&et.mode&1){var Xl=aw(Se);if(Xl!==null){(Xl.flags&65536)===0&&(Xl.flags|=256),vu(Xl,Se,et,se,_),O1(yd(St,et));break e}}se=St=yd(St,et),Ss!==4&&(Ss=2),Ed===null?Ed=[se]:Ed.push(se),se=Se;do{switch(se.tag){case 3:se.flags|=65536,_&=-_,se.lanes|=_;var vt=Wl(se,St,_);P0(se,vt);break e;case 1:et=St;var at=se.type,Et=se.stateNode;if((se.flags&128)===0&&(typeof at.getDerivedStateFromError=="function"||Et!==null&&typeof Et.componentDidCatch=="function"&&(bl===null||!bl.has(Et)))){se.flags|=65536,_&=-_,se.lanes|=_;var yr=Sg(se,et,_);P0(se,yr);break e}}se=se.return}while(se!==null)}fx(F)}catch(Br){_=Br,_s===F&&F!==null&&(_s=F=F.return);continue}break}while(!0)}function cx(){var w=Th.current;return Th.current=xd,w===null?xd:w}function X0(){(Ss===0||Ss===3||Ss===2)&&(Ss=4),Zn===null||(Lc&268435455)===0&&(ls&268435455)===0||Bc(Zn,Ws)}function Nd(w,_){var F=fn;fn|=2;var z=cx();(Zn!==w||Ws!==_)&&(Di=null,Eu(w,_));do try{uw();break}catch(Y){Y0(w,Y)}while(!0);if(R1(),fn=F,Th.current=z,_s!==null)throw Error(i(261));return Zn=null,Ws=0,Ss}function uw(){for(;_s!==null;)dx(_s)}function ux(){for(;_s!==null&&!ys();)dx(_s)}function dx(w){var _=gw(w.alternate,w,wa);w.memoizedProps=w.pendingProps,_===null?fx(w):_s=_,W0.current=null}function fx(w){var _=w;do{var F=_.alternate;if(w=_.return,(_.flags&32768)===0){if(F=Sd(F,_,wa),F!==null){_s=F;return}}else{if(F=ow(F,_),F!==null){F.flags&=32767,_s=F;return}if(w!==null)w.flags|=32768,w.subtreeFlags=0,w.deletions=null;else{Ss=6,_s=null;return}}if(_=_.sibling,_!==null){_s=_;return}_s=_=w}while(_!==null);Ss===0&&(Ss=5)}function Nu(w,_,F){var z=zt,Y=Os.transition;try{Os.transition=null,zt=1,dw(w,_,F,z)}finally{Os.transition=Y,zt=z}return null}function dw(w,_,F,z){do $c();while(Xo!==null);if((fn&6)!==0)throw Error(i(327));F=w.finishedWork;var Y=w.finishedLanes;if(F===null)return null;if(w.finishedWork=null,w.finishedLanes=0,F===w.current)throw Error(i(177));w.callbackNode=null,w.callbackPriority=0;var se=F.lanes|F.childLanes;if(st(w,se),w===Zn&&(_s=Zn=null,Ws=0),(F.subtreeFlags&2064)===0&&(F.flags&2064)===0||Cu||(Cu=!0,mx(rg,function(){return $c(),null})),se=(F.flags&15990)!==0,(F.subtreeFlags&15990)!==0||se){se=Os.transition,Os.transition=null;var Se=zt;zt=1;var et=fn;fn|=4,W0.current=null,lw(w,F),_h(F,w),H(w.containerInfo),w.current=F,z0(F),kn(),fn=et,zt=Se,Os.transition=se}else w.current=F;if(Cu&&(Cu=!1,Xo=w,Og=Y),se=w.pendingLanes,se===0&&(bl=null),C0(F.stateNode),fi(w,vs()),_!==null)for(z=w.onRecoverableError,F=0;F<_.length;F++)Y=_[F],z(Y.value,{componentStack:Y.stack,digest:Y.digest});if(Is)throw Is=!1,w=Zs,Zs=null,w;return(Og&1)!==0&&w.tag!==0&&$c(),se=w.pendingLanes,(se&1)!==0?w===Eh?ea++:(ea=0,Eh=w):ea=0,Va(),null}function $c(){if(Xo!==null){var w=Gn(Og),_=Os.transition,F=zt;try{if(Os.transition=null,zt=16>w?16:w,Xo===null)var z=!1;else{if(w=Xo,Xo=null,Og=0,(fn&6)!==0)throw Error(i(331));var Y=fn;for(fn|=4,pr=w.current;pr!==null;){var se=pr,Se=se.child;if((pr.flags&16)!==0){var et=se.deletions;if(et!==null){for(var St=0;St<et.length;St++){var sr=et[St];for(pr=sr;pr!==null;){var Nr=pr;switch(Nr.tag){case 0:case 11:case 15:kd(8,Nr,se)}var an=Nr.child;if(an!==null)an.return=Nr,pr=an;else for(;pr!==null;){Nr=pr;var xr=Nr.sibling,cs=Nr.return;if(wh(Nr),Nr===sr){pr=null;break}if(xr!==null){xr.return=cs,pr=xr;break}pr=cs}}}var qn=se.alternate;if(qn!==null){var Oi=qn.child;if(Oi!==null){qn.child=null;do{var Xl=Oi.sibling;Oi.sibling=null,Oi=Xl}while(Oi!==null)}}pr=se}}if((se.subtreeFlags&2064)!==0&&Se!==null)Se.return=se,pr=Se;else e:for(;pr!==null;){if(se=pr,(se.flags&2048)!==0)switch(se.tag){case 0:case 11:case 15:kd(9,se,se.return)}var vt=se.sibling;if(vt!==null){vt.return=se.return,pr=vt;break e}pr=se.return}}var at=w.current;for(pr=at;pr!==null;){Se=pr;var Et=Se.child;if((Se.subtreeFlags&2064)!==0&&Et!==null)Et.return=Se,pr=Et;else e:for(Se=at;pr!==null;){if(et=pr,(et.flags&2048)!==0)try{switch(et.tag){case 0:case 11:case 15:$0(9,et)}}catch(Br){gs(et,et.return,Br)}if(et===Se){pr=null;break e}var yr=et.sibling;if(yr!==null){yr.return=et.return,pr=yr;break e}pr=et.return}}if(fn=Y,Va(),Zi&&typeof Zi.onPostCommitFiberRoot=="function")try{Zi.onPostCommitFiberRoot(uu,w)}catch{}z=!0}return z}finally{zt=F,Os.transition=_}}return!1}function hx(w,_,F){_=yd(F,_),_=Wl(w,_,1),w=Fc(w,_,1),_=ms(),w!==null&&(bn(w,1,_),fi(w,_))}function gs(w,_,F){if(w.tag===3)hx(w,w,F);else for(;_!==null;){if(_.tag===3){hx(_,w,F);break}else if(_.tag===1){var z=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof z.componentDidCatch=="function"&&(bl===null||!bl.has(z))){w=yd(F,w),w=Sg(_,w,1),_=Fc(_,w,1),w=ms(),_!==null&&(bn(_,1,w),fi(_,w));break}}_=_.return}}function fw(w,_,F){var z=w.pingCache;z!==null&&z.delete(_),_=ms(),w.pingedLanes|=w.suspendedLanes&F,Zn===w&&(Ws&F)===F&&(Ss===4||Ss===3&&(Ws&130023424)===Ws&&500>vs()-V0?Eu(w,0):G0|=F),fi(w,_)}function hw(w,_){_===0&&((w.mode&1)===0?_=1:(_=Ln,Ln<<=1,(Ln&130023424)===0&&(Ln=4194304)));var F=ms();w=vl(w,_),w!==null&&(bn(w,_,F),fi(w,F))}function mw(w){var _=w.memoizedState,F=0;_!==null&&(F=_.retryLane),hw(w,F)}function V3(w,_){var F=0;switch(w.tag){case 13:var z=w.stateNode,Y=w.memoizedState;Y!==null&&(F=Y.retryLane);break;case 19:z=w.stateNode;break;default:throw Error(i(314))}z!==null&&z.delete(_),hw(w,F)}var gw;gw=function(w,_,F){if(w!==null)if(w.memoizedProps!==_.pendingProps||ds.current)va=!0;else{if((w.lanes&F)===0&&(_.flags&128)===0)return va=!1,bu(w,_,F);va=(w.flags&131072)!==0}else va=!1,hs&&(_.flags&1048576)!==0&&U2(_,ad,_.index);switch(_.lanes=0,_.tag){case 2:var z=_.type;vh(w,_),w=_.pendingProps;var Y=pa(_,Mn.current);j0(_,F),Y=hh(null,_,z,w,Y,F);var se=mg();return _.flags|=1,typeof Y=="object"&&Y!==null&&typeof Y.render=="function"&&Y.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,Hn(z)?(se=!0,Yr(_)):se=!1,_.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,B1(_),Y.updater=ph,_.stateNode=Y,Y._reactInternals=_,Ul(_,z,w,F),_=li(null,_,z,!0,se,F)):(_.tag=0,hs&&se&&ih(_),Fa(null,_,Y,F),_=_.child),_;case 16:z=_.elementType;e:{switch(vh(w,_),w=_.pendingProps,Y=z._init,z=Y(z._payload),_.type=z,Y=_.tag=q3(z),w=To(z,w),Y){case 0:_=Hl(null,_,z,w,F);break e;case 1:_=Ya(null,_,z,w,F);break e;case 11:_=kg(null,_,z,w,F);break e;case 14:_=vd(null,_,z,To(z.type,w),F);break e}throw Error(i(306,z,""))}return _;case 0:return z=_.type,Y=_.pendingProps,Y=_.elementType===z?Y:To(z,Y),Hl(w,_,z,Y,F);case 1:return z=_.type,Y=_.pendingProps,Y=_.elementType===z?Y:To(z,Y),Ya(w,_,z,Y,F);case 3:e:{if(wu(_),w===null)throw Error(i(387));z=_.pendingProps,se=_.memoizedState,Y=se.element,X2(w,_),hu(_,z,null,F);var Se=_.memoizedState;if(z=Se.element,xe&&se.isDehydrated)if(se={element:z,isDehydrated:!1,cache:Se.cache,pendingSuspenseBoundaries:Se.pendingSuspenseBoundaries,transitions:Se.transitions},_.updateQueue.baseState=se,_.memoizedState=se,_.flags&256){Y=yd(Error(i(423)),_),_=wd(w,_,z,F,Y);break e}else if(z!==Y){Y=yd(Error(i(424)),_),_=wd(w,_,z,F,Y);break e}else for(xe&&(Ai=pe(_.stateNode.containerInfo),qa=_,hs=!0,yl=null,lh=!1),F=K2(_,null,z,F),_.child=F;F;)F.flags=F.flags&-3|4096,F=F.sibling;else{if(id(),z===Y){_=Ic(w,_,F);break e}Fa(w,_,z,F)}_=_.child}return _;case 5:return $1(_),w===null&&D1(_),z=_.type,Y=_.pendingProps,se=w!==null?w.memoizedProps:null,Se=Y.children,Z(z,Y)?Se=null:se!==null&&Z(z,se)&&(_.flags|=32),Qn(w,_),Fa(w,_,Se,F),_.child;case 6:return w===null&&D1(_),null;case 13:return nx(w,_,F);case 4:return fg(_,_.stateNode.containerInfo),z=_.pendingProps,w===null?_.child=ld(_,null,z,F):Fa(w,_,z,F),_.child;case 11:return z=_.type,Y=_.pendingProps,Y=_.elementType===z?Y:To(z,Y),kg(w,_,z,Y,F);case 7:return Fa(w,_,_.pendingProps,F),_.child;case 8:return Fa(w,_,_.pendingProps.children,F),_.child;case 12:return Fa(w,_,_.pendingProps.children,F),_.child;case 10:e:{if(z=_.type._context,Y=_.pendingProps,se=_.memoizedProps,Se=Y.value,Y2(_,z,Se),se!==null)if(gl(se.value,Se)){if(se.children===Y.children&&!ds.current){_=Ic(w,_,F);break e}}else for(se=_.child,se!==null&&(se.return=_);se!==null;){var et=se.dependencies;if(et!==null){Se=se.child;for(var St=et.firstContext;St!==null;){if(St.context===z){if(se.tag===1){St=Mc(-1,F&-F),St.tag=2;var sr=se.updateQueue;if(sr!==null){sr=sr.shared;var Nr=sr.pending;Nr===null?St.next=St:(St.next=Nr.next,Nr.next=St),sr.pending=St}}se.lanes|=F,St=se.alternate,St!==null&&(St.lanes|=F),cd(se.return,F,_),et.lanes|=F;break}St=St.next}}else if(se.tag===10)Se=se.type===_.type?null:se.child;else if(se.tag===18){if(Se=se.return,Se===null)throw Error(i(341));Se.lanes|=F,et=Se.alternate,et!==null&&(et.lanes|=F),cd(Se,F,_),Se=se.sibling}else Se=se.child;if(Se!==null)Se.return=se;else for(Se=se;Se!==null;){if(Se===_){Se=null;break}if(se=Se.sibling,se!==null){se.return=Se.return,Se=se;break}Se=Se.return}se=Se}Fa(w,_,Y.children,F),_=_.child}return _;case 9:return Y=_.type,z=_.pendingProps.children,j0(_,F),Y=_o(Y),z=z(Y),_.flags|=1,Fa(w,_,z,F),_.child;case 14:return z=_.type,Y=To(z,_.pendingProps),Y=To(z.type,Y),vd(w,_,z,Y,F);case 15:return Oc(w,_,_.type,_.pendingProps,F);case 17:return z=_.type,Y=_.pendingProps,Y=_.elementType===z?Y:To(z,Y),vh(w,_),_.tag=1,Hn(z)?(w=!0,Yr(_)):w=!1,j0(_,F),nw(_,z,Y),Ul(_,z,Y,F),li(null,_,z,!0,w,F);case 19:return Cg(w,_,F);case 22:return os(w,_,F)}throw Error(i(156,_.tag))};function mx(w,_){return sn(w,_)}function pw(w,_,F,z){this.tag=w,this.key=F,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=z,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Po(w,_,F,z){return new pw(w,_,F,z)}function J0(w){return w=w.prototype,!(!w||!w.isReactComponent)}function q3(w){if(typeof w=="function")return J0(w)?1:0;if(w!=null){if(w=w.$$typeof,w===y)return 11;if(w===k)return 14}return 2}function Au(w,_){var F=w.alternate;return F===null?(F=Po(w.tag,_,w.key,w.mode),F.elementType=w.elementType,F.type=w.type,F.stateNode=w.stateNode,F.alternate=w,w.alternate=F):(F.pendingProps=_,F.type=w.type,F.flags=0,F.subtreeFlags=0,F.deletions=null),F.flags=w.flags&14680064,F.childLanes=w.childLanes,F.lanes=w.lanes,F.child=w.child,F.memoizedProps=w.memoizedProps,F.memoizedState=w.memoizedState,F.updateQueue=w.updateQueue,_=w.dependencies,F.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},F.sibling=w.sibling,F.index=w.index,F.ref=w.ref,F}function $g(w,_,F,z,Y,se){var Se=2;if(z=w,typeof w=="function")J0(w)&&(Se=1);else if(typeof w=="string")Se=5;else e:switch(w){case d:return Xa(F.children,Y,se,_);case f:Se=8,Y|=8;break;case h:return w=Po(12,F,_,Y|2),w.elementType=h,w.lanes=se,w;case v:return w=Po(13,F,_,Y),w.elementType=v,w.lanes=se,w;case T:return w=Po(19,F,_,Y),w.elementType=T,w.lanes=se,w;case N:return Q0(F,Y,se,_);default:if(typeof w=="object"&&w!==null)switch(w.$$typeof){case g:Se=10;break e;case x:Se=9;break e;case y:Se=11;break e;case k:Se=14;break e;case b:Se=16,z=null;break e}throw Error(i(130,w==null?w:typeof w,""))}return _=Po(Se,F,_,Y),_.elementType=w,_.type=z,_.lanes=se,_}function Xa(w,_,F,z){return w=Po(7,w,z,_),w.lanes=F,w}function Q0(w,_,F,z){return w=Po(22,w,z,_),w.elementType=N,w.lanes=F,w.stateNode={isHidden:!1},w}function Z0(w,_,F){return w=Po(6,w,null,_),w.lanes=F,w}function zg(w,_,F){return _=Po(4,w.children!==null?w.children:[],w.key,_),_.lanes=F,_.stateNode={containerInfo:w.containerInfo,pendingChildren:null,implementation:w.implementation},_}function xw(w,_,F,z,Y){this.tag=_,this.containerInfo=w,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ue,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cn(0),this.expirationTimes=cn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cn(0),this.identifierPrefix=z,this.onRecoverableError=Y,xe&&(this.mutableSourceEagerHydrationData=null)}function gx(w,_,F,z,Y,se,Se,et,St){return w=new xw(w,_,F,et,St),_===1?(_=1,se===!0&&(_|=8)):_=0,se=Po(3,null,null,_),w.current=se,se.stateNode=w,se.memoizedState={element:z,isDehydrated:F,cache:null,transitions:null,pendingSuspenseBoundaries:null},B1(se),w}function Ug(w){if(!w)return Pa;w=w._reactInternals;e:{if(A(w)!==w||w.tag!==1)throw Error(i(170));var _=w;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(Hn(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(i(171))}if(w.tag===1){var F=w.type;if(Hn(F))return Ur(w,F,_)}return _}function Ad(w){var _=w._reactInternals;if(_===void 0)throw typeof w.render=="function"?Error(i(188)):(w=Object.keys(w).join(","),Error(i(268,w)));return w=q(_),w===null?null:w.stateNode}function Wg(w,_){if(w=w.memoizedState,w!==null&&w.dehydrated!==null){var F=w.retryLane;w.retryLane=F!==0&&F<_?F:_}}function ef(w,_){Wg(w,_),(w=w.alternate)&&Wg(w,_)}function K3(w){return w=q(w),w===null?null:w.stateNode}function yw(){return null}return r.attemptContinuousHydration=function(w){if(w.tag===13){var _=vl(w,134217728);if(_!==null){var F=ms();di(_,w,134217728,F)}ef(w,134217728)}},r.attemptDiscreteHydration=function(w){if(w.tag===13){var _=vl(w,1);if(_!==null){var F=ms();di(_,w,1,F)}ef(w,1)}},r.attemptHydrationAtCurrentPriority=function(w){if(w.tag===13){var _=ba(w),F=vl(w,_);if(F!==null){var z=ms();di(F,w,_,z)}ef(w,_)}},r.attemptSynchronousHydration=function(w){switch(w.tag){case 3:var _=w.stateNode;if(_.current.memoizedState.isDehydrated){var F=ct(_.pendingLanes);F!==0&&(cr(_,F|1),fi(_,vs()),(fn&6)===0&&(Xn(),Va()))}break;case 13:lx(function(){var z=vl(w,1);if(z!==null){var Y=ms();di(z,w,1,Y)}}),ef(w,1)}},r.batchedUpdates=function(w,_){var F=fn;fn|=1;try{return w(_)}finally{fn=F,fn===0&&(Xn(),E0&&Va())}},r.createComponentSelector=function(w){return{$$typeof:Rc,value:w}},r.createContainer=function(w,_,F,z,Y,se,Se){return gx(w,_,!1,null,F,z,Y,se,Se)},r.createHasPseudoClassSelector=function(w){return{$$typeof:Fi,value:w}},r.createHydrationContainer=function(w,_,F,z,Y,se,Se,et,St){return w=gx(F,z,!0,w,Y,se,Se,et,St),w.context=Ug(null),F=w.current,z=ms(),Y=ba(F),se=Mc(z,Y),se.callback=_??null,Fc(F,se,Y),w.current.lanes=Y,bn(w,Y,z),fi(w,z),w},r.createPortal=function(w,_,F){var z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:z==null?null:""+z,children:w,containerInfo:_,implementation:F}},r.createRoleSelector=function(w){return{$$typeof:Vl,value:w}},r.createTestNameSelector=function(w){return{$$typeof:U0,value:w}},r.createTextSelector=function(w){return{$$typeof:Sh,value:w}},r.deferredUpdates=function(w){var _=zt,F=Os.transition;try{return Os.transition=null,zt=16,w()}finally{zt=_,Os.transition=F}},r.discreteUpdates=function(w,_,F,z,Y){var se=zt,Se=Os.transition;try{return Os.transition=null,zt=1,w(_,F,z,Y)}finally{zt=se,Os.transition=Se,fn===0&&Xn()}},r.findAllNodes=Yl,r.findBoundingRects=function(w,_){if(!kt)throw Error(i(363));_=Yl(w,_),w=[];for(var F=0;F<_.length;F++)w.push(ut(_[F]));for(_=w.length-1;0<_;_--){F=w[_];for(var z=F.x,Y=z+F.width,se=F.y,Se=se+F.height,et=_-1;0<=et;et--)if(_!==et){var St=w[et],sr=St.x,Nr=sr+St.width,an=St.y,xr=an+St.height;if(z>=sr&&se>=an&&Y<=Nr&&Se<=xr){w.splice(_,1);break}else if(z!==sr||F.width!==St.width||xr<se||an>Se){if(!(se!==an||F.height!==St.height||Nr<z||sr>Y)){sr>z&&(St.width+=sr-z,St.x=z),Nr<Y&&(St.width=Y-sr),w.splice(_,1);break}}else{an>se&&(St.height+=an-se,St.y=se),xr<Se&&(St.height=Se-an),w.splice(_,1);break}}}return w},r.findHostInstance=Ad,r.findHostInstanceWithNoPortals=function(w){return w=L(w),w=w!==null?ae(w):null,w===null?null:w.stateNode},r.findHostInstanceWithWarning=function(w){return Ad(w)},r.flushControlled=function(w){var _=fn;fn|=1;var F=Os.transition,z=zt;try{Os.transition=null,zt=1,w()}finally{zt=z,Os.transition=F,fn=_,fn===0&&(Xn(),Va())}},r.flushPassiveEffects=$c,r.flushSync=lx,r.focusWithin=function(w,_){if(!kt)throw Error(i(363));for(w=ql(w),_=Kl(w,_),_=Array.from(_),w=0;w<_.length;){var F=_[w++];if(!qt(F)){if(F.tag===5&&Ht(F.stateNode))return!0;for(F=F.child;F!==null;)_.push(F),F=F.sibling}}return!1},r.getCurrentUpdatePriority=function(){return zt},r.getFindAllNodesFailureDescription=function(w,_){if(!kt)throw Error(i(363));var F=0,z=[];w=[ql(w),0];for(var Y=0;Y<w.length;){var se=w[Y++],Se=w[Y++],et=_[Se];if((se.tag!==5||!qt(se))&&(kh(se,et)&&(z.push(Fg(et)),Se++,Se>F&&(F=Se)),Se<_.length))for(se=se.child;se!==null;)w.push(se,Se),se=se.sibling}if(F<_.length){for(w=[];F<_.length;F++)w.push(Fg(_[F]));return`findAllNodes was able to match part of the selector:
  `+(z.join(" > ")+`

No matching component was found for:
  `)+w.join(" > ")}return null},r.getPublicRootInstance=function(w){if(w=w.current,!w.child)return null;switch(w.child.tag){case 5:return ne(w.child.stateNode);default:return w.child.stateNode}},r.injectIntoDevTools=function(w){if(w={bundleType:w.bundleType,version:w.version,rendererPackageName:w.rendererPackageName,rendererConfig:w.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:K3,findFiberByHostInstance:w.findFiberByHostInstance||yw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")w=!1;else{var _=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(_.isDisabled||!_.supportsFiber)w=!0;else{try{uu=_.inject(w),Zi=_}catch{}w=!!_.checkDCE}}return w},r.isAlreadyRendering=function(){return!1},r.observeVisibleRects=function(w,_,F,z){if(!kt)throw Error(i(363));w=Yl(w,_);var Y=$e(w,F,z).disconnect;return{disconnect:function(){Y()}}},r.registerMutableSourceForHydration=function(w,_){var F=_._getVersion;F=F(_._source),w.mutableSourceEagerHydrationData==null?w.mutableSourceEagerHydrationData=[_,F]:w.mutableSourceEagerHydrationData.push(_,F)},r.runWithPriority=function(w,_){var F=zt;try{return zt=w,_()}finally{zt=F}},r.shouldError=function(){return null},r.shouldSuspend=function(){return!1},r.updateContainer=function(w,_,F,z){var Y=_.current,se=ms(),Se=ba(Y);return F=Ug(F),_.context===null?_.context=F:_.pendingContext=F,_=Mc(se,Se),_.payload={element:w},z=z===void 0?null:z,z!==null&&(_.callback=z),w=Fc(Y,_,Se),w!==null&&(di(w,Y,Se,se),uh(w,Y,Se)),Se},r}),Y5}var dP;function qne(){return dP||(dP=1,K5.exports=Vne()),K5.exports}var Kne=qne();const Yne=Tc(Kne);var X5={exports:{}},uf={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fP;function Xne(){return fP||(fP=1,uf.ConcurrentRoot=1,uf.ContinuousEventPriority=4,uf.DefaultEventPriority=16,uf.DiscreteEventPriority=1,uf.IdleEventPriority=536870912,uf.LegacyRoot=0),uf}var hP;function Jne(){return hP||(hP=1,X5.exports=Xne()),X5.exports}var K$=Jne(),Qne=wn();const mP={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let gP=!1,pP=!1;const NT=".react-konva-event";let Y$=!1;function Zne(e){Y$=e}const ese=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,tse=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,rse={};function M_(e,t,r=rse){if(!gP&&"zIndex"in t&&(console.warn(tse),gP=!0),!pP&&t.draggable){var n=t.x!==void 0||t.y!==void 0,s=t.onDragEnd||t.onDragMove;n&&!s&&(console.warn(ese),pP=!0)}for(var a in r)if(!mP[a]){var i=a.slice(0,2)==="on",o=r[a]!==t[a];if(i&&o){var l=a.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),e.off(l,r[a])}var u=!t.hasOwnProperty(a);u&&e.setAttr(a,void 0)}var d=Y$||t._useStrictMode,f={},h=!1;const g={};for(var a in t)if(!mP[a]){var i=a.slice(0,2)==="on",x=r[a]!==t[a];if(i&&x){var l=a.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),t[a]&&(g[l]=t[a])}!i&&(t[a]!==r[a]||d&&t[a]!==e.getAttr(a))&&(h=!0,f[a]=t[a])}h&&(e.setAttrs(f),Vf(e));for(var l in g)e.on(l+NT,g[l])}function Vf(e){if(!Qne.Konva.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}var J5=B7();const X$={},nse={};hv.Node.prototype._applyProps=M_;function sse(e,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}e.add(t),Vf(e)}function ase(e,t,r){let n=hv[e];n||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),n=hv.Group);const s={},a={};for(var i in t){var o=i.slice(0,2)==="on";o?a[i]=t[i]:s[i]=t[i]}const l=new n(s);return M_(l,a),l}function ise(e,t,r){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)}function ose(e,t,r){return!1}function lse(e){return e}function cse(){return null}function use(){return null}function dse(e,t,r,n){return nse}function fse(){}function hse(e){}function mse(e,t){return!1}function gse(){return X$}function pse(){return X$}const xse=setTimeout,yse=clearTimeout,vse=-1;function wse(e,t){return!1}const bse=!1,_se=!0,Sse=!0;function kse(e,t){t.parent===e?t.moveToTop():e.add(t),Vf(e)}function Tse(e,t){t.parent===e?t.moveToTop():e.add(t),Vf(e)}function J$(e,t,r){t._remove(),e.add(t),t.setZIndex(r.getZIndex()),Vf(e)}function Cse(e,t,r){J$(e,t,r)}function Ese(e,t){t.destroy(),t.off(NT),Vf(e)}function Nse(e,t){t.destroy(),t.off(NT),Vf(e)}function Ase(e,t,r){console.error(`Text components are not yet supported in ReactKonva. You text is: "${r}"`)}function jse(e,t,r){}function Pse(e,t,r,n,s){M_(e,s,n)}function Mse(e){e.hide(),Vf(e)}function Fse(e){}function Dse(e,t){(t.visible==null||t.visible)&&e.show()}function Ose(e,t){}function Ise(e){}function Rse(){}const Lse=()=>K$.DefaultEventPriority,Bse=Object.freeze(Object.defineProperty({__proto__:null,appendChild:kse,appendChildToContainer:Tse,appendInitialChild:sse,cancelTimeout:yse,clearContainer:Ise,commitMount:jse,commitTextUpdate:Ase,commitUpdate:Pse,createInstance:ase,createTextInstance:ise,detachDeletedInstance:Rse,finalizeInitialChildren:ose,getChildHostContext:pse,getCurrentEventPriority:Lse,getPublicInstance:lse,getRootHostContext:gse,hideInstance:Mse,hideTextInstance:Fse,idlePriority:J5.unstable_IdlePriority,insertBefore:J$,insertInContainerBefore:Cse,isPrimaryRenderer:bse,noTimeout:vse,now:J5.unstable_now,prepareForCommit:cse,preparePortalMount:use,prepareUpdate:dse,removeChild:Ese,removeChildFromContainer:Nse,resetAfterCommit:fse,resetTextContent:hse,run:J5.unstable_runWithPriority,scheduleTimeout:xse,shouldDeprioritizeSubtree:mse,shouldSetTextContent:wse,supportsMutation:Sse,unhideInstance:Dse,unhideTextInstance:Ose,warnsIfNotActing:_se},Symbol.toStringTag,{value:"Module"}));var $se=Object.defineProperty,zse=Object.defineProperties,Use=Object.getOwnPropertyDescriptors,xP=Object.getOwnPropertySymbols,Wse=Object.prototype.hasOwnProperty,Hse=Object.prototype.propertyIsEnumerable,yP=(e,t,r)=>t in e?$se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vP=(e,t)=>{for(var r in t||(t={}))Wse.call(t,r)&&yP(e,r,t[r]);if(xP)for(var r of xP(t))Hse.call(t,r)&&yP(e,r,t[r]);return e},Gse=(e,t)=>zse(e,Use(t)),wP,bP;typeof window<"u"&&((wP=window.document)!=null&&wP.createElement||((bP=window.navigator)==null?void 0:bP.product)==="ReactNative")?S.useLayoutEffect:S.useEffect;function Q$(e,t,r){if(!e)return;if(r(e)===!0)return e;let n=e.child;for(;n;){const s=Q$(n,t,r);if(s)return s;n=n.sibling}}function Z$(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const _P=console.error;console.error=function(){const e=[...arguments].join("");if(e?.startsWith("Warning:")&&e.includes("useContext")){console.error=_P;return}return _P.apply(this,arguments)};const AT=Z$(S.createContext(null));class ez extends S.Component{render(){return S.createElement(AT.Provider,{value:this._reactInternals},this.props.children)}}function Vse(){const e=S.useContext(AT);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=S.useId();return S.useMemo(()=>{for(const n of[e,e?.alternate]){if(!n)continue;const s=Q$(n,!1,a=>{let i=a.memoizedState;for(;i;){if(i.memoizedState===t)return!0;i=i.next}});if(s)return s}},[e,t])}function qse(){const e=Vse(),[t]=S.useState(()=>new Map);t.clear();let r=e;for(;r;){if(r.type&&typeof r.type=="object"){const s=r.type._context===void 0&&r.type.Provider===r.type?r.type:r.type._context;s&&s!==AT&&!t.has(s)&&t.set(s,S.useContext(Z$(s)))}r=r.return}return t}function tz(){const e=qse();return S.useMemo(()=>Array.from(e.keys()).reduce((t,r)=>n=>S.createElement(t,null,S.createElement(r.Provider,Gse(vP({},n),{value:e.get(r)}))),t=>S.createElement(ez,vP({},t))),[e])}function Kse(e){const t=la.useRef({});return la.useLayoutEffect(()=>{t.current=e}),la.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const Yse=e=>{const t=la.useRef(null),r=la.useRef(null),n=la.useRef(null),s=Kse(e),a=tz(),i=o=>{const{forwardedRef:l}=e;l&&(typeof l=="function"?l(o):l.current=o)};return la.useLayoutEffect(()=>(r.current=new hv.Stage({width:e.width,height:e.height,container:t.current}),i(r.current),n.current=gp.createContainer(r.current,K$.LegacyRoot,!1,null),gp.updateContainer(la.createElement(a,{},e.children),n.current),()=>{hv.isBrowser&&(i(null),gp.updateContainer(null,n.current,null),r.current.destroy())}),[]),la.useLayoutEffect(()=>{i(r.current),M_(r.current,e,s),gp.updateContainer(la.createElement(a,{},e.children),n.current,null)}),la.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},gm="Layer",Xse="FastLayer",Qc="Group",Jse="Label",bi="Rect",Cf="Circle",Qse="Ellipse",Zse="Wedge",zi="Line",eae="Sprite",rz="Image",Lu="Text",tae="TextPath",rae="Star",nae="Ring",sae="Arc",aae="Tag",iae="Path",oae="RegularPolygon",Kk="Arrow",lae="Shape",nz="Transformer",cae="18.2.13",gp=Yne(Bse);gp.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:la.version,rendererPackageName:"react-konva"});const pm=la.forwardRef((e,t)=>la.createElement(ez,{},la.createElement(Yse,{...e,forwardedRef:t}))),uae=Zne,dae=Object.freeze(Object.defineProperty({__proto__:null,Arc:sae,Arrow:Kk,Circle:Cf,Ellipse:Qse,FastLayer:Xse,Group:Qc,Image:rz,KonvaRenderer:gp,Label:Jse,Layer:gm,Line:zi,Path:iae,Rect:bi,RegularPolygon:oae,Ring:nae,Shape:lae,Sprite:eae,Stage:pm,Star:rae,Tag:aae,Text:Lu,TextPath:tae,Transformer:nz,Wedge:Zse,useContextBridge:tz,useStrictMode:uae,version:cae},Symbol.toStringTag,{value:"Module"})),$t=({children:e,hover:t=!0,className:r="",paddingClass:n="p-6",...s})=>{const a=`
    bg-white rounded-xl shadow-md border border-gray-200 ${n}
    ${t?"hover:shadow-lg hover:-translate-y-1 transition-all duration-200":""}
    ${r}
  `;return c.jsx(ht.div,{className:a,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},...s,children:e})},fae=({children:e,className:t=""})=>c.jsx("div",{className:`border-b border-gray-200 pb-4 mb-4 ${t}`,children:e}),hae=({children:e,className:t=""})=>c.jsx("h3",{className:`text-xl font-semibold text-gray-800 ${t}`,children:e}),mae=({children:e,className:t=""})=>c.jsx("div",{className:`py-4 ${t}`,children:e}),gae=({children:e,className:t=""})=>c.jsx("div",{className:`border-t border-gray-200 pt-4 mt-4 ${t}`,children:e});$t.Header=fae;$t.Title=hae;$t.Body=mae;$t.Footer=gae;const $a=({isOpen:e=!1,onClose:t,title:r="",children:n,size:s="medium",showCloseButton:a=!0,closeOnBackdropClick:i=!0,className:o="",...l})=>{const u=f=>{i&&f.target===f.currentTarget&&t()};la.useEffect(()=>{const f=x=>{x.key==="Escape"&&t()},h=window;h.__modalOpenCount||(h.__modalOpenCount=0);let g;return e&&(document.addEventListener("keydown",f),g=document.body.style.overflow,h.__modalOpenCount===0&&(document.body.style.overflow="hidden"),h.__modalOpenCount+=1),()=>{document.removeEventListener("keydown",f),h.__modalOpenCount&&h.__modalOpenCount>0&&(h.__modalOpenCount-=1),h.__modalOpenCount===0&&(g!==void 0?document.body.style.overflow=g||"":document.body.style.overflow="")}},[e,t]);const d={small:"max-w-md",medium:"max-w-lg",large:"max-w-4xl"};return e?c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:u,role:"dialog","aria-modal":"true","aria-label":r,...l,children:c.jsxs("div",{className:`
          bg-white rounded-xl shadow-md border border-gray-200 p-8
          hover:shadow-lg hover:-translate-y-1 transition-all duration-200
          w-full ${d[s]} mx-auto
          ${o}
        `,onClick:f=>f.stopPropagation(),children:[(r||a)&&c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r&&c.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:r}),a&&c.jsx("button",{onClick:t,className:"text-red-500 hover:text-red-700 hover:bg-red-50 transition-all duration-200 rounded-full p-2 text-2xl font-bold leading-none","aria-label":"Close modal",children:""})]}),c.jsx("div",{className:"space-y-6",children:n})]})}):null},pae=e=>{const[t,r]=S.useState({width:800,height:600}),n=S.useRef(null),s=S.useCallback(()=>{if(e.current){e.current.getBoundingClientRect();const a=Math.min(1200,window.innerWidth*.8),i=Math.min(800,window.innerHeight*.6),o=4/3;let l=a,u=l/o;u>i&&(u=i,l=u*o),r({width:l,height:u})}},[e]);return S.useEffect(()=>(s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)),[s]),{canvasSize:t,stageRef:n,updateCanvasSize:s}},xae=e=>{const[t,r]=S.useState({width:800,height:600}),[n,s]=S.useState({}),a=S.useCallback(()=>{if(e.current){const o=e.current.getBoundingClientRect();r({width:o.width,height:Math.max(400,o.height)})}},[e]),i=S.useCallback(o=>o<480?{stageHeight:300,blockMinSize:50,fontSize:12,padding:10,touchTargetSize:44,arrowThickness:4}:o<768?{stageHeight:400,blockMinSize:60,fontSize:14,padding:15,touchTargetSize:44,arrowThickness:4}:o<1024?{stageHeight:500,blockMinSize:70,fontSize:16,padding:20,touchTargetSize:40,arrowThickness:3}:{stageHeight:600,blockMinSize:80,fontSize:18,padding:25,touchTargetSize:32,arrowThickness:2},[]);return S.useEffect(()=>{const o=i(t.width);s(o)},[t.width,i]),S.useEffect(()=>{a();const o=()=>{a()};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[a]),{containerSize:t,responsiveSettings:n,updateSize:a}},SP={convertToOriginal:(e,t,r)=>r?{x:Number(((e-r.x)/r.scale).toFixed(4)),y:Number(((t-r.y)/r.scale).toFixed(4))}:{x:e,y:t},convertToCanvas:(e,t,r)=>r?{x:Number((r.x+e*r.scale).toFixed(4)),y:Number((r.y+t*r.scale).toFixed(4))}:{x:e,y:t},isPointInImage:(e,t)=>t?e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height:!1,calculateImageScale:(e,t)=>{if(!e||!t)return 1;const r=40,n=t.width-r,s=t.height-r;return Math.min(n/e.width,s/e.height)},calculateImageInfo:(e,t)=>{if(!e||!t)return null;const r=40,n=t.width-r,s=t.height-r,a=Math.min(n/e.width,s/e.height),i=e.width*a,o=e.height*a,l=(t.width-i)/2,u=(t.height-o)/2;return{x:l,y:u,width:i,height:o,scale:a,originalWidth:e.width,originalHeight:e.height}}},yae=e=>{const t=S.useCallback((n,s)=>SP.convertToOriginal(n,s,e),[e]),r=S.useCallback((n,s)=>SP.convertToCanvas(n,s,e),[e]);return{convertToOriginal:t,convertToCanvas:r}},fy={create:(e,t,r,n,s)=>({id:s,x:e-r/2,y:t-n/2,width:Math.max(r,30),height:Math.max(n,10),fill:"rgba(0, 123, 255, 0.15)",stroke:"#007bff",strokeWidth:2,cornerRadius:6,shadowColor:"rgba(0, 123, 255, 0.3)",shadowBlur:10,shadowOffset:{x:0,y:2},shadowOpacity:.5}),validate:e=>e.width>0&&e.height>0,findAtPosition:(e,t,r)=>e.find(n=>t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height),generateId:()=>`block_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},np={create:(e,t,r,n,s,a,i)=>({id:i,startX:e,startY:t,endX:r,endY:n,startBlock:s,endBlock:a,stroke:"#dc3545",fill:"#dc3545",strokeWidth:3,pointerLength:10,pointerWidth:10}),snapToNearestBlock:(e,t,r,n=60)=>{let s=null,a=1/0;for(const i of r){const o=i.x+i.width/2,l=i.y+i.height/2,u=Math.sqrt(Math.pow(e-o,2)+Math.pow(t-l,2));u<=n&&u<a&&(a=u,s=i)}return s?{x:s.x+s.width/2,y:s.y+s.height/2,blockId:s.id,block:s,distance:a}:null},validate:(e,t,r,n,s)=>np.snapToNearestBlock(e,t,s)!==null,generateId:()=>`arrow_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},Q5={create:(e,t,r)=>({id:r,blockId:e,word:t}),update:(e,t,r)=>e.map(n=>n.blockId===t?{...n,word:r}:n),delete:(e,t)=>e.filter(r=>r.blockId!==t),generateId:e=>`word_${e}`,validate:e=>e&&e.trim().length>0},vae=async e=>{const t=[];if(e.size>512e3){const n=(e.size/1024).toFixed(1);t.push(`Image is too large (${n}KB). Maximum allowed size is 500KB. Please compress or resize your image.`)}return new Promise(n=>{const s=new Image;s.onload=()=>{(s.width>4e3||s.height>4e3)&&t.push(`Image is too large (${s.width}x${s.height} pixels). Maximum allowed dimensions are 4000x4000 pixels. Please resize your image.`),n({valid:t.length===0,errors:t,dimensions:{width:s.width,height:s.height}})},s.onerror=()=>{t.push("Invalid image file"),n({valid:!1,errors:t})},s.src=URL.createObjectURL(e)})},wae=(e,t=500)=>new Promise(r=>{const n=document.createElement("canvas"),s=n.getContext("2d"),a=new Image;a.onload=()=>{let{width:i,height:o}=a;const l=2e3;if(i>l||o>l){const f=Math.min(l/i,l/o);i*=f,o*=f}n.width=i,n.height=o,s.drawImage(a,0,0,i,o);let u=.8;const d=()=>{n.toBlob(f=>{f.size<=t*1024||u<=.1?r(f):(u-=.1,d())},"image/jpeg",u)};d()},a.onerror=()=>{r(e)},a.src=URL.createObjectURL(e)}),bae=e=>new Promise((t,r)=>{const n=new FileReader;n.onload=s=>t(s.target.result),n.onerror=s=>r(s),n.readAsDataURL(e)}),_ae=()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return{blockMinSize:e?60:40,arrowThickness:e?4:2,touchTargetSize:e?44:32,doubleTapDelay:e?300:200,isMobile:e}},Sae={testData:{blocks:[],words:[],arrows:[],imageUrl:null},canvas:{size:{width:800,height:600},image:null,imageInfo:null,selectedTool:"edit"},creation:{isCreatingBlock:!1,isDrawingArrow:!1,blockCreationStart:null,arrowStart:null,previewBlock:null,previewArrow:null},ui:{selectedBlock:null,showWordPanel:!1,isLoading:!1,error:null,showImageSizeModal:!1,imageSizeError:null}},kae=(e,t)=>{switch(t.type){case"SET_CANVAS_SIZE":return{...e,canvas:{...e.canvas,size:t.payload}};case"SET_IMAGE":return{...e,canvas:{...e.canvas,image:t.payload}};case"SET_IMAGE_INFO":return{...e,canvas:{...e.canvas,imageInfo:t.payload}};case"SET_SELECTED_TOOL":return{...e,canvas:{...e.canvas,selectedTool:t.payload}};case"ADD_BLOCK":return{...e,testData:{...e.testData,blocks:[...e.testData.blocks,t.payload]}};case"ADD_WORD":return{...e,testData:{...e.testData,words:[...e.testData.words,t.payload]}};case"ADD_ARROW":return{...e,testData:{...e.testData,arrows:[...e.testData.arrows,t.payload]}};case"UPDATE_BLOCK":return{...e,testData:{...e.testData,blocks:e.testData.blocks.map(r=>r.id===t.payload.id?{...r,...t.payload.updates}:r)}};case"DELETE_BLOCK":return{...e,testData:{...e.testData,blocks:e.testData.blocks.filter(r=>r.id!==t.payload),words:e.testData.words.filter(r=>r.blockId!==t.payload),arrows:e.testData.arrows.filter(r=>r.startBlock!==t.payload&&r.endBlock!==t.payload)}};case"UPDATE_WORDS":return{...e,testData:{...e.testData,words:t.payload}};case"SET_CREATION_STATE":return{...e,creation:{...e.creation,...t.payload}};case"SET_UI_STATE":return{...e,ui:{...e.ui,...t.payload}};case"SET_LOADING":return{...e,ui:{...e.ui,isLoading:t.payload}};case"SET_ERROR":return{...e,ui:{...e.ui,error:t.payload}};case"SHOW_IMAGE_SIZE_MODAL":return{...e,ui:{...e.ui,showImageSizeModal:!0,imageSizeError:t.payload}};case"HIDE_IMAGE_SIZE_MODAL":return{...e,ui:{...e.ui,showImageSizeModal:!1,imageSizeError:null}};case"RESET_TESTDATA":return{...e,testData:{blocks:[],words:[],arrows:[],imageUrl:e.testData.imageUrl}};default:return e}},Tae=({testName:e="",showQuestionCount:t=!0,onTestSaved:r,onCancel:n,onBackToCabinet:s,isSaving:a=!1,validationErrors:i={}})=>{const[o,l]=S.useReducer(kae,Sae),{showNotification:u}=ai(),{makeAuthenticatedRequest:d}=Bl(),{user:f}=Fs(),h=S.useRef(null),g=S.useRef(null),x=S.useRef(null),y=S.useRef({}),v=S.useRef({}),{canvasSize:T,stageRef:k}=pae(h),{containerSize:b,responsiveSettings:N}=xae(h),[E,P]=S.useState(null);S.useEffect(()=>{if(!o.canvas.image||!h.current)return;const U=h.current?.clientWidth||800,I=h.current?.clientHeight||600,W=U/o.canvas.image.width,K=I/o.canvas.image.height,Z=Math.min(W,K,1),oe=o.canvas.image.width*Z,J=o.canvas.image.height*Z,le=(U-oe)/2,ue=(I-J)/2;P({x:le,y:ue,width:oe,height:J,scaleX:Z,scaleY:Z,scale:Z,image:o.canvas.image})},[o.canvas.image,h.current?.clientWidth,h.current?.clientHeight]);const{convertToOriginal:M}=yae(E);S.useEffect(()=>{l({type:"SET_CANVAS_SIZE",payload:T})},[T]),S.useEffect(()=>{E&&l({type:"SET_IMAGE_INFO",payload:E})},[E]),S.useEffect(()=>{const U=x.current;if(!U)return;const I=o.ui.selectedBlock?.id?y.current[o.ui.selectedBlock.id]:null;I?(U.nodes([I]),U.getLayer()?.batchDraw()):(U.nodes([]),U.getLayer()?.batchDraw())},[o.ui.selectedBlock]);const j=S.useCallback(()=>{l({type:"SET_UI_STATE",payload:{selectedBlock:null}}),l({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!1,isDrawingArrow:!1,blockCreationStart:null,arrowStart:null,previewBlock:null,previewArrow:null}}),l({type:"RESET_TESTDATA"}),l({type:"SET_ERROR",payload:null})},[]),A=S.useCallback(async U=>{const I=U.target.files[0];if(!I){u("Please select a file","error");return}try{l({type:"SET_LOADING",payload:!0});const W=await vae(I);if(!W.valid){l({type:"SHOW_IMAGE_SIZE_MODAL",payload:{errors:W.errors,fileSize:(I.size/1024).toFixed(1),dimensions:W.dimensions}});return}let K=I;if(I.size>500*1024){u("Image is large, compressing to meet size requirements...","info");try{K=await wae(I,500);const J=(I.size/1024).toFixed(1),le=(K.size/1024).toFixed(1);u(`Image compressed from ${J}KB to ${le}KB`,"success")}catch{u("Failed to compress image. Please try a smaller image.","error");return}}const Z=await bae(K),oe=new Image;oe.crossOrigin="anonymous",oe.onload=()=>{l({type:"SET_IMAGE",payload:oe}),l({type:"SET_UI_STATE",payload:{imageUrl:Z}}),u("Image uploaded successfully!","success")},oe.onerror=()=>{u("Failed to load image","error")},oe.src=Z}catch(W){console.error("Image upload error:",W),u("Error processing image","error")}finally{l({type:"SET_LOADING",payload:!1})}},[u]),O=S.useCallback(U=>{const I=k.current;if(!I)return;const W=I.getPointerPosition();if(W){if(o.canvas.selectedTool==="create"){const K=fy.findAtPosition(o.testData.blocks,W.x,W.y);if(K){l({type:"SET_UI_STATE",payload:{selectedBlock:K}});return}l({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!0,blockCreationStart:{x:W.x,y:W.y}}})}else if(o.canvas.selectedTool==="edit"){const K=fy.findAtPosition(o.testData.blocks,W.x,W.y);l(K?{type:"SET_UI_STATE",payload:{selectedBlock:K}}:{type:"SET_UI_STATE",payload:{selectedBlock:null}})}else if(o.canvas.selectedTool==="arrow"){const K=U.target===I,Z=fy.findAtPosition(o.testData.blocks,W.x,W.y);(K||!Z)&&l({type:"SET_CREATION_STATE",payload:{isDrawingArrow:!0,arrowStart:{x:W.x,y:W.y}}})}}},[o.canvas.selectedTool,E,o.testData.blocks]),L=S.useCallback(U=>{if(o.creation.isCreatingBlock&&o.creation.blockCreationStart){const I=k.current;if(!I)return;const W=I.getPointerPosition();if(!W)return;const K=Math.abs(W.x-o.creation.blockCreationStart.x),Z=Math.abs(W.y-o.creation.blockCreationStart.y),oe=10,J=Math.max(K,oe),le=Math.max(Z,oe);l({type:"SET_CREATION_STATE",payload:{previewBlock:{x:Math.min(W.x,o.creation.blockCreationStart.x),y:Math.min(W.y,o.creation.blockCreationStart.y),width:J,height:le,fill:"rgba(0, 123, 255, 0.3)",stroke:"#007bff",strokeWidth:2,dash:[5,5],opacity:.7}}})}else if(o.creation.isDrawingArrow&&o.creation.arrowStart){const I=k.current;if(!I)return;const W=I.getPointerPosition();if(!W)return;l({type:"SET_CREATION_STATE",payload:{previewArrow:{startX:o.creation.arrowStart.x,startY:o.creation.arrowStart.y,endX:W.x,endY:W.y,stroke:"#dc3545",fill:"#dc3545",strokeWidth:3,dash:[5,5],opacity:.7}}})}},[o.creation]),q=S.useCallback(U=>{if(o.creation.isCreatingBlock&&o.creation.blockCreationStart){const I=k.current;if(!I)return;const W=I.getPointerPosition();if(!W)return;const K=Math.abs(W.x-o.creation.blockCreationStart.x),Z=Math.abs(W.y-o.creation.blockCreationStart.y),oe=10,J=Math.max(K,oe),le=Math.max(Z,oe),ue=Math.min(W.x,o.creation.blockCreationStart.x)+J/2,de=Math.min(W.y,o.creation.blockCreationStart.y)+le/2,Te=fy.generateId(),ie=fy.create(ue,de,J,le,Te),xe=Q5.create(Te,`Word ${o.testData.blocks.length+1}`,Q5.generateId(Te));l({type:"ADD_BLOCK",payload:ie}),l({type:"ADD_WORD",payload:xe}),l({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!1,blockCreationStart:null,previewBlock:null}}),o.testData.blocks.length===0&&l({type:"SET_UI_STATE",payload:{showWordPanel:!0}})}else if(o.creation.isDrawingArrow&&o.creation.arrowStart){const I=k.current;if(!I)return;const W=I.getPointerPosition();if(!W)return;if(np.validate(o.creation.arrowStart.x,o.creation.arrowStart.y,W.x,W.y,o.testData.blocks)){const K=np.snapToNearestBlock(o.creation.arrowStart.x,o.creation.arrowStart.y,o.testData.blocks),Z=np.snapToNearestBlock(W.x,W.y,o.testData.blocks),oe=K?K.x:o.creation.arrowStart.x,J=K?K.y:o.creation.arrowStart.y,le=Z?Z.x:W.x,ue=Z?Z.y:W.y,de=np.generateId(),Te=_ae(),ie=np.create(oe,J,le,ue,K?K.blockId:null,Z?Z.blockId:null,de,{strokeWidth:Te.arrowThickness,isMobile:Te.isMobile});l({type:"ADD_ARROW",payload:ie}),u("Arrow created successfully!","success")}else u("Arrow must start near a block!","error");l({type:"SET_CREATION_STATE",payload:{isDrawingArrow:!1,arrowStart:null,previewArrow:null}})}},[o.creation,o.testData.blocks,u]),Q=S.useCallback(U=>{U.evt.preventDefault(),O(U)},[O]),ae=S.useCallback(U=>{U.evt.preventDefault(),L(U)},[L]),te=S.useCallback(U=>{U.evt.preventDefault(),q(U)},[q]),ne=S.useCallback(async()=>{console.log(" [MatchingTestCreator] handleSaveTest clicked");const U=B();if(Object.keys(U).length>0){console.warn(" [MatchingTestCreator] Validation errors:",U),u("Please fix validation errors before saving","error");return}try{console.log(" [MatchingTestCreator] Preparing data to save...",{blocks:o.testData.blocks.length,words:o.testData.words.length,arrows:o.testData.arrows.length,imageUrl:o.ui.imageUrl?"present":"missing"}),l({type:"SET_LOADING",payload:!0});let I=o.ui.imageUrl;if(o.ui.imageUrl&&o.ui.imageUrl.startsWith("data:")){const K=await d("/.netlify/functions/upload-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataUrl:o.ui.imageUrl,folder:"matching_tests"})}),Z=await K.json();if(K.ok&&Z.success&&Z.url)I=Z.url;else throw new Error(Z.message||"Upload failed")}const W=o.testData.blocks.map((K,Z)=>{let oe;if(E){const ue=M(K.x,K.y),de=M(K.x+K.width,K.y+K.height);oe={x:ue.x,y:ue.y,width:Number((de.x-ue.x).toFixed(4)),height:Number((de.y-ue.y).toFixed(4))}}else oe={x:Number(K.x.toFixed(4)),y:Number(K.y.toFixed(4)),width:Number(K.width.toFixed(4)),height:Number(K.height.toFixed(4))};const J=o.testData.words.find(ue=>ue.blockId===K.id),le=o.testData.arrows.find(ue=>ue.startBlock===K.id);return{question_id:Z+1,word:J?.word||`Word ${Z+1}`,block_coordinates:oe,has_arrow:!!le,arrow:le&&E?(()=>{const ue=M(le.startX,le.startY),de=M(le.endX,le.endY),Te=ue.x/E.originalWidth*100,ie=ue.y/E.originalHeight*100,xe=de.x/E.originalWidth*100,Ae=de.y/E.originalHeight*100;return{start_x:Number(ue.x.toFixed(4)),start_y:Number(ue.y.toFixed(4)),end_x:Number(de.x.toFixed(4)),end_y:Number(de.y.toFixed(4)),rel_start_x:Number(Te.toFixed(4)),rel_start_y:Number(ie.toFixed(4)),rel_end_x:Number(xe.toFixed(4)),rel_end_y:Number(Ae.toFixed(4)),image_width:E.originalWidth,image_height:E.originalHeight,style:le.style||{color:"#dc3545",thickness:3}}})():null}});r&&(console.log(" [MatchingTestCreator] Calling onTestSaved with processed data"),r({success:!0,message:"Test data prepared for assignment",blocks:o.testData.blocks,words:o.testData.words,arrows:o.testData.arrows,imageUrl:I,processedQuestions:W}))}catch(I){console.error("Save error:",I),u(`Error saving test: ${I.message}`,"error")}finally{l({type:"SET_LOADING",payload:!1})}},[o.testData,o.ui.imageUrl,E,M,d,r,u,e,f]),B=S.useCallback(()=>{const U={};return e.trim()||(U.testName="Test name is required"),o.testData.blocks.length===0&&(U.blocks="At least one block is required"),U},[e,o.testData.blocks.length]),V=()=>c.jsxs("div",{className:"flex flex-wrap gap-2 p-4 bg-gray-50 border-b",children:[c.jsx(lt,{onClick:()=>l({type:"SET_SELECTED_TOOL",payload:"create"}),variant:o.canvas.selectedTool==="create"?"primary":"secondary",size:"sm",children:" Create Blocks"}),c.jsx(lt,{onClick:()=>l({type:"SET_SELECTED_TOOL",payload:"edit"}),variant:o.canvas.selectedTool==="edit"?"primary":"secondary",size:"sm",children:" Edit Blocks"}),c.jsx(lt,{onClick:()=>l({type:"SET_SELECTED_TOOL",payload:"arrow"}),variant:o.canvas.selectedTool==="arrow"?"primary":"secondary",size:"sm",children:" Draw Arrows"}),c.jsx(lt,{onClick:j,variant:"secondary",size:"sm",children:" Reset"}),c.jsx(lt,{onClick:()=>g.current?.click(),variant:"secondary",size:"sm",children:" Upload Image"}),c.jsx("div",{className:"text-xs text-gray-500 text-center col-span-full",children:"Max size: 500KB  Max dimensions: 4000x4000px"})]}),R=()=>c.jsx(pm,{width:b.width,height:N.stageHeight,ref:k,onMouseDown:O,onMouseMove:L,onMouseUp:q,onTouchStart:Q,onTouchMove:ae,onTouchEnd:te,className:o.canvas.selectedTool==="arrow"||o.canvas.selectedTool==="create"?"cursor-crosshair":"cursor-default",children:c.jsxs(gm,{children:[o.canvas.image&&E&&c.jsx(rz,{image:o.canvas.image,x:E.x,y:E.y,width:E.width,height:E.height}),o.testData.blocks.map(U=>c.jsxs(Qc,{ref:I=>{I&&(v.current[U.id]=I)},draggable:o.canvas.selectedTool==="edit",x:U.x,y:U.y,onMouseEnter:I=>{const W=I.target.getStage()?.container();W&&(W.style.cursor=o.ui.selectedBlock?.id===U.id?"nwse-resize":"move")},onMouseLeave:I=>{const W=I.target.getStage()?.container();W&&(W.style.cursor=o.canvas.selectedTool==="arrow"?"crosshair":"default")},onDragStart:()=>{l({type:"SET_UI_STATE",payload:{selectedBlock:U}})},onDragEnd:I=>{const{x:W,y:K}=I.target.position();l({type:"UPDATE_BLOCK",payload:{id:U.id,updates:{x:W,y:K}}})},onClick:()=>{l({type:"SET_UI_STATE",payload:{selectedBlock:U}})},onTap:()=>{l({type:"SET_UI_STATE",payload:{selectedBlock:U}})},children:[c.jsx(bi,{ref:I=>{I&&(y.current[U.id]=I)},width:U.width,height:U.height,fill:U.fill,stroke:U.stroke,strokeWidth:U.strokeWidth,cornerRadius:U.cornerRadius,shadowColor:U.shadowColor,shadowBlur:U.shadowBlur,shadowOffset:U.shadowOffset,shadowOpacity:U.shadowOpacity,draggable:o.canvas.selectedTool==="edit",onDragEnd:I=>{const{x:W,y:K}=I.target.getParent().position();l({type:"UPDATE_BLOCK",payload:{id:U.id,updates:{x:W,y:K}}})},onMouseEnter:I=>{const W=I.target.getStage()?.container();W&&(W.style.cursor=o.ui.selectedBlock?.id===U.id?"nwse-resize":"move")},onMouseLeave:I=>{const W=I.target.getStage()?.container();W&&(W.style.cursor=o.canvas.selectedTool==="arrow"?"crosshair":"default")},onTransformEnd:I=>{const W=y.current[U.id];if(!W)return;const K=Math.max(10,W.width()*W.scaleX()),Z=Math.max(10,W.height()*W.scaleY());W.scaleX(1),W.scaleY(1),l({type:"UPDATE_BLOCK",payload:{id:U.id,updates:{width:K,height:Z}}})}}),c.jsx(Lu,{x:2,y:2,text:`${o.testData.blocks.indexOf(U)+1}`,fontSize:Math.min(N.fontSize,Math.max(8,U.width/4)),fontFamily:"Arial",fill:"#333",fontStyle:"bold",listening:!1})]},U.id)),c.jsx(nz,{ref:x,rotateEnabled:!1,flipEnabled:!1,boundBoxFunc:(U,I)=>({...I,width:Math.max(I.width,10),height:Math.max(I.height,10)})}),o.testData.arrows.map(U=>c.jsx(Kk,{points:[U.startX,U.startY,U.endX,U.endY],stroke:U.stroke,fill:U.fill,strokeWidth:U.strokeWidth||N.arrowThickness,pointerLength:U.pointerLength,pointerWidth:U.pointerWidth},U.id)),o.creation.previewBlock&&c.jsx(bi,{x:o.creation.previewBlock.x,y:o.creation.previewBlock.y,width:o.creation.previewBlock.width,height:o.creation.previewBlock.height,fill:o.creation.previewBlock.fill,stroke:o.creation.previewBlock.stroke,strokeWidth:o.creation.previewBlock.strokeWidth,dash:o.creation.previewBlock.dash,opacity:o.creation.previewBlock.opacity}),o.creation.previewArrow&&c.jsx(Kk,{points:[o.creation.previewArrow.startX,o.creation.previewArrow.startY,o.creation.previewArrow.endX,o.creation.previewArrow.endY],stroke:o.creation.previewArrow.stroke,fill:o.creation.previewArrow.fill,strokeWidth:o.creation.previewArrow.strokeWidth,dash:o.creation.previewArrow.dash,opacity:o.creation.previewArrow.opacity})]})}),H=S.useMemo(()=>o.testData.blocks.length===0?null:c.jsxs("div",{className:"word-panel bg-gray-50 border-t border-gray-200 p-4 w-full",style:{height:"min(400px, 40vh)",overflowY:"auto"},children:[c.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Words (Auto-created with blocks)"}),c.jsx("div",{className:"space-y-2",children:o.testData.words.map(U=>{const I=o.testData.blocks.find(W=>W.id===U.blockId);return c.jsxs("div",{className:"p-2 bg-white rounded border",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsxs("span",{className:"text-xs text-gray-500",children:["Block ",o.testData.blocks.indexOf(I)+1]}),c.jsx("button",{onClick:()=>l({type:"DELETE_BLOCK",payload:I.id}),className:"text-red-500 hover:text-red-700 text-xs",children:""})]}),c.jsx("input",{type:"text",value:U.word,onChange:W=>{const K=Q5.update(o.testData.words,U.blockId,W.target.value);l({type:"UPDATE_WORDS",payload:K})},className:"w-full text-sm px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter word text"})]},U.blockId)})})]}),[o.testData.words,o.testData.blocks]);return c.jsxs(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex flex-col h-screen bg-gray-100",children:[c.jsx("div",{className:"bg-white shadow-sm border-b p-4",children:c.jsx("div",{className:"flex items-center justify-between",children:c.jsx("div",{children:c.jsx("div",{className:"mt-2 text-sm text-gray-600",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{children:[c.jsx("strong",{children:"Test Name:"})," ",e||"Untitled Test"]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Questions:"})," ",o.testData.blocks.length," (auto-generated from blocks)"]})]})})})})}),V(),c.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[c.jsx("div",{ref:h,className:"bg-white border overflow-auto",style:{minHeight:`${N.stageHeight}px`,maxHeight:"calc(100vh - 200px)",height:"auto",padding:`${N.padding}px`},children:R()}),H]}),c.jsx("div",{className:"bg-white border-t p-4",children:c.jsx("div",{className:"flex justify-center",children:c.jsx(lt,{onClick:ne,disabled:a||o.ui.isLoading,variant:"primary",size:"lg",children:a||o.ui.isLoading?c.jsx(ln,{size:"sm"}):"Save Test"})})}),c.jsx("input",{ref:g,type:"file",accept:"image/*,application/pdf",onChange:A,className:"hidden"}),c.jsx($a,{isOpen:o.ui.showImageSizeModal,onClose:()=>l({type:"HIDE_IMAGE_SIZE_MODAL"}),title:" Image Too Large",size:"medium",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("span",{className:"text-red-600 text-2xl mr-2",children:""}),c.jsx("h4",{className:"text-lg font-semibold text-red-800",children:"Image Size Issues"})]}),c.jsx("div",{className:"text-red-700",children:o.ui.imageSizeError?.errors.map((U,I)=>c.jsxs("div",{className:"mb-2",children:[" ",U]},I))})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:" Current Image Details:"}),c.jsxs("div",{className:"text-blue-700 space-y-1",children:[c.jsxs("div",{children:[" File size: ",o.ui.imageSizeError?.fileSize,"KB"]}),o.ui.imageSizeError?.dimensions&&c.jsxs("div",{children:[" Dimensions: ",o.ui.imageSizeError.dimensions.width,"  ",o.ui.imageSizeError.dimensions.height," pixels"]})]})]}),c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[c.jsx("h5",{className:"font-semibold text-green-800 mb-2",children:" Requirements:"}),c.jsxs("div",{className:"text-green-700 space-y-1",children:[c.jsx("div",{children:" Maximum file size: 500KB"}),c.jsx("div",{children:" Maximum dimensions: 4000  4000 pixels"}),c.jsx("div",{children:" Supported formats: All image formats (JPEG, PNG, WebP, etc.)"})]})]}),c.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[c.jsx("h5",{className:"font-semibold text-yellow-800 mb-2",children:" How to Fix:"}),c.jsxs("div",{className:"text-yellow-700 space-y-1",children:[c.jsx("div",{children:" Use an image editor to resize your image"}),c.jsx("div",{children:" Compress the image using online tools"}),c.jsx("div",{children:" Try a different image with smaller dimensions"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx(lt,{onClick:()=>l({type:"HIDE_IMAGE_SIZE_MODAL"}),variant:"secondary",children:"Close"}),c.jsx(lt,{onClick:()=>{l({type:"HIDE_IMAGE_SIZE_MODAL"}),g.current?.click()},variant:"primary",children:"Try Another Image"})]})]})})]})},a1=S.createContext(null);function Cae(e,t){return{getTheme:function(){return t??null}}}function Zu(){const e=S.useContext(a1);return e==null&&(function(t,...r){const n=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;s.append("code",t);for(const a of r)s.append("v",a);throw n.search=s.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(8),e}function Zt(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const lu=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Eae=lu&&"documentMode"in document?document.documentMode:null,Iu=lu&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),xm=lu&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),n4=!(!lu||!("InputEvent"in window)||Eae)&&"getTargetRanges"in new window.InputEvent("input"),mv=lu&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Rp=lu&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Nae=lu&&/Android/.test(navigator.userAgent),sz=lu&&/^(?=.*Chrome).*/i.test(navigator.userAgent),kP=lu&&Nae&&sz,s4=lu&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!sz;function az(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}const Aae=1,jae=3,Pae=9,Mae=11,ym=0,iz=1,Lp=2,Fae=0,Dae=1,Oae=2,a4=4,i4=8,jT=128,Iae=1792|(112|(3|a4|i4)|jT),PT=1,MT=2,FT=3,DT=4,OT=5,IT=6,F_=mv||Rp||s4?"":"",s0=`

`,Rae=xm?"":F_,vm={bold:1,capitalize:1024,code:16,highlight:jT,italic:2,lowercase:256,strikethrough:a4,subscript:32,superscript:64,underline:i4,uppercase:512},Lae={directionless:1,unmergeable:2},TP={center:MT,end:IT,justify:DT,left:PT,right:FT,start:OT},Bae={[MT]:"center",[IT]:"end",[DT]:"justify",[PT]:"left",[FT]:"right",[OT]:"start"},$ae={normal:0,segmented:2,token:1},zae={[Fae]:"normal",[Oae]:"segmented",[Dae]:"token"},CP="$config";function oz(e,t,r,n,s,a){let i=e.getFirstChild();for(;i!==null;){const o=i.__key;i.__parent===t&&(jt(i)&&oz(i,o,r,n,s,a),r.has(o)||a.delete(o),s.push(o)),i=i.getNextSibling()}}const Uae=100;let Yk=!1,RT=0;function Wae(e){RT=e.timeStamp}function Z5(e,t,r){const n=e.nodeName==="BR",s=t.__lexicalLineBreak;return s&&(e===s||n&&e.previousSibling===s)||n&&W_(e,r)!==void 0}function Hae(e,t,r){const n=au(xc(r));let s=null,a=null;n!==null&&n.anchorNode===e&&(s=n.anchorOffset,a=n.focusOffset);const i=e.nodeValue;i!==null&&nC(t,i,s,a,!1)}function Gae(e,t,r){if(Vt(e)){const n=e.anchor.getNode();if(n.is(r)&&e.format!==n.getFormat())return!1}return m0(t)&&r.isAttached()}function Vae(e,t,r,n){for(let s=e;s&&!Vie(s);s=l2(s)){const a=W_(s,t);if(a!==void 0){const i=za(a,r);if(i)return zn(i)||!As(s)?void 0:[s,i]}else if(s===n)return[n,nU(r)]}}function lz(e,t,r){Yk=!0;const n=performance.now()-RT>Uae;try{Cl(e,(()=>{const s=fr()||(function(h){return h.getEditorState().read((()=>{const g=fr();return g!==null?g.clone():null}))})(e),a=new Map,i=e.getRootElement(),o=e._editorState,l=e._blockCursorElement;let u=!1,d="";for(let h=0;h<t.length;h++){const g=t[h],x=g.type,y=g.target,v=Vae(y,e,o,i);if(!v)continue;const[T,k]=v;if(x==="characterData")n&&hr(k)&&m0(y)&&Gae(s,y,k)&&Hae(y,k,e);else if(x==="childList"){u=!0;const b=g.addedNodes;for(let P=0;P<b.length;P++){const M=b[P],j=tU(M),A=M.parentNode;if(A!=null&&M!==l&&j===null&&!Z5(M,A,e)){if(xm){const O=(As(M)?M.innerText:null)||M.nodeValue;O&&(d+=O)}A.removeChild(M)}}const N=g.removedNodes,E=N.length;if(E>0){let P=0;for(let M=0;M<E;M++){const j=N[M];(Z5(j,y,e)||l===j)&&(y.appendChild(j),P++)}E!==P&&a.set(T,k)}}}if(a.size>0)for(const[h,g]of a)g.reconcileObservedMutation(h,e);const f=r.takeRecords();if(f.length>0){for(let h=0;h<f.length;h++){const g=f[h],x=g.addedNodes,y=g.target;for(let v=0;v<x.length;v++){const T=x[v],k=T.parentNode;k==null||T.nodeName!=="BR"||Z5(T,y,e)||k.removeChild(T)}}r.takeRecords()}s!==null&&(u&&Xi(s),xm&&oU(e)&&s.insertRawText(d))}))}finally{Yk=!1}}function cz(e){const t=e._observer;t!==null&&lz(e,t.takeRecords(),t)}function uz(e){(function(t){RT===0&&xc(t).addEventListener("textInput",Wae,!0)})(e),e._observer=new MutationObserver(((t,r)=>{lz(e,t,r)}))}function qae(e){const t=new Map,r=new Set;for(let n=typeof e=="function"?e:e.replace;n.prototype&&n.prototype.getType!==void 0;n=Object.getPrototypeOf(n)){const{ownNodeConfig:s}=lC(n);if(s&&s.stateConfigs)for(const a of s.stateConfigs){let i;"stateConfig"in a?(i=a.stateConfig,a.flat&&r.add(i.key)):i=a,t.set(i.key,i)}}return{flatKeys:r,sharedConfigMap:t}}let Kae=class dz{constructor(t,r,n=void 0,s=new Map,a=void 0){this.node=t,this.sharedNodeState=r,this.unknownState=n,this.knownState=s;const{sharedConfigMap:i}=this.sharedNodeState,o=a!==void 0?a:(function(l,u,d){let f=d.size;if(u)for(const h in u){const g=l.get(h);g&&d.has(g)||f++}return f})(i,n,s);this.size=o}getValue(t){const r=this.knownState.get(t);if(r!==void 0)return r;this.sharedNodeState.sharedConfigMap.set(t.key,t);let n=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){const s=this.unknownState[t.key];s!==void 0&&(n=t.parse(s)),this.updateFromKnown(t,n)}return n}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const t={...this.unknownState},r={};for(const[n,s]of this.knownState)n.isEqual(s,n.defaultValue)?delete t[n.key]:t[n.key]=n.unparse(s);for(const n of this.sharedNodeState.flatKeys)n in t&&(r[n]=t[n],delete t[n]);return EP(t)&&(r.$=t),r}getWritable(t){if(this.node===t)return this;const{sharedNodeState:r,unknownState:n}=this,s=new Map(this.knownState);return new dz(t,r,(function(a,i,o){let l;if(o)for(const[u,d]of Object.entries(o)){const f=a.get(u);f?i.has(f)||i.set(f,f.parse(d)):(l=l||{},l[u]=d)}return l})(r.sharedConfigMap,s,n),s,this.size)}updateFromKnown(t,r){const n=t.key;this.sharedNodeState.sharedConfigMap.set(n,t);const{knownState:s,unknownState:a}=this;s.has(t)||a&&n in a||(a&&(delete a[n],this.unknownState=EP(a)),this.size++),s.set(t,r)}updateFromUnknown(t,r){const n=this.sharedNodeState.sharedConfigMap.get(t);n?this.updateFromKnown(n,n.parse(r)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=r)}updateFromJSON(t){const{knownState:r}=this;for(const n of r.keys())r.set(n,n.defaultValue);if(this.size=r.size,this.unknownState=void 0,t)for(const[n,s]of Object.entries(t))this.updateFromUnknown(n,s)}};function Yae(e){const t=e.getWritable(),r=t.__state?t.__state.getWritable(t):new Kae(t,fz(t));return t.__state=r,r}function fz(e){return e.__state?e.__state.sharedNodeState:Qz(c2(),e.getType()).sharedNodeState}function EP(e){if(e)for(const t in e)return e}function NP(e,t,r){for(const[n,s]of t.knownState){if(e.has(n.key))continue;e.add(n.key);const a=r?r.getValue(n):n.defaultValue;if(a!==s&&!n.isEqual(a,s))return!0}return!1}function AP(e,t,r){const{unknownState:n}=t,s=r?r.unknownState:void 0;if(n){for(const[a,i]of Object.entries(n))if(!e.has(a)&&(e.add(a),i!==(s?s[a]:void 0)))return!0}return!1}function jP(e,t){const r=e.__state;return r&&r.node===e?r.getWritable(t):r}function PP(e,t){const r=e.__mode,n=e.__format,s=e.__style,a=t.__mode,i=t.__format,o=t.__style,l=e.__state,u=t.__state;return(r===null||r===a)&&(n===null||n===i)&&(s===null||s===o)&&(e.__state===null||l===u||(function(d,f){if(d===f)return!0;if(d&&f&&d.size!==f.size)return!1;const h=new Set;return!(d&&NP(h,d,f)||f&&NP(h,f,d)||d&&AP(h,d,f)||f&&AP(h,f,d))})(l,u))}function MP(e,t){const r=e.mergeWithSibling(t),n=Js()._normalizedNodes;return n.add(e.__key),n.add(t.__key),r}function FP(e){let t,r,n=e;if(n.__text!==""||!n.isSimpleText()||n.isUnmergeable()){for(;(t=n.getPreviousSibling())!==null&&hr(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(PP(t,n)){n=MP(t,n);break}break}t.remove()}for(;(r=n.getNextSibling())!==null&&hr(r)&&r.isSimpleText()&&!r.isUnmergeable();){if(r.__text!==""){if(PP(n,r)){n=MP(n,r);break}break}r.remove()}}else n.remove()}function o4(e){return DP(e.anchor),DP(e.focus),e}function DP(e){for(;e.type==="element";){const t=e.getNode(),r=e.offset;let n,s;if(r===t.getChildrenSize()?(n=t.getChildAtIndex(r-1),s=!0):(n=t.getChildAtIndex(r),s=!1),hr(n)){e.set(n.__key,s?n.getTextContentSize():0,"text",!0);break}if(!jt(n))break;e.set(n.__key,s?n.getChildrenSize():0,"element",!0)}}let wm,po,gv,D_,Xk,Jk,bm,tu,Qk,pv,Za="",Du=null,Ou="",Ld="",sp=!1,l4=!1;function c4(e,t){const r=bm.get(e);if(t!==null){const n=r8(e);n.parentNode===t&&t.removeChild(n)}if(tu.has(e)||po._keyToDOMMap.delete(e),jt(r)){const n=d4(r,bm);Zk(n,0,n.length-1,null)}r!==void 0&&sC(pv,gv,D_,r,"destroyed")}function Zk(e,t,r,n){let s=t;for(;s<=r;++s){const a=e[s];a!==void 0&&c4(a,n)}}function Oh(e,t){e.setProperty("text-align",t)}const Xae="40px";function hz(e,t){const r=wm.theme.indent;if(typeof r=="string"){const s=e.classList.contains(r);t>0&&!s?e.classList.add(r):t<1&&s&&e.classList.remove(r)}const n=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||Xae;e.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${n})`)}function mz(e,t){const r=e.style;t===0?Oh(r,""):t===PT?Oh(r,"left"):t===MT?Oh(r,"center"):t===FT?Oh(r,"right"):t===DT?Oh(r,"justify"):t===OT?Oh(r,"start"):t===IT&&Oh(r,"end")}function e8(e,t){const r=(function(n){const s=n.__dir;if(s!==null)return s;if(ri(n))return null;const a=n.getParentOrThrow();return ri(a)&&a.__dir===null?"auto":null})(t);r!==null?e.dir=r:e.removeAttribute("dir")}function u4(e,t){const r=tu.get(e);r===void 0&&Zt(60);const n=r.createDOM(wm,po);if((function(s,a,i){const o=i._keyToDOMMap;(function(l,u,d){const f=`__lexicalKey_${u._key}`;l[f]=d})(a,i,s),o.set(s,a)})(e,n,po),hr(r)?n.setAttribute("data-lexical-text","true"):zn(r)&&n.setAttribute("data-lexical-decorator","true"),jt(r)){const s=r.__indent,a=r.__size;if(e8(n,r),s!==0&&hz(n,s),a!==0){const o=a-1;t8(d4(r,tu),r,0,o,r.getDOMSlot(n))}const i=r.__format;i!==0&&mz(n,i),r.isInline()||gz(null,r,n),H_(r)&&(Za+=s0,Ld+=s0)}else{const s=r.getTextContent();if(zn(r)){const a=r.decorate(po,wm);a!==null&&pz(e,a),n.contentEditable="false"}Za+=s,Ld+=s}return t!==null&&t.insertChild(n),sC(pv,gv,D_,r,"created"),n}function t8(e,t,r,n,s){const a=Za;Za="";let i=r;for(;i<=n;++i){u4(e[i],s);const o=tu.get(e[i]);o!==null&&hr(o)&&(Du===null&&(Du=o.getFormat()),Ou===""&&(Ou=o.getStyle()))}H_(t)&&(Za+=s0),s.element.__lexicalTextContent=Za,Za=a+Za}function OP(e,t){if(e){const r=e.__last;if(r){const n=t.get(r);if(n)return Kd(n)?"line-break":zn(n)&&n.isInline()?"decorator":null}return"empty"}return null}function gz(e,t,r){const n=OP(e,bm),s=OP(t,tu);n!==s&&t.getDOMSlot(r).setManagedLineBreak(s)}function Jae(e,t,r){var n;Du=null,Ou="",(function(s,a,i){const o=Za,l=s.__size,u=a.__size;Za="";const d=i.element;if(l===1&&u===1){const f=s.__first,h=a.__first;if(f===h)Ny(f,d);else{const x=r8(f),y=u4(h,null);try{d.replaceChild(y,x)}catch(v){if(typeof v=="object"&&v!=null){const T=`${v.toString()} Parent: ${d.tagName}, new child: {tag: ${y.tagName} key: ${h}}, old child: {tag: ${x.tagName}, key: ${f}}.`;throw new Error(T)}throw v}c4(f,null)}const g=tu.get(h);hr(g)&&(Du===null&&(Du=g.getFormat()),Ou===""&&(Ou=g.getStyle()))}else{const f=d4(s,bm),h=d4(a,tu);if(f.length!==l&&Zt(227),h.length!==u&&Zt(228),l===0)u!==0&&t8(h,a,0,u-1,i);else if(u===0){if(l!==0){const g=i.after==null&&i.before==null&&i.element.__lexicalLineBreak==null;Zk(f,0,l-1,g?null:d),g&&(d.textContent="")}}else(function(g,x,y,v,T,k){const b=v-1,N=T-1;let E,P,M=k.getFirstChild(),j=0,A=0;for(;j<=b&&A<=N;){const q=x[j],Q=y[A];if(q===Q)M=eS(Ny(Q,k.element)),j++,A++;else{E===void 0&&(E=new Set(x)),P===void 0&&(P=new Set(y));const te=P.has(q),ne=E.has(Q);if(te)if(ne){const B=_m(po,Q);B===M?M=eS(Ny(Q,k.element)):(k.withBefore(M).insertChild(B),Ny(Q,k.element)),j++,A++}else u4(Q,k.withBefore(M)),A++;else M=eS(r8(q)),c4(q,k.element),j++}const ae=tu.get(Q);ae!==null&&hr(ae)&&(Du===null&&(Du=ae.getFormat()),Ou===""&&(Ou=ae.getStyle()))}const O=j>b,L=A>N;if(O&&!L){const q=y[N+1],Q=q===void 0?null:po.getElementByKey(q);t8(y,g,A,N,k.withBefore(Q))}else L&&!O&&Zk(x,j,b,k.element)})(a,f,h,l,u,i)}H_(a)&&(Za+=s0),d.__lexicalTextContent=Za,Za=o+Za})(e,t,t.getDOMSlot(r)),n=t,Du==null||Du===n.__textFormat||l4||n.setTextFormat(Du),(function(s){Ou===""||Ou===s.__textStyle||l4||s.setTextStyle(Ou)})(t)}function d4(e,t){const r=[];let n=e.__first;for(;n!==null;){const s=t.get(n);s===void 0&&Zt(101),r.push(n),n=s.__next}return r}function Ny(e,t){const r=bm.get(e);let n=tu.get(e);r!==void 0&&n!==void 0||Zt(61);const s=sp||Jk.has(e)||Xk.has(e),a=_m(po,e);if(r===n&&!s){if(jt(r)){const i=a.__lexicalTextContent;i!==void 0&&(Za+=i,Ld+=i)}else{const i=r.getTextContent();Ld+=i,Za+=i}return a}if(r!==n&&s&&sC(pv,gv,D_,n,"updated"),n.updateDOM(r,a,wm)){const i=u4(e,null);return t===null&&Zt(62),t.replaceChild(i,a),c4(e,null),i}if(jt(r)&&jt(n)){const i=n.__indent;(sp||i!==r.__indent)&&hz(a,i);const o=n.__format;if((sp||o!==r.__format)&&mz(a,o),s&&(Jae(r,n,a),ri(n)||n.isInline()||gz(r,n,a)),H_(n)&&(Za+=s0,Ld+=s0),(sp||n.__dir!==r.__dir)&&(e8(a,n),ri(n)&&!sp))for(const l of n.getChildren())jt(l)&&e8(_m(po,l.getKey()),l)}else{const i=n.getTextContent();if(zn(n)){const o=n.decorate(po,wm);o!==null&&pz(e,o)}Za+=i,Ld+=i}if(!l4&&ri(n)&&n.__cachedText!==Ld){const i=n.getWritable();i.__cachedText=Ld,n=i}return a}function pz(e,t){let r=po._pendingDecorators;const n=po._decorators;if(r===null){if(n[e]===t)return;r=rU(po)}r[e]=t}function eS(e){let t=e.nextSibling;return t!==null&&t===po._blockCursorElement&&(t=t.nextSibling),t}function Qae(e,t,r,n,s,a){Za="",Ld="",sp=n===Lp,po=r,wm=r._config,gv=r._nodes,D_=po._listeners.mutation,Xk=s,Jk=a,bm=e._nodeMap,tu=t._nodeMap,l4=t._readOnly,Qk=new Map(r._keyToDOMMap);const i=new Map;return pv=i,Ny("root",null),po=void 0,gv=void 0,Xk=void 0,Jk=void 0,bm=void 0,tu=void 0,wm=void 0,Qk=void 0,pv=void 0,i}function r8(e){const t=Qk.get(e);return t===void 0&&Zt(75,e),t}function Jr(e){return{type:e}}const xz=Jr("SELECTION_CHANGE_COMMAND"),Zae=Jr("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),LT=Jr("CLICK_COMMAND"),sm=Jr("DELETE_CHARACTER_COMMAND"),bp=Jr("INSERT_LINE_BREAK_COMMAND"),xv=Jr("INSERT_PARAGRAPH_COMMAND"),_p=Jr("CONTROLLED_TEXT_INSERTION_COMMAND"),BT=Jr("PASTE_COMMAND"),n8=Jr("REMOVE_TEXT_COMMAND"),yv=Jr("DELETE_WORD_COMMAND"),vv=Jr("DELETE_LINE_COMMAND"),go=Jr("FORMAT_TEXT_COMMAND"),$T=Jr("UNDO_COMMAND"),zT=Jr("REDO_COMMAND"),eie=Jr("KEYDOWN_COMMAND"),yz=Jr("KEY_ARROW_RIGHT_COMMAND"),tie=Jr("MOVE_TO_END"),vz=Jr("KEY_ARROW_LEFT_COMMAND"),rie=Jr("MOVE_TO_START"),wz=Jr("KEY_ARROW_UP_COMMAND"),bz=Jr("KEY_ARROW_DOWN_COMMAND"),f4=Jr("KEY_ENTER_COMMAND"),_z=Jr("KEY_SPACE_COMMAND"),Sz=Jr("KEY_BACKSPACE_COMMAND"),kz=Jr("KEY_ESCAPE_COMMAND"),Tz=Jr("KEY_DELETE_COMMAND"),Cz=Jr("KEY_TAB_COMMAND"),nie=Jr("INSERT_TAB_COMMAND"),sie=Jr("INDENT_CONTENT_COMMAND"),IP=Jr("OUTDENT_CONTENT_COMMAND"),Ez=Jr("DROP_COMMAND"),Nz=Jr("FORMAT_ELEMENT_COMMAND"),Az=Jr("DRAGSTART_COMMAND"),jz=Jr("DRAGOVER_COMMAND"),aie=Jr("DRAGEND_COMMAND"),O_=Jr("COPY_COMMAND"),UT=Jr("CUT_COMMAND"),s8=Jr("SELECT_ALL_COMMAND"),iie=Jr("CLEAR_EDITOR_COMMAND"),oie=Jr("CLEAR_HISTORY_COMMAND"),Ww=Jr("CAN_REDO_COMMAND"),Hw=Jr("CAN_UNDO_COMMAND"),lie=Jr("FOCUS_COMMAND"),cie=Jr("BLUR_COMMAND"),uie=Jr("KEY_MODIFIER_COMMAND"),Fd=Object.freeze({}),a8=30,i8=[["keydown",function(e,t){if(Uy=e.timeStamp,Pz=e.key,!t.isComposing()&&!Cr(t,eie,e)&&e.key!=null){if(tS&&uM(e))return Cl(t,(()=>{Gw(t,rS)})),tS=!1,void(rS="");if((function(r){return es(r,"ArrowRight",{shiftKey:"any"})})(e))Cr(t,yz,e);else if((function(r){return es(r,"ArrowRight",Id)})(e))Cr(t,tie,e);else if((function(r){return es(r,"ArrowLeft",{shiftKey:"any"})})(e))Cr(t,vz,e);else if((function(r){return es(r,"ArrowLeft",Id)})(e))Cr(t,rie,e);else if((function(r){return es(r,"ArrowUp",{altKey:"any",shiftKey:"any"})})(e))Cr(t,wz,e);else if((function(r){return es(r,"ArrowDown",{altKey:"any",shiftKey:"any"})})(e))Cr(t,bz,e);else if((function(r){return es(r,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})})(e))Wy=!0,Cr(t,f4,e);else if((function(r){return r.key===" "})(e))Cr(t,_z,e);else if((function(r){return Iu&&es(r,"o",{ctrlKey:!0})})(e))e.preventDefault(),Wy=!0,Cr(t,bp,!0);else if((function(r){return es(r,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})})(e))Wy=!1,Cr(t,f4,e);else if((function(r){return es(r,"Backspace",{shiftKey:"any"})||Iu&&es(r,"h",{ctrlKey:!0})})(e))uM(e)?Cr(t,Sz,e):(e.preventDefault(),Cr(t,sm,!0));else if((function(r){return r.key==="Escape"})(e))Cr(t,kz,e);else if((function(r){return es(r,"Delete",{})||Iu&&es(r,"d",{ctrlKey:!0})})(e))(function(r){return r.key==="Delete"})(e)?Cr(t,Tz,e):(e.preventDefault(),Cr(t,sm,!1));else if((function(r){return es(r,"Backspace",cM)})(e))e.preventDefault(),Cr(t,yv,!0);else if((function(r){return es(r,"Delete",cM)})(e))e.preventDefault(),Cr(t,yv,!1);else if((function(r){return Iu&&es(r,"Backspace",{metaKey:!0})})(e))e.preventDefault(),Cr(t,vv,!0);else if((function(r){return Iu&&(es(r,"Delete",{metaKey:!0})||es(r,"k",{ctrlKey:!0}))})(e))e.preventDefault(),Cr(t,vv,!1);else if((function(r){return es(r,"b",Id)})(e))e.preventDefault(),Cr(t,go,"bold");else if((function(r){return es(r,"u",Id)})(e))e.preventDefault(),Cr(t,go,"underline");else if((function(r){return es(r,"i",Id)})(e))e.preventDefault(),Cr(t,go,"italic");else if((function(r){return es(r,"Tab",{shiftKey:"any"})})(e))Cr(t,Cz,e);else if((function(r){return es(r,"z",Id)})(e))e.preventDefault(),Cr(t,$T,void 0);else if((function(r){return Iu?es(r,"z",{metaKey:!0,shiftKey:!0}):es(r,"y",{ctrlKey:!0})||es(r,"z",{ctrlKey:!0,shiftKey:!0})})(e))e.preventDefault(),Cr(t,zT,void 0);else{const r=t._editorState._selection;r===null||Vt(r)?dM(e)&&(e.preventDefault(),Cr(t,s8,e)):(function(n){return es(n,"c",Id)})(e)?(e.preventDefault(),Cr(t,O_,e)):(function(n){return es(n,"x",Id)})(e)?(e.preventDefault(),Cr(t,UT,e)):dM(e)&&(e.preventDefault(),Cr(t,s8,e))}(function(r){return r.ctrlKey||r.shiftKey||r.altKey||r.metaKey})(e)&&Cr(t,uie,e)}}],["pointerdown",function(e,t){const r=e.target,n=e.pointerType;c1(r)&&n!=="touch"&&n!=="pen"&&e.button===0&&Cl(t,(()=>{iM(r)||(l8=!0)}))}],["compositionstart",function(e,t){Cl(t,(()=>{const r=fr();if(Vt(r)&&!t.isComposing()){const n=r.anchor,s=r.anchor.getNode();Gi(n.key),(e.timeStamp<Uy+a8||n.type==="element"||!r.isCollapsed()||s.getFormat()!==r.format||hr(s)&&s.getStyle()!==r.style)&&Cr(t,_p,Rae)}}))}],["compositionend",function(e,t){xm?hy=!0:Rp||!mv&&!s4?Cl(t,(()=>{Gw(t,e.data)})):(tS=!0,rS=e.data)}],["input",function(e,t){e.stopPropagation(),Cl(t,(()=>{if(As(e.target)&&iM(e.target))return;const r=fr(),n=e.data,s=Iz(e);if(n!=null&&Vt(r)&&Dz(r,s,n,e.timeStamp,!1)){hy&&(Gw(t,n),hy=!1);const a=r.anchor.getNode(),i=au(xc(t));if(i===null)return;const o=r.isBackward(),l=o?r.anchor.offset:r.focus.offset,u=o?r.focus.offset:r.anchor.offset;n4&&!r.isCollapsed()&&hr(a)&&i.anchorNode!==null&&a.getTextContent().slice(0,l)+n+a.getTextContent().slice(l+u)===iU(i.anchorNode)||Cr(t,_p,n);const d=n.length;xm&&d>1&&e.inputType==="insertCompositionText"&&!t.isComposing()&&(r.anchor.offset-=d),mv||Rp||s4||!t.isComposing()||(Uy=0,Gi(null))}else rC(!1,t,n!==null?n:void 0),hy&&(Gw(t,n||void 0),hy=!1);(function(){Hi();const a=Js();cz(a)})()}),{event:e}),ap=null}],["click",function(e,t){Cl(t,(()=>{const r=fr(),n=au(xc(t)),s=l1();if(n){if(Vt(r)){const a=r.anchor,i=a.getNode();if(a.type==="element"&&a.offset===0&&r.isCollapsed()&&!ri(i)&&$s().getChildrenSize()===1&&i.getTopLevelElementOrThrow().isEmpty()&&s!==null&&r.is(s))n.removeAllRanges(),r.dirty=!0;else if(e.detail===3&&!r.isCollapsed()&&i!==r.focus.getNode()){const o=(function(l,u){let d=l;for(;d!==$s()&&d!=null;){if(u(d))return d;d=d.getParent()}return null})(i,(l=>jt(l)&&!l.isInline()));jt(o)&&o.select(0)}}else if(e.pointerType==="touch"||e.pointerType==="pen"){const a=n.anchorNode;(As(a)||m0(a))&&Xi(GT(s,n,t,e))}}Cr(t,LT,e)}))}],["cut",Fd],["copy",Fd],["dragstart",Fd],["dragover",Fd],["dragend",Fd],["paste",Fd],["focus",Fd],["blur",Fd],["drop",Fd]];n4&&i8.push(["beforeinput",(e,t)=>(function(r,n){const s=r.inputType,a=Iz(r);s==="deleteCompositionText"||xm&&oU(n)||s!=="insertCompositionText"&&Cl(n,(()=>{const i=fr();if(s==="deleteContentBackward"){if(i===null){const g=l1();if(!Vt(g))return;Xi(g.clone())}if(Vt(i)){const g=i.anchor.key===i.focus.key;if(o=r.timeStamp,Pz==="MediaLast"&&o<Uy+a8&&n.isComposing()&&g){if(Gi(null),Uy=0,setTimeout((()=>{Cl(n,(()=>{Gi(null)}))}),a8),Vt(i)){const x=i.anchor.getNode();x.markDirty(),hr(x)||Zt(142),Oz(i,x)}}else{Gi(null),r.preventDefault();const x=i.anchor.getNode(),y=x.getTextContent(),v=x.canInsertTextAfter(),T=i.anchor.offset===0&&i.focus.offset===y.length;let k=kP&&g&&!T&&v;if(k&&i.isCollapsed()&&(k=!zn(h8(i.anchor,!0))),!k){Cr(n,sm,!0);const b=fr();kP&&Vt(b)&&b.isCollapsed()&&(Hh=b,setTimeout((()=>Hh=null)))}}return}}var o;if(!Vt(i))return;const l=r.data;ap!==null&&rC(!1,n,ap),i.dirty&&ap===null||!i.isCollapsed()||ri(i.anchor.getNode())||a===null||i.applyDOMRange(a),ap=null;const u=i.anchor,d=i.focus,f=u.getNode(),h=d.getNode();if(s!=="insertText"&&s!=="insertTranspose")switch(r.preventDefault(),s){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":Cr(n,_p,r);break;case"insertFromComposition":Gi(null),Cr(n,_p,r);break;case"insertLineBreak":Gi(null),Cr(n,bp,!1);break;case"insertParagraph":Gi(null),Wy&&!Rp?(Wy=!1,Cr(n,bp,!1)):Cr(n,xv,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":Cr(n,BT,r);break;case"deleteByComposition":(function(g,x){return g!==x||jt(g)||jt(x)||!am(g)||!am(x)})(f,h)&&Cr(n,n8,r);break;case"deleteByDrag":case"deleteByCut":Cr(n,n8,r);break;case"deleteContent":Cr(n,sm,!1);break;case"deleteWordBackward":Cr(n,yv,!0);break;case"deleteWordForward":Cr(n,yv,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":Cr(n,vv,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":Cr(n,vv,!1);break;case"formatStrikeThrough":Cr(n,go,"strikethrough");break;case"formatBold":Cr(n,go,"bold");break;case"formatItalic":Cr(n,go,"italic");break;case"formatUnderline":Cr(n,go,"underline");break;case"historyUndo":Cr(n,$T,void 0);break;case"historyRedo":Cr(n,zT,void 0)}else{if(l===`
`)r.preventDefault(),Cr(n,bp,!1);else if(l===s0)r.preventDefault(),Cr(n,xv,void 0);else if(l==null&&r.dataTransfer){const g=r.dataTransfer.getData("text/plain");r.preventDefault(),i.insertRawText(g)}else l!=null&&Dz(i,a,l,r.timeStamp,!0)?(r.preventDefault(),Cr(n,_p,l)):ap=l;Mz=r.timeStamp}}))})(e,t)]);let Uy=0,Pz=null,Mz=0,ap=null;const h4=new WeakMap;let o8=!1,l8=!1,Wy=!1,hy=!1,tS=!1,rS="",Hh=null,Fz=[0,"",0,"root",0];function Dz(e,t,r,n,s){const a=e.anchor,i=e.focus,o=a.getNode(),l=Js(),u=au(xc(l)),d=u!==null?u.anchorNode:null,f=a.key,h=l.getElementByKey(f),g=r.length;return f!==i.key||!hr(o)||(!s&&(!n4||Mz<n+50)||o.isDirty()&&g<2||sU(r))&&a.offset!==i.offset&&!o.isComposing()||Rd(o)||o.isDirty()&&g>1||(s||!n4)&&h!==null&&!o.isComposing()&&d!==Bp(h)||u!==null&&t!==null&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||o.getFormat()!==e.format||o.getStyle()!==e.style||(function(x,y){if(y.isSegmented())return!0;if(!x.isCollapsed())return!1;const v=x.anchor.offset,T=y.getParentOrThrow(),k=am(y);return v===0?!y.canInsertTextBefore()||!T.canInsertTextBefore()&&!y.isComposing()||k||(function(b){const N=b.getPreviousSibling();return(hr(N)||jt(N)&&N.isInline())&&!N.canInsertTextAfter()})(y):v===y.getTextContentSize()&&(!y.canInsertTextAfter()||!T.canInsertTextAfter()&&!y.isComposing()||k)})(e,o)}function RP(e,t){return m0(e)&&e.nodeValue!==null&&t!==0&&t!==e.nodeValue.length}function LP(e,t,r){const{anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:i}=e;o8&&(o8=!1,RP(n,s)&&RP(a,i)&&!Hh)||Cl(t,(()=>{if(!r)return void Xi(null);if(!o2(t,n,a))return;let o=fr();if(Hh&&Vt(o)&&o.isCollapsed()){const l=o.anchor,u=Hh.anchor;(l.key===u.key&&l.offset===u.offset+1||l.offset===1&&u.getNode().is(l.getNode().getPreviousSibling()))&&(o=Hh.clone(),Xi(o))}if(Hh=null,Vt(o)){const l=o.anchor,u=l.getNode();if(o.isCollapsed()){e.type==="Range"&&e.anchorNode===e.focusNode&&(o.dirty=!0);const d=xc(t).event,f=d?d.timeStamp:performance.now(),[h,g,x,y,v]=Fz,T=$s(),k=t.isComposing()===!1&&T.getTextContent()==="";if(f<v+200&&l.offset===x&&l.key===y)zb(o,h,g);else if(l.type==="text")hr(u)||Zt(141),Oz(o,u);else if(l.type==="element"&&!k){jt(u)||Zt(259);const b=l.getNode();b.isEmpty()?(function(N,E){const P=E.getTextFormat(),M=E.getTextStyle();zb(N,P,M)})(o,b):zb(o,0,"")}}else{const d=l.key,f=o.focus.key,h=o.getNodes(),g=h.length,x=o.isBackward(),y=x?i:s,v=x?s:i,T=x?f:d,k=x?d:f;let b=Iae,N=!1;for(let E=0;E<g;E++){const P=h[E],M=P.getTextContentSize();if(hr(P)&&M!==0&&!(E===0&&P.__key===T&&y===M||E===g-1&&P.__key===k&&v===0)&&(N=!0,b&=P.getFormat(),b===0))break}o.format=N?b:0}}Cr(t,xz,void 0)}))}function zb(e,t,r){e.format===t&&e.style===r||(e.format=t,e.style=r,e.dirty=!0)}function Oz(e,t){zb(e,t.getFormat(),t.getStyle())}function Iz(e){if(!e.getTargetRanges)return null;const t=e.getTargetRanges();return t.length===0?null:t[0]}function Gw(e,t){const r=e._compositionKey;if(Gi(null),r!==null&&t!=null){if(t===""){const n=za(r),s=Bp(e.getElementByKey(r));return void(s!==null&&s.nodeValue!==null&&hr(n)&&nC(n,s.nodeValue,null,null,!0))}if(t[t.length-1]===`
`){const n=fr();if(Vt(n)){const s=n.focus;return n.anchor.set(s.key,s.offset,s.type),void Cr(e,f4,null)}}}rC(!0,e,t)}function Rz(e){let t=e.__lexicalEventHandles;return t===void 0&&(t=[],e.__lexicalEventHandles=t),t}const Sp=new Map;function Lz(e){const t=Wie(e.target);if(t===null)return;const r=Zz(t.anchorNode);if(r===null)return;l8&&(l8=!1,Cl(r,(()=>{const l=l1(),u=t.anchorNode;(As(u)||m0(u))&&Xi(GT(l,t,r,e))})));const n=tC(r),s=n[n.length-1],a=s._key,i=Sp.get(a),o=i||s;o!==r&&LP(t,o,!1),LP(t,r,!0),r!==s?Sp.set(a,r):i&&Sp.delete(a)}function BP(e){e._lexicalHandled=!0}function $P(e){return e._lexicalHandled===!0}function die(e){const t=e.ownerDocument,r=h4.get(t);if(r===void 0)return;const n=r-1;n>=0||Zt(164),h4.set(t,n),n===0&&t.removeEventListener("selectionchange",Lz);const s=U_(e);eC(s)?((function(i){if(i._parentEditor!==null){const o=tC(i),l=o[o.length-1]._key;Sp.get(l)===i&&Sp.delete(l)}else Sp.delete(i._key)})(s),e.__lexicalEditor=null):s&&Zt(198);const a=Rz(e);for(let i=0;i<a.length;i++)a[i]();e.__lexicalEventHandles=[]}function c8(e,t,r){Hi();const n=e.__key,s=e.getParent();if(s===null)return;const a=(function(o){const l=fr();if(!Vt(l)||!jt(o))return l;const{anchor:u,focus:d}=l,f=u.getNode(),h=d.getNode();return m8(f,o)&&u.set(o.__key,0,"element"),m8(h,o)&&d.set(o.__key,0,"element"),l})(e);let i=!1;if(Vt(a)&&t){const o=a.anchor,l=a.focus;o.key===n&&(g4(o,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0),l.key===n&&(g4(l,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0)}else io(a)&&t&&e.isSelected()&&e.selectPrevious();if(Vt(a)&&t&&!i){const o=e.getIndexWithinParent();im(e),m4(a,s,o,-1)}else im(e);r||$o(s)||s.canBeEmpty()||!s.isEmpty()||c8(s,t),t&&a&&ri(s)&&s.isEmpty()&&s.selectEnd()}class i1{static getType(){const{ownNodeType:t}=lC(this);return t===void 0&&Zt(64,this.name),t}static clone(t){Zt(65,this.name)}$config(){return{}}config(t,r){const n=r.extends||Object.getPrototypeOf(this.constructor);return Object.assign(r,{extends:n,type:t}),{[t]:r}}afterCloneFrom(t){this.__key===t.__key?(this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state):t.__state&&(this.__state=t.__state.getWritable(this))}constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),Oie(this,t)}getType(){return this.__type}isInline(){Zt(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t==="root")return!0;const r=za(t);if(r===null)break;t=r.__parent}return!1}isSelected(t){const r=t||fr();if(r==null)return!1;const n=r.getNodes().some((s=>s.__key===this.__key));if(hr(this))return n;if(Vt(r)&&r.anchor.type==="element"&&r.focus.type==="element"){if(r.isCollapsed())return!1;const s=this.getParent();if(zn(this)&&this.isInline()&&s){const a=r.isBackward()?r.focus:r.anchor;if(s.is(a.getNode())&&a.offset===s.getChildrenSize()&&this.is(s.getLastChild()))return!1}}return n}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(t===null)return-1;let r=t.getFirstChild(),n=0;for(;r!==null;){if(this.is(r))return n;n++,r=r.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return t===null?null:za(t)}getParentOrThrow(){const t=this.getParent();return t===null&&Zt(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){const r=t.getParent();if($o(r))return jt(t)||t===this&&zn(t)||Zt(194),t;t=r}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return t===null&&Zt(67,this.__key),t}getParents(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r),r=r.getParent();return t}getParentKeys(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r.__key),r=r.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return t===null?null:za(t)}getPreviousSiblings(){const t=[],r=this.getParent();if(r===null)return t;let n=r.getFirstChild();for(;n!==null&&!n.is(this);)t.push(n),n=n.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return t===null?null:za(t)}getNextSiblings(){const t=[];let r=this.getNextSibling();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getCommonAncestor(t){const r=jt(this)?this:this.getParent(),n=jt(t)?t:t.getParent(),s=r&&n?Wb(r,n):null;return s?s.commonAncestor:null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){const r=Wb(this,t);return r!==null&&(r.type==="descendant"||(r.type==="branch"?dU(r)===-1:(r.type!=="same"&&r.type!=="ancestor"&&Zt(279),!1)))}isParentOf(t){const r=Wb(this,t);return r!==null&&r.type==="ancestor"}getNodesBetween(t){const r=this.isBefore(t),n=[],s=new Set;let a=this;for(;a!==null;){const i=a.__key;if(s.has(i)||(s.add(i),n.push(a)),a===t)break;const o=jt(a)?r?a.getFirstChild():a.getLastChild():null;if(o!==null){a=o;continue}const l=r?a.getNextSibling():a.getPreviousSibling();if(l!==null){a=l;continue}const u=a.getParentOrThrow();if(s.has(u.__key)||n.push(u),u===t)break;let d=null,f=u;do{if(f===null&&Zt(68),d=r?f.getNextSibling():f.getPreviousSibling(),f=f.getParent(),f===null)break;d!==null||s.has(f.__key)||n.push(f)}while(d===null);a=d}return r||n.reverse(),n}isDirty(){const t=Js()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){const t=za(this.__key);return t===null&&Zt(113),t}getWritable(){Hi();const t=Kf(),r=Js(),n=t._nodeMap,s=this.__key,a=this.getLatest(),i=r._cloneNotNeeded,o=fr();if(o!==null&&o.setCachedNodes(null),i.has(s))return y4(a),a;const l=iC(a);return i.add(s),y4(l),n.set(s,l),l}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,r){Zt(70)}updateDOM(t,r,n){Zt(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){const t=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...t}}static importJSON(t){Zt(18,this.name)}updateFromJSON(t){return(function(r,n){const s=r.getWritable(),a=n.$;let i=a;for(const o of fz(s).flatKeys)o in n&&(i!==void 0&&i!==a||(i={...a}),i[o]=n[o]);return(s.__state||i)&&Yae(r).updateFromJSON(i),s})(this,t)}static transform(){return null}remove(t){c8(this,!0,t)}replace(t,r){Hi();let n=fr();n!==null&&(n=n.clone()),lS(this,t);const s=this.getLatest(),a=this.__key,i=t.__key,o=t.getWritable(),l=this.getParentOrThrow().getWritable(),u=l.__size;im(o);const d=s.getPreviousSibling(),f=s.getNextSibling(),h=s.__prev,g=s.__next,x=s.__parent;if(c8(s,!1,!0),d===null?l.__first=i:d.getWritable().__next=i,o.__prev=h,f===null?l.__last=i:f.getWritable().__prev=i,o.__next=g,o.__parent=x,l.__size=u,r&&(jt(this)&&jt(o)||Zt(139),this.getChildren().forEach((y=>{o.append(y)}))),Vt(n)){Xi(n);const y=n.anchor,v=n.focus;y.key===a&&HP(y,o),v.key===a&&HP(v,o)}return wf()===a&&Gi(i),o}insertAfter(t,r=!0){Hi(),lS(this,t);const n=this.getWritable(),s=t.getWritable(),a=s.getParent(),i=fr();let o=!1,l=!1;if(a!==null){const g=t.getIndexWithinParent();if(im(s),Vt(i)){const x=a.__key,y=i.anchor,v=i.focus;o=y.type==="element"&&y.key===x&&y.offset===g+1,l=v.type==="element"&&v.key===x&&v.offset===g+1}}const u=this.getNextSibling(),d=this.getParentOrThrow().getWritable(),f=s.__key,h=n.__next;if(u===null?d.__last=f:u.getWritable().__prev=f,d.__size++,n.__next=f,s.__next=h,s.__prev=n.__key,s.__parent=n.__parent,r&&Vt(i)){const g=this.getIndexWithinParent();m4(i,d,g+1);const x=d.__key;o&&i.anchor.set(x,g+2,"element"),l&&i.focus.set(x,g+2,"element")}return t}insertBefore(t,r=!0){Hi(),lS(this,t);const n=this.getWritable(),s=t.getWritable(),a=s.__key;im(s);const i=this.getPreviousSibling(),o=this.getParentOrThrow().getWritable(),l=n.__prev,u=this.getIndexWithinParent();i===null?o.__first=a:i.getWritable().__next=a,o.__size++,n.__prev=a,s.__prev=l,s.__next=n.__key,s.__parent=n.__parent;const d=fr();return r&&Vt(d)&&m4(d,this.getParentOrThrow(),u),t}isParentRequired(){return!1}createParentElementNode(){return Ns()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,r){Hi();const n=this.getPreviousSibling(),s=this.getParentOrThrow();if(n===null)return s.select(0,0);if(jt(n))return n.select();if(!hr(n)){const a=n.getIndexWithinParent()+1;return s.select(a,a)}return n.select(t,r)}selectNext(t,r){Hi();const n=this.getNextSibling(),s=this.getParentOrThrow();if(n===null)return s.select();if(jt(n))return n.select(0,0);if(!hr(n)){const a=n.getIndexWithinParent();return s.select(a,a)}return n.select(t,r)}markDirty(){this.getWritable()}reconcileObservedMutation(t,r){this.markDirty()}}class r2 extends i1{static getType(){return"linebreak"}static clone(t){return new r2(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:t=>(function(r){const n=r.parentElement;if(n!==null&&v4(n)){const s=n.firstChild;if(s===r||s.nextSibling===r&&Vw(s)){const a=n.lastChild;if(a===r||a.previousSibling===r&&Vw(a))return!0}}return!1})(t)||(function(r){const n=r.parentElement;if(n!==null&&v4(n)){const s=n.firstChild;if(s===r||s.nextSibling===r&&Vw(s))return!1;const a=n.lastChild;if(a===r||a.previousSibling===r&&Vw(a))return!0}return!1})(t)?null:{conversion:fie,priority:0}}}static importJSON(t){return Yu().updateFromJSON(t)}}function fie(e){return{node:Yu()}}function Yu(){return Wo(new r2)}function Kd(e){return e instanceof r2}function Vw(e){return m0(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function nS(e,t){return 16&t?"code":t&jT?"mark":32&t?"sub":64&t?"sup":null}function sS(e,t){return 1&t?"strong":2&t?"em":"span"}function Bz(e,t,r,n,s){const a=n.classList;let i=kp(s,"base");i!==void 0&&a.add(...i),i=kp(s,"underlineStrikethrough");let o=!1;const l=t&i4&&t&a4;i!==void 0&&(r&i4&&r&a4?(o=!0,l||a.add(...i)):l&&a.remove(...i));for(const u in vm){const d=vm[u];if(i=kp(s,u),i!==void 0)if(r&d){if(o&&(u==="underline"||u==="strikethrough")){t&d&&a.remove(...i);continue}t&d&&(!l||u!=="underline")&&u!=="strikethrough"||a.add(...i)}else t&d&&a.remove(...i)}}function $z(e,t,r){const n=t.firstChild,s=r.isComposing(),a=e+(s?F_:"");if(n==null)t.textContent=a;else{const i=n.nodeValue;if(i!==a)if(s||xm){const[o,l,u]=(function(d,f){const h=d.length,g=f.length;let x=0,y=0;for(;x<h&&x<g&&d[x]===f[x];)x++;for(;y+x<h&&y+x<g&&d[h-y-1]===f[g-y-1];)y++;return[x,h-x-y,f.slice(x,g-y)]})(i,a);l!==0&&n.deleteData(o,l),n.insertData(o,u)}else n.nodeValue=a}}function zP(e,t,r,n,s,a){$z(s,e,t);const i=a.theme.text;i!==void 0&&Bz(0,0,n,e,i)}function qw(e,t){const r=document.createElement(t);return r.appendChild(e),r}class qf extends i1{static getType(){return"text"}static clone(t){return new qf(t.__text,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail}constructor(t="",r){super(r),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return zae[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===wf()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const r=vm[t];return!!(this.getFormat()&r)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,r){return x4(this.getLatest().__format,t,r)}canHaveFormat(){return!0}isInline(){return!0}createDOM(t,r){const n=this.__format,s=nS(0,n),a=sS(0,n),i=s===null?a:s,o=document.createElement(i);let l=o;this.hasFormat("code")&&o.setAttribute("spellcheck","false"),s!==null&&(l=document.createElement(a),o.appendChild(l)),zP(l,this,0,n,this.__text,t);const u=this.__style;return u!==""&&(o.style.cssText=u),o}updateDOM(t,r,n){const s=this.__text,a=t.__format,i=this.__format,o=nS(0,a),l=nS(0,i),u=sS(0,a),d=sS(0,i);if((o===null?u:o)!==(l===null?d:l))return!0;if(o===l&&u!==d){const y=r.firstChild;y==null&&Zt(48);const v=document.createElement(d);return zP(v,this,0,i,s,n),r.replaceChild(v,y),!1}let f=r;l!==null&&o!==null&&(f=r.firstChild,f==null&&Zt(49)),$z(s,f,this);const h=n.theme.text;h!==void 0&&a!==i&&Bz(0,a,i,f,h);const g=t.__style,x=this.__style;return g!==x&&(r.style.cssText=x),!1}static importDOM(){return{"#text":()=>({conversion:pie,priority:0}),b:()=>({conversion:mie,priority:0}),code:()=>({conversion:Dd,priority:0}),em:()=>({conversion:Dd,priority:0}),i:()=>({conversion:Dd,priority:0}),mark:()=>({conversion:Dd,priority:0}),s:()=>({conversion:Dd,priority:0}),span:()=>({conversion:hie,priority:0}),strong:()=>({conversion:Dd,priority:0}),sub:()=>({conversion:Dd,priority:0}),sup:()=>({conversion:Dd,priority:0}),u:()=>({conversion:Dd,priority:0})}}static importJSON(t){return oa().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style)}exportDOM(t){let{element:r}=super.exportDOM(t);return As(r)||Zt(132),r.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?r.style.textTransform="lowercase":this.hasFormat("uppercase")?r.style.textTransform="uppercase":this.hasFormat("capitalize")&&(r.style.textTransform="capitalize"),this.hasFormat("bold")&&(r=qw(r,"b")),this.hasFormat("italic")&&(r=qw(r,"i")),this.hasFormat("strikethrough")&&(r=qw(r,"s")),this.hasFormat("underline")&&(r=qw(r,"u")),{element:r}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(t,r){}setFormat(t){const r=this.getWritable();return r.__format=typeof t=="string"?vm[t]:t,r}setDetail(t){const r=this.getWritable();return r.__detail=typeof t=="string"?Lae[t]:t,r}setStyle(t){const r=this.getWritable();return r.__style=t,r}toggleFormat(t){const r=x4(this.getFormat(),t,null);return this.setFormat(r)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const r=$ae[t];if(this.__mode===r)return this;const n=this.getWritable();return n.__mode=r,n}setTextContent(t){if(this.__text===t)return this;const r=this.getWritable();return r.__text=t,r}select(t,r){Hi();let n=t,s=r;const a=fr(),i=this.getTextContent(),o=this.__key;if(typeof i=="string"){const l=i.length;n===void 0&&(n=l),s===void 0&&(s=l)}else n=0,s=0;if(!Vt(a))return Wz(o,n,o,s,"text","text");{const l=wf();l!==a.anchor.key&&l!==a.focus.key||Gi(o),a.setTextNodeRange(this,n,this,s)}return a}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,r,n,s){const a=this.getWritable(),i=a.__text,o=n.length;let l=t;l<0&&(l=o+l,l<0&&(l=0));const u=fr();if(s&&Vt(u)){const f=t+o;u.setTextNodeRange(a,f,a,f)}const d=i.slice(0,l)+n+i.slice(l+r);return a.__text=d,a}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){Hi();const r=this.getLatest(),n=r.getTextContent();if(n==="")return[];const s=r.__key,a=wf(),i=n.length;t.sort(((j,A)=>j-A)),t.push(i);const o=[],l=t.length;for(let j=0,A=0;j<i&&A<=l;A++){const O=t[A];O>j&&(o.push(n.slice(j,O)),j=O)}const u=o.length;if(u===1)return[r];const d=o[0],f=r.getParent();let h;const g=r.getFormat(),x=r.getStyle(),y=r.__detail;let v=!1,T=null,k=null;const b=fr();if(Vt(b)){const[j,A]=b.isBackward()?[b.focus,b.anchor]:[b.anchor,b.focus];j.type==="text"&&j.key===s&&(T=j),A.type==="text"&&A.key===s&&(k=A)}r.isSegmented()?(h=oa(d),h.__format=g,h.__style=x,h.__detail=y,h.__state=jP(r,h),v=!0):h=r.setTextContent(d);const N=[h];for(let j=1;j<u;j++){const A=oa(o[j]);A.__format=g,A.__style=x,A.__detail=y,A.__state=jP(r,A);const O=A.__key;a===s&&Gi(O),N.push(A)}const E=T?T.offset:null,P=k?k.offset:null;let M=0;for(const j of N){if(!T&&!k)break;const A=M+j.getTextContentSize();if(T!==null&&E!==null&&E<=A&&E>=M&&(T.set(j.getKey(),E-M,"text"),E<A&&(T=null)),k!==null&&P!==null&&P<=A&&P>=M){k.set(j.getKey(),P-M,"text");break}M=A}if(f!==null){(function(O){const L=O.getPreviousSibling(),q=O.getNextSibling();L!==null&&y4(L),q!==null&&y4(q)})(this);const j=f.getWritable(),A=this.getIndexWithinParent();v?(j.splice(A,0,N),this.remove()):j.splice(A,1,N),Vt(b)&&m4(b,f,A,u-1)}return N}mergeWithSibling(t){const r=t===this.getPreviousSibling();r||t===this.getNextSibling()||Zt(50);const n=this.__key,s=t.__key,a=this.__text,i=a.length;wf()===s&&Gi(n);const o=fr();if(Vt(o)){const f=o.anchor,h=o.focus;f!==null&&f.key===s&&JP(f,r,n,t,i),h!==null&&h.key===s&&JP(h,r,n,t,i)}const l=t.__text,u=r?l+a:a+l;this.setTextContent(u);const d=this.getWritable();return t.remove(),d}isTextEntity(){return!1}}function hie(e){return{forChild:WT(e.style),node:null}}function mie(e){const t=e,r=t.style.fontWeight==="normal";return{forChild:WT(t.style,r?void 0:"bold"),node:null}}const UP=new WeakMap;function gie(e){if(!As(e))return!1;if(e.nodeName==="PRE")return!0;const t=e.style.whiteSpace;return typeof t=="string"&&t.startsWith("pre")}function pie(e){const t=e;e.parentElement===null&&Zt(129);let r=t.textContent||"";if((function(n){let s,a=n.parentNode;const i=[n];for(;a!==null&&(s=UP.get(a))===void 0&&!gie(a);)i.push(a),a=a.parentNode;const o=s===void 0?a:s;for(let l=0;l<i.length;l++)UP.set(i[l],o);return o})(t)!==null){const n=r.split(/(\r?\n|\t)/),s=[],a=n.length;for(let i=0;i<a;i++){const o=n[i];o===`
`||o===`\r
`?s.push(Yu()):o==="	"?s.push(o1()):o!==""&&s.push(oa(o))}return{node:s}}if(r=r.replace(/\r/g,"").replace(/[ \t\n]+/g," "),r==="")return{node:null};if(r[0]===" "){let n=t,s=!0;for(;n!==null&&(n=WP(n,!1))!==null;){const a=n.textContent||"";if(a.length>0){/[ \t\n]$/.test(a)&&(r=r.slice(1)),s=!1;break}}s&&(r=r.slice(1))}if(r[r.length-1]===" "){let n=t,s=!0;for(;n!==null&&(n=WP(n,!0))!==null;)if((n.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){s=!1;break}s&&(r=r.slice(0,r.length-1))}return r===""?{node:null}:{node:oa(r)}}function WP(e,t){let r=e;for(;;){let n;for(;(n=t?r.nextSibling:r.previousSibling)===null;){const a=r.parentElement;if(a===null)return null;r=a}if(r=n,As(r)){const a=r.style.display;if(a===""&&!x8(r)||a!==""&&!a.startsWith("inline"))return null}let s=r;for(;(s=t?r.firstChild:r.lastChild)!==null;)r=s;if(m0(r))return r;if(r.nodeName==="BR")return null}}const xie={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Dd(e){const t=xie[e.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:WT(e.style,t),node:null}}function oa(e=""){return Wo(new qf(e))}function hr(e){return e instanceof qf}function WT(e,t){const r=e.fontWeight,n=e.textDecoration.split(" "),s=r==="700"||r==="bold",a=n.includes("line-through"),i=e.fontStyle==="italic",o=n.includes("underline"),l=e.verticalAlign;return u=>(hr(u)&&(s&&!u.hasFormat("bold")&&u.toggleFormat("bold"),a&&!u.hasFormat("strikethrough")&&u.toggleFormat("strikethrough"),i&&!u.hasFormat("italic")&&u.toggleFormat("italic"),o&&!u.hasFormat("underline")&&u.toggleFormat("underline"),l!=="sub"||u.hasFormat("subscript")||u.toggleFormat("subscript"),l!=="super"||u.hasFormat("superscript")||u.toggleFormat("superscript"),t&&!u.hasFormat(t)&&u.toggleFormat(t)),u)}class n2 extends qf{static getType(){return"tab"}static clone(t){return new n2(t.__key)}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}createDOM(t){const r=super.createDOM(t),n=kp(t.theme,"tab");return n!==void 0&&r.classList.add(...n),r}static importJSON(t){return o1().updateFromJSON(t)}setTextContent(t){return t!=="	"&&t!==""&&Zt(126),super.setTextContent("	")}spliceText(t,r,n,s){return n===""&&r===0||n==="	"&&r===1||Zt(286),this}setDetail(t){return t!==2&&Zt(127),this}setMode(t){return t!=="normal"&&Zt(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function o1(){return Wo(new n2)}function I_(e){return e instanceof n2}class yie{constructor(t,r,n){this._selection=null,this.key=t,this.offset=r,this.type=n}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){return this.key===t.key?this.offset<t.offset:uU(dc(a0(this,"next")),dc(a0(t,"next")))<0}getNode(){const t=za(this.key);return t===null&&Zt(20),t}set(t,r,n,s){const a=this._selection,i=this.key;s&&this.key===t&&this.offset===r&&this.type===n||(this.key=t,this.offset=r,this.type=n,s2()||(wf()===i&&Gi(t),a!==null&&(a.setCachedNodes(null),a.dirty=!0)))}}function Xu(e,t,r){return new yie(e,t,r)}function aS(e,t){let r=t.__key,n=e.offset,s="element";if(hr(t)){s="text";const a=t.getTextContentSize();n>a&&(n=a)}else if(!jt(t)){const a=t.getNextSibling();if(hr(a))r=a.__key,n=0,s="text";else{const i=t.getParent();i&&(r=i.__key,n=t.getIndexWithinParent()+1)}}e.set(r,n,s)}function HP(e,t){if(jt(t)){const r=t.getLastDescendant();jt(r)||hr(r)?aS(e,r):aS(e,t)}else aS(e,t)}class R_{constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!io(t))return!1;const r=this._nodes,n=t._nodes;return r.size===n.size&&Array.from(r).every((s=>n.has(s)))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new R_(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const r=this.getNodes(),n=r.length,s=r[n-1];let a;if(hr(s))a=s.select();else{const i=s.getIndexWithinParent()+1;a=s.getParentOrThrow().select(i,i)}a.insertNodes(t);for(let i=0;i<n;i++)r[i].remove()}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=this._nodes,n=[];for(const s of r){const a=za(s);a!==null&&n.push(a)}return s2()||(this._cachedNodes=n),n}getTextContent(){const t=this.getNodes();let r="";for(let n=0;n<t.length;n++)r+=t[n].getTextContent();return r}deleteNodes(){const t=this.getNodes();if((fr()||l1())===this&&t[0]){const r=Yi(t[0],"next");roe(Of(r,r))}for(const r of t)r.remove()}}function Vt(e){return e instanceof zm}class zm{constructor(t,r,n,s){this.anchor=t,this.focus=r,t._selection=this,r._selection=this,this._cachedNodes=null,this.format=n,this.style=s,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!Vt(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=(function(n){const s=[],[a,i]=n.getTextSlices();a&&s.push(a.caret.origin);const o=new Set,l=new Set;for(const u of n)if(qu(u)){const{origin:d}=u;s.length===0?o.add(d):(l.add(d),s.push(d))}else{const{origin:d}=u;jt(d)&&l.has(d)||s.push(d)}if(i&&s.push(i.caret.origin),Tm(n.focus)&&jt(n.focus.origin)&&n.focus.getNodeAtCaret()===null)for(let u=yc(n.focus.origin,"previous");qu(u)&&o.has(u.origin)&&!u.origin.isEmpty()&&u.origin.is(s[s.length-1]);u=dC(u))o.delete(u.origin),s.pop();for(;s.length>1;){const u=s[s.length-1];if(!jt(u)||l.has(u)||u.isEmpty()||o.has(u))break;s.pop()}if(s.length===0&&n.isCollapsed()){const u=dc(n.anchor),d=dc(n.anchor.getFlipped()),f=g=>Ef(g)?g.origin:g.getNodeAtCaret(),h=f(u)||f(d)||(n.anchor.getNodeAtCaret()?u.origin:d.origin);s.push(h)}return s})(hU(xM(this),"next"));return s2()||(this._cachedNodes=r),r}setTextNodeRange(t,r,n,s){this.anchor.set(t.__key,r,"text"),this.focus.set(n.__key,s,"text")}getTextContent(){const t=this.getNodes();if(t.length===0)return"";const r=t[0],n=t[t.length-1],s=this.anchor,a=this.focus,i=s.isBefore(a),[o,l]=u8(this);let u="",d=!0;for(let f=0;f<t.length;f++){const h=t[f];if(jt(h)&&!h.isInline())d||(u+=`
`),d=!h.isEmpty();else if(d=!1,hr(h)){let g=h.getTextContent();h===r?h===n?s.type==="element"&&a.type==="element"&&a.offset!==s.offset||(g=o<l?g.slice(o,l):g.slice(l,o)):g=i?g.slice(o):g.slice(l):h===n&&(g=i?g.slice(0,l):g.slice(0,o)),u+=g}else!zn(h)&&!Kd(h)||h===n&&this.isCollapsed()||(u+=h.getTextContent())}return u}applyDOMRange(t){const r=Js(),n=r.getEditorState()._selection,s=Uz(t.startContainer,t.startOffset,t.endContainer,t.endOffset,r,n);if(s===null)return;const[a,i]=s;this.anchor.set(a.key,a.offset,a.type,!0),this.focus.set(i.key,i.offset,i.type,!0),o4(this)}clone(){const t=this.anchor,r=this.focus;return new zm(Xu(t.key,t.offset,t.type),Xu(r.key,r.offset,r.type),this.format,this.style)}toggleFormat(t){this.format=x4(this.format,t,null),this.dirty=!0}setFormat(t){this.format=t,this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const r=vm[t];return!!(this.format&r)}insertRawText(t){const r=t.split(/(\r?\n|\t)/),n=[],s=r.length;for(let a=0;a<s;a++){const i=r[a];i===`
`||i===`\r
`?n.push(Yu()):i==="	"?n.push(o1()):n.push(oa(i))}this.insertNodes(n)}insertText(t){const r=this.anchor,n=this.focus,s=this.format,a=this.style;let i=r,o=n;!this.isCollapsed()&&n.isBefore(r)&&(i=n,o=r),i.type==="element"&&(function(v,T,k,b){const N=v.getNode(),E=N.getChildAtIndex(v.offset),P=oa();if(P.setFormat(k),P.setStyle(b),XT(E))E.splice(0,0,[P]);else{const M=ri(N)?Ns().append(P):P;E===null?N.append(M):E.insertBefore(M)}v.is(T)&&T.set(P.__key,0,"text"),v.set(P.__key,0,"text")})(i,o,s,a),o.type==="element"&&Em(o,dc(a0(o,"next")));const l=i.offset;let u=o.offset;const d=this.getNodes(),f=d.length;let h=d[0];hr(h)||Zt(26);const g=h.getTextContent().length,x=h.getParentOrThrow();let y=d[f-1];if(f===1&&o.type==="element"&&(u=g,o.set(i.key,u,"text")),this.isCollapsed()&&l===g&&(Rd(h)||!h.canInsertTextAfter()||!x.canInsertTextAfter()&&h.getNextSibling()===null)){let v=h.getNextSibling();if(hr(v)&&v.canInsertTextBefore()&&!Rd(v)||(v=oa(),v.setFormat(s),v.setStyle(a),x.canInsertTextAfter()?h.insertAfter(v):x.insertAfter(v)),v.select(0,0),h=v,t!=="")return void this.insertText(t)}else if(this.isCollapsed()&&l===0&&(Rd(h)||!h.canInsertTextBefore()||!x.canInsertTextBefore()&&h.getPreviousSibling()===null)){let v=h.getPreviousSibling();if(hr(v)&&!Rd(v)||(v=oa(),v.setFormat(s),x.canInsertTextBefore()?h.insertBefore(v):x.insertBefore(v)),v.select(),h=v,t!=="")return void this.insertText(t)}else if(h.isSegmented()&&l!==g){const v=oa(h.getTextContent());v.setFormat(s),h.replace(v),h=v}else if(!this.isCollapsed()&&t!==""){const v=y.getParent();if(!x.canInsertTextBefore()||!x.canInsertTextAfter()||jt(v)&&(!v.canInsertTextBefore()||!v.canInsertTextAfter()))return this.insertText(""),zz(this.anchor,this.focus,null),void this.insertText(t)}if(f===1){if(am(h)){const b=oa(t);return b.select(),void h.replace(b)}const v=h.getFormat(),T=h.getStyle();if(l!==u||v===s&&T===a){if(I_(h)){const b=oa(t);return b.setFormat(s),b.setStyle(a),b.select(),void h.replace(b)}}else{if(h.getTextContent()!==""){const b=oa(t);if(b.setFormat(s),b.setStyle(a),b.select(),l===0)h.insertBefore(b,!1);else{const[N]=h.splitText(l);N.insertAfter(b,!1)}return void(b.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length))}h.setFormat(s),h.setStyle(a)}const k=u-l;h=h.spliceText(l,k,t,!0),h.getTextContent()===""?h.remove():this.anchor.type==="text"&&(h.isComposing()?this.anchor.offset-=t.length:(this.format=v,this.style=T))}else{const v=new Set([...h.getParentKeys(),...y.getParentKeys()]),T=jt(h)?h:h.getParentOrThrow();let k=jt(y)?y:y.getParentOrThrow(),b=y;if(!T.is(k)&&k.isInline())do b=k,k=k.getParentOrThrow();while(k.isInline());if(o.type==="text"&&(u!==0||y.getTextContent()==="")||o.type==="element"&&y.getIndexWithinParent()<u)if(hr(y)&&!am(y)&&u!==y.getTextContentSize()){if(y.isSegmented()){const j=oa(y.getTextContent());y.replace(j),y=j}ri(o.getNode())||o.type!=="text"||(y=y.spliceText(0,u,"")),v.add(y.__key)}else{const j=y.getParentOrThrow();j.canBeEmpty()||j.getChildrenSize()!==1?y.remove():j.remove()}else v.add(y.__key);const N=k.getChildren(),E=new Set(d),P=T.is(k),M=T.isInline()&&h.getNextSibling()===null?T:h;for(let j=N.length-1;j>=0;j--){const A=N[j];if(A.is(h)||jt(A)&&A.isParentOf(h))break;A.isAttached()&&(!E.has(A)||A.is(b)?P||M.insertAfter(A,!1):A.remove())}if(!P){let j=k,A=null;for(;j!==null;){const O=j.getChildren(),L=O.length;(L===0||O[L-1].is(A))&&(v.delete(j.__key),A=j),j=j.getParent()}}if(am(h))if(l===g)h.select();else{const j=oa(t);j.select(),h.replace(j)}else h=h.spliceText(l,g-l,t,!0),h.getTextContent()===""?h.remove():h.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);for(let j=1;j<f;j++){const A=d[j],O=A.__key;v.has(O)||A.remove()}}}removeText(){const t=fr()===this;Hb(this,noe(xM(this))),t&&fr()!==this&&Xi(this)}formatText(t,r=null){if(this.isCollapsed())return this.toggleFormat(t),void Gi(null);const n=this.getNodes(),s=[];for(const N of n)hr(N)&&s.push(N);const a=N=>{n.forEach((E=>{if(jt(E)){const P=E.getFormatFlags(t,N);E.setTextFormat(P)}}))},i=s.length;if(i===0)return this.toggleFormat(t),Gi(null),void a(r);const o=this.anchor,l=this.focus,u=this.isBackward(),d=u?l:o,f=u?o:l;let h=0,g=s[0],x=d.type==="element"?0:d.offset;if(d.type==="text"&&x===g.getTextContentSize()&&(h=1,g=s[1],x=0),g==null)return;const y=g.getFormatFlags(t,r);a(y);const v=i-1;let T=s[v];const k=f.type==="text"?f.offset:T.getTextContentSize();if(g.is(T)){if(x===k)return;if(Rd(g)||x===0&&k===g.getTextContentSize())g.setFormat(y);else{const N=g.splitText(x,k),E=x===0?N[0]:N[1];E.setFormat(y),d.type==="text"&&d.set(E.__key,0,"text"),f.type==="text"&&f.set(E.__key,k-x,"text")}return void(this.format=y)}x===0||Rd(g)||([,g]=g.splitText(x),x=0),g.setFormat(y);const b=T.getFormatFlags(t,y);k>0&&(k===T.getTextContentSize()||Rd(T)||([T]=T.splitText(k)),T.setFormat(b));for(let N=h+1;N<v;N++){const E=s[N],P=E.getFormatFlags(t,b);E.setFormat(P)}d.type==="text"&&d.set(g.__key,x,"text"),f.type==="text"&&f.set(T.__key,k,"text"),this.format=y|b}insertNodes(t){if(t.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const x=fr();return Vt(x)||Zt(134),x.insertNodes(t)}const r=(this.isBackward()?this.focus:this.anchor).getNode(),n=uS(r,uc),s=t[t.length-1];if(jt(n)&&"__language"in n){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const x=iS(this);n.splice(x,0,t),s.selectEnd()}return}if(!t.some((x=>(jt(x)||zn(x))&&!x.isInline()))){jt(n)||Zt(211,r.constructor.name,r.getType());const x=iS(this);return n.splice(x,0,t),void s.selectEnd()}const a=(function(x){const y=Ns();let v=null;for(let T=0;T<x.length;T++){const k=x[T],b=Kd(k);if(b||zn(k)&&k.isInline()||jt(k)&&k.isInline()||hr(k)||k.isParentRequired()){if(v===null&&(v=k.createParentElementNode(),y.append(v),b))continue;v!==null&&v.append(k)}else y.append(k),v=null}return y})(t),i=a.getLastDescendant(),o=a.getChildren(),l=!jt(n)||!n.isEmpty()?this.insertParagraph():null,u=o[o.length-1];let d=o[0];var f;jt(f=d)&&uc(f)&&!f.isEmpty()&&jt(n)&&(!n.isEmpty()||n.canMergeWhenEmpty())&&(jt(n)||Zt(211,r.constructor.name,r.getType()),n.append(...d.getChildren()),d=o[1]),d&&(n===null&&Zt(212,r.constructor.name,r.getType()),(function(x,y,v){const T=y.getParentOrThrow().getLastChild();let k=y;const b=[y];for(;k!==T;)k.getNextSibling()||Zt(140),k=k.getNextSibling(),b.push(k);let N=x;for(const E of b)N=N.insertAfter(E)})(n,d));const h=uS(i,uc);l&&jt(h)&&(l.canMergeWhenEmpty()||uc(u))&&(h.append(...l.getChildren()),l.remove()),jt(n)&&n.isEmpty()&&n.remove(),i.selectEnd();const g=jt(n)?n.getLastChild():null;Kd(g)&&h!==n&&g.remove()}insertParagraph(){if(this.anchor.key==="root"){const i=Ns();return $s().splice(this.anchor.offset,0,[i]),i.select(),i}const t=iS(this),r=uS(this.anchor.getNode(),uc);jt(r)||Zt(213);const n=r.getChildAtIndex(t),s=n?[n,...n.getNextSiblings()]:[],a=r.insertNewAfter(this,!1);return a?(a.append(...s),a.selectStart(),a):null}insertLineBreak(t){const r=Yu();if(this.insertNodes([r]),t){const n=r.getParentOrThrow(),s=r.getIndexWithinParent();n.select(s,s)}}extract(){const t=this.getNodes(),r=t.length,n=r-1,s=this.anchor,a=this.focus;let i=t[0],o=t[n];const[l,u]=u8(this);if(r===0)return[];if(r===1){if(hr(i)&&!this.isCollapsed()){const f=l>u?u:l,h=l>u?l:u,g=i.splitText(f,h),x=f===0?g[0]:g[1];return x!=null?[x]:[]}return[i]}const d=s.isBefore(a);if(hr(i)){const f=d?l:u;f===i.getTextContentSize()?t.shift():f!==0&&([,i]=i.splitText(f),t[0]=i)}if(hr(o)){const f=o.getTextContent().length,h=d?u:l;h===0?t.pop():h!==f&&([o]=o.splitText(h),t[n]=o)}return t}modify(t,r,n){if(QP(this,t,r,n))return;const s=t==="move",a=Js(),i=au(xc(a));if(!i)return;const o=a._blockCursorElement,l=a._rootElement,u=this.focus.getNode();if(l===null||o===null||!jt(u)||u.isInline()||u.canBeEmpty()||g8(o,a,l),this.dirty){let d=_m(a,this.anchor.key),f=_m(a,this.focus.key);this.anchor.type==="text"&&(d=Bp(d)),this.focus.type==="text"&&(f=Bp(f)),d&&f&&Hz(i,d,this.anchor.offset,f,this.focus.offset)}if((function(d,f,h,g){d.modify(f,h,g)})(i,t,r?"backward":"forward",n),i.rangeCount>0){const d=i.getRangeAt(0),f=this.anchor.getNode(),h=ri(f)?f:zie(f);if(this.applyDOMRange(d),this.dirty=!0,!s){const g=this.getNodes(),x=[];let y=!1;for(let v=0;v<g.length;v++){const T=g[v];m8(T,h)?x.push(T):y=!0}if(y&&x.length>0)if(r){const v=x[0];jt(v)?v.selectStart():v.getParentOrThrow().selectStart()}else{const v=x[x.length-1];jt(v)?v.selectEnd():v.getParentOrThrow().selectEnd()}i.anchorNode===d.startContainer&&i.anchorOffset===d.startOffset||(function(v){const T=v.focus,k=v.anchor,b=k.key,N=k.offset,E=k.type;k.set(T.key,T.offset,T.type,!0),T.set(b,N,E,!0)})(this)}}n==="lineboundary"&&QP(this,t,r,n,"decorators")}forwardDeletion(t,r,n){if(!n&&(t.type==="element"&&jt(r)&&t.offset===r.getChildrenSize()||t.type==="text"&&t.offset===r.getTextContentSize())){const s=r.getParent(),a=r.getNextSibling()||(s===null?null:s.getNextSibling());if(jt(a)&&a.isShadowRoot())return!0}return!1}deleteCharacter(t){const r=this.isCollapsed();if(this.isCollapsed()){const n=this.anchor;let s=n.getNode();if(this.forwardDeletion(n,s,t))return;const a=hC(a0(n,t?"previous":"next"));if(a.getTextSlices().every((o=>o===null||o.distance===0))){let o={type:"initial"};for(const l of a.iterNodeCarets("shadowRoot"))if(qu(l)){if(!l.origin.isInline()){if(l.origin.isShadowRoot()){if(o.type==="merge-block")break;if(jt(a.anchor.origin)&&a.anchor.origin.isEmpty()){const u=dc(l);Hb(this,Of(u,u)),a.anchor.origin.remove()}return}o.type!=="merge-next-block"&&o.type!=="merge-block"||(o={block:o.block,caret:l,type:"merge-block"})}}else{if(o.type==="merge-block")break;if(Tm(l)){if(jt(l.origin)){if(l.origin.isInline()){if(!l.origin.isParentOf(a.anchor.origin))break}else o={block:l.origin,type:"merge-next-block"};continue}if(zn(l.origin)){if(!l.origin.isIsolated())if(o.type==="merge-next-block"&&(l.origin.isKeyboardSelectable()||!l.origin.isInline())&&jt(a.anchor.origin)&&a.anchor.origin.isEmpty()){a.anchor.origin.remove();const u=HT();u.add(l.origin.getKey()),Xi(u)}else l.origin.remove();return}break}}if(o.type==="merge-block"){const{caret:l,block:u}=o;return Hb(this,Of(!l.origin.isEmpty()&&u.isEmpty()?gC(Yi(u,l.direction)):a.anchor,l)),this.removeText()}}const i=this.focus;if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&n.offset===0&&VP(this,n.getNode()))return}else{const o=i.type==="text"?i.getNode():null;if(s=n.type==="text"?n.getNode():null,o!==null&&o.isSegmented()){const l=i.offset,u=o.getTextContentSize();if(o.is(s)||t&&l!==u||!t&&l!==0)return void qP(o,t,l)}else if(s!==null&&s.isSegmented()){const l=n.offset,u=s.getTextContentSize();if(s.is(o)||t&&l!==0||!t&&l!==u)return void qP(s,t,l)}(function(l,u){const d=l.anchor,f=l.focus,h=d.getNode(),g=f.getNode();if(h===g&&d.type==="text"&&f.type==="text"){const x=d.offset,y=f.offset,v=x<y,T=v?x:y,k=v?y:x,b=k-1;T!==b&&(function(N){return!(sU(N)||vie(N))})(h.getTextContent().slice(T,k))&&(u?f.set(f.key,b,f.type):d.set(d.key,b,d.type))}})(this,t)}}if(this.removeText(),t&&!r&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const n=this.anchor.getNode();n.isEmpty()&&ri(n.getParent())&&n.getPreviousSibling()===null&&VP(this,n)}}deleteLine(t){this.isCollapsed()&&this.modify("extend",t,"lineboundary"),this.isCollapsed()?this.deleteCharacter(t):this.removeText()}deleteWord(t){if(this.isCollapsed()){const r=this.anchor,n=r.getNode();if(this.forwardDeletion(r,n,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function io(e){return e instanceof R_}function GP(e){const t=e.offset;if(e.type==="text")return t;const r=e.getNode();return t===r.getChildrenSize()?r.getTextContent().length:0}function u8(e){const t=e.getStartEndPoints();if(t===null)return[0,0];const[r,n]=t;return r.type==="element"&&n.type==="element"&&r.key===n.key&&r.offset===n.offset?[0,0]:[GP(r),GP(n)]}function VP(e,t){for(let r=t;r;r=r.getParent()){if(jt(r)){if(r.collapseAtStart(e))return!0;if($o(r))break}if(r.getPreviousSibling())break}return!1}const vie=(()=>{try{const e=new RegExp("\\p{Emoji}","u"),t=e.test.bind(e);if(t("")&&t("#")&&t(""))return t}catch{}return()=>!1})();function qP(e,t,r){const n=e,s=n.getTextContent().split(/(?=\s)/g),a=s.length;let i=0,o=0;for(let u=0;u<a;u++){const d=u===a-1;if(o=i,i+=s[u].length,t&&i===r||i>r||d){s.splice(u,1),d&&(o=void 0);break}}const l=s.join("").trim();l===""?n.remove():(n.setTextContent(l),n.select(o,o))}function KP(e,t,r,n){let s,a=t;if(As(e)){let i=!1;const o=e.childNodes,l=o.length,u=n._blockCursorElement;a===l&&(i=!0,a=l-1);let d=o[a],f=!1;if(d===u)d=o[a+1],f=!0;else if(u!==null){const h=u.parentNode;e===h&&t>Array.prototype.indexOf.call(h.children,u)&&a--}if(s=pp(d),hr(s))a=Nf(s,i?"next":"previous");else{let h=pp(e);if(h===null)return null;if(jt(h)){const g=n.getElementByKey(h.getKey());g===null&&Zt(214),[h,a]=h.getDOMSlot(g).resolveChildIndex(h,g,e,t),jt(h)||Zt(215),i&&a>=h.getChildrenSize()&&(a=Math.max(0,h.getChildrenSize()-1));let y=h.getChildAtIndex(a);if(jt(y)&&(function(v,T,k){const b=v.getParent();return k===null||b===null||!b.canBeEmpty()||b!==k.getNode()})(y,0,r)){const v=i?y.getLastDescendant():y.getFirstDescendant();v===null?h=y:(y=v,h=jt(y)?y:y.getParentOrThrow()),a=0}hr(y)?(s=y,h=null,a=Nf(y,i?"next":"previous")):y!==h&&i&&!f&&(jt(h)||Zt(216),a=Math.min(h.getChildrenSize(),a+1))}else{const g=h.getIndexWithinParent();a=t===0&&zn(h)&&pp(e)===h?g:g+1,h=h.getParentOrThrow()}if(jt(h))return Xu(h.__key,a,"element")}}else s=pp(e);return hr(s)?Xu(s.__key,Nf(s,a,"clamp"),"text"):null}function YP(e,t,r){const n=e.offset,s=e.getNode();if(n===0){const a=s.getPreviousSibling(),i=s.getParent();if(t){if((r||!t)&&a===null&&jt(i)&&i.isInline()){const o=i.getPreviousSibling();hr(o)&&e.set(o.__key,o.getTextContent().length,"text")}}else jt(a)&&!r&&a.isInline()?e.set(a.__key,a.getChildrenSize(),"element"):hr(a)&&e.set(a.__key,a.getTextContent().length,"text")}else if(n===s.getTextContent().length){const a=s.getNextSibling(),i=s.getParent();if(t&&jt(a)&&a.isInline())e.set(a.__key,0,"element");else if((r||t)&&a===null&&jt(i)&&i.isInline()&&!i.canInsertTextAfter()){const o=i.getNextSibling();hr(o)&&e.set(o.__key,0,"text")}}}function zz(e,t,r){if(e.type==="text"&&t.type==="text"){const n=e.isBefore(t),s=e.is(t);YP(e,n,s),YP(t,!n,s),s&&t.set(e.key,e.offset,e.type);const a=Js();if(a.isComposing()&&a._compositionKey!==e.key&&Vt(r)){const i=r.anchor,o=r.focus;e.set(i.key,i.offset,i.type,!0),t.set(o.key,o.offset,o.type,!0)}}}function Uz(e,t,r,n,s,a){if(e===null||r===null||!o2(s,e,r))return null;const i=KP(e,t,Vt(a)?a.anchor:null,s);if(i===null)return null;const o=KP(r,n,Vt(a)?a.focus:null,s);if(o===null)return null;if(i.type==="element"&&o.type==="element"){const l=pp(e),u=pp(r);if(zn(l)&&zn(u))return null}return zz(i,o,a),[i,o]}function d8(e){return jt(e)&&!e.isInline()}function Wz(e,t,r,n,s,a){const i=Kf(),o=new zm(Xu(e,t,s),Xu(r,n,a),0,"");return o.dirty=!0,i._selection=o,o}function L_(){const e=Xu("root",0,"element"),t=Xu("root",0,"element");return new zm(e,t,0,"")}function HT(){return new R_(new Set)}function GT(e,t,r,n){const s=r._window;if(s===null)return null;const a=n||s.event,i=a?a.type:void 0,o=i==="selectionchange",l=!Yk&&(o||i==="beforeinput"||i==="compositionstart"||i==="compositionend"||i==="click"&&a&&a.detail===3||i==="drop"||i===void 0);let u,d,f,h;if(Vt(e)&&!l)return e.clone();if(t===null)return null;if(u=t.anchorNode,d=t.focusNode,f=t.anchorOffset,h=t.focusOffset,o&&Vt(e)&&!o2(r,u,d))return e.clone();const g=Uz(u,f,d,h,r,e);if(g===null)return null;const[x,y]=g;return new zm(x,y,Vt(e)?e.format:0,Vt(e)?e.style:"")}function fr(){return Kf()._selection}function l1(){return Js()._editorState._selection}function m4(e,t,r,n=1){const s=e.anchor,a=e.focus,i=s.getNode(),o=a.getNode();if(!t.is(i)&&!t.is(o))return;const l=t.__key;if(e.isCollapsed()){const u=s.offset;if(r<=u&&n>0||r<u&&n<0){const d=Math.max(0,u+n);s.set(l,d,"element"),a.set(l,d,"element"),XP(e)}}else{const u=e.isBackward(),d=u?a:s,f=d.getNode(),h=u?s:a,g=h.getNode();if(t.is(f)){const x=d.offset;(r<=x&&n>0||r<x&&n<0)&&d.set(l,Math.max(0,x+n),"element")}if(t.is(g)){const x=h.offset;(r<=x&&n>0||r<x&&n<0)&&h.set(l,Math.max(0,x+n),"element")}}XP(e)}function XP(e){const t=e.anchor,r=t.offset,n=e.focus,s=n.offset,a=t.getNode(),i=n.getNode();if(e.isCollapsed()){if(!jt(a))return;const o=a.getChildrenSize(),l=r>=o,u=l?a.getChildAtIndex(o-1):a.getChildAtIndex(r);if(hr(u)){let d=0;l&&(d=u.getTextContentSize()),t.set(u.__key,d,"text"),n.set(u.__key,d,"text")}}else{if(jt(a)){const o=a.getChildrenSize(),l=r>=o,u=l?a.getChildAtIndex(o-1):a.getChildAtIndex(r);if(hr(u)){let d=0;l&&(d=u.getTextContentSize()),t.set(u.__key,d,"text")}}if(jt(i)){const o=i.getChildrenSize(),l=s>=o,u=l?i.getChildAtIndex(o-1):i.getChildAtIndex(s);if(hr(u)){let d=0;l&&(d=u.getTextContentSize()),n.set(u.__key,d,"text")}}}}function g4(e,t,r,n,s){let a=null,i=0,o=null;n!==null?(a=n.__key,hr(n)?(i=n.getTextContentSize(),o="text"):jt(n)&&(i=n.getChildrenSize(),o="element")):s!==null&&(a=s.__key,hr(s)?o="text":jt(s)&&(o="element")),a!==null&&o!==null?e.set(a,i,o):(i=t.getIndexWithinParent(),i===-1&&(i=r.getChildrenSize()),e.set(r.__key,i,"element"))}function JP(e,t,r,n,s){e.type==="text"?e.set(r,e.offset+(t?0:s),"text"):e.offset>n.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function Hz(e,t,r,n,s){try{e.setBaseAndExtent(t,r,n,s)}catch{}}function wie(e,t,r,n,s,a,i){const o=n.anchorNode,l=n.focusNode,u=n.anchorOffset,d=n.focusOffset,f=document.activeElement;if(s.has(Xz)&&f!==a||f!==null&&ZT(f))return;if(!Vt(t))return void(e!==null&&o2(r,o,l)&&n.removeAllRanges());const h=t.anchor,g=t.focus,x=h.key,y=g.key,v=_m(r,x),T=_m(r,y),k=h.offset,b=g.offset,N=t.format,E=t.style,P=t.isCollapsed();let M=v,j=T,A=!1;if(h.type==="text"){M=Bp(v);const te=h.getNode();A=te.getFormat()!==N||te.getStyle()!==E}else Vt(e)&&e.anchor.type==="text"&&(A=!0);var O,L,q,Q,ae;if(g.type==="text"&&(j=Bp(T)),M!==null&&j!==null&&(P&&(e===null||A||Vt(e)&&(e.format!==N||e.style!==E))&&(O=N,L=E,q=k,Q=x,ae=performance.now(),Fz=[O,L,q,Q,ae]),u!==k||d!==b||o!==M||l!==j||n.type==="Range"&&P||(f!==null&&a.contains(f)||a.focus({preventScroll:!0}),h.type==="element"))){if(Hz(n,M,k,j,b),!s.has(Eie)&&t.isCollapsed()&&a!==null&&a===document.activeElement){const te=Vt(t)&&t.anchor.type==="element"?M.childNodes[k]||null:n.rangeCount>0?n.getRangeAt(0):null;if(te!==null){let ne;if(te instanceof Text){const B=document.createRange();B.selectNode(te),ne=B.getBoundingClientRect()}else ne=te.getBoundingClientRect();(function(B,V,R){const H=lU(R),U=aC(H);if(H===null||U===null)return;let{top:I,bottom:W}=V,K=0,Z=0,oe=R;for(;oe!==null;){const J=oe===H.body;if(J)K=0,Z=xc(B).innerHeight;else{const ue=oe.getBoundingClientRect();K=ue.top,Z=ue.bottom}let le=0;if(I<K?le=-(K-I):W>Z&&(le=W-Z),le!==0)if(J)U.scrollBy(0,le);else{const ue=oe.scrollTop;oe.scrollTop+=le;const de=oe.scrollTop-ue;I-=de,W-=de}if(J)break;oe=l2(oe)}})(r,ne,a)}}o8=!0}}function bie(e){let t=fr()||l1();t===null&&(t=$s().selectEnd()),t.insertNodes(e)}function iS(e){let t=e;e.isCollapsed()||t.removeText();const r=fr();Vt(r)&&(t=r),Vt(t)||Zt(161);const n=t.anchor;let s=n.getNode(),a=n.offset;for(;!uc(s);){const i=s;if([s,a]=_ie(s,a),i.is(s))break}return a}function _ie(e,t){const r=e.getParent();if(!r){const s=Ns();return $s().append(s),s.select(),[$s(),0]}if(hr(e)){const s=e.splitText(t);if(s.length===0)return[r,e.getIndexWithinParent()];const a=t===0?0:1;return[r,s[0].getIndexWithinParent()+a]}if(!jt(e)||t===0)return[r,e.getIndexWithinParent()];const n=e.getChildAtIndex(t);if(n){const s=new zm(Xu(e.__key,t,"element"),Xu(e.__key,t,"element"),0,""),a=e.insertNewAfter(s);a&&a.append(n,...n.getNextSiblings())}return[r,e.getIndexWithinParent()+1]}function QP(e,t,r,n,s="decorators-and-blocks"){if(t==="move"&&n==="character"&&!e.isCollapsed()){const[d,f]=r===e.isBackward()?[e.focus,e.anchor]:[e.anchor,e.focus];return f.set(d.key,d.offset,d.type),!0}const a=a0(e.focus,r?"previous":"next"),i=n==="lineboundary",o=t==="move";let l=a,u=s==="decorators-and-blocks";if(!fU(l)){for(const d of l){u=!1;const{origin:f}=d;if(!zn(f)||f.isIsolated()||(l=d,!i||!f.isInline()))break}if(u)for(const d of hC(a).iterNodeCarets(t==="extend"?"shadowRoot":"root")){if(qu(d))d.origin.isInline()||(l=d);else{if(jt(d.origin))continue;zn(d.origin)&&!d.origin.isInline()&&(l=d)}break}}if(l===a)return!1;if(o&&!i&&zn(l.origin)&&l.origin.isKeyboardSelectable()){const d=HT();return d.add(l.origin.getKey()),Xi(d),!0}return l=dc(l),o&&Em(e.anchor,l),Em(e.focus,l),u||!i}let yi=null,vi=null,ll=!1,oS=!1,Ub=0;const ZP={characterData:!0,childList:!0,subtree:!0};function s2(){return ll||yi!==null&&yi._readOnly}function Hi(){ll&&Zt(13)}function Gz(){Ub>99&&Zt(14)}function Kf(){return yi===null&&Zt(195,Vz()),yi}function Js(){return vi===null&&Zt(196,Vz()),vi}function Vz(){let e=0;const t=new Set,r=z_.version;if(typeof window<"u")for(const s of document.querySelectorAll("[contenteditable]")){const a=U_(s);if(eC(a))e++;else if(a){let i=String(a.constructor.version||"<0.17.1");i===r&&(i+=" (separately built, likely a bundler configuration issue)"),t.add(i)}}let n=` Detected on the page: ${e} compatible editor(s) with version ${r}`;return t.size&&(n+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),n}function Sie(){return vi}function eM(e,t,r){const n=t.__type,s=Qz(e,n);let a=r.get(n);a===void 0&&(a=Array.from(s.transforms),r.set(n,a));const i=a.length;for(let o=0;o<i&&(a[o](t),t.isAttached());o++);}function tM(e,t){return e!==void 0&&e.__key!==t&&e.isAttached()}function qz(e,t){if(!t)return;const r=e._updateTags;let n=t;Array.isArray(t)||(n=[t]);for(const s of n)r.add(s)}function kie(e){return VT(e,Js()._nodes)}function VT(e,t){const r=e.type,n=t.get(r);n===void 0&&Zt(17,r);const s=n.klass;e.type!==s.getType()&&Zt(18,s.name);const a=s.importJSON(e),i=e.children;if(jt(a)&&Array.isArray(i))for(let o=0;o<i.length;o++){const l=VT(i[o],t);a.append(l)}return a}function rM(e,t,r){const n=yi,s=ll,a=vi;yi=t,ll=!0,vi=e;try{return r()}finally{yi=n,ll=s,vi=a}}function $d(e,t){const r=e._pendingEditorState,n=e._rootElement,s=e._headless||n===null;if(r===null)return;const a=e._editorState,i=a._selection,o=r._selection,l=e._dirtyType!==ym,u=yi,d=ll,f=vi,h=e._updating,g=e._observer;let x=null;if(e._pendingEditorState=null,e._editorState=r,!s&&l&&g!==null){vi=e,yi=r,ll=!1,e._updating=!0;try{const P=e._dirtyType,M=e._dirtyElements,j=e._dirtyLeaves;g.disconnect(),x=Qae(a,r,e,P,M,j)}catch(P){if(P instanceof Error&&e._onError(P),oS)throw P;return Jz(e,null,n,r),uz(e),e._dirtyType=Lp,oS=!0,$d(e,a),void(oS=!1)}finally{g.observe(n,ZP),e._updating=h,yi=u,ll=d,vi=f}}r._readOnly||(r._readOnly=!0);const y=e._dirtyLeaves,v=e._dirtyElements,T=e._normalizedNodes,k=e._updateTags,b=e._deferred;l&&(e._dirtyType=ym,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),(function(P,M){const j=P._decorators;let A=P._pendingDecorators||j;const O=M._nodeMap;let L;for(L in A)O.has(L)||(A===j&&(A=rU(P)),delete A[L])})(e,r);const N=s?null:au(xc(e));if(e._editable&&N!==null&&(l||o===null||o.dirty)&&n!==null&&!k.has(Nie)){vi=e,yi=r;try{if(g!==null&&g.disconnect(),l||o===null||o.dirty){const P=e._blockCursorElement;P!==null&&g8(P,e,n),wie(i,o,e,N,k,n)}(function(P,M,j){let A=P._blockCursorElement;if(Vt(j)&&j.isCollapsed()&&j.anchor.type==="element"&&M.contains(document.activeElement)){const O=j.anchor,L=O.getNode(),q=O.offset;let Q=!1,ae=null;if(q===L.getChildrenSize())cS(L.getChildAtIndex(q-1))&&(Q=!0);else{const te=L.getChildAtIndex(q);if(te!==null&&cS(te)){const ne=te.getPreviousSibling();(ne===null||cS(ne))&&(Q=!0,ae=P.getElementByKey(te.__key))}}if(Q){const te=P.getElementByKey(L.__key);return A===null&&(P._blockCursorElement=A=(function(ne){const B=ne.theme,V=document.createElement("div");V.contentEditable="false",V.setAttribute("data-lexical-cursor","true");let R=B.blockCursor;if(R!==void 0){if(typeof R=="string"){const H=az(R);R=B.blockCursor=H}R!==void 0&&V.classList.add(...R)}return V})(P._config)),M.style.caretColor="transparent",void(ae===null?te.appendChild(A):te.insertBefore(A,ae))}}A!==null&&g8(A,P,M)})(e,n,o)}finally{g!==null&&g.observe(n,ZP),vi=f,yi=u}}x!==null&&(function(P,M,j,A,O){const L=Array.from(P._listeners.mutation),q=L.length;for(let Q=0;Q<q;Q++){const[ae,te]=L[Q];for(const ne of te){const B=M.get(ne);B!==void 0&&ae(B,{dirtyLeaves:A,prevEditorState:O,updateTags:j})}}})(e,x,k,y,a),Vt(o)||o===null||i!==null&&i.is(o)||e.dispatchCommand(xz,void 0);const E=e._pendingDecorators;E!==null&&(e._decorators=E,e._pendingDecorators=null,Hy("decorator",e,!0,E)),(function(P,M,j){const A=oM(M),O=oM(j);A!==O&&Hy("textcontent",P,!0,O)})(e,t||a,r),Hy("update",e,!0,{dirtyElements:v,dirtyLeaves:y,editorState:r,mutatedNodes:x,normalizedNodes:T,prevEditorState:t||a,tags:k}),(function(P,M){if(P._deferred=[],M.length!==0){const j=P._updating;P._updating=!0;try{for(let A=0;A<M.length;A++)M[A]()}finally{P._updating=j}}})(e,b),(function(P){const M=P._updates;if(M.length!==0){const j=M.shift();if(j){const[A,O]=j;B_(P,A,O)}}})(e)}function Hy(e,t,r,...n){const s=t._updating;t._updating=r;try{const a=Array.from(t._listeners[e]);for(let i=0;i<a.length;i++)a[i].apply(null,n)}finally{t._updating=s}}function nM(e,t){const r=e._updates;let n=t||!1;for(;r.length!==0;){const s=r.shift();if(s){const[a,i]=s,o=e._pendingEditorState;let l;i!==void 0&&(l=i.onUpdate,i.skipTransforms&&(n=!0),i.discrete&&(o===null&&Zt(191),o._flushSync=!0),l&&e._deferred.push(l),qz(e,i.tag)),o==null?B_(e,a,i):a()}}return n}function B_(e,t,r){const n=e._updateTags;let s,a=!1,i=!1;r!==void 0&&(s=r.onUpdate,qz(e,r.tag),a=r.skipTransforms||!1,i=r.discrete||!1),s&&e._deferred.push(s);const o=e._editorState;let l=e._pendingEditorState,u=!1;(l===null||l._readOnly)&&(l=e._pendingEditorState=Kz(l||o),u=!0),l._flushSync=i;const d=yi,f=ll,h=vi,g=e._updating;yi=l,ll=!1,e._updating=!0,vi=e;const x=e._headless||e.getRootElement()===null;JT(null);try{u&&(x?o._selection!==null&&(l._selection=o._selection.clone()):l._selection=(function(k,b){const N=k.getEditorState()._selection,E=au(xc(k));return Vt(N)||N==null?GT(N,E,k,b):N.clone()})(e,r&&r.event||null));const v=e._compositionKey;t(),a=nM(e,a),(function(k,b){const N=b.getEditorState()._selection,E=k._selection;if(Vt(E)){const P=E.anchor,M=E.focus;let j;if(P.type==="text"&&(j=P.getNode(),j.selectionTransform(N,E)),M.type==="text"){const A=M.getNode();j!==A&&A.selectionTransform(N,E)}}})(l,e),e._dirtyType!==ym&&(a?(function(k,b){const N=b._dirtyLeaves,E=k._nodeMap;for(const P of N){const M=E.get(P);hr(M)&&M.isAttached()&&M.isSimpleText()&&!M.isUnmergeable()&&FP(M)}})(l,e):(function(k,b){const N=b._dirtyLeaves,E=b._dirtyElements,P=k._nodeMap,M=wf(),j=new Map;let A=N,O=A.size,L=E,q=L.size;for(;O>0||q>0;){if(O>0){b._dirtyLeaves=new Set;for(const Q of A){const ae=P.get(Q);hr(ae)&&ae.isAttached()&&ae.isSimpleText()&&!ae.isUnmergeable()&&FP(ae),ae!==void 0&&tM(ae,M)&&eM(b,ae,j),N.add(Q)}if(A=b._dirtyLeaves,O=A.size,O>0){Ub++;continue}}b._dirtyLeaves=new Set,b._dirtyElements=new Map,L.delete("root")&&L.set("root",!0);for(const Q of L){const ae=Q[0],te=Q[1];if(E.set(ae,te),!te)continue;const ne=P.get(ae);ne!==void 0&&tM(ne,M)&&eM(b,ne,j)}A=b._dirtyLeaves,O=A.size,L=b._dirtyElements,q=L.size,Ub++}b._dirtyLeaves=N,b._dirtyElements=E})(l,e),nM(e),(function(k,b,N,E){const P=k._nodeMap,M=b._nodeMap,j=[];for(const[A]of E){const O=M.get(A);O!==void 0&&(O.isAttached()||(jt(O)&&oz(O,A,P,M,j,E),P.has(A)||E.delete(A),j.push(A)))}for(const A of j)M.delete(A);for(const A of N){const O=M.get(A);O===void 0||O.isAttached()||(P.has(A)||N.delete(A),M.delete(A))}})(o,l,e._dirtyLeaves,e._dirtyElements)),v!==e._compositionKey&&(l._flushSync=!0);const T=l._selection;if(Vt(T)){const k=l._nodeMap,b=T.anchor.key,N=T.focus.key;k.get(b)!==void 0&&k.get(N)!==void 0||Zt(19)}else io(T)&&T._nodes.size===0&&(l._selection=null)}catch(v){return v instanceof Error&&e._onError(v),e._pendingEditorState=o,e._dirtyType=Lp,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void $d(e)}finally{yi=d,ll=f,vi=h,e._updating=g,Ub=0}e._dirtyType!==ym||e._deferred.length>0||(function(v,T){const k=T.getEditorState()._selection,b=v._selection;if(b!==null){if(b.dirty||!b.is(k))return!0}else if(k!==null)return!0;return!1})(l,e)?l._flushSync?(l._flushSync=!1,$d(e)):u&&Fie((()=>{$d(e)})):(l._flushSync=!1,u&&(n.clear(),e._deferred=[],e._pendingEditorState=null))}function Cl(e,t,r){vi===e&&r===void 0?t():B_(e,t,r)}class Gy{constructor(t,r,n){this.element=t,this.before=r||null,this.after=n||null}withBefore(t){return new Gy(this.element,t,this.after)}withAfter(t){return new Gy(this.element,this.before,t)}withElement(t){return this.element===t?this:new Gy(t,this.before,this.after)}insertChild(t){const r=this.before||this.getManagedLineBreak();return r!==null&&r.parentElement!==this.element&&Zt(222),this.element.insertBefore(t,r),this}removeChild(t){return t.parentElement!==this.element&&Zt(223),this.element.removeChild(t),this}replaceChild(t,r){return r.parentElement!==this.element&&Zt(224),this.element.replaceChild(t,r),this}getFirstChild(){const t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(t){if(t===null)this.removeManagedLineBreak();else{const r=t==="decorator"&&(Rp||mv);this.insertManagedLineBreak(r)}}removeManagedLineBreak(){const t=this.getManagedLineBreak();if(t){const r=this.element,n=t.nodeName==="IMG"?t.nextSibling:null;n&&r.removeChild(n),r.removeChild(t),r.__lexicalLineBreak=void 0}}insertManagedLineBreak(t){const r=this.getManagedLineBreak();if(r){if(t===(r.nodeName==="IMG"))return;this.removeManagedLineBreak()}const n=this.element,s=this.before,a=document.createElement("br");if(n.insertBefore(a,s),t){const i=document.createElement("img");i.setAttribute("data-lexical-linebreak","true"),i.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",i.alt="",n.insertBefore(i,a),n.__lexicalLineBreak=i}else n.__lexicalLineBreak=a}getFirstChildOffset(){let t=0;for(let r=this.after;r!==null;r=r.previousSibling)t++;return t}resolveChildIndex(t,r,n,s){if(n===this.element){const l=this.getFirstChildOffset();return[t,Math.min(l+t.getChildrenSize(),Math.max(l,s))]}const a=sM(r,n);a.push(s);const i=sM(r,this.element);let o=t.getIndexWithinParent();for(let l=0;l<i.length;l++){const u=a[l],d=i[l];if(u===void 0||u<d)break;if(u>d){o+=1;break}}return[t.getParentOrThrow(),o]}}function sM(e,t){const r=[];let n=t;for(;n!==e&&n!==null;n=n.parentNode){let s=0;for(let a=n.previousSibling;a!==null;a=a.previousSibling)s++;r.push(s)}return n!==e&&Zt(225),r.reverse()}class yo extends i1{constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(t){super.afterCloneFrom(t),this.__key===t.__key&&(this.__first=t.__first,this.__last=t.__last,this.__size=t.__size),this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return Bae[t]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getChildrenKeys(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r.__key),r=r.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const t=Js()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),r=this.getParentOrThrow().getLastChild();return r!==null&&r.is(t)}getAllTextNodes(){const t=[];let r=this.getFirstChild();for(;r!==null;){if(hr(r)&&t.push(r),jt(r)){const n=r.getAllTextNodes();t.push(...n)}r=r.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;jt(t);){const r=t.getFirstChild();if(r===null)break;t=r}return t}getLastDescendant(){let t=this.getLastChild();for(;jt(t);){const r=t.getLastChild();if(r===null)break;t=r}return t}getDescendantByIndex(t){const r=this.getChildren(),n=r.length;if(t>=n){const a=r[n-1];return jt(a)&&a.getLastDescendant()||a||null}const s=r[t];return jt(s)&&s.getFirstDescendant()||s||null}getFirstChild(){const t=this.getLatest().__first;return t===null?null:za(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return t===null&&Zt(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return t===null?null:za(t)}getLastChildOrThrow(){const t=this.getLastChild();return t===null&&Zt(96,this.__key),t}getChildAtIndex(t){const r=this.getChildrenSize();let n,s;if(t<r/2){for(n=this.getFirstChild(),s=0;n!==null&&s<=t;){if(s===t)return n;n=n.getNextSibling(),s++}return null}for(n=this.getLastChild(),s=r-1;n!==null&&s>=t;){if(s===t)return n;n=n.getPreviousSibling(),s--}return null}getTextContent(){let t="";const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const a=r[s];t+=a.getTextContent(),jt(a)&&s!==n-1&&!a.isInline()&&(t+=s0)}return t}getTextContentSize(){let t=0;const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const a=r[s];t+=a.getTextContentSize(),jt(a)&&s!==n-1&&!a.isInline()&&(t+=s0.length)}return t}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(t){if(t!==""){const r=TP[t];return!!(this.getFormat()&r)}return!1}hasTextFormat(t){const r=vm[t];return!!(this.getTextFormat()&r)}getFormatFlags(t,r){return x4(this.getLatest().__textFormat,t,r)}getTextStyle(){return this.getLatest().__textStyle}select(t,r){Hi();const n=fr();let s=t,a=r;const i=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&r===0){const l=this.getFirstChild();if(hr(l)||jt(l))return l.select(0,0)}else if(!(t!==void 0&&t!==i||r!==void 0&&r!==i)){const l=this.getLastChild();if(hr(l)||jt(l))return l.select()}}s===void 0&&(s=i),a===void 0&&(a=i);const o=this.__key;return Vt(n)?(n.anchor.set(o,s,"element"),n.focus.set(o,a,"element"),n.dirty=!0,n):Wz(o,s,o,a,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach((r=>r.remove())),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const r=this.getWritable();return r.__dir=t,r}setFormat(t){return this.getWritable().__format=t!==""?TP[t]:0,this}setStyle(t){return this.getWritable().__style=t||"",this}setTextFormat(t){const r=this.getWritable();return r.__textFormat=t,r}setTextStyle(t){const r=this.getWritable();return r.__textStyle=t,r}setIndent(t){return this.getWritable().__indent=t,this}splice(t,r,n){const s=n.length,a=this.getChildrenSize(),i=this.getWritable();t+r<=a||Zt(226,String(t),String(r),String(a));const o=i.__key,l=[],u=[],d=this.getChildAtIndex(t+r);let f=null,h=a-r+s;if(t!==0)if(t===a)f=this.getLastChild();else{const x=this.getChildAtIndex(t);x!==null&&(f=x.getPreviousSibling())}if(r>0){let x=f===null?this.getFirstChild():f.getNextSibling();for(let y=0;y<r;y++){x===null&&Zt(100);const v=x.getNextSibling(),T=x.__key;im(x.getWritable()),u.push(T),x=v}}let g=f;for(let x=0;x<s;x++){const y=n[x];g!==null&&y.is(g)&&(f=g=g.getPreviousSibling());const v=y.getWritable();v.__parent===o&&h--,im(v);const T=y.__key;if(g===null)i.__first=T,v.__prev=null;else{const k=g.getWritable();k.__next=T,v.__prev=k.__key}y.__key===o&&Zt(76),v.__parent=o,l.push(T),g=y}if(t+r===a)g!==null&&(g.getWritable().__next=null,i.__last=g.__key);else if(d!==null){const x=d.getWritable();if(g!==null){const y=g.getWritable();x.__prev=g.__key,y.__next=d.__key}else x.__prev=null}if(i.__size=h,u.length){const x=fr();if(Vt(x)){const y=new Set(u),v=new Set(l),{anchor:T,focus:k}=x;aM(T,y,v)&&g4(T,T.getNode(),this,f,d),aM(k,y,v)&&g4(k,k.getNode(),this,f,d),h!==0||this.canBeEmpty()||$o(this)||this.remove()}}return i}getDOMSlot(t){return new Gy(t)}exportDOM(t){const{element:r}=super.exportDOM(t);if(As(r)){const n=this.getIndent();n>0&&(r.style.paddingInlineStart=40*n+"px");const s=this.getDirection();s&&(r.dir=s)}return{element:r}}exportJSON(){const t={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},r=this.getTextFormat(),n=this.getTextStyle();return r!==0&&(t.textFormat=r),n!==""&&(t.textStyle=n),t}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"")}insertNewAfter(t,r){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,r,n){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(t,r){const n=this.getDOMSlot(t);let s=n.getFirstChild();for(let a=this.getFirstChild();a;a=a.getNextSibling()){const i=r.getElementByKey(a.getKey());i!==null&&(s==null?(n.insertChild(i),s=i):s!==i&&n.replaceChild(i,s),s=s.nextSibling)}}}function jt(e){return e instanceof yo}function aM(e,t,r){let n=e.getNode();for(;n;){const s=n.__key;if(t.has(s)&&!r.has(s))return!0;n=n.getParent()}return!1}let qT=class extends i1{decorate(t,r){Zt(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}};function zn(e){return e instanceof qT}class a2 extends yo{static getType(){return"root"}static clone(){return new a2}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){Zt(51)}getTextContent(){const t=this.__cachedText;return!s2()&&Js()._dirtyType!==ym||t===null?super.getTextContent():t}remove(){Zt(52)}replace(t){Zt(53)}insertBefore(t){Zt(54)}insertAfter(t){Zt(55)}updateDOM(t,r){return!1}splice(t,r,n){for(const s of n)jt(s)||zn(s)||Zt(282);return super.splice(t,r,n)}static importJSON(t){return $s().updateFromJSON(t)}collapseAtStart(){return!0}}function ri(e){return e instanceof a2}function Kz(e){return new $_(new Map(e._nodeMap))}function KT(){return new $_(new Map([["root",new a2]]))}function Yz(e){const t=e.exportJSON(),r=e.constructor;if(t.type!==r.getType()&&Zt(130,r.name),jt(e)){const n=t.children;Array.isArray(n)||Zt(59,r.name);const s=e.getChildren();for(let a=0;a<s.length;a++){const i=Yz(s[a]);n.push(i)}}return t}class $_{constructor(t,r){this._nodeMap=t,this._selection=r||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t,r){return rM(r&&r.editor||null,this,t)}clone(t){const r=new $_(this._nodeMap,t===void 0?this._selection:t);return r._readOnly=!0,r}toJSON(){return rM(null,this,(()=>({root:Yz($s())})))}}const p4="historic",Tie="history-push",Vy="history-merge",Cie="paste",Xz="collaboration",Eie="skip-scroll-into-view",Nie="skip-dom-selection";class YT extends yo{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class i2 extends yo{static getType(){return"paragraph"}static clone(t){return new i2(t.__key)}createDOM(t){const r=document.createElement("p"),n=kp(t.theme,"paragraph");return n!==void 0&&r.classList.add(...n),r}updateDOM(t,r,n){return!1}static importDOM(){return{p:t=>({conversion:Aie,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(As(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n)}return{element:r}}static importJSON(t){return Ns().updateFromJSON(t)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(t,r){const n=Ns();n.setTextFormat(t.format),n.setTextStyle(t.style);const s=this.getDirection();return n.setDirection(s),n.setFormat(this.getFormatType()),n.setStyle(this.getStyle()),this.insertAfter(n,r),n}collapseAtStart(){const t=this.getChildren();if(t.length===0||hr(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function Aie(e){const t=Ns();return e.style&&(t.setFormat(e.style.textAlign),oC(e,t)),{node:t}}function Ns(){return Wo(new i2)}function XT(e){return e instanceof i2}const Fn=0,ip=1,jie=4;function Jz(e,t,r,n){const s=e._keyToDOMMap;s.clear(),e._editorState=KT(),e._pendingEditorState=n,e._compositionKey=null,e._dirtyType=ym,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;const a=e._observer;a!==null&&(a.disconnect(),e._observer=null),t!==null&&(t.textContent=""),r!==null&&(r.textContent="",s.set("root",r))}function Pie(e){const t=e||{},r=Sie(),n=t.theme||{},s=e===void 0?r:t.parentEditor||null,a=t.disableEvents||!1,i=KT(),o=t.namespace||(s!==null?s._config.namespace:aU()),l=t.editorState,u=[a2,qf,r2,n2,i2,YT,...t.nodes||[]],{onError:d,html:f}=t,h=t.editable===void 0||t.editable;let g;if(e===void 0&&r!==null)g=r._nodes;else{g=new Map;for(let y=0;y<u.length;y++){let v=u[y],T=null,k=null;if(typeof v!="function"){const M=v;v=M.replace,T=M.with,k=M.withKlass||null}const{ownNodeConfig:b}=lC(v),N=v.getType(),E=v.transform(),P=new Set;b&&b.$transform&&P.add(b.$transform),E!==null&&P.add(E),g.set(N,{exportDOM:f&&f.export?f.export.get(v):void 0,klass:v,replace:T,replaceWithKlass:k,sharedNodeState:qae(u[y]),transforms:P})}}const x=new z_(i,s,g,{disableEvents:a,namespace:o,theme:n},d||console.error,(function(y,v){const T=new Map,k=new Set,b=N=>{Object.keys(N).forEach((E=>{let P=T.get(E);P===void 0&&(P=[],T.set(E,P)),P.push(N[E])}))};return y.forEach((N=>{const E=N.klass.importDOM;if(E==null||k.has(E))return;k.add(E);const P=E.call(N.klass);P!==null&&b(P)})),v&&b(v),T})(g,f?f.import:void 0),h,e);return l!==void 0&&(x._pendingEditorState=l,x._dirtyType=Lp),x}class z_{constructor(t,r,n,s,a,i,o,l){this._createEditorArgs=l,this._parentEditor=r,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=s,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=ym,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=aU(),this._onError=a,this._htmlConversions=i,this._editable=o,this._headless=r!==null&&r._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){const r=this._listeners.update;return r.add(t),()=>{r.delete(t)}}registerEditableListener(t){const r=this._listeners.editable;return r.add(t),()=>{r.delete(t)}}registerDecoratorListener(t){const r=this._listeners.decorator;return r.add(t),()=>{r.delete(t)}}registerTextContentListener(t){const r=this._listeners.textcontent;return r.add(t),()=>{r.delete(t)}}registerRootListener(t){const r=this._listeners.root;return t(this._rootElement,null),r.add(t),()=>{t(null,this._rootElement),r.delete(t)}}registerCommand(t,r,n){n===void 0&&Zt(35);const s=this._commands;s.has(t)||s.set(t,[new Set,new Set,new Set,new Set,new Set]);const a=s.get(t);a===void 0&&Zt(36,String(t));const i=a[n];return i.add(r),()=>{i.delete(r),a.every((o=>o.size===0))&&s.delete(t)}}registerMutationListener(t,r,n){const s=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,a=this._listeners.mutation;let i=a.get(r);i===void 0&&(i=new Set,a.set(r,i)),i.add(s);const o=n&&n.skipInitialization;return o!==void 0&&o||this.initializeMutationListener(r,s),()=>{i.delete(s),i.size===0&&a.delete(r)}}getRegisteredNode(t){const r=this._nodes.get(t.getType());return r===void 0&&Zt(37,t.name),r}resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t}initializeMutationListener(t,r){const n=this._editorState,s=mM(n).get(r.getType());if(!s)return;const a=new Map;for(const i of s.keys())a.set(i,"created");a.size>0&&t(a,{dirtyLeaves:new Set,prevEditorState:n,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(t,r){const n=this.getRegisteredNode(t);return n.transforms.add(r),n}registerNodeTransform(t,r){const n=this.registerNodeTransformToKlass(t,r),s=[n],a=n.replaceWithKlass;if(a!=null){const i=this.registerNodeTransformToKlass(a,r);s.push(i)}return(function(i,o){const l=mM(i.getEditorState()),u=[];for(const d of o){const f=l.get(d);f&&u.push(f)}u.length!==0&&i.update((()=>{for(const d of u)for(const f of d.keys()){const h=za(f);h&&h.markDirty()}}),i._pendingEditorState===null?{tag:Vy}:void 0)})(this,s.map((i=>i.klass.getType()))),()=>{s.forEach((i=>i.transforms.delete(r)))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,r){return Cr(this,t,r)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const r=this._rootElement;if(t!==r){const n=kp(this._config.theme,"root"),s=this._pendingEditorState||this._editorState;if(this._rootElement=t,Jz(this,r,t,s),r!==null&&(this._config.disableEvents||die(r),n!=null&&r.classList.remove(...n)),t!==null){const a=aC(t),i=t.style;i.userSelect="text",i.whiteSpace="pre-wrap",i.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=a,this._dirtyType=Lp,uz(this),this._updateTags.add(Vy),$d(this),this._config.disableEvents||(function(o,l){const u=o.ownerDocument,d=h4.get(u);(d===void 0||d<1)&&u.addEventListener("selectionchange",Lz),h4.set(u,(d||0)+1),o.__lexicalEditor=l;const f=Rz(o);for(let h=0;h<i8.length;h++){const[g,x]=i8[h],y=typeof x=="function"?v=>{$P(v)||(BP(v),(l.isEditable()||g==="click")&&x(v,l))}:v=>{if($P(v))return;BP(v);const T=l.isEditable();switch(g){case"cut":return T&&Cr(l,UT,v);case"copy":return Cr(l,O_,v);case"paste":return T&&Cr(l,BT,v);case"dragstart":return T&&Cr(l,Az,v);case"dragover":return T&&Cr(l,jz,v);case"dragend":return T&&Cr(l,aie,v);case"focus":return T&&Cr(l,lie,v);case"blur":return T&&Cr(l,cie,v);case"drop":return T&&Cr(l,Ez,v)}};o.addEventListener(g,y),f.push((()=>{o.removeEventListener(g,y)}))}})(t,this),n!=null&&t.classList.add(...n)}else this._window=null,this._updateTags.add(Vy),$d(this);Hy("root",this,!1,t,r)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,r){t.isEmpty()&&Zt(38);let n=t;n._readOnly&&(n=Kz(t),n._selection=t._selection?t._selection.clone():null),cz(this);const s=this._pendingEditorState,a=this._updateTags,i=r!==void 0?r.tag:null;s===null||s.isEmpty()||(i!=null&&a.add(i),$d(this)),this._pendingEditorState=n,this._dirtyType=Lp,this._dirtyElements.set("root",!1),this._compositionKey=null,i!=null&&a.add(i),this._updating||$d(this)}parseEditorState(t,r){return(function(n,s,a){const i=KT(),o=yi,l=ll,u=vi,d=s._dirtyElements,f=s._dirtyLeaves,h=s._cloneNotNeeded,g=s._dirtyType;s._dirtyElements=new Map,s._dirtyLeaves=new Set,s._cloneNotNeeded=new Set,s._dirtyType=0,yi=i,ll=!1,vi=s,JT(null);try{const x=s._nodes;VT(n.root,x),a&&a(),i._readOnly=!0}catch(x){x instanceof Error&&s._onError(x)}finally{s._dirtyElements=d,s._dirtyLeaves=f,s._cloneNotNeeded=h,s._dirtyType=g,yi=o,ll=l,vi=u}return i})(typeof t=="string"?JSON.parse(t):t,this,r)}read(t){return $d(this),this.getEditorState().read(t,{editor:this})}update(t,r){(function(n,s,a){n._updating?n._updates.push([s,a]):B_(n,s,a)})(this,t,r)}focus(t,r={}){const n=this._rootElement;n!==null&&(n.setAttribute("autocapitalize","off"),Cl(this,(()=>{const s=fr(),a=$s();s!==null?s.dirty||Xi(s.clone()):a.getChildrenSize()!==0&&(r.defaultSelection==="rootStart"?a.selectStart():a.selectEnd()),Lie("focus"),Bie((()=>{n.removeAttribute("autocapitalize"),t&&t()}))})),this._pendingEditorState===null&&n.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;t!==null&&t.blur();const r=au(this._window);r!==null&&r.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,Hy("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}z_.version="0.35.0+prod.esm";let f8=null;function JT(e){f8=e}let Mie=1;function Qz(e,t){const r=QT(e,t);return r===void 0&&Zt(30,t),r}function QT(e,t){return e._nodes.get(t)}const Fie=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)};function iM(e){return zn(Df(e))}function ZT(e){const t=document.activeElement;if(!As(t))return!1;const r=t.nodeName;return zn(Df(e))&&(r==="INPUT"||r==="TEXTAREA"||t.contentEditable==="true"&&U_(t)==null)}function o2(e,t,r){const n=e.getRootElement();try{return n!==null&&n.contains(t)&&n.contains(r)&&t!==null&&!ZT(t)&&Zz(t)===e}catch{return!1}}function eC(e){return e instanceof z_}function Zz(e){let t=e;for(;t!=null;){const r=U_(t);if(eC(r))return r;t=l2(t)}return null}function U_(e){return e?e.__lexicalEditor:null}function am(e){return I_(e)||e.isToken()}function Rd(e){return am(e)||e.isSegmented()}function m0(e){return c1(e)&&e.nodeType===jae}function Die(e){return c1(e)&&e.nodeType===Pae}function Bp(e){let t=e;for(;t!=null;){if(m0(t))return t;t=t.firstChild}return null}function x4(e,t,r){const n=vm[t];if(r!==null&&(e&n)==(r&n))return e;let s=e^n;return t==="subscript"?s&=-65:t==="superscript"?s&=-33:t==="lowercase"?(s&=-513,s&=-1025):t==="uppercase"?(s&=-257,s&=-1025):t==="capitalize"&&(s&=-257,s&=-513),s}function eU(e){return hr(e)||Kd(e)||zn(e)}function Oie(e,t){const r=(function(){const i=f8;return f8=null,i})();if((t=t||r&&r.__key)!=null)return void(e.__key=t);Hi(),Gz();const n=Js(),s=Kf(),a=""+Mie++;s._nodeMap.set(a,e),jt(e)?n._dirtyElements.set(a,!0):n._dirtyLeaves.add(a),n._cloneNotNeeded.add(a),n._dirtyType=iz,e.__key=a}function im(e){const t=e.getParent();if(t!==null){const r=e.getWritable(),n=t.getWritable(),s=e.getPreviousSibling(),a=e.getNextSibling(),i=a!==null?a.__key:null,o=s!==null?s.__key:null,l=s!==null?s.getWritable():null,u=a!==null?a.getWritable():null;s===null&&(n.__first=i),a===null&&(n.__last=o),l!==null&&(l.__next=i),u!==null&&(u.__prev=o),r.__prev=null,r.__next=null,r.__parent=null,n.__size--}}function y4(e){Gz();const t=e.getLatest(),r=t.__parent,n=Kf(),s=Js(),a=n._nodeMap,i=s._dirtyElements;r!==null&&(function(l,u,d){let f=l;for(;f!==null;){if(d.has(f))return;const h=u.get(f);if(h===void 0)break;d.set(f,!1),f=h.__parent}})(r,a,i);const o=t.__key;s._dirtyType=iz,jt(e)?i.set(o,!0):s._dirtyLeaves.add(o)}function Gi(e){Hi();const t=Js(),r=t._compositionKey;if(e!==r){if(t._compositionKey=e,r!==null){const n=za(r);n!==null&&n.getWritable()}if(e!==null){const n=za(e);n!==null&&n.getWritable()}}}function wf(){return s2()?null:Js()._compositionKey}function za(e,t){const r=(t||Kf())._nodeMap.get(e);return r===void 0?null:r}function tU(e,t){const r=W_(e,Js());return r!==void 0?za(r,t):null}function W_(e,t){return e[`__lexicalKey_${t._key}`]}function Df(e,t){let r=e;for(;r!=null;){const n=tU(r,t);if(n!==null)return n;r=l2(r)}return null}function rU(e){const t=e._decorators,r=Object.assign({},t);return e._pendingDecorators=r,r}function oM(e){return e.read((()=>$s().getTextContent()))}function $s(){return nU(Kf())}function nU(e){return e._nodeMap.get("root")}function Xi(e){Hi();const t=Kf();e!==null&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function pp(e){const t=Js(),r=(function(n,s){let a=n;for(;a!=null;){const i=W_(a,s);if(i!==void 0)return i;a=l2(a)}return null})(e,t);return r===null?e===t.getRootElement()?za("root"):null:za(r)}function sU(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function tC(e){const t=[];let r=e;for(;r!==null;)t.push(r),r=r._parentEditor;return t}function aU(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function iU(e){return m0(e)?e.nodeValue:null}function rC(e,t,r){const n=au(xc(t));if(n===null)return;const s=n.anchorNode;let{anchorOffset:a,focusOffset:i}=n;if(s!==null){let o=iU(s);const l=Df(s);if(o!==null&&hr(l)){if(o===F_&&r){const u=r.length;o=r,a=u,i=u}o!==null&&nC(l,o,a,i,e)}}}function nC(e,t,r,n,s){let a=e;if(a.isAttached()&&(s||!a.isDirty())){const i=a.isComposing();let o=t;(i||s)&&t[t.length-1]===F_&&(o=t.slice(0,-1));const l=a.getTextContent();if(s||o!==l){if(o===""){if(Gi(null),mv||Rp||s4)a.remove();else{const y=Js();setTimeout((()=>{y.update((()=>{a.isAttached()&&a.remove()}))}),20)}return}const u=a.getParent(),d=l1(),f=a.getTextContentSize(),h=wf(),g=a.getKey();if(a.isToken()||h!==null&&g===h&&!i||Vt(d)&&(u!==null&&!u.canInsertTextBefore()&&d.anchor.offset===0||d.anchor.key===e.__key&&d.anchor.offset===0&&!a.canInsertTextBefore()&&!i||d.focus.key===e.__key&&d.focus.offset===f&&!a.canInsertTextAfter()&&!i))return void a.markDirty();const x=fr();if(!Vt(x)||r===null||n===null)return void lM(a,o,x);if(x.setTextNodeRange(a,r,a,n),a.isSegmented()){const y=oa(a.getTextContent());a.replace(y),a=y}lM(a,o,x)}}}function lM(e,t,r){if(e.setTextContent(t),Vt(r)){const n=e.getKey();for(const s of["anchor","focus"]){const a=r[s];a.type==="text"&&a.key===n&&(a.offset=Nf(e,a.offset,"clamp"))}}}function Kw(e,t,r){const n=t[r]||!1;return n==="any"||n===e[r]}function Iie(e,t){return Kw(e,t,"altKey")&&Kw(e,t,"ctrlKey")&&Kw(e,t,"shiftKey")&&Kw(e,t,"metaKey")}function es(e,t,r){return Iie(e,r)&&e.key.toLowerCase()===t.toLowerCase()}const Id={ctrlKey:!Iu,metaKey:Iu},cM={altKey:Iu,ctrlKey:!Iu};function uM(e){return e.key==="Backspace"}function dM(e){return es(e,"a",Id)}function Rie(e){const t=$s();if(Vt(e)){const r=e.anchor,n=e.focus,s=r.getNode().getTopLevelElementOrThrow().getParentOrThrow();return r.set(s.getKey(),0,"element"),n.set(s.getKey(),s.getChildrenSize(),"element"),o4(e),e}{const r=t.select(0,t.getChildrenSize());return Xi(o4(r)),r}}function kp(e,t){e.__lexicalClassNameCache===void 0&&(e.__lexicalClassNameCache={});const r=e.__lexicalClassNameCache,n=r[t];if(n!==void 0)return n;const s=e[t];if(typeof s=="string"){const a=az(s);return r[t]=a,a}return s}function sC(e,t,r,n,s){if(r.size===0)return;const a=n.__type,i=n.__key,o=t.get(a);o===void 0&&Zt(33,a);const l=o.klass;let u=e.get(l);u===void 0&&(u=new Map,e.set(l,u));const d=u.get(i),f=d==="destroyed"&&s==="created";(d===void 0||f)&&u.set(i,f?"updated":s)}function fM(e,t,r){const n=e.getParent();let s=r,a=e;return n!==null&&(t&&r===0?(s=a.getIndexWithinParent(),a=n):t||r!==a.getChildrenSize()||(s=a.getIndexWithinParent()+1,a=n)),a.getChildAtIndex(t?s-1:s)}function h8(e,t){const r=e.offset;if(e.type==="element")return fM(e.getNode(),t,r);{const n=e.getNode();if(t&&r===0||!t&&r===n.getTextContentSize()){const s=t?n.getPreviousSibling():n.getNextSibling();return s===null?fM(n.getParentOrThrow(),t,n.getIndexWithinParent()+(t?0:1)):s}}return null}function oU(e){const t=xc(e).event,r=t&&t.inputType;return r==="insertFromPaste"||r==="insertFromPasteAsQuotation"}function Cr(e,t,r){return(function(n,s,a){const i=tC(n);for(let o=4;o>=0;o--)for(let l=0;l<i.length;l++){const u=i[l],d=u._commands.get(s);if(d!==void 0){const f=d[o];if(f!==void 0){const h=Array.from(f),g=h.length;let x=!1;if(Cl(u,(()=>{for(let y=0;y<g;y++)if(h[y](a,n))return void(x=!0)})),x)return x}}}return!1})(e,t,r)}function H_(e){return!ri(e)&&!e.isLastChild()&&!e.isInline()}function _m(e,t){const r=e._keyToDOMMap.get(t);return r===void 0&&Zt(75,t),r}function l2(e){const t=e.assignedSlot||e.parentElement;return p8(t)?t.host:t}function lU(e){return Die(e)?e:As(e)?e.ownerDocument:null}function Lie(e){Hi(),Js()._updateTags.add(e)}function Bie(e){Hi(),Js()._deferred.push(e)}function m8(e,t){let r=e.getParent();for(;r!==null;){if(r.is(t))return!0;r=r.getParent()}return!1}function aC(e){const t=lU(e);return t?t.defaultView:null}function xc(e){const t=e._window;return t===null&&Zt(78),t}function $ie(e){return jt(e)&&e.isInline()||zn(e)&&e.isInline()}function zie(e){let t=e.getParentOrThrow();for(;t!==null;){if($o(t))return t;t=t.getParentOrThrow()}return t}function $o(e){return ri(e)||jt(e)&&e.isShadowRoot()}function Wo(e){const t=Js(),r=e.getType(),n=QT(t,r);n===void 0&&Zt(200,e.constructor.name,r);const{replace:s,replaceWithKlass:a}=n;if(s!==null){const i=s(e),o=i.constructor;return a!==null?i instanceof a||Zt(201,a.name,a.getType(),o.name,o.getType(),e.constructor.name,r):i instanceof e.constructor&&o!==e.constructor||Zt(202,o.name,o.getType(),e.constructor.name,r),i.__key===e.__key&&Zt(203,e.constructor.name,r,o.name,o.getType()),i}return e}function lS(e,t){!ri(e.getParent())||jt(t)||zn(t)||Zt(99)}function Uie(e){const t=za(e);return t===null&&Zt(63,e),t}function cS(e){return(zn(e)||jt(e)&&!e.canBeEmpty())&&!e.isInline()}function g8(e,t,r){r.style.removeProperty("caret-color"),t._blockCursorElement=null;const n=e.parentElement;n!==null&&n.removeChild(e)}function au(e){return lu?(e||window).getSelection():null}function Wie(e){const t=aC(e);return t?t.getSelection():null}function cU(e){return As(e)&&e.tagName==="A"}function As(e){return c1(e)&&e.nodeType===Aae}function c1(e){return typeof e=="object"&&e!==null&&"nodeType"in e&&typeof e.nodeType=="number"}function p8(e){return c1(e)&&e.nodeType===Mae}function x8(e){const t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return e.nodeName.match(t)!==null}function v4(e){const t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return e.nodeName.match(t)!==null}function uc(e){if(zn(e)&&!e.isInline())return!0;if(!jt(e)||$o(e))return!1;const t=e.getFirstChild(),r=t===null||Kd(t)||hr(t)||t.isInline();return!e.isInline()&&e.canBeEmpty()!==!1&&r}function uS(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function c2(){return Js()}const hM=new WeakMap,Hie=new Map;function mM(e){if(!e._readOnly&&e.isEmpty())return Hie;e._readOnly||Zt(192);let t=hM.get(e);return t||(t=(function(r){const n=new Map;for(const[s,a]of r._nodeMap){const i=a.__type;let o=n.get(i);o||(o=new Map,n.set(i,o)),o.set(s,a)}return n})(e),hM.set(e,t)),t}function iC(e){const t=e.constructor.clone(e);return t.afterCloneFrom(e),t}function oC(e,t){const r=parseInt(e.style.paddingInlineStart,10)||0,n=Math.round(r/40);t.setIndent(n)}function Gie(e){e.__lexicalUnmanaged=!0}function Vie(e){return e.__lexicalUnmanaged===!0}function my(e,t){return(function(r,n){return Object.prototype.hasOwnProperty.call(r,n)})(e,t)&&e[t]!==i1[t]}function lC(e){const t=CP in e.prototype?e.prototype[CP]():void 0,r=(function(i){return i===qT||i===yo||i===i1})(e),n=!r&&my(e,"getType")?e.getType():void 0;let s,a=n;if(t)if(n)s=t[n];else for(const[i,o]of Object.entries(t))a=i,s=o;if(!r&&a&&(my(e,"getType")||(e.getType=()=>a),my(e,"clone")||(e.clone=i=>(JT(i),new e)),my(e,"importJSON")||(e.importJSON=s&&s.$importJSON||(i=>new e().updateFromJSON(i))),!my(e,"importDOM")&&s)){const{importDOM:i}=s;i&&(e.importDOM=()=>i)}return{ownNodeConfig:s,ownNodeType:a}}function qie(e){const t=c2();return Hi(),new(t.resolveRegisteredNodeAfterReplacements(t.getRegisteredNode(e))).klass}const Kie={next:"previous",previous:"next"};class cC{constructor(t){this.origin=t}[Symbol.iterator](){return mC({hasNext:Tm,initial:this.getAdjacentCaret(),map:t=>t,step:t=>t.getAdjacentCaret()})}getAdjacentCaret(){return Yi(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return Yi(this.origin,this.direction)}remove(){const t=this.getNodeAtCaret();return t&&t.remove(),this}replaceOrInsert(t,r){const n=this.getNodeAtCaret();return t.is(this.origin)||t.is(n)||(n===null?this.insert(t):n.replace(t,r)),this}splice(t,r,n="next"){const s=n===this.direction?r:Array.from(r).reverse();let a=this;const i=this.getParentAtCaret(),o=new Map;for(let l=a.getAdjacentCaret();l!==null&&o.size<t;l=l.getAdjacentCaret()){const u=l.origin.getWritable();o.set(u.getKey(),u)}for(const l of s){if(o.size>0){const u=a.getNodeAtCaret();if(u){if(o.delete(u.getKey()),o.delete(l.getKey()),!(u.is(l)||a.origin.is(l))){const d=l.getParent();d&&d.is(i)&&l.remove(),u.replace(l)}}else u===null&&Zt(263,Array.from(o).join(" "))}else a.insert(l);a=Yi(l,this.direction)}for(const l of o.values())l.remove();return this}}class wv extends cC{type="child";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:yc(t,this.direction)}getParentCaret(t="root"){return Yi(uC(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=u1(this.direction);return Yi(this.getNodeAtCaret(),t)||yc(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof wv&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const Yie={root:ri,shadowRoot:$o};function u1(e){return Kie[e]}function uC(e,t="root"){return Yie[t](e)?null:e}class Sm extends cC{type="sibling";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Yi(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return jt(this.origin)?yc(this.origin,this.direction):null}getParentCaret(t="root"){return Yi(uC(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=u1(this.direction);return Yi(this.getNodeAtCaret(),t)||yc(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof Sm&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof Sm||t instanceof km)&&this.direction===t.direction&&this.origin.is(t.origin)}}class km extends cC{type="text";constructor(t,r){super(t),this.offset=r}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Cm(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return Yi(uC(this.getParentAtCaret(),t),this.direction)}getFlipped(){return Cm(this.origin,u1(this.direction),this.offset)}isSamePointCaret(t){return t instanceof km&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof Sm||t instanceof km)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return Yi(this.origin,this.direction)}}function Ef(e){return e instanceof km}function Tm(e){return e instanceof Sm}function qu(e){return e instanceof wv}const Xie={next:class extends km{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends km{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},Jie={next:class extends Sm{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends Sm{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},Qie={next:class extends wv{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends wv{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function Yi(e,t){return e?new Jie[t](e):null}function Cm(e,t,r){return e?new Xie[t](e,Nf(e,r)):null}function Nf(e,t,r="error"){const n=e.getTextContentSize();let s=t==="next"?n:t==="previous"?0:t;return(s<0||s>n)&&(r!=="clamp"&&(function(a,...i){const o=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;l.append("code",a);for(const u of i)l.append("v",u);o.search=l.toString(),console.warn(`Minified Lexical warning #${a}; visit ${o.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(284,String(t),String(n),e.getKey()),s=s<0?0:n),s}function gM(e,t){return new eoe(e,t)}function yc(e,t){return jt(e)?new Qie[t](e):null}function Zie(e){return e&&e.getChildCaret()||e}function dC(e){return e&&Zie(e.getAdjacentCaret())}class fC{type="node-caret-range";constructor(t,r,n){this.anchor=t,this.focus=r,this.direction=n}getLatest(){const t=this.anchor.getLatest(),r=this.focus.getLatest();return t===this.anchor&&r===this.focus?this:new fC(t,r,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const t=s=>{const a=this[s].getLatest();return Ef(a)?(function(i,o){const{direction:l,origin:u}=i,d=Nf(u,o==="focus"?u1(l):l);return gM(i,d-i.offset)})(a,s):null},r=t("anchor"),n=t("focus");if(r&&n){const{caret:s}=r,{caret:a}=n;if(s.isSameNodeCaret(a))return[gM(s,a.offset-s.offset),null]}return[r,n]}iterNodeCarets(t="root"){const r=Ef(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),n=this.focus.getLatest(),s=Ef(n),a=i=>i.isSameNodeCaret(n)?null:dC(i)||i.getParentCaret(t);return mC({hasNext:i=>i!==null&&!(s&&n.isSameNodeCaret(i)),initial:r.isSameNodeCaret(n)?null:a(r),map:i=>i,step:a})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class eoe{type="slice";constructor(t,r){this.caret=t,this.distance=r}getSliceIndices(){const{distance:t,caret:{offset:r}}=this,n=r+t;return n<r?[n,r]:[r,n]}getTextContent(){const[t,r]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(t,r)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:t,direction:r}}=this,[n,s]=this.getSliceIndices(),a=t.getTextContent();return Cm(t.setTextContent(a.slice(0,n)+a.slice(s)),r,n)}}function hC(e){return Of(e,Yi($s(),e.direction))}function toe(e){return Of(e,e)}function Of(e,t){return e.direction!==t.direction&&Zt(265),new fC(e,t,e.direction)}function mC(e){const{initial:t,hasNext:r,step:n,map:s}=e;let a=t;return{[Symbol.iterator](){return this},next(){if(!r(a))return{done:!0,value:void 0};const i={done:!1,value:s(a)};return a=n(a),i}}}function uU(e,t){const r=Wb(e.origin,t.origin);switch(r===null&&Zt(275,e.origin.getKey(),t.origin.getKey()),r.type){case"same":{const n=e.type==="text",s=t.type==="text";return n&&s?(function(a,i){return Math.sign(a-i)})(e.offset,t.offset):e.type===t.type?0:n?-1:s?1:e.type==="child"?-1:1}case"ancestor":return e.type==="child"?-1:1;case"descendant":return t.type==="child"?1:-1;case"branch":return dU(r)}}function dU(e){const{a:t,b:r}=e,n=t.__key,s=r.__key;let a=t,i=r;for(;a&&i;a=a.getNextSibling(),i=i.getNextSibling()){if(a.__key===s)return-1;if(i.__key===n)return 1}return a===null?1:-1}function Yw(e,t){return t.is(e)}function pM(e){return jt(e)?[e.getLatest(),null]:[e.getParent(),e.getLatest()]}function Wb(e,t){if(e.is(t))return{commonAncestor:e,type:"same"};const r=new Map;for(let[n,s]=pM(e);n;s=n,n=n.getParent())r.set(n,s);for(let[n,s]=pM(t);n;s=n,n=n.getParent()){const a=r.get(n);if(a!==void 0)return a===null?(Yw(e,n)||Zt(276),{commonAncestor:n,type:"ancestor"}):s===null?(Yw(t,n)||Zt(277),{commonAncestor:n,type:"descendant"}):((jt(a)||Yw(e,a))&&(jt(s)||Yw(t,s))&&n.is(a.getParent())&&n.is(s.getParent())||Zt(278),{a,b:s,commonAncestor:n,type:"branch"})}return null}function a0(e,t){const{type:r,key:n,offset:s}=e,a=Uie(e.key);return r==="text"?(hr(a)||Zt(266,a.getType(),n),Cm(a,t,s)):(jt(a)||Zt(267,a.getType(),n),soe(a,e.offset,t))}function Em(e,t){const{origin:r,direction:n}=t,s=n==="next";Ef(t)?e.set(r.getKey(),t.offset,"text"):Tm(t)?hr(r)?e.set(r.getKey(),Nf(r,n),"text"):e.set(r.getParentOrThrow().getKey(),r.getIndexWithinParent()+(s?1:0),"element"):(qu(t)&&jt(r)||Zt(268),e.set(r.getKey(),s?0:r.getChildrenSize(),"element"))}function roe(e){const t=fr(),r=Vt(t)?t:L_();return Hb(r,e),Xi(r),r}function Hb(e,t){Em(e.anchor,t.anchor),Em(e.focus,t.focus)}function xM(e){const{anchor:t,focus:r}=e,n=a0(t,"next"),s=a0(r,"next"),a=uU(n,s)<=0?"next":"previous";return Of($p(n,a),$p(s,a))}function gC(e){const{direction:t,origin:r}=e,n=Yi(r,u1(t)).getNodeAtCaret();return n?Yi(n,t):yc(r.getParentOrThrow(),t)}function yM(e,t="root"){const r=[e];for(let n=qu(e)?e.getParentCaret(t):e.getSiblingCaret();n!==null;n=n.getParentCaret(t))r.push(gC(n));return r}function dS(e){return!!e&&e.origin.isAttached()}function noe(e,t="removeEmptySlices"){if(e.isCollapsed())return e;const r="root",n="next";let s=t;const a=hU(e,n),i=yM(a.anchor,r),o=yM(a.focus.getFlipped(),r),l=new Set,u=[];for(const x of a.iterNodeCarets(r))if(qu(x))l.add(x.origin.getKey());else if(Tm(x)){const{origin:y}=x;jt(y)&&!l.has(y.getKey())||u.push(y)}for(const x of u)x.remove();for(const x of a.getTextSlices()){if(!x)continue;const{origin:y}=x.caret,v=y.getTextContentSize(),T=gC(Yi(y,n)),k=y.getMode();if(Math.abs(x.distance)===v&&s==="removeEmptySlices"||k==="token"&&x.distance!==0)T.remove();else if(x.distance!==0){s="removeEmptySlices";let b=x.removeTextSlice();const N=x.caret.origin;if(k==="segmented"){const E=b.origin,P=oa(E.getTextContent()).setStyle(E.getStyle()).setFormat(E.getFormat());T.replaceOrInsert(P),b=Cm(P,n,b.offset)}N.is(i[0].origin)&&(i[0]=b),N.is(o[0].origin)&&(o[0]=b.getFlipped())}}let d,f;for(const x of i)if(dS(x)){d=dc(x);break}for(const x of o)if(dS(x)){f=dc(x);break}const h=(function(x,y,v){if(!x||!y)return null;const T=x.getParentAtCaret(),k=y.getParentAtCaret();if(!T||!k)return null;const b=T.getParents().reverse();b.push(T);const N=k.getParents().reverse();N.push(k);const E=Math.min(b.length,N.length);let P;for(P=0;P<E&&b[P]===N[P];P++);const M=(O,L)=>{let q;for(let Q=P;Q<O.length;Q++){const ae=O[Q];if($o(ae))return;!q&&L(ae)&&(q=ae)}return q},j=M(b,uc),A=j&&M(N,(O=>v.has(O.getKey())&&uc(O)));return j&&A?[j,A]:null})(d,f,l);if(h){const[x,y]=h;yc(x,"previous").splice(0,y.getChildren()),y.remove()}const g=[d,f,...i,...o].find(dS);if(g)return toe($p(dc(g),e.direction));Zt(269,JSON.stringify(i.map((x=>x.origin.__key))))}function dc(e){const t=(function(s){let a=s;for(;qu(a);){const i=dC(a);if(!qu(i))break;a=i}return a})(e.getLatest()),{direction:r}=t;if(hr(t.origin))return Ef(t)?t:Cm(t.origin,r,r);const n=t.getAdjacentCaret();return Tm(n)&&hr(n.origin)?Cm(n.origin,r,u1(r)):t}function fU(e){return Ef(e)&&e.offset!==Nf(e.origin,e.direction)}function $p(e,t){return e.direction===t?e:e.getFlipped()}function hU(e,t){return e.direction===t?e:Of($p(e.focus,t),$p(e.anchor,t))}function soe(e,t,r){let n=yc(e,"next");for(let s=0;s<t;s++){const a=n.getAdjacentCaret();if(a===null)break;n=a}return $p(n,r)}const mU=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,aoe=mU?S.useLayoutEffect:S.useEffect,Xw={tag:Vy};function gU({initialConfig:e,children:t}){const r=S.useMemo((()=>{const{theme:n,namespace:s,nodes:a,onError:i,editorState:o,html:l}=e,u=Cae(null,n),d=Pie({editable:e.editable,html:l,namespace:s,nodes:a,onError:f=>i(f,d),theme:n});return(function(f,h){if(h!==null){if(h===void 0)f.update((()=>{const g=$s();if(g.isEmpty()){const x=Ns();g.append(x);const y=mU?document.activeElement:null;(fr()!==null||y!==null&&y===f.getRootElement())&&x.select()}}),Xw);else if(h!==null)switch(typeof h){case"string":{const g=f.parseEditorState(h);f.setEditorState(g,Xw);break}case"object":f.setEditorState(h,Xw);break;case"function":f.update((()=>{$s().isEmpty()&&h(f)}),Xw)}}})(d,o),[d,u]}),[]);return aoe((()=>{const n=e.editable,[s]=r;s.setEditable(n===void 0||n)}),[]),c.jsx(a1.Provider,{value:r,children:t})}const ioe=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?S.useLayoutEffect:S.useEffect;function ooe(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function loe(){return(function(e){const[t]=Zu(),r=S.useMemo((()=>e(t)),[t,e]),[n,s]=S.useState((()=>r.initialValueFn())),a=S.useRef(n);return ioe((()=>{const{initialValueFn:i,subscribe:o}=r,l=i();return a.current!==l&&(a.current=l,s(l)),o((u=>{a.current=u,s(u)}))}),[r,e]),n})(ooe)}function coe(){return $s().getTextContent()}function uoe(e,t=!0){if(e)return!1;let r=coe();return t&&(r=r.trim()),r===""}function doe(e){if(!uoe(e,!1))return!1;const t=$s().getChildren(),r=t.length;if(r>1)return!1;for(let n=0;n<r;n++){const s=t[n];if(zn(s))return!1;if(jt(s)){if(!XT(s)||s.__indent!==0)return!1;const a=s.getChildren(),i=a.length;for(let o=0;o<i;o++){const l=a[n];if(!hr(l))return!1}}}return!0}function pU(e){return()=>doe(e)}const y8=new Map;function xU(e){const t={};if(!e)return t;const r=e.split(";");for(const n of r)if(n!==""){const[s,a]=n.split(/:([^]+)/);s&&a&&(t[s.trim()]=a.trim())}return t}function vM(e){let t=y8.get(e);return t===void 0&&(t=xU(e),y8.set(e,t)),t}function yU(e){const t=c2().getElementByKey(e.getKey());if(t===null)return null;const r=t.ownerDocument.defaultView;return r===null?null:r.getComputedStyle(t)}function vU(e){return yU(ri(e)?e:e.getParentOrThrow())}function wM(e){const t=vU(e);return t!==null&&t.direction==="rtl"}function wU(e,t){const r=e.getStartEndPoints();if(t.isSelected(e)&&!Rd(t)&&r!==null){const[n,s]=r,a=e.isBackward(),i=n.getNode(),o=s.getNode(),l=t.is(i),u=t.is(o);if(l||u){const[d,f]=u8(e),h=i.is(o),g=t.is(a?o:i),x=t.is(a?i:o);let y,v=0;h?(v=d>f?f:d,y=d>f?d:f):g?(v=a?f:d,y=void 0):x&&(v=0,y=a?d:f),t.__text=t.__text.slice(v,y)}}return t}function foe(e){const t=e.getStyle(),r=xU(t);y8.set(t,r)}function hoe(e,t){const r=e.getFormatType(),n=e.getIndent();r!==t.getFormatType()&&t.setFormat(r),n!==t.getIndent()&&t.setIndent(n)}function Tp(e,t,r=hoe){if(e===null)return;const n=e.getStartEndPoints(),s=new Map;let a=null;if(n){const[i,o]=n;a=L_(),a.anchor.set(i.key,i.offset,i.type),a.focus.set(o.key,o.offset,o.type);const l=fS(i.getNode(),uc),u=fS(o.getNode(),uc);jt(l)&&s.set(l.getKey(),l),jt(u)&&s.set(u.getKey(),u)}for(const i of e.getNodes())if(jt(i)&&uc(i))s.set(i.getKey(),i);else if(n===null){const o=fS(i,uc);jt(o)&&s.set(o.getKey(),o)}for(const[i,o]of s){const l=t();r(o,l),o.replace(l,!0),a&&(i===a.anchor.key&&a.anchor.set(l.getKey(),a.anchor.offset,a.anchor.type),i===a.focus.key&&a.focus.set(l.getKey(),a.focus.offset,a.focus.type))}a&&e.is(fr())&&Xi(a)}function bU(e){const t=_U(e);return t!==null&&t.writingMode==="vertical-rl"}function _U(e){const t=e.anchor.getNode();return jt(t)?yU(t):vU(t)}function bM(e,t){let r=bU(e)?!t:t;SU(e)&&(r=!r);const n=a0(e.focus,r?"previous":"next");if(fU(n))return!1;for(const s of hC(n)){if(qu(s))return!s.origin.isInline();if(!jt(s.origin)){if(zn(s.origin))return!0;break}}return!1}function moe(e,t,r,n){e.modify(t?"extend":"move",r,n)}function SU(e){const t=_U(e);return t!==null&&t.direction==="rtl"}function _M(e,t,r){const n=SU(e);let s;s=bU(e)||n?!r:r,moe(e,t,s,"character")}function fS(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function goe(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const kU=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,poe=kU&&"documentMode"in document?document.documentMode:null;!(!kU||!("InputEvent"in window)||poe)&&"getTargetRanges"in new window.InputEvent("input");function TU(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}function Um(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}function ei(e,...t){const r=TU(...t);r.length>0&&e.classList.add(...r)}function Af(e,...t){const r=TU(...t);r.length>0&&e.classList.remove(...r)}function xoe(e){return e?e.getAdjacentCaret():null}function yoe(e,t){let r=e;for(;r!=null;){if(r instanceof t)return r;r=r.getParent()}return null}function voe(e){const t=G_(e,(r=>jt(r)&&!r.isInline()));return jt(t)||goe(4,e.__key),t}const G_=(e,t)=>{let r=e;for(;r!==$s()&&r!=null;){if(t(r))return r;r=r.getParent()}return null};function Kh(e,t){return e!==null&&Object.getPrototypeOf(e).constructor.name===t.name}function CU(e,t){const r=[],n=Array.from(e).reverse();for(let s=n.pop();s!==void 0;s=n.pop())if(t(s))r.push(s);else if(jt(s))for(const a of woe(s))n.push(a);return r}function woe(e){return boe(yc(e,"previous"))}function boe(e){return mC({hasNext:Tm,initial:e.getAdjacentCaret(),map:t=>t.origin.getLatest(),step:t=>t.getAdjacentCaret()})}function _oe(e){const t=window.location.origin,r=n=>{if(n.origin!==t)return;const s=e.getRootElement();if(document.activeElement!==s)return;const a=n.data;if(typeof a=="string"){let i;try{i=JSON.parse(a)}catch{return}if(i&&i.protocol==="nuanria_messaging"&&i.type==="request"){const o=i.payload;if(o&&o.functionId==="makeChanges"){const l=o.args;if(l){const[u,d,f,h,g,x]=l;e.update((()=>{const y=fr();if(Vt(y)){const v=y.anchor;let T=v.getNode(),k=0,b=0;if(hr(T)&&u>=0&&d>=0&&(k=u,b=u+d,y.setTextNodeRange(T,k,T,b)),k===b&&f===""||(y.insertRawText(f),T=v.getNode()),hr(T)){k=h,b=h+g;const N=T.getTextContentSize();k=k>N?N:k,b=b>N?N:b,y.setTextNodeRange(T,k,T,b)}n.stopImmediatePropagation()}}))}}}}};return window.addEventListener("message",r,!0),()=>{window.removeEventListener("message",r,!0)}}function Soe(e,t){const r=t.body?t.body.childNodes:[];let n=[];const s=[];for(let a=0;a<r.length;a++){const i=r[a];if(!NU.has(i.nodeName)){const o=AU(i,e,s,!1);o!==null&&(n=n.concat(o))}}return(function(a){for(const i of a)i.getNextSibling()instanceof YT&&i.insertAfter(Yu());for(const i of a){const o=i.getChildren();for(const l of o)i.insertBefore(l);i.remove()}})(s),n}function koe(e,t){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const r=document.createElement("div"),n=$s().getChildren();for(let s=0;s<n.length;s++)EU(e,n[s],r,t);return r.innerHTML}function EU(e,t,r,n=null){let s=n===null||t.isSelected(n);const a=jt(t)&&t.excludeFromCopy("html");let i=t;if(n!==null){let g=iC(t);g=hr(g)&&n!==null?wU(n,g):g,i=g}const o=jt(i)?i.getChildren():[],l=QT(e,i.getType());let u;u=l&&l.exportDOM!==void 0?l.exportDOM(e,i):i.exportDOM(e);const{element:d,after:f}=u;if(!d)return!1;const h=document.createDocumentFragment();for(let g=0;g<o.length;g++){const x=o[g],y=EU(e,x,h,n);!s&&jt(t)&&y&&t.extractWithChild(x,n,"html")&&(s=!0)}if(s&&!a){if((As(d)||p8(d))&&d.append(h),r.append(d),f){const g=f.call(i,d);g&&(p8(d)?d.replaceChildren(g):d.replaceWith(g))}}else r.append(h);return s}const NU=new Set(["STYLE","SCRIPT"]);function AU(e,t,r,n,s=new Map,a){let i=[];if(NU.has(e.nodeName))return i;let o=null;const l=(function(x,y){const{nodeName:v}=x,T=y._htmlConversions.get(v.toLowerCase());let k=null;if(T!==void 0)for(const b of T){const N=b(x);N!==null&&(k===null||(k.priority||0)<=(N.priority||0))&&(k=N)}return k!==null?k.conversion:null})(e,t),u=l?l(e):null;let d=null;if(u!==null){d=u.after;const x=u.node;if(o=Array.isArray(x)?x[x.length-1]:x,o!==null){for(const[,y]of s)if(o=y(o,a),!o)break;o&&i.push(...Array.isArray(x)?x:[o])}u.forChild!=null&&s.set(e.nodeName,u.forChild)}const f=e.childNodes;let h=[];const g=(o==null||!$o(o))&&(o!=null&&d8(o)||n);for(let x=0;x<f.length;x++)h.push(...AU(f[x],t,r,g,new Map(s),o));return d!=null&&(h=d(h)),v4(e)&&(h=Toe(e,h,g?()=>{const x=new YT;return r.push(x),x}:Ns)),o==null?h.length>0?i=i.concat(h):v4(e)&&(function(x){return x.nextSibling==null||x.previousSibling==null?!1:x8(x.nextSibling)&&x8(x.previousSibling)})(e)&&(i=i.concat(Yu())):jt(o)&&o.append(...h),i}function Toe(e,t,r){const n=e.style.textAlign,s=[];let a=[];for(let i=0;i<t.length;i++){const o=t[i];if(d8(o))n&&!o.getFormat()&&o.setFormat(n),s.push(o);else if(a.push(o),i===t.length-1||i<t.length-1&&d8(t[i+1])){const l=r();l.setFormat(n),l.append(...a),s.push(l),a=[]}}return s}function w4(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Coe(e,t=fr()){return t==null&&w4(166),Vt(t)&&t.isCollapsed()||t.getNodes().length===0?"":koe(e,t)}function Eoe(e,t=fr()){return t==null&&w4(166),Vt(t)&&t.isCollapsed()||t.getNodes().length===0?null:JSON.stringify(Noe(e,t))}function SM(e,t,r){const n=e.getData("application/x-lexical-editor");if(n)try{const o=JSON.parse(n);if(o.namespace===r._config.namespace&&Array.isArray(o.nodes))return kM(r,Aoe(o.nodes),t)}catch{}const s=e.getData("text/html"),a=e.getData("text/plain");if(s&&a!==s)try{const o=new DOMParser().parseFromString((function(l){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:u=>u}).createHTML(l):l})(s),"text/html");return kM(r,Soe(r,o),t)}catch{}const i=a||e.getData("text/uri-list");if(i!=null)if(Vt(t)){const o=i.split(/(\r?\n|\t)/);o[o.length-1]===""&&o.pop();for(let l=0;l<o.length;l++){const u=fr();if(Vt(u)){const d=o[l];d===`
`||d===`\r
`?u.insertParagraph():d==="	"?u.insertNodes([o1()]):u.insertText(d)}}}else t.insertRawText(i)}function kM(e,t,r){e.dispatchCommand(Zae,{nodes:t,selection:r})||(r.insertNodes(t),(function(n){if(Vt(n)&&n.isCollapsed()){const s=n.anchor;let a=null;const i=a0(s,"previous");if(i)if(Ef(i))a=i.origin;else{const o=Of(i,yc($s(),"next").getFlipped());for(const l of o){if(hr(l.origin)){a=l.origin;break}if(jt(l.origin)&&!l.origin.isInline())break}}if(a&&hr(a)){const o=a.getFormat(),l=a.getStyle();n.format===o&&n.style===l||(n.format=o,n.style=l,n.dirty=!0)}}})(r))}function jU(e,t,r,n=[]){let s=t===null||r.isSelected(t);const a=jt(r)&&r.excludeFromCopy("html");let i=r;if(t!==null){let u=iC(r);u=hr(u)&&t!==null?wU(t,u):u,i=u}const o=jt(i)?i.getChildren():[],l=(function(u){const d=u.exportJSON(),f=u.constructor;if(d.type!==f.getType()&&w4(58,f.name),jt(u)){const h=d.children;Array.isArray(h)||w4(59,f.name)}return d})(i);if(hr(i)){const u=i.__text;u.length>0?l.text=u:s=!1}for(let u=0;u<o.length;u++){const d=o[u],f=jU(e,t,d,l.children);!s&&jt(r)&&f&&r.extractWithChild(d,t,"clone")&&(s=!0)}if(s&&!a)n.push(l);else if(Array.isArray(l.children))for(let u=0;u<l.children.length;u++){const d=l.children[u];n.push(d)}return s}function Noe(e,t){const r=[],n=$s().getChildren();for(let s=0;s<n.length;s++)jU(e,t,n[s],r);return{namespace:e._config.namespace,nodes:r}}function Aoe(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r],s=kie(n);hr(s)&&foe(s),t.push(s)}return t}let Yg=null;async function TM(e,t,r){if(Yg!==null)return!1;if(t!==null)return new Promise(((u,d)=>{e.update((()=>{u(CM(e,t,r))}))}));const n=e.getRootElement(),s=e._window||window,a=window.document,i=au(s);if(n===null||i===null)return!1;const o=a.createElement("span");o.style.cssText="position: fixed; top: -1000px;",o.append(a.createTextNode("#")),n.append(o);const l=new Range;return l.setStart(o,0),l.setEnd(o,1),i.removeAllRanges(),i.addRange(l),new Promise(((u,d)=>{const f=e.registerCommand(O_,(h=>(Kh(h,ClipboardEvent)&&(f(),Yg!==null&&(window.clearTimeout(Yg),Yg=null),u(CM(e,h,r))),!0)),jie);Yg=window.setTimeout((()=>{f(),Yg=null,u(!1)}),50),a.execCommand("copy"),o.remove()}))}function CM(e,t,r){if(r===void 0){const s=au(e._window);if(!s)return!1;const a=s.anchorNode,i=s.focusNode;if(a!==null&&i!==null&&!o2(e,a,i))return!1;const o=fr();if(o===null)return!1;r=Poe(o)}t.preventDefault();const n=t.clipboardData;return n!==null&&(Moe(n,r),!0)}const joe=[["text/html",Coe],["application/x-lexical-editor",Eoe]];function Poe(e=fr()){const t={"text/plain":e?e.getTextContent():""};if(e){const r=c2();for(const[n,s]of joe){const a=s(r,e);a!==null&&(t[n]=a)}}return t}function Moe(e,t){for(const r in t){const n=t[r];n!==void 0&&e.setData(r,n)}}function EM(e,t){if(document.caretRangeFromPoint!==void 0){const r=document.caretRangeFromPoint(e,t);return r===null?null:{node:r.startContainer,offset:r.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const r=document.caretPositionFromPoint(e,t);return r===null?null:{node:r.offsetNode,offset:r.offset}}return null}const d1=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Foe=d1&&"documentMode"in document?document.documentMode:null,Doe=!(!d1||!("InputEvent"in window)||Foe)&&"getTargetRanges"in new window.InputEvent("input"),Ooe=d1&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),NM=d1&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Ioe=d1&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Roe=d1&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!Ioe,AM=Jr("DRAG_DROP_PASTE_FILE");let u2=class PU extends yo{static getType(){return"quote"}static clone(t){return new PU(t.__key)}createDOM(t){const r=document.createElement("blockquote");return ei(r,t.theme.quote),r}updateDOM(t,r){return!1}static importDOM(){return{blockquote:t=>({conversion:Loe,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(As(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();s&&(r.dir=s)}return{element:r}}static importJSON(t){return d2().updateFromJSON(t)}insertNewAfter(t,r){const n=Ns(),s=this.getDirection();return n.setDirection(s),this.insertAfter(n,r),n}collapseAtStart(){const t=Ns();return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}canMergeWhenEmpty(){return!0}};function d2(){return Wo(new u2)}function jM(e){return e instanceof u2}let f2=class MU extends yo{static getType(){return"heading"}static clone(t){return new MU(t.__tag,t.__key)}constructor(t,r){super(r),this.__tag=t}getTag(){return this.__tag}setTag(t){const r=this.getWritable();return this.__tag=t,r}createDOM(t){const r=this.__tag,n=document.createElement(r),s=t.theme.heading;if(s!==void 0){const a=s[r];ei(n,a)}return n}updateDOM(t,r,n){return t.__tag!==this.__tag}static importDOM(){return{h1:t=>({conversion:Xg,priority:0}),h2:t=>({conversion:Xg,priority:0}),h3:t=>({conversion:Xg,priority:0}),h4:t=>({conversion:Xg,priority:0}),h5:t=>({conversion:Xg,priority:0}),h6:t=>({conversion:Xg,priority:0}),p:t=>{const r=t.firstChild;return r!==null&&PM(r)?{conversion:()=>({node:null}),priority:3}:null},span:t=>PM(t)?{conversion:r=>({node:bf("h1")}),priority:3}:null}}exportDOM(t){const{element:r}=super.exportDOM(t);if(As(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();s&&(r.dir=s)}return{element:r}}static importJSON(t){return bf(t.tag).updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTag(t.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(t,r=!0){const n=t?t.anchor.offset:0,s=this.getLastDescendant(),a=!s||t&&t.anchor.key===s.getKey()&&n===s.getTextContentSize()||!t?Ns():bf(this.getTag()),i=this.getDirection();if(a.setDirection(i),this.insertAfter(a,r),n===0&&!this.isEmpty()&&t){const o=Ns();o.select(),this.replace(o,!0)}return a}collapseAtStart(){const t=this.isEmpty()?Ns():bf(this.getTag());return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}extractWithChild(){return!0}};function PM(e){return e.nodeName.toLowerCase()==="span"&&e.style.fontSize==="26pt"}function Xg(e){const t=e.nodeName.toLowerCase();let r=null;return t!=="h1"&&t!=="h2"&&t!=="h3"&&t!=="h4"&&t!=="h5"&&t!=="h6"||(r=bf(t),e.style!==null&&(oC(e,r),r.setFormat(e.style.textAlign))),{node:r}}function Loe(e){const t=d2();return e.style!==null&&(t.setFormat(e.style.textAlign),oC(e,t)),{node:t}}function bf(e="h1"){return Wo(new f2(e))}function Boe(e){return e instanceof f2}function Jw(e){let t=null;if(Kh(e,DragEvent)?t=e.dataTransfer:Kh(e,ClipboardEvent)&&(t=e.clipboardData),t===null)return[!1,[],!1];const r=t.types,n=r.includes("Files"),s=r.includes("text/html")||r.includes("text/plain");return[n,Array.from(t.files),s]}function MM(e){const t=fr();if(!Vt(t))return!1;const r=new Set,n=t.getNodes();for(let s=0;s<n.length;s++){const a=n[s],i=a.getKey();if(r.has(i))continue;const o=G_(a,(u=>jt(u)&&!u.isInline()));if(o===null)continue;const l=o.getKey();o.canIndent()&&!r.has(l)&&(r.add(l),e(o))}return r.size>0}function FM(e){const t=Df(e);return zn(t)}function hS(e){for(const t of["lowercase","uppercase","capitalize"])e.hasFormat(t)&&e.toggleFormat(t)}function $oe(e){return Um(e.registerCommand(LT,(t=>{const r=fr();return!!io(r)&&(r.clear(),!0)}),Fn),e.registerCommand(sm,(t=>{const r=fr();return Vt(r)?(r.deleteCharacter(t),!0):!!io(r)&&(r.deleteNodes(),!0)}),Fn),e.registerCommand(yv,(t=>{const r=fr();return!!Vt(r)&&(r.deleteWord(t),!0)}),Fn),e.registerCommand(vv,(t=>{const r=fr();return!!Vt(r)&&(r.deleteLine(t),!0)}),Fn),e.registerCommand(_p,(t=>{const r=fr();if(typeof t=="string")r!==null&&r.insertText(t);else{if(r===null)return!1;const n=t.dataTransfer;if(n!=null)SM(n,r,e);else if(Vt(r)){const s=t.data;return s&&r.insertText(s),!0}}return!0}),Fn),e.registerCommand(n8,(()=>{const t=fr();return!!Vt(t)&&(t.removeText(),!0)}),Fn),e.registerCommand(go,(t=>{const r=fr();return!!Vt(r)&&(r.formatText(t),!0)}),Fn),e.registerCommand(Nz,(t=>{const r=fr();if(!Vt(r)&&!io(r))return!1;const n=r.getNodes();for(const s of n){const a=G_(s,(i=>jt(i)&&!i.isInline()));a!==null&&a.setFormat(t)}return!0}),Fn),e.registerCommand(bp,(t=>{const r=fr();return!!Vt(r)&&(r.insertLineBreak(t),!0)}),Fn),e.registerCommand(xv,(()=>{const t=fr();return!!Vt(t)&&(t.insertParagraph(),!0)}),Fn),e.registerCommand(nie,(()=>(bie([o1()]),!0)),Fn),e.registerCommand(sie,(()=>MM((t=>{const r=t.getIndent();t.setIndent(r+1)}))),Fn),e.registerCommand(IP,(()=>MM((t=>{const r=t.getIndent();r>0&&t.setIndent(Math.max(0,r-1))}))),Fn),e.registerCommand(wz,(t=>{const r=fr();if(io(r)){const n=r.getNodes();if(n.length>0)return n[0].selectPrevious(),!0}else if(Vt(r)){const n=h8(r.focus,!0);if(!t.shiftKey&&zn(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),t.preventDefault(),!0}return!1}),Fn),e.registerCommand(bz,(t=>{const r=fr();if(io(r)){const n=r.getNodes();if(n.length>0)return n[0].selectNext(0,0),!0}else if(Vt(r)){if((function(s){const a=s.focus;return a.key==="root"&&a.offset===$s().getChildrenSize()})(r))return t.preventDefault(),!0;const n=h8(r.focus,!1);if(!t.shiftKey&&zn(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),t.preventDefault(),!0}return!1}),Fn),e.registerCommand(vz,(t=>{const r=fr();if(io(r)){const n=r.getNodes();if(n.length>0)return t.preventDefault(),wM(n[0])?n[0].selectNext(0,0):n[0].selectPrevious(),!0}if(!Vt(r))return!1;if(bM(r,!0)){const n=t.shiftKey;return t.preventDefault(),_M(r,n,!0),!0}return!1}),Fn),e.registerCommand(yz,(t=>{const r=fr();if(io(r)){const s=r.getNodes();if(s.length>0)return t.preventDefault(),wM(s[0])?s[0].selectPrevious():s[0].selectNext(0,0),!0}if(!Vt(r))return!1;const n=t.shiftKey;return!!bM(r,!1)&&(t.preventDefault(),_M(r,n,!1),!0)}),Fn),e.registerCommand(Sz,(t=>{if(FM(t.target))return!1;const r=fr();if(Vt(r)){if((function(n){if(!n.isCollapsed())return!1;const{anchor:s}=n;if(s.offset!==0)return!1;const a=s.getNode();if(ri(a))return!1;const i=voe(a);return i.getIndent()>0&&(i.is(a)||a.is(i.getFirstDescendant()))})(r))return t.preventDefault(),e.dispatchCommand(IP,void 0);if(NM&&navigator.language==="ko-KR")return!1}else if(!io(r))return!1;return t.preventDefault(),e.dispatchCommand(sm,!0)}),Fn),e.registerCommand(Tz,(t=>{if(FM(t.target))return!1;const r=fr();return!(!Vt(r)&&!io(r))&&(t.preventDefault(),e.dispatchCommand(sm,!1))}),Fn),e.registerCommand(f4,(t=>{const r=fr();if(!Vt(r))return!1;if(hS(r),t!==null){if((NM||Ooe||Roe)&&Doe)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(bp,!1)}return e.dispatchCommand(xv,void 0)}),Fn),e.registerCommand(kz,(()=>{const t=fr();return!!Vt(t)&&(e.blur(),!0)}),Fn),e.registerCommand(Ez,(t=>{const[,r]=Jw(t);if(r.length>0){const s=EM(t.clientX,t.clientY);if(s!==null){const{offset:a,node:i}=s,o=Df(i);if(o!==null){const l=L_();if(hr(o))l.anchor.set(o.getKey(),a,"text"),l.focus.set(o.getKey(),a,"text");else{const d=o.getParentOrThrow().getKey(),f=o.getIndexWithinParent()+1;l.anchor.set(d,f,"element"),l.focus.set(d,f,"element")}const u=o4(l);Xi(u)}e.dispatchCommand(AM,r)}return t.preventDefault(),!0}const n=fr();return!!Vt(n)}),Fn),e.registerCommand(Az,(t=>{const[r]=Jw(t),n=fr();return!(r&&!Vt(n))}),Fn),e.registerCommand(jz,(t=>{const[r]=Jw(t),n=fr();if(r&&!Vt(n))return!1;const s=EM(t.clientX,t.clientY);if(s!==null){const a=Df(s.node);zn(a)&&t.preventDefault()}return!0}),Fn),e.registerCommand(s8,(()=>(Rie(),!0)),Fn),e.registerCommand(O_,(t=>(TM(e,Kh(t,ClipboardEvent)?t:null),!0)),Fn),e.registerCommand(UT,(t=>((async function(r,n){await TM(n,Kh(r,ClipboardEvent)?r:null),n.update((()=>{const s=fr();Vt(s)?s.removeText():io(s)&&s.getNodes().forEach((a=>a.remove()))}))})(t,e),!0)),Fn),e.registerCommand(BT,(t=>{const[,r,n]=Jw(t);return r.length>0&&!n?(e.dispatchCommand(AM,r),!0):c1(t.target)&&ZT(t.target)?!1:fr()!==null&&((function(s,a){s.preventDefault(),a.update((()=>{const i=fr(),o=Kh(s,InputEvent)||Kh(s,KeyboardEvent)?null:s.clipboardData;o!=null&&i!==null&&SM(o,i,a)}),{tag:Cie})})(t,e),!0)}),Fn),e.registerCommand(_z,(t=>{const r=fr();return Vt(r)&&hS(r),!1}),Fn),e.registerCommand(Cz,(t=>{const r=fr();return Vt(r)&&hS(r),!1}),Fn))}const v8=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?S.useLayoutEffect:S.useEffect;function DM(e){return e.getEditorState().read(pU(e.isComposing()))}function FU({contentEditable:e,placeholder:t=null,ErrorBoundary:r}){const[n]=Zu(),s=(function(a,i){const[o,l]=S.useState((()=>a.getDecorators()));return v8((()=>a.registerDecoratorListener((u=>{_k.flushSync((()=>{l(u)}))}))),[a]),S.useEffect((()=>{l(a.getDecorators())}),[a]),S.useMemo((()=>{const u=[],d=Object.keys(o);for(let f=0;f<d.length;f++){const h=d[f],g=c.jsx(i,{onError:y=>a._onError(y),children:c.jsx(S.Suspense,{fallback:null,children:o[h]})}),x=a.getElementByKey(h);x!==null&&u.push(_k.createPortal(g,x,h))}return u}),[i,o,a])})(n,r);return(function(a){v8((()=>Um($oe(a),_oe(a))),[a])})(n),c.jsxs(c.Fragment,{children:[e,c.jsx(zoe,{content:t}),s]})}function zoe({content:e}){const[t]=Zu(),r=(function(s){const[a,i]=S.useState((()=>DM(s)));return v8((()=>{function o(){const l=DM(s);i(l)}return o(),Um(s.registerUpdateListener((()=>{o()})),s.registerEditableListener((()=>{o()})))}),[s]),a})(t),n=loe();return r?typeof e=="function"?e(n):e:null}const DU=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?S.useLayoutEffect:S.useEffect;function Uoe({editor:e,ariaActiveDescendant:t,ariaAutoComplete:r,ariaControls:n,ariaDescribedBy:s,ariaErrorMessage:a,ariaExpanded:i,ariaInvalid:o,ariaLabel:l,ariaLabelledBy:u,ariaMultiline:d,ariaOwns:f,ariaRequired:h,autoCapitalize:g,className:x,id:y,role:v="textbox",spellCheck:T=!0,style:k,tabIndex:b,"data-testid":N,...E},P){const[M,j]=S.useState(e.isEditable()),A=S.useCallback((L=>{L&&L.ownerDocument&&L.ownerDocument.defaultView?e.setRootElement(L):e.setRootElement(null)}),[e]),O=S.useMemo((()=>(function(...L){return q=>{L.forEach((Q=>{typeof Q=="function"?Q(q):Q!=null&&(Q.current=q)}))}})(P,A)),[A,P]);return DU((()=>(j(e.isEditable()),e.registerEditableListener((L=>{j(L)})))),[e]),c.jsx("div",{"aria-activedescendant":M?t:void 0,"aria-autocomplete":M?r:"none","aria-controls":M?n:void 0,"aria-describedby":s,...a!=null?{"aria-errormessage":a}:{},"aria-expanded":M&&v==="combobox"?!!i:void 0,...o!=null?{"aria-invalid":o}:{},"aria-label":l,"aria-labelledby":u,"aria-multiline":d,"aria-owns":M?f:void 0,"aria-readonly":!M||void 0,"aria-required":h,autoCapitalize:g,className:x,contentEditable:M,"data-testid":N,id:y,ref:O,role:v,spellCheck:T,style:k,tabIndex:b,...E})}const Woe=S.forwardRef(Uoe);function OM(e){return e.getEditorState().read(pU(e.isComposing()))}const OU=S.forwardRef(Hoe);function Hoe(e,t){const{placeholder:r,...n}=e,[s]=Zu();return c.jsxs(c.Fragment,{children:[c.jsx(Woe,{editor:s,...n,ref:t}),r!=null&&c.jsx(Goe,{editor:s,content:r})]})}function Goe({content:e,editor:t}){const r=(function(i){const[o,l]=S.useState((()=>OM(i)));return DU((()=>{function u(){const d=OM(i);l(d)}return u(),Um(i.registerUpdateListener((()=>{u()})),i.registerEditableListener((()=>{u()})))}),[i]),o})(t),[n,s]=S.useState(t.isEditable());if(S.useLayoutEffect((()=>(s(t.isEditable()),t.registerEditableListener((i=>{s(i)})))),[t]),!r)return null;let a=null;return typeof e=="function"?a=e(n):e!==null&&(a=e),a===null?null:c.jsx("div",{"aria-hidden":!0,children:a})}const Qw=0,w8=1,b8=2,Kc=0,Voe=1,IM=2,qoe=3,Koe=4;function Yoe(e,t,r,n,s){if(e===null||r.size===0&&n.size===0&&!s)return Kc;const a=t._selection,i=e._selection;if(s)return Voe;if(!(Vt(a)&&Vt(i)&&i.isCollapsed()&&a.isCollapsed()))return Kc;const o=(function(T,k,b){const N=T._nodeMap,E=[];for(const P of k){const M=N.get(P);M!==void 0&&E.push(M)}for(const[P,M]of b){if(!M)continue;const j=N.get(P);j===void 0||ri(j)||E.push(j)}return E})(t,r,n);if(o.length===0)return Kc;if(o.length>1){const T=t._nodeMap,k=T.get(a.anchor.key),b=T.get(i.anchor.key);return k&&b&&!e._nodeMap.has(k.__key)&&hr(k)&&k.__text.length===1&&a.anchor.offset===1?IM:Kc}const l=o[0],u=e._nodeMap.get(l.__key);if(!hr(u)||!hr(l)||u.__mode!==l.__mode)return Kc;const d=u.__text,f=l.__text;if(d===f)return Kc;const h=a.anchor,g=i.anchor;if(h.key!==g.key||h.type!=="text")return Kc;const x=h.offset,y=g.offset,v=f.length-d.length;return v===1&&y===x-1?IM:v===-1&&y===x+1?qoe:v===-1&&y===x?Koe:Kc}function Xoe(e,t){let r=Date.now(),n=Kc;return(s,a,i,o,l,u)=>{const d=Date.now();if(u.has(p4))return n=Kc,r=d,b8;const f=Yoe(s,a,o,l,e.isComposing()),h=(()=>{const g=i===null||i.editor===e,x=u.has(Tie);if(!x&&g&&u.has(Vy))return Qw;if(s===null)return w8;const y=a._selection;return o.size>0||l.size>0?x===!1&&f!==Kc&&f===n&&d<r+t&&g||o.size===1&&(function(v,T,k){const b=T._nodeMap.get(v),N=k._nodeMap.get(v),E=T._selection,P=k._selection;return!(Vt(E)&&Vt(P)&&E.anchor.type==="element"&&E.focus.type==="element"&&P.anchor.type==="text"&&P.focus.type==="text"||!hr(b)||!hr(N)||b.__parent!==N.__parent)&&JSON.stringify(T.read((()=>b.exportJSON())))===JSON.stringify(k.read((()=>N.exportJSON())))})(Array.from(o)[0],s,a)?Qw:w8:y!==null?Qw:b8})();return r=d,n=f,h}}function RM(e){e.undoStack=[],e.redoStack=[],e.current=null}function Joe(e,t,r){const n=Xoe(e,r);return Um(e.registerCommand($T,(()=>((function(a,i){const o=i.redoStack,l=i.undoStack;if(l.length!==0){const u=i.current,d=l.pop();u!==null&&(o.push(u),a.dispatchCommand(Ww,!0)),l.length===0&&a.dispatchCommand(Hw,!1),i.current=d||null,d&&d.editor.setEditorState(d.editorState,{tag:p4})}})(e,t),!0)),Fn),e.registerCommand(zT,(()=>((function(a,i){const o=i.redoStack,l=i.undoStack;if(o.length!==0){const u=i.current;u!==null&&(l.push(u),a.dispatchCommand(Hw,!0));const d=o.pop();o.length===0&&a.dispatchCommand(Ww,!1),i.current=d||null,d&&d.editor.setEditorState(d.editorState,{tag:p4})}})(e,t),!0)),Fn),e.registerCommand(iie,(()=>(RM(t),!1)),Fn),e.registerCommand(oie,(()=>(RM(t),e.dispatchCommand(Ww,!1),e.dispatchCommand(Hw,!1),!0)),Fn),e.registerUpdateListener((({editorState:a,prevEditorState:i,dirtyLeaves:o,dirtyElements:l,tags:u})=>{const d=t.current,f=t.redoStack,h=t.undoStack,g=d===null?null:d.editorState;if(d!==null&&a===g)return;const x=n(i,a,d,o,l,u);if(x===w8)f.length!==0&&(t.redoStack=[],e.dispatchCommand(Ww,!1)),d!==null&&(h.push({...d}),e.dispatchCommand(Hw,!0));else if(x===b8)return;t.current={editor:e,editorState:a}})))}function Qoe(){return{current:null,redoStack:[],undoStack:[]}}function IU({delay:e,externalHistoryState:t}){const[r]=Zu();return(function(n,s,a=1e3){const i=S.useMemo((()=>s||Qoe()),[s]);S.useEffect((()=>Joe(n,i,a)),[a,n,i])})(r,t,e),null}function RU({defaultSelection:e}){const[t]=Zu();return S.useEffect((()=>{t.focus((()=>{const r=document.activeElement,n=t.getRootElement();n===null||r!==null&&n.contains(r)||n.focus({preventScroll:!0})}),{defaultSelection:e})}),[e,t]),null}function _8(e,t){return _8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},_8(e,t)}var LM={error:null},Zoe=(function(e){var t,r;function n(){for(var a,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(a=e.call.apply(e,[this].concat(o))||this).state=LM,a.resetErrorBoundary=function(){for(var u,d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];a.props.onReset==null||(u=a.props).onReset.apply(u,f),a.reset()},a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,_8(t,r),n.getDerivedStateFromError=function(a){return{error:a}};var s=n.prototype;return s.reset=function(){this.setState(LM)},s.componentDidCatch=function(a,i){var o,l;(o=(l=this.props).onError)==null||o.call(l,a,i)},s.componentDidUpdate=function(a,i){var o,l,u,d,f=this.state.error,h=this.props.resetKeys;f!==null&&i.error!==null&&((u=a.resetKeys)===void 0&&(u=[]),(d=h)===void 0&&(d=[]),u.length!==d.length||u.some((function(g,x){return!Object.is(g,d[x])})))&&((o=(l=this.props).onResetKeysChange)==null||o.call(l,a.resetKeys,h),this.reset())},s.render=function(){var a=this.state.error,i=this.props,o=i.fallbackRender,l=i.FallbackComponent,u=i.fallback;if(a!==null){var d={error:a,resetErrorBoundary:this.resetErrorBoundary};if(S.isValidElement(u))return u;if(typeof o=="function")return o(d);if(l)return S.createElement(l,d);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},n})(S.Component);function LU({children:e,onError:t}){return c.jsx(Zoe,{fallback:c.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:t,children:e})}const pC=/^(\d+(?:\.\d+)?)px$/,Cp={BOTH:3,NO_STATUS:0,ROW:1};class f1 extends yo{static getType(){return"tablecell"}static clone(t){return new f1(t.__headerState,t.__colSpan,t.__width,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__rowSpan=t.__rowSpan,this.__backgroundColor=t.__backgroundColor,this.__verticalAlign=t.__verticalAlign}static importDOM(){return{td:t=>({conversion:BM,priority:0}),th:t=>({conversion:BM,priority:0})}}static importJSON(t){return BU().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeaderStyles(t.headerState).setColSpan(t.colSpan||1).setRowSpan(t.rowSpan||1).setWidth(t.width||void 0).setBackgroundColor(t.backgroundColor||null).setVerticalAlign(t.verticalAlign||void 0)}constructor(t=Cp.NO_STATUS,r=1,n,s){super(s),this.__colSpan=r,this.__rowSpan=1,this.__headerState=t,this.__width=n,this.__backgroundColor=null,this.__verticalAlign=void 0}createDOM(t){const r=document.createElement(this.getTag());return this.__width&&(r.style.width=`${this.__width}px`),this.__colSpan>1&&(r.colSpan=this.__colSpan),this.__rowSpan>1&&(r.rowSpan=this.__rowSpan),this.__backgroundColor!==null&&(r.style.backgroundColor=this.__backgroundColor),S8(this.__verticalAlign)&&(r.style.verticalAlign=this.__verticalAlign),ei(r,t.theme.tableCell,this.hasHeader()&&t.theme.tableCellHeader),r}exportDOM(t){const r=super.exportDOM(t);if(As(r.element)){const n=r.element;n.setAttribute("data-temporary-table-cell-lexical-key",this.getKey()),n.style.border="1px solid black",this.__colSpan>1&&(n.colSpan=this.__colSpan),this.__rowSpan>1&&(n.rowSpan=this.__rowSpan),n.style.width=`${this.getWidth()||75}px`,n.style.verticalAlign=this.getVerticalAlign()||"top",n.style.textAlign="start",this.__backgroundColor===null&&this.hasHeader()&&(n.style.backgroundColor="#f2f3f5")}return r}exportJSON(){return{...super.exportJSON(),...S8(this.__verticalAlign)&&{verticalAlign:this.__verticalAlign},backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,width:this.getWidth()}}getColSpan(){return this.getLatest().__colSpan}setColSpan(t){const r=this.getWritable();return r.__colSpan=t,r}getRowSpan(){return this.getLatest().__rowSpan}setRowSpan(t){const r=this.getWritable();return r.__rowSpan=t,r}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(t,r=Cp.BOTH){const n=this.getWritable();return n.__headerState=t&r|n.__headerState&~r,n}getHeaderStyles(){return this.getLatest().__headerState}setWidth(t){const r=this.getWritable();return r.__width=t,r}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(t){const r=this.getWritable();return r.__backgroundColor=t,r}getVerticalAlign(){return this.getLatest().__verticalAlign}setVerticalAlign(t){const r=this.getWritable();return r.__verticalAlign=t||void 0,r}toggleHeaderStyle(t){const r=this.getWritable();return(r.__headerState&t)===t?r.__headerState-=t:r.__headerState+=t,r}hasHeaderState(t){return(this.getHeaderStyles()&t)===t}hasHeader(){return this.getLatest().__headerState!==Cp.NO_STATUS}updateDOM(t){return t.__headerState!==this.__headerState||t.__width!==this.__width||t.__colSpan!==this.__colSpan||t.__rowSpan!==this.__rowSpan||t.__backgroundColor!==this.__backgroundColor||t.__verticalAlign!==this.__verticalAlign}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}}function S8(e){return e==="middle"||e==="bottom"}function BM(e){const t=e,r=e.nodeName.toLowerCase();let n;pC.test(t.style.width)&&(n=parseFloat(t.style.width));const s=BU(r==="th"?Cp.ROW:Cp.NO_STATUS,t.colSpan,n);s.__rowSpan=t.rowSpan;const a=t.style.backgroundColor;a!==""&&(s.__backgroundColor=a);const i=t.style.verticalAlign;S8(i)&&(s.__verticalAlign=i);const o=t.style,l=(o&&o.textDecoration||"").split(" "),u=o.fontWeight==="700"||o.fontWeight==="bold",d=l.includes("line-through"),f=o.fontStyle==="italic",h=l.includes("underline");return{after:g=>{const x=[];let y=null;const v=()=>{if(y){const T=y.getFirstChild();Kd(T)&&y.getChildrenSize()===1&&T.remove()}};for(const T of g)$ie(T)||hr(T)||Kd(T)?(hr(T)&&(u&&T.toggleFormat("bold"),d&&T.toggleFormat("strikethrough"),f&&T.toggleFormat("italic"),h&&T.toggleFormat("underline")),y?y.append(T):(y=Ns().append(T),x.push(y))):(x.push(T),v(),y=null);return v(),x.length===0&&x.push(Ns()),x},node:s}}function BU(e=Cp.NO_STATUS,t=1,r){return Wo(new f1(e,t,r))}function bv(e){return e instanceof f1}function k8(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}class h1 extends yo{static getType(){return"tablerow"}static clone(t){return new h1(t.__height,t.__key)}static importDOM(){return{tr:t=>({conversion:ele,priority:0})}}static importJSON(t){return $U().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeight(t.height)}constructor(t,r){super(r),this.__height=t}exportJSON(){const t=this.getHeight();return{...super.exportJSON(),...t===void 0?void 0:{height:t}}}createDOM(t){const r=document.createElement("tr");return this.__height&&(r.style.height=`${this.__height}px`),ei(r,t.theme.tableRow),r}extractWithChild(t,r,n){return n==="html"}isShadowRoot(){return!0}setHeight(t){const r=this.getWritable();return r.__height=t,r}getHeight(){return this.getLatest().__height}updateDOM(t){return t.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function ele(e){const t=e;let r;return pC.test(t.style.height)&&(r=parseFloat(t.style.height)),{after:n=>CU(n,bv),node:$U(r)}}function $U(e){return Wo(new h1(e))}function zU(e){return e instanceof h1}const UU=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,tle=UU&&"documentMode"in document?document.documentMode:null;UU&&"InputEvent"in window&&!tle&&new window.InputEvent("input");function rle(e,t,r){const n=[];let s=null,a=null;function i(l){let u=n[l];return u===void 0&&(n[l]=u=[]),u}const o=e.getChildren();for(let l=0;l<o.length;l++){const u=o[l];zU(u)||k8(209);const d=i(l);for(let f=u.getFirstChild(),h=0;f!=null;f=f.getNextSibling()){for(bv(f)||k8(147);d[h]!==void 0;)h++;const g={cell:f,startColumn:h,startRow:l},{__rowSpan:x,__colSpan:y}=f;for(let v=0;v<x&&!(l+v>=o.length);v++){const T=i(l+v);for(let k=0;k<y;k++)T[h+k]=g}}}return[n,s,a]}function gy(e){return As(e)&&e.nodeName==="TABLE"}function nle(e,t){for(let r=t,n=null;r!==null;r=r.getParent()){if(e.is(r))return n;bv(r)&&(n=r)}return null}function sle(e,t,r){return nle(e,Df(t,r))}function $M(e,t,r){if(!t.theme.tableAlignment)return;const n=[],s=[];for(const a of["center","right"]){const i=t.theme.tableAlignment[a];i&&(a===r?s:n).push(i)}Af(e,...n),ei(e,...s)}const ale=new WeakSet;function zM(e=c2()){return ale.has(e)}class h2 extends yo{static getType(){return"table"}getColWidths(){return this.getLatest().__colWidths}setColWidths(t){const r=this.getWritable();return r.__colWidths=t,r}static clone(t){return new h2(t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__colWidths=t.__colWidths,this.__rowStriping=t.__rowStriping,this.__frozenColumnCount=t.__frozenColumnCount,this.__frozenRowCount=t.__frozenRowCount}static importDOM(){return{table:t=>({conversion:ile,priority:1})}}static importJSON(t){return WU().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setRowStriping(t.rowStriping||!1).setFrozenColumns(t.frozenColumnCount||0).setFrozenRows(t.frozenRowCount||0).setColWidths(t.colWidths)}constructor(t){super(t),this.__rowStriping=!1,this.__frozenColumnCount=0,this.__frozenRowCount=0}exportJSON(){return{...super.exportJSON(),colWidths:this.getColWidths(),frozenColumnCount:this.__frozenColumnCount?this.__frozenColumnCount:void 0,frozenRowCount:this.__frozenRowCount?this.__frozenRowCount:void 0,rowStriping:this.__rowStriping?this.__rowStriping:void 0}}extractWithChild(t,r,n){return n==="html"}getDOMSlot(t){const r=gy(t)?t:t.querySelector("table");return gy(r)||k8(229),super.getDOMSlot(t).withElement(r).withAfter(r.querySelector("colgroup"))}createDOM(t,r){const n=document.createElement("table");this.__style&&(n.style.cssText=this.__style);const s=document.createElement("colgroup");if(n.appendChild(s),Gie(s),ei(n,t.theme.table),this.updateTableElement(null,n,t),zM(r)){const a=document.createElement("div"),i=t.theme.tableScrollableWrapper;return i?ei(a,i):a.style.cssText="overflow-x: auto;",a.appendChild(n),this.updateTableWrapper(null,a,n,t),a}return n}updateTableWrapper(t,r,n,s){this.__frozenColumnCount!==(t?t.__frozenColumnCount:0)&&(function(a,i,o,l){l>0?(ei(a,o.theme.tableFrozenColumn),i.setAttribute("data-lexical-frozen-column","true")):(Af(a,o.theme.tableFrozenColumn),i.removeAttribute("data-lexical-frozen-column"))})(r,n,s,this.__frozenColumnCount),this.__frozenRowCount!==(t?t.__frozenRowCount:0)&&(function(a,i,o,l){l>0?(ei(a,o.theme.tableFrozenRow),i.setAttribute("data-lexical-frozen-row","true")):(Af(a,o.theme.tableFrozenRow),i.removeAttribute("data-lexical-frozen-row"))})(r,n,s,this.__frozenRowCount)}updateTableElement(t,r,n){this.__style!==(t?t.__style:"")&&(r.style.cssText=this.__style),this.__rowStriping!==(!!t&&t.__rowStriping)&&(function(s,a,i){i?(ei(s,a.theme.tableRowStriping),s.setAttribute("data-lexical-row-striping","true")):(Af(s,a.theme.tableRowStriping),s.removeAttribute("data-lexical-row-striping"))})(r,n,this.__rowStriping),(function(s,a,i,o){const l=s.querySelector("colgroup");if(!l)return;const u=[];for(let d=0;d<i;d++){const f=document.createElement("col"),h=o&&o[d];h&&(f.style.width=`${h}px`),u.push(f)}l.replaceChildren(...u)})(r,0,this.getColumnCount(),this.getColWidths()),$M(r,n,this.getFormatType())}updateDOM(t,r,n){const s=this.getDOMSlot(r).element;return r===s===zM()||(As(a=r)&&a.nodeName==="DIV"&&this.updateTableWrapper(t,r,s,n),this.updateTableElement(t,s,n),!1);var a}exportDOM(t){const r=super.exportDOM(t),{element:n}=r;return{after:s=>{if(r.after&&(s=r.after(s)),!gy(s)&&As(s)&&(s=s.querySelector("table")),!gy(s))return null;$M(s,t._config,this.getFormatType());const[a]=rle(this),i=new Map;for(const d of a)for(const f of d){const h=f.cell.getKey();i.has(h)||i.set(h,{colSpan:f.cell.getColSpan(),startColumn:f.startColumn})}const o=new Set;for(const d of s.querySelectorAll(":scope > tr > [data-temporary-table-cell-lexical-key]")){const f=d.getAttribute("data-temporary-table-cell-lexical-key");if(f){const h=i.get(f);if(d.removeAttribute("data-temporary-table-cell-lexical-key"),h){i.delete(f);for(let g=0;g<h.colSpan;g++)o.add(g+h.startColumn)}}}const l=s.querySelector(":scope > colgroup");if(l){const d=Array.from(s.querySelectorAll(":scope > colgroup > col")).filter(((f,h)=>o.has(h)));l.replaceChildren(...d)}const u=s.querySelectorAll(":scope > tr");if(u.length>0){const d=document.createElement("tbody");for(const f of u)d.appendChild(f);s.append(d)}return s},element:!gy(n)&&As(n)?n.querySelector("table"):n}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(t,r){const{rows:n,domRows:s}=r;for(let a=0;a<n;a++){const i=s[a];if(i!=null)for(let o=0;o<i.length;o++){const l=i[o];if(l==null)continue;const{elem:u}=l,d=sle(this,u);if(d!==null&&t.is(d))return{x:o,y:a}}}throw new Error("Cell not found in table.")}getDOMCellFromCords(t,r,n){const{domRows:s}=n,a=s[r];if(a==null)return null;const i=a[t<a.length?t:a.length-1];return i??null}getDOMCellFromCordsOrThrow(t,r,n){const s=this.getDOMCellFromCords(t,r,n);if(!s)throw new Error("Cell not found at cords.");return s}getCellNodeFromCords(t,r,n){const s=this.getDOMCellFromCords(t,r,n);if(s==null)return null;const a=Df(s.elem);return bv(a)?a:null}getCellNodeFromCordsOrThrow(t,r,n){const s=this.getCellNodeFromCords(t,r,n);if(!s)throw new Error("Node at cords not TableCellNode.");return s}getRowStriping(){return!!this.getLatest().__rowStriping}setRowStriping(t){const r=this.getWritable();return r.__rowStriping=t,r}setFrozenColumns(t){const r=this.getWritable();return r.__frozenColumnCount=t,r}getFrozenColumns(){return this.getLatest().__frozenColumnCount}setFrozenRows(t){const r=this.getWritable();return r.__frozenRowCount=t,r}getFrozenRows(){return this.getLatest().__frozenRowCount}canSelectBefore(){return!0}canIndent(){return!1}getColumnCount(){const t=this.getFirstChild();if(!t)return 0;let r=0;return t.getChildren().forEach((n=>{bv(n)&&(r+=n.getColSpan())})),r}}function ile(e){const t=WU();e.hasAttribute("data-lexical-row-striping")&&t.setRowStriping(!0),e.hasAttribute("data-lexical-frozen-column")&&t.setFrozenColumns(1),e.hasAttribute("data-lexical-frozen-row")&&t.setFrozenRows(1);const r=e.querySelector(":scope > colgroup");if(r){let n=[];for(const s of r.querySelectorAll(":scope > col")){let a=s.style.width||"";if(!pC.test(a)&&(a=s.getAttribute("width")||"",!/^\d+$/.test(a))){n=void 0;break}n.push(parseFloat(a))}n&&t.setColWidths(n)}return{after:n=>CU(n,zU),node:t}}function WU(){return Wo(new h2)}function _f(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function T8(e){let t=1,r=e.getParent();for(;r!=null;){if(Kn(r)){const n=r.getParent();if(hn(n)){t++,r=n.getParent();continue}_f(40)}return t}return t}function C8(e){let t=e.getParent();hn(t)||_f(40);let r=t;for(;r!==null;)r=r.getParent(),hn(r)&&(t=r);return t}function HU(e){let t=[];const r=e.getChildren().filter(Kn);for(let n=0;n<r.length;n++){const s=r[n],a=s.getFirstChild();hn(a)?t=t.concat(HU(a)):t.push(s)}return t}function Bu(e){return Kn(e)&&hn(e.getFirstChild())}function UM(e){return Il().append(e)}function GU(e,t){return Kn(e)&&(t.length===0||t.length===1&&e.is(t[0])&&e.getChildrenSize()===0)}function WM(e){const t=fr();if(t!==null){let r=t.getNodes();if(Vt(t)){const s=t.getStartEndPoints();s===null&&_f(143);const[a]=s,i=a.getNode(),o=i.getParent();if($o(i)){const l=i.getFirstChild();if(l)r=l.selectStart().getNodes();else{const u=Ns();i.append(u),r=u.select().getNodes()}}else if(GU(i,r)){const l=cl(e);if($o(o)){i.replace(l);const u=Il();jt(i)&&(u.setFormat(i.getFormatType()),u.setIndent(i.getIndent())),l.append(u)}else if(Kn(i)){const u=i.getParentOrThrow();Nm(l,u.getChildren()),u.replace(l)}return}}const n=new Set;for(let s=0;s<r.length;s++){const a=r[s];if(jt(a)&&a.isEmpty()&&!Kn(a)&&!n.has(a.getKey())){HM(a,e);continue}let i=eU(a)?a.getParent():Kn(a)&&a.isEmpty()?a:null;for(;i!=null;){const o=i.getKey();if(hn(i)){if(!n.has(o)){const l=cl(e);Nm(l,i.getChildren()),i.replace(l),n.add(o)}break}{const l=i.getParent();if($o(l)&&!n.has(o)){n.add(o),HM(i,e);break}i=l}}}}}function Nm(e,t){e.splice(e.getChildrenSize(),0,t)}function HM(e,t){if(hn(e))return e;const r=e.getPreviousSibling(),n=e.getNextSibling(),s=Il();let a;if(Nm(s,e.getChildren()),hn(r)&&t===r.getListType())r.append(s),hn(n)&&t===n.getListType()&&(Nm(r,n.getChildren()),n.remove()),a=r;else if(hn(n)&&t===n.getListType())n.getFirstChildOrThrow().insertBefore(s),a=n;else{const i=cl(t);i.append(s),e.replace(i),a=i}return s.setFormat(e.getFormatType()),s.setIndent(e.getIndent()),e.remove(),a}function xC(e,t){const r=e.getLastChild(),n=t.getFirstChild();r&&n&&Bu(r)&&Bu(n)&&(xC(r.getFirstChild(),n.getFirstChild()),n.remove());const s=t.getChildren();s.length>0&&e.append(...s),t.remove()}function ole(){const e=fr();if(Vt(e)){const t=new Set,r=e.getNodes(),n=e.anchor.getNode();if(GU(n,r))t.add(C8(n));else for(let s=0;s<r.length;s++){const a=r[s];if(eU(a)){const i=yoe(a,g0);i!=null&&t.add(C8(i))}}for(const s of t){let a=s;const i=HU(s);for(const o of i){const l=Ns().setTextStyle(e.style).setTextFormat(e.format);Nm(l,o.getChildren()),a.insertAfter(l),a=l,o.__key===e.anchor.key&&Em(e.anchor,dc(yc(l,"next"))),o.__key===e.focus.key&&Em(e.focus,dc(yc(l,"next"))),o.remove()}s.remove()}}}function VU(e){const t=e.getListType()!=="check";let r=e.getStart();for(const n of e.getChildren())Kn(n)&&(n.getValue()!==r&&n.setValue(r),t&&n.getLatest().__checked!=null&&n.setChecked(void 0),hn(n.getFirstChild())||r++)}function lle(e){const t=new Set;if(Bu(e)||t.has(e.getKey()))return;const r=e.getParent(),n=e.getNextSibling(),s=e.getPreviousSibling();if(Bu(n)&&Bu(s)){const a=s.getFirstChild();if(hn(a)){a.append(e);const i=n.getFirstChild();hn(i)&&(Nm(a,i.getChildren()),n.remove(),t.add(n.getKey()))}}else if(Bu(n)){const a=n.getFirstChild();if(hn(a)){const i=a.getFirstChild();i!==null&&i.insertBefore(e)}}else if(Bu(s)){const a=s.getFirstChild();hn(a)&&a.append(e)}else if(hn(r)){const a=Il().setTextFormat(e.getTextFormat()).setTextStyle(e.getTextStyle()),i=cl(r.getListType()).setTextFormat(r.getTextFormat()).setTextStyle(r.getTextStyle());a.append(i),i.append(e),s?s.insertAfter(a):n?n.insertBefore(a):r.append(a)}}function cle(e){if(Bu(e))return;const t=e.getParent(),r=t?t.getParent():void 0;if(hn(r?r.getParent():void 0)&&Kn(r)&&hn(t)){const n=t?t.getFirstChild():void 0,s=t?t.getLastChild():void 0;if(e.is(n))r.insertBefore(e),t.isEmpty()&&r.remove();else if(e.is(s))r.insertAfter(e),t.isEmpty()&&r.remove();else{const a=t.getListType(),i=Il(),o=cl(a);i.append(o),e.getPreviousSiblings().forEach((d=>o.append(d)));const l=Il(),u=cl(a);l.append(u),Nm(u,e.getNextSiblings()),r.insertBefore(i),r.insertAfter(l),r.replace(e)}}}function ule(){const e=fr();if(!Vt(e)||!e.isCollapsed())return!1;const t=e.anchor.getNode();if(!Kn(t)||t.getChildrenSize()!==0)return!1;const r=C8(t),n=t.getParent();hn(n)||_f(40);const s=n.getParent();let a;if($o(s))a=Ns(),r.insertAfter(a);else{if(!Kn(s))return!1;a=Il(),s.insertAfter(a)}a.setTextStyle(e.style).setTextFormat(e.format).select();const i=t.getNextSiblings();if(i.length>0){const o=cl(n.getListType());if(Kn(a)){const l=Il();l.append(o),a.insertAfter(l)}else a.insertAfter(o);o.append(...i)}return(function(o){let l=o;for(;l.getNextSibling()==null&&l.getPreviousSibling()==null;){const u=l.getParent();if(u==null||!Kn(u)&&!hn(u))break;l=u}l.remove()})(t),!0}function b4(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}let g0=class extends yo{$config(){return this.config("listitem",{$transform:t=>{if(t.__checked==null)return;const r=t.getParent();hn(r)&&r.getListType()!=="check"&&t.getChecked()!=null&&t.setChecked(void 0)},extends:yo,importDOM:{li:()=>({conversion:dle,priority:0})}})}constructor(t=1,r=void 0,n){super(n),this.__value=t===void 0?1:t,this.__checked=r}afterCloneFrom(t){super.afterCloneFrom(t),this.__value=t.__value,this.__checked=t.__checked}createDOM(t){const r=document.createElement("li");return this.updateListItemDOM(null,r,t),r}updateListItemDOM(t,r,n){const s=this.getParent();hn(s)&&s.getListType()==="check"&&(function(o,l,u,d){hn(l.getFirstChild())?(o.removeAttribute("role"),o.removeAttribute("tabIndex"),o.removeAttribute("aria-checked")):(o.setAttribute("role","checkbox"),o.setAttribute("tabIndex","-1"),u&&l.__checked===u.__checked||o.setAttribute("aria-checked",l.getChecked()?"true":"false"))})(r,this,t),r.value=this.__value,(function(o,l,u){const d=[],f=[],h=l.list,g=h?h.listitem:void 0;let x;if(h&&h.nested&&(x=h.nested.listitem),g!==void 0&&d.push(...b4(g)),h){const y=u.getParent(),v=hn(y)&&y.getListType()==="check",T=u.getChecked();v&&!T||f.push(h.listitemUnchecked),v&&T||f.push(h.listitemChecked),v&&d.push(T?h.listitemChecked:h.listitemUnchecked)}if(x!==void 0){const y=b4(x);u.getChildren().some((v=>hn(v)))?d.push(...y):f.push(...y)}f.length>0&&Af(o,...f),d.length>0&&ei(o,...d)})(r,n.theme,this);const a=t?t.__style:"",i=this.__style;a!==i&&(i===""?r.removeAttribute("style"):r.style.cssText=i),(function(o,l,u){const d=vM(l.__textStyle);for(const f in d)o.style.setProperty(`--listitem-marker-${f}`,d[f]);if(u)for(const f in vM(u.__textStyle))f in d||o.style.removeProperty(`--listitem-marker-${f}`)})(r,this,t)}updateDOM(t,r,n){const s=r;return this.updateListItemDOM(t,s,n),!1}updateFromJSON(t){return super.updateFromJSON(t).setValue(t.value).setChecked(t.checked)}exportDOM(t){const r=this.createDOM(t._config),n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();return s&&(r.dir=s),{element:r}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...t){for(let r=0;r<t.length;r++){const n=t[r];if(jt(n)&&this.canMergeWith(n)){const s=n.getChildren();this.append(...s),n.remove()}else super.append(n)}return this}replace(t,r){if(Kn(t))return super.replace(t);this.setIndent(0);const n=this.getParentOrThrow();if(!hn(n))return t;if(n.__first===this.getKey())n.insertBefore(t);else if(n.__last===this.getKey())n.insertAfter(t);else{const s=cl(n.getListType());let a=this.getNextSibling();for(;a;){const i=a;a=a.getNextSibling(),s.append(i)}n.insertAfter(t),t.insertAfter(s)}return r&&(jt(t)||_f(139),this.getChildren().forEach((s=>{t.append(s)}))),this.remove(),n.getChildrenSize()===0&&n.remove(),t}insertAfter(t,r=!0){const n=this.getParentOrThrow();if(hn(n)||_f(39),Kn(t))return super.insertAfter(t,r);const s=this.getNextSiblings();if(n.insertAfter(t,r),s.length!==0){const a=cl(n.getListType());s.forEach((i=>a.append(i))),t.insertAfter(a,r)}return t}remove(t){const r=this.getPreviousSibling(),n=this.getNextSibling();super.remove(t),r&&n&&Bu(r)&&Bu(n)&&(xC(r.getFirstChild(),n.getFirstChild()),n.remove())}insertNewAfter(t,r=!0){const n=Il().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(n,r),n}collapseAtStart(t){const r=Ns();this.getChildren().forEach((i=>r.append(i)));const n=this.getParentOrThrow(),s=n.getParentOrThrow(),a=Kn(s);if(n.getChildrenSize()===1)if(a)n.remove(),s.select();else{n.insertBefore(r),n.remove();const i=t.anchor,o=t.focus,l=r.getKey();i.type==="element"&&i.getNode().is(this)&&i.set(l,i.offset,"element"),o.type==="element"&&o.getNode().is(this)&&o.set(l,o.offset,"element")}else n.insertBefore(r),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(t){const r=this.getWritable();return r.__value=t,r}getChecked(){const t=this.getLatest();let r;const n=this.getParent();return hn(n)&&(r=n.getListType()),r==="check"?!!t.__checked:void 0}setChecked(t){const r=this.getWritable();return r.__checked=t,r}toggleChecked(){const t=this.getWritable();return t.setChecked(!t.__checked)}getIndent(){const t=this.getParent();if(t===null||!this.isAttached())return this.getLatest().__indent;let r=t.getParentOrThrow(),n=0;for(;Kn(r);)r=r.getParentOrThrow().getParentOrThrow(),n++;return n}setIndent(t){typeof t!="number"&&_f(117),(t=Math.floor(t))>=0||_f(199);let r=this.getIndent();for(;r!==t;)r<t?(lle(this),r++):(cle(this),r--);return this}canInsertAfter(t){return Kn(t)}canReplaceWith(t){return Kn(t)}canMergeWith(t){return Kn(t)||XT(t)}extractWithChild(t,r){if(!Vt(r))return!1;const n=r.anchor.getNode(),s=r.focus.getNode();return this.isParentOf(n)&&this.isParentOf(s)&&this.getTextContent().length===r.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return cl("bullet")}canMergeWhenEmpty(){return!0}};function dle(e){if(e.classList.contains("task-list-item")){for(const r of e.children)if(r.tagName==="INPUT")return fle(r)}const t=e.getAttribute("aria-checked");return{node:Il(t==="true"||t!=="false"&&void 0)}}function fle(e){return e.getAttribute("type")!=="checkbox"?{node:null}:{node:Il(e.hasAttribute("checked"))}}function Il(e){return Wo(new g0(void 0,e))}function Kn(e){return e instanceof g0}let Yf=class extends yo{$config(){return this.config("list",{$transform:t=>{(function(r){const n=r.getNextSibling();hn(n)&&r.getListType()===n.getListType()&&xC(r,n)})(t),VU(t)},extends:yo,importDOM:{ol:()=>({conversion:VM,priority:0}),ul:()=>({conversion:VM,priority:0})}})}constructor(t="number",r=1,n){super(n);const s=mle[t]||t;this.__listType=s,this.__tag=s==="number"?"ol":"ul",this.__start=r}afterCloneFrom(t){super.afterCloneFrom(t),this.__listType=t.__listType,this.__tag=t.__tag,this.__start=t.__start}getTag(){return this.getLatest().__tag}setListType(t){const r=this.getWritable();return r.__listType=t,r.__tag=t==="number"?"ol":"ul",r}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(t){const r=this.getWritable();return r.__start=t,r}createDOM(t,r){const n=this.__tag,s=document.createElement(n);return this.__start!==1&&s.setAttribute("start",String(this.__start)),s.__lexicalListType=this.__listType,GM(s,t.theme,this),s}updateDOM(t,r,n){return t.__tag!==this.__tag||(GM(r,n.theme,this),!1)}updateFromJSON(t){return super.updateFromJSON(t).setListType(t.listType).setStart(t.start)}exportDOM(t){const r=this.createDOM(t._config,t);return As(r)&&(this.__start!==1&&r.setAttribute("start",String(this.__start)),this.__listType==="check"&&r.setAttribute("__lexicalListType","check")),{element:r}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(t,r,n){let s=n;for(let a=0;a<n.length;a++){const i=n[a];Kn(i)||(s===n&&(s=[...n]),s[a]=Il().append(!jt(i)||hn(i)||i.isInline()?i:oa(i.getTextContent())))}return super.splice(t,r,s)}extractWithChild(t){return Kn(t)}};function GM(e,t,r){const n=[],s=[],a=t.list;if(a!==void 0){const i=a[`${r.__tag}Depth`]||[],o=T8(r)-1,l=o%i.length,u=i[l],d=a[r.__tag];let f;const h=a.nested,g=a.checklist;if(h!==void 0&&h.list&&(f=h.list),d!==void 0&&n.push(d),g!==void 0&&r.__listType==="check"&&n.push(g),u!==void 0){n.push(...b4(u));for(let x=0;x<i.length;x++)x!==l&&s.push(r.__tag+x)}if(f!==void 0){const x=b4(f);o>1?n.push(...x):s.push(...x)}}s.length>0&&Af(e,...s),n.length>0&&ei(e,...n)}function hle(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r];if(Kn(n)){t.push(n);const s=n.getChildren();s.length>1&&s.forEach((a=>{hn(a)&&t.push(UM(a))}))}else t.push(UM(n))}return t}function VM(e){const t=e.nodeName.toLowerCase();let r=null;return t==="ol"?r=cl("number",e.start):t==="ul"&&(r=(function(n){if(n.getAttribute("__lexicallisttype")==="check"||n.classList.contains("contains-task-list"))return!0;for(const s of n.childNodes)if(As(s)&&s.hasAttribute("aria-checked"))return!0;return!1})(e)?cl("check"):cl("bullet")),{after:hle,node:r}}const mle={ol:"number",ul:"bullet"};function cl(e="number",t=1){return Wo(new Yf(e,t))}function hn(e){return e instanceof Yf}const gle=Jr("UPDATE_LIST_START_COMMAND"),yC=Jr("INSERT_UNORDERED_LIST_COMMAND"),vC=Jr("INSERT_ORDERED_LIST_COMMAND"),wC=Jr("REMOVE_LIST_COMMAND");function ple(e){return Um(e.registerCommand(vC,(()=>(WM("number"),!0)),ip),e.registerCommand(gle,(t=>{const{listNodeKey:r,newStart:n}=t,s=za(r);return!!hn(s)&&(s.getListType()==="number"&&(s.setStart(n),VU(s)),!0)}),ip),e.registerCommand(yC,(()=>(WM("bullet"),!0)),ip),e.registerCommand(wC,(()=>(ole(),!0)),ip),e.registerCommand(xv,(()=>ule()),ip),e.registerNodeTransform(g0,(t=>{const r=t.getFirstChild();if(r){if(hr(r)){const n=r.getStyle(),s=r.getFormat();t.getTextStyle()!==n&&t.setTextStyle(n),t.getTextFormat()!==s&&t.setTextFormat(s)}}else{const n=fr();Vt(n)&&(n.style!==t.getTextStyle()||n.format!==t.getTextFormat())&&n.isCollapsed()&&t.is(n.anchor.getNode())&&t.setTextStyle(n.style).setTextFormat(n.format)}})),e.registerNodeTransform(qf,(t=>{const r=t.getParent();if(Kn(r)&&t.is(r.getFirstChild())){const n=t.getStyle(),s=t.getFormat();n===r.getTextStyle()&&s===r.getTextFormat()||r.setTextStyle(n).setTextFormat(s)}})))}function xle(e){const t=r=>{const n=r.getParent();if(hn(r.getFirstChild())||!hn(n))return;const s=G_(r,(a=>Kn(a)&&hn(a.getParent())&&Kn(a.getPreviousSibling())));if(s===null&&r.getIndent()>0)r.setIndent(0);else if(Kn(s)){const a=s.getPreviousSibling();if(Kn(a)){const i=(function(l){let u=l,d=u.getFirstChild();for(;hn(d);){const f=d.getLastChild();if(!Kn(f))break;u=f,d=u.getFirstChild()}return u})(a),o=i.getParent();if(hn(o)){const l=T8(o);l+1<T8(n)&&r.setIndent(l)}}}};return e.registerNodeTransform(Yf,(r=>{const n=[r];for(;n.length>0;){const s=n.shift();if(hn(s)){for(const a of s.getChildren())if(Kn(a)){t(a);const i=a.getFirstChild();hn(i)&&n.push(i)}}}}))}var mS={exports:{}},qM;function yle(){return qM||(qM=1,(function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var r=(function(n){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,i={},o={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function k(b){return b instanceof l?new l(b.type,k(b.content),b.alias):Array.isArray(b)?b.map(k):b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(k){return Object.prototype.toString.call(k).slice(8,-1)},objId:function(k){return k.__id||Object.defineProperty(k,"__id",{value:++a}),k.__id},clone:function k(b,N){N=N||{};var E,P;switch(o.util.type(b)){case"Object":if(P=o.util.objId(b),N[P])return N[P];E={},N[P]=E;for(var M in b)b.hasOwnProperty(M)&&(E[M]=k(b[M],N));return E;case"Array":return P=o.util.objId(b),N[P]?N[P]:(E=[],N[P]=E,b.forEach(function(j,A){E[A]=k(j,N)}),E);default:return b}},getLanguage:function(k){for(;k;){var b=s.exec(k.className);if(b)return b[1].toLowerCase();k=k.parentElement}return"none"},setLanguage:function(k,b){k.className=k.className.replace(RegExp(s,"gi"),""),k.classList.add("language-"+b)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(E){var k=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(E.stack)||[])[1];if(k){var b=document.getElementsByTagName("script");for(var N in b)if(b[N].src==k)return b[N]}return null}},isActive:function(k,b,N){for(var E="no-"+b;k;){var P=k.classList;if(P.contains(b))return!0;if(P.contains(E))return!1;k=k.parentElement}return!!N}},languages:{plain:i,plaintext:i,text:i,txt:i,extend:function(k,b){var N=o.util.clone(o.languages[k]);for(var E in b)N[E]=b[E];return N},insertBefore:function(k,b,N,E){E=E||o.languages;var P=E[k],M={};for(var j in P)if(P.hasOwnProperty(j)){if(j==b)for(var A in N)N.hasOwnProperty(A)&&(M[A]=N[A]);N.hasOwnProperty(j)||(M[j]=P[j])}var O=E[k];return E[k]=M,o.languages.DFS(o.languages,function(L,q){q===O&&L!=k&&(this[L]=M)}),M},DFS:function k(b,N,E,P){P=P||{};var M=o.util.objId;for(var j in b)if(b.hasOwnProperty(j)){N.call(b,j,b[j],E||j);var A=b[j],O=o.util.type(A);O==="Object"&&!P[M(A)]?(P[M(A)]=!0,k(A,N,null,P)):O==="Array"&&!P[M(A)]&&(P[M(A)]=!0,k(A,N,j,P))}}},plugins:{},highlightAll:function(k,b){o.highlightAllUnder(document,k,b)},highlightAllUnder:function(k,b,N){var E={callback:N,container:k,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",E),E.elements=Array.prototype.slice.apply(E.container.querySelectorAll(E.selector)),o.hooks.run("before-all-elements-highlight",E);for(var P=0,M;M=E.elements[P++];)o.highlightElement(M,b===!0,E.callback)},highlightElement:function(k,b,N){var E=o.util.getLanguage(k),P=o.languages[E];o.util.setLanguage(k,E);var M=k.parentElement;M&&M.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(M,E);var j=k.textContent,A={element:k,language:E,grammar:P,code:j};function O(q){A.highlightedCode=q,o.hooks.run("before-insert",A),A.element.innerHTML=A.highlightedCode,o.hooks.run("after-highlight",A),o.hooks.run("complete",A),N&&N.call(A.element)}if(o.hooks.run("before-sanity-check",A),M=A.element.parentElement,M&&M.nodeName.toLowerCase()==="pre"&&!M.hasAttribute("tabindex")&&M.setAttribute("tabindex","0"),!A.code){o.hooks.run("complete",A),N&&N.call(A.element);return}if(o.hooks.run("before-highlight",A),!A.grammar){O(o.util.encode(A.code));return}if(b&&n.Worker){var L=new Worker(o.filename);L.onmessage=function(q){O(q.data)},L.postMessage(JSON.stringify({language:A.language,code:A.code,immediateClose:!0}))}else O(o.highlight(A.code,A.grammar,A.language))},highlight:function(k,b,N){var E={code:k,grammar:b,language:N};if(o.hooks.run("before-tokenize",E),!E.grammar)throw new Error('The language "'+E.language+'" has no grammar.');return E.tokens=o.tokenize(E.code,E.grammar),o.hooks.run("after-tokenize",E),l.stringify(o.util.encode(E.tokens),E.language)},tokenize:function(k,b){var N=b.rest;if(N){for(var E in N)b[E]=N[E];delete b.rest}var P=new f;return h(P,P.head,k),d(k,P,b,P.head,0),x(P)},hooks:{all:{},add:function(k,b){var N=o.hooks.all;N[k]=N[k]||[],N[k].push(b)},run:function(k,b){var N=o.hooks.all[k];if(!(!N||!N.length))for(var E=0,P;P=N[E++];)P(b)}},Token:l};n.Prism=o;function l(k,b,N,E){this.type=k,this.content=b,this.alias=N,this.length=(E||"").length|0}l.stringify=function k(b,N){if(typeof b=="string")return b;if(Array.isArray(b)){var E="";return b.forEach(function(O){E+=k(O,N)}),E}var P={type:b.type,content:k(b.content,N),tag:"span",classes:["token",b.type],attributes:{},language:N},M=b.alias;M&&(Array.isArray(M)?Array.prototype.push.apply(P.classes,M):P.classes.push(M)),o.hooks.run("wrap",P);var j="";for(var A in P.attributes)j+=" "+A+'="'+(P.attributes[A]||"").replace(/"/g,"&quot;")+'"';return"<"+P.tag+' class="'+P.classes.join(" ")+'"'+j+">"+P.content+"</"+P.tag+">"};function u(k,b,N,E){k.lastIndex=b;var P=k.exec(N);if(P&&E&&P[1]){var M=P[1].length;P.index+=M,P[0]=P[0].slice(M)}return P}function d(k,b,N,E,P,M){for(var j in N)if(!(!N.hasOwnProperty(j)||!N[j])){var A=N[j];A=Array.isArray(A)?A:[A];for(var O=0;O<A.length;++O){if(M&&M.cause==j+","+O)return;var L=A[O],q=L.inside,Q=!!L.lookbehind,ae=!!L.greedy,te=L.alias;if(ae&&!L.pattern.global){var ne=L.pattern.toString().match(/[imsuy]*$/)[0];L.pattern=RegExp(L.pattern.source,ne+"g")}for(var B=L.pattern||L,V=E.next,R=P;V!==b.tail&&!(M&&R>=M.reach);R+=V.value.length,V=V.next){var H=V.value;if(b.length>k.length)return;if(!(H instanceof l)){var U=1,I;if(ae){if(I=u(B,R,k,Q),!I||I.index>=k.length)break;var oe=I.index,W=I.index+I[0].length,K=R;for(K+=V.value.length;oe>=K;)V=V.next,K+=V.value.length;if(K-=V.value.length,R=K,V.value instanceof l)continue;for(var Z=V;Z!==b.tail&&(K<W||typeof Z.value=="string");Z=Z.next)U++,K+=Z.value.length;U--,H=k.slice(R,K),I.index-=R}else if(I=u(B,0,H,Q),!I)continue;var oe=I.index,J=I[0],le=H.slice(0,oe),ue=H.slice(oe+J.length),de=R+H.length;M&&de>M.reach&&(M.reach=de);var Te=V.prev;le&&(Te=h(b,Te,le),R+=le.length),g(b,Te,U);var ie=new l(j,q?o.tokenize(J,q):J,te,J);if(V=h(b,Te,ie),ue&&h(b,V,ue),U>1){var xe={cause:j+","+O,reach:de};d(k,b,N,V.prev,R,xe),M&&xe.reach>M.reach&&(M.reach=xe.reach)}}}}}}function f(){var k={value:null,prev:null,next:null},b={value:null,prev:k,next:null};k.next=b,this.head=k,this.tail=b,this.length=0}function h(k,b,N){var E=b.next,P={value:N,prev:b,next:E};return b.next=P,E.prev=P,k.length++,P}function g(k,b,N){for(var E=b.next,P=0;P<N&&E!==k.tail;P++)E=E.next;b.next=E,E.prev=b,k.length-=P}function x(k){for(var b=[],N=k.head.next;N!==k.tail;)b.push(N.value),N=N.next;return b}if(!n.document)return n.addEventListener&&(o.disableWorkerMessageHandler||n.addEventListener("message",function(k){var b=JSON.parse(k.data),N=b.language,E=b.code,P=b.immediateClose;n.postMessage(o.highlight(E,o.languages[N],N)),P&&n.close()},!1)),o;var y=o.util.currentScript();y&&(o.filename=y.src,y.hasAttribute("data-manual")&&(o.manual=!0));function v(){o.manual||o.highlightAll()}if(!o.manual){var T=document.readyState;T==="loading"||T==="interactive"&&y&&y.defer?document.addEventListener("DOMContentLoaded",v):window.requestAnimationFrame?window.requestAnimationFrame(v):window.setTimeout(v,16)}return o})(t);e.exports&&(e.exports=r),typeof Jb<"u"&&(Jb.Prism=r),r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(s,a){var i={};i["language-"+a]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[a]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};o["language-"+a]={pattern:/[\s\S]+/,inside:r.languages[a]};var l={};l[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:o},r.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(n,s){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:r.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,(function(n){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+s.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var a=n.languages.markup;a&&(a.tag.addInlined("style","css"),a.tag.addAttribute("style","css"))})(r),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),r.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),r.languages.markup&&(r.languages.markup.tag.addInlined("script","javascript"),r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),r.languages.js=r.languages.javascript,(function(){if(typeof r>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading",s=function(y,v){return" Error "+y+" while fetching file: "+v},a=" Error: File does not exist or is empty",i={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",l="loading",u="loaded",d="failed",f="pre[data-src]:not(["+o+'="'+u+'"]):not(['+o+'="'+l+'"])';function h(y,v,T){var k=new XMLHttpRequest;k.open("GET",y,!0),k.onreadystatechange=function(){k.readyState==4&&(k.status<400&&k.responseText?v(k.responseText):k.status>=400?T(s(k.status,k.statusText)):T(a))},k.send(null)}function g(y){var v=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(y||"");if(v){var T=Number(v[1]),k=v[2],b=v[3];return k?b?[T,Number(b)]:[T,void 0]:[T,T]}}r.hooks.add("before-highlightall",function(y){y.selector+=", "+f}),r.hooks.add("before-sanity-check",function(y){var v=y.element;if(v.matches(f)){y.code="",v.setAttribute(o,l);var T=v.appendChild(document.createElement("CODE"));T.textContent=n;var k=v.getAttribute("data-src"),b=y.language;if(b==="none"){var N=(/\.(\w+)$/.exec(k)||[,"none"])[1];b=i[N]||N}r.util.setLanguage(T,b),r.util.setLanguage(v,b);var E=r.plugins.autoloader;E&&E.loadLanguages(b),h(k,function(P){v.setAttribute(o,u);var M=g(v.getAttribute("data-range"));if(M){var j=P.split(/\r\n?|\n/g),A=M[0],O=M[1]==null?j.length:M[1];A<0&&(A+=j.length),A=Math.max(0,Math.min(A-1,j.length)),O<0&&(O+=j.length),O=Math.max(0,Math.min(O,j.length)),P=j.slice(A,O).join(`
`),v.hasAttribute("data-start")||v.setAttribute("data-start",String(A+1))}T.textContent=P,r.highlightElement(T)},function(P){v.setAttribute(o,d),T.textContent=P})}}),r.plugins.fileHighlight={highlight:function(v){for(var T=(v||document).querySelectorAll(f),k=0,b;b=T[k++];)r.highlightElement(b)}};var x=!1;r.fileHighlight=function(){x||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),x=!0),r.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(mS)),mS.exports}yle();Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(t,r){var n={};n["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[r]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};s["language-"+r]={pattern:/[\s\S]+/,inside:Prism.languages[r]};var a={};a[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:s},Prism.languages.insertBefore("markup","cdata",a)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,t){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:Prism.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function r(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var n=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,s=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return n}),a=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+s+a+"(?:"+s+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+s+a+")(?:"+s+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(n),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+s+")"+a+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+s+"$"),inside:{"table-header":{pattern:RegExp(n),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:r(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:r(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:r(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:r(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(f){d!==f&&(e.languages.markdown[d].inside.content.inside[f]=e.languages.markdown[f])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function f(h){if(!(!h||typeof h=="string"))for(var g=0,x=h.length;g<x;g++){var y=h[g];if(y.type!=="code"){f(y.content);continue}var v=y.content[1],T=y.content[3];if(v&&T&&v.type==="code-language"&&T.type==="code-block"&&typeof v.content=="string"){var k=v.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");k=(/[a-z][\w-]*/i.exec(k)||[""])[0].toLowerCase();var b="language-"+k;T.alias?typeof T.alias=="string"?T.alias=[T.alias,b]:T.alias.push(b):T.alias=[b]}}}f(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var f="",h=0,g=d.classes.length;h<g;h++){var x=d.classes[h],y=/language-(.+)/.exec(x);if(y){f=y[1];break}}var v=e.languages[f];if(v)d.content=e.highlight(u(d.content),v,f);else if(f&&f!=="none"&&e.plugins.autoloader){var T="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=T,e.plugins.autoloader.loadLanguages(f,function(){var k=document.getElementById(T);k&&(k.innerHTML=e.highlight(k.textContent,e.languages[f],f))})}}});var i=RegExp(e.languages.markup.tag.pattern.source,"gi"),o={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;function u(d){var f=d.replace(i,"");return f=f.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(h,g){if(g=g.toLowerCase(),g[0]==="#"){var x;return g[1]==="x"?x=parseInt(g.slice(2),16):x=Number(g.slice(1)),l(x)}else{var y=o[g];return y||h}}),f}e.languages.md=e.languages.markdown})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var r=e.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))})(Prism);Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/});delete Prism.languages.objectivec["class-name"];Prism.languages.objc=Prism.languages.objectivec;Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};(function(e){var t=e.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};t.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:t},boolean:t.boolean,variable:t.variable}})(Prism);var KM={},YM;function vle(){return YM||(YM=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),KM}vle();var XM={},JM;function wle(){return JM||(JM=1,(function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,r=0;r<2;r++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string})(Prism)),XM}wle();Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/};Prism.languages.swift["string-literal"].forEach(function(e){e.inside.interpolation.inside=Prism.languages.swift});var QM={},ZM;function ble(){return ZM||(ZM=1,(function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript})(Prism)),QM}ble();var eF={},tF;function _le(){return tF||(tF=1,(function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,r=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,n={pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[n,{pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:n.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+r+/[A-Z]\w*\b/.source),lookbehind:!0,inside:n.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":n,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+r+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:n.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+r+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:n.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism)),eF}_le();var rF={},nF;function Sle(){return nF||(nF=1,(function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,r=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return t.source});e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return r})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])})(Prism)),rF}Sle();function qU(e,t){for(const r of e.childNodes){if(As(r)&&r.tagName===t)return!0;qU(r,t)}return!1}const Ay="data-language",py="data-highlight-language",Zw="data-theme";class Wm extends yo{static getType(){return"code"}static clone(t){return new Wm(t.__language,t.__key)}constructor(t,r){super(r),this.__language=t||void 0,this.__isSyntaxHighlightSupported=!1,this.__theme=void 0}afterCloneFrom(t){super.afterCloneFrom(t),this.__language=t.__language,this.__theme=t.__theme,this.__isSyntaxHighlightSupported=t.__isSyntaxHighlightSupported}createDOM(t){const r=document.createElement("code");ei(r,t.theme.code),r.setAttribute("spellcheck","false");const n=this.getLanguage();n&&(r.setAttribute(Ay,n),this.getIsSyntaxHighlightSupported()&&r.setAttribute(py,n));const s=this.getTheme();s&&r.setAttribute(Zw,s);const a=this.getStyle();return a&&r.setAttribute("style",a),r}updateDOM(t,r,n){const s=this.__language,a=t.__language;s?s!==a&&r.setAttribute(Ay,s):a&&r.removeAttribute(Ay);const i=this.__isSyntaxHighlightSupported;t.__isSyntaxHighlightSupported&&a?i&&s?s!==a&&r.setAttribute(py,s):r.removeAttribute(py):i&&s&&r.setAttribute(py,s);const o=this.__theme,l=t.__theme;o?o!==l&&r.setAttribute(Zw,o):l&&r.removeAttribute(Zw);const u=this.__style,d=t.__style;return u?u!==d&&r.setAttribute("style",u):d&&r.removeAttribute("style"),!1}exportDOM(t){const r=document.createElement("pre");ei(r,t._config.theme.code),r.setAttribute("spellcheck","false");const n=this.getLanguage();n&&(r.setAttribute(Ay,n),this.getIsSyntaxHighlightSupported()&&r.setAttribute(py,n));const s=this.getTheme();s&&r.setAttribute(Zw,s);const a=this.getStyle();return a&&r.setAttribute("style",a),{element:r}}static importDOM(){return{code:t=>t.textContent!=null&&(/\r?\n/.test(t.textContent)||qU(t,"BR"))?{conversion:sF,priority:1}:null,div:()=>({conversion:kle,priority:1}),pre:()=>({conversion:sF,priority:0}),table:t=>gS(t)?{conversion:Tle,priority:3}:null,td:t=>{const r=t,n=r.closest("table");return r.classList.contains("js-file-line")||n&&gS(n)?{conversion:aF,priority:3}:null},tr:t=>{const r=t.closest("table");return r&&gS(r)?{conversion:aF,priority:3}:null}}}static importJSON(t){return Hd().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setLanguage(t.language).setTheme(t.theme)}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),theme:this.getTheme()}}insertNewAfter(t,r=!0){const n=this.getChildren(),s=n.length;if(s>=2&&n[s-1].getTextContent()===`
`&&n[s-2].getTextContent()===`
`&&t.isCollapsed()&&t.anchor.key===this.__key&&t.anchor.offset===s){n[s-1].remove(),n[s-2].remove();const l=Ns();return this.insertAfter(l,r),l}const{anchor:a,focus:i}=t,o=(a.isBefore(i)?a:i).getNode();if(hr(o)){let l=Ele(o);const u=[];for(;;)if(I_(l))u.push(o1()),l=l.getNextSibling();else{if(!XU(l))break;{let v=0;const T=l.getTextContent(),k=l.getTextContentSize();for(;v<k&&T[v]===" ";)v++;if(v!==0&&u.push(YU(" ".repeat(v))),v!==k)break;l=l.getNextSibling()}}const d=o.splitText(a.offset)[0],f=a.offset===0?0:1,h=d.getIndexWithinParent()+f,g=o.getParentOrThrow(),x=[Yu(),...u];g.splice(h,0,x);const y=u[u.length-1];y?y.select():a.offset===0?d.selectPrevious():d.getNextSibling().selectNext(0,0)}if(bC(o)){const{offset:l}=t.anchor;o.splice(l,0,[Yu()]),o.select(l+1,l+1)}return null}canIndent(){return!1}collapseAtStart(){const t=Ns();return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}setLanguage(t){const r=this.getWritable();return r.__language=t||void 0,r}getLanguage(){return this.getLatest().__language}setIsSyntaxHighlightSupported(t){const r=this.getWritable();return r.__isSyntaxHighlightSupported=t,r}getIsSyntaxHighlightSupported(){return this.getLatest().__isSyntaxHighlightSupported}setTheme(t){const r=this.getWritable();return r.__theme=t||void 0,r}getTheme(){return this.getLatest().__theme}}function Hd(e,t){return qie(Wm).setLanguage(e).setTheme(t)}function bC(e){return e instanceof Wm}function sF(e){return{node:Hd(e.getAttribute(Ay))}}function kle(e){const t=e,r=iF(t);return r||(function(n){let s=n.parentElement;for(;s!==null;){if(iF(s))return!0;s=s.parentElement}return!1})(t)?{node:r?Hd():null}:{node:null}}function Tle(){return{node:Hd()}}function aF(){return{node:null}}function iF(e){return e.style.fontFamily.match("monospace")!==null}function gS(e){return e.classList.contains("js-file-line-container")}let V_=class KU extends qf{constructor(t="",r,n){super(t,n),this.__highlightType=r}static getType(){return"code-highlight"}static clone(t){return new KU(t.__text,t.__highlightType||void 0,t.__key)}getHighlightType(){return this.getLatest().__highlightType}setHighlightType(t){const r=this.getWritable();return r.__highlightType=t||void 0,r}canHaveFormat(){return!1}createDOM(t){const r=super.createDOM(t),n=pS(t.theme,this.__highlightType);return ei(r,n),r}updateDOM(t,r,n){const s=super.updateDOM(t,r,n),a=pS(n.theme,t.__highlightType),i=pS(n.theme,this.__highlightType);return a!==i&&(a&&Af(r,a),i&&ei(r,i)),s}static importJSON(t){return YU().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHighlightType(t.highlightType)}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType()}}setFormat(t){return this}isParentRequired(){return!0}createParentElementNode(){return Hd()}};function pS(e,t){return t&&e&&e.codeHighlight&&e.codeHighlight[t]}function YU(e="",t){return Wo(new V_(e,t))}function XU(e){return e instanceof V_}function Cle(e,t){let r=e;for(let n=Yi(e,t);n&&(XU(n.origin)||I_(n.origin));n=xoe(n))r=n.origin;return r}function Ele(e){return Cle(e,"previous")}(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach((function(r){var n=t[r],s=[];/^\w+$/.test(r)||s.push(/\w+/.exec(r)[0]),r==="diff"&&s.push("bold"),e.languages.diff[r]={pattern:RegExp("^(?:["+n+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:s,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(r)[0]}}}})),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);const Nle=new Set(["http:","https:","mailto:","sms:","tel:"]);class Xf extends yo{static getType(){return"link"}static clone(t){return new Xf(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}constructor(t="",r={},n){super(n);const{target:s=null,rel:a=null,title:i=null}=r;this.__url=t,this.__target=s,this.__rel=a,this.__title=i}createDOM(t){const r=document.createElement("a");return this.updateLinkDOM(null,r,t),ei(r,t.theme.link),r}updateLinkDOM(t,r,n){if(cU(r)){t&&t.__url===this.__url||(r.href=this.sanitizeUrl(this.__url));for(const s of["target","rel","title"]){const a=`__${s}`,i=this[a];t&&t[a]===i||(i?r[s]=i:r.removeAttribute(s))}}}updateDOM(t,r,n){return this.updateLinkDOM(t,r,n),!1}static importDOM(){return{a:t=>({conversion:Ale,priority:1})}}static importJSON(t){return _4().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setURL(t.url).setRel(t.rel||null).setTarget(t.target||null).setTitle(t.title||null)}sanitizeUrl(t){t=lF(t);try{const r=new URL(lF(t));if(!Nle.has(r.protocol))return"about:blank"}catch{return t}return t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(t){const r=this.getWritable();return r.__url=t,r}getTarget(){return this.getLatest().__target}setTarget(t){const r=this.getWritable();return r.__target=t,r}getRel(){return this.getLatest().__rel}setRel(t){const r=this.getWritable();return r.__rel=t,r}getTitle(){return this.getLatest().__title}setTitle(t){const r=this.getWritable();return r.__title=t,r}insertNewAfter(t,r=!0){const n=_4(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,r),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,r,n){if(!Vt(r))return!1;const s=r.anchor.getNode(),a=r.focus.getNode();return this.isParentOf(s)&&this.isParentOf(a)&&r.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function Ale(e){let t=null;if(cU(e)){const r=e.textContent;(r!==null&&r!==""||e.children.length>0)&&(t=_4(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function _4(e="",t){return Wo(new Xf(e,t))}function jle(e){return e instanceof Xf}class m1 extends Xf{constructor(t="",r={},n){super(t,r,n),this.__isUnlinked=r.isUnlinked!==void 0&&r.isUnlinked!==null&&r.isUnlinked}static getType(){return"autolink"}static clone(t){return new m1(t.__url,{isUnlinked:t.__isUnlinked,rel:t.__rel,target:t.__target,title:t.__title},t.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(t){const r=this.getWritable();return r.__isUnlinked=t,r}createDOM(t){return this.__isUnlinked?document.createElement("span"):super.createDOM(t)}updateDOM(t,r,n){return super.updateDOM(t,r,n)||t.__isUnlinked!==this.__isUnlinked}static importJSON(t){return oF().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIsUnlinked(t.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(t,r=!0){const n=this.getParentOrThrow().insertNewAfter(t,r);if(jt(n)){const s=oF(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return n.append(s),s}return null}}function oF(e="",t){return Wo(new m1(e,t))}function Ple(e){return e instanceof m1}const Mle=/^\+?[0-9\s()-]{5,}$/;function lF(e){return e.match(/^[a-z][a-z0-9+.-]*:/i)||e.match(/^[/#.]/)?e:e.includes("@")?`mailto:${e}`:Mle.test(e)?`tel:${e}`:`https://${e}`}function E8(e,t){const r={};for(const n of e){const s=t(n);s&&(r[s]?r[s].push(n):r[s]=[n])}return r}function Fle(e){const t=E8(e,(r=>r.type));return{element:t.element||[],multilineElement:t["multiline-element"]||[],textFormat:t["text-format"]||[],textMatch:t["text-match"]||[]}}const cF=/[!-/:-@[-`{-~\s]/;function Dle(e){return hr(e)&&!e.hasFormat("code")}function Ole(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function uF(e,t,r){const n=r.length;for(let s=t;s>=n;s--){const a=s-n;if(JU(e,a,r,0,n)&&e[a+n]!==" ")return a}return-1}function JU(e,t,r,n,s){for(let a=0;a<s;a++)if(e[t+a]!==r[n+a])return!1;return!0}function Ile(e,t=q_){const r=Fle(t),n=E8(r.textFormat,(({tag:i})=>i[i.length-1])),s=E8(r.textMatch,(({trigger:i})=>i));for(const i of t){const o=i.type;if(o==="element"||o==="text-match"||o==="multiline-element"){const l=i.dependencies;for(const u of l)e.hasNode(u)||Ole(173,u.getType())}}const a=(i,o,l)=>{(function(u,d,f,h){const g=u.getParent();if(!$o(g)||u.getFirstChild()!==d)return!1;const x=d.getTextContent();if(x[f-1]!==" ")return!1;for(const{regExp:y,replace:v}of h){const T=x.match(y);if(T&&T[0].length===(T[0].endsWith(" ")?f:f-1)){const k=d.getNextSiblings(),[b,N]=d.splitText(f);if(v(u,N?[N,...k]:k,T,!1)!==!1)return b.remove(),!0}}return!1})(i,o,l,r.element)||(function(u,d,f,h){const g=u.getParent();if(!$o(g)||u.getFirstChild()!==d)return!1;const x=d.getTextContent();if(x[f-1]!==" ")return!1;for(const{regExpStart:y,replace:v,regExpEnd:T}of h){if(T&&!("optional"in T)||T&&"optional"in T&&!T.optional)continue;const k=x.match(y);if(k&&k[0].length===(k[0].endsWith(" ")?f:f-1)){const b=d.getNextSiblings(),[N,E]=d.splitText(f);if(v(u,E?[E,...b]:b,k,null,null,!1)!==!1)return N.remove(),!0}}return!1})(i,o,l,r.multilineElement)||(function(u,d,f){let h=u.getTextContent();const g=f[h[d-1]];if(g==null)return!1;d<h.length&&(h=h.slice(0,d));for(const x of g){if(!x.replace||!x.regExp)continue;const y=h.match(x.regExp);if(y===null)continue;const v=y.index||0,T=v+y[0].length;let k;return v===0?[k]=u.splitText(T):[,k]=u.splitText(v,T),k.selectNext(0,0),x.replace(k,y),!0}return!1})(o,l,s)||(function(u,d,f){const h=u.getTextContent(),g=d-1,x=h[g],y=f[x];if(!y)return!1;for(const v of y){const{tag:T}=v,k=T.length,b=g-k+1;if(k>1&&!JU(h,b,T,0,k)||h[b-1]===" ")continue;const N=h[g+1];if(v.intraword===!1&&N&&!cF.test(N))continue;const E=u;let P=E,M=uF(h,b,T),j=P;for(;M<0&&(j=j.getPreviousSibling())&&!Kd(j);)if(hr(j)){if(j.hasFormat("code"))continue;const B=j.getTextContent();P=j,M=uF(B,B.length,T)}if(M<0||P===E&&M+k===b)continue;const A=P.getTextContent();if(M>0&&A[M-1]===x)continue;const O=A[M-1];if(v.intraword===!1&&O&&!cF.test(O))continue;const L=E.getTextContent(),q=L.slice(0,b)+L.slice(g+1);E.setTextContent(q);const Q=P===E?q:A;P.setTextContent(Q.slice(0,M)+Q.slice(M+k));const ae=fr(),te=L_();Xi(te);const ne=g-k*(P===E?2:1)+1;te.anchor.set(P.__key,M,"text"),te.focus.set(E.__key,ne,"text");for(const B of v.format)te.hasFormat(B)||te.formatText(B);te.anchor.set(te.focus.key,te.focus.offset,te.focus.type);for(const B of v.format)te.hasFormat(B)&&te.toggleFormat(B);return Vt(ae)&&(te.format=ae.format),!0}})(o,l,n)};return e.registerUpdateListener((({tags:i,dirtyLeaves:o,editorState:l,prevEditorState:u})=>{if(i.has(Xz)||i.has(p4)||e.isComposing())return;const d=l.read(fr),f=u.read(fr);if(!Vt(f)||!Vt(d)||!d.isCollapsed()||d.is(f))return;const h=d.anchor.key,g=d.anchor.offset,x=l._nodeMap.get(h);!hr(x)||!o.has(h)||g!==1&&g>f.anchor.offset+1||e.update((()=>{if(!Dle(x))return;const y=x.getParent();y===null||bC(y)||a(y,x,d.anchor.offset)}))}))}const Rle=/^(\s*)(\d{1,})\.\s/,Lle=/^(\s*)[-*+]\s/,Ble=/^(#{1,6})\s/,$le=/^>\s/,zle=/^[ \t]*```([\w-]+)?/,Ule=/[ \t]*```$/,QU=e=>(t,r,n,s)=>{const a=e(n);a.append(...r),t.replace(a),s||a.select(0,0)},ZU=e=>(t,r,n,s)=>{const a=t.getPreviousSibling(),i=t.getNextSibling(),o=Il(e==="check"?n[3]==="x":void 0);if(hn(i)&&i.getListType()===e){const u=i.getFirstChild();u!==null?u.insertBefore(o):i.append(o),t.remove()}else if(hn(a)&&a.getListType()===e)a.append(o),t.remove();else{const u=cl(e,e==="number"?Number(n[2]):void 0);u.append(o),t.replace(u)}o.append(...r),s||o.select(0,0);const l=(function(u){const d=u.match(/\t/g),f=u.match(/ /g);let h=0;return d&&(h+=d.length),f&&(h+=Math.floor(f.length/4)),h})(n[1]);l&&o.setIndent(l)},_C=(e,t,r)=>{const n=[],s=e.getChildren();let a=0;for(const i of s)if(Kn(i)){if(i.getChildrenSize()===1){const d=i.getFirstChild();if(hn(d)){n.push(_C(d,t,r+1));continue}}const o=" ".repeat(4*r),l=e.getListType(),u=l==="number"?`${e.getStart()+a}. `:l==="check"?`- [${i.getChecked()?"x":" "}] `:"- ";n.push(o+u+t(i)),a++}return n.join(`
`)},Wle={dependencies:[f2],export:(e,t)=>{if(!Boe(e))return null;const r=Number(e.getTag().slice(1));return"#".repeat(r)+" "+t(e)},regExp:Ble,replace:QU((e=>{const t="h"+e[1].length;return bf(t)})),type:"element"},Hle={dependencies:[u2],export:(e,t)=>{if(!jM(e))return null;const r=t(e).split(`
`),n=[];for(const s of r)n.push("> "+s);return n.join(`
`)},regExp:$le,replace:(e,t,r,n)=>{if(n){const a=e.getPreviousSibling();if(jM(a))return a.splice(a.getChildrenSize(),0,[Yu(),...t]),void e.remove()}const s=d2();s.append(...t),e.replace(s),n||s.select(0,0)},type:"element"},Gle={dependencies:[Wm],export:e=>{if(!bC(e))return null;const t=e.getTextContent();return"```"+(e.getLanguage()||"")+(t?`
`+t:"")+"\n```"},regExpEnd:{optional:!0,regExp:Ule},regExpStart:zle,replace:(e,t,r,n,s,a)=>{let i,o;if(!t&&s){if(s.length===1)n?(i=Hd(),o=r[1]+s[0]):(i=Hd(r[1]),o=s[0].startsWith(" ")?s[0].slice(1):s[0]);else{if(i=Hd(r[1]),s[0].trim().length===0)for(;s.length>0&&!s[0].length;)s.shift();else s[0]=s[0].startsWith(" ")?s[0].slice(1):s[0];for(;s.length>0&&!s[s.length-1].length;)s.pop();o=s.join(`
`)}const l=oa(o);i.append(l),e.append(i)}else t&&QU((l=>Hd(l?l[1]:void 0)))(e,t,r,a)},type:"multiline-element"},Vle={dependencies:[Yf,g0],export:(e,t)=>hn(e)?_C(e,t,0):null,regExp:Lle,replace:ZU("bullet"),type:"element"},qle={dependencies:[Yf,g0],export:(e,t)=>hn(e)?_C(e,t,0):null,regExp:Rle,replace:ZU("number"),type:"element"},Kle={format:["code"],tag:"`",type:"text-format"},Yle={format:["highlight"],tag:"==",type:"text-format"},Xle={format:["bold","italic"],tag:"***",type:"text-format"},Jle={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},Qle={format:["bold"],tag:"**",type:"text-format"},Zle={format:["bold"],intraword:!1,tag:"__",type:"text-format"},ece={format:["strikethrough"],tag:"~~",type:"text-format"},tce={format:["italic"],tag:"*",type:"text-format"},rce={format:["italic"],intraword:!1,tag:"_",type:"text-format"},nce={dependencies:[Xf],export:(e,t,r)=>{if(!jle(e)||Ple(e))return null;const n=e.getTitle(),s=t(e);return n?`[${s}](${e.getURL()} "${n}")`:`[${s}](${e.getURL()})`},importRegExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))/,regExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))$/,replace:(e,t)=>{const[,r,n,s]=t,a=_4(n,{title:s}),i=r.split("[").length-1,o=r.split("]").length-1;let l=r,u="";if(i<o)return;if(i>o){const f=r.split("[");u="["+f[0],l=f.slice(1).join("[")}const d=oa(l);return d.setFormat(e.getFormat()),a.append(d),e.replace(a),u&&a.insertBefore(oa(u)),d},trigger:")",type:"text-match"},sce=[Wle,Hle,Vle,qle],ace=[Gle],ice=[Kle,Xle,Jle,Qle,Zle,Yle,tce,rce,ece],oce=[nce],q_=[...sce,...ace,...ice,...oce];function dF(e,t){return e.getEditorState().read((()=>{const r=za(t);return r!==null&&r.isSelected()}))}function lce(e){const[t]=Zu(),[r,n]=S.useState((()=>dF(t,e)));return S.useEffect((()=>{let s=!0;const a=t.registerUpdateListener((()=>{s&&n(dF(t,e))}));return()=>{s=!1,a()}}),[t,e]),[r,S.useCallback((s=>{t.update((()=>{let a=fr();io(a)||(a=HT(),Xi(a)),io(a)&&(s?a.add(e):a.delete(e))}))}),[t,e]),S.useCallback((()=>{t.update((()=>{const s=fr();io(s)&&s.clear()}))}),[t])]}function cce({nodeKey:e}){const[t]=Zu(),[r,n,s]=lce(e);return S.useEffect((()=>Um(t.registerCommand(LT,(a=>{const i=t.getElementByKey(e);return a.target===i&&(a.shiftKey||s(),n(!r),!0)}),ip))),[s,t,r,e,n]),S.useEffect((()=>{const a=t.getElementByKey(e),i=t._config.theme.hrSelected??"selected";a!==null&&(r?ei(a,i):Af(a,i))}),[t,r,e]),null}class m2 extends qT{static getType(){return"horizontalrule"}static clone(t){return new m2(t.__key)}static importJSON(t){return SC().updateFromJSON(t)}static importDOM(){return{hr:()=>({conversion:uce,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(t){const r=document.createElement("hr");return ei(r,t.theme.hr),r}getTextContent(){return`
`}isInline(){return!1}updateDOM(){return!1}decorate(){return c.jsx(cce,{nodeKey:this.__key})}}function uce(){return{node:SC()}}function SC(){return Wo(new m2)}function dce(e){return e instanceof m2}const fce=[{dependencies:[m2],export:e=>dce(e)?"***":null,regExp:/^(---|\*\*\*|___)\s?$/,replace:(e,t,r,n)=>{const s=SC();n||e.getNextSibling()!=null?e.replace(s):e.insertBefore(s),s.selectNext()},type:"element"},...q_];function eW({transformers:e=fce}){const[t]=Zu();return S.useEffect((()=>Ile(t,e)),[t,e]),null}function tW({hasStrictIndent:e=!1}){const[t]=Zu();return S.useEffect((()=>{if(!t.hasNodes([Yf,g0]))throw new Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")}),[t]),S.useEffect((()=>{if(e)return xle(t)}),[t,e]),(function(r){S.useEffect((()=>ple(r)),[r])})(t),null}const hce=({onChange:e})=>{const[t]=S.useContext(a1)||[];return S.useEffect(()=>{if(e&&t)return t.registerUpdateListener(({editorState:r})=>{r.read(()=>{$s().getTextContent();const s=r.toJSON();e(JSON.stringify(s))})})},[t,e]),null},mce=()=>{const[e]=S.useContext(a1)||[],t=S.useCallback(()=>{e&&e.dispatchCommand(go,"bold")},[e]),r=S.useCallback(()=>{e&&e.dispatchCommand(go,"italic")},[e]),n=S.useCallback(()=>{e&&e.dispatchCommand(go,"underline")},[e]),s=S.useCallback(()=>{e&&e.dispatchCommand(go,"strikethrough")},[e]),a=S.useCallback(g=>{e&&e.update(()=>{const x=fr();Vt(x)&&Tp(x,()=>bf(g))})},[e]),i=S.useCallback(()=>{e&&e.update(()=>{const g=fr();Vt(g)&&Tp(g,()=>Ns())})},[e]);S.useCallback(()=>{e&&e.update(()=>{const g=fr();Vt(g)&&Tp(g,()=>d2())})},[e]);const o=S.useCallback(()=>{e&&e.dispatchCommand(yC)},[e]),l=S.useCallback(()=>{e&&e.dispatchCommand(vC)},[e]),u=S.useCallback(()=>{e&&e.dispatchCommand(wC)},[e]),d=S.useCallback(g=>{e&&e.update(()=>{const x=fr();Vt(x)&&x.getNodes().forEach(y=>{hr(y)&&y.setStyle(`color: ${g}`)})})},[e]),f=S.useCallback(g=>{e&&e.update(()=>{const x=fr();Vt(x)&&x.getNodes().forEach(v=>{if(hr(v)){const T=v.getStyle(),k=T?T.replace(/font-size:\s*\d+px;?\s*/g,"").trim():"",b=k?`${k}; font-size: ${g}px;`:`font-size: ${g}px;`;v.setStyle(b)}})})},[e]),h=S.useCallback(g=>{e&&e.dispatchCommand(Nz,g)},[e]);return c.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-300 bg-gray-50",children:[c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:t,className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Bold",children:"B"}),c.jsx("button",{type:"button",onClick:r,className:"px-2 py-1 text-sm italic border border-gray-300 rounded hover:bg-gray-200",title:"Italic",children:"I"}),c.jsx("button",{type:"button",onClick:n,className:"px-2 py-1 text-sm underline border border-gray-300 rounded hover:bg-gray-200",title:"Underline",children:"U"}),c.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 text-sm line-through border border-gray-300 rounded hover:bg-gray-200",title:"Strikethrough",children:"S"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:()=>a("h1"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 1",children:"H1"}),c.jsx("button",{type:"button",onClick:()=>a("h2"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 2",children:"H2"}),c.jsx("button",{type:"button",onClick:()=>a("h3"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 3",children:"H3"}),c.jsx("button",{type:"button",onClick:i,className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Paragraph",children:"P"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:o,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Bullet List",children:" List"}),c.jsx("button",{type:"button",onClick:l,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Numbered List",children:"1. List"}),c.jsx("button",{type:"button",onClick:u,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Remove List",children:"No List"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("span",{className:"text-xs text-gray-600",children:"Color:"}),c.jsx("button",{type:"button",onClick:()=>d("#000000"),className:"w-6 h-6 bg-black border border-gray-300 rounded hover:bg-gray-800",title:"Black"}),c.jsx("button",{type:"button",onClick:()=>d("#ff0000"),className:"w-6 h-6 bg-red-500 border border-gray-300 rounded hover:bg-red-600",title:"Red"}),c.jsx("button",{type:"button",onClick:()=>d("#0000ff"),className:"w-6 h-6 bg-blue-500 border border-gray-300 rounded hover:bg-blue-600",title:"Blue"}),c.jsx("button",{type:"button",onClick:()=>d("#008000"),className:"w-6 h-6 bg-green-500 border border-gray-300 rounded hover:bg-green-600",title:"Green"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("span",{className:"text-xs text-gray-600",children:"Size:"}),c.jsx("button",{type:"button",onClick:()=>f(12),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Small",children:"12px"}),c.jsx("button",{type:"button",onClick:()=>f(16),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Normal",children:"16px"}),c.jsx("button",{type:"button",onClick:()=>f(20),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Large",children:"20px"}),c.jsx("button",{type:"button",onClick:()=>f(24),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Extra Large",children:"24px"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-xs text-gray-600",children:"Align:"}),c.jsx("button",{type:"button",onClick:()=>h("left"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Left",children:""}),c.jsx("button",{type:"button",onClick:()=>h("center"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Center",children:""}),c.jsx("button",{type:"button",onClick:()=>h("right"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Right",children:""})]})]})},gce=({value:e,onChange:t,placeholder:r})=>{const n={namespace:"LexicalEditor",theme:{root:"p-4 min-h-32 focus:outline-none",paragraph:"mb-2",heading:{h1:"text-3xl font-bold mb-4",h2:"text-2xl font-bold mb-3",h3:"text-xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic text-gray-600 mb-2",list:{nested:{listitem:"list-none"},ol:"list-decimal list-inside mb-2",ul:"list-disc list-inside mb-2",listitem:"mb-1"},text:{bold:"font-bold",italic:"italic",underline:"underline",strikethrough:"line-through"}},nodes:[f2,Yf,g0,u2,Wm,V_,h2,f1,h1,m1,Xf],onError:s=>{console.error("Lexical error:",s)},editorState:e?(()=>{try{const s=JSON.parse(e);return JSON.stringify(s)}catch{return JSON.stringify({root:{children:[{children:[{detail:0,format:0,mode:"normal",style:"",text:e,type:"text",version:1}],direction:"ltr",format:"",indent:0,type:"paragraph",version:1}],direction:"ltr",format:"",indent:0,type:"root",version:1}})}})():void 0};return c.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:c.jsxs(gU,{initialConfig:n,children:[c.jsx(mce,{}),c.jsx(hce,{onChange:t}),c.jsxs("div",{className:"relative",children:[c.jsx(FU,{contentEditable:c.jsx(OU,{className:"p-4 min-h-32 focus:outline-none",placeholder:r}),placeholder:c.jsx("div",{className:"absolute top-4 left-4 text-gray-400 pointer-events-none",children:r}),ErrorBoundary:LU}),c.jsx(IU,{}),c.jsx(RU,{}),c.jsx(tW,{}),c.jsx(eW,{transformers:q_})]})]})})},pce=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{user:i}=Fs(),{post:o}=Bl(),{showNotification:l}=ai(),[u,d]=S.useState({test_name:e,num_questions:1,passing_score:100,questions:[{id:1,question_json:"",canvas_width:600,canvas_height:800,max_canvas_width:1536,max_canvas_height:2048}]}),[f,h]=S.useState({isLoading:!1,error:null,showPreview:!0});S.useEffect(()=>{d(T=>({...T,test_name:e||""}))},[e]);const g=()=>{if(u.num_questions>=3){h(b=>({...b,error:"Maximum 3 questions allowed for performance reasons"}));return}const k={id:Math.max(...u.questions.map(b=>b.id))+1,question_json:"",canvas_width:600,canvas_height:800,max_canvas_width:1536,max_canvas_height:2048};d(b=>({...b,num_questions:b.num_questions+1,questions:[...b.questions,k]}))},x=T=>{u.questions.length<=1||d(k=>({...k,num_questions:k.num_questions-1,questions:k.questions.filter(b=>b.id!==T)}))},y=(T,k)=>{d(b=>({...b,questions:b.questions.map(N=>N.id===T?{...N,question_json:k}:N)}))},v=async()=>{if(!u.test_name.trim()){h(T=>({...T,error:"Test name is required"}));return}if(u.questions.some(T=>!T.question_json.trim())){h(T=>({...T,error:"All questions must have content"}));return}h(T=>({...T,isLoading:!0,error:null}));try{const T={test_name:u.test_name,num_questions:u.num_questions,passing_score:u.passing_score,questions:u.questions.map((k,b)=>({question_id:b+1,question_json:k.question_json,canvas_width:k.canvas_width,canvas_height:k.canvas_height,max_canvas_width:k.max_canvas_width,max_canvas_height:k.max_canvas_height}))};t&&t(T)}catch(T){console.error("Error preparing drawing test:",T),h(k=>({...k,error:"Failed to prepare drawing test. Please try again."})),l("Failed to prepare drawing test","error")}finally{h(T=>({...T,isLoading:!1}))}};return c.jsxs("div",{className:"drawing-test-creator max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Drawing Test"}),c.jsx("p",{className:"text-gray-600",children:"Create a test where students draw based on your instructions"})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Drawing Questions (",u.num_questions,"/3)"]}),c.jsx("p",{className:"text-sm text-gray-500",children:"Maximum 3 questions for optimal performance"})]}),c.jsxs(lt,{onClick:g,disabled:u.num_questions>=3,variant:"primary",size:"sm",className:"flex items-center gap-2",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add Question"]})]}),c.jsx("div",{className:"space-y-4",children:u.questions.map((T,k)=>c.jsxs(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("h4",{className:"text-md font-medium text-gray-800",children:["Text ",k+1]}),u.questions.length>1&&c.jsx(lt,{onClick:()=>x(T.id),variant:"secondary",size:"sm",className:"text-red-600 hover:text-red-700",children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Content *"}),c.jsx(gce,{value:T.question_json,onChange:b=>y(T.id,b),placeholder:""})]})]},T.id))})]}),f.error&&c.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 rounded-lg text-red-700",children:f.error}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx(lt,{onClick:r,variant:"secondary",disabled:f.isLoading,children:"Cancel"}),c.jsx(lt,{onClick:v,variant:"primary",disabled:f.isLoading||!u.test_name.trim(),className:"flex items-center gap-2",children:f.isLoading?c.jsxs(c.Fragment,{children:[c.jsx(ln,{size:"sm",color:"white"}),"Saving..."]}):"Save Test"})]})]})},xce=({onChange:e})=>{const[t]=S.useContext(a1)||[];return S.useEffect(()=>{if(e&&t)return t.registerUpdateListener(({editorState:r})=>{r.read(()=>{$s().getTextContent();const s=r.toJSON();e(JSON.stringify(s))})})},[t,e]),null},yce=({onAddBlank:e,blankCount:t})=>{const[r]=S.useContext(a1)||[],n=S.useCallback(()=>{r&&r.dispatchCommand(go,"bold")},[r]),s=S.useCallback(()=>{r&&r.dispatchCommand(go,"italic")},[r]),a=S.useCallback(()=>{r&&r.dispatchCommand(go,"underline")},[r]),i=S.useCallback(()=>{r&&r.dispatchCommand(go,"strikethrough")},[r]),o=S.useCallback(x=>{r&&r.update(()=>{const y=fr();Vt(y)&&Tp(y,()=>bf(x))})},[r]),l=S.useCallback(()=>{r&&r.update(()=>{const x=fr();Vt(x)&&Tp(x,()=>Ns())})},[r]),u=S.useCallback(()=>{r&&r.update(()=>{const x=fr();Vt(x)&&Tp(x,()=>d2())})},[r]),d=S.useCallback(()=>{r&&r.dispatchCommand(yC)},[r]),f=S.useCallback(()=>{r&&r.dispatchCommand(vC)},[r]),h=S.useCallback(()=>{r&&r.dispatchCommand(wC)},[r]),g=S.useCallback(()=>{!r||!e||(r.update(()=>{const x=fr();if(Vt(x)){const v=`${t+1}_________`,T=oa(v);T.setStyle("background-color: #f0f9ff; border: 1px dashed #3b82f6; padding: 2px 4px; border-radius: 4px; font-family: monospace;"),x.insertNodes([T])}}),e())},[r,e,t]);return c.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-300 bg-gray-50",children:[c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:n,className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Bold",children:"B"}),c.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 text-sm italic border border-gray-300 rounded hover:bg-gray-200",title:"Italic",children:"I"}),c.jsx("button",{type:"button",onClick:a,className:"px-2 py-1 text-sm underline border border-gray-300 rounded hover:bg-gray-200",title:"Underline",children:"U"}),c.jsx("button",{type:"button",onClick:i,className:"px-2 py-1 text-sm line-through border border-gray-300 rounded hover:bg-gray-200",title:"Strikethrough",children:"S"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:()=>o("h1"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 1",children:"H1"}),c.jsx("button",{type:"button",onClick:()=>o("h2"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 2",children:"H2"}),c.jsx("button",{type:"button",onClick:()=>o("h3"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 3",children:"H3"}),c.jsx("button",{type:"button",onClick:l,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Paragraph",children:"P"}),c.jsx("button",{type:"button",onClick:u,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Quote",children:'"'})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:d,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Bullet List",children:""}),c.jsx("button",{type:"button",onClick:f,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Numbered List",children:"1."}),c.jsx("button",{type:"button",onClick:h,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Remove List",children:""})]}),e&&c.jsx("div",{className:"flex items-center gap-1 border-l border-gray-300 pl-2",children:c.jsxs("button",{type:"button",onClick:g,className:"px-3 py-1 text-sm font-medium bg-blue-500 text-white border border-blue-600 rounded hover:bg-blue-600 transition-colors",title:"Add Blank",children:[c.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",className:"inline mr-1",children:c.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add Blank"]})})]})},vce=({value:e,onChange:t,placeholder:r,onAddBlank:n,blankCount:s=0})=>{const a={namespace:"FillBlanksLexicalEditor",theme:{root:"p-4 min-h-32 focus:outline-none",paragraph:"mb-2",heading:{h1:"text-3xl font-bold mb-4",h2:"text-2xl font-bold mb-3",h3:"text-xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic text-gray-600 mb-2",list:{nested:{listitem:"list-none"},ol:"list-decimal list-inside mb-2",ul:"list-disc list-inside mb-2",listitem:"mb-1"},text:{bold:"font-bold",italic:"italic",underline:"underline",strikethrough:"line-through"}},nodes:[f2,Yf,g0,u2,Wm,V_,h2,f1,h1,m1,Xf],onError:i=>{console.error("Lexical error:",i)},editorState:e?(()=>{try{const i=JSON.parse(e);return JSON.stringify(i)}catch{return JSON.stringify({root:{children:[{children:[{detail:0,format:0,mode:"normal",style:"",text:e,type:"text",version:1}],direction:"ltr",format:"",indent:0,type:"paragraph",version:1}],direction:"ltr",format:"",indent:0,type:"root",version:1}})}})():void 0};return c.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:c.jsxs(gU,{initialConfig:a,children:[c.jsx(yce,{onAddBlank:n,blankCount:s}),c.jsx(xce,{onChange:t}),c.jsxs("div",{className:"relative",children:[c.jsx(FU,{contentEditable:c.jsx(OU,{className:"p-4 min-h-32 focus:outline-none"}),placeholder:c.jsx("div",{className:"absolute top-4 left-4 text-gray-400 pointer-events-none",children:r}),ErrorBoundary:LU}),c.jsx(IU,{}),c.jsx(RU,{}),c.jsx(tW,{}),c.jsx(eW,{transformers:q_})]})]})})},wce=({testName:e="",allowedTime:t=null,onTestSaved:r,onCancel:n,onBackToCabinet:s,isSaving:a=!1,validationErrors:i={}})=>{const{user:o}=Fs(),{post:l}=Bl(),{showNotification:u}=ai(),[d,f]=S.useState({test_name:e,test_text:"",num_questions:1,num_blanks:0,passing_score:100,separate_type:!0,allowed_time:t,blanks:[]}),[h,g]=S.useState({isLoading:!1,error:null,showPreview:!0});S.useEffect(()=>{f(M=>({...M,test_name:e||"",allowed_time:t}))},[e,t]);const x=M=>{f(j=>({...j,test_text:M}))},y=()=>{const j={id:d.blanks.length+1,position:0,question:"",options:["","","",""],correct_answer:""};f(A=>({...A,blanks:[...A.blanks,j],num_blanks:A.num_blanks+1}))},v=M=>{f(j=>({...j,blanks:j.blanks.filter(A=>A.id!==M),num_blanks:j.num_blanks-1}))},T=M=>{f(j=>({...j,blanks:j.blanks.map(A=>A.id===M?{...A,options:[...A.options,""]}:A)}))},k=(M,j)=>{f(A=>({...A,blanks:A.blanks.map(O=>O.id===M?{...O,options:O.options.filter((L,q)=>q!==j),correct_answer:O.correct_answer===String.fromCharCode(65+j)?"":O.correct_answer}:O)}))},b=(M,j,A)=>{f(O=>({...O,blanks:O.blanks.map(L=>L.id===M?{...L,options:L.options.map((q,Q)=>Q===j?A:q)}:L)}))},N=(M,j)=>{console.log(" [DEBUG] updateBlankQuestion called:",{blankId:M,question:j}),f(A=>({...A,blanks:A.blanks.map(O=>O.id===M?{...O,question:j}:O)})),console.log(" [DEBUG] updateBlankQuestion completed")},E=(M,j)=>{f(A=>({...A,blanks:A.blanks.map(O=>O.id===M?{...O,correct_answer:j}:O)}))},P=async()=>{if(!d.test_name.trim()){g(M=>({...M,error:"Test name is required"}));return}if(!d.test_text.trim()){g(M=>({...M,error:"Test text is required"}));return}if(d.blanks.length===0){g(M=>({...M,error:"At least one blank is required"}));return}if(console.log(" [DEBUG] Validating blanks:",d.blanks),d.blanks.forEach((M,j)=>{console.log(` [DEBUG] Blank ${j+1}:`,{question:M.question,questionTrimmed:M.question?.trim(),correct_answer:M.correct_answer,options:M.options})}),d.separate_type===!1){if(d.blanks.some(M=>!M.correct_answer)){console.log(" [DEBUG] Validation failed - some blanks missing correct answer"),g(M=>({...M,error:"All blanks must have correct answers"}));return}}else if(d.blanks.some(M=>!M.question.trim()||!M.correct_answer)){console.log(" [DEBUG] Validation failed - some blanks missing question or correct answer"),g(M=>({...M,error:"All blanks must have question text and correct answer"}));return}console.log(" [DEBUG] Validation passed - all blanks have question and correct answer"),g(M=>({...M,isLoading:!0,error:null}));try{const M={test_name:d.test_name,test_text:d.test_text,num_questions:d.blanks.length,num_blanks:d.blanks.length,separate_type:d.separate_type,passing_score:d.passing_score,allowed_time:d.allowed_time,blanks:d.blanks.map((j,A)=>({question_id:A+1,question_json:j.question,question:j.question,options:j.options,correct_answer:j.correct_answer,blank_positions:{},blank_options:j.options||[],correct_answers:[j.correct_answer]}))};console.log(" [DEBUG] Calling onTestSaved with data:",M),r?(console.log(" [DEBUG] onTestSaved function exists, calling it..."),r(M),console.log(" [DEBUG] onTestSaved called successfully")):console.log(" [DEBUG] onTestSaved function is null/undefined")}catch(M){console.error("Error preparing fill blanks test:",M),g(j=>({...j,error:"Failed to prepare fill blanks test. Please try again."})),u("Failed to prepare fill blanks test","error")}finally{g(M=>({...M,isLoading:!1}))}};return c.jsxs("div",{className:"fill-blanks-test-creator max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Fill Blanks Test"}),c.jsx("p",{className:"text-gray-600",children:"Create a test with text content and multiple choice blanks"}),h.error&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-600 text-sm",children:h.error})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${d.separate_type===!0?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>f(M=>({...M,separate_type:!0})),children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("input",{type:"radio",checked:d.separate_type===!0,onChange:()=>f(M=>({...M,separate_type:!0})),className:"mr-3"}),c.jsx("h4",{className:"font-medium",children:"Separate Mode"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Multiple choice questions below the text"})]}),c.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${d.separate_type===!1?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>f(M=>({...M,separate_type:!1})),children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("input",{type:"radio",checked:d.separate_type===!1,onChange:()=>f(M=>({...M,separate_type:!1})),className:"mr-3"}),c.jsx("h4",{className:"font-medium",children:"Inline Mode"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Dropdown for option inside the text"})]})]}),c.jsx(vce,{value:d.test_text,onChange:x,placeholder:"Type your text here. Use the 'Add Blank' button in the toolbar to insert blanks.",onAddBlank:y,blankCount:d.blanks.length})]}),d.separate_type===!0&&c.jsx("div",{className:"space-y-4",children:d.blanks.map((M,j)=>c.jsxs($t,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-md font-medium",children:["Blank ",M.id," Configuration"]}),c.jsx(lt,{variant:"danger",size:"small",onClick:()=>v(M.id),className:"px-2 py-1 text-sm",children:"Remove Blank"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Question Text for Blank ",M.id," *"]}),c.jsx("input",{type:"text",placeholder:"Enter question text for this blank",value:M.question,onChange:A=>N(M.id,A.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Answer Options:"}),M.options.map((A,O)=>c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+O)}),c.jsx("input",{type:"text",placeholder:`Option ${String.fromCharCode(65+O)}`,value:A||"",onChange:L=>b(M.id,O,L.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"}),M.options.length>2&&c.jsx(lt,{variant:"danger",size:"small",onClick:()=>k(M.id,O),className:"px-2 py-1 text-sm",children:""})]},O)),M.options.length<6&&c.jsx(lt,{variant:"secondary",size:"small",onClick:()=>T(M.id),className:"w-full",children:"+ Add Option"})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),c.jsxs("select",{value:M.correct_answer||"",onChange:A=>E(M.id,A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"",children:"Select correct answer"}),M.options.filter(A=>A.trim().length>0).map((A,O)=>c.jsxs("option",{value:String.fromCharCode(65+O),children:[String.fromCharCode(65+O),") ",A]},O))]})]})]},M.id))}),d.separate_type===!1&&c.jsx("div",{className:"space-y-4",children:d.blanks.map((M,j)=>c.jsxs($t,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-md font-medium",children:["Blank ",M.id," Options"]}),c.jsx(lt,{variant:"danger",size:"small",onClick:()=>v(M.id),className:"px-2 py-1 text-sm",children:"Remove Blank"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Answer Options:"}),M.options.map((A,O)=>c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+O)}),c.jsx("input",{type:"text",placeholder:`Option ${String.fromCharCode(65+O)}`,value:A||"",onChange:L=>b(M.id,O,L.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"}),M.options.length>2&&c.jsx(lt,{variant:"danger",size:"small",onClick:()=>k(M.id,O),className:"px-2 py-1 text-sm",children:""})]},O)),M.options.length<6&&c.jsx(lt,{variant:"secondary",size:"small",onClick:()=>T(M.id),className:"w-full",children:"+ Add Option"})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),c.jsxs("select",{value:M.correct_answer||"",onChange:A=>E(M.id,A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"",children:"Select correct answer"}),M.options.filter(A=>A.trim().length>0).map((A,O)=>c.jsxs("option",{value:String.fromCharCode(65+O),children:[String.fromCharCode(65+O),") ",A]},O))]})]})]},M.id))}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx(lt,{onClick:n,variant:"secondary",disabled:a,children:"Cancel"}),c.jsx(lt,{onClick:P,variant:"primary",disabled:a||d.blanks.length===0,children:a?c.jsx(ln,{size:"sm"}):"Save Test"})]})]})},bce=[{value:"A1",label:"A1 (Beginner)",description:"Basic vocabulary, simple sentences"},{value:"A2",label:"A2 (Elementary)",description:"Everyday vocabulary, present/past tenses"},{value:"B1",label:"B1 (Intermediate)",description:"Varied vocabulary, complex sentences"},{value:"B2",label:"B2 (Upper-Intermediate)",description:"Advanced vocabulary, sophisticated structures"},{value:"C1",label:"C1 (Advanced)",description:"Nuanced vocabulary, complex discourse"},{value:"C2",label:"C2 (Proficiency)",description:"Native-like fluency and accuracy"}],_ce=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{showNotification:i}=ai(),[o,l]=S.useState({min_words:50,questions:[{question_id:1,prompt:"",expected_duration:null,difficulty_level:"B1"}]}),[u,d]=S.useState(!1),f=S.useCallback((T,k)=>{l(b=>({...b,[T]:k}))},[]),h=S.useCallback((T,k,b)=>{l(N=>({...N,questions:N.questions.map((E,P)=>P===T?{...E,[k]:b}:E)}))},[]),g=S.useCallback(()=>{l(T=>({...T,questions:[...T.questions,{question_id:T.questions.length+1,prompt:"",expected_duration:null,difficulty_level:"B1"}]}))},[]),x=S.useCallback(T=>{o.questions.length>1&&l(k=>({...k,questions:k.questions.filter((b,N)=>N!==T)}))},[o.questions.length]),y=S.useCallback(()=>{const T={};return o.min_words<10&&(T.min_words="Minimum word count must be at least 10 words"),o.questions.forEach((k,b)=>{k.prompt.trim()||(T[`question_${b}_prompt`]="Question prompt is required")}),T},[o]),v=S.useCallback(async T=>{T.preventDefault();const k=y();if(Object.keys(k).length>0){i("Please fix the validation errors","error");return}d(!0);try{const b={test_name:e,time_limit:300,min_duration:30,max_duration:600,max_attempts:3,min_words:o.min_words,passing_score:50,allowed_time:null,questions:o.questions.map((N,E)=>({question_id:E+1,prompt:N.prompt,expected_duration:N.expected_duration,difficulty_level:N.difficulty_level}))};console.log(" [DEBUG] Calling onTestSaved with data:",b),t?(console.log(" [DEBUG] onTestSaved function exists, calling it..."),t(b),console.log(" [DEBUG] onTestSaved called successfully")):console.log(" [DEBUG] onTestSaved function is null/undefined")}catch(b){console.error("Error preparing speaking test:",b),i("Failed to prepare speaking test","error")}finally{d(!1)}},[o,y,i,t,e]);return u||s?c.jsxs("div",{className:"flex items-center justify-center p-8",children:[c.jsx(ln,{}),c.jsx("span",{className:"ml-2",children:"Creating speaking test..."})]}):c.jsxs("div",{className:"speaking-test-creator max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Speaking Test"}),c.jsx("p",{className:"text-gray-600",children:"Create a speaking test where students record audio responses with AI-powered feedback"})]}),c.jsxs("form",{onSubmit:v,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Scoring Settings"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Word Count *"}),c.jsx("input",{type:"number",min:"10",max:"1000",value:o.min_words,onChange:T=>f("min_words",parseInt(T.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.min_words&&c.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.min_words})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Questions"}),c.jsx(lt,{type:"button",variant:"outline",onClick:g,children:"Add Question"})]}),o.questions.length>1&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Multiple Questions Detected"}),c.jsx("div",{className:"mt-1 text-sm text-blue-700",children:c.jsxs("p",{children:["You have ",o.questions.length," questions in this test.",c.jsx("strong",{children:" Only one question will be randomly selected"})," and shown to each student. This ensures fair distribution across your question pool."]})})]})]})}),o.questions.map((T,k)=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("h4",{className:"font-medium",children:["Question ",k+1]}),o.questions.length>1&&c.jsx(lt,{type:"button",variant:"outline",size:"sm",onClick:()=>x(k),className:"text-red-600 hover:text-red-700",children:"Remove"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Prompt *"}),c.jsx("textarea",{value:T.prompt,onChange:b=>h(k,"prompt",b.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter the question prompt for students"}),a[`question_${k}_prompt`]&&c.jsx("p",{className:"text-red-500 text-sm mt-1",children:a[`question_${k}_prompt`]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Duration (seconds)"}),c.jsx("input",{type:"number",min:"10",max:"600",value:T.expected_duration||"",onChange:b=>h(k,"expected_duration",b.target.value?parseInt(b.target.value):null),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEFR Level"}),c.jsx("select",{value:T.difficulty_level,onChange:b=>h(k,"difficulty_level",b.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:bce.map(b=>c.jsxs("option",{value:b.value,children:[b.label," - ",b.description]},b.value))}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select the appropriate CEFR level for this question. This will be used by AI to evaluate students appropriately."})]})]})]})]},k))]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[c.jsx(lt,{type:"button",variant:"secondary",onClick:r,children:"Cancel"}),c.jsx(lt,{type:"submit",variant:"primary",disabled:u||s,children:u||s?"Creating...":"Create Speaking Test"})]})]})]})},rW=(e,t)=>{const[r,n]=S.useState(()=>{try{const i=window.localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error(`Error reading localStorage key "${e}":`,i),t}}),s=S.useCallback(i=>{try{const o=i instanceof Function?i(r):i;n(o),window.localStorage.setItem(e,JSON.stringify(o))}catch(o){console.error(`Error setting localStorage key "${e}":`,o)}},[e,r]),a=S.useCallback(()=>{try{window.localStorage.removeItem(e),n(t)}catch(i){console.error(`Error removing localStorage key "${e}":`,i)}},[e,t]);return[r,s,a]},K_=()=>{const e=S.useCallback((l,u=null)=>{try{const d=window.localStorage.getItem(l);return d?JSON.parse(d):u}catch(d){return console.error(`Error reading localStorage key "${l}":`,d),u}},[]),t=S.useCallback((l,u)=>{try{window.localStorage.setItem(l,JSON.stringify(u))}catch(d){console.error(`Error setting localStorage key "${l}":`,d)}},[]),r=S.useCallback(l=>{try{window.localStorage.removeItem(l)}catch(u){console.error(`Error removing localStorage key "${l}":`,u)}},[]),n=S.useCallback(()=>{if(confirm("Are you sure you want to clear all local storage? This cannot be undone."))try{window.localStorage.clear(),window.showNotification?window.showNotification("All local storage cleared!","success"):console.log("All local storage cleared!")}catch(l){console.error("Error clearing localStorage:",l)}},[]),s=S.useCallback(()=>{try{const l={};for(let h=0;h<window.localStorage.length;h++){const g=window.localStorage.key(h);g&&(l[g]=window.localStorage.getItem(g))}const u=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),d=URL.createObjectURL(u),f=document.createElement("a");f.href=d,f.download="localStorage_backup.json",f.click(),URL.revokeObjectURL(d),window.showNotification?window.showNotification("Local storage exported!","success"):console.log("Local storage exported!")}catch(l){console.error("Error exporting localStorage data:",l)}},[]),a=S.useCallback(()=>{try{window.localStorage.clear()}catch(l){console.error("Error clearing localStorage:",l)}},[]),i=S.useCallback(()=>{try{const l={};for(let u=0;u<window.localStorage.length;u++){const d=window.localStorage.key(u);d&&(l[d]=window.localStorage.getItem(d))}return l}catch(l){return console.error("Error exporting localStorage data:",l),{}}},[]),o=S.useCallback(l=>{try{Object.entries(l).forEach(([u,d])=>{window.localStorage.setItem(u,d)})}catch(u){console.error("Error importing localStorage data:",u)}},[]);return{getItem:e,setItem:t,removeItem:r,clearAll:a,clearAllLocalStorage:n,exportLocalStorage:s,exportData:i,importData:o}};class sl{constructor(t,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=r,this.end=n}static range(t,r){return r?!t||!t.loc||!r.loc||t.loc.lexer!==r.loc.lexer?null:new sl(t.loc.lexer,t.loc.start,r.loc.end):t&&t.loc}}class Dl{constructor(t,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=r}range(t,r){return new Dl(r,sl.range(this,t))}}class rr{constructor(t,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+t,s,a,i=r&&r.loc;if(i&&i.start<=i.end){var o=i.lexer.input;s=i.start,a=i.end,s===o.length?n+=" at end of input: ":n+=" at position "+(s+1)+": ";var l=o.slice(s,a).replace(/[^]/g,"$&"),u;s>15?u=""+o.slice(s-15,s):u=o.slice(0,s);var d;a+15<o.length?d=o.slice(a,a+15)+"":d=o.slice(a),n+=u+l+d}var f=new Error(n);return f.name="ParseError",f.__proto__=rr.prototype,f.position=s,s!=null&&a!=null&&(f.length=a-s),f.rawMessage=t,f}}rr.prototype.__proto__=Error.prototype;var Sce=function(t,r){return t===void 0?r:t},kce=/([A-Z])/g,Tce=function(t){return t.replace(kce,"-$1").toLowerCase()},Cce={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Ece=/[&><"']/g;function Nce(e){return String(e).replace(Ece,t=>Cce[t])}var nW=function e(t){return t.type==="ordgroup"||t.type==="color"?t.body.length===1?e(t.body[0]):t:t.type==="font"?e(t.body):t},Ace=function(t){var r=nW(t);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},jce=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t},Pce=function(t){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},Un={deflt:Sce,escape:Nce,hyphenate:Tce,getBaseElem:nW,isCharacterBox:Ace,protocolFromUrl:Pce},Gb={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>e==="Infinity"?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};function Mce(e){if(e.default)return e.default;var t=e.type,r=Array.isArray(t)?t[0]:t;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class kC{constructor(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{};for(var r in Gb)if(Gb.hasOwnProperty(r)){var n=Gb[r];this[r]=t[r]!==void 0?n.processor?n.processor(t[r]):t[r]:Mce(n)}}reportNonstrict(t,r,n){var s=this.strict;if(typeof s=="function"&&(s=s(t,r,n)),!(!s||s==="ignore")){if(s===!0||s==="error")throw new rr("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+t+"]"),n);s==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+r+" ["+t+"]"))}}useStrictBehavior(t,r,n){var s=this.strict;if(typeof s=="function")try{s=s(t,r,n)}catch{s="error"}return!s||s==="ignore"?!1:s===!0||s==="error"?!0:s==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+r+" ["+t+"]")),!1)}isTrusted(t){if(t.url&&!t.protocol){var r=Un.protocolFromUrl(t.url);if(r==null)return!1;t.protocol=r}var n=typeof this.trust=="function"?this.trust(t):this.trust;return!!n}}class df{constructor(t,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=r,this.cramped=n}sup(){return Ru[Fce[this.id]]}sub(){return Ru[Dce[this.id]]}fracNum(){return Ru[Oce[this.id]]}fracDen(){return Ru[Ice[this.id]]}cramp(){return Ru[Rce[this.id]]}text(){return Ru[Lce[this.id]]}isTight(){return this.size>=2}}var TC=0,S4=1,Ep=2,Yd=3,_v=4,fc=5,zp=6,Lo=7,Ru=[new df(TC,0,!1),new df(S4,0,!0),new df(Ep,1,!1),new df(Yd,1,!0),new df(_v,2,!1),new df(fc,2,!0),new df(zp,3,!1),new df(Lo,3,!0)],Fce=[_v,fc,_v,fc,zp,Lo,zp,Lo],Dce=[fc,fc,fc,fc,Lo,Lo,Lo,Lo],Oce=[Ep,Yd,_v,fc,zp,Lo,zp,Lo],Ice=[Yd,Yd,fc,fc,Lo,Lo,Lo,Lo],Rce=[S4,S4,Yd,Yd,fc,fc,Lo,Lo],Lce=[TC,S4,Ep,Yd,Ep,Yd,Ep,Yd],Vr={DISPLAY:Ru[TC],TEXT:Ru[Ep],SCRIPT:Ru[_v],SCRIPTSCRIPT:Ru[zp]},N8=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Bce(e){for(var t=0;t<N8.length;t++)for(var r=N8[t],n=0;n<r.blocks.length;n++){var s=r.blocks[n];if(e>=s[0]&&e<=s[1])return r.name}return null}var Vb=[];N8.forEach(e=>e.blocks.forEach(t=>Vb.push(...t)));function sW(e){for(var t=0;t<Vb.length;t+=2)if(e>=Vb[t]&&e<=Vb[t+1])return!0;return!1}var Jg=80,$ce=function(t,r){return"M95,"+(622+t+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+t/2.075+" -"+t+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+t)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},zce=function(t,r){return"M263,"+(601+t+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+t/2.084+" -"+t+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+t)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},Uce=function(t,r){return"M983 "+(10+t+r)+`
l`+t/3.13+" -"+t+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+t)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},Wce=function(t,r){return"M424,"+(2398+t+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+t/4.223+" -"+t+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+t)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+t)+" "+r+`
h400000v`+(40+t)+"h-400000z"},Hce=function(t,r){return"M473,"+(2713+t+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+t/5.298+" -"+t+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+t)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+t)+" "+r+"h400000v"+(40+t)+"H1017.7z"},Gce=function(t){var r=t/2;return"M400000 "+t+" H0 L"+r+" 0 l65 45 L145 "+(t-80)+" H400000z"},Vce=function(t,r,n){var s=n-54-r-t;return"M702 "+(t+r)+"H400000"+(40+t)+`
H742v`+s+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+t)+"H742z"},qce=function(t,r,n){r=1e3*r;var s="";switch(t){case"sqrtMain":s=$ce(r,Jg);break;case"sqrtSize1":s=zce(r,Jg);break;case"sqrtSize2":s=Uce(r,Jg);break;case"sqrtSize3":s=Wce(r,Jg);break;case"sqrtSize4":s=Hce(r,Jg);break;case"sqrtTall":s=Vce(r,Jg,n)}return s},Kce=function(t,r){switch(t){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},fF={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Yce=function(t,r){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class g2{constructor(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(t){return this.classes.includes(t)}toNode(){for(var t=document.createDocumentFragment(),r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t}toMarkup(){for(var t="",r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t}toText(){var t=r=>r.toText();return this.children.map(t).join("")}}var $u={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},eb={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},hF={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function Xce(e,t){$u[e]=t}function CC(e,t,r){if(!$u[t])throw new Error("Font metrics not found for font: "+t+".");var n=e.charCodeAt(0),s=$u[t][n];if(!s&&e[0]in hF&&(n=hF[e[0]].charCodeAt(0),s=$u[t][n]),!s&&r==="text"&&sW(n)&&(s=$u[t][77]),s)return{depth:s[0],height:s[1],italic:s[2],skew:s[3],width:s[4]}}var xS={};function Jce(e){var t;if(e>=5?t=0:e>=3?t=1:t=2,!xS[t]){var r=xS[t]={cssEmPerMu:eb.quad[t]/18};for(var n in eb)eb.hasOwnProperty(n)&&(r[n]=eb[n][t])}return xS[t]}var Qce=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],mF=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],gF=function(t,r){return r.size<2?t:Qce[t-1][r.size-1]};class Bd{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||Bd.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=mF[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return new Bd(r)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:gF(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:mF[t-1]})}havingBaseStyle(t){t=t||this.style.text();var r=gF(Bd.BASESIZE,t);return this.size===r&&this.textSize===Bd.BASESIZE&&this.style===t?this:this.extend({style:t,size:r})}havingBaseSizing(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Bd.BASESIZE?["sizing","reset-size"+this.size,"size"+Bd.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Jce(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Bd.BASESIZE=6;var A8={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Zce={ex:!0,em:!0,mu:!0},aW=function(t){return typeof t!="string"&&(t=t.unit),t in A8||t in Zce||t==="ex"},Vs=function(t,r){var n;if(t.unit in A8)n=A8[t.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(t.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var s;if(r.style.isTight()?s=r.havingStyle(r.style.text()):s=r,t.unit==="ex")n=s.fontMetrics().xHeight;else if(t.unit==="em")n=s.fontMetrics().quad;else throw new rr("Invalid unit: '"+t.unit+"'");s!==r&&(n*=s.sizeMultiplier/r.sizeMultiplier)}return Math.min(t.number*n,r.maxSize)},mr=function(t){return+t.toFixed(4)+"em"},If=function(t){return t.filter(r=>r).join(" ")},iW=function(t,r,n){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var s=r.getColor();s&&(this.style.color=s)}},oW=function(t){var r=document.createElement(t);r.className=If(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&r.setAttribute(s,this.attributes[s]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r},eue=/[\s"'>/=\x00-\x1f]/,lW=function(t){var r="<"+t;this.classes.length&&(r+=' class="'+Un.escape(If(this.classes))+'"');var n="";for(var s in this.style)this.style.hasOwnProperty(s)&&(n+=Un.hyphenate(s)+":"+this.style[s]+";");n&&(r+=' style="'+Un.escape(n)+'"');for(var a in this.attributes)if(this.attributes.hasOwnProperty(a)){if(eue.test(a))throw new rr("Invalid attribute name '"+a+"'");r+=" "+a+'="'+Un.escape(this.attributes[a])+'"'}r+=">";for(var i=0;i<this.children.length;i++)r+=this.children[i].toMarkup();return r+="</"+t+">",r};class p2{constructor(t,r,n,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,iW.call(this,t,n,s),this.children=r||[]}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return this.classes.includes(t)}toNode(){return oW.call(this,"span")}toMarkup(){return lW.call(this,"span")}}class EC{constructor(t,r,n,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,iW.call(this,r,s),this.children=n||[],this.setAttribute("href",t)}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return this.classes.includes(t)}toNode(){return oW.call(this,"a")}toMarkup(){return lW.call(this,"a")}}class tue{constructor(t,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=t,this.classes=["mord"],this.style=n}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);return t}toMarkup(){var t='<img src="'+Un.escape(this.src)+'"'+(' alt="'+Un.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Un.hyphenate(n)+":"+this.style[n]+";");return r&&(t+=' style="'+Un.escape(r)+'"'),t+="'/>",t}}var rue={:"",:"",:"",:""};class vc{constructor(t,r,n,s,a,i,o,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=r||0,this.depth=n||0,this.italic=s||0,this.skew=a||0,this.width=i||0,this.classes=o||[],this.style=l||{},this.maxFontSize=0;var u=Bce(this.text.charCodeAt(0));u&&this.classes.push(u+"_fallback"),/[]/.test(this.text)&&(this.text=rue[this.text])}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=mr(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=If(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(t),r):t}toMarkup(){var t=!1,r="<span";this.classes.length&&(t=!0,r+=' class="',r+=Un.escape(If(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var s in this.style)this.style.hasOwnProperty(s)&&(n+=Un.hyphenate(s)+":"+this.style[s]+";");n&&(t=!0,r+=' style="'+Un.escape(n)+'"');var a=Un.escape(this.text);return t?(r+=">",r+=a,r+="</span>",r):a}}class i0{constructor(t,r){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=r||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var s=0;s<this.children.length;s++)r.appendChild(this.children[s].toNode());return r}toMarkup(){var t='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+Un.escape(this.attributes[r])+'"');t+=">";for(var n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t+="</svg>",t}}class Rf{constructor(t,r){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=r}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",fF[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+Un.escape(this.alternate)+'"/>':'<path d="'+Un.escape(fF[this.pathName])+'"/>'}}class j8{constructor(t){this.attributes=void 0,this.attributes=t||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var t="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+Un.escape(this.attributes[r])+'"');return t+="/>",t}}function pF(e){if(e instanceof vc)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}function nue(e){if(e instanceof p2)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}var sue={bin:1,close:1,inner:1,open:1,punct:1,rel:1},aue={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},ks={math:{},text:{}};function X(e,t,r,n,s,a){ks[e][s]={font:t,group:r,replace:n},a&&n&&(ks[e][n]=ks[e][s])}var re="math",Yt="text",fe="main",Oe="ams",zs="accent-token",Er="bin",Ho="close",g1="inner",Gr="mathord",Ha="op-token",$l="open",Y_="punct",Re="rel",p0="spacing",qe="textord";X(re,fe,Re,"","\\equiv",!0);X(re,fe,Re,"","\\prec",!0);X(re,fe,Re,"","\\succ",!0);X(re,fe,Re,"","\\sim",!0);X(re,fe,Re,"","\\perp");X(re,fe,Re,"","\\preceq",!0);X(re,fe,Re,"","\\succeq",!0);X(re,fe,Re,"","\\simeq",!0);X(re,fe,Re,"","\\mid",!0);X(re,fe,Re,"","\\ll",!0);X(re,fe,Re,"","\\gg",!0);X(re,fe,Re,"","\\asymp",!0);X(re,fe,Re,"","\\parallel");X(re,fe,Re,"","\\bowtie",!0);X(re,fe,Re,"","\\smile",!0);X(re,fe,Re,"","\\sqsubseteq",!0);X(re,fe,Re,"","\\sqsupseteq",!0);X(re,fe,Re,"","\\doteq",!0);X(re,fe,Re,"","\\frown",!0);X(re,fe,Re,"","\\ni",!0);X(re,fe,Re,"","\\propto",!0);X(re,fe,Re,"","\\vdash",!0);X(re,fe,Re,"","\\dashv",!0);X(re,fe,Re,"","\\owns");X(re,fe,Y_,".","\\ldotp");X(re,fe,Y_,"","\\cdotp");X(re,fe,qe,"#","\\#");X(Yt,fe,qe,"#","\\#");X(re,fe,qe,"&","\\&");X(Yt,fe,qe,"&","\\&");X(re,fe,qe,"","\\aleph",!0);X(re,fe,qe,"","\\forall",!0);X(re,fe,qe,"","\\hbar",!0);X(re,fe,qe,"","\\exists",!0);X(re,fe,qe,"","\\nabla",!0);X(re,fe,qe,"","\\flat",!0);X(re,fe,qe,"","\\ell",!0);X(re,fe,qe,"","\\natural",!0);X(re,fe,qe,"","\\clubsuit",!0);X(re,fe,qe,"","\\wp",!0);X(re,fe,qe,"","\\sharp",!0);X(re,fe,qe,"","\\diamondsuit",!0);X(re,fe,qe,"","\\Re",!0);X(re,fe,qe,"","\\heartsuit",!0);X(re,fe,qe,"","\\Im",!0);X(re,fe,qe,"","\\spadesuit",!0);X(re,fe,qe,"","\\S",!0);X(Yt,fe,qe,"","\\S");X(re,fe,qe,"","\\P",!0);X(Yt,fe,qe,"","\\P");X(re,fe,qe,"","\\dag");X(Yt,fe,qe,"","\\dag");X(Yt,fe,qe,"","\\textdagger");X(re,fe,qe,"","\\ddag");X(Yt,fe,qe,"","\\ddag");X(Yt,fe,qe,"","\\textdaggerdbl");X(re,fe,Ho,"","\\rmoustache",!0);X(re,fe,$l,"","\\lmoustache",!0);X(re,fe,Ho,"","\\rgroup",!0);X(re,fe,$l,"","\\lgroup",!0);X(re,fe,Er,"","\\mp",!0);X(re,fe,Er,"","\\ominus",!0);X(re,fe,Er,"","\\uplus",!0);X(re,fe,Er,"","\\sqcap",!0);X(re,fe,Er,"","\\ast");X(re,fe,Er,"","\\sqcup",!0);X(re,fe,Er,"","\\bigcirc",!0);X(re,fe,Er,"","\\bullet",!0);X(re,fe,Er,"","\\ddagger");X(re,fe,Er,"","\\wr",!0);X(re,fe,Er,"","\\amalg");X(re,fe,Er,"&","\\And");X(re,fe,Re,"","\\longleftarrow",!0);X(re,fe,Re,"","\\Leftarrow",!0);X(re,fe,Re,"","\\Longleftarrow",!0);X(re,fe,Re,"","\\longrightarrow",!0);X(re,fe,Re,"","\\Rightarrow",!0);X(re,fe,Re,"","\\Longrightarrow",!0);X(re,fe,Re,"","\\leftrightarrow",!0);X(re,fe,Re,"","\\longleftrightarrow",!0);X(re,fe,Re,"","\\Leftrightarrow",!0);X(re,fe,Re,"","\\Longleftrightarrow",!0);X(re,fe,Re,"","\\mapsto",!0);X(re,fe,Re,"","\\longmapsto",!0);X(re,fe,Re,"","\\nearrow",!0);X(re,fe,Re,"","\\hookleftarrow",!0);X(re,fe,Re,"","\\hookrightarrow",!0);X(re,fe,Re,"","\\searrow",!0);X(re,fe,Re,"","\\leftharpoonup",!0);X(re,fe,Re,"","\\rightharpoonup",!0);X(re,fe,Re,"","\\swarrow",!0);X(re,fe,Re,"","\\leftharpoondown",!0);X(re,fe,Re,"","\\rightharpoondown",!0);X(re,fe,Re,"","\\nwarrow",!0);X(re,fe,Re,"","\\rightleftharpoons",!0);X(re,Oe,Re,"","\\nless",!0);X(re,Oe,Re,"","\\@nleqslant");X(re,Oe,Re,"","\\@nleqq");X(re,Oe,Re,"","\\lneq",!0);X(re,Oe,Re,"","\\lneqq",!0);X(re,Oe,Re,"","\\@lvertneqq");X(re,Oe,Re,"","\\lnsim",!0);X(re,Oe,Re,"","\\lnapprox",!0);X(re,Oe,Re,"","\\nprec",!0);X(re,Oe,Re,"","\\npreceq",!0);X(re,Oe,Re,"","\\precnsim",!0);X(re,Oe,Re,"","\\precnapprox",!0);X(re,Oe,Re,"","\\nsim",!0);X(re,Oe,Re,"","\\@nshortmid");X(re,Oe,Re,"","\\nmid",!0);X(re,Oe,Re,"","\\nvdash",!0);X(re,Oe,Re,"","\\nvDash",!0);X(re,Oe,Re,"","\\ntriangleleft");X(re,Oe,Re,"","\\ntrianglelefteq",!0);X(re,Oe,Re,"","\\subsetneq",!0);X(re,Oe,Re,"","\\@varsubsetneq");X(re,Oe,Re,"","\\subsetneqq",!0);X(re,Oe,Re,"","\\@varsubsetneqq");X(re,Oe,Re,"","\\ngtr",!0);X(re,Oe,Re,"","\\@ngeqslant");X(re,Oe,Re,"","\\@ngeqq");X(re,Oe,Re,"","\\gneq",!0);X(re,Oe,Re,"","\\gneqq",!0);X(re,Oe,Re,"","\\@gvertneqq");X(re,Oe,Re,"","\\gnsim",!0);X(re,Oe,Re,"","\\gnapprox",!0);X(re,Oe,Re,"","\\nsucc",!0);X(re,Oe,Re,"","\\nsucceq",!0);X(re,Oe,Re,"","\\succnsim",!0);X(re,Oe,Re,"","\\succnapprox",!0);X(re,Oe,Re,"","\\ncong",!0);X(re,Oe,Re,"","\\@nshortparallel");X(re,Oe,Re,"","\\nparallel",!0);X(re,Oe,Re,"","\\nVDash",!0);X(re,Oe,Re,"","\\ntriangleright");X(re,Oe,Re,"","\\ntrianglerighteq",!0);X(re,Oe,Re,"","\\@nsupseteqq");X(re,Oe,Re,"","\\supsetneq",!0);X(re,Oe,Re,"","\\@varsupsetneq");X(re,Oe,Re,"","\\supsetneqq",!0);X(re,Oe,Re,"","\\@varsupsetneqq");X(re,Oe,Re,"","\\nVdash",!0);X(re,Oe,Re,"","\\precneqq",!0);X(re,Oe,Re,"","\\succneqq",!0);X(re,Oe,Re,"","\\@nsubseteqq");X(re,Oe,Er,"","\\unlhd");X(re,Oe,Er,"","\\unrhd");X(re,Oe,Re,"","\\nleftarrow",!0);X(re,Oe,Re,"","\\nrightarrow",!0);X(re,Oe,Re,"","\\nLeftarrow",!0);X(re,Oe,Re,"","\\nRightarrow",!0);X(re,Oe,Re,"","\\nleftrightarrow",!0);X(re,Oe,Re,"","\\nLeftrightarrow",!0);X(re,Oe,Re,"","\\vartriangle");X(re,Oe,qe,"","\\hslash");X(re,Oe,qe,"","\\triangledown");X(re,Oe,qe,"","\\lozenge");X(re,Oe,qe,"","\\circledS");X(re,Oe,qe,"","\\circledR");X(Yt,Oe,qe,"","\\circledR");X(re,Oe,qe,"","\\measuredangle",!0);X(re,Oe,qe,"","\\nexists");X(re,Oe,qe,"","\\mho");X(re,Oe,qe,"","\\Finv",!0);X(re,Oe,qe,"","\\Game",!0);X(re,Oe,qe,"","\\backprime");X(re,Oe,qe,"","\\blacktriangle");X(re,Oe,qe,"","\\blacktriangledown");X(re,Oe,qe,"","\\blacksquare");X(re,Oe,qe,"","\\blacklozenge");X(re,Oe,qe,"","\\bigstar");X(re,Oe,qe,"","\\sphericalangle",!0);X(re,Oe,qe,"","\\complement",!0);X(re,Oe,qe,"","\\eth",!0);X(Yt,fe,qe,"","");X(re,Oe,qe,"","\\diagup");X(re,Oe,qe,"","\\diagdown");X(re,Oe,qe,"","\\square");X(re,Oe,qe,"","\\Box");X(re,Oe,qe,"","\\Diamond");X(re,Oe,qe,"","\\yen",!0);X(Yt,Oe,qe,"","\\yen",!0);X(re,Oe,qe,"","\\checkmark",!0);X(Yt,Oe,qe,"","\\checkmark");X(re,Oe,qe,"","\\beth",!0);X(re,Oe,qe,"","\\daleth",!0);X(re,Oe,qe,"","\\gimel",!0);X(re,Oe,qe,"","\\digamma",!0);X(re,Oe,qe,"","\\varkappa");X(re,Oe,$l,"","\\@ulcorner",!0);X(re,Oe,Ho,"","\\@urcorner",!0);X(re,Oe,$l,"","\\@llcorner",!0);X(re,Oe,Ho,"","\\@lrcorner",!0);X(re,Oe,Re,"","\\leqq",!0);X(re,Oe,Re,"","\\leqslant",!0);X(re,Oe,Re,"","\\eqslantless",!0);X(re,Oe,Re,"","\\lesssim",!0);X(re,Oe,Re,"","\\lessapprox",!0);X(re,Oe,Re,"","\\approxeq",!0);X(re,Oe,Er,"","\\lessdot");X(re,Oe,Re,"","\\lll",!0);X(re,Oe,Re,"","\\lessgtr",!0);X(re,Oe,Re,"","\\lesseqgtr",!0);X(re,Oe,Re,"","\\lesseqqgtr",!0);X(re,Oe,Re,"","\\doteqdot");X(re,Oe,Re,"","\\risingdotseq",!0);X(re,Oe,Re,"","\\fallingdotseq",!0);X(re,Oe,Re,"","\\backsim",!0);X(re,Oe,Re,"","\\backsimeq",!0);X(re,Oe,Re,"","\\subseteqq",!0);X(re,Oe,Re,"","\\Subset",!0);X(re,Oe,Re,"","\\sqsubset",!0);X(re,Oe,Re,"","\\preccurlyeq",!0);X(re,Oe,Re,"","\\curlyeqprec",!0);X(re,Oe,Re,"","\\precsim",!0);X(re,Oe,Re,"","\\precapprox",!0);X(re,Oe,Re,"","\\vartriangleleft");X(re,Oe,Re,"","\\trianglelefteq");X(re,Oe,Re,"","\\vDash",!0);X(re,Oe,Re,"","\\Vvdash",!0);X(re,Oe,Re,"","\\smallsmile");X(re,Oe,Re,"","\\smallfrown");X(re,Oe,Re,"","\\bumpeq",!0);X(re,Oe,Re,"","\\Bumpeq",!0);X(re,Oe,Re,"","\\geqq",!0);X(re,Oe,Re,"","\\geqslant",!0);X(re,Oe,Re,"","\\eqslantgtr",!0);X(re,Oe,Re,"","\\gtrsim",!0);X(re,Oe,Re,"","\\gtrapprox",!0);X(re,Oe,Er,"","\\gtrdot");X(re,Oe,Re,"","\\ggg",!0);X(re,Oe,Re,"","\\gtrless",!0);X(re,Oe,Re,"","\\gtreqless",!0);X(re,Oe,Re,"","\\gtreqqless",!0);X(re,Oe,Re,"","\\eqcirc",!0);X(re,Oe,Re,"","\\circeq",!0);X(re,Oe,Re,"","\\triangleq",!0);X(re,Oe,Re,"","\\thicksim");X(re,Oe,Re,"","\\thickapprox");X(re,Oe,Re,"","\\supseteqq",!0);X(re,Oe,Re,"","\\Supset",!0);X(re,Oe,Re,"","\\sqsupset",!0);X(re,Oe,Re,"","\\succcurlyeq",!0);X(re,Oe,Re,"","\\curlyeqsucc",!0);X(re,Oe,Re,"","\\succsim",!0);X(re,Oe,Re,"","\\succapprox",!0);X(re,Oe,Re,"","\\vartriangleright");X(re,Oe,Re,"","\\trianglerighteq");X(re,Oe,Re,"","\\Vdash",!0);X(re,Oe,Re,"","\\shortmid");X(re,Oe,Re,"","\\shortparallel");X(re,Oe,Re,"","\\between",!0);X(re,Oe,Re,"","\\pitchfork",!0);X(re,Oe,Re,"","\\varpropto");X(re,Oe,Re,"","\\blacktriangleleft");X(re,Oe,Re,"","\\therefore",!0);X(re,Oe,Re,"","\\backepsilon");X(re,Oe,Re,"","\\blacktriangleright");X(re,Oe,Re,"","\\because",!0);X(re,Oe,Re,"","\\llless");X(re,Oe,Re,"","\\gggtr");X(re,Oe,Er,"","\\lhd");X(re,Oe,Er,"","\\rhd");X(re,Oe,Re,"","\\eqsim",!0);X(re,fe,Re,"","\\Join");X(re,Oe,Re,"","\\Doteq",!0);X(re,Oe,Er,"","\\dotplus",!0);X(re,Oe,Er,"","\\smallsetminus");X(re,Oe,Er,"","\\Cap",!0);X(re,Oe,Er,"","\\Cup",!0);X(re,Oe,Er,"","\\doublebarwedge",!0);X(re,Oe,Er,"","\\boxminus",!0);X(re,Oe,Er,"","\\boxplus",!0);X(re,Oe,Er,"","\\divideontimes",!0);X(re,Oe,Er,"","\\ltimes",!0);X(re,Oe,Er,"","\\rtimes",!0);X(re,Oe,Er,"","\\leftthreetimes",!0);X(re,Oe,Er,"","\\rightthreetimes",!0);X(re,Oe,Er,"","\\curlywedge",!0);X(re,Oe,Er,"","\\curlyvee",!0);X(re,Oe,Er,"","\\circleddash",!0);X(re,Oe,Er,"","\\circledast",!0);X(re,Oe,Er,"","\\centerdot");X(re,Oe,Er,"","\\intercal",!0);X(re,Oe,Er,"","\\doublecap");X(re,Oe,Er,"","\\doublecup");X(re,Oe,Er,"","\\boxtimes",!0);X(re,Oe,Re,"","\\dashrightarrow",!0);X(re,Oe,Re,"","\\dashleftarrow",!0);X(re,Oe,Re,"","\\leftleftarrows",!0);X(re,Oe,Re,"","\\leftrightarrows",!0);X(re,Oe,Re,"","\\Lleftarrow",!0);X(re,Oe,Re,"","\\twoheadleftarrow",!0);X(re,Oe,Re,"","\\leftarrowtail",!0);X(re,Oe,Re,"","\\looparrowleft",!0);X(re,Oe,Re,"","\\leftrightharpoons",!0);X(re,Oe,Re,"","\\curvearrowleft",!0);X(re,Oe,Re,"","\\circlearrowleft",!0);X(re,Oe,Re,"","\\Lsh",!0);X(re,Oe,Re,"","\\upuparrows",!0);X(re,Oe,Re,"","\\upharpoonleft",!0);X(re,Oe,Re,"","\\downharpoonleft",!0);X(re,fe,Re,"","\\origof",!0);X(re,fe,Re,"","\\imageof",!0);X(re,Oe,Re,"","\\multimap",!0);X(re,Oe,Re,"","\\leftrightsquigarrow",!0);X(re,Oe,Re,"","\\rightrightarrows",!0);X(re,Oe,Re,"","\\rightleftarrows",!0);X(re,Oe,Re,"","\\twoheadrightarrow",!0);X(re,Oe,Re,"","\\rightarrowtail",!0);X(re,Oe,Re,"","\\looparrowright",!0);X(re,Oe,Re,"","\\curvearrowright",!0);X(re,Oe,Re,"","\\circlearrowright",!0);X(re,Oe,Re,"","\\Rsh",!0);X(re,Oe,Re,"","\\downdownarrows",!0);X(re,Oe,Re,"","\\upharpoonright",!0);X(re,Oe,Re,"","\\downharpoonright",!0);X(re,Oe,Re,"","\\rightsquigarrow",!0);X(re,Oe,Re,"","\\leadsto");X(re,Oe,Re,"","\\Rrightarrow",!0);X(re,Oe,Re,"","\\restriction");X(re,fe,qe,"","`");X(re,fe,qe,"$","\\$");X(Yt,fe,qe,"$","\\$");X(Yt,fe,qe,"$","\\textdollar");X(re,fe,qe,"%","\\%");X(Yt,fe,qe,"%","\\%");X(re,fe,qe,"_","\\_");X(Yt,fe,qe,"_","\\_");X(Yt,fe,qe,"_","\\textunderscore");X(re,fe,qe,"","\\angle",!0);X(re,fe,qe,"","\\infty",!0);X(re,fe,qe,"","\\prime");X(re,fe,qe,"","\\triangle");X(re,fe,qe,"","\\Gamma",!0);X(re,fe,qe,"","\\Delta",!0);X(re,fe,qe,"","\\Theta",!0);X(re,fe,qe,"","\\Lambda",!0);X(re,fe,qe,"","\\Xi",!0);X(re,fe,qe,"","\\Pi",!0);X(re,fe,qe,"","\\Sigma",!0);X(re,fe,qe,"","\\Upsilon",!0);X(re,fe,qe,"","\\Phi",!0);X(re,fe,qe,"","\\Psi",!0);X(re,fe,qe,"","\\Omega",!0);X(re,fe,qe,"A","");X(re,fe,qe,"B","");X(re,fe,qe,"E","");X(re,fe,qe,"Z","");X(re,fe,qe,"H","");X(re,fe,qe,"I","");X(re,fe,qe,"K","");X(re,fe,qe,"M","");X(re,fe,qe,"N","");X(re,fe,qe,"O","");X(re,fe,qe,"P","");X(re,fe,qe,"T","");X(re,fe,qe,"X","");X(re,fe,qe,"","\\neg",!0);X(re,fe,qe,"","\\lnot");X(re,fe,qe,"","\\top");X(re,fe,qe,"","\\bot");X(re,fe,qe,"","\\emptyset");X(re,Oe,qe,"","\\varnothing");X(re,fe,Gr,"","\\alpha",!0);X(re,fe,Gr,"","\\beta",!0);X(re,fe,Gr,"","\\gamma",!0);X(re,fe,Gr,"","\\delta",!0);X(re,fe,Gr,"","\\epsilon",!0);X(re,fe,Gr,"","\\zeta",!0);X(re,fe,Gr,"","\\eta",!0);X(re,fe,Gr,"","\\theta",!0);X(re,fe,Gr,"","\\iota",!0);X(re,fe,Gr,"","\\kappa",!0);X(re,fe,Gr,"","\\lambda",!0);X(re,fe,Gr,"","\\mu",!0);X(re,fe,Gr,"","\\nu",!0);X(re,fe,Gr,"","\\xi",!0);X(re,fe,Gr,"","\\omicron",!0);X(re,fe,Gr,"","\\pi",!0);X(re,fe,Gr,"","\\rho",!0);X(re,fe,Gr,"","\\sigma",!0);X(re,fe,Gr,"","\\tau",!0);X(re,fe,Gr,"","\\upsilon",!0);X(re,fe,Gr,"","\\phi",!0);X(re,fe,Gr,"","\\chi",!0);X(re,fe,Gr,"","\\psi",!0);X(re,fe,Gr,"","\\omega",!0);X(re,fe,Gr,"","\\varepsilon",!0);X(re,fe,Gr,"","\\vartheta",!0);X(re,fe,Gr,"","\\varpi",!0);X(re,fe,Gr,"","\\varrho",!0);X(re,fe,Gr,"","\\varsigma",!0);X(re,fe,Gr,"","\\varphi",!0);X(re,fe,Er,"","*",!0);X(re,fe,Er,"+","+");X(re,fe,Er,"","-",!0);X(re,fe,Er,"","\\cdot",!0);X(re,fe,Er,"","\\circ",!0);X(re,fe,Er,"","\\div",!0);X(re,fe,Er,"","\\pm",!0);X(re,fe,Er,"","\\times",!0);X(re,fe,Er,"","\\cap",!0);X(re,fe,Er,"","\\cup",!0);X(re,fe,Er,"","\\setminus",!0);X(re,fe,Er,"","\\land");X(re,fe,Er,"","\\lor");X(re,fe,Er,"","\\wedge",!0);X(re,fe,Er,"","\\vee",!0);X(re,fe,qe,"","\\surd");X(re,fe,$l,"","\\langle",!0);X(re,fe,$l,"","\\lvert");X(re,fe,$l,"","\\lVert");X(re,fe,Ho,"?","?");X(re,fe,Ho,"!","!");X(re,fe,Ho,"","\\rangle",!0);X(re,fe,Ho,"","\\rvert");X(re,fe,Ho,"","\\rVert");X(re,fe,Re,"=","=");X(re,fe,Re,":",":");X(re,fe,Re,"","\\approx",!0);X(re,fe,Re,"","\\cong",!0);X(re,fe,Re,"","\\ge");X(re,fe,Re,"","\\geq",!0);X(re,fe,Re,"","\\gets");X(re,fe,Re,">","\\gt",!0);X(re,fe,Re,"","\\in",!0);X(re,fe,Re,"","\\@not");X(re,fe,Re,"","\\subset",!0);X(re,fe,Re,"","\\supset",!0);X(re,fe,Re,"","\\subseteq",!0);X(re,fe,Re,"","\\supseteq",!0);X(re,Oe,Re,"","\\nsubseteq",!0);X(re,Oe,Re,"","\\nsupseteq",!0);X(re,fe,Re,"","\\models");X(re,fe,Re,"","\\leftarrow",!0);X(re,fe,Re,"","\\le");X(re,fe,Re,"","\\leq",!0);X(re,fe,Re,"<","\\lt",!0);X(re,fe,Re,"","\\rightarrow",!0);X(re,fe,Re,"","\\to");X(re,Oe,Re,"","\\ngeq",!0);X(re,Oe,Re,"","\\nleq",!0);X(re,fe,p0,"","\\ ");X(re,fe,p0,"","\\space");X(re,fe,p0,"","\\nobreakspace");X(Yt,fe,p0,"","\\ ");X(Yt,fe,p0,""," ");X(Yt,fe,p0,"","\\space");X(Yt,fe,p0,"","\\nobreakspace");X(re,fe,p0,null,"\\nobreak");X(re,fe,p0,null,"\\allowbreak");X(re,fe,Y_,",",",");X(re,fe,Y_,";",";");X(re,Oe,Er,"","\\barwedge",!0);X(re,Oe,Er,"","\\veebar",!0);X(re,fe,Er,"","\\odot",!0);X(re,fe,Er,"","\\oplus",!0);X(re,fe,Er,"","\\otimes",!0);X(re,fe,qe,"","\\partial",!0);X(re,fe,Er,"","\\oslash",!0);X(re,Oe,Er,"","\\circledcirc",!0);X(re,Oe,Er,"","\\boxdot",!0);X(re,fe,Er,"","\\bigtriangleup");X(re,fe,Er,"","\\bigtriangledown");X(re,fe,Er,"","\\dagger");X(re,fe,Er,"","\\diamond");X(re,fe,Er,"","\\star");X(re,fe,Er,"","\\triangleleft");X(re,fe,Er,"","\\triangleright");X(re,fe,$l,"{","\\{");X(Yt,fe,qe,"{","\\{");X(Yt,fe,qe,"{","\\textbraceleft");X(re,fe,Ho,"}","\\}");X(Yt,fe,qe,"}","\\}");X(Yt,fe,qe,"}","\\textbraceright");X(re,fe,$l,"{","\\lbrace");X(re,fe,Ho,"}","\\rbrace");X(re,fe,$l,"[","\\lbrack",!0);X(Yt,fe,qe,"[","\\lbrack",!0);X(re,fe,Ho,"]","\\rbrack",!0);X(Yt,fe,qe,"]","\\rbrack",!0);X(re,fe,$l,"(","\\lparen",!0);X(re,fe,Ho,")","\\rparen",!0);X(Yt,fe,qe,"<","\\textless",!0);X(Yt,fe,qe,">","\\textgreater",!0);X(re,fe,$l,"","\\lfloor",!0);X(re,fe,Ho,"","\\rfloor",!0);X(re,fe,$l,"","\\lceil",!0);X(re,fe,Ho,"","\\rceil",!0);X(re,fe,qe,"\\","\\backslash");X(re,fe,qe,"","|");X(re,fe,qe,"","\\vert");X(Yt,fe,qe,"|","\\textbar",!0);X(re,fe,qe,"","\\|");X(re,fe,qe,"","\\Vert");X(Yt,fe,qe,"","\\textbardbl");X(Yt,fe,qe,"~","\\textasciitilde");X(Yt,fe,qe,"\\","\\textbackslash");X(Yt,fe,qe,"^","\\textasciicircum");X(re,fe,Re,"","\\uparrow",!0);X(re,fe,Re,"","\\Uparrow",!0);X(re,fe,Re,"","\\downarrow",!0);X(re,fe,Re,"","\\Downarrow",!0);X(re,fe,Re,"","\\updownarrow",!0);X(re,fe,Re,"","\\Updownarrow",!0);X(re,fe,Ha,"","\\coprod");X(re,fe,Ha,"","\\bigvee");X(re,fe,Ha,"","\\bigwedge");X(re,fe,Ha,"","\\biguplus");X(re,fe,Ha,"","\\bigcap");X(re,fe,Ha,"","\\bigcup");X(re,fe,Ha,"","\\int");X(re,fe,Ha,"","\\intop");X(re,fe,Ha,"","\\iint");X(re,fe,Ha,"","\\iiint");X(re,fe,Ha,"","\\prod");X(re,fe,Ha,"","\\sum");X(re,fe,Ha,"","\\bigotimes");X(re,fe,Ha,"","\\bigoplus");X(re,fe,Ha,"","\\bigodot");X(re,fe,Ha,"","\\oint");X(re,fe,Ha,"","\\oiint");X(re,fe,Ha,"","\\oiiint");X(re,fe,Ha,"","\\bigsqcup");X(re,fe,Ha,"","\\smallint");X(Yt,fe,g1,"","\\textellipsis");X(re,fe,g1,"","\\mathellipsis");X(Yt,fe,g1,"","\\ldots",!0);X(re,fe,g1,"","\\ldots",!0);X(re,fe,g1,"","\\@cdots",!0);X(re,fe,g1,"","\\ddots",!0);X(re,fe,qe,"","\\varvdots");X(Yt,fe,qe,"","\\varvdots");X(re,fe,zs,"","\\acute");X(re,fe,zs,"","\\grave");X(re,fe,zs,"","\\ddot");X(re,fe,zs,"~","\\tilde");X(re,fe,zs,"","\\bar");X(re,fe,zs,"","\\breve");X(re,fe,zs,"","\\check");X(re,fe,zs,"^","\\hat");X(re,fe,zs,"","\\vec");X(re,fe,zs,"","\\dot");X(re,fe,zs,"","\\mathring");X(re,fe,Gr,"","\\@imath");X(re,fe,Gr,"","\\@jmath");X(re,fe,qe,"","");X(re,fe,qe,"","");X(Yt,fe,qe,"","\\i",!0);X(Yt,fe,qe,"","\\j",!0);X(Yt,fe,qe,"","\\ss",!0);X(Yt,fe,qe,"","\\ae",!0);X(Yt,fe,qe,"","\\oe",!0);X(Yt,fe,qe,"","\\o",!0);X(Yt,fe,qe,"","\\AE",!0);X(Yt,fe,qe,"","\\OE",!0);X(Yt,fe,qe,"","\\O",!0);X(Yt,fe,zs,"","\\'");X(Yt,fe,zs,"","\\`");X(Yt,fe,zs,"","\\^");X(Yt,fe,zs,"","\\~");X(Yt,fe,zs,"","\\=");X(Yt,fe,zs,"","\\u");X(Yt,fe,zs,"","\\.");X(Yt,fe,zs,"","\\c");X(Yt,fe,zs,"","\\r");X(Yt,fe,zs,"","\\v");X(Yt,fe,zs,"",'\\"');X(Yt,fe,zs,"","\\H");X(Yt,fe,zs,"","\\textcircled");var cW={"--":!0,"---":!0,"``":!0,"''":!0};X(Yt,fe,qe,"","--",!0);X(Yt,fe,qe,"","\\textendash");X(Yt,fe,qe,"","---",!0);X(Yt,fe,qe,"","\\textemdash");X(Yt,fe,qe,"","`",!0);X(Yt,fe,qe,"","\\textquoteleft");X(Yt,fe,qe,"","'",!0);X(Yt,fe,qe,"","\\textquoteright");X(Yt,fe,qe,"","``",!0);X(Yt,fe,qe,"","\\textquotedblleft");X(Yt,fe,qe,"","''",!0);X(Yt,fe,qe,"","\\textquotedblright");X(re,fe,qe,"","\\degree",!0);X(Yt,fe,qe,"","\\degree");X(Yt,fe,qe,"","\\textdegree",!0);X(re,fe,qe,"","\\pounds");X(re,fe,qe,"","\\mathsterling",!0);X(Yt,fe,qe,"","\\pounds");X(Yt,fe,qe,"","\\textsterling",!0);X(re,Oe,qe,"","\\maltese");X(Yt,Oe,qe,"","\\maltese");var xF='0123456789/@."';for(var yS=0;yS<xF.length;yS++){var yF=xF.charAt(yS);X(re,fe,qe,yF,yF)}var vF='0123456789!@*()-=+";:?/.,';for(var vS=0;vS<vF.length;vS++){var wF=vF.charAt(vS);X(Yt,fe,qe,wF,wF)}var k4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var wS=0;wS<k4.length;wS++){var tb=k4.charAt(wS);X(re,fe,Gr,tb,tb),X(Yt,fe,qe,tb,tb)}X(re,Oe,qe,"C","");X(Yt,Oe,qe,"C","");X(re,Oe,qe,"H","");X(Yt,Oe,qe,"H","");X(re,Oe,qe,"N","");X(Yt,Oe,qe,"N","");X(re,Oe,qe,"P","");X(Yt,Oe,qe,"P","");X(re,Oe,qe,"Q","");X(Yt,Oe,qe,"Q","");X(re,Oe,qe,"R","");X(Yt,Oe,qe,"R","");X(re,Oe,qe,"Z","");X(Yt,Oe,qe,"Z","");X(re,fe,Gr,"h","");X(Yt,fe,Gr,"h","");var Zr="";for(var Fo=0;Fo<k4.length;Fo++){var ra=k4.charAt(Fo);Zr=String.fromCharCode(55349,56320+Fo),X(re,fe,Gr,ra,Zr),X(Yt,fe,qe,ra,Zr),Zr=String.fromCharCode(55349,56372+Fo),X(re,fe,Gr,ra,Zr),X(Yt,fe,qe,ra,Zr),Zr=String.fromCharCode(55349,56424+Fo),X(re,fe,Gr,ra,Zr),X(Yt,fe,qe,ra,Zr),Zr=String.fromCharCode(55349,56580+Fo),X(re,fe,Gr,ra,Zr),X(Yt,fe,qe,ra,Zr),Zr=String.fromCharCode(55349,56684+Fo),X(re,fe,Gr,ra,Zr),X(Yt,fe,qe,ra,Zr),Zr=String.fromCharCode(55349,56736+Fo),X(re,fe,Gr,ra,Zr),X(Yt,fe,qe,ra,Zr),Zr=String.fromCharCode(55349,56788+Fo),X(re,fe,Gr,ra,Zr),X(Yt,fe,qe,ra,Zr),Zr=String.fromCharCode(55349,56840+Fo),X(re,fe,Gr,ra,Zr),X(Yt,fe,qe,ra,Zr),Zr=String.fromCharCode(55349,56944+Fo),X(re,fe,Gr,ra,Zr),X(Yt,fe,qe,ra,Zr),Fo<26&&(Zr=String.fromCharCode(55349,56632+Fo),X(re,fe,Gr,ra,Zr),X(Yt,fe,qe,ra,Zr),Zr=String.fromCharCode(55349,56476+Fo),X(re,fe,Gr,ra,Zr),X(Yt,fe,qe,ra,Zr))}Zr="";X(re,fe,Gr,"k",Zr);X(Yt,fe,qe,"k",Zr);for(var Ih=0;Ih<10;Ih++){var ff=Ih.toString();Zr=String.fromCharCode(55349,57294+Ih),X(re,fe,Gr,ff,Zr),X(Yt,fe,qe,ff,Zr),Zr=String.fromCharCode(55349,57314+Ih),X(re,fe,Gr,ff,Zr),X(Yt,fe,qe,ff,Zr),Zr=String.fromCharCode(55349,57324+Ih),X(re,fe,Gr,ff,Zr),X(Yt,fe,qe,ff,Zr),Zr=String.fromCharCode(55349,57334+Ih),X(re,fe,Gr,ff,Zr),X(Yt,fe,qe,ff,Zr)}var P8="";for(var bS=0;bS<P8.length;bS++){var rb=P8.charAt(bS);X(re,fe,Gr,rb,rb),X(Yt,fe,qe,rb,rb)}var nb=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],bF=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],iue=function(t,r){var n=t.charCodeAt(0),s=t.charCodeAt(1),a=(n-55296)*1024+(s-56320)+65536,i=r==="math"?0:1;if(119808<=a&&a<120484){var o=Math.floor((a-119808)/26);return[nb[o][2],nb[o][i]]}else if(120782<=a&&a<=120831){var l=Math.floor((a-120782)/10);return[bF[l][2],bF[l][i]]}else{if(a===120485||a===120486)return[nb[0][2],nb[0][i]];if(120486<a&&a<120782)return["",""];throw new rr("Unsupported character: "+t)}},X_=function(t,r,n){return ks[n][t]&&ks[n][t].replace&&(t=ks[n][t].replace),{value:t,metrics:CC(t,r,n)}},Yc=function(t,r,n,s,a){var i=X_(t,r,n),o=i.metrics;t=i.value;var l;if(o){var u=o.italic;(n==="text"||s&&s.font==="mathit")&&(u=0),l=new vc(t,o.height,o.depth,u,o.skew,o.width,a)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+t+"' in style '"+r+"' and mode '"+n+"'")),l=new vc(t,0,0,0,0,0,a);if(s){l.maxFontSize=s.sizeMultiplier,s.style.isTight()&&l.classes.push("mtight");var d=s.getColor();d&&(l.style.color=d)}return l},oue=function(t,r,n,s){return s===void 0&&(s=[]),n.font==="boldsymbol"&&X_(t,"Main-Bold",r).metrics?Yc(t,"Main-Bold",r,n,s.concat(["mathbf"])):t==="\\"||ks[r][t].font==="main"?Yc(t,"Main-Regular",r,n,s):Yc(t,"AMS-Regular",r,n,s.concat(["amsrm"]))},lue=function(t,r,n,s,a){return a!=="textord"&&X_(t,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},cue=function(t,r,n){var s=t.mode,a=t.text,i=["mord"],o=s==="math"||s==="text"&&r.font,l=o?r.font:r.fontFamily,u="",d="";if(a.charCodeAt(0)===55349&&([u,d]=iue(a,s)),u.length>0)return Yc(a,u,s,r,i.concat(d));if(l){var f,h;if(l==="boldsymbol"){var g=lue(a,s,r,i,n);f=g.fontName,h=[g.fontClass]}else o?(f=fW[l].fontName,h=[l]):(f=sb(l,r.fontWeight,r.fontShape),h=[l,r.fontWeight,r.fontShape]);if(X_(a,f,s).metrics)return Yc(a,f,s,r,i.concat(h));if(cW.hasOwnProperty(a)&&f.slice(0,10)==="Typewriter"){for(var x=[],y=0;y<a.length;y++)x.push(Yc(a[y],f,s,r,i.concat(h)));return dW(x)}}if(n==="mathord")return Yc(a,"Math-Italic",s,r,i.concat(["mathnormal"]));if(n==="textord"){var v=ks[s][a]&&ks[s][a].font;if(v==="ams"){var T=sb("amsrm",r.fontWeight,r.fontShape);return Yc(a,T,s,r,i.concat("amsrm",r.fontWeight,r.fontShape))}else if(v==="main"||!v){var k=sb("textrm",r.fontWeight,r.fontShape);return Yc(a,k,s,r,i.concat(r.fontWeight,r.fontShape))}else{var b=sb(v,r.fontWeight,r.fontShape);return Yc(a,b,s,r,i.concat(b,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},uue=(e,t)=>{if(If(e.classes)!==If(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(e.classes.length===1){var r=e.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in e.style)if(e.style.hasOwnProperty(n)&&e.style[n]!==t.style[n])return!1;for(var s in t.style)if(t.style.hasOwnProperty(s)&&e.style[s]!==t.style[s])return!1;return!0},due=e=>{for(var t=0;t<e.length-1;t++){var r=e[t],n=e[t+1];r instanceof vc&&n instanceof vc&&uue(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,e.splice(t+1,1),t--)}return e},NC=function(t){for(var r=0,n=0,s=0,a=0;a<t.children.length;a++){var i=t.children[a];i.height>r&&(r=i.height),i.depth>n&&(n=i.depth),i.maxFontSize>s&&(s=i.maxFontSize)}t.height=r,t.depth=n,t.maxFontSize=s},tl=function(t,r,n,s){var a=new p2(t,r,n,s);return NC(a),a},uW=(e,t,r,n)=>new p2(e,t,r,n),fue=function(t,r,n){var s=tl([t],[],r);return s.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),s.style.borderBottomWidth=mr(s.height),s.maxFontSize=1,s},hue=function(t,r,n,s){var a=new EC(t,r,n,s);return NC(a),a},dW=function(t){var r=new g2(t);return NC(r),r},mue=function(t,r){return t instanceof g2?tl([],[t],r):t},gue=function(t){if(t.positionType==="individualShift"){for(var r=t.children,n=[r[0]],s=-r[0].shift-r[0].elem.depth,a=s,i=1;i<r.length;i++){var o=-r[i].shift-a-r[i].elem.depth,l=o-(r[i-1].elem.height+r[i-1].elem.depth);a=a+o,n.push({type:"kern",size:l}),n.push(r[i])}return{children:n,depth:s}}var u;if(t.positionType==="top"){for(var d=t.positionData,f=0;f<t.children.length;f++){var h=t.children[f];d-=h.type==="kern"?h.size:h.elem.height+h.elem.depth}u=d}else if(t.positionType==="bottom")u=-t.positionData;else{var g=t.children[0];if(g.type!=="elem")throw new Error('First child must have type "elem".');if(t.positionType==="shift")u=-g.elem.depth-t.positionData;else if(t.positionType==="firstBaseline")u=-g.elem.depth;else throw new Error("Invalid positionType "+t.positionType+".")}return{children:t.children,depth:u}},pue=function(t,r){for(var{children:n,depth:s}=gue(t),a=0,i=0;i<n.length;i++){var o=n[i];if(o.type==="elem"){var l=o.elem;a=Math.max(a,l.maxFontSize,l.height)}}a+=2;var u=tl(["pstrut"],[]);u.style.height=mr(a);for(var d=[],f=s,h=s,g=s,x=0;x<n.length;x++){var y=n[x];if(y.type==="kern")g+=y.size;else{var v=y.elem,T=y.wrapperClasses||[],k=y.wrapperStyle||{},b=tl(T,[u,v],void 0,k);b.style.top=mr(-a-g-v.depth),y.marginLeft&&(b.style.marginLeft=y.marginLeft),y.marginRight&&(b.style.marginRight=y.marginRight),d.push(b),g+=v.height+v.depth}f=Math.min(f,g),h=Math.max(h,g)}var N=tl(["vlist"],d);N.style.height=mr(h);var E;if(f<0){var P=tl([],[]),M=tl(["vlist"],[P]);M.style.height=mr(-f);var j=tl(["vlist-s"],[new vc("")]);E=[tl(["vlist-r"],[N,j]),tl(["vlist-r"],[M])]}else E=[tl(["vlist-r"],[N])];var A=tl(["vlist-t"],E);return E.length===2&&A.classes.push("vlist-t2"),A.height=h,A.depth=-f,A},xue=(e,t)=>{var r=tl(["mspace"],[],t),n=Vs(e,t);return r.style.marginRight=mr(n),r},sb=function(t,r,n){var s="";switch(t){case"amsrm":s="AMS";break;case"textrm":s="Main";break;case"textsf":s="SansSerif";break;case"texttt":s="Typewriter";break;default:s=t}var a;return r==="textbf"&&n==="textit"?a="BoldItalic":r==="textbf"?a="Bold":r==="textit"?a="Italic":a="Regular",s+"-"+a},fW={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},hW={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},yue=function(t,r){var[n,s,a]=hW[t],i=new Rf(n),o=new i0([i],{width:mr(s),height:mr(a),style:"width:"+mr(s),viewBox:"0 0 "+1e3*s+" "+1e3*a,preserveAspectRatio:"xMinYMin"}),l=uW(["overlay"],[o],r);return l.height=a,l.style.height=mr(a),l.style.width=mr(s),l},ft={fontMap:fW,makeSymbol:Yc,mathsym:oue,makeSpan:tl,makeSvgSpan:uW,makeLineSpan:fue,makeAnchor:hue,makeFragment:dW,wrapFragment:mue,makeVList:pue,makeOrd:cue,makeGlue:xue,staticSvg:yue,svgData:hW,tryCombineChars:due},Hs={number:3,unit:"mu"},Rh={number:4,unit:"mu"},Od={number:5,unit:"mu"},vue={mord:{mop:Hs,mbin:Rh,mrel:Od,minner:Hs},mop:{mord:Hs,mop:Hs,mrel:Od,minner:Hs},mbin:{mord:Rh,mop:Rh,mopen:Rh,minner:Rh},mrel:{mord:Od,mop:Od,mopen:Od,minner:Od},mopen:{},mclose:{mop:Hs,mbin:Rh,mrel:Od,minner:Hs},mpunct:{mord:Hs,mop:Hs,mrel:Od,mopen:Hs,mclose:Hs,mpunct:Hs,minner:Hs},minner:{mord:Hs,mop:Hs,mbin:Rh,mrel:Od,mopen:Hs,mpunct:Hs,minner:Hs}},wue={mord:{mop:Hs},mop:{mord:Hs,mop:Hs},mbin:{},mrel:{},mopen:{},mclose:{mop:Hs},mpunct:{},minner:{mop:Hs}},mW={},T4={},C4={};function vr(e){for(var{type:t,names:r,props:n,handler:s,htmlBuilder:a,mathmlBuilder:i}=e,o={type:t,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:s},l=0;l<r.length;++l)mW[r[l]]=o;t&&(a&&(T4[t]=a),i&&(C4[t]=i))}function Hm(e){var{type:t,htmlBuilder:r,mathmlBuilder:n}=e;vr({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var E4=function(t){return t.type==="ordgroup"&&t.body.length===1?t.body[0]:t},Ea=function(t){return t.type==="ordgroup"?t.body:[t]},o0=ft.makeSpan,bue=["leftmost","mbin","mopen","mrel","mop","mpunct"],_ue=["rightmost","mrel","mclose","mpunct"],Sue={display:Vr.DISPLAY,text:Vr.TEXT,script:Vr.SCRIPT,scriptscript:Vr.SCRIPTSCRIPT},kue={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},ni=function(t,r,n,s){s===void 0&&(s=[null,null]);for(var a=[],i=0;i<t.length;i++){var o=In(t[i],r);if(o instanceof g2){var l=o.children;a.push(...l)}else a.push(o)}if(ft.tryCombineChars(a),!n)return a;var u=r;if(t.length===1){var d=t[0];d.type==="sizing"?u=r.havingSize(d.size):d.type==="styling"&&(u=r.havingStyle(Sue[d.style]))}var f=o0([s[0]||"leftmost"],[],r),h=o0([s[1]||"rightmost"],[],r),g=n==="root";return _F(a,(x,y)=>{var v=y.classes[0],T=x.classes[0];v==="mbin"&&_ue.includes(T)?y.classes[0]="mord":T==="mbin"&&bue.includes(v)&&(x.classes[0]="mord")},{node:f},h,g),_F(a,(x,y)=>{var v=M8(y),T=M8(x),k=v&&T?x.hasClass("mtight")?wue[v][T]:vue[v][T]:null;if(k)return ft.makeGlue(k,u)},{node:f},h,g),a},_F=function e(t,r,n,s,a){s&&t.push(s);for(var i=0;i<t.length;i++){var o=t[i],l=gW(o);if(l){e(l.children,r,n,null,a);continue}var u=!o.hasClass("mspace");if(u){var d=r(o,n.node);d&&(n.insertAfter?n.insertAfter(d):(t.unshift(d),i++))}u?n.node=o:a&&o.hasClass("newline")&&(n.node=o0(["leftmost"])),n.insertAfter=(f=>h=>{t.splice(f+1,0,h),i++})(i)}s&&t.pop()},gW=function(t){return t instanceof g2||t instanceof EC||t instanceof p2&&t.hasClass("enclosing")?t:null},Tue=function e(t,r){var n=gW(t);if(n){var s=n.children;if(s.length){if(r==="right")return e(s[s.length-1],"right");if(r==="left")return e(s[0],"left")}}return t},M8=function(t,r){return t?(r&&(t=Tue(t,r)),kue[t.classes[0]]||null):null},Sv=function(t,r){var n=["nulldelimiter"].concat(t.baseSizingClasses());return o0(r.concat(n))},In=function(t,r,n){if(!t)return o0();if(T4[t.type]){var s=T4[t.type](t,r);if(n&&r.size!==n.size){s=o0(r.sizingClasses(n),[s],r);var a=r.sizeMultiplier/n.sizeMultiplier;s.height*=a,s.depth*=a}return s}else throw new rr("Got group of unknown type: '"+t.type+"'")};function ab(e,t){var r=o0(["base"],e,t),n=o0(["strut"]);return n.style.height=mr(r.height+r.depth),r.depth&&(n.style.verticalAlign=mr(-r.depth)),r.children.unshift(n),r}function F8(e,t){var r=null;e.length===1&&e[0].type==="tag"&&(r=e[0].tag,e=e[0].body);var n=ni(e,t,"root"),s;n.length===2&&n[1].hasClass("tag")&&(s=n.pop());for(var a=[],i=[],o=0;o<n.length;o++)if(i.push(n[o]),n[o].hasClass("mbin")||n[o].hasClass("mrel")||n[o].hasClass("allowbreak")){for(var l=!1;o<n.length-1&&n[o+1].hasClass("mspace")&&!n[o+1].hasClass("newline");)o++,i.push(n[o]),n[o].hasClass("nobreak")&&(l=!0);l||(a.push(ab(i,t)),i=[])}else n[o].hasClass("newline")&&(i.pop(),i.length>0&&(a.push(ab(i,t)),i=[]),a.push(n[o]));i.length>0&&a.push(ab(i,t));var u;r?(u=ab(ni(r,t,!0)),u.classes=["tag"],a.push(u)):s&&a.push(s);var d=o0(["katex-html"],a);if(d.setAttribute("aria-hidden","true"),u){var f=u.children[0];f.style.height=mr(d.height+d.depth),d.depth&&(f.style.verticalAlign=mr(-d.depth))}return d}function pW(e){return new g2(e)}class jl{constructor(t,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(t,r){this.attributes[t]=r}getAttribute(t){return this.attributes[t]}toNode(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);this.classes.length>0&&(t.className=If(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof zu&&this.children[n+1]instanceof zu){for(var s=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof zu;)s+=this.children[++n].toText();t.appendChild(new zu(s).toNode())}else t.appendChild(this.children[n].toNode());return t}toMarkup(){var t="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="',t+=Un.escape(this.attributes[r]),t+='"');this.classes.length>0&&(t+=' class ="'+Un.escape(If(this.classes))+'"'),t+=">";for(var n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map(t=>t.toText()).join("")}}class zu{constructor(t){this.text=void 0,this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return Un.escape(this.toText())}toText(){return this.text}}class Cue{constructor(t){this.width=void 0,this.character=void 0,this.width=t,t>=.05555&&t<=.05556?this.character="":t>=.1666&&t<=.1667?this.character="":t>=.2222&&t<=.2223?this.character="":t>=.2777&&t<=.2778?this.character="":t>=-.05556&&t<=-.05555?this.character="":t>=-.1667&&t<=-.1666?this.character="":t>=-.2223&&t<=-.2222?this.character="":t>=-.2778&&t<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",mr(this.width)),t}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+mr(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var tr={MathNode:jl,TextNode:zu,SpaceNode:Cue,newDocumentFragment:pW},wc=function(t,r,n){return ks[r][t]&&ks[r][t].replace&&t.charCodeAt(0)!==55349&&!(cW.hasOwnProperty(t)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(t=ks[r][t].replace),new tr.TextNode(t)},AC=function(t){return t.length===1?t[0]:new tr.MathNode("mrow",t)},jC=function(t,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var s=t.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return t.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var a=t.text;if(["\\imath","\\jmath"].includes(a))return null;ks[s][a]&&ks[s][a].replace&&(a=ks[s][a].replace);var i=ft.fontMap[n].fontName;return CC(a,i,s)?ft.fontMap[n].variant:null};function _S(e){if(!e)return!1;if(e.type==="mi"&&e.children.length===1){var t=e.children[0];return t instanceof zu&&t.text==="."}else if(e.type==="mo"&&e.children.length===1&&e.getAttribute("separator")==="true"&&e.getAttribute("lspace")==="0em"&&e.getAttribute("rspace")==="0em"){var r=e.children[0];return r instanceof zu&&r.text===","}else return!1}var hl=function(t,r,n){if(t.length===1){var s=xs(t[0],r);return n&&s instanceof jl&&s.type==="mo"&&(s.setAttribute("lspace","0em"),s.setAttribute("rspace","0em")),[s]}for(var a=[],i,o=0;o<t.length;o++){var l=xs(t[o],r);if(l instanceof jl&&i instanceof jl){if(l.type==="mtext"&&i.type==="mtext"&&l.getAttribute("mathvariant")===i.getAttribute("mathvariant")){i.children.push(...l.children);continue}else if(l.type==="mn"&&i.type==="mn"){i.children.push(...l.children);continue}else if(_S(l)&&i.type==="mn"){i.children.push(...l.children);continue}else if(l.type==="mn"&&_S(i))l.children=[...i.children,...l.children],a.pop();else if((l.type==="msup"||l.type==="msub")&&l.children.length>=1&&(i.type==="mn"||_S(i))){var u=l.children[0];u instanceof jl&&u.type==="mn"&&(u.children=[...i.children,...u.children],a.pop())}else if(i.type==="mi"&&i.children.length===1){var d=i.children[0];if(d instanceof zu&&d.text===""&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var f=l.children[0];f instanceof zu&&f.text.length>0&&(f.text=f.text.slice(0,1)+""+f.text.slice(1),a.pop())}}}a.push(l),i=l}return a},Lf=function(t,r,n){return AC(hl(t,r,n))},xs=function(t,r){if(!t)return new tr.MathNode("mrow");if(C4[t.type]){var n=C4[t.type](t,r);return n}else throw new rr("Got group of unknown type: '"+t.type+"'")};function SF(e,t,r,n,s){var a=hl(e,r),i;a.length===1&&a[0]instanceof jl&&["mrow","mtable"].includes(a[0].type)?i=a[0]:i=new tr.MathNode("mrow",a);var o=new tr.MathNode("annotation",[new tr.TextNode(t)]);o.setAttribute("encoding","application/x-tex");var l=new tr.MathNode("semantics",[i,o]),u=new tr.MathNode("math",[l]);u.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&u.setAttribute("display","block");var d=s?"katex":"katex-mathml";return ft.makeSpan([d],[u])}var xW=function(t){return new Bd({style:t.displayMode?Vr.DISPLAY:Vr.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},yW=function(t,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),t=ft.makeSpan(n,[t])}return t},Eue=function(t,r,n){var s=xW(n),a;if(n.output==="mathml")return SF(t,r,s,n.displayMode,!0);if(n.output==="html"){var i=F8(t,s);a=ft.makeSpan(["katex"],[i])}else{var o=SF(t,r,s,n.displayMode,!1),l=F8(t,s);a=ft.makeSpan(["katex"],[o,l])}return yW(a,n)},Nue=function(t,r,n){var s=xW(n),a=F8(t,s),i=ft.makeSpan(["katex"],[a]);return yW(i,n)},Aue={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},jue=function(t){var r=new tr.MathNode("mo",[new tr.TextNode(Aue[t.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},Pue={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Mue=function(t){return t.type==="ordgroup"?t.body.length:1},Fue=function(t,r){function n(){var o=4e5,l=t.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(l)){var u=t,d=Mue(u.base),f,h,g;if(d>5)l==="widehat"||l==="widecheck"?(f=420,o=2364,g=.42,h=l+"4"):(f=312,o=2340,g=.34,h="tilde4");else{var x=[1,1,2,2,3,3][d];l==="widehat"||l==="widecheck"?(o=[0,1062,2364,2364,2364][x],f=[0,239,300,360,420][x],g=[0,.24,.3,.3,.36,.42][x],h=l+x):(o=[0,600,1033,2339,2340][x],f=[0,260,286,306,312][x],g=[0,.26,.286,.3,.306,.34][x],h="tilde"+x)}var y=new Rf(h),v=new i0([y],{width:"100%",height:mr(g),viewBox:"0 0 "+o+" "+f,preserveAspectRatio:"none"});return{span:ft.makeSvgSpan([],[v],r),minWidth:0,height:g}}else{var T=[],k=Pue[l],[b,N,E]=k,P=E/1e3,M=b.length,j,A;if(M===1){var O=k[3];j=["hide-tail"],A=[O]}else if(M===2)j=["halfarrow-left","halfarrow-right"],A=["xMinYMin","xMaxYMin"];else if(M===3)j=["brace-left","brace-center","brace-right"],A=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+M+" children.");for(var L=0;L<M;L++){var q=new Rf(b[L]),Q=new i0([q],{width:"400em",height:mr(P),viewBox:"0 0 "+o+" "+E,preserveAspectRatio:A[L]+" slice"}),ae=ft.makeSvgSpan([j[L]],[Q],r);if(M===1)return{span:ae,minWidth:N,height:P};ae.style.height=mr(P),T.push(ae)}return{span:ft.makeSpan(["stretchy"],T,r),minWidth:N,height:P}}}var{span:s,minWidth:a,height:i}=n();return s.height=i,s.style.height=mr(i),a>0&&(s.style.minWidth=mr(a)),s},Due=function(t,r,n,s,a){var i,o=t.height+t.depth+n+s;if(/fbox|color|angl/.test(r)){if(i=ft.makeSpan(["stretchy",r],[],a),r==="fbox"){var l=a.color&&a.getColor();l&&(i.style.borderColor=l)}}else{var u=[];/^[bx]cancel$/.test(r)&&u.push(new j8({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&u.push(new j8({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var d=new i0(u,{width:"100%",height:mr(o)});i=ft.makeSvgSpan([],[d],a)}return i.height=o,i.style.height=mr(o),i},l0={encloseSpan:Due,mathMLnode:jue,svgSpan:Fue};function yn(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function PC(e){var t=J_(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function J_(e){return e&&(e.type==="atom"||aue.hasOwnProperty(e.type))?e:null}var MC=(e,t)=>{var r,n,s;e&&e.type==="supsub"?(n=yn(e.base,"accent"),r=n.base,e.base=r,s=nue(In(e,t)),e.base=n):(n=yn(e,"accent"),r=n.base);var a=In(r,t.havingCrampedStyle()),i=n.isShifty&&Un.isCharacterBox(r),o=0;if(i){var l=Un.getBaseElem(r),u=In(l,t.havingCrampedStyle());o=pF(u).skew}var d=n.label==="\\c",f=d?a.height+a.depth:Math.min(a.height,t.fontMetrics().xHeight),h;if(n.isStretchy)h=l0.svgSpan(n,t),h=ft.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:h,wrapperClasses:["svg-align"],wrapperStyle:o>0?{width:"calc(100% - "+mr(2*o)+")",marginLeft:mr(2*o)}:void 0}]},t);else{var g,x;n.label==="\\vec"?(g=ft.staticSvg("vec",t),x=ft.svgData.vec[1]):(g=ft.makeOrd({mode:n.mode,text:n.label},t,"textord"),g=pF(g),g.italic=0,x=g.width,d&&(f+=g.depth)),h=ft.makeSpan(["accent-body"],[g]);var y=n.label==="\\textcircled";y&&(h.classes.push("accent-full"),f=a.height);var v=o;y||(v-=x/2),h.style.left=mr(v),n.label==="\\textcircled"&&(h.style.top=".2em"),h=ft.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-f},{type:"elem",elem:h}]},t)}var T=ft.makeSpan(["mord","accent"],[h],t);return s?(s.children[0]=T,s.height=Math.max(T.height,s.height),s.classes[0]="mord",s):T},vW=(e,t)=>{var r=e.isStretchy?l0.mathMLnode(e.label):new tr.MathNode("mo",[wc(e.label,e.mode)]),n=new tr.MathNode("mover",[xs(e.base,t),r]);return n.setAttribute("accent","true"),n},Oue=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(e=>"\\"+e).join("|"));vr({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var r=E4(t[0]),n=!Oue.test(e.funcName),s=!n||e.funcName==="\\widehat"||e.funcName==="\\widetilde"||e.funcName==="\\widecheck";return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:n,isShifty:s,base:r}},htmlBuilder:MC,mathmlBuilder:vW});vr({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var r=t[0],n=e.parser.mode;return n==="math"&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:e.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:MC,mathmlBuilder:vW});vr({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0];return{type:"accentUnder",mode:r.mode,label:n,base:s}},htmlBuilder:(e,t)=>{var r=In(e.base,t),n=l0.svgSpan(e,t),s=e.label==="\\utilde"?.12:0,a=ft.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:s},{type:"elem",elem:r}]},t);return ft.makeSpan(["mord","accentunder"],[a],t)},mathmlBuilder:(e,t)=>{var r=l0.mathMLnode(e.label),n=new tr.MathNode("munder",[xs(e.base,t),r]);return n.setAttribute("accentunder","true"),n}});var ib=e=>{var t=new tr.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};vr({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n,funcName:s}=e;return{type:"xArrow",mode:n.mode,label:s,body:t[0],below:r[0]}},htmlBuilder(e,t){var r=t.style,n=t.havingStyle(r.sup()),s=ft.wrapFragment(In(e.body,n,t),t),a=e.label.slice(0,2)==="\\x"?"x":"cd";s.classes.push(a+"-arrow-pad");var i;e.below&&(n=t.havingStyle(r.sub()),i=ft.wrapFragment(In(e.below,n,t),t),i.classes.push(a+"-arrow-pad"));var o=l0.svgSpan(e,t),l=-t.fontMetrics().axisHeight+.5*o.height,u=-t.fontMetrics().axisHeight-.5*o.height-.111;(s.depth>.25||e.label==="\\xleftequilibrium")&&(u-=s.depth);var d;if(i){var f=-t.fontMetrics().axisHeight+i.height+.5*o.height+.111;d=ft.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:o,shift:l},{type:"elem",elem:i,shift:f}]},t)}else d=ft.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:o,shift:l}]},t);return d.children[0].children[0].children[1].classes.push("svg-align"),ft.makeSpan(["mrel","x-arrow"],[d],t)},mathmlBuilder(e,t){var r=l0.mathMLnode(e.label);r.setAttribute("minsize",e.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(e.body){var s=ib(xs(e.body,t));if(e.below){var a=ib(xs(e.below,t));n=new tr.MathNode("munderover",[r,a,s])}else n=new tr.MathNode("mover",[r,s])}else if(e.below){var i=ib(xs(e.below,t));n=new tr.MathNode("munder",[r,i])}else n=ib(),n=new tr.MathNode("mover",[r,n]);return n}});var Iue=ft.makeSpan;function wW(e,t){var r=ni(e.body,t,!0);return Iue([e.mclass],r,t)}function bW(e,t){var r,n=hl(e.body,t);return e.mclass==="minner"?r=new tr.MathNode("mpadded",n):e.mclass==="mord"?e.isCharacterBox?(r=n[0],r.type="mi"):r=new tr.MathNode("mi",n):(e.isCharacterBox?(r=n[0],r.type="mo"):r=new tr.MathNode("mo",n),e.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):e.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):e.mclass==="mopen"||e.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):e.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}vr({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:Ea(s),isCharacterBox:Un.isCharacterBox(s)}},htmlBuilder:wW,mathmlBuilder:bW});var Q_=e=>{var t=e.type==="ordgroup"&&e.body.length?e.body[0]:e;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"};vr({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:r}=e;return{type:"mclass",mode:r.mode,mclass:Q_(t[0]),body:Ea(t[1]),isCharacterBox:Un.isCharacterBox(t[1])}}});vr({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var{parser:r,funcName:n}=e,s=t[1],a=t[0],i;n!=="\\stackrel"?i=Q_(s):i="mrel";var o={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:Ea(s)},l={type:"supsub",mode:a.mode,base:o,sup:n==="\\underset"?null:a,sub:n==="\\underset"?a:null};return{type:"mclass",mode:r.mode,mclass:i,body:[l],isCharacterBox:Un.isCharacterBox(l)}},htmlBuilder:wW,mathmlBuilder:bW});vr({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"pmb",mode:r.mode,mclass:Q_(t[0]),body:Ea(t[0])}},htmlBuilder(e,t){var r=ni(e.body,t,!0),n=ft.makeSpan([e.mclass],r,t);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(e,t){var r=hl(e.body,t),n=new tr.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var Rue={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},kF=()=>({type:"styling",body:[],mode:"math",style:"display"}),TF=e=>e.type==="textord"&&e.text==="@",Lue=(e,t)=>(e.type==="mathord"||e.type==="atom")&&e.text===t;function Bue(e,t,r){var n=Rue[e];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{var s=r.callFunction("\\\\cdleft",[t[0]],[]),a={type:"atom",text:n,mode:"math",family:"rel"},i=r.callFunction("\\Big",[a],[]),o=r.callFunction("\\\\cdright",[t[1]],[]),l={type:"ordgroup",mode:"math",body:[s,i,o]};return r.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var u={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[u],[])}default:return{type:"textord",text:" ",mode:"math"}}}function $ue(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var r=e.fetch().text;if(r==="&"||r==="\\\\")e.consume();else if(r==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new rr("Expected \\\\ or \\cr or \\end",e.nextToken)}for(var n=[],s=[n],a=0;a<t.length;a++){for(var i=t[a],o=kF(),l=0;l<i.length;l++)if(!TF(i[l]))o.body.push(i[l]);else{n.push(o),l+=1;var u=PC(i[l]).text,d=new Array(2);if(d[0]={type:"ordgroup",mode:"math",body:[]},d[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(u)>-1))if("<>AV".indexOf(u)>-1)for(var f=0;f<2;f++){for(var h=!0,g=l+1;g<i.length;g++){if(Lue(i[g],u)){h=!1,l=g;break}if(TF(i[g]))throw new rr("Missing a "+u+" character to complete a CD arrow.",i[g]);d[f].body.push(i[g])}if(h)throw new rr("Missing a "+u+" character to complete a CD arrow.",i[l])}else throw new rr('Expected one of "<>AV=|." after @',i[l]);var x=Bue(u,d,e),y={type:"styling",body:[x],mode:"math",style:"display"};n.push(y),o=kF()}a%2===0?n.push(o):n.shift(),n=[],s.push(n)}e.gullet.endGroup(),e.gullet.endGroup();var v=new Array(s[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:s,arraystretch:1,addJot:!0,rowGaps:[null],cols:v,colSeparationType:"CD",hLinesBeforeRow:new Array(s.length+1).fill([])}}vr({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:t[0]}},htmlBuilder(e,t){var r=t.havingStyle(t.style.sup()),n=ft.wrapFragment(In(e.label,r,t),t);return n.classes.push("cd-label-"+e.side),n.style.bottom=mr(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(e,t){var r=new tr.MathNode("mrow",[xs(e.label,t)]);return r=new tr.MathNode("mpadded",[r]),r.setAttribute("width","0"),e.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new tr.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});vr({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:r}=e;return{type:"cdlabelparent",mode:r.mode,fragment:t[0]}},htmlBuilder(e,t){var r=ft.wrapFragment(In(e.fragment,t),t);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(e,t){return new tr.MathNode("mrow",[xs(e.fragment,t)])}});vr({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:r}=e,n=yn(t[0],"ordgroup"),s=n.body,a="",i=0;i<s.length;i++){var o=yn(s[i],"textord");a+=o.text}var l=parseInt(a),u;if(isNaN(l))throw new rr("\\@char has non-numeric argument "+a);if(l<0||l>=1114111)throw new rr("\\@char with invalid code point "+a);return l<=65535?u=String.fromCharCode(l):(l-=65536,u=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:r.mode,text:u}}});var _W=(e,t)=>{var r=ni(e.body,t.withColor(e.color),!1);return ft.makeFragment(r)},SW=(e,t)=>{var r=hl(e.body,t.withColor(e.color)),n=new tr.MathNode("mstyle",r);return n.setAttribute("mathcolor",e.color),n};vr({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:r}=e,n=yn(t[0],"color-token").color,s=t[1];return{type:"color",mode:r.mode,color:n,body:Ea(s)}},htmlBuilder:_W,mathmlBuilder:SW});vr({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:r,breakOnTokenText:n}=e,s=yn(t[0],"color-token").color;r.gullet.macros.set("\\current@color",s);var a=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:s,body:a}},htmlBuilder:_W,mathmlBuilder:SW});vr({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,r){var{parser:n}=e,s=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,a=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:a,size:s&&yn(s,"size").value}},htmlBuilder(e,t){var r=ft.makeSpan(["mspace"],[],t);return e.newLine&&(r.classes.push("newline"),e.size&&(r.style.marginTop=mr(Vs(e.size,t)))),r},mathmlBuilder(e,t){var r=new tr.MathNode("mspace");return e.newLine&&(r.setAttribute("linebreak","newline"),e.size&&r.setAttribute("height",mr(Vs(e.size,t)))),r}});var D8={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},kW=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new rr("Expected a control sequence",e);return t},zue=e=>{var t=e.gullet.popToken();return t.text==="="&&(t=e.gullet.popToken(),t.text===" "&&(t=e.gullet.popToken())),t},TW=(e,t,r,n)=>{var s=e.gullet.macros.get(r.text);s==null&&(r.noexpand=!0,s={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,s,n)};vr({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:r}=e;t.consumeSpaces();var n=t.fetch();if(D8[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=D8[n.text]),yn(t.parseFunction(),"internal");throw new rr("Invalid token after macro prefix",n)}});vr({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=t.gullet.popToken(),s=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new rr("Expected a control sequence",n);for(var a=0,i,o=[[]];t.gullet.future().text!=="{";)if(n=t.gullet.popToken(),n.text==="#"){if(t.gullet.future().text==="{"){i=t.gullet.future(),o[a].push("{");break}if(n=t.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new rr('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==a+1)throw new rr('Argument number "'+n.text+'" out of order');a++,o.push([])}else{if(n.text==="EOF")throw new rr("Expected a macro definition");o[a].push(n.text)}var{tokens:l}=t.gullet.consumeArg();return i&&l.unshift(i),(r==="\\edef"||r==="\\xdef")&&(l=t.gullet.expandTokens(l),l.reverse()),t.gullet.macros.set(s,{tokens:l,numArgs:a,delimiters:o},r===D8[r]),{type:"internal",mode:t.mode}}});vr({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=kW(t.gullet.popToken());t.gullet.consumeSpaces();var s=zue(t);return TW(t,n,s,r==="\\\\globallet"),{type:"internal",mode:t.mode}}});vr({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=kW(t.gullet.popToken()),s=t.gullet.popToken(),a=t.gullet.popToken();return TW(t,n,a,r==="\\\\globalfuture"),t.gullet.pushToken(a),t.gullet.pushToken(s),{type:"internal",mode:t.mode}}});var jy=function(t,r,n){var s=ks.math[t]&&ks.math[t].replace,a=CC(s||t,r,n);if(!a)throw new Error("Unsupported symbol "+t+" and font size "+r+".");return a},FC=function(t,r,n,s){var a=n.havingBaseStyle(r),i=ft.makeSpan(s.concat(a.sizingClasses(n)),[t],n),o=a.sizeMultiplier/n.sizeMultiplier;return i.height*=o,i.depth*=o,i.maxFontSize=a.sizeMultiplier,i},CW=function(t,r,n){var s=r.havingBaseStyle(n),a=(1-r.sizeMultiplier/s.sizeMultiplier)*r.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=mr(a),t.height-=a,t.depth+=a},Uue=function(t,r,n,s,a,i){var o=ft.makeSymbol(t,"Main-Regular",a,s),l=FC(o,r,s,i);return n&&CW(l,s,r),l},Wue=function(t,r,n,s){return ft.makeSymbol(t,"Size"+r+"-Regular",n,s)},EW=function(t,r,n,s,a,i){var o=Wue(t,r,a,s),l=FC(ft.makeSpan(["delimsizing","size"+r],[o],s),Vr.TEXT,s,i);return n&&CW(l,s,Vr.TEXT),l},SS=function(t,r,n){var s;r==="Size1-Regular"?s="delim-size1":s="delim-size4";var a=ft.makeSpan(["delimsizinginner",s],[ft.makeSpan([],[ft.makeSymbol(t,r,n)])]);return{type:"elem",elem:a}},kS=function(t,r,n){var s=$u["Size4-Regular"][t.charCodeAt(0)]?$u["Size4-Regular"][t.charCodeAt(0)][4]:$u["Size1-Regular"][t.charCodeAt(0)][4],a=new Rf("inner",Kce(t,Math.round(1e3*r))),i=new i0([a],{width:mr(s),height:mr(r),style:"width:"+mr(s),viewBox:"0 0 "+1e3*s+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),o=ft.makeSvgSpan([],[i],n);return o.height=r,o.style.height=mr(r),o.style.width=mr(s),{type:"elem",elem:o}},O8=.008,ob={type:"kern",size:-1*O8},Hue=["|","\\lvert","\\rvert","\\vert"],Gue=["\\|","\\lVert","\\rVert","\\Vert"],NW=function(t,r,n,s,a,i){var o,l,u,d,f="",h=0;o=u=d=t,l=null;var g="Size1-Regular";t==="\\uparrow"?u=d="":t==="\\Uparrow"?u=d="":t==="\\downarrow"?o=u="":t==="\\Downarrow"?o=u="":t==="\\updownarrow"?(o="\\uparrow",u="",d="\\downarrow"):t==="\\Updownarrow"?(o="\\Uparrow",u="",d="\\Downarrow"):Hue.includes(t)?(u="",f="vert",h=333):Gue.includes(t)?(u="",f="doublevert",h=556):t==="["||t==="\\lbrack"?(o="",u="",d="",g="Size4-Regular",f="lbrack",h=667):t==="]"||t==="\\rbrack"?(o="",u="",d="",g="Size4-Regular",f="rbrack",h=667):t==="\\lfloor"||t===""?(u=o="",d="",g="Size4-Regular",f="lfloor",h=667):t==="\\lceil"||t===""?(o="",u=d="",g="Size4-Regular",f="lceil",h=667):t==="\\rfloor"||t===""?(u=o="",d="",g="Size4-Regular",f="rfloor",h=667):t==="\\rceil"||t===""?(o="",u=d="",g="Size4-Regular",f="rceil",h=667):t==="("||t==="\\lparen"?(o="",u="",d="",g="Size4-Regular",f="lparen",h=875):t===")"||t==="\\rparen"?(o="",u="",d="",g="Size4-Regular",f="rparen",h=875):t==="\\{"||t==="\\lbrace"?(o="",l="",d="",u="",g="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(o="",l="",d="",u="",g="Size4-Regular"):t==="\\lgroup"||t===""?(o="",d="",u="",g="Size4-Regular"):t==="\\rgroup"||t===""?(o="",d="",u="",g="Size4-Regular"):t==="\\lmoustache"||t===""?(o="",d="",u="",g="Size4-Regular"):(t==="\\rmoustache"||t==="")&&(o="",d="",u="",g="Size4-Regular");var x=jy(o,g,a),y=x.height+x.depth,v=jy(u,g,a),T=v.height+v.depth,k=jy(d,g,a),b=k.height+k.depth,N=0,E=1;if(l!==null){var P=jy(l,g,a);N=P.height+P.depth,E=2}var M=y+b+N,j=Math.max(0,Math.ceil((r-M)/(E*T))),A=M+j*E*T,O=s.fontMetrics().axisHeight;n&&(O*=s.sizeMultiplier);var L=A/2-O,q=[];if(f.length>0){var Q=A-y-b,ae=Math.round(A*1e3),te=Yce(f,Math.round(Q*1e3)),ne=new Rf(f,te),B=(h/1e3).toFixed(3)+"em",V=(ae/1e3).toFixed(3)+"em",R=new i0([ne],{width:B,height:V,viewBox:"0 0 "+h+" "+ae}),H=ft.makeSvgSpan([],[R],s);H.height=ae/1e3,H.style.width=B,H.style.height=V,q.push({type:"elem",elem:H})}else{if(q.push(SS(d,g,a)),q.push(ob),l===null){var U=A-y-b+2*O8;q.push(kS(u,U,s))}else{var I=(A-y-b-N)/2+2*O8;q.push(kS(u,I,s)),q.push(ob),q.push(SS(l,g,a)),q.push(ob),q.push(kS(u,I,s))}q.push(ob),q.push(SS(o,g,a))}var W=s.havingBaseStyle(Vr.TEXT),K=ft.makeVList({positionType:"bottom",positionData:L,children:q},W);return FC(ft.makeSpan(["delimsizing","mult"],[K],W),Vr.TEXT,s,i)},TS=80,CS=.08,ES=function(t,r,n,s,a){var i=qce(t,s,n),o=new Rf(t,i),l=new i0([o],{width:"400em",height:mr(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return ft.makeSvgSpan(["hide-tail"],[l],a)},Vue=function(t,r){var n=r.havingBaseSizing(),s=MW("\\surd",t*n.sizeMultiplier,PW,n),a=n.sizeMultiplier,i=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),o,l=0,u=0,d=0,f;return s.type==="small"?(d=1e3+1e3*i+TS,t<1?a=1:t<1.4&&(a=.7),l=(1+i+CS)/a,u=(1+i)/a,o=ES("sqrtMain",l,d,i,r),o.style.minWidth="0.853em",f=.833/a):s.type==="large"?(d=(1e3+TS)*qy[s.size],u=(qy[s.size]+i)/a,l=(qy[s.size]+i+CS)/a,o=ES("sqrtSize"+s.size,l,d,i,r),o.style.minWidth="1.02em",f=1/a):(l=t+i+CS,u=t+i,d=Math.floor(1e3*t+i)+TS,o=ES("sqrtTall",l,d,i,r),o.style.minWidth="0.742em",f=1.056),o.height=u,o.style.height=mr(l),{span:o,advanceWidth:f,ruleWidth:(r.fontMetrics().sqrtRuleThickness+i)*a}},AW=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],que=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],jW=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],qy=[0,1.2,1.8,2.4,3],Kue=function(t,r,n,s,a){if(t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle"),AW.includes(t)||jW.includes(t))return EW(t,r,!1,n,s,a);if(que.includes(t))return NW(t,qy[r],!1,n,s,a);throw new rr("Illegal delimiter: '"+t+"'")},Yue=[{type:"small",style:Vr.SCRIPTSCRIPT},{type:"small",style:Vr.SCRIPT},{type:"small",style:Vr.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Xue=[{type:"small",style:Vr.SCRIPTSCRIPT},{type:"small",style:Vr.SCRIPT},{type:"small",style:Vr.TEXT},{type:"stack"}],PW=[{type:"small",style:Vr.SCRIPTSCRIPT},{type:"small",style:Vr.SCRIPT},{type:"small",style:Vr.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Jue=function(t){if(t.type==="small")return"Main-Regular";if(t.type==="large")return"Size"+t.size+"-Regular";if(t.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},MW=function(t,r,n,s){for(var a=Math.min(2,3-s.style.size),i=a;i<n.length&&n[i].type!=="stack";i++){var o=jy(t,Jue(n[i]),"math"),l=o.height+o.depth;if(n[i].type==="small"){var u=s.havingBaseStyle(n[i].style);l*=u.sizeMultiplier}if(l>r)return n[i]}return n[n.length-1]},FW=function(t,r,n,s,a,i){t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle");var o;jW.includes(t)?o=Yue:AW.includes(t)?o=PW:o=Xue;var l=MW(t,r,o,s);return l.type==="small"?Uue(t,l.style,n,s,a,i):l.type==="large"?EW(t,l.size,n,s,a,i):NW(t,r,n,s,a,i)},Que=function(t,r,n,s,a,i){var o=s.fontMetrics().axisHeight*s.sizeMultiplier,l=901,u=5/s.fontMetrics().ptPerEm,d=Math.max(r-o,n+o),f=Math.max(d/500*l,2*d-u);return FW(t,f,!0,s,a,i)},Xd={sqrtImage:Vue,sizedDelim:Kue,sizeToMaxHeight:qy,customSizedDelim:FW,leftRightDelim:Que},CF={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Zue=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Z_(e,t){var r=J_(e);if(r&&Zue.includes(r.text))return r;throw r?new rr("Invalid delimiter '"+r.text+"' after '"+t.funcName+"'",e):new rr("Invalid delimiter type '"+e.type+"'",e)}vr({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var r=Z_(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:CF[e.funcName].size,mclass:CF[e.funcName].mclass,delim:r.text}},htmlBuilder:(e,t)=>e.delim==="."?ft.makeSpan([e.mclass]):Xd.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];e.delim!=="."&&t.push(wc(e.delim,e.mode));var r=new tr.MathNode("mo",t);e.mclass==="mopen"||e.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=mr(Xd.sizeToMaxHeight[e.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function EF(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}vr({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=e.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new rr("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:Z_(t[0],e).text,color:r}}});vr({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=Z_(t[0],e),n=e.parser;++n.leftrightDepth;var s=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var a=yn(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:s,left:r.text,right:a.delim,rightColor:a.color}},htmlBuilder:(e,t)=>{EF(e);for(var r=ni(e.body,t,!0,["mopen","mclose"]),n=0,s=0,a=!1,i=0;i<r.length;i++)r[i].isMiddle?a=!0:(n=Math.max(r[i].height,n),s=Math.max(r[i].depth,s));n*=t.sizeMultiplier,s*=t.sizeMultiplier;var o;if(e.left==="."?o=Sv(t,["mopen"]):o=Xd.leftRightDelim(e.left,n,s,t,e.mode,["mopen"]),r.unshift(o),a)for(var l=1;l<r.length;l++){var u=r[l],d=u.isMiddle;d&&(r[l]=Xd.leftRightDelim(d.delim,n,s,d.options,e.mode,[]))}var f;if(e.right===".")f=Sv(t,["mclose"]);else{var h=e.rightColor?t.withColor(e.rightColor):t;f=Xd.leftRightDelim(e.right,n,s,h,e.mode,["mclose"])}return r.push(f),ft.makeSpan(["minner"],r,t)},mathmlBuilder:(e,t)=>{EF(e);var r=hl(e.body,t);if(e.left!=="."){var n=new tr.MathNode("mo",[wc(e.left,e.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(e.right!=="."){var s=new tr.MathNode("mo",[wc(e.right,e.mode)]);s.setAttribute("fence","true"),e.rightColor&&s.setAttribute("mathcolor",e.rightColor),r.push(s)}return AC(r)}});vr({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=Z_(t[0],e);if(!e.parser.leftrightDepth)throw new rr("\\middle without preceding \\left",r);return{type:"middle",mode:e.parser.mode,delim:r.text}},htmlBuilder:(e,t)=>{var r;if(e.delim===".")r=Sv(t,[]);else{r=Xd.sizedDelim(e.delim,1,t,e.mode,[]);var n={delim:e.delim,options:t};r.isMiddle=n}return r},mathmlBuilder:(e,t)=>{var r=e.delim==="\\vert"||e.delim==="|"?wc("|","text"):wc(e.delim,e.mode),n=new tr.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var DC=(e,t)=>{var r=ft.wrapFragment(In(e.body,t),t),n=e.label.slice(1),s=t.sizeMultiplier,a,i=0,o=Un.isCharacterBox(e.body);if(n==="sout")a=ft.makeSpan(["stretchy","sout"]),a.height=t.fontMetrics().defaultRuleThickness/s,i=-.5*t.fontMetrics().xHeight;else if(n==="phase"){var l=Vs({number:.6,unit:"pt"},t),u=Vs({number:.35,unit:"ex"},t),d=t.havingBaseSizing();s=s/d.sizeMultiplier;var f=r.height+r.depth+l+u;r.style.paddingLeft=mr(f/2+l);var h=Math.floor(1e3*f*s),g=Gce(h),x=new i0([new Rf("phase",g)],{width:"400em",height:mr(h/1e3),viewBox:"0 0 400000 "+h,preserveAspectRatio:"xMinYMin slice"});a=ft.makeSvgSpan(["hide-tail"],[x],t),a.style.height=mr(f),i=r.depth+l+u}else{/cancel/.test(n)?o||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var y=0,v=0,T=0;/box/.test(n)?(T=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),y=t.fontMetrics().fboxsep+(n==="colorbox"?0:T),v=y):n==="angl"?(T=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness),y=4*T,v=Math.max(0,.25-r.depth)):(y=o?.2:0,v=y),a=l0.encloseSpan(r,n,y,v,t),/fbox|boxed|fcolorbox/.test(n)?(a.style.borderStyle="solid",a.style.borderWidth=mr(T)):n==="angl"&&T!==.049&&(a.style.borderTopWidth=mr(T),a.style.borderRightWidth=mr(T)),i=r.depth+v,e.backgroundColor&&(a.style.backgroundColor=e.backgroundColor,e.borderColor&&(a.style.borderColor=e.borderColor))}var k;if(e.backgroundColor)k=ft.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:i},{type:"elem",elem:r,shift:0}]},t);else{var b=/cancel|phase/.test(n)?["svg-align"]:[];k=ft.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:a,shift:i,wrapperClasses:b}]},t)}return/cancel/.test(n)&&(k.height=r.height,k.depth=r.depth),/cancel/.test(n)&&!o?ft.makeSpan(["mord","cancel-lap"],[k],t):ft.makeSpan(["mord"],[k],t)},OC=(e,t)=>{var r=0,n=new tr.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[xs(e.body,t)]);switch(e.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),e.label==="\\fcolorbox"){var s=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);n.setAttribute("style","border: "+s+"em solid "+String(e.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return e.backgroundColor&&n.setAttribute("mathbackground",e.backgroundColor),n};vr({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,r){var{parser:n,funcName:s}=e,a=yn(t[0],"color-token").color,i=t[1];return{type:"enclose",mode:n.mode,label:s,backgroundColor:a,body:i}},htmlBuilder:DC,mathmlBuilder:OC});vr({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,r){var{parser:n,funcName:s}=e,a=yn(t[0],"color-token").color,i=yn(t[1],"color-token").color,o=t[2];return{type:"enclose",mode:n.mode,label:s,backgroundColor:i,borderColor:a,body:o}},htmlBuilder:DC,mathmlBuilder:OC});vr({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\fbox",body:t[0]}}});vr({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];return{type:"enclose",mode:r.mode,label:n,body:s}},htmlBuilder:DC,mathmlBuilder:OC});vr({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\angl",body:t[0]}}});var DW={};function ed(e){for(var{type:t,names:r,props:n,handler:s,htmlBuilder:a,mathmlBuilder:i}=e,o={type:t,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:s},l=0;l<r.length;++l)DW[r[l]]=o;a&&(T4[t]=a),i&&(C4[t]=i)}var OW={};function we(e,t){OW[e]=t}function NF(e){var t=[];e.consumeSpaces();var r=e.fetch().text;for(r==="\\relax"&&(e.consume(),e.consumeSpaces(),r=e.fetch().text);r==="\\hline"||r==="\\hdashline";)e.consume(),t.push(r==="\\hdashline"),e.consumeSpaces(),r=e.fetch().text;return t}var e3=e=>{var t=e.parser.settings;if(!t.displayMode)throw new rr("{"+e.envName+"} can be used only in display mode.")};function IC(e){if(e.indexOf("ed")===-1)return e.indexOf("*")===-1}function Jf(e,t,r){var{hskipBeforeAndAfter:n,addJot:s,cols:a,arraystretch:i,colSeparationType:o,autoTag:l,singleRow:u,emptySingleRow:d,maxNumCols:f,leqno:h}=t;if(e.gullet.beginGroup(),u||e.gullet.macros.set("\\cr","\\\\\\relax"),!i){var g=e.gullet.expandMacroAsText("\\arraystretch");if(g==null)i=1;else if(i=parseFloat(g),!i||i<0)throw new rr("Invalid \\arraystretch: "+g)}e.gullet.beginGroup();var x=[],y=[x],v=[],T=[],k=l!=null?[]:void 0;function b(){l&&e.gullet.macros.set("\\@eqnsw","1",!0)}function N(){k&&(e.gullet.macros.get("\\df@tag")?(k.push(e.subparse([new Dl("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):k.push(!!l&&e.gullet.macros.get("\\@eqnsw")==="1"))}for(b(),T.push(NF(e));;){var E=e.parseExpression(!1,u?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),E={type:"ordgroup",mode:e.mode,body:E},r&&(E={type:"styling",mode:e.mode,style:r,body:[E]}),x.push(E);var P=e.fetch().text;if(P==="&"){if(f&&x.length===f){if(u||o)throw new rr("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else if(P==="\\end"){N(),x.length===1&&E.type==="styling"&&E.body[0].body.length===0&&(y.length>1||!d)&&y.pop(),T.length<y.length+1&&T.push([]);break}else if(P==="\\\\"){e.consume();var M=void 0;e.gullet.future().text!==" "&&(M=e.parseSizeGroup(!0)),v.push(M?M.value:null),N(),T.push(NF(e)),x=[],y.push(x),b()}else throw new rr("Expected & or \\\\ or \\cr or \\end",e.nextToken)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:s,arraystretch:i,body:y,cols:a,rowGaps:v,hskipBeforeAndAfter:n,hLinesBeforeRow:T,colSeparationType:o,tags:k,leqno:h}}function RC(e){return e.slice(0,1)==="d"?"display":"text"}var td=function(t,r){var n,s,a=t.body.length,i=t.hLinesBeforeRow,o=0,l=new Array(a),u=[],d=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),f=1/r.fontMetrics().ptPerEm,h=5*f;if(t.colSeparationType&&t.colSeparationType==="small"){var g=r.havingStyle(Vr.SCRIPT).sizeMultiplier;h=.2778*(g/r.sizeMultiplier)}var x=t.colSeparationType==="CD"?Vs({number:3,unit:"ex"},r):12*f,y=3*f,v=t.arraystretch*x,T=.7*v,k=.3*v,b=0;function N(It){for(var it=0;it<It.length;++it)it>0&&(b+=.25),u.push({pos:b,isDashed:It[it]})}for(N(i[0]),n=0;n<t.body.length;++n){var E=t.body[n],P=T,M=k;o<E.length&&(o=E.length);var j=new Array(E.length);for(s=0;s<E.length;++s){var A=In(E[s],r);M<A.depth&&(M=A.depth),P<A.height&&(P=A.height),j[s]=A}var O=t.rowGaps[n],L=0;O&&(L=Vs(O,r),L>0&&(L+=k,M<L&&(M=L),L=0)),t.addJot&&(M+=y),j.height=P,j.depth=M,b+=P,j.pos=b,b+=M+L,l[n]=j,N(i[n+1])}var q=b/2+r.fontMetrics().axisHeight,Q=t.cols||[],ae=[],te,ne,B=[];if(t.tags&&t.tags.some(It=>It))for(n=0;n<a;++n){var V=l[n],R=V.pos-q,H=t.tags[n],U=void 0;H===!0?U=ft.makeSpan(["eqn-num"],[],r):H===!1?U=ft.makeSpan([],[],r):U=ft.makeSpan([],ni(H,r,!0),r),U.depth=V.depth,U.height=V.height,B.push({type:"elem",elem:U,shift:R})}for(s=0,ne=0;s<o||ne<Q.length;++s,++ne){for(var I=Q[ne]||{},W=!0;I.type==="separator";){if(W||(te=ft.makeSpan(["arraycolsep"],[]),te.style.width=mr(r.fontMetrics().doubleRuleSep),ae.push(te)),I.separator==="|"||I.separator===":"){var K=I.separator==="|"?"solid":"dashed",Z=ft.makeSpan(["vertical-separator"],[],r);Z.style.height=mr(b),Z.style.borderRightWidth=mr(d),Z.style.borderRightStyle=K,Z.style.margin="0 "+mr(-d/2);var oe=b-q;oe&&(Z.style.verticalAlign=mr(-oe)),ae.push(Z)}else throw new rr("Invalid separator type: "+I.separator);ne++,I=Q[ne]||{},W=!1}if(!(s>=o)){var J=void 0;(s>0||t.hskipBeforeAndAfter)&&(J=Un.deflt(I.pregap,h),J!==0&&(te=ft.makeSpan(["arraycolsep"],[]),te.style.width=mr(J),ae.push(te)));var le=[];for(n=0;n<a;++n){var ue=l[n],de=ue[s];if(de){var Te=ue.pos-q;de.depth=ue.depth,de.height=ue.height,le.push({type:"elem",elem:de,shift:Te})}}le=ft.makeVList({positionType:"individualShift",children:le},r),le=ft.makeSpan(["col-align-"+(I.align||"c")],[le]),ae.push(le),(s<o-1||t.hskipBeforeAndAfter)&&(J=Un.deflt(I.postgap,h),J!==0&&(te=ft.makeSpan(["arraycolsep"],[]),te.style.width=mr(J),ae.push(te)))}}if(l=ft.makeSpan(["mtable"],ae),u.length>0){for(var ie=ft.makeLineSpan("hline",r,d),xe=ft.makeLineSpan("hdashline",r,d),Ae=[{type:"elem",elem:l,shift:0}];u.length>0;){var Me=u.pop(),Je=Me.pos-q;Me.isDashed?Ae.push({type:"elem",elem:xe,shift:Je}):Ae.push({type:"elem",elem:ie,shift:Je})}l=ft.makeVList({positionType:"individualShift",children:Ae},r)}if(B.length===0)return ft.makeSpan(["mord"],[l],r);var He=ft.makeVList({positionType:"individualShift",children:B},r);return He=ft.makeSpan(["tag"],[He],r),ft.makeFragment([l,He])},ede={c:"center ",l:"left ",r:"right "},rd=function(t,r){for(var n=[],s=new tr.MathNode("mtd",[],["mtr-glue"]),a=new tr.MathNode("mtd",[],["mml-eqn-num"]),i=0;i<t.body.length;i++){for(var o=t.body[i],l=[],u=0;u<o.length;u++)l.push(new tr.MathNode("mtd",[xs(o[u],r)]));t.tags&&t.tags[i]&&(l.unshift(s),l.push(s),t.leqno?l.unshift(a):l.push(a)),n.push(new tr.MathNode("mtr",l))}var d=new tr.MathNode("mtable",n),f=t.arraystretch===.5?.1:.16+t.arraystretch-1+(t.addJot?.09:0);d.setAttribute("rowspacing",mr(f));var h="",g="";if(t.cols&&t.cols.length>0){var x=t.cols,y="",v=!1,T=0,k=x.length;x[0].type==="separator"&&(h+="top ",T=1),x[x.length-1].type==="separator"&&(h+="bottom ",k-=1);for(var b=T;b<k;b++)x[b].type==="align"?(g+=ede[x[b].align],v&&(y+="none "),v=!0):x[b].type==="separator"&&v&&(y+=x[b].separator==="|"?"solid ":"dashed ",v=!1);d.setAttribute("columnalign",g.trim()),/[sd]/.test(y)&&d.setAttribute("columnlines",y.trim())}if(t.colSeparationType==="align"){for(var N=t.cols||[],E="",P=1;P<N.length;P++)E+=P%2?"0em ":"1em ";d.setAttribute("columnspacing",E.trim())}else t.colSeparationType==="alignat"||t.colSeparationType==="gather"?d.setAttribute("columnspacing","0em"):t.colSeparationType==="small"?d.setAttribute("columnspacing","0.2778em"):t.colSeparationType==="CD"?d.setAttribute("columnspacing","0.5em"):d.setAttribute("columnspacing","1em");var M="",j=t.hLinesBeforeRow;h+=j[0].length>0?"left ":"",h+=j[j.length-1].length>0?"right ":"";for(var A=1;A<j.length-1;A++)M+=j[A].length===0?"none ":j[A][0]?"dashed ":"solid ";return/[sd]/.test(M)&&d.setAttribute("rowlines",M.trim()),h!==""&&(d=new tr.MathNode("menclose",[d]),d.setAttribute("notation",h.trim())),t.arraystretch&&t.arraystretch<1&&(d=new tr.MathNode("mstyle",[d]),d.setAttribute("scriptlevel","1")),d},IW=function(t,r){t.envName.indexOf("ed")===-1&&e3(t);var n=[],s=t.envName.indexOf("at")>-1?"alignat":"align",a=t.envName==="split",i=Jf(t.parser,{cols:n,addJot:!0,autoTag:a?void 0:IC(t.envName),emptySingleRow:!0,colSeparationType:s,maxNumCols:a?2:void 0,leqno:t.parser.settings.leqno},"display"),o,l=0,u={type:"ordgroup",mode:t.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var d="",f=0;f<r[0].body.length;f++){var h=yn(r[0].body[f],"textord");d+=h.text}o=Number(d),l=o*2}var g=!l;i.body.forEach(function(T){for(var k=1;k<T.length;k+=2){var b=yn(T[k],"styling"),N=yn(b.body[0],"ordgroup");N.body.unshift(u)}if(g)l<T.length&&(l=T.length);else{var E=T.length/2;if(o<E)throw new rr("Too many math in a row: "+("expected "+o+", but got "+E),T[0])}});for(var x=0;x<l;++x){var y="r",v=0;x%2===1?y="l":x>0&&g&&(v=1),n[x]={type:"align",align:y,pregap:v,postgap:0}}return i.colSeparationType=g?"align":"alignat",i};ed({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var r=J_(t[0]),n=r?[t[0]]:yn(t[0],"ordgroup").body,s=n.map(function(i){var o=PC(i),l=o.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new rr("Unknown column alignment: "+l,i)}),a={cols:s,hskipBeforeAndAfter:!0,maxNumCols:s.length};return Jf(e.parser,a,RC(e.envName))},htmlBuilder:td,mathmlBuilder:rd});ed({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(e.envName.charAt(e.envName.length-1)==="*"){var s=e.parser;if(s.consumeSpaces(),s.fetch().text==="["){if(s.consume(),s.consumeSpaces(),r=s.fetch().text,"lcr".indexOf(r)===-1)throw new rr("Expected l or c or r",s.nextToken);s.consume(),s.consumeSpaces(),s.expect("]"),s.consume(),n.cols=[{type:"align",align:r}]}}var a=Jf(e.parser,n,RC(e.envName)),i=Math.max(0,...a.body.map(o=>o.length));return a.cols=new Array(i).fill({type:"align",align:r}),t?{type:"leftright",mode:e.mode,body:[a],left:t[0],right:t[1],rightColor:void 0}:a},htmlBuilder:td,mathmlBuilder:rd});ed({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t={arraystretch:.5},r=Jf(e.parser,t,"script");return r.colSeparationType="small",r},htmlBuilder:td,mathmlBuilder:rd});ed({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var r=J_(t[0]),n=r?[t[0]]:yn(t[0],"ordgroup").body,s=n.map(function(i){var o=PC(i),l=o.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new rr("Unknown column alignment: "+l,i)});if(s.length>1)throw new rr("{subarray} can contain only one column");var a={cols:s,hskipBeforeAndAfter:!1,arraystretch:.5};if(a=Jf(e.parser,a,"script"),a.body.length>0&&a.body[0].length>1)throw new rr("{subarray} can contain only one column");return a},htmlBuilder:td,mathmlBuilder:rd});ed({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=Jf(e.parser,t,RC(e.envName));return{type:"leftright",mode:e.mode,body:[r],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:td,mathmlBuilder:rd});ed({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:IW,htmlBuilder:td,mathmlBuilder:rd});ed({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){["gather","gather*"].includes(e.envName)&&e3(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:IC(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return Jf(e.parser,t,"display")},htmlBuilder:td,mathmlBuilder:rd});ed({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:IW,htmlBuilder:td,mathmlBuilder:rd});ed({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){e3(e);var t={autoTag:IC(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return Jf(e.parser,t,"display")},htmlBuilder:td,mathmlBuilder:rd});ed({type:"array",names:["CD"],props:{numArgs:0},handler(e){return e3(e),$ue(e.parser)},htmlBuilder:td,mathmlBuilder:rd});we("\\nonumber","\\gdef\\@eqnsw{0}");we("\\notag","\\nonumber");vr({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new rr(e.funcName+" valid only within array environment")}});var AF=DW;vr({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];if(s.type!=="ordgroup")throw new rr("Invalid environment name",s);for(var a="",i=0;i<s.body.length;++i)a+=yn(s.body[i],"textord").text;if(n==="\\begin"){if(!AF.hasOwnProperty(a))throw new rr("No such environment: "+a,s);var o=AF[a],{args:l,optArgs:u}=r.parseArguments("\\begin{"+a+"}",o),d={mode:r.mode,envName:a,parser:r},f=o.handler(d,l,u);r.expect("\\end",!1);var h=r.nextToken,g=yn(r.parseFunction(),"environment");if(g.name!==a)throw new rr("Mismatch: \\begin{"+a+"} matched by \\end{"+g.name+"}",h);return f}return{type:"environment",mode:r.mode,name:a,nameGroup:s}}});var RW=(e,t)=>{var r=e.font,n=t.withFont(r);return In(e.body,n)},LW=(e,t)=>{var r=e.font,n=t.withFont(r);return xs(e.body,n)},jF={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};vr({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=E4(t[0]),a=n;return a in jF&&(a=jF[a]),{type:"font",mode:r.mode,font:a.slice(1),body:s}},htmlBuilder:RW,mathmlBuilder:LW});vr({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:r}=e,n=t[0],s=Un.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:Q_(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:s}}});vr({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n,breakOnTokenText:s}=e,{mode:a}=r,i=r.parseExpression(!0,s),o="math"+n.slice(1);return{type:"font",mode:a,font:o,body:{type:"ordgroup",mode:r.mode,body:i}}},htmlBuilder:RW,mathmlBuilder:LW});var BW=(e,t)=>{var r=t;return e==="display"?r=r.id>=Vr.SCRIPT.id?r.text():Vr.DISPLAY:e==="text"&&r.size===Vr.DISPLAY.size?r=Vr.TEXT:e==="script"?r=Vr.SCRIPT:e==="scriptscript"&&(r=Vr.SCRIPTSCRIPT),r},LC=(e,t)=>{var r=BW(e.size,t.style),n=r.fracNum(),s=r.fracDen(),a;a=t.havingStyle(n);var i=In(e.numer,a,t);if(e.continued){var o=8.5/t.fontMetrics().ptPerEm,l=3.5/t.fontMetrics().ptPerEm;i.height=i.height<o?o:i.height,i.depth=i.depth<l?l:i.depth}a=t.havingStyle(s);var u=In(e.denom,a,t),d,f,h;e.hasBarLine?(e.barSize?(f=Vs(e.barSize,t),d=ft.makeLineSpan("frac-line",t,f)):d=ft.makeLineSpan("frac-line",t),f=d.height,h=d.height):(d=null,f=0,h=t.fontMetrics().defaultRuleThickness);var g,x,y;r.size===Vr.DISPLAY.size||e.size==="display"?(g=t.fontMetrics().num1,f>0?x=3*h:x=7*h,y=t.fontMetrics().denom1):(f>0?(g=t.fontMetrics().num2,x=h):(g=t.fontMetrics().num3,x=3*h),y=t.fontMetrics().denom2);var v;if(d){var k=t.fontMetrics().axisHeight;g-i.depth-(k+.5*f)<x&&(g+=x-(g-i.depth-(k+.5*f))),k-.5*f-(u.height-y)<x&&(y+=x-(k-.5*f-(u.height-y)));var b=-(k-.5*f);v=ft.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:y},{type:"elem",elem:d,shift:b},{type:"elem",elem:i,shift:-g}]},t)}else{var T=g-i.depth-(u.height-y);T<x&&(g+=.5*(x-T),y+=.5*(x-T)),v=ft.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:y},{type:"elem",elem:i,shift:-g}]},t)}a=t.havingStyle(r),v.height*=a.sizeMultiplier/t.sizeMultiplier,v.depth*=a.sizeMultiplier/t.sizeMultiplier;var N;r.size===Vr.DISPLAY.size?N=t.fontMetrics().delim1:r.size===Vr.SCRIPTSCRIPT.size?N=t.havingStyle(Vr.SCRIPT).fontMetrics().delim2:N=t.fontMetrics().delim2;var E,P;return e.leftDelim==null?E=Sv(t,["mopen"]):E=Xd.customSizedDelim(e.leftDelim,N,!0,t.havingStyle(r),e.mode,["mopen"]),e.continued?P=ft.makeSpan([]):e.rightDelim==null?P=Sv(t,["mclose"]):P=Xd.customSizedDelim(e.rightDelim,N,!0,t.havingStyle(r),e.mode,["mclose"]),ft.makeSpan(["mord"].concat(a.sizingClasses(t)),[E,ft.makeSpan(["mfrac"],[v]),P],t)},BC=(e,t)=>{var r=new tr.MathNode("mfrac",[xs(e.numer,t),xs(e.denom,t)]);if(!e.hasBarLine)r.setAttribute("linethickness","0px");else if(e.barSize){var n=Vs(e.barSize,t);r.setAttribute("linethickness",mr(n))}var s=BW(e.size,t.style);if(s.size!==t.style.size){r=new tr.MathNode("mstyle",[r]);var a=s.size===Vr.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",a),r.setAttribute("scriptlevel","0")}if(e.leftDelim!=null||e.rightDelim!=null){var i=[];if(e.leftDelim!=null){var o=new tr.MathNode("mo",[new tr.TextNode(e.leftDelim.replace("\\",""))]);o.setAttribute("fence","true"),i.push(o)}if(i.push(r),e.rightDelim!=null){var l=new tr.MathNode("mo",[new tr.TextNode(e.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),i.push(l)}return AC(i)}return r};vr({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0],a=t[1],i,o=null,l=null,u="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":i=!0;break;case"\\\\atopfrac":i=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":i=!1,o="(",l=")";break;case"\\\\bracefrac":i=!1,o="\\{",l="\\}";break;case"\\\\brackfrac":i=!1,o="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":u="display";break;case"\\tfrac":case"\\tbinom":u="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:s,denom:a,hasBarLine:i,leftDelim:o,rightDelim:l,size:u,barSize:null}},htmlBuilder:LC,mathmlBuilder:BC});vr({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0],a=t[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:s,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});vr({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var{parser:t,funcName:r,token:n}=e,s;switch(r){case"\\over":s="\\frac";break;case"\\choose":s="\\binom";break;case"\\atop":s="\\\\atopfrac";break;case"\\brace":s="\\\\bracefrac";break;case"\\brack":s="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:t.mode,replaceWith:s,token:n}}});var PF=["display","text","script","scriptscript"],MF=function(t){var r=null;return t.length>0&&(r=t,r=r==="."?null:r),r};vr({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var{parser:r}=e,n=t[4],s=t[5],a=E4(t[0]),i=a.type==="atom"&&a.family==="open"?MF(a.text):null,o=E4(t[1]),l=o.type==="atom"&&o.family==="close"?MF(o.text):null,u=yn(t[2],"size"),d,f=null;u.isBlank?d=!0:(f=u.value,d=f.number>0);var h="auto",g=t[3];if(g.type==="ordgroup"){if(g.body.length>0){var x=yn(g.body[0],"textord");h=PF[Number(x.text)]}}else g=yn(g,"textord"),h=PF[Number(g.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:s,continued:!1,hasBarLine:d,barSize:f,leftDelim:i,rightDelim:l,size:h}},htmlBuilder:LC,mathmlBuilder:BC});vr({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:r,funcName:n,token:s}=e;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:yn(t[0],"size").value,token:s}}});vr({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0],a=jce(yn(t[1],"infix").size),i=t[2],o=a.number>0;return{type:"genfrac",mode:r.mode,numer:s,denom:i,continued:!1,hasBarLine:o,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:LC,mathmlBuilder:BC});var $W=(e,t)=>{var r=t.style,n,s;e.type==="supsub"?(n=e.sup?In(e.sup,t.havingStyle(r.sup()),t):In(e.sub,t.havingStyle(r.sub()),t),s=yn(e.base,"horizBrace")):s=yn(e,"horizBrace");var a=In(s.base,t.havingBaseStyle(Vr.DISPLAY)),i=l0.svgSpan(s,t),o;if(s.isOver?(o=ft.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:i}]},t),o.children[0].children[0].children[1].classes.push("svg-align")):(o=ft.makeVList({positionType:"bottom",positionData:a.depth+.1+i.height,children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:a}]},t),o.children[0].children[0].children[0].classes.push("svg-align")),n){var l=ft.makeSpan(["mord",s.isOver?"mover":"munder"],[o],t);s.isOver?o=ft.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:n}]},t):o=ft.makeVList({positionType:"bottom",positionData:l.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:l}]},t)}return ft.makeSpan(["mord",s.isOver?"mover":"munder"],[o],t)},tde=(e,t)=>{var r=l0.mathMLnode(e.label);return new tr.MathNode(e.isOver?"mover":"munder",[xs(e.base,t),r])};vr({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:t[0]}},htmlBuilder:$W,mathmlBuilder:tde});vr({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[1],s=yn(t[0],"url").url;return r.settings.isTrusted({command:"\\href",url:s})?{type:"href",mode:r.mode,href:s,body:Ea(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var r=ni(e.body,t,!1);return ft.makeAnchor(e.href,[],r,t)},mathmlBuilder:(e,t)=>{var r=Lf(e.body,t);return r instanceof jl||(r=new jl("mrow",[r])),r.setAttribute("href",e.href),r}});vr({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=yn(t[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var s=[],a=0;a<n.length;a++){var i=n[a];i==="~"&&(i="\\textasciitilde"),s.push({type:"textord",mode:"text",text:i})}var o={type:"text",mode:r.mode,font:"\\texttt",body:s};return{type:"href",mode:r.mode,href:n,body:Ea(o)}}});vr({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:r}=e;return{type:"hbox",mode:r.mode,body:Ea(t[0])}},htmlBuilder(e,t){var r=ni(e.body,t,!1);return ft.makeFragment(r)},mathmlBuilder(e,t){return new tr.MathNode("mrow",hl(e.body,t))}});vr({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n,token:s}=e,a=yn(t[0],"raw").string,i=t[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var o,l={};switch(n){case"\\htmlClass":l.class=a,o={command:"\\htmlClass",class:a};break;case"\\htmlId":l.id=a,o={command:"\\htmlId",id:a};break;case"\\htmlStyle":l.style=a,o={command:"\\htmlStyle",style:a};break;case"\\htmlData":{for(var u=a.split(","),d=0;d<u.length;d++){var f=u[d].split("=");if(f.length!==2)throw new rr("Error parsing key-value for \\htmlData");l["data-"+f[0].trim()]=f[1].trim()}o={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(o)?{type:"html",mode:r.mode,attributes:l,body:Ea(i)}:r.formatUnsupportedCmd(n)},htmlBuilder:(e,t)=>{var r=ni(e.body,t,!1),n=["enclosing"];e.attributes.class&&n.push(...e.attributes.class.trim().split(/\s+/));var s=ft.makeSpan(n,r,t);for(var a in e.attributes)a!=="class"&&e.attributes.hasOwnProperty(a)&&s.setAttribute(a,e.attributes[a]);return s},mathmlBuilder:(e,t)=>Lf(e.body,t)});vr({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"htmlmathml",mode:r.mode,html:Ea(t[0]),mathml:Ea(t[1])}},htmlBuilder:(e,t)=>{var r=ni(e.html,t,!1);return ft.makeFragment(r)},mathmlBuilder:(e,t)=>Lf(e.mathml,t)});var NS=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!r)throw new rr("Invalid size: '"+t+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!aW(n))throw new rr("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};vr({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,r)=>{var{parser:n}=e,s={number:0,unit:"em"},a={number:.9,unit:"em"},i={number:0,unit:"em"},o="";if(r[0])for(var l=yn(r[0],"raw").string,u=l.split(","),d=0;d<u.length;d++){var f=u[d].split("=");if(f.length===2){var h=f[1].trim();switch(f[0].trim()){case"alt":o=h;break;case"width":s=NS(h);break;case"height":a=NS(h);break;case"totalheight":i=NS(h);break;default:throw new rr("Invalid key: '"+f[0]+"' in \\includegraphics.")}}}var g=yn(t[0],"url").url;return o===""&&(o=g,o=o.replace(/^.*[\\/]/,""),o=o.substring(0,o.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:g})?{type:"includegraphics",mode:n.mode,alt:o,width:s,height:a,totalheight:i,src:g}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var r=Vs(e.height,t),n=0;e.totalheight.number>0&&(n=Vs(e.totalheight,t)-r);var s=0;e.width.number>0&&(s=Vs(e.width,t));var a={height:mr(r+n)};s>0&&(a.width=mr(s)),n>0&&(a.verticalAlign=mr(-n));var i=new tue(e.src,e.alt,a);return i.height=r,i.depth=n,i},mathmlBuilder:(e,t)=>{var r=new tr.MathNode("mglyph",[]);r.setAttribute("alt",e.alt);var n=Vs(e.height,t),s=0;if(e.totalheight.number>0&&(s=Vs(e.totalheight,t)-n,r.setAttribute("valign",mr(-s))),r.setAttribute("height",mr(n+s)),e.width.number>0){var a=Vs(e.width,t);r.setAttribute("width",mr(a))}return r.setAttribute("src",e.src),r}});vr({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,s=yn(t[0],"size");if(r.settings.strict){var a=n[1]==="m",i=s.value.unit==="mu";a?(i||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+s.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):i&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:s.value}},htmlBuilder(e,t){return ft.makeGlue(e.dimension,t)},mathmlBuilder(e,t){var r=Vs(e.dimension,t);return new tr.SpaceNode(r)}});vr({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:s}},htmlBuilder:(e,t)=>{var r;e.alignment==="clap"?(r=ft.makeSpan([],[In(e.body,t)]),r=ft.makeSpan(["inner"],[r],t)):r=ft.makeSpan(["inner"],[In(e.body,t)]);var n=ft.makeSpan(["fix"],[]),s=ft.makeSpan([e.alignment],[r,n],t),a=ft.makeSpan(["strut"]);return a.style.height=mr(s.height+s.depth),s.depth&&(a.style.verticalAlign=mr(-s.depth)),s.children.unshift(a),s=ft.makeSpan(["thinbox"],[s],t),ft.makeSpan(["mord","vbox"],[s],t)},mathmlBuilder:(e,t)=>{var r=new tr.MathNode("mpadded",[xs(e.body,t)]);if(e.alignment!=="rlap"){var n=e.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});vr({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:r,parser:n}=e,s=n.mode;n.switchMode("math");var a=r==="\\("?"\\)":"$",i=n.parseExpression(!1,a);return n.expect(a),n.switchMode(s),{type:"styling",mode:n.mode,style:"text",body:i}}});vr({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new rr("Mismatched "+e.funcName)}});var FF=(e,t)=>{switch(t.style.size){case Vr.DISPLAY.size:return e.display;case Vr.TEXT.size:return e.text;case Vr.SCRIPT.size:return e.script;case Vr.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};vr({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"mathchoice",mode:r.mode,display:Ea(t[0]),text:Ea(t[1]),script:Ea(t[2]),scriptscript:Ea(t[3])}},htmlBuilder:(e,t)=>{var r=FF(e,t),n=ni(r,t,!1);return ft.makeFragment(n)},mathmlBuilder:(e,t)=>{var r=FF(e,t);return Lf(r,t)}});var zW=(e,t,r,n,s,a,i)=>{e=ft.makeSpan([],[e]);var o=r&&Un.isCharacterBox(r),l,u;if(t){var d=In(t,n.havingStyle(s.sup()),n);u={elem:d,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-d.depth)}}if(r){var f=In(r,n.havingStyle(s.sub()),n);l={elem:f,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-f.height)}}var h;if(u&&l){var g=n.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+e.depth+i;h=ft.makeVList({positionType:"bottom",positionData:g,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:mr(-a)},{type:"kern",size:l.kern},{type:"elem",elem:e},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:mr(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(l){var x=e.height-i;h=ft.makeVList({positionType:"top",positionData:x,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:mr(-a)},{type:"kern",size:l.kern},{type:"elem",elem:e}]},n)}else if(u){var y=e.depth+i;h=ft.makeVList({positionType:"bottom",positionData:y,children:[{type:"elem",elem:e},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:mr(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return e;var v=[h];if(l&&a!==0&&!o){var T=ft.makeSpan(["mspace"],[],n);T.style.marginRight=mr(a),v.unshift(T)}return ft.makeSpan(["mop","op-limits"],v,n)},UW=["\\smallint"],p1=(e,t)=>{var r,n,s=!1,a;e.type==="supsub"?(r=e.sup,n=e.sub,a=yn(e.base,"op"),s=!0):a=yn(e,"op");var i=t.style,o=!1;i.size===Vr.DISPLAY.size&&a.symbol&&!UW.includes(a.name)&&(o=!0);var l;if(a.symbol){var u=o?"Size2-Regular":"Size1-Regular",d="";if((a.name==="\\oiint"||a.name==="\\oiiint")&&(d=a.name.slice(1),a.name=d==="oiint"?"\\iint":"\\iiint"),l=ft.makeSymbol(a.name,u,"math",t,["mop","op-symbol",o?"large-op":"small-op"]),d.length>0){var f=l.italic,h=ft.staticSvg(d+"Size"+(o?"2":"1"),t);l=ft.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:h,shift:o?.08:0}]},t),a.name="\\"+d,l.classes.unshift("mop"),l.italic=f}}else if(a.body){var g=ni(a.body,t,!0);g.length===1&&g[0]instanceof vc?(l=g[0],l.classes[0]="mop"):l=ft.makeSpan(["mop"],g,t)}else{for(var x=[],y=1;y<a.name.length;y++)x.push(ft.mathsym(a.name[y],a.mode,t));l=ft.makeSpan(["mop"],x,t)}var v=0,T=0;return(l instanceof vc||a.name==="\\oiint"||a.name==="\\oiiint")&&!a.suppressBaseShift&&(v=(l.height-l.depth)/2-t.fontMetrics().axisHeight,T=l.italic),s?zW(l,r,n,t,i,T,v):(v&&(l.style.position="relative",l.style.top=mr(v)),l)},x2=(e,t)=>{var r;if(e.symbol)r=new jl("mo",[wc(e.name,e.mode)]),UW.includes(e.name)&&r.setAttribute("largeop","false");else if(e.body)r=new jl("mo",hl(e.body,t));else{r=new jl("mi",[new zu(e.name.slice(1))]);var n=new jl("mo",[wc("","text")]);e.parentIsSupSub?r=new jl("mrow",[r,n]):r=pW([r,n])}return r},rde={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};vr({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=n;return s.length===1&&(s=rde[s]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:s}},htmlBuilder:p1,mathmlBuilder:x2});vr({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Ea(n)}},htmlBuilder:p1,mathmlBuilder:x2});var nde={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};vr({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:p1,mathmlBuilder:x2});vr({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:p1,mathmlBuilder:x2});vr({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e,n=r;return n.length===1&&(n=nde[n]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:p1,mathmlBuilder:x2});var WW=(e,t)=>{var r,n,s=!1,a;e.type==="supsub"?(r=e.sup,n=e.sub,a=yn(e.base,"operatorname"),s=!0):a=yn(e,"operatorname");var i;if(a.body.length>0){for(var o=a.body.map(f=>{var h=f.text;return typeof h=="string"?{type:"textord",mode:f.mode,text:h}:f}),l=ni(o,t.withFont("mathrm"),!0),u=0;u<l.length;u++){var d=l[u];d instanceof vc&&(d.text=d.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}i=ft.makeSpan(["mop"],l,t)}else i=ft.makeSpan(["mop"],[],t);return s?zW(i,r,n,t,t.style,0,0):i},sde=(e,t)=>{for(var r=hl(e.body,t.withFont("mathrm")),n=!0,s=0;s<r.length;s++){var a=r[s];if(!(a instanceof tr.SpaceNode))if(a instanceof tr.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var i=a.children[0];a.children.length===1&&i instanceof tr.TextNode?i.text=i.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var o=r.map(d=>d.toText()).join("");r=[new tr.TextNode(o)]}var l=new tr.MathNode("mi",r);l.setAttribute("mathvariant","normal");var u=new tr.MathNode("mo",[wc("","text")]);return e.parentIsSupSub?new tr.MathNode("mrow",[l,u]):tr.newDocumentFragment([l,u])};vr({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0];return{type:"operatorname",mode:r.mode,body:Ea(s),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:WW,mathmlBuilder:sde});we("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");Hm({type:"ordgroup",htmlBuilder(e,t){return e.semisimple?ft.makeFragment(ni(e.body,t,!1)):ft.makeSpan(["mord"],ni(e.body,t,!0),t)},mathmlBuilder(e,t){return Lf(e.body,t,!0)}});vr({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:r}=e,n=t[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(e,t){var r=In(e.body,t.havingCrampedStyle()),n=ft.makeLineSpan("overline-line",t),s=t.fontMetrics().defaultRuleThickness,a=ft.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*s},{type:"elem",elem:n},{type:"kern",size:s}]},t);return ft.makeSpan(["mord","overline"],[a],t)},mathmlBuilder(e,t){var r=new tr.MathNode("mo",[new tr.TextNode("")]);r.setAttribute("stretchy","true");var n=new tr.MathNode("mover",[xs(e.body,t),r]);return n.setAttribute("accent","true"),n}});vr({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"phantom",mode:r.mode,body:Ea(n)}},htmlBuilder:(e,t)=>{var r=ni(e.body,t.withPhantom(),!1);return ft.makeFragment(r)},mathmlBuilder:(e,t)=>{var r=hl(e.body,t);return new tr.MathNode("mphantom",r)}});vr({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=ft.makeSpan([],[In(e.body,t.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=ft.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t),ft.makeSpan(["mord"],[r],t)},mathmlBuilder:(e,t)=>{var r=hl(Ea(e.body),t),n=new tr.MathNode("mphantom",r),s=new tr.MathNode("mpadded",[n]);return s.setAttribute("height","0px"),s.setAttribute("depth","0px"),s}});vr({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=ft.makeSpan(["inner"],[In(e.body,t.withPhantom())]),n=ft.makeSpan(["fix"],[]);return ft.makeSpan(["mord","rlap"],[r,n],t)},mathmlBuilder:(e,t)=>{var r=hl(Ea(e.body),t),n=new tr.MathNode("mphantom",r),s=new tr.MathNode("mpadded",[n]);return s.setAttribute("width","0px"),s}});vr({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e,n=yn(t[0],"size").value,s=t[1];return{type:"raisebox",mode:r.mode,dy:n,body:s}},htmlBuilder(e,t){var r=In(e.body,t),n=Vs(e.dy,t);return ft.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){var r=new tr.MathNode("mpadded",[xs(e.body,t)]),n=e.dy.number+e.dy.unit;return r.setAttribute("voffset",n),r}});vr({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}});vr({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(e,t,r){var{parser:n}=e,s=r[0],a=yn(t[0],"size"),i=yn(t[1],"size");return{type:"rule",mode:n.mode,shift:s&&yn(s,"size").value,width:a.value,height:i.value}},htmlBuilder(e,t){var r=ft.makeSpan(["mord","rule"],[],t),n=Vs(e.width,t),s=Vs(e.height,t),a=e.shift?Vs(e.shift,t):0;return r.style.borderRightWidth=mr(n),r.style.borderTopWidth=mr(s),r.style.bottom=mr(a),r.width=n,r.height=s+a,r.depth=-a,r.maxFontSize=s*1.125*t.sizeMultiplier,r},mathmlBuilder(e,t){var r=Vs(e.width,t),n=Vs(e.height,t),s=e.shift?Vs(e.shift,t):0,a=t.color&&t.getColor()||"black",i=new tr.MathNode("mspace");i.setAttribute("mathbackground",a),i.setAttribute("width",mr(r)),i.setAttribute("height",mr(n));var o=new tr.MathNode("mpadded",[i]);return s>=0?o.setAttribute("height",mr(s)):(o.setAttribute("height",mr(s)),o.setAttribute("depth",mr(-s))),o.setAttribute("voffset",mr(s)),o}});function HW(e,t,r){for(var n=ni(e,t,!1),s=t.sizeMultiplier/r.sizeMultiplier,a=0;a<n.length;a++){var i=n[a].classes.indexOf("sizing");i<0?Array.prototype.push.apply(n[a].classes,t.sizingClasses(r)):n[a].classes[i+1]==="reset-size"+t.size&&(n[a].classes[i+1]="reset-size"+r.size),n[a].height*=s,n[a].depth*=s}return ft.makeFragment(n)}var DF=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],ade=(e,t)=>{var r=t.havingSize(e.size);return HW(e.body,r,t)};vr({type:"sizing",names:DF,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:r,funcName:n,parser:s}=e,a=s.parseExpression(!1,r);return{type:"sizing",mode:s.mode,size:DF.indexOf(n)+1,body:a}},htmlBuilder:ade,mathmlBuilder:(e,t)=>{var r=t.havingSize(e.size),n=hl(e.body,r),s=new tr.MathNode("mstyle",n);return s.setAttribute("mathsize",mr(r.sizeMultiplier)),s}});vr({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,r)=>{var{parser:n}=e,s=!1,a=!1,i=r[0]&&yn(r[0],"ordgroup");if(i)for(var o="",l=0;l<i.body.length;++l){var u=i.body[l];if(o=u.text,o==="t")s=!0;else if(o==="b")a=!0;else{s=!1,a=!1;break}}else s=!0,a=!0;var d=t[0];return{type:"smash",mode:n.mode,body:d,smashHeight:s,smashDepth:a}},htmlBuilder:(e,t)=>{var r=ft.makeSpan([],[In(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return r;if(e.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(e.smashDepth&&(r.depth=0,r.children))for(var s=0;s<r.children.length;s++)r.children[s].depth=0;var a=ft.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t);return ft.makeSpan(["mord"],[a],t)},mathmlBuilder:(e,t)=>{var r=new tr.MathNode("mpadded",[xs(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}});vr({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n}=e,s=r[0],a=t[0];return{type:"sqrt",mode:n.mode,body:a,index:s}},htmlBuilder(e,t){var r=In(e.body,t.havingCrampedStyle());r.height===0&&(r.height=t.fontMetrics().xHeight),r=ft.wrapFragment(r,t);var n=t.fontMetrics(),s=n.defaultRuleThickness,a=s;t.style.id<Vr.TEXT.id&&(a=t.fontMetrics().xHeight);var i=s+a/4,o=r.height+r.depth+i+s,{span:l,ruleWidth:u,advanceWidth:d}=Xd.sqrtImage(o,t),f=l.height-u;f>r.height+r.depth+i&&(i=(i+f-r.height-r.depth)/2);var h=l.height-r.height-i-u;r.style.paddingLeft=mr(d);var g=ft.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+h)},{type:"elem",elem:l},{type:"kern",size:u}]},t);if(e.index){var x=t.havingStyle(Vr.SCRIPTSCRIPT),y=In(e.index,x,t),v=.6*(g.height-g.depth),T=ft.makeVList({positionType:"shift",positionData:-v,children:[{type:"elem",elem:y}]},t),k=ft.makeSpan(["root"],[T]);return ft.makeSpan(["mord","sqrt"],[k,g],t)}else return ft.makeSpan(["mord","sqrt"],[g],t)},mathmlBuilder(e,t){var{body:r,index:n}=e;return n?new tr.MathNode("mroot",[xs(r,t),xs(n,t)]):new tr.MathNode("msqrt",[xs(r,t)])}});var OF={display:Vr.DISPLAY,text:Vr.TEXT,script:Vr.SCRIPT,scriptscript:Vr.SCRIPTSCRIPT};vr({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:r,funcName:n,parser:s}=e,a=s.parseExpression(!0,r),i=n.slice(1,n.length-5);return{type:"styling",mode:s.mode,style:i,body:a}},htmlBuilder(e,t){var r=OF[e.style],n=t.havingStyle(r).withFont("");return HW(e.body,n,t)},mathmlBuilder(e,t){var r=OF[e.style],n=t.havingStyle(r),s=hl(e.body,n),a=new tr.MathNode("mstyle",s),i={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},o=i[e.style];return a.setAttribute("scriptlevel",o[0]),a.setAttribute("displaystyle",o[1]),a}});var ide=function(t,r){var n=t.base;if(n)if(n.type==="op"){var s=n.limits&&(r.style.size===Vr.DISPLAY.size||n.alwaysHandleSupSub);return s?p1:null}else if(n.type==="operatorname"){var a=n.alwaysHandleSupSub&&(r.style.size===Vr.DISPLAY.size||n.limits);return a?WW:null}else{if(n.type==="accent")return Un.isCharacterBox(n.base)?MC:null;if(n.type==="horizBrace"){var i=!t.sub;return i===n.isOver?$W:null}else return null}else return null};Hm({type:"supsub",htmlBuilder(e,t){var r=ide(e,t);if(r)return r(e,t);var{base:n,sup:s,sub:a}=e,i=In(n,t),o,l,u=t.fontMetrics(),d=0,f=0,h=n&&Un.isCharacterBox(n);if(s){var g=t.havingStyle(t.style.sup());o=In(s,g,t),h||(d=i.height-g.fontMetrics().supDrop*g.sizeMultiplier/t.sizeMultiplier)}if(a){var x=t.havingStyle(t.style.sub());l=In(a,x,t),h||(f=i.depth+x.fontMetrics().subDrop*x.sizeMultiplier/t.sizeMultiplier)}var y;t.style===Vr.DISPLAY?y=u.sup1:t.style.cramped?y=u.sup3:y=u.sup2;var v=t.sizeMultiplier,T=mr(.5/u.ptPerEm/v),k=null;if(l){var b=e.base&&e.base.type==="op"&&e.base.name&&(e.base.name==="\\oiint"||e.base.name==="\\oiiint");(i instanceof vc||b)&&(k=mr(-i.italic))}var N;if(o&&l){d=Math.max(d,y,o.depth+.25*u.xHeight),f=Math.max(f,u.sub2);var E=u.defaultRuleThickness,P=4*E;if(d-o.depth-(l.height-f)<P){f=P-(d-o.depth)+l.height;var M=.8*u.xHeight-(d-o.depth);M>0&&(d+=M,f-=M)}var j=[{type:"elem",elem:l,shift:f,marginRight:T,marginLeft:k},{type:"elem",elem:o,shift:-d,marginRight:T}];N=ft.makeVList({positionType:"individualShift",children:j},t)}else if(l){f=Math.max(f,u.sub1,l.height-.8*u.xHeight);var A=[{type:"elem",elem:l,marginLeft:k,marginRight:T}];N=ft.makeVList({positionType:"shift",positionData:f,children:A},t)}else if(o)d=Math.max(d,y,o.depth+.25*u.xHeight),N=ft.makeVList({positionType:"shift",positionData:-d,children:[{type:"elem",elem:o,marginRight:T}]},t);else throw new Error("supsub must have either sup or sub.");var O=M8(i,"right")||"mord";return ft.makeSpan([O],[i,ft.makeSpan(["msupsub"],[N])],t)},mathmlBuilder(e,t){var r=!1,n,s;e.base&&e.base.type==="horizBrace"&&(s=!!e.sup,s===e.base.isOver&&(r=!0,n=e.base.isOver)),e.base&&(e.base.type==="op"||e.base.type==="operatorname")&&(e.base.parentIsSupSub=!0);var a=[xs(e.base,t)];e.sub&&a.push(xs(e.sub,t)),e.sup&&a.push(xs(e.sup,t));var i;if(r)i=n?"mover":"munder";else if(e.sub)if(e.sup){var u=e.base;u&&u.type==="op"&&u.limits&&t.style===Vr.DISPLAY||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(t.style===Vr.DISPLAY||u.limits)?i="munderover":i="msubsup"}else{var l=e.base;l&&l.type==="op"&&l.limits&&(t.style===Vr.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||t.style===Vr.DISPLAY)?i="munder":i="msub"}else{var o=e.base;o&&o.type==="op"&&o.limits&&(t.style===Vr.DISPLAY||o.alwaysHandleSupSub)||o&&o.type==="operatorname"&&o.alwaysHandleSupSub&&(o.limits||t.style===Vr.DISPLAY)?i="mover":i="msup"}return new tr.MathNode(i,a)}});Hm({type:"atom",htmlBuilder(e,t){return ft.mathsym(e.text,e.mode,t,["m"+e.family])},mathmlBuilder(e,t){var r=new tr.MathNode("mo",[wc(e.text,e.mode)]);if(e.family==="bin"){var n=jC(e,t);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else e.family==="punct"?r.setAttribute("separator","true"):(e.family==="open"||e.family==="close")&&r.setAttribute("stretchy","false");return r}});var GW={mi:"italic",mn:"normal",mtext:"normal"};Hm({type:"mathord",htmlBuilder(e,t){return ft.makeOrd(e,t,"mathord")},mathmlBuilder(e,t){var r=new tr.MathNode("mi",[wc(e.text,e.mode,t)]),n=jC(e,t)||"italic";return n!==GW[r.type]&&r.setAttribute("mathvariant",n),r}});Hm({type:"textord",htmlBuilder(e,t){return ft.makeOrd(e,t,"textord")},mathmlBuilder(e,t){var r=wc(e.text,e.mode,t),n=jC(e,t)||"normal",s;return e.mode==="text"?s=new tr.MathNode("mtext",[r]):/[0-9]/.test(e.text)?s=new tr.MathNode("mn",[r]):e.text==="\\prime"?s=new tr.MathNode("mo",[r]):s=new tr.MathNode("mi",[r]),n!==GW[s.type]&&s.setAttribute("mathvariant",n),s}});var AS={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},jS={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Hm({type:"spacing",htmlBuilder(e,t){if(jS.hasOwnProperty(e.text)){var r=jS[e.text].className||"";if(e.mode==="text"){var n=ft.makeOrd(e,t,"textord");return n.classes.push(r),n}else return ft.makeSpan(["mspace",r],[ft.mathsym(e.text,e.mode,t)],t)}else{if(AS.hasOwnProperty(e.text))return ft.makeSpan(["mspace",AS[e.text]],[],t);throw new rr('Unknown type of space "'+e.text+'"')}},mathmlBuilder(e,t){var r;if(jS.hasOwnProperty(e.text))r=new tr.MathNode("mtext",[new tr.TextNode("")]);else{if(AS.hasOwnProperty(e.text))return new tr.MathNode("mspace");throw new rr('Unknown type of space "'+e.text+'"')}return r}});var IF=()=>{var e=new tr.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};Hm({type:"tag",mathmlBuilder(e,t){var r=new tr.MathNode("mtable",[new tr.MathNode("mtr",[IF(),new tr.MathNode("mtd",[Lf(e.body,t)]),IF(),new tr.MathNode("mtd",[Lf(e.tag,t)])])]);return r.setAttribute("width","100%"),r}});var RF={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},LF={"\\textbf":"textbf","\\textmd":"textmd"},ode={"\\textit":"textit","\\textup":"textup"},BF=(e,t)=>{var r=e.font;if(r){if(RF[r])return t.withTextFontFamily(RF[r]);if(LF[r])return t.withTextFontWeight(LF[r]);if(r==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape(ode[r])};vr({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];return{type:"text",mode:r.mode,body:Ea(s),font:n}},htmlBuilder(e,t){var r=BF(e,t),n=ni(e.body,r,!0);return ft.makeSpan(["mord","text"],n,r)},mathmlBuilder(e,t){var r=BF(e,t);return Lf(e.body,r)}});vr({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"underline",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=In(e.body,t),n=ft.makeLineSpan("underline-line",t),s=t.fontMetrics().defaultRuleThickness,a=ft.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:s},{type:"elem",elem:n},{type:"kern",size:3*s},{type:"elem",elem:r}]},t);return ft.makeSpan(["mord","underline"],[a],t)},mathmlBuilder(e,t){var r=new tr.MathNode("mo",[new tr.TextNode("")]);r.setAttribute("stretchy","true");var n=new tr.MathNode("munder",[xs(e.body,t),r]);return n.setAttribute("accentunder","true"),n}});vr({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"vcenter",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=In(e.body,t),n=t.fontMetrics().axisHeight,s=.5*(r.height-n-(r.depth+n));return ft.makeVList({positionType:"shift",positionData:s,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){return new tr.MathNode("mpadded",[xs(e.body,t)],["vcenter"])}});vr({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,r){throw new rr("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var r=$F(e),n=[],s=t.havingStyle(t.style.text()),a=0;a<r.length;a++){var i=r[a];i==="~"&&(i="\\textasciitilde"),n.push(ft.makeSymbol(i,"Typewriter-Regular",e.mode,s,["mord","texttt"]))}return ft.makeSpan(["mord","text"].concat(s.sizingClasses(t)),ft.tryCombineChars(n),s)},mathmlBuilder(e,t){var r=new tr.TextNode($F(e)),n=new tr.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var $F=e=>e.body.replace(/ /g,e.star?"":""),Sf=mW,VW=`[ \r
	]`,lde="\\\\[a-zA-Z@]+",cde="\\\\[^\uD800-\uDFFF]",ude="("+lde+")"+VW+"*",dde=`\\\\(
|[ \r	]+
?)[ \r	]*`,I8="[-]",fde=new RegExp(I8+"+$"),hde="("+VW+"+)|"+(dde+"|")+"([!-\\[\\]---]"+(I8+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(I8+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+ude)+("|"+cde+")");class zF{constructor(t,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=r,this.tokenRegex=new RegExp(hde,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,r){this.catcodes[t]=r}lex(){var t=this.input,r=this.tokenRegex.lastIndex;if(r===t.length)return new Dl("EOF",new sl(this,r,r));var n=this.tokenRegex.exec(t);if(n===null||n.index!==r)throw new rr("Unexpected character: '"+t[r]+"'",new Dl(t[r],new sl(this,r,r+1)));var s=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[s]===14){var a=t.indexOf(`
`,this.tokenRegex.lastIndex);return a===-1?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}return new Dl(s,new sl(this,r,this.tokenRegex.lastIndex))}}class mde{constructor(t,r){t===void 0&&(t={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new rr("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var r in t)t.hasOwnProperty(r)&&(t[r]==null?delete this.current[r]:this.current[r]=t[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)}get(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]}set(t,r,n){if(n===void 0&&(n=!1),n){for(var s=0;s<this.undefStack.length;s++)delete this.undefStack[s][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=r)}else{var a=this.undefStack[this.undefStack.length-1];a&&!a.hasOwnProperty(t)&&(a[t]=this.current[t])}r==null?delete this.current[t]:this.current[t]=r}}var gde=OW;we("\\noexpand",function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}});we("\\expandafter",function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}});we("\\@firstoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[0],numArgs:0}});we("\\@secondoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[1],numArgs:0}});we("\\@ifnextchar",function(e){var t=e.consumeArgs(3);e.consumeSpaces();var r=e.future();return t[0].length===1&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}});we("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");we("\\TextOrMath",function(e){var t=e.consumeArgs(2);return e.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var UF={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};we("\\char",function(e){var t=e.popToken(),r,n="";if(t.text==="'")r=8,t=e.popToken();else if(t.text==='"')r=16,t=e.popToken();else if(t.text==="`")if(t=e.popToken(),t.text[0]==="\\")n=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new rr("\\char` missing argument");n=t.text.charCodeAt(0)}else r=10;if(r){if(n=UF[t.text],n==null||n>=r)throw new rr("Invalid base-"+r+" digit "+t.text);for(var s;(s=UF[e.future().text])!=null&&s<r;)n*=r,n+=s,e.popToken()}return"\\@char{"+n+"}"});var $C=(e,t,r,n)=>{var s=e.consumeArg().tokens;if(s.length!==1)throw new rr("\\newcommand's first argument must be a macro name");var a=s[0].text,i=e.isDefined(a);if(i&&!t)throw new rr("\\newcommand{"+a+"} attempting to redefine "+(a+"; use \\renewcommand"));if(!i&&!r)throw new rr("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");var o=0;if(s=e.consumeArg().tokens,s.length===1&&s[0].text==="["){for(var l="",u=e.expandNextToken();u.text!=="]"&&u.text!=="EOF";)l+=u.text,u=e.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new rr("Invalid number of arguments: "+l);o=parseInt(l),s=e.consumeArg().tokens}return i&&n||e.macros.set(a,{tokens:s,numArgs:o}),""};we("\\newcommand",e=>$C(e,!1,!0,!1));we("\\renewcommand",e=>$C(e,!0,!1,!1));we("\\providecommand",e=>$C(e,!0,!0,!0));we("\\message",e=>{var t=e.consumeArgs(1)[0];return console.log(t.reverse().map(r=>r.text).join("")),""});we("\\errmessage",e=>{var t=e.consumeArgs(1)[0];return console.error(t.reverse().map(r=>r.text).join("")),""});we("\\show",e=>{var t=e.popToken(),r=t.text;return console.log(t,e.macros.get(r),Sf[r],ks.math[r],ks.text[r]),""});we("\\bgroup","{");we("\\egroup","}");we("~","\\nobreakspace");we("\\lq","`");we("\\rq","'");we("\\aa","\\r a");we("\\AA","\\r A");we("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");we("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");we("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");we("","\\mathscr{B}");we("","\\mathscr{E}");we("","\\mathscr{F}");we("","\\mathscr{H}");we("","\\mathscr{I}");we("","\\mathscr{L}");we("","\\mathscr{M}");we("","\\mathscr{R}");we("","\\mathfrak{C}");we("","\\mathfrak{H}");we("","\\mathfrak{Z}");we("\\Bbbk","\\Bbb{k}");we("","\\cdotp");we("\\llap","\\mathllap{\\textrm{#1}}");we("\\rlap","\\mathrlap{\\textrm{#1}}");we("\\clap","\\mathclap{\\textrm{#1}}");we("\\mathstrut","\\vphantom{(}");we("\\underbar","\\underline{\\text{#1}}");we("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');we("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");we("\\ne","\\neq");we("","\\neq");we("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");we("","\\notin");we("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");we("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");we("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");we("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");we("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");we("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");we("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");we("","\\perp");we("","\\mathclose{!\\mkern-0.8mu!}");we("","\\notni");we("","\\ulcorner");we("","\\urcorner");we("","\\llcorner");we("","\\lrcorner");we("","\\copyright");we("","\\textregistered");we("","\\textregistered");we("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');we("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');we("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');we("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');we("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");we("","\\vdots");we("\\varGamma","\\mathit{\\Gamma}");we("\\varDelta","\\mathit{\\Delta}");we("\\varTheta","\\mathit{\\Theta}");we("\\varLambda","\\mathit{\\Lambda}");we("\\varXi","\\mathit{\\Xi}");we("\\varPi","\\mathit{\\Pi}");we("\\varSigma","\\mathit{\\Sigma}");we("\\varUpsilon","\\mathit{\\Upsilon}");we("\\varPhi","\\mathit{\\Phi}");we("\\varPsi","\\mathit{\\Psi}");we("\\varOmega","\\mathit{\\Omega}");we("\\substack","\\begin{subarray}{c}#1\\end{subarray}");we("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");we("\\boxed","\\fbox{$\\displaystyle{#1}$}");we("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");we("\\implies","\\DOTSB\\;\\Longrightarrow\\;");we("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");we("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");we("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var WF={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};we("\\dots",function(e){var t="\\dotso",r=e.expandAfterFuture().text;return r in WF?t=WF[r]:(r.slice(0,4)==="\\not"||r in ks.math&&["bin","rel"].includes(ks.math[r].group))&&(t="\\dotsb"),t});var zC={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};we("\\dotso",function(e){var t=e.future().text;return t in zC?"\\ldots\\,":"\\ldots"});we("\\dotsc",function(e){var t=e.future().text;return t in zC&&t!==","?"\\ldots\\,":"\\ldots"});we("\\cdots",function(e){var t=e.future().text;return t in zC?"\\@cdots\\,":"\\@cdots"});we("\\dotsb","\\cdots");we("\\dotsm","\\cdots");we("\\dotsi","\\!\\cdots");we("\\dotsx","\\ldots\\,");we("\\DOTSI","\\relax");we("\\DOTSB","\\relax");we("\\DOTSX","\\relax");we("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");we("\\,","\\tmspace+{3mu}{.1667em}");we("\\thinspace","\\,");we("\\>","\\mskip{4mu}");we("\\:","\\tmspace+{4mu}{.2222em}");we("\\medspace","\\:");we("\\;","\\tmspace+{5mu}{.2777em}");we("\\thickspace","\\;");we("\\!","\\tmspace-{3mu}{.1667em}");we("\\negthinspace","\\!");we("\\negmedspace","\\tmspace-{4mu}{.2222em}");we("\\negthickspace","\\tmspace-{5mu}{.277em}");we("\\enspace","\\kern.5em ");we("\\enskip","\\hskip.5em\\relax");we("\\quad","\\hskip1em\\relax");we("\\qquad","\\hskip2em\\relax");we("\\tag","\\@ifstar\\tag@literal\\tag@paren");we("\\tag@paren","\\tag@literal{({#1})}");we("\\tag@literal",e=>{if(e.macros.get("\\df@tag"))throw new rr("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});we("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");we("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");we("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");we("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");we("\\newline","\\\\\\relax");we("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var qW=mr($u["Main-Regular"][84][1]-.7*$u["Main-Regular"][65][1]);we("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+qW+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");we("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+qW+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");we("\\hspace","\\@ifstar\\@hspacer\\@hspace");we("\\@hspace","\\hskip #1\\relax");we("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");we("\\ordinarycolon",":");we("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");we("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');we("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');we("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');we("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');we("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');we("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');we("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');we("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');we("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');we("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');we("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');we("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');we("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');we("","\\dblcolon");we("","\\eqcolon");we("","\\coloneqq");we("","\\eqqcolon");we("","\\Coloneqq");we("\\ratio","\\vcentcolon");we("\\coloncolon","\\dblcolon");we("\\colonequals","\\coloneqq");we("\\coloncolonequals","\\Coloneqq");we("\\equalscolon","\\eqqcolon");we("\\equalscoloncolon","\\Eqqcolon");we("\\colonminus","\\coloneq");we("\\coloncolonminus","\\Coloneq");we("\\minuscolon","\\eqcolon");we("\\minuscoloncolon","\\Eqcolon");we("\\coloncolonapprox","\\Colonapprox");we("\\coloncolonsim","\\Colonsim");we("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");we("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");we("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");we("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");we("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");we("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");we("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");we("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");we("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");we("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");we("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");we("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");we("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");we("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");we("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");we("\\ngeqq","\\html@mathml{\\@ngeqq}{}");we("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");we("\\nleqq","\\html@mathml{\\@nleqq}{}");we("\\nleqslant","\\html@mathml{\\@nleqslant}{}");we("\\nshortmid","\\html@mathml{\\@nshortmid}{}");we("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");we("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");we("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");we("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");we("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");we("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");we("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");we("\\imath","\\html@mathml{\\@imath}{}");we("\\jmath","\\html@mathml{\\@jmath}{}");we("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");we("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");we("","\\llbracket");we("","\\rrbracket");we("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");we("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");we("","\\lBrace");we("","\\rBrace");we("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");we("","\\minuso");we("\\darr","\\downarrow");we("\\dArr","\\Downarrow");we("\\Darr","\\Downarrow");we("\\lang","\\langle");we("\\rang","\\rangle");we("\\uarr","\\uparrow");we("\\uArr","\\Uparrow");we("\\Uarr","\\Uparrow");we("\\N","\\mathbb{N}");we("\\R","\\mathbb{R}");we("\\Z","\\mathbb{Z}");we("\\alef","\\aleph");we("\\alefsym","\\aleph");we("\\Alpha","\\mathrm{A}");we("\\Beta","\\mathrm{B}");we("\\bull","\\bullet");we("\\Chi","\\mathrm{X}");we("\\clubs","\\clubsuit");we("\\cnums","\\mathbb{C}");we("\\Complex","\\mathbb{C}");we("\\Dagger","\\ddagger");we("\\diamonds","\\diamondsuit");we("\\empty","\\emptyset");we("\\Epsilon","\\mathrm{E}");we("\\Eta","\\mathrm{H}");we("\\exist","\\exists");we("\\harr","\\leftrightarrow");we("\\hArr","\\Leftrightarrow");we("\\Harr","\\Leftrightarrow");we("\\hearts","\\heartsuit");we("\\image","\\Im");we("\\infin","\\infty");we("\\Iota","\\mathrm{I}");we("\\isin","\\in");we("\\Kappa","\\mathrm{K}");we("\\larr","\\leftarrow");we("\\lArr","\\Leftarrow");we("\\Larr","\\Leftarrow");we("\\lrarr","\\leftrightarrow");we("\\lrArr","\\Leftrightarrow");we("\\Lrarr","\\Leftrightarrow");we("\\Mu","\\mathrm{M}");we("\\natnums","\\mathbb{N}");we("\\Nu","\\mathrm{N}");we("\\Omicron","\\mathrm{O}");we("\\plusmn","\\pm");we("\\rarr","\\rightarrow");we("\\rArr","\\Rightarrow");we("\\Rarr","\\Rightarrow");we("\\real","\\Re");we("\\reals","\\mathbb{R}");we("\\Reals","\\mathbb{R}");we("\\Rho","\\mathrm{P}");we("\\sdot","\\cdot");we("\\sect","\\S");we("\\spades","\\spadesuit");we("\\sub","\\subset");we("\\sube","\\subseteq");we("\\supe","\\supseteq");we("\\Tau","\\mathrm{T}");we("\\thetasym","\\vartheta");we("\\weierp","\\wp");we("\\Zeta","\\mathrm{Z}");we("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");we("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");we("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");we("\\bra","\\mathinner{\\langle{#1}|}");we("\\ket","\\mathinner{|{#1}\\rangle}");we("\\braket","\\mathinner{\\langle{#1}\\rangle}");we("\\Bra","\\left\\langle#1\\right|");we("\\Ket","\\left|#1\\right\\rangle");var KW=e=>t=>{var r=t.consumeArg().tokens,n=t.consumeArg().tokens,s=t.consumeArg().tokens,a=t.consumeArg().tokens,i=t.macros.get("|"),o=t.macros.get("\\|");t.macros.beginGroup();var l=f=>h=>{e&&(h.macros.set("|",i),s.length&&h.macros.set("\\|",o));var g=f;if(!f&&s.length){var x=h.future();x.text==="|"&&(h.popToken(),g=!0)}return{tokens:g?s:n,numArgs:0}};t.macros.set("|",l(!1)),s.length&&t.macros.set("\\|",l(!0));var u=t.consumeArg().tokens,d=t.expandTokens([...a,...u,...r]);return t.macros.endGroup(),{tokens:d.reverse(),numArgs:0}};we("\\bra@ket",KW(!1));we("\\bra@set",KW(!0));we("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");we("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");we("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");we("\\angln","{\\angl n}");we("\\blue","\\textcolor{##6495ed}{#1}");we("\\orange","\\textcolor{##ffa500}{#1}");we("\\pink","\\textcolor{##ff00af}{#1}");we("\\red","\\textcolor{##df0030}{#1}");we("\\green","\\textcolor{##28ae7b}{#1}");we("\\gray","\\textcolor{gray}{#1}");we("\\purple","\\textcolor{##9d38bd}{#1}");we("\\blueA","\\textcolor{##ccfaff}{#1}");we("\\blueB","\\textcolor{##80f6ff}{#1}");we("\\blueC","\\textcolor{##63d9ea}{#1}");we("\\blueD","\\textcolor{##11accd}{#1}");we("\\blueE","\\textcolor{##0c7f99}{#1}");we("\\tealA","\\textcolor{##94fff5}{#1}");we("\\tealB","\\textcolor{##26edd5}{#1}");we("\\tealC","\\textcolor{##01d1c1}{#1}");we("\\tealD","\\textcolor{##01a995}{#1}");we("\\tealE","\\textcolor{##208170}{#1}");we("\\greenA","\\textcolor{##b6ffb0}{#1}");we("\\greenB","\\textcolor{##8af281}{#1}");we("\\greenC","\\textcolor{##74cf70}{#1}");we("\\greenD","\\textcolor{##1fab54}{#1}");we("\\greenE","\\textcolor{##0d923f}{#1}");we("\\goldA","\\textcolor{##ffd0a9}{#1}");we("\\goldB","\\textcolor{##ffbb71}{#1}");we("\\goldC","\\textcolor{##ff9c39}{#1}");we("\\goldD","\\textcolor{##e07d10}{#1}");we("\\goldE","\\textcolor{##a75a05}{#1}");we("\\redA","\\textcolor{##fca9a9}{#1}");we("\\redB","\\textcolor{##ff8482}{#1}");we("\\redC","\\textcolor{##f9685d}{#1}");we("\\redD","\\textcolor{##e84d39}{#1}");we("\\redE","\\textcolor{##bc2612}{#1}");we("\\maroonA","\\textcolor{##ffbde0}{#1}");we("\\maroonB","\\textcolor{##ff92c6}{#1}");we("\\maroonC","\\textcolor{##ed5fa6}{#1}");we("\\maroonD","\\textcolor{##ca337c}{#1}");we("\\maroonE","\\textcolor{##9e034e}{#1}");we("\\purpleA","\\textcolor{##ddd7ff}{#1}");we("\\purpleB","\\textcolor{##c6b9fc}{#1}");we("\\purpleC","\\textcolor{##aa87ff}{#1}");we("\\purpleD","\\textcolor{##7854ab}{#1}");we("\\purpleE","\\textcolor{##543b78}{#1}");we("\\mintA","\\textcolor{##f5f9e8}{#1}");we("\\mintB","\\textcolor{##edf2df}{#1}");we("\\mintC","\\textcolor{##e0e5cc}{#1}");we("\\grayA","\\textcolor{##f6f7f7}{#1}");we("\\grayB","\\textcolor{##f0f1f2}{#1}");we("\\grayC","\\textcolor{##e3e5e6}{#1}");we("\\grayD","\\textcolor{##d6d8da}{#1}");we("\\grayE","\\textcolor{##babec2}{#1}");we("\\grayF","\\textcolor{##888d93}{#1}");we("\\grayG","\\textcolor{##626569}{#1}");we("\\grayH","\\textcolor{##3b3e40}{#1}");we("\\grayI","\\textcolor{##21242c}{#1}");we("\\kaBlue","\\textcolor{##314453}{#1}");we("\\kaGreen","\\textcolor{##71B307}{#1}");var YW={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class pde{constructor(t,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(t),this.macros=new mde(gde,r.macros),this.mode=n,this.stack=[]}feed(t){this.lexer=new zF(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){var r,n,s;if(t){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:s,end:n}=this.consumeArg(["]"])}else({tokens:s,start:r,end:n}=this.consumeArg());return this.pushToken(new Dl("EOF",n.loc)),this.pushTokens(s),new Dl("",sl.range(r,n))}consumeSpaces(){for(;;){var t=this.future();if(t.text===" ")this.stack.pop();else break}}consumeArg(t){var r=[],n=t&&t.length>0;n||this.consumeSpaces();var s=this.future(),a,i=0,o=0;do{if(a=this.popToken(),r.push(a),a.text==="{")++i;else if(a.text==="}"){if(--i,i===-1)throw new rr("Extra }",a)}else if(a.text==="EOF")throw new rr("Unexpected end of input in a macro argument, expected '"+(t&&n?t[o]:"}")+"'",a);if(t&&n)if((i===0||i===1&&t[o]==="{")&&a.text===t[o]){if(++o,o===t.length){r.splice(-o,o);break}}else o=0}while(i!==0||n);return s.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:s,end:a}}consumeArgs(t,r){if(r){if(r.length!==t+1)throw new rr("The length of delimiters doesn't match the number of args!");for(var n=r[0],s=0;s<n.length;s++){var a=this.popToken();if(n[s]!==a.text)throw new rr("Use of the macro doesn't match its definition",a)}}for(var i=[],o=0;o<t;o++)i.push(this.consumeArg(r&&r[o+1]).tokens);return i}countExpansion(t){if(this.expansionCount+=t,this.expansionCount>this.settings.maxExpand)throw new rr("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(t){var r=this.popToken(),n=r.text,s=r.noexpand?null:this._getExpansion(n);if(s==null||t&&s.unexpandable){if(t&&s==null&&n[0]==="\\"&&!this.isDefined(n))throw new rr("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var a=s.tokens,i=this.consumeArgs(s.numArgs,s.delimiters);if(s.numArgs){a=a.slice();for(var o=a.length-1;o>=0;--o){var l=a[o];if(l.text==="#"){if(o===0)throw new rr("Incomplete placeholder at end of macro body",l);if(l=a[--o],l.text==="#")a.splice(o+1,1);else if(/^[1-9]$/.test(l.text))a.splice(o,2,...i[+l.text-1]);else throw new rr("Not a valid argument number",l)}}}return this.pushTokens(a),a.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new Dl(t)]):void 0}expandTokens(t){var r=[],n=this.stack.length;for(this.pushTokens(t);this.stack.length>n;)if(this.expandOnce(!0)===!1){var s=this.stack.pop();s.treatAsRelax&&(s.noexpand=!1,s.treatAsRelax=!1),r.push(s)}return this.countExpansion(r.length),r}expandMacroAsText(t){var r=this.expandMacro(t);return r&&r.map(n=>n.text).join("")}_getExpansion(t){var r=this.macros.get(t);if(r==null)return r;if(t.length===1){var n=this.lexer.catcodes[t];if(n!=null&&n!==13)return}var s=typeof r=="function"?r(this):r;if(typeof s=="string"){var a=0;if(s.indexOf("#")!==-1)for(var i=s.replace(/##/g,"");i.indexOf("#"+(a+1))!==-1;)++a;for(var o=new zF(s,this.settings),l=[],u=o.lex();u.text!=="EOF";)l.push(u),u=o.lex();l.reverse();var d={tokens:l,numArgs:a};return d}return s}isDefined(t){return this.macros.has(t)||Sf.hasOwnProperty(t)||ks.math.hasOwnProperty(t)||ks.text.hasOwnProperty(t)||YW.hasOwnProperty(t)}isExpandable(t){var r=this.macros.get(t);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:Sf.hasOwnProperty(t)&&!Sf[t].primitive}}var HF=/^[]/,lb=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),PS={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},GF={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class t3{constructor(t,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new pde(t,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(t,r){if(r===void 0&&(r=!0),this.fetch().text!==t)throw new rr("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){var r=this.nextToken;this.consume(),this.gullet.pushToken(new Dl("}")),this.gullet.pushTokens(t);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(t,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var s=this.fetch();if(t3.endOfExpression.indexOf(s.text)!==-1||r&&s.text===r||t&&Sf[s.text]&&Sf[s.text].infix)break;var a=this.parseAtom(r);if(a){if(a.type==="internal")continue}else break;n.push(a)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(t){for(var r=-1,n,s=0;s<t.length;s++)if(t[s].type==="infix"){if(r!==-1)throw new rr("only one infix operator per group",t[s].token);r=s,n=t[s].replaceWith}if(r!==-1&&n){var a,i,o=t.slice(0,r),l=t.slice(r+1);o.length===1&&o[0].type==="ordgroup"?a=o[0]:a={type:"ordgroup",mode:this.mode,body:o},l.length===1&&l[0].type==="ordgroup"?i=l[0]:i={type:"ordgroup",mode:this.mode,body:l};var u;return n==="\\\\abovefrac"?u=this.callFunction(n,[a,t[r],i],[]):u=this.callFunction(n,[a,i],[]),[u]}else return t}handleSupSubscript(t){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var s;do{var a;s=this.parseGroup(t)}while(((a=s)==null?void 0:a.type)==="internal");if(!s)throw new rr("Expected group after '"+n+"'",r);return s}formatUnsupportedCmd(t){for(var r=[],n=0;n<t.length;n++)r.push({type:"textord",mode:"text",text:t[n]});var s={type:"text",mode:this.mode,body:r},a={type:"color",mode:this.mode,color:this.settings.errorColor,body:[s]};return a}parseAtom(t){var r=this.parseGroup("atom",t);if(r?.type==="internal"||this.mode==="text")return r;for(var n,s;;){this.consumeSpaces();var a=this.fetch();if(a.text==="\\limits"||a.text==="\\nolimits"){if(r&&r.type==="op"){var i=a.text==="\\limits";r.limits=i,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=a.text==="\\limits");else throw new rr("Limit controls must follow a math operator",a);this.consume()}else if(a.text==="^"){if(n)throw new rr("Double superscript",a);n=this.handleSupSubscript("superscript")}else if(a.text==="_"){if(s)throw new rr("Double subscript",a);s=this.handleSupSubscript("subscript")}else if(a.text==="'"){if(n)throw new rr("Double superscript",a);var o={type:"textord",mode:this.mode,text:"\\prime"},l=[o];for(this.consume();this.fetch().text==="'";)l.push(o),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:l}}else if(lb[a.text]){var u=HF.test(a.text),d=[];for(d.push(new Dl(lb[a.text])),this.consume();;){var f=this.fetch().text;if(!lb[f]||HF.test(f)!==u)break;d.unshift(new Dl(lb[f])),this.consume()}var h=this.subparse(d);u?s={type:"ordgroup",mode:"math",body:h}:n={type:"ordgroup",mode:"math",body:h}}else break}return n||s?{type:"supsub",mode:this.mode,base:r,sup:n,sub:s}:r}parseFunction(t,r){var n=this.fetch(),s=n.text,a=Sf[s];if(!a)return null;if(this.consume(),r&&r!=="atom"&&!a.allowedInArgument)throw new rr("Got function '"+s+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!a.allowedInText)throw new rr("Can't use function '"+s+"' in text mode",n);if(this.mode==="math"&&a.allowedInMath===!1)throw new rr("Can't use function '"+s+"' in math mode",n);var{args:i,optArgs:o}=this.parseArguments(s,a);return this.callFunction(s,i,o,n,t)}callFunction(t,r,n,s,a){var i={funcName:t,parser:this,token:s,breakOnTokenText:a},o=Sf[t];if(o&&o.handler)return o.handler(i,r,n);throw new rr("No function handler for "+t)}parseArguments(t,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var s=[],a=[],i=0;i<n;i++){var o=r.argTypes&&r.argTypes[i],l=i<r.numOptionalArgs;(r.primitive&&o==null||r.type==="sqrt"&&i===1&&a[0]==null)&&(o="primitive");var u=this.parseGroupOfType("argument to '"+t+"'",o,l);if(l)a.push(u);else if(u!=null)s.push(u);else throw new rr("Null argument, please report this as a bug")}return{args:s,optArgs:a}}parseGroupOfType(t,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var s=this.parseArgumentGroup(n,"text");return s!=null?{type:"styling",mode:s.mode,body:[s],style:"text"}:null}case"raw":{var a=this.parseStringGroup("raw",n);return a!=null?{type:"raw",mode:"text",string:a.text}:null}case"primitive":{if(n)throw new rr("A primitive argument cannot be optional");var i=this.parseGroup(t);if(i==null)throw new rr("Expected group as "+t,this.fetch());return i}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new rr("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(t,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var s="",a;(a=this.fetch()).text!=="EOF";)s+=a.text,this.consume();return this.consume(),n.text=s,n}parseRegexGroup(t,r){for(var n=this.fetch(),s=n,a="",i;(i=this.fetch()).text!=="EOF"&&t.test(a+i.text);)s=i,a+=s.text,this.consume();if(a==="")throw new rr("Invalid "+r+": '"+n.text+"'",n);return n.range(s,a)}parseColorGroup(t){var r=this.parseStringGroup("color",t);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new rr("Invalid color: '"+r.text+"'",r);var s=n[0];return/^[0-9a-f]{6}$/i.test(s)&&(s="#"+s),{type:"color-token",mode:this.mode,color:s}}parseSizeGroup(t){var r,n=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",t),!r)return null;!t&&r.text.length===0&&(r.text="0pt",n=!0);var s=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!s)throw new rr("Invalid size: '"+r.text+"'",r);var a={number:+(s[1]+s[2]),unit:s[3]};if(!aW(a))throw new rr("Invalid unit: '"+a.unit+"'",r);return{type:"size",mode:this.mode,value:a,isBlank:n}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(t,r){var n=this.gullet.scanArgument(t);if(n==null)return null;var s=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var i={type:"ordgroup",mode:this.mode,loc:n.loc,body:a};return r&&this.switchMode(s),i}parseGroup(t,r){var n=this.fetch(),s=n.text,a;if(s==="{"||s==="\\begingroup"){this.consume();var i=s==="{"?"}":"\\endgroup";this.gullet.beginGroup();var o=this.parseExpression(!1,i),l=this.fetch();this.expect(i),this.gullet.endGroup(),a={type:"ordgroup",mode:this.mode,loc:sl.range(n,l),body:o,semisimple:s==="\\begingroup"||void 0}}else if(a=this.parseFunction(r,t)||this.parseSymbol(),a==null&&s[0]==="\\"&&!YW.hasOwnProperty(s)){if(this.settings.throwOnError)throw new rr("Undefined control sequence: "+s,n);a=this.formatUnsupportedCmd(s),this.consume()}return a}formLigatures(t){for(var r=t.length-1,n=0;n<r;++n){var s=t[n],a=s.text;a==="-"&&t[n+1].text==="-"&&(n+1<r&&t[n+2].text==="-"?(t.splice(n,3,{type:"textord",mode:"text",loc:sl.range(s,t[n+2]),text:"---"}),r-=2):(t.splice(n,2,{type:"textord",mode:"text",loc:sl.range(s,t[n+1]),text:"--"}),r-=1)),(a==="'"||a==="`")&&t[n+1].text===a&&(t.splice(n,2,{type:"textord",mode:"text",loc:sl.range(s,t[n+1]),text:a+a}),r-=1)}}parseSymbol(){var t=this.fetch(),r=t.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),s=n.charAt(0)==="*";if(s&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new rr(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:s}}GF.hasOwnProperty(r[0])&&!ks[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',t),r=GF[r[0]]+r.slice(1));var a=fde.exec(r);a&&(r=r.substring(0,a.index),r==="i"?r="":r==="j"&&(r=""));var i;if(ks[this.mode][r]){this.settings.strict&&this.mode==="math"&&P8.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',t);var o=ks[this.mode][r].group,l=sl.range(t),u;if(sue.hasOwnProperty(o)){var d=o;u={type:"atom",mode:this.mode,family:d,loc:l,text:r}}else u={type:o,mode:this.mode,loc:l,text:r};i=u}else if(r.charCodeAt(0)>=128)this.settings.strict&&(sW(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),t)),i={type:"textord",mode:"text",loc:sl.range(t),text:r};else return null;if(this.consume(),a)for(var f=0;f<a[0].length;f++){var h=a[0][f];if(!PS[h])throw new rr("Unknown accent ' "+h+"'",t);var g=PS[h][this.mode]||PS[h].text;if(!g)throw new rr("Accent "+h+" unsupported in "+this.mode+" mode",t);i={type:"accent",mode:this.mode,loc:sl.range(t),label:g,isStretchy:!1,isShifty:!0,base:i}}return i}}t3.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var UC=function(t,r){if(!(typeof t=="string"||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new t3(t,r);delete n.gullet.macros.current["\\df@tag"];var s=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new rr("\\tag works only in display equations");s=[{type:"tag",mode:"text",body:s,tag:n.subparse([new Dl("\\df@tag")])}]}return s},XW=function(t,r,n){r.textContent="";var s=WC(t,n).toNode();r.appendChild(s)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),XW=function(){throw new rr("KaTeX doesn't work in quirks mode.")});var xde=function(t,r){var n=WC(t,r).toMarkup();return n},yde=function(t,r){var n=new kC(r);return UC(t,n)},JW=function(t,r,n){if(n.throwOnError||!(t instanceof rr))throw t;var s=ft.makeSpan(["katex-error"],[new vc(r)]);return s.setAttribute("title",t.toString()),s.setAttribute("style","color:"+n.errorColor),s},WC=function(t,r){var n=new kC(r);try{var s=UC(t,n);return Eue(s,t,n)}catch(a){return JW(a,t,n)}},vde=function(t,r){var n=new kC(r);try{var s=UC(t,n);return Nue(s,t,n)}catch(a){return JW(a,t,n)}},wde="0.16.25",bde={Span:p2,Anchor:EC,SymbolNode:vc,SvgNode:i0,PathNode:Rf,LineNode:j8},R8={version:wde,render:XW,renderToString:xde,ParseError:rr,SETTINGS_SCHEMA:Gb,__parse:yde,__renderToDomTree:WC,__renderToHTMLTree:vde,__setFontMetrics:Xce,__defineSymbol:X,__defineFunction:vr,__defineMacro:we,__domTree:bde};const L8=(e,t=!1)=>{if(!e||typeof e!="string")return"";try{return R8.renderToString(e,{throwOnError:!1,displayMode:t,strict:!1})}catch(r){return console.error("Math rendering error:",r),`<span class="math-error" title="Math rendering error">${B8(e)}</span>`}},Gs=(e,t=!1)=>{if(!e||typeof e!="string")return"";let r=e;const n=/\$\$(.*?)\$\$/g;let s;const a=[];for(;(s=n.exec(e))!==null;)a.push({fullMatch:s[0],expression:s[1],index:s.index});for(let l=a.length-1;l>=0;l--){const{fullMatch:u,expression:d}=a[l];try{const f=R8.renderToString(d,{throwOnError:!1,displayMode:!0,strict:!1});r=r.replace(u,f)}catch(f){console.error("Math rendering error:",f),r=r.replace(u,B8(u))}}const i=/\$(.*?)\$/g,o=[];for(;(s=i.exec(r))!==null;)s[0].startsWith("$$")||o.push({fullMatch:s[0],expression:s[1],index:s.index});for(let l=o.length-1;l>=0;l--){const{fullMatch:u,expression:d}=o[l];try{const f=R8.renderToString(d,{throwOnError:!1,displayMode:!1,strict:!1});r=r.replace(u,f)}catch(f){console.error("Math rendering error:",f),r=r.replace(u,B8(u))}}return r},_de=e=>{if(!e||typeof e!="string")return"";if(e.includes("$"))return e;const t=["\\sqrt","\\frac","\\times","\\div","\\cdot","\\pm","\\mp","\\leq","\\geq","\\neq","\\approx","\\equiv","\\sum","\\prod","\\int","\\lim","\\sin","\\cos","\\tan","\\log","\\ln","\\exp"],r=[];let n="",s=!1,a=0;for(let o=0;o<e.length;o++){const l=e[o],u=e[o+1]||"",d=e[o-1]||"",f=l+u;if(e.substring(o,o+3),l==="\\"){const h=e.substring(o).match(/^\\([a-zA-Z]+)/);if(h){const g="\\"+h[1];if(t.some(x=>g.startsWith(x))||g.length>1){!s&&n.trim()&&(r.push({type:"text",content:n}),n=""),s=!0,n+=l;continue}}}if(f==="^{"||f==="_{"||l==="^"||l==="_"){!s&&n.trim()&&(r.push({type:"text",content:n}),n=""),s=!0,n+=l;continue}if(l==="{"){if(s){a++,n+=l;continue}else if(d==="^"||d==="_"||d==="\\"){s=!0,n+=l,a++;continue}}if(l==="}"&&s){if(n+=l,a--,a===0){const h=e.substring(o+1).trim();(!h||h.match(/^[\s,.!?;:]/))&&(r.push({type:"math",content:n}),n="",s=!1)}continue}if(s){if(n+=l,l===" "&&a===0){const h=e.substring(o+1).trim();h&&!h.match(/^[\\^_{]/)&&(r.push({type:"math",content:n.trim()}),n="",s=!1,n+=l)}}else n+=l}n&&r.push({type:s?"math":"text",content:n});let i="";for(const o of r)o.type==="math"?i+=`$${o.content}$`:i+=o.content;return i},B8=e=>{const t=document.createElement("div");return t.textContent=e,t.innerHTML},Sde=({isOpen:e=!1,onClose:t,onSave:r,initialValue:n="",cursorPosition:s=null,inputRef:a=null})=>{const[i,o]=S.useState(n),[l,u]=S.useState({start:0,end:0}),[d,f]=S.useState(null),[h,g]=S.useState(null),[x,y]=S.useState(!1),v=S.useRef(null);S.useRef(null),S.useEffect(()=>{e&&(o(n),f(null),g(null),setTimeout(()=>{v.current?.focus(),i&&v.current?.setSelectionRange(i.length,i.length)},100))},[e,n]);const T=()=>{const{start:A,end:O}=l,L=A>0?i.substring(A-1,A):"",q=L&&L.trim()&&!L.match(/[{}()]/);let Q="",ae=0;q?(Q="^{}",ae=-1):(Q="x^{2}",ae=-3);const te=i.substring(0,A)+Q+i.substring(O);o(te),setTimeout(()=>{v.current?.focus();const ne=A+Q.length+ae;v.current?.setSelectionRange(ne,ne)},0)},k=()=>{const{start:A,end:O}=l,L=i.substring(A,O);if(L){const q=i.substring(0,A)+`\\sqrt{${L}}`+i.substring(O);o(q),setTimeout(()=>{v.current?.focus();const Q=A+L.length+8;v.current?.setSelectionRange(Q,Q)},0)}else{const q=i.substring(0,A)+"\\sqrt{}"+i.substring(O);o(q),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(A+6,A+6)},0)}},b=()=>{const{start:A}=l,O=i;if(d==="numerator"&&h!==null){const L=h;let q=0,Q=-1;const ae=L+6;for(let te=ae;te<O.length;te++)if(O[te]==="{")q++;else if(O[te]==="}"){if(q===0){Q=te+1;break}q--}if(Q>0){const te=Q+2;setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(te,te)},0),f(null),g(null)}else{const te=i.substring(0,A)+"\\frac{}{}"+i.substring(l.end);o(te),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(A+6,A+6)},0),f("numerator"),g(A)}}else{const L=i.substring(0,A)+"\\frac{}{}"+i.substring(l.end);o(L),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(A+6,A+6)},0),f("numerator"),g(A)}},N=()=>{const{start:A,end:O}=l,L=i.substring(0,A)+"x^{}"+i.substring(O);o(L),y(!0),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(A+3,A+3)},0)},E=A=>{const{start:O,end:L}=l,q=i.substring(0,O)+A+i.substring(L);o(q),setTimeout(()=>{v.current?.focus();const Q=O+A.length;v.current?.setSelectionRange(Q,Q)},0)},P=A=>{u({start:A.target.selectionStart,end:A.target.selectionEnd})},M=()=>{let A=i;i&&!i.includes("$")&&i.trim()&&/\\[a-zA-Z]+|[\^_]\{|\\times|\\div|\\sqrt|\\frac/.test(i)&&(A=`$${i}$`),r?.(A),t()};if(S.useEffect(()=>{const A=O=>{O.key==="Escape"&&e&&t()};return e&&document.addEventListener("keydown",A),()=>{document.removeEventListener("keydown",A)}},[e,t]),!e)return null;let j="";if(i&&i.trim())try{j=L8(i,!1),(!j||j.trim()==="")&&(j=`<span class="text-gray-500 font-mono">${MS(i)}</span>`)}catch(A){console.error("Preview rendering error:",A),j=`<span class="text-red-500 font-mono">Error: ${MS(i)}</span>`}return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:A=>{A.target===A.currentTarget&&t()},role:"dialog","aria-modal":"true","aria-label":"Math Visual Editor",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 w-full max-w-2xl mx-auto",onClick:A=>A.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Math Visual Editor"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Math Expression"}),c.jsx("textarea",{ref:v,value:i,onChange:A=>{const O=A.target.value,L=A.target.selectionStart,q=i;if(O.length>q.length){const Q=O.substring(0,L),ae=O.substring(L),te=Q.match(/\^{([^}]*)$/);if(te)if(ae.startsWith("}")){const ne=te[1];x&&ne.length>0&&(setTimeout(()=>{if(v.current&&v.current.value===O){const B=L+1;v.current.setSelectionRange(B,B)}},10),y(!1))}else y(!1);else y(!1);Q.match(/\\sqrt\{([^}]*)$/),Q.match(/\\frac\{([^}]*)$/),Q.match(/\\frac\{[^}]*\}\{([^}]*)$/)}o(O)},onSelect:P,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",placeholder:"Type LaTeX code or use buttons below...",rows:4}),i&&i.trim()&&c.jsxs("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[c.jsx("div",{className:"text-xs text-gray-600 mb-2 font-medium",children:"Preview:"}),c.jsx("div",{className:"text-gray-700",style:{minHeight:"1.5em",fontSize:"16px"},dangerouslySetInnerHTML:{__html:j||MS(i)}})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Math Symbols"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:T,className:"px-3 py-2 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-sm font-medium text-blue-700 transition-colors",title:"Exponent (x)",children:"x"}),c.jsx("button",{onClick:N,className:"px-3 py-2 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-sm font-medium text-blue-700 transition-colors",title:"Exponent (x) - Type letter, click this, type number",children:"x"}),c.jsx("button",{onClick:k,className:"px-3 py-2 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-sm font-medium text-blue-700 transition-colors",title:"Square Root (x)",children:"x"}),c.jsx("button",{onClick:b,className:`px-3 py-2 border rounded-lg text-sm font-medium transition-colors ${d==="numerator"?"bg-green-50 hover:bg-green-100 border-green-300 text-green-700":"bg-blue-50 hover:bg-blue-100 border-blue-200 text-blue-700"}`,title:d==="numerator"?"Move to denominator (click again)":"Fraction (a/b) - Click for numerator, click again for denominator",children:"a/b"}),c.jsx("button",{onClick:()=>E("\\times"),className:"px-3 py-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors",title:"Times",children:""}),c.jsx("button",{onClick:()=>E("\\div"),className:"px-3 py-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors",title:"Divide",children:""})]})]}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx(lt,{variant:"secondary",onClick:t,children:"Cancel"}),c.jsx(lt,{variant:"primary",onClick:M,children:"Insert"})]})]})})},MS=e=>{const t=document.createElement("div");return t.textContent=e,t.innerHTML},Yh=({inputRef:e,onChange:t,position:r="right",size:n="small",showPreview:s=!1,className:a=""})=>{const[i,o]=S.useState(!1),[l,u]=S.useState(!1),[d,f]=S.useState(0),[h,g]=S.useState(null),[x,y]=S.useState(""),v=b=>{b.preventDefault(),b.stopPropagation();let N=null;if(typeof e=="function"?N=e():N=e?.current||e,!N){console.warn("MathEditorButton: No input reference provided");return}N.focus();const E=N.selectionStart!==null&&N.selectionStart!==void 0?N.selectionStart:N.selectionEnd!==null&&N.selectionEnd!==void 0?N.selectionEnd:N.value?.length||0;console.log(" Captured cursor position:",E,"from input value length:",N.value?.length),f(E),g(N),o(!0)},T=b=>{let N=h;if(N||(typeof e=="function"?N=e():N=e?.current||e),!N){console.warn("MathEditorButton: No input reference available for insert"),o(!1);return}const E=N.value||"",P=Math.max(0,Math.min(d,E.length));console.log(" Inserting formula at position:",P,"Value length:",E.length,"Formula:",b);const M=E.substring(0,P),j=E.substring(P),A=M+b+j;console.log(" New value:",A.substring(0,P)+"["+b+"]"+A.substring(P+b.length)),N.value=A,t&&t({target:{value:A,name:N.name}});const O=new Event("input",{bubbles:!0});if(N.dispatchEvent(O),N._valueTracker){const q=N._valueTracker;q.setValue(""),N.value=A,q.setValue(A)}const L=P+b.length;setTimeout(()=>{N.focus(),N.setSelectionRange(L,L),console.log(" Cursor moved to position:",L)},0),o(!1)};S.useEffect(()=>{console.log(" MathEditorButton rendered",{hasInputRef:!!e,inputRefType:typeof e,position:r,size:n})},[e,r,n]);const k=b=>{b.preventDefault(),b.stopPropagation();let N=null;typeof e=="function"?N=e():N=e?.current||e,y(N?.value||""),u(!0)};return S.useEffect(()=>{if(l){const b=setInterval(()=>{let N=null;typeof e=="function"?N=e():N=e?.current||e,N&&y(N.value||"")},300);return()=>clearInterval(b)}},[l,e]),c.jsxs(c.Fragment,{children:[s&&c.jsx("button",{type:"button",onClick:k,style:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:r==="right"?"48px":"auto",left:r==="left"?"48px":"auto",width:n==="small"?"32px":"40px",height:n==="small"?"32px":"40px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#10b981",color:"white",border:"2px solid #059669",borderRadius:"6px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",zIndex:10,boxShadow:"0 2px 4px rgba(0,0,0,0.2)",minWidth:"32px",minHeight:"32px"},onMouseEnter:b=>{b.target.style.backgroundColor="#059669"},onMouseLeave:b=>{b.target.style.backgroundColor="#10b981"},title:"Preview Math (p)","aria-label":"Preview math rendering",children:c.jsx("span",{style:{fontSize:"11px",fontWeight:"bold"},children:"p"})}),c.jsx("button",{type:"button",onClick:v,style:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:r==="right"?"8px":"auto",left:r==="left"?"8px":"auto",width:n==="small"?"32px":"40px",height:n==="small"?"32px":"40px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#3b82f6",color:"white",border:"2px solid #2563eb",borderRadius:"6px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",zIndex:10,boxShadow:"0 2px 4px rgba(0,0,0,0.2)",minWidth:"32px",minHeight:"32px"},onMouseEnter:b=>{b.target.style.backgroundColor="#2563eb"},onMouseLeave:b=>{b.target.style.backgroundColor="#3b82f6"},title:"Math Editor (fx)","aria-label":"Open math editor",children:c.jsx("span",{style:{fontSize:"11px",fontWeight:"bold"},children:"fx"})}),l&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:b=>{b.target===b.currentTarget&&u(!1)},role:"dialog","aria-modal":"true","aria-label":"Math Preview",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 w-full max-w-3xl mx-auto max-h-[90vh] overflow-auto",onClick:b=>b.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Math Preview"}),c.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview"}),c.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-gray-600 font-mono",children:["LaTeX: ",x||"(empty)"]}),c.jsx("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg min-h-[200px] text-lg",dangerouslySetInnerHTML:{__html:x?x.includes("$")?Gs(x,!1):Gs(_de(x),!1):'<span class="text-gray-400">No content to preview</span>'}})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Close"})})]})}),c.jsx(Sde,{isOpen:i,onClose:()=>o(!1),onSave:T,initialValue:"",cursorPosition:d,inputRef:h||e?.current||e})]})},kde=({question:e,testId:t,testType:r="true_false",mode:n="student",displayNumber:s,studentAnswer:a,onAnswerChange:i,onQuestionChange:o,onSave:l,isEditing:u=!1,isSaving:d=!1,validationErrors:f={},showCorrectAnswers:h=!1,studentId:g=null})=>{const{getItem:x,setItem:y}=K_();ai(),S.useRef(null);const[v,T]=S.useState(""),[k,b]=S.useState(""),[N,E]=S.useState(""),[P,M]=S.useState(!1),[j,A]=S.useState(!0),[O,L]=S.useState(""),[q,Q]=S.useState(!1),[ae,te]=S.useState(null);S.useEffect(()=>{if(e&&(E(e.question||""),b(e.correct_answer||""),n==="student"&&g)){const oe=x(`test_progress_${g}_${r}_${t}_${e.question_id}`);oe&&T(oe)}},[e,t,r,n,x]),S.useEffect(()=>{n==="student"&&a!==void 0&&a!==null&&(console.log(" TrueFalseQuestion syncing with parent studentAnswer:",a),T(a))},[a,n]),S.useEffect(()=>{if(n==="student"&&v&&t&&e?.question_id&&g){const oe=setTimeout(()=>{Q(!0),y(`test_progress_${g}_${r}_${t}_${e.question_id}`,v),te(new Date().toLocaleTimeString()),setTimeout(()=>Q(!1),1e3)},1e3);return()=>clearTimeout(oe)}},[v,t,r,e?.question_id,n,g,y]),S.useEffect(()=>{if(n==="teacher"&&(N||k)){const oe=setTimeout(()=>{Q(!0);const J={question:N,correct_answer:k,timestamp:Date.now()};y(`teacher_form_${r}_${t}`,J),te(new Date().toLocaleTimeString()),setTimeout(()=>Q(!1),1e3)},2e3);return()=>clearTimeout(oe)}},[N,k,t,r,n,y]);const ne=S.useCallback(oe=>{n==="student"&&(T(oe),i&&i(e.question_id,oe),R(oe))},[n,e?.question_id,i]),B=S.useCallback(oe=>{E(oe),o&&o(e.question_id,oe),H(oe)},[e?.question_id,o]),V=S.useCallback(oe=>{b(oe),o&&o(e.question_id,{...e,correct_answer:oe}),U(oe)},[e,o]),R=S.useCallback(oe=>{if(n==="student"){if(!oe){A(!1),L("Please select an answer");return}A(!0),L("")}},[n]),H=S.useCallback(oe=>{if(n==="teacher"){if(!oe||oe.trim().length<10){A(!1),L("Question must be at least 10 characters long");return}A(!0),L("")}},[n]),U=S.useCallback(oe=>{if(n==="teacher"){if(!oe){A(!1),L("Please select a correct answer");return}A(!0),L("")}},[n]),I=S.useCallback(()=>{if(n!=="teacher"||!l)return;const oe={question_id:e.question_id,question:N,correct_answer:k,type:"true_false"};l(oe)},[n,l,e?.question_id,N,k]),W=S.useCallback(oe=>oe?Gs(oe,!1):"",[]),K=()=>c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",typeof s=="number"?s:e?.question_id]}),c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[q&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(ln,{size:"small"}),c.jsx("span",{children:"Saving..."})]}),ae&&!q&&c.jsxs("div",{className:"text-green-600",children:[" Saved at ",ae]})]})]}),c.jsx("div",{className:"question-text mb-6 text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:W(N)}}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${v==="true"?"border-blue-500 bg-blue-50":"border-gray-200"} ${h&&k==="true"?"ring-2 ring-green-400":""}`,children:[c.jsx("input",{type:"radio",name:`question_${e?.question_id}`,value:"true",checked:v==="true",onChange:()=>ne("true"),className:"sr-only","aria-label":"True"}),c.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${v==="true"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:v==="true"&&c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),c.jsx("span",{className:"text-gray-800 font-medium",children:"True"})]}),c.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${v==="false"?"border-blue-500 bg-blue-50":"border-gray-200"} ${h&&k==="false"?"ring-2 ring-green-400":""}`,children:[c.jsx("input",{type:"radio",name:`question_${e?.question_id}`,value:"false",checked:v==="false",onChange:()=>ne("false"),className:"sr-only","aria-label":"False"}),c.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${v==="false"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:v==="false"&&c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),c.jsx("span",{className:"text-gray-800 font-medium",children:"False"})]})]}),!j&&O&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:O})]}),Z=()=>c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e?.question_id||"New Question"]}),c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[q&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(ln,{size:"small"}),c.jsx("span",{children:"Saving..."})]}),ae&&!q&&c.jsxs("div",{className:"text-green-600",children:[" Saved at ",ae]})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`question_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{id:`question_${e?.question_id}`,value:N,onChange:oe=>B(oe.target.value),placeholder:"Enter your question here...",className:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",rows:3,required:!0}),c.jsx(Yh,{inputRef:()=>document.getElementById(`question_${e?.question_id}`),onChange:oe=>B(oe.target.value)})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Correct Answer *"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${k==="true"?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[c.jsx("input",{type:"radio",name:`correct_${e?.question_id}`,value:"true",checked:k==="true",onChange:()=>V("true"),className:"sr-only","aria-label":"True"}),c.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${k==="true"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:k==="true"&&c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),c.jsx("span",{className:"text-gray-800 font-medium",children:"True"})]}),c.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${k==="false"?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[c.jsx("input",{type:"radio",name:`correct_${e?.question_id}`,value:"false",checked:k==="false",onChange:()=>V("false"),className:"sr-only","aria-label":"False"}),c.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${k==="false"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:k==="false"&&c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),c.jsx("span",{className:"text-gray-800 font-medium",children:"False"})]})]})]})]}),!j&&O&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:O}),c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:c.jsx(lt,{variant:"success",onClick:I,disabled:!j||d,className:"w-full sm:w-auto",children:d?c.jsx(ln,{size:"small"}):"Save Question"})})]});return c.jsx("div",{className:"true-false-question-container",children:n==="student"?K():Z()})},Tde=({question:e,testId:t,testType:r="multiple_choice",mode:n="student",studentAnswer:s,onAnswerChange:a,onQuestionChange:i,onOptionAdd:o,onOptionRemove:l,onSave:u,isEditing:d=!1,isSaving:f=!1,validationErrors:h={},showCorrectAnswers:g=!1,studentId:x=null,displayNumber:y})=>{const{getItem:v,setItem:T}=K_(),{showNotification:k}=ai();S.useRef(null);const[b,N]=S.useState(""),[E,P]=S.useState(["","","",""]),[M,j]=S.useState(""),[A,O]=S.useState(""),[L,q]=S.useState(!1),[Q,ae]=S.useState(!0),[te,ne]=S.useState(""),[B,V]=S.useState(!1),[R,H]=S.useState(null);S.useEffect(()=>{if(e&&(O(e.question||""),P(e.options||["","","",""]),j(e.correct_answer||""),n==="student"&&x)){const Ae=v(`test_progress_${x}_${r}_${t}_${e.question_id}`);Ae&&N(Ae)}},[e,t,r,n,v]),S.useEffect(()=>{n==="student"&&s!==void 0&&s!==null&&(console.log(" MultipleChoiceQuestion syncing with parent studentAnswer:",s),N(s))},[s,n]),S.useEffect(()=>{if(n==="student"&&b&&t&&e?.question_id&&x){const Ae=setTimeout(()=>{V(!0),T(`test_progress_${x}_${r}_${t}_${e.question_id}`,b),H(new Date().toLocaleTimeString()),setTimeout(()=>V(!1),1e3)},1e3);return()=>clearTimeout(Ae)}},[b,t,r,e?.question_id,n,x,T]),S.useEffect(()=>{if(n==="teacher"&&(A||E.some(Ae=>Ae.trim()))){const Ae=setTimeout(()=>{V(!0);const Me={question:A,options:E,correct_answer:M,timestamp:Date.now()};T(`teacher_form_${r}_${t}`,Me),H(new Date().toLocaleTimeString()),setTimeout(()=>V(!1),1e3)},2e3);return()=>clearTimeout(Ae)}},[A,E,M,t,r,n,T]),S.useCallback(Ae=>{if(n!=="student")return;const Me=String(Ae);N(Me),a&&a(e.question_id,Me),oe(Me)},[n,e?.question_id,a]);const U=S.useCallback(Ae=>{O(Ae),i&&i(e.question_id,Ae),J(Ae)},[e?.question_id,i]),I=S.useCallback((Ae,Me)=>{const Je=[...E];Je[Ae]=Me,P(Je),i&&i(e.question_id,{...e,options:Je}),le(Je)},[E,e,i]),W=S.useCallback(Ae=>{j(Ae),i&&i(e.question_id,{...e,correct_answer:Ae}),ue(Ae)},[e,i]),K=S.useCallback(()=>{if(E.length<6){const Ae=[...E,""];P(Ae),o&&o(e.question_id,Ae)}else k("Maximum 6 options allowed","warning")},[E,e?.question_id,o,k]),Z=S.useCallback(Ae=>{if(E.length>2){const Me=E.filter((Je,He)=>He!==Ae);if(P(Me),M===String.fromCharCode(65+Ae))j("");else if(M&&String.fromCharCode(65+Ae)<M){const Je=String.fromCharCode(65+Ae-1);j(Je)}l&&l(e.question_id,Me)}else k("Minimum 2 options required","warning")},[E,M,e?.question_id,l,k]),oe=S.useCallback(Ae=>{if(n==="student"){if(!Ae){ae(!1),ne("Please select an answer");return}ae(!0),e?.correct_answer&&Ae===e.correct_answer?ne(" Correct answer!"):e?.correct_answer?ne(" Incorrect answer"):ne("Answer selected")}},[n,e?.correct_answer]),J=S.useCallback(Ae=>!Ae||Ae.trim().length<10?(ae(!1),ne("Question must be at least 10 characters long"),!1):(ae(!0),ne(""),!0),[]),le=S.useCallback(Ae=>{if(n!=="teacher")return;if(Ae.filter(Je=>Je.trim().length>0).length<2){ae(!1),ne("At least 2 options must be filled");return}if(Ae.some(Je=>Je.trim().length>0&&Je.trim().length<3)){ae(!1),ne("Each option must be at least 3 characters long");return}ae(!0),ne("")},[n]),ue=S.useCallback(Ae=>{if(n==="teacher"){if(!Ae){ae(!1),ne("Please select a correct answer");return}ae(!0),ne("")}},[n]),de=S.useCallback(()=>{if(n!=="teacher"||!u)return;const Ae={question_id:e.question_id,question:A,options:E.filter(Me=>Me.trim().length>0),correct_answer:M,type:"multiple_choice"};u(Ae)},[n,u,e?.question_id,A,E,M]),Te=S.useCallback(Ae=>Ae?Gs(Ae,!1):"",[]);return n==="teacher"?c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e?.question_id||"New Question"]}),c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[B&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(ln,{size:"small"}),c.jsx("span",{children:"Saving..."})]}),R&&!B&&c.jsxs("div",{className:"text-green-600",children:[" Saved at ",R]})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`question_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{id:`question_${e?.question_id}`,value:A,onChange:Ae=>U(Ae.target.value),placeholder:"Enter your question here...",className:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",rows:3,required:!0}),c.jsx(Yh,{inputRef:()=>document.getElementById(`question_${e?.question_id}`),onChange:Ae=>U(Ae.target.value)})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Answer Options *"}),c.jsx(lt,{variant:"secondary",size:"small",onClick:K,disabled:E.length>=6,className:"px-3 py-1 text-sm",children:"+ Add Option"})]}),c.jsx("div",{className:"space-y-3",children:E.map((Ae,Me)=>c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+Me)}),c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"text",value:Ae,onChange:Je=>I(Me,Je.target.value),placeholder:`Option ${String.fromCharCode(65+Me)}`,className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200","data-question-id":e?.question_id,"data-option-index":Me,required:!0}),c.jsx(Yh,{inputRef:()=>document.querySelector(`[data-question-id="${e?.question_id}"][data-option-index="${Me}"]`),onChange:Je=>I(Me,Je.target.value)})]}),E.length>2&&c.jsx(lt,{variant:"danger",size:"small",onClick:()=>Z(Me),className:"px-2 py-1 text-sm",children:""})]},Me))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`correct_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),c.jsxs("select",{id:`correct_${e?.question_id}`,value:M,onChange:Ae=>W(Ae.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",required:!0,children:[c.jsx("option",{value:"",children:"Select correct answer"}),E.map((Ae,Me)=>{if(!Ae.trim())return null;const Je=String.fromCharCode(65+Me);return c.jsxs("option",{value:Je,children:[Je,") ",Ae]},Me)})]})]})]}),!Q&&te&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:te}),c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:c.jsx(lt,{variant:"success",onClick:de,disabled:!Q||f,className:"w-full sm:w-auto",children:f?c.jsx(ln,{size:"small"}):"Save Question"})})]}):c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",typeof y=="number"?y:e?.question_id]}),c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[B&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(ln,{size:"small"}),c.jsx("span",{children:"Saving..."})]}),R&&!B&&c.jsxs("div",{className:"text-green-600",children:[" Saved at ",R]})]})]}),c.jsx("div",{className:"question-text mb-6 text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:Te(A)}}),c.jsx("div",{className:"space-y-3",children:E.map((Ae,Me)=>c.jsxs("label",{className:`flex items-center p-3 rounded-lg border-2 cursor-pointer transition-all duration-200 ${b===String.fromCharCode(65+Me)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[c.jsx("input",{type:"radio",name:`mcq_${t}_${e?.question_id}`,value:String.fromCharCode(65+Me),checked:b===String.fromCharCode(65+Me),onChange:Je=>{N(Je.target.value),a&&a(e?.question_id,Je.target.value)},className:"mr-3"}),c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600 mr-3",children:String.fromCharCode(65+Me)}),c.jsx("span",{className:"flex-1",dangerouslySetInnerHTML:{__html:Ae?Gs(Ae):`Option ${String.fromCharCode(65+Me)}`}})]},Me))}),!Q&&te&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:te})]})},Cde=({question:e,testId:t,testType:r="input",mode:n="student",displayNumber:s,studentAnswer:a,onAnswerChange:i,onQuestionChange:o,onAnswerAdd:l,onAnswerRemove:u,onSave:d,isEditing:f=!1,isSaving:h=!1,validationErrors:g={},showCorrectAnswers:x=!1,studentId:y=null})=>{const{getItem:v,setItem:T}=K_(),{showNotification:k}=ai(),b=S.useRef(null),[N,E]=S.useState(""),[P,M]=S.useState([""]),[j,A]=S.useState(!1),[O,L]=S.useState(!0),[q,Q]=S.useState(""),[ae,te]=S.useState(!1);S.useEffect(()=>{if(n==="student"&&e?.question_id&&t&&r&&y){const J=`test_progress_${y}_${r}_${t}_${e.question_id}`,le=v(J);le&&E(le)}},[e?.question_id,r,t,n,y,v]),S.useEffect(()=>{n==="student"&&a!==void 0&&a!==null&&(console.log(" InputQuestion syncing with parent studentAnswer:",a),E(a))},[a,n]),S.useEffect(()=>{n==="teacher"&&e?.answers&&M(e.answers.length>0?e.answers:[""])},[e?.answers,n]),S.useEffect(()=>{if(n==="student"&&N&&e?.question_id&&t&&r&&y){const J=setTimeout(()=>{te(!0),T(`test_progress_${y}_${r}_${t}_${e.question_id}`,N),setTimeout(()=>te(!1),1e3)},1e3);return()=>clearTimeout(J)}},[N,e?.question_id,r,t,n,y,T]),S.useEffect(()=>{if(n==="teacher"&&P&&o){const J=setTimeout(()=>{o({...e,answers:P.filter(le=>le.trim())})},500);return()=>clearTimeout(J)}},[P,e,n,o]);const ne=S.useCallback(J=>{E(J);const le=J.trim().length>0;L(le),Q(le?"":"Please enter an answer"),i&&i(e.question_id,J)},[e?.question_id,i]),B=S.useCallback((J,le)=>{const ue=[...P];ue[J]=le,M(ue),i&&i(e.question_id,ue)},[P,e?.question_id,i]),V=S.useCallback(()=>{if(n==="teacher"){const J=[...P,""];M(J),l&&l(e.question_id,J)}},[P,e?.question_id,n,l]),R=S.useCallback(J=>{if(n==="teacher"&&P.length>1){const le=P.filter((ue,de)=>de!==J);M(le),u&&u(e.question_id,le)}},[P,e?.question_id,n,u]),H=S.useCallback(()=>{if(n==="student"){const J=N.trim().length>0;return L(J),Q(J?"":"Please enter an answer"),J}else if(n==="teacher"){const J=P.some(le=>le.trim().length>0);return L(J),Q(J?"":"Please enter at least one correct answer"),J}return!0},[N,P,n]),U=S.useCallback(J=>J?Gs(J,!1):"",[]),I=S.useCallback(()=>{A(!0)},[]),W=S.useCallback(()=>{A(!1),H()},[H]),K=S.useCallback(J=>{J.key==="Enter"&&n==="student"&&N.trim()&&(T(`test_progress_${r}_${t}_${e.question_id}`,N),k("Answer saved","success"))},[N,r,t,e?.question_id,n,T,k]),Z=()=>c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",typeof s=="number"?s:e.question_id]}),ae&&c.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[c.jsx(ln,{size:"small"}),c.jsx("span",{children:"Saving..."})]})]}),c.jsx("div",{className:"question-text mb-6 text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:U(e.question)}}),c.jsx("div",{className:"space-y-3",children:c.jsx("div",{className:"relative",children:c.jsx("input",{ref:b,type:"text",id:`input_${e.question_id}`,placeholder:"Enter your answer here...",value:N,onChange:J=>ne(J.target.value),onFocus:I,onBlur:W,onKeyPress:K,className:`w-full px-4 py-3 pr-10 border-2 rounded-lg text-gray-800 placeholder-gray-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 ${O?j?"border-blue-500":"border-gray-300 hover:border-gray-400":"border-red-300 focus:border-red-500 focus:ring-red-500"}`,"data-question-id":e.question_id,"aria-label":`Answer for question ${e.question_id}`,"aria-invalid":!O,"aria-describedby":O?void 0:`error-${e.question_id}`})})}),x&&e.correct_answers&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[c.jsx("h5",{className:"text-sm font-semibold text-green-800 mb-2",children:"Correct Answers:"}),c.jsx("ul",{className:"space-y-1",children:e.correct_answers.map((J,le)=>c.jsx("li",{className:"text-green-700 text-sm",dangerouslySetInnerHTML:{__html:` ${Gs(J,!1)}`}},le))})]})]}),oe=()=>c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e.question_id||"New"]}),h&&c.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[c.jsx(ln,{size:"small"}),c.jsx("span",{children:"Saving..."})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`question_${e.question_id||"new"}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",id:`question_${e.question_id||"new"}`,value:e.question||"",onChange:J=>o&&o({...e,question:J.target.value}),placeholder:"Enter question text",className:`w-full px-4 py-3 pr-10 border-2 rounded-lg text-gray-800 placeholder-gray-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 ${g.question?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:border-blue-500"}`}),c.jsx(MathEditorButton,{inputRef:()=>document.getElementById(`question_${e.question_id||"new"}`),onChange:J=>o&&o({...e,question:J.target.value})})]}),g.question&&c.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:g.question})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Correct Answers *"}),c.jsx(lt,{type:"button",variant:"secondary",size:"small",onClick:V,className:"px-3 py-1 text-sm",children:"+ Add Answer"})]}),c.jsx("div",{className:"space-y-3",children:P.map((J,le)=>c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:le+1}),c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"text",value:J,onChange:ue=>B(le,ue.target.value),placeholder:`Correct answer ${le+1}`,className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200","data-question-id":e.question_id,"data-answer-index":le}),c.jsx(MathEditorButton,{inputRef:()=>document.querySelector(`[data-question-id="${e.question_id}"][data-answer-index="${le}"]`),onChange:ue=>B(le,ue.target.value)})]}),P.length>1&&c.jsx(lt,{type:"button",variant:"danger",size:"small",onClick:()=>R(le),className:"px-2 py-1 text-sm",children:" Remove"})]},le))}),g.answers&&c.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:g.answers})]})]}),d&&c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:c.jsx(lt,{type:"button",variant:"success",onClick:d,disabled:h,className:"w-full sm:w-auto",children:h?c.jsx(ln,{size:"small"}):"Save Question"})})]});return c.jsx("div",{className:`input-question-container ${n} ${j?"focused":""}`,children:n==="student"?Z():oe()})},x1=(e,t,r)=>{const[n,s]=S.useState(!1),[a,i]=S.useState(0),[o,l]=S.useState(!1),u=S.useRef(!1);S.useEffect(()=>{if(!e||!t||!r)return;const v=`anti_cheating_${r}_${e}_${t}`,T=fa(v);T&&(i(T.tabSwitches||0),l(T.isCheating||!1))},[e,t,r]);const d=S.useCallback(()=>{if(console.log(" handleTabSwitch called - isTracking:",u.current),!u.current){console.log(" Not tracking, returning early");return}console.log(" Tab switch detected - starting 7 second timer...");const v=Date.now();setTimeout(()=>{const T=Date.now()-v;console.log(" Timer completed - time hidden:",T,"ms"),T>=6500?(console.log(" Tab was hidden for sufficient time - counting as tab switch"),i(k=>{const b=k+1,N=b>=2;console.log(" Tab switch count updated:",{newCount:b,cheating:N}),l(N);const E=`anti_cheating_${r}_${e}_${t}`;return qs(E,{tabSwitches:b,isCheating:N},120*1e3),b})):console.log(" Tab was not hidden long enough - not counting as switch")},7e3)},[e,t,r]),f=S.useCallback(()=>{u.current&&(console.log(" Visibility change detected:",{hidden:document.hidden,isTracking:u.current}),document.hidden?d():console.log(" Tab became visible"))},[d]),h=S.useCallback(()=>{console.log(" startTracking called - setting up anti-cheating detection"),console.log(" Current document.hidden state:",document.hidden),console.log(" Current document.visibilityState:",document.visibilityState),s(!0),u.current=!0,document.addEventListener("visibilitychange",f),console.log(" Anti-cheating event listeners added (visibilitychange only)")},[f]),g=S.useCallback(()=>{console.log(" stopTracking called - removing anti-cheating detection"),s(!1),u.current=!1,document.removeEventListener("visibilitychange",f),console.log(" Anti-cheating event listeners removed")},[f]),x=S.useCallback(()=>{const v={caught_cheating:o,visibility_change_times:a};return console.log(" getCheatingData called:",v),v},[o,a]),y=S.useCallback(()=>{r&&e&&t&&t1(r,e,t),i(0),l(!1),console.log(" Anti-cheating data deleted from localStorage")},[r,e,t]);return{startTracking:h,stopTracking:g,clearData:y,getCheatingData:x,tabSwitches:a,isCheating:o,isTracking:n}},Ede=({testData:e,onTestComplete:t,onBackToCabinet:r,isTestComplete:n=!1,testScore:s=null})=>{const[a,i]=S.useState(null),[o,l]=S.useState(null);S.useEffect(()=>{(async()=>{try{const[_t,qt]=await Promise.all([Vi(()=>Promise.resolve().then(()=>dae),void 0),Vi(()=>Promise.resolve().then(()=>Wne),void 0)]);i(_t),l(qt.default)}catch(_t){console.error("Failed to load Konva:",_t)}})()},[]);const u=()=>a?{Stage:a.Stage,Layer:a.Layer,Rect:a.Rect,Arrow:a.Arrow,KonvaImage:a.Image,KonvaText:a.Text,Group:a.Group}:null,[d,f]=S.useState({}),[h,g]=S.useState({}),[x,y]=S.useState(0),[v,T]=S.useState(!1),[k,b]=S.useState(null),[N,E]=S.useState(0),[P,M]=S.useState(0),[j,A]=S.useState(null),[O,L]=S.useState(null),[q,Q]=S.useState(!1),[ae,te]=S.useState(!1),[ne,B]=S.useState(!1),{showNotification:V}=ai(),{makeAuthenticatedRequest:R}=Bl(),{user:H}=Fs(),{startTracking:U,stopTracking:I,getCheatingData:W,clearData:K}=x1("matching_type",e?.id,H?.student_id||H?.id),Z=S.useRef(null),oe=S.useRef(null),J=S.useRef(null),le=S.useRef(0),[ue,de]=S.useState(400);S.useRef({});const Te=S.useCallback(()=>{Q(!0)},[]),ie=S.useCallback(()=>{g({}),f({}),Q(!1)},[]),xe=S.useCallback(()=>{te(!0)},[]),Ae=S.useCallback(()=>{te(!1),r()},[r]),Me=S.useMemo(()=>{if(!e)return null;const ut=e.blocks.map(Jt=>{let Ht=Jt.coordinates;if(typeof Ht=="string")try{Ht=JSON.parse(Ht)}catch($e){console.error(" Failed to parse coordinates:",$e),Ht={x:0,y:0,width:100,height:100}}return Ht={x:(typeof Ht.x=="number"?Ht.x:Number(Ht.x))||0,y:(typeof Ht.y=="number"?Ht.y:Number(Ht.y))||0,width:(typeof Ht.width=="number"?Ht.width:Number(Ht.width))||30,height:(typeof Ht.height=="number"?Ht.height:Number(Ht.height))||10},{id:Jt.id,word:Jt.word,coordinates:Ht,hasArrow:Jt.hasArrow,arrow:Jt.arrow}}),_t=Array.isArray(e.arrows)?e.arrows:[],qt=e.words.map(Jt=>({id:Jt.id,word:Jt.word,blockId:null,isPlaced:!1,isCorrect:!1}));return{blocks:ut,arrows:_t,words:qt}},[e]);S.useEffect(()=>{if(!e?.image_url)return;const ut=new Image;ut.crossOrigin="anonymous",ut.onload=()=>{console.log(" Image loaded successfully"),E(ut.width),M(ut.height);const _t=Z.current?.clientWidth||800,qt=Z.current?.clientHeight||600,Jt=_t/ut.width,Ht=qt/ut.height,$e=Math.min(Jt,Ht,1),ze=ut.width*$e,tt=ut.height*$e,ot=(_t-ze)/2,nt=(qt-tt)/2;b({x:ot,y:nt,width:ze,height:tt,scaleX:$e,scaleY:$e,scale:$e,image:ut}),le.current=Z.current?.clientWidth||800,console.log(" Image info calculated:",{x:ot,y:nt,width:ze,height:tt,scaleX:$e,scaleY:$e})},ut.onerror=()=>{console.error(" Failed to load image"),V("Failed to load test image","error")},ut.src=e.image_url},[e?.image_url,V]),S.useEffect(()=>{if(!Me||!k)return;const ut=le.current||Z.current?.clientWidth||800,_t=12,qt=38;let Jt=k.x,Ht=k.y+k.height+_t;const $e=k.x+k.width,ze={};Me.words.forEach(nt=>{if(!Object.prototype.hasOwnProperty.call(h,nt.id)){const Dt=typeof nt.word=="string"?nt.word:"",Rt=Math.max(60,Dt.length*8+20);Jt+Rt>Math.min(ut-_t,$e)&&(Jt=k.x,Ht+=qt),d[nt.id]||(ze[nt.id]={x:Jt,y:Ht}),Jt+=Rt+_t}}),Object.keys(ze).length&&f(nt=>({...nt,...ze}));const tt=Object.values(ze).reduce((nt,Dt)=>Math.max(nt,Dt.y),Ht),ot=Math.max(k.y+k.height+_t,tt+qt+_t);de(Math.max(400,Math.ceil(ot)))},[Me,k,h,d]);const Je=S.useCallback(()=>{if(!k||!Me)return[];const ut=u();return ut?Me.blocks.map(_t=>{const qt=_t.coordinates;let Jt,Ht,$e,ze;Jt=k.x+qt.x*(k.scale??k.scaleX),Ht=k.y+qt.y*(k.scale??k.scaleY),$e=qt.width*(k.scale??k.scaleX),ze=qt.height*(k.scale??k.scaleY);const tt=h[_t.id];return c.jsxs(ut.Group,{children:[c.jsx(ut.Rect,{x:Jt,y:Ht,width:$e,height:ze,fill:tt?"rgba(40, 167, 69, 0.4)":j===_t.id?"rgba(0, 123, 255, 0.25)":"rgba(0, 123, 255, 0.15)",stroke:tt?"#28a745":j===_t.id?"#0056b3":"#007bff",strokeWidth:2,cornerRadius:6,shadowColor:tt?"rgba(40, 167, 69, 0.3)":"rgba(0, 123, 255, 0.3)",shadowBlur:10,shadowOffset:{x:0,y:2},shadowOpacity:.5}),tt&&c.jsx(ut.KonvaText,{x:Jt+5,y:Ht+ze/2-10,width:$e-10,height:20,text:Me.words.find(ot=>ot.id===tt)?.word||"",fontSize:Math.min(12,$e/8),fontFamily:"Arial",fill:"#2c3e50",align:"center",verticalAlign:"middle",listening:!1})]},_t.id)}):[]},[k,Me,h,a]),He=S.useCallback(()=>{if(!k||!Me)return[];const ut=u();return ut?(console.log(" Processing arrows:",Me.arrows),Me.arrows.map(_t=>{if(console.log(" Arrow data:",_t),!_t.start||!_t.end)return console.warn(" Arrow missing start/end coordinates:",_t),null;let qt,Jt,Ht,$e;if(_t.rel_start_x!==null&&_t.rel_start_y!==null&&_t.rel_end_x!==null&&_t.rel_end_y!==null&&_t.image_width&&_t.image_height&&_t.image_width>0&&_t.image_height>0){const ze=_t.image_width,tt=_t.image_height,ot=k.width/ze,nt=k.height/tt;qt=k.x+Number(_t.rel_start_x)/100*ze*ot,Jt=k.y+Number(_t.rel_start_y)/100*tt*nt,Ht=k.x+Number(_t.rel_end_x)/100*ze*ot,$e=k.y+Number(_t.rel_end_y)/100*tt*nt}else{const ze=k.scale??k.scaleX??1,tt=Number(_t.start.x),ot=Number(_t.start.y),nt=Number(_t.end.x),Dt=Number(_t.end.y);tt<=k.width+1&&nt<=k.width+1&&ot<=k.height+1&&Dt<=k.height+1?(qt=k.x+(isNaN(tt)?0:tt),Jt=k.y+(isNaN(ot)?0:ot),Ht=k.x+(isNaN(nt)?0:nt),$e=k.y+(isNaN(Dt)?0:Dt)):(qt=k.x+(isNaN(tt)?0:tt)*ze,Jt=k.y+(isNaN(ot)?0:ot)*ze,Ht=k.x+(isNaN(nt)?0:nt)*ze,$e=k.y+(isNaN(Dt)?0:Dt)*ze)}return c.jsx(ut.Arrow,{points:[qt,Jt,Ht,$e],stroke:_t.style?.color||"#dc3545",fill:_t.style?.color||"#dc3545",strokeWidth:_t.style?.thickness||3,pointerLength:10,pointerWidth:10},_t.id)}).filter(Boolean)):[]},[k,Me,a]),It=S.useCallback(()=>{if(!Me)return[];const ut=u();return ut?Me.words.map(_t=>{const qt=d[_t.id]||{x:0,y:0},Jt=typeof _t.word=="string"?_t.word:"",Ht=Math.max(60,Jt.length*8+20);return Object.values(h).includes(_t.id)?null:c.jsxs(ut.Group,{x:qt.x,y:qt.y,draggable:!0,onDragEnd:ze=>it(ze,_t.id),children:[c.jsx(ut.Rect,{width:Ht,height:34,fill:"#ffffff",stroke:"#ced4da",strokeWidth:1,cornerRadius:4,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:5,shadowOffset:{x:0,y:2},shadowOpacity:.3,listening:!0}),c.jsx(ut.KonvaText,{text:Jt,fontSize:14,fontFamily:"Arial",fill:"#343a40",padding:8,align:"center",verticalAlign:"middle",width:Ht,height:34,listening:!1})]},_t.id)}):[]},[Me,d,h,k,a]),it=S.useCallback((ut,_t)=>{const qt=ut.target.x(),Jt=ut.target.y();if(f(Rt=>({...Rt,[_t]:{x:qt,y:Jt}})),!k||!Me)return;const Ht=Me.words.find(Rt=>Rt.id===_t);if(!Ht)return;const $e=typeof Ht.word=="string"?Ht.word:"",ze=Math.max(60,$e.length*8+20),tt={x:qt,y:Jt,width:ze,height:34},ot=k.scale??k.scaleX??1,nt=(Rt,Qt)=>!(Qt.x>Rt.x+Rt.width||Qt.x+Qt.width<Rt.x||Qt.y>Rt.y+Rt.height||Qt.y+Qt.height<Rt.y),Dt=Me.blocks.find(Rt=>{const Qt=Rt.coordinates,wr={x:k.x+Qt.x*ot,y:k.y+Qt.y*ot,width:Qt.width*ot,height:Qt.height*ot};return nt(tt,wr)});if(Dt){g(Tr=>({...Tr,[Dt.id]:_t}));const Rt=Dt.coordinates,Qt=k.x+Rt.x*ot,wr=k.y+Rt.y*ot,kr=Rt.width*ot,zr=Rt.height*ot;f(Tr=>({...Tr,[_t]:{x:Qt+(kr-ze)/2,y:wr+(zr-34)/2}})),V(`Word "${Ht.word}" placed in block`,"success")}},[k,Me,V]),kt=S.useCallback(()=>{if(!Me)return 0;const ut=Me.words.length,_t=Object.keys(h).length;return ut>0?_t/ut*100:0},[Me,h]);S.useEffect(()=>{const ut=kt();y(ut)},[kt]),S.useEffect(()=>{if(e&&!O){const ut=new Date;L(ut),console.log(" Test timer started at:",ut.toISOString()),U(),console.log(" Anti-cheating tracking started")}},[e,O,U]);const pt=S.useCallback(async()=>{if(Me){T(!0);try{const ut=Me.words.length;let _t=0;console.log(" Scoring check - placedWords:",h),console.log(" Scoring check - blocks:",Me.blocks.map(gr=>({id:gr.id,word:gr.word}))),console.log(" Scoring check - words:",Me.words.map(gr=>({id:gr.id,word:gr.word}))),Me.blocks.forEach(gr=>{const ve=h[gr.id];if(console.log(` Block ${gr.id} (expects "${gr.word}") has placed word ID: ${ve}`),ve){const Fe=Me.words.find(Le=>Le.id===ve);console.log(" Placed word:",Fe),Fe&&Fe.word===gr.word?(_t++,console.log(` Correct! Block ${gr.id} has correct word "${Fe.word}"`)):console.log(` Incorrect! Block ${gr.id} expected "${gr.word}" but got "${Fe?.word||"nothing"}"`)}else console.log(` Block ${gr.id} has no word placed`)});const qt=_t,Jt=ut;console.log(` Final Score: ${qt}/${Jt} (${Math.round(qt/Jt*100)}%)`);const Ht=new Date,$e=O?Math.round((Ht-O)/1e3):0,ze=O?O.toISOString():Ht.toISOString();console.log(" Test timing:",{startedAt:ze,endTime:Ht.toISOString(),timeTaken:`${$e} seconds`});const tt=W();console.log(" Anti-cheating data for submission:",tt);const ot=H.student_id,nt=`retest_assignment_id_${ot}_matching_type_${e.id}`,Dt=localStorage.getItem(nt),{academicCalendarService:Rt}=await Vi(async()=>{const{academicCalendarService:gr}=await Promise.resolve().then(()=>n3);return{academicCalendarService:gr}},void 0);await Rt.loadAcademicCalendar();const wr=Rt.getCurrentTerm()?.id;if(!wr)throw new Error("No current academic period found");const kr={test_id:e.id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:ot,academic_period_id:wr,answers:h,score:qt,maxScore:Jt,time_taken:$e,started_at:ze,submitted_at:Ht.toISOString(),caught_cheating:tt.caught_cheating,visibility_change_times:tt.visibility_change_times,retest_assignment_id:Dt?Number(Dt):null,parent_test_id:e.id};console.log(" Submitting test data:",kr);const Tr=await(await R("/.netlify/functions/submit-matching-type-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(kr)})).json();if(console.log(" Submission response:",Tr),Tr.success){if(V("Test submitted successfully!","success"),I(),K(),H?.student_id&&t1(H.student_id,"matching_type",e.id),!!Dt&&H?.student_id){let Fe=3;try{const Pt=localStorage.getItem(`student_active_tests_${H.student_id}`);if(Pt){const Ye=JSON.parse(Pt)?.tests?.find(Ne=>Ne.test_id===e.id&&Ne.test_type==="matching_type");Ye&&(Fe=Ye.retest_attempts_left||Ye.max_attempts||3)}}catch(Pt){console.error("Error checking active tests cache:",Pt)}const Ue=(qt>0&&Jt>0?qt/Jt*100:0)>=50;if(Ue){const Pt=`retest_attempt${Fe}_${H.student_id}_matching_type_${e.id}`;localStorage.setItem(Pt,"true"),console.log(" Passed retest, marking last-slot key:",Pt);let Ie=0;for(let Ve=1;Ve<=10;Ve++){const Ge=`retest_attempt${Ve}_${H.student_id}_matching_type_${e.id}`;localStorage.getItem(Ge)==="true"&&Ie++}const Ye=`test_completed_${H.student_id}_matching_type_${e.id}`;localStorage.setItem(Ye,"true"),console.log(" Marked retest as completed (student passed):",Ye);const Ne=`retest_attempts_${H.student_id}_matching_type_${e.id}`;localStorage.setItem(Ne,JSON.stringify({used:Ie,max:Fe})),console.log(" Set retest attempts metadata (student passed):",Ne,{used:Ie,max:Fe})}else{let Pt=1;for(let Ge=1;Ge<=10;Ge++){const Ot=`retest_attempt${Ge}_${H.student_id}_matching_type_${e.id}`;if(localStorage.getItem(Ot)!=="true"){Pt=Ge;break}}const Ie=`retest_attempt${Pt}_${H.student_id}_matching_type_${e.id}`;localStorage.setItem(Ie,"true"),console.log(" Marked retest attempt as completed:",Ie);let Ye=0;for(let Ge=1;Ge<=10;Ge++){const Ot=`retest_attempt${Ge}_${H.student_id}_matching_type_${e.id}`;localStorage.getItem(Ot)==="true"&&Ye++}const Ne=Fe-Ye,Ve=Ne<=0||Ue;if(console.log(" Retest completion check:",{usedAttempts:Ye,maxAttempts:Fe,attemptsLeft:Ne,passed:Ue,shouldComplete:Ve}),Ve){const Ge=`test_completed_${H.student_id}_matching_type_${e.id}`;localStorage.setItem(Ge,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",Ge);const Ot=`retest_attempts_${H.student_id}_matching_type_${e.id}`;localStorage.setItem(Ot,JSON.stringify({used:Ye,max:Fe})),console.log(" Set retest attempts metadata (attempts exhausted):",Ot,{used:Ye,max:Fe})}}}else if(H?.student_id){const Fe=`test_completed_${H.student_id}_matching_type_${e.id}`;localStorage.setItem(Fe,"true"),console.log(" Test marked as completed in localStorage:",Fe)}if(H?.student_id){const{setCachedData:Fe,CACHE_TTL:Le}=await Vi(async()=>{const{setCachedData:Pt,CACHE_TTL:Ie}=await Promise.resolve().then(()=>cp);return{setCachedData:Pt,CACHE_TTL:Ie}},void 0),Ue=`student_results_table_${H.student_id}`;Fe(Ue,Tr,Le.student_results_table),console.log(" Test results cached with key:",Ue)}const ve=`retest1_${ot}_matching_type_${e.id}`;localStorage.removeItem(ve),localStorage.removeItem(nt),t&&t(qt)}else throw new Error(Tr.message||"Failed to submit test")}catch(ut){console.error(" Error submitting test:",ut),V(`Error submitting test: ${ut.message}`,"error")}finally{T(!1)}}},[Me,h,e,H,O,R,V,t]);return!e||!Me?c.jsx(ln,{}):c.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:c.jsxs("div",{className:"max-w-6xl mx-auto",children:[c.jsx("div",{className:"flex justify-end mb-2",children:c.jsx(lt,{onClick:xe,variant:"outline",size:"sm",children:"Back to Cabinet"})}),c.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.test_name})}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-sm text-gray-500",children:"Progress"}),c.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(x),"%"]})]})]}),c.jsx("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${x}%`}})})]}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:c.jsx("div",{className:"lg:col-span-3",children:c.jsxs($t,{className:"p-4",children:[c.jsx("div",{className:"mb-4 text-center",children:c.jsx(lt,{onClick:Te,variant:"secondary",children:"Reset"})}),c.jsx("div",{ref:Z,className:"w-full bg-gray-100 rounded-lg overflow-hidden",style:{height:`${ue}px`},children:k&&a?(()=>{const{Stage:ut,Layer:_t,KonvaImage:qt}=u();return c.jsxs(ut,{ref:oe,width:Z.current?.clientWidth||800,height:ue,children:[c.jsxs(_t,{children:[c.jsx(qt,{ref:J,image:k.image,x:k.x,y:k.y,width:k.width,height:k.height,listening:!1}),Je(),He()]}),c.jsx(_t,{listening:!0,children:It()})]})})():k?c.jsxs("div",{className:"flex items-center justify-center h-full",children:[c.jsx(ln,{size:"lg"}),c.jsx("span",{className:"ml-2 text-gray-600",children:"Loading Konva canvas..."})]}):null}),c.jsx("div",{className:"mt-4 text-center",children:c.jsx(lt,{onClick:()=>B(!0),disabled:v||x<100,children:v?"Submitting...":"Submit Test"})})]})})}),c.jsx($a,{isOpen:q,onClose:()=>Q(!1),title:"Reset Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to reset? This will clear all your progress and placed words."}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(lt,{onClick:()=>Q(!1),variant:"secondary",children:"Cancel"}),c.jsx(lt,{onClick:ie,variant:"primary",children:"Reset"})]})]})}),c.jsx($a,{isOpen:ae,onClose:()=>te(!1),title:"Exit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet? Your progress will be saved but you will exit the test."}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(lt,{onClick:()=>te(!1),variant:"secondary",children:"Cancel"}),c.jsx(lt,{onClick:Ae,variant:"primary",children:"Go Back"})]})]})}),c.jsx($a,{isOpen:ne,onClose:()=>B(!1),title:"Submit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(lt,{onClick:()=>B(!1),variant:"secondary",children:"Cancel"}),c.jsx(lt,{onClick:()=>{B(!1),pt()},variant:"primary",children:"Submit"})]})]})})]})})},Nde=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{user:i}=Fs(),{makeAuthenticatedRequest:o}=Bl(),{showNotification:l}=ai(),[u,d]=S.useState([{leftWord:"",rightWord:""},{leftWord:"",rightWord:""},{leftWord:"",rightWord:""}]),[f,h]=S.useState("drag"),[g,x]=S.useState(!1),[y,v]=S.useState(null),T=S.useCallback(()=>{d(M=>[...M,{leftWord:"",rightWord:""}])},[]),k=S.useCallback(M=>{u.length>1&&d(j=>j.filter((A,O)=>O!==M))},[u.length]),b=S.useCallback((M,j)=>{d(A=>A.map((O,L)=>L===M?{...O,leftWord:j}:O))},[]),N=S.useCallback((M,j)=>{d(A=>A.map((O,L)=>L===M?{...O,rightWord:j}:O))},[]),E=S.useCallback(()=>u.every(M=>M.leftWord.trim()&&M.rightWord.trim()),[u]),P=S.useCallback(async()=>{if(!E()){l("Please fill in all word pairs","error");return}x(!0),v(null);try{const M=u.map((A,O)=>({question_id:O+1,left_word:A.leftWord.trim(),right_word:A.rightWord.trim()})),j={test_name:e,num_questions:M.length,interaction_type:f,questions:M};console.log(" Saving word matching test:",j),t({testName:e,numQuestions:M.length,interactionType:f,wordPairs:u,questions:M})}catch(M){console.error("Error saving word matching test:",M),v(M.message),l("Failed to save test: "+M.message,"error")}finally{x(!1)}},[e,u,f,E,o,l,t]);return c.jsxs(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-6xl mx-auto p-0",children:[c.jsx($t,{className:"mb-6",children:c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Choose Interaction Type"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:` p-4 border-2 rounded-lg cursor-pointer transition-all ${f==="drag"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>h("drag"),children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("input",{type:"radio",checked:f==="drag",onChange:()=>h("drag"),className:"mr-3"}),c.jsx("h4",{className:"font-medium",children:"Drag & Drop"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Students drag words from left list to right list"}),c.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" Easier for younger students",c.jsx("br",{})," Visual feedback on placement",c.jsx("br",{})," Mobile-friendly"]})]}),c.jsxs("div",{className:` p-4 border-2 rounded-lg cursor-pointer transition-all ${f==="arrow"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>h("arrow"),children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("input",{type:"radio",checked:f==="arrow",onChange:()=>h("arrow"),className:"mr-3"}),c.jsx("h4",{className:"font-medium",children:"Draw Arrows"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Students draw arrows connecting matching words"}),c.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" More challenging",c.jsx("br",{})," Better for visual learners",c.jsx("br",{})," Requires precision"]})]})]})]})}),c.jsx($t,{className:"mb-6",children:c.jsxs("div",{className:"word-pairs-section",children:[c.jsxs("div",{className:"pairs-header flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Word Pairs"}),c.jsx(lt,{onClick:T,size:"sm",children:"+ Add Pair"})]}),c.jsx("div",{className:"pairs-list space-y-3 p-0 md:p-4",children:u.map((M,j)=>c.jsxs("div",{className:"word-pair-row flex items-center space-x-2 md:space-x-4 p-2 md:p-4 bg-gray-50 rounded-lg border",children:[c.jsx("div",{className:"pair-number flex-shrink-0",children:c.jsx("span",{className:"number-badge w-6 h-6 md:w-8 md:h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs md:text-sm font-semibold",children:j+1})}),c.jsx("div",{className:"left-word flex-1",children:c.jsx("input",{type:"text",value:M.leftWord,onChange:A=>b(j,A.target.value),placeholder:"Left word...",className:"word-input w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),c.jsx("div",{className:"pair-arrow flex-shrink-0 text-gray-500 text-lg md:text-xl",children:""}),c.jsx("div",{className:"right-word flex-1",children:c.jsx("input",{type:"text",value:M.rightWord,onChange:A=>N(j,A.target.value),placeholder:"Right word...",className:"word-input w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),c.jsx("div",{className:"pair-actions flex-shrink-0",children:c.jsx(lt,{onClick:()=>k(j),variant:"outline",size:"sm",className:"remove-btn w-6 h-6 md:w-8 md:h-8 p-0 text-red-500 hover:bg-red-50",disabled:u.length<=1,children:""})})]},j))})]})}),c.jsx($t,{className:"mb-6",children:c.jsxs("div",{className:"preview-section",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),c.jsx("div",{className:"preview-pairs space-y-2",children:u.map((M,j)=>c.jsxs("div",{className:"preview-pair flex items-center space-x-2 text-sm",children:[c.jsxs("span",{className:"preview-number font-semibold text-blue-600",children:[j+1,"."]}),c.jsx("span",{className:"preview-left px-2 py-1 bg-white rounded border",children:M.leftWord||"Left word"}),c.jsx("span",{className:"preview-arrow text-gray-500",children:""}),c.jsx("span",{className:"preview-right px-2 py-1 bg-white rounded border",children:M.rightWord||"Right word"})]},j))})]})}),c.jsxs("div",{className:"flex justify-center space-x-4",children:[c.jsx(lt,{onClick:P,disabled:!E()||g,className:"px-8",children:g?c.jsxs(c.Fragment,{children:[c.jsx(ln,{size:"sm",color:"white",className:"mr-2"}),"Saving Test..."]}):"Save Test"}),c.jsx(lt,{onClick:r,variant:"secondary",children:"Cancel"})]}),y&&c.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-600",children:y})})]})},Ade=(e,t)=>{const[r,n,s]=rW(`test_progress_${e}_${t}`,{}),[a,i]=S.useState(!1),[o,l]=S.useState(0),[u,d]=S.useState(0),[f,h]=S.useState(!1),[g,x]=S.useState(null),y=S.useRef(null),v=S.useRef(null),T=S.useCallback((R,H)=>{if(!window.tokenManager||!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot save progress: No valid JWT token");return}n(U=>({...U,[R]:H})),console.log(`Saved progress for question ${R}:`,H)},[n]),k=S.useCallback(R=>!window.tokenManager||!window.tokenManager.isAuthenticated()?(console.warn("[WARN] Cannot get progress: No valid JWT token"),null):r[R]||null,[r]),b=S.useCallback(()=>{if(console.log(`[DEBUG] clearTestProgress called with testType: ${e}, testId: ${t}`),!window.tokenManager||!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot clear progress: No valid JWT token");return}const R=`test_progress_${e}_${t}`;console.log(`[DEBUG] Removing localStorage key: ${R}`);const H=Object.keys(r).length>0;s(),console.log(H?`[DEBUG] Progress cleared for test ${e}_${t}`:`[DEBUG] No progress found to clear for test ${e}_${t}`)},[s,e,t,r]),N=S.useCallback(()=>{y.current&&(N(y.current),y.current=null),v.current&&(N(v.current),v.current=null)},[]),E=S.useCallback(()=>{console.log(`[DEBUG] setupProgressTrackingForPage called with testType: ${e}, testId: ${t}`),v.current=setInterval(()=>{console.log("[DEBUG] Auto-saving progress..."),O()},3e4),console.log("[DEBUG] Progress tracking interval set up (30 seconds)")},[e,t]),P=S.useCallback(()=>{console.log(`[DEBUG] updateProgressDisplayForPage called with testType: ${e}, testId: ${t}`);const R=A(),H=u>0?Math.round(R/u*100):0;return console.log(`[DEBUG] Progress: ${R}/${u} questions answered`),console.log(`[DEBUG] Progress bar updated: ${H}%`),{answeredQuestions:R,totalQuestions:u,percentage:H}},[e,t,u]),M=S.useCallback(()=>{console.log("[DEBUG] updateSubmitButtonStateForPage called");const R=A();console.log(`[DEBUG] Submit button state check: ${R}/${u} questions answered`);const H=R===u&&u>0;return console.log(H?"[DEBUG] Submit button enabled - all questions answered":"[DEBUG] Submit button disabled - not all questions answered"),H},[u]),j=S.useCallback(()=>{console.log(`[DEBUG] loadSavedProgressForPage called with testType: ${e}, testId: ${t}`);try{if(console.log("[DEBUG] Loaded progress from localStorage:",r),Object.keys(r).length===0){console.log("[DEBUG] No saved progress found");return}const R=Object.keys(r).length;l(R),console.log(`[DEBUG] Restored ${R} answered questions`)}catch(R){console.error("[ERROR] Failed to load saved progress:",R),x(R.message)}},[e,t,r]),A=S.useCallback(()=>{console.log(`[DEBUG] getAnsweredQuestionsCountForPage called with testType: ${e}`);const R=Object.keys(r).length;return l(R),console.log(`[DEBUG] Found ${R} answered questions`),R},[e,r]),O=S.useCallback(()=>{console.log(`[DEBUG] saveProgressForPage called with testType: ${e}, testId: ${t}`);try{console.log("[DEBUG] Progress saved:",r)}catch(R){console.error("[ERROR] Failed to save progress:",R),x(R.message)}},[e,t,r]),L=S.useCallback(()=>{try{const R=`test_completed_${e}_${t}`,H=localStorage.getItem(R)==="true";return i(H),H}catch(R){return console.error("Error checking test completion:",R),!1}},[e,t]),q=S.useCallback(()=>{try{const R=`test_completed_${e}_${t}`;localStorage.setItem(R,"true"),i(!0),console.log(`Test ${e}_${t} marked as completed`)}catch(R){console.error("Error marking test completed:",R)}},[e,t]),Q=S.useCallback(()=>{console.log("Marking test completed in UI:",{testType:e,testId:t}),q()},[e,t,q]),ae=S.useCallback(R=>{try{const H=`test_creation_state_${e}_${t}`;localStorage.setItem(H,JSON.stringify(R)),console.log("Test creation state saved:",R)}catch(H){console.error("Error saving test creation state:",H)}},[e,t]),te=S.useCallback(()=>{try{const R=`test_creation_state_${e}_${t}`;localStorage.removeItem(R),console.log("Test creation state cleared")}catch(R){console.error("Error clearing test creation state:",R)}},[e,t]),ne=S.useCallback((R,H)=>{try{const U=`test_step_${e}_${t}_${R}`;localStorage.setItem(U,JSON.stringify(H)),console.log(`Step ${R} data saved:`,H)}catch(U){console.error(`Error saving step ${R} data:`,U)}},[e,t]),B=S.useCallback(R=>{try{const H=`test_step_${e}_${t}_${R}`,U=localStorage.getItem(H);return U?JSON.parse(U):null}catch(H){return console.error(`Error restoring step ${R} data:`,H),null}},[e,t]),V=S.useCallback(()=>{try{const R=`test_creation_state_${e}_${t}`,H=localStorage.getItem(R);return H?JSON.parse(H):null}catch(R){return console.error("Error restoring test creation state:",R),null}},[e,t]);return S.useEffect(()=>()=>{N()},[e,t,E,j,N]),S.useEffect(()=>{A()},[r,A]),{progress:r,isCompleted:a,answeredCount:o,totalQuestions:u,isLoading:f,error:g,saveProgress:T,getProgress:k,clearProgress:b,clearInterval:N,setupProgressTracking:E,updateProgress:P,updateSubmitButton:M,loadProgress:j,getAnsweredCount:A,saveProgressForPage:O,checkCompleted:L,markCompleted:q,markCompletedUI:Q,saveState:ae,clearState:te,saveStepData:ne,restoreStepData:B,restoreState:V,setTotalQuestions:d,setError:x}},jde=({testData:e,onTestComplete:t,onBackToCabinet:r})=>{const{user:n}=Fs(),{makeAuthenticatedRequest:s}=Bl(),{showNotification:a}=ai(),[i,o]=S.useState({width:window.innerWidth,height:window.innerHeight});S.useEffect(()=>{const $e=()=>{o({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",$e),()=>window.removeEventListener("resize",$e)},[]);const{getCheatingData:l,stopTracking:u,clearData:d}=x1(),[f,h]=S.useState(null),[g,x]=S.useState({}),[y,v]=S.useState(null),T=S.useRef(null),[k,b]=S.useState(800),N={VERY_SMALL:400,MOBILE:600,TABLET:900},E={VERY_SMALL:.6,MOBILE:.8,TABLET:.9,DESKTOP:1},P={CANVAS_HEIGHT:400,BLOCK_WIDTH:140,BLOCK_HEIGHT:50,BLOCK_SPACING:80,MARGIN:50},M=i.width<N.VERY_SMALL,j=i.width>=N.VERY_SMALL&&i.width<N.MOBILE,A=i.width>=N.MOBILE&&i.width<N.TABLET;i.width>=N.TABLET;const O=M?E.VERY_SMALL:j?E.MOBILE:A?E.TABLET:E.DESKTOP;S.useEffect(()=>{const $e=()=>{if(T.current){const tt=T.current.clientWidth;console.log(" Container width detected:",tt),tt>0&&b(tt)}};$e();const ze=[setTimeout($e,50),setTimeout($e,100),setTimeout($e,200),setTimeout($e,500)];return window.addEventListener("resize",$e),()=>{ze.forEach(tt=>clearTimeout(tt)),window.removeEventListener("resize",$e)}},[f]);const L=P.BLOCK_WIDTH*O,q=P.BLOCK_HEIGHT*O,Q=P.BLOCK_SPACING*O,ae=P.MARGIN*O,te=ae;console.log(" Mobile Debug:",{screenWidth:i.width,containerWidth:T.current?.clientWidth,canvasWidth:k,scale:O,blockWidth:L,margin:ae,leftBlockX:te,displayDataLoaded:!!f});const ne=te+L+20+L+ae,B=ne<=k;let V,R=L,H=q;if(B)V=Math.min(Math.max(te+L+20,k-L-ae),k-L-ae);else{const $e=k-ae*2,ze=Math.floor(($e-20)/2);R=Math.max(60,ze),H=Math.max(30,H*(R/L)),V=te+R+20,console.log(" Very small screen - adjusted block size:",{availableWidth:$e,maxBlockWidth:ze,actualBlockWidth:R,actualBlockHeight:H})}console.log(" Right Block Position:",{rightBlockX:V,rightBlockRightEdge:V+R,canvasWidth:k,fits:V+R<=k,canFitSideBySide:B,minRequiredWidth:ne});const U=ae,I={DRAGGED_WORD:Math.max(8,14*O),ORIGINAL_WORD:Math.max(10,16*O),LEFT_WORD:Math.max(10,14*O)},W=Math.max(1,3*O),K=S.useCallback(($e,ze,tt)=>{if(!$e)return H;const ot=ze*.55,nt=Math.floor(tt/ot),Dt=Math.ceil($e.length/nt),Rt=ze*1.1,Qt=12*O,wr=Dt*Rt+Qt,kr=Math.max(H*.8,30*O);return Math.max(kr,wr)},[H,O]),oe=S.useCallback(()=>{if(!f?.leftWords||!f?.rightWords)return P.CANVAS_HEIGHT*O;let $e=ae*2;for(let tt=0;tt<f.leftWords.length;tt++){const ot=f.leftWords[tt],nt=f.rightWords[tt],Dt=K(ot,I.LEFT_WORD,R),Rt=K(nt,I.ORIGINAL_WORD,R),Qt=Math.max(Dt,Rt);$e+=Qt,tt<f.leftWords.length-1&&($e+=20*O)}const ze=P.CANVAS_HEIGHT*O;return Math.max(ze,$e)},[f,K,I,R,ae,O])();S.useCallback(($e,ze)=>{if(!$e||!ze)return Q;const tt=$e.map((Dt,Rt)=>{const Qt=ze[Rt],wr=K(Dt,I.LEFT_WORD,R),kr=K(Qt,I.ORIGINAL_WORD,R);return Math.max(wr,kr)}),ot=Math.max(...tt),nt=20*O;return ot+nt},[Q,K,I,R,O]);const le=S.useCallback(()=>{if(!f?.leftWords||!f?.rightWords)return[];const $e=[];let ze=ae;for(let tt=0;tt<f.leftWords.length;tt++){const ot=f.leftWords[tt],nt=f.rightWords[tt],Dt=K(ot,I.LEFT_WORD,R),Rt=K(nt,I.ORIGINAL_WORD,R),Qt=Math.max(Dt,Rt);$e.push({y:ze,leftHeight:Dt,rightHeight:Rt,rowHeight:Qt}),ze+=Qt+20*O}return $e},[f,K,I,R,ae,O])(),[ue,de]=S.useState([]),[Te,ie]=S.useState(!1),[xe,Ae]=S.useState(!1),[Me,Je]=S.useState(null),[He,It]=S.useState(!1),[it,kt]=S.useState(!1);S.useEffect(()=>{if(e){if(console.log(" WordMatchingStudent: Initializing test data:",e),console.log(" Interaction type:",e.interaction_type),console.log(" Left words:",e.leftWords),console.log(" Right words:",e.rightWords),console.log(" Correct pairs:",e.correctPairs),!Array.isArray(e.leftWords)||!Array.isArray(e.rightWords)){console.error(" Invalid data structure - leftWords or rightWords not arrays:",{leftWords:e.leftWords,rightWords:e.rightWords});return}if(h(e),Je(new Date),n?.student_id){const $e=`test_progress_${n.student_id}_word_matching_${e.id}`,ze=fa($e);ze&&(x(ze.answers||{}),de(ze.arrows||[]),Je(new Date(ze.startTime)),console.log(" Test progress restored:",ze))}}},[e,n?.student_id]),S.useEffect(()=>{if(f&&Me&&n?.student_id){const $e=setInterval(()=>{const ze={answers:g,arrows:ue,startTime:Me.toISOString()},tt=`test_progress_${n.student_id}_word_matching_${e.id}`;qs(tt,ze,da.test_progress),console.log(" Progress auto-saved")},3e4);return()=>clearInterval($e)}},[f,g,ue,Me,n?.student_id,e?.id]);const pt=S.useCallback(($e,ze)=>{if(console.log(" handleWordClick called:",{side:$e,index:ze,interactionType:e?.interaction_type,selectedWord:y}),e?.interaction_type!=="arrow"){console.log(" Not arrow mode, ignoring click");return}if(y){if(y.side===$e&&y.index===ze)console.log(" Deselecting word"),v(null);else if(y.side!==$e){console.log(" Creating arrow connection:",{startWord:y,endWord:{side:$e,index:ze}});const tt={id:Date.now().toString(),startWord:y,endWord:{side:$e,index:ze},color:"#3B82F6"};de(ot=>{const nt=[...ot,tt];return console.log(" Updated arrows:",nt),nt}),x(ot=>{const nt={...ot,[y.index]:ze};return console.log(" Updated answers:",nt),nt}),v(null)}}else console.log(" Selecting word:",{side:$e,index:ze}),v({side:$e,index:ze})},[y,e?.interaction_type]);S.useCallback(($e,ze)=>{e.interaction_type==="drag"&&x(tt=>({...tt,[$e]:ze}))},[e?.interaction_type]);const ut=S.useCallback(()=>{It(!0)},[]),_t=S.useCallback(()=>{x({}),de([]),v(null),It(!1)},[]),qt=S.useCallback(()=>{kt(!0)},[]),Jt=S.useCallback(()=>{kt(!1),r&&r()},[r]),Ht=S.useCallback(async()=>{if(f){ie(!0);try{const $e=f?.leftWords?.length||0;let ze=0,tt={};e.interaction_type==="drag"?Object.entries(g).forEach(([Ie,Ye])=>{const Ne=f?.correctPairs?.[Ie];Ye===Ne&&ze++,tt[Ie]=Ye}):ue.forEach(Ie=>{const Ye=Ie.startWord.side==="left"?Ie.startWord.index:Ie.endWord.index,Ne=Ie.startWord.side==="right"?Ie.startWord.index:Ie.endWord.index;f?.correctPairs?.[Ye]===Ne&&ze++,tt[Ye]=Ne});const ot=ze,nt=$e;console.log(` Final Score: ${ot}/${nt} (${Math.round(ot/nt*100)}%)`);const Dt=new Date,Rt=Me?Math.round((Dt-Me)/1e3):0,Qt=Me?Me.toISOString():Dt.toISOString(),wr=l(),kr=n.student_id,zr=`retest_assignment_id_${kr}_word_matching_${e.id}`,Tr=localStorage.getItem(zr),{academicCalendarService:gr}=await Vi(async()=>{const{academicCalendarService:Ie}=await Promise.resolve().then(()=>n3);return{academicCalendarService:Ie}},void 0);await gr.loadAcademicCalendar();const Fe=gr.getCurrentTerm()?.id;if(!Fe)throw new Error("No current academic period found");const Le={test_id:e.id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:kr,academic_period_id:Fe,parent_test_id:e.id,retest_assignment_id:Tr?Number(Tr):null,interaction_type:e.interaction_type,answers:tt,score:ot,maxScore:nt,time_taken:Rt,started_at:Qt,submitted_at:Dt.toISOString(),caught_cheating:wr.caught_cheating,visibility_change_times:wr.visibility_change_times};console.log(" Submission data being sent:",Le),console.log(" TestData structure:",e),console.log(" Submitting test results...");const Ue=await s("/.netlify/functions/submit-word-matching-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Le)});console.log(" Submission response received:",Ue.status);const Pt=await Ue.json();if(Pt.success){if(a("Test submitted successfully!","success"),u(),d(),n?.student_id&&t1(n.student_id,"word_matching",e.id),!!Tr&&n?.student_id){let Ye=3;try{const Ge=localStorage.getItem(`student_active_tests_${n.student_id}`);if(Ge){const Ut=JSON.parse(Ge)?.tests?.find(ar=>ar.test_id===e.id&&ar.test_type==="word_matching");Ut&&(Ye=Ut.retest_attempts_left||Ut.max_attempts||3)}}catch(Ge){console.error("Error checking active tests cache:",Ge)}const Ve=(ot>0&&nt>0?ot/nt*100:0)>=50;if(Ve){const Ge=`retest_attempt${Ye}_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(Ge,"true"),console.log(" Passed retest, marking last-slot key:",Ge);let Ot=0;for(let Dr=1;Dr<=10;Dr++){const br=`retest_attempt${Dr}_${n.student_id}_word_matching_${e.id}`;localStorage.getItem(br)==="true"&&Ot++}const Ut=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(Ut,"true"),console.log(" Marked retest as completed (student passed):",Ut);const ar=`retest_attempts_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(ar,JSON.stringify({used:Ot,max:Ye})),console.log(" Set retest attempts metadata (student passed):",ar,{used:Ot,max:Ye})}else{let Ge=1;for(let br=1;br<=10;br++){const Kr=`retest_attempt${br}_${n.student_id}_word_matching_${e.id}`;if(localStorage.getItem(Kr)!=="true"){Ge=br;break}}const Ot=`retest_attempt${Ge}_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(Ot,"true"),console.log(" Marked retest attempt as completed:",Ot);let Ut=0;for(let br=1;br<=10;br++){const Kr=`retest_attempt${br}_${n.student_id}_word_matching_${e.id}`;localStorage.getItem(Kr)==="true"&&Ut++}const ar=Ye-Ut,Dr=ar<=0||Ve;if(console.log(" Retest completion check:",{usedAttempts:Ut,maxAttempts:Ye,attemptsLeft:ar,passed:Ve,shouldComplete:Dr}),Dr){const br=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(br,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",br);const Kr=`retest_attempts_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(Kr,JSON.stringify({used:Ut,max:Ye})),console.log(" Set retest attempts metadata (attempts exhausted):",Kr,{used:Ut,max:Ye})}}}else if(n?.student_id){const Ye=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(Ye,"true"),console.log(" Test marked as completed in localStorage:",Ye)}if(n?.student_id){const Ye=`student_results_table_${n.student_id}`;qs(Ye,Pt,da.student_results_table),console.log(" Test results cached with key:",Ye)}if(n?.student_id){const Ye=`retest1_${kr}_word_matching_${e.id}`;localStorage.removeItem(Ye),localStorage.removeItem(zr)}t&&t(ot),ie(!1)}else throw new Error(Pt.message||"Failed to submit test")}catch($e){console.error("Error submitting test:",$e),ie(!1)}}},[f,g,ue,e,n,Me,l,u,d,s,t]);return f?c.jsxs(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-4xl mx-auto p-6",children:[c.jsx($a,{isOpen:Te,onClose:()=>{},title:"Submitting",size:"small",children:c.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[c.jsx(ln,{size:"lg",className:"mb-3"}),c.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Submitting test..."}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we process your results"})]})}),c.jsx("div",{className:"flex justify-end mb-2",children:c.jsx(lt,{onClick:qt,variant:"outline",size:"sm",disabled:Te,children:"Back to Cabinet"})}),c.jsx($t,{className:"mb-6",children:c.jsxs("div",{className:"text-left",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:e.test_name}),c.jsx("p",{className:"text-gray-600",children:e.interaction_type==="drag"?"Drag words from left to right to match them":"Click on the word or phrase on the left, then click on the matching word or phrase on the right to connect them"})]})}),e.interaction_type==="drag"?c.jsx($t,{className:"mb-6",children:c.jsx("div",{ref:T,className:"relative w-full",children:c.jsx(pm,{width:k,height:oe,className:`border-2 border-gray-200 rounded-lg ${Te?"pointer-events-none opacity-50":""}`,children:c.jsxs(gm,{children:[f.leftWords.map(($e,ze)=>{const tt=g[ze]!==void 0,ot=K($e,I.LEFT_WORD,R),nt=le[ze],Dt=nt?nt.y:U+ze*Q;return c.jsxs(Qc,{x:te,y:Dt,draggable:!tt,onDragStart:Rt=>{Rt.target.moveToTop()},onDragEnd:Rt=>{Rt.target.getStage();const Qt=f.rightWords,wr=R+60,kr=H+30,zr=V-30,Tr=U-15;console.log(" Drop detection - Word dropped at:",Rt.target.x(),Rt.target.y());for(let gr=0;gr<Qt.length;gr++){const ve=le[gr],Fe=ve?ve.y:Tr+gr*Q,Le=zr,Ue=zr+wr,Pt=Fe,Ie=Fe+kr;if(console.log(` Checking drop zone ${gr}:`,{left:Le,right:Ue,top:Pt,bottom:Ie,word:Qt[gr]}),Rt.target.x()>=Le&&Rt.target.x()<=Ue&&Rt.target.y()>=Pt&&Rt.target.y()<=Ie){console.log(` Match found! Word "${f.leftWords[ze]}" matched with "${Qt[gr]}"`),x(Ye=>({...Ye,[ze]:gr}));break}}console.log(" No match found, resetting position"),Rt.target.position({x:te,y:Dt})},children:[c.jsx(bi,{width:R,height:ot,fill:tt?"#e5e7eb":"#3b82f6",stroke:tt?"#9ca3af":"#1d4ed8",strokeWidth:2,cornerRadius:8,opacity:tt?.5:1}),c.jsx(Lu,{text:$e,x:R/2,y:ot/2,fontSize:I.LEFT_WORD,fontFamily:"Arial",fill:tt?"#dc2626":"white",align:"center",verticalAlign:"middle",width:R,offsetX:R/2,offsetY:ot/2,wrap:"word",ellipsis:!0,listening:!1})]},`left-${ze}`)}),f.rightWords.map(($e,ze)=>{const tt=K($e,I.ORIGINAL_WORD,R),ot=le[ze],nt=ot?ot.y:U+ze*Q,Dt=Object.keys(g).find(Rt=>g[Rt]===ze);return c.jsxs(Qc,{x:V,y:nt,children:[c.jsx(bi,{width:R,height:tt,fill:Dt?"#10b981":"#f3f4f6",stroke:Dt?"#059669":"#d1d5db",strokeWidth:2,cornerRadius:8}),c.jsx(Lu,{text:$e,x:R/2,y:tt/2,fontSize:I.ORIGINAL_WORD,fontFamily:"Arial",fill:"#000000",align:"center",verticalAlign:"middle",width:R,offsetX:R/2,offsetY:tt/2,wrap:"word",ellipsis:!0,listening:!1}),Dt&&c.jsx(Lu,{text:f.leftWords[Dt],x:R/2,y:tt/4,fontSize:I.DRAGGED_WORD,fontFamily:"Arial",fill:"#dc2626",align:"center",verticalAlign:"middle",width:R,offsetX:R/2,offsetY:tt/8,wrap:"word",ellipsis:!0})]},`right-${ze}`)})]})})})}):c.jsx($t,{className:"mb-6",children:c.jsx("div",{ref:T,className:"relative w-full",children:c.jsx(pm,{width:k,height:oe,className:`border-2 border-gray-200 rounded-lg ${Te?"pointer-events-none opacity-50":""}`,children:c.jsxs(gm,{children:[f?.leftWords?.map(($e,ze)=>{const tt=K($e,I.LEFT_WORD,R),ot=le[ze],nt=ot?ot.y:U+ze*Q,Dt=y?.side==="left"&&y?.index===ze;return c.jsxs(Qc,{x:te,y:nt,onClick:()=>pt("left",ze),children:[c.jsx(bi,{width:R,height:tt,fill:Dt?"#3b82f6":"#f3f4f6",stroke:Dt?"#1d4ed8":"#d1d5db",strokeWidth:Dt?3:2,cornerRadius:8}),c.jsx(Lu,{text:$e,x:R/2,y:tt/2,fontSize:I.LEFT_WORD,fontFamily:"Arial",fill:Dt?"white":"#374151",align:"center",verticalAlign:"middle",width:R,offsetX:R/2,offsetY:tt/2,wrap:"word",ellipsis:!0,listening:!1})]},`left-${ze}`)}),f?.rightWords?.map(($e,ze)=>{const tt=K($e,I.ORIGINAL_WORD,R),ot=le[ze],nt=ot?ot.y:U+ze*Q,Dt=y?.side==="right"&&y?.index===ze;return c.jsxs(Qc,{x:V,y:nt,onClick:()=>pt("right",ze),children:[c.jsx(bi,{width:R,height:tt,fill:Dt?"#3b82f6":"#f3f4f6",stroke:Dt?"#1d4ed8":"#d1d5db",strokeWidth:Dt?3:2,cornerRadius:8}),c.jsx(Lu,{text:$e,x:R/2,y:tt/2,fontSize:I.ORIGINAL_WORD,fontFamily:"Arial",fill:"#000000",align:"center",verticalAlign:"middle",width:R,offsetX:R/2,offsetY:tt/2,wrap:"word",ellipsis:!0,listening:!1})]},`right-${ze}`)}),ue.map(($e,ze)=>{const tt=f?.leftWords?.[$e.startWord.index],ot=f?.rightWords?.[$e.endWord.index],nt=K(tt,I.LEFT_WORD,R),Dt=K(ot,I.ORIGINAL_WORD,R),Rt=le[$e.startWord.index],Qt=le[$e.endWord.index],wr=Rt?Rt.y+nt/2:U+$e.startWord.index*Q+nt/2,kr=Qt?Qt.y+Dt/2:U+$e.endWord.index*Q+Dt/2;return c.jsx(zi,{points:[te+R+20,wr,V-20,kr],stroke:$e.color||"#3b82f6",strokeWidth:W,lineCap:"round",lineJoin:"round"},ze)})]})})})}),c.jsx($t,{children:c.jsxs("div",{className:`submit-section flex justify-center space-x-4 ${Te?"pointer-events-none opacity-50":""}`,children:[c.jsx(lt,{onClick:ut,variant:"outline",disabled:Te,children:"Reset"}),c.jsx(lt,{onClick:()=>Ae(!0),disabled:Te,className:"px-8",children:Te?c.jsxs(c.Fragment,{children:[c.jsx(ln,{size:"sm",color:"white",className:"mr-2"}),"Submitting..."]}):"Submit Test"})]})}),c.jsx($a,{isOpen:He&&!Te,onClose:()=>It(!1),title:"Reset Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to reset? This will clear all your progress and answers."}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(lt,{onClick:()=>It(!1),variant:"secondary",children:"Cancel"}),c.jsx(lt,{onClick:_t,variant:"primary",children:"Reset"})]})]})}),c.jsx($a,{isOpen:it,onClose:()=>kt(!1),title:"Exit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to leave the test? Your progress will be saved."}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(lt,{onClick:()=>kt(!1),variant:"secondary",children:"Cancel"}),c.jsx(lt,{onClick:Jt,variant:"primary",children:"Leave"})]})]})}),c.jsx($a,{isOpen:xe,onClose:()=>Ae(!1),title:"Submit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(lt,{onClick:()=>Ae(!1),variant:"secondary",children:"Cancel"}),c.jsx(lt,{onClick:()=>{Ae(!1),Ht()},variant:"primary",children:"Submit"})]})]})})]}):c.jsx("div",{className:"flex justify-center items-center min-h-screen",children:c.jsx(ln,{size:"lg"})})},Pde=({id:e,x:t,y:r,width:n,height:s,text:a,fontSize:i,color:o,isSelected:l,onSelect:u,onUpdate:d,onDelete:f})=>{const[h,g]=S.useState(!1),x=S.useRef(!1),y=S.useRef(null),v=S.useRef({x:0,y:0}),T=S.useRef(null),k=5,b=()=>{x.current=!0,g(!0)},N=()=>{if(x.current=!1,g(!1),T.current)try{T.current.draggable(!1)}catch{}},E=()=>{y.current&&(clearTimeout(y.current),y.current=null)};S.useEffect(()=>()=>{E()},[]),S.useEffect(()=>{if(T.current)try{T.current.draggable(x.current)}catch{}},[h]);const P=j=>{j.cancelBubble=!0,d(e,{isEditing:!0})},M=j=>{d(e,{x:j.target.x(),y:j.target.y()})};return c.jsxs(Qc,{ref:T,x:t,y:r,draggable:h,dragBoundFunc:j=>x.current?j:{x:t,y:r},name:"textbox-group",onClick:j=>{j.cancelBubble=!0,u(e)},onTap:j=>{j.cancelBubble=!0,u(e),E()},onDblClick:P,onDblTap:P,onPointerDown:j=>{j.cancelBubble=!0;const A=j.evt||{};v.current={x:A.clientX??0,y:A.clientY??0},E(),y.current=setTimeout(()=>{b()},400)},onPointerMove:j=>{if(!y.current)return;const A=j.evt||{},O=Math.abs((A.clientX??0)-v.current.x),L=Math.abs((A.clientY??0)-v.current.y);(O>k||L>k)&&E()},onPointerUp:j=>{j.cancelBubble=!0,E(),N()},onPointerLeave:()=>{E(),N()},onDragEnd:j=>{M(j),N()},children:[c.jsx(bi,{width:n,height:s,fill:l?"#fef3c7":"#ffffff",stroke:l?"#f59e0b":"#d1d5db",strokeWidth:l?2:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1},name:"textbox-rect",onTap:j=>{j.cancelBubble=!0,u(e),E()},onDblTap:j=>{j.cancelBubble=!0,P(j)}}),c.jsx(Lu,{text:a,width:n,height:s,padding:8,align:"left",verticalAlign:"top",fontSize:i,fill:o,wrap:"word",name:"textbox-text",onTap:j=>{j.cancelBubble=!0,u(e),E()},onDblTap:j=>{j.cancelBubble=!0,P(j)}})]})},Mde=({x:e,y:t,width:r,height:n,initialText:s,onSave:a,onCancel:i})=>{const o=S.useRef(null);S.useEffect(()=>{o.current&&(o.current.focus(),o.current.select())},[]);const l=u=>{u.key==="Enter"&&!u.shiftKey?(u.preventDefault(),a(o.current.value)):u.key==="Escape"&&i()};return c.jsx("textarea",{ref:o,defaultValue:s,style:{position:"absolute",top:t,left:e,width:r,height:n,fontSize:"14px",border:"2px solid #f59e0b",borderRadius:"6px",padding:"8px",background:"white",resize:"none",outline:"none",fontFamily:"inherit",lineHeight:"1.4",zIndex:1e3},onKeyDown:l,onBlur:()=>a(o.current.value)})},Fde=({width:e,height:t,lines:r,onDrawingChange:n,currentTool:s,currentColor:a,currentThickness:i,zoom:o,onZoomChange:l,isPanning:u,isFullscreen:d,constrainPanPosition:f,handleWheel:h,stageRef:g,setIsPanning:x,responsiveDimensions:y,canvasSize:v,question:T,textBoxes:k,setTextBoxes:b,selectedTextBox:N,setSelectedTextBox:E,handleTextBoxSelect:P,handleTextBoxUpdate:M,handleTextBoxDelete:j,isEditingText:A,editingTextBox:O,setIsEditingText:L,setEditingTextBox:q,setCurrentTool:Q})=>{const[ae,te]=S.useState(!1),[ne,B]=S.useState([]),[V,R]=S.useState(null),[H,U]=S.useState(null),I=S.useRef(null),[W,K]=S.useState(.25),[Z,oe]=S.useState({x:0,y:0}),J=S.useRef(null),le=S.useRef(null),ue=S.useRef(!1),de=6;S.useEffect(()=>{const Ne=()=>{const Ve=I.current;if(!Ve)return;const Ge=Ve.clientWidth||1,Ot=Ve.clientHeight||1,Ut=Math.min(Ge/(v.width||1),Ot/(v.height||1));K(Math.min(Ut,1))};return Ne(),window.addEventListener("resize",Ne),()=>window.removeEventListener("resize",Ne)},[v.width,v.height,d]);const Te=Ne=>{const Ve=g.current,Ge=Ve.getPointerPosition();if(s==="pan"){if(Ue(Ne.target))try{Ve.draggable(!1),ue.current=!0}catch{}return}if(s==="text"){const Ut={x:(Ge.x-Ve.x())/Ve.scaleX(),y:(Ge.y-Ve.y())/Ve.scaleY()};J.current={...Ut},le.current={x:Ge.x,y:Ge.y};return}te(!0);const Ot={x:(Ge.x-Ve.x())/Ve.scaleX(),y:(Ge.y-Ve.y())/Ve.scaleY()};U(Ot),s==="pencil"?B([{x:Ot.x,y:Ot.y,color:a,thickness:i}]):s==="eraser"?B([{x:Ot.x,y:Ot.y,color:a,thickness:i,tool:"eraser"}]):["line","rectangle","circle"].includes(s)&&R({type:s,startX:Ot.x,startY:Ot.y,endX:Ot.x,endY:Ot.y,color:a,thickness:i})},ie=Ne=>{const Ve=g.current,Ge=Ve.getPointerPosition(),Ot={x:(Ge.x-Ve.x())/Ve.scaleX(),y:(Ge.y-Ve.y())/Ve.scaleY()};if(oe(Ot),s!=="pan"){if(s==="text"&&J.current&&le.current){const Ut=Math.abs(Ge.x-le.current.x),ar=Math.abs(Ge.y-le.current.y);(Ut>de||ar>de)&&(J.current=null)}if(ae)if(s==="pencil"){const Ut=[...ne,{x:Ot.x,y:Ot.y,color:a,thickness:i}];B(Ut)}else if(s==="eraser"){const Ut=[...ne,{x:Ot.x,y:Ot.y,color:a,thickness:i,tool:"eraser"}];B(Ut)}else["line","rectangle","circle"].includes(s)&&V&&R({...V,endX:Ot.x,endY:Ot.y})}},xe=Ne=>{const Ve=g.current;if(s==="pan"){if(ue.current){try{Ve.draggable(!0)}catch{}ue.current=!1}return}if(s==="text"&&J.current){const Ge=Ne&&Ne.target;if(Ge&&typeof Ge.name=="function"&&Ge.name()==="canvas-bg"){const Ut={id:Date.now(),x:J.current.x,y:J.current.y,width:150,height:60,text:"Double-click to edit",fontSize:14,color:"#000000"};b(ar=>[...ar,Ut]),E(Ut.id)}J.current=null,le.current=null}if(ae){if(s==="pencil"){const Ge=[...r,ne];n(Ge),B([])}else if(s==="eraser"){const Ge=[...r,ne];n(Ge),B([])}else if(["line","rectangle","circle"].includes(s)&&V){const Ge=[...r,V];n(Ge),R(null)}te(!1),U(null)}},[Ae,Me]=S.useState(null),[Je,He]=S.useState(null),[It,it]=S.useState(!1),[kt,pt]=S.useState(null),[ut,_t]=S.useState(!1),[qt,Jt]=S.useState(!1),[Ht,$e]=S.useState([]),[ze,tt]=S.useState(null),[ot,nt]=S.useState({totalGestures:0,zoomGestures:0,panGestures:0,combinedGestures:0,averageResponseTime:0});let Dt=null;const Qt=(window.devicePixelRatio||1)>1.5,wr={scaleDelta:Qt?.03:.04,centerDelta:Qt?4:6,minTouchDistance:8,gestureHysteresis:.02},kr=()=>{_t(!1),pt(null),Me(null),He(null),te(!1),U(null),Jt(!1),tt(null),Dt&&(cancelAnimationFrame(Dt),Dt=null),g.current&&g.current.stop()},zr=Ne=>{if(Ne.length<2)return 0;const Ve=Ne[0],Ge=Ne[1];return Math.sqrt(Math.pow(Ge.clientX-Ve.clientX,2)+Math.pow(Ge.clientY-Ve.clientY,2))},Tr=Ne=>{if(Ne.length<2)return null;const Ve=Ne[0],Ge=Ne[1];return{x:(Ve.clientX+Ge.clientX)/2,y:(Ve.clientY+Ge.clientY)/2}},gr=Ne=>{$e(Ve=>[...Ve,{type:Ne,timestamp:Date.now()}].slice(-5))},ve=()=>{const Ne=Date.now(),Ve=Ht.filter(Ut=>Ne-Ut.timestamp<500);if(Ve.length<2)return 0;const Ge=Ve[Ve.length-1],Ot=Ve[Ve.length-2];return Ge.type===Ot.type?wr.gestureHysteresis:0},Fe=(Ne,Ve)=>{nt(Ge=>({totalGestures:Ge.totalGestures+1,zoomGestures:Ne.includes("zoom")?Ge.zoomGestures+1:Ge.zoomGestures,panGestures:Ne.includes("pan")?Ge.panGestures+1:Ge.panGestures,combinedGestures:Ne==="zoom+pan"?Ge.combinedGestures+1:Ge.combinedGestures,averageResponseTime:(Ge.averageResponseTime+Ve)/2}))},Le=(Ne,Ve,Ge,Ot)=>{const Ut=g.current,ar=Ut.scaleX(),Dr=Ut.position();let br=ar,Kr=Dr;if(Ne){const be=Ge/Ae,pe=ar*be,ke=T?.max_canvas_width||1536,Ee=T?.max_canvas_height||2048,Qe=ke/v.width,xt=Ee/v.height,rt=Math.min(Qe,xt,1);br=Math.max(.25,Math.min(rt,pe));const ce=Ot,me={x:(ce.x-Ut.x())/ar,y:(ce.y-Ut.y())/ar};Kr={x:ce.x-me.x*br,y:ce.y-me.y*br}}if(Ve){const be=Ot.x-Je.x,pe=Ot.y-Je.y;Ne?Kr={x:Kr.x+be,y:Kr.y+pe}:Kr={x:Dr.x+be,y:Dr.y+pe}}Dt||(Dt=requestAnimationFrame(()=>{Ut.scale({x:br,y:br}),Ut.position(Kr),Ut.batchDraw(),Dt=null})),Ne&&Ve?(pt("zoom+pan"),Jt(!0)):Ne?(pt("zoom"),Jt(!0)):Ve&&pt("pan");const Ce=Date.now()-(ze||Date.now());Fe(Ne&&Ve?"zoom+pan":Ne?"zoom":"pan",Ce),console.log(" Combined gesture",{doZoom:Ne,doPan:Ve,scale:br.toFixed(2),pos:Kr})},Ue=Ne=>{if(!Ne||typeof Ne.name!="function")return!1;if((Ne.name()||"").includes("textbox-"))return!0;const Ge=Ne.getParent&&Ne.getParent();return Ge&&typeof Ge.name=="function"&&(Ge.name()||"").includes("textbox-")},Pt=Ne=>{const Ve=Ne.evt.touches,Ge=Ne.target;if(Ue(Ge)){if(s==="pan"&&g.current)try{g.current.draggable(!1),ue.current=!0}catch{}return}Ve.length===2?(Ne.evt.preventDefault(),_t(!0),pt(null),Me(zr(Ve)),He(Tr(Ve)),te(!1),tt(Date.now())):Ve.length===1&&(_t(!1),pt(null),Te(Ne))},Ie=Ne=>{const Ve=Ne.evt.touches,Ge=Ne.target;if(!Ue(Ge))if(Ve.length===2&&ut){Ne.evt.preventDefault();const Ot=g.current,Ut=zr(Ve),ar=Tr(Ve);if(Ae&&Je&&Ot&&Ut>wr.minTouchDistance){const Dr=Math.abs(Ut/Ae-1),br=Math.sqrt(Math.pow(ar.x-Je.x,2)+Math.pow(ar.y-Je.y,2)),Kr=ve(),he=wr.scaleDelta-Kr,Ce=wr.centerDelta-Kr*10,be=Dr>he,pe=br>Ce;(be||pe)&&(Le(be,pe,Ut,ar),be&&pe?gr("zoom+pan"):be?gr("zoom"):pe&&gr("pan")),console.log(" Gesture Debug",{scaleDelta:Dr.toFixed(3),centerDelta:br.toFixed(1),doZoom:be,doPan:pe,hysteresis:Kr.toFixed(3),adjustedScaleDelta:he.toFixed(3),adjustedCenterDelta:Ce.toFixed(1),gestureHistory:Ht.slice(-3)})}Me(Ut),He(ar)}else Ve.length===1&&!ut&&(Ne.evt.preventDefault(),ie())},Ye=Ne=>{const Ve=Ne.evt.touches,Ge=Ne.target;Ue(Ge)||(Ve.length===0?(xe(Ne),kr(),Jt(!1)):Ve.length===1&&(_t(!1),pt(null),Me(null),He(null),Jt(!1)))};return c.jsx("div",{className:"relative w-full block sm:flex sm:justify-center",children:c.jsx("div",{className:"w-full max-w-full block sm:flex sm:justify-center",children:c.jsxs("div",{className:"relative",style:{border:d&&(y.width<window.innerWidth-40||y.height<window.innerHeight-40)?"2px solid #000000":"none",borderRadius:"8px",overflow:"hidden"},children:[c.jsx("div",{ref:I,className:"w-full h-full",style:{touchAction:"manipulation"},children:c.jsx(pm,{ref:g,width:y.width,height:y.height,scaleX:d?y.zoom:o,scaleY:d?y.zoom:o,onMouseDown:Te,onMousemove:ie,onMouseup:xe,onTouchStart:Pt,onTouchMove:Ie,onTouchEnd:Ye,onWheel:h||(()=>{}),onDragStart:()=>{console.log(" Drag started"),s==="pan"&&x(!0)},onDragEnd:()=>{if(console.log(" Drag ended"),s==="pan"&&(x(!1),f)){const Ne=g.current,Ve=I.current,Ge=Ve?.clientWidth||y.width,Ot=Ve?.clientHeight||y.height,Ut=v.width*Ne.scaleX(),ar=v.height*Ne.scaleY(),Dr=Ne.x(),br=Ne.y();(Dr>Ge||Dr<-Ut||br>Ot||br<-ar)&&f(Ne)}},draggable:s==="pan"&&o>.25,className:`border-0 rounded-none shadow-none sm:border sm:rounded-lg sm:shadow-sm ${s==="pan"?"cursor-grab":u?"cursor-grabbing":"cursor-crosshair"}`,style:{width:"100%",height:"auto"},onLoad:()=>{console.log(" DrawingTestStudent - Stage loaded with dimensions:",y.width,"x",y.height),console.log(" DrawingTestStudent - Canvas size:",v.width,"x",v.height),console.log(" DrawingTestStudent - Current zoom level:",o),console.log(" DrawingTestStudent - Effective display size:",Math.round(v.width*o),"x",Math.round(v.height*o)),console.log(" DrawingTestStudent - Total pixels displayed:",Math.round(v.width*o*v.height*o))},children:c.jsxs(gm,{children:[c.jsx(bi,{x:0,y:0,width:v.width,height:v.height,fill:"white",name:"canvas-bg"}),r.map((Ne,Ve)=>{if(Array.isArray(Ne)){const Ge=Ne[0]?.tool==="eraser";return c.jsx(zi,{points:Ne.flatMap(Ot=>[Ot.x,Ot.y]),stroke:Ge?"black":Ne[0]?.color||"#000000",strokeWidth:Ge?(Ne[0]?.thickness||2)*7:Ne[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:Ge?"destination-out":"source-over"},Ve)}else{if(Ne.type==="line")return c.jsx(zi,{points:[Ne.startX,Ne.startY,Ne.endX,Ne.endY],stroke:Ne.color,strokeWidth:Ne.thickness,lineCap:"round"},Ve);if(Ne.type==="rectangle"){const Ge=Math.abs(Ne.endX-Ne.startX),Ot=Math.abs(Ne.endY-Ne.startY),Ut=Math.min(Ne.startX,Ne.endX),ar=Math.min(Ne.startY,Ne.endY);return c.jsx(bi,{x:Ut,y:ar,width:Ge,height:Ot,stroke:Ne.color,strokeWidth:Ne.thickness,fill:"transparent"},Ve)}else if(Ne.type==="circle"){const Ge=Math.sqrt(Math.pow(Ne.endX-Ne.startX,2)+Math.pow(Ne.endY-Ne.startY,2))/2,Ot=(Ne.startX+Ne.endX)/2,Ut=(Ne.startY+Ne.endY)/2;return c.jsx(Cf,{x:Ot,y:Ut,radius:Ge,stroke:Ne.color,strokeWidth:Ne.thickness,fill:"transparent"},Ve)}}return null}),k.map(Ne=>c.jsx(Pde,{...Ne,isSelected:N===Ne.id,onSelect:P,onUpdate:M,onDelete:j},Ne.id)),s==="pencil"&&c.jsx(zi,{points:ne.flatMap(Ne=>[Ne.x,Ne.y]),stroke:a,strokeWidth:i,tension:.5,lineCap:"round",lineJoin:"round"}),s==="eraser"&&c.jsx(zi,{points:ne.flatMap(Ne=>[Ne.x,Ne.y]),stroke:"black",strokeWidth:i*7,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:"destination-out"}),V&&V.type==="line"&&c.jsx(zi,{points:[V.startX,V.startY,V.endX,V.endY],stroke:V.color,strokeWidth:V.thickness,lineCap:"round"}),V&&V.type==="rectangle"&&c.jsx(bi,{x:Math.min(V.startX,V.endX),y:Math.min(V.startY,V.endY),width:Math.abs(V.endX-V.startX),height:Math.abs(V.endY-V.startY),stroke:V.color,strokeWidth:V.thickness,fill:"transparent"}),V&&V.type==="circle"&&c.jsx(Cf,{x:(V.startX+V.endX)/2,y:(V.startY+V.endY)/2,radius:Math.sqrt(Math.pow(V.endX-V.startX,2)+Math.pow(V.endY-V.startY,2))/2,stroke:V.color,strokeWidth:V.thickness,fill:"transparent"}),s==="eraser"&&c.jsx(Cf,{x:Z.x,y:Z.y,radius:i*7/2,stroke:"#666666",strokeWidth:2,fill:"rgba(102, 102, 102, 0.2)",dash:[5,5],listening:!1}),s==="pencil"&&c.jsx(zi,{points:[Z.x-10,Z.y,Z.x+10,Z.y,Z.x,Z.y-10,Z.x,Z.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="line"&&c.jsx(zi,{points:[Z.x-10,Z.y,Z.x+10,Z.y,Z.x,Z.y-10,Z.x,Z.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="rectangle"&&c.jsx(zi,{points:[Z.x-10,Z.y,Z.x+10,Z.y,Z.x,Z.y-10,Z.x,Z.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="circle"&&c.jsx(zi,{points:[Z.x-10,Z.y,Z.x+10,Z.y,Z.x,Z.y-10,Z.x,Z.y+10],stroke:"#666666",strokeWidth:1,listening:!1})]})})}),A&&O&&c.jsx(Mde,{x:O.x,y:O.y,width:O.width,height:O.height,initialText:O.text,onSave:Ne=>{M(O.id,{text:Ne}),L(!1),q(null)},onCancel:()=>{L(!1),q(null)}}),c.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1",children:[c.jsx("button",{onClick:()=>{const Ne=g.current,Ve=Ne.scaleX(),Ge=T?.max_canvas_width||1536,Ot=T?.max_canvas_height||2048,Ut=Ge/v.width,ar=Ot/v.height,Dr=Math.min(Ut,ar,5),br=Math.min(Dr,Ne.scaleX()*1.2);Ne.scale({x:br,y:br}),Ne.batchDraw(),console.log(" DrawingTestStudent - Zoom In button:",Ve.toFixed(2),"->",br.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(v.width*br),"x",Math.round(v.height*br)),console.log(" DrawingTestStudent - New resolution:",Math.round(v.width*br*v.height*br),"pixels"),l(br)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 font-bold",title:"Zoom In",children:"+"}),c.jsx("button",{onClick:()=>{const Ne=g.current,Ve=Ne.scaleX(),Ge=Math.max(.25,Ne.scaleX()*.8);Ne.scale({x:Ge,y:Ge}),Ne.batchDraw(),console.log(" DrawingTestStudent - Zoom Out button:",Ve.toFixed(2),"->",Ge.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(v.width*Ge),"x",Math.round(v.height*Ge)),console.log(" DrawingTestStudent - New resolution:",Math.round(v.width*Ge*v.height*Ge),"pixels"),l(Ge)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 font-bold",title:"Zoom Out",children:""}),c.jsx("button",{onClick:()=>{const Ne=g.current,Ve=Ne.scaleX();Ne.scale({x:1,y:1}),Ne.position({x:0,y:0}),Ne.batchDraw(),console.log(" DrawingTestStudent - Reset zoom:",Ve.toFixed(2),"-> 1.00"),console.log(" DrawingTestStudent - Reset effective size:",v.width,"x",v.height),console.log(" DrawingTestStudent - Reset resolution:",v.width*v.height,"pixels"),l(1)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 text-xs",title:"Reset Zoom",children:"1:1"})]}),c.jsxs("div",{className:"absolute bottom-2 left-2 bg-white border border-gray-300 rounded px-2 py-1 text-xs text-gray-600 shadow-sm",children:[Math.round(o*100),"%"]})]})})})},Dde=({content:e})=>{if(!e)return c.jsx("div",{className:"text-gray-500 italic",children:"No instructions provided"});const t=n=>{if(!n)return"";if(n.type==="text"){let s=n.text||"";if(n.format&&(n.format&1&&(s=`<strong>${s}</strong>`),n.format&2&&(s=`<em>${s}</em>`),n.format&8&&(s=`<u>${s}</u>`),n.format&16&&(s=`<s>${s}</s>`)),n.style){const a=n.style.match(/color:\s*([^;]+)/);a&&(s=`<span style="color: ${a[1].trim()}">${s}</span>`)}if(n.textStyle){const a=n.textStyle.match(/color:\s*([^;]+)/);a&&(s=`<span style="color: ${a[1].trim()}">${s}</span>`)}return s}if(n.type==="paragraph"){const s=n.children?n.children.map(t).join(""):"";let a="text-left";return n.format&&(n.format==="center"?a="text-center":n.format==="right"?a="text-right":n.format==="left"&&(a="text-left")),`<p class="${a}">${s}</p>`}if(n.type==="heading"){const s=n.tag||"h1",a=n.children?n.children.map(t).join(""):"";return`<${s}>${a}</${s}>`}if(n.type==="list"){const s=n.listType==="bullet"?"ul":"ol",a=n.children?n.children.map(i=>{if(i.type==="listitem"){const o=i.children?i.children.map(t).join(""):"";let l="margin: 4px 0; display: list-item;";return i.format&&(i.format==="center"?l+=" text-align: center;":i.format==="right"?l+=" text-align: right;":i.format==="left"&&(l+=" text-align: left;")),`<li style="${l}">${o}</li>`}return""}).join(""):"";return`<${s} style="margin: 8px 0; padding-left: 20px; list-style-type: ${n.listType==="bullet"?"disc":"decimal"}; display: block;">${a}</${s}>`}return n.children?n.children.map(t).join(""):""};let r=e;if(typeof e=="string"&&e.startsWith("{"))try{const n=JSON.parse(e);n.text?r=n.text:n.content?r=n.content:n.root&&n.root.children&&(r=n.root.children.map(t).join(""))}catch(n){console.log("Failed to parse Lexical content:",n)}return c.jsx("div",{className:"max-w-none rich-text-content",style:{lineHeight:"1.6",fontSize:"14px"},dangerouslySetInnerHTML:{__html:r}})},Ode=({question:e,questionIndex:t,studentAnswer:r,onAnswerChange:n,mode:s,testId:a,testType:i})=>{ai();const[o,l]=S.useState([]),[u,d]=S.useState(!0),[f,h]=S.useState("pencil"),[g,x]=S.useState("#000000"),[y,v]=S.useState(2),[T,k]=S.useState([]),[b,N]=S.useState(-1),[E,P]=S.useState({width:600,height:800}),[M,j]=S.useState(1),[A,O]=S.useState(!1),[L,q]=S.useState(!1),[Q,ae]=S.useState(!1),[te,ne]=S.useState([]),[B,V]=S.useState(null),[R,H]=S.useState(!1),[U,I]=S.useState(null),W=b>0,K=b<T.length-1,[Z,oe]=S.useState(!1),J=S.useRef(null),le=S.useRef(null),[ue,de]=S.useState({width:600,height:800}),Te=S.useRef(!1),[ie,xe]=S.useState(.25),Ae=["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#008000","#808080","#FFC0CB","#A52A2A","#000080"];S.useEffect(()=>{const $e=()=>{ae(window.innerWidth>=1024)};return $e(),window.addEventListener("resize",$e),()=>window.removeEventListener("resize",$e)},[]),S.useEffect(()=>{if(e){const $e=e.max_canvas_width||1536,ze=e.max_canvas_height||2048,tt=e.canvas_width||600,ot=e.canvas_height||800;if(P({width:$e,height:ze}),Te.current)console.log(" DrawingTestStudent - Preserving user zoom:",M.toFixed(2));else{j(1),Te.current=!0;const Dt=(tt-$e*1)/2,Rt=(ot-ze*1)/2;if(!isNaN(Dt)&&!isNaN(Rt)&&J.current){const Qt={x:Dt,y:Rt};J.current.position(Qt),J.current.batchDraw()}console.log(" DrawingTestStudent - Canvas size set:",$e,"x",ze),console.log(" DrawingTestStudent - Viewport size:",tt,"x",ot),console.log(" DrawingTestStudent - Initial zoom:",1 .toFixed(2)),console.log(" DrawingTestStudent - Image resolution:",$e*ze,"pixels"),console.log(" DrawingTestStudent - Aspect ratio:",($e/ze).toFixed(2))}if(r&&typeof r=="string")try{const nt=JSON.parse(r);nt.lines?l(nt.lines):l(nt),nt.textBoxes&&ne(nt.textBoxes)}catch{console.log("No valid drawing data found")}d(!1)}},[e,r]),S.useEffect(()=>{const $e=()=>{const ze=le.current;if(!ze)return;const tt=ze.clientWidth||1,ot=ze.clientHeight||1,nt=Math.min(tt/(E.width||1),ot/(E.height||1));xe(Math.min(nt,1))};return $e(),window.addEventListener("resize",$e),()=>window.removeEventListener("resize",$e)},[E.width,E.height,Z]);const Me=$e=>{l($e);const ze={lines:$e,textBoxes:te};n(e.question_id,JSON.stringify(ze)),Je($e,te)},Je=($e,ze=te)=>{const tt=T.slice(0,b+1);tt.push({lines:[...$e],textBoxes:[...ze]}),k(tt),N(tt.length-1)},He=()=>{if(W){const $e=b-1,ze=T[$e];if(ze&&typeof ze=="object"&&ze.lines){l([...ze.lines]),ne([...ze.textBoxes]);const tt={lines:ze.lines,textBoxes:ze.textBoxes};n(e.question_id,JSON.stringify(tt))}else{const tt=ze||[];l([...tt]),n(e.question_id,JSON.stringify(tt))}N($e)}},It=()=>{if(K){const $e=b+1,ze=T[$e];if(ze&&typeof ze=="object"&&ze.lines){l([...ze.lines]),ne([...ze.textBoxes]);const tt={lines:ze.lines,textBoxes:ze.textBoxes};n(e.question_id,JSON.stringify(tt))}else{const tt=ze||[];l([...tt]),n(e.question_id,JSON.stringify(tt))}N($e)}},it=()=>{l([]),ne([]),V(null),n(e.question_id,"")},kt=$e=>{V($e)},pt=($e,ze)=>{const tt=te.map(nt=>nt.id===$e?{...nt,...ze}:nt);ne(tt),Je(o,tt);const ot={lines:o,textBoxes:tt};if(n(e.question_id,JSON.stringify(ot)),ze.isEditing){const nt=te.find(Dt=>Dt.id===$e);I(nt),H(!0)}},ut=$e=>{const ze=te.filter(ot=>ot.id!==$e);ne(ze),B===$e&&V(null),Je(o,ze);const tt={lines:o,textBoxes:ze};n(e.question_id,JSON.stringify(tt))},_t=()=>{if(Z){const tt=e?.canvas_width||600,ot=e?.canvas_height||800,nt=window.innerWidth-40,Dt=window.innerHeight-40,Rt=nt/tt,Qt=Dt/ot,wr=Math.min(Rt,Qt,1);return{width:tt,height:ot,zoom:wr}}const $e=e?.canvas_width||600,ze=e?.canvas_height||800;return{width:$e,height:ze,zoom:1}};S.useEffect(()=>{const $e=()=>{de(_t())};return $e(),window.addEventListener("resize",$e),()=>window.removeEventListener("resize",$e)},[Z,E]);const qt=$e=>{$e.evt.preventDefault();const ze=J.current,tt=ze.scaleX(),ot=ze.getPointerPosition(),nt={x:(ot.x-ze.x())/tt,y:(ot.y-ze.y())/tt},Dt=$e.evt.deltaY>0?tt*.9:tt*1.1,Rt=e?.max_canvas_width||1536,Qt=e?.max_canvas_height||2048,wr=Rt/E.width,kr=Qt/E.height,zr=Math.min(wr,kr,1),Tr=Math.max(ie,Math.min(zr,Dt)),gr={x:ot.x-nt.x*Tr,y:ot.y-nt.y*Tr};if(Tr<=ie&&le.current){const ve=le.current.clientWidth||1,Fe=le.current.clientHeight||1;gr.x=(ve-E.width*Tr)/2,gr.y=(Fe-E.height*Tr)/2}ze.scale({x:Tr,y:Tr}),ze.position(gr),ze.batchDraw(),console.log(" DrawingTestStudent - Wheel zoom:",tt.toFixed(2),"->",Tr.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(E.width*Tr),"x",Math.round(E.height*Tr)),console.log(" DrawingTestStudent - New resolution:",Math.round(E.width*Tr*E.height*Tr),"pixels"),j(Tr),Te.current=!0},Jt=$e=>{const ze=$e.scaleX(),tt=le.current,ot=tt?.clientWidth||ue.width,nt=tt?.clientHeight||ue.height,Dt=E.width*ze,Rt=E.height*ze;if(ze<=ie){const Le=(ot-Dt)/2,Ue=(nt-Rt)/2;$e.position({x:Le,y:Ue}),$e.batchDraw();return}if(Dt<=ot&&Rt<=nt){const Le=(ot-Dt)/2,Ue=(nt-Rt)/2;$e.position({x:Le,y:Ue}),$e.batchDraw();return}const Qt=Math.max(0,Dt-ot),wr=Math.max(0,Rt-nt),kr=-Qt,zr=-wr,Tr=$e.x(),gr=$e.y(),ve=Math.max(kr,Math.min(Qt,Tr)),Fe=Math.max(zr,Math.min(wr,gr));(ve!==Tr||Fe!==gr)&&($e.position({x:ve,y:Fe}),$e.batchDraw())},Ht=()=>{if(Z)document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen();else{const $e=le.current;$e&&($e.requestFullscreen?$e.requestFullscreen():$e.webkitRequestFullscreen?$e.webkitRequestFullscreen():$e.msRequestFullscreen&&$e.msRequestFullscreen())}};return S.useEffect(()=>{const $e=()=>{oe(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",$e),document.addEventListener("webkitfullscreenchange",$e),document.addEventListener("msfullscreenchange",$e),()=>{document.removeEventListener("fullscreenchange",$e),document.removeEventListener("webkitfullscreenchange",$e),document.removeEventListener("msfullscreenchange",$e)}},[]),S.useEffect(()=>()=>{J.current&&J.current.stop()},[]),u?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx(ln,{})}):e?c.jsxs("div",{className:`drawing-question w-full max-w-full mx-0 p-0 sm:p-2 ${Z?"fixed inset-0 z-50 bg-white overflow-y-auto":""}`,children:[!Z&&c.jsx("div",{className:"mb-4",children:c.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Question ",t+1]})}),!Z&&e.question_json&&e.question_json.trim()&&c.jsxs("div",{className:"mb-2 p-2 bg-gray-50 border border-gray-200 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Task:"}),c.jsx("div",{className:"text-gray-700",children:c.jsx(Dde,{content:e.question_json})})]}),!Z&&c.jsx($t,{className:"p-1 sm:p-2 mb-2",children:c.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{className:"hidden sm:block text-sm text-gray-700",children:"Tool:"}),c.jsxs("div",{className:"flex flex-nowrap sm:flex-wrap gap-1 overflow-x-auto",children:[c.jsx("button",{onClick:()=>h("pencil"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="pencil"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Pencil (Freehand drawing)",children:""}),c.jsx("button",{onClick:()=>h("line"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="line"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Line",children:""}),c.jsx("button",{onClick:()=>h("rectangle"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="rectangle"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Rectangle",children:""}),c.jsx("button",{onClick:()=>h("circle"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="circle"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Circle",children:""}),c.jsx("button",{onClick:()=>h("eraser"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="eraser"?"bg-red-500 text-white border-red-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Eraser",children:""}),c.jsx("button",{onClick:()=>h("text"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="text"?"bg-green-500 text-white border-green-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Text Box",children:""}),c.jsx("button",{onClick:()=>h("pan"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="pan"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Pan (Move canvas)",children:""})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{className:"text-sm text-gray-700",children:"History:"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:He,disabled:!W,className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${W?"bg-white text-gray-700 border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed"}`,title:"Undo (Ctrl+Z)",children:""}),c.jsx("button",{onClick:It,disabled:!K,className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${K?"bg-white text-gray-700 border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed"}`,title:"Redo (Ctrl+Y)",children:""})]})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>O(!A),className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[c.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:g}}),c.jsx("span",{className:"text-xs sm:text-sm text-gray-700",children:"Color"})]}),A&&c.jsx("div",{className:"absolute top-full left-0 mt-2 p-4 bg-white border border-gray-300 rounded-lg shadow-lg z-30 min-w-max",children:c.jsx("div",{className:"flex flex-wrap gap-2 max-w-xs",children:Ae.map($e=>c.jsx("button",{onClick:()=>{x($e),O(!1)},className:`w-10 h-10 rounded border-2 hover:scale-110 transition-transform flex-shrink-0 ${g===$e?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:$e},title:$e},$e))})})]}),c.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[c.jsx("label",{className:"text-xs sm:text-sm text-gray-700",children:"Thickness:"}),c.jsx("input",{type:"range",min:"1",max:"10",value:y,onChange:$e=>v(parseInt($e.target.value)),className:"w-16 sm:w-20"}),c.jsxs("span",{className:"text-xs text-gray-500 w-6 sm:w-8",children:[y,"px"]})]}),c.jsx(lt,{onClick:it,variant:"secondary",size:"sm",children:"Clear"})]})}),c.jsx($t,{paddingClass:"p-0 sm:p-2",children:c.jsxs("div",{ref:le,className:"w-full drawing-canvas-container relative p-0 m-0",children:[c.jsx(Fde,{width:E.width,height:E.height,lines:o,onDrawingChange:Me,currentTool:f,currentColor:g,currentThickness:y,zoom:M,onZoomChange:j,isPanning:L,isFullscreen:Z,constrainPanPosition:Jt,handleWheel:qt,stageRef:J,setIsPanning:q,responsiveDimensions:ue,canvasSize:E,question:e,textBoxes:te,setTextBoxes:ne,selectedTextBox:B,setSelectedTextBox:V,handleTextBoxSelect:kt,handleTextBoxUpdate:pt,handleTextBoxDelete:ut,isEditingText:R,editingTextBox:U,setIsEditingText:H,setEditingTextBox:I,setCurrentTool:h}),c.jsx("button",{onClick:Ht,className:"absolute top-2 left-2 bg-black bg-opacity-50 hover:bg-opacity-70 text-white p-2 rounded-lg transition-all duration-200 z-10",title:Z?"Exit Fullscreen":"Enter Fullscreen",children:Z?c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})}):c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})})]})})]}):c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx("div",{className:"text-center",children:c.jsx("p",{className:"text-gray-500",children:"No drawing question data available"})})})},FS={enhanceUserData(e,t){const r={id:e.id||e.student_id||e.teacher_id,username:e.username||e.student_id,name:e.name||e.first_name,surname:e.surname||e.last_name,nickname:e.nickname,role:t,is_active:e.is_active!==void 0?e.is_active:!0,created_at:e.created_at,updated_at:e.updated_at};switch(t){case"student":return{...r,student_id:e.student_id,grade:e.grade,class:e.class,number:e.number,subjects:e.subjects||[]};case"teacher":return{...r,teacher_id:e.teacher_id,first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,subjects:e.subjects||[]};case"admin":return{...r,admin_id:e.admin_id,permissions:e.permissions||["all"]};default:return r}},async studentLogin(e){console.log("Trying student login...");try{const t=await fetch("/.netlify/functions/student-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:e.username,password:e.password})}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.student,role:"student",response:t};throw new Error(r.message||"Student login failed")}catch(t){throw console.error("Student login error:",t),new Error(t.message||"Student login failed")}},async teacherLogin(e){console.log("Trying teacher login...");try{const t=await fetch("/.netlify/functions/teacher-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.teacher,role:"teacher",response:t};throw new Error(r.message||"Teacher login failed")}catch(t){throw console.error("Teacher login error:",t),new Error(t.message||"Teacher login failed")}},async adminLogin(e){console.log("Trying admin login...");try{const t=await fetch("/.netlify/functions/admin-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.admin,role:"admin",response:t};throw new Error(r.message||"Admin login failed")}catch(t){throw console.error("Admin login error:",t),new Error(t.message||"Admin login failed")}},async login(e){const{username:t,password:r}=e;console.log("Attempting login with:",t,r);try{if(t==="admin"){const o=await this.adminLogin(e),l=await o.json();return await this.handleLoginResponse(o,"admin",l)}const n=await this.teacherLogin(e),s=await n.json();if(n.ok&&s.success)return await this.handleLoginResponse(n,"teacher",s);const a=await this.studentLogin(e),i=await a.json();return a.ok&&i.success?await this.handleLoginResponse(a,"student",i):(this.handleLoginFailure(),{success:!1,message:"Login failed. Please check your credentials and try again."})}catch(n){return console.error("Login error:",n),this.handleLoginFailure(),{success:!1,message:n.message||"Login failed"}}},async handleLoginResponse(e,t,r){if(e.ok&&r.success){if(!window.tokenManager||!window.roleBasedLoader)return console.error("[ERROR] JWT system not available during login response handling"),this.handleLoginFailure(),{success:!1,message:"JWT system not available"};if(r.accessToken&&r.role)try{window.tokenManager.setTokens(r.accessToken,r.role),window.roleBasedLoader.setupAccessAfterLogin()}catch(n){return console.error("[ERROR] Failed to initialize JWT system:",n),this.handleLoginFailure(),{success:!1,message:"Failed to initialize JWT system"}}return this.resetLoginForm(),await this.handlePostLoginActions(r,t),{success:!0,data:r,role:t}}return{success:!1,message:"Login failed"}},async handlePostLoginActions(e,t){console.log(`Handling post-login actions for role: ${t}`);try{switch(t){case"student":e.student&&(this.populateStudentInfo(e.student),window.loadStudentData&&await window.loadStudentData());break;case"teacher":e.teacher&&(this.populateTeacherInfo(e.teacher),window.loadTeacherData&&await window.loadTeacherData());break;case"admin":e.admin&&window.loadAdminData&&await window.loadAdminData();break;default:console.warn(`Unknown role for post-login actions: ${t}`)}}catch(r){console.error("Error in post-login actions:",r)}},handleLoginFailure(){console.log("All login attempts failed"),this.resetLoginForm(),window.showNotification&&window.showNotification("Login failed. Please check your credentials and try again.","error")},resetLoginForm(){const e=document.getElementById("unifiedLoginForm");if(e){e.querySelectorAll("input").forEach(n=>{n.disabled=!1,n.style.opacity="1",n.style.cursor="text",n.removeAttribute("readonly"),n.style.pointerEvents="auto"});const r=e.querySelector('button[type="submit"]');r&&(r.disabled=!1,r.style.opacity="1",r.style.cursor="pointer",r.style.pointerEvents="auto",r.innerHTML="Login"),e.classList.remove("test-submitting","disabled"),e.style.pointerEvents="auto",console.log("Login form reset successfully - all inputs re-enabled")}},async logout(){console.log(" Logout initiated...");try{return window.tokenManager&&window.tokenManager.logout(),window.roleBasedLoader&&window.roleBasedLoader.reloadRoleAccess(),window.clearTestLocalStorage&&window.clearTestLocalStorage(),this.resetInterfaceAfterSessionClear(),console.log(" Logout completed - user session cleared, test data cleared, and interface reset"),{success:!0}}catch(e){return console.error("Logout error:",e),this.resetInterfaceAfterSessionClear(),{success:!0}}},resetInterfaceAfterSessionClear(){try{window.forceLogout=!0,window.preventAutoLogin=!0,window.isClearingSession=!0,window.forceLogoutComplete=!0,document.querySelectorAll(".section").forEach(s=>{s.classList.remove("active"),s.style.display="none",s.style.visibility="hidden",s.style.opacity="0"}),document.querySelectorAll('[id$="-cabinet"], [id$="-container"], [id*="cabinet"], [id*="container"]').forEach(s=>{s.id&&s.id!=="login-section"&&(s.classList.remove("active"),s.style.display="none",s.style.visibility="hidden",s.style.opacity="0")}),document.body.classList.remove("student-logged-in","teacher-logged-in","admin-logged-in"),document.body.classList.add("force-logout");const r=document.getElementById("login-section");r&&(r.classList.add("active"),r.style.display="block",r.style.visibility="visible",r.style.opacity="1"),document.querySelectorAll("input, select, textarea").forEach(s=>{s.type!=="hidden"&&(s.value="",s.checked=!1)}),console.log(" Interface reset to login state")}catch(e){console.error("Error resetting interface:",e),localStorage.clear(),sessionStorage.clear(),window.location.reload()}},async changePassword(e){try{return{success:!0,message:(await na.post("/auth/change-password",{currentPassword:e.currentPassword,newPassword:e.newPassword,confirmPassword:e.confirmPassword})).data.message}}catch(t){throw new Error(t.response?.data?.message||"Password change failed")}},async verifyToken(e){try{const t=await na.get("/auth/verify",{headers:{Authorization:`Bearer ${e}`}});return{success:!0,valid:t.data.valid,user:t.data.user}}catch(t){return{success:!1,valid:!1,error:t.message}}},async refreshToken(e){try{const t=await na.post("/auth/refresh",{refreshToken:e});return{success:!0,token:t.data.token,refreshToken:t.data.refreshToken}}catch(t){throw new Error(t.response?.data?.message||"Token refresh failed")}},async getUserProfile(){try{return{success:!0,user:(await na.get("/auth/profile")).data.user}}catch(e){throw new Error(e.response?.data?.message||"Failed to get user profile")}},async updateUserProfile(e){try{return{success:!0,user:(await na.put("/auth/profile",e)).data.user}}catch(t){throw new Error(t.response?.data?.message||"Failed to update user profile")}},populateStudentInfo(e){console.log("=== populateStudentInfo called ==="),console.log("Student object:",e);const t=document.getElementById("studentName");if(t){const s=`${e?.name||""} ${e?.surname||""}`.trim();t.textContent=s,console.log("Set student name to:",s)}const r=document.getElementById("studentGrade");r&&(r.textContent=e?.grade||"",console.log("Set student grade to:",e?.grade));const n=document.getElementById("studentClass");n&&(n.textContent=e?.class||"",console.log("Set student class to:",e?.class)),console.log("Student info populated successfully")},populateTeacherInfo(e){console.log("=== populateTeacherInfo called ==="),console.log("Teacher object:",e);const t=document.getElementById("teacherName");if(t){const n=`${e?.name||""} ${e?.surname||""}`.trim();t.textContent=n,console.log("Set teacher name to:",n)}const r=document.getElementById("teacherUsername");r&&(r.textContent=e?.username||"",console.log("Set teacher username to:",e?.username)),console.log("Teacher info populated successfully")},getCurrentTeacherId(){try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())return console.warn("[WARN] No valid JWT token found for teacher"),null;const e=window.tokenManager.decodeToken(window.tokenManager.getAccessToken());return e&&e.sub?e.role==="teacher"?(console.log(`[DEBUG] Found teacher ID from JWT: ${e.sub}`),e.sub):(console.warn(`[WARN] Unsupported role for teacher function: ${e.role}`),null):(console.warn("[WARN] No teacher ID found in JWT token"),null)}catch(e){return console.error("[ERROR] Error getting current teacher ID from JWT:",e),null}},getCurrentAdmin(){const e=window.tokenManager?.getToken();if(!e)return null;const t=window.tokenManager.decodeToken(e);if(!t||t.role!=="admin")throw new Error("getCurrentAdmin() called by non-admin user");return{id:t.sub,username:t.username,role:t.role}},getCurrentTeacherUsername(){try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())return console.warn("[WARN] No valid JWT token found for teacher"),null;const e=window.tokenManager.decodeToken(window.tokenManager.getAccessToken());return e&&e.username?(console.log(`[DEBUG] Found teacher username from JWT: ${e.username}`),e.username):(console.warn("[WARN] No teacher username found in JWT token"),null)}catch(e){return console.error("[ERROR] Error getting current teacher username from JWT:",e),null}},isAdmin(){try{const e=window.tokenManager?.getToken();if(!e)return!1;const t=window.tokenManager.decodeToken(e);return t&&t.role==="admin"}catch(e){return console.error("[ERROR] Error checking admin status:",e),!1}},getCurrentAdminId(){try{const e=this.getCurrentAdmin();return e?e.id:null}catch(e){return console.error("[ERROR] Error getting admin ID:",e),null}}},Ide=()=>{const e=fl(),{login:t,setUserData:r,isAuthenticated:n,user:s}=Fs(),[a,i]=S.useState({username:"",password:""}),[o,l]=S.useState(!1),[u,d]=S.useState(""),[f,h]=S.useState([]),[g,x]=S.useState(!1);S.useEffect(()=>{y()},[]);const y=S.useCallback(async()=>{console.log("Checking for existing JWT session...");try{(window.forceLogout||window.preventAutoLogin)&&(window.forceLogout=!1,window.preventAutoLogin=!1)}catch{}if(window.tokenManager)if(await window.tokenManager.isAuthenticated()){console.log("JWT session valid, checking user role...");try{const q=await window.tokenManager.getAccessToken(),Q=window.tokenManager.decodeToken(q);Q&&Q.role?console.log("User role from JWT:",Q.role):console.log("No valid role found in JWT, showing login")}catch(q){console.error("Error decoding JWT token:",q)}}else console.log("No valid JWT session found, showing login");else console.log("No tokenManager found, showing login")},[]),v=S.useCallback(async L=>{if(L.preventDefault(),window.forceLogout||window.preventAutoLogin){console.log(" Login blocked - force logout in progress"),j("Please wait for the logout process to complete.","warning");return}const{username:q,password:Q}=a;if(!q||!Q){d("Please enter both username and password");return}l(!0),d("");try{let ae,te;q==="admin"?(ae=await FS.adminLogin({username:q,password:Q}),te=Io.ADMIN):/^\d+$/.test(q)?(ae=await FS.studentLogin({username:q,password:Q}),te=Io.STUDENT):(ae=await FS.teacherLogin({username:q,password:Q}),te=Io.TEACHER);let ne,B;if(ae.response?(ne=ae,B=ae.response):(ne=await ae.json(),B=ae),await T(B,te,ne)){j("Login successful!","success");try{if("credentials"in navigator&&window.PasswordCredential&&a?.username&&a?.password){const V=new window.PasswordCredential({id:String(a.username),password:String(a.password)});await navigator.credentials.store(V)}}catch{}try{window.forceLogout=!1,window.preventAutoLogin=!1}catch{}}}catch(ae){console.error("Login error:",ae),d("Invalid username or password")}finally{l(!1)}},[a]),T=S.useCallback(async(L,q,Q)=>{if(L.ok&&Q.success){if(!window.tokenManager||!window.roleBasedLoader)return console.error("[ERROR] JWT system not available during login response handling"),P(),!1;try{Q.token&&(window.tokenManager.setTokens(Q.token,q),Q.refreshToken&&window.tokenManager.setRefreshToken(Q.refreshToken),console.log("JWT token stored successfully"));const ae={...Q.data,...Q,role:q};return r(ae),await k(ae),!0}catch(ae){return console.error("Error handling login response:",ae),P(ae),!1}}else return console.error("Login failed:",Q.error||"Unknown error"),d(Q.error||"Login failed. Please check your credentials."),!1},[t]),k=S.useCallback(async L=>{if(console.log("Handling post-login actions for role:",L.role),g){console.log(" Post-login already handled, skipping");return}x(!0);try{switch(L.role){case Io.STUDENT:await b(L),e("/student");break;case Io.TEACHER:await N(L),e("/teacher");break;case Io.ADMIN:await E(L),e("/admin");break;default:console.error("Unknown user role:",L.role),P()}}catch(q){console.error("Error in post-login actions:",q),P(q)}},[e,g]);S.useEffect(()=>{n||x(!1)},[n]);const b=S.useCallback(async L=>{console.log("Populating student info:",L)},[]),N=S.useCallback(async L=>{console.log("Populating teacher info:",L)},[]),E=S.useCallback(async L=>{console.log("Populating admin info:",L)},[]),P=S.useCallback((L=null)=>{console.error("Login failure:",L),d("Login failed. Please check your credentials and try again."),M()},[]),M=S.useCallback(()=>{i({username:"",password:""}),d(""),l(!1)},[]),j=S.useCallback((L,q)=>{const Q={id:Date.now(),message:L,type:q,timestamp:new Date};h(ae=>[...ae,Q]),setTimeout(()=>{h(ae=>ae.filter(te=>te.id!==Q.id))},Gm.NOTIFICATION_DURATION)},[]),A=S.useCallback(L=>{const{name:q,value:Q}=L.target;i(ae=>({...ae,[q]:Q})),u&&d("")},[u]),O=S.useCallback(L=>{L.key==="Enter"&&!o&&v(L)},[v,o]);return c.jsxs(ht.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[c.jsxs(ht.div,{className:"w-full max-w-md",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsxs(ht.div,{className:"text-center mb-8",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.5},children:[c.jsx(ht.div,{className:"flex justify-center mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.5,type:"spring"},children:c.jsx("img",{src:"/pics/logo_mws.png",alt:"MWS Logo",className:"h-16 w-16 object-contain"})}),c.jsx(ht.h1,{className:"text-3xl font-bold text-gray-900 mb-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.3},children:"Mathayom Watsing School"}),c.jsx(ht.p,{className:"text-lg text-gray-600",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.3},children:"Test Management System"})]}),c.jsxs(ht.div,{className:"bg-white rounded-xl shadow-2xl p-8",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.7,duration:.5,type:"spring"},children:[c.jsx(ht.h2,{className:"text-2xl font-semibold text-gray-900 text-center mb-6",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.8,duration:.3},children:"Login"}),c.jsxs("form",{onSubmit:v,className:"space-y-6",children:[c.jsxs(ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9,duration:.3},children:[c.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),c.jsx(ht.input,{type:"text",id:"username",name:"username",value:a.username,onChange:A,onKeyDown:O,placeholder:"Enter your username",required:!0,autoComplete:"username",autoCapitalize:"none",spellCheck:!1,disabled:o,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed","aria-describedby":u?"error-message":void 0,whileFocus:{scale:1.02},transition:{duration:.2}})]}),c.jsxs(ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:1,duration:.3},children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),c.jsx(ht.input,{type:"password",id:"password",name:"password",value:a.password,onChange:A,onKeyDown:O,placeholder:"Enter your password",required:!0,autoComplete:"current-password",disabled:o,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed","aria-describedby":u?"error-message":void 0,whileFocus:{scale:1.02},transition:{duration:.2}})]}),c.jsx(al,{children:u&&c.jsx(ht.div,{id:"error-message",className:"bg-red-50 border border-red-200 rounded-lg p-3",role:"alert","aria-live":"polite",initial:{opacity:0,height:0,y:-10},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-10},transition:{duration:.3},children:c.jsx("p",{className:"text-sm text-red-600",children:u})})}),c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.1,duration:.3},children:c.jsx(lt,{type:"submit",variant:"primary",size:"lg",disabled:o,className:"w-full",children:o?c.jsxs(c.Fragment,{children:[c.jsx(ln,{size:"sm",className:"mr-2"}),"Logging in..."]}):"Login"})})]})]})]}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:c.jsx(al,{children:f.map(L=>c.jsx(ht.div,{initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{duration:.3,type:"spring"},children:c.jsx(su,{type:L.type,message:L.message,onClose:()=>h(q=>q.filter(Q=>Q.id!==L.id))})},L.id))})})]})},Rs={async getStudentData(){console.log("getStudentData called - loading student subjects");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-student-subjects")).json();if(t.success)return console.log("Student data loaded successfully:",t.subjects),t.subjects;throw new Error(t.error||"Failed to load student data")}catch(e){throw console.error("Error loading student data:",e),e}},getStudentSubjects(e){return console.log("getStudentSubjects called with subjects:",e),e.map(t=>({id:t.id||t.subject_id,name:t.subject,grade:t.grade,class:t.class,testResults:t.test_results||[]}))},async getTeacherData(){console.log("getTeacherData called - loading teacher subjects");try{const e=await this.getCurrentTeacherId();if(!e)throw new Error("No valid teacher session found");const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-teacher-subjects")).json();if(r.success)return console.log("Teacher data loaded successfully:",r.subjects),{teacher_id:e,subjects:r.subjects,hasSubjects:r.subjects.length>0};throw new Error(r.error||"Failed to load teacher data")}catch(e){throw console.error("Error loading teacher data:",e),e}},getTeacherSubjects(e){return console.log("getTeacherSubjects called with subjects:",e),e.map(t=>{let r=[];return t.classes&&Array.isArray(t.classes)&&(r=t.classes.map(n=>({grade:n.grade,class:n.class,className:n.class}))),{id:t.subject_id,name:t.subject,classes:r,assignments:t.assignments||[],description:t.description||""}})},getGradeButtons(){return console.log("getGradeButtons called"),["M1","M2","M3","M4","M5","M6"].map(t=>({id:t,name:t,classes:this.generateClassButtons(t)}))},generateClassButtons(e){const t=[];for(let r=1;r<=10;r++)t.push({id:`${e}_${r}`,name:`${e}/${r}`,grade:e,class:r});return t},async getAdminData(){console.log("getAdminData called - loading admin data");try{if(!await this.getCurrentAdminId())throw new Error("No valid admin session found");const[t,r,n]=await Promise.allSettled([this.getAllTeachers(),this.getAllSubjects(),this.getAllUsers()]);return{teachers:t.status==="fulfilled"?t.value:[],subjects:r.status==="fulfilled"?r.value:[],users:n.status==="fulfilled"?n.value:[],loadedAt:new Date().toISOString()}}catch(e){throw console.error("Error loading admin data:",e),e}},async saveTeacherSubjects(e){console.log("saveTeacherSubjects called with subjects:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-teacher-subjects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subjects:e})})).json();if(r.success)return console.log("Teacher subjects saved successfully"),r;throw new Error(r.error||"Failed to save teacher subjects")}catch(t){throw console.error("Error saving teacher subjects:",t),t}},async deleteTeacherSubject(e){console.log("deleteTeacherSubject called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/delete-teacher-subject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Teacher subject assignment deleted successfully"),r;throw new Error(r.error||"Failed to delete teacher subject assignment")}catch(t){throw console.error("Error deleting teacher subject assignment:",t),t}},async getSubjectsDropdown(){console.log("getSubjectsDropdown called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-subjects")).json();if(t.success)return console.log("Subjects dropdown data loaded successfully"),t.subjects.map(r=>({id:r.id,name:r.subject_name,value:r.subject_name}));throw new Error(t.error||"Failed to load subjects dropdown")}catch(e){throw console.error("Error loading subjects dropdown:",e),e}},async getGradesAndClasses(){console.log("getGradesAndClasses called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-teacher-grades-classes")).json();if(t.success)return console.log("Grades and classes loaded successfully"),t.data;throw new Error(t.message||"Failed to load grades and classes")}catch(e){throw console.error("Error loading grades and classes:",e),e}},async saveSubjectClasses(e,t){console.log("saveSubjectClasses called with subjectId:",e,"classes:",t);try{const r=await this.getCurrentTeacherId();if(!r)throw new Error("No valid teacher session found");const s=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-subject-classes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teacher_id:r,subject_id:e,classes:t})})).json();if(s.success)return console.log("Subject classes saved successfully"),s;throw new Error(s.error||"Failed to save subject classes")}catch(r){throw console.error("Error saving subject classes:",r),r}},async getAllSubjects(){console.log("getAllSubjects called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-subjects")).json();if(t.success)return console.log("All subjects loaded successfully"),t.subjects.map(r=>({id:r.id,name:r.subject_name,description:r.description||"",created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all subjects")}catch(e){throw console.error("Error loading all subjects:",e),e}},async getSubjectsForSelection(){console.log("getSubjectsForSelection called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-subjects")).json();if(t.success)return console.log("Subjects for selection loaded successfully"),t.subjects;throw new Error(t.message||"Failed to load subjects for selection")}catch(e){throw console.error("Error loading subjects for selection:",e),e}},async addAcademicYear(e){console.log("addAcademicYear called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/add-academic-year",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Academic year added successfully"),r;throw new Error(r.error||"Failed to add academic year")}catch(t){throw console.error("Error adding academic year:",t),t}},async getAllUsers(){console.log("getAllUsers called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-users")).json();if(t.success)return console.log("All users loaded successfully"),t.users.map(r=>({id:r.id,student_id:r.student_id,grade:r.grade,class:r.class,number:r.number,name:r.name,surname:r.surname,nickname:r.nickname,created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all users")}catch(e){throw console.error("Error loading all users:",e),e}},async getAllTeachers(){console.log("getAllTeachers called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-teachers")).json();if(t.success)return console.log("All teachers loaded successfully"),t.teachers.map(r=>({id:r.id,teacher_id:r.teacher_id,username:r.username,name:r.name,surname:r.surname,email:r.email,created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all teachers")}catch(e){throw console.error("Error loading all teachers:",e),e}},async createUser(e){console.log("createUser called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/create-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("User created successfully"),r;throw new Error(r.error||"Failed to create user")}catch(t){throw console.error("Error creating user:",t),t}},async updateUser(e,t){console.log("updateUser called with userId:",e,"data:",t);try{const n=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/update-user/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(n.success)return console.log("User updated successfully"),n;throw new Error(n.error||"Failed to update user")}catch(r){throw console.error("Error updating user:",r),r}},async createTeacher(e){console.log("createTeacher called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/create-teacher",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Teacher created successfully"),r;throw new Error(r.error||"Failed to create teacher")}catch(t){throw console.error("Error creating teacher:",t),t}},async updateTeacher(e,t){console.log("updateTeacher called with teacherId:",e,"data:",t);try{const n=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/update-teacher/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(n.success)return console.log("Teacher updated successfully"),n;throw new Error(n.error||"Failed to update teacher")}catch(r){throw console.error("Error updating teacher:",r),r}},async updateStudentInfo(e){console.log("updateStudentInfo called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-student-info",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Student info updated successfully"),r;throw new Error(r.error||"Failed to update student info")}catch(t){throw console.error("Error updating student info:",t),t}},async changePassword(e){console.log("changePassword called");let t;if(e.studentId)t="/.netlify/functions/change-student-password";else if(e.username)t="/.netlify/functions/change-teacher-password";else throw new Error("Invalid password data: missing studentId or username");try{const n=await(await window.tokenManager.makeAuthenticatedRequest(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(n.success)return console.log("Password changed successfully"),n;throw new Error(n.error||"Failed to change password")}catch(r){throw console.error("Error changing password:",r),r}},async getCurrentTeacherId(){try{const{SecureToken:e}=await Vi(async()=>{const{SecureToken:n}=await Promise.resolve().then(()=>V9);return{SecureToken:n}},void 0),t=await(window.tokenManager?.getToken()||e.get())||localStorage.getItem("accessToken");if(!t)return null;const r=JSON.parse(atob(t.split(".")[1]));return r.teacher_id||r.sub||null}catch(e){return console.error("Error getting current teacher ID:",e),null}},async getCurrentAdminId(){try{const{SecureToken:e}=await Vi(async()=>{const{SecureToken:n}=await Promise.resolve().then(()=>V9);return{SecureToken:n}},void 0),t=await(window.tokenManager?.getToken()||e.get())||localStorage.getItem("accessToken");if(!t)return null;const r=JSON.parse(atob(t.split(".")[1]));return r.admin_id||r.sub||null}catch(e){return console.error("Error getting current admin ID:",e),null}}},QW=S.createContext(),ZW=({children:e})=>{const[t,r]=S.useState(null),[n,s]=S.useState([]),[a,i]=S.useState([]),[o,l]=S.useState([]),[u,d]=S.useState([]),[f,h]=S.useState([]),[g,x]=S.useState([]),[y,v]=S.useState([]),[T,k]=S.useState(!1),[b,N]=S.useState(null),[E,P]=S.useState(!1),[M,j]=S.useState(!1),[A,O]=S.useState(!1),[L,q]=S.useState(null),[Q,ae]=S.useState(null),[te,ne]=S.useState(null),B=S.useCallback(async()=>{try{k(!0),N(null);const Fe=`student_subjects_${t?.student_id||t?.id||""}`;console.log(" UserContext: Checking cache for key:",Fe);const Le=fa(Fe);if(Le){console.log(" UserContext: Cache HIT! Using cached student data"),s(Le),V(Le);return}console.log(" UserContext: Cache MISS! Fetching from API");const Ue=await Rs.getStudentData();if(Ue)s(Ue),V(Ue),console.log(" UserContext: Caching student data with key:",Fe),qs(Fe,Ue,da.student_subjects);else throw new Error("No subjects data received")}catch(ve){N(ve.message||"Failed to load student data"),console.error("Error loading student data:",ve)}finally{k(!1)}},[t?.student_id,t?.id]),V=ve=>{console.log("Displaying student subjects:",ve),s(ve)},R=S.useCallback(async()=>{try{if(k(!0),N(null),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.error("No valid teacher session found in loadTeacherData, redirecting to login"),N("No valid teacher session found");return}const Fe=`teacher_subjects_${t?.teacher_id||t?.id||""}`,Le=fa(Fe);if(Le){s(Le),Le.length===0?Qt():H(Le);return}const Ue=await Rs.getTeacherSubjects();if(Ue.success)s(Ue.subjects),qs(Fe,Ue.subjects,da.teacher_subjects),Ue.subjects.length===0?Qt():H(Ue.subjects);else throw new Error(Ue.message||"Failed to load teacher data")}catch(ve){N(ve.message||"Failed to load teacher data"),console.error("Error loading teacher data:",ve)}finally{k(!1)}},[t?.teacher_id,t?.id]),H=ve=>{console.log("Showing main cabinet with subjects:",ve),s(ve)},U=ve=>{console.log("Displaying grade buttons:",ve),l(ve)},I=async()=>{try{if(k(!0),N(null),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.error("No valid admin session found in loadAdminData, redirecting to login"),N("No valid admin session found");return}await Promise.all([xe(),pt(),oe()])}catch(ve){N(ve.message||"Failed to load admin data"),console.error("Error loading admin data:",ve)}finally{k(!1)}},W=ve=>{console.log(" populateStudentInfoDirectly called with:",ve);try{r(ve),console.log(" Set student profile:",ve)}catch(Fe){console.error("Error populating student info:",Fe)}},K=ve=>{console.log("=== populateStudentInfo called ==="),r(ve)},Z=ve=>{console.log("=== populateTeacherInfo called ==="),r(ve)},oe=S.useCallback(async()=>{try{k(!0);const ve="admin_users_",Fe=fa(ve);if(Fe){d(Fe),J(Fe);return}const Le=await Rs.getAllUsers();if(Le.success)d(Le.users),J(Le.users),qs(ve,Le.users,da.admin_users);else throw new Error(Le.message||"Failed to load users")}catch(ve){N(ve.message||"Failed to load users"),console.error("Error loading users:",ve)}finally{k(!1)}},[]),J=ve=>{console.log("Displaying all users:",ve),d(ve)},le=(ve,Fe)=>{console.log("Displaying users table:",ve,Fe),d(ve)},ue=()=>{console.log("Toggling users content")},de=()=>{console.log("Showing add user form"),P(!0)},Te=()=>{console.log("Hiding add user form"),P(!1)},ie=ve=>{console.log("Editing user row:",ve);const Fe=u.find(Le=>Le.id===ve);q(Fe)},xe=S.useCallback(async()=>{try{const ve="admin_teachers_",Fe=fa(ve);if(Fe){h(Fe),Ae(Fe);return}const Le=await Rs.getAllTeachers();if(Le.success)h(Le.teachers),Ae(Le.teachers),qs(ve,Le.teachers,da.admin_teachers);else throw new Error(Le.message||"Failed to load teachers")}catch(ve){N(ve.message||"Failed to load teachers"),console.error("Error loading teachers:",ve)}},[]),Ae=ve=>{console.log("Displaying all teachers:",ve),h(ve)},Me=(ve,Fe)=>{console.log("Displaying teachers table:",ve,Fe),h(ve)},Je=()=>{console.log("Toggling teachers content")},He=()=>{console.log("Showing add teacher form"),j(!0)},It=()=>{console.log("Hiding add teacher form"),j(!1)},it=ve=>{console.log("Editing teacher:",ve);const Fe=f.find(Le=>Le.id===ve);ae(Fe)},kt=ve=>{console.log("Editing teacher row:",ve);const Fe=f.find(Le=>Le.id===ve);ae(Fe)},pt=S.useCallback(async()=>{try{const ve="admin_subjects_",Fe=fa(ve);if(Fe){x(Fe),ut(Fe);return}const Le=await Rs.getAllSubjects();if(Le.success)x(Le.subjects),ut(Le.subjects),qs(ve,Le.subjects,da.admin_subjects);else throw new Error(Le.message||"Failed to load subjects")}catch(ve){N(ve.message||"Failed to load subjects"),console.error("Error loading subjects:",ve)}},[]),ut=ve=>{console.log("Displaying all subjects:",ve),x(ve)},_t=(ve,Fe)=>{console.log("Displaying subjects table:",ve,Fe),x(ve)},qt=()=>{console.log("Toggling subjects content")},Jt=()=>{console.log("Showing add subject form"),O(!0)},Ht=()=>{console.log("Hiding add subject form"),O(!1)},$e=ve=>{console.log("Editing subject row:",ve);const Fe=g.find(Le=>Le.id===ve);ne(Fe)},ze=ve=>{console.log("Displaying academic year:",ve),v(ve)},tt=()=>{console.log("Showing add academic year form")},ot=()=>{console.log("Hiding add academic year form")},nt=ve=>{console.log("Handling add academic year:",ve)},Dt=()=>{console.log("Toggling academic year content")},Rt=()=>{console.log("Showing academic year editor")},Qt=()=>{console.log("Showing subject selection")},wr=()=>{console.log("Showing main cabinet")},kr=ve=>{r(Fe=>({...Fe,...ve}))},zr=()=>{r(null),s([]),i([]),l([]),d([]),h([]),x([]),v([]),N(null)},Tr=S.useCallback(ve=>{zr(),ve&&U7(ve)},[]),gr={userProfile:t,userSubjects:n,userClasses:a,userGrades:o,allUsers:u,allTeachers:f,allSubjects:g,academicYears:y,isLoading:T,error:b,showUserForm:E,showTeacherForm:M,showSubjectForm:A,editingUser:L,editingTeacher:Q,editingSubject:te,loadStudentData:B,displayStudentSubjects:V,populateStudentInfoDirectly:W,populateStudentInfo:K,loadTeacherData:R,showMainCabinetWithSubjects:H,displayGradeButtons:U,populateTeacherInfo:Z,showSubjectSelection:Qt,showMainCabinet:wr,loadAdminData:I,getAllUsers:oe,displayAllUsers:J,displayUsersTable:le,toggleUsersContent:ue,showAddUserForm:de,hideAddUserForm:Te,editUserRow:ie,loadAllTeachers:xe,displayAllTeachers:Ae,displayTeachersTable:Me,toggleTeachersContent:Je,showAddTeacherForm:He,hideAddTeacherForm:It,editTeacher:it,editTeacherRow:kt,loadAllSubjects:pt,displayAllSubjects:ut,displaySubjectsTable:_t,toggleSubjectsContent:qt,showAddSubjectForm:Jt,hideAddSubjectForm:Ht,editSubjectRow:$e,displayAcademicYear:ze,showAddAcademicYearForm:tt,hideAddAcademicYearForm:ot,handleAddAcademicYear:nt,toggleAcademicYearContent:Dt,showAcademicYearEditor:Rt,updateUserProfile:kr,clearUserData:zr,clearUserDataWithCache:Tr,setUserProfile:r,setUserSubjects:s,setUserClasses:i,setUserGrades:l,setAllUsers:d,setAllTeachers:h,setAllSubjects:x,setAcademicYears:v,setError:N};return c.jsx(QW.Provider,{value:gr,children:e})},r3=()=>{const e=S.useContext(QW);if(!e)throw new Error("useUser must be used within a UserProvider");return e},xy={STUDENT_LOGIN:"/.netlify/functions/student-login",TEACHER_LOGIN:"/.netlify/functions/teacher-login",ADMIN_LOGIN:"/.netlify/functions/admin-login",CHANGE_PASSWORD:"/.netlify/functions/change-password",GET_TEST_QUESTIONS:"/.netlify/functions/get-test-questions",SUBMIT_MULTIPLE_CHOICE_TEST:"/.netlify/functions/submit-multiple-choice-test",SUBMIT_TRUE_FALSE_TEST:"/.netlify/functions/submit-true-false-test",SUBMIT_INPUT_TEST:"/.netlify/functions/submit-input-test",SUBMIT_MATCHING_TEST:"/.netlify/functions/submit-matching-test",SUBMIT_DRAWING_TEST:"/.netlify/functions/submit-drawing-test",GET_STUDENT_SUBJECTS:"/.netlify/functions/get-student-subjects",GET_TEACHER_SUBJECTS:"/.netlify/functions/get-teacher-subjects",GET_ALL_USERS:"/.netlify/functions/get-all-users",GET_ALL_TEACHERS:"/.netlify/functions/get-all-teachers",GET_ALL_SUBJECTS:"/.netlify/functions/get-all-subjects",GET_ACADEMIC_YEAR:"/.netlify/functions/get-academic-year",SAVE_MULTIPLE_CHOICE_TEST:"/.netlify/functions/save-multiple-choice-test",SAVE_TRUE_FALSE_TEST:"/.netlify/functions/save-true-false-test",SAVE_INPUT_TEST:"/.netlify/functions/save-input-test",SAVE_MATCHING_TEST:"/.netlify/functions/save-matching-test",SAVE_DRAWING_TEST:"/.netlify/functions/save-drawing-test",UPDATE_DRAWING_TEST_SCORE:"/.netlify/functions/update-drawing-test-score",UPDATE_SPEAKING_TEST_SCORE:"/.netlify/functions/update-speaking-test-score",ASSIGN_TEST_TO_CLASSES:"/.netlify/functions/assign-test-to-classes",GET_TEACHER_ACTIVE_TESTS:"/.netlify/functions/get-teacher-active-tests",GET_STUDENT_ACTIVE_TESTS:"/.netlify/functions/get-student-active-tests"},rs={MULTIPLE_CHOICE:"multiple_choice",TRUE_FALSE:"true_false",INPUT:"input",MATCHING:"matching_type",WORD_MATCHING:"word_matching",DRAWING:"drawing",FILL_BLANKS:"fill_blanks"},Io={STUDENT:"student",TEACHER:"teacher",ADMIN:"admin"};Array.from({length:10},(e,t)=>t+1);const Gm={NOTIFICATION_DURATION:3e3},jf=(e,t,r)=>{if(!e||!Array.isArray(e)||e.length===0)return{score:0,total:0,percentage:0};let n=0;return e.forEach((s,a)=>{const i=Array.isArray(t)?t[a]:t[String(s.question_id||s.id||a)];i!=null&&Up(s,i,r)&&n++}),{score:n,total:e.length,percentage:Math.round(n/e.length*100)}},kv=(e,t)=>{console.log(" Getting correct answer for question:",e,"testType:",t);let r="";switch(t){case rs.TRUE_FALSE:r=e.correct_answer?"true":"false",console.log(" TRUE_FALSE correct_answer from question:",r,typeof r);break;case rs.MULTIPLE_CHOICE:const n=e.correct_answer.charCodeAt(0)-65,s=`option_${String.fromCharCode(97+n)}`,a=e[s];a?r=a:r=`Option ${e.correct_answer}`;break;case rs.INPUT:e.correct_answers&&Array.isArray(e.correct_answers)?r=e.correct_answers.join(", "):r=e.correct_answer||"Unknown";break;case rs.MATCHING:r=e.correct_answer||e.answer;break;case rs.WORD_MATCHING:r=e.correct_answer||e.answer;break;case rs.DRAWING:r="Drawing required";break;case rs.FILL_BLANKS:e.correct_answers&&Array.isArray(e.correct_answers)&&e.correct_answers.length>0?r=e.correct_answers[0]:r=e.correct_answer||"Unknown";break;default:r="Unknown"}return console.log(" Correct answer:",r),r},Up=(e,t,r)=>{if(console.log("[DEBUG] checkAnswerCorrectness called for question:",e,"studentAnswer:",t,"testType:",r),!t||t==="")return console.log("[DEBUG] No student answer provided"),!1;let n=!1;switch(r){case rs.TRUE_FALSE:n=t.toLowerCase()==="true"===e.correct_answer;break;case rs.MULTIPLE_CHOICE:let a="";if(typeof t=="string"){const o=t.trim();if(/^[a-z]$/i.test(o))a=o.toUpperCase();else if(/^\d+$/.test(o)){const l=parseInt(o,10),u=l>=0?l:NaN;Number.isNaN(u)||(a=String.fromCharCode(65+u))}}else if(typeof t=="number"){const o=t;Number.isNaN(o)||(a=String.fromCharCode(65+o))}n=a!==""&&a===String(e.correct_answer||"").toUpperCase();break;case rs.INPUT:if(e.correct_answers&&Array.isArray(e.correct_answers)){const o=t.replace(/[.,/*';:!@#$%^&*()_+=\[\]{}|\\:";'<>?,.\s-]+/g,"").toLowerCase().trim();n=e.correct_answers.some(l=>{const u=l.replace(/[.,/*';:!@#$%^&*()_+=\[\]{}|\\:";'<>?,.\s-]+/g,"").toLowerCase().trim();return o===u?!0:u&&o.includes(u)?u.length===1?o.startsWith(u)||o.endsWith(u):!0:!1})}else{const o=t.toLowerCase().trim(),l=e.correct_answer.toLowerCase().trim();o===l?n=!0:l&&o.includes(l)?l.length===1?n=o.startsWith(l)||o.endsWith(l):n=!0:n=!1}break;case rs.MATCHING:if(e.correct_answer&&typeof e.correct_answer=="object"){const o=typeof t=="string"?JSON.parse(t||"{}"):t;n=JSON.stringify(o)===JSON.stringify(e.correct_answer)}break;case rs.WORD_MATCHING:if(e.correct_answer&&typeof e.correct_answer=="object"){const o=typeof t=="string"?JSON.parse(t||"{}"):t;n=JSON.stringify(o)===JSON.stringify(e.correct_answer)}break;case rs.DRAWING:console.warn("Drawing tests should not be auto-scored!"),n=!1;break;case rs.FILL_BLANKS:const i=e.correct_answers&&Array.isArray(e.correct_answers)&&e.correct_answers.length>0?e.correct_answers[0]:e.correct_answer;if(i&&t){let o="";if(typeof t=="string"){const l=t.trim();if(/^[a-z]$/i.test(l))o=l.toUpperCase();else if(/^\d+$/.test(l)){const u=parseInt(l,10),d=u>=0?u:NaN;Number.isNaN(d)||(o=String.fromCharCode(65+d))}}else if(typeof t=="number"){const l=t;Number.isNaN(l)||(o=String.fromCharCode(65+l))}n=o!==""&&o===String(i||"").toUpperCase()}break;default:console.warn(`[WARN] Unknown test type for answer checking: ${r}`),n=!1}return console.log(`[DEBUG] Answer correctness: ${n}`),n};class Rde{constructor(){this.academicCalendar=null,this.loaded=!1}async loadAcademicCalendar(){if(this.loaded)return this.academicCalendar;try{const t=async n=>{const s=await fetch(n,{headers:{Accept:"application/json"},credentials:"include"}),a=s.headers&&s.headers.get&&s.headers.get("content-type")||"";if(!s.ok)throw new Error(`HTTP ${s.status}`);if(!a.includes("application/json"))throw new Error("Non-JSON response");return await s.json()};let r=null;if(r=await t("/academic_year.json"),!Array.isArray(r))throw new Error("Invalid academic calendar format");return this.academicCalendar=r,this.loaded=!0,console.log(" Academic calendar loaded:",this.academicCalendar.length,"terms"),this.academicCalendar}catch(t){return console.error(" Error loading academic calendar:",t),null}}getCurrentTerm(){if(!this.academicCalendar)return null;const t=new Date;return this.academicCalendar.find(n=>{const s=new Date(n.start_date),a=new Date(n.end_date);return t>=s&&t<=a})}getCurrentSemester(){const t=this.getCurrentTerm();if(!t)return null;const r=t.semester,n=this.academicCalendar.filter(s=>s.semester===r&&s.academic_year===t.academic_year);return{semester:r,currentTerm:t,allTerms:n}}getCurrentAcademicPeriodId(){return this.getCurrentTerm()?.id||null}getSemesterTerms(t){return this.academicCalendar?this.academicCalendar.filter(r=>r.semester===t):[]}getAcademicYearTerms(t){return this.academicCalendar?this.academicCalendar.filter(r=>r.academic_year===t):[]}getCurrentSemesterWithTerms(){const t=this.getCurrentSemester();if(!t)return null;const{semester:r,currentTerm:n,allTerms:s}=t;return{semester:r,currentTerm:n,allTerms:s,terms:s.map(a=>({id:a.id,term:a.term,start_date:a.start_date,end_date:a.end_date,isCurrent:a.id===n.id,label:`Term ${a.term}${a.id===n.id?" (Current)":""}`}))}}getCurrentSemesterTerms(){const t=this.getCurrentSemester();if(!t)return null;const{semester:r,currentTerm:n,allTerms:s}=t;return{semester:r,currentTerm:n,terms:s.map(a=>({id:a.id,term:a.term,start_date:a.start_date,end_date:a.end_date,isCurrent:a.id===n.id,label:`Term ${a.term}${a.id===n.id?" (Current)":""}`}))}}getTermById(t){return this.academicCalendar?this.academicCalendar.find(r=>r.id===t):null}isCurrentTerm(t){return this.getCurrentTerm()?.id===t}getAcademicYears(){return this.academicCalendar?[...new Set(this.academicCalendar.map(r=>r.academic_year))].sort():[]}getAcademicYearSemesterTerms(t,r){return this.academicCalendar?this.academicCalendar.filter(n=>n.academic_year===t&&n.semester===r):[]}}const iu=new Rde,n3=Object.freeze(Object.defineProperty({__proto__:null,academicCalendarService:iu},Symbol.toStringTag,{value:"Module"})),Pn={async getTestInfo(e,t){console.log(`[DEBUG] getTestInfo called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test info from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test info data received:",s),s.success)return console.log("[DEBUG] Test info retrieved successfully"),s.test_info;throw new Error(s.error||"Failed to get test info")}catch(r){throw console.error("[ERROR] Failed to get test info:",r),r}},async getTestQuestions(e,t){console.log(`[DEBUG] getTestQuestions called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test questions from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test questions data received:",s),s.success)return console.log("[DEBUG] Test questions retrieved successfully"),s.questions;throw new Error(s.error||"Failed to get test questions")}catch(r){throw console.error("[ERROR] Failed to get test questions:",r),r}},async getTestQuestionsWithInfo(e,t){console.log(`[DEBUG] getTestQuestionsWithInfo called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test questions with info from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test questions with info data received:",s),s.success)return console.log("[DEBUG] Test questions with info retrieved successfully"),{questions:s.questions,testInfo:s.test_info};throw new Error(s.error||"Failed to get test questions")}catch(r){throw console.error("[ERROR] Failed to get test questions with info:",r),r}},async getActiveTests(){console.log("getActiveTests called - extracting studentId from JWT token");try{const e="/.netlify/functions/get-student-active-tests";console.log("[DEBUG] Fetching active tests from:",e);const t=await window.tokenManager.makeAuthenticatedRequest(e);if(console.log("[DEBUG] Response status:",t.status),!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(console.log("[DEBUG] Active tests data received:",r),r.success)return console.log("[DEBUG] Active tests retrieved successfully"),r.tests;throw new Error(r.error||"Failed to get active tests")}catch(e){throw console.error("[ERROR] Failed to get active tests:",e),e}},async getTeacherTests(e=!1){console.log("getTeacherTests called - extracting teacherId from JWT token");try{const t="/.netlify/functions/get-teacher-active-tests",r=e?`${t}?ts=${Date.now()}`:t;console.log("[DEBUG] Fetching teacher tests from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Teacher tests data received:",s),s.success)return console.log("[DEBUG] Teacher tests retrieved successfully"),s.tests;throw new Error(s.error||"Failed to get teacher tests")}catch(t){throw console.error("[ERROR] Failed to get teacher tests:",t),t}},async submitTest(e,t,r,n={},s=null){console.log("Submitting test:",{testType:e,testId:t});try{if(Object.keys(r).length===0)throw new Error("Please answer at least one question before submitting.");let a;try{const N=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`)).json();if(N.success)a=N.test_info;else throw new Error("Failed to get test information")}catch(b){console.error("Error getting test info:",b);const N=await this.getTestQuestions(e,t);a={test_name:`Test ${t}`,num_questions:N.length}}const i=await this.getTestQuestions(e,t);let o,l;if(e==="drawing")o=null,l=null;else{const b=n?.answers_by_id?n.answers_by_id:r;o=jf(i,b,e).score,l=a.num_questions}const u=this.transformAnswersForSubmission(r,e),d=a.teacher_id||null,f=a.subject_id||null,h=s?.student_id||s?.id||(window.tokenManager?.getCurrentUser?window.tokenManager.getCurrentUser()?.student_id||window.tokenManager.getCurrentUser()?.id:null);await iu.loadAcademicCalendar();const x=iu.getCurrentTerm()?.id;if(!x)throw new Error("No current academic period found");const y={test_id:t,test_name:a.test_name,test_type:e,teacher_id:d,subject_id:f,student_id:h,academic_period_id:x,answers:u,score:o,maxScore:l,time_taken:n.time_taken||null,started_at:n.started_at||null,submitted_at:n.submitted_at||new Date().toISOString(),caught_cheating:n.caught_cheating||!1,visibility_change_times:n.visibility_change_times||0,answers_by_id:n.answers_by_id||null,question_order:n.question_order||null,retest_assignment_id:n.retest_assignment_id||null,parent_test_id:n.parent_test_id||t};console.log(" testService retest_assignment_id:",n.retest_assignment_id),console.log(" testService timingData:",n),console.log(" testService commonData.retest_assignment_id:",y.retest_assignment_id);let v;switch(e){case"multiple_choice":v="/.netlify/functions/submit-multiple-choice-test";break;case"true_false":v="/.netlify/functions/submit-true-false-test";break;case"input":v="/.netlify/functions/submit-input-test";break;case"matching_type":v="/.netlify/functions/submit-matching-type-test";break;case"word_matching":v="/.netlify/functions/submit-word-matching-test";break;case"drawing":v="/.netlify/functions/submit-drawing-test";break;case"fill_blanks":v="/.netlify/functions/submit-fill-blanks-test";break;default:throw new Error(`Unsupported test type: ${e}`)}console.log("Submitting to:",v),console.log("Submission data:",y),console.log("Submission data JSON:",JSON.stringify(y,null,2)),console.log(" Final submission retest_assignment_id:",y.retest_assignment_id);const T=await window.tokenManager.makeAuthenticatedRequest(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!T.ok)throw new Error(`HTTP error! status: ${T.status}`);const k=await T.json();if(console.log("Test submission result:",k),k.success)return this.clearTestProgress(e,t),{success:!0,score:o,maxScore:l,result:k};throw new Error(k.error||"Failed to submit test")}catch(a){throw console.error("Error submitting test:",a),a}},async createTest(e){try{return(await na.post("/tests/create",e)).data}catch(t){throw new Error(t.message||"Failed to create test")}},async updateTest(e,t,r){try{return(await na.put(`/tests/${e}/${t}`,r)).data}catch(n){throw new Error(n.message||"Failed to update test")}},async deleteTest(e,t){try{return(await na.delete(`/tests/${e}/${t}`)).data}catch(r){throw new Error(r.message||"Failed to delete test")}},async duplicateTest(e,t){try{return(await na.post(`/tests/${e}/${t}/duplicate`)).data}catch(r){throw new Error(r.message||"Failed to duplicate test")}},async publishTest(e,t){try{return(await na.post(`/tests/${e}/${t}/publish`)).data}catch(r){throw new Error(r.message||"Failed to publish test")}},async unpublishTest(e,t){try{return(await na.post(`/tests/${e}/${t}/unpublish`)).data}catch(r){throw new Error(r.message||"Failed to unpublish test")}},async removeClassAssignment(e,t,r){try{return(await na.delete(`/tests/${e}/${t}/assignments/${r}`)).data}catch(n){throw new Error(n.message||"Failed to remove class assignment")}},async getTestStatistics(e,t){try{return(await na.get(`/tests/${e}/${t}/statistics`)).data}catch(r){throw new Error(r.message||"Failed to get test statistics")}},async exportTest(e,t,r="json"){try{return(await na.get(`/tests/${e}/${t}/export?format=${r}`)).data}catch(n){throw new Error(n.message||"Failed to export test")}},async importTest(e,t){try{return(await na.uploadFile(`/tests/import?type=${t}`,e)).data}catch(r){throw new Error(r.message||"Failed to import test")}},async getTestResults(e,t){try{return(await na.get(`/tests/${e}/${t}/results`)).data}catch(r){throw new Error(r.message||"Failed to get test results")}},async getStudentTestResults(){try{console.log("[DEBUG] Fetching student test results from: /.netlify/functions/get-student-test-results");const e=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-student-test-results");if(console.log("[DEBUG] Response status:",e.status),!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();if(console.log("[DEBUG] Student test results data received:",t),t.success)return console.log("[DEBUG] Student test results retrieved successfully"),t;throw new Error(t.error||"Failed to get student test results")}catch(e){throw console.error("[ERROR] Failed to get student test results:",e),new Error(e.message||"Failed to get student test results")}},async getClassResults(e,t,r){try{return(await na.get(`/tests/class-results/${e}/${t}/${r}`)).data}catch(n){throw new Error(n.message||"Failed to get class results")}},async saveTestProgress(e,t,r){try{return(await na.post(`/tests/${e}/${t}/progress`,{progress:r})).data}catch(n){throw new Error(n.message||"Failed to save test progress")}},async getTestProgress(e,t){try{return(await na.get(`/tests/${e}/${t}/progress`)).data}catch(r){throw new Error(r.message||"Failed to get test progress")}},async clearTestProgress(e,t){try{return(await na.delete(`/tests/${e}/${t}/progress`)).data}catch(r){throw new Error(r.message||"Failed to clear test progress")}},async validateTestData(e){try{return(await na.post("/tests/validate",e)).data}catch(t){throw new Error(t.message||"Failed to validate test data")}},async getTestPreview(e,t){try{return(await na.get(`/tests/${e}/${t}/preview`)).data}catch(r){throw new Error(r.message||"Failed to get test preview")}},isAnswerCorrect(e,t,r,n){switch(n){case"multiple_choice":return String.fromCharCode(65+parseInt(t))===r.correct_answer;case"true_false":return t.toLowerCase()==="true"===r.correct_answer;case"input":const i=r.correct_answers||[],o=t.toLowerCase().trim();return i.some(l=>{const u=l.toLowerCase().trim();return o===u?!0:u&&o.includes(u)?u.length===1?o.startsWith(u)||o.endsWith(u):!0:!1});case"matching_type":return JSON.stringify(t)===JSON.stringify(r.correct_answer);case"word_matching":return JSON.stringify(t)===JSON.stringify(r.correct_answer);case"drawing":return t&&t!=="No answer";default:return!1}},transformAnswersForSubmission(e,t){switch(t){case"multiple_choice":return e;case"true_false":return e;case"input":return e;case"matching_type":return e;case"word_matching":return e;case"drawing":if(Array.isArray(e)&&e.length>0)try{const r=e[0];return typeof r=="string"&&r.startsWith("[")?JSON.parse(r):e}catch(r){return console.warn("Failed to parse drawing answers:",r),e}return e;default:return e}},async markTestCompleted(e,t){try{console.log(`[DEBUG] markTestCompleted called with testType: ${e}, testId: ${t}`);const r=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/mark-test-completed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_type:e,test_id:t})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();if(console.log("[DEBUG] Mark test completed response:",n),n.success)return console.log(`Test ${e}_${t} marked as completed successfully`),{success:!0,message:n.message};throw new Error(n.error||"Failed to mark test as completed")}catch(r){throw console.error("Error marking test completed:",r),r}},clearTestProgress(e,t){try{const r=`test_progress_${e}_${t}`;localStorage.removeItem(r),console.log(`Test progress cleared for ${e}_${t}`)}catch(r){console.error("Error clearing test progress:",r)}},async saveMultipleChoiceTest(e){console.log("[DEBUG] saveMultipleChoiceTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-multiple-choice-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save multiple choice test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving multiple choice test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveTrueFalseTest(e){console.log("[DEBUG] saveTrueFalseTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-true-false-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save true/false test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving true/false test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveInputTest(e){console.log("[DEBUG] saveInputTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-input-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save input test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving input test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveMatchingTest(e){console.log("[DEBUG] saveMatchingTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,test_type:"matching_type",num_questions:e.num_blocks})})).json();return console.log("[DEBUG] Save matching test response:",r),r.success?{success:!0,test_id:r.test_id,message:r.message,assignments_count:r.assignments_count}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving matching test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveWordMatchingTest(e){console.log("[DEBUG] saveWordMatchingTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,test_type:"word_matching"})})).json();return console.log("[DEBUG] Save word matching test response:",r),r.success?{success:!0,test_id:r.test_id,message:r.message,assignments_count:r.assignments_count}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving word matching test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveDrawingTest(e){console.log("[DEBUG] saveDrawingTest called with:",e);try{const t={...e,test_type:"drawing"},n=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();return console.log("[DEBUG] Save drawing test response:",n),n.success?{success:!0,data:{test_id:n.test_id}}:{success:!1,message:n.message||"Failed to save test"}}catch(t){return console.error("Error saving drawing test:",t),{success:!1,message:"Error saving test: "+t.message}}},async getDrawingTest(e){console.log("[DEBUG] getDrawingTest called with testId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-drawing-test?test_id=${e}`,{method:"GET"})).json();return console.log("[DEBUG] Get drawing test response:",r),r.success?{success:!0,data:r.data}:{success:!1,message:r.message||"Failed to get test"}}catch(t){return console.error("Error getting drawing test:",t),{success:!1,message:"Error getting test: "+t.message}}},async submitDrawingTest(e,t,r,n){console.log("[DEBUG] submitDrawingTest called with:",{testId:e,answers:t,timeTaken:r,antiCheatingData:n});try{const a=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/submit-drawing-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e,answers:t,time_taken:r,caught_cheating:n?.caught_cheating||!1,visibility_change_times:n?.visibility_change_times||0})})).json();return console.log("[DEBUG] Submit drawing test response:",a),a.success?{success:!0,data:a.data}:{success:!1,message:a.message||"Failed to submit test"}}catch(s){return console.error("Error submitting drawing test:",s),{success:!1,message:"Error submitting test: "+s.message}}},async updateDrawingTestScore(e,t,r){console.log("[DEBUG] updateDrawingTestScore called with:",{resultId:e,score:t,maxScore:r});try{const s=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-drawing-test-score",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({result_id:e,score:t,max_score:r})})).json();return console.log("[DEBUG] Update drawing test score response:",s),s.success?{success:!0,data:s.data}:{success:!1,message:s.message||"Failed to update score"}}catch(n){return console.error("Error updating drawing test score:",n),{success:!1,message:"Error updating score: "+n.message}}},async getWordMatchingTest(e){console.log("[DEBUG] getWordMatchingTest called with testId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-word-matching-test?test_id=${e}`,{method:"GET"})).json();return console.log("[DEBUG] Get word matching test response:",r),r.success?{success:!0,data:r.data}:{success:!1,message:r.message||"Failed to get test"}}catch(t){return console.error("Error getting word matching test:",t),{success:!1,message:"Error getting test: "+t.message}}},async submitWordMatchingTest(e,t,r,n){console.log("[DEBUG] submitWordMatchingTest called with:",{testId:e,answers:t,timeTaken:r,antiCheatingData:n});try{const a=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/submit-word-matching-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e,answers:t,time_taken:r,caught_cheating:n?.caught_cheating||!1,visibility_change_times:n?.visibility_change_times||0})})).json();return console.log("[DEBUG] Submit word matching test response:",a),a.success?{success:!0,result:a.result}:{success:!1,message:a.message||"Failed to submit test"}}catch(s){return console.error("Error submitting word matching test:",s),{success:!1,message:"Error submitting test: "+s.message}}},async assignTestToClasses(e){console.log("[DEBUG] assignTestToClasses called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save test with assignments response:",r),r.success?{success:!0,message:"Test assigned successfully"}:{success:!1,message:r.message||"Failed to assign test"}}catch(t){return console.error("Error assigning test to classes:",t),{success:!1,message:"Error assigning test: "+t.message}}},async removeClassAssignment(e){console.log("[DEBUG] removeClassAssignment called with assignmentId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/remove-class-assignment?assignment_id=${e}`,{method:"DELETE"})).json();return console.log("[DEBUG] Remove class assignment response:",r),r.success?{success:!0,message:"Assignment removed successfully"}:{success:!1,message:r.message||"Failed to remove assignment"}}catch(t){return console.error("Error removing class assignment:",t),{success:!1,message:"Error removing assignment: "+t.message}}}},eH=S.createContext(),tH=({children:e})=>{const[t,r]=S.useState(null),[n,s]=S.useState([]),[a,i]=S.useState({}),[o,l]=S.useState({}),[u,d]=S.useState(!1),[f,h]=S.useState(null),[g,x]=S.useState([]),[y,v]=S.useState(!1),[T,k]=S.useState(null),[b,N]=S.useState({isOpen:!1,testType:null,testId:null,testName:null,questions:[]}),[E,P]=S.useState(null),[M,j]=S.useState(0),{getItem:A,setItem:O,removeItem:L}=rW();S.useEffect(()=>{let ve;return u&&E&&(ve=setInterval(()=>{const Fe=Math.floor((Date.now()-E)/1e3);j(Fe)},1e3)),()=>{ve&&clearInterval(ve)}},[u,E]);const q=async(ve,Fe)=>{try{v(!0),k(null),console.log(`[DEBUG] loadTestForPage called with testType: ${ve}, testId: ${Fe}`);const Le=await Pn.getTestInfo(ve,Fe);console.log("[DEBUG] Test info retrieved:",Le);const Ue=await Pn.getTestQuestions(ve,Fe);console.log("[DEBUG] Test questions retrieved:",Ue),r({...Le,testType:ve,testId:Fe}),s(Ue),d(!0),P(Date.now()),j(0),Q(ve,Fe),console.log("[DEBUG] Test loaded successfully")}catch(Le){k(Le.message||"Failed to load test"),console.error("Error loading test:",Le)}finally{v(!1)}},Q=(ve,Fe)=>{try{const Le=`test_progress_${ve}_${Fe}`,Ue=A(Le);Ue&&(i(Ue.answers||{}),l(Ue.progress||{}))}catch(Le){console.error("Error loading saved progress:",Le)}},ae=(ve,Fe,Le,Ue)=>{try{if(window.tokenManager&&!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot save progress: No valid JWT token");return}const Ie=`test_progress_${window.tokenManager?.getDecodedToken()?.sub||"unknown"}_${ve}_${Fe}`,Ye={...a,[Le]:Ue},Ne={...o,[Le]:{answered:!0,timestamp:Date.now()}};i(Ye),l(Ne),O(Ie,{answers:Ye,progress:Ne,lastSaved:Date.now()}),console.log(`Saved progress for question ${Le}:`,Ue)}catch(Pt){console.error("Error saving test progress:",Pt)}},te=(ve,Fe,Le)=>{try{if(window.tokenManager&&!window.tokenManager.isAuthenticated())return console.warn("[WARN] Cannot get progress: No valid JWT token"),null;const Pt=`test_progress_${window.tokenManager?.getDecodedToken()?.sub||"unknown"}_${ve}_${Fe}`;return A(Pt)?.answers?.[Le]||null}catch(Ue){return console.error("Error getting test progress:",Ue),null}},ne=(ve,Fe)=>{try{if(console.log(`[DEBUG] clearTestProgress called with testType: ${ve}, testId: ${Fe}`),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot clear progress: No valid JWT token");return}const Le=window.tokenManager?.getDecodedToken()?.sub||"unknown",Ue=`test_progress_${Le}_${ve}_${Fe}`;console.log(`[DEBUG] Removing localStorage key: ${Ue}`);const Pt=A(Ue)!==null;L(Ue),i({}),l({});for(let Ie=0;Ie<localStorage.length;Ie++){const Ye=localStorage.key(Ie);Ye&&Ye.startsWith(`test_progress_${Le}_${ve}_${Fe}_`)&&(localStorage.removeItem(Ye),console.log(`[DEBUG] Cleared individual question key: ${Ye}`))}console.log(Pt?`[DEBUG] Progress cleared for test ${ve}_${Fe}`:`[DEBUG] No progress found to clear for test ${ve}_${Fe}`)}catch(Le){console.error("Error clearing test progress:",Le)}},B=async(ve,Fe,Le="")=>{try{v(!0),k(null),console.log("Submitting test:",{testType:ve,testId:Fe});const Ue=oe(ve,Fe);if(Object.keys(Ue).length===0){k("Please answer at least one question before submitting.");return}let Pt;try{Pt=await Pn.getTestInfo(ve,Fe)}catch(Ut){console.error("Error getting test info:",Ut);const ar=await Pn.getTestQuestions(ve,Fe);Pt={test_name:`Test ${Fe}`,num_questions:ar.length}}const Ie=await Pn.getTestQuestions(ve,Fe),Ye=jf(Ie,Ue,ve),Ne=Pt.num_questions,Ve=le(Ue,ve),Ge={test_id:Fe,test_name:Pt.test_name,score:Ye,maxScore:Ne,answers:Ve},Ot=await Pn.submitTest(ve,Fe,Ge);if(Ot.success){if(h(Ot.result),U(ve,Fe,Le),ne(ve,Fe),Le){const Ut=`student_results_table_${Le}`;ve!=="drawing"?(console.log(" TestContext: Caching test results after submission with key:",Ut),qs(Ut,Ot.result,da.student_results_table)):console.log(" TestContext: Skipping cache for drawing test submission (teacher-scored).")}return Le&&t1(Le,ve,Fe),d(!1),Ot.results}else throw new Error(Ot.message||"Test submission failed")}catch(Ue){throw k(Ue.message||"Failed to submit test"),Ue}finally{v(!1)}},V=(ve,Fe,Le)=>{h({testType:ve,testId:Fe,answers:Le}),d(!1)},R=()=>{r(null),s([]),i({}),l({}),d(!1),h(null),k(null),P(null),j(0)},H=(ve,Fe,Le="")=>{try{const Ue=`test_completed_${Le}_${ve}_${Fe}`;return A(Ue)===!0}catch(Ue){return console.error("Error checking test completion:",Ue),!1}},U=(ve,Fe,Le="")=>{try{const Ue=`test_completed_${Le}_${ve}_${Fe}`;O(Ue,!0)}catch(Ue){console.error("Error marking test completed:",Ue)}},I=ve=>Object.keys(a).length,W=()=>{const ve=I(t?.testType),Fe=n.length;return{canSubmit:ve===Fe,answeredCount:ve,totalQuestions:Fe}},K=()=>{t&&ne(t.testType,t.testId),R()},Z=(ve="")=>{try{const Fe=`student_results_table_${ve}`;console.log(" TestContext: Clearing test results cache:",Fe),localStorage.removeItem(Fe),console.log(" TestContext: Test results cache cleared")}catch(Fe){console.error("Error clearing test results cache:",Fe)}},oe=(ve,Fe)=>({...a}),J=(ve,Fe,Le=null)=>{try{if(!ve)return"No answer";switch(Fe){case"true_false":return ve?"True":"False";case"multiple_choice":if(Le&&typeof ve=="string"&&!isNaN(parseInt(ve))){const Ue=parseInt(ve),Pt=`option_${String.fromCharCode(97+Ue)}`,Ie=Le[Pt];if(Ie)return Ie}return String(ve).toUpperCase();case"input":return String(ve);case"matching_type":return typeof ve=="object"?Object.entries(ve).map(([Ue,Pt])=>`${Ue}  ${Pt}`).join(", "):String(ve);case"word_matching":return typeof ve=="object"?Object.entries(ve).map(([Ue,Pt])=>`${Ue}  ${Pt}`).join(", "):String(ve);case"drawing":return"Drawing submitted";default:return String(ve)}}catch(Ue){return console.error("Error formatting student answer:",Ue),"Error displaying answer"}},le=(ve,Fe)=>{try{if(!ve||typeof ve!="object")return{};const Le={};return Object.entries(ve).forEach(([Ue,Pt])=>{if(Pt!=null)switch(Fe){case"true_false":Le[Ue]=!!Pt;break;case"multiple_choice":Le[Ue]=String(Pt).toUpperCase();break;case"input":Le[Ue]=String(Pt).trim();break;case"matching_type":typeof Pt=="object"?Le[Ue]=Pt:Le[Ue]=String(Pt);break;case"word_matching":typeof Pt=="object"?Le[Ue]=Pt:Le[Ue]=String(Pt);break;case"drawing":Le[Ue]=Pt;break;default:Le[Ue]=Pt}}),Le}catch(Le){return console.error("Error transforming answers for submission:",Le),ve||{}}},ue=S.useCallback(async(ve="")=>{try{v(!0);const Fe=`student_active_tests_${ve}`,Le=fa(Fe);if(Le)return x(Le),Le;const Ue=await Pn.getActiveTests();return x(Ue),qs(Fe,Ue,da.student_active_tests),Ue}catch(Fe){return k(Fe.message||"Failed to load active tests"),x([]),[]}finally{v(!1)}},[]),de=async()=>{try{return v(!0),await Pn.getTeacherTests()}catch(ve){return k(ve.message||"Failed to load teacher tests"),[]}finally{v(!1)}},Te=async ve=>{try{return v(!0),await Pn.createTest(ve)}catch(Fe){throw k(Fe.message||"Failed to create test"),Fe}finally{v(!1)}},ie=async(ve,Fe)=>{try{return v(!0),await Pn.deleteTest(ve,Fe)}catch(Le){throw k(Le.message||"Failed to delete test"),Le}finally{v(!1)}},xe=async(ve,Fe)=>{try{return await Pn.getTestInfo(ve,Fe)}catch(Le){throw console.error("Error getting test info:",Le),Le}},Ae=async(ve,Fe)=>{try{return await Pn.getTestQuestions(ve,Fe)}catch(Le){throw console.error("Error getting test questions:",Le),Le}},Me=async(ve,Fe,Le)=>{try{console.log("Showing test results:",{testType:ve,testId:Fe,studentAnswers:Le});const Ue=await xe(ve,Fe),Pt=await Ae(ve,Fe);It(Ue,Pt,ve,Le),d(!1),console.log("Test results displayed successfully")}catch(Ue){console.error("Error showing test results:",Ue),k("Failed to display test results"),h({testType:ve,testId:Fe,answers:Le,showResults:!0,error:"Could not load detailed results"}),d(!1)}},Je=async(ve,Fe,Le)=>{try{v(!0);const Ue=await xe(ve,Fe),Pt=await Ae(ve,Fe);It(Ue,Pt,ve,Le)}catch(Ue){k(Ue.message||"Failed to load test results")}finally{v(!1)}},He=S.useCallback(async(ve="")=>{try{v(!0);const Fe=`student_results_table_${ve}`;console.log(" TestContext: Checking cache for key:",Fe);const Le=fa(Fe);if(Le)return console.log(" TestContext: Cache HIT! Using cached test results"),h(Le),Le;console.log(" TestContext: Cache MISS! Fetching from API");const Ue=await Pn.getStudentTestResults();return console.log(" TestContext: Test results loaded:",Ue),console.log(" TestContext: Results data:",Ue?.results||Ue),console.log(" TestContext: Results length:",Ue?.results?.length||0),h(Ue),console.log(" TestContext: Caching test results with key:",Fe),console.log(" TestContext: Results being cached:",Ue),console.log(" TestContext: Results.results being cached:",Ue.results),qs(Fe,Ue,da.student_results_table),Ue}catch(Fe){throw console.error("Error loading test results:",Fe),k(Fe.message||"Failed to load test results"),Fe}finally{v(!1)}},[]),It=(ve,Fe,Le,Ue)=>{try{console.log("Displaying test results:",{testInfo:ve,questions:Fe,testType:Le,studentAnswers:Ue});const Pt=jf(Fe,Ue,Le),Ie=ve?.num_questions||Fe?.length||0,Ye=Ie>0?Math.round(Pt/Ie*100):0,Ne=Ye>=60,Ve=Fe.map((Ge,Ot)=>{const Ut=Ge.question_id||Ge.id,ar=Ue[Ut],Dr=Up(Ge,ar,Le);return{questionNumber:Ot+1,question:Ge.question||Ge.question_text,userAnswer:J(ar,Le),correctAnswer:kv(Ge,Le),isCorrect:Dr,questionType:Le}});h({testInfo:ve,questions:Fe,testType:Le,studentAnswers:Ue,showResults:!0,score:Pt,totalQuestions:Ie,percentage:Ye,passed:Ne,questionAnalysis:Ve,timestamp:new Date().toISOString()}),l(Ge=>({...Ge,score:Pt,totalQuestions:Ie,percentage:Ye,passed:Ne,lastUpdated:Date.now()})),it(),console.log(`Test results displayed: ${Pt}/${Ie} (${Ye}%) - ${Ne?"PASSED":"FAILED"}`)}catch(Pt){console.error("Error displaying test results:",Pt),k("Failed to display test results")}},it=S.useCallback(()=>{try{console.log("Setting up test results page event listeners");const ve=Ie=>{if(Ie.key==="Escape"&&K(),Ie.ctrlKey&&Ie.key==="p"&&(Ie.preventDefault(),window.print()),Ie.key==="Enter"&&f&&!f.passed){const Ye=document.getElementById("retake-test-button");Ye&&Ye.click()}},Fe=()=>{window.print()},Le=()=>{if(f){const Ie=`Test: ${f.testInfo?.test_name||"Test"}
Score: ${f.score}/${f.totalQuestions} (${f.percentage}%)
Status: ${f.passed?"PASSED":"FAILED"}
Completed: ${new Date(f.timestamp).toLocaleString()}`;navigator.clipboard.writeText(Ie).then(()=>{console.log("Results copied to clipboard")}).catch(Ye=>{console.error("Failed to copy results:",Ye)})}};document.addEventListener("keydown",ve);const Ue=document.getElementById("print-results");Ue&&Ue.addEventListener("click",Fe);const Pt=document.getElementById("copy-results");return Pt&&Pt.addEventListener("click",Le),()=>{document.removeEventListener("keydown",ve),Ue&&Ue.removeEventListener("click",Fe),Pt&&Pt.removeEventListener("click",Le)}}catch(ve){console.error("Error setting up test results page event listeners:",ve)}},[K,f]),kt=async(ve,Fe,Le)=>{try{v(!0),k(null),console.log("Viewing test details:",{testType:ve,testId:Fe,testName:Le}),N({isOpen:!0,testType:ve,testId:Fe,testName:Le,questions:[],isLoading:!0});const Ue=await Pn.getTestQuestions(ve,Fe);Ue&&Ue.length>0?(N({isOpen:!0,testType:ve,testId:Fe,testName:Le,questions:Ue,isLoading:!1}),console.log(`Test details loaded: ${Ue.length} questions`)):(k("Could not load test questions. Please try again."),N({isOpen:!0,testType:ve,testId:Fe,testName:Le,questions:[],isLoading:!1,error:"No questions available for this test"}))}catch(Ue){console.error("Error loading test details:",Ue),k("Error loading test details. Please try again."),N({isOpen:!0,testType:ve,testId:Fe,testName:Le,questions:[],isLoading:!1,error:Ue.message||"Failed to load test details"})}finally{v(!1)}},pt=(ve,Fe,Le,Ue)=>{try{console.log("Showing test details modal:",{testType:ve,testId:Fe,testName:Le,questions:Ue}),N({isOpen:!0,testType:ve,testId:Fe,testName:Le,questions:Ue||[],isLoading:!1,error:null})}catch(Pt){console.error("Error showing test details modal:",Pt),k("Failed to show test details modal")}},ut=()=>{try{console.log("Closing test details modal"),N({isOpen:!1,testType:null,testId:null,testName:null,questions:[],isLoading:!1,error:null})}catch(ve){console.error("Error closing test details modal:",ve)}},_t=(ve,Fe)=>{try{switch(Fe){case"multiple_choice":return c.jsxs("div",{className:"answer-options",children:[c.jsx("p",{children:c.jsx("strong",{children:"Options:"})}),c.jsxs("p",{children:["A) ",ve.option_a||"No text"]}),c.jsxs("p",{children:["B) ",ve.option_b||"No text"]}),ve.option_c&&c.jsxs("p",{children:["C) ",ve.option_c]}),ve.option_d&&c.jsxs("p",{children:["D) ",ve.option_d]}),ve.option_e&&c.jsxs("p",{children:["E) ",ve.option_e]}),ve.option_f&&c.jsxs("p",{children:["F) ",ve.option_f]}),c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ve.correct_answer||"Not specified"]})})]});case"true_false":return c.jsx("div",{className:"answer-options",children:c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ve.correct_answer?"True":"False"]})})});case"input":return c.jsx("div",{className:"answer-options",children:c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ve.correct_answer||"Not specified"]})})});case"matching_type":return c.jsx("div",{className:"answer-options",children:c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ve.correct_answer?JSON.stringify(ve.correct_answer):"Not specified"]})})});case"word_matching":return c.jsx("div",{className:"answer-options",children:c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ve.correct_answer?JSON.stringify(ve.correct_answer):"Not specified"]})})});default:return c.jsx("p",{children:"Unknown question type"})}}catch(Le){return console.error("Error formatting question answer display:",Le),c.jsx("p",{children:"Error displaying question"})}},qt=(ve,Fe)=>{try{console.log("Navigating to test:",{testType:ve,testId:Fe}),r({testType:ve,testId:Fe}),d(!0),q(ve,Fe)}catch(Le){console.error("Error navigating to test:",Le),k("Failed to navigate to test")}},Jt=()=>{try{console.log("Hiding test sections"),r(null),s([]),i({}),l({}),d(!1),h(null),k(null)}catch(ve){console.error("Error hiding test sections:",ve)}},Ht=(ve,Fe,Le,Ue)=>{try{console.log("Displaying test on page:",{testInfo:ve,questions:Fe,testType:Le,testId:Ue}),r({...ve,testType:Le,testId:Ue}),s(Fe),d(!0),Q(Le,Ue),Rt(Le,Ue),nt(Le,Ue)}catch(Pt){console.error("Error displaying test on page:",Pt),k("Failed to display test on page")}},$e=(ve,Fe,Le)=>{try{return console.log("Rendering questions for page:",{questions:ve,testType:Fe,testId:Le}),!ve||!Array.isArray(ve)?(console.warn("Invalid questions array for rendering"),[]):ve.map((Ue,Pt)=>{const Ie=Ye=>{const Ne={...a,[Ue.question_id]:Ye};i(Ne),ae(Fe,Le,Ue.question_id,Ye)};return{question:Ue,index:Pt,testType:Fe,testId:Le,studentAnswer:a[Ue.question_id]||"",onAnswerChange:Ie}})}catch(Ue){return console.error("Error rendering questions for page:",Ue),[]}},ze=S.useCallback((ve,Fe)=>{try{if(!ve||!Fe){console.warn("Cannot save progress: missing testType or testId");return}const Le=`test_progress_${ve}_${Fe}`,Ue={answers:a,progress:o,lastSaved:Date.now(),testType:ve,testId:Fe};O(Le,Ue),console.log(`Progress saved for test ${ve}_${Fe}:`,Ue)}catch(Le){console.error("Error saving progress for page:",Le)}},[a,o,O]),tt=S.useCallback(ve=>{try{return!a||Object.keys(a).length===0?0:Object.values(a).filter(Le=>Le==null?!1:typeof Le=="string"?Le.trim()!=="":typeof Le=="object"?Object.keys(Le).length>0:!0).length}catch(Fe){return console.error("Error getting answered questions count for page:",Fe),0}},[a]),ot=S.useCallback((ve,Fe)=>{try{console.log("Updating progress display for page:",{testType:ve,testId:Fe});const Le=tt(ve),Ue=n.length,Pt=Ue>0?Math.round(Le/Ue*100):0,Ie=Le===Ue&&Ue>0;l(Ge=>({...Ge,answeredCount:Le,totalQuestions:Ue,percentage:Pt,canSubmit:Ie,remainingQuestions:Ue-Le,lastUpdated:Date.now()}));const Ye=document.getElementById("progress-bar"),Ne=document.getElementById("progress-text"),Ve=document.getElementById("submit-test-button");return Ye&&(Ye.style.width=`${Pt}%`,Ye.className=Ye.className.replace(/bg-\w+-\d+/,""),Pt>=100?Ye.classList.add("bg-green-500"):Pt>=80?Ye.classList.add("bg-blue-500"):Pt>=60?Ye.classList.add("bg-yellow-500"):Pt>=40?Ye.classList.add("bg-orange-500"):Ye.classList.add("bg-red-500")),Ne&&(Ne.textContent=`${Le}/${Ue} questions answered (${Pt}%)`),Ve&&(Ve.disabled=!Ie,Ie?(Ve.textContent=" Submit Test",Ve.classList.remove("bg-gray-400"),Ve.classList.add("bg-green-600","hover:bg-green-700")):(Ve.textContent=` Complete ${Ue-Le} more question${Ue-Le!==1?"s":""}`,Ve.classList.remove("bg-green-600","hover:bg-green-700"),Ve.classList.add("bg-gray-400"))),{answeredCount:Le,totalQuestions:Ue,percentage:Pt,canSubmit:Ie}}catch(Le){return console.error("Error updating progress display for page:",Le),{answeredCount:0,totalQuestions:0,percentage:0,canSubmit:!1}}},[n.length,tt]),nt=S.useCallback((ve,Fe)=>{try{console.log("Setting up test page event listeners:",{testType:ve,testId:Fe});const Le=setInterval(()=>{Object.keys(a).length>0&&(ze(ve,Fe),console.log("Auto-saved progress for test:",ve,Fe))},3e4),Ue=setInterval(()=>{ot(ve,Fe)},2e3),Pt=Ge=>{Ge.key==="Escape"&&window.confirm("Are you sure you want to exit the test? Your progress will be saved.")&&K(),Ge.ctrlKey&&Ge.key==="s"&&(Ge.preventDefault(),ze(ve,Fe),console.log("Manual save triggered")),Ge.key},Ie=Ge=>{Object.keys(a).length>0&&(Ge.preventDefault(),Ge.returnValue="Your test progress will be saved. Are you sure you want to leave?")},Ye=()=>{document.hidden&&(console.log("Tab became hidden - saving progress"),ze(ve,Fe))},Ne=()=>{console.log("Window focused - updating progress"),ot(ve,Fe)},Ve=()=>{console.log("Window blurred - saving progress"),ze(ve,Fe)};return document.addEventListener("keydown",Pt),window.addEventListener("beforeunload",Ie),document.addEventListener("visibilitychange",Ye),window.addEventListener("focus",Ne),window.addEventListener("blur",Ve),window.testIntervals||(window.testIntervals={}),window.testIntervals[`autosave_${ve}_${Fe}`]=Le,window.testIntervals[`progress_${ve}_${Fe}`]=Ue,()=>{clearInterval(Le),clearInterval(Ue),document.removeEventListener("keydown",Pt),window.removeEventListener("beforeunload",Ie),document.removeEventListener("visibilitychange",Ye),window.removeEventListener("focus",Ne),window.removeEventListener("blur",Ve),window.testIntervals&&(delete window.testIntervals[`autosave_${ve}_${Fe}`],delete window.testIntervals[`progress_${ve}_${Fe}`])}}catch(Le){console.error("Error setting up test page event listeners:",Le)}},[a,ze,ot,K]),Dt=S.useCallback(()=>{try{const ve=tt(t?.testType),Fe=n.length,Le=ve===Fe&&Fe>0,Ue=document.getElementById("submit-test-button");return Ue&&(Ue.disabled=!Le,Ue.textContent=Le?"Submit Test":`Complete ${Fe-ve} more questions`),{canSubmit:Le,answeredCount:ve,totalQuestions:Fe}}catch(ve){return console.error("Error updating submit button state for page:",ve),{canSubmit:!1,answeredCount:0,totalQuestions:0}}},[t,n.length,tt]),Rt=S.useCallback((ve,Fe)=>{try{console.log("Setting up progress tracking for page:",{testType:ve,testId:Fe});const Le=setInterval(()=>{ot(ve,Fe),Dt()},1e3),Ue=setInterval(()=>{Object.keys(a).length>0&&ze(ve,Fe)},3e4);return window.testIntervals||(window.testIntervals={}),window.testIntervals[`progress_${ve}_${Fe}`]=Le,window.testIntervals[`autosave_${ve}_${Fe}`]=Ue,()=>{clearInterval(Le),clearInterval(Ue),window.testIntervals&&(delete window.testIntervals[`progress_${ve}_${Fe}`],delete window.testIntervals[`autosave_${ve}_${Fe}`])}}catch(Le){console.error("Error setting up progress tracking for page:",Le)}},[a,ot,Dt,ze]),Qt=S.useCallback(async(ve,Fe)=>{const Le=document.getElementById("submit-test-button");try{const Ue=tt(ve),Pt=n.length;if(Ue<Pt){k(`Please answer all ${Pt} questions before submitting.`);return}if(!window.confirm("Are you sure you want to submit your test? This action cannot be undone."))return;Le&&(Le.disabled=!0,Le.innerHTML=`
          <div class="flex items-center justify-center space-x-2">
            <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>
            <span>Submitting...</span>
          </div>
        `),await B(ve,Fe)&&(ne(ve,Fe),V(ve,Fe,a),console.log("Test submitted successfully!"))}catch(Ue){console.error("Error submitting test from page:",Ue),k("Failed to submit test. Please try again."),Le&&(Le.disabled=!1,Le.textContent="Submit Test")}},[tt,n.length,B,ne,V,a]),wr=S.useCallback(()=>{try{if(!t)return null;const ve=["true_false","multiple_choice","input","matching_type","word_matching"];return ve.includes(t.testType)?t.testType:ve.includes(t.test_type)?t.test_type:null}catch(ve){return console.error("Error getting current test type:",ve),null}},[t]),kr=S.useCallback((ve,Fe)=>{try{console.log("Clearing progress tracking interval:",{testType:ve,testId:Fe});const Le=`progress_interval_${ve}_${Fe}`,Ue=`autosave_interval_${ve}_${Fe}`;window.testIntervals&&(window.testIntervals[Le]&&(clearInterval(window.testIntervals[Le]),delete window.testIntervals[Le]),window.testIntervals[Ue]&&(clearInterval(window.testIntervals[Ue]),delete window.testIntervals[Ue])),console.log(`Cleared progress tracking intervals for test ${ve}_${Fe}`)}catch(Le){console.error("Error clearing progress tracking interval:",Le)}},[]),gr={currentTest:t,testQuestions:n,studentAnswers:a,testProgress:o,isTestActive:u,testResults:f,activeTests:g,isLoading:y,error:T,testDetailsModal:b,testStartTime:E,timeElapsed:M,loadTestForPage:q,submitTest:B,navigateToTestResults:V,navigateBackToCabinet:R,clearTestDataAndReturnToCabinet:K,saveTestProgress:ae,getTestProgress:te,clearTestProgress:ne,loadSavedProgressForPage:Q,isTestCompleted:H,markTestCompleted:U,markTestCompletedInUI:(ve,Fe)=>{console.log("Marking test completed in UI:",{testType:ve,testId:Fe}),U(ve,Fe)},getAnsweredQuestionsCount:I,updateSubmitButtonState:W,updateSubmitButtonStateForPage:Dt,loadStudentActiveTests:ue,loadActiveTests:ue,loadTeacherActiveTests:de,getTestInfo:xe,getTestQuestions:Ae,createTest:Te,deleteTest:ie,showTestResults:Me,loadTestResults:He,loadTestResultsForPage:Je,displayTestResultsOnPage:It,setupTestResultsPageEventListeners:it,clearTestResultsCache:Z,viewTestDetails:kt,showTestDetailsModal:pt,closeTestDetailsModal:ut,getQuestionAnswerDisplay:_t,navigateToTest:qt,hideTestSections:Jt,displayTestOnPage:Ht,renderQuestionsForPage:$e,setupTestPageEventListeners:nt,setupProgressTrackingForPage:Rt,updateProgressDisplayForPage:ot,submitTestFromPage:Qt,getAnsweredQuestionsCountForPage:tt,getCurrentTestType:wr,saveProgressForPage:ze,clearProgressTrackingInterval:kr,collectTestAnswers:oe,calculateTestScore:jf,checkAnswerCorrectness:Up,formatStudentAnswerForDisplay:J,getCorrectAnswer:kv,transformAnswersForSubmission:le,clearAllTestData:()=>{try{console.log("Clearing old test data from localStorage (older than 15 days)...");const Fe=Date.now()-360*60*60*1e3,Le=[];for(let Ue=0;Ue<localStorage.length;Ue++){const Pt=localStorage.key(Ue);if(!(!Pt||!((Pt.startsWith("test_")||Pt.startsWith("student_")||Pt.startsWith("teacher_")||Pt.startsWith("admin_")||Pt.includes("progress")||Pt.includes("answers"))&&!Pt.includes("test_completed_"))))try{const Ye=localStorage.getItem(Pt);if(!Ye){Le.push(Pt);continue}let Ne=null;if(Ye.startsWith("{")||Ye.startsWith("[")){const Ve=JSON.parse(Ye),Ge=Ve.timestamp||Ve.lastSaved||Ve.lastTickAt||Ve.createdAt||Ve.updatedAt||Ve.startedAt||Ve.started_at||Ve.created_at;Ge&&(Ne=new Date(Ge).getTime())}if(!Ne){const Ve=`${Pt}__ts`,Ge=localStorage.getItem(Ve);Ge&&(Ne=parseInt(Ge)||null)}if(!Ne)continue;Ne<Fe&&Le.push(Pt)}catch{continue}}return Le.forEach(Ue=>{console.log(`Removing old localStorage key: ${Ue}`),L(Ue)}),console.log(`Cleared ${Le.length} old test-related items from localStorage`),{success:!0,clearedCount:Le.length}}catch(ve){return console.error("Error clearing old test data:",ve),{success:!1,error:ve.message}}},setCurrentTest:r,setTestQuestions:s,setStudentAnswers:i,setTestProgress:l,setIsTestActive:d,setTestResults:h,setError:k};return c.jsx(eH.Provider,{value:gr,children:e})},y2=()=>{const e=S.useContext(eH);if(!e)throw new Error("useTest must be used within a TestProvider");return e},Py=window.location.hostname==="mathayomwatsing.netlify.app";Py&&(console.log=()=>{},console.debug=()=>{},console.info=()=>{},console.warn=()=>{});const ye={debug:(e,...t)=>{Py||console.log(e,...t)},warn:(e,...t)=>{Py||console.warn(e,...t)},error:(e,...t)=>{console.error(e,...t)},info:(e,...t)=>{Py||console.info(e,...t)},isEnabled:()=>!Py},v2=({testResults:e,onBackToCabinet:t,onRetakeTest:r,isLoading:n=!1,caught_cheating:s=!1,visibility_change_times:a=0})=>{if(!e||!e.showResults)return c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx("div",{className:"text-center",children:c.jsx("p",{className:"text-gray-500",children:"No test results to display"})})});const{testInfo:i,testType:o,score:l,totalQuestions:u,percentage:d,passed:f,questionAnalysis:h,timestamp:g}=e,x=T=>({multiple_choice:"Multiple Choice",true_false:"True/False",input:"Input",matching_type:"Matching"})[T]||T,y=T=>T>=80?"text-green-600 bg-green-50":T>=60?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",v=T=>T?"text-green-600 bg-green-100 border-green-200":"text-red-600 bg-red-100 border-red-200";return n?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading test results..."})]})}):c.jsx("div",{className:"bg-gray-50 py-8 overflow-y-auto",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs(ht.div,{className:"bg-white rounded-lg shadow-lg p-6 mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(e?.caught_cheating||s)&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mb-6",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsxs("p",{className:"text-sm text-red-700",children:[c.jsx("strong",{children:"Academic Integrity Warning:"}),"This test has been flagged for suspicious behavior. You have switched tabs ",e?.visibility_change_times||a||0," times during the test."]})})]})}),c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Test Results"}),c.jsx("h2",{className:"text-xl text-gray-700 mb-1",children:i?.test_name||"Test"}),c.jsxs("p",{className:"text-sm text-gray-500",children:[x(o),"  Completed on ",new Date(g).toLocaleDateString()]})]}),c.jsx("div",{className:"text-right",children:c.jsx("div",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium border ${v(f)}`,children:f?" PASSED":" FAILED"})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[c.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-3xl font-bold text-gray-900",children:l}),c.jsx("div",{className:"text-sm text-gray-600",children:"Correct Answers"})]}),c.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-3xl font-bold text-gray-900",children:u}),c.jsx("div",{className:"text-sm text-gray-600",children:"Total Questions"})]}),c.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:`text-3xl font-bold ${y(d).split(" ")[0]}`,children:[d,"%"]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Score"})]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-6",children:c.jsx(ht.div,{className:`h-3 rounded-full ${y(d).split(" ")[1]}`,initial:{width:0},animate:{width:`${d}%`},transition:{duration:1,ease:"easeOut"}})}),c.jsx("div",{className:"flex flex-wrap gap-3",children:c.jsx(lt,{onClick:t,variant:"primary",className:"flex items-center gap-2",children:" Back to Cabinet"})})]}),o!=="matching_type"&&o!=="word_matching"&&c.jsxs(ht.div,{className:"bg-white rounded-lg shadow-lg p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Question Review"}),c.jsx("div",{className:"space-y-4",children:h.map((T,k)=>c.jsxs(ht.div,{className:`p-4 rounded-lg border-2 ${T.isCorrect?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:k*.1},children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["Question ",T.questionNumber]}),c.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${T.isCorrect?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T.isCorrect?" Correct":" Incorrect"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-gray-800 font-medium mb-2",children:"Question:"}),c.jsx("p",{className:"text-gray-700 bg-gray-100 p-3 rounded",children:T.question})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-800 font-medium mb-2",children:"Your Answer:"}),c.jsx("p",{className:`p-3 rounded ${T.isCorrect?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T.userAnswer||"No answer provided"})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-800 font-medium mb-2",children:"Correct Answer:"}),c.jsx("p",{className:"bg-blue-100 text-blue-800 p-3 rounded",children:T.correctAnswer})]})]})]},k))})]}),c.jsxs(ht.div,{className:"bg-white rounded-lg shadow-lg p-6 mt-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Summary Statistics"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.filter(T=>T.isCorrect).length}),c.jsx("div",{className:"text-sm text-blue-600",children:"Correct"})]}),c.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:h.filter(T=>!T.isCorrect).length}),c.jsx("div",{className:"text-sm text-red-600",children:"Incorrect"})]}),c.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"text-2xl font-bold text-gray-600",children:[Math.round(h.filter(T=>T.isCorrect).length/u*100),"%"]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Accuracy"})]}),c.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600",children:u}),c.jsx("div",{className:"text-sm text-purple-600",children:"Total"})]})]})]})]})})},rH=({isOpen:e,onClose:t,testType:r,testId:n,testName:s,questions:a=[],isLoading:i=!1})=>{if(!e)return null;const o=f=>({multiple_choice:"Multiple Choice",true_false:"True/False",input:"Input",matching_type:"Matching"})[f]||f,l=f=>({multiple_choice:"",true_false:"",input:"",matching_type:""})[f]||"",u=(f,h)=>{switch(h){case"multiple_choice":return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Options:"}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[f.option_a&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"A"}),c.jsx("span",{className:"text-gray-700",children:f.option_a})]}),f.option_b&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"B"}),c.jsx("span",{className:"text-gray-700",children:f.option_b})]}),f.option_c&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"C"}),c.jsx("span",{className:"text-gray-700",children:f.option_c})]}),f.option_d&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"D"}),c.jsx("span",{className:"text-gray-700",children:f.option_d})]}),f.option_e&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"E"}),c.jsx("span",{className:"text-gray-700",children:f.option_e})]}),f.option_f&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"F"}),c.jsx("span",{className:"text-gray-700",children:f.option_f})]})]})]});case"true_false":return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Options:"}),c.jsxs("div",{className:"flex space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"T"}),c.jsx("span",{className:"text-gray-700",children:"True"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"F"}),c.jsx("span",{className:"text-gray-700",children:"False"})]})]})]});case"input":return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Answer Format:"}),c.jsx("div",{className:"bg-gray-100 p-3 rounded",children:c.jsx("span",{className:"text-gray-600 italic",children:"Type your answer in the text input field"})})]});case"matching_type":return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Instructions:"}),c.jsx("div",{className:"bg-gray-100 p-3 rounded",children:c.jsx("span",{className:"text-gray-600 italic",children:"Match the items by connecting them with lines or selecting pairs"})})]});default:return null}},d=(f,h)=>{if(!f.correct_answer)return null;let g="";switch(h){case"multiple_choice":g=f.correct_answer.toUpperCase();break;case"true_false":g=f.correct_answer?"True":"False";break;case"input":g=f.correct_answer;break;case"matching_type":g=typeof f.correct_answer=="object"?JSON.stringify(f.correct_answer):f.correct_answer;break;default:g=String(f.correct_answer)}return c.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded",children:[c.jsx("p",{className:"font-medium text-green-800 mb-1",children:"Correct Answer:"}),c.jsx("p",{className:"text-green-700 font-mono",children:g})]})};return c.jsx(al,{children:c.jsxs(ht.div,{className:"fixed inset-0 z-50 overflow-y-auto",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[c.jsx(ht.div,{className:"fixed inset-0 bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t}),c.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:c.jsxs(ht.div,{className:"relative bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3},children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("span",{className:"text-2xl",children:l(r)}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s||"Test Details"}),c.jsxs("p",{className:"text-sm text-gray-600",children:[o(r),"  ",a.length," Questions"]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(lt,{onClick:()=>window.print(),variant:"outline",size:"sm",className:"flex items-center space-x-1",children:" Print"}),c.jsx(lt,{onClick:t,variant:"outline",size:"sm",className:"flex items-center space-x-1",children:" Close"})]})]}),c.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:i?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading test details..."})]})}):a.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Questions Available"}),c.jsx("p",{className:"text-gray-500",children:"This test doesn't have any questions yet."})]}):c.jsx("div",{className:"space-y-6",children:a.map((f,h)=>c.jsxs(ht.div,{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:h*.1,duration:.3},children:[c.jsx("div",{className:"flex items-start justify-between mb-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsxs("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full",children:["Question ",h+1]}),c.jsx("span",{className:"text-gray-500 text-sm",children:o(r)})]})}),c.jsx("div",{className:"mb-4",children:c.jsx("p",{className:"text-gray-800 font-medium text-lg leading-relaxed",children:f.question||f.question_text})}),u(f,r),d(f,r)]},f.id||f.question_id||h))})}),c.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[c.jsx("div",{className:"text-sm text-gray-600",children:a.length>0&&c.jsxs("span",{children:["Showing ",a.length," question",a.length!==1?"s":""]})}),c.jsx("div",{className:"flex items-center space-x-3",children:c.jsx(lt,{onClick:t,variant:"primary",className:"flex items-center space-x-2",children:"Close"})})]})]})})]})})},Lde=({answeredCount:e=0,totalQuestions:t=0,timeElapsed:r=0,onSubmitTest:n,isSubmitting:s=!1,canSubmit:a=!1,className:i=""})=>{const o=t>0?Math.round(e/t*100):0,l=t-e,u=h=>{const g=Math.floor(h/3600),x=Math.floor(h%3600/60),y=h%60;return g>0?`${g}:${x.toString().padStart(2,"0")}:${y.toString().padStart(2,"0")}`:`${x}:${y.toString().padStart(2,"0")}`},d=h=>h>=100?"bg-green-500":h>=80?"bg-blue-500":h>=60?"bg-yellow-500":h>=40?"bg-orange-500":"bg-red-500",f=h=>h>=100?"text-green-600":h>=80?"text-blue-600":h>=60?"text-yellow-600":h>=40?"text-orange-600":"text-red-600";return c.jsxs("div",{className:`bg-white rounded-lg shadow-lg p-6 ${i}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Progress"}),c.jsx("div",{className:"flex items-center space-x-4",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-2xl",children:""}),c.jsx("span",{className:"text-sm font-mono text-gray-600",children:u(r)})]})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Progress"}),c.jsxs("span",{className:`text-sm font-semibold ${f(o)}`,children:[o,"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:c.jsx(ht.div,{className:`h-full ${d(o)} transition-colors duration-300`,initial:{width:0},animate:{width:`${o}%`},transition:{duration:.5,ease:"easeOut"}})})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 mb-4",children:[c.jsxs("div",{className:"text-center p-2 sm:p-3 bg-blue-50 rounded-lg",children:[c.jsx("div",{className:"text-lg sm:text-2xl font-bold text-blue-600",children:e}),c.jsx("div",{className:"text-xs text-blue-600",children:"Answered"})]}),c.jsxs("div",{className:"text-center p-2 sm:p-3 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-lg sm:text-2xl font-bold text-gray-600",children:l}),c.jsx("div",{className:"text-xs text-gray-600",children:"Remaining"})]}),c.jsxs("div",{className:"text-center p-2 sm:p-3 bg-purple-50 rounded-lg",children:[c.jsx("div",{className:"text-lg sm:text-2xl font-bold text-purple-600",children:t}),c.jsx("div",{className:"text-xs text-purple-600",children:"Total"})]})]}),c.jsx("div",{className:"mb-4",children:e===t?c.jsx(ht.div,{className:"flex items-center justify-center p-3 bg-green-50 border border-green-200 rounded-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:c.jsx("span",{className:"text-green-600 font-medium",children:" All questions answered! Ready to submit."})}):l===1?c.jsx(ht.div,{className:"flex items-center justify-center p-3 bg-yellow-50 border border-yellow-200 rounded-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:c.jsx("span",{className:"text-yellow-600 font-medium",children:"Almost there! 1 question remaining."})}):c.jsx("div",{className:"flex items-center justify-center p-3 bg-gray-50 border border-gray-200 rounded-lg",children:c.jsxs("span",{className:"text-gray-600 font-medium",children:[l," questions remaining"]})})}),a&&c.jsx("div",{className:"flex justify-center",children:c.jsx(ht.button,{onClick:n,disabled:s,className:`px-8 py-3 rounded-lg font-semibold text-white transition-all duration-300 ${s?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 shadow-lg hover:shadow-xl"}`,whileHover:s?{}:{scale:1.05},whileTap:s?{}:{scale:.95},children:s?c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),c.jsx("span",{children:"Submitting..."})]}):c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Submit Test"})]})})})]})},Bde=({testText:e,blanks:t,separateType:r=!0,testId:n,testName:s="Unknown Test",teacherId:a="Unknown Teacher",subjectId:i,onTestComplete:o,onAnswerChange:l})=>{if(console.log(" FillBlanksTestStudent Props Debug:"),console.log("- testText:",e),console.log("- blanks:",t),console.log("- separateType:",r),console.log("- testId:",n),console.log("- testName:",s),console.log("- teacherId:",a),console.log("- subjectId:",i),!e||!t||!Array.isArray(t))return console.log(" FillBlanksTestStudent: Missing test data"),c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx($t,{className:"max-w-md w-full",children:c.jsxs($t.Body,{className:"text-center",children:[c.jsx("div",{className:"text-gray-500 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Test Data"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load fill blanks test data"}),c.jsx(lt,{onClick:()=>window.history.back(),variant:"primary",children:"Back to Dashboard"})]})})});const[u,d]=S.useState({}),[f,h]=S.useState(!1),[g,x]=S.useState(null),[y,v]=S.useState(null),[T,k]=S.useState(!1),[b,N]=S.useState(null),{showNotification:E}=ai(),{makeAuthenticatedRequest:P}=Bl(),{user:M}=Fs(),{startTracking:j,stopTracking:A,getCheatingData:O,clearData:L}=x1("fill_blanks",n,M?.student_id||M?.id);K_();const q=S.useCallback((ne,B)=>{try{let V=ne;if(typeof ne=="string"&&ne.startsWith("{"))try{const I=JSON.parse(ne);I.root&&I.root.children&&(V=I.root.children.map(W=>W.children?W.children.map(K=>K.style&&K.style.includes("background-color: #f0f9ff")?"[BLANK_PLACEHOLDER]":K.text||"").join(""):"").join(" "))}catch(I){console.error("Error parsing Lexical JSON:",I)}let R=V;B.forEach((I,W)=>{const K=`[${W+1}_________]`;R=R.replace("[BLANK_PLACEHOLDER]",K)});const U=R.split(/(\[\d+_________\])/).map((I,W)=>I.match(/\[\d+_________\]/)?c.jsx("span",{className:"inline-block px-3 py-1 mx-1 bg-purple-100 text-purple-800 border-2 border-purple-400 rounded-lg font-mono font-bold shadow-sm",children:I},W):c.jsx("span",{children:I},W));return c.jsx("div",{className:"prose max-w-none mb-6",children:c.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-wrap",children:U})})}catch(V){return console.error("Error rendering text with blanks:",V),c.jsx("div",{className:"text-red-500",children:"Error loading test content"})}},[]),Q=S.useCallback((ne,B)=>{try{let V=ne;if(typeof ne=="string"&&ne.startsWith("{"))try{const I=JSON.parse(ne);I.root&&I.root.children&&(V=I.root.children.map(W=>W.children?W.children.map(K=>K.style&&K.style.includes("background-color: #f0f9ff")?"[BLANK_PLACEHOLDER]":K.text||"").join(""):"").join(" "))}catch(I){console.error("Error parsing Lexical JSON:",I)}const R=[];B.forEach((I,W)=>{const K=u[I.id],Z=K?I.options[K.charCodeAt(0)-65]:null,oe=Z?c.jsx("span",{className:"inline-block px-3 py-2 bg-green-100 text-green-800 rounded-lg border-2 border-green-400 cursor-pointer hover:bg-green-200 hover:border-green-500 transition-all duration-200 font-bold shadow-sm",onClick:()=>v(I.id),children:Z},W):c.jsxs("span",{className:"inline-block px-3 py-2 bg-purple-100 text-purple-800 rounded-lg border-2 border-purple-400 cursor-pointer hover:bg-purple-200 hover:border-purple-500 transition-all duration-200 font-bold shadow-sm",onClick:()=>v(I.id),children:[W+1,"_________"]},W);R.push(oe),V=V.replace("[BLANK_PLACEHOLDER]",`__BLANK_${I.id}__`)});const H=V.split(/__BLANK_\d+__/),U=[];for(let I=0;I<H.length;I++)H[I]&&U.push(c.jsx("span",{children:H[I]},`text-${I}`)),I<R.length&&U.push(R[I]);return c.jsx("div",{className:"prose max-w-none mb-6",children:c.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-wrap",children:U})})}catch(V){return console.error("Error rendering text with inline blanks:",V),c.jsx("div",{className:"text-red-500",children:"Error loading test content"})}},[u]),ae=S.useCallback((ne,B)=>{const V={...u,[ne]:B};d(V),l&&l(ne,B)},[u,l]),te=S.useCallback(ne=>c.jsx("div",{className:"space-y-6",children:ne.map((B,V)=>{const R=B.blank_options||B.options||[];B.correct_answers;const H=B.question_json||B.question||`Blank ${V+1}`;return console.log(` Blank ${V+1} question text:`,H),c.jsxs($t,{className:"p-4",children:[c.jsxs("div",{className:"mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Question ",V+1]}),c.jsx("p",{className:"text-gray-600 mb-4",children:H})]}),c.jsx("div",{className:"space-y-3",children:R.filter(U=>U&&U.trim().length>0).map((U,I)=>c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer hover:bg-gray-50 p-2 rounded-lg transition-colors",children:[c.jsx("input",{type:"radio",name:`blank_${B.question_id||B.id||V}`,value:String.fromCharCode(65+I),checked:u[B.question_id||B.id||V]===String.fromCharCode(65+I),onChange:W=>ae(B.question_id||B.id||V,W.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),c.jsxs("span",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+I)}),c.jsx("span",{className:"text-gray-700",children:U})]})]},I))})]},B.question_id||B.id||V)})}),[u,ae]);return S.useEffect(()=>{if(n&&M?.student_id){x(new Date),j(),console.log(" Anti-cheating tracking started for fill blanks test");const B=`test_progress_${M.student_id}_fill_blanks_${n}`,V=fa(B);V&&(d(V.answers||{}),x(new Date(V.startTime)),console.log(" Fill blanks test progress restored:",V))}},[n,M?.student_id,t,j]),S.useEffect(()=>{if(g&&M?.student_id&&n){const ne=setInterval(()=>{const B={answers:u,startTime:g.toISOString()},V=`test_progress_${M.student_id}_fill_blanks_${n}`;qs(V,B,da.test_progress),console.log(" Fill blanks progress auto-saved")},3e4);return()=>clearInterval(ne)}},[g,u,M?.student_id,n]),S.useEffect(()=>()=>{A(),L(),console.log(" Fill blanks test component unmounted - anti-cheating cleanup")},[A,L]),S.useCallback(async()=>{h(!0);try{const ne=t.length;let B=0;t.forEach((xe,Ae)=>{const Me=u[xe.id];Me&&Me===xe.correct_answer&&B++});const V=B,R=ne;console.log(` Fill Blanks Score: ${V}/${R} (${Math.round(V/R*100)}%)`);const H=new Date,U=g?Math.round((H-g)/1e3):0,I=g?g.toISOString():H.toISOString(),W=O();console.log(" Anti-cheating data for fill blanks submission:",W);const K=M.student_id,Z=`retest_assignment_id_${K}_fill_blanks_${n}`,oe=localStorage.getItem(Z),{academicCalendarService:J}=await Vi(async()=>{const{academicCalendarService:xe}=await Promise.resolve().then(()=>n3);return{academicCalendarService:xe}},void 0);await J.loadAcademicCalendar();const ue=J.getCurrentTerm()?.id;if(!ue)throw new Error("No current academic period found");const de={test_id:n,test_name:s,teacher_id:a||null,subject_id:i||null,student_id:K,academic_period_id:ue,parent_test_id:n,retest_assignment_id:oe?Number(oe):null,answers:u,score:V,maxScore:R,time_taken:U,started_at:I,submitted_at:H.toISOString(),caught_cheating:W.caught_cheating,visibility_change_times:W.visibility_change_times};console.log(" Submitting fill blanks test:",de);const ie=await(await P("/.netlify/functions/submit-fill-blanks-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(de)})).json();if(ie.success){if(E("Test submitted successfully!","success"),A(),L(),console.log(" Anti-cheating tracking stopped and data cleared for fill blanks test"),M?.student_id&&(t1(M.student_id,"fill_blanks",n),console.log(" Fill blanks test data cleared from cache")),!!oe&&M?.student_id){let Ae=3;try{const He=localStorage.getItem(`student_active_tests_${M.student_id}`);if(He){const it=JSON.parse(He)?.tests?.find(kt=>kt.test_id===n&&kt.test_type==="fill_blanks");it&&(Ae=it.retest_attempts_left||it.max_attempts||3)}}catch(He){console.error("Error checking active tests cache:",He)}const Je=(V>0&&R>0?V/R*100:0)>=50;if(Je){const He=`retest_attempt${Ae}_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(He,"true"),console.log(" Passed retest, marking last-slot key:",He);let It=0;for(let pt=1;pt<=10;pt++){const ut=`retest_attempt${pt}_${M.student_id}_fill_blanks_${n}`;localStorage.getItem(ut)==="true"&&It++}const it=`test_completed_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(it,"true"),console.log(" Marked retest as completed (student passed):",it);const kt=`retest_attempts_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(kt,JSON.stringify({used:It,max:Ae})),console.log(" Set retest attempts metadata (student passed):",kt,{used:It,max:Ae})}else{let He=1;for(let ut=1;ut<=10;ut++){const _t=`retest_attempt${ut}_${M.student_id}_fill_blanks_${n}`;if(localStorage.getItem(_t)!=="true"){He=ut;break}}const It=`retest_attempt${He}_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(It,"true"),console.log(" Marked retest attempt as completed:",It);let it=0;for(let ut=1;ut<=10;ut++){const _t=`retest_attempt${ut}_${M.student_id}_fill_blanks_${n}`;localStorage.getItem(_t)==="true"&&it++}const kt=Ae-it,pt=kt<=0||Je;if(console.log(" Retest completion check:",{usedAttempts:it,maxAttempts:Ae,attemptsLeft:kt,passed:Je,shouldComplete:pt}),pt){const ut=`test_completed_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(ut,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",ut);const _t=`retest_attempts_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(_t,JSON.stringify({used:it,max:Ae})),console.log(" Set retest attempts metadata (attempts exhausted):",_t,{used:it,max:Ae})}}}else if(M?.student_id){const Ae=`test_completed_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(Ae,"true"),console.log(" Fill blanks test marked as completed in localStorage:",Ae)}if(M?.student_id){const Ae=`retest1_${K}_fill_blanks_${n}`;localStorage.removeItem(Ae),localStorage.removeItem(Z)}if(M?.student_id){const Ae=`student_results_table_${M.student_id}`;qs(Ae,ie,da.student_results_table),console.log(" Fill blanks test results cached with key:",Ae)}setShowSubmitModal(!1),setTimeout(()=>{o&&o(V)},2e3)}else throw new Error(ie.message||"Failed to submit test")}catch(ne){console.error("Error submitting test:",ne),E("Error submitting test. Please try again.","error")}finally{h(!1)}},[u,t,n,s,a,i,g,O,A,L,P,E,o,M]),c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:c.jsxs($t,{children:[f&&c.jsx($t.Header,{children:c.jsx("div",{className:"flex items-center justify-center",children:c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[c.jsx(ln,{size:"small"}),c.jsx("span",{children:"Submitting..."})]})})}),c.jsx($t.Body,{children:r===!0?c.jsxs(c.Fragment,{children:[q(e,t),te(t)]}):c.jsx(c.Fragment,{children:Q(e,t)})}),r===!1&&y&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Select Answer"}),c.jsx("div",{className:"space-y-2",children:t.find(ne=>ne.id===y)?.options.filter(ne=>ne.trim().length>0).map((ne,B)=>c.jsxs("button",{onClick:()=>{ae(y,String.fromCharCode(65+B)),v(null)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 rounded-lg border border-gray-200",children:[c.jsxs("span",{className:"font-semibold text-blue-600 mr-2",children:[String.fromCharCode(65+B),")"]}),ne]},B))}),c.jsx("div",{className:"mt-4 flex justify-end",children:c.jsx(lt,{onClick:()=>v(null),variant:"secondary",size:"sm",children:"Cancel"})})]})}),c.jsx($t.Footer,{children:c.jsx("div",{className:"flex gap-3"})})]})})};let $de=class{constructor(){this.tokenKey="auth_token",this.refreshTokenKey="refresh_token",this.userKey="user_data"}getToken(){return localStorage.getItem(this.tokenKey)}getRefreshToken(){return localStorage.getItem(this.refreshTokenKey)}getUserData(){const t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}setToken(t){localStorage.setItem(this.tokenKey,t)}setRefreshToken(t){localStorage.setItem(this.refreshTokenKey,t)}setUserData(t){localStorage.setItem(this.userKey,JSON.stringify(t))}setTokens(t,r){this.setToken(t),this.setUserData({role:r}),localStorage.setItem("accessToken",t)}isAuthenticated(){const t=this.getToken();if(!t)return!1;try{const r=JSON.parse(atob(t.split(".")[1])),n=Date.now()/1e3;return r.exp>n}catch(r){return console.error("Error decoding token:",r),!1}}getUserRole(){const t=this.getUserData();return t?t.role:null}isAdmin(){return this.getUserRole()==="admin"}isTeacher(){return this.getUserRole()==="teacher"}isStudent(){return this.getUserRole()==="student"}clearAuth(){localStorage.removeItem(this.tokenKey),localStorage.removeItem(this.refreshTokenKey),localStorage.removeItem(this.userKey)}logout(){this.clearAuth(),window.location.href="/login"}getAuthHeader(){const t=this.getToken();return t?`Bearer ${t}`:null}async makeAuthenticatedRequest(t,r={}){const n=this.getToken();if(!n)throw new Error("No authentication token found");const s={"Content-Type":"application/json",Authorization:`Bearer ${n}`,...r.headers},a=await fetch(t,{...r,headers:s});if(a.status===401){if(await this.refreshToken())return s.Authorization=`Bearer ${this.getToken()}`,fetch(t,{...r,headers:s});throw this.logout(),new Error("Authentication failed")}return a}async refreshToken(){const t=this.getRefreshToken();if(!t)return!1;try{const r=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(r.ok){const n=await r.json();return this.setToken(n.accessToken),n.refreshToken&&this.setRefreshToken(n.refreshToken),!0}}catch(r){console.error("Error refreshing token:",r)}return!1}getAccessToken(){return this.getToken()}decodeToken(t){try{return JSON.parse(atob(t.split(".")[1]))}catch(r){return console.error("Error decoding token:",r),null}}init(){return this.isAuthenticated()?(this.setupTokenRefresh(),!0):(window.location.pathname!=="/login"&&(window.location.href="/login"),!1)}setupTokenRefresh(){setInterval(async()=>{this.isAuthenticated()&&await this.refreshToken()},3e3*1e3)}};const Wp=new $de;window.tokenManager=Wp;typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{Wp.init()}):Wp.init());const nH=async(e,t,r,n,s=!1)=>{try{console.log(" Fetching teacher student results:",{teacherId:e,grade:t,className:r,termId:n,forceRefresh:s});const a=s?`&_t=${Date.now()}`:"",o=await(await Wp.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-student-results?teacher_id=${e}&grade=${t}&class=${r}&academic_period_id=${n}${a}`,{cache:s?"no-cache":"default",headers:s?{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}:{}})).json();if(o.success)return console.log(" Teacher student results loaded:",o.results.length,"results"),console.log(" Students loaded:",o.students?.length||0,"students"),{success:!0,results:o.results,students:o.students||[],count:o.results.length,student_count:o.student_count||0};throw new Error(o.error||"Failed to load teacher student results")}catch(a){return console.error("Error fetching teacher student results:",a),{success:!1,error:a.message,results:[]}}},sH=async(e,t)=>{try{console.log(" Fetching student results view:",{studentId:e,academicPeriodId:t});const r=t?`&academic_period_id=${t}`:"",s=await(await Wp.makeAuthenticatedRequest(`/.netlify/functions/get-student-results-view?student_id=${e}${r}`)).json();if(s.success)return console.log(" Student results view loaded:",s.results.length,"results"),{success:!0,results:s.results,count:s.results.length};throw new Error(s.error||"Failed to load student results view")}catch(r){return console.error("Error fetching student results view:",r),{success:!1,error:r.message,results:[]}}},zde=async(e,t,r,n)=>{try{console.log(" Fetching class summary:",{teacherId:e,grade:t,className:r,academicPeriodId:n});const a=await(await Wp.makeAuthenticatedRequest(`/.netlify/functions/get-class-summary?teacher_id=${e}&grade=${t}&class=${r}&academic_period_id=${n}`)).json();if(a.success)return console.log(" Class summary loaded:",a.summary),{success:!0,summary:a.summary,hasData:!!a.summary};throw new Error(a.error||"Failed to load class summary")}catch(s){return console.error("Error fetching class summary:",s),{success:!1,error:s.message,summary:null}}},Ude=async(e,t,r,n,s={})=>{try{const a=await nH(e,t,r,n);if(!a.success)return a;let i=a.results;return s.subject&&(i=i.filter(o=>o.subject&&o.subject.toLowerCase().includes(s.subject.toLowerCase()))),s.testType&&(i=i.filter(o=>o.test_type===s.testType)),s.minScore!==void 0&&(i=i.filter(o=>o.score/o.max_score*100>=s.minScore)),s.maxScore!==void 0&&(i=i.filter(o=>o.score/o.max_score*100<=s.maxScore)),s.passed!==void 0&&(i=i.filter(o=>o.score>=o.passing_score===s.passed)),{success:!0,results:i,count:i.length,originalCount:a.results.length}}catch(a){return console.error("Error filtering teacher student results:",a),{success:!1,error:a.message,results:[]}}},Wde=async(e,t,r={})=>{try{const n=await sH(e,t);if(!n.success)return n;let s=n.results;return r.subject&&(s=s.filter(a=>a.subject&&a.subject.toLowerCase().includes(r.subject.toLowerCase()))),r.testType&&(s=s.filter(a=>a.test_type===r.testType)),r.semester&&(s=s.filter(a=>a.semester===r.semester)),r.passed!==void 0&&(s=s.filter(a=>a.score>=a.passing_score===r.passed)),{success:!0,results:s,count:s.length,originalCount:n.results.length}}catch(n){return console.error("Error filtering student results view:",n),{success:!1,error:n.message,results:[]}}},Hde={getTeacherStudentResults:nH,getStudentResultsView:sH,getClassSummary:zde,getTeacherStudentResultsFiltered:Ude,getStudentResultsViewFiltered:Wde};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gde=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Vde=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),VF=e=>{const t=Vde(e);return t.charAt(0).toUpperCase()+t.slice(1)},aH=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),qde=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kde={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yde=S.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:i,...o},l)=>S.createElement("svg",{ref:l,...Kde,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:aH("lucide",s),...!a&&!qde(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,d])=>S.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=(e,t)=>{const r=S.forwardRef(({className:n,...s},a)=>S.createElement(Yde,{ref:a,iconNode:t,className:aH(`lucide-${Gde(VF(e))}`,`lucide-${e}`,n),...s}));return r.displayName=VF(e),r};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xde=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Jde=y1("download",Xde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qde=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Zde=y1("maximize-2",Qde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0e=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],t0e=y1("rotate-cw",e0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],iH=y1("x",r0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0e=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],s0e=y1("zoom-in",n0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0e=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],i0e=y1("zoom-out",a0e),Gc={WIDTH:1536,HEIGHT:2048,ASPECT_RATIO:1536/2048},oH={MIN:.25,MAX:1,INITIAL:.25,STEP:.1},Lh={PENCIL:"pencil",LINE:"line",RECTANGLE:"rectangle",CIRCLE:"circle",ERASER:"eraser"},qF={CURSOR_COLOR:"#ff0000",CURSOR_OPACITY:.3},KF={ERASER_TO_THICKNESS_RATIO:2.5,THICKNESS_TO_ERASER_RATIO:.4},N4={MAX_ENTRIES:10,MAX_MEMORY_KB:500,COMPRESSION_THRESHOLD:200},lH=e=>{try{const t=JSON.stringify(e);return new Blob([t]).size/1024}catch(t){return console.warn("Error calculating memory usage:",t),0}},o0e=e=>Array.isArray(e)?e.map(t=>Array.isArray(t)?l0e(t):t):e,l0e=e=>{if(e.length<=2)return e;const t=[e[0]],r=2;for(let n=1;n<e.length-1;n++){const s=e[n-1],a=e[n];e[n+1],Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2))>r&&t.push(a)}return t.push(e[e.length-1]),t},c0e=(e,t=Date.now())=>{const r=lH(e);return{data:[...e],timestamp:t,memoryUsage:r,compressed:r>N4.COMPRESSION_THRESHOLD}},YF=(e,t,r)=>{const n=c0e(t),s=lH(t),a=e.slice(0,r+1);a.push(n);let i=a;return s>N4.MAX_MEMORY_KB&&(i=u0e(a)),i.length>N4.MAX_ENTRIES&&(i=i.slice(-10)),{history:i,index:i.length-1}},u0e=e=>e.map(t=>t.memoryUsage>N4.COMPRESSION_THRESHOLD?{...t,data:o0e(t.data),compressed:!0}:t),XF=(e,t)=>{if(t<0||t>=e.length)return[];const r=e[t];return r?r.compressed?d0e(r.data):[...r.data]:[]},d0e=e=>[...e],JF=e=>e>0,QF=(e,t)=>e<t-1,f0e=()=>({history:[],index:-1}),h0e=()=>{const[e,t]=S.useState({zoom:1,position:{x:0,y:0},rotation:0,currentTool:"pencil",currentColor:"#000000",currentThickness:2,eraserSize:10,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:[],historyIndex:-1,isFullscreen:!1,preFullscreenState:null}),[r,n]=S.useState([]),[s,a]=S.useState([]),i=S.useCallback(E=>{t(P=>({...P,...E}))},[]),o=S.useCallback(()=>{t({zoom:1,position:{x:0,y:0},rotation:0,currentTool:"pencil",currentColor:"#000000",currentThickness:2,eraserSize:10,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:[],historyIndex:-1,isFullscreen:!1,preFullscreenState:null})},[]),l=S.useCallback(E=>{const P={x:E.x,y:E.y,color:e.currentColor,thickness:e.currentThickness};e.currentTool==="pencil"?t(M=>({...M,isDrawing:!0,currentLine:[P]})):["line","rectangle","circle"].includes(e.currentTool)&&t(M=>({...M,isDrawing:!0,currentShape:{type:e.currentTool,startX:E.x,startY:E.y,endX:E.x,endY:E.y,color:e.currentColor,thickness:e.currentThickness}}))},[e.currentTool,e.currentColor,e.currentThickness]),u=S.useCallback(E=>{if(!e.isDrawing)return;const P={x:E.x,y:E.y,color:e.currentColor,thickness:e.currentThickness};e.currentTool==="pencil"?t(M=>({...M,currentLine:[...M.currentLine,P]})):e.currentShape&&t(M=>({...M,currentShape:{...M.currentShape,endX:E.x,endY:E.y}}))},[e.isDrawing,e.currentTool,e.currentColor,e.currentThickness,e.currentShape]),d=S.useCallback(()=>{if(!e.isDrawing)return;let E=r;if(e.currentTool==="pencil"&&e.currentLine.length>0?(E=[...r,e.currentLine],n(E)):e.currentShape&&(E=[...r,e.currentShape],n(E)),E!==r){const P=YF(e.drawingHistory,E,e.historyIndex);t(M=>({...M,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:P.history,historyIndex:P.index}))}else t(P=>({...P,isDrawing:!1,currentLine:[],currentShape:null}))},[e.isDrawing,e.currentTool,e.currentLine,e.currentShape,r,e.drawingHistory,e.historyIndex]),f=S.useCallback(E=>Math.round(E*KF.ERASER_TO_THICKNESS_RATIO),[]),h=S.useCallback(E=>Math.round(E*KF.THICKNESS_TO_ERASER_RATIO),[]),g=S.useCallback(E=>{t(P=>({...P,currentThickness:E,eraserSize:f(E)}))},[f]),x=S.useCallback(E=>{t(P=>({...P,eraserSize:E,currentThickness:h(E)}))},[h]),y=S.useCallback(E=>{const P=YF(e.drawingHistory,E,e.historyIndex);t(M=>({...M,drawingHistory:P.history,historyIndex:P.index}))},[e.drawingHistory,e.historyIndex]),v=S.useCallback(()=>{if(JF(e.historyIndex)){const E=e.historyIndex-1,P=XF(e.drawingHistory,E);n([...P]),t(M=>({...M,historyIndex:E}))}},[e.historyIndex,e.drawingHistory]),T=S.useCallback(()=>{if(QF(e.historyIndex,e.drawingHistory.length)){const E=e.historyIndex+1,P=XF(e.drawingHistory,E);n([...P]),t(M=>({...M,historyIndex:E}))}},[e.historyIndex,e.drawingHistory]),k=S.useCallback(()=>{const E=f0e();t(P=>({...P,drawingHistory:E.history,historyIndex:E.index}))},[]),b=JF(e.historyIndex),N=QF(e.historyIndex,e.drawingHistory.length);return{drawingState:e,setDrawingState:t,drawingData:r,setDrawingData:n,textBoxes:s,setTextBoxes:a,updateDrawingState:i,resetDrawingState:o,startDrawing:l,continueDrawing:u,finishDrawing:d,handleThicknessChange:g,handleEraserSizeChange:x,saveToHistoryState:y,undo:v,redo:T,clearHistoryState:k,canUndoState:b,canRedoState:N}},ZF={SCALE_DELTA:.05,CENTER_DELTA:20},xp=e=>{if(e.length<2)return 0;const t=e[0],r=e[1];return Math.sqrt(Math.pow(r.clientX-t.clientX,2)+Math.pow(r.clientY-t.clientY,2))},gf=e=>{if(e.length<2)return null;const t=e[0],r=e[1];return{x:(t.clientX+r.clientX)/2,y:(t.clientY+r.clientY)/2}},m0e=(e,t)=>{if(e.length!==2||!t)return null;const r=xp(e),n=xp(t),s=gf(e),a=gf(t);if(n===0)return null;const i=Math.abs(r/n-1),o=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2));return i>ZF.SCALE_DELTA?"zoom":o>ZF.CENTER_DELTA?"pan":null},g0e=e=>{let t;return function(){const r=arguments,n=this;t&&cancelAnimationFrame(t),t=requestAnimationFrame(()=>{e.apply(n,r),t=null})}},op=(e,t)=>{const r=t.getPointerPosition();return{x:(r.x-t.x())/t.scaleX(),y:(r.y-t.y())/t.scaleY()}},ec={PENCIL:"pencil",LINE:"line",RECTANGLE:"rectangle",CIRCLE:"circle",PAN:"pan"},A4={color:"#000000",thickness:2},eD=(e,t,r)=>({x:e.x,y:e.y,color:t||A4.color,thickness:r||A4.thickness}),p0e=(e,t,r,n,s)=>({type:e,startX:t.x,startY:t.y,endX:r.x,endY:r.y,color:n||A4.color,thickness:s||A4.thickness}),cH=(e,t,r,n,s,a)=>{const i=e-r,o=t-n,l=s-r,u=a-n,d=i*l+o*u,f=l*l+u*u;let h=-1;f!==0&&(h=d/f);let g,x;h<0?(g=r,x=n):h>1?(g=s,x=a):(g=r+h*l,x=n+h*u);const y=e-g,v=t-x;return Math.sqrt(y*y+v*v)},x0e=(e,t)=>{if(t.length===0)return[e];const r=t.sort((a,i)=>a.index-i.index),n=[];let s=0;for(const a of r)a.index>s&&n.push(e.slice(s,a.index+1)),s=a.index+1;return s<e.length&&n.push(e.slice(s)),n.filter(a=>a.length>0)},y0e=(e,t,r,n)=>{const s=[],a=r/2;for(let i=0;i<n.length-1;i++){const o=n[i],l=n[i+1],u=cH(e,t,o.x,o.y,l.x,l.y);u<=a&&s.push({index:i,point:{x:o.x,y:o.y},distance:u})}return s},v0e=(e,t,r,n)=>{const s=y0e(t,r,n,e);return s.length===0?[e]:x0e(e,s)},w0e=(e,t,r,n)=>{if(n.type==="rectangle"){const s=Math.min(n.startX,n.endX),a=Math.min(n.startY,n.endY),i=Math.abs(n.endX-n.startX),o=Math.abs(n.endY-n.startY);return e>=s&&e<=s+i&&t>=a&&t<=a+o}else if(n.type==="circle"){const s=(n.startX+n.endX)/2,a=(n.startY+n.endY)/2,i=Math.sqrt(Math.pow(n.endX-n.startX,2)+Math.pow(n.endY-n.startY,2))/2;return Math.sqrt(Math.pow(e-s,2)+Math.pow(t-a,2))<=i}return!1},tD=(e,t,r,n)=>{const s=[];for(const a of n)if(Array.isArray(a)){const i=v0e(a,e,t,r);s.push(...i)}else a.type==="line"?cH(e,t,a.startX,a.startY,a.endX,a.endY)>r/2&&s.push(a):(a.type==="rectangle"||a.type==="circle")&&(w0e(e,t,r,a)||s.push(a));return s},b0e=(e,t,r,n,s,a,i,o,l)=>{const[u,d]=S.useState({isActive:!1,type:null,lastDistance:null,lastCenter:null}),f=S.useCallback(P=>{if(P.evt.preventDefault(),P.evt.stopPropagation(),e.currentTool===ec.PAN)return;const M=P.target.getStage(),j=op(P,M),A=eD(j,e.currentColor,e.currentThickness);e.currentTool===ec.PENCIL?t(O=>({...O,isDrawing:!0,currentLine:[A]})):[ec.LINE,ec.RECTANGLE,ec.CIRCLE].includes(e.currentTool)&&t(O=>({...O,isDrawing:!0,currentShape:p0e(e.currentTool,j,j,e.currentColor,e.currentThickness)}))},[e.currentTool,e.currentColor,e.currentThickness,t]),h=S.useCallback(P=>{const M=tD(P.x,P.y,e.eraserSize,r);n(M),s(M)},[e.eraserSize,r,n,s]),g=S.useCallback(P=>{o&&(a(),y("Undo",P))},[o,a]),x=S.useCallback(P=>{l&&(i(),y("Redo",P))},[l,i]),y=S.useCallback((P,M)=>{const j=M.target.getStage(),A=op(M,j),O=new Konva.Circle({x:A.x,y:A.y,radius:20,stroke:"#4CAF50",strokeWidth:3,opacity:.8,listening:!1});j.add(O),O.to({scaleX:2,scaleY:2,opacity:0,duration:.3,onFinish:()=>{O.destroy()}})},[]),v=S.useCallback(P=>{if(P.evt.preventDefault(),P.evt.stopPropagation(),!e.isDrawing)return;const M=P.target.getStage(),j=op(P,M),A=eD(j,e.currentColor,e.currentThickness);e.currentTool===ec.PENCIL?t(O=>({...O,currentLine:[...O.currentLine,A]})):e.currentShape&&t(O=>({...O,currentShape:{...O.currentShape,endX:j.x,endY:j.y}}))},[e.isDrawing,e.currentTool,e.currentColor,e.currentThickness,e.currentShape,t]),T=S.useCallback(P=>{P&&P.evt&&(P.evt.preventDefault(),P.evt.stopPropagation()),e.isDrawing&&(e.currentTool===ec.PENCIL&&e.currentLine.length>0?n(M=>[...M,e.currentLine]):e.currentShape&&n(M=>[...M,e.currentShape]),t(M=>({...M,isDrawing:!1,currentLine:[],currentShape:null})))},[e.isDrawing,e.currentTool,e.currentLine,e.currentShape,n,t]),k=S.useCallback(P=>{P.evt.preventDefault(),P.evt.stopPropagation();const M=P.evt.touches;if(M.length===2)d({isActive:!0,type:"pan",lastDistance:xp(M),lastCenter:gf(M)});else if(M.length===1)if(e.currentTool===ec.ERASER){const j=P.target.getStage(),A=op(P,j);h(A)}else e.currentTool===ec.UNDO?g(P):e.currentTool===ec.REDO?x(P):f(P)},[xp,gf,f,e.currentTool,h,g,x]),b=S.useCallback(g0e(P=>{P.evt.preventDefault(),P.evt.stopPropagation();const M=P.evt.touches;if(M.length===2&&u.isActive){const j=m0e(M,u);if(j==="zoom"){const A=xp(M),O=gf(M),L=A/u.lastDistance,q=Math.max(.25,Math.min(1,e.zoom*L));t(Q=>({...Q,zoom:q,position:{x:O.x-(O.x-Q.position.x)*(q/Q.zoom),y:O.y-(O.y-Q.position.y)*(q/Q.zoom)}}))}else if(j==="pan"){const A=gf(M),O=A.x-u.lastCenter.x,L=A.y-u.lastCenter.y;t(q=>({...q,position:{x:q.position.x+O,y:q.position.y+L}}))}d(A=>({...A,lastDistance:xp(M),lastCenter:gf(M)}))}else if(M.length===1)if(e.currentTool===ec.ERASER){const j=P.target.getStage(),A=op(P,j),O=tD(A.x,A.y,e.eraserSize,r);n(O)}else if(e.currentTool===ec.PAN){const j=gf(M),A=j.x-u.lastCenter.x,O=j.y-u.lastCenter.y;t(L=>({...L,position:{x:L.position.x+A,y:L.position.y+O}})),d(L=>({...L,lastCenter:j}))}else v(P)}),[u,e.zoom,t,v]),N=S.useCallback(P=>{b(P)},[b]),E=S.useCallback(P=>{P.evt.preventDefault(),P.evt.stopPropagation();const M=P.evt.touches;M.length===0?(T(P),d({isActive:!1,type:null,lastDistance:null,lastCenter:null})):M.length===1&&d(j=>({...j,isActive:!1}))},[T]);return{handleTouchStart:k,handleTouchMove:N,handleTouchEnd:E,handleEraserStart:h,handleUndoTouch:g,handleRedoTouch:x,showTouchFeedback:y}},_0e=(e,t)=>{const[r,n]=S.useState(e.MIN),[s,a]=S.useState({x:0,y:0}),i=S.useCallback((h,g,x)=>{const y=Math.max(e.MIN,Math.min(e.MAX,h));if(g){const v=y/r,T={x:g.x-(g.x-s.x)*v,y:g.y-(g.y-s.y)*v};return{zoom:y,position:T}}else{const v=t.width*y,T=t.height*y,k={x:(x.width-v)/2,y:(x.height-T)/2};return{zoom:y,position:k}}},[r,s,e,t]),o=S.useCallback(()=>{const h=Math.min(r*(1+e.STEP),e.MAX);n(h)},[r,e]),l=S.useCallback(()=>{const h=Math.max(r/(1+e.STEP),e.MIN);n(h)},[r,e]),u=S.useCallback((h,g,x)=>{const y=i(h,g,x);n(y.zoom),a(y.position)},[i]),d=S.useCallback((h,g)=>{a(x=>({x:x.x+h,y:x.y+g}))},[]),f=S.useCallback(()=>{n(e.INITIAL),a({x:0,y:0})},[e.INITIAL]);return{zoom:r,setZoom:n,position:s,setPosition:a,handleZoomIn:o,handleZoomOut:l,handleZoomToPoint:u,handlePan:d,resetZoom:f}},S0e=e=>{const[t,r]=S.useState([]),[n,s]=S.useState(0),a=S.useCallback(f=>{if(console.log("parseDrawingData - input drawing:",f),console.log("parseDrawingData - drawing.answers:",f?.answers),!f?.answers)return console.log("parseDrawingData - no answers found, returning empty array"),[];try{if(typeof f.answers=="string"){console.log("parseDrawingData - parsing string answers");const h=JSON.parse(f.answers);return console.log("parseDrawingData - parsed string result:",h),h&&typeof h=="object"&&h.lines&&console.log("parseDrawingData - new format detected with lines and textBoxes"),h}if(f.answers&&typeof f.answers=="object"&&f.answers.lines)return console.log("parseDrawingData - answers is new format object"),f.answers;if(Array.isArray(f.answers)){if(console.log("parseDrawingData - answers is array"),f.answers.every(g=>typeof g=="string"))try{const g=f.answers.map(x=>{try{return JSON.parse(x)}catch{return x}});return console.log("parseDrawingData - parsed array elements"),g}catch{return console.log("parseDrawingData - failed to parse array elements, returning raw"),f.answers}return f.answers}return console.log("parseDrawingData - answers is neither string nor array, returning empty array"),[]}catch(h){return console.error("Error parsing drawing data:",h),[]}},[]),i=S.useCallback(f=>{if(console.log("processQuestions - input answers:",f),console.log("processQuestions - answers type:",typeof f),console.log("processQuestions - answers isArray:",Array.isArray(f)),f&&typeof f=="object"&&f.lines){console.log("processQuestions - new format detected with lines and textBoxes"),console.log("processQuestions - lines count:",f.lines?.length),console.log("processQuestions - textBoxes count:",f.textBoxes?.length);const g=o(f.lines);return console.log("processQuestions - canvas groups:",g),console.log("processQuestions - number of canvas groups:",g.length),g.map((x,y)=>(console.log(`processQuestions - canvas ${y} strokes:`,x),console.log(`processQuestions - canvas ${y} stroke count:`,x.length),{questionNumber:y+1,drawingData:x,textBoxes:f.textBoxes||[]}))}if(Array.isArray(f)&&f.every(g=>g&&typeof g=="object"&&g.lines))return console.log("processQuestions - array of {lines,textBoxes} detected"),f.map((g,x)=>({questionNumber:x+1,drawingData:g.lines||[],textBoxes:g.textBoxes||[]}));if(!Array.isArray(f))return console.log("processQuestions - answers is not array or object, returning empty array"),[];console.log("processQuestions - processing",f.length,"answers (old format)");const h=o(f);return console.log("processQuestions - canvas groups:",h),console.log("processQuestions - number of canvas groups:",h.length),h.map((g,x)=>(console.log(`processQuestions - canvas ${x} strokes:`,g),console.log(`processQuestions - canvas ${x} stroke count:`,g.length),{questionNumber:x+1,drawingData:g,textBoxes:[]}))},[]),o=S.useCallback(f=>{console.log("groupStrokesByCanvas - input answers:",f);const h=l(f);return console.log("groupStrokesByCanvas - using strategy:",h),h==="by_question_boundary"?u(f):h==="by_stroke_type"?d(f):[f]},[]),l=S.useCallback(f=>{console.log("determineGroupingStrategy - analyzing answers:",f);let h=0,g=0;return f.forEach(x=>{Array.isArray(x)?h++:typeof x=="object"&&g++}),console.log("determineGroupingStrategy - arrayCount:",h,"objectCount:",g),h>0&&g>0?"by_stroke_type":f.length>3?"by_question_boundary":"single_canvas"},[]),u=S.useCallback(f=>{console.log("groupByQuestionBoundary - grouping answers:",f);const h=[];let g=[];const x=Math.ceil(f.length/2);for(let y=0;y<f.length;y++)g.push(f[y]),(y+1)%x===0&&y<f.length-1&&(h.push([...g]),g=[]);return g.length>0&&h.push(g),console.log("groupByQuestionBoundary - result:",h),h},[]),d=S.useCallback(f=>{console.log("groupByStrokeType - grouping answers:",f);const h=[],g=[];f.forEach(y=>{Array.isArray(y)?h.push(y):typeof y=="object"&&g.push(y)});const x=[];return h.length>0&&x.push(h),g.length>0&&x.push(g),console.log("groupByStrokeType - result:",x),x},[]);return S.useEffect(()=>{if(e){console.log("useDataParsing - drawing object:",e),console.log("useDataParsing - drawing.answers:",e.answers),console.log("useDataParsing - drawing.answers type:",typeof e.answers),console.log("useDataParsing - drawing.answers length:",e.answers?.length);const f=a(e);console.log("useDataParsing - parsed answers:",f),console.log("useDataParsing - parsed answers type:",typeof f),console.log("useDataParsing - parsed answers length:",f?.length);const h=i(f);console.log("useDataParsing - processed questions:",h),console.log("useDataParsing - processed questions length:",h?.length),h.length>0&&(console.log("useDataParsing - first question drawingData:",h[0]?.drawingData),console.log("useDataParsing - first question drawingData length:",h[0]?.drawingData?.length)),r(h),s(0)}},[e,a,i]),{questionsData:t,setQuestionsData:r,currentQuestionIndex:n,setCurrentQuestionIndex:s,parseDrawingData:a,processQuestions:i}},rD={MIN:.25,INITIAL:1},k0e=(e,t)=>{const[r,n]=S.useState(!1),[s,a]=S.useState(null),i=S.useCallback(()=>{document.fullscreenElement||(a({zoom:e.zoom,position:{...e.position}}),document.documentElement.requestFullscreen().then(()=>{n(!0),t(l=>({...l,zoom:rD.MIN,position:{x:0,y:0},isFullscreen:!0}))}).catch(l=>{console.error("Error entering fullscreen:",l)}))},[e.zoom,e.position,t]),o=S.useCallback(()=>{document.fullscreenElement&&document.exitFullscreen().then(()=>{n(!1),s?(t(l=>({...l,zoom:s.zoom,position:s.position,isFullscreen:!1})),a(null)):t(l=>({...l,zoom:rD.INITIAL,position:{x:0,y:0},isFullscreen:!1}))}).catch(l=>{console.error("Error exiting fullscreen:",l)})},[s,t]);return{isFullscreen:r,enterFullscreen:i,exitFullscreen:o}},uH=S.forwardRef(({drawingData:e,textBoxes:t=[],drawingState:r,canvasSize:n,zoom:s,position:a,onTouchStart:i,onTouchMove:o,onTouchEnd:l,mousePosition:u,isMouseOverCanvas:d,isEraserDrawing:f},h)=>{const g=S.useRef(null),[x,y]=S.useState(.25),[v,T]=S.useState(null),[k,b]=S.useState({x:0,y:0}),[N,E]=S.useState(!1),P=S.useCallback(({x:H,y:U,size:I,visible:W,isDrawing:K})=>!W||!H||!U?null:c.jsx(Cf,{x:H,y:U,radius:I/2,stroke:qF.CURSOR_COLOR,strokeWidth:2,dash:[5,5],opacity:K?.8:qF.CURSOR_OPACITY,listening:!1,zIndex:1e3}),[]),M=S.useCallback(H=>{if(r.currentTool===Lh.ERASER){const U=H.target.getStage(),I=op(H,U);b(I)}},[r.currentTool]),j=S.useCallback(()=>{r.currentTool===Lh.ERASER&&E(!0)},[r.currentTool]),A=S.useCallback(()=>{E(!1)},[]);S.useEffect(()=>{const H=h.current;if(H)return H.on("mousemove",M),H.on("mouseenter",j),H.on("mouseleave",A),()=>{H.off("mousemove",M),H.off("mouseenter",j),H.off("mouseleave",A)}},[M,j,A,h]),S.useEffect(()=>{const H=n.width??n.WIDTH,U=n.height??n.HEIGHT,I=()=>{const W=g.current;if(!W)return;const K=W.clientWidth||1,Z=W.clientHeight||1,oe=Math.abs(r.rotation%180)===90,J=oe?U:H,le=oe?H:U,ue=Math.min(K/(J||1),Z/(le||1));y(Math.min(ue,1))};return I(),window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[n.width,n.height,n.WIDTH,n.HEIGHT,r.rotation]);const O=S.useMemo(()=>{const H=g.current;if(!H||!v)return 0;const U=H.clientWidth||1,I=H.clientHeight||1,W=Math.min(U/Math.max(v.width,1),I/Math.max(v.height,1));return Math.min(W,oH.MAX)},[v]),L=S.useMemo(()=>Math.max(s,x||1),[s,x]),q=S.useMemo(()=>{const H=n.width??n.WIDTH,U=n.height??n.HEIGHT;if(!g.current)return{x:0,y:0};const I=g.current.clientWidth||1,W=g.current.clientHeight||1,K=(I-H*L)/2,Z=(W-U*L)/2;return s<=x?{x:K,y:Z}:{x:a.x!==void 0?a.x:K,y:a.y!==void 0?a.y:Z}},[a,s,x,L,n.width,n.height,v,O]);S.useEffect(()=>{if(!Array.isArray(e)||e.length===0){T(null);return}let H=1/0,U=1/0,I=-1/0,W=-1/0;const K=(le,ue)=>{Number.isFinite(le)&&Number.isFinite(ue)&&(le<H&&(H=le),ue<U&&(U=ue),le>I&&(I=le),ue>W&&(W=ue))};if(e.forEach(le=>{if(Array.isArray(le))le.forEach(ue=>K(ue.x,ue.y));else if(le&&typeof le=="object"){if(le.type==="line")K(le.startX,le.startY),K(le.endX,le.endY);else if(le.type==="rectangle")K(le.startX,le.startY),K(le.endX,le.endY);else if(le.type==="circle"){const ue=Math.sqrt(Math.pow(le.endX-le.startX,2)+Math.pow(le.endY-le.startY,2))/2,de=(le.startX+le.endX)/2,Te=(le.startY+le.endY)/2;K(de-ue,Te-ue),K(de+ue,Te+ue)}}}),!Number.isFinite(H)||!Number.isFinite(U)||!Number.isFinite(I)||!Number.isFinite(W)){T(null);return}const Z=16,oe=Math.max(1,I-H+Z*2),J=Math.max(1,W-U+Z*2);T({minX:H-Z,minY:U-Z,width:oe,height:J})},[e]),S.useEffect(()=>{console.log("CanvasViewer - drawingData:",e),console.log("CanvasViewer - drawingData length:",e?.length),console.log("CanvasViewer - textBoxes:",t),console.log("CanvasViewer - textBoxes length:",t?.length),e&&e.length>0&&console.log("CanvasViewer - first item:",e[0]),t&&t.length>0&&console.log("CanvasViewer - first textBox:",t[0])},[e,t]),S.useEffect(()=>{const H=n.width??n.WIDTH,U=n.height??n.HEIGHT;console.log("CanvasViewer - canvas dimensions:",{width:H,height:U}),console.log("CanvasViewer - zoom:",s,"fitZoom:",x,"displayScale:",L),console.log("CanvasViewer - stagePosition:",q)},[n,s,x,L,q]);const Q=(H,U)=>{if(console.log(`CanvasViewer - rendering element ${U}:`,H),Array.isArray(H))return console.log(`CanvasViewer - rendering line with ${H.length} points`),c.jsx(zi,{points:H.flatMap(I=>[I.x,I.y]),stroke:H[0]?.color||"#000000",strokeWidth:H[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round"},U);if(H.type==="line")return c.jsx(zi,{points:[H.startX,H.startY,H.endX,H.endY],stroke:H.color,strokeWidth:H.thickness,lineCap:"round"},U);if(H.type==="rectangle"){const I=Math.abs(H.endX-H.startX),W=Math.abs(H.endY-H.startY),K=Math.min(H.startX,H.endX),Z=Math.min(H.startY,H.endY);return c.jsx(bi,{x:K,y:Z,width:I,height:W,stroke:H.color,strokeWidth:H.thickness,fill:"transparent"},U)}else if(H.type==="circle"){const I=Math.sqrt(Math.pow(H.endX-H.startX,2)+Math.pow(H.endY-H.startY,2))/2,W=(H.startX+H.endX)/2,K=(H.startY+H.endY)/2;return c.jsx(Cf,{x:W,y:K,radius:I,stroke:H.color,strokeWidth:H.thickness,fill:"transparent"},U)}return null},ae=()=>{if(!r.isDrawing)return null;if(r.currentTool===Lh.PENCIL&&r.currentLine.length>0)return c.jsx(zi,{points:r.currentLine.flatMap(H=>[H.x,H.y]),stroke:r.currentColor,strokeWidth:r.currentThickness,tension:.5,lineCap:"round",lineJoin:"round"});if(r.currentShape){const{type:H,startX:U,startY:I,endX:W,endY:K,color:Z,thickness:oe}=r.currentShape;if(H===Lh.LINE)return c.jsx(zi,{points:[U,I,W,K],stroke:Z,strokeWidth:oe,lineCap:"round"});if(H===Lh.RECTANGLE){const J=Math.abs(W-U),le=Math.abs(K-I),ue=Math.min(U,W),de=Math.min(I,K);return c.jsx(bi,{x:ue,y:de,width:J,height:le,stroke:Z,strokeWidth:oe,fill:"transparent"})}else if(H===Lh.CIRCLE){const J=Math.sqrt(Math.pow(W-U,2)+Math.pow(K-I,2))/2,le=(U+W)/2,ue=(I+K)/2;return c.jsx(Cf,{x:le,y:ue,radius:J,stroke:Z,strokeWidth:oe,fill:"transparent"})}}return null},te=r.isFullscreen?{position:"fixed",inset:0,width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",zIndex:60}:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"},ne={transform:`rotate(${r.rotation}deg)`,transformOrigin:"center center"},B=S.useCallback(H=>{H.preventDefault(),H.stopPropagation()},[]),V=S.useCallback(H=>{H.preventDefault(),H.stopPropagation()},[]),R=S.useCallback(H=>{H.preventDefault(),H.stopPropagation()},[]);return c.jsx("div",{style:{...te,touchAction:"none",WebkitTouchCallout:"none"},ref:g,className:"select-none",onTouchStart:B,onTouchMove:V,onTouchEnd:R,children:c.jsx("div",{style:{...ne,touchAction:"none",WebkitTouchCallout:"none"},className:"select-none",onTouchStart:B,onTouchMove:V,onTouchEnd:R,children:c.jsx(pm,{ref:h,width:Math.max((n.width??n.WIDTH)||0,1536),height:Math.max((n.height??n.HEIGHT)||0,2048),scaleX:L,scaleY:L,x:q.x,y:q.y,onTouchStart:i,onTouchMove:o,onTouchEnd:l,children:c.jsxs(gm,{children:[c.jsx(bi,{x:0,y:0,width:Math.max((n.width??n.WIDTH)||0,1536),height:Math.max((n.height??n.HEIGHT)||0,2048),fill:"white"}),e.map((H,U)=>(console.log(`CanvasViewer - mapping item ${U}:`,H),Q(H,U))),t&&t.map((H,U)=>c.jsx(bi,{x:H.x,y:H.y,width:H.width,height:H.height,fill:"#ffffff",stroke:"#d1d5db",strokeWidth:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1}},`textbox-${U}`)),t&&t.map((H,U)=>c.jsx(Lu,{x:H.x+8,y:H.y+8,width:H.width-16,height:H.height-16,text:H.text,fontSize:H.fontSize||14,fill:H.color||"#000000",wrap:"word",align:"left",verticalAlign:"top"},`text-${U}`)),ae(),r.currentTool===Lh.ERASER&&c.jsx(P,{x:k.x,y:k.y,size:r.eraserSize,visible:N,isDrawing:f})]})})})})});uH.displayName="CanvasViewer";function T0e({containerRef:e,canvasSize:t,rotation:r=0}){const[n,s]=S.useState(1),[a,i]=S.useState({x:0,y:0}),o=S.useRef({width:1,height:1}),l=S.useRef(.01),u=S.useRef(0),d=S.useRef(!1),f=S.useCallback(()=>{const N=t?.width??t?.WIDTH??0,E=t?.height??t?.HEIGHT??0,P=Math.abs(r%180)===90;return{width:P?E:N,height:P?N:E}},[t,r]),h=S.useCallback(()=>{const N=e?.current;if(!N)return{width:1,height:1};const E=N.clientWidth||1,P=N.clientHeight||1;return o.current={width:E,height:P},{width:E,height:P}},[e]),g=S.useCallback(()=>{const{width:N,height:E}=o.current,{width:P,height:M}=f(),j=N/Math.max(P,1),A=E/Math.max(M,1);return Math.min(j,A,1)*.98},[f]),x=S.useCallback(N=>{const{width:E,height:P}=o.current,{width:M,height:j}=f(),A=Math.max(l.current,Math.min(N,1.5));let O=(E-M*A)/2,L=(P-j*A)/2;const q=E-M*A,Q=P-j*A;O=Math.min(Math.max(0,O),Math.max(0,q)),L=Math.min(Math.max(0,L),Math.max(0,Q));try{console.log("[Camera] centerAtScale",{targetScale:N,clampedScale:A,container:{containerW:E,containerH:P},canvas:{canvasW:M,canvasH:j},translate:{x:O,y:L},rotation:r})}catch{}i({x:O,y:L}),s(A)},[f]),y=S.useCallback(()=>{const{width:N,height:E}=h(),{width:P,height:M}=f(),j=g();let A=(N-P*j)/2,O=(E-M*j)/2;const L=N-P*j,q=E-M*j;A=Math.min(Math.max(0,A),Math.max(0,L)),O=Math.min(Math.max(0,O),Math.max(0,q));try{console.log("[Camera] fitCanvas",{scale:j,container:{containerW:N,containerH:E},canvas:{canvasW:P,canvasH:M},translate:{x:A,y:O},rotation:r})}catch{}s(j),i({x:A,y:O}),l.current=j,d.current=!1},[f,h,g]),v=S.useCallback(()=>{const{width:N,height:E}=h(),{width:P,height:M}=f(),j=(N-P)/2,A=(E-M)/2;s(1),i({x:j,y:A})},[f,h]),T=S.useCallback((N,E)=>{const{width:P,height:M}=o.current,{width:j,height:A}=f(),O=Math.max(l.current,Math.min(N,1.5));if(E&&Number.isFinite(E.x)&&Number.isFinite(E.y)){const L={x:(E.x-a.x)/n,y:(E.y-a.y)/n},q=E.x-L.x*O,Q=E.y-L.y*O;try{console.log("[Camera] zoomTo(pointer) ->",{from:n,to:O})}catch{}s(O),i({x:q,y:Q}),u.current=Date.now()+400,d.current=!0}else{let L=(P-j*O)/2,q=(M-A*O)/2;const Q=P-j*O,ae=M-A*O;L=Math.min(Math.max(0,L),Math.max(0,Q)),q=Math.min(Math.max(0,q),Math.max(0,ae));try{console.log("[Camera] zoomTo(center) ->",{from:n,to:O})}catch{}s(O),i({x:L,y:q}),u.current=Date.now()+400,d.current=!0}},[f,n,a]),k=S.useCallback((N,E)=>{const P=n*N,{width:M,height:j}=o.current,A={x:M/2,y:j/2};T(P,E||A)},[n,T]),b=S.useCallback((N,E)=>{i(P=>({x:P.x+N,y:P.y+E})),u.current=Date.now()+200,d.current=!0},[]);return S.useEffect(()=>{const N=e?.current;if(!N)return;const E=new ResizeObserver(()=>{h();const P=g();if(l.current=P,!(Date.now()<u.current)&&!d.current){try{console.log("[Camera] resize centerAtScale",{scale:n})}catch{}x(n)}});return E.observe(N),h(),()=>E.disconnect()},[e,h,g,x,n]),S.useEffect(()=>{d.current=!1,l.current=g(),x(n)},[r,t?.width,t?.height,t?.WIDTH,t?.HEIGHT,g,x,n]),S.useMemo(()=>({scale:n,translate:a,setScale:s,setTranslate:i,centerAtScale:x,fitCanvas:y,oneToOne:v,zoomTo:T,zoomByFactor:k,panBy:b}),[n,a,x,y,v,T,k,b])}const yy=new Map,dH=S.forwardRef(({drawingData:e,textBoxes:t=[],canvasSize:r,rotation:n=0,onScaleChange:s,persistKey:a="viewer",onTextBoxEdit:i},o)=>{const l=S.useRef(null),u=S.useRef(null),d=T0e({containerRef:l,canvasSize:r,rotation:n}),[f,h]=S.useState({width:1,height:1}),g=S.useRef(null),x=S.useRef(null),[y,v]=S.useState(null);S.useEffect(()=>{console.log("[ViewerCanvas] drawingData received:",e),console.log("[ViewerCanvas] drawingData length:",e?.length),e&&e.length>0&&console.log("[ViewerCanvas] First drawing element:",e[0]),console.log("[ViewerCanvas] textBoxes:",t),console.log("[ViewerCanvas] textBoxes length:",t?.length)},[e]),S.useEffect(()=>{typeof s=="function"&&s(d.scale);try{console.log("[ViewerCanvas] scale changed",{scale:d.scale})}catch{}if(a){const R=yy.get(a)||{};yy.set(a,{...R,scale:d.scale})}},[d.scale,s]),S.useEffect(()=>{if(a){const R=yy.get(a)||{};yy.set(a,{...R,translate:{x:d.translate.x,y:d.translate.y}})}},[a,d.translate.x,d.translate.y]),S.useImperativeHandle(o,()=>({zoomIn:R=>d.zoomByFactor(1.1,R),zoomOut:R=>d.zoomByFactor(1/1.1,R),fitCanvas:()=>d.fitCanvas(),oneToOne:()=>d.oneToOne(),getScale:()=>d.scale,getStage:()=>u.current,getPointerPosition:()=>u.current?.getPointerPosition?.(),exportPNGFullCanvas:()=>{const R=u.current;if(!R)return null;const H=r?.width??r?.WIDTH??1536,U=r?.height??r?.HEIGHT??2048,I={scaleX:R.scaleX(),scaleY:R.scaleY(),x:R.x(),y:R.y(),width:R.width(),height:R.height()},W=g.current,K=x.current,Z=W?{x:W.x(),y:W.y(),scaleX:W.scaleX(),scaleY:W.scaleY()}:null,oe=K?{x:K.x(),y:K.y(),rotation:K.rotation()}:null;try{return R.scale({x:1,y:1}),R.position({x:0,y:0}),R.size({width:H,height:U}),W&&(W.position({x:0,y:0}),W.scale({x:1,y:1})),K&&(K.position({x:0,y:0}),K.rotation(0)),R.batchDraw(),R.toDataURL({mimeType:"image/png",quality:1,pixelRatio:1,x:0,y:0,width:H,height:U})}finally{K&&oe&&(K.position({x:oe.x,y:oe.y}),K.rotation(oe.rotation)),W&&Z&&(W.position({x:Z.x,y:Z.y}),W.scale({x:Z.scaleX,y:Z.scaleY})),R.scale({x:I.scaleX,y:I.scaleY}),R.position({x:I.x,y:I.y}),R.size({width:I.width,height:I.height}),R.batchDraw()}}}),[d]),S.useEffect(()=>{const R=l.current;if(!R)return;const H=()=>{h({width:R.clientWidth||1,height:R.clientHeight||1})};H();const U=new ResizeObserver(H);return U.observe(R),()=>U.disconnect()},[]),S.useEffect(()=>{if(!Array.isArray(e)||e.length===0){v(null);return}let R=1/0,H=1/0,U=-1/0,I=-1/0;const W=(J,le)=>{Number.isFinite(J)&&Number.isFinite(le)&&(J<R&&(R=J),le<H&&(H=le),J>U&&(U=J),le>I&&(I=le))};if(e.forEach(J=>{if(Array.isArray(J))J.forEach(le=>W(le.x,le.y));else if(J&&typeof J=="object"){if(J.type==="line")W(J.startX,J.startY),W(J.endX,J.endY);else if(J.type==="rectangle")W(J.startX,J.startY),W(J.endX,J.endY);else if(J.type==="circle"){const le=Math.hypot(J.endX-J.startX,J.endY-J.startY)/2,ue=(J.startX+J.endX)/2,de=(J.startY+J.endY)/2;W(ue-le,de-le),W(ue+le,de+le)}}}),!Number.isFinite(R)||!Number.isFinite(H)||!Number.isFinite(U)||!Number.isFinite(I)){v(null);return}const K=16,Z=Math.max(1,U-R+K*2),oe=Math.max(1,I-H+K*2);v({minX:R-K,minY:H-K,width:Z,height:oe,centerX:R-K+Z/2,centerY:H-K+oe/2})},[e]);const T=S.useMemo(()=>{if(!y)return{scale:1,x:0,y:0};const R=r?.width??r?.WIDTH??1536,H=r?.height??r?.HEIGHT??2048,U=Math.min(R/Math.max(1,y.width),H/Math.max(1,y.height),1),I=y.width*U,W=y.height*U,K=(R-I)/2,Z=(H-W)/2,oe=K-y.minX*U,J=Z-y.minY*U;return{scale:U,x:oe,y:J}},[y,r?.width,r?.height,r?.WIDTH,r?.HEIGHT]),k=S.useRef(!1);S.useEffect(()=>{if(k.current)return;const R=a?yy.get(a):null;R&&Number.isFinite(R.scale)&&R.translate&&Number.isFinite(R.translate.x)&&Number.isFinite(R.translate.y)?(d.setScale(R.scale),d.setTranslate(R.translate)):d.fitCanvas(),k.current=!0},[a,d]),S.useEffect(()=>{try{console.log("[ViewerCanvas] rotation changed",{rotation:n,scale:d.scale,translate:d.translate})}catch{}d.fitCanvas()},[n]),S.useEffect(()=>{d.centerAtScale(d.scale)},[n]);const b=R=>{R.evt.preventDefault();const H=u.current;if(!H)return;const U=H.getPointerPosition(),I=Math.pow(1.0015,-R.evt.deltaY);d.zoomByFactor(I,U)},N=S.useRef(!1),E=S.useRef({x:0,y:0}),P=()=>{const R=l.current;if(!R)return 1;const H=R.clientWidth||1,U=R.clientHeight||1,I=r?.width??r?.WIDTH??1,W=r?.height??r?.HEIGHT??1,K=Math.abs(n%180)===90,Z=K?W:I,oe=K?I:W,J=Math.min(H/Z,U/oe);return Math.min(J,1)},M=R=>{const H=P();d.scale<=H||(N.current=!0,E.current={x:R.evt.clientX,y:R.evt.clientY})},j=R=>{if(!N.current)return;const H=R.evt.clientX-E.current.x,U=R.evt.clientY-E.current.y;E.current={x:R.evt.clientX,y:R.evt.clientY},d.panBy(H,U)},A=()=>{N.current=!1},O=1536,L=2048,q=(R,H)=>{if(console.log(`[ViewerCanvas] Rendering drawing element ${H}:`,R),Array.isArray(R))return console.log(`[ViewerCanvas] Array item with ${R.length} points:`,R.slice(0,3)),c.jsx(zi,{points:R.flatMap(U=>[U.x,U.y]),stroke:R[0]?.color||"#000000",strokeWidth:R[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round"},H);if(R?.type==="line")return c.jsx(zi,{points:[R.startX,R.startY,R.endX,R.endY],stroke:R.color,strokeWidth:R.thickness,lineCap:"round"},H);if(R?.type==="rectangle"){const U=Math.abs(R.endX-R.startX),I=Math.abs(R.endY-R.startY),W=Math.min(R.startX,R.endX),K=Math.min(R.startY,R.endY);return c.jsx(bi,{x:W,y:K,width:U,height:I,stroke:R.color,strokeWidth:R.thickness,fill:"transparent"},H)}else if(R?.type==="circle"){const U=Math.sqrt(Math.pow(R.endX-R.startX,2)+Math.pow(R.endY-R.startY,2))/2,I=(R.startX+R.endX)/2,W=(R.startY+R.endY)/2;return c.jsx(Cf,{x:I,y:W,radius:U,stroke:R.color,strokeWidth:R.thickness,fill:"transparent"},H)}return null},Q=S.useRef(new Map),ae=S.useRef(null),te=S.useRef({x:0,y:0}),ne=S.useCallback(R=>{const H=l.current;H&&(H.setPointerCapture?.(R.pointerId),Q.current.set(R.pointerId,{x:R.clientX,y:R.clientY}),E.current={x:R.clientX,y:R.clientY})},[]),B=S.useCallback(R=>{const H=Q.current;if(H.has(R.pointerId)){if(H.set(R.pointerId,{x:R.clientX,y:R.clientY}),H.size===2){const U=Array.from(H.values()),I=U[1].x-U[0].x,W=U[1].y-U[0].y,K=Math.hypot(I,W),Z={x:(U[0].x+U[1].x)/2,y:(U[0].y+U[1].y)/2},oe=u.current,J=oe&&oe.getPointerPosition()||Z;if(ae.current!=null){const le=K/Math.max(1,ae.current);d.zoomByFactor(le,J)}ae.current=K,te.current=J}else if(H.size===1){const U=P();if(d.scale<=U)return;const I=R.clientX-E.current.x,W=R.clientY-E.current.y;E.current={x:R.clientX,y:R.clientY},d.panBy(I,W)}}},[]),V=S.useCallback(R=>{const H=l.current;H&&(H.releasePointerCapture?.(R.pointerId),Q.current.delete(R.pointerId),Q.current.size<2&&(ae.current=null),N.current=!1)},[]);return c.jsx("div",{ref:l,style:{width:"100%",height:"100%",display:"block",backgroundColor:"transparent",touchAction:"none",WebkitTouchCallout:"none"},className:"select-none",onPointerDown:ne,onPointerMove:B,onPointerUp:V,children:c.jsx(pm,{ref:u,width:f.width,height:f.height,onWheel:b,onMouseDown:M,onMouseMove:j,onMouseUp:A,onMouseLeave:A,children:c.jsx(gm,{children:c.jsx(Qc,{ref:g,x:d.translate.x,y:d.translate.y,scaleX:d.scale,scaleY:d.scale,children:(()=>{const R=(n%360+360)%360;let H=0,U=0;R===90?H=L:R===180?(H=O,U=L):R===270&&(U=O);try{console.log("[ViewerCanvas] rotatedGroup offset",{rotation:n,norm:R,tx:H,ty:U,canvasW:O,canvasH:L})}catch{}return c.jsxs(Qc,{ref:x,x:H,y:U,rotation:n,children:[c.jsx(bi,{x:0,y:0,width:O,height:L,fill:"white"}),c.jsxs(Qc,{x:T.x,y:T.y,scaleX:T.scale,scaleY:T.scale,children:[Array.isArray(e)?(console.log("[ViewerCanvas] Rendering",e.length,"drawing elements"),e.map((I,W)=>q(I,W))):null,Array.isArray(t)&&t.map((I,W)=>c.jsxs(Qc,{x:I.x,y:I.y,children:[c.jsx(bi,{width:I.width,height:I.height,fill:"#ffffff",stroke:"#d1d5db",strokeWidth:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1}}),c.jsx(Lu,{text:I.text,x:8,y:8,width:Math.max(0,(I.width||0)-16),height:Math.max(0,(I.height||0)-16),fontSize:I.fontSize||14,fill:I.color||"#000000",wrap:"word",align:"left",verticalAlign:"top"})]},`tb-${W}`))]})]})})()})})})})});dH.displayName="ViewerCanvas";const C0e=({zoom:e,onZoomIn:t,onZoomOut:r,onRotate:n,onDownload:s,onFullscreen:a,isFullscreen:i})=>c.jsxs("div",{className:"absolute top-4 right-4 flex flex-col space-y-2 items-center justify-center",children:[c.jsx(lt,{onClick:t,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Zoom In",children:c.jsx(s0e,{className:"w-4 h-4 mx-auto my-auto"})}),c.jsx(lt,{onClick:r,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Zoom Out",children:c.jsx(i0e,{className:"w-4 h-4 mx-auto my-auto"})}),c.jsx(lt,{onClick:n,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Rotate",children:c.jsx(t0e,{className:"w-4 h-4 mx-auto my-auto"})}),c.jsx(lt,{onClick:s,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Download",children:c.jsx(Jde,{className:"w-4 h-4 mx-auto my-auto"})}),c.jsx(lt,{onClick:a,variant:"secondary",size:"icon",className:"w-10 h-10",title:i?"Exit Fullscreen":"Enter Fullscreen",children:i?c.jsx(iH,{className:"w-4 h-4 mx-auto my-auto"}):c.jsx(Zde,{className:"w-4 h-4 mx-auto my-auto"})})]}),E0e=({currentQuestion:e,totalQuestions:t,onPrevious:r,onNext:n,drawingDataLength:s})=>t<=1?null:c.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(lt,{onClick:r,disabled:e===0,variant:"outline",size:"sm",children:"Previous"}),c.jsxs("span",{className:"text-sm text-gray-600",children:["Question ",e+1," of ",t]}),c.jsx(lt,{onClick:n,disabled:e===t-1,variant:"outline",size:"sm",children:"Next"})]}),c.jsxs("div",{className:"text-sm text-gray-500",children:[s," lines"]})]})}),fH=({drawing:e,isOpen:t,onClose:r,onScoreChange:n,onMaxScoreChange:s,isTeacherView:a=!1,onSaveScore:i})=>{const{drawingState:o,setDrawingState:l,drawingData:u,setDrawingData:d,textBoxes:f,setTextBoxes:h,saveToHistoryState:g,undo:x,redo:y,canUndoState:v,canRedoState:T}=h0e(),{questionsData:k,currentQuestionIndex:b,setCurrentQuestionIndex:N}=S0e(e),{zoom:E,position:P,handleZoomIn:M,handleZoomOut:j}=_0e(oH,Gc),{isFullscreen:A,enterFullscreen:O,exitFullscreen:L}=k0e(o,l),{handleTouchStart:q,handleTouchMove:Q,handleTouchEnd:ae}=b0e(o,l,u,d,g,x,y,v,T),te=S.useRef(null),ne=S.useRef(null),[B,V]=S.useState(1),[R,H]=S.useState(""),[U,I]=S.useState("");S.useEffect(()=>{if(console.log("DrawingModal - questionsData:",k),console.log("DrawingModal - currentQuestionIndex:",b),k.length>0){const de=k[b]?.drawingData||[],Te=k[b]?.textBoxes||[];console.log("DrawingModal - setting drawingData:",de),console.log("DrawingModal - setting textBoxes:",Te),d(de),h(Te)}},[k,b,d,h]),S.useEffect(()=>{t&&e&&(H((Number.isFinite(e.score)?e.score:0).toString()),I("10"))},[t,e]);const W=()=>{b>0&&N(b-1)},K=()=>{b<k.length-1&&N(b+1)},Z=()=>{v&&x()},oe=()=>{T&&y()};S.useEffect(()=>{const de=Te=>{(Te.ctrlKey||Te.metaKey)&&(Te.key==="z"&&!Te.shiftKey?(Te.preventDefault(),Z()):(Te.key==="y"||Te.key==="z"&&Te.shiftKey)&&(Te.preventDefault(),oe()))};return document.addEventListener("keydown",de),()=>document.removeEventListener("keydown",de)},[Z,oe]);const J=()=>{l(de=>({...de,rotation:(de.rotation+90)%360}))},le=()=>{if(a&&ne.current){const xe=ne.current.exportPNGFullCanvas();if(!xe)return;const Ae=document.createElement("a");Ae.href=xe,Ae.download=`drawing-${e?.name||"student"}-${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae);return}const de=te.current;if(!de)return;const Te=de.toDataURL({mimeType:"image/png",quality:1,pixelRatio:1,x:0,y:0,width:Gc.WIDTH,height:Gc.HEIGHT}),ie=document.createElement("a");ie.href=Te,ie.download=`drawing-${e?.name||"student"}-${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(ie),ie.click(),document.body.removeChild(ie)},ue=async()=>{if(!a)return r();const de=parseInt(R,10),Te=10;Number.isFinite(de)&&(typeof i=="function"?await i({resultId:e.id,score:Math.max(0,Math.min(10,de)),maxScore:Te}):(n&&n(e.id,de),s&&s(e.id,Te))),r()};return!t||!e?null:c.jsx(al,{children:c.jsx(ht.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:c.jsxs(ht.div,{className:"bg-white rounded-lg shadow-xl max-w-4xl h-[90vh] w-full mx-4 flex flex-col select-none",style:{touchAction:"none",WebkitTouchCallout:"none"},initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:de=>de.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Drawing Submission"}),c.jsxs("p",{className:"text-sm text-gray-600",children:[e.name," ",e.surname," - ",e.test_name]})]}),c.jsx(lt,{onClick:r,variant:"ghost",size:"icon",className:"text-gray-400 hover:text-gray-600",children:c.jsx(iH,{className:"w-5 h-5"})})]}),k.length>1&&c.jsx(E0e,{currentQuestion:b,totalQuestions:k.length,onPrevious:W,onNext:K,drawingDataLength:k[b]?.drawingData?.length||0}),c.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[c.jsxs("div",{className:"flex-1 min-h-0 relative overflow-hidden bg-gray-100 p-0 sm:p-4 select-none",style:{touchAction:"none",WebkitTouchCallout:"none"},children:[a?c.jsx(dH,{ref:ne,drawingData:u,textBoxes:f,canvasSize:{width:Gc.WIDTH,height:Gc.HEIGHT,WIDTH:Gc.WIDTH,HEIGHT:Gc.HEIGHT},rotation:o.rotation,onScaleChange:V}):c.jsx(uH,{ref:te,drawingData:u,textBoxes:f,drawingState:o,canvasSize:{width:Gc.WIDTH,height:Gc.HEIGHT,WIDTH:Gc.WIDTH,HEIGHT:Gc.HEIGHT},zoom:E,position:P,onTouchStart:q,onTouchMove:Q,onTouchEnd:ae,mousePosition:{x:0,y:0},isMouseOverCanvas:!1,isEraserDrawing:!1}),c.jsx(C0e,{zoom:a?B:E,onZoomIn:()=>{if(a&&ne.current){try{console.log("[ZoomButton] ZoomIn click (teacher)",{before:ne.current.getScale?.()})}catch{}ne.current.zoomIn(void 0),setTimeout(()=>{try{console.log("[ZoomButton] ZoomIn after",{after:ne.current.getScale?.()})}catch{}},0)}else M()},onZoomOut:()=>{if(a&&ne.current){try{console.log("[ZoomButton] ZoomOut click (teacher)",{before:ne.current.getScale?.()})}catch{}ne.current.zoomOut(void 0),setTimeout(()=>{try{console.log("[ZoomButton] ZoomOut after",{after:ne.current.getScale?.()})}catch{}},0)}else j()},onRotate:J,onDownload:le,onFullscreen:A?L:O,isFullscreen:A}),c.jsxs("div",{className:"absolute bottom-4 left-4 bg-gray-800 bg-opacity-70 text-white px-3 py-1 rounded-full text-sm",children:[Math.round((a?B:E)*100),"%"]})]}),a&&c.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Score:"}),c.jsx("input",{type:"number",min:"0",max:10,value:R,onChange:de=>H(de.target.value),className:"w-20 px-3 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max:"}),c.jsx("input",{type:"number",value:10,disabled:!0,className:"w-20 px-3 py-1 text-sm border border-gray-300 rounded bg-gray-100"})]}),c.jsx(lt,{onClick:ue,variant:"primary",size:"sm",children:"Save"})]})})]})]})})})},hH=({testType:e,testId:t,studentAnswers:r,onBackToCabinet:n,compact:s=!1,showAll:a=!1,onToggleShowAll:i,maxInitial:o=3})=>{const l=fl(),{user:u,isAuthenticated:d}=Fs(),{testResults:f,loadTestResults:h}=y2(),[g,x]=S.useState(!0),[y,v]=S.useState(""),[T,k]=S.useState([]),[b,N]=S.useState([]),[E,P]=S.useState(null),[M,j]=S.useState([]),[A,O]=S.useState(0),[L,q]=S.useState(0),[Q,ae]=S.useState(!1),[te,ne]=S.useState(null),B=S.useCallback(J=>{const le=J.best_retest_score||J.score,ue=J.best_retest_max_score||J.max_score,de=Math.round(le/ue*100);return{score:le,maxScore:ue,percentage:de}},[]);S.useEffect(()=>{V()},[e,t]),S.useEffect(()=>{!e&&!t&&(f&&f.results?(ye.debug(" Using cached test results from TestContext"),N(f.results),x(!1)):H())},[e,t,f]);const V=S.useCallback(async()=>{ye.debug(" Initializing Student Results...");try{if(x(!0),v(""),!d||!u){ye.debug(" User not authenticated"),v("User not authenticated");return}if(u.role!==Io.STUDENT){ye.error(" Invalid user role for student results:",u.role),v("Access denied. Student role required.");return}ye.debug(" Loading test results..."),await h(u?.student_id||u?.id||""),e&&t&&r&&(ye.debug(" Loading specific test results..."),await R(e,t,r)),ye.debug(" Student Results initialization complete!")}catch(J){ye.error(" Error initializing student results:",J),v("Failed to initialize student results")}finally{x(!1)}},[d,u,e,t,r,h]),R=S.useCallback(async(J,le,ue)=>{ye.debug(" Loading specific test results:",J,le);try{const de=await Pn.getTestInfo(J,le);ye.debug(" Test info loaded:",de),P(de);const Te=await Pn.getTestQuestions(J,le);ye.debug(" Test questions loaded:",Te),j(Te);const ie=jf(Te,ue,J).score,xe=Te.length>0?Math.round(ie/Te.length*100):0;O(ie),q(xe),ye.debug(" Test results calculated:",{score:ie,percentage:xe})}catch(de){throw ye.error(" Error loading specific test results:",de),de}},[]),H=S.useCallback(async(J=0)=>{ye.debug(" Loading all student results using existing test results API...",J>0?`(retry ${J})`:"");try{if(!(u?.student_id||u?.sub))throw new Error("Student ID not found");const ue=await Pn.getStudentTestResults();if(ue.success){ye.debug(" All student results loaded:",ue.results.length,"results");const de=ue.results.map(Te=>({...Te,caught_cheating:Te.caught_cheating||!1,visibility_change_times:Te.visibility_change_times||0}));N(de),ne(new Date),ue.results.length===0&&J===0&&(ye.debug(" No results found, retrying in 2 seconds..."),setTimeout(()=>{H(1)},2e3))}else throw new Error(ue.error||"Failed to load student results")}catch(le){ye.error(" Error loading all student results:",le),v(le.message)}},[u]),U=S.useCallback(J=>({"Listening and Speaking":"L&S","Reading and Writing":"R&W","English for Career":"Eng for Career","Science Fundamental":"Science F","Science Supplementary":"Science S","Math Fundamental":"Math F","Math Supplementary":"Math S","English for Communication":"Eng for Comm"})[J]||J,[]),I=S.useCallback(J=>{if(!J||J.length===0)return c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"No results available"})});const le=a?J:J.slice(0,o);return c.jsxs("div",{className:"overflow-x-auto",children:[c.jsxs("table",{className:"w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),c.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),c.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test Name"}),c.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Result"}),c.jsx("th",{className:"hidden sm:table-cell px-2 sm:px-4 lg:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:le.map((ue,de)=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs font-medium text-gray-900",children:c.jsx("span",{className:"bg-blue-100 text-blue-800 px-0.5 sm:px-2 py-0.5 rounded text-xs",children:U(ue.subject)})}),c.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-gray-500 truncate max-w-12 sm:max-w-none",children:ue.teacher_name}),c.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-gray-500 truncate max-w-16 sm:max-w-none",children:ue.test_name}),c.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-gray-500",children:c.jsx("div",{className:"flex flex-col items-center space-y-1",children:ue.test_type==="drawing"?ue.score!==null?c.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold ${(()=>{const{score:Te,maxScore:ie,percentage:xe}=B(ue);return xe>=80?"bg-green-100 text-green-800":xe>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"})()}`,children:(()=>{const{score:Te,maxScore:ie,percentage:xe}=B(ue);return`${Te}/${ie} (${xe}%)`})()}):c.jsx("span",{className:"px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold bg-gray-100 text-gray-800",children:"Pending Review"}):ue.test_type==="speaking"?ue.score!==null?c.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold ${(()=>{const{score:Te,maxScore:ie,percentage:xe}=B(ue);return xe>=80?"bg-green-100 text-green-800":xe>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"})()}`,children:(()=>{const{score:Te,maxScore:ie,percentage:xe}=B(ue);return`${Te}/${ie} (${xe}%)`})()}):c.jsx("span",{className:"px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold bg-gray-100 text-gray-800",children:"Pending Review"}):c.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold ${(()=>{const{score:Te,maxScore:ie,percentage:xe}=B(ue);return xe>=80?"bg-green-100 text-green-800":xe>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"})()}`,children:(()=>{const{score:Te,maxScore:ie,percentage:xe}=B(ue);return`${Te}/${ie} (${xe}%)`})()})})}),c.jsx("td",{className:"hidden sm:table-cell px-2 sm:px-4 lg:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:new Date(ue.submitted_at).toLocaleDateString()})]},de))})]}),J.length>o&&i&&c.jsx("div",{className:"text-center pt-4",children:c.jsx("button",{onClick:i,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:a?"Show Less":`Show ${J.length-o} More`})})]})},[U,a,o,i]),W=S.useCallback((J,le)=>{if(ye.debug(" formatAnswer called with:",{answer:J,testType:le,answerType:typeof J}),!J)return"No answer";switch(le){case"true_false":const ue=typeof J=="boolean"?J:J==="true";return ye.debug(" Boolean answer processed:",ue),ue?"True":"False";case"multiple_choice":return J.toUpperCase();case"input":return J;case"word_matching":return typeof J=="object"?Object.entries(J).map(([de,Te])=>`${de}  ${Te}`).join(", "):J;case"drawing":return"Drawing submitted";default:return J}},[]),K=S.useCallback(()=>!E||!M||!r?null:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:["Test Results: ",E.test_name||E.title||"Test"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-blue-600",children:A}),c.jsx("p",{className:"text-sm text-gray-500",children:"Correct Answers"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-gray-900",children:M.length}),c.jsx("p",{className:"text-sm text-gray-500",children:"Total Questions"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:`text-3xl font-bold ${L>=80?"text-green-600":L>=60?"text-yellow-600":"text-red-600"}`,children:[L,"%"]}),c.jsx("p",{className:"text-sm text-gray-500",children:"Score"})]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Questions Review"}),c.jsx("div",{className:"space-y-4",children:M.map((J,le)=>{const ue=r[le],de=kv(J,e),Te=Up(J,ue,e);return c.jsxs("div",{className:`border rounded-lg p-4 ${Te?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("h4",{className:"font-medium text-gray-900",children:["Question ",le+1]}),c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Te?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:Te?"Correct":"Incorrect"})]}),c.jsx("p",{className:"text-gray-700 mb-3",children:J.question}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Your Answer:"}),c.jsx("p",{className:"text-sm text-gray-900",children:W(ue,e)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Correct Answer:"}),c.jsx("p",{className:"text-sm text-gray-900",children:W(de,e)})]})]})]},le)})})]})]}),[E,M,r,e,A,L,kv,Up,W]),Z=S.useCallback(()=>{if(!b||b.length===0)return c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"No test results available yet."})});const J={};return b.forEach(le=>{const ue=le.subject||"Unknown Subject";J[ue]||(J[ue]=[]),J[ue].push(le)}),c.jsx("div",{className:"space-y-6",children:Object.entries(J).map(([le,ue])=>c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:le})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test Name"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ue.map((de,Te)=>{const{score:ie,maxScore:xe,percentage:Ae}=B(de),Me=Ae>=80?"text-green-600":Ae>=60?"text-yellow-600":"text-red-600";return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:de.test_name}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:de.teacher_name||"Unknown"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c.jsxs("span",{className:Me,children:[ie,"/",xe," (",Ae,"%)"]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(de.submitted_at).toLocaleDateString()})]},Te)})})]})})]},le))})},[b]);S.useCallback(()=>{ye.debug(" Clearing test data and returning to cabinet..."),P(null),j([]),setStudentAnswers(null),O(0),q(0),ae(!1),n?n():l("/student")},[n,l]);const oe=S.useCallback(()=>{ye.debug(" Navigating back to cabinet..."),n?n():l("/student")},[n,l]);return S.useCallback((J,le)=>{const ue={id:Date.now(),message:J,type:le,timestamp:new Date};k(de=>[...de,ue]),setTimeout(()=>{k(de=>de.filter(Te=>Te.id!==ue.id))},Gm.NOTIFICATION_DURATION)},[]),g?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(ln,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Student Results..."})]})}):y?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Results Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:y}),c.jsx(lt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):s?c.jsxs("div",{children:[g?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(ln,{size:"md"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Loading results..."})]}):y?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-red-500 text-4xl mb-2",children:""}),c.jsx("p",{className:"text-red-600",children:y})]}):I(b),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:T.map(J=>c.jsx(su,{type:J.type,message:J.message,onClose:()=>k(le=>le.filter(ue=>ue.id!==J.id))},J.id))})]}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Results"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",te?te.toLocaleString():"Never"]})]}),c.jsxs("div",{className:"flex space-x-3",children:[E&&c.jsx(lt,{variant:"outline",onClick:()=>ae(!Q),children:Q?"Hide Details":"Show Details"}),c.jsx(lt,{variant:"outline",onClick:oe,children:"Back to Cabinet"})]})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Q&&E?K():Z()}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:T.map(J=>c.jsx(su,{type:J.type,message:J.message,onClose:()=>k(le=>le.filter(ue=>ue.id!==J.id))},J.id))}),selectedDrawing&&c.jsx(fH,{drawing:selectedDrawing,isOpen:isDrawingModalOpen,onClose:()=>setIsDrawingModalOpen(!1)})]})},N0e=({isMenuOpen:e,onToggleMenu:t,onShowPasswordChange:r})=>{const n=fl(),{user:s,isAuthenticated:a,logout:i}=Fs(),{studentData:o,loadStudentData:l}=r3(),{activeTests:u,testResults:d,loadActiveTests:f,loadTestResults:h,viewTestDetails:g,testDetailsModal:x,closeTestDetailsModal:y}=y2(),[v,T]=S.useState(!0),[k,b]=S.useState(""),[N,E]=S.useState([]),[P,M]=S.useState(null),[j,A]=S.useState(!1),[O,L]=S.useState(null),[q,Q]=S.useState(null),[ae,te]=S.useState(new Set),[ne,B]=S.useState(!1),[V,R]=S.useState(!1),[H,U]=S.useState(!1),[I,W]=S.useState(!1);S.useEffect(()=>{K()},[]),S.useEffect(()=>()=>{U(!1)},[]),S.useEffect(()=>{if(H){const xe=setTimeout(()=>{U(!1)},1e3);return()=>clearTimeout(xe)}},[H]);const K=S.useCallback(async()=>{ye.debug(" Initializing Student Cabinet...");try{if(T(!0),b(""),!a||!s){ye.debug(" User not authenticated, redirecting to login"),n("/login");return}if(s.role!==Io.STUDENT){ye.error(" Invalid user role for student cabinet:",s.role),b("Access denied. Student role required.");return}ye.debug(" Loading active tests (single API call)...");const xe=s?.student_id||s?.id||"";if(Z(xe)){ye.debug(" Cache refresh triggered - clearing cache");try{const Me=`student_active_tests_${xe}`,Je=`student_results_table_${xe}`;localStorage.removeItem(Me),localStorage.removeItem(Je)}catch{}}else ye.debug(" Using existing cache - no refresh needed");try{localStorage.removeItem(`student_active_tests_${xe}`)}catch{}await f(xe),ye.debug(" Student Cabinet initialization complete!")}catch(xe){ye.error(" Error initializing student cabinet:",xe),b("Failed to initialize student cabinet")}finally{T(!1)}},[a,s,n]),Z=S.useCallback(xe=>{if(window.studentCabinetRefreshRequested)return window.studentCabinetRefreshRequested=!1,ye.debug(" Manual refresh requested"),!0;if(window.recentTestCompleted)return window.recentTestCompleted=!1,ye.debug(" Test completed - cache refresh triggered"),!0;const Ae=localStorage.getItem(`last_cabinet_refresh_${xe}`);if(Ae&&Date.now()-parseInt(Ae)>1800*1e3)return ye.debug(" Time-based refresh triggered"),!0;try{for(let Me=0;Me<localStorage.length;Me++){const Je=localStorage.key(Me);if(Je&&Je.startsWith(`retest_assignment_id_${xe}_`))return ye.debug(" Retest assignment key detected, forcing cache refresh:",Je),!0}}catch{}return ye.debug(" No refresh triggers - using existing cache"),!1},[]);S.useCallback(async()=>{ye.debug(" Calculating average score...");try{if(d&&d.length>0){const xe=d.reduce((Me,Je)=>{const He=Je.best_retest_score||Je.score,It=Je.best_retest_max_score||Je.max_score;return typeof He=="number"&&typeof It=="number"&&It>0?Me+Math.round(He/It*100):Me},0),Ae=Math.round(xe/d.length);Q(Ae),ye.debug(" Average score calculated:",Ae)}}catch(xe){ye.error(" Error calculating average score:",xe)}},[d]),S.useEffect(()=>{if(H){ye.debug(" Skipping completed tests initialization during navigation");return}const xe=s?.student_id||s?.id;if(!xe){ye.debug(" Student ID not available yet, skipping localStorage initialization");return}const Ae=new Set;for(let Me=0;Me<localStorage.length;Me++){const Je=localStorage.key(Me);if(Je&&Je.startsWith(`test_completed_${xe}_`)&&localStorage.getItem(Je)==="true"){const It=Je.replace(`test_completed_${xe}_`,"").split("_");if(It.length>=2){const it=It[0],kt=It.slice(1).join("_"),pt=`${it}_${kt}`;Ae.add(pt),ye.debug(" Found completed test in localStorage:",pt)}}}te(Ae),W(!0),ye.debug(" Initialized completed tests from localStorage:",Array.from(Ae))},[s?.student_id,s?.id,H]),S.useEffect(()=>{ye.debug(" testResults structure:",d);const xe=d?.results||d;if(ye.debug(" resultsArray:",xe),xe&&xe.length>0){const Ae=s?.student_id||s?.id||"",Me=new Set;xe.forEach(Je=>{const He=`${Je.test_type}_${Je.test_id}`;Me.add(He),localStorage.setItem(`test_completed_${Ae}_${Je.test_type}_${Je.test_id}`,"true")}),te(Je=>{const He=new Set([...Je,...Me]);return ye.debug(" Updated completed tests (merged):",Array.from(He)),He})}},[d,s?.student_id,s?.id]);const oe=S.useCallback(async(xe,Ae,Me=!1,Je=null)=>{ye.debug(" Checking test completion:",xe,Ae,"retestAvailable:",Me);try{const He=s?.student_id||s?.id||"";if(Me){ye.debug(" Retest available from backend, checking attempt limits.");const pt=[];for(let qt=1;qt<=10;qt++){const Jt=`retest_attempt${qt}_${He}_${xe}_${Ae}`;localStorage.getItem(Jt)==="true"&&pt.push(Jt)}const ut=pt.length,_t=Je?.retest_attempts_left||Je?.max_attempts||3;return ye.debug(" Current attempts:",ut,"Max attempts:",_t,"Attempt keys:",pt),ut>=_t?(ye.debug(" Maximum retest attempts reached in localStorage"),!0):(ye.debug(" Retest attempts available, allowing start."),!1)}const It=`test_completed_${He}_${xe}_${Ae}`,it=localStorage.getItem(It);if(ye.debug(" localStorage key:",It),ye.debug(" localStorage value:",it),xe==="word_matching"){ye.debug(" Debug: All localStorage keys for student",He);for(let pt=0;pt<localStorage.length;pt++){const ut=localStorage.key(pt);ut&&ut.includes(He)&&ut.includes("word_matching")&&ye.debug(" Found word_matching key:",ut,"=",localStorage.getItem(ut))}}if(it==="true")return ye.debug(" Found completion status in local storage:",it),!0;const kt=d?.results||d;return kt&&kt.length>0&&(ye.debug(" Checking database results:",kt.length,"results"),kt.some(ut=>(ye.debug(" Checking result:",ut.test_type,ut.test_id,"vs",xe,Ae),ut.test_type===xe&&ut.test_id===Ae)))?(ye.debug(" Found completion status in database results"),localStorage.setItem(It,"true"),!0):(ye.debug(" Test not completed according to local storage or database"),!1)}catch(He){return ye.error(" Error checking test completion:",He),!1}},[d,s?.student_id,s?.id]),J=S.useCallback((xe,Ae)=>{const Me={id:Date.now(),message:xe,type:Ae,timestamp:new Date};E(Je=>[...Je,Me]),setTimeout(()=>{E(Je=>Je.filter(He=>He.id!==Me.id))},Gm.NOTIFICATION_DURATION)},[]),le=S.useCallback(async xe=>{ye.debug(" Showing test details:",xe);try{await g(xe.test_type,xe.test_id,xe.test_name)}catch(Ae){ye.error("Error loading test details:",Ae),J("Failed to load test details","error")}},[g,J]),ue=S.useCallback(xe=>{ye.debug(" Starting test:",xe);const Ae=`${xe.test_type}_${xe.test_id}`;if(ae.has(Ae)&&!xe?.retest_available){J("This test has already been completed","warning");return}if(ye.debug(" Checking retest conditions:"),ye.debug(" test.retest_available:",xe?.retest_available),ye.debug(" testKey:",Ae),ye.debug(" completedTests.has(testKey):",ae.has(Ae)),ye.debug(" completedTests:",Array.from(ae)),xe?.retest_available){const Me=s?.student_id||s?.id||"",Je=`retest1_${Me}_${xe.test_type}_${xe.test_id}`;localStorage.setItem(Je,"true"),ye.debug(" Set retest key:",Je);try{const He=`test_completed_${Me}_${xe.test_type}_${xe.test_id}`;localStorage.removeItem(He);const It=`${xe.test_type}_${xe.test_id}`;localStorage.removeItem(It),ye.debug(" Cleared completion keys for retest:",He,It);const it=`retest_in_progress_${Me}_${xe.test_type}_${xe.test_id}`;localStorage.setItem(it,"1"),ye.debug(" Set in-progress retest lock:",it);try{const kt=`anti_cheating_${Me}_${xe.test_type}_${xe.test_id}`;localStorage.removeItem(kt);const pt=`speaking_test_data_${Me}_${xe.test_id}`;localStorage.removeItem(pt);const ut=`speaking_progress_${xe.test_id}`;localStorage.removeItem(ut);const _t=`_${Me}_${xe.test_type}_${xe.test_id}`,qt=[];for(let Ht=0;Ht<localStorage.length;Ht++){const $e=localStorage.key(Ht);$e&&($e.endsWith(_t)||$e.includes(`answers_${Me}_${xe.test_type}_${xe.test_id}`)||$e.includes(`progress_${Me}_${xe.test_type}_${xe.test_id}`)||$e.includes(`state_${Me}_${xe.test_type}_${xe.test_id}`)||$e.includes(`selected_${Me}_${xe.test_type}_${xe.test_id}`))&&qt.push($e)}qt.forEach(Ht=>localStorage.removeItem(Ht)),ye.debug(" Cleared generic cached keys for retest start:",qt);const Jt=`retest_attempts_${Me}_${xe.test_type}_${xe.test_id}`;ye.debug(" Cleared per-test cached keys for retest start:",{antiCheatKey:kt,speakingCacheKey:pt,speakingProgressKey:ut})}catch{}}catch{}if(ye.debug(" Test retest_assignment_id:",xe.retest_assignment_id),ye.debug(" Test retest_assignment_id type:",typeof xe.retest_assignment_id),xe?.retest_assignment_id){const He=`retest_assignment_id_${Me}_${xe.test_type}_${xe.test_id}`;localStorage.setItem(He,String(xe.retest_assignment_id)),ye.debug(" Set retest assignment ID:",He,"=",xe.retest_assignment_id)}else ye.debug(" No retest assignment ID found in test data")}else ye.debug(" Retest assignment ID storage skipped - retest not available");if(U(!0),ye.debug(" Set isStartingTest to true for test:",xe.test_type),xe.test_type==="matching_type"){ye.debug(" Redirecting to matching test page for testId:",xe.test_id),n(`/student/matching-test/${xe.test_id}`);return}if(xe.test_type==="word_matching"){ye.debug(" Redirecting to word matching test page for testId:",xe.test_id),n(`/student/word-matching-test/${xe.test_id}`);return}if(xe.test_type==="speaking"){ye.debug(" Redirecting to speaking test page for testId:",xe.test_id),n(`/student/speaking-test/${xe.test_id}`);return}n(`/student/test/${xe.test_type}/${xe.test_id}`)},[n,ae,J,s?.student_id,s?.id]),de=S.useCallback(()=>{B(xe=>!xe)},[]),Te=S.useCallback(()=>{R(xe=>!xe)},[]),ie=S.useCallback(async xe=>{if(ye.debug(" Starting test:",xe),H){ye.debug(" Test already starting, ignoring click");return}try{if(await oe(xe.test_type,xe.test_id,xe?.retest_available,xe)&&!xe?.retest_available){J("This test has already been completed","warning");return}ue(xe)}catch(Ae){ye.error(" Error starting test:",Ae),J("Failed to start test. Please try again.","error")}},[oe,ue,J,H]);return S.useCallback(xe=>{ye.debug(" Viewing test details:",xe),le(xe)},[le]),v?c.jsx(ht.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:c.jsxs(ht.div,{className:"text-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsx(ln,{size:"lg"}),c.jsx(ht.p,{className:"mt-4 text-gray-600",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.3},children:"Loading Student Cabinet..."})]})}):k?c.jsx(ht.div,{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-100 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:c.jsx(ht.div,{className:"text-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:c.jsxs(ht.div,{className:"bg-white border border-red-200 rounded-xl p-8 max-w-md shadow-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,duration:.3},children:[c.jsx(ht.div,{className:"text-4xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.3,type:"spring"},children:""}),c.jsx("h2",{className:"text-xl font-semibold text-red-800 mb-2",children:"Cabinet Error"}),c.jsx("p",{className:"text-red-600 mb-6",children:k}),c.jsx(lt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):c.jsxs(ht.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[c.jsx(ht.div,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-6",children:[c.jsxs(ht.div,{className:"flex items-center space-x-4",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(ht.div,{className:"h-12 w-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.3,type:"spring"},whileHover:{scale:1.1},children:c.jsx("span",{className:"text-white font-semibold text-xl",children:s?.name?.charAt(0)||"S"})})}),c.jsxs("div",{children:[c.jsxs("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white",children:[s?.name," ",s?.surname]}),c.jsxs("p",{className:"text-blue-100 text-sm sm:text-base md:text-lg",children:["Grade ",s?.grade," - Class ",s?.class]})]})]}),c.jsxs(ht.div,{className:"relative",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[c.jsxs("button",{onClick:t,className:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border-white/20 text-white hover:bg-white/20 font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm border-2",style:{zIndex:1e3},children:[c.jsx("span",{className:"hidden sm:inline",children:"Menu"}),c.jsx(ht.svg,{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:e?180:0},transition:{duration:.2},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),c.jsx(al,{children:e&&c.jsx(ht.div,{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg z-50 overflow-hidden",initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:c.jsxs("div",{className:"py-2",children:[c.jsx(ht.button,{onClick:r,className:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-blue-50 transition-colors",whileHover:{x:4},transition:{duration:.2},children:"Change Password"}),c.jsx(ht.button,{onClick:()=>{t(),i()},className:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-red-50 transition-colors",whileHover:{x:4},transition:{duration:.2},children:"Logout"})]})})})]})]})})}),c.jsxs(ht.div,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:[c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:c.jsx("div",{className:"lg:col-span-1 space-y-6",children:q!==null&&c.jsx(ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7,duration:.5},children:c.jsxs($t,{children:[c.jsx($t.Header,{children:c.jsx($t.Title,{children:"Average Score"})}),c.jsx($t.Body,{children:c.jsxs(ht.div,{className:"text-center",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.8,duration:.3},children:[c.jsxs(ht.div,{className:"text-4xl font-bold text-blue-600 mb-2",initial:{scale:0},animate:{scale:1},transition:{delay:.9,duration:.5,type:"spring"},children:[q,"%"]}),c.jsx("p",{className:"text-sm text-gray-500",children:"Overall Performance"})]})})]})})})}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:c.jsxs($t,{children:[c.jsx($t.Header,{children:c.jsx($t.Title,{className:"text-center",children:"Active Tests"})}),c.jsx($t.Body,{children:u&&u.length>0?c.jsxs("div",{className:"relative",children:[ye.debug(" Rendering overlay, isStartingTest:",H),H&&c.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50 rounded-lg border-2 border-blue-200",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Starting test..."}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait..."})]})}),c.jsxs("div",{className:"space-y-4",children:[(ne?u:u.slice(0,3)).map((xe,Ae)=>c.jsx(ht.div,{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:ne?0:.7+Ae*.1,duration:.3},whileHover:{scale:1.02},children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[c.jsx("h3",{className:"text-sm sm:text-lg font-medium text-gray-900 w-16 sm:w-auto break-words leading-tight line-clamp-2 sm:line-clamp-none",children:xe.test_name}),c.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:xe.subject}),c.jsx("span",{className:"text-gray-500",children:xe.teacher_name}),c.jsxs("span",{className:"text-gray-500",children:[c.jsx("span",{className:"sm:hidden",children:new Date(xe.assigned_at).toLocaleDateString("en-US",{year:"2-digit",month:"numeric",day:"numeric"})}),c.jsx("span",{className:"hidden sm:inline",children:new Date(xe.assigned_at).toLocaleDateString()})]})]})}),c.jsx("div",{className:"flex space-x-2 ml-4",children:(()=>{const Me=`${xe.test_type}_${xe.test_id}`,Je=ae.has(Me);if(!I)return c.jsx(lt,{variant:"secondary",size:"sm",disabled:!0,className:"bg-gray-100 text-gray-500 border-gray-200",children:"Loading..."});if(Je&&xe?.retest_available){const He=s?.student_id||s?.id||"";let It=!1;try{const it=localStorage.getItem(`retest_attempts_${He}_${xe.test_type}_${xe.test_id}`);if(it){const kt=JSON.parse(it);typeof kt?.used=="number"&&typeof kt?.max=="number"&&kt.used>=kt.max&&(It=!0)}}catch{}return It?c.jsx(lt,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):c.jsx(lt,{variant:"primary",size:"sm",onClick:()=>ie(xe),disabled:H,children:"Start Retest"})}return Je?c.jsx(lt,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):(ye.debug(" Button render, isStartingTest:",H,"test:",xe.test_type),c.jsx(lt,{variant:"primary",size:"sm",onClick:()=>ie(xe),disabled:H,children:"Start Test"}))})()})]})},`${xe.test_type}_${xe.test_id}`)),u.length>3&&c.jsx("div",{className:"text-center pt-2",children:c.jsx("button",{onClick:de,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:ne?"Show Less":`Show ${u.length-3} More`})})]})]}):c.jsxs(ht.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},transition:{delay:.7,duration:.3},children:[c.jsx(ht.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.8,duration:.5,type:"spring"},children:""}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Active Tests"}),c.jsx("p",{className:"text-gray-500",children:"No active tests available for your class at the moment."})]})})]})}),c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:c.jsxs($t,{children:[c.jsx($t.Header,{children:c.jsx($t.Title,{children:"Test Results"})}),c.jsx($t.Body,{children:d&&d.showResults?c.jsx(v2,{testResults:d,onBackToCabinet:()=>{setTestResults(null)},onRetakeTest:(xe,Ae)=>{f(),setTestResults(null)},isLoading:v}):c.jsx(hH,{compact:!0,showAll:V,onToggleShowAll:Te,maxInitial:3})})]})})]})]}),c.jsx(rH,{isOpen:x.isOpen,onClose:y,testType:x.testType,testId:x.testId,testName:x.testName,questions:x.questions||[],isLoading:x.isLoading||!1}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:N.map(xe=>c.jsx(su,{type:xe.type,message:xe.message,onClose:()=>E(Ae=>Ae.filter(Me=>Me.id!==xe.id))},xe.id))})]})},A0e=({testInfo:e,questions:t,testType:r,studentAnswers:n,onBackToCabinet:s,checkAnswerCorrectness:a,formatStudentAnswerForDisplay:i,getCorrectAnswer:o})=>{const[l,u]=S.useState(0),[d,f]=S.useState(0),[h,g]=S.useState(!0);if(S.useEffect(()=>{const v=()=>{try{const T=jf(t,n,r).score,k=e?.num_questions||t?.length||0,b=k>0?Math.round(T/k*100):0;u(T),f(b),g(!1)}catch(T){console.error("Error calculating test results:",T),u(0),f(0),g(!1)}};t&&t.length>0?v():g(!1)},[t,n,r,e,jf]),h)return c.jsx("div",{className:"flex justify-center items-center min-h-64",children:c.jsx("div",{className:"text-lg",children:"Calculating results..."})});const x=e?.num_questions||t?.length||0,y=e?.test_name||e?.title||"Test";return c.jsxs("div",{className:"test-results-page max-w-4xl mx-auto p-6 overflow-y-auto min-h-screen",children:[c.jsx($t,{className:"mb-6",children:c.jsxs("div",{className:"results-header text-center",children:[c.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:["Test Results: ",y]}),c.jsx("p",{className:"text-gray-600",children:r==="matching_type"?"Matching Test":r==="multiple_choice"?"Multiple Choice Test":r==="true_false"?"True/False Test":r==="input"?"Input Test":r==="drawing"?"Drawing Test":"Test"})]})}),c.jsx($t,{className:"mb-6",children:c.jsxs("div",{className:"results-summary",children:[c.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-4 text-center",children:["Your Score: ",l," / ",x," (",d,"%)"]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 mb-4",children:c.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${d>=80?"bg-green-500":d>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${d}%`}})}),c.jsx("div",{className:"text-center",children:c.jsx("p",{className:`text-lg font-medium ${d>=80?"text-green-600":d>=60?"text-yellow-600":"text-red-600"}`,children:d>=80?"Excellent!":d>=60?"Good job!":"Keep practicing!"})})]})}),t&&t.length>0&&c.jsx($t,{className:"mb-6",children:c.jsxs("div",{className:"questions-review",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Question Review"}),c.jsx("div",{className:"space-y-4",children:t.map((v,T)=>{const k=n[String(v.question_id)]||"No answer";console.log(" TestResultsDisplay - Question",T+1,":",{question:v,studentAnswer:k,testType:r});const b=a(v,k,r);return console.log(" TestResultsDisplay - isCorrect result:",b),c.jsxs("div",{className:`question-review p-4 rounded-lg border-2 ${b?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[c.jsxs("div",{className:"question-review-header flex justify-between items-start mb-3",children:[c.jsxs("h4",{className:"text-lg font-medium text-gray-800",children:["Question ",T+1]}),c.jsx("span",{className:`text-2xl font-bold ${b?"text-green-600":"text-red-600"}`,children:b?"":""})]}),c.jsx("div",{className:"question-text mb-3",children:c.jsx("p",{className:"text-gray-700 font-medium",children:v.question})}),c.jsxs("div",{className:"answer-section space-y-2",children:[c.jsxs("p",{className:"student-answer",children:[c.jsx("strong",{className:"text-gray-600",children:"Your Answer:"})," ",c.jsx("span",{className:`font-medium ${b?"text-green-700":"text-red-700"}`,children:i(k,r,v)})]}),!b&&c.jsxs("p",{className:"correct-answer",children:[c.jsx("strong",{className:"text-gray-600",children:"Correct Answer:"})," ",c.jsx("span",{className:"text-green-700 font-medium",children:r==="multiple_choice"?String(v.correct_answer||"").toUpperCase():i(o(v,r),r,v)})]})]})]},v.question_id||T)})})]})}),c.jsx($t,{children:c.jsx("div",{className:"results-actions text-center",children:c.jsx(lt,{onClick:s,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 text-lg font-medium",children:"Back to Cabinet"})})})]})};class j0e{constructor(){this.activeRequests=new Map,this.completedRequests=new Map,this.maxCacheSize=100,this.cacheTimeout=3e4}generateKey(t,r,n={}){const s=Object.keys(n).sort().reduce((a,i)=>(a[i]=n[i],a),{});return`${t}_${r}_${JSON.stringify(s)}`}isRequestInProgress(t){return this.activeRequests.has(t)}getCachedResult(t){const r=this.completedRequests.get(t);return r&&Date.now()-r.timestamp<this.cacheTimeout?r.result:null}startRequest(t,r){return this.activeRequests.set(t,r),r.finally(()=>{this.activeRequests.delete(t)}),r}cacheResult(t,r){if(this.completedRequests.size>=this.maxCacheSize){const n=this.completedRequests.keys().next().value;this.completedRequests.delete(n)}this.completedRequests.set(t,{result:r,timestamp:Date.now()})}async deduplicateApiCall(t,r,n,s){const a=this.generateKey(t,r,n);if(this.isRequestInProgress(a))return console.log(" API deduplication: Request already in progress, waiting...",a),this.activeRequests.get(a);const i=this.getCachedResult(a);if(i)return console.log(" API deduplication: Using cached result",a),i;console.log(" API deduplication: Making new request",a);const o=this.startRequest(a,s());try{const l=await o;return this.cacheResult(a,l),l}catch(l){throw l}}clearCache(){this.activeRequests.clear(),this.completedRequests.clear(),console.log(" API deduplication: Cache cleared")}}const nD=new j0e,P0e=(e,t)=>{let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>e.apply(null,n),t)}},M0e=({onBackToCabinet:e,currentTest:t})=>{const r=fl(),{user:n,isAuthenticated:s}=Fs(),{activeTests:a,loadActiveTests:i}=y2(),o=S.useCallback(P0e((Ie,Ye,Ne)=>{try{if(window.skipInitialProgressSave&&Ne.answers&&Ne.answers.length===0){ye.debug(" Skipping empty progress save during restoration"),window.skipInitialProgressSave=!1;return}const Ge=`test_progress_${n?.student_id||n?.id||"unknown"}_${Ie}_${Ye}`,Ot=localStorage.getItem(Ge);if(Ot&&Ne.answers&&Ne.answers.length===0)try{const Ut=JSON.parse(Ot);if(Ut.answers&&Ut.answers.length>0){ye.debug(" Skipping empty progress save - existing progress is better:",Ut.answers);return}}catch{}localStorage.setItem(Ge,JSON.stringify(Ne)),ye.debug(`Saved test progress for ${Ie}_${Ye}:`,Ne)}catch(Ve){ye.error("Error saving test progress:",Ve)}},1e3),[n?.student_id,n?.id]),l=S.useCallback((Ie,Ye,Ne)=>{o(Ie,Ye,Ne)},[o]),u=S.useCallback((Ie,Ye)=>{try{const Ve=`test_progress_${n?.student_id||n?.id||"unknown"}_${Ie}_${Ye}`,Ge=localStorage.getItem(Ve);return Ge?JSON.parse(Ge):null}catch(Ne){return ye.error("Error getting test progress:",Ne),null}},[n?.student_id,n?.id]),d=S.useCallback((Ie,Ye)=>{try{const Ne=n?.student_id||n?.id||"unknown",Ve=`test_progress_${Ne}_${Ie}_${Ye}`;localStorage.removeItem(Ve);for(let Ge=0;Ge<localStorage.length;Ge++){const Ot=localStorage.key(Ge);Ot&&Ot.startsWith(`test_progress_${Ne}_${Ie}_${Ye}_`)&&(localStorage.removeItem(Ot),ye.debug(` Cleared individual question key: ${Ot}`))}ye.debug(`Cleared test progress for ${Ie}_${Ye}`)}catch(Ne){ye.error("Error clearing test progress:",Ne)}},[n?.student_id,n?.id]),[f,h]=S.useState(!0),[g,x]=S.useState(!1),[y,v]=S.useState(""),[T,k]=S.useState(!1),[b,N]=S.useState(""),[E,P]=S.useState([]),[M,j]=S.useState(t?"test":"list"),[A,O]=S.useState(null),[L,q]=S.useState(null),[Q,ae]=S.useState(null),[te,ne]=S.useState([]),[B,V]=S.useState([]),[R,H]=S.useState(0),[U,I]=S.useState(0),[W,K]=S.useState(null),Z=la.useRef(null),oe=la.useRef(null),[J,le]=S.useState(!1),[ue,de]=S.useState(!1),[Te,ie]=S.useState(null),[xe,Ae]=S.useState(null),[Me,Je]=S.useState(!1),[He,It]=S.useState(!1),[it,kt]=S.useState({isInitialized:!1,initializationId:null,lastTestId:null,initializationCount:0}),[pt,ut]=S.useState({isRestored:!1,restoredTestId:null,restorationCount:0}),{startTracking:_t,stopTracking:qt,getCheatingData:Jt,clearData:Ht,isCheating:$e,tabSwitches:ze}=x1(A?.test_type,A?.test_id,n?.student_id||n?.id);S.useEffect(()=>{(()=>{const Ye=[];for(let Ne=0;Ne<localStorage.length;Ne++){const Ve=localStorage.key(Ne);if(Ve&&Ve.startsWith("test_progress_")&&!Ve.includes("_51712_")&&!Ve.includes("_51736_")){const Ge=Ve.split("_");Ge.length===4&&Ge[0]==="test"&&Ge[1]==="progress"&&Ye.push(Ve)}}Ye.forEach(Ne=>{localStorage.removeItem(Ne),ye.debug(" Cleared old cache key:",Ne)})})()},[]);const tt=S.useCallback(()=>{const Ie=A?.test_id,Ye=n?.student_id||n?.id;if(!Ye||!Ie)return ye.debug(" Skipping initialization - missing required data:",{studentId:Ye,currentTestId:Ie}),!1;const Ne=`${Ye}_${Ie}_${Date.now()}`;return it.isInitialized&&it.lastTestId===Ie?(ye.debug(" Already initialized for this test - skipping"),!1):it.initializationId?(ye.debug(" Initialization in progress - skipping duplicate"),!1):(ye.debug(" Starting initialization:",Ne),kt({isInitialized:!1,initializationId:Ne,lastTestId:Ie}),!0)},[it,A,n?.student_id,n?.id]),ot=S.useCallback(()=>{kt(Ie=>({...Ie,isInitialized:!0,initializationId:null})),ye.debug(" Initialization completed")},[]),nt=S.useCallback(async()=>{ye.debug(" Initializing Student Tests...");try{if(h(!0),N(""),!s||!n){ye.debug(" User not authenticated"),N("User not authenticated");return}if(n.role!==Io.STUDENT){ye.error(" Invalid user role for student tests:",n.role),N("Access denied. Student role required.");return}ye.debug(" Loading active tests..."),await i(),ot(),ye.debug(" Student Tests initialization complete!")}catch(Ie){ye.error(" Error initializing student tests:",Ie),N("Failed to initialize student tests")}finally{h(!1)}},[s,n,i,ot]);S.useEffect(()=>{tt()&&nt()},[tt,nt]),S.useEffect(()=>{t&&(ye.debug(" Auto-starting test from prop:",t),k(!0),Qt(t))},[t]),S.useCallback(async()=>{ye.debug(" Loading student active tests...");try{const Ie=await Pn.getActiveTests();ye.debug(" Active tests loaded:",Ie);const Ye=Ie.map(Ne=>({...Ne,subject_id:Ne.subject_id||Ne.subjectId,teacher_id:Ne.teacher_id||Ne.teacherId,is_active:Ne.is_active!==void 0?Ne.is_active:!0,created_at:Ne.created_at||Ne.createdAt,updated_at:Ne.updated_at||Ne.updatedAt}));return Ae(new Date),Ye}catch(Ie){throw ye.error(" Error loading active tests:",Ie),Ie}},[]),S.useCallback(async(Ie,Ye)=>{ye.debug(" Checking test completion:",Ie,Ye);try{const Ne=u(Ie,Ye);return Ne&&Ne.completed}catch(Ne){return ye.error(" Error checking test completion:",Ne),!1}},[u]),S.useEffect(()=>{if(te.length>0&&A?.test_id){const Ie=setTimeout(()=>{let Ye=!1;const Ne=new Array(te.length).fill("");if(te.forEach((Ve,Ge)=>{const Ut=`test_progress_${n?.student_id||n?.id||"unknown"}_${L}_${A?.test_id}_${Ve.question_id}`,ar=localStorage.getItem(Ut);if(ar){const Dr=ar.replace(/^"(.*)"$/,"$1");Ne[Ge]=Dr,Ye=!0}}),Ye){V(Ne);const Ve=Ne.filter(Ot=>Ot&&typeof Ot=="string"&&Ot.trim()!=="").length,Ge=te.length>0?Ve/te.length*100:0;H(Ge)}},100);return()=>clearTimeout(Ie)}},[te,L,A?.test_id]);const Dt=S.useCallback(async(Ie,Ye)=>{ye.debug(" Marking test as completed:",Ie,Ye);try{const Ne=u(Ie,Ye)||{};Ne.completed=!0,Ne.completedAt=new Date().toISOString(),l(Ie,Ye,Ne);const Ge=`test_completed_${n?.student_id||n?.id||""}_${Ie}_${Ye}`;localStorage.setItem(Ge,"true"),ye.debug(" Test completion marked in localStorage:",Ge),ye.debug(" localStorage value after setting:",localStorage.getItem(Ge)),ve("Test marked as completed","success")}catch(Ne){ye.error(" Error marking test as completed:",Ne),ve("Failed to mark test as completed","error")}},[u,l]),Rt=S.useCallback(Ie=>{ye.debug(" Showing test details:",Ie),ie(Ie),de(!0)},[]),Qt=S.useCallback(async Ie=>{ye.debug(" Starting test:",Ie);let Ye=Date.now(),Ne;try{v(""),x(!0),Ye=Date.now();const Ve=()=>{const Pe=Date.now()-Ye,gt=Math.max(0,250-Pe);setTimeout(()=>{h(!1),x(!1)},gt)};let Ge=!1;Ne=setTimeout(()=>{Ge=!0,v("Loading is taking longer than expected...")},15e3);const Ut=`test_completed_${n?.student_id||n?.id||""}_${Ie.test_type}_${Ie.test_id}`,ar=localStorage.getItem(Ut)==="true";if(ar&&!Ie?.retest_available){ye.debug(" Test already completed, redirecting to main cabinet"),ve("This test has already been completed","info"),r("/student");return}if(ar&&Ie?.retest_available&&ye.debug(" Test completed but retest available, allowing retest"),Ie.test_type===rs.MATCHING){ye.debug(" Redirecting to matching test page for testId:",Ie.test_id),r(`/student/matching-test/${Ie.test_id}`);return}if(Ie.test_type===rs.WORD_MATCHING){ye.debug(" Redirecting to word matching test page for testId:",Ie.test_id),r(`/student/word-matching-test/${Ie.test_id}`);return}O(Ie),q(Ie.test_type),ut({isRestored:!1,restoredTestId:null,restorationCount:0});const[Dr,br]=await Promise.all([nD.deduplicateApiCall("GET",`test-info-${Ie.test_type}-${Ie.test_id}`,{testType:Ie.test_type,testId:Ie.test_id},()=>Pn.getTestInfo(Ie.test_type,Ie.test_id)),nD.deduplicateApiCall("GET",`test-questions-${Ie.test_type}-${Ie.test_id}`,{testType:Ie.test_type,testId:Ie.test_id},()=>Pn.getTestQuestions(Ie.test_type,Ie.test_id))]);ae(Dr);let Kr=br;try{if(!!Dr?.is_shuffled){const Ze=n?.student_id||n?.id||"unknown",gt=`${Ze}:${Ie.test_type}:${Ie.test_id}`,Tt=Array.from(gt).reduce((or,Or)=>(or<<5)-or+Or.charCodeAt(0),0)>>>0,ir=`test_shuffle_order_${Ze}_${Ie.test_type}_${Ie.test_id}`,Ct=localStorage.getItem(ir);if(Ct){const or=JSON.parse(Ct),Or=new Map(br.map(Lr=>[Lr.question_id,Lr]));Kr=or.map(Lr=>Or.get(Lr)).filter(Boolean)}else{const Or=function(Pr){return function(){var un=Pr+=1831565813;return un=Math.imul(un^un>>>15,un|1),un^=un+Math.imul(un^un>>>7,un|61),((un^un>>>14)>>>0)/4294967296}}(Tt);Kr=[...br];for(let Pr=Kr.length-1;Pr>0;Pr--){const un=Math.floor(Or()*(Pr+1));[Kr[Pr],Kr[un]]=[Kr[un],Kr[Pr]]}const Lr=Kr.map(Pr=>Pr.question_id);localStorage.setItem(ir,JSON.stringify(Lr))}}}catch(Pe){ye.error("Shuffle error (ignored):",Pe)}ne(Kr),Ve();const he=Ie.test_id;if(pt.isRestored&&pt.restoredTestId===he){ye.debug(" Progress already restored for this test - skipping");return}ye.debug(" Starting progress restoration for test:",Ie.test_type,Ie.test_id),ut(Pe=>({...Pe,restorationCount:Pe.restorationCount+1}));const Ce=n?.student_id||n?.id||"unknown",be=`test_progress_${Ce}_${Ie.test_type}_${Ie.test_id}`,pe=localStorage.getItem(be);ye.debug(" Checking main progress key:",be),ye.debug(" Main progress data:",pe);let ke=new Array(br.length).fill("");if(pe)try{const Pe=JSON.parse(pe);ye.debug(" Parsed progress data:",Pe),Pe.answers&&Array.isArray(Pe.answers)&&(ke=Pe.answers,ye.debug(" Loaded answers from main progress:",ke))}catch(Pe){ye.error(" Error parsing main progress:",Pe)}br.forEach((Pe,Ze)=>{const gt=`test_progress_${Ce}_${Ie.test_type}_${Ie.test_id}_${Pe.question_id}`,Tt=localStorage.getItem(gt);if(ye.debug(` Checking individual answer for question ${Pe.question_id}:`,Tt),Tt){const ir=Tt.replace(/^"(.*)"$/,"$1");ke[Ze]=ir,ye.debug(` Loaded individual answer for question ${Pe.question_id}:`,ir)}}),ye.debug(" Final initial answers after loading all sources:",ke);const Ee=ke.filter(Pe=>Pe&&typeof Pe=="string"&&Pe.trim()!=="").length;if(Ee>0){ye.debug(` Restoring progress: ${Ee}/${br.length} questions answered`),V(ke);const Pe=br.length>0?Ee/br.length*100:0;H(Pe),ye.debug(` Progress restored: ${Pe}% complete`)}else ye.debug(" No existing progress found - starting fresh"),V(ke),H(0);ut(Pe=>({...Pe,isRestored:!0,restoredTestId:he})),Ee>0&&(ye.debug(" Existing progress found - preventing overwrite during initialization"),window.skipInitialProgressSave=!0);const Qe=Number(Dr?.allowed_time||0),xt=n?.student_id||n?.id||"unknown";if(Z.current=`test_timer_${xt}_${Ie.test_type}_${Ie.test_id}`,Qe>0)try{const Pe=localStorage.getItem(Z.current),Ze=Date.now();if(Pe){const gt=JSON.parse(Pe),Tt=Math.floor((Ze-new Date(gt.lastTickAt).getTime())/1e3),ir=Math.max(0,Number(gt.remainingSeconds||Qe)-Math.max(0,Tt));I(ir),oe.current=Ze}else I(Qe),oe.current=Ze,localStorage.setItem(Z.current,JSON.stringify({remainingSeconds:Qe,lastTickAt:new Date(Ze).toISOString(),startedAt:new Date(Ze).toISOString()}))}catch(Pe){ye.error("Timer cache init error:",Pe),I(Qe)}else I(0);const rt=new Date;K(rt),ye.debug(" Test timer started at:",rt.toISOString());const ce=n?.student_id||n?.id||"unknown",me=`anti_cheating_${ce}_${Ie.test_type}_${Ie.test_id}`,je=localStorage.getItem(me);if(ye.debug(" Checking for anti-cheating data with key:",me),ye.debug(" Key format: anti_cheating_{studentId}_{testType}_{testId}"),ye.debug(" Current test details:",{testType:Ie.test_type,testId:Ie.test_id,studentId:ce}),je)try{const Pe=JSON.parse(je);ye.debug(" Found existing anti-cheating data for THIS test:",Pe),ye.debug(" Visibility change times for this test:",Pe.tabSwitches||0),ye.debug(" Cheating status for this test:",Pe.isCheating||!1),Pe.isCheating&&(ye.debug(" WARNING: Student has been flagged for cheating in THIS test!"),ye.debug(" Tab switches detected in this test:",Pe.tabSwitches),ve(` Warning: Suspicious activity detected in this test (${Pe.tabSwitches} tab switches). Continued violations may result in test disqualification.`,"warning"))}catch(Pe){ye.error(" Error parsing existing anti-cheating data:",Pe)}else ye.debug(" No existing anti-cheating data found for this test - starting fresh");_t(),ye.debug(" Anti-cheating tracking started"),j("test"),ye.debug(" Test started successfully")}catch(Ve){ye.error(" Error starting test:",Ve),ve("Failed to start test","error"),v("Failed to load test data. Please try again.")}finally{const Ve=Date.now()-Ye,Ot=Math.max(0,250-Ve);setTimeout(()=>{h(!1),x(!1)},Ot),k(!1);try{Ne&&clearTimeout(Ne)}catch{}}},[u]),wr=S.useCallback(async()=>{if(!A||!Q||!te||!B){ve("No test data to submit","error");return}ye.debug(" Submitting test:",A);try{le(!0);const Ie=jf(te,B,A.test_type),Ye=new Date,Ne=W?Math.round((Ye-W)/1e3):0,Ve=W?W.toISOString():Ye.toISOString();ye.debug(" Test timing:",{startedAt:Ve,endTime:Ye.toISOString(),timeTaken:`${Ne} seconds`});const Ge=Jt();ye.debug(" Anti-cheating data for submission:",Ge);const Ot={};te.forEach((ar,Dr)=>{Ot[ar.question_id]=B[Dr]??""}),A.test_type==="drawing"&&(ye.debug(" Drawing test answers being submitted:",B),ye.debug(" Drawing test answers type:",typeof B[0]),ye.debug(" Drawing test answers content:",B[0]));const Ut=await Pn.submitTest(A.test_type,A.test_id,B,{time_taken:(()=>{const ar=Number(Q?.allowed_time||0);return ar>0?Math.min(Ne,ar):Ne})(),started_at:Ve,submitted_at:Ye.toISOString(),answers_by_id:Ot,question_order:te.map(ar=>ar.question_id),caught_cheating:Ge.caught_cheating,visibility_change_times:Ge.visibility_change_times,retest_assignment_id:(()=>{const Dr=`retest_assignment_id_${n?.student_id||n?.id||""}_${A.test_type}_${A.test_id}`,br=localStorage.getItem(Dr);return ye.debug(" Frontend retest key:",Dr),ye.debug(" Frontend retest assignment ID from localStorage:",br),ye.debug(" Frontend retest assignment ID converted:",br?Number(br):null),ye.debug(" Frontend current test data:",A),ye.debug(" Frontend current test retest_assignment_id:",A.retest_assignment_id),br?Number(br):null})(),parent_test_id:A.test_id},n);if(ye.debug(" Test submission result:",Ut),Ut.success){window.recentTestCompleted=!0,ye.debug(" Test completed - cache refresh triggered");const ar=n?.student_id||n?.id||"",Dr=`retest_assignment_id_${ar}_${A.test_type}_${A.test_id}`;if(!!localStorage.getItem(Dr)){const pe=A?.retest_attempts_left||A?.max_attempts||3,ke=(Ut?.percentage_score??0)>=50;if(ke){const Ee=`retest_attempt${pe}_${ar}_${A.test_type}_${A.test_id}`;localStorage.setItem(Ee,"true"),ye.debug(" Passed retest, marking last-slot key:",Ee);let Qe=0;for(let rt=1;rt<=10;rt++){const ce=`retest_attempt${rt}_${ar}_${A.test_type}_${A.test_id}`;localStorage.getItem(ce)==="true"&&Qe++}if(ar&&A.test_type&&A.test_id){const rt=`test_completed_${ar}_${A.test_type}_${A.test_id}`;localStorage.setItem(rt,"true"),ye.debug(" Marked retest as completed (student passed):",rt);const ce=`retest_attempts_${ar}_${A.test_type}_${A.test_id}`;localStorage.setItem(ce,JSON.stringify({used:Qe,max:pe})),ye.debug(" Set retest attempts metadata (student passed):",ce,{used:Qe,max:pe})}const xt=`retest1_${ar}_${A.test_type}_${A.test_id}`;localStorage.removeItem(xt)}else{let Ee=1;for(let me=1;me<=10;me++){const je=`retest_attempt${me}_${ar}_${A.test_type}_${A.test_id}`;if(localStorage.getItem(je)!=="true"){Ee=me;break}}const Qe=`retest_attempt${Ee}_${ar}_${A.test_type}_${A.test_id}`;localStorage.setItem(Qe,"true"),ye.debug(" Marked retest attempt as completed:",Qe);let xt=0;for(let me=1;me<=10;me++){const je=`retest_attempt${me}_${ar}_${A.test_type}_${A.test_id}`;localStorage.getItem(je)==="true"&&xt++}const rt=pe-xt,ce=rt<=0||ke;if(ye.debug(" Retest completion check:",{usedAttempts:xt,maxAttempts:pe,attemptsLeft:rt,passed:ke,shouldComplete:ce}),ce&&ar&&A.test_type&&A.test_id){const me=`test_completed_${ar}_${A.test_type}_${A.test_id}`;localStorage.setItem(me,"true"),ye.debug(" Marked retest as completed (attempts exhausted or passed):",me);const je=`retest_attempts_${ar}_${A.test_type}_${A.test_id}`;localStorage.setItem(je,JSON.stringify({used:xt,max:pe})),ye.debug(" Set retest attempts metadata (attempts exhausted):",je,{used:xt,max:pe})}if(xt>=pe){const me=`retest1_${ar}_${A.test_type}_${A.test_id}`;localStorage.removeItem(me)}}}if(ye.debug(" Marking test as completed..."),await Dt(A.test_type,A.test_id),A.test_type!=="drawing"){ye.debug(" Caching test results after submission...");const ke=`student_results_table_${n?.student_id||n?.id||"unknown"}`,{setCachedData:Ee,CACHE_TTL:Qe}=await Vi(async()=>{const{setCachedData:xt,CACHE_TTL:rt}=await Promise.resolve().then(()=>cp);return{setCachedData:xt,CACHE_TTL:rt}},void 0);Ee(ke,Ut,Qe.student_results_table),ye.debug(" Test results cached with key:",ke)}else ye.debug(" Drawing test submitted - not caching results (will appear after teacher grades)");ye.debug(" Clearing test progress..."),d(A.test_type,A.test_id);try{const pe=n?.student_id||n?.id||"unknown",ke=`test_timer_${pe}_${A.test_type}_${A.test_id}`;localStorage.removeItem(ke);const Ee=`test_shuffle_order_${pe}_${A.test_type}_${A.test_id}`;localStorage.removeItem(Ee)}catch{}if(n?.student_id){const pe=`test_completed_${n.student_id}_${A.test_type}_${A.test_id}`;localStorage.setItem(pe,"true"),ye.debug(" Test marked as completed in localStorage:",pe)}try{const pe=n?.student_id||n?.id||"",ke=`retest1_${pe}_${A.test_type}_${A.test_id}`,Ee=`retest_assignment_id_${pe}_${A.test_type}_${A.test_id}`;localStorage.removeItem(ke),localStorage.removeItem(Ee),ye.debug(" Cleared retest keys:",ke,Ee)}catch(pe){ye.warn("Failed to clear retest keys:",pe)}ye.debug(" Clearing test progress and anti-cheating data for THIS test only...");const Kr=n?.student_id||n?.id||"unknown",he=[],Ce=`test_progress_${Kr}_${A.test_type}_${A.test_id}`,be=`anti_cheating_${Kr}_${A.test_type}_${A.test_id}`;for(let pe=0;pe<localStorage.length;pe++){const ke=localStorage.key(pe);ke&&(ke===Ce||ke===be)&&he.push(ke)}he.forEach(pe=>{localStorage.removeItem(pe),ye.debug(` Cleared for THIS test only: ${pe}`)}),ye.debug(" Clearing anti-cheating data..."),qt(),Ht(),A.test_type!=="drawing"?j("results"):r("/student"),ve("Test submitted successfully!","success"),ye.debug(" Test submitted successfully")}else throw ye.error(" Test submission failed:",Ut.error),new Error(Ut.error||"Failed to submit test")}catch(Ie){ye.error(" Error submitting test:",Ie),ve("Failed to submit test","error")}finally{le(!1)}},[A,Q,te,B,Dt,d]);S.useCallback(()=>(ye.debug(" Collecting test answers..."),B),[B]);const kr=S.useCallback(()=>{if(!te||!B)return;const Ie=B.filter(Ne=>Ne&&typeof Ne=="string"&&Ne.trim()!=="").length,Ye=te.length>0?Ie/te.length*100:0;if(H(Ye),ye.debug(` Progress updated: ${Ie}/${te.length} questions answered (${Math.round(Ye)}%)`),A){const Ne={answers:B,progress:Ye,lastSaved:new Date().toISOString()};l(A.test_type,A.test_id,Ne)}},[te,B,A,l]);S.useEffect(()=>{kr()},[kr]);const zr=S.useCallback(()=>{if(!B)return 0;const Ie=B.filter(Ye=>Ye&&typeof Ye=="string"&&Ye.trim()!=="").length;return ye.debug(" getAnsweredCount:",{studentAnswers:B,answeredCount:Ie,totalQuestions:te?.length}),Ie},[B,te]),Tr=S.useCallback(()=>{if(ye.debug(" Navigating back to cabinet..."),A&&n?.student_id){ye.debug(" Cabinet navigation detected - counting as cheating attempt");const Ye=`anti_cheating_${n?.student_id||n?.id||"unknown"}_${A.test_type}_${A.test_id}`,Ne=localStorage.getItem(Ye);let Ve=0,Ge=!1;if(Ne)try{const Dr=JSON.parse(Ne);Ve=Dr.tabSwitches||0,Ge=Dr.isCheating||!1}catch(Dr){ye.error(" Error parsing existing anti-cheating data:",Dr)}const Ot=Ve+1,Ut=Ot>=2;ye.debug(` Tab switch count: ${Ve}  ${Ot} (cheating: ${Ut})`);const ar={tabSwitches:Ot,isCheating:Ut,lastUpdated:new Date().toISOString()};localStorage.setItem(Ye,JSON.stringify(ar)),ye.debug(" Anti-cheating data updated for cabinet navigation:",ar)}e?e():r("/student")},[e,r,A,n?.student_id]);S.useCallback(()=>{ye.debug(" Showing test results..."),j("results")},[]);const gr=S.useCallback((Ie,Ye,Ne=null)=>{switch(ye.debug(" Formatting student answer for display:",Ie,"testType:",Ye,"question:",Ne),Ye){case rs.MULTIPLE_CHOICE:if(Ie.toString().startsWith("Option "))return Ie;if(Ne&&typeof Ie=="string"&&!isNaN(parseInt(Ie))){const Ve=parseInt(Ie),Ge=`option_${String.fromCharCode(97+Ve)}`,Ot=Ne[Ge];if(Ot)return ye.debug(" Converted",Ie,"to option text:",Ot),Ot;{const Ut=String.fromCharCode(65+Ve);return ye.debug(" Converted",Ie,"to",Ut),Ut}}else{if(typeof Ie=="string"&&isNaN(parseInt(Ie)))return ye.debug(" Already formatted text:",Ie),Ie;{const Ve=String.fromCharCode(65+parseInt(Ie));return ye.debug(" Converted",Ie,"to",Ve),Ve}}case rs.TRUE_FALSE:return Ie==="true"?"True":"False";case rs.INPUT:return Ie;case rs.MATCHING:return typeof Ie=="object"?JSON.stringify(Ie):Ie;case rs.WORD_MATCHING:return typeof Ie=="object"?JSON.stringify(Ie):Ie;case rs.DRAWING:return Ie&&Ie.trim()!==""?"Drawing submitted":"No drawing";case rs.FILL_BLANKS:return Ie;default:return ye.warn(" Unknown test type for answer formatting:",Ye),Ie}},[]),ve=S.useCallback((Ie,Ye)=>{const Ne={id:Date.now(),message:Ie,type:Ye,timestamp:new Date};P(Ve=>[...Ve,Ne]),setTimeout(()=>{P(Ve=>Ve.filter(Ge=>Ge.id!==Ne.id))},Gm.NOTIFICATION_DURATION)},[]);S.useEffect(()=>{kr()},[kr]),S.useEffect(()=>{if(M!=="test")return;const Ie=Number(Q?.allowed_time||0);if(!Ie)return;const Ye=setInterval(()=>{I(Ne=>{const Ve=Math.max(0,Ne-1);try{const Ge=Date.now();oe.current||(oe.current=Ge),Z.current&&localStorage.setItem(Z.current,JSON.stringify({remainingSeconds:Ve,lastTickAt:new Date(Ge).toISOString(),startedAt:W?W.toISOString():new Date(Ge-(Ie-Ve)*1e3).toISOString()}))}catch{}return Ve===0&&wr(),Ve})},1e3);return()=>clearInterval(Ye)},[M,Q?.allowed_time,wr,W]);const Fe=S.useCallback((Ie,Ye)=>{if(!Ie)return null;const Ne=(Ve,Ge)=>{const Ot=[...B];Ot[Ye]=Ge,V(Ot),ye.debug(` Answer changed: question ${Ve} = ${Ge}`),ye.debug(" Updated studentAnswers:",Ot)};switch(A.test_type){case rs.TRUE_FALSE:return c.jsx(kde,{question:Ie,questionIndex:Ye,studentAnswer:B[Ye]||"",onAnswerChange:Ne,mode:"student",testId:A?.test_id,testType:L,displayNumber:Ye+1});case rs.MULTIPLE_CHOICE:return c.jsx(Tde,{question:Ie,questionIndex:Ye,studentAnswer:B[Ye]||"",onAnswerChange:Ne,mode:"student",testId:A?.test_id,testType:L,displayNumber:Ye+1});case rs.INPUT:return c.jsx(Cde,{question:Ie,questionIndex:Ye,studentAnswer:B[Ye]||"",onAnswerChange:Ne,mode:"student",testId:A?.test_id,testType:L,displayNumber:Ye+1});case rs.MATCHING:return ye.error("Matching test reached renderQuestion - this should not happen"),c.jsxs("div",{className:"text-center p-8",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-600 mb-4",children:"Matching Test"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Redirecting to matching test page..."}),c.jsx(lt,{onClick:()=>r("/student"),variant:"primary",children:"Back to Dashboard"})]});case rs.DRAWING:return c.jsx(Ode,{question:Ie,questionIndex:Ye,studentAnswer:B[Ye]||"",onAnswerChange:Ne,mode:"student",testId:A?.test_id,testType:L});case rs.FILL_BLANKS:return Ye===0?c.jsx(Bde,{testText:Q?.test_text,blanks:(te||[]).map((Ve,Ge)=>({id:Ve.question_id||Ge+1,options:Ve.blank_options||[],correct_answer:Ve.correct_answers?.[0]||Ve.correct_answer,question:Ve.question_json||""})),separateType:Q?.separate_type,testId:A?.test_id,testName:Q?.test_name||A?.test_name,teacherId:Q?.teacher_id||A?.teacher_id,subjectId:Q?.subject_id||A?.subject_id,onTestComplete:wr,onAnswerChange:(Ve,Ge)=>{const Ot=te.findIndex(Ut=>Ut.question_id===Ve);if(Ot!==-1){const Ut=[...B];Ut[Ot]=Ge,V(Ut),ye.debug(` Fill Blanks answer changed: question ${Ve} = ${Ge}`)}}},`fill-blanks-${A?.test_id}-${Q?.test_name}`):null;default:return c.jsx("div",{children:"Unsupported question type"})}},[A,B,L]);function Le(){return!A||!Q||!te?null:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("div",{className:"flex justify-between items-center mb-4",children:c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:Q.test_name||Q.title||"Test"})}),c.jsx("div",{className:"mb-4",children:c.jsx(Lde,{answeredCount:zr(),totalQuestions:te.length,percentage:Math.round(R),timeElapsed:Number(Q?.allowed_time||0)>0?U:0,showDetails:!0})})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Answer all questions below:"}),c.jsx("div",{className:"space-y-8",children:te.map((Ie,Ye)=>c.jsx("div",{className:"question-container",children:Fe(Ie,Ye)},Ie.question_id||Ye))})]}),c.jsx("div",{className:"flex justify-center",children:c.jsx(lt,{variant:"primary",size:"lg",onClick:()=>Je(!0),disabled:J||zr()<te.length,loading:J,children:J?"Submitting...":`Submit Test (${zr()}/${te.length})`})})]})}if(f)return c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(ln,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:t?"Starting Test...":"Loading Student Tests..."})]})});if(b)return c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Tests Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:b}),c.jsx(lt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})});return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx($a,{isOpen:He,onClose:()=>It(!1),title:"Exit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(lt,{onClick:()=>It(!1),variant:"secondary",children:"Cancel"}),c.jsx(lt,{onClick:()=>{It(!1),Tr()},variant:"primary",children:"Go Back"})]})]})}),c.jsx($a,{isOpen:Me,onClose:()=>Je(!1),title:"Submit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(lt,{onClick:()=>Je(!1),variant:"secondary",children:"Cancel"}),c.jsx(lt,{onClick:()=>{Je(!1),wr()},variant:"primary",children:"Submit"})]})]})}),c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Test"})}),c.jsx(lt,{variant:"outline",onClick:()=>It(!0),children:"Back to Cabinet"})]})})}),$e&&M==="results"&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mx-4 sm:mx-6 lg:mx-8 mt-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsxs("p",{className:"text-sm text-red-700",children:[c.jsx("strong",{children:"Academic Integrity Warning:"}),"This test has been flagged for suspicious behavior. You have switched tabs ",ze," times during the test."]})})]})}),c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 overflow-y-auto",children:[!t&&M==="list"&&Ue(),M==="test"&&Le(),M==="results"&&Pt()]}),M==="test"&&g&&c.jsxs("div",{className:"fixed inset-0 bg-white/80 backdrop-blur-[1px] flex flex-col items-center justify-center z-50",children:[c.jsx(ln,{size:"lg"}),c.jsx("p",{className:"mt-3 text-gray-700",children:"Preparing your test"}),y&&c.jsx("div",{className:"mt-3 text-sm text-gray-500",children:y})]}),c.jsx(rH,{isOpen:ue,onClose:()=>de(!1),testType:Te?.test_type,testId:Te?.test_id,testName:Te?.test_name,questions:Te?.questions,isLoading:f}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:E.map(Ie=>c.jsx(su,{type:Ie.type,message:Ie.message,onClose:()=>P(Ye=>Ye.filter(Ne=>Ne.id!==Ie.id))},Ie.id))})]});function Ue(){return!a||a.length===0?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"No active tests available for your class."})}):c.jsx("div",{className:"space-y-6",children:a.map((Ie,Ye)=>c.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:Ie.test_name}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Subject:"})," ",Ie.subject]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Teacher:"})," ",Ie.teacher_name]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Type:"})," ",Ie.test_type]})]}),c.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Assigned: ",new Date(Ie.assigned_at).toLocaleDateString()]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx(lt,{variant:"outline",onClick:()=>Rt(Ie),disabled:T||f,children:"View Details"}),c.jsx(lt,{variant:"primary",onClick:()=>Qt(Ie),disabled:T||f,children:T?"Starting...":"Start Test"})]})]})},Ye))})}function Pt(){if(!A||!Q||!te||!B)return null;const Ie={};return B.forEach((Ye,Ne)=>{if(te[Ne]){const Ve=te[Ne].question_id||te[Ne].id||Ne;Ie[String(Ve)]=Ye,ye.debug(" Converting answer:",{index:Ne,questionId:Ve,answer:Ye,question:te[Ne]})}}),ye.debug(" Final answersObject:",Ie),ye.debug(" Questions structure:",te.map(Ye=>({id:Ye.question_id,correct_answer:Ye.correct_answer}))),c.jsx(A0e,{testInfo:Q,questions:te,testType:A.test_type,studentAnswers:Ie,onBackToCabinet:Tr,checkAnswerCorrectness:Up,formatStudentAnswerForDisplay:gr,getCorrectAnswer:kv})}},F0e=()=>{const{testId:e}=T_(),t=fl(),{user:r}=Fs(),{makeAuthenticatedRequest:n}=Bl(),{showNotification:s}=ai(),[a,i]=S.useState(null),[o,l]=S.useState(!0),[u,d]=S.useState(null),[f,h]=S.useState(null),[g,x]=S.useState(!1);x1("matching_type",a?.id);const y=S.useCallback(()=>{if(!r?.student_id||!e)return!1;const N=`test_completed_${r.student_id}_matching_type_${e}`,E=localStorage.getItem(N)==="true",P=`retest1_${r.student_id}_matching_type_${e}`,M=localStorage.getItem(P)==="true";return E&&!M?(ye.debug(" Test already completed, redirecting to cabinet"),s("This test has already been completed","info"),t("/student"),!0):!1},[r?.student_id,e,t,s]),v=S.useCallback(async()=>{if(!e){d("Test ID is required"),l(!1);return}if(!y())try{l(!0),d(null);const N=await n(`/.netlify/functions/get-matching-type-test?test_id=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!N.ok)throw new Error("Failed to load test data");const E=await N.json();if(!E.success)throw new Error(E.message||"Failed to load test");const P=E.data;ye.debug(" Test data from get-matching-type-test:",P);const M=await n(`/.netlify/functions/get-test-questions?test_id=${e}&test_type=matching_type`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!M.ok)throw new Error("Failed to load test questions");const j=await M.json();if(!j.success)throw new Error(j.message||"Failed to load test questions");ye.debug(" Questions data from get-test-questions:",j);const A={id:P.test_id,test_name:P.test_name,teacher_id:P.teacher_id,subject_id:P.subject_id,image_url:P.image_url,image:null,blocks:(()=>{if(Array.isArray(j.questions)&&j.questions.length>0){const O=j.questions[0];return Array.isArray(O.blocks)?O.blocks.map((L,q)=>{let Q=L.block_coordinates||L.coordinates||(typeof L.x=="number"?{x:L.x,y:L.y,width:L.width,height:L.height}:null);if(typeof Q=="string")try{Q=JSON.parse(Q)}catch{Q=null}return(!Q||typeof Q!="object")&&(Q={x:0,y:0,width:30,height:10}),Q={x:(typeof Q.x=="number"?Q.x:Number(Q.x))||0,y:(typeof Q.y=="number"?Q.y:Number(Q.y))||0,width:(typeof Q.width=="number"?Q.width:Number(Q.width))||30,height:(typeof Q.height=="number"?Q.height:Number(Q.height))||10},{id:L.block_id||L.question_id||L.id||q+1,word:L.word||`Word ${q+1}`,coordinates:Q,hasArrow:!!L.has_arrow,arrow:L.arrow||null}}):j.questions.map(L=>{ye.debug(" Processing question:",L);let q;try{q=typeof L.block_coordinates=="string"?JSON.parse(L.block_coordinates):L.block_coordinates}catch{q={x:0,y:0,width:100,height:100}}return(!q||typeof q!="object")&&(q={x:0,y:0,width:100,height:100}),q={x:(typeof q.x=="number"?q.x:Number(q.x))||0,y:(typeof q.y=="number"?q.y:Number(q.y))||0,width:(typeof q.width=="number"?q.width:Number(q.width))||100,height:(typeof q.height=="number"?q.height:Number(q.height))||100},{id:L.question_id,word:L.word,coordinates:q,hasArrow:L.has_arrow,arrow:L.arrow}})}return[]})(),words:(()=>{if(Array.isArray(j.questions)&&j.questions.length>0){const O=j.questions[0];if(Array.isArray(O.words)){const L=O.words,q=Array.isArray(O.blocks)?O.blocks:[];return typeof L[0]=="string"?L.map((ae,te)=>({id:`w_${q[te]?.question_id||q[te]?.block_id||j.questions[te]?.question_id||te+1}_${te}`,word:String(ae),blockId:null,isPlaced:!1,isCorrect:!1})):L.map((ae,te)=>({id:`w_${ae.question_id||ae.id||te+1}_${te}`,word:ae.word||String(ae.text||""),blockId:null,isPlaced:!1,isCorrect:!1}))}return j.questions.map(L=>({id:`w_${L.question_id}`,word:L.word,blockId:null,isPlaced:!1,isCorrect:!1}))}return[]})(),arrows:P.arrows?P.arrows.map(O=>(ye.debug(" Processing arrow:",O),{id:O.id,questionId:O.question_id,blockId:O.block_id||O.question_id,start:{x:Number(O.start_x)||0,y:Number(O.start_y)||0},end:{x:Number(O.end_x)||0,y:Number(O.end_y)||0},rel_start_x:O.rel_start_x!==null?Number(O.rel_start_x):null,rel_start_y:O.rel_start_y!==null?Number(O.rel_start_y):null,rel_end_x:O.rel_end_x!==null?Number(O.rel_end_x):null,rel_end_y:O.rel_end_y!==null?Number(O.rel_end_y):null,image_width:O.image_width?Number(O.image_width):null,image_height:O.image_height?Number(O.image_height):null,style:(typeof O.style=="string"?JSON.parse(O.style):O.style)||{color:"#dc3545",thickness:3}})):[]};if(P.image_url){const O=new Image;O.crossOrigin="anonymous",O.onload=()=>{A.image=O,i(A),l(!1)},O.onerror=()=>{ye.warn("Failed to load test image"),i(A),l(!1)},O.src=P.image_url}else i(A),l(!1)}catch(N){ye.error("Error loading test data:",N),d(N.message||"Failed to load test"),l(!1)}},[e,n]);S.useEffect(()=>{r?.student_id&&v()},[v,r?.student_id]);const T=S.useCallback(async N=>{ye.debug("Test completed:",N),s("Test completed successfully!","success");const E=parseInt(N)||0,P=a?.blocks?.length||a?.words?.length||0,M=P>0?Math.round(E/P*100):0,j={showResults:!0,testInfo:{test_name:a?.test_name||"Test",id:a?.id,test_id:a?.id},testType:"matching_type",score:E,totalQuestions:P,percentage:M,passed:M>=60,questionAnalysis:a?.questions?.map((A,O)=>({questionNumber:O+1,isCorrect:O<E,userAnswer:O<E?`Matched: ${A.word}`:"Not answered",correctAnswer:`Match: ${A.word}`}))||Array.from({length:P},(A,O)=>({questionNumber:O+1,isCorrect:O<E,userAnswer:O<E?"Matched":"Not answered",correctAnswer:"Match required"})),timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};ye.debug(" Using test results data:",j),h(j),x(!0)},[a,s]),k=S.useCallback(()=>{t("/student")},[t]),b=S.useCallback(()=>{x(!1),h(null),v()},[v]);return o?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx($t,{className:"max-w-md w-full",children:c.jsxs($t.Body,{className:"text-center",children:[c.jsx(ln,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading test..."})]})})}):u?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx($t,{className:"max-w-md w-full",children:c.jsxs($t.Body,{className:"text-center",children:[c.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Test"}),c.jsx("p",{className:"text-gray-600 mb-4",children:u}),c.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Dashboard"})]})})}):a?g&&f?c.jsx("div",{className:"bg-gray-50 overflow-y-auto min-h-screen",children:c.jsx(v2,{testResults:f,onBackToCabinet:k,onRetakeTest:b,isLoading:!1})}):c.jsx(Ede,{testData:a,onTestComplete:T,onBackToCabinet:k}):c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx($t,{className:"max-w-md w-full",children:c.jsxs($t.Body,{className:"text-center",children:[c.jsx("div",{className:"text-gray-500 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Test Data"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load test data"}),c.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Dashboard"})]})})})},D0e=()=>{const{testId:e}=T_(),t=fl(),{user:r}=Fs(),{makeAuthenticatedRequest:n}=Bl(),{showNotification:s}=ai(),[a,i]=S.useState(null),[o,l]=S.useState(!0),[u,d]=S.useState(null),[f,h]=S.useState(null),[g,x]=S.useState(!1),y=S.useCallback(()=>{if(!r?.student_id||!e)return!1;const b=`test_completed_${r.student_id}_word_matching_${e}`,N=`retest1_${r.student_id}_word_matching_${e}`;return localStorage.getItem(N)==="true"?!1:localStorage.getItem(b)==="true"},[r?.student_id,e]),v=S.useCallback(async()=>{if(!e){d("Test ID is required"),l(!1);return}if(y()){s("This test has already been completed","warning"),t("/student");return}l(!0),d(null);try{const b=`word_matching_test_${e}`,N=fa(b);if(N){if(ye.debug(" Word matching test loaded from cache:",N),N.id){let M=N,j=Array.isArray(M.correctPairs)?M.correctPairs:M.correctPairs&&typeof M.correctPairs=="object"?Object.keys(M.correctPairs).map(A=>[Number(A),M.correctPairs[A]]).sort((A,O)=>A[0]-O[0]).map(([,A])=>A):null;if(Array.isArray(M.leftWords)&&Array.isArray(M.rightWords)&&Array.isArray(j)){const A=M.rightWords.map((te,ne)=>ne),O=M.leftWords.map((te,ne)=>ne);for(let te=A.length-1;te>0;te--){const ne=Math.floor(Math.random()*(te+1));[A[te],A[ne]]=[A[ne],A[te]]}for(let te=O.length-1;te>0;te--){const ne=Math.floor(Math.random()*(te+1));[O[te],O[ne]]=[O[ne],O[te]]}const L=A.map(te=>M.rightWords[te]),q=O.map(te=>M.leftWords[te]),Q=new Map(A.map((te,ne)=>[te,ne])),ae=O.map(te=>{const ne=j[te];return Q.get(ne)});M={...M,leftWords:q,rightWords:L,correctPairs:ae}}i(M)}else{let j={id:N.test_id,test_id:N.test_id,test_name:N.test_name,teacher_id:N.teacher_id,subject_id:N.subject_id,num_questions:N.num_questions,interaction_type:N.interaction_type,passing_score:N.passing_score,created_at:N.created_at,updated_at:N.updated_at,leftWords:N.leftWords,rightWords:N.rightWords,correctPairs:N.correctPairs,originalPairs:N.originalPairs},A=Array.isArray(j.correctPairs)?j.correctPairs:j.correctPairs&&typeof j.correctPairs=="object"?Object.keys(j.correctPairs).map(O=>[Number(O),j.correctPairs[O]]).sort((O,L)=>O[0]-L[0]).map(([,O])=>O):null;if(Array.isArray(j.leftWords)&&Array.isArray(j.rightWords)&&Array.isArray(A)){const O=j.rightWords.map((ne,B)=>B),L=j.leftWords.map((ne,B)=>B);for(let ne=O.length-1;ne>0;ne--){const B=Math.floor(Math.random()*(ne+1));[O[ne],O[B]]=[O[B],O[ne]]}for(let ne=L.length-1;ne>0;ne--){const B=Math.floor(Math.random()*(ne+1));[L[ne],L[B]]=[L[B],L[ne]]}const q=O.map(ne=>j.rightWords[ne]),Q=L.map(ne=>j.leftWords[ne]),ae=new Map(O.map((ne,B)=>[ne,B])),te=L.map(ne=>{const B=A[ne];return ae.get(B)});j={...j,leftWords:Q,rightWords:q,correctPairs:te}}i(j)}l(!1);return}const P=await(await n(`/.netlify/functions/get-word-matching-test?test_id=${e}`)).json();if(P.success){const M={id:P.data.test_id,test_id:P.data.test_id,test_name:P.data.test_name,teacher_id:P.data.teacher_id,subject_id:P.data.subject_id,num_questions:P.data.num_questions,interaction_type:P.data.interaction_type,passing_score:P.data.passing_score,created_at:P.data.created_at,updated_at:P.data.updated_at,leftWords:P.data.leftWords,rightWords:P.data.rightWords,correctPairs:P.data.correctPairs,originalPairs:P.data.originalPairs};let j=M,A=Array.isArray(j.correctPairs)?j.correctPairs:j.correctPairs&&typeof j.correctPairs=="object"?Object.keys(j.correctPairs).map(O=>[Number(O),j.correctPairs[O]]).sort((O,L)=>O[0]-L[0]).map(([,O])=>O):null;if(Array.isArray(j.leftWords)&&Array.isArray(j.rightWords)&&Array.isArray(A)){const O=j.rightWords.map((ne,B)=>B),L=j.leftWords.map((ne,B)=>B);for(let ne=O.length-1;ne>0;ne--){const B=Math.floor(Math.random()*(ne+1));[O[ne],O[B]]=[O[B],O[ne]]}for(let ne=L.length-1;ne>0;ne--){const B=Math.floor(Math.random()*(ne+1));[L[ne],L[B]]=[L[B],L[ne]]}const q=O.map(ne=>j.rightWords[ne]),Q=L.map(ne=>j.leftWords[ne]),ae=new Map(O.map((ne,B)=>[ne,B])),te=L.map(ne=>{const B=A[ne];return ae.get(B)});j={...j,leftWords:Q,rightWords:q,correctPairs:te}}i(j),qs(b,j,da.word_matching_test),ye.debug(" Word matching test loaded from API and cached:",M)}else throw new Error(P.message||"Failed to load test")}catch(b){ye.error("Error loading word matching test:",b),d(b.message),s("Failed to load test: "+b.message,"error")}finally{l(!1)}},[e,y,n,s,t]),T=S.useCallback(async b=>{ye.debug("Test completed:",b),s("Test completed successfully!","success");const N=parseInt(b)||0,E=a?.num_questions||0,P=E>0?Math.round(N/E*100):0,M={showResults:!0,testInfo:{test_name:a?.test_name||"Test",id:a?.id,test_id:a?.id},testType:"word_matching",score:N,totalQuestions:E,percentage:P,passed:P>=60,questionAnalysis:Array.isArray(a?.correctPairs)?a.correctPairs.map((j,A)=>({questionNumber:A+1,isCorrect:A<N,userAnswer:A<N?`${j.left}  ${j.right}`:"Not answered",correctAnswer:`${j.left}  ${j.right}`})):Array.from({length:E},(j,A)=>({questionNumber:A+1,isCorrect:A<N,userAnswer:A<N?"Matched":"Not answered",correctAnswer:"Match required"})),timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};ye.debug(" Using test results data:",M),h(M),x(!0)},[a,s]),k=S.useCallback(()=>{t("/student")},[t]);return S.useEffect(()=>{v()},[v]),o?c.jsx("div",{className:"flex justify-center items-center min-h-screen",children:c.jsxs($t,{className:"p-8 text-center",children:[c.jsx(ln,{size:"lg",className:"mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading word matching test..."})]})}):u?c.jsx("div",{className:"flex justify-center items-center min-h-screen",children:c.jsx($t,{className:"p-8 text-center",children:c.jsxs("div",{className:"text-red-600 mb-4",children:[c.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error Loading Test"}),c.jsx("p",{className:"text-gray-600 mb-4",children:u}),c.jsx("button",{onClick:()=>t("/student"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Cabinet"})]})})}):a?g&&f?c.jsx("div",{className:"bg-gray-50 overflow-y-auto min-h-screen",children:c.jsx(v2,{testResults:f,onBackToCabinet:()=>{h(null),x(!1),t("/student")},onRetakeTest:(b,N)=>{h(null),x(!1),v()},isLoading:!1})}):c.jsx(ht.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"min-h-screen bg-gray-50 py-8",children:c.jsx(jde,{testData:a,onTestComplete:T,onBackToCabinet:k})}):c.jsx("div",{className:"flex justify-center items-center min-h-screen",children:c.jsx($t,{className:"p-8 text-center",children:c.jsxs("div",{className:"text-gray-600 mb-4",children:[c.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Not Found"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"The requested test could not be found."}),c.jsx("button",{onClick:()=>t("/student"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Cabinet"})]})})})},O0e=S.forwardRef(({onRecordingComplete:e,minDuration:t=0,maxDuration:r=600,minWords:n=50,maxAttempts:s=3,currentAttempt:a=1},i)=>{const[o,l]=S.useState(!1),[u,d]=S.useState(!1),[f,h]=S.useState(0),[g,x]=S.useState(null),[y,v]=S.useState(null),[T,k]=S.useState("good"),b=S.useRef(null),N=S.useRef([]),E=S.useRef(null),P=S.useRef(null),M=S.useRef(null),j=S.useRef(null),A=S.useRef(null);S.useImperativeHandle(i,()=>({startRecording:()=>O(),stopRecording:()=>L(),pauseRecording:()=>q(),resumeRecording:()=>Q()}));const O=S.useCallback(async()=>{try{if(v(null),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox.");if(!window.isSecureContext&&!window.location.hostname.includes("localhost"))throw new Error("Microphone access requires HTTPS. Please use a secure connection.");const V=window.AudioContext||window.webkitAudioContext;M.current||(M.current=new V),M.current.state!=="running"&&await M.current.resume().catch(()=>{}),console.log(" Requesting microphone permission...");const R=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,channelCount:1}});console.log(" Microphone permission granted"),E.current=R;try{let K=document.getElementById("ios-audio-sink");K||(K=document.createElement("audio"),K.id="ios-audio-sink",K.muted=!0,K.playsInline=!0,K.style.display="none",document.body.appendChild(K)),K.srcObject=R,await K.play().catch(()=>{})}catch{}const H=M.current.createAnalyser();M.current.createMediaStreamSource(R).connect(H),H.fftSize=256,j.current=H,ae();let I="audio/webm;codecs=opus";typeof MediaRecorder<"u"&&MediaRecorder.isTypeSupported&&!MediaRecorder.isTypeSupported(I)&&(MediaRecorder.isTypeSupported("audio/mp4")?I="audio/mp4":MediaRecorder.isTypeSupported("audio/aac")?I="audio/aac":I="");const W=new MediaRecorder(R,I?{mimeType:I}:void 0);b.current=W,N.current=[],W.ondataavailable=K=>{K.data.size>0&&N.current.push(K.data)},W.onstop=()=>{const K=I&&I.startsWith("audio/")?I:"audio/webm",Z=new Blob(N.current,{type:K});x(Z),e(Z,f),E.current&&E.current.getTracks().forEach(oe=>oe.stop()),A.current&&cancelAnimationFrame(A.current)},W.start(1e3),l(!0),h(0),P.current=setInterval(()=>{h(K=>{const Z=K+1;return Z>=r&&L(),Z})},1e3)}catch(V){console.error("Error starting recording:",V);const R=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;V.name==="NotAllowedError"?v(R?"Microphone access denied. Please go to Settings > Safari > Microphone and allow access, then refresh the page.":"Microphone access denied. Please allow microphone access in your browser settings and try again."):V.name==="NotFoundError"?v("No microphone found. Please connect a microphone and try again."):V.name==="NotSupportedError"?v("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox."):V.message.includes("HTTPS")?v("Microphone access requires HTTPS. Please use a secure connection."):v(`Failed to access microphone: ${V.message}`)}},[r]),L=S.useCallback(()=>{if(b.current&&o&&(b.current.stop(),l(!1),d(!1),P.current&&clearInterval(P.current),f<t)){v(`Recording must be at least ${t} seconds long.`);return}},[o,f,t,g,e]),q=S.useCallback(()=>{b.current&&o&&!u&&(b.current.pause(),d(!0),P.current&&clearInterval(P.current))},[o,u]),Q=S.useCallback(()=>{b.current&&o&&u&&(b.current.resume(),d(!1),P.current=setInterval(()=>{h(V=>{const R=V+1;return R>=r&&L(),R})},1e3))},[o,u,r,L]),ae=S.useCallback(()=>{if(!j.current)return;const V=j.current,R=new Uint8Array(V.frequencyBinCount),H=()=>{V.getByteFrequencyData(R);const U=R.reduce((I,W)=>I+W,0)/R.length;U<10?k("poor"):U<30?k("fair"):k("good"),o&&(A.current=requestAnimationFrame(H))};H()},[o]),te=V=>{const R=Math.floor(V/60),H=V%60;return`${R}:${H.toString().padStart(2,"0")}`},ne=()=>{switch(T){case"poor":return"text-red-600";case"fair":return"text-yellow-600";case"good":return"text-green-600";default:return"text-gray-600"}},B=()=>{switch(T){case"poor":return"Poor audio quality - speak closer to microphone";case"fair":return"Fair audio quality - good for recording";case"good":return"Excellent audio quality";default:return"Monitoring audio quality..."}};return c.jsxs("div",{className:"audio-recorder bg-white rounded-lg shadow-lg p-3 sm:p-6",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Record Your Response"}),c.jsx("p",{className:"text-gray-600",children:"Speak clearly and at a normal pace. You can pause and resume if needed."})]}),c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:te(f)}),c.jsx("div",{className:`text-sm ${ne()}`,children:B()}),u&&c.jsx("div",{className:"text-yellow-600 font-semibold mt-2",children:" Recording Paused"})]}),o&&c.jsx("div",{className:"mb-6",children:c.jsx("div",{className:"flex justify-center items-center space-x-1 h-8",children:Array.from({length:20},(V,R)=>c.jsx("div",{className:"bg-blue-400 rounded-sm",style:{width:"4px",height:`${Math.random()*20+4}px`,animation:"pulse 0.5s ease-in-out infinite"}},R))})}),c.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-center mb-6",children:o?c.jsxs(c.Fragment,{children:[u?c.jsxs("button",{onClick:Q,className:"w-full sm:w-auto bg-green-600 text-white px-6 py-4 rounded-full hover:bg-green-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("span",{children:"Resume"})]}):c.jsxs("button",{onClick:q,className:"w-full sm:w-auto bg-yellow-600 text-white px-6 py-4 rounded-full hover:bg-yellow-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("span",{children:"Pause"})]}),c.jsxs("button",{onClick:L,className:"w-full sm:w-auto bg-gray-600 text-white px-6 py-4 rounded-full hover:bg-gray-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("span",{children:"Stop & Submit"})]})]}):c.jsxs("button",{onClick:O,className:"w-full sm:w-auto bg-red-600 text-white px-6 py-4 rounded-full hover:bg-red-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("span",{children:"Start Recording"})]})}),y&&c.jsx("div",{className:"mt-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-800",children:y})}),c.jsxs("div",{className:"mt-4 text-center text-sm text-gray-600",children:["Attempt ",a," of ",s,a<s&&c.jsx("span",{className:"ml-2 text-blue-600",children:"(You can re-record if needed)"})]})]})}),mH=({audioBlob:e,audioUrl:t,recordingTime:r,className:n=""})=>{const[s,a]=S.useState(!1),[i,o]=S.useState(0),[l,u]=S.useState(0),[d,f]=S.useState(1),[h,g]=S.useState(1),[x,y]=S.useState(!0),[v,T]=S.useState(""),[k,b]=S.useState(!1),[N,E]=S.useState(null),[P,M]=S.useState(!1),j=S.useRef(null),A=S.useRef(null),O=S.useRef(!1);S.useEffect(()=>()=>{O.current=!0},[]),S.useEffect(()=>{let R=!1;if(t)R||T(t);else if(e){if(!e||e.size===0){R||y(!1);return}if(!(e instanceof Blob)){console.error("audioBlob is not a Blob:",typeof e,e),R||y(!1);return}const H=URL.createObjectURL(e);return R||T(H),()=>{R=!0,URL.revokeObjectURL(H)}}return()=>{R=!0}},[e,t]),S.useEffect(()=>{let R=!1;const H=I=>{try{const W=new URL(I);return/\/storage\/v1\/object\/public\//.test(W.pathname)}catch{return!1}};async function U(I){if(!I||P||/\/object\/sign\//.test(I)||!H(I))return I;try{const K=new URL(I).pathname.replace(/^\/storage\/v1\/object\/public\//,""),Z=K.split("/")[0],oe=K.substring(Z.length+1),J=await fetch(`/.netlify/functions/get-speaking-test-new?action=sign-audio&bucket=${encodeURIComponent(Z)}&file_path=${encodeURIComponent(oe)}`);if(J.ok){const{url:le}=await J.json();if(!R&&!O.current){M(!0);try{await fetch(le,{headers:{Range:"bytes=0-1"},mode:"cors"})}catch{}T(le)}return le}}catch{}return I}return(async()=>{if(t){const I=await U(t);try{await fetch(I,{headers:{Range:"bytes=0-1"},mode:"cors"})}catch{}!R&&!O.current&&!P&&T(I)}})(),()=>{R=!0}},[t,P]),S.useEffect(()=>{let R=!1;return v&&(R||(b(!1),E(null),y(!0))),()=>{R=!0}},[v]),S.useEffect(()=>{if(j.current&&v){const R=j.current;let H=!1;try{R.src=v}catch{}R.load();const U=()=>{if(H||O.current)return;let ie=R.duration;if(ie===1/0)try{R.currentTime=1e101,R.ontimeupdate=()=>{if(H||O.current)return;R.ontimeupdate=null;const xe=R.duration;H||(u(isFinite(xe)&&xe>0?xe:0),R.currentTime=0,y(!1))};return}catch(xe){console.warn("Seek trick failed:",xe)}if(isNaN(ie)||!isFinite(ie)||ie<=0){const xe=R.seekable&&R.seekable.length>0&&isFinite(R.seekable.end(0)),Ae=!xe&&R.buffered&&R.buffered.length>0&&isFinite(R.buffered.end(R.buffered.length-1));xe?ie=R.seekable.end(0):Ae&&(ie=R.buffered.end(R.buffered.length-1))}isNaN(ie)||!isFinite(ie)||ie<=0?(console.warn("Invalid audio duration after fallbacks:",ie),r&&r>0?H||u(r):H||u(0)):H||u(ie),H||y(!1)},I=()=>{H||O.current||U()},W=()=>{H||O.current||U()},K=()=>{H||O.current||U()},Z=()=>{H||O.current||U()},oe=()=>{H||O.current||o(R.currentTime)},J=()=>{H||O.current||(a(!1),o(0))},le=()=>{H||O.current||a(!0)},ue=()=>{H||O.current||a(!1)},de=ie=>{if(H||O.current)return;console.error("Audio loading error:",ie),console.error("Audio error details:",{error:R.error,networkState:R.networkState,readyState:R.readyState,src:R.src,currentSrc:R.currentSrc});const xe=R.error?.code;xe===4&&b(!0),E(R.error||{code:xe}),y(!1)},Te=setTimeout(()=>{H||O.current||R.readyState===0&&y(!1)},6e3);return R.addEventListener("loadedmetadata",I),R.addEventListener("durationchange",W),R.addEventListener("canplay",K),R.addEventListener("canplaythrough",Z),R.addEventListener("timeupdate",oe),R.addEventListener("ended",J),R.addEventListener("play",le),R.addEventListener("pause",ue),R.addEventListener("error",de),()=>{H=!0,clearTimeout(Te),R.removeEventListener("loadedmetadata",I),R.removeEventListener("durationchange",W),R.removeEventListener("canplay",K),R.removeEventListener("canplaythrough",Z),R.removeEventListener("timeupdate",oe),R.removeEventListener("ended",J),R.removeEventListener("play",le),R.removeEventListener("pause",ue),R.removeEventListener("error",de),R.pause(),R.src="",R.load()}}},[v,r]),S.useEffect(()=>{let R=!1;return r&&r>0&&(isNaN(l)||!isFinite(l)||l<=0)&&(R||u(r)),()=>{R=!0}},[r,l]);const L=()=>{j.current&&(s?j.current.pause():j.current.play().catch(R=>{console.error("Play failed:",R)}))},q=R=>{if(j.current&&A.current&&l>0){const H=A.current.getBoundingClientRect(),U=R.clientX-H.left,I=H.width,W=Math.max(0,Math.min(l,U/I*l));isFinite(W)&&W>=0&&(j.current.currentTime=W,o(W))}},Q=R=>{const H=parseFloat(R.target.value);f(H),j.current&&(j.current.volume=H)},ae=R=>{const H=parseFloat(R.target.value);g(H),j.current&&(j.current.playbackRate=H)},te=R=>{if(isNaN(R))return"0:00";const H=Math.floor(R/60),U=Math.floor(R%60);return`${H}:${U.toString().padStart(2,"0")}`};if(!e&&!t)return c.jsx("div",{className:`audio-player ${n}`,children:c.jsx("div",{className:"text-center text-gray-500 py-8",children:"No audio available"})});const B=(R=>{try{const U=(R||"").toLowerCase().split("?")[0].split("#")[0];return U.endsWith(".webm")?"audio/webm":U.endsWith(".mp3")?"audio/mpeg":U.endsWith(".m4a")?"audio/mp4":U.endsWith(".aac")?"audio/aac":U.endsWith(".wav")?"audio/wav":void 0}catch{return}})(v||t),V=la.useMemo(()=>typeof window>"u"?!0:document.createElement("audio").canPlayType("audio/webm")!=="",[]);return c.jsxs("div",{className:`audio-player bg-gray-50 rounded-lg p-4 ${n}`,children:[c.jsx("audio",{ref:j,preload:"metadata",controls:!1,style:{display:"none"},crossOrigin:"anonymous",children:c.jsx("source",{src:v,type:B})}),x?c.jsxs("div",{className:"text-center py-4",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),c.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading audio..."})]}):k?c.jsxs("div",{className:"text-center py-4",children:[c.jsx("p",{className:"text-sm text-red-600",children:"This audio format isn't supported by your browser."}),v?c.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-sm",children:"Open in new tab"}):null,B?c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Detected type: ",B]}):null,c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Browser WebM support: ",V?"Yes":"No",!V&&" - Try using Chrome, Firefox, or Edge"]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Preferred format: WebM"})]}):N?c.jsxs("div",{className:"text-center py-4",children:[c.jsx("p",{className:"text-sm text-red-600",children:"Playback failed. Please try opening the audio directly."}),v?c.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-sm",children:"Open in new tab"}):null,B?c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Detected type: ",B]}):null]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("div",{ref:A,className:"w-full bg-gray-200 rounded-full h-3 cursor-pointer hover:h-4 transition-all min-h-[24px]",onClick:q,children:c.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all",style:{width:`${i/l*100}%`}})}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mt-2 font-medium",children:[c.jsx("span",{children:te(i)}),c.jsx("span",{children:te(l)})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("button",{onClick:L,className:"bg-blue-600 text-white p-3 rounded-full hover:bg-blue-700 transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center",children:s?c.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):c.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.617 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.617l3.766-3.793a1 1 0 011.617.793zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:d,onChange:Q,className:"w-24 h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer min-h-[20px]"}),c.jsxs("span",{className:"text-sm text-gray-600 w-10 font-medium",children:[Math.round(d*100),"%"]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Speed:"}),c.jsxs("select",{value:h,onChange:ae,className:"text-sm border border-gray-300 rounded px-2 py-1",children:[c.jsx("option",{value:"0.5",children:"0.5x"}),c.jsx("option",{value:"0.75",children:"0.75x"}),c.jsx("option",{value:"1",children:"1x"}),c.jsx("option",{value:"1.25",children:"1.25x"}),c.jsx("option",{value:"1.5",children:"1.5x"}),c.jsx("option",{value:"2",children:"2x"})]})]})]})]})]})},I0e=({transcript:e,scores:t,audioBlob:r,recordingTime:n,onReRecord:s,onFinalSubmit:a,canReRecord:i,attemptNumber:o,maxAttempts:l,isSubmitting:u=!1})=>{const[d,f]=S.useState(!1);console.log(" FeedbackDisplay received recordingTime:",n);const h=(v,T)=>{const k=v/T*100;return k>=80?"text-green-600":k>=60?"text-yellow-600":"text-red-600"},g=(v,T)=>{const k=v/T*100;return k>=90?"A+":k>=80?"A":k>=70?"B":k>=60?"C":k>=50?"D":"F"},x=()=>g(t?.overall_score||0,100),y=()=>h(t?.overall_score||0,100);return console.log(" FeedbackDisplay received scores:",t),console.log(" Individual score values:",{grammar_score:t?.grammar_score,vocabulary_score:t?.vocabulary_score,pronunciation_score:t?.pronunciation_score,fluency_score:t?.fluency_score,content_score:t?.content_score}),c.jsxs("div",{className:"feedback-display bg-white rounded-lg shadow-lg p-3 sm:p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Speaking Test Results"}),c.jsx("p",{className:"text-gray-600",children:"Review your performance and decide whether to submit or re-record."})]}),c.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-3 sm:p-6 rounded-lg mb-6",children:c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:`text-4xl font-bold ${y()}`,children:[t?.overall_score||0,"/100"]}),c.jsxs("div",{className:`text-2xl font-semibold ${y()} mt-2`,children:["Grade: ",x()]}),c.jsx("div",{className:"text-gray-600 mt-2",children:t?.overall_score>=80?"Excellent work!":t?.overall_score>=60?"Good job!":t?.overall_score>=50?"Not bad, but could be better.":"Keep practicing!"})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Grammar"}),c.jsxs("span",{className:`font-bold ${h(t?.grammar_score||0,25)}`,children:[t?.grammar_score||0,"/25"]})]}),c.jsxs("div",{className:"text-sm text-gray-600",children:[t?.grammar_mistakes||0," mistakes found"]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min((t?.grammar_score||0)/25*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Vocabulary"}),c.jsxs("span",{className:`font-bold ${h(t?.vocabulary_score||0,20)}`,children:[t?.vocabulary_score||0,"/20"]})]}),c.jsxs("div",{className:"text-sm text-gray-600",children:[t?.vocabulary_mistakes||0," vocabulary issues"]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${Math.min((t?.vocabulary_score||0)/20*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Pronunciation"}),c.jsxs("span",{className:`font-bold ${h(t?.pronunciation_score||0,15)}`,children:[t?.pronunciation_score||0,"/15"]})]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Clarity and accuracy"}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:`${Math.min((t?.pronunciation_score||0)/15*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Fluency"}),c.jsxs("span",{className:`font-bold ${h(t?.fluency_score||0,20)}`,children:[t?.fluency_score||0,"/20"]})]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Pace, pauses, and flow"}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min((t?.fluency_score||0)/20*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Content"}),c.jsxs("span",{className:`font-bold ${h(t?.content_score||0,20)}`,children:[t?.content_score||0,"/20"]})]}),c.jsx("div",{className:"text-sm text-gray-600",children:"How well addressed the prompt"}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:`${Math.min((t?.content_score||0)/20*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Word Count"}),c.jsxs("span",{className:"font-bold text-gray-700",children:[t?.word_count||0," words"]})]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Total words spoken"}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-gray-600 h-2 rounded-full",style:{width:`${Math.min((t?.word_count||0)/100*100,100)}%`}})})]})]}),r&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Your Recording"}),c.jsx(mH,{audioBlob:r,recordingTime:n})]}),t?.feedback&&c.jsx("div",{className:"mb-6 bg-gradient-to-r from-green-50 to-blue-50 p-3 sm:p-6 rounded-lg border border-green-200",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("span",{className:"text-green-600 text-2xl",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-semibold text-green-800 mb-3 text-lg",children:"AI Feedback"}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:t.feedback})]})]})}),t?.improved_transcript&&c.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex items-start space-x-2 mb-3",children:[c.jsx("span",{className:"text-green-600 text-lg",children:""}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Improved Version"}),c.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Here's how your response could be improved with better grammar and vocabulary:"})]})]}),c.jsx("div",{className:"bg-white border border-green-200 rounded p-3",children:c.jsx("p",{className:"text-gray-800 leading-relaxed",children:t.improved_transcript})})]}),c.jsx("div",{className:"mb-6",children:c.jsx("button",{onClick:()=>f(!d),className:"text-blue-600 hover:text-blue-800 text-sm",children:d?"Hide Details":"Show Details"})}),d&&c.jsxs("div",{className:"mb-6 bg-blue-50 p-3 sm:p-4 rounded-lg",children:[c.jsx("h4",{className:"font-semibold mb-3",children:"Detailed Analysis"}),c.jsxs("div",{className:"space-y-3 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Word Count Analysis:"}),c.jsxs("span",{className:"ml-2 text-gray-700",children:["You spoke ",t?.word_count||0," words.",t?.word_count>=50?" Great job meeting the minimum requirement!":" Consider speaking more to meet the minimum word requirement."]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Grammar Analysis:"}),c.jsx("span",{className:"ml-2 text-gray-700",children:t?.grammar_mistakes===0?"Perfect grammar!":`Found ${t?.grammar_mistakes||0} grammar ${t?.grammar_mistakes===1?"mistake":"mistakes"}.`}),t?.grammar_corrections&&t.grammar_corrections.length>0&&c.jsx("div",{className:"mt-2 space-y-2",children:t.grammar_corrections.map((v,T)=>c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-2 sm:p-3",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx("span",{className:"text-red-600 font-mono text-sm",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-red-600",children:v.mistake}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{className:"font-medium text-green-600",children:v.correction})]}),c.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[c.jsx("strong",{children:"Explanation:"})," ",v.explanation]})]})]})},T))})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Vocabulary Analysis:"}),c.jsx("span",{className:"ml-2 text-gray-700",children:t?.vocabulary_mistakes===0?"Excellent vocabulary usage!":`Found ${t?.vocabulary_mistakes||0} vocabulary ${t?.vocabulary_mistakes===1?"issue":"issues"}.`}),t?.vocabulary_corrections&&t.vocabulary_corrections.length>0&&c.jsx("div",{className:"mt-2 space-y-2",children:t.vocabulary_corrections.map((v,T)=>c.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded p-2 sm:p-3",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx("span",{className:"text-purple-600 font-mono text-sm",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-purple-600",children:v.mistake}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{className:"font-medium text-green-600",children:v.correction})]}),c.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[c.jsx("strong",{children:"Explanation:"})," ",v.explanation]})]})]})},T))})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Pronunciation Analysis:"}),c.jsx("span",{className:"ml-2 text-gray-700",children:t?.pronunciation_corrections&&t.pronunciation_corrections.length>0?`Found ${t.pronunciation_corrections.length} pronunciation ${t.pronunciation_corrections.length===1?"tip":"tips"} to help improve clarity.`:"Great pronunciation! Your speech was clear and easy to understand."})]}),t?.pronunciation_corrections&&t.pronunciation_corrections.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Pronunciation Tips:"}),c.jsx("div",{className:"mt-2 space-y-2",children:t.pronunciation_corrections.map((v,T)=>c.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded p-2 sm:p-3",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx("span",{className:"text-orange-600 font-mono text-sm",children:""}),c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-orange-700",children:v.word}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{className:"font-medium text-green-700",children:v.correction})]})})]})},T))})]}),t?.language_use_corrections&&t.language_use_corrections.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Language Use Suggestions:"}),c.jsx("div",{className:"mt-2 space-y-2",children:t.language_use_corrections.map((v,T)=>c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 sm:p-3",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx("span",{className:"text-blue-600 font-mono text-sm",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-blue-700",children:v.mistake}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{className:"font-medium text-green-700",children:v.suggestion})]}),v.explanation&&c.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:[c.jsx("strong",{children:"Why:"})," ",v.explanation]})]})]})},T))})]})]})]}),c.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:["Attempt ",o," of ",l]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center justify-center",children:[i&&c.jsxs("button",{onClick:s,className:"w-full sm:w-auto bg-yellow-600 text-white px-4 py-2.5 rounded-lg hover:bg-yellow-700 flex items-center justify-center space-x-2 min-h-[40px] text-base font-medium",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Re-record"})]}),c.jsx("button",{onClick:a,disabled:u,className:`w-full sm:w-auto px-4 py-2.5 rounded-lg flex items-center justify-center space-x-2 min-h-[40px] text-base font-medium ${u?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"} text-white`,children:u?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Submitting..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Submit Final"})]})})]}),!i&&c.jsx("div",{className:"mt-4 p-2 sm:p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:c.jsxs("p",{className:"text-yellow-800 text-sm",children:[c.jsx("strong",{children:"Maximum attempts reached."}),' This is your final attempt. Click "Submit Final" to complete the test.']})})]})},R0e=({testData:e,onComplete:t,onExit:r,onTestComplete:n})=>{const[s,a]=S.useState("recording"),[i,o]=S.useState(null),[l,u]=S.useState(""),[d,f]=S.useState(null),[h,g]=S.useState(!1),[x,y]=S.useState(!1),[v,T]=S.useState(!1),[k,b]=S.useState(null),[N,E]=S.useState(1),[P]=S.useState(e.max_attempts||3),[M,j]=S.useState(!1),[A,O]=S.useState(0),[L,q]=S.useState(!1),[Q,ae]=S.useState(0),[te,ne]=S.useState(null),B=Bl(),{user:V}=Fs(),{makeAuthenticatedRequest:R}=B,H=S.useRef(null);S.useEffect(()=>{if(e?.test_id&&V?.student_id){const de=`speaking_attempts_${V.student_id}_${e.test_id}`,Te=localStorage.getItem(de);if(Te){const ie=parseInt(Te,10);ie>0&&ie<=P&&(E(ie),console.log(" Loaded attempts from localStorage:",ie))}}},[e,V,P]),S.useEffect(()=>{if(e&&!te){const de=new Date;ne(de),console.log(" Speaking test timer started at:",de.toISOString())}},[e,te]),S.useEffect(()=>{let de=0;s==="recording"?de=25:s==="processing"?de=50:s==="feedback"?de=75:s==="completed"&&(de=100),ae(de)},[s]),S.useEffect(()=>{(async()=>{try{if(!window.isSecureContext&&!window.location.hostname.includes("localhost")){b("Microphone access requires HTTPS. Please use a secure connection.");return}if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){b("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox.");return}if(navigator.permissions)try{(await navigator.permissions.query({name:"microphone"})).state==="granted"?(j(!0),console.log(" Microphone permission already granted")):console.log(" Microphone permission not yet granted - user will need to click record button")}catch(Te){console.log(" Could not check microphone permission status:",Te)}}catch(Te){console.error(" Error checking microphone permission:",Te)}})()},[]),S.useEffect(()=>{const de=setInterval(()=>{i&&s==="recording"&&U()},3e4);return()=>clearInterval(de)},[i,s]);const U=S.useCallback(async()=>{try{const de={test_id:e.test_id,audio_blob:i?await I(i):null,attempt_number:N,step:s,timestamp:new Date().toISOString()};localStorage.setItem(`speaking_progress_${e.test_id}`,JSON.stringify(de))}catch(de){console.error("Failed to save progress:",de)}},[e.test_id,i,N,s]),I=de=>new Promise((Te,ie)=>{const xe=new FileReader;xe.onloadend=()=>{const Me=xe.result.split(",")[1];Te(Me)},xe.onerror=ie,xe.readAsDataURL(de)}),W=S.useCallback(de=>{if(e?.test_id&&V?.student_id){const Te=`speaking_attempts_${V.student_id}_${e.test_id}`;localStorage.setItem(Te,de.toString()),console.log(" Saved attempts to localStorage:",de)}},[e,V]),K=S.useCallback(async(de,Te,ie,xe,Ae)=>{if(e?.test_id&&V?.student_id)try{const{setCachedData:Me,CACHE_TTL:Je}=await Vi(async()=>{const{setCachedData:kt,CACHE_TTL:pt}=await Promise.resolve().then(()=>cp);return{setCachedData:kt,CACHE_TTL:pt}},void 0),He=`speaking_test_data_${V.student_id}_${e.test_id}`,it={audioBlob:de?await I(de):null,transcript:Te,scores:ie,recordingTime:xe,currentStep:Ae,timestamp:Date.now()};Me(He,it,Je.speaking_test_data),console.log(" Saved speaking test data to cache:",He)}catch(Me){console.error("Failed to save speaking test data to cache:",Me)}},[e,V]),Z=S.useCallback(async()=>{if(e?.test_id&&V?.student_id)try{const{getCachedData:de}=await Vi(async()=>{const{getCachedData:xe}=await Promise.resolve().then(()=>cp);return{getCachedData:xe}},void 0),Te=`speaking_test_data_${V.student_id}_${e.test_id}`,ie=de(Te);if(ie){if(console.log(" Loaded speaking test data from cache:",ie),ie.audioBlob){const xe=new Blob([Uint8Array.from(atob(ie.audioBlob),Ae=>Ae.charCodeAt(0))],{type:"audio/webm"});o(xe)}return ie.transcript&&u(ie.transcript),ie.scores&&f(ie.scores),ie.recordingTime&&O(ie.recordingTime),ie.currentStep&&a(ie.currentStep),!0}}catch(de){console.error("Failed to load speaking test data from cache:",de)}return!1},[e,V]);S.useEffect(()=>{if(e?.test_id&&V?.student_id){try{const de=V.student_id,Te=`retest_assignment_id_${de}_speaking_${e.test_id}`,ie=`retest_in_progress_${de}_speaking_${e.test_id}`;if(!!localStorage.getItem(Te)||!!localStorage.getItem(ie)){const Ae=`speaking_test_data_${de}_${e.test_id}`,Me=`anti_cheating_${de}_speaking_${e.test_id}`,Je=`speaking_progress_${e.test_id}`;localStorage.removeItem(Ae),localStorage.removeItem(Me),localStorage.removeItem(Je),console.log(" Cleared speaking per-test cache for retest start:",{cacheKey:Ae,antiCheatKey:Me,progressKey:Je})}}catch{}Z()}},[e,V,Z]),S.useEffect(()=>{e?.test_id&&V?.student_id&&(i||l||d)&&K(i,l,d,A,s)},[i,l,d,A,s,e,V,K]);const oe=S.useCallback(async(de,Te)=>{if(L){console.log(" Already processing, skipping duplicate call");return}console.log(" Recording completed, duration:",Te),q(!0),o(de),O(Te),a("processing"),b(null);try{const ie=await I(de),xe=new Date,Ae=e.start_time?Math.round((xe-e.start_time)/1e3):0,Me=e.start_time?new Date(e.start_time).toISOString():xe.toISOString(),Je=V.student_id,He=`retest_assignment_id_${Je}_speaking_${e.test_id}`,It=localStorage.getItem(He),it={test_id:e.test_id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:Je,question_id:e.question_id||1,audio_blob:ie,audio_duration:de.duration||0,time_taken:Ae,started_at:Me,submitted_at:xe.toISOString(),caught_cheating:!1,visibility_change_times:0,is_completed:!0,retest_assignment_id:It?Number(It):null,parent_test_id:e.test_id};console.log(" Submitting speaking test:",it),console.log(" Processing audio with AI...");try{const pt=await(await R("/.netlify/functions/process-speaking-audio-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e.test_id,question_id:e.question_id||1,audio_blob:ie})})).json();if(pt.success){console.log(" AI Analysis Result:",pt),u(pt.transcript);const ut=pt.transcript?pt.transcript.split(/\s+/).filter(Jt=>Jt.length>0).length:0;console.log(" Word Count Verification:",{aiCount:pt.word_count,actualCount:ut,transcript:pt.transcript});const _t=ut,qt={overall_score:pt.overall_score,word_count:_t,grammar_score:pt.grammar_score,vocabulary_score:pt.vocabulary_score,pronunciation_score:pt.pronunciation_score,fluency_score:pt.fluency_score,content_score:pt.content_score,grammar_mistakes:pt.grammar_mistakes,vocabulary_mistakes:pt.vocabulary_mistakes,feedback:pt.feedback,improved_transcript:pt.improved_transcript,grammar_corrections:pt.grammar_corrections||[],vocabulary_corrections:pt.vocabulary_corrections||[],language_use_corrections:pt.language_use_corrections||[],pronunciation_corrections:pt.pronunciation_corrections||[],ai_feedback:pt.ai_feedback||null};console.log(" Mapped Scores:",qt),console.log(" Individual scores check:",{grammar_score:pt.grammar_score,vocabulary_score:pt.vocabulary_score,pronunciation_score:pt.pronunciation_score,fluency_score:pt.fluency_score,content_score:pt.content_score}),f(qt),a("feedback")}else throw new Error(pt.message||"Failed to process audio with AI");localStorage.removeItem(`speaking_progress_${e.test_id}`)}catch(kt){console.error("Speaking test submission error:",kt),kt.message.includes("No valid authentication token found")?(b("Your session has expired. Please refresh the page and try again."),setTimeout(()=>{window.location.reload()},3e3)):b(kt.message),a("recording")}}catch(ie){console.error("Speaking test submission error:",ie),b(ie.message),a("recording")}finally{q(!1)}},[e,V,R,N,W,L]);S.useEffect(()=>{s==="processing"&&!l&&!d&&(console.log(' Detected stuck "processing" state on reload. Attempting recovery...'),i?(console.log(" Resuming processing from cached audio blob..."),oe(i,A)):(console.log(" No cached audio blob found. Resetting to recording step."),a("recording")))},[s,l,d,i,A,oe]);const J=S.useCallback(()=>{if(N<P){o(null),u(""),f(null),b(null),q(!1);const de=N+1;E(de),W(de),a("recording")}else b("Maximum attempts reached")},[N,P,W]),le=S.useCallback(async()=>{if(!(!l||!d)){g(!0);try{const de=new Date,Te=e.start_time?Math.round((de-e.start_time)/1e3):0,ie=e.start_time?new Date(e.start_time).toISOString():de.toISOString(),xe=V.student_id,Ae=`retest_assignment_id_${xe}_speaking_${e.test_id}`,Me=localStorage.getItem(Ae),{academicCalendarService:Je}=await Vi(async()=>{const{academicCalendarService:ut}=await Promise.resolve().then(()=>n3);return{academicCalendarService:ut}},void 0);await Je.loadAcademicCalendar();const It=Je.getCurrentTerm()?.id;if(!It)throw new Error("No current academic period found");const it={test_id:e.test_id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:xe,academic_period_id:It,question_id:e.question_id||1,audio_blob:i?await I(i):null,audio_duration:i?.duration||0,time_taken:Te,started_at:ie,submitted_at:de.toISOString(),caught_cheating:!1,visibility_change_times:0,is_completed:!0,retest_assignment_id:Me?Number(Me):null,parent_test_id:e.test_id,transcript:l,scores:d,final_submission:!0};console.log(" Final submission:",it),console.log(" Making final submission request...");const kt=await R("/.netlify/functions/submit-speaking-test-final",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)});console.log(" Final submission response status:",kt.status);const pt=await kt.json();if(console.log(" Final submission result:",pt),pt.success){if(V?.student_id){const nt=`test_completed_${V.student_id}_speaking_${e.test_id}`;localStorage.setItem(nt,"true"),console.log(" Speaking test marked as completed in localStorage:",nt);const Dt=`retest_in_progress_${V.student_id}_speaking_${e.test_id}`;localStorage.removeItem(Dt),console.log(" Cleared in-progress retest lock:",Dt);const Rt=`speaking_attempts_${V.student_id}_${e.test_id}`;localStorage.removeItem(Rt),console.log(" Cleared attempts from localStorage upon submission");const{clearTestData:Qt}=await Vi(async()=>{const{clearTestData:wr}=await Promise.resolve().then(()=>cp);return{clearTestData:wr}},void 0);Qt(V.student_id,"speaking_test_data",e.test_id),console.log(" Cleared speaking test data from cache upon submission");try{const wr=`anti_cheating_${V.student_id}_speaking_${e.test_id}`;localStorage.removeItem(wr),console.log(" Cleared anti-cheating key:",wr)}catch{}}console.log(" Caching speaking test results after submission...");const _t=`student_results_table_${V?.student_id||V?.id||"unknown"}`,{setCachedData:qt,getCachedData:Jt,CACHE_TTL:Ht,clearTestData:$e}=await Vi(async()=>{const{setCachedData:nt,getCachedData:Dt,CACHE_TTL:Rt,clearTestData:Qt}=await Promise.resolve().then(()=>cp);return{setCachedData:nt,getCachedData:Dt,CACHE_TTL:Rt,clearTestData:Qt}},void 0),ze={id:Date.now(),test_id:e.test_id,test_type:"speaking",test_name:e.test_name,score:Math.round(d.overall_score/10),max_score:10,percentage:d.overall_score,caught_cheating:!1,visibility_change_times:0,is_completed:!0,submitted_at:new Date().toISOString(),subject:"Listening and Speaking",teacher_name:e.teacher_name||"Unknown"};let tt={success:!0,results:[],count:0};try{const nt=Jt(_t);nt&&Array.isArray(nt.results)&&(tt.results=nt.results.slice())}catch{}if(tt.results.unshift(ze),tt.count=tt.results.length,qt(_t,tt,Ht.student_results_table),console.log(" Speaking test results cached (merged) with key:",_t),V?.student_id&&$e(V.student_id,"speaking",e.test_id),!!Me&&V?.student_id){let nt=3;try{const Qt=localStorage.getItem(`student_active_tests_${V.student_id}`);if(Qt){const kr=JSON.parse(Qt)?.tests?.find(zr=>zr.test_id===e.test_id&&zr.test_type==="speaking");kr&&(nt=kr.retest_attempts_left||kr.max_attempts||3)}}catch(Qt){console.error("Error checking active tests cache:",Qt)}const Rt=(d?.overall_score??0)>=50;if(Rt){const Qt=`retest_attempt${nt}_${V.student_id}_speaking_${e.test_id}`;localStorage.setItem(Qt,"true"),console.log(" Passed retest, marking last-slot key:",Qt);let wr=0;for(let Tr=1;Tr<=10;Tr++){const gr=`retest_attempt${Tr}_${V.student_id}_speaking_${e.test_id}`;localStorage.getItem(gr)==="true"&&wr++}const kr=`test_completed_${V.student_id}_speaking_${e.test_id}`;localStorage.setItem(kr,"true"),console.log(" Marked retest as completed (student passed):",kr);const zr=`retest_attempts_${V.student_id}_speaking_${e.test_id}`;localStorage.setItem(zr,JSON.stringify({used:wr,max:nt})),console.log(" Set retest attempts metadata (student passed):",zr,{used:wr,max:nt})}else{let Qt=1;for(let gr=1;gr<=10;gr++){const ve=`retest_attempt${gr}_${V.student_id}_speaking_${e.test_id}`;if(localStorage.getItem(ve)!=="true"){Qt=gr;break}}const wr=`retest_attempt${Qt}_${V.student_id}_speaking_${e.test_id}`;localStorage.setItem(wr,"true"),console.log(" Marked retest attempt as completed:",wr);let kr=0;for(let gr=1;gr<=10;gr++){const ve=`retest_attempt${gr}_${V.student_id}_speaking_${e.test_id}`;localStorage.getItem(ve)==="true"&&kr++}const zr=nt-kr,Tr=zr<=0||Rt;if(console.log(" Retest completion check:",{usedAttempts:kr,maxAttempts:nt,attemptsLeft:zr,passed:Rt,shouldComplete:Tr}),Tr){const gr=`test_completed_${V.student_id}_speaking_${e.test_id}`;localStorage.setItem(gr,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",gr);const ve=`retest_attempts_${V.student_id}_speaking_${e.test_id}`;localStorage.setItem(ve,JSON.stringify({used:kr,max:nt})),console.log(" Set retest attempts metadata (attempts exhausted):",ve,{used:kr,max:nt})}}}if(V?.student_id){const nt=`retest1_${V.student_id}_speaking_${e.test_id}`,Dt=`retest_assignment_id_${V.student_id}_speaking_${e.test_id}`;localStorage.removeItem(nt),localStorage.removeItem(Dt)}try{n&&n(d.overall_score),typeof r=="function"&&r()}catch{}return}else throw new Error(pt.message||"Failed to submit speaking test")}catch(de){console.error("Speaking test submission error:",de),b(de.message)}finally{g(!1)}}},[e,V,R,l,d,i,N,t]);S.useCallback(()=>{a("completed"),t({test_id:e.test_id,transcript:l,scores:d,attempt_number:N})},[e.test_id,l,d,N,t]);const ue=()=>{switch(s){case"recording":return c.jsxs("div",{className:"speaking-test-recording",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:e.test_name}),c.jsxs("div",{className:"mb-6 text-center",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Instructions:"}),c.jsx("p",{className:"text-gray-700 mb-4",children:e.prompt}),c.jsx("div",{className:"bg-blue-50 p-3 sm:p-4 rounded-lg",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Requirements:"})," Minimum ",e.min_words||50," words, 0-",e.max_duration||600," seconds duration"]})})]}),c.jsx(O0e,{ref:H,onRecordingComplete:oe,minDuration:0,maxDuration:e.max_duration||600,minWords:e.min_words||50,maxAttempts:P,currentAttempt:N}),k&&c.jsx("div",{className:"mt-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-800",children:k})})]});case"processing":return c.jsxs("div",{className:"transcription-status bg-white rounded-lg shadow-lg p-4 sm:p-8 text-center",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Processing Your Speech"}),c.jsx("p",{className:"text-lg text-blue-600",children:"Please wait while we process your audio..."})]}),c.jsxs("div",{className:"inline-flex space-x-1",children:[c.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),c.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),c.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]});case"feedback":return console.log(" Rendering feedback step with Submit Final button"),c.jsx(I0e,{transcript:l,scores:d,audioBlob:i,recordingTime:A,onReRecord:J,onFinalSubmit:()=>y(!0),canReRecord:N<P,attemptNumber:N,maxAttempts:P,isSubmitting:h});case"completed":const de={showResults:!0,testInfo:{test_name:e?.test_name||"Speaking Test",id:e?.test_id,test_id:e?.test_id},testType:"speaking",score:d?.overall_score||0,totalQuestions:1,percentage:d?.overall_score||0,passed:(d?.overall_score||0)>=50,questionAnalysis:[{questionNumber:1,userAnswer:l,correctAnswer:"Speaking test completed",isCorrect:!0,score:d?.overall_score||0,maxScore:100,feedback:`Word Count: ${d?.word_count||0}, Grammar: ${d?.grammar_score||0}/40, Vocabulary: ${d?.vocab_score||0}/30`}],timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};return c.jsx("div",{className:"speaking-test-completed",children:c.jsx(v2,{testResults:de,onBackToCabinet:()=>T(!0),onRetakeTest:()=>{a("recording"),u(""),f(null),o(null),E(1)},isLoading:!1})});default:return null}};return c.jsxs("div",{children:[c.jsx($a,{isOpen:x&&!h,onClose:()=>y(!1),title:"Submit Speaking Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(lt,{onClick:()=>y(!1),variant:"secondary",children:"Cancel"}),c.jsx(lt,{onClick:()=>{y(!1),le()},variant:"primary",children:"Submit"})]})]})}),c.jsx($a,{isOpen:v,onClose:()=>T(!1),title:"Exit Speaking Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(lt,{onClick:()=>T(!1),variant:"secondary",children:"Cancel"}),c.jsx(lt,{onClick:()=>{T(!1),typeof r=="function"&&r()},variant:"primary",children:"Go Back"})]})]})}),c.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6",children:[k&&c.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-800",children:k})}),ue()]})]})},L0e=e=>function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296},B0e=(e,t,r)=>{if(e.length===1)return e[0];const n=`${r}:speaking:${t}`,s=Array.from(n).reduce((o,l)=>(o<<5)-o+l.charCodeAt(0),0)>>>0,a=L0e(s),i=Math.floor(a()*e.length);return e[i]},$0e=()=>{const{testId:e}=T_(),t=fl(),{user:r}=Fs(),n=Bl(),{showNotification:s}=ai(),[a,i]=S.useState(null),[o,l]=S.useState([]),[u,d]=S.useState(null),[f,h]=S.useState(!0),[g,x]=S.useState(null),[y,v]=S.useState(!1),[T,k]=S.useState(null),[b,N]=S.useState(!1),{startTracking:E,stopTracking:P}=x1("speaking",e,r?.student_id||r?.id);S.useEffect(()=>{M(),j()},[e]),S.useEffect(()=>{if(a&&!y){ye.debug(" Speaking test - initializing anti-cheating tracking");const q=r?.student_id||r?.id||"unknown",Q=`anti_cheating_${q}_speaking_${e}`,ae=localStorage.getItem(Q);if(ye.debug(" Checking for anti-cheating data with key:",Q),ye.debug(" Key format: anti_cheating_{studentId}_{testType}_{testId}"),ye.debug(" Current test details:",{testType:"speaking",testId:e,studentId:q}),ae)try{const te=JSON.parse(ae);ye.debug(" Found existing anti-cheating data for THIS speaking test:",te),ye.debug(" Visibility change times for this test:",te.tabSwitches||0),ye.debug(" Cheating status for this test:",te.isCheating||!1),te.isCheating&&(ye.debug(" WARNING: Student has been flagged for cheating in THIS speaking test!"),ye.debug(" Tab switches detected in this test:",te.tabSwitches),s(` Warning: Suspicious activity detected in this speaking test (${te.tabSwitches} tab switches). Continued violations may result in test disqualification.`,"warning"))}catch(te){ye.error(" Error parsing existing anti-cheating data:",te)}else ye.debug(" No existing anti-cheating data found for this speaking test - starting fresh");E(),ye.debug(" Anti-cheating tracking started for speaking test")}return()=>{a&&(ye.debug(" Cleaning up anti-cheating tracking for speaking test"),P())}},[a,y,e,r?.student_id,r?.id,E,P,s]);const M=async()=>{try{h(!0);const q=await n.getSpeakingTest(e);if(q.success)i(q.test);else throw new Error(q.message||"Failed to load test");const Q=await n.getSpeakingTestQuestions(e);if(Q.success){const ae=Q.questions;l(ae);const te=r?.student_id||r?.id,ne=B0e(ae,e,te);d(ne),ye.debug(" Selected question for student:",{studentId:te,testId:e,totalQuestions:ae.length,selectedQuestion:ne?.id,selectedPrompt:ne?.prompt?.substring(0,50)+"..."})}}catch(q){ye.error("Error loading test data:",q),x(q.message)}finally{h(!1)}},j=()=>{const Q=`test_completed_${r?.student_id||r?.id}_speaking_${e}`;if(localStorage.getItem(Q)==="true"){v(!0);const te=localStorage.getItem(`speaking_test_result_${e}`);te&&k(JSON.parse(te))}},A=async q=>{try{v(!0),k(q),localStorage.setItem(`speaking_test_result_${e}`,JSON.stringify(q)),window.dispatchEvent(new CustomEvent("testCompleted",{detail:{testId:e,testType:"speaking"}})),setTimeout(()=>{t("/student")},2e3)}catch(Q){ye.error("Error handling test completion:",Q)}},O=()=>{if(ye.debug(" Navigating back to cabinet from speaking test..."),a&&r?.student_id){ye.debug(" Cabinet navigation detected - counting as cheating attempt");const Q=`anti_cheating_${r?.student_id||r?.id||"unknown"}_speaking_${e}`,ae=localStorage.getItem(Q);let te=0,ne=!1;if(ae)try{const H=JSON.parse(ae);te=H.tabSwitches||0,ne=H.isCheating||!1}catch(H){ye.error(" Error parsing existing anti-cheating data:",H)}const B=te+1,V=B>=2;ye.debug(` Tab switch count: ${te}  ${B} (cheating: ${V})`);const R={tabSwitches:B,isCheating:V,lastUpdated:new Date().toISOString()};localStorage.setItem(Q,JSON.stringify(R)),ye.debug(" Anti-cheating data updated for cabinet navigation:",R)}t("/student")};if(f)return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),c.jsx(lt,{variant:"outline",onClick:()=>N(!0),children:"Back to Cabinet"})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),c.jsx("p",{className:"text-gray-600 mt-4",children:"Loading speaking test..."})]})})})]});if(g)return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),c.jsx(lt,{variant:"outline",onClick:()=>N(!0),children:"Back to Cabinet"})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-red-600 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Test"}),c.jsx("p",{className:"text-gray-600 mb-6",children:g})]})})})]});if(y&&T)return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test Results"})}),c.jsx(lt,{variant:"outline",onClick:()=>N(!0),children:"Back to Cabinet"})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx(v2,{testType:"speaking",testData:a,result:T,onRetake:()=>{v(!1),k(null);const q=JSON.parse(localStorage.getItem("userData")||"{}").student_id;localStorage.removeItem(`test_completed_${q}_speaking_${e}`)}})})]});if(!a||o.length===0)return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),c.jsx(lt,{variant:"outline",onClick:()=>N(!0),children:"Back to Cabinet"})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No Test Data"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Unable to load test information"})]})})})]});const L=u;return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx($a,{isOpen:b,onClose:()=>N(!1),title:"Exit Speaking Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(lt,{onClick:()=>N(!1),variant:"secondary",children:"Cancel"}),c.jsx(lt,{onClick:()=>{N(!1),O()},variant:"primary",children:"Go Back"})]})]})}),c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),c.jsx(lt,{variant:"outline",onClick:()=>N(!0),children:"Back to Cabinet"})]})})}),c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.length>1&&u&&c.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-white text-xs font-bold",children:"i"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Question Selection"}),c.jsx("div",{className:"mt-1 text-sm text-blue-700",children:c.jsxs("p",{children:["This test has ",o.length," questions. You have been assigned ",c.jsxs("strong",{children:["Question ",u.question_number]}),"."]})})]})]})}),c.jsx(R0e,{testData:{...a,test_id:parseInt(e),question_id:L?.id,prompt:L?.prompt,start_time:Date.now()},onComplete:A,onExit:O,onTestComplete:A})]})]})},z0e=()=>{const{testType:e,testId:t}=T_(),r=fl(),{activeTests:n}=y2(),s=()=>{r("/student")},a=n.find(i=>i.test_type===e&&i.test_id===parseInt(t));return c.jsx(M0e,{onBackToCabinet:s,currentTest:a||{test_type:e,test_id:parseInt(t)}})},U0e=()=>{const e=fl(),{user:t,isAuthenticated:r,isLoading:n}=Fs(),[s,a]=S.useState(!1),[i,o]=S.useState(!0),[l,u]=S.useState(""),[d,f]=S.useState([]),[h,g]=S.useState(!1),[x,y]=S.useState(!1),[v,T]=S.useState({currentPassword:"",newPassword:"",confirmPassword:""}),k=S.useCallback(async()=>{ye.debug(" Initializing Student Application...");try{if(o(!0),u(""),!r||!t){ye.debug(" User not authenticated, redirecting to login"),e("/login");return}if(t.role!==Io.STUDENT){ye.error(" Invalid user role for student app:",t.role),u("Access denied. Student role required.");return}ye.debug(" Initializing event listeners..."),b(),ye.debug(" Setting up back to cabinet button listeners..."),N(),ye.debug(" Setting up password change form listener..."),E(),ye.debug(" Loading student data..."),await P(),ye.debug(" Exposing student functions globally..."),M(),ye.debug(" Populating student info from user data..."),Q(t),a(!0),ye.debug(" Student Application initialization complete!")}catch(ne){ye.error(" Error initializing student app:",ne),u("Failed to initialize student application")}finally{o(!1)}},[r,t,e]);S.useEffect(()=>{n||k()},[n,r,t,k]);const b=S.useCallback(()=>{ye.debug(" Setting up student event listeners...");const ne=V=>{h&&!V.target.closest(".student-menu")&&g(!1)},B=V=>{V.key==="Escape"&&h&&g(!1)};return document.addEventListener("click",ne),document.addEventListener("keydown",B),()=>{document.removeEventListener("click",ne),document.removeEventListener("keydown",B)}},[h]),N=S.useCallback(()=>{ye.debug(" Setting up back to cabinet listeners...")},[]),E=S.useCallback(()=>{ye.debug(" Setting up password change form...")},[]),P=S.useCallback(async()=>{ye.debug(" Loading student data...");try{ye.debug(" Student data loaded successfully")}catch(ne){throw ye.error(" Error loading student data:",ne),ne}},[]),M=S.useCallback(()=>{ye.debug(" Exposing student functions globally..."),window.toggleStudentMenu=j,window.showChangePasswordTab=A,window.hideChangePasswordTab=O,window.navigateBackToCabinet=q,window.handlePasswordChange=L,window.populateStudentInfoDirectly=Q,ye.debug(" All student functions exposed globally")},[]),j=S.useCallback(()=>{ye.debug(" toggleStudentMenu called"),g(ne=>{const B=!ne;return ye.debug(" Menu state changed from",ne,"to",B),B}),ye.debug(" Toggled dropdown menu")},[]),A=S.useCallback(()=>{ye.debug(" showChangePasswordTab called"),y(!0),g(!1)},[]),O=S.useCallback(()=>{ye.debug(" hideChangePasswordTab called"),y(!1),T({currentPassword:"",newPassword:"",confirmPassword:""})},[]),L=S.useCallback(async ne=>{ne.preventDefault(),ye.debug(" handlePasswordChange called");const{currentPassword:B,newPassword:V,confirmPassword:R}=v;if(!B||!V||!R){ae("Please fill in all fields","error");return}if(V!==R){ae("New passwords do not match","error");return}if(V.length<6){ae("New password must be at least 6 characters long","error");return}const H=/[a-zA-Z]/.test(V),U=/[0-9]/.test(V);if(!H||!U){ae("New password must contain both letters and numbers","error");return}if(!t||!t.student_id){ae("Session expired. Please login again.","error");return}const I=t.student_id;if(window.confirm("Are you sure you want to change your password?"))try{o(!0);const W=await Rs.changePassword({studentId:I,currentPassword:B,newPassword:V});W.success?(ae("Password changed successfully!","success"),O()):ae(W.message||"Failed to change password","error")}catch(W){ye.error("Password change error:",W),ae("Failed to change password. Please try again.","error")}finally{o(!1)}},[v,t]),q=S.useCallback(()=>{if(ye.debug("[DEBUG] navigateBackToCabinet called"),!r||!t){ye.warn("[WARN] No valid user found, redirecting to login"),e("/login");return}t.role===Io.STUDENT?(ye.debug("[DEBUG] Navigating to student cabinet"),e("/student")):(ye.warn("[WARN] Unknown user role, redirecting to login"),e("/login"))},[r,t,e]),Q=S.useCallback(ne=>{ye.debug(" populateStudentInfoDirectly called with:",ne);try{ye.debug(" Student info populated successfully")}catch(B){ye.error(" Error populating student info:",B)}},[]),ae=S.useCallback((ne,B)=>{const V={id:Date.now(),message:ne,type:B,timestamp:new Date};f(R=>[...R,V]),setTimeout(()=>{f(R=>R.filter(H=>H.id!==V.id))},Gm.NOTIFICATION_DURATION)},[]),te=S.useCallback(ne=>{const{name:B,value:V}=ne.target;T(R=>({...R,[B]:V}))},[]);return i?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(ln,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Initializing Student Application..."})]})}):l?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Initialization Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:l}),c.jsx(lt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):s?c.jsxs("div",{className:"bg-gray-50",children:[c.jsxs(z7,{children:[c.jsx(ca,{path:"/",element:c.jsxs("div",{className:"student-app",children:[c.jsx(N0e,{isMenuOpen:h,onToggleMenu:j,onShowPasswordChange:A}),x&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Change Password"}),c.jsxs("form",{onSubmit:L,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),c.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",value:v.currentPassword,onChange:te,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),c.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:v.newPassword,onChange:te,required:!0,minLength:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),c.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:v.confirmPassword,onChange:te,required:!0,minLength:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx(lt,{type:"button",variant:"secondary",onClick:O,className:"flex-1",children:"Cancel"}),c.jsx(lt,{type:"submit",variant:"primary",disabled:i,className:"flex-1",children:i?c.jsxs(c.Fragment,{children:[c.jsx(ln,{size:"sm",className:"mr-2"}),"Changing..."]}):"Change Password"})]})]})]})})]})}),c.jsx(ca,{path:"/test/:testType/:testId",element:c.jsx(z0e,{})}),c.jsx(ca,{path:"matching-test/:testId",element:c.jsx(F0e,{})}),c.jsx(ca,{path:"word-matching-test/:testId",element:c.jsx(D0e,{})}),c.jsx(ca,{path:"speaking-test/:testId",element:c.jsx($0e,{})}),c.jsx(ca,{path:"/results",element:c.jsx(hH,{})})]}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:d.map(ne=>c.jsx(su,{type:ne.type,message:ne.message,onClose:()=>f(B=>B.filter(V=>V.id!==ne.id))},ne.id))})]}):c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(ln,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Setting up Student Application..."})]})})},W0e=()=>c.jsx(lB,{children:c.jsx(tH,{children:c.jsx(ZW,{children:c.jsx(U0e,{})})})}),H0e=({result:e,isOpen:t,onClose:r,initialTab:n="overview",editingSpeakingScore:s,tempSpeakingScore:a,isSavingSpeakingScore:i,onStartSpeakingScoreEdit:o,onSaveSpeakingScore:l,onCancelSpeakingScoreEdit:u,onTempSpeakingScoreChange:d})=>{const[f,h]=S.useState(n),g=S.useRef(!1);if(S.useEffect(()=>()=>{g.current=!0},[]),S.useEffect(()=>{t&&h(n)},[t,n]),!t||!e)return null;const x={test_id:e.test_id,test_name:e.test_name,subject_id:e.subject_id};let y=e?.__audioUrl||void 0;const v=y?void 0:e?.answers;typeof v=="string"?y=v:v&&typeof v=="object"&&(y=v.audio_url),S.useEffect(()=>{console.log("[SpeakingReview] Transcript sources",{fromResult:e?.transcript,fromAnswersObject:typeof v=="object"&&v?.transcript?v.transcript:void 0,hasAnswers:!!v,test_id:e?.test_id,student_id:e?.student_id})},[e?.test_id,e?.student_id]);const[T,k]=S.useState("");S.useEffect(()=>{const N=new AbortController;let E=!1;const P=e?.__studentId||e?.student_id;return!e?.transcript&&!(typeof v=="object"&&v?.transcript)&&e?.test_id&&P&&(async()=>{try{const M=`/.netlify/functions/get-speaking-test-new?action=transcript&test_id=${encodeURIComponent(e.test_id)}&student_id=${encodeURIComponent(P)}`;console.log("[SpeakingReview] Fetching transcript from API:",{url:M});const j=await(window.tokenManager?.getToken()||aa.get())||localStorage.getItem("accessToken")||localStorage.getItem("token"),A=await fetch(M,{headers:{Authorization:j?`Bearer ${j}`:""},signal:N.signal});console.log("[SpeakingReview] Transcript API response:",{ok:A.ok,status:A.status});const O=await A.json().catch(()=>({}));console.log("[SpeakingReview] Transcript API body:",O),!E&&!g.current&&(A.ok?k(O.transcript||""):console.warn("[SpeakingReview] Transcript API failed:",O?.error||"unknown error"))}catch(M){M.name!=="AbortError"&&!g.current&&console.error("[SpeakingReview] Transcript fetch error:",M)}})(),()=>{E=!0;try{N.abort()}catch{}}},[e]);const b={score:e.score,max_score:e.max_score,percentage:e.percentage,audio_url:y,transcript:e.transcript||T||(typeof v=="object"&&v?.transcript?v.transcript:void 0),time_taken:e.time_taken,started_at:e.started_at,submitted_at:e.submitted_at};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[c.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 flex justify-between items-center",children:[c.jsxs("h2",{className:"text-xl font-semibold",children:["Speaking Test Review - ",x.test_name]}),c.jsx("button",{onClick:r,className:"text-white hover:text-gray-200 text-2xl font-bold",children:""})]}),c.jsx("div",{className:"border-b border-gray-200",children:c.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"audio",label:"Audio"},{id:"transcript",label:"Transcript"},{id:"analysis",label:"AI Analysis"},{id:"scoring",label:"Scoring"}].map(N=>c.jsx("button",{onClick:()=>h(N.id),className:`py-4 px-1 border-b-2 font-medium text-sm ${f===N.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:N.label},N.id))})}),c.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[f==="overview"&&c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Test Name"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:x.test_name})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Score"}),c.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[b.score," / ",b.max_score]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Time Taken"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:b.time_taken?`${Math.floor(b.time_taken/60)}:${(b.time_taken%60).toString().padStart(2,"0")}`:"N/A"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Submitted At"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:b.submitted_at?new Date(b.submitted_at).toLocaleString():"N/A"})]})]})}),f==="audio"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Audio Recording"}),b.audio_url?c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Click the play button to listen to the student's recording:"}),c.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:c.jsx(mH,{audioUrl:b.audio_url,className:"w-full"})})]}):c.jsx("div",{className:"text-center py-8 text-gray-500",children:c.jsx("p",{children:"No audio recording available"})})]}),f==="transcript"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transcript"}),b.transcript?c.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:c.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:b.transcript})}):c.jsx("div",{className:"text-center py-8 text-gray-500",children:c.jsx("p",{children:"No transcript available"})})]}),f==="analysis"&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI Analysis Results"}),(()=>{let N=e.ai_feedback;if(N&&typeof N=="string")try{N=JSON.parse(N)}catch{N=null}return N?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"Overall Performance"}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-gray-800",children:N.overall_score||0}),c.jsx("div",{className:"text-sm text-gray-600",children:"Overall Score (0-100)"})]})]}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"Category Breakdown"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[N.grammar_score||0,"/25"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Grammar"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-green-600",children:[N.vocabulary_score||0,"/20"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Vocabulary"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[N.pronunciation_score||0,"/15"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Pronunciation"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-orange-600",children:[N.fluency_score||0,"/20"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Fluency"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-red-600",children:[N.content_score||0,"/20"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Content"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Performance Metrics"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Word Count:"}),c.jsx("span",{className:"text-sm font-medium",children:N.word_count||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Grammar Mistakes:"}),c.jsx("span",{className:"text-sm font-medium text-red-600",children:N.grammar_mistakes||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Vocabulary Issues:"}),c.jsx("span",{className:"text-sm font-medium text-red-600",children:N.vocabulary_mistakes||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Difficulty Level:"}),c.jsx("span",{className:"text-sm font-medium",children:N.difficulty_level||"N/A"})]})]})]}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"AI Feedback"}),N.feedback?c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:c.jsx("p",{className:"text-sm text-gray-700",children:N.feedback})}):c.jsx("div",{className:"text-center py-4 text-gray-500",children:c.jsx("p",{className:"text-sm",children:"No AI feedback available"})})]})]}),N.improved_transcript&&c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Improved Transcript"}),c.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:c.jsx("p",{className:"text-sm text-gray-700",children:N.improved_transcript})})]}),N.grammar_corrections&&N.grammar_corrections.length>0&&c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Grammar Corrections"}),c.jsx("div",{className:"space-y-3",children:N.grammar_corrections.map((E,P)=>c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-red-800",children:"Mistake:"})," ",E.mistake]}),c.jsxs("div",{className:"text-sm mt-1",children:[c.jsx("span",{className:"font-medium text-green-800",children:"Correction:"})," ",E.correction]}),E.explanation&&c.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[c.jsx("span",{className:"font-medium",children:"Explanation:"})," ",E.explanation]})]},P))})]}),N.vocabulary_corrections&&N.vocabulary_corrections.length>0&&c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Vocabulary Improvements"}),c.jsx("div",{className:"space-y-3",children:N.vocabulary_corrections.map((E,P)=>c.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-yellow-800",children:"Original:"})," ",E.mistake]}),c.jsxs("div",{className:"text-sm mt-1",children:[c.jsx("span",{className:"font-medium text-green-800",children:"Better:"})," ",E.correction]}),E.explanation&&c.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[c.jsx("span",{className:"font-medium",children:"Explanation:"})," ",E.explanation]})]},P))})]}),N.language_use_corrections&&N.language_use_corrections.length>0&&c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Language Use Suggestions"}),c.jsx("div",{className:"space-y-3",children:N.language_use_corrections.map((E,P)=>c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-blue-800",children:"Original:"})," ",E.mistake]}),c.jsxs("div",{className:"text-sm mt-1",children:[c.jsx("span",{className:"font-medium text-blue-800",children:"Suggestion:"})," ",E.suggestion]}),E.explanation&&c.jsx("div",{className:"text-xs text-blue-700 mt-1",children:E.explanation})]},P))})]})]}):c.jsx("div",{className:"text-center py-8 text-gray-500",children:c.jsx("p",{children:"No AI analysis available for this result"})})})()]}),f==="scoring"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center",children:"Score Details"}),s?c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 place-items-center",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Score"}),c.jsx("input",{type:"number",min:"0",max:b.max_score,value:a,onChange:N=>d(N.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Max Score"}),c.jsxs("p",{className:"mt-1 text-sm text-gray-900 text-center",children:[b.max_score," (Fixed)"]})]})]}),c.jsxs("div",{className:"flex justify-center space-x-3",children:[c.jsx("button",{onClick:l,disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:i?"Saving...":"Save Score"}),c.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"})]})]}):c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsx("div",{className:"grid grid-cols-1 place-items-center gap-2",children:c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Current Score"}),c.jsxs("p",{className:"mt-1 text-sm text-gray-900 text-center",children:[b.score," / ",b.max_score]})]})}),c.jsx("button",{onClick:()=>o(e.id,b.score),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 mx-auto",children:"Edit Score"})]})]})]}),c.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:c.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"})})]})})},G0e=({isOpen:e,onClose:t,testResult:r,questions:n,isLoadingQuestions:s})=>{const a=v=>{if(!v)return{};if(typeof v=="string")try{return JSON.parse(v)}catch{return{}}return v||{}},i=S.useMemo(()=>{const v=r?.answers;if(console.log(" [TestAnswerModal] Raw testResult.answers:",v),console.log(" [TestAnswerModal] Raw testResult.answers type:",typeof v),console.log(" [TestAnswerModal] testResult.retest_offered:",r?.retest_offered),v&&typeof v=="object"&&v.answers_by_id)return console.log(" [TestAnswerModal] Found answers_by_id format"),console.log(" [TestAnswerModal] answers_by_id:",v.answers_by_id),console.log(" [TestAnswerModal] question_order:",v.question_order),v.answers_by_id||{};const T=a(v);return console.log(" [TestAnswerModal] Parsed student answers:",T),console.log(" [TestAnswerModal] Full testResult:",r),T},[r?.answers]),o=()=>!n||n.length===0?c.jsx("p",{className:"text-gray-500",children:"No questions available"}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((v,T)=>{const k=v.question_id||v.id||T+1,b=String(k),N=Number(k),E=i[b]!==void 0?i[b]:i[N]!==void 0?i[N]:i[k]!==void 0?i[k]:void 0,P=v.correct_answer,M=E===P,j=A=>{if(v.options&&Array.isArray(v.options)){const L=A.charCodeAt(0)-65;return v.options[L]||A}const O=`option_${A.toLowerCase()}`;return v[O]||A};return c.jsxs("tr",{className:M?"bg-green-50":"bg-red-50",children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:T+1}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",dangerouslySetInnerHTML:{__html:Gs(v.question)}}),c.jsx("td",{className:"px-4 py-3 text-sm",children:E?c.jsxs("span",{className:`font-medium ${M?"text-green-700":"text-red-700"}`,children:[E," - ",c.jsx("span",{dangerouslySetInnerHTML:{__html:Gs(String(j(E)))}})]}):c.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),c.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[P," - ",c.jsx("span",{dangerouslySetInnerHTML:{__html:Gs(String(j(P)))}})]}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:M?c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},b)})})]})}),l=()=>!n||n.length===0?c.jsx("p",{className:"text-gray-500",children:"No questions available"}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((v,T)=>{const k=v.question_id||v.id||T+1,b=String(k),N=Number(k),E=i[b]!==void 0?i[b]:i[N]!==void 0?i[N]:i[k]!==void 0?i[k]:void 0,P=v.correct_answer;let M;typeof E=="boolean"?M=E:typeof E=="string"?M=E.toLowerCase().trim()==="true":E===1||E==="1"?M=!0:E===0||E==="0"?M=!1:M=!!E;let j;typeof P=="boolean"?j=P:typeof P=="string"?j=P.toLowerCase().trim()==="true":j=!!P;const A=M===j;T===0&&console.log(" [TestAnswerModal] True/False First Question Debug:",{questionIdStr:b,studentAnswer:E,studentAnswerType:typeof E,normalizedStudentAnswer:M,correctAnswer:P,correctAnswerType:typeof P,normalizedCorrectAnswer:j,isCorrect:A});const O=E!=null?M:null,L=j;return c.jsxs("tr",{className:A?"bg-green-50":"bg-red-50",children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:T+1}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",dangerouslySetInnerHTML:{__html:Gs(v.question)}}),c.jsx("td",{className:"px-4 py-3 text-sm",children:O!==null?c.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${O?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:O?"True":"False"}):c.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${L?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:L?"True":"False"})}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:A?c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},b)})})]})}),u=()=>{if(!n||n.length===0)return c.jsx("p",{className:"text-gray-500",children:"No questions available"});const v=(T,k)=>{if(!T||!k||k.length===0)return!1;const b=String(T).toLowerCase().trim();return k.some(N=>{const E=String(N).toLowerCase().trim();return b===E||E.length>=2&&b.includes(E)?!0:E.length===1?b.startsWith(E)||b.endsWith(E):!1})};return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer(s)"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((T,k)=>{const b=T.question_id||T.id||k+1,N=String(b),E=Number(b),P=i[N]!==void 0?i[N]:i[E]!==void 0?i[E]:i[b]!==void 0?i[b]:void 0,M=Array.isArray(T.correct_answers)?T.correct_answers:T.correct_answer?[T.correct_answer]:[],j=v(P,M);return k===0&&console.log(" [TestAnswerModal] First question debug:",{questionIdNum:b,questionIdStr:N,questionIdNumKey:E,studentAnswer:P,studentAnswers:i,studentAnswersKeys:Object.keys(i),correctAnswers:M,question:T}),c.jsxs("tr",{className:j?"bg-green-50":"bg-red-50",children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:k+1}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",dangerouslySetInnerHTML:{__html:Gs(T.question)}}),c.jsx("td",{className:"px-4 py-3 text-sm",children:P?c.jsx("span",{className:`font-medium ${j?"text-green-700":"text-red-700"}`,dangerouslySetInnerHTML:{__html:(()=>{const A=String(P);if(A.includes("$"))return Gs(A);if(/\\[a-zA-Z]+|[\^_]\{|\\times|\\div|\\sqrt|\\frac/.test(A))try{return L8(A)}catch{return Gs(A)}return Gs(A)})()}}):c.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:M.length>0?c.jsx("div",{className:"space-y-1",children:M.map((A,O)=>{const L=String(A);return c.jsx("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded",dangerouslySetInnerHTML:{__html:(()=>{if(L.includes("$"))return Gs(L);if(/\\[a-zA-Z]+|[\^_]\{|\\times|\\div|\\sqrt|\\frac/.test(L))try{return L8(L)}catch{return Gs(L)}return Gs(L)})()}},O)})}):c.jsx("span",{className:"text-gray-400",children:"No correct answer defined"})}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:j?c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},N)})})]})})},d=()=>!n||n.length===0?c.jsx("p",{className:"text-gray-500",children:"No questions available"}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Left Word"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Match"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Match"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((v,T)=>{const k=v.question_id||v.id||T+1,b=String(k),N=Number(k),E=i[b]!==void 0?i[b]:i[N]!==void 0?i[N]:i[k]!==void 0?i[k]:void 0,P=v.left_word,M=v.right_word;let j=null,A=!1;if(E){if(typeof E=="object")j=E.definition||E.right||E.word,A=E.word===P&&(E.definition||E.right)===M;else if(typeof E=="string")try{const O=JSON.parse(E);j=O.definition||O.right||O.word,A=O.word===P&&(O.definition||O.right)===M}catch{j=E}}return c.jsxs("tr",{className:A?"bg-green-50":"bg-red-50",children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:T+1}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:P}),c.jsx("td",{className:"px-4 py-3 text-sm",children:j?c.jsx("span",{className:A?"text-green-700 font-medium":"text-red-700 font-medium",children:j}):c.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:M}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:A?c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},b)})})]})}),f=()=>!n||n.length===0?c.jsx("p",{className:"text-gray-500",children:"No questions available"}):c.jsx("div",{className:"space-y-6",children:n.map((v,T)=>{const k=v.question_id||v.id||T+1,b=String(k),N=Number(k);T===0&&console.log(" [TestAnswerModal] Fill Blanks First Question Debug:",{questionIdNum:k,questionIdStr:b,questionIdNumKey:N,question:v,studentAnswers:i,studentAnswersKeys:Object.keys(i),correctAnswers:v.correct_answers});const E=i[b]!==void 0?i[b]:i[N]!==void 0?i[N]:i[k]!==void 0?i[k]:void 0,P=Array.isArray(v.correct_answers)?v.correct_answers:[];let M=[];return Array.isArray(E)?M=E:E!=null?M=[E]:M=[],c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("h4",{className:"font-semibold text-gray-900 mb-3",children:["Question ",T+1]}),c.jsxs("div",{className:"space-y-3",children:[v.question_json&&c.jsx("div",{className:"text-sm text-gray-700 mb-4",children:typeof v.question_json=="string"?v.question_json:v.question_json.text||v.question_json.question||"Question text not available"}),c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Blank #"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Student Answer"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Correct Answer"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase w-20",children:"Status"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map((j,A)=>{let O=M[A];const L=A+1,q=String(L),Q=Number(L);(O==null||O==="")&&(O=i[q]!==void 0?i[q]:i[Q]!==void 0?i[Q]:O),T===0&&A===0&&console.log(" [TestAnswerModal] Fill Blanks First Blank Debug:",{blankIndex:A,potentialBlankId:L,potentialBlankIdStr:q,potentialBlankIdNum:Q,studentAns:O,studentAnswersForQ:M,correctAns:j,studentAnswersKeys:Object.keys(i)});const ae=String(O||"").trim().toLowerCase()===String(j||"").trim().toLowerCase();return c.jsxs("tr",{className:ae?"bg-green-50":"bg-red-50",children:[c.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:A+1}),c.jsx("td",{className:"px-4 py-2 text-sm",children:O?c.jsx("span",{className:ae?"text-green-700 font-medium":"text-red-700 font-medium",children:String(O)}):c.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),c.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:String(j)}),c.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:ae?c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:""}):c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:""})})]},A)})})]})]})]},b)})}),h=()=>!n||n.length===0?c.jsx("p",{className:"text-gray-500",children:"No questions available"}):c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Matching type tests require visual comparison. Answers stored as connection pairs."}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Word"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student Connection"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((v,T)=>{const k=v.question_id||v.id||T+1,b=String(k),N=Number(k),E=i[b]!==void 0?i[b]:i[N]!==void 0?i[N]:i[k]!==void 0?i[k]:void 0;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:v.word}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:E?typeof E=="object"?JSON.stringify(E):E:c.jsx("span",{className:"text-gray-400 italic",children:"No answer"})})]},b)})})]})})]}),g=()=>{if(!r)return null;const v=r.test_type||r.testType;if(s)return c.jsxs("div",{className:"flex items-center justify-center py-12",children:[c.jsx(ln,{size:"lg"}),c.jsx("span",{className:"ml-4 text-gray-600",children:"Loading questions..."})]});if(!n||n.length===0)return c.jsxs("div",{className:"text-center py-8",children:[c.jsx("p",{className:"text-gray-500",children:"Unable to load questions for this test."}),c.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Test ID: ",r.test_id,", Type: ",v]})]});switch(v){case"multiple_choice":return o();case"true_false":return l();case"input":return u();case"word_matching":return d();case"fill_blanks":return f();case"matching_type":return h();default:return c.jsxs("div",{className:"text-center py-8",children:[c.jsxs("p",{className:"text-gray-500",children:['Test type "',v,'" is not supported for answer viewing.']}),c.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Drawing and Speaking tests have their own dedicated modals."})]})}};if(!r)return null;r.test_type||r.testType;const x=`${r.name||""} ${r.surname||""}`.trim(),y=`${r.test_name||"Test"} - ${x||r.student_id}`;return c.jsxs($a,{isOpen:e,onClose:t,title:y,size:"large",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[c.jsxs("div",{className:"flex space-x-6",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-gray-500",children:"Score"}),c.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:[r.best_retest_score!==null&&r.best_retest_score!==void 0?`${r.best_retest_score} / ${r.best_retest_max_score||r.max_score||0}`:`${r.score||0} / ${r.max_score||0}`,r.best_retest_score!==null&&r.best_retest_score!==void 0&&c.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Retest Best)"})]})]}),r.best_retest_percentage!==null&&r.best_retest_percentage!==void 0&&r.best_retest_percentage>0||r.percentage&&r.percentage>0?c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-gray-500",children:"Percentage"}),c.jsx("div",{className:"text-lg font-semibold text-gray-900",children:r.best_retest_percentage!==null&&r.best_retest_percentage!==void 0?`${r.best_retest_percentage.toFixed(1)}%`:`${r.percentage?.toFixed(1)||"0.0"}%`})]}):null,r.subject&&r.subject!=="N/A"?c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-gray-500",children:"Subject"}),c.jsx("div",{className:"text-sm font-medium text-gray-700",children:r.subject})]}):null]}),r.submitted_at&&c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-xs text-gray-500",children:"Submitted"}),c.jsx("div",{className:"text-sm text-gray-700",children:new Date(r.submitted_at).toLocaleString()})]})]}),c.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:g()}),r.caught_cheating&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-red-800",children:[" This test was flagged for suspicious activity (visibility changes: ",r.visibility_change_times||0,")"]})})]})};class DS extends la.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){if(console.error("ErrorBoundary caught an error:",t,r),t.message&&t.message.includes("Minified React error #300")){console.warn("React error #300 caught and handled by ErrorBoundary");return}}render(){return this.state.hasError?c.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:[c.jsx("h3",{className:"text-red-800 font-medium",children:"Something went wrong"}),c.jsx("p",{className:"text-red-600 text-sm mt-1",children:"An error occurred while rendering this component."})]}):this.props.children}}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var j4={};j4.version="0.18.5";var gH=1252,V0e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],HC={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},GC=function(e){V0e.indexOf(e)!=-1&&(gH=HC[0]=e)};function q0e(){GC(1252)}var Zc=function(e){GC(e)};function VC(){Zc(1200),q0e()}function sD(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function K0e(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function pH(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var My=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?K0e(e.slice(2)):t==254&&r==255?pH(e.slice(2)):t==65279?e.slice(1):e},cb=function(t){return String.fromCharCode(t)},aD=function(t){return String.fromCharCode(t)},Tv,kf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Cv(e){for(var t="",r=0,n=0,s=0,a=0,i=0,o=0,l=0,u=0;u<e.length;)r=e.charCodeAt(u++),a=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,s=e.charCodeAt(u++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),t+=kf.charAt(a)+kf.charAt(i)+kf.charAt(o)+kf.charAt(l);return t}function Rl(e){var t="",r=0,n=0,s=0,a=0,i=0,o=0,l=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)a=kf.indexOf(e.charAt(u++)),i=kf.indexOf(e.charAt(u++)),r=a<<2|i>>4,t+=String.fromCharCode(r),o=kf.indexOf(e.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),l=kf.indexOf(e.charAt(u++)),s=(o&3)<<6|l,l!==64&&(t+=String.fromCharCode(s));return t}var vn=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),x0=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function Bf(e){return vn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function iD(e){return vn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Pl=function(t){return vn?x0(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function s3(e){if(typeof ArrayBuffer>"u")return Pl(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Qf(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Y0e(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function qC(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return qC(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var wi=vn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:x0(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function X0e(e){for(var t=[],r=0,n=e.length+250,s=Bf(e.length+255),a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i<128)s[r++]=i;else if(i<2048)s[r++]=192|i>>6&31,s[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++a)&1023;s[r++]=240|i>>8&7,s[r++]=128|i>>2&63,s[r++]=128|o>>6&15|(i&3)<<4,s[r++]=128|o&63}else s[r++]=224|i>>12&15,s[r++]=128|i>>6&63,s[r++]=128|i&63;r>n&&(t.push(s.slice(0,r)),r=0,s=Bf(65535),n=65530)}return t.push(s.slice(0,r)),wi(t)}var zo=/\u0000/g,Fy=/[\u0001-\u0006]/g;function Np(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function eu(e,t){var r=""+e;return r.length>=t?r:ua("0",t-r.length)+r}function KC(e,t){var r=""+e;return r.length>=t?r:ua(" ",t-r.length)+r}function P4(e,t){var r=""+e;return r.length>=t?r:r+ua(" ",t-r.length)}function J0e(e,t){var r=""+Math.round(e);return r.length>=t?r:ua("0",t-r.length)+r}function Q0e(e,t){var r=""+e;return r.length>=t?r:ua("0",t-r.length)+r}var oD=Math.pow(2,32);function Qg(e,t){if(e>oD||e<-oD)return J0e(e,t);var r=Math.round(e);return Q0e(r,t)}function M4(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var lD=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],OS=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Z0e(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Xr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},cD={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},efe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function F4(e,t,r){for(var n=e<0?-1:1,s=e*n,a=0,i=1,o=0,l=1,u=0,d=0,f=Math.floor(s);u<t&&(f=Math.floor(s),o=f*i+a,d=f*u+l,!(s-f<5e-8));)s=1/(s-f),a=i,i=o,l=u,u=d;if(d>t&&(u>t?(d=l,o=a):(d=u,o=i)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function Xh(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),a=0,i=[],o={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),n<60&&(a=(a+6)%7),r&&(a=ife(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var xH=new Date(1899,11,31,0,0,0),tfe=xH.getTime(),rfe=new Date(1900,2,1,0,0,0);function yH(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=rfe&&(r+=1440*60*1e3),(r-(tfe+(e.getTimezoneOffset()-xH.getTimezoneOffset())*6e4))/(1440*60*1e3)}function YC(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function nfe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function sfe(e){var t=e<0?12:11,r=YC(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function afe(e){var t=YC(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Ev(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=sfe(e):t===10?r=e.toFixed(10).substr(0,12):r=afe(e),YC(nfe(r.toUpperCase()))}function Am(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Ev(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return bc(14,yH(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function ife(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function ofe(e,t,r,n){var s="",a=0,i=0,o=r.y,l,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:l=r.m,u=t.length;break;case 3:return OS[r.m-1][1];case 5:return OS[r.m-1][0];default:return OS[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=r.d,u=t.length;break;case 3:return lD[r.q][0];default:return lD[r.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?eu(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,a=Math.round(i*(r.S+r.u)),a>=60*i&&(a=0),t==="s"?a===0?"0":""+a/i:(s=eu(a,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:l=o,u=1;break}var d=u>0?eu(l,u):"";return d}function Tf(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var vH=/%/g;function lfe(e,t,r){var n=t.replace(vH,""),s=t.length-n.length;return Jd(e,n,r*Math.pow(10,2*s))+ua("%",s)}function cfe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Jd(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function wH(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+wH(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var bH=/# (\?+)( ?)\/( ?)(\d+)/;function ufe(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),a=Math.floor(s/n),i=s-a*n,o=n;return r+(a===0?"":""+a)+" "+(i===0?ua(" ",e[1].length+1+e[4].length):KC(i,e[1].length)+e[2]+"/"+e[3]+eu(o,e[4].length))}function dfe(e,t,r){return r+(t===0?"":""+t)+ua(" ",e[1].length+2+e[4].length)}var _H=/^#*0*\.([0#]+)/,SH=/\).*[0#]/,kH=/\(###\) ###\\?-####/;function Do(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function uD(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function dD(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function ffe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function hfe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function rc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(SH)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?rc("n",n,r):"("+rc("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return cfe(e,t,r);if(t.indexOf("%")!==-1)return lfe(e,t,r);if(t.indexOf("E")!==-1)return wH(t,r);if(t.charCodeAt(0)===36)return"$"+rc(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,i,o,l=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Qg(l,t.length);if(t.match(/^[#?]+$/))return s=Qg(r,0),s==="0"&&(s=""),s.length>t.length?s:Do(t.substr(0,t.length-s.length))+s;if(a=t.match(bH))return ufe(a,l,u);if(t.match(/^#+0+$/))return u+Qg(l,t.length-t.indexOf("0"));if(a=t.match(_H))return s=uD(r,a[1].length).replace(/^([^\.]+)$/,"$1."+Do(a[1])).replace(/\.$/,"."+Do(a[1])).replace(/\.(\d*)$/,function(x,y){return"."+y+ua("0",Do(a[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return u+uD(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return u+Tf(Qg(l,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+rc(e,t,-r):Tf(""+(Math.floor(r)+ffe(r,a[1].length)))+"."+eu(dD(r,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return rc(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Np(rc(e,t.replace(/[\\-]/g,""),r)),i=0,Np(Np(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<s.length?s.charAt(i++):x==="0"?"0":""}));if(t.match(kH))return s=rc(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=F4(l,Math.pow(10,i)-1,!1),s=""+u,d=Jd("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=P4(o[2],i),d.length<a[4].length&&(d=Do(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=F4(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?KC(o[1],i)+a[2]+"/"+a[3]+P4(o[2],i):ua(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=Qg(r,0),t.length<=s.length?s:Do(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var f=t.indexOf(".")-i,h=t.length-s.length-f;return Do(t.substr(0,f)+s+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return i=dD(r,a[1].length),r<0?"-"+rc(e,t,-r):Tf(hfe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?eu(0,3-x.length):"")+x})+"."+eu(i,a[1].length);switch(t){case"###,##0.00":return rc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=Tf(Qg(l,0));return g!=="0"?u+g:"";case"###,###.00":return rc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return rc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function mfe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Jd(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function gfe(e,t,r){var n=t.replace(vH,""),s=t.length-n.length;return Jd(e,n,r*Math.pow(10,2*s))+ua("%",s)}function TH(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+TH(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Mu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(SH)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Mu("n",n,r):"("+Mu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return mfe(e,t,r);if(t.indexOf("%")!==-1)return gfe(e,t,r);if(t.indexOf("E")!==-1)return TH(t,r);if(t.charCodeAt(0)===36)return"$"+Mu(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,i,o,l=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+eu(l,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:Do(t.substr(0,t.length-s.length))+s;if(a=t.match(bH))return dfe(a,l,u);if(t.match(/^#+0+$/))return u+eu(l,t.length-t.indexOf("0"));if(a=t.match(_H))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Do(a[1])).replace(/\.$/,"."+Do(a[1])),s=s.replace(/\.(\d*)$/,function(x,y){return"."+y+ua("0",Do(a[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return u+Tf(""+l);if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Mu(e,t,-r):Tf(""+r)+"."+ua("0",a[1].length);if(a=t.match(/^#,#*,#0/))return Mu(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Np(Mu(e,t.replace(/[\\-]/g,""),r)),i=0,Np(Np(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<s.length?s.charAt(i++):x==="0"?"0":""}));if(t.match(kH))return s=Mu(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=F4(l,Math.pow(10,i)-1,!1),s=""+u,d=Jd("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=P4(o[2],i),d.length<a[4].length&&(d=Do(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=F4(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?KC(o[1],i)+a[2]+"/"+a[3]+P4(o[2],i):ua(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:Do(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var f=t.indexOf(".")-i,h=t.length-s.length-f;return Do(t.substr(0,f)+s+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Mu(e,t,-r):Tf(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?eu(0,3-x.length):"")+x})+"."+eu(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var g=Tf(""+l);return g!=="0"?u+g:"";default:if(t.match(/\.[0#?]*$/))return Mu(e,t.slice(0,t.lastIndexOf(".")),r)+Do(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Jd(e,t,r){return(r|0)===r?Mu(e,t,r):rc(e,t,r)}function pfe(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var CH=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function v1(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":M4(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(CH))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function xfe(e,t,r,n){for(var s=[],a="",i=0,o="",l="t",u,d,f,h="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!M4(e,i))throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(f=e.charCodeAt(++i))!==34&&i<e.length;)a+=String.fromCharCode(f);s[s.length]={t:"t",v:a},++i;break;case"\\":var g=e.charAt(++i),x=g==="("||g===")"?g:"t";s[s.length]={t:x,v:g},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=Xh(t,r,e.charAt(i+1)==="2"),u==null))return"";s[s.length]={t:"X",v:e.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Xh(t,r),u==null))return"";for(a=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),s[s.length]={t:o,v:a},l=o;break;case"A":case"a":case"":var y={t:o,v:o};if(u==null&&(u=Xh(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",h="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",i+=5,h="h"):e.substr(i,5).toUpperCase()==="/"?(u!=null&&(y.v=u.H>=12?"":""),y.t="T",i+=5,h="h"):(y.t="t",++i),u==null&&y.t==="T")return"";s[s.length]=y,l=o;break;case"[":for(a=o;e.charAt(i++)!=="]"&&i<e.length;)a+=e.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(CH)){if(u==null&&(u=Xh(t,r),u==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",v1(e)||(s[s.length]={t:"t",v:a}));break;case".":if(u!=null){for(a=o;++i<e.length&&(o=e.charAt(i))==="0";)a+=o;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)a+=o;s[s.length]={t:"n",v:a};break;case"?":for(a=o;e.charAt(++i)===o;)a+=o;s[s.length]={t:o,v:a},l=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)a+=e.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:o,v:o},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"t",v:o},++i;break}var v=0,T=0,k;for(i=s.length-1,l="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=h,l="h",v<1&&(v=1);break;case"s":(k=s[i].v.match(/\.0+$/))&&(T=Math.max(T,k[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":l=s[i].t;break;case"m":l==="s"&&(s[i].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[i].v.match(/[Hh]/)&&(v=1),v<2&&s[i].v.match(/[Mm]/)&&(v=2),v<3&&s[i].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",N;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=ofe(s[i].t.charCodeAt(0),s[i].v,u,T),s[i].t="t";break;case"n":case"?":for(N=i+1;s[N]!=null&&((o=s[N].t)==="?"||o==="D"||(o===" "||o==="t")&&s[N+1]!=null&&(s[N+1].t==="?"||s[N+1].t==="t"&&s[N+1].v==="/")||s[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[N].v==="/"||s[N].v===" "&&s[N+1]!=null&&s[N+1].t=="?"));)s[i].v+=s[N].v,s[N]={v:"",t:";"},++N;b+=s[i].v,i=N-1;break;case"G":s[i].t="t",s[i].v=Am(t,r);break}var E="",P,M;if(b.length>0){b.charCodeAt(0)==40?(P=t<0&&b.charCodeAt(0)===45?-t:t,M=Jd("n",b,P)):(P=t<0&&n>1?-t:t,M=Jd("n",b,P),P<0&&s[0]&&s[0].t=="t"&&(M=M.substr(1),s[0].v="-"+s[0].v)),N=M.length-1;var j=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){j=i;break}var A=s.length;if(j===s.length&&M.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(N>=s[i].v.length-1?(N-=s[i].v.length,s[i].v=M.substr(N+1,s[i].v.length)):N<0?s[i].v="":(s[i].v=M.substr(0,N+1),N=-1),s[i].t="t",A=i);N>=0&&A<s.length&&(s[A].v=M.substr(0,N+1)+s[A].v)}else if(j!==s.length&&M.indexOf("E")===-1){for(N=M.indexOf(".")-1,i=j;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(d=s[i].v.indexOf(".")>-1&&i===j?s[i].v.indexOf(".")-1:s[i].v.length-1,E=s[i].v.substr(d+1);d>=0;--d)N>=0&&(s[i].v.charAt(d)==="0"||s[i].v.charAt(d)==="#")&&(E=M.charAt(N--)+E);s[i].v=E,s[i].t="t",A=i}for(N>=0&&A<s.length&&(s[A].v=M.substr(0,N+1)+s[A].v),N=M.indexOf(".")+1,i=j;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==j)){for(d=s[i].v.indexOf(".")>-1&&i===j?s[i].v.indexOf(".")+1:0,E=s[i].v.substr(0,d);d<s[i].v.length;++d)N<M.length&&(E+=M.charAt(N++));s[i].v=E,s[i].t="t",A=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(P=n>1&&t<0&&i>0&&s[i-1].v==="-"?-t:t,s[i].v=Jd(s[i].t,s[i].v,P),s[i].t="t");var O="";for(i=0;i!==s.length;++i)s[i]!=null&&(O+=s[i].v);return O}var fD=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function hD(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function yfe(e,t){var r=pfe(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(fD),o=r[1].match(fD);return hD(t,i)?[n,r[0]]:hD(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,a]}function bc(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Xr)[e],n==null&&(n=r.table&&r.table[cD[e]]||Xr[cD[e]]),n==null&&(n=efe[e]||"General");break}if(M4(n,0))return Am(t,r);t instanceof Date&&(t=yH(t,r.date1904));var s=yfe(n,t);if(M4(s[1]))return Am(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return xfe(s[1],t,r,s[0])}function Qd(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Xr[r]==null){t<0&&(t=r);continue}if(Xr[r]==e){t=r;break}}t<0&&(t=391)}return Xr[t]=e,t}function a3(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Qd(e[t],t)}function w1(){Xr=Z0e()}var vfe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},EH=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function wfe(e){var t=typeof e=="number"?Xr[e]:e;return t=t.replace(EH,"(\\d+)"),new RegExp("^"+t+"$")}function bfe(e,t,r){var n=-1,s=-1,a=-1,i=-1,o=-1,l=-1;(t.match(EH)||[]).forEach(function(f,h){var g=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=g;break;case"d":a=g;break;case"h":i=g;break;case"s":l=g;break;case"m":i>=0?o=g:s=g;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?u:n==-1&&s==-1&&a==-1?d:u+"T"+d}var _fe=(function(){var e={};e.version="1.2.0";function t(){for(var M=0,j=new Array(256),A=0;A!=256;++A)M=A,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,j[A]=M;return typeof Int32Array<"u"?new Int32Array(j):j}var r=t();function n(M){var j=0,A=0,O=0,L=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(O=0;O!=256;++O)L[O]=M[O];for(O=0;O!=256;++O)for(A=M[O],j=256+O;j<4096;j+=256)A=L[j]=A>>>8^M[A&255];var q=[];for(O=1;O!=16;++O)q[O-1]=typeof Int32Array<"u"?L.subarray(O*256,O*256+256):L.slice(O*256,O*256+256);return q}var s=n(r),a=s[0],i=s[1],o=s[2],l=s[3],u=s[4],d=s[5],f=s[6],h=s[7],g=s[8],x=s[9],y=s[10],v=s[11],T=s[12],k=s[13],b=s[14];function N(M,j){for(var A=j^-1,O=0,L=M.length;O<L;)A=A>>>8^r[(A^M.charCodeAt(O++))&255];return~A}function E(M,j){for(var A=j^-1,O=M.length-15,L=0;L<O;)A=b[M[L++]^A&255]^k[M[L++]^A>>8&255]^T[M[L++]^A>>16&255]^v[M[L++]^A>>>24]^y[M[L++]]^x[M[L++]]^g[M[L++]]^h[M[L++]]^f[M[L++]]^d[M[L++]]^u[M[L++]]^l[M[L++]]^o[M[L++]]^i[M[L++]]^a[M[L++]]^r[M[L++]];for(O+=15;L<O;)A=A>>>8^r[(A^M[L++])&255];return~A}function P(M,j){for(var A=j^-1,O=0,L=M.length,q=0,Q=0;O<L;)q=M.charCodeAt(O++),q<128?A=A>>>8^r[(A^q)&255]:q<2048?(A=A>>>8^r[(A^(192|q>>6&31))&255],A=A>>>8^r[(A^(128|q&63))&255]):q>=55296&&q<57344?(q=(q&1023)+64,Q=M.charCodeAt(O++)&1023,A=A>>>8^r[(A^(240|q>>8&7))&255],A=A>>>8^r[(A^(128|q>>2&63))&255],A=A>>>8^r[(A^(128|Q>>6&15|(q&3)<<4))&255],A=A>>>8^r[(A^(128|Q&63))&255]):(A=A>>>8^r[(A^(224|q>>12&15))&255],A=A>>>8^r[(A^(128|q>>6&63))&255],A=A>>>8^r[(A^(128|q&63))&255]);return~A}return e.table=r,e.bstr=N,e.buf=E,e.str=P,e})(),$r=(function(){var t={};t.version="1.2.1";function r(he,Ce){for(var be=he.split("/"),pe=Ce.split("/"),ke=0,Ee=0,Qe=Math.min(be.length,pe.length);ke<Qe;++ke){if(Ee=be[ke].length-pe[ke].length)return Ee;if(be[ke]!=pe[ke])return be[ke]<pe[ke]?-1:1}return be.length-pe.length}function n(he){if(he.charAt(he.length-1)=="/")return he.slice(0,-1).indexOf("/")===-1?he:n(he.slice(0,-1));var Ce=he.lastIndexOf("/");return Ce===-1?he:he.slice(0,Ce+1)}function s(he){if(he.charAt(he.length-1)=="/")return s(he.slice(0,-1));var Ce=he.lastIndexOf("/");return Ce===-1?he:he.slice(Ce+1)}function a(he,Ce){typeof Ce=="string"&&(Ce=new Date(Ce));var be=Ce.getHours();be=be<<6|Ce.getMinutes(),be=be<<5|Ce.getSeconds()>>>1,he.write_shift(2,be);var pe=Ce.getFullYear()-1980;pe=pe<<4|Ce.getMonth()+1,pe=pe<<5|Ce.getDate(),he.write_shift(2,pe)}function i(he){var Ce=he.read_shift(2)&65535,be=he.read_shift(2)&65535,pe=new Date,ke=be&31;be>>>=5;var Ee=be&15;be>>>=4,pe.setMilliseconds(0),pe.setFullYear(be+1980),pe.setMonth(Ee-1),pe.setDate(ke);var Qe=Ce&31;Ce>>>=5;var xt=Ce&63;return Ce>>>=6,pe.setHours(Ce),pe.setMinutes(xt),pe.setSeconds(Qe<<1),pe}function o(he){Wi(he,0);for(var Ce={},be=0;he.l<=he.length-4;){var pe=he.read_shift(2),ke=he.read_shift(2),Ee=he.l+ke,Qe={};switch(pe){case 21589:be=he.read_shift(1),be&1&&(Qe.mtime=he.read_shift(4)),ke>5&&(be&2&&(Qe.atime=he.read_shift(4)),be&4&&(Qe.ctime=he.read_shift(4))),Qe.mtime&&(Qe.mt=new Date(Qe.mtime*1e3));break}he.l=Ee,Ce[pe]=Qe}return Ce}var l;function u(){return l||(l={})}function d(he,Ce){if(he[0]==80&&he[1]==75)return ve(he,Ce);if((he[0]|32)==109&&(he[1]|32)==105)return Ge(he,Ce);if(he.length<512)throw new Error("CFB file size "+he.length+" < 512");var be=3,pe=512,ke=0,Ee=0,Qe=0,xt=0,rt=0,ce=[],me=he.slice(0,512);Wi(me,0);var je=f(me);switch(be=je[0],be){case 3:pe=512;break;case 4:pe=4096;break;case 0:if(je[1]==0)return ve(he,Ce);default:throw new Error("Major Version: Expected 3 or 4 saw "+be)}pe!==512&&(me=he.slice(0,pe),Wi(me,28));var Pe=he.slice(0,pe);h(me,be);var Ze=me.read_shift(4,"i");if(be===3&&Ze!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ze);me.l+=4,Qe=me.read_shift(4,"i"),me.l+=4,me.chk("00100000","Mini Stream Cutoff Size: "),xt=me.read_shift(4,"i"),ke=me.read_shift(4,"i"),rt=me.read_shift(4,"i"),Ee=me.read_shift(4,"i");for(var gt=-1,Tt=0;Tt<109&&(gt=me.read_shift(4,"i"),!(gt<0));++Tt)ce[Tt]=gt;var ir=g(he,pe);v(rt,Ee,ir,pe,ce);var Ct=k(ir,Qe,ce,pe);Ct[Qe].name="!Directory",ke>0&&xt!==Q&&(Ct[xt].name="!MiniFAT"),Ct[ce[0]].name="!FAT",Ct.fat_addrs=ce,Ct.ssz=pe;var or={},Or=[],Lr=[],Pr=[];b(Qe,Ct,ir,Or,ke,or,Lr,xt),x(Lr,Pr,Or),Or.shift();var un={FileIndex:Lr,FullPaths:Pr};return Ce&&Ce.raw&&(un.raw={header:Pe,sectors:ir}),un}function f(he){if(he[he.l]==80&&he[he.l+1]==75)return[0,0];he.chk(ae,"Header Signature: "),he.l+=16;var Ce=he.read_shift(2,"u");return[he.read_shift(2,"u"),Ce]}function h(he,Ce){var be=9;switch(he.l+=2,be=he.read_shift(2)){case 9:if(Ce!=3)throw new Error("Sector Shift: Expected 9 saw "+be);break;case 12:if(Ce!=4)throw new Error("Sector Shift: Expected 12 saw "+be);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+be)}he.chk("0600","Mini Sector Shift: "),he.chk("000000000000","Reserved: ")}function g(he,Ce){for(var be=Math.ceil(he.length/Ce)-1,pe=[],ke=1;ke<be;++ke)pe[ke-1]=he.slice(ke*Ce,(ke+1)*Ce);return pe[be-1]=he.slice(be*Ce),pe}function x(he,Ce,be){for(var pe=0,ke=0,Ee=0,Qe=0,xt=0,rt=be.length,ce=[],me=[];pe<rt;++pe)ce[pe]=me[pe]=pe,Ce[pe]=be[pe];for(;xt<me.length;++xt)pe=me[xt],ke=he[pe].L,Ee=he[pe].R,Qe=he[pe].C,ce[pe]===pe&&(ke!==-1&&ce[ke]!==ke&&(ce[pe]=ce[ke]),Ee!==-1&&ce[Ee]!==Ee&&(ce[pe]=ce[Ee])),Qe!==-1&&(ce[Qe]=pe),ke!==-1&&pe!=ce[pe]&&(ce[ke]=ce[pe],me.lastIndexOf(ke)<xt&&me.push(ke)),Ee!==-1&&pe!=ce[pe]&&(ce[Ee]=ce[pe],me.lastIndexOf(Ee)<xt&&me.push(Ee));for(pe=1;pe<rt;++pe)ce[pe]===pe&&(Ee!==-1&&ce[Ee]!==Ee?ce[pe]=ce[Ee]:ke!==-1&&ce[ke]!==ke&&(ce[pe]=ce[ke]));for(pe=1;pe<rt;++pe)if(he[pe].type!==0){if(xt=pe,xt!=ce[xt])do xt=ce[xt],Ce[pe]=Ce[xt]+"/"+Ce[pe];while(xt!==0&&ce[xt]!==-1&&xt!=ce[xt]);ce[pe]=-1}for(Ce[0]+="/",pe=1;pe<rt;++pe)he[pe].type!==2&&(Ce[pe]+="/")}function y(he,Ce,be){for(var pe=he.start,ke=he.size,Ee=[],Qe=pe;be&&ke>0&&Qe>=0;)Ee.push(Ce.slice(Qe*q,Qe*q+q)),ke-=q,Qe=Gh(be,Qe*4);return Ee.length===0?Mt(0):wi(Ee).slice(0,he.size)}function v(he,Ce,be,pe,ke){var Ee=Q;if(he===Q){if(Ce!==0)throw new Error("DIFAT chain shorter than expected")}else if(he!==-1){var Qe=be[he],xt=(pe>>>2)-1;if(!Qe)return;for(var rt=0;rt<xt&&(Ee=Gh(Qe,rt*4))!==Q;++rt)ke.push(Ee);v(Gh(Qe,pe-4),Ce-1,be,pe,ke)}}function T(he,Ce,be,pe,ke){var Ee=[],Qe=[];ke||(ke=[]);var xt=pe-1,rt=0,ce=0;for(rt=Ce;rt>=0;){ke[rt]=!0,Ee[Ee.length]=rt,Qe.push(he[rt]);var me=be[Math.floor(rt*4/pe)];if(ce=rt*4&xt,pe<4+ce)throw new Error("FAT boundary crossed: "+rt+" 4 "+pe);if(!he[me])break;rt=Gh(he[me],ce)}return{nodes:Ee,data:TD([Qe])}}function k(he,Ce,be,pe){var ke=he.length,Ee=[],Qe=[],xt=[],rt=[],ce=pe-1,me=0,je=0,Pe=0,Ze=0;for(me=0;me<ke;++me)if(xt=[],Pe=me+Ce,Pe>=ke&&(Pe-=ke),!Qe[Pe]){rt=[];var gt=[];for(je=Pe;je>=0;){gt[je]=!0,Qe[je]=!0,xt[xt.length]=je,rt.push(he[je]);var Tt=be[Math.floor(je*4/pe)];if(Ze=je*4&ce,pe<4+Ze)throw new Error("FAT boundary crossed: "+je+" 4 "+pe);if(!he[Tt]||(je=Gh(he[Tt],Ze),gt[je]))break}Ee[Pe]={nodes:xt,data:TD([rt])}}return Ee}function b(he,Ce,be,pe,ke,Ee,Qe,xt){for(var rt=0,ce=pe.length?2:0,me=Ce[he].data,je=0,Pe=0,Ze;je<me.length;je+=128){var gt=me.slice(je,je+128);Wi(gt,64),Pe=gt.read_shift(2),Ze=rE(gt,0,Pe-ce),pe.push(Ze);var Tt={name:Ze,type:gt.read_shift(1),color:gt.read_shift(1),L:gt.read_shift(4,"i"),R:gt.read_shift(4,"i"),C:gt.read_shift(4,"i"),clsid:gt.read_shift(16),state:gt.read_shift(4,"i"),start:0,size:0},ir=gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2);ir!==0&&(Tt.ct=N(gt,gt.l-8));var Ct=gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2)+gt.read_shift(2);Ct!==0&&(Tt.mt=N(gt,gt.l-8)),Tt.start=gt.read_shift(4,"i"),Tt.size=gt.read_shift(4,"i"),Tt.size<0&&Tt.start<0&&(Tt.size=Tt.type=0,Tt.start=Q,Tt.name=""),Tt.type===5?(rt=Tt.start,ke>0&&rt!==Q&&(Ce[rt].name="!StreamData")):Tt.size>=4096?(Tt.storage="fat",Ce[Tt.start]===void 0&&(Ce[Tt.start]=T(be,Tt.start,Ce.fat_addrs,Ce.ssz)),Ce[Tt.start].name=Tt.name,Tt.content=Ce[Tt.start].data.slice(0,Tt.size)):(Tt.storage="minifat",Tt.size<0?Tt.size=0:rt!==Q&&Tt.start!==Q&&Ce[rt]&&(Tt.content=y(Tt,Ce[rt].data,(Ce[xt]||{}).data))),Tt.content&&Wi(Tt.content,0),Ee[Ze]=Tt,Qe.push(Tt)}}function N(he,Ce){return new Date((Nl(he,Ce+4)/1e7*Math.pow(2,32)+Nl(he,Ce)/1e7-11644473600)*1e3)}function E(he,Ce){return u(),d(l.readFileSync(he),Ce)}function P(he,Ce){var be=Ce&&Ce.type;switch(be||vn&&Buffer.isBuffer(he)&&(be="buffer"),be||"base64"){case"file":return E(he,Ce);case"base64":return d(Pl(Rl(he)),Ce);case"binary":return d(Pl(he),Ce)}return d(he,Ce)}function M(he,Ce){var be=Ce||{},pe=be.root||"Root Entry";if(he.FullPaths||(he.FullPaths=[]),he.FileIndex||(he.FileIndex=[]),he.FullPaths.length!==he.FileIndex.length)throw new Error("inconsistent CFB structure");he.FullPaths.length===0&&(he.FullPaths[0]=pe+"/",he.FileIndex[0]={name:pe,type:5}),be.CLSID&&(he.FileIndex[0].clsid=be.CLSID),j(he)}function j(he){var Ce="Sh33tJ5";if(!$r.find(he,"/"+Ce)){var be=Mt(4);be[0]=55,be[1]=be[3]=50,be[2]=54,he.FileIndex.push({name:Ce,type:2,content:be,size:4,L:69,R:69,C:69}),he.FullPaths.push(he.FullPaths[0]+Ce),A(he)}}function A(he,Ce){M(he);for(var be=!1,pe=!1,ke=he.FullPaths.length-1;ke>=0;--ke){var Ee=he.FileIndex[ke];switch(Ee.type){case 0:pe?be=!0:(he.FileIndex.pop(),he.FullPaths.pop());break;case 1:case 2:case 5:pe=!0,isNaN(Ee.R*Ee.L*Ee.C)&&(be=!0),Ee.R>-1&&Ee.L>-1&&Ee.R==Ee.L&&(be=!0);break;default:be=!0;break}}if(!(!be&&!Ce)){var Qe=new Date(1987,1,19),xt=0,rt=Object.create?Object.create(null):{},ce=[];for(ke=0;ke<he.FullPaths.length;++ke)rt[he.FullPaths[ke]]=!0,he.FileIndex[ke].type!==0&&ce.push([he.FullPaths[ke],he.FileIndex[ke]]);for(ke=0;ke<ce.length;++ke){var me=n(ce[ke][0]);pe=rt[me],pe||(ce.push([me,{name:s(me).replace("/",""),type:1,clsid:ne,ct:Qe,mt:Qe,content:null}]),rt[me]=!0)}for(ce.sort(function(Ze,gt){return r(Ze[0],gt[0])}),he.FullPaths=[],he.FileIndex=[],ke=0;ke<ce.length;++ke)he.FullPaths[ke]=ce[ke][0],he.FileIndex[ke]=ce[ke][1];for(ke=0;ke<ce.length;++ke){var je=he.FileIndex[ke],Pe=he.FullPaths[ke];if(je.name=s(Pe).replace("/",""),je.L=je.R=je.C=-(je.color=1),je.size=je.content?je.content.length:0,je.start=0,je.clsid=je.clsid||ne,ke===0)je.C=ce.length>1?1:-1,je.size=0,je.type=5;else if(Pe.slice(-1)=="/"){for(xt=ke+1;xt<ce.length&&n(he.FullPaths[xt])!=Pe;++xt);for(je.C=xt>=ce.length?-1:xt,xt=ke+1;xt<ce.length&&n(he.FullPaths[xt])!=n(Pe);++xt);je.R=xt>=ce.length?-1:xt,je.type=1}else n(he.FullPaths[ke+1]||"")==n(Pe)&&(je.R=ke+1),je.type=2}}}function O(he,Ce){var be=Ce||{};if(be.fileType=="mad")return Ot(he,be);switch(A(he),be.fileType){case"zip":return Le(he,be)}var pe=(function(Ze){for(var gt=0,Tt=0,ir=0;ir<Ze.FileIndex.length;++ir){var Ct=Ze.FileIndex[ir];if(Ct.content){var or=Ct.content.length;or>0&&(or<4096?gt+=or+63>>6:Tt+=or+511>>9)}}for(var Or=Ze.FullPaths.length+3>>2,Lr=gt+7>>3,Pr=gt+127>>7,un=Lr+Tt+Or+Pr,An=un+127>>7,mn=An<=109?0:Math.ceil((An-109)/127);un+An+mn+127>>7>An;)mn=++An<=109?0:Math.ceil((An-109)/127);var _r=[1,mn,An,Pr,Or,Tt,gt,0];return Ze.FileIndex[0].size=gt<<6,_r[7]=(Ze.FileIndex[0].start=_r[0]+_r[1]+_r[2]+_r[3]+_r[4]+_r[5])+(_r[6]+7>>3),_r})(he),ke=Mt(pe[7]<<9),Ee=0,Qe=0;{for(Ee=0;Ee<8;++Ee)ke.write_shift(1,te[Ee]);for(Ee=0;Ee<8;++Ee)ke.write_shift(2,0);for(ke.write_shift(2,62),ke.write_shift(2,3),ke.write_shift(2,65534),ke.write_shift(2,9),ke.write_shift(2,6),Ee=0;Ee<3;++Ee)ke.write_shift(2,0);for(ke.write_shift(4,0),ke.write_shift(4,pe[2]),ke.write_shift(4,pe[0]+pe[1]+pe[2]+pe[3]-1),ke.write_shift(4,0),ke.write_shift(4,4096),ke.write_shift(4,pe[3]?pe[0]+pe[1]+pe[2]-1:Q),ke.write_shift(4,pe[3]),ke.write_shift(-4,pe[1]?pe[0]-1:Q),ke.write_shift(4,pe[1]),Ee=0;Ee<109;++Ee)ke.write_shift(-4,Ee<pe[2]?pe[1]+Ee:-1)}if(pe[1])for(Qe=0;Qe<pe[1];++Qe){for(;Ee<236+Qe*127;++Ee)ke.write_shift(-4,Ee<pe[2]?pe[1]+Ee:-1);ke.write_shift(-4,Qe===pe[1]-1?Q:Qe+1)}var xt=function(Ze){for(Qe+=Ze;Ee<Qe-1;++Ee)ke.write_shift(-4,Ee+1);Ze&&(++Ee,ke.write_shift(-4,Q))};for(Qe=Ee=0,Qe+=pe[1];Ee<Qe;++Ee)ke.write_shift(-4,B.DIFSECT);for(Qe+=pe[2];Ee<Qe;++Ee)ke.write_shift(-4,B.FATSECT);xt(pe[3]),xt(pe[4]);for(var rt=0,ce=0,me=he.FileIndex[0];rt<he.FileIndex.length;++rt)me=he.FileIndex[rt],me.content&&(ce=me.content.length,!(ce<4096)&&(me.start=Qe,xt(ce+511>>9)));for(xt(pe[6]+7>>3);ke.l&511;)ke.write_shift(-4,B.ENDOFCHAIN);for(Qe=Ee=0,rt=0;rt<he.FileIndex.length;++rt)me=he.FileIndex[rt],me.content&&(ce=me.content.length,!(!ce||ce>=4096)&&(me.start=Qe,xt(ce+63>>6)));for(;ke.l&511;)ke.write_shift(-4,B.ENDOFCHAIN);for(Ee=0;Ee<pe[4]<<2;++Ee){var je=he.FullPaths[Ee];if(!je||je.length===0){for(rt=0;rt<17;++rt)ke.write_shift(4,0);for(rt=0;rt<3;++rt)ke.write_shift(4,-1);for(rt=0;rt<12;++rt)ke.write_shift(4,0);continue}me=he.FileIndex[Ee],Ee===0&&(me.start=me.size?me.start-1:Q);var Pe=Ee===0&&be.root||me.name;if(ce=2*(Pe.length+1),ke.write_shift(64,Pe,"utf16le"),ke.write_shift(2,ce),ke.write_shift(1,me.type),ke.write_shift(1,me.color),ke.write_shift(-4,me.L),ke.write_shift(-4,me.R),ke.write_shift(-4,me.C),me.clsid)ke.write_shift(16,me.clsid,"hex");else for(rt=0;rt<4;++rt)ke.write_shift(4,0);ke.write_shift(4,me.state||0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,me.start),ke.write_shift(4,me.size),ke.write_shift(4,0)}for(Ee=1;Ee<he.FileIndex.length;++Ee)if(me=he.FileIndex[Ee],me.size>=4096)if(ke.l=me.start+1<<9,vn&&Buffer.isBuffer(me.content))me.content.copy(ke,ke.l,0,me.size),ke.l+=me.size+511&-512;else{for(rt=0;rt<me.size;++rt)ke.write_shift(1,me.content[rt]);for(;rt&511;++rt)ke.write_shift(1,0)}for(Ee=1;Ee<he.FileIndex.length;++Ee)if(me=he.FileIndex[Ee],me.size>0&&me.size<4096)if(vn&&Buffer.isBuffer(me.content))me.content.copy(ke,ke.l,0,me.size),ke.l+=me.size+63&-64;else{for(rt=0;rt<me.size;++rt)ke.write_shift(1,me.content[rt]);for(;rt&63;++rt)ke.write_shift(1,0)}if(vn)ke.l=ke.length;else for(;ke.l<ke.length;)ke.write_shift(1,0);return ke}function L(he,Ce){var be=he.FullPaths.map(function(rt){return rt.toUpperCase()}),pe=be.map(function(rt){var ce=rt.split("/");return ce[ce.length-(rt.slice(-1)=="/"?2:1)]}),ke=!1;Ce.charCodeAt(0)===47?(ke=!0,Ce=be[0].slice(0,-1)+Ce):ke=Ce.indexOf("/")!==-1;var Ee=Ce.toUpperCase(),Qe=ke===!0?be.indexOf(Ee):pe.indexOf(Ee);if(Qe!==-1)return he.FileIndex[Qe];var xt=!Ee.match(Fy);for(Ee=Ee.replace(zo,""),xt&&(Ee=Ee.replace(Fy,"!")),Qe=0;Qe<be.length;++Qe)if((xt?be[Qe].replace(Fy,"!"):be[Qe]).replace(zo,"")==Ee||(xt?pe[Qe].replace(Fy,"!"):pe[Qe]).replace(zo,"")==Ee)return he.FileIndex[Qe];return null}var q=64,Q=-2,ae="d0cf11e0a1b11ae1",te=[208,207,17,224,161,177,26,225],ne="00000000000000000000000000000000",B={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Q,FREESECT:-1,HEADER_SIGNATURE:ae,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ne,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function V(he,Ce,be){u();var pe=O(he,be);l.writeFileSync(Ce,pe)}function R(he){for(var Ce=new Array(he.length),be=0;be<he.length;++be)Ce[be]=String.fromCharCode(he[be]);return Ce.join("")}function H(he,Ce){var be=O(he,Ce);switch(Ce&&Ce.type||"buffer"){case"file":return u(),l.writeFileSync(Ce.filename,be),be;case"binary":return typeof be=="string"?be:R(be);case"base64":return Cv(typeof be=="string"?be:R(be));case"buffer":if(vn)return Buffer.isBuffer(be)?be:x0(be);case"array":return typeof be=="string"?Pl(be):be}return be}var U;function I(he){try{var Ce=he.InflateRaw,be=new Ce;if(be._processChunk(new Uint8Array([3,0]),be._finishFlushFlag),be.bytesRead)U=he;else throw new Error("zlib does not expose bytesRead")}catch(pe){console.error("cannot use native zlib: "+(pe.message||pe))}}function W(he,Ce){if(!U)return Tr(he,Ce);var be=U.InflateRaw,pe=new be,ke=pe._processChunk(he.slice(he.l),pe._finishFlushFlag);return he.l+=pe.bytesRead,ke}function K(he){return U?U.deflateRawSync(he):ot(he)}var Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],oe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],J=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function le(he){var Ce=(he<<1|he<<11)&139536|(he<<5|he<<15)&558144;return(Ce>>16|Ce>>8|Ce)&255}for(var ue=typeof Uint8Array<"u",de=ue?new Uint8Array(256):[],Te=0;Te<256;++Te)de[Te]=le(Te);function ie(he,Ce){var be=de[he&255];return Ce<=8?be>>>8-Ce:(be=be<<8|de[he>>8&255],Ce<=16?be>>>16-Ce:(be=be<<8|de[he>>16&255],be>>>24-Ce))}function xe(he,Ce){var be=Ce&7,pe=Ce>>>3;return(he[pe]|(be<=6?0:he[pe+1]<<8))>>>be&3}function Ae(he,Ce){var be=Ce&7,pe=Ce>>>3;return(he[pe]|(be<=5?0:he[pe+1]<<8))>>>be&7}function Me(he,Ce){var be=Ce&7,pe=Ce>>>3;return(he[pe]|(be<=4?0:he[pe+1]<<8))>>>be&15}function Je(he,Ce){var be=Ce&7,pe=Ce>>>3;return(he[pe]|(be<=3?0:he[pe+1]<<8))>>>be&31}function He(he,Ce){var be=Ce&7,pe=Ce>>>3;return(he[pe]|(be<=1?0:he[pe+1]<<8))>>>be&127}function It(he,Ce,be){var pe=Ce&7,ke=Ce>>>3,Ee=(1<<be)-1,Qe=he[ke]>>>pe;return be<8-pe||(Qe|=he[ke+1]<<8-pe,be<16-pe)||(Qe|=he[ke+2]<<16-pe,be<24-pe)||(Qe|=he[ke+3]<<24-pe),Qe&Ee}function it(he,Ce,be){var pe=Ce&7,ke=Ce>>>3;return pe<=5?he[ke]|=(be&7)<<pe:(he[ke]|=be<<pe&255,he[ke+1]=(be&7)>>8-pe),Ce+3}function kt(he,Ce,be){var pe=Ce&7,ke=Ce>>>3;return be=(be&1)<<pe,he[ke]|=be,Ce+1}function pt(he,Ce,be){var pe=Ce&7,ke=Ce>>>3;return be<<=pe,he[ke]|=be&255,be>>>=8,he[ke+1]=be,Ce+8}function ut(he,Ce,be){var pe=Ce&7,ke=Ce>>>3;return be<<=pe,he[ke]|=be&255,be>>>=8,he[ke+1]=be&255,he[ke+2]=be>>>8,Ce+16}function _t(he,Ce){var be=he.length,pe=2*be>Ce?2*be:Ce+5,ke=0;if(be>=Ce)return he;if(vn){var Ee=iD(pe);if(he.copy)he.copy(Ee);else for(;ke<he.length;++ke)Ee[ke]=he[ke];return Ee}else if(ue){var Qe=new Uint8Array(pe);if(Qe.set)Qe.set(he);else for(;ke<be;++ke)Qe[ke]=he[ke];return Qe}return he.length=pe,he}function qt(he){for(var Ce=new Array(he),be=0;be<he;++be)Ce[be]=0;return Ce}function Jt(he,Ce,be){var pe=1,ke=0,Ee=0,Qe=0,xt=0,rt=he.length,ce=ue?new Uint16Array(32):qt(32);for(Ee=0;Ee<32;++Ee)ce[Ee]=0;for(Ee=rt;Ee<be;++Ee)he[Ee]=0;rt=he.length;var me=ue?new Uint16Array(rt):qt(rt);for(Ee=0;Ee<rt;++Ee)ce[ke=he[Ee]]++,pe<ke&&(pe=ke),me[Ee]=0;for(ce[0]=0,Ee=1;Ee<=pe;++Ee)ce[Ee+16]=xt=xt+ce[Ee-1]<<1;for(Ee=0;Ee<rt;++Ee)xt=he[Ee],xt!=0&&(me[Ee]=ce[xt+16]++);var je=0;for(Ee=0;Ee<rt;++Ee)if(je=he[Ee],je!=0)for(xt=ie(me[Ee],pe)>>pe-je,Qe=(1<<pe+4-je)-1;Qe>=0;--Qe)Ce[xt|Qe<<je]=je&15|Ee<<4;return pe}var Ht=ue?new Uint16Array(512):qt(512),$e=ue?new Uint16Array(32):qt(32);if(!ue){for(var ze=0;ze<512;++ze)Ht[ze]=0;for(ze=0;ze<32;++ze)$e[ze]=0}(function(){for(var he=[],Ce=0;Ce<32;Ce++)he.push(5);Jt(he,$e,32);var be=[];for(Ce=0;Ce<=143;Ce++)be.push(8);for(;Ce<=255;Ce++)be.push(9);for(;Ce<=279;Ce++)be.push(7);for(;Ce<=287;Ce++)be.push(8);Jt(be,Ht,288)})();var tt=(function(){for(var Ce=ue?new Uint8Array(32768):[],be=0,pe=0;be<J.length-1;++be)for(;pe<J[be+1];++pe)Ce[pe]=be;for(;pe<32768;++pe)Ce[pe]=29;var ke=ue?new Uint8Array(259):[];for(be=0,pe=0;be<oe.length-1;++be)for(;pe<oe[be+1];++pe)ke[pe]=be;function Ee(xt,rt){for(var ce=0;ce<xt.length;){var me=Math.min(65535,xt.length-ce),je=ce+me==xt.length;for(rt.write_shift(1,+je),rt.write_shift(2,me),rt.write_shift(2,~me&65535);me-- >0;)rt[rt.l++]=xt[ce++]}return rt.l}function Qe(xt,rt){for(var ce=0,me=0,je=ue?new Uint16Array(32768):[];me<xt.length;){var Pe=Math.min(65535,xt.length-me);if(Pe<10){for(ce=it(rt,ce,+(me+Pe==xt.length)),ce&7&&(ce+=8-(ce&7)),rt.l=ce/8|0,rt.write_shift(2,Pe),rt.write_shift(2,~Pe&65535);Pe-- >0;)rt[rt.l++]=xt[me++];ce=rt.l*8;continue}ce=it(rt,ce,+(me+Pe==xt.length)+2);for(var Ze=0;Pe-- >0;){var gt=xt[me];Ze=(Ze<<5^gt)&32767;var Tt=-1,ir=0;if((Tt=je[Ze])&&(Tt|=me&-32768,Tt>me&&(Tt-=32768),Tt<me))for(;xt[Tt+ir]==xt[me+ir]&&ir<250;)++ir;if(ir>2){gt=ke[ir],gt<=22?ce=pt(rt,ce,de[gt+1]>>1)-1:(pt(rt,ce,3),ce+=5,pt(rt,ce,de[gt-23]>>5),ce+=3);var Ct=gt<8?0:gt-4>>2;Ct>0&&(ut(rt,ce,ir-oe[gt]),ce+=Ct),gt=Ce[me-Tt],ce=pt(rt,ce,de[gt]>>3),ce-=3;var or=gt<4?0:gt-2>>1;or>0&&(ut(rt,ce,me-Tt-J[gt]),ce+=or);for(var Or=0;Or<ir;++Or)je[Ze]=me&32767,Ze=(Ze<<5^xt[me])&32767,++me;Pe-=ir-1}else gt<=143?gt=gt+48:ce=kt(rt,ce,1),ce=pt(rt,ce,de[gt]),je[Ze]=me&32767,++me}ce=pt(rt,ce,0)-1}return rt.l=(ce+7)/8|0,rt.l}return function(rt,ce){return rt.length<8?Ee(rt,ce):Qe(rt,ce)}})();function ot(he){var Ce=Mt(50+Math.floor(he.length*1.1)),be=tt(he,Ce);return Ce.slice(0,be)}var nt=ue?new Uint16Array(32768):qt(32768),Dt=ue?new Uint16Array(32768):qt(32768),Rt=ue?new Uint16Array(128):qt(128),Qt=1,wr=1;function kr(he,Ce){var be=Je(he,Ce)+257;Ce+=5;var pe=Je(he,Ce)+1;Ce+=5;var ke=Me(he,Ce)+4;Ce+=4;for(var Ee=0,Qe=ue?new Uint8Array(19):qt(19),xt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],rt=1,ce=ue?new Uint8Array(8):qt(8),me=ue?new Uint8Array(8):qt(8),je=Qe.length,Pe=0;Pe<ke;++Pe)Qe[Z[Pe]]=Ee=Ae(he,Ce),rt<Ee&&(rt=Ee),ce[Ee]++,Ce+=3;var Ze=0;for(ce[0]=0,Pe=1;Pe<=rt;++Pe)me[Pe]=Ze=Ze+ce[Pe-1]<<1;for(Pe=0;Pe<je;++Pe)(Ze=Qe[Pe])!=0&&(xt[Pe]=me[Ze]++);var gt=0;for(Pe=0;Pe<je;++Pe)if(gt=Qe[Pe],gt!=0){Ze=de[xt[Pe]]>>8-gt;for(var Tt=(1<<7-gt)-1;Tt>=0;--Tt)Rt[Ze|Tt<<gt]=gt&7|Pe<<3}var ir=[];for(rt=1;ir.length<be+pe;)switch(Ze=Rt[He(he,Ce)],Ce+=Ze&7,Ze>>>=3){case 16:for(Ee=3+xe(he,Ce),Ce+=2,Ze=ir[ir.length-1];Ee-- >0;)ir.push(Ze);break;case 17:for(Ee=3+Ae(he,Ce),Ce+=3;Ee-- >0;)ir.push(0);break;case 18:for(Ee=11+He(he,Ce),Ce+=7;Ee-- >0;)ir.push(0);break;default:ir.push(Ze),rt<Ze&&(rt=Ze);break}var Ct=ir.slice(0,be),or=ir.slice(be);for(Pe=be;Pe<286;++Pe)Ct[Pe]=0;for(Pe=pe;Pe<30;++Pe)or[Pe]=0;return Qt=Jt(Ct,nt,286),wr=Jt(or,Dt,30),Ce}function zr(he,Ce){if(he[0]==3&&!(he[1]&3))return[Bf(Ce),2];for(var be=0,pe=0,ke=iD(Ce||1<<18),Ee=0,Qe=ke.length>>>0,xt=0,rt=0;(pe&1)==0;){if(pe=Ae(he,be),be+=3,pe>>>1)pe>>1==1?(xt=9,rt=5):(be=kr(he,be),xt=Qt,rt=wr);else{be&7&&(be+=8-(be&7));var ce=he[be>>>3]|he[(be>>>3)+1]<<8;if(be+=32,ce>0)for(!Ce&&Qe<Ee+ce&&(ke=_t(ke,Ee+ce),Qe=ke.length);ce-- >0;)ke[Ee++]=he[be>>>3],be+=8;continue}for(;;){!Ce&&Qe<Ee+32767&&(ke=_t(ke,Ee+32767),Qe=ke.length);var me=It(he,be,xt),je=pe>>>1==1?Ht[me]:nt[me];if(be+=je&15,je>>>=4,(je>>>8&255)===0)ke[Ee++]=je;else{if(je==256)break;je-=257;var Pe=je<8?0:je-4>>2;Pe>5&&(Pe=0);var Ze=Ee+oe[je];Pe>0&&(Ze+=It(he,be,Pe),be+=Pe),me=It(he,be,rt),je=pe>>>1==1?$e[me]:Dt[me],be+=je&15,je>>>=4;var gt=je<4?0:je-2>>1,Tt=J[je];for(gt>0&&(Tt+=It(he,be,gt),be+=gt),!Ce&&Qe<Ze&&(ke=_t(ke,Ze+100),Qe=ke.length);Ee<Ze;)ke[Ee]=ke[Ee-Tt],++Ee}}}return Ce?[ke,be+7>>>3]:[ke.slice(0,Ee),be+7>>>3]}function Tr(he,Ce){var be=he.slice(he.l||0),pe=zr(be,Ce);return he.l+=pe[1],pe[0]}function gr(he,Ce){if(he)typeof console<"u"&&console.error(Ce);else throw new Error(Ce)}function ve(he,Ce){var be=he;Wi(be,0);var pe=[],ke=[],Ee={FileIndex:pe,FullPaths:ke};M(Ee,{root:Ce.root});for(var Qe=be.length-4;(be[Qe]!=80||be[Qe+1]!=75||be[Qe+2]!=5||be[Qe+3]!=6)&&Qe>=0;)--Qe;be.l=Qe+4,be.l+=4;var xt=be.read_shift(2);be.l+=6;var rt=be.read_shift(4);for(be.l=rt,Qe=0;Qe<xt;++Qe){be.l+=20;var ce=be.read_shift(4),me=be.read_shift(4),je=be.read_shift(2),Pe=be.read_shift(2),Ze=be.read_shift(2);be.l+=8;var gt=be.read_shift(4),Tt=o(be.slice(be.l+je,be.l+je+Pe));be.l+=je+Pe+Ze;var ir=be.l;be.l=gt+4,Fe(be,ce,me,Ee,Tt),be.l=ir}return Ee}function Fe(he,Ce,be,pe,ke){he.l+=2;var Ee=he.read_shift(2),Qe=he.read_shift(2),xt=i(he);if(Ee&8257)throw new Error("Unsupported ZIP encryption");for(var rt=he.read_shift(4),ce=he.read_shift(4),me=he.read_shift(4),je=he.read_shift(2),Pe=he.read_shift(2),Ze="",gt=0;gt<je;++gt)Ze+=String.fromCharCode(he[he.l++]);if(Pe){var Tt=o(he.slice(he.l,he.l+Pe));(Tt[21589]||{}).mt&&(xt=Tt[21589].mt),((ke||{})[21589]||{}).mt&&(xt=ke[21589].mt)}he.l+=Pe;var ir=he.slice(he.l,he.l+ce);switch(Qe){case 8:ir=W(he,me);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Qe)}var Ct=!1;Ee&8&&(rt=he.read_shift(4),rt==134695760&&(rt=he.read_shift(4),Ct=!0),ce=he.read_shift(4),me=he.read_shift(4)),ce!=Ce&&gr(Ct,"Bad compressed size: "+Ce+" != "+ce),me!=be&&gr(Ct,"Bad uncompressed size: "+be+" != "+me),ar(pe,Ze,ir,{unsafe:!0,mt:xt})}function Le(he,Ce){var be=Ce||{},pe=[],ke=[],Ee=Mt(1),Qe=be.compression?8:0,xt=0,rt=0,ce=0,me=0,je=0,Pe=he.FullPaths[0],Ze=Pe,gt=he.FileIndex[0],Tt=[],ir=0;for(rt=1;rt<he.FullPaths.length;++rt)if(Ze=he.FullPaths[rt].slice(Pe.length),gt=he.FileIndex[rt],!(!gt.size||!gt.content||Ze=="Sh33tJ5")){var Ct=me,or=Mt(Ze.length);for(ce=0;ce<Ze.length;++ce)or.write_shift(1,Ze.charCodeAt(ce)&127);or=or.slice(0,or.l),Tt[je]=_fe.buf(gt.content,0);var Or=gt.content;Qe==8&&(Or=K(Or)),Ee=Mt(30),Ee.write_shift(4,67324752),Ee.write_shift(2,20),Ee.write_shift(2,xt),Ee.write_shift(2,Qe),gt.mt?a(Ee,gt.mt):Ee.write_shift(4,0),Ee.write_shift(-4,Tt[je]),Ee.write_shift(4,Or.length),Ee.write_shift(4,gt.content.length),Ee.write_shift(2,or.length),Ee.write_shift(2,0),me+=Ee.length,pe.push(Ee),me+=or.length,pe.push(or),me+=Or.length,pe.push(Or),Ee=Mt(46),Ee.write_shift(4,33639248),Ee.write_shift(2,0),Ee.write_shift(2,20),Ee.write_shift(2,xt),Ee.write_shift(2,Qe),Ee.write_shift(4,0),Ee.write_shift(-4,Tt[je]),Ee.write_shift(4,Or.length),Ee.write_shift(4,gt.content.length),Ee.write_shift(2,or.length),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(4,0),Ee.write_shift(4,Ct),ir+=Ee.l,ke.push(Ee),ir+=or.length,ke.push(or),++je}return Ee=Mt(22),Ee.write_shift(4,101010256),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(2,je),Ee.write_shift(2,je),Ee.write_shift(4,ir),Ee.write_shift(4,me),Ee.write_shift(2,0),wi([wi(pe),wi(ke),Ee])}var Ue={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Pt(he,Ce){if(he.ctype)return he.ctype;var be=he.name||"",pe=be.match(/\.([^\.]+)$/);return pe&&Ue[pe[1]]||Ce&&(pe=(be=Ce).match(/[\.\\]([^\.\\])+$/),pe&&Ue[pe[1]])?Ue[pe[1]]:"application/octet-stream"}function Ie(he){for(var Ce=Cv(he),be=[],pe=0;pe<Ce.length;pe+=76)be.push(Ce.slice(pe,pe+76));return be.join(`\r
`)+`\r
`}function Ye(he){var Ce=he.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ce){var me=ce.charCodeAt(0).toString(16).toUpperCase();return"="+(me.length==1?"0"+me:me)});Ce=Ce.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ce.charAt(0)==`
`&&(Ce="=0D"+Ce.slice(1)),Ce=Ce.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var be=[],pe=Ce.split(`\r
`),ke=0;ke<pe.length;++ke){var Ee=pe[ke];if(Ee.length==0){be.push("");continue}for(var Qe=0;Qe<Ee.length;){var xt=76,rt=Ee.slice(Qe,Qe+xt);rt.charAt(xt-1)=="="?xt--:rt.charAt(xt-2)=="="?xt-=2:rt.charAt(xt-3)=="="&&(xt-=3),rt=Ee.slice(Qe,Qe+xt),Qe+=xt,Qe<Ee.length&&(rt+="="),be.push(rt)}}return be.join(`\r
`)}function Ne(he){for(var Ce=[],be=0;be<he.length;++be){for(var pe=he[be];be<=he.length&&pe.charAt(pe.length-1)=="=";)pe=pe.slice(0,pe.length-1)+he[++be];Ce.push(pe)}for(var ke=0;ke<Ce.length;++ke)Ce[ke]=Ce[ke].replace(/[=][0-9A-Fa-f]{2}/g,function(Ee){return String.fromCharCode(parseInt(Ee.slice(1),16))});return Pl(Ce.join(`\r
`))}function Ve(he,Ce,be){for(var pe="",ke="",Ee="",Qe,xt=0;xt<10;++xt){var rt=Ce[xt];if(!rt||rt.match(/^\s*$/))break;var ce=rt.match(/^(.*?):\s*([^\s].*)$/);if(ce)switch(ce[1].toLowerCase()){case"content-location":pe=ce[2].trim();break;case"content-type":Ee=ce[2].trim();break;case"content-transfer-encoding":ke=ce[2].trim();break}}switch(++xt,ke.toLowerCase()){case"base64":Qe=Pl(Rl(Ce.slice(xt).join("")));break;case"quoted-printable":Qe=Ne(Ce.slice(xt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ke)}var me=ar(he,pe.slice(be.length),Qe,{unsafe:!0});Ee&&(me.ctype=Ee)}function Ge(he,Ce){if(R(he.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var be=Ce&&Ce.root||"",pe=(vn&&Buffer.isBuffer(he)?he.toString("binary"):R(he)).split(`\r
`),ke=0,Ee="";for(ke=0;ke<pe.length;++ke)if(Ee=pe[ke],!!/^Content-Location:/i.test(Ee)&&(Ee=Ee.slice(Ee.indexOf("file")),be||(be=Ee.slice(0,Ee.lastIndexOf("/")+1)),Ee.slice(0,be.length)!=be))for(;be.length>0&&(be=be.slice(0,be.length-1),be=be.slice(0,be.lastIndexOf("/")+1),Ee.slice(0,be.length)!=be););var Qe=(pe[1]||"").match(/boundary="(.*?)"/);if(!Qe)throw new Error("MAD cannot find boundary");var xt="--"+(Qe[1]||""),rt=[],ce=[],me={FileIndex:rt,FullPaths:ce};M(me);var je,Pe=0;for(ke=0;ke<pe.length;++ke){var Ze=pe[ke];Ze!==xt&&Ze!==xt+"--"||(Pe++&&Ve(me,pe.slice(je,ke),be),je=ke)}return me}function Ot(he,Ce){var be=Ce||{},pe=be.boundary||"SheetJS";pe="------="+pe;for(var ke=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+pe.slice(2)+'"',"","",""],Ee=he.FullPaths[0],Qe=Ee,xt=he.FileIndex[0],rt=1;rt<he.FullPaths.length;++rt)if(Qe=he.FullPaths[rt].slice(Ee.length),xt=he.FileIndex[rt],!(!xt.size||!xt.content||Qe=="Sh33tJ5")){Qe=Qe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(ir){return"_x"+ir.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(ir){return"_u"+ir.charCodeAt(0).toString(16)+"_"});for(var ce=xt.content,me=vn&&Buffer.isBuffer(ce)?ce.toString("binary"):R(ce),je=0,Pe=Math.min(1024,me.length),Ze=0,gt=0;gt<=Pe;++gt)(Ze=me.charCodeAt(gt))>=32&&Ze<128&&++je;var Tt=je>=Pe*4/5;ke.push(pe),ke.push("Content-Location: "+(be.root||"file:///C:/SheetJS/")+Qe),ke.push("Content-Transfer-Encoding: "+(Tt?"quoted-printable":"base64")),ke.push("Content-Type: "+Pt(xt,Qe)),ke.push(""),ke.push(Tt?Ye(me):Ie(me))}return ke.push(pe+`--\r
`),ke.join(`\r
`)}function Ut(he){var Ce={};return M(Ce,he),Ce}function ar(he,Ce,be,pe){var ke=pe&&pe.unsafe;ke||M(he);var Ee=!ke&&$r.find(he,Ce);if(!Ee){var Qe=he.FullPaths[0];Ce.slice(0,Qe.length)==Qe?Qe=Ce:(Qe.slice(-1)!="/"&&(Qe+="/"),Qe=(Qe+Ce).replace("//","/")),Ee={name:s(Ce),type:2},he.FileIndex.push(Ee),he.FullPaths.push(Qe),ke||$r.utils.cfb_gc(he)}return Ee.content=be,Ee.size=be?be.length:0,pe&&(pe.CLSID&&(Ee.clsid=pe.CLSID),pe.mt&&(Ee.mt=pe.mt),pe.ct&&(Ee.ct=pe.ct)),Ee}function Dr(he,Ce){M(he);var be=$r.find(he,Ce);if(be){for(var pe=0;pe<he.FileIndex.length;++pe)if(he.FileIndex[pe]==be)return he.FileIndex.splice(pe,1),he.FullPaths.splice(pe,1),!0}return!1}function br(he,Ce,be){M(he);var pe=$r.find(he,Ce);if(pe){for(var ke=0;ke<he.FileIndex.length;++ke)if(he.FileIndex[ke]==pe)return he.FileIndex[ke].name=s(be),he.FullPaths[ke]=be,!0}return!1}function Kr(he){A(he,!0)}return t.find=L,t.read=P,t.parse=d,t.write=H,t.writeFile=V,t.utils={cfb_new:Ut,cfb_add:ar,cfb_del:Dr,cfb_mov:br,cfb_gc:Kr,ReadShift:Ky,CheckField:YH,prep_blob:Wi,bconcat:wi,use_zlib:I,_deflateRaw:ot,_inflateRaw:Tr,consts:B},t})();function Sfe(e){return typeof e=="string"?s3(e):Array.isArray(e)?Y0e(e):e}function w2(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=s3(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Uu(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var s=new Blob([Sfe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=Qf(t)),o.write(t),o.close(),t}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+e)}function kfe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function ma(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function mD(e,t){for(var r=[],n=ma(e),s=0;s!==n.length;++s)r[e[n[s]][t]]==null&&(r[e[n[s]][t]]=n[s]);return r}function i3(e){for(var t=[],r=ma(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function o3(e){for(var t=[],r=ma(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function Tfe(e){for(var t=[],r=ma(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var D4=new Date(1899,11,30,0,0,0);function si(e,t){var r=e.getTime(),n=D4.getTime()+(e.getTimezoneOffset()-D4.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var NH=new Date,Cfe=D4.getTime()+(NH.getTimezoneOffset()-D4.getTimezoneOffset())*6e4,gD=NH.getTimezoneOffset();function l3(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Cfe),t.getTimezoneOffset()!==gD&&t.setTime(t.getTime()+(t.getTimezoneOffset()-gD)*6e4),t}function Efe(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(r=1,a>3&&(n=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[a],10)}return t}var pD=new Date("2017-02-19T19:06:09.000Z"),AH=isNaN(pD.getFullYear())?new Date("2/19/17"):pD,Nfe=AH.getFullYear()==2017;function js(e,t){var r=new Date(e);if(Nfe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(AH.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function jm(e,t){if(vn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Uu(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Uu(pH(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Uu(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Uu(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(a){return r[a]||a})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function Ps(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Ps(e[r]));return t}function ua(e,t){for(var r="";r.length<t;)r+=e;return r}function ru(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,a){return r=-r,a}),!isNaN(t=Number(n)))?t/r:t}var Afe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Hp(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),a=t.getDate();if(isNaN(a))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&Afe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||a>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var jfe=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var a=r.split(n),i=[a[0]],o=1;o<a.length;++o)i.push(s),i.push(a[o]);return i}})();function jH(e){return e?e.content&&e.type?jm(e.content,!0):e.data?My(e.data):e.asNodeBuffer&&vn?My(e.asNodeBuffer().toString("binary")):e.asBinary?My(e.asBinary()):e._data&&e._data.getContent?My(jm(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function PH(e){if(!e)return null;if(e.data)return sD(e.data);if(e.asNodeBuffer&&vn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?sD(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function Pfe(e){return e&&e.name.slice(-4)===".bin"?PH(e):jH(e)}function oc(e,t){for(var r=e.FullPaths||ma(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),a=0;a<r.length;++a){var i=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||s==i)return e.files?e.files[r[a]]:e.FileIndex[a]}return null}function XC(e,t){var r=oc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ra(e,t,r){if(!r)return Pfe(XC(e,t));if(!t)return null;try{return Ra(e,t)}catch{return null}}function Ml(e,t,r){if(!r)return jH(XC(e,t));if(!t)return null;try{return Ml(e,t)}catch{return null}}function Mfe(e,t,r){return PH(XC(e,t))}function xD(e){for(var t=e.FullPaths||ma(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function xn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return vn?n=x0(r):n=X0e(r),$r.utils.cfb_add(e,t,n)}$r.utils.cfb_add(e,t,r)}else e.file(t,r)}function JC(){return $r.utils.cfb_new()}function MH(e,t){switch(t.type){case"base64":return $r.read(e,{type:"base64"});case"binary":return $r.read(e,{type:"binary"});case"buffer":case"array":return $r.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Dy(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var ja=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Ffe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,yD=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Dfe=/<[^>]*>/g,wo=ja.match(yD)?yD:Dfe,Ofe=/<\w*:/,Ife=/<(\/?)\w+:/;function tn(e,t,r){for(var n={},s=0,a=0;s!==e.length&&!((a=e.charCodeAt(s))===32||a===10||a===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var i=e.match(Ffe),o=0,l="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],a=0;a!=f.length&&f.charCodeAt(a)!==61;++a);for(d=f.slice(0,a).trim();f.charCodeAt(a+1)==32;)++a;for(h=(s=f.charCodeAt(a+1))==34||s==39?1:0,l=f.slice(a+1+h,f.length-h),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var g=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[g]&&d.slice(o-3,o)=="ext")continue;n[g]=l,n[g.toLowerCase()]=l}}return n}function nd(e){return e.replace(Ife,"<$1")}var FH={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},QC=i3(FH),On=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",a=s.indexOf("<![CDATA[");if(a==-1)return s.replace(e,function(o,l){return FH[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=s.indexOf("]]>");return r(s.slice(0,a))+s.slice(a+9,i)+r(s.slice(i+3))}})(),ZC=/[&<>'"]/g,Rfe=/[\u0000-\u0008\u000b-\u001f]/g;function as(e){var t=e+"";return t.replace(ZC,function(r){return QC[r]}).replace(Rfe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function vD(e){return as(e).replace(/ /g,"_x0020_")}var DH=/[\u0000-\u001f]/g;function eE(e){var t=e+"";return t.replace(ZC,function(r){return QC[r]}).replace(/\n/g,"<br/>").replace(DH,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Lfe(e){var t=e+"";return t.replace(ZC,function(r){return QC[r]}).replace(DH,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var wD=(function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}})();function Bfe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Es(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function IS(e){for(var t="",r=0,n=0,s=0,a=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=s&63,t+=String.fromCharCode(i);continue}if(a=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|a&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function bD(e){var t=Bf(2*e.length),r,n,s=1,a=0,i=0,o;for(n=0;n<e.length;n+=s)s=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[a++]=i&255,t[a++]=i>>>8,i=0),t[a++]=r%256,t[a++]=r>>>8;return t.slice(0,a).toString("ucs2")}function _D(e){return x0(e,"binary").toString("utf8")}var ub="foo bar baz",us=vn&&(_D(ub)==IS(ub)&&_D||bD(ub)==IS(ub)&&bD)||IS,Uu=vn?function(e){return x0(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Nv=(function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),OH=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}})(),$fe=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),zfe=/<\/?(?:vt:)?variant>/g,Ufe=/<(?:vt:)([^>]*)>([\s\S]*)</;function SD(e,t){var r=tn(e),n=e.match($fe(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(a){var i=a.replace(zfe,"").match(Ufe);i&&s.push({v:us(i[2]),t:i[1]})}),s}var IH=/(^\s|\s$|\n)/;function qi(e,t){return"<"+e+(t.match(IH)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Av(e){return ma(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function ur(e,t,r){return"<"+e+(r!=null?Av(r):"")+(t!=null?(t.match(IH)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function $8(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function Wfe(e,t){switch(typeof e){case"string":var r=ur("vt:lpwstr",as(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return ur((e|0)==e?"vt:i4":"vt:r8",as(String(e)));case"boolean":return ur("vt:bool",e?"true":"false")}if(e instanceof Date)return ur("vt:filetime",$8(e));throw new Error("Unable to serialize "+e)}function tE(e){if(vn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return us(Qf(qC(e)));throw new Error("Bad input format: expected Buffer or string")}var jv=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,ti={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Vm=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],El={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Hfe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,a=5;a>=0;--a)s=s*256+e[t+a];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function Gfe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,a=0,i=n?-t:t;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(t)?26985:0);for(var o=0;o<=5;++o,a/=256)e[r+o]=a&255;e[r+6]=(s&15)<<4|a&15,e[r+7]=s>>4|n}var kD=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,a=e[0][n].length;s<a;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},TD=vn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:x0(t)})):kD(e)}:kD,CD=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(Gd(e,s)));return n.join("").replace(zo,"")},rE=vn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(zo,""):CD(e,t,r)}:CD,ED=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},RH=vn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):ED(e,t,r)}:ED,ND=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(lp(e,s)));return n.join("")},b2=vn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):ND(t,r,n)}:ND,LH=function(e,t){var r=Nl(e,t);return r>0?b2(e,t+4,t+4+r-1):""},BH=LH,$H=function(e,t){var r=Nl(e,t);return r>0?b2(e,t+4,t+4+r-1):""},zH=$H,UH=function(e,t){var r=2*Nl(e,t);return r>0?b2(e,t+4,t+4+r-1):""},WH=UH,HH=function(t,r){var n=Nl(t,r);return n>0?rE(t,r+4,r+4+n):""},GH=HH,VH=function(e,t){var r=Nl(e,t);return r>0?b2(e,t+4,t+4+r):""},qH=VH,KH=function(e,t){return Hfe(e,t)},O4=KH,nE=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};vn&&(BH=function(t,r){if(!Buffer.isBuffer(t))return LH(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},zH=function(t,r){if(!Buffer.isBuffer(t))return $H(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},WH=function(t,r){if(!Buffer.isBuffer(t))return UH(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},GH=function(t,r){if(!Buffer.isBuffer(t))return HH(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},qH=function(t,r){if(!Buffer.isBuffer(t))return VH(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},O4=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):KH(t,r)},nE=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var lp=function(e,t){return e[t]},Gd=function(e,t){return e[t+1]*256+e[t]},Vfe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Nl=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Gh=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},qfe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Ky(e,t){var r="",n,s,a=[],i,o,l,u;switch(t){case"dbcs":if(u=this.l,vn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(l=0;l<e;++l)r+=String.fromCharCode(Gd(this,u)),u+=2;e*=2;break;case"utf8":r=b2(this,this.l,this.l+e);break;case"utf16le":e*=2,r=rE(this,this.l,this.l+e);break;case"wstr":return Ky.call(this,e,"dbcs");case"lpstr-ansi":r=BH(this,this.l),e=4+Nl(this,this.l);break;case"lpstr-cp":r=zH(this,this.l),e=4+Nl(this,this.l);break;case"lpwstr":r=WH(this,this.l),e=4+2*Nl(this,this.l);break;case"lpp4":e=4+Nl(this,this.l),r=GH(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Nl(this,this.l),r=qH(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=lp(this,this.l+e++))!==0;)a.push(cb(i));r=a.join("");break;case"_wstr":for(e=0,r="";(i=Gd(this,this.l+e))!==0;)a.push(cb(i)),e+=2;e+=2,r=a.join("");break;case"dbcs-cont":for(r="",u=this.l,l=0;l<e;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=lp(this,u),this.l=u+1,o=Ky.call(this,e-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(cb(Gd(this,u))),u+=2}r=a.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,l=0;l!=e;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=lp(this,u),this.l=u+1,o=Ky.call(this,e-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(cb(lp(this,u))),u+=1}r=a.join("");break;default:switch(e){case 1:return n=lp(this,this.l),this.l++,n;case 2:return n=(t==="i"?Vfe:Gd)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Gh:qfe)(this,this.l),this.l+=4,n):(s=Nl(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=O4(this,this.l):s=O4([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=RH(this,this.l,e);break}}return this.l+=e,r}var Kfe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Yfe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Xfe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Jfe(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)Xfe(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var i=t.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,Kfe(this,t,this.l);break;case 8:if(n=8,r==="f"){Gfe(this,t,this.l);break}case 16:break;case-4:n=4,Yfe(this,t,this.l);break}return this.l+=n,this}function YH(e,t){var r=RH(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Wi(e,t){e.l=t,e.read_shift=Ky,e.chk=YH,e.write_shift=Jfe}function vo(e,t){e.l+=t}function Mt(e){var t=Bf(e);return Wi(t,0),t}function y0(e,t,r){if(e){var n,s,a;Wi(e,e.l||0);for(var i=e.length,o=0,l=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=Iv[o]||Iv[65535];for(n=e.read_shift(1),a=n&127,s=1;s<4&&n&128;++s)a+=((n=e.read_shift(1))&127)<<7*s;l=e.l+a;var d=u.f&&u.f(e,a,r);if(e.l=l,t(d,u,o))return}}}function ul(){var e=[],t=vn?256:2048,r=function(u){var d=Mt(u);return Wi(d,0),d},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},a=function(u){return n&&u<n.length-n.l?n:(s(),n=r(Math.max(u+1,t)))},i=function(){return s(),wi(e)},o=function(u){s(),n=u,n.l==null&&(n.l=n.length),a(t)};return{next:a,push:o,end:i,_bufs:e}}function Wt(e,t,r,n){var s=+t,a;if(!isNaN(s)){n||(n=Iv[s].p||(r||[]).length||0),a=1+(s>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var i=e.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,(s&127)+128),i.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&nE(r)&&e.push(r)}}function Yy(e,t,r){var n=Ps(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function AD(e,t,r){var n=Ps(e);return n.s=Yy(n.s,t.s,r),n.e=Yy(n.e,t.s,r),n}function Xy(e,t){if(e.cRel&&e.c<0)for(e=Ps(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Ps(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Qr(e);return!e.cRel&&e.cRel!=null&&(r=ehe(r)),!e.rRel&&e.rRel!=null&&(r=Qfe(r)),r}function RS(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Ys(e.s.c)+":"+(e.e.cRel?"":"$")+Ys(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Na(e.s.r)+":"+(e.e.rRel?"":"$")+Na(e.e.r):Xy(e.s,t.biff)+":"+Xy(e.e,t.biff)}function sE(e){return parseInt(Zfe(e),10)-1}function Na(e){return""+(e+1)}function Qfe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Zfe(e){return e.replace(/\$(\d+)$/,"$1")}function aE(e){for(var t=the(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Ys(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function ehe(e){return e.replace(/^([A-Z])/,"$$$1")}function the(e){return e.replace(/^\$([A-Z])/,"$1")}function rhe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Xs(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function Qr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function dl(e){var t=e.indexOf(":");return t==-1?{s:Xs(e),e:Xs(e)}:{s:Xs(e.slice(0,t)),e:Xs(e.slice(t+1))}}function pn(e,t){return typeof t>"u"||typeof t=="number"?pn(e.s,e.e):(typeof e!="string"&&(e=Qr(e)),typeof t!="string"&&(t=Qr(t)),e==t?e:e+":"+t)}function Rn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,a=e.length;for(r=0;n<a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===a||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function jD(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=bc(e.z,r?si(t):t)}catch{}try{return e.w=bc((e.XF||{}).numFmtId||(r?14:0),r?si(t):t)}catch{return""+t}}function c0(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?v0[e.v]||e.v:t==null?jD(e,e.v):jD(e,t))}function Zf(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function XH(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,a=e||(s?[]:{}),i=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Xs(n.origin):n.origin;i=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=Rn(a["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var g={v:t[f][h]},x=i+f,y=o+h;if(u.s.r>x&&(u.s.r=x),u.s.c>y&&(u.s.c=y),u.e.r<x&&(u.e.r=x),u.e.c<y&&(u.e.c=y),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))g=t[f][h];else if(Array.isArray(g.v)&&(g.f=t[f][h][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||Xr[14],n.cellDates?(g.t="d",g.w=bc(g.z,si(g.v))):(g.t="n",g.v=si(g.v),g.w=bc(g.z,g.v))):g.t="s";if(s)a[x]||(a[x]=[]),a[x][y]&&a[x][y].z&&(g.z=a[x][y].z),a[x][y]=g;else{var v=Qr({c:y,r:x});a[v]&&a[v].z&&(g.z=a[v].z),a[v]=g}}}return u.s.c<1e7&&(a["!ref"]=pn(u)),a}function b1(e,t){return XH(null,e,t)}function nhe(e){return e.read_shift(4,"i")}function nu(e,t){return t||(t=Mt(4)),t.write_shift(4,e),t}function xo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function _i(e,t){var r=!1;return t==null&&(r=!0,t=Mt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function she(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function ahe(e,t){return t||(t=Mt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function iE(e,t){var r=e.l,n=e.read_shift(1),s=xo(e),a=[],i={t:s,h:s};if((n&1)!==0){for(var o=e.read_shift(4),l=0;l!=o;++l)a.push(she(e));i.r=a}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function ihe(e,t){var r=!1;return t==null&&(r=!0,t=Mt(15+4*e.t.length)),t.write_shift(1,0),_i(e.t,t),r?t.slice(0,t.l):t}var ohe=iE;function lhe(e,t){var r=!1;return t==null&&(r=!0,t=Mt(23+4*e.t.length)),t.write_shift(1,1),_i(e.t,t),t.write_shift(4,1),ahe({},t),r?t.slice(0,t.l):t}function Cc(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function qm(e,t){return t==null&&(t=Mt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Km(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Ym(e,t){return t==null&&(t=Mt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var che=xo,JH=_i;function oE(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function I4(e,t){var r=!1;return t==null&&(r=!0,t=Mt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var uhe=xo,z8=oE,lE=I4;function cE(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?O4([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Gh(t,0)>>2;return r?s/100:s}function QH(e,t){t==null&&(t=Mt(4));var r=0,n=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function ZH(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function dhe(e,t){return t||(t=Mt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Xm=ZH,_1=dhe;function ho(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Pm(e,t){return(t||Mt(8)).write_shift(8,e,"f")}function fhe(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),a=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var u=om[s];u&&(t.rgb=Mv(u));break;case 2:t.rgb=Mv([i,o,l]);break;case 3:t.theme=s;break}return a!=0&&(t.tint=a>0?a/32767:a/32768),t}function R4(e,t){if(t||(t=Mt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function hhe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function mhe(e,t){t||(t=Mt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function eG(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function ghe(e){return eG(e,1)}function phe(e){return eG(e,2)}var uE=2,rl=3,db=11,PD=12,L4=19,fb=64,xhe=65,yhe=71,vhe=4108,whe=4126,pi=80,tG=81,bhe=[pi,tG],U8={1:{n:"CodePage",t:uE},2:{n:"Category",t:pi},3:{n:"PresentationFormat",t:pi},4:{n:"ByteCount",t:rl},5:{n:"LineCount",t:rl},6:{n:"ParagraphCount",t:rl},7:{n:"SlideCount",t:rl},8:{n:"NoteCount",t:rl},9:{n:"HiddenCount",t:rl},10:{n:"MultimediaClipCount",t:rl},11:{n:"ScaleCrop",t:db},12:{n:"HeadingPairs",t:vhe},13:{n:"TitlesOfParts",t:whe},14:{n:"Manager",t:pi},15:{n:"Company",t:pi},16:{n:"LinksUpToDate",t:db},17:{n:"CharacterCount",t:rl},19:{n:"SharedDoc",t:db},22:{n:"HyperlinksChanged",t:db},23:{n:"AppVersion",t:rl,p:"version"},24:{n:"DigSig",t:xhe},26:{n:"ContentType",t:pi},27:{n:"ContentStatus",t:pi},28:{n:"Language",t:pi},29:{n:"Version",t:pi},255:{},2147483648:{n:"Locale",t:L4},2147483651:{n:"Behavior",t:L4},1919054434:{}},W8={1:{n:"CodePage",t:uE},2:{n:"Title",t:pi},3:{n:"Subject",t:pi},4:{n:"Author",t:pi},5:{n:"Keywords",t:pi},6:{n:"Comments",t:pi},7:{n:"Template",t:pi},8:{n:"LastAuthor",t:pi},9:{n:"RevNumber",t:pi},10:{n:"EditTime",t:fb},11:{n:"LastPrinted",t:fb},12:{n:"CreatedDate",t:fb},13:{n:"ModifiedDate",t:fb},14:{n:"PageCount",t:rl},15:{n:"WordCount",t:rl},16:{n:"CharCount",t:rl},17:{n:"Thumbnail",t:yhe},18:{n:"Application",t:pi},19:{n:"DocSecurity",t:rl},255:{},2147483648:{n:"Locale",t:L4},2147483651:{n:"Behavior",t:L4},1919054434:{}},MD={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},_he=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function She(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var khe=She([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),om=Ps(khe),v0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},rG={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},H8={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},hb={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function dE(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function The(e){var t=dE();if(!e||!e.match)return t;var r={};if((e.match(wo)||[]).forEach(function(n){var s=tn(n);switch(s[0].replace(Ofe,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[H8[s.ContentType]]!==void 0&&t[H8[s.ContentType]].push(s.PartName);break}}),t.xmlns!==ti.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function nG(e,t){var r=Tfe(H8),n=[],s;n[n.length]=ja,n[n.length]=ur("Types",null,{xmlns:ti.CT,"xmlns:xsd":ti.xsd,"xmlns:xsi":ti.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return ur("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){e[l]&&e[l].length>0&&(s=e[l][0],n[n.length]=ur("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:hb[l][t.bookType]||hb[l].xlsx}))},i=function(l){(e[l]||[]).forEach(function(u){n[n.length]=ur("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:hb[l][t.bookType]||hb[l].xlsx})})},o=function(l){(e[l]||[]).forEach(function(u){n[n.length]=ur("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[l][0]})})};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Sn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Pv(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Jy(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(wo)||[]).forEach(function(s){var a=tn(s);if(a[0]==="<Relationship"){var i={};i.Type=a.Type,i.Target=a.Target,i.Id=a.Id,a.TargetMode&&(i.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:Dy(a.Target,t);r[o]=i,n[a.Id]=i}}),r["!id"]=n,r}function Ap(e){var t=[ja,ur("Relationships",null,{xmlns:ti.RELS})];return ma(e["!id"]).forEach(function(r){t[t.length]=ur("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ns(e,t,r,n,s,a){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=n,s.Target=r,[Sn.HLINK,Sn.XPATH,Sn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var Che="application/vnd.oasis.opendocument.spreadsheet";function Ehe(e,t){for(var r=tE(e),n,s;n=jv.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=tn(n[0],!1),s.path=="/"&&s.type!==Che)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function Nhe(e){var t=[ja];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function FD(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function Ahe(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function jhe(e){var t=[ja];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(FD(e[r][0],e[r][1])),t.push(Ahe("",e[r][0]));return t.push(FD("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function sG(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+j4.version+"</meta:generator></office:meta></office:document-meta>"}var pc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Phe=(function(){for(var e=new Array(pc.length),t=0;t<pc.length;++t){var r=pc[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e})();function aG(e){var t={};e=us(e);for(var r=0;r<pc.length;++r){var n=pc[r],s=e.match(Phe[r]);s!=null&&s.length>0&&(t[n[1]]=On(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=js(t[n[1]]))}return t}function LS(e,t,r,n,s){s[e]!=null||t==null||t===""||(s[e]=t,t=as(t),n[n.length]=r?ur(e,t,r):qi(e,t))}function iG(e,t){var r=t||{},n=[ja,ur("cp:coreProperties",null,{"xmlns:cp":ti.CORE_PROPS,"xmlns:dc":ti.dc,"xmlns:dcterms":ti.dcterms,"xmlns:dcmitype":ti.dcmitype,"xmlns:xsi":ti.xsi})],s={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&LS("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:$8(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),e.ModifiedDate!=null&&LS("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:$8(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var a=0;a!=pc.length;++a){var i=pc[a],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&LS(i[0],o,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var lm=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],oG=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function lG(e,t,r,n){var s=[];if(typeof e=="string")s=SD(e,n);else for(var a=0;a<e.length;++a)s=s.concat(e[a].map(function(d){return{v:d}}));var i=typeof t=="string"?SD(t,n).map(function(d){return d.v}):t,o=0,l=0;if(i.length>0)for(var u=0;u!==s.length;u+=2){switch(l=+s[u+1].v,s[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=i.slice(o,o+l);break}o+=l}}function Mhe(e,t,r){var n={};return t||(t={}),e=us(e),lm.forEach(function(s){var a=(e.match(Nv(s[0]))||[])[1];switch(s[2]){case"string":a&&(t[s[1]]=On(a));break;case"bool":t[s[1]]=a==="true";break;case"raw":var i=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));i&&i.length>0&&(n[s[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&lG(n.HeadingPairs,n.TitlesOfParts,t,r),t}function cG(e){var t=[],r=ur;return e||(e={}),e.Application="SheetJS",t[t.length]=ja,t[t.length]=ur("Properties",null,{xmlns:ti.EXT_PROPS,"xmlns:vt":ti.vt}),lm.forEach(function(n){if(e[n[1]]!==void 0){var s;switch(n[2]){case"string":s=as(String(e[n[1]]));break;case"bool":s=e[n[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(n[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+as(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Fhe=/<[^>]+>[^<]*/g;function Dhe(e,t){var r={},n="",s=e.match(Fhe);if(s)for(var a=0;a!=s.length;++a){var i=s[a],o=tn(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=On(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),u=l[0].slice(4),d=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=On(d);break;case"bool":r[n]=Es(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=js(d);break;case"cy":case"error":r[n]=On(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,l)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function uG(e){var t=[ja,ur("Properties",null,{xmlns:ti.CUST_PROPS,"xmlns:vt":ti.vt})];if(!e)return t.join("");var r=1;return ma(e).forEach(function(s){++r,t[t.length]=ur("property",Wfe(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:as(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var G8={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},BS;function Ohe(e,t,r){BS||(BS=i3(G8)),t=BS[t]||t,e[t]=r}function Ihe(e,t){var r=[];return ma(G8).map(function(n){for(var s=0;s<pc.length;++s)if(pc[s][1]==n)return pc[s];for(s=0;s<lm.length;++s)if(lm[s][1]==n)return lm[s];throw n}).forEach(function(n){if(e[n[1]]!=null){var s=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(qi(G8[n[1]]||n[1],s))}}),ur("DocumentProperties",r.join(""),{xmlns:El.o})}function Rhe(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return e&&ma(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)){for(var i=0;i<pc.length;++i)if(a==pc[i][1])return;for(i=0;i<lm.length;++i)if(a==lm[i][1])return;for(i=0;i<r.length;++i)if(a==r[i])return;var o=e[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),s.push(ur(vD(a),o,{"dt:dt":l}))}}),t&&ma(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)&&!(e&&Object.prototype.hasOwnProperty.call(e,a))){var i=t[a],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),s.push(ur(vD(a),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+El.o+'">'+s.join("")+"</"+n+">"}function fE(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Lhe(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),s+=a);var i=Mt(8);return i.write_shift(4,n),i.write_shift(4,s),i}function dG(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function fG(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function hG(e,t,r){return t===31?fG(e):dG(e,t,r)}function V8(e,t,r){return hG(e,t,r===!1?0:4)}function Bhe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return hG(e,t,0)}function $he(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(zo,""),e.l-s&2&&(e.l+=2)}return r}function zhe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(zo,"");return r}function Uhe(e){var t=e.l,r=B4(e,tG);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=B4(e,rl);return[r,n]}function Whe(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(Uhe(e));return r}function DD(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var a=e.read_shift(4),i=e.read_shift(4);n[a]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(zo,"").replace(Fy,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function mG(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function Hhe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function B4(e,t,r){var n=e.read_shift(2),s,a=r||{};if(e.l+=2,t!==PD&&n!==t&&bhe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===PD?n:t){case 2:return s=e.read_shift(2,"i"),a.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return dG(e,n,4).replace(zo,"");case 31:return fG(e);case 64:return fE(e);case 65:return mG(e);case 71:return Hhe(e);case 80:return V8(e,n,!a.raw).replace(zo,"");case 81:return Bhe(e,n).replace(zo,"");case 4108:return Whe(e);case 4126:case 4127:return n==4127?$he(e):zhe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function OD(e,t){var r=Mt(4),n=Mt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Mt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=Lhe(t);break;case 31:case 80:for(n=Mt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return wi([r,n])}function ID(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),a=[],i=0,o=0,l=-1,u={};for(i=0;i!=s;++i){var d=e.read_shift(4),f=e.read_shift(4);a[i]=[d,f+r]}a.sort(function(k,b){return k[1]-b[1]});var h={};for(i=0;i!=s;++i){if(e.l!==a[i][1]){var g=!0;if(i>0&&t)switch(t[a[i-1][0]].t){case 2:e.l+2===a[i][1]&&(e.l+=2,g=!1);break;case 80:e.l<=a[i][1]&&(e.l=a[i][1],g=!1);break;case 4108:e.l<=a[i][1]&&(e.l=a[i][1],g=!1);break}if((!t||i==0)&&e.l<=a[i][1]&&(g=!1,e.l=a[i][1]),g)throw new Error("Read Error: Expected address "+a[i][1]+" at "+e.l+" :"+i)}if(t){var x=t[a[i][0]];if(h[x.n]=B4(e,x.t,{raw:!0}),x.p==="version"&&(h[x.n]=String(h[x.n]>>16)+"."+("0000"+String(h[x.n]&65535)).slice(-4)),x.n=="CodePage")switch(h[x.n]){case 0:h[x.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Zc(o=h[x.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[x.n])}}else if(a[i][0]===1){if(o=h.CodePage=B4(e,uE),Zc(o),l!==-1){var y=e.l;e.l=a[l][1],u=DD(e,o),e.l=y}}else if(a[i][0]===0){if(o===0){l=i,e.l=a[i+1][1];continue}u=DD(e,o)}else{var v=u[a[i][0]],T;switch(e[e.l]){case 65:e.l+=4,T=mG(e);break;case 30:e.l+=4,T=V8(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,T=V8(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,T=e.read_shift(4,"i");break;case 19:e.l+=4,T=e.read_shift(4);break;case 5:e.l+=4,T=e.read_shift(8,"f");break;case 11:e.l+=4,T=ka(e,4);break;case 64:e.l+=4,T=js(fE(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[v]=T}}return e.l=r+n,h}var gG=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Ghe(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function RD(e,t,r){var n=Mt(8),s=[],a=[],i=8,o=0,l=Mt(8),u=Mt(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),a.push(l),s.push(u),i+=8+l.length,!t){u=Mt(8),u.write_shift(4,0),s.unshift(u);var d=[Mt(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(l=Mt(8+2*(f.length+1)+(f.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,f.length+1),l.write_shift(0,f,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=wi(d),a.unshift(l),i+=8+l.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(gG.indexOf(e[o][0])>-1||oG.indexOf(e[o][0])>-1)&&e[o][1]!=null){var h=e[o][1],g=0;if(t){g=+t[e[o][0]];var x=r[g];if(x.p=="version"&&typeof h=="string"){var y=h.split(".");h=(+y[0]<<16)+(+y[1]||0)}l=OD(x.t,h)}else{var v=Ghe(h);v==-1&&(v=31,h=String(h)),l=OD(v,h)}a.push(l),u=Mt(8),u.write_shift(4,t?g:2+o),s.push(u),i+=8+l.length}var T=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,T),T+=a[o].length;return n.write_shift(4,i),n.write_shift(4,a.length),wi([n].concat(s).concat(a))}function LD(e,t,r){var n=e.content;if(!n)return{};Wi(n,0);var s,a,i,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==$r.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(a=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(i=n.read_shift(16),l=n.read_shift(4));var f=ID(n,t),h={SystemIdentifier:u};for(var g in f)h[g]=f[g];if(h.FMTID=a,s===1)return h;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var x;try{x=ID(n,null)}catch{}for(g in x)h[g]=x[g];return h.FMTID=[a,i],h}function BD(e,t,r,n,s,a){var i=Mt(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,$r.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,s?68:48);var l=RD(e,r,n);if(o.push(l),s){var u=RD(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+l.length),o.push(u)}return wi(o)}function hf(e,t){return e.read_shift(t),null}function Vhe(e,t){t||(t=Mt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function qhe(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function ka(e,t){return e.read_shift(t)===1}function Oo(e,t){return t||(t=Mt(2)),t.write_shift(2,+!!e),t}function La(e){return e.read_shift(2,"u")}function lc(e,t){return t||(t=Mt(2)),t.write_shift(2,e),t}function pG(e,t){return qhe(e,t,La)}function Khe(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function xG(e,t,r){return r||(r=Mt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function _2(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=e.read_shift(1);a&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var i=n?e.read_shift(n,s):"";return i}function Yhe(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,a=1+(r&1),i=0,o,l={};s&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var u=a==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return s&&(e.l+=4*i),n&&(e.l+=o),l.t=d,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function Xhe(e){var t=e.t||"",r=Mt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Mt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var s=[r,n];return wi(s)}function Mm(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function S2(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Mm(e,n,r)}function Jm(e,t,r){if(r.biff>5)return S2(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function yG(e,t,r){return r||(r=Mt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function Jhe(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Qhe(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(zo,"");return n&&(e.l+=24),s}function Zhe(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var a=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(a>>1,"utf16le").replace(zo,"");return r+i}function eme(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Qhe(e);case"0303000000000000c000000000000046":return Zhe(e);default:throw new Error("Unsupported Moniker "+r)}}function mb(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(zo,""):"";return r}function $D(e,t){t||(t=Mt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function tme(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var a,i,o,l,u="",d,f;s&16&&(a=mb(e,r-e.l)),s&128&&(i=mb(e,r-e.l)),(s&257)===257&&(o=mb(e,r-e.l)),(s&257)===1&&(l=eme(e,r-e.l)),s&8&&(u=mb(e,r-e.l)),s&32&&(d=e.read_shift(16)),s&64&&(f=fE(e)),e.l=r;var h=i||o||l||"";h&&u&&(h+="#"+u),h||(h="#"+u),s&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var g={Target:h};return d&&(g.guid=d),f&&(g.time=f),a&&(g.Tooltip=a),g}function rme(e){var t=Mt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),a=s>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}t.write_shift(4,2),t.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(a==28)n=n.slice(1),$D(n,t);else if(a&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=s>-1?n.slice(0,s):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),a&8&&$D(s>-1?n.slice(s+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)t.write_shift(1,n.charCodeAt(r+3*l)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function vG(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function wG(e,t){var r=vG(e);return r[3]=0,r}function sd(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function Fm(e,t,r,n){return n||(n=Mt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function nme(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function sme(e,t,r){return t===0?"":Jm(e,t,r)}function ame(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),a=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[s,a,i]}function bG(e){var t=e.read_shift(2),r=cE(e);return[t,r]}function ime(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=_2(e,t,r),a=e.read_shift(2);if(n-=e.l,a!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return e.l+=a,s}function c3(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function _G(e,t){return t||(t=Mt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function SG(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var ome=SG;function kG(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function lme(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function cme(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function ao(e){e.l+=2,e.l+=e.read_shift(2)}var ume={0:ao,4:ao,5:ao,6:ao,7:cme,8:ao,9:ao,10:ao,11:ao,12:ao,13:lme,14:ao,15:ao,16:ao,17:ao,18:ao,19:ao,20:ao,21:kG};function dme(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(ume[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function gb(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function hE(e,t,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=Mt(s);return a.write_shift(2,n),a.write_shift(2,t),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function fme(e,t){return t===0||e.read_shift(2),1200}function hme(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=Jm(e,0,r);return e.read_shift(t+n-e.l),s}function mme(e,t){var r=!t||t.biff==8,n=Mt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function gme(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function pme(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,a=e.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var i=_2(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:s,dt:a,name:i}}function xme(e,t){var r=!t||t.biff>=8?2:1,n=Mt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function yme(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),a=[],i=0;i!=s&&e.l<r;++i)a.push(Yhe(e));return a.Count=n,a.Unique=s,a}function vme(e,t){var r=Mt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],s=0;s<e.length;++s)n[s]=Xhe(e[s]);var a=wi([r].concat(n));return a.parts=[r.length].concat(n.map(function(i){return i.length})),a}function wme(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function bme(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function _me(e){var t=nme(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function Sme(e){return e.read_shift(2),e.read_shift(4)}function zD(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var a={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[a,s]}function kme(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:a,CurTab:i,FirstTab:o,Selected:l,TabRatio:u}}function Tme(){var e=Mt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function Cme(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function Eme(e){var t=Mt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function Nme(){}function Ame(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=_2(e,0,r),n}function jme(e,t){var r=e.name||"Arial",n=t&&t.biff==5,s=n?15+r.length:16+2*r.length,a=Mt(s);return a.write_shift(2,e.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}function Pme(e){var t=sd(e);return t.isst=e.read_shift(4),t}function Mme(e,t,r,n){var s=Mt(10);return Fm(e,t,n,s),s.write_shift(4,r),s}function Fme(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=sd(e);r.biff==2&&e.l++;var a=S2(e,n-e.l,r);return s.val=a,s}function Dme(e,t,r,n,s){var a=!s||s.biff==8,i=Mt(8+ +a+(1+a)*r.length);return Fm(e,t,n,i),i.write_shift(2,r.length),a&&i.write_shift(1,1),i.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),i}function Ome(e,t,r){var n=e.read_shift(2),s=Jm(e,0,r);return[n,s]}function Ime(e,t,r,n){var s=r&&r.biff==5;n||(n=Mt(s?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(s?1:2,t.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}var Rme=Jm;function UD(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,a=e.read_shift(s),i=e.read_shift(s),o=e.read_shift(2),l=e.read_shift(2);return e.l=n,{s:{r:a,c:o},e:{r:i,c:l}}}function Lme(e,t){var r=t.biff==8||!t.biff?4:2,n=Mt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function Bme(e){var t=e.read_shift(2),r=e.read_shift(2),n=bG(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function $me(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),a=[];e.l<r;)a.push(bG(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:i,rkrec:a}}function zme(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),a=[];e.l<r;)a.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:i,ixfe:a}}function Ume(e,t,r,n){var s={},a=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return s.patternType=_he[o>>26],n.cellStyles&&(s.alc=a&7,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=i&15,s.dgRight=i>>4&15,s.dgTop=i>>8&15,s.dgBottom=i>>12&15,s.icvLeft=i>>16&127,s.icvRight=i>>23&127,s.grbitDiag=i>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function Wme(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=Ume(e,t,n.fStyle,r),n}function WD(e,t,r,n){var s=r&&r.biff==5;n||(n=Mt(s?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var a=0;return e.numFmtId>0&&s&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function Hme(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function Gme(e){var t=Mt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function HD(e,t,r){var n=sd(e);(r.biff==2||t==9)&&++e.l;var s=Khe(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function Vme(e,t,r,n,s,a){var i=Mt(8);return Fm(e,t,n,i),xG(r,a,i),i}function qme(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=sd(e),s=ho(e);return n.val=s,n}function Kme(e,t,r,n){var s=Mt(14);return Fm(e,t,n,s),Pm(r,s),s}var GD=sme;function Yme(e,t,r){var n=e.l+t,s=e.read_shift(2),a=e.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var i=Mm(e,a),o=[];n>e.l;)o.push(S2(e));return[a,s,i,o]}function VD(e,t,r){var n=e.read_shift(2),s,a={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=ime(e,t-2,r)),a.body=s||e.read_shift(t-2),typeof s=="string"&&(a.Name=s),a}var Xme=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function qD(e,t,r){var n=e.l+t,s=e.read_shift(2),a=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),l=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Mm(e,i,r);s&32&&(u=Xme[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:dye(e,d,r,o);return{chKey:a,Name:u,itab:l,rgce:f}}function TG(e,t,r){if(r.biff<8)return Jme(e,t,r);for(var n=[],s=e.l+t,a=e.read_shift(r.biff>8?4:2);a--!==0;)n.push(ame(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function Jme(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=_2(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function Qme(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),a=Mm(e,n,r),i=Mm(e,s,r);return[a,i]}function Zme(e,t,r){var n=SG(e);e.l++;var s=e.read_shift(1);return t-=8,[fye(e,t,r),s,n]}function KD(e,t,r){var n=ome(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,cye(e,t,r)]}function ege(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function tge(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=Jm(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},o,i,a]}}function rge(e,t,r){return tge(e,t,r)}function nge(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(c3(e));return r}function sge(e){var t=Mt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)_G(e[r],t);return t}function age(e,t,r){if(r&&r.biff<8)return oge(e,t,r);var n=kG(e),s=dme(e,t-22,n[1]);return{cmo:n,ft:s}}var ige={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function oge(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((ige[n]||vo)(e,t,r)),{cmo:[s,n,a],ft:i}}function lge(e,t,r){var n=e.l,s="";try{e.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(a)==-1?e.l+=6:i=Jhe(e,6,r);var o=e.read_shift(2);e.read_shift(2),La(e,2);var l=e.read_shift(2);e.l+=l;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=Mm(e,e.lens[u+1]-e.lens[u]-1);if(s+=f,s.length>=(d?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function cge(e,t){var r=c3(e);e.l+=16;var n=tme(e,t-24);return[r,n]}function uge(e){var t=Mt(24),r=Xs(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(n[s],16));return wi([t,rme(e[1])])}function dge(e,t){e.read_shift(2);var r=c3(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(zo,""),[r,n]}function fge(e){var t=e[1].Tooltip,r=Mt(10+2*(t.length+1));r.write_shift(2,2048);var n=Xs(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function hge(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=MD[r]||r,r=e.read_shift(2),t[1]=MD[r]||r,t}function mge(e){return e||(e=Mt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function gge(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(wG(e));return r}function pge(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(wG(e));return r}function xge(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function CG(e,t,r){if(!r.cellStyles)return vo(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),a=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2);n==2&&(e.l+=2);var u={s,e:a,w:i,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(u.level=l>>8&7),u}function yge(e,t){var r=Mt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function vge(e,t){var r={};return t<32||(e.l+=16,r.header=ho(e),r.footer=ho(e),e.l+=2),r}function wge(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}function bge(e){for(var t=Mt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var _ge=sd,Sge=pG,kge=S2;function Tge(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function Cge(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=sd(e);++e.l;var s=Jm(e,t-7,r);return n.t="str",n.val=s,n}function Ege(e){var t=sd(e);++e.l;var r=ho(e);return t.t="n",t.val=r,t}function Nge(e,t,r){var n=Mt(15);return E2(n,e,t),n.write_shift(8,r,"f"),n}function Age(e){var t=sd(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function jge(e,t,r){var n=Mt(9);return E2(n,e,t),n.write_shift(2,r),n}function Pge(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Mge(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Fge(e,t,r){var n=e.l+t,s=sd(e),a=e.read_shift(2),i=Mm(e,a,r);return e.l=n,s.t="str",s.val=i,s}var Dge=[2,3,48,49,131,139,140,245],q8=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=i3({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var u=[],d=Bf(1);switch(l.type){case"base64":d=Pl(Rl(o));break;case"binary":d=Pl(o);break;case"buffer":case"array":d=o;break}Wi(d,0);var f=d.read_shift(1),h=!!(f&136),g=!1,x=!1;switch(f){case 2:break;case 3:break;case 48:g=!0,h=!0;break;case 49:g=!0,h=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var y=0,v=521;f==2&&(y=d.read_shift(2)),d.l+=3,f!=2&&(y=d.read_shift(4)),y>1048576&&(y=1e6),f!=2&&(v=d.read_shift(2));var T=d.read_shift(2),k=l.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(k=e[d[d.l]]),d.l+=1,d.l+=2),x&&(d.l+=36);for(var b=[],N={},E=Math.min(d.length,f==2?521:v-10-(g?264:0)),P=x?32:11;d.l<E&&d[d.l]!=13;)switch(N={},N.name=Tv.utils.decode(k,d.slice(d.l,d.l+P)).replace(/[\u0000\r\n].*$/g,""),d.l+=P,N.type=String.fromCharCode(d.read_shift(1)),f!=2&&!x&&(N.offset=d.read_shift(4)),N.len=d.read_shift(1),f==2&&(N.offset=d.read_shift(2)),N.dec=d.read_shift(1),N.name.length&&b.push(N),f!=2&&(d.l+=x?13:14),N.type){case"B":(!g||N.len!=8)&&l.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+N.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var M=0,j=0;for(u[0]=[],j=0;j!=b.length;++j)u[0][j]=b[j].name;for(;y-- >0;){if(d[d.l]===42){d.l+=T;continue}for(++d.l,u[++M]=[],j=0,j=0;j!=b.length;++j){var A=d.slice(d.l,d.l+b[j].len);d.l+=b[j].len,Wi(A,0);var O=Tv.utils.decode(k,A);switch(b[j].type){case"C":O.trim().length&&(u[M][j]=O.replace(/\s+$/,""));break;case"D":O.length===8?u[M][j]=new Date(+O.slice(0,4),+O.slice(4,6)-1,+O.slice(6,8)):u[M][j]=O;break;case"F":u[M][j]=parseFloat(O.trim());break;case"+":case"I":u[M][j]=x?A.read_shift(-4,"i")^2147483648:A.read_shift(4,"i");break;case"L":switch(O.trim().toUpperCase()){case"Y":case"T":u[M][j]=!0;break;case"N":case"F":u[M][j]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+O+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[M][j]="##MEMO##"+(x?parseInt(O.trim(),10):A.read_shift(4));break;case"N":O=O.replace(/\u0000/g,"").trim(),O&&O!="."&&(u[M][j]=+O||0);break;case"@":u[M][j]=new Date(A.read_shift(-8,"f")-621356832e5);break;case"T":u[M][j]=new Date((A.read_shift(4)-2440588)*864e5+A.read_shift(4));break;case"Y":u[M][j]=A.read_shift(4,"i")/1e4+A.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[M][j]=-A.read_shift(-8,"f");break;case"B":if(g&&b[j].len==8){u[M][j]=A.read_shift(8,"f");break}case"G":case"P":A.l+=b[j].len;break;case"0":if(b[j].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[j].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=b,u}function n(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var d=b1(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function s(o,l){try{return Zf(n(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var u=l||{};if(+u.codepage>=0&&Zc(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=ul(),f=U4(o,{header:1,raw:!0,cellDates:!0}),h=f[0],g=f.slice(1),x=o["!cols"]||[],y=0,v=0,T=0,k=1;for(y=0;y<h.length;++y){if(((x[y]||{}).DBF||{}).name){h[y]=x[y].DBF.name,++T;continue}if(h[y]!=null){if(++T,typeof h[y]=="number"&&(h[y]=h[y].toString(10)),typeof h[y]!="string")throw new Error("DBF Invalid column name "+h[y]+" |"+typeof h[y]+"|");if(h.indexOf(h[y])!==y){for(v=0;v<1024;++v)if(h.indexOf(h[y]+"_"+v)==-1){h[y]+="_"+v;break}}}}var b=Rn(o["!ref"]),N=[],E=[],P=[];for(y=0;y<=b.e.c-b.s.c;++y){var M="",j="",A=0,O=[];for(v=0;v<g.length;++v)g[v][y]!=null&&O.push(g[v][y]);if(O.length==0||h[y]==null){N[y]="?";continue}for(v=0;v<O.length;++v){switch(typeof O[v]){case"number":j="B";break;case"string":j="C";break;case"boolean":j="L";break;case"object":j=O[v]instanceof Date?"D":"C";break;default:j="C"}A=Math.max(A,String(O[v]).length),M=M&&M!=j?"C":j}A>250&&(A=250),j=((x[y]||{}).DBF||{}).type,j=="C"&&x[y].DBF.len>A&&(A=x[y].DBF.len),M=="B"&&j=="N"&&(M="N",P[y]=x[y].DBF.dec,A=x[y].DBF.len),E[y]=M=="C"||j=="N"?A:a[M]||0,k+=E[y],N[y]=M}var L=d.next(32);for(L.write_shift(4,318902576),L.write_shift(4,g.length),L.write_shift(2,296+32*T),L.write_shift(2,k),y=0;y<4;++y)L.write_shift(4,0);for(L.write_shift(4,0|(+t[gH]||3)<<8),y=0,v=0;y<h.length;++y)if(h[y]!=null){var q=d.next(32),Q=(h[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);q.write_shift(1,Q,"sbcs"),q.write_shift(1,N[y]=="?"?"C":N[y],"sbcs"),q.write_shift(4,v),q.write_shift(1,E[y]||a[N[y]]||0),q.write_shift(1,P[y]||0),q.write_shift(1,2),q.write_shift(4,0),q.write_shift(1,0),q.write_shift(4,0),q.write_shift(4,0),v+=E[y]||a[N[y]]||0}var ae=d.next(264);for(ae.write_shift(4,13),y=0;y<65;++y)ae.write_shift(4,0);for(y=0;y<g.length;++y){var te=d.next(k);for(te.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(N[v]){case"L":te.write_shift(1,g[y][v]==null?63:g[y][v]?84:70);break;case"B":te.write_shift(8,g[y][v]||0,"f");break;case"N":var ne="0";for(typeof g[y][v]=="number"&&(ne=g[y][v].toFixed(P[v]||0)),T=0;T<E[v]-ne.length;++T)te.write_shift(1,32);te.write_shift(1,ne,"sbcs");break;case"D":g[y][v]?(te.write_shift(4,("0000"+g[y][v].getFullYear()).slice(-4),"sbcs"),te.write_shift(2,("00"+(g[y][v].getMonth()+1)).slice(-2),"sbcs"),te.write_shift(2,("00"+g[y][v].getDate()).slice(-2),"sbcs")):te.write_shift(8,"00000000","sbcs");break;case"C":var B=String(g[y][v]!=null?g[y][v]:"").slice(0,E[v]);for(te.write_shift(1,B,"sbcs"),T=0;T<E[v]-B.length;++T)te.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:n,from_sheet:i}})(),EG=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+ma(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,g){var x=e[g];return typeof x=="number"?aD(x):x},n=function(h,g,x){var y=g.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return y==59?h:aD(y)};e["|"]=254;function s(h,g){switch(g.type){case"base64":return a(Rl(h),g);case"binary":return a(h,g);case"buffer":return a(vn&&Buffer.isBuffer(h)?h.toString("binary"):Qf(h),g);case"array":return a(jm(h),g)}throw new Error("Unrecognized type "+g.type)}function a(h,g){var x=h.split(/[\n\r]+/),y=-1,v=-1,T=0,k=0,b=[],N=[],E=null,P={},M=[],j=[],A=[],O=0,L;for(+g.codepage>=0&&Zc(+g.codepage);T!==x.length;++T){O=0;var q=x[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),Q=q.replace(/;;/g,"\0").split(";").map(function(Z){return Z.replace(/\u0000/g,";")}),ae=Q[0],te;if(q.length>0)switch(ae){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Q[1].charAt(0)=="P"&&N.push(q.slice(3).replace(/;;/g,";"));break;case"C":var ne=!1,B=!1,V=!1,R=!1,H=-1,U=-1;for(k=1;k<Q.length;++k)switch(Q[k].charAt(0)){case"A":break;case"X":v=parseInt(Q[k].slice(1))-1,B=!0;break;case"Y":for(y=parseInt(Q[k].slice(1))-1,B||(v=0),L=b.length;L<=y;++L)b[L]=[];break;case"K":te=Q[k].slice(1),te.charAt(0)==='"'?te=te.slice(1,te.length-1):te==="TRUE"?te=!0:te==="FALSE"?te=!1:isNaN(ru(te))?isNaN(Hp(te).getDate())||(te=js(te)):(te=ru(te),E!==null&&v1(E)&&(te=l3(te))),ne=!0;break;case"E":R=!0;var I=jp(Q[k].slice(1),{r:y,c:v});b[y][v]=[b[y][v],I];break;case"S":V=!0,b[y][v]=[b[y][v],"S5S"];break;case"G":break;case"R":H=parseInt(Q[k].slice(1))-1;break;case"C":U=parseInt(Q[k].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+q)}if(ne&&(b[y][v]&&b[y][v].length==2?b[y][v][0]=te:b[y][v]=te,E=null),V){if(R)throw new Error("SYLK shared formula cannot have own formula");var W=H>-1&&b[H][U];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");b[y][v][1]=GG(W[1],{r:y-H,c:v-U})}break;case"F":var K=0;for(k=1;k<Q.length;++k)switch(Q[k].charAt(0)){case"X":v=parseInt(Q[k].slice(1))-1,++K;break;case"Y":for(y=parseInt(Q[k].slice(1))-1,L=b.length;L<=y;++L)b[L]=[];break;case"M":O=parseInt(Q[k].slice(1))/20;break;case"F":break;case"G":break;case"P":E=N[parseInt(Q[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(A=Q[k].slice(1).split(" "),L=parseInt(A[0],10);L<=parseInt(A[1],10);++L)O=parseInt(A[2],10),j[L-1]=O===0?{hidden:!0}:{wch:O},$f(j[L-1]);break;case"C":v=parseInt(Q[k].slice(1))-1,j[v]||(j[v]={});break;case"R":y=parseInt(Q[k].slice(1))-1,M[y]||(M[y]={}),O>0?(M[y].hpt=O,M[y].hpx=Vp(O)):O===0&&(M[y].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+q)}K<1&&(E=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+q)}}return M.length>0&&(P["!rows"]=M),j.length>0&&(P["!cols"]=j),g&&g.sheetRows&&(b=b.slice(0,g.sheetRows)),[b,P]}function i(h,g){var x=s(h,g),y=x[0],v=x[1],T=b1(y,g);return ma(v).forEach(function(k){T[k]=v[k]}),T}function o(h,g){return Zf(i(h,g),g)}function l(h,g,x,y){var v="C;Y"+(x+1)+";X"+(y+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+vE(h.f,{r:x,c:y}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(h,g){g.forEach(function(x,y){var v="F;W"+(y+1)+" "+(y+1)+" ";x.hidden?v+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=Fv(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=Dv(x.wpx)),typeof x.wch=="number"&&(v+=Math.round(x.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function d(h,g){g.forEach(function(x,y){var v="F;";x.hidden?v+="M0;":x.hpt?v+="M"+20*x.hpt+";":x.hpx&&(v+="M"+20*Ov(x.hpx)+";"),v.length>2&&h.push(v+"R"+(y+1))})}function f(h,g){var x=["ID;PWXL;N;E"],y=[],v=Rn(h["!ref"]),T,k=Array.isArray(h),b=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),h["!cols"]&&u(x,h["!cols"]),h["!rows"]&&d(x,h["!rows"]),x.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var N=v.s.r;N<=v.e.r;++N)for(var E=v.s.c;E<=v.e.c;++E){var P=Qr({r:N,c:E});T=k?(h[N]||[])[E]:h[P],!(!T||T.v==null&&(!T.f||T.F))&&y.push(l(T,h,N,E))}return x.join(b)+b+y.join(b)+b+"E"+b}return{to_workbook:o,to_sheet:i,from_sheet:f}})(),NG=(function(){function e(a,i){switch(i.type){case"base64":return t(Rl(a),i);case"binary":return t(a,i);case"buffer":return t(vn&&Buffer.isBuffer(a)?a.toString("binary"):Qf(a),i);case"array":return t(jm(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){for(var o=a.split(`
`),l=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++l]=[],u=0;continue}if(!(l<0)){var h=o[d].trim().split(","),g=h[0],x=h[1];++d;for(var y=o[d]||"";(y.match(/["]/g)||[]).length&1&&d<o.length-1;)y+=`
`+o[++d];switch(y=y.trim(),+g){case-1:if(y==="BOT"){f[++l]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?f[l][u]=!0:y==="FALSE"?f[l][u]=!1:isNaN(ru(x))?isNaN(Hp(x).getDate())?f[l][u]=x:f[l][u]=js(x):f[l][u]=ru(x),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),f[l][u++]=y!==""?y:null;break}if(y==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(a,i){return b1(e(a,i),i)}function n(a,i){return Zf(r(a,i),i)}var s=(function(){var a=function(l,u,d,f,h){l.push(u),l.push(d+","+f),l.push('"'+h.replace(/"/g,'""')+'"')},i=function(l,u,d,f){l.push(u+","+d),l.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var u=[],d=Rn(l["!ref"]),f,h=Array.isArray(l);a(u,"TABLE",0,1,"sheetjs"),a(u,"VECTORS",0,d.e.r-d.s.r+1,""),a(u,"TUPLES",0,d.e.c-d.s.c+1,""),a(u,"DATA",0,0,"");for(var g=d.s.r;g<=d.e.r;++g){i(u,-1,0,"BOT");for(var x=d.s.c;x<=d.e.c;++x){var y=Qr({r:g,c:x});if(f=h?(l[g]||[])[x]:l[y],!f){i(u,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,v,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=bc(f.z||Xr[14],si(js(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var T=`\r
`,k=u.join(T);return k}})();return{to_workbook:n,to_sheet:r,from_sheet:s}})(),AG=(function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var g=f.split(`
`),x=-1,y=-1,v=0,T=[];v!==g.length;++v){var k=g[v].trim().split(":");if(k[0]==="cell"){var b=Xs(k[1]);if(T.length<=b.r)for(x=T.length;x<=b.r;++x)T[x]||(T[x]=[]);switch(x=b.r,y=b.c,k[2]){case"t":T[x][y]=e(k[3]);break;case"v":T[x][y]=+k[3];break;case"vtf":var N=k[k.length-1];case"vtc":switch(k[3]){case"nl":T[x][y]=!!+k[4];break;default:T[x][y]=+k[4];break}k[2]=="vtf"&&(T[x][y]=[T[x][y],N])}}}return h&&h.sheetRows&&(T=T.slice(0,h.sheetRows)),T}function n(f,h){return b1(r(f,h),h)}function s(f,h){return Zf(n(f,h),h)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],g=[],x,y="",v=dl(f["!ref"]),T=Array.isArray(f),k=v.s.r;k<=v.e.r;++k)for(var b=v.s.c;b<=v.e.c;++b)if(y=Qr({r:k,c:b}),x=T?(f[k]||[])[b]:f[y],!(!x||x.v==null||x.t==="z")){switch(g=["cell",y,"t"],x.t){case"s":case"str":g.push(t(x.v));break;case"n":x.f?(g[2]="vtf",g[3]="n",g[4]=x.v,g[5]=t(x.f)):(g[2]="v",g[3]=x.v);break;case"b":g[2]="vt"+(x.f?"f":"c"),g[3]="nl",g[4]=x.v?"1":"0",g[5]=t(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var N=si(js(x.v));g[2]="vtc",g[3]="nd",g[4]=""+N,g[5]=x.w||bc(x.z||Xr[14],N);break;case"e":continue}h.push(g.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[a,i,o,i,u(f),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:d}})(),Gp=(function(){function e(d,f,h,g,x){x.raw?f[h][g]=d:d===""||(d==="TRUE"?f[h][g]=!0:d==="FALSE"?f[h][g]=!1:isNaN(ru(d))?isNaN(Hp(d).getDate())?f[h][g]=d:f[h][g]=js(d):f[h][g]=ru(d))}function t(d,f){var h=f||{},g=[];if(!d||d.length===0)return g;for(var x=d.split(/[\r\n]/),y=x.length-1;y>=0&&x[y].length===0;)--y;for(var v=10,T=0,k=0;k<=y;++k)T=x[k].indexOf(" "),T==-1?T=x[k].length:T++,v=Math.max(v,T);for(k=0;k<=y;++k){g[k]=[];var b=0;for(e(x[k].slice(0,v).trim(),g,k,b,h),b=1;b<=(x[k].length-v)/10+1;++b)e(x[k].slice(v+(b-1)*10,v+b*10).trim(),g,k,b,h)}return h.sheetRows&&(g=g.slice(0,h.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(d){for(var f={},h=!1,g=0,x=0;g<d.length;++g)(x=d.charCodeAt(g))==34?h=!h:!h&&x in r&&(f[x]=(f[x]||0)+1);x=[];for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&x.push([f[g],g]);if(!x.length){f=n;for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&x.push([f[g],g])}return x.sort(function(y,v){return y[0]-v[0]||n[y[1]]-n[v[1]]}),r[x.pop()[1]]||44}function a(d,f){var h=f||{},g="",x=h.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(g=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(g=d.charAt(4),d=d.slice(6)):g=s(d.slice(0,1024)):h&&h.FS?g=h.FS:g=s(d.slice(0,1024));var v=0,T=0,k=0,b=0,N=0,E=g.charCodeAt(0),P=!1,M=0,j=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var A=h.dateNF!=null?wfe(h.dateNF):null;function O(){var L=d.slice(b,N),q={};if(L.charAt(0)=='"'&&L.charAt(L.length-1)=='"'&&(L=L.slice(1,-1).replace(/""/g,'"')),L.length===0)q.t="z";else if(h.raw)q.t="s",q.v=L;else if(L.trim().length===0)q.t="s",q.v=L;else if(L.charCodeAt(0)==61)L.charCodeAt(1)==34&&L.charCodeAt(L.length-1)==34?(q.t="s",q.v=L.slice(2,-1).replace(/""/g,'"')):Y1e(L)?(q.t="n",q.f=L.slice(1)):(q.t="s",q.v=L);else if(L=="TRUE")q.t="b",q.v=!0;else if(L=="FALSE")q.t="b",q.v=!1;else if(!isNaN(k=ru(L)))q.t="n",h.cellText!==!1&&(q.w=L),q.v=k;else if(!isNaN(Hp(L).getDate())||A&&L.match(A)){q.z=h.dateNF||Xr[14];var Q=0;A&&L.match(A)&&(L=bfe(L,h.dateNF,L.match(A)||[]),Q=1),h.cellDates?(q.t="d",q.v=js(L,Q)):(q.t="n",q.v=si(js(L,Q))),h.cellText!==!1&&(q.w=bc(q.z,q.v instanceof Date?si(q.v):q.v)),h.cellNF||delete q.z}else q.t="s",q.v=L;if(q.t=="z"||(h.dense?(x[v]||(x[v]=[]),x[v][T]=q):x[Qr({c:T,r:v})]=q),b=N+1,j=d.charCodeAt(b),y.e.c<T&&(y.e.c=T),y.e.r<v&&(y.e.r=v),M==E)++T;else if(T=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;N<d.length;++N)switch(M=d.charCodeAt(N)){case 34:j===34&&(P=!P);break;case E:case 10:case 13:if(!P&&O())break e;break}return N-b>0&&O(),x["!ref"]=pn(y),x}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,f):b1(t(d,f),f)}function o(d,f){var h="",g=f.type=="string"?[0,0,0,0]:EE(d,f);switch(f.type){case"base64":h=Rl(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof Tv<"u"||(h=vn&&Buffer.isBuffer(d)?d.toString("binary"):Qf(d));break;case"array":h=jm(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return g[0]==239&&g[1]==187&&g[2]==191?h=us(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=us(h):f.type=="binary"&&typeof Tv<"u",h.slice(0,19)=="socialcalc:version:"?AG.to_sheet(f.type=="string"?h:us(h),f):i(h,f)}function l(d,f){return Zf(o(d,f),f)}function u(d){for(var f=[],h=Rn(d["!ref"]),g,x=Array.isArray(d),y=h.s.r;y<=h.e.r;++y){for(var v=[],T=h.s.c;T<=h.e.c;++T){var k=Qr({r:y,c:T});if(g=x?(d[y]||[])[T]:d[k],!g||g.v==null){v.push("          ");continue}for(var b=(g.w||(c0(g),g.w)||"").slice(0,10);b.length<10;)b+=" ";v.push(b+(T===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}})();function Oge(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=EG.to_workbook(e,r);return r.WTF=n,s}catch(a){if(r.WTF=n,!a.message.match(/SYLK bad record ID/)&&n)throw a;return Gp.to_workbook(e,t)}}var cm=(function(){function e(I,W,K){if(I){Wi(I,I.l||0);for(var Z=K.Enum||H;I.l<I.length;){var oe=I.read_shift(2),J=Z[oe]||Z[65535],le=I.read_shift(2),ue=I.l+le,de=J.f&&J.f(I,le,K);if(I.l=ue,W(de,J,oe))return}}}function t(I,W){switch(W.type){case"base64":return r(Pl(Rl(I)),W);case"binary":return r(Pl(I),W);case"buffer":case"array":return r(I,W)}throw"Unsupported type "+W.type}function r(I,W){if(!I)return I;var K=W||{},Z=K.dense?[]:{},oe="Sheet1",J="",le=0,ue={},de=[],Te=[],ie={s:{r:0,c:0},e:{r:0,c:0}},xe=K.sheetRows||0;if(I[2]==0&&(I[3]==8||I[3]==9)&&I.length>=16&&I[14]==5&&I[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(I[2]==2)K.Enum=H,e(I,function(He,It,it){switch(it){case 0:K.vers=He,He>=4096&&(K.qpro=!0);break;case 6:ie=He;break;case 204:He&&(J=He);break;case 222:J=He;break;case 15:case 51:K.qpro||(He[1].v=He[1].v.slice(1));case 13:case 14:case 16:it==14&&(He[2]&112)==112&&(He[2]&15)>1&&(He[2]&15)<15&&(He[1].z=K.dateNF||Xr[14],K.cellDates&&(He[1].t="d",He[1].v=l3(He[1].v))),K.qpro&&He[3]>le&&(Z["!ref"]=pn(ie),ue[oe]=Z,de.push(oe),Z=K.dense?[]:{},ie={s:{r:0,c:0},e:{r:0,c:0}},le=He[3],oe=J||"Sheet"+(le+1),J="");var kt=K.dense?(Z[He[0].r]||[])[He[0].c]:Z[Qr(He[0])];if(kt){kt.t=He[1].t,kt.v=He[1].v,He[1].z!=null&&(kt.z=He[1].z),He[1].f!=null&&(kt.f=He[1].f);break}K.dense?(Z[He[0].r]||(Z[He[0].r]=[]),Z[He[0].r][He[0].c]=He[1]):Z[Qr(He[0])]=He[1];break}},K);else if(I[2]==26||I[2]==14)K.Enum=U,I[2]==14&&(K.qpro=!0,I.l=0),e(I,function(He,It,it){switch(it){case 204:oe=He;break;case 22:He[1].v=He[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(He[3]>le&&(Z["!ref"]=pn(ie),ue[oe]=Z,de.push(oe),Z=K.dense?[]:{},ie={s:{r:0,c:0},e:{r:0,c:0}},le=He[3],oe="Sheet"+(le+1)),xe>0&&He[0].r>=xe)break;K.dense?(Z[He[0].r]||(Z[He[0].r]=[]),Z[He[0].r][He[0].c]=He[1]):Z[Qr(He[0])]=He[1],ie.e.c<He[0].c&&(ie.e.c=He[0].c),ie.e.r<He[0].r&&(ie.e.r=He[0].r);break;case 27:He[14e3]&&(Te[He[14e3][0]]=He[14e3][1]);break;case 1537:Te[He[0]]=He[1],He[0]==le&&(oe=He[1]);break}},K);else throw new Error("Unrecognized LOTUS BOF "+I[2]);if(Z["!ref"]=pn(ie),ue[J||oe]=Z,de.push(J||oe),!Te.length)return{SheetNames:de,Sheets:ue};for(var Ae={},Me=[],Je=0;Je<Te.length;++Je)ue[de[Je]]?(Me.push(Te[Je]||de[Je]),Ae[Te[Je]]=ue[Te[Je]]||ue[de[Je]]):(Me.push(Te[Je]),Ae[Te[Je]]={"!ref":"A1"});return{SheetNames:Me,Sheets:Ae}}function n(I,W){var K=W||{};if(+K.codepage>=0&&Zc(+K.codepage),K.type=="string")throw new Error("Cannot write WK1 to JS string");var Z=ul(),oe=Rn(I["!ref"]),J=Array.isArray(I),le=[];dr(Z,0,a(1030)),dr(Z,6,l(oe));for(var ue=Math.min(oe.e.r,8191),de=oe.s.r;de<=ue;++de)for(var Te=Na(de),ie=oe.s.c;ie<=oe.e.c;++ie){de===oe.s.r&&(le[ie]=Ys(ie));var xe=le[ie]+Te,Ae=J?(I[de]||[])[ie]:I[xe];if(!(!Ae||Ae.t=="z"))if(Ae.t=="n")(Ae.v|0)==Ae.v&&Ae.v>=-32768&&Ae.v<=32767?dr(Z,13,g(de,ie,Ae.v)):dr(Z,14,y(de,ie,Ae.v));else{var Me=c0(Ae);dr(Z,15,f(de,ie,Me.slice(0,239)))}}return dr(Z,1),Z.end()}function s(I,W){var K=W||{};if(+K.codepage>=0&&Zc(+K.codepage),K.type=="string")throw new Error("Cannot write WK3 to JS string");var Z=ul();dr(Z,0,i(I));for(var oe=0,J=0;oe<I.SheetNames.length;++oe)(I.Sheets[I.SheetNames[oe]]||{})["!ref"]&&dr(Z,27,R(I.SheetNames[oe],J++));var le=0;for(oe=0;oe<I.SheetNames.length;++oe){var ue=I.Sheets[I.SheetNames[oe]];if(!(!ue||!ue["!ref"])){for(var de=Rn(ue["!ref"]),Te=Array.isArray(ue),ie=[],xe=Math.min(de.e.r,8191),Ae=de.s.r;Ae<=xe;++Ae)for(var Me=Na(Ae),Je=de.s.c;Je<=de.e.c;++Je){Ae===de.s.r&&(ie[Je]=Ys(Je));var He=ie[Je]+Me,It=Te?(ue[Ae]||[])[Je]:ue[He];if(!(!It||It.t=="z"))if(It.t=="n")dr(Z,23,O(Ae,Je,le,It.v));else{var it=c0(It);dr(Z,22,M(Ae,Je,le,it.slice(0,239)))}}++le}}return dr(Z,1),Z.end()}function a(I){var W=Mt(2);return W.write_shift(2,I),W}function i(I){var W=Mt(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var K=0,Z=0,oe=0,J=0;J<I.SheetNames.length;++J){var le=I.SheetNames[J],ue=I.Sheets[le];if(!(!ue||!ue["!ref"])){++oe;var de=dl(ue["!ref"]);K<de.e.r&&(K=de.e.r),Z<de.e.c&&(Z=de.e.c)}}return K>8191&&(K=8191),W.write_shift(2,K),W.write_shift(1,oe),W.write_shift(1,Z),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function o(I,W,K){var Z={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&K.qpro?(Z.s.c=I.read_shift(1),I.l++,Z.s.r=I.read_shift(2),Z.e.c=I.read_shift(1),I.l++,Z.e.r=I.read_shift(2),Z):(Z.s.c=I.read_shift(2),Z.s.r=I.read_shift(2),W==12&&K.qpro&&(I.l+=2),Z.e.c=I.read_shift(2),Z.e.r=I.read_shift(2),W==12&&K.qpro&&(I.l+=2),Z.s.c==65535&&(Z.s.c=Z.e.c=Z.s.r=Z.e.r=0),Z)}function l(I){var W=Mt(8);return W.write_shift(2,I.s.c),W.write_shift(2,I.s.r),W.write_shift(2,I.e.c),W.write_shift(2,I.e.r),W}function u(I,W,K){var Z=[{c:0,r:0},{t:"n",v:0},0,0];return K.qpro&&K.vers!=20768?(Z[0].c=I.read_shift(1),Z[3]=I.read_shift(1),Z[0].r=I.read_shift(2),I.l+=2):(Z[2]=I.read_shift(1),Z[0].c=I.read_shift(2),Z[0].r=I.read_shift(2)),Z}function d(I,W,K){var Z=I.l+W,oe=u(I,W,K);if(oe[1].t="s",K.vers==20768){I.l++;var J=I.read_shift(1);return oe[1].v=I.read_shift(J,"utf8"),oe}return K.qpro&&I.l++,oe[1].v=I.read_shift(Z-I.l,"cstr"),oe}function f(I,W,K){var Z=Mt(7+K.length);Z.write_shift(1,255),Z.write_shift(2,W),Z.write_shift(2,I),Z.write_shift(1,39);for(var oe=0;oe<Z.length;++oe){var J=K.charCodeAt(oe);Z.write_shift(1,J>=128?95:J)}return Z.write_shift(1,0),Z}function h(I,W,K){var Z=u(I,W,K);return Z[1].v=I.read_shift(2,"i"),Z}function g(I,W,K){var Z=Mt(7);return Z.write_shift(1,255),Z.write_shift(2,W),Z.write_shift(2,I),Z.write_shift(2,K,"i"),Z}function x(I,W,K){var Z=u(I,W,K);return Z[1].v=I.read_shift(8,"f"),Z}function y(I,W,K){var Z=Mt(13);return Z.write_shift(1,255),Z.write_shift(2,W),Z.write_shift(2,I),Z.write_shift(8,K,"f"),Z}function v(I,W,K){var Z=I.l+W,oe=u(I,W,K);if(oe[1].v=I.read_shift(8,"f"),K.qpro)I.l=Z;else{var J=I.read_shift(2);N(I.slice(I.l,I.l+J),oe),I.l+=J}return oe}function T(I,W,K){var Z=W&32768;return W&=-32769,W=(Z?I:0)+(W>=8192?W-16384:W),(Z?"":"$")+(K?Ys(W):Na(W))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function N(I,W){Wi(I,0);for(var K=[],Z=0,oe="",J="",le="",ue="";I.l<I.length;){var de=I[I.l++];switch(de){case 0:K.push(I.read_shift(8,"f"));break;case 1:J=T(W[0].c,I.read_shift(2),!0),oe=T(W[0].r,I.read_shift(2),!1),K.push(J+oe);break;case 2:{var Te=T(W[0].c,I.read_shift(2),!0),ie=T(W[0].r,I.read_shift(2),!1);J=T(W[0].c,I.read_shift(2),!0),oe=T(W[0].r,I.read_shift(2),!1),K.push(Te+ie+":"+J+oe)}break;case 3:if(I.l<I.length){console.error("WK1 premature formula end");return}break;case 4:K.push("("+K.pop()+")");break;case 5:K.push(I.read_shift(2));break;case 6:{for(var xe="";de=I[I.l++];)xe+=String.fromCharCode(de);K.push('"'+xe.replace(/"/g,'""')+'"')}break;case 8:K.push("-"+K.pop());break;case 23:K.push("+"+K.pop());break;case 22:K.push("NOT("+K.pop()+")");break;case 20:case 21:ue=K.pop(),le=K.pop(),K.push(["AND","OR"][de-20]+"("+le+","+ue+")");break;default:if(de<32&&b[de])ue=K.pop(),le=K.pop(),K.push(le+b[de]+ue);else if(k[de]){if(Z=k[de][1],Z==69&&(Z=I[I.l++]),Z>K.length){console.error("WK1 bad formula parse 0x"+de.toString(16)+":|"+K.join("|")+"|");return}var Ae=K.slice(-Z);K.length-=Z,K.push(k[de][0]+"("+Ae.join(",")+")")}else return de<=7?console.error("WK1 invalid opcode "+de.toString(16)):de<=24?console.error("WK1 unsupported op "+de.toString(16)):de<=30?console.error("WK1 invalid opcode "+de.toString(16)):de<=115?console.error("WK1 unsupported function opcode "+de.toString(16)):console.error("WK1 unrecognized opcode "+de.toString(16))}}K.length==1?W[1].f=""+K[0]:console.error("WK1 bad formula parse |"+K.join("|")+"|")}function E(I){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=I.read_shift(2),W[3]=I[I.l++],W[0].c=I[I.l++],W}function P(I,W){var K=E(I);return K[1].t="s",K[1].v=I.read_shift(W-4,"cstr"),K}function M(I,W,K,Z){var oe=Mt(6+Z.length);oe.write_shift(2,I),oe.write_shift(1,K),oe.write_shift(1,W),oe.write_shift(1,39);for(var J=0;J<Z.length;++J){var le=Z.charCodeAt(J);oe.write_shift(1,le>=128?95:le)}return oe.write_shift(1,0),oe}function j(I,W){var K=E(I);K[1].v=I.read_shift(2);var Z=K[1].v>>1;if(K[1].v&1)switch(Z&7){case 0:Z=(Z>>3)*5e3;break;case 1:Z=(Z>>3)*500;break;case 2:Z=(Z>>3)/20;break;case 3:Z=(Z>>3)/200;break;case 4:Z=(Z>>3)/2e3;break;case 5:Z=(Z>>3)/2e4;break;case 6:Z=(Z>>3)/16;break;case 7:Z=(Z>>3)/64;break}return K[1].v=Z,K}function A(I,W){var K=E(I),Z=I.read_shift(4),oe=I.read_shift(4),J=I.read_shift(2);if(J==65535)return Z===0&&oe===3221225472?(K[1].t="e",K[1].v=15):Z===0&&oe===3489660928?(K[1].t="e",K[1].v=42):K[1].v=0,K;var le=J&32768;return J=(J&32767)-16446,K[1].v=(1-le*2)*(oe*Math.pow(2,J+32)+Z*Math.pow(2,J)),K}function O(I,W,K,Z){var oe=Mt(14);if(oe.write_shift(2,I),oe.write_shift(1,K),oe.write_shift(1,W),Z==0)return oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(2,65535),oe;var J=0,le=0,ue=0,de=0;return Z<0&&(J=1,Z=-Z),le=Math.log2(Z)|0,Z/=Math.pow(2,le-31),de=Z>>>0,(de&2147483648)==0&&(Z/=2,++le,de=Z>>>0),Z-=de,de|=2147483648,de>>>=0,Z*=Math.pow(2,32),ue=Z>>>0,oe.write_shift(4,ue),oe.write_shift(4,de),le+=16383+(J?32768:0),oe.write_shift(2,le),oe}function L(I,W){var K=A(I);return I.l+=W-14,K}function q(I,W){var K=E(I),Z=I.read_shift(4);return K[1].v=Z>>6,K}function Q(I,W){var K=E(I),Z=I.read_shift(8,"f");return K[1].v=Z,K}function ae(I,W){var K=Q(I);return I.l+=W-10,K}function te(I,W){return I[I.l+W-1]==0?I.read_shift(W,"cstr"):""}function ne(I,W){var K=I[I.l++];K>W-1&&(K=W-1);for(var Z="";Z.length<K;)Z+=String.fromCharCode(I[I.l++]);return Z}function B(I,W,K){if(!(!K.qpro||W<21)){var Z=I.read_shift(1);I.l+=17,I.l+=1,I.l+=2;var oe=I.read_shift(W-21,"cstr");return[Z,oe]}}function V(I,W){for(var K={},Z=I.l+W;I.l<Z;){var oe=I.read_shift(2);if(oe==14e3){for(K[oe]=[0,""],K[oe][0]=I.read_shift(2);I[I.l];)K[oe][1]+=String.fromCharCode(I[I.l]),I.l++;I.l++}}return K}function R(I,W){var K=Mt(5+I.length);K.write_shift(2,14e3),K.write_shift(2,W);for(var Z=0;Z<I.length;++Z){var oe=I.charCodeAt(Z);K[K.l++]=oe>127?95:oe}return K[K.l++]=0,K}var H={0:{n:"BOF",f:La},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:te},222:{n:"SHEETNAMELP",f:ne},65535:{n:""}},U={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:P},23:{n:"NUMBER17",f:A},24:{n:"NUMBER18",f:j},25:{n:"FORMULA19",f:L},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:V},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:q},38:{n:"??"},39:{n:"NUMBER27",f:Q},40:{n:"FORMULA28",f:ae},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:te},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:B},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}})();function Ige(e){var t={},r=e.match(wo),n=0,s=!1;if(r)for(;n!=r.length;++n){var a=tn(r[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;t.cp=HC[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=a.val;break;case"<sz":t.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":a.rgb&&(t.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+a[0])}}return t}var Rge=(function(){var e=Nv("t"),t=Nv("rPr");function r(a){var i=a.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:On(i[1])},l=a.match(t);return l&&(o.s=Ige(l[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(s).map(r).filter(function(o){return o.v})}})(),Lge=(function(){var t=/(\r\n|\n)/g;function r(s,a,i){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),s.b&&(a.push("<b>"),i.push("</b>")),s.i&&(a.push("<i>"),i.push("</i>")),s.strike&&(a.push("<s>"),i.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),s}function n(s){var a=[[],s.v,[]];return s.v?(s.s&&r(s.s,a[0],a[2]),a[0].join("")+a[1].replace(t,"<br/>")+a[2].join("")):""}return function(a){return a.map(n).join("")}})(),Bge=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,$ge=/<(?:\w+:)?r>/,zge=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function mE(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=On(us(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=us(e),r&&(n.h=eE(n.t))):e.match($ge)&&(n.r=us(e),n.t=On(us((e.replace(zge,"").match(Bge)||[]).join("").replace(wo,""))),r&&(n.h=Lge(Rge(n.r)))),n):{t:""}}var Uge=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Wge=/<(?:\w+:)?(?:si|sstItem)>/g,Hge=/<\/(?:\w+:)?(?:si|sstItem)>/;function Gge(e,t){var r=[],n="";if(!e)return r;var s=e.match(Uge);if(s){n=s[2].replace(Wge,"").split(Hge);for(var a=0;a!=n.length;++a){var i=mE(n[a].trim(),t);i!=null&&(r[r.length]=i)}s=tn(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var Vge=/^\s|\s$|[\t\n\r]/;function jG(e,t){if(!t.bookSST)return"";var r=[ja];r[r.length]=ur("sst",null,{xmlns:Vm[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var s=e[n],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(Vge)&&(a+=' xml:space="preserve"'),a+=">"+as(s.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function qge(e){return[e.read_shift(4),e.read_shift(4)]}function Kge(e,t){var r=[],n=!1;return y0(e,function(a,i,o){switch(o){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Yge(e,t){return t||(t=Mt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Xge=ihe;function Jge(e){var t=ul();Wt(t,159,Yge(e));for(var r=0;r<e.length;++r)Wt(t,19,Xge(e[r]));return Wt(t,160),t.end()}function PG(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function Zd(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function Qge(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Zd(e,4),t.U=Zd(e,4),t.W=Zd(e,4),t}function Zge(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),a=[];s-- >0;)a.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=a,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function epe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(Zge(e));return t}function tpe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function rpe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Zd(e,4),t.U=Zd(e,4),t.W=Zd(e,4),t}function npe(e){var t=rpe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function MG(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function FG(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function spe(e){var t=Zd(e);switch(t.Minor){case 2:return[t.Minor,ape(e)];case 3:return[t.Minor,ipe()];case 4:return[t.Minor,ope(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function ape(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=MG(e,r),s=FG(e,e.length-e.l);return{t:"Std",h:n,v:s}}function ipe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function ope(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(wo,function(a){var i=tn(a);switch(nd(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function lpe(e,t){var r={},n=r.EncryptionVersionInfo=Zd(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=MG(e,s),t-=s,r.EncryptionVerifier=FG(e,t),r}function cpe(e){var t={},r=t.EncryptionVersionInfo=Zd(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function gE(e){var t=0,r,n=PG(e),s=n.length+1,a,i,o,l,u;for(r=Bf(s),r[0]=n.length,a=1;a!=s;++a)r[a]=n[a-1];for(a=s-1;a>=0;--a)i=r[a],o=(t&16384)===0?0:1,l=t<<1&32767,u=o|l,t=u^i;return t^52811}var DG=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},s=function(i,o){return n(i^o)},a=function(i){for(var o=t[i.length-1],l=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(o^=r[l]),d*=2,--l;return o};return function(i){for(var o=PG(i),l=a(o),u=o.length,d=Bf(16),f=0;f!=16;++f)d[f]=0;var h,g,x;for((u&1)===1&&(h=l>>8,d[u]=s(e[0],h),--u,h=l&255,g=o[o.length-1],d[u]=s(g,h));u>0;)--u,h=l>>8,d[u]=s(o[u],h),--u,h=l&255,d[u]=s(o[u],h);for(u=15,x=15-o.length;x>0;)h=l>>8,d[u]=s(e[x],h),--u,--x,h=l&255,d[u]=s(o[u],h),--u,--x;return d}})(),upe=function(e,t,r,n,s){s||(s=t),n||(n=DG(e));var a,i;for(a=0;a!=t.length;++a)i=t[a],i^=n[r],i=(i>>5|i<<3)&255,s[a]=i,++r;return[s,r,n]},dpe=function(e){var t=0,r=DG(e);return function(n){var s=upe("",n,t,r);return t=s[1],s[0]}};function fpe(e,t,r,n){var s={key:La(e),verificationBytes:La(e)};return r.password&&(s.verifier=gE(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=dpe(r.password)),s}function hpe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=cpe(e):n.Data=lpe(e,t),n}function mpe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?hpe(e,t-2,n):fpe(e,r.biff>=8?t:t-2,r,n),n}var OG=(function(){function e(s,a){switch(a.type){case"base64":return t(Rl(s),a);case"binary":return t(s,a);case"buffer":return t(vn&&Buffer.isBuffer(s)?s.toString("binary"):Qf(s),a);case"array":return t(jm(s),a)}throw new Error("Unrecognized type "+a.type)}function t(s,a){var i=a||{},o=i.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,g=0,x,y=-1;x=h.exec(d);){switch(x[0]){case"\\cell":var v=d.slice(g,h.lastIndex-x[0].length);if(v[0]==" "&&(v=v.slice(1)),++y,v.length){var T={v,t:"s"};Array.isArray(o)?o[f][y]=T:o[Qr({r:f,c:y})]=T}break}g=h.lastIndex}y>u.e.c&&(u.e.c=y)}),o["!ref"]=pn(u),o}function r(s,a){return Zf(e(s,a),a)}function n(s){for(var a=["{\\rtf1\\ansi"],i=Rn(s["!ref"]),o,l=Array.isArray(s),u=i.s.r;u<=i.e.r;++u){a.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=Qr({r:u,c:d});o=l?(s[u]||[])[d]:s[f],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(c0(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}})();function gpe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Mv(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function ppe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),a=Math.min(t,r,n),i=s-a;if(i===0)return[0,0,t];var o=0,l=0,u=s+a;switch(l=i/(u>1?2-u:u),s){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,l,u/2]}function xpe(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),a=n-s/2,i=[a,a,a],o=6*t,l;if(r!==0)switch(o|0){case 0:case 6:l=s*o,i[0]+=s,i[1]+=l;break;case 1:l=s*(2-o),i[0]+=l,i[1]+=s;break;case 2:l=s*(o-2),i[1]+=s,i[2]+=l;break;case 3:l=s*(4-o),i[1]+=l,i[2]+=s;break;case 4:l=s*(o-4),i[2]+=s,i[0]+=l;break;case 5:l=s*(6-o),i[2]+=l,i[0]+=s;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function $4(e,t){if(t===0)return e;var r=ppe(gpe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Mv(xpe(r))}var IG=6,ype=15,vpe=1,uo=IG;function Fv(e){return Math.floor((e+Math.round(128/uo)/256)*uo)}function Dv(e){return Math.floor((e-5)/uo*100+.5)/100}function z4(e){return Math.round((e*uo+5)/uo*256)/256}function $S(e){return z4(Dv(Fv(e)))}function pE(e){var t=Math.abs(e-$S(e)),r=uo;if(t>.005)for(uo=vpe;uo<ype;++uo)Math.abs(e-$S(e))<=t&&(t=Math.abs(e-$S(e)),r=uo);uo=r}function $f(e){e.width?(e.wpx=Fv(e.width),e.wch=Dv(e.wpx),e.MDW=uo):e.wpx?(e.wch=Dv(e.wpx),e.width=z4(e.wch),e.MDW=uo):typeof e.wch=="number"&&(e.width=z4(e.wch),e.wpx=Fv(e.width),e.MDW=uo),e.customWidth&&delete e.customWidth}var wpe=96,RG=wpe;function Ov(e){return e*96/RG}function Vp(e){return e*RG/96}var bpe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function _pe(e,t,r,n){t.Borders=[];var s={},a=!1;(e[0].match(wo)||[]).forEach(function(i){var o=tn(i);switch(nd(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=Es(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=Es(o.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function Spe(e,t,r,n){t.Fills=[];var s={},a=!1;(e[0].match(wo)||[]).forEach(function(i){var o=tn(i);switch(nd(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function kpe(e,t,r,n){t.Fonts=[];var s={},a=!1;(e[0].match(wo)||[]).forEach(function(i){var o=tn(i);switch(nd(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=us(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?Es(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?Es(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?Es(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?Es(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?Es(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?Es(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?Es(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=HC[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=Es(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=om[s.color.index];s.color.index==81&&(l=om[1]),l||(l=om[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=$4(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function Tpe(e,t,r){t.NumberFmt=[];for(var n=ma(Xr),s=0;s<n.length;++s)t.NumberFmt[n[s]]=Xr[n[s]];var a=e[0].match(wo);if(a)for(s=0;s<a.length;++s){var i=tn(a[s]);switch(nd(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=On(us(i.formatCode)),l=parseInt(i.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&t.NumberFmt[l]!=null;--l);t.NumberFmt[l]=o}Qd(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function Cpe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=ur("numFmt",null,{numFmtId:n,formatCode:as(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=ur("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var pb=["numFmtId","fillId","fontId","borderId","xfId"],xb=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Epe(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(wo)||[]).forEach(function(a){var i=tn(a),o=0;switch(nd(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<pb.length;++o)n[pb[o]]&&(n[pb[o]]=parseInt(n[pb[o]],10));for(o=0;o<xb.length;++o)n[xb[o]]&&(n[xb[o]]=Es(n[xb[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=Es(i.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function Npe(e){var t=[];return t[t.length]=ur("cellXfs",null),e.forEach(function(r){t[t.length]=ur("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=ur("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Ape=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&Tpe(f,d,u),(f=o.match(s))&&kpe(f,d,l,u),(f=o.match(n))&&Spe(f,d,l,u),(f=o.match(a))&&_pe(f,d,l,u),(f=o.match(r))&&Epe(f,d,u),d}})();function LG(e,t){var r=[ja,ur("styleSheet",null,{xmlns:Vm[0],"xmlns:vt":ti.vt})],n;return e.SSF&&(n=Cpe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Npe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function jpe(e,t){var r=e.read_shift(2),n=xo(e);return[r,n]}function Ppe(e,t,r){r||(r=Mt(6+4*t.length)),r.write_shift(2,e),_i(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Mpe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=hhe(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var a=e.read_shift(2);switch(a===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var l=e.read_shift(1);switch(l>0&&(n.charset=l),e.l++,n.color=fhe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=xo(e),n}function Fpe(e,t){t||(t=Mt(153)),t.write_shift(2,e.sz*20),mhe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),R4(e.color,t);var n=0;return n=2,t.write_shift(1,n),_i(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Dpe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],zS,Ope=vo;function YD(e,t){t||(t=Mt(84)),zS||(zS=i3(Dpe));var r=zS[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(R4({auto:1},t),R4({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Ipe(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}function BG(e,t,r){r||(r=Mt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function vy(e,t){return t||(t=Mt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Rpe=vo;function Lpe(e,t){return t||(t=Mt(51)),t.write_shift(1,0),vy(null,t),vy(null,t),vy(null,t),vy(null,t),vy(null,t),t.length>t.l?t.slice(0,t.l):t}function Bpe(e,t){return t||(t=Mt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),I4(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function $pe(e,t,r){var n=Mt(2052);return n.write_shift(4,e),I4(t,n),I4(r,n),n.length>n.l?n.slice(0,n.l):n}function zpe(e,t,r){var n={};n.NumberFmt=[];for(var s in Xr)n.NumberFmt[s]=Xr[s];n.CellXf=[],n.Fonts=[];var a=[],i=!1;return y0(e,function(l,u,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],Qd(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(l.color.rgb=$4(t.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:a.push(d),i=!0;break;case 38:a.pop(),i=!1;break;default:if(u.T>0)a.push(d);else if(u.T<0)a.pop();else if(!i||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function Upe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&++r}),r!=0&&(Wt(e,615,nu(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&Wt(e,44,Ppe(s,t[s]))}),Wt(e,616))}}function Wpe(e){var t=1;Wt(e,611,nu(t)),Wt(e,43,Fpe({sz:12,color:{theme:1},name:"Calibri",family:2})),Wt(e,612)}function Hpe(e){var t=2;Wt(e,603,nu(t)),Wt(e,45,YD({patternType:"none"})),Wt(e,45,YD({patternType:"gray125"})),Wt(e,604)}function Gpe(e){var t=1;Wt(e,613,nu(t)),Wt(e,46,Lpe()),Wt(e,614)}function Vpe(e){var t=1;Wt(e,626,nu(t)),Wt(e,47,BG({numFmtId:0},65535)),Wt(e,627)}function qpe(e,t){Wt(e,617,nu(t.length)),t.forEach(function(r){Wt(e,47,BG(r,0))}),Wt(e,618)}function Kpe(e){var t=1;Wt(e,619,nu(t)),Wt(e,48,Bpe({xfId:0,name:"Normal"})),Wt(e,620)}function Ype(e){var t=0;Wt(e,505,nu(t)),Wt(e,506)}function Xpe(e){var t=0;Wt(e,508,$pe(t,"TableStyleMedium9","PivotStyleMedium4")),Wt(e,509)}function Jpe(e,t){var r=ul();return Wt(r,278),Upe(r,e.SSF),Wpe(r),Hpe(r),Gpe(r),Vpe(r),qpe(r,t.cellXfs),Kpe(r),Ype(r),Xpe(r),Wt(r,279),r.end()}var Qpe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Zpe(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(wo)||[]).forEach(function(s){var a=tn(s);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(t.themeElements.clrScheme[Qpe.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function e1e(){}function t1e(){}var r1e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,n1e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,s1e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function a1e(e,t,r){t.themeElements={};var n;[["clrScheme",r1e,Zpe],["fontScheme",n1e,e1e],["fmtScheme",s1e,t1e]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var i1e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function $G(e,t){(!e||e.length===0)&&(e=xE());var r,n={};if(!(r=e.match(i1e)))throw new Error("themeElements not found in theme");return a1e(r[0],n,t),n.raw=e,n}function xE(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[ja];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function o1e(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var a=e.slice(e.l);e.l=n;var i;try{i=MH(a,{type:"array"})}catch{return}var o=Ml(i,"theme/theme/theme1.xml",!0);if(o)return $G(o,r)}}function l1e(e){return e.read_shift(4)}function c1e(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=u1e(e,4);break;case 2:t.xclrValue=vG(e);break;case 3:t.xclrValue=l1e(e);break;case 4:e.l+=4;break}return e.l+=8,t}function u1e(e,t){return vo(e,t)}function d1e(e,t){return vo(e,t)}function f1e(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=c1e(e);break;case 6:n[1]=d1e(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function h1e(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),a=[];s-- >0;)a.push(f1e(e,r-e.l));return{ixfe:n,ext:a}}function m1e(e,t){t.forEach(function(r){r[0]})}function g1e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:xo(e)}}function p1e(e){var t=Mt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),_i(e.name,t),t.slice(0,t.l)}function x1e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function y1e(e){var t=Mt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function v1e(e,t){var r=Mt(8+2*t.length);return r.write_shift(4,e),_i(t,r),r.slice(0,r.l)}function w1e(e){return e.l+=4,e.read_shift(4)!=0}function b1e(e,t){var r=Mt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function _1e(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},a=[],i=!1,o=2;return y0(e,function(l,u,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(d),i=!0;break;case 36:a.pop(),i=!1;break;default:if(!u.T){if(!i||s.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function S1e(){var e=ul();return Wt(e,332),Wt(e,334,nu(1)),Wt(e,335,p1e({name:"XLDAPR",version:12e4,flags:3496657072})),Wt(e,336),Wt(e,339,v1e(1,"XLDAPR")),Wt(e,52),Wt(e,35,nu(514)),Wt(e,4096,nu(0)),Wt(e,4097,lc(1)),Wt(e,36),Wt(e,53),Wt(e,340),Wt(e,337,b1e(1)),Wt(e,51,y1e([[1,0]])),Wt(e,338),Wt(e,333),e.end()}function k1e(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,a=2,i;return e.replace(wo,function(o){var l=tn(o);switch(nd(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==l.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):a==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function zG(){var e=[ja];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function T1e(e){var t=[];if(!e)return t;var r=1;return(e.match(wo)||[]).forEach(function(n){var s=tn(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function C1e(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Qr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function E1e(e,t,r){var n=[];return y0(e,function(a,i,o){switch(o){case 63:n.push(a);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function N1e(e,t,r,n){if(!e)return e;var s=n||{},a=!1;y0(e,function(o,l,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function A1e(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var yp=1024;function UG(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[ur("xml",null,{"xmlns:v":El.v,"xmlns:o":El.o,"xmlns:x":El.x,"xmlns:mv":El.mv}).replace(/\/>/,">"),ur("o:shapelayout",ur("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),ur("v:shapetype",[ur("v:stroke",null,{joinstyle:"miter"}),ur("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];yp<e*1e3;)yp+=1e3;return t.forEach(function(a){var i=Xs(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?ur("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=ur("v:fill",l,o),d={on:"t",obscured:"t"};++yp,s=s.concat(["<v:shape"+Av({id:"_x0000_s"+yp,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,ur("v:shadow",null,d),ur("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",qi("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),qi("x:AutoFill","False"),qi("x:Row",String(i.r)),qi("x:Column",String(i.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function XD(e,t,r,n){var s=Array.isArray(e),a;t.forEach(function(i){var o=Xs(i.ref);if(s?(e[o.r]||(e[o.r]=[]),a=e[o.r][o.c]):a=e[i.ref],!a){a={t:"z"},s?e[o.r][o.c]=a:e[i.ref]=a;var l=Rn(e["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var u=pn(l);u!==e["!ref"]&&(e["!ref"]=u)}a.c||(a.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=a.c.length-1;f>=0;--f){if(!r&&a.c[f].T)return;r&&!a.c[f].T&&a.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}a.c.push(d)})}function j1e(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var a=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=tn(o[0]),u={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=Xs(l.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&mE(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function WG(e){var t=[ja,ur("comments",null,{xmlns:Vm[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(s){var a=as(s.a);r.indexOf(a)==-1&&(r.push(a),t.push("<author>"+a+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var s=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(s=r.indexOf(as(l.a))),a.push(l.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),a.length<=1)t.push(qi("t",as(a[0]||"")));else{for(var i=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)i+=`Reply:
    `+a[o]+`
`;t.push(qi("t",as(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function P1e(e,t){var r=[],n=!1,s={},a=0;return e.replace(wo,function(o,l){var u=tn(o);switch(nd(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":s.t=e.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function M1e(e,t,r){var n=[ja,ur("ThreadedComments",null,{xmlns:ti.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var a="";(s[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var l={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?a=l.id:l.parentId=a,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(ur("threadedComment",qi("text",i.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function F1e(e,t){var r=[],n=!1;return e.replace(wo,function(a){var i=tn(a);switch(nd(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return a}),r}function D1e(e){var t=[ja,ur("personList",null,{xmlns:ti.TCMNT,"xmlns:x":Vm[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(ur("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function O1e(e){var t={};t.iauthor=e.read_shift(4);var r=Xm(e);return t.rfx=r.s,t.ref=Qr(r.s),e.l+=16,t}function I1e(e,t){return t==null&&(t=Mt(36)),t.write_shift(4,e[1].iauthor),_1(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var R1e=xo;function L1e(e){return _i(e.slice(0,54))}function B1e(e,t){var r=[],n=[],s={},a=!1;return y0(e,function(o,l,u){switch(u){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function $1e(e){var t=ul(),r=[];return Wt(t,628),Wt(t,630),e.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Wt(t,632,L1e(s.a)))})}),Wt(t,631),Wt(t,633),e.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var a={s:Xs(n[0]),e:Xs(n[0])};Wt(t,635,I1e([a,s])),s.t&&s.t.length>0&&Wt(t,637,lhe(s)),Wt(t,636),delete s.iauthor})}),Wt(t,634),Wt(t,629),t.end()}var z1e="application/vnd.ms-office.vbaProject";function U1e(e){var t=$r.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");$r.utils.cfb_add(t,s,e.FileIndex[n].content)}}),$r.write(t)}function W1e(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&$r.utils.cfb_add(e,s,t.FileIndex[n].content)}})}var HG=["xlsb","xlsm","xlam","biff8","xla"];function H1e(){return{"!type":"dialog"}}function G1e(){return{"!type":"dialog"}}function V1e(){return{"!type":"macro"}}function q1e(){return{"!type":"macro"}}var jp=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,a,i){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=a.length>0?parseInt(a,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=t.c:--d,l?u+=t.r:--u,s+(o?"":"$")+Ys(d)+(l?"":"$")+Na(u)}return function(s,a){return t=a,s.replace(e,r)}})(),yE=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,vE=(function(){return function(t,r){return t.replace(yE,function(n,s,a,i,o,l){var u=aE(i)-(a?0:r.c),d=sE(l)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",h=u==0?"":a?u+1:"["+u+"]";return s+"R"+f+"C"+h})}})();function GG(e,t){return e.replace(yE,function(r,n,s,a,i,o){return n+(s=="$"?s+a:Ys(aE(a)+t.c))+(i=="$"?i+o:Na(sE(o)+t.r))})}function K1e(e,t,r){var n=dl(t),s=n.s,a=Xs(r),i={r:a.r-s.r,c:a.c-s.c};return GG(e,i)}function Y1e(e){return e.length!=1}function JD(e){return e.replace(/_xlfn\./g,"")}function Ia(e){e.l+=1}function zf(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function VG(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return qG(e);r.biff==12&&(n=4)}var s=e.read_shift(n),a=e.read_shift(n),i=zf(e),o=zf(e);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function qG(e){var t=zf(e),r=zf(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function X1e(e,t,r){if(r.biff<8)return qG(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),a=zf(e),i=zf(e);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function KG(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return J1e(e);var n=e.read_shift(r&&r.biff==12?4:2),s=zf(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function J1e(e){var t=zf(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Q1e(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Z1e(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return exe(e);var s=e.read_shift(n>=12?4:2),a=e.read_shift(2),i=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:o}}function exe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function txe(e,t,r){var n=(e[e.l++]&96)>>5,s=VG(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function rxe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}var i=VG(e,a,r);return[n,s,i]}function nxe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function sxe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}return e.l+=a,[n,s]}function axe(e,t,r){var n=(e[e.l++]&96)>>5,s=X1e(e,t-1,r);return[n,s]}function ixe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function QD(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function oxe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],a=0;a<=n;++a)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function lxe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function cxe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function uxe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function dxe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function YG(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function fxe(e){return e.read_shift(2),YG(e)}function hxe(e){return e.read_shift(2),YG(e)}function mxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=KG(e,0,r);return[n,s]}function gxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=Z1e(e,0,r);return[n,s]}function pxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var a=KG(e,0,r);return[n,s,a]}function xxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[wye[s],QG[s],n]}function yxe(e,t,r){var n=e[e.l++],s=e.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:vxe(e);return[s,(a[0]===0?QG:vye)[a[1]]]}function vxe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function wxe(e,t,r){e.l+=r&&r.biff==2?3:4}function bxe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function _xe(e){return e.l++,v0[e.read_shift(1)]}function Sxe(e){return e.l++,e.read_shift(2)}function kxe(e){return e.l++,e.read_shift(1)!==0}function Txe(e){return e.l++,ho(e)}function Cxe(e,t,r){return e.l++,_2(e,t-1,r)}function Exe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=ka(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=v0[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=ho(e);break;case 2:r[1]=Jm(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Nxe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],a=0;a!=n;++a)s.push((r.biff==12?Xm:c3)(e));return s}function Axe(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var a=0,i=[];a!=n&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=Exe(e,r.biff);return i}function jxe(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,a=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,a]}function Pxe(e,t,r){if(r.biff==5)return Mxe(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),a=e.read_shift(4);return[n,s,a]}function Mxe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function Fxe(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Dxe(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Oxe(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function Ixe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return e.l+=a,[n,s]}var Rxe=vo,Lxe=vo,Bxe=vo;function k2(e,t,r){return e.l+=2,[Q1e(e)]}function wE(e){return e.l+=6,[]}var $xe=k2,zxe=wE,Uxe=wE,Wxe=k2;function XG(e){return e.l+=2,[La(e),e.read_shift(2)&1]}var Hxe=k2,Gxe=XG,Vxe=wE,qxe=k2,Kxe=k2,Yxe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Xxe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),a=e.read_shift(2),i=Yxe[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:s,C:a}}function Jxe(e){return e.l+=2,[e.read_shift(4)]}function Qxe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Zxe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function eye(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function tye(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function rye(e){return e.l+=4,[0,0]}var ZD={1:{n:"PtgExp",f:bxe},2:{n:"PtgTbl",f:Bxe},3:{n:"PtgAdd",f:Ia},4:{n:"PtgSub",f:Ia},5:{n:"PtgMul",f:Ia},6:{n:"PtgDiv",f:Ia},7:{n:"PtgPower",f:Ia},8:{n:"PtgConcat",f:Ia},9:{n:"PtgLt",f:Ia},10:{n:"PtgLe",f:Ia},11:{n:"PtgEq",f:Ia},12:{n:"PtgGe",f:Ia},13:{n:"PtgGt",f:Ia},14:{n:"PtgNe",f:Ia},15:{n:"PtgIsect",f:Ia},16:{n:"PtgUnion",f:Ia},17:{n:"PtgRange",f:Ia},18:{n:"PtgUplus",f:Ia},19:{n:"PtgUminus",f:Ia},20:{n:"PtgPercent",f:Ia},21:{n:"PtgParen",f:Ia},22:{n:"PtgMissArg",f:Ia},23:{n:"PtgStr",f:Cxe},26:{n:"PtgSheet",f:Qxe},27:{n:"PtgEndSheet",f:Zxe},28:{n:"PtgErr",f:_xe},29:{n:"PtgBool",f:kxe},30:{n:"PtgInt",f:Sxe},31:{n:"PtgNum",f:Txe},32:{n:"PtgArray",f:ixe},33:{n:"PtgFunc",f:xxe},34:{n:"PtgFuncVar",f:yxe},35:{n:"PtgName",f:jxe},36:{n:"PtgRef",f:mxe},37:{n:"PtgArea",f:txe},38:{n:"PtgMemArea",f:Fxe},39:{n:"PtgMemErr",f:Rxe},40:{n:"PtgMemNoMem",f:Lxe},41:{n:"PtgMemFunc",f:Dxe},42:{n:"PtgRefErr",f:Oxe},43:{n:"PtgAreaErr",f:nxe},44:{n:"PtgRefN",f:gxe},45:{n:"PtgAreaN",f:axe},46:{n:"PtgMemAreaN",f:eye},47:{n:"PtgMemNoMemN",f:tye},57:{n:"PtgNameX",f:Pxe},58:{n:"PtgRef3d",f:pxe},59:{n:"PtgArea3d",f:rxe},60:{n:"PtgRefErr3d",f:Ixe},61:{n:"PtgAreaErr3d",f:sxe},255:{}},nye={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},sye={1:{n:"PtgElfLel",f:XG},2:{n:"PtgElfRw",f:qxe},3:{n:"PtgElfCol",f:$xe},6:{n:"PtgElfRwV",f:Kxe},7:{n:"PtgElfColV",f:Wxe},10:{n:"PtgElfRadical",f:Hxe},11:{n:"PtgElfRadicalS",f:Vxe},13:{n:"PtgElfColS",f:zxe},15:{n:"PtgElfColSV",f:Uxe},16:{n:"PtgElfRadicalLel",f:Gxe},25:{n:"PtgList",f:Xxe},29:{n:"PtgSxName",f:Jxe},255:{}},aye={0:{n:"PtgAttrNoop",f:rye},1:{n:"PtgAttrSemi",f:dxe},2:{n:"PtgAttrIf",f:cxe},4:{n:"PtgAttrChoose",f:oxe},8:{n:"PtgAttrGoto",f:lxe},16:{n:"PtgAttrSum",f:wxe},32:{n:"PtgAttrBaxcel",f:QD},33:{n:"PtgAttrBaxcel",f:QD},64:{n:"PtgAttrSpace",f:fxe},65:{n:"PtgAttrSpaceSemi",f:hxe},128:{n:"PtgAttrIfError",f:uxe},255:{}};function T2(e,t,r,n){if(n.biff<8)return vo(e,t);for(var s=e.l+t,a=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=Axe(e,0,n),a.push(r[i][1]);break;case"PtgMemArea":r[i][2]=Nxe(e,r[i][1],n),a.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),a.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=s-e.l,t!==0&&a.push(vo(e,t)),a}function C2(e,t,r){for(var n=e.l+t,s,a,i=[];n!=e.l;)t=n-e.l,a=e[e.l],s=ZD[a]||ZD[nye[a]],(a===24||a===25)&&(s=(a===24?sye:aye)[e[e.l+1]]),!s||!s.f?vo(e,t):i.push([s.n,s.f(e,t,r)]);return i}function iye(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],a=0;a<n.length;++a){var i=n[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var oye={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function lye(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function JG(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function eO(e,t,r){var n=JG(e,t,r);return n=="#REF"?n:lye(n,r)}function co(e,t,r,n,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},o=[],l,u,d,f=0,h=0,g,x="";if(!e[0]||!e[0][0])return"";for(var y=-1,v="",T=0,k=e[0].length;T<k;++T){var b=e[0][T];switch(b[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),y>=0){switch(e[0][y][1][0]){case 0:v=ua(" ",e[0][y][1][1]);break;case 1:v=ua("\r",e[0][y][1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}u=u+v,y=-1}o.push(u+oye[b[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Yy(b[1][1],i,s),o.push(Xy(d,a));break;case"PtgRefN":d=r?Yy(b[1][1],r,s):b[1][1],o.push(Xy(d,a));break;case"PtgRef3d":f=b[1][1],d=Yy(b[1][2],i,s),x=eO(n,f,s),o.push(x+"!"+Xy(d,a));break;case"PtgFunc":case"PtgFuncVar":var N=b[1][0],E=b[1][1];N||(N=0),N&=127;var P=N==0?[]:o.slice(-N);o.length-=N,E==="User"&&(E=P.shift()),o.push(E+"("+P.join(",")+")");break;case"PtgBool":o.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(b[1]);break;case"PtgNum":o.push(String(b[1]));break;case"PtgStr":o.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(b[1]);break;case"PtgAreaN":g=AD(b[1][1],r?{s:r}:i,s),o.push(RS(g,s));break;case"PtgArea":g=AD(b[1][1],i,s),o.push(RS(g,s));break;case"PtgArea3d":f=b[1][1],g=b[1][2],x=eO(n,f,s),o.push(x+"!"+RS(g,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=b[1][2];var M=(n.names||[])[h-1]||(n[0]||[])[h],j=M?M.Name:"SH33TJSNAME"+String(h);j&&j.slice(0,6)=="_xlfn."&&!s.xlfn&&(j=j.slice(6)),o.push(j);break;case"PtgNameX":var A=b[1][1];h=b[1][2];var O;if(s.biff<=5)A<0&&(A=-A),n[A]&&(O=n[A][h]);else{var L="";if(((n[A]||[])[0]||[])[0]==14849||(((n[A]||[])[0]||[])[0]==1025?n[A][h]&&n[A][h].itab>0&&(L=n.SheetNames[n[A][h].itab-1]+"!"):L=n.SheetNames[h-1]+"!"),n[A]&&n[A][h])L+=n[A][h].Name;else if(n[0]&&n[0][h])L+=n[0][h].Name;else{var q=(JG(n,A,s)||"").split(";;");q[h-1]?L=q[h-1]:L+="SH33TJSERRX"}o.push(L);break}O||(O={Name:"SH33TJSERRY"}),o.push(O.Name);break;case"PtgParen":var Q="(",ae=")";if(y>=0){switch(v="",e[0][y][1][0]){case 2:Q=ua(" ",e[0][y][1][1])+Q;break;case 3:Q=ua("\r",e[0][y][1][1])+Q;break;case 4:ae=ua(" ",e[0][y][1][1])+ae;break;case 5:ae=ua("\r",e[0][y][1][1])+ae;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}y=-1}o.push(Q+o.pop()+ae);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var te={c:r.c,r:r.r};if(n.sharedf[Qr(d)]){var ne=n.sharedf[Qr(d)];o.push(co(ne,i,te,n,s))}else{var B=!1;for(l=0;l!=n.arrayf.length;++l)if(u=n.arrayf[l],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(co(u[1],i,te,n,s)),B=!0;break}B||o.push(b[1])}break;case"PtgArray":o.push("{"+iye(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=T;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var V=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&V.indexOf(e[0][T][0])==-1){b=e[0][y];var R=!0;switch(b[1][0]){case 4:R=!1;case 0:v=ua(" ",b[1][1]);break;case 5:R=!1;case 1:v=ua("\r",b[1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}o.push((R?v:"")+o.pop()+(R?"":v)),y=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function cye(e,t,r){var n=e.l+t,s=r.biff==2?1:2,a,i=e.read_shift(s);if(i==65535)return[[],vo(e,t-2)];var o=C2(e,i,r);return t!==i+s&&(a=T2(e,t-i-s,o,r)),e.l=n,[o,a]}function uye(e,t,r){var n=e.l+t,s=r.biff==2?1:2,a,i=e.read_shift(s);if(i==65535)return[[],vo(e,t-2)];var o=C2(e,i,r);return t!==i+s&&(a=T2(e,t-i-s,o,r)),e.l=n,[o,a]}function dye(e,t,r,n){var s=e.l+t,a=C2(e,n,r),i;return s!==e.l&&(i=T2(e,s-e.l,a,r)),[a,i]}function fye(e,t,r){var n=e.l+t,s,a=e.read_shift(2),i=C2(e,a,r);return a==65535?[[],vo(e,t-2)]:(t!==a+2&&(s=T2(e,n-a-2,i,r)),[i,s])}function hye(e){var t;if(Gd(e,e.l+6)!==65535)return[ho(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function mye(e){if(e==null){var t=Mt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Pm(e);return Pm(0)}function US(e,t,r){var n=e.l+t,s=sd(e);r.biff==2&&++e.l;var a=hye(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=uye(e,n-e.l,r);return{cell:s,val:a[0],formula:o,shared:i>>3&1,tt:a[1]}}function gye(e,t,r,n,s){var a=Fm(t,r,s),i=mye(e.v),o=Mt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=Mt(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=wi([a,i,o,u]);return f}function u3(e,t,r){var n=e.read_shift(4),s=C2(e,n,r),a=e.read_shift(4),i=a>0?T2(e,a,s,r):null;return[s,i]}var pye=u3,d3=u3,xye=u3,yye=u3,vye={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},QG={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},wye={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function tO(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function bye(e){var t="of:="+e.replace(yE,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function WS(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function _ye(e){return e.replace(/\./,"!")}var Qy={},Pp={},Zy=typeof Map<"u";function bE(e,t,r){var n=0,s=e.length;if(r){if(Zy?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var a=Zy?r.get(t):r[t];n<a.length;++n)if(e[a[n]].t===t)return e.Count++,a[n]}}else for(;n<s;++n)if(e[n].t===t)return e.Count++,n;return e[s]={t},e.Count++,e.Unique++,r&&(Zy?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function f3(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(uo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=Dv(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=z4(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function um(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function eh(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],s=60,a=e.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){Qd(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=n=s;break}}for(s=0;s!=a;++s)if(e[s].numFmtId===n)return s;return e[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function ZG(e,t,r,n,s,a){try{n.cellNF&&(e.z=Xr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=js(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Xr[t]==null&&Qd(vfe[t]||"General",t),e.t==="e")e.w=e.w||v0[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ev(e.v);else if(e.t==="d"){var i=si(e.v);(i|0)===i?e.w=i.toString(10):e.w=Ev(i)}else{if(e.v===void 0)return"";e.w=Am(e.v,Pp)}else e.t==="d"?e.w=bc(t,si(e.v),Pp):e.w=bc(t,e.v,Pp)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=a.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=$4(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=$4(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&a.Fills)throw o}}}function Sye(e,t,r){if(e&&e["!ref"]){var n=Rn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function kye(e,t){var r=Rn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=pn(r))}var Tye=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Cye=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Eye=/<(?:\w:)?hyperlink [^>]*>/mg,Nye=/"(\w*:\w*)"/,Aye=/<(?:\w:)?col\b[^>]*[\/]?>/g,jye=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Pye=/<(?:\w:)?pageMargins[^>]*\/>/g,eV=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Mye=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Fye=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Dye(e,t,r,n,s,a,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(Cye);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(eV);h?_E(h[0],o,s,r):(h=u.match(Mye))&&Iye(h[0],h[1]||"",o,s,r);var g=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var x=u.slice(g,g+50).match(Nye);x&&kye(o,x[1])}var y=u.match(Fye);y&&y[1]&&Yye(y[1],s);var v=[];if(t.cellStyles){var T=u.match(Aye);T&&Hye(v,T)}f&&Qye(f[1],o,t,l,a,i);var k=d.match(jye);k&&(o["!autofilter"]=Vye(k[0]));var b=[],N=d.match(Tye);if(N)for(g=0;g!=N.length;++g)b[g]=Rn(N[g].slice(N[g].indexOf('"')+1));var E=d.match(Eye);E&&zye(o,E,n);var P=d.match(Pye);if(P&&(o["!margins"]=Uye(tn(P[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=pn(l)),t.sheetRows>0&&o["!ref"]){var M=Rn(o["!ref"]);t.sheetRows<=+M.e.r&&(M.e.r=t.sheetRows-1,M.e.r>l.e.r&&(M.e.r=l.e.r),M.e.r<M.s.r&&(M.s.r=M.e.r),M.e.c>l.e.c&&(M.e.c=l.e.c),M.e.c<M.s.c&&(M.s.c=M.e.c),o["!fullref"]=o["!ref"],o["!ref"]=pn(M))}return v.length>0&&(o["!cols"]=v),b.length>0&&(o["!merges"]=b),o}function Oye(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+pn(e[r])+'"/>';return t+"</mergeCells>"}function _E(e,t,r,n){var s=tn(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=On(us(s.codeName)))}function Iye(e,t,r,n,s){_E(e.slice(0,e.indexOf(">")),r,n,s)}function Rye(e,t,r,n,s){var a=!1,i={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var l=t.SheetNames[r];try{t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch{}a=!0,i.codeName=Uu(as(l))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+ur("outlinePr",null,u)}!a&&!o||(s[s.length]=ur("sheetPr",o,i))}var Lye=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Bye=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function $ye(e){var t={sheet:1};return Lye.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Bye.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=gE(e.password).toString(16).toUpperCase()),ur("sheetProtection",null,t)}function zye(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var a=tn(us(t[s]),!0);if(!a.ref)return;var i=((r||{})["!id"]||[])[a.id];i?(a.Target=i.Target,a.location&&(a.Target+="#"+On(a.location))):(a.Target="#"+On(a.location),i={Target:a.Target,TargetMode:"Internal"}),a.Rel=i,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=Rn(a.ref),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u){var d=Qr({c:u,r:l});n?(e[l]||(e[l]=[]),e[l][u]||(e[l][u]={t:"z",v:void 0}),e[l][u].l=a):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=a)}}}function Uye(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function Wye(e){return um(e),ur("pageMargins",null,e)}function Hye(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=tn(t[n],!0);s.hidden&&(s.hidden=Es(s.hidden));var a=parseInt(s.min,10)-1,i=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,pE(s.width)),$f(s);a<=i;)e[a++]=Ps(s)}}function Gye(e,t){for(var r=["<cols>"],n,s=0;s!=t.length;++s)(n=t[s])&&(r[r.length]=ur("col",null,f3(s,n)));return r[r.length]="</cols>",r.join("")}function Vye(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function qye(e,t,r,n){var s=typeof e.ref=="string"?e.ref:pn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,i=dl(s);i.s.r==i.e.r&&(i.e.r=dl(t["!ref"]).e.r,s=pn(i));for(var o=0;o<a.length;++o){var l=a[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),ur("autoFilter",null,{ref:s})}var Kye=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Yye(e,t){t.Views||(t.Views=[{}]),(e.match(Kye)||[]).forEach(function(r,n){var s=tn(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),Es(s.rightToLeft)&&(t.Views[n].RTL=!0)})}function Xye(e,t,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),ur("sheetViews",ur("sheetView",null,s),{})}function Jye(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",a=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=v0[e.v];break;case"d":n&&n.cellDates?s=js(e.v,-1).toISOString():(e=Ps(e),e.t="n",s=""+(e.v=si(js(e.v)))),typeof e.z>"u"&&(e.z=Xr[14]);break;default:s=e.v;break}var o=qi("v",as(s)),l={r:t},u=eh(n.cellXfs,e,n);switch(u!==0&&(l.s=u),e.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=qi("v",""+bE(n.Strings,e.v,n.revStrings)),l.t="s";break}l.t="str";break}if(e.t!=a&&(e.t=a,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=ur("f",as(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(l.cm=1),ur("c",o,l)}var Qye=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=Nv("v"),i=Nv("f");return function(l,u,d,f,h,g){for(var x=0,y="",v=[],T=[],k=0,b=0,N=0,E="",P,M,j=0,A=0,O,L,q=0,Q=0,ae=Array.isArray(g.CellXf),te,ne=[],B=[],V=Array.isArray(u),R=[],H={},U=!1,I=!!d.sheetStubs,W=l.split(t),K=0,Z=W.length;K!=Z;++K){y=W[K].trim();var oe=y.length;if(oe!==0){var J=0;e:for(x=0;x<oe;++x)switch(y[x]){case">":if(y[x-1]!="/"){++x;break e}if(d&&d.cellStyles){if(M=tn(y.slice(J,x),!0),j=M.r!=null?parseInt(M.r,10):j+1,A=-1,d.sheetRows&&d.sheetRows<j)continue;H={},U=!1,M.ht&&(U=!0,H.hpt=parseFloat(M.ht),H.hpx=Vp(H.hpt)),M.hidden=="1"&&(U=!0,H.hidden=!0),M.outlineLevel!=null&&(U=!0,H.level=+M.outlineLevel),U&&(R[j-1]=H)}break;case"<":J=x;break}if(J>=x)break;if(M=tn(y.slice(J,x),!0),j=M.r!=null?parseInt(M.r,10):j+1,A=-1,!(d.sheetRows&&d.sheetRows<j)){f.s.r>j-1&&(f.s.r=j-1),f.e.r<j-1&&(f.e.r=j-1),d&&d.cellStyles&&(H={},U=!1,M.ht&&(U=!0,H.hpt=parseFloat(M.ht),H.hpx=Vp(H.hpt)),M.hidden=="1"&&(U=!0,H.hidden=!0),M.outlineLevel!=null&&(U=!0,H.level=+M.outlineLevel),U&&(R[j-1]=H)),v=y.slice(x).split(e);for(var le=0;le!=v.length&&v[le].trim().charAt(0)=="<";++le);for(v=v.slice(le),x=0;x!=v.length;++x)if(y=v[x].trim(),y.length!==0){if(T=y.match(r),k=x,b=0,N=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,T!=null&&T.length===2){for(k=0,E=T[1],b=0;b!=E.length&&!((N=E.charCodeAt(b)-64)<1||N>26);++b)k=26*k+N;--k,A=k}else++A;for(b=0;b!=y.length&&y.charCodeAt(b)!==62;++b);if(++b,M=tn(y.slice(0,b),!0),M.r||(M.r=Qr({r:j-1,c:A})),E=y.slice(b),P={t:""},(T=E.match(a))!=null&&T[1]!==""&&(P.v=On(T[1])),d.cellFormula){if((T=E.match(i))!=null&&T[1]!==""){if(P.f=On(us(T[1])).replace(/\r\n/g,`
`),d.xlfn||(P.f=JD(P.f)),T[0].indexOf('t="array"')>-1)P.F=(E.match(s)||[])[1],P.F.indexOf(":")>-1&&ne.push([Rn(P.F),P.F]);else if(T[0].indexOf('t="shared"')>-1){L=tn(T[0]);var ue=On(us(T[1]));d.xlfn||(ue=JD(ue)),B[parseInt(L.si,10)]=[L,ue,M.r]}}else(T=E.match(/<f[^>]*\/>/))&&(L=tn(T[0]),B[L.si]&&(P.f=K1e(B[L.si][1],B[L.si][2],M.r)));var de=Xs(M.r);for(b=0;b<ne.length;++b)de.r>=ne[b][0].s.r&&de.r<=ne[b][0].e.r&&de.c>=ne[b][0].s.c&&de.c<=ne[b][0].e.c&&(P.F=ne[b][1])}if(M.t==null&&P.v===void 0)if(P.f||P.F)P.v=0,P.t="n";else if(I)P.t="z";else continue;else P.t=M.t||"n";switch(f.s.c>A&&(f.s.c=A),f.e.c<A&&(f.e.c=A),P.t){case"n":if(P.v==""||P.v==null){if(!I)continue;P.t="z"}else P.v=parseFloat(P.v);break;case"s":if(typeof P.v>"u"){if(!I)continue;P.t="z"}else O=Qy[parseInt(P.v,10)],P.v=O.t,P.r=O.r,d.cellHTML&&(P.h=O.h);break;case"str":P.t="s",P.v=P.v!=null?us(P.v):"",d.cellHTML&&(P.h=eE(P.v));break;case"inlineStr":T=E.match(n),P.t="s",T!=null&&(O=mE(T[1]))?(P.v=O.t,d.cellHTML&&(P.h=O.h)):P.v="";break;case"b":P.v=Es(P.v);break;case"d":d.cellDates?P.v=js(P.v,1):(P.v=si(js(P.v,1)),P.t="n");break;case"e":(!d||d.cellText!==!1)&&(P.w=P.v),P.v=rG[P.v];break}if(q=Q=0,te=null,ae&&M.s!==void 0&&(te=g.CellXf[M.s],te!=null&&(te.numFmtId!=null&&(q=te.numFmtId),d.cellStyles&&te.fillId!=null&&(Q=te.fillId))),ZG(P,q,Q,d,h,g),d.cellDates&&ae&&P.t=="n"&&v1(Xr[q])&&(P.t="d",P.v=l3(P.v)),M.cm&&d.xlmeta){var Te=(d.xlmeta.Cell||[])[+M.cm-1];Te&&Te.type=="XLDAPR"&&(P.D=!0)}if(V){var ie=Xs(M.r);u[ie.r]||(u[ie.r]=[]),u[ie.r][ie.c]=P}else u[M.r]=P}}}}R.length>0&&(u["!rows"]=R)}})();function Zye(e,t,r,n){var s=[],a=[],i=Rn(e["!ref"]),o="",l,u="",d=[],f=0,h=0,g=e["!rows"],x=Array.isArray(e),y={r:u},v,T=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=Ys(h);for(f=i.s.r;f<=i.e.r;++f){for(a=[],u=Na(f),h=i.s.c;h<=i.e.c;++h){l=d[h]+u;var k=x?(e[f]||[])[h]:e[l];k!==void 0&&(o=Jye(k,l,e,t))!=null&&a.push(o)}(a.length>0||g&&g[f])&&(y={r:u},g&&g[f]&&(v=g[f],v.hidden&&(y.hidden=1),T=-1,v.hpx?T=Ov(v.hpx):v.hpt&&(T=v.hpt),T>-1&&(y.ht=T,y.customHeight=1),v.level&&(y.outlineLevel=v.level)),s[s.length]=ur("row",a.join(""),y))}if(g)for(;f<g.length;++f)g&&g[f]&&(y={r:f+1},v=g[f],v.hidden&&(y.hidden=1),T=-1,v.hpx?T=Ov(v.hpx):v.hpt&&(T=v.hpt),T>-1&&(y.ht=T,y.customHeight=1),v.level&&(y.outlineLevel=v.level),s[s.length]=ur("row","",y));return s.join("")}function tV(e,t,r,n){var s=[ja,ur("worksheet",null,{xmlns:Vm[0],"xmlns:r":ti.r})],a=r.SheetNames[e],i=0,o="",l=r.Sheets[a];l==null&&(l={});var u=l["!ref"]||"A1",d=Rn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=pn(d)}n||(n={}),l["!comments"]=[];var f=[];Rye(l,r,e,t,s),s[s.length]=ur("dimension",null,{ref:u}),s[s.length]=Xye(l,t,e,r),t.sheetFormat&&(s[s.length]=ur("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(s[s.length]=Gye(l,l["!cols"])),s[i=s.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=Zye(l,t),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),l["!protect"]&&(s[s.length]=$ye(l["!protect"])),l["!autofilter"]!=null&&(s[s.length]=qye(l["!autofilter"],l,r,e)),l["!merges"]!=null&&l["!merges"].length>0&&(s[s.length]=Oye(l["!merges"]));var h=-1,g,x=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(y){y[1].Target&&(g={ref:y[0]},y[1].Target.charAt(0)!="#"&&(x=ns(n,-1,as(y[1].Target).replace(/#.*$/,""),Sn.HLINK),g["r:id"]="rId"+x),(h=y[1].Target.indexOf("#"))>-1&&(g.location=as(y[1].Target.slice(h+1))),y[1].Tooltip&&(g.tooltip=as(y[1].Tooltip)),s[s.length]=ur("hyperlink",null,g))}),s[s.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(s[s.length]=Wye(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=qi("ignoredErrors",ur("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(x=ns(n,-1,"../drawings/drawing"+(e+1)+".xml",Sn.DRAW),s[s.length]=ur("drawing",null,{"r:id":"rId"+x}),l["!drawing"]=f),l["!comments"].length>0&&(x=ns(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Sn.VML),s[s.length]=ur("legacyDrawing",null,{"r:id":"rId"+x}),l["!legacy"]=x),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function eve(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=s/20),r}function tve(e,t,r){var n=Mt(145),s=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var a=320;s.hpx?a=Ov(s.hpx)*20:s.hpt&&(a=s.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,g=d<<10;g<d+1<<10;++g){u.c=g;var x=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Qr(u)];x&&(f<0&&(f=g),h=g)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,h))}var y=n.l;return n.l=l,n.write_shift(4,o),n.l=y,n.length>n.l?n.slice(0,n.l):n}function rve(e,t,r,n){var s=tve(n,r,t);(s.length>17||(t["!rows"]||[])[n])&&Wt(e,0,s)}var nve=Xm,sve=_1;function ave(){}function ive(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=che(e),r}function ove(e,t,r){r==null&&(r=Mt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return R4({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),JH(e,r),r.slice(0,r.l)}function lve(e){var t=Cc(e);return[t]}function cve(e,t,r){return r==null&&(r=Mt(8)),qm(t,r)}function uve(e){var t=Km(e);return[t]}function dve(e,t,r){return r==null&&(r=Mt(4)),Ym(t,r)}function fve(e){var t=Cc(e),r=e.read_shift(1);return[t,r,"b"]}function hve(e,t,r){return r==null&&(r=Mt(9)),qm(t,r),r.write_shift(1,e.v?1:0),r}function mve(e){var t=Km(e),r=e.read_shift(1);return[t,r,"b"]}function gve(e,t,r){return r==null&&(r=Mt(5)),Ym(t,r),r.write_shift(1,e.v?1:0),r}function pve(e){var t=Cc(e),r=e.read_shift(1);return[t,r,"e"]}function xve(e,t,r){return r==null&&(r=Mt(9)),qm(t,r),r.write_shift(1,e.v),r}function yve(e){var t=Km(e),r=e.read_shift(1);return[t,r,"e"]}function vve(e,t,r){return r==null&&(r=Mt(8)),Ym(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function wve(e){var t=Cc(e),r=e.read_shift(4);return[t,r,"s"]}function bve(e,t,r){return r==null&&(r=Mt(12)),qm(t,r),r.write_shift(4,t.v),r}function _ve(e){var t=Km(e),r=e.read_shift(4);return[t,r,"s"]}function Sve(e,t,r){return r==null&&(r=Mt(8)),Ym(t,r),r.write_shift(4,t.v),r}function kve(e){var t=Cc(e),r=ho(e);return[t,r,"n"]}function Tve(e,t,r){return r==null&&(r=Mt(16)),qm(t,r),Pm(e.v,r),r}function rV(e){var t=Km(e),r=ho(e);return[t,r,"n"]}function Cve(e,t,r){return r==null&&(r=Mt(12)),Ym(t,r),Pm(e.v,r),r}function Eve(e){var t=Cc(e),r=cE(e);return[t,r,"n"]}function Nve(e,t,r){return r==null&&(r=Mt(12)),qm(t,r),QH(e.v,r),r}function Ave(e){var t=Km(e),r=cE(e);return[t,r,"n"]}function jve(e,t,r){return r==null&&(r=Mt(8)),Ym(t,r),QH(e.v,r),r}function Pve(e){var t=Cc(e),r=iE(e);return[t,r,"is"]}function Mve(e){var t=Cc(e),r=xo(e);return[t,r,"str"]}function Fve(e,t,r){return r==null&&(r=Mt(12+4*e.v.length)),qm(t,r),_i(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Dve(e){var t=Km(e),r=xo(e);return[t,r,"str"]}function Ove(e,t,r){return r==null&&(r=Mt(8+4*e.v.length)),Ym(t,r),_i(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Ive(e,t,r){var n=e.l+t,s=Cc(e);s.r=r["!row"];var a=e.read_shift(1),i=[s,a,"b"];if(r.cellFormula){e.l+=2;var o=d3(e,n-e.l,r);i[3]=co(o,null,s,r.supbooks,r)}else e.l=n;return i}function Rve(e,t,r){var n=e.l+t,s=Cc(e);s.r=r["!row"];var a=e.read_shift(1),i=[s,a,"e"];if(r.cellFormula){e.l+=2;var o=d3(e,n-e.l,r);i[3]=co(o,null,s,r.supbooks,r)}else e.l=n;return i}function Lve(e,t,r){var n=e.l+t,s=Cc(e);s.r=r["!row"];var a=ho(e),i=[s,a,"n"];if(r.cellFormula){e.l+=2;var o=d3(e,n-e.l,r);i[3]=co(o,null,s,r.supbooks,r)}else e.l=n;return i}function Bve(e,t,r){var n=e.l+t,s=Cc(e);s.r=r["!row"];var a=xo(e),i=[s,a,"str"];if(r.cellFormula){e.l+=2;var o=d3(e,n-e.l,r);i[3]=co(o,null,s,r.supbooks,r)}else e.l=n;return i}var $ve=Xm,zve=_1;function Uve(e,t){return t==null&&(t=Mt(4)),t.write_shift(4,e),t}function Wve(e,t){var r=e.l+t,n=Xm(e),s=oE(e),a=xo(e),i=xo(e),o=xo(e);e.l=r;var l={rfx:n,relId:s,loc:a,display:o};return i&&(l.Tooltip=i),l}function Hve(e,t){var r=Mt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));_1({s:Xs(e[0]),e:Xs(e[0])},r),lE("rId"+t,r);var n=e[1].Target.indexOf("#"),s=n==-1?"":e[1].Target.slice(n+1);return _i(s||"",r),_i(e[1].Tooltip||"",r),_i("",r),r.slice(0,r.l)}function Gve(){}function Vve(e,t,r){var n=e.l+t,s=ZH(e),a=e.read_shift(1),i=[s];if(i[2]=a,r.cellFormula){var o=pye(e,n-e.l,r);i[1]=o}else e.l=n;return i}function qve(e,t,r){var n=e.l+t,s=Xm(e),a=[s];if(r.cellFormula){var i=yye(e,n-e.l,r);a[1]=i,e.l=n}else e.l=n;return a}function Kve(e,t,r){r==null&&(r=Mt(18));var n=f3(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var nV=["left","right","top","bottom","header","footer"];function Yve(e){var t={};return nV.forEach(function(r){t[r]=ho(e)}),t}function Xve(e,t){return t==null&&(t=Mt(48)),um(e),nV.forEach(function(r){Pm(e[r],t)}),t}function Jve(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function Qve(e,t,r){r==null&&(r=Mt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function Zve(e){var t=Mt(24);return t.write_shift(4,4),t.write_shift(4,1),_1(e,t),t}function e2e(e,t){return t==null&&(t=Mt(66)),t.write_shift(2,e.password?gE(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function t2e(){}function r2e(){}function n2e(e,t,r,n,s,a,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var l=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,g,x,y,v,T,k,b,N,E,P=[];o.biff=12,o["!row"]=0;var M=0,j=!1,A=[],O={},L=o.supbooks||s.supbooks||[[]];if(L.sharedf=O,L.arrayf=A,L.SheetNames=s.SheetNames||s.Sheets.map(function(V){return V.name}),!o.supbooks&&(o.supbooks=L,s.Names))for(var q=0;q<s.Names.length;++q)L[0][q+1]=s.Names[q];var Q=[],ae=[],te=!1;Iv[16]={n:"BrtShortReal",f:rV};var ne;if(y0(e,function(R,H,U){if(!h)switch(U){case 148:u=R;break;case 0:g=R,o.sheetRows&&o.sheetRows<=g.r&&(h=!0),N=Na(v=g.r),o["!row"]=g.r,(R.hidden||R.hpt||R.level!=null)&&(R.hpt&&(R.hpx=Vp(R.hpt)),ae[R.r]=R);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(x={t:R[2]},R[2]){case"n":x.v=R[1];break;case"s":b=Qy[R[1]],x.v=b.t,x.r=b.r;break;case"b":x.v=!!R[1];break;case"e":x.v=R[1],o.cellText!==!1&&(x.w=v0[x.v]);break;case"str":x.t="s",x.v=R[1];break;case"is":x.t="s",x.v=R[1].t;break}if((y=i.CellXf[R[0].iStyleRef])&&ZG(x,y.numFmtId,null,o,a,i),T=R[0].c==-1?T+1:R[0].c,o.dense?(l[v]||(l[v]=[]),l[v][T]=x):l[Ys(T)+N]=x,o.cellFormula){for(j=!1,M=0;M<A.length;++M){var I=A[M];g.r>=I[0].s.r&&g.r<=I[0].e.r&&T>=I[0].s.c&&T<=I[0].e.c&&(x.F=pn(I[0]),j=!0)}!j&&R.length>3&&(x.f=R[3])}if(d.s.r>g.r&&(d.s.r=g.r),d.s.c>T&&(d.s.c=T),d.e.r<g.r&&(d.e.r=g.r),d.e.c<T&&(d.e.c=T),o.cellDates&&y&&x.t=="n"&&v1(Xr[y.numFmtId])){var W=Xh(x.v);W&&(x.t="d",x.v=new Date(W.y,W.m-1,W.d,W.H,W.M,W.S,W.u))}ne&&(ne.type=="XLDAPR"&&(x.D=!0),ne=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;x={t:"z",v:void 0},T=R[0].c==-1?T+1:R[0].c,o.dense?(l[v]||(l[v]=[]),l[v][T]=x):l[Ys(T)+N]=x,d.s.r>g.r&&(d.s.r=g.r),d.s.c>T&&(d.s.c=T),d.e.r<g.r&&(d.e.r=g.r),d.e.c<T&&(d.e.c=T),ne&&(ne.type=="XLDAPR"&&(x.D=!0),ne=void 0);break;case 176:P.push(R);break;case 49:ne=((o.xlmeta||{}).Cell||[])[R-1];break;case 494:var K=n["!id"][R.relId];for(K?(R.Target=K.Target,R.loc&&(R.Target+="#"+R.loc),R.Rel=K):R.relId==""&&(R.Target="#"+R.loc),v=R.rfx.s.r;v<=R.rfx.e.r;++v)for(T=R.rfx.s.c;T<=R.rfx.e.c;++T)o.dense?(l[v]||(l[v]=[]),l[v][T]||(l[v][T]={t:"z",v:void 0}),l[v][T].l=R):(k=Qr({c:T,r:v}),l[k]||(l[k]={t:"z",v:void 0}),l[k].l=R);break;case 426:if(!o.cellFormula)break;A.push(R),E=o.dense?l[v][T]:l[Ys(T)+N],E.f=co(R[1],d,{r:g.r,c:T},L,o),E.F=pn(R[0]);break;case 427:if(!o.cellFormula)break;O[Qr(R[0].s)]=R[1],E=o.dense?l[v][T]:l[Ys(T)+N],E.f=co(R[1],d,{r:g.r,c:T},L,o);break;case 60:if(!o.cellStyles)break;for(;R.e>=R.s;)Q[R.e--]={width:R.w/256,hidden:!!(R.flags&1),level:R.level},te||(te=!0,pE(R.w/256)),$f(Q[R.e+1]);break;case 161:l["!autofilter"]={ref:pn(R)};break;case 476:l["!margins"]=R;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),R.name&&(s.Sheets[r].CodeName=R.name),(R.above||R.left)&&(l["!outline"]={above:R.above,left:R.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),R.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!H.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+U.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(l["!ref"]=pn(u||d)),o.sheetRows&&l["!ref"]){var B=Rn(l["!ref"]);o.sheetRows<=+B.e.r&&(B.e.r=o.sheetRows-1,B.e.r>d.e.r&&(B.e.r=d.e.r),B.e.r<B.s.r&&(B.s.r=B.e.r),B.e.c>d.e.c&&(B.e.c=d.e.c),B.e.c<B.s.c&&(B.s.c=B.e.c),l["!fullref"]=l["!ref"],l["!ref"]=pn(B))}return P.length>0&&(l["!merges"]=P),Q.length>0&&(l["!cols"]=Q),ae.length>0&&(l["!rows"]=ae),l}function s2e(e,t,r,n,s,a,i){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Ps(t),t.z=t.z||Xr[14],t.v=si(js(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var l={r,c:n};switch(l.s=eh(s.cellXfs,t,s),t.l&&a["!links"].push([Qr(l),t.l]),t.c&&a["!comments"].push([Qr(l),t.c]),t.t){case"s":case"str":return s.bookSST?(o=bE(s.Strings,t.v,s.revStrings),l.t="s",l.v=o,i?Wt(e,18,Sve(t,l)):Wt(e,7,bve(t,l))):(l.t="str",i?Wt(e,17,Ove(t,l)):Wt(e,6,Fve(t,l))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?Wt(e,13,jve(t,l)):Wt(e,2,Nve(t,l)):i?Wt(e,16,Cve(t,l)):Wt(e,5,Tve(t,l)),!0;case"b":return l.t="b",i?Wt(e,15,gve(t,l)):Wt(e,4,hve(t,l)),!0;case"e":return l.t="e",i?Wt(e,14,vve(t,l)):Wt(e,3,xve(t,l)),!0}return i?Wt(e,12,dve(t,l)):Wt(e,1,cve(t,l)),!0}function a2e(e,t,r,n){var s=Rn(t["!ref"]||"A1"),a,i="",o=[];Wt(e,145);var l=Array.isArray(t),u=s.e.r;t["!rows"]&&(u=Math.max(s.e.r,t["!rows"].length-1));for(var d=s.s.r;d<=u;++d){i=Na(d),rve(e,t,s,d);var f=!1;if(d<=s.e.r)for(var h=s.s.c;h<=s.e.c;++h){d===s.s.r&&(o[h]=Ys(h)),a=o[h]+i;var g=l?(t[d]||[])[h]:t[a];if(!g){f=!1;continue}f=s2e(e,g,d,h,n,t,f)}}Wt(e,146)}function i2e(e,t){!t||!t["!merges"]||(Wt(e,177,Uve(t["!merges"].length)),t["!merges"].forEach(function(r){Wt(e,176,zve(r))}),Wt(e,178))}function o2e(e,t){!t||!t["!cols"]||(Wt(e,390),t["!cols"].forEach(function(r,n){r&&Wt(e,60,Kve(n,r))}),Wt(e,391))}function l2e(e,t){!t||!t["!ref"]||(Wt(e,648),Wt(e,649,Zve(Rn(t["!ref"]))),Wt(e,650))}function c2e(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var s=ns(r,-1,n[1].Target.replace(/#.*$/,""),Sn.HLINK);Wt(e,494,Hve(n,s))}}),delete t["!links"]}function u2e(e,t,r,n){if(t["!comments"].length>0){var s=ns(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Sn.VML);Wt(e,551,lE("rId"+s)),t["!legacy"]=s}}function d2e(e,t,r,n){if(t["!autofilter"]){var s=t["!autofilter"],a=typeof s.ref=="string"?s.ref:pn(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=dl(a);o.s.r==o.e.r&&(o.e.r=dl(t["!ref"]).e.r,a=pn(o));for(var l=0;l<i.length;++l){var u=i[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+a;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Wt(e,161,_1(Rn(a))),Wt(e,162)}}function f2e(e,t,r){Wt(e,133),Wt(e,137,Qve(t,r)),Wt(e,138),Wt(e,134)}function h2e(e,t){t["!protect"]&&Wt(e,535,e2e(t["!protect"]))}function m2e(e,t,r,n){var s=ul(),a=r.SheetNames[e],i=r.Sheets[a]||{},o=a;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var l=Rn(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Wt(s,129),(r.vbaraw||i["!outline"])&&Wt(s,147,ove(o,i["!outline"])),Wt(s,148,sve(l)),f2e(s,i,r.Workbook),o2e(s,i),a2e(s,i,e,t),h2e(s,i),d2e(s,i,r,e),i2e(s,i),c2e(s,i,n),i["!margins"]&&Wt(s,476,Xve(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&l2e(s,i),u2e(s,i,e,n),Wt(s,130),s.end()}function g2e(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var i=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var s=On((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){n=a.replace(/<.*?>/g,"")}),[t,s,n]}function p2e(e,t,r,n,s,a){var i=a||{"!type":"chart"};if(!e)return a;var o=0,l=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=g2e(f);d.s.r=d.s.c=0,d.e.c=o,u=Ys(o),h[0].forEach(function(g,x){i[u+Na(x)]={t:"n",v:g,z:h[1]},l=x}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=pn(d)),i}function x2e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(eV);return o&&_E(o[0],a,s,r),(i=e.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=i[1]),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}function y2e(e,t){e.l+=10;var r=xo(e);return{name:r}}function v2e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i=!1;return y0(e,function(l,u,d){switch(d){case 550:a["!rel"]=l;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),l.name&&(s.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}var SE=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],w2e=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],b2e=[],_2e=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function rO(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var a=t[s];if(n[a[0]]==null)n[a[0]]=a[1];else switch(a[2]){case"bool":typeof n[a[0]]=="string"&&(n[a[0]]=Es(n[a[0]]));break;case"int":typeof n[a[0]]=="string"&&(n[a[0]]=parseInt(n[a[0]],10));break}}}function nO(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Es(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function sV(e){nO(e.WBProps,SE),nO(e.CalcPr,_2e),rO(e.WBView,w2e),rO(e.Sheets,b2e),Pp.date1904=Es(e.WBProps.date1904)}function S2e(e){return!e.Workbook||!e.Workbook.WBProps?"false":Es(e.Workbook.WBProps.date1904)?"true":"false"}var k2e="][*?/\\".split("");function aV(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return k2e.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function T2e(e,t,r){e.forEach(function(n,s){aV(n);for(var a=0;a<s;++a)if(n==e[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[s]&&t[s].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function C2e(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];T2e(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Sye(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var E2e=/<\w+:workbook/;function N2e(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",a={},i=0;if(e.replace(wo,function(l,u){var d=tn(l);switch(nd(d[0])){case"<?xml":break;case"<workbook":l.match(E2e)&&(s="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":SE.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Es(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=us(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=On(us(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":a={},a.Name=us(d.name),d.comment&&(a.Comment=d.comment),d.localSheetId&&(a.Sheet=+d.localSheetId),Es(d.hidden||"0")&&(a.Hidden=!0),i=u+l.length;break;case"</definedName>":a.Ref=On(us(e.slice(i,u))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),Vm.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return sV(r),r}function iV(e){var t=[ja];t[t.length]=ur("workbook",null,{xmlns:Vm[0],"xmlns:r":ti.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(SE.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=ur("workbookPr",null,n);var s=e.Workbook&&e.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",a=0;a!=e.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==e.SheetNames.length&&(a=0),t[t.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",a=0;a!=e.SheetNames.length;++a){var i={name:as(e.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=ur("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(t[t.length]=ur("definedName",as(o.Ref),l))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function A2e(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=z8(e),r.name=xo(e),r}function j2e(e,t){return t||(t=Mt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),lE(e.strRelID,t),_i(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function P2e(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?xo(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function M2e(e,t){t||(t=Mt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),JH(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function F2e(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function D2e(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),a=uhe(e),i=xye(e,0,r),o=oE(e);e.l=n;var l={Name:a,Ptg:i};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function O2e(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var a=[],i=[[]];return i.SheetNames=[],i.XTI=[],Iv[16]={n:"BrtFRTArchID$",f:F2e},y0(e,function(l,u,d){switch(d){case 156:i.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(t.SID=l.Sheet),l.Ref=co(l.Ptg,null,null,i,t),delete t.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(d),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),sV(r),r.Names=a,r.supbooks=i,r}function I2e(e,t){Wt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Wt(e,156,j2e(s))}Wt(e,144)}function R2e(e,t){t||(t=Mt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return _i("SheetJS",t),_i(j4.version,t),_i(j4.version,t),_i("7262",t),t.length>t.l?t.slice(0,t.l):t}function L2e(e,t){t||(t=Mt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function B2e(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,s=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&a==-1&&(a=n);a>s||(Wt(e,135),Wt(e,158,L2e(s)),Wt(e,136))}}function $2e(e,t){var r=ul();return Wt(r,131),Wt(r,128,R2e()),Wt(r,153,M2e(e.Workbook&&e.Workbook.WBProps||null)),B2e(r,e),I2e(r,e),Wt(r,132),r.end()}function z2e(e,t,r){return t.slice(-4)===".bin"?O2e(e,r):N2e(e,r)}function U2e(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?n2e(e,n,r,s,a,i,o):Dye(e,n,r,s,a,i,o)}function W2e(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?v2e(e,n,r,s,a):x2e(e,n,r,s,a)}function H2e(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?V1e():q1e()}function G2e(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?H1e():G1e()}function V2e(e,t,r,n){return t.slice(-4)===".bin"?zpe(e,r,n):Ape(e,r,n)}function q2e(e,t,r){return $G(e,r)}function K2e(e,t,r){return t.slice(-4)===".bin"?Kge(e,r):Gge(e,r)}function Y2e(e,t,r){return t.slice(-4)===".bin"?B1e(e,r):j1e(e,r)}function X2e(e,t,r){return t.slice(-4)===".bin"?E1e(e):T1e(e)}function J2e(e,t,r,n){return r.slice(-4)===".bin"?N1e(e,t,r,n):void 0}function Q2e(e,t,r){return t.slice(-4)===".bin"?_1e(e,t,r):k1e(e,t,r)}function Z2e(e,t,r){return(t.slice(-4)===".bin"?$2e:iV)(e)}function ewe(e,t,r,n,s){return(t.slice(-4)===".bin"?m2e:tV)(e,r,n,s)}function twe(e,t,r){return(t.slice(-4)===".bin"?Jpe:LG)(e,r)}function rwe(e,t,r){return(t.slice(-4)===".bin"?Jge:jG)(e,r)}function nwe(e,t,r){return(t.slice(-4)===".bin"?$1e:WG)(e)}function swe(e){return(e.slice(-4)===".bin"?S1e:zG)()}var oV=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,lV=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Vc(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match(oV),a,i,o,l;if(s)for(l=0;l!=s.length;++l)a=s[l].match(lV),(i=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),n[o]=a[2].slice(1,a[2].length-1));return n}function awe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(oV),s,a,i,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(lV),(a=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(a+1),r[i]=s[2].slice(1,s[2].length-1));return r}var ev;function iwe(e,t){var r=ev[e]||On(e);return r==="General"?Am(t):bc(r,t)}function owe(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Es(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=js(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[On(t)]=s}function lwe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||v0[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ev(e.v):e.w=Am(e.v):e.w=iwe(t||"General",e.v)}catch(a){if(r.WTF)throw a}try{var n=ev[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&v1(n)){var s=Xh(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(a){if(r.WTF)throw a}}}function cwe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=bpe[n.Pattern]||n.Pattern)}e[t.ID]=t}function uwe(e,t,r,n,s,a,i,o,l,u){var d="General",f=n.StyleID,h={};u=u||{};var g=[],x=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&i&&(f=i.StyleID);a[f]!==void 0&&(a[f].nf&&(d=a[f].nf),a[f].Interior&&g.push(a[f].Interior),!!a[f].Parent);)f=a[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Es(e);break;case"String":n.t="s",n.r=wD(On(e)),n.v=e.indexOf("<")>-1?On(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(js(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=On(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=rG[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=wD(t||e));break}if(lwe(n,d,u),u.cellFormula!==!1)if(n.Formula){var y=On(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=jp(y,s),delete n.Formula,n.ArrayRange=="RC"?n.F=jp("RC:RC",s):n.ArrayRange&&(n.F=jp(n.ArrayRange,s),l.push([Rn(n.F),n.F]))}else for(x=0;x<l.length;++x)s.r>=l[x][0].s.r&&s.r<=l[x][0].e.r&&s.c>=l[x][0].s.c&&s.c<=l[x][0].e.c&&(n.F=l[x][1]);u.cellStyles&&(g.forEach(function(v){!h.patternType&&v.patternType&&(h.patternType=v.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function dwe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function HS(e,t){var r=t||{};w1();var n=My(tE(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=us(n));var s=n.slice(0,1024).toLowerCase(),a=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var i=Ps(r);return i.type="string",Gp.to_workbook(n,i)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(It){s.indexOf("<"+It)>=0&&(a=!0)}),a)return Xwe(n,r);ev={"General Number":"General","General Date":Xr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Xr[15],"Short Date":Xr[14],"Long Time":Xr[19],"Medium Time":Xr[18],"Short Time":Xr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Xr[2],Standard:Xr[4],Percent:Xr[10],Scientific:Xr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],u,d={},f=[],h=r.dense?[]:{},g="",x={},y={},v=Vc('<Data ss:Type="String">'),T=0,k=0,b=0,N={s:{r:2e6,c:2e6},e:{r:0,c:0}},E={},P={},M="",j=0,A=[],O={},L={},q=0,Q=[],ae=[],te={},ne=[],B,V=!1,R=[],H=[],U={},I=0,W=0,K={Sheets:[],WBProps:{date1904:!1}},Z={};jv.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var oe="";o=jv.exec(n);)switch(o[3]=(oe=o[3]).toLowerCase()){case"data":if(oe=="data"){if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?uwe(n.slice(T,o.index),M,v,l[l.length-1][0]=="comment"?te:x,{c:k,r:b},E,ne[k],y,R,r):(M="",v=Vc(o[0]),T=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(ae.length>0&&(x.c=ae),(!r.sheetRows||r.sheetRows>b)&&x.v!==void 0&&(r.dense?(h[b]||(h[b]=[]),h[b][k]=x):h[Ys(k)+Na(b)]=x),x.HRef&&(x.l={Target:On(x.HRef)},x.HRefScreenTip&&(x.l.Tooltip=x.HRefScreenTip),delete x.HRef,delete x.HRefScreenTip),(x.MergeAcross||x.MergeDown)&&(I=k+(parseInt(x.MergeAcross,10)|0),W=b+(parseInt(x.MergeDown,10)|0),A.push({s:{c:k,r:b},e:{c:I,r:W}})),!r.sheetStubs)x.MergeAcross?k=I+1:++k;else if(x.MergeAcross||x.MergeDown){for(var J=k;J<=I;++J)for(var le=b;le<=W;++le)(J>k||le>b)&&(r.dense?(h[le]||(h[le]=[]),h[le][J]={t:"z"}):h[Ys(J)+Na(le)]={t:"z"});k=I+1}else++k;else x=awe(o[0]),x.Index&&(k=+x.Index-1),k<N.s.c&&(N.s.c=k),k>N.e.c&&(N.e.c=k),o[0].slice(-2)==="/>"&&++k,ae=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(b<N.s.r&&(N.s.r=b),b>N.e.r&&(N.e.r=b),o[0].slice(-2)==="/>"&&(y=Vc(o[0]),y.Index&&(b=+y.Index-1)),k=0,++b):(y=Vc(o[0]),y.Index&&(b=+y.Index-1),U={},(y.AutoFitHeight=="0"||y.Height)&&(U.hpx=parseInt(y.Height,10),U.hpt=Ov(U.hpx),H[b]=U),y.Hidden=="1"&&(U.hidden=!0,H[b]=U));break;case"worksheet":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(g),N.s.r<=N.e.r&&N.s.c<=N.e.c&&(h["!ref"]=pn(N),r.sheetRows&&r.sheetRows<=N.e.r&&(h["!fullref"]=h["!ref"],N.e.r=r.sheetRows-1,h["!ref"]=pn(N))),A.length&&(h["!merges"]=A),ne.length>0&&(h["!cols"]=ne),H.length>0&&(h["!rows"]=H),d[g]=h}else N={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=k=0,l.push([o[3],!1]),u=Vc(o[0]),g=On(u.Name),h=r.dense?[]:{},A=[],R=[],H=[],Z={name:g,Hidden:0},K.Sheets.push(Z);break;case"table":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),ne=[],V=!1}break;case"style":o[1]==="/"?cwe(E,P,r):P=Vc(o[0]);break;case"numberformat":P.nf=On(Vc(o[0]).Format||"General"),ev[P.nf]&&(P.nf=ev[P.nf]);for(var ue=0;ue!=392&&Xr[ue]!=P.nf;++ue);if(ue==392){for(ue=57;ue!=392;++ue)if(Xr[ue]==null){Qd(P.nf,ue);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(B=Vc(o[0]),B.Hidden&&(B.hidden=!0,delete B.Hidden),B.Width&&(B.wpx=parseInt(B.Width,10)),!V&&B.wpx>10){V=!0,uo=IG;for(var de=0;de<ne.length;++de)ne[de]&&$f(ne[de])}V&&$f(B),ne[B.Index-1||ne.length]=B;for(var Te=0;Te<+B.Span;++Te)ne[ne.length]=Ps(B);break;case"namedrange":if(o[1]==="/")break;K.Names||(K.Names=[]);var ie=tn(o[0]),xe={Name:ie.Name,Ref:jp(ie.RefersTo.slice(1),{r:0,c:0})};K.Sheets.length>0&&(xe.Sheet=K.Sheets.length-1),K.Names.push(xe);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?M+=n.slice(j,o.index):j=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;P.Interior=Vc(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?Ohe(O,oe,n.slice(q,o.index)):q=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));dwe(te),ae.push(te)}else l.push([o[3],!1]),u=Vc(o[0]),te={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Ae=Vc(o[0]);h["!autofilter"]={ref:jp(Ae.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return lO(n,r);var Me=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Me=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Me=!1}break;case"excelworkbook":switch(o[3]){case"date1904":K.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Me=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Me=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(q,o.index)){case"SheetHidden":Z.Hidden=1;break;case"SheetVeryHidden":Z.Hidden=2;break}else q=o.index+o[0].length;break;case"header":h["!margins"]||um(h["!margins"]={},"xlml"),isNaN(+tn(o[0]).Margin)||(h["!margins"].header=+tn(o[0]).Margin);break;case"footer":h["!margins"]||um(h["!margins"]={},"xlml"),isNaN(+tn(o[0]).Margin)||(h["!margins"].footer=+tn(o[0]).Margin);break;case"pagemargins":var Je=tn(o[0]);h["!margins"]||um(h["!margins"]={},"xlml"),isNaN(+Je.Top)||(h["!margins"].top=+Je.Top),isNaN(+Je.Left)||(h["!margins"].left=+Je.Left),isNaN(+Je.Right)||(h["!margins"].right=+Je.Right),isNaN(+Je.Bottom)||(h["!margins"].bottom=+Je.Bottom);break;case"displayrighttoleft":K.Views||(K.Views=[]),K.Views[0]||(K.Views[0]={}),K.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Me=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Me=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Me=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Me=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Me=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Me=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Me=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Me=!1}break;case"smarttags":break;default:Me=!1;break}if(Me||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?owe(L,oe,Q,n.slice(q,o.index)):(Q=o,q=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var He={};return!r.bookSheets&&!r.bookProps&&(He.Sheets=d),He.SheetNames=f,He.Workbook=K,He.SSF=Ps(Xr),He.Props=O,He.Custprops=L,He}function K8(e,t){switch(TE(t=t||{}),t.type||"base64"){case"base64":return HS(Rl(e),t);case"binary":case"buffer":case"file":return HS(e,t);case"array":return HS(Qf(e),t)}}function fwe(e,t){var r=[];return e.Props&&r.push(Ihe(e.Props,t)),e.Custprops&&r.push(Rhe(e.Props,e.Custprops)),r.join("")}function hwe(){return""}function mwe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,s){var a=[];a.push(ur("NumberFormat",null,{"ss:Format":as(Xr[n.numFmtId])}));var i={"ss:ID":"s"+(21+s)};r.push(ur("Style",a.join(""),i))}),ur("Styles",r.join(""))}function cV(e){return ur("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+vE(e.Ref,{r:0,c:0})})}function gwe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var s=t[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(cV(s)))}return ur("Names",r.join(""))}function pwe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||a.push(cV(o)))}return a.join("")}function xwe(e,t,r,n){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(ur("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(ur("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(ur("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(ur("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(qi("ProtectContents","True")),e["!protect"].objects&&s.push(qi("ProtectObjects","True")),e["!protect"].scenarios&&s.push(qi("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(qi("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(qi("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&s.push("<"+i[1]+"/>")})),s.length==0?"":ur("WorksheetOptions",s.join(""),{xmlns:El.x})}function ywe(e){return e.map(function(t){var r=Bfe(t.t||""),n=ur("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return ur("Comment",n,{"ss:Author":t.a})}).join("")}function vwe(e,t,r,n,s,a,i){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+as(vE(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var l=Xs(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=as(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=as(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=v0[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Xr[14]);break;case"s":f="String",h=Lfe(e.v||"");break}var g=eh(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=i.c+1;var x=e.v!=null?h:"",y=e.t=="z"?"":'<Data ss:Type="'+f+'">'+x+"</Data>";return(e.c||[]).length>0&&(y+=ywe(e.c)),ur("Cell",y,o)}function wwe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Vp(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function bwe(e,t,r,n){if(!e["!ref"])return"";var s=Rn(e["!ref"]),a=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(v,T){$f(v);var k=!!v.width,b=f3(T,v),N={"ss:Index":T+1};k&&(N["ss:Width"]=Fv(b.width)),v.hidden&&(N["ss:Hidden"]="1"),o.push(ur("Column",null,N))});for(var l=Array.isArray(e),u=s.s.r;u<=s.e.r;++u){for(var d=[wwe(u,(e["!rows"]||[])[u])],f=s.s.c;f<=s.e.c;++f){var h=!1;for(i=0;i!=a.length;++i)if(!(a[i].s.c>f)&&!(a[i].s.r>u)&&!(a[i].e.c<f)&&!(a[i].e.r<u)){(a[i].s.c!=f||a[i].s.r!=u)&&(h=!0);break}if(!h){var g={r:u,c:f},x=Qr(g),y=l?(e[u]||[])[f]:e[x];d.push(vwe(y,x,e,t,r,n,g))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function _we(e,t,r){var n=[],s=r.SheetNames[e],a=r.Sheets[s],i=a?pwe(a,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=a?bwe(a,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(xwe(a,t,e,r)),n.join("")}function Swe(e,t){t||(t={}),e.SSF||(e.SSF=Ps(Xr)),e.SSF&&(w1(),a3(e.SSF),t.revssf=o3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],eh(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(fwe(e,t)),r.push(hwe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(ur("Worksheet",_we(n,t,e),{"ss:Name":as(e.SheetNames[n])}));return r[2]=mwe(e,t),r[3]=gwe(e),ja+ur("Workbook",r.join(""),{xmlns:El.ss,"xmlns:o":El.o,"xmlns:x":El.x,"xmlns:ss":El.ss,"xmlns:dt":El.dt,"xmlns:html":El.html})}function kwe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=ghe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=phe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var Twe=[60,1084,2066,2165,2175];function Cwe(e,t,r,n,s){var a=n,i=[],o=r.slice(r.l,r.l+a);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}i.push(o),r.l+=a;for(var l=Gd(r,r.l),u=Y8[l],d=0;u!=null&&Twe.indexOf(l)>-1;)a=Gd(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+a),i.push(o),r.l+=4+a,u=Y8[l=Gd(r,r.l)];var f=wi(i);Wi(f,0);var h=0;f.lens=[];for(var g=0;g<i.length;++g)f.lens.push(h),h+=i[g].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,s)}function Pu(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Xr[n])}catch(a){if(t.WTF)throw a}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||v0[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ev(e.v):e.w=Am(e.v):e.w=bc(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(a){if(t.WTF)throw a}if(t.cellDates&&n&&e.t=="n"&&v1(Xr[n]||String(n))){var s=Xh(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function yb(e,t,r){return{v:e,ixfe:t,t:r}}function Ewe(e,t){var r={opts:{}},n={},s=t.dense?[]:{},a={},i={},o=null,l=[],u="",d={},f,h="",g,x,y,v,T={},k=[],b,N,E=[],P=[],M={Sheets:[],WBProps:{date1904:!1},Views:[{}]},j={},A=function(ot){return ot<8?om[ot]:ot<64&&P[ot-8]||om[ot]},O=function(ot,nt,Dt){var Rt=nt.XF.data;if(!(!Rt||!Rt.patternType||!Dt||!Dt.cellStyles)){nt.s={},nt.s.patternType=Rt.patternType;var Qt;(Qt=Mv(A(Rt.icvFore)))&&(nt.s.fgColor={rgb:Qt}),(Qt=Mv(A(Rt.icvBack)))&&(nt.s.bgColor={rgb:Qt})}},L=function(ot,nt,Dt){if(!(U>1)&&!(Dt.sheetRows&&ot.r>=Dt.sheetRows)){if(Dt.cellStyles&&nt.XF&&nt.XF.data&&O(ot,nt,Dt),delete nt.ixfe,delete nt.XF,f=ot,h=Qr(ot),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),ot.r<i.s.r&&(i.s.r=ot.r),ot.c<i.s.c&&(i.s.c=ot.c),ot.r+1>i.e.r&&(i.e.r=ot.r+1),ot.c+1>i.e.c&&(i.e.c=ot.c+1),Dt.cellFormula&&nt.f){for(var Rt=0;Rt<k.length;++Rt)if(!(k[Rt][0].s.c>ot.c||k[Rt][0].s.r>ot.r)&&!(k[Rt][0].e.c<ot.c||k[Rt][0].e.r<ot.r)){nt.F=pn(k[Rt][0]),(k[Rt][0].s.c!=ot.c||k[Rt][0].s.r!=ot.r)&&delete nt.f,nt.f&&(nt.f=""+co(k[Rt][1],i,ot,R,q));break}}Dt.dense?(s[ot.r]||(s[ot.r]=[]),s[ot.r][ot.c]=nt):s[h]=nt}},q={enc:!1,sbcch:0,snames:[],sharedf:T,arrayf:k,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(q.password=t.password);var Q,ae=[],te=[],ne=[],B=[],V=!1,R=[];R.SheetNames=q.snames,R.sharedf=q.sharedf,R.arrayf=q.arrayf,R.names=[],R.XTI=[];var H=0,U=0,I=0,W=[],K=[],Z;q.codepage=1200,Zc(1200);for(var oe=!1;e.l<e.length-1;){var J=e.l,le=e.read_shift(2);if(le===0&&H===10)break;var ue=e.l===e.length?0:e.read_shift(2),de=Y8[le];if(de&&de.f){if(t.bookSheets&&H===133&&le!==133)break;if(H=le,de.r===2||de.r==12){var Te=e.read_shift(2);if(ue-=2,!q.enc&&Te!==le&&((Te&255)<<8|Te>>8)!==le)throw new Error("rt mismatch: "+Te+"!="+le);de.r==12&&(e.l+=10,ue-=10)}var ie={};if(le===10?ie=de.f(e,ue,q):ie=Cwe(le,de,e,ue,q),U==0&&[9,521,1033,2057].indexOf(H)===-1)continue;switch(le){case 34:r.opts.Date1904=M.WBProps.date1904=ie;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(q.enc||(e.l=0),q.enc=ie,!t.password)throw new Error("File is password-protected");if(ie.valid==null)throw new Error("Encryption scheme unsupported");if(!ie.valid)throw new Error("Password is incorrect");break;case 92:q.lastuser=ie;break;case 66:var xe=Number(ie);switch(xe){case 21010:xe=1200;break;case 32768:xe=1e4;break;case 32769:xe=1252;break}Zc(q.codepage=xe),oe=!0;break;case 317:q.rrtabid=ie;break;case 25:q.winlocked=ie;break;case 439:r.opts.RefreshAll=ie;break;case 12:r.opts.CalcCount=ie;break;case 16:r.opts.CalcDelta=ie;break;case 17:r.opts.CalcIter=ie;break;case 13:r.opts.CalcMode=ie;break;case 14:r.opts.CalcPrecision=ie;break;case 95:r.opts.CalcSaveRecalc=ie;break;case 15:q.CalcRefMode=ie;break;case 2211:r.opts.FullCalc=ie;break;case 129:ie.fDialog&&(s["!type"]="dialog"),ie.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),ie.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:E.push(ie);break;case 430:R.push([ie]),R[R.length-1].XTI=[];break;case 35:case 547:R[R.length-1].push(ie);break;case 24:case 536:Z={Name:ie.Name,Ref:co(ie.rgce,i,null,R,q)},ie.itab>0&&(Z.Sheet=ie.itab-1),R.names.push(Z),R[0]||(R[0]=[],R[0].XTI=[]),R[R.length-1].push(ie),ie.Name=="_xlnm._FilterDatabase"&&ie.itab>0&&ie.rgce&&ie.rgce[0]&&ie.rgce[0][0]&&ie.rgce[0][0][0]=="PtgArea3d"&&(K[ie.itab-1]={ref:pn(ie.rgce[0][0][1][2])});break;case 22:q.ExternCount=ie;break;case 23:R.length==0&&(R[0]=[],R[0].XTI=[]),R[R.length-1].XTI=R[R.length-1].XTI.concat(ie),R.XTI=R.XTI.concat(ie);break;case 2196:if(q.biff<8)break;Z!=null&&(Z.Comment=ie[1]);break;case 18:s["!protect"]=ie;break;case 19:ie!==0&&q.WTF&&console.error("Password verifier: "+ie);break;case 133:a[ie.pos]=ie,q.snames.push(ie.name);break;case 10:{if(--U)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,s["!ref"]=pn(i),t.sheetRows&&t.sheetRows<=i.e.r){var Ae=i.e.r;i.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=pn(i),i.e.r=Ae}i.e.r++,i.e.c++}ae.length>0&&(s["!merges"]=ae),te.length>0&&(s["!objects"]=te),ne.length>0&&(s["!cols"]=ne),B.length>0&&(s["!rows"]=B),M.Sheets.push(j)}u===""?d=s:n[u]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(q.biff===8&&(q.biff={9:2,521:3,1033:4}[le]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ie.BIFFVer]||8),q.biffguess=ie.BIFFVer==0,ie.BIFFVer==0&&ie.dt==4096&&(q.biff=5,oe=!0,Zc(q.codepage=28591)),q.biff==8&&ie.BIFFVer==0&&ie.dt==16&&(q.biff=2),U++)break;if(s=t.dense?[]:{},q.biff<8&&!oe&&(oe=!0,Zc(q.codepage=t.codepage||1252)),q.biff<5||ie.BIFFVer==0&&ie.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Me={pos:e.l-ue,name:u};a[Me.pos]=Me,q.snames.push(u)}else u=(a[J]||{name:""}).name;ie.dt==32&&(s["!type"]="chart"),ie.dt==64&&(s["!type"]="macro"),ae=[],te=[],q.arrayf=k=[],ne=[],B=[],V=!1,j={Hidden:(a[J]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[ie.r]||[])[ie.c]:s[Qr({c:ie.c,r:ie.r})])&&++ie.c,b={ixfe:ie.ixfe,XF:E[ie.ixfe]||{},v:ie.val,t:"n"},I>0&&(b.z=W[b.ixfe>>8&63]),Pu(b,t,r.opts.Date1904),L({c:ie.c,r:ie.r},b,t);break;case 5:case 517:b={ixfe:ie.ixfe,XF:E[ie.ixfe],v:ie.val,t:ie.t},I>0&&(b.z=W[b.ixfe>>8&63]),Pu(b,t,r.opts.Date1904),L({c:ie.c,r:ie.r},b,t);break;case 638:b={ixfe:ie.ixfe,XF:E[ie.ixfe],v:ie.rknum,t:"n"},I>0&&(b.z=W[b.ixfe>>8&63]),Pu(b,t,r.opts.Date1904),L({c:ie.c,r:ie.r},b,t);break;case 189:for(var Je=ie.c;Je<=ie.C;++Je){var He=ie.rkrec[Je-ie.c][0];b={ixfe:He,XF:E[He],v:ie.rkrec[Je-ie.c][1],t:"n"},I>0&&(b.z=W[b.ixfe>>8&63]),Pu(b,t,r.opts.Date1904),L({c:Je,r:ie.r},b,t)}break;case 6:case 518:case 1030:{if(ie.val=="String"){o=ie;break}if(b=yb(ie.val,ie.cell.ixfe,ie.tt),b.XF=E[b.ixfe],t.cellFormula){var It=ie.formula;if(It&&It[0]&&It[0][0]&&It[0][0][0]=="PtgExp"){var it=It[0][0][1][0],kt=It[0][0][1][1],pt=Qr({r:it,c:kt});T[pt]?b.f=""+co(ie.formula,i,ie.cell,R,q):b.F=((t.dense?(s[it]||[])[kt]:s[pt])||{}).F}else b.f=""+co(ie.formula,i,ie.cell,R,q)}I>0&&(b.z=W[b.ixfe>>8&63]),Pu(b,t,r.opts.Date1904),L(ie.cell,b,t),o=ie}break;case 7:case 519:if(o)o.val=ie,b=yb(ie,o.cell.ixfe,"s"),b.XF=E[b.ixfe],t.cellFormula&&(b.f=""+co(o.formula,i,o.cell,R,q)),I>0&&(b.z=W[b.ixfe>>8&63]),Pu(b,t,r.opts.Date1904),L(o.cell,b,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{k.push(ie);var ut=Qr(ie[0].s);if(g=t.dense?(s[ie[0].s.r]||[])[ie[0].s.c]:s[ut],t.cellFormula&&g){if(!o||!ut||!g)break;g.f=""+co(ie[1],i,ie[0],R,q),g.F=pn(ie[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!o)break;T[Qr(o.cell)]=ie[0],g=t.dense?(s[o.cell.r]||[])[o.cell.c]:s[Qr(o.cell)],(g||{}).f=""+co(ie[0],i,f,R,q)}}break;case 253:b=yb(l[ie.isst].t,ie.ixfe,"s"),l[ie.isst].h&&(b.h=l[ie.isst].h),b.XF=E[b.ixfe],I>0&&(b.z=W[b.ixfe>>8&63]),Pu(b,t,r.opts.Date1904),L({c:ie.c,r:ie.r},b,t);break;case 513:t.sheetStubs&&(b={ixfe:ie.ixfe,XF:E[ie.ixfe],t:"z"},I>0&&(b.z=W[b.ixfe>>8&63]),Pu(b,t,r.opts.Date1904),L({c:ie.c,r:ie.r},b,t));break;case 190:if(t.sheetStubs)for(var _t=ie.c;_t<=ie.C;++_t){var qt=ie.ixfe[_t-ie.c];b={ixfe:qt,XF:E[qt],t:"z"},I>0&&(b.z=W[b.ixfe>>8&63]),Pu(b,t,r.opts.Date1904),L({c:_t,r:ie.r},b,t)}break;case 214:case 516:case 4:b=yb(ie.val,ie.ixfe,"s"),b.XF=E[b.ixfe],I>0&&(b.z=W[b.ixfe>>8&63]),Pu(b,t,r.opts.Date1904),L({c:ie.c,r:ie.r},b,t);break;case 0:case 512:U===1&&(i=ie);break;case 252:l=ie;break;case 1054:if(q.biff==4){W[I++]=ie[1];for(var Jt=0;Jt<I+163&&Xr[Jt]!=ie[1];++Jt);Jt>=163&&Qd(ie[1],I+163)}else Qd(ie[1],ie[0]);break;case 30:{W[I++]=ie;for(var Ht=0;Ht<I+163&&Xr[Ht]!=ie;++Ht);Ht>=163&&Qd(ie,I+163)}break;case 229:ae=ae.concat(ie);break;case 93:te[ie.cmo[0]]=q.lastobj=ie;break;case 438:q.lastobj.TxO=ie;break;case 127:q.lastobj.ImData=ie;break;case 440:for(v=ie[0].s.r;v<=ie[0].e.r;++v)for(y=ie[0].s.c;y<=ie[0].e.c;++y)g=t.dense?(s[v]||[])[y]:s[Qr({c:y,r:v})],g&&(g.l=ie[1]);break;case 2048:for(v=ie[0].s.r;v<=ie[0].e.r;++v)for(y=ie[0].s.c;y<=ie[0].e.c;++y)g=t.dense?(s[v]||[])[y]:s[Qr({c:y,r:v})],g&&g.l&&(g.l.Tooltip=ie[1]);break;case 28:{if(q.biff<=5&&q.biff>=2)break;g=t.dense?(s[ie[0].r]||[])[ie[0].c]:s[Qr(ie[0])];var $e=te[ie[2]];g||(t.dense?(s[ie[0].r]||(s[ie[0].r]=[]),g=s[ie[0].r][ie[0].c]={t:"z"}):g=s[Qr(ie[0])]={t:"z"},i.e.r=Math.max(i.e.r,ie[0].r),i.s.r=Math.min(i.s.r,ie[0].r),i.e.c=Math.max(i.e.c,ie[0].c),i.s.c=Math.min(i.s.c,ie[0].c)),g.c||(g.c=[]),x={a:ie[1],t:$e.TxO.t},g.c.push(x)}break;case 2173:m1e(E[ie.ixfe],ie.ext);break;case 125:{if(!q.cellStyles)break;for(;ie.e>=ie.s;)ne[ie.e--]={width:ie.w/256,level:ie.level||0,hidden:!!(ie.flags&1)},V||(V=!0,pE(ie.w/256)),$f(ne[ie.e+1])}break;case 520:{var ze={};ie.level!=null&&(B[ie.r]=ze,ze.level=ie.level),ie.hidden&&(B[ie.r]=ze,ze.hidden=!0),ie.hpt&&(B[ie.r]=ze,ze.hpt=ie.hpt,ze.hpx=Vp(ie.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||um(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[le]]=ie;break;case 161:s["!margins"]||um(s["!margins"]={}),s["!margins"].header=ie.header,s["!margins"].footer=ie.footer;break;case 574:ie.RTL&&(M.Views[0].RTL=!0);break;case 146:P=ie;break;case 2198:Q=ie;break;case 140:N=ie;break;case 442:u?j.CodeName=ie||j.name:M.WBProps.CodeName=ie||"ThisWorkbook";break}}else de||console.error("Missing Info for XLS Record 0x"+le.toString(16)),e.l+=ue}return r.SheetNames=ma(a).sort(function(tt,ot){return Number(tt)-Number(ot)}).map(function(tt){return a[tt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&K.forEach(function(tt,ot){r.Sheets[r.SheetNames[ot]]["!autofilter"]=tt}),r.Strings=l,r.SSF=Ps(Xr),q.enc&&(r.Encryption=q.enc),Q&&(r.Themes=Q),r.Metadata={},N!==void 0&&(r.Metadata.Country=N),R.names.length>0&&(M.Names=R.names),r.Workbook=M,r}var tv={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Nwe(e,t,r){var n=$r.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=LD(n,U8,tv.DSI);for(var a in s)t[a]=s[a]}catch(u){if(r.WTF)throw u}var i=$r.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=LD(i,W8,tv.SI);for(var l in o)t[l]==null&&(t[l]=o[l])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(lG(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function Awe(e,t){var r=[],n=[],s=[],a=0,i,o=mD(U8,"n"),l=mD(W8,"n");if(e.Props)for(i=ma(e.Props),a=0;a<i.length;++a)(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(l,i[a])?n:s).push([i[a],e.Props[i[a]]]);if(e.Custprops)for(i=ma(e.Custprops),a=0;a<i.length;++a)Object.prototype.hasOwnProperty.call(e.Props||{},i[a])||(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(l,i[a])?n:s).push([i[a],e.Custprops[i[a]]]);var u=[];for(a=0;a<s.length;++a)gG.indexOf(s[a][0])>-1||oG.indexOf(s[a][0])>-1||s[a][1]!=null&&u.push(s[a]);n.length&&$r.utils.cfb_add(t,"/SummaryInformation",BD(n,tv.SI,l,W8)),(r.length||u.length)&&$r.utils.cfb_add(t,"/DocumentSummaryInformation",BD(r,tv.DSI,o,U8,u.length?u:null,tv.UDI))}function uV(e,t){t||(t={}),TE(t),VC(),t.codepage&&GC(t.codepage);var r,n;if(e.FullPaths){if($r.find(e,"/encryption"))throw new Error("File is password-protected");r=$r.find(e,"!CompObj"),n=$r.find(e,"/Workbook")||$r.find(e,"/Book")}else{switch(t.type){case"base64":e=Pl(Rl(e));break;case"binary":e=Pl(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Wi(e,0),n={content:e}}var s,a;if(r&&kwe(r),t.bookProps&&!t.bookSheets)s={};else{var i=vn?"buffer":"array";if(n&&n.content)s=Ewe(n.content,t);else if((a=$r.find(e,"PerfectOffice_MAIN"))&&a.content)s=cm.to_workbook(a.content,(t.type=i,t));else if((a=$r.find(e,"NativeContent_MAIN"))&&a.content)s=cm.to_workbook(a.content,(t.type=i,t));else throw(a=$r.find(e,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&$r.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=U1e(e))}var o={};return e.FullPaths&&Nwe(e,o,t),s.Props=s.Custprops=o,t.bookFiles&&(s.cfb=e),s}function jwe(e,t){var r=t||{},n=$r.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return $r.utils.cfb_add(n,s,dV(e,r)),r.biff==8&&(e.Props||e.Custprops)&&Awe(e,n),r.biff==8&&e.vbaraw&&W1e(n,$r.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var Iv={0:{f:eve},1:{f:lve},2:{f:Eve},3:{f:pve},4:{f:fve},5:{f:kve},6:{f:Mve},7:{f:wve},8:{f:Bve},9:{f:Lve},10:{f:Ive},11:{f:Rve},12:{f:uve},13:{f:Ave},14:{f:yve},15:{f:mve},16:{f:rV},17:{f:Dve},18:{f:_ve},19:{f:iE},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:D2e},40:{},42:{},43:{f:Mpe},44:{f:jpe},45:{f:Ope},46:{f:Rpe},47:{f:Ipe},48:{},49:{f:nhe},50:{},51:{f:x1e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:CG},62:{f:Pve},63:{f:C1e},64:{f:t2e},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:vo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Jve},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:ive},148:{f:nve,p:16},151:{f:Gve},152:{},153:{f:P2e},154:{},155:{},156:{f:A2e},157:{},158:{},159:{T:1,f:qge},160:{T:-1},161:{T:1,f:Xm},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:$ve},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:g1e},336:{T:-1},337:{f:w1e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:z8},357:{},358:{},359:{},360:{T:1},361:{},362:{f:TG},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Vve},427:{f:qve},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Yve},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:ave},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Wve},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:z8},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:R1e},633:{T:1},634:{T:-1},635:{T:1,f:O1e},636:{T:-1},637:{f:ohe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:y2e},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:r2e},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Y8={6:{f:US},10:{f:hf},12:{f:La},13:{f:La},14:{f:ka},15:{f:ka},16:{f:ho},17:{f:ka},18:{f:ka},19:{f:La},20:{f:GD},21:{f:GD},23:{f:TG},24:{f:qD},25:{f:ka},26:{},27:{},28:{f:rge},29:{},34:{f:ka},35:{f:VD},38:{f:ho},39:{f:ho},40:{f:ho},41:{f:ho},42:{f:ka},43:{f:ka},47:{f:mpe},49:{f:Ame},51:{f:La},60:{},61:{f:kme},64:{f:ka},65:{f:Nme},66:{f:La},77:{},80:{},81:{},82:{},85:{f:La},89:{},90:{},91:{},92:{f:hme},93:{f:age},94:{},95:{f:ka},96:{},97:{},99:{f:ka},125:{f:CG},128:{f:Hme},129:{f:gme},130:{f:La},131:{f:ka},132:{f:ka},133:{f:pme},134:{},140:{f:hge},141:{f:La},144:{},146:{f:pge},151:{},152:{},153:{},154:{},155:{},156:{f:La},157:{},158:{},160:{f:Sge},161:{f:vge},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:$me},190:{f:zme},193:{f:hf},197:{},198:{},199:{},200:{},201:{},202:{f:ka},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:La},220:{},221:{f:ka},222:{},224:{f:Wme},225:{f:fme},226:{f:hf},227:{},229:{f:nge},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:yme},253:{f:Pme},255:{f:wme},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:pG},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:ka},353:{f:hf},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Yme},431:{f:ka},432:{},433:{},434:{},437:{},438:{f:lge},439:{f:ka},440:{f:cge},441:{},442:{f:S2},443:{},444:{f:La},445:{},446:{},448:{f:hf},449:{f:Sme,r:2},450:{f:hf},512:{f:UD},513:{f:_ge},515:{f:qme},516:{f:Fme},517:{f:HD},519:{f:kge},520:{f:bme},523:{},545:{f:KD},549:{f:zD},566:{},574:{f:Cme},638:{f:Bme},659:{},1048:{},1054:{f:Ome},1084:{},1212:{f:Zme},2048:{f:dge},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:gb},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:hf},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:xge,r:12},2173:{f:h1e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:ka,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Qme,r:12},2197:{},2198:{f:o1e,r:12},2199:{},2200:{},2201:{},2202:{f:ege,r:12},2203:{f:hf},2204:{},2205:{},2206:{},2207:{},2211:{f:_me},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:La},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:wge},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:gge},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:UD},1:{},2:{f:Age},3:{f:Ege},4:{f:Cge},5:{f:HD},7:{f:Pge},8:{},9:{f:gb},11:{},22:{f:La},30:{f:Rme},31:{},32:{},33:{f:KD},36:{},37:{f:zD},50:{f:Mge},62:{},52:{},67:{},68:{f:La},69:{},86:{},126:{},127:{f:Tge},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Fge},223:{},234:{},354:{},421:{},518:{f:US},521:{f:gb},536:{f:qD},547:{f:VD},561:{},579:{},1030:{f:US},1033:{f:gb},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function dr(e,t,r,n){var s=t;if(!isNaN(s)){var a=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&nE(r)&&e.push(r)}}function Pwe(e,t,r,n){var s=(r||[]).length||0;if(s<=8224)return dr(e,t,r,s);var a=t;if(!isNaN(a)){for(var i=r.parts||[],o=0,l=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,a),d.write_shift(2,u),e.push(r.slice(l,l+u)),l+=u;l<s;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(l,l+u)),l+=u}}}function E2(e,t,r){return e||(e=Mt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function Mwe(e,t,r,n){var s=Mt(9);return E2(s,e,t),xG(r,n||"b",s),s}function Fwe(e,t,r){var n=Mt(8+2*r.length);return E2(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Dwe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?si(js(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?dr(e,2,jge(r,n,s)):dr(e,3,Nge(r,n,s));return;case"b":case"e":dr(e,5,Mwe(r,n,t.v,t.t));return;case"s":case"str":dr(e,4,Fwe(r,n,(t.v||"").slice(0,255)));return}dr(e,1,E2(null,r,n))}function Owe(e,t,r,n){var s=Array.isArray(t),a=Rn(t["!ref"]||"A1"),i,o="",l=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=pn(a)}for(var u=a.s.r;u<=a.e.r;++u){o=Na(u);for(var d=a.s.c;d<=a.e.c;++d){u===a.s.r&&(l[d]=Ys(d)),i=l[d]+o;var f=s?(t[u]||[])[d]:t[i];f&&Dwe(e,f,u,d)}}}function Iwe(e,t){for(var r=t||{},n=ul(),s=0,a=0;a<e.SheetNames.length;++a)e.SheetNames[a]==r.sheet&&(s=a);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return dr(n,r.biff==4?1033:r.biff==3?521:9,hE(e,16,r)),Owe(n,e.Sheets[e.SheetNames[s]],s,r),dr(n,10),n.end()}function Rwe(e,t,r){dr(e,49,jme({sz:12,name:"Arial"},r))}function Lwe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&dr(e,1054,Ime(s,t[s],r))})}function Bwe(e,t){var r=Mt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),dr(e,2151,r),r=Mt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),_G(Rn(t["!ref"]||"A1"),r),r.write_shift(4,4),dr(e,2152,r)}function $we(e,t){for(var r=0;r<16;++r)dr(e,224,WD({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){dr(e,224,WD(n,0,t))})}function zwe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];dr(e,440,uge(n)),n[1].Tooltip&&dr(e,2048,fge(n))}delete t["!links"]}function Uwe(e,t){if(t){var r=0;t.forEach(function(n,s){++r<=256&&n&&dr(e,125,yge(f3(s,n),s))})}}function Wwe(e,t,r,n,s){var a=16+eh(s.cellXfs,t,s);if(t.v==null&&!t.bf){dr(e,513,Fm(r,n,a));return}if(t.bf)dr(e,6,gye(t,r,n,s,a));else switch(t.t){case"d":case"n":var i=t.t=="d"?si(js(t.v)):t.v;dr(e,515,Kme(r,n,i,a));break;case"b":case"e":dr(e,517,Vme(r,n,t.v,a,s,t.t));break;case"s":case"str":if(s.bookSST){var o=bE(s.Strings,t.v,s.revStrings);dr(e,253,Mme(r,n,o,a))}else dr(e,516,Dme(r,n,(t.v||"").slice(0,255),a,s));break;default:dr(e,513,Fm(r,n,a))}}function Hwe(e,t,r){var n=ul(),s=r.SheetNames[e],a=r.Sheets[s]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[e]||{},l=Array.isArray(a),u=t.biff==8,d,f="",h=[],g=Rn(a["!ref"]||"A1"),x=u?65536:16384;if(g.e.c>255||g.e.r>=x){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,x-1)}dr(n,2057,hE(r,16,t)),dr(n,13,lc(1)),dr(n,12,lc(100)),dr(n,15,Oo(!0)),dr(n,17,Oo(!1)),dr(n,16,Pm(.001)),dr(n,95,Oo(!0)),dr(n,42,Oo(!1)),dr(n,43,Oo(!1)),dr(n,130,lc(1)),dr(n,128,Gme()),dr(n,131,Oo(!1)),dr(n,132,Oo(!1)),u&&Uwe(n,a["!cols"]),dr(n,512,Lme(g,t)),u&&(a["!links"]=[]);for(var y=g.s.r;y<=g.e.r;++y){f=Na(y);for(var v=g.s.c;v<=g.e.c;++v){y===g.s.r&&(h[v]=Ys(v)),d=h[v]+f;var T=l?(a[y]||[])[v]:a[d];T&&(Wwe(n,T,y,v,t),u&&T.l&&a["!links"].push([d,T.l]))}}var k=o.CodeName||o.name||s;return u&&dr(n,574,Eme((i.Views||[])[0])),u&&(a["!merges"]||[]).length&&dr(n,229,sge(a["!merges"])),u&&zwe(n,a),dr(n,442,yG(k)),u&&Bwe(n,a),dr(n,10),n.end()}function Gwe(e,t,r){var n=ul(),s=(e||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=r.biff==8,l=r.biff==5;if(dr(n,2057,hE(e,5,r)),r.bookType=="xla"&&dr(n,135),dr(n,225,o?lc(1200):null),dr(n,193,Vhe(2)),l&&dr(n,191),l&&dr(n,192),dr(n,226),dr(n,92,mme("SheetJS",r)),dr(n,66,lc(o?1200:1252)),o&&dr(n,353,lc(0)),o&&dr(n,448),dr(n,317,bge(e.SheetNames.length)),o&&e.vbaraw&&dr(n,211),o&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";dr(n,442,yG(u))}dr(n,156,lc(17)),dr(n,25,Oo(!1)),dr(n,18,Oo(!1)),dr(n,19,lc(0)),o&&dr(n,431,Oo(!1)),o&&dr(n,444,lc(0)),dr(n,61,Tme()),dr(n,64,Oo(!1)),dr(n,141,lc(0)),dr(n,34,Oo(S2e(e)=="true")),dr(n,14,Oo(!0)),o&&dr(n,439,Oo(!1)),dr(n,218,lc(0)),Rwe(n,e,r),Lwe(n,e.SSF,r),$we(n,r),o&&dr(n,352,Oo(!1));var d=n.end(),f=ul();o&&dr(f,140,mge()),o&&r.Strings&&Pwe(f,252,vme(r.Strings)),dr(f,10);var h=f.end(),g=ul(),x=0,y=0;for(y=0;y<e.SheetNames.length;++y)x+=(o?12:11)+(o?2:1)*e.SheetNames[y].length;var v=d.length+x+h.length;for(y=0;y<e.SheetNames.length;++y){var T=a[y]||{};dr(g,133,xme({pos:v,hs:T.Hidden||0,dt:0,name:e.SheetNames[y]},r)),v+=t[y].length}var k=g.end();if(x!=k.length)throw new Error("BS8 "+x+" != "+k.length);var b=[];return d.length&&b.push(d),k.length&&b.push(k),h.length&&b.push(h),wi(b)}function Vwe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Ps(Xr)),e&&e.SSF&&(w1(),a3(e.SSF),r.revssf=o3(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,CE(r),r.cellXfs=[],eh(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)n[n.length]=Hwe(s,r,e);return n.unshift(Gwe(e,n,r)),wi(n)}function dV(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var s=dl(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var a=t||{};switch(a.biff||2){case 8:case 5:return Vwe(e,t);case 4:case 3:case 2:return Iwe(e,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function sO(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=e.match(/<\/table/i),i=s.index,o=a&&a.index||e.length,l=jfe(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},x=[];for(i=0;i<l.length;++i){var y=l[i].trim(),v=y.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(v!="<td"&&v!="<th")){var T=y.split(/<\/t[dh]>/i);for(o=0;o<T.length;++o){var k=T[o].trim();if(k.match(/<t[dh]/i)){for(var b=k,N=0;b.charAt(0)=="<"&&(N=b.indexOf(">"))>-1;)b=b.slice(N+1);for(var E=0;E<x.length;++E){var P=x[E];P.s.c==d&&P.s.r<u&&u<=P.e.r&&(d=P.e.c+1,E=-1)}var M=tn(k.slice(0,k.indexOf(">")));h=M.colspan?+M.colspan:1,((f=+M.rowspan)>1||h>1)&&x.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var j=M.t||M["data-t"]||"";if(!b.length){d+=h;continue}if(b=OH(b),g.s.r>u&&(g.s.r=u),g.e.r<u&&(g.e.r=u),g.s.c>d&&(g.s.c=d),g.e.c<d&&(g.e.c=d),!b.length){d+=h;continue}var A={t:"s",v:b};r.raw||!b.trim().length||j=="s"||(b==="TRUE"?A={t:"b",v:!0}:b==="FALSE"?A={t:"b",v:!1}:isNaN(ru(b))?isNaN(Hp(b).getDate())||(A={t:"d",v:js(b)},r.cellDates||(A={t:"n",v:si(A.v)}),A.z=r.dateNF||Xr[14]):A={t:"n",v:ru(b)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=A):n[Qr({r:u,c:d})]=A,d+=h}}}}return n["!ref"]=pn(g),x.length&&(n["!merges"]=x),n}function qwe(e,t,r,n){for(var s=e["!merges"]||[],a=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,l=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>i)&&!(s[u].e.r<r||s[u].e.c<i)){if(s[u].s.r<r||s[u].s.c<i){o=-1;break}o=s[u].e.r-s[u].s.r+1,l=s[u].e.c-s[u].s.c+1;break}if(!(o<0)){var d=Qr({r,c:i}),f=n.dense?(e[r]||[])[i]:e[d],h=f&&f.v!=null&&(f.h||eE(f.w||(c0(f),f.w)||""))||"",g={};o>1&&(g.rowspan=o),l>1&&(g.colspan=l),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(g["data-t"]=f&&f.t||"z",f.v!=null&&(g["data-v"]=f.v),f.z!=null&&(g["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),g.id=(n.id||"sjs")+"-"+d,a.push(ur("td",h,g))}}var x="<tr>";return x+a.join("")+"</tr>"}var Kwe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Ywe="</body></html>";function Xwe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Zf(sO(r[0],t),t);var n=AE();return r.forEach(function(s,a){jE(n,sO(s,t),"Sheet"+(a+1))}),n}function Jwe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function fV(e,t){var r=t||{},n=r.header!=null?r.header:Kwe,s=r.footer!=null?r.footer:Ywe,a=[n],i=dl(e["!ref"]);r.dense=Array.isArray(e),a.push(Jwe(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)a.push(qwe(e,i,o,r));return a.push("</table>"+s),a.join("")}function hV(e,t,r){var n=r||{},s=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var i=typeof n.origin=="string"?Xs(n.origin):n.origin;s=i.r,a=i.c}var o=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:s,c:a}};if(e["!ref"]){var d=dl(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),s==-1&&(u.e.r=s=d.e.r+1)}var f=[],h=0,g=e["!rows"]||(e["!rows"]=[]),x=0,y=0,v=0,T=0,k=0,b=0;for(e["!cols"]||(e["!cols"]=[]);x<o.length&&y<l;++x){var N=o[x];if(aO(N)){if(n.display)continue;g[y]={hidden:!0}}var E=N.children;for(v=T=0;v<E.length;++v){var P=E[v];if(!(n.display&&aO(P))){var M=P.hasAttribute("data-v")?P.getAttribute("data-v"):P.hasAttribute("v")?P.getAttribute("v"):OH(P.innerHTML),j=P.getAttribute("data-z")||P.getAttribute("z");for(h=0;h<f.length;++h){var A=f[h];A.s.c==T+a&&A.s.r<y+s&&y+s<=A.e.r&&(T=A.e.c+1-a,h=-1)}b=+P.getAttribute("colspan")||1,((k=+P.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:y+s,c:T+a},e:{r:y+s+(k||1)-1,c:T+a+(b||1)-1}});var O={t:"s",v:M},L=P.getAttribute("data-t")||P.getAttribute("t")||"";M!=null&&(M.length==0?O.t=L||"z":n.raw||M.trim().length==0||L=="s"||(M==="TRUE"?O={t:"b",v:!0}:M==="FALSE"?O={t:"b",v:!1}:isNaN(ru(M))?isNaN(Hp(M).getDate())||(O={t:"d",v:js(M)},n.cellDates||(O={t:"n",v:si(O.v)}),O.z=n.dateNF||Xr[14]):O={t:"n",v:ru(M)})),O.z===void 0&&j!=null&&(O.z=j);var q="",Q=P.getElementsByTagName("A");if(Q&&Q.length)for(var ae=0;ae<Q.length&&!(Q[ae].hasAttribute("href")&&(q=Q[ae].getAttribute("href"),q.charAt(0)!="#"));++ae);q&&q.charAt(0)!="#"&&(O.l={Target:q}),n.dense?(e[y+s]||(e[y+s]=[]),e[y+s][T+a]=O):e[Qr({c:T+a,r:y+s})]=O,u.e.c<T+a&&(u.e.c=T+a),T+=b}}++y}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,y-1+s),e["!ref"]=pn(u),y>=l&&(e["!fullref"]=pn((u.e.r=o.length-x+y-1+s,u))),e}function mV(e,t){var r=t||{},n=r.dense?[]:{};return hV(n,e,t)}function Qwe(e,t){return Zf(mV(e,t),t)}function aO(e){var t="",r=Zwe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Zwe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function ebe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=On(t.replace(/<[^>]*>/g,""));return[r]}var iO={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function gV(e,t){var r=t||{},n=tE(e),s=[],a,i,o={name:""},l="",u=0,d,f,h={},g=[],x=r.dense?[]:{},y,v,T={value:""},k="",b=0,N=[],E=-1,P=-1,M={s:{r:1e6,c:1e7},e:{r:0,c:0}},j=0,A={},O=[],L={},q=0,Q=0,ae=[],te=1,ne=1,B=[],V={Names:[]},R={},H=["",""],U=[],I={},W="",K=0,Z=!1,oe=!1,J=0;for(jv.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=jv.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(M.e.c>=M.s.c&&M.e.r>=M.s.r?x["!ref"]=pn(M):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=M.e.r&&(x["!fullref"]=x["!ref"],M.e.r=r.sheetRows-1,x["!ref"]=pn(M)),O.length&&(x["!merges"]=O),ae.length&&(x["!rows"]=ae),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),g.push(d.name),h[d.name]=x,oe=!1):y[0].charAt(y[0].length-2)!=="/"&&(d=tn(y[0],!1),E=P=-1,M.s.r=M.s.c=1e7,M.e.r=M.e.c=0,x=r.dense?[]:{},O=[],ae=[],oe=!0);break;case"table-row-group":y[1]==="/"?--j:++j;break;case"table-row":case"":if(y[1]==="/"){E+=te,te=1;break}if(f=tn(y[0],!1),f.?E=f.-1:E==-1&&(E=0),te=+f["number-rows-repeated"]||1,te<10)for(J=0;J<te;++J)j>0&&(ae[E+J]={level:j});P=-1;break;case"covered-table-cell":y[1]!=="/"&&++P,r.sheetStubs&&(r.dense?(x[E]||(x[E]=[]),x[E][P]={t:"z"}):x[Qr({r:E,c:P})]={t:"z"}),k="",N=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++P,T=tn(y[0],!1),ne=parseInt(T["number-columns-repeated"]||"1",10),v={t:"z",v:null},T.formula&&r.cellFormula!=!1&&(v.f=tO(On(T.formula))),(T.||T["value-type"])=="string"&&(v.t="s",v.v=On(T["string-value"]||""),r.dense?(x[E]||(x[E]=[]),x[E][P]=v):x[Qr({r:E,c:P})]=v),P+=ne-1;else if(y[1]!=="/"){++P,k="",b=0,N=[],ne=1;var le=te?E+te-1:E;if(P>M.e.c&&(M.e.c=P),P<M.s.c&&(M.s.c=P),E<M.s.r&&(M.s.r=E),le>M.e.r&&(M.e.r=le),T=tn(y[0],!1),U=[],I={},v={t:T.||T["value-type"],v:null},r.cellFormula)if(T.formula&&(T.formula=On(T.formula)),T["number-matrix-columns-spanned"]&&T["number-matrix-rows-spanned"]&&(q=parseInt(T["number-matrix-rows-spanned"],10)||0,Q=parseInt(T["number-matrix-columns-spanned"],10)||0,L={s:{r:E,c:P},e:{r:E+q-1,c:P+Q-1}},v.F=pn(L),B.push([L,v.F])),T.formula)v.f=tO(T.formula);else for(J=0;J<B.length;++J)E>=B[J][0].s.r&&E<=B[J][0].e.r&&P>=B[J][0].s.c&&P<=B[J][0].e.c&&(v.F=B[J][1]);switch((T["number-columns-spanned"]||T["number-rows-spanned"])&&(q=parseInt(T["number-rows-spanned"],10)||0,Q=parseInt(T["number-columns-spanned"],10)||0,L={s:{r:E,c:P},e:{r:E+q-1,c:P+Q-1}},O.push(L)),T["number-columns-repeated"]&&(ne=parseInt(T["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Es(T["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(T.value);break;case"percentage":v.t="n",v.v=parseFloat(T.value);break;case"currency":v.t="n",v.v=parseFloat(T.value);break;case"date":v.t="d",v.v=js(T["date-value"]),r.cellDates||(v.t="n",v.v=si(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=Efe(T["time-value"])/86400,r.cellDates&&(v.t="d",v.v=l3(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(T.);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",T["string-value"]!=null&&(k=On(T["string-value"]),N=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(Z=!1,v.t==="s"&&(v.v=k||"",N.length&&(v.R=N),Z=b==0),R.Target&&(v.l=R),U.length>0&&(v.c=U,U=[]),k&&r.cellText!==!1&&(v.w=k),Z&&(v.t="z",delete v.v),(!Z||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=E))for(var ue=0;ue<te;++ue){if(ne=parseInt(T["number-columns-repeated"]||"1",10),r.dense)for(x[E+ue]||(x[E+ue]=[]),x[E+ue][P]=ue==0?v:Ps(v);--ne>0;)x[E+ue][P+ne]=Ps(v);else for(x[Qr({r:E+ue,c:P})]=v;--ne>0;)x[Qr({r:E+ue,c:P+ne})]=Ps(v);M.e.c<=P&&(M.e.c=P)}ne=parseInt(T["number-columns-repeated"]||"1",10),P+=ne-1,ne=0,v={},k="",N=[]}R={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a;I.t=k,N.length&&(I.R=N),I.a=W,U.push(I)}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);W="",K=0,k="",b=0,N=[];break;case"creator":y[1]==="/"?W=n.slice(K,y.index):K=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);k="",b=0,N=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(A[o.name]=l,(a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&(l="",o=tn(y[0],!1),s.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":i=tn(y[0],!1),l+=iO[y[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":i=tn(y[0],!1),l+=iO[y[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(u,y.index);break}else u=y.index+y[0].length;break;case"named-range":i=tn(y[0],!1),H=WS(i["cell-range-address"]);var de={Name:i.name,Ref:H[0]+"!"+H[1]};oe&&(de.Sheet=g.length),V.Names.push(de);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(y[1]==="/"&&(!T||!T["string-value"])){var Te=ebe(n.slice(b,y.index));k=(k.length>0?k+`
`:"")+Te[0]}else tn(y[0],!1),b=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{H=WS(tn(y[0])["target-range-address"]),h[H[0]]["!autofilter"]={ref:H[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(R=tn(y[0],!1),!R.href)break;R.Target=On(R.href),delete R.href,R.Target.charAt(0)=="#"&&R.Target.indexOf(".")>-1?(H=WS(R.Target.slice(1)),R.Target="#"+H[0]+"!"+H[1]):R.Target.match(/^\.\.[\\\/]/)&&(R.Target=R.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(y)}}var ie={Sheets:h,SheetNames:g,Workbook:V};return r.bookSheets&&delete ie.Sheets,ie}function oO(e,t){t=t||{},oc(e,"META-INF/manifest.xml")&&Ehe(Ra(e,"META-INF/manifest.xml"),t);var r=Ml(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=gV(us(r),t);return oc(e,"meta.xml")&&(n.Props=aG(Ra(e,"meta.xml"))),n}function lO(e,t){return gV(e,t)}var tbe=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Av({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ja+t}})(),cO=(function(){var e=function(a){return as(a).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(a,i,o){var l=[];l.push('      <table:table table:name="'+as(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=dl(a["!ref"]||"A1"),h=a["!merges"]||[],g=0,x=Array.isArray(a);if(a["!cols"])for(d=0;d<=f.e.c;++d)l.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var y="",v=a["!rows"]||[];for(u=0;u<f.s.r;++u)y=v[u]?' table:style-name="ro'+v[u].ods+'"':"",l.push("        <table:table-row"+y+`></table:table-row>
`);for(;u<=f.e.r;++u){for(y=v[u]?' table:style-name="ro'+v[u].ods+'"':"",l.push("        <table:table-row"+y+`>
`),d=0;d<f.s.c;++d)l.push(t);for(;d<=f.e.c;++d){var T=!1,k={},b="";for(g=0;g!=h.length;++g)if(!(h[g].s.c>d)&&!(h[g].s.r>u)&&!(h[g].e.c<d)&&!(h[g].e.r<u)){(h[g].s.c!=d||h[g].s.r!=u)&&(T=!0),k["table:number-columns-spanned"]=h[g].e.c-h[g].s.c+1,k["table:number-rows-spanned"]=h[g].e.r-h[g].s.r+1;break}if(T){l.push(r);continue}var N=Qr({r:u,c:d}),E=x?(a[u]||[])[d]:a[N];if(E&&E.f&&(k["table:formula"]=as(bye(E.f)),E.F&&E.F.slice(0,N.length)==N)){var P=dl(E.F);k["table:number-matrix-columns-spanned"]=P.e.c-P.s.c+1,k["table:number-matrix-rows-spanned"]=P.e.r-P.s.r+1}if(!E){l.push(t);continue}switch(E.t){case"b":b=E.v?"TRUE":"FALSE",k["office:value-type"]="boolean",k["office:boolean-value"]=E.v?"true":"false";break;case"n":b=E.w||String(E.v||0),k["office:value-type"]="float",k["office:value"]=E.v||0;break;case"s":case"str":b=E.v==null?"":E.v,k["office:value-type"]="string";break;case"d":b=E.w||js(E.v).toISOString(),k["office:value-type"]="date",k["office:date-value"]=js(E.v).toISOString(),k["table:style-name"]="ce1";break;default:l.push(t);continue}var M=e(b);if(E.l&&E.l.Target){var j=E.l.Target;j=j.charAt(0)=="#"?"#"+_ye(j.slice(1)):j,j.charAt(0)!="#"&&!j.match(/^\w+:/)&&(j="../"+j),M=ur("text:a",M,{"xlink:href":j.replace(/&/g,"&amp;")})}l.push("          "+ur("table:table-cell",ur("text:p",M,{}),k)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},s=function(a,i){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;$f(f),f.ods=o;var h=u["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),a.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=l;var f=u["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),a.push(`  </style:style>
`),++l}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(i,o){var l=[ja],u=Av({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Av({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+d+`>
`),l.push(sG().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),s(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)l.push(n(i.Sheets[i.SheetNames[f]],i,f));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function pV(e,t){if(t.bookType=="fods")return cO(e,t);var r=JC(),n="",s=[],a=[];return n="mimetype",xn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",xn(r,n,cO(e,t)),s.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",xn(r,n,tbe(e,t)),s.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",xn(r,n,ja+sG()),s.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",xn(r,n,jhe(a)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",xn(r,n,Nhe(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Dm(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function X8(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):us(Qf(e))}function rbe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Pl(Uu(e))}function nbe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Uf(e){var t=e.reduce(function(s,a){return s+a.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function uO(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function sbe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function abe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var a=0;s>=1;++a,s/=256)e[t+a]=s&255;e[t+15]|=r>=0?0:128}function Rv(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function ts(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function ha(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function $n(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=Rv(e,r),a=s&7;s=Math.floor(s/8);var i=0,o;if(s==0)break;switch(a){case 0:{for(var l=r[0];e[r[0]++]>=128;);o=e.slice(l,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=Rv(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(n))}var u={data:o,type:a};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function Li(e){var t=[];return e.forEach(function(r,n){r.forEach(function(s){s.data&&(t.push(ts(n*8+s.type)),s.type==2&&t.push(ts(s.data.length)),t.push(s.data))})}),Uf(t)}function kE(e,t){return e?.map(function(r){return t(r.data)})||[]}function nc(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=Rv(e,n),a=$n(e.slice(n[0],n[0]+s));n[0]+=s;var i={id:ha(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=$n(o.data),u=ha(l[3][0].data);i.messages.push({meta:l,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=a[3])!=null&&t[0]&&(i.merge=ha(a[3][0].data)>>>0>0),r.push(i)}return r}function Zg(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:ts(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ts(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(i){s.push(i.data),i.meta[3]=[{type:0,data:ts(i.data.length)}],n[2].push({data:Li(i.meta),type:2})});var a=Li(n);t.push(ts(a.length)),t.push(a),s.forEach(function(i){return t.push(i)})}),Uf(t)}function ibe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Rv(t,r),s=[];r[0]<t.length;){var a=t[r[0]]&3;if(a==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}s.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var l=0,u=0;if(a==1?(u=(t[r[0]]>>2&7)+4,l=(t[r[0]++]&224)<<3,l|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,a==2?(l=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(l=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Uf(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(s.push(s[0].slice(-l)),u-=l;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-l,-l+u))}}var d=Uf(s);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function sc(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(ibe(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Uf(t)}function ep(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var a=ts(n),i=a.length;t.push(a),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,s[0]=0,s[1]=i&255,s[2]=i>>8&255,s[3]=i>>16&255,r+=n}return Uf(t)}function obe(e,t,r,n){var s=Dm(e),a=s.getUint32(4,!0),i=(n>1?12:8)+uO(a&(n>1?3470:398))*4,o=-1,l=-1,u=NaN,d=new Date(2001,0,1);a&512&&(o=s.getUint32(i,!0),i+=4),i+=uO(a&(n>1?12288:4096))*4,a&16&&(l=s.getUint32(i,!0),i+=4),a&32&&(u=s.getFloat64(i,!0),i+=8),a&64&&(d.setTime(d.getTime()+s.getFloat64(i,!0)*1e3),i+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(l>-1)f={t:"s",v:t[l]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function lbe(e,t,r){var n=Dm(e),s=n.getUint32(8,!0),a=12,i=-1,o=-1,l=NaN,u=NaN,d=new Date(2001,0,1);s&1&&(l=sbe(e,a),a+=16),s&2&&(u=n.getFloat64(a,!0),a+=8),s&4&&(d.setTime(d.getTime()+n.getFloat64(a,!0)*1e3),a+=8),s&8&&(o=n.getUint32(a,!0),a+=4),s&16&&(i=n.getUint32(a,!0),a+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:l};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return f}function GS(e,t){var r=new Uint8Array(32),n=Dm(r),s=12,a=0;switch(r[0]=5,e.t){case"n":r[1]=2,abe(r,s,e.v),a|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,e.v?1:0,!0),a|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,a,!0),r.slice(0,s)}function VS(e,t){var r=new Uint8Array(32),n=Dm(r),s=12,a=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(s,e.v,!0),a|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,e.v?1:0,!0),a|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,a,!0),r.slice(0,s)}function cbe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return obe(e,t,r,e[0]);case 5:return lbe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function lo(e){var t=$n(e);return Rv(t[1][0].data)}function dO(e,t){var r=$n(t.data),n=ha(r[1][0].data),s=r[3],a=[];return(s||[]).forEach(function(i){var o=$n(i.data),l=ha(o[1][0].data)>>>0;switch(n){case 1:a[l]=X8(o[3][0].data);break;case 8:{var u=e[lo(o[9][0].data)][0],d=$n(u.data),f=e[lo(d[1][0].data)][0],h=ha(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var g=$n(f.data);a[l]=g[3].map(function(x){return X8(x.data)}).join("")}break}}),a}function ube(e,t){var r,n,s,a,i,o,l,u,d,f,h,g,x,y,v=$n(e),T=ha(v[1][0].data)>>>0,k=ha(v[2][0].data)>>>0,b=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&ha(v[8][0].data)>0||!1,N,E;if((a=(s=v[7])==null?void 0:s[0])!=null&&a.data&&t!=0)N=(o=(i=v[7])==null?void 0:i[0])==null?void 0:o.data,E=(u=(l=v[6])==null?void 0:l[0])==null?void 0:u.data;else if((f=(d=v[4])==null?void 0:d[0])!=null&&f.data&&t!=1)N=(g=(h=v[4])==null?void 0:h[0])==null?void 0:g.data,E=(y=(x=v[3])==null?void 0:x[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var P=b?4:1,M=Dm(N),j=[],A=0;A<N.length/2;++A){var O=M.getUint16(A*2,!0);O<65535&&j.push([A,O])}if(j.length!=k)throw"Expected ".concat(k," cells, found ").concat(j.length);var L=[];for(A=0;A<j.length-1;++A)L[j[A][0]]=E.subarray(j[A][1]*P,j[A+1][1]*P);return j.length>=1&&(L[j[j.length-1][0]]=E.subarray(j[j.length-1][1]*P)),{R:T,cells:L}}function dbe(e,t){var r,n=$n(t.data),s=(r=n?.[7])!=null&&r[0]?ha(n[7][0].data)>>>0>0?1:0:-1,a=kE(n[5],function(i){return ube(i,s)});return{nrows:ha(n[4][0].data)>>>0,data:a.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=l}),i},[])}}function fbe(e,t,r){var n,s=$n(t.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(ha(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(ha(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=pn(a);var i=$n(s[4][0].data),o=dO(e,e[lo(i[4][0].data)][0]),l=(n=i[17])!=null&&n[0]?dO(e,e[lo(i[17][0].data)][0]):[],u=$n(i[3][0].data),d=0;u[1].forEach(function(f){var h=$n(f.data),g=e[lo(h[2][0].data)][0],x=ha(g.meta[1][0].data);if(x!=6002)throw new Error("6001 unexpected reference to ".concat(x));var y=dbe(e,g);y.data.forEach(function(v,T){v.forEach(function(k,b){var N=Qr({r:d+T,c:b}),E=cbe(k,o,l);E&&(r[N]=E)})}),d+=y.nrows})}function hbe(e,t){var r=$n(t.data),n={"!ref":"A1"},s=e[lo(r[2][0].data)],a=ha(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return fbe(e,s[0],n),n}function mbe(e,t){var r,n=$n(t.data),s={name:(r=n[1])!=null&&r[0]?X8(n[1][0].data):"",sheets:[]},a=kE(n[2],lo);return a.forEach(function(i){e[i].forEach(function(o){var l=ha(o.meta[1][0].data);l==6e3&&s.sheets.push(hbe(e,o))})}),s}function gbe(e,t){var r=AE(),n=$n(t.data),s=kE(n[1],lo);if(s.forEach(function(a){e[a].forEach(function(i){var o=ha(i.meta[1][0].data);if(o==2){var l=mbe(e,i);l.sheets.forEach(function(u,d){jE(r,u,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function qS(e){var t,r,n,s,a={},i=[];if(e.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var u;try{u=sc(l.content)}catch(f){return console.log("?? "+l.content.length+" "+(f.message||f))}var d;try{d=nc(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){a[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var o=((s=(n=(r=(t=a?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&ha(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||i.forEach(function(l){a[l].forEach(function(u){var d=ha(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return gbe(a,o)}function pbe(e,t,r){var n,s,a,i;if(!((n=e[6])!=null&&n[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(a=e[8])==null?void 0:a[0])==null?void 0:i.data)&&ha(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=Dm(e[7][0].data),d=0,f=[],h=Dm(e[4][0].data),g=0,x=[],y=0;y<t.length;++y){if(t[y]==null){u.setUint16(y*2,65535,!0),h.setUint16(y*2,65535);continue}u.setUint16(y*2,d,!0),h.setUint16(y*2,g,!0);var v,T;switch(typeof t[y]){case"string":v=GS({t:"s",v:t[y]},r),T=VS({t:"s",v:t[y]},r);break;case"number":v=GS({t:"n",v:t[y]},r),T=VS({t:"n",v:t[y]},r);break;case"boolean":v=GS({t:"b",v:t[y]},r),T=VS({t:"b",v:t[y]},r);break;default:throw new Error("Unsupported value "+t[y])}f.push(v),d+=v.length,x.push(T),g+=T.length,++l}for(e[2][0].data=ts(l);y<e[7][0].data.length/2;++y)u.setUint16(y*2,65535,!0),h.setUint16(y*2,65535,!0);return e[6][0].data=Uf(f),e[3][0].data=Uf(x),l}function xbe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=dl(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(pn(n)));var a=U4(r,{range:n,header:1}),i=["~Sh33tJ5~"];a.forEach(function(W){return W.forEach(function(K){typeof K=="string"&&i.push(K)})});var o={},l=[],u=$r.read(t.numbers,{type:"base64"});u.FileIndex.map(function(W,K){return[W,u.FullPaths[K]]}).forEach(function(W){var K=W[0],Z=W[1];if(K.type==2&&K.name.match(/\.iwa/)){var oe=K.content,J=sc(oe),le=nc(J);le.forEach(function(ue){l.push(ue.id),o[ue.id]={deps:[],location:Z,type:ha(ue.messages[0].meta[1][0].data)}})}}),l.sort(function(W,K){return W-K});var d=l.filter(function(W){return W>1}).map(function(W){return[W,ts(W)]});u.FileIndex.map(function(W,K){return[W,u.FullPaths[K]]}).forEach(function(W){var K=W[0];if(W[1],!!K.name.match(/\.iwa/)){var Z=nc(sc(K.content));Z.forEach(function(oe){oe.messages.forEach(function(J){d.forEach(function(le){oe.messages.some(function(ue){return ha(ue.meta[1][0].data)!=11006&&nbe(ue.data,le[1])})&&o[le[0]].deps.push(oe.id)})})})}});for(var f=$r.find(u,o[1].location),h=nc(sc(f.content)),g,x=0;x<h.length;++x){var y=h[x];y.id==1&&(g=y)}var v=lo($n(g.messages[0].data)[1][0].data);for(f=$r.find(u,o[v].location),h=nc(sc(f.content)),x=0;x<h.length;++x)y=h[x],y.id==v&&(g=y);for(v=lo($n(g.messages[0].data)[2][0].data),f=$r.find(u,o[v].location),h=nc(sc(f.content)),x=0;x<h.length;++x)y=h[x],y.id==v&&(g=y);for(v=lo($n(g.messages[0].data)[2][0].data),f=$r.find(u,o[v].location),h=nc(sc(f.content)),x=0;x<h.length;++x)y=h[x],y.id==v&&(g=y);var T=$n(g.messages[0].data);{T[6][0].data=ts(n.e.r+1),T[7][0].data=ts(n.e.c+1);var k=lo(T[46][0].data),b=$r.find(u,o[k].location),N=nc(sc(b.content));{for(var E=0;E<N.length&&N[E].id!=k;++E);if(N[E].id!=k)throw"Bad ColumnRowUIDMapArchive";var P=$n(N[E].messages[0].data);P[1]=[],P[2]=[],P[3]=[];for(var M=0;M<=n.e.c;++M){var j=[];j[1]=j[2]=[{type:0,data:ts(M+420690)}],P[1].push({type:2,data:Li(j)}),P[2].push({type:0,data:ts(M)}),P[3].push({type:0,data:ts(M)})}P[4]=[],P[5]=[],P[6]=[];for(var A=0;A<=n.e.r;++A)j=[],j[1]=j[2]=[{type:0,data:ts(A+726270)}],P[4].push({type:2,data:Li(j)}),P[5].push({type:0,data:ts(A)}),P[6].push({type:0,data:ts(A)});N[E].messages[0].data=Li(P)}b.content=ep(Zg(N)),b.size=b.content.length,delete T[46];var O=$n(T[4][0].data);{O[7][0].data=ts(n.e.r+1);var L=$n(O[1][0].data),q=lo(L[2][0].data);b=$r.find(u,o[q].location),N=nc(sc(b.content));{if(N[0].id!=q)throw"Bad HeaderStorageBucket";var Q=$n(N[0].messages[0].data);for(A=0;A<a.length;++A){var ae=$n(Q[2][0].data);ae[1][0].data=ts(A),ae[4][0].data=ts(a[A].length),Q[2][A]={type:Q[2][0].type,data:Li(ae)}}N[0].messages[0].data=Li(Q)}b.content=ep(Zg(N)),b.size=b.content.length;var te=lo(O[2][0].data);b=$r.find(u,o[te].location),N=nc(sc(b.content));{if(N[0].id!=te)throw"Bad HeaderStorageBucket";for(Q=$n(N[0].messages[0].data),M=0;M<=n.e.c;++M)ae=$n(Q[2][0].data),ae[1][0].data=ts(M),ae[4][0].data=ts(n.e.r+1),Q[2][M]={type:Q[2][0].type,data:Li(ae)};N[0].messages[0].data=Li(Q)}b.content=ep(Zg(N)),b.size=b.content.length;var ne=lo(O[4][0].data);(function(){for(var W=$r.find(u,o[ne].location),K=nc(sc(W.content)),Z,oe=0;oe<K.length;++oe){var J=K[oe];J.id==ne&&(Z=J)}var le=$n(Z.messages[0].data);{le[3]=[];var ue=[];i.forEach(function(ie,xe){ue[1]=[{type:0,data:ts(xe)}],ue[2]=[{type:0,data:ts(1)}],ue[3]=[{type:2,data:rbe(ie)}],le[3].push({type:2,data:Li(ue)})})}Z.messages[0].data=Li(le);var de=Zg(K),Te=ep(de);W.content=Te,W.size=W.content.length})();var B=$n(O[3][0].data);{var V=B[1][0];delete B[2];var R=$n(V.data);{var H=lo(R[2][0].data);(function(){for(var W=$r.find(u,o[H].location),K=nc(sc(W.content)),Z,oe=0;oe<K.length;++oe){var J=K[oe];J.id==H&&(Z=J)}var le=$n(Z.messages[0].data);{delete le[6],delete B[7];var ue=new Uint8Array(le[5][0].data);le[5]=[];for(var de=0,Te=0;Te<=n.e.r;++Te){var ie=$n(ue);de+=pbe(ie,a[Te],i),ie[1][0].data=ts(Te),le[5].push({data:Li(ie),type:2})}le[1]=[{type:0,data:ts(n.e.c+1)}],le[2]=[{type:0,data:ts(n.e.r+1)}],le[3]=[{type:0,data:ts(de)}],le[4]=[{type:0,data:ts(n.e.r+1)}]}Z.messages[0].data=Li(le);var xe=Zg(K),Ae=ep(xe);W.content=Ae,W.size=W.content.length})()}V.data=Li(R)}O[3][0].data=Li(B)}T[4][0].data=Li(O)}g.messages[0].data=Li(T);var U=Zg(h),I=ep(U);return f.content=I,f.size=f.content.length,u}function xV(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function TE(e){xV([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function CE(e){xV([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function ybe(e){return Sn.WS.indexOf(e)>-1?"sheet":e==Sn.CS?"chart":e==Sn.DS?"dialog":e==Sn.MS?"macro":e&&e.length?e:"sheet"}function vbe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,ybe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function wbe(e,t,r,n,s,a,i,o,l,u,d,f){try{a[n]=Jy(Ml(e,r,!0),t);var h=Ra(e,t),g;switch(o){case"sheet":g=U2e(h,t,s,l,a[n],u,d,f);break;case"chart":if(g=W2e(h,t,s,l,a[n],u,d,f),!g||!g["!drawel"])break;var x=Dy(g["!drawel"].Target,t),y=Pv(x),v=A1e(Ml(e,x,!0),Jy(Ml(e,y,!0),x)),T=Dy(v,x),k=Pv(T);g=p2e(Ml(e,T,!0),T,l,Jy(Ml(e,k,!0),T),u,g);break;case"macro":g=H2e(h,t,s,l,a[n],u,d,f);break;case"dialog":g=G2e(h,t,s,l,a[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=g;var b=[];a&&a[n]&&ma(a[n]).forEach(function(N){var E="";if(a[n][N].Type==Sn.CMNT){E=Dy(a[n][N].Target,t);var P=Y2e(Ra(e,E,!0),E,l);if(!P||!P.length)return;XD(g,P,!1)}a[n][N].Type==Sn.TCMNT&&(E=Dy(a[n][N].Target,t),b=b.concat(P1e(Ra(e,E,!0),l)))}),b&&b.length&&XD(g,b,!0,l.people||[])}catch(N){if(l.WTF)throw N}}function tc(e){return e.charAt(0)=="/"?e.slice(1):e}function bbe(e,t){if(w1(),t=t||{},TE(t),oc(e,"META-INF/manifest.xml")||oc(e,"objectdata.xml"))return oO(e,t);if(oc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof qS<"u"){if(e.FileIndex)return qS(e);var r=$r.utils.cfb_new();return xD(e).forEach(function(ae){xn(r,ae,Mfe(e,ae))}),qS(r)}throw new Error("Unsupported NUMBERS file")}if(!oc(e,"[Content_Types].xml"))throw oc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):oc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=xD(e),s=The(Ml(e,"[Content_Types].xml")),a=!1,i,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",Ra(e,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!Ra(e,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},u={};if(!t.bookSheets&&!t.bookProps){if(Qy=[],s.sst)try{Qy=K2e(Ra(e,tc(s.sst)),s.sst,t)}catch(ae){if(t.WTF)throw ae}t.cellStyles&&s.themes.length&&(l=q2e(Ml(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(u=V2e(Ra(e,tc(s.style)),s.style,l,t))}s.links.map(function(ae){try{var te=Jy(Ml(e,Pv(tc(ae))),ae);return J2e(Ra(e,tc(ae)),te,ae,t)}catch{}});var d=z2e(Ra(e,tc(s.workbooks[0])),s.workbooks[0],t),f={},h="";s.coreprops.length&&(h=Ra(e,tc(s.coreprops[0]),!0),h&&(f=aG(h)),s.extprops.length!==0&&(h=Ra(e,tc(s.extprops[0]),!0),h&&Mhe(h,f,t)));var g={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(h=Ml(e,tc(s.custprops[0]),!0),h&&(g=Dhe(h,t)));var x={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(te){return te.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),t.bookProps&&(x.Props=f,x.Custprops=g),t.bookSheets&&typeof i<"u"&&(x.SheetNames=i),t.bookSheets?x.SheetNames:t.bookProps))return x;i={};var y={};t.bookDeps&&s.calcchain&&(y=X2e(Ra(e,tc(s.calcchain)),s.calcchain));var v=0,T={},k,b;{var N=d.Sheets;f.Worksheets=N.length,f.SheetNames=[];for(var E=0;E!=N.length;++E)f.SheetNames[E]=N[E].name}var P=a?"bin":"xml",M=s.workbooks[0].lastIndexOf("/"),j=(s.workbooks[0].slice(0,M+1)+"_rels/"+s.workbooks[0].slice(M+1)+".rels").replace(/^\//,"");oc(e,j)||(j="xl/_rels/workbook."+P+".rels");var A=Jy(Ml(e,j,!0),j.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=Q2e(Ra(e,tc(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=F1e(Ra(e,tc(s.people[0])),t)),A&&(A=vbe(A,d.Sheets));var O=Ra(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var L="sheet";if(A&&A[v]?(k="xl/"+A[v][1].replace(/[\/]?xl\//,""),oc(e,k)||(k=A[v][1]),oc(e,k)||(k=j.replace(/_rels\/.*$/,"")+A[v][1]),L=A[v][2]):(k="xl/worksheets/sheet"+(v+1-O)+"."+P,k=k.replace(/sheet0\./,"sheet.")),b=k.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var q=!1,Q=0;Q!=t.sheets.length;++Q)typeof t.sheets[Q]=="number"&&t.sheets[Q]==v&&(q=1),typeof t.sheets[Q]=="string"&&t.sheets[Q].toLowerCase()==f.SheetNames[v].toLowerCase()&&(q=1);if(!q)continue e}}wbe(e,k,b,f.SheetNames[v],v,T,i,L,t,d,l,u)}return x={Directory:s,Workbook:d,Props:f,Custprops:g,Deps:y,Sheets:i,SheetNames:f.SheetNames,Strings:Qy,Styles:u,Themes:l,SSF:Ps(Xr)},t&&t.bookFiles&&(e.files?(x.keys=n,x.files=e.files):(x.keys=[],x.files={},e.FullPaths.forEach(function(ae,te){ae=ae.replace(/^Root Entry[\/]/,""),x.keys.push(ae),x.files[ae]=e.FileIndex[te]}))),t&&t.bookVBA&&(s.vba.length>0?x.vbaraw=Ra(e,tc(s.vba[0]),!0):s.defaults&&s.defaults.bin===z1e&&(x.vbaraw=Ra(e,"xl/vbaProject.bin",!0))),x}function _be(e,t){var r=t||{},n="Workbook",s=$r.find(e,n);try{if(n="/!DataSpaces/Version",s=$r.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Qge(s.content),n="/!DataSpaces/DataSpaceMap",s=$r.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=epe(s.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=$r.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=tpe(s.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=$r.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);npe(s.content)}catch{}if(n="/EncryptionInfo",s=$r.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=spe(s.content);if(n="/EncryptedPackage",s=$r.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Sbe(e,t){return t.bookType=="ods"?pV(e,t):t.bookType=="numbers"?xbe(e,t):t.bookType=="xlsb"?kbe(e,t):Tbe(e,t)}function kbe(e,t){yp=1024,e&&!e.SSF&&(e.SSF=Ps(Xr)),e&&e.SSF&&(w1(),a3(e.SSF),t.revssf=o3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Zy?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=HG.indexOf(t.bookType)>-1,s=dE();CE(t=t||{});var a=JC(),i="",o=0;if(t.cellXfs=[],eh(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",xn(a,i,iG(e.Props,t)),s.coreprops.push(i),ns(t.rels,2,i,Sn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}for(e.Props.Worksheets=e.Props.SheetNames.length,xn(a,i,cG(e.Props)),s.extprops.push(i),ns(t.rels,3,i,Sn.EXT_PROPS),e.Custprops!==e.Props&&ma(e.Custprops||{}).length>0&&(i="docProps/custom.xml",xn(a,i,uG(e.Custprops)),s.custprops.push(i),ns(t.rels,4,i,Sn.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,xn(a,i,ewe(o-1,i,t,e,d)),s.sheets.push(i),ns(t.wbrels,-1,"worksheets/sheet"+o+"."+r,Sn.WS[0])}if(f){var g=f["!comments"],x=!1,y="";g&&g.length>0&&(y="xl/comments"+o+"."+r,xn(a,y,nwe(g,y)),s.comments.push(y),ns(d,-1,"../comments"+o+"."+r,Sn.CMNT),x=!0),f["!legacy"]&&x&&xn(a,"xl/drawings/vmlDrawing"+o+".vml",UG(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&xn(a,Pv(i),Ap(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,xn(a,i,rwe(t.Strings,i,t)),s.strs.push(i),ns(t.wbrels,-1,"sharedStrings."+r,Sn.SST)),i="xl/workbook."+r,xn(a,i,Z2e(e,i)),s.workbooks.push(i),ns(t.rels,1,i,Sn.WB),i="xl/theme/theme1.xml",xn(a,i,xE(e.Themes,t)),s.themes.push(i),ns(t.wbrels,-1,"theme/theme1.xml",Sn.THEME),i="xl/styles."+r,xn(a,i,twe(e,i,t)),s.styles.push(i),ns(t.wbrels,-1,"styles."+r,Sn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",xn(a,i,e.vbaraw),s.vba.push(i),ns(t.wbrels,-1,"vbaProject.bin",Sn.VBA)),i="xl/metadata."+r,xn(a,i,swe(i)),s.metadata.push(i),ns(t.wbrels,-1,"metadata."+r,Sn.XLMETA),xn(a,"[Content_Types].xml",nG(s,t)),xn(a,"_rels/.rels",Ap(t.rels)),xn(a,"xl/_rels/workbook."+r+".rels",Ap(t.wbrels)),delete t.revssf,delete t.ssf,a}function Tbe(e,t){yp=1024,e&&!e.SSF&&(e.SSF=Ps(Xr)),e&&e.SSF&&(w1(),a3(e.SSF),t.revssf=o3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Zy?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=HG.indexOf(t.bookType)>-1,s=dE();CE(t=t||{});var a=JC(),i="",o=0;if(t.cellXfs=[],eh(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",xn(a,i,iG(e.Props,t)),s.coreprops.push(i),ns(t.rels,2,i,Sn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}e.Props.Worksheets=e.Props.SheetNames.length,xn(a,i,cG(e.Props)),s.extprops.push(i),ns(t.rels,3,i,Sn.EXT_PROPS),e.Custprops!==e.Props&&ma(e.Custprops||{}).length>0&&(i="docProps/custom.xml",xn(a,i,uG(e.Custprops)),s.custprops.push(i),ns(t.rels,4,i,Sn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},h=e.Sheets[e.SheetNames[o-1]],g=(h||{})["!type"]||"sheet";switch(g){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,xn(a,i,tV(o-1,t,e,f)),s.sheets.push(i),ns(t.wbrels,-1,"worksheets/sheet"+o+"."+r,Sn.WS[0])}if(h){var x=h["!comments"],y=!1,v="";if(x&&x.length>0){var T=!1;x.forEach(function(k){k[1].forEach(function(b){b.T==!0&&(T=!0)})}),T&&(v="xl/threadedComments/threadedComment"+o+"."+r,xn(a,v,M1e(x,d,t)),s.threadedcomments.push(v),ns(f,-1,"../threadedComments/threadedComment"+o+"."+r,Sn.TCMNT)),v="xl/comments"+o+"."+r,xn(a,v,WG(x)),s.comments.push(v),ns(f,-1,"../comments"+o+"."+r,Sn.CMNT),y=!0}h["!legacy"]&&y&&xn(a,"xl/drawings/vmlDrawing"+o+".vml",UG(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&xn(a,Pv(i),Ap(f))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,xn(a,i,jG(t.Strings,t)),s.strs.push(i),ns(t.wbrels,-1,"sharedStrings."+r,Sn.SST)),i="xl/workbook."+r,xn(a,i,iV(e)),s.workbooks.push(i),ns(t.rels,1,i,Sn.WB),i="xl/theme/theme1.xml",xn(a,i,xE(e.Themes,t)),s.themes.push(i),ns(t.wbrels,-1,"theme/theme1.xml",Sn.THEME),i="xl/styles."+r,xn(a,i,LG(e,t)),s.styles.push(i),ns(t.wbrels,-1,"styles."+r,Sn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",xn(a,i,e.vbaraw),s.vba.push(i),ns(t.wbrels,-1,"vbaProject.bin",Sn.VBA)),i="xl/metadata."+r,xn(a,i,zG()),s.metadata.push(i),ns(t.wbrels,-1,"metadata."+r,Sn.XLMETA),d.length>1&&(i="xl/persons/person.xml",xn(a,i,D1e(d)),s.people.push(i),ns(t.wbrels,-1,"persons/person.xml",Sn.PEOPLE)),xn(a,"[Content_Types].xml",nG(s,t)),xn(a,"_rels/.rels",Ap(t.rels)),xn(a,"xl/_rels/workbook."+r+".rels",Ap(t.wbrels)),delete t.revssf,delete t.ssf,a}function EE(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Rl(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Cbe(e,t){return $r.find(e,"EncryptedPackage")?_be(e,t):uV(e,t)}function Ebe(e,t){var r,n=e,s=t||{};return s.type||(s.type=vn&&Buffer.isBuffer(e)?"buffer":"base64"),r=MH(n,s),bbe(r,s)}function yV(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return K8(e.slice(r),t);default:break e}return Gp.to_workbook(e,t)}function Nbe(e,t){var r="",n=EE(e,t);switch(t.type){case"base64":r=Rl(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=jm(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=us(r)),t.type="binary",yV(r,t)}function Abe(e,t){var r=e;return t.type=="base64"&&(r=Rl(r)),r=Tv.utils.decode(1200,r.slice(2),"str"),t.type="binary",yV(r,t)}function jbe(e){return e.match(/[^\x00-\x7F]/)?Uu(e):e}function KS(e,t,r,n){return n?(r.type="string",Gp.to_workbook(e,r)):Gp.to_workbook(t,r)}function J8(e,t){VC();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return J8(new Uint8Array(e),(r=Ps(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Pp={},r.dateNF&&(Pp.dateNF=r.dateNF),r.type||(r.type=vn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=vn?"buffer":"binary",n=kfe(e),typeof Uint8Array<"u"&&!vn&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,n=jbe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=Ps(r),r.type="array",J8(qC(n),r)}switch((s=EE(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return Cbe($r.read(n,r),r);break;case 9:if(s[1]<=8)return uV(n,r);break;case 60:return K8(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Oge(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return NG.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Ebe(n,r):KS(e,n,r,a);case 239:return s[3]===60?K8(n,r):KS(e,n,r,a);case 255:if(s[1]===254)return Abe(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return cm.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return cm.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return q8.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return OG.to_workbook(n,r);break;case 10:case 13:case 32:return Nbe(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Dge.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?q8.to_workbook(n,r):KS(e,n,r,a)}function vV(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return w2(t.file,$r.write(e,{type:vn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return $r.write(e,t)}function Pbe(e,t){var r=Ps(t||{}),n=Sbe(e,r);return Mbe(n,r)}function Mbe(e,t){var r={},n=vn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?$r.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(s3(s))}return t.password&&typeof encrypt_agile<"u"?vV(encrypt_agile(s,t.password),t):t.type==="file"?w2(t.file,s):t.type=="string"?us(s):s}function Fbe(e,t){var r=t||{},n=jwe(e,r);return vV(n,r)}function Fu(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Cv(Uu(n));case"binary":return Uu(n);case"string":return e;case"file":return w2(t.file,n,"utf8");case"buffer":return vn?x0(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Fu(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Dbe(e,t){switch(t.type){case"base64":return Cv(e);case"binary":return e;case"string":return e;case"file":return w2(t.file,e,"binary");case"buffer":return vn?x0(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function vb(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Cv(r):t.type=="string"?us(r):r;case"file":return w2(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function wV(e,t){VC(),C2e(e);var r=Ps(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=wV(e,r);return r.type="array",s3(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Fu(Swe(e,r),r);case"slk":case"sylk":return Fu(EG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return Fu(fV(e.Sheets[e.SheetNames[s]],r),r);case"txt":return Dbe(bV(e.Sheets[e.SheetNames[s]],r),r);case"csv":return Fu(NE(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return Fu(NG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return vb(q8.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return Fu(Gp.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return Fu(OG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return Fu(AG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return Fu(pV(e,r),r);case"wk1":return vb(cm.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return vb(cm.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),vb(dV(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Fbe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Pbe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Obe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function Ibe(e,t,r){var n={};return n.type="file",n.file=t,Obe(n),wV(e,n)}function Rbe(e,t,r,n,s,a,i,o){var l=Na(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var g=t.s.c;g<=t.e.c;++g){var x=i?e[r][g]:e[n[g]+l];if(x===void 0||x.t===void 0){if(u===void 0)continue;a[g]!=null&&(h[a[g]]=u);continue}var y=x.v;switch(x.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(a[g]!=null){if(y==null)if(x.t=="e"&&y===null)h[a[g]]=null;else if(u!==void 0)h[a[g]]=u;else if(d&&y===null)h[a[g]]=null;else continue;else h[a[g]]=d&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?y:c0(x,y,o);y!=null&&(f=!1)}}return{row:h,isempty:f}}function U4(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,a=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":l=Rn(d);break;case"number":l=Rn(e["!ref"]),l.s.r=d;break;default:l=d}n>0&&(s=0);var f=Na(l.s.r),h=[],g=[],x=0,y=0,v=Array.isArray(e),T=l.s.r,k=0,b={};v&&!e[T]&&(e[T]=[]);var N=u.skipHidden&&e["!cols"]||[],E=u.skipHidden&&e["!rows"]||[];for(k=l.s.c;k<=l.e.c;++k)if(!(N[k]||{}).hidden)switch(h[k]=Ys(k),r=v?e[T][k]:e[h[k]+f],n){case 1:a[k]=k-l.s.c;break;case 2:a[k]=h[k];break;case 3:a[k]=u.header[k-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=c0(r,null,u),y=b[i]||0,!y)b[i]=1;else{do o=i+"_"+y++;while(b[o]);b[i]=y,b[o]=1}a[k]=o}for(T=l.s.r+s;T<=l.e.r;++T)if(!(E[T]||{}).hidden){var P=Rbe(e,l,T,h,n,a,v,u);(P.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(g[x++]=P.row)}return g.length=x,g}var fO=/"/g;function Lbe(e,t,r,n,s,a,i,o){for(var l=!0,u=[],d="",f=Na(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var g=o.dense?(e[r]||[])[h]:e[n[h]+f];if(g==null)d="";else if(g.v!=null){l=!1,d=""+(o.rawNumbers&&g.t=="n"?g.v:c0(g,null,o));for(var x=0,y=0;x!==d.length;++x)if((y=d.charCodeAt(x))===s||y===a||y===34||o.forceQuotes){d='"'+d.replace(fO,'""')+'"';break}d=="ID"&&(d='"ID"')}else g.f!=null&&!g.F?(l=!1,d="="+g.f,d.indexOf(",")>=0&&(d='"'+d.replace(fO,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&l?null:u.join(i)}function NE(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=Rn(e["!ref"]),a=n.FS!==void 0?n.FS:",",i=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),u=new RegExp((a=="|"?"\\|":a)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],g=n.skipHidden&&e["!rows"]||[],x=s.s.c;x<=s.e.c;++x)(h[x]||{}).hidden||(f[x]=Ys(x));for(var y=0,v=s.s.r;v<=s.e.r;++v)(g[v]||{}).hidden||(d=Lbe(e,s,v,f,i,l,a,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((y++?o:"")+d)));return delete n.dense,r.join("")}function bV(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=NE(e,t);return r}function Bbe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=Rn(e["!ref"]),a="",i=[],o,l=[],u=Array.isArray(e);for(o=s.s.c;o<=s.e.c;++o)i[o]=Ys(o);for(var d=s.s.r;d<=s.e.r;++d)for(a=Na(d),o=s.s.c;o<=s.e.c;++o)if(t=i[o]+a,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=t+"="+n}return l}function _V(e,t,r){var n=r||{},s=+!n.skipHeader,a=e||{},i=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Xs(n.origin):n.origin;i=l.r,o=l.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+s}};if(a["!ref"]){var f=Rn(a["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+t.length-1+s)}else i==-1&&(i=0,d.e.r=t.length-1+s);var h=n.header||[],g=0;t.forEach(function(y,v){ma(y).forEach(function(T){(g=h.indexOf(T))==-1&&(h[g=h.length]=T);var k=y[T],b="z",N="",E=Qr({c:o+g,r:i+v+s});u=Lv(a,E),k&&typeof k=="object"&&!(k instanceof Date)?a[E]=k:(typeof k=="number"?b="n":typeof k=="boolean"?b="b":typeof k=="string"?b="s":k instanceof Date?(b="d",n.cellDates||(b="n",k=si(k)),N=n.dateNF||Xr[14]):k===null&&n.nullError&&(b="e",k=0),u?(u.t=b,u.v=k,delete u.w,delete u.R,N&&(u.z=N)):a[E]=u={t:b,v:k},N&&(u.z=N))})}),d.e.c=Math.max(d.e.c,o+h.length-1);var x=Na(i);if(s)for(g=0;g<h.length;++g)a[Ys(g+o)+x]={t:"s",v:h[g]};return a["!ref"]=pn(d),a}function $be(e,t){return _V(null,e,t)}function Lv(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Xs(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Lv(e,Qr(t)):Lv(e,Qr({r:t,c:r||0}))}function zbe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function AE(){return{SheetNames:[],Sheets:{}}}function jE(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=i+s)!=-1;++s);}if(aV(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function Ube(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=zbe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function Wbe(e,t){return e.z=t,e}function SV(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function Hbe(e,t,r){return SV(e,"#"+t,r)}function Gbe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function Vbe(e,t,r,n){for(var s=typeof t!="string"?t:Rn(t),a=typeof t=="string"?t:pn(t),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var l=Lv(e,i,o);l.t="n",l.F=a,delete l.v,i==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return e}var qb={encode_col:Ys,encode_row:Na,encode_cell:Qr,encode_range:pn,decode_col:aE,decode_row:sE,split_cell:rhe,decode_cell:Xs,decode_range:dl,format_cell:c0,sheet_add_aoa:XH,sheet_add_json:_V,sheet_add_dom:hV,aoa_to_sheet:b1,json_to_sheet:$be,table_to_sheet:mV,table_to_book:Qwe,sheet_to_csv:NE,sheet_to_txt:bV,sheet_to_json:U4,sheet_to_html:fV,sheet_to_formulae:Bbe,sheet_to_row_object_array:U4,sheet_get_cell:Lv,book_new:AE,book_append_sheet:jE,book_set_sheet_visibility:Ube,cell_set_number_format:Wbe,cell_set_hyperlink:SV,cell_set_internal_link:Hbe,cell_add_comment:Gbe,sheet_set_array_formula:Vbe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const kV=({onBackToCabinet:e,selectedGrade:t,selectedClass:r,openRetestModal:n,forceRefreshOnMount:s=!1})=>{fl(),k_();const{user:a,isAuthenticated:i}=Fs(),{showNotification:o}=ai(),l=S.useCallback(ct=>{let yt=null;if(typeof ct?.percentage=="number"&&!Number.isNaN(ct.percentage))return yt=Math.round(ct.percentage),console.debug("[TeacherResults] Using provided percentage",{percentage:ct.percentage,rounded:yt,result:ct}),yt;const nr=ct?.retest_best_score??ct?.score,At=ct?.retest_best_max_score??ct?.max_score,Rr=Number(nr??0),Lt=Number(At??0);return Lt>0&&(yt=Math.round(Rr/Lt*100)),yt},[]);S.useCallback(ct=>{const yt=l(ct);return yt===null?"text-gray-600":yt<50?"text-red-600 font-semibold":yt<70?"text-yellow-600":"text-green-600"},[l]),S.useCallback(ct=>{const yt=l(ct);return yt!==null&&yt<50},[l]);const[u,d]=S.useState(null),[f,h]=S.useState(!0),[g,x]=S.useState(""),[y,v]=S.useState([]),[T,k]=S.useState(null),[b,N]=S.useState(!1),[E,P]=S.useState([]),[M,j]=S.useState([]),[A,O]=S.useState([1,2]),[L,q]=S.useState(null),[Q,ae]=S.useState(null),[te,ne]=S.useState(null),[B,V]=S.useState("main"),[R,H]=S.useState(null),[U,I]=S.useState(null),W=R||t,K=U||r,[Z,oe]=S.useState(null),[J,le]=S.useState({}),[ue,de]=S.useState(!1),[Te,ie]=S.useState(new Set),[xe,Ae]=S.useState(!0),[Me,Je]=S.useState(null),[He,It]=S.useState(null),[it,kt]=S.useState(!1),[pt,ut]=S.useState(!1),[_t,qt]=S.useState(!1),Jt=S.useRef(null),[Ht,$e]=S.useState(null),[ze,tt]=S.useState(!1),[ot,nt]=S.useState(null),[Dt,Rt]=S.useState(!1),[Qt,wr]=S.useState(null),[kr,zr]=S.useState(""),[Tr,gr]=S.useState(""),[ve,Fe]=S.useState(!1),[Le,Ue]=S.useState(!1),[Pt,Ie]=S.useState(null),[Ye,Ne]=S.useState(""),[Ve,Ge]=S.useState(!1),[Ot,Ut]=S.useState(new Set),[ar,Dr]=S.useState({}),[br,Kr]=S.useState(!1),[he,Ce]=S.useState(null),[be,pe]=S.useState(""),[ke,Ee]=S.useState(!1),[Qe,xt]=S.useState(null),[rt,ce]=S.useState(null),[me,je]=S.useState(!1),[Pe,Ze]=S.useState(!1),[gt,Tt]=S.useState({}),ir=S.useRef(new Set),Ct=S.useRef({}),or=S.useRef(null);S.useEffect(()=>{console.log(" editingColumns state changed:",Array.from(Ot)),ir.current=Ot},[Ot]),S.useEffect(()=>{console.log(" columnScores state changed:",ar),Ct.current=ar},[ar]);const Or=S.useCallback(ct=>{console.log(" Toggling test collapse for:",ct),ie(yt=>{const nr=new Set(yt);return nr.has(ct)?(nr.delete(ct),console.log(" Expanding test:",ct)):(nr.add(ct),console.log(" Collapsing test:",ct)),console.log(" New collapsed tests:",Array.from(nr)),nr})},[]),Lr=S.useCallback(()=>{if(Jt.current){const{scrollLeft:ct,scrollWidth:yt,clientWidth:nr}=Jt.current;ut(ct>0),qt(ct<yt-nr-1)}},[]);S.useEffect(()=>{un()},[]),S.useEffect(()=>{if(L&&Jt.current){const ct=setTimeout(Lr,100);return()=>clearTimeout(ct)}},[L,Lr]),S.useEffect(()=>{console.log(" Current collapsed tests state:",Array.from(Te))},[Te]);const Pr=S.useCallback(async(ct,yt=!1)=>{try{de(!0);const nr=a?.teacher_id,At=`${W}/${K}`,Rr=await Hde.getTeacherStudentResults(nr,W,At,ct,yt);if(Rr.success){console.log(" Results loaded for term:",ct,Rr.results?.length||0,"results"),console.log(" Students loaded:",Rr.students?.length||0,"students");const Lt=[],cn=new Set,bn=new Set;Rr.results&&Rr.results.length>0&&Rr.results.forEach(zt=>{zt.test_name&&!cn.has(zt.test_name)&&(cn.add(zt.test_name),Lt.push({test_name:zt.test_name,test_type:zt.test_type,subject:zt.subject})),zt.subject&&bn.add(zt.subject)});const st=(Rr.students||[]).map(zt=>{const Gn={};return(Rr.results||[]).filter(dn=>dn.student_id===zt.student_id).forEach(dn=>{dn.test_name&&(Gn[dn.test_name]={id:dn.id,test_type:dn.test_type,test_id:dn.test_id,subject_id:dn.subject_id,score:dn.score,max_score:dn.max_score,retest_offered:dn.retest_offered,caught_cheating:dn.caught_cheating,visibility_change_times:dn.visibility_change_times,answers:dn.answers,ai_feedback:dn.ai_feedback,name:dn.name,surname:dn.surname,test_name:dn.test_name})}),{...zt,...Gn}}),cr={results:Rr.results||[],students:st,class:st,unique_tests:Lt,subjects:Array.from(bn),count:Rr.count||0,student_count:Rr.student_count||0};console.log(" Processed results data:",{uniqueTests:Lt.length,subjects:Array.from(bn),resultsCount:Rr.results?.length||0,studentsWithScores:st.length,sampleStudent:st[0]}),q(cr),le(cr),ne(new Date)}}catch(nr){console.error(" Error loading results for term:",nr),q(null),le(null)}finally{de(!1)}},[a,W,K]);S.useEffect(()=>{(async()=>{try{kt(!0),await iu.loadAcademicCalendar();const yt=iu.getCurrentSemesterTerms();It(yt),yt?.currentTerm&&(Je(yt.currentTerm.id),W&&K&&Pr(yt.currentTerm.id,s))}catch(yt){console.error(" Error initializing academic calendar:",yt)}finally{kt(!1)}})()},[W,K,Pr,s]),S.useEffect(()=>{t&&r&&(console.log(" Props detected:",{grade:t,class:r}),He?.currentTerm&&(Je(He.currentTerm.id),Pr(He.currentTerm.id,s)))},[t,r,He,Pr,s]);const un=S.useCallback(async()=>{console.log(" Initializing teacher results...");try{if(h(!0),x(""),!i||!a){console.log(" User not authenticated"),x("User not authenticated");return}if(a.role!==Io.TEACHER){console.error(" Invalid user role for teacher results:",a.role),x("Access denied. Teacher role required.");return}console.log(" Loading teacher assignments..."),await An(),console.log(" TODO: Load academic calendar service"),console.log(" Teacher results initialization complete!")}catch(ct){console.error(" Error initializing teacher results:",ct),x("Failed to initialize teacher results")}finally{h(!1)}},[i,a]),An=S.useCallback(async()=>{console.log(" Loading teacher assignments...");try{const ct=`teacher_data_${a?.teacher_id||a?.id||""}`;let yt=fa(ct);yt&&yt.subjects&&yt.subjects.length>0&&(yt.subjects.some(st=>st.subject&&st.classes&&st.classes.length>0)||(console.log(" Cached data has invalid subject structure, forcing refresh"),localStorage.removeItem(ct),yt=null)),yt?console.log(" Cache HIT! Using cached teacher data"):(console.log(" Cache MISS! Fetching teacher data from API"),yt=await Rs.getTeacherData(),console.log(" Teacher data loaded:",yt),qs(ct,yt,da.teacher_subjects)),d(yt);const nr=[];yt&&yt.subjects&&(console.log(" Teacher subjects structure:",yt.subjects),yt.subjects.forEach(bn=>{console.log(" Processing subject:",bn),bn.classes&&bn.classes.forEach(st=>{st.grade&&st.class&&nr.push({grade:st.grade,class:st.class,subject:bn.subject||bn.name||"Unknown Subject"})})})),j(nr),console.log(" Available classes from teacher data:",nr);const At=`teacher_tests_${a?.teacher_id||a?.id||""}`,Rr=fa(At);Rr&&Rr.some(bn=>bn.test_type==="drawing")&&(console.log(" Drawing test detected - forcing cache refresh"),localStorage.removeItem(At));let Lt=fa(At);Lt?console.log(" Cache HIT! Using cached teacher tests"):(console.log(" Cache MISS! Fetching teacher tests from API"),Lt=await Pn.getTeacherTests(),console.log(" Teacher tests loaded:",Lt),qs(At,Lt,da.teacher_tests));const cn=Lt.flatMap(bn=>bn.assignments||[]);v(cn),console.log(" Raw assignments data:",cn),console.log(" Teacher assignments loaded:",cn.length)}catch(ct){console.error(" Error loading teacher assignments:",ct),o("Failed to load teacher assignments","error")}},[o]),mn=S.useCallback(async(ct,yt)=>{console.log(" Showing classes for grade:",ct,"class:",yt),H(ct),I(yt),k(null),q(null),ct&&yt&&console.log(" TODO: Implement academic calendar service for term selection")},[]);S.useCallback((ct,yt)=>{console.log(" Showing semesters for class:",ct,yt),k(null),q(null),console.log(" TODO: Implement academic calendar service for term selection")},[]),S.useCallback((ct,yt)=>{console.log(" Class clicked:",ct,yt),N(!0),console.log(" TODO: Implement academic calendar service for term selection")},[]);const _r=S.useCallback(async(ct,yt=!1)=>{!W||!K||(console.log(" Loading results for semester:",ct,"forceRefresh:",yt),k(ct),He?.currentTerm&&await Pr(He.currentTerm.id,yt))},[W,K,He,Pr]),Pa=S.useCallback(()=>He?c.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[c.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Current Semester: ",He?.semester===1?"Semester 1":"Semester 2"]}),c.jsx("div",{className:"flex space-x-4",children:He?.terms.map(ct=>c.jsx(ht.button,{className:`px-6 py-3 rounded-lg font-semibold transition-all duration-300 ${ct.isCurrent?"bg-blue-600 text-white shadow-lg":Me===ct.id?"bg-green-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,onClick:()=>{Je(ct.id),Pr(ct.id)},whileHover:{scale:1.05},whileTap:{scale:.95},children:ct.label},ct.id))})]}):c.jsx("div",{className:"flex space-x-4 mb-6",children:c.jsx("div",{className:"px-6 py-3 rounded-lg bg-gray-200 text-gray-500",children:"Loading terms..."})}),[He,Me,Pr]);S.useCallback(ct=>ct.reduce((yt,nr)=>(yt[nr.student_id]||(yt[nr.student_id]=[]),yt[nr.student_id].push(nr),yt),{}),[]),S.useCallback(ct=>{if(ct.length===0)return 0;const yt=ct.reduce((nr,At)=>nr+(At.percentage||0),0);return Math.round(yt/ct.length)},[]),S.useCallback(ct=>{ct.score<ct.passing_score&&window.confirm("Give another try?")&&Mn(ct.student_id,ct.test_id)},[]);const Mn=S.useCallback(async(ct,yt)=>{try{(await fetch("/.netlify/functions/reset-test-attempt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:ct,testId:yt})})).ok&&(K&&_r(T,!0),o("Test made accessible to student","success"))}catch(nr){console.error("Error resetting test attempt:",nr),o("Failed to reset test attempt","error")}},[K,T,_r,o]),ds=S.useCallback((ct,yt)=>{if(ct===null||yt===null)return"";const nr=Math.round(ct/yt*100);return nr>=80?"text-green-600 bg-green-50":nr>=60?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50"},[]),Yn=S.useCallback(ct=>{$e(ct),tt(!0)},[]),pa=S.useCallback((ct,yt="overview",nr)=>{try{const Rr=!!ct?.ai_feedback,Lt=typeof ct?.ai_feedback;let cn=[];if(Rr)if(Lt==="string")try{cn=Object.keys(JSON.parse(ct.ai_feedback))}catch{cn=["<invalid json>"]}else Lt==="object"&&(cn=Object.keys(ct.ai_feedback||{}));console.log("[AI DEBUG] Opening speaking result",{hasAi:Rr,aiType:Lt,aiKeys:cn})}catch{}const At={...ct,__initialTab:yt};nr&&(At.__audioUrl=nr),nt(At),Rt(!0)},[]),Hn=S.useCallback(async(ct,yt)=>{if(!ct||!yt)return console.error("fetchTestQuestions: Missing testType or testId",{testType:ct,testId:yt}),null;const nr=`${ct}_${yt}`;if(gt[nr])return console.log(" Using cached questions for",nr),gt[nr];Ze(!0);try{console.log(" Fetching questions for",{testType:ct,testId:yt});const At=await Pn.getTestQuestions(ct,yt);return console.log(" Questions fetched:",At?.length||0,"questions"),Tt(Rr=>({...Rr,[nr]:At})),At}catch(At){return console.error(" Error fetching test questions:",At),o("Failed to load test questions","error"),null}finally{Ze(!1)}},[gt,o]),_e=S.useCallback(async(ct,yt)=>{if(console.log(" Opening answer modal for:",{testResult:ct,test:yt}),console.log(" [handleViewAnswers] testResult.answers:",ct?.answers),console.log(" [handleViewAnswers] testResult.answers type:",typeof ct?.answers),console.log(" [handleViewAnswers] testResult.retest_offered:",ct?.retest_offered),console.log(" [handleViewAnswers] Full testResult keys:",ct?Object.keys(ct):"null"),ct.test_type==="drawing"||yt?.test_type==="drawing"){Yn(ct);return}if(ct.test_type==="speaking"||yt?.test_type==="speaking"){pa(ct);return}const nr=ct.test_type||yt?.test_type;if(nr==="word_matching"||nr==="matching_type"){o("Word matching and picture matching tests have separate view mechanisms","info");return}xt(ct),ce(null),je(!0),Ze(!0);const At=ct.test_id||yt?.test_id;if(!nr||!At){o("Unable to load test questions: Missing test type or ID","error"),Ze(!1);return}try{const Rr=await Hn(nr,At);Rr?ce(Rr):o("Failed to load test questions","error")}finally{Ze(!1)}},[Hn,Yn,pa,o]);S.useCallback((ct,yt,nr)=>{wr({resultId:ct,score:yt,maxScore:nr}),zr(yt?.toString()||""),gr(nr?.toString()||""),Ue(!0)},[]),S.useCallback(ct=>{zr(ct)},[]),S.useCallback(ct=>{gr(ct)},[]),S.useCallback(async()=>{if(Qt){Fe(!0);try{const ct={resultId:Qt.resultId,score:parseInt(kr)||0,maxScore:parseInt(Tr)||1};(await fetch(xy.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ct)})).ok?(o("Score updated successfully","success"),K&&_r(T,!0),wr(null),zr(""),gr(""),Ue(!1)):o("Failed to update score","error")}catch(ct){console.error("Error updating score:",ct),o("Failed to update score","error")}finally{Fe(!1)}}},[Qt,kr,Tr,K,T,_r,o]),S.useCallback(()=>{wr(null),zr(""),gr(""),Ue(!1)},[]);const Nt=S.useCallback((ct,yt)=>{Ie({resultId:ct,score:yt}),Ne(yt.toString())},[]),Ur=S.useCallback(async()=>{if(Pt){Ge(!0);try{const ct={resultId:Pt.resultId,score:parseInt(Ye)||0},yt=await fetch(xy.UPDATE_SPEAKING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ct)});if(yt.ok){const nr=await yt.json();o("Speaking test score updated successfully","success"),ot&&nt(At=>({...At,score:nr.score,percentage:nr.percentage})),K&&_r(T,!0),Ie(null),Ne("")}else{const nr=await yt.json();o(nr.error||"Failed to update speaking test score","error")}}catch(ct){console.error("Error updating speaking test score:",ct),o("Failed to update speaking test score","error")}finally{Ge(!1)}}},[Pt,Ye,K,T,_r,o]),Yr=S.useCallback(()=>{Ie(null),Ne("")},[]),fs=(ct,yt)=>{console.log(" Starting column editing for drawing test:",ct),console.log(" Current editingColumns before update:",Array.from(Ot)),console.log(" Results data passed to function:",yt),Ut(nr=>{const At=new Set(nr).add(ct);return console.log(" Updated editingColumns:",Array.from(At)),At}),console.log(" Initializing column scores for test:",ct),console.log(" Results data:",yt),console.log(" Results.class:","null"),console.log(" No results or class data available")},jn=S.useCallback(ct=>{Ut(yt=>{const nr=new Set(yt);return nr.delete(ct),nr}),Dr(yt=>{const nr={...yt};return delete nr[ct],nr})},[]),Be=S.useCallback((ct,yt,nr,At)=>{const Rr=At.toString();Ct.current[ct]||(Ct.current[ct]={}),Ct.current[ct][yt]||(Ct.current[ct][yt]={}),Ct.current[ct][yt][nr]=Rr;const Lt=parseInt(At)||0;Dr(cn=>({...cn,[ct]:{...cn[ct],[yt]:{...cn[ct]?.[yt],[nr]:Lt}}}))},[]);S.useCallback(async ct=>{if(Ct.current[ct]){Kr(!0);try{const yt=Object.entries(Ct.current[ct]).map(([Lt,cn])=>({resultId:cn.resultId,score:parseInt(cn.score)||0,maxScore:parseInt(cn.maxScore)||100}));console.log(" Saving column scores for",ct,":",yt);const nr=yt.map(Lt=>(console.log(" Sending update:",Lt),fetch(xy.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Lt)})));(await Promise.all(nr)).every(Lt=>Lt.ok)?(o(`Scores updated successfully for ${ct}`,"success"),K&&_r(T,!0),jn(ct)):o("Failed to update some scores","error")}catch(yt){console.error("Error updating column scores:",yt),o("Failed to update scores","error")}finally{Kr(!1)}}},[ar,K,T,_r,o,jn]);const wt=S.useCallback((ct,yt,nr)=>!yt||yt.length===0?c.jsx(ht.div,{className:"text-center py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:c.jsx("p",{className:"text-gray-500",children:"No students found for this subject"})}):c.jsx(ht.div,{className:"relative",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:c.jsxs(ht.div,{className:"bg-white rounded-lg shadow-lg overflow-hidden",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.1},children:[c.jsx("div",{className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",onScroll:At=>{Jt.current&&(Jt.current.scrollLeft=At.target.scrollLeft)},children:c.jsx("div",{className:"min-w-full h-1",children:c.jsx("div",{className:"h-1",style:{width:`${(nr.length+5)*120}px`}})})}),c.jsx("div",{ref:Jt,className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",onScroll:At=>{Lr(At);const Rr=At.target.previousElementSibling;Rr&&(Rr.scrollLeft=At.target.scrollLeft)},children:c.jsxs("table",{className:"min-w-full border-collapse text-sm min-w-max",children:[c.jsx("thead",{children:c.jsxs(ht.tr,{className:"bg-gradient-to-r from-blue-50 to-indigo-50",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[c.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 w-20 text-center",children:"Student ID"}),c.jsx("th",{className:`border-b border-gray-200 px-2 py-4 text-left font-semibold text-gray-700 ${xe?"w-8 min-w-[32px] max-w-[32px] bg-gray-100 cursor-pointer select-none":"min-w-[180px] bg-blue-50 cursor-pointer select-none"}`,onClick:At=>{At.preventDefault(),At.stopPropagation(),Ae(!xe)},title:"Toggle student name columns",children:xe?c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"truncate",title:"Student Name",children:"Student Name"}),c.jsx("svg",{className:"w-4 h-4 ml-1 flex-shrink-0 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),c.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 w-16 text-center",children:"No."}),c.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 min-w-[100px]",children:"Nickname"}),nr.map((At,Rr)=>{const Lt=Te.has(At.test_name),cn=At.test_type==="drawing",bn=ir.current.has(At.test_name);return console.log(` Rendering test ${At.test_name}:`,{isDrawingTest:cn,isEditingColumn:bn,editingColumns:Array.from(ir.current),test_type:At.test_type}),c.jsx("th",{className:`border-b border-gray-200 px-2 py-4 text-left font-semibold text-gray-700 cursor-pointer hover:bg-blue-200 transition-colors select-none ${Lt?"w-8 min-w-[32px] max-w-[32px] bg-gray-100":"min-w-[100px] bg-blue-50"}`,onClick:st=>{st.preventDefault(),st.stopPropagation(),Or(At.test_name)},children:Lt?c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"truncate",title:At.test_name,children:At.test_name.length>8?At.test_name.substring(0,8)+"...":At.test_name}),c.jsx("svg",{className:"w-4 h-4 ml-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})},Rr)})]})}),c.jsx("tbody",{children:c.jsx(al,{children:yt.map((At,Rr)=>c.jsxs(ht.tr,{className:`border-b border-gray-100 hover:bg-blue-50 transition-colors duration-200 ${Rr%2===0?"bg-white":"bg-gray-50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1+Rr*.05,ease:"easeOut"},whileHover:{scale:1.01,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.99},children:[c.jsx(ht.td,{className:"border-b border-gray-100 px-4 py-4 text-center font-semibold text-gray-900",whileHover:{scale:1.05},transition:{duration:.2},children:At.student_id}),xe?c.jsx("td",{className:"border-b border-gray-100 px-1 py-4 text-sm w-8 min-w-[32px] max-w-[32px]",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:Lt=>{Lt.preventDefault(),Lt.stopPropagation(),Ae(!1)},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}):c.jsxs(c.Fragment,{children:[c.jsx(ht.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:At.name}),c.jsx(ht.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:At.surname})]}),c.jsx(ht.td,{className:"border-b border-gray-100 px-4 py-4 text-center text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:At.number??Rr+1}),c.jsx(ht.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-600",whileHover:{scale:1.02},transition:{duration:.2},children:At.nickname||"-"}),nr.map((Lt,cn)=>{const bn=Te.has(Lt.test_name),st=At[Lt.test_name];return bn?(console.log(" Rendering collapsed column for test:",Lt.test_name),c.jsx("td",{className:"border-b border-gray-100 px-1 py-4 text-sm w-8 min-w-[32px] max-w-[32px]",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:cr=>{cr.preventDefault(),cr.stopPropagation(),console.log(" Clicked on collapsed arrow for:",Lt.test_name),Or(Lt.test_name)},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})},cn)):c.jsx(ht.td,{className:"border-b border-gray-100 px-2 py-4 text-sm min-w-[100px]",initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},transition:{duration:.3},whileHover:{scale:1.02},onClick:cr=>{console.debug("[TeacherResults] Main table TD clicked",{testResult:st,student:At.student_id});const zt=st?.test_type||Lt?.test_type;if(zt==="drawing"||zt==="speaking"||zt==="word_matching"||zt==="matching_type")return;const Gn=l(st),sn=Gn!==null&&Gn<50;if(st?.retest_offered===!0&&(zt==="multiple_choice"||zt==="true_false"||zt==="input")){_e(st,Lt);return}if(sn){if(st?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] Main table TD -> opening retest modal",{studentId:At.student_id,test:Lt}),n({failedStudentIds:[At.student_id],test_type:Lt.test_type,original_test_id:st?.test_id||Lt.test_id,subject_id:st?.subject_id||Lt.subject_id,grade:t,class:r})}else _e(st,Lt)},children:st&&st.test_type==="drawing"?c.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[c.jsx("button",{onClick:()=>Yn(st),className:"text-blue-600 hover:text-blue-800 underline text-sm font-medium px-2 py-1 rounded hover:bg-blue-50",children:"View Drawing"}),(()=>{const cr=`${Lt.test_name}|${At.student_id}`,zt=he===cr,Gn=Number.isFinite(st?.score)?st.score:0;if(!zt){const sn=l(st),dn=sn!==null&&sn<50,ys=sn!==null&&sn>=50&&sn<70,kn=st?.retest_offered===!0,vs=sn===null?"text-gray-600":dn?"text-red-600 font-semibold":ys?"text-yellow-600":"text-green-600";return c.jsxs(ht.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${vs} cursor-pointer hover:opacity-90 ${kn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:dn?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:Ei=>{Ei.preventDefault(),Ei.stopPropagation(),dn&&!kn?n({failedStudentIds:[At.student_id],test_type:Lt.test_type,original_test_id:st?.test_id||Lt.test_id,subject_id:st?.subject_id||Lt.subject_id,grade:t,class:r}):(Ce(cr),pe(String(Gn)))},title:kn?"Retest offered":dn?"Offer retest":"Double-click to edit score",children:[(()=>{const Ei=st.retest_best_score??st.score,cu=st.retest_best_max_score??st.max_score;return c.jsxs(c.Fragment,{children:[c.jsx("span",{className:dn?"text-red-700":"",children:Ei}),"/",c.jsx("span",{children:cu})]})})(),st.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})}return c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("input",{type:"number",min:"0",max:10,value:be,onChange:sn=>pe(sn.target.value),onBlur:async()=>{const sn=Math.max(0,Math.min(10,parseFloat(be||"0")));Ee(!0);try{const dn={resultId:st?.id,score:sn,maxScore:10},ys=await(window.tokenManager?.getToken()||aa.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");if(!(await fetch(xy.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:ys?`Bearer ${ys}`:""},body:JSON.stringify(dn)})).ok)throw new Error("Failed to save")}catch{}finally{Ee(!1),Ce(null),_r(T,!0)}},onKeyDown:async sn=>{sn.key==="Enter"?sn.currentTarget.blur():sn.key==="Escape"&&Ce(null)},className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0",disabled:ke}),c.jsx("span",{className:"text-xs text-gray-500",children:"/"}),c.jsx("input",{type:"number",value:10,className:"w-12 px-2 py-1 text-xs border border-gray-300 bg-gray-100 rounded",disabled:!0})]})})(),st.caught_cheating&&st.visibility_change_times&&c.jsxs("span",{className:"text-xs text-red-600",children:["(",st.visibility_change_times,")"]})]}):st&&(st.test_type==="speaking"||Lt.test_type==="speaking")?c.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[(()=>{const cr=st?.answers;let zt;if(typeof cr=="string")if(/^https?:\/\//i.test(cr))zt=cr;else try{zt=JSON.parse(cr)?.audio_url}catch{}else cr&&typeof cr=="object"&&(zt=cr.audio_url);return!zt&&st?.audio_url&&(zt=st.audio_url),c.jsx(c.Fragment,{children:c.jsx("button",{onClick:()=>pa({...st,__studentId:At.student_id},"audio",zt),className:"text-blue-600 hover:text-blue-800 underline text-sm font-medium px-2 py-1 rounded hover:bg-blue-50",children:"Results"})})})(),(()=>{const cr=ir.current.has(Lt.test_name);return console.log(` Score cell for ${Lt.test_name}:`,{isEditing:cr,editingColumns:Array.from(ir.current),test_name:Lt.test_name}),cr})()?c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("input",{type:"number",min:"0",max:st.max_score||100,value:Ct.current[Lt.test_name]?.[At.student_id]?.score||st.score||"",onChange:cr=>Be(Lt.test_name,At.student_id,"score",cr.target.value),className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),c.jsx("span",{className:"text-xs text-gray-500",children:"/"}),c.jsx("input",{type:"number",min:"1",value:Ct.current[Lt.test_name]?.[At.student_id]?.maxScore||st.max_score||100,onChange:cr=>Be(Lt.test_name,At.student_id,"maxScore",cr.target.value),className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Max"})]}):c.jsxs("div",{className:"px-2 py-1 rounded-full text-xs font-medium",onDoubleClick:()=>{console.log(" Double-clicked on speaking test score:",Lt.test_name),console.log(" Results state at double-click:",L),console.log(" Test result:",st),console.log(" Student:",At),console.log(" Test:",Lt),st&&st.id?(console.log(" Starting column editing for speaking test:",Lt.test_name),fs(Lt.test_name)):console.log(" No test result ID found, cannot edit")},title:"Double-click to edit scores",children:[(()=>{const cr=l(st),zt=cr!==null&&cr<50,Gn=cr!==null&&cr>=50&&cr<70,sn=st.retest_offered,dn=cr===null?"text-gray-600":zt?"text-red-600 font-semibold":Gn?"text-yellow-600":"text-green-600";return c.jsxs(ht.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${dn} cursor-pointer hover:opacity-90 ${sn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:zt?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:ys=>{ys.preventDefault(),ys.stopPropagation(),zt&&!sn&&(console.log(" Offering retest for speaking test:",Lt.test_name),n({failedStudentIds:[At.student_id],test_type:Lt.test_type,original_test_id:st?.test_id||Lt.test_id,subject_id:st?.subject_id||Lt.subject_id,grade:t,class:r}))},title:sn?"Retest offered":zt?"Offer retest":'Use "View Results" button to review',children:[(()=>{const ys=st.retest_best_score??st.score,kn=st.retest_best_max_score??st.max_score;return c.jsxs(c.Fragment,{children:[c.jsx("span",{className:zt?"text-red-700":"",children:ys}),"/",c.jsx("span",{children:kn})]})})(),st.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})(),st.caught_cheating&&st.visibility_change_times&&c.jsxs("span",{className:"text-xs text-red-600",children:["(",st.visibility_change_times,")"]})]})]}):st&&st.score!==null&&st.score!==void 0?c.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[(()=>{const cr=l(st),zt=cr!==null&&cr<50,Gn=cr!==null&&cr>=50&&cr<70,sn=cr===null?"text-gray-600":zt?"text-red-600 font-semibold":Gn?"text-yellow-600":"text-green-600",dn=st?.retest_offered===!0;return c.jsxs(ht.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${sn} cursor-pointer hover:opacity-90 ${dn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:zt?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:ys=>{ys.preventDefault(),ys.stopPropagation();const kn=st?.test_type||Lt?.test_type;if(!(kn==="drawing"||kn==="speaking")){if(st?.retest_offered===!0&&(kn==="multiple_choice"||kn==="true_false"||kn==="input")){_e(st,Lt);return}if(zt){if(st?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[At.student_id],test_type:Lt.test_type,original_test_id:st?.test_id||Lt.test_id,subject_id:st?.subject_id||Lt.subject_id,grade:t,class:r})}else _e(st,Lt)}},title:dn?"Click to view retest answers":zt?"Offer retest":"",children:[(()=>{const ys=st.retest_best_score??st.score,kn=st.retest_best_max_score??st.max_score;return c.jsxs(c.Fragment,{children:[c.jsx("span",{className:zt?"text-red-700":"",children:ys}),"/",c.jsx("span",{children:kn})]})})(),st.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})(),st.caught_cheating&&st.visibility_change_times&&c.jsxs("span",{className:"text-xs text-red-600",children:["(",st.visibility_change_times,")"]})]}):c.jsx("span",{className:"text-gray-400",children:"-"})},cn)})]},Rr))})})]})})]})}),[ds,Te,Or,xe]),Gt=S.useCallback((ct,yt,nr)=>!yt||yt.length===0?c.jsx(ht.div,{className:"text-center py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:c.jsx("p",{className:"text-gray-500",children:"No students found for this subject"})}):c.jsx(ht.div,{className:"w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},children:c.jsx(ht.div,{className:"overflow-x-auto -mx-4 px-4",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1},children:c.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden min-w-max",children:c.jsxs("table",{className:"w-full border-collapse text-xs min-w-max",children:[c.jsx("thead",{children:c.jsxs(ht.tr,{className:"bg-gradient-to-r from-blue-50 to-indigo-50",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2,delay:.2},children:[c.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 w-16 text-center",children:"ID"}),c.jsx("th",{className:`border-b border-gray-200 px-2 py-3 text-left font-semibold text-gray-700 ${xe?"w-8 min-w-[32px] max-w-[32px] bg-gray-100 cursor-pointer select-none":"min-w-[160px] bg-blue-50 cursor-pointer select-none"}`,onClick:At=>{At.preventDefault(),At.stopPropagation(),Ae(!xe)},title:"Toggle student name columns",children:xe?c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"truncate",title:"Student Name",children:"Student Name"}),c.jsx("svg",{className:"w-3 h-3 ml-1 flex-shrink-0 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),c.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 w-12 text-center",children:"No."}),c.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 min-w-[80px]",children:"Nickname"}),nr.map((At,Rr)=>(At.test_type,ir.current.has(At.test_name),c.jsx(ht.th,{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 min-w-[100px]",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.3+Rr*.05},children:c.jsx("div",{className:"flex flex-col space-y-1",children:c.jsx("span",{className:"text-xs",children:At.test_name.length>10?At.test_name.substring(0,10)+"...":At.test_name})})},Rr)))]})}),c.jsx("tbody",{children:c.jsx(al,{children:yt.map((At,Rr)=>c.jsxs(ht.tr,{className:`border-b border-gray-100 hover:bg-blue-50 transition-colors duration-200 ${Rr%2===0?"bg-white":"bg-gray-50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.1+Rr*.03,ease:"easeOut"},whileHover:{scale:1.005,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.995},children:[c.jsx(ht.td,{className:"border-b border-gray-100 px-3 py-3 text-center font-semibold text-gray-900",whileHover:{scale:1.03},transition:{duration:.15},children:At.student_id}),xe?c.jsx("td",{className:"border-b border-gray-100 px-1 py-3 text-xs w-8 min-w-[32px] max-w-[32px]",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-3 h-3 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:Lt=>{Lt.preventDefault(),Lt.stopPropagation(),Ae(!1)},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}):c.jsxs(c.Fragment,{children:[c.jsx(ht.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:At.name}),c.jsx(ht.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:At.surname})]}),c.jsx(ht.td,{className:"border-b border-gray-100 px-3 py-3 text-center text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:At.number??Rr+1}),c.jsx(ht.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-600 whitespace-normal break-words",whileHover:{scale:1.01},transition:{duration:.15},children:At.nickname||"-"}),nr.map((Lt,cn)=>{const bn=Te.has(Lt.test_name),st=At[Lt.test_name];return bn?c.jsx("td",{className:"border-b border-gray-100 px-1 py-3 text-sm w-8 min-w-[32px] max-w-[32px]",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:cr=>{cr.preventDefault(),cr.stopPropagation(),Or(Lt.test_name)},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})},cn):c.jsx(ht.td,{className:"border-b border-gray-100 px-3 py-3 text-sm",whileHover:{scale:1.01},transition:{duration:.15},onClick:cr=>{console.debug("[TeacherResults] TD clicked",{testResult:st,student:At.student_id});const zt=st?.test_type||Lt?.test_type;if(zt==="drawing"||zt==="speaking")return;const Gn=l(st),sn=Gn!==null&&Gn<50;if(st?.retest_offered===!0&&(zt==="multiple_choice"||zt==="true_false"||zt==="input")){_e(st,Lt);return}if(sn){if(st?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] TD -> opening retest modal",{studentId:At.student_id}),n({failedStudentIds:[At.student_id],test_type:st.test_type,original_test_id:st.test_id,subject_id:st.subject_id,grade:t,class:r})}else _e(st,Lt)},children:st&&(st.test_type==="drawing"||Lt.test_type==="drawing"||st.test_type==="speaking"||Lt.test_type==="speaking"||st.score!==null&&st.score!==void 0)?c.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[st.test_type==="drawing"?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>Yn(st),className:"text-blue-600 hover:text-blue-800 underline text-xs font-medium px-1 py-0.5 rounded hover:bg-blue-50",children:"View"}),ir.current.has(Lt.test_name)?c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("input",{type:"number",min:"0",max:st.max_score||100,value:Ct.current[Lt.test_name]?.[At.student_id]?.score||st.score||"",onChange:cr=>Be(Lt.test_name,At.student_id,"score",cr.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),c.jsx("span",{className:"text-xs text-gray-500",children:"/"}),c.jsx("input",{type:"number",min:"1",value:Ct.current[Lt.test_name]?.[At.student_id]?.maxScore||st.max_score||100,onChange:cr=>Be(Lt.test_name,At.student_id,"maxScore",cr.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Max"})]}):(()=>{const cr=l(st),zt=cr!==null&&cr<50,Gn=cr!==null&&cr>=50&&cr<70,sn=st.retest_offered,dn=cr===null?"text-gray-600":zt?"text-red-600 font-semibold":Gn?"text-yellow-600":"text-green-600";return c.jsxs(ht.div,{className:`px-1 py-0.5 rounded text-xs font-medium ${dn} cursor-pointer hover:opacity-90 ${sn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:zt?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onDoubleClick:()=>fs(Lt.test_name),onClick:ys=>{ys.preventDefault(),ys.stopPropagation();const kn=st?.test_type||Lt?.test_type;if(!(kn==="drawing"||kn==="speaking")){if(st?.retest_offered===!0&&(kn==="multiple_choice"||kn==="true_false"||kn==="input")){_e(st,Lt);return}if(zt){if(st?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[At.student_id],test_type:Lt.test_type,original_test_id:st?.test_id||Lt.test_id,subject_id:st?.subject_id||Lt.subject_id,grade:t,class:r})}else _e(st,Lt)}},title:sn?"Click to view retest answers":zt?"Offer retest":"Click to view answers",children:[c.jsx("span",{className:zt?"text-red-700":"",children:st.score}),"/",c.jsx("span",{children:st.max_score}),st.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})()]}):st.test_type==="speaking"||Lt.test_type==="speaking"?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>pa({...st,__studentId:At.student_id},"audio"),className:"text-blue-600 hover:text-blue-800 underline text-xs font-medium px-1 py-0.5 rounded hover:bg-blue-50",children:"View Audio"}),Pt&&Pt.resultId===st.result_id?c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("input",{type:"number",min:"0",max:st.max_score||100,value:Ye,onChange:cr=>Ne(cr.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),c.jsx("button",{onClick:()=>Ur(),disabled:Ve,className:"px-1 py-0.5 bg-green-600 text-white text-xs rounded hover:bg-green-700 disabled:opacity-50",children:Ve?"Saving...":"Save"}),c.jsx("button",{onClick:()=>Yr(),disabled:Ve,className:"px-1 py-0.5 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 disabled:opacity-50",children:"Cancel"})]}):(()=>{const cr=l(st),zt=cr!==null&&cr<50,Gn=cr!==null&&cr>=50&&cr<70,sn=st.retest_offered,dn=cr===null?"text-gray-600":zt?"text-red-600 font-semibold":Gn?"text-yellow-600":"text-green-600";return c.jsxs(ht.div,{className:`px-1 py-0.5 rounded text-xs font-medium ${dn} cursor-pointer hover:opacity-90 ${sn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:zt?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onDoubleClick:()=>{Ie({resultId:st.result_id,score:st.score}),Ne(st.score?.toString()||"")},onClick:ys=>{ys.preventDefault(),ys.stopPropagation();const kn=st?.test_type||Lt?.test_type;if(!(kn==="drawing"||kn==="speaking")){if(st?.retest_offered===!0&&(kn==="multiple_choice"||kn==="true_false"||kn==="input")){_e(st,Lt);return}if(zt){if(st?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[At.student_id],test_type:Lt.test_type,original_test_id:st?.test_id||Lt.test_id,subject_id:st?.subject_id||Lt.subject_id,grade:t,class:r})}else _e(st,Lt)}},title:sn?"Click to view retest answers":zt?"Offer retest":"Click to view answers, double-click to edit score",children:[c.jsx("span",{className:zt?"text-red-700":"",children:st.score||0}),"/",c.jsx("span",{children:st.max_score||100}),st.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})()]}):(()=>{const cr=l(st),zt=cr!==null&&cr<50,Gn=cr!==null&&cr>=50&&cr<70,sn=cr!==null&&cr>=70,dn=st?.retest_offered===!0;console.debug("[TeacherResults] Render pill",{studentId:At.student_id,pct:cr,isRed:zt,isYellow:Gn,isGreen:sn,score:st.score,max:st.max_score,percentageField:st.percentage});const kn=`px-1 py-0.5 rounded text-xs font-medium ${cr===null?"text-gray-600":zt?"text-red-600 font-semibold":Gn?"text-yellow-600":"text-green-600"} cursor-pointer hover:opacity-90 pointer-events-auto ${dn?"bg-blue-50 text-blue-700 border border-blue-200":""}`;return c.jsxs(ht.div,{className:kn,style:zt?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onClick:vs=>{vs.preventDefault(),vs.stopPropagation();const Ei=st?.test_type||Lt?.test_type;if(!(Ei==="drawing"||Ei==="speaking")){if(st?.retest_offered===!0&&(Ei==="multiple_choice"||Ei==="true_false"||Ei==="input")){_e(st,Lt);return}if(zt){if(st?.retest_offered){o("Retest is already offered","info");return}const cu=window.getComputedStyle(vs.currentTarget).color;console.debug("[TeacherResults] Red pill clicked -> opening retest modal",{studentId:At.student_id,className:kn,computedColor:cu}),n({failedStudentIds:[At.student_id],test_type:Lt.test_type,original_test_id:st?.test_id||Lt.test_id,subject_id:st?.subject_id||Lt.subject_id,grade:t,class:r})}else _e(st,Lt)}},title:dn?"Click to view retest answers":zt?"Offer retest":"Click to view answers",children:[c.jsx("span",{className:zt?"text-red-700":"",children:st.score}),"/",c.jsx("span",{children:st.max_score}),st.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})(),st.caught_cheating&&st.visibility_change_times&&c.jsxs("span",{className:"text-xs text-red-600",children:["(",st.visibility_change_times,")"]})]}):c.jsx("span",{className:"text-gray-400",children:"-"})},cn)})]},Rr))})})]})})})}),[ds,Te,Or,xe]),Bt=S.useCallback(()=>{if(!L)return null;console.log(" renderResults - results:",L),console.log(" renderResults - results.class:",L.class),console.log(" renderResults - results.unique_tests:",L.unique_tests);const ct=L.class&&Array.isArray(L.class)&&L.class.length>0;if(console.log(" renderResults - hasStudentData:",ct),!ct)return console.log(" renderResults - No student data, showing no students message"),c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"No students found for this class and semester."})});const yt=L.unique_tests||[];return console.log(" renderResults - uniqueTests:",yt),or.current=L,c.jsxs("div",{className:"space-y-6",children:[c.jsxs(ht.div,{className:"bg-gradient-to-r from-red-500 to-pink-500 rounded-lg p-6 text-white",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:[c.jsxs(ht.h2,{className:"text-2xl font-bold mb-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.1},children:["Test Results - Grade M",W,", Class ",W,"/",K,", Semester ",T]}),c.jsxs(ht.p,{className:"text-cyan-100",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.2},children:["Viewing results for ",L.subjects?.length||0," subject(s)"]}),c.jsxs(ht.div,{className:"mt-4 flex gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:[c.jsx("button",{onClick:()=>{const nr=L.unique_tests?.map(At=>At.test_name)||[];ie(new Set(nr))},className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-colors",children:"Collapse All Tests"}),c.jsx("button",{onClick:()=>ie(new Set),className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-colors",children:"Expand All Tests"})]})]}),c.jsxs(ht.div,{className:"bg-white rounded-lg shadow p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},children:[c.jsx(ht.h3,{className:"text-lg font-semibold text-gray-900 mb-4",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.2},children:"Class Results"}),c.jsx("div",{className:"hidden md:block",children:wt("All Subjects",L.class,yt)}),c.jsx("div",{className:"md:hidden",children:Gt("All Subjects",L.class,yt)})]})]})},[L,wt,W,K,T]),Ln=S.useCallback(()=>{if(!L||!L.class||!L.unique_tests)return;const ct=["Student ID","Name","Surname","No.","Nickname",...L.unique_tests.map(cn=>cn.test_name)],yt=L.class.map((cn,bn)=>{const st=[];return st.push(cn.student_id),st.push(cn.name),st.push(cn.surname),st.push(cn.number??bn+1),st.push(cn.nickname||"-"),L.unique_tests.forEach(cr=>{const zt=cn[cr.test_name];zt&&zt.score!==null&&zt.score!==void 0?st.push(`${zt.score}/${zt.max_score}`):st.push("-")}),st}),nr=qb.aoa_to_sheet([ct,...yt]),At=qb.book_new(),Rr=[{wch:10},{wch:15},{wch:15},{wch:6},{wch:12},...L.unique_tests.map(()=>({wch:15}))];nr["!cols"]=Rr,qb.book_append_sheet(At,nr,"Class Results");const Lt=`class-results-${W}-${K}-semester-${T}.xlsx`;Ibe(At,Lt),o("Excel file exported successfully!","success")},[L,W,K,T,o]);return f?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(ln,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Results..."})]})}):g?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Results Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:g}),c.jsx(lt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsx("div",{className:"flex justify-between items-center py-4",children:c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Class Results"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",te?te.toLocaleString():"Never"]})]})})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Class"}),M.length>0?(()=>{const ct=M.reduce((yt,nr)=>{const At=nr.subject||"Unknown Subject";return yt[At]||(yt[At]=[]),yt[At].push(nr),yt},{});return c.jsx("div",{className:"space-y-6",children:Object.entries(ct).map(([yt,nr])=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("h3",{className:"text-md font-semibold text-gray-800 mb-3 flex flex-col sm:flex-row sm:items-center items-center",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),yt]}),c.jsxs("span",{className:"ml-0 sm:ml-2 text-sm text-gray-500 mt-1 sm:mt-0",children:["(",nr.length," classes)"]})]}),c.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:nr.map((At,Rr)=>c.jsxs(lt,{variant:W===At.grade&&K===At.class?"primary":"outline",onClick:()=>mn(At.grade,At.class),className:"px-3 py-1 text-xs font-medium min-w-[60px]",children:[At.grade,"/",At.class]},`${At.grade}-${At.class}-${Rr}`))})]},yt))})})():c.jsx("p",{className:"text-gray-500",children:"No classes available"})]}),K&&Pa(),K&&L&&c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[W," ",K," - Test Results ",Me?`(Term ${He?.terms.find(ct=>ct.id===Me)?.term})`:""]}),c.jsx("div",{className:"flex space-x-3",children:c.jsxs("button",{type:"button",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-2",onClick:Ln,children:[c.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-4 h-4 object-contain"}),c.jsx("span",{className:"font-medium text-sm",children:"Export Excel"})]})})]}),Bt()]}),K&&!L&&c.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-gray-200 border-t-blue-500"}),c.jsx("span",{className:"text-gray-600",children:"Loading results"})]})})})]})}),Ht&&ze&&c.jsx(DS,{children:c.jsx(fH,{drawing:Ht,isOpen:ze,onClose:()=>tt(!1),isTeacherView:!0,onSaveScore:async({resultId:ct,score:yt,maxScore:nr})=>{try{const At=await(window.tokenManager?.getToken()||aa.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");if(!(await fetch(xy.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:At?`Bearer ${At}`:""},body:JSON.stringify({resultId:ct,score:yt,maxScore:nr})})).ok)throw new Error("Failed to save");await _r(T,!0)}catch{o("Failed to save drawing score","error")}}})}),c.jsx(DS,{children:c.jsx(G0e,{isOpen:me,onClose:()=>{je(!1),xt(null),ce(null)},testResult:Qe,questions:rt,isLoadingQuestions:Pe})}),ot&&Dt&&c.jsx(DS,{children:c.jsx(H0e,{result:ot,isOpen:Dt,onClose:()=>Rt(!1),initialTab:ot.__initialTab||"overview",editingSpeakingScore:Pt,tempSpeakingScore:Ye,isSavingSpeakingScore:Ve,onStartSpeakingScoreEdit:Nt,onSaveSpeakingScore:Ur,onCancelSpeakingScoreEdit:Yr,onTempSpeakingScoreChange:Ne})})]})},qbe={getTestPerformance:async(e,t=null)=>{try{await iu.loadAcademicCalendar();const n=iu.getCurrentTerm()?.id;if(!n)throw new Error("No current academic period found");console.log(` Fetching test performance for teacher ${e}, period ${n}, class: ${t||"all"}`);let s=`/.netlify/functions/get-test-performance?teacher_id=${e}&academic_period_id=${n}`;if(t){const[o,l]=t.split("/"),u=o.startsWith("M")?o:`M${o}`;s+=`&grade=${u}&class=${l}`}const a=await fetch(s,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const i=await a.json();if(!i.success)throw new Error(i.error||"Failed to fetch performance data");return console.log(` Performance data loaded: ${i.count} tests`),i.data}catch(r){throw console.error(" Error fetching test performance:",r),r}}};function TV(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=TV(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ms(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=TV(e))&&(n&&(n+=" "),n+=t);return n}var YS={},XS={},hO;function Kbe(){return hO||(hO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(XS)),XS}var JS={},mO;function CV(){return mO||(mO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(JS)),JS}var QS={},gO;function EV(){return gO||(gO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(QS)),QS}var ZS={},pO;function PE(){return pO||(pO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],s=r.length;if(s===0)return n;let a=0,i="",o="",l=!1;for(r.charCodeAt(0)===46&&(n.push(""),a++);a<s;){const u=r[a];o?u==="\\"&&a+1<s?(a++,i+=r[a]):u===o?o="":i+=u:l?u==='"'||u==="'"?o=u:u==="]"?(l=!1,n.push(i),i=""):i+=u:u==="["?(l=!0,i&&(n.push(i),i="")):u==="."?i&&(n.push(i),i=""):i+=u,a++}return i&&n.push(i),n}e.toPath=t})(ZS)),ZS}var xO;function ME(){return xO||(xO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kbe(),r=CV(),n=EV(),s=PE();function a(o,l,u){if(o==null)return u;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?r.isDeepKey(l)?a(o,s.toPath(l),u):u:d}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const d=o[l];return d===void 0?u:d}default:{if(Array.isArray(l))return i(o,l,u);if(Object.is(l?.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?u:d}}}function i(o,l,u){if(l.length===0)return u;let d=o;for(let f=0;f<l.length;f++){if(d==null||t.isUnsafeProperty(l[f]))return u;d=d[l[f]]}return d===void 0?u:d}e.get=a})(YS)),YS}var e6,yO;function Ybe(){return yO||(yO=1,e6=ME().get),e6}var Xbe=Ybe();const h3=Tc(Xbe);var t6={exports:{}},Jn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vO;function Jbe(){if(vO)return Jn;vO=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,g=e?Symbol.for("react.memo"):60115,x=e?Symbol.for("react.lazy"):60116,y=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,T=e?Symbol.for("react.responder"):60118,k=e?Symbol.for("react.scope"):60119;function b(E){if(typeof E=="object"&&E!==null){var P=E.$$typeof;switch(P){case t:switch(E=E.type,E){case l:case u:case n:case a:case s:case f:return E;default:switch(E=E&&E.$$typeof,E){case o:case d:case x:case g:case i:return E;default:return P}}case r:return P}}}function N(E){return b(E)===u}return Jn.AsyncMode=l,Jn.ConcurrentMode=u,Jn.ContextConsumer=o,Jn.ContextProvider=i,Jn.Element=t,Jn.ForwardRef=d,Jn.Fragment=n,Jn.Lazy=x,Jn.Memo=g,Jn.Portal=r,Jn.Profiler=a,Jn.StrictMode=s,Jn.Suspense=f,Jn.isAsyncMode=function(E){return N(E)||b(E)===l},Jn.isConcurrentMode=N,Jn.isContextConsumer=function(E){return b(E)===o},Jn.isContextProvider=function(E){return b(E)===i},Jn.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===t},Jn.isForwardRef=function(E){return b(E)===d},Jn.isFragment=function(E){return b(E)===n},Jn.isLazy=function(E){return b(E)===x},Jn.isMemo=function(E){return b(E)===g},Jn.isPortal=function(E){return b(E)===r},Jn.isProfiler=function(E){return b(E)===a},Jn.isStrictMode=function(E){return b(E)===s},Jn.isSuspense=function(E){return b(E)===f},Jn.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===n||E===u||E===a||E===s||E===f||E===h||typeof E=="object"&&E!==null&&(E.$$typeof===x||E.$$typeof===g||E.$$typeof===i||E.$$typeof===o||E.$$typeof===d||E.$$typeof===v||E.$$typeof===T||E.$$typeof===k||E.$$typeof===y)},Jn.typeOf=b,Jn}var wO;function Qbe(){return wO||(wO=1,t6.exports=Jbe()),t6.exports}Qbe();var hc=e=>e===0?0:e>0?1:-1,_c=e=>typeof e=="number"&&e!=+e,Jh=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,nn=e=>(typeof e=="number"||e instanceof Number)&&!_c(e),Ju=e=>nn(e)||typeof e=="string",Zbe=0,Bv=e=>{var t=++Zbe;return"".concat(e||"").concat(t)},Wf=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!nn(t)&&typeof t!="string")return n;var a;if(Jh(t)){if(r==null)return n;var i=t.indexOf("%");a=r*parseFloat(t.slice(0,i))/100}else a=+t;return _c(a)&&(a=n),s&&r!=null&&a>r&&(a=r),a},NV=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function zd(e,t,r){return nn(e)&&nn(t)?e+r*(t-e):t}function AV(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):h3(n,t))===r)}var Si=e=>e===null||typeof e>"u",FE=e=>Si(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),e4e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function DE(e){if(typeof e!="string")return!1;var t=e4e;return t.includes(e)}var t4e=["viewBox","children"],bO=["points","pathLength"],r6={svg:t4e,polygon:bO,polyline:bO},OE=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(S.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{DE(s)&&(n[s]=(a=>r[s](r,a)))}),n},r4e=(e,t,r)=>n=>(e(t,r,n),null),n4e=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var a=e[s];DE(s)&&typeof a=="function"&&(n||(n={}),n[s]=r4e(a,t,r))}),n},s4e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function jV(e){if(typeof e!="string")return!1;var t=s4e;return t.includes(e)}function Qm(e){var t=Object.entries(e).filter(r=>{var[n]=r;return jV(n)});return Object.fromEntries(t)}var PV=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,a4e=(e,t,r,n)=>{var s;if(typeof t=="symbol"||typeof t=="number")return!0;var a=(s=n&&r6?.[n])!==null&&s!==void 0?s:[],i=t.startsWith("data-"),o=typeof e!="function"&&(!!n&&a.includes(t)||jV(t)),l=!!r&&DE(t);return i||o||l},Ji=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(S.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(a=>{var i;a4e((i=n)===null||i===void 0?void 0:i[a],a,t,r)&&(s[a]=n[a])}),s},i4e=["children","width","height","viewBox","className","style","title","desc"];function Q8(){return Q8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q8.apply(null,arguments)}function o4e(e,t){if(e==null)return{};var r,n,s=l4e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function l4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var MV=S.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:a,className:i,style:o,title:l,desc:u}=e,d=o4e(e,i4e),f=a||{width:n,height:s,x:0,y:0},h=Ms("recharts-surface",i);return S.createElement("svg",Q8({},Ji(d,!0,"svg"),{className:h,width:n,height:s,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),S.createElement("title",null,l),S.createElement("desc",null,u),r)}),c4e=["children","className"];function Z8(){return Z8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z8.apply(null,arguments)}function u4e(e,t){if(e==null)return{};var r,n,s=d4e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function d4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var S1=S.forwardRef((e,t)=>{var{children:r,className:n}=e,s=u4e(e,c4e),a=Ms("recharts-layer",n);return S.createElement("g",Z8({className:a},Ji(s,!0),{ref:t}),r)}),f4e=S.createContext(null);function sa(e){return function(){return e}}const e7=Math.PI,t7=2*e7,zh=1e-6,h4e=t7-zh;function FV(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function m4e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return FV;const r=10**t;return function(n){this._+=n[0];for(let s=1,a=n.length;s<a;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class g4e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?FV:m4e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,a,i){this._append`C${+t},${+r},${+n},${+s},${this._x1=+a},${this._y1=+i}`}arcTo(t,r,n,s,a){if(t=+t,r=+r,n=+n,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let i=this._x1,o=this._y1,l=n-t,u=s-r,d=i-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>zh)if(!(Math.abs(f*l-u*d)>zh)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let g=n-i,x=s-o,y=l*l+u*u,v=g*g+x*x,T=Math.sqrt(y),k=Math.sqrt(h),b=a*Math.tan((e7-Math.acos((y+h-v)/(2*T*k)))/2),N=b/k,E=b/T;Math.abs(N-1)>zh&&this._append`L${t+N*d},${r+N*f}`,this._append`A${a},${a},0,0,${+(f*g>d*x)},${this._x1=t+E*l},${this._y1=r+E*u}`}}arc(t,r,n,s,a,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(s),l=n*Math.sin(s),u=t+o,d=r+l,f=1^i,h=i?s-a:a-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>zh||Math.abs(this._y1-d)>zh)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%t7+t7),h>h4e?this._append`A${n},${n},0,1,${f},${t-o},${r-l}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>zh&&this._append`A${n},${n},0,${+(h>=e7)},${f},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function DV(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new g4e(t)}function IE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function OV(e){this._context=e}OV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function m3(e){return new OV(e)}function IV(e){return e[0]}function RV(e){return e[1]}function LV(e,t){var r=sa(!0),n=null,s=m3,a=null,i=DV(o);e=typeof e=="function"?e:e===void 0?IV:sa(e),t=typeof t=="function"?t:t===void 0?RV:sa(t);function o(l){var u,d=(l=IE(l)).length,f,h=!1,g;for(n==null&&(a=s(g=i())),u=0;u<=d;++u)!(u<d&&r(f=l[u],u,l))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(f,u,l),+t(f,u,l));if(g)return a=null,g+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:sa(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:sa(+l),o):t},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:sa(!!l),o):r},o.curve=function(l){return arguments.length?(s=l,n!=null&&(a=s(n)),o):s},o.context=function(l){return arguments.length?(l==null?n=a=null:a=s(n=l),o):n},o}function wb(e,t,r){var n=null,s=sa(!0),a=null,i=m3,o=null,l=DV(u);e=typeof e=="function"?e:e===void 0?IV:sa(+e),t=typeof t=="function"?t:sa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?RV:sa(+r);function u(f){var h,g,x,y=(f=IE(f)).length,v,T=!1,k,b=new Array(y),N=new Array(y);for(a==null&&(o=i(k=l())),h=0;h<=y;++h){if(!(h<y&&s(v=f[h],h,f))===T)if(T=!T)g=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),x=h-1;x>=g;--x)o.point(b[x],N[x]);o.lineEnd(),o.areaEnd()}T&&(b[h]=+e(v,h,f),N[h]=+t(v,h,f),o.point(n?+n(v,h,f):b[h],r?+r(v,h,f):N[h]))}if(k)return o=null,k+""||null}function d(){return LV().defined(s).curve(i).context(a)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:sa(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:sa(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:sa(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:sa(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:sa(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:sa(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:sa(!!f),u):s},u.curve=function(f){return arguments.length?(i=f,a!=null&&(o=i(a)),u):i},u.context=function(f){return arguments.length?(f==null?a=o=null:o=i(a=f),u):a},u}class BV{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function p4e(e){return new BV(e,!0)}function x4e(e){return new BV(e,!1)}function W4(){}function H4(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function $V(e){this._context=e}$V.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:H4(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:H4(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function y4e(e){return new $V(e)}function zV(e){this._context=e}zV.prototype={areaStart:W4,areaEnd:W4,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:H4(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function v4e(e){return new zV(e)}function UV(e){this._context=e}UV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:H4(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function w4e(e){return new UV(e)}function WV(e){this._context=e}WV.prototype={areaStart:W4,areaEnd:W4,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function b4e(e){return new WV(e)}function _O(e){return e<0?-1:1}function SO(e,t,r){var n=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(n||s<0&&-0),i=(r-e._y1)/(s||n<0&&-0),o=(a*s+i*n)/(n+s);return(_O(a)+_O(i))*Math.min(Math.abs(a),Math.abs(i),.5*Math.abs(o))||0}function kO(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function n6(e,t,r){var n=e._x0,s=e._y0,a=e._x1,i=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,s+o*t,a-o,i-o*r,a,i)}function G4(e){this._context=e}G4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:n6(this,this._t0,kO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,n6(this,kO(this,r=SO(this,e,t)),r);break;default:n6(this,this._t0,r=SO(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function HV(e){this._context=new GV(e)}(HV.prototype=Object.create(G4.prototype)).point=function(e,t){G4.prototype.point.call(this,t,e)};function GV(e){this._context=e}GV.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,a){this._context.bezierCurveTo(t,e,n,r,a,s)}};function _4e(e){return new G4(e)}function S4e(e){return new HV(e)}function VV(e){this._context=e}VV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=TO(e),s=TO(t),a=0,i=1;i<r;++a,++i)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function TO(e){var t,r=e.length-1,n,s=new Array(r),a=new Array(r),i=new Array(r);for(s[0]=0,a[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,a[t]=4,i[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,a[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/a[t-1],a[t]-=n,i[t]-=n*i[t-1];for(s[r-1]=i[r-1]/a[r-1],t=r-2;t>=0;--t)s[t]=(i[t]-s[t+1])/a[t];for(a[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function k4e(e){return new VV(e)}function g3(e,t){this._context=e,this._t=t}g3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function T4e(e){return new g3(e,.5)}function C4e(e){return new g3(e,0)}function E4e(e){return new g3(e,1)}function qp(e,t){if((i=e.length)>1)for(var r=1,n,s,a=e[t[0]],i,o=a.length;r<i;++r)for(s=a,a=e[t[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function r7(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function N4e(e,t){return e[t]}function A4e(e){const t=[];return t.key=e,t}function j4e(){var e=sa([]),t=r7,r=qp,n=N4e;function s(a){var i=Array.from(e.apply(this,arguments),A4e),o,l=i.length,u=-1,d;for(const f of a)for(o=0,++u;o<l;++o)(i[o][u]=[0,+n(f,i[o].key,u,a)]).data=f;for(o=0,d=IE(t(i));o<l;++o)i[d[o]].index=o;return r(i,d),i}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:sa(Array.from(a)),s):e},s.value=function(a){return arguments.length?(n=typeof a=="function"?a:sa(+a),s):n},s.order=function(a){return arguments.length?(t=a==null?r7:typeof a=="function"?a:sa(Array.from(a)),s):t},s.offset=function(a){return arguments.length?(r=a??qp,s):r},s}function P4e(e,t){if((n=e.length)>0){for(var r,n,s=0,a=e[0].length,i;s<a;++s){for(i=r=0;r<n;++r)i+=e[r][s][1]||0;if(i)for(r=0;r<n;++r)e[r][s][1]/=i}qp(e,t)}}function M4e(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,a=n.length;r<a;++r){for(var i=0,o=0;i<s;++i)o+=e[i][r][1]||0;n[r][1]+=n[r][0]=-o/2}qp(e,t)}}function F4e(e,t){if(!(!((i=e.length)>0)||!((a=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,a,i;n<a;++n){for(var o=0,l=0,u=0;o<i;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,g=(f-h)/2,x=0;x<o;++x){var y=e[t[x]],v=y[n][1]||0,T=y[n-1][1]||0;g+=v-T}l+=f,u+=g*f}s[n-1][1]+=s[n-1][0]=r,l&&(r-=u/l)}s[n-1][1]+=s[n-1][0]=r,qp(e,t)}}var s6={},a6={},CO;function D4e(){return CO||(CO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let a=0;a<r.length;a++){const i=r[a],o=n(i);s.has(o)||s.set(o,i)}return Array.from(s.values())}e.uniqBy=t})(a6)),a6}var i6={},EO;function qV(){return EO||(EO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(i6)),i6}var o6={},l6={},c6={},NO;function O4e(){return NO||(NO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(c6)),c6}var AO;function RE(){return AO||(AO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O4e();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(l6)),l6}var u6={},jO;function I4e(){return jO||(jO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(u6)),u6}var PO;function R4e(){return PO||(PO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RE(),r=I4e();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(o6)),o6}var d6={},f6={},MO;function L4e(){return MO||(MO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ME();function r(n){return function(s){return t.get(s,n)}}e.property=r})(f6)),f6}var h6={},m6={},g6={},p6={},FO;function KV(){return FO||(FO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(p6)),p6}var x6={},DO;function YV(){return DO||(DO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(x6)),x6}var y6={},OO;function XV(){return OO||(OO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(y6)),y6}var IO;function B4e(){return IO||(IO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LE(),r=KV(),n=YV(),s=XV();function a(f,h,g){return typeof g!="function"?t.isMatch(f,h):i(f,h,function x(y,v,T,k,b,N){const E=g(y,v,T,k,b,N);return E!==void 0?!!E:i(y,v,x,N)},new Map)}function i(f,h,g,x){if(h===f)return!0;switch(typeof h){case"object":return o(f,h,g,x);case"function":return Object.keys(h).length>0?i(f,{...h},g,x):s.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:s.eq(f,h)}}function o(f,h,g,x){if(h==null)return!0;if(Array.isArray(h))return u(f,h,g,x);if(h instanceof Map)return l(f,h,g,x);if(h instanceof Set)return d(f,h,g,x);const y=Object.keys(h);if(f==null)return y.length===0;if(y.length===0)return!0;if(x&&x.has(h))return x.get(h)===f;x&&x.set(h,f);try{for(let v=0;v<y.length;v++){const T=y[v];if(!n.isPrimitive(f)&&!(T in f)||h[T]===void 0&&f[T]!==void 0||h[T]===null&&f[T]!==null||!g(f[T],h[T],T,f,h,x))return!1}return!0}finally{x&&x.delete(h)}}function l(f,h,g,x){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[y,v]of h.entries()){const T=f.get(y);if(g(T,v,y,f,h,x)===!1)return!1}return!0}function u(f,h,g,x){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const y=new Set;for(let v=0;v<h.length;v++){const T=h[v];let k=!1;for(let b=0;b<f.length;b++){if(y.has(b))continue;const N=f[b];let E=!1;if(g(N,T,v,f,h,x)&&(E=!0),E){y.add(b),k=!0;break}}if(!k)return!1}return!0}function d(f,h,g,x){return h.size===0?!0:f instanceof Set?u([...f],[...h],g,x):!1}e.isMatchWith=a,e.isSetMatch=d})(g6)),g6}var RO;function LE(){return RO||(RO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=B4e();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(m6)),m6}var v6={},w6={},b6={},LO;function $4e(){return LO||(LO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(b6)),b6}var _6={},BO;function JV(){return BO||(BO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(_6)),_6}var S6={},$O;function QV(){return $O||($O=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",a="[object Arguments]",i="[object Symbol]",o="[object Date]",l="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",g="[object Object]",x="[object Error]",y="[object DataView]",v="[object Uint8Array]",T="[object Uint8ClampedArray]",k="[object Uint16Array]",b="[object Uint32Array]",N="[object BigUint64Array]",E="[object Int8Array]",P="[object Int16Array]",M="[object Int32Array]",j="[object BigInt64Array]",A="[object Float32Array]",O="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=j,e.bigUint64ArrayTag=N,e.booleanTag=s,e.dataViewTag=y,e.dateTag=o,e.errorTag=x,e.float32ArrayTag=A,e.float64ArrayTag=O,e.functionTag=f,e.int16ArrayTag=P,e.int32ArrayTag=M,e.int8ArrayTag=E,e.mapTag=l,e.numberTag=n,e.objectTag=g,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=i,e.uint16ArrayTag=k,e.uint32ArrayTag=b,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=T})(S6)),S6}var k6={},zO;function z4e(){return zO||(zO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(k6)),k6}var UO;function ZV(){return UO||(UO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$4e(),r=JV(),n=QV(),s=YV(),a=z4e();function i(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,g=new Map,x=void 0){const y=x?.(d,f,h,g);if(y!==void 0)return y;if(s.isPrimitive(d))return d;if(g.has(d))return g.get(d);if(Array.isArray(d)){const v=new Array(d.length);g.set(d,v);for(let T=0;T<d.length;T++)v[T]=o(d[T],T,h,g,x);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;g.set(d,v);for(const[T,k]of d)v.set(T,o(k,T,h,g,x));return v}if(d instanceof Set){const v=new Set;g.set(d,v);for(const T of d)v.add(o(T,void 0,h,g,x));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);g.set(d,v);for(let T=0;T<d.length;T++)v[T]=o(d[T],T,h,g,x);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return g.set(d,v),l(v,d,h,g,x),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return g.set(d,v),l(v,d,h,g,x),v}if(d instanceof Blob){const v=new Blob([d],{type:d.type});return g.set(d,v),l(v,d,h,g,x),v}if(d instanceof Error){const v=new d.constructor;return g.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,l(v,d,h,g,x),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return g.set(d,v),l(v,d,h,g,x),v}return d}function l(d,f,h=d,g,x){const y=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<y.length;v++){const T=y[v],k=Object.getOwnPropertyDescriptor(d,T);(k==null||k.writable)&&(d[T]=o(f[T],T,h,g,x))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=i,e.cloneDeepWithImpl=o,e.copyProperties=l})(w6)),w6}var WO;function U4e(){return WO||(WO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZV();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(v6)),v6}var HO;function W4e(){return HO||(HO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LE(),r=U4e();function n(s){return s=r.cloneDeep(s),a=>t.isMatch(a,s)}e.matches=n})(h6)),h6}var T6={},C6={},E6={},GO;function H4e(){return GO||(GO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZV(),r=QV();function n(s,a){return t.cloneDeepWith(s,(i,o,l,u)=>{const d=a?.(i,o,l,u);if(d!==void 0)return d;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new s.constructor(s?.valueOf());return t.copyProperties(f,s),f}case r.argumentsTag:{const f={};return t.copyProperties(f,s),f.length=s.length,f[Symbol.iterator]=s[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(E6)),E6}var VO;function G4e(){return VO||(VO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H4e();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(C6)),C6}var N6={},A6={},qO;function eq(){return qO||(qO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(A6)),A6}var j6={},KO;function V4e(){return KO||(KO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JV();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(j6)),j6}var YO;function q4e(){return YO||(YO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CV(),r=eq(),n=V4e(),s=PE();function a(i,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&t.isDeepKey(o)&&i?.[o]==null?l=s.toPath(o):l=[o],l.length===0)return!1;let u=i;for(let d=0;d<l.length;d++){const f=l[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=a})(N6)),N6}var XO;function K4e(){return XO||(XO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LE(),r=EV(),n=G4e(),s=ME(),a=q4e();function i(o,l){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return l=n.cloneDeep(l),function(u){const d=s.get(u,o);return d===void 0?a.has(u,o):l===void 0?d===void 0:t.isMatch(d,l)}}e.matchesProperty=i})(T6)),T6}var JO;function Y4e(){return JO||(JO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qV(),r=L4e(),n=W4e(),s=K4e();function a(i){if(i==null)return t.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?s.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}e.iteratee=a})(d6)),d6}var QO;function X4e(){return QO||(QO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D4e(),r=qV(),n=R4e(),s=Y4e();function a(i,o=r.identity){return n.isArrayLikeObject(i)?t.uniqBy(Array.from(i),s.iteratee(o)):[]}e.uniqBy=a})(s6)),s6}var P6,ZO;function J4e(){return ZO||(ZO=1,P6=X4e().uniqBy),P6}var Q4e=J4e();const eI=Tc(Q4e);function Z4e(e,t,r){return t===!0?eI(e,r):typeof t=="function"?eI(e,t):e}var M6={exports:{}},F6={},D6={exports:{}},O6={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tI;function e_e(){if(tI)return O6;tI=1;var e=$m();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,a=e.useLayoutEffect,i=e.useDebugValue;function o(f,h){var g=h(),x=n({inst:{value:g,getSnapshot:h}}),y=x[0].inst,v=x[1];return a(function(){y.value=g,y.getSnapshot=h,l(y)&&v({inst:y})},[f,g,h]),s(function(){return l(y)&&v({inst:y}),f(function(){l(y)&&v({inst:y})})},[f]),i(g),g}function l(f){var h=f.getSnapshot;f=f.value;try{var g=h();return!r(f,g)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return O6.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,O6}var rI;function t_e(){return rI||(rI=1,D6.exports=e_e()),D6.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nI;function r_e(){if(nI)return F6;nI=1;var e=$m(),t=t_e();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,a=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return F6.useSyncExternalStoreWithSelector=function(u,d,f,h,g){var x=a(null);if(x.current===null){var y={hasValue:!1,value:null};x.current=y}else y=x.current;x=o(function(){function T(P){if(!k){if(k=!0,b=P,P=h(P),g!==void 0&&y.hasValue){var M=y.value;if(g(M,P))return N=M}return N=P}if(M=N,n(b,P))return M;var j=h(P);return g!==void 0&&g(M,j)?(b=P,M):(b=P,N=j)}var k=!1,b,N,E=f===void 0?null:f;return[function(){return T(d())},E===null?void 0:function(){return T(E())}]},[d,f,h,g]);var v=s(u,x[0],x[1]);return i(function(){y.hasValue=!0,y.value=v},[v]),l(v),v},F6}var sI;function n_e(){return sI||(sI=1,M6.exports=r_e()),M6.exports}var s_e=n_e(),BE=S.createContext(null),a_e=e=>e,Go=()=>{var e=S.useContext(BE);return e?e.store.dispatch:a_e},Kb=()=>{},i_e=()=>Kb,o_e=(e,t)=>e===t;function qr(e){var t=S.useContext(BE);return s_e.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:i_e,t?t.store.getState:Kb,t?t.store.getState:Kb,t?e:Kb,o_e)}function l_e(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function c_e(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function u_e(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var aI=e=>Array.isArray(e)?e:[e];function d_e(e){const t=Array.isArray(e[0])?e[0]:e;return u_e(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function f_e(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var h_e=class{constructor(e){this.value=e}deref(){return this.value}},m_e=typeof WeakRef<"u"?WeakRef:h_e,g_e=0,iI=1;function bb(){return{s:g_e,v:void 0,o:null,p:null}}function tq(e,t={}){let r=bb();const{resultEqualityCheck:n}=t;let s,a=0;function i(){let o=r;const{length:l}=arguments;for(let f=0,h=l;f<h;f++){const g=arguments[f];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=o.o;x===null&&(o.o=x=new WeakMap);const y=x.get(g);y===void 0?(o=bb(),x.set(g,o)):o=y}else{let x=o.p;x===null&&(o.p=x=new Map);const y=x.get(g);y===void 0?(o=bb(),x.set(g,o)):o=y}}const u=o;let d;if(o.s===iI)d=o.v;else if(d=e.apply(null,arguments),a++,n){const f=s?.deref?.()??s;f!=null&&n(f,d)&&(d=f,a!==0&&a--),s=typeof d=="object"&&d!==null||typeof d=="function"?new m_e(d):d}return u.s=iI,u.v=d,d}return i.clearCache=()=>{r=bb(),i.resetResultsCount()},i.resultsCount=()=>a,i.resetResultsCount=()=>{a=0},i}function p_e(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let a=0,i=0,o,l={},u=s.pop();typeof u=="object"&&(l=u,u=s.pop()),l_e(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...l},{memoize:f,memoizeOptions:h=[],argsMemoize:g=tq,argsMemoizeOptions:x=[]}=d,y=aI(h),v=aI(x),T=d_e(s),k=f(function(){return a++,u.apply(null,arguments)},...y),b=g(function(){i++;const E=f_e(T,arguments);return o=k.apply(null,E),o},...v);return Object.assign(b,{resultFunc:u,memoizedResultFunc:k,dependencies:T,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:g})};return Object.assign(n,{withTypes:()=>n}),n}var Ft=p_e(tq),x_e=Object.assign((e,t=Ft)=>{c_e(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((i,o,l)=>(i[r[l]]=o,i),{}))},{withTypes:()=>x_e}),I6={},R6={},L6={},oI;function y_e(){return oI||(oI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,a)=>{if(n!==s){const i=t(n),o=t(s);if(i===o&&i===0){if(n<s)return a==="desc"?1:-1;if(n>s)return a==="desc"?-1:1}return a==="desc"?o-i:i-o}return 0};e.compareValues=r})(L6)),L6}var B6={},$6={},lI;function rq(){return lI||(lI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})($6)),$6}var cI;function v_e(){return cI||(cI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rq(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(a,i){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||i!=null&&Object.hasOwn(i,a)}e.isKey=s})(B6)),B6}var uI;function w_e(){return uI||(uI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=y_e(),r=v_e(),n=PE();function s(a,i,o,l){if(a==null)return[];o=l?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(g=>String(g));const u=(g,x)=>{let y=g;for(let v=0;v<x.length&&y!=null;++v)y=y[x[v]];return y},d=(g,x)=>x==null||g==null?x:typeof g=="object"&&"key"in g?Object.hasOwn(x,g.key)?x[g.key]:u(x,g.path):typeof g=="function"?g(x):Array.isArray(g)?u(x,g):typeof x=="object"?x[g]:x,f=i.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||r.isKey(g)?g:{key:g,path:n.toPath(g)}));return a.map(g=>({original:g,criteria:f.map(x=>d(x,g))})).slice().sort((g,x)=>{for(let y=0;y<f.length;y++){const v=t.compareValues(g.criteria[y],x.criteria[y],o[y]);if(v!==0)return v}return 0}).map(g=>g.original)}e.orderBy=s})(R6)),R6}var z6={},dI;function b_e(){return dI||(dI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],a=Math.floor(n),i=(o,l)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&l<a?i(d,l+1):s.push(d)}};return i(r,0),s}e.flatten=t})(z6)),z6}var U6={},fI;function nq(){return fI||(fI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eq(),r=RE(),n=KV(),s=XV();function a(i,o,l){return n.isObject(l)&&(typeof o=="number"&&r.isArrayLike(l)&&t.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?s.eq(l[o],i):!1}e.isIterateeCall=a})(U6)),U6}var hI;function __e(){return hI||(hI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w_e(),r=b_e(),n=nq();function s(a,...i){const o=i.length;return o>1&&n.isIterateeCall(a,i[0],i[1])?i=[]:o>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(a,r.flatten(i),["asc"])}e.sortBy=s})(I6)),I6}var W6,mI;function S_e(){return mI||(mI=1,W6=__e().sortBy),W6}var k_e=S_e();const p3=Tc(k_e);var sq=e=>e.legend.settings,T_e=e=>e.legend.size,C_e=e=>e.legend.payload;Ft([C_e,sq],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?p3(n,r):n});var _b=1;function E_e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=S.useState({height:0,left:0,top:0,width:0}),n=S.useCallback(s=>{if(s!=null){var a=s.getBoundingClientRect(),i={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(i.height-t.height)>_b||Math.abs(i.left-t.left)>_b||Math.abs(i.top-t.top)>_b||Math.abs(i.width-t.width)>_b)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Bi(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var N_e=typeof Symbol=="function"&&Symbol.observable||"@@observable",gI=N_e,H6=()=>Math.random().toString(36).substring(7).split("").join("."),A_e={INIT:`@@redux/INIT${H6()}`,REPLACE:`@@redux/REPLACE${H6()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${H6()}`},V4=A_e;function $E(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function aq(e,t,r){if(typeof e!="function")throw new Error(Bi(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Bi(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Bi(1));return r(aq)(e,t)}let n=e,s=t,a=new Map,i=a,o=0,l=!1;function u(){i===a&&(i=new Map,a.forEach((v,T)=>{i.set(T,v)}))}function d(){if(l)throw new Error(Bi(3));return s}function f(v){if(typeof v!="function")throw new Error(Bi(4));if(l)throw new Error(Bi(5));let T=!0;u();const k=o++;return i.set(k,v),function(){if(T){if(l)throw new Error(Bi(6));T=!1,u(),i.delete(k),a=null}}}function h(v){if(!$E(v))throw new Error(Bi(7));if(typeof v.type>"u")throw new Error(Bi(8));if(typeof v.type!="string")throw new Error(Bi(17));if(l)throw new Error(Bi(9));try{l=!0,s=n(s,v)}finally{l=!1}return(a=i).forEach(k=>{k()}),v}function g(v){if(typeof v!="function")throw new Error(Bi(10));n=v,h({type:V4.REPLACE})}function x(){const v=f;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(Bi(11));function k(){const N=T;N.next&&N.next(d())}return k(),{unsubscribe:v(k)}},[gI](){return this}}}return h({type:V4.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:g,[gI]:x}}function j_e(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:V4.INIT})>"u")throw new Error(Bi(12));if(typeof r(void 0,{type:V4.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Bi(13))})}function iq(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const i=t[a];typeof e[i]=="function"&&(r[i]=e[i])}const n=Object.keys(r);let s;try{j_e(r)}catch(a){s=a}return function(i={},o){if(s)throw s;let l=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],g=i[f],x=h(g,o);if(typeof x>"u")throw o&&o.type,new Error(Bi(14));u[f]=x,l=l||x!==g}return l=l||n.length!==Object.keys(i).length,l?u:i}}function q4(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function P_e(...e){return t=>(r,n)=>{const s=t(r,n);let a=()=>{throw new Error(Bi(15))};const i={getState:s.getState,dispatch:(l,...u)=>a(l,...u)},o=e.map(l=>l(i));return a=q4(...o)(s.dispatch),{...s,dispatch:a}}}function oq(e){return $E(e)&&"type"in e&&typeof e.type=="string"}var lq=Symbol.for("immer-nothing"),pI=Symbol.for("immer-draftable"),Ll=Symbol.for("immer-state");function Xc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Kp=Object.getPrototypeOf;function Om(e){return!!e&&!!e[Ll]}function u0(e){return e?cq(e)||Array.isArray(e)||!!e[pI]||!!e.constructor?.[pI]||N2(e)||y3(e):!1}var M_e=Object.prototype.constructor.toString();function cq(e){if(!e||typeof e!="object")return!1;const t=Kp(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===M_e}function K4(e,t){x3(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function x3(e){const t=e[Ll];return t?t.type_:Array.isArray(e)?1:N2(e)?2:y3(e)?3:0}function n7(e,t){return x3(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function uq(e,t,r){const n=x3(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function F_e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function N2(e){return e instanceof Map}function y3(e){return e instanceof Set}function Uh(e){return e.copy_||e.base_}function s7(e,t){if(N2(e))return new Map(e);if(y3(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=cq(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Ll];let s=Reflect.ownKeys(n);for(let a=0;a<s.length;a++){const i=s[a],o=n[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Kp(e),n)}else{const n=Kp(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function zE(e,t=!1){return v3(e)||Om(e)||!u0(e)||(x3(e)>1&&Object.defineProperties(e,{set:{value:Sb},add:{value:Sb},clear:{value:Sb},delete:{value:Sb}}),Object.freeze(e),t&&Object.values(e).forEach(r=>zE(r,!0))),e}function Sb(){Xc(2)}function v3(e){return Object.isFrozen(e)}var D_e={};function Im(e){const t=D_e[e];return t||Xc(0,e),t}var $v;function dq(){return $v}function O_e(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function xI(e,t){t&&(Im("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function a7(e){i7(e),e.drafts_.forEach(I_e),e.drafts_=null}function i7(e){e===$v&&($v=e.parent_)}function yI(e){return $v=O_e($v,e)}function I_e(e){const t=e[Ll];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function vI(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Ll].modified_&&(a7(t),Xc(4)),u0(e)&&(e=Y4(t,e),t.parent_||X4(t,e)),t.patches_&&Im("Patches").generateReplacementPatches_(r[Ll].base_,e,t.patches_,t.inversePatches_)):e=Y4(t,r,[]),a7(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==lq?e:void 0}function Y4(e,t,r){if(v3(t))return t;const n=t[Ll];if(!n)return K4(t,(s,a)=>wI(e,n,t,s,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return X4(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let a=s,i=!1;n.type_===3&&(a=new Set(s),s.clear(),i=!0),K4(a,(o,l)=>wI(e,n,s,o,l,r,i)),X4(e,s,!1),r&&e.patches_&&Im("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function wI(e,t,r,n,s,a,i){if(Om(s)){const o=a&&t&&t.type_!==3&&!n7(t.assigned_,n)?a.concat(n):void 0,l=Y4(e,s,o);if(uq(r,n,l),Om(l))e.canAutoFreeze_=!1;else return}else i&&r.add(s);if(u0(s)&&!v3(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Y4(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(N2(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&X4(e,s)}}function X4(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&zE(t,r)}function R_e(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:dq(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,a=UE;r&&(s=[n],a=zv);const{revoke:i,proxy:o}=Proxy.revocable(s,a);return n.draft_=o,n.revoke_=i,o}var UE={get(e,t){if(t===Ll)return e;const r=Uh(e);if(!n7(r,t))return L_e(e,r,t);const n=r[t];return e.finalized_||!u0(n)?n:n===G6(e.base_,t)?(V6(e),e.copy_[t]=l7(n,e)):n},has(e,t){return t in Uh(e)},ownKeys(e){return Reflect.ownKeys(Uh(e))},set(e,t,r){const n=fq(Uh(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=G6(Uh(e),t),a=s?.[Ll];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(F_e(r,s)&&(r!==void 0||n7(e.base_,t)))return!0;V6(e),o7(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return G6(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,V6(e),o7(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Uh(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Xc(11)},getPrototypeOf(e){return Kp(e.base_)},setPrototypeOf(){Xc(12)}},zv={};K4(UE,(e,t)=>{zv[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});zv.deleteProperty=function(e,t){return zv.set.call(this,e,t,void 0)};zv.set=function(e,t,r){return UE.set.call(this,e[0],t,r,e[0])};function G6(e,t){const r=e[Ll];return(r?Uh(r):e)[t]}function L_e(e,t,r){const n=fq(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function fq(e,t){if(!(t in e))return;let r=Kp(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Kp(r)}}function o7(e){e.modified_||(e.modified_=!0,e.parent_&&o7(e.parent_))}function V6(e){e.copy_||(e.copy_=s7(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var B_e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const i=this;return function(l=a,...u){return i.produce(l,d=>r.call(this,d,...u))}}typeof r!="function"&&Xc(6),n!==void 0&&typeof n!="function"&&Xc(7);let s;if(u0(t)){const a=yI(this),i=l7(t,void 0);let o=!0;try{s=r(i),o=!1}finally{o?a7(a):i7(a)}return xI(a,n),vI(s,a)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===lq&&(s=void 0),this.autoFreeze_&&zE(s,!0),n){const a=[],i=[];Im("Patches").generateReplacementPatches_(t,s,a,i),n(a,i)}return s}else Xc(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,l=>t(l,...o));let n,s;return[this.produce(t,r,(i,o)=>{n=i,s=o}),n,s]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){u0(e)||Xc(8),Om(e)&&(e=e0(e));const t=yI(this),r=l7(e,void 0);return r[Ll].isManual_=!0,i7(t),r}finishDraft(e,t){const r=e&&e[Ll];(!r||!r.isManual_)&&Xc(9);const{scope_:n}=r;return xI(n,t),vI(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Im("Patches").applyPatches_;return Om(e)?n(e,t):this.produce(e,s=>n(s,t))}};function l7(e,t){const r=N2(e)?Im("MapSet").proxyMap_(e,t):y3(e)?Im("MapSet").proxySet_(e,t):R_e(e,t);return(t?t.scope_:dq()).drafts_.push(r),r}function e0(e){return Om(e)||Xc(10,e),hq(e)}function hq(e){if(!u0(e)||v3(e))return e;const t=e[Ll];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=s7(e,t.scope_.immer_.useStrictShallowCopy_)}else r=s7(e,!0);return K4(r,(n,s)=>{uq(r,n,hq(s))}),t&&(t.finalized_=!1),r}var $_e=new B_e,mq=$_e.produce;function gq(e){return({dispatch:r,getState:n})=>s=>a=>typeof a=="function"?a(r,n,e):s(a)}var z_e=gq(),U_e=gq,W_e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?q4:q4.apply(null,arguments)};function Sc(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Ol(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>oq(n)&&n.type===e,r}var pq=class Oy extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Oy.prototype)}static get[Symbol.species](){return Oy}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Oy(...t[0].concat(this)):new Oy(...t.concat(this))}};function bI(e){return u0(e)?mq(e,()=>{}):e}function kb(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function H_e(e){return typeof e=="boolean"}var G_e=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=t??{};let i=new pq;return r&&(H_e(r)?i.push(z_e):i.push(U_e(r.extraArgument))),i},V_e="RTK_autoBatch",_I=e=>t=>{setTimeout(t,e)},q_e=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,a=!1,i=!1;const o=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:_I(10):e.type==="callback"?e.queueNotification:_I(e.timeout),u=()=>{i=!1,a&&(a=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>s&&d(),h=n.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){try{return s=!d?.meta?.[V_e],a=!s,a&&(i||(i=!0,l(u))),n.dispatch(d)}finally{s=!0}}})},K_e=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new pq(e);return n&&s.push(q_e(typeof n=="object"?n:void 0)),s};function Y_e(e){const t=G_e(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:a=void 0,enhancers:i=void 0}=e||{};let o;if(typeof r=="function")o=r;else if($E(r))o=iq(r);else throw new Error(Ol(1));let l;typeof n=="function"?l=n(t):l=t();let u=q4;s&&(u=W_e({trace:!1,...typeof s=="object"&&s}));const d=P_e(...l),f=K_e(d);let h=typeof i=="function"?i(f):f();const g=u(...h);return aq(o,a,g)}function xq(e){const t={},r=[];let n;const s={addCase(a,i){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(Ol(28));if(o in t)throw new Error(Ol(29));return t[o]=i,s},addAsyncThunk(a,i){return i.pending&&(t[a.pending.type]=i.pending),i.rejected&&(t[a.rejected.type]=i.rejected),i.fulfilled&&(t[a.fulfilled.type]=i.fulfilled),i.settled&&r.push({matcher:a.settled,reducer:i.settled}),s},addMatcher(a,i){return r.push({matcher:a,reducer:i}),s},addDefaultCase(a){return n=a,s}};return e(s),[t,r,n]}function X_e(e){return typeof e=="function"}function J_e(e,t){let[r,n,s]=xq(t),a;if(X_e(e))a=()=>bI(e());else{const o=bI(e);a=()=>o}function i(o=a(),l){let u=[r[l.type],...n.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,f)=>{if(f)if(Om(d)){const g=f(d,l);return g===void 0?d:g}else{if(u0(d))return mq(d,h=>f(h,l));{const h=f(d,l);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return i.getInitialState=a,i}var Q_e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Z_e=(e=21)=>{let t="",r=e;for(;r--;)t+=Q_e[Math.random()*64|0];return t},e3e=Symbol.for("rtk-slice-createasyncthunk");function t3e(e,t){return`${e}/${t}`}function r3e({creators:e}={}){const t=e?.asyncThunk?.[e3e];return function(n){const{name:s,reducerPath:a=s}=n;if(!s)throw new Error(Ol(11));const i=(typeof n.reducers=="function"?n.reducers(s3e()):n.reducers)||{},o=Object.keys(i),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(b,N){const E=typeof b=="string"?b:b.type;if(!E)throw new Error(Ol(12));if(E in l.sliceCaseReducersByType)throw new Error(Ol(13));return l.sliceCaseReducersByType[E]=N,u},addMatcher(b,N){return l.sliceMatchers.push({matcher:b,reducer:N}),u},exposeAction(b,N){return l.actionCreators[b]=N,u},exposeCaseReducer(b,N){return l.sliceCaseReducersByName[b]=N,u}};o.forEach(b=>{const N=i[b],E={reducerName:b,type:t3e(s,b),createNotation:typeof n.reducers=="function"};i3e(N)?l3e(E,N,u,t):a3e(E,N,u)});function d(){const[b={},N=[],E=void 0]=typeof n.extraReducers=="function"?xq(n.extraReducers):[n.extraReducers],P={...b,...l.sliceCaseReducersByType};return J_e(n.initialState,M=>{for(let j in P)M.addCase(j,P[j]);for(let j of l.sliceMatchers)M.addMatcher(j.matcher,j.reducer);for(let j of N)M.addMatcher(j.matcher,j.reducer);E&&M.addDefaultCase(E)})}const f=b=>b,h=new Map,g=new WeakMap;let x;function y(b,N){return x||(x=d()),x(b,N)}function v(){return x||(x=d()),x.getInitialState()}function T(b,N=!1){function E(M){let j=M[b];return typeof j>"u"&&N&&(j=kb(g,E,v)),j}function P(M=f){const j=kb(h,N,()=>new WeakMap);return kb(j,M,()=>{const A={};for(const[O,L]of Object.entries(n.selectors??{}))A[O]=n3e(L,M,()=>kb(g,M,v),N);return A})}return{reducerPath:b,getSelectors:P,get selectors(){return P(E)},selectSlice:E}}const k={name:s,reducer:y,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:v,...T(a),injectInto(b,{reducerPath:N,...E}={}){const P=N??a;return b.inject({reducerPath:P,reducer:y},E),{...k,...T(P,!0)}}};return k}}function n3e(e,t,r,n){function s(a,...i){let o=t(a);return typeof o>"u"&&n&&(o=r()),e(o,...i)}return s.unwrapped=e,s}var zl=r3e();function s3e(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function a3e({type:e,reducerName:t,createNotation:r},n,s){let a,i;if("reducer"in n){if(r&&!o3e(n))throw new Error(Ol(17));a=n.reducer,i=n.prepare}else a=n;s.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,i?Sc(e,i):Sc(e))}function i3e(e){return e._reducerDefinitionType==="asyncThunk"}function o3e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function l3e({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Ol(18));const{payloadCreator:a,fulfilled:i,pending:o,rejected:l,settled:u,options:d}=r,f=s(e,a,d);n.exposeAction(t,f),i&&n.addCase(f.fulfilled,i),o&&n.addCase(f.pending,o),l&&n.addCase(f.rejected,l),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:i||Tb,pending:o||Tb,rejected:l||Tb,settled:u||Tb})}function Tb(){}var c3e="task",yq="listener",vq="completed",WE="cancelled",u3e=`task-${WE}`,d3e=`task-${vq}`,c7=`${yq}-${WE}`,f3e=`${yq}-${vq}`,w3=class{constructor(e){this.code=e,this.message=`${c3e} ${WE} (reason: ${e})`}name="TaskAbortError";message},HE=(e,t)=>{if(typeof e!="function")throw new TypeError(Ol(32))},J4=()=>{},wq=(e,t=J4)=>(e.catch(t),e),bq=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),dm=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},fm=e=>{if(e.aborted){const{reason:t}=e;throw new w3(t)}};function _q(e,t){let r=J4;return new Promise((n,s)=>{const a=()=>s(new w3(e.reason));if(e.aborted){a();return}r=bq(e,a),t.finally(()=>r()).then(n,s)}).finally(()=>{r=J4})}var h3e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof w3?"cancelled":"rejected",error:r}}finally{t?.()}},Q4=e=>t=>wq(_q(e,t).then(r=>(fm(e),r))),Sq=e=>{const t=Q4(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Mp}=Object,SI={},b3="listenerMiddleware",m3e=(e,t)=>{const r=n=>bq(e,()=>dm(n,e.reason));return(n,s)=>{HE(n);const a=new AbortController;r(a);const i=h3e(async()=>{fm(e),fm(a.signal);const o=await n({pause:Q4(a.signal),delay:Sq(a.signal),signal:a.signal});return fm(a.signal),o},()=>dm(a,d3e));return s?.autoJoin&&t.push(i.catch(J4)),{result:Q4(e)(i),cancel(){dm(a,u3e)}}}},g3e=(e,t)=>{const r=async(n,s)=>{fm(t);let a=()=>{};const o=[new Promise((l,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),l([f,h.getState(),h.getOriginalState()])}});a=()=>{d(),u()}})];s!=null&&o.push(new Promise(l=>setTimeout(l,s,null)));try{const l=await _q(t,Promise.race(o));return fm(t),l}finally{a()}};return(n,s)=>wq(r(n,s))},kq=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:a}=e;if(t)s=Sc(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Ol(21));return HE(a),{predicate:s,type:t,effect:a}},Tq=Mp(e=>{const{type:t,predicate:r,effect:n}=kq(e);return{id:Z_e(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Ol(22))}}},{withTypes:()=>Tq}),kI=(e,t)=>{const{type:r,effect:n,predicate:s}=kq(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===s)&&a.effect===n)},u7=e=>{e.pending.forEach(t=>{dm(t,c7)})},p3e=e=>()=>{e.forEach(u7),e.clear()},TI=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Cq=Mp(Sc(`${b3}/add`),{withTypes:()=>Cq}),x3e=Sc(`${b3}/removeAll`),Eq=Mp(Sc(`${b3}/remove`),{withTypes:()=>Eq}),y3e=(...e)=>{console.error(`${b3}/error`,...e)},A2=(e={})=>{const t=new Map,{extra:r,onError:n=y3e}=e;HE(n);const s=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f?.cancelActive&&u7(d)}),a=d=>{const f=kI(t,d)??Tq(d);return s(f)};Mp(a,{withTypes:()=>a});const i=d=>{const f=kI(t,d);return f&&(f.unsubscribe(),d.cancelActive&&u7(f)),!!f};Mp(i,{withTypes:()=>i});const o=async(d,f,h,g)=>{const x=new AbortController,y=g3e(a,x.signal),v=[];try{d.pending.add(x),await Promise.resolve(d.effect(f,Mp({},h,{getOriginalState:g,condition:(T,k)=>y(T,k).then(Boolean),take:y,delay:Sq(x.signal),pause:Q4(x.signal),extra:r,signal:x.signal,fork:m3e(x.signal,v),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((T,k,b)=>{T!==x&&(dm(T,c7),b.delete(T))})},cancel:()=>{dm(x,c7),d.pending.delete(x)},throwIfCancelled:()=>{fm(x.signal)}})))}catch(T){T instanceof w3||TI(n,T,{raisedBy:"effect"})}finally{await Promise.all(v),dm(x,f3e),d.pending.delete(x)}},l=p3e(t);return{middleware:d=>f=>h=>{if(!oq(h))return f(h);if(Cq.match(h))return a(h.payload);if(x3e.match(h)){l();return}if(Eq.match(h))return i(h.payload);let g=d.getState();const x=()=>{if(g===SI)throw new Error(Ol(23));return g};let y;try{if(y=f(h),t.size>0){const v=d.getState(),T=Array.from(t.values());for(const k of T){let b=!1;try{b=k.predicate(h,v,g)}catch(N){b=!1,TI(n,N,{raisedBy:"predicate"})}b&&o(k,h,d,x)}}}finally{g=SI}return y},startListening:a,stopListening:i,clearListeners:l}};function Ol(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var v3e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Nq=zl({name:"chartLayout",initialState:v3e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:w3e,setLayout:b3e,setChartSize:_3e,setScale:S3e}=Nq.actions,k3e=Nq.reducer;function CI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function EI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CI(Object(r),!0).forEach(function(n){T3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function T3e(e,t,r){return(t=C3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C3e(e){var t=E3e(e,"string");return typeof t=="symbol"?t:t+""}function E3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Z4=Math.PI/180,N3e=e=>e*180/Math.PI,Ki=(e,t,r,n)=>({x:e+Math.cos(-Z4*n)*r,y:t+Math.sin(-Z4*n)*r}),A3e=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},j3e=(e,t)=>{var{x:r,y:n}=e,{x:s,y:a}=t;return Math.sqrt((r-s)**2+(n-a)**2)},P3e=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:a}=t,i=j3e({x:r,y:n},{x:s,y:a});if(i<=0)return{radius:i,angle:0};var o=(r-s)/i,l=Math.acos(o);return n>a&&(l=2*Math.PI-l),{radius:i,angle:N3e(l),angleInRadian:l}},M3e=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),a=Math.min(n,s);return{startAngle:t-a*360,endAngle:r-a*360}},F3e=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),a=Math.floor(n/360),i=Math.min(s,a);return e+i*360},D3e=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:a}=P3e({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(s<i||s>o||s===0)return null;var{startAngle:l,endAngle:u}=M3e(t),d=a,f;if(l<=u){for(;d>u;)d-=360;for(;d<l;)d+=360;f=d>=l&&d<=u}else{for(;d>l;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=l}return f?EI(EI({},t),{},{radius:s,angle:F3e(d,t)}):null};function Aq(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function NI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function cc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NI(Object(r),!0).forEach(function(n){O3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O3e(e,t,r){return(t=I3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I3e(e){var t=R3e(e,"string");return typeof t=="symbol"?t:t+""}function R3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uo(e,t,r){return Si(e)||Si(t)?r:Ju(t)?h3(e,t,r):typeof t=="function"?t(e):r}var L3e=(e,t,r,n,s)=>{var a,i=-1,o=(a=t?.length)!==null&&a!==void 0?a:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var l=0;l<o;l++){var u=l>0?r[l-1].coordinate:r[o-1].coordinate,d=r[l].coordinate,f=l>=o-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(hc(d-u)!==hc(f-d)){var g=[];if(hc(f-d)===hc(s[1]-s[0])){h=f;var x=d+s[1]-s[0];g[0]=Math.min(x,(x+u)/2),g[1]=Math.max(x,(x+u)/2)}else{h=u;var y=f+s[1]-s[0];g[0]=Math.min(d,(y+d)/2),g[1]=Math.max(d,(y+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=g[0]&&e<=g[1]){({index:i}=r[l]);break}}else{var T=Math.min(u,f),k=Math.max(u,f);if(e>(T+d)/2&&e<=(k+d)/2){({index:i}=r[l]);break}}}else if(t){for(var b=0;b<o;b++)if(b===0&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:i}=t[b]);break}}return i},B3e=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:a,verticalAlign:i,layout:o}=t;if((o==="vertical"||o==="horizontal"&&i==="middle")&&a!=="center"&&nn(e[a]))return cc(cc({},e),{},{[a]:e[a]+(n||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&i!=="middle"&&nn(e[i]))return cc(cc({},e),{},{[i]:e[i]+(s||0)})}return e},th=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",jq=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var s,a,i=e.map(o=>(o.coordinate===t&&(s=!0),o.coordinate===r&&(a=!0),o.coordinate));return s||i.push(t),a||i.push(r),i},Pq=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:a,scale:i,realScaleType:o,isCategorical:l,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:g}=e;if(!i)return null;var x=o==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,y=s==="category"&&i.bandwidth?i.bandwidth()/x:0;if(y=g==="angleAxis"&&a&&a.length>=2?hc(a[0]-a[1])*2*y:y,f||h){var v=(f||h||[]).map((T,k)=>{var b=n?n.indexOf(T):T;return{coordinate:i(b)+y,value:T,offset:y,index:k}});return v.filter(T=>!_c(T.coordinate))}return l&&u?u.map((T,k)=>({coordinate:i(T)+y,value:T,index:k,offset:y})):i.ticks&&d!=null?i.ticks(d).map((T,k)=>({coordinate:i(T)+y,value:T,offset:y,index:k})):i.domain().map((T,k)=>({coordinate:i(T)+y,value:n?n[T]:T,index:k,offset:y}))},AI=1e-4,$3e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-AI,a=Math.max(n[0],n[1])+AI,i=e(t[0]),o=e(t[r-1]);(i<s||i>a||o<s||o>a)&&e.domain([t[0],t[r-1]])}},z3e=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0,i=0;i<t;++i){var o=_c(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1])}},U3e=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0;a<t;++a){var i=_c(e[a][r][1])?e[a][r][0]:e[a][r][1];i>=0?(e[a][r][0]=s,e[a][r][1]=s+i,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},W3e={sign:z3e,expand:P4e,none:qp,silhouette:M4e,wiggle:F4e,positive:U3e},H3e=(e,t,r)=>{var n=W3e[r],s=j4e().keys(t).value((a,i)=>+Uo(a,i,0)).order(r7).offset(n);return s(e)};function jI(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:a,dataKey:i}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Si(s[t.dataKey])){var o=AV(r,"value",s[t.dataKey]);if(o)return o.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var l=Uo(s,Si(i)?t.dataKey:i);return Si(l)?null:t.scale(l)}var G3e=e=>{var t=e.flat(2).filter(nn);return[Math.min(...t),Math.max(...t)]},V3e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],q3e=(e,t,r)=>{if(e!=null)return V3e(Object.keys(e).reduce((n,s)=>{var a=e[s],{stackedData:i}=a,o=i.reduce((l,u)=>{var d=Aq(u,t,r),f=G3e(d);return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},PI=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MI=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,d7=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=p3(t,d=>d.coordinate),a=1/0,i=1,o=s.length;i<o;i++){var l=s[i],u=s[i-1];a=Math.min((l.coordinate||0)-(u.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function FI(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:a}=e;return cc(cc({},t),{},{dataKey:r,payload:n,value:s,name:a})}function Mq(e,t){if(e)return String(e);if(typeof t=="string")return t}function K3e(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var a=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return a?{x:e,y:t}:null}return n?D3e({x:e,y:t},n):null}var Y3e=(e,t,r,n)=>{var s=t.find(u=>u&&u.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var a=s.coordinate,{radius:i}=n;return cc(cc(cc({},n),Ki(n.cx,n.cy,i,a)),{},{angle:a,radius:i})}var o=s.coordinate,{angle:l}=n;return cc(cc(cc({},n),Ki(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}},X3e=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,w0=e=>e.layout.width,b0=e=>e.layout.height,J3e=e=>e.layout.scale,Fq=e=>e.layout.margin,_3=Ft(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),S3=Ft(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Q3e="data-recharts-item-index",Z3e="data-recharts-item-data-key",j2=60;function DI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DI(Object(r),!0).forEach(function(n){e5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function e5e(e,t,r){return(t=t5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t5e(e){var t=r5e(e,"string");return typeof t=="symbol"?t:t+""}function r5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n5e=e=>e.brush.height;function s5e(e){var t=S3(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:j2;return r+s}return r},0)}function a5e(e){var t=S3(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:j2;return r+s}return r},0)}function i5e(e){var t=_3(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function o5e(e){var t=_3(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Qi=Ft([w0,b0,Fq,n5e,s5e,a5e,i5e,o5e,sq,T_e],(e,t,r,n,s,a,i,o,l,u)=>{var d={left:(r.left||0)+s,right:(r.right||0)+a},f={top:(r.top||0)+i,bottom:(r.bottom||0)+o},h=Cb(Cb({},f),d),g=h.bottom;h.bottom+=n,h=B3e(h,l,u);var x=e-h.left-h.right,y=t-h.top-h.bottom;return Cb(Cb({brushBottom:g},h),{},{width:Math.max(x,0),height:Math.max(y,0)})}),l5e=Ft(Qi,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Dq=Ft(w0,b0,(e,t)=>({x:0,y:0,width:e,height:t})),c5e=S.createContext(null),Ec=()=>S.useContext(c5e)!=null,k3=e=>e.brush,T3=Ft([k3,Qi,Fq],(e,t,r)=>({height:e.height,x:nn(e.x)?e.x:t.left,y:nn(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:nn(e.width)?e.width:t.width})),GE=()=>{var e,t=Ec(),r=qr(l5e),n=qr(T3),s=(e=qr(k3))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},u5e={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Oq=()=>{var e;return(e=qr(Qi))!==null&&e!==void 0?e:u5e},Iq=()=>qr(w0),Rq=()=>qr(b0),Ds=e=>e.layout.layoutType,VE=()=>qr(Ds),d5e={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Lq=zl({name:"legend",initialState:d5e,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=e0(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:xje,setLegendSettings:yje,addLegendPayload:f5e,removeLegendPayload:h5e}=Lq.actions,m5e=Lq.reducer;function f7(){return f7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f7.apply(null,arguments)}function OI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function q6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OI(Object(r),!0).forEach(function(n){g5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g5e(e,t,r){return(t=p5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p5e(e){var t=x5e(e,"string");return typeof t=="symbol"?t:t+""}function x5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y5e(e){return Array.isArray(e)&&Ju(e[0])&&Ju(e[1])?e.join(" ~ "):e}var v5e=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:a,formatter:i,itemSorter:o,wrapperClassName:l,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,g=()=>{if(a&&a.length){var E={padding:0,margin:0},P=(o?p3(a,o):a).map((M,j)=>{if(M.type==="none")return null;var A=M.formatter||i||y5e,{value:O,name:L}=M,q=O,Q=L;if(A){var ae=A(O,L,M,j,a);if(Array.isArray(ae))[q,Q]=ae;else if(ae!=null)q=ae;else return null}var te=q6({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},n);return S.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(j),style:te},Ju(Q)?S.createElement("span",{className:"recharts-tooltip-item-name"},Q):null,Ju(Q)?S.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,S.createElement("span",{className:"recharts-tooltip-item-value"},q),S.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return S.createElement("ul",{className:"recharts-tooltip-item-list",style:E},P)}return null},x=q6({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),y=q6({margin:0},s),v=!Si(d),T=v?d:"",k=Ms("recharts-default-tooltip",l),b=Ms("recharts-tooltip-label",u);v&&f&&a!==void 0&&a!==null&&(T=f(d,a));var N=h?{role:"status","aria-live":"assertive"}:{};return S.createElement("div",f7({className:k,style:x},N),S.createElement("p",{className:b,style:y},S.isValidElement(T)?T:"".concat(T)),g())},wy="recharts-tooltip-wrapper",w5e={visibility:"hidden"};function b5e(e){var{coordinate:t,translateX:r,translateY:n}=e;return Ms(wy,{["".concat(wy,"-right")]:nn(r)&&t&&nn(t.x)&&r>=t.x,["".concat(wy,"-left")]:nn(r)&&t&&nn(t.x)&&r<t.x,["".concat(wy,"-bottom")]:nn(n)&&t&&nn(t.y)&&n>=t.y,["".concat(wy,"-top")]:nn(n)&&t&&nn(t.y)&&n<t.y})}function II(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o,viewBox:l,viewBoxDimension:u}=e;if(a&&nn(a[n]))return a[n];var d=r[n]-o-(s>0?s:0),f=r[n]+s;if(t[n])return i[n]?d:f;var h=l[n];if(h==null)return 0;if(i[n]){var g=d,x=h;return g<x?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var y=f+o,v=h+u;return y>v?Math.max(d,h):Math.max(f,h)}function _5e(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function S5e(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:a,tooltipBox:i,useTranslate3d:o,viewBox:l}=e,u,d,f;return i.height>0&&i.width>0&&r?(d=II({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:i.width,viewBox:l,viewBoxDimension:l.width}),f=II({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:i.height,viewBox:l,viewBoxDimension:l.height}),u=_5e({translateX:d,translateY:f,useTranslate3d:o})):u=w5e,{cssProperties:u,cssClasses:b5e({translateX:d,translateY:f,coordinate:r})}}function RI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Eb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RI(Object(r),!0).forEach(function(n){h7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function h7(e,t,r){return(t=k5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k5e(e){var t=T5e(e,"string");return typeof t=="symbol"?t:t+""}function T5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class C5e extends S.PureComponent{constructor(){super(...arguments),h7(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),h7(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:a,coordinate:i,hasPayload:o,isAnimationActive:l,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:g,wrapperStyle:x,lastBoundingBox:y,innerRef:v,hasPortalFromProps:T}=this.props,{cssClasses:k,cssProperties:b}=S5e({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:y.height,width:y.width},useTranslate3d:h,viewBox:g}),N=T?{}:Eb(Eb({transition:l&&t?"transform ".concat(n,"ms ").concat(s):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),E=Eb(Eb({},N),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},x);return S.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:E,ref:v},a)}}var E5e=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),k1={devToolsEnabled:!1,isSsr:E5e()},Bq=()=>qr(e=>e.rootProps.accessibilityLayer);function ou(e){return Number.isFinite(e)}function e_(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function m7(){return m7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m7.apply(null,arguments)}function LI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function BI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LI(Object(r),!0).forEach(function(n){N5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N5e(e,t,r){return(t=A5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A5e(e){var t=j5e(e,"string");return typeof t=="symbol"?t:t+""}function j5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $I={curveBasisClosed:v4e,curveBasisOpen:w4e,curveBasis:y4e,curveBumpX:p4e,curveBumpY:x4e,curveLinearClosed:b4e,curveLinear:m3,curveMonotoneX:_4e,curveMonotoneY:S4e,curveNatural:k4e,curveStep:T4e,curveStepAfter:E4e,curveStepBefore:C4e},Nb=e=>ou(e.x)&&ou(e.y),by=e=>e.x,_y=e=>e.y,P5e=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(FE(e));return(r==="curveMonotone"||r==="curveBump")&&t?$I["".concat(r).concat(t==="vertical"?"Y":"X")]:$I[r]||m3},M5e=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:a=!1}=e,i=P5e(t,s),o=a?r.filter(Nb):r,l;if(Array.isArray(n)){var u=a?n.filter(f=>Nb(f)):n,d=o.map((f,h)=>BI(BI({},f),{},{base:u[h]}));return s==="vertical"?l=wb().y(_y).x1(by).x0(f=>f.base.x):l=wb().x(by).y1(_y).y0(f=>f.base.y),l.defined(Nb).curve(i),l(d)}return s==="vertical"&&nn(n)?l=wb().y(_y).x1(by).x0(n):nn(n)?l=wb().x(by).y1(_y).y0(n):l=LV().x(by).y(_y),l.defined(Nb).curve(i),l(o)},$q=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var a=r&&r.length?M5e(e):n;return S.createElement("path",m7({},Qm(e),OE(e),{className:Ms("recharts-curve",t),d:a===null?void 0:a,ref:s}))},F5e=["x","y","top","left","width","height","className"];function g7(){return g7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g7.apply(null,arguments)}function zI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function D5e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zI(Object(r),!0).forEach(function(n){O5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O5e(e,t,r){return(t=I5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I5e(e){var t=R5e(e,"string");return typeof t=="symbol"?t:t+""}function R5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L5e(e,t){if(e==null)return{};var r,n,s=B5e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function B5e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var $5e=(e,t,r,n,s,a)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),z5e=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:a=0,height:i=0,className:o}=e,l=L5e(e,F5e),u=D5e({x:t,y:r,top:n,left:s,width:a,height:i},l);return!nn(t)||!nn(r)||!nn(a)||!nn(i)||!nn(n)||!nn(s)?null:S.createElement("path",g7({},Ji(u,!0),{className:Ms("recharts-cross",o),d:$5e(t,r,a,i,n,s)}))};function U5e(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function UI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function W5e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UI(Object(r),!0).forEach(function(n){H5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H5e(e,t,r){return(t=G5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G5e(e){var t=V5e(e,"string");return typeof t=="symbol"?t:t+""}function V5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nc(e,t){var r=W5e({},e),n=t,s=Object.keys(t),a=s.reduce((i,o)=>(i[o]===void 0&&n[o]!==void 0&&(i[o]=n[o]),i),r);return a}function q5e(){}function WI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function HI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WI(Object(r),!0).forEach(function(n){K5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K5e(e,t,r){return(t=Y5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y5e(e){var t=X5e(e,"string");return typeof t=="symbol"?t:t+""}function X5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var J5e=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),Q5e=(e,t,r)=>e.map(n=>"".concat(J5e(n)," ").concat(t,"ms ").concat(r)).join(","),Z5e=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Uv=(e,t)=>Object.keys(t).reduce((r,n)=>HI(HI({},r),{},{[n]:e(n,t[n])}),{});function GI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ui(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GI(Object(r),!0).forEach(function(n){eSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eSe(e,t,r){return(t=tSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tSe(e){var t=rSe(e,"string");return typeof t=="symbol"?t:t+""}function rSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var t_=(e,t,r)=>e+(t-e)*r,p7=e=>{var{from:t,to:r}=e;return t!==r},zq=(e,t,r)=>{var n=Uv((s,a)=>{if(p7(a)){var[i,o]=e(a.from,a.to,a.velocity);return Ui(Ui({},a),{},{from:i,velocity:o})}return a},t);return r<1?Uv((s,a)=>p7(a)?Ui(Ui({},a),{},{velocity:t_(a.velocity,n[s].velocity,r),from:t_(a.from,n[s].from,r)}):a,t):zq(e,n,r-1)};function nSe(e,t,r,n,s,a){var i,o=n.reduce((h,g)=>Ui(Ui({},h),{},{[g]:{from:e[g],velocity:0,to:t[g]}}),{}),l=()=>Uv((h,g)=>g.from,o),u=()=>!Object.values(o).filter(p7).length,d=null,f=h=>{i||(i=h);var g=h-i,x=g/r.dt;o=zq(r,o,x),s(Ui(Ui(Ui({},e),t),l())),i=h,u()||(d=a.setTimeout(f))};return()=>(d=a.setTimeout(f),()=>{d()})}function sSe(e,t,r,n,s,a,i){var o=null,l=s.reduce((f,h)=>Ui(Ui({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,g=Uv((y,v)=>t_(...v,r(h)),l);if(a(Ui(Ui(Ui({},e),t),g)),h<1)o=i.setTimeout(d);else{var x=Uv((y,v)=>t_(...v,r(1)),l);a(Ui(Ui(Ui({},e),t),x))}};return()=>(o=i.setTimeout(d),()=>{o()})}const aSe=(e,t,r,n,s,a)=>{var i=Z5e(e,t);return r.isStepper===!0?nSe(e,t,r,i,s,a):sSe(e,t,r,n,i,s,a)};var r_=1e-4,Uq=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Wq=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),VI=(e,t)=>r=>{var n=Uq(e,t);return Wq(n,r)},iSe=(e,t)=>r=>{var n=Uq(e,t),s=[...n.map((a,i)=>a*i).slice(1),0];return Wq(s,r)},qI=function(){for(var t,r,n,s,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[t,n,r,s]=[0,0,1,1];break;case"ease":[t,n,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,s]=[.42,0,1,1];break;case"ease-out":[t,n,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,s]=[0,0,.58,1];break;default:{var l=i[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([t,n,r,s]=l[1].split(")")[0].split(",").map(x=>parseFloat(x)))}}else i.length===4&&([t,n,r,s]=i);var u=VI(t,r),d=VI(n,s),f=iSe(t,r),h=x=>x>1?1:x<0?0:x,g=x=>{for(var y=x>1?1:x,v=y,T=0;T<8;++T){var k=u(v)-y,b=f(v);if(Math.abs(k-y)<r_||b<r_)return d(v);v=h(v-k/b)}return d(v)};return g.isStepper=!1,g},oSe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,a=(i,o,l)=>{var u=-(i-o)*r,d=l*n,f=l+(u-d)*s/1e3,h=l*s/1e3+i;return Math.abs(h-o)<r_&&Math.abs(f)<r_?[o,0]:[h,f]};return a.isStepper=!0,a.dt=s,a},lSe=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return qI(e);case"spring":return oSe();default:if(e.split("(")[0]==="cubic-bezier")return qI(e)}return typeof e=="function"?e:null};function cSe(e){var t,r=()=>null,n=!1,s=null,a=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,[l,...u]=o;if(typeof l=="number"){s=e.setTimeout(a.bind(null,u),l);return}a(l),s=e.setTimeout(a.bind(null,u));return}typeof i=="string"&&(t=i,r(t)),typeof i=="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,s&&(s(),s=null),a(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>e}}class uSe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,a=i=>{i-n>=r?t(i):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(a))};return s=requestAnimationFrame(a),()=>{cancelAnimationFrame(s)}}}function dSe(){return cSe(new uSe)}var fSe=S.createContext(dSe);function hSe(e,t){var r=S.useContext(fSe);return S.useMemo(()=>t??r(e),[e,t,r])}var mSe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},KI={t:0},K6={t:1};function Hq(e){var t=Nc(e,mSe),{isActive:r,canBegin:n,duration:s,easing:a,begin:i,onAnimationEnd:o,onAnimationStart:l,children:u}=t,d=hSe(t.animationId,t.animationManager),[f,h]=S.useState(r?KI:K6),g=S.useRef(null);return S.useEffect(()=>{r||h(K6)},[r]),S.useEffect(()=>{if(!r||!n)return q5e;var x=aSe(KI,K6,lSe(a),s,h,d.getTimeoutController()),y=()=>{g.current=x()};return d.start([l,i,y,s,o]),()=>{d.stop(),g.current&&g.current(),o()}},[r,n,s,a,i,l,o,d]),u(f.t)}function Gq(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=S.useRef(Bv(t)),n=S.useRef(e);return n.current!==e&&(r.current=Bv(t),n.current=e),r.current}function YI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function XI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YI(Object(r),!0).forEach(function(n){gSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gSe(e,t,r){return(t=pSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pSe(e){var t=xSe(e,"string");return typeof t=="symbol"?t:t+""}function xSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n_(){return n_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n_.apply(null,arguments)}var JI=(e,t,r,n,s)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,o=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0,u;if(a>0&&s instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=s[f]>a?a:s[f];u="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(l,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(t+i*d[1])),u+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(l,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+n-i*d[3])),u+="Z"}else if(a>0&&s===+s&&s>0){var g=Math.min(a,s);u="M ".concat(e,",").concat(t+i*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(e+o*g,",").concat(t,`
            L `).concat(e+r-o*g,",").concat(t,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(e+r,",").concat(t+i*g,`
            L `).concat(e+r,",").concat(t+n-i*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(e+r-o*g,",").concat(t+n,`
            L `).concat(e+o*g,",").concat(t+n,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(e,",").concat(t+n-i*g," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},ySe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},vSe=e=>{var t=Nc(e,ySe),r=S.useRef(null),[n,s]=S.useState(-1);S.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ae=r.current.getTotalLength();ae&&s(ae)}catch{}},[]);var{x:a,y:i,width:o,height:l,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:g,isAnimationActive:x,isUpdateAnimationActive:y}=t,v=S.useRef(o),T=S.useRef(l),k=S.useRef(a),b=S.useRef(i),N=S.useMemo(()=>({x:a,y:i,width:o,height:l,radius:u}),[a,i,o,l,u]),E=Gq(N,"rectangle-");if(a!==+a||i!==+i||o!==+o||l!==+l||o===0||l===0)return null;var P=Ms("recharts-rectangle",d);if(!y)return S.createElement("path",n_({},Ji(t,!0),{className:P,d:JI(a,i,o,l,u)}));var M=v.current,j=T.current,A=k.current,O=b.current,L="0px ".concat(n===-1?1:n,"px"),q="".concat(n,"px 0px"),Q=Q5e(["strokeDasharray"],h,typeof f=="string"?f:void 0);return S.createElement(Hq,{animationId:E,key:E,canBegin:n>0,duration:h,easing:f,isActive:y,begin:g},ae=>{var te=zd(M,o,ae),ne=zd(j,l,ae),B=zd(A,a,ae),V=zd(O,i,ae);r.current&&(v.current=te,T.current=ne,k.current=B,b.current=V);var R;return x?ae>0?R={transition:Q,strokeDasharray:q}:R={strokeDasharray:L}:R={strokeDasharray:q},S.createElement("path",n_({},Ji(t,!0),{className:P,d:JI(B,V,te,ne,u),ref:r,style:XI(XI({},R),t.style)}))})};function Vq(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:a}=e,i=Ki(t,r,n,s),o=Ki(t,r,n,a);return{points:[i,o],cx:t,cy:r,radius:n,startAngle:s,endAngle:a}}function x7(){return x7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x7.apply(null,arguments)}var wSe=(e,t)=>{var r=hc(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Ab=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:a,isExternal:i,cornerRadius:o,cornerIsExternal:l}=e,u=o*(i?1:-1)+n,d=Math.asin(o/u)/Z4,f=l?s:s+a*d,h=Ki(t,r,u,f),g=Ki(t,r,n,f),x=l?s-a*d:s,y=Ki(t,r,u*Math.cos(d*Z4),x);return{center:h,circleTangency:g,lineTangency:y,theta:d}},qq=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:a,endAngle:i}=e,o=wSe(a,i),l=a+o,u=Ki(t,r,s,a),d=Ki(t,r,s,l),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(a>l),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=Ki(t,r,n,a),g=Ki(t,r,n,l);f+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(a<=l),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},bSe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:a,forceCornerRadius:i,cornerIsExternal:o,startAngle:l,endAngle:u}=e,d=hc(u-l),{circleTangency:f,lineTangency:h,theta:g}=Ab({cx:t,cy:r,radius:s,angle:l,sign:d,cornerRadius:a,cornerIsExternal:o}),{circleTangency:x,lineTangency:y,theta:v}=Ab({cx:t,cy:r,radius:s,angle:u,sign:-d,cornerRadius:a,cornerIsExternal:o}),T=o?Math.abs(l-u):Math.abs(l-u)-g-v;if(T<0)return i?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):qq({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:l,endAngle:u});var k="M ".concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(T>180),",").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(n>0){var{circleTangency:b,lineTangency:N,theta:E}=Ab({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:P,lineTangency:M,theta:j}=Ab({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),A=o?Math.abs(l-u):Math.abs(l-u)-E-j;if(A<0&&a===0)return"".concat(k,"L").concat(t,",").concat(r,"Z");k+="L".concat(M.x,",").concat(M.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(A>180),",").concat(+(d>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,"Z")}else k+="L".concat(t,",").concat(r,"Z");return k},_Se={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},SSe=e=>{var t=Nc(e,_Se),{cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d,className:f}=t;if(a<s||u===d)return null;var h=Ms("recharts-sector",f),g=a-s,x=Wf(i,g,0,!0),y;return x>0&&Math.abs(u-d)<360?y=bSe({cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:Math.min(x,g/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d}):y=qq({cx:r,cy:n,innerRadius:s,outerRadius:a,startAngle:u,endAngle:d}),S.createElement("path",x7({},Ji(t,!0),{className:h,d:y}))};function kSe(e,t,r){var n,s,a,i;if(e==="horizontal")n=t.x,a=n,s=r.top,i=r.top+r.height;else if(e==="vertical")s=t.y,i=s,n=r.left,a=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:l,innerRadius:u,outerRadius:d,angle:f}=t,h=Ki(o,l,u,f),g=Ki(o,l,d,f);n=h.x,s=h.y,a=g.x,i=g.y}else return Vq(t);return[{x:n,y:s},{x:a,y:i}]}var Y6={},X6={},J6={},QI;function TSe(){return QI||(QI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rq();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(J6)),J6}var ZI;function CSe(){return ZI||(ZI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TSe();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(X6)),X6}var eR;function ESe(){return eR||(eR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nq(),r=CSe();function n(s,a,i){i&&typeof i!="number"&&t.isIterateeCall(s,a,i)&&(a=i=void 0),s=r.toFinite(s),a===void 0?(a=s,s=0):a=r.toFinite(a),i=i===void 0?s<a?1:-1:r.toFinite(i);const o=Math.max(Math.ceil((a-s)/(i||1)),0),l=new Array(o);for(let u=0;u<o;u++)l[u]=s,s+=i;return l}e.range=n})(Y6)),Y6}var Q6,tR;function NSe(){return tR||(tR=1,Q6=ESe().range),Q6}var ASe=NSe();const Kq=Tc(ASe);function Pf(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function jSe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function qE(e){let t,r,n;e.length!==2?(t=Pf,r=(o,l)=>Pf(e(o),l),n=(o,l)=>e(o)-l):(t=e===Pf||e===jSe?e:PSe,r=e,n=e);function s(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<0?u=f+1:d=f}while(u<d)}return u}function a(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function i(o,l,u=0,d=o.length){const f=s(o,l,u,d-1);return f>u&&n(o[f-1],l)>-n(o[f],l)?f-1:f}return{left:s,center:i,right:a}}function PSe(){return 0}function Yq(e){return e===null?NaN:+e}function*MSe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const FSe=qE(Pf),P2=FSe.right;qE(Yq).center;class rR extends Map{constructor(t,r=ISe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(nR(this,t))}has(t){return super.has(nR(this,t))}set(t,r){return super.set(DSe(this,t),r)}delete(t){return super.delete(OSe(this,t))}}function nR({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function DSe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function OSe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function ISe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function RSe(e=Pf){if(e===Pf)return Xq;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Xq(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const LSe=Math.sqrt(50),BSe=Math.sqrt(10),$Se=Math.sqrt(2);function s_(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),i=a>=LSe?10:a>=BSe?5:a>=$Se?2:1;let o,l,u;return s<0?(u=Math.pow(10,-s)/i,o=Math.round(e*u),l=Math.round(t*u),o/u<e&&++o,l/u>t&&--l,u=-u):(u=Math.pow(10,s)*i,o=Math.round(e/u),l=Math.round(t/u),o*u<e&&++o,l*u>t&&--l),l<o&&.5<=r&&r<2?s_(e,t,r*2):[o,l,u]}function y7(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,a,i]=n?s_(t,e,r):s_(e,t,r);if(!(a>=s))return[];const o=a-s+1,l=new Array(o);if(n)if(i<0)for(let u=0;u<o;++u)l[u]=(a-u)/-i;else for(let u=0;u<o;++u)l[u]=(a-u)*i;else if(i<0)for(let u=0;u<o;++u)l[u]=(s+u)/-i;else for(let u=0;u<o;++u)l[u]=(s+u)*i;return l}function v7(e,t,r){return t=+t,e=+e,r=+r,s_(e,t,r)[2]}function w7(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?v7(t,e,r):v7(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function sR(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function aR(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Jq(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?Xq:RSe(s);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),g=Math.max(r,Math.floor(t-u*f/l+h)),x=Math.min(n,Math.floor(t+(l-u)*f/l+h));Jq(e,t,g,x,s)}const a=e[t];let i=r,o=n;for(Sy(e,r,t),s(e[n],a)>0&&Sy(e,r,n);i<o;){for(Sy(e,i,o),++i,--o;s(e[i],a)<0;)++i;for(;s(e[o],a)>0;)--o}s(e[r],a)===0?Sy(e,r,o):(++o,Sy(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function Sy(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function zSe(e,t,r){if(e=Float64Array.from(MSe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return aR(e);if(t>=1)return sR(e);var n,s=(n-1)*t,a=Math.floor(s),i=sR(Jq(e,a).subarray(0,a+1)),o=aR(e.subarray(a+1));return i+(o-i)*(s-a)}}function USe(e,t,r=Yq){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,a=Math.floor(s),i=+r(e[a],a,e),o=+r(e[a+1],a+1,e);return i+(o-i)*(s-a)}}function WSe(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(s);++n<s;)a[n]=e+n*r;return a}function Ac(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function _0(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const b7=Symbol("implicit");function KE(){var e=new rR,t=[],r=[],n=b7;function s(a){let i=e.get(a);if(i===void 0){if(n!==b7)return n;e.set(a,i=t.push(a)-1)}return r[i%r.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new rR;for(const i of a)e.has(i)||e.set(i,t.push(i)-1);return s},s.range=function(a){return arguments.length?(r=Array.from(a),s):r.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return KE(t,r).unknown(n)},Ac.apply(s,arguments),s}function YE(){var e=KE().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,a,i,o=!1,l=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,g=s<n,x=g?s:n,y=g?n:s;a=(y-x)/Math.max(1,h-l+u*2),o&&(a=Math.floor(a)),x+=(y-x-a*(h-l))*d,i=a*(1-l),o&&(x=Math.round(x),i=Math.round(i));var v=WSe(h).map(function(T){return x+a*T});return r(g?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,s]=h,n=+n,s=+s,f()):[n,s]},e.rangeRound=function(h){return[n,s]=h,n=+n,s=+s,o=!0,f()},e.bandwidth=function(){return i},e.step=function(){return a},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return YE(t(),[n,s]).round(o).paddingInner(l).paddingOuter(u).align(d)},Ac.apply(f(),arguments)}function Qq(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Qq(t())},e}function HSe(){return Qq(YE.apply(null,arguments).paddingInner(1))}function XE(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Zq(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function M2(){}var Wv=.7,a_=1/Wv,Fp="\\s*([+-]?\\d+)\\s*",Hv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ku="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",GSe=/^#([0-9a-f]{3,8})$/,VSe=new RegExp(`^rgb\\(${Fp},${Fp},${Fp}\\)$`),qSe=new RegExp(`^rgb\\(${Ku},${Ku},${Ku}\\)$`),KSe=new RegExp(`^rgba\\(${Fp},${Fp},${Fp},${Hv}\\)$`),YSe=new RegExp(`^rgba\\(${Ku},${Ku},${Ku},${Hv}\\)$`),XSe=new RegExp(`^hsl\\(${Hv},${Ku},${Ku}\\)$`),JSe=new RegExp(`^hsla\\(${Hv},${Ku},${Ku},${Hv}\\)$`),iR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};XE(M2,Gv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:oR,formatHex:oR,formatHex8:QSe,formatHsl:ZSe,formatRgb:lR,toString:lR});function oR(){return this.rgb().formatHex()}function QSe(){return this.rgb().formatHex8()}function ZSe(){return eK(this).formatHsl()}function lR(){return this.rgb().formatRgb()}function Gv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=GSe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?cR(t):r===3?new ol(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?jb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?jb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=VSe.exec(e))?new ol(t[1],t[2],t[3],1):(t=qSe.exec(e))?new ol(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=KSe.exec(e))?jb(t[1],t[2],t[3],t[4]):(t=YSe.exec(e))?jb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=XSe.exec(e))?fR(t[1],t[2]/100,t[3]/100,1):(t=JSe.exec(e))?fR(t[1],t[2]/100,t[3]/100,t[4]):iR.hasOwnProperty(e)?cR(iR[e]):e==="transparent"?new ol(NaN,NaN,NaN,0):null}function cR(e){return new ol(e>>16&255,e>>8&255,e&255,1)}function jb(e,t,r,n){return n<=0&&(e=t=r=NaN),new ol(e,t,r,n)}function e6e(e){return e instanceof M2||(e=Gv(e)),e?(e=e.rgb(),new ol(e.r,e.g,e.b,e.opacity)):new ol}function _7(e,t,r,n){return arguments.length===1?e6e(e):new ol(e,t,r,n??1)}function ol(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}XE(ol,_7,Zq(M2,{brighter(e){return e=e==null?a_:Math.pow(a_,e),new ol(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Wv:Math.pow(Wv,e),new ol(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ol(hm(this.r),hm(this.g),hm(this.b),i_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uR,formatHex:uR,formatHex8:t6e,formatRgb:dR,toString:dR}));function uR(){return`#${Qh(this.r)}${Qh(this.g)}${Qh(this.b)}`}function t6e(){return`#${Qh(this.r)}${Qh(this.g)}${Qh(this.b)}${Qh((isNaN(this.opacity)?1:this.opacity)*255)}`}function dR(){const e=i_(this.opacity);return`${e===1?"rgb(":"rgba("}${hm(this.r)}, ${hm(this.g)}, ${hm(this.b)}${e===1?")":`, ${e})`}`}function i_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Qh(e){return e=hm(e),(e<16?"0":"")+e.toString(16)}function fR(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Jc(e,t,r,n)}function eK(e){if(e instanceof Jc)return new Jc(e.h,e.s,e.l,e.opacity);if(e instanceof M2||(e=Gv(e)),!e)return new Jc;if(e instanceof Jc)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),a=Math.max(t,r,n),i=NaN,o=a-s,l=(a+s)/2;return o?(t===a?i=(r-n)/o+(r<n)*6:r===a?i=(n-t)/o+2:i=(t-r)/o+4,o/=l<.5?a+s:2-a-s,i*=60):o=l>0&&l<1?0:i,new Jc(i,o,l,e.opacity)}function r6e(e,t,r,n){return arguments.length===1?eK(e):new Jc(e,t,r,n??1)}function Jc(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}XE(Jc,r6e,Zq(M2,{brighter(e){return e=e==null?a_:Math.pow(a_,e),new Jc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Wv:Math.pow(Wv,e),new Jc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new ol(Z6(e>=240?e-240:e+120,s,n),Z6(e,s,n),Z6(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Jc(hR(this.h),Pb(this.s),Pb(this.l),i_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=i_(this.opacity);return`${e===1?"hsl(":"hsla("}${hR(this.h)}, ${Pb(this.s)*100}%, ${Pb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hR(e){return e=(e||0)%360,e<0?e+360:e}function Pb(e){return Math.max(0,Math.min(1,e||0))}function Z6(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const JE=e=>()=>e;function n6e(e,t){return function(r){return e+r*t}}function s6e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function a6e(e){return(e=+e)==1?tK:function(t,r){return r-t?s6e(t,r,e):JE(isNaN(t)?r:t)}}function tK(e,t){var r=t-e;return r?n6e(e,r):JE(isNaN(e)?t:e)}const mR=(function e(t){var r=a6e(t);function n(s,a){var i=r((s=_7(s)).r,(a=_7(a)).r),o=r(s.g,a.g),l=r(s.b,a.b),u=tK(s.opacity,a.opacity);return function(d){return s.r=i(d),s.g=o(d),s.b=l(d),s.opacity=u(d),s+""}}return n.gamma=e,n})(1);function i6e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(a){for(s=0;s<r;++s)n[s]=e[s]*(1-a)+t[s]*a;return n}}function o6e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function l6e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),a=new Array(r),i;for(i=0;i<n;++i)s[i]=T1(e[i],t[i]);for(;i<r;++i)a[i]=t[i];return function(o){for(i=0;i<n;++i)a[i]=s[i](o);return a}}function c6e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function o_(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function u6e(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=T1(e[s],t[s]):n[s]=t[s];return function(a){for(s in r)n[s]=r[s](a);return n}}var S7=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ek=new RegExp(S7.source,"g");function d6e(e){return function(){return e}}function f6e(e){return function(t){return e(t)+""}}function h6e(e,t){var r=S7.lastIndex=ek.lastIndex=0,n,s,a,i=-1,o=[],l=[];for(e=e+"",t=t+"";(n=S7.exec(e))&&(s=ek.exec(t));)(a=s.index)>r&&(a=t.slice(r,a),o[i]?o[i]+=a:o[++i]=a),(n=n[0])===(s=s[0])?o[i]?o[i]+=s:o[++i]=s:(o[++i]=null,l.push({i,x:o_(n,s)})),r=ek.lastIndex;return r<t.length&&(a=t.slice(r),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?f6e(l[0].x):d6e(t):(t=l.length,function(u){for(var d=0,f;d<t;++d)o[(f=l[d]).i]=f.x(u);return o.join("")})}function T1(e,t){var r=typeof t,n;return t==null||r==="boolean"?JE(t):(r==="number"?o_:r==="string"?(n=Gv(t))?(t=n,mR):h6e:t instanceof Gv?mR:t instanceof Date?c6e:o6e(t)?i6e:Array.isArray(t)?l6e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?u6e:o_)(e,t)}function QE(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function m6e(e,t){t===void 0&&(t=e,e=T1);for(var r=0,n=t.length-1,s=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(s,s=t[++r]);return function(i){var o=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return a[o](i-o)}}function g6e(e){return function(){return e}}function l_(e){return+e}var gR=[0,1];function Bo(e){return e}function k7(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:g6e(isNaN(t)?NaN:.5)}function p6e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function x6e(e,t,r){var n=e[0],s=e[1],a=t[0],i=t[1];return s<n?(n=k7(s,n),a=r(i,a)):(n=k7(n,s),a=r(a,i)),function(o){return a(n(o))}}function y6e(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),a=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)s[i]=k7(e[i],e[i+1]),a[i]=r(t[i],t[i+1]);return function(o){var l=P2(e,o,1,n)-1;return a[l](s[l](o))}}function F2(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function C3(){var e=gR,t=gR,r=T1,n,s,a,i=Bo,o,l,u;function d(){var h=Math.min(e.length,t.length);return i!==Bo&&(i=p6e(e[0],e[h-1])),o=h>2?y6e:x6e,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(l||(l=o(e.map(n),t,r)))(n(i(h)))}return f.invert=function(h){return i(s((u||(u=o(t,e.map(n),o_)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,l_),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=QE,d()},f.clamp=function(h){return arguments.length?(i=h?!0:Bo,d()):i!==Bo},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,g){return n=h,s=g,d()}}function ZE(){return C3()(Bo,Bo)}function v6e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function c_(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Yp(e){return e=c_(Math.abs(e)),e?e[1]:NaN}function w6e(e,t){return function(r,n){for(var s=r.length,a=[],i=0,o=e[0],l=0;s>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(r.substring(s-=o,s+o)),!((l+=o+1)>n));)o=e[i=(i+1)%e.length];return a.reverse().join(t)}}function b6e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var _6e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vv(e){if(!(t=_6e.exec(e)))throw new Error("invalid format: "+e);var t;return new eN({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Vv.prototype=eN.prototype;function eN(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}eN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function S6e(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var rK;function k6e(e,t){var r=c_(e,t);if(!r)return e+"";var n=r[0],s=r[1],a=s-(rK=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,i=n.length;return a===i?n:a>i?n+new Array(a-i+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+c_(e,Math.max(0,t+a-1))[0]}function pR(e,t){var r=c_(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const xR={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:v6e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>pR(e*100,t),r:pR,s:k6e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function yR(e){return e}var vR=Array.prototype.map,wR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function T6e(e){var t=e.grouping===void 0||e.thousands===void 0?yR:w6e(vR.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?yR:b6e(vR.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Vv(f);var h=f.fill,g=f.align,x=f.sign,y=f.symbol,v=f.zero,T=f.width,k=f.comma,b=f.precision,N=f.trim,E=f.type;E==="n"?(k=!0,E="g"):xR[E]||(b===void 0&&(b=12),N=!0,E="g"),(v||h==="0"&&g==="=")&&(v=!0,h="0",g="=");var P=y==="$"?r:y==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",M=y==="$"?n:/[%p]/.test(E)?i:"",j=xR[E],A=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function O(L){var q=P,Q=M,ae,te,ne;if(E==="c")Q=j(L)+Q,L="";else{L=+L;var B=L<0||1/L<0;if(L=isNaN(L)?l:j(Math.abs(L),b),N&&(L=S6e(L)),B&&+L==0&&x!=="+"&&(B=!1),q=(B?x==="("?x:o:x==="-"||x==="("?"":x)+q,Q=(E==="s"?wR[8+rK/3]:"")+Q+(B&&x==="("?")":""),A){for(ae=-1,te=L.length;++ae<te;)if(ne=L.charCodeAt(ae),48>ne||ne>57){Q=(ne===46?s+L.slice(ae+1):L.slice(ae))+Q,L=L.slice(0,ae);break}}}k&&!v&&(L=t(L,1/0));var V=q.length+L.length+Q.length,R=V<T?new Array(T-V+1).join(h):"";switch(k&&v&&(L=t(R+L,R.length?T-Q.length:1/0),R=""),g){case"<":L=q+L+Q+R;break;case"=":L=q+R+L+Q;break;case"^":L=R.slice(0,V=R.length>>1)+q+L+Q+R.slice(V);break;default:L=R+q+L+Q;break}return a(L)}return O.toString=function(){return f+""},O}function d(f,h){var g=u((f=Vv(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(Yp(h)/3)))*3,y=Math.pow(10,-x),v=wR[8+x/3];return function(T){return g(y*T)+v}}return{format:u,formatPrefix:d}}var Mb,tN,nK;C6e({thousands:",",grouping:[3],currency:["$",""]});function C6e(e){return Mb=T6e(e),tN=Mb.format,nK=Mb.formatPrefix,Mb}function E6e(e){return Math.max(0,-Yp(Math.abs(e)))}function N6e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Yp(t)/3)))*3-Yp(Math.abs(e)))}function A6e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Yp(t)-Yp(e))+1}function sK(e,t,r,n){var s=w7(e,t,r),a;switch(n=Vv(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=N6e(s,i))&&(n.precision=a),nK(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=A6e(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=E6e(s))&&(n.precision=a-(n.type==="%")*2);break}}return tN(n)}function rh(e){var t=e.domain;return e.ticks=function(r){var n=t();return y7(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return sK(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,a=n.length-1,i=n[s],o=n[a],l,u,d=10;for(o<i&&(u=i,i=o,o=u,u=s,s=a,a=u);d-- >0;){if(u=v7(i,o,r),u===l)return n[s]=i,n[a]=o,t(n);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;l=u}return e},e}function aK(){var e=ZE();return e.copy=function(){return F2(e,aK())},Ac.apply(e,arguments),rh(e)}function iK(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,l_),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return iK(e).unknown(t)},e=arguments.length?Array.from(e,l_):[0,1],rh(r)}function oK(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],a=e[n],i;return a<s&&(i=r,r=n,n=i,i=s,s=a,a=i),e[r]=t.floor(s),e[n]=t.ceil(a),e}function bR(e){return Math.log(e)}function _R(e){return Math.exp(e)}function j6e(e){return-Math.log(-e)}function P6e(e){return-Math.exp(-e)}function M6e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function F6e(e){return e===10?M6e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function D6e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function SR(e){return(t,r)=>-e(-t,r)}function rN(e){const t=e(bR,_R),r=t.domain;let n=10,s,a;function i(){return s=D6e(n),a=F6e(n),r()[0]<0?(s=SR(s),a=SR(a),e(j6e,P6e)):e(bR,_R),t}return t.base=function(o){return arguments.length?(n=+o,i()):n},t.domain=function(o){return arguments.length?(r(o),i()):r()},t.ticks=o=>{const l=r();let u=l[0],d=l[l.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=s(u),g=s(d),x,y;const v=o==null?10:+o;let T=[];if(!(n%1)&&g-h<v){if(h=Math.floor(h),g=Math.ceil(g),u>0){for(;h<=g;++h)for(x=1;x<n;++x)if(y=h<0?x/a(-h):x*a(h),!(y<u)){if(y>d)break;T.push(y)}}else for(;h<=g;++h)for(x=n-1;x>=1;--x)if(y=h>0?x/a(-h):x*a(h),!(y<u)){if(y>d)break;T.push(y)}T.length*2<v&&(T=y7(u,d,v))}else T=y7(h,g,Math.min(g-h,v)).map(a);return f?T.reverse():T},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=Vv(l)).precision==null&&(l.trim=!0),l=tN(l)),o===1/0)return l;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/a(Math.round(s(d)));return f*n<n-.5&&(f*=n),f<=u?l(d):""}},t.nice=()=>r(oK(r(),{floor:o=>a(Math.floor(s(o))),ceil:o=>a(Math.ceil(s(o)))})),t}function lK(){const e=rN(C3()).domain([1,10]);return e.copy=()=>F2(e,lK()).base(e.base()),Ac.apply(e,arguments),e}function kR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function TR(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function nN(e){var t=1,r=e(kR(t),TR(t));return r.constant=function(n){return arguments.length?e(kR(t=+n),TR(t)):t},rh(r)}function cK(){var e=nN(C3());return e.copy=function(){return F2(e,cK()).constant(e.constant())},Ac.apply(e,arguments)}function CR(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function O6e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function I6e(e){return e<0?-e*e:e*e}function sN(e){var t=e(Bo,Bo),r=1;function n(){return r===1?e(Bo,Bo):r===.5?e(O6e,I6e):e(CR(r),CR(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},rh(t)}function aN(){var e=sN(C3());return e.copy=function(){return F2(e,aN()).exponent(e.exponent())},Ac.apply(e,arguments),e}function R6e(){return aN.apply(null,arguments).exponent(.5)}function ER(e){return Math.sign(e)*e*e}function L6e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function uK(){var e=ZE(),t=[0,1],r=!1,n;function s(a){var i=L6e(e(a));return isNaN(i)?n:r?Math.round(i):i}return s.invert=function(a){return e.invert(ER(a))},s.domain=function(a){return arguments.length?(e.domain(a),s):e.domain()},s.range=function(a){return arguments.length?(e.range((t=Array.from(a,l_)).map(ER)),s):t.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(r=!!a,s):r},s.clamp=function(a){return arguments.length?(e.clamp(a),s):e.clamp()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return uK(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ac.apply(s,arguments),rh(s)}function dK(){var e=[],t=[],r=[],n;function s(){var i=0,o=Math.max(1,t.length);for(r=new Array(o-1);++i<o;)r[i-1]=USe(e,i/o);return a}function a(i){return i==null||isNaN(i=+i)?n:t[P2(r,i)]}return a.invertExtent=function(i){var o=t.indexOf(i);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},a.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let o of i)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Pf),s()},a.range=function(i){return arguments.length?(t=Array.from(i),s()):t.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return dK().domain(e).range(t).unknown(n)},Ac.apply(a,arguments)}function fK(){var e=0,t=1,r=1,n=[.5],s=[0,1],a;function i(l){return l!=null&&l<=l?s[P2(n,l,0,r)]:a}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return i}return i.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},i.range=function(l){return arguments.length?(r=(s=Array.from(l)).length-1,o()):s.slice()},i.invertExtent=function(l){var u=s.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(l){return arguments.length&&(a=l),i},i.thresholds=function(){return n.slice()},i.copy=function(){return fK().domain([e,t]).range(s).unknown(a)},Ac.apply(rh(i),arguments)}function hK(){var e=[.5],t=[0,1],r,n=1;function s(a){return a!=null&&a<=a?t[P2(e,a,0,n)]:r}return s.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var i=t.indexOf(a);return[e[i-1],e[i]]},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return hK().domain(e).range(t).unknown(r)},Ac.apply(s,arguments)}const tk=new Date,rk=new Date;function ii(e,t,r,n){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const i=s(a),o=s.ceil(a);return a-i<o-a?i:o},s.offset=(a,i)=>(t(a=new Date(+a),i==null?1:Math.floor(i)),a),s.range=(a,i,o)=>{const l=[];if(a=s.ceil(a),o=o==null?1:Math.floor(o),!(a<i)||!(o>0))return l;let u;do l.push(u=new Date(+a)),t(a,o),e(a);while(u<a&&a<i);return l},s.filter=a=>ii(i=>{if(i>=i)for(;e(i),!a(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;t(i,-1),!a(i););else for(;--o>=0;)for(;t(i,1),!a(i););}),r&&(s.count=(a,i)=>(tk.setTime(+a),rk.setTime(+i),e(tk),e(rk),Math.floor(r(tk,rk))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(n?i=>n(i)%a===0:i=>s.count(0,i)%a===0):s)),s}const u_=ii(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);u_.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ii(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):u_);u_.range;const Vd=1e3,mc=Vd*60,qd=mc*60,d0=qd*24,iN=d0*7,NR=d0*30,nk=d0*365,Zh=ii(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Vd)},(e,t)=>(t-e)/Vd,e=>e.getUTCSeconds());Zh.range;const oN=ii(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Vd)},(e,t)=>{e.setTime(+e+t*mc)},(e,t)=>(t-e)/mc,e=>e.getMinutes());oN.range;const lN=ii(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*mc)},(e,t)=>(t-e)/mc,e=>e.getUTCMinutes());lN.range;const cN=ii(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Vd-e.getMinutes()*mc)},(e,t)=>{e.setTime(+e+t*qd)},(e,t)=>(t-e)/qd,e=>e.getHours());cN.range;const uN=ii(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*qd)},(e,t)=>(t-e)/qd,e=>e.getUTCHours());uN.range;const D2=ii(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*mc)/d0,e=>e.getDate()-1);D2.range;const E3=ii(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/d0,e=>e.getUTCDate()-1);E3.range;const mK=ii(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/d0,e=>Math.floor(e/d0));mK.range;function Zm(e){return ii(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*mc)/iN)}const N3=Zm(0),d_=Zm(1),B6e=Zm(2),$6e=Zm(3),Xp=Zm(4),z6e=Zm(5),U6e=Zm(6);N3.range;d_.range;B6e.range;$6e.range;Xp.range;z6e.range;U6e.range;function eg(e){return ii(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/iN)}const A3=eg(0),f_=eg(1),W6e=eg(2),H6e=eg(3),Jp=eg(4),G6e=eg(5),V6e=eg(6);A3.range;f_.range;W6e.range;H6e.range;Jp.range;G6e.range;V6e.range;const dN=ii(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());dN.range;const fN=ii(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());fN.range;const f0=ii(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());f0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ii(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});f0.range;const h0=ii(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());h0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ii(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});h0.range;function gK(e,t,r,n,s,a){const i=[[Zh,1,Vd],[Zh,5,5*Vd],[Zh,15,15*Vd],[Zh,30,30*Vd],[a,1,mc],[a,5,5*mc],[a,15,15*mc],[a,30,30*mc],[s,1,qd],[s,3,3*qd],[s,6,6*qd],[s,12,12*qd],[n,1,d0],[n,2,2*d0],[r,1,iN],[t,1,NR],[t,3,3*NR],[e,1,nk]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const g=f&&typeof f.range=="function"?f:l(u,d,f),x=g?g.range(u,+d+1):[];return h?x.reverse():x}function l(u,d,f){const h=Math.abs(d-u)/f,g=qE(([,,v])=>v).right(i,h);if(g===i.length)return e.every(w7(u/nk,d/nk,f));if(g===0)return u_.every(Math.max(w7(u,d,f),1));const[x,y]=i[h/i[g-1][2]<i[g][2]/h?g-1:g];return x.every(y)}return[o,l]}const[q6e,K6e]=gK(h0,fN,A3,mK,uN,lN),[Y6e,X6e]=gK(f0,dN,N3,D2,cN,oN);function sk(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ak(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ky(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function J6e(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,a=e.days,i=e.shortDays,o=e.months,l=e.shortMonths,u=Ty(s),d=Cy(s),f=Ty(a),h=Cy(a),g=Ty(i),x=Cy(i),y=Ty(o),v=Cy(o),T=Ty(l),k=Cy(l),b={a:B,A:V,b:R,B:H,c:null,d:DR,e:DR,f:wke,g:jke,G:Mke,H:xke,I:yke,j:vke,L:pK,m:bke,M:_ke,p:U,q:I,Q:RR,s:LR,S:Ske,u:kke,U:Tke,V:Cke,w:Eke,W:Nke,x:null,X:null,y:Ake,Y:Pke,Z:Fke,"%":IR},N={a:W,A:K,b:Z,B:oe,c:null,d:OR,e:OR,f:Rke,g:qke,G:Yke,H:Dke,I:Oke,j:Ike,L:yK,m:Lke,M:Bke,p:J,q:le,Q:RR,s:LR,S:$ke,u:zke,U:Uke,V:Wke,w:Hke,W:Gke,x:null,X:null,y:Vke,Y:Kke,Z:Xke,"%":IR},E={a:O,A:L,b:q,B:Q,c:ae,d:MR,e:MR,f:hke,g:PR,G:jR,H:FR,I:FR,j:cke,L:fke,m:lke,M:uke,p:A,q:oke,Q:gke,s:pke,S:dke,u:rke,U:nke,V:ske,w:tke,W:ake,x:te,X:ne,y:PR,Y:jR,Z:ike,"%":mke};b.x=P(r,b),b.X=P(n,b),b.c=P(t,b),N.x=P(r,N),N.X=P(n,N),N.c=P(t,N);function P(ue,de){return function(Te){var ie=[],xe=-1,Ae=0,Me=ue.length,Je,He,It;for(Te instanceof Date||(Te=new Date(+Te));++xe<Me;)ue.charCodeAt(xe)===37&&(ie.push(ue.slice(Ae,xe)),(He=AR[Je=ue.charAt(++xe)])!=null?Je=ue.charAt(++xe):He=Je==="e"?" ":"0",(It=de[Je])&&(Je=It(Te,He)),ie.push(Je),Ae=xe+1);return ie.push(ue.slice(Ae,xe)),ie.join("")}}function M(ue,de){return function(Te){var ie=ky(1900,void 0,1),xe=j(ie,ue,Te+="",0),Ae,Me;if(xe!=Te.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(de&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(Ae=ak(ky(ie.y,0,1)),Me=Ae.getUTCDay(),Ae=Me>4||Me===0?f_.ceil(Ae):f_(Ae),Ae=E3.offset(Ae,(ie.V-1)*7),ie.y=Ae.getUTCFullYear(),ie.m=Ae.getUTCMonth(),ie.d=Ae.getUTCDate()+(ie.w+6)%7):(Ae=sk(ky(ie.y,0,1)),Me=Ae.getDay(),Ae=Me>4||Me===0?d_.ceil(Ae):d_(Ae),Ae=D2.offset(Ae,(ie.V-1)*7),ie.y=Ae.getFullYear(),ie.m=Ae.getMonth(),ie.d=Ae.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),Me="Z"in ie?ak(ky(ie.y,0,1)).getUTCDay():sk(ky(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(Me+5)%7:ie.w+ie.U*7-(Me+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,ak(ie)):sk(ie)}}function j(ue,de,Te,ie){for(var xe=0,Ae=de.length,Me=Te.length,Je,He;xe<Ae;){if(ie>=Me)return-1;if(Je=de.charCodeAt(xe++),Je===37){if(Je=de.charAt(xe++),He=E[Je in AR?de.charAt(xe++):Je],!He||(ie=He(ue,Te,ie))<0)return-1}else if(Je!=Te.charCodeAt(ie++))return-1}return ie}function A(ue,de,Te){var ie=u.exec(de.slice(Te));return ie?(ue.p=d.get(ie[0].toLowerCase()),Te+ie[0].length):-1}function O(ue,de,Te){var ie=g.exec(de.slice(Te));return ie?(ue.w=x.get(ie[0].toLowerCase()),Te+ie[0].length):-1}function L(ue,de,Te){var ie=f.exec(de.slice(Te));return ie?(ue.w=h.get(ie[0].toLowerCase()),Te+ie[0].length):-1}function q(ue,de,Te){var ie=T.exec(de.slice(Te));return ie?(ue.m=k.get(ie[0].toLowerCase()),Te+ie[0].length):-1}function Q(ue,de,Te){var ie=y.exec(de.slice(Te));return ie?(ue.m=v.get(ie[0].toLowerCase()),Te+ie[0].length):-1}function ae(ue,de,Te){return j(ue,t,de,Te)}function te(ue,de,Te){return j(ue,r,de,Te)}function ne(ue,de,Te){return j(ue,n,de,Te)}function B(ue){return i[ue.getDay()]}function V(ue){return a[ue.getDay()]}function R(ue){return l[ue.getMonth()]}function H(ue){return o[ue.getMonth()]}function U(ue){return s[+(ue.getHours()>=12)]}function I(ue){return 1+~~(ue.getMonth()/3)}function W(ue){return i[ue.getUTCDay()]}function K(ue){return a[ue.getUTCDay()]}function Z(ue){return l[ue.getUTCMonth()]}function oe(ue){return o[ue.getUTCMonth()]}function J(ue){return s[+(ue.getUTCHours()>=12)]}function le(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var de=P(ue+="",b);return de.toString=function(){return ue},de},parse:function(ue){var de=M(ue+="",!1);return de.toString=function(){return ue},de},utcFormat:function(ue){var de=P(ue+="",N);return de.toString=function(){return ue},de},utcParse:function(ue){var de=M(ue+="",!0);return de.toString=function(){return ue},de}}}var AR={"-":"",_:" ",0:"0"},Ti=/^\s*\d+/,Q6e=/^%/,Z6e=/[\\^$*+?|[\]().{}]/g;function Wn(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",a=s.length;return n+(a<r?new Array(r-a+1).join(t)+s:s)}function eke(e){return e.replace(Z6e,"\\$&")}function Ty(e){return new RegExp("^(?:"+e.map(eke).join("|")+")","i")}function Cy(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function tke(e,t,r){var n=Ti.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function rke(e,t,r){var n=Ti.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function nke(e,t,r){var n=Ti.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function ske(e,t,r){var n=Ti.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function ake(e,t,r){var n=Ti.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function jR(e,t,r){var n=Ti.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function PR(e,t,r){var n=Ti.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function ike(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function oke(e,t,r){var n=Ti.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function lke(e,t,r){var n=Ti.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function MR(e,t,r){var n=Ti.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function cke(e,t,r){var n=Ti.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function FR(e,t,r){var n=Ti.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function uke(e,t,r){var n=Ti.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function dke(e,t,r){var n=Ti.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function fke(e,t,r){var n=Ti.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function hke(e,t,r){var n=Ti.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function mke(e,t,r){var n=Q6e.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function gke(e,t,r){var n=Ti.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function pke(e,t,r){var n=Ti.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function DR(e,t){return Wn(e.getDate(),t,2)}function xke(e,t){return Wn(e.getHours(),t,2)}function yke(e,t){return Wn(e.getHours()%12||12,t,2)}function vke(e,t){return Wn(1+D2.count(f0(e),e),t,3)}function pK(e,t){return Wn(e.getMilliseconds(),t,3)}function wke(e,t){return pK(e,t)+"000"}function bke(e,t){return Wn(e.getMonth()+1,t,2)}function _ke(e,t){return Wn(e.getMinutes(),t,2)}function Ske(e,t){return Wn(e.getSeconds(),t,2)}function kke(e){var t=e.getDay();return t===0?7:t}function Tke(e,t){return Wn(N3.count(f0(e)-1,e),t,2)}function xK(e){var t=e.getDay();return t>=4||t===0?Xp(e):Xp.ceil(e)}function Cke(e,t){return e=xK(e),Wn(Xp.count(f0(e),e)+(f0(e).getDay()===4),t,2)}function Eke(e){return e.getDay()}function Nke(e,t){return Wn(d_.count(f0(e)-1,e),t,2)}function Ake(e,t){return Wn(e.getFullYear()%100,t,2)}function jke(e,t){return e=xK(e),Wn(e.getFullYear()%100,t,2)}function Pke(e,t){return Wn(e.getFullYear()%1e4,t,4)}function Mke(e,t){var r=e.getDay();return e=r>=4||r===0?Xp(e):Xp.ceil(e),Wn(e.getFullYear()%1e4,t,4)}function Fke(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Wn(t/60|0,"0",2)+Wn(t%60,"0",2)}function OR(e,t){return Wn(e.getUTCDate(),t,2)}function Dke(e,t){return Wn(e.getUTCHours(),t,2)}function Oke(e,t){return Wn(e.getUTCHours()%12||12,t,2)}function Ike(e,t){return Wn(1+E3.count(h0(e),e),t,3)}function yK(e,t){return Wn(e.getUTCMilliseconds(),t,3)}function Rke(e,t){return yK(e,t)+"000"}function Lke(e,t){return Wn(e.getUTCMonth()+1,t,2)}function Bke(e,t){return Wn(e.getUTCMinutes(),t,2)}function $ke(e,t){return Wn(e.getUTCSeconds(),t,2)}function zke(e){var t=e.getUTCDay();return t===0?7:t}function Uke(e,t){return Wn(A3.count(h0(e)-1,e),t,2)}function vK(e){var t=e.getUTCDay();return t>=4||t===0?Jp(e):Jp.ceil(e)}function Wke(e,t){return e=vK(e),Wn(Jp.count(h0(e),e)+(h0(e).getUTCDay()===4),t,2)}function Hke(e){return e.getUTCDay()}function Gke(e,t){return Wn(f_.count(h0(e)-1,e),t,2)}function Vke(e,t){return Wn(e.getUTCFullYear()%100,t,2)}function qke(e,t){return e=vK(e),Wn(e.getUTCFullYear()%100,t,2)}function Kke(e,t){return Wn(e.getUTCFullYear()%1e4,t,4)}function Yke(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Jp(e):Jp.ceil(e),Wn(e.getUTCFullYear()%1e4,t,4)}function Xke(){return"+0000"}function IR(){return"%"}function RR(e){return+e}function LR(e){return Math.floor(+e/1e3)}var tp,wK,bK;Jke({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Jke(e){return tp=J6e(e),wK=tp.format,tp.parse,bK=tp.utcFormat,tp.utcParse,tp}function Qke(e){return new Date(e)}function Zke(e){return e instanceof Date?+e:+new Date(+e)}function hN(e,t,r,n,s,a,i,o,l,u){var d=ZE(),f=d.invert,h=d.domain,g=u(".%L"),x=u(":%S"),y=u("%I:%M"),v=u("%I %p"),T=u("%a %d"),k=u("%b %d"),b=u("%B"),N=u("%Y");function E(P){return(l(P)<P?g:o(P)<P?x:i(P)<P?y:a(P)<P?v:n(P)<P?s(P)<P?T:k:r(P)<P?b:N)(P)}return d.invert=function(P){return new Date(f(P))},d.domain=function(P){return arguments.length?h(Array.from(P,Zke)):h().map(Qke)},d.ticks=function(P){var M=h();return e(M[0],M[M.length-1],P??10)},d.tickFormat=function(P,M){return M==null?E:u(M)},d.nice=function(P){var M=h();return(!P||typeof P.range!="function")&&(P=t(M[0],M[M.length-1],P??10)),P?h(oK(M,P)):d},d.copy=function(){return F2(d,hN(e,t,r,n,s,a,i,o,l,u))},d}function e8e(){return Ac.apply(hN(Y6e,X6e,f0,dN,N3,D2,cN,oN,Zh,wK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function t8e(){return Ac.apply(hN(q6e,K6e,h0,fN,A3,E3,uN,lN,Zh,bK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function j3(){var e=0,t=1,r,n,s,a,i=Bo,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:i(s===0?.5:(f=(a(f)-r)*s,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=a(e=+e),n=a(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var g,x;return arguments.length?([g,x]=h,i=f(g,x),u):[i(0),i(1)]}}return u.range=d(T1),u.rangeRound=d(QE),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,r=f(e),n=f(t),s=r===n?0:1/(n-r),u}}function nh(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function _K(){var e=rh(j3()(Bo));return e.copy=function(){return nh(e,_K())},_0.apply(e,arguments)}function SK(){var e=rN(j3()).domain([1,10]);return e.copy=function(){return nh(e,SK()).base(e.base())},_0.apply(e,arguments)}function kK(){var e=nN(j3());return e.copy=function(){return nh(e,kK()).constant(e.constant())},_0.apply(e,arguments)}function mN(){var e=sN(j3());return e.copy=function(){return nh(e,mN()).exponent(e.exponent())},_0.apply(e,arguments)}function r8e(){return mN.apply(null,arguments).exponent(.5)}function TK(){var e=[],t=Bo;function r(n){if(n!=null&&!isNaN(n=+n))return t((P2(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Pf),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,a)=>zSe(e,a/n))},r.copy=function(){return TK(t).domain(e)},_0.apply(r,arguments)}function P3(){var e=0,t=.5,r=1,n=1,s,a,i,o,l,u=Bo,d,f=!1,h;function g(y){return isNaN(y=+y)?h:(y=.5+((y=+d(y))-a)*(n*y<n*a?o:l),u(f?Math.max(0,Math.min(1,y)):y))}g.domain=function(y){return arguments.length?([e,t,r]=y,s=d(e=+e),a=d(t=+t),i=d(r=+r),o=s===a?0:.5/(a-s),l=a===i?0:.5/(i-a),n=a<s?-1:1,g):[e,t,r]},g.clamp=function(y){return arguments.length?(f=!!y,g):f},g.interpolator=function(y){return arguments.length?(u=y,g):u};function x(y){return function(v){var T,k,b;return arguments.length?([T,k,b]=v,u=m6e(y,[T,k,b]),g):[u(0),u(.5),u(1)]}}return g.range=x(T1),g.rangeRound=x(QE),g.unknown=function(y){return arguments.length?(h=y,g):h},function(y){return d=y,s=y(e),a=y(t),i=y(r),o=s===a?0:.5/(a-s),l=a===i?0:.5/(i-a),n=a<s?-1:1,g}}function CK(){var e=rh(P3()(Bo));return e.copy=function(){return nh(e,CK())},_0.apply(e,arguments)}function EK(){var e=rN(P3()).domain([.1,1,10]);return e.copy=function(){return nh(e,EK()).base(e.base())},_0.apply(e,arguments)}function NK(){var e=nN(P3());return e.copy=function(){return nh(e,NK()).constant(e.constant())},_0.apply(e,arguments)}function gN(){var e=sN(P3());return e.copy=function(){return nh(e,gN()).exponent(e.exponent())},_0.apply(e,arguments)}function n8e(){return gN.apply(null,arguments).exponent(.5)}const Iy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:YE,scaleDiverging:CK,scaleDivergingLog:EK,scaleDivergingPow:gN,scaleDivergingSqrt:n8e,scaleDivergingSymlog:NK,scaleIdentity:iK,scaleImplicit:b7,scaleLinear:aK,scaleLog:lK,scaleOrdinal:KE,scalePoint:HSe,scalePow:aN,scaleQuantile:dK,scaleQuantize:fK,scaleRadial:uK,scaleSequential:_K,scaleSequentialLog:SK,scaleSequentialPow:mN,scaleSequentialQuantile:TK,scaleSequentialSqrt:r8e,scaleSequentialSymlog:kK,scaleSqrt:R6e,scaleSymlog:cK,scaleThreshold:hK,scaleTime:e8e,scaleUtc:t8e,tickFormat:sK},Symbol.toStringTag,{value:"Module"}));var sh=e=>e.chartData,s8e=Ft([sh],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),pN=(e,t,r,n)=>n?s8e(e):sh(e);function Qp(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(ou(t)&&ou(r))return!0}return!1}function BR(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function a8e(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,a;if(ou(r))s=r;else if(typeof r=="function")return;if(ou(n))a=n;else if(typeof n=="function")return;var i=[s,a];if(Qp(i))return i}}function i8e(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Qp(n))return BR(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,a]=e,i,o;if(s==="auto")t!=null&&(i=Math.min(...t));else if(nn(s))i=s;else if(typeof s=="function")try{t!=null&&(i=s(t?.[0]))}catch{}else if(typeof s=="string"&&PI.test(s)){var l=PI.exec(s);if(l==null||t==null)i=void 0;else{var u=+l[1];i=t[0]-u}}else i=t?.[0];if(a==="auto")t!=null&&(o=Math.max(...t));else if(nn(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t?.[1]))}catch{}else if(typeof a=="string"&&MI.test(a)){var d=MI.exec(a);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t?.[1];var h=[i,o];if(Qp(h))return t==null?h:BR(h,t,r)}}}var C1=1e9,o8e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},yN,Bs=!0,kc="[DecimalError] ",mm=kc+"Invalid argument: ",xN=kc+"Exponent out of range: ",E1=Math.floor,Wh=Math.pow,l8e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Fl,xi=1e7,Cs=7,AK=9007199254740991,h_=E1(AK/Cs),jr={};jr.absoluteValue=jr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};jr.comparedTo=jr.cmp=function(e){var t,r,n,s,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===s?0:n>s^a.s<0?1:-1};jr.decimalPlaces=jr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Cs;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};jr.dividedBy=jr.div=function(e){return t0(this,new this.constructor(e))};jr.dividedToIntegerBy=jr.idiv=function(e){var t=this,r=t.constructor;return ps(t0(t,new r(e),0,1),r.precision)};jr.equals=jr.eq=function(e){return!this.cmp(e)};jr.exponent=function(){return Wa(this)};jr.greaterThan=jr.gt=function(e){return this.cmp(e)>0};jr.greaterThanOrEqualTo=jr.gte=function(e){return this.cmp(e)>=0};jr.isInteger=jr.isint=function(){return this.e>this.d.length-2};jr.isNegative=jr.isneg=function(){return this.s<0};jr.isPositive=jr.ispos=function(){return this.s>0};jr.isZero=function(){return this.s===0};jr.lessThan=jr.lt=function(e){return this.cmp(e)<0};jr.lessThanOrEqualTo=jr.lte=function(e){return this.cmp(e)<1};jr.logarithm=jr.log=function(e){var t,r=this,n=r.constructor,s=n.precision,a=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Fl))throw Error(kc+"NaN");if(r.s<1)throw Error(kc+(r.s?"NaN":"-Infinity"));return r.eq(Fl)?new n(0):(Bs=!1,t=t0(qv(r,a),qv(e,a),a),Bs=!0,ps(t,s))};jr.minus=jr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?MK(t,e):jK(t,(e.s=-e.s,e))};jr.modulo=jr.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(kc+"NaN");return r.s?(Bs=!1,t=t0(r,e,0,1).times(e),Bs=!0,r.minus(t)):ps(new n(r),s)};jr.naturalExponential=jr.exp=function(){return PK(this)};jr.naturalLogarithm=jr.ln=function(){return qv(this)};jr.negated=jr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};jr.plus=jr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?jK(t,e):MK(t,(e.s=-e.s,e))};jr.precision=jr.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(mm+e);if(t=Wa(s)+1,n=s.d.length-1,r=n*Cs+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};jr.squareRoot=jr.sqrt=function(){var e,t,r,n,s,a,i,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(kc+"NaN")}for(e=Wa(o),Bs=!1,s=Math.sqrt(+o),s==0||s==1/0?(t=Wu(o.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=E1((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(s.toString()),r=l.precision,s=i=r+3;;)if(a=n,n=a.plus(t0(o,a,i+2)).times(.5),Wu(a.d).slice(0,i)===(t=Wu(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),s==i&&t=="4999"){if(ps(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if(t!="9999")break;i+=4}return Bs=!0,ps(n,r)};jr.times=jr.mul=function(e){var t,r,n,s,a,i,o,l,u,d=this,f=d.constructor,h=d.d,g=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,l=h.length,u=g.length,l<u&&(a=h,h=g,g=a,i=l,l=u,u=i),a=[],i=l+u,n=i;n--;)a.push(0);for(n=u;--n>=0;){for(t=0,s=l+n;s>n;)o=a[s]+g[n]*h[s-n-1]+t,a[s--]=o%xi|0,t=o/xi|0;a[s]=(a[s]+t)%xi|0}for(;!a[--i];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,Bs?ps(e,f.precision):e};jr.toDecimalPlaces=jr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Qu(e,0,C1),t===void 0?t=n.rounding:Qu(t,0,8),ps(r,e+Wa(r)+1,t))};jr.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Rm(n,!0):(Qu(e,0,C1),t===void 0?t=s.rounding:Qu(t,0,8),n=ps(new s(n),e+1,t),r=Rm(n,!0,e+1)),r};jr.toFixed=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?Rm(s):(Qu(e,0,C1),t===void 0?t=a.rounding:Qu(t,0,8),n=ps(new a(s),e+Wa(s)+1,t),r=Rm(n.abs(),!1,e+Wa(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};jr.toInteger=jr.toint=function(){var e=this,t=e.constructor;return ps(new t(e),Wa(e)+1,t.rounding)};jr.toNumber=function(){return+this};jr.toPower=jr.pow=function(e){var t,r,n,s,a,i,o=this,l=o.constructor,u=12,d=+(e=new l(e));if(!e.s)return new l(Fl);if(o=new l(o),!o.s){if(e.s<1)throw Error(kc+"Infinity");return o}if(o.eq(Fl))return o;if(n=l.precision,e.eq(Fl))return ps(o,n);if(t=e.e,r=e.d.length-1,i=t>=r,a=o.s,i){if((r=d<0?-d:d)<=AK){for(s=new l(Fl),t=Math.ceil(n/Cs+4),Bs=!1;r%2&&(s=s.times(o),zR(s.d,t)),r=E1(r/2),r!==0;)o=o.times(o),zR(o.d,t);return Bs=!0,e.s<0?new l(Fl).div(s):ps(s,n)}}else if(a<0)throw Error(kc+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Bs=!1,s=e.times(qv(o,n+u)),Bs=!0,s=PK(s),s.s=a,s};jr.toPrecision=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?(r=Wa(s),n=Rm(s,r<=a.toExpNeg||r>=a.toExpPos)):(Qu(e,1,C1),t===void 0?t=a.rounding:Qu(t,0,8),s=ps(new a(s),e,t),r=Wa(s),n=Rm(s,e<=r||r<=a.toExpNeg,e)),n};jr.toSignificantDigits=jr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Qu(e,1,C1),t===void 0?t=n.rounding:Qu(t,0,8)),ps(new n(r),e,t)};jr.toString=jr.valueOf=jr.val=jr.toJSON=jr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Wa(e),r=e.constructor;return Rm(e,t<=r.toExpNeg||t>=r.toExpPos)};function jK(e,t){var r,n,s,a,i,o,l,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Bs?ps(t,f):t;if(l=e.d,u=t.d,i=e.e,s=t.e,l=l.slice(),a=i-s,a){for(a<0?(n=l,a=-a,o=u.length):(n=u,s=i,o=l.length),i=Math.ceil(f/Cs),o=i>o?i+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=l.length,a=u.length,o-a<0&&(a=o,n=u,u=l,l=n),r=0;a;)r=(l[--a]=l[a]+u[a]+r)/xi|0,l[a]%=xi;for(r&&(l.unshift(r),++s),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=s,Bs?ps(t,f):t}function Qu(e,t,r){if(e!==~~e||e<t||e>r)throw Error(mm+e)}function Wu(e){var t,r,n,s=e.length-1,a="",i=e[0];if(s>0){for(a+=i,t=1;t<s;t++)n=e[t]+"",r=Cs-n.length,r&&(a+=pf(r)),a+=n;i=e[t],n=i+"",r=Cs-n.length,r&&(a+=pf(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return a+i}var t0=(function(){function e(n,s){var a,i=0,o=n.length;for(n=n.slice();o--;)a=n[o]*s+i,n[o]=a%xi|0,i=a/xi|0;return i&&n.unshift(i),n}function t(n,s,a,i){var o,l;if(a!=i)l=a>i?1:-1;else for(o=l=0;o<a;o++)if(n[o]!=s[o]){l=n[o]>s[o]?1:-1;break}return l}function r(n,s,a){for(var i=0;a--;)n[a]-=i,i=n[a]<s[a]?1:0,n[a]=i*xi+n[a]-s[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,a,i){var o,l,u,d,f,h,g,x,y,v,T,k,b,N,E,P,M,j,A=n.constructor,O=n.s==s.s?1:-1,L=n.d,q=s.d;if(!n.s)return new A(n);if(!s.s)throw Error(kc+"Division by zero");for(l=n.e-s.e,M=q.length,E=L.length,g=new A(O),x=g.d=[],u=0;q[u]==(L[u]||0);)++u;if(q[u]>(L[u]||0)&&--l,a==null?k=a=A.precision:i?k=a+(Wa(n)-Wa(s))+1:k=a,k<0)return new A(0);if(k=k/Cs+2|0,u=0,M==1)for(d=0,q=q[0],k++;(u<E||d)&&k--;u++)b=d*xi+(L[u]||0),x[u]=b/q|0,d=b%q|0;else{for(d=xi/(q[0]+1)|0,d>1&&(q=e(q,d),L=e(L,d),M=q.length,E=L.length),N=M,y=L.slice(0,M),v=y.length;v<M;)y[v++]=0;j=q.slice(),j.unshift(0),P=q[0],q[1]>=xi/2&&++P;do d=0,o=t(q,y,M,v),o<0?(T=y[0],M!=v&&(T=T*xi+(y[1]||0)),d=T/P|0,d>1?(d>=xi&&(d=xi-1),f=e(q,d),h=f.length,v=y.length,o=t(f,y,h,v),o==1&&(d--,r(f,M<h?j:q,h))):(d==0&&(o=d=1),f=q.slice()),h=f.length,h<v&&f.unshift(0),r(y,f,v),o==-1&&(v=y.length,o=t(q,y,M,v),o<1&&(d++,r(y,M<v?j:q,v))),v=y.length):o===0&&(d++,y=[0]),x[u++]=d,o&&y[0]?y[v++]=L[N]||0:(y=[L[N]],v=1);while((N++<E||y[0]!==void 0)&&k--)}return x[0]||x.shift(),g.e=l,ps(g,i?a+Wa(g)+1:a)}})();function PK(e,t){var r,n,s,a,i,o,l=0,u=0,d=e.constructor,f=d.precision;if(Wa(e)>16)throw Error(xN+Wa(e));if(!e.s)return new d(Fl);for(Bs=!1,o=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(Wh(2,u))/Math.LN10*2+5|0,o+=n,r=s=a=new d(Fl),d.precision=o;;){if(s=ps(s.times(e),o),r=r.times(++l),i=a.plus(t0(s,r,o)),Wu(i.d).slice(0,o)===Wu(a.d).slice(0,o)){for(;u--;)a=ps(a.times(a),o);return d.precision=f,t==null?(Bs=!0,ps(a,f)):a}a=i}}function Wa(e){for(var t=e.e*Cs,r=e.d[0];r>=10;r/=10)t++;return t}function ik(e,t,r){if(t>e.LN10.sd())throw Bs=!0,r&&(e.precision=r),Error(kc+"LN10 precision limit exceeded");return ps(new e(e.LN10),t)}function pf(e){for(var t="";e--;)t+="0";return t}function qv(e,t){var r,n,s,a,i,o,l,u,d,f=1,h=10,g=e,x=g.d,y=g.constructor,v=y.precision;if(g.s<1)throw Error(kc+(g.s?"NaN":"-Infinity"));if(g.eq(Fl))return new y(0);if(t==null?(Bs=!1,u=v):u=t,g.eq(10))return t==null&&(Bs=!0),ik(y,u);if(u+=h,y.precision=u,r=Wu(x),n=r.charAt(0),a=Wa(g),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(e),r=Wu(g.d),n=r.charAt(0),f++;a=Wa(g),n>1?(g=new y("0."+r),a++):g=new y(n+"."+r.slice(1))}else return l=ik(y,u+2,v).times(a+""),g=qv(new y(n+"."+r.slice(1)),u-h).plus(l),y.precision=v,t==null?(Bs=!0,ps(g,v)):g;for(o=i=g=t0(g.minus(Fl),g.plus(Fl),u),d=ps(g.times(g),u),s=3;;){if(i=ps(i.times(d),u),l=o.plus(t0(i,new y(s),u)),Wu(l.d).slice(0,u)===Wu(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(ik(y,u+2,v).times(a+""))),o=t0(o,new y(f),u),y.precision=v,t==null?(Bs=!0,ps(o,v)):o;o=l,s+=2}}function $R(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=E1(r/Cs),e.d=[],n=(r+1)%Cs,r<0&&(n+=Cs),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Cs;n<s;)e.d.push(+t.slice(n,n+=Cs));t=t.slice(n),n=Cs-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Bs&&(e.e>h_||e.e<-h_))throw Error(xN+r)}else e.s=0,e.e=0,e.d=[0];return e}function ps(e,t,r){var n,s,a,i,o,l,u,d,f=e.d;for(i=1,a=f[0];a>=10;a/=10)i++;if(n=t-i,n<0)n+=Cs,s=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Cs),a=f.length,d>=a)return e;for(u=a=f[d],i=1;a>=10;a/=10)i++;n%=Cs,s=n-Cs+i}if(r!==void 0&&(a=Wh(10,i-s-1),o=u/a%10|0,l=t<0||f[d+1]!==void 0||u%a,l=r<4?(o||l)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?s>0?u/Wh(10,i-s):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return l?(a=Wa(e),f.length=1,t=t-a-1,f[0]=Wh(10,(Cs-t%Cs)%Cs),e.e=E1(-t/Cs)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,a=1,d--):(f.length=d+1,a=Wh(10,Cs-n),f[d]=s>0?(u/Wh(10,i-s)%Wh(10,s)|0)*a:0),l)for(;;)if(d==0){(f[0]+=a)==xi&&(f[0]=1,++e.e);break}else{if(f[d]+=a,f[d]!=xi)break;f[d--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(Bs&&(e.e>h_||e.e<-h_))throw Error(xN+Wa(e));return e}function MK(e,t){var r,n,s,a,i,o,l,u,d,f,h=e.constructor,g=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Bs?ps(t,g):t;if(l=e.d,f=t.d,n=t.e,u=e.e,l=l.slice(),i=u-n,i){for(d=i<0,d?(r=l,i=-i,o=f.length):(r=f,n=u,o=l.length),s=Math.max(Math.ceil(g/Cs),o)+2,i>s&&(i=s,r.length=1),r.reverse(),s=i;s--;)r.push(0);r.reverse()}else{for(s=l.length,o=f.length,d=s<o,d&&(o=s),s=0;s<o;s++)if(l[s]!=f[s]){d=l[s]<f[s];break}i=0}for(d&&(r=l,l=f,f=r,t.s=-t.s),o=l.length,s=f.length-o;s>0;--s)l[o++]=0;for(s=f.length;s>i;){if(l[--s]<f[s]){for(a=s;a&&l[--a]===0;)l[a]=xi-1;--l[a],l[s]+=xi}l[s]-=f[s]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,Bs?ps(t,g):t):new h(0)}function Rm(e,t,r){var n,s=Wa(e),a=Wu(e.d),i=a.length;return t?(r&&(n=r-i)>0?a=a.charAt(0)+"."+a.slice(1)+pf(n):i>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+pf(-s-1)+a,r&&(n=r-i)>0&&(a+=pf(n))):s>=i?(a+=pf(s+1-i),r&&(n=r-s-1)>0&&(a=a+"."+pf(n))):((n=s+1)<i&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-i)>0&&(s+1===i&&(a+="."),a+=pf(n))),e.s<0?"-"+a:a}function zR(e,t){if(e.length>t)return e.length=t,!0}function FK(e){var t,r,n;function s(a){var i=this;if(!(i instanceof s))return new s(a);if(i.constructor=s,a instanceof s){i.s=a.s,i.e=a.e,i.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(mm+a);if(a>0)i.s=1;else if(a<0)a=-a,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(a===~~a&&a<1e7){i.e=0,i.d=[a];return}return $R(i,a.toString())}else if(typeof a!="string")throw Error(mm+a);if(a.charCodeAt(0)===45?(a=a.slice(1),i.s=-1):i.s=1,l8e.test(a))$R(i,a);else throw Error(mm+a)}if(s.prototype=jr,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=FK,s.config=s.set=c8e,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function c8e(e){if(!e||typeof e!="object")throw Error(kc+"Object expected");var t,r,n,s=["precision",1,C1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(E1(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(mm+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(mm+r+": "+n);return this}var yN=FK(o8e);Fl=new yN(1);const ss=yN;var u8e=e=>e,DK={},OK=e=>e===DK,UR=e=>function t(){return arguments.length===0||arguments.length===1&&OK(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},IK=(e,t)=>e===1?t:UR(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var a=n.filter(i=>i!==DK).length;return a>=e?t(...n):IK(e-a,UR(function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var u=n.map(d=>OK(d)?o.shift():d);return t(...u,...o)}))}),M3=e=>IK(e.length,e),T7=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},d8e=M3((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),f8e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return u8e;var s=r.reverse(),a=s[0],i=s.slice(1);return function(){return i.reduce((o,l)=>l(o),a(...arguments))}},C7=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),RK=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t&&s.every((i,o)=>{var l;return i===((l=t)===null||l===void 0?void 0:l[o])})||(t=s,r=e(...s)),r}};function LK(e){var t;return e===0?t=1:t=Math.floor(new ss(e).abs().log(10).toNumber())+1,t}function BK(e,t,r){for(var n=new ss(e),s=0,a=[];n.lt(t)&&s<1e5;)a.push(n.toNumber()),n=n.add(r),s++;return a}M3((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});M3((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});M3((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var $K=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},zK=(e,t,r)=>{if(e.lte(0))return new ss(0);var n=LK(e.toNumber()),s=new ss(10).pow(n),a=e.div(s),i=n!==1?.05:.1,o=new ss(Math.ceil(a.div(i).toNumber())).add(r).mul(i),l=o.mul(s);return t?new ss(l.toNumber()):new ss(Math.ceil(l.toNumber()))},h8e=(e,t,r)=>{var n=new ss(1),s=new ss(e);if(!s.isint()&&r){var a=Math.abs(e);a<1?(n=new ss(10).pow(LK(e)-1),s=new ss(Math.floor(s.div(n).toNumber())).mul(n)):a>1&&(s=new ss(Math.floor(e)))}else e===0?s=new ss(Math.floor((t-1)/2)):r||(s=new ss(Math.floor(e)));var i=Math.floor((t-1)/2),o=f8e(d8e(l=>s.add(new ss(l-i).mul(n)).toNumber()),T7);return o(0,t)},UK=function(t,r,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ss(0),tickMin:new ss(0),tickMax:new ss(0)};var i=zK(new ss(r).sub(t).div(n-1),s,a),o;t<=0&&r>=0?o=new ss(0):(o=new ss(t).add(r).div(2),o=o.sub(new ss(o).mod(i)));var l=Math.ceil(o.sub(t).div(i).toNumber()),u=Math.ceil(new ss(r).sub(o).div(i).toNumber()),d=l+u+1;return d>n?UK(t,r,n,s,a+1):(d<n&&(u=r>0?u+(n-d):u,l=r>0?l:l+(n-d)),{step:i,tickMin:o.sub(new ss(l).mul(i)),tickMax:o.add(new ss(u).mul(i))})};function m8e(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[i,o]=$K([t,r]);if(i===-1/0||o===1/0){var l=o===1/0?[i,...T7(0,n-1).map(()=>1/0)]:[...T7(0,n-1).map(()=>-1/0),o];return t>r?C7(l):l}if(i===o)return h8e(i,n,s);var{step:u,tickMin:d,tickMax:f}=UK(i,o,a,s,0),h=BK(d,f.add(new ss(.1).mul(u)),u);return t>r?C7(h):h}function g8e(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,i]=$K([r,n]);if(a===-1/0||i===1/0)return[r,n];if(a===i)return[a];var o=Math.max(t,2),l=zK(new ss(i).sub(a).div(o-1),s,0),u=[...BK(new ss(a),new ss(i),l),i];return s===!1&&(u=u.map(d=>Math.round(d))),r>n?C7(u):u}var p8e=RK(m8e),x8e=RK(g8e),y8e=e=>e.rootProps.barCategoryGap,F3=e=>e.rootProps.stackOffset,vN=e=>e.options.chartName,wN=e=>e.rootProps.syncId,WK=e=>e.rootProps.syncMethod,bN=e=>e.options.eventEmitter,Ud={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Tl={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},D3=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},v8e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ud.angleAxisId,includeHidden:!1,name:void 0,reversed:Ud.reversed,scale:Ud.scale,tick:Ud.tick,tickCount:void 0,ticks:void 0,type:Ud.type,unit:void 0},w8e={allowDataOverflow:Tl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Tl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Tl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Tl.scale,tick:Tl.tick,tickCount:Tl.tickCount,ticks:void 0,type:Tl.type,unit:void 0},b8e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ud.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ud.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ud.scale,tick:Ud.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},_8e={allowDataOverflow:Tl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Tl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Tl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Tl.scale,tick:Tl.tick,tickCount:Tl.tickCount,ticks:void 0,type:"category",unit:void 0},_N=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?b8e:v8e,SN=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?_8e:w8e,O3=e=>e.polarOptions,kN=Ft([w0,b0,Qi],A3e),HK=Ft([O3,kN],(e,t)=>{if(e!=null)return Wf(e.innerRadius,t,0)}),GK=Ft([O3,kN],(e,t)=>{if(e!=null)return Wf(e.outerRadius,t,t*.8)}),S8e=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},VK=Ft([O3],S8e);Ft([_N,VK],D3);var qK=Ft([kN,HK,GK],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Ft([SN,qK],D3);var KK=Ft([Ds,O3,HK,GK,w0,b0],(e,t,r,n,s,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:i,cy:o,startAngle:l,endAngle:u}=t;return{cx:Wf(i,s,s/2),cy:Wf(o,a,a/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:u,clockWise:!1}}}),Ga=(e,t)=>t,I3=(e,t,r)=>r;function YK(e){return e?.id}var oi=e=>{var t=Ds(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},N1=e=>e.tooltip.settings.axisId,Ci=e=>{var t=oi(e),r=N1(e);return O2(e,t,r)},XK=Ft([Ci],e=>e?.dataKey);function JK(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:a}=r,i=new Map;return e.forEach(o=>{var l,u=(l=o.data)!==null&&l!==void 0?l:n;if(!(u==null||u.length===0)){var d=YK(o);u.forEach((f,h)=>{var g=a==null||s?h:String(Uo(f,a,null)),x=Uo(f,o.dataKey,0),y;i.has(g)?y=i.get(g):y={},Object.assign(y,{[d]:x}),i.set(g,y)})}}),Array.from(i.values())}function TN(e){return e.stackId!=null&&e.dataKey!=null}function WR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function m_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WR(Object(r),!0).forEach(function(n){k8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k8e(e,t,r){return(t=T8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T8e(e){var t=C8e(e,"string");return typeof t=="symbol"?t:t+""}function C8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E7=[0,"auto"],Sl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},QK=(e,t)=>e.cartesianAxis.xAxis[t],S0=(e,t)=>{var r=QK(e,t);return r??Sl},kl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:E7,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:j2},ZK=(e,t)=>e.cartesianAxis.yAxis[t],k0=(e,t)=>{var r=ZK(e,t);return r??kl},E8e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},CN=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??E8e},ml=(e,t,r)=>{switch(t){case"xAxis":return S0(e,r);case"yAxis":return k0(e,r);case"zAxis":return CN(e,r);case"angleAxis":return _N(e,r);case"radiusAxis":return SN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},N8e=(e,t,r)=>{switch(t){case"xAxis":return S0(e,r);case"yAxis":return k0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},O2=(e,t,r)=>{switch(t){case"xAxis":return S0(e,r);case"yAxis":return k0(e,r);case"angleAxis":return _N(e,r);case"radiusAxis":return SN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},eY=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function tY(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var rY=e=>e.graphicalItems.cartesianItems,A8e=Ft([Ga,I3],tY),nY=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),I2=Ft([rY,ml,A8e],nY),sY=Ft([I2],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(TN)),aY=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),iY=Ft([I2],aY),oY=e=>e.map(t=>t.data).filter(Boolean).flat(1),j8e=Ft([I2],oY),lY=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},EN=Ft([j8e,pN],lY),cY=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:Uo(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Uo(s,n)}))):e.map(n=>({value:n})),R3=Ft([EN,ml,I2],cY);function uY(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function tg(e){return e.filter(t=>Ju(t)||t instanceof Date).map(Number).filter(t=>_c(t)===!1)}function P8e(e,t,r){return!r||typeof t!="number"||_c(t)?[]:r.length?tg(r.flatMap(n=>{var s=Uo(e,n.dataKey),a,i;if(Array.isArray(s)?[a,i]=s:a=i=s,!(!ou(a)||!ou(i)))return[t-a,t+i]})):[]}var M8e=Ft([sY,pN,Ci],JK),dY=(e,t,r)=>{var n={},s=t.reduce((a,i)=>(i.stackId==null||(a[i.stackId]==null&&(a[i.stackId]=[]),a[i.stackId].push(i)),a),n);return Object.fromEntries(Object.entries(s).map(a=>{var[i,o]=a,l=o.map(YK);return[i,{stackedData:H3e(e,l,r),graphicalItems:o}]}))},F8e=Ft([M8e,sY,F3],dY),fY=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(r!=="zAxis"){var a=q3e(e,n,s);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},D8e=Ft([F8e,sh,Ga],fY),hY=(e,t,r,n,s)=>r.length>0?e.flatMap(a=>r.flatMap(i=>{var o,l,u=(o=n[i.id])===null||o===void 0?void 0:o.filter(f=>uY(s,f)),d=Uo(a,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:d,errorDomain:P8e(a,d,u)}})).filter(Boolean):t?.dataKey!=null?e.map(a=>({value:Uo(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})),L3=e=>e.errorBars,mY=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>uY(r,n));Ft([iY,L3,Ga],mY);var O8e=Ft([EN,ml,iY,L3,Ga],hY);function I8e(e){var{value:t}=e;if(Ju(t)||t instanceof Date)return t}var HR=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=tg(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},R8e=(e,t,r)=>{var n=e.map(I8e).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&NV(n))?Kq(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},NN=e=>{var t;if(e==null||!("domain"in e))return E7;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=tg(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:E7},g_=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var a=s.flat(),i=Math.min(...a),o=Math.max(...a);return[i,o]}},gY=e=>e.referenceElements.dots,A1=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),L8e=Ft([gY,Ga,I3],A1),pY=e=>e.referenceElements.areas,B8e=Ft([pY,Ga,I3],A1),xY=e=>e.referenceElements.lines,$8e=Ft([xY,Ga,I3],A1),yY=(e,t)=>{var r=tg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},z8e=Ft(L8e,Ga,yY),vY=(e,t)=>{var r=tg(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},U8e=Ft([B8e,Ga],vY),wY=(e,t)=>{var r=tg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},W8e=Ft($8e,Ga,wY),H8e=Ft(z8e,W8e,U8e,(e,t,r)=>g_(e,r,t)),G8e=Ft([ml],NN),bY=(e,t,r,n,s,a,i)=>{var o=a8e(t,e.allowDataOverflow);if(o!=null)return o;var l=a==="vertical"&&i==="xAxis"||a==="horizontal"&&i==="yAxis",u=l?g_(r,s,HR(n)):g_(s,HR(n));return i8e(t,u,e.allowDataOverflow)},V8e=Ft([ml,G8e,D8e,O8e,H8e,Ds,Ga],bY),q8e=[0,1],_Y=(e,t,r,n,s,a,i)=>{if(!((e==null||r==null||r.length===0)&&i===void 0)){var{dataKey:o,type:l}=e,u=th(t,a);return u&&o==null?Kq(0,r.length):l==="category"?R8e(n,e,u):s==="expand"?q8e:i}},AN=Ft([ml,Ds,EN,R3,F3,Ga,V8e],_Y),SY=(e,t,r,n,s)=>{if(e!=null){var{scale:a,type:i}=e;if(a==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(FE(a));return o in Iy?o:"point"}}},R2=Ft([ml,Ds,eY,vN,Ga],SY);function K8e(e){if(e!=null){if(e in Iy)return Iy[e]();var t="scale".concat(FE(e));if(t in Iy)return Iy[t]()}}function jN(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=K8e(t);if(s!=null){var a=s.domain(r).range(n);return $3e(a),a}}}var kY=(e,t,r)=>{var n=NN(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Qp(e))return p8e(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Qp(e))return x8e(e,t.tickCount,t.allowDecimals)}},PN=Ft([AN,O2,R2],kY),TY=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&Qp(t)&&Array.isArray(r)&&r.length>0){var s=t[0],a=r[0],i=t[1],o=r[r.length-1];return[Math.min(s,a),Math.max(i,o)]}return t},Y8e=Ft([ml,AN,PN,Ga],TY),X8e=Ft(R3,ml,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(tg(e.map(o=>o.value))).sort((o,l)=>o-l);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var a=0;a<n.length-1;a++){var i=n[a+1]-n[a];r=Math.min(r,i)}return r/s}}),CY=Ft(X8e,Ds,y8e,Qi,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!ou(e))return 0;var a=t==="vertical"?n.height:n.width;if(s==="gap")return e*a/2;if(s==="no-gap"){var i=Wf(r,e*a),o=e*a/2;return o-i-(o-i)/a*i}return 0}),J8e=(e,t)=>{var r=S0(e,t);return r==null||typeof r.padding!="string"?0:CY(e,"xAxis",t,r.padding)},Q8e=(e,t)=>{var r=k0(e,t);return r==null||typeof r.padding!="string"?0:CY(e,"yAxis",t,r.padding)},Z8e=Ft(S0,J8e,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),e7e=Ft(k0,Q8e,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),t7e=Ft([Qi,Z8e,T3,k3,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:a}=n;return s?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),r7e=Ft([Qi,Ds,e7e,T3,k3,(e,t,r)=>r],(e,t,r,n,s,a)=>{var{padding:i}=s;return a?[n.height-i.bottom,i.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),L2=(e,t,r,n)=>{var s;switch(t){case"xAxis":return t7e(e,r,n);case"yAxis":return r7e(e,r,n);case"zAxis":return(s=CN(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return VK(e);case"radiusAxis":return qK(e,r);default:return}},EY=Ft([ml,L2],D3),j1=Ft([ml,R2,Y8e,EY],jN);Ft([I2,L3,Ga],mY);function NY(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var B3=(e,t)=>t,$3=(e,t,r)=>r,n7e=Ft(_3,B3,$3,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(NY)),s7e=Ft(S3,B3,$3,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(NY)),AY=(e,t)=>({width:e.width,height:t.height}),a7e=(e,t)=>{var r=typeof t.width=="number"?t.width:j2;return{width:r,height:e.height}},i7e=Ft(Qi,S0,AY),o7e=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},l7e=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},c7e=Ft(b0,Qi,n7e,B3,$3,(e,t,r,n,s)=>{var a={},i;return r.forEach(o=>{var l=AY(t,o);i==null&&(i=o7e(t,n,e));var u=n==="top"&&!s||n==="bottom"&&s;a[o.id]=i-Number(u)*l.height,i+=(u?-1:1)*l.height}),a}),u7e=Ft(w0,Qi,s7e,B3,$3,(e,t,r,n,s)=>{var a={},i;return r.forEach(o=>{var l=a7e(t,o);i==null&&(i=l7e(t,n,e));var u=n==="left"&&!s||n==="right"&&s;a[o.id]=i-Number(u)*l.width,i+=(u?-1:1)*l.width}),a}),d7e=(e,t)=>{var r=S0(e,t);if(r!=null)return c7e(e,r.orientation,r.mirror)},f7e=Ft([Qi,S0,d7e,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r?.[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),h7e=(e,t)=>{var r=k0(e,t);if(r!=null)return u7e(e,r.orientation,r.mirror)},m7e=Ft([Qi,k0,h7e,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r?.[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),g7e=Ft(Qi,k0,(e,t)=>{var r=typeof t.width=="number"?t.width:j2;return{width:r,height:e.height}}),jY=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:a,dataKey:i}=r,o=th(e,n),l=t.map(u=>u.value);if(i&&o&&a==="category"&&s&&NV(l))return l}},MN=Ft([Ds,R3,ml,Ga],jY),PY=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:a}=r,i=th(e,n);if(i&&(s==="number"||a!=="auto"))return t.map(o=>o.value)}},FN=Ft([Ds,R3,O2,Ga],PY),GR=Ft([Ds,N8e,R2,j1,MN,FN,L2,PN,Ga],(e,t,r,n,s,a,i,o,l)=>{if(t==null)return null;var u=th(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:a,duplicateDomain:s,isCategorical:u,niceTicks:o,range:i,realScaleType:r,scale:n}}),p7e=(e,t,r,n,s,a,i,o,l)=>{if(!(t==null||n==null)){var u=th(e,l),{type:d,ticks:f,tickCount:h}=t,g=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,x=d==="category"&&n.bandwidth?n.bandwidth()/g:0;x=l==="angleAxis"&&a!=null&&a.length>=2?hc(a[0]-a[1])*2*x:x;var y=f||s;if(y){var v=y.map((T,k)=>{var b=i?i.indexOf(T):T;return{index:k,coordinate:n(b)+x,value:T,offset:x}});return v.filter(T=>!_c(T.coordinate))}return u&&o?o.map((T,k)=>({coordinate:n(T)+x,value:T,index:k,offset:x})):n.ticks?n.ticks(h).map(T=>({coordinate:n(T)+x,value:T,offset:x})):n.domain().map((T,k)=>({coordinate:n(T)+x,value:i?i[T]:T,index:k,offset:x}))}},MY=Ft([Ds,O2,R2,j1,PN,L2,MN,FN,Ga],p7e),x7e=(e,t,r,n,s,a,i)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=th(e,i),{tickCount:l}=t,u=0;return u=i==="angleAxis"&&n?.length>=2?hc(n[0]-n[1])*2*u:u,o&&a?a.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(l).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:s?s[d]:d,index:f,offset:u}))}},FY=Ft([Ds,O2,j1,L2,MN,FN,Ga],x7e),DY=Ft(ml,j1,(e,t)=>{if(!(e==null||t==null))return m_(m_({},e),{},{scale:t})}),y7e=Ft([ml,R2,AN,EY],jN);Ft((e,t,r)=>CN(e,r),y7e,(e,t)=>{if(!(e==null||t==null))return m_(m_({},e),{},{scale:t})});var v7e=Ft([Ds,_3,S3],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),OY=e=>e.options.defaultTooltipEventType,IY=e=>e.options.validateTooltipEventTypes;function RY(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function DN(e,t){var r=OY(e),n=IY(e);return RY(t,r,n)}function w7e(e){return qr(t=>DN(t,e))}var LY=(e,t)=>{var r,n=Number(t);if(!(_c(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},b7e=e=>e.tooltip.settings,yf={active:!1,index:null,dataKey:void 0,coordinate:void 0},_7e={itemInteraction:{click:yf,hover:yf},axisInteraction:{click:yf,hover:yf},keyboardInteraction:yf,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},BY=zl({name:"tooltip",initialState:_7e,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=e0(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:S7e,removeTooltipEntrySettings:k7e,setTooltipSettingsState:T7e,setActiveMouseOverItemIndex:C7e,mouseLeaveItem:vje,mouseLeaveChart:$Y,setActiveClickItemIndex:wje,setMouseOverAxisIndex:zY,setMouseClickAxisIndex:E7e,setSyncInteraction:N7,setKeyboardInteraction:A7}=BY.actions,N7e=BY.reducer;function VR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VR(Object(r),!0).forEach(function(n){A7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A7e(e,t,r){return(t=j7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j7e(e){var t=P7e(e,"string");return typeof t=="symbol"?t:t+""}function P7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function M7e(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function F7e(e){return e.index!=null}var UY=(e,t,r,n)=>{if(t==null)return yf;var s=M7e(e,t,r);if(s==null)return yf;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(F7e(s)){if(a)return Fb(Fb({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Fb(Fb({},yf),{},{coordinate:s.coordinate})},ON=(e,t)=>{var r=e?.index;if(r==null)return null;var n=Number(r);if(!ou(n))return r;var s=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(s,Math.min(n,a)))},WY=(e,t,r,n,s,a,i,o)=>{if(!(a==null||o==null)){var l=i[0],u=l==null?void 0:o(l.positions,a);if(u!=null)return u;var d=s?.[Number(a)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},HY=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var i;return((i=a.settings)===null||i===void 0?void 0:i.dataKey)===s})},B2=e=>e.options.tooltipPayloadSearcher,P1=e=>e.tooltip;function qR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function KR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qR(Object(r),!0).forEach(function(n){D7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function D7e(e,t,r){return(t=O7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O7e(e){var t=I7e(e,"string");return typeof t=="symbol"?t:t+""}function I7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R7e(e,t){return e??t}var GY=(e,t,r,n,s,a,i)=>{if(!(t==null||a==null)){var{chartData:o,computedData:l,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,g)=>{var x,{dataDefinedOnItem:y,settings:v}=g,T=R7e(y,o),k=Array.isArray(T)?Aq(T,u,d):T,b=(x=v?.dataKey)!==null&&x!==void 0?x:n,N=v?.nameKey,E;if(n&&Array.isArray(k)&&!Array.isArray(k[0])&&i==="axis"?E=AV(k,n,s):E=a(k,t,l,N),Array.isArray(E))E.forEach(M=>{var j=KR(KR({},v),{},{name:M.name,unit:M.unit,color:void 0,fill:void 0});h.push(FI({tooltipEntrySettings:j,dataKey:M.dataKey,payload:M.payload,value:Uo(M.payload,M.dataKey),name:M.name}))});else{var P;h.push(FI({tooltipEntrySettings:v,dataKey:b,payload:E,value:Uo(E,b),name:(P=Uo(E,N))!==null&&P!==void 0?P:v?.name}))}return h},f)}},IN=Ft([Ci,Ds,eY,vN,oi],SY),L7e=Ft([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),B7e=Ft([oi,N1],tY),$2=Ft([L7e,Ci,B7e],nY),$7e=Ft([$2],e=>e.filter(TN)),z7e=Ft([$2],oY),M1=Ft([z7e,sh],lY),U7e=Ft([$7e,sh,Ci],JK),RN=Ft([M1,Ci,$2],cY),W7e=Ft([Ci],NN),H7e=Ft([$2],e=>e.filter(TN)),G7e=Ft([U7e,H7e,F3],dY),V7e=Ft([G7e,sh,oi],fY),q7e=Ft([$2],aY),K7e=Ft([M1,Ci,q7e,L3,oi],hY),Y7e=Ft([gY,oi,N1],A1),X7e=Ft([Y7e,oi],yY),J7e=Ft([pY,oi,N1],A1),Q7e=Ft([J7e,oi],vY),Z7e=Ft([xY,oi,N1],A1),eTe=Ft([Z7e,oi],wY),tTe=Ft([X7e,eTe,Q7e],g_),rTe=Ft([Ci,W7e,V7e,K7e,tTe,Ds,oi],bY),VY=Ft([Ci,Ds,M1,RN,F3,oi,rTe],_Y),nTe=Ft([VY,Ci,IN],kY),sTe=Ft([Ci,VY,nTe,oi],TY),qY=e=>{var t=oi(e),r=N1(e),n=!1;return L2(e,t,r,n)},KY=Ft([Ci,qY],D3),YY=Ft([Ci,IN,sTe,KY],jN),aTe=Ft([Ds,RN,Ci,oi],jY),iTe=Ft([Ds,RN,Ci,oi],PY),oTe=(e,t,r,n,s,a,i,o)=>{if(t){var{type:l}=t,u=th(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=l==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&s!=null&&s?.length>=2?hc(s[0]-s[1])*2*f:f,u&&i?i.map((h,g)=>({coordinate:n(h)+f,value:h,index:g,offset:f})):n.domain().map((h,g)=>({coordinate:n(h)+f,value:a?a[h]:h,index:g,offset:f}))}}},T0=Ft([Ds,Ci,IN,YY,qY,aTe,iTe,oi],oTe),LN=Ft([OY,IY,b7e],(e,t,r)=>RY(r.shared,e,t)),XY=e=>e.tooltip.settings.trigger,BN=e=>e.tooltip.settings.defaultIndex,z3=Ft([P1,LN,XY,BN],UY),Kv=Ft([z3,M1],ON),JY=Ft([T0,Kv],LY),lTe=Ft([z3],e=>{if(e)return e.dataKey}),QY=Ft([P1,LN,XY,BN],HY),cTe=Ft([w0,b0,Ds,Qi,T0,BN,QY,B2],WY),uTe=Ft([z3,cTe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),dTe=Ft([z3],e=>e.active),fTe=Ft([QY,Kv,sh,XK,JY,B2,LN],GY),hTe=Ft([fTe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function YR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function XR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YR(Object(r),!0).forEach(function(n){mTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mTe(e,t,r){return(t=gTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gTe(e){var t=pTe(e,"string");return typeof t=="symbol"?t:t+""}function pTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xTe=()=>qr(Ci),yTe=()=>{var e=xTe(),t=qr(T0),r=qr(YY);return d7(XR(XR({},e),{},{scale:r}),t)},vTe=()=>qr(vN),$N=(e,t)=>t,ZY=(e,t,r)=>r,zN=(e,t,r,n)=>n,wTe=Ft(T0,e=>p3(e,t=>t.coordinate)),UN=Ft([P1,$N,ZY,zN],UY),eX=Ft([UN,M1],ON),bTe=(e,t,r)=>{if(t!=null){var n=P1(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},tX=Ft([P1,$N,ZY,zN],HY),p_=Ft([w0,b0,Ds,Qi,T0,zN,tX,B2],WY),_Te=Ft([UN,p_],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),rX=Ft(T0,eX,LY),STe=Ft([tX,eX,sh,XK,rX,B2,$N],GY),kTe=Ft([UN],e=>({isActive:e.active,activeIndex:e.index})),TTe=(e,t,r,n,s,a,i,o)=>{if(!(!e||!t||!n||!s||!a)){var l=K3e(e.chartX,e.chartY,t,r,o);if(l){var u=X3e(l,t),d=L3e(u,i,a,n,s),f=Y3e(t,a,d,l);return{activeIndex:String(d),activeCoordinate:f}}}};function j7(){return j7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j7.apply(null,arguments)}function JR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Db(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JR(Object(r),!0).forEach(function(n){CTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CTe(e,t,r){return(t=ETe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ETe(e){var t=NTe(e,"string");return typeof t=="symbol"?t:t+""}function NTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ATe(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:a,layout:i,cursor:o,tooltipEventType:l,chartName:u}=e,d=t,f=r,h=n;if(!o||!d||u!=="ScatterChart"&&l!=="axis")return null;var g,x;if(u==="ScatterChart")g=d,x=z5e;else if(u==="BarChart")g=U5e(i,d,s,a),x=vSe;else if(i==="radial"){var{cx:y,cy:v,radius:T,startAngle:k,endAngle:b}=Vq(d);g={cx:y,cy:v,startAngle:k,endAngle:b,innerRadius:T,outerRadius:T},x=SSe}else g={points:kSe(i,d,s)},x=$q;var N=typeof o=="object"&&"className"in o?o.className:void 0,E=Db(Db(Db(Db({stroke:"#ccc",pointerEvents:"none"},s),g),Ji(o,!1)),{},{payload:f,payloadIndex:h,className:Ms("recharts-tooltip-cursor",N)});return S.isValidElement(o)?S.cloneElement(o,E):S.createElement(x,E)}function jTe(e){var t=yTe(),r=Oq(),n=VE(),s=vTe();return S.createElement(ATe,j7({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var nX=S.createContext(null),PTe=()=>S.useContext(nX),ok={exports:{}},QR;function MTe(){return QR||(QR=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function a(l,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new s(d,f||l,h),x=r?r+u:u;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],g]:l._events[x].push(g):(l._events[x]=g,l._eventsCount++),l}function i(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,g=f.length,x=new Array(g);h<g;h++)x[h]=f[h].fn;return x},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,g,x){var y=r?r+u:u;if(!this._events[y])return!1;var v=this._events[y],T=arguments.length,k,b;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),T){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,g),!0;case 6:return v.fn.call(v.context,d,f,h,g,x),!0}for(b=1,k=new Array(T-1);b<T;b++)k[b-1]=arguments[b];v.fn.apply(v.context,k)}else{var N=v.length,E;for(b=0;b<N;b++)switch(v[b].once&&this.removeListener(u,v[b].fn,void 0,!0),T){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,d);break;case 3:v[b].fn.call(v[b].context,d,f);break;case 4:v[b].fn.call(v[b].context,d,f,h);break;default:if(!k)for(E=1,k=new Array(T-1);E<T;E++)k[E-1]=arguments[E];v[b].fn.apply(v[b].context,k)}}return!0},o.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var g=r?r+u:u;if(!this._events[g])return this;if(!d)return i(this,g),this;var x=this._events[g];if(x.fn)x.fn===d&&(!h||x.once)&&(!f||x.context===f)&&i(this,g);else{for(var y=0,v=[],T=x.length;y<T;y++)(x[y].fn!==d||h&&!x[y].once||f&&x[y].context!==f)&&v.push(x[y]);v.length?this._events[g]=v.length===1?v[0]:v:i(this,g)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(ok)),ok.exports}var FTe=MTe();const DTe=Tc(FTe);var Yv=new DTe,P7="recharts.syncEvent.tooltip",ZR="recharts.syncEvent.brush";function OTe(e,t){if(t){var r=Number.parseInt(t,10);if(!_c(r))return e?.[r]}}var ITe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},sX=zl({name:"options",initialState:ITe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),RTe=sX.reducer,{createEventEmitter:LTe}=sX.actions;function BTe(e){return e.tooltip.syncInteraction}var $Te={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},aX=zl({name:"chartData",initialState:$Te,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:eL,setDataStartEndIndexes:zTe,setComputedData:bje}=aX.actions,UTe=aX.reducer,WTe=["x","y"];function tL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tL(Object(r),!0).forEach(function(n){HTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HTe(e,t,r){return(t=GTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GTe(e){var t=VTe(e,"string");return typeof t=="symbol"?t:t+""}function VTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qTe(e,t){if(e==null)return{};var r,n,s=KTe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function KTe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var iX=()=>{};function YTe(){var e=qr(wN),t=qr(bN),r=Go(),n=qr(WK),s=qr(T0),a=VE(),i=GE(),o=qr(l=>l.rootProps.className);S.useEffect(()=>{if(e==null)return iX;var l=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){var h;if(i&&d!==null&&d!==void 0&&(h=d.payload)!==null&&h!==void 0&&h.coordinate){var g=d.payload.coordinate,{x,y}=g,v=qTe(g,WTe),T=Bh(Bh(Bh({},v),typeof x=="number"&&{x:Math.max(i.x,Math.min(x,i.x+i.width))}),typeof y=="number"&&{y:Math.max(i.y,Math.min(y,i.y+i.height))}),k=Bh(Bh({},d),{},{payload:Bh(Bh({},d.payload),{},{coordinate:T})});r(k)}else r(d);return}if(s!=null){var b;if(typeof n=="function"){var N={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},E=n(s,N);b=s[E]}else n==="value"&&(b=s.find(Q=>String(Q.value)===d.payload.label));var{coordinate:P}=d.payload;if(b==null||d.payload.active===!1||P==null||i==null){r(N7({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:M,y:j}=P,A=Math.min(M,i.x+i.width),O=Math.min(j,i.y+i.height),L={x:a==="horizontal"?b.coordinate:A,y:a==="horizontal"?O:b.coordinate},q=N7({active:d.payload.active,coordinate:L,dataKey:d.payload.dataKey,index:String(b.index),label:d.payload.label});r(q)}}};return Yv.on(P7,l),()=>{Yv.off(P7,l)}},[o,r,t,e,n,s,a,i])}function XTe(){var e=qr(wN),t=qr(bN),r=Go();S.useEffect(()=>{if(e==null)return iX;var n=(s,a,i)=>{t!==i&&e===s&&r(zTe(a))};return Yv.on(ZR,n),()=>{Yv.off(ZR,n)}},[r,t,e])}function JTe(){var e=Go();S.useEffect(()=>{e(LTe())},[e]),YTe(),XTe()}function QTe(e,t,r,n,s,a){var i=qr(h=>bTe(h,e,t)),o=qr(bN),l=qr(wN),u=qr(WK),d=qr(BTe),f=d?.active;S.useEffect(()=>{if(!f&&l!=null&&o!=null){var h=N7({active:a,coordinate:r,dataKey:i,index:s,label:typeof n=="number"?String(n):n});Yv.emit(P7,l,h,o)}},[f,r,i,s,n,o,l,u,a])}function rL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rL(Object(r),!0).forEach(function(n){ZTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZTe(e,t,r){return(t=eCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eCe(e){var t=tCe(e,"string");return typeof t=="symbol"?t:t+""}function tCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rCe(e){return e.dataKey}function nCe(e,t){return S.isValidElement(e)?S.cloneElement(e,t):typeof e=="function"?S.createElement(e,t):S.createElement(v5e,t)}var sL=[],sCe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!k1.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function aCe(e){var t=Nc(e,sCe),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:a,content:i,filterNull:o,isAnimationActive:l,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:g,wrapperStyle:x,cursor:y,shared:v,trigger:T,defaultIndex:k,portal:b,axisId:N}=t,E=Go(),P=typeof k=="number"?String(k):k;S.useEffect(()=>{E(T7e({shared:v,trigger:T,axisId:N,active:r,defaultIndex:P}))},[E,v,T,N,r,P]);var M=GE(),j=Bq(),A=w7e(v),{activeIndex:O,isActive:L}=qr(Z=>kTe(Z,A,T,P)),q=qr(Z=>STe(Z,A,T,P)),Q=qr(Z=>rX(Z,A,T,P)),ae=qr(Z=>_Te(Z,A,T,P)),te=q,ne=PTe(),B=r??L,[V,R]=E_e([te,B]),H=A==="axis"?Q:void 0;QTe(A,T,ae,H,O,B);var U=b??ne;if(U==null)return null;var I=te??sL;B||(I=sL),o&&I.length&&(I=Z4e(te.filter(Z=>Z.value!=null&&(Z.hide!==!0||t.includeHidden)),d,rCe));var W=I.length>0,K=S.createElement(C5e,{allowEscapeViewBox:n,animationDuration:s,animationEasing:a,isAnimationActive:l,active:B,coordinate:ae,hasPayload:W,offset:u,position:f,reverseDirection:h,useTranslate3d:g,viewBox:M,wrapperStyle:x,lastBoundingBox:V,innerRef:R,hasPortalFromProps:!!b},nCe(i,nL(nL({},t),{},{payload:I,label:H,active:B,coordinate:ae,accessibilityLayer:j})));return S.createElement(S.Fragment,null,_k.createPortal(K,U),B&&S.createElement(jTe,{cursor:y,tooltipEventType:A,coordinate:ae,payload:te,index:O}))}var lk={},ck={},uk={},aL;function iCe(){return aL||(aL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:a}={}){let i,o=null;const l=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),d=()=>{o!==null&&(r.apply(i,o),i=void 0,o=null)},f=()=>{u&&d(),y()};let h=null;const g=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},x=()=>{h!==null&&(clearTimeout(h),h=null)},y=()=>{x(),i=void 0,o=null},v=()=>{d()},T=function(...k){if(s?.aborted)return;i=this,o=k;const b=h==null;g(),l&&b&&d()};return T.schedule=g,T.cancel=y,T.flush=v,s?.addEventListener("abort",y,{once:!0}),T}e.debounce=t})(uk)),uk}var iL;function oCe(){return iL||(iL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iCe();function r(n,s=0,a={}){typeof a!="object"&&(a={});const{leading:i=!1,trailing:o=!0,maxWait:l}=a,u=Array(2);i&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...y){d=n.apply(this,y),f=null},s,{edges:u}),g=function(...y){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(d=n.apply(this,y),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,y),d)},x=()=>(h.flush(),d);return g.cancel=h.cancel,g.flush=x,g}e.debounce=r})(ck)),ck}var oL;function lCe(){return oL||(oL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oCe();function r(n,s=0,a={}){const{leading:i=!0,trailing:o=!0}=a;return t.debounce(n,s,{leading:i,maxWait:s,trailing:o})}e.throttle=r})(lk)),lk}var dk,lL;function cCe(){return lL||(lL=1,dk=lCe().throttle),dk}var uCe=cCe();const dCe=Tc(uCe);var rv=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a]};function cL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cL(Object(r),!0).forEach(function(n){fCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fCe(e,t,r){return(t=hCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hCe(e){var t=mCe(e,"string");return typeof t=="symbol"?t:t+""}function mCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gCe=S.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:a="100%",minWidth:i=0,minHeight:o,maxHeight:l,children:u,debounce:d=0,id:f,className:h,onResize:g,style:x={}}=e,y=S.useRef(null),v=S.useRef();v.current=g,S.useImperativeHandle(t,()=>y.current);var[T,k]=S.useState({containerWidth:n.width,containerHeight:n.height}),b=S.useCallback((E,P)=>{k(M=>{var j=Math.round(E),A=Math.round(P);return M.containerWidth===j&&M.containerHeight===A?M:{containerWidth:j,containerHeight:A}})},[]);S.useEffect(()=>{var E=A=>{var O,{width:L,height:q}=A[0].contentRect;b(L,q),(O=v.current)===null||O===void 0||O.call(v,L,q)};d>0&&(E=dCe(E,d,{trailing:!0,leading:!1}));var P=new ResizeObserver(E),{width:M,height:j}=y.current.getBoundingClientRect();return b(M,j),P.observe(y.current),()=>{P.disconnect()}},[b,d]);var N=S.useMemo(()=>{var{containerWidth:E,containerHeight:P}=T;if(E<0||P<0)return null;rv(Jh(s)||Jh(a),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,a),rv(!r||r>0,"The aspect(%s) must be greater than zero.",r);var M=Jh(s)?E:s,j=Jh(a)?P:a;return r&&r>0&&(M?j=M/r:j&&(M=j*r),l&&j>l&&(j=l)),rv(M>0||j>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,j,s,a,i,o,r),S.Children.map(u,A=>S.cloneElement(A,{width:M,height:j,style:fk({width:M,height:j},A.props.style)}))},[r,u,a,l,o,i,T,s]);return S.createElement("div",{id:f?"".concat(f):void 0,className:Ms("recharts-responsive-container",h),style:fk(fk({},x),{},{width:s,height:a,minWidth:i,minHeight:o,maxHeight:l}),ref:y},S.createElement("div",{style:{width:0,height:0,overflow:"visible"}},N))});function pCe(e,t,r){return(t=xCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xCe(e){var t=yCe(e,"string");return typeof t=="symbol"?t:t+""}function yCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class vCe{constructor(t){pCe(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function uL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wCe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uL(Object(r),!0).forEach(function(n){bCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bCe(e,t,r){return(t=_Ce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Ce(e){var t=SCe(e,"string");return typeof t=="symbol"?t:t+""}function SCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kCe={cacheSize:2e3,enableCache:!0},oX=wCe({},kCe),dL=new vCe(oX.cacheSize),TCe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},fL="recharts_measurement_span";function CCe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",a=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(a,"|").concat(i,"|").concat(o)}var hL=(e,t)=>{try{var r=document.getElementById(fL);r||(r=document.createElement("span"),r.setAttribute("id",fL),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,TCe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},nv=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||k1.isSsr)return{width:0,height:0};if(!oX.enableCache)return hL(t,r);var n=CCe(t,r),s=dL.get(n);if(s)return s;var a=hL(t,r);return dL.set(n,a),a},mL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,gL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ECe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,NCe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,lX={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ACe=Object.keys(lX),vp="NaN";function jCe(e,t){return e*lX[t]}class nl{static parse(t){var r,[,n,s]=(r=NCe.exec(t))!==null&&r!==void 0?r:[];return new nl(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,_c(t)&&(this.unit=""),r!==""&&!ECe.test(r)&&(this.num=NaN,this.unit=""),ACe.includes(r)&&(this.num=jCe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new nl(NaN,""):new nl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new nl(NaN,""):new nl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new nl(NaN,""):new nl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new nl(NaN,""):new nl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return _c(this.num)}}function cX(e){if(e.includes(vp))return vp;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,a]=(r=mL.exec(t))!==null&&r!==void 0?r:[],i=nl.parse(n??""),o=nl.parse(a??""),l=s==="*"?i.multiply(o):i.divide(o);if(l.isNaN())return vp;t=t.replace(mL,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=gL.exec(t))!==null&&u!==void 0?u:[],g=nl.parse(d??""),x=nl.parse(h??""),y=f==="+"?g.add(x):g.subtract(x);if(y.isNaN())return vp;t=t.replace(gL,y.toString())}return t}var pL=/\(([^()]*)\)/;function PCe(e){for(var t=e,r;(r=pL.exec(t))!=null;){var[,n]=r;t=t.replace(pL,cX(n))}return t}function MCe(e){var t=e.replace(/\s+/g,"");return t=PCe(t),t=cX(t),t}function FCe(e){try{return MCe(e)}catch{return vp}}function hk(e){var t=FCe(e.slice(5,-1));return t===vp?"":t}var DCe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],OCe=["dx","dy","angle","className","breakAll"];function M7(){return M7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M7.apply(null,arguments)}function xL(e,t){if(e==null)return{};var r,n,s=ICe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ICe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var uX=/[ \f\n\r\t\v\u2028\u2029]+/,dX=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Si(t)||(r?s=t.toString().split(""):s=t.toString().split(uX));var a=s.map(o=>({word:o,width:nv(o,n).width})),i=r?0:nv("",n).width;return{wordsWithComputedWidth:a,spaceWidth:i}}catch{return null}},RCe=(e,t,r,n,s)=>{var{maxLines:a,children:i,style:o,breakAll:l}=e,u=nn(a),d=i,f=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce((q,Q)=>{var{word:ae,width:te}=Q,ne=q[q.length-1];if(ne&&(n==null||s||ne.width+te+r<Number(n)))ne.words.push(ae),ne.width+=te+r;else{var B={words:[ae],width:te};q.push(B)}return q},[])},h=f(t),g=O=>O.reduce((L,q)=>L.width>q.width?L:q);if(!u||s)return h;var x=h.length>a||g(h).width>Number(n);if(!x)return h;for(var y="",v=O=>{var L=d.slice(0,O),q=dX({breakAll:l,style:o,children:L+y}).wordsWithComputedWidth,Q=f(q),ae=Q.length>a||g(Q).width>Number(n);return[ae,Q]},T=0,k=d.length-1,b=0,N;T<=k&&b<=d.length-1;){var E=Math.floor((T+k)/2),P=E-1,[M,j]=v(P),[A]=v(E);if(!M&&!A&&(T=E+1),M&&A&&(k=E-1),!M&&A){N=j;break}b++}return N||h},yL=e=>{var t=Si(e)?[]:e.toString().split(uX);return[{words:t}]},LCe=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:a,maxLines:i}=e;if((t||r)&&!k1.isSsr){var o,l,u=dX({breakAll:a,children:n,style:s});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,l=f}else return yL(n);return RCe({breakAll:a,children:n,maxLines:i,style:s},o,l,t,r)}return yL(n)},vL="#808080",WN=S.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:a="0.71em",scaleToFit:i=!1,textAnchor:o="start",verticalAnchor:l="end",fill:u=vL}=e,d=xL(e,DCe),f=S.useMemo(()=>LCe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:h,dy:g,angle:x,className:y,breakAll:v}=d,T=xL(d,OCe);if(!Ju(r)||!Ju(n)||f.length===0)return null;var k=r+(nn(h)?h:0),b=n+(nn(g)?g:0),N;switch(l){case"start":N=hk("calc(".concat(a,")"));break;case"middle":N=hk("calc(".concat((f.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:N=hk("calc(".concat(f.length-1," * -").concat(s,")"));break}var E=[];if(i){var P=f[0].width,{width:M}=d;E.push("scale(".concat(nn(M)?M/P:1,")"))}return x&&E.push("rotate(".concat(x,", ").concat(k,", ").concat(b,")")),E.length&&(T.transform=E.join(" ")),S.createElement("text",M7({},Ji(T,!0),{ref:t,x:k,y:b,className:Ms("recharts-text",y),textAnchor:o,fill:u.includes("url")?vL:u}),f.map((j,A)=>{var O=j.words.join(v?"":" ");return S.createElement("tspan",{x:k,dy:A===0?N:s,key:"".concat(O,"-").concat(A)},O)}))});WN.displayName="Text";var BCe=["labelRef"];function $Ce(e,t){if(e==null)return{};var r,n,s=zCe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function zCe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function wL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ta(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wL(Object(r),!0).forEach(function(n){UCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UCe(e,t,r){return(t=WCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WCe(e){var t=HCe(e,"string");return typeof t=="symbol"?t:t+""}function HCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wd(){return Wd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wd.apply(null,arguments)}var fX=S.createContext(null),GCe=e=>{var{x:t,y:r,width:n,height:s,children:a}=e,i=S.useMemo(()=>({x:t,y:r,width:n,height:s}),[t,r,n,s]);return S.createElement(fX.Provider,{value:i},a)},hX=()=>{var e=S.useContext(fX),t=GE();return e||t},VCe=S.createContext(null),qCe=()=>{var e=S.useContext(VCe),t=qr(KK);return e||t},KCe=e=>{var{value:t,formatter:r}=e,n=Si(e.children)?t:e.children;return typeof r=="function"?r(n):n},HN=e=>e!=null&&typeof e=="function",YCe=(e,t)=>{var r=hc(t-e),n=Math.min(Math.abs(t-e),360);return r*n},XCe=(e,t,r,n,s)=>{var{offset:a,className:i}=e,{cx:o,cy:l,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:g}=s,x=(u+d)/2,y=YCe(f,h),v=y>=0?1:-1,T,k;switch(t){case"insideStart":T=f+v*a,k=g;break;case"insideEnd":T=h-v*a,k=!g;break;case"end":T=h+v*a,k=g;break;default:throw new Error("Unsupported position ".concat(t))}k=y<=0?k:!k;var b=Ki(o,l,x,T),N=Ki(o,l,x,T+(k?1:-1)*359),E="M".concat(b.x,",").concat(b.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(k?0:1,`,
    `).concat(N.x,",").concat(N.y),P=Si(e.id)?Bv("recharts-radial-line-"):e.id;return S.createElement("text",Wd({},n,{dominantBaseline:"central",className:Ms("recharts-radial-bar-label",i)}),S.createElement("defs",null,S.createElement("path",{id:P,d:E})),S.createElement("textPath",{xlinkHref:"#".concat(P)},r))},JCe=(e,t,r)=>{var{cx:n,cy:s,innerRadius:a,outerRadius:i,startAngle:o,endAngle:l}=e,u=(o+l)/2;if(r==="outside"){var{x:d,y:f}=Ki(n,s,i+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var h=(a+i)/2,{x:g,y:x}=Ki(n,s,h,u);return{x:g,y:x,textAnchor:"middle",verticalAnchor:"middle"}},mX=e=>"cx"in e&&nn(e.cx),QCe=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,a;r!=null&&!mX(r)&&(a=r);var{x:i,y:o,width:l,height:u}=t,d=u>=0?1:-1,f=d*n,h=d>0?"end":"start",g=d>0?"start":"end",x=l>=0?1:-1,y=x*n,v=x>0?"end":"start",T=x>0?"start":"end";if(s==="top"){var k={x:i+l/2,y:o-d*n,textAnchor:"middle",verticalAnchor:h};return Ta(Ta({},k),a?{height:Math.max(o-a.y,0),width:l}:{})}if(s==="bottom"){var b={x:i+l/2,y:o+u+f,textAnchor:"middle",verticalAnchor:g};return Ta(Ta({},b),a?{height:Math.max(a.y+a.height-(o+u),0),width:l}:{})}if(s==="left"){var N={x:i-y,y:o+u/2,textAnchor:v,verticalAnchor:"middle"};return Ta(Ta({},N),a?{width:Math.max(N.x-a.x,0),height:u}:{})}if(s==="right"){var E={x:i+l+y,y:o+u/2,textAnchor:T,verticalAnchor:"middle"};return Ta(Ta({},E),a?{width:Math.max(a.x+a.width-E.x,0),height:u}:{})}var P=a?{width:l,height:u}:{};return s==="insideLeft"?Ta({x:i+y,y:o+u/2,textAnchor:T,verticalAnchor:"middle"},P):s==="insideRight"?Ta({x:i+l-y,y:o+u/2,textAnchor:v,verticalAnchor:"middle"},P):s==="insideTop"?Ta({x:i+l/2,y:o+f,textAnchor:"middle",verticalAnchor:g},P):s==="insideBottom"?Ta({x:i+l/2,y:o+u-f,textAnchor:"middle",verticalAnchor:h},P):s==="insideTopLeft"?Ta({x:i+y,y:o+f,textAnchor:T,verticalAnchor:g},P):s==="insideTopRight"?Ta({x:i+l-y,y:o+f,textAnchor:v,verticalAnchor:g},P):s==="insideBottomLeft"?Ta({x:i+y,y:o+u-f,textAnchor:T,verticalAnchor:h},P):s==="insideBottomRight"?Ta({x:i+l-y,y:o+u-f,textAnchor:v,verticalAnchor:h},P):s&&typeof s=="object"&&(nn(s.x)||Jh(s.x))&&(nn(s.y)||Jh(s.y))?Ta({x:i+Wf(s.x,l),y:o+Wf(s.y,u),textAnchor:"end",verticalAnchor:"end"},P):Ta({x:i+l/2,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},P)},ZCe={offset:5};function xf(e){var t=Nc(e,ZCe),{viewBox:r,position:n,value:s,children:a,content:i,className:o="",textBreakAll:l,labelRef:u}=t,d=qCe(),f=hX(),h=n==="center"?f:d??f,g=r||h;if(!g||Si(s)&&Si(a)&&!S.isValidElement(i)&&typeof i!="function")return null;var x=Ta(Ta({},t),{},{viewBox:g});if(S.isValidElement(i)){var{labelRef:y}=x,v=$Ce(x,BCe);return S.cloneElement(i,v)}var T;if(typeof i=="function"){if(T=S.createElement(i,x),S.isValidElement(T))return T}else T=KCe(t);var k=mX(g),b=Ji(t,!0);if(k&&(n==="insideStart"||n==="insideEnd"||n==="end"))return XCe(t,n,T,b,g);var N=k?JCe(g,t.offset,t.position):QCe(t,g);return S.createElement(WN,Wd({ref:u,className:Ms("recharts-label",o)},b,N,{breakAll:l}),T)}xf.displayName="Label";var eEe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?S.createElement(xf,Wd({key:"label-implicit"},n)):Ju(e)?S.createElement(xf,Wd({key:"label-implicit",value:e},n)):S.isValidElement(e)?e.type===xf?S.cloneElement(e,Ta({key:"label-implicit"},n)):S.createElement(xf,Wd({key:"label-implicit",content:e},n)):HN(e)?S.createElement(xf,Wd({key:"label-implicit",content:e},n)):e&&typeof e=="object"?S.createElement(xf,Wd({},e,{key:"label-implicit"},n)):null};function tEe(e){var{label:t}=e,r=hX();return eEe(t,r)||null}var mk={},gk={},bL;function rEe(){return bL||(bL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(gk)),gk}var pk={},_L;function nEe(){return _L||(_L=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(pk)),pk}var SL;function sEe(){return SL||(SL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rEe(),r=nEe(),n=RE();function s(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=s})(mk)),mk}var xk,kL;function aEe(){return kL||(kL=1,xk=sEe().last),xk}var iEe=aEe();const oEe=Tc(iEe);var lEe=["valueAccessor"],cEe=["dataKey","clockWise","id","textBreakAll"];function x_(){return x_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x_.apply(null,arguments)}function TL(e,t){if(e==null)return{};var r,n,s=uEe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function uEe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var dEe=e=>Array.isArray(e.value)?oEe(e.value):e.value,gX=S.createContext(void 0),fEe=gX.Provider,pX=S.createContext(void 0);pX.Provider;function hEe(){return S.useContext(gX)}function mEe(){return S.useContext(pX)}function Yb(e){var{valueAccessor:t=dEe}=e,r=TL(e,lEe),{dataKey:n,clockWise:s,id:a,textBreakAll:i}=r,o=TL(r,cEe),l=hEe(),u=mEe(),d=l||u;return!d||!d.length?null:S.createElement(S1,{className:"recharts-label-list"},d.map((f,h)=>{var g,x=Si(n)?t(f,h):Uo(f&&f.payload,n),y=Si(a)?{}:{id:"".concat(a,"-").concat(h)};return S.createElement(xf,x_({},Ji(f,!0),o,y,{fill:(g=r.fill)!==null&&g!==void 0?g:f.fill,parentViewBox:f.parentViewBox,value:x,textBreakAll:i,viewBox:f.viewBox,key:"label-".concat(h),index:h}))}))}Yb.displayName="LabelList";function gEe(e){var{label:t}=e;return t?t===!0?S.createElement(Yb,{key:"labelList-implicit"}):S.isValidElement(t)||HN(t)?S.createElement(Yb,{key:"labelList-implicit",content:t}):typeof t=="object"?S.createElement(Yb,x_({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function F7(){return F7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F7.apply(null,arguments)}var xX=e=>{var{cx:t,cy:r,r:n,className:s}=e,a=Ms("recharts-dot",s);return t===+t&&r===+r&&n===+n?S.createElement("circle",F7({},Qm(e),OE(e),{className:a,cx:t,cy:r,r:n})):null},pEe={radiusAxis:{},angleAxis:{}},yX=zl({name:"polarAxis",initialState:pEe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:_je,removeRadiusAxis:Sje,addAngleAxis:kje,removeAngleAxis:Tje}=yX.actions,xEe=yX.reducer;function yEe(e){var{fn:t,args:r}=e,n=Go(),s=Ec();return S.useEffect(()=>{if(!s){var a=t(r);return n(S7e(a)),()=>{n(k7e(a))}}},[t,r,n,s]),null}var vEe=()=>{};function wEe(e){var{legendPayload:t}=e,r=Go(),n=Ec();return S.useEffect(()=>n?vEe:(r(f5e(t)),()=>{r(h5e(t))}),[r,n,t]),null}var yk,bEe=()=>{var[e]=S.useState(()=>Bv("uid-"));return e},_Ee=(yk=GL.useId)!==null&&yk!==void 0?yk:bEe;function SEe(e,t){var r=_Ee();return t||(e?"".concat(e,"-").concat(r):r)}var kEe=S.createContext(void 0),TEe=e=>{var{id:t,type:r,children:n}=e,s=SEe("recharts-".concat(r),t);return S.createElement(kEe.Provider,{value:s},n(s))},CEe={cartesianItems:[],polarItems:[]},vX=zl({name:"graphicalItems",initialState:CEe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,s=e0(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},removeCartesianGraphicalItem(e,t){var r=e0(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=e0(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:EEe,replaceCartesianGraphicalItem:NEe,removeCartesianGraphicalItem:AEe,addPolarGraphicalItem:Cje,removePolarGraphicalItem:Eje}=vX.actions,jEe=vX.reducer;function PEe(e){var t=Go(),r=S.useRef(null);return S.useEffect(()=>{r.current===null?t(EEe(e)):r.current!==e&&t(NEe({prev:r.current,next:e})),r.current=e},[t,e]),S.useEffect(()=>()=>{r.current&&(t(AEe(r.current)),r.current=null)},[t]),null}function CL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function EL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CL(Object(r),!0).forEach(function(n){MEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MEe(e,t,r){return(t=FEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FEe(e){var t=DEe(e,"string");return typeof t=="symbol"?t:t+""}function DEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OEe={xAxis:{},yAxis:{},zAxis:{}},wX=zl({name:"cartesianAxis",initialState:OEe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=EL(EL({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:IEe,removeXAxis:REe,addYAxis:LEe,removeYAxis:BEe,addZAxis:Nje,removeZAxis:Aje,updateYAxisWidth:$Ee}=wX.actions,zEe=wX.reducer,UEe=Ft([Qi],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),WEe=Ft([UEe,w0,b0],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),GN=()=>qr(WEe),HEe=()=>qr(hTe);function NL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function AL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NL(Object(r),!0).forEach(function(n){GEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GEe(e,t,r){return(t=VEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VEe(e){var t=qEe(e,"string");return typeof t=="symbol"?t:t+""}function qEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KEe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:a}=e;if(s===!1||t.x==null||t.y==null)return null;var i=AL(AL({index:r,dataKey:a,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Ji(s,!1)),OE(s)),o;return S.isValidElement(s)?o=S.cloneElement(s,i):typeof s=="function"?o=s(i):o=S.createElement(xX,i),S.createElement(S1,{className:"recharts-active-dot"},o)};function YEe(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,a=qr(Kv),i=HEe();if(t==null||i==null)return null;var o=t.find(l=>i.includes(l.payload));return Si(o)?null:KEe({point:o,childIndex:Number(a),mainColor:r,dataKey:s,activeDot:n})}var XEe={},bX=zl({name:"errorBars",initialState:XEe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?s:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:jje,replaceErrorBar:Pje,removeErrorBar:Mje}=bX.actions,JEe=bX.reducer,QEe=["children"];function ZEe(e,t){if(e==null)return{};var r,n,s=eNe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function eNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var tNe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},rNe=S.createContext(tNe);function nNe(e){var{children:t}=e,r=ZEe(e,QEe);return S.createElement(rNe.Provider,{value:r},t)}function _X(e,t){var r,n,s=qr(u=>S0(u,e)),a=qr(u=>k0(u,t)),i=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:Sl.allowDataOverflow,o=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:kl.allowDataOverflow,l=i||o;return{needClip:l,needClipX:i,needClipY:o}}function sNe(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=GN(),{needClipX:a,needClipY:i,needClip:o}=_X(t,r);if(!o)return null;var{x:l,y:u,width:d,height:f}=s;return S.createElement("clipPath",{id:"clipPath-".concat(n)},S.createElement("rect",{x:a?l:l-d/2,y:i?u:u-f/2,width:a?d:d*2,height:i?f:f*2}))}var aNe=e=>{var{chartData:t}=e,r=Go(),n=Ec();return S.useEffect(()=>n?()=>{}:(r(eL(t)),()=>{r(eL(void 0))}),[t,r,n]),null},jL={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},SX=zl({name:"brush",initialState:jL,reducers:{setBrushSettings(e,t){return t.payload==null?jL:t.payload}}}),{setBrushSettings:Fje}=SX.actions,iNe=SX.reducer;function oNe(e,t,r){return(t=lNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lNe(e){var t=cNe(e,"string");return typeof t=="symbol"?t:t+""}function cNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class VN{static create(t){return new VN(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}oNe(VN,"EPS",1e-4);function uNe(e){return(e%180+180)%180}var dNe=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=uNe(s),i=a*Math.PI/180,o=Math.atan(n/r),l=i>o&&i<Math.PI-o?n/Math.sin(i):r/Math.cos(i);return Math.abs(l)},fNe={dots:[],areas:[],lines:[]},kX=zl({name:"referenceElements",initialState:fNe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=e0(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=e0(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=e0(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Dje,removeDot:Oje,addArea:Ije,removeArea:Rje,addLine:Lje,removeLine:Bje}=kX.actions,hNe=kX.reducer,mNe=S.createContext(void 0),gNe=e=>{var{children:t}=e,[r]=S.useState("".concat(Bv("recharts"),"-clip")),n=GN();if(n==null)return null;var{x:s,y:a,width:i,height:o}=n;return S.createElement(mNe.Provider,{value:r},S.createElement("defs",null,S.createElement("clipPath",{id:r},S.createElement("rect",{x:s,y:a,height:o,width:i}))),t)};function Zp(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function TX(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function pNe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return dNe(n,r)}function xNe(e,t,r){var n=r==="width",{x:s,y:a,width:i,height:o}=e;return t===1?{start:n?s:a,end:n?s+i:a+o}:{start:n?s+i:a+o,end:n?s:a}}function y_(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-s)<=0}function yNe(e,t){return TX(e,t+1)}function vNe(e,t,r,n,s){for(var a=(n||[]).slice(),{start:i,end:o}=t,l=0,u=1,d=i,f=function(){var x=n?.[l];if(x===void 0)return{v:TX(n,u)};var y=l,v,T=()=>(v===void 0&&(v=r(x,y)),v),k=x.coordinate,b=l===0||y_(e,k,T,d,o);b||(l=0,d=i,u+=1),b&&(d=k+e*(T()/2+s),l+=u)},h;u<=a.length;)if(h=f(),h)return h.v;return[]}function PL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PL(Object(r),!0).forEach(function(n){wNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wNe(e,t,r){return(t=bNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bNe(e){var t=_Ne(e,"string");return typeof t=="symbol"?t:t+""}function _Ne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SNe(e,t,r,n,s){for(var a=(n||[]).slice(),i=a.length,{start:o}=t,{end:l}=t,u=function(h){var g=a[h],x,y=()=>(x===void 0&&(x=r(g,h)),x);if(h===i-1){var v=e*(g.coordinate+e*y()/2-l);a[h]=g=oo(oo({},g),{},{tickCoord:v>0?g.coordinate-v*e:g.coordinate})}else a[h]=g=oo(oo({},g),{},{tickCoord:g.coordinate});var T=y_(e,g.tickCoord,y,o,l);T&&(l=g.tickCoord-e*(y()/2+s),a[h]=oo(oo({},g),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return a}function kNe(e,t,r,n,s,a){var i=(n||[]).slice(),o=i.length,{start:l,end:u}=t;if(a){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);i[o-1]=d=oo(oo({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var g=y_(e,d.tickCoord,()=>f,l,u);g&&(u=d.tickCoord-e*(f/2+s),i[o-1]=oo(oo({},d),{},{isShow:!0}))}for(var x=a?o-1:o,y=function(k){var b=i[k],N,E=()=>(N===void 0&&(N=r(b,k)),N);if(k===0){var P=e*(b.coordinate-e*E()/2-l);i[k]=b=oo(oo({},b),{},{tickCoord:P<0?b.coordinate-P*e:b.coordinate})}else i[k]=b=oo(oo({},b),{},{tickCoord:b.coordinate});var M=y_(e,b.tickCoord,E,l,u);M&&(l=b.tickCoord+e*(E()/2+s),i[k]=oo(oo({},b),{},{isShow:!0}))},v=0;v<x;v++)y(v);return i}function qN(e,t,r){var{tick:n,ticks:s,viewBox:a,minTickGap:i,orientation:o,interval:l,tickFormatter:u,unit:d,angle:f}=e;if(!s||!s.length||!n)return[];if(nn(l)||k1.isSsr){var h;return(h=yNe(s,nn(l)?l:0))!==null&&h!==void 0?h:[]}var g=[],x=o==="top"||o==="bottom"?"width":"height",y=d&&x==="width"?nv(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(b,N)=>{var E=typeof u=="function"?u(b.value,N):b.value;return x==="width"?pNe(nv(E,{fontSize:t,letterSpacing:r}),y,f):nv(E,{fontSize:t,letterSpacing:r})[x]},T=s.length>=2?hc(s[1].coordinate-s[0].coordinate):1,k=xNe(a,T,x);return l==="equidistantPreserveStart"?vNe(T,k,v,s,i):(l==="preserveStart"||l==="preserveStartEnd"?g=kNe(T,k,v,s,i,l==="preserveStartEnd"):g=SNe(T,k,v,s,i),g.filter(b=>b.isShow))}var TNe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:a=0}=e,i=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var o=r?r.getBoundingClientRect().width:0,l=s+a,u=i+l+o+(r?n:0);return Math.round(u)}return 0},CNe=["axisLine","width","height","className","hide","ticks"],ENe=["viewBox"],NNe=["viewBox"];function D7(e,t){if(e==null)return{};var r,n,s=ANe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ANe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Lm(){return Lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lm.apply(null,arguments)}function ML(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ML(Object(r),!0).forEach(function(n){jNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ML(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jNe(e,t,r){return(t=PNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PNe(e){var t=MNe(e,"string");return typeof t=="symbol"?t:t+""}function MNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KN={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function FNe(e){var{x:t,y:r,width:n,height:s,orientation:a,mirror:i,axisLine:o,otherSvgProps:l}=e;if(!o)return null;var u=Qa(Qa(Qa({},l),Ji(o,!1)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!i||a==="bottom"&&i);u=Qa(Qa({},u),{},{x1:t,y1:r+d*s,x2:t+n,y2:r+d*s})}else{var f=+(a==="left"&&!i||a==="right"&&i);u=Qa(Qa({},u),{},{x1:t+f*n,y1:r,x2:t+f*n,y2:r+s})}return S.createElement("line",Lm({},u,{className:Ms("recharts-cartesian-axis-line",h3(o,"className"))}))}function DNe(e,t,r,n,s,a,i,o,l){var u,d,f,h,g,x,y=o?-1:1,v=e.tickSize||i,T=nn(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":u=d=e.coordinate,h=r+ +!o*s,f=h-y*v,x=f-y*l,g=T;break;case"left":f=h=e.coordinate,d=t+ +!o*n,u=d-y*v,g=u-y*l,x=T;break;case"right":f=h=e.coordinate,d=t+ +o*n,u=d+y*v,g=u+y*l,x=T;break;default:u=d=e.coordinate,h=r+ +o*s,f=h+y*v,x=f+y*l,g=T;break}return{line:{x1:u,y1:f,x2:d,y2:h},tick:{x:g,y:x}}}function ONe(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function INe(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function RNe(e){var{option:t,tickProps:r,value:n}=e,s,a=Ms(r.className,"recharts-cartesian-axis-tick-value");if(S.isValidElement(t))s=S.cloneElement(t,Qa(Qa({},r),{},{className:a}));else if(typeof t=="function")s=t(Qa(Qa({},r),{},{className:a}));else{var i="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(i=Ms(i,t?.className)),s=S.createElement(WN,Lm({},r,{className:i}),n)}return s}function LNe(e){var{ticks:t=[],tick:r,tickLine:n,stroke:s,tickFormatter:a,unit:i,padding:o,tickTextProps:l,orientation:u,mirror:d,x:f,y:h,width:g,height:x,tickSize:y,tickMargin:v,fontSize:T,letterSpacing:k,getTicksConfig:b,events:N}=e,E=qN(Qa(Qa({},b),{},{ticks:t}),T,k),P=ONe(u,d),M=INe(u,d),j=Qm(b),A=Ji(r,!1),O=Qa(Qa({},j),{},{fill:"none"},Ji(n,!1)),L=E.map((q,Q)=>{var{line:ae,tick:te}=DNe(q,f,h,g,x,u,y,d,v),ne=Qa(Qa(Qa(Qa({textAnchor:P,verticalAnchor:M},j),{},{stroke:"none",fill:s},A),te),{},{index:Q,payload:q,visibleTicksCount:E.length,tickFormatter:a,padding:o},l);return S.createElement(S1,Lm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(q.value,"-").concat(q.coordinate,"-").concat(q.tickCoord)},n4e(N,q,Q)),n&&S.createElement("line",Lm({},O,ae,{className:Ms("recharts-cartesian-axis-tick-line",h3(n,"className"))})),r&&S.createElement(RNe,{option:r,tickProps:ne,value:"".concat(typeof a=="function"?a(q.value,Q):q.value).concat(i||"")}))});return L.length>0?S.createElement("g",{className:"recharts-cartesian-axis-ticks"},L):null}var BNe=S.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:a,hide:i,ticks:o}=e,l=D7(e,CNe),[u,d]=S.useState(""),[f,h]=S.useState(""),g=S.useRef([]);S.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var y;return TNe({ticks:g.current,label:(y=e.labelRef)===null||y===void 0?void 0:y.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var x=S.useCallback(y=>{if(y){var v=y.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=Array.from(v);var T=v[0];if(T){var k=window.getComputedStyle(T),b=k.fontSize,N=k.letterSpacing;(b!==u||N!==f)&&(d(b),h(N))}}},[u,f]);return i||n!=null&&n<=0||s!=null&&s<=0?null:S.createElement(S1,{className:Ms("recharts-cartesian-axis",a),ref:x},S.createElement(FNe,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Qm(e)}),S.createElement(LNe,{ticks:o,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:u,letterSpacing:f,getTicksConfig:e,events:l}),S.createElement(GCe,{x:e.x,y:e.y,width:e.width,height:e.height},S.createElement(tEe,{label:e.label}),e.children))}),$Ne=S.memo(BNe,(e,t)=>{var{viewBox:r}=e,n=D7(e,ENe),{viewBox:s}=t,a=D7(t,NNe);return Zp(r,s)&&Zp(n,a)}),YN=S.forwardRef((e,t)=>{var r=Nc(e,KN);return S.createElement($Ne,Lm({},r,{ref:t}))});YN.displayName="CartesianAxis";var zNe=["x1","y1","x2","y2","key"],UNe=["offset"],WNe=["xAxisId","yAxisId"],HNe=["xAxisId","yAxisId"];function FL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FL(Object(r),!0).forEach(function(n){GNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GNe(e,t,r){return(t=VNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VNe(e){var t=qNe(e,"string");return typeof t=="symbol"?t:t+""}function qNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function em(){return em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},em.apply(null,arguments)}function v_(e,t){if(e==null)return{};var r,n,s=KNe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function KNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var YNe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:a,height:i,ry:o}=e;return S.createElement("rect",{x:n,y:s,ry:o,width:a,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function CX(e,t){var r;if(S.isValidElement(e))r=S.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:a,y2:i,key:o}=t,l=v_(t,zNe),u=Qm(l),{offset:d}=u,f=v_(u,UNe);r=S.createElement("line",em({},f,{x1:n,y1:s,x2:a,y2:i,fill:"none",key:o}))}return r}function XNe(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:a,yAxisId:i}=e,o=v_(e,WNe),l=s.map((u,d)=>{var f=fo(fo({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return CX(n,f)});return S.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function JNe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:a,yAxisId:i}=e,o=v_(e,HNe),l=s.map((u,d)=>{var f=fo(fo({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return CX(n,f)});return S.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function QNe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:a,height:i,horizontalPoints:o,horizontal:l=!0}=e;if(!l||!t||!t.length)return null;var u=o.map(f=>Math.round(f+s-s)).sort((f,h)=>f-h);s!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var g=!u[h+1],x=g?s+i-f:u[h+1]-f;if(x<=0)return null;var y=h%t.length;return S.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:x,width:a,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function ZNe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:a,width:i,height:o,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var u=l.map(f=>Math.round(f+s-s)).sort((f,h)=>f-h);s!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var g=!u[h+1],x=g?s+i-f:u[h+1]-f;if(x<=0)return null;var y=h%r.length;return S.createElement("rect",{key:"react-".concat(h),x:f,y:a,width:x,height:o,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var e9e=(e,t)=>{var{xAxis:r,width:n,height:s,offset:a}=e;return jq(qN(fo(fo(fo({},KN),r),{},{ticks:Pq(r),viewBox:{x:0,y:0,width:n,height:s}})),a.left,a.left+a.width,t)},t9e=(e,t)=>{var{yAxis:r,width:n,height:s,offset:a}=e;return jq(qN(fo(fo(fo({},KN),r),{},{ticks:Pq(r),viewBox:{x:0,y:0,width:n,height:s}})),a.top,a.top+a.height,t)},r9e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function EX(e){var t=Iq(),r=Rq(),n=Oq(),s=fo(fo({},Nc(e,r9e)),{},{x:nn(e.x)?e.x:n.left,y:nn(e.y)?e.y:n.top,width:nn(e.width)?e.width:n.width,height:nn(e.height)?e.height:n.height}),{xAxisId:a,yAxisId:i,x:o,y:l,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:g}=s,x=Ec(),y=qr(A=>GR(A,"xAxis",a,x)),v=qr(A=>GR(A,"yAxis",i,x));if(!nn(u)||u<=0||!nn(d)||d<=0||!nn(o)||o!==+o||!nn(l)||l!==+l)return null;var T=s.verticalCoordinatesGenerator||e9e,k=s.horizontalCoordinatesGenerator||t9e,{horizontalPoints:b,verticalPoints:N}=s;if((!b||!b.length)&&typeof k=="function"){var E=h&&h.length,P=k({yAxis:v?fo(fo({},v),{},{ticks:E?h:v.ticks}):void 0,width:t,height:r,offset:n},E?!0:f);rv(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(b=P)}if((!N||!N.length)&&typeof T=="function"){var M=g&&g.length,j=T({xAxis:y?fo(fo({},y),{},{ticks:M?g:y.ticks}):void 0,width:t,height:r,offset:n},M?!0:f);rv(Array.isArray(j),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof j,"]")),Array.isArray(j)&&(N=j)}return S.createElement("g",{className:"recharts-cartesian-grid"},S.createElement(YNe,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),S.createElement(QNe,em({},s,{horizontalPoints:b})),S.createElement(ZNe,em({},s,{verticalPoints:N})),S.createElement(XNe,em({},s,{offset:n,horizontalPoints:b,xAxis:y,yAxis:v})),S.createElement(JNe,em({},s,{offset:n,verticalPoints:N,xAxis:y,yAxis:v})))}EX.displayName="CartesianGrid";var NX=(e,t,r,n)=>DY(e,"xAxis",t,n),AX=(e,t,r,n)=>FY(e,"xAxis",t,n),jX=(e,t,r,n)=>DY(e,"yAxis",r,n),PX=(e,t,r,n)=>FY(e,"yAxis",r,n),n9e=Ft([Ds,NX,jX,AX,PX],(e,t,r,n,s)=>th(e,"xAxis")?d7(t,n,!1):d7(r,s,!1)),s9e=(e,t,r,n,s)=>s;function a9e(e){return e.type==="line"}var i9e=Ft([rY,s9e],(e,t)=>e.filter(a9e).find(r=>r.id===t)),o9e=Ft([Ds,NX,jX,AX,PX,i9e,n9e,pN],(e,t,r,n,s,a,i,o)=>{var{chartData:l,dataStartIndex:u,dataEndIndex:d}=o;if(!(a==null||t==null||r==null||n==null||s==null||n.length===0||s.length===0||i==null)){var{dataKey:f,data:h}=a,g;if(h!=null&&h.length>0?g=h:g=l?.slice(u,d+1),g!=null)return A9e({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:f,bandSize:i,displayedData:g})}}),l9e=["id"],c9e=["type","layout","connectNulls","needClip"],u9e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function DL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Al(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DL(Object(r),!0).forEach(function(n){d9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d9e(e,t,r){return(t=f9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f9e(e){var t=h9e(e,"string");return typeof t=="symbol"?t:t+""}function h9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XN(e,t){if(e==null)return{};var r,n,s=m9e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function m9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Bm(){return Bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bm.apply(null,arguments)}var g9e=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:a}=e;return[{inactive:a,dataKey:t,type:s,color:n,value:Mq(r,t),payload:e}]};function p9e(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:a,name:i,hide:o,unit:l}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:a,dataKey:t,nameKey:void 0,name:Mq(i,t),hide:o,type:e.tooltipType,color:e.stroke,unit:l}}}var MX=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function x9e(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}var y9e=(e,t,r)=>{var n=r.reduce((f,h)=>f+h);if(!n)return MX(t,e);for(var s=Math.floor(e/n),a=e%n,i=t-e,o=[],l=0,u=0;l<r.length;u+=r[l],++l)if(u+r[l]>a){o=[...r.slice(0,l),a-u];break}var d=o.length%2===0?[0,i]:[i];return[...x9e(r,s),...o,...d].map(f=>"".concat(f,"px")).join(", ")};function v9e(e,t){var r;if(S.isValidElement(e))r=S.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=Ms("recharts-line-dot",typeof e!="boolean"?e.className:"");r=S.createElement(xX,Bm({},t,{className:n}))}return r}function w9e(e,t){return e==null?!1:t?!0:e.length===1}function b9e(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:a,needClip:i}=n;if(!w9e(r,s))return null;var{id:o}=n,l=XN(n,l9e),u=PV(s),d=Qm(l),f=Ji(s,!0),h=r.map((x,y)=>{var v=Al(Al(Al({key:"dot-".concat(y),r:3},d),f),{},{index:y,cx:x.x,cy:x.y,dataKey:a,value:x.value,payload:x.payload,points:r});return v9e(s,v)}),g={clipPath:i?"url(#clipPath-".concat(u?"":"dots-").concat(t,")"):void 0};return S.createElement(S1,Bm({className:"recharts-line-dots",key:"dots"},g),h)}function _9e(e){var{showLabels:t,children:r,points:n}=e,s=S.useMemo(()=>n?.map(a=>{var i={x:a.x,y:a.y,width:0,height:0};return Al(Al({},i),{},{value:a.value,payload:a.payload,viewBox:i,parentViewBox:void 0,fill:void 0})}),[n]);return S.createElement(fEe,{value:t?s:null},r)}function OL(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:a}=e,{type:i,layout:o,connectNulls:l,needClip:u}=a,d=XN(a,c9e),f=Al(Al({},Ji(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:i,layout:o,connectNulls:l,strokeDasharray:s??a.strokeDasharray});return S.createElement(S.Fragment,null,n?.length>1&&S.createElement($q,Bm({},f,{pathRef:r})),S.createElement(b9e,{points:n,clipPathId:t,props:a}))}function S9e(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function k9e(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:a}=e,{points:i,strokeDasharray:o,isAnimationActive:l,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:h,width:g,height:x,onAnimationEnd:y,onAnimationStart:v}=r,T=s.current,k=Gq(r,"recharts-line-"),[b,N]=S.useState(!1),E=!b,P=S.useCallback(()=>{typeof y=="function"&&y(),N(!1)},[y]),M=S.useCallback(()=>{typeof v=="function"&&v(),N(!0)},[v]),j=S9e(n.current),A=a.current;return S.createElement(_9e,{points:i,showLabels:E},r.children,S.createElement(Hq,{animationId:k,begin:u,duration:d,isActive:l,easing:f,onAnimationEnd:P,onAnimationStart:M,key:k},O=>{var L=zd(A,j+A,O),q=Math.min(L,j),Q;if(l)if(o){var ae="".concat(o).split(/[,\s]+/gim).map(B=>parseFloat(B));Q=y9e(q,j,ae)}else Q=MX(j,q);else Q=o==null?void 0:String(o);if(T){var te=T.length/i.length,ne=O===1?i:i.map((B,V)=>{var R=Math.floor(V*te);if(T[R]){var H=T[R];return Al(Al({},B),{},{x:zd(H.x,B.x,O),y:zd(H.y,B.y,O)})}return h?Al(Al({},B),{},{x:zd(g*2,B.x,O),y:zd(x/2,B.y,O)}):Al(Al({},B),{},{x:B.x,y:B.y})});return s.current=ne,S.createElement(OL,{props:r,points:ne,clipPathId:t,pathRef:n,strokeDasharray:Q})}return O>0&&j>0&&(s.current=i,a.current=q),S.createElement(OL,{props:r,points:i,clipPathId:t,pathRef:n,strokeDasharray:Q})}),S.createElement(gEe,{label:r.label}))}function T9e(e){var{clipPathId:t,props:r}=e,n=S.useRef(null),s=S.useRef(0),a=S.useRef(null);return S.createElement(k9e,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:s,pathRef:a})}var C9e=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Uo(e.payload,t)});class E9e extends S.Component{render(){var t,{hide:r,dot:n,points:s,className:a,xAxisId:i,yAxisId:o,top:l,left:u,width:d,height:f,id:h,needClip:g}=this.props;if(r)return null;var x=Ms("recharts-line",a),y=h,{r:v=3,strokeWidth:T=2}=(t=Ji(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},k=PV(n),b=v*2+T;return S.createElement(S.Fragment,null,S.createElement(S1,{className:x},g&&S.createElement("defs",null,S.createElement(sNe,{clipPathId:y,xAxisId:i,yAxisId:o}),!k&&S.createElement("clipPath",{id:"clipPath-dots-".concat(y)},S.createElement("rect",{x:u-b/2,y:l-b/2,width:d+b,height:f+b}))),S.createElement(nNe,{xAxisId:i,yAxisId:o,data:s,dataPointFormatter:C9e,errorBarOffset:0},S.createElement(T9e,{props:this.props,clipPathId:y}))),S.createElement(YEe,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var FX={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!k1.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function N9e(e){var t=Nc(e,FX),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:a,animationEasing:i,connectNulls:o,dot:l,hide:u,isAnimationActive:d,label:f,legendType:h,xAxisId:g,yAxisId:x,id:y}=t,v=XN(t,u9e),{needClip:T}=_X(g,x),k=GN(),b=VE(),N=Ec(),E=qr(O=>o9e(O,g,x,N,y));if(b!=="horizontal"&&b!=="vertical"||E==null||k==null)return null;var{height:P,width:M,x:j,y:A}=k;return S.createElement(E9e,Bm({},v,{id:y,connectNulls:o,dot:l,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:a,animationEasing:i,isAnimationActive:d,hide:u,label:f,legendType:h,xAxisId:g,yAxisId:x,points:E,layout:b,height:P,width:M,left:j,top:A,needClip:T}))}function A9e(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:a,dataKey:i,bandSize:o,displayedData:l}=e;return l.map((u,d)=>{var f=Uo(u,i);if(t==="horizontal"){var h=jI({axis:r,ticks:s,bandSize:o,entry:u,index:d}),g=Si(f)?null:n.scale(f);return{x:h,y:g,value:f,payload:u}}var x=Si(f)?null:r.scale(f),y=jI({axis:n,ticks:a,bandSize:o,entry:u,index:d});return x==null||y==null?null:{x,y,value:f,payload:u}}).filter(Boolean)}function j9e(e){var t=Nc(e,FX),r=Ec();return S.createElement(TEe,{id:t.id,type:"line"},n=>S.createElement(S.Fragment,null,S.createElement(wEe,{legendPayload:g9e(t)}),S.createElement(yEe,{fn:p9e,args:t}),S.createElement(PEe,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),S.createElement(N9e,Bm({},t,{id:n}))))}var DX=S.memo(j9e);DX.displayName="Line";var P9e=["dangerouslySetInnerHTML","ticks"],M9e=["id"],F9e=["domain"],D9e=["domain"];function O7(){return O7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O7.apply(null,arguments)}function w_(e,t){if(e==null)return{};var r,n,s=O9e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function O9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function I9e(e){var t=Go();return S.useEffect(()=>(t(IEe(e)),()=>{t(REe(e))}),[e,t]),null}var R9e=e=>{var{xAxisId:t,className:r}=e,n=qr(Dq),s=Ec(),a="xAxis",i=qr(v=>j1(v,a,t,s)),o=qr(v=>MY(v,a,t,s)),l=qr(v=>i7e(v,t)),u=qr(v=>f7e(v,t)),d=qr(v=>QK(v,t));if(l==null||u==null||d==null)return null;var{dangerouslySetInnerHTML:f,ticks:h}=e,g=w_(e,P9e),{id:x}=d,y=w_(d,M9e);return S.createElement(YN,O7({},g,y,{scale:i,x:u.x,y:u.y,width:l.width,height:l.height,className:Ms("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:o}))},L9e={allowDataOverflow:Sl.allowDataOverflow,allowDecimals:Sl.allowDecimals,allowDuplicatedCategory:Sl.allowDuplicatedCategory,height:Sl.height,hide:!1,mirror:Sl.mirror,orientation:Sl.orientation,padding:Sl.padding,reversed:Sl.reversed,scale:Sl.scale,tickCount:Sl.tickCount,type:Sl.type,xAxisId:0},B9e=e=>{var t,r,n,s,a,i=Nc(e,L9e);return S.createElement(S.Fragment,null,S.createElement(I9e,{interval:(t=i.interval)!==null&&t!==void 0?t:"preserveEnd",id:i.xAxisId,scale:i.scale,type:i.type,padding:i.padding,allowDataOverflow:i.allowDataOverflow,domain:i.domain,dataKey:i.dataKey,allowDuplicatedCategory:i.allowDuplicatedCategory,allowDecimals:i.allowDecimals,tickCount:i.tickCount,includeHidden:(r=i.includeHidden)!==null&&r!==void 0?r:!1,reversed:i.reversed,ticks:i.ticks,height:i.height,orientation:i.orientation,mirror:i.mirror,hide:i.hide,unit:i.unit,name:i.name,angle:(n=i.angle)!==null&&n!==void 0?n:0,minTickGap:(s=i.minTickGap)!==null&&s!==void 0?s:5,tick:(a=i.tick)!==null&&a!==void 0?a:!0,tickFormatter:i.tickFormatter}),S.createElement(R9e,i))},$9e=(e,t)=>{var{domain:r}=e,n=w_(e,F9e),{domain:s}=t,a=w_(t,D9e);return Zp(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:Zp({domain:r},{domain:s}):!1},OX=S.memo(B9e,$9e);OX.displayName="XAxis";var z9e=["dangerouslySetInnerHTML","ticks"],U9e=["id"],W9e=["domain"],H9e=["domain"];function I7(){return I7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I7.apply(null,arguments)}function b_(e,t){if(e==null)return{};var r,n,s=G9e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function G9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function V9e(e){var t=Go();return S.useEffect(()=>(t(LEe(e)),()=>{t(BEe(e))}),[e,t]),null}var q9e=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,a=S.useRef(null),i=S.useRef(null),o=qr(Dq),l=Ec(),u=Go(),d="yAxis",f=qr(E=>j1(E,d,t,l)),h=qr(E=>g7e(E,t)),g=qr(E=>m7e(E,t)),x=qr(E=>MY(E,d,t,l)),y=qr(E=>ZK(E,t));if(S.useLayoutEffect(()=>{if(!(n!=="auto"||!h||HN(s)||S.isValidElement(s)||y==null)){var E=a.current;if(E){var P=E.getCalculatedWidth();Math.round(h.width)!==Math.round(P)&&u($Ee({id:t,width:P}))}}},[x,h,u,s,t,n,y]),h==null||g==null||y==null)return null;var{dangerouslySetInnerHTML:v,ticks:T}=e,k=b_(e,z9e),{id:b}=y,N=b_(y,U9e);return S.createElement(YN,I7({},k,N,{ref:a,labelRef:i,scale:f,x:g.x,y:g.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:h.width,height:h.height,className:Ms("recharts-".concat(d," ").concat(d),r),viewBox:o,ticks:x}))},K9e={allowDataOverflow:kl.allowDataOverflow,allowDecimals:kl.allowDecimals,allowDuplicatedCategory:kl.allowDuplicatedCategory,hide:!1,mirror:kl.mirror,orientation:kl.orientation,padding:kl.padding,reversed:kl.reversed,scale:kl.scale,tickCount:kl.tickCount,type:kl.type,width:kl.width,yAxisId:0},Y9e=e=>{var t,r,n,s,a,i=Nc(e,K9e);return S.createElement(S.Fragment,null,S.createElement(V9e,{interval:(t=i.interval)!==null&&t!==void 0?t:"preserveEnd",id:i.yAxisId,scale:i.scale,type:i.type,domain:i.domain,allowDataOverflow:i.allowDataOverflow,dataKey:i.dataKey,allowDuplicatedCategory:i.allowDuplicatedCategory,allowDecimals:i.allowDecimals,tickCount:i.tickCount,padding:i.padding,includeHidden:(r=i.includeHidden)!==null&&r!==void 0?r:!1,reversed:i.reversed,ticks:i.ticks,width:i.width,orientation:i.orientation,mirror:i.mirror,hide:i.hide,unit:i.unit,name:i.name,angle:(n=i.angle)!==null&&n!==void 0?n:0,minTickGap:(s=i.minTickGap)!==null&&s!==void 0?s:5,tick:(a=i.tick)!==null&&a!==void 0?a:!0,tickFormatter:i.tickFormatter}),S.createElement(q9e,i))},X9e=(e,t)=>{var{domain:r}=e,n=b_(e,W9e),{domain:s}=t,a=b_(t,H9e);return Zp(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:Zp({domain:r},{domain:s}):!1},IX=S.memo(Y9e,X9e);IX.displayName="YAxis";var vk={exports:{}},wk={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IL;function J9e(){if(IL)return wk;IL=1;var e=$m();function t(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,a=e.useEffect,i=e.useMemo,o=e.useDebugValue;return wk.useSyncExternalStoreWithSelector=function(l,u,d,f,h){var g=s(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=i(function(){function v(E){if(!T){if(T=!0,k=E,E=f(E),h!==void 0&&x.hasValue){var P=x.value;if(h(P,E))return b=P}return b=E}if(P=b,r(k,E))return P;var M=f(E);return h!==void 0&&h(P,M)?(k=E,P):(k=E,b=M)}var T=!1,k,b,N=d===void 0?null:d;return[function(){return v(u())},N===null?void 0:function(){return v(N())}]},[u,d,f,h]);var y=n(l,g[0],g[1]);return a(function(){x.hasValue=!0,x.value=y},[y]),o(y),y},wk}var RL;function Q9e(){return RL||(RL=1,vk.exports=J9e()),vk.exports}Q9e();function Z9e(e){e()}function eAe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Z9e(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var LL={notify(){},get:()=>[]};function tAe(e,t){let r,n=LL,s=0,a=!1;function i(y){d();const v=n.subscribe(y);let T=!1;return()=>{T||(T=!0,v(),f())}}function o(){n.notify()}function l(){x.onStateChange&&x.onStateChange()}function u(){return a}function d(){s++,r||(r=e.subscribe(l),n=eAe())}function f(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=LL)}function h(){a||(a=!0,d())}function g(){a&&(a=!1,f())}const x={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:g,getListeners:()=>n};return x}var rAe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nAe=rAe(),sAe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",aAe=sAe(),iAe=()=>nAe||aAe?S.useLayoutEffect:S.useEffect,oAe=iAe(),lAe=Symbol.for("react-redux-context"),cAe=typeof globalThis<"u"?globalThis:{};function uAe(){if(!S.createContext)return{};const e=cAe[lAe]??=new Map;let t=e.get(S.createContext);return t||(t=S.createContext(null),e.set(S.createContext,t)),t}var dAe=uAe();function fAe(e){const{children:t,context:r,serverState:n,store:s}=e,a=S.useMemo(()=>{const l=tAe(s);return{store:s,subscription:l,getServerState:n?()=>n:void 0}},[s,n]),i=S.useMemo(()=>s.getState(),[s]);oAe(()=>{const{subscription:l}=a;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[a,i]);const o=r||dAe;return S.createElement(o.Provider,{value:a},t)}var hAe=fAe,mAe=(e,t)=>t,JN=Ft([mAe,Ds,KK,oi,KY,T0,wTe,Qi],TTe),QN=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},RX=Sc("mouseClick"),LX=A2();LX.startListening({actionCreator:RX,effect:(e,t)=>{var r=e.payload,n=JN(t.getState(),QN(r));n?.activeIndex!=null&&t.dispatch(E7e({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var R7=Sc("mouseMove"),BX=A2();BX.startListening({actionCreator:R7,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=DN(n,n.tooltip.settings.shared),a=JN(n,QN(r));s==="axis"&&(a?.activeIndex!=null?t.dispatch(zY({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch($Y()))}});var BL={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},$X=zl({name:"rootProps",initialState:BL,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:BL.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),gAe=$X.reducer,{updateOptions:pAe}=$X.actions,zX=zl({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:$je}=zX.actions,xAe=zX.reducer,UX=Sc("keyDown"),WX=Sc("focus"),ZN=A2();ZN.startListening({actionCreator:UX,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var i=Number(ON(s,M1(r))),o=T0(r);if(a==="Enter"){var l=p_(r,"axis","hover",String(s.index));t.dispatch(A7({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:l}));return}var u=v7e(r),d=u==="left-to-right"?1:-1,f=a==="ArrowRight"?1:-1,h=i+f*d;if(!(o==null||h>=o.length||h<0)){var g=p_(r,"axis","hover",String(h));t.dispatch(A7({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:g}))}}}}});ZN.startListening({actionCreator:WX,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var a="0",i=p_(r,"axis","hover",String(a));t.dispatch(A7({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:i}))}}}});var ac=Sc("externalEvent"),HX=A2();HX.startListening({actionCreator:ac,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:uTe(r),activeDataKey:lTe(r),activeIndex:Kv(r),activeLabel:JY(r),activeTooltipIndex:Kv(r),isTooltipActive:dTe(r)};e.payload.handler(n,e.payload.reactEvent)}}});var yAe=Ft([P1],e=>e.tooltipItemPayloads),vAe=Ft([yAe,B2,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(o=>o.settings.dataKey===n);if(s!=null){var{positions:a}=s;if(a!=null){var i=t(a,r);return i}}}),GX=Sc("touchMove"),VX=A2();VX.startListening({actionCreator:GX,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=DN(n,n.tooltip.settings.shared);if(s==="axis"){var a=JN(n,QN({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));a?.activeIndex!=null&&t.dispatch(zY({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(s==="item"){var i,o=r.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var u=l.getAttribute(Q3e),d=(i=l.getAttribute(Z3e))!==null&&i!==void 0?i:void 0,f=vAe(t.getState(),u,d);t.dispatch(C7e({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var wAe=iq({brush:iNe,cartesianAxis:zEe,chartData:UTe,errorBars:JEe,graphicalItems:jEe,layout:k3e,legend:m5e,options:RTe,polarAxis:xEe,polarOptions:xAe,referenceElements:hNe,rootProps:gAe,tooltip:N7e}),bAe=function(t){return Y_e({reducer:wAe,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([LX.middleware,BX.middleware,ZN.middleware,HX.middleware,VX.middleware]),devTools:k1.devToolsEnabled})};function _Ae(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=Ec(),a=S.useRef(null);if(s)return r;a.current==null&&(a.current=bAe(t));var i=BE;return S.createElement(hAe,{context:i,store:a.current},r)}function SAe(e){var{layout:t,width:r,height:n,margin:s}=e,a=Go(),i=Ec();return S.useEffect(()=>{i||(a(b3e(t)),a(_3e({width:r,height:n})),a(w3e(s)))},[a,i,t,r,n,s]),null}function kAe(e){var t=Go();return S.useEffect(()=>{t(pAe(e))},[t,e]),null}var TAe=["children"];function CAe(e,t){if(e==null)return{};var r,n,s=EAe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function EAe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function __(){return __=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},__.apply(null,arguments)}var NAe={width:"100%",height:"100%"},AAe=S.forwardRef((e,t)=>{var r=Iq(),n=Rq(),s=Bq();if(!e_(r)||!e_(n))return null;var{children:a,otherAttributes:i,title:o,desc:l}=e,u,d;return typeof i.tabIndex=="number"?u=i.tabIndex:u=s?0:void 0,typeof i.role=="string"?d=i.role:d=s?"application":void 0,S.createElement(MV,__({},i,{title:o,desc:l,role:d,tabIndex:u,width:r,height:n,style:NAe,ref:t}),a)}),jAe=e=>{var{children:t}=e,r=qr(T3);if(!r)return null;var{width:n,height:s,y:a,x:i}=r;return S.createElement(MV,{width:n,height:s,x:i,y:a},t)},$L=S.forwardRef((e,t)=>{var{children:r}=e,n=CAe(e,TAe),s=Ec();return s?S.createElement(jAe,null,r):S.createElement(AAe,__({ref:t},n),r)});function PAe(){var e=Go(),[t,r]=S.useState(null),n=qr(J3e);return S.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),a=s.width/t.offsetWidth;ou(a)&&a!==n&&e(S3e(a))}},[t,e,n]),r}function zL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function MAe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zL(Object(r),!0).forEach(function(n){FAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FAe(e,t,r){return(t=DAe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DAe(e){var t=OAe(e,"string");return typeof t=="symbol"?t:t+""}function OAe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IAe=S.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:a,onContextMenu:i,onDoubleClick:o,onMouseDown:l,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:g,onTouchMove:x,onTouchStart:y,style:v,width:T}=e,k=Go(),[b,N]=S.useState(null),[E,P]=S.useState(null);JTe();var M=PAe(),j=S.useCallback(I=>{M(I),typeof t=="function"&&t(I),N(I),P(I)},[M,t,N,P]),A=S.useCallback(I=>{k(RX(I)),k(ac({handler:a,reactEvent:I}))},[k,a]),O=S.useCallback(I=>{k(R7(I)),k(ac({handler:u,reactEvent:I}))},[k,u]),L=S.useCallback(I=>{k($Y()),k(ac({handler:d,reactEvent:I}))},[k,d]),q=S.useCallback(I=>{k(R7(I)),k(ac({handler:f,reactEvent:I}))},[k,f]),Q=S.useCallback(()=>{k(WX())},[k]),ae=S.useCallback(I=>{k(UX(I.key))},[k]),te=S.useCallback(I=>{k(ac({handler:i,reactEvent:I}))},[k,i]),ne=S.useCallback(I=>{k(ac({handler:o,reactEvent:I}))},[k,o]),B=S.useCallback(I=>{k(ac({handler:l,reactEvent:I}))},[k,l]),V=S.useCallback(I=>{k(ac({handler:h,reactEvent:I}))},[k,h]),R=S.useCallback(I=>{k(ac({handler:y,reactEvent:I}))},[k,y]),H=S.useCallback(I=>{k(GX(I)),k(ac({handler:x,reactEvent:I}))},[k,x]),U=S.useCallback(I=>{k(ac({handler:g,reactEvent:I}))},[k,g]);return S.createElement(nX.Provider,{value:b},S.createElement(f4e.Provider,{value:E},S.createElement("div",{className:Ms("recharts-wrapper",n),style:MAe({position:"relative",cursor:"default",width:T,height:s},v),onClick:A,onContextMenu:te,onDoubleClick:ne,onFocus:Q,onKeyDown:ae,onMouseDown:B,onMouseEnter:O,onMouseLeave:L,onMouseMove:q,onMouseUp:V,onTouchEnd:U,onTouchMove:H,onTouchStart:R,ref:j},r)))}),RAe=["children","className","width","height","style","compact","title","desc"];function LAe(e,t){if(e==null)return{};var r,n,s=BAe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function BAe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var $Ae=S.forwardRef((e,t)=>{var{children:r,className:n,width:s,height:a,style:i,compact:o,title:l,desc:u}=e,d=LAe(e,RAe),f=Qm(d);return o?S.createElement($L,{otherAttributes:f,title:l,desc:u},r):S.createElement(IAe,{className:n,style:i,width:s,height:a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},S.createElement($L,{otherAttributes:f,title:l,desc:u,ref:t},S.createElement(gNe,null,r)))}),zAe=["width","height"];function L7(){return L7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L7.apply(null,arguments)}function UAe(e,t){if(e==null)return{};var r,n,s=WAe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function WAe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var HAe={top:5,right:5,bottom:5,left:5},GAe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:HAe,reverseStackOrder:!1,syncMethod:"index"},VAe=S.forwardRef(function(t,r){var n,s=Nc(t.categoricalChartProps,GAe),{width:a,height:i}=s,o=UAe(s,zAe);if(!e_(a)||!e_(i))return null;var{chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,g={chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return S.createElement(_Ae,{preloadedState:{options:g},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:l},S.createElement(aNe,{chartData:h.data}),S.createElement(SAe,{width:a,height:i,layout:s.layout,margin:s.margin}),S.createElement(kAe,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),S.createElement($Ae,L7({},o,{width:a,height:i,ref:r})))}),qAe=["axis"],KAe=S.forwardRef((e,t)=>S.createElement(VAe,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:qAe,tooltipPayloadSearcher:OTe,categoricalChartProps:e,ref:t}));const YAe=({data:e=[],loading:t=!1,error:r=null})=>{if(t)return c.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:c.jsx("div",{className:"spinner-border text-primary",role:"status",children:c.jsx("span",{className:"visually-hidden",children:"Loading..."})})});if(r)return c.jsxs("div",{className:"alert alert-danger",role:"alert",children:[c.jsx("h5",{className:"alert-heading",children:"Error Loading Performance Data"}),c.jsx("p",{children:r})]});if(!e||e.length===0)return c.jsx("div",{className:"text-center text-muted",style:{height:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs("div",{children:[c.jsx("h5",{children:"No Test Data Available"}),c.jsx("p",{children:"No tests have been completed yet for the current term."})]})});const n=e.map(s=>({testName:s.test_name,testDate:s.submitted_at,averageScore:parseFloat(s.average_score),totalStudents:s.total_students,testId:s.test_id}));return c.jsxs("div",{className:"test-performance-graph",children:[c.jsx("div",{style:{width:"100%",height:"400px"},children:c.jsx(gCe,{children:c.jsxs(KAe,{data:n,margin:{top:20,right:30,left:20,bottom:20},children:[c.jsx(EX,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),c.jsx(OX,{dataKey:"testDate",tickFormatter:s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"}),stroke:"#666",fontSize:12}),c.jsx(IX,{domain:[0,100],tickFormatter:s=>`${s}%`,stroke:"#666",fontSize:12}),c.jsx(aCe,{formatter:(s,a)=>[`${parseFloat(s).toFixed(1)}%`,"Average Score"],labelFormatter:s=>{const a=n.find(i=>i.testDate===s);if(a){const i=new Date(s);return`${a.testName} (${i.toLocaleDateString("en-US",{month:"long",day:"numeric"})})`}return s},contentStyle:{backgroundColor:"#fff",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),c.jsx(DX,{type:"monotone",dataKey:"averageScore",stroke:"#007bff",strokeWidth:3,connectNulls:!0,dot:{r:6,fill:"#007bff",stroke:"#fff",strokeWidth:2},activeDot:{r:8,fill:"#ff6b35",stroke:"#fff",strokeWidth:2}})]})})}),c.jsx("div",{className:"mt-3",children:c.jsxs("div",{className:"row",children:[c.jsx("div",{className:"col-md-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"text-muted",children:"Total Tests: "}),c.jsx("strong",{children:n.length})]})}),c.jsx("div",{className:"col-md-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"text-muted",children:"Average Score: "}),c.jsx("strong",{children:n.length>0?(()=>{const s=n.filter(i=>i.averageScore!==null&&i.averageScore!==void 0&&!isNaN(i.averageScore));return s.length===0?"N/A":`${(s.reduce((i,o)=>i+o.averageScore,0)/s.length).toFixed(1)}%`})():"N/A"})]})}),c.jsx("div",{className:"col-md-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"text-muted",children:"Best Test: "}),c.jsx("strong",{children:n.length>0?(()=>{const s=n.filter(a=>a.averageScore!==null&&a.averageScore!==void 0&&!isNaN(a.averageScore));return s.length===0?"N/A":s.reduce((a,i)=>i.averageScore>a.averageScore?i:a).testName})():"N/A"})]})}),c.jsx("div",{className:"col-md-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"text-muted",children:"Latest Test: "}),c.jsx("strong",{children:n.length>0?n[n.length-1].testName:"N/A"})]})})]})})]})},UL=({onBackToLogin:e})=>{const t=fl(),{user:r,isAuthenticated:n,logout:s,getCurrentTeacherUsername:a}=Fs(),{teacherData:i,loadTeacherData:o}=r3(),{activeTests:l,loadActiveTests:u}=y2(),{showNotification:d,notifications:f}=ai(),[h,g]=S.useState(!0),[x,y]=S.useState(""),[v,T]=S.useState("main"),[k,b]=S.useState([]),[N,E]=S.useState([]),[P,M]=S.useState(null),[j,A]=S.useState(null),[O,L]=S.useState(null),[q,Q]=S.useState(!1),[ae,te]=S.useState(!1),[ne,B]=S.useState(null),[V,R]=S.useState([]),[H,U]=S.useState(null),[I,W]=S.useState(!1),[K,Z]=S.useState(!1),[oe,J]=S.useState(null),[le,ue]=S.useState(!1),[de,Te]=S.useState(null),[ie,xe]=S.useState(null),[Ae,Me]=S.useState([]),[Je,He]=S.useState(!1),[It,it]=S.useState(null),[kt,pt]=S.useState([]),[ut,_t]=S.useState(!1),[qt,Jt]=S.useState(null),[Ht,$e]=S.useState(null),[ze,tt]=S.useState(!1),[ot,nt]=S.useState(!1),[Dt,Rt]=S.useState(0),[Qt,wr]=S.useState(!1),[kr,zr]=S.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[Tr,gr]=S.useState([]),[ve,Fe]=S.useState([]),[Le,Ue]=S.useState(!1),[Pt,Ie]=S.useState(!1),[Ye,Ne]=S.useState(null),[Ve,Ge]=S.useState([]),[Ot,Ut]=S.useState(!1),[ar,Dr]=S.useState("subject");S.useEffect(()=>{Ee()},[]),S.useEffect(()=>{const Be=wt=>{ze&&!wt.target.closest(".relative")&&tt(!1),ot&&!wt.target.closest(".relative")&&nt(!1)};return document.addEventListener("mousedown",Be),()=>{document.removeEventListener("mousedown",Be)}},[ze,ot]);const br=S.useCallback(()=>{ye.debug(" showChangePasswordTab called"),wr(!0),tt(!1),nt(!1)},[]),Kr=S.useCallback(()=>{ye.debug(" hideChangePasswordTab called"),wr(!1),zr({currentPassword:"",newPassword:"",confirmPassword:""})},[]),he=S.useCallback(async()=>{if(!r)return;const{currentPassword:Be,newPassword:wt,confirmPassword:Gt}=kr;if(!Be||!wt||!Gt){d("Please fill in all fields","error");return}if(wt!==Gt){d("New passwords do not match","error");return}if(wt.length<6){d("New password must be at least 6 characters long","error");return}const Bt=/[a-zA-Z]/.test(wt),Ln=/[0-9]/.test(wt);if(!Bt||!Ln){d("New password must contain both letters and numbers","error");return}try{const ct=await Rs.changePassword({username:r.username,currentPassword:Be,newPassword:wt});ct.success?(d("Password changed successfully!","success"),Kr()):d(ct.message||"Failed to change password","error")}catch(ct){ye.error("Password change error:",ct),d("Failed to change password. Please try again.","error")}},[r,kr,d]),Ce=S.useCallback(Be=>{const{name:wt,value:Gt}=Be.target;zr(Bt=>({...Bt,[wt]:Gt}))},[]),be=S.useCallback(async()=>{ye.debug(" Loading teacher data...");try{const Be=await Rs.getTeacherData();return ye.debug(" Teacher data loaded:",Be),xe(new Date),Be}catch(Be){throw ye.error(" Error loading teacher data:",Be),Be}},[]),pe=S.useCallback(async(Be=null)=>{ye.debug(" Loading teacher subjects...");try{if(!Be){const Bt=`teacher_subjects_${r?.teacher_id||r?.id||""}`,Ln=fa(Bt);if(Ln)return ye.debug(" Using cached teacher subjects"),b(Ln),Ln}let wt=Be,Gt;if(Be?(ye.debug(" Using passed teacher data for subjects"),Gt=Rs.getTeacherSubjects(Be.subjects)):(ye.debug(" No teacher data passed, fetching from API"),wt=await Rs.getTeacherData(),ye.debug(" Raw teacher data:",wt),Gt=Rs.getTeacherSubjects(wt.subjects)),ye.debug(" Teacher subjects loaded:",Gt),b(Gt),!Be){const Bt=`teacher_subjects_${r?.teacher_id||r?.id||""}`;qs(Bt,Gt,da.teacher_subjects)}return ye.debug(" Available classes for performance chart:",Gt[0]?.classes||[]),ye.debug(" Performance chart will load when user clicks on a class"),Gt}catch(wt){throw ye.error(" Error loading teacher subjects:",wt),wt}},[r?.teacher_id,r?.id]),ke=S.useCallback(async()=>{ye.debug(" Loading teacher active tests...");try{const Be=`teacher_tests_${r?.teacher_id||r?.id||""}`,wt=fa(Be);wt&&wt.some(Ln=>Ln.test_type==="drawing")&&(ye.debug(" Drawing test detected - forcing cache refresh"),localStorage.removeItem(Be));const Gt=fa(Be);if(Gt)return ye.debug(" Using cached teacher tests"),E(Gt),Gt;const Bt=await Pn.getTeacherTests();return ye.debug(" Teacher tests loaded:",Bt),E(Bt),qs(Be,Bt,da.teacher_tests),Bt}catch(Be){throw ye.error(" Error loading teacher tests:",Be),Be}},[r?.teacher_id,r?.id]),Ee=S.useCallback(async()=>{ye.debug(" Initializing Teacher Cabinet...");try{if(g(!0),y(""),!n||!r){ye.debug(" User not authenticated"),y("User not authenticated");return}if(r.role!==Io.TEACHER){ye.error(" Invalid user role for teacher cabinet:",r.role),y("Access denied. Teacher role required.");return}ye.debug(" Loading teacher data...");const Be=await be();ye.debug(" Loading subjects and tests in parallel...");const[wt,Gt]=await Promise.allSettled([pe(Be),ke()]);let Bt=!1;wt.status==="rejected"&&(ye.warn(" Subjects loading failed:",wt.reason),Bt=!0),Gt.status==="rejected"&&(ye.warn(" Tests loading failed:",Gt.reason),Bt=!0),Bt&&d("Some data failed to load, but you can continue","warning"),ye.debug(" Teacher Cabinet initialization complete!")}catch(Be){ye.error(" Error initializing teacher cabinet:",Be),y("Failed to initialize teacher cabinet")}finally{g(!1)}},[n,r,be,pe,ke,d]),Qe=S.useCallback(()=>{ye.debug(" Showing subject selection prompt..."),Q(!0),xt(),Dr("subject")},[]),xt=S.useCallback(async()=>{ye.debug(" Loading available subjects..."),Ue(!0);try{const Be=await Rs.getSubjectsForSelection();gr(Be),ye.debug(" Available subjects loaded:",Be)}catch(Be){ye.error(" Error loading available subjects:",Be),d("Failed to load subjects","error")}finally{Ue(!1)}},[]),rt=S.useCallback(Be=>{if(!Be){Ne(null);return}const wt=Tr.find(Gt=>Gt.subject_id==Be);wt&&(Ne(wt),Ge([]),Dr("classes"))},[Tr]),ce=S.useCallback((Be,wt)=>{Ge(Gt=>Gt.some(Bt=>Bt.grade===Be&&Bt.class===wt)?Gt.filter(Bt=>!(Bt.grade===Be&&Bt.class===wt)):[...Gt,{grade:Be,class:wt}])},[]),me=S.useCallback(()=>{if(!Ye||Ve.length===0){d("Please select at least one class","warning");return}const Be={subject_id:parseInt(Ye.subject_id),subject_name:Ye.subject,classes:Ve};Fe(wt=>[...wt,Be]),Ne(null),Ge([]),Dr("subject"),d(`Added ${Ye.subject} with ${Ve.length} classes`,"success")},[Ye,Ve]),je=S.useCallback(Be=>{Fe(wt=>wt.filter((Gt,Bt)=>Bt!==Be))},[]),Pe=S.useCallback(async(Be,wt,Gt)=>{ye.debug(" Deleting teacher subject:",{subjectId:Be,grade:wt,classNumber:Gt});try{const Bt={subjectId:Be,grade:wt,class:Gt};ye.debug(" Sending delete request with data:",Bt);const Ln=await Rs.deleteTeacherSubject(Bt);if(Ln.success)d("Subject assignment deleted successfully!","success"),await pe();else throw new Error(Ln.error||"Failed to delete subject assignment")}catch(Bt){ye.error(" Error deleting subject assignment:",Bt),d("Error deleting subject assignment. Please try again.","error")}},[pe,d]),Ze=S.useCallback((Be,wt,Gt,Bt)=>{Te({subjectId:Be,subjectName:wt,grade:Gt,classNumber:Bt}),ue(!0)},[]),gt=S.useCallback(async()=>{de&&(await Pe(de.subjectId,de.grade,de.classNumber),ue(!1),Te(null))},[de,Pe]),Tt=S.useCallback(()=>{ue(!1),Te(null)},[]),ir=S.useCallback(async()=>{if(ve.length===0){d("Please select at least one subject","warning");return}Ie(!0);try{const Be=await Rs.saveTeacherSubjects(ve);if(Be.success)d("Subjects saved successfully!","success"),Q(!1),Fe([]),Dr("subject"),await pe();else throw new Error(Be.error||"Failed to save subjects")}catch(Be){ye.error(" Error saving teacher subjects:",Be),d("Failed to save subjects","error")}finally{Ie(!1)}},[ve,pe]);S.useCallback(async Be=>{ye.debug(" Saving teacher subjects:",Be);try{const wt=await Rs.saveTeacherSubjects(Be);if(wt.success)d("Subjects saved successfully!","success"),await pe(),Q(!1);else throw new Error(wt.error||"Failed to save subjects")}catch(wt){ye.error(" Error saving teacher subjects:",wt),d("Failed to save subjects","error")}},[pe]);const Ct=S.useCallback(()=>{ye.debug(" Showing active tests..."),T("tests")},[]),or=S.useCallback(async Be=>{ye.debug(" Showing test details:",Be),B(Be),te(!0),R([]),U(null),W(!0);try{if(["input","true_false","multiple_choice"].includes(Be.test_type)){const wt=await Pn.getTestQuestionsWithInfo(Be.test_type,Be.test_id);R(wt.questions||[]),U(wt.testInfo||null),ye.debug(" Test questions and info loaded:",{questionsCount:wt.questions?.length||0,testInfo:wt.testInfo})}}catch(wt){console.error("Error loading test questions:",wt),d("Error loading test questions. Please try again.","error")}finally{W(!1)}},[d]);S.useCallback(async(Be,wt,Gt)=>{ye.debug(" Removing class assignment:",Be,wt,Gt);try{const Bt=await Pn.removeClassAssignment(Be,wt,Gt);if(Bt.success)d("Assignment removed successfully!","success"),await ke();else throw new Error(Bt.error||"Failed to remove assignment")}catch(Bt){ye.error(" Error removing class assignment:",Bt),d("Failed to remove assignment","error")}},[ke]);const Or=S.useCallback(async(Be,wt)=>{ye.debug(" Marking test as completed:",Be,wt),it(wt);try{const Gt=await Pn.markTestCompleted(Be,wt);if(Gt.success){d("Test marked as completed!","success");const Bt=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(Bt),ye.debug(" Cleared teacher tests cache"),await ke()}else throw new Error(Gt.error||"Failed to mark test as completed")}catch(Gt){ye.error(" Error marking test as completed:",Gt),d("Failed to mark test as completed","error")}finally{it(null)}},[ke,d,r?.teacher_id,r?.id]),Lr=S.useCallback(async()=>{ye.debug(" Refreshing active tests data...");try{const Be=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(Be),ye.debug(" Cache cleared, forcing fresh API call"),ye.debug(" Making direct API call to get-teacher-active-tests with noCache");const wt=await Pn.getTeacherTests(!0);ye.debug(" Direct API call returned:",wt),E(wt),ye.debug(" activeTestsData state updated:",wt),d(`Tests refreshed successfully! Found ${wt?.length||0} tests.`,"success")}catch(Be){ye.error(" Error refreshing tests:",Be),d("Failed to refresh tests","error")}},[r?.teacher_id,r?.id]),Pr=S.useCallback(async(Be=null)=>{if(r?.teacher_id){_t(!0),Jt(null);try{ye.debug(" Loading test performance data for class:",Be);const wt=await qbe.getTestPerformance(r.teacher_id,Be);pt(wt),ye.debug(" Test performance data loaded:",wt.length,"tests")}catch(wt){ye.error(" Error loading test performance data:",wt),Jt(wt.message)}finally{_t(!1)}}},[r?.teacher_id]);S.useCallback((Be,wt)=>{ye.debug(" Showing class results:",Be,wt),ye.debug(" Class click - grade:",Be,"className:",wt),A(Be),L(wt),T("results");const Gt=`${Be}/${wt}`;ye.debug(" Loading performance data for clicked class:",Gt),$e(Gt),Pr(Gt)},[Pr]);const[un,An]=S.useState([]),[mn,_r]=S.useState([]),Pa=S.useCallback(async()=>{try{const wt=await(await Vi(()=>import("./retestService-C6b0YDiD.js"),[])).retestService.getRetestAssignments(r.teacher_id);An(wt)}catch(Be){ye.warn("Failed to load retests",Be)}},[r]);S.useCallback(async Be=>{try{const Gt=await(await Vi(()=>import("./retestService-C6b0YDiD.js"),[])).retestService.getRetestTargets(Be);_r(Gt)}catch(wt){ye.warn("Failed to load retest targets",wt)}},[]);const[Mn,ds]=S.useState(!1),[Yn,pa]=S.useState(!1);S.useEffect(()=>{ye.debug("[TeacherCabinet] showRetestModal state changed:",Mn)},[Mn]);const[Hn,_e]=S.useState({test_type:"",original_test_id:"",subject_id:"",passing_threshold:50,scoring_policy:"BEST",max_attempts:1,window_days:2,student_ids:[]}),Nt=S.useCallback(async Be=>{ye.debug("[TeacherCabinet] openRetestModal called with:",Be);const{test_type:wt,original_test_id:Gt,subject_id:Bt,failedStudentIds:Ln=[],grade:ct,class:yt}=Be||{};_e({test_type:wt||"multiple_choice",original_test_id:Gt||"",subject_id:Bt||"",passing_threshold:50,scoring_policy:"BEST",max_attempts:1,window_days:2,student_ids:Ln}),ct!==void 0&&A(ct),yt!==void 0&&L(yt),ye.debug("[TeacherCabinet] Setting showRetestModal to true"),ds(!0)},[]),Ur=S.useCallback(async()=>{pa(!0);try{const Be=await Vi(()=>import("./retestService-C6b0YDiD.js"),[]),wt=new Date,Gt=new Date(wt.getTime()+Hn.window_days*24*60*60*1e3),Bt={...Hn,teacher_id:r.teacher_id,grade:j,class:O,window_start:wt.toISOString(),window_end:Gt.toISOString()};ye.debug("[Retest][TeacherCabinet] Prepared payload:",JSON.stringify(Bt)),ye.debug("[Retest][TeacherCabinet] Selected students count:",(Bt.student_ids||[]).length,"IDs:",Bt.student_ids),await Be.retestService.createRetestAssignment(Bt),d("Retest created","success"),ds(!1),Pa(),Rt(Ln=>Ln+1)}catch(Be){ye.error("Create retest error",Be),d(Be.message||"Failed to create retest","error")}finally{pa(!1)}},[Hn,j,O,Pa]);if(h)return c.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[c.jsxs("div",{className:"text-center",children:[c.jsx(ln,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Cabinet..."})]}),c.jsx("div",{className:"flex flex-wrap gap-2"})]});if(x)return c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Cabinet Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:x}),c.jsx(lt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})});return c.jsxs(ht.div,{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[c.jsx(ht.div,{className:"bg-gradient-to-r from-sky-400 to-sky-600 text-white shadow-lg",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-6",children:[c.jsxs(ht.div,{className:"flex-1 text-center",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-white mb-2",children:"Teacher Cabinet"}),c.jsxs("p",{className:"text-sky-100 text-sm sm:text-base md:text-lg",children:["Welcome, Teacher ",a()||""]})]}),c.jsxs(ht.div,{className:"relative",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[c.jsx("div",{className:"hidden md:block",children:c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>tt(!ze),className:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border border-white/20 text-white hover:bg-white/20 px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50",children:[c.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm font-medium",children:"Menu"}),c.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 transition-transform duration-200",style:{transform:ze?"rotate(180deg)":"rotate(0deg)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),ze&&c.jsxs(ht.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[c.jsxs("button",{onClick:()=>{tt(!1),br()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),c.jsx("span",{children:"Change Password"})]}),c.jsxs("button",{onClick:()=>{tt(!1),e?e():s()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),c.jsx("span",{children:"Logout"})]})]})]})}),c.jsxs("div",{className:"md:hidden",children:[c.jsx("button",{onClick:()=>nt(!ot),className:"flex items-center justify-center w-10 h-10 bg-white/10 border border-white/20 text-white hover:bg-white/20 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),ot&&c.jsxs(ht.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[c.jsxs("div",{className:"px-4 py-2 border-b border-gray-200",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:a()||"Teacher"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Teacher Account"})]}),c.jsxs("button",{onClick:()=>{nt(!1),br()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),c.jsx("span",{children:"Change Password"})]}),c.jsxs("button",{onClick:()=>{nt(!1),e?e():s()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),c.jsx("span",{children:"Logout"})]})]})]})]})]})})}),c.jsx(ht.div,{className:"bg-white border-b shadow-sm",initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.5},children:c.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:c.jsx("nav",{className:"flex space-x-1 sm:space-x-8 overflow-x-auto",children:[{key:"main",label:"Main Dashboard",shortLabel:"Dashboard"},{key:"tests",label:"Test Management",shortLabel:"Tests"},{key:"results",label:"Class Results",shortLabel:"Results"},{key:"subjects",label:"Subject Management",shortLabel:"Subjects"}].map((Be,wt)=>c.jsxs(ht.button,{onClick:()=>Be.key==="tests"?Ct():T(Be.key),className:`py-2 sm:py-4 px-2 sm:px-1 border-b-2 font-medium text-xs sm:text-sm transition-colors duration-200 whitespace-nowrap flex-shrink-0 flex-1 sm:flex-none ${v===Be.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5+wt*.1,duration:.3},whileHover:{scale:1.05},whileTap:{scale:.95},children:[c.jsx("span",{className:"sm:hidden",children:Be.shortLabel}),c.jsx("span",{className:"hidden sm:inline",children:Be.label})]},Be.key))})})}),c.jsx(ht.div,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.5},children:c.jsxs(al,{mode:"wait",children:[v==="main"&&c.jsx(ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:Yr()},"main"),v==="subjects"&&c.jsx(ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:fs()},"subjects"),v==="tests"&&c.jsx(ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:jn()},"tests"),v==="results"&&c.jsx(ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:c.jsx(kV,{selectedGrade:j,selectedClass:O,onBackToCabinet:()=>T("main"),openRetestModal:Nt,forceRefreshOnMount:Dt>0},Dt)},"results")]})}),q&&c.jsx($a,{isOpen:q,onClose:()=>{Q(!1),Dr("subject"),Fe([]),Ne(null),Ge([])},title:"Select Subjects and Classes",size:"large",children:c.jsxs("div",{className:"space-y-6 px-4 max-h-[80vh] overflow-y-auto",children:[ar==="subject"&&c.jsxs(ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Step 1: Select Subject"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Choose the subject you want to teach:"}),Le?c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),c.jsx("span",{className:"ml-2 text-gray-600",children:"Loading subjects..."})]}):c.jsxs("select",{value:Ye?.subject_id||"",onChange:Be=>rt(Be.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"Select a subject"}),Tr.map(Be=>c.jsx("option",{value:Be.subject_id,children:Be.subject},Be.subject_id))]})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx(lt,{variant:"outline",onClick:()=>Q(!1),children:"Cancel"}),c.jsx(lt,{variant:"primary",onClick:()=>Dr("classes"),disabled:!Ye,children:"Next: Select Classes"})]})]}),ar==="classes"&&Ye&&c.jsxs(ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Step 2: Select Classes for ",Ye.subject]}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Choose the classes you teach for this subject:"}),c.jsx("div",{className:"max-h-80 overflow-y-auto border border-gray-200 rounded-lg p-4",children:c.jsx("div",{className:"grid grid-cols-3 gap-3",children:[1,2,3,4,5,6,7].map(Be=>{let wt;return Be===1||Be===2||Be===3?wt=[15,16]:Be===4||Be===5||Be===6?wt=[13,14]:Be===7?wt=[69]:wt=[],c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h4",{className:"font-medium text-gray-700 text-sm",children:["Grade ",Be]}),c.jsx("div",{className:"space-y-1",children:wt.map(Gt=>c.jsxs("label",{className:"flex items-center space-x-2 py-1",children:[c.jsx("input",{type:"checkbox",checked:Ve.some(Bt=>Bt.grade===Be.toString()&&Bt.class===Gt.toString()),onChange:()=>ce(Be.toString(),Gt.toString()),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),c.jsxs("span",{className:"text-xs text-gray-700",children:["Class ",Gt]})]},Gt))})]},Be)})})})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx(lt,{variant:"outline",onClick:()=>Dr("subject"),children:"Back to Subjects"}),c.jsxs("div",{className:"space-x-3",children:[c.jsx(lt,{variant:"outline",onClick:()=>Q(!1),children:"Cancel"}),c.jsx(lt,{variant:"primary",onClick:me,disabled:Ve.length===0,children:"Add Subject"})]})]})]}),ve.length>0&&c.jsxs(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Selected Subjects"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Review your selected subjects and classes:"}),c.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:ve.map((Be,wt)=>c.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-gray-900",children:Be.subject_name}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Classes: ",Be.classes.map(Gt=>`Grade ${Gt.grade} Class ${Gt.class}`).join(", ")]})]}),c.jsx("button",{onClick:()=>je(wt),className:"text-red-600 hover:text-red-800 p-1",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},wt))})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx(lt,{variant:"outline",onClick:()=>Dr("subject"),children:"Add More Subjects"}),c.jsxs("div",{className:"space-x-3",children:[c.jsx(lt,{variant:"outline",onClick:()=>Q(!1),children:"Cancel"}),c.jsx(lt,{variant:"primary",onClick:ir,disabled:Pt,className:"relative",children:Pt?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save All Subjects"})]})]})]})]})}),Mn&&c.jsxs($a,{isOpen:Mn,onClose:()=>ds(!1),title:"Create Retest",size:"medium",children:[c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Retest Window"}),c.jsxs("select",{className:"w-full border rounded px-3 py-2 text-sm",value:Hn.window_days,onChange:Be=>_e(wt=>({...wt,window_days:Number(Be.target.value)})),children:[c.jsx("option",{value:1,children:"1 day"}),c.jsx("option",{value:2,children:"2 days"}),c.jsx("option",{value:3,children:"3 days"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Attempts"}),c.jsxs("select",{className:"w-full border rounded px-3 py-2 text-sm",value:Hn.max_attempts,onChange:Be=>_e(wt=>({...wt,max_attempts:Number(Be.target.value)})),children:[c.jsx("option",{value:1,children:"1 attempt"}),c.jsx("option",{value:2,children:"2 attempts"}),c.jsx("option",{value:3,children:"3 attempts"})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Students can retry immediately if they fail"})]})]})}),c.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[c.jsx("button",{onClick:()=>ds(!1),disabled:Yn,className:"px-4 py-2 text-sm rounded border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),c.jsx("button",{onClick:Ur,disabled:Yn,className:"px-4 py-2 text-sm rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Yn?c.jsxs(c.Fragment,{children:[c.jsx(ln,{size:"sm"}),"Creating Retest..."]}):"Create Retest"})]})]}),ae&&ne&&c.jsxs($a,{isOpen:ae,onClose:()=>te(!1),title:"Test Details",size:"large",children:[c.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Test Name:"}),c.jsx("p",{className:"text-sm text-gray-900",children:ne.test_name})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Subject:"}),c.jsx("p",{className:"text-sm text-gray-900",children:ne.subject})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Test Type:"}),c.jsx("p",{className:"text-sm text-gray-900",children:ne.test_type})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Created:"}),c.jsx("p",{className:"text-sm text-gray-900",children:new Date(ne.created_at).toLocaleDateString()})]}),(H||ne)&&c.jsx("div",{className:"space-y-2",children:c.jsxs("div",{className:"flex items-center space-x-4",children:[["input","true_false","multiple_choice"].includes(ne.test_type)&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Shuffled:"}),c.jsx("span",{className:`text-sm font-semibold ${H?.is_shuffled||ne.is_shuffled?"text-green-600":"text-gray-400"}`,children:H?.is_shuffled||ne.is_shuffled?" Yes":" No"})]}),(H?.allowed_time||ne.allowed_time)&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Timer:"}),c.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[" ",Math.floor((H?.allowed_time||ne.allowed_time)/60)," minutes"]})]}),!(H?.allowed_time||ne.allowed_time)&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Timer:"}),c.jsx("span",{className:"text-sm font-semibold text-gray-400",children:" Not set"})]})]})}),ne.assignments&&ne.assignments.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Classes:"}),c.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:ne.assignments.map((Be,wt)=>c.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs font-medium",children:[Be.grade,"/",Be.class]},wt))})]}),["input","true_false","multiple_choice"].includes(ne.test_type)&&c.jsxs("div",{className:"mt-6 border-t pt-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Questions and Correct Answers"}),I?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx(ln,{size:"md"})}):V.length>0?c.jsx("div",{className:"space-y-4",children:V.map((Be,wt)=>{if(ne.test_type==="multiple_choice"){const Gt=Be.correct_answer,Bt=Be.options||[],Ln=["option_a","option_b","option_c","option_d","option_e","option_f"],ct=Bt.length>0?Bt:Ln.map(yt=>Be[yt]).filter(yt=>yt!=null&&yt!=="");return c.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsxs("span",{className:"text-sm font-semibold text-gray-700 min-w-[2rem]",children:["Q",wt+1,":"]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm text-gray-900 mb-2",dangerouslySetInnerHTML:{__html:Gs(Be.question)}}),c.jsxs("div",{className:"mt-2",children:[c.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Options:"}),c.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:ct.map((yt,nr)=>{const At=String.fromCharCode(97+nr).toUpperCase();return c.jsxs("div",{className:`p-2 rounded ${At===Gt?"bg-green-100 border-2 border-green-500":"bg-white border border-gray-200"}`,children:[c.jsxs("span",{className:"font-semibold",children:[At,":"]})," ",c.jsx("span",{dangerouslySetInnerHTML:{__html:Gs(String(yt))}}),At===Gt&&c.jsx("span",{className:"ml-2 text-green-700 font-bold",children:" Correct"})]},nr)})})]})]})]})},Be.question_id||wt)}if(ne.test_type==="true_false"){const Gt=Be.correct_answer,Bt=Gt===!0||Gt==="true"||Gt===1||Gt==="1";return c.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsxs("span",{className:"text-sm font-semibold text-gray-700 min-w-[2rem]",children:["Q",wt+1,":"]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm text-gray-900 mb-2",dangerouslySetInnerHTML:{__html:Gs(Be.question)}}),c.jsx("div",{className:"mt-2",children:c.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded ${Bt?"bg-green-100 border-2 border-green-500":"bg-red-100 border-2 border-red-500"}`,children:c.jsxs("span",{className:"text-sm font-semibold",children:["Correct Answer: ",Bt?"True":"False"]})})})]})]})},Be.question_id||wt)}if(ne.test_type==="input"){const Gt=Be.correct_answers||[];return c.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsxs("span",{className:"text-sm font-semibold text-gray-700 min-w-[2rem]",children:["Q",wt+1,":"]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm text-gray-900 mb-2",dangerouslySetInnerHTML:{__html:Gs(Be.question)}}),c.jsxs("div",{className:"mt-2",children:[c.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Correct Answer(s):"}),Gt.length>0?c.jsx("div",{className:"flex flex-wrap gap-2",children:Gt.map((Bt,Ln)=>c.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded bg-green-100 border-2 border-green-500 text-sm font-semibold text-green-800",dangerouslySetInnerHTML:{__html:Gs(String(Bt))}},Ln))}):c.jsx("span",{className:"text-sm text-gray-400 italic",children:"No correct answers specified"})]})]})]})},Be.question_id||wt)}return null})}):c.jsx("p",{className:"text-sm text-gray-500 italic",children:"No questions available for this test."})]})]}),c.jsx("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t",children:c.jsx(lt,{variant:"outline",onClick:()=>te(!1),children:"Close"})})]}),le&&de&&c.jsx($a,{isOpen:le,onClose:Tt,title:"Delete Subject Assignment",size:"small",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:c.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Delete Subject Assignment"}),c.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Are you sure you want to delete the assignment for"," ",c.jsx("span",{className:"font-semibold text-gray-900",children:de.subjectName})," ","in Grade ",de.grade,", Class ",de.classNumber,"?"]}),c.jsx("p",{className:"text-xs text-red-600",children:"This action cannot be undone."})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx(lt,{variant:"outline",onClick:Tt,children:"Cancel"}),c.jsx(lt,{variant:"danger",onClick:gt,children:"Delete Assignment"})]})]})}),c.jsx(ht.div,{className:"fixed top-4 right-4 space-y-2 z-50",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.8,duration:.5},children:f.map(Be=>c.jsx(ht.div,{initial:{opacity:0,y:-20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9},transition:{duration:.3},children:c.jsx("div",{className:`p-4 rounded-lg shadow-lg ${Be.type==="success"?"bg-green-600 text-white":Be.type==="error"?"bg-red-600 text-white":Be.type==="warning"?"bg-yellow-600 text-white":"bg-blue-600 text-white"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{children:Be.message}),c.jsx("button",{onClick:()=>setNotifications(wt=>wt.filter(Gt=>Gt.id!==Be.id)),className:"ml-4 text-white hover:text-gray-200",children:""})]})})},Be.id))}),Qt&&c.jsx($a,{isOpen:Qt,onClose:Kr,title:"Change Password",size:"small",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),c.jsx("input",{type:"password",name:"currentPassword",value:kr.currentPassword,onChange:Ce,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Enter current password"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),c.jsx("input",{type:"password",name:"newPassword",value:kr.newPassword,onChange:Ce,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Enter new password"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),c.jsx("input",{type:"password",name:"confirmPassword",value:kr.confirmPassword,onChange:Ce,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Confirm new password"})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx(lt,{type:"button",variant:"secondary",onClick:Kr,className:"flex-1",children:"Cancel"}),c.jsx(lt,{type:"button",onClick:he,className:"flex-1",children:"Change Password"})]})]})})]});function Yr(){return c.jsxs("div",{className:"space-y-8",children:[c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:c.jsxs($t,{children:[c.jsx($t.Header,{children:c.jsx($t.Title,{children:"My Subjects & Classes"})}),c.jsx($t.Body,{children:k.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No subjects assigned"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"You don't have any subjects assigned yet."}),c.jsx(lt,{variant:"outline",onClick:()=>T("subjects"),children:"Manage Subjects"})]}):c.jsx("div",{className:"space-y-6",children:k.map((Be,wt)=>c.jsxs(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+wt*.1,duration:.3},className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:Be.name}),c.jsxs("span",{className:"text-sm text-gray-500",children:[Be.classes?.length||0," classes"]})]}),Be.classes&&Be.classes.length>0?c.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:Be.classes.map((Gt,Bt)=>c.jsx(ht.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3+wt*.1+Bt*.05,duration:.2},whileHover:{scale:1.05},whileTap:{scale:.95},children:c.jsxs(lt,{variant:"outline",size:"sm",onClick:()=>{A(Gt.grade),L(Gt.class),T("results")},className:"font-medium",children:[Gt.grade,"/",Gt.class]})},Bt))}):c.jsx("div",{className:"text-center py-4 text-gray-500",children:c.jsx("span",{className:"text-sm",children:"No classes assigned to this subject"})})]},Be.id))})})]})}),c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:c.jsxs($t,{children:[c.jsxs($t.Header,{children:[c.jsx($t.Title,{children:"Test Performance Overview"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Test performance over time with average scores"})]}),c.jsx($t.Body,{children:k.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"mb-2",children:c.jsx("img",{src:"/pics/Graph.png",alt:"Performance Graph",className:"w-16 h-16 object-contain mx-auto"})}),c.jsx("p",{className:"text-gray-500",children:"No subjects assigned - no performance data available"})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex flex-wrap gap-2 border-b border-gray-200",children:(()=>{const Be=[];return k.forEach(wt=>{wt.classes&&wt.classes.forEach(Gt=>{const Bt=`${Gt.grade}/${Gt.class}`;Be.find(Ln=>Ln.key===Bt)||Be.push({key:Bt,grade:Gt.grade,class:Gt.class,subject:wt.name})})}),Be})().map((Be,wt)=>c.jsxs("button",{onClick:()=>{ye.debug(" Class button clicked:",Be.key),$e(Be.key),Pr(Be.key)},className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors ${Ht===Be.key?"bg-blue-100 text-blue-700 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[Be.grade,"/",Be.class]},Be.key))}),Ht?c.jsx("div",{className:"mt-4",children:c.jsx(YAe,{data:kt,loading:ut,error:qt})}):c.jsxs("div",{className:"mt-4 text-center text-muted py-4",children:[c.jsx("div",{className:"mb-2",children:c.jsx("img",{src:"/pics/Graph.png",alt:"Performance Graph",className:"w-16 h-16 object-contain mx-auto"})}),c.jsx("p",{className:"text-gray-500",children:"Select a class above to view test performance data"})]})]})})]})})]})}function fs(){return c.jsxs("div",{className:"space-y-8",children:[c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:c.jsx($t,{children:c.jsx($t.Header,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx($t.Title,{children:"Subject Management"}),c.jsx(lt,{variant:"primary",onClick:Qe,children:"Add Subject"})]})})})}),k.length===0?c.jsx(ht.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},children:c.jsx($t,{children:c.jsx($t.Body,{children:c.jsxs("div",{className:"text-center p-12",children:[c.jsx(ht.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"},children:""}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No subjects assigned yet"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Add your first subject to get started with creating tests and managing classes."}),c.jsx(lt,{variant:"primary",onClick:Qe,size:"lg",children:"Add Your First Subject"})]})})})}):c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},children:c.jsxs($t,{children:[c.jsx($t.Header,{children:c.jsx($t.Title,{children:"Your Subjects"})}),c.jsx($t.Body,{children:c.jsx("div",{className:"space-y-4",children:k.map((Be,wt)=>c.jsx(ht.div,{className:"p-4 bg-gray-50 rounded-lg border-l-4 border-green-500",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+wt*.1,duration:.3},whileHover:{scale:1.02,backgroundColor:"#f9fafb"},children:c.jsx("div",{className:"flex justify-between items-start",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:Be.name}),c.jsx("div",{className:"flex flex-wrap gap-2",children:Be.classes?.map((Gt,Bt)=>c.jsxs(ht.div,{className:"inline-flex items-center gap-2 bg-blue-100 text-blue-800 text-xs rounded-full px-3 py-1",initial:{scale:0},animate:{scale:1},transition:{delay:.4+wt*.1+Bt*.05,duration:.2},whileHover:{scale:1.1},children:[c.jsxs("span",{children:[Gt.grade," - ",Gt.className]}),c.jsx("button",{onClick:()=>Ze(Be.id,Be.name,Gt.grade,Gt.class),className:"ml-1 text-red-600 hover:text-red-800 transition-colors",title:"Delete this subject assignment",children:c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},Bt))||c.jsx("span",{className:"text-gray-500 text-sm",children:"No classes assigned"})})]})})},wt))})})]})})]})}function jn(){return c.jsxs("div",{className:"space-y-8",children:[c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:c.jsx($t,{children:c.jsx($t.Header,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx($t.Title,{children:"Active Tests"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx(lt,{variant:"outline",onClick:Lr,children:"Refresh"}),c.jsx(lt,{variant:"primary",onClick:()=>t("/teacher/tests/create"),children:"Create New Test"})]})]})})})}),N.length===0?c.jsx(ht.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},children:c.jsx($t,{children:c.jsx($t.Body,{children:c.jsxs("div",{className:"text-center p-12",children:[c.jsx(ht.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"},children:""}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No active tests found"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first test to get started with assessments."}),c.jsx(lt,{variant:"primary",onClick:()=>t("/teacher/tests/create"),size:"lg",children:"Create Your First Test"})]})})})}):c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},className:"space-y-4",children:N.map((Be,wt)=>c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+wt*.1,duration:.3},whileHover:{scale:1.01},children:c.jsx($t,{children:c.jsx($t.Body,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex-1 flex items-center space-x-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 min-w-0 flex-shrink-0 max-w-xs truncate",title:Be.test_name,children:Be.test_name}),c.jsx("span",{className:"hidden sm:inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-medium flex-shrink-0",children:Be.test_type}),c.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 flex-shrink-0",children:[c.jsx("span",{className:"font-medium",children:"Assignments:"}),c.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium",children:Be.assignments?.length||0})]}),Be.assignments&&Be.assignments.length>0&&c.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 flex-shrink-0",children:[c.jsx("span",{className:"font-medium",children:"Classes:"}),c.jsx("div",{className:"flex flex-wrap gap-1",children:Be.assignments.map((Gt,Bt)=>c.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs font-medium",children:[Gt.grade,"/",Gt.class]},Bt))})]}),c.jsx("div",{className:"text-sm text-gray-500 flex-shrink-0",children:new Date(Be.created_at).toLocaleDateString()})]})]}),c.jsxs("div",{className:"flex gap-2 ml-4 flex-shrink-0",children:[c.jsx("div",{className:"sm:hidden",children:c.jsx(lt,{variant:"outline",onClick:()=>or(Be),size:"sm",className:"text-xs",title:`Type: ${Be.test_type} | Assignments: ${Be.assignments?.length||0} | Classes: ${Be.assignments?.map(Gt=>`${Gt.grade}/${Gt.class}`).join(", ")||"None"} | ${new Date(Be.created_at).toLocaleDateString("en-US",{year:"2-digit",month:"numeric",day:"numeric"})}`,children:"Details"})}),c.jsx("div",{className:"hidden sm:block",children:c.jsx(lt,{variant:"outline",onClick:()=>or(Be),size:"sm",children:"Details"})}),c.jsx(lt,{variant:"success",onClick:()=>Or(Be.test_type,Be.test_id),size:"sm",disabled:It===Be.test_id,children:It===Be.test_id?c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing..."]}):"Complete"})]})]})})})},wt))})]})}},XAe={multipleChoice:"multiple_choice",trueFalse:"true_false",input:"input",matching:"matching_type",wordMatching:"word_matching",drawing:"drawing",fillBlanks:"fill_blanks",speaking:"speaking"},WL=()=>{const{user:e}=Fs();Ade();const{notifications:t,showNotification:r,removeNotification:n}=ai(),[s,a]=S.useState(!1),[i,o]=S.useState(!1),[l,u]=S.useState("typeSelection"),[d,f]=S.useState(!1),[h,g]=S.useState(null),[x,y]=S.useState([]),[v,T]=S.useState(!1),[k,b]=S.useState(!1),[N,E]=S.useState(!1),[P,M]=S.useState(!1),[j,A]=S.useState({testName:"",numQuestions:0,numOptions:0,questions:{},enableTimer:!1,timerMinutes:"",isShuffled:!1}),[O,L]=S.useState([]),[q,Q]=S.useState(null);S.useRef(null),S.useRef(null),S.useRef(null),S.useRef(null),S.useRef(null),S.useRef(null),S.useRef(null);const ae=S.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in initializeTestCreation, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}console.log(" Setting up test creation event listeners..."),U(),console.log(" Test creation initialization complete")},[e,r]),te=S.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in showTestTypeSelection, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}console.log(" showTestTypeSelection called - starting new test creation"),o(!1),console.log(" Reset testAssignmentCompleted flag to false"),a(!0),console.log(" Set isInTestCreation flag to true"),ne(),u("typeSelection"),V("testTypeSelection")},[e,r]),ne=S.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in disableNavigationButtons, redirecting to login");return}console.log(" Disabling navigation buttons..."),f(!0)},[e]),B=S.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in enableNavigationButtons, redirecting to login");return}console.log(" Enabling navigation buttons..."),f(!1)},[e]),V=S.useCallback(async ce=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in saveTestCreationState, redirecting to login");return}console.log("  saveTestCreationState called with step:",ce),console.log("  Call stack:",new Error().stack);const me={multipleChoice:{buttonVisible:!0,hintVisible:!1},trueFalse:{buttonVisible:!0,hintVisible:!1},input:{buttonVisible:!0,hintVisible:!1}},je={isInTestCreation:!0,currentStep:ce,timestamp:Date.now(),excelState:me};localStorage.setItem("test_creation_state",JSON.stringify(je)),console.log(" Saved test creation state:",je);const Pe={};switch(ce){case"testTypeSelection":break;case"multipleChoiceForm":Pe.testName=j.testName||"",Pe.numQuestions=j.numQuestions||"",Pe.numOptions=j.numOptions||"",Pe.questions=j.questions||{};break;case"trueFalseForm":Pe.testName=j.testName||"",Pe.numQuestions=j.numQuestions||"",Pe.questions=j.questions||{};break;case"inputForm":Pe.testName=j.testName||"",Pe.numQuestions=j.numQuestions||"",Pe.questions=j.questions||{};break;case"formCreation":Pe.testName=j.testName||"",Pe.numQuestions=j.numQuestions||"",Pe.numOptions=j.numOptions||"",Pe.questions=j.questions||{},Pe.enableTimer=!!j.enableTimer,Pe.timerMinutes=j.timerMinutes||"",Pe.isShuffled=!!j.isShuffled;break;case"assignment":case"testAssignment":Pe.testName=j.testName||"",Pe.numQuestions=j.numQuestions||"",Pe.numOptions=j.numOptions||"",Pe.questions=j.questions||{};break;default:console.log(" Unknown step in saveTestCreationState:",ce);break}Object.keys(Pe).length>0&&(localStorage.setItem(`form_data_${ce}`,JSON.stringify(Pe)),console.log(" Saved form data for step:",ce,Pe))},[e,j]),R=S.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in clearTestCreationState, redirecting to login");return}localStorage.removeItem("test_creation_state"),localStorage.removeItem("test_creation_form_data");const ce=[];for(let me=0;me<localStorage.length;me++){const je=localStorage.key(me);je&&(je.includes("test")||je.includes("form")||je.includes("question"))&&ce.push(je)}ce.forEach(me=>{localStorage.removeItem(me),console.log(" Removed localStorage key:",me)}),console.log(" Cleared test creation state from localStorage")},[e]);S.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in clearAllTestFields, redirecting to login");return}console.log(" Clearing all test form fields..."),A({testName:"",numQuestions:0,numOptions:0,questions:{}}),g(null),L([]),Q(null),console.log(" Cleared all test form fields")},[e]);const H=S.useCallback(()=>{console.log(" Resetting Excel upload state..."),nt({multipleChoice:{buttonVisible:!1,hintVisible:!1},trueFalse:{buttonVisible:!1,hintVisible:!1},input:{buttonVisible:!1,hintVisible:!1}}),["multiple-choice","true-false","input","word-matching"].forEach(me=>{const je=document.querySelector(`.excel-upload-btn[data-test-type="${me}"]`);je&&(je.style.display="none",console.log(" Excel button hidden for:",me));const Pe=document.querySelector(`.excel-hint[data-test-type="${me}"]`);Pe&&(Pe.style.display="none",console.log(" Excel hint hidden for:",me));const Ze=document.querySelector(`.excel-file-input[data-test-type="${me}"]`);Ze&&(Ze.value="",console.log(" File input cleared for:",me))}),console.log(" Excel upload state reset complete")},[]),U=S.useCallback(()=>{console.log(" Setting up auto-save listeners for initial form fields..."),["testName","numQuestions","numOptions","enableTimer","timerMinutes","isShuffled"].forEach(me=>{const je=document.getElementById(me);je&&je.addEventListener("input",()=>{console.log(` Auto-save triggered for field: ${me}`)})}),console.log(" Form auto-save setup complete")},[]);S.useCallback(async ce=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in saveFormDataForStep, redirecting to login");return}console.log("  saveFormDataForStep called with step:",ce),console.log("  Call stack:",new Error().stack);const me={};switch(ce){case"testTypeSelection":break;case"multipleChoiceForm":me.testName=j.testName||"",me.numQuestions=j.numQuestions||"",me.numOptions=j.numOptions||"",me.questions=j.questions||{};break;case"trueFalseForm":me.testName=j.testName||"",me.numQuestions=j.numQuestions||"",me.questions=j.questions||{};break;case"inputForm":me.testName=j.testName||"",me.numQuestions=j.numQuestions||"",me.questions=j.questions||{};break;case"formCreation":me.testName=j.testName||"",me.numQuestions=j.numQuestions||"",me.numOptions=j.numOptions||"",me.questions=j.questions||{};break;default:console.log(" Unknown step for form data save:",ce);return}localStorage.setItem("test_creation_form_data",JSON.stringify({step:ce,data:me,timestamp:Date.now()})),console.log(" Saved form data for step:",ce,me)},[e,j]);const I=S.useCallback(async ce=>{console.log(" Restoring form data for step:",ce);try{const me=localStorage.getItem(`form_data_${ce}`);if(me){const je=JSON.parse(me);console.log(" Restored form data:",je),A(Pe=>{const Ze={...Pe,...je};return console.log(" Updated formData with restored data:",Ze),console.log(" Matching test data in restored data:",Ze.matchingTestData),Ze}),Object.keys(je).forEach(Pe=>{const Ze=document.getElementById(Pe);Ze&&je[Pe]!==void 0&&(Ze.value=je[Pe])}),console.log(" Form data restored for step:",ce)}else console.log(" No saved data found for step:",ce)}catch(me){console.error(" Error restoring form data:",me)}},[e]),W=S.useCallback(()=>{console.log(" Setting up multiple choice form auto-save..."),["mcNumOptions"].forEach(je=>{const Pe=document.getElementById(je);Pe&&Pe.addEventListener("input",()=>{console.log(` Auto-save triggered for MC field: ${je}`)})}),document.querySelectorAll("#mcQuestionsContainer input, #mcQuestionsContainer textarea, #mcQuestionsContainer select").forEach(je=>{je.addEventListener("input",()=>{console.log(" Auto-save triggered for MC question field")})}),console.log(" Multiple choice form auto-save setup complete")},[]),K=S.useCallback(()=>{console.log(" Setting up true/false form auto-save..."),document.querySelectorAll("#tfQuestionsContainer input, #tfQuestionsContainer textarea, #tfQuestionsContainer select").forEach(me=>{me.addEventListener("input",()=>{console.log(" Auto-save triggered for TF question field")})}),console.log(" True/false form auto-save setup complete")},[]),Z=S.useCallback(()=>{console.log(" Setting up input form auto-save..."),document.querySelectorAll("#inputQuestionsContainer input, #inputQuestionsContainer textarea, #inputQuestionsContainer select").forEach(me=>{me.addEventListener("input",()=>{console.log(" Auto-save triggered for Input question field")})}),console.log(" Input form auto-save setup complete")},[]),oe=S.useCallback(ce=>{console.log(" showExcelUploadButton called with testType:",ce);const me=ce==="multiple-choice"?"multipleChoice":ce==="true-false"?"trueFalse":ce==="input"?"input":ce;nt(je=>({...je,[me]:{...je[me],buttonVisible:!0}}))},[]),J=S.useCallback(ce=>{console.log(" showExcelHint called with testType:",ce);const me=ce==="multiple-choice"?"multipleChoice":ce==="true-false"?"trueFalse":ce==="input"?"input":ce;nt(je=>({...je,[me]:{...je[me],hintVisible:!0}}))},[]),le=S.useCallback(async(ce,me,je)=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayTestAssignmentOptions, redirecting to login");return}console.log("displayTestAssignmentOptions called with:",{classes:ce,testType:me,testId:je}),y(ce),console.log(" Test assignment options displayed for:",{testType:me,testId:je,classesCount:ce.length})},[e]),ue=S.useCallback(async(ce,me)=>{try{if(console.log("Loading teacher grades and classes for test assignment"),!e||!e.teacher_id){console.error("No valid teacher session found, redirecting to login");return}console.log("Teacher ID:",e.teacher_id);const Pe=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-subjects?teacher_id=${e.teacher_id}`)).json();console.log("Teacher subjects response:",Pe),Pe.success&&Pe.subjects&&Pe.subjects.length>0?(console.log("Teacher subjects loaded:",Pe.subjects),y(Pe.subjects),le(Pe.subjects,ce,me)):(console.log("No teacher subjects found"),r("No subjects found. Please assign subjects to grades and classes first.","warning"))}catch(je){console.error("Error loading teacher grades and classes:",je),r("Error loading teacher grades and classes","error")}},[e,r,le]),de=S.useCallback(async()=>{if(console.log(" Loading available classes..."),!e||!e.teacher_id){console.error("No valid teacher session found, redirecting to login");return}try{const me=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-subjects?teacher_id=${e.teacher_id}`)).json();console.log(" Teacher subjects response:",me),me.success&&me.subjects&&me.subjects.length>0?(console.log(" Teacher subjects loaded:",me.subjects),y(me.subjects)):(console.log("No teacher subjects found"),y([]),r("No subjects found. Please assign subjects to grades and classes first.","warning"))}catch(ce){console.error(" Error loading available classes:",ce),r("Failed to load available classes","error")}},[e,r]);S.useCallback(async(ce,me)=>{if(i){o(!1);return}if(!e||!e.teacher_id){console.error("No valid teacher session found in showTestAssignment, redirecting to login");return}ne(),V("testAssignment"),Q(me),g(ce),u("testAssignment"),ue(ce,me),console.log(" Test assignment interface shown for:",{testType:ce,testId:me})},[i,e,ne,V,ue]);const Te=S.useCallback(async ce=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayTeacherActiveTests, redirecting to login");return}if(console.log(" Displaying teacher active tests:",ce),ce.length===0){He([]);return}He(ce),console.log(" Active tests displayed:",ce.length,"tests")},[e]);S.useCallback(async(ce,me)=>{try{console.log(" Loading test questions for:",{testType:ce,testId:me});const je=await Pn.getTestQuestions(me,ce);return console.log(" Test questions loaded:",je),je}catch(je){throw console.error("Error loading test questions:",je),je}},[]),S.useCallback((ce,me,je,Pe)=>{console.log(" Showing teacher test details modal:",{testType:ce,testId:me,testName:je,questionsCount:Pe.length}),console.log("Test Details:",{testType:ce,testId:me,testName:je,questions:Pe.map(Ze=>({id:Ze.question_id,question:Ze.question,correctAnswer:Ze.correct_answer}))}),r(`Test details for "${je}" loaded successfully.`,"success")},[r]);const ie=S.useCallback(async()=>{console.log(" DEBUG: loadTeacherActiveTests called");try{console.log(" DEBUG: Fetching teacher active tests using JWT authentication...");const ce=await Pn.getTeacherTests();console.log(" DEBUG: Tests loaded:",ce),ce&&ce.length>0?(console.log(" DEBUG: Success! Displaying",ce.length,"tests"),Te(ce)):(console.log(" DEBUG: No tests found"),He([]))}catch(ce){console.error(" DEBUG: Error loading active tests:",ce),r("Error loading active tests.","error")}},[r,Te]),xe=S.useCallback(()=>{console.log("showTestCreationSuccessMessage called"),r("Test created and assigned successfully!","success"),u("typeSelection"),A({testName:"",numQuestions:0,numOptions:0,questions:{}}),L([]),o(!1),a(!1),R()},[r,R]),Ae=S.useCallback(async(ce,me)=>{if(console.log(" === ASSIGN TEST TO CLASSES DEBUG START ==="),console.log(" Test Type:",ce),console.log(" Test ID:",me),console.log(" Current formData:",j),console.log(" Selected Classes:",O),console.log(" User:",e),!e||!e.teacher_id){console.error(" No valid teacher session found in assignTestToClasses, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}if(console.log(" Teacher ID:",e.teacher_id),O.length===0){console.warn(" No classes selected"),r("Please select at least one class.","warning");return}try{console.log(" Preparing test + assignment request..."),await iu.loadAcademicCalendar();const Pe=iu.getCurrentTerm()?.id;if(!Pe)throw new Error("No current academic period found");const Ze=O.map(Ct=>{const or={grade:parseInt(Ct.grade),class:parseInt(Ct.class),subject_id:parseInt(Ct.subject_id),academic_period_id:Pe,due_date:null};return console.log(" Created assignment:",or),or});if(console.log(" Final assignments array:",Ze),ce==="matching"){console.log(" Processing matching test..."),console.log(" Setting isAssigningTest to true for matching test..."),M(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Pr=>setTimeout(Pr,100));const Ct=j.matchingTestData;if(console.log(" Matching test data from formData:",Ct),!Ct){console.error(" Matching test data not found in formData"),r("Matching test data not found. Please recreate the test.","error");return}console.log(" Matching test data found, processing...");let or;Ct.processedQuestions?(console.log(" Using pre-processed questions from MatchingTestCreator"),or=Ct.processedQuestions):(console.log(" Converting blocks to questions (fallback)..."),console.log(" Blocks:",Ct.blocks),console.log(" Words:",Ct.words),console.log(" Arrows:",Ct.arrows),or=Ct.blocks.map((Pr,un)=>{const An=Ct.words.find(Mn=>Mn.blockId===Pr.id)?.word||`Word ${un+1}`,mn=Ct.arrows.some(Mn=>Mn.startBlock===Pr.id),_r=Ct.arrows.find(Mn=>Mn.startBlock===Pr.id)||null,Pa={question_id:un+1,word:An,block_coordinates:{x:Pr.x,y:Pr.y,width:Pr.width,height:Pr.height},has_arrow:mn,arrow:_r?{startX:_r.startX,startY:_r.startY,endX:_r.endX,endY:_r.endY,style:_r.style||{}}:null};return console.log(` Question ${un+1}:`,Pa),Pa})),console.log(" Final questions array:",or);const Or={teacher_id:e.teacher_id,test_name:j.testName,image_url:Ct.imageUrl,num_blocks:Ct.blocks.length,questions:or,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,assignments:Ze};console.log(" Final matching test data payload:",Or),console.log(" Calling testService.saveMatchingTest...");const Lr=await Pn.saveMatchingTest(Or);console.log(" API Response:",Lr),Lr.success?(console.log(" Matching test created and assigned successfully!"),r("Matching test created and assigned successfully!","success"),console.log("Matching test created and assigned successfully"),o(!0),Me()):(console.error(" Failed to create matching test:",Lr.message),r("Error creating and assigning matching test: "+Lr.message,"error")),M(!1);return}if(ce==="wordMatching"){console.log(" Processing word matching test..."),console.log(" Setting isAssigningTest to true for word matching test..."),M(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Pr=>setTimeout(Pr,100));const Ct=j.wordMatchingData;if(console.log(" Word matching test data from formData:",Ct),!Ct){console.error(" Word matching test data not found in formData"),r("Word matching test data not found. Please recreate the test.","error");return}console.log(" Word matching test data found, processing...");const or=Ct.wordPairs.map((Pr,un)=>({question_id:un+1,left_word:Pr.leftWord,right_word:Pr.rightWord}));console.log(" Final word matching questions array:",or);const Or={teacher_id:e.teacher_id,test_type:"word_matching",test_name:j.testName,num_questions:Ct.wordPairs.length,interaction_type:Ct.interactionType||"drag",questions:or,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,assignments:Ze};console.log(" Final word matching test data payload:",Or),console.log(" Calling testService.assignTestToClasses for word matching...");const Lr=await Pn.assignTestToClasses(Or);console.log(" API Response:",Lr),Lr.success?(console.log(" Word matching test created and assigned successfully!"),r("Word matching test created and assigned successfully!","success"),console.log("Word matching test created and assigned successfully"),o(!0),Me()):(console.error(" Failed to create word matching test:",Lr.message),r("Error creating and assigning word matching test: "+Lr.message,"error")),M(!1);return}if(ce==="drawing"){console.log(" Processing drawing test..."),console.log(" Setting isAssigningTest to true for drawing test..."),M(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Pr=>setTimeout(Pr,100));const Ct=j.drawingData;if(console.log(" Drawing test data from formData:",Ct),!Ct){console.error(" Drawing test data not found in formData"),r("Drawing test data not found. Please recreate the test.","error");return}console.log(" Drawing test data found, processing...");const or=Ct.questions||[];console.log(" Drawing questions array:",or);const Or={teacher_id:e.teacher_id,test_type:"drawing",test_name:j.testName,num_questions:Ct.num_questions,passing_score:Ct.passing_score,questions:or,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,assignments:Ze};console.log(" Final drawing test data payload:",Or),console.log(" Calling testService.assignTestToClasses...");const Lr=await Pn.assignTestToClasses(Or);console.log(" API Response:",Lr),Lr.success?(console.log(" Drawing test created and assigned successfully!"),r("Drawing test created and assigned successfully!","success"),o(!0),Me()):(console.error(" Failed to create drawing test:",Lr.message),r("Error creating and assigning drawing test: "+Lr.message,"error")),M(!1);return}if(ce==="fillBlanks"){console.log(" Processing fill blanks test..."),console.log(" Setting isAssigningTest to true for fill blanks test..."),M(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Pr=>setTimeout(Pr,100));const Ct=j.fillBlanksData;if(console.log(" Fill blanks test data from formData:",Ct),!Ct){console.error(" Fill blanks test data not found in formData"),r("Fill blanks test data not found. Please recreate the test.","error");return}console.log(" Fill blanks test data found, processing...");const or=Ct.blanks||[];console.log(" Fill blanks questions array:",or);const Or={teacher_id:e.teacher_id,test_type:"fill_blanks",test_name:j.testName,test_text:Ct.test_text,num_questions:Ct.num_questions,num_blanks:Ct.num_blanks,separate_type:Ct.separate_type,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,questions:or,assignments:Ze};console.log(" Final fill blanks test data payload:",Or),console.log(" Calling testService.assignTestToClasses...");const Lr=await Pn.assignTestToClasses(Or);console.log(" API Response:",Lr),Lr.success?(console.log(" Fill blanks test created and assigned successfully!"),r("Fill blanks test created and assigned successfully!","success"),o(!0),Me()):(console.error(" Failed to create fill blanks test:",Lr.message),r("Error creating and assigning fill blanks test: "+Lr.message,"error")),M(!1);return}if(ce==="speaking"){console.log(" Processing speaking test..."),console.log(" Setting isAssigningTest to true for speaking test..."),M(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Pr=>setTimeout(Pr,100));const Ct=j.speakingData;if(console.log(" Speaking test data from formData:",Ct),!Ct){console.error(" Speaking test data not found in formData"),r("Speaking test data not found. Please recreate the test.","error");return}console.log(" Speaking test data found, processing...");const or={teacher_id:e.teacher_id,test_type:"speaking",test_name:j.testName,time_limit:Ct.time_limit,min_duration:Ct.min_duration,max_duration:Ct.max_duration,max_attempts:Ct.max_attempts,min_words:Ct.min_words,passing_score:Ct.passing_score,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,questions:Ct.questions,assignments:Ze};console.log(" Final speaking test data payload:",or),console.log(" Calling save-speaking-test-with-assignments for speaking test...");const Lr=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-speaking-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(or)})).json();console.log(" API Response:",Lr),Lr.success?(console.log(" Speaking test created and assigned successfully!"),r("Speaking test created and assigned successfully!","success"),o(!0),Me()):(console.error(" Failed to create speaking test:",Lr.message),r("Error creating and assigning speaking test: "+Lr.message,"error")),M(!1);return}console.log(" Processing non-matching test..."),console.log(" Form data questions:",j.questions);const gt=Object.keys(j.questions).map(Ct=>{const or=j.questions[Ct];console.log(` Processing question ${Ct}:`,or);let Or;if(ce==="input")Or={correct_answers:or.correct_answers||[or.correctAnswer||""]};else if(ce==="trueFalse"){const Pr=or.correct_answer||or.correctAnswer||or.correct_answers?.[0]||"";Or={correct_answer:Pr==="true"}}else Or={correct_answer:or.correctAnswer||or.correct_answer||or.correct_answers?.[0]||""};const Lr={question_id:parseInt(Ct),question:or.question,...Or,options:or.options||[]};return console.log(` Question ${Ct} correct_answers:`,or.correct_answers),console.log(` Question ${Ct} correctAnswer:`,or.correctAnswer),console.log(` Converted question ${Ct}:`,Lr),Lr});console.log(" Final questions array:",gt);const Tt={teacher_id:e.teacher_id,test_type:XAe[ce],test_name:j.testName,num_questions:j.numQuestions,num_options:j.numOptions,questions:gt,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,is_shuffled:!!j.isShuffled,assignments:Ze};console.log(" Final test data payload:",Tt),console.log(" Setting isAssigningTest to true..."),M(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Ct=>setTimeout(Ct,100)),console.log(" Calling testService.assignTestToClasses...");const ir=await Pn.assignTestToClasses(Tt);console.log(" API Response:",ir),ir.success?(console.log(" Test created and assigned successfully!"),r("Test created and assigned successfully!","success"),console.log("Test created and assigned successfully"),o(!0),Me()):(console.error(" Failed to create and assign test:",ir.message),r("Error creating and assigning test: "+ir.message,"error"))}catch(je){console.error(" Exception in assignTestToClasses:",je),console.error("Error creating and assigning test:",je),r("Error creating and assigning test. Please try again.","error")}finally{M(!1)}console.log(" === ASSIGN TEST TO CLASSES DEBUG END ===")},[e,O,j,r,xe]),Me=S.useCallback(async()=>{console.log("returnToMainCabinet called - restoring main cabinet view");try{a(!1),o(!1),u("typeSelection"),g(null),Q(null),L([]),B(),R(),xe(),console.log(" Returned to main cabinet")}catch(ce){console.error("Error returning to main cabinet:",ce)}},[B,R,xe]),[Je,He]=S.useState([]),[It,it]=S.useState(!1);S.useCallback(async()=>{console.log(" Refreshing active tests data...");try{await ie(),r("Active tests data refreshed.","success")}catch(ce){console.error("Error refreshing active tests data:",ce),r("Error refreshing data.","error")}},[ie,r]);const[kt,pt]=S.useState([]),[ut,_t]=S.useState([]),[qt,Jt]=S.useState(!1),[Ht,$e]=S.useState(!1),ze=S.useCallback(async ce=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayExistingSubjectsInSelection, redirecting to login");return}console.log("Displaying existing subjects in selection interface:",ce),pt(ce),console.log(" Existing subjects displayed in selection:",ce.length,"subjects")},[e]);S.useCallback(async()=>{try{console.log("Loading existing subjects...");const ce=await Rs.getTeacherSubjects();console.log("Existing subjects loaded:",ce),ce&&ce.length>0?ze(ce):(console.log("No existing subjects found"),pt([]))}catch(ce){console.error("Error loading existing subjects:",ce),r("Error loading subjects.","error")}},[r,ze]);const tt=S.useCallback(ce=>{console.log("Checking for outside click...");const me=document.getElementById("dropdownMenu"),je=document.querySelector("[data-menu-button]");me&&!me.contains(ce.target)&&!je?.contains(ce.target)&&(console.log("Outside click detected, closing menu"),me.classList.remove("show"),document.removeEventListener("click",tt))},[]),[ot,nt]=S.useState({multipleChoice:{buttonVisible:!1,hintVisible:!1},trueFalse:{buttonVisible:!1,hintVisible:!1},input:{buttonVisible:!1,hintVisible:!1}}),Dt=S.useCallback((ce,me)=>{const je=ce.target.files[0];if(!je)return;if(!je.name.match(/\.(xlsx|xls)$/i)){r("Please select a valid Excel file (.xlsx or .xls)","error"),ce.target.value="";return}if(je.size>5*1024*1024){r("File is too large. Please select a file smaller than 5MB.","error"),ce.target.value="";return}E(!0);const Pe=new FileReader;Pe.onload=function(Ze){try{console.log(" File loaded, processing data...");const gt=new Uint8Array(Ze.target.result),Tt=J8(gt,{type:"array"}),ir=Tt.SheetNames[0],Ct=Tt.Sheets[ir],or=qb.sheet_to_json(Ct,{header:1});console.log(" Parsed Excel data:",or),Qt(or,me),E(!1)}catch(gt){console.error("Error processing Excel file:",gt),r("Error reading Excel file: "+gt.message,"error"),ce.target.value="",E(!1)}},Pe.onerror=function(){r("Failed to read file","error"),ce.target.value="",E(!1)},Pe.readAsArrayBuffer(je)},[r]),Rt=S.useCallback(()=>{console.log(" Initializing Excel upload for all test types...");const ce=document.querySelectorAll(".excel-upload-btn");console.log(` Found ${ce.length} Excel upload buttons`),ce.forEach((me,je)=>{const Pe=me.dataset.testType,Ze=document.querySelector(`.excel-file-input[data-test-type="${Pe}"]`);console.log(` Processing button ${je+1}: testType=${Pe}, fileInput=${Ze?"found":"not found"}`),Ze?(me._excelClickHandler&&me.removeEventListener("click",me._excelClickHandler),Ze._excelChangeHandler&&Ze.removeEventListener("change",Ze._excelChangeHandler),me._excelClickHandler=()=>{console.log(` Excel upload button clicked for test type: ${Pe}`),Ze.click()},Ze._excelChangeHandler=gt=>{console.log(` File input changed for test type: ${Pe}`),Dt(gt,Pe)},me.addEventListener("click",me._excelClickHandler),Ze.addEventListener("change",Ze._excelChangeHandler),console.log(` Excel upload initialized for test type: ${Pe}`)):console.warn(` File input not found for test type: ${Pe}`)}),console.log(" Excel upload initialization complete")},[Dt]),Qt=S.useCallback((ce,me)=>{const je=ce.filter(Ct=>Array.isArray(Ct)&&Ct.length>0&&Ct.some(or=>or&&or.toString().trim()!==""));console.log(" Original Excel data rows:",ce.length),console.log(" Filtered Excel data rows:",je.length);const Ze=wr(je,me).dataRows;if(Ze.length===0){const Ct="No data rows found after header processing. Please check your Excel file.";r(Ct,"error"),alert(Ct),Le(me);return}console.log(` Processing Excel data for test type: ${me}`),console.log(" Data rows after header processing:",Ze);const gt=Tr(Ze,me);if(console.log(" Recognition result:",gt),!gt.recognized){console.log(` Excel data recognition failed for test type: ${me}`);const Ct="Excel data recognition failed. Please check your file format.";r(Ct,"error"),alert(Ct),Le(me);return}console.log(` Excel data recognition successful for test type: ${me}`);const Tt=Ze.length,ir=Fe(me);if(ir===0)console.log(` No question count specified, using CSV count: ${Tt}`),A(Ct=>({...Ct,numQuestions:Tt}));else if(Tt!==ir){const Ct=`Your CSV file has ${Tt} data rows, but you specified ${ir} questions.

Please either:
1. Change your question count to ${Tt}, or
2. Fix your CSV file to have exactly ${ir} data rows

Then try uploading again.`;r(Ct,"error"),Le(me);return}Ue(Ze,me)},[r]),wr=S.useCallback((ce,me)=>{if(ce.length===0)return{hasHeaders:!1,headerRow:null,dataRows:ce};const je=ce[0],Pe=kr(me);if(zr(je,Pe).isLikelyHeader){const gt=`The first row of your Excel file looks like it contains headers:

"${je.join(" | ")}"

Does the first row contain column headers?

Click "OK" if YES (headers will be removed)
Click "Cancel" if NO (first row will be treated as data)`;if(window.confirm(gt))return{hasHeaders:!0,headerRow:je,dataRows:ce.slice(1)}}return{hasHeaders:!1,headerRow:null,dataRows:ce}},[]),kr=S.useCallback(ce=>{switch(ce){case"multipleChoice":return{keywords:["question","answer","correct","option","a","b","c","d","e","f"],expectedColumns:4};case"trueFalse":return{keywords:["question","answer","correct","true","false"],expectedColumns:2};case"input":return{keywords:["question","answer","correct"],expectedColumns:2};default:return{keywords:[],expectedColumns:0}}},[]),zr=S.useCallback((ce,me)=>{if(!ce||ce.length===0)return{isLikelyHeader:!1};if(ce.length<me.expectedColumns)return{isLikelyHeader:!1};const je=ce.join(" ").toLowerCase(),Pe=me.keywords.filter(gt=>je.includes(gt.toLowerCase()));return{isLikelyHeader:Pe.length>me.keywords.length/2,keywordMatches:Pe}},[]),Tr=S.useCallback((ce,me)=>{if(ce.length===0)return r("No data rows found. Please check your Excel file.","error"),{recognized:!1,data:[]};console.log(` Checking data pattern for test type: ${me}`),console.log(" Excel data to validate:",ce);const je=gr(ce,me);if(console.log(" Recognition result:",je),!je.matches){const Pe=`Your Excel file doesn't match the expected format.

Required format:
${ve(me)}

Please review your Excel file and make sure it follows this format exactly.

Then try uploading again.`;return console.log(" Data pattern validation failed:",Pe),console.log(" Calling showNotification with message:",Pe),r(Pe,"error"),console.log(" showNotification called"),alert(Pe),{recognized:!1,data:[]}}return console.log(` Data pattern validation passed for test type: ${me}`),{recognized:!0,data:ce}},[r]),gr=S.useCallback((ce,me)=>{if(me==="multipleChoice")for(let je=0;je<ce.length;je++){const Pe=ce[je];if(Pe.length<4)return{matches:!1,issue:`Row ${je+1} has ${Pe.length} columns but needs at least 4`};if(!Pe[0]||Pe[0].toString().trim()==="")return{matches:!1,issue:`Row ${je+1} has no question in column 1`};if(!Pe[1]||Pe[1].toString().trim()==="")return{matches:!1,issue:`Row ${je+1} has no correct answer in column 2`}}else if(me==="trueFalse")for(let je=0;je<ce.length;je++){const Pe=ce[je];if(Pe.length<2)return{matches:!1,issue:`Row ${je+1} has ${Pe.length} columns but needs at least 2`};if(!Pe[0]||Pe[0].toString().trim()==="")return{matches:!1,issue:`Row ${je+1} has no question in column 1`};const Ze=Pe[1]?.toString().trim().toLowerCase();if(!Ze||!["true","false","t","f"].includes(Ze))return{matches:!1,issue:`Row ${je+1} has invalid correct answer in column 2 (must be True/False)`}}else if(me==="input")for(let je=0;je<ce.length;je++){const Pe=ce[je];if(Pe.length<2)return{matches:!1,issue:`Row ${je+1} has ${Pe.length} columns but needs at least 2`};if(!Pe[0]||Pe[0].toString().trim()==="")return{matches:!1,issue:`Row ${je+1} has no question in column 1`};if(!Pe[1]||Pe[1].toString().trim()==="")return{matches:!1,issue:`Row ${je+1} has no correct answer in column 2`}}return{matches:!0}},[]),ve=S.useCallback(ce=>{switch(ce){case"multipleChoice":return`Column 1: Question
Column 2: Correct Answer (A, B, C, D, E, or F)
Column 3: Option A
Column 4: Option B
Column 5: Option C (optional)
Column 6: Option D (optional)
Column 7: Option E (optional)
Column 8: Option F (optional)`;case"trueFalse":return`Column 1: Question
Column 2: Correct Answer (True or False)`;case"input":return`Column 1: Question
Column 2: Correct Answer`;default:return"Unknown test type"}},[]),Fe=S.useCallback(ce=>j.numQuestions||0,[j.numQuestions]),Le=S.useCallback(ce=>{console.log(` Clearing file input for test type: ${ce}`)},[]),Ue=S.useCallback((ce,me)=>{switch(console.log(` populateFromExcelForTestType called with testType: ${me}`),me){case"multipleChoice":case"multiple-choice":Pt(ce);break;case"trueFalse":case"true-false":Ie(ce);break;case"input":Ye(ce);break;default:console.log(` Unknown test type: ${me}`)}},[]),Pt=S.useCallback(ce=>{console.log(" populateMultipleChoiceFromExcel called with:",ce);const me=Math.max(...ce.map(Ze=>Ze.length-2)),je=Math.min(me,6);console.log(` Excel data has ${me} option columns, using ${je} options`),A(Ze=>({...Ze,numOptions:je}));const Pe={};ce.forEach((Ze,gt)=>{const Tt=gt+1;console.log(` Row ${gt+1} data:`,Ze);const ir={question:(Ze[0]||"").toString().trim(),options:[],correctAnswer:(Ze[1]||"").toString().trim().toUpperCase()};console.log(` Question ${Tt} correctAnswer:`,ir.correctAnswer),["A","B","C","D","E","F"].slice(0,je).forEach((Or,Lr)=>{const Pr=(Ze[Lr+2]||"").toString().trim();console.log(` Option ${Lr} (${Or}):`,Pr),ir.options.push(Pr)}),Pe[Tt]=ir}),A(Ze=>{const gt={...Ze,questions:Pe};return console.log(" Updating form data with:",gt),gt}),console.log(" Populated multiple choice questions from Excel:",Pe),r(`Successfully loaded ${ce.length} questions from CSV file!`,"success"),W(),Ne("multiple-choice")},[j.numOptions,W,r]),Ie=S.useCallback(ce=>{console.log(" populateTrueFalseFromExcel called with:",ce);const me={};ce.forEach((je,Pe)=>{const Ze=Pe+1,gt={question:(je[0]||"").toString().trim(),correctAnswer:je[1]?.toString().trim().toLowerCase()==="true"?"true":"false"};me[Ze]=gt}),A(je=>({...je,questions:me})),console.log(" Populated true/false questions from Excel:",me),r(`Successfully loaded ${ce.length} questions from CSV file!`,"success"),K(),Ne("true-false")},[K,r]),Ye=S.useCallback(ce=>{console.log(" populateInputFromExcel called with:",ce);const me={};ce.forEach((je,Pe)=>{const Ze=Pe+1,gt=[];for(let ir=1;ir<je.length;ir++){const Ct=(je[ir]||"").toString().trim();Ct&&gt.push(Ct)}const Tt={question:(je[0]||"").toString().trim(),correctAnswer:gt[0]||"",correct_answers:gt};console.log(` Excel question ${Ze} data:`,Tt),me[Ze]=Tt}),A(je=>({...je,questions:me})),console.log(" Populated input questions from Excel:",me),r(`Successfully loaded ${ce.length} questions from Excel file!`,"success"),Z(),Ne("input")},[Z,r]),Ne=S.useCallback(ce=>{switch(console.log(` Reattaching form event listeners for test type: ${ce}`),document.querySelectorAll('[data-listener-attached="true"]').forEach(je=>{je.removeEventListener("input",()=>{}),je.removeAttribute("data-listener-attached")}),ce){case"multiple-choice":W();break;case"true-false":K();break;case"input":Z();break;default:console.warn("Unknown test type for event listener reattachment:",ce)}console.log(` Form event listeners reattached for test type: ${ce}`)},[W,K,Z]),Ve=S.useCallback(()=>{const ce=localStorage.getItem("test_creation_state");if(!ce)return console.log(" No test creation state found in localStorage"),!1;try{const me=JSON.parse(ce);console.log(" Found test creation state:",me);const je=Date.now()-me.timestamp,Pe=1800*1e3;if(je>Pe)return console.log(" Test creation state is too old, clearing it"),R(),!1;switch(a(!0),console.log(" Restored isInTestCreation flag to true"),ne(),me.excelState&&H(),me.currentStep){case"testTypeSelection":console.log(" Restoring test type selection step"),u("typeSelection");break;case"multipleChoiceForm":console.log(" Restoring multiple choice form step"),g("multipleChoice"),u("formCreation");break;case"trueFalseForm":console.log(" Restoring true/false form step"),g("trueFalse"),u("formCreation");break;case"inputForm":console.log(" Restoring input form step"),g("input"),u("formCreation");break;case"testAssignment":case"assignment":console.log(" Restoring test assignment step"),console.log(" Cannot restore test assignment step without test data, going back to type selection"),u("typeSelection");break;default:console.log(" Unknown step in state, defaulting to type selection"),u("typeSelection")}return I(me.currentStep),!0}catch(me){return console.error(" Error restoring test creation state:",me),R(),!1}},[R,ne,H,I]);S.useEffect(()=>{console.log(" Initializing Teacher Tests..."),ae(),Ve(),de(),Rt()},[ae,Ve,de,Rt]),S.useEffect(()=>{j.numQuestions>0&&h&&h!=="matching"&&h!=="drawing"&&h!=="fillBlanks"&&(console.log(" Excel upload buttons rendered, initializing event listeners..."),setTimeout(()=>{Rt()},100))},[j.numQuestions,h,Rt]);const Ge=ce=>{console.log(" Test type selected:",ce),console.log(" Setting testType to:",ce),g(ce),u("formCreation"),A({testName:"",numQuestions:0,numOptions:0,questions:{},enableTimer:!1,timerMinutes:""}),V("formCreation"),setTimeout(()=>{Rt()},100)},Ot=(ce,me)=>{A(je=>({...je,[ce]:me}))},Ut=(ce,me,je)=>{A(Pe=>({...Pe,questions:{...Pe.questions,[ce]:{...Pe.questions[ce],[me]:je}}}))},ar=(ce,me,je,Pe=0)=>{const Ze={};for(let gt=1;gt<=je;gt++)ce==="multipleChoice"?Ze[gt]={question:"",options:Array.from({length:Pe},()=>""),correctAnswer:""}:ce==="trueFalse"?Ze[gt]={question:"",correctAnswer:""}:ce==="input"&&(Ze[gt]={question:"",correct_answers:[""]});A(gt=>({...gt,questions:Ze})),ce==="multipleChoice"?(oe("multiple-choice"),J("multiple-choice")):ce==="trueFalse"?(oe("true-false"),J("true-false")):ce==="input"&&(oe("input"),J("input"))},Dr=async()=>{if(!h||!j.testName||!j.numQuestions){r("Please fill in all required fields","error");return}console.log(" Test form completed, proceeding to assignment step"),V("testAssignment",j),u("testAssignment"),r("Test form completed! Now select classes and subjects.","success")},br=(ce,me,je,Pe,Ze)=>{L(je?gt=>[...gt,{grade:ce,class:me,subject_id:Pe,subject:Ze}]:gt=>gt.filter(Tt=>!(Tt.grade===ce&&Tt.class===me&&Tt.subject_id===Pe)))},Kr=S.useCallback(async ce=>{console.log(" [DEBUG] handleMatchingTestSave called"),console.log(" [DEBUG] Received testData:",ce),console.log(" [DEBUG] Current formData:",j),console.log(" [DEBUG] Current testType:",h),console.log(" [DEBUG] Current user:",e),console.log(" [DEBUG] Current currentStep:",l),b(!0);try{const me=ce.blocks.map((Ze,gt)=>{const Tt=ce.words.find(or=>or.blockId===Ze.id)?.word||`Word ${gt+1}`,ir=ce.arrows.some(or=>or.startBlock===Ze.id),Ct=ce.arrows.find(or=>or.startBlock===Ze.id)||null;return{question_id:gt+1,word:Tt,block_coordinates:{x:Ze.x,y:Ze.y,width:Ze.width,height:Ze.height},has_arrow:ir,arrow:Ct?{startX:Ct.startX,startY:Ct.startY,endX:Ct.endX,endY:Ct.endY,style:Ct.style||{}}:null}}),je={teacher_id:e.teacher_id,test_name:j.testName||`Matching Test - ${new Date().toLocaleString()}`,image_url:ce.imageUrl,num_blocks:ce.blocks.length,questions:me,assignments:[]};console.log(" Sending matching test payload:",je);const Pe={...j,testName:je.test_name,numQuestions:je.num_blocks,numOptions:0,questions:me.reduce((Ze,gt,Tt)=>(Ze[Tt+1]={question:gt.word,correctAnswer:gt.word,options:[]},Ze),{}),matchingTestData:ce};console.log(" Assignment form data:",Pe),A(Pe),V("testAssignment",Pe),console.log(" Setting current step to testAssignment"),u("testAssignment"),r("Matching test data saved! Now select classes and subjects.","success")}catch(me){console.error(" Error saving matching test:",me),r("Failed to save matching test: "+me.message,"error")}finally{b(!1)}},[e,j,h,r,V]),he=S.useCallback(()=>{console.log(" Cancelling matching test creation"),u("typeSelection"),A({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),Ce=S.useCallback(async ce=>{console.log(" [DEBUG] handleWordMatchingTestSave called"),console.log(" [DEBUG] Received testData:",ce),b(!0);try{A(me=>({...me,wordMatchingData:ce,numQuestions:ce.numQuestions||ce.wordPairs?.length||0})),u("testAssignment"),r("Word matching test created! Now assign it to classes.","success")}catch(me){console.error("Error saving word matching test:",me),r("Failed to save word matching test: "+me.message,"error")}finally{b(!1)}},[r]),be=S.useCallback(()=>{console.log(" Cancelling word matching test creation"),u("typeSelection"),A({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),pe=S.useCallback(async ce=>{console.log(" [DEBUG] handleDrawingTestSave called"),console.log(" [DEBUG] Received testData:",ce),b(!0);try{A(me=>({...me,drawingData:ce,numQuestions:ce.num_questions||ce.questions?.length||0})),u("testAssignment"),r("Drawing test created! Now assign it to classes.","success")}catch(me){console.error(" Error saving drawing test:",me),r("Error saving drawing test","error")}finally{b(!1)}},[r]),ke=S.useCallback(()=>{console.log(" Cancelling drawing test creation"),u("typeSelection"),A({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),Ee=S.useCallback(()=>{console.log(" Cancelling fill blanks test creation"),u("typeSelection"),A({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),Qe=S.useCallback(async ce=>{console.log(" [DEBUG] handleFillBlanksTestSave called"),console.log(" [DEBUG] Received testData:",ce),b(!0);try{A(me=>({...me,fillBlanksData:ce,numQuestions:ce.num_questions||ce.blanks?.length||0})),u("testAssignment"),r("Fill blanks test created! Now assign it to classes.","success")}catch(me){console.error(" Error saving fill blanks test:",me),r("Error saving fill blanks test","error")}finally{b(!1)}},[r]),xt=S.useCallback(()=>{console.log(" Cancelling speaking test creation"),u("typeSelection"),A({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),rt=S.useCallback(async ce=>{console.log(" [DEBUG] handleSpeakingTestSave called"),console.log(" [DEBUG] Received testData:",ce),b(!0);try{A(me=>({...me,speakingData:ce,numQuestions:ce.questions?.length||0})),u("testAssignment"),r("Speaking test created! Now assign it to classes.","success")}catch(me){console.error(" Error saving speaking test:",me),r("Error saving speaking test","error")}finally{b(!1)}},[r]);return c.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[c.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs(al,{mode:"wait",children:[l==="typeSelection"&&c.jsxs(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs(lt,{variant:"outline",onClick:()=>window.history.back(),className:"flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),c.jsx("span",{children:"Back to Main"})]}),c.jsx("div",{className:"flex-1"})]}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Create New Test"}),c.jsx("p",{className:"text-gray-600",children:"Choose the type of test you want to create"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{type:"multipleChoice",title:"Multiple Choice",description:"Questions with multiple answer options",icon:"/pics/multiple-choice.png"},{type:"trueFalse",title:"True/False",description:"Questions with true or false answers",icon:"/pics/true-false.png"},{type:"input",title:"Input",description:"Questions requiring text input",icon:"/pics/input.png"},{type:"matching",title:"Picture Matching",description:"Labeling pictures",icon:"/pics/matching.png"},{type:"wordMatching",title:"Word Matching",description:"Matching word pairs by dragging or drawing arrows",icon:"/pics/matching-words.png"},{type:"drawing",title:"Drawing Test",description:"Interactive drawing tests with canvas for students",icon:"/pics/drawing.png"},{type:"fillBlanks",title:"Fill Blanks",description:"Text with multiple choice blanks",icon:"/pics/fill-blanks.png"},{type:"speaking",title:"Speaking Test",description:"Audio recording with AI-powered feedback",icon:"/pics/speaking.png"}].map(({type:ce,title:me,description:je,icon:Pe})=>c.jsx(ht.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"cursor-pointer",onClick:()=>Ge(ce),children:c.jsxs($t,{className:"h-full text-center hover:shadow-lg transition-shadow",children:[c.jsx("div",{className:"mb-3 flex justify-center",children:c.jsx("img",{src:Pe,alt:me,className:"w-12 h-12 object-contain"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:me}),c.jsx("p",{className:"text-sm text-gray-600",children:je})]})},ce))})]}),l==="formCreation"&&c.jsxs(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"flex space-x-2",children:c.jsx(lt,{variant:"outline",onClick:te,children:" Back to Test Types"})}),c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Create ",h==="multipleChoice"?"Multiple Choice":h==="trueFalse"?"True/False":h==="input"?"Input":h==="drawing"?"Drawing":h==="fillBlanks"?"Fill Blanks":h==="wordMatching"?"Word Matching":h==="speaking"?"Speaking":"Picture Matching"," Test"]}),c.jsx("p",{className:"text-gray-600",children:"Fill in the test details and questions"})]})]})}),c.jsx($t,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Information"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Test Name"}),c.jsx("input",{type:"text",value:j.testName,onChange:ce=>Ot("testName",ce.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter test name"})]}),h!=="matching"&&h!=="wordMatching"&&h!=="drawing"&&h!=="fillBlanks"&&h!=="speaking"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Questions"}),c.jsx("input",{type:"number",min:"1",max:"50",value:j.numQuestions,onChange:ce=>{const me=parseInt(ce.target.value)||0;Ot("numQuestions",me),me>0&&ar(h,j.testName,me,j.numOptions)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter number of questions"})]}),h==="multipleChoice"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Options per Question"}),c.jsx("input",{type:"number",min:"2",max:"6",value:j.numOptions,onChange:ce=>{const me=parseInt(ce.target.value)||0;Ot("numOptions",me),me>0&&me<2&&r("Multiple choice tests require at least 2 options per question. Please enter 2 or more.","warning"),j.numQuestions>0&&ar(h,j.testName,j.numQuestions,me)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter number of options (2-6)"})]}),h!=="speaking"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("label",{className:"inline-flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",checked:!!j.enableTimer,onChange:ce=>Ot("enableTimer",ce.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),c.jsx("span",{className:"text-sm text-gray-700",children:"Enable timer for this test"})]}),j.enableTimer&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm text-gray-700",children:"Time (minutes):"}),c.jsx("input",{type:"number",min:"1",max:"1440",value:j.timerMinutes,onChange:ce=>Ot("timerMinutes",ce.target.value.replace(/[^0-9]/g,"")),className:"w-28 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g. 30"})]})]}),h!=="drawing"&&h!=="matching"&&h!=="wordMatching"&&h!=="fillBlanks"&&h!=="speaking"&&c.jsx("div",{className:"flex items-center space-x-2",children:c.jsxs("label",{className:"inline-flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",checked:!!j.isShuffled,onChange:ce=>Ot("isShuffled",ce.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),c.jsx("span",{className:"text-sm text-gray-700",children:"Shuffle questions during test"})]})})]})]})}),h==="matching"&&c.jsx($t,{children:c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Picture Matching Test"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Upload an image and create interactive matching blocks with words."}),c.jsx(Tae,{testName:j.testName,onTestSaved:Kr,onCancel:he,onBackToCabinet:Me,isSaving:k,validationErrors:{}})]})}),h==="wordMatching"&&c.jsx($t,{children:c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Word Matching Test"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Create word pairs for students to match by dragging or drawing arrows."}),c.jsx(Nde,{testName:j.testName,onTestSaved:Ce,onCancel:be,onBackToCabinet:Me,isSaving:k,validationErrors:{}})]})}),h==="drawing"&&c.jsxs($t,{children:[console.log(" Rendering DrawingTestCreator, testType:",h),c.jsx(pce,{testName:j.testName,onTestSaved:pe,onCancel:ke,onBackToCabinet:Me,isSaving:k,validationErrors:{}})]}),h==="fillBlanks"&&c.jsxs($t,{children:[console.log(" Rendering FillBlanksTestCreator, testType:",h),c.jsx(wce,{testName:j.testName,allowedTime:j.enableTimer&&parseInt(j.timerMinutes)||null,onTestSaved:Qe,onCancel:Ee,onBackToCabinet:Me,isSaving:k,validationErrors:{}})]}),h==="speaking"&&c.jsxs($t,{children:[console.log(" Rendering SpeakingTestCreator, testType:",h),c.jsx(_ce,{testName:j.testName,onTestSaved:rt,onCancel:xt,onBackToCabinet:Me,isSaving:k,validationErrors:{}})]}),h!=="matching"&&h!=="drawing"&&h!=="fillBlanks"&&h!=="speaking"&&j.numQuestions>0&&c.jsx($t,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Excel Upload"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Upload an Excel file to automatically populate questions, or fill them in manually below."}),c.jsxs("div",{className:"space-y-6",children:[h==="multipleChoice"&&ot.multipleChoice?.buttonVisible&&c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"multiple-choice",disabled:N,children:N?c.jsxs(c.Fragment,{children:[c.jsx(ln,{size:"sm",color:"white"}),c.jsx("span",{className:"font-medium",children:"Processing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),c.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),c.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"multiple-choice"})]}),c.jsx("div",{className:"w-fit",children:c.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:c.jsxs("div",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Multiple Choice Format:"}),c.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[c.jsx("div",{children:"Column 1: Question"}),c.jsx("div",{children:"Column 2: Correct Answer (A-F)"}),c.jsx("div",{children:"Column 3: Option A text"}),c.jsx("div",{children:"Column 4: Option B text"}),c.jsx("div",{children:"Column 5: Option C text"}),c.jsx("div",{children:"Column 6: Option D text"})]})]})})})]}),h==="trueFalse"&&ot.trueFalse?.buttonVisible&&c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"true-false",disabled:N,children:N?c.jsxs(c.Fragment,{children:[c.jsx(ln,{size:"sm",color:"white"}),c.jsx("span",{className:"font-medium",children:"Processing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),c.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),c.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"true-false"})]}),c.jsx("div",{className:"w-fit",children:c.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:c.jsxs("div",{className:"text-xs text-blue-800",children:[c.jsxs("div",{children:[c.jsx("strong",{children:"Format:"})," Question | Answer (true/false)"]}),c.jsxs("div",{className:"mt-1",children:[c.jsx("strong",{children:"Example:"})," The Earth is round | true"]}),c.jsxs("div",{className:"mt-1",children:[c.jsx("strong",{children:"Note:"})," Headers are optional"]})]})})})]}),h==="input"&&ot.input?.buttonVisible&&c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"input",disabled:N,children:N?c.jsxs(c.Fragment,{children:[c.jsx(ln,{size:"sm",color:"white"}),c.jsx("span",{className:"font-medium",children:"Processing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),c.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),c.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"input"})]}),c.jsx("div",{className:"w-fit",children:c.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:c.jsxs("div",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Input Test Format:"}),c.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[c.jsx("div",{children:"Column 1: Question"}),c.jsx("div",{children:"Column 2: Answer 1"}),c.jsx("div",{children:"Column 3: Answer 2 (optional)"})]})]})})})]})]})]})}),h!=="matching"&&h!=="drawing"&&h!=="fillBlanks"&&j.numQuestions>0&&c.jsx($t,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Manual Question Entry"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Fill in the questions manually using the form below."})]})}),j.numQuestions>0&&c.jsx($t,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Questions"}),c.jsx("div",{className:"space-y-6",children:Object.keys(j.questions).map(ce=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Question ",ce]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{value:j.questions[ce]?.question||"",onChange:me=>Ut(ce,"question",me.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"Enter the question text",id:`question_${ce}`}),c.jsx(Yh,{showPreview:!0,inputRef:()=>document.getElementById(`question_${ce}`),onChange:me=>Ut(ce,"question",me.target.value)})]})]}),h==="multipleChoice"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answer Options"}),c.jsx("div",{className:"space-y-2",children:j.questions[ce]?.options?.map((me,je)=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("span",{className:"w-6 text-sm font-medium text-gray-700",children:[String.fromCharCode(65+je),":"]}),c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"text",value:me,onChange:Pe=>{const Ze=[...j.questions[ce].options];Ze[je]=Pe.target.value,Ut(ce,"options",Ze)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Option ${String.fromCharCode(65+je)}`,id:`option_${ce}_${je}`}),c.jsx(Yh,{showPreview:!0,inputRef:()=>document.getElementById(`option_${ce}_${je}`),onChange:Pe=>{const Ze=[...j.questions[ce].options];Ze[je]=Pe.target.value,Ut(ce,"options",Ze)}})]})]},je))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer"}),h==="multipleChoice"?c.jsx("div",{children:c.jsxs("select",{value:j.questions[ce]?.correctAnswer||"",onChange:me=>Ut(ce,"correctAnswer",me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"",children:"Select correct answer"}),j.questions[ce]?.options?.map((me,je)=>c.jsx("option",{value:String.fromCharCode(65+je),children:String.fromCharCode(65+je)},je))]})}):h==="trueFalse"?c.jsxs("select",{value:j.questions[ce]?.correctAnswer||"",onChange:me=>Ut(ce,"correctAnswer",me.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"",children:"Select correct answer"}),c.jsx("option",{value:"true",children:"True"}),c.jsx("option",{value:"false",children:"False"})]}):c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer(s)"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:j.questions[ce]?.correct_answers?.[0]||"",onChange:me=>{const Pe=[...j.questions[ce]?.correct_answers||[""]];Pe[0]=me.target.value,Ut(ce,"correct_answers",Pe)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter the primary correct answer",id:`answer_${ce}_0`}),c.jsx(Yh,{showPreview:!0,inputRef:()=>document.getElementById(`answer_${ce}_0`),onChange:me=>{const Pe=[...j.questions[ce]?.correct_answers||[""]];Pe[0]=me.target.value,Ut(ce,"correct_answers",Pe)}})]}),j.questions[ce]?.correct_answers?.slice(1).map((me,je)=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"text",value:me,onChange:Pe=>{const Ze=[...j.questions[ce]?.correct_answers||[]];Ze[je+1]=Pe.target.value,Ut(ce,"correct_answers",Ze)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Alternative answer ${je+2}`,id:`answer_${ce}_${je+1}`}),c.jsx(Yh,{showPreview:!0,inputRef:()=>document.getElementById(`answer_${ce}_${je+1}`),onChange:Pe=>{const Ze=[...j.questions[ce]?.correct_answers||[]];Ze[je+1]=Pe.target.value,Ut(ce,"correct_answers",Ze)}})]}),c.jsx("button",{type:"button",onClick:()=>{const Pe=[...j.questions[ce]?.correct_answers||[]];Pe.splice(je+1,1),Ut(ce,"correct_answers",Pe)},className:"px-2 py-1 text-red-600 hover:text-red-800 text-sm",children:"Remove"})]},je))||[],c.jsx("button",{type:"button",onClick:()=>{const je=[...j.questions[ce]?.correct_answers||[""],""];Ut(ce,"correct_answers",je)},className:"px-3 py-1 text-blue-600 hover:text-blue-800 text-sm border border-blue-300 rounded-md hover:bg-blue-50",children:"+ Add Alternative Answer"})]}),c.jsx("p",{className:"text-xs text-gray-500",children:"You can add multiple correct answers for the same question. Students will get credit for any of them."})]})]})]})]},ce))})]})}),j.testName&&j.numQuestions>0&&c.jsx("div",{className:"flex justify-end",children:c.jsx(lt,{onClick:Dr,disabled:k,className:"px-8",children:k?c.jsxs(c.Fragment,{children:[c.jsx(ln,{size:"sm",color:"white",className:"mr-2"}),"Saving Test..."]}):"Save Test & Continue to Assignment"})})]}),l==="testAssignment"&&c.jsxs(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs(lt,{variant:"outline",onClick:()=>window.history.back(),className:"flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),c.jsx("span",{children:"Back to Main"})]}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Assign Test to Classes"}),c.jsx("p",{className:"text-gray-600",children:"Select which classes should take this test"})]})]}),c.jsx(lt,{variant:"outline",onClick:()=>u("formCreation"),children:" Back to Test Form"})]}),c.jsx($t,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Available Classes"}),x.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("p",{className:"text-gray-500 text-lg",children:"No subjects available for assignment."}),c.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"You need to assign subjects to grades and classes first."}),c.jsx("div",{className:"mt-4",children:c.jsx(lt,{onClick:()=>window.location.href="/teacher/subjects",className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Go to Subjects Page"})})]}):c.jsx("div",{className:"space-y-6",children:x.map(ce=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:ce.subject}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2",children:ce.classes.map(me=>c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:O.some(je=>je.grade===me.grade&&je.class===me.class&&je.subject_id===ce.subject_id),onChange:je=>br(me.grade,me.class,je.target.checked,ce.subject_id,ce.subject),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),c.jsxs("span",{className:"text-sm text-gray-700",children:[me.grade,"/",me.class]})]},`${me.grade}-${me.class}-${ce.subject_id}`))})]},ce.subject_id))})]})}),O.length>0&&c.jsx("div",{className:"flex justify-end",children:c.jsx(lt,{onClick:()=>Ae(h,null),disabled:v,className:"px-8",children:v?c.jsxs(c.Fragment,{children:[c.jsx(ln,{size:"sm",color:"white",className:"mr-2"}),"Assigning Test..."]}):`Assign Test to ${O.length} Class${O.length>1?"es":""}`})})]})]})}),console.log(" Checking isAssigningTest:",P),P&&c.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Assigning test to classes..."}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we process your assignment"})]})}),k&&c.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Saving test..."}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we save your test"})]})}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:t.map(ce=>c.jsx(su,{type:ce.type,message:ce.message,duration:ce.duration,onClose:()=>n(ce.id)},ce.id))})]})},JAe=({onDataLoaded:e,onError:t})=>{const r=fl(),{user:n,isAuthenticated:s}=Fs(),{teacherData:a,loadTeacherData:i}=r3(),[o,l]=S.useState(!0),[u,d]=S.useState(""),[f,h]=S.useState([]),[g,x]=S.useState(null),[y,v]=S.useState([]),[T,k]=S.useState([]),[b,N]=S.useState([]),[E,P]=S.useState(null),[M,j]=S.useState(0);S.useEffect(()=>{ae()},[]),S.useCallback(async ne=>{console.log(" Teacher login attempt...");try{const B=await Rs.teacherLogin(ne);if(B.success)return Q("Login successful!","success"),await A(),B;throw new Error(B.error||"Login failed")}catch(B){throw console.error(" Teacher login error:",B),Q("Login failed. Please check your credentials.","error"),B}},[]);const A=S.useCallback(async()=>{console.log(" Loading teacher data...");try{if(l(!0),d(""),!s||!n){console.log(" User not authenticated"),d("User not authenticated");return}if(n.role!==Io.TEACHER){console.error(" Invalid user role for teacher data:",n.role),d("Access denied. Teacher role required.");return}console.log(" Fetching teacher data from service...");const ne=await Rs.getTeacherData();if(ne&&ne.success)console.log(" Teacher data loaded successfully:",ne),x(ne.teacher||n),ne.subjects&&(v(ne.subjects),console.log(" Teacher subjects loaded:",ne.subjects.length)),ne.grades&&k(ne.grades),ne.classes&&N(ne.classes),P(new Date),j(B=>B+1),e&&e(ne),Q("Teacher data loaded successfully!","success");else throw new Error(ne?.error||"Failed to load teacher data")}catch(ne){console.error(" Error loading teacher data:",ne);const B=ne.message||"Failed to load teacher data";d(B),t&&t(ne),Q(B,"error")}finally{l(!1)}},[s,n,e,t]),O=S.useCallback(()=>{console.log(" Returning to main cabinet..."),r("/teacher/cabinet")},[r]);S.useCallback(ne=>{console.log(" Showing main cabinet with subjects:",ne),ne&&v(ne),r("/teacher/cabinet")},[r]);const L=S.useCallback(()=>(console.log(" Rendering grade buttons..."),["M1","M2","M3","M4","M5","M6"].map(B=>({id:B,name:`Grade ${B}`,classes:q(B)}))),[]),q=S.useCallback(ne=>Array.from({length:10},(V,R)=>R+1).map(V=>({id:`${ne}-${V}`,name:`Class ${V}`,grade:ne,classNumber:V})),[]),Q=S.useCallback((ne,B)=>{const V={id:Date.now(),message:ne,type:B,timestamp:new Date};h(R=>[...R,V]),setTimeout(()=>{h(R=>R.filter(H=>H.id!==V.id))},Gm.NOTIFICATION_DURATION)},[]),ae=S.useCallback(async()=>{console.log(" Initializing teacher data..."),await A()},[A]),te=S.useCallback(async()=>{console.log(" Refreshing teacher data..."),await A()},[A]);return S.useCallback(async ne=>{console.log(" Updating teacher profile:",ne);try{const B=await Rs.updateUserProfile(ne);if(B.success)return x(V=>({...V,...ne})),Q("Profile updated successfully!","success"),B;throw new Error(B.error||"Failed to update profile")}catch(B){throw console.error(" Error updating teacher profile:",B),Q("Failed to update profile","error"),B}},[]),S.useCallback(async ne=>{console.log(" Changing teacher password...");try{const B=await Rs.changePassword(ne);if(B.success)return Q("Password changed successfully!","success"),B;throw new Error(B.error||"Failed to change password")}catch(B){throw console.error(" Error changing teacher password:",B),Q("Failed to change password","error"),B}},[]),o?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(ln,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Data..."})]})}):u?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Data Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:u}),c.jsxs("div",{className:"flex space-x-3 justify-center",children:[c.jsx(lt,{variant:"primary",onClick:te,children:"Retry"}),c.jsx(lt,{variant:"outline",onClick:O,children:"Go Back"})]})]})})}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Teacher Data"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",E?E.toLocaleString():"Never"," | Version: ",M]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx(lt,{variant:"outline",onClick:te,children:"Refresh Data"}),c.jsx(lt,{variant:"outline",onClick:O,children:"Back to Cabinet"})]})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Teacher Information"}),g?c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Name:"}),c.jsx("p",{className:"text-sm text-gray-900",children:g.name||"N/A"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Username:"}),c.jsx("p",{className:"text-sm text-gray-900",children:g.username||"N/A"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Email:"}),c.jsx("p",{className:"text-sm text-gray-900",children:g.email||"N/A"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Role:"}),c.jsx("p",{className:"text-sm text-gray-900",children:g.role||"N/A"})]})]}):c.jsx("p",{className:"text-gray-500",children:"No teacher information available"})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Subjects (",y.length,")"]}),y.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map((ne,B)=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-medium text-gray-900",children:ne.name}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ne.description||"No description"}),ne.classes&&ne.classes.length>0&&c.jsxs("div",{className:"mt-2",children:[c.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Classes:"}),c.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:ne.classes.map((V,R)=>c.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:[V.grade," - ",V.className]},R))})]})]},B))}):c.jsx("p",{className:"text-gray-500",children:"No subjects assigned"})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grade Levels"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:L().map(ne=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:ne.name}),c.jsx("div",{className:"grid grid-cols-5 gap-1",children:ne.classes.map(B=>c.jsx("button",{className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",onClick:()=>console.log("Class clicked:",B),children:B.classNumber},B.id))})]},ne.id))})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Statistics"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-semibold text-blue-600",children:y.length}),c.jsx("p",{className:"text-sm text-gray-500",children:"Subjects"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-semibold text-green-600",children:T.length}),c.jsx("p",{className:"text-sm text-gray-500",children:"Grades"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-semibold text-yellow-600",children:b.length}),c.jsx("p",{className:"text-sm text-gray-500",children:"Classes"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-semibold text-purple-600",children:M}),c.jsx("p",{className:"text-sm text-gray-500",children:"Data Version"})]})]})]})]})}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:f.map(ne=>c.jsx(su,{type:ne.type,message:ne.message,onClose:()=>h(B=>B.filter(V=>V.id!==ne.id))},ne.id))})]})},QAe=({onBackToCabinet:e})=>{const t=fl(),{user:r,isAuthenticated:n}=Fs(),{teacherData:s}=r3(),[a,i]=S.useState(!0),[o,l]=S.useState(""),[u,d]=S.useState([]),[f,h]=S.useState([]),[g,x]=S.useState([]),[y,v]=S.useState([]),[T,k]=S.useState(null),[b,N]=S.useState([]),[E,P]=S.useState(!1),[M,j]=S.useState(!1),[A,O]=S.useState(!1),[L,q]=S.useState(!1),[Q,ae]=S.useState(null),[te,ne]=S.useState(!0),[B,V]=S.useState(null);S.useEffect(()=>{He()},[]),S.useCallback(it=>{console.log(" Rendering existing subjects:",it),h(it)},[]);const R=S.useCallback(()=>{console.log(" Showing subject selection prompt..."),P(!0),ne(!1),H()},[]),H=S.useCallback(async()=>{console.log(" Loading existing subjects...");try{const it=await Rs.getTeacherSubjects();it.success&&it.subjects&&it.subjects.length>0?(console.log(" Existing subjects found:",it.subjects),U(it.subjects)):(console.log(" No existing subjects found"),v([]))}catch(it){console.error(" Error loading existing subjects:",it),Je("Failed to load existing subjects","error")}},[]),U=S.useCallback(it=>{console.log(" Rendering subject selection:",it);const kt=[];it.forEach(pt=>{pt.classes&&Array.isArray(pt.classes)&&pt.classes.forEach(ut=>{kt.push({id:`${pt.subject_id}-${ut.grade}-${ut.class}`,subjectId:pt.subject_id,subjectName:pt.subject,grade:ut.grade,class:ut.class,displayText:`${pt.subject} - ${ut.grade}/${ut.class}`})})}),v(kt),console.log(" Processed subjects for selection:",kt)},[]),I=S.useCallback(async it=>{if(console.log(" Saving teacher subjects:",it),!it||it.length===0){Je("Please select at least one subject and class combination.","warning");return}try{const kt=it.reduce((ut,_t)=>{const qt=ut.find(Jt=>Jt.subject_id===_t.subjectId);return qt?qt.classes.push({grade:_t.grade,class:_t.class}):ut.push({subject_id:_t.subjectId,classes:[{grade:_t.grade,class:_t.class}]}),ut},[]);console.log(" Transformed data for backend:",kt);const pt=await Rs.saveTeacherSubjects(kt);if(pt.success)Je("Subjects saved successfully!","success"),P(!1),ne(!0),V(new Date),await H();else throw new Error(pt.error||"Failed to save subjects")}catch(kt){console.error(" Error saving subjects:",kt),Je("Error saving subjects. Please try again.","error")}},[]),W=S.useCallback(()=>{console.log(" Toggling subject dropdown..."),j(it=>!it),O(!1)},[]),K=S.useCallback(async()=>{console.log(" Loading subjects for dropdown...");try{const it=await Rs.getAllSubjects();if(it.success)x(it.subjects||[]),console.log(" Available subjects loaded:",it.subjects?.length||0);else throw new Error(it.error||"Failed to load subjects")}catch(it){console.error(" Error loading subjects for dropdown:",it),Je("Failed to load subjects","error")}},[]),Z=S.useCallback(it=>{console.log(" Subject selected:",it);const kt=g.find(pt=>pt.subject_id===parseInt(it));kt&&(k(kt),O(!0),j(!1),oe())},[g]),oe=S.useCallback(()=>{console.log(" Loading grades and classes...")},[]),J=S.useCallback((it,kt)=>{console.log(" Saving classes for subject:",it,kt);const pt={id:`${it.subject_id}-${Date.now()}`,subjectId:it.subject_id,subjectName:it.subject,grade:kt.grade,class:kt.class,displayText:`${it.subject} - ${kt.grade}/${kt.class}`};v(ut=>[...ut,pt]),k(null),N([]),O(!1),ue(`Added ${it.subject} for ${kt.grade}/${kt.class}`)},[]),le=S.useCallback(()=>{console.log(" Resetting subject selection..."),k(null),N([]),j(!1),O(!1)},[]),ue=S.useCallback(it=>{console.log(" Showing message:",it),Je(it,"success")},[]),de=S.useCallback(it=>{console.log(" Showing confirmation modal:",it),ae(it),q(!0)},[]),Te=S.useCallback(()=>{console.log(" Hiding confirmation modal..."),q(!1),ae(null)},[]),ie=S.useCallback(()=>{console.log(" Confirming save subjects..."),Te(),I(y)},[y,I,Te]),xe=S.useCallback(()=>{console.log(" Cancelling save subjects..."),Te()},[Te]),Ae=S.useCallback(it=>{console.log(" Removing subject:",it),v(kt=>kt.filter(pt=>pt.id!==it)),Je("Subject removed","info")},[]);S.useCallback(()=>{console.log(" Showing edit subjects button..."),ne(!0)},[]),S.useCallback(()=>{console.log(" Hiding edit subjects button..."),ne(!1)},[]);const Me=S.useCallback(it=>{console.log(" Generating class buttons for grade:",it);let kt;return it===1||it===2?kt=["15","16"]:it===3?kt=["15","16"]:it===4?kt=["13","14"]:it===5||it===6?kt=["13","14"]:kt=[],kt.map(pt=>({id:`${it}-${pt}`,grade:it,class:pt,displayText:`${it}/${pt}`}))},[]);S.useCallback((it,kt)=>{console.log(" Showing class results:",it,kt),t("/teacher/results")},[t]);const Je=S.useCallback((it,kt)=>{const pt={id:Date.now(),message:it,type:kt,timestamp:new Date};d(ut=>[...ut,pt]),setTimeout(()=>{d(ut=>ut.filter(_t=>_t.id!==pt.id))},Gm.NOTIFICATION_DURATION)},[]),He=S.useCallback(async()=>{console.log(" Initializing teacher subjects...");try{if(i(!0),l(""),!n||!r){console.log(" User not authenticated"),l("User not authenticated");return}if(r.role!==Io.TEACHER){console.error(" Invalid user role for teacher subjects:",r.role),l("Access denied. Teacher role required.");return}await H(),await K(),console.log(" Teacher subjects initialization complete!")}catch(it){console.error(" Error initializing teacher subjects:",it),l("Failed to initialize teacher subjects")}finally{i(!1)}},[n,r,H,K]),It=S.useCallback(()=>{e?e():t("/teacher/cabinet")},[e,t]);return a?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(ln,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Subjects..."})]})}):o?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Subjects Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:o}),c.jsx(lt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Subject Management"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",B?B.toLocaleString():"Never"]})]}),c.jsxs("div",{className:"flex space-x-3",children:[te&&c.jsx(lt,{variant:"primary",onClick:R,children:"Edit Subjects"}),c.jsx(lt,{variant:"outline",onClick:It,children:"Back to Cabinet"})]})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"space-y-6",children:[!E&&c.jsxs("div",{className:`\r
              bg-white rounded-xl shadow-md border border-gray-200 p-6\r
              hover:shadow-lg hover:-translate-y-1 transition-all duration-200\r
            `,children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Assigned Subjects"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your teaching subjects and class assignments"})]}),c.jsx("div",{className:"flex space-x-3",children:c.jsxs(lt,{variant:"primary",onClick:R,className:"px-6 py-2",children:[c.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Subjects"]})})]}),f.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map((it,kt)=>c.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6 hover:shadow-md transition-shadow duration-200",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:it.subject}),it.classes&&it.classes.length>0&&c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Assigned Classes:"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:it.classes.map((pt,ut)=>c.jsxs("span",{className:"px-3 py-1 bg-blue-500 text-white text-sm font-medium rounded-full",children:["Grade ",pt.grade," - Class ",pt.class]},ut))})]})]}),c.jsx("div",{className:"ml-4",children:c.jsx(lt,{variant:"outline",size:"sm",onClick:()=>Ae(it.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-300",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})},kt))}):c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:c.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No subjects assigned yet"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Get started by adding your teaching subjects and class assignments"}),c.jsxs(lt,{variant:"primary",onClick:R,className:"px-6 py-3",children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Your First Subject"]})]})]}),E&&c.jsxs("div",{className:`\r
              bg-white rounded-xl shadow-md border border-gray-200 p-6\r
              hover:shadow-lg hover:-translate-y-1 transition-all duration-200\r
            `,children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Select Subjects and Classes"}),c.jsx("p",{className:"text-gray-600",children:"Choose the subjects you want to teach and assign them to specific classes"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:c.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:"1"})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-lg font-semibold text-gray-900",children:"Select Subject"}),c.jsx("p",{className:"text-gray-600",children:"Choose the subject you want to teach"})]})]}),c.jsxs("div",{className:"relative",children:[c.jsxs(lt,{variant:"outline",onClick:W,className:"w-full justify-between p-4 h-auto text-left border-2 border-gray-200 hover:border-blue-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white rounded-xl shadow-sm",children:[c.jsx("span",{className:"text-gray-900 font-medium",children:T?T.subject:"Select a subject"}),c.jsx("svg",{className:"w-5 h-5 ml-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),M&&c.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border-2 border-gray-200 rounded-xl shadow-xl max-h-60 overflow-y-auto",children:g.map(it=>c.jsx("button",{onClick:()=>Z(it.subject_id),className:"w-full px-4 py-4 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 border-b border-gray-100 last:border-b-0",children:c.jsx("span",{className:"text-gray-900 font-medium",children:it.subject})},it.subject_id))})]})]}),A&&T&&c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3",children:c.jsx("span",{className:"text-green-600 font-semibold text-sm",children:"2"})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Select Classes for ",T.subject]}),c.jsx("p",{className:"text-gray-600",children:"Choose which classes you want to teach this subject to"})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(it=>c.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-6 hover:shadow-md transition-shadow duration-200",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-2",children:c.jsx("span",{className:"text-white font-bold text-xs",children:it})}),c.jsxs("h4",{className:"font-semibold text-gray-900",children:["Grade ",it]})]}),c.jsx("div",{className:"space-y-3",children:Me(it).map(kt=>c.jsx(lt,{variant:"outline",size:"sm",onClick:()=>J(T,kt),className:"w-full text-sm py-2 px-4 border-green-300 hover:border-green-400 hover:bg-green-100 focus:ring-2 focus:ring-green-500 rounded-lg font-medium",children:kt.displayText},kt.id))})]},it))})]}),y.length>0&&c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3",children:c.jsx("span",{className:"text-purple-600 font-semibold text-sm",children:"3"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Selected Subjects"}),c.jsx("p",{className:"text-gray-600",children:"Review your subject and class selections"})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map(it=>c.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4 hover:shadow-md transition-shadow duration-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex-1",children:c.jsx("span",{className:"text-sm font-semibold text-purple-900",children:it.displayText})}),c.jsx(lt,{variant:"outline",size:"sm",onClick:()=>Ae(it.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-300 focus:ring-2 focus:ring-red-500 rounded-lg",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},it.id))})]}),c.jsxs("div",{className:"flex justify-between items-center pt-6 border-t-2 border-gray-100",children:[c.jsx("div",{className:"text-sm text-gray-500",children:y.length>0?`${y.length} subject${y.length>1?"s":""} selected`:"No subjects selected"}),c.jsxs("div",{className:"flex space-x-4",children:[c.jsxs(lt,{variant:"outline",onClick:()=>{P(!1),ne(!0),le()},className:"px-6 py-3 text-sm font-medium text-gray-700 bg-white border-2 border-gray-300 hover:bg-gray-50 focus:ring-2 focus:ring-gray-500 rounded-xl",children:[c.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]}),c.jsxs(lt,{variant:"primary",onClick:()=>de({type:"save",data:y}),disabled:y.length===0,className:"px-8 py-3 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-indigo-600 border border-transparent rounded-xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[c.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),A?"Next: Select Classes":"Save Subjects"]})]})]})]})]})]})}),L&&c.jsx($a,{isOpen:L,onClose:Te,title:"Confirm Save",variant:"confirmation",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to save ",Q?.data?.length||0," subject assignments?"]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx(lt,{variant:"outline",onClick:xe,children:"Cancel"}),c.jsx(lt,{variant:"primary",onClick:ie,children:"Save"})]})]})}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:u.map(it=>c.jsx(su,{type:it.type,message:it.message,onClose:()=>d(kt=>kt.filter(pt=>pt.id!==it.id))},it.id))})]})},ZAe=()=>{const{user:e,role:t,isAuthenticated:r,isLoading:n}=Fs(),[s,a]=S.useState("cabinet");return!r||t!=="teacher"?c.jsx(Dp,{to:"/login",replace:!0}):n?c.jsxs("div",{className:"teacher-app-loading",children:[c.jsx(ln,{}),c.jsx("p",{children:"Loading teacher interface..."})]}):c.jsx("div",{className:"teacher-app",children:c.jsxs(z7,{children:[c.jsx(ca,{path:"/",element:c.jsx(UL,{})}),c.jsx(ca,{path:"/cabinet",element:c.jsx(UL,{})}),c.jsx(ca,{path:"/tests",element:c.jsx(WL,{})}),c.jsx(ca,{path:"/tests/create",element:c.jsx(WL,{})}),c.jsx(ca,{path:"/data",element:c.jsx(JAe,{})}),c.jsx(ca,{path:"/subjects",element:c.jsx(QAe,{})}),c.jsx(ca,{path:"/results",element:c.jsx(kV,{})}),c.jsx(ca,{path:"*",element:c.jsx(Dp,{to:"/teacher",replace:!0})})]})})},Ke={container:"min-h-screen bg-gradient-to-br from-purple-50 to-indigo-100",mainContainer:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",header:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg",headerContent:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",headerFlex:"flex justify-between items-center",adminInfo:"flex items-center space-x-4",adminAvatar:"h-12 w-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",adminText:"text-lg sm:text-xl md:text-2xl font-bold text-white",adminSubtext:"text-purple-100 text-sm sm:text-base md:text-lg",menuContainer:"relative admin-menu",menuButton:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border-white/20 text-white hover:bg-white/20 font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm border-2",menuDropdown:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg z-50 overflow-hidden",menuItem:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-purple-50 transition-colors",menuItemLogout:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-red-50 transition-colors",cardContainer:"bg-white rounded-xl shadow-lg border border-gray-200 hover:shadow-xl transition-shadow duration-300",cardHeader:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-indigo-50",cardTitle:"text-xl font-bold text-gray-800",cardBody:"p-6",buttonGroup:"flex flex-wrap gap-3 mb-6",buttonPrimary:"bg-purple-600 hover:bg-purple-700 text-white font-medium px-4 py-2 rounded-lg transition-colors duration-200",buttonSecondary:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium px-4 py-2 rounded-lg transition-colors duration-200",formContainer:"bg-gray-50 rounded-lg p-6 border border-gray-200",formGrid:"grid grid-cols-1 md:grid-cols-2 gap-4",formGroup:"space-y-2",formLabel:"block text-sm font-medium text-gray-700",formInput:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors duration-200",formCheckbox:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded",formActions:"flex space-x-3 pt-4",table:"min-w-full divide-y divide-gray-200",tableHeader:"bg-gray-50",tableHeaderCell:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",tableBody:"bg-white divide-y divide-gray-200",tableRow:"hover:bg-gray-50 transition-colors duration-150",tableCell:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",statusActive:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",statusInactive:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",modalOverlay:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",modalContent:"bg-white rounded-lg p-6 w-full max-w-md mx-4 shadow-xl",modalTitle:"text-xl font-semibold text-gray-900 mb-4",modalActions:"flex space-x-3 pt-4"},eje=()=>{const{user:e,isAdmin:t,logout:r}=Fs(),{get:n,post:s,delete:a}=Bl(),i=S.useCallback(async()=>{try{h({type:"info",message:"Checking for overdue assignments..."});const _e=await s("/.netlify/functions/check-overdue-assignments",{});if(_e&&_e.success){const Nt=_e.overdue_count||0;Nt>0?h({type:"success",message:`Found and marked ${Nt} overdue assignments as inactive.`}):h({type:"info",message:"No overdue assignments found."})}else h({type:"error",message:_e?.error||"Failed to check assignments"})}catch(_e){h({type:"error",message:"Failed to check assignments"}),console.error("Check overdue assignments error:",_e)}},[s]),[o,l]=S.useState(!1),[u,d]=S.useState(null),[f,h]=S.useState(null),[g,x]=S.useState(!1),[y,v]=S.useState(!1),[T,k]=S.useState(!1),[b,N]=S.useState(!1),[E,P]=S.useState(""),[M,j]=S.useState(null),[A,O]=S.useState({}),[L,q]=S.useState(null),[Q,ae]=S.useState({}),[te,ne]=S.useState(null),[B,V]=S.useState({}),[R,H]=S.useState([]),[U,I]=S.useState(""),[W,K]=S.useState(""),[Z,oe]=S.useState(""),[J,le]=S.useState("all"),[ue,de]=S.useState(!0),[Te,ie]=S.useState(!1),[xe,Ae]=S.useState([]),[Me,Je]=S.useState(""),[He,It]=S.useState(""),[it,kt]=S.useState(""),[pt,ut]=S.useState(new Set),[_t,qt]=S.useState(!1),[Jt,Ht]=S.useState(!1),[$e,ze]=S.useState([]),[tt,ot]=S.useState([]),[nt,Dt]=S.useState([]),[Rt,Qt]=S.useState([]),[wr,kr]=S.useState(!1),[zr,Tr]=S.useState(!1),[gr,ve]=S.useState(!1),[Fe,Le]=S.useState(!1),[Ue,Pt]=S.useState({grade:"",class:"",number:"",student_id:"",name:"",surname:"",nickname:"",password:"",is_active:!0}),[Ie,Ye]=S.useState({teacher_id:"",username:"",password:"",first_name:"",last_name:"",is_active:!0}),[Ne,Ve]=S.useState({subject_id:"",subject:"",description:"",is_active:!0}),[Ge,Ot]=S.useState({startDate:"",endDate:"",teacherId:"",grades:[],classes:[],subjectId:""});S.useEffect(()=>{console.log(" AdminCabinet component mounted - initializing..."),Ut()},[]),S.useEffect(()=>{const _e=Nt=>{_t&&!Nt.target.closest(".admin-menu")&&qt(!1)};return document.addEventListener("mousedown",_e),()=>{document.removeEventListener("mousedown",_e)}},[_t]);const Ut=S.useCallback(async()=>{try{l(!0),await Kr(),console.log("Admin app initialized")}catch(_e){d("Failed to initialize admin app"),console.error("Admin app initialization error:",_e)}finally{l(!1)}},[]),ar=S.useCallback(()=>{qt(_e=>!_e)},[]),Dr=S.useCallback(()=>{Ht(!0),qt(!1)},[]),br=S.useCallback(()=>{Ht(!1)},[]),Kr=S.useCallback(async()=>{try{await Promise.all([he(),Ce(),be(),pe()])}catch(_e){console.error("Error loading admin data:",_e),d("Failed to load admin data")}},[]),he=S.useCallback(async()=>{try{const _e="admin_users_",Nt=fa(_e);if(Nt){console.log(" Using cached users data"),ze(Nt);return}const Ur=await n("/.netlify/functions/get-all-users");console.log(" Users response:",Ur);const Yr=Ur.users||[];ze(Yr),qs(_e,Yr,da.admin_users),console.log(" Users set to state:",Yr)}catch(_e){console.error("Error loading users:",_e)}},[n]),Ce=S.useCallback(async()=>{try{const _e="admin_teachers_",Nt=fa(_e);if(Nt){console.log(" Using cached teachers data"),ot(Nt);return}const Ur=await n("/.netlify/functions/get-all-teachers");console.log(" Teachers response:",Ur);const Yr=Ur.teachers||[];ot(Yr),qs(_e,Yr,da.admin_teachers),console.log(" Teachers set to state:",Yr)}catch(_e){console.error("Error loading teachers:",_e)}},[n]),be=S.useCallback(async()=>{try{const _e="admin_subjects_",Nt=fa(_e);if(Nt){console.log(" Using cached subjects data"),Dt(Nt);return}const Ur=await n("/.netlify/functions/get-all-subjects");console.log(" Subjects response:",Ur);const Yr=Ur.subjects||[];Dt(Yr),qs(_e,Yr,da.admin_subjects),console.log(" Subjects set to state:",Yr)}catch(_e){console.error("Error loading subjects:",_e)}},[n]),pe=S.useCallback(async()=>{try{const _e="admin_academic_years_",Nt=fa(_e);if(Nt){console.log(" Using cached academic years data"),Qt(Nt);return}const Ur=await iu.loadAcademicCalendar();Ur&&Array.isArray(Ur)?(Qt(Ur),qs(_e,Ur,da.admin_academic_years)):console.error("Failed to load academic calendar")}catch(_e){console.error("Error loading academic year:",_e)}},[]),ke=S.useCallback(async()=>{try{if(N(!b),!b){const _e=Date.now(),[Nt,Ur]=await Promise.all([n(`/.netlify/functions/get-all-tests?t=${_e}`),n(`/.netlify/functions/get-test-assignments?t=${_e}`)]);console.log(" Active tests response:",Nt),console.log(" Assignments response:",Ur);const Yr=Nt.tests||[],jn=(Ur.assignments||[]).reduce((wt,Gt)=>{const Bt=`${Gt.test_type}-${Gt.test_id}`;return wt[Bt]||(wt[Bt]=[]),wt[Bt].push(Gt),wt},{}),Be=Yr.map(wt=>{const Gt=`${wt.test_type}-${wt.test_id}`,Bt=jn[Gt]||[],Ln=Bt.some(ct=>ct.is_active);return{...wt,is_active:Ln,assignments:Bt}});H(Be),console.log(" All tests with status set to state:",Be)}}catch(_e){console.error("Error loading tests:",_e),h({type:"error",message:"Failed to load tests"})}},[n,b]),Ee=S.useCallback((_e,Nt)=>{Pt(Ur=>({...Ur,[_e]:Nt}))},[]),Qe=S.useCallback((_e,Nt)=>{Ye(Ur=>({...Ur,[_e]:Nt}))},[]),xt=S.useCallback((_e,Nt)=>{Ve(Ur=>({...Ur,[_e]:Nt}))},[]);S.useCallback(()=>{console.log(" Testing local storage...");try{const _e={test:"data",timestamp:Date.now()};localStorage.setItem("test",JSON.stringify(_e));const Nt=JSON.parse(localStorage.getItem("test"));console.log(" Local storage test successful:",Nt),h({type:"success",message:"Local storage test successful"})}catch(_e){console.error(" Local storage test failed:",_e),h({type:"error",message:"Local storage test failed"})}},[]),S.useCallback(()=>{console.log(" Clearing local storage...");try{localStorage.clear(),console.log(" Local storage cleared"),h({type:"success",message:"Local storage cleared"})}catch(_e){console.error(" Error clearing local storage:",_e),h({type:"error",message:"Error clearing local storage"})}},[]),S.useCallback(async()=>{console.log(" Checking teacher subjects...");try{const Nt=(await n("/.netlify/functions/get-all-teachers")).data||[];console.log(" Teachers data:",Nt),h({type:"success",message:`Found ${Nt.length} teachers`})}catch(_e){console.error(" Error checking teacher subjects:",_e),h({type:"error",message:"Error checking teacher subjects"})}},[n]);const rt=S.useCallback(async _e=>{_e.preventDefault();try{console.log(" Submitting user:",Ue);const Nt=await s("/.netlify/functions/add-user",Ue);Nt.success?(h({type:"success",message:"User added successfully"}),kr(!1),Pt({grade:"",class:"",number:"",student_id:"",name:"",surname:"",nickname:"",password:"",is_active:!0}),he()):h({type:"error",message:Nt.message||"Failed to add user"})}catch(Nt){console.error(" Error adding user:",Nt),h({type:"error",message:"Error adding user"})}},[Ue,s,he]),ce=S.useCallback(async _e=>{_e.preventDefault();try{console.log(" Submitting teacher:",Ie);const Nt=await s("/.netlify/functions/add-teacher",Ie);Nt.success?(h({type:"success",message:"Teacher added successfully"}),Tr(!1),Ye({teacher_id:"",username:"",password:"",first_name:"",last_name:"",is_active:!0}),Ce()):h({type:"error",message:Nt.message||"Failed to add teacher"})}catch(Nt){console.error(" Error adding teacher:",Nt),h({type:"error",message:"Error adding teacher"})}},[Ie,s,Ce]),me=S.useCallback(async _e=>{_e.preventDefault();try{console.log(" Submitting subject:",Ne);const Nt=await s("/.netlify/functions/add-subject",Ne);Nt.success?(h({type:"success",message:"Subject added successfully"}),ve(!1),Ve({subject_id:"",subject:"",description:"",is_active:!0}),be()):h({type:"error",message:Nt.message||"Failed to add subject"})}catch(Nt){console.error(" Error adding subject:",Nt),h({type:"error",message:"Error adding subject"})}},[Ne,s,be]),je=S.useCallback(_e=>{j(_e),O({name:_e.name||"",surname:_e.surname||"",grade:_e.grade||"",class:_e.class||"",student_id:_e.student_id||"",nickname:_e.nickname||"",password:_e.password||"",is_active:_e.is_active!==void 0?_e.is_active:!0})},[]),Pe=S.useCallback(async()=>{try{const _e=[];Object.keys(A).forEach(Nt=>{Nt!=="student_id"&&A[Nt]!==M[Nt]&&_e.push({fieldName:Nt,newValue:A[Nt]})});for(const Nt of _e)await s("/.netlify/functions/update-user",{userId:M.student_id,fieldName:Nt.fieldName,newValue:Nt.newValue});h({type:"success",message:"User updated successfully!"}),j(null),O({}),he()}catch{h({type:"error",message:"Failed to update user"})}},[A,M,s,he]),Ze=S.useCallback(async _e=>{if(window.confirm("Are you sure you want to delete this user?"))try{(await s("/.netlify/functions/delete-user",{userId:_e})).success&&(h({type:"success",message:"User deleted successfully!"}),he())}catch{h({type:"error",message:"Failed to delete user"})}},[s,he]),gt=S.useCallback(_e=>{q(_e),ae({teacher_id:_e.teacher_id||"",username:_e.username||"",password:_e.password||"",first_name:_e.first_name||"",last_name:_e.last_name||"",is_active:_e.is_active!==void 0?_e.is_active:!0})},[]),Tt=S.useCallback(async()=>{try{const _e=[];Object.keys(Q).forEach(Nt=>{Nt!=="teacher_id"&&Q[Nt]!==L[Nt]&&_e.push({fieldName:Nt,newValue:Q[Nt]})});for(const Nt of _e)await s("/.netlify/functions/update-teacher",{teacherId:L.teacher_id,fieldName:Nt.fieldName,newValue:Nt.newValue});h({type:"success",message:"Teacher updated successfully!"}),q(null),ae({}),Ce()}catch{h({type:"error",message:"Failed to update teacher"})}},[Q,L,s,Ce]),ir=S.useCallback(async _e=>{if(window.confirm("Are you sure you want to delete this teacher?"))try{(await s("/.netlify/functions/delete-teacher",{teacherId:_e})).success&&(h({type:"success",message:"Teacher deleted successfully!"}),Ce())}catch{h({type:"error",message:"Failed to delete teacher"})}},[s,Ce]),Ct=S.useCallback(_e=>{ne(_e),V({subject_id:_e.subject_id||"",subject:_e.subject||""})},[]),or=S.useCallback(async()=>{try{const _e=[];Object.keys(B).forEach(Nt=>{Nt!=="subject_id"&&B[Nt]!==te[Nt]&&_e.push({fieldName:Nt,newValue:B[Nt]})});for(const Nt of _e)await s("/.netlify/functions/update-subject",{subjectId:te.subject_id,fieldName:Nt.fieldName,newValue:Nt.newValue});h({type:"success",message:"Subject updated successfully!"}),ne(null),V({}),be()}catch{h({type:"error",message:"Failed to update subject"})}},[B,te,s,be]),Or=S.useCallback(async _e=>{if(window.confirm("Are you sure you want to delete this subject?"))try{const Nt=await s("/.netlify/functions/delete-subject",{subjectId:_e});Nt.success?(h({type:"success",message:"Subject deleted successfully!"}),be()):h({type:"error",message:Nt.message||"Failed to delete subject"})}catch{h({type:"error",message:"Failed to delete subject"})}},[s,be]),Lr=S.useCallback((_e,Nt)=>{Ot(Ur=>({...Ur,[_e]:Nt}))},[]),Pr=S.useCallback(async _e=>{if(_e.preventDefault(),!Ge.startDate||!Ge.endDate||!Ge.teacherId){h({type:"error",message:"Please fill in all required fields (Start Date, End Date, Teacher ID)"});return}if(window.confirm("Are you sure you want to delete all test data for the selected criteria? This action cannot be undone."))try{const Nt=await s("/.netlify/functions/delete-test-data",Ge);Nt.success?(h({type:"success",message:`Successfully deleted ${Nt.deletedCount} test records!`}),Le(!1),Ot({startDate:"",endDate:"",teacherId:"",grades:[],classes:[],subjectId:""})):h({type:"error",message:Nt.message||"Failed to delete test data"})}catch{h({type:"error",message:"Failed to delete test data"})}},[Ge,s]),un=S.useCallback(async(_e,Nt,Ur)=>{try{const Yr=Date.now(),fs=await n(`/.netlify/functions/get-test-assignments?t=${Yr}`);if(fs.success&&fs.assignments){const jn=fs.assignments.filter(Be=>Be.test_id===parseInt(_e)&&Be.test_type===Nt);if(jn.length===0){h({type:"error",message:"No assignments found for this test"});return}for(const Be of jn){const wt=await s("/.netlify/functions/remove-assignment",{teacher_id:Ur,assignment_id:Be.assignment_id,test_type:Nt,test_id:_e});if(!wt.success){h({type:"error",message:`Failed to complete test: ${wt.message}`});return}}h({type:"success",message:"Test marked as complete successfully!"}),await ke()}else h({type:"error",message:"Failed to get test assignments"})}catch(Yr){console.error("Error completing test:",Yr),h({type:"error",message:"Failed to complete test"})}},[s,n,ke]),An=S.useCallback(async(_e,Nt,Ur)=>{try{const Yr=Date.now(),fs=await n(`/.netlify/functions/get-test-assignments?t=${Yr}`);if(fs.success&&fs.assignments){const jn=fs.assignments.filter(Be=>Be.test_id===parseInt(_e)&&Be.test_type===Nt);if(jn.length===0){h({type:"error",message:"No assignments found for this test"});return}for(const Be of jn){const wt=await s("/.netlify/functions/remove-assignment",{teacher_id:Ur,assignment_id:Be.assignment_id,test_type:Nt,test_id:_e,mark_active:!0});if(!wt.success){h({type:"error",message:`Failed to reactivate test: ${wt.message}`});return}}h({type:"success",message:"Test marked as active successfully!"}),await ke()}else h({type:"error",message:"Failed to get test assignments"})}catch(Yr){console.error("Error reactivating test:",Yr),h({type:"error",message:"Failed to reactivate test"})}},[s,n,ke]),mn=S.useCallback(async(_e=!1)=>{try{const Nt=Date.now(),Ur=await n(`/.netlify/functions/get-all-tests?t=${Nt}`);console.log(" Actual tests response:",Ur),Ae(Ur.tests||[]),console.log(" Actual tests set to state:",Ur.tests||[])}catch(Nt){console.error("Error loading actual tests:",Nt),h({type:"error",message:"Failed to load tests"})}},[n]),_r=S.useCallback(async(_e,Nt,Ur)=>{try{const Yr=await s("/.netlify/functions/delete-test",{test_id:_e,test_type:Nt,teacher_id:Ur});if(Yr.success){h({type:"success",message:"Test deleted successfully!"});const fs=`${Nt}-${_e}-${Ur}`;ut(jn=>{const Be=new Set(jn);return Be.delete(fs),Be}),await mn(!0)}else h({type:"error",message:`Failed to delete test: ${Yr.message}`})}catch(Yr){console.error("Error deleting test:",Yr),h({type:"error",message:"Failed to delete test"})}},[s,mn]),Pa=S.useCallback((_e,Nt,Ur)=>{const Yr=`${Nt}-${_e}-${Ur}`;ut(fs=>{const jn=new Set(fs);return jn.has(Yr)?jn.delete(Yr):jn.add(Yr),jn})},[]),Mn=E?$e.filter(_e=>_e.grade.toString()===E):$e,ds=R.filter(_e=>{const Nt=J==="all"?!0:J==="active"?_e.is_active:!_e.is_active,Ur=!U||_e.teacher_id===U,Yr=!W||new Date(_e.created_at)>=new Date(W),fs=!Z||new Date(_e.created_at)<=new Date(Z+"T23:59:59");return Nt&&Ur&&Yr&&fs}),Yn=xe.filter(_e=>{const Nt=!Me||_e.teacher_id===Me,Ur=!He||new Date(_e.created_at)>=new Date(He),Yr=!it||new Date(_e.created_at)<=new Date(it+"T23:59:59");return Nt&&Ur&&Yr}),pa=S.useCallback(()=>{if(pt.size===Yn.length&&Yn.length>0)ut(new Set);else{const _e=Yn.map(Nt=>`${Nt.test_type}-${Nt.test_id}-${Nt.teacher_id}`);ut(new Set(_e))}},[pt.size,Yn]),Hn=S.useCallback(async()=>{if(pt.size!==0&&window.confirm(`Are you sure you want to delete ${pt.size} test(s)?`))try{const _e=Array.from(pt).map(Nt=>{const[Ur,Yr,fs]=Nt.split("-");return s("/.netlify/functions/delete-test",{test_id:parseInt(Yr),test_type:Ur,teacher_id:fs})});await Promise.all(_e),h({type:"success",message:`Successfully deleted ${pt.size} test(s)!`}),ut(new Set),await mn(!0)}catch(_e){console.error("Error deleting marked tests:",_e),h({type:"error",message:"Failed to delete some tests. Please try again."})}},[pt,s,mn]);return c.jsxs(ht.div,{id:"admin-cabinet-main",className:Ke.container,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[c.jsx(ht.div,{className:Ke.header,initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:c.jsx("div",{className:Ke.headerContent,children:c.jsxs("div",{className:Ke.headerFlex,children:[c.jsxs(ht.div,{className:Ke.adminInfo,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(ht.div,{className:Ke.adminAvatar,initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.3,type:"spring"},whileHover:{scale:1.1},children:c.jsx("span",{className:"text-white font-semibold text-xl",children:e?.username?.charAt(0)||"A"})})}),c.jsxs("div",{children:[c.jsx("h1",{className:Ke.adminText,children:e?.username||"Administrator"}),c.jsx("p",{className:Ke.adminSubtext,children:"Administrator Dashboard"})]})]}),c.jsxs(ht.div,{className:Ke.menuContainer,initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[c.jsxs("button",{onClick:ar,className:Ke.menuButton,style:{zIndex:1e3},children:[c.jsx("span",{className:"hidden sm:inline",children:"Menu"}),c.jsx(ht.svg,{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:_t?180:0},transition:{duration:.2},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),c.jsx(al,{children:_t&&c.jsx(ht.div,{className:Ke.menuDropdown,initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:c.jsxs("div",{className:"py-2",children:[c.jsx(ht.button,{onClick:Dr,className:Ke.menuItem,whileHover:{x:4},transition:{duration:.2},children:"Change Password"}),c.jsx(ht.button,{onClick:()=>{ar(),r()},className:Ke.menuItemLogout,whileHover:{x:4},transition:{duration:.2},children:"Logout"})]})})})]})]})})}),o&&c.jsx(ln,{text:"Loading..."}),u&&c.jsx(su,{type:"error",message:u,onClose:()=>d(null)}),f&&c.jsx(su,{type:f.type,message:f.message,onClose:()=>h(null)}),Jt&&c.jsx("div",{className:Ke.modalOverlay,children:c.jsxs("div",{className:Ke.modalContent,children:[c.jsx("h2",{className:Ke.modalTitle,children:"Change Password"}),c.jsxs("form",{className:"space-y-4",children:[c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{htmlFor:"currentPassword",className:Ke.formLabel,children:"Current Password"}),c.jsx("input",{type:"password",id:"currentPassword",className:Ke.formInput})]}),c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{htmlFor:"newPassword",className:Ke.formLabel,children:"New Password"}),c.jsx("input",{type:"password",id:"newPassword",className:Ke.formInput})]}),c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{htmlFor:"confirmPassword",className:Ke.formLabel,children:"Confirm New Password"}),c.jsx("input",{type:"password",id:"confirmPassword",className:Ke.formInput})]}),c.jsxs("div",{className:Ke.modalActions,children:[c.jsx(lt,{type:"button",variant:"secondary",onClick:br,className:"flex-1",children:"Cancel"}),c.jsx(lt,{type:"submit",variant:"primary",className:"flex-1 bg-purple-600 hover:bg-purple-700",children:"Change Password"})]})]})]})}),c.jsx(ht.div,{className:Ke.mainContainer,initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:c.jsxs("div",{className:"space-y-6",children:[c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},children:c.jsxs($t,{className:Ke.cardContainer,children:[c.jsx($t.Header,{className:Ke.cardHeader,children:c.jsx($t.Title,{className:Ke.cardTitle,children:"User Management"})}),c.jsxs($t.Body,{className:Ke.cardBody,children:[c.jsxs("div",{className:Ke.buttonGroup,children:[c.jsx(lt,{variant:"primary",onClick:()=>kr(!0),className:Ke.buttonPrimary,children:"Add User"}),c.jsx(lt,{variant:"secondary",onClick:()=>{he(),x(!g)},className:Ke.buttonSecondary,children:g?"Hide Users Table":"Get All Users "})]}),c.jsx(al,{children:wr&&c.jsxs(ht.div,{className:Ke.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New User"}),c.jsxs("form",{onSubmit:rt,className:"space-y-4",children:[c.jsxs("div",{className:Ke.formGrid,children:[c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{className:Ke.formLabel,children:"Grade"}),c.jsx("input",{type:"text",value:Ue.grade,onChange:_e=>Ee("grade",_e.target.value),className:Ke.formInput,placeholder:"Enter grade"})]}),c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{className:Ke.formLabel,children:"Class"}),c.jsx("input",{type:"text",value:Ue.class,onChange:_e=>Ee("class",_e.target.value),className:Ke.formInput,placeholder:"Enter class"})]}),c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{className:Ke.formLabel,children:"Number"}),c.jsx("input",{type:"text",value:Ue.number,onChange:_e=>Ee("number",_e.target.value),className:Ke.formInput,placeholder:"Enter number"})]}),c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{className:Ke.formLabel,children:"Student ID"}),c.jsx("input",{type:"text",value:Ue.student_id,onChange:_e=>Ee("student_id",_e.target.value),className:Ke.formInput,placeholder:"Enter student ID"})]}),c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{className:Ke.formLabel,children:"Name"}),c.jsx("input",{type:"text",value:Ue.name,onChange:_e=>Ee("name",_e.target.value),className:Ke.formInput,placeholder:"Enter name"})]}),c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{className:Ke.formLabel,children:"Surname"}),c.jsx("input",{type:"text",value:Ue.surname,onChange:_e=>Ee("surname",_e.target.value),className:Ke.formInput,placeholder:"Enter surname"})]}),c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{className:Ke.formLabel,children:"Nickname"}),c.jsx("input",{type:"text",value:Ue.nickname,onChange:_e=>Ee("nickname",_e.target.value),className:Ke.formInput,placeholder:"Enter nickname"})]}),c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{className:Ke.formLabel,children:"Password"}),c.jsx("input",{type:"password",value:Ue.password,onChange:_e=>Ee("password",_e.target.value),className:Ke.formInput,placeholder:"Enter password"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"userActive",checked:Ue.is_active,onChange:_e=>Ee("is_active",_e.target.checked),className:Ke.formCheckbox}),c.jsx("label",{htmlFor:"userActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),c.jsxs("div",{className:Ke.formActions,children:[c.jsx(lt,{type:"button",variant:"secondary",onClick:()=>kr(!1),className:Ke.buttonSecondary,children:"Cancel"}),c.jsx(lt,{type:"submit",variant:"primary",className:Ke.buttonPrimary,children:"Add User"})]})]})]})}),g&&c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Users (",Mn.length," of ",$e.length,")"]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Filter by Grade:"}),c.jsxs("select",{value:E,onChange:_e=>P(_e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"All Grades"}),[...new Set($e.map(_e=>_e.grade))].sort().map(_e=>c.jsxs("option",{value:_e,children:["Grade ",_e]},_e))]})]})]}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto max-h-[600px]",children:c.jsxs("table",{className:Ke.table,children:[c.jsx("thead",{className:Ke.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:Ke.tableHeaderCell,children:"Name"}),c.jsx("th",{className:Ke.tableHeaderCell,children:"Grade"}),c.jsx("th",{className:Ke.tableHeaderCell,children:"Class"}),c.jsx("th",{className:Ke.tableHeaderCell,children:"Student ID"}),c.jsx("th",{className:Ke.tableHeaderCell,children:"Number"}),c.jsx("th",{className:Ke.tableHeaderCell,children:"Nickname"}),c.jsx("th",{className:Ke.tableHeaderCell,children:"Actions"})]})}),c.jsx("tbody",{className:Ke.tableBody,children:Mn.map((_e,Nt)=>c.jsxs("tr",{className:Ke.tableRow,children:[c.jsxs("td",{className:Ke.tableCell,children:[_e.name," ",_e.surname]}),c.jsx("td",{className:Ke.tableCell,children:_e.grade}),c.jsx("td",{className:Ke.tableCell,children:_e.class}),c.jsx("td",{className:Ke.tableCell,children:_e.student_id}),c.jsx("td",{className:Ke.tableCell,children:_e.number}),c.jsx("td",{className:Ke.tableCell,children:_e.nickname}),c.jsx("td",{className:Ke.tableCell,children:c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>je(_e),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),c.jsx("button",{onClick:()=>Ze(_e.student_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},_e.id||Nt))})]})})})]})]})]})}),c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:c.jsxs($t,{className:Ke.cardContainer,children:[c.jsxs($t.Header,{className:Ke.cardHeader,children:[c.jsx($t.Title,{className:Ke.cardTitle,children:"Teacher Management"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:i,className:"px-3 py-1.5 bg-orange-600 text-white rounded hover:bg-orange-700 transition-colors text-xs whitespace-nowrap",title:"Check and mark overdue assignments (7+ days old) as inactive",children:"Check Overdue Assignments"}),c.jsx(lt,{variant:"primary",onClick:()=>Tr(!0),className:"text-xs whitespace-nowrap",children:"Add Teacher"}),c.jsx(lt,{variant:"secondary",onClick:()=>{Ce(),v(!y)},className:"text-xs whitespace-nowrap",children:y?"Hide Teachers Table":"Get All Teachers "})]})]}),c.jsxs($t.Body,{className:Ke.cardBody,children:[c.jsx(al,{children:zr&&c.jsxs(ht.div,{className:Ke.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New Teacher"}),c.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[c.jsxs("div",{className:Ke.formGrid,children:[c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{className:Ke.formLabel,children:"Teacher ID"}),c.jsx("input",{type:"text",value:Ie.teacher_id,onChange:_e=>Qe("teacher_id",_e.target.value),className:Ke.formInput,placeholder:"Enter teacher ID"})]}),c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{className:Ke.formLabel,children:"Username"}),c.jsx("input",{type:"text",value:Ie.username,onChange:_e=>Qe("username",_e.target.value),className:Ke.formInput,placeholder:"Enter username"})]}),c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{className:Ke.formLabel,children:"Password"}),c.jsx("input",{type:"password",value:Ie.password,onChange:_e=>Qe("password",_e.target.value),className:Ke.formInput,placeholder:"Enter password"})]}),c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{className:Ke.formLabel,children:"First Name"}),c.jsx("input",{type:"text",value:Ie.first_name,onChange:_e=>Qe("first_name",_e.target.value),className:Ke.formInput,placeholder:"Enter first name"})]}),c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{className:Ke.formLabel,children:"Last Name"}),c.jsx("input",{type:"text",value:Ie.last_name,onChange:_e=>Qe("last_name",_e.target.value),className:Ke.formInput,placeholder:"Enter last name"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"teacherActive",checked:Ie.is_active,onChange:_e=>Qe("is_active",_e.target.checked),className:Ke.formCheckbox}),c.jsx("label",{htmlFor:"teacherActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),c.jsxs("div",{className:Ke.formActions,children:[c.jsx(lt,{type:"button",variant:"secondary",onClick:()=>Tr(!1),className:Ke.buttonSecondary,children:"Cancel"}),c.jsx(lt,{type:"submit",variant:"primary",className:Ke.buttonPrimary,children:"Add Teacher"})]})]})]})}),M&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit User"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),c.jsx("input",{type:"text",value:A.name,onChange:_e=>O({...A,name:_e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Surname"}),c.jsx("input",{type:"text",value:A.surname,onChange:_e=>O({...A,surname:_e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade"}),c.jsx("input",{type:"number",value:A.grade,onChange:_e=>O({...A,grade:_e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),c.jsx("input",{type:"number",value:A.class,onChange:_e=>O({...A,class:_e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student ID"}),c.jsx("input",{type:"text",value:A.student_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Student ID cannot be changed"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nickname"}),c.jsx("input",{type:"text",value:A.nickname,onChange:_e=>O({...A,nickname:_e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),c.jsx("input",{type:"text",value:A.password,onChange:_e=>O({...A,password:_e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"is_active",checked:A.is_active,onChange:_e=>O({...A,is_active:_e.target.checked}),className:"h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),c.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Active"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[c.jsx("button",{onClick:()=>{j(null),O({})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),c.jsx("button",{onClick:Pe,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700",children:"Update User"})]})]})}),y&&c.jsxs("div",{className:"mt-6",children:[c.jsx("div",{className:"mb-4",children:c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Teachers (",tt.length,")"]})}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:Ke.table,children:[c.jsx("thead",{className:Ke.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:Ke.tableHeaderCell,children:"Teacher ID"}),c.jsx("th",{className:Ke.tableHeaderCell,children:"Name"}),c.jsx("th",{className:Ke.tableHeaderCell,children:"Username"}),c.jsx("th",{className:Ke.tableHeaderCell,children:"Password"}),c.jsx("th",{className:Ke.tableHeaderCell,children:"Status"}),c.jsx("th",{className:Ke.tableHeaderCell,children:"Created"}),c.jsx("th",{className:Ke.tableHeaderCell,children:"Actions"})]})}),c.jsx("tbody",{className:Ke.tableBody,children:tt.map((_e,Nt)=>c.jsxs("tr",{className:Ke.tableRow,children:[c.jsx("td",{className:Ke.tableCell,children:_e.teacher_id}),c.jsxs("td",{className:Ke.tableCell,children:[_e.first_name," ",_e.last_name]}),c.jsx("td",{className:Ke.tableCell,children:_e.username}),c.jsx("td",{className:Ke.tableCell,children:_e.password}),c.jsx("td",{className:Ke.tableCell,children:c.jsx("span",{className:_e.is_active?Ke.statusActive:Ke.statusInactive,children:_e.is_active?"Active":"Inactive"})}),c.jsx("td",{className:Ke.tableCell,children:new Date(_e.created_at).toLocaleDateString()}),c.jsx("td",{className:Ke.tableCell,children:c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>gt(_e),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),c.jsx("button",{onClick:()=>ir(_e.teacher_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},_e.teacher_id||Nt))})]})})})]})]})]})}),c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,duration:.5},children:c.jsxs($t,{className:Ke.cardContainer,children:[c.jsx($t.Header,{className:Ke.cardHeader,children:c.jsx($t.Title,{className:Ke.cardTitle,children:"Subject Management"})}),c.jsxs($t.Body,{className:Ke.cardBody,children:[c.jsxs("div",{className:Ke.buttonGroup,children:[c.jsx(lt,{variant:"primary",onClick:()=>ve(!0),className:Ke.buttonPrimary,children:"Add Subject"}),c.jsx(lt,{variant:"secondary",onClick:()=>{be(),k(!T)},className:Ke.buttonSecondary,children:T?"Hide Subjects Table":"Get All Subjects "})]}),c.jsx(al,{children:gr&&c.jsxs(ht.div,{className:Ke.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New Subject"}),c.jsxs("form",{onSubmit:me,className:"space-y-4",children:[c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{className:Ke.formLabel,children:"Subject Name"}),c.jsx("input",{type:"text",value:Ne.subject,onChange:_e=>xt("subject",_e.target.value),className:Ke.formInput,placeholder:"Enter subject name",required:!0}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Subject ID will be automatically generated"})]}),c.jsxs("div",{className:Ke.formActions,children:[c.jsx(lt,{type:"button",variant:"secondary",onClick:()=>ve(!1),className:Ke.buttonSecondary,children:"Cancel"}),c.jsx(lt,{type:"submit",variant:"primary",className:Ke.buttonPrimary,children:"Add Subject"})]})]})]})}),L&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Teacher"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher ID"}),c.jsx("input",{type:"text",value:Q.teacher_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Teacher ID cannot be changed"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),c.jsx("input",{type:"text",value:Q.username,onChange:_e=>ae({...Q,username:_e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),c.jsx("input",{type:"text",value:Q.password,onChange:_e=>ae({...Q,password:_e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),c.jsx("input",{type:"text",value:Q.first_name,onChange:_e=>ae({...Q,first_name:_e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),c.jsx("input",{type:"text",value:Q.last_name,onChange:_e=>ae({...Q,last_name:_e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"teacher_is_active",checked:Q.is_active,onChange:_e=>ae({...Q,is_active:_e.target.checked}),className:"h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),c.jsx("label",{htmlFor:"teacher_is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Active"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[c.jsx("button",{onClick:()=>{q(null),ae({})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),c.jsx("button",{onClick:Tt,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700",children:"Update Teacher"})]})]})}),te&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Subject"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject ID"}),c.jsx("input",{type:"text",value:B.subject_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Subject ID cannot be changed"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject Name"}),c.jsx("input",{type:"text",value:B.subject,onChange:_e=>V({...B,subject:_e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[c.jsx("button",{onClick:()=>ne(null),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),c.jsx("button",{onClick:or,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Update Subject"})]})]})}),T&&c.jsxs("div",{className:"mt-6",children:[c.jsx("div",{className:"mb-4",children:c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Subjects (",nt.length,")"]})}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:Ke.table,children:[c.jsx("thead",{className:Ke.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:Ke.tableHeaderCell,children:"Subject ID"}),c.jsx("th",{className:Ke.tableHeaderCell,children:"Subject Name"}),c.jsx("th",{className:Ke.tableHeaderCell,children:"Actions"})]})}),c.jsx("tbody",{className:Ke.tableBody,children:nt.map((_e,Nt)=>c.jsxs("tr",{className:Ke.tableRow,children:[c.jsx("td",{className:Ke.tableCell,children:_e.subject_id}),c.jsx("td",{className:Ke.tableCell,children:_e.subject}),c.jsx("td",{className:Ke.tableCell,children:c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>Ct(_e),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),c.jsx("button",{onClick:()=>Or(_e.subject_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},_e.subject_id||Nt))})]})})})]})]})]})}),c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:c.jsxs($t,{className:Ke.cardContainer,children:[c.jsx($t.Header,{className:Ke.cardHeader,children:c.jsx($t.Title,{className:Ke.cardTitle,children:"Test Data Deletion"})}),c.jsxs($t.Body,{className:Ke.cardBody,children:[c.jsx("div",{className:Ke.buttonGroup,children:c.jsx(lt,{variant:"danger",onClick:()=>Le(!0),className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 shadow-md",children:"Delete Test Data"})}),c.jsx(al,{children:Fe&&c.jsxs(ht.div,{className:Ke.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Delete Test Data by Date Range"}),c.jsxs("form",{onSubmit:Pr,className:"space-y-4",children:[c.jsxs("div",{className:Ke.formGrid,children:[c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{className:Ke.formLabel,children:"Start Date *"}),c.jsx("input",{type:"date",value:Ge.startDate,onChange:_e=>Lr("startDate",_e.target.value),className:Ke.formInput,required:!0})]}),c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{className:Ke.formLabel,children:"End Date *"}),c.jsx("input",{type:"date",value:Ge.endDate,onChange:_e=>Lr("endDate",_e.target.value),className:Ke.formInput,required:!0})]})]}),c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{className:Ke.formLabel,children:"Teacher ID *"}),c.jsxs("select",{value:Ge.teacherId,onChange:_e=>Lr("teacherId",_e.target.value),className:Ke.formInput,required:!0,children:[c.jsx("option",{value:"",children:"Select a teacher"}),tt.map(_e=>c.jsxs("option",{value:_e.teacher_id,children:[_e.teacher_id," - ",_e.first_name," ",_e.last_name]},_e.teacher_id))]})]}),c.jsxs("div",{className:Ke.formGroup,children:[c.jsx("label",{className:Ke.formLabel,children:"Subject (Optional)"}),c.jsxs("select",{value:Ge.subjectId,onChange:_e=>Lr("subjectId",_e.target.value),className:Ke.formInput,children:[c.jsx("option",{value:"",children:"All subjects"}),nt.map(_e=>c.jsx("option",{value:_e.subject_id,children:_e.subject},_e.subject_id))]})]}),c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning: This action cannot be undone"}),c.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[c.jsx("p",{children:"This will permanently delete:"}),c.jsxs("ul",{className:"list-disc list-inside mt-1",children:[c.jsx("li",{children:"All test records within the date range"}),c.jsx("li",{children:"All test questions and answers"}),c.jsx("li",{children:"All test results and submissions"}),c.jsx("li",{children:"All test assignments"}),c.jsx("li",{children:"Associated Cloudinary images (for matching tests)"})]})]})]})]})}),c.jsxs("div",{className:Ke.formActions,children:[c.jsx(lt,{type:"button",variant:"secondary",onClick:()=>Le(!1),className:Ke.buttonSecondary,children:"Cancel"}),c.jsx(lt,{type:"submit",variant:"danger",className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 shadow-md",children:"Delete Test Data"})]})]})]})})]})]})}),c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.85,duration:.5},children:c.jsxs($t,{className:Ke.cardContainer,children:[c.jsx($t.Header,{className:Ke.cardHeader,children:c.jsx($t.Title,{className:Ke.cardTitle,children:"Assignments Management"})}),c.jsxs($t.Body,{className:Ke.cardBody,children:[c.jsx("div",{className:"mb-4",children:c.jsx(lt,{variant:"primary",onClick:ke,className:Ke.buttonPrimary,children:b?"Hide Assignments Table":"Get All Assignments "})}),b&&c.jsx("div",{className:"mb-4",children:c.jsx("p",{className:"text-sm text-gray-600",children:"Showing all tests (Active and Completed)"})}),b&&c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Assignments (",ds.length," of ",R.length,")"]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs("select",{value:J,onChange:_e=>le(_e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[c.jsx("option",{value:"all",children:"All"}),c.jsx("option",{value:"active",children:"Active"}),c.jsx("option",{value:"completed",children:"Completed"})]}),c.jsxs("select",{value:U,onChange:_e=>I(_e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"All Teachers"}),tt.map(_e=>c.jsxs("option",{value:_e.teacher_id,children:[_e.first_name," ",_e.last_name]},_e.teacher_id))]}),c.jsx("input",{type:"date",value:W,onChange:_e=>K(_e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Start Date"}),c.jsx("input",{type:"date",value:Z,onChange:_e=>oe(_e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"End Date"})]})]}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:Ke.table,children:[c.jsx("thead",{className:Ke.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Test Name"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Teacher"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider text-center",children:"Questions"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:Ke.tableBody,children:ds.map((_e,Nt)=>c.jsxs("tr",{className:Ke.tableRow,children:[c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 max-w-xs truncate",title:_e.test_name,children:_e.test_name}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:c.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:_e.test_type.replace("_"," ").toUpperCase()})}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:_e.teacher_name}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 text-center",children:_e.num_questions}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:new Date(_e.created_at).toLocaleDateString()}),c.jsx("td",{className:"px-4 py-3 text-xs",children:c.jsx("div",{className:"flex space-x-2",children:_e.is_active?c.jsx("button",{onClick:()=>un(_e.test_id,_e.test_type,_e.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-orange-100 text-orange-700 hover:bg-orange-200",children:"Mark Complete"}):c.jsx("button",{onClick:()=>An(_e.test_id,_e.test_type,_e.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200",children:"Mark Active"})})})]},`${_e.test_type}-${_e.test_id}-${Nt}`))})]})})})]})]})]})}),c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.5},children:c.jsxs($t,{className:Ke.cardContainer,children:[c.jsx($t.Header,{className:Ke.cardHeader,children:c.jsx($t.Title,{className:Ke.cardTitle,children:"Test Management"})}),c.jsxs($t.Body,{className:Ke.cardBody,children:[c.jsx("div",{className:"mb-4",children:c.jsx(lt,{variant:"primary",onClick:()=>{Te||mn(),ie(!Te)},className:Ke.buttonPrimary,children:Te?"Hide Tests Table":"Get All Tests "})}),Te&&c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Tests (",Yn.length," of ",xe.length,")"]}),pt.size>0&&c.jsxs(lt,{variant:"danger",onClick:Hn,className:"text-sm px-4 py-2",children:["Delete Marked (",pt.size,")"]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs("select",{value:Me,onChange:_e=>Je(_e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"All Teachers"}),tt.map(_e=>c.jsxs("option",{value:_e.teacher_id,children:[_e.first_name," ",_e.last_name]},_e.teacher_id))]}),c.jsx("input",{type:"date",value:He,onChange:_e=>It(_e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Start Date"}),c.jsx("input",{type:"date",value:it,onChange:_e=>kt(_e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"End Date"})]})]}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:Ke.table,children:[c.jsx("thead",{className:Ke.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:c.jsx("input",{type:"checkbox",checked:pt.size===Yn.length&&Yn.length>0,onChange:pa,className:"cursor-pointer"})}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Test Name"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Teacher"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider text-center",children:"Questions"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:Ke.tableBody,children:Yn.map((_e,Nt)=>c.jsxs("tr",{className:Ke.tableRow,children:[c.jsx("td",{className:Ke.tableCell,children:c.jsx("input",{type:"checkbox",checked:pt.has(`${_e.test_type}-${_e.test_id}-${_e.teacher_id}`),onChange:()=>Pa(_e.test_id,_e.test_type,_e.teacher_id),className:"cursor-pointer"})}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 max-w-xs truncate",title:_e.test_name,children:_e.test_name}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:c.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:_e.test_type.replace("_"," ").toUpperCase()})}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:_e.teacher_name}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 text-center",children:_e.num_questions}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:new Date(_e.created_at).toLocaleDateString()}),c.jsx("td",{className:"px-4 py-3 text-xs",children:c.jsx("div",{className:"flex space-x-2",children:c.jsx("button",{onClick:()=>_r(_e.test_id,_e.test_type,_e.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200",children:"Delete"})})})]},`${_e.test_type}-${_e.test_id}-${Nt}`))})]})})})]})]})]})}),c.jsx(ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.5},children:c.jsxs($t,{className:Ke.cardContainer,children:[c.jsx($t.Header,{className:Ke.cardHeader,children:c.jsx($t.Title,{className:Ke.cardTitle,children:"Debug & Testing"})}),c.jsx($t.Body,{className:Ke.cardBody})]})})]})})]})},tje=()=>{const{isAdmin:e,getCurrentAdminId:t,logout:r}=Fs(),{get:n}=Bl(),{showNotification:s}=ai();S.useEffect(()=>{a()},[]);const a=S.useCallback(async()=>{if(console.log(" Initializing Admin Application..."),!e()){console.error(" User is not an admin, redirecting to login"),s("Access Denied: You are not an administrator.","error"),r();return}try{i(),await o(),l(),u(),console.log(" Admin Application initialized successfully"),s("Admin dashboard loaded successfully","success")}catch(d){console.error(" Error initializing admin app:",d),s("Failed to initialize admin dashboard","error")}},[e,t,r,s,n]),i=S.useCallback(()=>{console.log(" Initializing global event listeners...");const d=f=>{f.ctrlKey&&f.key==="k"&&(f.preventDefault(),console.log("Admin search shortcut triggered"))};return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[]),o=S.useCallback(async()=>{try{console.log(" Loading admin data...");const[d,f,h,g]=await Promise.allSettled([n("/.netlify/functions/get-all-users"),n("/.netlify/functions/get-all-teachers"),n("/.netlify/functions/get-all-subjects"),iu.loadAcademicCalendar()]);d.status==="fulfilled"&&d.value?.success&&console.log(" Users loaded:",d.value.users?.length||0),f.status==="fulfilled"&&f.value?.success&&console.log(" Teachers loaded:",f.value.teachers?.length||0),h.status==="fulfilled"&&h.value?.success&&console.log(" Subjects loaded:",h.value.subjects?.length||0),g.status==="fulfilled"&&Array.isArray(g.value)&&console.log(" Academic years loaded:",g.value.length||0),console.log(" Admin data loading completed")}catch(d){throw console.error(" Error loading admin data:",d),d}},[n]),l=S.useCallback(()=>{console.log(" Initializing test deletion functionality..."),console.log(" Test deletion functionality initialized")},[]),u=S.useCallback(()=>{console.log(" Exposing admin functions globally..."),window.toggleSubjectsContent=()=>{const f=document.getElementById("allSubjectsContainer"),h=document.querySelector('button[onclick="toggleSubjectsContent()"]');if(!f){console.error(" allSubjectsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Subjects":"Hide Subjects"},window.showAddSubjectForm=()=>{const f=document.getElementById("addSubjectForm");f&&(f.style.display="block")},window.hideAddSubjectForm=()=>{const f=document.getElementById("addSubjectForm"),h=document.getElementById("newSubjectForm");f&&(f.style.display="none"),h&&h.reset()},window.showAddAcademicYearForm=()=>{const f=document.getElementById("addAcademicYearForm");f&&(f.style.display="block")},window.hideAddAcademicYearForm=()=>{const f=document.getElementById("addAcademicYearForm"),h=document.getElementById("newAcademicYearForm");f&&(f.style.display="none"),h&&h.reset()},window.toggleUsersContent=()=>{const f=document.getElementById("allUsersContainer"),h=document.querySelector('button[onclick="toggleUsersContent()"]');if(!f){console.error(" allUsersContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Users":"Hide Users"},window.showAddUserForm=()=>{const f=document.getElementById("addUserForm");f&&(f.style.display="block")},window.hideAddUserForm=()=>{const f=document.getElementById("addUserForm"),h=document.getElementById("newUserForm");f&&(f.style.display="none"),h&&h.reset()},window.showAddTeacherForm=()=>{const f=document.getElementById("addTeacherForm");f&&(f.style.display="block")},window.hideAddTeacherForm=()=>{const f=document.getElementById("addTeacherForm"),h=document.getElementById("newTeacherForm");f&&(f.style.display="none"),h&&h.reset()},window.toggleTeachersContent=()=>{const f=document.getElementById("allTeachersContainer"),h=document.querySelector('button[onclick="toggleTeachersContent()"]');if(!f){console.error(" allTeachersContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Teachers":"Hide Teachers"},window.toggleTestsContent=()=>{const f=document.getElementById("allTestsContainer"),h=document.querySelector('button[onclick="toggleTestsContent()"]');if(!f){console.error(" allTestsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Tests":"Hide Tests"},window.toggleAssignmentsContent=()=>{const f=document.getElementById("allAssignmentsContainer"),h=document.querySelector('button[onclick="toggleAssignmentsContent()"]');if(!f){console.error(" allAssignmentsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Assignments":"Hide Assignments"},window.toggleResultsContent=()=>{const f=document.getElementById("allResultsContainer"),h=document.querySelector('button[onclick="toggleResultsContent()"]');if(!f){console.error(" allResultsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Results":"Hide Results"};const d={};window.toggleSection=f=>{console.log(` toggleSection called with sectionId: ${f}`);const h=Date.now();if(d[f]&&h-d[f]<300){console.log(` Ignoring rapid successive call for ${f}`);return}d[f]=h;const g=document.getElementById(f);if(!g){console.error(` Section with id '${f}' not found!`);return}const x=g.style.display!=="none";g.style.display=x?"none":"block";const y=document.querySelector(`button[onclick="toggleSection('${f}')"]`);y&&(y.textContent=x?"Show":"Hide")},window.addClickListeners=()=>{console.log(" Adding click listeners to section headers...");const f=document.querySelectorAll(".section-header");console.log(` Found ${f.length} section headers`),f.forEach((h,g)=>{const x=h.textContent.trim();if(console.log(` Processing header ${g+1}:`,x),h.dataset.listenerAdded==="true"){console.log(` Skipping header ${x} - listener already added`);return}h.addEventListener("click",()=>{const y=h.dataset.sectionId;y&&window.toggleSection(y)}),h.dataset.listenerAdded="true",console.log(` Added click listener to header: ${x}`)})},window.makeFieldEditable=f=>{const h=f.textContent;f.dataset.field;const g=document.createElement("input");g.type="text",g.value=h,g.className="editable-input";const x=document.createElement("button");x.textContent="Save",x.className="btn-save",x.onclick=()=>window.saveField(f,g,x,y);const y=document.createElement("button");y.textContent="Cancel",y.className="btn-cancel",y.onclick=()=>{f.textContent=h,f.style.display="block",g.remove(),x.remove(),y.remove()},f.style.display="none",f.parentNode.insertBefore(g,f),f.parentNode.insertBefore(x,f),f.parentNode.insertBefore(y,f)},window.saveField=(f,h,g,x)=>{const y=h.value.trim(),v=f.dataset.field,T=f.dataset.recordId;if(!y){alert("Field cannot be empty");return}console.log(`Saving field ${v} for record ${T} with value: ${y}`),f.textContent=y,f.style.display="block",h.remove(),g.remove(),x.remove()},window.showTestDataDeletion=()=>console.log("showTestDataDeletion called"),window.hideTestDataDeletionForm=()=>console.log("hideTestDataDeletionForm called"),window.loadTeacherGradesClasses=()=>console.log("loadTeacherGradesClasses called"),window.checkTeacherSubjects=()=>console.log("checkTeacherSubjects called"),window.initializeTestDeletion=()=>console.log("initializeTestDeletion called"),window.handleAssignmentDeletion=()=>console.log("handleAssignmentDeletion called"),window.handleTestDataDeletion=()=>console.log("handleTestDataDeletion called"),window.getSelectedGradesClasses=()=>console.log("getSelectedGradesClasses called"),window.hideAssignmentDeletionForm=()=>console.log("hideAssignmentDeletionForm called"),window.addKeyboardAccessibility=()=>console.log("addKeyboardAccessibility called"),window.testToggleSection=()=>console.log("testToggleSection called"),window.testAllToggles=()=>console.log("testAllToggles called"),window.manualToggleTest=()=>console.log("manualToggleTest called"),window.addEditableFieldListeners=()=>console.log("addEditableFieldListeners called"),window.deleteTest=()=>console.log("deleteTest called"),window.testLocalStorage=()=>{console.log("Testing localStorage...");try{localStorage.setItem("test","value");const f=localStorage.getItem("test");return localStorage.removeItem("test"),console.log(" localStorage is working"),!0}catch(f){return console.error(" localStorage error:",f),!1}},window.clearAllLocalStorage=()=>{console.log("Clearing all localStorage..."),localStorage.clear(),console.log(" localStorage cleared")},window.exportLocalStorage=()=>{console.log("Exporting localStorage...");const f={};for(let y=0;y<localStorage.length;y++){const v=localStorage.key(y);f[v]=localStorage.getItem(v)}const h=new Blob([JSON.stringify(f,null,2)],{type:"application/json"}),g=URL.createObjectURL(h),x=document.createElement("a");x.href=g,x.download="localStorage-backup.json",x.click(),URL.revokeObjectURL(g)},console.log(" Admin functions exposed globally")},[]);return e()?c.jsx(eje,{}):c.jsxs("div",{className:"admin-error",children:[c.jsx("h2",{children:"Access Denied"}),c.jsx("p",{children:"You don't have permission to access the admin dashboard."}),c.jsx("button",{onClick:r,children:"Return to Login"})]})},bk=({children:e,allowedRoles:t})=>{const{isAuthenticated:r,role:n,isLoading:s}=Fs();return s?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):r?t&&!t.includes(n)?c.jsx(Dp,{to:"/unauthorized",replace:!0}):e:c.jsx(Dp,{to:"/login",replace:!0})},rje=()=>c.jsxs("div",{className:"unauthorized-page",children:[c.jsx("h1",{children:"Access Denied"}),c.jsx("p",{children:"You don't have permission to access this page."})]}),nje=()=>c.jsx(lB,{children:c.jsx(tH,{children:c.jsx(ZW,{children:c.jsx(xQ,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:c.jsx("div",{className:"app",children:c.jsxs(z7,{children:[c.jsx(ca,{path:"/login",element:c.jsx(Ide,{})}),c.jsx(ca,{path:"/unauthorized",element:c.jsx(rje,{})}),c.jsx(ca,{path:"/student/*",element:c.jsx(bk,{allowedRoles:["student"],children:c.jsx(W0e,{})})}),c.jsx(ca,{path:"/teacher/*",element:c.jsx(bk,{allowedRoles:["teacher"],children:c.jsx(ZAe,{})})}),c.jsx(ca,{path:"/admin/*",element:c.jsx(bk,{allowedRoles:["admin"],children:c.jsx(tje,{})})}),c.jsx(ca,{path:"/",element:c.jsx(Dp,{to:"/login",replace:!0})}),c.jsx(ca,{path:"*",element:c.jsx(Dp,{to:"/login",replace:!0})})]})})})})})});class sje{constructor(){this.tokenKey="auth_token",this.refreshTokenKey="refresh_token",this.userKey="user_data",this.startIntegrityMonitoring()}startIntegrityMonitoring(){setInterval(()=>{this.performIntegrityCheck().catch(t=>{console.error("Integrity check failed:",t)})},3e4)}async performIntegrityCheck(){try{const t=await aa.get();t&&!this.validateTokenFormat(t)&&(console.warn("Integrity check failed - corrupted token detected"),await this.restoreFromBackup()||(console.warn("No valid backup available - clearing authentication"),await this.clearAuth()))}catch(t){console.error("Error during integrity check:",t)}}async getToken(){const t=await aa.get();return t&&!this.validateTokenFormat(t)?(console.warn("Corrupted token detected in storage - clearing it"),this.clearAuth(),null):t}getTokenSync(){return null}getRefreshToken(){return localStorage.getItem(this.refreshTokenKey)}getUserData(){const t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}async setToken(t){if(!this.validateTokenFormat(t))return console.error("Invalid token format - refusing to store corrupted token"),!1;try{this.decodeToken(t);const r=await aa.get();if(r)try{localStorage.setItem(`${this.tokenKey}_backup`,r)}catch{}const n=await aa.set(t);return n?console.log("Token stored successfully with secure storage (hash verification, retry, write verification)"):console.error("Failed to store token - secure storage failed"),n}catch(r){return console.error("Failed to store token - token is corrupted:",r),!1}}async restoreFromBackup(){try{const t=localStorage.getItem(`${this.tokenKey}_backup`);if(t&&this.validateTokenFormat(t))return console.log("Restoring token from backup"),await aa.set(t)}catch(t){console.warn("Failed to restore from backup",t)}return!1}validateTokenFormat(t){if(!t||typeof t!="string")return console.warn("Token validation failed: not a string"),!1;if(!t.includes("."))return console.warn("Token validation failed: not a JWT format"),!1;const r=t.split(".");if(r.length!==3)return console.warn("Token validation failed: not 3 parts"),!1;for(let n=0;n<r.length;n++)try{atob(r[n].replace(/-/g,"+").replace(/_/g,"/"))}catch{return console.warn(`Token validation failed: part ${n} is not valid base64`),!1}return!0}setRefreshToken(t){localStorage.setItem(this.refreshTokenKey,t)}setUserData(t){localStorage.setItem(this.userKey,JSON.stringify(t))}setTokens(t,r){return this.setToken(t)?(this.setUserData({role:r}),localStorage.setItem("accessToken",t),!0):(console.error("Failed to set token - token validation failed"),!1)}async isAuthenticated(){const t=await this.getToken();if(!t)return!1;try{if(typeof t!="string"||!t.includes("."))return console.warn("Invalid token format - not a JWT"),this.clearAuth(),!1;const r=t.split(".");if(r.length!==3)return console.warn("Invalid token format - not 3 parts"),this.clearAuth(),!1;const n=JSON.parse(atob(r[1])),s=Date.now()/1e3;return n.exp>s}catch(r){return console.error("Error decoding token:",r),console.warn("Token appears to be corrupted - clearing authentication"),this.clearAuth(),!1}}getUserRole(){const t=this.getUserData();return t?t.role:null}isAdmin(){return this.getUserRole()==="admin"}isTeacher(){return this.getUserRole()==="teacher"}isStudent(){return this.getUserRole()==="student"}async clearAuth(){try{await aa.clear(),localStorage.removeItem(this.refreshTokenKey),localStorage.removeItem(this.userKey),localStorage.removeItem(`${this.tokenKey}_backup`)}catch(t){console.error("Failed to clear localStorage - possible corruption:",t),this.forceClearAllAuthData()}}forceClearAllAuthData(){["auth_token","accessToken","userRole","userData","refresh_token","auth_token_backup"].forEach(r=>{try{localStorage.removeItem(r)}catch(n){console.warn(`Failed to remove ${r}:`,n)}})}logout(){this.clearAuth(),window.location.href="/login"}async getAuthHeader(){const t=await this.getToken();return t?`Bearer ${t}`:null}async makeAuthenticatedRequest(t,r={}){const n=await this.getToken();if(!n)throw new Error("No authentication token found");const s={"Content-Type":"application/json",Authorization:`Bearer ${n}`,...r.headers},a=await fetch(t,{...r,headers:s});if(a.status===401)if(await this.refreshToken()){const o=await this.getToken();return s.Authorization=`Bearer ${o}`,fetch(t,{...r,headers:s})}else throw this.logout(),new Error("Authentication failed");return a}async refreshToken(){const t=this.getRefreshToken();if(!t)return!1;try{const r=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(r.ok){const n=await r.json(),s=n.accessToken||n.token;return s?await this.setToken(s)?(n.refreshToken&&this.setRefreshToken(n.refreshToken),!0):(console.error("Failed to store refreshed token"),!1):(console.error("Refresh token response missing accessToken"),!1)}else{const n=await r.json().catch(()=>({}));return console.error("Token refresh failed:",r.status,n.message||"Unknown error"),!1}}catch(r){console.error("Error refreshing token:",r)}return!1}async getAccessToken(){return await this.getToken()}decodeToken(t){try{if(typeof t!="string"||!t.includes("."))return console.warn("Invalid token format - not a JWT"),this.clearAuth(),null;const r=t.split(".");return r.length!==3?(console.warn("Invalid token format - not 3 parts"),this.clearAuth(),null):JSON.parse(atob(r[1]))}catch(r){return console.error("Error decoding token:",r),console.warn("Token appears to be corrupted - clearing authentication"),this.clearAuth(),null}}async init(){return await this.isAuthenticated()?(this.setupTokenRefresh(),!0):(window.location.pathname!=="/login"&&(window.location.href="/login"),!1)}setupTokenRefresh(){setInterval(async()=>{await this.isAuthenticated()&&await this.refreshToken()},3e3*1e3)}}const qX=new sje;window.tokenManager=qX;if(typeof document<"u"){const e=async()=>{await qX.init()};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}class KX{constructor(){this.currentRole=null,this.loadedFunctions=new Set,this.blockedFunctions=new Set,this.initialized=!1,this.retryCount=0,this.maxRetries=20}initialize(){if(this.initialized){console.log("[DEBUG] Role-based loader already initialized, skipping...");return}if(this.retryCount>=this.maxRetries){console.warn("[DEBUG] Max retries reached, stopping role-based loader initialization");return}if(this.retryCount++,(this.retryCount%5===1||this.retryCount===this.maxRetries)&&console.log(`[DEBUG] Role-based loader initializing... (attempt ${this.retryCount}/${this.maxRetries})`),console.log("[DEBUG] Token manager available:",!!window.tokenManager),window.tokenManager&&window.tokenManager.isAuthenticated()){const t=window.tokenManager.getUserRole();console.log("[DEBUG] Role from token manager:",t),console.log("[DEBUG] Access token exists:",!!window.tokenManager.getAccessToken()),t?(this.currentRole=t,this.initialized=!0,this.retryCount=0,this.setupRoleBasedAccess()):(console.log("[DEBUG] No role found, waiting for role to be set..."),setTimeout(()=>this.initialize(),500))}else console.log("[DEBUG] Token manager not available or not authenticated, waiting..."),setTimeout(()=>this.initialize(),500)}setupRoleBasedAccess(){this.currentRole||(console.warn("No role detected, defaulting to student access"),this.currentRole="student");let t=!1;try{const r=window.tokenManager.getAccessToken();r&&(t=window.tokenManager.decodeToken(r).role==="admin")}catch(r){console.warn("Could not decode token for admin check:",r),t=!1}console.log(`Role-based loader initialized for: ${this.currentRole}${t?" (admin)":""}`),this.loadRoleSpecificFunctions(),this.setupRoleBasedUI(),this.replaceBlockedFunctions()}loadRoleSpecificFunctions(){this.currentRole==="teacher"?this.loadTeacherFunctions():this.currentRole==="student"&&this.loadStudentFunctions()}loadTeacherFunctions(){console.log("Teacher functions already available in main script")}loadStudentFunctions(){console.log("Student functions already available in main script")}loadFunction(t,r){console.log(`Function ${t} already available in main script for ${r}`),this.loadedFunctions.add(t)}setupRoleBasedUI(){let t=!1;try{const r=window.tokenManager.getAccessToken();r&&(t=window.tokenManager.decodeToken(r).role==="admin")}catch(r){console.warn("Could not decode token for admin check in UI:",r),t=!1}this.currentRole==="student"&&this.hideTeacherElements(),this.currentRole==="teacher"&&!t&&this.hideStudentElements()}hideTeacherElements(){[".teacher-cabinet",".test-creation-panel",".grade-management-panel",".class-management-panel",'[data-role="teacher"]'].forEach(r=>{document.querySelectorAll(r).forEach(s=>{s.style.display="none",s.classList.add("role-hidden")})})}hideStudentElements(){[".student-cabinet",".test-taking-panel",".results-viewing-panel",'[data-role="student"]'].forEach(r=>{document.querySelectorAll(r).forEach(s=>{s.style.display="none",s.classList.add("role-hidden")})})}replaceBlockedFunctions(){this.currentRole==="student"?this.blockTeacherFunctions():this.currentRole==="teacher"&&this.blockStudentFunctions()}blockTeacherFunctions(){Object.entries({createTest:()=>this.showAccessDenied("teacher"),assignTest:()=>this.showAccessDenied("teacher"),gradeTest:()=>this.showAccessDenied("teacher"),manageClasses:()=>this.showAccessDenied("teacher"),viewAllResults:()=>this.showAccessDenied("teacher")}).forEach(([r,n])=>{window[r]&&(this.blockedFunctions.add(r),window[r]=n)})}blockStudentFunctions(){Object.entries({takeTest:()=>this.showAccessDenied("student"),submitTest:()=>this.showAccessDenied("student"),viewMyResults:()=>this.showAccessDenied("student")}).forEach(([r,n])=>{window[r]&&(this.blockedFunctions.add(r),window[r]=n)})}showAccessDenied(t){const r=`Access denied. This function requires ${t} role.`;console.warn(r),typeof showNotification=="function"?showNotification(r,"warning"):alert(r)}isFunctionBlocked(t){return this.blockedFunctions.has(t)}isFunctionLoaded(t){return this.loadedFunctions.has(t)}getCurrentRole(){return this.currentRole}hasRole(t){return this.currentRole===t}reloadRoleAccess(){this.initialize()}setupAccessAfterLogin(){if(console.log("[DEBUG] Setting up role-based access after login..."),console.log("[DEBUG] Role-based loader will now initialize (no more retry loop before login)"),!window.tokenManager)return console.error("[ERROR] Token manager not available during setupAccessAfterLogin"),!1;if(!window.tokenManager.isAuthenticated())return console.error("[ERROR] User not authenticated during setupAccessAfterLogin"),!1;const t=window.tokenManager.getUserRole();return t?(console.log("[DEBUG] Setting role after login:",t),this.currentRole=t,this.initialized=!0,this.retryCount=0,this.setupRoleBasedAccess(),console.log("[DEBUG] Role-based access setup completed successfully for role:",t),!0):(console.error("[ERROR] No role found in token during setupAccessAfterLogin"),!1)}}window.roleBasedLoader=new KX;typeof Xb<"u"&&Xb.exports&&(Xb.exports=KX);const aje=()=>{const e={schemaVersion:"2.0",enhancedFeatures:!0,newUserStructure:!0,newTestStructure:!0};localStorage.setItem("app_init_data",JSON.stringify(e))},ije=()=>{aje(),TJ.createRoot(document.getElementById("root")).render(c.jsx(la.StrictMode,{children:c.jsx(nje,{})}))};ije()});export default oje();
